{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/379034654", "html_url": "https://github.com/pytorch/pytorch/issues/4247#issuecomment-379034654", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/4247", "id": 379034654, "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTAzNDY1NA==", "user": {"login": "gasse", "id": 1726818, "node_id": "MDQ6VXNlcjE3MjY4MTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1726818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gasse", "html_url": "https://github.com/gasse", "followers_url": "https://api.github.com/users/gasse/followers", "following_url": "https://api.github.com/users/gasse/following{/other_user}", "gists_url": "https://api.github.com/users/gasse/gists{/gist_id}", "starred_url": "https://api.github.com/users/gasse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gasse/subscriptions", "organizations_url": "https://api.github.com/users/gasse/orgs", "repos_url": "https://api.github.com/users/gasse/repos", "events_url": "https://api.github.com/users/gasse/events{/privacy}", "received_events_url": "https://api.github.com/users/gasse/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-05T18:33:36Z", "updated_at": "2018-04-05T18:33:36Z", "author_association": "NONE", "body_html": "<p>I am facing a problem where <code>zero=</code> argument for sparse matrices would be very useful (though I would rather name it <code>empty=</code>). I want to perform a softmax on the rows of a sparse matrix, where empty cells shall correspond to 0 probability (hence -Infinity values before softmax). This is useful when implementing graph attention networks (<a href=\"https://arxiv.org/abs/1710.10903\" rel=\"nofollow\">https://arxiv.org/abs/1710.10903</a>) on large graphs, where adjacencies shall be represented as sparse matrices.</p>\n<p>Although I am can not think of a proper way to implement this <code>empty=</code> option, I could definitely use a <code>sum()</code> and a <code>max()</code> operation on sparse matrices as well!</p>", "body_text": "I am facing a problem where zero= argument for sparse matrices would be very useful (though I would rather name it empty=). I want to perform a softmax on the rows of a sparse matrix, where empty cells shall correspond to 0 probability (hence -Infinity values before softmax). This is useful when implementing graph attention networks (https://arxiv.org/abs/1710.10903) on large graphs, where adjacencies shall be represented as sparse matrices.\nAlthough I am can not think of a proper way to implement this empty= option, I could definitely use a sum() and a max() operation on sparse matrices as well!", "body": "I am facing a problem where `zero=` argument for sparse matrices would be very useful (though I would rather name it `empty=`). I want to perform a softmax on the rows of a sparse matrix, where empty cells shall correspond to 0 probability (hence -Infinity values before softmax). This is useful when implementing graph attention networks (https://arxiv.org/abs/1710.10903) on large graphs, where adjacencies shall be represented as sparse matrices.\r\n\r\nAlthough I am can not think of a proper way to implement this `empty=` option, I could definitely use a `sum()` and a `max()` operation on sparse matrices as well!"}
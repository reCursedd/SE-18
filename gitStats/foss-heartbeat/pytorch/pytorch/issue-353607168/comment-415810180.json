{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/415810180", "html_url": "https://github.com/pytorch/pytorch/pull/10842#issuecomment-415810180", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/10842", "id": 415810180, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTgxMDE4MA==", "user": {"login": "mcarilli", "id": 7799218, "node_id": "MDQ6VXNlcjc3OTkyMTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/7799218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarilli", "html_url": "https://github.com/mcarilli", "followers_url": "https://api.github.com/users/mcarilli/followers", "following_url": "https://api.github.com/users/mcarilli/following{/other_user}", "gists_url": "https://api.github.com/users/mcarilli/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarilli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarilli/subscriptions", "organizations_url": "https://api.github.com/users/mcarilli/orgs", "repos_url": "https://api.github.com/users/mcarilli/repos", "events_url": "https://api.github.com/users/mcarilli/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarilli/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-24T16:23:40Z", "updated_at": "2018-08-24T16:23:40Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks for the heart even though my builds are crashing and burning :P</p>\n<p>Why are they crashing and burning?  Everything builds and runs without trouble on my local machine.  Do the new files (native/WeightNorm.cpp and native/cuda/WeightNorm.cu) need to be registered with the build system in some way that I overlooked?  On my machine it appears they are autodetected.</p>\n<p>As near as I can tell, the common factor is that I'm getting linker errors when linking caffe2 tests:</p>\n<pre><code>01:15:40 [ 88%] Linking CXX executable ../bin/tbb_init_test\n01:15:40 /var/lib/jenkins/workspace/build/lib/libcaffe2.so: undefined reference to `at::native::weight_norm_differentiable_backward(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, long)'\n</code></pre>\n<p>which may mean that the linker can't find the object file containing those functions, or those object files were never created in the first place.</p>\n<p>The rocm builds are failing as well with variants of</p>\n<pre><code>/var/lib/jenkins/workspace/aten/src/ATen/native/cuda/WeightNorm.cu:353:9: error: no matching function for call to 'hipLaunchKernelGGL'\n</code></pre>\n<p>Looks like a compile time error, otherwise I have no idea.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13564\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ezyang\">@ezyang</a> I'm told you're the build system expert.  Any help would be greatly appreciated!</p>", "body_text": "Thanks for the heart even though my builds are crashing and burning :P\nWhy are they crashing and burning?  Everything builds and runs without trouble on my local machine.  Do the new files (native/WeightNorm.cpp and native/cuda/WeightNorm.cu) need to be registered with the build system in some way that I overlooked?  On my machine it appears they are autodetected.\nAs near as I can tell, the common factor is that I'm getting linker errors when linking caffe2 tests:\n01:15:40 [ 88%] Linking CXX executable ../bin/tbb_init_test\n01:15:40 /var/lib/jenkins/workspace/build/lib/libcaffe2.so: undefined reference to `at::native::weight_norm_differentiable_backward(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, long)'\n\nwhich may mean that the linker can't find the object file containing those functions, or those object files were never created in the first place.\nThe rocm builds are failing as well with variants of\n/var/lib/jenkins/workspace/aten/src/ATen/native/cuda/WeightNorm.cu:353:9: error: no matching function for call to 'hipLaunchKernelGGL'\n\nLooks like a compile time error, otherwise I have no idea.\n@ezyang I'm told you're the build system expert.  Any help would be greatly appreciated!", "body": "Thanks for the heart even though my builds are crashing and burning :P \r\n\r\nWhy are they crashing and burning?  Everything builds and runs without trouble on my local machine.  Do the new files (native/WeightNorm.cpp and native/cuda/WeightNorm.cu) need to be registered with the build system in some way that I overlooked?  On my machine it appears they are autodetected.\r\n\r\nAs near as I can tell, the common factor is that I'm getting linker errors when linking caffe2 tests:\r\n```\r\n01:15:40 [ 88%] Linking CXX executable ../bin/tbb_init_test\r\n01:15:40 /var/lib/jenkins/workspace/build/lib/libcaffe2.so: undefined reference to `at::native::weight_norm_differentiable_backward(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, long)'\r\n```\r\nwhich may mean that the linker can't find the object file containing those functions, or those object files were never created in the first place.\r\n\r\nThe rocm builds are failing as well with variants of  \r\n```\r\n/var/lib/jenkins/workspace/aten/src/ATen/native/cuda/WeightNorm.cu:353:9: error: no matching function for call to 'hipLaunchKernelGGL'\r\n```\r\nLooks like a compile time error, otherwise I have no idea.\r\n\r\n@ezyang I'm told you're the build system expert.  Any help would be greatly appreciated!"}
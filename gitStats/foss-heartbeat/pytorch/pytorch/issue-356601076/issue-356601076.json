{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11207", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11207/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11207/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11207/events", "html_url": "https://github.com/pytorch/pytorch/issues/11207", "id": 356601076, "node_id": "MDU6SXNzdWUzNTY2MDEwNzY=", "number": 11207, "title": "Build fails on mpi_test.cc file", "user": {"login": "sadatnfs", "id": 19790145, "node_id": "MDQ6VXNlcjE5NzkwMTQ1", "avatar_url": "https://avatars2.githubusercontent.com/u/19790145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sadatnfs", "html_url": "https://github.com/sadatnfs", "followers_url": "https://api.github.com/users/sadatnfs/followers", "following_url": "https://api.github.com/users/sadatnfs/following{/other_user}", "gists_url": "https://api.github.com/users/sadatnfs/gists{/gist_id}", "starred_url": "https://api.github.com/users/sadatnfs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sadatnfs/subscriptions", "organizations_url": "https://api.github.com/users/sadatnfs/orgs", "repos_url": "https://api.github.com/users/sadatnfs/repos", "events_url": "https://api.github.com/users/sadatnfs/events{/privacy}", "received_events_url": "https://api.github.com/users/sadatnfs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443484135, "node_id": "MDU6TGFiZWw0NDM0ODQxMzU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/high%20priority", "name": "high priority", "color": "F22613", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-03T21:22:48Z", "updated_at": "2018-09-10T22:33:21Z", "closed_at": "2018-09-10T22:33:21Z", "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>I'm trying to compile PyTorch in my Docker and getting the following error during compilation, seems to be failing at <code>mpi_test.cc</code> (still in Caffe2).</p>\n<h2>Code example</h2>\n<p>Error trace:</p>\n<pre lang=\"[\" data-meta=\"88%] Linking CXX executable ../bin/mpi_test\"><code>\n/usr/bin/ld: CMakeFiles/mpi_test.dir/mpi/mpi_test.cc.o: undefined reference to symbol '_ZN3MPI8Datatype4FreeEv'\n\n//usr/lib/x86_64-linux-gnu/libmpi_cxx.so.20: error adding symbols: DSO missing from command line\n\ncollect2: error: ld returned 1 exit status\n\nmake[2]: *** [bin/mpi_test] Error 1\n\ncaffe2/CMakeFiles/mpi_test.dir/build.make:104: recipe for target 'bin/mpi_test' failed\n\nCMakeFiles/Makefile2:3724: recipe for target 'caffe2/CMakeFiles/mpi_test.dir/all' failed\n\nmake[1]: *** [caffe2/CMakeFiles/mpi_test.dir/all] Error 2\n\nmake[1]: *** Waiting for unfinished jobs....\n\n[ 88%] Built target transform_test\n\n</code></pre>\n<h2>System Info</h2>\n<p>Build command (from source):</p>\n<p>NOTE that I have to empty out the MKLDNN variables on this Docker layer because PyTorch fails to build using native MKL-DNN (a la <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"342560096\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/9580\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/9580/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/9580\">#9580</a>) and that issue hasn't been fixed or commented on in a while..</p>\n<pre lang=\"cd\" data-meta=\"/opt &amp;&amp; git clone --recursive https://github.com/pytorch/pytorch \\\"><code>    &amp;&amp; cd pytorch &amp;&amp; git submodule update --init &amp;&amp; \\\n    cd /opt/pytorch &amp;&amp; \\\n    PYTHON_EXECUTABLE=/opt/conda/lib/libpython3.6m.so \\\n    PYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m \\\n    FULL_CAFFE2=1 \\\n    USE_OPENMP=1 \\\n    USE_MKL=1 \\\n    USE_MKLDNN=1 \\\n    MKLDNN_LIBRARY=\"\" \\\n    MKLDNN_INCLUDE_DIR=\"\" \\\n    MKLDNN_LIB_DIR=\"\" \\\n    python setup.py install\n</code></pre>", "body_text": "Issue description\nI'm trying to compile PyTorch in my Docker and getting the following error during compilation, seems to be failing at mpi_test.cc (still in Caffe2).\nCode example\nError trace:\n\n/usr/bin/ld: CMakeFiles/mpi_test.dir/mpi/mpi_test.cc.o: undefined reference to symbol '_ZN3MPI8Datatype4FreeEv'\n\n//usr/lib/x86_64-linux-gnu/libmpi_cxx.so.20: error adding symbols: DSO missing from command line\n\ncollect2: error: ld returned 1 exit status\n\nmake[2]: *** [bin/mpi_test] Error 1\n\ncaffe2/CMakeFiles/mpi_test.dir/build.make:104: recipe for target 'bin/mpi_test' failed\n\nCMakeFiles/Makefile2:3724: recipe for target 'caffe2/CMakeFiles/mpi_test.dir/all' failed\n\nmake[1]: *** [caffe2/CMakeFiles/mpi_test.dir/all] Error 2\n\nmake[1]: *** Waiting for unfinished jobs....\n\n[ 88%] Built target transform_test\n\n\nSystem Info\nBuild command (from source):\nNOTE that I have to empty out the MKLDNN variables on this Docker layer because PyTorch fails to build using native MKL-DNN (a la #9580) and that issue hasn't been fixed or commented on in a while..\n    && cd pytorch && git submodule update --init && \\\n    cd /opt/pytorch && \\\n    PYTHON_EXECUTABLE=/opt/conda/lib/libpython3.6m.so \\\n    PYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m \\\n    FULL_CAFFE2=1 \\\n    USE_OPENMP=1 \\\n    USE_MKL=1 \\\n    USE_MKLDNN=1 \\\n    MKLDNN_LIBRARY=\"\" \\\n    MKLDNN_INCLUDE_DIR=\"\" \\\n    MKLDNN_LIB_DIR=\"\" \\\n    python setup.py install", "body": "## Issue description\r\n\r\nI'm trying to compile PyTorch in my Docker and getting the following error during compilation, seems to be failing at `mpi_test.cc` (still in Caffe2).\r\n\r\n## Code example\r\n\r\nError trace:\r\n```[ 88%] Linking CXX executable ../bin/mpi_test\r\n\r\n/usr/bin/ld: CMakeFiles/mpi_test.dir/mpi/mpi_test.cc.o: undefined reference to symbol '_ZN3MPI8Datatype4FreeEv'\r\n\r\n//usr/lib/x86_64-linux-gnu/libmpi_cxx.so.20: error adding symbols: DSO missing from command line\r\n\r\ncollect2: error: ld returned 1 exit status\r\n\r\nmake[2]: *** [bin/mpi_test] Error 1\r\n\r\ncaffe2/CMakeFiles/mpi_test.dir/build.make:104: recipe for target 'bin/mpi_test' failed\r\n\r\nCMakeFiles/Makefile2:3724: recipe for target 'caffe2/CMakeFiles/mpi_test.dir/all' failed\r\n\r\nmake[1]: *** [caffe2/CMakeFiles/mpi_test.dir/all] Error 2\r\n\r\nmake[1]: *** Waiting for unfinished jobs....\r\n\r\n[ 88%] Built target transform_test\r\n\r\n```\r\n\r\n## System Info\r\nBuild command (from source):\r\n\r\nNOTE that I have to empty out the MKLDNN variables on this Docker layer because PyTorch fails to build using native MKL-DNN (a la #9580) and that issue hasn't been fixed or commented on in a while..\r\n\r\n``` cd /opt && git clone --recursive https://github.com/pytorch/pytorch \\\r\n    && cd pytorch && git submodule update --init && \\\r\n    cd /opt/pytorch && \\\r\n    PYTHON_EXECUTABLE=/opt/conda/lib/libpython3.6m.so \\\r\n    PYTHON_INCLUDE_DIR=/opt/conda/include/python3.6m \\\r\n    FULL_CAFFE2=1 \\\r\n    USE_OPENMP=1 \\\r\n    USE_MKL=1 \\\r\n    USE_MKLDNN=1 \\\r\n    MKLDNN_LIBRARY=\"\" \\\r\n    MKLDNN_INCLUDE_DIR=\"\" \\\r\n    MKLDNN_LIB_DIR=\"\" \\\r\n    python setup.py install\r\n```\r\n\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/198198446", "pull_request_review_id": 132081154, "id": 198198446, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5ODE5ODQ0Ng==", "diff_hunk": "@@ -0,0 +1,11 @@\n+#include \"caffe2/core/operator_c10wrapper.h\"\n+\n+namespace caffe2 {\n+\n+CAFFE_DEFINE_REGISTRY(", "path": "caffe2/core/operator_c10wrapper.cc", "position": 5, "original_position": 5, "commit_id": "b51ba2cfd61abaec097d02696047d902a3949a38", "original_commit_id": "670d9800c34d8a8190bec37b25c86f8a16892846", "user": {"login": "dzhulgakov", "id": 17890620, "node_id": "MDQ6VXNlcjE3ODkwNjIw", "avatar_url": "https://avatars2.githubusercontent.com/u/17890620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dzhulgakov", "html_url": "https://github.com/dzhulgakov", "followers_url": "https://api.github.com/users/dzhulgakov/followers", "following_url": "https://api.github.com/users/dzhulgakov/following{/other_user}", "gists_url": "https://api.github.com/users/dzhulgakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dzhulgakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dzhulgakov/subscriptions", "organizations_url": "https://api.github.com/users/dzhulgakov/orgs", "repos_url": "https://api.github.com/users/dzhulgakov/repos", "events_url": "https://api.github.com/users/dzhulgakov/events{/privacy}", "received_events_url": "https://api.github.com/users/dzhulgakov/received_events", "type": "User", "site_admin": false}, "body": "So two important questions:\r\n1) why do we have a separate registry? In the current setting you do lookup in precisely the same way as the main registry of C2\r\n2) how does device handling happen? right now you unconditionally dispatch to this registry without looking at DeviceType. Is the intention that with Tensor class merge we'd just dispatch on Tensor class itself and let your new dispatcher handle the details? If so - let's add those comment so that you diff doesn't get affected by the Tensor refactoring", "created_at": "2018-06-26T15:46:42Z", "updated_at": "2018-11-23T15:46:20Z", "html_url": "https://github.com/pytorch/pytorch/pull/8809#discussion_r198198446", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/8809", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/198198446"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/8809#discussion_r198198446"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/8809"}}, "body_html": "<p>So two important questions:</p>\n<ol>\n<li>why do we have a separate registry? In the current setting you do lookup in precisely the same way as the main registry of C2</li>\n<li>how does device handling happen? right now you unconditionally dispatch to this registry without looking at DeviceType. Is the intention that with Tensor class merge we'd just dispatch on Tensor class itself and let your new dispatcher handle the details? If so - let's add those comment so that you diff doesn't get affected by the Tensor refactoring</li>\n</ol>", "body_text": "So two important questions:\n\nwhy do we have a separate registry? In the current setting you do lookup in precisely the same way as the main registry of C2\nhow does device handling happen? right now you unconditionally dispatch to this registry without looking at DeviceType. Is the intention that with Tensor class merge we'd just dispatch on Tensor class itself and let your new dispatcher handle the details? If so - let's add those comment so that you diff doesn't get affected by the Tensor refactoring"}
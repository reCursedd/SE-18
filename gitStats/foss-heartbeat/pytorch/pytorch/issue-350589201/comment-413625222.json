{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/413625222", "html_url": "https://github.com/pytorch/pytorch/issues/10515#issuecomment-413625222", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/10515", "id": 413625222, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzYyNTIyMg==", "user": {"login": "minthetkhine", "id": 36428221, "node_id": "MDQ6VXNlcjM2NDI4MjIx", "avatar_url": "https://avatars0.githubusercontent.com/u/36428221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minthetkhine", "html_url": "https://github.com/minthetkhine", "followers_url": "https://api.github.com/users/minthetkhine/followers", "following_url": "https://api.github.com/users/minthetkhine/following{/other_user}", "gists_url": "https://api.github.com/users/minthetkhine/gists{/gist_id}", "starred_url": "https://api.github.com/users/minthetkhine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minthetkhine/subscriptions", "organizations_url": "https://api.github.com/users/minthetkhine/orgs", "repos_url": "https://api.github.com/users/minthetkhine/repos", "events_url": "https://api.github.com/users/minthetkhine/events{/privacy}", "received_events_url": "https://api.github.com/users/minthetkhine/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-16T17:34:35Z", "updated_at": "2018-08-16T17:34:35Z", "author_association": "NONE", "body_html": "<p>How do I know if I am creating a net inside a separate workspace? Right now, I am passing in separate workspaces to each thread, but inside each thread target function, I am not sure how to make sure that I am creating a net inside that workspace.</p>\n<pre><code>def worker(self, new_workspace):\n\n        print(\"type: {}\".format(type(new_workspace)))\n        print(\"in workspace: {}\".format(workspace.CurrentWorkspace()))\n\n        # model\n        merge_cfg_from_file('/home/alfred/exp/DensePose/configs/DensePose_ResNet101_FPN_s1x-e2e.yaml')\n        weights = cache_url('https://s3.amazonaws.com/densepose/DensePose_ResNet101_FPN_s1x-e2e.pkl', cfg.DOWNLOAD_CACHE)\n        assert_and_infer_cfg(cache_urls=False)\n        model = infer_engine.initialize_model_from_cfg(weights)\n\n        while True:\n            data = self.tasks.get()\n            self.densepose(data, model)\n\n   def run_workers(self):\n\n        workspaces = [workspace.C.Workspace() for _ in range(self.NUM_THREADS)]\n        threads = [threading.Thread(name='thread{}'.format(i), target=self.worker, args=(workspaces[i],)) for i in range(self.NUM_THREADS)]\n\n        for thread in threads:\n            thread.start()\n</code></pre>\n<p>This is my example code.</p>", "body_text": "How do I know if I am creating a net inside a separate workspace? Right now, I am passing in separate workspaces to each thread, but inside each thread target function, I am not sure how to make sure that I am creating a net inside that workspace.\ndef worker(self, new_workspace):\n\n        print(\"type: {}\".format(type(new_workspace)))\n        print(\"in workspace: {}\".format(workspace.CurrentWorkspace()))\n\n        # model\n        merge_cfg_from_file('/home/alfred/exp/DensePose/configs/DensePose_ResNet101_FPN_s1x-e2e.yaml')\n        weights = cache_url('https://s3.amazonaws.com/densepose/DensePose_ResNet101_FPN_s1x-e2e.pkl', cfg.DOWNLOAD_CACHE)\n        assert_and_infer_cfg(cache_urls=False)\n        model = infer_engine.initialize_model_from_cfg(weights)\n\n        while True:\n            data = self.tasks.get()\n            self.densepose(data, model)\n\n   def run_workers(self):\n\n        workspaces = [workspace.C.Workspace() for _ in range(self.NUM_THREADS)]\n        threads = [threading.Thread(name='thread{}'.format(i), target=self.worker, args=(workspaces[i],)) for i in range(self.NUM_THREADS)]\n\n        for thread in threads:\n            thread.start()\n\nThis is my example code.", "body": "How do I know if I am creating a net inside a separate workspace? Right now, I am passing in separate workspaces to each thread, but inside each thread target function, I am not sure how to make sure that I am creating a net inside that workspace.\r\n\r\n```\r\ndef worker(self, new_workspace):\r\n\r\n        print(\"type: {}\".format(type(new_workspace)))\r\n        print(\"in workspace: {}\".format(workspace.CurrentWorkspace()))\r\n\r\n        # model\r\n        merge_cfg_from_file('/home/alfred/exp/DensePose/configs/DensePose_ResNet101_FPN_s1x-e2e.yaml')\r\n        weights = cache_url('https://s3.amazonaws.com/densepose/DensePose_ResNet101_FPN_s1x-e2e.pkl', cfg.DOWNLOAD_CACHE)\r\n        assert_and_infer_cfg(cache_urls=False)\r\n        model = infer_engine.initialize_model_from_cfg(weights)\r\n\r\n        while True:\r\n            data = self.tasks.get()\r\n            self.densepose(data, model)\r\n\r\n   def run_workers(self):\r\n\r\n        workspaces = [workspace.C.Workspace() for _ in range(self.NUM_THREADS)]\r\n        threads = [threading.Thread(name='thread{}'.format(i), target=self.worker, args=(workspaces[i],)) for i in range(self.NUM_THREADS)]\r\n\r\n        for thread in threads:\r\n            thread.start()\r\n```\r\n\r\nThis is my example code."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/279", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/279/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/279/events", "html_url": "https://github.com/pytorch/pytorch/issues/279", "id": 192867554, "node_id": "MDU6SXNzdWUxOTI4Njc1NTQ=", "number": 279, "title": "Support graphs with stochastic nodes in torch.autograd", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 424131849, "node_id": "MDU6TGFiZWw0MjQxMzE4NDk=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true}, {"id": 443484135, "node_id": "MDU6TGFiZWw0NDM0ODQxMzU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/high%20priority", "name": "high priority", "color": "F22613", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-12-01T14:52:52Z", "updated_at": "2016-12-16T13:34:05Z", "closed_at": "2016-12-16T13:34:05Z", "author_association": "MEMBER", "body_html": "<p>We\u2019ve had some discussions on the stochastic nodes (see e.g. <a href=\"https://arxiv.org/abs/1506.05254\" rel=\"nofollow\">this paper for discussion</a>) this week and this is the API we concluded on.</p>\n<p><strong>EDIT: WE'VE CHANGED THE API</strong></p>\n<div class=\"highlight highlight-source-python\"><pre>y1 <span class=\"pl-k\">=</span> f(input1, weights)\nz1 <span class=\"pl-k\">=</span> sample(y1)\nr1 <span class=\"pl-k\">=</span> get_reward(z1)\n\ny2 <span class=\"pl-k\">=</span> f(input2, weights)\nz2 <span class=\"pl-k\">=</span> sample(y2)\nr2 <span class=\"pl-k\">=</span> get_reward(z2)\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> r1 and r2 is are vectors of scalar rewards</span>\n\nz1.reinforce(r1 <span class=\"pl-k\">+</span> gamma<span class=\"pl-k\">*</span>r2)\nz2.reinforce(r2)\n(r1 <span class=\"pl-k\">+</span> r2).backward()</pre></div>\n<p>cc: <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5995229\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ludc\">@ludc</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2973937\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yuandong-tian\">@yuandong-tian</a></p>", "body_text": "We\u2019ve had some discussions on the stochastic nodes (see e.g. this paper for discussion) this week and this is the API we concluded on.\nEDIT: WE'VE CHANGED THE API\ny1 = f(input1, weights)\nz1 = sample(y1)\nr1 = get_reward(z1)\n\ny2 = f(input2, weights)\nz2 = sample(y2)\nr2 = get_reward(z2)\n\n# r1 and r2 is are vectors of scalar rewards\n\nz1.reinforce(r1 + gamma*r2)\nz2.reinforce(r2)\n(r1 + r2).backward()\ncc: @ludc @yuandong-tian", "body": "We\u2019ve had some discussions on the stochastic nodes (see e.g. [this paper for discussion](https://arxiv.org/abs/1506.05254)) this week and this is the API we concluded on.\r\n\r\n**EDIT: WE'VE CHANGED THE API**\r\n\r\n```python\r\ny1 = f(input1, weights)\r\nz1 = sample(y1)\r\nr1 = get_reward(z1)\r\n\r\ny2 = f(input2, weights)\r\nz2 = sample(y2)\r\nr2 = get_reward(z2)\r\n\r\n# r1 and r2 is are vectors of scalar rewards\r\n\r\nz1.reinforce(r1 + gamma*r2)\r\nz2.reinforce(r2)\r\n(r1 + r2).backward()\r\n```\r\n\r\ncc: @ludc @yuandong-tian"}
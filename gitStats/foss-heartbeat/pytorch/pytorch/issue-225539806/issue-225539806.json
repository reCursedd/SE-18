{"url": "https://api.github.com/repos/pytorch/pytorch/issues/1424", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/1424/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/1424/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/1424/events", "html_url": "https://github.com/pytorch/pytorch/issues/1424", "id": 225539806, "node_id": "MDU6SXNzdWUyMjU1Mzk4MDY=", "number": 1424, "title": "in-place operations with 0-strided tensors (numpy has the same issue)", "user": {"login": "gchanan", "id": 3768583, "node_id": "MDQ6VXNlcjM3Njg1ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3768583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gchanan", "html_url": "https://github.com/gchanan", "followers_url": "https://api.github.com/users/gchanan/followers", "following_url": "https://api.github.com/users/gchanan/following{/other_user}", "gists_url": "https://api.github.com/users/gchanan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gchanan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gchanan/subscriptions", "organizations_url": "https://api.github.com/users/gchanan/orgs", "repos_url": "https://api.github.com/users/gchanan/repos", "events_url": "https://api.github.com/users/gchanan/events{/privacy}", "received_events_url": "https://api.github.com/users/gchanan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-01T22:06:02Z", "updated_at": "2017-05-01T22:09:20Z", "closed_at": "2017-05-01T22:09:20Z", "author_association": "CONTRIBUTOR", "body_html": "<pre><code>&gt;&gt;&gt; x=torch.randn(1).expand(4)\n&gt;&gt;&gt; x\n\n-0.7935\n-0.7935\n-0.7935\n-0.7935\n[torch.FloatTensor of size 4]\n\n&gt;&gt;&gt; y=torch.randn(4)\n&gt;&gt;&gt; y\n\n 0.5023\n-0.7951\n 1.0681\n-0.4830\n[torch.FloatTensor of size 4]\n\n&gt;&gt;&gt; x+y\n\n-0.2912\n-1.5886\n 0.2745\n-1.2765\n[torch.FloatTensor of size 4]\n\n&gt;&gt;&gt; x[0]+y.sum()\n-0.5012176930904388\n&gt;&gt;&gt; x+=y\n&gt;&gt;&gt; x\n\n-0.5012\n-0.5012\n-0.5012\n-0.5012\n[torch.FloatTensor of size 4]\n</code></pre>\n<p>Interestingly, numpy has the same issue:</p>\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; from numpy.lib.stride_tricks import as_strided\n&gt;&gt;&gt; x=np.random.randn(1)\n&gt;&gt;&gt; x=as_strided(x,strides=(0,),shape=(4,))\n&gt;&gt;&gt; x\narray([ 1.57037336,  1.57037336,  1.57037336,  1.57037336])\n&gt;&gt;&gt; y=np.random.randn(4)\n&gt;&gt;&gt; y\narray([-2.62254949,  0.2584895 , -0.26970582,  0.42979655])\n&gt;&gt;&gt; x+y\narray([-1.05217613,  1.82886286,  1.30066753,  2.0001699 ])\n&gt;&gt;&gt; x[0]+y.sum()\n-0.63359590442714908\n&gt;&gt;&gt; x+=y\n&gt;&gt;&gt; x\narray([-0.6335959, -0.6335959, -0.6335959, -0.6335959])\n</code></pre>\n<p>Seems weird not to have it be an error, but I guess preserving numpy semantics is worth something.</p>", "body_text": ">>> x=torch.randn(1).expand(4)\n>>> x\n\n-0.7935\n-0.7935\n-0.7935\n-0.7935\n[torch.FloatTensor of size 4]\n\n>>> y=torch.randn(4)\n>>> y\n\n 0.5023\n-0.7951\n 1.0681\n-0.4830\n[torch.FloatTensor of size 4]\n\n>>> x+y\n\n-0.2912\n-1.5886\n 0.2745\n-1.2765\n[torch.FloatTensor of size 4]\n\n>>> x[0]+y.sum()\n-0.5012176930904388\n>>> x+=y\n>>> x\n\n-0.5012\n-0.5012\n-0.5012\n-0.5012\n[torch.FloatTensor of size 4]\n\nInterestingly, numpy has the same issue:\n>>> import numpy as np\n>>> from numpy.lib.stride_tricks import as_strided\n>>> x=np.random.randn(1)\n>>> x=as_strided(x,strides=(0,),shape=(4,))\n>>> x\narray([ 1.57037336,  1.57037336,  1.57037336,  1.57037336])\n>>> y=np.random.randn(4)\n>>> y\narray([-2.62254949,  0.2584895 , -0.26970582,  0.42979655])\n>>> x+y\narray([-1.05217613,  1.82886286,  1.30066753,  2.0001699 ])\n>>> x[0]+y.sum()\n-0.63359590442714908\n>>> x+=y\n>>> x\narray([-0.6335959, -0.6335959, -0.6335959, -0.6335959])\n\nSeems weird not to have it be an error, but I guess preserving numpy semantics is worth something.", "body": "```\r\n>>> x=torch.randn(1).expand(4)\r\n>>> x\r\n\r\n-0.7935\r\n-0.7935\r\n-0.7935\r\n-0.7935\r\n[torch.FloatTensor of size 4]\r\n\r\n>>> y=torch.randn(4)\r\n>>> y\r\n\r\n 0.5023\r\n-0.7951\r\n 1.0681\r\n-0.4830\r\n[torch.FloatTensor of size 4]\r\n\r\n>>> x+y\r\n\r\n-0.2912\r\n-1.5886\r\n 0.2745\r\n-1.2765\r\n[torch.FloatTensor of size 4]\r\n\r\n>>> x[0]+y.sum()\r\n-0.5012176930904388\r\n>>> x+=y\r\n>>> x\r\n\r\n-0.5012\r\n-0.5012\r\n-0.5012\r\n-0.5012\r\n[torch.FloatTensor of size 4]\r\n```\r\n\r\nInterestingly, numpy has the same issue:\r\n```\r\n>>> import numpy as np\r\n>>> from numpy.lib.stride_tricks import as_strided\r\n>>> x=np.random.randn(1)\r\n>>> x=as_strided(x,strides=(0,),shape=(4,))\r\n>>> x\r\narray([ 1.57037336,  1.57037336,  1.57037336,  1.57037336])\r\n>>> y=np.random.randn(4)\r\n>>> y\r\narray([-2.62254949,  0.2584895 , -0.26970582,  0.42979655])\r\n>>> x+y\r\narray([-1.05217613,  1.82886286,  1.30066753,  2.0001699 ])\r\n>>> x[0]+y.sum()\r\n-0.63359590442714908\r\n>>> x+=y\r\n>>> x\r\narray([-0.6335959, -0.6335959, -0.6335959, -0.6335959])\r\n```\r\n\r\nSeems weird not to have it be an error, but I guess preserving numpy semantics is worth something.\r\n"}
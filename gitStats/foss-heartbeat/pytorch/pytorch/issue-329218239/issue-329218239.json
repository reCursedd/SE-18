{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8132", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8132/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8132/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8132/events", "html_url": "https://github.com/pytorch/pytorch/pull/8132", "id": 329218239, "node_id": "MDExOlB1bGxSZXF1ZXN0MTkyNTI5Mzky", "number": 8132, "title": "Get rid of SOVERSION (again).", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-04T21:10:07Z", "updated_at": "2018-06-06T02:03:04Z", "closed_at": "2018-06-06T02:03:04Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/8132", "html_url": "https://github.com/pytorch/pytorch/pull/8132", "diff_url": "https://github.com/pytorch/pytorch/pull/8132.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/8132.patch"}, "body_html": "<p>We don't want SOVERSION because pip will lose the symlink and<br>\ndouble your distribution size, and also because our setup.py<br>\naccidentally links against both libcaffe2.dylib and libcaffe2.1.dylib<br>\non OS X.  This leads to a very puzzling error where you get<br>\nthe error \"cannot initialize CUDA without ATen_cuda\", because<br>\nthere are actually two copies of your registry in memory (because<br>\nthere are two copies of the dynamic library).  Dropping SOVERSION<br>\nmakes it impossible to make this mistake.</p>\n<p>In principle, if the shared library load is done with DYLD_GLOBAL,<br>\nthat should also prevent two copies of the registry from popping up.<br>\nWorth checking at some later point, if you need to bring back<br>\nSOVERSION (because, e.g., pip finally fixed their software.)</p>\n<p>Partially <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #8022.\">fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"328376166\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/8022\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/8022/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/8022\">#8022</a>.</p>\n<p>Signed-off-by: Edward Z. Yang <a href=\"mailto:ezyang@fb.com\">ezyang@fb.com</a></p>", "body_text": "We don't want SOVERSION because pip will lose the symlink and\ndouble your distribution size, and also because our setup.py\naccidentally links against both libcaffe2.dylib and libcaffe2.1.dylib\non OS X.  This leads to a very puzzling error where you get\nthe error \"cannot initialize CUDA without ATen_cuda\", because\nthere are actually two copies of your registry in memory (because\nthere are two copies of the dynamic library).  Dropping SOVERSION\nmakes it impossible to make this mistake.\nIn principle, if the shared library load is done with DYLD_GLOBAL,\nthat should also prevent two copies of the registry from popping up.\nWorth checking at some later point, if you need to bring back\nSOVERSION (because, e.g., pip finally fixed their software.)\nPartially fixes #8022.\nSigned-off-by: Edward Z. Yang ezyang@fb.com", "body": "We don't want SOVERSION because pip will lose the symlink and\r\ndouble your distribution size, and also because our setup.py\r\naccidentally links against both libcaffe2.dylib and libcaffe2.1.dylib\r\non OS X.  This leads to a very puzzling error where you get\r\nthe error \"cannot initialize CUDA without ATen_cuda\", because\r\nthere are actually two copies of your registry in memory (because\r\nthere are two copies of the dynamic library).  Dropping SOVERSION\r\nmakes it impossible to make this mistake.\r\n\r\nIn principle, if the shared library load is done with DYLD_GLOBAL,\r\nthat should also prevent two copies of the registry from popping up.\r\nWorth checking at some later point, if you need to bring back\r\nSOVERSION (because, e.g., pip finally fixed their software.)\r\n\r\nPartially fixes #8022.\r\n\r\nSigned-off-by: Edward Z. Yang <ezyang@fb.com>\r\n\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/144684933", "pull_request_review_id": 69382221, "id": 144684933, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDY4NDkzMw==", "diff_hunk": "@@ -21,17 +21,9 @@ def symbolic(g, add_matrix, matrix1, matrix2, beta=1, alpha=1, inplace=False):\n         sizes1 = matrix1.type().sizes()\n         sizes2 = matrix2.type().sizes()\n         sizes_add = add_matrix.type().sizes()\n-        broadcast = False\n-        not_supported = False\n         assert len(sizes1) == 2 and len(sizes2) == 2 and len(sizes_add) <= 2 and len(sizes_add) > 0\n-        if len(sizes_add) == 1:\n-            if sizes_add[0] == sizes2[1]:\n-                broadcast = True\n-            else:\n-                not_supported = True\n-        elif sizes1[0] != sizes_add[0] or sizes2[1] != sizes_add[1]:\n-                not_supported = True\n-        if not_supported:\n+        broadcast, supported = check_onnx_broadcast([sizes1[0], sizes2[1]], sizes_add)\n+        if not supported:", "path": "torch/autograd/_functions/blas.py", "position": 25, "original_position": 25, "commit_id": "a3da65f56a70589baef693c716f941808a11a700", "original_commit_id": "a3da65f56a70589baef693c716f941808a11a700", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "body": "Minor nit: the error message should probably go in the helper, since you'd probably want to raise it any time you use the broadcast checker. At the moment it doesn't matter because check_onnx_broadcast only has one call site.", "created_at": "2017-10-14T03:22:00Z", "updated_at": "2018-11-23T15:35:17Z", "html_url": "https://github.com/pytorch/pytorch/pull/3115#discussion_r144684933", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/3115", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/144684933"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/3115#discussion_r144684933"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/3115"}}, "body_html": "<p>Minor nit: the error message should probably go in the helper, since you'd probably want to raise it any time you use the broadcast checker. At the moment it doesn't matter because check_onnx_broadcast only has one call site.</p>", "body_text": "Minor nit: the error message should probably go in the helper, since you'd probably want to raise it any time you use the broadcast checker. At the moment it doesn't matter because check_onnx_broadcast only has one call site."}
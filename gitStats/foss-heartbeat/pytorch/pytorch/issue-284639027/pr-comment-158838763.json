{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/158838763", "pull_request_review_id": 85700684, "id": 158838763, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1ODgzODc2Mw==", "diff_hunk": "@@ -105,17 +115,18 @@\n \n \n class TestDistributions(TestCase):\n-    def _set_rng_seed(self, seed=0):\n-        torch.manual_seed(seed)\n-        if TEST_NUMPY:\n-            np.random.seed(seed)\n+    def setUp(self):\n+        set_rng_seed(0)", "path": "test/test_distributions.py", "position": null, "original_position": 44, "commit_id": "c5fe0a435b80f7a6089018d22d048d5e1eaf212d", "original_commit_id": "59755110d72c909c47eba18f91242b3658a8289b", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "body": "I think I'd prefer it if the numpy seeding was moved to `test/common.py` (with appropriate conditionals for whether or not numpy is available); we have numpy tests that are not in `test_distributions.py`, but if the random seeding is done here then no other files can benefit. There is an added hazard here which is that if `setUp` in `TestCase` ever changes, the fact that we are not calling the superclass method means that `TestDistributions` will silently fail to get this behavior.", "created_at": "2017-12-27T16:34:27Z", "updated_at": "2018-11-23T15:37:39Z", "html_url": "https://github.com/pytorch/pytorch/pull/4357#discussion_r158838763", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/4357", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/158838763"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/4357#discussion_r158838763"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/4357"}}, "body_html": "<p>I think I'd prefer it if the numpy seeding was moved to <code>test/common.py</code> (with appropriate conditionals for whether or not numpy is available); we have numpy tests that are not in <code>test_distributions.py</code>, but if the random seeding is done here then no other files can benefit. There is an added hazard here which is that if <code>setUp</code> in <code>TestCase</code> ever changes, the fact that we are not calling the superclass method means that <code>TestDistributions</code> will silently fail to get this behavior.</p>", "body_text": "I think I'd prefer it if the numpy seeding was moved to test/common.py (with appropriate conditionals for whether or not numpy is available); we have numpy tests that are not in test_distributions.py, but if the random seeding is done here then no other files can benefit. There is an added hazard here which is that if setUp in TestCase ever changes, the fact that we are not calling the superclass method means that TestDistributions will silently fail to get this behavior."}
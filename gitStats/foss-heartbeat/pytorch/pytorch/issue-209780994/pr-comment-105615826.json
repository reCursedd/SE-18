{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/105615826", "pull_request_review_id": 26502329, "id": 105615826, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTYxNTgyNg==", "diff_hunk": "@@ -565,3 +565,31 @@ def pad(input, pad, mode='constant', value=0):\n             return _functions.thnn.ReplicationPad3d(*pad)(input)\n     else:\n         raise NotImplementedError(\"Only 4D and 5D padding is supported for now\")\n+\n+\n+# distance\n+\n+def pairwise_distance(input, p=2):\n+    r\"\"\"\n+    Computes the batchwise pairwise distance between vectors v1,v2:\n+\n+        .. math ::\n+            \\Vert x \\Vert _p := \\left( \\sum_{i=1}^n  \\vert x_i \\vert ^ p \\right) ^ {1/p}\n+\n+        Args:\n+            x (Tensor): input tensor containing the two input batches\n+            p (real): the norm degree. Default: 2\n+\n+        Shape:\n+            - Input: :math:`(2, N, D)` where `D = vector dimension`", "path": "torch/nn/functional.py", "position": null, "original_position": 20, "commit_id": "f2f438b0d15e0f6dc4098d17a1b27ad8d7c1f1eb", "original_commit_id": "9390cccd0c5a1a7090d1907ec01058476aa3a2f8", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "Actually there's no point in requiring a single input to the module and the function. You could easily compute outputs on two batches with different models, and ignore the cat before feeding them into the pairwise distance. Can you change the signature to `pairwise_distance(x1, x2, p=2, eps=1e-6)` (and do the same with the module)? It's also helpful to be able to change the eps.\r\n\r\n", "created_at": "2017-03-13T09:14:06Z", "updated_at": "2018-11-23T15:32:47Z", "html_url": "https://github.com/pytorch/pytorch/pull/835#discussion_r105615826", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/835", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/105615826"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/835#discussion_r105615826"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/835"}}, "body_html": "<p>Actually there's no point in requiring a single input to the module and the function. You could easily compute outputs on two batches with different models, and ignore the cat before feeding them into the pairwise distance. Can you change the signature to <code>pairwise_distance(x1, x2, p=2, eps=1e-6)</code> (and do the same with the module)? It's also helpful to be able to change the eps.</p>", "body_text": "Actually there's no point in requiring a single input to the module and the function. You could easily compute outputs on two batches with different models, and ignore the cat before feeding them into the pairwise distance. Can you change the signature to pairwise_distance(x1, x2, p=2, eps=1e-6) (and do the same with the module)? It's also helpful to be able to change the eps."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/362879704", "html_url": "https://github.com/pytorch/pytorch/issues/1708#issuecomment-362879704", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1708", "id": 362879704, "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjg3OTcwNA==", "user": {"login": "KeCh96", "id": 19866821, "node_id": "MDQ6VXNlcjE5ODY2ODIx", "avatar_url": "https://avatars3.githubusercontent.com/u/19866821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KeCh96", "html_url": "https://github.com/KeCh96", "followers_url": "https://api.github.com/users/KeCh96/followers", "following_url": "https://api.github.com/users/KeCh96/following{/other_user}", "gists_url": "https://api.github.com/users/KeCh96/gists{/gist_id}", "starred_url": "https://api.github.com/users/KeCh96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KeCh96/subscriptions", "organizations_url": "https://api.github.com/users/KeCh96/orgs", "repos_url": "https://api.github.com/users/KeCh96/repos", "events_url": "https://api.github.com/users/KeCh96/events{/privacy}", "received_events_url": "https://api.github.com/users/KeCh96/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-04T04:19:57Z", "updated_at": "2018-02-04T04:21:31Z", "author_association": "NONE", "body_html": "<p>I have tested <code>m = nn.Conv2d(64, 64, kernel_size=3, groups=64)</code> and <code>m = nn.Conv2d(64, 64, kernel_size=3, groups=1)</code> on both GPU and CPU. In my network, <code>input_channel*K = output_channel</code>, where K is 1 or 2. And I set batchsize=1. The result is as below:</p>\n<p>GPU:</p>\n<blockquote>\n<p>group=1         examples_per_sec: 83<br>\ngroup=4         examples_per_sec: 67<br>\ngroup=32       examples_per_sec: 91</p>\n</blockquote>\n<p>CPU:</p>\n<blockquote>\n<p>group=1         examples_per_sec: 80<br>\ngroup=4         examples_per_sec: 81<br>\ngroup=32       examples_per_sec: 17</p>\n</blockquote>\n<p>Depthwise convolution has not lead to any obvious speedup, even slow on CPU</p>\n<p>Note: my pytorch is 0.3.0, and anaconda is 3-5.0.1. Both are latest version. My CPU is Intel(R) <code>Xeon(R) CPU E5-2680 v4 @ 2.40GHz </code>, and GPU is Tesla K80. My cuda is 8.0</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9110200\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fmassa\">@fmassa</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15841449\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ngimel\">@ngimel</a></p>", "body_text": "I have tested m = nn.Conv2d(64, 64, kernel_size=3, groups=64) and m = nn.Conv2d(64, 64, kernel_size=3, groups=1) on both GPU and CPU. In my network, input_channel*K = output_channel, where K is 1 or 2. And I set batchsize=1. The result is as below:\nGPU:\n\ngroup=1         examples_per_sec: 83\ngroup=4         examples_per_sec: 67\ngroup=32       examples_per_sec: 91\n\nCPU:\n\ngroup=1         examples_per_sec: 80\ngroup=4         examples_per_sec: 81\ngroup=32       examples_per_sec: 17\n\nDepthwise convolution has not lead to any obvious speedup, even slow on CPU\nNote: my pytorch is 0.3.0, and anaconda is 3-5.0.1. Both are latest version. My CPU is Intel(R) Xeon(R) CPU E5-2680 v4 @ 2.40GHz , and GPU is Tesla K80. My cuda is 8.0\n@fmassa @ngimel", "body": "I have tested `m = nn.Conv2d(64, 64, kernel_size=3, groups=64)` and `m = nn.Conv2d(64, 64, kernel_size=3, groups=1)` on both GPU and CPU. In my network, `input_channel*K = output_channel`, where K is 1 or 2. And I set batchsize=1. The result is as below:\r\n\r\nGPU:\r\n> group=1         examples_per_sec: 83\r\n> group=4         examples_per_sec: 67\r\n> group=32       examples_per_sec: 91\r\n> \r\nCPU:\r\n> group=1         examples_per_sec: 80\r\n> group=4         examples_per_sec: 81\r\n> group=32       examples_per_sec: 17\r\n\r\nDepthwise convolution has not lead to any obvious speedup, even slow on CPU\r\n\r\nNote: my pytorch is 0.3.0, and anaconda is 3-5.0.1. Both are latest version. My CPU is Intel(R) `Xeon(R) CPU E5-2680 v4 @ 2.40GHz `, and GPU is Tesla K80. My cuda is 8.0\r\n\r\n\r\n@fmassa @ngimel \r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/215773687", "pull_request_review_id": 153115920, "id": 215773687, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNTc3MzY4Nw==", "diff_hunk": "@@ -46,6 +46,19 @@ def __init__(self, probs=None, logits=None, validate_args=None):\n             batch_shape = self._param.size()\n         super(Bernoulli, self).__init__(batch_shape, validate_args=validate_args)\n \n+    def expand(self, batch_shape):\n+        batch_shape = torch.Size(batch_shape)\n+        new = self.__new__(Bernoulli)", "path": "torch/distributions/bernoulli.py", "position": null, "original_position": 6, "commit_id": "806e268e07ee225cafa459b3ca390b2c4f1a2bd6", "original_commit_id": "cb203efc9cbd7e32ca87f695f90b5defd9e83090", "user": {"login": "neerajprad", "id": 1762463, "node_id": "MDQ6VXNlcjE3NjI0NjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1762463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neerajprad", "html_url": "https://github.com/neerajprad", "followers_url": "https://api.github.com/users/neerajprad/followers", "following_url": "https://api.github.com/users/neerajprad/following{/other_user}", "gists_url": "https://api.github.com/users/neerajprad/gists{/gist_id}", "starred_url": "https://api.github.com/users/neerajprad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neerajprad/subscriptions", "organizations_url": "https://api.github.com/users/neerajprad/orgs", "repos_url": "https://api.github.com/users/neerajprad/repos", "events_url": "https://api.github.com/users/neerajprad/events{/privacy}", "received_events_url": "https://api.github.com/users/neerajprad/received_events", "type": "User", "site_admin": false}, "body": "We are still able to call `base_dist.expand()` in `TransformedDistribution`, so it isn't as bad. For subclasses, we will need to duplicate the `.expand` code from the parent class just to set those attributes. e.g. in `Chi2`, we will need to set `concentration` and `rate` in `.expand`, which are not used inside `Chi2`. I'm not sure whether we should provide this extra `instance` kwarg for convenience, or leave it to the users to hand-code it.", "created_at": "2018-09-06T20:50:22Z", "updated_at": "2018-11-23T15:50:42Z", "html_url": "https://github.com/pytorch/pytorch/pull/11341#discussion_r215773687", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/11341", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/215773687"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/11341#discussion_r215773687"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/11341"}}, "body_html": "<p>We are still able to call <code>base_dist.expand()</code> in <code>TransformedDistribution</code>, so it isn't as bad. For subclasses, we will need to duplicate the <code>.expand</code> code from the parent class just to set those attributes. e.g. in <code>Chi2</code>, we will need to set <code>concentration</code> and <code>rate</code> in <code>.expand</code>, which are not used inside <code>Chi2</code>. I'm not sure whether we should provide this extra <code>instance</code> kwarg for convenience, or leave it to the users to hand-code it.</p>", "body_text": "We are still able to call base_dist.expand() in TransformedDistribution, so it isn't as bad. For subclasses, we will need to duplicate the .expand code from the parent class just to set those attributes. e.g. in Chi2, we will need to set concentration and rate in .expand, which are not used inside Chi2. I'm not sure whether we should provide this extra instance kwarg for convenience, or leave it to the users to hand-code it.", "in_reply_to_id": 215747977}
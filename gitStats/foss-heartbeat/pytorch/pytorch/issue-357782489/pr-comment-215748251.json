{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/215748251", "pull_request_review_id": 153084187, "id": 215748251, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNTc0ODI1MQ==", "diff_hunk": "@@ -46,6 +46,19 @@ def __init__(self, probs=None, logits=None, validate_args=None):\n             batch_shape = self._param.size()\n         super(Bernoulli, self).__init__(batch_shape, validate_args=validate_args)\n \n+    def expand(self, batch_shape):\n+        batch_shape = torch.Size(batch_shape)\n+        new = self.__new__(Bernoulli)\n+        if 'probs' in self.__dict__:\n+            new.probs = self.probs.expand(batch_shape)\n+            new._param = new.probs\n+        else:\n+            new.logits = self.logits.expand(batch_shape)\n+            new._param = new.logits\n+        super(Bernoulli, new).__init__(batch_shape, validate_args=False)", "path": "torch/distributions/bernoulli.py", "position": 13, "original_position": 13, "commit_id": "806e268e07ee225cafa459b3ca390b2c4f1a2bd6", "original_commit_id": "cb203efc9cbd7e32ca87f695f90b5defd9e83090", "user": {"login": "neerajprad", "id": 1762463, "node_id": "MDQ6VXNlcjE3NjI0NjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1762463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neerajprad", "html_url": "https://github.com/neerajprad", "followers_url": "https://api.github.com/users/neerajprad/followers", "following_url": "https://api.github.com/users/neerajprad/following{/other_user}", "gists_url": "https://api.github.com/users/neerajprad/gists{/gist_id}", "starred_url": "https://api.github.com/users/neerajprad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neerajprad/subscriptions", "organizations_url": "https://api.github.com/users/neerajprad/orgs", "repos_url": "https://api.github.com/users/neerajprad/repos", "events_url": "https://api.github.com/users/neerajprad/events{/privacy}", "received_events_url": "https://api.github.com/users/neerajprad/received_events", "type": "User", "site_admin": false}, "body": "That's why `validate_args` is set to False so as not to repeat any argument validation done the first time (if we don't pass this explicitly, we will use the default from the parent distribution which might be `True`). We are setting the `_validate_args` to `self._validate_args` after this, in case the flag is later used to do any other checks.", "created_at": "2018-09-06T19:24:22Z", "updated_at": "2018-11-23T15:50:42Z", "html_url": "https://github.com/pytorch/pytorch/pull/11341#discussion_r215748251", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/11341", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/215748251"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/11341#discussion_r215748251"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/11341"}}, "body_html": "<p>That's why <code>validate_args</code> is set to False so as not to repeat any argument validation done the first time (if we don't pass this explicitly, we will use the default from the parent distribution which might be <code>True</code>). We are setting the <code>_validate_args</code> to <code>self._validate_args</code> after this, in case the flag is later used to do any other checks.</p>", "body_text": "That's why validate_args is set to False so as not to repeat any argument validation done the first time (if we don't pass this explicitly, we will use the default from the parent distribution which might be True). We are setting the _validate_args to self._validate_args after this, in case the flag is later used to do any other checks.", "in_reply_to_id": 215745298}
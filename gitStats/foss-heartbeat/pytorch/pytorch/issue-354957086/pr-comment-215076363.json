{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/215076363", "pull_request_review_id": 152265333, "id": 215076363, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNTA3NjM2Mw==", "diff_hunk": "@@ -6839,6 +6876,9 @@ def clone_inputs(requires_grad):\n     outputs_test = func(*nograd_inputs, **kwargs)\n     self.assertEqual(outputs, outputs_test)\n \n+    graph, graph_inputs = func_graph_inputs(*nograd_inputs, **kwargs)\n+    self.assertExportImport(graph, graph_inputs)", "path": "test/test_jit.py", "position": null, "original_position": 100, "commit_id": "b8f6cdd11f4ac0f908a128858000cc615a7bf816", "original_commit_id": "17abecf1b201c1a2fbe521f84a9d8300f2206247", "user": {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, "body": "This seems like it only does a subset of the tests on an imported and exported graph. For instance, it skips all the grad tests below. \r\n\r\nFurthermore, it causes weird duplication in the all of the harness code so that you can call `assertExportImport`. \r\n\r\nIt seems like it would be easier to just call `getExportImportCopy(m)` inside of `create_traced_fn` and `create_script_fn` and have them accept flags for whether to import/export or not. ", "created_at": "2018-09-04T21:42:26Z", "updated_at": "2018-11-23T15:50:35Z", "html_url": "https://github.com/pytorch/pytorch/pull/10982#discussion_r215076363", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/10982", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/215076363"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/10982#discussion_r215076363"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/10982"}}, "body_html": "<p>This seems like it only does a subset of the tests on an imported and exported graph. For instance, it skips all the grad tests below.</p>\n<p>Furthermore, it causes weird duplication in the all of the harness code so that you can call <code>assertExportImport</code>.</p>\n<p>It seems like it would be easier to just call <code>getExportImportCopy(m)</code> inside of <code>create_traced_fn</code> and <code>create_script_fn</code> and have them accept flags for whether to import/export or not.</p>", "body_text": "This seems like it only does a subset of the tests on an imported and exported graph. For instance, it skips all the grad tests below.\nFurthermore, it causes weird duplication in the all of the harness code so that you can call assertExportImport.\nIt seems like it would be easier to just call getExportImportCopy(m) inside of create_traced_fn and create_script_fn and have them accept flags for whether to import/export or not."}
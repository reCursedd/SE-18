{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4636", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4636/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4636/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4636/events", "html_url": "https://github.com/pytorch/pytorch/issues/4636", "id": 288161838, "node_id": "MDU6SXNzdWUyODgxNjE4Mzg=", "number": 4636, "title": "Better header hygiene in ATen", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-01-12T15:51:40Z", "updated_at": "2018-01-12T15:51:40Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>Steps to reproduce:</p>\n<ol>\n<li>Edit <code>native_functions.yaml</code> to add a single new function</li>\n<li>Rebuild</li>\n</ol>\n<p>Expected result: Quick rebuild<br>\nActual result: Everything in the universe rebuilds</p>\n<p>This is because a good portion of our C++ functions include <code>ATen/ATen.h</code>, which includes the autogenerated (very long) header file, which gets modified when you edit <code>native_functions.yaml</code>.</p>\n<p>I suggest we separate the headers which depend on methods from functions. Methods have to be defined in the class so life is hard, but functions are not, so they can be split up and only functions you actually need can be included. This requires a bit more import discipline, but you now get to avoid long rebuilds.</p>\n<p>(Or maybe you think the cure is worse than the disease.)</p>", "body_text": "Steps to reproduce:\n\nEdit native_functions.yaml to add a single new function\nRebuild\n\nExpected result: Quick rebuild\nActual result: Everything in the universe rebuilds\nThis is because a good portion of our C++ functions include ATen/ATen.h, which includes the autogenerated (very long) header file, which gets modified when you edit native_functions.yaml.\nI suggest we separate the headers which depend on methods from functions. Methods have to be defined in the class so life is hard, but functions are not, so they can be split up and only functions you actually need can be included. This requires a bit more import discipline, but you now get to avoid long rebuilds.\n(Or maybe you think the cure is worse than the disease.)", "body": "Steps to reproduce:\r\n1. Edit `native_functions.yaml` to add a single new function\r\n2. Rebuild\r\n\r\nExpected result: Quick rebuild\r\nActual result: Everything in the universe rebuilds\r\n\r\nThis is because a good portion of our C++ functions include `ATen/ATen.h`, which includes the autogenerated (very long) header file, which gets modified when you edit `native_functions.yaml`.\r\n\r\nI suggest we separate the headers which depend on methods from functions. Methods have to be defined in the class so life is hard, but functions are not, so they can be split up and only functions you actually need can be included. This requires a bit more import discipline, but you now get to avoid long rebuilds.\r\n\r\n(Or maybe you think the cure is worse than the disease.)"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9824", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9824/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9824/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9824/events", "html_url": "https://github.com/pytorch/pytorch/issues/9824", "id": 344512927, "node_id": "MDU6SXNzdWUzNDQ1MTI5Mjc=", "number": 9824, "title": "Pytorch Install error -Segmentation Fault ", "user": {"login": "srams2018", "id": 37077755, "node_id": "MDQ6VXNlcjM3MDc3NzU1", "avatar_url": "https://avatars2.githubusercontent.com/u/37077755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srams2018", "html_url": "https://github.com/srams2018", "followers_url": "https://api.github.com/users/srams2018/followers", "following_url": "https://api.github.com/users/srams2018/following{/other_user}", "gists_url": "https://api.github.com/users/srams2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/srams2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srams2018/subscriptions", "organizations_url": "https://api.github.com/users/srams2018/orgs", "repos_url": "https://api.github.com/users/srams2018/repos", "events_url": "https://api.github.com/users/srams2018/events{/privacy}", "received_events_url": "https://api.github.com/users/srams2018/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-25T16:15:47Z", "updated_at": "2018-07-29T22:43:17Z", "closed_at": "2018-07-29T22:43:17Z", "author_association": "NONE", "body_html": "<p>Configuration Info:-</p>\n<h1>python /data/apps/pytorch/torch/utils/collect_env.py</h1>\n<p>Collecting environment information...<br>\nPyTorch version: 0.4.0<br>\nIs debug build: No<br>\nCUDA used to build PyTorch: 9.0.176</p>\n<p>OS: Red Hat Enterprise Linux Server 7.2 (Maipo)<br>\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)<br>\nCMake version: version 3.5.0</p>\n<p>Python version: 3.6<br>\nIs CUDA available: Yes<br>\nCUDA runtime version: 9.0.176<br>\nGPU models and configuration:<br>\nGPU 0: Tesla P100-SXM2-16GB<br>\nGPU 1: Tesla P100-SXM2-16GB<br>\nGPU 2: Tesla P100-SXM2-16GB<br>\nGPU 3: Tesla P100-SXM2-16GB</p>\n<p>Nvidia driver version: 396.26<br>\ncuDNN version: Probably one of the following:<br>\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so<br>\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5<br>\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5.0.5<br>\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.6<br>\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.6.0.21<br>\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn_static.a<br>\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so<br>\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so.7<br>\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so.7.1.3<br>\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn_static.a</p>\n<p>Versions of relevant libraries:<br>\n[pip3] numpy (1.12.1)<br>\n[pip3] numpydoc (0.6.0)<br>\n[pip3] torch (0.4.0)<br>\n[pip3] torchvision (0.2.1)<br>\n[conda] magma-cuda90              2.3.0                         1    soumith<br>\n[conda] torch                     0.4.0                     <br>\n[conda] torchvision               0.2.1                     </p>\n<p>========================================</p>\n<h1>python setup.py install</h1>\n<p>running install<br>\nrunning build_deps</p>\n<ul>\n<li>USE_CUDA=0</li>\n<li>USE_ROCM=0</li>\n<li>USE_NNPACK=0</li>\n<li>USE_MKLDNN=0</li>\n<li>USE_GLOO_IBVERBS=0</li>\n<li>USE_DISTRIBUTED_MW=0</li>\n<li>FULL_CAFFE2=0</li>\n<li>[[ 9 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>USE_CUDA=1</li>\n<li>shift</li>\n<li>[[ 8 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>USE_NNPACK=1</li>\n<li>shift</li>\n<li>[[ 7 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>break</li>\n<li>CMAKE_INSTALL='make install'</li>\n<li>USER_CFLAGS=</li>\n<li>USER_LDFLAGS=</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]<br>\n++ uname</li>\n<li>'[' Linux == Darwin ']'<br>\n++ dirname tools/build_pytorch_libs.sh</li>\n<li>cd tools/..<br>\n+++ pwd<br>\n++ printf '%q\\n' /data/apps/pytorch</li>\n<li>PWD=/data/apps/pytorch</li>\n<li>BASE_DIR=/data/apps/pytorch</li>\n<li>TORCH_LIB_DIR=/data/apps/pytorch/torch/lib</li>\n<li>INSTALL_DIR=/data/apps/pytorch/torch/lib/tmp_install</li>\n<li>THIRD_PARTY_DIR=/data/apps/pytorch/third_party</li>\n<li>CMAKE_VERSION=cmake</li>\n<li>C_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\"'</li>\n<li>C_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'</li>\n<li>LDFLAGS='-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\" '</li>\n<li>LD_POSTFIX=.so<br>\n++ uname</li>\n<li>[[ Linux == \\D\\a\\r\\w\\i\\n ]]</li>\n<li>LDFLAGS='-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'</li>\n<li>CPP_FLAGS=' -std=c++11 '</li>\n<li>GLOO_FLAGS=</li>\n<li>THD_FLAGS=</li>\n<li>NCCL_ROOT_DIR=/data/apps/pytorch/torch/lib/tmp_install</li>\n<li>[[ 1 -eq 1 ]]</li>\n<li>GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/data/apps/pytorch/torch/lib/tmp_install'</li>\n<li>[[ 0 -eq 1 ]]</li>\n<li>[[ 0 -eq 1 ]]</li>\n<li>CWRAP_FILES='/data/apps/pytorch/torch/lib/ATen/Declarations.cwrap;/data/apps/pytorch/torch/lib/THNN/generic/THNN.h;/data/apps/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/data/apps/pytorch/torch/lib/ATen/nn.yaml'</li>\n<li>CUDA_NVCC_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'</li>\n<li>[[ -z '' ]]</li>\n<li>CUDA_DEVICE_DEBUG=0</li>\n<li>'[' -z 48 ']'</li>\n<li>BUILD_TYPE=Release</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]</li>\n<li>echo 'Building in Release mode'<br>\nBuilding in Release mode</li>\n<li>mkdir -p torch/lib/tmp_install</li>\n<li>for arg in '\"$@\"'</li>\n<li>[[ nccl == \\n\\c\\c\\l ]]</li>\n<li>pushd /data/apps/pytorch/third_party<br>\n/data/apps/pytorch/third_party /data/apps/pytorch</li>\n<li>build_nccl</li>\n<li>mkdir -p build/nccl</li>\n<li>pushd build/nccl<br>\n/data/apps/pytorch/third_party/build/nccl /data/apps/pytorch/third_party /data/apps/pytorch</li>\n<li>cmake ../../nccl -DCMAKE_MODULE_PATH=/data/apps/pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/data/apps/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/data/apps/pytorch/cmake/public/utils.cmake -DNUM_JOBS=48<br>\n-- Autodetected CUDA architecture(s): 6.0 6.0 6.0 6.0<br>\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_60,code=sm_60<br>\n-- Configuring done<br>\n-- Generating done<br>\n-- Build files have been written to: /data/apps/pytorch/third_party/build/nccl</li>\n<li>make install -j48<br>\n[100%] Built target nccl<br>\nInstall the project...<br>\n-- Install configuration: \"Release\"<br>\n-- Up-to-date: /data/apps/pytorch/torch/lib/tmp_install/include/nccl.h</li>\n<li>mkdir -p /data/apps/pytorch/torch/lib/tmp_install/lib</li>\n<li>cp lib/libnccl.so.1 /data/apps/pytorch/torch/lib/tmp_install/lib/libnccl.so.1</li>\n<li>'[' '!' -f /data/apps/pytorch/torch/lib/tmp_install/lib/libnccl.so ']'</li>\n<li>popd<br>\n/data/apps/pytorch/third_party /data/apps/pytorch</li>\n<li>popd<br>\n/data/apps/pytorch</li>\n<li>for arg in '\"$@\"'</li>\n<li>[[ caffe2 == \\n\\c\\c\\l ]]</li>\n<li>[[ caffe2 == \\g\\l\\o\\o ]]</li>\n<li>[[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]</li>\n<li>pushd /data/apps/pytorch<br>\n/data/apps/pytorch /data/apps/pytorch</li>\n<li>build_caffe2</li>\n<li>[[ -z '' ]]</li>\n<li>EXTRA_CAFFE2_CMAKE_FLAGS=()</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n /data/anaconda/4.3.1/3/lib/python3.6/site-packages ]]</li>\n<li>EXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")</li>\n<li>mkdir -p build</li>\n<li>pushd build<br>\n/data/apps/pytorch/build /data/apps/pytorch /data/apps/pytorch</li>\n<li>cmake .. -DBUILDING_WITH_TORCH_LIBS=ON -DCMAKE_BUILD_TYPE=Release -DBUILD_CAFFE2=0 -DBUILD_TORCH=ON -DBUILD_ATEN=ON -DBUILD_PYTHON=0 -DBUILD_BINARY=OFF -DBUILD_SHARED_LIBS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=1 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DCUDNN_INCLUDE_DIR=/usr/local/cuda/include -DCUDNN_LIB_DIR=/usr/local/cuda/lib64 -DCUDNN_LIBRARY=/usr/local/cuda/lib64/libcudnn.so.7 -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/data/apps/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' -DCMAKE_PREFIX_PATH=/data/anaconda/4.3.1/3/lib/python3.6/site-packages<br>\n-- The CXX compiler identification is GNU 4.8.5<br>\n-- The C compiler identification is GNU 4.8.5<br>\n-- Check for working CXX compiler: /usr/bin/c++<br>\n-- Check for working CXX compiler: /usr/bin/c++ -- works<br>\n-- Detecting CXX compiler ABI info<br>\n-- Detecting CXX compiler ABI info - done<br>\n-- Detecting CXX compile features<br>\n-- Detecting CXX compile features - done<br>\n-- Check for working C compiler: /usr/bin/cc<br>\n-- Check for working C compiler: /usr/bin/cc -- works<br>\n-- Detecting C compiler ABI info<br>\n-- Detecting C compiler ABI info - done<br>\n-- Detecting C compile features<br>\n-- Detecting C compile features - done<br>\n-- Not forcing any particular BLAS to be found<br>\n-- Performing Test CAFFE2_LONG_IS_INT32_OR_64<br>\n-- Performing Test CAFFE2_LONG_IS_INT32_OR_64 - Success<br>\n-- Does not need to define long separately.<br>\n-- Performing Test CAFFE2_EXCEPTION_PTR_SUPPORTED<br>\n-- Performing Test CAFFE2_EXCEPTION_PTR_SUPPORTED - Success<br>\n-- std::exception_ptr is supported.<br>\n-- Performing Test CAFFE2_IS_NUMA_AVAILABLE<br>\n-- Performing Test CAFFE2_IS_NUMA_AVAILABLE - Failed<br>\n-- NUMA is not available<br>\n-- Performing Test CAFFE2_NEED_TO_TURN_OFF_DEPRECATION_WARNING<br>\n-- Performing Test CAFFE2_NEED_TO_TURN_OFF_DEPRECATION_WARNING - Failed<br>\n-- Turning off deprecation warning due to glog.<br>\n-- Performing Test CAFFE2_COMPILER_SUPPORTS_AVX2_EXTENSIONS<br>\n-- Performing Test CAFFE2_COMPILER_SUPPORTS_AVX2_EXTENSIONS - Success<br>\n-- Current compiler supports avx2 extention. Will build perfkernels.<br>\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_VISIBILITY<br>\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_VISIBILITY - Success<br>\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_INLINE_VISIBILITY<br>\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_INLINE_VISIBILITY - Success<br>\n-- Building using own protobuf under third_party per request.<br>\n-- Use custom protobuf build.<br>\n-- Looking for pthread.h<br>\n-- Looking for pthread.h - found<br>\n-- Looking for pthread_create<br>\n-- Looking for pthread_create - not found<br>\n-- Looking for pthread_create in pthreads<br>\n-- Looking for pthread_create in pthreads - not found<br>\n-- Looking for pthread_create in pthread<br>\n-- Looking for pthread_create in pthread - found<br>\n-- Found Threads: TRUE<br>\ntools/build_pytorch_libs.sh: line 239: 53362 Segmentation fault      ${CMAKE_VERSION} .. ${CMAKE_GENERATOR} -DBUILDING_WITH_TORCH_LIBS=ON -DCMAKE_BUILD_TYPE=$BUILD_TYPE -DBUILD_CAFFE2=$FULL_CAFFE2 -DBUILD_TORCH=$BUILD_TORCH -DBUILD_ATEN=ON -DBUILD_PYTHON=$FULL_CAFFE2 -DBUILD_BINARY=OFF -DBUILD_SHARED_LIBS=ON -DONNX_NAMESPACE=$ONNX_NAMESPACE -DUSE_CUDA=$USE_CUDA -DUSE_ROCM=$USE_ROCM -DUSE_NNPACK=$USE_NNPACK -DCUDNN_INCLUDE_DIR=$CUDNN_INCLUDE_DIR -DCUDNN_LIB_DIR=$CUDNN_LIB_DIR -DCUDNN_LIBRARY=$CUDNN_LIBRARY -DUSE_MKLDNN=$USE_MKLDNN -DMKLDNN_INCLUDE_DIR=$MKLDNN_INCLUDE_DIR -DMKLDNN_LIB_DIR=$MKLDNN_LIB_DIR -DMKLDNN_LIBRARY=$MKLDNN_LIBRARY -DCMAKE_INSTALL_PREFIX=\"$INSTALL_DIR\" -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS=\"$USER_CFLAGS\" -DCMAKE_CXX_FLAGS=\"$USER_CFLAGS\" -DCMAKE_EXE_LINKER_FLAGS=\"$LDFLAGS $USER_LDFLAGS\" -DCMAKE_SHARED_LINKER_FLAGS=\"$LDFLAGS $USER_LDFLAGS\" ${EXTRA_CAFFE2_CMAKE_FLAGS[@]}<br>\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'</li>\n</ul>\n<p>Appreciate if there is any fix for the above error. Even with pip install ,iam getting segmentation fault while running pytorch python programs.</p>", "body_text": "Configuration Info:-\npython /data/apps/pytorch/torch/utils/collect_env.py\nCollecting environment information...\nPyTorch version: 0.4.0\nIs debug build: No\nCUDA used to build PyTorch: 9.0.176\nOS: Red Hat Enterprise Linux Server 7.2 (Maipo)\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)\nCMake version: version 3.5.0\nPython version: 3.6\nIs CUDA available: Yes\nCUDA runtime version: 9.0.176\nGPU models and configuration:\nGPU 0: Tesla P100-SXM2-16GB\nGPU 1: Tesla P100-SXM2-16GB\nGPU 2: Tesla P100-SXM2-16GB\nGPU 3: Tesla P100-SXM2-16GB\nNvidia driver version: 396.26\ncuDNN version: Probably one of the following:\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5.0.5\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.6\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.6.0.21\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn_static.a\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so.7\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so.7.1.3\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn_static.a\nVersions of relevant libraries:\n[pip3] numpy (1.12.1)\n[pip3] numpydoc (0.6.0)\n[pip3] torch (0.4.0)\n[pip3] torchvision (0.2.1)\n[conda] magma-cuda90              2.3.0                         1    soumith\n[conda] torch                     0.4.0                     \n[conda] torchvision               0.2.1                     \n========================================\npython setup.py install\nrunning install\nrunning build_deps\n\nUSE_CUDA=0\nUSE_ROCM=0\nUSE_NNPACK=0\nUSE_MKLDNN=0\nUSE_GLOO_IBVERBS=0\nUSE_DISTRIBUTED_MW=0\nFULL_CAFFE2=0\n[[ 9 -gt 0 ]]\ncase \"$1\" in\nUSE_CUDA=1\nshift\n[[ 8 -gt 0 ]]\ncase \"$1\" in\nUSE_NNPACK=1\nshift\n[[ 7 -gt 0 ]]\ncase \"$1\" in\nbreak\nCMAKE_INSTALL='make install'\nUSER_CFLAGS=\nUSER_LDFLAGS=\n[[ -n '' ]]\n[[ -n '' ]]\n[[ -n '' ]]\n++ uname\n'[' Linux == Darwin ']'\n++ dirname tools/build_pytorch_libs.sh\ncd tools/..\n+++ pwd\n++ printf '%q\\n' /data/apps/pytorch\nPWD=/data/apps/pytorch\nBASE_DIR=/data/apps/pytorch\nTORCH_LIB_DIR=/data/apps/pytorch/torch/lib\nINSTALL_DIR=/data/apps/pytorch/torch/lib/tmp_install\nTHIRD_PARTY_DIR=/data/apps/pytorch/third_party\nCMAKE_VERSION=cmake\nC_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\"'\nC_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\nLDFLAGS='-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\" '\nLD_POSTFIX=.so\n++ uname\n[[ Linux == \\D\\a\\r\\w\\i\\n ]]\nLDFLAGS='-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\nCPP_FLAGS=' -std=c++11 '\nGLOO_FLAGS=\nTHD_FLAGS=\nNCCL_ROOT_DIR=/data/apps/pytorch/torch/lib/tmp_install\n[[ 1 -eq 1 ]]\nGLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/data/apps/pytorch/torch/lib/tmp_install'\n[[ 0 -eq 1 ]]\n[[ 0 -eq 1 ]]\nCWRAP_FILES='/data/apps/pytorch/torch/lib/ATen/Declarations.cwrap;/data/apps/pytorch/torch/lib/THNN/generic/THNN.h;/data/apps/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/data/apps/pytorch/torch/lib/ATen/nn.yaml'\nCUDA_NVCC_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n[[ -z '' ]]\nCUDA_DEVICE_DEBUG=0\n'[' -z 48 ']'\nBUILD_TYPE=Release\n[[ -n '' ]]\n[[ -n '' ]]\necho 'Building in Release mode'\nBuilding in Release mode\nmkdir -p torch/lib/tmp_install\nfor arg in '\"$@\"'\n[[ nccl == \\n\\c\\c\\l ]]\npushd /data/apps/pytorch/third_party\n/data/apps/pytorch/third_party /data/apps/pytorch\nbuild_nccl\nmkdir -p build/nccl\npushd build/nccl\n/data/apps/pytorch/third_party/build/nccl /data/apps/pytorch/third_party /data/apps/pytorch\ncmake ../../nccl -DCMAKE_MODULE_PATH=/data/apps/pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/data/apps/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/data/apps/pytorch/cmake/public/utils.cmake -DNUM_JOBS=48\n-- Autodetected CUDA architecture(s): 6.0 6.0 6.0 6.0\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_60,code=sm_60\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /data/apps/pytorch/third_party/build/nccl\nmake install -j48\n[100%] Built target nccl\nInstall the project...\n-- Install configuration: \"Release\"\n-- Up-to-date: /data/apps/pytorch/torch/lib/tmp_install/include/nccl.h\nmkdir -p /data/apps/pytorch/torch/lib/tmp_install/lib\ncp lib/libnccl.so.1 /data/apps/pytorch/torch/lib/tmp_install/lib/libnccl.so.1\n'[' '!' -f /data/apps/pytorch/torch/lib/tmp_install/lib/libnccl.so ']'\npopd\n/data/apps/pytorch/third_party /data/apps/pytorch\npopd\n/data/apps/pytorch\nfor arg in '\"$@\"'\n[[ caffe2 == \\n\\c\\c\\l ]]\n[[ caffe2 == \\g\\l\\o\\o ]]\n[[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]\npushd /data/apps/pytorch\n/data/apps/pytorch /data/apps/pytorch\nbuild_caffe2\n[[ -z '' ]]\nEXTRA_CAFFE2_CMAKE_FLAGS=()\n[[ -n '' ]]\n[[ -n /data/anaconda/4.3.1/3/lib/python3.6/site-packages ]]\nEXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")\nmkdir -p build\npushd build\n/data/apps/pytorch/build /data/apps/pytorch /data/apps/pytorch\ncmake .. -DBUILDING_WITH_TORCH_LIBS=ON -DCMAKE_BUILD_TYPE=Release -DBUILD_CAFFE2=0 -DBUILD_TORCH=ON -DBUILD_ATEN=ON -DBUILD_PYTHON=0 -DBUILD_BINARY=OFF -DBUILD_SHARED_LIBS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=1 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DCUDNN_INCLUDE_DIR=/usr/local/cuda/include -DCUDNN_LIB_DIR=/usr/local/cuda/lib64 -DCUDNN_LIBRARY=/usr/local/cuda/lib64/libcudnn.so.7 -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/data/apps/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' -DCMAKE_PREFIX_PATH=/data/anaconda/4.3.1/3/lib/python3.6/site-packages\n-- The CXX compiler identification is GNU 4.8.5\n-- The C compiler identification is GNU 4.8.5\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Not forcing any particular BLAS to be found\n-- Performing Test CAFFE2_LONG_IS_INT32_OR_64\n-- Performing Test CAFFE2_LONG_IS_INT32_OR_64 - Success\n-- Does not need to define long separately.\n-- Performing Test CAFFE2_EXCEPTION_PTR_SUPPORTED\n-- Performing Test CAFFE2_EXCEPTION_PTR_SUPPORTED - Success\n-- std::exception_ptr is supported.\n-- Performing Test CAFFE2_IS_NUMA_AVAILABLE\n-- Performing Test CAFFE2_IS_NUMA_AVAILABLE - Failed\n-- NUMA is not available\n-- Performing Test CAFFE2_NEED_TO_TURN_OFF_DEPRECATION_WARNING\n-- Performing Test CAFFE2_NEED_TO_TURN_OFF_DEPRECATION_WARNING - Failed\n-- Turning off deprecation warning due to glog.\n-- Performing Test CAFFE2_COMPILER_SUPPORTS_AVX2_EXTENSIONS\n-- Performing Test CAFFE2_COMPILER_SUPPORTS_AVX2_EXTENSIONS - Success\n-- Current compiler supports avx2 extention. Will build perfkernels.\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_VISIBILITY\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_VISIBILITY - Success\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_INLINE_VISIBILITY\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_INLINE_VISIBILITY - Success\n-- Building using own protobuf under third_party per request.\n-- Use custom protobuf build.\n-- Looking for pthread.h\n-- Looking for pthread.h - found\n-- Looking for pthread_create\n-- Looking for pthread_create - not found\n-- Looking for pthread_create in pthreads\n-- Looking for pthread_create in pthreads - not found\n-- Looking for pthread_create in pthread\n-- Looking for pthread_create in pthread - found\n-- Found Threads: TRUE\ntools/build_pytorch_libs.sh: line 239: 53362 Segmentation fault      ${CMAKE_VERSION} .. ${CMAKE_GENERATOR} -DBUILDING_WITH_TORCH_LIBS=ON -DCMAKE_BUILD_TYPE=$BUILD_TYPE -DBUILD_CAFFE2=$FULL_CAFFE2 -DBUILD_TORCH=$BUILD_TORCH -DBUILD_ATEN=ON -DBUILD_PYTHON=$FULL_CAFFE2 -DBUILD_BINARY=OFF -DBUILD_SHARED_LIBS=ON -DONNX_NAMESPACE=$ONNX_NAMESPACE -DUSE_CUDA=$USE_CUDA -DUSE_ROCM=$USE_ROCM -DUSE_NNPACK=$USE_NNPACK -DCUDNN_INCLUDE_DIR=$CUDNN_INCLUDE_DIR -DCUDNN_LIB_DIR=$CUDNN_LIB_DIR -DCUDNN_LIBRARY=$CUDNN_LIBRARY -DUSE_MKLDNN=$USE_MKLDNN -DMKLDNN_INCLUDE_DIR=$MKLDNN_INCLUDE_DIR -DMKLDNN_LIB_DIR=$MKLDNN_LIB_DIR -DMKLDNN_LIBRARY=$MKLDNN_LIBRARY -DCMAKE_INSTALL_PREFIX=\"$INSTALL_DIR\" -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS=\"$USER_CFLAGS\" -DCMAKE_CXX_FLAGS=\"$USER_CFLAGS\" -DCMAKE_EXE_LINKER_FLAGS=\"$LDFLAGS $USER_LDFLAGS\" -DCMAKE_SHARED_LINKER_FLAGS=\"$LDFLAGS $USER_LDFLAGS\" ${EXTRA_CAFFE2_CMAKE_FLAGS[@]}\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\n\nAppreciate if there is any fix for the above error. Even with pip install ,iam getting segmentation fault while running pytorch python programs.", "body": "Configuration Info:-\r\n# python /data/apps/pytorch/torch/utils/collect_env.py\r\nCollecting environment information...\r\nPyTorch version: 0.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Red Hat Enterprise Linux Server 7.2 (Maipo)\r\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)\r\nCMake version: version 3.5.0\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 9.0.176\r\nGPU models and configuration:\r\nGPU 0: Tesla P100-SXM2-16GB\r\nGPU 1: Tesla P100-SXM2-16GB\r\nGPU 2: Tesla P100-SXM2-16GB\r\nGPU 3: Tesla P100-SXM2-16GB\r\n\r\nNvidia driver version: 396.26\r\ncuDNN version: Probably one of the following:\r\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so\r\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5\r\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5.0.5\r\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.6\r\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.6.0.21\r\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn_static.a\r\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so\r\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so.7\r\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so.7.1.3\r\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn_static.a\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy (1.12.1)\r\n[pip3] numpydoc (0.6.0)\r\n[pip3] torch (0.4.0)\r\n[pip3] torchvision (0.2.1)\r\n[conda] magma-cuda90              2.3.0                         1    soumith\r\n[conda] torch                     0.4.0                     <pip>\r\n[conda] torchvision               0.2.1                     <pip>\r\n\r\n========================================\r\n# python setup.py install\r\nrunning install\r\nrunning build_deps\r\n+ USE_CUDA=0\r\n+ USE_ROCM=0\r\n+ USE_NNPACK=0\r\n+ USE_MKLDNN=0\r\n+ USE_GLOO_IBVERBS=0\r\n+ USE_DISTRIBUTED_MW=0\r\n+ FULL_CAFFE2=0\r\n+ [[ 9 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_CUDA=1\r\n+ shift\r\n+ [[ 8 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_NNPACK=1\r\n+ shift\r\n+ [[ 7 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ break\r\n+ CMAKE_INSTALL='make install'\r\n+ USER_CFLAGS=\r\n+ USER_LDFLAGS=\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n++ uname\r\n+ '[' Linux == Darwin ']'\r\n++ dirname tools/build_pytorch_libs.sh\r\n+ cd tools/..\r\n+++ pwd\r\n++ printf '%q\\n' /data/apps/pytorch\r\n+ PWD=/data/apps/pytorch\r\n+ BASE_DIR=/data/apps/pytorch\r\n+ TORCH_LIB_DIR=/data/apps/pytorch/torch/lib\r\n+ INSTALL_DIR=/data/apps/pytorch/torch/lib/tmp_install\r\n+ THIRD_PARTY_DIR=/data/apps/pytorch/third_party\r\n+ CMAKE_VERSION=cmake\r\n+ C_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\"'\r\n+ C_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ LDFLAGS='-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\" '\r\n+ LD_POSTFIX=.so\r\n++ uname\r\n+ [[ Linux == \\D\\a\\r\\w\\i\\n ]]\r\n+ LDFLAGS='-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\r\n+ CPP_FLAGS=' -std=c++11 '\r\n+ GLOO_FLAGS=\r\n+ THD_FLAGS=\r\n+ NCCL_ROOT_DIR=/data/apps/pytorch/torch/lib/tmp_install\r\n+ [[ 1 -eq 1 ]]\r\n+ GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/data/apps/pytorch/torch/lib/tmp_install'\r\n+ [[ 0 -eq 1 ]]\r\n+ [[ 0 -eq 1 ]]\r\n+ CWRAP_FILES='/data/apps/pytorch/torch/lib/ATen/Declarations.cwrap;/data/apps/pytorch/torch/lib/THNN/generic/THNN.h;/data/apps/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/data/apps/pytorch/torch/lib/ATen/nn.yaml'\r\n+ CUDA_NVCC_FLAGS=' -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ [[ -z '' ]]\r\n+ CUDA_DEVICE_DEBUG=0\r\n+ '[' -z 48 ']'\r\n+ BUILD_TYPE=Release\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ echo 'Building in Release mode'\r\nBuilding in Release mode\r\n+ mkdir -p torch/lib/tmp_install\r\n+ for arg in '\"$@\"'\r\n+ [[ nccl == \\n\\c\\c\\l ]]\r\n+ pushd /data/apps/pytorch/third_party\r\n/data/apps/pytorch/third_party /data/apps/pytorch\r\n+ build_nccl\r\n+ mkdir -p build/nccl\r\n+ pushd build/nccl\r\n/data/apps/pytorch/third_party/build/nccl /data/apps/pytorch/third_party /data/apps/pytorch\r\n+ cmake ../../nccl -DCMAKE_MODULE_PATH=/data/apps/pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/data/apps/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\"/data/apps/pytorch/torch/lib/tmp_install/include\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/TH\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THS\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/data/apps/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/data/apps/pytorch/cmake/public/utils.cmake -DNUM_JOBS=48\r\n-- Autodetected CUDA architecture(s): 6.0 6.0 6.0 6.0\r\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_60,code=sm_60\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /data/apps/pytorch/third_party/build/nccl\r\n+ make install -j48\r\n[100%] Built target nccl\r\nInstall the project...\r\n-- Install configuration: \"Release\"\r\n-- Up-to-date: /data/apps/pytorch/torch/lib/tmp_install/include/nccl.h\r\n+ mkdir -p /data/apps/pytorch/torch/lib/tmp_install/lib\r\n+ cp lib/libnccl.so.1 /data/apps/pytorch/torch/lib/tmp_install/lib/libnccl.so.1\r\n+ '[' '!' -f /data/apps/pytorch/torch/lib/tmp_install/lib/libnccl.so ']'\r\n+ popd\r\n/data/apps/pytorch/third_party /data/apps/pytorch\r\n+ popd\r\n/data/apps/pytorch\r\n+ for arg in '\"$@\"'\r\n+ [[ caffe2 == \\n\\c\\c\\l ]]\r\n+ [[ caffe2 == \\g\\l\\o\\o ]]\r\n+ [[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]\r\n+ pushd /data/apps/pytorch\r\n/data/apps/pytorch /data/apps/pytorch\r\n+ build_caffe2\r\n+ [[ -z '' ]]\r\n+ EXTRA_CAFFE2_CMAKE_FLAGS=()\r\n+ [[ -n '' ]]\r\n+ [[ -n /data/anaconda/4.3.1/3/lib/python3.6/site-packages ]]\r\n+ EXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")\r\n+ mkdir -p build\r\n+ pushd build\r\n/data/apps/pytorch/build /data/apps/pytorch /data/apps/pytorch\r\n+ cmake .. -DBUILDING_WITH_TORCH_LIBS=ON -DCMAKE_BUILD_TYPE=Release -DBUILD_CAFFE2=0 -DBUILD_TORCH=ON -DBUILD_ATEN=ON -DBUILD_PYTHON=0 -DBUILD_BINARY=OFF -DBUILD_SHARED_LIBS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=1 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DCUDNN_INCLUDE_DIR=/usr/local/cuda/include -DCUDNN_LIB_DIR=/usr/local/cuda/lib64 -DCUDNN_LIBRARY=/usr/local/cuda/lib64/libcudnn.so.7 -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/data/apps/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/data/apps/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' -DCMAKE_PREFIX_PATH=/data/anaconda/4.3.1/3/lib/python3.6/site-packages\r\n-- The CXX compiler identification is GNU 4.8.5\r\n-- The C compiler identification is GNU 4.8.5\r\n-- Check for working CXX compiler: /usr/bin/c++\r\n-- Check for working CXX compiler: /usr/bin/c++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Check for working C compiler: /usr/bin/cc\r\n-- Check for working C compiler: /usr/bin/cc -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Not forcing any particular BLAS to be found\r\n-- Performing Test CAFFE2_LONG_IS_INT32_OR_64\r\n-- Performing Test CAFFE2_LONG_IS_INT32_OR_64 - Success\r\n-- Does not need to define long separately.\r\n-- Performing Test CAFFE2_EXCEPTION_PTR_SUPPORTED\r\n-- Performing Test CAFFE2_EXCEPTION_PTR_SUPPORTED - Success\r\n-- std::exception_ptr is supported.\r\n-- Performing Test CAFFE2_IS_NUMA_AVAILABLE\r\n-- Performing Test CAFFE2_IS_NUMA_AVAILABLE - Failed\r\n-- NUMA is not available\r\n-- Performing Test CAFFE2_NEED_TO_TURN_OFF_DEPRECATION_WARNING\r\n-- Performing Test CAFFE2_NEED_TO_TURN_OFF_DEPRECATION_WARNING - Failed\r\n-- Turning off deprecation warning due to glog.\r\n-- Performing Test CAFFE2_COMPILER_SUPPORTS_AVX2_EXTENSIONS\r\n-- Performing Test CAFFE2_COMPILER_SUPPORTS_AVX2_EXTENSIONS - Success\r\n-- Current compiler supports avx2 extention. Will build perfkernels.\r\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_VISIBILITY\r\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_VISIBILITY - Success\r\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_INLINE_VISIBILITY\r\n-- Performing Test COMPILER_SUPPORTS_HIDDEN_INLINE_VISIBILITY - Success\r\n-- Building using own protobuf under third_party per request.\r\n-- Use custom protobuf build.\r\n-- Looking for pthread.h\r\n-- Looking for pthread.h - found\r\n-- Looking for pthread_create\r\n-- Looking for pthread_create - not found\r\n-- Looking for pthread_create in pthreads\r\n-- Looking for pthread_create in pthreads - not found\r\n-- Looking for pthread_create in pthread\r\n-- Looking for pthread_create in pthread - found\r\n-- Found Threads: TRUE\r\ntools/build_pytorch_libs.sh: line 239: 53362 Segmentation fault      ${CMAKE_VERSION} .. ${CMAKE_GENERATOR} -DBUILDING_WITH_TORCH_LIBS=ON -DCMAKE_BUILD_TYPE=$BUILD_TYPE -DBUILD_CAFFE2=$FULL_CAFFE2 -DBUILD_TORCH=$BUILD_TORCH -DBUILD_ATEN=ON -DBUILD_PYTHON=$FULL_CAFFE2 -DBUILD_BINARY=OFF -DBUILD_SHARED_LIBS=ON -DONNX_NAMESPACE=$ONNX_NAMESPACE -DUSE_CUDA=$USE_CUDA -DUSE_ROCM=$USE_ROCM -DUSE_NNPACK=$USE_NNPACK -DCUDNN_INCLUDE_DIR=$CUDNN_INCLUDE_DIR -DCUDNN_LIB_DIR=$CUDNN_LIB_DIR -DCUDNN_LIBRARY=$CUDNN_LIBRARY -DUSE_MKLDNN=$USE_MKLDNN -DMKLDNN_INCLUDE_DIR=$MKLDNN_INCLUDE_DIR -DMKLDNN_LIB_DIR=$MKLDNN_LIB_DIR -DMKLDNN_LIBRARY=$MKLDNN_LIBRARY -DCMAKE_INSTALL_PREFIX=\"$INSTALL_DIR\" -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS=\"$USER_CFLAGS\" -DCMAKE_CXX_FLAGS=\"$USER_CFLAGS\" -DCMAKE_EXE_LINKER_FLAGS=\"$LDFLAGS $USER_LDFLAGS\" -DCMAKE_SHARED_LINKER_FLAGS=\"$LDFLAGS $USER_LDFLAGS\" ${EXTRA_CAFFE2_CMAKE_FLAGS[@]}\r\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\r\n\r\nAppreciate if there is any fix for the above error. Even with pip install ,iam getting segmentation fault while running pytorch python programs."}
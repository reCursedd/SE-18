{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6062", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6062/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6062/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6062/events", "html_url": "https://github.com/pytorch/pytorch/pull/6062", "id": 309236189, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc3OTQwNjI5", "number": 6062, "title": "Enable MKLDNN convolution forward and backward", "user": {"login": "mingfeima", "id": 20233731, "node_id": "MDQ6VXNlcjIwMjMzNzMx", "avatar_url": "https://avatars0.githubusercontent.com/u/20233731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingfeima", "html_url": "https://github.com/mingfeima", "followers_url": "https://api.github.com/users/mingfeima/followers", "following_url": "https://api.github.com/users/mingfeima/following{/other_user}", "gists_url": "https://api.github.com/users/mingfeima/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingfeima/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingfeima/subscriptions", "organizations_url": "https://api.github.com/users/mingfeima/orgs", "repos_url": "https://api.github.com/users/mingfeima/repos", "events_url": "https://api.github.com/users/mingfeima/events{/privacy}", "received_events_url": "https://api.github.com/users/mingfeima/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-03-28T06:25:49Z", "updated_at": "2018-03-30T14:44:41Z", "closed_at": "2018-03-29T22:25:08Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/6062", "html_url": "https://github.com/pytorch/pytorch/pull/6062", "diff_url": "https://github.com/pytorch/pytorch/pull/6062.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/6062.patch"}, "body_html": "<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"282297290\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/4186\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/4186/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/4186\">#4186</a> provide MKLDNN for convolution computation.<br>\nmkldnn internal layout is completed <strong>hidden</strong> inside mkldnn_convolution_xxx functions. Both input and output of convolution are in PyTorch <strong>native BCHW layout</strong>.</p>\n<p>on Xeon skylake 8180, 2 sockets with 28 cores per socket @ 2.50GHz, the performance with and without mkldnn is</p>\n<table>\n<thead>\n<tr>\n<th><a href=\"https://github.com/mingfeima/convnet-benchmarks/tree/master/pytorch\">convnet-benchmark</a></th>\n<th>original</th>\n<th>mkldnn</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>alexnet</td>\n<td>24.8</td>\n<td>182</td>\n</tr>\n<tr>\n<td>vgg11</td>\n<td>2.3</td>\n<td>14.6</td>\n</tr>\n<tr>\n<td>inception_v3</td>\n<td>3.3</td>\n<td>14.3</td>\n</tr>\n<tr>\n<td>resnet50</td>\n<td>3.3</td>\n<td>17.0</td>\n</tr>\n</tbody>\n</table>\n<p>the compilation requires mkldnn to be pre-installed in conda via</p>\n<div class=\"highlight highlight-source-shell\"><pre>conda install -c mingfeima mkldnn </pre></div>", "body_text": "#4186 provide MKLDNN for convolution computation.\nmkldnn internal layout is completed hidden inside mkldnn_convolution_xxx functions. Both input and output of convolution are in PyTorch native BCHW layout.\non Xeon skylake 8180, 2 sockets with 28 cores per socket @ 2.50GHz, the performance with and without mkldnn is\n\n\n\nconvnet-benchmark\noriginal\nmkldnn\n\n\n\n\nalexnet\n24.8\n182\n\n\nvgg11\n2.3\n14.6\n\n\ninception_v3\n3.3\n14.3\n\n\nresnet50\n3.3\n17.0\n\n\n\nthe compilation requires mkldnn to be pre-installed in conda via\nconda install -c mingfeima mkldnn", "body": "#4186 provide MKLDNN for convolution computation.\r\nmkldnn internal layout is completed **hidden** inside mkldnn_convolution_xxx functions. Both input and output of convolution are in PyTorch **native BCHW layout**.\r\n\r\non Xeon skylake 8180, 2 sockets with 28 cores per socket @ 2.50GHz, the performance with and without mkldnn is  \r\n \r\n[convnet-benchmark](https://github.com/mingfeima/convnet-benchmarks/tree/master/pytorch)| original | mkldnn\r\n---- | --- | ---\r\nalexnet | 24.8 | 182\r\nvgg11 | 2.3 | 14.6\r\ninception_v3 | 3.3 | 14.3\r\nresnet50 | 3.3 | 17.0\r\n\r\nthe compilation requires mkldnn to be pre-installed in conda via\r\n```bash\r\nconda install -c mingfeima mkldnn \r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7269", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7269/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7269/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7269/events", "html_url": "https://github.com/pytorch/pytorch/pull/7269", "id": 320114553, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg1ODY0MjE0", "number": 7269, "title": "[distributions] Fix broadcasting error in LogNormal, TransformedDistribution", "user": {"login": "fritzo", "id": 648532, "node_id": "MDQ6VXNlcjY0ODUzMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/648532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fritzo", "html_url": "https://github.com/fritzo", "followers_url": "https://api.github.com/users/fritzo/followers", "following_url": "https://api.github.com/users/fritzo/following{/other_user}", "gists_url": "https://api.github.com/users/fritzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/fritzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fritzo/subscriptions", "organizations_url": "https://api.github.com/users/fritzo/orgs", "repos_url": "https://api.github.com/users/fritzo/repos", "events_url": "https://api.github.com/users/fritzo/events{/privacy}", "received_events_url": "https://api.github.com/users/fritzo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-03T23:36:08Z", "updated_at": "2018-05-04T03:03:52Z", "closed_at": "2018-05-04T03:03:52Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/7269", "html_url": "https://github.com/pytorch/pytorch/pull/7269", "diff_url": "https://github.com/pytorch/pytorch/pull/7269.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/7269.patch"}, "body_html": "<p>This replaces two in-place operations <code>+=</code>,<code>-=</code> with non-in-place operations <code>= ... +</code>, <code>= ... -</code> so that small-shaped samples can be scored in <code>TransformedDistributions</code> with large-shaped base distribution parameters. The motivating example is <code>LogNormal</code>:</p>\n<div class=\"highlight highlight-source-python\"><pre>LogNormal(torch.zeros(<span class=\"pl-c1\">2</span>), <span class=\"pl-c1\">1</span>).log_prob(torch.tensor(<span class=\"pl-c1\">0.5</span>))  <span class=\"pl-c\"><span class=\"pl-c\">#</span> fails before this PR</span></pre></div>\n<h2>Tested</h2>\n<ul>\n<li>added a regression test for <code>LogNormal</code> that also exercises <code>TransformedDistribution</code></li>\n</ul>", "body_text": "This replaces two in-place operations +=,-= with non-in-place operations = ... +, = ... - so that small-shaped samples can be scored in TransformedDistributions with large-shaped base distribution parameters. The motivating example is LogNormal:\nLogNormal(torch.zeros(2), 1).log_prob(torch.tensor(0.5))  # fails before this PR\nTested\n\nadded a regression test for LogNormal that also exercises TransformedDistribution", "body": "This replaces two in-place operations `+=`,`-=` with non-in-place operations `= ... +`, `= ... -` so that small-shaped samples can be scored in `TransformedDistributions` with large-shaped base distribution parameters. The motivating example is `LogNormal`:\r\n```py\r\nLogNormal(torch.zeros(2), 1).log_prob(torch.tensor(0.5))  # fails before this PR\r\n```\r\n\r\n## Tested\r\n\r\n- added a regression test for `LogNormal` that also exercises `TransformedDistribution`"}
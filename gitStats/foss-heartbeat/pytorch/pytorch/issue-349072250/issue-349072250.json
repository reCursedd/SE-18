{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10370", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10370/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10370/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10370/events", "html_url": "https://github.com/pytorch/pytorch/issues/10370", "id": 349072250, "node_id": "MDU6SXNzdWUzNDkwNzIyNTA=", "number": 10370, "title": "Different results when using function argmax or argmin for data type \".cuda()\" and \".cpu()\"", "user": {"login": "MaXinglong", "id": 11287256, "node_id": "MDQ6VXNlcjExMjg3MjU2", "avatar_url": "https://avatars1.githubusercontent.com/u/11287256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaXinglong", "html_url": "https://github.com/MaXinglong", "followers_url": "https://api.github.com/users/MaXinglong/followers", "following_url": "https://api.github.com/users/MaXinglong/following{/other_user}", "gists_url": "https://api.github.com/users/MaXinglong/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaXinglong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaXinglong/subscriptions", "organizations_url": "https://api.github.com/users/MaXinglong/orgs", "repos_url": "https://api.github.com/users/MaXinglong/repos", "events_url": "https://api.github.com/users/MaXinglong/events{/privacy}", "received_events_url": "https://api.github.com/users/MaXinglong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 897287230, "node_id": "MDU6TGFiZWw4OTcyODcyMzA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/documentation", "name": "documentation", "color": "f9d0c4", "default": false}, {"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-09T10:37:40Z", "updated_at": "2018-10-29T15:40:38Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>I got different results when using the function argmax, for the tensor like this. This tensor has shape (3, 4). <strong>I want to get the place which the first \"1\" apperence.</strong> But I got different results when using cuda tensor and cpu tensor. And I got this difference when using version 0.4.0, then I change to 0.4.1, but this difference still exists.<br>\nThe input tensor:</p>\n<pre><code>1, 1, 1, 1\n0, 1, 1, 1\n1, 1, 1, 1\n</code></pre>\n<p>And I want the output like this, and it done when using cpu:</p>\n<pre><code>0\n1\n0\n</code></pre>\n<p>But got this when using cuda:</p>\n<pre><code>0\n2\n0\n</code></pre>\n<h2>Code example</h2>\n<p>using cpu:</p>\n<pre><code>Input:\nt = torch.ones(3, 4).cpu()\nt[1, 0] = 0\nprint(t.argmax(1, keepdim=True))\nOut:\ntensor([[0],\n        [1],\n        [0]])\n</code></pre>\n<p>using cuda:</p>\n<pre><code>Input:\nt = torch.ones(3, 4).cuda()\nt[1, 0] = 0\nprint(t.argmax(1, keepdim=True))\nOut:\ntensor([[0],\n        [2],\n        [0]], device='cuda:0')\n</code></pre>\n<h2>System Info</h2>\n<pre><code>PyTorch version: 0.4.1\nIs debug build: No\nCUDA used to build PyTorch: 9.0.176\n\nOS: Ubuntu 16.04.2 LTS\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\nCMake version: version 3.5.1\n\nPython version: 3.5\nIs CUDA available: Yes\nCUDA runtime version: 8.0.61\nGPU models and configuration: GPU 0: GeForce GTX 1080 Ti\nNvidia driver version: 384.130\ncuDNN version: Probably one of the following:\n/usr/local/MATLAB/R2016b/bin/glnxa64/libcudnn.so.4.0.7\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5.1.5\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn_static.a\n\nVersions of relevant libraries:\n[pip3] msgpack-numpy (0.4.1)\n[pip3] numpy (1.13.3)\n[pip3] torch (0.4.0)\n[pip3] torchfile (0.1.0)\n[pip3] torchvision (0.1.9)\n[conda] pytorch                   0.4.1           py35_cuda9.0.176_cudnn7.1.2_1    https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch\n[conda] torchvision               0.2.1                    py35_1    https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch\n</code></pre>", "body_text": "Issue description\nI got different results when using the function argmax, for the tensor like this. This tensor has shape (3, 4). I want to get the place which the first \"1\" apperence. But I got different results when using cuda tensor and cpu tensor. And I got this difference when using version 0.4.0, then I change to 0.4.1, but this difference still exists.\nThe input tensor:\n1, 1, 1, 1\n0, 1, 1, 1\n1, 1, 1, 1\n\nAnd I want the output like this, and it done when using cpu:\n0\n1\n0\n\nBut got this when using cuda:\n0\n2\n0\n\nCode example\nusing cpu:\nInput:\nt = torch.ones(3, 4).cpu()\nt[1, 0] = 0\nprint(t.argmax(1, keepdim=True))\nOut:\ntensor([[0],\n        [1],\n        [0]])\n\nusing cuda:\nInput:\nt = torch.ones(3, 4).cuda()\nt[1, 0] = 0\nprint(t.argmax(1, keepdim=True))\nOut:\ntensor([[0],\n        [2],\n        [0]], device='cuda:0')\n\nSystem Info\nPyTorch version: 0.4.1\nIs debug build: No\nCUDA used to build PyTorch: 9.0.176\n\nOS: Ubuntu 16.04.2 LTS\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\nCMake version: version 3.5.1\n\nPython version: 3.5\nIs CUDA available: Yes\nCUDA runtime version: 8.0.61\nGPU models and configuration: GPU 0: GeForce GTX 1080 Ti\nNvidia driver version: 384.130\ncuDNN version: Probably one of the following:\n/usr/local/MATLAB/R2016b/bin/glnxa64/libcudnn.so.4.0.7\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5.1.5\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn_static.a\n\nVersions of relevant libraries:\n[pip3] msgpack-numpy (0.4.1)\n[pip3] numpy (1.13.3)\n[pip3] torch (0.4.0)\n[pip3] torchfile (0.1.0)\n[pip3] torchvision (0.1.9)\n[conda] pytorch                   0.4.1           py35_cuda9.0.176_cudnn7.1.2_1    https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch\n[conda] torchvision               0.2.1                    py35_1    https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch", "body": "## Issue description\r\n\r\nI got different results when using the function argmax, for the tensor like this. This tensor has shape (3, 4). **I want to get the place which the first \"1\" apperence.** But I got different results when using cuda tensor and cpu tensor. And I got this difference when using version 0.4.0, then I change to 0.4.1, but this difference still exists.\r\nThe input tensor:\r\n```\r\n1, 1, 1, 1\r\n0, 1, 1, 1\r\n1, 1, 1, 1\r\n```\r\nAnd I want the output like this, and it done when using cpu:\r\n```\r\n0\r\n1\r\n0\r\n```\r\nBut got this when using cuda:\r\n```\r\n0\r\n2\r\n0\r\n```\r\n\r\n## Code example\r\nusing cpu:\r\n```\r\nInput:\r\nt = torch.ones(3, 4).cpu()\r\nt[1, 0] = 0\r\nprint(t.argmax(1, keepdim=True))\r\nOut:\r\ntensor([[0],\r\n        [1],\r\n        [0]])\r\n```\r\n\r\nusing cuda:\r\n```\r\nInput:\r\nt = torch.ones(3, 4).cuda()\r\nt[1, 0] = 0\r\nprint(t.argmax(1, keepdim=True))\r\nOut:\r\ntensor([[0],\r\n        [2],\r\n        [0]], device='cuda:0')\r\n```\r\n\r\n\r\n## System Info\r\n```\r\nPyTorch version: 0.4.1\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Ubuntu 16.04.2 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.5\r\nIs CUDA available: Yes\r\nCUDA runtime version: 8.0.61\r\nGPU models and configuration: GPU 0: GeForce GTX 1080 Ti\r\nNvidia driver version: 384.130\r\ncuDNN version: Probably one of the following:\r\n/usr/local/MATLAB/R2016b/bin/glnxa64/libcudnn.so.4.0.7\r\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn.so.5.1.5\r\n/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcudnn_static.a\r\n\r\nVersions of relevant libraries:\r\n[pip3] msgpack-numpy (0.4.1)\r\n[pip3] numpy (1.13.3)\r\n[pip3] torch (0.4.0)\r\n[pip3] torchfile (0.1.0)\r\n[pip3] torchvision (0.1.9)\r\n[conda] pytorch                   0.4.1           py35_cuda9.0.176_cudnn7.1.2_1    https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch\r\n[conda] torchvision               0.2.1                    py35_1    https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch\r\n```"}
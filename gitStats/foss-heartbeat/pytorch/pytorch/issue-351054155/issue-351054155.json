{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10577", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10577/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10577/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10577/events", "html_url": "https://github.com/pytorch/pytorch/issues/10577", "id": 351054155, "node_id": "MDU6SXNzdWUzNTEwNTQxNTU=", "number": 10577, "title": "[BUG]: unstable happend in saving model.", "user": {"login": "zyoohv", "id": 16134679, "node_id": "MDQ6VXNlcjE2MTM0Njc5", "avatar_url": "https://avatars2.githubusercontent.com/u/16134679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyoohv", "html_url": "https://github.com/zyoohv", "followers_url": "https://api.github.com/users/zyoohv/followers", "following_url": "https://api.github.com/users/zyoohv/following{/other_user}", "gists_url": "https://api.github.com/users/zyoohv/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyoohv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyoohv/subscriptions", "organizations_url": "https://api.github.com/users/zyoohv/orgs", "repos_url": "https://api.github.com/users/zyoohv/repos", "events_url": "https://api.github.com/users/zyoohv/events{/privacy}", "received_events_url": "https://api.github.com/users/zyoohv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443484050, "node_id": "MDU6TGFiZWw0NDM0ODQwNTA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/medium%20priority", "name": "medium priority", "color": "fbca04", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-08-16T04:48:09Z", "updated_at": "2018-09-17T17:56:32Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>When I save my model, I met the errors.</p>\n<p>My environment:</p>\n<p>system: debian 8<br>\npython: python3<br>\npytorch: 0.4.1</p>\n<h2>Code</h2>\n<div class=\"highlight highlight-source-python\"><pre>    <span class=\"pl-k\">def</span> <span class=\"pl-en\">save_model</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">epoch</span>):\n\n        <span class=\"pl-c\"><span class=\"pl-c\">#</span> for example: save_path = '~/Documents/my_model_1.pth'.</span>\n        save_path <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.model_prefix <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>_<span class=\"pl-pds\">'</span></span> <span class=\"pl-k\">+</span> <span class=\"pl-c1\">str</span>(epoch) <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>.pth<span class=\"pl-pds\">'</span></span>\n\n        <span class=\"pl-c\"><span class=\"pl-c\">#</span> note that my net: self.net is trained on GPU.</span>\n        torch.save(<span class=\"pl-c1\">self</span>.net.state_dict(), save_path)\n\n        <span class=\"pl-c1\">self</span>.logging.info(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>Saved model in <span class=\"pl-c1\">{}</span><span class=\"pl-pds\">'</span></span>.format(save_path))</pre></div>\n<h2>Error</h2>\n<pre><code>Traceback (most recent call last):\n  File \"train_network.py\", line 64, in &lt;module&gt;\n    main()\n  File \"train_network.py\", line 60, in main\n    netutil.save_model(epoch)\n  File \"/opt/tiger/reid/attribute_net/network.py\", line 169, in save_model\n    torch.save(self.net.state_dict(), save_path)\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 209, in save\n    return _with_file_like(f, \"wb\", lambda f: _save(obj, f, pickle_module, pickle_protocol))\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 134, in _with_file_like\n    return body(f)\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 209, in &lt;lambda&gt;\n    return _with_file_like(f, \"wb\", lambda f: _save(obj, f, pickle_module, pickle_protocol))\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 288, in _save\n    serialized_storages[key]._write_file(f, _should_read_directly(f))\nRuntimeError: Unknown error -1\n</code></pre>", "body_text": "Issue description\nWhen I save my model, I met the errors.\nMy environment:\nsystem: debian 8\npython: python3\npytorch: 0.4.1\nCode\n    def save_model(self, epoch):\n\n        # for example: save_path = '~/Documents/my_model_1.pth'.\n        save_path = self.model_prefix + '_' + str(epoch) + '.pth'\n\n        # note that my net: self.net is trained on GPU.\n        torch.save(self.net.state_dict(), save_path)\n\n        self.logging.info('Saved model in {}'.format(save_path))\nError\nTraceback (most recent call last):\n  File \"train_network.py\", line 64, in <module>\n    main()\n  File \"train_network.py\", line 60, in main\n    netutil.save_model(epoch)\n  File \"/opt/tiger/reid/attribute_net/network.py\", line 169, in save_model\n    torch.save(self.net.state_dict(), save_path)\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 209, in save\n    return _with_file_like(f, \"wb\", lambda f: _save(obj, f, pickle_module, pickle_protocol))\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 134, in _with_file_like\n    return body(f)\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 209, in <lambda>\n    return _with_file_like(f, \"wb\", lambda f: _save(obj, f, pickle_module, pickle_protocol))\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 288, in _save\n    serialized_storages[key]._write_file(f, _should_read_directly(f))\nRuntimeError: Unknown error -1", "body": "## Issue description\r\n\r\nWhen I save my model, I met the errors.\r\n\r\nMy environment:\r\n\r\nsystem: debian 8   \r\npython: python3   \r\npytorch: 0.4.1\r\n\r\n## Code \r\n\r\n```python\r\n    def save_model(self, epoch):\r\n\r\n        # for example: save_path = '~/Documents/my_model_1.pth'.\r\n        save_path = self.model_prefix + '_' + str(epoch) + '.pth'\r\n\r\n        # note that my net: self.net is trained on GPU.\r\n        torch.save(self.net.state_dict(), save_path)\r\n\r\n        self.logging.info('Saved model in {}'.format(save_path))\r\n```\r\n\r\n## Error\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"train_network.py\", line 64, in <module>\r\n    main()\r\n  File \"train_network.py\", line 60, in main\r\n    netutil.save_model(epoch)\r\n  File \"/opt/tiger/reid/attribute_net/network.py\", line 169, in save_model\r\n    torch.save(self.net.state_dict(), save_path)\r\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 209, in save\r\n    return _with_file_like(f, \"wb\", lambda f: _save(obj, f, pickle_module, pickle_protocol))\r\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 134, in _with_file_like\r\n    return body(f)\r\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 209, in <lambda>\r\n    return _with_file_like(f, \"wb\", lambda f: _save(obj, f, pickle_module, pickle_protocol))\r\n  File \"/usr/local/lib/python3.6/site-packages/torch/serialization.py\", line 288, in _save\r\n    serialized_storages[key]._write_file(f, _should_read_directly(f))\r\nRuntimeError: Unknown error -1\r\n```\r\n"}
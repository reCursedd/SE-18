{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/436350074", "html_url": "https://github.com/pytorch/pytorch/pull/13585#issuecomment-436350074", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/13585", "id": 436350074, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjM1MDA3NA==", "user": {"login": "goldsborough", "id": 6429851, "node_id": "MDQ6VXNlcjY0Mjk4NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6429851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldsborough", "html_url": "https://github.com/goldsborough", "followers_url": "https://api.github.com/users/goldsborough/followers", "following_url": "https://api.github.com/users/goldsborough/following{/other_user}", "gists_url": "https://api.github.com/users/goldsborough/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldsborough/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldsborough/subscriptions", "organizations_url": "https://api.github.com/users/goldsborough/orgs", "repos_url": "https://api.github.com/users/goldsborough/repos", "events_url": "https://api.github.com/users/goldsborough/events{/privacy}", "received_events_url": "https://api.github.com/users/goldsborough/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-06T18:05:04Z", "updated_at": "2018-11-06T18:07:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks for the PR!</p>\n<p>I think you'll have to rebase on top of the big change I landed in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"372752949\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/12960\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/12960/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/12960\">#12960</a></p>\n<p>The change about making the dataset in the main thread is unclear to me. Two reasons:</p>\n<ul>\n<li>The dataset is the thing that is supposed to do the heavy lifting: loading data from a database, doing transformations etc. -- Putting it on the main thread fundamentally goes against how the dataloader is intended to achieve parallelism, since now the main thread will be stuck for every batch it loads?</li>\n<li>There are no thread safety guarantees for datasets at all. If I create a dataset that does not support concurrent reads, this will cause nasty bugs.</li>\n</ul>", "body_text": "Thanks for the PR!\nI think you'll have to rebase on top of the big change I landed in #12960\nThe change about making the dataset in the main thread is unclear to me. Two reasons:\n\nThe dataset is the thing that is supposed to do the heavy lifting: loading data from a database, doing transformations etc. -- Putting it on the main thread fundamentally goes against how the dataloader is intended to achieve parallelism, since now the main thread will be stuck for every batch it loads?\nThere are no thread safety guarantees for datasets at all. If I create a dataset that does not support concurrent reads, this will cause nasty bugs.", "body": "Thanks for the PR!\r\n\r\nI think you'll have to rebase on top of the big change I landed in https://github.com/pytorch/pytorch/pull/12960\r\n\r\nThe change about making the dataset in the main thread is unclear to me. Two reasons:\r\n- The dataset is the thing that is supposed to do the heavy lifting: loading data from a database, doing transformations etc. -- Putting it on the main thread fundamentally goes against how the dataloader is intended to achieve parallelism, since now the main thread will be stuck for every batch it loads?\r\n- There are no thread safety guarantees for datasets at all. If I create a dataset that does not support concurrent reads, this will cause nasty bugs."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5958", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5958/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5958/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5958/events", "html_url": "https://github.com/pytorch/pytorch/issues/5958", "id": 307993060, "node_id": "MDU6SXNzdWUzMDc5OTMwNjA=", "number": 5958, "title": "How can I access the model's attribution created during forward pass when using dataparallel?", "user": {"login": "sonack", "id": 12935189, "node_id": "MDQ6VXNlcjEyOTM1MTg5", "avatar_url": "https://avatars1.githubusercontent.com/u/12935189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sonack", "html_url": "https://github.com/sonack", "followers_url": "https://api.github.com/users/sonack/followers", "following_url": "https://api.github.com/users/sonack/following{/other_user}", "gists_url": "https://api.github.com/users/sonack/gists{/gist_id}", "starred_url": "https://api.github.com/users/sonack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sonack/subscriptions", "organizations_url": "https://api.github.com/users/sonack/orgs", "repos_url": "https://api.github.com/users/sonack/repos", "events_url": "https://api.github.com/users/sonack/events{/privacy}", "received_events_url": "https://api.github.com/users/sonack/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-23T11:28:16Z", "updated_at": "2018-03-23T16:06:29Z", "closed_at": "2018-03-23T16:06:29Z", "author_association": "NONE", "body_html": "<p>For example, I have such a forward function():</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">forward</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">x</span>):\n    mgdata <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.encoder(x)\n    <span class=\"pl-c1\">self</span>.imp_mask_sigmoid <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.impmap_sigmoid(mgdata)\n    <span class=\"pl-c1\">self</span>.imp_mask <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.impmap_expand(<span class=\"pl-c1\">self</span>.imp_mask_sigmoid)\n    enc_data <span class=\"pl-k\">=</span> mgdata <span class=\"pl-k\">*</span> <span class=\"pl-c1\">self</span>.imp_mask\n    dec_data <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.decoder(enc_data)\n    <span class=\"pl-k\">return</span> dec_data</pre></div>\n<p>When I using dataparallel, I always using <code>model.module</code> to access the wrapped original model.However, I found I can't access <code>model.module.imp_mask_sigmoid</code>, it will complain about <code>AttributeError: 'ContentWeightedCNN' object has no attribute 'imp_mask_sigmoid'</code>.<br>\nHow to deal with it?</p>\n<p>Thanks very much.</p>", "body_text": "For example, I have such a forward function():\ndef forward(self, x):\n    mgdata = self.encoder(x)\n    self.imp_mask_sigmoid = self.impmap_sigmoid(mgdata)\n    self.imp_mask = self.impmap_expand(self.imp_mask_sigmoid)\n    enc_data = mgdata * self.imp_mask\n    dec_data = self.decoder(enc_data)\n    return dec_data\nWhen I using dataparallel, I always using model.module to access the wrapped original model.However, I found I can't access model.module.imp_mask_sigmoid, it will complain about AttributeError: 'ContentWeightedCNN' object has no attribute 'imp_mask_sigmoid'.\nHow to deal with it?\nThanks very much.", "body": "For example, I have such a forward function():\r\n\r\n```python\r\n\r\ndef forward(self, x):\r\n    mgdata = self.encoder(x)\r\n    self.imp_mask_sigmoid = self.impmap_sigmoid(mgdata)\r\n    self.imp_mask = self.impmap_expand(self.imp_mask_sigmoid)\r\n    enc_data = mgdata * self.imp_mask\r\n    dec_data = self.decoder(enc_data)\r\n    return dec_data\r\n```\r\n\r\nWhen I using dataparallel, I always using `model.module` to access the wrapped original model.However, I found I can't access `model.module.imp_mask_sigmoid`, it will complain about `AttributeError: 'ContentWeightedCNN' object has no attribute 'imp_mask_sigmoid'`.\r\nHow to deal with it?\r\n\r\nThanks very much."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13836", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13836/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13836/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13836/events", "html_url": "https://github.com/pytorch/pytorch/issues/13836", "id": 379713482, "node_id": "MDU6SXNzdWUzNzk3MTM0ODI=", "number": 13836, "title": "Pytorch-Caffe2 export: \"Arrays are not almost equal to 3 decimals\"", "user": {"login": "zerotosingularity", "id": 35613404, "node_id": "MDQ6VXNlcjM1NjEzNDA0", "avatar_url": "https://avatars2.githubusercontent.com/u/35613404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zerotosingularity", "html_url": "https://github.com/zerotosingularity", "followers_url": "https://api.github.com/users/zerotosingularity/followers", "following_url": "https://api.github.com/users/zerotosingularity/following{/other_user}", "gists_url": "https://api.github.com/users/zerotosingularity/gists{/gist_id}", "starred_url": "https://api.github.com/users/zerotosingularity/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zerotosingularity/subscriptions", "organizations_url": "https://api.github.com/users/zerotosingularity/orgs", "repos_url": "https://api.github.com/users/zerotosingularity/repos", "events_url": "https://api.github.com/users/zerotosingularity/events{/privacy}", "received_events_url": "https://api.github.com/users/zerotosingularity/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-12T10:32:06Z", "updated_at": "2018-11-12T19:25:35Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"books\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f4da.png\">\ud83d\udcda</g-emoji> Documentation</h2>\n<p>Following the \"<a href=\"https://pytorch.org/tutorials/advanced/super_resolution_with_caffe2.html\" rel=\"nofollow\">Transfering a Model from PyTorch to Caffe2 and Mobile using ONNX</a>\" I get the following exception:</p>\n<div class=\"highlight highlight-source-python\"><pre>Arrays are <span class=\"pl-k\">not</span> almost equal to <span class=\"pl-c1\">3</span> decimals</pre></div>\n<p>when running</p>\n<div class=\"highlight highlight-source-python\"><pre>np.testing.assert_almost_equal(torch_out.data.cpu().numpy(), c2_out, <span class=\"pl-v\">decimal</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">3</span>)</pre></div>\n<p>(with the documentation specifically asking to contact the team when this happens. :))</p>\n<p>I have been able to reproduce the error on both Ubuntu 16.04 and Google Colab. Note that I have not install onnx-caffe2 and updated the source code following <a href=\"https://github.com/pytorch/tutorials/pull/348\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/tutorials/pull/348/hovercard\">PR-348</a>.</p>\n<p>This is the environment on Ubuntu 16.004</p>\n<p><strong>Conda env</strong>:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-c\"><span class=\"pl-c\">#</span> packages in environment at ~/.conda/envs/torch-onnx:</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span></span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> Name                    Version                   Build  Channel</span>\nbackcall                  <span class=\"pl-c1\">0.1</span>.0                    py36_0\nblas                      <span class=\"pl-c1\">1.0</span>                         mkl\nbleach                    <span class=\"pl-c1\">3.0</span>.2                    py36_0\nbzip2                     <span class=\"pl-c1\">1.0</span>.6                h14c3975_5\nca<span class=\"pl-k\">-</span>certificates           <span class=\"pl-c1\">2018.03</span>.07                    <span class=\"pl-c1\">0</span>\ncertifi                   <span class=\"pl-c1\">2018.10</span>.15               py36_0\ncffi                      <span class=\"pl-c1\">1.11</span>.5           py36he75722e_1\ncmake                     <span class=\"pl-c1\">3.12</span>.2               h52cb24c_0\ncycler                    <span class=\"pl-c1\">0.10</span>.0                   py36_0\ndbus                      <span class=\"pl-c1\">1.13</span>.2               h714fa37_1\ndecorator                 <span class=\"pl-c1\">4.3</span>.0                    py36_0\nentrypoints               <span class=\"pl-c1\">0.2</span>.3                    py36_2\nexpat                     <span class=\"pl-c1\">2.2</span>.6                he6710b0_0\nfontconfig                <span class=\"pl-c1\">2.13</span>.0               h9420a91_0\nfreetype                  <span class=\"pl-c1\">2.9</span>.1                h8a8886c_1\nfuture                    <span class=\"pl-c1\">0.17</span>.1                    <span class=\"pl-k\">&lt;</span>pip<span class=\"pl-k\">&gt;</span>\nglib                      <span class=\"pl-c1\">2.56</span>.2               hd408876_0\ngmp                       <span class=\"pl-c1\">6.1</span>.2                h6c8ec71_1\ngst<span class=\"pl-k\">-</span>plugins<span class=\"pl-k\">-</span>base          <span class=\"pl-c1\">1.14</span>.0               hbbd80ab_1\ngstreamer                 <span class=\"pl-c1\">1.14</span>.0               hb453b48_1\nicu                       <span class=\"pl-c1\">58.2</span>                 h9c2bf20_1\nintel<span class=\"pl-k\">-</span>openmp              <span class=\"pl-c1\">2019.0</span>                      <span class=\"pl-c1\">118</span>\nipykernel                 <span class=\"pl-c1\">5.1</span>.0            py36h39e3cac_0\nipython                   <span class=\"pl-c1\">7.1</span>.1            py36h39e3cac_0\nipython_genutils          <span class=\"pl-c1\">0.2</span>.0                    py36_0\nipywidgets                <span class=\"pl-c1\">7.4</span>.2                    py36_0\njedi                      <span class=\"pl-c1\">0.13</span>.1                   py36_0\njinja2                    <span class=\"pl-c1\">2.10</span>                     py36_0\njpeg                      <span class=\"pl-ii\">9b</span>                   h024ee3a_2\njsonschema                <span class=\"pl-c1\">2.6</span>.0                    py36_0\njupyter                   <span class=\"pl-c1\">1.0</span>.0                    py36_7\njupyter_client            <span class=\"pl-c1\">5.2</span>.3                    py36_0\njupyter_console           <span class=\"pl-c1\">6.0</span>.0                    py36_0\njupyter_core              <span class=\"pl-c1\">4.4</span>.0                    py36_0\nkiwisolver                <span class=\"pl-c1\">1.0</span>.1            py36hf484d3e_0\nlibcurl                   <span class=\"pl-c1\">7.61</span>.1               heec0ca6_0\nlibedit                   <span class=\"pl-c1\">3.1</span>.20170329         h6b74fdf_2\nlibffi                    <span class=\"pl-c1\">3.2</span>.1                hd88cf55_4\nlibgcc<span class=\"pl-k\">-</span>ng                 <span class=\"pl-c1\">8.2</span>.0                hdf63c60_1\nlibgfortran<span class=\"pl-k\">-</span>ng            <span class=\"pl-c1\">7.3</span>.0                hdf63c60_0\nlibpng                    <span class=\"pl-c1\">1.6</span>.35               hbc83047_0\nlibprotobuf               <span class=\"pl-c1\">3.6</span>.1                hd408876_0\nlibsodium                 <span class=\"pl-c1\">1.0</span>.16               h1bed415_0\nlibssh2                   <span class=\"pl-c1\">1.8</span>.0                h9cfc8f7_4\nlibstdcxx<span class=\"pl-k\">-</span>ng              <span class=\"pl-c1\">8.2</span>.0                hdf63c60_1\nlibuuid                   <span class=\"pl-c1\">1.0</span>.3                h1bed415_2\nlibxcb                    <span class=\"pl-c1\">1.13</span>                 h1bed415_1\nlibxml2                   <span class=\"pl-c1\">2.9</span>.8                h26e45fe_1\nmagma<span class=\"pl-k\">-</span>cuda90              <span class=\"pl-c1\">2.3</span>.0                         <span class=\"pl-c1\">1</span>    pytorch\nmarkupsafe                <span class=\"pl-c1\">1.0</span>              py36h14c3975_1\nmatplotlib                <span class=\"pl-c1\">3.0</span>.1            py36h5429711_0\nmistune                   <span class=\"pl-c1\">0.8</span>.4            py36h7b6447c_0\nmkl                       <span class=\"pl-c1\">2019.0</span>                      <span class=\"pl-c1\">118</span>\nmkl<span class=\"pl-k\">-</span>include               <span class=\"pl-c1\">2019.0</span>                      <span class=\"pl-c1\">118</span>\nmkl_fft                   <span class=\"pl-c1\">1.0</span>.6            py36h7dd41cf_0\nmkl_random                <span class=\"pl-c1\">1.0</span>.1            py36h4414c95_1\nmkldnn                    <span class=\"pl-c1\">0.16</span>.1                        <span class=\"pl-c1\">0</span>    mingfeima\nnbconvert                 <span class=\"pl-c1\">5.3</span>.1                    py36_0\nnbformat                  <span class=\"pl-c1\">4.4</span>.0                    py36_0\nncurses                   <span class=\"pl-c1\">6.1</span>                  hf484d3e_0\nninja                     <span class=\"pl-c1\">1.8</span>.2            py36h6bb024c_1\nnotebook                  <span class=\"pl-c1\">5.7</span>.0                    py36_0\nnumpy                     <span class=\"pl-c1\">1.15</span>.4           py36h1d66e8a_0\nnumpy<span class=\"pl-k\">-</span>base                <span class=\"pl-c1\">1.15</span>.4           py36h81de0dd_0\nonnx                      <span class=\"pl-c1\">1.3</span>.0                     <span class=\"pl-k\">&lt;</span>pip<span class=\"pl-k\">&gt;</span>\nopenssl                   <span class=\"pl-c1\">1.0</span>.2p               h14c3975_0\npandoc                    <span class=\"pl-c1\">2.2</span>.3.2                       <span class=\"pl-c1\">0</span>\npandocfilters             <span class=\"pl-c1\">1.4</span>.2                    py36_1\nparso                     <span class=\"pl-c1\">0.3</span>.1                    py36_0\npcre                      <span class=\"pl-c1\">8.42</span>                 h439df22_0\npexpect                   <span class=\"pl-c1\">4.6</span>.0                    py36_0\npickleshare               <span class=\"pl-c1\">0.7</span>.5                    py36_0\npip                       <span class=\"pl-c1\">18.1</span>                     py36_0\nprometheus_client         <span class=\"pl-c1\">0.4</span>.2                    py36_0\nprompt_toolkit            <span class=\"pl-c1\">2.0</span>.7                    py36_0\nprotobuf                  <span class=\"pl-c1\">3.6</span>.1            py36he6710b0_0\nptyprocess                <span class=\"pl-c1\">0.6</span>.0                    py36_0\npycparser                 <span class=\"pl-c1\">2.19</span>                     py36_0\npygments                  <span class=\"pl-c1\">2.2</span>.0                    py36_0\npyparsing                 <span class=\"pl-c1\">2.3</span>.0                    py36_0\npyqt                      <span class=\"pl-c1\">5.9</span>.2            py36h05f1152_2\npython                    <span class=\"pl-c1\">3.6</span>.5                hc3d631a_2\npython<span class=\"pl-k\">-</span>dateutil           <span class=\"pl-c1\">2.7</span>.5                    py36_0\npytorch<span class=\"pl-k\">-</span>nightly           <span class=\"pl-c1\">1.0</span>.0.dev20181109 py3.6_cuda9.0.176_cudnn7.1.2_0    pytorch\npytz                      <span class=\"pl-c1\">2018.7</span>                   py36_0\npyyaml                    <span class=\"pl-c1\">3.13</span>             py36h14c3975_0\npyzmq                     <span class=\"pl-c1\">17.1</span>.2           py36h14c3975_0\nqt                        <span class=\"pl-c1\">5.9</span>.6                h8703b6f_2\nqtconsole                 <span class=\"pl-c1\">4.4</span>.2                    py36_0\nreadline                  <span class=\"pl-c1\">7.0</span>                  h7b6447c_5\nrhash                     <span class=\"pl-c1\">1.3</span>.6                hb7f436b_0\nsend2trash                <span class=\"pl-c1\">1.5</span>.0                    py36_0\nsetuptools                <span class=\"pl-c1\">40.5</span>.0                   py36_0\nsip                       <span class=\"pl-c1\">4.19</span>.8           py36hf484d3e_0\nsix                       <span class=\"pl-c1\">1.11</span>.0                   py36_1\nsqlite                    <span class=\"pl-c1\">3.25</span>.2               h7b6447c_0\nterminado                 <span class=\"pl-c1\">0.8</span>.1                    py36_1\ntestpath                  <span class=\"pl-c1\">0.4</span>.2                    py36_0\ntk                        <span class=\"pl-c1\">8.6</span>.8                hbc83047_0\ntornado                   <span class=\"pl-c1\">5.1</span>.1            py36h7b6447c_0\ntraitlets                 <span class=\"pl-c1\">4.3</span>.2                    py36_0\ntyping                    <span class=\"pl-c1\">3.6</span>.4                    py36_0\ntyping<span class=\"pl-k\">-</span>extensions         <span class=\"pl-c1\">3.6</span>.6                     <span class=\"pl-k\">&lt;</span>pip<span class=\"pl-k\">&gt;</span>\nwcwidth                   <span class=\"pl-c1\">0.1</span>.7                    py36_0\nwebencodings              <span class=\"pl-c1\">0.5</span>.1                    py36_1\nwheel                     <span class=\"pl-c1\">0.32</span>.2                   py36_0\nwidgetsnbextension        <span class=\"pl-c1\">3.4</span>.2                    py36_0\nxz                        <span class=\"pl-c1\">5.2</span>.4                h14c3975_4\nyaml                      <span class=\"pl-c1\">0.1</span>.7                had09818_2\nzeromq                    <span class=\"pl-c1\">4.2</span>.5                hf484d3e_1\nzlib                      <span class=\"pl-c1\">1.2</span>.11               ha838bed_2</pre></div>\n<p><strong>Pip list</strong>:</p>\n<div class=\"highlight highlight-source-python\"><pre>Package            Version          \n<span class=\"pl-ii\">------------------</span> <span class=\"pl-ii\">----------------</span><span class=\"pl-k\">-</span>\nbackcall           <span class=\"pl-c1\">0.1</span>.0            \nbleach             <span class=\"pl-c1\">3.0</span>.2            \ncertifi            <span class=\"pl-c1\">2018.10</span>.15       \ncffi               <span class=\"pl-c1\">1.11</span>.5           \ncycler             <span class=\"pl-c1\">0.10</span>.0           \ndecorator          <span class=\"pl-c1\">4.3</span>.0            \nentrypoints        <span class=\"pl-c1\">0.2</span>.3            \nfuture             <span class=\"pl-c1\">0.17</span>.1           \nipykernel          <span class=\"pl-c1\">5.1</span>.0            \nipython            <span class=\"pl-c1\">7.1</span>.1            \nipython<span class=\"pl-k\">-</span>genutils   <span class=\"pl-c1\">0.2</span>.0            \nipywidgets         <span class=\"pl-c1\">7.4</span>.2            \njedi               <span class=\"pl-c1\">0.13</span>.1           \nJinja2             <span class=\"pl-c1\">2.10</span>             \njsonschema         <span class=\"pl-c1\">2.6</span>.0            \njupyter            <span class=\"pl-c1\">1.0</span>.0            \njupyter<span class=\"pl-k\">-</span>client     <span class=\"pl-c1\">5.2</span>.3            \njupyter<span class=\"pl-k\">-</span>console    <span class=\"pl-c1\">6.0</span>.0            \njupyter<span class=\"pl-k\">-</span>core       <span class=\"pl-c1\">4.4</span>.0            \nkiwisolver         <span class=\"pl-c1\">1.0</span>.1            \nMarkupSafe         <span class=\"pl-c1\">1.0</span>              \nmatplotlib         <span class=\"pl-c1\">3.0</span>.1            \nmistune            <span class=\"pl-c1\">0.8</span>.4            \nmkl<span class=\"pl-k\">-</span>fft            <span class=\"pl-c1\">1.0</span>.6            \nmkl<span class=\"pl-k\">-</span>random         <span class=\"pl-c1\">1.0</span>.1            \nnbconvert          <span class=\"pl-c1\">5.3</span>.1            \nnbformat           <span class=\"pl-c1\">4.4</span>.0            \nnotebook           <span class=\"pl-c1\">5.7</span>.0            \nnumpy              <span class=\"pl-c1\">1.15</span>.4           \nonnx               <span class=\"pl-c1\">1.3</span>.0            \npandocfilters      <span class=\"pl-c1\">1.4</span>.2            \nparso              <span class=\"pl-c1\">0.3</span>.1            \npexpect            <span class=\"pl-c1\">4.6</span>.0            \npickleshare        <span class=\"pl-c1\">0.7</span>.5            \npip                <span class=\"pl-c1\">18.1</span>             \nprometheus<span class=\"pl-k\">-</span>client  <span class=\"pl-c1\">0.4</span>.2            \nprompt<span class=\"pl-k\">-</span>toolkit     <span class=\"pl-c1\">2.0</span>.7            \nprotobuf           <span class=\"pl-c1\">3.6</span>.1            \nptyprocess         <span class=\"pl-c1\">0.6</span>.0            \npycparser          <span class=\"pl-c1\">2.19</span>             \nPygments           <span class=\"pl-c1\">2.2</span>.0            \npyparsing          <span class=\"pl-c1\">2.3</span>.0            \npython<span class=\"pl-k\">-</span>dateutil    <span class=\"pl-c1\">2.7</span>.5            \npytz               <span class=\"pl-c1\">2018.7</span>           \nPyYAML             <span class=\"pl-c1\">3.13</span>             \npyzmq              <span class=\"pl-c1\">17.1</span>.2           \nqtconsole          <span class=\"pl-c1\">4.4</span>.2            \nSend2Trash         <span class=\"pl-c1\">1.5</span>.0            \nsetuptools         <span class=\"pl-c1\">40.5</span>.0           \nsix                <span class=\"pl-c1\">1.11</span>.0           \nterminado          <span class=\"pl-c1\">0.8</span>.1            \ntestpath           <span class=\"pl-c1\">0.4</span>.2            \ntorch              <span class=\"pl-c1\">1.0</span>.0.dev20181109\ntornado            <span class=\"pl-c1\">5.1</span>.1            \ntraitlets          <span class=\"pl-c1\">4.3</span>.2            \ntyping             <span class=\"pl-c1\">3.6</span>.4            \ntyping<span class=\"pl-k\">-</span>extensions  <span class=\"pl-c1\">3.6</span>.6            \nwcwidth            <span class=\"pl-c1\">0.1</span>.7            \nwebencodings       <span class=\"pl-c1\">0.5</span>.1            \nwheel              <span class=\"pl-c1\">0.32</span>.2           \nwidgetsnbextension <span class=\"pl-c1\">3.4</span>.2      </pre></div>", "body_text": "\ud83d\udcda Documentation\nFollowing the \"Transfering a Model from PyTorch to Caffe2 and Mobile using ONNX\" I get the following exception:\nArrays are not almost equal to 3 decimals\nwhen running\nnp.testing.assert_almost_equal(torch_out.data.cpu().numpy(), c2_out, decimal=3)\n(with the documentation specifically asking to contact the team when this happens. :))\nI have been able to reproduce the error on both Ubuntu 16.04 and Google Colab. Note that I have not install onnx-caffe2 and updated the source code following PR-348.\nThis is the environment on Ubuntu 16.004\nConda env:\n# packages in environment at ~/.conda/envs/torch-onnx:\n#\n# Name                    Version                   Build  Channel\nbackcall                  0.1.0                    py36_0\nblas                      1.0                         mkl\nbleach                    3.0.2                    py36_0\nbzip2                     1.0.6                h14c3975_5\nca-certificates           2018.03.07                    0\ncertifi                   2018.10.15               py36_0\ncffi                      1.11.5           py36he75722e_1\ncmake                     3.12.2               h52cb24c_0\ncycler                    0.10.0                   py36_0\ndbus                      1.13.2               h714fa37_1\ndecorator                 4.3.0                    py36_0\nentrypoints               0.2.3                    py36_2\nexpat                     2.2.6                he6710b0_0\nfontconfig                2.13.0               h9420a91_0\nfreetype                  2.9.1                h8a8886c_1\nfuture                    0.17.1                    <pip>\nglib                      2.56.2               hd408876_0\ngmp                       6.1.2                h6c8ec71_1\ngst-plugins-base          1.14.0               hbbd80ab_1\ngstreamer                 1.14.0               hb453b48_1\nicu                       58.2                 h9c2bf20_1\nintel-openmp              2019.0                      118\nipykernel                 5.1.0            py36h39e3cac_0\nipython                   7.1.1            py36h39e3cac_0\nipython_genutils          0.2.0                    py36_0\nipywidgets                7.4.2                    py36_0\njedi                      0.13.1                   py36_0\njinja2                    2.10                     py36_0\njpeg                      9b                   h024ee3a_2\njsonschema                2.6.0                    py36_0\njupyter                   1.0.0                    py36_7\njupyter_client            5.2.3                    py36_0\njupyter_console           6.0.0                    py36_0\njupyter_core              4.4.0                    py36_0\nkiwisolver                1.0.1            py36hf484d3e_0\nlibcurl                   7.61.1               heec0ca6_0\nlibedit                   3.1.20170329         h6b74fdf_2\nlibffi                    3.2.1                hd88cf55_4\nlibgcc-ng                 8.2.0                hdf63c60_1\nlibgfortran-ng            7.3.0                hdf63c60_0\nlibpng                    1.6.35               hbc83047_0\nlibprotobuf               3.6.1                hd408876_0\nlibsodium                 1.0.16               h1bed415_0\nlibssh2                   1.8.0                h9cfc8f7_4\nlibstdcxx-ng              8.2.0                hdf63c60_1\nlibuuid                   1.0.3                h1bed415_2\nlibxcb                    1.13                 h1bed415_1\nlibxml2                   2.9.8                h26e45fe_1\nmagma-cuda90              2.3.0                         1    pytorch\nmarkupsafe                1.0              py36h14c3975_1\nmatplotlib                3.0.1            py36h5429711_0\nmistune                   0.8.4            py36h7b6447c_0\nmkl                       2019.0                      118\nmkl-include               2019.0                      118\nmkl_fft                   1.0.6            py36h7dd41cf_0\nmkl_random                1.0.1            py36h4414c95_1\nmkldnn                    0.16.1                        0    mingfeima\nnbconvert                 5.3.1                    py36_0\nnbformat                  4.4.0                    py36_0\nncurses                   6.1                  hf484d3e_0\nninja                     1.8.2            py36h6bb024c_1\nnotebook                  5.7.0                    py36_0\nnumpy                     1.15.4           py36h1d66e8a_0\nnumpy-base                1.15.4           py36h81de0dd_0\nonnx                      1.3.0                     <pip>\nopenssl                   1.0.2p               h14c3975_0\npandoc                    2.2.3.2                       0\npandocfilters             1.4.2                    py36_1\nparso                     0.3.1                    py36_0\npcre                      8.42                 h439df22_0\npexpect                   4.6.0                    py36_0\npickleshare               0.7.5                    py36_0\npip                       18.1                     py36_0\nprometheus_client         0.4.2                    py36_0\nprompt_toolkit            2.0.7                    py36_0\nprotobuf                  3.6.1            py36he6710b0_0\nptyprocess                0.6.0                    py36_0\npycparser                 2.19                     py36_0\npygments                  2.2.0                    py36_0\npyparsing                 2.3.0                    py36_0\npyqt                      5.9.2            py36h05f1152_2\npython                    3.6.5                hc3d631a_2\npython-dateutil           2.7.5                    py36_0\npytorch-nightly           1.0.0.dev20181109 py3.6_cuda9.0.176_cudnn7.1.2_0    pytorch\npytz                      2018.7                   py36_0\npyyaml                    3.13             py36h14c3975_0\npyzmq                     17.1.2           py36h14c3975_0\nqt                        5.9.6                h8703b6f_2\nqtconsole                 4.4.2                    py36_0\nreadline                  7.0                  h7b6447c_5\nrhash                     1.3.6                hb7f436b_0\nsend2trash                1.5.0                    py36_0\nsetuptools                40.5.0                   py36_0\nsip                       4.19.8           py36hf484d3e_0\nsix                       1.11.0                   py36_1\nsqlite                    3.25.2               h7b6447c_0\nterminado                 0.8.1                    py36_1\ntestpath                  0.4.2                    py36_0\ntk                        8.6.8                hbc83047_0\ntornado                   5.1.1            py36h7b6447c_0\ntraitlets                 4.3.2                    py36_0\ntyping                    3.6.4                    py36_0\ntyping-extensions         3.6.6                     <pip>\nwcwidth                   0.1.7                    py36_0\nwebencodings              0.5.1                    py36_1\nwheel                     0.32.2                   py36_0\nwidgetsnbextension        3.4.2                    py36_0\nxz                        5.2.4                h14c3975_4\nyaml                      0.1.7                had09818_2\nzeromq                    4.2.5                hf484d3e_1\nzlib                      1.2.11               ha838bed_2\nPip list:\nPackage            Version          \n------------------ -----------------\nbackcall           0.1.0            \nbleach             3.0.2            \ncertifi            2018.10.15       \ncffi               1.11.5           \ncycler             0.10.0           \ndecorator          4.3.0            \nentrypoints        0.2.3            \nfuture             0.17.1           \nipykernel          5.1.0            \nipython            7.1.1            \nipython-genutils   0.2.0            \nipywidgets         7.4.2            \njedi               0.13.1           \nJinja2             2.10             \njsonschema         2.6.0            \njupyter            1.0.0            \njupyter-client     5.2.3            \njupyter-console    6.0.0            \njupyter-core       4.4.0            \nkiwisolver         1.0.1            \nMarkupSafe         1.0              \nmatplotlib         3.0.1            \nmistune            0.8.4            \nmkl-fft            1.0.6            \nmkl-random         1.0.1            \nnbconvert          5.3.1            \nnbformat           4.4.0            \nnotebook           5.7.0            \nnumpy              1.15.4           \nonnx               1.3.0            \npandocfilters      1.4.2            \nparso              0.3.1            \npexpect            4.6.0            \npickleshare        0.7.5            \npip                18.1             \nprometheus-client  0.4.2            \nprompt-toolkit     2.0.7            \nprotobuf           3.6.1            \nptyprocess         0.6.0            \npycparser          2.19             \nPygments           2.2.0            \npyparsing          2.3.0            \npython-dateutil    2.7.5            \npytz               2018.7           \nPyYAML             3.13             \npyzmq              17.1.2           \nqtconsole          4.4.2            \nSend2Trash         1.5.0            \nsetuptools         40.5.0           \nsix                1.11.0           \nterminado          0.8.1            \ntestpath           0.4.2            \ntorch              1.0.0.dev20181109\ntornado            5.1.1            \ntraitlets          4.3.2            \ntyping             3.6.4            \ntyping-extensions  3.6.6            \nwcwidth            0.1.7            \nwebencodings       0.5.1            \nwheel              0.32.2           \nwidgetsnbextension 3.4.2", "body": "## \ud83d\udcda Documentation\r\n\r\nFollowing the \"[Transfering a Model from PyTorch to Caffe2 and Mobile using ONNX](https://pytorch.org/tutorials/advanced/super_resolution_with_caffe2.html)\" I get the following exception: \r\n```python\r\nArrays are not almost equal to 3 decimals\r\n```\r\n\r\n when running\r\n\r\n```python\r\nnp.testing.assert_almost_equal(torch_out.data.cpu().numpy(), c2_out, decimal=3)\r\n```\r\n(with the documentation specifically asking to contact the team when this happens. :))\r\n\r\nI have been able to reproduce the error on both Ubuntu 16.04 and Google Colab. Note that I have not install onnx-caffe2 and updated the source code following [PR-348](https://github.com/pytorch/tutorials/pull/348).\r\n\r\nThis is the environment on Ubuntu 16.004\r\n\r\n **Conda env**:\r\n```python\r\n# packages in environment at ~/.conda/envs/torch-onnx:\r\n#\r\n# Name                    Version                   Build  Channel\r\nbackcall                  0.1.0                    py36_0\r\nblas                      1.0                         mkl\r\nbleach                    3.0.2                    py36_0\r\nbzip2                     1.0.6                h14c3975_5\r\nca-certificates           2018.03.07                    0\r\ncertifi                   2018.10.15               py36_0\r\ncffi                      1.11.5           py36he75722e_1\r\ncmake                     3.12.2               h52cb24c_0\r\ncycler                    0.10.0                   py36_0\r\ndbus                      1.13.2               h714fa37_1\r\ndecorator                 4.3.0                    py36_0\r\nentrypoints               0.2.3                    py36_2\r\nexpat                     2.2.6                he6710b0_0\r\nfontconfig                2.13.0               h9420a91_0\r\nfreetype                  2.9.1                h8a8886c_1\r\nfuture                    0.17.1                    <pip>\r\nglib                      2.56.2               hd408876_0\r\ngmp                       6.1.2                h6c8ec71_1\r\ngst-plugins-base          1.14.0               hbbd80ab_1\r\ngstreamer                 1.14.0               hb453b48_1\r\nicu                       58.2                 h9c2bf20_1\r\nintel-openmp              2019.0                      118\r\nipykernel                 5.1.0            py36h39e3cac_0\r\nipython                   7.1.1            py36h39e3cac_0\r\nipython_genutils          0.2.0                    py36_0\r\nipywidgets                7.4.2                    py36_0\r\njedi                      0.13.1                   py36_0\r\njinja2                    2.10                     py36_0\r\njpeg                      9b                   h024ee3a_2\r\njsonschema                2.6.0                    py36_0\r\njupyter                   1.0.0                    py36_7\r\njupyter_client            5.2.3                    py36_0\r\njupyter_console           6.0.0                    py36_0\r\njupyter_core              4.4.0                    py36_0\r\nkiwisolver                1.0.1            py36hf484d3e_0\r\nlibcurl                   7.61.1               heec0ca6_0\r\nlibedit                   3.1.20170329         h6b74fdf_2\r\nlibffi                    3.2.1                hd88cf55_4\r\nlibgcc-ng                 8.2.0                hdf63c60_1\r\nlibgfortran-ng            7.3.0                hdf63c60_0\r\nlibpng                    1.6.35               hbc83047_0\r\nlibprotobuf               3.6.1                hd408876_0\r\nlibsodium                 1.0.16               h1bed415_0\r\nlibssh2                   1.8.0                h9cfc8f7_4\r\nlibstdcxx-ng              8.2.0                hdf63c60_1\r\nlibuuid                   1.0.3                h1bed415_2\r\nlibxcb                    1.13                 h1bed415_1\r\nlibxml2                   2.9.8                h26e45fe_1\r\nmagma-cuda90              2.3.0                         1    pytorch\r\nmarkupsafe                1.0              py36h14c3975_1\r\nmatplotlib                3.0.1            py36h5429711_0\r\nmistune                   0.8.4            py36h7b6447c_0\r\nmkl                       2019.0                      118\r\nmkl-include               2019.0                      118\r\nmkl_fft                   1.0.6            py36h7dd41cf_0\r\nmkl_random                1.0.1            py36h4414c95_1\r\nmkldnn                    0.16.1                        0    mingfeima\r\nnbconvert                 5.3.1                    py36_0\r\nnbformat                  4.4.0                    py36_0\r\nncurses                   6.1                  hf484d3e_0\r\nninja                     1.8.2            py36h6bb024c_1\r\nnotebook                  5.7.0                    py36_0\r\nnumpy                     1.15.4           py36h1d66e8a_0\r\nnumpy-base                1.15.4           py36h81de0dd_0\r\nonnx                      1.3.0                     <pip>\r\nopenssl                   1.0.2p               h14c3975_0\r\npandoc                    2.2.3.2                       0\r\npandocfilters             1.4.2                    py36_1\r\nparso                     0.3.1                    py36_0\r\npcre                      8.42                 h439df22_0\r\npexpect                   4.6.0                    py36_0\r\npickleshare               0.7.5                    py36_0\r\npip                       18.1                     py36_0\r\nprometheus_client         0.4.2                    py36_0\r\nprompt_toolkit            2.0.7                    py36_0\r\nprotobuf                  3.6.1            py36he6710b0_0\r\nptyprocess                0.6.0                    py36_0\r\npycparser                 2.19                     py36_0\r\npygments                  2.2.0                    py36_0\r\npyparsing                 2.3.0                    py36_0\r\npyqt                      5.9.2            py36h05f1152_2\r\npython                    3.6.5                hc3d631a_2\r\npython-dateutil           2.7.5                    py36_0\r\npytorch-nightly           1.0.0.dev20181109 py3.6_cuda9.0.176_cudnn7.1.2_0    pytorch\r\npytz                      2018.7                   py36_0\r\npyyaml                    3.13             py36h14c3975_0\r\npyzmq                     17.1.2           py36h14c3975_0\r\nqt                        5.9.6                h8703b6f_2\r\nqtconsole                 4.4.2                    py36_0\r\nreadline                  7.0                  h7b6447c_5\r\nrhash                     1.3.6                hb7f436b_0\r\nsend2trash                1.5.0                    py36_0\r\nsetuptools                40.5.0                   py36_0\r\nsip                       4.19.8           py36hf484d3e_0\r\nsix                       1.11.0                   py36_1\r\nsqlite                    3.25.2               h7b6447c_0\r\nterminado                 0.8.1                    py36_1\r\ntestpath                  0.4.2                    py36_0\r\ntk                        8.6.8                hbc83047_0\r\ntornado                   5.1.1            py36h7b6447c_0\r\ntraitlets                 4.3.2                    py36_0\r\ntyping                    3.6.4                    py36_0\r\ntyping-extensions         3.6.6                     <pip>\r\nwcwidth                   0.1.7                    py36_0\r\nwebencodings              0.5.1                    py36_1\r\nwheel                     0.32.2                   py36_0\r\nwidgetsnbextension        3.4.2                    py36_0\r\nxz                        5.2.4                h14c3975_4\r\nyaml                      0.1.7                had09818_2\r\nzeromq                    4.2.5                hf484d3e_1\r\nzlib                      1.2.11               ha838bed_2\r\n```\r\n\r\n**Pip list**:\r\n```python\r\nPackage            Version          \r\n------------------ -----------------\r\nbackcall           0.1.0            \r\nbleach             3.0.2            \r\ncertifi            2018.10.15       \r\ncffi               1.11.5           \r\ncycler             0.10.0           \r\ndecorator          4.3.0            \r\nentrypoints        0.2.3            \r\nfuture             0.17.1           \r\nipykernel          5.1.0            \r\nipython            7.1.1            \r\nipython-genutils   0.2.0            \r\nipywidgets         7.4.2            \r\njedi               0.13.1           \r\nJinja2             2.10             \r\njsonschema         2.6.0            \r\njupyter            1.0.0            \r\njupyter-client     5.2.3            \r\njupyter-console    6.0.0            \r\njupyter-core       4.4.0            \r\nkiwisolver         1.0.1            \r\nMarkupSafe         1.0              \r\nmatplotlib         3.0.1            \r\nmistune            0.8.4            \r\nmkl-fft            1.0.6            \r\nmkl-random         1.0.1            \r\nnbconvert          5.3.1            \r\nnbformat           4.4.0            \r\nnotebook           5.7.0            \r\nnumpy              1.15.4           \r\nonnx               1.3.0            \r\npandocfilters      1.4.2            \r\nparso              0.3.1            \r\npexpect            4.6.0            \r\npickleshare        0.7.5            \r\npip                18.1             \r\nprometheus-client  0.4.2            \r\nprompt-toolkit     2.0.7            \r\nprotobuf           3.6.1            \r\nptyprocess         0.6.0            \r\npycparser          2.19             \r\nPygments           2.2.0            \r\npyparsing          2.3.0            \r\npython-dateutil    2.7.5            \r\npytz               2018.7           \r\nPyYAML             3.13             \r\npyzmq              17.1.2           \r\nqtconsole          4.4.2            \r\nSend2Trash         1.5.0            \r\nsetuptools         40.5.0           \r\nsix                1.11.0           \r\nterminado          0.8.1            \r\ntestpath           0.4.2            \r\ntorch              1.0.0.dev20181109\r\ntornado            5.1.1            \r\ntraitlets          4.3.2            \r\ntyping             3.6.4            \r\ntyping-extensions  3.6.6            \r\nwcwidth            0.1.7            \r\nwebencodings       0.5.1            \r\nwheel              0.32.2           \r\nwidgetsnbextension 3.4.2      \r\n```"}
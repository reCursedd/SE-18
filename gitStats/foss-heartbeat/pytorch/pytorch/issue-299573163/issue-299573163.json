{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5363", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5363/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5363/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5363/events", "html_url": "https://github.com/pytorch/pytorch/issues/5363", "id": 299573163, "node_id": "MDU6SXNzdWUyOTk1NzMxNjM=", "number": 5363, "title": "`Interrupted system call` error appearing after updating install today", "user": {"login": "meder411", "id": 6818607, "node_id": "MDQ6VXNlcjY4MTg2MDc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6818607?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meder411", "html_url": "https://github.com/meder411", "followers_url": "https://api.github.com/users/meder411/followers", "following_url": "https://api.github.com/users/meder411/following{/other_user}", "gists_url": "https://api.github.com/users/meder411/gists{/gist_id}", "starred_url": "https://api.github.com/users/meder411/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meder411/subscriptions", "organizations_url": "https://api.github.com/users/meder411/orgs", "repos_url": "https://api.github.com/users/meder411/repos", "events_url": "https://api.github.com/users/meder411/events{/privacy}", "received_events_url": "https://api.github.com/users/meder411/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-02-23T01:54:04Z", "updated_at": "2018-02-26T02:13:00Z", "closed_at": "2018-02-23T02:25:53Z", "author_association": "NONE", "body_html": "<p>I updated my PyTorch installation this afternoon in order to use LayerNorm, and now code that worked fine before is giving me data loader errors after 2 epochs of training. Training is all on one GPU currently.</p>\n<pre><code>Traceback (most recent call last):\n  File \"train.py\", line 54, in &lt;module&gt;\n    main()\n  File \"train.py\", line 48, in main\n    solver.run_wasserstein(num_epochs)\n  File \"/playpen/meder/projects/point-gan/point_wgan_solver.py\", line 551, in run_wasserstein\n    sample = data_iter.next()\n  File \"/usr/local/lib/python2.7/dist-packages/torch/utils/data/dataloader.py\", line 275, in __next__\n    idx, batch = self._get_batch()\n  File \"/usr/local/lib/python2.7/dist-packages/torch/utils/data/dataloader.py\", line 254, in _get_batch\n    return self.data_queue.get()\n  File \"/usr/lib/python2.7/multiprocessing/queues.py\", line 378, in get\n    return recv()\n  File \"/usr/local/lib/python2.7/dist-packages/torch/multiprocessing/queue.py\", line 22, in recv\n    return pickle.loads(buf)\n  File \"/usr/lib/python2.7/pickle.py\", line 1388, in loads\n    return Unpickler(file).load()\n  File \"/usr/lib/python2.7/pickle.py\", line 864, in load\n    dispatch[key](self)\n  File \"/usr/lib/python2.7/pickle.py\", line 1139, in load_reduce\n    value = func(*args)\n  File \"/usr/local/lib/python2.7/dist-packages/torch/multiprocessing/reductions.py\", line 68, in rebuild_storage_fd\n    fd = multiprocessing.reduction.rebuild_handle(df)\n  File \"/usr/lib/python2.7/multiprocessing/reduction.py\", line 157, in rebuild_handle\n    new_handle = recv_handle(conn)\n  File \"/usr/lib/python2.7/multiprocessing/reduction.py\", line 83, in recv_handle\n    return _multiprocessing.recvfd(conn.fileno())\nOSError: [Errno 4] Interrupted system call\n</code></pre>\n<p>The only difference in my code from before and after the install is the addition of 3 LayerNorm layers. Perhaps something got buggy in the update?</p>\n<p>I'm currently checking if the same issue occurs without LayerNorm. Not quite sure why that would be the source of the issue though.</p>\n<ul>\n<li>OS: Ubuntu 16.04</li>\n<li>PyTorch version: GitHub source (as of ~6pm EST)</li>\n<li>How you installed PyTorch (conda, pip, source): source</li>\n<li>Python version: 2.7</li>\n<li>CUDA/cuDNN version: 9.0</li>\n<li>GPU models and configuration: Titan X &amp; 2 Titan Z</li>\n<li>GCC version (if compiling from source): 5.4.0</li>\n</ul>", "body_text": "I updated my PyTorch installation this afternoon in order to use LayerNorm, and now code that worked fine before is giving me data loader errors after 2 epochs of training. Training is all on one GPU currently.\nTraceback (most recent call last):\n  File \"train.py\", line 54, in <module>\n    main()\n  File \"train.py\", line 48, in main\n    solver.run_wasserstein(num_epochs)\n  File \"/playpen/meder/projects/point-gan/point_wgan_solver.py\", line 551, in run_wasserstein\n    sample = data_iter.next()\n  File \"/usr/local/lib/python2.7/dist-packages/torch/utils/data/dataloader.py\", line 275, in __next__\n    idx, batch = self._get_batch()\n  File \"/usr/local/lib/python2.7/dist-packages/torch/utils/data/dataloader.py\", line 254, in _get_batch\n    return self.data_queue.get()\n  File \"/usr/lib/python2.7/multiprocessing/queues.py\", line 378, in get\n    return recv()\n  File \"/usr/local/lib/python2.7/dist-packages/torch/multiprocessing/queue.py\", line 22, in recv\n    return pickle.loads(buf)\n  File \"/usr/lib/python2.7/pickle.py\", line 1388, in loads\n    return Unpickler(file).load()\n  File \"/usr/lib/python2.7/pickle.py\", line 864, in load\n    dispatch[key](self)\n  File \"/usr/lib/python2.7/pickle.py\", line 1139, in load_reduce\n    value = func(*args)\n  File \"/usr/local/lib/python2.7/dist-packages/torch/multiprocessing/reductions.py\", line 68, in rebuild_storage_fd\n    fd = multiprocessing.reduction.rebuild_handle(df)\n  File \"/usr/lib/python2.7/multiprocessing/reduction.py\", line 157, in rebuild_handle\n    new_handle = recv_handle(conn)\n  File \"/usr/lib/python2.7/multiprocessing/reduction.py\", line 83, in recv_handle\n    return _multiprocessing.recvfd(conn.fileno())\nOSError: [Errno 4] Interrupted system call\n\nThe only difference in my code from before and after the install is the addition of 3 LayerNorm layers. Perhaps something got buggy in the update?\nI'm currently checking if the same issue occurs without LayerNorm. Not quite sure why that would be the source of the issue though.\n\nOS: Ubuntu 16.04\nPyTorch version: GitHub source (as of ~6pm EST)\nHow you installed PyTorch (conda, pip, source): source\nPython version: 2.7\nCUDA/cuDNN version: 9.0\nGPU models and configuration: Titan X & 2 Titan Z\nGCC version (if compiling from source): 5.4.0", "body": "I updated my PyTorch installation this afternoon in order to use LayerNorm, and now code that worked fine before is giving me data loader errors after 2 epochs of training. Training is all on one GPU currently.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 54, in <module>\r\n    main()\r\n  File \"train.py\", line 48, in main\r\n    solver.run_wasserstein(num_epochs)\r\n  File \"/playpen/meder/projects/point-gan/point_wgan_solver.py\", line 551, in run_wasserstein\r\n    sample = data_iter.next()\r\n  File \"/usr/local/lib/python2.7/dist-packages/torch/utils/data/dataloader.py\", line 275, in __next__\r\n    idx, batch = self._get_batch()\r\n  File \"/usr/local/lib/python2.7/dist-packages/torch/utils/data/dataloader.py\", line 254, in _get_batch\r\n    return self.data_queue.get()\r\n  File \"/usr/lib/python2.7/multiprocessing/queues.py\", line 378, in get\r\n    return recv()\r\n  File \"/usr/local/lib/python2.7/dist-packages/torch/multiprocessing/queue.py\", line 22, in recv\r\n    return pickle.loads(buf)\r\n  File \"/usr/lib/python2.7/pickle.py\", line 1388, in loads\r\n    return Unpickler(file).load()\r\n  File \"/usr/lib/python2.7/pickle.py\", line 864, in load\r\n    dispatch[key](self)\r\n  File \"/usr/lib/python2.7/pickle.py\", line 1139, in load_reduce\r\n    value = func(*args)\r\n  File \"/usr/local/lib/python2.7/dist-packages/torch/multiprocessing/reductions.py\", line 68, in rebuild_storage_fd\r\n    fd = multiprocessing.reduction.rebuild_handle(df)\r\n  File \"/usr/lib/python2.7/multiprocessing/reduction.py\", line 157, in rebuild_handle\r\n    new_handle = recv_handle(conn)\r\n  File \"/usr/lib/python2.7/multiprocessing/reduction.py\", line 83, in recv_handle\r\n    return _multiprocessing.recvfd(conn.fileno())\r\nOSError: [Errno 4] Interrupted system call\r\n```\r\nThe only difference in my code from before and after the install is the addition of 3 LayerNorm layers. Perhaps something got buggy in the update?\r\n\r\nI'm currently checking if the same issue occurs without LayerNorm. Not quite sure why that would be the source of the issue though.\r\n\r\n- OS: Ubuntu 16.04\r\n- PyTorch version: GitHub source (as of ~6pm EST)\r\n- How you installed PyTorch (conda, pip, source): source\r\n- Python version: 2.7\r\n- CUDA/cuDNN version: 9.0\r\n- GPU models and configuration: Titan X & 2 Titan Z\r\n- GCC version (if compiling from source): 5.4.0\r\n"}
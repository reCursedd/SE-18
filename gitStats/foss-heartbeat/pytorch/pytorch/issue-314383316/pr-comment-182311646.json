{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/182311646", "pull_request_review_id": 113079460, "id": 182311646, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MjMxMTY0Ng==", "diff_hunk": "@@ -235,9 +245,33 @@ void encodeGraph(onnx::GraphProto * p_g, const std::shared_ptr<Graph> & g,\n     for(auto attr_name : node->attributeNames()) {\n       addAttribute(p_n, node, attr_name);\n     }\n+    if (node->kind() == torch::jit::onnx::Loop) {\n+      JIT_ASSERT(node->blocks().size() == 1);", "path": "torch/csrc/jit/export.cpp", "position": null, "original_position": 48, "commit_id": "7185babd313816952574dbf818e34481e82709c5", "original_commit_id": "dc90b27e584facfd03be85f44626f7540ceef06e", "user": {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, "body": "Since all value references in ONNX are done using identifier strings rather than direct pointers, we don't actually need them to have explicit captures, we can just allow the free variables to exist in the protobufs. I think the control-flow proposal in ONNX also does it this way, so we don't need capture logic.", "created_at": "2018-04-18T05:21:36Z", "updated_at": "2018-11-23T15:42:41Z", "html_url": "https://github.com/pytorch/pytorch/pull/6608#discussion_r182311646", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/6608", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/182311646"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/6608#discussion_r182311646"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6608"}}, "body_html": "<p>Since all value references in ONNX are done using identifier strings rather than direct pointers, we don't actually need them to have explicit captures, we can just allow the free variables to exist in the protobufs. I think the control-flow proposal in ONNX also does it this way, so we don't need capture logic.</p>", "body_text": "Since all value references in ONNX are done using identifier strings rather than direct pointers, we don't actually need them to have explicit captures, we can just allow the free variables to exist in the protobufs. I think the control-flow proposal in ONNX also does it this way, so we don't need capture logic.", "in_reply_to_id": 181585757}
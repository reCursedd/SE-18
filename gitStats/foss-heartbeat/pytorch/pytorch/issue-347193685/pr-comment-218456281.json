{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/218456281", "pull_request_review_id": 156397710, "id": 218456281, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxODQ1NjI4MQ==", "diff_hunk": "@@ -655,6 +656,16 @@ std::tuple<Tensor, Tensor, Tensor, Tensor, Tensor> _cudnn_rnn(\n     const Tensor& fn_dropout_state\n     ) {\n \n+  // check tensor device types\n+  auto to_check_tensors = std::vector<TensorArg>();\n+  to_check_tensors.emplace_back(TensorArg(input_r, \"input\", 1));\n+  to_check_tensors.emplace_back(TensorArg(hx, \"hx\", 2));\n+  to_check_tensors.emplace_back(TensorArg(cx, \"cx\", 3));\n+  for (int i = 4; i < weight.size(); i++) {\n+    to_check_tensors.emplace_back(TensorArg(weight[i], (\"weight_\" + std::to_string(i)).c_str(), i));", "path": "aten/src/ATen/native/cudnn/RNN.cpp", "position": null, "original_position": 18, "commit_id": "18150acbd02c1c69eb26873bd01652b73665368e", "original_commit_id": "04491ff965bbfa48a23a58d19f426089a641ef83", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "Those are not the real names of those weights, so it will only end up confusing. They're usually called sth like `weight_ih_l1_rev`. We don't want to format strings like this every time this is called, so it's really better to just say that \"weights were found on device X, but were expected to be on device Y\", without getting into specifics.\r\n\r\nAlso, it would be good if we could avoid allocating the vector unnecessarily. Your previous function did a pretty good job at that.", "created_at": "2018-09-18T14:29:06Z", "updated_at": "2018-11-23T15:51:34Z", "html_url": "https://github.com/pytorch/pytorch/pull/10185#discussion_r218456281", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/10185", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/218456281"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/10185#discussion_r218456281"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/10185"}}, "body_html": "<p>Those are not the real names of those weights, so it will only end up confusing. They're usually called sth like <code>weight_ih_l1_rev</code>. We don't want to format strings like this every time this is called, so it's really better to just say that \"weights were found on device X, but were expected to be on device Y\", without getting into specifics.</p>\n<p>Also, it would be good if we could avoid allocating the vector unnecessarily. Your previous function did a pretty good job at that.</p>", "body_text": "Those are not the real names of those weights, so it will only end up confusing. They're usually called sth like weight_ih_l1_rev. We don't want to format strings like this every time this is called, so it's really better to just say that \"weights were found on device X, but were expected to be on device Y\", without getting into specifics.\nAlso, it would be good if we could avoid allocating the vector unnecessarily. Your previous function did a pretty good job at that."}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/206009147", "pull_request_review_id": 141383805, "id": 206009147, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNjAwOTE0Nw==", "diff_hunk": "@@ -455,44 +434,39 @@ at::optional<std::vector<Value*>> tryMatchSchema(\n     }\n \n     // check input types\n-    std::vector<Value*> flat_inputs;\n+    std::vector<Value*> matched_inputs;\n     for(size_t i = 0; i < schema.arguments.size(); ++i) {\n-      NamedValue v = *positional_inputs[i];\n+      Value* value = positional_inputs[i]->value;\n       const auto& arg = schema.arguments[i];\n \n       // some functions that take lists of integers for fixed size arrays\n       // also allow single ints to be passed in their place.\n       // the single int is then repeated to the length of the list\n-      if (isIntUsedAsIntList(v.value, arg)) {\n-        std::vector<Value*> repeated(*arg.N, v.value);\n-        v.value = graph.insertNode(graph.createList(IntType::get(), repeated))->output();\n+      if (isIntUsedAsIntList(value, arg)) {\n+        std::vector<Value*> repeated(*arg.N, value);\n+        value = graph.insertNode(graph.createList(IntType::get(), repeated))->output();\n       }\n \n-      // Allow tuples that only contain integers to turn into lists of integers\n-      if(*ListType::ofInts() == *arg.type &&\n-         v.value->type()->kind() == TypeKind::TupleType &&\n-         v.value->type()->isSubtypeOf(ListType::ofInts())) {\n-        auto unpacked = createTupleUnpack(v.value);\n-        v.value = graph.insertNode(graph.createList(IntType::get(), unpacked))->output();\n+      // Allow homogeneous tuples to be casted implicitly to lists of appropriate types\n+      if (arg.type->kind() == TypeKind::ListType &&\n+          value->type()->kind() == TypeKind::TupleType &&\n+          value->type()->isSubtypeOf(arg.type)) {", "path": "torch/csrc/jit/script/compiler.cpp", "position": 59, "original_position": 59, "commit_id": "50f5582427e9b620e8bee6a2926cfb247bde8b00", "original_commit_id": "c4b8a291c2fcf54d7e4f5cc97b8be2c704cb1b1d", "user": {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, "body": "We don't have IValue types for `List of tuples` or `List[List[Int]]`. Luckily we also can't create them at the moment, so I think this is file.", "created_at": "2018-07-30T03:45:20Z", "updated_at": "2018-11-23T15:48:21Z", "html_url": "https://github.com/pytorch/pytorch/pull/9948#discussion_r206009147", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/9948", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/206009147"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/9948#discussion_r206009147"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9948"}}, "body_html": "<p>We don't have IValue types for <code>List of tuples</code> or <code>List[List[Int]]</code>. Luckily we also can't create them at the moment, so I think this is file.</p>", "body_text": "We don't have IValue types for List of tuples or List[List[Int]]. Luckily we also can't create them at the moment, so I think this is file."}
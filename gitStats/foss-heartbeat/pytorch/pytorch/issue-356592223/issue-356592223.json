{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11206", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11206/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11206/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11206/events", "html_url": "https://github.com/pytorch/pytorch/issues/11206", "id": 356592223, "node_id": "MDU6SXNzdWUzNTY1OTIyMjM=", "number": 11206, "title": "torch.tanh returns wrong result on sliced tensors", "user": {"login": "ptrblck", "id": 11662379, "node_id": "MDQ6VXNlcjExNjYyMzc5", "avatar_url": "https://avatars3.githubusercontent.com/u/11662379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptrblck", "html_url": "https://github.com/ptrblck", "followers_url": "https://api.github.com/users/ptrblck/followers", "following_url": "https://api.github.com/users/ptrblck/following{/other_user}", "gists_url": "https://api.github.com/users/ptrblck/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptrblck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptrblck/subscriptions", "organizations_url": "https://api.github.com/users/ptrblck/orgs", "repos_url": "https://api.github.com/users/ptrblck/repos", "events_url": "https://api.github.com/users/ptrblck/events{/privacy}", "received_events_url": "https://api.github.com/users/ptrblck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443484135, "node_id": "MDU6TGFiZWw0NDM0ODQxMzU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/high%20priority", "name": "high priority", "color": "F22613", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "cpuhrsch", "id": 1716488, "node_id": "MDQ6VXNlcjE3MTY0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1716488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpuhrsch", "html_url": "https://github.com/cpuhrsch", "followers_url": "https://api.github.com/users/cpuhrsch/followers", "following_url": "https://api.github.com/users/cpuhrsch/following{/other_user}", "gists_url": "https://api.github.com/users/cpuhrsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpuhrsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpuhrsch/subscriptions", "organizations_url": "https://api.github.com/users/cpuhrsch/orgs", "repos_url": "https://api.github.com/users/cpuhrsch/repos", "events_url": "https://api.github.com/users/cpuhrsch/events{/privacy}", "received_events_url": "https://api.github.com/users/cpuhrsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cpuhrsch", "id": 1716488, "node_id": "MDQ6VXNlcjE3MTY0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1716488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpuhrsch", "html_url": "https://github.com/cpuhrsch", "followers_url": "https://api.github.com/users/cpuhrsch/followers", "following_url": "https://api.github.com/users/cpuhrsch/following{/other_user}", "gists_url": "https://api.github.com/users/cpuhrsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpuhrsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpuhrsch/subscriptions", "organizations_url": "https://api.github.com/users/cpuhrsch/orgs", "repos_url": "https://api.github.com/users/cpuhrsch/repos", "events_url": "https://api.github.com/users/cpuhrsch/events{/privacy}", "received_events_url": "https://api.github.com/users/cpuhrsch/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-09-03T20:10:20Z", "updated_at": "2018-09-05T00:29:11Z", "closed_at": "2018-09-05T00:29:11Z", "author_association": "CONTRIBUTOR", "body_html": "<h2>Issue description</h2>\n<p><code>torch.tanh</code> seems to yield the wrong result, if the input tensor is sliced.<br>\nA <code>.contiguous</code> call seems to fix the behavior.<br>\n<a href=\"https://discuss.pytorch.org/t/different-behaviors-on-slices/24365\" rel=\"nofollow\">Link</a> to thread in the board.</p>\n<h2>Code example</h2>\n<div class=\"highlight highlight-source-python\"><pre>x <span class=\"pl-k\">=</span> torch.zeros(<span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">2</span>)\nx[:, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">...</span>] <span class=\"pl-k\">=</span> <span class=\"pl-c1\">1</span>.\n<span class=\"pl-c1\">print</span>(x[:, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">...</span>])\n<span class=\"pl-c1\">print</span>(torch.tanh(x[<span class=\"pl-c1\">...</span>]))\n<span class=\"pl-c1\">print</span>(torch.tanh(x[:, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">...</span>])) <span class=\"pl-c\"><span class=\"pl-c\">#</span> wrong result</span>\n<span class=\"pl-c1\">print</span>(torch.tanh(x[:, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">...</span>].contiguous())) <span class=\"pl-c\"><span class=\"pl-c\">#</span> right result</span></pre></div>\n<h2>System Info</h2>\n<ul>\n<li>OS: Ubuntu 16.04.5 LTS</li>\n<li>PyTorch version: 0.5.0a0+6c7fb15 (installed from source)</li>\n<li>Python version: 2.7</li>\n<li>GCC version (if compiling from source): (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609</li>\n<li>CMake version: 3.11.1</li>\n</ul>\n<p>Also reported on <code>0.4.1</code> in the thread.</p>", "body_text": "Issue description\ntorch.tanh seems to yield the wrong result, if the input tensor is sliced.\nA .contiguous call seems to fix the behavior.\nLink to thread in the board.\nCode example\nx = torch.zeros(3, 3, 1, 2)\nx[:, 2, ...] = 1.\nprint(x[:, 2, ...])\nprint(torch.tanh(x[...]))\nprint(torch.tanh(x[:, 2, ...])) # wrong result\nprint(torch.tanh(x[:, 2, ...].contiguous())) # right result\nSystem Info\n\nOS: Ubuntu 16.04.5 LTS\nPyTorch version: 0.5.0a0+6c7fb15 (installed from source)\nPython version: 2.7\nGCC version (if compiling from source): (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\nCMake version: 3.11.1\n\nAlso reported on 0.4.1 in the thread.", "body": "## Issue description\r\n\r\n`torch.tanh` seems to yield the wrong result, if the input tensor is sliced.\r\nA `.contiguous` call seems to fix the behavior.\r\n[Link](https://discuss.pytorch.org/t/different-behaviors-on-slices/24365) to thread in the board.\r\n\r\n## Code example\r\n\r\n```python\r\nx = torch.zeros(3, 3, 1, 2)\r\nx[:, 2, ...] = 1.\r\nprint(x[:, 2, ...])\r\nprint(torch.tanh(x[...]))\r\nprint(torch.tanh(x[:, 2, ...])) # wrong result\r\nprint(torch.tanh(x[:, 2, ...].contiguous())) # right result\r\n```\r\n\r\n## System Info\r\n\r\n- OS: Ubuntu 16.04.5 LTS\r\n- PyTorch version: 0.5.0a0+6c7fb15 (installed from source)\r\n- Python version: 2.7\r\n- GCC version (if compiling from source): (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\n- CMake version: 3.11.1\r\n\r\nAlso reported on `0.4.1` in the thread.\r\n"}
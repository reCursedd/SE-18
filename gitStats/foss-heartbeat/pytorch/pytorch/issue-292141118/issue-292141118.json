{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4896", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4896/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4896/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4896/events", "html_url": "https://github.com/pytorch/pytorch/issues/4896", "id": 292141118, "node_id": "MDU6SXNzdWUyOTIxNDExMTg=", "number": 4896, "title": "Second order derivative in neural network w.r.t. input encounter all zero", "user": {"login": "uiyo", "id": 16344469, "node_id": "MDQ6VXNlcjE2MzQ0NDY5", "avatar_url": "https://avatars2.githubusercontent.com/u/16344469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uiyo", "html_url": "https://github.com/uiyo", "followers_url": "https://api.github.com/users/uiyo/followers", "following_url": "https://api.github.com/users/uiyo/following{/other_user}", "gists_url": "https://api.github.com/users/uiyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/uiyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uiyo/subscriptions", "organizations_url": "https://api.github.com/users/uiyo/orgs", "repos_url": "https://api.github.com/users/uiyo/repos", "events_url": "https://api.github.com/users/uiyo/events{/privacy}", "received_events_url": "https://api.github.com/users/uiyo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-27T18:19:20Z", "updated_at": "2018-01-29T07:48:29Z", "closed_at": "2018-01-27T21:31:52Z", "author_association": "NONE", "body_html": "<p><code>import torch</code><br>\n<code>from torch.autograd import grad,Variable</code></p>\n<p><code>input = Variable(torch.rand(1,3,224,224), requires_grad=True).cuda()</code><br>\n<code>w = Variable(torch.rand(1,802816)).cuda()</code><br>\n<code>net = vgg16_withoutfc().cuda()</code><br>\n<code>output = net(input)</code><br>\n<code>jacob = grad(output, input, grad_outputs=w, create_graph=True)[0]</code><br>\n<code>y = grad(jacob.sum(), input, create_graph=True)[0]</code></p>\n<p>the values of y somehow are all zero<br>\nwhile in none-neural network case</p>\n<p><code>x = Variable(torch.rand(2,2), requires_grad=True).cuda()</code><br>\n<code>z = Variable(torch.rand(2,2)).cuda()</code><br>\n<code>n = x**2</code><br>\n<code>jacob = grad(n, x, grad_outputs=z, create_graph=True)[0]</code><br>\n<code>y = grad(jacob.sum(), x, create_graph=True)[0]</code></p>\n<p>the values of y are all normal<br>\nHow to fix this?</p>", "body_text": "import torch\nfrom torch.autograd import grad,Variable\ninput = Variable(torch.rand(1,3,224,224), requires_grad=True).cuda()\nw = Variable(torch.rand(1,802816)).cuda()\nnet = vgg16_withoutfc().cuda()\noutput = net(input)\njacob = grad(output, input, grad_outputs=w, create_graph=True)[0]\ny = grad(jacob.sum(), input, create_graph=True)[0]\nthe values of y somehow are all zero\nwhile in none-neural network case\nx = Variable(torch.rand(2,2), requires_grad=True).cuda()\nz = Variable(torch.rand(2,2)).cuda()\nn = x**2\njacob = grad(n, x, grad_outputs=z, create_graph=True)[0]\ny = grad(jacob.sum(), x, create_graph=True)[0]\nthe values of y are all normal\nHow to fix this?", "body": "`import torch`\r\n`from torch.autograd import grad,Variable`\r\n\r\n`input = Variable(torch.rand(1,3,224,224), requires_grad=True).cuda()`\r\n`w = Variable(torch.rand(1,802816)).cuda()`\r\n`net = vgg16_withoutfc().cuda()`\r\n`output = net(input)`\r\n`jacob = grad(output, input, grad_outputs=w, create_graph=True)[0]`\r\n`y = grad(jacob.sum(), input, create_graph=True)[0]`\r\n\r\nthe values of y somehow are all zero\r\nwhile in none-neural network case\r\n\r\n`x = Variable(torch.rand(2,2), requires_grad=True).cuda()`\r\n`z = Variable(torch.rand(2,2)).cuda()`\r\n`n = x**2`\r\n`jacob = grad(n, x, grad_outputs=z, create_graph=True)[0]`\r\n`y = grad(jacob.sum(), x, create_graph=True)[0]`\r\n\r\nthe values of y are all normal\r\nHow to fix this? "}
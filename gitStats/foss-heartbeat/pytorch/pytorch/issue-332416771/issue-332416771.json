{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8483", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8483/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8483/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8483/events", "html_url": "https://github.com/pytorch/pytorch/issues/8483", "id": 332416771, "node_id": "MDU6SXNzdWUzMzI0MTY3NzE=", "number": 8483, "title": "roi_crop (from Detectron.pytorch) building consistently fails ", "user": {"login": "phalexo", "id": 4603365, "node_id": "MDQ6VXNlcjQ2MDMzNjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/4603365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phalexo", "html_url": "https://github.com/phalexo", "followers_url": "https://api.github.com/users/phalexo/followers", "following_url": "https://api.github.com/users/phalexo/following{/other_user}", "gists_url": "https://api.github.com/users/phalexo/gists{/gist_id}", "starred_url": "https://api.github.com/users/phalexo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phalexo/subscriptions", "organizations_url": "https://api.github.com/users/phalexo/orgs", "repos_url": "https://api.github.com/users/phalexo/repos", "events_url": "https://api.github.com/users/phalexo/events{/privacy}", "received_events_url": "https://api.github.com/users/phalexo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-06-14T14:01:43Z", "updated_at": "2018-08-15T17:54:55Z", "closed_at": "2018-06-14T14:03:24Z", "author_association": "NONE", "body_html": "<p>Python has no problem with importing pytorch, but building the extension fails.</p>\n<p>gcc -pthread -B /home/developer/anaconda3/envs/pytorch/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DWITH_CUDA -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/THC -I/usr/local/cuda/include -I/home/developer/anaconda3/envs/pytorch/include/python3.6m -c /home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c -o ./home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.o -std=c99<br>\n/home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c: In function 'BilinearSamplerBHWD_updateOutput_cuda':<br>\n/home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c:22:64: error: dereferencing pointer to incomplete type 'THCTensor {aka struct THCTensor}'<br>\nsuccess = BilinearSamplerBHWD_updateOutput_cuda_kernel(output-&gt;size[1],<br>\n^<br>\nTraceback (most recent call last):<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/unixccompiler.py\", line 118, in _compile<br>\nextra_postargs)<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/ccompiler.py\", line 909, in spawn<br>\nspawn(cmd, dry_run=self.dry_run)<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/spawn.py\", line 36, in spawn<br>\n_spawn_posix(cmd, search_path, dry_run=dry_run)<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/spawn.py\", line 159, in _spawn_posix<br>\n% (cmd, exit_status))<br>\ndistutils.errors.DistutilsExecError: command 'gcc' failed with exit status 1</p>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>Traceback (most recent call last):<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 51, in _build<br>\ndist.run_command('build_ext')<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/dist.py\", line 974, in run_command<br>\ncmd_obj.run()<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 339, in run<br>\nself.build_extensions()<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 448, in build_extensions<br>\nself._build_extensions_serial()<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 473, in _build_extensions_serial<br>\nself.build_extension(ext)<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 533, in build_extension<br>\ndepends=ext.depends)<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/ccompiler.py\", line 574, in compile<br>\nself._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/unixccompiler.py\", line 120, in _compile</p>", "body_text": "Python has no problem with importing pytorch, but building the extension fails.\ngcc -pthread -B /home/developer/anaconda3/envs/pytorch/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DWITH_CUDA -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/THC -I/usr/local/cuda/include -I/home/developer/anaconda3/envs/pytorch/include/python3.6m -c /home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c -o ./home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.o -std=c99\n/home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c: In function 'BilinearSamplerBHWD_updateOutput_cuda':\n/home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c:22:64: error: dereferencing pointer to incomplete type 'THCTensor {aka struct THCTensor}'\nsuccess = BilinearSamplerBHWD_updateOutput_cuda_kernel(output->size[1],\n^\nTraceback (most recent call last):\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/unixccompiler.py\", line 118, in _compile\nextra_postargs)\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/ccompiler.py\", line 909, in spawn\nspawn(cmd, dry_run=self.dry_run)\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/spawn.py\", line 36, in spawn\n_spawn_posix(cmd, search_path, dry_run=dry_run)\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/spawn.py\", line 159, in _spawn_posix\n% (cmd, exit_status))\ndistutils.errors.DistutilsExecError: command 'gcc' failed with exit status 1\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 51, in _build\ndist.run_command('build_ext')\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/dist.py\", line 974, in run_command\ncmd_obj.run()\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 339, in run\nself.build_extensions()\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 448, in build_extensions\nself._build_extensions_serial()\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 473, in _build_extensions_serial\nself.build_extension(ext)\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 533, in build_extension\ndepends=ext.depends)\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/ccompiler.py\", line 574, in compile\nself._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/unixccompiler.py\", line 120, in _compile", "body": "Python has no problem with importing pytorch, but building the extension fails.\r\n\r\ngcc -pthread -B /home/developer/anaconda3/envs/pytorch/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DWITH_CUDA -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH -I/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/THC -I/usr/local/cuda/include -I/home/developer/anaconda3/envs/pytorch/include/python3.6m -c /home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c -o ./home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.o -std=c99\r\n/home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c: In function 'BilinearSamplerBHWD_updateOutput_cuda':\r\n/home/developer/Detectron.pytorch/lib/model/roi_crop/src/roi_crop_cuda.c:22:64: error: dereferencing pointer to incomplete type 'THCTensor {aka struct THCTensor}'\r\n   success = BilinearSamplerBHWD_updateOutput_cuda_kernel(output->size[1],\r\n                                                                ^\r\nTraceback (most recent call last):\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/unixccompiler.py\", line 118, in _compile\r\n    extra_postargs)\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/ccompiler.py\", line 909, in spawn\r\n    spawn(cmd, dry_run=self.dry_run)\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/spawn.py\", line 36, in spawn\r\n    _spawn_posix(cmd, search_path, dry_run=dry_run)\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/spawn.py\", line 159, in _spawn_posix\r\n    % (cmd, exit_status))\r\ndistutils.errors.DistutilsExecError: command 'gcc' failed with exit status 1\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 51, in _build\r\n    dist.run_command('build_ext')\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/dist.py\", line 974, in run_command\r\n    cmd_obj.run()\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 339, in run\r\n    self.build_extensions()\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 448, in build_extensions\r\n    self._build_extensions_serial()\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 473, in _build_extensions_serial\r\n    self.build_extension(ext)\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/command/build_ext.py\", line 533, in build_extension\r\n    depends=ext.depends)\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/ccompiler.py\", line 574, in compile\r\n    self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/distutils/unixccompiler.py\", line 120, in _compile\r\n"}
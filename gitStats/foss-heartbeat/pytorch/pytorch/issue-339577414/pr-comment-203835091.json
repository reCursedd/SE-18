{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/203835091", "pull_request_review_id": 138806104, "id": 203835091, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzgzNTA5MQ==", "diff_hunk": "@@ -81,12 +81,25 @@ Tensor _dim_arange(const Tensor& like, int64_t dim) {\n // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ empty ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n \n Tensor empty(IntList size, const TensorOptions& options) {\n+#ifndef USE_TH_SIZE_ZERO_DIM\n   return options.type().tensor(size);\n+#else\n+  if (options.type().is_sparse() && size.size() == 0) {", "path": "aten/src/ATen/native/TensorFactories.cpp", "position": null, "original_position": 7, "commit_id": "f7b1f23e8f85e8484934de71c9708933421009d0", "original_commit_id": "2d7f892678d30e2563d78b68c31b03b3605f8b3c", "user": {"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}, "body": "This code path is called by `x = torch.sparse.DoubleTensor()` which passes an empty size to this function. Since we don't differentiate how the empty constructor is dispatched in higher level, we probably need special handling for sparse tensor here.", "created_at": "2018-07-19T18:51:43Z", "updated_at": "2018-11-23T15:47:43Z", "html_url": "https://github.com/pytorch/pytorch/pull/9279#discussion_r203835091", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/9279", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/203835091"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/9279#discussion_r203835091"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9279"}}, "body_html": "<p>This code path is called by <code>x = torch.sparse.DoubleTensor()</code> which passes an empty size to this function. Since we don't differentiate how the empty constructor is dispatched in higher level, we probably need special handling for sparse tensor here.</p>", "body_text": "This code path is called by x = torch.sparse.DoubleTensor() which passes an empty size to this function. Since we don't differentiate how the empty constructor is dispatched in higher level, we probably need special handling for sparse tensor here.", "in_reply_to_id": 203816798}
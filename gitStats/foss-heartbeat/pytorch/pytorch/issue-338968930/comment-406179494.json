{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/406179494", "html_url": "https://github.com/pytorch/pytorch/issues/9208#issuecomment-406179494", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/9208", "id": 406179494, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjE3OTQ5NA==", "user": {"login": "BrettRyland", "id": 18440126, "node_id": "MDQ6VXNlcjE4NDQwMTI2", "avatar_url": "https://avatars3.githubusercontent.com/u/18440126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BrettRyland", "html_url": "https://github.com/BrettRyland", "followers_url": "https://api.github.com/users/BrettRyland/followers", "following_url": "https://api.github.com/users/BrettRyland/following{/other_user}", "gists_url": "https://api.github.com/users/BrettRyland/gists{/gist_id}", "starred_url": "https://api.github.com/users/BrettRyland/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BrettRyland/subscriptions", "organizations_url": "https://api.github.com/users/BrettRyland/orgs", "repos_url": "https://api.github.com/users/BrettRyland/repos", "events_url": "https://api.github.com/users/BrettRyland/events{/privacy}", "received_events_url": "https://api.github.com/users/BrettRyland/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-19T07:19:20Z", "updated_at": "2018-07-19T07:19:20Z", "author_association": "NONE", "body_html": "<p>This issue also occurs on Debian/unstable with CUDA 9.2 compiling with <code>gcc-7</code> (<code>7.3.0-26</code>) as the main compiler and <code>-DCUDA_HOST_COMPILER=/usr/bin/gcc-6</code> due to the flag <code>-faligned-new</code> not existing in <code>gcc-6</code> (<code>6.4.0-18</code>).<br>\nCommenting out the appropriate lines in the main <code>CMakeLists.txt</code> allows compilation to proceed:</p>\n<pre><code>diff --git a/CMakeLists.txt b/CMakeLists.txt\nindex 1cb5d13bc..3ae2dcaa8 100644\n--- a/CMakeLists.txt\n+++ b/CMakeLists.txt\n@@ -229,11 +229,11 @@ if(NOT MSVC)\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-constexpr-not-const\")\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-missing-braces\")\n   endif()\n-  if ((APPLE AND (NOT (\"${CLANG_VERSION_STRING}\" VERSION_LESS \"9.0\")))\n-    OR (CMAKE_COMPILER_IS_GNUCXX \n-    AND (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 7.0 AND NOT APPLE)))\n-    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -faligned-new\")\n-  endif()\n+  #if ((APPLE AND (NOT (\"${CLANG_VERSION_STRING}\" VERSION_LESS \"9.0\")))\n+    #OR (CMAKE_COMPILER_IS_GNUCXX \n+    #AND (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 7.0 AND NOT APPLE)))\n+    #set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -faligned-new\") # This breaks nvcc using gcc-6\n+  #endif()\n   if ($ENV{WERROR})\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Werror\")\n   endif($ENV{WERROR})\n</code></pre>", "body_text": "This issue also occurs on Debian/unstable with CUDA 9.2 compiling with gcc-7 (7.3.0-26) as the main compiler and -DCUDA_HOST_COMPILER=/usr/bin/gcc-6 due to the flag -faligned-new not existing in gcc-6 (6.4.0-18).\nCommenting out the appropriate lines in the main CMakeLists.txt allows compilation to proceed:\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\nindex 1cb5d13bc..3ae2dcaa8 100644\n--- a/CMakeLists.txt\n+++ b/CMakeLists.txt\n@@ -229,11 +229,11 @@ if(NOT MSVC)\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-constexpr-not-const\")\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-missing-braces\")\n   endif()\n-  if ((APPLE AND (NOT (\"${CLANG_VERSION_STRING}\" VERSION_LESS \"9.0\")))\n-    OR (CMAKE_COMPILER_IS_GNUCXX \n-    AND (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 7.0 AND NOT APPLE)))\n-    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -faligned-new\")\n-  endif()\n+  #if ((APPLE AND (NOT (\"${CLANG_VERSION_STRING}\" VERSION_LESS \"9.0\")))\n+    #OR (CMAKE_COMPILER_IS_GNUCXX \n+    #AND (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 7.0 AND NOT APPLE)))\n+    #set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -faligned-new\") # This breaks nvcc using gcc-6\n+  #endif()\n   if ($ENV{WERROR})\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Werror\")\n   endif($ENV{WERROR})", "body": "This issue also occurs on Debian/unstable with CUDA 9.2 compiling with `gcc-7` (`7.3.0-26`) as the main compiler and `-DCUDA_HOST_COMPILER=/usr/bin/gcc-6` due to the flag `-faligned-new` not existing in `gcc-6` (`6.4.0-18`).\r\nCommenting out the appropriate lines in the main `CMakeLists.txt` allows compilation to proceed:\r\n```\r\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\r\nindex 1cb5d13bc..3ae2dcaa8 100644\r\n--- a/CMakeLists.txt\r\n+++ b/CMakeLists.txt\r\n@@ -229,11 +229,11 @@ if(NOT MSVC)\r\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-constexpr-not-const\")\r\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-missing-braces\")\r\n   endif()\r\n-  if ((APPLE AND (NOT (\"${CLANG_VERSION_STRING}\" VERSION_LESS \"9.0\")))\r\n-    OR (CMAKE_COMPILER_IS_GNUCXX \r\n-    AND (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 7.0 AND NOT APPLE)))\r\n-    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -faligned-new\")\r\n-  endif()\r\n+  #if ((APPLE AND (NOT (\"${CLANG_VERSION_STRING}\" VERSION_LESS \"9.0\")))\r\n+    #OR (CMAKE_COMPILER_IS_GNUCXX \r\n+    #AND (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 7.0 AND NOT APPLE)))\r\n+    #set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -faligned-new\") # This breaks nvcc using gcc-6\r\n+  #endif()\r\n   if ($ENV{WERROR})\r\n     set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Werror\")\r\n   endif($ENV{WERROR})\r\n```"}
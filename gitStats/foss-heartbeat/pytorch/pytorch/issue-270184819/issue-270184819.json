{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3415", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3415/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3415/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3415/events", "html_url": "https://github.com/pytorch/pytorch/issues/3415", "id": 270184819, "node_id": "MDU6SXNzdWUyNzAxODQ4MTk=", "number": 3415, "title": "`torch.utils.data.DataLoader`\u5e76\u884c\u5904\u7406h5\u6587\u4ef6\u65f6\u9519\u8bef,\u5355\u7ebf\u7a0b\u6b63\u5e38,\u5e76\u884c\u62a5\u9519.", "user": {"login": "flystarhe", "id": 5718508, "node_id": "MDQ6VXNlcjU3MTg1MDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/5718508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flystarhe", "html_url": "https://github.com/flystarhe", "followers_url": "https://api.github.com/users/flystarhe/followers", "following_url": "https://api.github.com/users/flystarhe/following{/other_user}", "gists_url": "https://api.github.com/users/flystarhe/gists{/gist_id}", "starred_url": "https://api.github.com/users/flystarhe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flystarhe/subscriptions", "organizations_url": "https://api.github.com/users/flystarhe/orgs", "repos_url": "https://api.github.com/users/flystarhe/repos", "events_url": "https://api.github.com/users/flystarhe/events{/privacy}", "received_events_url": "https://api.github.com/users/flystarhe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-11-01T03:42:24Z", "updated_at": "2018-07-02T11:20:03Z", "closed_at": "2017-11-01T11:18:27Z", "author_association": "NONE", "body_html": "<p><code>torch.utils.data.DataLoader</code>\u5e76\u884c\u5904\u7406h5\u6587\u4ef6\u65f6\u9519\u8bef,\u5355\u7ebf\u7a0b\u6b63\u5e38,\u5e76\u884c\u62a5\u9519.</p>\n<p>\u4ee3\u7801\u5982\u4e0b:</p>\n<pre><code>    print('==&gt; Loading datasets')\n    train_set = DatasetFromHdf5(opt.trainSet)\n    training_data_loader = DataLoader(dataset=train_set, num_workers=opt.threads, batch_size=opt.batchSize, shuffle=True)\n</code></pre>\n<p>\u9519\u8bef\u5982\u4e0b:</p>\n<pre><code>OSError: Traceback (most recent call last):\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/torch/utils/data/dataloader.py\", line 40, in _worker_loop\n    samples = collate_fn([dataset[i] for i in batch_indices])\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/torch/utils/data/dataloader.py\", line 40, in &lt;listcomp&gt;\n    samples = collate_fn([dataset[i] for i in batch_indices])\n  File \"/data2/slyx-sr/src/dataset.py\", line 14, in __getitem__\n    return torch.from_numpy(self.data[index,:,:,:]).float(), torch.from_numpy(self.target[index,:,:,:]).float()\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2846)\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2804)\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/h5py/_hl/dataset.py\", line 494, in __getitem__\n    self.id.read(mspace, fspace, arr, mtype, dxpl=self._dxpl)\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2846)\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2804)\n  File \"h5py/h5d.pyx\", line 181, in h5py.h5d.DatasetID.read (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/h5d.c:3413)\n  File \"h5py/_proxy.pyx\", line 130, in h5py._proxy.dset_rw (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_proxy.c:2008)\n  File \"h5py/_proxy.pyx\", line 84, in h5py._proxy.H5PY_H5Dread (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_proxy.c:1656)\nOSError: Can't read data (Wrong b-tree signature)\n</code></pre>", "body_text": "torch.utils.data.DataLoader\u5e76\u884c\u5904\u7406h5\u6587\u4ef6\u65f6\u9519\u8bef,\u5355\u7ebf\u7a0b\u6b63\u5e38,\u5e76\u884c\u62a5\u9519.\n\u4ee3\u7801\u5982\u4e0b:\n    print('==> Loading datasets')\n    train_set = DatasetFromHdf5(opt.trainSet)\n    training_data_loader = DataLoader(dataset=train_set, num_workers=opt.threads, batch_size=opt.batchSize, shuffle=True)\n\n\u9519\u8bef\u5982\u4e0b:\nOSError: Traceback (most recent call last):\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/torch/utils/data/dataloader.py\", line 40, in _worker_loop\n    samples = collate_fn([dataset[i] for i in batch_indices])\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/torch/utils/data/dataloader.py\", line 40, in <listcomp>\n    samples = collate_fn([dataset[i] for i in batch_indices])\n  File \"/data2/slyx-sr/src/dataset.py\", line 14, in __getitem__\n    return torch.from_numpy(self.data[index,:,:,:]).float(), torch.from_numpy(self.target[index,:,:,:]).float()\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2846)\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2804)\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/h5py/_hl/dataset.py\", line 494, in __getitem__\n    self.id.read(mspace, fspace, arr, mtype, dxpl=self._dxpl)\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2846)\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2804)\n  File \"h5py/h5d.pyx\", line 181, in h5py.h5d.DatasetID.read (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/h5d.c:3413)\n  File \"h5py/_proxy.pyx\", line 130, in h5py._proxy.dset_rw (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_proxy.c:2008)\n  File \"h5py/_proxy.pyx\", line 84, in h5py._proxy.H5PY_H5Dread (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_proxy.c:1656)\nOSError: Can't read data (Wrong b-tree signature)", "body": "`torch.utils.data.DataLoader`\u5e76\u884c\u5904\u7406h5\u6587\u4ef6\u65f6\u9519\u8bef,\u5355\u7ebf\u7a0b\u6b63\u5e38,\u5e76\u884c\u62a5\u9519.\r\n\r\n\u4ee3\u7801\u5982\u4e0b:\r\n```\r\n    print('==> Loading datasets')\r\n    train_set = DatasetFromHdf5(opt.trainSet)\r\n    training_data_loader = DataLoader(dataset=train_set, num_workers=opt.threads, batch_size=opt.batchSize, shuffle=True)\r\n```\r\n\r\n\u9519\u8bef\u5982\u4e0b:\r\n```\r\nOSError: Traceback (most recent call last):\r\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/torch/utils/data/dataloader.py\", line 40, in _worker_loop\r\n    samples = collate_fn([dataset[i] for i in batch_indices])\r\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/torch/utils/data/dataloader.py\", line 40, in <listcomp>\r\n    samples = collate_fn([dataset[i] for i in batch_indices])\r\n  File \"/data2/slyx-sr/src/dataset.py\", line 14, in __getitem__\r\n    return torch.from_numpy(self.data[index,:,:,:]).float(), torch.from_numpy(self.target[index,:,:,:]).float()\r\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2846)\r\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2804)\r\n  File \"/home/hejian/anaconda3/lib/python3.5/site-packages/h5py/_hl/dataset.py\", line 494, in __getitem__\r\n    self.id.read(mspace, fspace, arr, mtype, dxpl=self._dxpl)\r\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2846)\r\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_objects.c:2804)\r\n  File \"h5py/h5d.pyx\", line 181, in h5py.h5d.DatasetID.read (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/h5d.c:3413)\r\n  File \"h5py/_proxy.pyx\", line 130, in h5py._proxy.dset_rw (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_proxy.c:2008)\r\n  File \"h5py/_proxy.pyx\", line 84, in h5py._proxy.H5PY_H5Dread (/home/ilan/minonda/conda-bld/h5py_1496916508360/work/h5py/_proxy.c:1656)\r\nOSError: Can't read data (Wrong b-tree signature)\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5096", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5096/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5096/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5096/events", "html_url": "https://github.com/pytorch/pytorch/issues/5096", "id": 294984026, "node_id": "MDU6SXNzdWUyOTQ5ODQwMjY=", "number": 5096, "title": "[feature request]Add an env variable to cover different pathes when testing code with openmp", "user": {"login": "MlWoo", "id": 20226293, "node_id": "MDQ6VXNlcjIwMjI2Mjkz", "avatar_url": "https://avatars2.githubusercontent.com/u/20226293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MlWoo", "html_url": "https://github.com/MlWoo", "followers_url": "https://api.github.com/users/MlWoo/followers", "following_url": "https://api.github.com/users/MlWoo/following{/other_user}", "gists_url": "https://api.github.com/users/MlWoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/MlWoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MlWoo/subscriptions", "organizations_url": "https://api.github.com/users/MlWoo/orgs", "repos_url": "https://api.github.com/users/MlWoo/repos", "events_url": "https://api.github.com/users/MlWoo/events{/privacy}", "received_events_url": "https://api.github.com/users/MlWoo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-07T02:23:19Z", "updated_at": "2018-02-08T06:40:28Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>I have discussed with <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9110200\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fmassa\">@fmassa</a> about the problem before.  Refer to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"291045359\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/4824\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/4824/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/4824\">#4824</a>  and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"282299540\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/4188\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/4188/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/4188\">#4188</a>.<br>\nIn consideration of openmp overhead threshold, actually the code has 2 pathes need to be tested.  However, the size of tensor in test case are usually small in order to increase test speed. So the current code is potentially dangerous because the path with multi-thread maybe is never tested. It's necessary to add an env variable to control code paths.  I think we can start with TH and THNN modules which intensively use openmp. I hope that guys which are in charge of test case could also follow it once the env variable is ready.</p>", "body_text": "I have discussed with @fmassa about the problem before.  Refer to #4824  and #4188.\nIn consideration of openmp overhead threshold, actually the code has 2 pathes need to be tested.  However, the size of tensor in test case are usually small in order to increase test speed. So the current code is potentially dangerous because the path with multi-thread maybe is never tested. It's necessary to add an env variable to control code paths.  I think we can start with TH and THNN modules which intensively use openmp. I hope that guys which are in charge of test case could also follow it once the env variable is ready.", "body": " I have discussed with @fmassa about the problem before.  Refer to #4824  and #4188.\r\nIn consideration of openmp overhead threshold, actually the code has 2 pathes need to be tested.  However, the size of tensor in test case are usually small in order to increase test speed. So the current code is potentially dangerous because the path with multi-thread maybe is never tested. It's necessary to add an env variable to control code paths.  I think we can start with TH and THNN modules which intensively use openmp. I hope that guys which are in charge of test case could also follow it once the env variable is ready.\r\n\r\n"}
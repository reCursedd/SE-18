{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/399740479", "html_url": "https://github.com/pytorch/pytorch/issues/8781#issuecomment-399740479", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8781", "id": 399740479, "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTc0MDQ3OQ==", "user": {"login": "StatML", "id": 3596431, "node_id": "MDQ6VXNlcjM1OTY0MzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3596431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StatML", "html_url": "https://github.com/StatML", "followers_url": "https://api.github.com/users/StatML/followers", "following_url": "https://api.github.com/users/StatML/following{/other_user}", "gists_url": "https://api.github.com/users/StatML/gists{/gist_id}", "starred_url": "https://api.github.com/users/StatML/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StatML/subscriptions", "organizations_url": "https://api.github.com/users/StatML/orgs", "repos_url": "https://api.github.com/users/StatML/repos", "events_url": "https://api.github.com/users/StatML/events{/privacy}", "received_events_url": "https://api.github.com/users/StatML/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-24T08:55:22Z", "updated_at": "2018-06-24T08:55:22Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23639302\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vishwakftw\">@vishwakftw</a> I met the same issue. I had tried \"python setup.py clean &amp;&amp; export CUDA_NVCC_EXECUTABLE=$(which nvcc) &amp;&amp; python setup.py build develop\", but the results were the same. Can you help to fix this? Thanks a lot!</p>\n<p>PS: I am using Ubuntu 16.04, G++ 5.4, CUDA 9.2</p>\n<blockquote>\n<p>xxx@ccc:~/DevLib/PyTorch/pytorch$ sudo python2 setup.py install<br>\nrunning install<br>\nrunning build_deps</p>\n<ul>\n<li>USE_CUDA=0</li>\n<li>USE_ROCM=0</li>\n<li>USE_NNPACK=0</li>\n<li>USE_MKLDNN=0</li>\n<li>USE_GLOO_IBVERBS=0</li>\n<li>USE_DISTRIBUTED_MW=0</li>\n<li>FULL_CAFFE2=0</li>\n<li>[[ 9 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>USE_CUDA=1</li>\n<li>shift</li>\n<li>[[ 8 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>USE_NNPACK=1</li>\n<li>shift</li>\n<li>[[ 7 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>break</li>\n<li>CMAKE_INSTALL='make install'</li>\n<li>USER_CFLAGS=</li>\n<li>USER_LDFLAGS=</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]<br>\n++ dirname tools/build_pytorch_libs.sh</li>\n<li>cd tools/..<br>\n+++ pwd<br>\n++ printf '%q\\n' /home/xxx/DevLib/PyTorch/pytorch</li>\n<li>PWD=/home/xxx/DevLib/PyTorch/pytorch</li>\n<li>BASE_DIR=/home/xxx/DevLib/PyTorch/pytorch</li>\n<li>TORCH_LIB_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib</li>\n<li>INSTALL_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install</li>\n<li>THIRD_PARTY_DIR=/home/xxx/DevLib/PyTorch/pytorch/third_party</li>\n<li>CMAKE_VERSION=cmake</li>\n<li>C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\"'</li>\n<li>C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'</li>\n<li>LDFLAGS='-L\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/lib\" '</li>\n<li>LD_POSTFIX=.so<br>\n++ uname</li>\n<li>[[ Linux == \\D\\a\\r\\w\\i\\n ]]</li>\n<li>LDFLAGS='-L\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'</li>\n<li>CPP_FLAGS=' -std=c++11 '</li>\n<li>GLOO_FLAGS=</li>\n<li>THD_FLAGS=</li>\n<li>NCCL_ROOT_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install</li>\n<li>[[ 1 -eq 1 ]]</li>\n<li>GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install'</li>\n<li>[[ 0 -eq 1 ]]</li>\n<li>[[ 0 -eq 1 ]]</li>\n<li>CWRAP_FILES='/home/xxx/DevLib/PyTorch/pytorch/torch/lib/ATen/Declarations.cwrap;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/THNN/generic/THNN.h;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/ATen/nn.yaml'</li>\n<li>CUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'</li>\n<li>[[ -z '' ]]</li>\n<li>CUDA_DEVICE_DEBUG=0</li>\n<li>'[' -z 12 ']'</li>\n<li>BUILD_TYPE=Release</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]</li>\n<li>echo 'Building in Release mode'<br>\nBuilding in Release mode</li>\n<li>mkdir -p torch/lib/tmp_install</li>\n<li>for arg in '\"$@\"'</li>\n<li>[[ nccl == \\n\\c\\c\\l ]]</li>\n<li>pushd /home/xxx/DevLib/PyTorch/pytorch/third_party<br>\n~/DevLib/PyTorch/pytorch/third_party ~/DevLib/PyTorch/pytorch</li>\n<li>build_nccl</li>\n<li>path_remove /opt/cache/bin</li>\n<li>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin</li>\n<li>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin</li>\n<li>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin</li>\n<li>export CUDA_NVCC_EXECUTABLE_SAVED=</li>\n<li>CUDA_NVCC_EXECUTABLE_SAVED=<br>\n++ which nvcc</li>\n<li>export CUDA_NVCC_EXECUTABLE=</li>\n<li>CUDA_NVCC_EXECUTABLE=</li>\n<li>mkdir -p build/nccl</li>\n<li>pushd build/nccl<br>\n~/DevLib/PyTorch/pytorch/third_party/build/nccl ~/DevLib/PyTorch/pytorch/third_party ~/DevLib/PyTorch/pytorch</li>\n<li>cmake ../../nccl -DCMAKE_MODULE_PATH=/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/xxx/DevLib/PyTorch/pytorch/cmake/public/utils.cmake<br>\nCMake Error at /home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:137 (message):<br>\nCould NOT find CUDA (missing: CUDA_NVCC_EXECUTABLE) (Required is at least<br>\nversion \"7.0\")<br>\nCall Stack (most recent call first):<br>\n/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:378 (_FPHSA_FAILURE_MESSAGE)<br>\n/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1104 (find_package_handle_standard_args)<br>\n/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:11 (include)<br>\nCMakeLists.txt:5 (FIND_PACKAGE)</li>\n</ul>\n<p>-- Configuring incomplete, errors occurred!<br>\nSee also \"/home/xxx/DevLib/PyTorch/pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".<br>\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'</p>\n</blockquote>", "body_text": "Hi @vishwakftw I met the same issue. I had tried \"python setup.py clean && export CUDA_NVCC_EXECUTABLE=$(which nvcc) && python setup.py build develop\", but the results were the same. Can you help to fix this? Thanks a lot!\nPS: I am using Ubuntu 16.04, G++ 5.4, CUDA 9.2\n\nxxx@ccc:~/DevLib/PyTorch/pytorch$ sudo python2 setup.py install\nrunning install\nrunning build_deps\n\nUSE_CUDA=0\nUSE_ROCM=0\nUSE_NNPACK=0\nUSE_MKLDNN=0\nUSE_GLOO_IBVERBS=0\nUSE_DISTRIBUTED_MW=0\nFULL_CAFFE2=0\n[[ 9 -gt 0 ]]\ncase \"$1\" in\nUSE_CUDA=1\nshift\n[[ 8 -gt 0 ]]\ncase \"$1\" in\nUSE_NNPACK=1\nshift\n[[ 7 -gt 0 ]]\ncase \"$1\" in\nbreak\nCMAKE_INSTALL='make install'\nUSER_CFLAGS=\nUSER_LDFLAGS=\n[[ -n '' ]]\n[[ -n '' ]]\n[[ -n '' ]]\n++ dirname tools/build_pytorch_libs.sh\ncd tools/..\n+++ pwd\n++ printf '%q\\n' /home/xxx/DevLib/PyTorch/pytorch\nPWD=/home/xxx/DevLib/PyTorch/pytorch\nBASE_DIR=/home/xxx/DevLib/PyTorch/pytorch\nTORCH_LIB_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib\nINSTALL_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install\nTHIRD_PARTY_DIR=/home/xxx/DevLib/PyTorch/pytorch/third_party\nCMAKE_VERSION=cmake\nC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\"'\nC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\nLDFLAGS='-L\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/lib\" '\nLD_POSTFIX=.so\n++ uname\n[[ Linux == \\D\\a\\r\\w\\i\\n ]]\nLDFLAGS='-L\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\nCPP_FLAGS=' -std=c++11 '\nGLOO_FLAGS=\nTHD_FLAGS=\nNCCL_ROOT_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install\n[[ 1 -eq 1 ]]\nGLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install'\n[[ 0 -eq 1 ]]\n[[ 0 -eq 1 ]]\nCWRAP_FILES='/home/xxx/DevLib/PyTorch/pytorch/torch/lib/ATen/Declarations.cwrap;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/THNN/generic/THNN.h;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/ATen/nn.yaml'\nCUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n[[ -z '' ]]\nCUDA_DEVICE_DEBUG=0\n'[' -z 12 ']'\nBUILD_TYPE=Release\n[[ -n '' ]]\n[[ -n '' ]]\necho 'Building in Release mode'\nBuilding in Release mode\nmkdir -p torch/lib/tmp_install\nfor arg in '\"$@\"'\n[[ nccl == \\n\\c\\c\\l ]]\npushd /home/xxx/DevLib/PyTorch/pytorch/third_party\n~/DevLib/PyTorch/pytorch/third_party ~/DevLib/PyTorch/pytorch\nbuild_nccl\npath_remove /opt/cache/bin\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\nexport CUDA_NVCC_EXECUTABLE_SAVED=\nCUDA_NVCC_EXECUTABLE_SAVED=\n++ which nvcc\nexport CUDA_NVCC_EXECUTABLE=\nCUDA_NVCC_EXECUTABLE=\nmkdir -p build/nccl\npushd build/nccl\n~/DevLib/PyTorch/pytorch/third_party/build/nccl ~/DevLib/PyTorch/pytorch/third_party ~/DevLib/PyTorch/pytorch\ncmake ../../nccl -DCMAKE_MODULE_PATH=/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/xxx/DevLib/PyTorch/pytorch/cmake/public/utils.cmake\nCMake Error at /home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:137 (message):\nCould NOT find CUDA (missing: CUDA_NVCC_EXECUTABLE) (Required is at least\nversion \"7.0\")\nCall Stack (most recent call first):\n/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:378 (_FPHSA_FAILURE_MESSAGE)\n/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1104 (find_package_handle_standard_args)\n/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:11 (include)\nCMakeLists.txt:5 (FIND_PACKAGE)\n\n-- Configuring incomplete, errors occurred!\nSee also \"/home/xxx/DevLib/PyTorch/pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'", "body": "Hi @vishwakftw I met the same issue. I had tried \"python setup.py clean && export CUDA_NVCC_EXECUTABLE=$(which nvcc) && python setup.py build develop\", but the results were the same. Can you help to fix this? Thanks a lot!\r\n\r\nPS: I am using Ubuntu 16.04, G++ 5.4, CUDA 9.2\r\n\r\n> xxx@ccc:~/DevLib/PyTorch/pytorch$ sudo python2 setup.py install\r\n> running install\r\n> running build_deps\r\n> + USE_CUDA=0\r\n> + USE_ROCM=0\r\n> + USE_NNPACK=0\r\n> + USE_MKLDNN=0\r\n> + USE_GLOO_IBVERBS=0\r\n> + USE_DISTRIBUTED_MW=0\r\n> + FULL_CAFFE2=0\r\n> + [[ 9 -gt 0 ]]\r\n> + case \"$1\" in\r\n> + USE_CUDA=1\r\n> + shift\r\n> + [[ 8 -gt 0 ]]\r\n> + case \"$1\" in\r\n> + USE_NNPACK=1\r\n> + shift\r\n> + [[ 7 -gt 0 ]]\r\n> + case \"$1\" in\r\n> + break\r\n> + CMAKE_INSTALL='make install'\r\n> + USER_CFLAGS=\r\n> + USER_LDFLAGS=\r\n> + [[ -n '' ]]\r\n> + [[ -n '' ]]\r\n> + [[ -n '' ]]\r\n> ++ dirname tools/build_pytorch_libs.sh\r\n> + cd tools/..\r\n> +++ pwd\r\n> ++ printf '%q\\n' /home/xxx/DevLib/PyTorch/pytorch\r\n> + PWD=/home/xxx/DevLib/PyTorch/pytorch\r\n> + BASE_DIR=/home/xxx/DevLib/PyTorch/pytorch\r\n> + TORCH_LIB_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib\r\n> + INSTALL_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install\r\n> + THIRD_PARTY_DIR=/home/xxx/DevLib/PyTorch/pytorch/third_party\r\n> + CMAKE_VERSION=cmake\r\n> + C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\"'\r\n> + C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n> + LDFLAGS='-L\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/lib\" '\r\n> + LD_POSTFIX=.so\r\n> ++ uname\r\n> + [[ Linux == \\D\\a\\r\\w\\i\\n ]]\r\n> + LDFLAGS='-L\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\r\n> + CPP_FLAGS=' -std=c++11 '\r\n> + GLOO_FLAGS=\r\n> + THD_FLAGS=\r\n> + NCCL_ROOT_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install\r\n> + [[ 1 -eq 1 ]]\r\n> + GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install'\r\n> + [[ 0 -eq 1 ]]\r\n> + [[ 0 -eq 1 ]]\r\n> + CWRAP_FILES='/home/xxx/DevLib/PyTorch/pytorch/torch/lib/ATen/Declarations.cwrap;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/THNN/generic/THNN.h;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/xxx/DevLib/PyTorch/pytorch/torch/lib/ATen/nn.yaml'\r\n> + CUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n> + [[ -z '' ]]\r\n> + CUDA_DEVICE_DEBUG=0\r\n> + '[' -z 12 ']'\r\n> + BUILD_TYPE=Release\r\n> + [[ -n '' ]]\r\n> + [[ -n '' ]]\r\n> + echo 'Building in Release mode'\r\n> Building in Release mode\r\n> + mkdir -p torch/lib/tmp_install\r\n> + for arg in '\"$@\"'\r\n> + [[ nccl == \\n\\c\\c\\l ]]\r\n> + pushd /home/xxx/DevLib/PyTorch/pytorch/third_party\r\n> ~/DevLib/PyTorch/pytorch/third_party ~/DevLib/PyTorch/pytorch\r\n> + build_nccl\r\n> + path_remove /opt/cache/bin\r\n> + PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\r\n> + PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\r\n> + PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\r\n> + export CUDA_NVCC_EXECUTABLE_SAVED=\r\n> + CUDA_NVCC_EXECUTABLE_SAVED=\r\n> ++ which nvcc\r\n> + export CUDA_NVCC_EXECUTABLE=\r\n> + CUDA_NVCC_EXECUTABLE=\r\n> + mkdir -p build/nccl\r\n> + pushd build/nccl\r\n> ~/DevLib/PyTorch/pytorch/third_party/build/nccl ~/DevLib/PyTorch/pytorch/third_party ~/DevLib/PyTorch/pytorch\r\n> + cmake ../../nccl -DCMAKE_MODULE_PATH=/home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/xxx/DevLib/PyTorch/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/xxx/DevLib/PyTorch/pytorch/cmake/public/utils.cmake\r\n> CMake Error at /home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:137 (message):\r\n>   Could NOT find CUDA (missing: CUDA_NVCC_EXECUTABLE) (Required is at least\r\n>   version \"7.0\")\r\n> Call Stack (most recent call first):\r\n>   /home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:378 (_FPHSA_FAILURE_MESSAGE)\r\n>   /home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1104 (find_package_handle_standard_args)\r\n>   /home/xxx/DevLib/PyTorch/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:11 (include)\r\n>   CMakeLists.txt:5 (FIND_PACKAGE)\r\n> \r\n> \r\n> -- Configuring incomplete, errors occurred!\r\n> See also \"/home/xxx/DevLib/PyTorch/pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".\r\n> Failed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\r\n> "}
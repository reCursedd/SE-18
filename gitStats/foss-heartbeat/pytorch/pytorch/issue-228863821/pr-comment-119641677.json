{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/119641677", "pull_request_review_id": 41524200, "id": 119641677, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExOTY0MTY3Nw==", "diff_hunk": "@@ -0,0 +1,188 @@\n+#include \"torch/csrc/cuda/THCP.h\"", "path": "torch/csrc/cuda/expand_utils.cpp", "position": 1, "original_position": 1, "commit_id": "ca546930a8c9f31eab0a6fb79154ad4e985882e3", "original_commit_id": "6430b6e52ad0ee00a07d92a78e95be9fe9885472", "user": {"login": "gchanan", "id": 3768583, "node_id": "MDQ6VXNlcjM3Njg1ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3768583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gchanan", "html_url": "https://github.com/gchanan", "followers_url": "https://api.github.com/users/gchanan/followers", "following_url": "https://api.github.com/users/gchanan/following{/other_user}", "gists_url": "https://api.github.com/users/gchanan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gchanan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gchanan/subscriptions", "organizations_url": "https://api.github.com/users/gchanan/orgs", "repos_url": "https://api.github.com/users/gchanan/repos", "events_url": "https://api.github.com/users/gchanan/events{/privacy}", "received_events_url": "https://api.github.com/users/gchanan/received_events", "type": "User", "site_admin": false}, "body": "This is tricky, and I'll add a comment, although it's already done in a number of places in the code.  The functions in expand_utils.h/expand_utils-inl.h are defined in terms of the LIBRARY_STATE and related macros (because the copy functions are defined the same way).  So, there are actually two versions of each function (with and without THCState) and we avoid redefining the non-cuda ones by including THCP.h (that in terms defines the macros) and then including those files.", "created_at": "2017-06-01T15:10:16Z", "updated_at": "2018-11-23T15:33:35Z", "html_url": "https://github.com/pytorch/pytorch/pull/1563#discussion_r119641677", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/1563", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/119641677"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/1563#discussion_r119641677"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/1563"}}, "body_html": "<p>This is tricky, and I'll add a comment, although it's already done in a number of places in the code.  The functions in expand_utils.h/expand_utils-inl.h are defined in terms of the LIBRARY_STATE and related macros (because the copy functions are defined the same way).  So, there are actually two versions of each function (with and without THCState) and we avoid redefining the non-cuda ones by including THCP.h (that in terms defines the macros) and then including those files.</p>", "body_text": "This is tricky, and I'll add a comment, although it's already done in a number of places in the code.  The functions in expand_utils.h/expand_utils-inl.h are defined in terms of the LIBRARY_STATE and related macros (because the copy functions are defined the same way).  So, there are actually two versions of each function (with and without THCState) and we avoid redefining the non-cuda ones by including THCP.h (that in terms defines the macros) and then including those files.", "in_reply_to_id": 119615528}
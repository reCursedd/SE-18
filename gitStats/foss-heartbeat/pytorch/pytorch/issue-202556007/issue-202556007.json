{"url": "https://api.github.com/repos/pytorch/pytorch/issues/553", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/553/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/553/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/553/events", "html_url": "https://github.com/pytorch/pytorch/issues/553", "id": 202556007, "node_id": "MDU6SXNzdWUyMDI1NTYwMDc=", "number": 553, "title": "Compilation Failure Ubuntu 16.04, CUDA 7.5, CuDNN 5.1 running a Titan X (Pascal)", "user": {"login": "davidstutz", "id": 1203091, "node_id": "MDQ6VXNlcjEyMDMwOTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1203091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidstutz", "html_url": "https://github.com/davidstutz", "followers_url": "https://api.github.com/users/davidstutz/followers", "following_url": "https://api.github.com/users/davidstutz/following{/other_user}", "gists_url": "https://api.github.com/users/davidstutz/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidstutz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidstutz/subscriptions", "organizations_url": "https://api.github.com/users/davidstutz/orgs", "repos_url": "https://api.github.com/users/davidstutz/repos", "events_url": "https://api.github.com/users/davidstutz/events{/privacy}", "received_events_url": "https://api.github.com/users/davidstutz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-01-23T14:56:51Z", "updated_at": "2017-08-04T11:39:09Z", "closed_at": "2017-01-23T15:12:19Z", "author_association": "NONE", "body_html": "<p>I get the following when trying to install PyTorch on Ubuntu 16.04 running CUDA 7.5, CuDNN 5.1 with a Titan X (Pacal):</p>\n<pre><code>Install the project...\n-- Install configuration: \"Release\"\n-- Installing: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTHNN.so.1\n-- Installing: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTHNN.so\n-- The C compiler identification is GNU 5.4.0\n-- The CXX compiler identification is GNU 5.4.0\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- TH_LIBRARIES: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTH.so.1\n-- Found CUDA: /usr (found suitable version \"7.5\", minimum required is \"5.5\") \n-- Found gcc &gt;=5 and CUDA &lt;= 7.5, adding workaround C++ flags\n-- MAGMA not found. Compiling without MAGMA support\n-- Autodetected CUDA architecture(s): 6.1\n-- got cuda version 7.5\n-- Found CUDA with FP16 support, compiling with torch.CudaHalfTensor\n-- CUDA_NVCC_FLAGS:  -DTH_INDEX_BASE=0 -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include/TH -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include/THC;-gencode;arch=compute_61,code=sm_61;-DCUDA_HAS_FP16=1\n-- THC_SO_VERSION: 1\n-- Configuring done\n-- Generating done\nCMake Warning:\n  Manually-specified variables were not used by the project:\n\n    THCUNN_SO_VERSION\n    THC_LIBRARIES\n    THNN_SO_VERSION\n    THS_LIBRARIES\n    TH_SO_VERSION\n\n\n-- Build files have been written to: /is/ps2/dstutz/pytorch/torch/lib/build/THC\n[  1%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o\n[  2%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o\n[  5%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o\n[  5%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o\n[  7%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o\n[  8%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o\n[ 11%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o\n[ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o\n[ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o\n[ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o\n[ 15%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o\n[ 15%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCStorageCopy.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCStorageCopy.cu.o\n\n\nCMake Error at THC_generated_THCBlas.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCBlas.cu.o\n\n\nCMakeFiles/THC.dir/build.make:91: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nCMakeFiles/THC.dir/build.make:70: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCReduceApplyUtils.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCReduceApplyUtils.cu.o\n\nCMake Error at THC_generated_THCTensorMathBlas.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMathBlas.cu.o\n\n\n\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMakeFiles/THC.dir/build.make:126: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o] Error 1\nCMake Error at THC_generated_THCTensorMathMagma.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMathMagma.cu.o\n\n\nCMakeFiles/THC.dir/build.make:133: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o] Error 1\nCMakeFiles/THC.dir/build.make:63: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCTensor.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensor.cu.o\n\n\nCMakeFiles/THC.dir/build.make:98: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCSleep.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCSleep.cu.o\n\n\nCMakeFiles/THC.dir/build.make:77: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCTensorCopy.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorCopy.cu.o\n\n\nCMakeFiles/THC.dir/build.make:105: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCHalf.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCHalf.cu.o\n\n\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCTensorMath.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMath.cu.o\n\n\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCTensorMath2.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMath2.cu.o\n\n\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMakeFiles/THC.dir/build.make:546: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o] Error 1\nCMake Error at THC_generated_THCStorage.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCStorage.cu.o\n\n\nCMakeFiles/THC.dir/build.make:112: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o] Error 1\nCMakeFiles/THC.dir/build.make:119: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o] Error 1\nCMakeFiles/THC.dir/build.make:84: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/THC.dir/all' failed\nmake[1]: *** [CMakeFiles/THC.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n<p>So clearly, PyTorch seems to complain about the Titan X and compute capability 6.1. Is Pascal not supported? If not, I would appreciate any hints for workarounds to get it running.</p>\n<p>Some more background information:</p>\n<pre><code>$ nvidia-smi\nMon Jan 23 15:36:37 2017       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.57                 Driver Version: 367.57                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  TITAN X (Pascal)    Off  | 0000:03:00.0     Off |                  N/A |\n| 23%   32C    P8    14W / 250W |      1MiB / 12189MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  NVS 310             Off  | 0000:04:00.0     N/A |                  N/A |\n| 30%   44C    P0    N/A /  N/A |    598MiB /   963MiB |     N/A      Default |\n+-------------------------------+----------------------+----------------------+\n$ nvcc --version\nnvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2015 NVIDIA Corporation\nBuilt on Tue_Aug_11_14:27:32_CDT_2015\nCuda compilation tools, release 7.5, V7.5.17\n</code></pre>\n<p>I installed CUDA using</p>\n<pre><code>$ sudo apt-get install nvidia-367\n$ sudo apt-get install nvidia-cuda-dev nvidia-cuda-toolkit\n</code></pre>\n<p>(which installs CUDA to <code>/usr/local/cuda-8.0</code> although it seems to be CUDA 7.5). CuDNN was installed manually.</p>\n<p>Although it should not change anything, I tried the same with the master branch as well as v0.1.7.</p>\n<p>Thanks!</p>", "body_text": "I get the following when trying to install PyTorch on Ubuntu 16.04 running CUDA 7.5, CuDNN 5.1 with a Titan X (Pacal):\nInstall the project...\n-- Install configuration: \"Release\"\n-- Installing: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTHNN.so.1\n-- Installing: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTHNN.so\n-- The C compiler identification is GNU 5.4.0\n-- The CXX compiler identification is GNU 5.4.0\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- TH_LIBRARIES: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTH.so.1\n-- Found CUDA: /usr (found suitable version \"7.5\", minimum required is \"5.5\") \n-- Found gcc >=5 and CUDA <= 7.5, adding workaround C++ flags\n-- MAGMA not found. Compiling without MAGMA support\n-- Autodetected CUDA architecture(s): 6.1\n-- got cuda version 7.5\n-- Found CUDA with FP16 support, compiling with torch.CudaHalfTensor\n-- CUDA_NVCC_FLAGS:  -DTH_INDEX_BASE=0 -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include/TH -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include/THC;-gencode;arch=compute_61,code=sm_61;-DCUDA_HAS_FP16=1\n-- THC_SO_VERSION: 1\n-- Configuring done\n-- Generating done\nCMake Warning:\n  Manually-specified variables were not used by the project:\n\n    THCUNN_SO_VERSION\n    THC_LIBRARIES\n    THNN_SO_VERSION\n    THS_LIBRARIES\n    TH_SO_VERSION\n\n\n-- Build files have been written to: /is/ps2/dstutz/pytorch/torch/lib/build/THC\n[  1%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o\n[  2%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o\n[  5%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o\n[  5%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o\n[  7%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o\n[  8%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o\n[ 11%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o\n[ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o\n[ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o\n[ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o\n[ 15%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o\n[ 15%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCStorageCopy.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCStorageCopy.cu.o\n\n\nCMake Error at THC_generated_THCBlas.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCBlas.cu.o\n\n\nCMakeFiles/THC.dir/build.make:91: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nCMakeFiles/THC.dir/build.make:70: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCReduceApplyUtils.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCReduceApplyUtils.cu.o\n\nCMake Error at THC_generated_THCTensorMathBlas.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMathBlas.cu.o\n\n\n\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMakeFiles/THC.dir/build.make:126: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o] Error 1\nCMake Error at THC_generated_THCTensorMathMagma.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMathMagma.cu.o\n\n\nCMakeFiles/THC.dir/build.make:133: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o] Error 1\nCMakeFiles/THC.dir/build.make:63: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCTensor.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensor.cu.o\n\n\nCMakeFiles/THC.dir/build.make:98: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCSleep.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCSleep.cu.o\n\n\nCMakeFiles/THC.dir/build.make:77: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCTensorCopy.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorCopy.cu.o\n\n\nCMakeFiles/THC.dir/build.make:105: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o] Error 1\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCHalf.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCHalf.cu.o\n\n\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCTensorMath.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMath.cu.o\n\n\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMake Error at THC_generated_THCTensorMath2.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMath2.cu.o\n\n\nnvcc fatal   : Unsupported gpu architecture 'compute_61'\nCMakeFiles/THC.dir/build.make:546: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o] Error 1\nCMake Error at THC_generated_THCStorage.cu.o.cmake:207 (message):\n  Error generating\n  /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCStorage.cu.o\n\n\nCMakeFiles/THC.dir/build.make:112: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o] Error 1\nCMakeFiles/THC.dir/build.make:119: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o] Error 1\nCMakeFiles/THC.dir/build.make:84: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o' failed\nmake[2]: *** [CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/THC.dir/all' failed\nmake[1]: *** [CMakeFiles/THC.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\n\nSo clearly, PyTorch seems to complain about the Titan X and compute capability 6.1. Is Pascal not supported? If not, I would appreciate any hints for workarounds to get it running.\nSome more background information:\n$ nvidia-smi\nMon Jan 23 15:36:37 2017       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.57                 Driver Version: 367.57                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  TITAN X (Pascal)    Off  | 0000:03:00.0     Off |                  N/A |\n| 23%   32C    P8    14W / 250W |      1MiB / 12189MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  NVS 310             Off  | 0000:04:00.0     N/A |                  N/A |\n| 30%   44C    P0    N/A /  N/A |    598MiB /   963MiB |     N/A      Default |\n+-------------------------------+----------------------+----------------------+\n$ nvcc --version\nnvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2015 NVIDIA Corporation\nBuilt on Tue_Aug_11_14:27:32_CDT_2015\nCuda compilation tools, release 7.5, V7.5.17\n\nI installed CUDA using\n$ sudo apt-get install nvidia-367\n$ sudo apt-get install nvidia-cuda-dev nvidia-cuda-toolkit\n\n(which installs CUDA to /usr/local/cuda-8.0 although it seems to be CUDA 7.5). CuDNN was installed manually.\nAlthough it should not change anything, I tried the same with the master branch as well as v0.1.7.\nThanks!", "body": "I get the following when trying to install PyTorch on Ubuntu 16.04 running CUDA 7.5, CuDNN 5.1 with a Titan X (Pacal):\r\n\r\n    Install the project...\r\n    -- Install configuration: \"Release\"\r\n    -- Installing: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTHNN.so.1\r\n    -- Installing: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTHNN.so\r\n    -- The C compiler identification is GNU 5.4.0\r\n    -- The CXX compiler identification is GNU 5.4.0\r\n    -- Check for working C compiler: /usr/bin/cc\r\n    -- Check for working C compiler: /usr/bin/cc -- works\r\n    -- Detecting C compiler ABI info\r\n    -- Detecting C compiler ABI info - done\r\n    -- Detecting C compile features\r\n    -- Detecting C compile features - done\r\n    -- Check for working CXX compiler: /usr/bin/c++\r\n    -- Check for working CXX compiler: /usr/bin/c++ -- works\r\n    -- Detecting CXX compiler ABI info\r\n    -- Detecting CXX compiler ABI info - done\r\n    -- Detecting CXX compile features\r\n    -- Detecting CXX compile features - done\r\n    -- TH_LIBRARIES: /is/ps2/dstutz/pytorch/torch/lib/tmp_install/lib/libTH.so.1\r\n    -- Found CUDA: /usr (found suitable version \"7.5\", minimum required is \"5.5\") \r\n    -- Found gcc >=5 and CUDA <= 7.5, adding workaround C++ flags\r\n    -- MAGMA not found. Compiling without MAGMA support\r\n    -- Autodetected CUDA architecture(s): 6.1\r\n    -- got cuda version 7.5\r\n    -- Found CUDA with FP16 support, compiling with torch.CudaHalfTensor\r\n    -- CUDA_NVCC_FLAGS:  -DTH_INDEX_BASE=0 -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include/TH -I/is/ps2/dstutz/pytorch/torch/lib/tmp_install/include/THC;-gencode;arch=compute_61,code=sm_61;-DCUDA_HAS_FP16=1\r\n    -- THC_SO_VERSION: 1\r\n    -- Configuring done\r\n    -- Generating done\r\n    CMake Warning:\r\n      Manually-specified variables were not used by the project:\r\n\r\n        THCUNN_SO_VERSION\r\n        THC_LIBRARIES\r\n        THNN_SO_VERSION\r\n        THS_LIBRARIES\r\n        TH_SO_VERSION\r\n\r\n\r\n    -- Build files have been written to: /is/ps2/dstutz/pytorch/torch/lib/build/THC\r\n    [  1%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o\r\n    [  2%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o\r\n    [  5%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o\r\n    [  5%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o\r\n    [  7%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o\r\n    [  8%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o\r\n    [ 11%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o\r\n    [ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o\r\n    [ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o\r\n    [ 13%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o\r\n    [ 15%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o\r\n    [ 15%] Building NVCC (Device) object CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMake Error at THC_generated_THCStorageCopy.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCStorageCopy.cu.o\r\n\r\n\r\n    CMake Error at THC_generated_THCBlas.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCBlas.cu.o\r\n\r\n\r\n    CMakeFiles/THC.dir/build.make:91: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCStorageCopy.cu.o] Error 1\r\n    make[2]: *** Waiting for unfinished jobs....\r\n    CMakeFiles/THC.dir/build.make:70: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCBlas.cu.o] Error 1\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMake Error at THC_generated_THCReduceApplyUtils.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCReduceApplyUtils.cu.o\r\n\r\n    CMake Error at THC_generated_THCTensorMathBlas.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMathBlas.cu.o\r\n\r\n\r\n\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMakeFiles/THC.dir/build.make:126: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMathBlas.cu.o] Error 1\r\n    CMake Error at THC_generated_THCTensorMathMagma.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMathMagma.cu.o\r\n\r\n\r\n    CMakeFiles/THC.dir/build.make:133: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMathMagma.cu.o] Error 1\r\n    CMakeFiles/THC.dir/build.make:63: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCReduceApplyUtils.cu.o] Error 1\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMake Error at THC_generated_THCTensor.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensor.cu.o\r\n\r\n\r\n    CMakeFiles/THC.dir/build.make:98: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensor.cu.o] Error 1\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMake Error at THC_generated_THCSleep.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCSleep.cu.o\r\n\r\n\r\n    CMakeFiles/THC.dir/build.make:77: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCSleep.cu.o] Error 1\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMake Error at THC_generated_THCTensorCopy.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorCopy.cu.o\r\n\r\n\r\n    CMakeFiles/THC.dir/build.make:105: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorCopy.cu.o] Error 1\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMake Error at THC_generated_THCHalf.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCHalf.cu.o\r\n\r\n\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMake Error at THC_generated_THCTensorMath.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMath.cu.o\r\n\r\n\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMake Error at THC_generated_THCTensorMath2.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCTensorMath2.cu.o\r\n\r\n\r\n    nvcc fatal   : Unsupported gpu architecture 'compute_61'\r\n    CMakeFiles/THC.dir/build.make:546: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCHalf.cu.o] Error 1\r\n    CMake Error at THC_generated_THCStorage.cu.o.cmake:207 (message):\r\n      Error generating\r\n      /is/ps2/dstutz/pytorch/torch/lib/build/THC/CMakeFiles/THC.dir//./THC_generated_THCStorage.cu.o\r\n\r\n\r\n    CMakeFiles/THC.dir/build.make:112: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMath.cu.o] Error 1\r\n    CMakeFiles/THC.dir/build.make:119: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCTensorMath2.cu.o] Error 1\r\n    CMakeFiles/THC.dir/build.make:84: recipe for target 'CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o' failed\r\n    make[2]: *** [CMakeFiles/THC.dir/THC_generated_THCStorage.cu.o] Error 1\r\n    CMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/THC.dir/all' failed\r\n    make[1]: *** [CMakeFiles/THC.dir/all] Error 2\r\n    Makefile:127: recipe for target 'all' failed\r\n    make: *** [all] Error 2\r\n\r\nSo clearly, PyTorch seems to complain about the Titan X and compute capability 6.1. Is Pascal not supported? If not, I would appreciate any hints for workarounds to get it running.\r\n\r\nSome more background information:\r\n\r\n    $ nvidia-smi\r\n    Mon Jan 23 15:36:37 2017       \r\n    +-----------------------------------------------------------------------------+\r\n    | NVIDIA-SMI 367.57                 Driver Version: 367.57                    |\r\n    |-------------------------------+----------------------+----------------------+\r\n    | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n    | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n    |===============================+======================+======================|\r\n    |   0  TITAN X (Pascal)    Off  | 0000:03:00.0     Off |                  N/A |\r\n    | 23%   32C    P8    14W / 250W |      1MiB / 12189MiB |      0%      Default |\r\n    +-------------------------------+----------------------+----------------------+\r\n    |   1  NVS 310             Off  | 0000:04:00.0     N/A |                  N/A |\r\n    | 30%   44C    P0    N/A /  N/A |    598MiB /   963MiB |     N/A      Default |\r\n    +-------------------------------+----------------------+----------------------+\r\n    $ nvcc --version\r\n    nvcc: NVIDIA (R) Cuda compiler driver\r\n    Copyright (c) 2005-2015 NVIDIA Corporation\r\n    Built on Tue_Aug_11_14:27:32_CDT_2015\r\n    Cuda compilation tools, release 7.5, V7.5.17\r\n\r\nI installed CUDA using\r\n\r\n    $ sudo apt-get install nvidia-367\r\n    $ sudo apt-get install nvidia-cuda-dev nvidia-cuda-toolkit\r\n\r\n(which installs CUDA to `/usr/local/cuda-8.0` although it seems to be CUDA 7.5). CuDNN was installed manually.\r\n\r\nAlthough it should not change anything, I tried the same with the master branch as well as v0.1.7.\r\n\r\nThanks!"}
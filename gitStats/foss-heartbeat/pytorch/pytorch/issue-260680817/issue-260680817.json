{"url": "https://api.github.com/repos/pytorch/pytorch/issues/2870", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/2870/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/2870/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/2870/events", "html_url": "https://github.com/pytorch/pytorch/issues/2870", "id": 260680817, "node_id": "MDU6SXNzdWUyNjA2ODA4MTc=", "number": 2870, "title": "torch.max has extra dimensions on a slice with size 1", "user": {"login": "lopuhin", "id": 424613, "node_id": "MDQ6VXNlcjQyNDYxMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/424613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lopuhin", "html_url": "https://github.com/lopuhin", "followers_url": "https://api.github.com/users/lopuhin/followers", "following_url": "https://api.github.com/users/lopuhin/following{/other_user}", "gists_url": "https://api.github.com/users/lopuhin/gists{/gist_id}", "starred_url": "https://api.github.com/users/lopuhin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lopuhin/subscriptions", "organizations_url": "https://api.github.com/users/lopuhin/orgs", "repos_url": "https://api.github.com/users/lopuhin/repos", "events_url": "https://api.github.com/users/lopuhin/events{/privacy}", "received_events_url": "https://api.github.com/users/lopuhin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-26T16:03:42Z", "updated_at": "2017-09-26T17:07:48Z", "closed_at": "2017-09-26T17:07:47Z", "author_association": "CONTRIBUTOR", "body_html": "<pre><code>&gt;&gt;&gt; x = torch.zeros((32, 10, 10))\n&gt;&gt;&gt; y = x[:, 2:4, 3:5]\n&gt;&gt;&gt; torch.max(y, dim=1, keepdim=False)[0].size()\ntorch.Size([32, 2])   # correct\n&gt;&gt;&gt; y = x[:, 2:3, 3:4]\n&gt;&gt;&gt; torch.max(y, dim=1, keepdim=False)[0].size()\ntorch.Size([32, 1, 1])  # wrong\n</code></pre>\n<p>The size reported at the end should be <code>(32, 1)</code>, but is <code>(32, 1, 1)</code>. Using <code>torch==0.2.0.post3</code> both on CPU and GPU.</p>", "body_text": ">>> x = torch.zeros((32, 10, 10))\n>>> y = x[:, 2:4, 3:5]\n>>> torch.max(y, dim=1, keepdim=False)[0].size()\ntorch.Size([32, 2])   # correct\n>>> y = x[:, 2:3, 3:4]\n>>> torch.max(y, dim=1, keepdim=False)[0].size()\ntorch.Size([32, 1, 1])  # wrong\n\nThe size reported at the end should be (32, 1), but is (32, 1, 1). Using torch==0.2.0.post3 both on CPU and GPU.", "body": "```\r\n>>> x = torch.zeros((32, 10, 10))\r\n>>> y = x[:, 2:4, 3:5]\r\n>>> torch.max(y, dim=1, keepdim=False)[0].size()\r\ntorch.Size([32, 2])   # correct\r\n>>> y = x[:, 2:3, 3:4]\r\n>>> torch.max(y, dim=1, keepdim=False)[0].size()\r\ntorch.Size([32, 1, 1])  # wrong\r\n```\r\nThe size reported at the end should be ``(32, 1)``, but is ``(32, 1, 1)``. Using ``torch==0.2.0.post3`` both on CPU and GPU."}
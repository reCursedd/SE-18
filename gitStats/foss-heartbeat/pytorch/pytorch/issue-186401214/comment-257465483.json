{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/257465483", "html_url": "https://github.com/pytorch/pytorch/issues/187#issuecomment-257465483", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/187", "id": 257465483, "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzQ2NTQ4Mw==", "user": {"login": "ngimel", "id": 15841449, "node_id": "MDQ6VXNlcjE1ODQxNDQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/15841449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ngimel", "html_url": "https://github.com/ngimel", "followers_url": "https://api.github.com/users/ngimel/followers", "following_url": "https://api.github.com/users/ngimel/following{/other_user}", "gists_url": "https://api.github.com/users/ngimel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ngimel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ngimel/subscriptions", "organizations_url": "https://api.github.com/users/ngimel/orgs", "repos_url": "https://api.github.com/users/ngimel/repos", "events_url": "https://api.github.com/users/ngimel/events{/privacy}", "received_events_url": "https://api.github.com/users/ngimel/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-01T01:05:52Z", "updated_at": "2016-11-01T01:05:52Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Generally, one should not initialize cuda context before forking. See, e.g., simpleIPC cuda sample, where the number of devices can not be determined in the main process (because it would require initializing the context), thus a child process is forked, it gets the number of devices and exits, then the necessary number of child processes are forked, and only then cuda context is (implicitly) initialized. It is an inconvenience, but don't think there's a way around it.</p>", "body_text": "Generally, one should not initialize cuda context before forking. See, e.g., simpleIPC cuda sample, where the number of devices can not be determined in the main process (because it would require initializing the context), thus a child process is forked, it gets the number of devices and exits, then the necessary number of child processes are forked, and only then cuda context is (implicitly) initialized. It is an inconvenience, but don't think there's a way around it.", "body": "Generally, one should not initialize cuda context before forking. See, e.g., simpleIPC cuda sample, where the number of devices can not be determined in the main process (because it would require initializing the context), thus a child process is forked, it gets the number of devices and exits, then the necessary number of child processes are forked, and only then cuda context is (implicitly) initialized. It is an inconvenience, but don't think there's a way around it. \n"}
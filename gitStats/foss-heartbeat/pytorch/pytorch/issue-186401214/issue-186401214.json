{"url": "https://api.github.com/repos/pytorch/pytorch/issues/187", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/187/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/187/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/187/events", "html_url": "https://github.com/pytorch/pytorch/issues/187", "id": 186401214, "node_id": "MDU6SXNzdWUxODY0MDEyMTQ=", "number": 187, "title": "CUDA contexts across forks", "user": {"login": "colesbury", "id": 655866, "node_id": "MDQ6VXNlcjY1NTg2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/655866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colesbury", "html_url": "https://github.com/colesbury", "followers_url": "https://api.github.com/users/colesbury/followers", "following_url": "https://api.github.com/users/colesbury/following{/other_user}", "gists_url": "https://api.github.com/users/colesbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/colesbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colesbury/subscriptions", "organizations_url": "https://api.github.com/users/colesbury/orgs", "repos_url": "https://api.github.com/users/colesbury/repos", "events_url": "https://api.github.com/users/colesbury/events{/privacy}", "received_events_url": "https://api.github.com/users/colesbury/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443484050, "node_id": "MDU6TGFiZWw0NDM0ODQwNTA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/medium%20priority", "name": "medium priority", "color": "fbca04", "default": false}, {"id": 466131885, "node_id": "MDU6TGFiZWw0NjYxMzE4ODU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/needs%20discussion", "name": "needs discussion", "color": "cc317c", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-31T21:23:05Z", "updated_at": "2016-11-07T23:15:52Z", "closed_at": "2016-11-07T23:15:52Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15841449\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ngimel\">@ngimel</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3503919\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/thatguymike\">@thatguymike</a></p>\n<p>I'm trying to get CUDA to work with Python multiprocessing. One of the issues is that since Python calls <code>fork()</code> but not <code>exec()</code>, the CUDA context from the parent is inherited by the subprocess. I've added a call to <code>cuInit(0)</code> in the child (and discard the <code>THCState*</code>) which prevents the most obvious errors, but I'm still seeing some strange ordering issues.</p>\n<p>What's the correct way to handle CUDA contexts across forks?</p>", "body_text": "@ngimel, @thatguymike\nI'm trying to get CUDA to work with Python multiprocessing. One of the issues is that since Python calls fork() but not exec(), the CUDA context from the parent is inherited by the subprocess. I've added a call to cuInit(0) in the child (and discard the THCState*) which prevents the most obvious errors, but I'm still seeing some strange ordering issues.\nWhat's the correct way to handle CUDA contexts across forks?", "body": "@ngimel, @thatguymike \r\n\r\nI'm trying to get CUDA to work with Python multiprocessing. One of the issues is that since Python calls `fork()` but not `exec()`, the CUDA context from the parent is inherited by the subprocess. I've added a call to `cuInit(0)` in the child (and discard the `THCState*`) which prevents the most obvious errors, but I'm still seeing some strange ordering issues.\r\n\r\nWhat's the correct way to handle CUDA contexts across forks?"}
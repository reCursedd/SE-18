{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/429476654", "html_url": "https://github.com/pytorch/pytorch/issues/12489#issuecomment-429476654", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12489", "id": 429476654, "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTQ3NjY1NA==", "user": {"login": "colesbury", "id": 655866, "node_id": "MDQ6VXNlcjY1NTg2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/655866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colesbury", "html_url": "https://github.com/colesbury", "followers_url": "https://api.github.com/users/colesbury/followers", "following_url": "https://api.github.com/users/colesbury/following{/other_user}", "gists_url": "https://api.github.com/users/colesbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/colesbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colesbury/subscriptions", "organizations_url": "https://api.github.com/users/colesbury/orgs", "repos_url": "https://api.github.com/users/colesbury/repos", "events_url": "https://api.github.com/users/colesbury/events{/privacy}", "received_events_url": "https://api.github.com/users/colesbury/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-12T22:10:12Z", "updated_at": "2018-10-12T22:10:12Z", "author_association": "MEMBER", "body_html": "<p>My gut reaction is that I don't like the idea of disabling the shape checks, because it breaks composition. The two functions will only work together, not with other autograd functions that obey standard behavior.</p>\n<p>Can you combine the two functions? For example, the combined function could do sampling and call embedding(x) in the forward pass and compute embedding_backward, and the straight-through estimation in the backward pass. Would this work? There may be some challenges in the implementation, because I'm not sure we expose embedding_backward to Python.</p>", "body_text": "My gut reaction is that I don't like the idea of disabling the shape checks, because it breaks composition. The two functions will only work together, not with other autograd functions that obey standard behavior.\nCan you combine the two functions? For example, the combined function could do sampling and call embedding(x) in the forward pass and compute embedding_backward, and the straight-through estimation in the backward pass. Would this work? There may be some challenges in the implementation, because I'm not sure we expose embedding_backward to Python.", "body": "My gut reaction is that I don't like the idea of disabling the shape checks, because it breaks composition. The two functions will only work together, not with other autograd functions that obey standard behavior.\r\n\r\nCan you combine the two functions? For example, the combined function could do sampling and call embedding(x) in the forward pass and compute embedding_backward, and the straight-through estimation in the backward pass. Would this work? There may be some challenges in the implementation, because I'm not sure we expose embedding_backward to Python."}
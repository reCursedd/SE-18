{"url": "https://api.github.com/repos/pytorch/pytorch/issues/2613", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/2613/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/2613/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/2613/events", "html_url": "https://github.com/pytorch/pytorch/issues/2613", "id": 255052528, "node_id": "MDU6SXNzdWUyNTUwNTI1Mjg=", "number": 2613, "title": "model.updateParameters(lr) in torch/legacy/nn not working", "user": {"login": "iacolippo", "id": 11921406, "node_id": "MDQ6VXNlcjExOTIxNDA2", "avatar_url": "https://avatars2.githubusercontent.com/u/11921406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iacolippo", "html_url": "https://github.com/iacolippo", "followers_url": "https://api.github.com/users/iacolippo/followers", "following_url": "https://api.github.com/users/iacolippo/following{/other_user}", "gists_url": "https://api.github.com/users/iacolippo/gists{/gist_id}", "starred_url": "https://api.github.com/users/iacolippo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iacolippo/subscriptions", "organizations_url": "https://api.github.com/users/iacolippo/orgs", "repos_url": "https://api.github.com/users/iacolippo/repos", "events_url": "https://api.github.com/users/iacolippo/events{/privacy}", "received_events_url": "https://api.github.com/users/iacolippo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-04T14:06:49Z", "updated_at": "2017-09-05T14:16:51Z", "closed_at": "2017-09-05T14:16:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I implemented a model using <code>torch.legacy</code> because I have to do particular things and I'm starting from a PyTorch implementation. I think this method may be broken.</p>\n<p>If I run this code:<br>\n<a href=\"https://gist.github.com/iacolippo/df46eebd6d7ea20402e87229e7258a7a\">https://gist.github.com/iacolippo/df46eebd6d7ea20402e87229e7258a7a</a></p>\n<p>I get this error:</p>\n<pre><code>Traceback (most recent call last):\n  File \"reproducing_bug.py\", line 52, in &lt;module&gt;\n    model.updateParameters(1)\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 32, in updateParameters\n    self.applyToModules(lambda m: m.updateParameters(learningRate))\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 26, in applyToModules\n    func(module)\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 32, in &lt;lambda&gt;\n    self.applyToModules(lambda m: m.updateParameters(learningRate))\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Module.py\", line 79, in updateParameters\n    params, gradParams = self.parameters()\nTypeError: 'NoneType' object is not iterable\n</code></pre>\n<p>This happens whenever the Sequential model has layers without parameters. Removing ReLUs and LogSoftMax solves the problem.</p>\n<p>I think this happens because <code>self.parameters()</code> returns <code>None</code> for <code>Module</code>s which don't have parameters and <code>params, gradParams = None</code> raises the error. I tried this both on Python2.7 and Python 3.5 and it's the same.</p>", "body_text": "I implemented a model using torch.legacy because I have to do particular things and I'm starting from a PyTorch implementation. I think this method may be broken.\nIf I run this code:\nhttps://gist.github.com/iacolippo/df46eebd6d7ea20402e87229e7258a7a\nI get this error:\nTraceback (most recent call last):\n  File \"reproducing_bug.py\", line 52, in <module>\n    model.updateParameters(1)\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 32, in updateParameters\n    self.applyToModules(lambda m: m.updateParameters(learningRate))\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 26, in applyToModules\n    func(module)\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 32, in <lambda>\n    self.applyToModules(lambda m: m.updateParameters(learningRate))\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Module.py\", line 79, in updateParameters\n    params, gradParams = self.parameters()\nTypeError: 'NoneType' object is not iterable\n\nThis happens whenever the Sequential model has layers without parameters. Removing ReLUs and LogSoftMax solves the problem.\nI think this happens because self.parameters() returns None for Modules which don't have parameters and params, gradParams = None raises the error. I tried this both on Python2.7 and Python 3.5 and it's the same.", "body": "I implemented a model using `torch.legacy` because I have to do particular things and I'm starting from a PyTorch implementation. I think this method may be broken.\r\n\r\nIf I run this code:\r\nhttps://gist.github.com/iacolippo/df46eebd6d7ea20402e87229e7258a7a\r\n\r\nI get this error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"reproducing_bug.py\", line 52, in <module>\r\n    model.updateParameters(1)\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 32, in updateParameters\r\n    self.applyToModules(lambda m: m.updateParameters(learningRate))\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 26, in applyToModules\r\n    func(module)\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Container.py\", line 32, in <lambda>\r\n    self.applyToModules(lambda m: m.updateParameters(learningRate))\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/legacy/nn/Module.py\", line 79, in updateParameters\r\n    params, gradParams = self.parameters()\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\n\r\nThis happens whenever the Sequential model has layers without parameters. Removing ReLUs and LogSoftMax solves the problem.\r\n\r\nI think this happens because `self.parameters()` returns `None` for `Module`s which don't have parameters and `params, gradParams = None` raises the error. I tried this both on Python2.7 and Python 3.5 and it's the same."}
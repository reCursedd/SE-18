{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12650", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12650/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12650/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12650/events", "html_url": "https://github.com/pytorch/pytorch/issues/12650", "id": 370168248, "node_id": "MDU6SXNzdWUzNzAxNjgyNDg=", "number": 12650, "title": "pytorch/torch/utils/cpp_extension.py ignores compiler setting, ", "user": {"login": "midjji", "id": 5442597, "node_id": "MDQ6VXNlcjU0NDI1OTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5442597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/midjji", "html_url": "https://github.com/midjji", "followers_url": "https://api.github.com/users/midjji/followers", "following_url": "https://api.github.com/users/midjji/following{/other_user}", "gists_url": "https://api.github.com/users/midjji/gists{/gist_id}", "starred_url": "https://api.github.com/users/midjji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/midjji/subscriptions", "organizations_url": "https://api.github.com/users/midjji/orgs", "repos_url": "https://api.github.com/users/midjji/repos", "events_url": "https://api.github.com/users/midjji/events{/privacy}", "received_events_url": "https://api.github.com/users/midjji/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 884152160, "node_id": "MDU6TGFiZWw4ODQxNTIxNjA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/cpp-extensions", "name": "cpp-extensions", "color": "1c689e", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-15T13:39:31Z", "updated_at": "2018-10-29T17:53:32Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>Every way of setting the compiler is ignored by the buildextension script</p>\n<p>eg. CC=gcc-6 CXX=g++-6 python setup.py,<br>\nwill use /usr/bin/gcc not /usr/bin/gcc-6.</p>\n<p>example code:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> os\n<span class=\"pl-k\">from</span> setuptools <span class=\"pl-k\">import</span> setup\n<span class=\"pl-k\">from</span> torch.utils.cpp_extension <span class=\"pl-k\">import</span> BuildExtension, CUDAExtension\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> it will just ignore everything... </span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>os.environ[\"CC\"] = \"/usr/bin/gcc-6\"</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>os.environ[\"CXX\"] = \"/usr/bin/g++-6\"</span>\nsetup(\n    <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>andreas<span class=\"pl-pds\">'</span></span>,\n    <span class=\"pl-v\">ext_modules</span><span class=\"pl-k\">=</span>[\n        CUDAExtension(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>example<span class=\"pl-pds\">'</span></span>, [<span class=\"pl-s\"><span class=\"pl-pds\">'</span>example.cu<span class=\"pl-pds\">'</span></span>,\n            <span class=\"pl-s\"><span class=\"pl-pds\">'</span>example.cpp<span class=\"pl-pds\">'</span></span>],\n)\n    ],\n    <span class=\"pl-v\">cmdclass</span><span class=\"pl-k\">=</span>{\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span>build_ext<span class=\"pl-pds\">'</span></span>: BuildExtension\n    },\n\t)</pre></div>\n<p>Pytorch version 4.1</p>", "body_text": "Every way of setting the compiler is ignored by the buildextension script\neg. CC=gcc-6 CXX=g++-6 python setup.py,\nwill use /usr/bin/gcc not /usr/bin/gcc-6.\nexample code:\nimport os\nfrom setuptools import setup\nfrom torch.utils.cpp_extension import BuildExtension, CUDAExtension\n\n# it will just ignore everything... \n#os.environ[\"CC\"] = \"/usr/bin/gcc-6\"\n#os.environ[\"CXX\"] = \"/usr/bin/g++-6\"\nsetup(\n    name='andreas',\n    ext_modules=[\n        CUDAExtension('example', ['example.cu',\n            'example.cpp'],\n)\n    ],\n    cmdclass={\n        'build_ext': BuildExtension\n    },\n\t)\nPytorch version 4.1", "body": "Every way of setting the compiler is ignored by the buildextension script \r\n\r\neg. CC=gcc-6 CXX=g++-6 python setup.py, \r\nwill use /usr/bin/gcc not /usr/bin/gcc-6. \r\n\r\n\r\nexample code:\r\n\r\n```python\r\nimport os\r\nfrom setuptools import setup\r\nfrom torch.utils.cpp_extension import BuildExtension, CUDAExtension\r\n\r\n# it will just ignore everything... \r\n#os.environ[\"CC\"] = \"/usr/bin/gcc-6\"\r\n#os.environ[\"CXX\"] = \"/usr/bin/g++-6\"\r\nsetup(\r\n    name='andreas',\r\n    ext_modules=[\r\n        CUDAExtension('example', ['example.cu',\r\n            'example.cpp'],\r\n)\r\n    ],\r\n    cmdclass={\r\n        'build_ext': BuildExtension\r\n    },\r\n\t)\r\n```\r\n\r\nPytorch version 4.1 \r\n"}
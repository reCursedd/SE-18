{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/285803479", "html_url": "https://github.com/pytorch/pytorch/issues/947#issuecomment-285803479", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/947", "id": 285803479, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTgwMzQ3OQ==", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-10T22:33:05Z", "updated_at": "2017-03-10T22:33:05Z", "author_association": "MEMBER", "body_html": "<p>So you mean to remove <code>THTensor</code>, etc.? Wouldn't it be simpler to just implement some kind of a trait struct?</p>\n<div class=\"highlight highlight-source-c++\"><pre><span class=\"pl-k\">template</span>&lt;<span class=\"pl-k\">typename</span> real, thd::Device device, thd::Kind kind&gt;\n<span class=\"pl-k\">struct</span> <span class=\"pl-en\">tensor_traits</span> {};\n\n<span class=\"pl-k\">template</span>&lt;&gt;\n<span class=\"pl-k\">struct</span> <span class=\"pl-en\">tensor_traits</span>&lt;<span class=\"pl-k\">float</span>, thd::Device::GPU, thd::Kind::Dense&gt; {\n    <span class=\"pl-k\">using</span> tensor_type = THCTensor&lt;<span class=\"pl-k\">float</span>&gt;;\n}<span class=\"pl-ii\"></span></pre></div>\n<p>In your code you could do this then:</p>\n<div class=\"highlight highlight-source-c++\"><pre><span class=\"pl-k\">template </span>&lt;<span class=\"pl-k\">typename</span> T&gt;\n<span class=\"pl-k\">using</span> MyTensor = tensor_traits&lt;T, thd::Device::CPU, thd::Kind::Dense&gt;;</pre></div>", "body_text": "So you mean to remove THTensor, etc.? Wouldn't it be simpler to just implement some kind of a trait struct?\ntemplate<typename real, thd::Device device, thd::Kind kind>\nstruct tensor_traits {};\n\ntemplate<>\nstruct tensor_traits<float, thd::Device::GPU, thd::Kind::Dense> {\n    using tensor_type = THCTensor<float>;\n}\nIn your code you could do this then:\ntemplate <typename T>\nusing MyTensor = tensor_traits<T, thd::Device::CPU, thd::Kind::Dense>;", "body": "So you mean to remove `THTensor`, etc.? Wouldn't it be simpler to just implement some kind of a trait struct?\r\n```cpp\r\ntemplate<typename real, thd::Device device, thd::Kind kind>\r\nstruct tensor_traits {};\r\n\r\ntemplate<>\r\nstruct tensor_traits<float, thd::Device::GPU, thd::Kind::Dense> {\r\n    using tensor_type = THCTensor<float>;\r\n}\r\n```\r\n\r\nIn your code you could do this then:\r\n\r\n```cpp\r\ntemplate <typename T>\r\nusing MyTensor = tensor_traits<T, thd::Device::CPU, thd::Kind::Dense>;\r\n```"}
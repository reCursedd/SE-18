{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/144673836", "pull_request_review_id": 69369984, "id": 144673836, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDY3MzgzNg==", "diff_hunk": "@@ -1075,6 +1075,17 @@ def test_AvgPool3d_backward_after_cat_dim1_cuda(self):\n \n         y.backward(grad)\n \n+    @unittest.skipIf(not TEST_CUDA, \"CUDA unavailable\")\n+    def test_conv_transpose2d_contig_wrong_stride_dim1_cuda(self):\n+        # x has to have batch_size 1 to test contiguous checks\n+        x = torch.randn(1, 16, 5, 5).cuda()\n+        stride = list(x.stride())\n+        stride[0] = 20\n+        # change the stride in dimension 0. the tensor is still contiguous because size[0] is 1\n+        x.set_(x.storage(), 0, x.size(), stride)\n+        assert x.is_contiguous()\n+        F.conv_transpose2d(Variable(x), Variable(torch.randn(16, 1, 1, 1)).cuda())", "path": "test/test_nn.py", "position": null, "original_position": 13, "commit_id": "999cd36b2f801b8b45a0d4ca50dd12aa09adf03d", "original_commit_id": "693aeec73af768f731a5a4ce03bde6308c7f0319", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "Do we really need to run Conv2d for this test? Maybe just add one for contiguous() and ensure that it fixes the strides. It\u2019s much simpler, faster and better describes the problem. Please move it to test_torch.py", "created_at": "2017-10-13T23:09:52Z", "updated_at": "2018-11-23T15:35:16Z", "html_url": "https://github.com/pytorch/pytorch/pull/3091#discussion_r144673836", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/3091", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/144673836"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/3091#discussion_r144673836"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/3091"}}, "body_html": "<p>Do we really need to run Conv2d for this test? Maybe just add one for contiguous() and ensure that it fixes the strides. It\u2019s much simpler, faster and better describes the problem. Please move it to test_torch.py</p>", "body_text": "Do we really need to run Conv2d for this test? Maybe just add one for contiguous() and ensure that it fixes the strides. It\u2019s much simpler, faster and better describes the problem. Please move it to test_torch.py"}
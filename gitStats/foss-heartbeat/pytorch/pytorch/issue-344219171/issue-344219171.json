{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9791", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9791/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9791/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9791/events", "html_url": "https://github.com/pytorch/pytorch/issues/9791", "id": 344219171, "node_id": "MDU6SXNzdWUzNDQyMTkxNzE=", "number": 9791, "title": "Problem building pytorch under Windows", "user": {"login": "ZmeiGorynych", "id": 22304254, "node_id": "MDQ6VXNlcjIyMzA0MjU0", "avatar_url": "https://avatars1.githubusercontent.com/u/22304254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZmeiGorynych", "html_url": "https://github.com/ZmeiGorynych", "followers_url": "https://api.github.com/users/ZmeiGorynych/followers", "following_url": "https://api.github.com/users/ZmeiGorynych/following{/other_user}", "gists_url": "https://api.github.com/users/ZmeiGorynych/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZmeiGorynych/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZmeiGorynych/subscriptions", "organizations_url": "https://api.github.com/users/ZmeiGorynych/orgs", "repos_url": "https://api.github.com/users/ZmeiGorynych/repos", "events_url": "https://api.github.com/users/ZmeiGorynych/events{/privacy}", "received_events_url": "https://api.github.com/users/ZmeiGorynych/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 790080431, "node_id": "MDU6TGFiZWw3OTAwODA0MzE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/windows", "name": "windows", "color": "fcff6b", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-24T21:59:02Z", "updated_at": "2018-07-30T17:59:18Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>Trying to build PyTorch on a new laptop, Windows 10 Pro and a fresh install of VS2017 Community with every build tool option that looked remotely useful.</p>\n<p>Following the changes to the standard instructions described <a href=\"https://github.com/pytorch/pytorch/issues/6109\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/6109/hovercard\">here</a> I can get the build script to start; however it then fails with the following error:</p>\n<pre><code>-- Build files have been written to: C:/Users/egork/Dropbox/GitHub/pytorch/build\nMicrosoft (R) Build Engine version 4.7.2556.0\n[Microsoft .NET Framework, version 4.0.30319.42000]\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nBuild started 24/07/2018 22:25:03.\nProject \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" on node 1 (default targets).\nC:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj(29,3): error MSB4019: The imported project \"C:\\Microsoft.Cp\np.Default.props\" was not found. Confirm that the path in the &lt;Import&gt; declaration is correct, and that the file exists\non disk.\nDone Building Project \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" (default targets) -- FAILED.\n</code></pre>\n<p>After googling the above error, I tried setting the VCTargetsPath variable, for example to <code>set VCTargetsPath=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets</code> (a full search of my disk found two files with the name Microsoft.Cpp.Default.props, I tried both locations, the other being C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\v140 ).</p>\n<p>When trying to run the install script afterwards, the error changes to</p>\n<pre><code>Microsoft (R) Build Engine version 4.7.2556.0\n[Microsoft .NET Framework, version 4.0.30319.42000]\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nBuild started 24/07/2018 22:19:02.\nProject \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" on node 1 (default targets).\nProject file contains ToolsVersion=\"15.0\". This toolset may be unknown or missing, in which case you may be able to res\nolve this by installing the appropriate version of MSBuild, or the build may have been forced to a particular ToolsVers\nion for policy reasons. Treating the project as if it had ToolsVersion=\"4.0\". For more information, please see http://g\no.microsoft.com/fwlink/?LinkId=291333.\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Cpp.DesignTime.targets\n(488,5): error MSB4062: The \"SetEnv\" task could not be loaded from the assembly C:\\Program Files (x86)\\Microsoft Visual\n Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Build.CppTasks.Common.dll. Could not load file or assembly 'M\nicrosoft.Build.Utilities.Core, Version=15.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its depend\nencies. The system cannot find the file specified. Confirm that the &lt;UsingTask&gt; declaration is correct, that the assemb\nly and all its dependencies are available, and that the task contains a public class that implements Microsoft.Build.Fr\namework.ITask. [C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj]\nDone Building Project \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" (default targets) -- FAILED.\n</code></pre>\n<p>and in fact Microsoft.Build.Utilities.Core is in neither of the directories in which<br>\nMicrosoft.Build.CppTasks.Common.dll can be found.</p>\n<p>Any suggestions on fixing that?</p>\n<p>Thanks a lot,<br>\nE.</p>", "body_text": "Issue description\nTrying to build PyTorch on a new laptop, Windows 10 Pro and a fresh install of VS2017 Community with every build tool option that looked remotely useful.\nFollowing the changes to the standard instructions described here I can get the build script to start; however it then fails with the following error:\n-- Build files have been written to: C:/Users/egork/Dropbox/GitHub/pytorch/build\nMicrosoft (R) Build Engine version 4.7.2556.0\n[Microsoft .NET Framework, version 4.0.30319.42000]\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nBuild started 24/07/2018 22:25:03.\nProject \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" on node 1 (default targets).\nC:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj(29,3): error MSB4019: The imported project \"C:\\Microsoft.Cp\np.Default.props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists\non disk.\nDone Building Project \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" (default targets) -- FAILED.\n\nAfter googling the above error, I tried setting the VCTargetsPath variable, for example to set VCTargetsPath=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets (a full search of my disk found two files with the name Microsoft.Cpp.Default.props, I tried both locations, the other being C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\v140 ).\nWhen trying to run the install script afterwards, the error changes to\nMicrosoft (R) Build Engine version 4.7.2556.0\n[Microsoft .NET Framework, version 4.0.30319.42000]\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nBuild started 24/07/2018 22:19:02.\nProject \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" on node 1 (default targets).\nProject file contains ToolsVersion=\"15.0\". This toolset may be unknown or missing, in which case you may be able to res\nolve this by installing the appropriate version of MSBuild, or the build may have been forced to a particular ToolsVers\nion for policy reasons. Treating the project as if it had ToolsVersion=\"4.0\". For more information, please see http://g\no.microsoft.com/fwlink/?LinkId=291333.\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Cpp.DesignTime.targets\n(488,5): error MSB4062: The \"SetEnv\" task could not be loaded from the assembly C:\\Program Files (x86)\\Microsoft Visual\n Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Build.CppTasks.Common.dll. Could not load file or assembly 'M\nicrosoft.Build.Utilities.Core, Version=15.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its depend\nencies. The system cannot find the file specified. Confirm that the <UsingTask> declaration is correct, that the assemb\nly and all its dependencies are available, and that the task contains a public class that implements Microsoft.Build.Fr\namework.ITask. [C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj]\nDone Building Project \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" (default targets) -- FAILED.\n\nand in fact Microsoft.Build.Utilities.Core is in neither of the directories in which\nMicrosoft.Build.CppTasks.Common.dll can be found.\nAny suggestions on fixing that?\nThanks a lot,\nE.", "body": "## Issue description\r\nTrying to build PyTorch on a new laptop, Windows 10 Pro and a fresh install of VS2017 Community with every build tool option that looked remotely useful. \r\n\r\nFollowing the changes to the standard instructions described [here](https://github.com/pytorch/pytorch/issues/6109) I can get the build script to start; however it then fails with the following error: \r\n```\r\n-- Build files have been written to: C:/Users/egork/Dropbox/GitHub/pytorch/build\r\nMicrosoft (R) Build Engine version 4.7.2556.0\r\n[Microsoft .NET Framework, version 4.0.30319.42000]\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nBuild started 24/07/2018 22:25:03.\r\nProject \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" on node 1 (default targets).\r\nC:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj(29,3): error MSB4019: The imported project \"C:\\Microsoft.Cp\r\np.Default.props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists\r\non disk.\r\nDone Building Project \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" (default targets) -- FAILED.\r\n```\r\nAfter googling the above error, I tried setting the VCTargetsPath variable, for example to `set VCTargetsPath=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets` (a full search of my disk found two files with the name Microsoft.Cpp.Default.props, I tried both locations, the other being C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\v140 ). \r\n\r\nWhen trying to run the install script afterwards, the error changes to \r\n```\r\nMicrosoft (R) Build Engine version 4.7.2556.0\r\n[Microsoft .NET Framework, version 4.0.30319.42000]\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nBuild started 24/07/2018 22:19:02.\r\nProject \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" on node 1 (default targets).\r\nProject file contains ToolsVersion=\"15.0\". This toolset may be unknown or missing, in which case you may be able to res\r\nolve this by installing the appropriate version of MSBuild, or the build may have been forced to a particular ToolsVers\r\nion for policy reasons. Treating the project as if it had ToolsVersion=\"4.0\". For more information, please see http://g\r\no.microsoft.com/fwlink/?LinkId=291333.\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Cpp.DesignTime.targets\r\n(488,5): error MSB4062: The \"SetEnv\" task could not be loaded from the assembly C:\\Program Files (x86)\\Microsoft Visual\r\n Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Build.CppTasks.Common.dll. Could not load file or assembly 'M\r\nicrosoft.Build.Utilities.Core, Version=15.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its depend\r\nencies. The system cannot find the file specified. Confirm that the <UsingTask> declaration is correct, that the assemb\r\nly and all its dependencies are available, and that the task contains a public class that implements Microsoft.Build.Fr\r\namework.ITask. [C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj]\r\nDone Building Project \"C:\\Users\\egork\\Dropbox\\GitHub\\pytorch\\build\\INSTALL.vcxproj\" (default targets) -- FAILED.\r\n```\r\nand in fact Microsoft.Build.Utilities.Core is in neither of the directories in which \r\nMicrosoft.Build.CppTasks.Common.dll can be found. \r\n\r\nAny suggestions on fixing that?\r\n\r\nThanks a lot,\r\nE."}
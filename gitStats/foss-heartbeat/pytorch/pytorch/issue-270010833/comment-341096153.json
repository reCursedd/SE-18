{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/341096153", "html_url": "https://github.com/pytorch/pytorch/issues/3396#issuecomment-341096153", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/3396", "id": 341096153, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTA5NjE1Mw==", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-01T12:44:26Z", "updated_at": "2017-11-01T12:44:26Z", "author_association": "MEMBER", "body_html": "<p>so, the topk CUDA kernel is notoriously slow in certain shapes / dimensions. There's no easy fix without implementing particular algorithms from research papers, from what i remember (I had a discussion on this with <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1911637\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/wickedfoo\">@wickedfoo</a> a while ago). I think you are running into a combination of:</p>\n<ul>\n<li>bad sizes / dims for topk</li>\n<li>having a really small register set or number of SMs (4GB quadro card sounds like that).</li>\n</ul>", "body_text": "so, the topk CUDA kernel is notoriously slow in certain shapes / dimensions. There's no easy fix without implementing particular algorithms from research papers, from what i remember (I had a discussion on this with @wickedfoo a while ago). I think you are running into a combination of:\n\nbad sizes / dims for topk\nhaving a really small register set or number of SMs (4GB quadro card sounds like that).", "body": "so, the topk CUDA kernel is notoriously slow in certain shapes / dimensions. There's no easy fix without implementing particular algorithms from research papers, from what i remember (I had a discussion on this with @wickedfoo a while ago). I think you are running into a combination of:\r\n- bad sizes / dims for topk\r\n- having a really small register set or number of SMs (4GB quadro card sounds like that)."}
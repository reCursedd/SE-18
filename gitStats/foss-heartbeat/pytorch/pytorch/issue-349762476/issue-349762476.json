{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10440", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10440/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10440/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10440/events", "html_url": "https://github.com/pytorch/pytorch/issues/10440", "id": 349762476, "node_id": "MDU6SXNzdWUzNDk3NjI0NzY=", "number": 10440, "title": "[caffe2] enforce fail at context_gpu.cu:285, cannot get GPU memory usage statistics", "user": {"login": "yw155", "id": 20606278, "node_id": "MDQ6VXNlcjIwNjA2Mjc4", "avatar_url": "https://avatars3.githubusercontent.com/u/20606278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yw155", "html_url": "https://github.com/yw155", "followers_url": "https://api.github.com/users/yw155/followers", "following_url": "https://api.github.com/users/yw155/following{/other_user}", "gists_url": "https://api.github.com/users/yw155/gists{/gist_id}", "starred_url": "https://api.github.com/users/yw155/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yw155/subscriptions", "organizations_url": "https://api.github.com/users/yw155/orgs", "repos_url": "https://api.github.com/users/yw155/repos", "events_url": "https://api.github.com/users/yw155/events{/privacy}", "received_events_url": "https://api.github.com/users/yw155/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-11T20:44:09Z", "updated_at": "2018-08-13T16:21:10Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>enforce fail at context_gpu.cu:285, cannot get GPU memory usage statistics</p>\n<h2>Code example</h2>\n<p>from caffe2.python import utils<br>\nmem_stats = utils.GetGPUMemoryUsageStats()</p>\n<p>WARNING: Logging before InitGoogleLogging() is written to STDERR<br>\nW0811 21:28:20.350441 28545 init.h:99] Caffe2 GlobalInit should be run before any other API calls.<br>\nTraceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nFile \"/usr/local/lib/python2.7/dist-packages/caffe2/python/utils.py\", line 245, in GetGPUMemoryUsageStats<br>\ndevice_option=core.DeviceOption(caffe2_pb2.CUDA, 0),<br>\nFile \"/usr/local/lib/python2.7/dist-packages/caffe2/python/workspace.py\", line 165, in RunOperatorOnce<br>\nreturn C.run_operator_once(StringifyProto(operator))<br>\nRuntimeError: [enforce fail at context_gpu.cu:285] FLAGS_caffe2_gpu_memory_tracking. Pass --caffe2_gpu_memory_tracking to enable memory stats Error from operator:<br>\noutput: \"<strong><strong>mem</strong></strong>\" name: \"\" type: \"GetGPUMemoryUsage\" device_option { device_type: 1 cuda_gpu_id: 0 }</p>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: Caffe2</li>\n<li>How you installed PyTorch (conda, pip, source): source</li>\n<li>OS: Ubuntu 16.04</li>\n<li>CUDA/cuDNN version: 8.0 / 5.1</li>\n<li>GPU models and configuration: GTX 1080</li>\n<li>GCC version (if compiling from source): 5.1</li>\n</ul>", "body_text": "Issue description\nenforce fail at context_gpu.cu:285, cannot get GPU memory usage statistics\nCode example\nfrom caffe2.python import utils\nmem_stats = utils.GetGPUMemoryUsageStats()\nWARNING: Logging before InitGoogleLogging() is written to STDERR\nW0811 21:28:20.350441 28545 init.h:99] Caffe2 GlobalInit should be run before any other API calls.\nTraceback (most recent call last):\nFile \"\", line 1, in \nFile \"/usr/local/lib/python2.7/dist-packages/caffe2/python/utils.py\", line 245, in GetGPUMemoryUsageStats\ndevice_option=core.DeviceOption(caffe2_pb2.CUDA, 0),\nFile \"/usr/local/lib/python2.7/dist-packages/caffe2/python/workspace.py\", line 165, in RunOperatorOnce\nreturn C.run_operator_once(StringifyProto(operator))\nRuntimeError: [enforce fail at context_gpu.cu:285] FLAGS_caffe2_gpu_memory_tracking. Pass --caffe2_gpu_memory_tracking to enable memory stats Error from operator:\noutput: \"mem\" name: \"\" type: \"GetGPUMemoryUsage\" device_option { device_type: 1 cuda_gpu_id: 0 }\nSystem Info\n\nPyTorch or Caffe2: Caffe2\nHow you installed PyTorch (conda, pip, source): source\nOS: Ubuntu 16.04\nCUDA/cuDNN version: 8.0 / 5.1\nGPU models and configuration: GTX 1080\nGCC version (if compiling from source): 5.1", "body": "## Issue description\r\nenforce fail at context_gpu.cu:285, cannot get GPU memory usage statistics\r\n\r\n## Code example\r\nfrom caffe2.python import utils\r\nmem_stats = utils.GetGPUMemoryUsageStats()\r\n\r\nWARNING: Logging before InitGoogleLogging() is written to STDERR\r\nW0811 21:28:20.350441 28545 init.h:99] Caffe2 GlobalInit should be run before any other API calls.\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python2.7/dist-packages/caffe2/python/utils.py\", line 245, in GetGPUMemoryUsageStats\r\n    device_option=core.DeviceOption(caffe2_pb2.CUDA, 0),\r\n  File \"/usr/local/lib/python2.7/dist-packages/caffe2/python/workspace.py\", line 165, in RunOperatorOnce\r\n    return C.run_operator_once(StringifyProto(operator))\r\nRuntimeError: [enforce fail at context_gpu.cu:285] FLAGS_caffe2_gpu_memory_tracking. Pass --caffe2_gpu_memory_tracking to enable memory stats Error from operator: \r\noutput: \"____mem____\" name: \"\" type: \"GetGPUMemoryUsage\" device_option { device_type: 1 cuda_gpu_id: 0 }\r\n\r\n## System Info\r\n- PyTorch or Caffe2: Caffe2\r\n- How you installed PyTorch (conda, pip, source): source\r\n- OS: Ubuntu 16.04\r\n- CUDA/cuDNN version: 8.0 / 5.1\r\n- GPU models and configuration: GTX 1080\r\n- GCC version (if compiling from source): 5.1\r\n"}
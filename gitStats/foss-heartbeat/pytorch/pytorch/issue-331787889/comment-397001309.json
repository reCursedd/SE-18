{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/397001309", "html_url": "https://github.com/pytorch/pytorch/pull/8406#issuecomment-397001309", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8406", "id": 397001309, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzAwMTMwOQ==", "user": {"login": "pararthshah", "id": 1484859, "node_id": "MDQ6VXNlcjE0ODQ4NTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1484859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pararthshah", "html_url": "https://github.com/pararthshah", "followers_url": "https://api.github.com/users/pararthshah/followers", "following_url": "https://api.github.com/users/pararthshah/following{/other_user}", "gists_url": "https://api.github.com/users/pararthshah/gists{/gist_id}", "starred_url": "https://api.github.com/users/pararthshah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pararthshah/subscriptions", "organizations_url": "https://api.github.com/users/pararthshah/orgs", "repos_url": "https://api.github.com/users/pararthshah/repos", "events_url": "https://api.github.com/users/pararthshah/events{/privacy}", "received_events_url": "https://api.github.com/users/pararthshah/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-13T16:26:54Z", "updated_at": "2018-06-13T16:26:54Z", "author_association": "NONE", "body_html": "<p>Ran some tests to compare elapsed time of kthvalue on CPU and GPU for tensors of 3 sizes:</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/1484859/41364050-5325e7b6-6eea-11e8-926b-f838687d1f69.png\"><img src=\"https://user-images.githubusercontent.com/1484859/41364050-5325e7b6-6eea-11e8-926b-f838687d1f69.png\" alt=\"image\" style=\"max-width:100%;\"></a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/1484859/41364056-59c0a318-6eea-11e8-89da-c0eb625db9d1.png\"><img src=\"https://user-images.githubusercontent.com/1484859/41364056-59c0a318-6eea-11e8-89da-c0eb625db9d1.png\" alt=\"image\" style=\"max-width:100%;\"></a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/1484859/41364064-5f68d56a-6eea-11e8-9a16-311ad2c51613.png\"><img src=\"https://user-images.githubusercontent.com/1484859/41364064-5f68d56a-6eea-11e8-9a16-311ad2c51613.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>\n<p>Here is the full set of results: <a href=\"https://pastebin.com/fc0vXrmT\" rel=\"nofollow\">pastebin</a></p>\n<p><strong>Test setup</strong>:<br>\nTensors were created similar to small_3d_unique() in test_cuda.py, i.e.<br>\nt(X, X, X).copy_(torch.arange(1, X * X * X + 1).view(X, X, X))</p>\n<p>with X = 50 (small), 100 (medium), 500 (large)<br>\nand t = {Byte, Char, Double, ... , Short}Tensor</p>\n<p>For each (type, size) pair, kthvalue was called 3 times, with dim={None, 1, -1}.</p>\n<p>To measure CPU time I used time.time(), and for GPU time I used torch.cuda.Event, following the get_cycles_per_ms() function in test_cuda.py</p>\n<p>The plots show elapsed times averaged over the 3 instantiations of kthvalue for each size, type pair.</p>", "body_text": "Ran some tests to compare elapsed time of kthvalue on CPU and GPU for tensors of 3 sizes:\n\n\n\nHere is the full set of results: pastebin\nTest setup:\nTensors were created similar to small_3d_unique() in test_cuda.py, i.e.\nt(X, X, X).copy_(torch.arange(1, X * X * X + 1).view(X, X, X))\nwith X = 50 (small), 100 (medium), 500 (large)\nand t = {Byte, Char, Double, ... , Short}Tensor\nFor each (type, size) pair, kthvalue was called 3 times, with dim={None, 1, -1}.\nTo measure CPU time I used time.time(), and for GPU time I used torch.cuda.Event, following the get_cycles_per_ms() function in test_cuda.py\nThe plots show elapsed times averaged over the 3 instantiations of kthvalue for each size, type pair.", "body": "Ran some tests to compare elapsed time of kthvalue on CPU and GPU for tensors of 3 sizes:\r\n\r\n![image](https://user-images.githubusercontent.com/1484859/41364050-5325e7b6-6eea-11e8-926b-f838687d1f69.png)\r\n![image](https://user-images.githubusercontent.com/1484859/41364056-59c0a318-6eea-11e8-89da-c0eb625db9d1.png)\r\n![image](https://user-images.githubusercontent.com/1484859/41364064-5f68d56a-6eea-11e8-9a16-311ad2c51613.png)\r\n\r\nHere is the full set of results: [pastebin](https://pastebin.com/fc0vXrmT)\r\n\r\n**Test setup**:\r\nTensors were created similar to small_3d_unique() in test_cuda.py, i.e.\r\n  t(X, X, X).copy_(torch.arange(1, X * X * X + 1).view(X, X, X))\r\n\r\nwith X = 50 (small), 100 (medium), 500 (large)\r\nand t = {Byte, Char, Double, ... , Short}Tensor\r\n\r\nFor each (type, size) pair, kthvalue was called 3 times, with dim={None, 1, -1}. \r\n\r\nTo measure CPU time I used time.time(), and for GPU time I used torch.cuda.Event, following the get_cycles_per_ms() function in test_cuda.py\r\n\r\nThe plots show elapsed times averaged over the 3 instantiations of kthvalue for each size, type pair."}
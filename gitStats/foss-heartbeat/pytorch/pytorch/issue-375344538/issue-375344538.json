{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13295", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13295/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13295/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13295/events", "html_url": "https://github.com/pytorch/pytorch/issues/13295", "id": 375344538, "node_id": "MDU6SXNzdWUzNzUzNDQ1Mzg=", "number": 13295, "title": "export onnx model and load by caffe2 error", "user": {"login": "cswwp", "id": 11901683, "node_id": "MDQ6VXNlcjExOTAxNjgz", "avatar_url": "https://avatars0.githubusercontent.com/u/11901683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cswwp", "html_url": "https://github.com/cswwp", "followers_url": "https://api.github.com/users/cswwp/followers", "following_url": "https://api.github.com/users/cswwp/following{/other_user}", "gists_url": "https://api.github.com/users/cswwp/gists{/gist_id}", "starred_url": "https://api.github.com/users/cswwp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cswwp/subscriptions", "organizations_url": "https://api.github.com/users/cswwp/orgs", "repos_url": "https://api.github.com/users/cswwp/repos", "events_url": "https://api.github.com/users/cswwp/events{/privacy}", "received_events_url": "https://api.github.com/users/cswwp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 693805995, "node_id": "MDU6TGFiZWw2OTM4MDU5OTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/onnx", "name": "onnx", "color": "e99695", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-30T06:50:19Z", "updated_at": "2018-10-31T05:57:07Z", "closed_at": "2018-10-31T05:57:06Z", "author_association": "NONE", "body_html": "<p><code>model = onnx.load(\"super_resolution.onnx\")  prepared_backend = onnx_caffe2.backend.prepare(model)</code></p>\n<p>i had build from source to install pytorch, but it still show this error,</p>\n<p>File \"demo.py\", line 139, in <br>\nprepared_backend = onnx_caffe2.backend.prepare(model)<br>\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx_caffe2/backend.py\", line 439, in prepare<br>\nsuper(Caffe2Backend, cls).prepare(model, device, **kwargs)<br>\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/backend/base.py\", line 53, in prepare<br>\nonnx.checker.check_model(model)<br>\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 154, in check_model<br>\ncheck_graph(model.graph)<br>\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 127, in check_graph<br>\ncheck_node(node)<br>\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 40, in check_node<br>\n'NodeProto of type {} did not pass defs schema check.'.format(str(node.op_type)))<br>\nValueError: NodeProto of type Reshape did not pass defs schema check.</p>\n<p>how fix it?</p>", "body_text": "model = onnx.load(\"super_resolution.onnx\")  prepared_backend = onnx_caffe2.backend.prepare(model)\ni had build from source to install pytorch, but it still show this error,\nFile \"demo.py\", line 139, in \nprepared_backend = onnx_caffe2.backend.prepare(model)\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx_caffe2/backend.py\", line 439, in prepare\nsuper(Caffe2Backend, cls).prepare(model, device, **kwargs)\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/backend/base.py\", line 53, in prepare\nonnx.checker.check_model(model)\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 154, in check_model\ncheck_graph(model.graph)\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 127, in check_graph\ncheck_node(node)\nFile \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 40, in check_node\n'NodeProto of type {} did not pass defs schema check.'.format(str(node.op_type)))\nValueError: NodeProto of type Reshape did not pass defs schema check.\nhow fix it?", "body": "`model = onnx.load(\"super_resolution.onnx\") \r\nprepared_backend = onnx_caffe2.backend.prepare(model)`\r\n\r\ni had build from source to install pytorch, but it still show this error,\r\n\r\n  File \"demo.py\", line 139, in <module>\r\n    prepared_backend = onnx_caffe2.backend.prepare(model)\r\n  File \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx_caffe2/backend.py\", line 439, in prepare\r\n    super(Caffe2Backend, cls).prepare(model, device, **kwargs)\r\n  File \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/backend/base.py\", line 53, in prepare\r\n    onnx.checker.check_model(model)\r\n  File \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 154, in check_model\r\n    check_graph(model.graph)\r\n  File \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 127, in check_graph\r\n    check_node(node)\r\n  File \"/home/parker/anaconda2/envs/caffe2/lib/python3.6/site-packages/onnx/checker.py\", line 40, in check_node\r\n    'NodeProto of type {} did not pass defs schema check.'.format(str(node.op_type)))\r\nValueError: NodeProto of type Reshape did not pass defs schema check.\r\n\r\n\r\nhow fix it?\r\n"}
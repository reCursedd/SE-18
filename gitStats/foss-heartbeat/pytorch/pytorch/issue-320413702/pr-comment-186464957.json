{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/186464957", "pull_request_review_id": 118046409, "id": 186464957, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NjQ2NDk1Nw==", "diff_hunk": "@@ -17,14 +17,25 @@ bool isDifferentiable(Node * n) {\n   static std::unordered_set<Symbol> differentiable_kinds = {\n     aten::add, aten::sub, aten::mul, prim::Constant, prim::ReplaceIfUndef,\n     aten::sigmoid, aten::tanh, aten::mm, aten::chunk, aten::split, aten::t, aten::neg,\n-    aten::unsqueeze\n+    aten::unsqueeze, aten::expand\n   };\n   return differentiable_kinds.count(n->kind()) > 0;\n }\n \n+static bool isDifferentiable(Block * b) {\n+  for(Node*n : b->nodes()) {\n+    if(!isDifferentiable(n))\n+      return false;\n+    for(Block* b : n->blocks()) {\n+      if(!isDifferentiable(b))\n+        return false;\n+    }\n+  }\n+  return true;\n+}", "path": "torch/csrc/jit/autodiff.cpp", "position": null, "original_position": 20, "commit_id": "1ee1a171bc2d63ff2f125a9ea340b1d6af0fb88f", "original_commit_id": "e912dbd589cd5bfdf6c3c44799a809820ca50425", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "This change seems to be quite unnecessary. I don't think we were planning to implement differentiation of control flow any time soon, so we don't really need to traverse the blocks, since `isDifferentiable(n)` will fail for any nodes that might have them.", "created_at": "2018-05-07T15:50:33Z", "updated_at": "2018-11-23T15:43:39Z", "html_url": "https://github.com/pytorch/pytorch/pull/7303#discussion_r186464957", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/7303", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/186464957"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/7303#discussion_r186464957"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/7303"}}, "body_html": "<p>This change seems to be quite unnecessary. I don't think we were planning to implement differentiation of control flow any time soon, so we don't really need to traverse the blocks, since <code>isDifferentiable(n)</code> will fail for any nodes that might have them.</p>", "body_text": "This change seems to be quite unnecessary. I don't think we were planning to implement differentiation of control flow any time soon, so we don't really need to traverse the blocks, since isDifferentiable(n) will fail for any nodes that might have them."}
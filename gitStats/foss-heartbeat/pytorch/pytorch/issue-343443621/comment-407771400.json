{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/407771400", "html_url": "https://github.com/pytorch/pytorch/issues/9696#issuecomment-407771400", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/9696", "id": 407771400, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzc3MTQwMA==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-25T14:20:48Z", "updated_at": "2018-07-25T14:20:48Z", "author_association": "NONE", "body_html": "<p>Here's an example of things hanging, it looks stuck in <code>discoverMaster</code></p>\n<pre><code>Thread 2 (Thread 0x7f5a56fd7700 (LWP 10215)):\n#0  0x00007f5aa97218c8 in accept4 (fd=32, addr=..., addr_len=0x7f5a56fd6e18, flags=524288)\n    at ../sysdeps/unix/sysv/linux/accept4.c:40\n#1  0x00007f5a96a153aa in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#2  0x00007f5a96a07c1d in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#3  0x00007f5a96a16018 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#4  0x00007f5aa99ea6ba in start_thread (arg=0x7f5a56fd7700) at pthread_create.c:333\n#5  0x00007f5aa972041d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 1 (Thread 0x7f5aaa017740 (LWP 10141)):\n#0  0x00007f5aa99f387f in __libc_recv (fd=34, buf=0x7ffd921a2198, n=8, flags=0)\n    at ../sysdeps/unix/sysv/linux/x86_64/recv.c:28\n#1  0x00007f5a897b3f90 in void thd::recv_bytes&lt;unsigned long&gt;(int, unsigned long*, unsigned long) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#2  0x00007f5a897c2cb4 in thd::discoverMaster(std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt;, unsigned short) ()\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n  te-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#3  0x00007f5a897b91bc in thd::init::initEnv(std::string, int, std::string, int) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#4  0x00007f5a897b80d7 in std::_Function_handler&lt;thd::InitMethod::Config (std::string, int, std::string, int), thd::InitMethod::Config (*)(std::string, int, std::string, int)&gt;::_M_invoke(std::_Any_data const&amp;, std::string, int, std::string, int) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#5  0x00007f5a897b7781 in thd::getInitConfig(std::string, int, std::string, int) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#6  0x00007f5a8977a3ef in thd::DataChannel::newChannel(THDChannelType, std::string, int, std::string, int) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#7  0x00007f5a897792de in THDProcessGroupInit ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#8  0x00007f5a89606d1b in THDPModule_initProcessGroup (_unused=&lt;optimized out&gt;, \n    args=&lt;optimized out&gt;) at torch/csrc/distributed/Module.cpp:110\n#9  0x00005621b6b4dad1 in _PyCFunction_FastCallDict ()\n#10 0x00005621b6bdd67c in call_function ()\n#11 0x00005621b6bffcba in _PyEval_EvalFrameDefault ()\n#12 0x00005621b6bd6a94 in _PyEval_EvalCodeWithName ()\n#13 0x00005621b6bd7941 in fast_function ()\n#14 0x00005621b6bdd755 in call_function ()\n#15 0x00005621b6c00a7a in _PyEval_EvalFrameDefault ()\n#16 0x00005621b6bd770b in fast_function ()\n#17 0x00005621b6bdd755 in call_function ()\n#18 0x00005621b6bffcba in _PyEval_EvalFrameDefault ()\n#19 0x00005621b6bd8459 in PyEval_EvalCodeEx ()\n#20 0x00005621b6bd91ec in PyEval_EvalCode ()\n#21 0x00005621b6c539a4 in run_mod ()\n#22 0x00005621b6c53da1 in PyRun_FileExFlags ()\n#23 0x00005621b6c53fa4 in PyRun_SimpleFileExFlags ()\n#24 0x00005621b6c57a9e in Py_Main ()\n#25 0x00005621b6b1f4be in main ()\n</code></pre>", "body_text": "Here's an example of things hanging, it looks stuck in discoverMaster\nThread 2 (Thread 0x7f5a56fd7700 (LWP 10215)):\n#0  0x00007f5aa97218c8 in accept4 (fd=32, addr=..., addr_len=0x7f5a56fd6e18, flags=524288)\n    at ../sysdeps/unix/sysv/linux/accept4.c:40\n#1  0x00007f5a96a153aa in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#2  0x00007f5a96a07c1d in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#3  0x00007f5a96a16018 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#4  0x00007f5aa99ea6ba in start_thread (arg=0x7f5a56fd7700) at pthread_create.c:333\n#5  0x00007f5aa972041d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 1 (Thread 0x7f5aaa017740 (LWP 10141)):\n#0  0x00007f5aa99f387f in __libc_recv (fd=34, buf=0x7ffd921a2198, n=8, flags=0)\n    at ../sysdeps/unix/sysv/linux/x86_64/recv.c:28\n#1  0x00007f5a897b3f90 in void thd::recv_bytes<unsigned long>(int, unsigned long*, unsigned long) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#2  0x00007f5a897c2cb4 in thd::discoverMaster(std::vector<std::string, std::allocator<std::string> >, unsigned short) ()\n---Type <return> to continue, or q <return> to quit---\n  te-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#3  0x00007f5a897b91bc in thd::init::initEnv(std::string, int, std::string, int) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#4  0x00007f5a897b80d7 in std::_Function_handler<thd::InitMethod::Config (std::string, int, std::string, int), thd::InitMethod::Config (*)(std::string, int, std::string, int)>::_M_invoke(std::_Any_data const&, std::string, int, std::string, int) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#5  0x00007f5a897b7781 in thd::getInitConfig(std::string, int, std::string, int) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#6  0x00007f5a8977a3ef in thd::DataChannel::newChannel(THDChannelType, std::string, int, std::string, int) ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#7  0x00007f5a897792de in THDProcessGroupInit ()\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\n#8  0x00007f5a89606d1b in THDPModule_initProcessGroup (_unused=<optimized out>, \n    args=<optimized out>) at torch/csrc/distributed/Module.cpp:110\n#9  0x00005621b6b4dad1 in _PyCFunction_FastCallDict ()\n#10 0x00005621b6bdd67c in call_function ()\n#11 0x00005621b6bffcba in _PyEval_EvalFrameDefault ()\n#12 0x00005621b6bd6a94 in _PyEval_EvalCodeWithName ()\n#13 0x00005621b6bd7941 in fast_function ()\n#14 0x00005621b6bdd755 in call_function ()\n#15 0x00005621b6c00a7a in _PyEval_EvalFrameDefault ()\n#16 0x00005621b6bd770b in fast_function ()\n#17 0x00005621b6bdd755 in call_function ()\n#18 0x00005621b6bffcba in _PyEval_EvalFrameDefault ()\n#19 0x00005621b6bd8459 in PyEval_EvalCodeEx ()\n#20 0x00005621b6bd91ec in PyEval_EvalCode ()\n#21 0x00005621b6c539a4 in run_mod ()\n#22 0x00005621b6c53da1 in PyRun_FileExFlags ()\n#23 0x00005621b6c53fa4 in PyRun_SimpleFileExFlags ()\n#24 0x00005621b6c57a9e in Py_Main ()\n#25 0x00005621b6b1f4be in main ()", "body": "Here's an example of things hanging, it looks stuck in `discoverMaster`\r\n```\r\nThread 2 (Thread 0x7f5a56fd7700 (LWP 10215)):\r\n#0  0x00007f5aa97218c8 in accept4 (fd=32, addr=..., addr_len=0x7f5a56fd6e18, flags=524288)\r\n    at ../sysdeps/unix/sysv/linux/accept4.c:40\r\n#1  0x00007f5a96a153aa in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\r\n#2  0x00007f5a96a07c1d in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\r\n#3  0x00007f5a96a16018 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\r\n#4  0x00007f5aa99ea6ba in start_thread (arg=0x7f5a56fd7700) at pthread_create.c:333\r\n#5  0x00007f5aa972041d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n\r\nThread 1 (Thread 0x7f5aaa017740 (LWP 10141)):\r\n#0  0x00007f5aa99f387f in __libc_recv (fd=34, buf=0x7ffd921a2198, n=8, flags=0)\r\n    at ../sysdeps/unix/sysv/linux/x86_64/recv.c:28\r\n#1  0x00007f5a897b3f90 in void thd::recv_bytes<unsigned long>(int, unsigned long*, unsigned long) ()\r\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\r\n#2  0x00007f5a897c2cb4 in thd::discoverMaster(std::vector<std::string, std::allocator<std::string> >, unsigned short) ()\r\n---Type <return> to continue, or q <return> to quit---\r\n  te-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\r\n#3  0x00007f5a897b91bc in thd::init::initEnv(std::string, int, std::string, int) ()\r\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\r\n#4  0x00007f5a897b80d7 in std::_Function_handler<thd::InitMethod::Config (std::string, int, std::string, int), thd::InitMethod::Config (*)(std::string, int, std::string, int)>::_M_invoke(std::_Any_data const&, std::string, int, std::string, int) ()\r\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\r\n#5  0x00007f5a897b7781 in thd::getInitConfig(std::string, int, std::string, int) ()\r\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\r\n#6  0x00007f5a8977a3ef in thd::DataChannel::newChannel(THDChannelType, std::string, int, std::string, int) ()\r\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\r\n#7  0x00007f5a897792de in THDProcessGroupInit ()\r\n   from /home/ubuntu/anaconda3/envs/pytorch_p36/lib/python3.6/site-packages/torch/_C.cpython-36m-x86_64-linux-gnu.so\r\n#8  0x00007f5a89606d1b in THDPModule_initProcessGroup (_unused=<optimized out>, \r\n    args=<optimized out>) at torch/csrc/distributed/Module.cpp:110\r\n#9  0x00005621b6b4dad1 in _PyCFunction_FastCallDict ()\r\n#10 0x00005621b6bdd67c in call_function ()\r\n#11 0x00005621b6bffcba in _PyEval_EvalFrameDefault ()\r\n#12 0x00005621b6bd6a94 in _PyEval_EvalCodeWithName ()\r\n#13 0x00005621b6bd7941 in fast_function ()\r\n#14 0x00005621b6bdd755 in call_function ()\r\n#15 0x00005621b6c00a7a in _PyEval_EvalFrameDefault ()\r\n#16 0x00005621b6bd770b in fast_function ()\r\n#17 0x00005621b6bdd755 in call_function ()\r\n#18 0x00005621b6bffcba in _PyEval_EvalFrameDefault ()\r\n#19 0x00005621b6bd8459 in PyEval_EvalCodeEx ()\r\n#20 0x00005621b6bd91ec in PyEval_EvalCode ()\r\n#21 0x00005621b6c539a4 in run_mod ()\r\n#22 0x00005621b6c53da1 in PyRun_FileExFlags ()\r\n#23 0x00005621b6c53fa4 in PyRun_SimpleFileExFlags ()\r\n#24 0x00005621b6c57a9e in Py_Main ()\r\n#25 0x00005621b6b1f4be in main ()\r\n```"}
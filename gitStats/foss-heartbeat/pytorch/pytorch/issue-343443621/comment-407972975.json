{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/407972975", "html_url": "https://github.com/pytorch/pytorch/issues/9696#issuecomment-407972975", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/9696", "id": 407972975, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzk3Mjk3NQ==", "user": {"login": "ailzhang", "id": 5248122, "node_id": "MDQ6VXNlcjUyNDgxMjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5248122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ailzhang", "html_url": "https://github.com/ailzhang", "followers_url": "https://api.github.com/users/ailzhang/followers", "following_url": "https://api.github.com/users/ailzhang/following{/other_user}", "gists_url": "https://api.github.com/users/ailzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ailzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ailzhang/subscriptions", "organizations_url": "https://api.github.com/users/ailzhang/orgs", "repos_url": "https://api.github.com/users/ailzhang/repos", "events_url": "https://api.github.com/users/ailzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/ailzhang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-26T04:30:23Z", "updated_at": "2018-07-26T04:30:23Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23068\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yaroslavvb\">@yaroslavvb</a> , do you compile pytorch from source? If so, could you add a few print statements around <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/04a3616de01c612557d12e3a371d31aa37c8e508/torch/lib/THD/base/init_methods/InitMethodUtils.cpp#L52\">pytorch/torch/lib/THD/base/init_methods/InitMethodUtils.cpp</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 52\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/04a3616de01c612557d12e3a371d31aa37c8e508\">04a3616</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L52\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"52\"></td>\n          <td id=\"LC52\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-c1\">std::tie</span>(sockets[i], std::ignore) = <span class=\"pl-c1\">accept</span>(listen_socket); </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<br>\nand<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/04a3616de01c612557d12e3a371d31aa37c8e508/torch/lib/THD/base/init_methods/InitMethodUtils.cpp#L70\">pytorch/torch/lib/THD/base/init_methods/InitMethodUtils.cpp</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 70\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/04a3616de01c612557d12e3a371d31aa37c8e508\">04a3616</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L70\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"70\"></td>\n          <td id=\"LC70\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> socket = <span class=\"pl-c1\">connect</span>(address, port, <span class=\"pl-c1\">true</span>, <span class=\"pl-c1\">2000</span>); </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n.<br>\nThe GDB trace indicates the master is still waiting on accept() but the worker is waiting on recv a message from master. Every time master accepts a connection, it confirms by sending back the work's address. Since it's hard to repro on our side, if you could provide in which line the master &amp; workers got stuck respectively, that could be very helpful as well.<br>\nThanks!</p>", "body_text": "Hi @yaroslavvb , do you compile pytorch from source? If so, could you add a few print statements around \n  \n    \n      pytorch/torch/lib/THD/base/init_methods/InitMethodUtils.cpp\n    \n    \n         Line 52\n      in\n      04a3616\n    \n    \n    \n    \n\n        \n          \n           std::tie(sockets[i], std::ignore) = accept(listen_socket); \n        \n    \n  \n\n\nand\n\n  \n    \n      pytorch/torch/lib/THD/base/init_methods/InitMethodUtils.cpp\n    \n    \n         Line 70\n      in\n      04a3616\n    \n    \n    \n    \n\n        \n          \n           socket = connect(address, port, true, 2000); \n        \n    \n  \n\n.\nThe GDB trace indicates the master is still waiting on accept() but the worker is waiting on recv a message from master. Every time master accepts a connection, it confirms by sending back the work's address. Since it's hard to repro on our side, if you could provide in which line the master & workers got stuck respectively, that could be very helpful as well.\nThanks!", "body": "Hi @yaroslavvb , do you compile pytorch from source? If so, could you add a few print statements around https://github.com/pytorch/pytorch/blob/04a3616de01c612557d12e3a371d31aa37c8e508/torch/lib/THD/base/init_methods/InitMethodUtils.cpp#L52\r\nand \r\nhttps://github.com/pytorch/pytorch/blob/04a3616de01c612557d12e3a371d31aa37c8e508/torch/lib/THD/base/init_methods/InitMethodUtils.cpp#L70.\r\nThe GDB trace indicates the master is still waiting on accept() but the worker is waiting on recv a message from master. Every time master accepts a connection, it confirms by sending back the work's address. Since it's hard to repro on our side, if you could provide in which line the master & workers got stuck respectively, that could be very helpful as well. \r\nThanks!"}
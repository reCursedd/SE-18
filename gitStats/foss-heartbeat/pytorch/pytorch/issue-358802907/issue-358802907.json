{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11487", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11487/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11487/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11487/events", "html_url": "https://github.com/pytorch/pytorch/pull/11487", "id": 358802907, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE0NDUwNjA0", "number": 11487, "title": "Introducing python setup.py rebuild develop", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-10T21:32:36Z", "updated_at": "2018-09-20T16:54:35Z", "closed_at": "2018-09-11T15:58:01Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/11487", "html_url": "https://github.com/pytorch/pytorch/pull/11487", "diff_url": "https://github.com/pytorch/pytorch/pull/11487.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/11487.patch"}, "body_html": "<p>This speeds up incremental builds by doing the following changes:</p>\n<ul>\n<li>Uses <code>rsync</code> instead of <code>cp</code> (when <code>rsync</code> is found) which is a bit smarter in doing \"maybe copy\"</li>\n<li>Introduces a <code>rebuild</code> mode which does not rerun <code>cmake</code> in <code>build_pytorch_libs.sh</code>.<br>\n<em>Note: <code>rebuild</code> should only be used if you dont add / remove files to the build, as <code>cmake</code> is not rerun</em></li>\n</ul>\n<p>Current no-op rebuild speedup:</p>\n<ul>\n<li>1m 15s -&gt; 20s</li>\n</ul>\n<p>There are some lingering bugs. No-op rebuilds rerun <code>cmake</code>  for two rebuilds (likely that cmake logic is dependent on the install folder, hence kicking off rebuild).</p>\n<p>So what you see</p>\n<pre><code># (with ccache)\npython setup.py rebuild develop    # first time - ~5 mins  \npython setup.py rebuild develop    # second time - ~3 mins\npython setup.py rebuild develop    # third time - ~2 mins\npython setup.py rebuild develop    # fourth time - ~20 seconds\npython setup.py rebuild develop    # fifth time - ~20 seconds\n</code></pre>", "body_text": "This speeds up incremental builds by doing the following changes:\n\nUses rsync instead of cp (when rsync is found) which is a bit smarter in doing \"maybe copy\"\nIntroduces a rebuild mode which does not rerun cmake in build_pytorch_libs.sh.\nNote: rebuild should only be used if you dont add / remove files to the build, as cmake is not rerun\n\nCurrent no-op rebuild speedup:\n\n1m 15s -> 20s\n\nThere are some lingering bugs. No-op rebuilds rerun cmake  for two rebuilds (likely that cmake logic is dependent on the install folder, hence kicking off rebuild).\nSo what you see\n# (with ccache)\npython setup.py rebuild develop    # first time - ~5 mins  \npython setup.py rebuild develop    # second time - ~3 mins\npython setup.py rebuild develop    # third time - ~2 mins\npython setup.py rebuild develop    # fourth time - ~20 seconds\npython setup.py rebuild develop    # fifth time - ~20 seconds", "body": "This speeds up incremental builds by doing the following changes:\r\n\r\n- Uses `rsync` instead of `cp` (when `rsync` is found) which is a bit smarter in doing \"maybe copy\"\r\n- Introduces a `rebuild` mode which does not rerun `cmake` in `build_pytorch_libs.sh`.\r\n   *Note: `rebuild` should only be used if you dont add / remove files to the build, as `cmake` is not rerun*\r\n\r\nCurrent no-op rebuild speedup:\r\n- 1m 15s -> 20s\r\n\r\nThere are some lingering bugs. No-op rebuilds rerun `cmake`  for two rebuilds (likely that cmake logic is dependent on the install folder, hence kicking off rebuild).\r\n\r\nSo what you see\r\n\r\n```\r\n# (with ccache)\r\npython setup.py rebuild develop    # first time - ~5 mins  \r\npython setup.py rebuild develop    # second time - ~3 mins\r\npython setup.py rebuild develop    # third time - ~2 mins\r\npython setup.py rebuild develop    # fourth time - ~20 seconds\r\npython setup.py rebuild develop    # fifth time - ~20 seconds\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/9744", "id": 203385181, "node_id": "MDExOlB1bGxSZXF1ZXN0MjAzMzg1MTgx", "html_url": "https://github.com/pytorch/pytorch/pull/9744", "diff_url": "https://github.com/pytorch/pytorch/pull/9744.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/9744.patch", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/9744", "number": 9744, "state": "open", "locked": false, "title": "Lossen enforce for predictor", "user": {"login": "fishbone", "id": 471832, "node_id": "MDQ6VXNlcjQ3MTgzMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/471832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fishbone", "html_url": "https://github.com/fishbone", "followers_url": "https://api.github.com/users/fishbone/followers", "following_url": "https://api.github.com/users/fishbone/following{/other_user}", "gists_url": "https://api.github.com/users/fishbone/gists{/gist_id}", "starred_url": "https://api.github.com/users/fishbone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fishbone/subscriptions", "organizations_url": "https://api.github.com/users/fishbone/orgs", "repos_url": "https://api.github.com/users/fishbone/repos", "events_url": "https://api.github.com/users/fishbone/events{/privacy}", "received_events_url": "https://api.github.com/users/fishbone/received_events", "type": "User", "site_admin": false}, "body": "Summary:\nThe logging in CAFFE_ENFORCE actually is not very cheap when it's applied\nto super cheap functions like Input in operator. There are several reasons.\nThe first one is that it's not guarded by LIKELY or UNLIKELY and the exception\nis thrown. Besides, the body of CAFFE_ENFORCE is not very simple which sometimes\nprevent the function from being inline. Sometimes, CAFFE_ENFORCE also force the\nfunction save callee save registers which is expensive compared with the cheap\nfunction.\n\nWhen we use predictor, usually CAFFE_ENFORCE always return true and it's not very\nuseful and purely waste of resources. In this diff the MACRO CAFFE_PREDICTOR_MODE\nis introduced to remove the unnecessary check in when it's used as a predictor.\n\nDifferential Revision: D8963165\n", "created_at": "2018-07-24T01:22:34Z", "updated_at": "2018-07-31T16:42:33Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "bf57d8755bb65f68feb65b94dc0992ff4ec1fd6d", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/pytorch/pytorch/pulls/9744/commits", "review_comments_url": "https://api.github.com/repos/pytorch/pytorch/pulls/9744/comments", "review_comment_url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9744/comments", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/486e4e0f7fb3d8bdd4d570dfd547438f6a0ec808", "head": {"label": "fishbone:export-D8963165", "ref": "export-D8963165", "sha": "486e4e0f7fb3d8bdd4d570dfd547438f6a0ec808", "user": {"login": "fishbone", "id": 471832, "node_id": "MDQ6VXNlcjQ3MTgzMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/471832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fishbone", "html_url": "https://github.com/fishbone", "followers_url": "https://api.github.com/users/fishbone/followers", "following_url": "https://api.github.com/users/fishbone/following{/other_user}", "gists_url": "https://api.github.com/users/fishbone/gists{/gist_id}", "starred_url": "https://api.github.com/users/fishbone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fishbone/subscriptions", "organizations_url": "https://api.github.com/users/fishbone/orgs", "repos_url": "https://api.github.com/users/fishbone/repos", "events_url": "https://api.github.com/users/fishbone/events{/privacy}", "received_events_url": "https://api.github.com/users/fishbone/received_events", "type": "User", "site_admin": false}, "repo": {"id": 140896742, "node_id": "MDEwOlJlcG9zaXRvcnkxNDA4OTY3NDI=", "name": "pytorch", "full_name": "fishbone/pytorch", "private": false, "owner": {"login": "fishbone", "id": 471832, "node_id": "MDQ6VXNlcjQ3MTgzMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/471832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fishbone", "html_url": "https://github.com/fishbone", "followers_url": "https://api.github.com/users/fishbone/followers", "following_url": "https://api.github.com/users/fishbone/following{/other_user}", "gists_url": "https://api.github.com/users/fishbone/gists{/gist_id}", "starred_url": "https://api.github.com/users/fishbone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fishbone/subscriptions", "organizations_url": "https://api.github.com/users/fishbone/orgs", "repos_url": "https://api.github.com/users/fishbone/repos", "events_url": "https://api.github.com/users/fishbone/events{/privacy}", "received_events_url": "https://api.github.com/users/fishbone/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/fishbone/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": true, "url": "https://api.github.com/repos/fishbone/pytorch", "forks_url": "https://api.github.com/repos/fishbone/pytorch/forks", "keys_url": "https://api.github.com/repos/fishbone/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/fishbone/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/fishbone/pytorch/teams", "hooks_url": "https://api.github.com/repos/fishbone/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/fishbone/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/fishbone/pytorch/events", "assignees_url": "https://api.github.com/repos/fishbone/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/fishbone/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/fishbone/pytorch/tags", "blobs_url": "https://api.github.com/repos/fishbone/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/fishbone/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/fishbone/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/fishbone/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/fishbone/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/fishbone/pytorch/languages", "stargazers_url": "https://api.github.com/repos/fishbone/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/fishbone/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/fishbone/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/fishbone/pytorch/subscription", "commits_url": "https://api.github.com/repos/fishbone/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/fishbone/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/fishbone/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/fishbone/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/fishbone/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/fishbone/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/fishbone/pytorch/merges", "archive_url": "https://api.github.com/repos/fishbone/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/fishbone/pytorch/downloads", "issues_url": "https://api.github.com/repos/fishbone/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/fishbone/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/fishbone/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/fishbone/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/fishbone/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/fishbone/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/fishbone/pytorch/deployments", "created_at": "2018-07-13T22:06:05Z", "updated_at": "2018-07-13T22:06:18Z", "pushed_at": "2018-08-30T00:31:44Z", "git_url": "git://github.com/fishbone/pytorch.git", "ssh_url": "git@github.com:fishbone/pytorch.git", "clone_url": "https://github.com/fishbone/pytorch.git", "svn_url": "https://github.com/fishbone/pytorch", "homepage": "http://pytorch.org", "size": 69456, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "pytorch:master", "ref": "master", "sha": "d7d673b68d287e85903616525d89b8ae3cafd0dd", "user": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 65600975, "node_id": "MDEwOlJlcG9zaXRvcnk2NTYwMDk3NQ==", "name": "pytorch", "full_name": "pytorch/pytorch", "private": false, "owner": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/pytorch/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": false, "url": "https://api.github.com/repos/pytorch/pytorch", "forks_url": "https://api.github.com/repos/pytorch/pytorch/forks", "keys_url": "https://api.github.com/repos/pytorch/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pytorch/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pytorch/pytorch/teams", "hooks_url": "https://api.github.com/repos/pytorch/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/pytorch/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/pytorch/pytorch/events", "assignees_url": "https://api.github.com/repos/pytorch/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/pytorch/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/pytorch/pytorch/tags", "blobs_url": "https://api.github.com/repos/pytorch/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pytorch/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pytorch/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pytorch/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/pytorch/pytorch/languages", "stargazers_url": "https://api.github.com/repos/pytorch/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/pytorch/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/pytorch/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/pytorch/pytorch/subscription", "commits_url": "https://api.github.com/repos/pytorch/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pytorch/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pytorch/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pytorch/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/pytorch/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pytorch/pytorch/merges", "archive_url": "https://api.github.com/repos/pytorch/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pytorch/pytorch/downloads", "issues_url": "https://api.github.com/repos/pytorch/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/pytorch/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/pytorch/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/pytorch/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pytorch/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/pytorch/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/pytorch/pytorch/deployments", "created_at": "2016-08-13T05:26:41Z", "updated_at": "2018-11-24T05:35:41Z", "pushed_at": "2018-11-24T05:34:07Z", "git_url": "git://github.com/pytorch/pytorch.git", "ssh_url": "git@github.com:pytorch/pytorch.git", "clone_url": "https://github.com/pytorch/pytorch.git", "svn_url": "https://github.com/pytorch/pytorch", "homepage": "http://pytorch.org", "size": 89651, "stargazers_count": 21577, "watchers_count": 21577, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 5149, "mirror_url": null, "archived": false, "open_issues_count": 2193, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 5149, "open_issues": 2193, "watchers": 21577, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9744"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/9744"}, "issue": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/9744"}, "comments": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/9744/comments"}, "review_comments": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9744/comments"}, "review_comment": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9744/commits"}, "statuses": {"href": "https://api.github.com/repos/pytorch/pytorch/statuses/486e4e0f7fb3d8bdd4d570dfd547438f6a0ec808"}}, "author_association": "CONTRIBUTOR", "body_html": "<p>Summary:<br>\nThe logging in CAFFE_ENFORCE actually is not very cheap when it's applied<br>\nto super cheap functions like Input in operator. There are several reasons.<br>\nThe first one is that it's not guarded by LIKELY or UNLIKELY and the exception<br>\nis thrown. Besides, the body of CAFFE_ENFORCE is not very simple which sometimes<br>\nprevent the function from being inline. Sometimes, CAFFE_ENFORCE also force the<br>\nfunction save callee save registers which is expensive compared with the cheap<br>\nfunction.</p>\n<p>When we use predictor, usually CAFFE_ENFORCE always return true and it's not very<br>\nuseful and purely waste of resources. In this diff the MACRO CAFFE_PREDICTOR_MODE<br>\nis introduced to remove the unnecessary check in when it's used as a predictor.</p>\n<p>Differential Revision: D8963165</p>", "body_text": "Summary:\nThe logging in CAFFE_ENFORCE actually is not very cheap when it's applied\nto super cheap functions like Input in operator. There are several reasons.\nThe first one is that it's not guarded by LIKELY or UNLIKELY and the exception\nis thrown. Besides, the body of CAFFE_ENFORCE is not very simple which sometimes\nprevent the function from being inline. Sometimes, CAFFE_ENFORCE also force the\nfunction save callee save registers which is expensive compared with the cheap\nfunction.\nWhen we use predictor, usually CAFFE_ENFORCE always return true and it's not very\nuseful and purely waste of resources. In this diff the MACRO CAFFE_PREDICTOR_MODE\nis introduced to remove the unnecessary check in when it's used as a predictor.\nDifferential Revision: D8963165", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 1, "review_comments": 0, "maintainer_can_modify": true, "commits": 3, "additions": 128, "deletions": 40, "changed_files": 8}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6078", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6078/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6078/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6078/events", "html_url": "https://github.com/pytorch/pytorch/pull/6078", "id": 309491689, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc4MTMzMTk0", "number": 6078, "title": "Exp, log, sin, cos vectorized", "user": {"login": "cpuhrsch", "id": 1716488, "node_id": "MDQ6VXNlcjE3MTY0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1716488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpuhrsch", "html_url": "https://github.com/cpuhrsch", "followers_url": "https://api.github.com/users/cpuhrsch/followers", "following_url": "https://api.github.com/users/cpuhrsch/following{/other_user}", "gists_url": "https://api.github.com/users/cpuhrsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpuhrsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpuhrsch/subscriptions", "organizations_url": "https://api.github.com/users/cpuhrsch/orgs", "repos_url": "https://api.github.com/users/cpuhrsch/repos", "events_url": "https://api.github.com/users/cpuhrsch/events{/privacy}", "received_events_url": "https://api.github.com/users/cpuhrsch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-03-28T19:03:43Z", "updated_at": "2018-11-23T15:41:18Z", "closed_at": "2018-03-29T17:24:45Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/6078", "html_url": "https://github.com/pytorch/pytorch/pull/6078", "diff_url": "https://github.com/pytorch/pytorch/pull/6078.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/6078.patch"}, "body_html": "<p>Measured perf using <a href=\"https://paste.fedoraproject.org/paste/yJiXU3AZGHuyjTVRWlj5OQ\" rel=\"nofollow\">this script</a>. The 1GB benchmarks for doubles are still running, but the 100MB benchmarks indicate a slight perf regression using this branch presumably because of the extra store and load within the non-avx2 implementation of vec and vec.</p>\n<p>EDIT: Added timings for double<br>\nEDIT: Added support for abs for all types</p>\n<p>Single core</p>\n<p>Master</p>\n<pre><code>cos:            size: 10^2      count: 10000    elapsed: 1.55431699753  type: torch.FloatTensor\ncos:            size: 10^3      count: 1000     elapsed: 1.62953400612  type: torch.FloatTensor\ncos:            size: 10^4      count: 100      elapsed: 2.4978890419   type: torch.FloatTensor\ncos:            size: 10^5      count: 10       elapsed: 2.39908790588  type: torch.FloatTensor\nsin:            size: 10^2      count: 10000    elapsed: 1.44210910797  type: torch.FloatTensor\nsin:            size: 10^3      count: 1000     elapsed: 1.54422807693  type: torch.FloatTensor\nsin:            size: 10^4      count: 100      elapsed: 2.40846395493  type: torch.FloatTensor\nsin:            size: 10^5      count: 10       elapsed: 2.29448604584  type: torch.FloatTensor\nexp:            size: 10^2      count: 10000    elapsed: 1.50313210487  type: torch.FloatTensor\nexp:            size: 10^3      count: 1000     elapsed: 1.5239470005   type: torch.FloatTensor\nexp:            size: 10^4      count: 100      elapsed: 2.39896297455  type: torch.FloatTensor\nexp:            size: 10^5      count: 10       elapsed: 2.31458091736  type: torch.FloatTensor\nlog:            size: 10^2      count: 10000    elapsed: 1.65806102753  type: torch.FloatTensor\nlog:            size: 10^3      count: 1000     elapsed: 1.69567799568  type: torch.FloatTensor\nlog:            size: 10^4      count: 100      elapsed: 2.56792616844  type: torch.FloatTensor\nlog:            size: 10^5      count: 10       elapsed: 2.47661995888  type: torch.FloatTensor\n\ncos:            size: 10^2      count: 10000    elapsed: 29.2463679314  type: torch.DoubleTensor\ncos:            size: 10^3      count: 1000     elapsed: 29.1897990704  type: torch.DoubleTensor\ncos:            size: 10^4      count: 100      elapsed: 30.8953261375  type: torch.DoubleTensor\ncos:            size: 10^5      count: 10       elapsed: 30.8482341766  type: torch.DoubleTensor\nsin:            size: 10^2      count: 10000    elapsed: 28.2373690605  type: torch.DoubleTensor\nsin:            size: 10^3      count: 1000     elapsed: 28.8227479458  type: torch.DoubleTensor\nsin:            size: 10^4      count: 100      elapsed: 29.8306491375  type: torch.DoubleTensor\nsin:            size: 10^5      count: 10       elapsed: 29.7849609852  type: torch.DoubleTensor\nexp:            size: 10^2      count: 10000    elapsed: 21.3683919907  type: torch.DoubleTensor\nexp:            size: 10^3      count: 1000     elapsed: 22.0100431442  type: torch.DoubleTensor\nexp:            size: 10^4      count: 100      elapsed: 22.9923679829  type: torch.DoubleTensor\nexp:            size: 10^5      count: 10       elapsed: 22.9505109787  type: torch.DoubleTensor\nlog:            size: 10^2      count: 10000    elapsed: 29.4384469986  type: torch.DoubleTensor\nlog:            size: 10^3      count: 1000     elapsed: 30.061797142   type: torch.DoubleTensor\nlog:            size: 10^4      count: 100      elapsed: 31.0885539055  type: torch.DoubleTensor\nlog:            size: 10^5      count: 10       elapsed: 31.0436210632  type: torch.DoubleTensor\n</code></pre>\n<p>This branch</p>\n<pre><code>cos:            size: 10^2      count: 10000    elapsed: 1.54843401909  type: torch.FloatTensor\ncos:            size: 10^3      count: 1000     elapsed: 1.6413397789   type: torch.FloatTensor\ncos:            size: 10^4      count: 100      elapsed: 2.52125191689  type: torch.FloatTensor\ncos:            size: 10^5      count: 10       elapsed: 2.41325116158  type: torch.FloatTensor\nsin:            size: 10^2      count: 10000    elapsed: 1.44992494583  type: torch.FloatTensor\nsin:            size: 10^3      count: 1000     elapsed: 1.54990410805  type: torch.FloatTensor\nsin:            size: 10^4      count: 100      elapsed: 2.40798306465  type: torch.FloatTensor\nsin:            size: 10^5      count: 10       elapsed: 2.30475592613  type: torch.FloatTensor\nexp:            size: 10^2      count: 10000    elapsed: 1.50176095963  type: torch.FloatTensor\nexp:            size: 10^3      count: 1000     elapsed: 1.52033686638  type: torch.FloatTensor\nexp:            size: 10^4      count: 100      elapsed: 2.40323591232  type: torch.FloatTensor\nexp:            size: 10^5      count: 10       elapsed: 2.31940412521  type: torch.FloatTensor\nlog:            size: 10^2      count: 10000    elapsed: 1.63235998154  type: torch.FloatTensor\nlog:            size: 10^3      count: 1000     elapsed: 1.67921590805  type: torch.FloatTensor\nlog:            size: 10^4      count: 100      elapsed: 2.55977487564  type: torch.FloatTensor\nlog:            size: 10^5      count: 10       elapsed: 2.46202898026  type: torch.FloatTensor\n\ncos:            size: 10^2      count: 10000    elapsed: 30.0235459805  type: torch.DoubleTensor\ncos:            size: 10^3      count: 1000     elapsed: 31.4737381935  type: torch.DoubleTensor\ncos:            size: 10^4      count: 100      elapsed: 32.1326041222  type: torch.DoubleTensor\ncos:            size: 10^5      count: 10       elapsed: 31.6777579784  type: torch.DoubleTensor\nsin:            size: 10^2      count: 10000    elapsed: 29.1807699203  type: torch.DoubleTensor\nsin:            size: 10^3      count: 1000     elapsed: 29.6215879917  type: torch.DoubleTensor\nsin:            size: 10^4      count: 100      elapsed: 30.6181018353  type: torch.DoubleTensor\nsin:            size: 10^5      count: 10       elapsed: 30.2948379517  type: torch.DoubleTensor\nexp:            size: 10^2      count: 10000    elapsed: 22.4347589016  type: torch.DoubleTensor\nexp:            size: 10^3      count: 1000     elapsed: 23.307060957   type: torch.DoubleTensor\nexp:            size: 10^4      count: 100      elapsed: 24.4995651245  type: torch.DoubleTensor\nexp:            size: 10^5      count: 10       elapsed: 24.0824759007  type: torch.DoubleTensor\nlog:            size: 10^2      count: 10000    elapsed: 31.2646110058  type: torch.DoubleTensor\nlog:            size: 10^3      count: 1000     elapsed: 32.2329819202  type: torch.DoubleTensor\nlog:            size: 10^4      count: 100      elapsed: 33.4655709267  type: torch.DoubleTensor\nlog:            size: 10^5      count: 10       elapsed: 33.0231490135  type: torch.DoubleTensor\n</code></pre>\n<p>Abs Master</p>\n<pre><code>abs:            size: 10^2      count: 10000    elapsed: 4.18545389175  type: torch.FloatTensor\nabs:            size: 10^3      count: 1000     elapsed: 4.30929303169  type: torch.FloatTensor\nabs:            size: 10^4      count: 100      elapsed: 5.18289899826  type: torch.FloatTensor\nabs:            size: 10^5      count: 10       elapsed: 5.12413811684  type: torch.FloatTensor\nabs:            size: 10^2      count: 10000    elapsed: 4.21678590775  type: torch.DoubleTensor\nabs:            size: 10^3      count: 1000     elapsed: 5.08613801003  type: torch.DoubleTensor\nabs:            size: 10^4      count: 100      elapsed: 5.99231100082  type: torch.DoubleTensor\nabs:            size: 10^5      count: 10       elapsed: 5.95689797401  type: torch.DoubleTensor\nabs:            size: 10^2      count: 10000    elapsed: 4.16819906235  type: torch.IntTensor\nabs:            size: 10^3      count: 1000     elapsed: 4.22109985352  type: torch.IntTensor\nabs:            size: 10^4      count: 100      elapsed: 5.09025883675  type: torch.IntTensor\nabs:            size: 10^5      count: 10       elapsed: 5.03382301331  type: torch.IntTensor\nabs:            size: 10^2      count: 10000    elapsed: 4.22057914734  type: torch.LongTensor\nabs:            size: 10^3      count: 1000     elapsed: 4.9265730381   type: torch.LongTensor\nabs:            size: 10^4      count: 100      elapsed: 5.84256696701  type: torch.LongTensor\nabs:            size: 10^5      count: 10       elapsed: 5.93304586411  type: torch.LongTensor\nabs:            size: 10^2      count: 10000    elapsed: 4.17617201805  type: torch.ShortTensor\nabs:            size: 10^3      count: 1000     elapsed: 4.2090690136   type: torch.ShortTensor\nabs:            size: 10^4      count: 100      elapsed: 4.49850416183  type: torch.ShortTensor\nabs:            size: 10^5      count: 10       elapsed: 4.626557827    type: torch.ShortTensor\n</code></pre>\n<p>Abs This branch</p>\n<pre><code>abs:            size: 10^2      count: 10000    elapsed: 0.448744058609 type: torch.FloatTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.421611070633 type: torch.FloatTensor\nabs:            size: 10^4      count: 100      elapsed: 1.52210712433  type: torch.FloatTensor\nabs:            size: 10^5      count: 10       elapsed: 1.49177908897  type: torch.FloatTensor\nabs:            size: 10^2      count: 10000    elapsed: 0.844108104706 type: torch.DoubleTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.820927858353 type: torch.DoubleTensor\nabs:            size: 10^4      count: 100      elapsed: 3.00412607193  type: torch.DoubleTensor\nabs:            size: 10^5      count: 10       elapsed: 2.97248101234  type: torch.DoubleTensor\nabs:            size: 10^2      count: 10000    elapsed: 0.445827960968 type: torch.IntTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.420156955719 type: torch.IntTensor\nabs:            size: 10^4      count: 100      elapsed: 1.51804709435  type: torch.IntTensor\nabs:            size: 10^5      count: 10       elapsed: 1.52535510063  type: torch.IntTensor\nabs:            size: 10^2      count: 10000    elapsed: 0.844727993011 type: torch.LongTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.818938016891 type: torch.LongTensor\nabs:            size: 10^4      count: 100      elapsed: 3.02740287781  type: torch.LongTensor\nabs:            size: 10^5      count: 10       elapsed: 2.99336504936  type: torch.LongTensor\nabs:            size: 10^2      count: 10000    elapsed: 0.251252174377 type: torch.ShortTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.217294931412 type: torch.ShortTensor\nabs:            size: 10^4      count: 100      elapsed: 0.330620765686 type: torch.ShortTensor\nabs:            size: 10^5      count: 10       elapsed: 0.745229005814 type: torch.ShortTensor\n</code></pre>", "body_text": "Measured perf using this script. The 1GB benchmarks for doubles are still running, but the 100MB benchmarks indicate a slight perf regression using this branch presumably because of the extra store and load within the non-avx2 implementation of vec and vec.\nEDIT: Added timings for double\nEDIT: Added support for abs for all types\nSingle core\nMaster\ncos:            size: 10^2      count: 10000    elapsed: 1.55431699753  type: torch.FloatTensor\ncos:            size: 10^3      count: 1000     elapsed: 1.62953400612  type: torch.FloatTensor\ncos:            size: 10^4      count: 100      elapsed: 2.4978890419   type: torch.FloatTensor\ncos:            size: 10^5      count: 10       elapsed: 2.39908790588  type: torch.FloatTensor\nsin:            size: 10^2      count: 10000    elapsed: 1.44210910797  type: torch.FloatTensor\nsin:            size: 10^3      count: 1000     elapsed: 1.54422807693  type: torch.FloatTensor\nsin:            size: 10^4      count: 100      elapsed: 2.40846395493  type: torch.FloatTensor\nsin:            size: 10^5      count: 10       elapsed: 2.29448604584  type: torch.FloatTensor\nexp:            size: 10^2      count: 10000    elapsed: 1.50313210487  type: torch.FloatTensor\nexp:            size: 10^3      count: 1000     elapsed: 1.5239470005   type: torch.FloatTensor\nexp:            size: 10^4      count: 100      elapsed: 2.39896297455  type: torch.FloatTensor\nexp:            size: 10^5      count: 10       elapsed: 2.31458091736  type: torch.FloatTensor\nlog:            size: 10^2      count: 10000    elapsed: 1.65806102753  type: torch.FloatTensor\nlog:            size: 10^3      count: 1000     elapsed: 1.69567799568  type: torch.FloatTensor\nlog:            size: 10^4      count: 100      elapsed: 2.56792616844  type: torch.FloatTensor\nlog:            size: 10^5      count: 10       elapsed: 2.47661995888  type: torch.FloatTensor\n\ncos:            size: 10^2      count: 10000    elapsed: 29.2463679314  type: torch.DoubleTensor\ncos:            size: 10^3      count: 1000     elapsed: 29.1897990704  type: torch.DoubleTensor\ncos:            size: 10^4      count: 100      elapsed: 30.8953261375  type: torch.DoubleTensor\ncos:            size: 10^5      count: 10       elapsed: 30.8482341766  type: torch.DoubleTensor\nsin:            size: 10^2      count: 10000    elapsed: 28.2373690605  type: torch.DoubleTensor\nsin:            size: 10^3      count: 1000     elapsed: 28.8227479458  type: torch.DoubleTensor\nsin:            size: 10^4      count: 100      elapsed: 29.8306491375  type: torch.DoubleTensor\nsin:            size: 10^5      count: 10       elapsed: 29.7849609852  type: torch.DoubleTensor\nexp:            size: 10^2      count: 10000    elapsed: 21.3683919907  type: torch.DoubleTensor\nexp:            size: 10^3      count: 1000     elapsed: 22.0100431442  type: torch.DoubleTensor\nexp:            size: 10^4      count: 100      elapsed: 22.9923679829  type: torch.DoubleTensor\nexp:            size: 10^5      count: 10       elapsed: 22.9505109787  type: torch.DoubleTensor\nlog:            size: 10^2      count: 10000    elapsed: 29.4384469986  type: torch.DoubleTensor\nlog:            size: 10^3      count: 1000     elapsed: 30.061797142   type: torch.DoubleTensor\nlog:            size: 10^4      count: 100      elapsed: 31.0885539055  type: torch.DoubleTensor\nlog:            size: 10^5      count: 10       elapsed: 31.0436210632  type: torch.DoubleTensor\n\nThis branch\ncos:            size: 10^2      count: 10000    elapsed: 1.54843401909  type: torch.FloatTensor\ncos:            size: 10^3      count: 1000     elapsed: 1.6413397789   type: torch.FloatTensor\ncos:            size: 10^4      count: 100      elapsed: 2.52125191689  type: torch.FloatTensor\ncos:            size: 10^5      count: 10       elapsed: 2.41325116158  type: torch.FloatTensor\nsin:            size: 10^2      count: 10000    elapsed: 1.44992494583  type: torch.FloatTensor\nsin:            size: 10^3      count: 1000     elapsed: 1.54990410805  type: torch.FloatTensor\nsin:            size: 10^4      count: 100      elapsed: 2.40798306465  type: torch.FloatTensor\nsin:            size: 10^5      count: 10       elapsed: 2.30475592613  type: torch.FloatTensor\nexp:            size: 10^2      count: 10000    elapsed: 1.50176095963  type: torch.FloatTensor\nexp:            size: 10^3      count: 1000     elapsed: 1.52033686638  type: torch.FloatTensor\nexp:            size: 10^4      count: 100      elapsed: 2.40323591232  type: torch.FloatTensor\nexp:            size: 10^5      count: 10       elapsed: 2.31940412521  type: torch.FloatTensor\nlog:            size: 10^2      count: 10000    elapsed: 1.63235998154  type: torch.FloatTensor\nlog:            size: 10^3      count: 1000     elapsed: 1.67921590805  type: torch.FloatTensor\nlog:            size: 10^4      count: 100      elapsed: 2.55977487564  type: torch.FloatTensor\nlog:            size: 10^5      count: 10       elapsed: 2.46202898026  type: torch.FloatTensor\n\ncos:            size: 10^2      count: 10000    elapsed: 30.0235459805  type: torch.DoubleTensor\ncos:            size: 10^3      count: 1000     elapsed: 31.4737381935  type: torch.DoubleTensor\ncos:            size: 10^4      count: 100      elapsed: 32.1326041222  type: torch.DoubleTensor\ncos:            size: 10^5      count: 10       elapsed: 31.6777579784  type: torch.DoubleTensor\nsin:            size: 10^2      count: 10000    elapsed: 29.1807699203  type: torch.DoubleTensor\nsin:            size: 10^3      count: 1000     elapsed: 29.6215879917  type: torch.DoubleTensor\nsin:            size: 10^4      count: 100      elapsed: 30.6181018353  type: torch.DoubleTensor\nsin:            size: 10^5      count: 10       elapsed: 30.2948379517  type: torch.DoubleTensor\nexp:            size: 10^2      count: 10000    elapsed: 22.4347589016  type: torch.DoubleTensor\nexp:            size: 10^3      count: 1000     elapsed: 23.307060957   type: torch.DoubleTensor\nexp:            size: 10^4      count: 100      elapsed: 24.4995651245  type: torch.DoubleTensor\nexp:            size: 10^5      count: 10       elapsed: 24.0824759007  type: torch.DoubleTensor\nlog:            size: 10^2      count: 10000    elapsed: 31.2646110058  type: torch.DoubleTensor\nlog:            size: 10^3      count: 1000     elapsed: 32.2329819202  type: torch.DoubleTensor\nlog:            size: 10^4      count: 100      elapsed: 33.4655709267  type: torch.DoubleTensor\nlog:            size: 10^5      count: 10       elapsed: 33.0231490135  type: torch.DoubleTensor\n\nAbs Master\nabs:            size: 10^2      count: 10000    elapsed: 4.18545389175  type: torch.FloatTensor\nabs:            size: 10^3      count: 1000     elapsed: 4.30929303169  type: torch.FloatTensor\nabs:            size: 10^4      count: 100      elapsed: 5.18289899826  type: torch.FloatTensor\nabs:            size: 10^5      count: 10       elapsed: 5.12413811684  type: torch.FloatTensor\nabs:            size: 10^2      count: 10000    elapsed: 4.21678590775  type: torch.DoubleTensor\nabs:            size: 10^3      count: 1000     elapsed: 5.08613801003  type: torch.DoubleTensor\nabs:            size: 10^4      count: 100      elapsed: 5.99231100082  type: torch.DoubleTensor\nabs:            size: 10^5      count: 10       elapsed: 5.95689797401  type: torch.DoubleTensor\nabs:            size: 10^2      count: 10000    elapsed: 4.16819906235  type: torch.IntTensor\nabs:            size: 10^3      count: 1000     elapsed: 4.22109985352  type: torch.IntTensor\nabs:            size: 10^4      count: 100      elapsed: 5.09025883675  type: torch.IntTensor\nabs:            size: 10^5      count: 10       elapsed: 5.03382301331  type: torch.IntTensor\nabs:            size: 10^2      count: 10000    elapsed: 4.22057914734  type: torch.LongTensor\nabs:            size: 10^3      count: 1000     elapsed: 4.9265730381   type: torch.LongTensor\nabs:            size: 10^4      count: 100      elapsed: 5.84256696701  type: torch.LongTensor\nabs:            size: 10^5      count: 10       elapsed: 5.93304586411  type: torch.LongTensor\nabs:            size: 10^2      count: 10000    elapsed: 4.17617201805  type: torch.ShortTensor\nabs:            size: 10^3      count: 1000     elapsed: 4.2090690136   type: torch.ShortTensor\nabs:            size: 10^4      count: 100      elapsed: 4.49850416183  type: torch.ShortTensor\nabs:            size: 10^5      count: 10       elapsed: 4.626557827    type: torch.ShortTensor\n\nAbs This branch\nabs:            size: 10^2      count: 10000    elapsed: 0.448744058609 type: torch.FloatTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.421611070633 type: torch.FloatTensor\nabs:            size: 10^4      count: 100      elapsed: 1.52210712433  type: torch.FloatTensor\nabs:            size: 10^5      count: 10       elapsed: 1.49177908897  type: torch.FloatTensor\nabs:            size: 10^2      count: 10000    elapsed: 0.844108104706 type: torch.DoubleTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.820927858353 type: torch.DoubleTensor\nabs:            size: 10^4      count: 100      elapsed: 3.00412607193  type: torch.DoubleTensor\nabs:            size: 10^5      count: 10       elapsed: 2.97248101234  type: torch.DoubleTensor\nabs:            size: 10^2      count: 10000    elapsed: 0.445827960968 type: torch.IntTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.420156955719 type: torch.IntTensor\nabs:            size: 10^4      count: 100      elapsed: 1.51804709435  type: torch.IntTensor\nabs:            size: 10^5      count: 10       elapsed: 1.52535510063  type: torch.IntTensor\nabs:            size: 10^2      count: 10000    elapsed: 0.844727993011 type: torch.LongTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.818938016891 type: torch.LongTensor\nabs:            size: 10^4      count: 100      elapsed: 3.02740287781  type: torch.LongTensor\nabs:            size: 10^5      count: 10       elapsed: 2.99336504936  type: torch.LongTensor\nabs:            size: 10^2      count: 10000    elapsed: 0.251252174377 type: torch.ShortTensor\nabs:            size: 10^3      count: 1000     elapsed: 0.217294931412 type: torch.ShortTensor\nabs:            size: 10^4      count: 100      elapsed: 0.330620765686 type: torch.ShortTensor\nabs:            size: 10^5      count: 10       elapsed: 0.745229005814 type: torch.ShortTensor", "body": "Measured perf using [this script](https://paste.fedoraproject.org/paste/yJiXU3AZGHuyjTVRWlj5OQ). The 1GB benchmarks for doubles are still running, but the 100MB benchmarks indicate a slight perf regression using this branch presumably because of the extra store and load within the non-avx2 implementation of vec<float> and vec<double>.\r\n\r\nEDIT: Added timings for double\r\nEDIT: Added support for abs for all types\r\n\r\nSingle core\r\n\r\nMaster\r\n\r\n```\r\ncos:            size: 10^2      count: 10000    elapsed: 1.55431699753  type: torch.FloatTensor\r\ncos:            size: 10^3      count: 1000     elapsed: 1.62953400612  type: torch.FloatTensor\r\ncos:            size: 10^4      count: 100      elapsed: 2.4978890419   type: torch.FloatTensor\r\ncos:            size: 10^5      count: 10       elapsed: 2.39908790588  type: torch.FloatTensor\r\nsin:            size: 10^2      count: 10000    elapsed: 1.44210910797  type: torch.FloatTensor\r\nsin:            size: 10^3      count: 1000     elapsed: 1.54422807693  type: torch.FloatTensor\r\nsin:            size: 10^4      count: 100      elapsed: 2.40846395493  type: torch.FloatTensor\r\nsin:            size: 10^5      count: 10       elapsed: 2.29448604584  type: torch.FloatTensor\r\nexp:            size: 10^2      count: 10000    elapsed: 1.50313210487  type: torch.FloatTensor\r\nexp:            size: 10^3      count: 1000     elapsed: 1.5239470005   type: torch.FloatTensor\r\nexp:            size: 10^4      count: 100      elapsed: 2.39896297455  type: torch.FloatTensor\r\nexp:            size: 10^5      count: 10       elapsed: 2.31458091736  type: torch.FloatTensor\r\nlog:            size: 10^2      count: 10000    elapsed: 1.65806102753  type: torch.FloatTensor\r\nlog:            size: 10^3      count: 1000     elapsed: 1.69567799568  type: torch.FloatTensor\r\nlog:            size: 10^4      count: 100      elapsed: 2.56792616844  type: torch.FloatTensor\r\nlog:            size: 10^5      count: 10       elapsed: 2.47661995888  type: torch.FloatTensor\r\n\r\ncos:            size: 10^2      count: 10000    elapsed: 29.2463679314  type: torch.DoubleTensor\r\ncos:            size: 10^3      count: 1000     elapsed: 29.1897990704  type: torch.DoubleTensor\r\ncos:            size: 10^4      count: 100      elapsed: 30.8953261375  type: torch.DoubleTensor\r\ncos:            size: 10^5      count: 10       elapsed: 30.8482341766  type: torch.DoubleTensor\r\nsin:            size: 10^2      count: 10000    elapsed: 28.2373690605  type: torch.DoubleTensor\r\nsin:            size: 10^3      count: 1000     elapsed: 28.8227479458  type: torch.DoubleTensor\r\nsin:            size: 10^4      count: 100      elapsed: 29.8306491375  type: torch.DoubleTensor\r\nsin:            size: 10^5      count: 10       elapsed: 29.7849609852  type: torch.DoubleTensor\r\nexp:            size: 10^2      count: 10000    elapsed: 21.3683919907  type: torch.DoubleTensor\r\nexp:            size: 10^3      count: 1000     elapsed: 22.0100431442  type: torch.DoubleTensor\r\nexp:            size: 10^4      count: 100      elapsed: 22.9923679829  type: torch.DoubleTensor\r\nexp:            size: 10^5      count: 10       elapsed: 22.9505109787  type: torch.DoubleTensor\r\nlog:            size: 10^2      count: 10000    elapsed: 29.4384469986  type: torch.DoubleTensor\r\nlog:            size: 10^3      count: 1000     elapsed: 30.061797142   type: torch.DoubleTensor\r\nlog:            size: 10^4      count: 100      elapsed: 31.0885539055  type: torch.DoubleTensor\r\nlog:            size: 10^5      count: 10       elapsed: 31.0436210632  type: torch.DoubleTensor\r\n```\r\n\r\nThis branch\r\n\r\n```\r\ncos:            size: 10^2      count: 10000    elapsed: 1.54843401909  type: torch.FloatTensor\r\ncos:            size: 10^3      count: 1000     elapsed: 1.6413397789   type: torch.FloatTensor\r\ncos:            size: 10^4      count: 100      elapsed: 2.52125191689  type: torch.FloatTensor\r\ncos:            size: 10^5      count: 10       elapsed: 2.41325116158  type: torch.FloatTensor\r\nsin:            size: 10^2      count: 10000    elapsed: 1.44992494583  type: torch.FloatTensor\r\nsin:            size: 10^3      count: 1000     elapsed: 1.54990410805  type: torch.FloatTensor\r\nsin:            size: 10^4      count: 100      elapsed: 2.40798306465  type: torch.FloatTensor\r\nsin:            size: 10^5      count: 10       elapsed: 2.30475592613  type: torch.FloatTensor\r\nexp:            size: 10^2      count: 10000    elapsed: 1.50176095963  type: torch.FloatTensor\r\nexp:            size: 10^3      count: 1000     elapsed: 1.52033686638  type: torch.FloatTensor\r\nexp:            size: 10^4      count: 100      elapsed: 2.40323591232  type: torch.FloatTensor\r\nexp:            size: 10^5      count: 10       elapsed: 2.31940412521  type: torch.FloatTensor\r\nlog:            size: 10^2      count: 10000    elapsed: 1.63235998154  type: torch.FloatTensor\r\nlog:            size: 10^3      count: 1000     elapsed: 1.67921590805  type: torch.FloatTensor\r\nlog:            size: 10^4      count: 100      elapsed: 2.55977487564  type: torch.FloatTensor\r\nlog:            size: 10^5      count: 10       elapsed: 2.46202898026  type: torch.FloatTensor\r\n\r\ncos:            size: 10^2      count: 10000    elapsed: 30.0235459805  type: torch.DoubleTensor\r\ncos:            size: 10^3      count: 1000     elapsed: 31.4737381935  type: torch.DoubleTensor\r\ncos:            size: 10^4      count: 100      elapsed: 32.1326041222  type: torch.DoubleTensor\r\ncos:            size: 10^5      count: 10       elapsed: 31.6777579784  type: torch.DoubleTensor\r\nsin:            size: 10^2      count: 10000    elapsed: 29.1807699203  type: torch.DoubleTensor\r\nsin:            size: 10^3      count: 1000     elapsed: 29.6215879917  type: torch.DoubleTensor\r\nsin:            size: 10^4      count: 100      elapsed: 30.6181018353  type: torch.DoubleTensor\r\nsin:            size: 10^5      count: 10       elapsed: 30.2948379517  type: torch.DoubleTensor\r\nexp:            size: 10^2      count: 10000    elapsed: 22.4347589016  type: torch.DoubleTensor\r\nexp:            size: 10^3      count: 1000     elapsed: 23.307060957   type: torch.DoubleTensor\r\nexp:            size: 10^4      count: 100      elapsed: 24.4995651245  type: torch.DoubleTensor\r\nexp:            size: 10^5      count: 10       elapsed: 24.0824759007  type: torch.DoubleTensor\r\nlog:            size: 10^2      count: 10000    elapsed: 31.2646110058  type: torch.DoubleTensor\r\nlog:            size: 10^3      count: 1000     elapsed: 32.2329819202  type: torch.DoubleTensor\r\nlog:            size: 10^4      count: 100      elapsed: 33.4655709267  type: torch.DoubleTensor\r\nlog:            size: 10^5      count: 10       elapsed: 33.0231490135  type: torch.DoubleTensor\r\n```\r\n\r\nAbs Master\r\n```\r\nabs:            size: 10^2      count: 10000    elapsed: 4.18545389175  type: torch.FloatTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 4.30929303169  type: torch.FloatTensor\r\nabs:            size: 10^4      count: 100      elapsed: 5.18289899826  type: torch.FloatTensor\r\nabs:            size: 10^5      count: 10       elapsed: 5.12413811684  type: torch.FloatTensor\r\nabs:            size: 10^2      count: 10000    elapsed: 4.21678590775  type: torch.DoubleTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 5.08613801003  type: torch.DoubleTensor\r\nabs:            size: 10^4      count: 100      elapsed: 5.99231100082  type: torch.DoubleTensor\r\nabs:            size: 10^5      count: 10       elapsed: 5.95689797401  type: torch.DoubleTensor\r\nabs:            size: 10^2      count: 10000    elapsed: 4.16819906235  type: torch.IntTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 4.22109985352  type: torch.IntTensor\r\nabs:            size: 10^4      count: 100      elapsed: 5.09025883675  type: torch.IntTensor\r\nabs:            size: 10^5      count: 10       elapsed: 5.03382301331  type: torch.IntTensor\r\nabs:            size: 10^2      count: 10000    elapsed: 4.22057914734  type: torch.LongTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 4.9265730381   type: torch.LongTensor\r\nabs:            size: 10^4      count: 100      elapsed: 5.84256696701  type: torch.LongTensor\r\nabs:            size: 10^5      count: 10       elapsed: 5.93304586411  type: torch.LongTensor\r\nabs:            size: 10^2      count: 10000    elapsed: 4.17617201805  type: torch.ShortTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 4.2090690136   type: torch.ShortTensor\r\nabs:            size: 10^4      count: 100      elapsed: 4.49850416183  type: torch.ShortTensor\r\nabs:            size: 10^5      count: 10       elapsed: 4.626557827    type: torch.ShortTensor\r\n```\r\n\r\nAbs This branch\r\n```\r\nabs:            size: 10^2      count: 10000    elapsed: 0.448744058609 type: torch.FloatTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 0.421611070633 type: torch.FloatTensor\r\nabs:            size: 10^4      count: 100      elapsed: 1.52210712433  type: torch.FloatTensor\r\nabs:            size: 10^5      count: 10       elapsed: 1.49177908897  type: torch.FloatTensor\r\nabs:            size: 10^2      count: 10000    elapsed: 0.844108104706 type: torch.DoubleTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 0.820927858353 type: torch.DoubleTensor\r\nabs:            size: 10^4      count: 100      elapsed: 3.00412607193  type: torch.DoubleTensor\r\nabs:            size: 10^5      count: 10       elapsed: 2.97248101234  type: torch.DoubleTensor\r\nabs:            size: 10^2      count: 10000    elapsed: 0.445827960968 type: torch.IntTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 0.420156955719 type: torch.IntTensor\r\nabs:            size: 10^4      count: 100      elapsed: 1.51804709435  type: torch.IntTensor\r\nabs:            size: 10^5      count: 10       elapsed: 1.52535510063  type: torch.IntTensor\r\nabs:            size: 10^2      count: 10000    elapsed: 0.844727993011 type: torch.LongTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 0.818938016891 type: torch.LongTensor\r\nabs:            size: 10^4      count: 100      elapsed: 3.02740287781  type: torch.LongTensor\r\nabs:            size: 10^5      count: 10       elapsed: 2.99336504936  type: torch.LongTensor\r\nabs:            size: 10^2      count: 10000    elapsed: 0.251252174377 type: torch.ShortTensor\r\nabs:            size: 10^3      count: 1000     elapsed: 0.217294931412 type: torch.ShortTensor\r\nabs:            size: 10^4      count: 100      elapsed: 0.330620765686 type: torch.ShortTensor\r\nabs:            size: 10^5      count: 10       elapsed: 0.745229005814 type: torch.ShortTensor\r\n```\r\n"}
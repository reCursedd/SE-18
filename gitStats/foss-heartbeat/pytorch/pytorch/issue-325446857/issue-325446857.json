{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7770", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7770/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7770/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7770/events", "html_url": "https://github.com/pytorch/pytorch/issues/7770", "id": 325446857, "node_id": "MDU6SXNzdWUzMjU0NDY4NTc=", "number": 7770, "title": "Cannot compile Caffe2 on Mac", "user": {"login": "peastman", "id": 4379786, "node_id": "MDQ6VXNlcjQzNzk3ODY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4379786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peastman", "html_url": "https://github.com/peastman", "followers_url": "https://api.github.com/users/peastman/followers", "following_url": "https://api.github.com/users/peastman/following{/other_user}", "gists_url": "https://api.github.com/users/peastman/gists{/gist_id}", "starred_url": "https://api.github.com/users/peastman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peastman/subscriptions", "organizations_url": "https://api.github.com/users/peastman/orgs", "repos_url": "https://api.github.com/users/peastman/repos", "events_url": "https://api.github.com/users/peastman/events{/privacy}", "received_events_url": "https://api.github.com/users/peastman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 424131847, "node_id": "MDU6TGFiZWw0MjQxMzE4NDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bug", "name": "bug", "color": "b60205", "default": true}, {"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-05-22T20:16:19Z", "updated_at": "2018-05-31T18:34:42Z", "closed_at": "2018-05-31T18:34:41Z", "author_association": "NONE", "body_html": "<p>I am trying to compile Caffe2 from source on macOS, but no matter what I try it fails with the error</p>\n<pre><code>/Users/peastman/pytorch/caffe2/core/flags.h:59:10: fatal error: \n      'gflags/gflags.h' file not found\n#include &lt;gflags/gflags.h&gt;\n</code></pre>\n<p>I installed gflags with brew, as described in the instructions.  CMake claims to have found it:</p>\n<pre><code>-- Caffe2: Found gflags with new-style gflags target.\n</code></pre>\n<p>and inspecting the cache confirms that:</p>\n<pre><code>$ grep gflags CMakeCache.txt \ncaffe2_LIB_DEPENDS:STATIC=general;gflags;general;glog::glog;general;nomnigraph;general;nnpack;general;cpuinfo;\n//The directory containing a CMake configuration file for gflags.\ngflags_DIR:PATH=/usr/local/lib/cmake/gflags\n</code></pre>\n<p>I confirmed that the directory it selected corresponds to the brew version of gflags:</p>\n<pre><code>$ ls -l /usr/local/lib/cmake/gflags\nlrwxr-xr-x  1 peastman  admin  42 May 22 13:04 /usr/local/lib/cmake/gflags -&gt; ../../Cellar/gflags/2.2.1/lib/cmake/gflags\n</code></pre>\n<p>and also that the headers really are there:</p>\n<pre><code>$ ls /usr/local/Cellar/gflags/2.2.1/include/gflags/\ngflags.h\t\tgflags_declare.h\ngflags_completions.h\tgflags_gflags.h\n</code></pre>\n<p>Yet somehow the compiler still fails to find it.</p>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: Caffe2</li>\n<li>How you installed PyTorch (conda, pip, source): source</li>\n<li>Build command you used (if compiling from source): <code>make install</code></li>\n<li>OS: macOS 10.13.4</li>\n<li>PyTorch version: Latest from repository</li>\n<li>Python version: 3.6.1</li>\n<li>CUDA/cuDNN version: N/A</li>\n<li>GPU models and configuration: N/A</li>\n<li>GCC version (if compiling from source): Apple LLVM version 9.1.0 (clang-902.0.39.1)</li>\n<li>CMake version: 3.11.2</li>\n<li>Versions of any other relevant libraries: gflags 2.2.1</li>\n</ul>", "body_text": "I am trying to compile Caffe2 from source on macOS, but no matter what I try it fails with the error\n/Users/peastman/pytorch/caffe2/core/flags.h:59:10: fatal error: \n      'gflags/gflags.h' file not found\n#include <gflags/gflags.h>\n\nI installed gflags with brew, as described in the instructions.  CMake claims to have found it:\n-- Caffe2: Found gflags with new-style gflags target.\n\nand inspecting the cache confirms that:\n$ grep gflags CMakeCache.txt \ncaffe2_LIB_DEPENDS:STATIC=general;gflags;general;glog::glog;general;nomnigraph;general;nnpack;general;cpuinfo;\n//The directory containing a CMake configuration file for gflags.\ngflags_DIR:PATH=/usr/local/lib/cmake/gflags\n\nI confirmed that the directory it selected corresponds to the brew version of gflags:\n$ ls -l /usr/local/lib/cmake/gflags\nlrwxr-xr-x  1 peastman  admin  42 May 22 13:04 /usr/local/lib/cmake/gflags -> ../../Cellar/gflags/2.2.1/lib/cmake/gflags\n\nand also that the headers really are there:\n$ ls /usr/local/Cellar/gflags/2.2.1/include/gflags/\ngflags.h\t\tgflags_declare.h\ngflags_completions.h\tgflags_gflags.h\n\nYet somehow the compiler still fails to find it.\nSystem Info\n\nPyTorch or Caffe2: Caffe2\nHow you installed PyTorch (conda, pip, source): source\nBuild command you used (if compiling from source): make install\nOS: macOS 10.13.4\nPyTorch version: Latest from repository\nPython version: 3.6.1\nCUDA/cuDNN version: N/A\nGPU models and configuration: N/A\nGCC version (if compiling from source): Apple LLVM version 9.1.0 (clang-902.0.39.1)\nCMake version: 3.11.2\nVersions of any other relevant libraries: gflags 2.2.1", "body": "I am trying to compile Caffe2 from source on macOS, but no matter what I try it fails with the error\r\n\r\n```\r\n/Users/peastman/pytorch/caffe2/core/flags.h:59:10: fatal error: \r\n      'gflags/gflags.h' file not found\r\n#include <gflags/gflags.h>\r\n```\r\n\r\nI installed gflags with brew, as described in the instructions.  CMake claims to have found it:\r\n\r\n```\r\n-- Caffe2: Found gflags with new-style gflags target.\r\n```\r\n\r\nand inspecting the cache confirms that:\r\n\r\n```\r\n$ grep gflags CMakeCache.txt \r\ncaffe2_LIB_DEPENDS:STATIC=general;gflags;general;glog::glog;general;nomnigraph;general;nnpack;general;cpuinfo;\r\n//The directory containing a CMake configuration file for gflags.\r\ngflags_DIR:PATH=/usr/local/lib/cmake/gflags\r\n```\r\n\r\nI confirmed that the directory it selected corresponds to the brew version of gflags:\r\n\r\n```\r\n$ ls -l /usr/local/lib/cmake/gflags\r\nlrwxr-xr-x  1 peastman  admin  42 May 22 13:04 /usr/local/lib/cmake/gflags -> ../../Cellar/gflags/2.2.1/lib/cmake/gflags\r\n```\r\n\r\nand also that the headers really are there:\r\n\r\n```\r\n$ ls /usr/local/Cellar/gflags/2.2.1/include/gflags/\r\ngflags.h\t\tgflags_declare.h\r\ngflags_completions.h\tgflags_gflags.h\r\n```\r\n\r\nYet somehow the compiler still fails to find it.\r\n\r\n## System Info\r\n\r\n- PyTorch or Caffe2: Caffe2\r\n- How you installed PyTorch (conda, pip, source): source\r\n- Build command you used (if compiling from source): `make install`\r\n- OS: macOS 10.13.4\r\n- PyTorch version: Latest from repository\r\n- Python version: 3.6.1\r\n- CUDA/cuDNN version: N/A\r\n- GPU models and configuration: N/A\r\n- GCC version (if compiling from source): Apple LLVM version 9.1.0 (clang-902.0.39.1)\r\n- CMake version: 3.11.2\r\n- Versions of any other relevant libraries: gflags 2.2.1\r\n"}
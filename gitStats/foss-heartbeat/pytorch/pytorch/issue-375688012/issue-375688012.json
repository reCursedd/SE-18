{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13335", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13335/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13335/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13335/events", "html_url": "https://github.com/pytorch/pytorch/issues/13335", "id": 375688012, "node_id": "MDU6SXNzdWUzNzU2ODgwMTI=", "number": 13335, "title": "Onnx export bugs and warnings", "user": {"login": "vince62s", "id": 15141326, "node_id": "MDQ6VXNlcjE1MTQxMzI2", "avatar_url": "https://avatars3.githubusercontent.com/u/15141326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vince62s", "html_url": "https://github.com/vince62s", "followers_url": "https://api.github.com/users/vince62s/followers", "following_url": "https://api.github.com/users/vince62s/following{/other_user}", "gists_url": "https://api.github.com/users/vince62s/gists{/gist_id}", "starred_url": "https://api.github.com/users/vince62s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vince62s/subscriptions", "organizations_url": "https://api.github.com/users/vince62s/orgs", "repos_url": "https://api.github.com/users/vince62s/repos", "events_url": "https://api.github.com/users/vince62s/events{/privacy}", "received_events_url": "https://api.github.com/users/vince62s/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 693805995, "node_id": "MDU6TGFiZWw2OTM4MDU5OTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/onnx", "name": "onnx", "color": "e99695", "default": false}], "state": "open", "locked": false, "assignee": {"login": "houseroad", "id": 30275821, "node_id": "MDQ6VXNlcjMwMjc1ODIx", "avatar_url": "https://avatars0.githubusercontent.com/u/30275821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houseroad", "html_url": "https://github.com/houseroad", "followers_url": "https://api.github.com/users/houseroad/followers", "following_url": "https://api.github.com/users/houseroad/following{/other_user}", "gists_url": "https://api.github.com/users/houseroad/gists{/gist_id}", "starred_url": "https://api.github.com/users/houseroad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houseroad/subscriptions", "organizations_url": "https://api.github.com/users/houseroad/orgs", "repos_url": "https://api.github.com/users/houseroad/repos", "events_url": "https://api.github.com/users/houseroad/events{/privacy}", "received_events_url": "https://api.github.com/users/houseroad/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "houseroad", "id": 30275821, "node_id": "MDQ6VXNlcjMwMjc1ODIx", "avatar_url": "https://avatars0.githubusercontent.com/u/30275821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houseroad", "html_url": "https://github.com/houseroad", "followers_url": "https://api.github.com/users/houseroad/followers", "following_url": "https://api.github.com/users/houseroad/following{/other_user}", "gists_url": "https://api.github.com/users/houseroad/gists{/gist_id}", "starred_url": "https://api.github.com/users/houseroad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houseroad/subscriptions", "organizations_url": "https://api.github.com/users/houseroad/orgs", "repos_url": "https://api.github.com/users/houseroad/repos", "events_url": "https://api.github.com/users/houseroad/events{/privacy}", "received_events_url": "https://api.github.com/users/houseroad/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-10-30T20:52:06Z", "updated_at": "2018-10-31T18:04:18Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>CUDA9.0 / Pytorch 1.0nightly20181030<br>\nAccording to Pytorch doc, \"split\" is a supported operator for onnx export.<br>\nSeems to trigger a runtime error (see at the very bottom)</p>\n<p>Some other operators trigger warnings but one says to report a bug \"ListUnpack\"</p>\n<p>Cheers.</p>\n<p>/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator split because torch.onnx.symbolic.split does not exist<br>\n.format(op_name, op_name))<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:539: UserWarning: ONNX export failed on primitive operator ListUnpack; please report a bug<br>\nwarnings.warn(\"ONNX export failed on primitive operator {}; please report a bug\".format(op_name))<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator std because torch.onnx.symbolic.std does not exist<br>\n.format(op_name, op_name))<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator expand_as because torch.onnx.symbolic.expand_as does not exist<br>\n.format(op_name, op_name))<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator masked_fill because torch.onnx.symbolic.masked_fill does not exist<br>\n.format(op_name, op_name))<br>\nTraceback (most recent call last):<br>\nFile \"pltrdy_trt.py\", line 87, in <br>\ntorch.onnx.export(model, (dummy_input, dummy_tgt, dummy_lengths ), 'model.onnx')<br>\nFile \"/usr/local/lib/python3.5/dist-packages/torch/onnx/<strong>init</strong>.py\", line 27, in export<br>\nreturn utils.export(*args, **kwargs)<br>\nFile \"/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py\", line 104, in export<br>\noperator_export_type=operator_export_type)<br>\nFile \"/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py\", line 286, in _export<br>\nproto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)<br>\n<strong>RuntimeError: ONNX export failed: Couldn't export operator aten::split</strong></p>\n<p>Defined at:<br>\n<strong>/usr/local/lib/python3.5/dist-packages/torch/tensor.py(293): split</strong><br>\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/modules/util_class.py(41): forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): <strong>call</strong><br>\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/modules/embeddings.py(203): forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): <strong>call</strong><br>\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/encoders/transformer.py(102): forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): <strong>call</strong><br>\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/models/model.py(44): forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): <strong>call</strong><br>\n/usr/local/lib/python3.5/dist-packages/torch/jit/<strong>init</strong>.py(200): forward<br>\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(477): <strong>call</strong><br>\n/usr/local/lib/python3.5/dist-packages/torch/jit/<strong>init</strong>.py(169): get_trace_graph<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(223): _model_to_graph<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(280): _export<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(104): export<br>\n/usr/local/lib/python3.5/dist-packages/torch/onnx/<strong>init</strong>.py(27): export</p>", "body_text": "CUDA9.0 / Pytorch 1.0nightly20181030\nAccording to Pytorch doc, \"split\" is a supported operator for onnx export.\nSeems to trigger a runtime error (see at the very bottom)\nSome other operators trigger warnings but one says to report a bug \"ListUnpack\"\nCheers.\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator split because torch.onnx.symbolic.split does not exist\n.format(op_name, op_name))\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:539: UserWarning: ONNX export failed on primitive operator ListUnpack; please report a bug\nwarnings.warn(\"ONNX export failed on primitive operator {}; please report a bug\".format(op_name))\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator std because torch.onnx.symbolic.std does not exist\n.format(op_name, op_name))\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator expand_as because torch.onnx.symbolic.expand_as does not exist\n.format(op_name, op_name))\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator masked_fill because torch.onnx.symbolic.masked_fill does not exist\n.format(op_name, op_name))\nTraceback (most recent call last):\nFile \"pltrdy_trt.py\", line 87, in \ntorch.onnx.export(model, (dummy_input, dummy_tgt, dummy_lengths ), 'model.onnx')\nFile \"/usr/local/lib/python3.5/dist-packages/torch/onnx/init.py\", line 27, in export\nreturn utils.export(*args, **kwargs)\nFile \"/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py\", line 104, in export\noperator_export_type=operator_export_type)\nFile \"/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py\", line 286, in _export\nproto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)\nRuntimeError: ONNX export failed: Couldn't export operator aten::split\nDefined at:\n/usr/local/lib/python3.5/dist-packages/torch/tensor.py(293): split\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/modules/util_class.py(41): forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): call\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/modules/embeddings.py(203): forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): call\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/encoders/transformer.py(102): forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): call\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/models/model.py(44): forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): call\n/usr/local/lib/python3.5/dist-packages/torch/jit/init.py(200): forward\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(477): call\n/usr/local/lib/python3.5/dist-packages/torch/jit/init.py(169): get_trace_graph\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(223): _model_to_graph\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(280): _export\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(104): export\n/usr/local/lib/python3.5/dist-packages/torch/onnx/init.py(27): export", "body": "CUDA9.0 / Pytorch 1.0nightly20181030\r\nAccording to Pytorch doc, \"split\" is a supported operator for onnx export.\r\nSeems to trigger a runtime error (see at the very bottom)\r\n\r\nSome other operators trigger warnings but one says to report a bug \"ListUnpack\"\r\n\r\nCheers.\r\n\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator split because torch.onnx.symbolic.split does not exist\r\n  .format(op_name, op_name))\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:539: UserWarning: ONNX export failed on primitive operator ListUnpack; please report a bug\r\n  warnings.warn(\"ONNX export failed on primitive operator {}; please report a bug\".format(op_name))\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator std because torch.onnx.symbolic.std does not exist\r\n  .format(op_name, op_name))\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator expand_as because torch.onnx.symbolic.expand_as does not exist\r\n  .format(op_name, op_name))\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator masked_fill because torch.onnx.symbolic.masked_fill does not exist\r\n  .format(op_name, op_name))\r\nTraceback (most recent call last):\r\n  File \"pltrdy_trt.py\", line 87, in <module>\r\n    torch.onnx.export(model, (dummy_input, dummy_tgt, dummy_lengths ), 'model.onnx')\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/onnx/__init__.py\", line 27, in export\r\n    return utils.export(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py\", line 104, in export\r\n    operator_export_type=operator_export_type)\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py\", line 286, in _export\r\n    proto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)\r\n**RuntimeError: ONNX export failed: Couldn't export operator aten::split**\r\n\r\nDefined at:\r\n**/usr/local/lib/python3.5/dist-packages/torch/tensor.py(293): split**\r\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/modules/util_class.py(41): forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): __call__\r\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/modules/embeddings.py(203): forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): __call__\r\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/encoders/transformer.py(102): forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): __call__\r\n/nlp_data/MT/pytorchwork/Recipes/toy-enfr/onmt/models/model.py(44): forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(465): _slow_forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(475): __call__\r\n/usr/local/lib/python3.5/dist-packages/torch/jit/__init__.py(200): forward\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py(477): __call__\r\n/usr/local/lib/python3.5/dist-packages/torch/jit/__init__.py(169): get_trace_graph\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(223): _model_to_graph\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(280): _export\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/utils.py(104): export\r\n/usr/local/lib/python3.5/dist-packages/torch/onnx/__init__.py(27): export\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/409413294", "html_url": "https://github.com/pytorch/pytorch/pull/9960#issuecomment-409413294", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/9960", "id": 409413294, "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTQxMzI5NA==", "user": {"login": "rfejgin", "id": 345348, "node_id": "MDQ6VXNlcjM0NTM0OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/345348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rfejgin", "html_url": "https://github.com/rfejgin", "followers_url": "https://api.github.com/users/rfejgin/followers", "following_url": "https://api.github.com/users/rfejgin/following{/other_user}", "gists_url": "https://api.github.com/users/rfejgin/gists{/gist_id}", "starred_url": "https://api.github.com/users/rfejgin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rfejgin/subscriptions", "organizations_url": "https://api.github.com/users/rfejgin/orgs", "repos_url": "https://api.github.com/users/rfejgin/repos", "events_url": "https://api.github.com/users/rfejgin/events{/privacy}", "received_events_url": "https://api.github.com/users/rfejgin/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-01T00:51:15Z", "updated_at": "2018-08-01T00:51:15Z", "author_association": "NONE", "body_html": "<p>The strange thing is that now, these zero probability bins getting selected are not bin zero, nor bins that are near any bin that has non-zero probability. For example the PDF can look like this:<br>\n[0.0, 0.0, 0.0, ... 0.0, 0.3, 0.4, 0.1, 0.0, 0.0, 0.0, ...  0.0, 0.0, <strong>0.0</strong>, 0.0, 0.0, 0.0]<br>\n.. and the bold bin gets selected. How is that bin different from any of its neighboring bins? The CDF should have the same value for this bin and its neighbors, so seems to me that it can't be a subtlety in the bucket boundary checks.<br>\nI'm starting to suspect something more fundamental is wrong with the CUDA implementation... but just speculating.</p>", "body_text": "The strange thing is that now, these zero probability bins getting selected are not bin zero, nor bins that are near any bin that has non-zero probability. For example the PDF can look like this:\n[0.0, 0.0, 0.0, ... 0.0, 0.3, 0.4, 0.1, 0.0, 0.0, 0.0, ...  0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\n.. and the bold bin gets selected. How is that bin different from any of its neighboring bins? The CDF should have the same value for this bin and its neighbors, so seems to me that it can't be a subtlety in the bucket boundary checks.\nI'm starting to suspect something more fundamental is wrong with the CUDA implementation... but just speculating.", "body": "The strange thing is that now, these zero probability bins getting selected are not bin zero, nor bins that are near any bin that has non-zero probability. For example the PDF can look like this:\r\n[0.0, 0.0, 0.0, ... 0.0, 0.3, 0.4, 0.1, 0.0, 0.0, 0.0, ...  0.0, 0.0, **0.0**, 0.0, 0.0, 0.0]\r\n.. and the bold bin gets selected. How is that bin different from any of its neighboring bins? The CDF should have the same value for this bin and its neighbors, so seems to me that it can't be a subtlety in the bucket boundary checks.\r\nI'm starting to suspect something more fundamental is wrong with the CUDA implementation... but just speculating."}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/165083774", "pull_request_review_id": 92946429, "id": 165083774, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NTA4Mzc3NA==", "diff_hunk": "@@ -322,11 +322,55 @@ def smoothl1loss_reference(input, target, size_average=True, reduce=True):\n     return output\n \n \n+def _multilabelmarginloss_reference(input, target, is_target):\n+    sum = 0\n+    for i in range(0, target.size()[0]):\n+        target_index = target[i]", "path": "test/common_nn.py", "position": null, "original_position": 7, "commit_id": "11e85a0a4513d0b497815cb24917ff2558371be0", "original_commit_id": "212c331437c4772e27ebffebc35fc56a0f7e9144", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "body": "It's a little hard to understand this (I understand that the THNN implementation uses something similar). Is it possible to rewrite this to look more like the formula in the docs? Maybe capture the `i != y[j]` part without using an `is_target` array? It's okay if it's not as efficient since we want this function to only be used in testing.", "created_at": "2018-01-31T15:18:02Z", "updated_at": "2018-11-23T15:38:49Z", "html_url": "https://github.com/pytorch/pytorch/pull/4924#discussion_r165083774", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/4924", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/165083774"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/4924#discussion_r165083774"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/4924"}}, "body_html": "<p>It's a little hard to understand this (I understand that the THNN implementation uses something similar). Is it possible to rewrite this to look more like the formula in the docs? Maybe capture the <code>i != y[j]</code> part without using an <code>is_target</code> array? It's okay if it's not as efficient since we want this function to only be used in testing.</p>", "body_text": "It's a little hard to understand this (I understand that the THNN implementation uses something similar). Is it possible to rewrite this to look more like the formula in the docs? Maybe capture the i != y[j] part without using an is_target array? It's okay if it's not as efficient since we want this function to only be used in testing."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3386", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3386/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3386/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3386/events", "html_url": "https://github.com/pytorch/pytorch/issues/3386", "id": 269765786, "node_id": "MDU6SXNzdWUyNjk3NjU3ODY=", "number": 3386, "title": "Does not build with GCC 7", "user": {"login": "eLvErDe", "id": 1586757, "node_id": "MDQ6VXNlcjE1ODY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1586757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eLvErDe", "html_url": "https://github.com/eLvErDe", "followers_url": "https://api.github.com/users/eLvErDe/followers", "following_url": "https://api.github.com/users/eLvErDe/following{/other_user}", "gists_url": "https://api.github.com/users/eLvErDe/gists{/gist_id}", "starred_url": "https://api.github.com/users/eLvErDe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eLvErDe/subscriptions", "organizations_url": "https://api.github.com/users/eLvErDe/orgs", "repos_url": "https://api.github.com/users/eLvErDe/repos", "events_url": "https://api.github.com/users/eLvErDe/events{/privacy}", "received_events_url": "https://api.github.com/users/eLvErDe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-30T21:49:19Z", "updated_at": "2017-11-01T12:50:48Z", "closed_at": "2017-11-01T12:50:48Z", "author_association": "CONTRIBUTOR", "body_html": "<pre><code>/usr/bin/c++  -DWITH_MPI=1 -D_THD_CORE=1 -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi/opal/mca/event/libevent2022/libevent -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi/opal/mca/event/libevent2022/libevent/include -I/usr/lib/x86_64-linux-gnu/openmpi/include  -DTH_INDEX_BASE=0 -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/TH -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THC   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THS -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THCS   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THPP -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THNN   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THCUNN -DOMPI_SKIP_MPICXX=1 -fexceptions  -std=c++11 -std=c++11 -O3 -DNDEBUG -fPIC   -o CMakeFiles/THD.dir/master_worker/master/State.cpp.o -c /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/master_worker/master/State.cpp\nIn file included from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/InitMethod.hpp:3:0,\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/InitMethodFile.cpp:1:\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:198:8: error: 'function' in namespace 'std' does not name a template type\n   std::function&lt;void()&gt; _destructor;\n        ^~~~~~~~\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:202:30: error: expected ')' before '&lt;' token\n   ResourceGuard(std::function&lt;void()&gt; destructor)\n                              ^\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp: In destructor 'thd::ResourceGuard::~ResourceGuard()':\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:207:21: error: '_destructor' was not declared in this scope\n     if (!_released) _destructor();\n                     ^~~~~~~~~~~\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:207:21: note: suggested alternative: 'struct'\n     if (!_released) _destructor();\n                     ^~~~~~~~~~~\n                     struct\nIn file included from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../DataChannel.hpp:4:0,\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/DataChannelTCP.hpp:3,\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/DataChannelTCP.cpp:1:\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:198:8: error: 'function' in namespace 'std' does not name a template type\n   std::function&lt;void()&gt; _destructor;\n        ^~~~~~~~\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:202:30: error: expected ')' before '&lt;' token\n   ResourceGuard(std::function&lt;void()&gt; destructor)\n                              ^\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp: In destructor 'thd::ResourceGuard::~ResourceGuard()':\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:207:21: error: '_destructor' was not declared in this scope\n     if (!_released) _destructor();\n                     ^~~~~~~~~~~\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:207:21: note: suggested alternative: 'struct'\n     if (!_released) _destructor();\n</code></pre>\n<p>Downgrading GCC fixes the issue</p>", "body_text": "/usr/bin/c++  -DWITH_MPI=1 -D_THD_CORE=1 -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi/opal/mca/event/libevent2022/libevent -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi/opal/mca/event/libevent2022/libevent/include -I/usr/lib/x86_64-linux-gnu/openmpi/include  -DTH_INDEX_BASE=0 -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/TH -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THC   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THS -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THCS   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THPP -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THNN   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THCUNN -DOMPI_SKIP_MPICXX=1 -fexceptions  -std=c++11 -std=c++11 -O3 -DNDEBUG -fPIC   -o CMakeFiles/THD.dir/master_worker/master/State.cpp.o -c /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/master_worker/master/State.cpp\nIn file included from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/InitMethod.hpp:3:0,\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/InitMethodFile.cpp:1:\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:198:8: error: 'function' in namespace 'std' does not name a template type\n   std::function<void()> _destructor;\n        ^~~~~~~~\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:202:30: error: expected ')' before '<' token\n   ResourceGuard(std::function<void()> destructor)\n                              ^\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp: In destructor 'thd::ResourceGuard::~ResourceGuard()':\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:207:21: error: '_destructor' was not declared in this scope\n     if (!_released) _destructor();\n                     ^~~~~~~~~~~\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:207:21: note: suggested alternative: 'struct'\n     if (!_released) _destructor();\n                     ^~~~~~~~~~~\n                     struct\nIn file included from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../DataChannel.hpp:4:0,\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/DataChannelTCP.hpp:3,\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/DataChannelTCP.cpp:1:\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:198:8: error: 'function' in namespace 'std' does not name a template type\n   std::function<void()> _destructor;\n        ^~~~~~~~\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:202:30: error: expected ')' before '<' token\n   ResourceGuard(std::function<void()> destructor)\n                              ^\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp: In destructor 'thd::ResourceGuard::~ResourceGuard()':\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:207:21: error: '_destructor' was not declared in this scope\n     if (!_released) _destructor();\n                     ^~~~~~~~~~~\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:207:21: note: suggested alternative: 'struct'\n     if (!_released) _destructor();\n\nDowngrading GCC fixes the issue", "body": "```\r\n/usr/bin/c++  -DWITH_MPI=1 -D_THD_CORE=1 -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi/opal/mca/event/libevent2022/libevent -I/usr/lib/x86_64-linux-gnu/openmpi/include/openmpi/opal/mca/event/libevent2022/libevent/include -I/usr/lib/x86_64-linux-gnu/openmpi/include  -DTH_INDEX_BASE=0 -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/TH -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THC   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THS -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THCS   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THPP -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THNN   -I/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/tmp_install/include/THCUNN -DOMPI_SKIP_MPICXX=1 -fexceptions  -std=c++11 -std=c++11 -O3 -DNDEBUG -fPIC   -o CMakeFiles/THD.dir/master_worker/master/State.cpp.o -c /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/master_worker/master/State.cpp\r\nIn file included from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/InitMethod.hpp:3:0,\r\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/InitMethodFile.cpp:1:\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:198:8: error: 'function' in namespace 'std' does not name a template type\r\n   std::function<void()> _destructor;\r\n        ^~~~~~~~\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:202:30: error: expected ')' before '<' token\r\n   ResourceGuard(std::function<void()> destructor)\r\n                              ^\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp: In destructor 'thd::ResourceGuard::~ResourceGuard()':\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:207:21: error: '_destructor' was not declared in this scope\r\n     if (!_released) _destructor();\r\n                     ^~~~~~~~~~~\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/init_methods/../ChannelUtils.hpp:207:21: note: suggested alternative: 'struct'\r\n     if (!_released) _destructor();\r\n                     ^~~~~~~~~~~\r\n                     struct\r\nIn file included from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../DataChannel.hpp:4:0,\r\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/DataChannelTCP.hpp:3,\r\n                 from /build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/DataChannelTCP.cpp:1:\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:198:8: error: 'function' in namespace 'std' does not name a template type\r\n   std::function<void()> _destructor;\r\n        ^~~~~~~~\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:202:30: error: expected ')' before '<' token\r\n   ResourceGuard(std::function<void()> destructor)\r\n                              ^\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp: In destructor 'thd::ResourceGuard::~ResourceGuard()':\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:207:21: error: '_destructor' was not declared in this scope\r\n     if (!_released) _destructor();\r\n                     ^~~~~~~~~~~\r\n/build/pytorch-0.2.0/debian/build/avx-sse42/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:207:21: note: suggested alternative: 'struct'\r\n     if (!_released) _destructor();\r\n```\r\n\r\nDowngrading GCC fixes the issue"}
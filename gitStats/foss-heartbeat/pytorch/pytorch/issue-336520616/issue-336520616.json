{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8980", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8980/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8980/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8980/events", "html_url": "https://github.com/pytorch/pytorch/issues/8980", "id": 336520616, "node_id": "MDU6SXNzdWUzMzY1MjA2MTY=", "number": 8980, "title": "[Caffe2]Weird error during installing caffe2 from source", "user": {"login": "quinnliu4real", "id": 33365197, "node_id": "MDQ6VXNlcjMzMzY1MTk3", "avatar_url": "https://avatars0.githubusercontent.com/u/33365197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quinnliu4real", "html_url": "https://github.com/quinnliu4real", "followers_url": "https://api.github.com/users/quinnliu4real/followers", "following_url": "https://api.github.com/users/quinnliu4real/following{/other_user}", "gists_url": "https://api.github.com/users/quinnliu4real/gists{/gist_id}", "starred_url": "https://api.github.com/users/quinnliu4real/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quinnliu4real/subscriptions", "organizations_url": "https://api.github.com/users/quinnliu4real/orgs", "repos_url": "https://api.github.com/users/quinnliu4real/repos", "events_url": "https://api.github.com/users/quinnliu4real/events{/privacy}", "received_events_url": "https://api.github.com/users/quinnliu4real/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-06-28T08:21:54Z", "updated_at": "2018-07-06T02:06:25Z", "closed_at": "2018-07-06T02:06:25Z", "author_association": "NONE", "body_html": "<p>I wanted to install caffe2 from source in my Anaconda virtual env for <a href=\"https://github.com/facebookresearch/DensePose\">Densepose</a>. However I've been stuck for 2 days because of this weird error.</p>\n<h2>Issue description</h2>\n<p>I strictly followed the instructions on <a href=\"https://caffe2.ai/docs/getting-started.html?platform=mac&amp;configuration=compile#custom-anaconda-install\" rel=\"nofollow\">caffe2.ai</a>.<br>\nCmake output seems pretty normal:</p>\n<p>Summary<br>\n-- General:<br>\n-- CMake version : 3.5.1<br>\n-- CMake command : /usr/bin/cmake<br>\n-- Git version : v0.1.11-9124-g77484d9<br>\n-- System : Linux<br>\n-- C++ compiler : /usr/bin/c++<br>\n-- C++ compiler version : 5.4.0<br>\n-- BLAS : Eigen<br>\n-- CXX flags : -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-error=deprecated-declarations<br>\n-- Build type : Release<br>\n-- Compile definitions :<br>\n-- CMAKE_PREFIX_PATH : ~/anaconda3/envs/caffe2<br>\n-- CMAKE_INSTALL_PREFIX : /home/fangxi/anaconda3/envs/caffe2<br>\n-- BUILD_CAFFE2 : ON<br>\n-- BUILD_ATEN : OFF<br>\n-- BUILD_BINARY : ON<br>\n-- BUILD_CUSTOM_PROTOBUF : ON<br>\n-- Link local protobuf : ON<br>\n-- BUILD_DOCS : OFF<br>\n-- BUILD_PYTHON : ON<br>\n-- Python version : 2.7.13<br>\n-- Python includes : /home/fangxi/anaconda3/envs/caffe2/include/python2.7<br>\n-- BUILD_SHARED_LIBS : ON<br>\n-- BUILD_TEST : OFF<br>\n-- USE_ASAN : OFF<br>\n-- USE_ATEN : OFF<br>\n-- USE_CUDA : ON<br>\n-- CUDA static link : OFF<br>\n-- USE_CUDNN : ON<br>\n-- CUDA version : 8.0<br>\n-- cuDNN version : 5.1.10<br>\n-- CUDA root directory : /usr/local/cuda<br>\n-- CUDA library : /usr/lib/x86_64-linux-gnu/libcuda.so<br>\n-- cudart library : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so<br>\n-- cublas library : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a<br>\n-- cufft library : /usr/local/cuda/lib64/libcufft.so<br>\n-- curand library : /usr/local/cuda/lib64/libcurand.so<br>\n-- cuDNN library : /usr/local/cuda/lib64/libcudnn.so<br>\n-- nvrtc : /home/fangxi/anaconda3/lib/libnvrtc.so<br>\n-- CUDA include path : /usr/local/cuda/include<br>\n-- NVCC executable : /usr/local/cuda/bin/nvcc<br>\n-- CUDA host compiler  : /usr/bin/cc<br>\n-- USE_TENSORRT : OFF<br>\n-- USE_ROCM : OFF<br>\n-- USE_EIGEN_FOR_BLAS : ON<br>\n-- USE_FFMPEG : OFF<br>\n-- USE_GFLAGS : ON<br>\n-- USE_GLOG : ON<br>\n-- USE_GLOO : ON<br>\n-- USE_GLOO_IBVERBS : OFF<br>\n-- USE_LEVELDB : ON<br>\n-- LevelDB version : 1.20<br>\n-- Snappy version : ..<br>\n-- USE_LITE_PROTO : OFF<br>\n-- USE_LMDB : ON<br>\n-- LMDB version : 0.9.17<br>\n-- USE_METAL : OFF<br>\n-- USE_MKL :<br>\n-- USE_MOBILE_OPENGL : OFF<br>\n-- USE_MPI : ON<br>\n-- USE_NCCL : ON<br>\n-- USE_SYSTEM_NCCL : OFF<br>\n-- USE_NERVANA_GPU : OFF<br>\n-- USE_NNPACK : ON<br>\n-- USE_OBSERVERS : ON<br>\n-- USE_OPENCL : OFF<br>\n-- USE_OPENCV : ON<br>\n-- OpenCV version : 3.1.0<br>\n-- USE_OPENMP : OFF<br>\n-- USE_PROF : OFF<br>\n-- USE_REDIS : OFF<br>\n-- USE_ROCKSDB : OFF<br>\n-- USE_ZMQ : OFF<br>\n-- Public Dependencies  : Threads::Threads;gflags;glog::glog<br>\n-- Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/home/fangxi/anaconda3/envs/caffe2/lib/libleveldb.so;/home/fangxi/anaconda3/envs/caffe2/lib/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;/usr/lib/openmpi/lib/libmpi_cxx.so;/usr/lib/openmpi/lib/libmpi.so;gloo;gcc_s;gcc;dl<br>\n-- Configuring done<br>\nCMake Warning at caffe2/CMakeLists.txt:194 (add_library):<br>\nCannot generate a safe runtime search path for target caffe2 because there<br>\nis a cycle in the constraint graph:</p>\n<pre><code>dir 0 is [/home/fangxi/anaconda3/envs/caffe2/lib]\ndir 1 is [/usr/lib/openmpi/lib]\ndir 2 is [/usr/local/cuda/lib64]\ndir 3 must precede it due to runtime library [libnvrtc.so.8.0]\ndir 3 is [/home/fangxi/anaconda3/lib]\ndir 2 must precede it due to runtime library [libcudart.so.8.0]\n</code></pre>\n<p>Some of these libraries may not be found correctly.</p>\n<p>CMake Warning at cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1836 (add_library):<br>\nCannot generate a safe runtime search path for target caffe2_gpu because<br>\nthere is a cycle in the constraint graph:</p>\n<pre><code>dir 0 is [/home/fangxi/pytorch/build/lib]\ndir 1 is [/usr/local/cuda/lib64]\ndir 4 must precede it due to runtime library [libnvrtc.so.8.0]\ndir 2 is [/usr/local/lib]\ndir 3 is [/usr/lib/openmpi/lib]\ndir 4 is [/home/fangxi/anaconda3/lib]\ndir 1 must precede it due to runtime library [libcurand.so.8.0]\ndir 5 is [/home/fangxi/anaconda3/envs/caffe2/lib]\n</code></pre>\n<p>Some of these libraries may not be found correctly.<br>\nCall Stack (most recent call first):<br>\ncmake/public/utils.cmake:134 (cuda_add_library)<br>\ncaffe2/CMakeLists.txt:230 (torch_cuda_based_add_library)</p>\n<p>-- Generating done<br>\n-- Build files have been written to: /home/fangxi/pytorch/build</p>\n<p>Then, I ran <code>make install -j8</code>, building began.<br>\nError happened at 98%, it appeared like this:</p>\n<p>[ 96%] Linking CXX shared module python/caffe2_pybind11_state_gpu.so<br>\nScanning dependencies of target caffe2_detectron_ops_gpu<br>\n[ 96%] Built target caffe2_pybind11_state_gpu<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/select_smooth_l1_loss_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/ps_roi_pool_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_cross_entropy_loss_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/group_spatial_softmax_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/softmax_focal_loss_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/smooth_l1_loss_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/upsample_nearest_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/roi_pool_f_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/batch_permutation_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/spatial_narrow_as_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_focal_loss_op.cc.o<br>\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sample_as_op.cc.o<br>\n[ 98%] Linking CXX shared library ../../lib/libcaffe2_detectron_ops_gpu.so<br>\n[ 98%] Built target caffe2_detectron_ops_gpu<br>\nMakefile:138: recipe for target 'all' failed<br>\nmake: *** [all] Error 2</p>\n<p>The process just stopped out of nothing and I had no idea what caused this error.<br>\nPlease help me!</p>\n<h2>System Info</h2>\n<ul>\n<li>OS: Ubantu 16.04</li>\n<li>Python version: 2.7</li>\n<li>CUDA/cuDNN version: CUDA8.0, CUDNN5.1</li>\n<li>GCC version (if compiling from source): 5.4.0</li>\n<li>CMake version: 3.5.1</li>\n<li>Versions of any other relevant libraries: default by <a href=\"https://caffe2.ai/docs/getting-started.html?platform=mac&amp;configuration=compile#custom-anaconda-install\" rel=\"nofollow\">caffe2.ai</a>.</li>\n</ul>", "body_text": "I wanted to install caffe2 from source in my Anaconda virtual env for Densepose. However I've been stuck for 2 days because of this weird error.\nIssue description\nI strictly followed the instructions on caffe2.ai.\nCmake output seems pretty normal:\nSummary\n-- General:\n-- CMake version : 3.5.1\n-- CMake command : /usr/bin/cmake\n-- Git version : v0.1.11-9124-g77484d9\n-- System : Linux\n-- C++ compiler : /usr/bin/c++\n-- C++ compiler version : 5.4.0\n-- BLAS : Eigen\n-- CXX flags : -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-error=deprecated-declarations\n-- Build type : Release\n-- Compile definitions :\n-- CMAKE_PREFIX_PATH : ~/anaconda3/envs/caffe2\n-- CMAKE_INSTALL_PREFIX : /home/fangxi/anaconda3/envs/caffe2\n-- BUILD_CAFFE2 : ON\n-- BUILD_ATEN : OFF\n-- BUILD_BINARY : ON\n-- BUILD_CUSTOM_PROTOBUF : ON\n-- Link local protobuf : ON\n-- BUILD_DOCS : OFF\n-- BUILD_PYTHON : ON\n-- Python version : 2.7.13\n-- Python includes : /home/fangxi/anaconda3/envs/caffe2/include/python2.7\n-- BUILD_SHARED_LIBS : ON\n-- BUILD_TEST : OFF\n-- USE_ASAN : OFF\n-- USE_ATEN : OFF\n-- USE_CUDA : ON\n-- CUDA static link : OFF\n-- USE_CUDNN : ON\n-- CUDA version : 8.0\n-- cuDNN version : 5.1.10\n-- CUDA root directory : /usr/local/cuda\n-- CUDA library : /usr/lib/x86_64-linux-gnu/libcuda.so\n-- cudart library : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\n-- cublas library : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\n-- cufft library : /usr/local/cuda/lib64/libcufft.so\n-- curand library : /usr/local/cuda/lib64/libcurand.so\n-- cuDNN library : /usr/local/cuda/lib64/libcudnn.so\n-- nvrtc : /home/fangxi/anaconda3/lib/libnvrtc.so\n-- CUDA include path : /usr/local/cuda/include\n-- NVCC executable : /usr/local/cuda/bin/nvcc\n-- CUDA host compiler  : /usr/bin/cc\n-- USE_TENSORRT : OFF\n-- USE_ROCM : OFF\n-- USE_EIGEN_FOR_BLAS : ON\n-- USE_FFMPEG : OFF\n-- USE_GFLAGS : ON\n-- USE_GLOG : ON\n-- USE_GLOO : ON\n-- USE_GLOO_IBVERBS : OFF\n-- USE_LEVELDB : ON\n-- LevelDB version : 1.20\n-- Snappy version : ..\n-- USE_LITE_PROTO : OFF\n-- USE_LMDB : ON\n-- LMDB version : 0.9.17\n-- USE_METAL : OFF\n-- USE_MKL :\n-- USE_MOBILE_OPENGL : OFF\n-- USE_MPI : ON\n-- USE_NCCL : ON\n-- USE_SYSTEM_NCCL : OFF\n-- USE_NERVANA_GPU : OFF\n-- USE_NNPACK : ON\n-- USE_OBSERVERS : ON\n-- USE_OPENCL : OFF\n-- USE_OPENCV : ON\n-- OpenCV version : 3.1.0\n-- USE_OPENMP : OFF\n-- USE_PROF : OFF\n-- USE_REDIS : OFF\n-- USE_ROCKSDB : OFF\n-- USE_ZMQ : OFF\n-- Public Dependencies  : Threads::Threads;gflags;glog::glog\n-- Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/home/fangxi/anaconda3/envs/caffe2/lib/libleveldb.so;/home/fangxi/anaconda3/envs/caffe2/lib/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;/usr/lib/openmpi/lib/libmpi_cxx.so;/usr/lib/openmpi/lib/libmpi.so;gloo;gcc_s;gcc;dl\n-- Configuring done\nCMake Warning at caffe2/CMakeLists.txt:194 (add_library):\nCannot generate a safe runtime search path for target caffe2 because there\nis a cycle in the constraint graph:\ndir 0 is [/home/fangxi/anaconda3/envs/caffe2/lib]\ndir 1 is [/usr/lib/openmpi/lib]\ndir 2 is [/usr/local/cuda/lib64]\ndir 3 must precede it due to runtime library [libnvrtc.so.8.0]\ndir 3 is [/home/fangxi/anaconda3/lib]\ndir 2 must precede it due to runtime library [libcudart.so.8.0]\n\nSome of these libraries may not be found correctly.\nCMake Warning at cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1836 (add_library):\nCannot generate a safe runtime search path for target caffe2_gpu because\nthere is a cycle in the constraint graph:\ndir 0 is [/home/fangxi/pytorch/build/lib]\ndir 1 is [/usr/local/cuda/lib64]\ndir 4 must precede it due to runtime library [libnvrtc.so.8.0]\ndir 2 is [/usr/local/lib]\ndir 3 is [/usr/lib/openmpi/lib]\ndir 4 is [/home/fangxi/anaconda3/lib]\ndir 1 must precede it due to runtime library [libcurand.so.8.0]\ndir 5 is [/home/fangxi/anaconda3/envs/caffe2/lib]\n\nSome of these libraries may not be found correctly.\nCall Stack (most recent call first):\ncmake/public/utils.cmake:134 (cuda_add_library)\ncaffe2/CMakeLists.txt:230 (torch_cuda_based_add_library)\n-- Generating done\n-- Build files have been written to: /home/fangxi/pytorch/build\nThen, I ran make install -j8, building began.\nError happened at 98%, it appeared like this:\n[ 96%] Linking CXX shared module python/caffe2_pybind11_state_gpu.so\nScanning dependencies of target caffe2_detectron_ops_gpu\n[ 96%] Built target caffe2_pybind11_state_gpu\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/select_smooth_l1_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/ps_roi_pool_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_cross_entropy_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/group_spatial_softmax_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/softmax_focal_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/smooth_l1_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/upsample_nearest_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/roi_pool_f_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/batch_permutation_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/spatial_narrow_as_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_focal_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sample_as_op.cc.o\n[ 98%] Linking CXX shared library ../../lib/libcaffe2_detectron_ops_gpu.so\n[ 98%] Built target caffe2_detectron_ops_gpu\nMakefile:138: recipe for target 'all' failed\nmake: *** [all] Error 2\nThe process just stopped out of nothing and I had no idea what caused this error.\nPlease help me!\nSystem Info\n\nOS: Ubantu 16.04\nPython version: 2.7\nCUDA/cuDNN version: CUDA8.0, CUDNN5.1\nGCC version (if compiling from source): 5.4.0\nCMake version: 3.5.1\nVersions of any other relevant libraries: default by caffe2.ai.", "body": "I wanted to install caffe2 from source in my Anaconda virtual env for [Densepose](https://github.com/facebookresearch/DensePose). However I've been stuck for 2 days because of this weird error.\r\n\r\n## Issue description\r\n\r\nI strictly followed the instructions on [caffe2.ai](https://caffe2.ai/docs/getting-started.html?platform=mac&configuration=compile#custom-anaconda-install).\r\nCmake output seems pretty normal:\r\n\r\nSummary\r\n-- General:\r\n-- CMake version : 3.5.1\r\n-- CMake command : /usr/bin/cmake\r\n-- Git version : v0.1.11-9124-g77484d9\r\n-- System : Linux\r\n-- C++ compiler : /usr/bin/c++\r\n-- C++ compiler version : 5.4.0\r\n-- BLAS : Eigen\r\n-- CXX flags : -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-error=deprecated-declarations\r\n-- Build type : Release\r\n-- Compile definitions : \r\n-- CMAKE_PREFIX_PATH : ~/anaconda3/envs/caffe2\r\n-- CMAKE_INSTALL_PREFIX : /home/fangxi/anaconda3/envs/caffe2\r\n-- BUILD_CAFFE2 : ON\r\n-- BUILD_ATEN : OFF\r\n-- BUILD_BINARY : ON\r\n-- BUILD_CUSTOM_PROTOBUF : ON\r\n-- Link local protobuf : ON\r\n-- BUILD_DOCS : OFF\r\n-- BUILD_PYTHON : ON\r\n-- Python version : 2.7.13\r\n-- Python includes : /home/fangxi/anaconda3/envs/caffe2/include/python2.7\r\n-- BUILD_SHARED_LIBS : ON\r\n-- BUILD_TEST : OFF\r\n-- USE_ASAN : OFF\r\n-- USE_ATEN : OFF\r\n-- USE_CUDA : ON\r\n-- CUDA static link : OFF\r\n-- USE_CUDNN : ON\r\n-- CUDA version : 8.0\r\n-- cuDNN version : 5.1.10\r\n-- CUDA root directory : /usr/local/cuda\r\n-- CUDA library : /usr/lib/x86_64-linux-gnu/libcuda.so\r\n-- cudart library : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\r\n-- cublas library : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\r\n-- cufft library : /usr/local/cuda/lib64/libcufft.so\r\n-- curand library : /usr/local/cuda/lib64/libcurand.so\r\n-- cuDNN library : /usr/local/cuda/lib64/libcudnn.so\r\n-- nvrtc : /home/fangxi/anaconda3/lib/libnvrtc.so\r\n-- CUDA include path : /usr/local/cuda/include\r\n-- NVCC executable : /usr/local/cuda/bin/nvcc\r\n-- CUDA host compiler  : /usr/bin/cc\r\n-- USE_TENSORRT : OFF\r\n-- USE_ROCM : OFF\r\n-- USE_EIGEN_FOR_BLAS : ON\r\n-- USE_FFMPEG : OFF\r\n-- USE_GFLAGS : ON\r\n-- USE_GLOG : ON\r\n-- USE_GLOO : ON\r\n-- USE_GLOO_IBVERBS : OFF\r\n-- USE_LEVELDB : ON\r\n-- LevelDB version : 1.20\r\n-- Snappy version : ..\r\n-- USE_LITE_PROTO : OFF\r\n-- USE_LMDB : ON\r\n-- LMDB version : 0.9.17\r\n-- USE_METAL : OFF\r\n-- USE_MKL : \r\n-- USE_MOBILE_OPENGL : OFF\r\n-- USE_MPI : ON\r\n-- USE_NCCL : ON\r\n-- USE_SYSTEM_NCCL : OFF\r\n-- USE_NERVANA_GPU : OFF\r\n-- USE_NNPACK : ON\r\n-- USE_OBSERVERS : ON\r\n-- USE_OPENCL : OFF\r\n-- USE_OPENCV : ON\r\n-- OpenCV version : 3.1.0\r\n-- USE_OPENMP : OFF\r\n-- USE_PROF : OFF\r\n-- USE_REDIS : OFF\r\n-- USE_ROCKSDB : OFF\r\n-- USE_ZMQ : OFF\r\n-- Public Dependencies  : Threads::Threads;gflags;glog::glog\r\n-- Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/home/fangxi/anaconda3/envs/caffe2/lib/libleveldb.so;/home/fangxi/anaconda3/envs/caffe2/lib/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;/usr/lib/openmpi/lib/libmpi_cxx.so;/usr/lib/openmpi/lib/libmpi.so;gloo;gcc_s;gcc;dl\r\n-- Configuring done\r\nCMake Warning at caffe2/CMakeLists.txt:194 (add_library):\r\nCannot generate a safe runtime search path for target caffe2 because there\r\nis a cycle in the constraint graph:\r\n\r\n    dir 0 is [/home/fangxi/anaconda3/envs/caffe2/lib]\r\n    dir 1 is [/usr/lib/openmpi/lib]\r\n    dir 2 is [/usr/local/cuda/lib64]\r\n    dir 3 must precede it due to runtime library [libnvrtc.so.8.0]\r\n    dir 3 is [/home/fangxi/anaconda3/lib]\r\n    dir 2 must precede it due to runtime library [libcudart.so.8.0]\r\n\r\nSome of these libraries may not be found correctly.\r\n\r\n\r\nCMake Warning at cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1836 (add_library):\r\nCannot generate a safe runtime search path for target caffe2_gpu because\r\nthere is a cycle in the constraint graph:\r\n\r\n    dir 0 is [/home/fangxi/pytorch/build/lib]\r\n    dir 1 is [/usr/local/cuda/lib64]\r\n    dir 4 must precede it due to runtime library [libnvrtc.so.8.0]\r\n    dir 2 is [/usr/local/lib]\r\n    dir 3 is [/usr/lib/openmpi/lib]\r\n    dir 4 is [/home/fangxi/anaconda3/lib]\r\n    dir 1 must precede it due to runtime library [libcurand.so.8.0]\r\n    dir 5 is [/home/fangxi/anaconda3/envs/caffe2/lib]\r\n\r\nSome of these libraries may not be found correctly.\r\nCall Stack (most recent call first):\r\ncmake/public/utils.cmake:134 (cuda_add_library)\r\ncaffe2/CMakeLists.txt:230 (torch_cuda_based_add_library)\r\n\r\n\r\n-- Generating done\r\n-- Build files have been written to: /home/fangxi/pytorch/build\r\n\r\nThen, I ran `make install -j8`, building began.\r\nError happened at 98%, it appeared like this:\r\n\r\n[ 96%] Linking CXX shared module python/caffe2_pybind11_state_gpu.so\r\nScanning dependencies of target caffe2_detectron_ops_gpu\r\n[ 96%] Built target caffe2_pybind11_state_gpu\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/select_smooth_l1_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/ps_roi_pool_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_cross_entropy_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/group_spatial_softmax_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/softmax_focal_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/smooth_l1_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/upsample_nearest_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/roi_pool_f_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/batch_permutation_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/spatial_narrow_as_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_focal_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sample_as_op.cc.o\r\n[ 98%] Linking CXX shared library ../../lib/libcaffe2_detectron_ops_gpu.so\r\n[ 98%] Built target caffe2_detectron_ops_gpu\r\nMakefile:138: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n\r\nThe process just stopped out of nothing and I had no idea what caused this error.\r\nPlease help me!\r\n\r\n## System Info\r\n\r\n- OS: Ubantu 16.04\r\n- Python version: 2.7\r\n- CUDA/cuDNN version: CUDA8.0, CUDNN5.1\r\n- GCC version (if compiling from source): 5.4.0\r\n- CMake version: 3.5.1\r\n- Versions of any other relevant libraries: default by [caffe2.ai](https://caffe2.ai/docs/getting-started.html?platform=mac&configuration=compile#custom-anaconda-install).\r\n"}
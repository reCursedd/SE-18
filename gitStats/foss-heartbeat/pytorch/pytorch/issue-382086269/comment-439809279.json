{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/439809279", "html_url": "https://github.com/pytorch/pytorch/pull/14182#issuecomment-439809279", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/14182", "id": 439809279, "node_id": "MDEyOklzc3VlQ29tbWVudDQzOTgwOTI3OQ==", "user": {"login": "dzhulgakov", "id": 17890620, "node_id": "MDQ6VXNlcjE3ODkwNjIw", "avatar_url": "https://avatars2.githubusercontent.com/u/17890620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dzhulgakov", "html_url": "https://github.com/dzhulgakov", "followers_url": "https://api.github.com/users/dzhulgakov/followers", "following_url": "https://api.github.com/users/dzhulgakov/following{/other_user}", "gists_url": "https://api.github.com/users/dzhulgakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dzhulgakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dzhulgakov/subscriptions", "organizations_url": "https://api.github.com/users/dzhulgakov/orgs", "repos_url": "https://api.github.com/users/dzhulgakov/repos", "events_url": "https://api.github.com/users/dzhulgakov/events{/privacy}", "received_events_url": "https://api.github.com/users/dzhulgakov/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-19T08:27:45Z", "updated_at": "2018-11-19T08:27:45Z", "author_association": "MEMBER", "body_html": "<p>So protobuf is used in torch - for onnx export. Thus I'm not sure why this PR passes the build</p>\n<p>In general, we should move in the direction of <code>CAFFE2_LINK_LOCAL_PROTOBUF</code> (<a href=\"https://github.com/pytorch/pytorch/blob/master/cmake/ProtoBuf.cmake#L167\">https://github.com/pytorch/pytorch/blob/master/cmake/ProtoBuf.cmake#L167</a>) - link protobuf locally and statically to every .so and do NOT export any symbols. That way it becomes fully transparent from the system's protobuf version</p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=79994\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/orionr\">@orionr</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=551151\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Yangqing\">@Yangqing</a> as resident experts</p>", "body_text": "So protobuf is used in torch - for onnx export. Thus I'm not sure why this PR passes the build\nIn general, we should move in the direction of CAFFE2_LINK_LOCAL_PROTOBUF (https://github.com/pytorch/pytorch/blob/master/cmake/ProtoBuf.cmake#L167) - link protobuf locally and statically to every .so and do NOT export any symbols. That way it becomes fully transparent from the system's protobuf version\ncc @orionr @Yangqing as resident experts", "body": "So protobuf is used in torch - for onnx export. Thus I'm not sure why this PR passes the build\r\n\r\nIn general, we should move in the direction of `CAFFE2_LINK_LOCAL_PROTOBUF` (https://github.com/pytorch/pytorch/blob/master/cmake/ProtoBuf.cmake#L167) - link protobuf locally and statically to every .so and do NOT export any symbols. That way it becomes fully transparent from the system's protobuf version\r\n\r\ncc @orionr @Yangqing as resident experts"}
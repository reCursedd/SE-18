{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5588", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5588/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5588/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5588/events", "html_url": "https://github.com/pytorch/pytorch/issues/5588", "id": 302619786, "node_id": "MDU6SXNzdWUzMDI2MTk3ODY=", "number": 5588, "title": "AttributeError: 'NoneType' object has no attribute 'size'", "user": {"login": "nikhilraghava", "id": 18715837, "node_id": "MDQ6VXNlcjE4NzE1ODM3", "avatar_url": "https://avatars1.githubusercontent.com/u/18715837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilraghava", "html_url": "https://github.com/nikhilraghava", "followers_url": "https://api.github.com/users/nikhilraghava/followers", "following_url": "https://api.github.com/users/nikhilraghava/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilraghava/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilraghava/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilraghava/subscriptions", "organizations_url": "https://api.github.com/users/nikhilraghava/orgs", "repos_url": "https://api.github.com/users/nikhilraghava/repos", "events_url": "https://api.github.com/users/nikhilraghava/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilraghava/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-06T09:16:49Z", "updated_at": "2018-03-06T10:21:49Z", "closed_at": "2018-03-06T10:21:48Z", "author_association": "NONE", "body_html": "<p>I was running the following code on FlyodHub using this command: <code>floyd run --gpu --env pytorch-0.3 'python artist.py'</code>.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> torch\n<span class=\"pl-k\">from</span> torch.autograd <span class=\"pl-k\">import</span> Variable\n<span class=\"pl-k\">from</span> torch.utils.data <span class=\"pl-k\">import</span> DataLoader\n<span class=\"pl-k\">from</span> torchvision <span class=\"pl-k\">import</span> transforms\n\n<span class=\"pl-k\">import</span> utils\n<span class=\"pl-k\">from</span> transformer_net <span class=\"pl-k\">import</span> TransformerNet\n<span class=\"pl-k\">from</span> vgg <span class=\"pl-k\">import</span> Vgg16\n\n\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">stylize</span>(<span class=\"pl-smi\">input_image_path</span>, <span class=\"pl-smi\">model</span>, <span class=\"pl-smi\">output_image_path</span>):\n    content_image <span class=\"pl-k\">=</span> utils.load_image(input_image_path)\n    content_transform <span class=\"pl-k\">=</span> transforms.Compose([\n        transforms.ToTensor(),\n        transforms.Lambda(<span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">x</span>: x.mul(<span class=\"pl-c1\">255</span>))\n    ])\n    content_image <span class=\"pl-k\">=</span> content_transform(content_image)\n    content_image <span class=\"pl-k\">=</span> content_image.unsqueeze(<span class=\"pl-c1\">0</span>)\n    content_image <span class=\"pl-k\">=</span> content_image.cuda()\n    content_image <span class=\"pl-k\">=</span> Variable(content_image, <span class=\"pl-v\">volatile</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>)\n\n    style_model <span class=\"pl-k\">=</span> TransformerNet()\n    style_model.load_state_dict(torch.load(model))\n    style_model.cuda()\n    output <span class=\"pl-k\">=</span> style_model(content_image)\n    output <span class=\"pl-k\">=</span> output.cpu()\n    output_data <span class=\"pl-k\">=</span> output.data[<span class=\"pl-c1\">0</span>]\n    utils.save_image(output_image_path, output_data)\n\n\n<span class=\"pl-k\">if</span> <span class=\"pl-c1\">__name__</span> <span class=\"pl-k\">==</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>__main__<span class=\"pl-pds\">\"</span></span>:\n    stylize(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>test.jpg<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>saved_models/mosaic.pth<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>mosaic_test.png<span class=\"pl-pds\">'</span></span>)</pre></div>\n<p>However I get the following error:</p>\n<div class=\"highlight highlight-source-shell\"><pre>2018-03-06 01:08:49 PST  Run Output:\n2018-03-06 01:11:15 PST  /usr/local/lib/python3.6/site-packages/torch/nn/modules/upsampling.py:133: UserWarning: nn.UpsamplingNearest2d is deprecated. Use nn.Upsample instead.\n2018-03-06 01:11:15 PST  warnings.warn(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>nn.UpsamplingNearest2d is deprecated. Use nn.Upsample instead.<span class=\"pl-pds\">\"</span></span>)\n2018-03-06 01:11:15 PST  Traceback (most recent call last):\n2018-03-06 01:11:15 PST  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>artist.py<span class=\"pl-pds\">\"</span></span>, line 32, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n2018-03-06 01:11:15 PST  stylize(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>test.jpg<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>saved_models/mosaic.pth<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>mosaic_test.png<span class=\"pl-pds\">'</span></span>)\n2018-03-06 01:11:15 PST  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>artist.py<span class=\"pl-pds\">\"</span></span>, line 25, <span class=\"pl-k\">in</span> stylize\n2018-03-06 01:11:15 PST  output = style_model(content_image)\n2018-03-06 01:11:15 PST  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py<span class=\"pl-pds\">\"</span></span>, line 325, <span class=\"pl-k\">in</span> __call__\n2018-03-06 01:11:15 PST  result = self.forward(<span class=\"pl-k\">*</span>input, <span class=\"pl-k\">**</span>kwargs)\n2018-03-06 01:11:15 PST  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/code/transformer_net.py<span class=\"pl-pds\">\"</span></span>, line 38, <span class=\"pl-k\">in</span> forward\n2018-03-06 01:11:15 PST  y = self.relu(self.in4(self.deconv1(y)))\n2018-03-06 01:11:15 PST  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py<span class=\"pl-pds\">\"</span></span>, line 325, <span class=\"pl-k\">in</span> __call__\n2018-03-06 01:11:15 PST  result = self.forward(<span class=\"pl-k\">*</span>input, <span class=\"pl-k\">**</span>kwargs)\n2018-03-06 01:11:15 PST  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/local/lib/python3.6/site-packages/torch/nn/modules/instancenorm.py<span class=\"pl-pds\">\"</span></span>, line 11, <span class=\"pl-k\">in</span> forward\n2018-03-06 01:11:15 PST  b, c = input.size(0), input.size(1)\n2018-03-06 01:11:15 PST  AttributeError: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>NoneType<span class=\"pl-pds\">'</span></span> object has no attribute <span class=\"pl-s\"><span class=\"pl-pds\">'</span>size<span class=\"pl-pds\">'</span></span>\n2018-03-06 01:11:20 PST</pre></div>\n<p>How do I overcome this error?</p>", "body_text": "I was running the following code on FlyodHub using this command: floyd run --gpu --env pytorch-0.3 'python artist.py'.\nimport torch\nfrom torch.autograd import Variable\nfrom torch.utils.data import DataLoader\nfrom torchvision import transforms\n\nimport utils\nfrom transformer_net import TransformerNet\nfrom vgg import Vgg16\n\n\ndef stylize(input_image_path, model, output_image_path):\n    content_image = utils.load_image(input_image_path)\n    content_transform = transforms.Compose([\n        transforms.ToTensor(),\n        transforms.Lambda(lambda x: x.mul(255))\n    ])\n    content_image = content_transform(content_image)\n    content_image = content_image.unsqueeze(0)\n    content_image = content_image.cuda()\n    content_image = Variable(content_image, volatile=True)\n\n    style_model = TransformerNet()\n    style_model.load_state_dict(torch.load(model))\n    style_model.cuda()\n    output = style_model(content_image)\n    output = output.cpu()\n    output_data = output.data[0]\n    utils.save_image(output_image_path, output_data)\n\n\nif __name__ == \"__main__\":\n    stylize('test.jpg', 'saved_models/mosaic.pth', 'mosaic_test.png')\nHowever I get the following error:\n2018-03-06 01:08:49 PST  Run Output:\n2018-03-06 01:11:15 PST  /usr/local/lib/python3.6/site-packages/torch/nn/modules/upsampling.py:133: UserWarning: nn.UpsamplingNearest2d is deprecated. Use nn.Upsample instead.\n2018-03-06 01:11:15 PST  warnings.warn(\"nn.UpsamplingNearest2d is deprecated. Use nn.Upsample instead.\")\n2018-03-06 01:11:15 PST  Traceback (most recent call last):\n2018-03-06 01:11:15 PST  File \"artist.py\", line 32, in <module>\n2018-03-06 01:11:15 PST  stylize('test.jpg', 'saved_models/mosaic.pth', 'mosaic_test.png')\n2018-03-06 01:11:15 PST  File \"artist.py\", line 25, in stylize\n2018-03-06 01:11:15 PST  output = style_model(content_image)\n2018-03-06 01:11:15 PST  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 325, in __call__\n2018-03-06 01:11:15 PST  result = self.forward(*input, **kwargs)\n2018-03-06 01:11:15 PST  File \"/code/transformer_net.py\", line 38, in forward\n2018-03-06 01:11:15 PST  y = self.relu(self.in4(self.deconv1(y)))\n2018-03-06 01:11:15 PST  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 325, in __call__\n2018-03-06 01:11:15 PST  result = self.forward(*input, **kwargs)\n2018-03-06 01:11:15 PST  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/instancenorm.py\", line 11, in forward\n2018-03-06 01:11:15 PST  b, c = input.size(0), input.size(1)\n2018-03-06 01:11:15 PST  AttributeError: 'NoneType' object has no attribute 'size'\n2018-03-06 01:11:20 PST\nHow do I overcome this error?", "body": "I was running the following code on FlyodHub using this command: `floyd run --gpu --env pytorch-0.3 'python artist.py'`.\r\n\r\n```python\r\nimport torch\r\nfrom torch.autograd import Variable\r\nfrom torch.utils.data import DataLoader\r\nfrom torchvision import transforms\r\n\r\nimport utils\r\nfrom transformer_net import TransformerNet\r\nfrom vgg import Vgg16\r\n\r\n\r\ndef stylize(input_image_path, model, output_image_path):\r\n    content_image = utils.load_image(input_image_path)\r\n    content_transform = transforms.Compose([\r\n        transforms.ToTensor(),\r\n        transforms.Lambda(lambda x: x.mul(255))\r\n    ])\r\n    content_image = content_transform(content_image)\r\n    content_image = content_image.unsqueeze(0)\r\n    content_image = content_image.cuda()\r\n    content_image = Variable(content_image, volatile=True)\r\n\r\n    style_model = TransformerNet()\r\n    style_model.load_state_dict(torch.load(model))\r\n    style_model.cuda()\r\n    output = style_model(content_image)\r\n    output = output.cpu()\r\n    output_data = output.data[0]\r\n    utils.save_image(output_image_path, output_data)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    stylize('test.jpg', 'saved_models/mosaic.pth', 'mosaic_test.png')\r\n```\r\nHowever I get the following error:\r\n\r\n```bash\r\n2018-03-06 01:08:49 PST  Run Output:\r\n2018-03-06 01:11:15 PST  /usr/local/lib/python3.6/site-packages/torch/nn/modules/upsampling.py:133: UserWarning: nn.UpsamplingNearest2d is deprecated. Use nn.Upsample instead.\r\n2018-03-06 01:11:15 PST  warnings.warn(\"nn.UpsamplingNearest2d is deprecated. Use nn.Upsample instead.\")\r\n2018-03-06 01:11:15 PST  Traceback (most recent call last):\r\n2018-03-06 01:11:15 PST  File \"artist.py\", line 32, in <module>\r\n2018-03-06 01:11:15 PST  stylize('test.jpg', 'saved_models/mosaic.pth', 'mosaic_test.png')\r\n2018-03-06 01:11:15 PST  File \"artist.py\", line 25, in stylize\r\n2018-03-06 01:11:15 PST  output = style_model(content_image)\r\n2018-03-06 01:11:15 PST  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 325, in __call__\r\n2018-03-06 01:11:15 PST  result = self.forward(*input, **kwargs)\r\n2018-03-06 01:11:15 PST  File \"/code/transformer_net.py\", line 38, in forward\r\n2018-03-06 01:11:15 PST  y = self.relu(self.in4(self.deconv1(y)))\r\n2018-03-06 01:11:15 PST  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 325, in __call__\r\n2018-03-06 01:11:15 PST  result = self.forward(*input, **kwargs)\r\n2018-03-06 01:11:15 PST  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/instancenorm.py\", line 11, in forward\r\n2018-03-06 01:11:15 PST  b, c = input.size(0), input.size(1)\r\n2018-03-06 01:11:15 PST  AttributeError: 'NoneType' object has no attribute 'size'\r\n2018-03-06 01:11:20 PST\r\n```\r\nHow do I overcome this error?"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10203", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10203/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10203/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10203/events", "html_url": "https://github.com/pytorch/pytorch/issues/10203", "id": 347309392, "node_id": "MDU6SXNzdWUzNDczMDkzOTI=", "number": 10203, "title": "[Caffe2] Can I convert Caffe2 to Caffe?", "user": {"login": "dedoogong", "id": 12013568, "node_id": "MDQ6VXNlcjEyMDEzNTY4", "avatar_url": "https://avatars1.githubusercontent.com/u/12013568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dedoogong", "html_url": "https://github.com/dedoogong", "followers_url": "https://api.github.com/users/dedoogong/followers", "following_url": "https://api.github.com/users/dedoogong/following{/other_user}", "gists_url": "https://api.github.com/users/dedoogong/gists{/gist_id}", "starred_url": "https://api.github.com/users/dedoogong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dedoogong/subscriptions", "organizations_url": "https://api.github.com/users/dedoogong/orgs", "repos_url": "https://api.github.com/users/dedoogong/repos", "events_url": "https://api.github.com/users/dedoogong/events{/privacy}", "received_events_url": "https://api.github.com/users/dedoogong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-03T08:39:56Z", "updated_at": "2018-09-28T12:19:12Z", "closed_at": "2018-09-11T01:59:54Z", "author_association": "NONE", "body_html": "<p>I'm trying to convert Keypoint-R-CNN example model based on Detectron/Caffe2 to Caffe.<br>\nBy default, Detectron divides the model into \"base\" part and \"head\" part, but I made a new Caffe prototxt including both keypoint net and net(base net) after extracting detectron_net.pbtxt and detectron_keypoint_net_pbtxt together and manually changed each names of items.</p>\n<p>Also, I found it's possible to convert all of Caffe2's weight/bias to numpy arrays and then those to Caffe using FetchBlob(\"weight name\").</p>\n<p>But now, I feel confused that it seems like, there would be no matching CUDA/cuDNN implementation in Caffe2 for Caffe's \"Deconvolution(gpu)\"  code( Does \"ConvTranspose\" work same as \"Deconvolution\"?)</p>\n<p>Plus, some of Caffe's hyper parameters in prototxt are gone in Caffe2's pbtxt such as \" num_output\" or \"lr_mult\" in convolution_param.</p>\n<p>Not only that, Detectron's convert_pkl_to_pb.py converts the example weight file(.pkl, arond 480MB) to so small 2 .pb files(less than 200KB in total) with fusing AffineTransform option. If I apply this fusing option, it merge some blobs, so the original network structure is changed and reduced. As there is no AffineTransform layer in Caffe, I need to turn on this option.</p>\n<p>So, I would like someone to tell me that Caffe2 can be translated to Caffe or not.<br>\nIs there anybody who succeed in converting Caffe2 model to Caffe?<br>\nI'm also considering ONNX or MMdnn.</p>\n<p>Thank you in advance!</p>", "body_text": "I'm trying to convert Keypoint-R-CNN example model based on Detectron/Caffe2 to Caffe.\nBy default, Detectron divides the model into \"base\" part and \"head\" part, but I made a new Caffe prototxt including both keypoint net and net(base net) after extracting detectron_net.pbtxt and detectron_keypoint_net_pbtxt together and manually changed each names of items.\nAlso, I found it's possible to convert all of Caffe2's weight/bias to numpy arrays and then those to Caffe using FetchBlob(\"weight name\").\nBut now, I feel confused that it seems like, there would be no matching CUDA/cuDNN implementation in Caffe2 for Caffe's \"Deconvolution(gpu)\"  code( Does \"ConvTranspose\" work same as \"Deconvolution\"?)\nPlus, some of Caffe's hyper parameters in prototxt are gone in Caffe2's pbtxt such as \" num_output\" or \"lr_mult\" in convolution_param.\nNot only that, Detectron's convert_pkl_to_pb.py converts the example weight file(.pkl, arond 480MB) to so small 2 .pb files(less than 200KB in total) with fusing AffineTransform option. If I apply this fusing option, it merge some blobs, so the original network structure is changed and reduced. As there is no AffineTransform layer in Caffe, I need to turn on this option.\nSo, I would like someone to tell me that Caffe2 can be translated to Caffe or not.\nIs there anybody who succeed in converting Caffe2 model to Caffe?\nI'm also considering ONNX or MMdnn.\nThank you in advance!", "body": "I'm trying to convert Keypoint-R-CNN example model based on Detectron/Caffe2 to Caffe. \r\nBy default, Detectron divides the model into \"base\" part and \"head\" part, but I made a new Caffe prototxt including both keypoint net and net(base net) after extracting detectron_net.pbtxt and detectron_keypoint_net_pbtxt together and manually changed each names of items. \r\n\r\nAlso, I found it's possible to convert all of Caffe2's weight/bias to numpy arrays and then those to Caffe using FetchBlob(\"weight name\").\r\n \r\nBut now, I feel confused that it seems like, there would be no matching CUDA/cuDNN implementation in Caffe2 for Caffe's \"Deconvolution(gpu)\"  code( Does \"ConvTranspose\" work same as \"Deconvolution\"?)\r\n\r\nPlus, some of Caffe's hyper parameters in prototxt are gone in Caffe2's pbtxt such as \" num_output\" or \"lr_mult\" in convolution_param. \r\n\r\nNot only that, Detectron's convert_pkl_to_pb.py converts the example weight file(.pkl, arond 480MB) to so small 2 .pb files(less than 200KB in total) with fusing AffineTransform option. If I apply this fusing option, it merge some blobs, so the original network structure is changed and reduced. As there is no AffineTransform layer in Caffe, I need to turn on this option. \r\n\r\nSo, I would like someone to tell me that Caffe2 can be translated to Caffe or not.\r\nIs there anybody who succeed in converting Caffe2 model to Caffe?\r\nI'm also considering ONNX or MMdnn. \r\n\r\nThank you in advance!\r\n\r\n\r\n  "}
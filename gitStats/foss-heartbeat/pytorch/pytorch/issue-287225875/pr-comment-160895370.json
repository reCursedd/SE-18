{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/160895370", "pull_request_review_id": 88089492, "id": 160895370, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDg5NTM3MA==", "diff_hunk": "@@ -0,0 +1,127 @@\n+// ${generated_comment}\n+\n+#include <Python.h>\n+\n+#include \"torch/csrc/Exceptions.h\"\n+#include \"torch/csrc/autograd/python_variable.h\"\n+#include \"torch/csrc/autograd/utils/wrap_outputs.h\"\n+#include \"torch/csrc/utils/python_arg_parser.h\"\n+#include \"torch/csrc/utils/tensor_numpy.h\"\n+\n+#include \"python_torch_functions_dispatch.h\"\n+\n+using at::Tensor;\n+using at::Scalar;\n+using at::ScalarType;\n+using at::Backend;\n+using namespace torch::autograd::utils;\n+\n+namespace torch { namespace autograd {\n+\n+static Tensor dispatch_clamp(const Tensor & self, Scalar min, Scalar max) {\n+  AutoNoGIL no_gil;\n+  AutoGPU auto_gpu(self);\n+  return self.clamp(min, max);\n+}\n+static Tensor dispatch_clamp_min(const Tensor & self, Scalar min) {\n+  AutoNoGIL no_gil;\n+  AutoGPU auto_gpu(self);\n+  return self.clamp_min(min);\n+}\n+static Tensor dispatch_clamp_max(const Tensor & self, Scalar max) {\n+  AutoNoGIL no_gil;\n+  AutoGPU auto_gpu(self);\n+  return self.clamp_max(max);\n+}\n+\n+static PyObject * THPVariable_clamp(PyObject* module, PyObject* args, PyObject* kwargs)\n+{\n+  HANDLE_TH_ERRORS\n+  static PythonArgParser parser({\n+    \"clamp(Tensor input, Scalar min=None, Scalar max=None)\",\n+  });\n+  PyObject* parsed_args[4];\n+  auto r = parser.parse(args, kwargs, parsed_args);\n+  if (!r.isNone(1) && !r.isNone(2)) {\n+    return THPVariable_Wrap(dispatch_clamp(r.tensor(0), r.scalar(1), r.scalar(2)));\n+  } else if (!r.isNone(1)) {\n+    return THPVariable_Wrap(dispatch_clamp_min(r.tensor(0), r.scalar(1)));\n+  } else if (!r.isNone(2)) {\n+    return THPVariable_Wrap(dispatch_clamp_max(r.tensor(0), r.scalar(2)));\n+  } else {\n+    throw std::runtime_error(\"At least one of 'min' or 'max' must not be None\");\n+  }\n+  END_HANDLE_TH_ERRORS\n+}\n+\n+static PyObject * THPVariable_from_numpy(PyObject* module, PyObject* arg)\n+{\n+  HANDLE_TH_ERRORS\n+  auto data = torch::utils::tensor_from_numpy(arg);\n+  return THPVariable_Wrap(make_variable(std::move(data)));\n+  END_HANDLE_TH_ERRORS\n+}", "path": "tools/autograd/templates/python_torch_functions.cpp", "position": 69, "original_position": 63, "commit_id": "c7b63bd434ccce40348954794518030282ff0ddc", "original_commit_id": "2ff436294709b07373c384c6624382cf7dc9fe19", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "Can you add arguments saying why these functions need to be implemented manually?", "created_at": "2018-01-11T08:58:45Z", "updated_at": "2018-11-23T15:38:03Z", "html_url": "https://github.com/pytorch/pytorch/pull/4565#discussion_r160895370", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/4565", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/160895370"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/4565#discussion_r160895370"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/4565"}}, "body_html": "<p>Can you add arguments saying why these functions need to be implemented manually?</p>", "body_text": "Can you add arguments saying why these functions need to be implemented manually?"}
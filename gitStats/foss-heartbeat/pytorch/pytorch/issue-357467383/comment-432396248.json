{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/432396248", "html_url": "https://github.com/pytorch/pytorch/issues/11317#issuecomment-432396248", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/11317", "id": 432396248, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjM5NjI0OA==", "user": {"login": "rilesdg3", "id": 44391381, "node_id": "MDQ6VXNlcjQ0MzkxMzgx", "avatar_url": "https://avatars3.githubusercontent.com/u/44391381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rilesdg3", "html_url": "https://github.com/rilesdg3", "followers_url": "https://api.github.com/users/rilesdg3/followers", "following_url": "https://api.github.com/users/rilesdg3/following{/other_user}", "gists_url": "https://api.github.com/users/rilesdg3/gists{/gist_id}", "starred_url": "https://api.github.com/users/rilesdg3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rilesdg3/subscriptions", "organizations_url": "https://api.github.com/users/rilesdg3/orgs", "repos_url": "https://api.github.com/users/rilesdg3/repos", "events_url": "https://api.github.com/users/rilesdg3/events{/privacy}", "received_events_url": "https://api.github.com/users/rilesdg3/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-23T19:58:18Z", "updated_at": "2018-10-23T20:32:20Z", "author_association": "NONE", "body_html": "<p>I am having this issue, I cloned from Git and built from source on 10-22-2018, and this is still a problem</p>\n<p>Everything compiles but will crash when I do it this way<br>\n<code>auto* w2 = w.CreateBlob(\"w2\")-&gt;GetMutable&lt;caffe2::Tensor&gt;();</code></p>\n<p>I get the following</p>\n<p>*** Aborted at 1540324467 (unix time) try \"date -d @1540324467\" if you are using GNU date ***<br>\nPC: @           0x440e6e at::DataPtr::device()<br>\n*** SIGSEGV (<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13396064\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/0x38\">@0x38</a>) received by PID 3436 (TID 0x7ffff7f6ab80) from PID 56; stack trace: ***<br>\n@     0x7ffff4e91390 (unknown)<br>\n@           0x440e6e at::DataPtr::device()<br>\n@           0x4420c8 at::StorageImpl::device()<br>\n@           0x4423f2 at::Storage::device()<br>\n@           0x442b92 at::TensorImpl::GetDevice()<br>\n@           0x442d76 at::TensorImpl::CopyFrom()<br>\n@           0x44478f caffe2::Tensor::CopyFrom()<br>\n@           0x43edd3 main<br>\n@     0x7ffff4ad6830 __libc_start_main<br>\n@           0x40d9a9 _start<br>\n@                0x0 (unknown)</p>\n<p>and when I try it this way<br>\n<code>auto* w1 = w.CreateBlob(\"w1\")-&gt;GetMutable(caffe2::Tensor);</code></p>\n<p>I get the following error<br>\nerror: expected primary-expression before \u2018)\u2019 token</p>\n<p>This is my first time posting on Git, so let me know if I am missing/not doing something properly</p>\n<p>thank you</p>\n<p><strong>Update:</strong> I think I figured it out<br>\nI replaced <code>auto* w2 = w.CreateBlob(\"w2\")-&gt;GetMutable&lt;caffe2::Tensor&gt;();</code></p>\n<p>with</p>\n<p><code>caffe2::Blob* w2 = workspace.CreateBlob(\"w2\");</code><br>\n<code> caffe2::Tensor* w2ten = caffe2::BlobGetMutableTensor(w2, caffe2::DeviceType::CPU);</code></p>\n<p>which I think is what ezyang says</p>", "body_text": "I am having this issue, I cloned from Git and built from source on 10-22-2018, and this is still a problem\nEverything compiles but will crash when I do it this way\nauto* w2 = w.CreateBlob(\"w2\")->GetMutable<caffe2::Tensor>();\nI get the following\n*** Aborted at 1540324467 (unix time) try \"date -d @1540324467\" if you are using GNU date ***\nPC: @           0x440e6e at::DataPtr::device()\n*** SIGSEGV (@0x38) received by PID 3436 (TID 0x7ffff7f6ab80) from PID 56; stack trace: ***\n@     0x7ffff4e91390 (unknown)\n@           0x440e6e at::DataPtr::device()\n@           0x4420c8 at::StorageImpl::device()\n@           0x4423f2 at::Storage::device()\n@           0x442b92 at::TensorImpl::GetDevice()\n@           0x442d76 at::TensorImpl::CopyFrom()\n@           0x44478f caffe2::Tensor::CopyFrom()\n@           0x43edd3 main\n@     0x7ffff4ad6830 __libc_start_main\n@           0x40d9a9 _start\n@                0x0 (unknown)\nand when I try it this way\nauto* w1 = w.CreateBlob(\"w1\")->GetMutable(caffe2::Tensor);\nI get the following error\nerror: expected primary-expression before \u2018)\u2019 token\nThis is my first time posting on Git, so let me know if I am missing/not doing something properly\nthank you\nUpdate: I think I figured it out\nI replaced auto* w2 = w.CreateBlob(\"w2\")->GetMutable<caffe2::Tensor>();\nwith\ncaffe2::Blob* w2 = workspace.CreateBlob(\"w2\");\n caffe2::Tensor* w2ten = caffe2::BlobGetMutableTensor(w2, caffe2::DeviceType::CPU);\nwhich I think is what ezyang says", "body": "I am having this issue, I cloned from Git and built from source on 10-22-2018, and this is still a problem\r\n\r\nEverything compiles but will crash when I do it this way\r\n`auto* w2 = w.CreateBlob(\"w2\")->GetMutable<caffe2::Tensor>();`\r\n\r\nI get the following \r\n\r\n*** Aborted at 1540324467 (unix time) try \"date -d @1540324467\" if you are using GNU date ***\r\nPC: @           0x440e6e at::DataPtr::device()\r\n*** SIGSEGV (@0x38) received by PID 3436 (TID 0x7ffff7f6ab80) from PID 56; stack trace: ***\r\n    @     0x7ffff4e91390 (unknown)\r\n    @           0x440e6e at::DataPtr::device()\r\n    @           0x4420c8 at::StorageImpl::device()\r\n    @           0x4423f2 at::Storage::device()\r\n    @           0x442b92 at::TensorImpl::GetDevice()\r\n    @           0x442d76 at::TensorImpl::CopyFrom()\r\n    @           0x44478f caffe2::Tensor::CopyFrom()\r\n    @           0x43edd3 main\r\n    @     0x7ffff4ad6830 __libc_start_main\r\n    @           0x40d9a9 _start\r\n    @                0x0 (unknown)\r\n\r\nand when I try it this way\r\n`auto* w1 = w.CreateBlob(\"w1\")->GetMutable(caffe2::Tensor);`\r\n\r\nI get the following error\r\nerror: expected primary-expression before \u2018)\u2019 token\r\n\r\nThis is my first time posting on Git, so let me know if I am missing/not doing something properly\r\n\r\nthank you\r\n\r\n**Update:** I think I figured it out\r\nI replaced `auto* w2 = w.CreateBlob(\"w2\")->GetMutable<caffe2::Tensor>();`\r\n\r\nwith\r\n\r\n`caffe2::Blob* w2 = workspace.CreateBlob(\"w2\");`\r\n`\r\ncaffe2::Tensor* w2ten = caffe2::BlobGetMutableTensor(w2, caffe2::DeviceType::CPU);`\r\n\r\nwhich I think is what ezyang says"}
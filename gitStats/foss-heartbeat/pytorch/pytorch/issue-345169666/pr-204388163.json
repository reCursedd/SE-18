{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/9927", "id": 204388163, "node_id": "MDExOlB1bGxSZXF1ZXN0MjA0Mzg4MTYz", "html_url": "https://github.com/pytorch/pytorch/pull/9927", "diff_url": "https://github.com/pytorch/pytorch/pull/9927.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/9927.patch", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/9927", "number": 9927, "state": "closed", "locked": false, "title": "Changed serialization mechanism of LambdaLR scheduler", "user": {"login": "0phoff", "id": 11853089, "node_id": "MDQ6VXNlcjExODUzMDg5", "avatar_url": "https://avatars3.githubusercontent.com/u/11853089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0phoff", "html_url": "https://github.com/0phoff", "followers_url": "https://api.github.com/users/0phoff/followers", "following_url": "https://api.github.com/users/0phoff/following{/other_user}", "gists_url": "https://api.github.com/users/0phoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/0phoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0phoff/subscriptions", "organizations_url": "https://api.github.com/users/0phoff/orgs", "repos_url": "https://api.github.com/users/0phoff/repos", "events_url": "https://api.github.com/users/0phoff/events{/privacy}", "received_events_url": "https://api.github.com/users/0phoff/received_events", "type": "User", "site_admin": false}, "body": "I opened an issue explaining some of my frustrations with the current state of schedulers.\r\nWhile most points that I raised in [that issue](https://github.com/pytorch/pytorch/issues/8741#issuecomment-404449697) need to be discussed more thoroughly before being implemented, there are some that are not so difficult to fix.\r\n\r\nThis PR changes the way the LambdaLR scheduler gets serialized:  \r\n> The lr_lambda functions are only saved if the are callable objects (which can be stateful).\r\n> There is no point in saving functions/lambdas as you need their definition before unpickling and they are stateless.\r\n\r\nThis has the big advantage that the scheduler is serializable, even if you use lambda functions or locally defined functions (aka a function in a function).\r\n\r\nDoes this functionality need any unit tests?", "created_at": "2018-07-27T10:11:24Z", "updated_at": "2018-08-01T02:40:00Z", "closed_at": "2018-08-01T02:40:00Z", "merged_at": null, "merge_commit_sha": "85afbcdd3f39bf43029aabb9b9a3eac01a87ac55", "assignee": null, "assignees": [], "requested_reviewers": [{"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, {"login": "colesbury", "id": 655866, "node_id": "MDQ6VXNlcjY1NTg2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/655866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colesbury", "html_url": "https://github.com/colesbury", "followers_url": "https://api.github.com/users/colesbury/followers", "following_url": "https://api.github.com/users/colesbury/following{/other_user}", "gists_url": "https://api.github.com/users/colesbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/colesbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colesbury/subscriptions", "organizations_url": "https://api.github.com/users/colesbury/orgs", "repos_url": "https://api.github.com/users/colesbury/repos", "events_url": "https://api.github.com/users/colesbury/events{/privacy}", "received_events_url": "https://api.github.com/users/colesbury/received_events", "type": "User", "site_admin": false}, {"login": "gchanan", "id": 3768583, "node_id": "MDQ6VXNlcjM3Njg1ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3768583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gchanan", "html_url": "https://github.com/gchanan", "followers_url": "https://api.github.com/users/gchanan/followers", "following_url": "https://api.github.com/users/gchanan/following{/other_user}", "gists_url": "https://api.github.com/users/gchanan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gchanan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gchanan/subscriptions", "organizations_url": "https://api.github.com/users/gchanan/orgs", "repos_url": "https://api.github.com/users/gchanan/repos", "events_url": "https://api.github.com/users/gchanan/events{/privacy}", "received_events_url": "https://api.github.com/users/gchanan/received_events", "type": "User", "site_admin": false}, {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}], "requested_teams": [], "labels": [], "milestone": null, "commits_url": "https://api.github.com/repos/pytorch/pytorch/pulls/9927/commits", "review_comments_url": "https://api.github.com/repos/pytorch/pytorch/pulls/9927/comments", "review_comment_url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9927/comments", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/66d924b28979b3a4aeb0fc5f702ae735c4c842e7", "head": {"label": "0phoff:serialize_lambdalr", "ref": "serialize_lambdalr", "sha": "66d924b28979b3a4aeb0fc5f702ae735c4c842e7", "user": {"login": "0phoff", "id": 11853089, "node_id": "MDQ6VXNlcjExODUzMDg5", "avatar_url": "https://avatars3.githubusercontent.com/u/11853089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0phoff", "html_url": "https://github.com/0phoff", "followers_url": "https://api.github.com/users/0phoff/followers", "following_url": "https://api.github.com/users/0phoff/following{/other_user}", "gists_url": "https://api.github.com/users/0phoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/0phoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0phoff/subscriptions", "organizations_url": "https://api.github.com/users/0phoff/orgs", "repos_url": "https://api.github.com/users/0phoff/repos", "events_url": "https://api.github.com/users/0phoff/events{/privacy}", "received_events_url": "https://api.github.com/users/0phoff/received_events", "type": "User", "site_admin": false}, "repo": {"id": 140298317, "node_id": "MDEwOlJlcG9zaXRvcnkxNDAyOTgzMTc=", "name": "pytorch", "full_name": "0phoff/pytorch", "private": false, "owner": {"login": "0phoff", "id": 11853089, "node_id": "MDQ6VXNlcjExODUzMDg5", "avatar_url": "https://avatars3.githubusercontent.com/u/11853089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0phoff", "html_url": "https://github.com/0phoff", "followers_url": "https://api.github.com/users/0phoff/followers", "following_url": "https://api.github.com/users/0phoff/following{/other_user}", "gists_url": "https://api.github.com/users/0phoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/0phoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0phoff/subscriptions", "organizations_url": "https://api.github.com/users/0phoff/orgs", "repos_url": "https://api.github.com/users/0phoff/repos", "events_url": "https://api.github.com/users/0phoff/events{/privacy}", "received_events_url": "https://api.github.com/users/0phoff/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/0phoff/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": true, "url": "https://api.github.com/repos/0phoff/pytorch", "forks_url": "https://api.github.com/repos/0phoff/pytorch/forks", "keys_url": "https://api.github.com/repos/0phoff/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/0phoff/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/0phoff/pytorch/teams", "hooks_url": "https://api.github.com/repos/0phoff/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/0phoff/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/0phoff/pytorch/events", "assignees_url": "https://api.github.com/repos/0phoff/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/0phoff/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/0phoff/pytorch/tags", "blobs_url": "https://api.github.com/repos/0phoff/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/0phoff/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/0phoff/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/0phoff/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/0phoff/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/0phoff/pytorch/languages", "stargazers_url": "https://api.github.com/repos/0phoff/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/0phoff/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/0phoff/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/0phoff/pytorch/subscription", "commits_url": "https://api.github.com/repos/0phoff/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/0phoff/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/0phoff/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/0phoff/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/0phoff/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/0phoff/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/0phoff/pytorch/merges", "archive_url": "https://api.github.com/repos/0phoff/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/0phoff/pytorch/downloads", "issues_url": "https://api.github.com/repos/0phoff/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/0phoff/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/0phoff/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/0phoff/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/0phoff/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/0phoff/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/0phoff/pytorch/deployments", "created_at": "2018-07-09T14:35:40Z", "updated_at": "2018-07-30T09:20:24Z", "pushed_at": "2018-07-30T09:20:33Z", "git_url": "git://github.com/0phoff/pytorch.git", "ssh_url": "git@github.com:0phoff/pytorch.git", "clone_url": "https://github.com/0phoff/pytorch.git", "svn_url": "https://github.com/0phoff/pytorch", "homepage": "http://pytorch.org", "size": 65994, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "pytorch:master", "ref": "master", "sha": "3609977d7f4629f75dd1f8d904ddd5b52388124f", "user": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 65600975, "node_id": "MDEwOlJlcG9zaXRvcnk2NTYwMDk3NQ==", "name": "pytorch", "full_name": "pytorch/pytorch", "private": false, "owner": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/pytorch/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": false, "url": "https://api.github.com/repos/pytorch/pytorch", "forks_url": "https://api.github.com/repos/pytorch/pytorch/forks", "keys_url": "https://api.github.com/repos/pytorch/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pytorch/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pytorch/pytorch/teams", "hooks_url": "https://api.github.com/repos/pytorch/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/pytorch/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/pytorch/pytorch/events", "assignees_url": "https://api.github.com/repos/pytorch/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/pytorch/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/pytorch/pytorch/tags", "blobs_url": "https://api.github.com/repos/pytorch/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pytorch/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pytorch/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pytorch/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/pytorch/pytorch/languages", "stargazers_url": "https://api.github.com/repos/pytorch/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/pytorch/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/pytorch/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/pytorch/pytorch/subscription", "commits_url": "https://api.github.com/repos/pytorch/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pytorch/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pytorch/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pytorch/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/pytorch/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pytorch/pytorch/merges", "archive_url": "https://api.github.com/repos/pytorch/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pytorch/pytorch/downloads", "issues_url": "https://api.github.com/repos/pytorch/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/pytorch/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/pytorch/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/pytorch/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pytorch/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/pytorch/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/pytorch/pytorch/deployments", "created_at": "2016-08-13T05:26:41Z", "updated_at": "2018-11-24T05:35:41Z", "pushed_at": "2018-11-24T05:34:07Z", "git_url": "git://github.com/pytorch/pytorch.git", "ssh_url": "git@github.com:pytorch/pytorch.git", "clone_url": "https://github.com/pytorch/pytorch.git", "svn_url": "https://github.com/pytorch/pytorch", "homepage": "http://pytorch.org", "size": 89651, "stargazers_count": 21577, "watchers_count": 21577, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 5149, "mirror_url": null, "archived": false, "open_issues_count": 2193, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 5149, "open_issues": 2193, "watchers": 21577, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9927"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/9927"}, "issue": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/9927"}, "comments": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/9927/comments"}, "review_comments": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9927/comments"}, "review_comment": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9927/commits"}, "statuses": {"href": "https://api.github.com/repos/pytorch/pytorch/statuses/66d924b28979b3a4aeb0fc5f702ae735c4c842e7"}}, "author_association": "CONTRIBUTOR", "body_html": "<p>I opened an issue explaining some of my frustrations with the current state of schedulers.<br>\nWhile most points that I raised in <a href=\"https://github.com/pytorch/pytorch/issues/8741#issuecomment-404449697\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/8741/hovercard\">that issue</a> need to be discussed more thoroughly before being implemented, there are some that are not so difficult to fix.</p>\n<p>This PR changes the way the LambdaLR scheduler gets serialized:</p>\n<blockquote>\n<p>The lr_lambda functions are only saved if the are callable objects (which can be stateful).<br>\nThere is no point in saving functions/lambdas as you need their definition before unpickling and they are stateless.</p>\n</blockquote>\n<p>This has the big advantage that the scheduler is serializable, even if you use lambda functions or locally defined functions (aka a function in a function).</p>\n<p>Does this functionality need any unit tests?</p>", "body_text": "I opened an issue explaining some of my frustrations with the current state of schedulers.\nWhile most points that I raised in that issue need to be discussed more thoroughly before being implemented, there are some that are not so difficult to fix.\nThis PR changes the way the LambdaLR scheduler gets serialized:\n\nThe lr_lambda functions are only saved if the are callable objects (which can be stateful).\nThere is no point in saving functions/lambdas as you need their definition before unpickling and they are stateless.\n\nThis has the big advantage that the scheduler is serializable, even if you use lambda functions or locally defined functions (aka a function in a function).\nDoes this functionality need any unit tests?", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 3, "review_comments": 0, "maintainer_can_modify": false, "commits": 2, "additions": 68, "deletions": 1, "changed_files": 2}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11722", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11722/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11722/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11722/events", "html_url": "https://github.com/pytorch/pytorch/pull/11722", "id": 360482523, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE1NzMyNzk5", "number": 11722, "title": "Polish CPP docs, Minor Python Docs Fixes", "user": {"login": "svenevs", "id": 5871461, "node_id": "MDQ6VXNlcjU4NzE0NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5871461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svenevs", "html_url": "https://github.com/svenevs", "followers_url": "https://api.github.com/users/svenevs/followers", "following_url": "https://api.github.com/users/svenevs/following{/other_user}", "gists_url": "https://api.github.com/users/svenevs/gists{/gist_id}", "starred_url": "https://api.github.com/users/svenevs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svenevs/subscriptions", "organizations_url": "https://api.github.com/users/svenevs/orgs", "repos_url": "https://api.github.com/users/svenevs/repos", "events_url": "https://api.github.com/users/svenevs/events{/privacy}", "received_events_url": "https://api.github.com/users/svenevs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-14T23:25:30Z", "updated_at": "2018-09-19T15:22:53Z", "closed_at": "2018-09-19T15:22:53Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/11722", "html_url": "https://github.com/pytorch/pytorch/pull/11722", "diff_url": "https://github.com/pytorch/pytorch/pull/11722.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/11722.patch"}, "body_html": "<p>CC: <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6429851\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/goldsborough\">@goldsborough</a></p>\n<h2>Generic CPP Docs Stuff</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Clean targets</p>\n<ul>\n<li>Python: add <code>-f</code> so that a vanilla <code>make clean</code> doesn't formally fail ;)</li>\n<li>CPP: has to be before the catch-all and should also delete generated api.</li>\n</ul>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Simplify <code>Doxyfile</code> for maintainers <g-emoji class=\"g-emoji\" alias=\"boom\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f4a5.png\">\ud83d\udca5</g-emoji></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CPP: separate <code>source</code> and <code>build</code> directories.</p>\n<ul>\n<li>Local build times go from 15 minutes to 2 <g-emoji class=\"g-emoji\" alias=\"scream\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f631.png\">\ud83d\ude31</g-emoji></li>\n<li>CPP auto-doc pushing repo script thing to host online does <strong>not</strong> need to change (still just <code>cd docs/cpp &amp;&amp; make html</code> followed by copying <code>docs/cpp/build/html/**</code>.</li>\n</ul>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> See <code>HTML_OUTPUT</code> in <code>Doxyfile</code> for how to easily compare doxygen html with Sphinx</p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> fix <code>FunctionImpl</code> docs (nesting document-comments <code>///</code> and <code>/*scale=0.5*/</code> apparently confuses doxygen.</p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\">  remove forward declaration to guarantee correct location extracted by exhale</p>\n</li>\n</ul>\n<h2>CPP and Python <code>conf.py</code> Cleanup / HTML Theme \"Fixes\"</h2>\n<p>Separating into two categories since I cannot figure out how the python docs build.  <strong>Somebody needs to test them and report back success or failure</strong>.</p>\n<h3>Removal of <code>html_context['css_files']</code></h3>\n<p>Using <code>html_context['css_files']</code> is apparently <em>formally</em> undefined behavior.  See <a href=\"https://github.com/sphinx-doc/sphinx/issues/2442\" data-hovercard-type=\"issue\" data-hovercard-url=\"/sphinx-doc/sphinx/issues/2442/hovercard\">sphinx/#2442</a>.  Unfortunately, this took a long time to have an official fix in Sphinx.  Sphinx 1.8 and later you can use <code>html_css_files</code>, but since the python docs are pinned at <code>1.7.9</code> (as well as CPP docs <strong>will</strong> break with Sphinx 1.8 if more files are documented), I'm adding the \"old\" <code>setup(app)</code> method.  The sphinx 1.8 // cpp docs issues are something in breathe that will take a lot of effort to fix <g-emoji class=\"g-emoji\" alias=\"cry\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f622.png\">\ud83d\ude22</g-emoji></p>\n<h3>Removal of <code>html_static_path</code></h3>\n<p>Setting <code>html_theme_path</code> is no longer necessary, Sphinx 1.6+ allow html theme's to set this in their <code>setup(app)</code> function (and the sphinx rtd theme does it correctly).  In some (rare) cases it may actually create problems / conflicts.</p>\n<p>I guess officially you could introduce convoluted logic to check if Sphinx &lt;1.6 but I view that as pointless.</p>\n<hr>\n<h4>CPP docs html setup fixes / cleanup</h4>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> <code>html_context['css_files']</code> removal</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> remove <code>html_static_path</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> verified as valid (works with Sphinx 1.7 and 1.8)</li>\n</ul>\n<h4>Python: html setup fixes / cleanup</h4>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> <code>html_context['css_files']</code> removal</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> remove <code>html_static_path</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> verified as valid</li>\n</ul>", "body_text": "CC: @goldsborough\nGeneric CPP Docs Stuff\n\n\n Clean targets\n\nPython: add -f so that a vanilla make clean doesn't formally fail ;)\nCPP: has to be before the catch-all and should also delete generated api.\n\n\n\n Simplify Doxyfile for maintainers \ud83d\udca5\n\n\n CPP: separate source and build directories.\n\nLocal build times go from 15 minutes to 2 \ud83d\ude31\nCPP auto-doc pushing repo script thing to host online does not need to change (still just cd docs/cpp && make html followed by copying docs/cpp/build/html/**.\n\n\n\n See HTML_OUTPUT in Doxyfile for how to easily compare doxygen html with Sphinx\n\n\n fix FunctionImpl docs (nesting document-comments /// and /*scale=0.5*/ apparently confuses doxygen.\n\n\n  remove forward declaration to guarantee correct location extracted by exhale\n\n\nCPP and Python conf.py Cleanup / HTML Theme \"Fixes\"\nSeparating into two categories since I cannot figure out how the python docs build.  Somebody needs to test them and report back success or failure.\nRemoval of html_context['css_files']\nUsing html_context['css_files'] is apparently formally undefined behavior.  See sphinx/#2442.  Unfortunately, this took a long time to have an official fix in Sphinx.  Sphinx 1.8 and later you can use html_css_files, but since the python docs are pinned at 1.7.9 (as well as CPP docs will break with Sphinx 1.8 if more files are documented), I'm adding the \"old\" setup(app) method.  The sphinx 1.8 // cpp docs issues are something in breathe that will take a lot of effort to fix \ud83d\ude22\nRemoval of html_static_path\nSetting html_theme_path is no longer necessary, Sphinx 1.6+ allow html theme's to set this in their setup(app) function (and the sphinx rtd theme does it correctly).  In some (rare) cases it may actually create problems / conflicts.\nI guess officially you could introduce convoluted logic to check if Sphinx <1.6 but I view that as pointless.\n\nCPP docs html setup fixes / cleanup\n\n html_context['css_files'] removal\n remove html_static_path\n verified as valid (works with Sphinx 1.7 and 1.8)\n\nPython: html setup fixes / cleanup\n\n html_context['css_files'] removal\n remove html_static_path\n verified as valid", "body": "CC: @goldsborough \r\n\r\n## Generic CPP Docs Stuff\r\n\r\n- [x] Clean targets\r\n\r\n    - Python: add `-f` so that a vanilla `make clean` doesn't formally fail ;)\r\n    - CPP: has to be before the catch-all and should also delete generated api.\r\n\r\n- [x] Simplify `Doxyfile` for maintainers :boom:\r\n\r\n- [x] CPP: separate `source` and `build` directories.\r\n\r\n    - Local build times go from 15 minutes to 2 :scream:\r\n    - CPP auto-doc pushing repo script thing to host online does **not** need to change (still just `cd docs/cpp && make html` followed by copying `docs/cpp/build/html/**`.\r\n\r\n- [x] See `HTML_OUTPUT` in `Doxyfile` for how to easily compare doxygen html with Sphinx\r\n\r\n- [x] fix `FunctionImpl` docs (nesting document-comments `///` and `/*scale=0.5*/` apparently confuses doxygen.\r\n- [x]  remove forward declaration to guarantee correct location extracted by exhale\r\n\r\n## CPP and Python `conf.py` Cleanup / HTML Theme \"Fixes\"\r\n\r\nSeparating into two categories since I cannot figure out how the python docs build.  **Somebody needs to test them and report back success or failure**.\r\n\r\n### Removal of `html_context['css_files']`\r\n\r\nUsing `html_context['css_files']` is apparently _formally_ undefined behavior.  See [sphinx/#2442](https://github.com/sphinx-doc/sphinx/issues/2442).  Unfortunately, this took a long time to have an official fix in Sphinx.  Sphinx 1.8 and later you can use `html_css_files`, but since the python docs are pinned at `1.7.9` (as well as CPP docs **will** break with Sphinx 1.8 if more files are documented), I'm adding the \"old\" `setup(app)` method.  The sphinx 1.8 // cpp docs issues are something in breathe that will take a lot of effort to fix :cry:\r\n\r\n### Removal of `html_static_path`\r\n\r\nSetting `html_theme_path` is no longer necessary, Sphinx 1.6+ allow html theme's to set this in their `setup(app)` function (and the sphinx rtd theme does it correctly).  In some (rare) cases it may actually create problems / conflicts.\r\n\r\nI guess officially you could introduce convoluted logic to check if Sphinx <1.6 but I view that as pointless.\r\n\r\n--------------------------------------------------------------------------------------------------------------------------------\r\n\r\n#### CPP docs html setup fixes / cleanup\r\n\r\n- [x] `html_context['css_files']` removal\r\n- [x] remove `html_static_path`\r\n- [x] verified as valid (works with Sphinx 1.7 and 1.8)\r\n\r\n#### Python: html setup fixes / cleanup\r\n\r\n- [x] `html_context['css_files']` removal\r\n- [x] remove `html_static_path`\r\n- [x] verified as valid\r\n"}
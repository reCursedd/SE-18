{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5910", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5910/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5910/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5910/events", "html_url": "https://github.com/pytorch/pytorch/pull/5910", "id": 306990911, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc2Mjg2MDk4", "number": 5910, "title": "[distributions] Support pickling of constraint objects", "user": {"login": "fritzo", "id": 648532, "node_id": "MDQ6VXNlcjY0ODUzMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/648532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fritzo", "html_url": "https://github.com/fritzo", "followers_url": "https://api.github.com/users/fritzo/followers", "following_url": "https://api.github.com/users/fritzo/following{/other_user}", "gists_url": "https://api.github.com/users/fritzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/fritzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fritzo/subscriptions", "organizations_url": "https://api.github.com/users/fritzo/orgs", "repos_url": "https://api.github.com/users/fritzo/repos", "events_url": "https://api.github.com/users/fritzo/events{/privacy}", "received_events_url": "https://api.github.com/users/fritzo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-20T18:40:08Z", "updated_at": "2018-11-23T15:40:59Z", "closed_at": "2018-03-20T21:00:38Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/5910", "html_url": "https://github.com/pytorch/pytorch/pull/5910", "diff_url": "https://github.com/pytorch/pytorch/pull/5910.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/5910.patch"}, "body_html": "<p>This PR adds support for pickling of <code>Constraint</code> objects. Previously the pickle-unpickle process broke constraint registration due to our use of hashing by singleton instance. To fix this, we now hash only by <code>Constraint</code> type, which is preserved by unpickled. The constraint registration table should remain semantically unchanged in this PR; only the registration syntax changes.</p>\n<p>This PR also renames <code>BotlzmannTransform</code> to a more familiar <code>SoftmaxTransform</code>.</p>\n<h2>Tested</h2>\n<ul>\n<li>existing unit tests</li>\n<li>verified that constraints can now be pickled when used in Pyro</li>\n</ul>", "body_text": "This PR adds support for pickling of Constraint objects. Previously the pickle-unpickle process broke constraint registration due to our use of hashing by singleton instance. To fix this, we now hash only by Constraint type, which is preserved by unpickled. The constraint registration table should remain semantically unchanged in this PR; only the registration syntax changes.\nThis PR also renames BotlzmannTransform to a more familiar SoftmaxTransform.\nTested\n\nexisting unit tests\nverified that constraints can now be pickled when used in Pyro", "body": "This PR adds support for pickling of `Constraint` objects. Previously the pickle-unpickle process broke constraint registration due to our use of hashing by singleton instance. To fix this, we now hash only by `Constraint` type, which is preserved by unpickled. The constraint registration table should remain semantically unchanged in this PR; only the registration syntax changes.\r\n\r\nThis PR also renames `BotlzmannTransform` to a more familiar `SoftmaxTransform`.\r\n\r\n## Tested\r\n\r\n- existing unit tests\r\n- verified that constraints can now be pickled when used in Pyro"}
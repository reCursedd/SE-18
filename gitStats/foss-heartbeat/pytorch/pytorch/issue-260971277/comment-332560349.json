{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/332560349", "html_url": "https://github.com/pytorch/pytorch/pull/2877#issuecomment-332560349", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2877", "id": 332560349, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjU2MDM0OQ==", "user": {"login": "ducksoup", "id": 1279573, "node_id": "MDQ6VXNlcjEyNzk1NzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1279573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ducksoup", "html_url": "https://github.com/ducksoup", "followers_url": "https://api.github.com/users/ducksoup/followers", "following_url": "https://api.github.com/users/ducksoup/following{/other_user}", "gists_url": "https://api.github.com/users/ducksoup/gists{/gist_id}", "starred_url": "https://api.github.com/users/ducksoup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ducksoup/subscriptions", "organizations_url": "https://api.github.com/users/ducksoup/orgs", "repos_url": "https://api.github.com/users/ducksoup/repos", "events_url": "https://api.github.com/users/ducksoup/events{/privacy}", "received_events_url": "https://api.github.com/users/ducksoup/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-27T15:29:55Z", "updated_at": "2017-09-27T15:29:55Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I guess there are three separate issues here:</p>\n<ol>\n<li>nccl.py is not able to correctly detect nccl when the lib is in any of the /usr/lib/${ARCH}-linux-gnu folders and the header in /usr/local (this is the default when installing nccl 2 from the deb package in Ubuntu).</li>\n<li>gloo's current cmake only handles x86_64-linux-gnu, but fails to locate nccl in powerpc64le-linux-gnu and aarch64-linux-gnu</li>\n<li>gloo's current cmake doesn't have the option form manually-specified NCCL_INCLUDE_DIR  and NCCL_LIB_DIR</li>\n</ol>\n<p>I'm not entirely sure how to solve (3) as I've zero experience with cmake, but I could modify this PR to only solve (1) and create a PR for gloo to solve (2).</p>", "body_text": "I guess there are three separate issues here:\n\nnccl.py is not able to correctly detect nccl when the lib is in any of the /usr/lib/${ARCH}-linux-gnu folders and the header in /usr/local (this is the default when installing nccl 2 from the deb package in Ubuntu).\ngloo's current cmake only handles x86_64-linux-gnu, but fails to locate nccl in powerpc64le-linux-gnu and aarch64-linux-gnu\ngloo's current cmake doesn't have the option form manually-specified NCCL_INCLUDE_DIR  and NCCL_LIB_DIR\n\nI'm not entirely sure how to solve (3) as I've zero experience with cmake, but I could modify this PR to only solve (1) and create a PR for gloo to solve (2).", "body": "I guess there are three separate issues here:\r\n\r\n1. nccl.py is not able to correctly detect nccl when the lib is in any of the /usr/lib/${ARCH}-linux-gnu folders and the header in /usr/local (this is the default when installing nccl 2 from the deb package in Ubuntu).\r\n2. gloo's current cmake only handles x86_64-linux-gnu, but fails to locate nccl in powerpc64le-linux-gnu and aarch64-linux-gnu\r\n3. gloo's current cmake doesn't have the option form manually-specified NCCL_INCLUDE_DIR  and NCCL_LIB_DIR\r\n\r\nI'm not entirely sure how to solve (3) as I've zero experience with cmake, but I could modify this PR to only solve (1) and create a PR for gloo to solve (2)."}
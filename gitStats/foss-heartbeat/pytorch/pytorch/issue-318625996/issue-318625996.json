{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7068", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7068/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7068/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7068/events", "html_url": "https://github.com/pytorch/pytorch/issues/7068", "id": 318625996, "node_id": "MDU6SXNzdWUzMTg2MjU5OTY=", "number": 7068, "title": "can't reproduce results even set all random seeds", "user": {"login": "zzd1992", "id": 11853283, "node_id": "MDQ6VXNlcjExODUzMjgz", "avatar_url": "https://avatars3.githubusercontent.com/u/11853283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zzd1992", "html_url": "https://github.com/zzd1992", "followers_url": "https://api.github.com/users/zzd1992/followers", "following_url": "https://api.github.com/users/zzd1992/following{/other_user}", "gists_url": "https://api.github.com/users/zzd1992/gists{/gist_id}", "starred_url": "https://api.github.com/users/zzd1992/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zzd1992/subscriptions", "organizations_url": "https://api.github.com/users/zzd1992/orgs", "repos_url": "https://api.github.com/users/zzd1992/repos", "events_url": "https://api.github.com/users/zzd1992/events{/privacy}", "received_events_url": "https://api.github.com/users/zzd1992/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 897288569, "node_id": "MDU6TGFiZWw4OTcyODg1Njk=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/pytorch", "name": "pytorch", "color": "f05732", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-04-28T10:58:46Z", "updated_at": "2018-05-23T15:37:52Z", "closed_at": "2018-04-28T13:21:10Z", "author_association": "NONE", "body_html": "<p>My environment\uff1a python2.7, cuda8.0, cudnn, pytorch 0.3.1<br>\nI set all random seeds but I still can't reproduce results. Here is part of my code:</p>\n<div class=\"highlight highlight-source-python\"><pre>torch.manual_seed(<span class=\"pl-c1\">0</span>)\ntorch.cuda.manual_seed(<span class=\"pl-c1\">0</span>)\nnp.random.seed(<span class=\"pl-c1\">0</span>)\n\ntransform_train <span class=\"pl-k\">=</span> transforms.Compose([\n    transforms.RandomCrop(<span class=\"pl-c1\">32</span>, <span class=\"pl-v\">padding</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">4</span>),\n    transforms.RandomHorizontalFlip(),\n    transforms.ToTensor(),\n    transforms.Normalize((<span class=\"pl-c1\">0.5</span>, <span class=\"pl-c1\">0.5</span>, <span class=\"pl-c1\">0.5</span>), (<span class=\"pl-c1\">1.0</span>, <span class=\"pl-c1\">1.0</span>, <span class=\"pl-c1\">1.0</span>)),\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>transforms.Normalize((0.4914, 0.4822, 0.4465), (0.2023, 0.1994, 0.2010)),</span>\n])\n\ntransform_test <span class=\"pl-k\">=</span> transforms.Compose([\n    transforms.ToTensor(),\n    transforms.Normalize((<span class=\"pl-c1\">0.5</span>, <span class=\"pl-c1\">0.5</span>, <span class=\"pl-c1\">0.5</span>), (<span class=\"pl-c1\">1.0</span>, <span class=\"pl-c1\">1.0</span>, <span class=\"pl-c1\">1.0</span>)),\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>transforms.Normalize((0.4914, 0.4822, 0.4465), (0.2023, 0.1994, 0.2010)),</span>\n])\n\n\ntrainset <span class=\"pl-k\">=</span> torchvision.datasets.CIFAR10(<span class=\"pl-v\">root</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>./data<span class=\"pl-pds\">'</span></span>, <span class=\"pl-v\">train</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-v\">transform</span><span class=\"pl-k\">=</span>transform_train)\ntrainloader <span class=\"pl-k\">=</span> torch.utils.data.DataLoader(trainset, <span class=\"pl-v\">batch_size</span><span class=\"pl-k\">=</span>args.batchsize, <span class=\"pl-v\">shuffle</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-v\">num_workers</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">0</span>)\ntestset <span class=\"pl-k\">=</span> torchvision.datasets.CIFAR10(<span class=\"pl-v\">root</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>./data<span class=\"pl-pds\">'</span></span>, <span class=\"pl-v\">train</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>, <span class=\"pl-v\">transform</span><span class=\"pl-k\">=</span>transform_test)\ntestloader <span class=\"pl-k\">=</span> torch.utils.data.DataLoader(testset, <span class=\"pl-v\">batch_size</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">200</span>, <span class=\"pl-v\">shuffle</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>, <span class=\"pl-v\">num_workers</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">0</span>)\n\nnetwork <span class=\"pl-k\">=</span> model.Cifar()\nnetwork.cuda()</pre></div>\n<p>I am sure there is no randomness introduced by extra opreators.<br>\nI guess the problem is caused by <em>transfroms</em> or <em>DataLoader</em>.<br>\nAny one can help me ?</p>", "body_text": "My environment\uff1a python2.7, cuda8.0, cudnn, pytorch 0.3.1\nI set all random seeds but I still can't reproduce results. Here is part of my code:\ntorch.manual_seed(0)\ntorch.cuda.manual_seed(0)\nnp.random.seed(0)\n\ntransform_train = transforms.Compose([\n    transforms.RandomCrop(32, padding=4),\n    transforms.RandomHorizontalFlip(),\n    transforms.ToTensor(),\n    transforms.Normalize((0.5, 0.5, 0.5), (1.0, 1.0, 1.0)),\n    #transforms.Normalize((0.4914, 0.4822, 0.4465), (0.2023, 0.1994, 0.2010)),\n])\n\ntransform_test = transforms.Compose([\n    transforms.ToTensor(),\n    transforms.Normalize((0.5, 0.5, 0.5), (1.0, 1.0, 1.0)),\n    #transforms.Normalize((0.4914, 0.4822, 0.4465), (0.2023, 0.1994, 0.2010)),\n])\n\n\ntrainset = torchvision.datasets.CIFAR10(root='./data', train=True, transform=transform_train)\ntrainloader = torch.utils.data.DataLoader(trainset, batch_size=args.batchsize, shuffle=True, num_workers=0)\ntestset = torchvision.datasets.CIFAR10(root='./data', train=False, transform=transform_test)\ntestloader = torch.utils.data.DataLoader(testset, batch_size=200, shuffle=False, num_workers=0)\n\nnetwork = model.Cifar()\nnetwork.cuda()\nI am sure there is no randomness introduced by extra opreators.\nI guess the problem is caused by transfroms or DataLoader.\nAny one can help me ?", "body": "My environment\uff1a python2.7, cuda8.0, cudnn, pytorch 0.3.1\r\nI set all random seeds but I still can't reproduce results. Here is part of my code:\r\n```python\r\ntorch.manual_seed(0)\r\ntorch.cuda.manual_seed(0)\r\nnp.random.seed(0)\r\n\r\ntransform_train = transforms.Compose([\r\n    transforms.RandomCrop(32, padding=4),\r\n    transforms.RandomHorizontalFlip(),\r\n    transforms.ToTensor(),\r\n    transforms.Normalize((0.5, 0.5, 0.5), (1.0, 1.0, 1.0)),\r\n    #transforms.Normalize((0.4914, 0.4822, 0.4465), (0.2023, 0.1994, 0.2010)),\r\n])\r\n\r\ntransform_test = transforms.Compose([\r\n    transforms.ToTensor(),\r\n    transforms.Normalize((0.5, 0.5, 0.5), (1.0, 1.0, 1.0)),\r\n    #transforms.Normalize((0.4914, 0.4822, 0.4465), (0.2023, 0.1994, 0.2010)),\r\n])\r\n\r\n\r\ntrainset = torchvision.datasets.CIFAR10(root='./data', train=True, transform=transform_train)\r\ntrainloader = torch.utils.data.DataLoader(trainset, batch_size=args.batchsize, shuffle=True, num_workers=0)\r\ntestset = torchvision.datasets.CIFAR10(root='./data', train=False, transform=transform_test)\r\ntestloader = torch.utils.data.DataLoader(testset, batch_size=200, shuffle=False, num_workers=0)\r\n\r\nnetwork = model.Cifar()\r\nnetwork.cuda()\r\n```\r\nI am sure there is no randomness introduced by extra opreators.\r\nI guess the problem is caused by *transfroms* or *DataLoader*.\r\nAny one can help me ?"}
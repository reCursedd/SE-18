{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/352293771", "html_url": "https://github.com/pytorch/pytorch/pull/4209#issuecomment-352293771", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/4209", "id": 352293771, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjI5Mzc3MQ==", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-17T23:13:51Z", "updated_at": "2017-12-17T23:13:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>In more words:</p>\n<p>Suppose I am in a Conda environment, where I have run <code>python setup.py develop</code> in my ONNX environment. Due to the egg-link, my Python PATH at the start of <code>generate_code.py</code> looks something like this:</p>\n<pre><code>&gt;&gt;&gt; print(sys.path)\n['/home/ezyang/pytorch/tools/setup_helpers', '/home/ezyang/env/lib/python3.6', '/home/ezyang/onnx']\n</code></pre>\n<p>Now, with the old <code>sys.path</code> insertion code, the resulting <code>sys.path</code> is now:</p>\n<pre><code>&gt;&gt;&gt; print(sys.path)\n['/home/ezyang/pytorch/tools/setup_helpers', '/home/ezyang/env/lib/python3.6', '/home/ezyang/onnx', '/home/ezyang/pytorch']\n</code></pre>\n<p>Now let us consider what happens when I do <code>import tools.cwrap</code>. For non-namespace modules, Python will take the <em>first</em> directory with a folder which matches the first module. Which, in this case, is '/home/ezyang/onnx', which contains 'tools/<strong>init</strong>.py'. Thus error.</p>", "body_text": "In more words:\nSuppose I am in a Conda environment, where I have run python setup.py develop in my ONNX environment. Due to the egg-link, my Python PATH at the start of generate_code.py looks something like this:\n>>> print(sys.path)\n['/home/ezyang/pytorch/tools/setup_helpers', '/home/ezyang/env/lib/python3.6', '/home/ezyang/onnx']\n\nNow, with the old sys.path insertion code, the resulting sys.path is now:\n>>> print(sys.path)\n['/home/ezyang/pytorch/tools/setup_helpers', '/home/ezyang/env/lib/python3.6', '/home/ezyang/onnx', '/home/ezyang/pytorch']\n\nNow let us consider what happens when I do import tools.cwrap. For non-namespace modules, Python will take the first directory with a folder which matches the first module. Which, in this case, is '/home/ezyang/onnx', which contains 'tools/init.py'. Thus error.", "body": "In more words:\r\n\r\nSuppose I am in a Conda environment, where I have run `python setup.py develop` in my ONNX environment. Due to the egg-link, my Python PATH at the start of `generate_code.py` looks something like this:\r\n\r\n```\r\n>>> print(sys.path)\r\n['/home/ezyang/pytorch/tools/setup_helpers', '/home/ezyang/env/lib/python3.6', '/home/ezyang/onnx']\r\n```\r\n\r\nNow, with the old `sys.path` insertion code, the resulting `sys.path` is now:\r\n\r\n```\r\n>>> print(sys.path)\r\n['/home/ezyang/pytorch/tools/setup_helpers', '/home/ezyang/env/lib/python3.6', '/home/ezyang/onnx', '/home/ezyang/pytorch']\r\n```\r\n\r\nNow let us consider what happens when I do `import tools.cwrap`. For non-namespace modules, Python will take the *first* directory with a folder which matches the first module. Which, in this case, is '/home/ezyang/onnx', which contains 'tools/__init__.py'. Thus error."}
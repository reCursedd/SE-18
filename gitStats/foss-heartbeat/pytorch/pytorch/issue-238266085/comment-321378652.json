{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/321378652", "html_url": "https://github.com/pytorch/pytorch/issues/1894#issuecomment-321378652", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1894", "id": 321378652, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTM3ODY1Mg==", "user": {"login": "glample", "id": 8885556, "node_id": "MDQ6VXNlcjg4ODU1NTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/8885556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glample", "html_url": "https://github.com/glample", "followers_url": "https://api.github.com/users/glample/followers", "following_url": "https://api.github.com/users/glample/following{/other_user}", "gists_url": "https://api.github.com/users/glample/gists{/gist_id}", "starred_url": "https://api.github.com/users/glample/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glample/subscriptions", "organizations_url": "https://api.github.com/users/glample/orgs", "repos_url": "https://api.github.com/users/glample/repos", "events_url": "https://api.github.com/users/glample/events{/privacy}", "received_events_url": "https://api.github.com/users/glample/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-09T20:55:05Z", "updated_at": "2017-08-09T20:55:05Z", "author_association": "CONTRIBUTOR", "body_html": "<p>When I select hidden states in a LSTM output of sequences with different lengths, I use masked_select to select all relevant hidden states (with a mask <code>m</code>). But in some cases (LSTM with attention, in my case), I was using masked_fill with <code>1-m</code> to fill with <code>0</code> the non relevant states, where <code>m</code> is the same as before. So now I have to do <code>1 + (-1) * m</code>, but I think it would be nice to be able to call <code>1-m</code> directly.<br>\nMoreover, numpy allows it.</p>", "body_text": "When I select hidden states in a LSTM output of sequences with different lengths, I use masked_select to select all relevant hidden states (with a mask m). But in some cases (LSTM with attention, in my case), I was using masked_fill with 1-m to fill with 0 the non relevant states, where m is the same as before. So now I have to do 1 + (-1) * m, but I think it would be nice to be able to call 1-m directly.\nMoreover, numpy allows it.", "body": "When I select hidden states in a LSTM output of sequences with different lengths, I use masked_select to select all relevant hidden states (with a mask `m`). But in some cases (LSTM with attention, in my case), I was using masked_fill with `1-m` to fill with `0` the non relevant states, where `m` is the same as before. So now I have to do `1 + (-1) * m`, but I think it would be nice to be able to call `1-m` directly.\r\nMoreover, numpy allows it."}
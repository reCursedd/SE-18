{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13958", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13958/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13958/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13958/events", "html_url": "https://github.com/pytorch/pytorch/issues/13958", "id": 380562164, "node_id": "MDU6SXNzdWUzODA1NjIxNjQ=", "number": 13958, "title": "ATen library error : undefined reference to `at::UndefinedTensor::_singleton", "user": {"login": "adarsh-kr", "id": 12207383, "node_id": "MDQ6VXNlcjEyMjA3Mzgz", "avatar_url": "https://avatars2.githubusercontent.com/u/12207383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adarsh-kr", "html_url": "https://github.com/adarsh-kr", "followers_url": "https://api.github.com/users/adarsh-kr/followers", "following_url": "https://api.github.com/users/adarsh-kr/following{/other_user}", "gists_url": "https://api.github.com/users/adarsh-kr/gists{/gist_id}", "starred_url": "https://api.github.com/users/adarsh-kr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adarsh-kr/subscriptions", "organizations_url": "https://api.github.com/users/adarsh-kr/orgs", "repos_url": "https://api.github.com/users/adarsh-kr/repos", "events_url": "https://api.github.com/users/adarsh-kr/events{/privacy}", "received_events_url": "https://api.github.com/users/adarsh-kr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-14T07:00:59Z", "updated_at": "2018-11-16T04:24:40Z", "closed_at": "2018-11-16T04:24:40Z", "author_association": "NONE", "body_html": "<p>I am trying out the ATen library in C++ and following this <a href=\"https://pytorch.org/cppdocs/#aten\" rel=\"nofollow\">doc</a>.<br>\nOn compilation the code mentioned in the doc, I am getting following error:</p>\n<p>Compilation command :<br>\n<code>g++ -I /home/adarsh/.local/lib/python3.6/site-packages/torch/lib/include/ -I /usr/include/python3.6m/  test.cpp </code></p>\n<p>Error Msg :</p>\n<pre><code>/tmp/ccHn4SLC.o: In function `at::ones(at::ArrayRef&lt;long&gt;, at::TensorOptions const&amp;)':\ntest.cpp:(.text+0xf7): undefined reference to `at::native::ones(at::ArrayRef&lt;long&gt;, at::TensorOptions const&amp;)'\n/tmp/ccHn4SLC.o: In function `at::UndefinedTensor::singleton()':\ntest.cpp:(.text._ZN2at15UndefinedTensor9singletonEv[_ZN2at15UndefinedTensor9singletonEv]+0x7): undefined reference to `at::UndefinedTensor::_singleton'\n/tmp/ccHn4SLC.o: In function `at::DeviceGuard::~DeviceGuard()':\ntest.cpp:(.text._ZN2at11DeviceGuardD2Ev[_ZN2at11DeviceGuardD5Ev]+0x1a): undefined reference to `at::detail::DynamicCUDAInterface::unchecked_set_device'\n/tmp/ccHn4SLC.o: In function `at::DeviceGuard::set_index(int)':\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0xad): undefined reference to `at::Error::Error(at::SourceLocation, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)'\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0xec): undefined reference to `at::detail::DynamicCUDAInterface::get_device'\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0x110): undefined reference to `at::detail::DynamicCUDAInterface::set_device'\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0x120): undefined reference to `at::detail::DynamicCUDAInterface::set_device'\n/tmp/ccHn4SLC.o: In function `at::TensorOptions::TensorOptions()':\ntest.cpp:(.text._ZN2at13TensorOptionsC2Ev[_ZN2at13TensorOptionsC5Ev]+0x19): undefined reference to `at::TensorOptions::TensorOptions(bool)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n<p>test.cpp</p>\n<pre><code>#include &lt;torch/torch.h&gt;\n#include &lt;python3.6m/Python.h&gt;\n#include &lt;ATen/ATen.h&gt;\nusing namespace std;\n\nint main()\n{\n        at::Tensor a = at::ones({2,3}, at::kInt);\n        at::Tensor b = at::ones({2,3}, at::kInt);\n\n        auto c = a+b;\n}\n</code></pre>", "body_text": "I am trying out the ATen library in C++ and following this doc.\nOn compilation the code mentioned in the doc, I am getting following error:\nCompilation command :\ng++ -I /home/adarsh/.local/lib/python3.6/site-packages/torch/lib/include/ -I /usr/include/python3.6m/  test.cpp \nError Msg :\n/tmp/ccHn4SLC.o: In function `at::ones(at::ArrayRef<long>, at::TensorOptions const&)':\ntest.cpp:(.text+0xf7): undefined reference to `at::native::ones(at::ArrayRef<long>, at::TensorOptions const&)'\n/tmp/ccHn4SLC.o: In function `at::UndefinedTensor::singleton()':\ntest.cpp:(.text._ZN2at15UndefinedTensor9singletonEv[_ZN2at15UndefinedTensor9singletonEv]+0x7): undefined reference to `at::UndefinedTensor::_singleton'\n/tmp/ccHn4SLC.o: In function `at::DeviceGuard::~DeviceGuard()':\ntest.cpp:(.text._ZN2at11DeviceGuardD2Ev[_ZN2at11DeviceGuardD5Ev]+0x1a): undefined reference to `at::detail::DynamicCUDAInterface::unchecked_set_device'\n/tmp/ccHn4SLC.o: In function `at::DeviceGuard::set_index(int)':\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0xad): undefined reference to `at::Error::Error(at::SourceLocation, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)'\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0xec): undefined reference to `at::detail::DynamicCUDAInterface::get_device'\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0x110): undefined reference to `at::detail::DynamicCUDAInterface::set_device'\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0x120): undefined reference to `at::detail::DynamicCUDAInterface::set_device'\n/tmp/ccHn4SLC.o: In function `at::TensorOptions::TensorOptions()':\ntest.cpp:(.text._ZN2at13TensorOptionsC2Ev[_ZN2at13TensorOptionsC5Ev]+0x19): undefined reference to `at::TensorOptions::TensorOptions(bool)'\ncollect2: error: ld returned 1 exit status\n\ntest.cpp\n#include <torch/torch.h>\n#include <python3.6m/Python.h>\n#include <ATen/ATen.h>\nusing namespace std;\n\nint main()\n{\n        at::Tensor a = at::ones({2,3}, at::kInt);\n        at::Tensor b = at::ones({2,3}, at::kInt);\n\n        auto c = a+b;\n}", "body": "I am trying out the ATen library in C++ and following this [doc](https://pytorch.org/cppdocs/#aten). \r\nOn compilation the code mentioned in the doc, I am getting following error: \r\n \r\nCompilation command : \r\n```g++ -I /home/adarsh/.local/lib/python3.6/site-packages/torch/lib/include/ -I /usr/include/python3.6m/  test.cpp ```\r\n\r\nError Msg : \r\n```\r\n/tmp/ccHn4SLC.o: In function `at::ones(at::ArrayRef<long>, at::TensorOptions const&)':\r\ntest.cpp:(.text+0xf7): undefined reference to `at::native::ones(at::ArrayRef<long>, at::TensorOptions const&)'\r\n/tmp/ccHn4SLC.o: In function `at::UndefinedTensor::singleton()':\r\ntest.cpp:(.text._ZN2at15UndefinedTensor9singletonEv[_ZN2at15UndefinedTensor9singletonEv]+0x7): undefined reference to `at::UndefinedTensor::_singleton'\r\n/tmp/ccHn4SLC.o: In function `at::DeviceGuard::~DeviceGuard()':\r\ntest.cpp:(.text._ZN2at11DeviceGuardD2Ev[_ZN2at11DeviceGuardD5Ev]+0x1a): undefined reference to `at::detail::DynamicCUDAInterface::unchecked_set_device'\r\n/tmp/ccHn4SLC.o: In function `at::DeviceGuard::set_index(int)':\r\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0xad): undefined reference to `at::Error::Error(at::SourceLocation, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)'\r\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0xec): undefined reference to `at::detail::DynamicCUDAInterface::get_device'\r\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0x110): undefined reference to `at::detail::DynamicCUDAInterface::set_device'\r\ntest.cpp:(.text._ZN2at11DeviceGuard9set_indexEi[_ZN2at11DeviceGuard9set_indexEi]+0x120): undefined reference to `at::detail::DynamicCUDAInterface::set_device'\r\n/tmp/ccHn4SLC.o: In function `at::TensorOptions::TensorOptions()':\r\ntest.cpp:(.text._ZN2at13TensorOptionsC2Ev[_ZN2at13TensorOptionsC5Ev]+0x19): undefined reference to `at::TensorOptions::TensorOptions(bool)'\r\ncollect2: error: ld returned 1 exit status\r\n```\r\n\r\n\r\ntest.cpp \r\n```\r\n#include <torch/torch.h>\r\n#include <python3.6m/Python.h>\r\n#include <ATen/ATen.h>\r\nusing namespace std;\r\n\r\nint main()\r\n{\r\n        at::Tensor a = at::ones({2,3}, at::kInt);\r\n        at::Tensor b = at::ones({2,3}, at::kInt);\r\n\r\n        auto c = a+b;\r\n}\r\n```"}
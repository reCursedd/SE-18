{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/255107200", "html_url": "https://github.com/pytorch/pytorch/pull/133#issuecomment-255107200", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/133", "id": 255107200, "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTEwNzIwMA==", "user": {"login": "fmassa", "id": 9110200, "node_id": "MDQ6VXNlcjkxMTAyMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9110200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fmassa", "html_url": "https://github.com/fmassa", "followers_url": "https://api.github.com/users/fmassa/followers", "following_url": "https://api.github.com/users/fmassa/following{/other_user}", "gists_url": "https://api.github.com/users/fmassa/gists{/gist_id}", "starred_url": "https://api.github.com/users/fmassa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fmassa/subscriptions", "organizations_url": "https://api.github.com/users/fmassa/orgs", "repos_url": "https://api.github.com/users/fmassa/repos", "events_url": "https://api.github.com/users/fmassa/events{/privacy}", "received_events_url": "https://api.github.com/users/fmassa/received_events", "type": "User", "site_admin": false}, "created_at": "2016-10-20T13:34:53Z", "updated_at": "2016-10-20T13:34:53Z", "author_association": "MEMBER", "body_html": "<p>Seems that this PR broke import of <code>nn</code> when compiled without GPU support. Here is the error message I get when I try <code>import torch.nn</code>:</p>\n<pre><code>In [2]: import torch.nn\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-2-4512f6188ee8&gt; in &lt;module&gt;()\n----&gt; 1 import torch.nn\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/__init__.py in &lt;module&gt;()\n      1 \n----&gt; 2 from .modules import *\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/__init__.py in &lt;module&gt;()\n----&gt; 1 from .linear import Linear\n      2 from .conv import Conv1d, Conv2d, ConvTranspose2d, Conv3d, ConvTranspose3d\n      3 from .activation import Threshold, ReLU, Hardtanh, ReLU6, Sigmoid, Tanh, \\\n      4     Softmax, Softmax2d, LogSoftmax, ELU, Hardshrink, LeakyReLU, LogSigmoid, \\\n      5     Softplus, Softshrink, PReLU, Softsign, Softmin, Tanhshrink, RReLU\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/linear.py in &lt;module&gt;()\n      4 from torch.autograd import Variable\n      5 \n----&gt; 6 from .module import Module\n      7 \n      8 \n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/module.py in &lt;module&gt;()\n      3 \n      4 import torch\n----&gt; 5 from ..backends.thnn import backend as thnn_backend\n      6 from torch.autograd import Variable\n      7 \n\n/usr/local/lib/python2.7/dist-packages/torch/nn/backends/thnn.py in &lt;module&gt;()\n     35 \n     36 backend = THNNFunctionBackend()\n---&gt; 37 _initialize_backend()\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/backends/thnn.py in _initialize_backend()\n     12 \n     13 def _initialize_backend():\n---&gt; 14     from ..functions.thnn import _all_functions as _thnn_functions\n     15     from ..functions.linear import Linear\n     16     from ..functions.conv import Conv2d\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/functions/thnn/__init__.py in &lt;module&gt;()\n      1 _all_functions = []\n      2 \n----&gt; 3 from .auto import *\n      4 from .normalization import *\n      5 from .activation import *\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/functions/thnn/auto.py in &lt;module&gt;()\n      3 \n      4 import torch\n----&gt; 5 from torch._thnn.utils import parse_header, THNN_H_PATH\n      6 from torch.autograd.function import Function, InplaceFunction\n      7 from torch._thnn import type2backend\n\n/usr/local/lib/python2.7/dist-packages/torch/_thnn/__init__.py in &lt;module&gt;()\n      1 import threading\n----&gt; 2 import torch.cuda\n      3 from .utils import THNN_H_PATH, THCUNN_H_PATH, parse_header, load_backend\n      4 \n      5 class Backends(object):\n\n/usr/local/lib/python2.7/dist-packages/torch/cuda/__init__.py in &lt;module&gt;()\n    232 torch._tensor_classes.add(ByteTensor)\n    233 \n--&gt; 234 from .streams import Stream, Event\n\n/usr/local/lib/python2.7/dist-packages/torch/cuda/streams.py in &lt;module&gt;()\n     20 \n     21 \n---&gt; 22 class Stream(torch._C._CudaStreamBase):\n     23     def __new__(cls, device=-1, **kwargs):\n     24         with torch.cuda.device(device):\n\nAttributeError: 'module' object has no attribute '_CudaStreamBase'\n</code></pre>\n<p>Maybe some dummy elements should be added to the stream, like in <a href=\"https://github.com/pytorch/pytorch/blob/master/torch/cuda/__init__.py#L128-L133\">here</a>?</p>", "body_text": "Seems that this PR broke import of nn when compiled without GPU support. Here is the error message I get when I try import torch.nn:\nIn [2]: import torch.nn\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-2-4512f6188ee8> in <module>()\n----> 1 import torch.nn\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/__init__.py in <module>()\n      1 \n----> 2 from .modules import *\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/__init__.py in <module>()\n----> 1 from .linear import Linear\n      2 from .conv import Conv1d, Conv2d, ConvTranspose2d, Conv3d, ConvTranspose3d\n      3 from .activation import Threshold, ReLU, Hardtanh, ReLU6, Sigmoid, Tanh, \\\n      4     Softmax, Softmax2d, LogSoftmax, ELU, Hardshrink, LeakyReLU, LogSigmoid, \\\n      5     Softplus, Softshrink, PReLU, Softsign, Softmin, Tanhshrink, RReLU\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/linear.py in <module>()\n      4 from torch.autograd import Variable\n      5 \n----> 6 from .module import Module\n      7 \n      8 \n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/module.py in <module>()\n      3 \n      4 import torch\n----> 5 from ..backends.thnn import backend as thnn_backend\n      6 from torch.autograd import Variable\n      7 \n\n/usr/local/lib/python2.7/dist-packages/torch/nn/backends/thnn.py in <module>()\n     35 \n     36 backend = THNNFunctionBackend()\n---> 37 _initialize_backend()\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/backends/thnn.py in _initialize_backend()\n     12 \n     13 def _initialize_backend():\n---> 14     from ..functions.thnn import _all_functions as _thnn_functions\n     15     from ..functions.linear import Linear\n     16     from ..functions.conv import Conv2d\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/functions/thnn/__init__.py in <module>()\n      1 _all_functions = []\n      2 \n----> 3 from .auto import *\n      4 from .normalization import *\n      5 from .activation import *\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/functions/thnn/auto.py in <module>()\n      3 \n      4 import torch\n----> 5 from torch._thnn.utils import parse_header, THNN_H_PATH\n      6 from torch.autograd.function import Function, InplaceFunction\n      7 from torch._thnn import type2backend\n\n/usr/local/lib/python2.7/dist-packages/torch/_thnn/__init__.py in <module>()\n      1 import threading\n----> 2 import torch.cuda\n      3 from .utils import THNN_H_PATH, THCUNN_H_PATH, parse_header, load_backend\n      4 \n      5 class Backends(object):\n\n/usr/local/lib/python2.7/dist-packages/torch/cuda/__init__.py in <module>()\n    232 torch._tensor_classes.add(ByteTensor)\n    233 \n--> 234 from .streams import Stream, Event\n\n/usr/local/lib/python2.7/dist-packages/torch/cuda/streams.py in <module>()\n     20 \n     21 \n---> 22 class Stream(torch._C._CudaStreamBase):\n     23     def __new__(cls, device=-1, **kwargs):\n     24         with torch.cuda.device(device):\n\nAttributeError: 'module' object has no attribute '_CudaStreamBase'\n\nMaybe some dummy elements should be added to the stream, like in here?", "body": "Seems that this PR broke import of `nn` when compiled without GPU support. Here is the error message I get when I try `import torch.nn`:\n\n```\nIn [2]: import torch.nn\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-2-4512f6188ee8> in <module>()\n----> 1 import torch.nn\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/__init__.py in <module>()\n      1 \n----> 2 from .modules import *\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/__init__.py in <module>()\n----> 1 from .linear import Linear\n      2 from .conv import Conv1d, Conv2d, ConvTranspose2d, Conv3d, ConvTranspose3d\n      3 from .activation import Threshold, ReLU, Hardtanh, ReLU6, Sigmoid, Tanh, \\\n      4     Softmax, Softmax2d, LogSoftmax, ELU, Hardshrink, LeakyReLU, LogSigmoid, \\\n      5     Softplus, Softshrink, PReLU, Softsign, Softmin, Tanhshrink, RReLU\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/linear.py in <module>()\n      4 from torch.autograd import Variable\n      5 \n----> 6 from .module import Module\n      7 \n      8 \n\n/usr/local/lib/python2.7/dist-packages/torch/nn/modules/module.py in <module>()\n      3 \n      4 import torch\n----> 5 from ..backends.thnn import backend as thnn_backend\n      6 from torch.autograd import Variable\n      7 \n\n/usr/local/lib/python2.7/dist-packages/torch/nn/backends/thnn.py in <module>()\n     35 \n     36 backend = THNNFunctionBackend()\n---> 37 _initialize_backend()\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/backends/thnn.py in _initialize_backend()\n     12 \n     13 def _initialize_backend():\n---> 14     from ..functions.thnn import _all_functions as _thnn_functions\n     15     from ..functions.linear import Linear\n     16     from ..functions.conv import Conv2d\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/functions/thnn/__init__.py in <module>()\n      1 _all_functions = []\n      2 \n----> 3 from .auto import *\n      4 from .normalization import *\n      5 from .activation import *\n\n/usr/local/lib/python2.7/dist-packages/torch/nn/functions/thnn/auto.py in <module>()\n      3 \n      4 import torch\n----> 5 from torch._thnn.utils import parse_header, THNN_H_PATH\n      6 from torch.autograd.function import Function, InplaceFunction\n      7 from torch._thnn import type2backend\n\n/usr/local/lib/python2.7/dist-packages/torch/_thnn/__init__.py in <module>()\n      1 import threading\n----> 2 import torch.cuda\n      3 from .utils import THNN_H_PATH, THCUNN_H_PATH, parse_header, load_backend\n      4 \n      5 class Backends(object):\n\n/usr/local/lib/python2.7/dist-packages/torch/cuda/__init__.py in <module>()\n    232 torch._tensor_classes.add(ByteTensor)\n    233 \n--> 234 from .streams import Stream, Event\n\n/usr/local/lib/python2.7/dist-packages/torch/cuda/streams.py in <module>()\n     20 \n     21 \n---> 22 class Stream(torch._C._CudaStreamBase):\n     23     def __new__(cls, device=-1, **kwargs):\n     24         with torch.cuda.device(device):\n\nAttributeError: 'module' object has no attribute '_CudaStreamBase'\n```\n\nMaybe some dummy elements should be added to the stream, like in [here](https://github.com/pytorch/pytorch/blob/master/torch/cuda/__init__.py#L128-L133)?\n"}
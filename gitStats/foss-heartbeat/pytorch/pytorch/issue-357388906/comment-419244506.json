{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/419244506", "html_url": "https://github.com/pytorch/pytorch/pull/11293#issuecomment-419244506", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/11293", "id": 419244506, "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTI0NDUwNg==", "user": {"login": "mruberry", "id": 38511765, "node_id": "MDQ6VXNlcjM4NTExNzY1", "avatar_url": "https://avatars3.githubusercontent.com/u/38511765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mruberry", "html_url": "https://github.com/mruberry", "followers_url": "https://api.github.com/users/mruberry/followers", "following_url": "https://api.github.com/users/mruberry/following{/other_user}", "gists_url": "https://api.github.com/users/mruberry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mruberry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mruberry/subscriptions", "organizations_url": "https://api.github.com/users/mruberry/orgs", "repos_url": "https://api.github.com/users/mruberry/repos", "events_url": "https://api.github.com/users/mruberry/events{/privacy}", "received_events_url": "https://api.github.com/users/mruberry/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-06T21:18:00Z", "updated_at": "2018-09-06T21:18:00Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I think this PR is now ready. The remaining failure appears to be unrelated (and happening with other PRs, too?).</p>\n<blockquote>\n<p>20:22:19 FAIL: test_scalar_fusion (<strong>main</strong>.TestScript)<br>\n20:22:19 ----------------------------------------------------------------------<br>\n20:22:19 Traceback (most recent call last):<br>\n20:22:19   File \"test_jit.py\", line 2961, in test_scalar_fusion<br>\n20:22:19     self.assertExpectedGraph(ge.graph_for(x, y))<br>\n20:22:19   File \"test_jit.py\", line 248, in assertExpectedGraph<br>\n20:22:19     self.assertExpected(str(graph), *args, **kwargs)<br>\n20:22:19   File \"/var/lib/jenkins/workspace/test/common.py\", line 524, in assertExpected<br>\n20:22:19     self.assertMultiLineEqual(expected, s)<br>\n20:22:19 AssertionError: 'graph(%x : Float()\\n      %y : Float()) {\\n  %2 : Float() = prim::FusionGroup_0 [truncated]... != 'graph(%x : Float()\\n      %y : Float()) {\\n  %2 : Float() = aten::type_as(%y, % [truncated]...<br>\n20:22:19   graph(%x : Float()<br>\n20:22:19         %y : Float()) {<br>\n20:22:19 -   %2 : Float() = prim::FusionGroup_0[device=-1](%x, %y)<br>\n20:22:19 -   return (%2);<br>\n20:22:19 - }<br>\n20:22:19 - with prim::FusionGroup_0 = graph(%0 : Float()<br>\n20:22:19 -       %1 : Float()) {<br>\n20:22:19 -   %2 : Float() = aten::type_as(%1, %0)<br>\n20:22:19 ?                                 ^   ^<br>\n20:22:19 +   %2 : Float() = aten::type_as(%y, %x)<br>\n20:22:19 ?                                 ^   ^<br>\n20:22:19     %3 : int = prim::Constant<a href=\"\">value=1</a><br>\n20:22:19 -   %4 : Float() = aten::add(%0, %2, %3)<br>\n20:22:19 ?                             ^<br>\n20:22:19 +   %4 : Float() = aten::add(%x, %2, %3)<br>\n20:22:19 ?                             ^<br>\n20:22:19     return (%4);<br>\n20:22:19   }<br>\n20:22:19<br>\n20:22:19<br>\n20:22:19 ----------------------------------------------------------------------<br>\n20:22:19 Ran 1179 tests in 30.373s<br>\n20:22:19<br>\n20:22:19 FAILED (failures=1, skipped=44, expected failures=3)<br>\n20:22:19 Traceback (most recent call last):<br>\n20:22:19   File \"test/run_test.py\", line 391, in <br>\n20:22:19     main()<br>\n20:22:19   File \"test/run_test.py\", line 383, in main<br>\n20:22:19     raise RuntimeError(message)<br>\n20:22:19 RuntimeError: test_jit failed!</p>\n</blockquote>", "body_text": "I think this PR is now ready. The remaining failure appears to be unrelated (and happening with other PRs, too?).\n\n20:22:19 FAIL: test_scalar_fusion (main.TestScript)\n20:22:19 ----------------------------------------------------------------------\n20:22:19 Traceback (most recent call last):\n20:22:19   File \"test_jit.py\", line 2961, in test_scalar_fusion\n20:22:19     self.assertExpectedGraph(ge.graph_for(x, y))\n20:22:19   File \"test_jit.py\", line 248, in assertExpectedGraph\n20:22:19     self.assertExpected(str(graph), *args, **kwargs)\n20:22:19   File \"/var/lib/jenkins/workspace/test/common.py\", line 524, in assertExpected\n20:22:19     self.assertMultiLineEqual(expected, s)\n20:22:19 AssertionError: 'graph(%x : Float()\\n      %y : Float()) {\\n  %2 : Float() = prim::FusionGroup_0 [truncated]... != 'graph(%x : Float()\\n      %y : Float()) {\\n  %2 : Float() = aten::type_as(%y, % [truncated]...\n20:22:19   graph(%x : Float()\n20:22:19         %y : Float()) {\n20:22:19 -   %2 : Float() = prim::FusionGroup_0[device=-1](%x, %y)\n20:22:19 -   return (%2);\n20:22:19 - }\n20:22:19 - with prim::FusionGroup_0 = graph(%0 : Float()\n20:22:19 -       %1 : Float()) {\n20:22:19 -   %2 : Float() = aten::type_as(%1, %0)\n20:22:19 ?                                 ^   ^\n20:22:19 +   %2 : Float() = aten::type_as(%y, %x)\n20:22:19 ?                                 ^   ^\n20:22:19     %3 : int = prim::Constantvalue=1\n20:22:19 -   %4 : Float() = aten::add(%0, %2, %3)\n20:22:19 ?                             ^\n20:22:19 +   %4 : Float() = aten::add(%x, %2, %3)\n20:22:19 ?                             ^\n20:22:19     return (%4);\n20:22:19   }\n20:22:19\n20:22:19\n20:22:19 ----------------------------------------------------------------------\n20:22:19 Ran 1179 tests in 30.373s\n20:22:19\n20:22:19 FAILED (failures=1, skipped=44, expected failures=3)\n20:22:19 Traceback (most recent call last):\n20:22:19   File \"test/run_test.py\", line 391, in \n20:22:19     main()\n20:22:19   File \"test/run_test.py\", line 383, in main\n20:22:19     raise RuntimeError(message)\n20:22:19 RuntimeError: test_jit failed!", "body": "I think this PR is now ready. The remaining failure appears to be unrelated (and happening with other PRs, too?).\r\n\r\n>20:22:19 FAIL: test_scalar_fusion (__main__.TestScript)\r\n> 20:22:19 ----------------------------------------------------------------------\r\n> 20:22:19 Traceback (most recent call last):\r\n> 20:22:19   File \"test_jit.py\", line 2961, in test_scalar_fusion\r\n> 20:22:19     self.assertExpectedGraph(ge.graph_for(x, y))\r\n> 20:22:19   File \"test_jit.py\", line 248, in assertExpectedGraph\r\n> 20:22:19     self.assertExpected(str(graph), *args, **kwargs)\r\n> 20:22:19   File \"/var/lib/jenkins/workspace/test/common.py\", line 524, in assertExpected\r\n> 20:22:19     self.assertMultiLineEqual(expected, s)\r\n> 20:22:19 AssertionError: 'graph(%x : Float()\\n      %y : Float()) {\\n  %2 : Float() = prim::FusionGroup_0 [truncated]... != 'graph(%x : Float()\\n      %y : Float()) {\\n  %2 : Float() = aten::type_as(%y, % [truncated]...\r\n> 20:22:19   graph(%x : Float()\r\n> 20:22:19         %y : Float()) {\r\n> 20:22:19 -   %2 : Float() = prim::FusionGroup_0[device=-1](%x, %y)\r\n> 20:22:19 -   return (%2);\r\n> 20:22:19 - }\r\n> 20:22:19 - with prim::FusionGroup_0 = graph(%0 : Float()\r\n> 20:22:19 -       %1 : Float()) {\r\n> 20:22:19 -   %2 : Float() = aten::type_as(%1, %0)\r\n> 20:22:19 ?                                 ^   ^\r\n> 20:22:19 +   %2 : Float() = aten::type_as(%y, %x)\r\n> 20:22:19 ?                                 ^   ^\r\n> 20:22:19     %3 : int = prim::Constant[value=1]()\r\n> 20:22:19 -   %4 : Float() = aten::add(%0, %2, %3)\r\n> 20:22:19 ?                             ^\r\n> 20:22:19 +   %4 : Float() = aten::add(%x, %2, %3)\r\n> 20:22:19 ?                             ^\r\n> 20:22:19     return (%4);\r\n> 20:22:19   }\r\n> 20:22:19 \r\n> 20:22:19 \r\n> 20:22:19 ----------------------------------------------------------------------\r\n> 20:22:19 Ran 1179 tests in 30.373s\r\n> 20:22:19 \r\n> 20:22:19 FAILED (failures=1, skipped=44, expected failures=3)\r\n> 20:22:19 Traceback (most recent call last):\r\n> 20:22:19   File \"test/run_test.py\", line 391, in <module>\r\n> 20:22:19     main()\r\n> 20:22:19   File \"test/run_test.py\", line 383, in main\r\n> 20:22:19     raise RuntimeError(message)\r\n> 20:22:19 RuntimeError: test_jit failed!"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10848", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10848/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10848/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10848/events", "html_url": "https://github.com/pytorch/pytorch/pull/10848", "id": 353652690, "node_id": "MDExOlB1bGxSZXF1ZXN0MjEwNjQ0NzUz", "number": 10848, "title": "[Caffe2] Support new Reshape semantics", "user": {"login": "yinghai", "id": 1100089, "node_id": "MDQ6VXNlcjExMDAwODk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1100089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yinghai", "html_url": "https://github.com/yinghai", "followers_url": "https://api.github.com/users/yinghai/followers", "following_url": "https://api.github.com/users/yinghai/following{/other_user}", "gists_url": "https://api.github.com/users/yinghai/gists{/gist_id}", "starred_url": "https://api.github.com/users/yinghai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yinghai/subscriptions", "organizations_url": "https://api.github.com/users/yinghai/orgs", "repos_url": "https://api.github.com/users/yinghai/repos", "events_url": "https://api.github.com/users/yinghai/events{/privacy}", "received_events_url": "https://api.github.com/users/yinghai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-24T05:49:18Z", "updated_at": "2018-11-23T15:49:53Z", "closed_at": "2018-08-24T18:48:46Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/10848", "html_url": "https://github.com/pytorch/pytorch/pull/10848", "diff_url": "https://github.com/pytorch/pytorch/pull/10848.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/10848.patch"}, "body_html": "<p>Since ONNX opset version &gt;5, Reshape changed semantics to take a shape tensor as input instead of relying on <code>shape</code> attribute to decide what shape to reshape to. ONNXIFI op has been postponing this change as some of the backends such as TensorRT were not ready. Now that the backends have adopted this semantics, we can remove the legacy mode and output opset version 7 ONNX models.</p>\n<p>This change also flushes out some of the bugs and new requirement.</p>\n<ul>\n<li>Converting shape info into int64 tensor</li>\n<li>Fix a bug when we output the shape tensor in the mapped workspace instead of the original workspace</li>\n</ul>", "body_text": "Since ONNX opset version >5, Reshape changed semantics to take a shape tensor as input instead of relying on shape attribute to decide what shape to reshape to. ONNXIFI op has been postponing this change as some of the backends such as TensorRT were not ready. Now that the backends have adopted this semantics, we can remove the legacy mode and output opset version 7 ONNX models.\nThis change also flushes out some of the bugs and new requirement.\n\nConverting shape info into int64 tensor\nFix a bug when we output the shape tensor in the mapped workspace instead of the original workspace", "body": "Since ONNX opset version >5, Reshape changed semantics to take a shape tensor as input instead of relying on `shape` attribute to decide what shape to reshape to. ONNXIFI op has been postponing this change as some of the backends such as TensorRT were not ready. Now that the backends have adopted this semantics, we can remove the legacy mode and output opset version 7 ONNX models. \r\n\r\nThis change also flushes out some of the bugs and new requirement. \r\n- Converting shape info into int64 tensor\r\n- Fix a bug when we output the shape tensor in the mapped workspace instead of the original workspace"}
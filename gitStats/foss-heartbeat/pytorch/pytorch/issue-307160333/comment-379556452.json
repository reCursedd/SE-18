{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/379556452", "html_url": "https://github.com/pytorch/pytorch/pull/5919#issuecomment-379556452", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5919", "id": 379556452, "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTU1NjQ1Mg==", "user": {"login": "xhzhao", "id": 17486215, "node_id": "MDQ6VXNlcjE3NDg2MjE1", "avatar_url": "https://avatars1.githubusercontent.com/u/17486215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xhzhao", "html_url": "https://github.com/xhzhao", "followers_url": "https://api.github.com/users/xhzhao/followers", "following_url": "https://api.github.com/users/xhzhao/following{/other_user}", "gists_url": "https://api.github.com/users/xhzhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/xhzhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xhzhao/subscriptions", "organizations_url": "https://api.github.com/users/xhzhao/orgs", "repos_url": "https://api.github.com/users/xhzhao/repos", "events_url": "https://api.github.com/users/xhzhao/events{/privacy}", "received_events_url": "https://api.github.com/users/xhzhao/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-08T14:54:20Z", "updated_at": "2018-04-08T14:54:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a> thanks for your feedback, i updated the code again:</p>\n<ul>\n<li><em><strong>This class should just have its own test, and we should remove this warning</strong></em><br>\n<strong>Done</strong>, a test case is setup for this new interface with the name test_DistributedDataParallelCPU(),<br>\nwhich use the test_DistributedDataParallel() as a reference.<br>\nThe auto-test <a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-trusty-py3.5-test/4493/consoleFull\" rel=\"nofollow\">log </a> shows that tcp and gloo backends passed this test case, but mpi backend did not touch this test case. I build pytorch from source  on my PC and the mpi backend passed this test case.</li>\n<li><em><strong>Remove First_call and broadcast weight in <strong>init</strong>()</strong></em><br>\n<strong>Done</strong></li>\n<li><em><strong>Code share for allreduce_params</strong></em><br>\nThis function is totally different with the GPU implementtation, so i think we could not reuse this function.</li>\n<li><em><strong>please don't use parenthesis in if statements</strong></em><br>\n<strong>Done</strong></li>\n<li><em><strong>nit: please make buckets a defaultdict(list)</strong></em><br>\n<strong>Done</strong></li>\n</ul>", "body_text": "@apaszke thanks for your feedback, i updated the code again:\n\nThis class should just have its own test, and we should remove this warning\nDone, a test case is setup for this new interface with the name test_DistributedDataParallelCPU(),\nwhich use the test_DistributedDataParallel() as a reference.\nThe auto-test log  shows that tcp and gloo backends passed this test case, but mpi backend did not touch this test case. I build pytorch from source  on my PC and the mpi backend passed this test case.\nRemove First_call and broadcast weight in init()\nDone\nCode share for allreduce_params\nThis function is totally different with the GPU implementtation, so i think we could not reuse this function.\nplease don't use parenthesis in if statements\nDone\nnit: please make buckets a defaultdict(list)\nDone", "body": "@apaszke thanks for your feedback, i updated the code again:\r\n\r\n- _**This class should just have its own test, and we should remove this warning**_\r\n\t**Done**, a test case is setup for this new interface with the name test_DistributedDataParallelCPU(),\r\n\twhich use the test_DistributedDataParallel() as a reference.\r\n\tThe auto-test [log ](https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-trusty-py3.5-test/4493/consoleFull) shows that tcp and gloo backends passed this test case, but mpi backend did not touch this test case. I build pytorch from source  on my PC and the mpi backend passed this test case.\r\n- _**Remove First_call and broadcast weight in __init__()**_\r\n\t**Done**\r\n- _**Code share for allreduce_params**_\r\n\tThis function is totally different with the GPU implementtation, so i think we could not reuse this function.\r\n- _**please don't use parenthesis in if statements**_\r\n\t**Done**\r\n- _**nit: please make buckets a defaultdict(list)**_\r\n\t**Done**"}
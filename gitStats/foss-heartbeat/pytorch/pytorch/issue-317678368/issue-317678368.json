{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6949", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6949/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6949/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6949/events", "html_url": "https://github.com/pytorch/pytorch/issues/6949", "id": 317678368, "node_id": "MDU6SXNzdWUzMTc2NzgzNjg=", "number": 6949, "title": "It seems can't compile pytorch 0.4.0 from source on macOS.", "user": {"login": "vmn171", "id": 29355360, "node_id": "MDQ6VXNlcjI5MzU1MzYw", "avatar_url": "https://avatars2.githubusercontent.com/u/29355360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmn171", "html_url": "https://github.com/vmn171", "followers_url": "https://api.github.com/users/vmn171/followers", "following_url": "https://api.github.com/users/vmn171/following{/other_user}", "gists_url": "https://api.github.com/users/vmn171/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmn171/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmn171/subscriptions", "organizations_url": "https://api.github.com/users/vmn171/orgs", "repos_url": "https://api.github.com/users/vmn171/repos", "events_url": "https://api.github.com/users/vmn171/events{/privacy}", "received_events_url": "https://api.github.com/users/vmn171/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 553773019, "node_id": "MDU6TGFiZWw1NTM3NzMwMTk=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/needs-reproduction", "name": "needs-reproduction", "color": "e99695", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-25T15:25:28Z", "updated_at": "2018-04-26T04:26:53Z", "closed_at": "2018-04-26T04:26:53Z", "author_association": "NONE", "body_html": "<p>OS: macOS 10.13.1<br>\nPyTorch version: 0.4.0<br>\nHow you installed PyTorch (conda, pip, source): Source<br>\nPython version: 3.6<br>\nCUDA/cuDNN version: 9.1 / 7.0.5<br>\nGPU: NVIDIA GeForce GT 1080Ti</p>\n<p>I building pytorch from source, getting below errors<br>\nBut compile 0.3.1 is successful.</p>\n<pre><code>$ MACOSX_DEPLOYMENT_TARGET=10.9 CC=clang CXX=clang++ python setup.py install\nrunning install\nrunning build_deps\n+ WITH_CUDA=0\n+ [[ --with-cuda == \\-\\-\\w\\i\\t\\h\\-\\c\\u\\d\\a ]]\n+ WITH_CUDA=1\n+ shift\n+ WITH_NNPACK=0\n+ [[ --with-nnpack == \\-\\-\\w\\i\\t\\h\\-\\n\\n\\p\\a\\c\\k ]]\n+ WITH_NNPACK=1\n+ shift\n+ WITH_MKLDNN=0\n+ [[ ATen == \\-\\-\\w\\i\\t\\h\\-\\m\\k\\l\\d\\n\\n ]]\n+ WITH_GLOO_IBVERBS=0\n+ [[ ATen == \\-\\-\\w\\i\\t\\h\\-\\g\\l\\o\\o\\-\\i\\b\\v\\e\\r\\b\\s ]]\n+ CMAKE_INSTALL='make install'\n+ USER_CFLAGS=\n+ USER_LDFLAGS=\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n++ dirname tools/build_pytorch_libs.sh\n+ cd tools/..\n+++ pwd\n++ printf '%q\\n' /Users/lhan/Downloads/pytorch\n+ PWD=/Users/lhan/Downloads/pytorch\n+ BASE_DIR=/Users/lhan/Downloads/pytorch\n+ TORCH_LIB_DIR=/Users/lhan/Downloads/pytorch/torch/lib\n+ INSTALL_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install\n+ THIRD_PARTY_DIR=/Users/lhan/Downloads/pytorch/third_party\n+ CMAKE_VERSION=cmake\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\"'\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ LDFLAGS='-L\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/lib\" '\n+ LD_POSTFIX=.so.1\n+ LD_POSTFIX_UNVERSIONED=.so\n++ uname\n+ [[ Darwin == \\D\\a\\r\\w\\i\\n ]]\n+ LDFLAGS='-L\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path'\n+ LD_POSTFIX=.1.dylib\n+ LD_POSTFIX_UNVERSIONED=.dylib\n+ CPP_FLAGS=' -std=c++11 '\n+ GLOO_FLAGS=\n+ THD_FLAGS=\n+ NCCL_ROOT_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install\n+ [[ 1 -eq 1 ]]\n+ GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install'\n+ [[ 0 -eq 1 ]]\n+ CWRAP_FILES='/Users/lhan/Downloads/pytorch/torch/lib/ATen/Declarations.cwrap;/Users/lhan/Downloads/pytorch/torch/lib/THNN/generic/THNN.h;/Users/lhan/Downloads/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/Users/lhan/Downloads/pytorch/torch/lib/ATen/nn.yaml'\n+ CUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ [[ '' -eq 1 ]]\n+ '[' -z 8 ']'\n+ BUILD_TYPE=Release\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ echo 'Building in Release mode'\nBuilding in Release mode\n+ mkdir -p torch/lib/tmp_install\n+ for arg in '\"$@\"'\n+ [[ ATen == \\n\\c\\c\\l ]]\n+ [[ ATen == \\g\\l\\o\\o ]]\n+ [[ ATen == \\A\\T\\e\\n ]]\n+ pushd /Users/lhan/Downloads/pytorch/aten\n~/Downloads/pytorch/aten ~/Downloads/pytorch\n+ build_aten\n+ mkdir -p build\n+ pushd build\n~/Downloads/pytorch/aten/build ~/Downloads/pytorch/aten ~/Downloads/pytorch\n+ cmake .. -DCMAKE_BUILD_TYPE=Release -DNO_CUDA=0 -DNO_NNPACK=0 -DCUDNN_INCLUDE_DIR=/usr/local/cuda/include -DCUDNN_LIB_DIR=/usr/local/cuda/lib -DCUDNN_LIBRARY=/usr/local/cuda/lib/libcudnn.7.dylib -DNO_MKLDNN=1 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DATEN_NO_CONTRIB=1 -DCMAKE_INSTALL_PREFIX=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= -DCMAKE_EXE_LINKER_FLAGS= -DCMAKE_SHARED_LINKER_FLAGS=\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindPackageHandleStandardArgs.cmake:247 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1096 (find_package_handle_standard_args)\n  CMakeLists.txt:89 (FIND_PACKAGE)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindPackageHandleStandardArgs.cmake:247 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1096 (find_package_handle_standard_args)\n  CMakeLists.txt:89 (FIND_PACKAGE)\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1808 (CUDA_WRAP_SRCS)\n  src/ATen/CMakeLists.txt:234 (CUDA_ADD_LIBRARY)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1808 (CUDA_WRAP_SRCS)\n  src/ATen/CMakeLists.txt:234 (CUDA_ADD_LIBRARY)\n\n\n-- TBB: using libc++.\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:49 (cuda_add_executable)\n</code></pre>", "body_text": "OS: macOS 10.13.1\nPyTorch version: 0.4.0\nHow you installed PyTorch (conda, pip, source): Source\nPython version: 3.6\nCUDA/cuDNN version: 9.1 / 7.0.5\nGPU: NVIDIA GeForce GT 1080Ti\nI building pytorch from source, getting below errors\nBut compile 0.3.1 is successful.\n$ MACOSX_DEPLOYMENT_TARGET=10.9 CC=clang CXX=clang++ python setup.py install\nrunning install\nrunning build_deps\n+ WITH_CUDA=0\n+ [[ --with-cuda == \\-\\-\\w\\i\\t\\h\\-\\c\\u\\d\\a ]]\n+ WITH_CUDA=1\n+ shift\n+ WITH_NNPACK=0\n+ [[ --with-nnpack == \\-\\-\\w\\i\\t\\h\\-\\n\\n\\p\\a\\c\\k ]]\n+ WITH_NNPACK=1\n+ shift\n+ WITH_MKLDNN=0\n+ [[ ATen == \\-\\-\\w\\i\\t\\h\\-\\m\\k\\l\\d\\n\\n ]]\n+ WITH_GLOO_IBVERBS=0\n+ [[ ATen == \\-\\-\\w\\i\\t\\h\\-\\g\\l\\o\\o\\-\\i\\b\\v\\e\\r\\b\\s ]]\n+ CMAKE_INSTALL='make install'\n+ USER_CFLAGS=\n+ USER_LDFLAGS=\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n++ dirname tools/build_pytorch_libs.sh\n+ cd tools/..\n+++ pwd\n++ printf '%q\\n' /Users/lhan/Downloads/pytorch\n+ PWD=/Users/lhan/Downloads/pytorch\n+ BASE_DIR=/Users/lhan/Downloads/pytorch\n+ TORCH_LIB_DIR=/Users/lhan/Downloads/pytorch/torch/lib\n+ INSTALL_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install\n+ THIRD_PARTY_DIR=/Users/lhan/Downloads/pytorch/third_party\n+ CMAKE_VERSION=cmake\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\"'\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ LDFLAGS='-L\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/lib\" '\n+ LD_POSTFIX=.so.1\n+ LD_POSTFIX_UNVERSIONED=.so\n++ uname\n+ [[ Darwin == \\D\\a\\r\\w\\i\\n ]]\n+ LDFLAGS='-L\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path'\n+ LD_POSTFIX=.1.dylib\n+ LD_POSTFIX_UNVERSIONED=.dylib\n+ CPP_FLAGS=' -std=c++11 '\n+ GLOO_FLAGS=\n+ THD_FLAGS=\n+ NCCL_ROOT_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install\n+ [[ 1 -eq 1 ]]\n+ GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install'\n+ [[ 0 -eq 1 ]]\n+ CWRAP_FILES='/Users/lhan/Downloads/pytorch/torch/lib/ATen/Declarations.cwrap;/Users/lhan/Downloads/pytorch/torch/lib/THNN/generic/THNN.h;/Users/lhan/Downloads/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/Users/lhan/Downloads/pytorch/torch/lib/ATen/nn.yaml'\n+ CUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ [[ '' -eq 1 ]]\n+ '[' -z 8 ']'\n+ BUILD_TYPE=Release\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ echo 'Building in Release mode'\nBuilding in Release mode\n+ mkdir -p torch/lib/tmp_install\n+ for arg in '\"$@\"'\n+ [[ ATen == \\n\\c\\c\\l ]]\n+ [[ ATen == \\g\\l\\o\\o ]]\n+ [[ ATen == \\A\\T\\e\\n ]]\n+ pushd /Users/lhan/Downloads/pytorch/aten\n~/Downloads/pytorch/aten ~/Downloads/pytorch\n+ build_aten\n+ mkdir -p build\n+ pushd build\n~/Downloads/pytorch/aten/build ~/Downloads/pytorch/aten ~/Downloads/pytorch\n+ cmake .. -DCMAKE_BUILD_TYPE=Release -DNO_CUDA=0 -DNO_NNPACK=0 -DCUDNN_INCLUDE_DIR=/usr/local/cuda/include -DCUDNN_LIB_DIR=/usr/local/cuda/lib -DCUDNN_LIBRARY=/usr/local/cuda/lib/libcudnn.7.dylib -DNO_MKLDNN=1 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DATEN_NO_CONTRIB=1 -DCMAKE_INSTALL_PREFIX=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= -DCMAKE_EXE_LINKER_FLAGS= -DCMAKE_SHARED_LINKER_FLAGS=\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindPackageHandleStandardArgs.cmake:247 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1096 (find_package_handle_standard_args)\n  CMakeLists.txt:89 (FIND_PACKAGE)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindPackageHandleStandardArgs.cmake:247 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1096 (find_package_handle_standard_args)\n  CMakeLists.txt:89 (FIND_PACKAGE)\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1808 (CUDA_WRAP_SRCS)\n  src/ATen/CMakeLists.txt:234 (CUDA_ADD_LIBRARY)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1808 (CUDA_WRAP_SRCS)\n  src/ATen/CMakeLists.txt:234 (CUDA_ADD_LIBRARY)\n\n\n-- TBB: using libc++.\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\n\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\n  string does not recognize sub-command APPEND\nCall Stack (most recent call first):\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\n  src/ATen/test/CMakeLists.txt:49 (cuda_add_executable)", "body": "OS: macOS 10.13.1\r\nPyTorch version: 0.4.0\r\nHow you installed PyTorch (conda, pip, source): Source\r\nPython version: 3.6\r\nCUDA/cuDNN version: 9.1 / 7.0.5\r\nGPU: NVIDIA GeForce GT 1080Ti\r\n\r\nI building pytorch from source, getting below errors\r\nBut compile 0.3.1 is successful.\r\n\r\n```\r\n$ MACOSX_DEPLOYMENT_TARGET=10.9 CC=clang CXX=clang++ python setup.py install\r\nrunning install\r\nrunning build_deps\r\n+ WITH_CUDA=0\r\n+ [[ --with-cuda == \\-\\-\\w\\i\\t\\h\\-\\c\\u\\d\\a ]]\r\n+ WITH_CUDA=1\r\n+ shift\r\n+ WITH_NNPACK=0\r\n+ [[ --with-nnpack == \\-\\-\\w\\i\\t\\h\\-\\n\\n\\p\\a\\c\\k ]]\r\n+ WITH_NNPACK=1\r\n+ shift\r\n+ WITH_MKLDNN=0\r\n+ [[ ATen == \\-\\-\\w\\i\\t\\h\\-\\m\\k\\l\\d\\n\\n ]]\r\n+ WITH_GLOO_IBVERBS=0\r\n+ [[ ATen == \\-\\-\\w\\i\\t\\h\\-\\g\\l\\o\\o\\-\\i\\b\\v\\e\\r\\b\\s ]]\r\n+ CMAKE_INSTALL='make install'\r\n+ USER_CFLAGS=\r\n+ USER_LDFLAGS=\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n++ dirname tools/build_pytorch_libs.sh\r\n+ cd tools/..\r\n+++ pwd\r\n++ printf '%q\\n' /Users/lhan/Downloads/pytorch\r\n+ PWD=/Users/lhan/Downloads/pytorch\r\n+ BASE_DIR=/Users/lhan/Downloads/pytorch\r\n+ TORCH_LIB_DIR=/Users/lhan/Downloads/pytorch/torch/lib\r\n+ INSTALL_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install\r\n+ THIRD_PARTY_DIR=/Users/lhan/Downloads/pytorch/third_party\r\n+ CMAKE_VERSION=cmake\r\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\"'\r\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ LDFLAGS='-L\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/lib\" '\r\n+ LD_POSTFIX=.so.1\r\n+ LD_POSTFIX_UNVERSIONED=.so\r\n++ uname\r\n+ [[ Darwin == \\D\\a\\r\\w\\i\\n ]]\r\n+ LDFLAGS='-L\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path'\r\n+ LD_POSTFIX=.1.dylib\r\n+ LD_POSTFIX_UNVERSIONED=.dylib\r\n+ CPP_FLAGS=' -std=c++11 '\r\n+ GLOO_FLAGS=\r\n+ THD_FLAGS=\r\n+ NCCL_ROOT_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install\r\n+ [[ 1 -eq 1 ]]\r\n+ GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install'\r\n+ [[ 0 -eq 1 ]]\r\n+ CWRAP_FILES='/Users/lhan/Downloads/pytorch/torch/lib/ATen/Declarations.cwrap;/Users/lhan/Downloads/pytorch/torch/lib/THNN/generic/THNN.h;/Users/lhan/Downloads/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/Users/lhan/Downloads/pytorch/torch/lib/ATen/nn.yaml'\r\n+ CUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/lhan/Downloads/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ [[ '' -eq 1 ]]\r\n+ '[' -z 8 ']'\r\n+ BUILD_TYPE=Release\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ echo 'Building in Release mode'\r\nBuilding in Release mode\r\n+ mkdir -p torch/lib/tmp_install\r\n+ for arg in '\"$@\"'\r\n+ [[ ATen == \\n\\c\\c\\l ]]\r\n+ [[ ATen == \\g\\l\\o\\o ]]\r\n+ [[ ATen == \\A\\T\\e\\n ]]\r\n+ pushd /Users/lhan/Downloads/pytorch/aten\r\n~/Downloads/pytorch/aten ~/Downloads/pytorch\r\n+ build_aten\r\n+ mkdir -p build\r\n+ pushd build\r\n~/Downloads/pytorch/aten/build ~/Downloads/pytorch/aten ~/Downloads/pytorch\r\n+ cmake .. -DCMAKE_BUILD_TYPE=Release -DNO_CUDA=0 -DNO_NNPACK=0 -DCUDNN_INCLUDE_DIR=/usr/local/cuda/include -DCUDNN_LIB_DIR=/usr/local/cuda/lib -DCUDNN_LIBRARY=/usr/local/cuda/lib/libcudnn.7.dylib -DNO_MKLDNN=1 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DATEN_NO_CONTRIB=1 -DCMAKE_INSTALL_PREFIX=/Users/lhan/Downloads/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= -DCMAKE_EXE_LINKER_FLAGS= -DCMAKE_SHARED_LINKER_FLAGS=\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindPackageHandleStandardArgs.cmake:247 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1096 (find_package_handle_standard_args)\r\n  CMakeLists.txt:89 (FIND_PACKAGE)\r\n\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindPackageHandleStandardArgs.cmake:247 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1096 (find_package_handle_standard_args)\r\n  CMakeLists.txt:89 (FIND_PACKAGE)\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1808 (CUDA_WRAP_SRCS)\r\n  src/ATen/CMakeLists.txt:234 (CUDA_ADD_LIBRARY)\r\n\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1808 (CUDA_WRAP_SRCS)\r\n  src/ATen/CMakeLists.txt:234 (CUDA_ADD_LIBRARY)\r\n\r\n\r\n-- TBB: using libc++.\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\r\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\r\n\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\r\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\r\n\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\r\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\r\n\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\r\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\r\n\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\r\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\r\n\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\r\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1441 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\r\n  src/ATen/test/CMakeLists.txt:44 (cuda_add_executable)\r\n\r\nCMake Error at /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1447 (string):\r\n  string does not recognize sub-command APPEND\r\nCall Stack (most recent call first):\r\n  /Users/lhan/Downloads/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:1860 (CUDA_WRAP_SRCS)\r\n  src/ATen/test/CMakeLists.txt:49 (cuda_add_executable)\r\n```"}
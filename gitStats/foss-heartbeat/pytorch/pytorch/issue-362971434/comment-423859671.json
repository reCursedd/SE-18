{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/423859671", "html_url": "https://github.com/pytorch/pytorch/issues/11999#issuecomment-423859671", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/11999", "id": 423859671, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzg1OTY3MQ==", "user": {"login": "crcrpar", "id": 16191443, "node_id": "MDQ6VXNlcjE2MTkxNDQz", "avatar_url": "https://avatars2.githubusercontent.com/u/16191443?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crcrpar", "html_url": "https://github.com/crcrpar", "followers_url": "https://api.github.com/users/crcrpar/followers", "following_url": "https://api.github.com/users/crcrpar/following{/other_user}", "gists_url": "https://api.github.com/users/crcrpar/gists{/gist_id}", "starred_url": "https://api.github.com/users/crcrpar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crcrpar/subscriptions", "organizations_url": "https://api.github.com/users/crcrpar/orgs", "repos_url": "https://api.github.com/users/crcrpar/repos", "events_url": "https://api.github.com/users/crcrpar/events{/privacy}", "received_events_url": "https://api.github.com/users/crcrpar/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-24T00:34:19Z", "updated_at": "2018-09-24T00:34:19Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Could you share a minimal code to reproduce that?</p>\n<p>In my envrionment, dropoout worked correctly as below.</p>\n<div class=\"highlight highlight-source-python\"><pre>In [<span class=\"pl-c1\">1</span>]: <span class=\"pl-k\">import</span> torch, torch.nn <span class=\"pl-k\">as</span> nn, torch.nn.functional <span class=\"pl-k\">as</span> F\n\nIn [<span class=\"pl-c1\">2</span>]: x <span class=\"pl-k\">=</span> torch.randn(<span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">3</span>, <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>torch.float)\n\nIn [<span class=\"pl-c1\">3</span>]: dropout <span class=\"pl-k\">=</span> nn.Dropout()\n\nIn [<span class=\"pl-c1\">4</span>]: dropout(x)\nOut[<span class=\"pl-c1\">4</span>]: \ntensor([[<span class=\"pl-k\">-</span><span class=\"pl-c1\">0.0000</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">0.0000</span>,  <span class=\"pl-c1\">3.6885</span>],\n        [ <span class=\"pl-c1\">0.0000</span>,  <span class=\"pl-c1\">0.6140</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">0.0000</span>],\n        [<span class=\"pl-k\">-</span><span class=\"pl-c1\">0.9087</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">0.0000</span>,  <span class=\"pl-c1\">0.2604</span>]])\n\nIn [<span class=\"pl-c1\">5</span>]: dropout.eval(); dropout(x)\nOut[<span class=\"pl-c1\">5</span>]: \ntensor([[<span class=\"pl-k\">-</span><span class=\"pl-c1\">2.2393</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">0.2917</span>,  <span class=\"pl-c1\">1.8443</span>],\n        [ <span class=\"pl-c1\">1.2517</span>,  <span class=\"pl-c1\">0.3070</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">0.8705</span>],\n        [<span class=\"pl-k\">-</span><span class=\"pl-c1\">0.4543</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">1.4322</span>,  <span class=\"pl-c1\">0.1302</span>]])\n\nIn [<span class=\"pl-c1\">6</span>]: x\nOut[<span class=\"pl-c1\">6</span>]: \ntensor([[<span class=\"pl-k\">-</span><span class=\"pl-c1\">2.2393</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">0.2917</span>,  <span class=\"pl-c1\">1.8443</span>],\n        [ <span class=\"pl-c1\">1.2517</span>,  <span class=\"pl-c1\">0.3070</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">0.8705</span>],\n        [<span class=\"pl-k\">-</span><span class=\"pl-c1\">0.4543</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">1.4322</span>,  <span class=\"pl-c1\">0.1302</span>]])\n\nIn [<span class=\"pl-c1\">7</span>]: dropout.train(); dropout(x) <span class=\"pl-k\">/</span> x\nOut[<span class=\"pl-c1\">7</span>]: \ntensor([[<span class=\"pl-c1\">2</span>., <span class=\"pl-c1\">0</span>., <span class=\"pl-c1\">2</span>.],\n        [<span class=\"pl-c1\">2</span>., <span class=\"pl-c1\">2</span>., <span class=\"pl-c1\">2</span>.],\n        [<span class=\"pl-c1\">0</span>., <span class=\"pl-c1\">0</span>., <span class=\"pl-c1\">0</span>.]])\n\nIn [<span class=\"pl-c1\">8</span>]: dropout.eval(); dropout(x) <span class=\"pl-k\">/</span> x\nOut[<span class=\"pl-c1\">8</span>]: \ntensor([[<span class=\"pl-c1\">1</span>., <span class=\"pl-c1\">1</span>., <span class=\"pl-c1\">1</span>.],\n        [<span class=\"pl-c1\">1</span>., <span class=\"pl-c1\">1</span>., <span class=\"pl-c1\">1</span>.],\n        [<span class=\"pl-c1\">1</span>., <span class=\"pl-c1\">1</span>., <span class=\"pl-c1\">1</span>.]])\n\nIn [<span class=\"pl-c1\">9</span>]: torch.<span class=\"pl-c1\">__version__</span>\nOut[<span class=\"pl-c1\">9</span>]: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>1.0.0.dev20180921<span class=\"pl-pds\">'</span></span></pre></div>", "body_text": "Could you share a minimal code to reproduce that?\nIn my envrionment, dropoout worked correctly as below.\nIn [1]: import torch, torch.nn as nn, torch.nn.functional as F\n\nIn [2]: x = torch.randn(3, 3, dtype=torch.float)\n\nIn [3]: dropout = nn.Dropout()\n\nIn [4]: dropout(x)\nOut[4]: \ntensor([[-0.0000, -0.0000,  3.6885],\n        [ 0.0000,  0.6140, -0.0000],\n        [-0.9087, -0.0000,  0.2604]])\n\nIn [5]: dropout.eval(); dropout(x)\nOut[5]: \ntensor([[-2.2393, -0.2917,  1.8443],\n        [ 1.2517,  0.3070, -0.8705],\n        [-0.4543, -1.4322,  0.1302]])\n\nIn [6]: x\nOut[6]: \ntensor([[-2.2393, -0.2917,  1.8443],\n        [ 1.2517,  0.3070, -0.8705],\n        [-0.4543, -1.4322,  0.1302]])\n\nIn [7]: dropout.train(); dropout(x) / x\nOut[7]: \ntensor([[2., 0., 2.],\n        [2., 2., 2.],\n        [0., 0., 0.]])\n\nIn [8]: dropout.eval(); dropout(x) / x\nOut[8]: \ntensor([[1., 1., 1.],\n        [1., 1., 1.],\n        [1., 1., 1.]])\n\nIn [9]: torch.__version__\nOut[9]: '1.0.0.dev20180921'", "body": "Could you share a minimal code to reproduce that?\r\n\r\nIn my envrionment, dropoout worked correctly as below.\r\n```python\r\nIn [1]: import torch, torch.nn as nn, torch.nn.functional as F\r\n\r\nIn [2]: x = torch.randn(3, 3, dtype=torch.float)\r\n\r\nIn [3]: dropout = nn.Dropout()\r\n\r\nIn [4]: dropout(x)\r\nOut[4]: \r\ntensor([[-0.0000, -0.0000,  3.6885],\r\n        [ 0.0000,  0.6140, -0.0000],\r\n        [-0.9087, -0.0000,  0.2604]])\r\n\r\nIn [5]: dropout.eval(); dropout(x)\r\nOut[5]: \r\ntensor([[-2.2393, -0.2917,  1.8443],\r\n        [ 1.2517,  0.3070, -0.8705],\r\n        [-0.4543, -1.4322,  0.1302]])\r\n\r\nIn [6]: x\r\nOut[6]: \r\ntensor([[-2.2393, -0.2917,  1.8443],\r\n        [ 1.2517,  0.3070, -0.8705],\r\n        [-0.4543, -1.4322,  0.1302]])\r\n\r\nIn [7]: dropout.train(); dropout(x) / x\r\nOut[7]: \r\ntensor([[2., 0., 2.],\r\n        [2., 2., 2.],\r\n        [0., 0., 0.]])\r\n\r\nIn [8]: dropout.eval(); dropout(x) / x\r\nOut[8]: \r\ntensor([[1., 1., 1.],\r\n        [1., 1., 1.],\r\n        [1., 1., 1.]])\r\n\r\nIn [9]: torch.__version__\r\nOut[9]: '1.0.0.dev20180921'\r\n```"}
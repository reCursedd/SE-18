{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/203540854", "pull_request_review_id": 138452913, "id": 203540854, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzU0MDg1NA==", "diff_hunk": "@@ -0,0 +1,126 @@\n+#include \"torch/csrc/jit/passes/constant_propagation.h\"\n+#include \"torch/csrc/jit/passes/dead_code_elimination.h\"\n+#include \"torch/csrc/utils/functional.h\"\n+#include \"torch/csrc/jit/interpreter.h\"\n+#include \"torch/csrc/jit/ivalue.h\"\n+#include \"torch/csrc/autograd/variable.h\"\n+\n+\n+namespace torch { namespace jit {\n+\n+namespace {\n+\n+std::unordered_set<Symbol> skip_list = {\n+  //FIXME If & Loop require special casing because they cannot be run as a\n+  //single node.\n+  prim::If,\n+  prim::Loop,\n+  //FIXME Same problem as in DCE - cpp & python PythonOp and CppOp should be\n+  //FIXME treated as having side effects but ONNX depends on them being removed", "path": "torch/csrc/jit/passes/constant_propagation.cpp", "position": 21, "original_position": 19, "commit_id": "2f5d9000fc9fa0ba612fa98f8ff7549d818528cd", "original_commit_id": "4267ac08f5193f8a2658df6479e0eff028df598c", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "This is actually different in this case, because allowing them to run would remove them, so ONNX couldn't complain about that. You can't remove them in this pass exactly because they can have side effects that you don't want to trigger.", "created_at": "2018-07-18T21:48:09Z", "updated_at": "2018-11-23T15:47:40Z", "html_url": "https://github.com/pytorch/pytorch/pull/8808#discussion_r203540854", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/8808", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/203540854"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/8808#discussion_r203540854"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/8808"}}, "body_html": "<p>This is actually different in this case, because allowing them to run would remove them, so ONNX couldn't complain about that. You can't remove them in this pass exactly because they can have side effects that you don't want to trigger.</p>", "body_text": "This is actually different in this case, because allowing them to run would remove them, so ONNX couldn't complain about that. You can't remove them in this pass exactly because they can have side effects that you don't want to trigger."}
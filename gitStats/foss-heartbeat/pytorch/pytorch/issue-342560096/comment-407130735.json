{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/407130735", "html_url": "https://github.com/pytorch/pytorch/issues/9580#issuecomment-407130735", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/9580", "id": 407130735, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzEzMDczNQ==", "user": {"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-23T17:06:18Z", "updated_at": "2018-07-23T17:06:18Z", "author_association": "CONTRIBUTOR", "body_html": "<p>First, you need to get rid of all of the \"&amp;&amp;\" in that command. If you run <code>MKLDNN_LIBRARY=/usr/local/lib python setup.py install</code> then the environment variable MKLDNN_LIBRARY will have the value /usr/local/lib during the duration of the <code>python setup.py install</code> command. But if you use <code>MKLDNN_LIBRARY=/usr/local/lib &amp;&amp; python setup.py install</code> (notice the &amp;&amp;) as you are doing above, then bash will set MKLDNN_LIBRARY to /usr/local/lib only during the empty command before the &amp;&amp;, then the variable will be unset again for the next command. Try the following:</p>\n<pre><code>echo 'echo \"$FOO\"' &gt; echo_foo.sh\nchmod +x echo_foo.sh\n./echo_foo.sh\nFOO='hello' ./echo_foo.sh\nFOO='hello' &amp;&amp; ./echo_foo.sh\nexport FOO='hello'\n./echo_foo.sh\n</code></pre>\n<p>Basically, \"export VAR=VAL\" is a command that sets VAR to VAL for the remainder of the bash session. \"VAR=VAL some_command\" sets VAR to VAL during the life of some_command. \"VAR=VAL &amp;&amp; some_command\" is usually a mistake, as it only sets VAR to VAL during the life of the blank no-op command right before the &amp;&amp;.</p>\n<p>Second, if you want to install Caffe2 then make sure you pass FULL_CAFFE2=1 to <code>python setup.py install</code></p>\n<p>If you still encounter this problem after correcting your command, can you give me the <a href=\"https://caffe2.ai/docs/faq.html#what-is-the-cmake-output\" rel=\"nofollow\">https://caffe2.ai/docs/faq.html#what-is-the-cmake-output</a> ?</p>", "body_text": "First, you need to get rid of all of the \"&&\" in that command. If you run MKLDNN_LIBRARY=/usr/local/lib python setup.py install then the environment variable MKLDNN_LIBRARY will have the value /usr/local/lib during the duration of the python setup.py install command. But if you use MKLDNN_LIBRARY=/usr/local/lib && python setup.py install (notice the &&) as you are doing above, then bash will set MKLDNN_LIBRARY to /usr/local/lib only during the empty command before the &&, then the variable will be unset again for the next command. Try the following:\necho 'echo \"$FOO\"' > echo_foo.sh\nchmod +x echo_foo.sh\n./echo_foo.sh\nFOO='hello' ./echo_foo.sh\nFOO='hello' && ./echo_foo.sh\nexport FOO='hello'\n./echo_foo.sh\n\nBasically, \"export VAR=VAL\" is a command that sets VAR to VAL for the remainder of the bash session. \"VAR=VAL some_command\" sets VAR to VAL during the life of some_command. \"VAR=VAL && some_command\" is usually a mistake, as it only sets VAR to VAL during the life of the blank no-op command right before the &&.\nSecond, if you want to install Caffe2 then make sure you pass FULL_CAFFE2=1 to python setup.py install\nIf you still encounter this problem after correcting your command, can you give me the https://caffe2.ai/docs/faq.html#what-is-the-cmake-output ?", "body": "First, you need to get rid of all of the \"&&\" in that command. If you run `MKLDNN_LIBRARY=/usr/local/lib python setup.py install` then the environment variable MKLDNN_LIBRARY will have the value /usr/local/lib during the duration of the `python setup.py install` command. But if you use `MKLDNN_LIBRARY=/usr/local/lib && python setup.py install` (notice the &&) as you are doing above, then bash will set MKLDNN_LIBRARY to /usr/local/lib only during the empty command before the &&, then the variable will be unset again for the next command. Try the following:\r\n```\r\necho 'echo \"$FOO\"' > echo_foo.sh\r\nchmod +x echo_foo.sh\r\n./echo_foo.sh\r\nFOO='hello' ./echo_foo.sh\r\nFOO='hello' && ./echo_foo.sh\r\nexport FOO='hello'\r\n./echo_foo.sh\r\n```\r\nBasically, \"export VAR=VAL\" is a command that sets VAR to VAL for the remainder of the bash session. \"VAR=VAL some_command\" sets VAR to VAL during the life of some_command. \"VAR=VAL && some_command\" is usually a mistake, as it only sets VAR to VAL during the life of the blank no-op command right before the &&.\r\n\r\nSecond, if you want to install Caffe2 then make sure you pass FULL_CAFFE2=1 to `python setup.py install`\r\n\r\nIf you still encounter this problem after correcting your command, can you give me the https://caffe2.ai/docs/faq.html#what-is-the-cmake-output ?"}
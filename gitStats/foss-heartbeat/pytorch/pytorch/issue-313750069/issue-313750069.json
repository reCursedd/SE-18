{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6551", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6551/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6551/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6551/events", "html_url": "https://github.com/pytorch/pytorch/issues/6551", "id": 313750069, "node_id": "MDU6SXNzdWUzMTM3NTAwNjk=", "number": 6551, "title": "[caffe2]Compiled  error with CUDA9.0", "user": {"login": "3bobo", "id": 10941268, "node_id": "MDQ6VXNlcjEwOTQxMjY4", "avatar_url": "https://avatars2.githubusercontent.com/u/10941268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3bobo", "html_url": "https://github.com/3bobo", "followers_url": "https://api.github.com/users/3bobo/followers", "following_url": "https://api.github.com/users/3bobo/following{/other_user}", "gists_url": "https://api.github.com/users/3bobo/gists{/gist_id}", "starred_url": "https://api.github.com/users/3bobo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3bobo/subscriptions", "organizations_url": "https://api.github.com/users/3bobo/orgs", "repos_url": "https://api.github.com/users/3bobo/repos", "events_url": "https://api.github.com/users/3bobo/events{/privacy}", "received_events_url": "https://api.github.com/users/3bobo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 18, "created_at": "2018-04-12T14:24:18Z", "updated_at": "2018-11-22T06:04:53Z", "closed_at": "2018-11-22T06:04:52Z", "author_association": "NONE", "body_html": "<p>[ 64%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o<br>\nIn file included from /usr/local/cuda/include/common_functions.h:50:0,<br>\nfrom /usr/local/cuda/include/cuda_runtime.h:115,<br>\nfrom :0:<br>\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"\" is not valid in preprocessor expressions<br>\n#define <strong>CUDACC_VER</strong> \"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"<br>\n^<br>\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:402:85: note: in expansion of macro \u2018<strong>CUDACC_VER</strong>\u2019<br>\n&amp;&amp; ( !defined(<strong>NVCC</strong>) || !EIGEN_ARCH_ARM_OR_ARM64 || (defined <strong>CUDACC_VER</strong> &amp;&amp; <strong>CUDACC_VER</strong> &gt;= 80000) )<br>\n^<br>\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"\" is not valid in preprocessor expressions<br>\n#define <strong>CUDACC_VER</strong> \"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"<br>\n^<br>\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:416:104: note: in expansion of macro \u2018<strong>CUDACC_VER</strong>\u2019<br>\n#if EIGEN_MAX_CPP_VER&gt;=14 &amp;&amp; (__cplusplus &gt; 199711L &amp;&amp; defined(<strong>CUDACC_VER</strong>) &amp;&amp; (EIGEN_COMP_CLANG || <strong>CUDACC_VER</strong> &gt;= 70500))<br>\n^<br>\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"\" is not valid in preprocessor expressions<br>\n#define <strong>CUDACC_VER</strong> \"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"<br>\n^<br>\n/usr/include/eigen3/Eigen/Core:232:33: note: in expansion of macro \u2018<strong>CUDACC_VER</strong>\u2019<br>\n#if defined <strong>CUDACC_VER</strong> &amp;&amp; <strong>CUDACC_VER</strong> &gt;= 70500<br>\n^<br>\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"\" is not valid in preprocessor expressions<br>\n#define <strong>CUDACC_VER</strong> \"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"<br>\n^<br>\n/usr/include/eigen3/Eigen/src/Core/arch/CUDA/Half.h:392:63: note: in expansion of macro \u2018<strong>CUDACC_VER</strong>\u2019<br>\n#if defined(EIGEN_HAS_CUDA_FP16) &amp;&amp; defined <strong>CUDACC_VER</strong> &amp;&amp; <strong>CUDACC_VER</strong> &gt;= 80000 &amp;&amp; defined(<strong>CUDA_ARCH</strong>) &amp;&amp; <strong>CUDA_ARCH</strong> &gt;= 530<br>\n^<br>\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"\" is not valid in preprocessor expressions<br>\n#define <strong>CUDACC_VER</strong> \"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"<br>\n^<br>\n/usr/include/eigen3/Eigen/src/Core/arch/CUDA/Half.h:560:31: note: in expansion of macro \u2018<strong>CUDACC_VER</strong>\u2019<br>\n#if defined <strong>CUDACC_VER</strong> &amp;&amp; <strong>CUDACC_VER</strong> &gt;= 80000 &amp;&amp; defined(<strong>CUDA_ARCH</strong>) &amp;&amp; <strong>CUDA_ARCH</strong> &gt;= 530<br>\n^<br>\nCMake Error at caffe2_gpu_generated_math_gpu.cu.o.Release.cmake:215 (message):<br>\nError generating<br>\n/home/zqk/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/utils/./caffe2_gpu_generated_math_gpu.cu.o</p>\n<p>caffe2/CMakeFiles/caffe2_gpu.dir/build.make:798: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o' failed<br>\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o] Error 1<br>\nCMakeFiles/Makefile2:2792: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/all' failed<br>\nmake[1]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2<br>\nMakefile:138: recipe for target 'all' failed<br>\nmake: *** [all] Error 2</p>\n<p>here is my cuda: <code>nvcc -V</code><br>\n<code>nvcc:NVIDIA (R) Cuda compiler driver</code><br>\n<code>Copyright (c) 2005-2017 NVIDIA Corporation</code><br>\n<code>Built on Fri_Sep__1_21:08:03_CDT_2017</code><br>\n<code>Cuda compilation tools, release 9.0, V9.0.176</code></p>\n<p>because I install CUDA9.0 and cudnn 7.1 while I compiled caffe,so I just install dependencies and then\"cmake ..\" and \"sudo make install\",and the error appear.how to solve this?thanks</p>", "body_text": "[ 64%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o\nIn file included from /usr/local/cuda/include/common_functions.h:50:0,\nfrom /usr/local/cuda/include/cuda_runtime.h:115,\nfrom :0:\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\" is not valid in preprocessor expressions\n#define CUDACC_VER \"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\n^\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:402:85: note: in expansion of macro \u2018CUDACC_VER\u2019\n&& ( !defined(NVCC) || !EIGEN_ARCH_ARM_OR_ARM64 || (defined CUDACC_VER && CUDACC_VER >= 80000) )\n^\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\" is not valid in preprocessor expressions\n#define CUDACC_VER \"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\n^\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:416:104: note: in expansion of macro \u2018CUDACC_VER\u2019\n#if EIGEN_MAX_CPP_VER>=14 && (__cplusplus > 199711L && defined(CUDACC_VER) && (EIGEN_COMP_CLANG || CUDACC_VER >= 70500))\n^\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\" is not valid in preprocessor expressions\n#define CUDACC_VER \"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\n^\n/usr/include/eigen3/Eigen/Core:232:33: note: in expansion of macro \u2018CUDACC_VER\u2019\n#if defined CUDACC_VER && CUDACC_VER >= 70500\n^\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\" is not valid in preprocessor expressions\n#define CUDACC_VER \"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\n^\n/usr/include/eigen3/Eigen/src/Core/arch/CUDA/Half.h:392:63: note: in expansion of macro \u2018CUDACC_VER\u2019\n#if defined(EIGEN_HAS_CUDA_FP16) && defined CUDACC_VER && CUDACC_VER >= 80000 && defined(CUDA_ARCH) && CUDA_ARCH >= 530\n^\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\" is not valid in preprocessor expressions\n#define CUDACC_VER \"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\n^\n/usr/include/eigen3/Eigen/src/Core/arch/CUDA/Half.h:560:31: note: in expansion of macro \u2018CUDACC_VER\u2019\n#if defined CUDACC_VER && CUDACC_VER >= 80000 && defined(CUDA_ARCH) && CUDA_ARCH >= 530\n^\nCMake Error at caffe2_gpu_generated_math_gpu.cu.o.Release.cmake:215 (message):\nError generating\n/home/zqk/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/utils/./caffe2_gpu_generated_math_gpu.cu.o\ncaffe2/CMakeFiles/caffe2_gpu.dir/build.make:798: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o' failed\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o] Error 1\nCMakeFiles/Makefile2:2792: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/all' failed\nmake[1]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2\nMakefile:138: recipe for target 'all' failed\nmake: *** [all] Error 2\nhere is my cuda: nvcc -V\nnvcc:NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2017 NVIDIA Corporation\nBuilt on Fri_Sep__1_21:08:03_CDT_2017\nCuda compilation tools, release 9.0, V9.0.176\nbecause I install CUDA9.0 and cudnn 7.1 while I compiled caffe,so I just install dependencies and then\"cmake ..\" and \"sudo make install\",and the error appear.how to solve this?thanks", "body": "[ 64%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o\r\nIn file included from /usr/local/cuda/include/common_functions.h:50:0,\r\n                 from /usr/local/cuda/include/cuda_runtime.h:115,\r\n                 from <command-line>:0:\r\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\" is not valid in preprocessor expressions\r\n #define __CUDACC_VER__ \"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\r\n                        ^\r\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:402:85: note: in expansion of macro \u2018__CUDACC_VER__\u2019\r\n   && ( !defined(__NVCC__) || !EIGEN_ARCH_ARM_OR_ARM64 || (defined __CUDACC_VER__ && __CUDACC_VER__ >= 80000) )\r\n                                                                                     ^\r\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\" is not valid in preprocessor expressions\r\n #define __CUDACC_VER__ \"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\r\n                        ^\r\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:416:104: note: in expansion of macro \u2018__CUDACC_VER__\u2019\r\n #if EIGEN_MAX_CPP_VER>=14 && (__cplusplus > 199711L && defined(__CUDACC_VER__) && (EIGEN_COMP_CLANG || __CUDACC_VER__ >= 70500))\r\n                                                                                                        ^\r\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\" is not valid in preprocessor expressions\r\n #define __CUDACC_VER__ \"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\r\n                        ^\r\n/usr/include/eigen3/Eigen/Core:232:33: note: in expansion of macro \u2018__CUDACC_VER__\u2019\r\n   #if defined __CUDACC_VER__ && __CUDACC_VER__ >= 70500\r\n                                 ^\r\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\" is not valid in preprocessor expressions\r\n #define __CUDACC_VER__ \"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\r\n                        ^\r\n/usr/include/eigen3/Eigen/src/Core/arch/CUDA/Half.h:392:63: note: in expansion of macro \u2018__CUDACC_VER__\u2019\r\n #if defined(EIGEN_HAS_CUDA_FP16) && defined __CUDACC_VER__ && __CUDACC_VER__ >= 80000 && defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 530\r\n                                                               ^\r\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\" is not valid in preprocessor expressions\r\n #define __CUDACC_VER__ \"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\r\n                        ^\r\n/usr/include/eigen3/Eigen/src/Core/arch/CUDA/Half.h:560:31: note: in expansion of macro \u2018__CUDACC_VER__\u2019\r\n #if defined __CUDACC_VER__ && __CUDACC_VER__ >= 80000 && defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 530\r\n                               ^\r\nCMake Error at caffe2_gpu_generated_math_gpu.cu.o.Release.cmake:215 (message):\r\n  Error generating\r\n  /home/zqk/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/utils/./caffe2_gpu_generated_math_gpu.cu.o\r\n\r\n\r\ncaffe2/CMakeFiles/caffe2_gpu.dir/build.make:798: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o' failed\r\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o] Error 1\r\nCMakeFiles/Makefile2:2792: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/all' failed\r\nmake[1]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2\r\nMakefile:138: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n\r\nhere is my cuda: `nvcc -V`\r\n`nvcc:NVIDIA (R) Cuda compiler driver`\r\n`Copyright (c) 2005-2017 NVIDIA Corporation`\r\n`Built on Fri_Sep__1_21:08:03_CDT_2017`\r\n`Cuda compilation tools, release 9.0, V9.0.176`\r\n\r\nbecause I install CUDA9.0 and cudnn 7.1 while I compiled caffe,so I just install dependencies and then\"cmake ..\" and \"sudo make install\",and the error appear.how to solve this?thanks\r\n"}
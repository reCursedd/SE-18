{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/310273862", "html_url": "https://github.com/pytorch/pytorch/issues/1088#issuecomment-310273862", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1088", "id": 310273862, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDI3Mzg2Mg==", "user": {"login": "kai3n", "id": 6747433, "node_id": "MDQ6VXNlcjY3NDc0MzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6747433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kai3n", "html_url": "https://github.com/kai3n", "followers_url": "https://api.github.com/users/kai3n/followers", "following_url": "https://api.github.com/users/kai3n/following{/other_user}", "gists_url": "https://api.github.com/users/kai3n/gists{/gist_id}", "starred_url": "https://api.github.com/users/kai3n/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kai3n/subscriptions", "organizations_url": "https://api.github.com/users/kai3n/orgs", "repos_url": "https://api.github.com/users/kai3n/repos", "events_url": "https://api.github.com/users/kai3n/events{/privacy}", "received_events_url": "https://api.github.com/users/kai3n/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-22T04:42:59Z", "updated_at": "2017-06-22T04:44:09Z", "author_association": "NONE", "body_html": "<p>I got a different outcome from you. I think it may depend on GPU.</p>\n<div class=\"highlight highlight-source-shell\"><pre>&gt;&gt;&gt; cputimes = []\n&gt;&gt;&gt; <span class=\"pl-k\">for</span> <span class=\"pl-smi\">sampl</span> <span class=\"pl-k\">in</span> (100, 1000, 10000, 100000):\n...         start = <span class=\"pl-en\">time.time</span>()\n...\n&gt;&gt;&gt;\n&gt;&gt;&gt; <span class=\"pl-k\">for</span> <span class=\"pl-smi\">sampl</span> <span class=\"pl-k\">in</span> (100, 1000, 10000, 100000):\n...     start = <span class=\"pl-en\">time.time</span>()\n...     <span class=\"pl-k\">for</span> <span class=\"pl-smi\">i</span> <span class=\"pl-k\">in</span> range(sampl):\n...             rn = np.tanh(xn)\n...             xn = Jn.dot(xn)\n...     end = <span class=\"pl-en\">time.time</span>()\n...     cputimes.append(end-start)\n...\n&gt;&gt;&gt; print(cputimes)\n[0.1352827548980713, 1.2355773448944092, 6.053329706192017, 49.56582975387573]\n&gt;&gt;&gt; Jc = <span class=\"pl-en\">J.cuda</span>()\n&gt;&gt;&gt; xc = <span class=\"pl-en\">x.cuda</span>()\n&gt;&gt;&gt; rc = <span class=\"pl-en\">r.cuda</span>()\n&gt;&gt;&gt;\n&gt;&gt;&gt; gputimes = []\n&gt;&gt;&gt; <span class=\"pl-k\">for</span> <span class=\"pl-smi\">sampl</span> <span class=\"pl-k\">in</span> (100, 1000, 10000, 100000):\n...     start = <span class=\"pl-en\">time.time</span>()\n...     <span class=\"pl-k\">for</span> <span class=\"pl-smi\">i</span> <span class=\"pl-k\">in</span> range(sampl):\n...             rc = tr.tanh(xc)\n...             xc = Jc.mv(xc)\n...     end = <span class=\"pl-en\">time.time</span>()\n...     gputimes.append(end-start)\n...\n&gt;&gt;&gt; print(gputimes)\n[0.626868486404419, 0.01941514015197754, 0.36851024627685547, 3.3849217891693115]\n&gt;&gt;&gt;</pre></div>", "body_text": "I got a different outcome from you. I think it may depend on GPU.\n>>> cputimes = []\n>>> for sampl in (100, 1000, 10000, 100000):\n...         start = time.time()\n...\n>>>\n>>> for sampl in (100, 1000, 10000, 100000):\n...     start = time.time()\n...     for i in range(sampl):\n...             rn = np.tanh(xn)\n...             xn = Jn.dot(xn)\n...     end = time.time()\n...     cputimes.append(end-start)\n...\n>>> print(cputimes)\n[0.1352827548980713, 1.2355773448944092, 6.053329706192017, 49.56582975387573]\n>>> Jc = J.cuda()\n>>> xc = x.cuda()\n>>> rc = r.cuda()\n>>>\n>>> gputimes = []\n>>> for sampl in (100, 1000, 10000, 100000):\n...     start = time.time()\n...     for i in range(sampl):\n...             rc = tr.tanh(xc)\n...             xc = Jc.mv(xc)\n...     end = time.time()\n...     gputimes.append(end-start)\n...\n>>> print(gputimes)\n[0.626868486404419, 0.01941514015197754, 0.36851024627685547, 3.3849217891693115]\n>>>", "body": "I got a different outcome from you. I think it may depend on GPU.\r\n```shell\r\n>>> cputimes = []\r\n>>> for sampl in (100, 1000, 10000, 100000):\r\n...         start = time.time()\r\n...\r\n>>>\r\n>>> for sampl in (100, 1000, 10000, 100000):\r\n...     start = time.time()\r\n...     for i in range(sampl):\r\n...             rn = np.tanh(xn)\r\n...             xn = Jn.dot(xn)\r\n...     end = time.time()\r\n...     cputimes.append(end-start)\r\n...\r\n>>> print(cputimes)\r\n[0.1352827548980713, 1.2355773448944092, 6.053329706192017, 49.56582975387573]\r\n>>> Jc = J.cuda()\r\n>>> xc = x.cuda()\r\n>>> rc = r.cuda()\r\n>>>\r\n>>> gputimes = []\r\n>>> for sampl in (100, 1000, 10000, 100000):\r\n...     start = time.time()\r\n...     for i in range(sampl):\r\n...             rc = tr.tanh(xc)\r\n...             xc = Jc.mv(xc)\r\n...     end = time.time()\r\n...     gputimes.append(end-start)\r\n...\r\n>>> print(gputimes)\r\n[0.626868486404419, 0.01941514015197754, 0.36851024627685547, 3.3849217891693115]\r\n>>>\r\n```"}
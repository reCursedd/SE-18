{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6080", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6080/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6080/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6080/events", "html_url": "https://github.com/pytorch/pytorch/pull/6080", "id": 309502139, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc4MTQxMjQz", "number": 6080, "title": "[WIP] Onnx RNN export: remove Constant default hidden state", "user": {"login": "anderspapitto", "id": 1388690, "node_id": "MDQ6VXNlcjEzODg2OTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1388690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anderspapitto", "html_url": "https://github.com/anderspapitto", "followers_url": "https://api.github.com/users/anderspapitto/followers", "following_url": "https://api.github.com/users/anderspapitto/following{/other_user}", "gists_url": "https://api.github.com/users/anderspapitto/gists{/gist_id}", "starred_url": "https://api.github.com/users/anderspapitto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anderspapitto/subscriptions", "organizations_url": "https://api.github.com/users/anderspapitto/orgs", "repos_url": "https://api.github.com/users/anderspapitto/repos", "events_url": "https://api.github.com/users/anderspapitto/events{/privacy}", "received_events_url": "https://api.github.com/users/anderspapitto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-28T19:36:21Z", "updated_at": "2018-04-02T20:23:34Z", "closed_at": "2018-03-30T19:14:55Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/6080", "html_url": "https://github.com/pytorch/pytorch/pull/6080", "diff_url": "https://github.com/pytorch/pytorch/pull/6080.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/6080.patch"}, "body_html": "<p>when no explicit hidden state is provided, a default is created by<br>\nconstructing a new Variable filled with zeros. This gets traced as a<br>\nConstant operator, which hardcodes in the batch size.</p>\n<p>To fix this, we remove such constant operators in an 'optimization'<br>\npass. We could have also fixed it by causing the code to not generate<br>\na Constant in the first place, but this is the least invasive fix from<br>\nthe perspective of the pure pytorch codebase.</p>", "body_text": "when no explicit hidden state is provided, a default is created by\nconstructing a new Variable filled with zeros. This gets traced as a\nConstant operator, which hardcodes in the batch size.\nTo fix this, we remove such constant operators in an 'optimization'\npass. We could have also fixed it by causing the code to not generate\na Constant in the first place, but this is the least invasive fix from\nthe perspective of the pure pytorch codebase.", "body": "when no explicit hidden state is provided, a default is created by\r\nconstructing a new Variable filled with zeros. This gets traced as a\r\nConstant operator, which hardcodes in the batch size.\r\n\r\nTo fix this, we remove such constant operators in an 'optimization'\r\npass. We could have also fixed it by causing the code to not generate\r\na Constant in the first place, but this is the least invasive fix from\r\nthe perspective of the pure pytorch codebase."}
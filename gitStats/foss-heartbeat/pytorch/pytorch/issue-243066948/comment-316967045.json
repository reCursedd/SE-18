{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/316967045", "html_url": "https://github.com/pytorch/pytorch/pull/2105#issuecomment-316967045", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2105", "id": 316967045, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjk2NzA0NQ==", "user": {"login": "Kaixhin", "id": 991891, "node_id": "MDQ6VXNlcjk5MTg5MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/991891?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kaixhin", "html_url": "https://github.com/Kaixhin", "followers_url": "https://api.github.com/users/Kaixhin/followers", "following_url": "https://api.github.com/users/Kaixhin/following{/other_user}", "gists_url": "https://api.github.com/users/Kaixhin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kaixhin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kaixhin/subscriptions", "organizations_url": "https://api.github.com/users/Kaixhin/orgs", "repos_url": "https://api.github.com/users/Kaixhin/repos", "events_url": "https://api.github.com/users/Kaixhin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kaixhin/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-21T10:29:57Z", "updated_at": "2017-07-21T10:29:57Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Looks like the <a href=\"https://build.pytorch.org/job/pytorch-PR-py3-linux/484//console\" rel=\"nofollow\">Jenkins builds</a> are picking up a massive difference between CPU and CUDA (partial log below, same effect for the test with optional embeddings):</p>\n<pre><code>10:26:26 ======================================================================\n10:26:26 FAIL: test_Relation (__main__.TestNN)\n10:26:26 ----------------------------------------------------------------------\n10:26:26 Traceback (most recent call last):\n10:26:26   File \"test_nn.py\", line 3109, in &lt;lambda&gt;\n10:26:26     setattr(TestNN, test_name, lambda self, test=test: test(self))\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 567, in __call__\n10:26:26     self.test_noncontig(test_case, module, input)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 622, in test_noncontig\n10:26:26     test_case.assertEqual(test_case._get_parameters(module)[1], d_param)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 215, in assertEqual\n10:26:26     self.assertEqual(x_, y_, prec, message)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 207, in assertEqual\n10:26:26     assertTensorsEqual(x, y)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 199, in assertTensorsEqual\n10:26:26     self.assertLessEqual(max_err, prec, message)\n10:26:26 AssertionError: 197.57770511835574 not less than or equal to 1e-05 : \n10:26:26 \n10:26:26 ======================================================================\n10:26:26 FAIL: test_Relation_cuda (__main__.TestNN)\n10:26:26 ----------------------------------------------------------------------\n10:26:26 Traceback (most recent call last):\n10:26:26   File \"test_nn.py\", line 3110, in &lt;lambda&gt;\n10:26:26     setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 659, in test_cuda\n10:26:26     test_case.assertEqual(cpu_d_p, gpu_d_p, 2e-4)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 207, in assertEqual\n10:26:26     assertTensorsEqual(x, y)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 199, in assertTensorsEqual\n10:26:26     self.assertLessEqual(max_err, prec, message)\n10:26:26 AssertionError: 0.00033025816082954407 not less than or equal to 0.0002 : \n</code></pre>", "body_text": "Looks like the Jenkins builds are picking up a massive difference between CPU and CUDA (partial log below, same effect for the test with optional embeddings):\n10:26:26 ======================================================================\n10:26:26 FAIL: test_Relation (__main__.TestNN)\n10:26:26 ----------------------------------------------------------------------\n10:26:26 Traceback (most recent call last):\n10:26:26   File \"test_nn.py\", line 3109, in <lambda>\n10:26:26     setattr(TestNN, test_name, lambda self, test=test: test(self))\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 567, in __call__\n10:26:26     self.test_noncontig(test_case, module, input)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 622, in test_noncontig\n10:26:26     test_case.assertEqual(test_case._get_parameters(module)[1], d_param)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 215, in assertEqual\n10:26:26     self.assertEqual(x_, y_, prec, message)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 207, in assertEqual\n10:26:26     assertTensorsEqual(x, y)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 199, in assertTensorsEqual\n10:26:26     self.assertLessEqual(max_err, prec, message)\n10:26:26 AssertionError: 197.57770511835574 not less than or equal to 1e-05 : \n10:26:26 \n10:26:26 ======================================================================\n10:26:26 FAIL: test_Relation_cuda (__main__.TestNN)\n10:26:26 ----------------------------------------------------------------------\n10:26:26 Traceback (most recent call last):\n10:26:26   File \"test_nn.py\", line 3110, in <lambda>\n10:26:26     setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 659, in test_cuda\n10:26:26     test_case.assertEqual(cpu_d_p, gpu_d_p, 2e-4)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 207, in assertEqual\n10:26:26     assertTensorsEqual(x, y)\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 199, in assertTensorsEqual\n10:26:26     self.assertLessEqual(max_err, prec, message)\n10:26:26 AssertionError: 0.00033025816082954407 not less than or equal to 0.0002 :", "body": "Looks like the [Jenkins builds](https://build.pytorch.org/job/pytorch-PR-py3-linux/484//console) are picking up a massive difference between CPU and CUDA (partial log below, same effect for the test with optional embeddings):\r\n\r\n\r\n```\r\n10:26:26 ======================================================================\r\n10:26:26 FAIL: test_Relation (__main__.TestNN)\r\n10:26:26 ----------------------------------------------------------------------\r\n10:26:26 Traceback (most recent call last):\r\n10:26:26   File \"test_nn.py\", line 3109, in <lambda>\r\n10:26:26     setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 567, in __call__\r\n10:26:26     self.test_noncontig(test_case, module, input)\r\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 622, in test_noncontig\r\n10:26:26     test_case.assertEqual(test_case._get_parameters(module)[1], d_param)\r\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 215, in assertEqual\r\n10:26:26     self.assertEqual(x_, y_, prec, message)\r\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 207, in assertEqual\r\n10:26:26     assertTensorsEqual(x, y)\r\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 199, in assertTensorsEqual\r\n10:26:26     self.assertLessEqual(max_err, prec, message)\r\n10:26:26 AssertionError: 197.57770511835574 not less than or equal to 1e-05 : \r\n10:26:26 \r\n10:26:26 ======================================================================\r\n10:26:26 FAIL: test_Relation_cuda (__main__.TestNN)\r\n10:26:26 ----------------------------------------------------------------------\r\n10:26:26 Traceback (most recent call last):\r\n10:26:26   File \"test_nn.py\", line 3110, in <lambda>\r\n10:26:26     setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common_nn.py\", line 659, in test_cuda\r\n10:26:26     test_case.assertEqual(cpu_d_p, gpu_d_p, 2e-4)\r\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 207, in assertEqual\r\n10:26:26     assertTensorsEqual(x, y)\r\n10:26:26   File \"/home/jenkins/buildbot/workspace/pytorch-PR-py3-linux/builder/pytorch/test/common.py\", line 199, in assertTensorsEqual\r\n10:26:26     self.assertLessEqual(max_err, prec, message)\r\n10:26:26 AssertionError: 0.00033025816082954407 not less than or equal to 0.0002 : \r\n```"}
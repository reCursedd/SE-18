{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12879", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12879/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12879/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12879/events", "html_url": "https://github.com/pytorch/pytorch/issues/12879", "id": 372042966, "node_id": "MDU6SXNzdWUzNzIwNDI5NjY=", "number": 12879, "title": "Eigen in Caffe2 doesn't produce vectorized instructions", "user": {"login": "dzhulgakov", "id": 17890620, "node_id": "MDQ6VXNlcjE3ODkwNjIw", "avatar_url": "https://avatars2.githubusercontent.com/u/17890620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dzhulgakov", "html_url": "https://github.com/dzhulgakov", "followers_url": "https://api.github.com/users/dzhulgakov/followers", "following_url": "https://api.github.com/users/dzhulgakov/following{/other_user}", "gists_url": "https://api.github.com/users/dzhulgakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dzhulgakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dzhulgakov/subscriptions", "organizations_url": "https://api.github.com/users/dzhulgakov/orgs", "repos_url": "https://api.github.com/users/dzhulgakov/repos", "events_url": "https://api.github.com/users/dzhulgakov/events{/privacy}", "received_events_url": "https://api.github.com/users/dzhulgakov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": {"login": "smessmer", "id": 2373925, "node_id": "MDQ6VXNlcjIzNzM5MjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2373925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smessmer", "html_url": "https://github.com/smessmer", "followers_url": "https://api.github.com/users/smessmer/followers", "following_url": "https://api.github.com/users/smessmer/following{/other_user}", "gists_url": "https://api.github.com/users/smessmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/smessmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smessmer/subscriptions", "organizations_url": "https://api.github.com/users/smessmer/orgs", "repos_url": "https://api.github.com/users/smessmer/repos", "events_url": "https://api.github.com/users/smessmer/events{/privacy}", "received_events_url": "https://api.github.com/users/smessmer/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "smessmer", "id": 2373925, "node_id": "MDQ6VXNlcjIzNzM5MjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2373925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smessmer", "html_url": "https://github.com/smessmer", "followers_url": "https://api.github.com/users/smessmer/followers", "following_url": "https://api.github.com/users/smessmer/following{/other_user}", "gists_url": "https://api.github.com/users/smessmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/smessmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smessmer/subscriptions", "organizations_url": "https://api.github.com/users/smessmer/orgs", "repos_url": "https://api.github.com/users/smessmer/repos", "events_url": "https://api.github.com/users/smessmer/events{/privacy}", "received_events_url": "https://api.github.com/users/smessmer/received_events", "type": "User", "site_admin": false}, {"login": "dzhulgakov", "id": 17890620, "node_id": "MDQ6VXNlcjE3ODkwNjIw", "avatar_url": "https://avatars2.githubusercontent.com/u/17890620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dzhulgakov", "html_url": "https://github.com/dzhulgakov", "followers_url": "https://api.github.com/users/dzhulgakov/followers", "following_url": "https://api.github.com/users/dzhulgakov/following{/other_user}", "gists_url": "https://api.github.com/users/dzhulgakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dzhulgakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dzhulgakov/subscriptions", "organizations_url": "https://api.github.com/users/dzhulgakov/orgs", "repos_url": "https://api.github.com/users/dzhulgakov/repos", "events_url": "https://api.github.com/users/dzhulgakov/events{/privacy}", "received_events_url": "https://api.github.com/users/dzhulgakov/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-19T17:13:13Z", "updated_at": "2018-10-22T19:15:19Z", "closed_at": null, "author_association": "MEMBER", "body_html": "<p>Compiling with: <code>CFLAGS=-march=native python setup.py build develop</code></p>\n<p>Repro code</p>\n<pre><code>from caffe2.python import core, workspace\n\ntest_net = core.Net(\"layer_norm_test\")\ntest_net.LayerNorm([\"input\"], [\"output\", \"mean\", \"stddev\"], epsilon=1e-5)\n\nimport numpy as np\nworkspace.FeedBlob('input', np.random.rand(20, 5, 10, 10).astype('f'))\nworkspace.CreateNet(test_net)\ns = time.time()\nworkspace.RunNet(test_net.Name(), NITER)\nt_caffe2 = time.time() - s\nprint('caffe2 time per iter', t_caffe2 / NITER * 1000)\n</code></pre>\n<p>Performance is 11x slower than internal build with BUCK</p>\n<p>Verified that vector instructions are not generated with <code>perf</code>:</p>\n<pre><code>caffe2::LayerNormOp&lt;caffe2::CPUContext&gt;::DoRunWithType&lt;float&gt;\n       \u2502       nop\n       \u25027d8:   mov    %rcx,%rax\n       \u2502       vmovss (%r8,%rcx,4),%xmm0\n  1.45 \u2502       cqto\n  0.02 \u2502       idiv   %rdi\n 26.52 \u2502       mov    %rcx,%rax\n  0.15 \u2502       add    %r10,%rdx\n  0.03 \u2502       vsubss (%r12,%rdx,4),%xmm0,%xmm0\n  6.46 \u2502       cqto\n       \u2502       idiv   %rsi\n 29.93 \u2502       add    %r11,%rdx\n  0.50 \u2502       vdivss 0x0(%r13,%rdx,4),%xmm0,%xmm0\n 24.20 \u2502       vmovss %xmm0,(%r9,%rcx,4)\n  1.76 \u2502       add    $0x1,%rcx\n       \u2502       cmp    %rcx,%rbx\n       \u2502     \u2191 jg     7d8\n       \u2502810:   add    $0x1,%r14\n</code></pre>\n<p>Verified from checking <code>build/build.ninja</code> that the flags is passed to the file in question (and built on clean setup):</p>\n<pre><code>build caffe2/CMakeFiles/caffe2.dir/operators/layer_norm_op.cc.o: CXX_COMPILER__caffe2 ../caffe2/operators/layer_norm_op.cc || cmake_order_depends_target_caffe2\n  DEFINES = -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DNNP_CONVOLUTION_ONLY=0 -DNNP_INFERENCE_ONLY=0 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -Dcaffe2_EXPORTS\n  DEP_FILE = caffe2/CMakeFiles/caffe2.dir/operators/layer_norm_op.cc.o.d\n  FLAGS = --std=c++11  -march=native -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-unused-but-set-variable -Wno-maybe-uninitialized -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O2  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -fvisibility=hidden -DCAFFE2_BUILD_MAIN_LIB -O2 -std=gnu++11\n  INCLUDES = -I../aten/src -I. -I../ -isystem third_party/gloo -isystem ../cmake/../third_party/gloo -I../third_party/protobuf/src -isystem ../cmake/../third_party/googletest/googletest/include -I../cmake/../third_party/benchmark/include -isystem ../cmake/../third_party/eigen -isystem /usr/include/python2.7 -isystem /data/users/dzhulgakov/pytorch-env/lib/python2.7/site-packages/numpy/core/include -isystem ../cmake/../third_party/pybind11/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -Icaffe2/aten/src/TH -I../aten/src/TH -Icaffe2/aten/src -Iaten/src -I../aten/src/THNN -I../aten/src/THCUNN -I../aten/../third_party/catch/single_include -Icaffe2/aten/src/ATen -I../aten/src/ATen/.. -I../caffe2/core/nomnigraph/include -isystem include -I../c10/.. -I../third_party/NNPACK/include -I../third_party/pthreadpool/include -I../third_party/cpuinfo/include -I../third_party/FP16/include\n  IN_ABS = /data/users/dzhulgakov/pytorch/caffe2/operators/layer_norm_op.cc\n  OBJECT_DIR = caffe2/CMakeFiles/caffe2.dir\n  OBJECT_FILE_DIR = caffe2/CMakeFiles/caffe2.dir/operators\n  TARGET_COMPILE_PDB = caffe2/CMakeFiles/caffe2.dir/\n  TARGET_PDB = lib/libcaffe2.pdb\n</code></pre>\n<p>Machine:</p>\n<pre><code>lscpu\nArchitecture:        x86_64\nCPU op-mode(s):      32-bit, 64-bit\nByte Order:          Little Endian\nCPU(s):              24\nOn-line CPU(s) list: 0-23\nThread(s) per core:  1\nCore(s) per socket:  1\nSocket(s):           24\nNUMA node(s):        1\nVendor ID:           GenuineIntel\nCPU family:          6\nModel:               94\nModel name:          Intel Core Processor (Skylake)\nStepping:            3\nCPU MHz:             2394.452\nBogoMIPS:            4788.90\nVirtualization:      VT-x\nHypervisor vendor:   KVM\nVirtualization type: full\nL1d cache:           32K\nL1i cache:           32K\nL2 cache:            4096K\nL3 cache:            16384K\nNUMA node0 CPU(s):   0-23\nFlags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid pni pclmulqdq vmx ssse3 fma cx16 pcid sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm rdseed adx smap xsaveopt arat\n</code></pre>\n<p>Discovered as part of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"361863052\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/11867\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/11867/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/11867\">#11867</a></p>", "body_text": "Compiling with: CFLAGS=-march=native python setup.py build develop\nRepro code\nfrom caffe2.python import core, workspace\n\ntest_net = core.Net(\"layer_norm_test\")\ntest_net.LayerNorm([\"input\"], [\"output\", \"mean\", \"stddev\"], epsilon=1e-5)\n\nimport numpy as np\nworkspace.FeedBlob('input', np.random.rand(20, 5, 10, 10).astype('f'))\nworkspace.CreateNet(test_net)\ns = time.time()\nworkspace.RunNet(test_net.Name(), NITER)\nt_caffe2 = time.time() - s\nprint('caffe2 time per iter', t_caffe2 / NITER * 1000)\n\nPerformance is 11x slower than internal build with BUCK\nVerified that vector instructions are not generated with perf:\ncaffe2::LayerNormOp<caffe2::CPUContext>::DoRunWithType<float>\n       \u2502       nop\n       \u25027d8:   mov    %rcx,%rax\n       \u2502       vmovss (%r8,%rcx,4),%xmm0\n  1.45 \u2502       cqto\n  0.02 \u2502       idiv   %rdi\n 26.52 \u2502       mov    %rcx,%rax\n  0.15 \u2502       add    %r10,%rdx\n  0.03 \u2502       vsubss (%r12,%rdx,4),%xmm0,%xmm0\n  6.46 \u2502       cqto\n       \u2502       idiv   %rsi\n 29.93 \u2502       add    %r11,%rdx\n  0.50 \u2502       vdivss 0x0(%r13,%rdx,4),%xmm0,%xmm0\n 24.20 \u2502       vmovss %xmm0,(%r9,%rcx,4)\n  1.76 \u2502       add    $0x1,%rcx\n       \u2502       cmp    %rcx,%rbx\n       \u2502     \u2191 jg     7d8\n       \u2502810:   add    $0x1,%r14\n\nVerified from checking build/build.ninja that the flags is passed to the file in question (and built on clean setup):\nbuild caffe2/CMakeFiles/caffe2.dir/operators/layer_norm_op.cc.o: CXX_COMPILER__caffe2 ../caffe2/operators/layer_norm_op.cc || cmake_order_depends_target_caffe2\n  DEFINES = -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DNNP_CONVOLUTION_ONLY=0 -DNNP_INFERENCE_ONLY=0 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -Dcaffe2_EXPORTS\n  DEP_FILE = caffe2/CMakeFiles/caffe2.dir/operators/layer_norm_op.cc.o.d\n  FLAGS = --std=c++11  -march=native -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-unused-but-set-variable -Wno-maybe-uninitialized -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O2  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -fvisibility=hidden -DCAFFE2_BUILD_MAIN_LIB -O2 -std=gnu++11\n  INCLUDES = -I../aten/src -I. -I../ -isystem third_party/gloo -isystem ../cmake/../third_party/gloo -I../third_party/protobuf/src -isystem ../cmake/../third_party/googletest/googletest/include -I../cmake/../third_party/benchmark/include -isystem ../cmake/../third_party/eigen -isystem /usr/include/python2.7 -isystem /data/users/dzhulgakov/pytorch-env/lib/python2.7/site-packages/numpy/core/include -isystem ../cmake/../third_party/pybind11/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -Icaffe2/aten/src/TH -I../aten/src/TH -Icaffe2/aten/src -Iaten/src -I../aten/src/THNN -I../aten/src/THCUNN -I../aten/../third_party/catch/single_include -Icaffe2/aten/src/ATen -I../aten/src/ATen/.. -I../caffe2/core/nomnigraph/include -isystem include -I../c10/.. -I../third_party/NNPACK/include -I../third_party/pthreadpool/include -I../third_party/cpuinfo/include -I../third_party/FP16/include\n  IN_ABS = /data/users/dzhulgakov/pytorch/caffe2/operators/layer_norm_op.cc\n  OBJECT_DIR = caffe2/CMakeFiles/caffe2.dir\n  OBJECT_FILE_DIR = caffe2/CMakeFiles/caffe2.dir/operators\n  TARGET_COMPILE_PDB = caffe2/CMakeFiles/caffe2.dir/\n  TARGET_PDB = lib/libcaffe2.pdb\n\nMachine:\nlscpu\nArchitecture:        x86_64\nCPU op-mode(s):      32-bit, 64-bit\nByte Order:          Little Endian\nCPU(s):              24\nOn-line CPU(s) list: 0-23\nThread(s) per core:  1\nCore(s) per socket:  1\nSocket(s):           24\nNUMA node(s):        1\nVendor ID:           GenuineIntel\nCPU family:          6\nModel:               94\nModel name:          Intel Core Processor (Skylake)\nStepping:            3\nCPU MHz:             2394.452\nBogoMIPS:            4788.90\nVirtualization:      VT-x\nHypervisor vendor:   KVM\nVirtualization type: full\nL1d cache:           32K\nL1i cache:           32K\nL2 cache:            4096K\nL3 cache:            16384K\nNUMA node0 CPU(s):   0-23\nFlags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid pni pclmulqdq vmx ssse3 fma cx16 pcid sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm rdseed adx smap xsaveopt arat\n\nDiscovered as part of #11867", "body": "Compiling with: `CFLAGS=-march=native python setup.py build develop`\r\n\r\nRepro code\r\n```\r\nfrom caffe2.python import core, workspace\r\n\r\ntest_net = core.Net(\"layer_norm_test\")\r\ntest_net.LayerNorm([\"input\"], [\"output\", \"mean\", \"stddev\"], epsilon=1e-5)\r\n\r\nimport numpy as np\r\nworkspace.FeedBlob('input', np.random.rand(20, 5, 10, 10).astype('f'))\r\nworkspace.CreateNet(test_net)\r\ns = time.time()\r\nworkspace.RunNet(test_net.Name(), NITER)\r\nt_caffe2 = time.time() - s\r\nprint('caffe2 time per iter', t_caffe2 / NITER * 1000)\r\n```\r\n\r\nPerformance is 11x slower than internal build with BUCK\r\n\r\nVerified that vector instructions are not generated with `perf`:\r\n\r\n```\r\ncaffe2::LayerNormOp<caffe2::CPUContext>::DoRunWithType<float>\r\n       \u2502       nop\r\n       \u25027d8:   mov    %rcx,%rax\r\n       \u2502       vmovss (%r8,%rcx,4),%xmm0\r\n  1.45 \u2502       cqto\r\n  0.02 \u2502       idiv   %rdi\r\n 26.52 \u2502       mov    %rcx,%rax\r\n  0.15 \u2502       add    %r10,%rdx\r\n  0.03 \u2502       vsubss (%r12,%rdx,4),%xmm0,%xmm0\r\n  6.46 \u2502       cqto\r\n       \u2502       idiv   %rsi\r\n 29.93 \u2502       add    %r11,%rdx\r\n  0.50 \u2502       vdivss 0x0(%r13,%rdx,4),%xmm0,%xmm0\r\n 24.20 \u2502       vmovss %xmm0,(%r9,%rcx,4)\r\n  1.76 \u2502       add    $0x1,%rcx\r\n       \u2502       cmp    %rcx,%rbx\r\n       \u2502     \u2191 jg     7d8\r\n       \u2502810:   add    $0x1,%r14\r\n```\r\n\r\nVerified from checking `build/build.ninja` that the flags is passed to the file in question (and built on clean setup):\r\n```\r\nbuild caffe2/CMakeFiles/caffe2.dir/operators/layer_norm_op.cc.o: CXX_COMPILER__caffe2 ../caffe2/operators/layer_norm_op.cc || cmake_order_depends_target_caffe2\r\n  DEFINES = -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DNNP_CONVOLUTION_ONLY=0 -DNNP_INFERENCE_ONLY=0 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -Dcaffe2_EXPORTS\r\n  DEP_FILE = caffe2/CMakeFiles/caffe2.dir/operators/layer_norm_op.cc.o.d\r\n  FLAGS = --std=c++11  -march=native -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-unused-but-set-variable -Wno-maybe-uninitialized -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O2  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -fvisibility=hidden -DCAFFE2_BUILD_MAIN_LIB -O2 -std=gnu++11\r\n  INCLUDES = -I../aten/src -I. -I../ -isystem third_party/gloo -isystem ../cmake/../third_party/gloo -I../third_party/protobuf/src -isystem ../cmake/../third_party/googletest/googletest/include -I../cmake/../third_party/benchmark/include -isystem ../cmake/../third_party/eigen -isystem /usr/include/python2.7 -isystem /data/users/dzhulgakov/pytorch-env/lib/python2.7/site-packages/numpy/core/include -isystem ../cmake/../third_party/pybind11/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -Icaffe2/aten/src/TH -I../aten/src/TH -Icaffe2/aten/src -Iaten/src -I../aten/src/THNN -I../aten/src/THCUNN -I../aten/../third_party/catch/single_include -Icaffe2/aten/src/ATen -I../aten/src/ATen/.. -I../caffe2/core/nomnigraph/include -isystem include -I../c10/.. -I../third_party/NNPACK/include -I../third_party/pthreadpool/include -I../third_party/cpuinfo/include -I../third_party/FP16/include\r\n  IN_ABS = /data/users/dzhulgakov/pytorch/caffe2/operators/layer_norm_op.cc\r\n  OBJECT_DIR = caffe2/CMakeFiles/caffe2.dir\r\n  OBJECT_FILE_DIR = caffe2/CMakeFiles/caffe2.dir/operators\r\n  TARGET_COMPILE_PDB = caffe2/CMakeFiles/caffe2.dir/\r\n  TARGET_PDB = lib/libcaffe2.pdb\r\n```\r\n\r\nMachine:\r\n```\r\nlscpu\r\nArchitecture:        x86_64\r\nCPU op-mode(s):      32-bit, 64-bit\r\nByte Order:          Little Endian\r\nCPU(s):              24\r\nOn-line CPU(s) list: 0-23\r\nThread(s) per core:  1\r\nCore(s) per socket:  1\r\nSocket(s):           24\r\nNUMA node(s):        1\r\nVendor ID:           GenuineIntel\r\nCPU family:          6\r\nModel:               94\r\nModel name:          Intel Core Processor (Skylake)\r\nStepping:            3\r\nCPU MHz:             2394.452\r\nBogoMIPS:            4788.90\r\nVirtualization:      VT-x\r\nHypervisor vendor:   KVM\r\nVirtualization type: full\r\nL1d cache:           32K\r\nL1i cache:           32K\r\nL2 cache:            4096K\r\nL3 cache:            16384K\r\nNUMA node0 CPU(s):   0-23\r\nFlags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid pni pclmulqdq vmx ssse3 fma cx16 pcid sse4_1 sse4_2 movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm rdseed adx smap xsaveopt arat\r\n```\r\n\r\nDiscovered as part of #11867"}
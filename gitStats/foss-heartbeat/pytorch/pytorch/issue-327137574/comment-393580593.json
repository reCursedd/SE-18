{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/393580593", "html_url": "https://github.com/pytorch/pytorch/issues/7903#issuecomment-393580593", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7903", "id": 393580593, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzU4MDU5Mw==", "user": {"login": "anton-malakhov", "id": 7475946, "node_id": "MDQ6VXNlcjc0NzU5NDY=", "avatar_url": "https://avatars2.githubusercontent.com/u/7475946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anton-malakhov", "html_url": "https://github.com/anton-malakhov", "followers_url": "https://api.github.com/users/anton-malakhov/followers", "following_url": "https://api.github.com/users/anton-malakhov/following{/other_user}", "gists_url": "https://api.github.com/users/anton-malakhov/gists{/gist_id}", "starred_url": "https://api.github.com/users/anton-malakhov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anton-malakhov/subscriptions", "organizations_url": "https://api.github.com/users/anton-malakhov/orgs", "repos_url": "https://api.github.com/users/anton-malakhov/repos", "events_url": "https://api.github.com/users/anton-malakhov/events{/privacy}", "received_events_url": "https://api.github.com/users/anton-malakhov/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-31T15:57:40Z", "updated_at": "2018-05-31T16:04:23Z", "author_association": "NONE", "body_html": "<p>I'd suggest trying <code>KMP_COMPOSABILITY=mode=exclusive</code> if you use Intel's OpenMP runtime, it will prevent quadratic over-subscription cases.<br>\nIf PyTorch uses any Python threads or plain MKL (not just DNN part), you could try <code>tbb4py</code> package (Python part of what used to be <code>tbb</code> package in Intel Distribution, soon will be available on conda-forge as well) running application in TBB monkey-patch mode <code>python -m tbb app.py</code></p>\n<p>More details: <a href=\"https://github.com/anton-malakhov/scipy_proceedings/blob/2018-composability/papers/anton_malakhov/composability.rst\">https://github.com/anton-malakhov/scipy_proceedings/blob/2018-composability/papers/anton_malakhov/composability.rst</a></p>", "body_text": "I'd suggest trying KMP_COMPOSABILITY=mode=exclusive if you use Intel's OpenMP runtime, it will prevent quadratic over-subscription cases.\nIf PyTorch uses any Python threads or plain MKL (not just DNN part), you could try tbb4py package (Python part of what used to be tbb package in Intel Distribution, soon will be available on conda-forge as well) running application in TBB monkey-patch mode python -m tbb app.py\nMore details: https://github.com/anton-malakhov/scipy_proceedings/blob/2018-composability/papers/anton_malakhov/composability.rst", "body": "I'd suggest trying `KMP_COMPOSABILITY=mode=exclusive` if you use Intel's OpenMP runtime, it will prevent quadratic over-subscription cases.\r\nIf PyTorch uses any Python threads or plain MKL (not just DNN part), you could try `tbb4py` package (Python part of what used to be `tbb` package in Intel Distribution, soon will be available on conda-forge as well) running application in TBB monkey-patch mode `python -m tbb app.py`\r\n\r\nMore details: https://github.com/anton-malakhov/scipy_proceedings/blob/2018-composability/papers/anton_malakhov/composability.rst"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/392666488", "html_url": "https://github.com/pytorch/pytorch/issues/7903#issuecomment-392666488", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7903", "id": 392666488, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjY2NjQ4OA==", "user": {"login": "MlWoo", "id": 20226293, "node_id": "MDQ6VXNlcjIwMjI2Mjkz", "avatar_url": "https://avatars2.githubusercontent.com/u/20226293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MlWoo", "html_url": "https://github.com/MlWoo", "followers_url": "https://api.github.com/users/MlWoo/followers", "following_url": "https://api.github.com/users/MlWoo/following{/other_user}", "gists_url": "https://api.github.com/users/MlWoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/MlWoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MlWoo/subscriptions", "organizations_url": "https://api.github.com/users/MlWoo/orgs", "repos_url": "https://api.github.com/users/MlWoo/repos", "events_url": "https://api.github.com/users/MlWoo/events{/privacy}", "received_events_url": "https://api.github.com/users/MlWoo/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-29T06:29:02Z", "updated_at": "2018-05-29T11:30:33Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1716488\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/cpuhrsch\">@cpuhrsch</a><br>\nI have benchmarked the the PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"327180679\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/7909\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/7909/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/7909\">#7909</a> , it really removes the perf bug of LSTM.<br>\nHowever, Profiling of Vtune shows that <code>tbb</code> does not work because of removing tanh. So I think the solution is palliatives.  The problem still also occurs in CNN benchmarks.<br>\nOpenMP also plays an important role not only in threading libraries for MKL but also in other parts of TH and THNN modules. I think introduction of tbb will influence widely and deeply in current project. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20233731\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mingfeima\">@mingfeima</a> Has Intel MKLDNN introduce TBB support right now?</p>", "body_text": "@cpuhrsch\nI have benchmarked the the PR #7909 , it really removes the perf bug of LSTM.\nHowever, Profiling of Vtune shows that tbb does not work because of removing tanh. So I think the solution is palliatives.  The problem still also occurs in CNN benchmarks.\nOpenMP also plays an important role not only in threading libraries for MKL but also in other parts of TH and THNN modules. I think introduction of tbb will influence widely and deeply in current project. @mingfeima Has Intel MKLDNN introduce TBB support right now?", "body": "@cpuhrsch \r\nI have benchmarked the the PR #7909 , it really removes the perf bug of LSTM.\r\nHowever, Profiling of Vtune shows that `tbb` does not work because of removing tanh. So I think the solution is palliatives.  The problem still also occurs in CNN benchmarks.\r\nOpenMP also plays an important role not only in threading libraries for MKL but also in other parts of TH and THNN modules. I think introduction of tbb will influence widely and deeply in current project. @mingfeima Has Intel MKLDNN introduce TBB support right now?"}
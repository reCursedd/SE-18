{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5590", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5590/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5590/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5590/events", "html_url": "https://github.com/pytorch/pytorch/issues/5590", "id": 302637847, "node_id": "MDU6SXNzdWUzMDI2Mzc4NDc=", "number": 5590, "title": "Memory leak in the windows build (development version)", "user": {"login": "shekhovt", "id": 2486893, "node_id": "MDQ6VXNlcjI0ODY4OTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2486893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shekhovt", "html_url": "https://github.com/shekhovt", "followers_url": "https://api.github.com/users/shekhovt/followers", "following_url": "https://api.github.com/users/shekhovt/following{/other_user}", "gists_url": "https://api.github.com/users/shekhovt/gists{/gist_id}", "starred_url": "https://api.github.com/users/shekhovt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shekhovt/subscriptions", "organizations_url": "https://api.github.com/users/shekhovt/orgs", "repos_url": "https://api.github.com/users/shekhovt/repos", "events_url": "https://api.github.com/users/shekhovt/events{/privacy}", "received_events_url": "https://api.github.com/users/shekhovt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-06T10:08:48Z", "updated_at": "2018-03-28T14:07:03Z", "closed_at": "2018-03-28T14:07:03Z", "author_association": "NONE", "body_html": "<p>Related to windows support issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"201800912\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/494\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/494/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/494\">#494</a></p>\n<ul>\n<li>OS: Windows 10/ x64</li>\n<li>PyTorch version:  pytorch-0.3.1. from repo <a href=\"https://github.com/peterjc123/pytorch-scripts\">https://github.com/peterjc123/pytorch-scripts</a></li>\n<li>How you installed PyTorch (conda, pip, source): conda</li>\n<li>Python version: 3.6.1 (64-bit)</li>\n<li>CUDA/cuDNN version: CUDA 8.0.60, cuDNN: 6.0.21, driver version: 382.05</li>\n<li>GPU models and configuration: GTX1080</li>\n</ul>\n<p>During training, each epoch eats up memory until the virtual memory is over (pagefile size). Then it throws the error:</p>\n<p>Traceback (most recent call last):<br>\nFile \"\", line 1, in<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main<br>\nexitcode = _main(fd)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 115, in _main<br>\nself = reduction.pickle.load(from_parent)<br>\nMemoryError</p>\n<p>... my stuff...</p>\n<p>File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 417, in iter<br>\nreturn DataLoaderIter(self)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 234, in init<br>\nw.start()<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\process.py\", line 105, in start<br>\nself._popen = self._Popen(self)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\context.py\", line 223, in _Popen<br>\nreturn _default_context.get_context().Process._Popen(process_obj)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\context.py\", line 322, in _Popen<br>\nreturn Popen(process_obj)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 65, in init<br>\nreduction.dump(process_obj, to_child)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 60, in dump<br>\nForkingPickler(file, protocol).dump(obj)<br>\nBrokenPipeError: [Errno 32] Broken pipe</p>\n<p>The error is raised from the the data loader, but I am not sure it is the one to blame, maybe it just happens to be the one needing memory when there is none available.<br>\nI am using num_workers=1, as recommended above in this forum.</p>\n<p>peteterjc123 commented that a workaround is to set num_workers=0</p>", "body_text": "Related to windows support issue #494\n\nOS: Windows 10/ x64\nPyTorch version:  pytorch-0.3.1. from repo https://github.com/peterjc123/pytorch-scripts\nHow you installed PyTorch (conda, pip, source): conda\nPython version: 3.6.1 (64-bit)\nCUDA/cuDNN version: CUDA 8.0.60, cuDNN: 6.0.21, driver version: 382.05\nGPU models and configuration: GTX1080\n\nDuring training, each epoch eats up memory until the virtual memory is over (pagefile size). Then it throws the error:\nTraceback (most recent call last):\nFile \"\", line 1, in\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main\nexitcode = _main(fd)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 115, in _main\nself = reduction.pickle.load(from_parent)\nMemoryError\n... my stuff...\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 417, in iter\nreturn DataLoaderIter(self)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 234, in init\nw.start()\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\process.py\", line 105, in start\nself._popen = self._Popen(self)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\context.py\", line 223, in _Popen\nreturn _default_context.get_context().Process._Popen(process_obj)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\context.py\", line 322, in _Popen\nreturn Popen(process_obj)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 65, in init\nreduction.dump(process_obj, to_child)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 60, in dump\nForkingPickler(file, protocol).dump(obj)\nBrokenPipeError: [Errno 32] Broken pipe\nThe error is raised from the the data loader, but I am not sure it is the one to blame, maybe it just happens to be the one needing memory when there is none available.\nI am using num_workers=1, as recommended above in this forum.\npeteterjc123 commented that a workaround is to set num_workers=0", "body": "Related to windows support issue #494\r\n\r\n- OS: Windows 10/ x64\r\n- PyTorch version:  pytorch-0.3.1. from repo https://github.com/peterjc123/pytorch-scripts\r\n- How you installed PyTorch (conda, pip, source): conda\r\n- Python version: 3.6.1 (64-bit)\r\n- CUDA/cuDNN version: CUDA 8.0.60, cuDNN: 6.0.21, driver version: 382.05\r\n- GPU models and configuration: GTX1080\r\n\r\n\r\nDuring training, each epoch eats up memory until the virtual memory is over (pagefile size). Then it throws the error:\r\n\r\nTraceback (most recent call last):\r\nFile \"\", line 1, in \r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main\r\nexitcode = _main(fd)\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 115, in _main\r\nself = reduction.pickle.load(from_parent)\r\nMemoryError\r\n\r\n... my stuff...\r\n\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 417, in iter\r\nreturn DataLoaderIter(self)\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 234, in init\r\nw.start()\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\process.py\", line 105, in start\r\nself._popen = self._Popen(self)\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\context.py\", line 223, in _Popen\r\nreturn _default_context.get_context().Process._Popen(process_obj)\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\context.py\", line 322, in _Popen\r\nreturn Popen(process_obj)\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 65, in init\r\nreduction.dump(process_obj, to_child)\r\nFile \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 60, in dump\r\nForkingPickler(file, protocol).dump(obj)\r\nBrokenPipeError: [Errno 32] Broken pipe\r\n\r\nThe error is raised from the the data loader, but I am not sure it is the one to blame, maybe it just happens to be the one needing memory when there is none available.\r\nI am using num_workers=1, as recommended above in this forum.\r\n\r\npeteterjc123 commented that a workaround is to set num_workers=0"}
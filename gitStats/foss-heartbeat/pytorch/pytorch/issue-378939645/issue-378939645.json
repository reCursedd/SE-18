{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13750", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13750/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13750/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13750/events", "html_url": "https://github.com/pytorch/pytorch/issues/13750", "id": 378939645, "node_id": "MDU6SXNzdWUzNzg5Mzk2NDU=", "number": 13750, "title": "c10d FileStore - Race among processes to create the file if the file doesn't exist", "user": {"login": "teng-li", "id": 8120856, "node_id": "MDQ6VXNlcjgxMjA4NTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/8120856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teng-li", "html_url": "https://github.com/teng-li", "followers_url": "https://api.github.com/users/teng-li/followers", "following_url": "https://api.github.com/users/teng-li/following{/other_user}", "gists_url": "https://api.github.com/users/teng-li/gists{/gist_id}", "starred_url": "https://api.github.com/users/teng-li/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teng-li/subscriptions", "organizations_url": "https://api.github.com/users/teng-li/orgs", "repos_url": "https://api.github.com/users/teng-li/repos", "events_url": "https://api.github.com/users/teng-li/events{/privacy}", "received_events_url": "https://api.github.com/users/teng-li/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1002728630, "node_id": "MDU6TGFiZWwxMDAyNzI4NjMw", "url": "https://api.github.com/repos/pytorch/pytorch/labels/1.0", "name": "1.0", "color": "f9db31", "default": false}, {"id": 679953883, "node_id": "MDU6TGFiZWw2Nzk5NTM4ODM=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/distributed", "name": "distributed", "color": "c2e0c6", "default": false}], "state": "open", "locked": false, "assignee": {"login": "pietern", "id": 9845, "node_id": "MDQ6VXNlcjk4NDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/9845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietern", "html_url": "https://github.com/pietern", "followers_url": "https://api.github.com/users/pietern/followers", "following_url": "https://api.github.com/users/pietern/following{/other_user}", "gists_url": "https://api.github.com/users/pietern/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietern/subscriptions", "organizations_url": "https://api.github.com/users/pietern/orgs", "repos_url": "https://api.github.com/users/pietern/repos", "events_url": "https://api.github.com/users/pietern/events{/privacy}", "received_events_url": "https://api.github.com/users/pietern/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pietern", "id": 9845, "node_id": "MDQ6VXNlcjk4NDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/9845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietern", "html_url": "https://github.com/pietern", "followers_url": "https://api.github.com/users/pietern/followers", "following_url": "https://api.github.com/users/pietern/following{/other_user}", "gists_url": "https://api.github.com/users/pietern/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietern/subscriptions", "organizations_url": "https://api.github.com/users/pietern/orgs", "repos_url": "https://api.github.com/users/pietern/repos", "events_url": "https://api.github.com/users/pietern/events{/privacy}", "received_events_url": "https://api.github.com/users/pietern/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2018-11-08T22:14:31Z", "updated_at": "2018-11-16T23:14:06Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>Repro by 8 processes single node training</p>\n<pre><code>=&gt; creating model 'resnet50'\n=&gt; creating model 'resnet50'\n=&gt; creating model 'resnet50'\n=&gt; creating model 'resnet50'\n=&gt; creating model 'resnet50'\n=&gt; creating model 'resnet50'\n=&gt; creating model 'resnet50'\n=&gt; creating model 'resnet50'\nUsing device: 3\nTraceback (most recent call last):\n  File \"/private/home/tengli/github_issues/nccl_hang/main_distributed_dp_nodataloader.py\", line 213, in &lt;module&gt;\n    main()\n  File \"/private/home/tengli/github_issues/nccl_hang/main_distributed_dp_nodataloader.py\", line 116, in main\n    broadcast_buffers=False)\n  File \"/private/home/tengli/pytorch/torch/nn/parallel/distributed.py\", line 150, in __init__\n    self.broadcast_bucket_size)\n  File \"/private/home/tengli/pytorch/torch/nn/parallel/distributed.py\", line 266, in _dist_broadcast_coalesced\n    dist._dist_broadcast_coalesced(self.process_group, tensors, buffer_size, False)\nRuntimeError: open(/private/home/tengli/new_store_test.txt): No such file or directory\nUsing device: 0\nUsing device: 5\nUsing device: 2\nUsing device: 1\nUsing device: 6\nUsing device: 4\nUsing device: 7\n</code></pre>\n<p>One process says it's not able to open the file</p>", "body_text": "Repro by 8 processes single node training\n=> creating model 'resnet50'\n=> creating model 'resnet50'\n=> creating model 'resnet50'\n=> creating model 'resnet50'\n=> creating model 'resnet50'\n=> creating model 'resnet50'\n=> creating model 'resnet50'\n=> creating model 'resnet50'\nUsing device: 3\nTraceback (most recent call last):\n  File \"/private/home/tengli/github_issues/nccl_hang/main_distributed_dp_nodataloader.py\", line 213, in <module>\n    main()\n  File \"/private/home/tengli/github_issues/nccl_hang/main_distributed_dp_nodataloader.py\", line 116, in main\n    broadcast_buffers=False)\n  File \"/private/home/tengli/pytorch/torch/nn/parallel/distributed.py\", line 150, in __init__\n    self.broadcast_bucket_size)\n  File \"/private/home/tengli/pytorch/torch/nn/parallel/distributed.py\", line 266, in _dist_broadcast_coalesced\n    dist._dist_broadcast_coalesced(self.process_group, tensors, buffer_size, False)\nRuntimeError: open(/private/home/tengli/new_store_test.txt): No such file or directory\nUsing device: 0\nUsing device: 5\nUsing device: 2\nUsing device: 1\nUsing device: 6\nUsing device: 4\nUsing device: 7\n\nOne process says it's not able to open the file", "body": "Repro by 8 processes single node training\r\n```\r\n=> creating model 'resnet50'\r\n=> creating model 'resnet50'\r\n=> creating model 'resnet50'\r\n=> creating model 'resnet50'\r\n=> creating model 'resnet50'\r\n=> creating model 'resnet50'\r\n=> creating model 'resnet50'\r\n=> creating model 'resnet50'\r\nUsing device: 3\r\nTraceback (most recent call last):\r\n  File \"/private/home/tengli/github_issues/nccl_hang/main_distributed_dp_nodataloader.py\", line 213, in <module>\r\n    main()\r\n  File \"/private/home/tengli/github_issues/nccl_hang/main_distributed_dp_nodataloader.py\", line 116, in main\r\n    broadcast_buffers=False)\r\n  File \"/private/home/tengli/pytorch/torch/nn/parallel/distributed.py\", line 150, in __init__\r\n    self.broadcast_bucket_size)\r\n  File \"/private/home/tengli/pytorch/torch/nn/parallel/distributed.py\", line 266, in _dist_broadcast_coalesced\r\n    dist._dist_broadcast_coalesced(self.process_group, tensors, buffer_size, False)\r\nRuntimeError: open(/private/home/tengli/new_store_test.txt): No such file or directory\r\nUsing device: 0\r\nUsing device: 5\r\nUsing device: 2\r\nUsing device: 1\r\nUsing device: 6\r\nUsing device: 4\r\nUsing device: 7\r\n```\r\n\r\nOne process says it's not able to open the file"}
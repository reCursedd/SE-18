{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/5511", "id": 172388356, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcyMzg4MzU2", "html_url": "https://github.com/pytorch/pytorch/pull/5511", "diff_url": "https://github.com/pytorch/pytorch/pull/5511.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/5511.patch", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5511", "number": 5511, "state": "closed", "locked": false, "title": "Bilinear upsampling fix", "user": {"login": "Dorimer", "id": 22355406, "node_id": "MDQ6VXNlcjIyMzU1NDA2", "avatar_url": "https://avatars1.githubusercontent.com/u/22355406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dorimer", "html_url": "https://github.com/Dorimer", "followers_url": "https://api.github.com/users/Dorimer/followers", "following_url": "https://api.github.com/users/Dorimer/following{/other_user}", "gists_url": "https://api.github.com/users/Dorimer/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dorimer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dorimer/subscriptions", "organizations_url": "https://api.github.com/users/Dorimer/orgs", "repos_url": "https://api.github.com/users/Dorimer/repos", "events_url": "https://api.github.com/users/Dorimer/events{/privacy}", "received_events_url": "https://api.github.com/users/Dorimer/received_events", "type": "User", "site_admin": false}, "body": "Hello,\r\nWhile working on transferring neural network architecture from PyTorch to Caffe I noticed a serious difference between PyTorch bilinear upsampling layer and a Caffe's deconvolution with bilinear kernel.\r\nAfter some research, it turned out that PyTorch bilinear upsampling code clearly has one problem: **Result depends on spatial size,** which means that, for example, two similar parts of two images won't be the same after upsampling if these images have different sizes.\r\nThis bug is caused by pixel coordinate computation trick, which is pretty, but inaccurate.\r\nVisual example of the bug and the fix can be viewed here: [https://gist.github.com/Dorimer/e2389bfc4dd86c7ebbea3a1f45fc4327](https://gist.github.com/Dorimer/e2389bfc4dd86c7ebbea3a1f45fc4327)\r\n", "created_at": "2018-03-01T23:59:17Z", "updated_at": "2018-03-26T15:32:58Z", "closed_at": "2018-03-26T15:32:58Z", "merged_at": null, "merge_commit_sha": "18bceec42c3f27a8433da3317824575d9a981e78", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 846310180, "node_id": "MDU6TGFiZWw4NDYzMTAxODA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bc-breaking", "name": "bc-breaking", "color": "ed7d8a", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/pytorch/pytorch/pulls/5511/commits", "review_comments_url": "https://api.github.com/repos/pytorch/pytorch/pulls/5511/comments", "review_comment_url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5511/comments", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/20881fb51304ad45175695ebc614e3186286ad10", "head": {"label": "Dorimer:bilinear_upsampling_fix", "ref": "bilinear_upsampling_fix", "sha": "20881fb51304ad45175695ebc614e3186286ad10", "user": {"login": "Dorimer", "id": 22355406, "node_id": "MDQ6VXNlcjIyMzU1NDA2", "avatar_url": "https://avatars1.githubusercontent.com/u/22355406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dorimer", "html_url": "https://github.com/Dorimer", "followers_url": "https://api.github.com/users/Dorimer/followers", "following_url": "https://api.github.com/users/Dorimer/following{/other_user}", "gists_url": "https://api.github.com/users/Dorimer/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dorimer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dorimer/subscriptions", "organizations_url": "https://api.github.com/users/Dorimer/orgs", "repos_url": "https://api.github.com/users/Dorimer/repos", "events_url": "https://api.github.com/users/Dorimer/events{/privacy}", "received_events_url": "https://api.github.com/users/Dorimer/received_events", "type": "User", "site_admin": false}, "repo": {"id": 121653891, "node_id": "MDEwOlJlcG9zaXRvcnkxMjE2NTM4OTE=", "name": "pytorch", "full_name": "Dorimer/pytorch", "private": false, "owner": {"login": "Dorimer", "id": 22355406, "node_id": "MDQ6VXNlcjIyMzU1NDA2", "avatar_url": "https://avatars1.githubusercontent.com/u/22355406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dorimer", "html_url": "https://github.com/Dorimer", "followers_url": "https://api.github.com/users/Dorimer/followers", "following_url": "https://api.github.com/users/Dorimer/following{/other_user}", "gists_url": "https://api.github.com/users/Dorimer/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dorimer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dorimer/subscriptions", "organizations_url": "https://api.github.com/users/Dorimer/orgs", "repos_url": "https://api.github.com/users/Dorimer/repos", "events_url": "https://api.github.com/users/Dorimer/events{/privacy}", "received_events_url": "https://api.github.com/users/Dorimer/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/Dorimer/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": true, "url": "https://api.github.com/repos/Dorimer/pytorch", "forks_url": "https://api.github.com/repos/Dorimer/pytorch/forks", "keys_url": "https://api.github.com/repos/Dorimer/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/Dorimer/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/Dorimer/pytorch/teams", "hooks_url": "https://api.github.com/repos/Dorimer/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/Dorimer/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/Dorimer/pytorch/events", "assignees_url": "https://api.github.com/repos/Dorimer/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/Dorimer/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/Dorimer/pytorch/tags", "blobs_url": "https://api.github.com/repos/Dorimer/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/Dorimer/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/Dorimer/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/Dorimer/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/Dorimer/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/Dorimer/pytorch/languages", "stargazers_url": "https://api.github.com/repos/Dorimer/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/Dorimer/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/Dorimer/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/Dorimer/pytorch/subscription", "commits_url": "https://api.github.com/repos/Dorimer/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/Dorimer/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/Dorimer/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/Dorimer/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/Dorimer/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/Dorimer/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/Dorimer/pytorch/merges", "archive_url": "https://api.github.com/repos/Dorimer/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/Dorimer/pytorch/downloads", "issues_url": "https://api.github.com/repos/Dorimer/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/Dorimer/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/Dorimer/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/Dorimer/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/Dorimer/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/Dorimer/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/Dorimer/pytorch/deployments", "created_at": "2018-02-15T16:43:01Z", "updated_at": "2018-10-24T15:07:55Z", "pushed_at": "2018-02-20T10:56:36Z", "git_url": "git://github.com/Dorimer/pytorch.git", "ssh_url": "git@github.com:Dorimer/pytorch.git", "clone_url": "https://github.com/Dorimer/pytorch.git", "svn_url": "https://github.com/Dorimer/pytorch", "homepage": "http://pytorch.org", "size": 22813, "stargazers_count": 1, "watchers_count": 1, "language": "Python", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 0, "open_issues": 0, "watchers": 1, "default_branch": "master"}}, "base": {"label": "pytorch:master", "ref": "master", "sha": "27265503ad1b4c63e2caceb6b991a7abe998d7bd", "user": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 65600975, "node_id": "MDEwOlJlcG9zaXRvcnk2NTYwMDk3NQ==", "name": "pytorch", "full_name": "pytorch/pytorch", "private": false, "owner": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/pytorch/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": false, "url": "https://api.github.com/repos/pytorch/pytorch", "forks_url": "https://api.github.com/repos/pytorch/pytorch/forks", "keys_url": "https://api.github.com/repos/pytorch/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pytorch/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pytorch/pytorch/teams", "hooks_url": "https://api.github.com/repos/pytorch/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/pytorch/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/pytorch/pytorch/events", "assignees_url": "https://api.github.com/repos/pytorch/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/pytorch/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/pytorch/pytorch/tags", "blobs_url": "https://api.github.com/repos/pytorch/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pytorch/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pytorch/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pytorch/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/pytorch/pytorch/languages", "stargazers_url": "https://api.github.com/repos/pytorch/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/pytorch/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/pytorch/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/pytorch/pytorch/subscription", "commits_url": "https://api.github.com/repos/pytorch/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pytorch/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pytorch/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pytorch/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/pytorch/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pytorch/pytorch/merges", "archive_url": "https://api.github.com/repos/pytorch/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pytorch/pytorch/downloads", "issues_url": "https://api.github.com/repos/pytorch/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/pytorch/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/pytorch/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/pytorch/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pytorch/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/pytorch/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/pytorch/pytorch/deployments", "created_at": "2016-08-13T05:26:41Z", "updated_at": "2018-11-24T12:35:43Z", "pushed_at": "2018-11-24T12:42:01Z", "git_url": "git://github.com/pytorch/pytorch.git", "ssh_url": "git@github.com:pytorch/pytorch.git", "clone_url": "https://github.com/pytorch/pytorch.git", "svn_url": "https://github.com/pytorch/pytorch", "homepage": "http://pytorch.org", "size": 89656, "stargazers_count": 21589, "watchers_count": 21589, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 5153, "mirror_url": null, "archived": false, "open_issues_count": 2196, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 5153, "open_issues": 2196, "watchers": 21589, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/5511"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/5511"}, "issue": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/5511"}, "comments": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/5511/comments"}, "review_comments": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/5511/comments"}, "review_comment": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/5511/commits"}, "statuses": {"href": "https://api.github.com/repos/pytorch/pytorch/statuses/20881fb51304ad45175695ebc614e3186286ad10"}}, "author_association": "NONE", "body_html": "<p>Hello,<br>\nWhile working on transferring neural network architecture from PyTorch to Caffe I noticed a serious difference between PyTorch bilinear upsampling layer and a Caffe's deconvolution with bilinear kernel.<br>\nAfter some research, it turned out that PyTorch bilinear upsampling code clearly has one problem: <strong>Result depends on spatial size,</strong> which means that, for example, two similar parts of two images won't be the same after upsampling if these images have different sizes.<br>\nThis bug is caused by pixel coordinate computation trick, which is pretty, but inaccurate.<br>\nVisual example of the bug and the fix can be viewed here: <a href=\"https://gist.github.com/Dorimer/e2389bfc4dd86c7ebbea3a1f45fc4327\">https://gist.github.com/Dorimer/e2389bfc4dd86c7ebbea3a1f45fc4327</a></p>", "body_text": "Hello,\nWhile working on transferring neural network architecture from PyTorch to Caffe I noticed a serious difference between PyTorch bilinear upsampling layer and a Caffe's deconvolution with bilinear kernel.\nAfter some research, it turned out that PyTorch bilinear upsampling code clearly has one problem: Result depends on spatial size, which means that, for example, two similar parts of two images won't be the same after upsampling if these images have different sizes.\nThis bug is caused by pixel coordinate computation trick, which is pretty, but inaccurate.\nVisual example of the bug and the fix can be viewed here: https://gist.github.com/Dorimer/e2389bfc4dd86c7ebbea3a1f45fc4327", "merged": false, "mergeable": false, "rebaseable": false, "mergeable_state": "dirty", "merged_by": null, "comments": 9, "review_comments": 0, "maintainer_can_modify": false, "commits": 1, "additions": 16, "deletions": 16, "changed_files": 3}
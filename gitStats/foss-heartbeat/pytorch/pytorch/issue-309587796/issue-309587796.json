{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6095", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6095/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6095/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6095/events", "html_url": "https://github.com/pytorch/pytorch/issues/6095", "id": 309587796, "node_id": "MDU6SXNzdWUzMDk1ODc3OTY=", "number": 6095, "title": "Multi_GPUs cause a lower meanIOU", "user": {"login": "TeeyoHuang", "id": 25998332, "node_id": "MDQ6VXNlcjI1OTk4MzMy", "avatar_url": "https://avatars2.githubusercontent.com/u/25998332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeeyoHuang", "html_url": "https://github.com/TeeyoHuang", "followers_url": "https://api.github.com/users/TeeyoHuang/followers", "following_url": "https://api.github.com/users/TeeyoHuang/following{/other_user}", "gists_url": "https://api.github.com/users/TeeyoHuang/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeeyoHuang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeeyoHuang/subscriptions", "organizations_url": "https://api.github.com/users/TeeyoHuang/orgs", "repos_url": "https://api.github.com/users/TeeyoHuang/repos", "events_url": "https://api.github.com/users/TeeyoHuang/events{/privacy}", "received_events_url": "https://api.github.com/users/TeeyoHuang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-29T01:30:52Z", "updated_at": "2018-04-02T20:25:03Z", "closed_at": "2018-04-02T20:25:02Z", "author_association": "NONE", "body_html": "<h2>PyTorch GitHub Issues Guidelines</h2>\n<p>The net I used is deeplab-resnet,and the code is here:<br>\n<a href=\"https://github.com/speedinghzl/Pytorch-Deeplab\">https://github.com/speedinghzl/Pytorch-Deeplab</a>,</p>\n<p>It does have a good result when I run the code on 1 GPU\uff0c I got the meanIOU as reported-- about 72%  on the validation dataset(VOC12 VAL\uff09</p>\n<p>But when I used 5 GPUs to have a test, I got a lower meanIOU --- about 65%.<br>\n(I used 5 gpus because the batch_size is 10, so each gpu can process  2 images)</p>\n<p>I just add 2 lines:<br>\nMynet = torch.nn.DataParallel(model.cuda(gpu),device_ids=[0,1,2,3,4])</p>\n<p>and the trainning stage:<br>\nout=Mynet(images.cuda(gpu))</p>\n<p>I have tried many times but it still gets the 65% meanIOU, I think maybe I lost some necessary  steps which I don't know, can anybody give a solution? :-)</p>", "body_text": "PyTorch GitHub Issues Guidelines\nThe net I used is deeplab-resnet,and the code is here:\nhttps://github.com/speedinghzl/Pytorch-Deeplab,\nIt does have a good result when I run the code on 1 GPU\uff0c I got the meanIOU as reported-- about 72%  on the validation dataset(VOC12 VAL\uff09\nBut when I used 5 GPUs to have a test, I got a lower meanIOU --- about 65%.\n(I used 5 gpus because the batch_size is 10, so each gpu can process  2 images)\nI just add 2 lines:\nMynet = torch.nn.DataParallel(model.cuda(gpu),device_ids=[0,1,2,3,4])\nand the trainning stage:\nout=Mynet(images.cuda(gpu))\nI have tried many times but it still gets the 65% meanIOU, I think maybe I lost some necessary  steps which I don't know, can anybody give a solution? :-)", "body": "PyTorch GitHub Issues Guidelines\r\n--------------------------------\r\nThe net I used is deeplab-resnet,and the code is here:\r\nhttps://github.com/speedinghzl/Pytorch-Deeplab,\r\n\r\nIt does have a good result when I run the code on 1 GPU\uff0c I got the meanIOU as reported-- about 72%  on the validation dataset(VOC12 VAL\uff09\r\n\r\n\r\nBut when I used 5 GPUs to have a test, I got a lower meanIOU --- about 65%.\r\n(I used 5 gpus because the batch_size is 10, so each gpu can process  2 images)\r\n\r\nI just add 2 lines:\r\n    Mynet = torch.nn.DataParallel(model.cuda(gpu),device_ids=[0,1,2,3,4])\r\n\r\nand the trainning stage: \r\n    out=Mynet(images.cuda(gpu))\r\n\r\nI have tried many times but it still gets the 65% meanIOU, I think maybe I lost some necessary  steps which I don't know, can anybody give a solution? :-)\r\n\r\n\r\n"}
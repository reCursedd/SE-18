{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/413527793", "html_url": "https://github.com/pytorch/pytorch/issues/9996#issuecomment-413527793", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/9996", "id": 413527793, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzUyNzc5Mw==", "user": {"login": "lizhihao6", "id": 22168900, "node_id": "MDQ6VXNlcjIyMTY4OTAw", "avatar_url": "https://avatars0.githubusercontent.com/u/22168900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lizhihao6", "html_url": "https://github.com/lizhihao6", "followers_url": "https://api.github.com/users/lizhihao6/followers", "following_url": "https://api.github.com/users/lizhihao6/following{/other_user}", "gists_url": "https://api.github.com/users/lizhihao6/gists{/gist_id}", "starred_url": "https://api.github.com/users/lizhihao6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lizhihao6/subscriptions", "organizations_url": "https://api.github.com/users/lizhihao6/orgs", "repos_url": "https://api.github.com/users/lizhihao6/repos", "events_url": "https://api.github.com/users/lizhihao6/events{/privacy}", "received_events_url": "https://api.github.com/users/lizhihao6/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-16T12:25:02Z", "updated_at": "2018-08-16T12:25:02Z", "author_association": "NONE", "body_html": "<p>Is that only support the model like nn.Linear(10, 1)?<br>\nI define a Class A2C (nn.Module), and some errors happened.<br>\nMy code is like that:</p>\n<div class=\"highlight highlight-source-python\"><pre>Class A2C(nn.Module):\n    <span class=\"pl-c1\">__init__</span>(<span class=\"pl-c1\">self</span>):\n   forward(<span class=\"pl-c1\">self</span>):\nClass A3C(mp.Process):\n    <span class=\"pl-c1\">__init__</span>(<span class=\"pl-c1\">self</span>, global_model):\n        <span class=\"pl-c1\">self</span>.gnet <span class=\"pl-k\">=</span> global_model\n   run(model):\n        <span class=\"pl-c1\">...</span>..\n<span class=\"pl-k\">if</span> <span class=\"pl-c1\">__name__</span> <span class=\"pl-k\">==</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>__main__<span class=\"pl-pds\">\"</span></span>:\n    global_model <span class=\"pl-k\">=</span> A2C().cuda()\n    global_model.share_memory()\n    a3c <span class=\"pl-k\">=</span> A3C(global_model)\n    a3c.start()\n    a3c.join()</pre></div>\n<p>and the error is that:</p>\n<div class=\"highlight highlight-source-shell\"><pre>Traceback (most recent call last):\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>a3c.py<span class=\"pl-pds\">\"</span></span>, line 104, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n    [a3c.start() <span class=\"pl-k\">for</span> <span class=\"pl-smi\">a3c</span> <span class=\"pl-k\">in</span> a3c_list]\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>a3c.py<span class=\"pl-pds\">\"</span></span>, line 104, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>listcomp<span class=\"pl-k\">&gt;</span>\n    [a3c.start() <span class=\"pl-k\">for</span> <span class=\"pl-smi\">a3c</span> <span class=\"pl-k\">in</span> a3c_list]\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/process.py<span class=\"pl-pds\">\"</span></span>, line 105, <span class=\"pl-k\">in</span> start\n    self._popen = self._Popen(self)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/context.py<span class=\"pl-pds\">\"</span></span>, line 291, <span class=\"pl-k\">in</span> _Popen\n    <span class=\"pl-k\">return</span> Popen(process_obj)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_forkserver.py<span class=\"pl-pds\">\"</span></span>, line 35, <span class=\"pl-k\">in</span> __init__\n    <span class=\"pl-en\">super</span>().__init__(process_obj)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_fork.py<span class=\"pl-pds\">\"</span></span>, line 19, <span class=\"pl-k\">in</span> __init__\n    self._launch(process_obj)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_forkserver.py<span class=\"pl-pds\">\"</span></span>, line 47, <span class=\"pl-k\">in</span> _launch\n    reduction.dump(process_obj, buf)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/reduction.py<span class=\"pl-pds\">\"</span></span>, line 60, <span class=\"pl-k\">in</span> dump\n    ForkingPickler(file, protocol).dump(obj)\nTypeError: can<span class=\"pl-s\"><span class=\"pl-pds\">'</span>t pickle dict_keys objects</span></pre></div>", "body_text": "Is that only support the model like nn.Linear(10, 1)?\nI define a Class A2C (nn.Module), and some errors happened.\nMy code is like that:\nClass A2C(nn.Module):\n    __init__(self):\n   forward(self):\nClass A3C(mp.Process):\n    __init__(self, global_model):\n        self.gnet = global_model\n   run(model):\n        .....\nif __name__ == \"__main__\":\n    global_model = A2C().cuda()\n    global_model.share_memory()\n    a3c = A3C(global_model)\n    a3c.start()\n    a3c.join()\nand the error is that:\nTraceback (most recent call last):\n  File \"a3c.py\", line 104, in <module>\n    [a3c.start() for a3c in a3c_list]\n  File \"a3c.py\", line 104, in <listcomp>\n    [a3c.start() for a3c in a3c_list]\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/process.py\", line 105, in start\n    self._popen = self._Popen(self)\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/context.py\", line 291, in _Popen\n    return Popen(process_obj)\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_forkserver.py\", line 35, in __init__\n    super().__init__(process_obj)\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_forkserver.py\", line 47, in _launch\n    reduction.dump(process_obj, buf)\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/reduction.py\", line 60, in dump\n    ForkingPickler(file, protocol).dump(obj)\nTypeError: can't pickle dict_keys objects", "body": "Is that only support the model like nn.Linear(10, 1)?\r\nI define a Class A2C (nn.Module), and some errors happened.\r\nMy code is like that:\r\n```python\r\nClass A2C(nn.Module):\r\n    __init__(self):\r\n   forward(self):\r\nClass A3C(mp.Process):\r\n    __init__(self, global_model):\r\n        self.gnet = global_model\r\n   run(model):\r\n        .....\r\nif __name__ == \"__main__\":\r\n    global_model = A2C().cuda()\r\n    global_model.share_memory()\r\n    a3c = A3C(global_model)\r\n    a3c.start()\r\n    a3c.join()\r\n```\r\nand the error is that:\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"a3c.py\", line 104, in <module>\r\n    [a3c.start() for a3c in a3c_list]\r\n  File \"a3c.py\", line 104, in <listcomp>\r\n    [a3c.start() for a3c in a3c_list]\r\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/process.py\", line 105, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/context.py\", line 291, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_forkserver.py\", line 35, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_fork.py\", line 19, in __init__\r\n    self._launch(process_obj)\r\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/popen_forkserver.py\", line 47, in _launch\r\n    reduction.dump(process_obj, buf)\r\n  File \"/home/lizhihao/anaconda3/lib/python3.6/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\nTypeError: can't pickle dict_keys objects\r\n```\r\n"}
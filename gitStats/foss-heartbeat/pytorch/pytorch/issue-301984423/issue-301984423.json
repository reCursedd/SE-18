{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5542", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5542/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5542/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5542/events", "html_url": "https://github.com/pytorch/pytorch/issues/5542", "id": 301984423, "node_id": "MDU6SXNzdWUzMDE5ODQ0MjM=", "number": 5542, "title": "The path of *.pyd or *.so (created by cffi) is changed.", "user": {"login": "Qinka", "id": 9249996, "node_id": "MDQ6VXNlcjkyNDk5OTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/9249996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qinka", "html_url": "https://github.com/Qinka", "followers_url": "https://api.github.com/users/Qinka/followers", "following_url": "https://api.github.com/users/Qinka/following{/other_user}", "gists_url": "https://api.github.com/users/Qinka/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qinka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qinka/subscriptions", "organizations_url": "https://api.github.com/users/Qinka/orgs", "repos_url": "https://api.github.com/users/Qinka/repos", "events_url": "https://api.github.com/users/Qinka/events{/privacy}", "received_events_url": "https://api.github.com/users/Qinka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 790080431, "node_id": "MDU6TGFiZWw3OTAwODA0MzE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/windows", "name": "windows", "color": "fcff6b", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-03T09:39:32Z", "updated_at": "2018-03-04T07:03:03Z", "closed_at": "2018-03-04T07:03:03Z", "author_association": "NONE", "body_html": "<p>(old title) When build C extension, the error: FileNotFoundError was got.</p>\n<ul>\n<li>OS: Windows 10 pro</li>\n<li>PyTorch version: 0.4.0a0+0de5443</li>\n<li>How you installed PyTorch (conda, pip, source): source</li>\n<li>Python version: 3.6.4</li>\n<li>CUDA/cuDNN version: CUDA 9.0</li>\n<li>GCC version (if compiling from source): msvc 14/15 (then compiling with CUDA I use VS2015, but when build extension, the program automatically use vs2017)</li>\n</ul>\n<p>When building c extension on Windows, I got the error:</p>\n<pre><code>...\n\u6b63\u5728\u751f\u6210\u4ee3\u7801\n\u5df2\u5b8c\u6210\u4ee3\u7801\u7684\u751f\u6210\nTraceback (most recent call last):\n  File \"build.py\", line 28, in &lt;module&gt;\n    ffi.build();\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\site-packages\\torch\\utils\\ffi\\__init__.py\", line 186, in build\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\site-packages\\torch\\utils\\ffi\\__init__.py\", line 111, in _build_extension\n    os.path.join(target_dir, libname))\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\shutil.py\", line 241, in copy\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\shutil.py\", line 120, in copyfile\n    with open(src, 'rb') as fsrc:\nFileNotFoundError: [Errno 2] No such file or directory: 'C:\\\\Users\\\\qinka\\\\AppData\\\\Local\\\\Temp\\\\tmp6mft329i\\\\dot_power._ext.dow_power._dow_power.pyd'\n</code></pre>\n<p>(The Chinese above means compiler success compile the library, and generated *.lib and *.exp)</p>\n<p>And the same error was got on a Linux Work Station.</p>\n<pre><code>...\ngcc -pthread -shared -B /home/qinka/anaconda3/envs/qinka_pytorch/compiler_compat -L/home/qinka/anaconda3/envs/qinka_pytorch/lib -Wl,-rpath=/home/qinka/anaconda3/envs/qinka_pytorch/lib -Wl,--no-as-needed -Wl,--sysroot=/ ./my_package/_ext/my_lib/_my_lib.o ./raid/qinka/pytorch-ext-demo/dot_power.pytorch/extension-ffi/package/my_package/src/my_lib.o ./raid/qinka/pytorch-ext-demo/dot_power.pytorch/extension-ffi/package/my_package/src/my_lib_cuda.o -o ./my_package/_ext/my_lib/my_package._ext.my_lib._my_lib.so\nTraceback (most recent call last):\n  File \"build.py\", line 32, in &lt;module&gt;\n    ffi.build()\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 167, in build\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 105, in _build_extension\n    os.path.join(target_dir, libname))\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/shutil.py\", line 241, in copy\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/shutil.py\", line 120, in copyfile\n    with open(src, 'rb') as fsrc:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpv1yqw2m6/my_package._ext.my_lib._my_lib.so'\n</code></pre>\n<p>(gcc is 5.4.0)</p>", "body_text": "(old title) When build C extension, the error: FileNotFoundError was got.\n\nOS: Windows 10 pro\nPyTorch version: 0.4.0a0+0de5443\nHow you installed PyTorch (conda, pip, source): source\nPython version: 3.6.4\nCUDA/cuDNN version: CUDA 9.0\nGCC version (if compiling from source): msvc 14/15 (then compiling with CUDA I use VS2015, but when build extension, the program automatically use vs2017)\n\nWhen building c extension on Windows, I got the error:\n...\n\u6b63\u5728\u751f\u6210\u4ee3\u7801\n\u5df2\u5b8c\u6210\u4ee3\u7801\u7684\u751f\u6210\nTraceback (most recent call last):\n  File \"build.py\", line 28, in <module>\n    ffi.build();\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\site-packages\\torch\\utils\\ffi\\__init__.py\", line 186, in build\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\site-packages\\torch\\utils\\ffi\\__init__.py\", line 111, in _build_extension\n    os.path.join(target_dir, libname))\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\shutil.py\", line 241, in copy\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\shutil.py\", line 120, in copyfile\n    with open(src, 'rb') as fsrc:\nFileNotFoundError: [Errno 2] No such file or directory: 'C:\\\\Users\\\\qinka\\\\AppData\\\\Local\\\\Temp\\\\tmp6mft329i\\\\dot_power._ext.dow_power._dow_power.pyd'\n\n(The Chinese above means compiler success compile the library, and generated *.lib and *.exp)\nAnd the same error was got on a Linux Work Station.\n...\ngcc -pthread -shared -B /home/qinka/anaconda3/envs/qinka_pytorch/compiler_compat -L/home/qinka/anaconda3/envs/qinka_pytorch/lib -Wl,-rpath=/home/qinka/anaconda3/envs/qinka_pytorch/lib -Wl,--no-as-needed -Wl,--sysroot=/ ./my_package/_ext/my_lib/_my_lib.o ./raid/qinka/pytorch-ext-demo/dot_power.pytorch/extension-ffi/package/my_package/src/my_lib.o ./raid/qinka/pytorch-ext-demo/dot_power.pytorch/extension-ffi/package/my_package/src/my_lib_cuda.o -o ./my_package/_ext/my_lib/my_package._ext.my_lib._my_lib.so\nTraceback (most recent call last):\n  File \"build.py\", line 32, in <module>\n    ffi.build()\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 167, in build\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 105, in _build_extension\n    os.path.join(target_dir, libname))\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/shutil.py\", line 241, in copy\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/shutil.py\", line 120, in copyfile\n    with open(src, 'rb') as fsrc:\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpv1yqw2m6/my_package._ext.my_lib._my_lib.so'\n\n(gcc is 5.4.0)", "body": "(old title) When build C extension, the error: FileNotFoundError was got.\r\n\r\n- OS: Windows 10 pro\r\n- PyTorch version: 0.4.0a0+0de5443\r\n- How you installed PyTorch (conda, pip, source): source\r\n- Python version: 3.6.4\r\n- CUDA/cuDNN version: CUDA 9.0\r\n- GCC version (if compiling from source): msvc 14/15 (then compiling with CUDA I use VS2015, but when build extension, the program automatically use vs2017) \r\n\r\nWhen building c extension on Windows, I got the error:\r\n```\r\n...\r\n\u6b63\u5728\u751f\u6210\u4ee3\u7801\r\n\u5df2\u5b8c\u6210\u4ee3\u7801\u7684\u751f\u6210\r\nTraceback (most recent call last):\r\n  File \"build.py\", line 28, in <module>\r\n    ffi.build();\r\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\site-packages\\torch\\utils\\ffi\\__init__.py\", line 186, in build\r\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\r\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\site-packages\\torch\\utils\\ffi\\__init__.py\", line 111, in _build_extension\r\n    os.path.join(target_dir, libname))\r\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\shutil.py\", line 241, in copy\r\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\r\n  File \"C:\\Users\\qinka\\Anaconda3\\envs\\torch_src\\lib\\shutil.py\", line 120, in copyfile\r\n    with open(src, 'rb') as fsrc:\r\nFileNotFoundError: [Errno 2] No such file or directory: 'C:\\\\Users\\\\qinka\\\\AppData\\\\Local\\\\Temp\\\\tmp6mft329i\\\\dot_power._ext.dow_power._dow_power.pyd'\r\n```\r\n(The Chinese above means compiler success compile the library, and generated *.lib and *.exp)\r\n\r\nAnd the same error was got on a Linux Work Station.\r\n\r\n```\r\n...\r\ngcc -pthread -shared -B /home/qinka/anaconda3/envs/qinka_pytorch/compiler_compat -L/home/qinka/anaconda3/envs/qinka_pytorch/lib -Wl,-rpath=/home/qinka/anaconda3/envs/qinka_pytorch/lib -Wl,--no-as-needed -Wl,--sysroot=/ ./my_package/_ext/my_lib/_my_lib.o ./raid/qinka/pytorch-ext-demo/dot_power.pytorch/extension-ffi/package/my_package/src/my_lib.o ./raid/qinka/pytorch-ext-demo/dot_power.pytorch/extension-ffi/package/my_package/src/my_lib_cuda.o -o ./my_package/_ext/my_lib/my_package._ext.my_lib._my_lib.so\r\nTraceback (most recent call last):\r\n  File \"build.py\", line 32, in <module>\r\n    ffi.build()\r\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 167, in build\r\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\r\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 105, in _build_extension\r\n    os.path.join(target_dir, libname))\r\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/shutil.py\", line 241, in copy\r\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\r\n  File \"/home/qinka/anaconda3/envs/qinka_pytorch/lib/python3.6/shutil.py\", line 120, in copyfile\r\n    with open(src, 'rb') as fsrc:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpv1yqw2m6/my_package._ext.my_lib._my_lib.so'\r\n```\r\n(gcc is 5.4.0)"}
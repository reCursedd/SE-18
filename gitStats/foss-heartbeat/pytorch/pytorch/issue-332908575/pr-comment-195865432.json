{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/195865432", "pull_request_review_id": 129321723, "id": 195865432, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NTg2NTQzMg==", "diff_hunk": "@@ -318,7 +318,18 @@ include_directories(SYSTEM ${EIGEN3_INCLUDE_DIR})\n \n # ---[ Python + Numpy\n if(BUILD_PYTHON)\n-  set(Python_ADDITIONAL_VERSIONS 3.6 3.5 2.8 2.7 2.6)\n+  # Put the currently-activated python version at the front of\n+  # Python_ADDITIONAL_VERSIONS so that it is found first. Otherwise there may\n+  # be mismatches between Python executables and libraries used at different\n+  # stages of build time and at runtime\n+  execute_process(\n+    COMMAND \"python\" -c \"import sys; sys.stdout.write('%s.%s' % (sys.version_info.major, sys.version_info.minor))\"\n+    RESULT_VARIABLE _exitcode\n+    OUTPUT_VARIABLE _py_version)\n+  if(${_exitcode} EQUAL 0)\n+    set(Python_ADDITIONAL_VERSIONS \"${_py_version}\" \"${Python_ADDITIONAL_VERSIONS}\")\n+  endif()\n+  set(Python_ADDITIONAL_VERSIONS \"${Python_ADDITIONAL_VERSIONS}\" 3.6 3.5 2.8 2.7 2.6)", "path": "cmake/Dependencies.cmake", "position": null, "original_position": 16, "commit_id": "d18b7ed9441ad56a4c40d3ffb5f99d4f5d05e0e6", "original_commit_id": "378e2ccf5e5d0f5cb588ac8e1d0ec98509a292a9", "user": {"login": "orionr", "id": 79994, "node_id": "MDQ6VXNlcjc5OTk0", "avatar_url": "https://avatars3.githubusercontent.com/u/79994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/orionr", "html_url": "https://github.com/orionr", "followers_url": "https://api.github.com/users/orionr/followers", "following_url": "https://api.github.com/users/orionr/following{/other_user}", "gists_url": "https://api.github.com/users/orionr/gists{/gist_id}", "starred_url": "https://api.github.com/users/orionr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/orionr/subscriptions", "organizations_url": "https://api.github.com/users/orionr/orgs", "repos_url": "https://api.github.com/users/orionr/repos", "events_url": "https://api.github.com/users/orionr/events{/privacy}", "received_events_url": "https://api.github.com/users/orionr/received_events", "type": "User", "site_admin": false}, "body": "Nit - you can probably do\r\n\r\n```\r\nset(Python_ADDITIONAL_VERSIONS)\r\nif(${_exitcode} EQUAL 0)\r\n  list(APPEND Python_ADDITIONAL_VERSIONS ${_py_version})\r\nendif()\r\nlist(APPEND Python_ADDITIONAL_VERSIONS 3.6 3.5 2.8 2.7 2.6)\r\n```\r\nto make sure it is set and correctly appended.", "created_at": "2018-06-15T21:24:34Z", "updated_at": "2018-11-23T15:45:40Z", "html_url": "https://github.com/pytorch/pytorch/pull/8569#discussion_r195865432", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/8569", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/195865432"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/8569#discussion_r195865432"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/8569"}}, "body_html": "<p>Nit - you can probably do</p>\n<pre><code>set(Python_ADDITIONAL_VERSIONS)\nif(${_exitcode} EQUAL 0)\n  list(APPEND Python_ADDITIONAL_VERSIONS ${_py_version})\nendif()\nlist(APPEND Python_ADDITIONAL_VERSIONS 3.6 3.5 2.8 2.7 2.6)\n</code></pre>\n<p>to make sure it is set and correctly appended.</p>", "body_text": "Nit - you can probably do\nset(Python_ADDITIONAL_VERSIONS)\nif(${_exitcode} EQUAL 0)\n  list(APPEND Python_ADDITIONAL_VERSIONS ${_py_version})\nendif()\nlist(APPEND Python_ADDITIONAL_VERSIONS 3.6 3.5 2.8 2.7 2.6)\n\nto make sure it is set and correctly appended."}
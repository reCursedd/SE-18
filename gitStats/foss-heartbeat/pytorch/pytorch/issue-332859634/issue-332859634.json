{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8560", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8560/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8560/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8560/events", "html_url": "https://github.com/pytorch/pytorch/issues/8560", "id": 332859634, "node_id": "MDU6SXNzdWUzMzI4NTk2MzQ=", "number": 8560, "title": "[JIT] scalars tensors inside the fuser cause an assertion failure in dimension compression.", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 679953983, "node_id": "MDU6TGFiZWw2Nzk5NTM5ODM=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/jit", "name": "jit", "color": "c5def5", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-06-15T17:38:26Z", "updated_at": "2018-09-06T14:56:19Z", "closed_at": "2018-09-06T14:56:19Z", "author_association": "CONTRIBUTOR", "body_html": "<p>This errors out:</p>\n<pre><code>import torch\n@torch.jit.script\ndef func1(x, y):\n    return x + y.type_as(x)\nx = torch.tensor(0.1)\ny = torch.tensor(1)\nfunc1(x, y)\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n&lt;ipython-input-7-36d19baf43bf&gt; in &lt;module&gt;()\n      5 x = torch.tensor(0.1)\n      6 y = torch.tensor(1)\n----&gt; 7 func1(x, y)\n\nRuntimeError: torch/csrc/jit/fusion_compiler.cpp:450: operator(): Assertion `nDim &lt;= uncompressedDim` failed.\n</code></pre>\n<p>This works as expected:</p>\n<pre><code>import torch\n@torch.jit.script\ndef func2(x, y):\n    return x + y.type_as(x)\nx = torch.tensor([0.1])\ny = torch.tensor([1])\nfunc2(x, y)\n\nOut[8]: tensor([1.1000])\n</code></pre>\n<p>Relevant PR: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"328690646\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/8058\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/8058/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/8058\">#8058</a></p>", "body_text": "This errors out:\nimport torch\n@torch.jit.script\ndef func1(x, y):\n    return x + y.type_as(x)\nx = torch.tensor(0.1)\ny = torch.tensor(1)\nfunc1(x, y)\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-7-36d19baf43bf> in <module>()\n      5 x = torch.tensor(0.1)\n      6 y = torch.tensor(1)\n----> 7 func1(x, y)\n\nRuntimeError: torch/csrc/jit/fusion_compiler.cpp:450: operator(): Assertion `nDim <= uncompressedDim` failed.\n\nThis works as expected:\nimport torch\n@torch.jit.script\ndef func2(x, y):\n    return x + y.type_as(x)\nx = torch.tensor([0.1])\ny = torch.tensor([1])\nfunc2(x, y)\n\nOut[8]: tensor([1.1000])\n\nRelevant PR: #8058", "body": "This errors out:\r\n```\r\nimport torch\r\n@torch.jit.script\r\ndef func1(x, y):\r\n    return x + y.type_as(x)\r\nx = torch.tensor(0.1)\r\ny = torch.tensor(1)\r\nfunc1(x, y)\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-7-36d19baf43bf> in <module>()\r\n      5 x = torch.tensor(0.1)\r\n      6 y = torch.tensor(1)\r\n----> 7 func1(x, y)\r\n\r\nRuntimeError: torch/csrc/jit/fusion_compiler.cpp:450: operator(): Assertion `nDim <= uncompressedDim` failed.\r\n```\r\n\r\nThis works as expected:\r\n```\r\nimport torch\r\n@torch.jit.script\r\ndef func2(x, y):\r\n    return x + y.type_as(x)\r\nx = torch.tensor([0.1])\r\ny = torch.tensor([1])\r\nfunc2(x, y)\r\n\r\nOut[8]: tensor([1.1000])\r\n```\r\n\r\nRelevant PR: #8058"}
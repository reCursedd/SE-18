{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/346208373", "html_url": "https://github.com/pytorch/pytorch/pull/3817#issuecomment-346208373", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/3817", "id": 346208373, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjIwODM3Mw==", "user": {"login": "mjacar", "id": 7033208, "node_id": "MDQ6VXNlcjcwMzMyMDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7033208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjacar", "html_url": "https://github.com/mjacar", "followers_url": "https://api.github.com/users/mjacar/followers", "following_url": "https://api.github.com/users/mjacar/following{/other_user}", "gists_url": "https://api.github.com/users/mjacar/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjacar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjacar/subscriptions", "organizations_url": "https://api.github.com/users/mjacar/orgs", "repos_url": "https://api.github.com/users/mjacar/repos", "events_url": "https://api.github.com/users/mjacar/events{/privacy}", "received_events_url": "https://api.github.com/users/mjacar/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-22T00:49:10Z", "updated_at": "2017-11-22T00:49:10Z", "author_association": "NONE", "body_html": "<p>This PR breaks build for me.</p>\n<pre><code>Scanning dependencies of target THD\n[  4%] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelTCP.cpp.o\n[  8%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodEnv.cpp.o\n[ 16%] Building CXX object CMakeFiles/THD.dir/base/TensorDescriptor.cpp.o\n[ 16%] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018at::Tensor thd::DataChannelMPI::_newLikeFlat(std::vector&lt;at::Tensor&gt;&amp;) const\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:157:57: warning: narrowing conversion of \u2018((&amp; t)-&gt;at::Tensor::is_cuda() ? (&amp; t)-&gt;at::Tensor::get_device() : -1l)\u2019 from \u2018long int\u2019 to \u2018int\u2019 inside { } [-Wnarrowing]\n   AutoGPU gpu_guard { t.is_cuda() ? t.get_device() : -1 };\n                                                         ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:158:45: warning: narrowing conversion of \u2018(&amp; tensors)-&gt;std::vector&lt;_Tp, _Alloc&gt;::size&lt;at::Tensor, std::allocator&lt;at::Tensor&gt; &gt;()\u2019 from \u2018std::vector&lt;at::Tensor&gt;::size_type {aka long unsigned int}\u2019 to \u2018long int\u2019 inside { } [-Wnarrowing]\n   std::vector&lt;int64_t&gt; sizes { tensors.size() };  // sizes = [output.size()] + input.sizes()\n                                             ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:158:45: warning: narrowing conversion of \u2018(&amp; tensors)-&gt;std::vector&lt;_Tp, _Alloc&gt;::size&lt;at::Tensor, std::allocator&lt;at::Tensor&gt; &gt;()\u2019 from \u2018std::vector&lt;at::Tensor&gt;::size_type {aka long unsigned int}\u2019 to \u2018long int\u2019 inside { } [-Wnarrowing]\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:160:10: error: \u2018input\u2019 was not declared in this scope\n   return input.type().tensor(sizes);\n          ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::scatter(std::vector&lt;at::Tensor&gt;&amp;, at::Tensor&amp;, thd::rank_type, THDGroup)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\n   if (!output.contiguous())\n       ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note: candidate is:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note: operator!(bool) &lt;built-in&gt;\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::reduce(at::Tensor&amp;, THDReduceOp, thd::rank_type, THDGroup)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\n   if (!data.contiguous())\n       ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note: candidate is:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note: operator!(bool) &lt;built-in&gt;\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::broadcast(at::Tensor&amp;, thd::rank_type, THDGroup)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\n   if (!data.contiguous())\n       ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note: candidate is:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note: operator!(bool) &lt;built-in&gt;\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::send(thd::Scalar&amp;, thd::rank_type)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:309:56: error: request for member \u2018scalarType\u2019 in \u2018(&amp; data)-&gt;thd::Scalar::type()\u2019, which is of non-class type \u2018thd::RPCType\u2019\n   MPI_Send(data.data(), 1, mpi_datatype.at(data.type().scalarType()),\n                                                        ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::receive(thd::Scalar&amp;, thd::rank_type)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:324:17: error: \u2018struct thd::Scalar\u2019 has no member named \u2018data_ptr\u2019\n   MPI_Recv(data.data_ptr(), 1, mpi_datatype.at(data.type().scalarType()),\n                 ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:324:60: error: request for member \u2018scalarType\u2019 in \u2018(&amp; data)-&gt;thd::Scalar::type()\u2019, which is of non-class type \u2018thd::RPCType\u2019\n   MPI_Recv(data.data_ptr(), 1, mpi_datatype.at(data.type().scalarType()),\n                                                            ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::receive(at::Tensor&amp;, thd::rank_type)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:346:10: error: \u2018status\u2019 was not declared in this scope\n   return status.MPI_SOURCE;\n          ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:346:17: error: return-statement with a value, in function returning 'void' [-fpermissive]\n   return status.MPI_SOURCE;\n                 ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual thd::DataChannelMPI::RequestMPI* thd::DataChannelMPI::ireceive(at::Tensor&amp;, thd::rank_type)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:384:10: error: cannot convert \u2018std::unique_ptr&lt;thd::DataChannelMPI::RequestMPI&gt;\u2019 to \u2018thd::DataChannelMPI::RequestMPI*\u2019 in return\n   return request;\n          ^\n[ 20%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodUtils.cpp.o\n[ 24%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodFile.cpp.o\nCMakeFiles/THD.dir/build.make:62: recipe for target 'CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o' failed\nmake[2]: *** [CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/THD.dir/all' failed\nmake[1]: *** [CMakeFiles/THD.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n<p>Reverting this PR fixes the problem. I'll file an issue.</p>", "body_text": "This PR breaks build for me.\nScanning dependencies of target THD\n[  4%] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelTCP.cpp.o\n[  8%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodEnv.cpp.o\n[ 16%] Building CXX object CMakeFiles/THD.dir/base/TensorDescriptor.cpp.o\n[ 16%] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018at::Tensor thd::DataChannelMPI::_newLikeFlat(std::vector<at::Tensor>&) const\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:157:57: warning: narrowing conversion of \u2018((& t)->at::Tensor::is_cuda() ? (& t)->at::Tensor::get_device() : -1l)\u2019 from \u2018long int\u2019 to \u2018int\u2019 inside { } [-Wnarrowing]\n   AutoGPU gpu_guard { t.is_cuda() ? t.get_device() : -1 };\n                                                         ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:158:45: warning: narrowing conversion of \u2018(& tensors)->std::vector<_Tp, _Alloc>::size<at::Tensor, std::allocator<at::Tensor> >()\u2019 from \u2018std::vector<at::Tensor>::size_type {aka long unsigned int}\u2019 to \u2018long int\u2019 inside { } [-Wnarrowing]\n   std::vector<int64_t> sizes { tensors.size() };  // sizes = [output.size()] + input.sizes()\n                                             ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:158:45: warning: narrowing conversion of \u2018(& tensors)->std::vector<_Tp, _Alloc>::size<at::Tensor, std::allocator<at::Tensor> >()\u2019 from \u2018std::vector<at::Tensor>::size_type {aka long unsigned int}\u2019 to \u2018long int\u2019 inside { } [-Wnarrowing]\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:160:10: error: \u2018input\u2019 was not declared in this scope\n   return input.type().tensor(sizes);\n          ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::scatter(std::vector<at::Tensor>&, at::Tensor&, thd::rank_type, THDGroup)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\n   if (!output.contiguous())\n       ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note: candidate is:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note: operator!(bool) <built-in>\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::reduce(at::Tensor&, THDReduceOp, thd::rank_type, THDGroup)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\n   if (!data.contiguous())\n       ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note: candidate is:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note: operator!(bool) <built-in>\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::broadcast(at::Tensor&, thd::rank_type, THDGroup)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\n   if (!data.contiguous())\n       ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note: candidate is:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note: operator!(bool) <built-in>\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::send(thd::Scalar&, thd::rank_type)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:309:56: error: request for member \u2018scalarType\u2019 in \u2018(& data)->thd::Scalar::type()\u2019, which is of non-class type \u2018thd::RPCType\u2019\n   MPI_Send(data.data(), 1, mpi_datatype.at(data.type().scalarType()),\n                                                        ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::receive(thd::Scalar&, thd::rank_type)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:324:17: error: \u2018struct thd::Scalar\u2019 has no member named \u2018data_ptr\u2019\n   MPI_Recv(data.data_ptr(), 1, mpi_datatype.at(data.type().scalarType()),\n                 ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:324:60: error: request for member \u2018scalarType\u2019 in \u2018(& data)->thd::Scalar::type()\u2019, which is of non-class type \u2018thd::RPCType\u2019\n   MPI_Recv(data.data_ptr(), 1, mpi_datatype.at(data.type().scalarType()),\n                                                            ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::receive(at::Tensor&, thd::rank_type)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:346:10: error: \u2018status\u2019 was not declared in this scope\n   return status.MPI_SOURCE;\n          ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:346:17: error: return-statement with a value, in function returning 'void' [-fpermissive]\n   return status.MPI_SOURCE;\n                 ^\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual thd::DataChannelMPI::RequestMPI* thd::DataChannelMPI::ireceive(at::Tensor&, thd::rank_type)\u2019:\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:384:10: error: cannot convert \u2018std::unique_ptr<thd::DataChannelMPI::RequestMPI>\u2019 to \u2018thd::DataChannelMPI::RequestMPI*\u2019 in return\n   return request;\n          ^\n[ 20%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodUtils.cpp.o\n[ 24%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodFile.cpp.o\nCMakeFiles/THD.dir/build.make:62: recipe for target 'CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o' failed\nmake[2]: *** [CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/THD.dir/all' failed\nmake[1]: *** [CMakeFiles/THD.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\n\nReverting this PR fixes the problem. I'll file an issue.", "body": "This PR breaks build for me.\r\n\r\n```\r\nScanning dependencies of target THD\r\n[  4%] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelTCP.cpp.o\r\n[  8%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodEnv.cpp.o\r\n[ 16%] Building CXX object CMakeFiles/THD.dir/base/TensorDescriptor.cpp.o\r\n[ 16%] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018at::Tensor thd::DataChannelMPI::_newLikeFlat(std::vector<at::Tensor>&) const\u2019:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:157:57: warning: narrowing conversion of \u2018((& t)->at::Tensor::is_cuda() ? (& t)->at::Tensor::get_device() : -1l)\u2019 from \u2018long int\u2019 to \u2018int\u2019 inside { } [-Wnarrowing]\r\n   AutoGPU gpu_guard { t.is_cuda() ? t.get_device() : -1 };\r\n                                                         ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:158:45: warning: narrowing conversion of \u2018(& tensors)->std::vector<_Tp, _Alloc>::size<at::Tensor, std::allocator<at::Tensor> >()\u2019 from \u2018std::vector<at::Tensor>::size_type {aka long unsigned int}\u2019 to \u2018long int\u2019 inside { } [-Wnarrowing]\r\n   std::vector<int64_t> sizes { tensors.size() };  // sizes = [output.size()] + input.sizes()\r\n                                             ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:158:45: warning: narrowing conversion of \u2018(& tensors)->std::vector<_Tp, _Alloc>::size<at::Tensor, std::allocator<at::Tensor> >()\u2019 from \u2018std::vector<at::Tensor>::size_type {aka long unsigned int}\u2019 to \u2018long int\u2019 inside { } [-Wnarrowing]\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:160:10: error: \u2018input\u2019 was not declared in this scope\r\n   return input.type().tensor(sizes);\r\n          ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::scatter(std::vector<at::Tensor>&, at::Tensor&, thd::rank_type, THDGroup)\u2019:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\r\n   if (!output.contiguous())\r\n       ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note: candidate is:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note: operator!(bool) <built-in>\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:233:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::reduce(at::Tensor&, THDReduceOp, thd::rank_type, THDGroup)\u2019:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\r\n   if (!data.contiguous())\r\n       ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note: candidate is:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note: operator!(bool) <built-in>\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:281:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::broadcast(at::Tensor&, thd::rank_type, THDGroup)\u2019:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: error: no match for \u2018operator!\u2019 (operand type is \u2018at::Tensor\u2019)\r\n   if (!data.contiguous())\r\n       ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note: candidate is:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note: operator!(bool) <built-in>\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:299:7: note:   no known conversion for argument 1 from \u2018at::Tensor\u2019 to \u2018bool\u2019\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::send(thd::Scalar&, thd::rank_type)\u2019:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:309:56: error: request for member \u2018scalarType\u2019 in \u2018(& data)->thd::Scalar::type()\u2019, which is of non-class type \u2018thd::RPCType\u2019\r\n   MPI_Send(data.data(), 1, mpi_datatype.at(data.type().scalarType()),\r\n                                                        ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::receive(thd::Scalar&, thd::rank_type)\u2019:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:324:17: error: \u2018struct thd::Scalar\u2019 has no member named \u2018data_ptr\u2019\r\n   MPI_Recv(data.data_ptr(), 1, mpi_datatype.at(data.type().scalarType()),\r\n                 ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:324:60: error: request for member \u2018scalarType\u2019 in \u2018(& data)->thd::Scalar::type()\u2019, which is of non-class type \u2018thd::RPCType\u2019\r\n   MPI_Recv(data.data_ptr(), 1, mpi_datatype.at(data.type().scalarType()),\r\n                                                            ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::receive(at::Tensor&, thd::rank_type)\u2019:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:346:10: error: \u2018status\u2019 was not declared in this scope\r\n   return status.MPI_SOURCE;\r\n          ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:346:17: error: return-statement with a value, in function returning 'void' [-fpermissive]\r\n   return status.MPI_SOURCE;\r\n                 ^\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual thd::DataChannelMPI::RequestMPI* thd::DataChannelMPI::ireceive(at::Tensor&, thd::rank_type)\u2019:\r\n/home/michael/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:384:10: error: cannot convert \u2018std::unique_ptr<thd::DataChannelMPI::RequestMPI>\u2019 to \u2018thd::DataChannelMPI::RequestMPI*\u2019 in return\r\n   return request;\r\n          ^\r\n[ 20%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodUtils.cpp.o\r\n[ 24%] Building CXX object CMakeFiles/THD.dir/base/init_methods/InitMethodFile.cpp.o\r\nCMakeFiles/THD.dir/build.make:62: recipe for target 'CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o' failed\r\nmake[2]: *** [CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o] Error 1\r\nmake[2]: *** Waiting for unfinished jobs....\r\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/THD.dir/all' failed\r\nmake[1]: *** [CMakeFiles/THD.dir/all] Error 2\r\nMakefile:127: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n```\r\n\r\nReverting this PR fixes the problem. I'll file an issue."}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/224300385", "pull_request_review_id": 163632515, "id": 224300385, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNDMwMDM4NQ==", "diff_hunk": "@@ -520,7 +526,14 @@ void TensorDeserializer::Deserialize(const TensorProto& proto, Tensor* tensor) {\n                 (i + chunkBegin) * temp_blob.meta().itemsize(),\n             1);\n       }\n-    }\n+    } break;\n+    case TensorProto_DataType_SPECIAL: {\n+      CAFFE_THROW(\"SPECIAL Tensor is not handled yet.\");\n+    } break;\n+    case TensorProto_DataType_NO_CONTENT: {\n+      CAFFE_THROW(\"NO_CONTENT Tensor should not be deserialized.\");\n+    } break;\n+      // Note: we intentially do not provide \"default:\" so if any new data types", "path": "caffe2/core/blob_serialization.cc", "position": 6, "original_position": 25, "commit_id": "af60ce1589b2921a069f7c301ab6bec2886fba79", "original_commit_id": "68dd65e5dfe6fee935ecbf8564478f422446414f", "user": {"login": "kennyhorror", "id": 1067890, "node_id": "MDQ6VXNlcjEwNjc4OTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1067890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennyhorror", "html_url": "https://github.com/kennyhorror", "followers_url": "https://api.github.com/users/kennyhorror/followers", "following_url": "https://api.github.com/users/kennyhorror/following{/other_user}", "gists_url": "https://api.github.com/users/kennyhorror/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennyhorror/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennyhorror/subscriptions", "organizations_url": "https://api.github.com/users/kennyhorror/orgs", "repos_url": "https://api.github.com/users/kennyhorror/repos", "events_url": "https://api.github.com/users/kennyhorror/events{/privacy}", "received_events_url": "https://api.github.com/users/kennyhorror/received_events", "type": "User", "site_admin": false}, "body": "Just in case my comment is primarily is about loading models produced by new version of the framework in the old binary.\r\n\r\n-Wswitch will capture compilation errors when new type is added and not covered by switch, but even in this case models that have some new type like TensorProto_DataType_NO_CONTENT will be loaded by existing binaries with Caffe2 that have no idea how to handle this option and will just completely ignore it in switch, which will result in some unexpected behavior when you try to evaluate this model after loading.", "created_at": "2018-10-11T02:52:39Z", "updated_at": "2018-11-23T15:52:52Z", "html_url": "https://github.com/pytorch/pytorch/pull/12384#discussion_r224300385", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/12384", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/224300385"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/12384#discussion_r224300385"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/12384"}}, "body_html": "<p>Just in case my comment is primarily is about loading models produced by new version of the framework in the old binary.</p>\n<p>-Wswitch will capture compilation errors when new type is added and not covered by switch, but even in this case models that have some new type like TensorProto_DataType_NO_CONTENT will be loaded by existing binaries with Caffe2 that have no idea how to handle this option and will just completely ignore it in switch, which will result in some unexpected behavior when you try to evaluate this model after loading.</p>", "body_text": "Just in case my comment is primarily is about loading models produced by new version of the framework in the old binary.\n-Wswitch will capture compilation errors when new type is added and not covered by switch, but even in this case models that have some new type like TensorProto_DataType_NO_CONTENT will be loaded by existing binaries with Caffe2 that have no idea how to handle this option and will just completely ignore it in switch, which will result in some unexpected behavior when you try to evaluate this model after loading.", "in_reply_to_id": 223977384}
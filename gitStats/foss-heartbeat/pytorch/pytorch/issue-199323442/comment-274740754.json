{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/274740754", "html_url": "https://github.com/pytorch/pytorch/issues/419#issuecomment-274740754", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/419", "id": 274740754, "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDc0MDc1NA==", "user": {"login": "andreaskoepf", "id": 9976399, "node_id": "MDQ6VXNlcjk5NzYzOTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/9976399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreaskoepf", "html_url": "https://github.com/andreaskoepf", "followers_url": "https://api.github.com/users/andreaskoepf/followers", "following_url": "https://api.github.com/users/andreaskoepf/following{/other_user}", "gists_url": "https://api.github.com/users/andreaskoepf/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreaskoepf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreaskoepf/subscriptions", "organizations_url": "https://api.github.com/users/andreaskoepf/orgs", "repos_url": "https://api.github.com/users/andreaskoepf/repos", "events_url": "https://api.github.com/users/andreaskoepf/events{/privacy}", "received_events_url": "https://api.github.com/users/andreaskoepf/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-24T08:35:16Z", "updated_at": "2017-01-24T08:35:16Z", "author_association": "CONTRIBUTOR", "body_html": "<p>For CPU there seems to be some functionality that is similar to im2col with <code>unfolded_copy</code> and <code>unfolded_acc</code>, e.g. see <a href=\"https://github.com/pytorch/pytorch/blob/0f65c9267d5ec55584b0ec65acb5374c95af9c16/torch/lib/THNN/generic/unfold.c\">THNN/generic/unfold.c</a>.</p>\n<p>Since GPU version is missing I guess unfolded_copy and unfolded_acc are currently not integrated into the autograd system but they are already 'inofficially' callable from python, e.g.</p>\n<pre><code>torch._thnn.type2backend[torch.FloatTensor].unfolded_copy(...)\ntorch._thnn.type2backend[torch.FloatTensor].unfolded_acc(...)\n</code></pre>\n<p>Internally these functions are used from CPU C code in the <a href=\"https://github.com/pytorch/pytorch/blob/0f65c9267d5ec55584b0ec65acb5374c95af9c16/torch/lib/THNN/generic/SpatialConvolutionMM.c#L56-L97\">SpatialConvolutionMM_updateOutput_frame</a> function. Currently they operate only on a single element of a batch.</p>\n<p>+1 for im2col and col2im support.</p>", "body_text": "For CPU there seems to be some functionality that is similar to im2col with unfolded_copy and unfolded_acc, e.g. see THNN/generic/unfold.c.\nSince GPU version is missing I guess unfolded_copy and unfolded_acc are currently not integrated into the autograd system but they are already 'inofficially' callable from python, e.g.\ntorch._thnn.type2backend[torch.FloatTensor].unfolded_copy(...)\ntorch._thnn.type2backend[torch.FloatTensor].unfolded_acc(...)\n\nInternally these functions are used from CPU C code in the SpatialConvolutionMM_updateOutput_frame function. Currently they operate only on a single element of a batch.\n+1 for im2col and col2im support.", "body": "For CPU there seems to be some functionality that is similar to im2col with `unfolded_copy` and `unfolded_acc`, e.g. see [THNN/generic/unfold.c](https://github.com/pytorch/pytorch/blob/0f65c9267d5ec55584b0ec65acb5374c95af9c16/torch/lib/THNN/generic/unfold.c).\r\n\r\nSince GPU version is missing I guess unfolded_copy and unfolded_acc are currently not integrated into the autograd system but they are already 'inofficially' callable from python, e.g. \r\n\r\n```\r\ntorch._thnn.type2backend[torch.FloatTensor].unfolded_copy(...)\r\ntorch._thnn.type2backend[torch.FloatTensor].unfolded_acc(...)\r\n```\r\n\r\nInternally these functions are used from CPU C code in the [SpatialConvolutionMM_updateOutput_frame](\r\nhttps://github.com/pytorch/pytorch/blob/0f65c9267d5ec55584b0ec65acb5374c95af9c16/torch/lib/THNN/generic/SpatialConvolutionMM.c#L56-L97) function. Currently they operate only on a single element of a batch.\r\n\r\n+1 for im2col and col2im support."}
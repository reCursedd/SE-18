{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6548", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6548/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6548/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6548/events", "html_url": "https://github.com/pytorch/pytorch/issues/6548", "id": 313694348, "node_id": "MDU6SXNzdWUzMTM2OTQzNDg=", "number": 6548, "title": "Exception when DataLoader's num_workers parameter is specified", "user": {"login": "nikoliazekter", "id": 6832533, "node_id": "MDQ6VXNlcjY4MzI1MzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6832533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikoliazekter", "html_url": "https://github.com/nikoliazekter", "followers_url": "https://api.github.com/users/nikoliazekter/followers", "following_url": "https://api.github.com/users/nikoliazekter/following{/other_user}", "gists_url": "https://api.github.com/users/nikoliazekter/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikoliazekter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikoliazekter/subscriptions", "organizations_url": "https://api.github.com/users/nikoliazekter/orgs", "repos_url": "https://api.github.com/users/nikoliazekter/repos", "events_url": "https://api.github.com/users/nikoliazekter/events{/privacy}", "received_events_url": "https://api.github.com/users/nikoliazekter/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-04-12T11:54:17Z", "updated_at": "2018-08-26T08:05:03Z", "closed_at": "2018-04-13T13:19:30Z", "author_association": "NONE", "body_html": "<p>Code to reproduce is taken from tutorial:</p>\n<div class=\"highlight highlight-source-python\"><pre>trainset <span class=\"pl-k\">=</span> torchvision.datasets.CIFAR10(<span class=\"pl-v\">root</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>./data<span class=\"pl-pds\">'</span></span>, <span class=\"pl-v\">train</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>,\n                                        <span class=\"pl-v\">download</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-v\">transform</span><span class=\"pl-k\">=</span>transform)\ntrainloader <span class=\"pl-k\">=</span> torch.utils.data.DataLoader(trainset, <span class=\"pl-v\">batch_size</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">4</span>,\n                                          <span class=\"pl-v\">shuffle</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-v\">num_workers</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">2</span>)\ndataiter <span class=\"pl-k\">=</span> <span class=\"pl-c1\">iter</span>(trainloader)\nimages, labels <span class=\"pl-k\">=</span> dataiter.next()</pre></div>\n<p>This produces</p>\n<pre><code>Exception ignored in: &lt;bound method _DataLoaderIter.__del__ of &lt;torch.utils.data.dataloader._DataLoaderIter object at 0x7f34ecb0e128&gt;&gt;\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py\", line 344, in __del__\n  File \"/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py\", line 325, in _shutdown_workers\n  File \"/usr/lib/python3.5/multiprocessing/queues.py\", line 345, in get\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 954, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 887, in _find_spec\nTypeError: 'NoneType' object is not iterable\n</code></pre>\n<p>My version of PyTorch is compiled from recent sources. Might this be an MPI problem (I don't have it installed)? There is no exception if I set <code>num_workers=0</code> or omit it completely.</p>", "body_text": "Code to reproduce is taken from tutorial:\ntrainset = torchvision.datasets.CIFAR10(root='./data', train=True,\n                                        download=True, transform=transform)\ntrainloader = torch.utils.data.DataLoader(trainset, batch_size=4,\n                                          shuffle=True, num_workers=2)\ndataiter = iter(trainloader)\nimages, labels = dataiter.next()\nThis produces\nException ignored in: <bound method _DataLoaderIter.__del__ of <torch.utils.data.dataloader._DataLoaderIter object at 0x7f34ecb0e128>>\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py\", line 344, in __del__\n  File \"/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py\", line 325, in _shutdown_workers\n  File \"/usr/lib/python3.5/multiprocessing/queues.py\", line 345, in get\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 954, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 887, in _find_spec\nTypeError: 'NoneType' object is not iterable\n\nMy version of PyTorch is compiled from recent sources. Might this be an MPI problem (I don't have it installed)? There is no exception if I set num_workers=0 or omit it completely.", "body": "Code to reproduce is taken from tutorial:\r\n```python\r\ntrainset = torchvision.datasets.CIFAR10(root='./data', train=True,\r\n                                        download=True, transform=transform)\r\ntrainloader = torch.utils.data.DataLoader(trainset, batch_size=4,\r\n                                          shuffle=True, num_workers=2)\r\ndataiter = iter(trainloader)\r\nimages, labels = dataiter.next()\r\n```\r\nThis produces\r\n```\r\nException ignored in: <bound method _DataLoaderIter.__del__ of <torch.utils.data.dataloader._DataLoaderIter object at 0x7f34ecb0e128>>\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py\", line 344, in __del__\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/utils/data/dataloader.py\", line 325, in _shutdown_workers\r\n  File \"/usr/lib/python3.5/multiprocessing/queues.py\", line 345, in get\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 954, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 887, in _find_spec\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\n\r\nMy version of PyTorch is compiled from recent sources. Might this be an MPI problem (I don't have it installed)? There is no exception if I set `num_workers=0` or omit it completely."}
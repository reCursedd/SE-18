{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12435", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12435/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12435/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12435/events", "html_url": "https://github.com/pytorch/pytorch/issues/12435", "id": 367559759, "node_id": "MDU6SXNzdWUzNjc1NTk3NTk=", "number": 12435, "title": "`pstrf` on positive semi-definite matrices", "user": {"login": "fKunstner", "id": 8789455, "node_id": "MDQ6VXNlcjg3ODk0NTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/8789455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fKunstner", "html_url": "https://github.com/fKunstner", "followers_url": "https://api.github.com/users/fKunstner/followers", "following_url": "https://api.github.com/users/fKunstner/following{/other_user}", "gists_url": "https://api.github.com/users/fKunstner/gists{/gist_id}", "starred_url": "https://api.github.com/users/fKunstner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fKunstner/subscriptions", "organizations_url": "https://api.github.com/users/fKunstner/orgs", "repos_url": "https://api.github.com/users/fKunstner/repos", "events_url": "https://api.github.com/users/fKunstner/events{/privacy}", "received_events_url": "https://api.github.com/users/fKunstner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-10-07T14:28:37Z", "updated_at": "2018-10-08T17:43:40Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p><a href=\"https://pytorch.org/docs/stable/torch.html#torch.pstrf\" rel=\"nofollow\"><code>pstrf</code></a> does not work on Positive Semi-Definite matrices while the documentation says it should.</p>\n<p>The issue might be a misunderstanding on my part of the documentation.<br>\nAny correction to this misunderstanding is welcome :)</p>\n<p>I am assuming that for <code>M</code> to be a Positive SemiDefinite matrix, it needs to hold that for any real vector <code>x</code>, <code>x.t() @ M @ x &gt;= 0</code>,<br>\nwhereas to be Positive Definite, it needs to hold that <code>x.t() @ M @ x &gt; 0</code>.</p>\n<h2>To Reproduce</h2>\n<p>Using Pytorch 0.4.1, on CPU</p>\n<pre><code>import torch \nZero = torch.tensor([0.0]).view(1,1)\nprint(torch.pstrf(Zero))\n</code></pre>\n<p>throws</p>\n<pre><code>RuntimeError: \nLapack Error pstrf : \nmatrix is rank deficient or not positive semidefinite at \nc:\\programdata\\miniconda3\\conda-bld\\pytorch_1532505617613\\work\\aten\\src\\th\\generic/THTensorLapack.cpp:744\n</code></pre>\n<h2>Expected behavior</h2>\n<p><a href=\"https://pytorch.org/docs/stable/torch.html#torch.pstrf\" rel=\"nofollow\"><code>pstrf</code></a> is supposed to</p>\n<blockquote>\n<p>Computes the pivoted Cholesky decomposition of a positive semidefinite matrix <code>a</code>. returns matrices <code>u</code> and <code>piv</code>.</p>\n</blockquote>\n<p>In the example provided above, I would expected <code>u</code> should be <code>[[0]]</code> and <code>piv</code> should be <code>[0]</code></p>\n<h2>Additional Details</h2>\n<p>I don't understand the error message,</p>\n<pre><code>matrix is rank deficient or not positive semidefinite\n</code></pre>\n<p>From my understanding, Positive SemiDefinite matrices that are not Positive Definite are by definition rank deficient.</p>", "body_text": "\ud83d\udc1b Bug\npstrf does not work on Positive Semi-Definite matrices while the documentation says it should.\nThe issue might be a misunderstanding on my part of the documentation.\nAny correction to this misunderstanding is welcome :)\nI am assuming that for M to be a Positive SemiDefinite matrix, it needs to hold that for any real vector x, x.t() @ M @ x >= 0,\nwhereas to be Positive Definite, it needs to hold that x.t() @ M @ x > 0.\nTo Reproduce\nUsing Pytorch 0.4.1, on CPU\nimport torch \nZero = torch.tensor([0.0]).view(1,1)\nprint(torch.pstrf(Zero))\n\nthrows\nRuntimeError: \nLapack Error pstrf : \nmatrix is rank deficient or not positive semidefinite at \nc:\\programdata\\miniconda3\\conda-bld\\pytorch_1532505617613\\work\\aten\\src\\th\\generic/THTensorLapack.cpp:744\n\nExpected behavior\npstrf is supposed to\n\nComputes the pivoted Cholesky decomposition of a positive semidefinite matrix a. returns matrices u and piv.\n\nIn the example provided above, I would expected u should be [[0]] and piv should be [0]\nAdditional Details\nI don't understand the error message,\nmatrix is rank deficient or not positive semidefinite\n\nFrom my understanding, Positive SemiDefinite matrices that are not Positive Definite are by definition rank deficient.", "body": "## \ud83d\udc1b Bug\r\n\r\n[`pstrf`](https://pytorch.org/docs/stable/torch.html#torch.pstrf) does not work on Positive Semi-Definite matrices while the documentation says it should.\r\n\r\nThe issue might be a misunderstanding on my part of the documentation.\r\nAny correction to this misunderstanding is welcome :)\r\n\r\nI am assuming that for `M` to be a Positive SemiDefinite matrix, it needs to hold that for any real vector `x`, `x.t() @ M @ x >= 0`,\r\nwhereas to be Positive Definite, it needs to hold that `x.t() @ M @ x > 0`.\r\n\r\n## To Reproduce\r\n\r\nUsing Pytorch 0.4.1, on CPU\r\n```\r\nimport torch \r\nZero = torch.tensor([0.0]).view(1,1)\r\nprint(torch.pstrf(Zero))\r\n```\r\nthrows \r\n```\r\nRuntimeError: \r\nLapack Error pstrf : \r\nmatrix is rank deficient or not positive semidefinite at \r\nc:\\programdata\\miniconda3\\conda-bld\\pytorch_1532505617613\\work\\aten\\src\\th\\generic/THTensorLapack.cpp:744\r\n```\r\n\r\n## Expected behavior\r\n\r\n[`pstrf`](https://pytorch.org/docs/stable/torch.html#torch.pstrf) is supposed to \r\n> Computes the pivoted Cholesky decomposition of a positive semidefinite matrix `a`. returns matrices `u` and `piv`.\r\n\r\nIn the example provided above, I would expected `u` should be `[[0]]` and `piv` should be `[0]`\r\n\r\n## Additional Details\r\n\r\nI don't understand the error message,\r\n```\r\nmatrix is rank deficient or not positive semidefinite\r\n```\r\nFrom my understanding, Positive SemiDefinite matrices that are not Positive Definite are by definition rank deficient."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/326685323", "html_url": "https://github.com/pytorch/pytorch/issues/2596#issuecomment-326685323", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2596", "id": 326685323, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjY4NTMyMw==", "user": {"login": "kwlzn", "id": 1883523, "node_id": "MDQ6VXNlcjE4ODM1MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1883523?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kwlzn", "html_url": "https://github.com/kwlzn", "followers_url": "https://api.github.com/users/kwlzn/followers", "following_url": "https://api.github.com/users/kwlzn/following{/other_user}", "gists_url": "https://api.github.com/users/kwlzn/gists{/gist_id}", "starred_url": "https://api.github.com/users/kwlzn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kwlzn/subscriptions", "organizations_url": "https://api.github.com/users/kwlzn/orgs", "repos_url": "https://api.github.com/users/kwlzn/repos", "events_url": "https://api.github.com/users/kwlzn/events{/privacy}", "received_events_url": "https://api.github.com/users/kwlzn/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-01T21:15:10Z", "updated_at": "2017-09-01T21:15:10Z", "author_association": "NONE", "body_html": "<p>here's a minimal repro using the manylinux docker image + the <code>wheel</code> cli tool:</p>\n<pre><code>[omerta ~]$ docker run --rm -i -t quay.io/pypa/manylinux1_x86_64 /bin/sh -i\nsh-3.2# wget -q http://download.pytorch.org/whl/cu80/torch-0.2.0.post3-cp27-cp27mu-manylinux1_x86_64.whl\nsh-3.2# /opt/python/cp27-cp27mu/bin/wheel install torch-0.2.0.post3-cp27-cp27mu-manylinux1_x86_64.whl --force\nTraceback (most recent call last):\n  File \"/opt/python/cp27-cp27mu/bin/wheel\", line 11, in &lt;module&gt;\n    sys.exit(main())\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 356, in main\n    args.func(args)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 299, in install_f\n    args.wheel_dirs, args.force, args.list_files)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 221, in install\n    wf.install(force=force)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/install.py\", line 351, in install\n    shutil.copyfileobj(source, destination)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/shutil.py\", line 49, in copyfileobj\n    buf = fsrc.read(length)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/zipfile.py\", line 632, in read\n    data = self.read1(n - len(buf))\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/zipfile.py\", line 692, in read1\n    self._update_crc(data, eof=eof)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/install.py\", line 463, in _update_crc\n    raise BadWheelFile(\"Bad hash for file %r\" % ef.name)\nwheel.install.BadWheelFile: Bad hash for file 'torch/lib/libTHC.so.1'\n</code></pre>\n<p>it would seem someone/something is modifying the wheel after construction without updating it's hash records.</p>", "body_text": "here's a minimal repro using the manylinux docker image + the wheel cli tool:\n[omerta ~]$ docker run --rm -i -t quay.io/pypa/manylinux1_x86_64 /bin/sh -i\nsh-3.2# wget -q http://download.pytorch.org/whl/cu80/torch-0.2.0.post3-cp27-cp27mu-manylinux1_x86_64.whl\nsh-3.2# /opt/python/cp27-cp27mu/bin/wheel install torch-0.2.0.post3-cp27-cp27mu-manylinux1_x86_64.whl --force\nTraceback (most recent call last):\n  File \"/opt/python/cp27-cp27mu/bin/wheel\", line 11, in <module>\n    sys.exit(main())\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 356, in main\n    args.func(args)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 299, in install_f\n    args.wheel_dirs, args.force, args.list_files)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 221, in install\n    wf.install(force=force)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/install.py\", line 351, in install\n    shutil.copyfileobj(source, destination)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/shutil.py\", line 49, in copyfileobj\n    buf = fsrc.read(length)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/zipfile.py\", line 632, in read\n    data = self.read1(n - len(buf))\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/zipfile.py\", line 692, in read1\n    self._update_crc(data, eof=eof)\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/install.py\", line 463, in _update_crc\n    raise BadWheelFile(\"Bad hash for file %r\" % ef.name)\nwheel.install.BadWheelFile: Bad hash for file 'torch/lib/libTHC.so.1'\n\nit would seem someone/something is modifying the wheel after construction without updating it's hash records.", "body": "here's a minimal repro using the manylinux docker image + the `wheel` cli tool:\r\n\r\n```\r\n[omerta ~]$ docker run --rm -i -t quay.io/pypa/manylinux1_x86_64 /bin/sh -i\r\nsh-3.2# wget -q http://download.pytorch.org/whl/cu80/torch-0.2.0.post3-cp27-cp27mu-manylinux1_x86_64.whl\r\nsh-3.2# /opt/python/cp27-cp27mu/bin/wheel install torch-0.2.0.post3-cp27-cp27mu-manylinux1_x86_64.whl --force\r\nTraceback (most recent call last):\r\n  File \"/opt/python/cp27-cp27mu/bin/wheel\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 356, in main\r\n    args.func(args)\r\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 299, in install_f\r\n    args.wheel_dirs, args.force, args.list_files)\r\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/tool/__init__.py\", line 221, in install\r\n    wf.install(force=force)\r\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/install.py\", line 351, in install\r\n    shutil.copyfileobj(source, destination)\r\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/shutil.py\", line 49, in copyfileobj\r\n    buf = fsrc.read(length)\r\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/zipfile.py\", line 632, in read\r\n    data = self.read1(n - len(buf))\r\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/zipfile.py\", line 692, in read1\r\n    self._update_crc(data, eof=eof)\r\n  File \"/opt/_internal/cpython-2.7.13-ucs4/lib/python2.7/site-packages/wheel/install.py\", line 463, in _update_crc\r\n    raise BadWheelFile(\"Bad hash for file %r\" % ef.name)\r\nwheel.install.BadWheelFile: Bad hash for file 'torch/lib/libTHC.so.1'\r\n```\r\n\r\nit would seem someone/something is modifying the wheel after construction without updating it's hash records."}
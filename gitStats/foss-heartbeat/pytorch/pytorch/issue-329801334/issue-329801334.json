{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8194", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8194/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8194/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8194/events", "html_url": "https://github.com/pytorch/pytorch/issues/8194", "id": 329801334, "node_id": "MDU6SXNzdWUzMjk4MDEzMzQ=", "number": 8194, "title": "[caffe2]import 'caffe2.python.caffe2_pybind11_state' error", "user": {"login": "wuxindegui", "id": 38311212, "node_id": "MDQ6VXNlcjM4MzExMjEy", "avatar_url": "https://avatars3.githubusercontent.com/u/38311212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wuxindegui", "html_url": "https://github.com/wuxindegui", "followers_url": "https://api.github.com/users/wuxindegui/followers", "following_url": "https://api.github.com/users/wuxindegui/following{/other_user}", "gists_url": "https://api.github.com/users/wuxindegui/gists{/gist_id}", "starred_url": "https://api.github.com/users/wuxindegui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wuxindegui/subscriptions", "organizations_url": "https://api.github.com/users/wuxindegui/orgs", "repos_url": "https://api.github.com/users/wuxindegui/repos", "events_url": "https://api.github.com/users/wuxindegui/events{/privacy}", "received_events_url": "https://api.github.com/users/wuxindegui/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": {"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-06-06T10:04:33Z", "updated_at": "2018-06-14T17:15:13Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>when i transform onnx to caffe2, i meet this problem:</p>\n<p>WARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.<br>\nWARNING:root:Debug message: /root/anaconda3/lib/python3.6/site-packages/caffe2-0.8.2-py3.6-linux-x86_64.egg/caffe2/python/caffe2_pybind11_state_gpu.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _ZN6google4base21CheckOpMessageBuilder9NewStringB5cxx11Ev<br>\nCRITICAL:root:Cannot load caffe2.python. Error: /root/anaconda3/lib/python3.6/site-packages/caffe2-0.8.2-py3.6-linux-x86_64.egg/caffe2/python/caffe2_pybind11_state.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _ZN6google4base21CheckOpMessageBuilder9NewStringB5cxx11Ev</p>\n<h2>Code example</h2>\n<p>import onnx<br>\nimport onnx_caffe2.backend  #caused by this line,in backed.py ,'from caffe2.python import core'<br>\nimport numpy as np</p>\n<p>model = onnx.load(\"/home/deep/FD_onnx/super_resolution.onnx\")<br>\nprepared_backend = onnx_caffe2.backend.prepare(model)<br>\nW = {model.graph.input[0].name: x.data.numpy()}<br>\nc2_out = prepared_backend.run(W)[0]<br>\nnp.testing.assert_almost_equal(torch_out.data.cpu().numpy(), c2_out, decimal=3)</p>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: caffe2</li>\n<li>How you installed PyTorch (conda, pip, source):conda</li>\n<li>Build command you used (if compiling from source):</li>\n<li>OS:linux</li>\n<li>Torch version:0.5</li>\n<li>Python version:3.6</li>\n<li>CUDA/cuDNN version:9.0/7.1</li>\n<li>GPU models and configuration:</li>\n<li>GCC version (if compiling from source):5.4</li>\n<li>CMake version:3.9.4</li>\n<li>Versions of any other relevant libraries:</li>\n</ul>", "body_text": "Issue description\nwhen i transform onnx to caffe2, i meet this problem:\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nWARNING:root:Debug message: /root/anaconda3/lib/python3.6/site-packages/caffe2-0.8.2-py3.6-linux-x86_64.egg/caffe2/python/caffe2_pybind11_state_gpu.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _ZN6google4base21CheckOpMessageBuilder9NewStringB5cxx11Ev\nCRITICAL:root:Cannot load caffe2.python. Error: /root/anaconda3/lib/python3.6/site-packages/caffe2-0.8.2-py3.6-linux-x86_64.egg/caffe2/python/caffe2_pybind11_state.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _ZN6google4base21CheckOpMessageBuilder9NewStringB5cxx11Ev\nCode example\nimport onnx\nimport onnx_caffe2.backend  #caused by this line,in backed.py ,'from caffe2.python import core'\nimport numpy as np\nmodel = onnx.load(\"/home/deep/FD_onnx/super_resolution.onnx\")\nprepared_backend = onnx_caffe2.backend.prepare(model)\nW = {model.graph.input[0].name: x.data.numpy()}\nc2_out = prepared_backend.run(W)[0]\nnp.testing.assert_almost_equal(torch_out.data.cpu().numpy(), c2_out, decimal=3)\nSystem Info\n\nPyTorch or Caffe2: caffe2\nHow you installed PyTorch (conda, pip, source):conda\nBuild command you used (if compiling from source):\nOS:linux\nTorch version:0.5\nPython version:3.6\nCUDA/cuDNN version:9.0/7.1\nGPU models and configuration:\nGCC version (if compiling from source):5.4\nCMake version:3.9.4\nVersions of any other relevant libraries:", "body": "## Issue description\r\nwhen i transform onnx to caffe2, i meet this problem:\r\n\r\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\r\nWARNING:root:Debug message: /root/anaconda3/lib/python3.6/site-packages/caffe2-0.8.2-py3.6-linux-x86_64.egg/caffe2/python/caffe2_pybind11_state_gpu.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _ZN6google4base21CheckOpMessageBuilder9NewStringB5cxx11Ev\r\nCRITICAL:root:Cannot load caffe2.python. Error: /root/anaconda3/lib/python3.6/site-packages/caffe2-0.8.2-py3.6-linux-x86_64.egg/caffe2/python/caffe2_pybind11_state.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _ZN6google4base21CheckOpMessageBuilder9NewStringB5cxx11Ev\r\n\r\n## Code example\r\n\r\nimport onnx\r\nimport onnx_caffe2.backend  #caused by this line,in backed.py ,'from caffe2.python import core'\r\nimport numpy as np\r\n\r\nmodel = onnx.load(\"/home/deep/FD_onnx/super_resolution.onnx\")\r\nprepared_backend = onnx_caffe2.backend.prepare(model)\r\nW = {model.graph.input[0].name: x.data.numpy()}\r\nc2_out = prepared_backend.run(W)[0]\r\nnp.testing.assert_almost_equal(torch_out.data.cpu().numpy(), c2_out, decimal=3)\r\n\r\n\r\n## System Info\r\n\r\n- PyTorch or Caffe2: caffe2\r\n- How you installed PyTorch (conda, pip, source):conda\r\n- Build command you used (if compiling from source):\r\n- OS:linux\r\n- Torch version:0.5\r\n- Python version:3.6\r\n- CUDA/cuDNN version:9.0/7.1\r\n- GPU models and configuration:\r\n- GCC version (if compiling from source):5.4\r\n- CMake version:3.9.4\r\n- Versions of any other relevant libraries:\r\n"}
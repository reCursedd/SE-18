{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/429574271", "html_url": "https://github.com/pytorch/pytorch/pull/12570#issuecomment-429574271", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12570", "id": 429574271, "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTU3NDI3MQ==", "user": {"login": "goldsborough", "id": 6429851, "node_id": "MDQ6VXNlcjY0Mjk4NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6429851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldsborough", "html_url": "https://github.com/goldsborough", "followers_url": "https://api.github.com/users/goldsborough/followers", "following_url": "https://api.github.com/users/goldsborough/following{/other_user}", "gists_url": "https://api.github.com/users/goldsborough/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldsborough/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldsborough/subscriptions", "organizations_url": "https://api.github.com/users/goldsborough/orgs", "repos_url": "https://api.github.com/users/goldsborough/repos", "events_url": "https://api.github.com/users/goldsborough/events{/privacy}", "received_events_url": "https://api.github.com/users/goldsborough/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-13T20:51:12Z", "updated_at": "2018-10-13T20:51:12Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I've been trying to get this working on Windows forever now. It's all in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"359148530\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/11527\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/11527/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/11527\">#11527</a></p>\n<p>I don't think that <code>torch</code> should be replaced with <code>TORCH_LIBRARY</code>, because you should be linking against the target, not the library directly. The target also brings along headers in its interface, so you wouldn't have to and shouldn't have to set <code>target_include_directories(test_custom_ops SHARED ${TORCH_INCLUDE_DIRS})</code>. All you should need to do in user-space cmake is <code>target_link_libraries(my_lib torch)</code> and everything else gets pulled in via the interface.</p>\n<p>I'll try to get this working sooner. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=79994\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/orionr\">@orionr</a> maybe you have time to look into it too.</p>", "body_text": "I've been trying to get this working on Windows forever now. It's all in #11527\nI don't think that torch should be replaced with TORCH_LIBRARY, because you should be linking against the target, not the library directly. The target also brings along headers in its interface, so you wouldn't have to and shouldn't have to set target_include_directories(test_custom_ops SHARED ${TORCH_INCLUDE_DIRS}). All you should need to do in user-space cmake is target_link_libraries(my_lib torch) and everything else gets pulled in via the interface.\nI'll try to get this working sooner. @orionr maybe you have time to look into it too.", "body": "I've been trying to get this working on Windows forever now. It's all in https://github.com/pytorch/pytorch/pull/11527\r\n\r\nI don't think that `torch` should be replaced with `TORCH_LIBRARY`, because you should be linking against the target, not the library directly. The target also brings along headers in its interface, so you wouldn't have to and shouldn't have to set `target_include_directories(test_custom_ops SHARED ${TORCH_INCLUDE_DIRS})`. All you should need to do in user-space cmake is `target_link_libraries(my_lib torch)` and everything else gets pulled in via the interface.\r\n\r\nI'll try to get this working sooner. @orionr maybe you have time to look into it too."}
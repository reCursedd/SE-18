{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/351156989", "html_url": "https://github.com/pytorch/pytorch/pull/4127#issuecomment-351156989", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/4127", "id": 351156989, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTE1Njk4OQ==", "user": {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-12T19:05:36Z", "updated_at": "2017-12-12T19:05:36Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I don't think native vs. not-native is the right way to distinguish how to take a derivative in the first place. You can have a native function in ATen that needs a derivative to be defined, we probably just haven't written one yet.  I think it is up to derivatives.yaml to say which functions are just compositions and should be fallthroughs.  The code to insert the RecordFunction should go through one codepath, otherwise we are going to start introducing partial fixes.</p>\n<p>Not for this PR: we need derivatives.yaml should not export 'mode'. It is an implementation detail internal to ATen about how an operator is implemented, and should not affect how anything external to ATen generates code. Otherwise, legacy problems in TH continue to leak.</p>", "body_text": "I don't think native vs. not-native is the right way to distinguish how to take a derivative in the first place. You can have a native function in ATen that needs a derivative to be defined, we probably just haven't written one yet.  I think it is up to derivatives.yaml to say which functions are just compositions and should be fallthroughs.  The code to insert the RecordFunction should go through one codepath, otherwise we are going to start introducing partial fixes.\nNot for this PR: we need derivatives.yaml should not export 'mode'. It is an implementation detail internal to ATen about how an operator is implemented, and should not affect how anything external to ATen generates code. Otherwise, legacy problems in TH continue to leak.", "body": "I don't think native vs. not-native is the right way to distinguish how to take a derivative in the first place. You can have a native function in ATen that needs a derivative to be defined, we probably just haven't written one yet.  I think it is up to derivatives.yaml to say which functions are just compositions and should be fallthroughs.  The code to insert the RecordFunction should go through one codepath, otherwise we are going to start introducing partial fixes.\r\n\r\nNot for this PR: we need derivatives.yaml should not export 'mode'. It is an implementation detail internal to ATen about how an operator is implemented, and should not affect how anything external to ATen generates code. Otherwise, legacy problems in TH continue to leak."}
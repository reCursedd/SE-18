{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9219", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9219/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9219/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9219/events", "html_url": "https://github.com/pytorch/pytorch/issues/9219", "id": 339075516, "node_id": "MDU6SXNzdWUzMzkwNzU1MTY=", "number": 9219, "title": "problem building with ROCm", "user": {"login": "odellus", "id": 4686956, "node_id": "MDQ6VXNlcjQ2ODY5NTY=", "avatar_url": "https://avatars1.githubusercontent.com/u/4686956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odellus", "html_url": "https://github.com/odellus", "followers_url": "https://api.github.com/users/odellus/followers", "following_url": "https://api.github.com/users/odellus/following{/other_user}", "gists_url": "https://api.github.com/users/odellus/gists{/gist_id}", "starred_url": "https://api.github.com/users/odellus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odellus/subscriptions", "organizations_url": "https://api.github.com/users/odellus/orgs", "repos_url": "https://api.github.com/users/odellus/repos", "events_url": "https://api.github.com/users/odellus/events{/privacy}", "received_events_url": "https://api.github.com/users/odellus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-07-06T21:24:27Z", "updated_at": "2018-08-03T16:07:38Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I've asked for help <a href=\"https://discuss.pytorch.org/t/building-pytorch-with-rocm/20793/1\" rel=\"nofollow\">here</a> but there haven't been any takers.</p>\n<h2>Issue description</h2>\n<p>I'm trying to build pytorch with ROCm and I ran into the following error.</p>\n<pre><code>In file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.h:4:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.h:1 error generated.\n4:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.hpp:6:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.h:5:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.h:4:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/hip/bin/hipcc line 496.\nCMake Error at caffe2_hip_generated_THCSleep.cu.o.cmake:120 (message):\n  Error generating\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCSleep.cu.o\n\n\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:77: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSleep.cu.o' failed\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSleep.cu.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.h:4:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/hip/bin/hipcc line 496.\nCMake Error at caffe2_hip_generated_THCBlas.cu.o.cmake:120 (message):\n  Error generating\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCBlas.cu.o\n\n\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:70: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCBlas.cu.o' failed\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCBlas.cu.o] Error 1\n1 error generated.\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/hip/bin/hipcc line 496.\nCMake Error at caffe2_hip_generated_THCReduceApplyUtils.cu.o.cmake:120 (message):\n  Error generating\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCReduceApplyUtils.cu.o\n\n\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:63: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCReduceApplyUtils.cu.o' failed\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCReduceApplyUtils.cu.o] Error 1\n1 error generated.\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.hpp:6:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.h:5:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/hip/bin/hipcc line 496.\nCMake Error at caffe2_hip_generated_THCStorage.cu.o.cmake:120 (message):\n  Error generating\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCStorage.cu.o\n\n\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:84: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCStorage.cu.o' failed\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCStorage.cu.o] Error 1\nCMakeFiles/Makefile2:1017: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/all' failed\nmake[1]: *** [caffe2/CMakeFiles/caffe2_hip.dir/all] Error 2\nMakefile:138: recipe for target 'all' failed\nmake: *** [all] Error 2\nFailed to run 'bash tools/build_pytorch_libs.sh --use-nnpack caffe2 nanopb libshm gloo THD'\n</code></pre>\n<ul>\n<li>PyTorch or Caffe2:<br>\ncaffe2_hip apparently</li>\n<li>How you installed PyTorch (conda, pip, source):<br>\ntrying to install from source.</li>\n<li>Build command you used (if compiling from source):<br>\n<code>python3 setup.py build</code></li>\n<li>OS:<br>\nUbuntu 16.04</li>\n<li>PyTorch version:<br>\nmaster</li>\n<li>Python version:<br>\nv3.5.2</li>\n<li>CUDA/cuDNN version:<br>\nN/A - ROCm-1.8.1</li>\n<li>GPU models and configuration:</li>\n<li>GCC version (if compiling from source):<br>\nusing hcc</li>\n<li>CMake version:<br>\nv3.5.1</li>\n<li>Versions of any other relevant libraries:</li>\n</ul>", "body_text": "I've asked for help here but there haven't been any takers.\nIssue description\nI'm trying to build pytorch with ROCm and I ran into the following error.\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.h:4:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.h:1 error generated.\n4:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.hpp:6:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.h:5:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.h:4:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/hip/bin/hipcc line 496.\nCMake Error at caffe2_hip_generated_THCSleep.cu.o.cmake:120 (message):\n  Error generating\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCSleep.cu.o\n\n\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:77: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSleep.cu.o' failed\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSleep.cu.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.h:4:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/hip/bin/hipcc line 496.\nCMake Error at caffe2_hip_generated_THCBlas.cu.o.cmake:120 (message):\n  Error generating\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCBlas.cu.o\n\n\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:70: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCBlas.cu.o' failed\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCBlas.cu.o] Error 1\n1 error generated.\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/hip/bin/hipcc line 496.\nCMake Error at caffe2_hip_generated_THCReduceApplyUtils.cu.o.cmake:120 (message):\n  Error generating\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCReduceApplyUtils.cu.o\n\n\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:63: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCReduceApplyUtils.cu.o' failed\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCReduceApplyUtils.cu.o] Error 1\n1 error generated.\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.cu:1:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.hpp:6:\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.h:5:\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/hip/bin/hipcc line 496.\nCMake Error at caffe2_hip_generated_THCStorage.cu.o.cmake:120 (message):\n  Error generating\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCStorage.cu.o\n\n\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:84: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCStorage.cu.o' failed\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCStorage.cu.o] Error 1\nCMakeFiles/Makefile2:1017: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/all' failed\nmake[1]: *** [caffe2/CMakeFiles/caffe2_hip.dir/all] Error 2\nMakefile:138: recipe for target 'all' failed\nmake: *** [all] Error 2\nFailed to run 'bash tools/build_pytorch_libs.sh --use-nnpack caffe2 nanopb libshm gloo THD'\n\n\nPyTorch or Caffe2:\ncaffe2_hip apparently\nHow you installed PyTorch (conda, pip, source):\ntrying to install from source.\nBuild command you used (if compiling from source):\npython3 setup.py build\nOS:\nUbuntu 16.04\nPyTorch version:\nmaster\nPython version:\nv3.5.2\nCUDA/cuDNN version:\nN/A - ROCm-1.8.1\nGPU models and configuration:\nGCC version (if compiling from source):\nusing hcc\nCMake version:\nv3.5.1\nVersions of any other relevant libraries:", "body": "I've asked for help [here](https://discuss.pytorch.org/t/building-pytorch-with-rocm/20793/1) but there haven't been any takers.\r\n\r\n## Issue description\r\nI'm trying to build pytorch with ROCm and I ran into the following error.\r\n\r\n```\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.cu:1:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.h:4:\r\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.cu:1:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.h:1 error generated.\r\n4:\r\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.cu:1:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.hpp:6:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.h:5:\r\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\n1 error generated.\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.cu:1:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCSleep.h:4:\r\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\n1 error generated.\r\nDied at /opt/rocm/hip/bin/hipcc line 496.\r\nCMake Error at caffe2_hip_generated_THCSleep.cu.o.cmake:120 (message):\r\n  Error generating\r\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCSleep.cu.o\r\n\r\n\r\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:77: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSleep.cu.o' failed\r\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSleep.cu.o] Error 1\r\nmake[2]: *** Waiting for unfinished jobs....\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.cu:1:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCBlas.h:4:\r\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\n1 error generated.\r\nDied at /opt/rocm/hip/bin/hipcc line 496.\r\nCMake Error at caffe2_hip_generated_THCBlas.cu.o.cmake:120 (message):\r\n  Error generating\r\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCBlas.cu.o\r\n\r\n\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\r\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:70: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCBlas.cu.o' failed\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCBlas.cu.o] Error 1\r\n1 error generated.\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\r\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\n1 error generated.\r\nDied at /opt/rocm/hip/bin/hipcc line 496.\r\nCMake Error at caffe2_hip_generated_THCReduceApplyUtils.cu.o.cmake:120 (message):\r\n  Error generating\r\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCReduceApplyUtils.cu.o\r\n\r\n\r\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:63: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCReduceApplyUtils.cu.o' failed\r\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCReduceApplyUtils.cu.o] Error 1\r\n1 error generated.\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.cu:1:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.hpp:6:\r\nIn file included from /home/thomas/code/pytorch/aten/src/THC/THCStorage.h:5:\r\n/home/thomas/code/pytorch/build/caffe2/aten/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\n1 error generated.\r\nDied at /opt/rocm/hip/bin/hipcc line 496.\r\nCMake Error at caffe2_hip_generated_THCStorage.cu.o.cmake:120 (message):\r\n  Error generating\r\n  /home/thomas/code/pytorch/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCStorage.cu.o\r\n\r\n\r\ncaffe2/CMakeFiles/caffe2_hip.dir/build.make:84: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCStorage.cu.o' failed\r\nmake[2]: *** [caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCStorage.cu.o] Error 1\r\nCMakeFiles/Makefile2:1017: recipe for target 'caffe2/CMakeFiles/caffe2_hip.dir/all' failed\r\nmake[1]: *** [caffe2/CMakeFiles/caffe2_hip.dir/all] Error 2\r\nMakefile:138: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\nFailed to run 'bash tools/build_pytorch_libs.sh --use-nnpack caffe2 nanopb libshm gloo THD'\r\n```\r\n\r\n- PyTorch or Caffe2:\r\ncaffe2_hip apparently\r\n- How you installed PyTorch (conda, pip, source):\r\ntrying to install from source.\r\n- Build command you used (if compiling from source):\r\n`python3 setup.py build`\r\n- OS:\r\nUbuntu 16.04\r\n- PyTorch version:\r\nmaster\r\n- Python version:\r\nv3.5.2\r\n- CUDA/cuDNN version:\r\nN/A - ROCm-1.8.1\r\n- GPU models and configuration:\r\n- GCC version (if compiling from source):\r\nusing hcc\r\n- CMake version:\r\nv3.5.1\r\n- Versions of any other relevant libraries:\r\n"}
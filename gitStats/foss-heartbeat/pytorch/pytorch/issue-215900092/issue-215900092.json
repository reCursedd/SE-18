{"url": "https://api.github.com/repos/pytorch/pytorch/issues/1056", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/1056/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/1056/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/1056/events", "html_url": "https://github.com/pytorch/pytorch/issues/1056", "id": 215900092, "node_id": "MDU6SXNzdWUyMTU5MDAwOTI=", "number": 1056, "title": "Building from source fails Ubuntu 16.04 CUDA 8.0.61", "user": {"login": "angusturner", "id": 18481607, "node_id": "MDQ6VXNlcjE4NDgxNjA3", "avatar_url": "https://avatars0.githubusercontent.com/u/18481607?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angusturner", "html_url": "https://github.com/angusturner", "followers_url": "https://api.github.com/users/angusturner/followers", "following_url": "https://api.github.com/users/angusturner/following{/other_user}", "gists_url": "https://api.github.com/users/angusturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/angusturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angusturner/subscriptions", "organizations_url": "https://api.github.com/users/angusturner/orgs", "repos_url": "https://api.github.com/users/angusturner/repos", "events_url": "https://api.github.com/users/angusturner/events{/privacy}", "received_events_url": "https://api.github.com/users/angusturner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-21T22:38:50Z", "updated_at": "2017-03-22T19:40:11Z", "closed_at": "2017-03-22T19:40:11Z", "author_association": "NONE", "body_html": "<p>I cannot get pytorch to build from source on a clean install of Ubuntu 16.04 with working cuda installation. Pytorch with cuda80 works with the conda binary distribution.</p>\n<p>Within my conda virtual env, I am running:</p>\n<pre><code># export conda path\nexport CMAKE_PREFIX_PATH=/home/ubuntu/miniconda3\n\n# install (optional) deps.\nconda install numpy mkl setuptools cmake gcc cffi\n\n# lapack support\nconda install -c soumith magma-cuda80\n\n# download pytorch source\ngit clone https://github.com/pytorch/pytorch.git\ncd pytorch\n\n# install requirements\npip install -r requirements.txt\npython setup.py install\n</code></pre>\n<p>And the error I am getting is:</p>\n<pre><code>-- Set runtime path of \"/home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/lib/libTHNN.so.1\" to \"\"\n-- Up-to-date: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/include/THNN/THNN.h\n-- Up-to-date: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/include/THNN/generic/THNN.h\n-- Removing -DNDEBUG from compile flags\n-- TH_LIBRARIES: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/lib/libTH.so.1\nCMake Error at /home/ubuntu/miniconda3/envs/cuda/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:148 (message):\n  Could NOT find CUDA (missing: CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) (found\n  suitable version \"7.5\", minimum required is \"5.5\")\nCall Stack (most recent call first):\n  /home/ubuntu/miniconda3/envs/cuda/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:388 (_FPHSA_FAILURE_MESSAGE)\n  /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/cmake/FindCUDA/FindCUDA.cmake:1013 (find_package_handle_standard_args)\n  CMakeLists.txt:28 (FIND_PACKAGE)\n</code></pre>\n<p>Note that I have also tried setting: <code>CMAKE_PREFIX_PATH=/home/ubuntu/miniconda3/envs/cuda</code></p>\n<p>I have also tried reinstalling CUDA.</p>", "body_text": "I cannot get pytorch to build from source on a clean install of Ubuntu 16.04 with working cuda installation. Pytorch with cuda80 works with the conda binary distribution.\nWithin my conda virtual env, I am running:\n# export conda path\nexport CMAKE_PREFIX_PATH=/home/ubuntu/miniconda3\n\n# install (optional) deps.\nconda install numpy mkl setuptools cmake gcc cffi\n\n# lapack support\nconda install -c soumith magma-cuda80\n\n# download pytorch source\ngit clone https://github.com/pytorch/pytorch.git\ncd pytorch\n\n# install requirements\npip install -r requirements.txt\npython setup.py install\n\nAnd the error I am getting is:\n-- Set runtime path of \"/home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/lib/libTHNN.so.1\" to \"\"\n-- Up-to-date: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/include/THNN/THNN.h\n-- Up-to-date: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/include/THNN/generic/THNN.h\n-- Removing -DNDEBUG from compile flags\n-- TH_LIBRARIES: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/lib/libTH.so.1\nCMake Error at /home/ubuntu/miniconda3/envs/cuda/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:148 (message):\n  Could NOT find CUDA (missing: CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) (found\n  suitable version \"7.5\", minimum required is \"5.5\")\nCall Stack (most recent call first):\n  /home/ubuntu/miniconda3/envs/cuda/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:388 (_FPHSA_FAILURE_MESSAGE)\n  /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/cmake/FindCUDA/FindCUDA.cmake:1013 (find_package_handle_standard_args)\n  CMakeLists.txt:28 (FIND_PACKAGE)\n\nNote that I have also tried setting: CMAKE_PREFIX_PATH=/home/ubuntu/miniconda3/envs/cuda\nI have also tried reinstalling CUDA.", "body": "I cannot get pytorch to build from source on a clean install of Ubuntu 16.04 with working cuda installation. Pytorch with cuda80 works with the conda binary distribution.\r\n\r\nWithin my conda virtual env, I am running:\r\n```\r\n# export conda path\r\nexport CMAKE_PREFIX_PATH=/home/ubuntu/miniconda3\r\n\r\n# install (optional) deps.\r\nconda install numpy mkl setuptools cmake gcc cffi\r\n\r\n# lapack support\r\nconda install -c soumith magma-cuda80\r\n\r\n# download pytorch source\r\ngit clone https://github.com/pytorch/pytorch.git\r\ncd pytorch\r\n\r\n# install requirements\r\npip install -r requirements.txt\r\npython setup.py install\r\n```\r\n\r\nAnd the error I am getting is:\r\n\r\n\r\n```\r\n-- Set runtime path of \"/home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/lib/libTHNN.so.1\" to \"\"\r\n-- Up-to-date: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/include/THNN/THNN.h\r\n-- Up-to-date: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/include/THNN/generic/THNN.h\r\n-- Removing -DNDEBUG from compile flags\r\n-- TH_LIBRARIES: /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/torch/lib/tmp_install/lib/libTH.so.1\r\nCMake Error at /home/ubuntu/miniconda3/envs/cuda/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:148 (message):\r\n  Could NOT find CUDA (missing: CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) (found\r\n  suitable version \"7.5\", minimum required is \"5.5\")\r\nCall Stack (most recent call first):\r\n  /home/ubuntu/miniconda3/envs/cuda/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:388 (_FPHSA_FAILURE_MESSAGE)\r\n  /home/ubuntu/cuda-ubuntu-16.04-ec2/pytorch/cmake/FindCUDA/FindCUDA.cmake:1013 (find_package_handle_standard_args)\r\n  CMakeLists.txt:28 (FIND_PACKAGE)\r\n```\r\n\r\nNote that I have also tried setting: ```CMAKE_PREFIX_PATH=/home/ubuntu/miniconda3/envs/cuda```\r\n\r\nI have also tried reinstalling CUDA. "}
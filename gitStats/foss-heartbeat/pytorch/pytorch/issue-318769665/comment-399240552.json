{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/399240552", "html_url": "https://github.com/pytorch/pytorch/issues/7083#issuecomment-399240552", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7083", "id": 399240552, "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTI0MDU1Mg==", "user": {"login": "W4ngatang", "id": 5520155, "node_id": "MDQ6VXNlcjU1MjAxNTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/5520155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/W4ngatang", "html_url": "https://github.com/W4ngatang", "followers_url": "https://api.github.com/users/W4ngatang/followers", "following_url": "https://api.github.com/users/W4ngatang/following{/other_user}", "gists_url": "https://api.github.com/users/W4ngatang/gists{/gist_id}", "starred_url": "https://api.github.com/users/W4ngatang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/W4ngatang/subscriptions", "organizations_url": "https://api.github.com/users/W4ngatang/orgs", "repos_url": "https://api.github.com/users/W4ngatang/repos", "events_url": "https://api.github.com/users/W4ngatang/events{/privacy}", "received_events_url": "https://api.github.com/users/W4ngatang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-21T20:54:55Z", "updated_at": "2018-06-21T20:57:38Z", "author_association": "NONE", "body_html": "<p>I'm running into the same issue of building with the system MKL install instead of the conda version.</p>\n<p>I tried <code>export CMAKE_PREFIX_PATH=...</code> (set to my conda installation) but it didn't work. In particular, in the build summary <code>CMAKE_PREFIX_PATH</code> was empty and it was still using the system MKL.</p>\n<p>I then added the following to CMakeLists.txt (top level)</p>\n<pre><code>SET(CMAKE_PREFIX_PATH\n  [my conda path]\n  ${CMAKE_PREFIX_PATH})\n</code></pre>\n<p>and the build summary seemed to register that <code>CMAKE_PREFIX_PATH</code> was being set, but it was still using the system MKL installation.</p>\n<p>I then went into <code>cmake/Dependencies.cmake</code> and restricted <code>find_package(MKL ... PATHS ${CMAKE_PREFIX_PATH})</code> to only search in <code>CMAKE_PREFIX_PATH</code>, but then it didn't find MKL at all.</p>\n<p>I'm pretty stuck as to what I should do or what the issue is...any help would be hugely appreciated! Thanks!</p>", "body_text": "I'm running into the same issue of building with the system MKL install instead of the conda version.\nI tried export CMAKE_PREFIX_PATH=... (set to my conda installation) but it didn't work. In particular, in the build summary CMAKE_PREFIX_PATH was empty and it was still using the system MKL.\nI then added the following to CMakeLists.txt (top level)\nSET(CMAKE_PREFIX_PATH\n  [my conda path]\n  ${CMAKE_PREFIX_PATH})\n\nand the build summary seemed to register that CMAKE_PREFIX_PATH was being set, but it was still using the system MKL installation.\nI then went into cmake/Dependencies.cmake and restricted find_package(MKL ... PATHS ${CMAKE_PREFIX_PATH}) to only search in CMAKE_PREFIX_PATH, but then it didn't find MKL at all.\nI'm pretty stuck as to what I should do or what the issue is...any help would be hugely appreciated! Thanks!", "body": "I'm running into the same issue of building with the system MKL install instead of the conda version.\r\n\r\nI tried `export CMAKE_PREFIX_PATH=...` (set to my conda installation) but it didn't work. In particular, in the build summary `CMAKE_PREFIX_PATH` was empty and it was still using the system MKL. \r\n\r\nI then added the following to CMakeLists.txt (top level)\r\n```\r\nSET(CMAKE_PREFIX_PATH\r\n  [my conda path]\r\n  ${CMAKE_PREFIX_PATH})\r\n```\r\nand the build summary seemed to register that `CMAKE_PREFIX_PATH` was being set, but it was still using the system MKL installation.\r\n\r\nI then went into `cmake/Dependencies.cmake` and restricted `find_package(MKL ... PATHS ${CMAKE_PREFIX_PATH})` to only search in `CMAKE_PREFIX_PATH`, but then it didn't find MKL at all.\r\n\r\nI'm pretty stuck as to what I should do or what the issue is...any help would be hugely appreciated! Thanks!"}
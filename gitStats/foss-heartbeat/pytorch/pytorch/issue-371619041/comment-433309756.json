{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/433309756", "html_url": "https://github.com/pytorch/pytorch/pull/12824#issuecomment-433309756", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12824", "id": 433309756, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzMwOTc1Ng==", "user": {"login": "bddppq", "id": 9300575, "node_id": "MDQ6VXNlcjkzMDA1NzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/9300575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bddppq", "html_url": "https://github.com/bddppq", "followers_url": "https://api.github.com/users/bddppq/followers", "following_url": "https://api.github.com/users/bddppq/following{/other_user}", "gists_url": "https://api.github.com/users/bddppq/gists{/gist_id}", "starred_url": "https://api.github.com/users/bddppq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bddppq/subscriptions", "organizations_url": "https://api.github.com/users/bddppq/orgs", "repos_url": "https://api.github.com/users/bddppq/repos", "events_url": "https://api.github.com/users/bddppq/events{/privacy}", "received_events_url": "https://api.github.com/users/bddppq/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-26T07:10:26Z", "updated_at": "2018-10-26T07:10:26Z", "author_association": "MEMBER", "body_html": "<p>This PR has broken PyTorch ROCm tests:<br>\n<a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/py2-clang7-rocmdeb-ubuntu16.04-test/1261//console\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/pytorch-builds/job/py2-clang7-rocmdeb-ubuntu16.04-test/1261//console</a></p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=12565466\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/iotamudelta\">@iotamudelta</a></p>\n<pre><code>06:33:27 test_zeros_like (__main__.TestUncoalescedSparse) ... ok\n06:33:28 \n06:33:28 ======================================================================\n06:33:28 ERROR: test_add_dense_sparse_mismatch (__main__.TestCudaSparse)\n06:33:28 ----------------------------------------------------------------------\n06:33:28 Traceback (most recent call last):\n06:33:28   File \"test_sparse.py\", line 933, in test_add_dense_sparse_mismatch\n06:33:28     test_shape([3, 4, 0], [1, 4], [4, 4, 4, 0], [3, 4, 4, 0])\n06:33:28   File \"test_sparse.py\", line 923, in test_shape\n06:33:28     x = torch.zeros(dense_size, dtype=self.value_dtype, device=self.device)\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\n06:33:28 \n06:33:28 ======================================================================\n06:33:28 ERROR: test_add_dense_sparse_mismatch (__main__.TestCudaUncoalescedSparse)\n06:33:28 ----------------------------------------------------------------------\n06:33:28 Traceback (most recent call last):\n06:33:28   File \"test_sparse.py\", line 933, in test_add_dense_sparse_mismatch\n06:33:28     test_shape([3, 4, 0], [1, 4], [4, 4, 4, 0], [3, 4, 4, 0])\n06:33:28   File \"test_sparse.py\", line 923, in test_shape\n06:33:28     x = torch.zeros(dense_size, dtype=self.value_dtype, device=self.device)\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\n06:33:28 \n06:33:28 ======================================================================\n06:33:28 ERROR: test_reduction_empty (test_torch.TestTorch)\n06:33:28 ----------------------------------------------------------------------\n06:33:28 Traceback (most recent call last):\n06:33:28   File \"/var/lib/jenkins/workspace/test/test_torch.py\", line 1047, in test_reduction_empty\n06:33:28     self.assertEqual(torch.empty((2, 0, 1), device=device), fn(x, dim=2, keepdim=True))\n06:33:28   File \"/var/lib/jenkins/workspace/test/test_torch.py\", line 1024, in &lt;lambda&gt;\n06:33:28     ('sum', lambda *args, **kwargs: torch.sum(*args, **kwargs), 0),\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\n06:33:28 \n06:33:28 ----------------------------------------------------------------------\n</code></pre>", "body_text": "This PR has broken PyTorch ROCm tests:\nhttps://ci.pytorch.org/jenkins/job/pytorch-builds/job/py2-clang7-rocmdeb-ubuntu16.04-test/1261//console\ncc @iotamudelta\n06:33:27 test_zeros_like (__main__.TestUncoalescedSparse) ... ok\n06:33:28 \n06:33:28 ======================================================================\n06:33:28 ERROR: test_add_dense_sparse_mismatch (__main__.TestCudaSparse)\n06:33:28 ----------------------------------------------------------------------\n06:33:28 Traceback (most recent call last):\n06:33:28   File \"test_sparse.py\", line 933, in test_add_dense_sparse_mismatch\n06:33:28     test_shape([3, 4, 0], [1, 4], [4, 4, 4, 0], [3, 4, 4, 0])\n06:33:28   File \"test_sparse.py\", line 923, in test_shape\n06:33:28     x = torch.zeros(dense_size, dtype=self.value_dtype, device=self.device)\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\n06:33:28 \n06:33:28 ======================================================================\n06:33:28 ERROR: test_add_dense_sparse_mismatch (__main__.TestCudaUncoalescedSparse)\n06:33:28 ----------------------------------------------------------------------\n06:33:28 Traceback (most recent call last):\n06:33:28   File \"test_sparse.py\", line 933, in test_add_dense_sparse_mismatch\n06:33:28     test_shape([3, 4, 0], [1, 4], [4, 4, 4, 0], [3, 4, 4, 0])\n06:33:28   File \"test_sparse.py\", line 923, in test_shape\n06:33:28     x = torch.zeros(dense_size, dtype=self.value_dtype, device=self.device)\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\n06:33:28 \n06:33:28 ======================================================================\n06:33:28 ERROR: test_reduction_empty (test_torch.TestTorch)\n06:33:28 ----------------------------------------------------------------------\n06:33:28 Traceback (most recent call last):\n06:33:28   File \"/var/lib/jenkins/workspace/test/test_torch.py\", line 1047, in test_reduction_empty\n06:33:28     self.assertEqual(torch.empty((2, 0, 1), device=device), fn(x, dim=2, keepdim=True))\n06:33:28   File \"/var/lib/jenkins/workspace/test/test_torch.py\", line 1024, in <lambda>\n06:33:28     ('sum', lambda *args, **kwargs: torch.sum(*args, **kwargs), 0),\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\n06:33:28 \n06:33:28 ----------------------------------------------------------------------", "body": "This PR has broken PyTorch ROCm tests:\r\nhttps://ci.pytorch.org/jenkins/job/pytorch-builds/job/py2-clang7-rocmdeb-ubuntu16.04-test/1261//console\r\n\r\ncc @iotamudelta \r\n\r\n```\r\n06:33:27 test_zeros_like (__main__.TestUncoalescedSparse) ... ok\r\n06:33:28 \r\n06:33:28 ======================================================================\r\n06:33:28 ERROR: test_add_dense_sparse_mismatch (__main__.TestCudaSparse)\r\n06:33:28 ----------------------------------------------------------------------\r\n06:33:28 Traceback (most recent call last):\r\n06:33:28   File \"test_sparse.py\", line 933, in test_add_dense_sparse_mismatch\r\n06:33:28     test_shape([3, 4, 0], [1, 4], [4, 4, 4, 0], [3, 4, 4, 0])\r\n06:33:28   File \"test_sparse.py\", line 923, in test_shape\r\n06:33:28     x = torch.zeros(dense_size, dtype=self.value_dtype, device=self.device)\r\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\r\n06:33:28 \r\n06:33:28 ======================================================================\r\n06:33:28 ERROR: test_add_dense_sparse_mismatch (__main__.TestCudaUncoalescedSparse)\r\n06:33:28 ----------------------------------------------------------------------\r\n06:33:28 Traceback (most recent call last):\r\n06:33:28   File \"test_sparse.py\", line 933, in test_add_dense_sparse_mismatch\r\n06:33:28     test_shape([3, 4, 0], [1, 4], [4, 4, 4, 0], [3, 4, 4, 0])\r\n06:33:28   File \"test_sparse.py\", line 923, in test_shape\r\n06:33:28     x = torch.zeros(dense_size, dtype=self.value_dtype, device=self.device)\r\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\r\n06:33:28 \r\n06:33:28 ======================================================================\r\n06:33:28 ERROR: test_reduction_empty (test_torch.TestTorch)\r\n06:33:28 ----------------------------------------------------------------------\r\n06:33:28 Traceback (most recent call last):\r\n06:33:28   File \"/var/lib/jenkins/workspace/test/test_torch.py\", line 1047, in test_reduction_empty\r\n06:33:28     self.assertEqual(torch.empty((2, 0, 1), device=device), fn(x, dim=2, keepdim=True))\r\n06:33:28   File \"/var/lib/jenkins/workspace/test/test_torch.py\", line 1024, in <lambda>\r\n06:33:28     ('sum', lambda *args, **kwargs: torch.sum(*args, **kwargs), 0),\r\n06:33:28 RuntimeError: cuda runtime error (1011) : hipErrorInvalidValue at /var/lib/jenkins/workspace/aten/src/THC/generic/THCTensorMath.cu:25\r\n06:33:28 \r\n06:33:28 ----------------------------------------------------------------------\r\n```"}
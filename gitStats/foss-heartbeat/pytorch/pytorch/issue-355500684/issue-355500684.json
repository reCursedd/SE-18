{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11072", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11072/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11072/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11072/events", "html_url": "https://github.com/pytorch/pytorch/issues/11072", "id": 355500684, "node_id": "MDU6SXNzdWUzNTU1MDA2ODQ=", "number": 11072, "title": "[...] operator for masked select does not broadcast anymore", "user": {"login": "ClementPinard", "id": 4380424, "node_id": "MDQ6VXNlcjQzODA0MjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4380424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ClementPinard", "html_url": "https://github.com/ClementPinard", "followers_url": "https://api.github.com/users/ClementPinard/followers", "following_url": "https://api.github.com/users/ClementPinard/following{/other_user}", "gists_url": "https://api.github.com/users/ClementPinard/gists{/gist_id}", "starred_url": "https://api.github.com/users/ClementPinard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ClementPinard/subscriptions", "organizations_url": "https://api.github.com/users/ClementPinard/orgs", "repos_url": "https://api.github.com/users/ClementPinard/repos", "events_url": "https://api.github.com/users/ClementPinard/events{/privacy}", "received_events_url": "https://api.github.com/users/ClementPinard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-30T09:28:13Z", "updated_at": "2018-09-04T16:47:54Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I have the last pytorch version from source, pulled this morning, ubuntu 16.04, CUDA 9.1</p>\n<p>the <code>tensor[byte_tensor]</code>, which i thought to be equivalent to masked_select doesn't broadcast, while I am pretty sure it did broadcast before.</p>\n<p>Simple example to recreate the problem :</p>\n<div class=\"highlight highlight-source-python\"><pre>a <span class=\"pl-k\">=</span> torch.randn(<span class=\"pl-c1\">10</span>,<span class=\"pl-c1\">10</span>,<span class=\"pl-c1\">10</span>)\nb <span class=\"pl-k\">=</span> (a[:,<span class=\"pl-c1\">0</span>] <span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">0</span>).unsqueeze(<span class=\"pl-c1\">1</span>) <span class=\"pl-c\"><span class=\"pl-c\">#</span> size 10 x 1 x 10</span>\na.masked_select(b)  <span class=\"pl-c\"><span class=\"pl-c\">#</span> works</span>\na[b]  <span class=\"pl-c\"><span class=\"pl-c\">#</span> doesn't work</span></pre></div>\n<p>EDIT: did some tests with pytorch 0.3.0, and more specifically, it worked with Variable, but not with tensor</p>\n<div class=\"highlight highlight-source-python\"><pre>a <span class=\"pl-k\">=</span> torch.randn(<span class=\"pl-c1\">10</span>,<span class=\"pl-c1\">10</span>,<span class=\"pl-c1\">10</span>)\nb <span class=\"pl-k\">=</span> (a[:,<span class=\"pl-c1\">0</span>] <span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">0</span>).unsqueeze(<span class=\"pl-c1\">1</span>) <span class=\"pl-c\"><span class=\"pl-c\">#</span> size 10 x 1 x 10</span>\na[b]  <span class=\"pl-c\"><span class=\"pl-c\">#</span> doesn't work</span>\nVariable(a)[b] <span class=\"pl-c\"><span class=\"pl-c\">#</span> works</span></pre></div>", "body_text": "I have the last pytorch version from source, pulled this morning, ubuntu 16.04, CUDA 9.1\nthe tensor[byte_tensor], which i thought to be equivalent to masked_select doesn't broadcast, while I am pretty sure it did broadcast before.\nSimple example to recreate the problem :\na = torch.randn(10,10,10)\nb = (a[:,0] > 0).unsqueeze(1) # size 10 x 1 x 10\na.masked_select(b)  # works\na[b]  # doesn't work\nEDIT: did some tests with pytorch 0.3.0, and more specifically, it worked with Variable, but not with tensor\na = torch.randn(10,10,10)\nb = (a[:,0] > 0).unsqueeze(1) # size 10 x 1 x 10\na[b]  # doesn't work\nVariable(a)[b] # works", "body": "I have the last pytorch version from source, pulled this morning, ubuntu 16.04, CUDA 9.1\r\n\r\nthe `tensor[byte_tensor]`, which i thought to be equivalent to masked_select doesn't broadcast, while I am pretty sure it did broadcast before.\r\n\r\nSimple example to recreate the problem :\r\n\r\n```python\r\na = torch.randn(10,10,10)\r\nb = (a[:,0] > 0).unsqueeze(1) # size 10 x 1 x 10\r\na.masked_select(b)  # works\r\na[b]  # doesn't work\r\n```\r\n\r\nEDIT: did some tests with pytorch 0.3.0, and more specifically, it worked with Variable, but not with tensor\r\n```python\r\na = torch.randn(10,10,10)\r\nb = (a[:,0] > 0).unsqueeze(1) # size 10 x 1 x 10\r\na[b]  # doesn't work\r\nVariable(a)[b] # works\r\n```"}
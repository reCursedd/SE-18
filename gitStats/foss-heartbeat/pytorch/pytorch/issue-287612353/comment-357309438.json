{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/357309438", "html_url": "https://github.com/pytorch/pytorch/pull/4594#issuecomment-357309438", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/4594", "id": 357309438, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzMwOTQzOA==", "user": {"login": "prigoyal", "id": 13488275, "node_id": "MDQ6VXNlcjEzNDg4Mjc1", "avatar_url": "https://avatars0.githubusercontent.com/u/13488275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prigoyal", "html_url": "https://github.com/prigoyal", "followers_url": "https://api.github.com/users/prigoyal/followers", "following_url": "https://api.github.com/users/prigoyal/following{/other_user}", "gists_url": "https://api.github.com/users/prigoyal/gists{/gist_id}", "starred_url": "https://api.github.com/users/prigoyal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prigoyal/subscriptions", "organizations_url": "https://api.github.com/users/prigoyal/orgs", "repos_url": "https://api.github.com/users/prigoyal/repos", "events_url": "https://api.github.com/users/prigoyal/events{/privacy}", "received_events_url": "https://api.github.com/users/prigoyal/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-12T17:56:37Z", "updated_at": "2018-01-12T17:56:37Z", "author_association": "CONTRIBUTOR", "body_html": "<p>thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9110200\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fmassa\">@fmassa</a> for the proposal :)</p>\n<p>As you said, I think the behavior can be achieved with the current code as well. The user can just call checkpoint on whatever part of the model they want ( and they pass a run_function() which describe what to run in that checkpoint call and the only difference from your proposal is passing the inputs).</p>\n<p>I am not convinced why we shouldn't ask user to pass the inputs explicitly. In my checkpointing experiments, I have had to do checkpointing where I had to explicitly detach the history of some output (for example in case of word_language_model, I had to do that when running the decoder step). I feel that letting user pass the inputs gives more flexibility and control.</p>\n<p>what are your thoughts <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=370202\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zdevito\">@zdevito</a> , <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1310570\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/soumith\">@soumith</a> ?</p>", "body_text": "thanks @fmassa for the proposal :)\nAs you said, I think the behavior can be achieved with the current code as well. The user can just call checkpoint on whatever part of the model they want ( and they pass a run_function() which describe what to run in that checkpoint call and the only difference from your proposal is passing the inputs).\nI am not convinced why we shouldn't ask user to pass the inputs explicitly. In my checkpointing experiments, I have had to do checkpointing where I had to explicitly detach the history of some output (for example in case of word_language_model, I had to do that when running the decoder step). I feel that letting user pass the inputs gives more flexibility and control.\nwhat are your thoughts @zdevito , @soumith ?", "body": "thanks @fmassa for the proposal :) \r\n\r\nAs you said, I think the behavior can be achieved with the current code as well. The user can just call checkpoint on whatever part of the model they want ( and they pass a run_function() which describe what to run in that checkpoint call and the only difference from your proposal is passing the inputs).\r\n\r\nI am not convinced why we shouldn't ask user to pass the inputs explicitly. In my checkpointing experiments, I have had to do checkpointing where I had to explicitly detach the history of some output (for example in case of word_language_model, I had to do that when running the decoder step). I feel that letting user pass the inputs gives more flexibility and control.\r\n\r\nwhat are your thoughts @zdevito , @soumith ? "}
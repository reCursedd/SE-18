{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/231741020", "pull_request_review_id": 172776754, "id": 231741020, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMTc0MTAyMA==", "diff_hunk": "@@ -259,7 +259,7 @@ static PyObject * THPVariable_invert(PyObject* self, PyObject* args) {\n \n static Tensor dispatch_to(const Tensor & self, Device device, bool non_blocking, bool copy) {\n   AutoNoGIL no_gil;\n-  return self.to(device, non_blocking, copy);\n+  return self.to(self.options().device(device), non_blocking, copy);", "path": "tools/autograd/templates/python_variable_methods.cpp", "position": 5, "original_position": 5, "commit_id": "1a5a9f211e93832beaf81a13b69e7f590af46152", "original_commit_id": "1a5a9f211e93832beaf81a13b69e7f590af46152", "user": {"login": "jamesr66a", "id": 4685384, "node_id": "MDQ6VXNlcjQ2ODUzODQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4685384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesr66a", "html_url": "https://github.com/jamesr66a", "followers_url": "https://api.github.com/users/jamesr66a/followers", "following_url": "https://api.github.com/users/jamesr66a/following{/other_user}", "gists_url": "https://api.github.com/users/jamesr66a/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesr66a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesr66a/subscriptions", "organizations_url": "https://api.github.com/users/jamesr66a/orgs", "repos_url": "https://api.github.com/users/jamesr66a/repos", "events_url": "https://api.github.com/users/jamesr66a/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesr66a/received_events", "type": "User", "site_admin": false}, "body": "Context: this is the site at which we record `aten::to` in the graph during tracing. However, the behavior of `aten::to` is different with respect to TensorOptions fields that are not present: `aten::to` inherits fields that are missing from the `self` argument while the tracer assumes that they should be populated with the default values (eg. float for scalar type). By explicitly copying over the tensor options here we fully specify all tensor options and thus record the proper trace", "created_at": "2018-11-08T01:39:01Z", "updated_at": "2018-11-23T15:54:30Z", "html_url": "https://github.com/pytorch/pytorch/pull/13700#discussion_r231741020", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/13700", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/231741020"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/13700#discussion_r231741020"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/13700"}}, "body_html": "<p>Context: this is the site at which we record <code>aten::to</code> in the graph during tracing. However, the behavior of <code>aten::to</code> is different with respect to TensorOptions fields that are not present: <code>aten::to</code> inherits fields that are missing from the <code>self</code> argument while the tracer assumes that they should be populated with the default values (eg. float for scalar type). By explicitly copying over the tensor options here we fully specify all tensor options and thus record the proper trace</p>", "body_text": "Context: this is the site at which we record aten::to in the graph during tracing. However, the behavior of aten::to is different with respect to TensorOptions fields that are not present: aten::to inherits fields that are missing from the self argument while the tracer assumes that they should be populated with the default values (eg. float for scalar type). By explicitly copying over the tensor options here we fully specify all tensor options and thus record the proper trace"}
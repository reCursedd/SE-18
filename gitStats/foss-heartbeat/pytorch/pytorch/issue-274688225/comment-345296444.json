{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/345296444", "html_url": "https://github.com/pytorch/pytorch/issues/3748#issuecomment-345296444", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/3748", "id": 345296444, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTI5NjQ0NA==", "user": {"login": "csarofeen", "id": 22205833, "node_id": "MDQ6VXNlcjIyMjA1ODMz", "avatar_url": "https://avatars2.githubusercontent.com/u/22205833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csarofeen", "html_url": "https://github.com/csarofeen", "followers_url": "https://api.github.com/users/csarofeen/followers", "following_url": "https://api.github.com/users/csarofeen/following{/other_user}", "gists_url": "https://api.github.com/users/csarofeen/gists{/gist_id}", "starred_url": "https://api.github.com/users/csarofeen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csarofeen/subscriptions", "organizations_url": "https://api.github.com/users/csarofeen/orgs", "repos_url": "https://api.github.com/users/csarofeen/repos", "events_url": "https://api.github.com/users/csarofeen/events{/privacy}", "received_events_url": "https://api.github.com/users/csarofeen/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-17T16:43:32Z", "updated_at": "2017-11-17T16:43:32Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I tested vgg19 with batch size 64 and got the following results:</p>\n<p>FP32 Iterations per second:  2.84<br>\nFP16 Iterations per second:  3.98</p>\n<p>The script I used is <a href=\"https://gist.github.com/csarofeen/f07e2d59e56052dbfa695bac0748d764\">test_pytorch_vgg19_fp16.py</a>. However, as you aren't simply using vgg and doing more, I'm not sure how the performance of the rest of the network will impact this. For example if vgg takes 50% of total time, no matter how fast it gets your network will never be more than 2x faster if you don't also speed up the rest of the network.</p>\n<p>There are some complexities for training accurately in fp16. I would recommend following the code in <a href=\"https://github.com/csarofeen/examples/tree/fp16_examples/imagenet\">fp16 imagenet example</a> as it follows best practices.</p>", "body_text": "I tested vgg19 with batch size 64 and got the following results:\nFP32 Iterations per second:  2.84\nFP16 Iterations per second:  3.98\nThe script I used is test_pytorch_vgg19_fp16.py. However, as you aren't simply using vgg and doing more, I'm not sure how the performance of the rest of the network will impact this. For example if vgg takes 50% of total time, no matter how fast it gets your network will never be more than 2x faster if you don't also speed up the rest of the network.\nThere are some complexities for training accurately in fp16. I would recommend following the code in fp16 imagenet example as it follows best practices.", "body": "I tested vgg19 with batch size 64 and got the following results:\r\n\r\nFP32 Iterations per second:  2.84\r\nFP16 Iterations per second:  3.98\r\n\r\nThe script I used is [test_pytorch_vgg19_fp16.py](https://gist.github.com/csarofeen/f07e2d59e56052dbfa695bac0748d764). However, as you aren't simply using vgg and doing more, I'm not sure how the performance of the rest of the network will impact this. For example if vgg takes 50% of total time, no matter how fast it gets your network will never be more than 2x faster if you don't also speed up the rest of the network.\r\n\r\nThere are some complexities for training accurately in fp16. I would recommend following the code in [fp16 imagenet example](https://github.com/csarofeen/examples/tree/fp16_examples/imagenet) as it follows best practices."}
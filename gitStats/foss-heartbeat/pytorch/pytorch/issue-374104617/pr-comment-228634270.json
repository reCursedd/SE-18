{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/228634270", "pull_request_review_id": 168959040, "id": 228634270, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyODYzNDI3MA==", "diff_hunk": "@@ -244,31 +222,17 @@ caffe2_linux_build_defaults: &caffe2_linux_build_defaults\n \n         ((echo \"source ./workspace/env\" && echo 'sudo chown -R jenkins workspace && cd workspace && ./ci_build_script.sh') | docker exec -u jenkins -i \"$id\" bash) 2>&1 | ts\n \n-        mkdir -p /home/circleci/project/caffe2-ci-env\n-        touch /home/circleci/project/caffe2-ci-env/.tmp  # Dummy file so that the persist_to_workspace step won't complain about not finding any file\n-\n+        # Push intermediate Docker image for next phase to use\n         if [ -z \"${BUILD_ONLY}\" ]; then\n           export COMMIT_DOCKER_IMAGE=${DOCKER_IMAGE}-${CIRCLE_SHA1}\n           docker commit \"$id\" ${COMMIT_DOCKER_IMAGE}\n           docker push ${COMMIT_DOCKER_IMAGE}\n-          echo \"declare -x COMMIT_DOCKER_IMAGE=${COMMIT_DOCKER_IMAGE}\" > /home/circleci/project/caffe2-ci-env/COMMIT_DOCKER_IMAGE", "path": ".circleci/config.yml", "position": 128, "original_position": 128, "commit_id": "6ce8eaa19224d0c482e4d12d1aec0a3a99d6ec49", "original_commit_id": "17f3f2d85cb5230540e19bb9a6da0a95b048b685", "user": {"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}, "body": "If we want to allow retrying a test job, we can't persist things to the intermediate workspace anymore, because CircleCI's retry API doesn't support attaching a workspace :( ", "created_at": "2018-10-26T18:59:35Z", "updated_at": "2018-11-23T15:53:42Z", "html_url": "https://github.com/pytorch/pytorch/pull/13137#discussion_r228634270", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/13137", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/228634270"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/13137#discussion_r228634270"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/13137"}}, "body_html": "<p>If we want to allow retrying a test job, we can't persist things to the intermediate workspace anymore, because CircleCI's retry API doesn't support attaching a workspace :(</p>", "body_text": "If we want to allow retrying a test job, we can't persist things to the intermediate workspace anymore, because CircleCI's retry API doesn't support attaching a workspace :("}
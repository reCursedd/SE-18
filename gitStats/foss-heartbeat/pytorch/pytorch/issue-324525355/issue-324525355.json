{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7687", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7687/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7687/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7687/events", "html_url": "https://github.com/pytorch/pytorch/issues/7687", "id": 324525355, "node_id": "MDU6SXNzdWUzMjQ1MjUzNTU=", "number": 7687, "title": "Cuda_runtime.h not found on ROCM build", "user": {"login": "victor-felicitas", "id": 36967768, "node_id": "MDQ6VXNlcjM2OTY3NzY4", "avatar_url": "https://avatars0.githubusercontent.com/u/36967768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victor-felicitas", "html_url": "https://github.com/victor-felicitas", "followers_url": "https://api.github.com/users/victor-felicitas/followers", "following_url": "https://api.github.com/users/victor-felicitas/following{/other_user}", "gists_url": "https://api.github.com/users/victor-felicitas/gists{/gist_id}", "starred_url": "https://api.github.com/users/victor-felicitas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victor-felicitas/subscriptions", "organizations_url": "https://api.github.com/users/victor-felicitas/orgs", "repos_url": "https://api.github.com/users/victor-felicitas/repos", "events_url": "https://api.github.com/users/victor-felicitas/events{/privacy}", "received_events_url": "https://api.github.com/users/victor-felicitas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-18T19:25:21Z", "updated_at": "2018-08-17T20:45:51Z", "closed_at": "2018-08-17T20:45:51Z", "author_association": "NONE", "body_html": "<p>Hi all,</p>\n<p>I've tried to install newest build on Ubuntu 16.04 ROCM 1.8 machine.<br>\nI used the command<br>\nsudo WITH_ROCM=1 NO_CUDA=1  python setup.py  install<br>\nbut I always get the same error <strong>cuda_runtime.h not found</strong> even while ROCM build is clearly activated (ROCM=TRUE)<br>\nI guess the build should not use CUDA at all if I am on AMD GPU with ROCM, right?</p>\n<p>Any help will be appreciated!</p>\n<p>Full output is below:</p>\n<p>[ 53%] Building CXX object src/ATen/test/CMakeFiles/scalar_tensor_test.dir/scalar_tensor_test.cpp.o<br>\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:<br>\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:<br>\n/home/vityek/pytorch/aten/build/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found<br>\n#include \"cuda_runtime.h\"<br>\n^~~~~~~~~~~~~~~~<br>\n1 error generated.<br>\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:<br>\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:<br>\n/home/vityek/pytorch/aten/build/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found<br>\n#include \"cuda_runtime.h\"<br>\n^~~~~~~~~~~~~~~~<br>\n1 error generated.<br>\nDied at /opt/rocm/bin/hipcc line 501.<br>\nCMake Error at ATen_cuda_generated_THCReduceApplyUtils.cu.o.cmake:120 (message):<br>\nError generating<br>\n/home/vityek/pytorch/aten/build/src/ATen/CMakeFiles/ATen_cuda.dir/__/THC/./ATen_cuda_generated_THCReduceApplyUtils.cu.o</p>\n<p>src/ATen/CMakeFiles/ATen_cuda.dir/build.make:63: recipe for target 'src/ATen/CMakeFiles/ATen_cuda.dir/<strong>/THC/ATen_cuda_generated_THCReduceApplyUtils.cu.o' failed<br>\nmake[2]: *** [src/ATen/CMakeFiles/ATen_cuda.dir/</strong>/THC/ATen_cuda_generated_THCReduceApplyUtils.cu.o] Error 1<br>\nCMakeFiles/Makefile2:273: recipe for target 'src/ATen/CMakeFiles/ATen_cuda.dir/all' failed<br>\nmake[1]: *** [src/ATen/CMakeFiles/ATen_cuda.dir/all] Error 2<br>\nmake[1]: *** Waiting for unfinished jobs....<br>\n[ 53%] Built target tbb_init_test<br>\n[ 54%] Built target scalar_test<br>\n[ 55%] Built target basic<br>\n[ 55%] Built target broadcast_test<br>\n[ 55%] Built target dlconvertor_test<br>\n[ 56%] Built target undefined_tensor_test<br>\n[ 56%] Built target wrapdim_test<br>\n[ 56%] Built target native_test<br>\n[ 56%] Built target apply_utils_test<br>\n[ 56%] Built target atest<br>\n[ 56%] Linking CXX executable scalar_tensor_test<br>\n[ 56%] Built target scalar_tensor_test<br>\nMakefile:129: recipe for target 'all' failed<br>\nmake: *** [all] Error 2</p>", "body_text": "Hi all,\nI've tried to install newest build on Ubuntu 16.04 ROCM 1.8 machine.\nI used the command\nsudo WITH_ROCM=1 NO_CUDA=1  python setup.py  install\nbut I always get the same error cuda_runtime.h not found even while ROCM build is clearly activated (ROCM=TRUE)\nI guess the build should not use CUDA at all if I am on AMD GPU with ROCM, right?\nAny help will be appreciated!\nFull output is below:\n[ 53%] Building CXX object src/ATen/test/CMakeFiles/scalar_tensor_test.dir/scalar_tensor_test.cpp.o\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\n/home/vityek/pytorch/aten/build/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n^~~~~~~~~~~~~~~~\n1 error generated.\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\n/home/vityek/pytorch/aten/build/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\n#include \"cuda_runtime.h\"\n^~~~~~~~~~~~~~~~\n1 error generated.\nDied at /opt/rocm/bin/hipcc line 501.\nCMake Error at ATen_cuda_generated_THCReduceApplyUtils.cu.o.cmake:120 (message):\nError generating\n/home/vityek/pytorch/aten/build/src/ATen/CMakeFiles/ATen_cuda.dir/__/THC/./ATen_cuda_generated_THCReduceApplyUtils.cu.o\nsrc/ATen/CMakeFiles/ATen_cuda.dir/build.make:63: recipe for target 'src/ATen/CMakeFiles/ATen_cuda.dir//THC/ATen_cuda_generated_THCReduceApplyUtils.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen_cuda.dir//THC/ATen_cuda_generated_THCReduceApplyUtils.cu.o] Error 1\nCMakeFiles/Makefile2:273: recipe for target 'src/ATen/CMakeFiles/ATen_cuda.dir/all' failed\nmake[1]: *** [src/ATen/CMakeFiles/ATen_cuda.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n[ 53%] Built target tbb_init_test\n[ 54%] Built target scalar_test\n[ 55%] Built target basic\n[ 55%] Built target broadcast_test\n[ 55%] Built target dlconvertor_test\n[ 56%] Built target undefined_tensor_test\n[ 56%] Built target wrapdim_test\n[ 56%] Built target native_test\n[ 56%] Built target apply_utils_test\n[ 56%] Built target atest\n[ 56%] Linking CXX executable scalar_tensor_test\n[ 56%] Built target scalar_tensor_test\nMakefile:129: recipe for target 'all' failed\nmake: *** [all] Error 2", "body": "Hi all,\r\n\r\nI've tried to install newest build on Ubuntu 16.04 ROCM 1.8 machine.\r\nI used the command\r\nsudo WITH_ROCM=1 NO_CUDA=1  python setup.py  install\r\nbut I always get the same error **cuda_runtime.h not found** even while ROCM build is clearly activated (ROCM=TRUE)\r\nI guess the build should not use CUDA at all if I am on AMD GPU with ROCM, right?\r\n\r\nAny help will be appreciated!\r\n\r\nFull output is below:\r\n\r\n[ 53%] Building CXX object src/ATen/test/CMakeFiles/scalar_tensor_test.dir/scalar_tensor_test.cpp.o\r\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\r\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\r\n/home/vityek/pytorch/aten/build/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\n1 error generated.\r\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cu:1:\r\nIn file included from /home/vityek/pytorch/aten/src/THC/THCReduceApplyUtils.cuh:6:\r\n/home/vityek/pytorch/aten/build/src/THC/THCGeneral.h:13:10: fatal error: 'cuda_runtime.h' file not found\r\n#include \"cuda_runtime.h\"\r\n         ^~~~~~~~~~~~~~~~\r\n1 error generated.\r\nDied at /opt/rocm/bin/hipcc line 501.\r\nCMake Error at ATen_cuda_generated_THCReduceApplyUtils.cu.o.cmake:120 (message):\r\n  Error generating\r\n  /home/vityek/pytorch/aten/build/src/ATen/CMakeFiles/ATen_cuda.dir/__/THC/./ATen_cuda_generated_THCReduceApplyUtils.cu.o\r\n\r\n\r\nsrc/ATen/CMakeFiles/ATen_cuda.dir/build.make:63: recipe for target 'src/ATen/CMakeFiles/ATen_cuda.dir/__/THC/ATen_cuda_generated_THCReduceApplyUtils.cu.o' failed\r\nmake[2]: *** [src/ATen/CMakeFiles/ATen_cuda.dir/__/THC/ATen_cuda_generated_THCReduceApplyUtils.cu.o] Error 1\r\nCMakeFiles/Makefile2:273: recipe for target 'src/ATen/CMakeFiles/ATen_cuda.dir/all' failed\r\nmake[1]: *** [src/ATen/CMakeFiles/ATen_cuda.dir/all] Error 2\r\nmake[1]: *** Waiting for unfinished jobs....\r\n[ 53%] Built target tbb_init_test\r\n[ 54%] Built target scalar_test\r\n[ 55%] Built target basic\r\n[ 55%] Built target broadcast_test\r\n[ 55%] Built target dlconvertor_test\r\n[ 56%] Built target undefined_tensor_test\r\n[ 56%] Built target wrapdim_test\r\n[ 56%] Built target native_test\r\n[ 56%] Built target apply_utils_test\r\n[ 56%] Built target atest\r\n[ 56%] Linking CXX executable scalar_tensor_test\r\n[ 56%] Built target scalar_tensor_test\r\nMakefile:129: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n\r\n\r\n\r\n"}
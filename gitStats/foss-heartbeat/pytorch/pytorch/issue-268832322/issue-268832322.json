{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3309", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3309/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3309/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3309/events", "html_url": "https://github.com/pytorch/pytorch/issues/3309", "id": 268832322, "node_id": "MDU6SXNzdWUyNjg4MzIzMjI=", "number": 3309, "title": "Illegal memory access when upsampling with cuda", "user": {"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-26T16:43:04Z", "updated_at": "2017-10-31T21:49:25Z", "closed_at": "2017-10-31T21:49:25Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Original post at: <a href=\"https://discuss.pytorch.org/t/illegal-memory-access-when-upsampling-with-cuda/8570\" rel=\"nofollow\">https://discuss.pytorch.org/t/illegal-memory-access-when-upsampling-with-cuda/8570</a><br>\nOriginal post content:</p>\n<p>code:</p>\n<pre><code>import torch\nimport torch.nn as nn\nx=torch.randn(16, 32, 320).cuda()\nnn.Upsample(scale_factor=4)(x)\n</code></pre>\n<pre><code>$ CU_LAUNCH_BLOCKING=1 python\n&gt;&gt;&gt; import torch\n&gt;&gt;&gt; import torch.nn as nn\n&gt;&gt;&gt; torch.__version__\n'0.2.0+c74f7d8'\n&gt;&gt;&gt; x=torch.randn(16, 32, 320).cuda()\n&gt;&gt;&gt; nn.Upsample(scale_factor=4)(x)\nTHCudaCheck FAIL file=/Users/qbx2/pytorch/torch/lib/THCUNN/generic/TemporalUpSamplingNearest.cu line=97 error=77 : an illegal memory access was encountered\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 259, in __call__\n    result = self.forward(*input, **kwargs)\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/upsampling.py\", line 80, in forward\n    return F.upsample(input, self.size, self.scale_factor, self.mode)\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/functional.py\", line 1005, in upsample\n    return _functions.thnn.UpsamplingNearest1d.apply(input, _single(size), scale_factor)\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/_functions/thnn/upsampling.py\", line 66, in forward\n    ctx.scale_factor\nRuntimeError: cuda runtime error (77) : an illegal memory access was encountered at /Users/qbx2/pytorch/torch/lib/THCUNN/generic/TemporalUpSamplingNearest.cu:97\n</code></pre>\n<p>Tested on Linux with pytorch 0.2.0+72f6b5a &amp; GTX 750 and Mac OS X Sierra with pytorch 0.2.0+c74f7d8 &amp; GT 750M<br>\nIt seems to be work well with mode=\u2018linear\u2019 and memory of gpu is larger than 1GB.<br>\nI think it\u2019s something wrong.</p>\n<hr>\n<p>Comment: successfully reproduced using the above snippet on master.</p>", "body_text": "Original post at: https://discuss.pytorch.org/t/illegal-memory-access-when-upsampling-with-cuda/8570\nOriginal post content:\ncode:\nimport torch\nimport torch.nn as nn\nx=torch.randn(16, 32, 320).cuda()\nnn.Upsample(scale_factor=4)(x)\n\n$ CU_LAUNCH_BLOCKING=1 python\n>>> import torch\n>>> import torch.nn as nn\n>>> torch.__version__\n'0.2.0+c74f7d8'\n>>> x=torch.randn(16, 32, 320).cuda()\n>>> nn.Upsample(scale_factor=4)(x)\nTHCudaCheck FAIL file=/Users/qbx2/pytorch/torch/lib/THCUNN/generic/TemporalUpSamplingNearest.cu line=97 error=77 : an illegal memory access was encountered\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 259, in __call__\n    result = self.forward(*input, **kwargs)\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/upsampling.py\", line 80, in forward\n    return F.upsample(input, self.size, self.scale_factor, self.mode)\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/functional.py\", line 1005, in upsample\n    return _functions.thnn.UpsamplingNearest1d.apply(input, _single(size), scale_factor)\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/_functions/thnn/upsampling.py\", line 66, in forward\n    ctx.scale_factor\nRuntimeError: cuda runtime error (77) : an illegal memory access was encountered at /Users/qbx2/pytorch/torch/lib/THCUNN/generic/TemporalUpSamplingNearest.cu:97\n\nTested on Linux with pytorch 0.2.0+72f6b5a & GTX 750 and Mac OS X Sierra with pytorch 0.2.0+c74f7d8 & GT 750M\nIt seems to be work well with mode=\u2018linear\u2019 and memory of gpu is larger than 1GB.\nI think it\u2019s something wrong.\n\nComment: successfully reproduced using the above snippet on master.", "body": "Original post at: https://discuss.pytorch.org/t/illegal-memory-access-when-upsampling-with-cuda/8570\r\nOriginal post content:\r\n\r\ncode:\r\n```\r\nimport torch\r\nimport torch.nn as nn\r\nx=torch.randn(16, 32, 320).cuda()\r\nnn.Upsample(scale_factor=4)(x)\r\n```\r\n```\r\n$ CU_LAUNCH_BLOCKING=1 python\r\n>>> import torch\r\n>>> import torch.nn as nn\r\n>>> torch.__version__\r\n'0.2.0+c74f7d8'\r\n>>> x=torch.randn(16, 32, 320).cuda()\r\n>>> nn.Upsample(scale_factor=4)(x)\r\nTHCudaCheck FAIL file=/Users/qbx2/pytorch/torch/lib/THCUNN/generic/TemporalUpSamplingNearest.cu line=97 error=77 : an illegal memory access was encountered\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 259, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/modules/upsampling.py\", line 80, in forward\r\n    return F.upsample(input, self.size, self.scale_factor, self.mode)\r\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/functional.py\", line 1005, in upsample\r\n    return _functions.thnn.UpsamplingNearest1d.apply(input, _single(size), scale_factor)\r\n  File \"/usr/local/lib/python3.6/site-packages/torch/nn/_functions/thnn/upsampling.py\", line 66, in forward\r\n    ctx.scale_factor\r\nRuntimeError: cuda runtime error (77) : an illegal memory access was encountered at /Users/qbx2/pytorch/torch/lib/THCUNN/generic/TemporalUpSamplingNearest.cu:97\r\n```\r\nTested on Linux with pytorch 0.2.0+72f6b5a & GTX 750 and Mac OS X Sierra with pytorch 0.2.0+c74f7d8 & GT 750M\r\nIt seems to be work well with mode=\u2018linear\u2019 and memory of gpu is larger than 1GB.\r\nI think it\u2019s something wrong.\r\n\r\n\r\n\r\n---------------------------\r\n\r\nComment: successfully reproduced using the above snippet on master.\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/756", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/756/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/756/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/756/events", "html_url": "https://github.com/pytorch/pytorch/issues/756", "id": 207985989, "node_id": "MDU6SXNzdWUyMDc5ODU5ODk=", "number": 756, "title": "torch.sum(Variable(...)) returns Variable(torch.ByteTensor) and overflows", "user": {"login": "rtqichen", "id": 3375899, "node_id": "MDQ6VXNlcjMzNzU4OTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/3375899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rtqichen", "html_url": "https://github.com/rtqichen", "followers_url": "https://api.github.com/users/rtqichen/followers", "following_url": "https://api.github.com/users/rtqichen/following{/other_user}", "gists_url": "https://api.github.com/users/rtqichen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rtqichen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rtqichen/subscriptions", "organizations_url": "https://api.github.com/users/rtqichen/orgs", "repos_url": "https://api.github.com/users/rtqichen/repos", "events_url": "https://api.github.com/users/rtqichen/events{/privacy}", "received_events_url": "https://api.github.com/users/rtqichen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-02-16T01:32:21Z", "updated_at": "2017-02-16T16:31:59Z", "closed_at": "2017-02-16T16:31:59Z", "author_association": "NONE", "body_html": "<p>Came across this randomly while testing code:</p>\n<pre><code>a = Variable(torch.randn(1,4,16,10))\nb = Variable(torch.randn(1,4,16,10))\na[:,2:] = b[:,2:]\ntorch.sum(a==b)\n</code></pre>\n<p>gives an incorrect value</p>\n<pre><code>Variable containing:\n 64\n[torch.ByteTensor of size 1]\n</code></pre>\n<p>while <code>torch.sum((a==b).data)</code> returns <code>320</code></p>\n<p>Likely caused by overflow of torch.ByteTensor. It seems weird to me ByteTensor is being used instead of IntTensor or LongTensor.</p>\n<p>Edit: Just realized it's because a==b returns a ByteTensor. I guess there's really no use case for using Variable here anyway.</p>", "body_text": "Came across this randomly while testing code:\na = Variable(torch.randn(1,4,16,10))\nb = Variable(torch.randn(1,4,16,10))\na[:,2:] = b[:,2:]\ntorch.sum(a==b)\n\ngives an incorrect value\nVariable containing:\n 64\n[torch.ByteTensor of size 1]\n\nwhile torch.sum((a==b).data) returns 320\nLikely caused by overflow of torch.ByteTensor. It seems weird to me ByteTensor is being used instead of IntTensor or LongTensor.\nEdit: Just realized it's because a==b returns a ByteTensor. I guess there's really no use case for using Variable here anyway.", "body": "Came across this randomly while testing code:\r\n```\r\na = Variable(torch.randn(1,4,16,10))\r\nb = Variable(torch.randn(1,4,16,10))\r\na[:,2:] = b[:,2:]\r\ntorch.sum(a==b)\r\n```\r\ngives an incorrect value\r\n```\r\nVariable containing:\r\n 64\r\n[torch.ByteTensor of size 1]\r\n```\r\nwhile `torch.sum((a==b).data)` returns `320`\r\n\r\nLikely caused by overflow of torch.ByteTensor. It seems weird to me ByteTensor is being used instead of IntTensor or LongTensor.\r\n\r\nEdit: Just realized it's because a==b returns a ByteTensor. I guess there's really no use case for using Variable here anyway."}
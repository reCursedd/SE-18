{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/235478646", "pull_request_review_id": 177354696, "id": 235478646, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTQ3ODY0Ng==", "diff_hunk": "@@ -94,14 +132,38 @@ struct AT_CUDA_API CUDAStream {\n  * (defaulting to the current CUDA stream.)\n  */\n CAFFE2_API CUDAStream\n-getStreamFromPool(const bool isHighPriority = false, int64_t device = -1);\n+getStreamFromPool(const bool isHighPriority = false, DeviceIndex device = -1);\n \n-CAFFE2_API CUDAStream getDefaultCUDAStream(int64_t device = -1);\n-CAFFE2_API CUDAStream getCurrentCUDAStream(int64_t device = -1);\n+/**\n+ * Get the default CUDA stream, for the passed CUDA device, or for the\n+ * current device if no device index is passed.  The default stream is\n+ * where most computation occurs when you aren't explicitly using\n+ * streams.\n+ */\n+CAFFE2_API CUDAStream getDefaultCUDAStream(DeviceIndex device_index = -1);\n+\n+/**\n+ * Get the current CUDA stream, for the passed CUDA device, or for the\n+ * current device if no device index is passed.  The current CUDA stream\n+ * will usually be the default CUDA stream for the device, but it may\n+ * be different if someone called 'setCurrentCUDAStream' or used 'StreamGuard'\n+ * or 'CUDAStreamGuard'.\n+ */\n+CAFFE2_API CUDAStream getCurrentCUDAStream(DeviceIndex device_index = -1);\n \n+/**", "path": "aten/src/ATen/cuda/CUDAStream.h", "position": 102, "original_position": 102, "commit_id": "20c6bda20f05615e36211847ec98ac46b1a848e6", "original_commit_id": "e33d89625ddb38dc847a7c53eb640341c445b351", "user": {"login": "mruberry", "id": 38511765, "node_id": "MDQ6VXNlcjM4NTExNzY1", "avatar_url": "https://avatars3.githubusercontent.com/u/38511765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mruberry", "html_url": "https://github.com/mruberry", "followers_url": "https://api.github.com/users/mruberry/followers", "following_url": "https://api.github.com/users/mruberry/following{/other_user}", "gists_url": "https://api.github.com/users/mruberry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mruberry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mruberry/subscriptions", "organizations_url": "https://api.github.com/users/mruberry/orgs", "repos_url": "https://api.github.com/users/mruberry/repos", "events_url": "https://api.github.com/users/mruberry/events{/privacy}", "received_events_url": "https://api.github.com/users/mruberry/received_events", "type": "User", "site_admin": false}, "body": "This is an A+ comment. I often wondered if \"setCurrentCUDAStream\" should also switch you to the stream you're setting? Historically this function took the device you were setting the stream on, but you have to set the stream on the device it was created on, so the extra argument was perhaps clarifying but logically unnecessary. ", "created_at": "2018-11-21T17:27:16Z", "updated_at": "2018-11-23T15:55:20Z", "html_url": "https://github.com/pytorch/pytorch/pull/14247#discussion_r235478646", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/14247", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/235478646"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/14247#discussion_r235478646"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/14247"}}, "body_html": "<p>This is an A+ comment. I often wondered if \"setCurrentCUDAStream\" should also switch you to the stream you're setting? Historically this function took the device you were setting the stream on, but you have to set the stream on the device it was created on, so the extra argument was perhaps clarifying but logically unnecessary.</p>", "body_text": "This is an A+ comment. I often wondered if \"setCurrentCUDAStream\" should also switch you to the stream you're setting? Historically this function took the device you were setting the stream on, but you have to set the stream on the device it was created on, so the extra argument was perhaps clarifying but logically unnecessary."}
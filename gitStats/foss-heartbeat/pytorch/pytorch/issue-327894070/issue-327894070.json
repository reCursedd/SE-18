{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7962", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7962/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7962/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7962/events", "html_url": "https://github.com/pytorch/pytorch/issues/7962", "id": 327894070, "node_id": "MDU6SXNzdWUzMjc4OTQwNzA=", "number": 7962, "title": "[Caffe2] Windows build errors in generated file caffe2.pb.h", "user": {"login": "skelleher", "id": 814866, "node_id": "MDQ6VXNlcjgxNDg2Ng==", "avatar_url": "https://avatars0.githubusercontent.com/u/814866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skelleher", "html_url": "https://github.com/skelleher", "followers_url": "https://api.github.com/users/skelleher/followers", "following_url": "https://api.github.com/users/skelleher/following{/other_user}", "gists_url": "https://api.github.com/users/skelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/skelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skelleher/subscriptions", "organizations_url": "https://api.github.com/users/skelleher/orgs", "repos_url": "https://api.github.com/users/skelleher/repos", "events_url": "https://api.github.com/users/skelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/skelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-05-30T20:50:27Z", "updated_at": "2018-09-07T03:36:44Z", "closed_at": "2018-09-07T03:36:44Z", "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>Windows build of caffe2 fails.  Compiler errors in generated protobuf file caffe2.pb.h:</p>\n<p><code>D:/code/pytorch/build\\caffe2/proto/caffe2.pb.h(229): error : member \"caffe2::TensorProto_Segment::kIndexInFileMessages\" may not be initialized [D:\\ code\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]</code></p>\n<p>The generated header looks OK:</p>\n<pre><code>class CAFFE2_API TensorProto_Segment : public ::google::protobuf::Message /* @@protoc_insertion_point(class_definition:caffe2.TensorProto.Segment) */ {\n public:\n  TensorProto_Segment();\n  virtual ~TensorProto_Segment();\n\n  //// ... snip .... ////\n\n  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =\n    0;\n}\n\n</code></pre>\n<p>Master branch git hash <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/9f21ec7ca27d82e080f09f6a740fbcb1114eff43/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/9f21ec7ca27d82e080f09f6a740fbcb1114eff43\"><tt>9f21ec7</tt></a> .</p>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2:<br>\nCaffe2</li>\n<li>How you installed PyTorch (conda, pip, source):<br>\nDid not install PyTorch, as I am building from source.</li>\n<li>Build command you used (if compiling from source):<br>\nOpened Developer Command Prompt for VS 2017 (but see below)<br>\nActivated Python 2.7 environment<br>\nRan cmake-gui - selected \"Visual Studio 14 2015 Win64\" generator<br>\nConfigured Cmake options (mostly use defaults; see below)<br>\nRan scripts\\build_windows.bat</li>\n<li>OS:<br>\nWindows 10</li>\n<li>PyTorch version:<br>\nN/A</li>\n<li>Python version:<br>\nAnaconda 2.7.14 64-bit</li>\n<li>CUDA/cuDNN version:<br>\nCUDA 9.1 / cuDNN 7.1.3</li>\n<li>GPU models and configuration:<br>\nGeForce GTX 980 Ti - 6 GB</li>\n<li>GCC version (if compiling from source):<br>\nN/A.  VS 2017 (but using the included VS 2015 toolchain).</li>\n<li>CMake version:<br>\n3.10.3</li>\n<li>Versions of any other relevant libraries:</li>\n</ul>", "body_text": "Issue description\nWindows build of caffe2 fails.  Compiler errors in generated protobuf file caffe2.pb.h:\nD:/code/pytorch/build\\caffe2/proto/caffe2.pb.h(229): error : member \"caffe2::TensorProto_Segment::kIndexInFileMessages\" may not be initialized [D:\\ code\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\nThe generated header looks OK:\nclass CAFFE2_API TensorProto_Segment : public ::google::protobuf::Message /* @@protoc_insertion_point(class_definition:caffe2.TensorProto.Segment) */ {\n public:\n  TensorProto_Segment();\n  virtual ~TensorProto_Segment();\n\n  //// ... snip .... ////\n\n  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =\n    0;\n}\n\n\nMaster branch git hash 9f21ec7 .\nSystem Info\n\nPyTorch or Caffe2:\nCaffe2\nHow you installed PyTorch (conda, pip, source):\nDid not install PyTorch, as I am building from source.\nBuild command you used (if compiling from source):\nOpened Developer Command Prompt for VS 2017 (but see below)\nActivated Python 2.7 environment\nRan cmake-gui - selected \"Visual Studio 14 2015 Win64\" generator\nConfigured Cmake options (mostly use defaults; see below)\nRan scripts\\build_windows.bat\nOS:\nWindows 10\nPyTorch version:\nN/A\nPython version:\nAnaconda 2.7.14 64-bit\nCUDA/cuDNN version:\nCUDA 9.1 / cuDNN 7.1.3\nGPU models and configuration:\nGeForce GTX 980 Ti - 6 GB\nGCC version (if compiling from source):\nN/A.  VS 2017 (but using the included VS 2015 toolchain).\nCMake version:\n3.10.3\nVersions of any other relevant libraries:", "body": "## Issue description\r\nWindows build of caffe2 fails.  Compiler errors in generated protobuf file caffe2.pb.h:\r\n\r\n`D:/code/pytorch/build\\caffe2/proto/caffe2.pb.h(229): error : member \"caffe2::TensorProto_Segment::kIndexInFileMessages\" may not be initialized [D:\\\r\n       code\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]`\r\n\r\nThe generated header looks OK:\r\n\r\n```\r\nclass CAFFE2_API TensorProto_Segment : public ::google::protobuf::Message /* @@protoc_insertion_point(class_definition:caffe2.TensorProto.Segment) */ {\r\n public:\r\n  TensorProto_Segment();\r\n  virtual ~TensorProto_Segment();\r\n\r\n  //// ... snip .... ////\r\n\r\n  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =\r\n    0;\r\n}\r\n\r\n```\r\nMaster branch git hash 9f21ec7ca27d82e080f09f6a740fbcb1114eff43 . \r\n\r\n## System Info\r\n- PyTorch or Caffe2:\r\nCaffe2\r\n- How you installed PyTorch (conda, pip, source):\r\nDid not install PyTorch, as I am building from source.\r\n- Build command you used (if compiling from source):\r\nOpened Developer Command Prompt for VS 2017 (but see below)\r\nActivated Python 2.7 environment\r\nRan cmake-gui - selected \"Visual Studio 14 2015 Win64\" generator\r\nConfigured Cmake options (mostly use defaults; see below)\r\nRan scripts\\build_windows.bat\r\n- OS:\r\nWindows 10\r\n- PyTorch version:\r\nN/A\r\n- Python version:\r\nAnaconda 2.7.14 64-bit\r\n- CUDA/cuDNN version:\r\nCUDA 9.1 / cuDNN 7.1.3\r\n- GPU models and configuration:\r\nGeForce GTX 980 Ti - 6 GB\r\n- GCC version (if compiling from source):\r\nN/A.  VS 2017 (but using the included VS 2015 toolchain).\r\n- CMake version:\r\n3.10.3\r\n- Versions of any other relevant libraries:\r\n"}
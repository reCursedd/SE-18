{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/214466408", "pull_request_review_id": 151537981, "id": 214466408, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNDQ2NjQwOA==", "diff_hunk": "@@ -2308,30 +2308,108 @@ void Axpy<float16, CUDAContext>(\n }\n \n namespace {\n-template <typename T>\n-__global__ void\n-AxpbyKernel(const int n, const T a, const T* x, const T b, T* y) {\n-  CUDA_1D_KERNEL_LOOP(index, n) {\n-    y[index] = x[index] * a + y[index] * b;\n+\n+template <typename TCoeff, typename TData>\n+__global__ void AxpbyCUDAKernel(\n+    const int N,\n+    const TCoeff a,\n+    const TData* x,\n+    const TCoeff b,\n+    TData* y) {\n+  CUDA_1D_KERNEL_LOOP(i, N) {\n+#if __CUDA_ARCH__ >= 350\n+    y[i] = __ldg(x + i) * a + y[i] * b;\n+#else\n+    y[i] = x[i] * a + y[i] * b;\n+#endif\n   }\n }\n-} // namespace\n \n template <>\n-void Axpby<float, CUDAContext>(\n-    const int n,\n+__global__ void AxpbyCUDAKernel<float, float16>(\n+    const int N,\n     const float a,", "path": "caffe2/utils/math_gpu.cu", "position": 32, "original_position": 32, "commit_id": "c34a6472050cfcbbbf58b94dc8fa6305feee825a", "original_commit_id": "495264017a26064efaa100ceb0be90f47bc52672", "user": {"login": "houseroad", "id": 30275821, "node_id": "MDQ6VXNlcjMwMjc1ODIx", "avatar_url": "https://avatars0.githubusercontent.com/u/30275821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houseroad", "html_url": "https://github.com/houseroad", "followers_url": "https://api.github.com/users/houseroad/followers", "following_url": "https://api.github.com/users/houseroad/following{/other_user}", "gists_url": "https://api.github.com/users/houseroad/gists{/gist_id}", "starred_url": "https://api.github.com/users/houseroad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houseroad/subscriptions", "organizations_url": "https://api.github.com/users/houseroad/orgs", "repos_url": "https://api.github.com/users/houseroad/repos", "events_url": "https://api.github.com/users/houseroad/events{/privacy}", "received_events_url": "https://api.github.com/users/houseroad/received_events", "type": "User", "site_admin": false}, "body": "float a, float16 x, and float b... ", "created_at": "2018-08-31T20:22:49Z", "updated_at": "2018-11-23T15:50:29Z", "html_url": "https://github.com/pytorch/pytorch/pull/11049#discussion_r214466408", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/11049", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/214466408"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/11049#discussion_r214466408"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/11049"}}, "body_html": "<p>float a, float16 x, and float b...</p>", "body_text": "float a, float16 x, and float b..."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10088", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10088/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10088/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10088/events", "html_url": "https://github.com/pytorch/pytorch/issues/10088", "id": 346344105, "node_id": "MDU6SXNzdWUzNDYzNDQxMDU=", "number": 10088, "title": "[Caffe2]  Implementing CoordConv layer", "user": {"login": "dmasmont", "id": 26934529, "node_id": "MDQ6VXNlcjI2OTM0NTI5", "avatar_url": "https://avatars0.githubusercontent.com/u/26934529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmasmont", "html_url": "https://github.com/dmasmont", "followers_url": "https://api.github.com/users/dmasmont/followers", "following_url": "https://api.github.com/users/dmasmont/following{/other_user}", "gists_url": "https://api.github.com/users/dmasmont/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmasmont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmasmont/subscriptions", "organizations_url": "https://api.github.com/users/dmasmont/orgs", "repos_url": "https://api.github.com/users/dmasmont/repos", "events_url": "https://api.github.com/users/dmasmont/events{/privacy}", "received_events_url": "https://api.github.com/users/dmasmont/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-31T20:23:21Z", "updated_at": "2018-08-02T16:23:19Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>I am trying to implement a CoordConv layer (<a href=\"https://arxiv.org/pdf/1807.03247.pdf\" rel=\"nofollow\">https://arxiv.org/pdf/1807.03247.pdf</a>) in caffe2 but I am having problems to concatenate a Tensor due to shape mismatch.</p>\n<p>The CoordConv layer consist in concatenating the input blob with two tensors with values ranging from -1 to 1 (that specify the x,y coordinates) followed by a Conv layer.</p>\n<p>What is the best approach to create those vectors? As the input blob size will change every time (both dimensions and batch size), it needs to be generated at runtime. For example, if the input blob is 2x256x10x10 (NCHW), I want to generate two vectors of 2x1x10x10 and concatenate them so the output is 2x258x10x10</p>\n<p>I have unsuccessfully tried to generate the vectors using GivenTensorFill() and ResizeLike().</p>\n<p>Can this be implemented by combining already existing layers? Or it is required to implement a new layer? Has anybody implemented the layer?</p>\n<p>Thanks</p>", "body_text": "Issue description\nI am trying to implement a CoordConv layer (https://arxiv.org/pdf/1807.03247.pdf) in caffe2 but I am having problems to concatenate a Tensor due to shape mismatch.\nThe CoordConv layer consist in concatenating the input blob with two tensors with values ranging from -1 to 1 (that specify the x,y coordinates) followed by a Conv layer.\nWhat is the best approach to create those vectors? As the input blob size will change every time (both dimensions and batch size), it needs to be generated at runtime. For example, if the input blob is 2x256x10x10 (NCHW), I want to generate two vectors of 2x1x10x10 and concatenate them so the output is 2x258x10x10\nI have unsuccessfully tried to generate the vectors using GivenTensorFill() and ResizeLike().\nCan this be implemented by combining already existing layers? Or it is required to implement a new layer? Has anybody implemented the layer?\nThanks", "body": "## Issue description\r\n\r\nI am trying to implement a CoordConv layer (https://arxiv.org/pdf/1807.03247.pdf) in caffe2 but I am having problems to concatenate a Tensor due to shape mismatch.\r\n\r\nThe CoordConv layer consist in concatenating the input blob with two tensors with values ranging from -1 to 1 (that specify the x,y coordinates) followed by a Conv layer.\r\n\r\nWhat is the best approach to create those vectors? As the input blob size will change every time (both dimensions and batch size), it needs to be generated at runtime. For example, if the input blob is 2x256x10x10 (NCHW), I want to generate two vectors of 2x1x10x10 and concatenate them so the output is 2x258x10x10 \r\n\r\nI have unsuccessfully tried to generate the vectors using GivenTensorFill() and ResizeLike(). \r\n\r\nCan this be implemented by combining already existing layers? Or it is required to implement a new layer? Has anybody implemented the layer?\r\n\r\nThanks"}
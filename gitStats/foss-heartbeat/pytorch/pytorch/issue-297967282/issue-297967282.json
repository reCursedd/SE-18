{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5281", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5281/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5281/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5281/events", "html_url": "https://github.com/pytorch/pytorch/issues/5281", "id": 297967282, "node_id": "MDU6SXNzdWUyOTc5NjcyODI=", "number": 5281, "title": "test_hooks_cpp ASAN detected memory corruption", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-17T01:37:58Z", "updated_at": "2018-02-20T01:41:26Z", "closed_at": "2018-02-20T01:41:26Z", "author_association": "CONTRIBUTOR", "body_html": "<pre><code>[~/Dev/pytorch-asan] ASAN_SYMBOLIZER_PATH=/usr/bin/llvm-symbolizer ASAN_OPTIONS=symbolize=1 python test/test_autograd.py  TestAutograd.test_hooks_cpp                               \n=================================================================\n==1620364== ERROR: AddressSanitizer: global-buffer-overflow on address 0x7f6a7b4ae99c at pc 0x7f6a86545a0b bp 0x7ffee2ed7830 sp 0x7ffee2ed7828\nREAD of size 4 at 0x7f6a7b4ae99c thread T0\n    #0 0x7f6a86545a0a in torch::autograd::Variable::output_nr() const /data/users/ezyang/pytorch-asan/torch/csrc/autograd/variable.h:498\n    #1 0x7f6a8691996b in torch::autograd::SavedVariable::SavedVariable(torch::autograd::Variable const&amp;, bool) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/save\nd_variable.cpp:17\n    #2 0x7f6a86ab2353 in torch::autograd::VariableType::thnn_batch_norm_forward(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tenso\nr const&amp;, bool, double, double) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:16613\n    #3 0x7f6a6b1288b6 in at::Type::thnn_batch_norm(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, bool, double, doubl\ne) const /home/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Type.cpp:2872\n    #4 0x7f6a86ab110b in torch::autograd::VariableType::thnn_batch_norm(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;\n, bool, double, double) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:16561\n    #5 0x7f6a6ac3a760 in at::thnn_batch_norm(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, bool, double, double) /ho\nme/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Functions.h:2681\n    #6 0x7f6a6ac3ada0 in at::native::batch_norm(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, bool, double, double, \nbool) /home/ezyang/Dev/pytorch-asan/aten/src/ATen/native/BatchNorm.cpp:57\n    #7 0x7f6a6b12ba53 in at::Type::batch_norm(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, bool, double, double, bo\nol) const /home/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Type.cpp:3061\n    #8 0x7f6a86ad9cb7 in torch::autograd::VariableType::batch_norm(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, boo\nl, double, double, bool) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:18052\n    #9 0x7f6a86cea171 in at::batch_norm(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, bool, double, double, bool) /d\nata/users/ezyang/pytorch-asan/torch/lib/tmp_install/include/ATen/Functions.h:2849\n    #10 0x7f6a86dbf015 in torch::autograd::dispatch_batch_norm(at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, at::Tensor const&amp;, bool, d\nouble, double, bool) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/python_torch_functions_dispatch.h:755\n    #11 0x7f6a86d1a227 in torch::autograd::THPVariable_batch_norm(_object*, _object*, _object*) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/python_to\nrch_functions.cpp:1392\n    #12 0x55629ea72fd3 in _PyCFunction_FastCallDict (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x10efd3)\n    #13 0x55629eb00beb in call_function (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x19cbeb)\n    #14 0x55629eb25199 in _PyEval_EvalFrameDefault (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x1c1199)\n    #15 0x55629eaf99a5 in _PyEval_EvalCodeWithName (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x1959a5)\n</code></pre>", "body_text": "[~/Dev/pytorch-asan] ASAN_SYMBOLIZER_PATH=/usr/bin/llvm-symbolizer ASAN_OPTIONS=symbolize=1 python test/test_autograd.py  TestAutograd.test_hooks_cpp                               \n=================================================================\n==1620364== ERROR: AddressSanitizer: global-buffer-overflow on address 0x7f6a7b4ae99c at pc 0x7f6a86545a0b bp 0x7ffee2ed7830 sp 0x7ffee2ed7828\nREAD of size 4 at 0x7f6a7b4ae99c thread T0\n    #0 0x7f6a86545a0a in torch::autograd::Variable::output_nr() const /data/users/ezyang/pytorch-asan/torch/csrc/autograd/variable.h:498\n    #1 0x7f6a8691996b in torch::autograd::SavedVariable::SavedVariable(torch::autograd::Variable const&, bool) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/save\nd_variable.cpp:17\n    #2 0x7f6a86ab2353 in torch::autograd::VariableType::thnn_batch_norm_forward(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tenso\nr const&, bool, double, double) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:16613\n    #3 0x7f6a6b1288b6 in at::Type::thnn_batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, doubl\ne) const /home/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Type.cpp:2872\n    #4 0x7f6a86ab110b in torch::autograd::VariableType::thnn_batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&\n, bool, double, double) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:16561\n    #5 0x7f6a6ac3a760 in at::thnn_batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, double) /ho\nme/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Functions.h:2681\n    #6 0x7f6a6ac3ada0 in at::native::batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, double, \nbool) /home/ezyang/Dev/pytorch-asan/aten/src/ATen/native/BatchNorm.cpp:57\n    #7 0x7f6a6b12ba53 in at::Type::batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, double, bo\nol) const /home/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Type.cpp:3061\n    #8 0x7f6a86ad9cb7 in torch::autograd::VariableType::batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, boo\nl, double, double, bool) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:18052\n    #9 0x7f6a86cea171 in at::batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, double, bool) /d\nata/users/ezyang/pytorch-asan/torch/lib/tmp_install/include/ATen/Functions.h:2849\n    #10 0x7f6a86dbf015 in torch::autograd::dispatch_batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, d\nouble, double, bool) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/python_torch_functions_dispatch.h:755\n    #11 0x7f6a86d1a227 in torch::autograd::THPVariable_batch_norm(_object*, _object*, _object*) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/python_to\nrch_functions.cpp:1392\n    #12 0x55629ea72fd3 in _PyCFunction_FastCallDict (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x10efd3)\n    #13 0x55629eb00beb in call_function (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x19cbeb)\n    #14 0x55629eb25199 in _PyEval_EvalFrameDefault (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x1c1199)\n    #15 0x55629eaf99a5 in _PyEval_EvalCodeWithName (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x1959a5)", "body": "```\r\n[~/Dev/pytorch-asan] ASAN_SYMBOLIZER_PATH=/usr/bin/llvm-symbolizer ASAN_OPTIONS=symbolize=1 python test/test_autograd.py  TestAutograd.test_hooks_cpp                               \r\n=================================================================\r\n==1620364== ERROR: AddressSanitizer: global-buffer-overflow on address 0x7f6a7b4ae99c at pc 0x7f6a86545a0b bp 0x7ffee2ed7830 sp 0x7ffee2ed7828\r\nREAD of size 4 at 0x7f6a7b4ae99c thread T0\r\n    #0 0x7f6a86545a0a in torch::autograd::Variable::output_nr() const /data/users/ezyang/pytorch-asan/torch/csrc/autograd/variable.h:498\r\n    #1 0x7f6a8691996b in torch::autograd::SavedVariable::SavedVariable(torch::autograd::Variable const&, bool) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/save\r\nd_variable.cpp:17\r\n    #2 0x7f6a86ab2353 in torch::autograd::VariableType::thnn_batch_norm_forward(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tenso\r\nr const&, bool, double, double) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:16613\r\n    #3 0x7f6a6b1288b6 in at::Type::thnn_batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, doubl\r\ne) const /home/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Type.cpp:2872\r\n    #4 0x7f6a86ab110b in torch::autograd::VariableType::thnn_batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&\r\n, bool, double, double) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:16561\r\n    #5 0x7f6a6ac3a760 in at::thnn_batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, double) /ho\r\nme/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Functions.h:2681\r\n    #6 0x7f6a6ac3ada0 in at::native::batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, double, \r\nbool) /home/ezyang/Dev/pytorch-asan/aten/src/ATen/native/BatchNorm.cpp:57\r\n    #7 0x7f6a6b12ba53 in at::Type::batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, double, bo\r\nol) const /home/ezyang/Dev/pytorch-asan/torch/lib/build/aten/src/ATen/ATen/Type.cpp:3061\r\n    #8 0x7f6a86ad9cb7 in torch::autograd::VariableType::batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, boo\r\nl, double, double, bool) const /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/VariableType.cpp:18052\r\n    #9 0x7f6a86cea171 in at::batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, double, double, bool) /d\r\nata/users/ezyang/pytorch-asan/torch/lib/tmp_install/include/ATen/Functions.h:2849\r\n    #10 0x7f6a86dbf015 in torch::autograd::dispatch_batch_norm(at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, at::Tensor const&, bool, d\r\nouble, double, bool) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/python_torch_functions_dispatch.h:755\r\n    #11 0x7f6a86d1a227 in torch::autograd::THPVariable_batch_norm(_object*, _object*, _object*) /home/ezyang/Dev/pytorch-asan/torch/csrc/autograd/generated/python_to\r\nrch_functions.cpp:1392\r\n    #12 0x55629ea72fd3 in _PyCFunction_FastCallDict (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x10efd3)\r\n    #13 0x55629eb00beb in call_function (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x19cbeb)\r\n    #14 0x55629eb25199 in _PyEval_EvalFrameDefault (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x1c1199)\r\n    #15 0x55629eaf99a5 in _PyEval_EvalCodeWithName (/data/users/ezyang/pytorch-asan-env/bin/python3.6+0x1959a5)\r\n```"}
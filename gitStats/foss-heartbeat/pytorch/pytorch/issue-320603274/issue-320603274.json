{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7329", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7329/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7329/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7329/events", "html_url": "https://github.com/pytorch/pytorch/issues/7329", "id": 320603274, "node_id": "MDU6SXNzdWUzMjA2MDMyNzQ=", "number": 7329, "title": "pytorch 0.4.  RuntimeError: one of the variables needed for gradient computation has been modified by an inplace operation", "user": {"login": "ofirlevy", "id": 15832766, "node_id": "MDQ6VXNlcjE1ODMyNzY2", "avatar_url": "https://avatars2.githubusercontent.com/u/15832766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ofirlevy", "html_url": "https://github.com/ofirlevy", "followers_url": "https://api.github.com/users/ofirlevy/followers", "following_url": "https://api.github.com/users/ofirlevy/following{/other_user}", "gists_url": "https://api.github.com/users/ofirlevy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ofirlevy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ofirlevy/subscriptions", "organizations_url": "https://api.github.com/users/ofirlevy/orgs", "repos_url": "https://api.github.com/users/ofirlevy/repos", "events_url": "https://api.github.com/users/ofirlevy/events{/privacy}", "received_events_url": "https://api.github.com/users/ofirlevy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-05-06T15:42:46Z", "updated_at": "2018-08-23T05:38:00Z", "closed_at": "2018-05-17T21:48:50Z", "author_association": "NONE", "body_html": "<p>The MobileNet V2. repo located <a href=\"https://github.com/MG2033/MobileNet-V2\">here</a> is running flawlessly on pytorch 0.3 but failed on the new 0.4 version with</p>\n<pre><code>RuntimeError: one of the variables needed for gradient computation has been modified by an inplace operation. \n</code></pre>\n<p>when it calls backward().</p>\n<p>I followed the migration guide but still couldn't point my finger on the problematic code.  I would highly appreciate your help</p>\n<p>The train code:</p>\n<pre><code>for data, target in tqdm_batch:            \n    data, target = data.cuda(), target.cuda()                \n    # Forward pass\n    output = self.model(data)\n    cur_loss= self.loss(output, target)\n   # Optimization step\n    self.optimizer.zero_grad()\n    cur_loss.backward()\n    self.optimizer.step()\n</code></pre>\n<p>instead of placing the network here It is more convenient to look at it in the github: <a href=\"https://github.com/MG2033/MobileNet-V2/blob/master/model.py\">network</a> and its <a href=\"https://github.com/MG2033/MobileNet-V2/blob/master/layers.py\">layers</a></p>", "body_text": "The MobileNet V2. repo located here is running flawlessly on pytorch 0.3 but failed on the new 0.4 version with\nRuntimeError: one of the variables needed for gradient computation has been modified by an inplace operation. \n\nwhen it calls backward().\nI followed the migration guide but still couldn't point my finger on the problematic code.  I would highly appreciate your help\nThe train code:\nfor data, target in tqdm_batch:            \n    data, target = data.cuda(), target.cuda()                \n    # Forward pass\n    output = self.model(data)\n    cur_loss= self.loss(output, target)\n   # Optimization step\n    self.optimizer.zero_grad()\n    cur_loss.backward()\n    self.optimizer.step()\n\ninstead of placing the network here It is more convenient to look at it in the github: network and its layers", "body": "The MobileNet V2. repo located [here](https://github.com/MG2033/MobileNet-V2) is running flawlessly on pytorch 0.3 but failed on the new 0.4 version with \r\n```\r\nRuntimeError: one of the variables needed for gradient computation has been modified by an inplace operation. \r\n```\r\nwhen it calls backward().\r\n\r\nI followed the migration guide but still couldn't point my finger on the problematic code.  I would highly appreciate your help\r\n\r\nThe train code:\r\n```\r\nfor data, target in tqdm_batch:            \r\n    data, target = data.cuda(), target.cuda()                \r\n    # Forward pass\r\n    output = self.model(data)\r\n    cur_loss= self.loss(output, target)\r\n   # Optimization step\r\n    self.optimizer.zero_grad()\r\n    cur_loss.backward()\r\n    self.optimizer.step()\r\n``` \r\n\r\ninstead of placing the network here It is more convenient to look at it in the github: [network](https://github.com/MG2033/MobileNet-V2/blob/master/model.py) and its [layers](https://github.com/MG2033/MobileNet-V2/blob/master/layers.py)"}
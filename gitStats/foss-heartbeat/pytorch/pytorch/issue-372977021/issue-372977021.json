{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12983", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12983/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12983/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12983/events", "html_url": "https://github.com/pytorch/pytorch/issues/12983", "id": 372977021, "node_id": "MDU6SXNzdWUzNzI5NzcwMjE=", "number": 12983, "title": "Fail to Run Caffe2 with Successful Build: This caffe2 python run does not have GPU support", "user": {"login": "II-Matto", "id": 2261229, "node_id": "MDQ6VXNlcjIyNjEyMjk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2261229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/II-Matto", "html_url": "https://github.com/II-Matto", "followers_url": "https://api.github.com/users/II-Matto/followers", "following_url": "https://api.github.com/users/II-Matto/following{/other_user}", "gists_url": "https://api.github.com/users/II-Matto/gists{/gist_id}", "starred_url": "https://api.github.com/users/II-Matto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/II-Matto/subscriptions", "organizations_url": "https://api.github.com/users/II-Matto/orgs", "repos_url": "https://api.github.com/users/II-Matto/repos", "events_url": "https://api.github.com/users/II-Matto/events{/privacy}", "received_events_url": "https://api.github.com/users/II-Matto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-23T12:36:09Z", "updated_at": "2018-10-25T15:30:50Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>With the latest PyTorch code, I successfully built Caffe2. But when I tried the imports, it reported errors and exited. For <code>from caffe2.python import core</code>, it directly reported <code>Segmentation fault (core dumped)</code>.  For <code>from caffe2.python import workspace</code>, it reported the following warnings that I have never encountered before:</p>\n<pre><code>WARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nSegmentation fault (core dumped)\n</code></pre>\n<p>Note that I have been using an older version (~May, 2018) for a while, and everything worked just fine. I updated the code today (Oct 10, 2018) with <code>git pull --recurse-submodules</code> and <code>git submodule update --init --recursive</code>, as I need the updated operators. I tried deleting the previous \"build\" directory and regenerating all files, but the problem still exists.</p>\n<hr>\n<p>There are similar issues such as:</p>\n<ul>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"341776136\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/9484\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/9484/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/9484\">#9484</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"342893666\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/9604\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/9604/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/9604\">#9604</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"315787512\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/facebookresearch/video-nonlocal-net/issues/6\" data-hovercard-type=\"issue\" data-hovercard-url=\"/facebookresearch/video-nonlocal-net/issues/6/hovercard\" href=\"https://github.com/facebookresearch/video-nonlocal-net/issues/6\">facebookresearch/video-nonlocal-net#6</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"314741814\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/facebookresearch/Detectron/issues/370\" data-hovercard-type=\"issue\" data-hovercard-url=\"/facebookresearch/Detectron/issues/370/hovercard\" href=\"https://github.com/facebookresearch/Detectron/issues/370\">facebookresearch/Detectron#370</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"316598827\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/caffe2/caffe2/issues/2513\" data-hovercard-type=\"issue\" data-hovercard-url=\"/caffe2/caffe2/issues/2513/hovercard\" href=\"https://github.com/caffe2/caffe2/issues/2513\">caffe2/caffe2#2513</a></li>\n</ul>\n<p>The error messages reported in these issues usually contain extra information, e.g. complaining some *.so is not found. But no such complaining appeared in my case.</p>\n<h2>Code example</h2>\n<p>I built Caffe2 with the following commands:</p>\n<pre><code>mkdir build &amp;&amp; cd build\ncmake -DCMAKE_INSTALL_PREFIX=/home/&lt;user&gt;/lib/pytorch/caffe2 -DCUDNN_INCLUDE_DIR=/home/&lt;user&gt;/lib/cudnn-8.0-linux-x64-v7/include -DCUDNN_LIBRARY=/home/&lt;user&gt;/lib/cudnn-8.0-linux-x64-v7/lib64/libcudnn.so -DUSE_MPI=OFF -DUSE_FFMPEG=ON ..\nmake -j32\nmake install -j32\n</code></pre>\n<p>During the building process, everything looked just as normal.</p>\n<p>I set the environment variables with the following command:</p>\n<pre><code>export PATH=&lt;caffe2_install_dir&gt;/bin:${PATH}\nexport LD_LIBRARY_PATH=&lt;caffe2_install_dir&gt;/lib:${LD_LIBRARY_PATH}\nexport PYTHONPATH=&lt;pytorch_repo_dir&gt;/build:${PYTHONPATH}\n</code></pre>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: <strong>Caffe2</strong></li>\n<li>How you installed PyTorch (conda, pip, source): <strong>source</strong></li>\n<li>Build command you used (if compiling from source): <em>See above.</em></li>\n<li>OS: <strong>Ubuntu 14.04</strong></li>\n<li>PyTorch version: <strong>(latest clone)</strong></li>\n<li>Python version: <strong>Python 2.7.15 :: Anaconda, Inc.</strong></li>\n<li>CUDA/cuDNN version: <strong>8.0/cudnn-8.0-linux-x64-v7</strong></li>\n<li>GPU models and configuration: <strong>(Titan Xp)</strong></li>\n<li>GCC version (if compiling from source): <strong>5.4.0</strong></li>\n<li>CMake version: <strong>3.11.3</strong></li>\n<li>Versions of any other relevant libraries:</li>\n</ul>", "body_text": "Issue description\nWith the latest PyTorch code, I successfully built Caffe2. But when I tried the imports, it reported errors and exited. For from caffe2.python import core, it directly reported Segmentation fault (core dumped).  For from caffe2.python import workspace, it reported the following warnings that I have never encountered before:\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nSegmentation fault (core dumped)\n\nNote that I have been using an older version (~May, 2018) for a while, and everything worked just fine. I updated the code today (Oct 10, 2018) with git pull --recurse-submodules and git submodule update --init --recursive, as I need the updated operators. I tried deleting the previous \"build\" directory and regenerating all files, but the problem still exists.\n\nThere are similar issues such as:\n\n#9484\n#9604\nfacebookresearch/video-nonlocal-net#6\nfacebookresearch/Detectron#370\ncaffe2/caffe2#2513\n\nThe error messages reported in these issues usually contain extra information, e.g. complaining some *.so is not found. But no such complaining appeared in my case.\nCode example\nI built Caffe2 with the following commands:\nmkdir build && cd build\ncmake -DCMAKE_INSTALL_PREFIX=/home/<user>/lib/pytorch/caffe2 -DCUDNN_INCLUDE_DIR=/home/<user>/lib/cudnn-8.0-linux-x64-v7/include -DCUDNN_LIBRARY=/home/<user>/lib/cudnn-8.0-linux-x64-v7/lib64/libcudnn.so -DUSE_MPI=OFF -DUSE_FFMPEG=ON ..\nmake -j32\nmake install -j32\n\nDuring the building process, everything looked just as normal.\nI set the environment variables with the following command:\nexport PATH=<caffe2_install_dir>/bin:${PATH}\nexport LD_LIBRARY_PATH=<caffe2_install_dir>/lib:${LD_LIBRARY_PATH}\nexport PYTHONPATH=<pytorch_repo_dir>/build:${PYTHONPATH}\n\nSystem Info\n\nPyTorch or Caffe2: Caffe2\nHow you installed PyTorch (conda, pip, source): source\nBuild command you used (if compiling from source): See above.\nOS: Ubuntu 14.04\nPyTorch version: (latest clone)\nPython version: Python 2.7.15 :: Anaconda, Inc.\nCUDA/cuDNN version: 8.0/cudnn-8.0-linux-x64-v7\nGPU models and configuration: (Titan Xp)\nGCC version (if compiling from source): 5.4.0\nCMake version: 3.11.3\nVersions of any other relevant libraries:", "body": "## Issue description\r\n\r\nWith the latest PyTorch code, I successfully built Caffe2. But when I tried the imports, it reported errors and exited. For `from caffe2.python import core`, it directly reported `Segmentation fault (core dumped)`.  For `from caffe2.python import workspace`, it reported the following warnings that I have never encountered before:\r\n```\r\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\r\nSegmentation fault (core dumped)\r\n```\r\n\r\nNote that I have been using an older version (~May, 2018) for a while, and everything worked just fine. I updated the code today (Oct 10, 2018) with `git pull --recurse-submodules` and `git submodule update --init --recursive`, as I need the updated operators. I tried deleting the previous \"build\" directory and regenerating all files, but the problem still exists.\r\n\r\n---\r\nThere are similar issues such as:\r\n- https://github.com/pytorch/pytorch/issues/9484\r\n- https://github.com/pytorch/pytorch/issues/9604\r\n- https://github.com/facebookresearch/video-nonlocal-net/issues/6\r\n- https://github.com/facebookresearch/Detectron/issues/370\r\n- https://github.com/caffe2/caffe2/issues/2513\r\n\r\nThe error messages reported in these issues usually contain extra information, e.g. complaining some *.so is not found. But no such complaining appeared in my case.\r\n\r\n## Code example\r\n\r\nI built Caffe2 with the following commands:\r\n```\r\nmkdir build && cd build\r\ncmake -DCMAKE_INSTALL_PREFIX=/home/<user>/lib/pytorch/caffe2 -DCUDNN_INCLUDE_DIR=/home/<user>/lib/cudnn-8.0-linux-x64-v7/include -DCUDNN_LIBRARY=/home/<user>/lib/cudnn-8.0-linux-x64-v7/lib64/libcudnn.so -DUSE_MPI=OFF -DUSE_FFMPEG=ON ..\r\nmake -j32\r\nmake install -j32\r\n```\r\nDuring the building process, everything looked just as normal.\r\n\r\nI set the environment variables with the following command:\r\n```\r\nexport PATH=<caffe2_install_dir>/bin:${PATH}\r\nexport LD_LIBRARY_PATH=<caffe2_install_dir>/lib:${LD_LIBRARY_PATH}\r\nexport PYTHONPATH=<pytorch_repo_dir>/build:${PYTHONPATH}\r\n```\r\n\r\n## System Info\r\n\r\n- PyTorch or Caffe2: **Caffe2**\r\n- How you installed PyTorch (conda, pip, source): **source**\r\n- Build command you used (if compiling from source): *See above.*\r\n- OS: **Ubuntu 14.04**\r\n- PyTorch version: **(latest clone)**\r\n- Python version: **Python 2.7.15 :: Anaconda, Inc.**\r\n- CUDA/cuDNN version: **8.0/cudnn-8.0-linux-x64-v7**\r\n- GPU models and configuration: **(Titan Xp)**\r\n- GCC version (if compiling from source): **5.4.0**\r\n- CMake version: **3.11.3**\r\n- Versions of any other relevant libraries:"}
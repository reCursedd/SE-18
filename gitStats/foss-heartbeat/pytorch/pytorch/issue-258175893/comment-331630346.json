{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/331630346", "html_url": "https://github.com/pytorch/pytorch/issues/2754#issuecomment-331630346", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2754", "id": 331630346, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTYzMDM0Ng==", "user": {"login": "avmgithub", "id": 9083746, "node_id": "MDQ6VXNlcjkwODM3NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/9083746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avmgithub", "html_url": "https://github.com/avmgithub", "followers_url": "https://api.github.com/users/avmgithub/followers", "following_url": "https://api.github.com/users/avmgithub/following{/other_user}", "gists_url": "https://api.github.com/users/avmgithub/gists{/gist_id}", "starred_url": "https://api.github.com/users/avmgithub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avmgithub/subscriptions", "organizations_url": "https://api.github.com/users/avmgithub/orgs", "repos_url": "https://api.github.com/users/avmgithub/repos", "events_url": "https://api.github.com/users/avmgithub/events{/privacy}", "received_events_url": "https://api.github.com/users/avmgithub/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-23T12:19:38Z", "updated_at": "2017-09-23T12:19:38Z", "author_association": "CONTRIBUTOR", "body_html": "<p>hi, if anyone from the community can give me some pointers on where to keep looking to fix this problem, I would appreciate it.  I've narrowed the failures to 3 operations in the test_cuda.py<br>\n('topk', small_3d_unique, lambda t: [2, 1, False, True], 'dim_sort'),<br>\n('topk', small_3d_unique, lambda t: [2, -1, False, True], 'neg_dim_sort'),<br>\n('topk', small_3d_unique, lambda t: [2, 1, True, True], 'dim_desc_sort'),</p>\n<p>And this only happens when using  torch.CharTensor  (but in cuda)</p>\n<p>And in the file torch/lib/THC/THCTensorTopK.cuh,  the failure is happening in<br>\nfunction gatherTopK  , line 431<br>\nassert(writeIndex &lt; outputSliceSize);</p>\n<p>I print out the writeIndex and outputSliceSize,  the writeIndex starts at 0 and goes up to a max of  but the outputSliceSize remains at 2.</p>\n<p>Also, I do not know if this has any bearing but on ppc64 char is unsigned while on x86 char is signed.<br>\nI appreciate any pointers on which part of the code I can be looking into.</p>", "body_text": "hi, if anyone from the community can give me some pointers on where to keep looking to fix this problem, I would appreciate it.  I've narrowed the failures to 3 operations in the test_cuda.py\n('topk', small_3d_unique, lambda t: [2, 1, False, True], 'dim_sort'),\n('topk', small_3d_unique, lambda t: [2, -1, False, True], 'neg_dim_sort'),\n('topk', small_3d_unique, lambda t: [2, 1, True, True], 'dim_desc_sort'),\nAnd this only happens when using  torch.CharTensor  (but in cuda)\nAnd in the file torch/lib/THC/THCTensorTopK.cuh,  the failure is happening in\nfunction gatherTopK  , line 431\nassert(writeIndex < outputSliceSize);\nI print out the writeIndex and outputSliceSize,  the writeIndex starts at 0 and goes up to a max of  but the outputSliceSize remains at 2.\nAlso, I do not know if this has any bearing but on ppc64 char is unsigned while on x86 char is signed.\nI appreciate any pointers on which part of the code I can be looking into.", "body": "hi, if anyone from the community can give me some pointers on where to keep looking to fix this problem, I would appreciate it.  I've narrowed the failures to 3 operations in the test_cuda.py\r\n   ('topk', small_3d_unique, lambda t: [2, 1, False, True], 'dim_sort'),\r\n   ('topk', small_3d_unique, lambda t: [2, -1, False, True], 'neg_dim_sort'),\r\n   ('topk', small_3d_unique, lambda t: [2, 1, True, True], 'dim_desc_sort'),\r\n\r\nAnd this only happens when using  torch.CharTensor  (but in cuda)\r\n\r\nAnd in the file torch/lib/THC/THCTensorTopK.cuh,  the failure is happening in \r\nfunction gatherTopK  , line 431   \r\nassert(writeIndex < outputSliceSize);\r\n\r\nI print out the writeIndex and outputSliceSize,  the writeIndex starts at 0 and goes up to a max of  but the outputSliceSize remains at 2.  \r\n\r\nAlso, I do not know if this has any bearing but on ppc64 char is unsigned while on x86 char is signed.\r\nI appreciate any pointers on which part of the code I can be looking into.\r\n\r\n\r\n\r\n"}
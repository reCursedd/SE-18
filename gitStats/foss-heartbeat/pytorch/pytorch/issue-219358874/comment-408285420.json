{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/408285420", "html_url": "https://github.com/pytorch/pytorch/issues/1183#issuecomment-408285420", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1183", "id": 408285420, "node_id": "MDEyOklzc3VlQ29tbWVudDQwODI4NTQyMA==", "user": {"login": "Stonesjtu", "id": 4556044, "node_id": "MDQ6VXNlcjQ1NTYwNDQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4556044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stonesjtu", "html_url": "https://github.com/Stonesjtu", "followers_url": "https://api.github.com/users/Stonesjtu/followers", "following_url": "https://api.github.com/users/Stonesjtu/following{/other_user}", "gists_url": "https://api.github.com/users/Stonesjtu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stonesjtu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stonesjtu/subscriptions", "organizations_url": "https://api.github.com/users/Stonesjtu/orgs", "repos_url": "https://api.github.com/users/Stonesjtu/repos", "events_url": "https://api.github.com/users/Stonesjtu/events{/privacy}", "received_events_url": "https://api.github.com/users/Stonesjtu/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-27T01:40:15Z", "updated_at": "2018-07-27T03:40:25Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Driver version is 390.48, 1080Ti</p>\n<p>The forward step of LSTM is OK, but as long as the <code>.backward</code> is called, memory is keeping leaking.<br>\nTest script is posted at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"273395735\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/3665\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/3665/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/3665\">#3665</a></p>\n<p>Here's the log</p>\n<h3>with backward</h3>\n<pre><code>torch-version:  0.4.0                                                                                                                                                                [50/1922]\ncudnn version:  7102\niteration 0: memory use: 1994.19921875MB\niteration 100: memory use: 1994.390625MB\niteration 200: memory use: 1994.42578125MB\niteration 300: memory use: 1994.42578125MB\niteration 400: memory use: 1994.59765625MB\niteration 500: memory use: 1994.59765625MB\niteration 600: memory use: 1994.59765625MB\niteration 700: memory use: 1994.59765625MB\niteration 800: memory use: 1994.7109375MB\niteration 900: memory use: 1994.765625MB\niteration 1000: memory use: 1994.80859375MB\niteration 1100: memory use: 1994.80859375MB\niteration 1200: memory use: 1994.80859375MB\niteration 1300: memory use: 1994.890625MB\niteration 1400: memory use: 1994.890625MB\niteration 1500: memory use: 1994.9609375MB\niteration 1600: memory use: 1995.01171875MB\niteration 1700: memory use: 1995.01171875MB\niteration 1800: memory use: 1995.01171875MB\niteration 1900: memory use: 1995.01171875MB\nWith cudnn disabled\niteration 0: memory use: 1997.546875MB\niteration 100: memory use: 1998.29296875MB\niteration 200: memory use: 1998.4453125MB\niteration 300: memory use: 1998.4453125MB\niteration 400: memory use: 1998.4453125MB\niteration 500: memory use: 1998.4453125MB\niteration 600: memory use: 1998.4453125MB\niteration 700: memory use: 1998.4453125MB\niteration 800: memory use: 1998.4453125MB\niteration 900: memory use: 1998.4453125MB\niteration 1000: memory use: 1998.4453125MB\niteration 1100: memory use: 1998.4453125MB\niteration 1200: memory use: 1998.4453125MB\niteration 1300: memory use: 1998.4453125MB\niteration 1400: memory use: 1998.4453125MB\niteration 1500: memory use: 1998.44921875MB\niteration 1600: memory use: 1998.44921875MB\niteration 1700: memory use: 1998.44921875MB\niteration 1800: memory use: 1998.44921875MB\niteration 1900: memory use: 1998.44921875MB\n\n</code></pre>\n<h3>w/o backward</h3>\n<pre><code>torch-version:  0.4.0\ncudnn version:  7102\niteration 0: memory use: 1989.48828125MB\niteration 100: memory use: 1989.53125MB\niteration 200: memory use: 1989.53125MB\niteration 300: memory use: 1989.53125MB\niteration 400: memory use: 1989.53125MB\niteration 500: memory use: 1989.53125MB\niteration 600: memory use: 1989.53125MB\niteration 700: memory use: 1989.53125MB\niteration 800: memory use: 1989.53125MB\niteration 900: memory use: 1989.53125MB\niteration 1000: memory use: 1989.53125MB\niteration 1100: memory use: 1989.53125MB\niteration 1200: memory use: 1989.53125MB\niteration 1300: memory use: 1989.53125MB\niteration 1400: memory use: 1989.53125MB\niteration 1500: memory use: 1989.53125MB\niteration 1600: memory use: 1989.53125MB\niteration 1700: memory use: 1989.53125MB\niteration 1800: memory use: 1989.53125MB\niteration 1900: memory use: 1989.53125MB\nWith cudnn disabled\niteration 0: memory use: 1992.14453125MB\niteration 100: memory use: 1994.34765625MB\niteration 200: memory use: 1994.34765625MB\niteration 300: memory use: 1994.34765625MB\niteration 400: memory use: 1994.34765625MB\niteration 500: memory use: 1994.3515625MB\niteration 600: memory use: 1994.3515625MB\niteration 700: memory use: 1994.3515625MB\niteration 800: memory use: 1994.3515625MB\niteration 900: memory use: 1994.3515625MB\niteration 1000: memory use: 1994.3515625MB\niteration 1100: memory use: 1994.3515625MB\niteration 1200: memory use: 1994.3515625MB\niteration 1300: memory use: 1994.3515625MB\niteration 1400: memory use: 1994.3515625MB\niteration 1500: memory use: 1994.3515625MB\niteration 1600: memory use: 1994.3515625MB\niteration 1700: memory use: 1994.3515625MB\niteration 1800: memory use: 1994.3515625MB\niteration 1900: memory use: 1994.3515625MB\n\n</code></pre>", "body_text": "Driver version is 390.48, 1080Ti\nThe forward step of LSTM is OK, but as long as the .backward is called, memory is keeping leaking.\nTest script is posted at #3665\nHere's the log\nwith backward\ntorch-version:  0.4.0                                                                                                                                                                [50/1922]\ncudnn version:  7102\niteration 0: memory use: 1994.19921875MB\niteration 100: memory use: 1994.390625MB\niteration 200: memory use: 1994.42578125MB\niteration 300: memory use: 1994.42578125MB\niteration 400: memory use: 1994.59765625MB\niteration 500: memory use: 1994.59765625MB\niteration 600: memory use: 1994.59765625MB\niteration 700: memory use: 1994.59765625MB\niteration 800: memory use: 1994.7109375MB\niteration 900: memory use: 1994.765625MB\niteration 1000: memory use: 1994.80859375MB\niteration 1100: memory use: 1994.80859375MB\niteration 1200: memory use: 1994.80859375MB\niteration 1300: memory use: 1994.890625MB\niteration 1400: memory use: 1994.890625MB\niteration 1500: memory use: 1994.9609375MB\niteration 1600: memory use: 1995.01171875MB\niteration 1700: memory use: 1995.01171875MB\niteration 1800: memory use: 1995.01171875MB\niteration 1900: memory use: 1995.01171875MB\nWith cudnn disabled\niteration 0: memory use: 1997.546875MB\niteration 100: memory use: 1998.29296875MB\niteration 200: memory use: 1998.4453125MB\niteration 300: memory use: 1998.4453125MB\niteration 400: memory use: 1998.4453125MB\niteration 500: memory use: 1998.4453125MB\niteration 600: memory use: 1998.4453125MB\niteration 700: memory use: 1998.4453125MB\niteration 800: memory use: 1998.4453125MB\niteration 900: memory use: 1998.4453125MB\niteration 1000: memory use: 1998.4453125MB\niteration 1100: memory use: 1998.4453125MB\niteration 1200: memory use: 1998.4453125MB\niteration 1300: memory use: 1998.4453125MB\niteration 1400: memory use: 1998.4453125MB\niteration 1500: memory use: 1998.44921875MB\niteration 1600: memory use: 1998.44921875MB\niteration 1700: memory use: 1998.44921875MB\niteration 1800: memory use: 1998.44921875MB\niteration 1900: memory use: 1998.44921875MB\n\n\nw/o backward\ntorch-version:  0.4.0\ncudnn version:  7102\niteration 0: memory use: 1989.48828125MB\niteration 100: memory use: 1989.53125MB\niteration 200: memory use: 1989.53125MB\niteration 300: memory use: 1989.53125MB\niteration 400: memory use: 1989.53125MB\niteration 500: memory use: 1989.53125MB\niteration 600: memory use: 1989.53125MB\niteration 700: memory use: 1989.53125MB\niteration 800: memory use: 1989.53125MB\niteration 900: memory use: 1989.53125MB\niteration 1000: memory use: 1989.53125MB\niteration 1100: memory use: 1989.53125MB\niteration 1200: memory use: 1989.53125MB\niteration 1300: memory use: 1989.53125MB\niteration 1400: memory use: 1989.53125MB\niteration 1500: memory use: 1989.53125MB\niteration 1600: memory use: 1989.53125MB\niteration 1700: memory use: 1989.53125MB\niteration 1800: memory use: 1989.53125MB\niteration 1900: memory use: 1989.53125MB\nWith cudnn disabled\niteration 0: memory use: 1992.14453125MB\niteration 100: memory use: 1994.34765625MB\niteration 200: memory use: 1994.34765625MB\niteration 300: memory use: 1994.34765625MB\niteration 400: memory use: 1994.34765625MB\niteration 500: memory use: 1994.3515625MB\niteration 600: memory use: 1994.3515625MB\niteration 700: memory use: 1994.3515625MB\niteration 800: memory use: 1994.3515625MB\niteration 900: memory use: 1994.3515625MB\niteration 1000: memory use: 1994.3515625MB\niteration 1100: memory use: 1994.3515625MB\niteration 1200: memory use: 1994.3515625MB\niteration 1300: memory use: 1994.3515625MB\niteration 1400: memory use: 1994.3515625MB\niteration 1500: memory use: 1994.3515625MB\niteration 1600: memory use: 1994.3515625MB\niteration 1700: memory use: 1994.3515625MB\niteration 1800: memory use: 1994.3515625MB\niteration 1900: memory use: 1994.3515625MB", "body": "Driver version is 390.48, 1080Ti\r\n\r\nThe forward step of LSTM is OK, but as long as the `.backward` is called, memory is keeping leaking.\r\nTest script is posted at #3665 \r\n\r\nHere's the log\r\n### with backward\r\n```\r\ntorch-version:  0.4.0                                                                                                                                                                [50/1922]\r\ncudnn version:  7102\r\niteration 0: memory use: 1994.19921875MB\r\niteration 100: memory use: 1994.390625MB\r\niteration 200: memory use: 1994.42578125MB\r\niteration 300: memory use: 1994.42578125MB\r\niteration 400: memory use: 1994.59765625MB\r\niteration 500: memory use: 1994.59765625MB\r\niteration 600: memory use: 1994.59765625MB\r\niteration 700: memory use: 1994.59765625MB\r\niteration 800: memory use: 1994.7109375MB\r\niteration 900: memory use: 1994.765625MB\r\niteration 1000: memory use: 1994.80859375MB\r\niteration 1100: memory use: 1994.80859375MB\r\niteration 1200: memory use: 1994.80859375MB\r\niteration 1300: memory use: 1994.890625MB\r\niteration 1400: memory use: 1994.890625MB\r\niteration 1500: memory use: 1994.9609375MB\r\niteration 1600: memory use: 1995.01171875MB\r\niteration 1700: memory use: 1995.01171875MB\r\niteration 1800: memory use: 1995.01171875MB\r\niteration 1900: memory use: 1995.01171875MB\r\nWith cudnn disabled\r\niteration 0: memory use: 1997.546875MB\r\niteration 100: memory use: 1998.29296875MB\r\niteration 200: memory use: 1998.4453125MB\r\niteration 300: memory use: 1998.4453125MB\r\niteration 400: memory use: 1998.4453125MB\r\niteration 500: memory use: 1998.4453125MB\r\niteration 600: memory use: 1998.4453125MB\r\niteration 700: memory use: 1998.4453125MB\r\niteration 800: memory use: 1998.4453125MB\r\niteration 900: memory use: 1998.4453125MB\r\niteration 1000: memory use: 1998.4453125MB\r\niteration 1100: memory use: 1998.4453125MB\r\niteration 1200: memory use: 1998.4453125MB\r\niteration 1300: memory use: 1998.4453125MB\r\niteration 1400: memory use: 1998.4453125MB\r\niteration 1500: memory use: 1998.44921875MB\r\niteration 1600: memory use: 1998.44921875MB\r\niteration 1700: memory use: 1998.44921875MB\r\niteration 1800: memory use: 1998.44921875MB\r\niteration 1900: memory use: 1998.44921875MB\r\n\r\n```\r\n\r\n### w/o backward\r\n```\r\ntorch-version:  0.4.0\r\ncudnn version:  7102\r\niteration 0: memory use: 1989.48828125MB\r\niteration 100: memory use: 1989.53125MB\r\niteration 200: memory use: 1989.53125MB\r\niteration 300: memory use: 1989.53125MB\r\niteration 400: memory use: 1989.53125MB\r\niteration 500: memory use: 1989.53125MB\r\niteration 600: memory use: 1989.53125MB\r\niteration 700: memory use: 1989.53125MB\r\niteration 800: memory use: 1989.53125MB\r\niteration 900: memory use: 1989.53125MB\r\niteration 1000: memory use: 1989.53125MB\r\niteration 1100: memory use: 1989.53125MB\r\niteration 1200: memory use: 1989.53125MB\r\niteration 1300: memory use: 1989.53125MB\r\niteration 1400: memory use: 1989.53125MB\r\niteration 1500: memory use: 1989.53125MB\r\niteration 1600: memory use: 1989.53125MB\r\niteration 1700: memory use: 1989.53125MB\r\niteration 1800: memory use: 1989.53125MB\r\niteration 1900: memory use: 1989.53125MB\r\nWith cudnn disabled\r\niteration 0: memory use: 1992.14453125MB\r\niteration 100: memory use: 1994.34765625MB\r\niteration 200: memory use: 1994.34765625MB\r\niteration 300: memory use: 1994.34765625MB\r\niteration 400: memory use: 1994.34765625MB\r\niteration 500: memory use: 1994.3515625MB\r\niteration 600: memory use: 1994.3515625MB\r\niteration 700: memory use: 1994.3515625MB\r\niteration 800: memory use: 1994.3515625MB\r\niteration 900: memory use: 1994.3515625MB\r\niteration 1000: memory use: 1994.3515625MB\r\niteration 1100: memory use: 1994.3515625MB\r\niteration 1200: memory use: 1994.3515625MB\r\niteration 1300: memory use: 1994.3515625MB\r\niteration 1400: memory use: 1994.3515625MB\r\niteration 1500: memory use: 1994.3515625MB\r\niteration 1600: memory use: 1994.3515625MB\r\niteration 1700: memory use: 1994.3515625MB\r\niteration 1800: memory use: 1994.3515625MB\r\niteration 1900: memory use: 1994.3515625MB\r\n\r\n```"}
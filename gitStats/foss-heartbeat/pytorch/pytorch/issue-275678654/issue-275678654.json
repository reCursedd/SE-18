{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3808", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3808/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3808/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3808/events", "html_url": "https://github.com/pytorch/pytorch/issues/3808", "id": 275678654, "node_id": "MDU6SXNzdWUyNzU2Nzg2NTQ=", "number": 3808, "title": "[onnx] convered model the AveragePool bug in core-ml ", "user": {"login": "oneTaken", "id": 18045872, "node_id": "MDQ6VXNlcjE4MDQ1ODcy", "avatar_url": "https://avatars1.githubusercontent.com/u/18045872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oneTaken", "html_url": "https://github.com/oneTaken", "followers_url": "https://api.github.com/users/oneTaken/followers", "following_url": "https://api.github.com/users/oneTaken/following{/other_user}", "gists_url": "https://api.github.com/users/oneTaken/gists{/gist_id}", "starred_url": "https://api.github.com/users/oneTaken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oneTaken/subscriptions", "organizations_url": "https://api.github.com/users/oneTaken/orgs", "repos_url": "https://api.github.com/users/oneTaken/repos", "events_url": "https://api.github.com/users/oneTaken/events{/privacy}", "received_events_url": "https://api.github.com/users/oneTaken/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 693805995, "node_id": "MDU6TGFiZWw2OTM4MDU5OTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/onnx", "name": "onnx", "color": "e99695", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-21T11:32:19Z", "updated_at": "2017-12-05T09:41:51Z", "closed_at": "2017-12-05T09:41:51Z", "author_association": "NONE", "body_html": "<p>I need to convert trained model to apple coreml.<br>\nSo I install pytorch from source and onnx-coreml.</p>\n<pre><code>input = Variable(torch.randn(1, 3, 224, 224))\ntorch.onnx.export(model, (input, ), 'mobilenet.onnx', verbose=True)\n</code></pre>\n<p>And I convert it to coreml.<br>\nBut raised an error.</p>\n<pre><code>pad_b = pads[2]\nIndexError: list index (2) out of range\n</code></pre>\n<p>I trace the error. And I found that , in the converted 'onnx' format file, the averagepool's pad is length 2.<br>\nAnd in the coreml convert file.</p>\n<pre><code>if \"pads\" in node.attrs:\n            pads = node.attrs[\"pads\"].ints\n            pad_t = pads[0]\n            pad_l = pads[1]\n            pad_b = pads[2]\n            pad_r = pads[3\n</code></pre>\n<p>The pad length must be 4.<br>\nSo It's this a bug?<br>\nOr how can I solve this?</p>", "body_text": "I need to convert trained model to apple coreml.\nSo I install pytorch from source and onnx-coreml.\ninput = Variable(torch.randn(1, 3, 224, 224))\ntorch.onnx.export(model, (input, ), 'mobilenet.onnx', verbose=True)\n\nAnd I convert it to coreml.\nBut raised an error.\npad_b = pads[2]\nIndexError: list index (2) out of range\n\nI trace the error. And I found that , in the converted 'onnx' format file, the averagepool's pad is length 2.\nAnd in the coreml convert file.\nif \"pads\" in node.attrs:\n            pads = node.attrs[\"pads\"].ints\n            pad_t = pads[0]\n            pad_l = pads[1]\n            pad_b = pads[2]\n            pad_r = pads[3\n\nThe pad length must be 4.\nSo It's this a bug?\nOr how can I solve this?", "body": "I need to convert trained model to apple coreml.\r\nSo I install pytorch from source and onnx-coreml.\r\n```\r\ninput = Variable(torch.randn(1, 3, 224, 224))\r\ntorch.onnx.export(model, (input, ), 'mobilenet.onnx', verbose=True)\r\n```\r\n\r\nAnd I convert it to coreml.\r\nBut raised an error.\r\n```\r\npad_b = pads[2]\r\nIndexError: list index (2) out of range\r\n```\r\n\r\nI trace the error. And I found that , in the converted 'onnx' format file, the averagepool's pad is length 2.\r\nAnd in the coreml convert file.\r\n```        \r\nif \"pads\" in node.attrs:\r\n            pads = node.attrs[\"pads\"].ints\r\n            pad_t = pads[0]\r\n            pad_l = pads[1]\r\n            pad_b = pads[2]\r\n            pad_r = pads[3\r\n```\r\nThe pad length must be 4.\r\nSo It's this a bug?\r\nOr how can I solve this?"}
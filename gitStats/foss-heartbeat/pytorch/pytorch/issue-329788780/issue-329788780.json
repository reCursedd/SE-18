{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8192", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8192/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8192/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8192/events", "html_url": "https://github.com/pytorch/pytorch/pull/8192", "id": 329788780, "node_id": "MDExOlB1bGxSZXF1ZXN0MTkyOTUyODkz", "number": 8192, "title": "Add more annotations for arguments in ATen schema", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-06-06T09:29:14Z", "updated_at": "2018-09-20T16:55:46Z", "closed_at": "2018-06-06T17:11:40Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/8192", "html_url": "https://github.com/pytorch/pytorch/pull/8192", "diff_url": "https://github.com/pytorch/pytorch/pull/8192.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/8192.patch"}, "body_html": "<p>A completely minor change, but improves readability of ATen schema by a great deal. Our <code>FunctionSchema</code> list contains triples with: an offset into our string table, and the number of arguments and returns to be read out from the <strong>current</strong> position in the argument list. This is ok for an automatic parser, but it makes it impossible to associate <code>FunctionSchema</code> with its <code>ArgumentSchema</code>s automatically. This PR simply adds comments that separate and annotate <code>ArgumentSchema</code>s for different functions, which makes them very easy to find.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=370202\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zdevito\">@zdevito</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4685384\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jamesr66a\">@jamesr66a</a></p>\n<p>Previously (the output is truncated at some column, because I only copied part of it, not because of the code):</p>\n<div class=\"highlight highlight-source-c++\"><pre>{ <span class=\"pl-c1\">210</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"tensors\", at::nullopt, at::nullopt, ListType::ofTensors())   </span>\n{ <span class=\"pl-c1\">15</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, </span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           </span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           </span>\n{ <span class=\"pl-c1\">469</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"chunks\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu</span>\n{ <span class=\"pl-c1\">15</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, </span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           </span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">461</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        </span>\n{ <span class=\"pl-c1\">107</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       </span>\n{ <span class=\"pl-c1\">385</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">208</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n</span>\n{ <span class=\"pl-c1\">317</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::</span>\n{ <span class=\"pl-c1\">330</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:</span>\n{ <span class=\"pl-c1\">472</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at</span>\n{ <span class=\"pl-c1\">396</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i</span>\n{ <span class=\"pl-c1\">473</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu</span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">461</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        </span>\n{ <span class=\"pl-c1\">107</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       </span>\n{ <span class=\"pl-c1\">385</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">208</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n</span>\n{ <span class=\"pl-c1\">317</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::</span>\n{ <span class=\"pl-c1\">330</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:</span>\n{ <span class=\"pl-c1\">472</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at</span>\n{ <span class=\"pl-c1\">396</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i</span>\n{ <span class=\"pl-c1\">473</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu</span>\n{ <span class=\"pl-c1\">475</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"benchmark\", at::nullopt, AttributeInfo{ AttributeKind::i, at:</span>\n{ <span class=\"pl-c1\">476</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"deterministic\", at::nullopt, AttributeInfo{ AttributeKind::i,</span>\n{ <span class=\"pl-c1\">462</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"cudnn_enabled\", at::nullopt, AttributeInfo{ AttributeKind::i,</span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span></pre></div>\n<p>Now:</p>\n<div class=\"highlight highlight-source-c++\"><pre><span class=\"pl-c\"><span class=\"pl-c\">//</span> Arguments for cat (2 args, 1 returns)                                                    </span>\n{ <span class=\"pl-c1\">210</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"tensors\", at::nullopt, at::nullopt, ListType::ofTensors())   </span>\n{ <span class=\"pl-c1\">15</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, </span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n<span class=\"pl-c\"><span class=\"pl-c\">//</span> Arguments for ceil (1 args, 1 returns)                                                   </span>\n{ <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           </span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n<span class=\"pl-c\"><span class=\"pl-c\">//</span> Arguments for chunk (3 args, 1 returns)                                                  </span>\n{ <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           </span>\n{ <span class=\"pl-c1\">469</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"chunks\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu</span>\n{ <span class=\"pl-c1\">15</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, </span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n<span class=\"pl-c\"><span class=\"pl-c\">//</span> Arguments for cudnn_is_acceptable (1 args, 1 returns)                                    </span>\n{ <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           </span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n<span class=\"pl-c\"><span class=\"pl-c\">//</span> Arguments for convolution (9 args, 1 returns)                                            </span>\n{ <span class=\"pl-c1\">461</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        </span>\n{ <span class=\"pl-c1\">107</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       </span>\n{ <span class=\"pl-c1\">385</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">208</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n</span>\n{ <span class=\"pl-c1\">317</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::</span>\n{ <span class=\"pl-c1\">330</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:</span>\n{ <span class=\"pl-c1\">472</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at</span>\n{ <span class=\"pl-c1\">396</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i</span>\n{ <span class=\"pl-c1\">473</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu</span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n<span class=\"pl-c\"><span class=\"pl-c\">//</span> Arguments for _convolution (12 args, 1 returns)                                          </span>\n{ <span class=\"pl-c1\">461</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        </span>\n{ <span class=\"pl-c1\">107</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       </span>\n{ <span class=\"pl-c1\">385</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         </span>\n{ <span class=\"pl-c1\">208</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n</span>\n{ <span class=\"pl-c1\">317</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::</span>\n{ <span class=\"pl-c1\">330</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:</span>\n{ <span class=\"pl-c1\">472</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at</span>\n{ <span class=\"pl-c1\">396</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">1</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i</span>\n{ <span class=\"pl-c1\">473</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu</span>\n{ <span class=\"pl-c1\">475</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"benchmark\", at::nullopt, AttributeInfo{ AttributeKind::i, at:</span>\n{ <span class=\"pl-c1\">476</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"deterministic\", at::nullopt, AttributeInfo{ AttributeKind::i,</span>\n{ <span class=\"pl-c1\">462</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">2</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"cudnn_enabled\", at::nullopt, AttributeInfo{ AttributeKind::i,</span>\n{ <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span> }, <span class=\"pl-c\"><span class=\"pl-c\">//</span> Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         </span></pre></div>", "body_text": "A completely minor change, but improves readability of ATen schema by a great deal. Our FunctionSchema list contains triples with: an offset into our string table, and the number of arguments and returns to be read out from the current position in the argument list. This is ok for an automatic parser, but it makes it impossible to associate FunctionSchema with its ArgumentSchemas automatically. This PR simply adds comments that separate and annotate ArgumentSchemas for different functions, which makes them very easy to find.\n@zdevito @jamesr66a\nPreviously (the output is truncated at some column, because I only copied part of it, not because of the code):\n{ 210, 1, 0, 0 }, // Argument(\"tensors\", at::nullopt, at::nullopt, ListType::ofTensors())   \n{ 15, 0, 8, 2 }, // Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, \n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \n{ 469, 0, 0, 2 }, // Argument(\"chunks\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\n{ 15, 0, 8, 2 }, // Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, \n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 461, 0, 0, 0 }, // Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        \n{ 107, 0, 0, 0 }, // Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       \n{ 385, 0, 0, 0 }, // Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 208, 0, 0, 1 }, // Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n\n{ 317, 0, 0, 1 }, // Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::\n{ 330, 0, 0, 1 }, // Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:\n{ 472, 0, 0, 2 }, // Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at\n{ 396, 0, 0, 1 }, // Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i\n{ 473, 0, 0, 2 }, // Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 461, 0, 0, 0 }, // Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        \n{ 107, 0, 0, 0 }, // Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       \n{ 385, 0, 0, 0 }, // Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 208, 0, 0, 1 }, // Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n\n{ 317, 0, 0, 1 }, // Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::\n{ 330, 0, 0, 1 }, // Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:\n{ 472, 0, 0, 2 }, // Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at\n{ 396, 0, 0, 1 }, // Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i\n{ 473, 0, 0, 2 }, // Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\n{ 475, 0, 0, 2 }, // Argument(\"benchmark\", at::nullopt, AttributeInfo{ AttributeKind::i, at:\n{ 476, 0, 0, 2 }, // Argument(\"deterministic\", at::nullopt, AttributeInfo{ AttributeKind::i,\n{ 462, 0, 0, 2 }, // Argument(\"cudnn_enabled\", at::nullopt, AttributeInfo{ AttributeKind::i,\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \nNow:\n// Arguments for cat (2 args, 1 returns)                                                    \n{ 210, 1, 0, 0 }, // Argument(\"tensors\", at::nullopt, at::nullopt, ListType::ofTensors())   \n{ 15, 0, 8, 2 }, // Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, \n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n// Arguments for ceil (1 args, 1 returns)                                                   \n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n// Arguments for chunk (3 args, 1 returns)                                                  \n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \n{ 469, 0, 0, 2 }, // Argument(\"chunks\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\n{ 15, 0, 8, 2 }, // Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, \n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n// Arguments for cudnn_is_acceptable (1 args, 1 returns)                                    \n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n// Arguments for convolution (9 args, 1 returns)                                            \n{ 461, 0, 0, 0 }, // Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        \n{ 107, 0, 0, 0 }, // Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       \n{ 385, 0, 0, 0 }, // Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 208, 0, 0, 1 }, // Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n\n{ 317, 0, 0, 1 }, // Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::\n{ 330, 0, 0, 1 }, // Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:\n{ 472, 0, 0, 2 }, // Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at\n{ 396, 0, 0, 1 }, // Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i\n{ 473, 0, 0, 2 }, // Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \n// Arguments for _convolution (12 args, 1 returns)                                          \n{ 461, 0, 0, 0 }, // Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        \n{ 107, 0, 0, 0 }, // Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       \n{ 385, 0, 0, 0 }, // Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         \n{ 208, 0, 0, 1 }, // Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n\n{ 317, 0, 0, 1 }, // Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::\n{ 330, 0, 0, 1 }, // Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:\n{ 472, 0, 0, 2 }, // Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at\n{ 396, 0, 0, 1 }, // Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i\n{ 473, 0, 0, 2 }, // Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\n{ 475, 0, 0, 2 }, // Argument(\"benchmark\", at::nullopt, AttributeInfo{ AttributeKind::i, at:\n{ 476, 0, 0, 2 }, // Argument(\"deterministic\", at::nullopt, AttributeInfo{ AttributeKind::i,\n{ 462, 0, 0, 2 }, // Argument(\"cudnn_enabled\", at::nullopt, AttributeInfo{ AttributeKind::i,\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())", "body": "A completely minor change, but improves readability of ATen schema by a great deal. Our `FunctionSchema` list contains triples with: an offset into our string table, and the number of arguments and returns to be read out from the **current** position in the argument list. This is ok for an automatic parser, but it makes it impossible to associate `FunctionSchema` with its `ArgumentSchema`s automatically. This PR simply adds comments that separate and annotate `ArgumentSchema`s for different functions, which makes them very easy to find.\r\n\r\n@zdevito @jamesr66a \r\n\r\nPreviously (the output is truncated at some column, because I only copied part of it, not because of the code):\r\n```cpp\r\n{ 210, 1, 0, 0 }, // Argument(\"tensors\", at::nullopt, at::nullopt, ListType::ofTensors())   \r\n{ 15, 0, 8, 2 }, // Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, \r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \r\n{ 469, 0, 0, 2 }, // Argument(\"chunks\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\r\n{ 15, 0, 8, 2 }, // Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, \r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 461, 0, 0, 0 }, // Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        \r\n{ 107, 0, 0, 0 }, // Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       \r\n{ 385, 0, 0, 0 }, // Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 208, 0, 0, 1 }, // Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n\r\n{ 317, 0, 0, 1 }, // Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::\r\n{ 330, 0, 0, 1 }, // Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:\r\n{ 472, 0, 0, 2 }, // Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at\r\n{ 396, 0, 0, 1 }, // Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i\r\n{ 473, 0, 0, 2 }, // Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 461, 0, 0, 0 }, // Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        \r\n{ 107, 0, 0, 0 }, // Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       \r\n{ 385, 0, 0, 0 }, // Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 208, 0, 0, 1 }, // Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n\r\n{ 317, 0, 0, 1 }, // Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::\r\n{ 330, 0, 0, 1 }, // Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:\r\n{ 472, 0, 0, 2 }, // Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at\r\n{ 396, 0, 0, 1 }, // Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i\r\n{ 473, 0, 0, 2 }, // Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\r\n{ 475, 0, 0, 2 }, // Argument(\"benchmark\", at::nullopt, AttributeInfo{ AttributeKind::i, at:\r\n{ 476, 0, 0, 2 }, // Argument(\"deterministic\", at::nullopt, AttributeInfo{ AttributeKind::i,\r\n{ 462, 0, 0, 2 }, // Argument(\"cudnn_enabled\", at::nullopt, AttributeInfo{ AttributeKind::i,\r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n```\r\n\r\nNow:\r\n```cpp\r\n// Arguments for cat (2 args, 1 returns)                                                    \r\n{ 210, 1, 0, 0 }, // Argument(\"tensors\", at::nullopt, at::nullopt, ListType::ofTensors())   \r\n{ 15, 0, 8, 2 }, // Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, \r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n// Arguments for ceil (1 args, 1 returns)                                                   \r\n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n// Arguments for chunk (3 args, 1 returns)                                                  \r\n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \r\n{ 469, 0, 0, 2 }, // Argument(\"chunks\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\r\n{ 15, 0, 8, 2 }, // Argument(\"dim\", as_tensor(int64_t(0)), AttributeInfo{ AttributeKind::i, \r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n// Arguments for cudnn_is_acceptable (1 args, 1 returns)                                    \r\n{ 1, 0, 0, 0 }, // Argument(\"self\", at::nullopt, at::nullopt, DynamicType::get())           \r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n// Arguments for convolution (9 args, 1 returns)                                            \r\n{ 461, 0, 0, 0 }, // Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        \r\n{ 107, 0, 0, 0 }, // Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       \r\n{ 385, 0, 0, 0 }, // Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 208, 0, 0, 1 }, // Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n\r\n{ 317, 0, 0, 1 }, // Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::\r\n{ 330, 0, 0, 1 }, // Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:\r\n{ 472, 0, 0, 2 }, // Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at\r\n{ 396, 0, 0, 1 }, // Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i\r\n{ 473, 0, 0, 2 }, // Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n// Arguments for _convolution (12 args, 1 returns)                                          \r\n{ 461, 0, 0, 0 }, // Argument(\"input\", at::nullopt, at::nullopt, DynamicType::get())        \r\n{ 107, 0, 0, 0 }, // Argument(\"weight\", at::nullopt, at::nullopt, DynamicType::get())       \r\n{ 385, 0, 0, 0 }, // Argument(\"bias\", at::nullopt, at::nullopt, DynamicType::get())         \r\n{ 208, 0, 0, 1 }, // Argument(\"stride\", at::nullopt, AttributeInfo{ AttributeKind::is, at::n\r\n{ 317, 0, 0, 1 }, // Argument(\"padding\", at::nullopt, AttributeInfo{ AttributeKind::is, at::\r\n{ 330, 0, 0, 1 }, // Argument(\"dilation\", at::nullopt, AttributeInfo{ AttributeKind::is, at:\r\n{ 472, 0, 0, 2 }, // Argument(\"transposed\", at::nullopt, AttributeInfo{ AttributeKind::i, at\r\n{ 396, 0, 0, 1 }, // Argument(\"output_padding\", at::nullopt, AttributeInfo{ AttributeKind::i\r\n{ 473, 0, 0, 2 }, // Argument(\"groups\", at::nullopt, AttributeInfo{ AttributeKind::i, at::nu\r\n{ 475, 0, 0, 2 }, // Argument(\"benchmark\", at::nullopt, AttributeInfo{ AttributeKind::i, at:\r\n{ 476, 0, 0, 2 }, // Argument(\"deterministic\", at::nullopt, AttributeInfo{ AttributeKind::i,\r\n{ 462, 0, 0, 2 }, // Argument(\"cudnn_enabled\", at::nullopt, AttributeInfo{ AttributeKind::i,\r\n{ 2, 0, 0, 0 }, // Argument(\"result\", at::nullopt, at::nullopt, DynamicType::get())         \r\n```"}
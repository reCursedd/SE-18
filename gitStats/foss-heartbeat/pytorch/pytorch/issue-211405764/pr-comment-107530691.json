{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/107530691", "pull_request_review_id": 28509744, "id": 107530691, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNzUzMDY5MQ==", "diff_hunk": "@@ -738,6 +738,50 @@ def test_caching_pinned_memory_multi_gpu(self):\n         self.assertEqual(gpu_tensor1[0], 1)\n         self.assertEqual(gpu_tensor0[0], 2)\n \n+    def test_btrifact(self):\n+        a = torch.Tensor((((1.3722, -0.9020),\n+                           (1.8849, 1.9169)),\n+                          ((0.7187, -1.1695),\n+                           (-0.0139, 1.3572)),\n+                          ((-1.6181, 0.7148),\n+                           (1.3728, 0.1319)))).cuda()\n+        LU_data, pivots, info = a.btrifact()\n+        self.assertEqual(info.abs().sum(), 0)\n+        I_U = torch.triu(torch.ones(2, 2)).unsqueeze(0).expand(3, 2, 2).type_as(a).byte()\n+        I_L = 1 - I_U\n+        a_L = torch.zeros(a.size()).type_as(a)\n+        a_U = a_L.clone()\n+        a_L[torch.eye(2).unsqueeze(0).expand(3, 2, 2).type_as(a).byte()] = 1.0\n+        a_L[I_L] = LU_data[I_L]\n+        a_U[I_U] = LU_data[I_U]\n+\n+        P = torch.eye(2).unsqueeze(0).expand(3, 2, 2).type_as(a)\n+        for i in range(3):\n+            for j in range(2):\n+                k = pivots[i, j] - 1", "path": "test/test_cuda.py", "position": null, "original_position": 24, "commit_id": "73dcc642f27c87cfd1e908b9bf2a7309c06bcf1b", "original_commit_id": "8bf70088b3ef04be06ca52a36e4bbda6a9d56cc2", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "ugh are the pivots using 1-based indexing?", "created_at": "2017-03-22T20:59:28Z", "updated_at": "2018-11-23T15:32:49Z", "html_url": "https://github.com/pytorch/pytorch/pull/903#discussion_r107530691", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/903", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/107530691"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/903#discussion_r107530691"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/903"}}, "body_html": "<p>ugh are the pivots using 1-based indexing?</p>", "body_text": "ugh are the pivots using 1-based indexing?"}
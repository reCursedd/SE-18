{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4906", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4906/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4906/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4906/events", "html_url": "https://github.com/pytorch/pytorch/issues/4906", "id": 292425175, "node_id": "MDU6SXNzdWUyOTI0MjUxNzU=", "number": 4906, "title": "Error building GLOO", "user": {"login": "tobyclh", "id": 12501995, "node_id": "MDQ6VXNlcjEyNTAxOTk1", "avatar_url": "https://avatars3.githubusercontent.com/u/12501995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tobyclh", "html_url": "https://github.com/tobyclh", "followers_url": "https://api.github.com/users/tobyclh/followers", "following_url": "https://api.github.com/users/tobyclh/following{/other_user}", "gists_url": "https://api.github.com/users/tobyclh/gists{/gist_id}", "starred_url": "https://api.github.com/users/tobyclh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tobyclh/subscriptions", "organizations_url": "https://api.github.com/users/tobyclh/orgs", "repos_url": "https://api.github.com/users/tobyclh/repos", "events_url": "https://api.github.com/users/tobyclh/events{/privacy}", "received_events_url": "https://api.github.com/users/tobyclh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-29T14:24:59Z", "updated_at": "2018-09-26T04:37:29Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>Hello I'm trying to build from source for multinorminal distribution, but I can't get it built.<br>\nIn contrary, if built with NO_DISTRIBUTED=1 the build passes but of course things like pooling won't work, which is something I need.</p>\n<ul>\n<li>OS: Ubuntu 16.04</li>\n<li>PyTorch version: From master branch</li>\n<li>How you installed PyTorch (conda, pip, source): source</li>\n<li>CUDA/cuDNN version: 9.1</li>\n<li>GCC version (if compiling from source): 5.4</li>\n<li>Error messages and/or stack traces of the bug</li>\n</ul>\n<blockquote>\n<p>.../pytorch/torch/lib/gloo/gloo/cuda.h:25:2: error: #error \"Expected GLOO_USE_CUDA to be defined\"<br>\n#error \"Expected GLOO_USE_CUDA to be defined\"<br>\nCMake Error at gloo_cuda_generated_cuda_private.cu.o.cmake:203 (message):<br>\nError generating<br>\n.../pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda_private.cu.o</p>\n</blockquote>\n<p>But make itself seems to be aware of CUDA 9.1</p>\n<blockquote>\n<p>Install the project...<br>\n-- Install configuration: \"Release\"<br>\n-- Installing: .../pytorch/torch/lib/tmp_install/lib/libshm.so<br>\n-- Set runtime path of \".../pytorch/torch/lib/tmp_install/lib/libshm.so\" to \"\"<br>\n-- Up-to-date: .../pytorch/torch/lib/tmp_install/include/libshm.h<br>\n-- Installing: ...pytorch/torch/lib/tmp_install/bin/torch_shm_manager<br>\n-- CUDA detected: 9.1<br>\n-- Added CUDA NVCC flags for: sm_30 sm_35 sm_50 sm_52 sm_60 sm_61 sm_70<br>\n-- Found libcuda: /usr/lib/x86_64-linux-gnu/libcuda.so<br>\n-- Found libnvrtc: /usr/local/cuda/lib64/libnvrtc.so<br>\n-- Configuring done<br>\n-- Generating done<br>\n-- Build files have been written to: .../pytorch/torch/lib/build/gloo</p>\n</blockquote>", "body_text": "Hello I'm trying to build from source for multinorminal distribution, but I can't get it built.\nIn contrary, if built with NO_DISTRIBUTED=1 the build passes but of course things like pooling won't work, which is something I need.\n\nOS: Ubuntu 16.04\nPyTorch version: From master branch\nHow you installed PyTorch (conda, pip, source): source\nCUDA/cuDNN version: 9.1\nGCC version (if compiling from source): 5.4\nError messages and/or stack traces of the bug\n\n\n.../pytorch/torch/lib/gloo/gloo/cuda.h:25:2: error: #error \"Expected GLOO_USE_CUDA to be defined\"\n#error \"Expected GLOO_USE_CUDA to be defined\"\nCMake Error at gloo_cuda_generated_cuda_private.cu.o.cmake:203 (message):\nError generating\n.../pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda_private.cu.o\n\nBut make itself seems to be aware of CUDA 9.1\n\nInstall the project...\n-- Install configuration: \"Release\"\n-- Installing: .../pytorch/torch/lib/tmp_install/lib/libshm.so\n-- Set runtime path of \".../pytorch/torch/lib/tmp_install/lib/libshm.so\" to \"\"\n-- Up-to-date: .../pytorch/torch/lib/tmp_install/include/libshm.h\n-- Installing: ...pytorch/torch/lib/tmp_install/bin/torch_shm_manager\n-- CUDA detected: 9.1\n-- Added CUDA NVCC flags for: sm_30 sm_35 sm_50 sm_52 sm_60 sm_61 sm_70\n-- Found libcuda: /usr/lib/x86_64-linux-gnu/libcuda.so\n-- Found libnvrtc: /usr/local/cuda/lib64/libnvrtc.so\n-- Configuring done\n-- Generating done\n-- Build files have been written to: .../pytorch/torch/lib/build/gloo", "body": "Hello I'm trying to build from source for multinorminal distribution, but I can't get it built.\r\nIn contrary, if built with NO_DISTRIBUTED=1 the build passes but of course things like pooling won't work, which is something I need.\r\n\r\n- OS: Ubuntu 16.04\r\n- PyTorch version: From master branch\r\n- How you installed PyTorch (conda, pip, source): source \r\n- CUDA/cuDNN version: 9.1\r\n- GCC version (if compiling from source): 5.4\r\n- Error messages and/or stack traces of the bug\r\n> .../pytorch/torch/lib/gloo/gloo/cuda.h:25:2: error: #error \"Expected GLOO_USE_CUDA to be defined\"\r\n>  #error \"Expected GLOO_USE_CUDA to be defined\"\r\n> CMake Error at gloo_cuda_generated_cuda_private.cu.o.cmake:203 (message):\r\n>   Error generating\r\n>   .../pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda_private.cu.o\r\n> \r\n> \r\nBut make itself seems to be aware of CUDA 9.1\r\n\r\n> Install the project...\r\n> -- Install configuration: \"Release\"\r\n> -- Installing: .../pytorch/torch/lib/tmp_install/lib/libshm.so\r\n> -- Set runtime path of \".../pytorch/torch/lib/tmp_install/lib/libshm.so\" to \"\"\r\n> -- Up-to-date: .../pytorch/torch/lib/tmp_install/include/libshm.h\r\n> -- Installing: ...pytorch/torch/lib/tmp_install/bin/torch_shm_manager\r\n> -- CUDA detected: 9.1\r\n> -- Added CUDA NVCC flags for: sm_30 sm_35 sm_50 sm_52 sm_60 sm_61 sm_70\r\n> -- Found libcuda: /usr/lib/x86_64-linux-gnu/libcuda.so\r\n> -- Found libnvrtc: /usr/local/cuda/lib64/libnvrtc.so\r\n> -- Configuring done\r\n> -- Generating done\r\n> -- Build files have been written to: .../pytorch/torch/lib/build/gloo\r\n> \r\n"}
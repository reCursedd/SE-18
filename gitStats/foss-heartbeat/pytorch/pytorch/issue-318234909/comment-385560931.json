{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/385560931", "html_url": "https://github.com/pytorch/pytorch/issues/7019#issuecomment-385560931", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7019", "id": 385560931, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTU2MDkzMQ==", "user": {"login": "sjeaugey", "id": 12857445, "node_id": "MDQ6VXNlcjEyODU3NDQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/12857445?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjeaugey", "html_url": "https://github.com/sjeaugey", "followers_url": "https://api.github.com/users/sjeaugey/followers", "following_url": "https://api.github.com/users/sjeaugey/following{/other_user}", "gists_url": "https://api.github.com/users/sjeaugey/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjeaugey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjeaugey/subscriptions", "organizations_url": "https://api.github.com/users/sjeaugey/orgs", "repos_url": "https://api.github.com/users/sjeaugey/repos", "events_url": "https://api.github.com/users/sjeaugey/events{/privacy}", "received_events_url": "https://api.github.com/users/sjeaugey/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-30T23:44:02Z", "updated_at": "2018-04-30T23:44:02Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1181669\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/klshrinidhi\">@klshrinidhi</a> -- there is indeed something wrong here, the 2 GPUs you are using are supposed to be on the same machine (and even managed within the same process), yet NCCL detects them as two different machines and tries to use NET/Socket (the trace should show P2P or SHM, but not NET).</p>\n<p>Can you confirm that the \"hostname:portnum\"(*) is the same on both GPUs, i.e. on lines with [0] and lines with [1] ?</p>\n<p>I also assume you don't set NCCL_SHM_DISABLE=1 and NCCL_P2P_DISABLE=1 ?</p>\n<p>Anyway, feel free to open a bug on <a href=\"https://developer.nvidia.com/user\" rel=\"nofollow\">https://developer.nvidia.com/user</a> (My bugs) and select \"Deep Learning Toolkit / NCCL\" as relevant area so that we can investigate further. Thanks !</p>\n<p>(*) it is actually hostname:PID</p>", "body_text": "Hi @klshrinidhi -- there is indeed something wrong here, the 2 GPUs you are using are supposed to be on the same machine (and even managed within the same process), yet NCCL detects them as two different machines and tries to use NET/Socket (the trace should show P2P or SHM, but not NET).\nCan you confirm that the \"hostname:portnum\"(*) is the same on both GPUs, i.e. on lines with [0] and lines with [1] ?\nI also assume you don't set NCCL_SHM_DISABLE=1 and NCCL_P2P_DISABLE=1 ?\nAnyway, feel free to open a bug on https://developer.nvidia.com/user (My bugs) and select \"Deep Learning Toolkit / NCCL\" as relevant area so that we can investigate further. Thanks !\n(*) it is actually hostname:PID", "body": "Hi @klshrinidhi -- there is indeed something wrong here, the 2 GPUs you are using are supposed to be on the same machine (and even managed within the same process), yet NCCL detects them as two different machines and tries to use NET/Socket (the trace should show P2P or SHM, but not NET).\r\n\r\nCan you confirm that the \"hostname:portnum\"(*) is the same on both GPUs, i.e. on lines with [0] and lines with [1] ?\r\n\r\nI also assume you don't set NCCL_SHM_DISABLE=1 and NCCL_P2P_DISABLE=1 ?\r\n\r\nAnyway, feel free to open a bug on https://developer.nvidia.com/user (My bugs) and select \"Deep Learning Toolkit / NCCL\" as relevant area so that we can investigate further. Thanks !\r\n\r\n(*) it is actually hostname:PID"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/213386768", "pull_request_review_id": 150212801, "id": 213386768, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMzM4Njc2OA==", "diff_hunk": "@@ -4459,6 +4459,49 @@ def run_test(M):\n     def test_pinverse(self):\n         self._test_pinverse(self, conv_fn=lambda x: x)\n \n+    @staticmethod\n+    def _test_matrix_power(self, conv_fn):\n+        def run_test(M, sign=1):\n+            if sign == -1:\n+                M = M.inverse()\n+            MP2 = torch.matrix_power(M, 2)\n+            self.assertEqual(MP2, torch.matmul(M, M))\n+\n+            MP3 = torch.matrix_power(M, 3)\n+            self.assertEqual(MP3, torch.matmul(MP2, M))\n+\n+            MP4 = torch.matrix_power(M, 4)\n+            self.assertEqual(MP4, torch.matmul(MP2, MP2))\n+\n+            MP6 = torch.matrix_power(M, 6)\n+            self.assertEqual(MP6, torch.matmul(MP3, MP3))\n+\n+            MP0 = torch.matrix_power(M, 0)\n+            self.assertEqual(MP0, torch.eye(M.size(-2)).expand_as(M))\n+\n+        # Single matrix\n+        M = conv_fn(torch.randn(5, 5))\n+        run_test(M)\n+\n+        # Batch matrices\n+        M = conv_fn(torch.randn(3, 3, 3))\n+        run_test(M)\n+\n+        # Many batch matrices\n+        M = conv_fn(torch.randn(2, 3, 3, 3))\n+        run_test(M)\n+\n+        # Single matrix, but full rank\n+        # This is for negative powers\n+        from test_autograd import random_fullrank_matrix_distinct_singular_value", "path": "test/test_torch.py", "position": 38, "original_position": 38, "commit_id": "b1af53363dd10d87f38ad74f6137563cb35f13fe", "original_commit_id": "8bd6456f62b1d45ae1fae745c00a2d0017b3be50", "user": {"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}, "body": "@vishwakftw Do you mind moving this line to the top of the file? It seems that our internal tests don't support the import here very well :(", "created_at": "2018-08-28T16:38:08Z", "updated_at": "2018-11-23T15:50:09Z", "html_url": "https://github.com/pytorch/pytorch/pull/10068#discussion_r213386768", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/10068", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/213386768"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/10068#discussion_r213386768"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/10068"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23639302\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vishwakftw\">@vishwakftw</a> Do you mind moving this line to the top of the file? It seems that our internal tests don't support the import here very well :(</p>", "body_text": "@vishwakftw Do you mind moving this line to the top of the file? It seems that our internal tests don't support the import here very well :("}
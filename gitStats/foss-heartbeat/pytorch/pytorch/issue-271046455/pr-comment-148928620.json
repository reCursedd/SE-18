{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/148928620", "pull_request_review_id": 74253102, "id": 148928620, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODkyODYyMA==", "diff_hunk": "@@ -10,6 +10,15 @@\n #include <cuda_fp16.h>\n #endif\n \n+#ifdef _MSC_VER\n+// MSVC does not support std::inf and std::nan for integral types\n+#define ISINF(x) std::isinf((double)x)\n+#define ISNAN(x) std::isnan((double)x)", "path": "aten/src/ATen/Half.h", "position": null, "original_position": 7, "commit_id": "e8fc834424ac9e6bfc348c4a9052d1acbf9f841c", "original_commit_id": "0dd3122a817dba4c654a314e5cbfa6d8a988b15c", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "I think a better fix would be to always return `false` for integral types (should be possible to do inside this macro with some template magic). Not all values of `long long` can be represented in `double`", "created_at": "2017-11-04T11:47:06Z", "updated_at": "2018-11-23T15:36:01Z", "html_url": "https://github.com/pytorch/pytorch/pull/3467#discussion_r148928620", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/3467", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/148928620"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/3467#discussion_r148928620"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/3467"}}, "body_html": "<p>I think a better fix would be to always return <code>false</code> for integral types (should be possible to do inside this macro with some template magic). Not all values of <code>long long</code> can be represented in <code>double</code></p>", "body_text": "I think a better fix would be to always return false for integral types (should be possible to do inside this macro with some template magic). Not all values of long long can be represented in double"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7509", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7509/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7509/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7509/events", "html_url": "https://github.com/pytorch/pytorch/issues/7509", "id": 322440293, "node_id": "MDU6SXNzdWUzMjI0NDAyOTM=", "number": 7509, "title": "Replacing part of expanded tensor", "user": {"login": "alicanb", "id": 1093846, "node_id": "MDQ6VXNlcjEwOTM4NDY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1093846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alicanb", "html_url": "https://github.com/alicanb", "followers_url": "https://api.github.com/users/alicanb/followers", "following_url": "https://api.github.com/users/alicanb/following{/other_user}", "gists_url": "https://api.github.com/users/alicanb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alicanb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alicanb/subscriptions", "organizations_url": "https://api.github.com/users/alicanb/orgs", "repos_url": "https://api.github.com/users/alicanb/repos", "events_url": "https://api.github.com/users/alicanb/events{/privacy}", "received_events_url": "https://api.github.com/users/alicanb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-11T21:29:12Z", "updated_at": "2018-05-11T21:41:07Z", "closed_at": "2018-05-11T21:41:07Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Is this normal behavior? (pytorch 0.5.0a0+39c6101), looks similar to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"288442511\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/4664\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/4664/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/4664\">#4664</a></p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> torch\na1 <span class=\"pl-k\">=</span> torch.zeros(<span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">4</span>, <span class=\"pl-v\">requires_grad</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>)\na2 <span class=\"pl-k\">=</span> torch.zeros(<span class=\"pl-c1\">4</span>, <span class=\"pl-v\">requires_grad</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>).unsqueeze(<span class=\"pl-c1\">0</span>).expand(<span class=\"pl-c1\">4</span>,<span class=\"pl-k\">-</span> <span class=\"pl-c1\">1</span>)\nb <span class=\"pl-k\">=</span> torch.arange(<span class=\"pl-c1\">2</span>, <span class=\"pl-v\">requires_grad</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>) <span class=\"pl-k\">+</span> <span class=\"pl-c1\">5</span>\na1[<span class=\"pl-c1\">0</span>:<span class=\"pl-c1\">2</span>,<span class=\"pl-c1\">0</span>] <span class=\"pl-k\">=</span> b\na2[<span class=\"pl-c1\">0</span>:<span class=\"pl-c1\">2</span>,<span class=\"pl-c1\">0</span>] <span class=\"pl-k\">=</span> b\n<span class=\"pl-c1\">print</span>(a1)  <span class=\"pl-c\"><span class=\"pl-c\">#</span>ok</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>tensor([[ 5.,  0.,  0.,  0.],</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>        [ 6.,  0.,  0.,  0.],</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>        [ 0.,  0.,  0.,  0.],</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>        [ 0.,  0.,  0.,  0.]])</span>\n\n<span class=\"pl-c1\">print</span>(a2)  <span class=\"pl-c\"><span class=\"pl-c\">#</span>wtf</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>tensor([[ 6.,  0.,  0.,  0.],</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>        [ 6.,  0.,  0.,  0.],</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>        [ 6.,  0.,  0.,  0.],</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>        [ 6.,  0.,  0.,  0.]])</span></pre></div>", "body_text": "Is this normal behavior? (pytorch 0.5.0a0+39c6101), looks similar to #4664\nimport torch\na1 = torch.zeros(4, 4, requires_grad=False)\na2 = torch.zeros(4, requires_grad=False).unsqueeze(0).expand(4,- 1)\nb = torch.arange(2, requires_grad=False) + 5\na1[0:2,0] = b\na2[0:2,0] = b\nprint(a1)  #ok\n#tensor([[ 5.,  0.,  0.,  0.],\n#        [ 6.,  0.,  0.,  0.],\n#        [ 0.,  0.,  0.,  0.],\n#        [ 0.,  0.,  0.,  0.]])\n\nprint(a2)  #wtf\n#tensor([[ 6.,  0.,  0.,  0.],\n#        [ 6.,  0.,  0.,  0.],\n#        [ 6.,  0.,  0.,  0.],\n#        [ 6.,  0.,  0.,  0.]])", "body": "Is this normal behavior? (pytorch 0.5.0a0+39c6101), looks similar to https://github.com/pytorch/pytorch/issues/4664\r\n``` python\r\nimport torch\r\na1 = torch.zeros(4, 4, requires_grad=False)\r\na2 = torch.zeros(4, requires_grad=False).unsqueeze(0).expand(4,- 1)\r\nb = torch.arange(2, requires_grad=False) + 5\r\na1[0:2,0] = b\r\na2[0:2,0] = b\r\nprint(a1)  #ok\r\n#tensor([[ 5.,  0.,  0.,  0.],\r\n#        [ 6.,  0.,  0.,  0.],\r\n#        [ 0.,  0.,  0.,  0.],\r\n#        [ 0.,  0.,  0.,  0.]])\r\n\r\nprint(a2)  #wtf\r\n#tensor([[ 6.,  0.,  0.,  0.],\r\n#        [ 6.,  0.,  0.,  0.],\r\n#        [ 6.,  0.,  0.,  0.],\r\n#        [ 6.,  0.,  0.,  0.]])\r\n```"}
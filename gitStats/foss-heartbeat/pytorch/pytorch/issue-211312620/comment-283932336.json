{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/283932336", "html_url": "https://github.com/pytorch/pytorch/issues/896#issuecomment-283932336", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/896", "id": 283932336, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzkzMjMzNg==", "user": {"login": "albanD", "id": 6359743, "node_id": "MDQ6VXNlcjYzNTk3NDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/6359743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albanD", "html_url": "https://github.com/albanD", "followers_url": "https://api.github.com/users/albanD/followers", "following_url": "https://api.github.com/users/albanD/following{/other_user}", "gists_url": "https://api.github.com/users/albanD/gists{/gist_id}", "starred_url": "https://api.github.com/users/albanD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albanD/subscriptions", "organizations_url": "https://api.github.com/users/albanD/orgs", "repos_url": "https://api.github.com/users/albanD/repos", "events_url": "https://api.github.com/users/albanD/events{/privacy}", "received_events_url": "https://api.github.com/users/albanD/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-03T11:34:56Z", "updated_at": "2017-03-03T11:35:18Z", "author_association": "COLLABORATOR", "body_html": "<p>As you can see <a href=\"https://github.com/pytorch/pytorch/blob/f2d72ba10fabe6f78e67246031c8b1da48e7ddf1/Dockerfile#L13-L19\">here</a> the WHOLE command following <code>RUN</code> has to be a single line. You should add <code>\\</code> when necessary to avoid problem.<br>\nYour sample:</p>\n<pre><code>RUN\nchmod +x ~/miniconda.sh &amp;&amp; \n~/miniconda.sh -b -p /opt/conda &amp;&amp; \\\nrm ~/miniconda.sh &amp;&amp; \n/opt/conda/bin/conda install conda-build &amp;&amp; \n/opt/conda/bin/conda create -y --name pytorch-py35 python=3.5.2 numpy scipy ipython mkl&amp;&amp; \n/opt/conda/bin/conda clean -ya\n</code></pre>\n<p>should be</p>\n<pre><code>RUN chmod +x ~/miniconda.sh &amp;&amp; \\\n~/miniconda.sh -b -p /opt/conda &amp;&amp; \\\nrm ~/miniconda.sh &amp;&amp; \\\n/opt/conda/bin/conda install conda-build &amp;&amp; \\\n/opt/conda/bin/conda create -y --name pytorch-py35 python=3.5.2 numpy scipy ipython mkl &amp;&amp; \\\n/opt/conda/bin/conda clean -ya\n</code></pre>", "body_text": "As you can see here the WHOLE command following RUN has to be a single line. You should add \\ when necessary to avoid problem.\nYour sample:\nRUN\nchmod +x ~/miniconda.sh && \n~/miniconda.sh -b -p /opt/conda && \\\nrm ~/miniconda.sh && \n/opt/conda/bin/conda install conda-build && \n/opt/conda/bin/conda create -y --name pytorch-py35 python=3.5.2 numpy scipy ipython mkl&& \n/opt/conda/bin/conda clean -ya\n\nshould be\nRUN chmod +x ~/miniconda.sh && \\\n~/miniconda.sh -b -p /opt/conda && \\\nrm ~/miniconda.sh && \\\n/opt/conda/bin/conda install conda-build && \\\n/opt/conda/bin/conda create -y --name pytorch-py35 python=3.5.2 numpy scipy ipython mkl && \\\n/opt/conda/bin/conda clean -ya", "body": "As you can see [here](https://github.com/pytorch/pytorch/blob/f2d72ba10fabe6f78e67246031c8b1da48e7ddf1/Dockerfile#L13-L19) the WHOLE command following `RUN` has to be a single line. You should add `\\` when necessary to avoid problem.\r\nYour sample:\r\n```\r\nRUN\r\nchmod +x ~/miniconda.sh && \r\n~/miniconda.sh -b -p /opt/conda && \\\r\nrm ~/miniconda.sh && \r\n/opt/conda/bin/conda install conda-build && \r\n/opt/conda/bin/conda create -y --name pytorch-py35 python=3.5.2 numpy scipy ipython mkl&& \r\n/opt/conda/bin/conda clean -ya\r\n```\r\nshould be\r\n```\r\nRUN chmod +x ~/miniconda.sh && \\\r\n~/miniconda.sh -b -p /opt/conda && \\\r\nrm ~/miniconda.sh && \\\r\n/opt/conda/bin/conda install conda-build && \\\r\n/opt/conda/bin/conda create -y --name pytorch-py35 python=3.5.2 numpy scipy ipython mkl && \\\r\n/opt/conda/bin/conda clean -ya\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3425", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3425/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3425/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3425/events", "html_url": "https://github.com/pytorch/pytorch/pull/3425", "id": 270404916, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUwMTExMDI4", "number": 3425, "title": "Make THCTensor_varInnermostDim numerically stable", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 742585577, "node_id": "MDU6TGFiZWw3NDI1ODU1Nzc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/0.3", "name": "0.3", "color": "d1c41b", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-11-01T18:27:31Z", "updated_at": "2018-11-23T15:36:01Z", "closed_at": "2017-11-06T21:00:30Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/3425", "html_url": "https://github.com/pytorch/pytorch/pull/3425", "diff_url": "https://github.com/pytorch/pytorch/pull/3425.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/3425.patch"}, "body_html": "<p>Addressing <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"270094592\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/3402\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/3402/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/3402\">#3402</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"250895442\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/2470\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/2470/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/2470\">#2470</a>. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"270126917\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/3410\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/3410/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/3410\">#3410</a> has some relevant information about how this works.</p>\n<p>Uses Welford's variance algorithm for numeric stability.</p>\n<h3>Test Plan</h3>\n<p><code>test/run_test.sh</code><br>\nAdded unit tests for variance on cuda tensors. One in particular tests large, uneven CUDA inputs to make sure the code computes all the variances (as opposed to only some of them).</p>\n<p>Check numeric stability:</p>\n<pre><code>import torch\ntensor = torch.FloatTensor([2281.5, 2281.25]).cuda()\ntensor.var(0)  # Used to be 0. Now is 0.03125\n</code></pre>", "body_text": "Addressing #3402 and #2470. #3410 has some relevant information about how this works.\nUses Welford's variance algorithm for numeric stability.\nTest Plan\ntest/run_test.sh\nAdded unit tests for variance on cuda tensors. One in particular tests large, uneven CUDA inputs to make sure the code computes all the variances (as opposed to only some of them).\nCheck numeric stability:\nimport torch\ntensor = torch.FloatTensor([2281.5, 2281.25]).cuda()\ntensor.var(0)  # Used to be 0. Now is 0.03125", "body": "Addressing #3402 and #2470. #3410 has some relevant information about how this works.\r\n\r\nUses Welford's variance algorithm for numeric stability. \r\n\r\n### Test Plan\r\n`test/run_test.sh`\r\nAdded unit tests for variance on cuda tensors. One in particular tests large, uneven CUDA inputs to make sure the code computes all the variances (as opposed to only some of them).\r\n\r\nCheck numeric stability:\r\n```\r\nimport torch\r\ntensor = torch.FloatTensor([2281.5, 2281.25]).cuda()\r\ntensor.var(0)  # Used to be 0. Now is 0.03125\r\n```"}
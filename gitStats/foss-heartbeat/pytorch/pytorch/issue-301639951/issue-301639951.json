{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5514", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5514/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5514/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5514/events", "html_url": "https://github.com/pytorch/pytorch/issues/5514", "id": 301639951, "node_id": "MDU6SXNzdWUzMDE2Mzk5NTE=", "number": 5514, "title": "[feature request] Dockerfile for python 2.7", "user": {"login": "CharlesJQuarra", "id": 7565570, "node_id": "MDQ6VXNlcjc1NjU1NzA=", "avatar_url": "https://avatars1.githubusercontent.com/u/7565570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CharlesJQuarra", "html_url": "https://github.com/CharlesJQuarra", "followers_url": "https://api.github.com/users/CharlesJQuarra/followers", "following_url": "https://api.github.com/users/CharlesJQuarra/following{/other_user}", "gists_url": "https://api.github.com/users/CharlesJQuarra/gists{/gist_id}", "starred_url": "https://api.github.com/users/CharlesJQuarra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CharlesJQuarra/subscriptions", "organizations_url": "https://api.github.com/users/CharlesJQuarra/orgs", "repos_url": "https://api.github.com/users/CharlesJQuarra/repos", "events_url": "https://api.github.com/users/CharlesJQuarra/events{/privacy}", "received_events_url": "https://api.github.com/users/CharlesJQuarra/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-02T03:18:26Z", "updated_at": "2018-08-02T22:23:13Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>The current Dockerfile only covers python 3.6. I tried updating it to work with python 2.7, but I haven't been able to get it to work (conda throws some InstallationErrors)</p>\n<p>Here is the preliminar <code>Dockerfile</code>:</p>\n<pre><code>FROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\n\nRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\\n         build-essential \\\n         cmake \\\n         git \\\n         curl \\\n         vim \\\n         ca-certificates \\\n         libjpeg-dev \\\n         libpng-dev &amp;&amp;\\\n     rm -rf /var/lib/apt/lists/*\n\n\nENV PYTHON_VERSION=2.7\nRUN curl -o ~/miniconda.sh -O  https://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh  &amp;&amp; \\\n     chmod +x ~/miniconda.sh &amp;&amp; \\\n     ~/miniconda.sh -b -p /opt/conda &amp;&amp; \\\n     rm ~/miniconda.sh &amp;&amp; \\\n     /opt/conda/bin/conda install numpy pyyaml scipy ipython mkl &amp;&amp; \\\n     /opt/conda/bin/conda install -c soumith magma-cuda90 &amp;&amp; \\\n     /opt/conda/bin/conda clean -ya\n\n#ENV PATH /opt/conda/bin:/opt/conda/envs/pytorch-py$PYTHON_VERSION/bin:$PATH\n#RUN /opt/conda/bin/conda update -n base conda\n#RUN /opt/conda/bin/conda install --name pytorch-py$PYTHON_VERSION -c soumith magma-cuda90\n\n# This must be done before pip so that requirements.txt is available\nENV PATH /opt/conda/bin:$PATH\n\nWORKDIR /opt/pytorch\nCOPY . .\nRUN ls -ltah\n\nRUN git submodule update --init\nRUN TORCH_CUDA_ARCH_LIST=\"3.5 5.2 6.0 6.1 7.0+PTX\" TORCH_NVCC_FLAGS=\"-Xfatbin -compress-all\" \\\n    CMAKE_PREFIX_PATH=\"$(dirname $(which conda))/../\" \\\n    pip install -v .\n\nRUN git clone https://github.com/pytorch/vision.git &amp;&amp; cd vision &amp;&amp; pip install -v .\n\nWORKDIR /workspace\nRUN ls -ltah\nRUN chmod -R a+w /workspace\n</code></pre>", "body_text": "The current Dockerfile only covers python 3.6. I tried updating it to work with python 2.7, but I haven't been able to get it to work (conda throws some InstallationErrors)\nHere is the preliminar Dockerfile:\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n         build-essential \\\n         cmake \\\n         git \\\n         curl \\\n         vim \\\n         ca-certificates \\\n         libjpeg-dev \\\n         libpng-dev &&\\\n     rm -rf /var/lib/apt/lists/*\n\n\nENV PYTHON_VERSION=2.7\nRUN curl -o ~/miniconda.sh -O  https://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh  && \\\n     chmod +x ~/miniconda.sh && \\\n     ~/miniconda.sh -b -p /opt/conda && \\\n     rm ~/miniconda.sh && \\\n     /opt/conda/bin/conda install numpy pyyaml scipy ipython mkl && \\\n     /opt/conda/bin/conda install -c soumith magma-cuda90 && \\\n     /opt/conda/bin/conda clean -ya\n\n#ENV PATH /opt/conda/bin:/opt/conda/envs/pytorch-py$PYTHON_VERSION/bin:$PATH\n#RUN /opt/conda/bin/conda update -n base conda\n#RUN /opt/conda/bin/conda install --name pytorch-py$PYTHON_VERSION -c soumith magma-cuda90\n\n# This must be done before pip so that requirements.txt is available\nENV PATH /opt/conda/bin:$PATH\n\nWORKDIR /opt/pytorch\nCOPY . .\nRUN ls -ltah\n\nRUN git submodule update --init\nRUN TORCH_CUDA_ARCH_LIST=\"3.5 5.2 6.0 6.1 7.0+PTX\" TORCH_NVCC_FLAGS=\"-Xfatbin -compress-all\" \\\n    CMAKE_PREFIX_PATH=\"$(dirname $(which conda))/../\" \\\n    pip install -v .\n\nRUN git clone https://github.com/pytorch/vision.git && cd vision && pip install -v .\n\nWORKDIR /workspace\nRUN ls -ltah\nRUN chmod -R a+w /workspace", "body": "The current Dockerfile only covers python 3.6. I tried updating it to work with python 2.7, but I haven't been able to get it to work (conda throws some InstallationErrors)\r\n\r\nHere is the preliminar `Dockerfile`:\r\n\r\n```\r\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\r\n\r\nRUN apt-get update && apt-get install -y --no-install-recommends \\\r\n         build-essential \\\r\n         cmake \\\r\n         git \\\r\n         curl \\\r\n         vim \\\r\n         ca-certificates \\\r\n         libjpeg-dev \\\r\n         libpng-dev &&\\\r\n     rm -rf /var/lib/apt/lists/*\r\n\r\n\r\nENV PYTHON_VERSION=2.7\r\nRUN curl -o ~/miniconda.sh -O  https://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh  && \\\r\n     chmod +x ~/miniconda.sh && \\\r\n     ~/miniconda.sh -b -p /opt/conda && \\\r\n     rm ~/miniconda.sh && \\\r\n     /opt/conda/bin/conda install numpy pyyaml scipy ipython mkl && \\\r\n     /opt/conda/bin/conda install -c soumith magma-cuda90 && \\\r\n     /opt/conda/bin/conda clean -ya\r\n\r\n#ENV PATH /opt/conda/bin:/opt/conda/envs/pytorch-py$PYTHON_VERSION/bin:$PATH\r\n#RUN /opt/conda/bin/conda update -n base conda\r\n#RUN /opt/conda/bin/conda install --name pytorch-py$PYTHON_VERSION -c soumith magma-cuda90\r\n\r\n# This must be done before pip so that requirements.txt is available\r\nENV PATH /opt/conda/bin:$PATH\r\n\r\nWORKDIR /opt/pytorch\r\nCOPY . .\r\nRUN ls -ltah\r\n\r\nRUN git submodule update --init\r\nRUN TORCH_CUDA_ARCH_LIST=\"3.5 5.2 6.0 6.1 7.0+PTX\" TORCH_NVCC_FLAGS=\"-Xfatbin -compress-all\" \\\r\n    CMAKE_PREFIX_PATH=\"$(dirname $(which conda))/../\" \\\r\n    pip install -v .\r\n\r\nRUN git clone https://github.com/pytorch/vision.git && cd vision && pip install -v .\r\n\r\nWORKDIR /workspace\r\nRUN ls -ltah\r\nRUN chmod -R a+w /workspace\r\n```\r\n\r\n"}
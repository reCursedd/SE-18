{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/440717333", "html_url": "https://github.com/pytorch/pytorch/pull/14221#issuecomment-440717333", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/14221", "id": 440717333, "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDcxNzMzMw==", "user": {"login": "petrex", "id": 699903, "node_id": "MDQ6VXNlcjY5OTkwMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/699903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrex", "html_url": "https://github.com/petrex", "followers_url": "https://api.github.com/users/petrex/followers", "following_url": "https://api.github.com/users/petrex/following{/other_user}", "gists_url": "https://api.github.com/users/petrex/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrex/subscriptions", "organizations_url": "https://api.github.com/users/petrex/orgs", "repos_url": "https://api.github.com/users/petrex/repos", "events_url": "https://api.github.com/users/petrex/events{/privacy}", "received_events_url": "https://api.github.com/users/petrex/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-21T15:57:49Z", "updated_at": "2018-11-21T15:57:49Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\"><a class=\"user-mention\" href=\"https://github.com/bddppq\">@bddppq</a> I personally prefer the hipify protobuf approach. That\u2019s seem to be an universal solution to any further api change. @Nallamaddi, Rohith&lt;mailto:Rohith.Nallamaddi@amd.com&gt; what\u2019s your opinion?\n\nGet Outlook for iOS&lt;<a href=\"https://aka.ms/o0ukef\">https://aka.ms/o0ukef</a>&gt;</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-signature-reply\">________________________________\nFrom: bddppq &lt;notifications@github.com&gt;\nSent: Tuesday, November 20, 2018 11:31 PM\nTo: pytorch/pytorch\nCc: Yeh, Peter; Mention\nSubject: Re: [pytorch/pytorch] Unify cuda and hip device types in Caffe2 python front end (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"382538385\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/14221\" href=\"https://github.com/pytorch/pytorch/pull/14221\">#14221</a>)\n\n\nActually I now feel this approach could be fragile since we need to carefully use IsGPUDeviceType (instead of directly compare with workspace.GpuDeviceType) in places we check for gpu type. Another solution <a class=\"user-mention\" href=\"https://github.com/dzhulgakov\">@dzhulgakov</a>&lt;<a href=\"https://github.com/dzhulgakov\">https://github.com/dzhulgakov</a>&gt; and I have discussed today is to not touch any existing python code that generates the protobuf net, then in workspace.RunNetOnce we \"hipify\" the net if on the python land we have detected amd gpu (by \"hipify\" I meant loop through every op in the net and change the their device_type from CUDA to HIP).\n\nWhat do you think? <a class=\"user-mention\" href=\"https://github.com/rohithkrn\">@rohithkrn</a>&lt;<a href=\"https://github.com/rohithkrn\">https://github.com/rohithkrn</a>&gt; <a class=\"user-mention\" href=\"https://github.com/petrex\">@petrex</a>&lt;<a href=\"https://github.com/petrex\">https://github.com/petrex</a>&gt; <a class=\"user-mention\" href=\"https://github.com/aazzolini\">@aazzolini</a>&lt;<a href=\"https://github.com/aazzolini\">https://github.com/aazzolini</a>&gt;\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub&lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"382538385\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/14221\" href=\"https://github.com/pytorch/pytorch/pull/14221#issuecomment-440564664\">#14221 (comment)</a>&gt;, or mute the thread&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AAqt_wgVJMiu_VUjydKwnvOEM6Jrfb9Nks5uxQE-gaJpZM4YqjGi\">https://github.com/notifications/unsubscribe-auth/AAqt_wgVJMiu_VUjydKwnvOEM6Jrfb9Nks5uxQE-gaJpZM4YqjGi</a>&gt;.</div>\n</div>", "body_text": "@bddppq I personally prefer the hipify protobuf approach. That\u2019s seem to be an universal solution to any further api change. @Nallamaddi, Rohith<mailto:Rohith.Nallamaddi@amd.com> what\u2019s your opinion?\n\nGet Outlook for iOS<https://aka.ms/o0ukef>\n\u2026\n________________________________\nFrom: bddppq <notifications@github.com>\nSent: Tuesday, November 20, 2018 11:31 PM\nTo: pytorch/pytorch\nCc: Yeh, Peter; Mention\nSubject: Re: [pytorch/pytorch] Unify cuda and hip device types in Caffe2 python front end (#14221)\n\n\nActually I now feel this approach could be fragile since we need to carefully use IsGPUDeviceType (instead of directly compare with workspace.GpuDeviceType) in places we check for gpu type. Another solution @dzhulgakov<https://github.com/dzhulgakov> and I have discussed today is to not touch any existing python code that generates the protobuf net, then in workspace.RunNetOnce we \"hipify\" the net if on the python land we have detected amd gpu (by \"hipify\" I meant loop through every op in the net and change the their device_type from CUDA to HIP).\n\nWhat do you think? @rohithkrn<https://github.com/rohithkrn> @petrex<https://github.com/petrex> @aazzolini<https://github.com/aazzolini>\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<#14221 (comment)>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AAqt_wgVJMiu_VUjydKwnvOEM6Jrfb9Nks5uxQE-gaJpZM4YqjGi>.", "body": "@bddppq I personally prefer the hipify protobuf approach. That\u2019s seem to be an universal solution to any further api change. @Nallamaddi, Rohith<mailto:Rohith.Nallamaddi@amd.com> what\u2019s your opinion?\n\nGet Outlook for iOS<https://aka.ms/o0ukef>\n\n________________________________\nFrom: bddppq <notifications@github.com>\nSent: Tuesday, November 20, 2018 11:31 PM\nTo: pytorch/pytorch\nCc: Yeh, Peter; Mention\nSubject: Re: [pytorch/pytorch] Unify cuda and hip device types in Caffe2 python front end (#14221)\n\n\nActually I now feel this approach could be fragile since we need to carefully use IsGPUDeviceType (instead of directly compare with workspace.GpuDeviceType) in places we check for gpu type. Another solution @dzhulgakov<https://github.com/dzhulgakov> and I have discussed today is to not touch any existing python code that generates the protobuf net, then in workspace.RunNetOnce we \"hipify\" the net if on the python land we have detected amd gpu (by \"hipify\" I meant loop through every op in the net and change the their device_type from CUDA to HIP).\n\nWhat do you think? @rohithkrn<https://github.com/rohithkrn> @petrex<https://github.com/petrex> @aazzolini<https://github.com/aazzolini>\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://github.com/pytorch/pytorch/pull/14221#issuecomment-440564664>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AAqt_wgVJMiu_VUjydKwnvOEM6Jrfb9Nks5uxQE-gaJpZM4YqjGi>.\n"}
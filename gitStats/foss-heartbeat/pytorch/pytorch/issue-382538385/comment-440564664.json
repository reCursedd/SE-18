{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/440564664", "html_url": "https://github.com/pytorch/pytorch/pull/14221#issuecomment-440564664", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/14221", "id": 440564664, "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDU2NDY2NA==", "user": {"login": "bddppq", "id": 9300575, "node_id": "MDQ6VXNlcjkzMDA1NzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/9300575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bddppq", "html_url": "https://github.com/bddppq", "followers_url": "https://api.github.com/users/bddppq/followers", "following_url": "https://api.github.com/users/bddppq/following{/other_user}", "gists_url": "https://api.github.com/users/bddppq/gists{/gist_id}", "starred_url": "https://api.github.com/users/bddppq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bddppq/subscriptions", "organizations_url": "https://api.github.com/users/bddppq/orgs", "repos_url": "https://api.github.com/users/bddppq/repos", "events_url": "https://api.github.com/users/bddppq/events{/privacy}", "received_events_url": "https://api.github.com/users/bddppq/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-21T07:30:43Z", "updated_at": "2018-11-21T07:32:57Z", "author_association": "MEMBER", "body_html": "<p>Actually I now feel this approach could be fragile since we need to carefully use IsGPUDeviceType (instead of directly comparing with workspace.GpuDeviceType) in places we check for gpu type. Another solution <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=17890620\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dzhulgakov\">@dzhulgakov</a> and I have discussed today is to not touch any existing python code that generates the protobuf net, but in <code>workspace.RunNetOnce</code> we  \"hipify\" the net if on the python land we have detected amd gpu (by \"hipify\" I meant loop through every op in the net and change the their device_type from CUDA to HIP).</p>\n<p>What do you think? <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1936544\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rohithkrn\">@rohithkrn</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=699903\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/petrex\">@petrex</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=37222419\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/aazzolini\">@aazzolini</a></p>", "body_text": "Actually I now feel this approach could be fragile since we need to carefully use IsGPUDeviceType (instead of directly comparing with workspace.GpuDeviceType) in places we check for gpu type. Another solution @dzhulgakov and I have discussed today is to not touch any existing python code that generates the protobuf net, but in workspace.RunNetOnce we  \"hipify\" the net if on the python land we have detected amd gpu (by \"hipify\" I meant loop through every op in the net and change the their device_type from CUDA to HIP).\nWhat do you think? @rohithkrn @petrex @aazzolini", "body": "Actually I now feel this approach could be fragile since we need to carefully use IsGPUDeviceType (instead of directly comparing with workspace.GpuDeviceType) in places we check for gpu type. Another solution @dzhulgakov and I have discussed today is to not touch any existing python code that generates the protobuf net, but in `workspace.RunNetOnce` we  \"hipify\" the net if on the python land we have detected amd gpu (by \"hipify\" I meant loop through every op in the net and change the their device_type from CUDA to HIP).\r\n\r\nWhat do you think? @rohithkrn @petrex @aazzolini \r\n"}
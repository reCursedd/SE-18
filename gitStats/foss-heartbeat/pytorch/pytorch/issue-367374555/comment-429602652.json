{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/429602652", "html_url": "https://github.com/pytorch/pytorch/pull/12400#issuecomment-429602652", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12400", "id": 429602652, "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTYwMjY1Mg==", "user": {"login": "lanpa", "id": 2005323, "node_id": "MDQ6VXNlcjIwMDUzMjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2005323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lanpa", "html_url": "https://github.com/lanpa", "followers_url": "https://api.github.com/users/lanpa/followers", "following_url": "https://api.github.com/users/lanpa/following{/other_user}", "gists_url": "https://api.github.com/users/lanpa/gists{/gist_id}", "starred_url": "https://api.github.com/users/lanpa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lanpa/subscriptions", "organizations_url": "https://api.github.com/users/lanpa/orgs", "repos_url": "https://api.github.com/users/lanpa/repos", "events_url": "https://api.github.com/users/lanpa/events{/privacy}", "received_events_url": "https://api.github.com/users/lanpa/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-14T07:18:19Z", "updated_at": "2018-10-14T07:18:19Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=79994\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/orionr\">@orionr</a> I opened a branch at<br>\n<a href=\"https://github.com/lanpa/tensorboardX/tree/fix-graph\">https://github.com/lanpa/tensorboardX/tree/fix-graph</a><br>\nwhich prints nodes that does not have a scope name.</p>\n<p>Among the models I have tested, onnx::Constant, onnx::Gemm, onnx::Add need to be fixed.</p>\n<p>minimal testcase:</p>\n<pre><code>class LinearLanpa(nn.Module):\n    def __init__(self):\n        super(LinearLanpa, self).__init__()\n        self.l = nn.Linear(3, 5)\n\n    def forward(self, x):\n        return self.l(x)\n\ndummy_input = (torch.zeros(1, 3),)\nwith SummaryWriter(comment='LinearModel') as w:\n    w.add_graph(LinearLanpa(), dummy_input, True)\n\n\n\nresult with torch 1.0.0a0+0ac865e:\n\ngraph(%0 : Float(1, 3)\n      %1 : Float(5, 3)\n      %2 : Float(5)) {\n  %3 : Dynamic = onnx::Constant[value={0}]()\n  %4 : Dynamic = onnx::Gemm[alpha=1, beta=0, transB=1](%0, %1, %3)\n  %5 : Float(1, 5) = onnx::Add(%2, %4)\n  return (%5);\n}\n\n%3 : Dynamic = onnx::Constant[value={0}]()\n has empty scope name. FIXME!\n%4 : Dynamic = onnx::Gemm[alpha=1, beta=0, transB=1](%0, %1, %3)\n has empty scope name. FIXME!\n%5 : Float(1, 5) = onnx::Add(%2, %4)\n has empty scope name. FIXME!\n</code></pre>", "body_text": "@orionr I opened a branch at\nhttps://github.com/lanpa/tensorboardX/tree/fix-graph\nwhich prints nodes that does not have a scope name.\nAmong the models I have tested, onnx::Constant, onnx::Gemm, onnx::Add need to be fixed.\nminimal testcase:\nclass LinearLanpa(nn.Module):\n    def __init__(self):\n        super(LinearLanpa, self).__init__()\n        self.l = nn.Linear(3, 5)\n\n    def forward(self, x):\n        return self.l(x)\n\ndummy_input = (torch.zeros(1, 3),)\nwith SummaryWriter(comment='LinearModel') as w:\n    w.add_graph(LinearLanpa(), dummy_input, True)\n\n\n\nresult with torch 1.0.0a0+0ac865e:\n\ngraph(%0 : Float(1, 3)\n      %1 : Float(5, 3)\n      %2 : Float(5)) {\n  %3 : Dynamic = onnx::Constant[value={0}]()\n  %4 : Dynamic = onnx::Gemm[alpha=1, beta=0, transB=1](%0, %1, %3)\n  %5 : Float(1, 5) = onnx::Add(%2, %4)\n  return (%5);\n}\n\n%3 : Dynamic = onnx::Constant[value={0}]()\n has empty scope name. FIXME!\n%4 : Dynamic = onnx::Gemm[alpha=1, beta=0, transB=1](%0, %1, %3)\n has empty scope name. FIXME!\n%5 : Float(1, 5) = onnx::Add(%2, %4)\n has empty scope name. FIXME!", "body": "@orionr I opened a branch at\r\nhttps://github.com/lanpa/tensorboardX/tree/fix-graph\r\nwhich prints nodes that does not have a scope name.\r\n\r\nAmong the models I have tested, onnx::Constant, onnx::Gemm, onnx::Add need to be fixed.\r\n\r\nminimal testcase:\r\n\r\n\r\n```\r\nclass LinearLanpa(nn.Module):\r\n    def __init__(self):\r\n        super(LinearLanpa, self).__init__()\r\n        self.l = nn.Linear(3, 5)\r\n\r\n    def forward(self, x):\r\n        return self.l(x)\r\n\r\ndummy_input = (torch.zeros(1, 3),)\r\nwith SummaryWriter(comment='LinearModel') as w:\r\n    w.add_graph(LinearLanpa(), dummy_input, True)\r\n\r\n\r\n\r\nresult with torch 1.0.0a0+0ac865e:\r\n\r\ngraph(%0 : Float(1, 3)\r\n      %1 : Float(5, 3)\r\n      %2 : Float(5)) {\r\n  %3 : Dynamic = onnx::Constant[value={0}]()\r\n  %4 : Dynamic = onnx::Gemm[alpha=1, beta=0, transB=1](%0, %1, %3)\r\n  %5 : Float(1, 5) = onnx::Add(%2, %4)\r\n  return (%5);\r\n}\r\n\r\n%3 : Dynamic = onnx::Constant[value={0}]()\r\n has empty scope name. FIXME!\r\n%4 : Dynamic = onnx::Gemm[alpha=1, beta=0, transB=1](%0, %1, %3)\r\n has empty scope name. FIXME!\r\n%5 : Float(1, 5) = onnx::Add(%2, %4)\r\n has empty scope name. FIXME!\r\n```"}
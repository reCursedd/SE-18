{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13941", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13941/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13941/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13941/events", "html_url": "https://github.com/pytorch/pytorch/pull/13941", "id": 380499090, "node_id": "MDExOlB1bGxSZXF1ZXN0MjMwNjgzMTM0", "number": 13941, "title": "Allow torch.utils.cpp_extension.load to load shared libraries that aren't Python modules", "user": {"login": "goldsborough", "id": 6429851, "node_id": "MDQ6VXNlcjY0Mjk4NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6429851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldsborough", "html_url": "https://github.com/goldsborough", "followers_url": "https://api.github.com/users/goldsborough/followers", "following_url": "https://api.github.com/users/goldsborough/following{/other_user}", "gists_url": "https://api.github.com/users/goldsborough/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldsborough/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldsborough/subscriptions", "organizations_url": "https://api.github.com/users/goldsborough/orgs", "repos_url": "https://api.github.com/users/goldsborough/repos", "events_url": "https://api.github.com/users/goldsborough/events{/privacy}", "received_events_url": "https://api.github.com/users/goldsborough/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-14T01:41:04Z", "updated_at": "2018-11-16T23:40:26Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/13941", "html_url": "https://github.com/pytorch/pytorch/pull/13941", "diff_url": "https://github.com/pytorch/pytorch/pull/13941.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/13941.patch"}, "body_html": "<p>For custom TorchScript operators, <code>torch.ops.load_library</code> must be used and passed the path to the shared library containing the custom ops. Our C++ extensions stuff generally is meant to build a Python module and import it. This PR changes <code>torch.utils.cpp_extension.load</code> to have an option to just return the shared library path instead of importing it as a Python module, so you can then pass it to <code>torch.ops.load_library</code>. This means folks can re-use <code>torch.utils.cpp_extension.load</code> and <code>torch.utils.cpp_extension.load_inline</code> to even write their custom ops inline. I think <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20787943\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/t-vi\">@t-vi</a>  and <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9110200\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fmassa\">@fmassa</a> will appreciate this.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1310570\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/soumith\">@soumith</a></p>", "body_text": "For custom TorchScript operators, torch.ops.load_library must be used and passed the path to the shared library containing the custom ops. Our C++ extensions stuff generally is meant to build a Python module and import it. This PR changes torch.utils.cpp_extension.load to have an option to just return the shared library path instead of importing it as a Python module, so you can then pass it to torch.ops.load_library. This means folks can re-use torch.utils.cpp_extension.load and torch.utils.cpp_extension.load_inline to even write their custom ops inline. I think @t-vi  and @fmassa will appreciate this.\n@soumith", "body": "For custom TorchScript operators, `torch.ops.load_library` must be used and passed the path to the shared library containing the custom ops. Our C++ extensions stuff generally is meant to build a Python module and import it. This PR changes `torch.utils.cpp_extension.load` to have an option to just return the shared library path instead of importing it as a Python module, so you can then pass it to `torch.ops.load_library`. This means folks can re-use `torch.utils.cpp_extension.load` and `torch.utils.cpp_extension.load_inline` to even write their custom ops inline. I think @t-vi  and @fmassa will appreciate this.\r\n\r\n@soumith \r\n\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7948", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7948/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7948/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7948/events", "html_url": "https://github.com/pytorch/pytorch/issues/7948", "id": 327695539, "node_id": "MDU6SXNzdWUzMjc2OTU1Mzk=", "number": 7948, "title": "[Caffe2] No GPU support and libcaffe2.so: undefined symbol", "user": {"login": "MounirB", "id": 7119095, "node_id": "MDQ6VXNlcjcxMTkwOTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7119095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MounirB", "html_url": "https://github.com/MounirB", "followers_url": "https://api.github.com/users/MounirB/followers", "following_url": "https://api.github.com/users/MounirB/following{/other_user}", "gists_url": "https://api.github.com/users/MounirB/gists{/gist_id}", "starred_url": "https://api.github.com/users/MounirB/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MounirB/subscriptions", "organizations_url": "https://api.github.com/users/MounirB/orgs", "repos_url": "https://api.github.com/users/MounirB/repos", "events_url": "https://api.github.com/users/MounirB/events{/privacy}", "received_events_url": "https://api.github.com/users/MounirB/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-30T11:50:04Z", "updated_at": "2018-05-31T08:09:51Z", "closed_at": "2018-05-31T08:09:51Z", "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>When I try to run this <a href=\"https://github.com/facebookresearch/Detectron/blob/master/INSTALL.md#detectron\">test</a> from Detectron within a conda environment named (cudapy2), I get the following problem:<br>\n<code>(cudapy2) python2 $DETECTRON/detectron/tests/test_spatial_narrow_as_op.py</code></p>\n<pre><code>WARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nWARNING:root:Debug message: /home/mounir/miniconda3/envs/cudapy2/lib/python2.7/site-packages/caffe2/python/../../../../libcaffe2.so: undefined symbol: _ZN6google15SetUsageMessageERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\nSegmentation fault (core dumped)\n</code></pre>\n<p>I tried to reinstall Caffe2 within the virtual env from built-in libraries but it didn't solve my problem.</p>\n<p>Caffe2 with GPU support used to work, yesterday. The following command was working fine within the same environment<br>\n<code>import caffe2.python.core</code><br>\nI think that I started having this problem when I followed the <a href=\"https://github.com/facebookresearch/Detectron/blob/master/INSTALL.md#detectron\">installation procedure for Detectron</a>.</p>\n<p><strong>- PyTorch or Caffe2:</strong> Caffe2 compatible with Cuda 9<br>\n<strong>- How you installed Caffe2 (conda, pip, source):</strong> conda from built-in libraries installed through the following command<br>\n<code>conda install -c caffe2 caffe2-cuda9.0-cudnn7</code><br>\n<strong>- OS:</strong> Ubuntu 16.04<br>\n<strong>- Python version:</strong> 2.7.15<br>\n<strong>- CUDA/cuDNN version:</strong>  Cuda 9.0 and Cudnn 7.xx<br>\n<strong>- GPU models and configuration:</strong> Quadro P400, Drivers 384.130</p>", "body_text": "Issue description\nWhen I try to run this test from Detectron within a conda environment named (cudapy2), I get the following problem:\n(cudapy2) python2 $DETECTRON/detectron/tests/test_spatial_narrow_as_op.py\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nWARNING:root:Debug message: /home/mounir/miniconda3/envs/cudapy2/lib/python2.7/site-packages/caffe2/python/../../../../libcaffe2.so: undefined symbol: _ZN6google15SetUsageMessageERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\nSegmentation fault (core dumped)\n\nI tried to reinstall Caffe2 within the virtual env from built-in libraries but it didn't solve my problem.\nCaffe2 with GPU support used to work, yesterday. The following command was working fine within the same environment\nimport caffe2.python.core\nI think that I started having this problem when I followed the installation procedure for Detectron.\n- PyTorch or Caffe2: Caffe2 compatible with Cuda 9\n- How you installed Caffe2 (conda, pip, source): conda from built-in libraries installed through the following command\nconda install -c caffe2 caffe2-cuda9.0-cudnn7\n- OS: Ubuntu 16.04\n- Python version: 2.7.15\n- CUDA/cuDNN version:  Cuda 9.0 and Cudnn 7.xx\n- GPU models and configuration: Quadro P400, Drivers 384.130", "body": "## Issue description\r\nWhen I try to run this [test](https://github.com/facebookresearch/Detectron/blob/master/INSTALL.md#detectron) from Detectron within a conda environment named (cudapy2), I get the following problem: \r\n`(cudapy2) python2 $DETECTRON/detectron/tests/test_spatial_narrow_as_op.py`\r\n```\r\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\r\nWARNING:root:Debug message: /home/mounir/miniconda3/envs/cudapy2/lib/python2.7/site-packages/caffe2/python/../../../../libcaffe2.so: undefined symbol: _ZN6google15SetUsageMessageERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\r\nSegmentation fault (core dumped)\r\n```\r\nI tried to reinstall Caffe2 within the virtual env from built-in libraries but it didn't solve my problem.\r\n\r\nCaffe2 with GPU support used to work, yesterday. The following command was working fine within the same environment\r\n`import caffe2.python.core` \r\nI think that I started having this problem when I followed the [installation procedure for Detectron](https://github.com/facebookresearch/Detectron/blob/master/INSTALL.md#detectron).\r\n\r\n**- PyTorch or Caffe2:** Caffe2 compatible with Cuda 9\r\n**- How you installed Caffe2 (conda, pip, source):** conda from built-in libraries installed through the following command \r\n`conda install -c caffe2 caffe2-cuda9.0-cudnn7`\r\n**- OS:** Ubuntu 16.04\r\n**- Python version:** 2.7.15\r\n**- CUDA/cuDNN version:**  Cuda 9.0 and Cudnn 7.xx\r\n**- GPU models and configuration:** Quadro P400, Drivers 384.130\r\n"}
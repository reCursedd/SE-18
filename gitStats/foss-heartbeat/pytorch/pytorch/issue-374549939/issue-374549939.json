{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13185", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13185/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13185/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13185/events", "html_url": "https://github.com/pytorch/pytorch/pull/13185", "id": 374549939, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI2MjI4MTAy", "number": 13185, "title": "Reimplement as_strided in ATen.", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-26T21:14:49Z", "updated_at": "2018-11-23T15:53:51Z", "closed_at": "2018-10-30T14:54:45Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/13185", "html_url": "https://github.com/pytorch/pytorch/pull/13185", "diff_url": "https://github.com/pytorch/pytorch/pull/13185.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/13185.patch"}, "body_html": "<p>This moves away from using tensor.set_(...) for as_strided, which went<br>\nthrough TH and was weirdly slow/complicated. The new as_strided has a<br>\nnew invariant that it will never resize the storage to a larger size<br>\n(the previous as_strided allowed that behavior but it seemed weird and<br>\nnone of our code relied on it.)</p>\n<p>This offers a small speedup on as_strided: it went from 1300ns to<br>\n1100ns although the benchmarks get a little noisy here.</p>\n<p>Also on the changelog is a quick fix to resize_ code to avoid unsigned<br>\nunderflow. I'll rewrite the resize_ zero dim logic in a future diff, it<br>\ndoesn't make sense the way it is written right now.</p>\n<p>Test Plan: ran tests</p>", "body_text": "This moves away from using tensor.set_(...) for as_strided, which went\nthrough TH and was weirdly slow/complicated. The new as_strided has a\nnew invariant that it will never resize the storage to a larger size\n(the previous as_strided allowed that behavior but it seemed weird and\nnone of our code relied on it.)\nThis offers a small speedup on as_strided: it went from 1300ns to\n1100ns although the benchmarks get a little noisy here.\nAlso on the changelog is a quick fix to resize_ code to avoid unsigned\nunderflow. I'll rewrite the resize_ zero dim logic in a future diff, it\ndoesn't make sense the way it is written right now.\nTest Plan: ran tests", "body": "This moves away from using tensor.set_(...) for as_strided, which went\r\nthrough TH and was weirdly slow/complicated. The new as_strided has a\r\nnew invariant that it will never resize the storage to a larger size\r\n(the previous as_strided allowed that behavior but it seemed weird and\r\nnone of our code relied on it.)\r\n\r\nThis offers a small speedup on as_strided: it went from 1300ns to\r\n1100ns although the benchmarks get a little noisy here.\r\n\r\nAlso on the changelog is a quick fix to resize_ code to avoid unsigned\r\nunderflow. I'll rewrite the resize_ zero dim logic in a future diff, it\r\ndoesn't make sense the way it is written right now.\r\n\r\nTest Plan: ran tests\r\n\r\n"}
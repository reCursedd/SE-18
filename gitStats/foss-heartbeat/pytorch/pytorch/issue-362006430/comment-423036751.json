{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/423036751", "html_url": "https://github.com/pytorch/pytorch/issues/11883#issuecomment-423036751", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/11883", "id": 423036751, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzAzNjc1MQ==", "user": {"login": "leomao", "id": 1811303, "node_id": "MDQ6VXNlcjE4MTEzMDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1811303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leomao", "html_url": "https://github.com/leomao", "followers_url": "https://api.github.com/users/leomao/followers", "following_url": "https://api.github.com/users/leomao/following{/other_user}", "gists_url": "https://api.github.com/users/leomao/gists{/gist_id}", "starred_url": "https://api.github.com/users/leomao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leomao/subscriptions", "organizations_url": "https://api.github.com/users/leomao/orgs", "repos_url": "https://api.github.com/users/leomao/repos", "events_url": "https://api.github.com/users/leomao/events{/privacy}", "received_events_url": "https://api.github.com/users/leomao/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-20T04:30:44Z", "updated_at": "2018-09-20T04:30:44Z", "author_association": "NONE", "body_html": "<p>This issue doesn't appear on the master.  I use the following code to test.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> numpy <span class=\"pl-k\">as</span> np\n<span class=\"pl-k\">import</span> torch\n\n\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">test_slice_sigmoid</span>():\n    a <span class=\"pl-k\">=</span> torch.tensor([[[[<span class=\"pl-k\">-</span><span class=\"pl-c1\">0.4999</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">0.3056</span>], [<span class=\"pl-k\">-</span><span class=\"pl-c1\">0.4527</span>,  <span class=\"pl-c1\">0.2193</span>]], [[ <span class=\"pl-c1\">0.2018</span>,  <span class=\"pl-c1\">0.0478</span>], [ <span class=\"pl-c1\">0.0697</span>,  <span class=\"pl-c1\">0.0002</span>]]]])\n    bbb <span class=\"pl-k\">=</span> a[:, :, <span class=\"pl-c1\">1</span>:<span class=\"pl-c1\">2</span>, :]\n    bbb_clone <span class=\"pl-k\">=</span> bbb.clone()\n    bbb_numpy <span class=\"pl-k\">=</span> bbb.numpy()\n    sigmoid_numpy <span class=\"pl-k\">=</span> <span class=\"pl-c1\">1</span> <span class=\"pl-k\">/</span> (<span class=\"pl-c1\">1</span> <span class=\"pl-k\">+</span> np.exp(<span class=\"pl-k\">-</span>bbb_numpy))\n    sigmoid_torch_clone <span class=\"pl-k\">=</span> torch.sigmoid(bbb_clone)\n    sigmoid_torch <span class=\"pl-k\">=</span> torch.sigmoid(bbb)\n    sigmoid_torch_manual <span class=\"pl-k\">=</span> <span class=\"pl-c1\">1</span> <span class=\"pl-k\">/</span> (<span class=\"pl-c1\">1</span> <span class=\"pl-k\">+</span> torch.exp(<span class=\"pl-k\">-</span>bbb))\n    diff1 <span class=\"pl-k\">=</span> torch.sum(torch.abs(sigmoid_torch <span class=\"pl-k\">-</span> sigmoid_torch_manual))\n    diff2 <span class=\"pl-k\">=</span> torch.sum(torch.abs(torch.as_tensor(sigmoid_numpy) <span class=\"pl-k\">-</span> sigmoid_torch_manual))\n    diff3 <span class=\"pl-k\">=</span> torch.sum(torch.abs(sigmoid_torch_manual <span class=\"pl-k\">-</span> sigmoid_torch_clone))\n    <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>diff1 = <span class=\"pl-pds\">'</span></span>, diff1.item())\n    <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>diff2 = <span class=\"pl-pds\">'</span></span>, diff2.item())\n    <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>diff3 = <span class=\"pl-pds\">'</span></span>, diff3.item())\n\n\ntest_slice_sigmoid()</pre></div>", "body_text": "This issue doesn't appear on the master.  I use the following code to test.\nimport numpy as np\nimport torch\n\n\ndef test_slice_sigmoid():\n    a = torch.tensor([[[[-0.4999, -0.3056], [-0.4527,  0.2193]], [[ 0.2018,  0.0478], [ 0.0697,  0.0002]]]])\n    bbb = a[:, :, 1:2, :]\n    bbb_clone = bbb.clone()\n    bbb_numpy = bbb.numpy()\n    sigmoid_numpy = 1 / (1 + np.exp(-bbb_numpy))\n    sigmoid_torch_clone = torch.sigmoid(bbb_clone)\n    sigmoid_torch = torch.sigmoid(bbb)\n    sigmoid_torch_manual = 1 / (1 + torch.exp(-bbb))\n    diff1 = torch.sum(torch.abs(sigmoid_torch - sigmoid_torch_manual))\n    diff2 = torch.sum(torch.abs(torch.as_tensor(sigmoid_numpy) - sigmoid_torch_manual))\n    diff3 = torch.sum(torch.abs(sigmoid_torch_manual - sigmoid_torch_clone))\n    print('diff1 = ', diff1.item())\n    print('diff2 = ', diff2.item())\n    print('diff3 = ', diff3.item())\n\n\ntest_slice_sigmoid()", "body": "This issue doesn't appear on the master.  I use the following code to test.\r\n\r\n```python\r\nimport numpy as np\r\nimport torch\r\n\r\n\r\ndef test_slice_sigmoid():\r\n    a = torch.tensor([[[[-0.4999, -0.3056], [-0.4527,  0.2193]], [[ 0.2018,  0.0478], [ 0.0697,  0.0002]]]])\r\n    bbb = a[:, :, 1:2, :]\r\n    bbb_clone = bbb.clone()\r\n    bbb_numpy = bbb.numpy()\r\n    sigmoid_numpy = 1 / (1 + np.exp(-bbb_numpy))\r\n    sigmoid_torch_clone = torch.sigmoid(bbb_clone)\r\n    sigmoid_torch = torch.sigmoid(bbb)\r\n    sigmoid_torch_manual = 1 / (1 + torch.exp(-bbb))\r\n    diff1 = torch.sum(torch.abs(sigmoid_torch - sigmoid_torch_manual))\r\n    diff2 = torch.sum(torch.abs(torch.as_tensor(sigmoid_numpy) - sigmoid_torch_manual))\r\n    diff3 = torch.sum(torch.abs(sigmoid_torch_manual - sigmoid_torch_clone))\r\n    print('diff1 = ', diff1.item())\r\n    print('diff2 = ', diff2.item())\r\n    print('diff3 = ', diff3.item())\r\n\r\n\r\ntest_slice_sigmoid()\r\n```"}
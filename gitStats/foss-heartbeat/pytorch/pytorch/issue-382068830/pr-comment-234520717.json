{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/234520717", "pull_request_review_id": 176175439, "id": 234520717, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNDUyMDcxNw==", "diff_hunk": "@@ -292,8 +292,10 @@ using SizeType = uint64_t;\n #define SYSCHECK(expr)                                        \\\n   {                                                           \\\n     errno = 0;                                                \\\n-    auto ___output = (expr);                                  \\\n-    (void)___output;                                          \\\n+    while (errno != EINTR) {                                  \\", "path": "torch/lib/c10d/Utils.hpp", "position": null, "original_position": 6, "commit_id": "f9f2f89832cd4f9daac80a4941179e812700952a", "original_commit_id": "133d18097e7439c4812acabba71fc87989b71759", "user": {"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}, "body": "This is probably not the correct strategy since dist tests are failing. Probably what I should do is to not use `SYSCHECK` and do a manual retry at https://github.com/pytorch/pytorch/blob/2681852438f9f80b43fd2502d83839140733b68c/torch/lib/c10d/TCPStore.cpp#L70. Or maybe a non-throwing version of `SYSCHECK`? Need to hear from the code owners @teng-li and @pietern .", "created_at": "2018-11-19T07:59:45Z", "updated_at": "2018-11-23T15:55:08Z", "html_url": "https://github.com/pytorch/pytorch/pull/14180#discussion_r234520717", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/14180", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/234520717"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/14180#discussion_r234520717"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/14180"}}, "body_html": "<p>This is probably not the correct strategy since dist tests are failing. Probably what I should do is to not use <code>SYSCHECK</code> and do a manual retry at <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/2681852438f9f80b43fd2502d83839140733b68c/torch/lib/c10d/TCPStore.cpp#L70\">pytorch/torch/lib/c10d/TCPStore.cpp</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 70\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/2681852438f9f80b43fd2502d83839140733b68c\">2681852</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L70\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"70\"></td>\n          <td id=\"LC70\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-c1\">SYSCHECK</span>(::<span class=\"pl-c1\">poll</span>(fds.<span class=\"pl-c1\">data</span>(), fds.<span class=\"pl-c1\">size</span>(), -<span class=\"pl-c1\">1</span>)); </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n. Or maybe a non-throwing version of <code>SYSCHECK</code>? Need to hear from the code owners <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8120856\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/teng-li\">@teng-li</a> and <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9845\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/pietern\">@pietern</a> .</p>", "body_text": "This is probably not the correct strategy since dist tests are failing. Probably what I should do is to not use SYSCHECK and do a manual retry at \n  \n    \n      pytorch/torch/lib/c10d/TCPStore.cpp\n    \n    \n         Line 70\n      in\n      2681852\n    \n    \n    \n    \n\n        \n          \n           SYSCHECK(::poll(fds.data(), fds.size(), -1)); \n        \n    \n  \n\n. Or maybe a non-throwing version of SYSCHECK? Need to hear from the code owners @teng-li and @pietern .", "in_reply_to_id": 234503503}
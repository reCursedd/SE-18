{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/440073178", "html_url": "https://github.com/pytorch/pytorch/pull/14180#issuecomment-440073178", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/14180", "id": 440073178, "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDA3MzE3OA==", "user": {"login": "pietern", "id": 9845, "node_id": "MDQ6VXNlcjk4NDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/9845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietern", "html_url": "https://github.com/pietern", "followers_url": "https://api.github.com/users/pietern/followers", "following_url": "https://api.github.com/users/pietern/following{/other_user}", "gists_url": "https://api.github.com/users/pietern/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietern/subscriptions", "organizations_url": "https://api.github.com/users/pietern/orgs", "repos_url": "https://api.github.com/users/pietern/repos", "events_url": "https://api.github.com/users/pietern/events{/privacy}", "received_events_url": "https://api.github.com/users/pietern/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-19T22:59:50Z", "updated_at": "2018-11-19T22:59:50Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5674597\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/SsnL\">@SsnL</a> Thanks for the PR. This should be fixed indeed. I think a throwing SYSCHECK is fine as any unhandled errors should bubble up ASAP. Also note that there are call sites where the wrapper is not used and instead the return value is checked manually. This helper should be reserved for calls that are expected to never fail.</p>\n<p>The tests are failing because the test you do is <code>while (errno != EINTR)</code> and in the successful case it will stay equal to 0, so infloop. It should be <code>do { .. } while (errno == EINTR)</code>.</p>", "body_text": "@SsnL Thanks for the PR. This should be fixed indeed. I think a throwing SYSCHECK is fine as any unhandled errors should bubble up ASAP. Also note that there are call sites where the wrapper is not used and instead the return value is checked manually. This helper should be reserved for calls that are expected to never fail.\nThe tests are failing because the test you do is while (errno != EINTR) and in the successful case it will stay equal to 0, so infloop. It should be do { .. } while (errno == EINTR).", "body": "@SsnL Thanks for the PR. This should be fixed indeed. I think a throwing SYSCHECK is fine as any unhandled errors should bubble up ASAP. Also note that there are call sites where the wrapper is not used and instead the return value is checked manually. This helper should be reserved for calls that are expected to never fail.\r\n\r\nThe tests are failing because the test you do is `while (errno != EINTR)` and in the successful case it will stay equal to 0, so infloop. It should be `do { .. } while (errno == EINTR)`."}
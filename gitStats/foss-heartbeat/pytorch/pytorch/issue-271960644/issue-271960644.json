{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3542", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3542/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3542/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3542/events", "html_url": "https://github.com/pytorch/pytorch/issues/3542", "id": 271960644, "node_id": "MDU6SXNzdWUyNzE5NjA2NDQ=", "number": 3542, "title": "Minor: docker build fails on submodule because of gitdir with absolute path name (problem with git v 2.7/2.8, fixed in git v 2.9)", "user": {"login": "utke1", "id": 2487076, "node_id": "MDQ6VXNlcjI0ODcwNzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/2487076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/utke1", "html_url": "https://github.com/utke1", "followers_url": "https://api.github.com/users/utke1/followers", "following_url": "https://api.github.com/users/utke1/following{/other_user}", "gists_url": "https://api.github.com/users/utke1/gists{/gist_id}", "starred_url": "https://api.github.com/users/utke1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/utke1/subscriptions", "organizations_url": "https://api.github.com/users/utke1/orgs", "repos_url": "https://api.github.com/users/utke1/repos", "events_url": "https://api.github.com/users/utke1/events{/privacy}", "received_events_url": "https://api.github.com/users/utke1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-07T19:49:52Z", "updated_at": "2018-11-07T16:06:39Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>error message is</p>\n<pre><code>Removing intermediate container dee615013001\nStep 9/14 : COPY . .\n ---&gt; 489276daed51\nStep 10/14 : RUN git submodule update --init\n ---&gt; Running in ca195ce4b458\nfatal: Not a git repository: /data/work/Git/pytorch/.git/modules/torch/lib/gloo\nUnable to find current revision in submodule path 'torch/lib/gloo'                                      \nThe command '/bin/sh -c git submodule update --init' returned a non-zero code: 1\n</code></pre>\n<p>Reason:  pytorch was cloned with --recursive (as recommended) into <code>/data/work/Git/</code>  and the submodule stores in file<br>\n<code>/data/work/Git/pytorch/.git/modules/torch/lib/gloo/.git</code><br>\nthe absolute pathname as</p>\n<pre><code>gitdir: /data/work/Git/pytorch/.git/modules/torch/lib/gloo\n</code></pre>\n<p>But when</p>\n<pre><code>COPY . . \n</code></pre>\n<p>is run to copy  everything into <code>/opt</code> the absolute pathname won't match - hence the error.</p>\n<p>This is apparently a know problem in git, see <a href=\"https://lwn.net/Articles/691223/\" rel=\"nofollow\">https://lwn.net/Articles/691223/</a>  and fixed in v 2.9<br>\nSo may be you can just put a note on the page telling people about this to save them time.</p>", "body_text": "error message is\nRemoving intermediate container dee615013001\nStep 9/14 : COPY . .\n ---> 489276daed51\nStep 10/14 : RUN git submodule update --init\n ---> Running in ca195ce4b458\nfatal: Not a git repository: /data/work/Git/pytorch/.git/modules/torch/lib/gloo\nUnable to find current revision in submodule path 'torch/lib/gloo'                                      \nThe command '/bin/sh -c git submodule update --init' returned a non-zero code: 1\n\nReason:  pytorch was cloned with --recursive (as recommended) into /data/work/Git/  and the submodule stores in file\n/data/work/Git/pytorch/.git/modules/torch/lib/gloo/.git\nthe absolute pathname as\ngitdir: /data/work/Git/pytorch/.git/modules/torch/lib/gloo\n\nBut when\nCOPY . . \n\nis run to copy  everything into /opt the absolute pathname won't match - hence the error.\nThis is apparently a know problem in git, see https://lwn.net/Articles/691223/  and fixed in v 2.9\nSo may be you can just put a note on the page telling people about this to save them time.", "body": "error message is \r\n```\r\nRemoving intermediate container dee615013001\r\nStep 9/14 : COPY . .\r\n ---> 489276daed51\r\nStep 10/14 : RUN git submodule update --init\r\n ---> Running in ca195ce4b458\r\nfatal: Not a git repository: /data/work/Git/pytorch/.git/modules/torch/lib/gloo\r\nUnable to find current revision in submodule path 'torch/lib/gloo'                                      \r\nThe command '/bin/sh -c git submodule update --init' returned a non-zero code: 1\r\n```\r\nReason:  pytorch was cloned with --recursive (as recommended) into ```/data/work/Git/```  and the submodule stores in file \r\n```/data/work/Git/pytorch/.git/modules/torch/lib/gloo/.git```\r\nthe absolute pathname as\r\n```\r\ngitdir: /data/work/Git/pytorch/.git/modules/torch/lib/gloo\r\n```\r\nBut when \r\n```\r\nCOPY . . \r\n``` \r\nis run to copy  everything into ```/opt``` the absolute pathname won't match - hence the error.\r\n\r\nThis is apparently a know problem in git, see https://lwn.net/Articles/691223/  and fixed in v 2.9 \r\nSo may be you can just put a note on the page telling people about this to save them time. \r\n"}
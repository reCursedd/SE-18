{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/164596505", "pull_request_review_id": 92394070, "id": 164596505, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDU5NjUwNQ==", "diff_hunk": "@@ -434,6 +447,7 @@ void THTensor_(getRNGState)(THGenerator *_generator, THTensor *self)\n   THArgCheck(THTensor_(isContiguous)(self), 1, \"RNG state needs to be contiguous\");\n   rng_state = (THGenerator *)THTensor_(data)(self);\n   THGenerator_copy(rng_state, _generator);\n+  rng_state->mutex = NULL;  // mutex should not be part of the generator state", "path": "aten/src/TH/generic/THTensorRandom.cpp", "position": null, "original_position": 116, "commit_id": "4028540d217200a9ded3ea020ae8fc8cf40dde2f", "original_commit_id": "2b648a6cbd09f92f3002e0bf413955bdb250157e", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "They are POD, but POD doesn't mean that the struct doesn't have padding. We shouldn't be dumping padding bytes, nor should we depend on the actual layout of THGenerator in memory.", "created_at": "2018-01-29T23:20:50Z", "updated_at": "2018-11-23T15:38:42Z", "html_url": "https://github.com/pytorch/pytorch/pull/4041#discussion_r164596505", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/4041", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/164596505"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/4041#discussion_r164596505"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/4041"}}, "body_html": "<p>They are POD, but POD doesn't mean that the struct doesn't have padding. We shouldn't be dumping padding bytes, nor should we depend on the actual layout of THGenerator in memory.</p>", "body_text": "They are POD, but POD doesn't mean that the struct doesn't have padding. We shouldn't be dumping padding bytes, nor should we depend on the actual layout of THGenerator in memory.", "in_reply_to_id": 164543758}
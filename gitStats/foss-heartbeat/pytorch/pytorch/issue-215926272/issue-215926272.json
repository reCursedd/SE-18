{"url": "https://api.github.com/repos/pytorch/pytorch/issues/1057", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/1057/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/1057/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/1057/events", "html_url": "https://github.com/pytorch/pytorch/issues/1057", "id": 215926272, "node_id": "MDU6SXNzdWUyMTU5MjYyNzI=", "number": 1057, "title": "Embedding max_norm bug on cuda?", "user": {"login": "ChenRocks", "id": 6073275, "node_id": "MDQ6VXNlcjYwNzMyNzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/6073275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChenRocks", "html_url": "https://github.com/ChenRocks", "followers_url": "https://api.github.com/users/ChenRocks/followers", "following_url": "https://api.github.com/users/ChenRocks/following{/other_user}", "gists_url": "https://api.github.com/users/ChenRocks/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChenRocks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChenRocks/subscriptions", "organizations_url": "https://api.github.com/users/ChenRocks/orgs", "repos_url": "https://api.github.com/users/ChenRocks/repos", "events_url": "https://api.github.com/users/ChenRocks/events{/privacy}", "received_events_url": "https://api.github.com/users/ChenRocks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 424131847, "node_id": "MDU6TGFiZWw0MjQxMzE4NDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bug", "name": "bug", "color": "b60205", "default": true}, {"id": 443484135, "node_id": "MDU6TGFiZWw0NDM0ODQxMzU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/high%20priority", "name": "high priority", "color": "F22613", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-03-22T01:22:48Z", "updated_at": "2017-03-22T15:53:42Z", "closed_at": "2017-03-22T15:53:42Z", "author_association": "NONE", "body_html": "<p><code>E = nn.Embedding(5, 10, max_norm=1.0).cuda()</code><br>\n<code>print torch.norm(E.weight[1, :])</code><br>\n<code>x = Variable(torch.LongTensor([[1]])).cuda()</code><br>\n<code>E(x)</code><br>\n<code>print torch.norm(E.weight[1, :])</code></p>\n<p>The  embedding vector was not renormalized to 1 ( The cpu version works fine though)<br>\nI use pytorch 0.1.10(<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/77fbc12f2334ad219e3c94301fd7237c4a3a86f3/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/77fbc12f2334ad219e3c94301fd7237c4a3a86f3\"><tt>77fbc12</tt></a>) compiled from source with cuda 8.0</p>", "body_text": "E = nn.Embedding(5, 10, max_norm=1.0).cuda()\nprint torch.norm(E.weight[1, :])\nx = Variable(torch.LongTensor([[1]])).cuda()\nE(x)\nprint torch.norm(E.weight[1, :])\nThe  embedding vector was not renormalized to 1 ( The cpu version works fine though)\nI use pytorch 0.1.10(77fbc12) compiled from source with cuda 8.0", "body": "`E = nn.Embedding(5, 10, max_norm=1.0).cuda()`\r\n`print torch.norm(E.weight[1, :])`\r\n`x = Variable(torch.LongTensor([[1]])).cuda()`\r\n`E(x)`\r\n`print torch.norm(E.weight[1, :])`\r\n\r\nThe  embedding vector was not renormalized to 1 ( The cpu version works fine though)\r\nI use pytorch 0.1.10(77fbc12) compiled from source with cuda 8.0"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/174858314", "pull_request_review_id": 104293496, "id": 174858314, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NDg1ODMxNA==", "diff_hunk": "@@ -0,0 +1,41 @@\n+from torch.distributions import constraints\n+from torch.distributions.transforms import InvertableBoltzmannTransform\n+from torch.distributions.normal import Normal\n+from torch.distributions.transformed_distribution import TransformedDistribution\n+\n+\n+class LogitNormal(TransformedDistribution):\n+    r\"\"\"\n+    Creates a logit-normal distribution parameterized by\n+    `mean` and `std` where::\n+\n+        X ~ LogitNormal(loc, scale)\n+        Y = log(X / (1 - X)) ~ Normal(loc, scale)\n+\n+    Example::\n+\n+        >>> m = LogitNormal(torch.Tensor([0.0]), torch.Tensor([1.0]))\n+        >>> m.sample()  # logit-normal distributed with mean=0 and stddev=1\n+         0.4655\n+         0.5345\n+        [torch.FloatTensor of size (2,)]\n+\n+    Args:\n+        loc (float or Tensor): mean\n+        scale (float or Tensor): standard deviation\n+    \"\"\"\n+    params = {'loc': constraints.real, 'scale': constraints.positive}\n+    support = constraints.positive\n+    has_rsample = True\n+\n+    def __init__(self, loc, scale):\n+        super(LogitNormal, self).__init__(\n+            Normal(loc, scale), InvertableBoltzmannTransform())\n+\n+    @property\n+    def loc(self):\n+        return self.base_dist.loc\n+\n+    @property\n+    def scale(self):\n+        return self.base_dist.scale", "path": "torch/distributions/logit_normal.py", "position": null, "original_position": 41, "commit_id": "10377b822c64e8fc42893656f98451efaccc6559", "original_commit_id": "1ba3b1f9be364fd10c95cf6cedd689910a215cc8", "user": {"login": "alshedivat", "id": 2126561, "node_id": "MDQ6VXNlcjIxMjY1NjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/2126561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alshedivat", "html_url": "https://github.com/alshedivat", "followers_url": "https://api.github.com/users/alshedivat/followers", "following_url": "https://api.github.com/users/alshedivat/following{/other_user}", "gists_url": "https://api.github.com/users/alshedivat/gists{/gist_id}", "starred_url": "https://api.github.com/users/alshedivat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alshedivat/subscriptions", "organizations_url": "https://api.github.com/users/alshedivat/orgs", "repos_url": "https://api.github.com/users/alshedivat/repos", "events_url": "https://api.github.com/users/alshedivat/events{/privacy}", "received_events_url": "https://api.github.com/users/alshedivat/received_events", "type": "User", "site_admin": false}, "body": "@fritzo, agreed -- one-line version should work and the extra constraints should come from the transform for free. Given that moments for this distribution don't have an analytical form, it's probably not worth subclassing. I'm guessing if I remove `LogitNormal`, the tests for that one should go as well, correct?", "created_at": "2018-03-15T17:04:06Z", "updated_at": "2018-11-23T15:40:47Z", "html_url": "https://github.com/pytorch/pytorch/pull/5547#discussion_r174858314", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/5547", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/174858314"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/5547#discussion_r174858314"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/5547"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=648532\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fritzo\">@fritzo</a>, agreed -- one-line version should work and the extra constraints should come from the transform for free. Given that moments for this distribution don't have an analytical form, it's probably not worth subclassing. I'm guessing if I remove <code>LogitNormal</code>, the tests for that one should go as well, correct?</p>", "body_text": "@fritzo, agreed -- one-line version should work and the extra constraints should come from the transform for free. Given that moments for this distribution don't have an analytical form, it's probably not worth subclassing. I'm guessing if I remove LogitNormal, the tests for that one should go as well, correct?", "in_reply_to_id": 172062171}
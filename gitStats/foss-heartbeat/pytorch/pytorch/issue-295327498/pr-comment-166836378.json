{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/166836378", "pull_request_review_id": 94961198, "id": 166836378, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NjgzNjM3OA==", "diff_hunk": "@@ -282,7 +292,7 @@ int THPVariable_set_data(THPVariable *self, PyObject *data)\n   if (&self->cdata.data().type() != &tensor.type()) {\n     // we change the type of var.data so we must change the type of var\n     auto newType = VariableType::getType(tensor);\n-    self->cdata.get()->*get(TensorImpl_Type()) = newType;", "path": "torch/csrc/autograd/python_variable.cpp", "position": 141, "original_position": 102, "commit_id": "eba1e177795cddcd1971096dbccdcd81e0dcd773", "original_commit_id": "088215bd4f82e8f84d8a56bbc553e0e71b2afcf5", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "body": "There are no more call sites of `TensorImpl_Type`. This means you should delete the hack, right?\r\n\r\n```\r\n// XXX: This is a hack to access private TensorImpl::type_\r\n// http://bloglitb.blogspot.com/2011/12/access-to-private-members-safer.html\r\n// This is currently needed because module.float() changes the type of the\r\n// data field of each variable. We should fix this and not allow changing the\r\n// type of var.data.\r\n```\r\n\r\nBut this is not the end of the story. See `set_type` for more.", "created_at": "2018-02-08T05:35:33Z", "updated_at": "2018-11-23T15:39:22Z", "html_url": "https://github.com/pytorch/pytorch/pull/5127#discussion_r166836378", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/5127", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/166836378"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/5127#discussion_r166836378"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/5127"}}, "body_html": "<p>There are no more call sites of <code>TensorImpl_Type</code>. This means you should delete the hack, right?</p>\n<pre><code>// XXX: This is a hack to access private TensorImpl::type_\n// http://bloglitb.blogspot.com/2011/12/access-to-private-members-safer.html\n// This is currently needed because module.float() changes the type of the\n// data field of each variable. We should fix this and not allow changing the\n// type of var.data.\n</code></pre>\n<p>But this is not the end of the story. See <code>set_type</code> for more.</p>", "body_text": "There are no more call sites of TensorImpl_Type. This means you should delete the hack, right?\n// XXX: This is a hack to access private TensorImpl::type_\n// http://bloglitb.blogspot.com/2011/12/access-to-private-members-safer.html\n// This is currently needed because module.float() changes the type of the\n// data field of each variable. We should fix this and not allow changing the\n// type of var.data.\n\nBut this is not the end of the story. See set_type for more."}
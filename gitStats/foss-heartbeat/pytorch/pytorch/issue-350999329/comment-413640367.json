{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/413640367", "html_url": "https://github.com/pytorch/pytorch/pull/10561#issuecomment-413640367", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/10561", "id": 413640367, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzY0MDM2Nw==", "user": {"login": "csarofeen", "id": 22205833, "node_id": "MDQ6VXNlcjIyMjA1ODMz", "avatar_url": "https://avatars2.githubusercontent.com/u/22205833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csarofeen", "html_url": "https://github.com/csarofeen", "followers_url": "https://api.github.com/users/csarofeen/followers", "following_url": "https://api.github.com/users/csarofeen/following{/other_user}", "gists_url": "https://api.github.com/users/csarofeen/gists{/gist_id}", "starred_url": "https://api.github.com/users/csarofeen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csarofeen/subscriptions", "organizations_url": "https://api.github.com/users/csarofeen/orgs", "repos_url": "https://api.github.com/users/csarofeen/repos", "events_url": "https://api.github.com/users/csarofeen/events{/privacy}", "received_events_url": "https://api.github.com/users/csarofeen/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-16T18:25:07Z", "updated_at": "2018-08-16T18:30:04Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks for taking a look <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a> . In response to each point:</p>\n<p>(1) I understand your concern about code duplication, but this is an artifact of the split and small in absolute terms. Going forward we expect the CUDA and CPU fusers to diverge, just like code paths for the GPU and CPU diverge in ATen. We could create a common/ folder, but the few files in it would likely be specialized quickly, anyway.</p>\n<p>(2) It's true that current PRs will have to be updated for this structure, and in the future a fix maybe need to be \"made twice.\" This is, again, the same as GPU vs. CPU in ATen. We are willing, however, to port CPU fuser features to the CUDA fuser.</p>\n<p>(3) I think organizing the files by classes follows best practices, will help new (to the fuser) engineers get up to speed more quickly, and improves the clarity of the code. I appreciate we can have different opinions about this, but not having so many classes in the same file has been really helpful to me when reading the code.</p>", "body_text": "Thanks for taking a look @apaszke . In response to each point:\n(1) I understand your concern about code duplication, but this is an artifact of the split and small in absolute terms. Going forward we expect the CUDA and CPU fusers to diverge, just like code paths for the GPU and CPU diverge in ATen. We could create a common/ folder, but the few files in it would likely be specialized quickly, anyway.\n(2) It's true that current PRs will have to be updated for this structure, and in the future a fix maybe need to be \"made twice.\" This is, again, the same as GPU vs. CPU in ATen. We are willing, however, to port CPU fuser features to the CUDA fuser.\n(3) I think organizing the files by classes follows best practices, will help new (to the fuser) engineers get up to speed more quickly, and improves the clarity of the code. I appreciate we can have different opinions about this, but not having so many classes in the same file has been really helpful to me when reading the code.", "body": "Thanks for taking a look @apaszke . In response to each point:\r\n\r\n(1) I understand your concern about code duplication, but this is an artifact of the split and small in absolute terms. Going forward we expect the CUDA and CPU fusers to diverge, just like code paths for the GPU and CPU diverge in ATen. We could create a common/ folder, but the few files in it would likely be specialized quickly, anyway.\r\n\r\n(2) It's true that current PRs will have to be updated for this structure, and in the future a fix maybe need to be \"made twice.\" This is, again, the same as GPU vs. CPU in ATen. We are willing, however, to port CPU fuser features to the CUDA fuser.\r\n\r\n(3) I think organizing the files by classes follows best practices, will help new (to the fuser) engineers get up to speed more quickly, and improves the clarity of the code. I appreciate we can have different opinions about this, but not having so many classes in the same file has been really helpful to me when reading the code."}
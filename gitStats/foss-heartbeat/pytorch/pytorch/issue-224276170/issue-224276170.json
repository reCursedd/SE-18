{"url": "https://api.github.com/repos/pytorch/pytorch/issues/1357", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/1357/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/1357/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/1357/events", "html_url": "https://github.com/pytorch/pytorch/issues/1357", "id": 224276170, "node_id": "MDU6SXNzdWUyMjQyNzYxNzA=", "number": 1357, "title": "ConvNd C implementation doesn't check tensor types", "user": {"login": "angelleng", "id": 3339036, "node_id": "MDQ6VXNlcjMzMzkwMzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/3339036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angelleng", "html_url": "https://github.com/angelleng", "followers_url": "https://api.github.com/users/angelleng/followers", "following_url": "https://api.github.com/users/angelleng/following{/other_user}", "gists_url": "https://api.github.com/users/angelleng/gists{/gist_id}", "starred_url": "https://api.github.com/users/angelleng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angelleng/subscriptions", "organizations_url": "https://api.github.com/users/angelleng/orgs", "repos_url": "https://api.github.com/users/angelleng/repos", "events_url": "https://api.github.com/users/angelleng/events{/privacy}", "received_events_url": "https://api.github.com/users/angelleng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 424131847, "node_id": "MDU6TGFiZWw0MjQxMzE4NDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bug", "name": "bug", "color": "b60205", "default": true}], "state": "closed", "locked": false, "assignee": {"login": "colesbury", "id": 655866, "node_id": "MDQ6VXNlcjY1NTg2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/655866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colesbury", "html_url": "https://github.com/colesbury", "followers_url": "https://api.github.com/users/colesbury/followers", "following_url": "https://api.github.com/users/colesbury/following{/other_user}", "gists_url": "https://api.github.com/users/colesbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/colesbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colesbury/subscriptions", "organizations_url": "https://api.github.com/users/colesbury/orgs", "repos_url": "https://api.github.com/users/colesbury/repos", "events_url": "https://api.github.com/users/colesbury/events{/privacy}", "received_events_url": "https://api.github.com/users/colesbury/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "colesbury", "id": 655866, "node_id": "MDQ6VXNlcjY1NTg2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/655866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colesbury", "html_url": "https://github.com/colesbury", "followers_url": "https://api.github.com/users/colesbury/followers", "following_url": "https://api.github.com/users/colesbury/following{/other_user}", "gists_url": "https://api.github.com/users/colesbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/colesbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colesbury/subscriptions", "organizations_url": "https://api.github.com/users/colesbury/orgs", "repos_url": "https://api.github.com/users/colesbury/repos", "events_url": "https://api.github.com/users/colesbury/events{/privacy}", "received_events_url": "https://api.github.com/users/colesbury/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2017-04-25T21:22:17Z", "updated_at": "2017-04-27T22:21:34Z", "closed_at": "2017-04-26T19:00:42Z", "author_association": "NONE", "body_html": "<p>the error only happens in very specific conditions. (change the view of input tensor and use weight converted from numpy array.)</p>\n<pre><code>import torch\nimport torch.nn as nn\nimport numpy as np\nfrom torch.autograd import Variable\nfilter_size = 5\na = torch.randn(3,3,64,64) \nweights = np.random.rand(25).reshape(5,5)\nweights = torch.from_numpy(weights.reshape(1,1,5,5)) \nout1 = nn.functional.conv2d(Variable(a.view(9,1,64,64)), Variable(weights)) \npsi = nn.Conv2d(1,1, filter_size, bias=True) \npsi.weight.data.copy_(weights) \npsi.bias.data.fill_(0)\nout2 = psi(Variable(a.view(9,1,64,64))) \nprint(out1.mean())\nprint(out2.mean()) \n</code></pre>\n<p>The output of functional conv2d is far off in scale (e12 or so.)</p>", "body_text": "the error only happens in very specific conditions. (change the view of input tensor and use weight converted from numpy array.)\nimport torch\nimport torch.nn as nn\nimport numpy as np\nfrom torch.autograd import Variable\nfilter_size = 5\na = torch.randn(3,3,64,64) \nweights = np.random.rand(25).reshape(5,5)\nweights = torch.from_numpy(weights.reshape(1,1,5,5)) \nout1 = nn.functional.conv2d(Variable(a.view(9,1,64,64)), Variable(weights)) \npsi = nn.Conv2d(1,1, filter_size, bias=True) \npsi.weight.data.copy_(weights) \npsi.bias.data.fill_(0)\nout2 = psi(Variable(a.view(9,1,64,64))) \nprint(out1.mean())\nprint(out2.mean()) \n\nThe output of functional conv2d is far off in scale (e12 or so.)", "body": "the error only happens in very specific conditions. (change the view of input tensor and use weight converted from numpy array.)\r\n```\r\nimport torch\r\nimport torch.nn as nn\r\nimport numpy as np\r\nfrom torch.autograd import Variable\r\nfilter_size = 5\r\na = torch.randn(3,3,64,64) \r\nweights = np.random.rand(25).reshape(5,5)\r\nweights = torch.from_numpy(weights.reshape(1,1,5,5)) \r\nout1 = nn.functional.conv2d(Variable(a.view(9,1,64,64)), Variable(weights)) \r\npsi = nn.Conv2d(1,1, filter_size, bias=True) \r\npsi.weight.data.copy_(weights) \r\npsi.bias.data.fill_(0)\r\nout2 = psi(Variable(a.view(9,1,64,64))) \r\nprint(out1.mean())\r\nprint(out2.mean()) \r\n``` \r\nThe output of functional conv2d is far off in scale (e12 or so.) "}
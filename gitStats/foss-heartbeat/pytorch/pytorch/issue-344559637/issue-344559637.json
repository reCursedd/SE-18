{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9833", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9833/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9833/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9833/events", "html_url": "https://github.com/pytorch/pytorch/issues/9833", "id": 344559637, "node_id": "MDU6SXNzdWUzNDQ1NTk2Mzc=", "number": 9833, "title": "RecurrentNetworkTest.test_sum_mul flaky on master", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-25T18:37:47Z", "updated_at": "2018-07-30T17:59:06Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>Sample log:</p>\n<pre><code>18:22:31 ______________________ RecurrentNetworkTest.test_sum_mul _______________________\n18:22:31 \n18:22:31 self = &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;\n18:22:31 \n18:22:31     @given(T=st.integers(1, 4),\n18:22:31 &gt;          n=st.integers(1, 5),\n18:22:31            d=st.integers(1, 5))\n18:22:31     def test_sum_mul(self, T, n, d):\n18:22:31 \n18:22:31 lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py:16: \n18:22:31 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n18:22:31 ../lib/python2.7/dist-packages/hypothesis/core.py:632: in execute\n18:22:31     ) % (test.__name__, text_repr[0],))\n18:22:31 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n18:22:31 \n18:22:31 self = &lt;hypothesis.core.StateForActualGivenExecution object at 0x7f018f167510&gt;\n18:22:31 message = 'Hypothesis test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=4, n=3, d=5) produces unreliable results: Falsified on the first call but did not on a subsequent one'\n18:22:31 \n18:22:31     def __flaky(self, message):\n18:22:31         if len(self.falsifying_examples) &lt;= 1:\n18:22:31 &gt;           raise Flaky(message)\n18:22:31 E           Flaky: Hypothesis test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=4, n=3, d=5) produces unreliable results: Falsified on the first call but did not on a subsequent one\n18:22:31 \n18:22:31 ../lib/python2.7/dist-packages/hypothesis/core.py:891: Flaky\n18:22:31 ----------------------------- Captured stdout call -----------------------------\n18:22:31 {'initial_input': array([[[1.5184125]]], dtype=float32), 'd': 1, 'input_blob': BlobReference(\"input\"), 'self': &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, 'step': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10&gt;, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 1, 'T': 1, 'input': array([[[0.557589]]], dtype=float32), 'output_t': BlobReference(\"step_20/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120410&gt;}\n18:22:31 {'initial_input': array([[[ 0.20415092,  0.04424965,  0.05876766,  0.13209015,\n18:22:31          -0.14152476],\n18:22:31         [-0.02223694, -0.20313036, -0.21301892, -0.46252254,\n18:22:31          -0.15070197],\n18:22:31         [ 1.0079899 , -1.025239  , -0.24425474,  1.8190565 ,\n18:22:31           0.5815316 ],\n18:22:31         [-0.8584382 , -0.28322494,  0.65600324,  0.19910617,\n18:22:31           0.1950967 ],\n18:22:31         [ 0.7740338 , -0.99557   , -0.30322793,  0.6355936 ,\n18:22:31          -2.2815175 ]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, 'step': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10&gt;, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 5, 'T': 2, 'input': array([[[ 0.42100802,  0.51040167, -0.06911499,  0.46264836,\n18:22:31           0.870698  ],\n18:22:31         [-0.9387773 ,  0.4444731 , -0.12237249,  1.5723627 ,\n18:22:31           0.13432613],\n18:22:31         [-0.0364393 ,  0.1861109 , -0.27428454,  0.40380037,\n18:22:31          -2.2644155 ],\n18:22:31         [-0.46650547,  0.25926057,  1.8391542 , -0.9147064 ,\n18:22:31           0.76503885],\n18:22:31         [-1.2923847 ,  0.2901264 ,  0.5088624 ,  0.20501915,\n18:22:31           1.0248165 ]],\n18:22:31 \n18:22:31        [[-0.1697867 ,  0.68312687, -0.14560637,  1.8063573 ,\n18:22:31          -0.3688225 ],\n18:22:31         [ 1.74944   , -1.8447171 , -0.56797045,  0.07198138,\n18:22:31          -0.07245477],\n18:22:31         [ 0.7295559 ,  1.1857799 , -0.2962678 , -0.35142457,\n18:22:31           1.1793648 ],\n18:22:31         [ 1.4748063 , -0.04535495,  2.3564653 ,  0.3160243 ,\n18:22:31           0.6566746 ],\n18:22:31         [ 0.16876645, -1.0654182 ,  0.77977324, -0.9389751 ,\n18:22:31          -0.13033825]]], dtype=float32), 'output_t': BlobReference(\"step_21/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120910&gt;}\n18:22:31 {'initial_input': array([[[-0.48681718],\n18:22:31         [-0.80353683],\n18:22:31         [-0.47081515],\n18:22:31         [-1.2215934 ]]], dtype=float32), 'd': 1, 'input_blob': BlobReference(\"input\"), 'self': &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, 'step': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10&gt;, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 4, 'T': 1, 'input': array([[[ 0.02781585],\n18:22:31         [-0.7876165 ],\n18:22:31         [-0.40615654],\n18:22:31         [ 0.12991883]]], dtype=float32), 'output_t': BlobReference(\"step_22/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120c50&gt;}\n18:22:31 {'initial_input': array([[[-0.8592571 , -0.9633066 ],\n18:22:31         [-0.551414  ,  0.6119808 ],\n18:22:31         [ 0.35402197,  1.8453431 ]]], dtype=float32), 'd': 2, 'input_blob': BlobReference(\"input\"), 'self': &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, 'step': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10&gt;, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 1, 'input': array([[[-0.25272676,  0.9249346 ],\n18:22:31         [ 0.43470767,  0.24026872],\n18:22:31         [ 0.4984736 ,  0.53626764]]], dtype=float32), 'output_t': BlobReference(\"step_23/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120ed0&gt;}\n18:22:31 {'initial_input': array([[[ 1.2263615 , -0.34003612,  0.3226285 , -0.33002457,\n18:22:31           1.2180504 ]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, 'step': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10&gt;, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 1, 'T': 3, 'input': array([[[ 1.2874925 , -0.39584252, -1.0349792 ,  1.1784227 ,\n18:22:31          -0.6230235 ]],\n18:22:31 \n18:22:31        [[-0.06517015,  1.4694325 ,  0.3571824 ,  0.4511442 ,\n18:22:31           0.7484481 ]],\n18:22:31 \n18:22:31        [[-0.52475715,  1.0127801 , -0.7990553 , -0.6789061 ,\n18:22:31          -0.56921774]]], dtype=float32), 'output_t': BlobReference(\"step_24/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120110&gt;}\n18:22:31 {'initial_input': array([[[ 0.7450836 , -0.36449087,  1.495697  ,  0.38684726,\n18:22:31           0.24421713],\n18:22:31         [ 0.9961174 , -0.38725296, -0.07786704, -1.3025856 ,\n18:22:31           0.18941292],\n18:22:31         [ 0.604185  ,  0.3225782 , -1.2312236 ,  0.4078619 ,\n18:22:31           0.74156535]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, 'step': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10&gt;, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[ 9.5676079e-02,  4.7348753e-02, -2.3075762e+00,  8.7461978e-01,\n18:22:31           1.0523793e+00],\n18:22:31         [ 1.5133331e+00, -7.0312604e-02, -3.2707265e-01, -1.5700451e+00,\n18:22:31           6.7571187e-01],\n18:22:31         [ 4.5518768e-01, -1.5315011e+00, -1.1990951e+00,  7.8470570e-01,\n18:22:31           1.0307373e+00]],\n18:22:31 \n18:22:31        [[ 1.4149730e+00, -5.7154946e-02, -3.7503326e-01, -1.3107193e+00,\n18:22:31           1.2293317e+00],\n18:22:31         [ 2.9780290e-01,  1.1017808e+00, -1.1126875e+00, -1.1529174e+00,\n18:22:31           2.7476633e-01],\n18:22:31         [ 5.9095424e-01, -1.0143272e+00,  2.5723398e+00,  2.1354153e+00,\n18:22:31           3.2740596e-01]],\n18:22:31 \n18:22:31        [[ 6.1540174e-01,  1.7378359e-01,  8.5490328e-01, -1.0699755e+00,\n18:22:31           1.3963130e-03],\n18:22:31         [ 1.2691458e+00,  3.1973779e+00,  3.8151178e-01, -1.5815099e-01,\n18:22:31          -3.6112014e-02],\n18:22:31         [-6.8628603e-01,  2.4467190e-01, -1.7838315e+00, -1.0843762e-01,\n18:22:31           9.7848618e-01]],\n18:22:31 \n18:22:31        [[-1.1634557e+00, -8.5165852e-01,  1.0774436e-01, -2.0282397e+00,\n18:22:31           1.2611674e-01],\n18:22:31         [-6.7734355e-01,  1.6760310e+00,  1.0455403e+00, -2.2225683e+00,\n18:22:31           6.1652046e-01],\n18:22:31         [-8.6773843e-01, -2.1065728e-01,  8.7376434e-01, -1.6145964e+00,\n18:22:31           1.0567403e+00]]], dtype=float32), 'output_t': BlobReference(\"step_25/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120b50&gt;}\n18:22:31 Failed. [idx, grad, grad_estimate] are:\n18:22:31 [[1.60000000e+01 1.21509358e-02 2.44140625e-02]\n18:22:31  [2.40000000e+01 2.58594334e-01 2.44140625e-01]]\n18:22:31 {'initial_input': array([[[-0.98521817, -0.49375018,  1.2114307 ,  0.83064103,\n18:22:31           0.9515079 ],\n18:22:31         [-0.6671654 ,  1.5725821 , -1.3764278 ,  0.8447245 ,\n18:22:31           1.131876  ],\n18:22:31         [-2.9223871 ,  0.8350941 ,  0.00456691,  1.590506  ,\n18:22:31          -0.19740537]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, 'step': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018eaea2d0&gt;, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[-0.5757757 ,  2.4270587 ,  1.0259343 , -0.651193  ,\n18:22:31          -0.27704948],\n18:22:31         [-0.18033682,  0.31782374,  1.1670837 ,  0.16814648,\n18:22:31          -0.747601  ],\n18:22:31         [ 0.48920032,  0.8893542 ,  1.529806  , -0.274032  ,\n18:22:31           0.06552326]],\n18:22:31 \n18:22:31        [[-1.255711  ,  1.0821327 , -1.842773  ,  0.00774081,\n18:22:31          -1.8505908 ],\n18:22:31         [ 0.24820343, -0.23764256,  1.5792552 ,  0.86364585,\n18:22:31          -0.61370146],\n18:22:31         [ 0.23868927,  0.5627646 ,  1.4904244 , -0.67682195,\n18:22:31           1.5734532 ]],\n18:22:31 \n18:22:31        [[-0.13108684, -0.17078772, -1.0842882 , -1.2463546 ,\n18:22:31           0.60079515],\n18:22:31         [-0.11783342, -0.9976157 , -0.56140375,  0.33434495,\n18:22:31           0.09841382],\n18:22:31         [ 0.5232402 ,  0.21773338, -0.69488454, -0.628351  ,\n18:22:31          -0.5340653 ]],\n18:22:31 \n18:22:31        [[ 0.8596289 ,  0.82965237,  1.4320815 , -0.40076438,\n18:22:31           0.71038485],\n18:22:31         [-1.200479  , -0.22418295,  0.5408255 , -1.9307754 ,\n18:22:31           0.3732496 ],\n18:22:31         [-0.7377602 ,  0.8895791 ,  1.2150432 ,  0.84749776,\n18:22:31          -1.6757202 ]]], dtype=float32), 'output_t': BlobReference(\"step_26/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018eaea190&gt;}\n18:22:31 {'initial_input': array([[[ 0.14318995, -0.15366645, -0.01733815,  1.537961  ,\n18:22:31           0.31601045],\n18:22:31         [ 0.8625949 ,  1.410735  ,  0.60667753, -0.47015253,\n18:22:31           1.4734355 ],\n18:22:31         [ 0.79635704, -1.7393378 ,  0.42786115,  0.5607386 ,\n18:22:31           0.34342203]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': &lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, 'step': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120710&gt;, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[ 7.7122921e-01,  7.9306579e-01, -7.4156016e-01,  6.9938803e-01,\n18:22:31           1.1368722e+00],\n18:22:31         [-1.7121632e+00,  6.7158586e-01,  4.9981758e-01,  3.6968786e-01,\n18:22:31          -2.3082924e+00],\n18:22:31         [-1.1180100e+00,  5.8233100e-01,  1.2467133e-01, -8.3507699e-01,\n18:22:31          -3.2413715e-01]],\n18:22:31 \n18:22:31        [[-5.1864809e-01, -1.2111757e+00, -5.5342978e-01, -1.5710856e+00,\n18:22:31           1.2269875e+00],\n18:22:31         [ 1.5938463e+00,  6.6119522e-01,  9.5621443e-01, -6.3825691e-01,\n18:22:31           1.1857471e+00],\n18:22:31         [-3.8388982e-01,  7.9185891e-01,  7.2088742e-01, -5.0930220e-01,\n18:22:31           2.5873727e-01]],\n18:22:31 \n18:22:31        [[-7.9322062e-02,  1.5006196e-01,  1.0773627e+00,  1.0334906e-01,\n18:22:31           5.0270373e-01],\n18:22:31         [ 9.4164926e-01, -8.5349239e-02, -5.0853068e-01,  1.1829562e+00,\n18:22:31           9.8272848e-01],\n18:22:31         [-5.3078097e-01, -9.1883695e-01,  1.0447986e+00,  3.4758983e+00,\n18:22:31          -1.0487611e-01]],\n18:22:31 \n18:22:31        [[-1.3811163e+00, -6.5873885e-01, -9.8303992e-01, -1.9586353e-01,\n18:22:31           2.1494757e-03],\n18:22:31         [ 1.7026168e+00,  1.2549912e+00, -7.7275425e-01,  3.7716261e-01,\n18:22:31           9.2703742e-01],\n18:22:31         [-3.7202635e-01, -1.9569679e+00,  2.7668619e-01,  1.9082175e+00,\n18:22:31           4.8463443e-01]]], dtype=float32), 'output_t': BlobReference(\"step_27/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': &lt;caffe2.python.model_helper.ModelHelper object at 0x7f018f120c90&gt;}\n18:22:31 ---------------------------------- Hypothesis ----------------------------------\n18:22:31 Trying example: test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=1, n=1, d=1)\n18:22:31 Trying example: test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=2, n=5, d=5)\n18:22:31 Trying example: test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=1, n=4, d=1)\n18:22:31 Trying example: test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=1, n=3, d=2)\n18:22:31 Trying example: test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=3, n=1, d=5)\n18:22:31 Trying example: test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=4, n=3, d=5)\n18:22:31 Traceback (most recent call last):\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 689, in evaluate_test_data\n18:22:31     result = self.execute(data, collect=True)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 604, in execute\n18:22:31     result = self.test_runner(data, run)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/executors.py\", line 58, in default_new_style_executor\n18:22:31     return function(data)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 600, in run\n18:22:31     return test(*args, **kwargs)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 16, in test_sum_mul\n18:22:31     n=st.integers(1, 5),\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 542, in test\n18:22:31     result = self.test(*args, **kwargs)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 32, in test_sum_mul\n18:22:31     input_blob, initial_input_blob)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 164, in simple_rnn\n18:22:31     stepsize=0.005,\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py\", line 397, in assertGradientChecks\n18:22:31     \"Gradient check failed for input \" + str(op.input[outputs_to_check])\n18:22:31   File \"/usr/lib/python2.7/unittest/case.py\", line 422, in assertTrue\n18:22:31     raise self.failureException(msg)\n18:22:31 AssertionError: Gradient check failed for input input\n18:22:31 \n18:22:31 Trying example: test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=4, n=3, d=5)\n18:22:31 Falsifying example: test_sum_mul(self=&lt;caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul&gt;, T=4, n=3, d=5)\n18:22:31 Failed to reproduce exception. Expected: \n18:22:31 Traceback (most recent call last):\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 689, in evaluate_test_data\n18:22:31     result = self.execute(data, collect=True)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 604, in execute\n18:22:31     result = self.test_runner(data, run)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/executors.py\", line 58, in default_new_style_executor\n18:22:31     return function(data)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 600, in run\n18:22:31     return test(*args, **kwargs)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 16, in test_sum_mul\n18:22:31     n=st.integers(1, 5),\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 542, in test\n18:22:31     result = self.test(*args, **kwargs)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 32, in test_sum_mul\n18:22:31     input_blob, initial_input_blob)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 164, in simple_rnn\n18:22:31     stepsize=0.005,\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py\", line 397, in assertGradientChecks\n18:22:31     \"Gradient check failed for input \" + str(op.input[outputs_to_check])\n18:22:31   File \"/usr/lib/python2.7/unittest/case.py\", line 422, in assertTrue\n18:22:31     raise self.failureException(msg)\n18:22:31 AssertionError: Gradient check failed for input input\n18:22:31 \n18:22:31 \n18:22:31 You can reproduce this example by temporarily adding @reproduce_failure('3.66.8', 'AAMHBQYEAg==') as a decorator on your test case\n18:22:31  generated xml file: /var/lib/jenkins/workspace/caffe2_tests/python/result.xml -\n</code></pre>\n<p><a href=\"https://ci.pytorch.org/jenkins/job/caffe2-builds/job/py2-cuda8.0-cudnn6-ubuntu16.04-test/9411//consoleFull\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/caffe2-builds/job/py2-cuda8.0-cudnn6-ubuntu16.04-test/9411//consoleFull</a></p>\n<p>CC <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20307328\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/salexspb\">@salexspb</a> who added this test</p>", "body_text": "Sample log:\n18:22:31 ______________________ RecurrentNetworkTest.test_sum_mul _______________________\n18:22:31 \n18:22:31 self = <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>\n18:22:31 \n18:22:31     @given(T=st.integers(1, 4),\n18:22:31 >          n=st.integers(1, 5),\n18:22:31            d=st.integers(1, 5))\n18:22:31     def test_sum_mul(self, T, n, d):\n18:22:31 \n18:22:31 lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py:16: \n18:22:31 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n18:22:31 ../lib/python2.7/dist-packages/hypothesis/core.py:632: in execute\n18:22:31     ) % (test.__name__, text_repr[0],))\n18:22:31 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n18:22:31 \n18:22:31 self = <hypothesis.core.StateForActualGivenExecution object at 0x7f018f167510>\n18:22:31 message = 'Hypothesis test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5) produces unreliable results: Falsified on the first call but did not on a subsequent one'\n18:22:31 \n18:22:31     def __flaky(self, message):\n18:22:31         if len(self.falsifying_examples) <= 1:\n18:22:31 >           raise Flaky(message)\n18:22:31 E           Flaky: Hypothesis test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5) produces unreliable results: Falsified on the first call but did not on a subsequent one\n18:22:31 \n18:22:31 ../lib/python2.7/dist-packages/hypothesis/core.py:891: Flaky\n18:22:31 ----------------------------- Captured stdout call -----------------------------\n18:22:31 {'initial_input': array([[[1.5184125]]], dtype=float32), 'd': 1, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 1, 'T': 1, 'input': array([[[0.557589]]], dtype=float32), 'output_t': BlobReference(\"step_20/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120410>}\n18:22:31 {'initial_input': array([[[ 0.20415092,  0.04424965,  0.05876766,  0.13209015,\n18:22:31          -0.14152476],\n18:22:31         [-0.02223694, -0.20313036, -0.21301892, -0.46252254,\n18:22:31          -0.15070197],\n18:22:31         [ 1.0079899 , -1.025239  , -0.24425474,  1.8190565 ,\n18:22:31           0.5815316 ],\n18:22:31         [-0.8584382 , -0.28322494,  0.65600324,  0.19910617,\n18:22:31           0.1950967 ],\n18:22:31         [ 0.7740338 , -0.99557   , -0.30322793,  0.6355936 ,\n18:22:31          -2.2815175 ]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 5, 'T': 2, 'input': array([[[ 0.42100802,  0.51040167, -0.06911499,  0.46264836,\n18:22:31           0.870698  ],\n18:22:31         [-0.9387773 ,  0.4444731 , -0.12237249,  1.5723627 ,\n18:22:31           0.13432613],\n18:22:31         [-0.0364393 ,  0.1861109 , -0.27428454,  0.40380037,\n18:22:31          -2.2644155 ],\n18:22:31         [-0.46650547,  0.25926057,  1.8391542 , -0.9147064 ,\n18:22:31           0.76503885],\n18:22:31         [-1.2923847 ,  0.2901264 ,  0.5088624 ,  0.20501915,\n18:22:31           1.0248165 ]],\n18:22:31 \n18:22:31        [[-0.1697867 ,  0.68312687, -0.14560637,  1.8063573 ,\n18:22:31          -0.3688225 ],\n18:22:31         [ 1.74944   , -1.8447171 , -0.56797045,  0.07198138,\n18:22:31          -0.07245477],\n18:22:31         [ 0.7295559 ,  1.1857799 , -0.2962678 , -0.35142457,\n18:22:31           1.1793648 ],\n18:22:31         [ 1.4748063 , -0.04535495,  2.3564653 ,  0.3160243 ,\n18:22:31           0.6566746 ],\n18:22:31         [ 0.16876645, -1.0654182 ,  0.77977324, -0.9389751 ,\n18:22:31          -0.13033825]]], dtype=float32), 'output_t': BlobReference(\"step_21/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120910>}\n18:22:31 {'initial_input': array([[[-0.48681718],\n18:22:31         [-0.80353683],\n18:22:31         [-0.47081515],\n18:22:31         [-1.2215934 ]]], dtype=float32), 'd': 1, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 4, 'T': 1, 'input': array([[[ 0.02781585],\n18:22:31         [-0.7876165 ],\n18:22:31         [-0.40615654],\n18:22:31         [ 0.12991883]]], dtype=float32), 'output_t': BlobReference(\"step_22/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120c50>}\n18:22:31 {'initial_input': array([[[-0.8592571 , -0.9633066 ],\n18:22:31         [-0.551414  ,  0.6119808 ],\n18:22:31         [ 0.35402197,  1.8453431 ]]], dtype=float32), 'd': 2, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 1, 'input': array([[[-0.25272676,  0.9249346 ],\n18:22:31         [ 0.43470767,  0.24026872],\n18:22:31         [ 0.4984736 ,  0.53626764]]], dtype=float32), 'output_t': BlobReference(\"step_23/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120ed0>}\n18:22:31 {'initial_input': array([[[ 1.2263615 , -0.34003612,  0.3226285 , -0.33002457,\n18:22:31           1.2180504 ]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 1, 'T': 3, 'input': array([[[ 1.2874925 , -0.39584252, -1.0349792 ,  1.1784227 ,\n18:22:31          -0.6230235 ]],\n18:22:31 \n18:22:31        [[-0.06517015,  1.4694325 ,  0.3571824 ,  0.4511442 ,\n18:22:31           0.7484481 ]],\n18:22:31 \n18:22:31        [[-0.52475715,  1.0127801 , -0.7990553 , -0.6789061 ,\n18:22:31          -0.56921774]]], dtype=float32), 'output_t': BlobReference(\"step_24/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120110>}\n18:22:31 {'initial_input': array([[[ 0.7450836 , -0.36449087,  1.495697  ,  0.38684726,\n18:22:31           0.24421713],\n18:22:31         [ 0.9961174 , -0.38725296, -0.07786704, -1.3025856 ,\n18:22:31           0.18941292],\n18:22:31         [ 0.604185  ,  0.3225782 , -1.2312236 ,  0.4078619 ,\n18:22:31           0.74156535]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[ 9.5676079e-02,  4.7348753e-02, -2.3075762e+00,  8.7461978e-01,\n18:22:31           1.0523793e+00],\n18:22:31         [ 1.5133331e+00, -7.0312604e-02, -3.2707265e-01, -1.5700451e+00,\n18:22:31           6.7571187e-01],\n18:22:31         [ 4.5518768e-01, -1.5315011e+00, -1.1990951e+00,  7.8470570e-01,\n18:22:31           1.0307373e+00]],\n18:22:31 \n18:22:31        [[ 1.4149730e+00, -5.7154946e-02, -3.7503326e-01, -1.3107193e+00,\n18:22:31           1.2293317e+00],\n18:22:31         [ 2.9780290e-01,  1.1017808e+00, -1.1126875e+00, -1.1529174e+00,\n18:22:31           2.7476633e-01],\n18:22:31         [ 5.9095424e-01, -1.0143272e+00,  2.5723398e+00,  2.1354153e+00,\n18:22:31           3.2740596e-01]],\n18:22:31 \n18:22:31        [[ 6.1540174e-01,  1.7378359e-01,  8.5490328e-01, -1.0699755e+00,\n18:22:31           1.3963130e-03],\n18:22:31         [ 1.2691458e+00,  3.1973779e+00,  3.8151178e-01, -1.5815099e-01,\n18:22:31          -3.6112014e-02],\n18:22:31         [-6.8628603e-01,  2.4467190e-01, -1.7838315e+00, -1.0843762e-01,\n18:22:31           9.7848618e-01]],\n18:22:31 \n18:22:31        [[-1.1634557e+00, -8.5165852e-01,  1.0774436e-01, -2.0282397e+00,\n18:22:31           1.2611674e-01],\n18:22:31         [-6.7734355e-01,  1.6760310e+00,  1.0455403e+00, -2.2225683e+00,\n18:22:31           6.1652046e-01],\n18:22:31         [-8.6773843e-01, -2.1065728e-01,  8.7376434e-01, -1.6145964e+00,\n18:22:31           1.0567403e+00]]], dtype=float32), 'output_t': BlobReference(\"step_25/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120b50>}\n18:22:31 Failed. [idx, grad, grad_estimate] are:\n18:22:31 [[1.60000000e+01 1.21509358e-02 2.44140625e-02]\n18:22:31  [2.40000000e+01 2.58594334e-01 2.44140625e-01]]\n18:22:31 {'initial_input': array([[[-0.98521817, -0.49375018,  1.2114307 ,  0.83064103,\n18:22:31           0.9515079 ],\n18:22:31         [-0.6671654 ,  1.5725821 , -1.3764278 ,  0.8447245 ,\n18:22:31           1.131876  ],\n18:22:31         [-2.9223871 ,  0.8350941 ,  0.00456691,  1.590506  ,\n18:22:31          -0.19740537]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018eaea2d0>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[-0.5757757 ,  2.4270587 ,  1.0259343 , -0.651193  ,\n18:22:31          -0.27704948],\n18:22:31         [-0.18033682,  0.31782374,  1.1670837 ,  0.16814648,\n18:22:31          -0.747601  ],\n18:22:31         [ 0.48920032,  0.8893542 ,  1.529806  , -0.274032  ,\n18:22:31           0.06552326]],\n18:22:31 \n18:22:31        [[-1.255711  ,  1.0821327 , -1.842773  ,  0.00774081,\n18:22:31          -1.8505908 ],\n18:22:31         [ 0.24820343, -0.23764256,  1.5792552 ,  0.86364585,\n18:22:31          -0.61370146],\n18:22:31         [ 0.23868927,  0.5627646 ,  1.4904244 , -0.67682195,\n18:22:31           1.5734532 ]],\n18:22:31 \n18:22:31        [[-0.13108684, -0.17078772, -1.0842882 , -1.2463546 ,\n18:22:31           0.60079515],\n18:22:31         [-0.11783342, -0.9976157 , -0.56140375,  0.33434495,\n18:22:31           0.09841382],\n18:22:31         [ 0.5232402 ,  0.21773338, -0.69488454, -0.628351  ,\n18:22:31          -0.5340653 ]],\n18:22:31 \n18:22:31        [[ 0.8596289 ,  0.82965237,  1.4320815 , -0.40076438,\n18:22:31           0.71038485],\n18:22:31         [-1.200479  , -0.22418295,  0.5408255 , -1.9307754 ,\n18:22:31           0.3732496 ],\n18:22:31         [-0.7377602 ,  0.8895791 ,  1.2150432 ,  0.84749776,\n18:22:31          -1.6757202 ]]], dtype=float32), 'output_t': BlobReference(\"step_26/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018eaea190>}\n18:22:31 {'initial_input': array([[[ 0.14318995, -0.15366645, -0.01733815,  1.537961  ,\n18:22:31           0.31601045],\n18:22:31         [ 0.8625949 ,  1.410735  ,  0.60667753, -0.47015253,\n18:22:31           1.4734355 ],\n18:22:31         [ 0.79635704, -1.7393378 ,  0.42786115,  0.5607386 ,\n18:22:31           0.34342203]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120710>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[ 7.7122921e-01,  7.9306579e-01, -7.4156016e-01,  6.9938803e-01,\n18:22:31           1.1368722e+00],\n18:22:31         [-1.7121632e+00,  6.7158586e-01,  4.9981758e-01,  3.6968786e-01,\n18:22:31          -2.3082924e+00],\n18:22:31         [-1.1180100e+00,  5.8233100e-01,  1.2467133e-01, -8.3507699e-01,\n18:22:31          -3.2413715e-01]],\n18:22:31 \n18:22:31        [[-5.1864809e-01, -1.2111757e+00, -5.5342978e-01, -1.5710856e+00,\n18:22:31           1.2269875e+00],\n18:22:31         [ 1.5938463e+00,  6.6119522e-01,  9.5621443e-01, -6.3825691e-01,\n18:22:31           1.1857471e+00],\n18:22:31         [-3.8388982e-01,  7.9185891e-01,  7.2088742e-01, -5.0930220e-01,\n18:22:31           2.5873727e-01]],\n18:22:31 \n18:22:31        [[-7.9322062e-02,  1.5006196e-01,  1.0773627e+00,  1.0334906e-01,\n18:22:31           5.0270373e-01],\n18:22:31         [ 9.4164926e-01, -8.5349239e-02, -5.0853068e-01,  1.1829562e+00,\n18:22:31           9.8272848e-01],\n18:22:31         [-5.3078097e-01, -9.1883695e-01,  1.0447986e+00,  3.4758983e+00,\n18:22:31          -1.0487611e-01]],\n18:22:31 \n18:22:31        [[-1.3811163e+00, -6.5873885e-01, -9.8303992e-01, -1.9586353e-01,\n18:22:31           2.1494757e-03],\n18:22:31         [ 1.7026168e+00,  1.2549912e+00, -7.7275425e-01,  3.7716261e-01,\n18:22:31           9.2703742e-01],\n18:22:31         [-3.7202635e-01, -1.9569679e+00,  2.7668619e-01,  1.9082175e+00,\n18:22:31           4.8463443e-01]]], dtype=float32), 'output_t': BlobReference(\"step_27/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120c90>}\n18:22:31 ---------------------------------- Hypothesis ----------------------------------\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=1, n=1, d=1)\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=2, n=5, d=5)\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=1, n=4, d=1)\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=1, n=3, d=2)\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=3, n=1, d=5)\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5)\n18:22:31 Traceback (most recent call last):\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 689, in evaluate_test_data\n18:22:31     result = self.execute(data, collect=True)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 604, in execute\n18:22:31     result = self.test_runner(data, run)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/executors.py\", line 58, in default_new_style_executor\n18:22:31     return function(data)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 600, in run\n18:22:31     return test(*args, **kwargs)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 16, in test_sum_mul\n18:22:31     n=st.integers(1, 5),\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 542, in test\n18:22:31     result = self.test(*args, **kwargs)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 32, in test_sum_mul\n18:22:31     input_blob, initial_input_blob)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 164, in simple_rnn\n18:22:31     stepsize=0.005,\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py\", line 397, in assertGradientChecks\n18:22:31     \"Gradient check failed for input \" + str(op.input[outputs_to_check])\n18:22:31   File \"/usr/lib/python2.7/unittest/case.py\", line 422, in assertTrue\n18:22:31     raise self.failureException(msg)\n18:22:31 AssertionError: Gradient check failed for input input\n18:22:31 \n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5)\n18:22:31 Falsifying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5)\n18:22:31 Failed to reproduce exception. Expected: \n18:22:31 Traceback (most recent call last):\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 689, in evaluate_test_data\n18:22:31     result = self.execute(data, collect=True)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 604, in execute\n18:22:31     result = self.test_runner(data, run)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/executors.py\", line 58, in default_new_style_executor\n18:22:31     return function(data)\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 600, in run\n18:22:31     return test(*args, **kwargs)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 16, in test_sum_mul\n18:22:31     n=st.integers(1, 5),\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 542, in test\n18:22:31     result = self.test(*args, **kwargs)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 32, in test_sum_mul\n18:22:31     input_blob, initial_input_blob)\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 164, in simple_rnn\n18:22:31     stepsize=0.005,\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py\", line 397, in assertGradientChecks\n18:22:31     \"Gradient check failed for input \" + str(op.input[outputs_to_check])\n18:22:31   File \"/usr/lib/python2.7/unittest/case.py\", line 422, in assertTrue\n18:22:31     raise self.failureException(msg)\n18:22:31 AssertionError: Gradient check failed for input input\n18:22:31 \n18:22:31 \n18:22:31 You can reproduce this example by temporarily adding @reproduce_failure('3.66.8', 'AAMHBQYEAg==') as a decorator on your test case\n18:22:31  generated xml file: /var/lib/jenkins/workspace/caffe2_tests/python/result.xml -\n\nhttps://ci.pytorch.org/jenkins/job/caffe2-builds/job/py2-cuda8.0-cudnn6-ubuntu16.04-test/9411//consoleFull\nCC @salexspb who added this test", "body": "Sample log:\r\n\r\n```\r\n18:22:31 ______________________ RecurrentNetworkTest.test_sum_mul _______________________\r\n18:22:31 \r\n18:22:31 self = <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>\r\n18:22:31 \r\n18:22:31     @given(T=st.integers(1, 4),\r\n18:22:31 >          n=st.integers(1, 5),\r\n18:22:31            d=st.integers(1, 5))\r\n18:22:31     def test_sum_mul(self, T, n, d):\r\n18:22:31 \r\n18:22:31 lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py:16: \r\n18:22:31 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n18:22:31 ../lib/python2.7/dist-packages/hypothesis/core.py:632: in execute\r\n18:22:31     ) % (test.__name__, text_repr[0],))\r\n18:22:31 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n18:22:31 \r\n18:22:31 self = <hypothesis.core.StateForActualGivenExecution object at 0x7f018f167510>\r\n18:22:31 message = 'Hypothesis test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5) produces unreliable results: Falsified on the first call but did not on a subsequent one'\r\n18:22:31 \r\n18:22:31     def __flaky(self, message):\r\n18:22:31         if len(self.falsifying_examples) <= 1:\r\n18:22:31 >           raise Flaky(message)\r\n18:22:31 E           Flaky: Hypothesis test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5) produces unreliable results: Falsified on the first call but did not on a subsequent one\r\n18:22:31 \r\n18:22:31 ../lib/python2.7/dist-packages/hypothesis/core.py:891: Flaky\r\n18:22:31 ----------------------------- Captured stdout call -----------------------------\r\n18:22:31 {'initial_input': array([[[1.5184125]]], dtype=float32), 'd': 1, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 1, 'T': 1, 'input': array([[[0.557589]]], dtype=float32), 'output_t': BlobReference(\"step_20/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120410>}\r\n18:22:31 {'initial_input': array([[[ 0.20415092,  0.04424965,  0.05876766,  0.13209015,\r\n18:22:31          -0.14152476],\r\n18:22:31         [-0.02223694, -0.20313036, -0.21301892, -0.46252254,\r\n18:22:31          -0.15070197],\r\n18:22:31         [ 1.0079899 , -1.025239  , -0.24425474,  1.8190565 ,\r\n18:22:31           0.5815316 ],\r\n18:22:31         [-0.8584382 , -0.28322494,  0.65600324,  0.19910617,\r\n18:22:31           0.1950967 ],\r\n18:22:31         [ 0.7740338 , -0.99557   , -0.30322793,  0.6355936 ,\r\n18:22:31          -2.2815175 ]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 5, 'T': 2, 'input': array([[[ 0.42100802,  0.51040167, -0.06911499,  0.46264836,\r\n18:22:31           0.870698  ],\r\n18:22:31         [-0.9387773 ,  0.4444731 , -0.12237249,  1.5723627 ,\r\n18:22:31           0.13432613],\r\n18:22:31         [-0.0364393 ,  0.1861109 , -0.27428454,  0.40380037,\r\n18:22:31          -2.2644155 ],\r\n18:22:31         [-0.46650547,  0.25926057,  1.8391542 , -0.9147064 ,\r\n18:22:31           0.76503885],\r\n18:22:31         [-1.2923847 ,  0.2901264 ,  0.5088624 ,  0.20501915,\r\n18:22:31           1.0248165 ]],\r\n18:22:31 \r\n18:22:31        [[-0.1697867 ,  0.68312687, -0.14560637,  1.8063573 ,\r\n18:22:31          -0.3688225 ],\r\n18:22:31         [ 1.74944   , -1.8447171 , -0.56797045,  0.07198138,\r\n18:22:31          -0.07245477],\r\n18:22:31         [ 0.7295559 ,  1.1857799 , -0.2962678 , -0.35142457,\r\n18:22:31           1.1793648 ],\r\n18:22:31         [ 1.4748063 , -0.04535495,  2.3564653 ,  0.3160243 ,\r\n18:22:31           0.6566746 ],\r\n18:22:31         [ 0.16876645, -1.0654182 ,  0.77977324, -0.9389751 ,\r\n18:22:31          -0.13033825]]], dtype=float32), 'output_t': BlobReference(\"step_21/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120910>}\r\n18:22:31 {'initial_input': array([[[-0.48681718],\r\n18:22:31         [-0.80353683],\r\n18:22:31         [-0.47081515],\r\n18:22:31         [-1.2215934 ]]], dtype=float32), 'd': 1, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 4, 'T': 1, 'input': array([[[ 0.02781585],\r\n18:22:31         [-0.7876165 ],\r\n18:22:31         [-0.40615654],\r\n18:22:31         [ 0.12991883]]], dtype=float32), 'output_t': BlobReference(\"step_22/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120c50>}\r\n18:22:31 {'initial_input': array([[[-0.8592571 , -0.9633066 ],\r\n18:22:31         [-0.551414  ,  0.6119808 ],\r\n18:22:31         [ 0.35402197,  1.8453431 ]]], dtype=float32), 'd': 2, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 1, 'input': array([[[-0.25272676,  0.9249346 ],\r\n18:22:31         [ 0.43470767,  0.24026872],\r\n18:22:31         [ 0.4984736 ,  0.53626764]]], dtype=float32), 'output_t': BlobReference(\"step_23/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120ed0>}\r\n18:22:31 {'initial_input': array([[[ 1.2263615 , -0.34003612,  0.3226285 , -0.33002457,\r\n18:22:31           1.2180504 ]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 1, 'T': 3, 'input': array([[[ 1.2874925 , -0.39584252, -1.0349792 ,  1.1784227 ,\r\n18:22:31          -0.6230235 ]],\r\n18:22:31 \r\n18:22:31        [[-0.06517015,  1.4694325 ,  0.3571824 ,  0.4511442 ,\r\n18:22:31           0.7484481 ]],\r\n18:22:31 \r\n18:22:31        [[-0.52475715,  1.0127801 , -0.7990553 , -0.6789061 ,\r\n18:22:31          -0.56921774]]], dtype=float32), 'output_t': BlobReference(\"step_24/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120110>}\r\n18:22:31 {'initial_input': array([[[ 0.7450836 , -0.36449087,  1.495697  ,  0.38684726,\r\n18:22:31           0.24421713],\r\n18:22:31         [ 0.9961174 , -0.38725296, -0.07786704, -1.3025856 ,\r\n18:22:31           0.18941292],\r\n18:22:31         [ 0.604185  ,  0.3225782 , -1.2312236 ,  0.4078619 ,\r\n18:22:31           0.74156535]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120a10>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[ 9.5676079e-02,  4.7348753e-02, -2.3075762e+00,  8.7461978e-01,\r\n18:22:31           1.0523793e+00],\r\n18:22:31         [ 1.5133331e+00, -7.0312604e-02, -3.2707265e-01, -1.5700451e+00,\r\n18:22:31           6.7571187e-01],\r\n18:22:31         [ 4.5518768e-01, -1.5315011e+00, -1.1990951e+00,  7.8470570e-01,\r\n18:22:31           1.0307373e+00]],\r\n18:22:31 \r\n18:22:31        [[ 1.4149730e+00, -5.7154946e-02, -3.7503326e-01, -1.3107193e+00,\r\n18:22:31           1.2293317e+00],\r\n18:22:31         [ 2.9780290e-01,  1.1017808e+00, -1.1126875e+00, -1.1529174e+00,\r\n18:22:31           2.7476633e-01],\r\n18:22:31         [ 5.9095424e-01, -1.0143272e+00,  2.5723398e+00,  2.1354153e+00,\r\n18:22:31           3.2740596e-01]],\r\n18:22:31 \r\n18:22:31        [[ 6.1540174e-01,  1.7378359e-01,  8.5490328e-01, -1.0699755e+00,\r\n18:22:31           1.3963130e-03],\r\n18:22:31         [ 1.2691458e+00,  3.1973779e+00,  3.8151178e-01, -1.5815099e-01,\r\n18:22:31          -3.6112014e-02],\r\n18:22:31         [-6.8628603e-01,  2.4467190e-01, -1.7838315e+00, -1.0843762e-01,\r\n18:22:31           9.7848618e-01]],\r\n18:22:31 \r\n18:22:31        [[-1.1634557e+00, -8.5165852e-01,  1.0774436e-01, -2.0282397e+00,\r\n18:22:31           1.2611674e-01],\r\n18:22:31         [-6.7734355e-01,  1.6760310e+00,  1.0455403e+00, -2.2225683e+00,\r\n18:22:31           6.1652046e-01],\r\n18:22:31         [-8.6773843e-01, -2.1065728e-01,  8.7376434e-01, -1.6145964e+00,\r\n18:22:31           1.0567403e+00]]], dtype=float32), 'output_t': BlobReference(\"step_25/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120b50>}\r\n18:22:31 Failed. [idx, grad, grad_estimate] are:\r\n18:22:31 [[1.60000000e+01 1.21509358e-02 2.44140625e-02]\r\n18:22:31  [2.40000000e+01 2.58594334e-01 2.44140625e-01]]\r\n18:22:31 {'initial_input': array([[[-0.98521817, -0.49375018,  1.2114307 ,  0.83064103,\r\n18:22:31           0.9515079 ],\r\n18:22:31         [-0.6671654 ,  1.5725821 , -1.3764278 ,  0.8447245 ,\r\n18:22:31           1.131876  ],\r\n18:22:31         [-2.9223871 ,  0.8350941 ,  0.00456691,  1.590506  ,\r\n18:22:31          -0.19740537]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018eaea2d0>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[-0.5757757 ,  2.4270587 ,  1.0259343 , -0.651193  ,\r\n18:22:31          -0.27704948],\r\n18:22:31         [-0.18033682,  0.31782374,  1.1670837 ,  0.16814648,\r\n18:22:31          -0.747601  ],\r\n18:22:31         [ 0.48920032,  0.8893542 ,  1.529806  , -0.274032  ,\r\n18:22:31           0.06552326]],\r\n18:22:31 \r\n18:22:31        [[-1.255711  ,  1.0821327 , -1.842773  ,  0.00774081,\r\n18:22:31          -1.8505908 ],\r\n18:22:31         [ 0.24820343, -0.23764256,  1.5792552 ,  0.86364585,\r\n18:22:31          -0.61370146],\r\n18:22:31         [ 0.23868927,  0.5627646 ,  1.4904244 , -0.67682195,\r\n18:22:31           1.5734532 ]],\r\n18:22:31 \r\n18:22:31        [[-0.13108684, -0.17078772, -1.0842882 , -1.2463546 ,\r\n18:22:31           0.60079515],\r\n18:22:31         [-0.11783342, -0.9976157 , -0.56140375,  0.33434495,\r\n18:22:31           0.09841382],\r\n18:22:31         [ 0.5232402 ,  0.21773338, -0.69488454, -0.628351  ,\r\n18:22:31          -0.5340653 ]],\r\n18:22:31 \r\n18:22:31        [[ 0.8596289 ,  0.82965237,  1.4320815 , -0.40076438,\r\n18:22:31           0.71038485],\r\n18:22:31         [-1.200479  , -0.22418295,  0.5408255 , -1.9307754 ,\r\n18:22:31           0.3732496 ],\r\n18:22:31         [-0.7377602 ,  0.8895791 ,  1.2150432 ,  0.84749776,\r\n18:22:31          -1.6757202 ]]], dtype=float32), 'output_t': BlobReference(\"step_26/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018eaea190>}\r\n18:22:31 {'initial_input': array([[[ 0.14318995, -0.15366645, -0.01733815,  1.537961  ,\r\n18:22:31           0.31601045],\r\n18:22:31         [ 0.8625949 ,  1.410735  ,  0.60667753, -0.47015253,\r\n18:22:31           1.4734355 ],\r\n18:22:31         [ 0.79635704, -1.7393378 ,  0.42786115,  0.5607386 ,\r\n18:22:31           0.34342203]]], dtype=float32), 'd': 5, 'input_blob': BlobReference(\"input\"), 'self': <caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, 'step': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120710>, 'output_t_prev': BlobReference(\"output_t_prev\"), 'input_t': BlobReference(\"input_t\"), 'n': 3, 'T': 4, 'input': array([[[ 7.7122921e-01,  7.9306579e-01, -7.4156016e-01,  6.9938803e-01,\r\n18:22:31           1.1368722e+00],\r\n18:22:31         [-1.7121632e+00,  6.7158586e-01,  4.9981758e-01,  3.6968786e-01,\r\n18:22:31          -2.3082924e+00],\r\n18:22:31         [-1.1180100e+00,  5.8233100e-01,  1.2467133e-01, -8.3507699e-01,\r\n18:22:31          -3.2413715e-01]],\r\n18:22:31 \r\n18:22:31        [[-5.1864809e-01, -1.2111757e+00, -5.5342978e-01, -1.5710856e+00,\r\n18:22:31           1.2269875e+00],\r\n18:22:31         [ 1.5938463e+00,  6.6119522e-01,  9.5621443e-01, -6.3825691e-01,\r\n18:22:31           1.1857471e+00],\r\n18:22:31         [-3.8388982e-01,  7.9185891e-01,  7.2088742e-01, -5.0930220e-01,\r\n18:22:31           2.5873727e-01]],\r\n18:22:31 \r\n18:22:31        [[-7.9322062e-02,  1.5006196e-01,  1.0773627e+00,  1.0334906e-01,\r\n18:22:31           5.0270373e-01],\r\n18:22:31         [ 9.4164926e-01, -8.5349239e-02, -5.0853068e-01,  1.1829562e+00,\r\n18:22:31           9.8272848e-01],\r\n18:22:31         [-5.3078097e-01, -9.1883695e-01,  1.0447986e+00,  3.4758983e+00,\r\n18:22:31          -1.0487611e-01]],\r\n18:22:31 \r\n18:22:31        [[-1.3811163e+00, -6.5873885e-01, -9.8303992e-01, -1.9586353e-01,\r\n18:22:31           2.1494757e-03],\r\n18:22:31         [ 1.7026168e+00,  1.2549912e+00, -7.7275425e-01,  3.7716261e-01,\r\n18:22:31           9.2703742e-01],\r\n18:22:31         [-3.7202635e-01, -1.9569679e+00,  2.7668619e-01,  1.9082175e+00,\r\n18:22:31           4.8463443e-01]]], dtype=float32), 'output_t': BlobReference(\"step_27/Mul\"), 'initial_input_blob': BlobReference(\"initial_input\"), 'model': <caffe2.python.model_helper.ModelHelper object at 0x7f018f120c90>}\r\n18:22:31 ---------------------------------- Hypothesis ----------------------------------\r\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=1, n=1, d=1)\r\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=2, n=5, d=5)\r\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=1, n=4, d=1)\r\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=1, n=3, d=2)\r\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=3, n=1, d=5)\r\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5)\r\n18:22:31 Traceback (most recent call last):\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 689, in evaluate_test_data\r\n18:22:31     result = self.execute(data, collect=True)\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 604, in execute\r\n18:22:31     result = self.test_runner(data, run)\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/executors.py\", line 58, in default_new_style_executor\r\n18:22:31     return function(data)\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 600, in run\r\n18:22:31     return test(*args, **kwargs)\r\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 16, in test_sum_mul\r\n18:22:31     n=st.integers(1, 5),\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 542, in test\r\n18:22:31     result = self.test(*args, **kwargs)\r\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 32, in test_sum_mul\r\n18:22:31     input_blob, initial_input_blob)\r\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 164, in simple_rnn\r\n18:22:31     stepsize=0.005,\r\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py\", line 397, in assertGradientChecks\r\n18:22:31     \"Gradient check failed for input \" + str(op.input[outputs_to_check])\r\n18:22:31   File \"/usr/lib/python2.7/unittest/case.py\", line 422, in assertTrue\r\n18:22:31     raise self.failureException(msg)\r\n18:22:31 AssertionError: Gradient check failed for input input\r\n18:22:31 \r\n18:22:31 Trying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5)\r\n18:22:31 Falsifying example: test_sum_mul(self=<caffe2.python.operator_test.recurrent_network_test.RecurrentNetworkTest testMethod=test_sum_mul>, T=4, n=3, d=5)\r\n18:22:31 Failed to reproduce exception. Expected: \r\n18:22:31 Traceback (most recent call last):\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 689, in evaluate_test_data\r\n18:22:31     result = self.execute(data, collect=True)\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 604, in execute\r\n18:22:31     result = self.test_runner(data, run)\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/executors.py\", line 58, in default_new_style_executor\r\n18:22:31     return function(data)\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 600, in run\r\n18:22:31     return test(*args, **kwargs)\r\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 16, in test_sum_mul\r\n18:22:31     n=st.integers(1, 5),\r\n18:22:31   File \"/usr/local/lib/python2.7/dist-packages/hypothesis/core.py\", line 542, in test\r\n18:22:31     result = self.test(*args, **kwargs)\r\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 32, in test_sum_mul\r\n18:22:31     input_blob, initial_input_blob)\r\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/recurrent_network_test.py\", line 164, in simple_rnn\r\n18:22:31     stepsize=0.005,\r\n18:22:31   File \"/usr/local/caffe2/lib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py\", line 397, in assertGradientChecks\r\n18:22:31     \"Gradient check failed for input \" + str(op.input[outputs_to_check])\r\n18:22:31   File \"/usr/lib/python2.7/unittest/case.py\", line 422, in assertTrue\r\n18:22:31     raise self.failureException(msg)\r\n18:22:31 AssertionError: Gradient check failed for input input\r\n18:22:31 \r\n18:22:31 \r\n18:22:31 You can reproduce this example by temporarily adding @reproduce_failure('3.66.8', 'AAMHBQYEAg==') as a decorator on your test case\r\n18:22:31  generated xml file: /var/lib/jenkins/workspace/caffe2_tests/python/result.xml -\r\n```\r\n\r\nhttps://ci.pytorch.org/jenkins/job/caffe2-builds/job/py2-cuda8.0-cudnn6-ubuntu16.04-test/9411//consoleFull\r\n\r\nCC @salexspb who added this test"}
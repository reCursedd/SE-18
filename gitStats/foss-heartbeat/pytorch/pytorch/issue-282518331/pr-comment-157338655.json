{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/157338655", "pull_request_review_id": 83971186, "id": 157338655, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzMzODY1NQ==", "diff_hunk": "@@ -69,7 +69,8 @@ def _worker_manager_loop(in_queue, out_queue, done_event, pin_memory):\n             continue\n         idx, batch = r\n         try:\n-            if pin_memory:\n+            if pin_memory and torch.cuda.is_available():\n+                torch.cuda.set_device(device_id)", "path": "torch/utils/data/dataloader.py", "position": null, "original_position": 15, "commit_id": "a902c0c50cd26c9497c8a8df4f28887b1bd1f145", "original_commit_id": "21180e9de889e5fffce16768161b0cbf41af39d5", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "That makes sense, thanks Natalia. Can we move this code outside of the main loop? The device id can\u2019t change during the run time, so it should be sufficient to set it once", "created_at": "2017-12-16T09:52:55Z", "updated_at": "2018-11-23T15:37:28Z", "html_url": "https://github.com/pytorch/pytorch/pull/4196#discussion_r157338655", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/4196", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/157338655"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/4196#discussion_r157338655"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/4196"}}, "body_html": "<p>That makes sense, thanks Natalia. Can we move this code outside of the main loop? The device id can\u2019t change during the run time, so it should be sufficient to set it once</p>", "body_text": "That makes sense, thanks Natalia. Can we move this code outside of the main loop? The device id can\u2019t change during the run time, so it should be sufficient to set it once", "in_reply_to_id": 157312804}
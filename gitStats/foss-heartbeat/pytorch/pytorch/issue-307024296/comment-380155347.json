{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/380155347", "html_url": "https://github.com/pytorch/pytorch/issues/5912#issuecomment-380155347", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5912", "id": 380155347, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDE1NTM0Nw==", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-10T16:02:20Z", "updated_at": "2018-04-10T16:25:06Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I can only reproduce this on a Mac. On linux boxes (I've tested on 2), I get something like the following:</p>\n<pre><code>data for pytorch: X.shape=(32, 64, 1024), Y.shape=(32, 1024, 1)\n\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\nTesting Conv and GRU together\npytorch: forward_pass=1.8s backward_pass=5.3s\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\nTesting Conv only\npytorch: forward_pass=0.2s backward_pass=0.1s\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\nTesting GRU only\npytorch: forward_pass=1.5s backward_pass=1.6s\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n</code></pre>\n<p>which is much better.</p>\n<p>I don't know if this helps anyone, but the average add op in the Conv and GRU pass is 5583.209us, compared with the average add op in the GRU-only pass taking 71.807us per op.</p>", "body_text": "I can only reproduce this on a Mac. On linux boxes (I've tested on 2), I get something like the following:\ndata for pytorch: X.shape=(32, 64, 1024), Y.shape=(32, 1024, 1)\n\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\nTesting Conv and GRU together\npytorch: forward_pass=1.8s backward_pass=5.3s\n<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\nTesting Conv only\npytorch: forward_pass=0.2s backward_pass=0.1s\n<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\nTesting GRU only\npytorch: forward_pass=1.5s backward_pass=1.6s\n<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n\nwhich is much better.\nI don't know if this helps anyone, but the average add op in the Conv and GRU pass is 5583.209us, compared with the average add op in the GRU-only pass taking 71.807us per op.", "body": "I can only reproduce this on a Mac. On linux boxes (I've tested on 2), I get something like the following:\r\n```\r\ndata for pytorch: X.shape=(32, 64, 1024), Y.shape=(32, 1024, 1)\r\n\r\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\nTesting Conv and GRU together\r\npytorch: forward_pass=1.8s backward_pass=5.3s\r\n<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n\r\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\nTesting Conv only\r\npytorch: forward_pass=0.2s backward_pass=0.1s\r\n<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n\r\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\r\nTesting GRU only\r\npytorch: forward_pass=1.5s backward_pass=1.6s\r\n<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\r\n```\r\nwhich is much better.\r\n\r\nI don't know if this helps anyone, but the average add op in the Conv and GRU pass is 5583.209us, compared with the average add op in the GRU-only pass taking 71.807us per op."}
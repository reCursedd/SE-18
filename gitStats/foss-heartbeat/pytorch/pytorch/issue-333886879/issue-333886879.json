{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8678", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8678/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8678/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8678/events", "html_url": "https://github.com/pytorch/pytorch/pull/8678", "id": 333886879, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk1OTk0ODgx", "number": 8678, "title": "Shard test_nn to reduce runtime for each test target", "user": {"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-20T00:46:06Z", "updated_at": "2018-11-23T15:45:52Z", "closed_at": "2018-06-20T19:01:30Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/8678", "html_url": "https://github.com/pytorch/pytorch/pull/8678", "diff_url": "https://github.com/pytorch/pytorch/pull/8678.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/8678.patch"}, "body_html": "<p>The current <code>test_nn</code> would time out and be disabled in GreenWarden, and we need to have an option to split it up in order to pass the stress test. Right now GreenWarden roughly allows running 100 test cases in <code>test_nn</code> before timing out, and here we have an option to divide <code>test_nn</code> into 30 shards (with ~40 tests in each shard)  to allow for some test suite growth in the future.</p>\n<p>This will unblock the addition of GPU tests to Sandcastle.</p>\n<p>We need to make sure that the CUDA memory leak checks are still working correctly in CI after this change.</p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=79994\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/orionr\">@orionr</a></p>", "body_text": "The current test_nn would time out and be disabled in GreenWarden, and we need to have an option to split it up in order to pass the stress test. Right now GreenWarden roughly allows running 100 test cases in test_nn before timing out, and here we have an option to divide test_nn into 30 shards (with ~40 tests in each shard)  to allow for some test suite growth in the future.\nThis will unblock the addition of GPU tests to Sandcastle.\nWe need to make sure that the CUDA memory leak checks are still working correctly in CI after this change.\ncc @orionr", "body": "The current `test_nn` would time out and be disabled in GreenWarden, and we need to have an option to split it up in order to pass the stress test. Right now GreenWarden roughly allows running 100 test cases in `test_nn` before timing out, and here we have an option to divide `test_nn` into 30 shards (with ~40 tests in each shard)  to allow for some test suite growth in the future.\r\n\r\nThis will unblock the addition of GPU tests to Sandcastle.\r\n\r\nWe need to make sure that the CUDA memory leak checks are still working correctly in CI after this change.\r\n\r\ncc @orionr "}
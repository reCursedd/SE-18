{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13605", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13605/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13605/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13605/events", "html_url": "https://github.com/pytorch/pytorch/issues/13605", "id": 377668330, "node_id": "MDU6SXNzdWUzNzc2NjgzMzA=", "number": 13605, "title": "Possible UB in TensorImpl constructor", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-06T02:36:27Z", "updated_at": "2018-11-12T18:21:46Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>I was reading TensorImpl and I found this line:<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/2398a3255eed2750ebe62f467d40ba5fc0211a33/aten/src/ATen/core/TensorImpl.cpp#L30\">pytorch/aten/src/ATen/core/TensorImpl.cpp</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 30\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/2398a3255eed2750ebe62f467d40ba5fc0211a33\">2398a32</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L30\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"30\"></td>\n          <td id=\"LC30\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> : TensorImpl(std::move(storage), type_id, storage.dtype(), is_variable) {} </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>Isn't it unspecified in which order the arguments to the functions is evaluated? If so, it is possible that on some systems <code>storage</code> is moved before <code>storage.dtype()</code> is called, leading to UB.</p>", "body_text": "\ud83d\udc1b Bug\nI was reading TensorImpl and I found this line:\n\n  \n    \n      pytorch/aten/src/ATen/core/TensorImpl.cpp\n    \n    \n         Line 30\n      in\n      2398a32\n    \n    \n    \n    \n\n        \n          \n           : TensorImpl(std::move(storage), type_id, storage.dtype(), is_variable) {} \n        \n    \n  \n\n\nIsn't it unspecified in which order the arguments to the functions is evaluated? If so, it is possible that on some systems storage is moved before storage.dtype() is called, leading to UB.", "body": "## \ud83d\udc1b Bug\r\n\r\nI was reading TensorImpl and I found this line:\r\nhttps://github.com/pytorch/pytorch/blob/2398a3255eed2750ebe62f467d40ba5fc0211a33/aten/src/ATen/core/TensorImpl.cpp#L30\r\n\r\nIsn't it unspecified in which order the arguments to the functions is evaluated? If so, it is possible that on some systems `storage` is moved before `storage.dtype()` is called, leading to UB.\r\n"}
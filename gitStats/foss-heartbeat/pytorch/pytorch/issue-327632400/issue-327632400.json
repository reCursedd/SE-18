{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7947", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7947/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7947/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7947/events", "html_url": "https://github.com/pytorch/pytorch/issues/7947", "id": 327632400, "node_id": "MDU6SXNzdWUzMjc2MzI0MDA=", "number": 7947, "title": "EmbeddingBag max_norm parameter does not work", "user": {"login": "nehz", "id": 151358, "node_id": "MDQ6VXNlcjE1MTM1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/151358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nehz", "html_url": "https://github.com/nehz", "followers_url": "https://api.github.com/users/nehz/followers", "following_url": "https://api.github.com/users/nehz/following{/other_user}", "gists_url": "https://api.github.com/users/nehz/gists{/gist_id}", "starred_url": "https://api.github.com/users/nehz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nehz/subscriptions", "organizations_url": "https://api.github.com/users/nehz/orgs", "repos_url": "https://api.github.com/users/nehz/repos", "events_url": "https://api.github.com/users/nehz/events{/privacy}", "received_events_url": "https://api.github.com/users/nehz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 424131847, "node_id": "MDU6TGFiZWw0MjQxMzE4NDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bug", "name": "bug", "color": "b60205", "default": true}, {"id": 443484135, "node_id": "MDU6TGFiZWw0NDM0ODQxMzU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/high%20priority", "name": "high priority", "color": "F22613", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-30T08:47:43Z", "updated_at": "2018-05-31T13:42:57Z", "closed_at": "2018-05-31T13:42:57Z", "author_association": "CONTRIBUTOR", "body_html": "<p>When using the <code>max_norm</code> parameter, the following error occurs:</p>\n<pre><code>/usr/local/lib/python3.5/dist-packages/torch/nn/functional.py in embedding_bag(embedding_matrix, indices, offsets, max_norm, norm_type, scale_grad_by_freq, mode, sparse)\n   1167     if max_norm is not None:\n   1168         with torch.no_grad():\n-&gt; 1169             torch.embedding_renorm_(weight, input, max_norm, norm_type)\n   1170 \n   1171     ret, _, _ = torch.embedding_bag(\n\nNameError: name 'weight' is not defined\n</code></pre>\n<p>Pytorch version 0.4.0</p>", "body_text": "When using the max_norm parameter, the following error occurs:\n/usr/local/lib/python3.5/dist-packages/torch/nn/functional.py in embedding_bag(embedding_matrix, indices, offsets, max_norm, norm_type, scale_grad_by_freq, mode, sparse)\n   1167     if max_norm is not None:\n   1168         with torch.no_grad():\n-> 1169             torch.embedding_renorm_(weight, input, max_norm, norm_type)\n   1170 \n   1171     ret, _, _ = torch.embedding_bag(\n\nNameError: name 'weight' is not defined\n\nPytorch version 0.4.0", "body": "When using the `max_norm` parameter, the following error occurs:\r\n\r\n```\r\n/usr/local/lib/python3.5/dist-packages/torch/nn/functional.py in embedding_bag(embedding_matrix, indices, offsets, max_norm, norm_type, scale_grad_by_freq, mode, sparse)\r\n   1167     if max_norm is not None:\r\n   1168         with torch.no_grad():\r\n-> 1169             torch.embedding_renorm_(weight, input, max_norm, norm_type)\r\n   1170 \r\n   1171     ret, _, _ = torch.embedding_bag(\r\n\r\nNameError: name 'weight' is not defined\r\n```\r\n\r\nPytorch version 0.4.0"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6103", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6103/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6103/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6103/events", "html_url": "https://github.com/pytorch/pytorch/issues/6103", "id": 309642807, "node_id": "MDU6SXNzdWUzMDk2NDI4MDc=", "number": 6103, "title": "RuntimeError: Expected tensor's dynamic type to be Variable, not Tensor", "user": {"login": "back2yes", "id": 8847006, "node_id": "MDQ6VXNlcjg4NDcwMDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/8847006?v=4", "gravatar_id": "", "url": "https://api.github.com/users/back2yes", "html_url": "https://github.com/back2yes", "followers_url": "https://api.github.com/users/back2yes/followers", "following_url": "https://api.github.com/users/back2yes/following{/other_user}", "gists_url": "https://api.github.com/users/back2yes/gists{/gist_id}", "starred_url": "https://api.github.com/users/back2yes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/back2yes/subscriptions", "organizations_url": "https://api.github.com/users/back2yes/orgs", "repos_url": "https://api.github.com/users/back2yes/repos", "events_url": "https://api.github.com/users/back2yes/events{/privacy}", "received_events_url": "https://api.github.com/users/back2yes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 884152160, "node_id": "MDU6TGFiZWw4ODQxNTIxNjA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/cpp-extensions", "name": "cpp-extensions", "color": "1c689e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-03-29T07:08:28Z", "updated_at": "2018-07-17T00:22:18Z", "closed_at": "2018-03-30T01:14:56Z", "author_association": "NONE", "body_html": "<p>I am writing an cpp extension, where I need to create a new variable within the cpp function.</p>\n<p>This is my code here:</p>\n<pre><code>#include &lt;torch/torch.h&gt;\n#include &lt;vector&gt;\nusing namespace at;\nTensor foo()\n{\n    Tensor a = ones(CPU(kFloat), {3, 4});\n    return a;\n}\n\nPYBIND11_MODULE(TORCH_EXTENSION_NAME, m)\n{\n    m.def(\"foo\", &amp;foo, \"foo\");\n}\n</code></pre>\n<p>However it does not work as I expected, but raise a Runtime error:</p>\n<pre><code>RuntimeError: Expected tensor's dynamic type to be Variable, not Tensor\n</code></pre>\n<p>I guess the problem is I with my code, rather than the framework. Could anyone help me with this? Thanks in advance.</p>", "body_text": "I am writing an cpp extension, where I need to create a new variable within the cpp function.\nThis is my code here:\n#include <torch/torch.h>\n#include <vector>\nusing namespace at;\nTensor foo()\n{\n    Tensor a = ones(CPU(kFloat), {3, 4});\n    return a;\n}\n\nPYBIND11_MODULE(TORCH_EXTENSION_NAME, m)\n{\n    m.def(\"foo\", &foo, \"foo\");\n}\n\nHowever it does not work as I expected, but raise a Runtime error:\nRuntimeError: Expected tensor's dynamic type to be Variable, not Tensor\n\nI guess the problem is I with my code, rather than the framework. Could anyone help me with this? Thanks in advance.", "body": "I am writing an cpp extension, where I need to create a new variable within the cpp function.\r\n\r\nThis is my code here:\r\n```\r\n#include <torch/torch.h>\r\n#include <vector>\r\nusing namespace at;\r\nTensor foo()\r\n{\r\n    Tensor a = ones(CPU(kFloat), {3, 4});\r\n    return a;\r\n}\r\n\r\nPYBIND11_MODULE(TORCH_EXTENSION_NAME, m)\r\n{\r\n    m.def(\"foo\", &foo, \"foo\");\r\n}\r\n```\r\n\r\nHowever it does not work as I expected, but raise a Runtime error:\r\n```\r\nRuntimeError: Expected tensor's dynamic type to be Variable, not Tensor\r\n```\r\n\r\nI guess the problem is I with my code, rather than the framework. Could anyone help me with this? Thanks in advance."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/387301557", "html_url": "https://github.com/pytorch/pytorch/issues/6900#issuecomment-387301557", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6900", "id": 387301557, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzMwMTU1Nw==", "user": {"login": "mathmanu", "id": 2990503, "node_id": "MDQ6VXNlcjI5OTA1MDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2990503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mathmanu", "html_url": "https://github.com/mathmanu", "followers_url": "https://api.github.com/users/mathmanu/followers", "following_url": "https://api.github.com/users/mathmanu/following{/other_user}", "gists_url": "https://api.github.com/users/mathmanu/gists{/gist_id}", "starred_url": "https://api.github.com/users/mathmanu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mathmanu/subscriptions", "organizations_url": "https://api.github.com/users/mathmanu/orgs", "repos_url": "https://api.github.com/users/mathmanu/repos", "events_url": "https://api.github.com/users/mathmanu/events{/privacy}", "received_events_url": "https://api.github.com/users/mathmanu/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-08T06:45:22Z", "updated_at": "2018-05-08T06:45:22Z", "author_association": "NONE", "body_html": "<p>The training is fine.  But I still get the error if I try to add graph to tensorboard during training. This happens even after installing pytorch-nightly 2018.05.07<br>\nThe error reported is: <strong>UserWarning: ONNX export failed on upsample_bilinear2d because align_corners == True not supported</strong></p>\n<p>Full error log is here:<br>\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/nn/functional.py:1761: UserWarning: Default upsampling behavior when mode=bilinear is changed to align_corners=False since 0.4.0. Please specify align_corners=True if the old behavior is desired. See the documentation of nn.Upsample for details.<br>\n\"See the documentation of nn.Upsample for details.\".format(mode))<br>\n=&gt; Train Epoch [1/300]:   1%|          | 1/124 [00:19&lt;39:37, 19.33s/it, DataTime=5.773 (5.773), LR=0.0001, Loss=9.970 (9.970), Output=0.018 (0.018)(Mean_IoU)]/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/utils.py:418: UserWarning: ONNX export failed on ATen operator hardtanh because torch.onnx.symbolic.hardtanh does not exist<br>\n.format(op_name, op_name))<br>\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/utils.py:418: UserWarning: ONNX export failed on ATen operator adaptive_avg_pool2d because torch.onnx.symbolic.adaptive_avg_pool2d does not exist<br>\n.format(op_name, op_name))<br>\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/symbolic.py:69: UserWarning: ONNX export failed on upsample_bilinear2d because align_corners == True not supported<br>\nwarnings.warn(\"ONNX export failed on \" + op + \" because \" + msg + \" not supported\")<br>\nTraceback (most recent call last):<br>\nFile \"train_segmentation.py\", line 81, in <br>\nmain_segmentation.main(args)<br>\nFile \"../training/tools/main_segmentation.py\", line 192, in main<br>\ntrain_loss, train_metric, metric_name = train(args, train_dataset, train_loader, model, optimizer, epoch, train_writer, scheduler.get_lr()[0])<br>\nFile \"../training/tools/main_segmentation.py\", line 305, in train<br>\ntrain_writer.add_graph(model, input_zero)<br>\nFile \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/writer.py\", line 419, in add_graph<br>\nself.file_writer.add_graph(graph(model, input_to_model, verbose))<br>\nFile \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/graph.py\", line 85, in graph<br>\nlist_of_nodes = parse(graph)<br>\nFile \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/graph.py\", line 61, in parse<br>\nn['inputs'][i] = mapping[s]<br>\nKeyError: '408'</p>", "body_text": "The training is fine.  But I still get the error if I try to add graph to tensorboard during training. This happens even after installing pytorch-nightly 2018.05.07\nThe error reported is: UserWarning: ONNX export failed on upsample_bilinear2d because align_corners == True not supported\nFull error log is here:\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/nn/functional.py:1761: UserWarning: Default upsampling behavior when mode=bilinear is changed to align_corners=False since 0.4.0. Please specify align_corners=True if the old behavior is desired. See the documentation of nn.Upsample for details.\n\"See the documentation of nn.Upsample for details.\".format(mode))\n=> Train Epoch [1/300]:   1%|          | 1/124 [00:19<39:37, 19.33s/it, DataTime=5.773 (5.773), LR=0.0001, Loss=9.970 (9.970), Output=0.018 (0.018)(Mean_IoU)]/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/utils.py:418: UserWarning: ONNX export failed on ATen operator hardtanh because torch.onnx.symbolic.hardtanh does not exist\n.format(op_name, op_name))\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/utils.py:418: UserWarning: ONNX export failed on ATen operator adaptive_avg_pool2d because torch.onnx.symbolic.adaptive_avg_pool2d does not exist\n.format(op_name, op_name))\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/symbolic.py:69: UserWarning: ONNX export failed on upsample_bilinear2d because align_corners == True not supported\nwarnings.warn(\"ONNX export failed on \" + op + \" because \" + msg + \" not supported\")\nTraceback (most recent call last):\nFile \"train_segmentation.py\", line 81, in \nmain_segmentation.main(args)\nFile \"../training/tools/main_segmentation.py\", line 192, in main\ntrain_loss, train_metric, metric_name = train(args, train_dataset, train_loader, model, optimizer, epoch, train_writer, scheduler.get_lr()[0])\nFile \"../training/tools/main_segmentation.py\", line 305, in train\ntrain_writer.add_graph(model, input_zero)\nFile \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/writer.py\", line 419, in add_graph\nself.file_writer.add_graph(graph(model, input_to_model, verbose))\nFile \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/graph.py\", line 85, in graph\nlist_of_nodes = parse(graph)\nFile \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/graph.py\", line 61, in parse\nn['inputs'][i] = mapping[s]\nKeyError: '408'", "body": "The training is fine.  But I still get the error if I try to add graph to tensorboard during training. This happens even after installing pytorch-nightly 2018.05.07\r\nThe error reported is: **UserWarning: ONNX export failed on upsample_bilinear2d because align_corners == True not supported**\r\n\r\nFull error log is here:\r\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/nn/functional.py:1761: UserWarning: Default upsampling behavior when mode=bilinear is changed to align_corners=False since 0.4.0. Please specify align_corners=True if the old behavior is desired. See the documentation of nn.Upsample for details.\r\n  \"See the documentation of nn.Upsample for details.\".format(mode))\r\n=> Train Epoch [1/300]:   1%|          | 1/124 [00:19<39:37, 19.33s/it, DataTime=5.773 (5.773), LR=0.0001, Loss=9.970 (9.970), Output=0.018 (0.018)(Mean_IoU)]/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/utils.py:418: UserWarning: ONNX export failed on ATen operator hardtanh because torch.onnx.symbolic.hardtanh does not exist\r\n  .format(op_name, op_name))\r\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/utils.py:418: UserWarning: ONNX export failed on ATen operator adaptive_avg_pool2d because torch.onnx.symbolic.adaptive_avg_pool2d does not exist\r\n  .format(op_name, op_name))\r\n/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/torch/onnx/symbolic.py:69: UserWarning: ONNX export failed on upsample_bilinear2d because align_corners == True not supported\r\n  warnings.warn(\"ONNX export failed on \" + op + \" because \" + msg + \" not supported\")\r\nTraceback (most recent call last):\r\n  File \"train_segmentation.py\", line 81, in <module>\r\n    main_segmentation.main(args)\r\n  File \"../training/tools/main_segmentation.py\", line 192, in main\r\n    train_loss, train_metric, metric_name = train(args, train_dataset, train_loader, model, optimizer, epoch, train_writer, scheduler.get_lr()[0])\r\n  File \"../training/tools/main_segmentation.py\", line 305, in train\r\n    train_writer.add_graph(model, input_zero)\r\n  File \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/writer.py\", line 419, in add_graph\r\n    self.file_writer.add_graph(graph(model, input_to_model, verbose))\r\n  File \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/graph.py\", line 85, in graph\r\n    list_of_nodes = parse(graph)\r\n  File \"/user/files/apps/anaconda2/envs/pytorch/lib/python3.5/site-packages/tensorboardX/graph.py\", line 61, in parse\r\n    n['inputs'][i] = mapping[s]\r\nKeyError: '408'"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4768", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4768/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4768/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4768/events", "html_url": "https://github.com/pytorch/pytorch/issues/4768", "id": 290296189, "node_id": "MDU6SXNzdWUyOTAyOTYxODk=", "number": 4768, "title": "packaging question, setup.py egg_info relies on submodule", "user": {"login": "AlJohri", "id": 2790092, "node_id": "MDQ6VXNlcjI3OTAwOTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/2790092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlJohri", "html_url": "https://github.com/AlJohri", "followers_url": "https://api.github.com/users/AlJohri/followers", "following_url": "https://api.github.com/users/AlJohri/following{/other_user}", "gists_url": "https://api.github.com/users/AlJohri/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlJohri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlJohri/subscriptions", "organizations_url": "https://api.github.com/users/AlJohri/orgs", "repos_url": "https://api.github.com/users/AlJohri/repos", "events_url": "https://api.github.com/users/AlJohri/events{/privacy}", "received_events_url": "https://api.github.com/users/AlJohri/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-21T18:58:40Z", "updated_at": "2018-02-02T11:50:03Z", "closed_at": "2018-01-22T04:24:06Z", "author_association": "NONE", "body_html": "<p>It seems like running <code>python setup.py egg_info</code> has a dependency on first running <code>git submodule update --init</code>. This command also seems to also error out when installing via a wheel.</p>\n<p>This creates a problem for tools like <a href=\"https://docs.pipenv.org/\" rel=\"nofollow\"><code>pipenv</code></a> which rely on the output of <code>python setup.py egg_info</code> to examine dependencies.</p>\n<p>Is there anyway to allow this command to not error out when installing via a wheel?</p>\n<p>Full stack trace:</p>\n<pre><code>$ pipenv install http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\n\nInstalling http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\u2026\nCollecting torch==0.3.0.post4 from http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\n  Downloading http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl (6.9MB)\nCollecting numpy (from torch==0.3.0.post4)\n  Using cached numpy-1.14.0-cp27-cp27m-macosx_10_6_intel.macosx_10_9_intel.macosx_10_9_x86_64.macosx_10_10_intel.macosx_10_10_x86_64.whl\nCollecting pyyaml (from torch==0.3.0.post4)\nInstalling collected packages: numpy, pyyaml, torch\nSuccessfully installed numpy-1.14.0 pyyaml-3.12 torch-0.3.0.post4\n\nAdding http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl to Pipfile's [packages]\u2026\nLocking [dev-packages] dependencies\u2026\nLocking [packages] dependencies\u2026\nTraceback (most recent call last):\n  File \"/Users/johria/.pyenv/versions/3.6.3/bin/pipenv\", line 11, in &lt;module&gt;\n    load_entry_point('pipenv==9.0.3', 'console_scripts', 'pipenv')()\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 722, in __call__\n    return self.main(*args, **kwargs)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 697, in main\n    rv = self.invoke(ctx)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 1066, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 895, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/cli.py\", line 1934, in install\n    do_lock(system=system, pre=pre)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/cli.py\", line 1102, in do_lock\n    pre=pre\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/utils.py\", line 545, in resolve_deps\n    resolved_tree = actually_resolve_reps(deps, index_lookup, markers_lookup, project, sources, verbose, clear, pre)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/utils.py\", line 507, in actually_resolve_reps\n    resolved_tree.update(resolver.resolve(max_rounds=PIPENV_MAX_ROUNDS))\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 102, in resolve\n    has_changed, best_matches = self._resolve_one_round()\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 200, in _resolve_one_round\n    for dep in self._iter_dependencies(best_match):\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 296, in _iter_dependencies\n    dependencies = self.repository.get_dependencies(ireq)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/repositories/pypi.py\", line 153, in get_dependencies\n    result = reqset._prepare_file(self.finder, ireq)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_set.py\", line 639, in _prepare_file\n    abstract_dist.prep_for_dist()\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_set.py\", line 134, in prep_for_dist\n    self.req_to_install.run_egg_info()\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_install.py\", line 438, in run_egg_info\n    command_desc='python setup.py egg_info')\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/utils/__init__.py\", line 707, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\npip.exceptions.InstallationError: Command \"python setup.py egg_info\" failed with error code 1 in /var/folders/c5/sxpknfp571v3ydglf4305g9m0000gn/T/tmp9j_54h5obuild/torch/\n</code></pre>\n<p>I understand the preferred package manager for this project is conda but being officially endorsed from python.org, pipenv has a fairly large audience: <a href=\"https://github.com/pypa/pipenv\">https://github.com/pypa/pipenv</a></p>", "body_text": "It seems like running python setup.py egg_info has a dependency on first running git submodule update --init. This command also seems to also error out when installing via a wheel.\nThis creates a problem for tools like pipenv which rely on the output of python setup.py egg_info to examine dependencies.\nIs there anyway to allow this command to not error out when installing via a wheel?\nFull stack trace:\n$ pipenv install http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\n\nInstalling http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\u2026\nCollecting torch==0.3.0.post4 from http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\n  Downloading http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl (6.9MB)\nCollecting numpy (from torch==0.3.0.post4)\n  Using cached numpy-1.14.0-cp27-cp27m-macosx_10_6_intel.macosx_10_9_intel.macosx_10_9_x86_64.macosx_10_10_intel.macosx_10_10_x86_64.whl\nCollecting pyyaml (from torch==0.3.0.post4)\nInstalling collected packages: numpy, pyyaml, torch\nSuccessfully installed numpy-1.14.0 pyyaml-3.12 torch-0.3.0.post4\n\nAdding http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl to Pipfile's [packages]\u2026\nLocking [dev-packages] dependencies\u2026\nLocking [packages] dependencies\u2026\nTraceback (most recent call last):\n  File \"/Users/johria/.pyenv/versions/3.6.3/bin/pipenv\", line 11, in <module>\n    load_entry_point('pipenv==9.0.3', 'console_scripts', 'pipenv')()\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 722, in __call__\n    return self.main(*args, **kwargs)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 697, in main\n    rv = self.invoke(ctx)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 1066, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 895, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/cli.py\", line 1934, in install\n    do_lock(system=system, pre=pre)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/cli.py\", line 1102, in do_lock\n    pre=pre\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/utils.py\", line 545, in resolve_deps\n    resolved_tree = actually_resolve_reps(deps, index_lookup, markers_lookup, project, sources, verbose, clear, pre)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/utils.py\", line 507, in actually_resolve_reps\n    resolved_tree.update(resolver.resolve(max_rounds=PIPENV_MAX_ROUNDS))\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 102, in resolve\n    has_changed, best_matches = self._resolve_one_round()\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 200, in _resolve_one_round\n    for dep in self._iter_dependencies(best_match):\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 296, in _iter_dependencies\n    dependencies = self.repository.get_dependencies(ireq)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/repositories/pypi.py\", line 153, in get_dependencies\n    result = reqset._prepare_file(self.finder, ireq)\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_set.py\", line 639, in _prepare_file\n    abstract_dist.prep_for_dist()\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_set.py\", line 134, in prep_for_dist\n    self.req_to_install.run_egg_info()\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_install.py\", line 438, in run_egg_info\n    command_desc='python setup.py egg_info')\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/utils/__init__.py\", line 707, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\npip.exceptions.InstallationError: Command \"python setup.py egg_info\" failed with error code 1 in /var/folders/c5/sxpknfp571v3ydglf4305g9m0000gn/T/tmp9j_54h5obuild/torch/\n\nI understand the preferred package manager for this project is conda but being officially endorsed from python.org, pipenv has a fairly large audience: https://github.com/pypa/pipenv", "body": "It seems like running `python setup.py egg_info` has a dependency on first running `git submodule update --init`. This command also seems to also error out when installing via a wheel.\r\n\r\nThis creates a problem for tools like [`pipenv`](https://docs.pipenv.org/) which rely on the output of `python setup.py egg_info` to examine dependencies.\r\n\r\nIs there anyway to allow this command to not error out when installing via a wheel?\r\n\r\nFull stack trace:\r\n\r\n```\r\n$ pipenv install http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\r\n\r\nInstalling http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\u2026\r\nCollecting torch==0.3.0.post4 from http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl\r\n  Downloading http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl (6.9MB)\r\nCollecting numpy (from torch==0.3.0.post4)\r\n  Using cached numpy-1.14.0-cp27-cp27m-macosx_10_6_intel.macosx_10_9_intel.macosx_10_9_x86_64.macosx_10_10_intel.macosx_10_10_x86_64.whl\r\nCollecting pyyaml (from torch==0.3.0.post4)\r\nInstalling collected packages: numpy, pyyaml, torch\r\nSuccessfully installed numpy-1.14.0 pyyaml-3.12 torch-0.3.0.post4\r\n\r\nAdding http://download.pytorch.org/whl/torch-0.3.0.post4-cp27-none-macosx_10_6_x86_64.whl to Pipfile's [packages]\u2026\r\nLocking [dev-packages] dependencies\u2026\r\nLocking [packages] dependencies\u2026\r\nTraceback (most recent call last):\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/bin/pipenv\", line 11, in <module>\r\n    load_entry_point('pipenv==9.0.3', 'console_scripts', 'pipenv')()\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/vendor/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/cli.py\", line 1934, in install\r\n    do_lock(system=system, pre=pre)\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/cli.py\", line 1102, in do_lock\r\n    pre=pre\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/utils.py\", line 545, in resolve_deps\r\n    resolved_tree = actually_resolve_reps(deps, index_lookup, markers_lookup, project, sources, verbose, clear, pre)\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/utils.py\", line 507, in actually_resolve_reps\r\n    resolved_tree.update(resolver.resolve(max_rounds=PIPENV_MAX_ROUNDS))\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 102, in resolve\r\n    has_changed, best_matches = self._resolve_one_round()\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 200, in _resolve_one_round\r\n    for dep in self._iter_dependencies(best_match):\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py\", line 296, in _iter_dependencies\r\n    dependencies = self.repository.get_dependencies(ireq)\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/piptools/repositories/pypi.py\", line 153, in get_dependencies\r\n    result = reqset._prepare_file(self.finder, ireq)\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_set.py\", line 639, in _prepare_file\r\n    abstract_dist.prep_for_dist()\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_set.py\", line 134, in prep_for_dist\r\n    self.req_to_install.run_egg_info()\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/req/req_install.py\", line 438, in run_egg_info\r\n    command_desc='python setup.py egg_info')\r\n  File \"/Users/johria/.pyenv/versions/3.6.3/lib/python3.6/site-packages/pipenv/patched/pip/utils/__init__.py\", line 707, in call_subprocess\r\n    % (command_desc, proc.returncode, cwd))\r\npip.exceptions.InstallationError: Command \"python setup.py egg_info\" failed with error code 1 in /var/folders/c5/sxpknfp571v3ydglf4305g9m0000gn/T/tmp9j_54h5obuild/torch/\r\n```\r\n\r\nI understand the preferred package manager for this project is conda but being officially endorsed from python.org, pipenv has a fairly large audience: https://github.com/pypa/pipenv\r\n"}
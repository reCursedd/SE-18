{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/397739099", "html_url": "https://github.com/pytorch/pytorch/issues/8057#issuecomment-397739099", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8057", "id": 397739099, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzczOTA5OQ==", "user": {"login": "syed-ahmed", "id": 8906225, "node_id": "MDQ6VXNlcjg5MDYyMjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/8906225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syed-ahmed", "html_url": "https://github.com/syed-ahmed", "followers_url": "https://api.github.com/users/syed-ahmed/followers", "following_url": "https://api.github.com/users/syed-ahmed/following{/other_user}", "gists_url": "https://api.github.com/users/syed-ahmed/gists{/gist_id}", "starred_url": "https://api.github.com/users/syed-ahmed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syed-ahmed/subscriptions", "organizations_url": "https://api.github.com/users/syed-ahmed/orgs", "repos_url": "https://api.github.com/users/syed-ahmed/repos", "events_url": "https://api.github.com/users/syed-ahmed/events{/privacy}", "received_events_url": "https://api.github.com/users/syed-ahmed/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-15T20:52:57Z", "updated_at": "2018-06-15T20:52:57Z", "author_association": "CONTRIBUTOR", "body_html": "<p>My two cents from a little debugging session:<br>\nLooks like the assertion for <code>torch.allclose</code> fails for the input hidden weights, <code>weight_ih</code>.</p>\n<pre><code>&gt; /opt/pytorch/pytorch/test/test_jit.py(759)checkTrace()\n-&gt; self.assertTrue(torch.allclose(g2, g2_ge, atol=5e-4, rtol=1e-4))\n(Pdb) n\n&gt; /opt/pytorch/pytorch/test/test_jit.py(755)checkTrace()\n-&gt; for g2, g2_ge in zip(grads2, grads2_ge):\n(Pdb) n\n&gt; /opt/pytorch/pytorch/test/test_jit.py(756)checkTrace()\n-&gt; if g2 is None and g2_ge is None:\n(Pdb) g2.shape\ntorch.Size([80, 10])\n(Pdb) n\n&gt; /opt/pytorch/pytorch/test/test_jit.py(758)checkTrace()\n-&gt; try:\n(Pdb) n\n&gt; /opt/pytorch/pytorch/test/test_jit.py(759)checkTrace()\n-&gt; self.assertTrue(torch.allclose(g2, g2_ge, atol=5e-4, rtol=1e-4))\n(Pdb) n\nAssertionError: False is not true\n</code></pre>", "body_text": "My two cents from a little debugging session:\nLooks like the assertion for torch.allclose fails for the input hidden weights, weight_ih.\n> /opt/pytorch/pytorch/test/test_jit.py(759)checkTrace()\n-> self.assertTrue(torch.allclose(g2, g2_ge, atol=5e-4, rtol=1e-4))\n(Pdb) n\n> /opt/pytorch/pytorch/test/test_jit.py(755)checkTrace()\n-> for g2, g2_ge in zip(grads2, grads2_ge):\n(Pdb) n\n> /opt/pytorch/pytorch/test/test_jit.py(756)checkTrace()\n-> if g2 is None and g2_ge is None:\n(Pdb) g2.shape\ntorch.Size([80, 10])\n(Pdb) n\n> /opt/pytorch/pytorch/test/test_jit.py(758)checkTrace()\n-> try:\n(Pdb) n\n> /opt/pytorch/pytorch/test/test_jit.py(759)checkTrace()\n-> self.assertTrue(torch.allclose(g2, g2_ge, atol=5e-4, rtol=1e-4))\n(Pdb) n\nAssertionError: False is not true", "body": "My two cents from a little debugging session:\r\nLooks like the assertion for `torch.allclose` fails for the input hidden weights, `weight_ih`.\r\n```\r\n> /opt/pytorch/pytorch/test/test_jit.py(759)checkTrace()\r\n-> self.assertTrue(torch.allclose(g2, g2_ge, atol=5e-4, rtol=1e-4))\r\n(Pdb) n\r\n> /opt/pytorch/pytorch/test/test_jit.py(755)checkTrace()\r\n-> for g2, g2_ge in zip(grads2, grads2_ge):\r\n(Pdb) n\r\n> /opt/pytorch/pytorch/test/test_jit.py(756)checkTrace()\r\n-> if g2 is None and g2_ge is None:\r\n(Pdb) g2.shape\r\ntorch.Size([80, 10])\r\n(Pdb) n\r\n> /opt/pytorch/pytorch/test/test_jit.py(758)checkTrace()\r\n-> try:\r\n(Pdb) n\r\n> /opt/pytorch/pytorch/test/test_jit.py(759)checkTrace()\r\n-> self.assertTrue(torch.allclose(g2, g2_ge, atol=5e-4, rtol=1e-4))\r\n(Pdb) n\r\nAssertionError: False is not true\r\n```"}
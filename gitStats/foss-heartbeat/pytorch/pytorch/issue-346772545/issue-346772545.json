{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10141", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10141/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10141/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10141/events", "html_url": "https://github.com/pytorch/pytorch/issues/10141", "id": 346772545, "node_id": "MDU6SXNzdWUzNDY3NzI1NDU=", "number": 10141, "title": "CreateNet(train_net) cannot find blob created by the RunNetOnce(init_net) in Caffe2 (C++)", "user": {"login": "akuz", "id": 2409854, "node_id": "MDQ6VXNlcjI0MDk4NTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2409854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akuz", "html_url": "https://github.com/akuz", "followers_url": "https://api.github.com/users/akuz/followers", "following_url": "https://api.github.com/users/akuz/following{/other_user}", "gists_url": "https://api.github.com/users/akuz/gists{/gist_id}", "starred_url": "https://api.github.com/users/akuz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akuz/subscriptions", "organizations_url": "https://api.github.com/users/akuz/orgs", "repos_url": "https://api.github.com/users/akuz/repos", "events_url": "https://api.github.com/users/akuz/events{/privacy}", "received_events_url": "https://api.github.com/users/akuz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-01T21:17:11Z", "updated_at": "2018-08-01T22:28:11Z", "closed_at": "2018-08-01T22:28:11Z", "author_association": "NONE", "body_html": "<p>When I run the below code, I first RunNetOnce(init_net), which creates the blobs that are later supposed to be used by the training network. One of the blob names is \"filter\". However, when I run the init net once, and then try to create the training network, it fails, stating that the input for the \"filter\" (in Conv) is not found. I attach the code below.</p>\n<pre><code>// run init network\nCAFFE_ENFORCE (m_workspace.RunNetOnce (init_net));\n\n// print the tensor from workspace\nprint_tensor (m_workspace, \"filter\");\n\n// create the network\nm_workspace.CreateNet (train_net);\n</code></pre>\n<p>Output:</p>\n<pre><code> ------&gt;\n| BLOB: filter\n ------&gt;\nTensor(2 2 1 2)[0 0] -&gt; Matrix(1 2):\n-0.00572359 0.0139858 \nTensor(2 2 1 2)[0 1] -&gt; Matrix(1 2):\n-0.00424118 0.00188253 \nTensor(2 2 1 2)[1 0] -&gt; Matrix(1 2):\n-0.017855 0.0194004 \nTensor(2 2 1 2)[1 1] -&gt; Matrix(1 2):\n0.00363953 -0.00497544 \n</code></pre>\n<p>Error:</p>\n<pre><code>libc++abi.dylib: terminating with uncaught exception of type caffe2::EnforceNotMet: [enforce fail at net.cc:69] . op Conv: Source for input filter is unknown for net MusicModel2_train, operator input: \"input\" input: \"filter\" input: \"bias\" output: \"real\" type: \"Conv\" arg { name: \"kernels\" ints: 1 ints: 2 } arg { name: \"order\" s: \"NCHW\" } \n</code></pre>\n<p>The details of the network don't matter. The fact is that I just printed the tensor from the blob called \"filter\", but then it cannot be found at the point of \"train_net\" creation.</p>", "body_text": "When I run the below code, I first RunNetOnce(init_net), which creates the blobs that are later supposed to be used by the training network. One of the blob names is \"filter\". However, when I run the init net once, and then try to create the training network, it fails, stating that the input for the \"filter\" (in Conv) is not found. I attach the code below.\n// run init network\nCAFFE_ENFORCE (m_workspace.RunNetOnce (init_net));\n\n// print the tensor from workspace\nprint_tensor (m_workspace, \"filter\");\n\n// create the network\nm_workspace.CreateNet (train_net);\n\nOutput:\n ------>\n| BLOB: filter\n ------>\nTensor(2 2 1 2)[0 0] -> Matrix(1 2):\n-0.00572359 0.0139858 \nTensor(2 2 1 2)[0 1] -> Matrix(1 2):\n-0.00424118 0.00188253 \nTensor(2 2 1 2)[1 0] -> Matrix(1 2):\n-0.017855 0.0194004 \nTensor(2 2 1 2)[1 1] -> Matrix(1 2):\n0.00363953 -0.00497544 \n\nError:\nlibc++abi.dylib: terminating with uncaught exception of type caffe2::EnforceNotMet: [enforce fail at net.cc:69] . op Conv: Source for input filter is unknown for net MusicModel2_train, operator input: \"input\" input: \"filter\" input: \"bias\" output: \"real\" type: \"Conv\" arg { name: \"kernels\" ints: 1 ints: 2 } arg { name: \"order\" s: \"NCHW\" } \n\nThe details of the network don't matter. The fact is that I just printed the tensor from the blob called \"filter\", but then it cannot be found at the point of \"train_net\" creation.", "body": "When I run the below code, I first RunNetOnce(init_net), which creates the blobs that are later supposed to be used by the training network. One of the blob names is \"filter\". However, when I run the init net once, and then try to create the training network, it fails, stating that the input for the \"filter\" (in Conv) is not found. I attach the code below.\r\n\r\n    // run init network\r\n    CAFFE_ENFORCE (m_workspace.RunNetOnce (init_net));\r\n\r\n    // print the tensor from workspace\r\n    print_tensor (m_workspace, \"filter\");\r\n\r\n    // create the network\r\n    m_workspace.CreateNet (train_net);\r\n\r\nOutput:\r\n\r\n     ------>\r\n    | BLOB: filter\r\n     ------>\r\n    Tensor(2 2 1 2)[0 0] -> Matrix(1 2):\r\n    -0.00572359 0.0139858 \r\n    Tensor(2 2 1 2)[0 1] -> Matrix(1 2):\r\n    -0.00424118 0.00188253 \r\n    Tensor(2 2 1 2)[1 0] -> Matrix(1 2):\r\n    -0.017855 0.0194004 \r\n    Tensor(2 2 1 2)[1 1] -> Matrix(1 2):\r\n    0.00363953 -0.00497544 \r\n\r\nError:\r\n\r\n    libc++abi.dylib: terminating with uncaught exception of type caffe2::EnforceNotMet: [enforce fail at net.cc:69] . op Conv: Source for input filter is unknown for net MusicModel2_train, operator input: \"input\" input: \"filter\" input: \"bias\" output: \"real\" type: \"Conv\" arg { name: \"kernels\" ints: 1 ints: 2 } arg { name: \"order\" s: \"NCHW\" } \r\n\r\nThe details of the network don't matter. The fact is that I just printed the tensor from the blob called \"filter\", but then it cannot be found at the point of \"train_net\" creation."}
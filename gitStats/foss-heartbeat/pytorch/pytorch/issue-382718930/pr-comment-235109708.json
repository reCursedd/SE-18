{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/235109708", "pull_request_review_id": 176900745, "id": 235109708, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTEwOTcwOA==", "diff_hunk": "@@ -41,17 +41,24 @@ def _download(self, model):\n         for f in ['predict_net.pb', 'init_net.pb', 'value_info.json']:\n             url = getURLFromName(model, f)\n             dest = os.path.join(model_dir, f)\n-            try:\n+            retry_num = 3\n+            for count in range(retry_num): # try twice\n                 try:\n-                    downloadFromURLToFile(url, dest,\n-                                          show_progress=False)\n-                except TypeError:\n-                    # show_progress not supported prior to\n-                    # Caffe2 78c014e752a374d905ecfb465d44fa16e02a28f1\n-                    # (Sep 17, 2017)\n-                    downloadFromURLToFile(url, dest)\n-            except Exception as e:\n-                print(\"Abort: {reason}\".format(reason=e))\n-                print(\"Cleaning up...\")\n-                deleteDirectory(model_dir)\n-                raise AssertionError(\"Test model downloading failed\")\n+                    try:\n+                        downloadFromURLToFile(url, dest,\n+                                              show_progress=False)\n+                    except TypeError:\n+                        # show_progress not supported prior to\n+                        # Caffe2 78c014e752a374d905ecfb465d44fa16e02a28f1\n+                        # (Sep 17, 2017)\n+                        downloadFromURLToFile(url, dest)\n+                    break\n+                except Exception as e:\n+                    if count == retry_num - 1:", "path": "caffe2/python/onnx/tests/test_utils.py", "position": 30, "original_position": 30, "commit_id": "832bfe461e3426b2a91624e9b47ff80dc68f3700", "original_commit_id": "832bfe461e3426b2a91624e9b47ff80dc68f3700", "user": {"login": "zrphercule", "id": 22670479, "node_id": "MDQ6VXNlcjIyNjcwNDc5", "avatar_url": "https://avatars2.githubusercontent.com/u/22670479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zrphercule", "html_url": "https://github.com/zrphercule", "followers_url": "https://api.github.com/users/zrphercule/followers", "following_url": "https://api.github.com/users/zrphercule/following{/other_user}", "gists_url": "https://api.github.com/users/zrphercule/gists{/gist_id}", "starred_url": "https://api.github.com/users/zrphercule/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zrphercule/subscriptions", "organizations_url": "https://api.github.com/users/zrphercule/orgs", "repos_url": "https://api.github.com/users/zrphercule/repos", "events_url": "https://api.github.com/users/zrphercule/events{/privacy}", "received_events_url": "https://api.github.com/users/zrphercule/received_events", "type": "User", "site_admin": false}, "body": "... set this to count == retry_num -1 = = ", "created_at": "2018-11-20T18:00:47Z", "updated_at": "2018-11-23T15:55:14Z", "html_url": "https://github.com/pytorch/pytorch/pull/14228#discussion_r235109708", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/14228", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/235109708"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/14228#discussion_r235109708"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/14228"}}, "body_html": "<p>... set this to count == retry_num -1 = =</p>", "body_text": "... set this to count == retry_num -1 = ="}
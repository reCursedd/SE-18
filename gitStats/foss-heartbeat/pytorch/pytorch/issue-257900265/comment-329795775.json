{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/329795775", "html_url": "https://github.com/pytorch/pytorch/issues/2747#issuecomment-329795775", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2747", "id": 329795775, "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTc5NTc3NQ==", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-15T14:17:45Z", "updated_at": "2017-09-15T14:17:45Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I looked at your model description, and while this is not related to the bug at hand, the exporter doesn't currently support Softmax, so your network won't be exportable as is. You'll need this patch (untested):</p>\n<pre><code>diff --git a/torch/nn/_functions/thnn/auto_symbolic.py b/torch/nn/_functions/thnn/auto_symbolic.py\nindex 03cc188..16b6617 100644\n--- a/torch/nn/_functions/thnn/auto_symbolic.py\n+++ b/torch/nn/_functions/thnn/auto_symbolic.py\n@@ -12,7 +12,12 @@ def leakyrelu_symbolic(g, input, negative_slope, inplace=False):\n     return g.op(\"LeakyRelu\", input, alpha_f=negative_slope)\n \n \n+def softmax_symbolic(g, input):\n+    return g.op(\"Softmax\", input)\n+\n+\n symbolic_fns = {\n     'Threshold': threshold_symbolic,\n     'LeakyReLU': leakyrelu_symbolic,\n+    'Softmax': softmax_symbolic,\n }\n</code></pre>", "body_text": "I looked at your model description, and while this is not related to the bug at hand, the exporter doesn't currently support Softmax, so your network won't be exportable as is. You'll need this patch (untested):\ndiff --git a/torch/nn/_functions/thnn/auto_symbolic.py b/torch/nn/_functions/thnn/auto_symbolic.py\nindex 03cc188..16b6617 100644\n--- a/torch/nn/_functions/thnn/auto_symbolic.py\n+++ b/torch/nn/_functions/thnn/auto_symbolic.py\n@@ -12,7 +12,12 @@ def leakyrelu_symbolic(g, input, negative_slope, inplace=False):\n     return g.op(\"LeakyRelu\", input, alpha_f=negative_slope)\n \n \n+def softmax_symbolic(g, input):\n+    return g.op(\"Softmax\", input)\n+\n+\n symbolic_fns = {\n     'Threshold': threshold_symbolic,\n     'LeakyReLU': leakyrelu_symbolic,\n+    'Softmax': softmax_symbolic,\n }", "body": "I looked at your model description, and while this is not related to the bug at hand, the exporter doesn't currently support Softmax, so your network won't be exportable as is. You'll need this patch (untested):\r\n\r\n```\r\ndiff --git a/torch/nn/_functions/thnn/auto_symbolic.py b/torch/nn/_functions/thnn/auto_symbolic.py\r\nindex 03cc188..16b6617 100644\r\n--- a/torch/nn/_functions/thnn/auto_symbolic.py\r\n+++ b/torch/nn/_functions/thnn/auto_symbolic.py\r\n@@ -12,7 +12,12 @@ def leakyrelu_symbolic(g, input, negative_slope, inplace=False):\r\n     return g.op(\"LeakyRelu\", input, alpha_f=negative_slope)\r\n \r\n \r\n+def softmax_symbolic(g, input):\r\n+    return g.op(\"Softmax\", input)\r\n+\r\n+\r\n symbolic_fns = {\r\n     'Threshold': threshold_symbolic,\r\n     'LeakyReLU': leakyrelu_symbolic,\r\n+    'Softmax': softmax_symbolic,\r\n }\r\n```"}
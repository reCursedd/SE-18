{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/187686758", "pull_request_review_id": 119523510, "id": 187686758, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NzY4Njc1OA==", "diff_hunk": "@@ -334,7 +346,8 @@ struct GraphExecutorImpl {\n       return r.first->second;\n     }\n   }\n-  bool needsGradient(const ArgumentSpec & spec) {\n+\n+  bool needsSymbolicGradient(const ArgumentSpec & spec) {", "path": "torch/csrc/jit/graph_executor.cpp", "position": null, "original_position": 99, "commit_id": "ba574c6b8fe9cef23df54f42b658729cf5c63b5b", "original_commit_id": "3715ff61a72d1845f90361f20171025396484c88", "user": {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, "body": "ArgumentSpec is always constructed using GradMode, to make the interfaces that use it functional. So why is it not used in the original needsGradient? That is because we want to avoid constructing ArgumentSpec in `run` if we are not actually going to use it because it has some overhead to construct. `needSymbolicGradient` -> `argumentSpecRequiresGradient`", "created_at": "2018-05-11T17:52:03Z", "updated_at": "2018-11-23T15:43:57Z", "html_url": "https://github.com/pytorch/pytorch/pull/7489#discussion_r187686758", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/7489", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/187686758"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/7489#discussion_r187686758"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/7489"}}, "body_html": "<p>ArgumentSpec is always constructed using GradMode, to make the interfaces that use it functional. So why is it not used in the original needsGradient? That is because we want to avoid constructing ArgumentSpec in <code>run</code> if we are not actually going to use it because it has some overhead to construct. <code>needSymbolicGradient</code> -&gt; <code>argumentSpecRequiresGradient</code></p>", "body_text": "ArgumentSpec is always constructed using GradMode, to make the interfaces that use it functional. So why is it not used in the original needsGradient? That is because we want to avoid constructing ArgumentSpec in run if we are not actually going to use it because it has some overhead to construct. needSymbolicGradient -> argumentSpecRequiresGradient", "in_reply_to_id": 187561971}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4514", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4514/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4514/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4514/events", "html_url": "https://github.com/pytorch/pytorch/issues/4514", "id": 286535860, "node_id": "MDU6SXNzdWUyODY1MzU4NjA=", "number": 4514, "title": "nn.Embedding(), max_norm is not None can`t fix the random seed on cuda: #4340", "user": {"login": "bamtercelboo", "id": 22359268, "node_id": "MDQ6VXNlcjIyMzU5MjY4", "avatar_url": "https://avatars0.githubusercontent.com/u/22359268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bamtercelboo", "html_url": "https://github.com/bamtercelboo", "followers_url": "https://api.github.com/users/bamtercelboo/followers", "following_url": "https://api.github.com/users/bamtercelboo/following{/other_user}", "gists_url": "https://api.github.com/users/bamtercelboo/gists{/gist_id}", "starred_url": "https://api.github.com/users/bamtercelboo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bamtercelboo/subscriptions", "organizations_url": "https://api.github.com/users/bamtercelboo/orgs", "repos_url": "https://api.github.com/users/bamtercelboo/repos", "events_url": "https://api.github.com/users/bamtercelboo/events{/privacy}", "received_events_url": "https://api.github.com/users/bamtercelboo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-01-07T02:00:04Z", "updated_at": "2018-01-07T14:03:31Z", "closed_at": "2018-01-07T12:23:46Z", "author_association": "NONE", "body_html": "<p>The problem : <a href=\"https://github.com/pytorch/pytorch/issues/4340\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/4340/hovercard\">#4340</a><br>\nI have find the bug for the problem, the bug appear when use nn.Embedding() , max_norm is not None.<br>\nif you use like this, self.embed = nn.Embedding(V, D, max_norm=None, scale_grad_by_freq=True) , this is ok, no problem, gpu and cpu both ok.<br>\nbut when you use it like this, self.embed = nn.Embedding(V, D, max_norm=5, scale_grad_by_freq=True) , the random seed can not fix in gpu, cpu is ok.<br>\nso, I wonder to know how to fix the random seed when use max_norm is not None, whether there is some error in nn.Embedding().</p>", "body_text": "The problem : #4340\nI have find the bug for the problem, the bug appear when use nn.Embedding() , max_norm is not None.\nif you use like this, self.embed = nn.Embedding(V, D, max_norm=None, scale_grad_by_freq=True) , this is ok, no problem, gpu and cpu both ok.\nbut when you use it like this, self.embed = nn.Embedding(V, D, max_norm=5, scale_grad_by_freq=True) , the random seed can not fix in gpu, cpu is ok.\nso, I wonder to know how to fix the random seed when use max_norm is not None, whether there is some error in nn.Embedding().", "body": "The problem : [#4340](https://github.com/pytorch/pytorch/issues/4340)\r\nI have find the bug for the problem, the bug appear when use nn.Embedding() , max_norm is not None.\r\nif you use like this, self.embed = nn.Embedding(V, D, max_norm=None, scale_grad_by_freq=True) , this is ok, no problem, gpu and cpu both ok.\r\nbut when you use it like this, self.embed = nn.Embedding(V, D, max_norm=5, scale_grad_by_freq=True) , the random seed can not fix in gpu, cpu is ok.\r\nso, I wonder to know how to fix the random seed when use max_norm is not None, whether there is some error in nn.Embedding()."}
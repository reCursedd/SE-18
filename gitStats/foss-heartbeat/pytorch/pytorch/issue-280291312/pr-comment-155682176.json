{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/155682176", "pull_request_review_id": 82019836, "id": 155682176, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NTY4MjE3Ng==", "diff_hunk": "@@ -4486,6 +4486,24 @@ def test_accreal_type(self):\n         self.assertIsInstance(x.char().sum(), int)\n         self.assertIsInstance(x.byte().sum(), int)\n \n+    def test_new(self):\n+        x = torch.autograd.Variable(torch.Tensor())\n+        y = torch.autograd.Variable(torch.randn(4, 4))\n+        z = torch.autograd.Variable(torch.IntTensor([1, 2, 3]))\n+        self.assertEqual(x.new(), x)", "path": "test/test_torch.py", "position": null, "original_position": 8, "commit_id": "bd9a8d484249831282b988d31b32114219b27fbc", "original_commit_id": "8819a410fecd8a2103422ec0a018b04af7986128", "user": {"login": "gchanan", "id": 3768583, "node_id": "MDQ6VXNlcjM3Njg1ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3768583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gchanan", "html_url": "https://github.com/gchanan", "followers_url": "https://api.github.com/users/gchanan/followers", "following_url": "https://api.github.com/users/gchanan/following{/other_user}", "gists_url": "https://api.github.com/users/gchanan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gchanan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gchanan/subscriptions", "organizations_url": "https://api.github.com/users/gchanan/orgs", "repos_url": "https://api.github.com/users/gchanan/repos", "events_url": "https://api.github.com/users/gchanan/events{/privacy}", "received_events_url": "https://api.github.com/users/gchanan/received_events", "type": "User", "site_admin": false}, "body": "I need to look at the parse definition below, but just looking at this test, I'm not sure what the semantics of new are.  With no parameters does it keep the same size or give me an empty tensor?\r\n\r\nI think there could be more tests here for the sizes too, i.e. what happens if I pass in \"()\", \"(0,)\".\r\n\r\nAlso the [0] return for shape here is weird because we aren't exposing scalars, but are exposing 0-sized tensors.  That's almost certainly y fault though.", "created_at": "2017-12-08T00:57:13Z", "updated_at": "2018-11-23T15:37:10Z", "html_url": "https://github.com/pytorch/pytorch/pull/4080#discussion_r155682176", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/4080", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/155682176"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/4080#discussion_r155682176"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/4080"}}, "body_html": "<p>I need to look at the parse definition below, but just looking at this test, I'm not sure what the semantics of new are.  With no parameters does it keep the same size or give me an empty tensor?</p>\n<p>I think there could be more tests here for the sizes too, i.e. what happens if I pass in \"()\", \"(0,)\".</p>\n<p>Also the [0] return for shape here is weird because we aren't exposing scalars, but are exposing 0-sized tensors.  That's almost certainly y fault though.</p>", "body_text": "I need to look at the parse definition below, but just looking at this test, I'm not sure what the semantics of new are.  With no parameters does it keep the same size or give me an empty tensor?\nI think there could be more tests here for the sizes too, i.e. what happens if I pass in \"()\", \"(0,)\".\nAlso the [0] return for shape here is weird because we aren't exposing scalars, but are exposing 0-sized tensors.  That's almost certainly y fault though."}
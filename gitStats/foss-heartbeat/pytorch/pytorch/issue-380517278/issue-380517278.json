{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13949", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13949/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13949/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13949/events", "html_url": "https://github.com/pytorch/pytorch/pull/13949", "id": 380517278, "node_id": "MDExOlB1bGxSZXF1ZXN0MjMwNjk2NDEx", "number": 13949, "title": "Add filler for SparseLengthsWeightedSum", "user": {"login": "yinghai", "id": 1100089, "node_id": "MDQ6VXNlcjExMDAwODk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1100089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yinghai", "html_url": "https://github.com/yinghai", "followers_url": "https://api.github.com/users/yinghai/followers", "following_url": "https://api.github.com/users/yinghai/following{/other_user}", "gists_url": "https://api.github.com/users/yinghai/gists{/gist_id}", "starred_url": "https://api.github.com/users/yinghai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yinghai/subscriptions", "organizations_url": "https://api.github.com/users/yinghai/orgs", "repos_url": "https://api.github.com/users/yinghai/repos", "events_url": "https://api.github.com/users/yinghai/events{/privacy}", "received_events_url": "https://api.github.com/users/yinghai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-14T03:12:49Z", "updated_at": "2018-11-23T15:54:50Z", "closed_at": "2018-11-16T19:32:38Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/13949", "html_url": "https://github.com/pytorch/pytorch/pull/13949", "diff_url": "https://github.com/pytorch/pytorch/pull/13949.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/13949.patch"}, "body_html": "<p>This diff adds support to fillers for SparseLengthsWeight* ops. It does 3 things:</p>\n<ul>\n<li>Add the fillers for SparseLengthsWeight* ops</li>\n<li>Add filling heuristics to consider the path of LengthsRangeFill -&gt; Gather -&gt; SparseLengthsWeightedSum, where the length input is shared by LengthsRangeFill and SparseLengthsWeightedSum. Therefore, we need to carefully bound the value of that length input so that at Gather, it does not index out-of-bound for the weight input of Gather.</li>\n<li>Fix and simplify the logic of math::RandFixedSum, where we just keep rejecting the generated value if it violates the invariants.</li>\n</ul>\n<p>Differential Revision: D13048216</p>", "body_text": "This diff adds support to fillers for SparseLengthsWeight* ops. It does 3 things:\n\nAdd the fillers for SparseLengthsWeight* ops\nAdd filling heuristics to consider the path of LengthsRangeFill -> Gather -> SparseLengthsWeightedSum, where the length input is shared by LengthsRangeFill and SparseLengthsWeightedSum. Therefore, we need to carefully bound the value of that length input so that at Gather, it does not index out-of-bound for the weight input of Gather.\nFix and simplify the logic of math::RandFixedSum, where we just keep rejecting the generated value if it violates the invariants.\n\nDifferential Revision: D13048216", "body": "This diff adds support to fillers for SparseLengthsWeight* ops. It does 3 things:\r\n- Add the fillers for SparseLengthsWeight* ops\r\n- Add filling heuristics to consider the path of LengthsRangeFill -> Gather -> SparseLengthsWeightedSum, where the length input is shared by LengthsRangeFill and SparseLengthsWeightedSum. Therefore, we need to carefully bound the value of that length input so that at Gather, it does not index out-of-bound for the weight input of Gather.\r\n- Fix and simplify the logic of math::RandFixedSum, where we just keep rejecting the generated value if it violates the invariants.\r\n\r\nDifferential Revision: D13048216\r\n"}
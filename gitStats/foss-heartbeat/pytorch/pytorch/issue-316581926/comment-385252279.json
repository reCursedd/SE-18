{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/385252279", "html_url": "https://github.com/pytorch/pytorch/issues/6847#issuecomment-385252279", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6847", "id": 385252279, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTI1MjI3OQ==", "user": {"login": "dimilar", "id": 946995, "node_id": "MDQ6VXNlcjk0Njk5NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/946995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dimilar", "html_url": "https://github.com/dimilar", "followers_url": "https://api.github.com/users/dimilar/followers", "following_url": "https://api.github.com/users/dimilar/following{/other_user}", "gists_url": "https://api.github.com/users/dimilar/gists{/gist_id}", "starred_url": "https://api.github.com/users/dimilar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dimilar/subscriptions", "organizations_url": "https://api.github.com/users/dimilar/orgs", "repos_url": "https://api.github.com/users/dimilar/repos", "events_url": "https://api.github.com/users/dimilar/events{/privacy}", "received_events_url": "https://api.github.com/users/dimilar/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-29T13:40:43Z", "updated_at": "2018-04-29T14:02:56Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6456020\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/pjh5\">@pjh5</a>, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"315168137\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/6668\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/6668/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/6668\">#6668</a> ok, the following is the infomation:<br>\neigen version: e9e95489a (third_parth/eigen)<br>\noperating system: macOS 10.13.4<br>\ncaffe2 build command:<br>\n<code>cmake ../ -DCMAKE_VERBOSE_MAKEFILE=1 -DBUILD_TEST=OFF -DProtobuf_PROTOC_EXECUTABLE=/usr/local/Cellar/protobuf/3.5.2/bin/protoc -DProtobuf_DIR=/usr/local/Cellar/protobuf/3.5.2 -DProtobuf_LIBRARY_DEBUG=/usr/local/Cellar/protobuf/3.5.2/lib/libprotobuf.a -DProtobuf_LIBRARY_RELEASE=/usr/local/Cellar/protobuf/3.5.2/lib/libprotobuf.a -DProtobuf_INCLUDE_DIR=/usr/local/Cellar/protobuf/3.5.2/include -DUSE_CUDA=ON -DCUDNN_ROOT_DIR=/usr/local/cuda-9.1/cudnn7 -DBLAS=MKL -DMKLML_USE_SINGLE_DYNAMIC_LIBRARY=OFF -DMKLML_USE_STATIC_LIBS=ON -DMKLML_MULTI_THREADED=OFF -DUSE_FFMPEG=OFF -DUSE_REDIS=OFF -DUSE_MPI=OFF -DUSE_NCCL=OFF -DUSE_GLOO=OFF -DBUILD_CUSTOM_PROTOBUF=OFF -DCMAKE_BUILD_TYPE=Debug -DCUDA_NVCC_FLAGS=-g -DCUDA_CUDA_LIB=/usr/local/cuda/lib/libcuda.dylib -DCMAKE_MODULE_LINKER_FLAGS_DEBUG=\"-lopencv_core -lopencv_highgui -lopencv_imgproc\" -DCUDA_CUDA_LIB=/usr/local/cuda/lib/libcuda.dylib -DMKLINC=/opt/intel/mkl/include -DMKL_INCLUDE_DIR=/opt/intel/mkl/include -DCAFFE2_HAS_MKL_DNN=ON -DCAFFE2_USE_MKL=ON -DCUDA_NVCC_FLAGS=\"-g\"</code></p>\n<p>full error message:</p>\n<blockquote>\n<p>ssertion failed: (dimensions_match(m_leftImpl.dimensions(), m_rightImpl.dimensions())), function evalSubExprsIfNeeded, file /usr/local/include/eigen3/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h, line 123.<br>\nProcess 19385 stopped</p>\n<ul>\n<li>thread <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"171281708\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/1/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/1\">#1</a>, queue = 'com.apple.main-thread', stop reason = signal SIGABRT<br>\nframe #0: 0x00007fff74ea2b6e libsystem_kernel.dylib<code>__pthread_kill + 10 libsystem_kernel.dylib</code>__pthread_kill:<br>\n-&gt;  0x7fff74ea2b6e &lt;+10&gt;: jae    0x7fff74ea2b78            ; &lt;+20&gt;<br>\n0x7fff74ea2b70 &lt;+12&gt;: movq   %rax, %rdi<br>\n0x7fff74ea2b73 &lt;+15&gt;: jmp    0x7fff74e99b00            ; cerror_nocancel<br>\n0x7fff74ea2b78 &lt;+20&gt;: retq<br>\nTarget 0: (iat_fd_image.bin) stopped.<br>\n(lldb) bt</li>\n<li>thread <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"171281708\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/1/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/1\">#1</a>, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n<ul>\n<li>frame #0: 0x00007fff74ea2b6e libsystem_kernel.dylib<code>__pthread_kill + 10 frame #1: 0x00007fff7506d080 libsystem_pthread.dylib</code>pthread_kill + 333<br>\nframe <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"171402941\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/2\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/2/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/2\">#2</a>: 0x00007fff74dfe1ae libsystem_c.dylib<code>abort + 127 frame #3: 0x00007fff74dc61ac libsystem_c.dylib</code>__assert_rtn + 320<br>\nframe <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"171522963\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/4\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/4/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/4\">#4</a>: 0x0000000103a3ddee libdnnie_cpu.1.dylib<code>Eigen::TensorEvaluator&lt;Eigen::TensorAssignOp&lt;Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 4, 0, long&gt;, 0, Eigen::MakePointer&gt;, Eigen::TensorShufflingOp&lt;std::__1::array&lt;long, 4ul&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 4, 0, long&gt;, 0, Eigen::MakePointer&gt; &gt; const&gt; const, Eigen::DefaultDevice&gt;::evalSubExprsIfNeeded(this=0x00007ffeefbf9210, (null)=0x0000000000000000) at TensorAssign.h:123 frame #5: 0x0000000103a3db5a libdnnie_cpu.1.dylib</code>Eigen::internal::TensorExecutor&lt;Eigen::TensorAssignOp&lt;Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 4, 0, long&gt;, 0, Eigen::MakePointer&gt;, Eigen::TensorShufflingOp&lt;std::__1::array&lt;long, 4ul&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 4, 0, long&gt;, 0, Eigen::MakePointer&gt; &gt; const&gt; const, Eigen::DefaultDevice, true&gt;::run(expr=0x00007ffeefbf9330, device=0x00007ffeefbf9328) at TensorExecutor.h:57<br>\nframe <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"174289461\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/6\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/6/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/6\">#6</a>: 0x0000000103a3da55 libdnnie_cpu.1.dylib<code>Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 4, 0, long&gt;, 0, Eigen::MakePointer&gt;&amp; Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 4, 0, long&gt;, 0, Eigen::MakePointer&gt;::operator=&lt;Eigen::TensorShufflingOp&lt;std::__1::array&lt;long, 4ul&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 4, 0, long&gt;, 0, Eigen::MakePointer&gt; &gt; &gt;(this=0x00007ffeefbf9370, other=0x00007ffeefbf93c0) at TensorMap.h:310 frame #7: 0x0000000103a3a807 libdnnie_cpu.1.dylib</code>void caffe2::math::(anonymous namespace)::EigenTransposeImpl&lt;float, 4&gt;(dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000) at math_cpu.cc:2079<br>\nframe <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"174871471\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/8\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/8/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/8\">#8</a>: 0x00000001039e39d5 libdnnie_cpu.1.dylib<code>bool caffe2::math::(anonymous namespace)::EigenTranspose&lt;float&gt;(ndim=4, dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000) at math_cpu.cc:2105 frame #9: 0x00000001039e38e7 libdnnie_cpu.1.dylib</code>void caffe2::math::Transpose&lt;float, caffe2::CPUContext&gt;(ndim=4, dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000, (null)=0x00000001182a0638) at math_cpu.cc:2145<br>\nframe <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"175552272\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/10\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/10/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/10\">#10</a>: 0x00000001037fb1d4 libdnnie_cpu.1.dylib<code>bool caffe2::TransposeOp&lt;caffe2::CPUContext&gt;::DoRunWithType&lt;float&gt;(this=0x00000001182a0540) at transpose_op.h:60 frame #11: 0x00000001037fadaf libdnnie_cpu.1.dylib</code>bool caffe2::DispatchHelper&lt;caffe2::TensorTypes&lt;float, double, int, long long&gt; &gt;::call&lt;caffe2::TransposeOpcaffe2::CPUContext &gt;(op=0x00000001182a0540, meta=0x000000010fd228b8) at operator.h:671<br>\nframe <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"175559558\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/12\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/12/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/12\">#12</a>: 0x00000001037fad70 libdnnie_cpu.1.dylib<code>bool caffe2::DispatchHelper&lt;caffe2::TensorTypes&lt;float, double, int, long long&gt; &gt;::call&lt;caffe2::TransposeOp&lt;caffe2::CPUContext&gt;, caffe2::CPUContext&gt;(op=0x00000001182a0540, tensor=0x000000010fd22890) at operator.h:671 frame #13: 0x00000001037faccf libdnnie_cpu.1.dylib</code>caffe2::TransposeOpcaffe2::CPUContext::RunOnDevice(this=0x00000001182a0540) at transpose_op.h:44<br>\nframe <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"175574237\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/14\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/14/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/14\">#14</a>: 0x0000000102d7de37 libdnnie_cpu.1.dylib<code>caffe2::Operator&lt;caffe2::CPUContext&gt;::Run(this=0x00000001182a0540, stream_id=0) at operator.h:408 frame #15: 0x0000000102c6ffb7 libdnnie_cpu.1.dylib</code>caffe2::SimpleNet::Run(this=0x0000000118262d20) at net_simple.cc:58<br>\nframe <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"175834985\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/16\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/16/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/16\">#16</a>: 0x0000000102d5b5ad libdnnie_cpu.1.dylib`caffe2::Workspace::RunNet(this=0x000000010fbf9cc8, name=\"\") at workspace.cc:274</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p>and two hints:</p>\n<ul>\n<li>same errors on Linux (Centos 7), similar message, same eigen version</li>\n<li>the same code works with Release mode, because eigen_assert is ignored.</li>\n</ul>", "body_text": "@pjh5, #6668 ok, the following is the infomation:\neigen version: e9e95489a (third_parth/eigen)\noperating system: macOS 10.13.4\ncaffe2 build command:\ncmake ../ -DCMAKE_VERBOSE_MAKEFILE=1 -DBUILD_TEST=OFF -DProtobuf_PROTOC_EXECUTABLE=/usr/local/Cellar/protobuf/3.5.2/bin/protoc -DProtobuf_DIR=/usr/local/Cellar/protobuf/3.5.2 -DProtobuf_LIBRARY_DEBUG=/usr/local/Cellar/protobuf/3.5.2/lib/libprotobuf.a -DProtobuf_LIBRARY_RELEASE=/usr/local/Cellar/protobuf/3.5.2/lib/libprotobuf.a -DProtobuf_INCLUDE_DIR=/usr/local/Cellar/protobuf/3.5.2/include -DUSE_CUDA=ON -DCUDNN_ROOT_DIR=/usr/local/cuda-9.1/cudnn7 -DBLAS=MKL -DMKLML_USE_SINGLE_DYNAMIC_LIBRARY=OFF -DMKLML_USE_STATIC_LIBS=ON -DMKLML_MULTI_THREADED=OFF -DUSE_FFMPEG=OFF -DUSE_REDIS=OFF -DUSE_MPI=OFF -DUSE_NCCL=OFF -DUSE_GLOO=OFF -DBUILD_CUSTOM_PROTOBUF=OFF -DCMAKE_BUILD_TYPE=Debug -DCUDA_NVCC_FLAGS=-g -DCUDA_CUDA_LIB=/usr/local/cuda/lib/libcuda.dylib -DCMAKE_MODULE_LINKER_FLAGS_DEBUG=\"-lopencv_core -lopencv_highgui -lopencv_imgproc\" -DCUDA_CUDA_LIB=/usr/local/cuda/lib/libcuda.dylib -DMKLINC=/opt/intel/mkl/include -DMKL_INCLUDE_DIR=/opt/intel/mkl/include -DCAFFE2_HAS_MKL_DNN=ON -DCAFFE2_USE_MKL=ON -DCUDA_NVCC_FLAGS=\"-g\"\nfull error message:\n\nssertion failed: (dimensions_match(m_leftImpl.dimensions(), m_rightImpl.dimensions())), function evalSubExprsIfNeeded, file /usr/local/include/eigen3/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h, line 123.\nProcess 19385 stopped\n\nthread #1, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\nframe #0: 0x00007fff74ea2b6e libsystem_kernel.dylib__pthread_kill + 10 libsystem_kernel.dylib__pthread_kill:\n->  0x7fff74ea2b6e <+10>: jae    0x7fff74ea2b78            ; <+20>\n0x7fff74ea2b70 <+12>: movq   %rax, %rdi\n0x7fff74ea2b73 <+15>: jmp    0x7fff74e99b00            ; cerror_nocancel\n0x7fff74ea2b78 <+20>: retq\nTarget 0: (iat_fd_image.bin) stopped.\n(lldb) bt\nthread #1, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n\nframe #0: 0x00007fff74ea2b6e libsystem_kernel.dylib__pthread_kill + 10 frame #1: 0x00007fff7506d080 libsystem_pthread.dylibpthread_kill + 333\nframe #2: 0x00007fff74dfe1ae libsystem_c.dylibabort + 127 frame #3: 0x00007fff74dc61ac libsystem_c.dylib__assert_rtn + 320\nframe #4: 0x0000000103a3ddee libdnnie_cpu.1.dylibEigen::TensorEvaluator<Eigen::TensorAssignOp<Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer>, Eigen::TensorShufflingOp<std::__1::array<long, 4ul> const, Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer> > const> const, Eigen::DefaultDevice>::evalSubExprsIfNeeded(this=0x00007ffeefbf9210, (null)=0x0000000000000000) at TensorAssign.h:123 frame #5: 0x0000000103a3db5a libdnnie_cpu.1.dylibEigen::internal::TensorExecutor<Eigen::TensorAssignOp<Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer>, Eigen::TensorShufflingOp<std::__1::array<long, 4ul> const, Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer> > const> const, Eigen::DefaultDevice, true>::run(expr=0x00007ffeefbf9330, device=0x00007ffeefbf9328) at TensorExecutor.h:57\nframe #6: 0x0000000103a3da55 libdnnie_cpu.1.dylibEigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer>& Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer>::operator=<Eigen::TensorShufflingOp<std::__1::array<long, 4ul> const, Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer> > >(this=0x00007ffeefbf9370, other=0x00007ffeefbf93c0) at TensorMap.h:310 frame #7: 0x0000000103a3a807 libdnnie_cpu.1.dylibvoid caffe2::math::(anonymous namespace)::EigenTransposeImpl<float, 4>(dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000) at math_cpu.cc:2079\nframe #8: 0x00000001039e39d5 libdnnie_cpu.1.dylibbool caffe2::math::(anonymous namespace)::EigenTranspose<float>(ndim=4, dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000) at math_cpu.cc:2105 frame #9: 0x00000001039e38e7 libdnnie_cpu.1.dylibvoid caffe2::math::Transpose<float, caffe2::CPUContext>(ndim=4, dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000, (null)=0x00000001182a0638) at math_cpu.cc:2145\nframe #10: 0x00000001037fb1d4 libdnnie_cpu.1.dylibbool caffe2::TransposeOp<caffe2::CPUContext>::DoRunWithType<float>(this=0x00000001182a0540) at transpose_op.h:60 frame #11: 0x00000001037fadaf libdnnie_cpu.1.dylibbool caffe2::DispatchHelper<caffe2::TensorTypes<float, double, int, long long> >::call<caffe2::TransposeOpcaffe2::CPUContext >(op=0x00000001182a0540, meta=0x000000010fd228b8) at operator.h:671\nframe #12: 0x00000001037fad70 libdnnie_cpu.1.dylibbool caffe2::DispatchHelper<caffe2::TensorTypes<float, double, int, long long> >::call<caffe2::TransposeOp<caffe2::CPUContext>, caffe2::CPUContext>(op=0x00000001182a0540, tensor=0x000000010fd22890) at operator.h:671 frame #13: 0x00000001037faccf libdnnie_cpu.1.dylibcaffe2::TransposeOpcaffe2::CPUContext::RunOnDevice(this=0x00000001182a0540) at transpose_op.h:44\nframe #14: 0x0000000102d7de37 libdnnie_cpu.1.dylibcaffe2::Operator<caffe2::CPUContext>::Run(this=0x00000001182a0540, stream_id=0) at operator.h:408 frame #15: 0x0000000102c6ffb7 libdnnie_cpu.1.dylibcaffe2::SimpleNet::Run(this=0x0000000118262d20) at net_simple.cc:58\nframe #16: 0x0000000102d5b5ad libdnnie_cpu.1.dylib`caffe2::Workspace::RunNet(this=0x000000010fbf9cc8, name=\"\") at workspace.cc:274\n\n\n\n\nand two hints:\n\nsame errors on Linux (Centos 7), similar message, same eigen version\nthe same code works with Release mode, because eigen_assert is ignored.", "body": "@pjh5, #6668 ok, the following is the infomation:\r\neigen version: e9e95489a (third_parth/eigen)\r\noperating system: macOS 10.13.4\r\ncaffe2 build command: \r\n`cmake ../ -DCMAKE_VERBOSE_MAKEFILE=1 -DBUILD_TEST=OFF -DProtobuf_PROTOC_EXECUTABLE=/usr/local/Cellar/protobuf/3.5.2/bin/protoc -DProtobuf_DIR=/usr/local/Cellar/protobuf/3.5.2 -DProtobuf_LIBRARY_DEBUG=/usr/local/Cellar/protobuf/3.5.2/lib/libprotobuf.a -DProtobuf_LIBRARY_RELEASE=/usr/local/Cellar/protobuf/3.5.2/lib/libprotobuf.a -DProtobuf_INCLUDE_DIR=/usr/local/Cellar/protobuf/3.5.2/include -DUSE_CUDA=ON -DCUDNN_ROOT_DIR=/usr/local/cuda-9.1/cudnn7 -DBLAS=MKL -DMKLML_USE_SINGLE_DYNAMIC_LIBRARY=OFF -DMKLML_USE_STATIC_LIBS=ON -DMKLML_MULTI_THREADED=OFF -DUSE_FFMPEG=OFF -DUSE_REDIS=OFF -DUSE_MPI=OFF -DUSE_NCCL=OFF -DUSE_GLOO=OFF -DBUILD_CUSTOM_PROTOBUF=OFF -DCMAKE_BUILD_TYPE=Debug -DCUDA_NVCC_FLAGS=-g -DCUDA_CUDA_LIB=/usr/local/cuda/lib/libcuda.dylib -DCMAKE_MODULE_LINKER_FLAGS_DEBUG=\"-lopencv_core -lopencv_highgui -lopencv_imgproc\" -DCUDA_CUDA_LIB=/usr/local/cuda/lib/libcuda.dylib -DMKLINC=/opt/intel/mkl/include -DMKL_INCLUDE_DIR=/opt/intel/mkl/include -DCAFFE2_HAS_MKL_DNN=ON -DCAFFE2_USE_MKL=ON -DCUDA_NVCC_FLAGS=\"-g\"`\r\n\r\nfull error message:\r\n\r\n> ssertion failed: (dimensions_match(m_leftImpl.dimensions(), m_rightImpl.dimensions())), function evalSubExprsIfNeeded, file /usr/local/include/eigen3/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h, line 123.\r\n> Process 19385 stopped\r\n> * thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\r\n>     frame #0: 0x00007fff74ea2b6e libsystem_kernel.dylib`__pthread_kill + 10\r\n> libsystem_kernel.dylib`__pthread_kill:\r\n> ->  0x7fff74ea2b6e <+10>: jae    0x7fff74ea2b78            ; <+20>\r\n>     0x7fff74ea2b70 <+12>: movq   %rax, %rdi\r\n>     0x7fff74ea2b73 <+15>: jmp    0x7fff74e99b00            ; cerror_nocancel\r\n>     0x7fff74ea2b78 <+20>: retq\r\n> Target 0: (iat_fd_image.bin) stopped.\r\n> (lldb) bt\r\n> * thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\r\n>   * frame #0: 0x00007fff74ea2b6e libsystem_kernel.dylib`__pthread_kill + 10\r\n>     frame #1: 0x00007fff7506d080 libsystem_pthread.dylib`pthread_kill + 333\r\n>     frame #2: 0x00007fff74dfe1ae libsystem_c.dylib`abort + 127\r\n>     frame #3: 0x00007fff74dc61ac libsystem_c.dylib`__assert_rtn + 320\r\n>     frame #4: 0x0000000103a3ddee libdnnie_cpu.1.dylib`Eigen::TensorEvaluator<Eigen::TensorAssignOp<Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer>, Eigen::TensorShufflingOp<std::__1::array<long, 4ul> const, Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer> > const> const, Eigen::DefaultDevice>::evalSubExprsIfNeeded(this=0x00007ffeefbf9210, (null)=0x0000000000000000) at TensorAssign.h:123\r\n>     frame #5: 0x0000000103a3db5a libdnnie_cpu.1.dylib`Eigen::internal::TensorExecutor<Eigen::TensorAssignOp<Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer>, Eigen::TensorShufflingOp<std::__1::array<long, 4ul> const, Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer> > const> const, Eigen::DefaultDevice, true>::run(expr=0x00007ffeefbf9330, device=0x00007ffeefbf9328) at TensorExecutor.h:57\r\n>     frame #6: 0x0000000103a3da55 libdnnie_cpu.1.dylib`Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer>& Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer>::operator=<Eigen::TensorShufflingOp<std::__1::array<long, 4ul> const, Eigen::TensorMap<Eigen::Tensor<float, 4, 0, long>, 0, Eigen::MakePointer> > >(this=0x00007ffeefbf9370, other=0x00007ffeefbf93c0) at TensorMap.h:310\r\n>     frame #7: 0x0000000103a3a807 libdnnie_cpu.1.dylib`void caffe2::math::(anonymous namespace)::EigenTransposeImpl<float, 4>(dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000) at math_cpu.cc:2079\r\n>     frame #8: 0x00000001039e39d5 libdnnie_cpu.1.dylib`bool caffe2::math::(anonymous namespace)::EigenTranspose<float>(ndim=4, dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000) at math_cpu.cc:2105\r\n>     frame #9: 0x00000001039e38e7 libdnnie_cpu.1.dylib`void caffe2::math::Transpose<float, caffe2::CPUContext>(ndim=4, dims=0x000000010fd0f3e0, axes=0x00000001182a0a60, X=0x0000000114f97000, Y=0x00000001180b9000, (null)=0x00000001182a0638) at math_cpu.cc:2145\r\n>     frame #10: 0x00000001037fb1d4 libdnnie_cpu.1.dylib`bool caffe2::TransposeOp<caffe2::CPUContext>::DoRunWithType<float>(this=0x00000001182a0540) at transpose_op.h:60\r\n>     frame #11: 0x00000001037fadaf libdnnie_cpu.1.dylib`bool caffe2::DispatchHelper<caffe2::TensorTypes<float, double, int, long long> >::call<caffe2::TransposeOp<caffe2::CPUContext> >(op=0x00000001182a0540, meta=0x000000010fd228b8) at operator.h:671\r\n>     frame #12: 0x00000001037fad70 libdnnie_cpu.1.dylib`bool caffe2::DispatchHelper<caffe2::TensorTypes<float, double, int, long long> >::call<caffe2::TransposeOp<caffe2::CPUContext>, caffe2::CPUContext>(op=0x00000001182a0540, tensor=0x000000010fd22890) at operator.h:671\r\n>     frame #13: 0x00000001037faccf libdnnie_cpu.1.dylib`caffe2::TransposeOp<caffe2::CPUContext>::RunOnDevice(this=0x00000001182a0540) at transpose_op.h:44\r\n>     frame #14: 0x0000000102d7de37 libdnnie_cpu.1.dylib`caffe2::Operator<caffe2::CPUContext>::Run(this=0x00000001182a0540, stream_id=0) at operator.h:408\r\n>     frame #15: 0x0000000102c6ffb7 libdnnie_cpu.1.dylib`caffe2::SimpleNet::Run(this=0x0000000118262d20) at net_simple.cc:58\r\n>     frame #16: 0x0000000102d5b5ad libdnnie_cpu.1.dylib`caffe2::Workspace::RunNet(this=0x000000010fbf9cc8, name=\"\") at workspace.cc:274\r\n> \r\n\r\nand two hints:\r\n- same errors on Linux (Centos 7), similar message, same eigen version\r\n- the same code works with Release mode, because eigen_assert is ignored. \r\n"}
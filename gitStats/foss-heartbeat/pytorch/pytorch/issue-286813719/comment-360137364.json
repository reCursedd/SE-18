{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/360137364", "html_url": "https://github.com/pytorch/pytorch/issues/4534#issuecomment-360137364", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/4534", "id": 360137364, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDEzNzM2NA==", "user": {"login": "maunzzz", "id": 6471357, "node_id": "MDQ6VXNlcjY0NzEzNTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6471357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maunzzz", "html_url": "https://github.com/maunzzz", "followers_url": "https://api.github.com/users/maunzzz/followers", "following_url": "https://api.github.com/users/maunzzz/following{/other_user}", "gists_url": "https://api.github.com/users/maunzzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/maunzzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maunzzz/subscriptions", "organizations_url": "https://api.github.com/users/maunzzz/orgs", "repos_url": "https://api.github.com/users/maunzzz/repos", "events_url": "https://api.github.com/users/maunzzz/events{/privacy}", "received_events_url": "https://api.github.com/users/maunzzz/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-24T13:41:24Z", "updated_at": "2018-01-24T13:41:24Z", "author_association": "NONE", "body_html": "<p>From my understanding the mean and variance during training is calculated as a running sum</p>\n<p><code>m = 0.9*mean(x) +  0.1*m</code><br>\n<code> s = 0.9*std(s) +  0.1*s</code></p>\n<p>then</p>\n<p><code>y = (x - m) / (s + eps)</code></p>\n<p>From docs:<br>\n\"During training, this layer keeps a running estimate of its computed mean and variance. The running sum is kept with a default momentum of 0.1.\"</p>\n<p>In this case, I don't see a problem with a batch size of 1 during training (you probably want to increase the momentum though).<br>\nHave I misunderstood something here? Or why does batch size 1 fail in torch 0.3?</p>", "body_text": "From my understanding the mean and variance during training is calculated as a running sum\nm = 0.9*mean(x) +  0.1*m\n s = 0.9*std(s) +  0.1*s\nthen\ny = (x - m) / (s + eps)\nFrom docs:\n\"During training, this layer keeps a running estimate of its computed mean and variance. The running sum is kept with a default momentum of 0.1.\"\nIn this case, I don't see a problem with a batch size of 1 during training (you probably want to increase the momentum though).\nHave I misunderstood something here? Or why does batch size 1 fail in torch 0.3?", "body": "From my understanding the mean and variance during training is calculated as a running sum  \r\n\r\n`m = 0.9*mean(x) +  0.1*m`\r\n` s = 0.9*std(s) +  0.1*s`\r\n\r\nthen\r\n\r\n`y = (x - m) / (s + eps)`\r\n\r\nFrom docs:\r\n\"During training, this layer keeps a running estimate of its computed mean and variance. The running sum is kept with a default momentum of 0.1.\"\r\n\r\nIn this case, I don't see a problem with a batch size of 1 during training (you probably want to increase the momentum though).\r\nHave I misunderstood something here? Or why does batch size 1 fail in torch 0.3? "}
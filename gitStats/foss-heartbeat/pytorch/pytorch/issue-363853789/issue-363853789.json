{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12075", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12075/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12075/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12075/events", "html_url": "https://github.com/pytorch/pytorch/issues/12075", "id": 363853789, "node_id": "MDU6SXNzdWUzNjM4NTM3ODk=", "number": 12075, "title": "On cuda 10: THCAtomics.cuh(100): error: cannot overload functions distinguished by return type alone", "user": {"login": "svenstaro", "id": 1664, "node_id": "MDQ6VXNlcjE2NjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svenstaro", "html_url": "https://github.com/svenstaro", "followers_url": "https://api.github.com/users/svenstaro/followers", "following_url": "https://api.github.com/users/svenstaro/following{/other_user}", "gists_url": "https://api.github.com/users/svenstaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/svenstaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svenstaro/subscriptions", "organizations_url": "https://api.github.com/users/svenstaro/orgs", "repos_url": "https://api.github.com/users/svenstaro/repos", "events_url": "https://api.github.com/users/svenstaro/events{/privacy}", "received_events_url": "https://api.github.com/users/svenstaro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-09-26T04:27:48Z", "updated_at": "2018-10-13T17:25:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<h2>Issue description</h2>\n<p>Hello, I'm the maintainer of pytorch in Arch Linux. I'm trying to get it to build against cuda 10. It's currently blocking the move to cuda 10 so I'd like  to get this to build somehow.</p>\n<p>Compiling pytorch 0.4.1 against cuda 10 fails with this shortened log:</p>\n<pre><code>/build/python-pytorch/src/pytorch-0.4.1-py2-cuda/aten/src/THC/THCAtomics.cuh(100): error: cannot overload functions distinguished by return type alone\n\n/build/python-pytorch/src/pytorch-0.4.1-py2-cuda/aten/src/THC/THCAtomics.cuh(123): error: return value type does not match the function type\n\n2 errors detected in the compilation of \"/tmp/tmpxft_00001e9d_00000000-4_THCTensorIndex.cpp4.ii\".\nCMake Error at caffe2_gpu_generated_THCTensorIndex.cu.o.Release.cmake:279 (message):\n  Error generating file\n  /build/python-pytorch/src/pytorch-0.4.1-py2-cuda/build/caffe2/CMakeFiles/caffe2_gpu.dir/__/aten/src/THC/./caffe2_gpu_generated_THCTensorIndex.cu.o\n\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/build.make:156: caffe2/CMakeFiles/caffe2_gpu.dir/__/aten/src/THC/caffe2_gpu_generated_THCTensorIndex.cu.o] Error 1\nmake[1]: *** [CMakeFiles/Makefile2:968: caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2\nmake: *** [Makefile:141: all] Error 2\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\n</code></pre>\n<h2>My build invocation</h2>\n<p>I'm building 0.4.1 release commit <code>a24163a</code>.</p>\n<p>This is what I'm currently using to build this. You should be able to reproduce it using this.</p>\n<pre><code>cd \"$srcdir/${_pkgname}-${pkgver}-py2-cuda\"\nCC=gcc-7 \\\nCXX=g++-7 \\\nWITH_CUDA=1 \\\nCUDA_HOME=/opt/cuda \\\nWITH_CUDNN=1 \\\nCUDNN_LIB_DIR=/opt/cuda/lib64 \\\nCUDNN_INCLUDE_DIR=/opt/cuda/include \\\npython2 setup.py build\n</code></pre>\n<h2>System Info</h2>\n<p>Not applicable because I'm building in a clean chroot that has nothing to do with my system.</p>\n<ul>\n<li>PyTorch or Caffe2: pytorch</li>\n<li>How you installed PyTorch (conda, pip, source): source</li>\n<li>Build command you used (if compiling from source): see above</li>\n<li>OS: Arch Linux</li>\n<li>PyTorch version: 0.4.1 commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/a24163a95edb193ff7b06e98cd69bf7cfd4c0d2f/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/a24163a95edb193ff7b06e98cd69bf7cfd4c0d2f\"><tt>a24163a</tt></a></li>\n<li>Python version: 2.7/3.7 both fail</li>\n<li>CUDA/cuDNN version: 10.0/7.3.0</li>\n<li>GPU models and configuration: doesn't matter</li>\n<li>GCC version (if compiling from source): 7.3.1+20180814</li>\n<li>CMake version: 3.12.2</li>\n<li>Versions of any other relevant libraries: request them if you need any specifics</li>\n</ul>", "body_text": "Issue description\nHello, I'm the maintainer of pytorch in Arch Linux. I'm trying to get it to build against cuda 10. It's currently blocking the move to cuda 10 so I'd like  to get this to build somehow.\nCompiling pytorch 0.4.1 against cuda 10 fails with this shortened log:\n/build/python-pytorch/src/pytorch-0.4.1-py2-cuda/aten/src/THC/THCAtomics.cuh(100): error: cannot overload functions distinguished by return type alone\n\n/build/python-pytorch/src/pytorch-0.4.1-py2-cuda/aten/src/THC/THCAtomics.cuh(123): error: return value type does not match the function type\n\n2 errors detected in the compilation of \"/tmp/tmpxft_00001e9d_00000000-4_THCTensorIndex.cpp4.ii\".\nCMake Error at caffe2_gpu_generated_THCTensorIndex.cu.o.Release.cmake:279 (message):\n  Error generating file\n  /build/python-pytorch/src/pytorch-0.4.1-py2-cuda/build/caffe2/CMakeFiles/caffe2_gpu.dir/__/aten/src/THC/./caffe2_gpu_generated_THCTensorIndex.cu.o\n\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/build.make:156: caffe2/CMakeFiles/caffe2_gpu.dir/__/aten/src/THC/caffe2_gpu_generated_THCTensorIndex.cu.o] Error 1\nmake[1]: *** [CMakeFiles/Makefile2:968: caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2\nmake: *** [Makefile:141: all] Error 2\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\n\nMy build invocation\nI'm building 0.4.1 release commit a24163a.\nThis is what I'm currently using to build this. You should be able to reproduce it using this.\ncd \"$srcdir/${_pkgname}-${pkgver}-py2-cuda\"\nCC=gcc-7 \\\nCXX=g++-7 \\\nWITH_CUDA=1 \\\nCUDA_HOME=/opt/cuda \\\nWITH_CUDNN=1 \\\nCUDNN_LIB_DIR=/opt/cuda/lib64 \\\nCUDNN_INCLUDE_DIR=/opt/cuda/include \\\npython2 setup.py build\n\nSystem Info\nNot applicable because I'm building in a clean chroot that has nothing to do with my system.\n\nPyTorch or Caffe2: pytorch\nHow you installed PyTorch (conda, pip, source): source\nBuild command you used (if compiling from source): see above\nOS: Arch Linux\nPyTorch version: 0.4.1 commit a24163a\nPython version: 2.7/3.7 both fail\nCUDA/cuDNN version: 10.0/7.3.0\nGPU models and configuration: doesn't matter\nGCC version (if compiling from source): 7.3.1+20180814\nCMake version: 3.12.2\nVersions of any other relevant libraries: request them if you need any specifics", "body": "## Issue description\r\n\r\nHello, I'm the maintainer of pytorch in Arch Linux. I'm trying to get it to build against cuda 10. It's currently blocking the move to cuda 10 so I'd like  to get this to build somehow.\r\n\r\nCompiling pytorch 0.4.1 against cuda 10 fails with this shortened log:\r\n\r\n```\r\n/build/python-pytorch/src/pytorch-0.4.1-py2-cuda/aten/src/THC/THCAtomics.cuh(100): error: cannot overload functions distinguished by return type alone\r\n\r\n/build/python-pytorch/src/pytorch-0.4.1-py2-cuda/aten/src/THC/THCAtomics.cuh(123): error: return value type does not match the function type\r\n\r\n2 errors detected in the compilation of \"/tmp/tmpxft_00001e9d_00000000-4_THCTensorIndex.cpp4.ii\".\r\nCMake Error at caffe2_gpu_generated_THCTensorIndex.cu.o.Release.cmake:279 (message):\r\n  Error generating file\r\n  /build/python-pytorch/src/pytorch-0.4.1-py2-cuda/build/caffe2/CMakeFiles/caffe2_gpu.dir/__/aten/src/THC/./caffe2_gpu_generated_THCTensorIndex.cu.o\r\n\r\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/build.make:156: caffe2/CMakeFiles/caffe2_gpu.dir/__/aten/src/THC/caffe2_gpu_generated_THCTensorIndex.cu.o] Error 1\r\nmake[1]: *** [CMakeFiles/Makefile2:968: caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2\r\nmake: *** [Makefile:141: all] Error 2\r\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\r\n```\r\n\r\n## My build invocation\r\n\r\nI'm building 0.4.1 release commit `a24163a`.\r\n\r\nThis is what I'm currently using to build this. You should be able to reproduce it using this.\r\n\r\n    cd \"$srcdir/${_pkgname}-${pkgver}-py2-cuda\"\r\n    CC=gcc-7 \\\r\n    CXX=g++-7 \\\r\n    WITH_CUDA=1 \\\r\n    CUDA_HOME=/opt/cuda \\\r\n    WITH_CUDNN=1 \\\r\n    CUDNN_LIB_DIR=/opt/cuda/lib64 \\\r\n    CUDNN_INCLUDE_DIR=/opt/cuda/include \\\r\n    python2 setup.py build\r\n\r\n## System Info\r\nNot applicable because I'm building in a clean chroot that has nothing to do with my system.\r\n\r\n- PyTorch or Caffe2: pytorch\r\n- How you installed PyTorch (conda, pip, source): source\r\n- Build command you used (if compiling from source): see above\r\n- OS: Arch Linux \r\n- PyTorch version: 0.4.1 commit a24163a\r\n- Python version: 2.7/3.7 both fail\r\n- CUDA/cuDNN version: 10.0/7.3.0\r\n- GPU models and configuration: doesn't matter\r\n- GCC version (if compiling from source): 7.3.1+20180814\r\n- CMake version: 3.12.2\r\n- Versions of any other relevant libraries: request them if you need any specifics"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13499", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13499/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13499/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13499/events", "html_url": "https://github.com/pytorch/pytorch/issues/13499", "id": 376667595, "node_id": "MDU6SXNzdWUzNzY2Njc1OTU=", "number": 13499, "title": "USE_NCCL is On, But Private Dependencies does not include nccl", "user": {"login": "forhonourlx", "id": 16576219, "node_id": "MDQ6VXNlcjE2NTc2MjE5", "avatar_url": "https://avatars3.githubusercontent.com/u/16576219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/forhonourlx", "html_url": "https://github.com/forhonourlx", "followers_url": "https://api.github.com/users/forhonourlx/followers", "following_url": "https://api.github.com/users/forhonourlx/following{/other_user}", "gists_url": "https://api.github.com/users/forhonourlx/gists{/gist_id}", "starred_url": "https://api.github.com/users/forhonourlx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/forhonourlx/subscriptions", "organizations_url": "https://api.github.com/users/forhonourlx/orgs", "repos_url": "https://api.github.com/users/forhonourlx/repos", "events_url": "https://api.github.com/users/forhonourlx/events{/privacy}", "received_events_url": "https://api.github.com/users/forhonourlx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 778855555, "node_id": "MDU6TGFiZWw3Nzg4NTU1NTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/build", "name": "build", "color": "bfdadc", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-02T04:41:04Z", "updated_at": "2018-11-05T18:52:43Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>Traceback (most recent call last):<br>\nFile \"test_dist.py\", line 5, in <br>\ndist.init_process_group(backend=\"NCCL\", init_method=\"file:///distributed_test\", world_size=2, rank=0)<br>\nFile \"/home/simon/anaconda3/lib/python3.7/site-packages/torch/distributed/distributed_c10d.py\", line 288, in init_process_group<br>\nraise RuntimeError(\"Distributed package doesn't have NCCL \"<br>\nRuntimeError: Distributed package doesn't have NCCL built in</p>\n<h2>To Reproduce</h2>\n<p>I install pytorch from the source v1.0rc1, getting the config summary as follows:<br>\nUSE_NCCL is On, Private Dependencies does not include nccl, nccl is not built-in.</p>\n<h2>-- ******** Summary ********<br>\n-- General:<br>\n--   CMake version         : 3.12.2<br>\n--   CMake command         : /home/simon/anaconda3/bin/cmake<br>\n--   System                : Linux<br>\n--   C++ compiler          : /usr/bin/c++<br>\n--   C++ compiler version  : 7.3.0<br>\n--   BLAS                  : MKL<br>\n--   CXX flags             : -msse3 -msse4.1 -msse4.2   --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -Wno-stringop-overflow<br>\n--   Build type            : Release<br>\n--   Compile definitions   : ONNX_NAMESPACE=onnx_torch;MAGMA_V2;USE_C11_ATOMICS=1;TH_BLAS_MKL;HAVE_MMAP=1;_FILE_OFFSET_BITS=64;HAVE_SHM_OPEN=1;HAVE_SHM_UNLINK=1;HAVE_MALLOC_USABLE_SIZE=1<br>\n--   CMAKE_PREFIX_PATH     : /home/simon/anaconda3/lib/python3.7/site-packages<br>\n--   CMAKE_INSTALL_PREFIX  : /home/simon/Desktop/pytorch-scripts-1.0rc1/pytorch/torch/lib/tmp_install</h2>\n<p>--   TORCH_VERSION         : 1.0.0<br>\n--   CAFFE2_VERSION        : 1.0.0<br>\n--   BUILD_ATEN_MOBILE     : OFF<br>\n--   BUILD_BINARY          : OFF<br>\n--   BUILD_CUSTOM_PROTOBUF : ON<br>\n--     Link local protobuf : ON<br>\n--   BUILD_DOCS            : OFF<br>\n--   BUILD_PYTHON          : ON<br>\n--     Python version      : 3.7<br>\n--     Python executable   : /home/simon/anaconda3/bin/python<br>\n--     Pythonlibs version  : 3.7.0<br>\n--     Python library      : /home/simon/anaconda3/lib/python3.7<br>\n--     Python includes     : /home/simon/anaconda3/include/python3.7m<br>\n--     Python site-packages: lib/python3.7/site-packages<br>\n--   BUILD_CAFFE2_OPS      : ON<br>\n--   BUILD_SHARED_LIBS     : ON<br>\n--   BUILD_TEST            : ON<br>\n--   USE_ASAN              : OFF<br>\n--   USE_CUDA              : 1<br>\n--     CUDA static link    : 0<br>\n--     USE_CUDNN           : ON<br>\n--     CUDA version        : 10.0<br>\n--     cuDNN version       : 7.3.1<br>\n--     CUDA root directory : /usr/local/cuda<br>\n--     CUDA library        : /usr/lib/x86_64-linux-gnu/libcuda.so<br>\n--     cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so<br>\n--     cublas library      : /usr/local/cuda/lib64/libcublas.so<br>\n--     cufft library       : /usr/local/cuda/lib64/libcufft.so<br>\n--     curand library      : /usr/local/cuda/lib64/libcurand.so<br>\n--     cuDNN library       : /usr/local/cuda/lib64/libcudnn.so.7<br>\n--     nvrtc               : /usr/local/cuda/lib64/libnvrtc.so<br>\n--     CUDA include path   : /usr/local/cuda/include<br>\n--     NVCC executable     : /usr/local/cuda/bin/nvcc<br>\n--     CUDA host compiler  : /usr/bin/cc<br>\n--     USE_TENSORRT        : OFF<br>\n--   USE_ROCM              : OFF<br>\n--   USE_EIGEN_FOR_BLAS    :<br>\n--   USE_FFMPEG            : OFF<br>\n--   USE_GFLAGS            : OFF<br>\n--   USE_GLOG              : OFF<br>\n--   USE_LEVELDB           : OFF<br>\n--   USE_LITE_PROTO        : OFF<br>\n--   USE_LMDB              : OFF<br>\n--   USE_METAL             : OFF<br>\n--   USE_MKL               :<br>\n--   USE_MOBILE_OPENGL     : OFF<br>\n--   USE_NCCL              : ON<br>\n--     USE_SYSTEM_NCCL     : ON<br>\n--   USE_NERVANA_GPU       : OFF<br>\n--   USE_NNPACK            : 1<br>\n--   USE_OBSERVERS         : ON<br>\n--   USE_OPENCL            : OFF<br>\n--   USE_OPENCV            : OFF<br>\n--   USE_OPENMP            : OFF<br>\n--   USE_PROF              : OFF<br>\n--   USE_REDIS             : OFF<br>\n--   USE_ROCKSDB           : OFF<br>\n--   USE_ZMQ               : OFF<br>\n--   USE_DISTRIBUTED       : ON<br>\n--     USE_MPI             : OFF<br>\n--     USE_GLOO            : ON<br>\n--     USE_GLOO_IBVERBS    : OFF<br>\n--   Public Dependencies  : Threads::Threads;caffe2::mkl<br>\n--   Private Dependencies : nnpack;cpuinfo;gloo;gloo;aten_op_header_gen;onnxifi_loader;rt;gcc_s;gcc;dl<br>\n-- Configuring done</p>\n<h2>Environment</h2>\n<ul>\n<li>PyTorch Version (e.g., 1.0):v1.0rc1</li>\n<li>OS (e.g., Linux):Ubuntu18.04.1</li>\n<li>How you installed PyTorch (<code>conda</code>, <code>pip</code>, source):source</li>\n<li>Build command you used (if compiling from source):python setup.py install</li>\n<li>Python version:3.7</li>\n<li>CUDA/cuDNN version:CUDA10.0, CuDNN7.3.1</li>\n<li>GPU models and configuration:GTX1080</li>\n<li>Any other relevant information:</li>\n</ul>", "body_text": "\ud83d\udc1b Bug\nTraceback (most recent call last):\nFile \"test_dist.py\", line 5, in \ndist.init_process_group(backend=\"NCCL\", init_method=\"file:///distributed_test\", world_size=2, rank=0)\nFile \"/home/simon/anaconda3/lib/python3.7/site-packages/torch/distributed/distributed_c10d.py\", line 288, in init_process_group\nraise RuntimeError(\"Distributed package doesn't have NCCL \"\nRuntimeError: Distributed package doesn't have NCCL built in\nTo Reproduce\nI install pytorch from the source v1.0rc1, getting the config summary as follows:\nUSE_NCCL is On, Private Dependencies does not include nccl, nccl is not built-in.\n-- ******** Summary ********\n-- General:\n--   CMake version         : 3.12.2\n--   CMake command         : /home/simon/anaconda3/bin/cmake\n--   System                : Linux\n--   C++ compiler          : /usr/bin/c++\n--   C++ compiler version  : 7.3.0\n--   BLAS                  : MKL\n--   CXX flags             : -msse3 -msse4.1 -msse4.2   --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -Wno-stringop-overflow\n--   Build type            : Release\n--   Compile definitions   : ONNX_NAMESPACE=onnx_torch;MAGMA_V2;USE_C11_ATOMICS=1;TH_BLAS_MKL;HAVE_MMAP=1;_FILE_OFFSET_BITS=64;HAVE_SHM_OPEN=1;HAVE_SHM_UNLINK=1;HAVE_MALLOC_USABLE_SIZE=1\n--   CMAKE_PREFIX_PATH     : /home/simon/anaconda3/lib/python3.7/site-packages\n--   CMAKE_INSTALL_PREFIX  : /home/simon/Desktop/pytorch-scripts-1.0rc1/pytorch/torch/lib/tmp_install\n--   TORCH_VERSION         : 1.0.0\n--   CAFFE2_VERSION        : 1.0.0\n--   BUILD_ATEN_MOBILE     : OFF\n--   BUILD_BINARY          : OFF\n--   BUILD_CUSTOM_PROTOBUF : ON\n--     Link local protobuf : ON\n--   BUILD_DOCS            : OFF\n--   BUILD_PYTHON          : ON\n--     Python version      : 3.7\n--     Python executable   : /home/simon/anaconda3/bin/python\n--     Pythonlibs version  : 3.7.0\n--     Python library      : /home/simon/anaconda3/lib/python3.7\n--     Python includes     : /home/simon/anaconda3/include/python3.7m\n--     Python site-packages: lib/python3.7/site-packages\n--   BUILD_CAFFE2_OPS      : ON\n--   BUILD_SHARED_LIBS     : ON\n--   BUILD_TEST            : ON\n--   USE_ASAN              : OFF\n--   USE_CUDA              : 1\n--     CUDA static link    : 0\n--     USE_CUDNN           : ON\n--     CUDA version        : 10.0\n--     cuDNN version       : 7.3.1\n--     CUDA root directory : /usr/local/cuda\n--     CUDA library        : /usr/lib/x86_64-linux-gnu/libcuda.so\n--     cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\n--     cublas library      : /usr/local/cuda/lib64/libcublas.so\n--     cufft library       : /usr/local/cuda/lib64/libcufft.so\n--     curand library      : /usr/local/cuda/lib64/libcurand.so\n--     cuDNN library       : /usr/local/cuda/lib64/libcudnn.so.7\n--     nvrtc               : /usr/local/cuda/lib64/libnvrtc.so\n--     CUDA include path   : /usr/local/cuda/include\n--     NVCC executable     : /usr/local/cuda/bin/nvcc\n--     CUDA host compiler  : /usr/bin/cc\n--     USE_TENSORRT        : OFF\n--   USE_ROCM              : OFF\n--   USE_EIGEN_FOR_BLAS    :\n--   USE_FFMPEG            : OFF\n--   USE_GFLAGS            : OFF\n--   USE_GLOG              : OFF\n--   USE_LEVELDB           : OFF\n--   USE_LITE_PROTO        : OFF\n--   USE_LMDB              : OFF\n--   USE_METAL             : OFF\n--   USE_MKL               :\n--   USE_MOBILE_OPENGL     : OFF\n--   USE_NCCL              : ON\n--     USE_SYSTEM_NCCL     : ON\n--   USE_NERVANA_GPU       : OFF\n--   USE_NNPACK            : 1\n--   USE_OBSERVERS         : ON\n--   USE_OPENCL            : OFF\n--   USE_OPENCV            : OFF\n--   USE_OPENMP            : OFF\n--   USE_PROF              : OFF\n--   USE_REDIS             : OFF\n--   USE_ROCKSDB           : OFF\n--   USE_ZMQ               : OFF\n--   USE_DISTRIBUTED       : ON\n--     USE_MPI             : OFF\n--     USE_GLOO            : ON\n--     USE_GLOO_IBVERBS    : OFF\n--   Public Dependencies  : Threads::Threads;caffe2::mkl\n--   Private Dependencies : nnpack;cpuinfo;gloo;gloo;aten_op_header_gen;onnxifi_loader;rt;gcc_s;gcc;dl\n-- Configuring done\nEnvironment\n\nPyTorch Version (e.g., 1.0):v1.0rc1\nOS (e.g., Linux):Ubuntu18.04.1\nHow you installed PyTorch (conda, pip, source):source\nBuild command you used (if compiling from source):python setup.py install\nPython version:3.7\nCUDA/cuDNN version:CUDA10.0, CuDNN7.3.1\nGPU models and configuration:GTX1080\nAny other relevant information:", "body": "## \ud83d\udc1b Bug\r\n\r\nTraceback (most recent call last):\r\n  File \"test_dist.py\", line 5, in <module>\r\n    dist.init_process_group(backend=\"NCCL\", init_method=\"file:///distributed_test\", world_size=2, rank=0)\r\n  File \"/home/simon/anaconda3/lib/python3.7/site-packages/torch/distributed/distributed_c10d.py\", line 288, in init_process_group\r\n    raise RuntimeError(\"Distributed package doesn't have NCCL \"\r\nRuntimeError: Distributed package doesn't have NCCL built in\r\n\r\n\r\n## To Reproduce\r\n\r\nI install pytorch from the source v1.0rc1, getting the config summary as follows:\r\nUSE_NCCL is On, Private Dependencies does not include nccl, nccl is not built-in.\r\n\r\n-- ******** Summary ********\r\n-- General:\r\n--   CMake version         : 3.12.2\r\n--   CMake command         : /home/simon/anaconda3/bin/cmake\r\n--   System                : Linux\r\n--   C++ compiler          : /usr/bin/c++\r\n--   C++ compiler version  : 7.3.0\r\n--   BLAS                  : MKL\r\n--   CXX flags             : -msse3 -msse4.1 -msse4.2   --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -Wno-stringop-overflow\r\n--   Build type            : Release\r\n--   Compile definitions   : ONNX_NAMESPACE=onnx_torch;MAGMA_V2;USE_C11_ATOMICS=1;TH_BLAS_MKL;HAVE_MMAP=1;_FILE_OFFSET_BITS=64;HAVE_SHM_OPEN=1;HAVE_SHM_UNLINK=1;HAVE_MALLOC_USABLE_SIZE=1\r\n--   CMAKE_PREFIX_PATH     : /home/simon/anaconda3/lib/python3.7/site-packages\r\n--   CMAKE_INSTALL_PREFIX  : /home/simon/Desktop/pytorch-scripts-1.0rc1/pytorch/torch/lib/tmp_install\r\n-- \r\n--   TORCH_VERSION         : 1.0.0\r\n--   CAFFE2_VERSION        : 1.0.0\r\n--   BUILD_ATEN_MOBILE     : OFF\r\n--   BUILD_BINARY          : OFF\r\n--   BUILD_CUSTOM_PROTOBUF : ON\r\n--     Link local protobuf : ON\r\n--   BUILD_DOCS            : OFF\r\n--   BUILD_PYTHON          : ON\r\n--     Python version      : 3.7\r\n--     Python executable   : /home/simon/anaconda3/bin/python\r\n--     Pythonlibs version  : 3.7.0\r\n--     Python library      : /home/simon/anaconda3/lib/python3.7\r\n--     Python includes     : /home/simon/anaconda3/include/python3.7m\r\n--     Python site-packages: lib/python3.7/site-packages\r\n--   BUILD_CAFFE2_OPS      : ON\r\n--   BUILD_SHARED_LIBS     : ON\r\n--   BUILD_TEST            : ON\r\n--   USE_ASAN              : OFF\r\n--   USE_CUDA              : 1\r\n--     CUDA static link    : 0\r\n--     USE_CUDNN           : ON\r\n--     CUDA version        : 10.0\r\n--     cuDNN version       : 7.3.1\r\n--     CUDA root directory : /usr/local/cuda\r\n--     CUDA library        : /usr/lib/x86_64-linux-gnu/libcuda.so\r\n--     cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\r\n--     cublas library      : /usr/local/cuda/lib64/libcublas.so\r\n--     cufft library       : /usr/local/cuda/lib64/libcufft.so\r\n--     curand library      : /usr/local/cuda/lib64/libcurand.so\r\n--     cuDNN library       : /usr/local/cuda/lib64/libcudnn.so.7\r\n--     nvrtc               : /usr/local/cuda/lib64/libnvrtc.so\r\n--     CUDA include path   : /usr/local/cuda/include\r\n--     NVCC executable     : /usr/local/cuda/bin/nvcc\r\n--     CUDA host compiler  : /usr/bin/cc\r\n--     USE_TENSORRT        : OFF\r\n--   USE_ROCM              : OFF\r\n--   USE_EIGEN_FOR_BLAS    : \r\n--   USE_FFMPEG            : OFF\r\n--   USE_GFLAGS            : OFF\r\n--   USE_GLOG              : OFF\r\n--   USE_LEVELDB           : OFF\r\n--   USE_LITE_PROTO        : OFF\r\n--   USE_LMDB              : OFF\r\n--   USE_METAL             : OFF\r\n--   USE_MKL               : \r\n--   USE_MOBILE_OPENGL     : OFF\r\n--   USE_NCCL              : ON\r\n--     USE_SYSTEM_NCCL     : ON\r\n--   USE_NERVANA_GPU       : OFF\r\n--   USE_NNPACK            : 1\r\n--   USE_OBSERVERS         : ON\r\n--   USE_OPENCL            : OFF\r\n--   USE_OPENCV            : OFF\r\n--   USE_OPENMP            : OFF\r\n--   USE_PROF              : OFF\r\n--   USE_REDIS             : OFF\r\n--   USE_ROCKSDB           : OFF\r\n--   USE_ZMQ               : OFF\r\n--   USE_DISTRIBUTED       : ON\r\n--     USE_MPI             : OFF\r\n--     USE_GLOO            : ON\r\n--     USE_GLOO_IBVERBS    : OFF\r\n--   Public Dependencies  : Threads::Threads;caffe2::mkl\r\n--   Private Dependencies : nnpack;cpuinfo;gloo;gloo;aten_op_header_gen;onnxifi_loader;rt;gcc_s;gcc;dl\r\n-- Configuring done\r\n\r\n## Environment\r\n\r\n - PyTorch Version (e.g., 1.0):v1.0rc1\r\n - OS (e.g., Linux):Ubuntu18.04.1\r\n - How you installed PyTorch (`conda`, `pip`, source):source\r\n - Build command you used (if compiling from source):python setup.py install\r\n - Python version:3.7\r\n - CUDA/cuDNN version:CUDA10.0, CuDNN7.3.1\r\n - GPU models and configuration:GTX1080\r\n - Any other relevant information:\r\n\r\n"}
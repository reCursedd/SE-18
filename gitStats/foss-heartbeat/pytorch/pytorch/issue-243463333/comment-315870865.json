{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/315870865", "html_url": "https://github.com/pytorch/pytorch/issues/2134#issuecomment-315870865", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2134", "id": 315870865, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTg3MDg2NQ==", "user": {"login": "vadimkantorov", "id": 1041752, "node_id": "MDQ6VXNlcjEwNDE3NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1041752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vadimkantorov", "html_url": "https://github.com/vadimkantorov", "followers_url": "https://api.github.com/users/vadimkantorov/followers", "following_url": "https://api.github.com/users/vadimkantorov/following{/other_user}", "gists_url": "https://api.github.com/users/vadimkantorov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vadimkantorov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vadimkantorov/subscriptions", "organizations_url": "https://api.github.com/users/vadimkantorov/orgs", "repos_url": "https://api.github.com/users/vadimkantorov/repos", "events_url": "https://api.github.com/users/vadimkantorov/events{/privacy}", "received_events_url": "https://api.github.com/users/vadimkantorov/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-17T20:20:02Z", "updated_at": "2017-07-17T20:20:42Z", "author_association": "NONE", "body_html": "<p><code>kthvalue</code> returns k'th smallest element, while <code>topk</code> returns by default largest elements. So a workaround should be:</p>\n<div class=\"highlight highlight-source-python\"><pre> <span class=\"pl-c\"><span class=\"pl-c\">#</span> dim = None wouldn't work because topk requires a dim argument if largest = False is used</span>\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">kthvalue</span>(<span class=\"pl-smi\">tensor</span>, <span class=\"pl-smi\">k</span>, <span class=\"pl-smi\">dim</span><span class=\"pl-k\">=</span><span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>):\n    val, idx <span class=\"pl-k\">=</span> tensor.topk(k, <span class=\"pl-v\">largest</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">False</span>, <span class=\"pl-v\">dim</span> <span class=\"pl-k\">=</span> dim)\n    <span class=\"pl-k\">return</span> val[<span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>:], idx[<span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>:]</pre></div>", "body_text": "kthvalue returns k'th smallest element, while topk returns by default largest elements. So a workaround should be:\n # dim = None wouldn't work because topk requires a dim argument if largest = False is used\ndef kthvalue(tensor, k, dim=-1):\n    val, idx = tensor.topk(k, largest = False, dim = dim)\n    return val[-1:], idx[-1:]", "body": "`kthvalue` returns k'th smallest element, while `topk` returns by default largest elements. So a workaround should be:\r\n```python\r\n # dim = None wouldn't work because topk requires a dim argument if largest = False is used\r\ndef kthvalue(tensor, k, dim=-1):\r\n    val, idx = tensor.topk(k, largest = False, dim = dim)\r\n    return val[-1:], idx[-1:]\r\n```"}
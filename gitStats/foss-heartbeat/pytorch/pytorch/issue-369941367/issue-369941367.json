{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12635", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12635/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12635/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12635/events", "html_url": "https://github.com/pytorch/pytorch/issues/12635", "id": 369941367, "node_id": "MDU6SXNzdWUzNjk5NDEzNjc=", "number": 12635, "title": "Prune old branches when browsing the grad graph", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-14T20:40:19Z", "updated_at": "2018-10-16T02:00:32Z", "closed_at": null, "author_association": "MEMBER", "body_html": "<p>Consider <a href=\"https://gist.github.com/kyunghyuncho/5fb9991ce1233f909051854a84b7148e\">this simple script</a>.</p>\n<p>Even though the work done at every iteration (including <code>torch.autograd.grad</code>) seems constant, it shows some noticeable slow downs after a number of iterations. This is because <code>torch.autograd.grad</code> needs to browse the whole graph built so far, because we don't have any ways of proving that some branches have no effect on <code>M</code>. We might want to consider having some \"approximate timestamps\" that would let us prune the search if we discover that we're in a part of the graph that provably has been constructed before this value has even been materialized.</p>", "body_text": "Consider this simple script.\nEven though the work done at every iteration (including torch.autograd.grad) seems constant, it shows some noticeable slow downs after a number of iterations. This is because torch.autograd.grad needs to browse the whole graph built so far, because we don't have any ways of proving that some branches have no effect on M. We might want to consider having some \"approximate timestamps\" that would let us prune the search if we discover that we're in a part of the graph that provably has been constructed before this value has even been materialized.", "body": "Consider [this simple script](https://gist.github.com/kyunghyuncho/5fb9991ce1233f909051854a84b7148e).\r\n\r\nEven though the work done at every iteration (including `torch.autograd.grad`) seems constant, it shows some noticeable slow downs after a number of iterations. This is because `torch.autograd.grad` needs to browse the whole graph built so far, because we don't have any ways of proving that some branches have no effect on `M`. We might want to consider having some \"approximate timestamps\" that would let us prune the search if we discover that we're in a part of the graph that provably has been constructed before this value has even been materialized."}
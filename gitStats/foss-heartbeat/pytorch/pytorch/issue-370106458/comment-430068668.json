{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/430068668", "html_url": "https://github.com/pytorch/pytorch/issues/12646#issuecomment-430068668", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12646", "id": 430068668, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDA2ODY2OA==", "user": {"login": "aikivl3", "id": 8035201, "node_id": "MDQ6VXNlcjgwMzUyMDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8035201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aikivl3", "html_url": "https://github.com/aikivl3", "followers_url": "https://api.github.com/users/aikivl3/followers", "following_url": "https://api.github.com/users/aikivl3/following{/other_user}", "gists_url": "https://api.github.com/users/aikivl3/gists{/gist_id}", "starred_url": "https://api.github.com/users/aikivl3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aikivl3/subscriptions", "organizations_url": "https://api.github.com/users/aikivl3/orgs", "repos_url": "https://api.github.com/users/aikivl3/repos", "events_url": "https://api.github.com/users/aikivl3/events{/privacy}", "received_events_url": "https://api.github.com/users/aikivl3/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-16T01:26:21Z", "updated_at": "2018-10-16T01:26:21Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=26366414\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mhubii\">@mhubii</a>, thank for your reply. Yes I have already installed caffe2 from anaconda's pre-built binaries. But I wasn't aware of it. Now how can I fix the issue?</p>\n<p>here is my full error message:</p>\n<p>Building wheel torch-1.0.0a0+6dd7194<br>\nrunning install<br>\nsetup.py::run()<br>\nrunning build_deps<br>\nsetup.py::build_deps::run()</p>\n<ul>\n<li>SYNC_COMMAND=cp<br>\n++ command -v rsync</li>\n<li>'[' -x /usr/bin/rsync ']'</li>\n<li>SYNC_COMMAND='rsync -lptgoD'</li>\n<li>USE_CUDA=0</li>\n<li>USE_ROCM=0</li>\n<li>USE_NNPACK=0</li>\n<li>USE_MKLDNN=0</li>\n<li>USE_GLOO_IBVERBS=0</li>\n<li>CAFFE2_STATIC_LINK_CUDA=0</li>\n<li>RERUN_CMAKE=1</li>\n<li>[[ 8 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>USE_CUDA=1</li>\n<li>shift</li>\n<li>[[ 7 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>USE_NNPACK=1</li>\n<li>shift</li>\n<li>[[ 6 -gt 0 ]]</li>\n<li>case \"$1\" in</li>\n<li>break</li>\n<li>CMAKE_INSTALL='make install'</li>\n<li>BUILD_SHARED_LIBS=ON</li>\n<li>USER_CFLAGS=</li>\n<li>USER_LDFLAGS=</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]<br>\n++ uname</li>\n<li>'[' Linux == Darwin ']'<br>\n+++ dirname ../tools/build_pytorch_libs.sh<br>\n++ cd ../tools/..<br>\n+++ pwd<br>\n++ printf '%q\\n' /home/bapvn/work/caffe2-pytorch</li>\n<li>BASE_DIR=/home/bapvn/work/caffe2-pytorch</li>\n<li>TORCH_LIB_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib</li>\n<li>INSTALL_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install</li>\n<li>THIRD_PARTY_DIR=/home/bapvn/work/caffe2-pytorch/third_party</li>\n<li>CMAKE_VERSION=cmake</li>\n<li>C_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\"'</li>\n<li>C_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'</li>\n<li>LDFLAGS='-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\" '</li>\n<li>LD_POSTFIX=.so<br>\n++ uname</li>\n<li>[[ Linux == \\D\\a\\r\\w\\i\\n ]]</li>\n<li>[[ 0 -eq 1 ]]</li>\n<li>LDFLAGS='-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'</li>\n<li>CPP_FLAGS=' -std=c++11 '</li>\n<li>GLOO_FLAGS='-DBUILD_TEST=OFF '</li>\n<li>THD_FLAGS=</li>\n<li>NCCL_ROOT_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install</li>\n<li>[[ 1 -eq 1 ]]</li>\n<li>GLOO_FLAGS+='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install'</li>\n<li>[[ 0 -eq 1 ]]</li>\n<li>CWRAP_FILES='/home/bapvn/work/caffe2-pytorch/torch/lib/ATen/Declarations.cwrap;/home/bapvn/work/caffe2-pytorch/torch/lib/THNN/generic/THNN.h;/home/bapvn/work/caffe2-pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/bapvn/work/caffe2-pytorch/torch/lib/ATen/nn.yaml'</li>\n<li>CUDA_NVCC_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'</li>\n<li>[[ -z '' ]]</li>\n<li>CUDA_DEVICE_DEBUG=0</li>\n<li>'[' -z '' ']'<br>\n++ getconf _NPROCESSORS_ONLN</li>\n<li>MAX_JOBS=6</li>\n<li>BUILD_TYPE=Release</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n '' ]]</li>\n<li>echo 'Building in Release mode'<br>\nBuilding in Release mode</li>\n<li>mkdir -p /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install</li>\n<li>for arg in '\"$@\"'</li>\n<li>[[ nccl == \\n\\c\\c\\l ]]</li>\n<li>pushd /home/bapvn/work/caffe2-pytorch/third_party<br>\n~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build</li>\n<li>build_nccl</li>\n<li>mkdir -p build/nccl</li>\n<li>pushd build/nccl<br>\n~/work/caffe2-pytorch/third_party/build/nccl ~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build</li>\n<li>[[ 1 -eq 1 ]]</li>\n<li>cmake ../../nccl -DCMAKE_MODULE_PATH=/home/bapvn/work/caffe2-pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/bapvn/work/caffe2-pytorch/cmake/public/utils.cmake -DNUM_JOBS=6<br>\n-- Autodetected CUDA architecture(s): 6.1<br>\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_61,code=sm_61<br>\n-- Configuring done<br>\n-- Generating done<br>\n-- Build files have been written to: /home/bapvn/work/caffe2-pytorch/third_party/build/nccl</li>\n<li>make install -j6<br>\n[100%] Built target nccl<br>\nInstall the project...<br>\n-- Install configuration: \"Release\"<br>\n-- Up-to-date: /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/nccl.h</li>\n<li>mkdir -p /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib</li>\n<li>find lib -name 'libnccl.so*'</li>\n<li>xargs -I '{}' rsync -lptgoD '{}' /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib/</li>\n<li>popd<br>\n~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build</li>\n<li>'[' -f ./nccl/nccl/src/nccl.h ']'</li>\n<li>popd<br>\n~/work/caffe2-pytorch/build</li>\n<li>for arg in '\"$@\"'</li>\n<li>[[ caffe2 == \\n\\c\\c\\l ]]</li>\n<li>[[ caffe2 == \\g\\l\\o\\o ]]</li>\n<li>[[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]</li>\n<li>build_caffe2</li>\n<li>[[ -z '' ]]</li>\n<li>EXTRA_CAFFE2_CMAKE_FLAGS=()</li>\n<li>[[ -n '' ]]</li>\n<li>[[ -n /home/bapvn/anaconda3/lib/python3.6/site-packages ]]</li>\n<li>EXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")</li>\n<li>[[ 1 -eq 1 ]]</li>\n<li>cmake /home/bapvn/work/caffe2-pytorch -DPYTHON_EXECUTABLE=/home/bapvn/anaconda3/bin/python -DPYTHON_LIBRARY=/home/bapvn/anaconda3/lib/libpython3.6m.so.1.0 -DPYTHON_INCLUDE_DIR=/home/bapvn/anaconda3/include/python3.6m -DBUILDING_WITH_TORCH_LIBS=ON -DTORCH_BUILD_VERSION=1.0.0a0+6dd7194 -DCMAKE_BUILD_TYPE=Release -DBUILD_TORCH=ON -DBUILD_PYTHON=ON -DBUILD_SHARED_LIBS=ON -DBUILD_BINARY=OFF -DBUILD_TEST=ON -DINSTALL_TEST=ON -DBUILD_CAFFE2_OPS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=1 -DUSE_NUMPY= -DCAFFE2_STATIC_LINK_CUDA=0 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DUSE_LEVELDB=OFF -DUSE_LMDB=OFF -DUSE_OPENCV=OFF -DUSE_FFMPEG=OFF -DUSE_GLOG=OFF -DUSE_GFLAGS=OFF -DUSE_SYSTEM_EIGEN_INSTALL=OFF -DCUDNN_INCLUDE_DIR=/usr/include/ -DCUDNN_LIB_DIR=/usr/lib/x86_64-linux-gnu/ -DCUDNN_LIBRARY=/usr/lib/x86_64-linux-gnu/libcudnn.so.7 -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' -DCMAKE_PREFIX_PATH=/home/bapvn/anaconda3/lib/python3.6/site-packages<br>\n-- std::exception_ptr is supported.<br>\n-- NUMA is available<br>\n-- Current compiler supports avx2 extention. Will build perfkernels.<br>\n-- Building using own protobuf under third_party per request.<br>\n-- Use custom protobuf build.<br>\n-- Caffe2 protobuf include directory: $&lt;BUILD_INTERFACE:/home/bapvn/work/caffe2-pytorch/third_party/protobuf/src&gt;$&lt;INSTALL_INTERFACE:include&gt;<br>\n-- The BLAS backend of choice:MKL<br>\n-- Checking for [mkl_intel_lp64 - mkl_gnu_thread - mkl_core - gomp - pthread - m - dl]<br>\n--   Library mkl_intel_lp64: /home/bapvn/anaconda3/lib/libmkl_intel_lp64.so<br>\n--   Library mkl_gnu_thread: /home/bapvn/anaconda3/lib/libmkl_gnu_thread.so<br>\n--   Library mkl_core: /home/bapvn/anaconda3/lib/libmkl_core.so<br>\n--   Library gomp: -fopenmp<br>\n--   Library pthread: /usr/lib/x86_64-linux-gnu/libpthread.so<br>\n--   Library m: /usr/lib/x86_64-linux-gnu/libm.so<br>\n--   Library dl: /usr/lib/x86_64-linux-gnu/libdl.so<br>\n-- Checking for [mkl_intel_lp64 - mkl_gnu_thread - mkl_core - gomp - pthread - m - dl]<br>\n--   Library mkl_intel_lp64: /home/bapvn/anaconda3/lib/libmkl_intel_lp64.so<br>\n--   Library mkl_gnu_thread: /home/bapvn/anaconda3/lib/libmkl_gnu_thread.so<br>\n--   Library mkl_core: /home/bapvn/anaconda3/lib/libmkl_core.so<br>\n--   Library gomp: -fopenmp<br>\n--   Library pthread: /usr/lib/x86_64-linux-gnu/libpthread.so<br>\n--   Library m: /usr/lib/x86_64-linux-gnu/libm.so<br>\n--   Library dl: /usr/lib/x86_64-linux-gnu/libdl.so<br>\nCMake Warning at cmake/Dependencies.cmake:76 (message):<br>\nMKL could not be found.  Defaulting to Eigen<br>\nCall Stack (most recent call first):<br>\nCMakeLists.txt:202 (include)</li>\n</ul>\n<p>-- Brace yourself, we are building NNPACK<br>\n-- Failed to find LLVM FileCheck<br>\n-- git Version: v1.4.0-505be96a<br>\n-- Version: 1.4.0<br>\n-- Performing Test HAVE_STD_REGEX -- success<br>\n-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile<br>\n-- Performing Test HAVE_POSIX_REGEX -- success<br>\n-- Performing Test HAVE_STEADY_CLOCK -- success<br>\n-- Found Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)<br>\n-- Using third party subdirectory Eigen.<br>\nPython 3.6.3 :: Anaconda custom (64-bit)<br>\n-- Found PythonInterp: /home/bapvn/anaconda3/bin/python (found suitable version \"3.6.3\", minimum required is \"2.7\")<br>\n-- NumPy ver. 1.13.3 found (include: /home/bapvn/anaconda3/lib/python3.6/site-packages/numpy/core/include)<br>\n-- Found PythonInterp: /home/bapvn/anaconda3/bin/python (found version \"3.6.3\")<br>\n-- System pybind11 found<br>\n-- pybind11l include dirs: /home/bapvn/anaconda3/include/python3.6m/home/bapvn/anaconda3/include/python3.6m<br>\n-- MPI support found<br>\n-- MPI compile flags:<br>\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi<br>\n-- MPI LINK flags path:  -Wl,-rpath  -Wl,/usr/lib/openmpi/lib  -Wl,--enable-new-dtags<br>\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so<br>\nCMake Warning at cmake/Dependencies.cmake:455 (message):<br>\nOpenMPI found, but it is not built with CUDA support.<br>\nCall Stack (most recent call first):<br>\nCMakeLists.txt:202 (include)</p>\n<p>-- Caffe2: CUDA detected: 9.0<br>\n-- Caffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc<br>\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda<br>\n-- Caffe2: Header version is: 9.0<br>\n-- Found cuDNN: v7.3.1  (include: /usr/include/, library: /usr/lib/x86_64-linux-gnu/libcudnn.so.7)<br>\nCMake Error at cmake/public/cuda.cmake:313 (message):<br>\nCUDA 9.0 is not compatible with std::tuple from GCC version &gt;= 6.  Please<br>\nupgrade to CUDA 9.2 or use the following option to use another version (for<br>\nexample):</p>\n<pre><code>-DCUDA_HOST_COMPILER=/usr/bin/gcc-5\n</code></pre>\n<p>Call Stack (most recent call first):<br>\ncmake/Dependencies.cmake:492 (include)<br>\nCMakeLists.txt:202 (include)</p>\n<p>-- Configuring incomplete, errors occurred!<br>\nSee also \"/home/bapvn/work/caffe2-pytorch/build/CMakeFiles/CMakeOutput.log\".<br>\nSee also \"/home/bapvn/work/caffe2-pytorch/build/CMakeFiles/CMakeError.log\".<br>\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 libshm gloo c10d THD'</p>", "body_text": "Hi @mhubii, thank for your reply. Yes I have already installed caffe2 from anaconda's pre-built binaries. But I wasn't aware of it. Now how can I fix the issue?\nhere is my full error message:\nBuilding wheel torch-1.0.0a0+6dd7194\nrunning install\nsetup.py::run()\nrunning build_deps\nsetup.py::build_deps::run()\n\nSYNC_COMMAND=cp\n++ command -v rsync\n'[' -x /usr/bin/rsync ']'\nSYNC_COMMAND='rsync -lptgoD'\nUSE_CUDA=0\nUSE_ROCM=0\nUSE_NNPACK=0\nUSE_MKLDNN=0\nUSE_GLOO_IBVERBS=0\nCAFFE2_STATIC_LINK_CUDA=0\nRERUN_CMAKE=1\n[[ 8 -gt 0 ]]\ncase \"$1\" in\nUSE_CUDA=1\nshift\n[[ 7 -gt 0 ]]\ncase \"$1\" in\nUSE_NNPACK=1\nshift\n[[ 6 -gt 0 ]]\ncase \"$1\" in\nbreak\nCMAKE_INSTALL='make install'\nBUILD_SHARED_LIBS=ON\nUSER_CFLAGS=\nUSER_LDFLAGS=\n[[ -n '' ]]\n[[ -n '' ]]\n[[ -n '' ]]\n++ uname\n'[' Linux == Darwin ']'\n+++ dirname ../tools/build_pytorch_libs.sh\n++ cd ../tools/..\n+++ pwd\n++ printf '%q\\n' /home/bapvn/work/caffe2-pytorch\nBASE_DIR=/home/bapvn/work/caffe2-pytorch\nTORCH_LIB_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib\nINSTALL_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install\nTHIRD_PARTY_DIR=/home/bapvn/work/caffe2-pytorch/third_party\nCMAKE_VERSION=cmake\nC_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\"'\nC_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\nLDFLAGS='-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\" '\nLD_POSTFIX=.so\n++ uname\n[[ Linux == \\D\\a\\r\\w\\i\\n ]]\n[[ 0 -eq 1 ]]\nLDFLAGS='-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\nCPP_FLAGS=' -std=c++11 '\nGLOO_FLAGS='-DBUILD_TEST=OFF '\nTHD_FLAGS=\nNCCL_ROOT_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install\n[[ 1 -eq 1 ]]\nGLOO_FLAGS+='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install'\n[[ 0 -eq 1 ]]\nCWRAP_FILES='/home/bapvn/work/caffe2-pytorch/torch/lib/ATen/Declarations.cwrap;/home/bapvn/work/caffe2-pytorch/torch/lib/THNN/generic/THNN.h;/home/bapvn/work/caffe2-pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/bapvn/work/caffe2-pytorch/torch/lib/ATen/nn.yaml'\nCUDA_NVCC_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n[[ -z '' ]]\nCUDA_DEVICE_DEBUG=0\n'[' -z '' ']'\n++ getconf _NPROCESSORS_ONLN\nMAX_JOBS=6\nBUILD_TYPE=Release\n[[ -n '' ]]\n[[ -n '' ]]\necho 'Building in Release mode'\nBuilding in Release mode\nmkdir -p /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install\nfor arg in '\"$@\"'\n[[ nccl == \\n\\c\\c\\l ]]\npushd /home/bapvn/work/caffe2-pytorch/third_party\n~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build\nbuild_nccl\nmkdir -p build/nccl\npushd build/nccl\n~/work/caffe2-pytorch/third_party/build/nccl ~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build\n[[ 1 -eq 1 ]]\ncmake ../../nccl -DCMAKE_MODULE_PATH=/home/bapvn/work/caffe2-pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/bapvn/work/caffe2-pytorch/cmake/public/utils.cmake -DNUM_JOBS=6\n-- Autodetected CUDA architecture(s): 6.1\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_61,code=sm_61\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/bapvn/work/caffe2-pytorch/third_party/build/nccl\nmake install -j6\n[100%] Built target nccl\nInstall the project...\n-- Install configuration: \"Release\"\n-- Up-to-date: /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/nccl.h\nmkdir -p /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\nfind lib -name 'libnccl.so*'\nxargs -I '{}' rsync -lptgoD '{}' /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib/\npopd\n~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build\n'[' -f ./nccl/nccl/src/nccl.h ']'\npopd\n~/work/caffe2-pytorch/build\nfor arg in '\"$@\"'\n[[ caffe2 == \\n\\c\\c\\l ]]\n[[ caffe2 == \\g\\l\\o\\o ]]\n[[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]\nbuild_caffe2\n[[ -z '' ]]\nEXTRA_CAFFE2_CMAKE_FLAGS=()\n[[ -n '' ]]\n[[ -n /home/bapvn/anaconda3/lib/python3.6/site-packages ]]\nEXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")\n[[ 1 -eq 1 ]]\ncmake /home/bapvn/work/caffe2-pytorch -DPYTHON_EXECUTABLE=/home/bapvn/anaconda3/bin/python -DPYTHON_LIBRARY=/home/bapvn/anaconda3/lib/libpython3.6m.so.1.0 -DPYTHON_INCLUDE_DIR=/home/bapvn/anaconda3/include/python3.6m -DBUILDING_WITH_TORCH_LIBS=ON -DTORCH_BUILD_VERSION=1.0.0a0+6dd7194 -DCMAKE_BUILD_TYPE=Release -DBUILD_TORCH=ON -DBUILD_PYTHON=ON -DBUILD_SHARED_LIBS=ON -DBUILD_BINARY=OFF -DBUILD_TEST=ON -DINSTALL_TEST=ON -DBUILD_CAFFE2_OPS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=1 -DUSE_NUMPY= -DCAFFE2_STATIC_LINK_CUDA=0 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DUSE_LEVELDB=OFF -DUSE_LMDB=OFF -DUSE_OPENCV=OFF -DUSE_FFMPEG=OFF -DUSE_GLOG=OFF -DUSE_GFLAGS=OFF -DUSE_SYSTEM_EIGEN_INSTALL=OFF -DCUDNN_INCLUDE_DIR=/usr/include/ -DCUDNN_LIB_DIR=/usr/lib/x86_64-linux-gnu/ -DCUDNN_LIBRARY=/usr/lib/x86_64-linux-gnu/libcudnn.so.7 -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' -DCMAKE_PREFIX_PATH=/home/bapvn/anaconda3/lib/python3.6/site-packages\n-- std::exception_ptr is supported.\n-- NUMA is available\n-- Current compiler supports avx2 extention. Will build perfkernels.\n-- Building using own protobuf under third_party per request.\n-- Use custom protobuf build.\n-- Caffe2 protobuf include directory: $<BUILD_INTERFACE:/home/bapvn/work/caffe2-pytorch/third_party/protobuf/src>$<INSTALL_INTERFACE:include>\n-- The BLAS backend of choice:MKL\n-- Checking for [mkl_intel_lp64 - mkl_gnu_thread - mkl_core - gomp - pthread - m - dl]\n--   Library mkl_intel_lp64: /home/bapvn/anaconda3/lib/libmkl_intel_lp64.so\n--   Library mkl_gnu_thread: /home/bapvn/anaconda3/lib/libmkl_gnu_thread.so\n--   Library mkl_core: /home/bapvn/anaconda3/lib/libmkl_core.so\n--   Library gomp: -fopenmp\n--   Library pthread: /usr/lib/x86_64-linux-gnu/libpthread.so\n--   Library m: /usr/lib/x86_64-linux-gnu/libm.so\n--   Library dl: /usr/lib/x86_64-linux-gnu/libdl.so\n-- Checking for [mkl_intel_lp64 - mkl_gnu_thread - mkl_core - gomp - pthread - m - dl]\n--   Library mkl_intel_lp64: /home/bapvn/anaconda3/lib/libmkl_intel_lp64.so\n--   Library mkl_gnu_thread: /home/bapvn/anaconda3/lib/libmkl_gnu_thread.so\n--   Library mkl_core: /home/bapvn/anaconda3/lib/libmkl_core.so\n--   Library gomp: -fopenmp\n--   Library pthread: /usr/lib/x86_64-linux-gnu/libpthread.so\n--   Library m: /usr/lib/x86_64-linux-gnu/libm.so\n--   Library dl: /usr/lib/x86_64-linux-gnu/libdl.so\nCMake Warning at cmake/Dependencies.cmake:76 (message):\nMKL could not be found.  Defaulting to Eigen\nCall Stack (most recent call first):\nCMakeLists.txt:202 (include)\n\n-- Brace yourself, we are building NNPACK\n-- Failed to find LLVM FileCheck\n-- git Version: v1.4.0-505be96a\n-- Version: 1.4.0\n-- Performing Test HAVE_STD_REGEX -- success\n-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile\n-- Performing Test HAVE_POSIX_REGEX -- success\n-- Performing Test HAVE_STEADY_CLOCK -- success\n-- Found Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)\n-- Using third party subdirectory Eigen.\nPython 3.6.3 :: Anaconda custom (64-bit)\n-- Found PythonInterp: /home/bapvn/anaconda3/bin/python (found suitable version \"3.6.3\", minimum required is \"2.7\")\n-- NumPy ver. 1.13.3 found (include: /home/bapvn/anaconda3/lib/python3.6/site-packages/numpy/core/include)\n-- Found PythonInterp: /home/bapvn/anaconda3/bin/python (found version \"3.6.3\")\n-- System pybind11 found\n-- pybind11l include dirs: /home/bapvn/anaconda3/include/python3.6m/home/bapvn/anaconda3/include/python3.6m\n-- MPI support found\n-- MPI compile flags:\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi\n-- MPI LINK flags path:  -Wl,-rpath  -Wl,/usr/lib/openmpi/lib  -Wl,--enable-new-dtags\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so\nCMake Warning at cmake/Dependencies.cmake:455 (message):\nOpenMPI found, but it is not built with CUDA support.\nCall Stack (most recent call first):\nCMakeLists.txt:202 (include)\n-- Caffe2: CUDA detected: 9.0\n-- Caffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda\n-- Caffe2: Header version is: 9.0\n-- Found cuDNN: v7.3.1  (include: /usr/include/, library: /usr/lib/x86_64-linux-gnu/libcudnn.so.7)\nCMake Error at cmake/public/cuda.cmake:313 (message):\nCUDA 9.0 is not compatible with std::tuple from GCC version >= 6.  Please\nupgrade to CUDA 9.2 or use the following option to use another version (for\nexample):\n-DCUDA_HOST_COMPILER=/usr/bin/gcc-5\n\nCall Stack (most recent call first):\ncmake/Dependencies.cmake:492 (include)\nCMakeLists.txt:202 (include)\n-- Configuring incomplete, errors occurred!\nSee also \"/home/bapvn/work/caffe2-pytorch/build/CMakeFiles/CMakeOutput.log\".\nSee also \"/home/bapvn/work/caffe2-pytorch/build/CMakeFiles/CMakeError.log\".\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 libshm gloo c10d THD'", "body": "Hi @mhubii, thank for your reply. Yes I have already installed caffe2 from anaconda's pre-built binaries. But I wasn't aware of it. Now how can I fix the issue?\r\n\r\nhere is my full error message:\r\n\r\nBuilding wheel torch-1.0.0a0+6dd7194\r\nrunning install\r\nsetup.py::run()\r\nrunning build_deps\r\nsetup.py::build_deps::run()\r\n+ SYNC_COMMAND=cp\r\n++ command -v rsync\r\n+ '[' -x /usr/bin/rsync ']'\r\n+ SYNC_COMMAND='rsync -lptgoD'\r\n+ USE_CUDA=0\r\n+ USE_ROCM=0\r\n+ USE_NNPACK=0\r\n+ USE_MKLDNN=0\r\n+ USE_GLOO_IBVERBS=0\r\n+ CAFFE2_STATIC_LINK_CUDA=0\r\n+ RERUN_CMAKE=1\r\n+ [[ 8 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_CUDA=1\r\n+ shift\r\n+ [[ 7 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_NNPACK=1\r\n+ shift\r\n+ [[ 6 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ break\r\n+ CMAKE_INSTALL='make install'\r\n+ BUILD_SHARED_LIBS=ON\r\n+ USER_CFLAGS=\r\n+ USER_LDFLAGS=\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n++ uname\r\n+ '[' Linux == Darwin ']'\r\n+++ dirname ../tools/build_pytorch_libs.sh\r\n++ cd ../tools/..\r\n+++ pwd\r\n++ printf '%q\\n' /home/bapvn/work/caffe2-pytorch\r\n+ BASE_DIR=/home/bapvn/work/caffe2-pytorch\r\n+ TORCH_LIB_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib\r\n+ INSTALL_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install\r\n+ THIRD_PARTY_DIR=/home/bapvn/work/caffe2-pytorch/third_party\r\n+ CMAKE_VERSION=cmake\r\n+ C_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\"'\r\n+ C_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ LDFLAGS='-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\" '\r\n+ LD_POSTFIX=.so\r\n++ uname\r\n+ [[ Linux == \\D\\a\\r\\w\\i\\n ]]\r\n+ [[ 0 -eq 1 ]]\r\n+ LDFLAGS='-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\r\n+ CPP_FLAGS=' -std=c++11 '\r\n+ GLOO_FLAGS='-DBUILD_TEST=OFF '\r\n+ THD_FLAGS=\r\n+ NCCL_ROOT_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install\r\n+ [[ 1 -eq 1 ]]\r\n+ GLOO_FLAGS+='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install'\r\n+ [[ 0 -eq 1 ]]\r\n+ CWRAP_FILES='/home/bapvn/work/caffe2-pytorch/torch/lib/ATen/Declarations.cwrap;/home/bapvn/work/caffe2-pytorch/torch/lib/THNN/generic/THNN.h;/home/bapvn/work/caffe2-pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/bapvn/work/caffe2-pytorch/torch/lib/ATen/nn.yaml'\r\n+ CUDA_NVCC_FLAGS=' -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ [[ -z '' ]]\r\n+ CUDA_DEVICE_DEBUG=0\r\n+ '[' -z '' ']'\r\n++ getconf _NPROCESSORS_ONLN\r\n+ MAX_JOBS=6\r\n+ BUILD_TYPE=Release\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ echo 'Building in Release mode'\r\nBuilding in Release mode\r\n+ mkdir -p /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install\r\n+ for arg in '\"$@\"'\r\n+ [[ nccl == \\n\\c\\c\\l ]]\r\n+ pushd /home/bapvn/work/caffe2-pytorch/third_party\r\n~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build\r\n+ build_nccl\r\n+ mkdir -p build/nccl\r\n+ pushd build/nccl\r\n~/work/caffe2-pytorch/third_party/build/nccl ~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build\r\n+ [[ 1 -eq 1 ]]\r\n+ cmake ../../nccl -DCMAKE_MODULE_PATH=/home/bapvn/work/caffe2-pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/bapvn/work/caffe2-pytorch/cmake/public/utils.cmake -DNUM_JOBS=6\r\n-- Autodetected CUDA architecture(s): 6.1\r\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_61,code=sm_61\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /home/bapvn/work/caffe2-pytorch/third_party/build/nccl\r\n+ make install -j6\r\n[100%] Built target nccl\r\nInstall the project...\r\n-- Install configuration: \"Release\"\r\n-- Up-to-date: /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/include/nccl.h\r\n+ mkdir -p /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\r\n+ find lib -name 'libnccl.so*'\r\n+ xargs -I '{}' rsync -lptgoD '{}' /home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib/\r\n+ popd\r\n~/work/caffe2-pytorch/third_party ~/work/caffe2-pytorch/build\r\n+ '[' -f ./nccl/nccl/src/nccl.h ']'\r\n+ popd\r\n~/work/caffe2-pytorch/build\r\n+ for arg in '\"$@\"'\r\n+ [[ caffe2 == \\n\\c\\c\\l ]]\r\n+ [[ caffe2 == \\g\\l\\o\\o ]]\r\n+ [[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]\r\n+ build_caffe2\r\n+ [[ -z '' ]]\r\n+ EXTRA_CAFFE2_CMAKE_FLAGS=()\r\n+ [[ -n '' ]]\r\n+ [[ -n /home/bapvn/anaconda3/lib/python3.6/site-packages ]]\r\n+ EXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")\r\n+ [[ 1 -eq 1 ]]\r\n+ cmake /home/bapvn/work/caffe2-pytorch -DPYTHON_EXECUTABLE=/home/bapvn/anaconda3/bin/python -DPYTHON_LIBRARY=/home/bapvn/anaconda3/lib/libpython3.6m.so.1.0 -DPYTHON_INCLUDE_DIR=/home/bapvn/anaconda3/include/python3.6m -DBUILDING_WITH_TORCH_LIBS=ON -DTORCH_BUILD_VERSION=1.0.0a0+6dd7194 -DCMAKE_BUILD_TYPE=Release -DBUILD_TORCH=ON -DBUILD_PYTHON=ON -DBUILD_SHARED_LIBS=ON -DBUILD_BINARY=OFF -DBUILD_TEST=ON -DINSTALL_TEST=ON -DBUILD_CAFFE2_OPS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=1 -DUSE_NUMPY= -DCAFFE2_STATIC_LINK_CUDA=0 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DUSE_LEVELDB=OFF -DUSE_LMDB=OFF -DUSE_OPENCV=OFF -DUSE_FFMPEG=OFF -DUSE_GLOG=OFF -DUSE_GFLAGS=OFF -DUSE_SYSTEM_EIGEN_INSTALL=OFF -DCUDNN_INCLUDE_DIR=/usr/include/ -DCUDNN_LIB_DIR=/usr/lib/x86_64-linux-gnu/ -DCUDNN_LIBRARY=/usr/lib/x86_64-linux-gnu/libcudnn.so.7 -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/home/bapvn/work/caffe2-pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN ' -DCMAKE_PREFIX_PATH=/home/bapvn/anaconda3/lib/python3.6/site-packages\r\n-- std::exception_ptr is supported.\r\n-- NUMA is available\r\n-- Current compiler supports avx2 extention. Will build perfkernels.\r\n-- Building using own protobuf under third_party per request.\r\n-- Use custom protobuf build.\r\n-- Caffe2 protobuf include directory: $<BUILD_INTERFACE:/home/bapvn/work/caffe2-pytorch/third_party/protobuf/src>$<INSTALL_INTERFACE:include>\r\n-- The BLAS backend of choice:MKL\r\n-- Checking for [mkl_intel_lp64 - mkl_gnu_thread - mkl_core - gomp - pthread - m - dl]\r\n--   Library mkl_intel_lp64: /home/bapvn/anaconda3/lib/libmkl_intel_lp64.so\r\n--   Library mkl_gnu_thread: /home/bapvn/anaconda3/lib/libmkl_gnu_thread.so\r\n--   Library mkl_core: /home/bapvn/anaconda3/lib/libmkl_core.so\r\n--   Library gomp: -fopenmp\r\n--   Library pthread: /usr/lib/x86_64-linux-gnu/libpthread.so\r\n--   Library m: /usr/lib/x86_64-linux-gnu/libm.so\r\n--   Library dl: /usr/lib/x86_64-linux-gnu/libdl.so\r\n-- Checking for [mkl_intel_lp64 - mkl_gnu_thread - mkl_core - gomp - pthread - m - dl]\r\n--   Library mkl_intel_lp64: /home/bapvn/anaconda3/lib/libmkl_intel_lp64.so\r\n--   Library mkl_gnu_thread: /home/bapvn/anaconda3/lib/libmkl_gnu_thread.so\r\n--   Library mkl_core: /home/bapvn/anaconda3/lib/libmkl_core.so\r\n--   Library gomp: -fopenmp\r\n--   Library pthread: /usr/lib/x86_64-linux-gnu/libpthread.so\r\n--   Library m: /usr/lib/x86_64-linux-gnu/libm.so\r\n--   Library dl: /usr/lib/x86_64-linux-gnu/libdl.so\r\nCMake Warning at cmake/Dependencies.cmake:76 (message):\r\n  MKL could not be found.  Defaulting to Eigen\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:202 (include)\r\n\r\n\r\n-- Brace yourself, we are building NNPACK\r\n-- Failed to find LLVM FileCheck\r\n-- git Version: v1.4.0-505be96a\r\n-- Version: 1.4.0\r\n-- Performing Test HAVE_STD_REGEX -- success\r\n-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile\r\n-- Performing Test HAVE_POSIX_REGEX -- success\r\n-- Performing Test HAVE_STEADY_CLOCK -- success\r\n-- Found Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)\r\n-- Using third party subdirectory Eigen.\r\nPython 3.6.3 :: Anaconda custom (64-bit)\r\n-- Found PythonInterp: /home/bapvn/anaconda3/bin/python (found suitable version \"3.6.3\", minimum required is \"2.7\") \r\n-- NumPy ver. 1.13.3 found (include: /home/bapvn/anaconda3/lib/python3.6/site-packages/numpy/core/include)\r\n-- Found PythonInterp: /home/bapvn/anaconda3/bin/python (found version \"3.6.3\") \r\n-- System pybind11 found\r\n-- pybind11l include dirs: /home/bapvn/anaconda3/include/python3.6m/home/bapvn/anaconda3/include/python3.6m\r\n-- MPI support found\r\n-- MPI compile flags: \r\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi\r\n-- MPI LINK flags path:  -Wl,-rpath  -Wl,/usr/lib/openmpi/lib  -Wl,--enable-new-dtags\r\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so\r\nCMake Warning at cmake/Dependencies.cmake:455 (message):\r\n  OpenMPI found, but it is not built with CUDA support.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:202 (include)\r\n\r\n\r\n-- Caffe2: CUDA detected: 9.0\r\n-- Caffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc\r\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda\r\n-- Caffe2: Header version is: 9.0\r\n-- Found cuDNN: v7.3.1  (include: /usr/include/, library: /usr/lib/x86_64-linux-gnu/libcudnn.so.7)\r\nCMake Error at cmake/public/cuda.cmake:313 (message):\r\n  CUDA 9.0 is not compatible with std::tuple from GCC version >= 6.  Please\r\n  upgrade to CUDA 9.2 or use the following option to use another version (for\r\n  example):\r\n\r\n    -DCUDA_HOST_COMPILER=/usr/bin/gcc-5\r\n\r\nCall Stack (most recent call first):\r\n  cmake/Dependencies.cmake:492 (include)\r\n  CMakeLists.txt:202 (include)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"/home/bapvn/work/caffe2-pytorch/build/CMakeFiles/CMakeOutput.log\".\r\nSee also \"/home/bapvn/work/caffe2-pytorch/build/CMakeFiles/CMakeError.log\".\r\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 libshm gloo c10d THD'\r\n"}
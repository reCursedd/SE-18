{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/182159661", "pull_request_review_id": 112911085, "id": 182159661, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MjE1OTY2MQ==", "diff_hunk": "@@ -131,7 +136,33 @@\n \"\"\")\n \n RECORD_ATTRIBUTE = CodeTemplate(\"\"\"\\\n-        setattr(trace_info.n, jit::attr::${name}, ${name});\"\"\")\n+setattr(trace_info.n, jit::attr::${name}, ${name});\"\"\")\n+\n+RECORD_POSITIONAL_ATTRIBUTE = CodeTemplate(\"\"\"\\\n+setposattr(trace_info.n, ${i}, \"${name}\", ${name});\"\"\")\n+\n+POSITIONAL_ATTR_NYI = \"\"\"\\\n+throw std::runtime_error(\"Can't have size-dependent arguments to functions that \"\n+                         \"take variable number of tensor arguments\");\n+\"\"\"\n+\n+\n+def should_trace(declaration):\n+    # Operations involving Generator, Storage, Type are not traceable\n+    # at the moment\n+    if any(arg['simple_type'] in {'Generator', 'Storage', 'ScalarType', 'Type'} for arg in declaration['arguments']):", "path": "tools/autograd/gen_variable_type.py", "position": null, "original_position": 33, "commit_id": "f28741691dae2b1b5540bc1b50d1b97ad4279cf8", "original_commit_id": "28a2f65c8728b3cd777477227f3c9d6b66eee018", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "ONNX export goes through JIT tracing, so it's both. This only relaxes the existing constraints, and isolates them in this single function, because it's not needed at multiple stages of codegen.", "created_at": "2018-04-17T17:15:23Z", "updated_at": "2018-11-23T15:42:36Z", "html_url": "https://github.com/pytorch/pytorch/pull/6554#discussion_r182159661", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/6554", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/182159661"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/6554#discussion_r182159661"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6554"}}, "body_html": "<p>ONNX export goes through JIT tracing, so it's both. This only relaxes the existing constraints, and isolates them in this single function, because it's not needed at multiple stages of codegen.</p>", "body_text": "ONNX export goes through JIT tracing, so it's both. This only relaxes the existing constraints, and isolates them in this single function, because it's not needed at multiple stages of codegen.", "in_reply_to_id": 181845493}
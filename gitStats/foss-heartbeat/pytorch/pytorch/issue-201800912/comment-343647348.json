{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/343647348", "html_url": "https://github.com/pytorch/pytorch/issues/494#issuecomment-343647348", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/494", "id": 343647348, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzY0NzM0OA==", "user": {"login": "aluo-x", "id": 15619682, "node_id": "MDQ6VXNlcjE1NjE5Njgy", "avatar_url": "https://avatars1.githubusercontent.com/u/15619682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aluo-x", "html_url": "https://github.com/aluo-x", "followers_url": "https://api.github.com/users/aluo-x/followers", "following_url": "https://api.github.com/users/aluo-x/following{/other_user}", "gists_url": "https://api.github.com/users/aluo-x/gists{/gist_id}", "starred_url": "https://api.github.com/users/aluo-x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aluo-x/subscriptions", "organizations_url": "https://api.github.com/users/aluo-x/orgs", "repos_url": "https://api.github.com/users/aluo-x/repos", "events_url": "https://api.github.com/users/aluo-x/events{/privacy}", "received_events_url": "https://api.github.com/users/aluo-x/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-11T07:42:26Z", "updated_at": "2017-11-11T07:51:55Z", "author_association": "NONE", "body_html": "<p>Thanks a ton <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9998726\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/peterjc123\">@peterjc123</a> for your incredible patience and the extremely simple and clear build instructions!</p>\n<p>After installing MKL (64 bit only), I collected the files in your list into a folder and appended them to the LIB variable. The CPU build took less than 10 minutes, and I am seeing very significant performance improvements.</p>\n<p>Here are my notes based on your earlier instructions:</p>\n<pre><code>* CPU build only!\n\n* Download and install \"Build Tools for Visual Studio 2017\" from visualstudio.com/downloads/, using default options\n* Download and install cmake from cmake.org (Tested using 3.9.5)\n* Download and install git from git-scm.com (Tested using 2.15.0)\n* Download and install Anaconda from anaconda.com/download (Tested using Py 3.6.3, ver 5.0.1)\n* Download and install Intel MKL from software.intel.com/en-us/mkl (only 64 bit needed)\n\nCopy the files in this list from C:\\Program Files (x86)\\IntelSWTools into a folder, \n===\nlibiomp5md.lib        mkl_intel_ilp64_dll.lib   mkl_rt.lib\nlibiompstubs5md.lib   mkl_intel_lp64.lib        mkl_sequential.lib\nmkl_blas95_ilp64.lib  mkl_intel_lp64_dll.lib    mkl_sequential_dll.lib\nmkl_blas95_lp64.lib   mkl_intel_thread.lib      mkl_tbb_thread.lib\nmkl_core.lib          mkl_intel_thread_dll.lib  mkl_tbb_thread_dll.lib\nmkl_core_dll.lib      mkl_lapack95_ilp64.lib    tbb.lib\nmkl_intel_ilp64.lib   mkl_lapack95_lp64.lib     tbbmalloc.lib\n===\nNote that tbb.lib and tbbmalloc.lib are in a different folder from the rest\nKeep track of the path of this folder, we'll use this later\n\n\n1. Make a folder to download pytorch to, launch \"x64 Native Tools Command Prompt for VS 2017\"\nfrom the start menu, and cd to the new folder\n2. git clone --recursive https://github.com/pytorch/pytorch\n3. cd pytorch\n4. xcopy /Y aten\\src\\ATen\\common_with_cwrap.py tools\\shared\\cwrap_common.py\n5. set NO_CUDA=1\n6. set CMAKE_GENERATOR=Visual Studio 15 2017 Win64\n7. set LIB=PATH_TO_MKL_LIBS;%LIB%\n8. python setup.py bdist_wheel\n9. The compiled wheel will be in YOUR_FOLDER_FROM_PART_1\\pytorch\\dist\n</code></pre>", "body_text": "Thanks a ton @peterjc123 for your incredible patience and the extremely simple and clear build instructions!\nAfter installing MKL (64 bit only), I collected the files in your list into a folder and appended them to the LIB variable. The CPU build took less than 10 minutes, and I am seeing very significant performance improvements.\nHere are my notes based on your earlier instructions:\n* CPU build only!\n\n* Download and install \"Build Tools for Visual Studio 2017\" from visualstudio.com/downloads/, using default options\n* Download and install cmake from cmake.org (Tested using 3.9.5)\n* Download and install git from git-scm.com (Tested using 2.15.0)\n* Download and install Anaconda from anaconda.com/download (Tested using Py 3.6.3, ver 5.0.1)\n* Download and install Intel MKL from software.intel.com/en-us/mkl (only 64 bit needed)\n\nCopy the files in this list from C:\\Program Files (x86)\\IntelSWTools into a folder, \n===\nlibiomp5md.lib        mkl_intel_ilp64_dll.lib   mkl_rt.lib\nlibiompstubs5md.lib   mkl_intel_lp64.lib        mkl_sequential.lib\nmkl_blas95_ilp64.lib  mkl_intel_lp64_dll.lib    mkl_sequential_dll.lib\nmkl_blas95_lp64.lib   mkl_intel_thread.lib      mkl_tbb_thread.lib\nmkl_core.lib          mkl_intel_thread_dll.lib  mkl_tbb_thread_dll.lib\nmkl_core_dll.lib      mkl_lapack95_ilp64.lib    tbb.lib\nmkl_intel_ilp64.lib   mkl_lapack95_lp64.lib     tbbmalloc.lib\n===\nNote that tbb.lib and tbbmalloc.lib are in a different folder from the rest\nKeep track of the path of this folder, we'll use this later\n\n\n1. Make a folder to download pytorch to, launch \"x64 Native Tools Command Prompt for VS 2017\"\nfrom the start menu, and cd to the new folder\n2. git clone --recursive https://github.com/pytorch/pytorch\n3. cd pytorch\n4. xcopy /Y aten\\src\\ATen\\common_with_cwrap.py tools\\shared\\cwrap_common.py\n5. set NO_CUDA=1\n6. set CMAKE_GENERATOR=Visual Studio 15 2017 Win64\n7. set LIB=PATH_TO_MKL_LIBS;%LIB%\n8. python setup.py bdist_wheel\n9. The compiled wheel will be in YOUR_FOLDER_FROM_PART_1\\pytorch\\dist", "body": "Thanks a ton @peterjc123 for your incredible patience and the extremely simple and clear build instructions! \r\n\r\nAfter installing MKL (64 bit only), I collected the files in your list into a folder and appended them to the LIB variable. The CPU build took less than 10 minutes, and I am seeing very significant performance improvements. \r\n\r\nHere are my notes based on your earlier instructions:\r\n```\r\n* CPU build only!\r\n\r\n* Download and install \"Build Tools for Visual Studio 2017\" from visualstudio.com/downloads/, using default options\r\n* Download and install cmake from cmake.org (Tested using 3.9.5)\r\n* Download and install git from git-scm.com (Tested using 2.15.0)\r\n* Download and install Anaconda from anaconda.com/download (Tested using Py 3.6.3, ver 5.0.1)\r\n* Download and install Intel MKL from software.intel.com/en-us/mkl (only 64 bit needed)\r\n\r\nCopy the files in this list from C:\\Program Files (x86)\\IntelSWTools into a folder, \r\n===\r\nlibiomp5md.lib        mkl_intel_ilp64_dll.lib   mkl_rt.lib\r\nlibiompstubs5md.lib   mkl_intel_lp64.lib        mkl_sequential.lib\r\nmkl_blas95_ilp64.lib  mkl_intel_lp64_dll.lib    mkl_sequential_dll.lib\r\nmkl_blas95_lp64.lib   mkl_intel_thread.lib      mkl_tbb_thread.lib\r\nmkl_core.lib          mkl_intel_thread_dll.lib  mkl_tbb_thread_dll.lib\r\nmkl_core_dll.lib      mkl_lapack95_ilp64.lib    tbb.lib\r\nmkl_intel_ilp64.lib   mkl_lapack95_lp64.lib     tbbmalloc.lib\r\n===\r\nNote that tbb.lib and tbbmalloc.lib are in a different folder from the rest\r\nKeep track of the path of this folder, we'll use this later\r\n\r\n\r\n1. Make a folder to download pytorch to, launch \"x64 Native Tools Command Prompt for VS 2017\"\r\nfrom the start menu, and cd to the new folder\r\n2. git clone --recursive https://github.com/pytorch/pytorch\r\n3. cd pytorch\r\n4. xcopy /Y aten\\src\\ATen\\common_with_cwrap.py tools\\shared\\cwrap_common.py\r\n5. set NO_CUDA=1\r\n6. set CMAKE_GENERATOR=Visual Studio 15 2017 Win64\r\n7. set LIB=PATH_TO_MKL_LIBS;%LIB%\r\n8. python setup.py bdist_wheel\r\n9. The compiled wheel will be in YOUR_FOLDER_FROM_PART_1\\pytorch\\dist\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/345514974", "html_url": "https://github.com/pytorch/pytorch/issues/494#issuecomment-345514974", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/494", "id": 345514974, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTUxNDk3NA==", "user": {"login": "trias702", "id": 25867060, "node_id": "MDQ6VXNlcjI1ODY3MDYw", "avatar_url": "https://avatars3.githubusercontent.com/u/25867060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trias702", "html_url": "https://github.com/trias702", "followers_url": "https://api.github.com/users/trias702/followers", "following_url": "https://api.github.com/users/trias702/following{/other_user}", "gists_url": "https://api.github.com/users/trias702/gists{/gist_id}", "starred_url": "https://api.github.com/users/trias702/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trias702/subscriptions", "organizations_url": "https://api.github.com/users/trias702/orgs", "repos_url": "https://api.github.com/users/trias702/repos", "events_url": "https://api.github.com/users/trias702/events{/privacy}", "received_events_url": "https://api.github.com/users/trias702/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-19T13:00:23Z", "updated_at": "2017-11-19T13:00:23Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9998726\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/peterjc123\">@peterjc123</a> Hmm, something strange happening. So the earlier, successful CUDA 8.0 build I did was with a master branch which I downloaded several days ago and was stale. I decided to duplicate all of your instructions using a fresh git cloned master branch just now, and then followed all instructions, only now it breaks again.</p>\n<p>Specifically, it breaks trying to do this:</p>\n<pre><code>c:\\Unix\\compile\\pytorch\\pytorch\\torch/csrc/utils/hash.h(52): note: or       'size_t torch::_hash_detail::dispatch_hash&lt;T&gt;(const T &amp;)'\n        with\n        [\n            T=torch::jit::python::IODescriptor::VariableMetadata\n        ]\nc:\\Unix\\compile\\pytorch\\pytorch\\torch/csrc/utils/hash.h(75): note: while trying to match the argument list '(const torch::jit::python::IODescriptor::VariableMetadata)'\n</code></pre>\n<p>And the DistUtils error is:</p>\n<pre><code>distutils.errors.DistutilsExecError: command ['\"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\bin\\\\HostX64\\\\x64\\\\cl.exe\"',\n'/c', '/nologo', '/Ox', '/W3', '/GL', '/DNDEBUG', '/MT', \n'\"-IC:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\\\\include\"', \n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\csrc',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/pybind11/include',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/TH',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/THNN',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/ATen',\n'-IC:\\\\Unix\\\\Anaconda3\\\\lib\\\\site-packages\\\\numpy\\\\core\\\\include',\n'\"-IC:/Program Files/NVIDIA Corporation/NvToolsExt/include\"',\n'\"-IC:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\\\\include\"',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/THCUNN',\n'-IC:\\\\Unix\\\\Anaconda3\\\\include',\n'-IC:\\\\Unix\\\\Anaconda3\\\\include',\n'\"-IC:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\ATLMFC\\\\include\"',\n'\"-IC:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\include\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\NETFXSDK\\\\4.6.1\\\\include\\\\um\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\ucrt\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\shared\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\um\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\winrt\"',\n'/EHsc',\n'/Tptorch/csrc/jit/init.cpp',\n'/Fobuild\\\\temp.win-amd64-3.5\\\\Release\\\\torch/csrc\n/jit/init.obj', '-D_THP_CORE', '/Z7',\n'/EHa', '/DNOMINMAX', '-DWITH_NUMPY', '-DWITH_CUDA', '-DAT_CUDA_ENABLED',\n'\"-DCUDA_LIB_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0/lib/x64/\"', '-DWITH_CUDNN'] failed with exit status 2\n</code></pre>\n<p>Looks like someone recently checked in a new version of pytorch\\torch\\csrc\\jit\\init.cpp where they changed the void initJITBindings(PyObject *module) function, and it looks like I can no longer build on Windows using your instructions and CUDA 8.0. Can you please try on your end and see if you get the same error?</p>", "body_text": "@peterjc123 Hmm, something strange happening. So the earlier, successful CUDA 8.0 build I did was with a master branch which I downloaded several days ago and was stale. I decided to duplicate all of your instructions using a fresh git cloned master branch just now, and then followed all instructions, only now it breaks again.\nSpecifically, it breaks trying to do this:\nc:\\Unix\\compile\\pytorch\\pytorch\\torch/csrc/utils/hash.h(52): note: or       'size_t torch::_hash_detail::dispatch_hash<T>(const T &)'\n        with\n        [\n            T=torch::jit::python::IODescriptor::VariableMetadata\n        ]\nc:\\Unix\\compile\\pytorch\\pytorch\\torch/csrc/utils/hash.h(75): note: while trying to match the argument list '(const torch::jit::python::IODescriptor::VariableMetadata)'\n\nAnd the DistUtils error is:\ndistutils.errors.DistutilsExecError: command ['\"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\bin\\\\HostX64\\\\x64\\\\cl.exe\"',\n'/c', '/nologo', '/Ox', '/W3', '/GL', '/DNDEBUG', '/MT', \n'\"-IC:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\\\\include\"', \n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\csrc',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/pybind11/include',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/TH',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/THNN',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/ATen',\n'-IC:\\\\Unix\\\\Anaconda3\\\\lib\\\\site-packages\\\\numpy\\\\core\\\\include',\n'\"-IC:/Program Files/NVIDIA Corporation/NvToolsExt/include\"',\n'\"-IC:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\\\\include\"',\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/THCUNN',\n'-IC:\\\\Unix\\\\Anaconda3\\\\include',\n'-IC:\\\\Unix\\\\Anaconda3\\\\include',\n'\"-IC:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\ATLMFC\\\\include\"',\n'\"-IC:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\include\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\NETFXSDK\\\\4.6.1\\\\include\\\\um\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\ucrt\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\shared\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\um\"',\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\winrt\"',\n'/EHsc',\n'/Tptorch/csrc/jit/init.cpp',\n'/Fobuild\\\\temp.win-amd64-3.5\\\\Release\\\\torch/csrc\n/jit/init.obj', '-D_THP_CORE', '/Z7',\n'/EHa', '/DNOMINMAX', '-DWITH_NUMPY', '-DWITH_CUDA', '-DAT_CUDA_ENABLED',\n'\"-DCUDA_LIB_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0/lib/x64/\"', '-DWITH_CUDNN'] failed with exit status 2\n\nLooks like someone recently checked in a new version of pytorch\\torch\\csrc\\jit\\init.cpp where they changed the void initJITBindings(PyObject *module) function, and it looks like I can no longer build on Windows using your instructions and CUDA 8.0. Can you please try on your end and see if you get the same error?", "body": "@peterjc123 Hmm, something strange happening. So the earlier, successful CUDA 8.0 build I did was with a master branch which I downloaded several days ago and was stale. I decided to duplicate all of your instructions using a fresh git cloned master branch just now, and then followed all instructions, only now it breaks again.\r\n\r\nSpecifically, it breaks trying to do this:\r\n\r\n```\r\nc:\\Unix\\compile\\pytorch\\pytorch\\torch/csrc/utils/hash.h(52): note: or       'size_t torch::_hash_detail::dispatch_hash<T>(const T &)'\r\n        with\r\n        [\r\n            T=torch::jit::python::IODescriptor::VariableMetadata\r\n        ]\r\nc:\\Unix\\compile\\pytorch\\pytorch\\torch/csrc/utils/hash.h(75): note: while trying to match the argument list '(const torch::jit::python::IODescriptor::VariableMetadata)'\r\n```\r\n\r\nAnd the DistUtils error is:\r\n\r\n```\r\ndistutils.errors.DistutilsExecError: command ['\"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\bin\\\\HostX64\\\\x64\\\\cl.exe\"',\r\n'/c', '/nologo', '/Ox', '/W3', '/GL', '/DNDEBUG', '/MT', \r\n'\"-IC:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\\\\include\"', \r\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch',\r\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\csrc',\r\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/pybind11/include',\r\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include',\r\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/TH',\r\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/THNN',\r\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/ATen',\r\n'-IC:\\\\Unix\\\\Anaconda3\\\\lib\\\\site-packages\\\\numpy\\\\core\\\\include',\r\n'\"-IC:/Program Files/NVIDIA Corporation/NvToolsExt/include\"',\r\n'\"-IC:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0\\\\include\"',\r\n'-Ic:\\\\Unix\\\\compile\\\\pytorch\\\\pytorch\\\\torch\\\\lib/tmp_install/include/THCUNN',\r\n'-IC:\\\\Unix\\\\Anaconda3\\\\include',\r\n'-IC:\\\\Unix\\\\Anaconda3\\\\include',\r\n'\"-IC:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\ATLMFC\\\\include\"',\r\n'\"-IC:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Professional\\\\VC\\\\Tools\\\\MSVC\\\\14.10.25017\\\\include\"',\r\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\NETFXSDK\\\\4.6.1\\\\include\\\\um\"',\r\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\ucrt\"',\r\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\shared\"',\r\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\um\"',\r\n'\"-IC:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.15063.0\\\\winrt\"',\r\n'/EHsc',\r\n'/Tptorch/csrc/jit/init.cpp',\r\n'/Fobuild\\\\temp.win-amd64-3.5\\\\Release\\\\torch/csrc\r\n/jit/init.obj', '-D_THP_CORE', '/Z7',\r\n'/EHa', '/DNOMINMAX', '-DWITH_NUMPY', '-DWITH_CUDA', '-DAT_CUDA_ENABLED',\r\n'\"-DCUDA_LIB_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0/lib/x64/\"', '-DWITH_CUDNN'] failed with exit status 2\r\n```\r\n\r\nLooks like someone recently checked in a new version of pytorch\\torch\\csrc\\jit\\init.cpp where they changed the void initJITBindings(PyObject *module) function, and it looks like I can no longer build on Windows using your instructions and CUDA 8.0. Can you please try on your end and see if you get the same error?"}
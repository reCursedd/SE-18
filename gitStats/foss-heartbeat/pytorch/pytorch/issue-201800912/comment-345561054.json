{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/345561054", "html_url": "https://github.com/pytorch/pytorch/issues/494#issuecomment-345561054", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/494", "id": 345561054, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTU2MTA1NA==", "user": {"login": "peterjc123", "id": 9998726, "node_id": "MDQ6VXNlcjk5OTg3MjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/9998726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peterjc123", "html_url": "https://github.com/peterjc123", "followers_url": "https://api.github.com/users/peterjc123/followers", "following_url": "https://api.github.com/users/peterjc123/following{/other_user}", "gists_url": "https://api.github.com/users/peterjc123/gists{/gist_id}", "starred_url": "https://api.github.com/users/peterjc123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peterjc123/subscriptions", "organizations_url": "https://api.github.com/users/peterjc123/orgs", "repos_url": "https://api.github.com/users/peterjc123/repos", "events_url": "https://api.github.com/users/peterjc123/events{/privacy}", "received_events_url": "https://api.github.com/users/peterjc123/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-19T23:54:10Z", "updated_at": "2017-11-19T23:54:10Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6232547\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ankur6ue\">@ankur6ue</a> You have to modify the<code> _build_extension</code> function in <code>torch\\utils\\ffi\\__init__.py</code>.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">_build_extension</span>(<span class=\"pl-smi\">ffi</span>, <span class=\"pl-smi\">cffi_wrapper_name</span>, <span class=\"pl-smi\">target_dir</span>, <span class=\"pl-smi\">verbose</span>):\n    <span class=\"pl-k\">try</span>:\n        tmpdir <span class=\"pl-k\">=</span> tempfile.mkdtemp()\n        libname <span class=\"pl-k\">=</span> cffi_wrapper_name <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>.pyd<span class=\"pl-pds\">'</span></span>\n        ffi.compile(<span class=\"pl-v\">tmpdir</span><span class=\"pl-k\">=</span>tmpdir, <span class=\"pl-v\">verbose</span><span class=\"pl-k\">=</span>verbose, <span class=\"pl-v\">target</span><span class=\"pl-k\">=</span>libname)\n        shutil.copy(os.path.join(tmpdir, libname),\n                    os.path.join(target_dir, libname))\n    <span class=\"pl-k\">finally</span>:\n        shutil.rmtree(tmpdir)</pre></div>", "body_text": "@ankur6ue You have to modify the _build_extension function in torch\\utils\\ffi\\__init__.py.\ndef _build_extension(ffi, cffi_wrapper_name, target_dir, verbose):\n    try:\n        tmpdir = tempfile.mkdtemp()\n        libname = cffi_wrapper_name + '.pyd'\n        ffi.compile(tmpdir=tmpdir, verbose=verbose, target=libname)\n        shutil.copy(os.path.join(tmpdir, libname),\n                    os.path.join(target_dir, libname))\n    finally:\n        shutil.rmtree(tmpdir)", "body": "@ankur6ue You have to modify the` _build_extension` function in `torch\\utils\\ffi\\__init__.py`.\r\n```Python\r\ndef _build_extension(ffi, cffi_wrapper_name, target_dir, verbose):\r\n    try:\r\n        tmpdir = tempfile.mkdtemp()\r\n        libname = cffi_wrapper_name + '.pyd'\r\n        ffi.compile(tmpdir=tmpdir, verbose=verbose, target=libname)\r\n        shutil.copy(os.path.join(tmpdir, libname),\r\n                    os.path.join(target_dir, libname))\r\n    finally:\r\n        shutil.rmtree(tmpdir)\r\n```"}
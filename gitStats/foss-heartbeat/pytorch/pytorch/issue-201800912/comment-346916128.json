{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/346916128", "html_url": "https://github.com/pytorch/pytorch/issues/494#issuecomment-346916128", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/494", "id": 346916128, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjkxNjEyOA==", "user": {"login": "LowBoonKeong", "id": 30174905, "node_id": "MDQ6VXNlcjMwMTc0OTA1", "avatar_url": "https://avatars2.githubusercontent.com/u/30174905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LowBoonKeong", "html_url": "https://github.com/LowBoonKeong", "followers_url": "https://api.github.com/users/LowBoonKeong/followers", "following_url": "https://api.github.com/users/LowBoonKeong/following{/other_user}", "gists_url": "https://api.github.com/users/LowBoonKeong/gists{/gist_id}", "starred_url": "https://api.github.com/users/LowBoonKeong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LowBoonKeong/subscriptions", "organizations_url": "https://api.github.com/users/LowBoonKeong/orgs", "repos_url": "https://api.github.com/users/LowBoonKeong/repos", "events_url": "https://api.github.com/users/LowBoonKeong/events{/privacy}", "received_events_url": "https://api.github.com/users/LowBoonKeong/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-25T03:31:58Z", "updated_at": "2017-11-25T03:33:07Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9998726\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/peterjc123\">@peterjc123</a>  <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6232547\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ankur6ue\">@ankur6ue</a> , I get the following error when running c-extension-example.zip.</p>\n<p>C:\\Users\\hp\\Desktop\\c-extension-example&gt;python build.py<br>\ngenerating C:\\Users\\hp\\AppData\\Local\\Temp\\tmpk7_slf6s_my_lib.c<br>\nrunning build_ext<br>\nbuilding '<em>my_lib' extension<br>\nTraceback (most recent call last):<br>\nFile \"build.py\", line 43, in <br>\nffi.build()<br>\nFile \"C:\\Anaconda3\\lib\\site-packages\\torch\\utils\\ffi_<em>init</em></em>.py\", line 167, in build<br>\n<em>build_extension(ffi, cffi_wrapper_name, target_dir, verbose)<br>\nFile \"C:\\Anaconda3\\lib\\site-packages\\torch\\utils\\ffi_<em>init</em></em>.py\", line 103, in _build_extension<br>\nffi.compile(tmpdir=tmpdir, verbose=verbose, target=libname)<br>\nFile \"C:\\Anaconda3\\lib\\site-packages\\cffi\\api.py\", line 684, in compile<br>\ncompiler_verbose=verbose, debug=debug, **kwds)<br>\nFile \"C:\\Anaconda3\\lib\\site-packages\\cffi\\recompiler.py\", line 1484, in recompile<br>\ncompiler_verbose, debug)<br>\nFile \"C:\\Anaconda3\\lib\\site-packages\\cffi\\ffiplatform.py\", line 20, in compile<br>\noutputfilename = _build(tmpdir, ext, compiler_verbose, debug)<br>\nFile \"C:\\Anaconda3\\lib\\site-packages\\cffi\\ffiplatform.py\", line 49, in _build<br>\ndist.run_command('build_ext')<br>\nFile \"C:\\Anaconda3\\lib\\distutils\\dist.py\", line 974, in run_command<br>\ncmd_obj.run()<br>\nFile \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 339, in run<br>\nself.build_extensions()<br>\nFile \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 448, in build_extensions<br>\nself._build_extensions_serial()<br>\nFile \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 473, in _build_extensions_serial<br>\nself.build_extension(ext)<br>\nFile \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 533, in build_extension<br>\ndepends=ext.depends)<br>\nFile \"C:\\Anaconda3\\lib\\distutils_msvccompiler.py\", line 304, in compile<br>\nself.initialize()<br>\nFile \"C:\\Anaconda3\\lib\\distutils_msvccompiler.py\", line 197, in initialize<br>\nvc_env = _get_vc_env(plat_spec)<br>\nFile \"C:\\Anaconda3\\lib\\distutils_msvccompiler.py\", line 85, in _get_vc_env<br>\nraise DistutilsPlatformError(\"Unable to find vcvarsall.bat\")<br>\ndistutils.errors.DistutilsPlatformError: Unable to find vcvarsall.bat</p>\n<p>I have changed the _build_extension to .pyd. For your info, I compile the pytorch branch windows_full with VS2017 15.4.4, python 3.6.2. Hope can get some solution. Thank you</p>", "body_text": "Hi @peterjc123  @ankur6ue , I get the following error when running c-extension-example.zip.\nC:\\Users\\hp\\Desktop\\c-extension-example>python build.py\ngenerating C:\\Users\\hp\\AppData\\Local\\Temp\\tmpk7_slf6s_my_lib.c\nrunning build_ext\nbuilding 'my_lib' extension\nTraceback (most recent call last):\nFile \"build.py\", line 43, in \nffi.build()\nFile \"C:\\Anaconda3\\lib\\site-packages\\torch\\utils\\ffi_init.py\", line 167, in build\nbuild_extension(ffi, cffi_wrapper_name, target_dir, verbose)\nFile \"C:\\Anaconda3\\lib\\site-packages\\torch\\utils\\ffi_init.py\", line 103, in _build_extension\nffi.compile(tmpdir=tmpdir, verbose=verbose, target=libname)\nFile \"C:\\Anaconda3\\lib\\site-packages\\cffi\\api.py\", line 684, in compile\ncompiler_verbose=verbose, debug=debug, **kwds)\nFile \"C:\\Anaconda3\\lib\\site-packages\\cffi\\recompiler.py\", line 1484, in recompile\ncompiler_verbose, debug)\nFile \"C:\\Anaconda3\\lib\\site-packages\\cffi\\ffiplatform.py\", line 20, in compile\noutputfilename = _build(tmpdir, ext, compiler_verbose, debug)\nFile \"C:\\Anaconda3\\lib\\site-packages\\cffi\\ffiplatform.py\", line 49, in _build\ndist.run_command('build_ext')\nFile \"C:\\Anaconda3\\lib\\distutils\\dist.py\", line 974, in run_command\ncmd_obj.run()\nFile \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 339, in run\nself.build_extensions()\nFile \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 448, in build_extensions\nself._build_extensions_serial()\nFile \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 473, in _build_extensions_serial\nself.build_extension(ext)\nFile \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 533, in build_extension\ndepends=ext.depends)\nFile \"C:\\Anaconda3\\lib\\distutils_msvccompiler.py\", line 304, in compile\nself.initialize()\nFile \"C:\\Anaconda3\\lib\\distutils_msvccompiler.py\", line 197, in initialize\nvc_env = _get_vc_env(plat_spec)\nFile \"C:\\Anaconda3\\lib\\distutils_msvccompiler.py\", line 85, in _get_vc_env\nraise DistutilsPlatformError(\"Unable to find vcvarsall.bat\")\ndistutils.errors.DistutilsPlatformError: Unable to find vcvarsall.bat\nI have changed the _build_extension to .pyd. For your info, I compile the pytorch branch windows_full with VS2017 15.4.4, python 3.6.2. Hope can get some solution. Thank you", "body": "Hi @peterjc123  @ankur6ue , I get the following error when running c-extension-example.zip. \r\n\r\nC:\\Users\\hp\\Desktop\\c-extension-example>python build.py\r\ngenerating C:\\Users\\hp\\AppData\\Local\\Temp\\tmpk7_slf6s\\_my_lib.c\r\nrunning build_ext\r\nbuilding '_my_lib' extension\r\nTraceback (most recent call last):\r\n  File \"build.py\", line 43, in <module>\r\n    ffi.build()\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\torch\\utils\\ffi\\__init__.py\", line 167, in build\r\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\torch\\utils\\ffi\\__init__.py\", line 103, in _build_extension\r\n    ffi.compile(tmpdir=tmpdir, verbose=verbose, target=libname)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\cffi\\api.py\", line 684, in compile\r\n    compiler_verbose=verbose, debug=debug, **kwds)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\cffi\\recompiler.py\", line 1484, in recompile\r\n    compiler_verbose, debug)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\cffi\\ffiplatform.py\", line 20, in compile\r\n    outputfilename = _build(tmpdir, ext, compiler_verbose, debug)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\cffi\\ffiplatform.py\", line 49, in _build\r\n    dist.run_command('build_ext')\r\n  File \"C:\\Anaconda3\\lib\\distutils\\dist.py\", line 974, in run_command\r\n    cmd_obj.run()\r\n  File \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 339, in run\r\n    self.build_extensions()\r\n  File \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 448, in build_extensions\r\n    self._build_extensions_serial()\r\n  File \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 473, in _build_extensions_serial\r\n    self.build_extension(ext)\r\n  File \"C:\\Anaconda3\\lib\\distutils\\command\\build_ext.py\", line 533, in build_extension\r\n    depends=ext.depends)\r\n  File \"C:\\Anaconda3\\lib\\distutils\\_msvccompiler.py\", line 304, in compile\r\n    self.initialize()\r\n  File \"C:\\Anaconda3\\lib\\distutils\\_msvccompiler.py\", line 197, in initialize\r\n    vc_env = _get_vc_env(plat_spec)\r\n  File \"C:\\Anaconda3\\lib\\distutils\\_msvccompiler.py\", line 85, in _get_vc_env\r\n    raise DistutilsPlatformError(\"Unable to find vcvarsall.bat\")\r\ndistutils.errors.DistutilsPlatformError: Unable to find vcvarsall.bat\r\n\r\nI have changed the _build_extension to .pyd. For your info, I compile the pytorch branch windows_full with VS2017 15.4.4, python 3.6.2. Hope can get some solution. Thank you"}
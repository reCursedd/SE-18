{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/333374133", "html_url": "https://github.com/pytorch/pytorch/issues/494#issuecomment-333374133", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/494", "id": 333374133, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzM3NDEzMw==", "user": {"login": "peterjc123", "id": 9998726, "node_id": "MDQ6VXNlcjk5OTg3MjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/9998726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peterjc123", "html_url": "https://github.com/peterjc123", "followers_url": "https://api.github.com/users/peterjc123/followers", "following_url": "https://api.github.com/users/peterjc123/following{/other_user}", "gists_url": "https://api.github.com/users/peterjc123/gists{/gist_id}", "starred_url": "https://api.github.com/users/peterjc123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peterjc123/subscriptions", "organizations_url": "https://api.github.com/users/peterjc123/orgs", "repos_url": "https://api.github.com/users/peterjc123/repos", "events_url": "https://api.github.com/users/peterjc123/events{/privacy}", "received_events_url": "https://api.github.com/users/peterjc123/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-01T12:43:40Z", "updated_at": "2017-10-01T12:45:40Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=18743986\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/QuantScientist\">@QuantScientist</a> The environment settings is very complex. You'll need C++ tools from both VS 2015 (Update 2 and up) and VS 2017. You also have to append the environment variable <code>PATH</code> for cmake and msbuild. You need to clone the windows-full branch of peterjc123/pytorch first. The file <code>tools\\shared\\cwrap_common.py</code> should then be replaced by the actual file before build.<br>\nThe mkl files should be placed at 'torch\\lib\\tmp_install\\lib' or the two lines in <code>torch\\lib\\build_libs.bat</code> should be replaced.</p>\n<div class=\"highlight highlight-source-powershell\"><pre><span class=\"pl-c\"><span class=\"pl-c\">#</span> original<span class=\"pl-c\"></span></span>\n                  <span class=\"pl-k\">-</span>DCMAKE_BUILD_TYPE<span class=\"pl-k\">=</span>Release ^\n                  <span class=\"pl-k\">-</span>DLAPACK_LIBRARIES<span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>%INSTALL_DIR%/lib/mkl_rt.lib<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">-</span>DLAPACK_FOUND<span class=\"pl-k\">=</span>TRUE\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> target<span class=\"pl-c\"></span></span>\n                  <span class=\"pl-k\">-</span>DCMAKE_BUILD_TYPE<span class=\"pl-k\">=</span>Release\n                  ::<span class=\"pl-k\">-</span>DLAPACK_LIBRARIES<span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>%INSTALL_DIR%/lib/mkl_rt.lib<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">-</span>DLAPACK_FOUND<span class=\"pl-k\">=</span>TRUE</pre></div>\n<p>The build script is quite simple, but you have to run it in the <code>x86_x64 Cross Tools Command Prompt for VS 2017</code>.</p>\n<div class=\"highlight highlight-source-powershell\"><pre>set DISTUTILS_USE_SDK<span class=\"pl-k\">=</span><span class=\"pl-c1\">1</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> if CUDA is not needed<span class=\"pl-c\"></span></span>\nset NO_CUDA<span class=\"pl-k\">=</span><span class=\"pl-c1\">1</span>\npython setup.py install</pre></div>", "body_text": "@QuantScientist The environment settings is very complex. You'll need C++ tools from both VS 2015 (Update 2 and up) and VS 2017. You also have to append the environment variable PATH for cmake and msbuild. You need to clone the windows-full branch of peterjc123/pytorch first. The file tools\\shared\\cwrap_common.py should then be replaced by the actual file before build.\nThe mkl files should be placed at 'torch\\lib\\tmp_install\\lib' or the two lines in torch\\lib\\build_libs.bat should be replaced.\n# original\n                  -DCMAKE_BUILD_TYPE=Release ^\n                  -DLAPACK_LIBRARIES=\"%INSTALL_DIR%/lib/mkl_rt.lib\" -DLAPACK_FOUND=TRUE\n# target\n                  -DCMAKE_BUILD_TYPE=Release\n                  ::-DLAPACK_LIBRARIES=\"%INSTALL_DIR%/lib/mkl_rt.lib\" -DLAPACK_FOUND=TRUE\nThe build script is quite simple, but you have to run it in the x86_x64 Cross Tools Command Prompt for VS 2017.\nset DISTUTILS_USE_SDK=1\n# if CUDA is not needed\nset NO_CUDA=1\npython setup.py install", "body": "@QuantScientist The environment settings is very complex. You'll need C++ tools from both VS 2015 (Update 2 and up) and VS 2017. You also have to append the environment variable `PATH` for cmake and msbuild. You need to clone the windows-full branch of peterjc123/pytorch first. The file `tools\\shared\\cwrap_common.py` should then be replaced by the actual file before build.\r\nThe mkl files should be placed at 'torch\\lib\\tmp_install\\lib' or the two lines in `torch\\lib\\build_libs.bat` should be replaced.\r\n```Powershell\r\n# original\r\n                  -DCMAKE_BUILD_TYPE=Release ^\r\n                  -DLAPACK_LIBRARIES=\"%INSTALL_DIR%/lib/mkl_rt.lib\" -DLAPACK_FOUND=TRUE\r\n# target\r\n                  -DCMAKE_BUILD_TYPE=Release\r\n                  ::-DLAPACK_LIBRARIES=\"%INSTALL_DIR%/lib/mkl_rt.lib\" -DLAPACK_FOUND=TRUE\r\n```\r\nThe build script is quite simple, but you have to run it in the `x86_x64 Cross Tools Command Prompt for VS 2017`.\r\n```Powershell\r\nset DISTUTILS_USE_SDK=1\r\n# if CUDA is not needed\r\nset NO_CUDA=1\r\npython setup.py install\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/345184771", "html_url": "https://github.com/pytorch/pytorch/issues/494#issuecomment-345184771", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/494", "id": 345184771, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTE4NDc3MQ==", "user": {"login": "magic282", "id": 2285145, "node_id": "MDQ6VXNlcjIyODUxNDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2285145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magic282", "html_url": "https://github.com/magic282", "followers_url": "https://api.github.com/users/magic282/followers", "following_url": "https://api.github.com/users/magic282/following{/other_user}", "gists_url": "https://api.github.com/users/magic282/gists{/gist_id}", "starred_url": "https://api.github.com/users/magic282/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magic282/subscriptions", "organizations_url": "https://api.github.com/users/magic282/orgs", "repos_url": "https://api.github.com/users/magic282/repos", "events_url": "https://api.github.com/users/magic282/events{/privacy}", "received_events_url": "https://api.github.com/users/magic282/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-17T09:02:44Z", "updated_at": "2017-11-17T09:02:44Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9998726\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/peterjc123\">@peterjc123</a> Using the following cmd:</p>\n<div class=\"highlight highlight-source-batchfile\"><pre>d:\n<span class=\"pl-k\">cd</span> pytorch\ngit clone --recursive https://github.com/pytorch/pytorch\n<span class=\"pl-k\">cd</span> pytorch\n<span class=\"pl-k\">xcopy</span> /Y aten\\src\\ATen\\common_with_cwrap.py tools\\shared\\cwrap_common.py\n<span class=\"pl-k\">mkdir</span> torch\\lib\\build\\ATen\\src\\ATen\n<span class=\"pl-k\">cd</span> torch\\lib\\build\\ATen\\src\\ATen\n<span class=\"pl-k\">mkdir</span> ATen\npython ../../../../../../aten/src/aten/gen.py -s ../../../../../../aten/src/aten ..\n<span class=\"pl-k\">cd</span> ../../../../../..\n<span class=\"pl-k\">set</span> <span class=\"pl-smi\">CMAKE_GENERATOR</span><span class=\"pl-k\">=</span>Ninja\n<span class=\"pl-k\">set</span> <span class=\"pl-smi\">DISTUTILS_USE_SDK</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">1</span>\npython setup.py install</pre></div>\n<p>Successfully built Aten.dll, but failed at very last stage:</p>\n<pre><code>D:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\ATen/Context.h(63): warning C4251: 'at::Context::thc_init': struct 'std::once_flag' needs to have dll-interface\n to be used by clients of class 'at::Context'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.11.25503\\include\\xcall_once.h(18): note: see declaration of 'std::once_flag'\nD:\\pytorch\\pytorch\\torch/csrc/utils/pybind.h(22): warning C4101: 'e': unreferenced local variable\nD:\\pytorch\\pytorch\\torch/csrc/utils/auto_gpu.h(27): warning C4244: 'argument': conversion from 'int64_t' to 'int', possible loss of data\nD:\\pytorch\\pytorch\\torch/csrc/jit/type.h(63): warning C4244: 'initializing': conversion from 'int64_t' to 'int', possible loss of data\nD:\\pytorch\\pytorch\\torch/csrc/jit/ir.h(671): warning C4244: 'argument': conversion from 'int64_t' to 'int', possible loss of data\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\THCHalf.h(24): warning C4190: 'THC_float2half' has C-linkage specified, but returns UDT '__half' which is i\nncompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCStorage.h(28): warning C4190: 'THCudaHalfStorage_get' has C-linkage specified, but returns UDT '\n__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(127): warning C4190: 'THCudaHalfTensor_get1d' has C-linkage specified, but returns UDT\n'__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(128): warning C4190: 'THCudaHalfTensor_get2d' has C-linkage specified, but returns UDT\n'__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(129): warning C4190: 'THCudaHalfTensor_get3d' has C-linkage specified, but returns UDT\n'__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(130): warning C4190: 'THCudaHalfTensor_get4d' has C-linkage specified, but returns UDT\n'__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(35): warning C4190: 'THCudaHalfTensor_minall' has C-linkage specified, but re\nturns UDT '__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(36): warning C4190: 'THCudaHalfTensor_maxall' has C-linkage specified, but re\nturns UDT '__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(37): warning C4190: 'THCudaHalfTensor_medianall' has C-linkage specified, but\n returns UDT '__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nD:\\pytorch\\pytorch\\torch/csrc/jit/pybind.h(62): warning C4101: 'e': unreferenced local variable\nD:\\pytorch\\pytorch\\torch/csrc/utils/hash.h(56): error C4576: a parenthesized type followed by an initializer list is a non-standard explicit type conversion syn\ntax\nD:\\pytorch\\pytorch\\torch/csrc/utils/hash.h(56): error C2187: syntax error: '{' was unexpected here\nD:\\pytorch\\pytorch\\torch/csrc/jit/python_arg_flatten.h(20): warning C4244: 'initializing': conversion from 'int64_t' to 'int', possible loss of data\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.11.25503\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit sta\ntus 2\n\nD:\\pytorch\\pytorch&gt;\n</code></pre>", "body_text": "@peterjc123 Using the following cmd:\nd:\ncd pytorch\ngit clone --recursive https://github.com/pytorch/pytorch\ncd pytorch\nxcopy /Y aten\\src\\ATen\\common_with_cwrap.py tools\\shared\\cwrap_common.py\nmkdir torch\\lib\\build\\ATen\\src\\ATen\ncd torch\\lib\\build\\ATen\\src\\ATen\nmkdir ATen\npython ../../../../../../aten/src/aten/gen.py -s ../../../../../../aten/src/aten ..\ncd ../../../../../..\nset CMAKE_GENERATOR=Ninja\nset DISTUTILS_USE_SDK=1\npython setup.py install\nSuccessfully built Aten.dll, but failed at very last stage:\nD:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\ATen/Context.h(63): warning C4251: 'at::Context::thc_init': struct 'std::once_flag' needs to have dll-interface\n to be used by clients of class 'at::Context'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.11.25503\\include\\xcall_once.h(18): note: see declaration of 'std::once_flag'\nD:\\pytorch\\pytorch\\torch/csrc/utils/pybind.h(22): warning C4101: 'e': unreferenced local variable\nD:\\pytorch\\pytorch\\torch/csrc/utils/auto_gpu.h(27): warning C4244: 'argument': conversion from 'int64_t' to 'int', possible loss of data\nD:\\pytorch\\pytorch\\torch/csrc/jit/type.h(63): warning C4244: 'initializing': conversion from 'int64_t' to 'int', possible loss of data\nD:\\pytorch\\pytorch\\torch/csrc/jit/ir.h(671): warning C4244: 'argument': conversion from 'int64_t' to 'int', possible loss of data\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\THCHalf.h(24): warning C4190: 'THC_float2half' has C-linkage specified, but returns UDT '__half' which is i\nncompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCStorage.h(28): warning C4190: 'THCudaHalfStorage_get' has C-linkage specified, but returns UDT '\n__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(127): warning C4190: 'THCudaHalfTensor_get1d' has C-linkage specified, but returns UDT\n'__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(128): warning C4190: 'THCudaHalfTensor_get2d' has C-linkage specified, but returns UDT\n'__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(129): warning C4190: 'THCudaHalfTensor_get3d' has C-linkage specified, but returns UDT\n'__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(130): warning C4190: 'THCudaHalfTensor_get4d' has C-linkage specified, but returns UDT\n'__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(35): warning C4190: 'THCudaHalfTensor_minall' has C-linkage specified, but re\nturns UDT '__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(36): warning C4190: 'THCudaHalfTensor_maxall' has C-linkage specified, but re\nturns UDT '__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(37): warning C4190: 'THCudaHalfTensor_medianall' has C-linkage specified, but\n returns UDT '__half' which is incompatible with C\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\nD:\\pytorch\\pytorch\\torch/csrc/jit/pybind.h(62): warning C4101: 'e': unreferenced local variable\nD:\\pytorch\\pytorch\\torch/csrc/utils/hash.h(56): error C4576: a parenthesized type followed by an initializer list is a non-standard explicit type conversion syn\ntax\nD:\\pytorch\\pytorch\\torch/csrc/utils/hash.h(56): error C2187: syntax error: '{' was unexpected here\nD:\\pytorch\\pytorch\\torch/csrc/jit/python_arg_flatten.h(20): warning C4244: 'initializing': conversion from 'int64_t' to 'int', possible loss of data\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.11.25503\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit sta\ntus 2\n\nD:\\pytorch\\pytorch>", "body": "@peterjc123 Using the following cmd:\r\n```cmd\r\nd:\r\ncd pytorch\r\ngit clone --recursive https://github.com/pytorch/pytorch\r\ncd pytorch\r\nxcopy /Y aten\\src\\ATen\\common_with_cwrap.py tools\\shared\\cwrap_common.py\r\nmkdir torch\\lib\\build\\ATen\\src\\ATen\r\ncd torch\\lib\\build\\ATen\\src\\ATen\r\nmkdir ATen\r\npython ../../../../../../aten/src/aten/gen.py -s ../../../../../../aten/src/aten ..\r\ncd ../../../../../..\r\nset CMAKE_GENERATOR=Ninja\r\nset DISTUTILS_USE_SDK=1\r\npython setup.py install\r\n```\r\nSuccessfully built Aten.dll, but failed at very last stage:\r\n```\r\nD:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\ATen/Context.h(63): warning C4251: 'at::Context::thc_init': struct 'std::once_flag' needs to have dll-interface\r\n to be used by clients of class 'at::Context'\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.11.25503\\include\\xcall_once.h(18): note: see declaration of 'std::once_flag'\r\nD:\\pytorch\\pytorch\\torch/csrc/utils/pybind.h(22): warning C4101: 'e': unreferenced local variable\r\nD:\\pytorch\\pytorch\\torch/csrc/utils/auto_gpu.h(27): warning C4244: 'argument': conversion from 'int64_t' to 'int', possible loss of data\r\nD:\\pytorch\\pytorch\\torch/csrc/jit/type.h(63): warning C4244: 'initializing': conversion from 'int64_t' to 'int', possible loss of data\r\nD:\\pytorch\\pytorch\\torch/csrc/jit/ir.h(671): warning C4244: 'argument': conversion from 'int64_t' to 'int', possible loss of data\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\THCHalf.h(24): warning C4190: 'THC_float2half' has C-linkage specified, but returns UDT '__half' which is i\r\nncompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCStorage.h(28): warning C4190: 'THCudaHalfStorage_get' has C-linkage specified, but returns UDT '\r\n__half' which is incompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(127): warning C4190: 'THCudaHalfTensor_get1d' has C-linkage specified, but returns UDT\r\n'__half' which is incompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(128): warning C4190: 'THCudaHalfTensor_get2d' has C-linkage specified, but returns UDT\r\n'__half' which is incompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(129): warning C4190: 'THCudaHalfTensor_get3d' has C-linkage specified, but returns UDT\r\n'__half' which is incompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensor.h(130): warning C4190: 'THCudaHalfTensor_get4d' has C-linkage specified, but returns UDT\r\n'__half' which is incompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(35): warning C4190: 'THCudaHalfTensor_minall' has C-linkage specified, but re\r\nturns UDT '__half' which is incompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(36): warning C4190: 'THCudaHalfTensor_maxall' has C-linkage specified, but re\r\nturns UDT '__half' which is incompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nd:\\pytorch\\pytorch\\torch\\lib\\tmp_install\\include\\thc\\generic/THCTensorMathReduce.h(37): warning C4190: 'THCudaHalfTensor_medianall' has C-linkage specified, but\r\n returns UDT '__half' which is incompatible with C\r\nc:\\program files\\nvidia gpu computing toolkit\\cuda\\v9.0\\include\\cuda_fp16.hpp(124): note: see declaration of '__half'\r\nD:\\pytorch\\pytorch\\torch/csrc/jit/pybind.h(62): warning C4101: 'e': unreferenced local variable\r\nD:\\pytorch\\pytorch\\torch/csrc/utils/hash.h(56): error C4576: a parenthesized type followed by an initializer list is a non-standard explicit type conversion syn\r\ntax\r\nD:\\pytorch\\pytorch\\torch/csrc/utils/hash.h(56): error C2187: syntax error: '{' was unexpected here\r\nD:\\pytorch\\pytorch\\torch/csrc/jit/python_arg_flatten.h(20): warning C4244: 'initializing': conversion from 'int64_t' to 'int', possible loss of data\r\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.11.25503\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit sta\r\ntus 2\r\n\r\nD:\\pytorch\\pytorch>\r\n```"}
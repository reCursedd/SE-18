{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/379153313", "html_url": "https://github.com/pytorch/pytorch/pull/6277#issuecomment-379153313", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6277", "id": 379153313, "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTE1MzMxMw==", "user": {"login": "Swetko", "id": 11769173, "node_id": "MDQ6VXNlcjExNzY5MTcz", "avatar_url": "https://avatars3.githubusercontent.com/u/11769173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Swetko", "html_url": "https://github.com/Swetko", "followers_url": "https://api.github.com/users/Swetko/followers", "following_url": "https://api.github.com/users/Swetko/following{/other_user}", "gists_url": "https://api.github.com/users/Swetko/gists{/gist_id}", "starred_url": "https://api.github.com/users/Swetko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Swetko/subscriptions", "organizations_url": "https://api.github.com/users/Swetko/orgs", "repos_url": "https://api.github.com/users/Swetko/repos", "events_url": "https://api.github.com/users/Swetko/events{/privacy}", "received_events_url": "https://api.github.com/users/Swetko/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-06T05:37:42Z", "updated_at": "2018-04-06T05:37:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p>this is the link to the new PR. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1100089\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yinghai\">@yinghai</a></p>\n<p><a href=\"url\">https://github.com/pytorch/pytorch/pull/6335</a></p>\n<p>Now it passes all the tests. The issue is explained in the commit message. However I was not able to run the python tests. Seems like protobuf issue. Since we are using the custom protobuf from third_party but the python installation does not contain the corresponding version of the protobufs. I get the following message:</p>\n<p>`+ python -m pytest -x -v --junit-xml=/home/swetko/local/pytorch/caffe2_tests/python/result.xml --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/test/executor_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/matmul_op_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/pack_ops_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/mkl/mkl_sbn_speed_test.py /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python<br>\n===================================================================== test session starts ======================================================================<br>\nplatform linux2 -- Python 2.7.14+, pytest-3.3.2, py-1.5.2, pluggy-0.6.0 -- /usr/bin/python<br>\ncachedir: .cache<br>\nrootdir: /home/swetko/local/caffe2, inifile:<br>\nplugins: hypothesis-3.44.1<br>\ncollecting 0 items / 1 errors<br>\n---------------------------------------- generated xml file: /home/swetko/local/pytorch/caffe2_tests/python/result.xml -----------------------------------------<br>\n============================================================================ ERRORS ============================================================================<br>\n________________________________________ ERROR collecting lib/python2.7/dist-packages/caffe2/python/allcompare_test.py _________________________________________<br>\nlib/python2.7/dist-packages/caffe2/python/allcompare_test.py:16: in <br>\nimport caffe2.python.hypothesis_test_util as hu<br>\nlib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py:41: in <br>\nfrom caffe2.proto import caffe2_pb2<br>\nlib/python2.7/dist-packages/caffe2/proto/caffe2_pb2.py:153: in <br>\noptions=None, file=DESCRIPTOR),<br>\nE   TypeError: <strong>new</strong>() got an unexpected keyword argument 'file'<br>\n=================================================================== 1 error in 0.14 seconds ====================================================================</p>\n<ul>\n<li>tmp_exit_code=1</li>\n<li>'[' 0 -eq 0 ']'</li>\n<li>exit_code=1</li>\n<li>exit 1<br>\n[1]swetko@halfmoon2 ~/local/pytorch $<br>\n`</li>\n</ul>", "body_text": "this is the link to the new PR. @yinghai\nhttps://github.com/pytorch/pytorch/pull/6335\nNow it passes all the tests. The issue is explained in the commit message. However I was not able to run the python tests. Seems like protobuf issue. Since we are using the custom protobuf from third_party but the python installation does not contain the corresponding version of the protobufs. I get the following message:\n`+ python -m pytest -x -v --junit-xml=/home/swetko/local/pytorch/caffe2_tests/python/result.xml --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/test/executor_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/matmul_op_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/pack_ops_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/mkl/mkl_sbn_speed_test.py /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python\n===================================================================== test session starts ======================================================================\nplatform linux2 -- Python 2.7.14+, pytest-3.3.2, py-1.5.2, pluggy-0.6.0 -- /usr/bin/python\ncachedir: .cache\nrootdir: /home/swetko/local/caffe2, inifile:\nplugins: hypothesis-3.44.1\ncollecting 0 items / 1 errors\n---------------------------------------- generated xml file: /home/swetko/local/pytorch/caffe2_tests/python/result.xml -----------------------------------------\n============================================================================ ERRORS ============================================================================\n________________________________________ ERROR collecting lib/python2.7/dist-packages/caffe2/python/allcompare_test.py _________________________________________\nlib/python2.7/dist-packages/caffe2/python/allcompare_test.py:16: in \nimport caffe2.python.hypothesis_test_util as hu\nlib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py:41: in \nfrom caffe2.proto import caffe2_pb2\nlib/python2.7/dist-packages/caffe2/proto/caffe2_pb2.py:153: in \noptions=None, file=DESCRIPTOR),\nE   TypeError: new() got an unexpected keyword argument 'file'\n=================================================================== 1 error in 0.14 seconds ====================================================================\n\ntmp_exit_code=1\n'[' 0 -eq 0 ']'\nexit_code=1\nexit 1\n[1]swetko@halfmoon2 ~/local/pytorch $\n`", "body": "this is the link to the new PR. @yinghai \r\n\r\n[https://github.com/pytorch/pytorch/pull/6335](url)\r\n\r\nNow it passes all the tests. The issue is explained in the commit message. However I was not able to run the python tests. Seems like protobuf issue. Since we are using the custom protobuf from third_party but the python installation does not contain the corresponding version of the protobufs. I get the following message:\r\n\r\n`+ python -m pytest -x -v --junit-xml=/home/swetko/local/pytorch/caffe2_tests/python/result.xml --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/test/executor_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/matmul_op_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/operator_test/pack_ops_test.py --ignore /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python/mkl/mkl_sbn_speed_test.py /home/swetko/local/caffe2/lib/python2.7/dist-packages/caffe2/python\r\n===================================================================== test session starts ======================================================================\r\nplatform linux2 -- Python 2.7.14+, pytest-3.3.2, py-1.5.2, pluggy-0.6.0 -- /usr/bin/python\r\ncachedir: .cache\r\nrootdir: /home/swetko/local/caffe2, inifile:\r\nplugins: hypothesis-3.44.1\r\ncollecting 0 items / 1 errors                                                                                                                                  \r\n---------------------------------------- generated xml file: /home/swetko/local/pytorch/caffe2_tests/python/result.xml -----------------------------------------\r\n============================================================================ ERRORS ============================================================================\r\n________________________________________ ERROR collecting lib/python2.7/dist-packages/caffe2/python/allcompare_test.py _________________________________________\r\nlib/python2.7/dist-packages/caffe2/python/allcompare_test.py:16: in <module>\r\n    import caffe2.python.hypothesis_test_util as hu\r\nlib/python2.7/dist-packages/caffe2/python/hypothesis_test_util.py:41: in <module>\r\n    from caffe2.proto import caffe2_pb2\r\nlib/python2.7/dist-packages/caffe2/proto/caffe2_pb2.py:153: in <module>\r\n    options=None, file=DESCRIPTOR),\r\nE   TypeError: __new__() got an unexpected keyword argument 'file'\r\n=================================================================== 1 error in 0.14 seconds ====================================================================\r\n+ tmp_exit_code=1\r\n+ '[' 0 -eq 0 ']'\r\n+ exit_code=1\r\n+ exit 1\r\n[1]swetko@halfmoon2 ~/local/pytorch $ \r\n`\r\n"}
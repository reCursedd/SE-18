{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/436165754", "html_url": "https://github.com/pytorch/pytorch/pull/13597#issuecomment-436165754", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/13597", "id": 436165754, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjE2NTc1NA==", "user": {"login": "t-vi", "id": 20787943, "node_id": "MDQ6VXNlcjIwNzg3OTQz", "avatar_url": "https://avatars2.githubusercontent.com/u/20787943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/t-vi", "html_url": "https://github.com/t-vi", "followers_url": "https://api.github.com/users/t-vi/followers", "following_url": "https://api.github.com/users/t-vi/following{/other_user}", "gists_url": "https://api.github.com/users/t-vi/gists{/gist_id}", "starred_url": "https://api.github.com/users/t-vi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/t-vi/subscriptions", "organizations_url": "https://api.github.com/users/t-vi/orgs", "repos_url": "https://api.github.com/users/t-vi/repos", "events_url": "https://api.github.com/users/t-vi/events{/privacy}", "received_events_url": "https://api.github.com/users/t-vi/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-06T08:11:47Z", "updated_at": "2018-11-06T08:11:47Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Now it supports both tuple and list script methods.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> torch\n<span class=\"pl-k\">import</span> torch.jit\n<span class=\"pl-k\">from</span> typing <span class=\"pl-k\">import</span> List, Tuple\n\n<span class=\"pl-en\">@torch.jit.script</span>\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">mytest</span>(<span class=\"pl-smi\">x</span>: List[torch.Tensor]):\n    <span class=\"pl-k\">return</span> x[<span class=\"pl-c1\">0</span>] <span class=\"pl-k\">+</span> x[<span class=\"pl-c1\">1</span>]\n\n<span class=\"pl-en\">@torch.jit.script</span>\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">mytest2</span>(<span class=\"pl-smi\">x</span>: Tuple[torch.Tensor, torch.Tensor]):\n    <span class=\"pl-k\">return</span> x[<span class=\"pl-c1\">0</span>] <span class=\"pl-k\">+</span> x[<span class=\"pl-c1\">1</span>]\n\n\na <span class=\"pl-k\">=</span> torch.randn(<span class=\"pl-c1\">5</span>)\nb <span class=\"pl-k\">=</span> torch.randn(<span class=\"pl-c1\">5</span>)\n\n<span class=\"pl-c1\">print</span>(mytest((a, b)))\n<span class=\"pl-c1\">print</span> (mytest.graph_for((a,b)))\n\ntm <span class=\"pl-k\">=</span> torch.jit.trace(mytest,((a, b),))\n\n<span class=\"pl-c1\">print</span>(tm((a,b)))\n<span class=\"pl-c1\">print</span> (tm.graph_for((a,b)))\n\n<span class=\"pl-c1\">print</span>(mytest2((a, b)))\n<span class=\"pl-c1\">print</span> (mytest2.graph_for((a,b)))\n\ntm2 <span class=\"pl-k\">=</span> torch.jit.trace(mytest2,((a, b),))\n\n<span class=\"pl-c1\">print</span>(tm2((a,b)))\n<span class=\"pl-c1\">print</span> (tm2.graph_for((a,b)))</pre></div>\n<p>If you're OK with the overall approach, I'd add tests to make it a proper PR.</p>", "body_text": "Now it supports both tuple and list script methods.\nimport torch\nimport torch.jit\nfrom typing import List, Tuple\n\n@torch.jit.script\ndef mytest(x: List[torch.Tensor]):\n    return x[0] + x[1]\n\n@torch.jit.script\ndef mytest2(x: Tuple[torch.Tensor, torch.Tensor]):\n    return x[0] + x[1]\n\n\na = torch.randn(5)\nb = torch.randn(5)\n\nprint(mytest((a, b)))\nprint (mytest.graph_for((a,b)))\n\ntm = torch.jit.trace(mytest,((a, b),))\n\nprint(tm((a,b)))\nprint (tm.graph_for((a,b)))\n\nprint(mytest2((a, b)))\nprint (mytest2.graph_for((a,b)))\n\ntm2 = torch.jit.trace(mytest2,((a, b),))\n\nprint(tm2((a,b)))\nprint (tm2.graph_for((a,b)))\nIf you're OK with the overall approach, I'd add tests to make it a proper PR.", "body": "Now it supports both tuple and list script methods.\r\n\r\n```python\r\nimport torch\r\nimport torch.jit\r\nfrom typing import List, Tuple\r\n\r\n@torch.jit.script\r\ndef mytest(x: List[torch.Tensor]):\r\n    return x[0] + x[1]\r\n\r\n@torch.jit.script\r\ndef mytest2(x: Tuple[torch.Tensor, torch.Tensor]):\r\n    return x[0] + x[1]\r\n\r\n\r\na = torch.randn(5)\r\nb = torch.randn(5)\r\n\r\nprint(mytest((a, b)))\r\nprint (mytest.graph_for((a,b)))\r\n\r\ntm = torch.jit.trace(mytest,((a, b),))\r\n\r\nprint(tm((a,b)))\r\nprint (tm.graph_for((a,b)))\r\n\r\nprint(mytest2((a, b)))\r\nprint (mytest2.graph_for((a,b)))\r\n\r\ntm2 = torch.jit.trace(mytest2,((a, b),))\r\n\r\nprint(tm2((a,b)))\r\nprint (tm2.graph_for((a,b)))\r\n```\r\n\r\nIf you're OK with the overall approach, I'd add tests to make it a proper PR."}
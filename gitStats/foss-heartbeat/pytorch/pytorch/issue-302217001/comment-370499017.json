{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/370499017", "html_url": "https://github.com/pytorch/pytorch/issues/5566#issuecomment-370499017", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5566", "id": 370499017, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDQ5OTAxNw==", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-05T17:34:17Z", "updated_at": "2018-03-05T17:40:12Z", "author_association": "CONTRIBUTOR", "body_html": "<p><del>I couldn't reproduce this particular error with the following config:</del> There seem to be other problems with the CUDA 9.1 build, even without cuDNN.</p>\n<p>OS: macOS High Sierra 10.13.3<br>\nPyTorch version: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/c7e69e9015716ab11607665ccfa43b1de5bf8260/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/c7e69e9015716ab11607665ccfa43b1de5bf8260\"><tt>c7e69e9</tt></a><br>\nHow you installed PyTorch (conda, pip, source): source<br>\nPython version: 3.6.2<br>\nCUDA 9.1, no cuDNN<br>\nGPU models and configuration: no GPU<br>\nGCC version (if compiling from source):Apple LLVM version 9.0.0 (clang-900.0.39.2)</p>\n<p>I get to:</p>\n<pre><code>gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -I/Users/ezyang/Dev/pytorch-cuda9-env/include -arch x86_64 -I/Users/ezyang/Dev/pytorch-cuda9-env/include -arch x86_64 -I/Users/ezyang/Dev/pytorch-cuda9 -I/Users/ezyang/Dev/pytorch-cuda9/torch/csrc -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/pybind11/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/TH -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THNN -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/ATen -I/Users/ezyang/Dev/pytorch-cuda9-env/lib/python3.6/site-packages/numpy/core/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THD -I/Developer/NVIDIA/CUDA-9.1/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THCUNN -I/Users/ezyang/Dev/pytorch-cuda9-env/include/python3.6m -c torch/csrc/nvrtc.cpp -o build/temp.macosx-10.7-x86_64-3.6/torch/csrc/nvrtc.o\ngcc -bundle -undefined dynamic_lookup -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -arch x86_64 build/temp.macosx-10.7-x86_64-3.6/torch/csrc/nvrtc.o -L/Users/ezyang/Dev/pytorch-cuda9/torch/lib -L/Developer/NVIDIA/CUDA-9.1/lib -L/usr/local/cuda/lib -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -o build/lib.macosx-10.7-x86_64-3.6/torch/_nvrtc.cpython-36m-darwin.so -Wl,-rpath,/Developer/NVIDIA/CUDA-9.1/lib -Wl,-rpath,@loader_path/lib -lcuda -lnvrtc\nld: library not found for -lcuda\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nerror: command 'gcc' failed with exit status 1\n</code></pre>\n<p>which is after ATen linking occurs.</p>\n<p>My build command is:</p>\n<pre><code>MACOSX_DEPLOYMENT_TARGET=10.9 PATH=/Developer/NVIDIA/CUDA-9.1/bin:$PATH CUDA_HOME=/Developer/NVIDIA/CUDA-9.1  python setup.py build_deps develop\n</code></pre>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6130092\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/cycleuser\">@cycleuser</a>, this may be a CUDA 9.1 specific problem. Is it possible to downgrade your CUDA?</p>\n<p>UPDATE: Reinstalling my CUDA driver from the dmg solved the <code>-lcuda</code> problem. Rerunning build with cuDNN now.</p>", "body_text": "I couldn't reproduce this particular error with the following config: There seem to be other problems with the CUDA 9.1 build, even without cuDNN.\nOS: macOS High Sierra 10.13.3\nPyTorch version: c7e69e9\nHow you installed PyTorch (conda, pip, source): source\nPython version: 3.6.2\nCUDA 9.1, no cuDNN\nGPU models and configuration: no GPU\nGCC version (if compiling from source):Apple LLVM version 9.0.0 (clang-900.0.39.2)\nI get to:\ngcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -I/Users/ezyang/Dev/pytorch-cuda9-env/include -arch x86_64 -I/Users/ezyang/Dev/pytorch-cuda9-env/include -arch x86_64 -I/Users/ezyang/Dev/pytorch-cuda9 -I/Users/ezyang/Dev/pytorch-cuda9/torch/csrc -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/pybind11/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/TH -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THNN -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/ATen -I/Users/ezyang/Dev/pytorch-cuda9-env/lib/python3.6/site-packages/numpy/core/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THD -I/Developer/NVIDIA/CUDA-9.1/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THCUNN -I/Users/ezyang/Dev/pytorch-cuda9-env/include/python3.6m -c torch/csrc/nvrtc.cpp -o build/temp.macosx-10.7-x86_64-3.6/torch/csrc/nvrtc.o\ngcc -bundle -undefined dynamic_lookup -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -arch x86_64 build/temp.macosx-10.7-x86_64-3.6/torch/csrc/nvrtc.o -L/Users/ezyang/Dev/pytorch-cuda9/torch/lib -L/Developer/NVIDIA/CUDA-9.1/lib -L/usr/local/cuda/lib -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -o build/lib.macosx-10.7-x86_64-3.6/torch/_nvrtc.cpython-36m-darwin.so -Wl,-rpath,/Developer/NVIDIA/CUDA-9.1/lib -Wl,-rpath,@loader_path/lib -lcuda -lnvrtc\nld: library not found for -lcuda\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nerror: command 'gcc' failed with exit status 1\n\nwhich is after ATen linking occurs.\nMy build command is:\nMACOSX_DEPLOYMENT_TARGET=10.9 PATH=/Developer/NVIDIA/CUDA-9.1/bin:$PATH CUDA_HOME=/Developer/NVIDIA/CUDA-9.1  python setup.py build_deps develop\n\n@cycleuser, this may be a CUDA 9.1 specific problem. Is it possible to downgrade your CUDA?\nUPDATE: Reinstalling my CUDA driver from the dmg solved the -lcuda problem. Rerunning build with cuDNN now.", "body": "~~I couldn't reproduce this particular error with the following config:~~ There seem to be other problems with the CUDA 9.1 build, even without cuDNN.\r\n\r\nOS: macOS High Sierra 10.13.3\r\nPyTorch version: c7e69e9015716ab11607665ccfa43b1de5bf8260\r\nHow you installed PyTorch (conda, pip, source): source\r\nPython version: 3.6.2\r\nCUDA 9.1, no cuDNN\r\nGPU models and configuration: no GPU\r\nGCC version (if compiling from source):Apple LLVM version 9.0.0 (clang-900.0.39.2)\r\n\r\nI get to:\r\n\r\n```\r\ngcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -I/Users/ezyang/Dev/pytorch-cuda9-env/include -arch x86_64 -I/Users/ezyang/Dev/pytorch-cuda9-env/include -arch x86_64 -I/Users/ezyang/Dev/pytorch-cuda9 -I/Users/ezyang/Dev/pytorch-cuda9/torch/csrc -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/pybind11/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/TH -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THNN -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/ATen -I/Users/ezyang/Dev/pytorch-cuda9-env/lib/python3.6/site-packages/numpy/core/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THD -I/Developer/NVIDIA/CUDA-9.1/include -I/Users/ezyang/Dev/pytorch-cuda9/torch/lib/tmp_install/include/THCUNN -I/Users/ezyang/Dev/pytorch-cuda9-env/include/python3.6m -c torch/csrc/nvrtc.cpp -o build/temp.macosx-10.7-x86_64-3.6/torch/csrc/nvrtc.o\r\ngcc -bundle -undefined dynamic_lookup -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -arch x86_64 build/temp.macosx-10.7-x86_64-3.6/torch/csrc/nvrtc.o -L/Users/ezyang/Dev/pytorch-cuda9/torch/lib -L/Developer/NVIDIA/CUDA-9.1/lib -L/usr/local/cuda/lib -L/Users/ezyang/Dev/pytorch-cuda9-env/lib -o build/lib.macosx-10.7-x86_64-3.6/torch/_nvrtc.cpython-36m-darwin.so -Wl,-rpath,/Developer/NVIDIA/CUDA-9.1/lib -Wl,-rpath,@loader_path/lib -lcuda -lnvrtc\r\nld: library not found for -lcuda\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\nerror: command 'gcc' failed with exit status 1\r\n```\r\n\r\nwhich is after ATen linking occurs.\r\n\r\nMy build command is:\r\n\r\n```\r\nMACOSX_DEPLOYMENT_TARGET=10.9 PATH=/Developer/NVIDIA/CUDA-9.1/bin:$PATH CUDA_HOME=/Developer/NVIDIA/CUDA-9.1  python setup.py build_deps develop\r\n```\r\n\r\n@cycleuser, this may be a CUDA 9.1 specific problem. Is it possible to downgrade your CUDA?\r\n\r\nUPDATE: Reinstalling my CUDA driver from the dmg solved the `-lcuda` problem. Rerunning build with cuDNN now."}
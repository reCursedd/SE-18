{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/370516022", "html_url": "https://github.com/pytorch/pytorch/issues/5566#issuecomment-370516022", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5566", "id": 370516022, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDUxNjAyMg==", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-05T18:28:47Z", "updated_at": "2018-03-05T18:28:47Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I successfully built OS X with CUDA 9.1 and cuDNN 7.0.5 on OS X with the following commands:</p>\n<pre><code>(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep CUDNN_MAJOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \n#define CUDNN_MAJOR 7\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep MAJOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep MINOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \n#define CUDNN_MINOR 0\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\n    MINOR_VERSION,\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep PATCHLEVEL /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \n#define CUDNN_PATCHLEVEL 5\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ MACOSX_DEPLOYMENT_TARGET=10.9 PATH=/Developer/NVIDIA/CUDA-9.1/bin:$PATH CUDA_HOME=/Developer/NVIDIA/CUDA-9.1  python setup.py build_deps develop\n</code></pre>\n<p>I don't have access to an OS X box with NVIDIA GPUs so I can't test if it actually runs, but it certainly got further.</p>\n<p>Here is what I would suggest you do:</p>\n<ol>\n<li>Reinstall CUDA and cuDNN. Preferably from scratch but rerunning the installer dmgs may be sufficient. Make sure you don't have other versions of CUDA/cuDNN hanging around.</li>\n<li>Build from a fresh conda environment</li>\n<li>Check and make sure you are setting MACOSX_DEPLOYMENT_TARGET=10.9</li>\n</ol>", "body_text": "I successfully built OS X with CUDA 9.1 and cuDNN 7.0.5 on OS X with the following commands:\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep CUDNN_MAJOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \n#define CUDNN_MAJOR 7\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep MAJOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep MINOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \n#define CUDNN_MINOR 0\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\n    MINOR_VERSION,\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep PATCHLEVEL /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \n#define CUDNN_PATCHLEVEL 5\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ MACOSX_DEPLOYMENT_TARGET=10.9 PATH=/Developer/NVIDIA/CUDA-9.1/bin:$PATH CUDA_HOME=/Developer/NVIDIA/CUDA-9.1  python setup.py build_deps develop\n\nI don't have access to an OS X box with NVIDIA GPUs so I can't test if it actually runs, but it certainly got further.\nHere is what I would suggest you do:\n\nReinstall CUDA and cuDNN. Preferably from scratch but rerunning the installer dmgs may be sufficient. Make sure you don't have other versions of CUDA/cuDNN hanging around.\nBuild from a fresh conda environment\nCheck and make sure you are setting MACOSX_DEPLOYMENT_TARGET=10.9", "body": "I successfully built OS X with CUDA 9.1 and cuDNN 7.0.5 on OS X with the following commands:\r\n\r\n```\r\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep CUDNN_MAJOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \r\n#define CUDNN_MAJOR 7\r\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\r\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep MAJOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \r\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep MINOR /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \r\n#define CUDNN_MINOR 0\r\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\r\n    MINOR_VERSION,\r\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ grep PATCHLEVEL /Developer/NVIDIA/CUDA-9.1/include/cudnn.h \r\n#define CUDNN_PATCHLEVEL 5\r\n#define CUDNN_VERSION    (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\r\n(/Users/ezyang/Dev/pytorch-cuda9-env) dhcp-172-31-201-232:pytorch-cuda9 ezyang$ MACOSX_DEPLOYMENT_TARGET=10.9 PATH=/Developer/NVIDIA/CUDA-9.1/bin:$PATH CUDA_HOME=/Developer/NVIDIA/CUDA-9.1  python setup.py build_deps develop\r\n```\r\n\r\nI don't have access to an OS X box with NVIDIA GPUs so I can't test if it actually runs, but it certainly got further.\r\n\r\nHere is what I would suggest you do:\r\n\r\n1. Reinstall CUDA and cuDNN. Preferably from scratch but rerunning the installer dmgs may be sufficient. Make sure you don't have other versions of CUDA/cuDNN hanging around.\r\n2. Build from a fresh conda environment\r\n3. Check and make sure you are setting MACOSX_DEPLOYMENT_TARGET=10.9"}
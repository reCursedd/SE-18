{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/440790733", "html_url": "https://github.com/pytorch/pytorch/issues/13807#issuecomment-440790733", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/13807", "id": 440790733, "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDc5MDczMw==", "user": {"login": "CorentinJ", "id": 12038136, "node_id": "MDQ6VXNlcjEyMDM4MTM2", "avatar_url": "https://avatars0.githubusercontent.com/u/12038136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CorentinJ", "html_url": "https://github.com/CorentinJ", "followers_url": "https://api.github.com/users/CorentinJ/followers", "following_url": "https://api.github.com/users/CorentinJ/following{/other_user}", "gists_url": "https://api.github.com/users/CorentinJ/gists{/gist_id}", "starred_url": "https://api.github.com/users/CorentinJ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CorentinJ/subscriptions", "organizations_url": "https://api.github.com/users/CorentinJ/orgs", "repos_url": "https://api.github.com/users/CorentinJ/repos", "events_url": "https://api.github.com/users/CorentinJ/events{/privacy}", "received_events_url": "https://api.github.com/users/CorentinJ/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-21T19:55:14Z", "updated_at": "2018-11-21T19:55:14Z", "author_association": "NONE", "body_html": "<p>Reopening the issue with new details.</p>\n<p>I've run cProfile on both setups to observe the difference, I've attached them at the end of this post. It appears there is often a 3 to 10 slowdown (sometimes more) between calls on windows and ubuntu. This is only significant in the <strong>forward pass</strong>. It seems to affect every layer, not just one in particular:</p>\n<p>Windows:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/12038136/48865151-f8eb0d80-edce-11e8-9f2a-a9cd861c1b24.png\"><img src=\"https://user-images.githubusercontent.com/12038136/48865151-f8eb0d80-edce-11e8-9f2a-a9cd861c1b24.png\" alt=\"Windows\" style=\"max-width:100%;\"></a></p>\n<p>Ubuntu:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/12038136/48865166-0607fc80-edcf-11e8-909b-2af98200dbde.png\"><img src=\"https://user-images.githubusercontent.com/12038136/48865166-0607fc80-edcf-11e8-909b-2af98200dbde.png\" alt=\"Ubuntu\" style=\"max-width:100%;\"></a></p>\n<p>Note that the profiling affects performance so the times I reported in my posts above are now higher. <strong>Tottime</strong> indicates the execution time of all code in the function except the subroutines while <strong>cumtime</strong> includes them. It seems that the cumulative time is the most affected, so there is likely a common subfunction that is the at root of the problem.</p>\n<p>Here are the profiling files, you can view them with snakeviz: <a href=\"https://github.com/pytorch/pytorch/files/2605527/profiling.zip\">profiling.zip</a></p>", "body_text": "Reopening the issue with new details.\nI've run cProfile on both setups to observe the difference, I've attached them at the end of this post. It appears there is often a 3 to 10 slowdown (sometimes more) between calls on windows and ubuntu. This is only significant in the forward pass. It seems to affect every layer, not just one in particular:\nWindows:\n\nUbuntu:\n\nNote that the profiling affects performance so the times I reported in my posts above are now higher. Tottime indicates the execution time of all code in the function except the subroutines while cumtime includes them. It seems that the cumulative time is the most affected, so there is likely a common subfunction that is the at root of the problem.\nHere are the profiling files, you can view them with snakeviz: profiling.zip", "body": "Reopening the issue with new details.\r\n\r\nI've run cProfile on both setups to observe the difference, I've attached them at the end of this post. It appears there is often a 3 to 10 slowdown (sometimes more) between calls on windows and ubuntu. This is only significant in the **forward pass**. It seems to affect every layer, not just one in particular:\r\n\r\nWindows:\r\n![Windows](https://user-images.githubusercontent.com/12038136/48865151-f8eb0d80-edce-11e8-9f2a-a9cd861c1b24.png)\r\n\r\nUbuntu:\r\n![Ubuntu](https://user-images.githubusercontent.com/12038136/48865166-0607fc80-edcf-11e8-909b-2af98200dbde.png)\r\n\r\nNote that the profiling affects performance so the times I reported in my posts above are now higher. **Tottime** indicates the execution time of all code in the function except the subroutines while **cumtime** includes them. It seems that the cumulative time is the most affected, so there is likely a common subfunction that is the at root of the problem.\r\n\r\nHere are the profiling files, you can view them with snakeviz: [profiling.zip](https://github.com/pytorch/pytorch/files/2605527/profiling.zip)\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13552", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13552/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13552/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13552/events", "html_url": "https://github.com/pytorch/pytorch/issues/13552", "id": 377096077, "node_id": "MDU6SXNzdWUzNzcwOTYwNzc=", "number": 13552, "title": "Every GraphProto exported from PyTorch to ONNX has initializers `2`, `3` and `4`", "user": {"login": "newling", "id": 4902987, "node_id": "MDQ6VXNlcjQ5MDI5ODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/4902987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/newling", "html_url": "https://github.com/newling", "followers_url": "https://api.github.com/users/newling/followers", "following_url": "https://api.github.com/users/newling/following{/other_user}", "gists_url": "https://api.github.com/users/newling/gists{/gist_id}", "starred_url": "https://api.github.com/users/newling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/newling/subscriptions", "organizations_url": "https://api.github.com/users/newling/orgs", "repos_url": "https://api.github.com/users/newling/repos", "events_url": "https://api.github.com/users/newling/events{/privacy}", "received_events_url": "https://api.github.com/users/newling/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 693805995, "node_id": "MDU6TGFiZWw2OTM4MDU5OTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/onnx", "name": "onnx", "color": "e99695", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-03T21:45:03Z", "updated_at": "2018-11-05T18:38:04Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>In every ONNX Model I export from Pytorch, there are initializers with names <code>2</code>, <code>3</code> and <code>4</code><br>\nof shape (10,10,3,3), even if the compute graph has no weights to initialize.</p>\n<h2>To Reproduce</h2>\n<p>I create a Module and export it, something like</p>\n<div class=\"highlight highlight-source-python\"><pre>        torch.onnx.export(\n            module,\n            inputData,\n            fnModel,\n            <span class=\"pl-v\">verbose</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>,\n            <span class=\"pl-v\">input_names</span><span class=\"pl-k\">=</span>inNames,\n            <span class=\"pl-v\">output_names</span><span class=\"pl-k\">=</span>outNames)</pre></div>\n<p>I then load the serialized model into C++ and query <code>initializer()</code> , where the 3 unwanted initializers are shown.</p>\n<h2>Environment</h2>\n<p>PyTorch version: 0.4.1<br>\nIs debug build: No<br>\nCUDA used to build PyTorch: None</p>\n<p>OS: Mac OSX 10.13.3<br>\nGCC version: Could not collect<br>\nCMake version: version 3.12.2</p>\n<p>Python version: 3.7<br>\nIs CUDA available: No<br>\nCUDA runtime version: No CUDA<br>\nGPU models and configuration: No CUDA<br>\nNvidia driver version: No CUDA<br>\ncuDNN version: No CUDA</p>\n<p>Versions of relevant libraries:<br>\n[pip] Could not collect<br>\n[conda] Could not collect</p>", "body_text": "In every ONNX Model I export from Pytorch, there are initializers with names 2, 3 and 4\nof shape (10,10,3,3), even if the compute graph has no weights to initialize.\nTo Reproduce\nI create a Module and export it, something like\n        torch.onnx.export(\n            module,\n            inputData,\n            fnModel,\n            verbose=False,\n            input_names=inNames,\n            output_names=outNames)\nI then load the serialized model into C++ and query initializer() , where the 3 unwanted initializers are shown.\nEnvironment\nPyTorch version: 0.4.1\nIs debug build: No\nCUDA used to build PyTorch: None\nOS: Mac OSX 10.13.3\nGCC version: Could not collect\nCMake version: version 3.12.2\nPython version: 3.7\nIs CUDA available: No\nCUDA runtime version: No CUDA\nGPU models and configuration: No CUDA\nNvidia driver version: No CUDA\ncuDNN version: No CUDA\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] Could not collect", "body": "In every ONNX Model I export from Pytorch, there are initializers with names `2`, `3` and `4` \r\nof shape (10,10,3,3), even if the compute graph has no weights to initialize.  \r\n\r\n## To Reproduce\r\n\r\nI create a Module and export it, something like\r\n```python\r\n        torch.onnx.export(\r\n            module,\r\n            inputData,\r\n            fnModel,\r\n            verbose=False,\r\n            input_names=inNames,\r\n            output_names=outNames)\r\n```\r\nI then load the serialized model into C++ and query `initializer()` , where the 3 unwanted initializers are shown.\r\n\r\n## Environment\r\n\r\nPyTorch version: 0.4.1\r\nIs debug build: No\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Mac OSX 10.13.3\r\nGCC version: Could not collect\r\nCMake version: version 3.12.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] Could not collect"}
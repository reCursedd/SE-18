{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/401042371", "html_url": "https://github.com/pytorch/pytorch/pull/8899#issuecomment-401042371", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8899", "id": 401042371, "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTA0MjM3MQ==", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-28T13:52:31Z", "updated_at": "2018-06-28T13:52:31Z", "author_association": "CONTRIBUTOR", "body_html": "<p>ROCm build OOMed:</p>\n<pre><code>4:51:05 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorCopy.cu:3:\n14:51:05 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:05   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:05                                                                        ^\n14:51:05 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:05   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:05                                                                        ^~~~~\n14:51:05                                                                        std::abs\n14:51:09 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMath.cu.o\n14:51:12 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathBlas.cu.o\n14:51:12 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathMagma.cu.o\n14:51:15 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMath.cu:5:\n14:51:15 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:15   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:15                                                                        ^\n14:51:15 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:15   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:15                                                                        ^~~~~\n14:51:15                                                                        std::abs\n14:51:17 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathBlas.cu:5:\n14:51:17 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:17   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:17                                                                        ^\n14:51:17 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:17   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:17                                                                        ^~~~~\n14:51:17                                                                        std::abs\n14:51:19 1 warning generated.\n14:51:25 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathPairwise.cu.o\n14:51:27 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathReduce.cu.o\n14:51:31 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathPairwise.cu:6:\n14:51:31 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:31   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:31                                                                        ^\n14:51:31 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:31   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:31                                                                        ^~~~~\n14:51:31                                                                        std::abs\n14:51:32 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cu:1:\n14:51:32 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cuh:6:\n14:51:32 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:32   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:32                                                                        ^\n14:51:32 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:32   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:32                                                                        ^~~~~\n14:51:32                                                                        std::abs\n14:51:35 1 warning generated.\n14:51:40 1 warning generated.\n14:51:40 1 warning generated.\n14:51:57 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathScan.cu.o\n14:52:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathScan.cu:6:\n14:52:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCReduce.cuh:13:\n14:52:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:52:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:52:02                                                                        ^\n14:52:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:52:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:52:02                                                                        ^~~~~\n14:52:02                                                                        std::abs\n14:52:09 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorIndex.cu.o\n14:52:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu:9:\n14:52:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCReduce.cuh:13:\n14:52:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:52:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:52:14                                                                        ^\n14:52:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:52:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:52:14                                                                        ^~~~~\n14:52:14                                                                        std::abs\n14:52:17 1 warning generated.\n14:52:51 1 warning generated.\n14:52:57 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorRandom.cu.o\n14:53:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorRandom.cu:7:\n14:53:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorRandom.cuh:4:\n14:53:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:02                                                                        ^\n14:53:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:02                                                                        ^~~~~\n14:53:02                                                                        std::abs\n14:53:05 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorScatterGather.cu.o\n14:53:07 1 warning generated.\n14:53:10 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorScatterGather.cu:3:\n14:53:10 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCAtomics.cuh:6:\n14:53:10 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:10   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:10                                                                        ^\n14:53:10 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:10   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:10                                                                        ^~~~~\n14:53:10                                                                        std::abs\n14:53:18 1 warning generated.\n14:53:23 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorTopK.cu.o\n14:53:28 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorTopK.cu:8:\n14:53:28 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cuh:6:\n14:53:28 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:28   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:28                                                                        ^\n14:53:28 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:28   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:28                                                                        ^~~~~\n14:53:28                                                                        std::abs\n14:53:31 1 warning generated.\n14:53:39 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorSort.cu.o\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorSort.cu:1:\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorSort.cuh:5:\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\n14:53:44 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:44   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:44                                                                        ^\n14:53:44 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:44   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:44                                                                        ^~~~~\n14:53:44                                                                        std::abs\n14:53:47 1 warning generated.\n14:53:53 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSortUtils.cu.o\n14:53:55 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMode.cu.o\n14:53:58 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cu:1:\n14:53:58 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\n14:53:58 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:58   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:58                                                                        ^\n14:53:58 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:58   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:58                                                                        ^~~~~\n14:53:58                                                                        std::abs\n14:53:59 1 warning generated.\n14:54:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu:15:\n14:54:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cuh:4:\n14:54:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:54:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:02                                                                        ^\n14:54:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:54:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:02                                                                        ^~~~~\n14:54:02                                                                        std::abs\n14:54:07 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/generated/caffe2_hip_generated_THCTensorSortByte.cu.o\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/THCTensorSortByte.cu:1:\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/../THCTensorSort.cuh:5:\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\n14:54:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:54:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:14                                                                        ^\n14:54:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:54:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:14                                                                        ^~~~~\n14:54:14                                                                        std::abs\n14:54:18 1 warning generated.\n14:54:24 LLVM ERROR: out of memory\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamE+0x2a)[0x16ea92a]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys17RunSignalHandlersEv+0x3e)[0x16e8a0e]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x16e8b5c]\n14:54:25 /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7f7778b9d390]\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38)[0x7f777790f428]\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a)[0x7f777791102a]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm22report_bad_alloc_errorEPKcb+0x154)[0x1698e54]\n14:54:25 /usr/lib/x86_64-linux-gnu/libstdc++.so.6(_Znwm+0x2c)[0x7f7778250e8c]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x100b3c6]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x171b3dd]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x171b730]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm25CloneAndPruneIntoFromInstEPNS_8FunctionEPKS0_PKNS_11InstructionERNS_8ValueMapIPKNS_5ValueENS_14WeakTrackingVHENS_14ValueMapConfigISA_NS_3sys10SmartMutexILb0EEEEEEEbRNS_15SmallVectorImplIPNS_10ReturnInstEEEPKcPNS_14ClonedCodeInfoE+0x107)[0x171ffc7]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm14InlineFunctionENS_8CallSiteERNS_18InlineFunctionInfoEPNS_9AAResultsEbPNS_8FunctionE+0xe91)[0x1749461]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm17LegacyInlinerBase11inlineCallsERNS_12CallGraphSCCE+0xf4c)[0x129f17c]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0xd00453]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE+0x304)[0x11f8eb4]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang17EmitBackendOutputERNS_17DiagnosticsEngineERKNS_19HeaderSearchOptionsERKNS_14CodeGenOptionsERKNS_13TargetOptionsERKNS_11LangOptionsERKN4llvm10DataLayoutEPNSE_6ModuleENS_13BackendActionESt10unique_ptrINSE_17raw_pwrite_streamESt14default_deleteISM_EEb+0xc17)[0x18c5747]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x1fe4d92]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang8ParseASTERNS_4SemaEbb+0x370)[0x27570b0]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang13CodeGenAction13ExecuteActionEv+0x37)[0x1fe4337]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang14FrontendAction7ExecuteEv+0x11e)[0x1c9e86e]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang16CompilerInstance13ExecuteActionERNS_14FrontendActionE+0x146)[0x1c69ae6]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang25ExecuteCompilerInvocationEPNS_16CompilerInstanceE+0x96c)[0x1d3237c]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_Z8cc1_mainN4llvm8ArrayRefIPKcEES2_Pv+0xa18)[0x8df7a8]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(main+0x1951)[0x881871]\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7f77778fa830]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_start+0x29)[0x8dceb9]\n14:54:25 Stack dump:\n14:54:25 0.\tProgram arguments: /opt/rocm/hcc/bin/clang-7.0 -cc1 -D__KALMAR_HC__=1 -D__HCC_HC__=1 -D__KALMAR_CPU__=1 -D__HCC_CPU__=1 -triple x86_64-unknown-linux-gnu -S -disable-free -disable-llvm-verifier -main-file-name THCTensorIndex.cu -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -munwind-tables -fuse-init-array -target-cpu x86-64 -dwarf-column-info -debugger-tuning=gdb -coverage-notes-file /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCTensorIndex.cu.gcno -resource-dir /opt/rocm/hcc/lib/clang/7.0.0 -I/opt/rocm/hcc/bin/../include -I/opt/rocm/hcc/bin/../hcc/include -D __HIPCC__ -I /opt/rocm/hcc/include -I /opt/rocm/hip/include/hip/hcc_detail/cuda -I /opt/rocm/hsa/include -I /opt/rocm/profiler/CXLActivityLogger/include -I /opt/rocm/hip/include -D HIP_VERSION_MAJOR=1 -D HIP_VERSION_MINOR=5 -D HIP_VERSION_PATCH=18234 -D __HIP_ARCH_GFX900__=1 -I /usr/include/x86_64-linux-gnu -I /usr/include/x86_64-linux-gnu/c++/4.2.1 -I /usr/include/c++/4.2.1 -D __HIP_PLATFORM_HCC__=1 -D CUDA_HAS_FP16=1 -D __HIP_NO_HALF_OPERATORS__=1 -D __HIP_NO_HALF_CONVERSIONS__=1 -I /opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src/ATen/cuda -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/build/caffe2/aten/src -I /var/lib/jenkins/workspace/build/aten/src -I /var/lib/jenkins/workspace/aten/src/THNN -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/aten/../third_party/catch/single_include -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/aten/src/ATen/.. -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/build -I /var/lib/jenkins/workspace -I -I/var/lib/jenkins/workspace/third_party/protobuf/src -I /var/lib/jenkins/workspace/cmake/../third_party/eigen -I /var/lib/jenkins/workspace/cmake/../third_party/pybind11/include -I /opt/rocm/hip/include -I /opt/rocm/hipblas/include -I /opt/rocm/hcsparse/include -I /opt/rocm/hcrng/include -I /data/Thrust -I /var/lib/jenkins/workspace/third_party/onnx -I /var/lib/jenkins/workspace/build/third_party/onnx -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/backward -internal-isystem /usr/local/include -internal-isystem /opt/rocm/hcc/lib/clang/7.0.0/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Wno-deprecated-register -Wno-macro-redefined -Wno-inconsistent-missing-override -Wno-exceptions -Wno-shift-count-negative -Wno-shift-count-overflow -Wno-unused-command-line-argument -std=c++amp -fdeprecated-macro -fdebug-compilation-dir /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC -ferror-limit 19 -fmessage-length 0 -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fdiagnostics-show-option -famp -fhsa-ext -o /tmp/THCTensorIndex-79ee72.s -x hc-host /var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu -emit-llvm-bc \n14:54:25 1.\t&lt;eof&gt; parser at end of file\n14:54:25 2.\tPer-module optimization passes\n14:54:25 3.\tRunning pass 'CallGraph Pass Manager' on module '/var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu'.\n14:54:26 clang-7.0: error: unable to execute command: Aborted (core dumped)\n14:54:37 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/generated/caffe2_hip_generated_THCTensorMathCompareTByte.cu.o\n14:54:42 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/THCTensorMathCompareTByte.cu:1:\n14:54:42 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/../THCTensorMathCompareT.cuh:8:\n14:54:42 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:54:42   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:42                                                                        ^\n14:54:42 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:54:42   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:42                                                                        ^~~~~\n14:54:42                                                                        std::abs\n14:54:52 1 warning generated.\n14:55:12 LLVM ERROR: out of memory\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamE+0x2a)[0x16ea92a]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys17RunSignalHandlersEv+0x3e)[0x16e8a0e]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x16e8b5c]\n14:55:12 /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7fcb33b65390]\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38)[0x7fcb328d7428]\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a)[0x7fcb328d902a]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm22report_bad_alloc_errorEPKcb+0x154)[0x1698e54]\n14:55:12 /usr/lib/x86_64-linux-gnu/libstdc++.so.6(_Znwm+0x2c)[0x7fcb33218e8c]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x120fbb8]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm11Instruction11setMetadataEjPNS_6MDNodeE+0x23a)[0x12105ea]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm11Instruction12copyMetadataERKS0_NS_8ArrayRefIjEE+0x58f)[0x11d53df]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZNK4llvm11Instruction5cloneEv+0x5a)[0x11d570a]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x171b7e5]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm25CloneAndPruneIntoFromInstEPNS_8FunctionEPKS0_PKNS_11InstructionERNS_8ValueMapIPKNS_5ValueENS_14WeakTrackingVHENS_14ValueMapConfigISA_NS_3sys10SmartMutexILb0EEEEEEEbRNS_15SmallVectorImplIPNS_10ReturnInstEEEPKcPNS_14ClonedCodeInfoE+0x107)[0x171ffc7]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm14InlineFunctionENS_8CallSiteERNS_18InlineFunctionInfoEPNS_9AAResultsEbPNS_8FunctionE+0xe91)[0x1749461]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm17LegacyInlinerBase11inlineCallsERNS_12CallGraphSCCE+0xf4c)[0x129f17c]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0xd00453]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE+0x304)[0x11f8eb4]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang17EmitBackendOutputERNS_17DiagnosticsEngineERKNS_19HeaderSearchOptionsERKNS_14CodeGenOptionsERKNS_13TargetOptionsERKNS_11LangOptionsERKN4llvm10DataLayoutEPNSE_6ModuleENS_13BackendActionESt10unique_ptrINSE_17raw_pwrite_streamESt14default_deleteISM_EEb+0xc17)[0x18c5747]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x1fe4d92]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang8ParseASTERNS_4SemaEbb+0x370)[0x27570b0]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang13CodeGenAction13ExecuteActionEv+0x37)[0x1fe4337]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang14FrontendAction7ExecuteEv+0x11e)[0x1c9e86e]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang16CompilerInstance13ExecuteActionERNS_14FrontendActionE+0x146)[0x1c69ae6]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang25ExecuteCompilerInvocationEPNS_16CompilerInstanceE+0x96c)[0x1d3237c]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_Z8cc1_mainN4llvm8ArrayRefIPKcEES2_Pv+0xa18)[0x8df7a8]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(main+0x1951)[0x881871]\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7fcb328c2830]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_start+0x29)[0x8dceb9]\n14:55:12 Stack dump:\n14:55:12 0.\tProgram arguments: /opt/rocm/hcc/bin/clang-7.0 -cc1 -D__KALMAR_HC__=1 -D__HCC_HC__=1 -D__KALMAR_CPU__=1 -D__HCC_CPU__=1 -triple x86_64-unknown-linux-gnu -S -disable-free -disable-llvm-verifier -main-file-name THCTensorMode.cu -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -munwind-tables -fuse-init-array -target-cpu x86-64 -dwarf-column-info -debugger-tuning=gdb -coverage-notes-file /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCTensorMode.cu.gcno -resource-dir /opt/rocm/hcc/lib/clang/7.0.0 -I/opt/rocm/hcc/bin/../include -I/opt/rocm/hcc/bin/../hcc/include -D __HIPCC__ -I /opt/rocm/hcc/include -I /opt/rocm/hip/include/hip/hcc_detail/cuda -I /opt/rocm/hsa/include -I /opt/rocm/profiler/CXLActivityLogger/include -I /opt/rocm/hip/include -D HIP_VERSION_MAJOR=1 -D HIP_VERSION_MINOR=5 -D HIP_VERSION_PATCH=18234 -D __HIP_ARCH_GFX900__=1 -I /usr/include/x86_64-linux-gnu -I /usr/include/x86_64-linux-gnu/c++/4.2.1 -I /usr/include/c++/4.2.1 -D __HIP_PLATFORM_HCC__=1 -D CUDA_HAS_FP16=1 -D __HIP_NO_HALF_OPERATORS__=1 -D __HIP_NO_HALF_CONVERSIONS__=1 -I /opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src/ATen/cuda -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/build/caffe2/aten/src -I /var/lib/jenkins/workspace/build/aten/src -I /var/lib/jenkins/workspace/aten/src/THNN -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/aten/../third_party/catch/single_include -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/aten/src/ATen/.. -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/build -I /var/lib/jenkins/workspace -I -I/var/lib/jenkins/workspace/third_party/protobuf/src -I /var/lib/jenkins/workspace/cmake/../third_party/eigen -I /var/lib/jenkins/workspace/cmake/../third_party/pybind11/include -I /opt/rocm/hip/include -I /opt/rocm/hipblas/include -I /opt/rocm/hcsparse/include -I /opt/rocm/hcrng/include -I /data/Thrust -I /var/lib/jenkins/workspace/third_party/onnx -I /var/lib/jenkins/workspace/build/third_party/onnx -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/backward -internal-isystem /usr/local/include -internal-isystem /opt/rocm/hcc/lib/clang/7.0.0/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Wno-deprecated-register -Wno-macro-redefined -Wno-inconsistent-missing-override -Wno-exceptions -Wno-shift-count-negative -Wno-shift-count-overflow -Wno-unused-command-line-argument -std=c++amp -fdeprecated-macro -fdebug-compilation-dir /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC -ferror-limit 19 -fmessage-length 0 -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fdiagnostics-show-option -famp -fhsa-ext -o /tmp/THCTensorMode-e8947e.s -x hc-host /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu -emit-llvm-bc \n14:55:12 1.\t&lt;eof&gt; parser at end of file\n14:55:12 2.\tPer-module optimization passes\n14:55:12 3.\tRunning pass 'CallGraph Pass Manager' on module '/var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu'.\n14:55:12 clang-7.0: error: unable to execute command: Aborted (core dumped)\n</code></pre>\n<p>CC <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8586039\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Jorghi12\">@Jorghi12</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9300575\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/bddppq\">@bddppq</a></p>", "body_text": "ROCm build OOMed:\n4:51:05 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorCopy.cu:3:\n14:51:05 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:05   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:05                                                                        ^\n14:51:05 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:05   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:05                                                                        ^~~~~\n14:51:05                                                                        std::abs\n14:51:09 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMath.cu.o\n14:51:12 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathBlas.cu.o\n14:51:12 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathMagma.cu.o\n14:51:15 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMath.cu:5:\n14:51:15 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:15   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:15                                                                        ^\n14:51:15 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:15   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:15                                                                        ^~~~~\n14:51:15                                                                        std::abs\n14:51:17 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathBlas.cu:5:\n14:51:17 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:17   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:17                                                                        ^\n14:51:17 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:17   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:17                                                                        ^~~~~\n14:51:17                                                                        std::abs\n14:51:19 1 warning generated.\n14:51:25 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathPairwise.cu.o\n14:51:27 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathReduce.cu.o\n14:51:31 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathPairwise.cu:6:\n14:51:31 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:31   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:31                                                                        ^\n14:51:31 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:31   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:31                                                                        ^~~~~\n14:51:31                                                                        std::abs\n14:51:32 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cu:1:\n14:51:32 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cuh:6:\n14:51:32 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:51:32   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:32                                                                        ^\n14:51:32 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:51:32   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:51:32                                                                        ^~~~~\n14:51:32                                                                        std::abs\n14:51:35 1 warning generated.\n14:51:40 1 warning generated.\n14:51:40 1 warning generated.\n14:51:57 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathScan.cu.o\n14:52:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathScan.cu:6:\n14:52:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCReduce.cuh:13:\n14:52:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:52:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:52:02                                                                        ^\n14:52:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:52:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:52:02                                                                        ^~~~~\n14:52:02                                                                        std::abs\n14:52:09 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorIndex.cu.o\n14:52:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu:9:\n14:52:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCReduce.cuh:13:\n14:52:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:52:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:52:14                                                                        ^\n14:52:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:52:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:52:14                                                                        ^~~~~\n14:52:14                                                                        std::abs\n14:52:17 1 warning generated.\n14:52:51 1 warning generated.\n14:52:57 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorRandom.cu.o\n14:53:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorRandom.cu:7:\n14:53:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorRandom.cuh:4:\n14:53:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:02                                                                        ^\n14:53:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:02                                                                        ^~~~~\n14:53:02                                                                        std::abs\n14:53:05 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorScatterGather.cu.o\n14:53:07 1 warning generated.\n14:53:10 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorScatterGather.cu:3:\n14:53:10 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCAtomics.cuh:6:\n14:53:10 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:10   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:10                                                                        ^\n14:53:10 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:10   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:10                                                                        ^~~~~\n14:53:10                                                                        std::abs\n14:53:18 1 warning generated.\n14:53:23 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorTopK.cu.o\n14:53:28 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorTopK.cu:8:\n14:53:28 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cuh:6:\n14:53:28 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:28   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:28                                                                        ^\n14:53:28 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:28   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:28                                                                        ^~~~~\n14:53:28                                                                        std::abs\n14:53:31 1 warning generated.\n14:53:39 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorSort.cu.o\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorSort.cu:1:\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorSort.cuh:5:\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\n14:53:44 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:44   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:44                                                                        ^\n14:53:44 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:44   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:44                                                                        ^~~~~\n14:53:44                                                                        std::abs\n14:53:47 1 warning generated.\n14:53:53 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSortUtils.cu.o\n14:53:55 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMode.cu.o\n14:53:58 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cu:1:\n14:53:58 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\n14:53:58 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:53:58   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:58                                                                        ^\n14:53:58 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:53:58   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:53:58                                                                        ^~~~~\n14:53:58                                                                        std::abs\n14:53:59 1 warning generated.\n14:54:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu:15:\n14:54:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cuh:4:\n14:54:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:54:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:02                                                                        ^\n14:54:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:54:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:02                                                                        ^~~~~\n14:54:02                                                                        std::abs\n14:54:07 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/generated/caffe2_hip_generated_THCTensorSortByte.cu.o\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/THCTensorSortByte.cu:1:\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/../THCTensorSort.cuh:5:\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\n14:54:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:54:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:14                                                                        ^\n14:54:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:54:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:14                                                                        ^~~~~\n14:54:14                                                                        std::abs\n14:54:18 1 warning generated.\n14:54:24 LLVM ERROR: out of memory\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamE+0x2a)[0x16ea92a]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys17RunSignalHandlersEv+0x3e)[0x16e8a0e]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x16e8b5c]\n14:54:25 /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7f7778b9d390]\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38)[0x7f777790f428]\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a)[0x7f777791102a]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm22report_bad_alloc_errorEPKcb+0x154)[0x1698e54]\n14:54:25 /usr/lib/x86_64-linux-gnu/libstdc++.so.6(_Znwm+0x2c)[0x7f7778250e8c]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x100b3c6]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x171b3dd]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x171b730]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm25CloneAndPruneIntoFromInstEPNS_8FunctionEPKS0_PKNS_11InstructionERNS_8ValueMapIPKNS_5ValueENS_14WeakTrackingVHENS_14ValueMapConfigISA_NS_3sys10SmartMutexILb0EEEEEEEbRNS_15SmallVectorImplIPNS_10ReturnInstEEEPKcPNS_14ClonedCodeInfoE+0x107)[0x171ffc7]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm14InlineFunctionENS_8CallSiteERNS_18InlineFunctionInfoEPNS_9AAResultsEbPNS_8FunctionE+0xe91)[0x1749461]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm17LegacyInlinerBase11inlineCallsERNS_12CallGraphSCCE+0xf4c)[0x129f17c]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0xd00453]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE+0x304)[0x11f8eb4]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang17EmitBackendOutputERNS_17DiagnosticsEngineERKNS_19HeaderSearchOptionsERKNS_14CodeGenOptionsERKNS_13TargetOptionsERKNS_11LangOptionsERKN4llvm10DataLayoutEPNSE_6ModuleENS_13BackendActionESt10unique_ptrINSE_17raw_pwrite_streamESt14default_deleteISM_EEb+0xc17)[0x18c5747]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x1fe4d92]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang8ParseASTERNS_4SemaEbb+0x370)[0x27570b0]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang13CodeGenAction13ExecuteActionEv+0x37)[0x1fe4337]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang14FrontendAction7ExecuteEv+0x11e)[0x1c9e86e]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang16CompilerInstance13ExecuteActionERNS_14FrontendActionE+0x146)[0x1c69ae6]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang25ExecuteCompilerInvocationEPNS_16CompilerInstanceE+0x96c)[0x1d3237c]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_Z8cc1_mainN4llvm8ArrayRefIPKcEES2_Pv+0xa18)[0x8df7a8]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(main+0x1951)[0x881871]\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7f77778fa830]\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_start+0x29)[0x8dceb9]\n14:54:25 Stack dump:\n14:54:25 0.\tProgram arguments: /opt/rocm/hcc/bin/clang-7.0 -cc1 -D__KALMAR_HC__=1 -D__HCC_HC__=1 -D__KALMAR_CPU__=1 -D__HCC_CPU__=1 -triple x86_64-unknown-linux-gnu -S -disable-free -disable-llvm-verifier -main-file-name THCTensorIndex.cu -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -munwind-tables -fuse-init-array -target-cpu x86-64 -dwarf-column-info -debugger-tuning=gdb -coverage-notes-file /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCTensorIndex.cu.gcno -resource-dir /opt/rocm/hcc/lib/clang/7.0.0 -I/opt/rocm/hcc/bin/../include -I/opt/rocm/hcc/bin/../hcc/include -D __HIPCC__ -I /opt/rocm/hcc/include -I /opt/rocm/hip/include/hip/hcc_detail/cuda -I /opt/rocm/hsa/include -I /opt/rocm/profiler/CXLActivityLogger/include -I /opt/rocm/hip/include -D HIP_VERSION_MAJOR=1 -D HIP_VERSION_MINOR=5 -D HIP_VERSION_PATCH=18234 -D __HIP_ARCH_GFX900__=1 -I /usr/include/x86_64-linux-gnu -I /usr/include/x86_64-linux-gnu/c++/4.2.1 -I /usr/include/c++/4.2.1 -D __HIP_PLATFORM_HCC__=1 -D CUDA_HAS_FP16=1 -D __HIP_NO_HALF_OPERATORS__=1 -D __HIP_NO_HALF_CONVERSIONS__=1 -I /opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src/ATen/cuda -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/build/caffe2/aten/src -I /var/lib/jenkins/workspace/build/aten/src -I /var/lib/jenkins/workspace/aten/src/THNN -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/aten/../third_party/catch/single_include -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/aten/src/ATen/.. -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/build -I /var/lib/jenkins/workspace -I -I/var/lib/jenkins/workspace/third_party/protobuf/src -I /var/lib/jenkins/workspace/cmake/../third_party/eigen -I /var/lib/jenkins/workspace/cmake/../third_party/pybind11/include -I /opt/rocm/hip/include -I /opt/rocm/hipblas/include -I /opt/rocm/hcsparse/include -I /opt/rocm/hcrng/include -I /data/Thrust -I /var/lib/jenkins/workspace/third_party/onnx -I /var/lib/jenkins/workspace/build/third_party/onnx -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/backward -internal-isystem /usr/local/include -internal-isystem /opt/rocm/hcc/lib/clang/7.0.0/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Wno-deprecated-register -Wno-macro-redefined -Wno-inconsistent-missing-override -Wno-exceptions -Wno-shift-count-negative -Wno-shift-count-overflow -Wno-unused-command-line-argument -std=c++amp -fdeprecated-macro -fdebug-compilation-dir /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC -ferror-limit 19 -fmessage-length 0 -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fdiagnostics-show-option -famp -fhsa-ext -o /tmp/THCTensorIndex-79ee72.s -x hc-host /var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu -emit-llvm-bc \n14:54:25 1.\t<eof> parser at end of file\n14:54:25 2.\tPer-module optimization passes\n14:54:25 3.\tRunning pass 'CallGraph Pass Manager' on module '/var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu'.\n14:54:26 clang-7.0: error: unable to execute command: Aborted (core dumped)\n14:54:37 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/generated/caffe2_hip_generated_THCTensorMathCompareTByte.cu.o\n14:54:42 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/THCTensorMathCompareTByte.cu:1:\n14:54:42 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/../THCTensorMathCompareT.cuh:8:\n14:54:42 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n14:54:42   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:42                                                                        ^\n14:54:42 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\n14:54:42   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\n14:54:42                                                                        ^~~~~\n14:54:42                                                                        std::abs\n14:54:52 1 warning generated.\n14:55:12 LLVM ERROR: out of memory\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamE+0x2a)[0x16ea92a]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys17RunSignalHandlersEv+0x3e)[0x16e8a0e]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x16e8b5c]\n14:55:12 /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7fcb33b65390]\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38)[0x7fcb328d7428]\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a)[0x7fcb328d902a]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm22report_bad_alloc_errorEPKcb+0x154)[0x1698e54]\n14:55:12 /usr/lib/x86_64-linux-gnu/libstdc++.so.6(_Znwm+0x2c)[0x7fcb33218e8c]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x120fbb8]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm11Instruction11setMetadataEjPNS_6MDNodeE+0x23a)[0x12105ea]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm11Instruction12copyMetadataERKS0_NS_8ArrayRefIjEE+0x58f)[0x11d53df]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZNK4llvm11Instruction5cloneEv+0x5a)[0x11d570a]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x171b7e5]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm25CloneAndPruneIntoFromInstEPNS_8FunctionEPKS0_PKNS_11InstructionERNS_8ValueMapIPKNS_5ValueENS_14WeakTrackingVHENS_14ValueMapConfigISA_NS_3sys10SmartMutexILb0EEEEEEEbRNS_15SmallVectorImplIPNS_10ReturnInstEEEPKcPNS_14ClonedCodeInfoE+0x107)[0x171ffc7]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm14InlineFunctionENS_8CallSiteERNS_18InlineFunctionInfoEPNS_9AAResultsEbPNS_8FunctionE+0xe91)[0x1749461]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm17LegacyInlinerBase11inlineCallsERNS_12CallGraphSCCE+0xf4c)[0x129f17c]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0xd00453]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE+0x304)[0x11f8eb4]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang17EmitBackendOutputERNS_17DiagnosticsEngineERKNS_19HeaderSearchOptionsERKNS_14CodeGenOptionsERKNS_13TargetOptionsERKNS_11LangOptionsERKN4llvm10DataLayoutEPNSE_6ModuleENS_13BackendActionESt10unique_ptrINSE_17raw_pwrite_streamESt14default_deleteISM_EEb+0xc17)[0x18c5747]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x1fe4d92]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang8ParseASTERNS_4SemaEbb+0x370)[0x27570b0]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang13CodeGenAction13ExecuteActionEv+0x37)[0x1fe4337]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang14FrontendAction7ExecuteEv+0x11e)[0x1c9e86e]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang16CompilerInstance13ExecuteActionERNS_14FrontendActionE+0x146)[0x1c69ae6]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang25ExecuteCompilerInvocationEPNS_16CompilerInstanceE+0x96c)[0x1d3237c]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_Z8cc1_mainN4llvm8ArrayRefIPKcEES2_Pv+0xa18)[0x8df7a8]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(main+0x1951)[0x881871]\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7fcb328c2830]\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_start+0x29)[0x8dceb9]\n14:55:12 Stack dump:\n14:55:12 0.\tProgram arguments: /opt/rocm/hcc/bin/clang-7.0 -cc1 -D__KALMAR_HC__=1 -D__HCC_HC__=1 -D__KALMAR_CPU__=1 -D__HCC_CPU__=1 -triple x86_64-unknown-linux-gnu -S -disable-free -disable-llvm-verifier -main-file-name THCTensorMode.cu -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -munwind-tables -fuse-init-array -target-cpu x86-64 -dwarf-column-info -debugger-tuning=gdb -coverage-notes-file /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCTensorMode.cu.gcno -resource-dir /opt/rocm/hcc/lib/clang/7.0.0 -I/opt/rocm/hcc/bin/../include -I/opt/rocm/hcc/bin/../hcc/include -D __HIPCC__ -I /opt/rocm/hcc/include -I /opt/rocm/hip/include/hip/hcc_detail/cuda -I /opt/rocm/hsa/include -I /opt/rocm/profiler/CXLActivityLogger/include -I /opt/rocm/hip/include -D HIP_VERSION_MAJOR=1 -D HIP_VERSION_MINOR=5 -D HIP_VERSION_PATCH=18234 -D __HIP_ARCH_GFX900__=1 -I /usr/include/x86_64-linux-gnu -I /usr/include/x86_64-linux-gnu/c++/4.2.1 -I /usr/include/c++/4.2.1 -D __HIP_PLATFORM_HCC__=1 -D CUDA_HAS_FP16=1 -D __HIP_NO_HALF_OPERATORS__=1 -D __HIP_NO_HALF_CONVERSIONS__=1 -I /opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src/ATen/cuda -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/build/caffe2/aten/src -I /var/lib/jenkins/workspace/build/aten/src -I /var/lib/jenkins/workspace/aten/src/THNN -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/aten/../third_party/catch/single_include -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/aten/src/ATen/.. -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/build -I /var/lib/jenkins/workspace -I -I/var/lib/jenkins/workspace/third_party/protobuf/src -I /var/lib/jenkins/workspace/cmake/../third_party/eigen -I /var/lib/jenkins/workspace/cmake/../third_party/pybind11/include -I /opt/rocm/hip/include -I /opt/rocm/hipblas/include -I /opt/rocm/hcsparse/include -I /opt/rocm/hcrng/include -I /data/Thrust -I /var/lib/jenkins/workspace/third_party/onnx -I /var/lib/jenkins/workspace/build/third_party/onnx -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/backward -internal-isystem /usr/local/include -internal-isystem /opt/rocm/hcc/lib/clang/7.0.0/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Wno-deprecated-register -Wno-macro-redefined -Wno-inconsistent-missing-override -Wno-exceptions -Wno-shift-count-negative -Wno-shift-count-overflow -Wno-unused-command-line-argument -std=c++amp -fdeprecated-macro -fdebug-compilation-dir /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC -ferror-limit 19 -fmessage-length 0 -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fdiagnostics-show-option -famp -fhsa-ext -o /tmp/THCTensorMode-e8947e.s -x hc-host /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu -emit-llvm-bc \n14:55:12 1.\t<eof> parser at end of file\n14:55:12 2.\tPer-module optimization passes\n14:55:12 3.\tRunning pass 'CallGraph Pass Manager' on module '/var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu'.\n14:55:12 clang-7.0: error: unable to execute command: Aborted (core dumped)\n\nCC @Jorghi12 @bddppq", "body": "ROCm build OOMed:\r\n\r\n```\r\n4:51:05 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorCopy.cu:3:\r\n14:51:05 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:51:05   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:05                                                                        ^\r\n14:51:05 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:51:05   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:05                                                                        ^~~~~\r\n14:51:05                                                                        std::abs\r\n14:51:09 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMath.cu.o\r\n14:51:12 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathBlas.cu.o\r\n14:51:12 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathMagma.cu.o\r\n14:51:15 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMath.cu:5:\r\n14:51:15 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:51:15   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:15                                                                        ^\r\n14:51:15 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:51:15   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:15                                                                        ^~~~~\r\n14:51:15                                                                        std::abs\r\n14:51:17 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathBlas.cu:5:\r\n14:51:17 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:51:17   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:17                                                                        ^\r\n14:51:17 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:51:17   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:17                                                                        ^~~~~\r\n14:51:17                                                                        std::abs\r\n14:51:19 1 warning generated.\r\n14:51:25 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathPairwise.cu.o\r\n14:51:27 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathReduce.cu.o\r\n14:51:31 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathPairwise.cu:6:\r\n14:51:31 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:51:31   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:31                                                                        ^\r\n14:51:31 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:51:31   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:31                                                                        ^~~~~\r\n14:51:31                                                                        std::abs\r\n14:51:32 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cu:1:\r\n14:51:32 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cuh:6:\r\n14:51:32 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:51:32   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:32                                                                        ^\r\n14:51:32 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:51:32   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:51:32                                                                        ^~~~~\r\n14:51:32                                                                        std::abs\r\n14:51:35 1 warning generated.\r\n14:51:40 1 warning generated.\r\n14:51:40 1 warning generated.\r\n14:51:57 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMathScan.cu.o\r\n14:52:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathScan.cu:6:\r\n14:52:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCReduce.cuh:13:\r\n14:52:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:52:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:52:02                                                                        ^\r\n14:52:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:52:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:52:02                                                                        ^~~~~\r\n14:52:02                                                                        std::abs\r\n14:52:09 [ 70%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorIndex.cu.o\r\n14:52:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu:9:\r\n14:52:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCReduce.cuh:13:\r\n14:52:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:52:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:52:14                                                                        ^\r\n14:52:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:52:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:52:14                                                                        ^~~~~\r\n14:52:14                                                                        std::abs\r\n14:52:17 1 warning generated.\r\n14:52:51 1 warning generated.\r\n14:52:57 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorRandom.cu.o\r\n14:53:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorRandom.cu:7:\r\n14:53:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorRandom.cuh:4:\r\n14:53:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:53:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:02                                                                        ^\r\n14:53:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:53:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:02                                                                        ^~~~~\r\n14:53:02                                                                        std::abs\r\n14:53:05 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorScatterGather.cu.o\r\n14:53:07 1 warning generated.\r\n14:53:10 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorScatterGather.cu:3:\r\n14:53:10 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCAtomics.cuh:6:\r\n14:53:10 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:53:10   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:10                                                                        ^\r\n14:53:10 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:53:10   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:10                                                                        ^~~~~\r\n14:53:10                                                                        std::abs\r\n14:53:18 1 warning generated.\r\n14:53:23 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorTopK.cu.o\r\n14:53:28 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorTopK.cu:8:\r\n14:53:28 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMathReduce.cuh:6:\r\n14:53:28 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:53:28   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:28                                                                        ^\r\n14:53:28 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:53:28   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:28                                                                        ^~~~~\r\n14:53:28                                                                        std::abs\r\n14:53:31 1 warning generated.\r\n14:53:39 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorSort.cu.o\r\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorSort.cu:1:\r\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorSort.cuh:5:\r\n14:53:44 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\r\n14:53:44 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:53:44   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:44                                                                        ^\r\n14:53:44 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:53:44   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:44                                                                        ^~~~~\r\n14:53:44                                                                        std::abs\r\n14:53:47 1 warning generated.\r\n14:53:53 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCSortUtils.cu.o\r\n14:53:55 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/caffe2_hip_generated_THCTensorMode.cu.o\r\n14:53:58 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cu:1:\r\n14:53:58 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\r\n14:53:58 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:53:58   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:58                                                                        ^\r\n14:53:58 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:53:58   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:53:58                                                                        ^~~~~\r\n14:53:58                                                                        std::abs\r\n14:53:59 1 warning generated.\r\n14:54:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu:15:\r\n14:54:02 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cuh:4:\r\n14:54:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:54:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:54:02                                                                        ^\r\n14:54:02 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:54:02   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:54:02                                                                        ^~~~~\r\n14:54:02                                                                        std::abs\r\n14:54:07 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/generated/caffe2_hip_generated_THCTensorSortByte.cu.o\r\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/THCTensorSortByte.cu:1:\r\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/../THCTensorSort.cuh:5:\r\n14:54:14 In file included from /var/lib/jenkins/workspace/aten/src/THC/THCSortUtils.cuh:6:\r\n14:54:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:54:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:54:14                                                                        ^\r\n14:54:14 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:54:14   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:54:14                                                                        ^~~~~\r\n14:54:14                                                                        std::abs\r\n14:54:18 1 warning generated.\r\n14:54:24 LLVM ERROR: out of memory\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamE+0x2a)[0x16ea92a]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys17RunSignalHandlersEv+0x3e)[0x16e8a0e]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x16e8b5c]\r\n14:54:25 /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7f7778b9d390]\r\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38)[0x7f777790f428]\r\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a)[0x7f777791102a]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm22report_bad_alloc_errorEPKcb+0x154)[0x1698e54]\r\n14:54:25 /usr/lib/x86_64-linux-gnu/libstdc++.so.6(_Znwm+0x2c)[0x7f7778250e8c]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x100b3c6]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x171b3dd]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x171b730]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm25CloneAndPruneIntoFromInstEPNS_8FunctionEPKS0_PKNS_11InstructionERNS_8ValueMapIPKNS_5ValueENS_14WeakTrackingVHENS_14ValueMapConfigISA_NS_3sys10SmartMutexILb0EEEEEEEbRNS_15SmallVectorImplIPNS_10ReturnInstEEEPKcPNS_14ClonedCodeInfoE+0x107)[0x171ffc7]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm14InlineFunctionENS_8CallSiteERNS_18InlineFunctionInfoEPNS_9AAResultsEbPNS_8FunctionE+0xe91)[0x1749461]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm17LegacyInlinerBase11inlineCallsERNS_12CallGraphSCCE+0xf4c)[0x129f17c]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0xd00453]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE+0x304)[0x11f8eb4]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang17EmitBackendOutputERNS_17DiagnosticsEngineERKNS_19HeaderSearchOptionsERKNS_14CodeGenOptionsERKNS_13TargetOptionsERKNS_11LangOptionsERKN4llvm10DataLayoutEPNSE_6ModuleENS_13BackendActionESt10unique_ptrINSE_17raw_pwrite_streamESt14default_deleteISM_EEb+0xc17)[0x18c5747]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0[0x1fe4d92]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang8ParseASTERNS_4SemaEbb+0x370)[0x27570b0]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang13CodeGenAction13ExecuteActionEv+0x37)[0x1fe4337]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang14FrontendAction7ExecuteEv+0x11e)[0x1c9e86e]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang16CompilerInstance13ExecuteActionERNS_14FrontendActionE+0x146)[0x1c69ae6]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang25ExecuteCompilerInvocationEPNS_16CompilerInstanceE+0x96c)[0x1d3237c]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_Z8cc1_mainN4llvm8ArrayRefIPKcEES2_Pv+0xa18)[0x8df7a8]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(main+0x1951)[0x881871]\r\n14:54:25 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7f77778fa830]\r\n14:54:25 /opt/rocm/hcc/bin/clang-7.0(_start+0x29)[0x8dceb9]\r\n14:54:25 Stack dump:\r\n14:54:25 0.\tProgram arguments: /opt/rocm/hcc/bin/clang-7.0 -cc1 -D__KALMAR_HC__=1 -D__HCC_HC__=1 -D__KALMAR_CPU__=1 -D__HCC_CPU__=1 -triple x86_64-unknown-linux-gnu -S -disable-free -disable-llvm-verifier -main-file-name THCTensorIndex.cu -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -munwind-tables -fuse-init-array -target-cpu x86-64 -dwarf-column-info -debugger-tuning=gdb -coverage-notes-file /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCTensorIndex.cu.gcno -resource-dir /opt/rocm/hcc/lib/clang/7.0.0 -I/opt/rocm/hcc/bin/../include -I/opt/rocm/hcc/bin/../hcc/include -D __HIPCC__ -I /opt/rocm/hcc/include -I /opt/rocm/hip/include/hip/hcc_detail/cuda -I /opt/rocm/hsa/include -I /opt/rocm/profiler/CXLActivityLogger/include -I /opt/rocm/hip/include -D HIP_VERSION_MAJOR=1 -D HIP_VERSION_MINOR=5 -D HIP_VERSION_PATCH=18234 -D __HIP_ARCH_GFX900__=1 -I /usr/include/x86_64-linux-gnu -I /usr/include/x86_64-linux-gnu/c++/4.2.1 -I /usr/include/c++/4.2.1 -D __HIP_PLATFORM_HCC__=1 -D CUDA_HAS_FP16=1 -D __HIP_NO_HALF_OPERATORS__=1 -D __HIP_NO_HALF_CONVERSIONS__=1 -I /opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src/ATen/cuda -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/build/caffe2/aten/src -I /var/lib/jenkins/workspace/build/aten/src -I /var/lib/jenkins/workspace/aten/src/THNN -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/aten/../third_party/catch/single_include -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/aten/src/ATen/.. -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/build -I /var/lib/jenkins/workspace -I -I/var/lib/jenkins/workspace/third_party/protobuf/src -I /var/lib/jenkins/workspace/cmake/../third_party/eigen -I /var/lib/jenkins/workspace/cmake/../third_party/pybind11/include -I /opt/rocm/hip/include -I /opt/rocm/hipblas/include -I /opt/rocm/hcsparse/include -I /opt/rocm/hcrng/include -I /data/Thrust -I /var/lib/jenkins/workspace/third_party/onnx -I /var/lib/jenkins/workspace/build/third_party/onnx -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/backward -internal-isystem /usr/local/include -internal-isystem /opt/rocm/hcc/lib/clang/7.0.0/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Wno-deprecated-register -Wno-macro-redefined -Wno-inconsistent-missing-override -Wno-exceptions -Wno-shift-count-negative -Wno-shift-count-overflow -Wno-unused-command-line-argument -std=c++amp -fdeprecated-macro -fdebug-compilation-dir /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC -ferror-limit 19 -fmessage-length 0 -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fdiagnostics-show-option -famp -fhsa-ext -o /tmp/THCTensorIndex-79ee72.s -x hc-host /var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu -emit-llvm-bc \r\n14:54:25 1.\t<eof> parser at end of file\r\n14:54:25 2.\tPer-module optimization passes\r\n14:54:25 3.\tRunning pass 'CallGraph Pass Manager' on module '/var/lib/jenkins/workspace/aten/src/THC/THCTensorIndex.cu'.\r\n14:54:26 clang-7.0: error: unable to execute command: Aborted (core dumped)\r\n14:54:37 [ 71%] Building HIPCC object caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/generated/caffe2_hip_generated_THCTensorMathCompareTByte.cu.o\r\n14:54:42 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/THCTensorMathCompareTByte.cu:1:\r\n14:54:42 In file included from /var/lib/jenkins/workspace/aten/src/THC/generated/../THCTensorMathCompareT.cuh:8:\r\n14:54:42 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\r\n14:54:42   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:54:42                                                                        ^\r\n14:54:42 /var/lib/jenkins/workspace/aten/src/THC/THCNumerics.cuh:740:72: note: use function 'std::abs' instead\r\n14:54:42   static inline __host__ __device__  double abs  (double a) { return   ::abs(a); }\r\n14:54:42                                                                        ^~~~~\r\n14:54:42                                                                        std::abs\r\n14:54:52 1 warning generated.\r\n14:55:12 LLVM ERROR: out of memory\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamE+0x2a)[0x16ea92a]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm3sys17RunSignalHandlersEv+0x3e)[0x16e8a0e]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x16e8b5c]\r\n14:55:12 /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7fcb33b65390]\r\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38)[0x7fcb328d7428]\r\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a)[0x7fcb328d902a]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm22report_bad_alloc_errorEPKcb+0x154)[0x1698e54]\r\n14:55:12 /usr/lib/x86_64-linux-gnu/libstdc++.so.6(_Znwm+0x2c)[0x7fcb33218e8c]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x120fbb8]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm11Instruction11setMetadataEjPNS_6MDNodeE+0x23a)[0x12105ea]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm11Instruction12copyMetadataERKS0_NS_8ArrayRefIjEE+0x58f)[0x11d53df]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZNK4llvm11Instruction5cloneEv+0x5a)[0x11d570a]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x171b7e5]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm25CloneAndPruneIntoFromInstEPNS_8FunctionEPKS0_PKNS_11InstructionERNS_8ValueMapIPKNS_5ValueENS_14WeakTrackingVHENS_14ValueMapConfigISA_NS_3sys10SmartMutexILb0EEEEEEEbRNS_15SmallVectorImplIPNS_10ReturnInstEEEPKcPNS_14ClonedCodeInfoE+0x107)[0x171ffc7]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm14InlineFunctionENS_8CallSiteERNS_18InlineFunctionInfoEPNS_9AAResultsEbPNS_8FunctionE+0xe91)[0x1749461]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm17LegacyInlinerBase11inlineCallsERNS_12CallGraphSCCE+0xf4c)[0x129f17c]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0xd00453]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE+0x304)[0x11f8eb4]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang17EmitBackendOutputERNS_17DiagnosticsEngineERKNS_19HeaderSearchOptionsERKNS_14CodeGenOptionsERKNS_13TargetOptionsERKNS_11LangOptionsERKN4llvm10DataLayoutEPNSE_6ModuleENS_13BackendActionESt10unique_ptrINSE_17raw_pwrite_streamESt14default_deleteISM_EEb+0xc17)[0x18c5747]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0[0x1fe4d92]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang8ParseASTERNS_4SemaEbb+0x370)[0x27570b0]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang13CodeGenAction13ExecuteActionEv+0x37)[0x1fe4337]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang14FrontendAction7ExecuteEv+0x11e)[0x1c9e86e]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang16CompilerInstance13ExecuteActionERNS_14FrontendActionE+0x146)[0x1c69ae6]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_ZN5clang25ExecuteCompilerInvocationEPNS_16CompilerInstanceE+0x96c)[0x1d3237c]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_Z8cc1_mainN4llvm8ArrayRefIPKcEES2_Pv+0xa18)[0x8df7a8]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(main+0x1951)[0x881871]\r\n14:55:12 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7fcb328c2830]\r\n14:55:12 /opt/rocm/hcc/bin/clang-7.0(_start+0x29)[0x8dceb9]\r\n14:55:12 Stack dump:\r\n14:55:12 0.\tProgram arguments: /opt/rocm/hcc/bin/clang-7.0 -cc1 -D__KALMAR_HC__=1 -D__HCC_HC__=1 -D__KALMAR_CPU__=1 -D__HCC_CPU__=1 -triple x86_64-unknown-linux-gnu -S -disable-free -disable-llvm-verifier -main-file-name THCTensorMode.cu -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -munwind-tables -fuse-init-array -target-cpu x86-64 -dwarf-column-info -debugger-tuning=gdb -coverage-notes-file /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC/./caffe2_hip_generated_THCTensorMode.cu.gcno -resource-dir /opt/rocm/hcc/lib/clang/7.0.0 -I/opt/rocm/hcc/bin/../include -I/opt/rocm/hcc/bin/../hcc/include -D __HIPCC__ -I /opt/rocm/hcc/include -I /opt/rocm/hip/include/hip/hcc_detail/cuda -I /opt/rocm/hsa/include -I /opt/rocm/profiler/CXLActivityLogger/include -I /opt/rocm/hip/include -D HIP_VERSION_MAJOR=1 -D HIP_VERSION_MINOR=5 -D HIP_VERSION_PATCH=18234 -D __HIP_ARCH_GFX900__=1 -I /usr/include/x86_64-linux-gnu -I /usr/include/x86_64-linux-gnu/c++/4.2.1 -I /usr/include/c++/4.2.1 -D __HIP_PLATFORM_HCC__=1 -D CUDA_HAS_FP16=1 -D __HIP_NO_HALF_OPERATORS__=1 -D __HIP_NO_HALF_CONVERSIONS__=1 -I /opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/opt/rocm/hip/include -I /opt/rocm/hcc/include -I /opt/rocm/hsa/include -I /opt/rocm/rocrand/include -I /opt/rocm/hiprand/include -I /opt/rocm/rocblas/include -I /opt/rocm/miopen/include -I /data/Thrust -I /data/Thrust/thrust/system/cuda/detail/cub-hip -I -I/var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src/ATen/cuda -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/TH -I /var/lib/jenkins/workspace/aten/src/THC -I /var/lib/jenkins/workspace/build/caffe2/aten/src/TH -I /var/lib/jenkins/workspace/build/caffe2/aten/src/THC -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/build/caffe2/aten/src -I /var/lib/jenkins/workspace/build/aten/src -I /var/lib/jenkins/workspace/aten/src/THNN -I /var/lib/jenkins/workspace/aten/src/THCUNN -I /var/lib/jenkins/workspace/aten/src -I /var/lib/jenkins/workspace/aten/../third_party/catch/single_include -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/aten/src/ATen/.. -I /var/lib/jenkins/workspace/build/caffe2/aten/src/ATen -I /var/lib/jenkins/workspace/build -I /var/lib/jenkins/workspace -I -I/var/lib/jenkins/workspace/third_party/protobuf/src -I /var/lib/jenkins/workspace/cmake/../third_party/eigen -I /var/lib/jenkins/workspace/cmake/../third_party/pybind11/include -I /opt/rocm/hip/include -I /opt/rocm/hipblas/include -I /opt/rocm/hcsparse/include -I /opt/rocm/hcrng/include -I /data/Thrust -I /var/lib/jenkins/workspace/third_party/onnx -I /var/lib/jenkins/workspace/build/third_party/onnx -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/x86_64-linux-gnu/c++/5.4.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/backward -internal-isystem /usr/local/include -internal-isystem /opt/rocm/hcc/lib/clang/7.0.0/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Wno-deprecated-register -Wno-macro-redefined -Wno-inconsistent-missing-override -Wno-exceptions -Wno-shift-count-negative -Wno-shift-count-overflow -Wno-unused-command-line-argument -std=c++amp -fdeprecated-macro -fdebug-compilation-dir /var/lib/jenkins/workspace/build/caffe2/CMakeFiles/caffe2_hip.dir/__/aten/src/THC -ferror-limit 19 -fmessage-length 0 -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fdiagnostics-show-option -famp -fhsa-ext -o /tmp/THCTensorMode-e8947e.s -x hc-host /var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu -emit-llvm-bc \r\n14:55:12 1.\t<eof> parser at end of file\r\n14:55:12 2.\tPer-module optimization passes\r\n14:55:12 3.\tRunning pass 'CallGraph Pass Manager' on module '/var/lib/jenkins/workspace/aten/src/THC/THCTensorMode.cu'.\r\n14:55:12 clang-7.0: error: unable to execute command: Aborted (core dumped)\r\n```\r\n\r\nCC @Jorghi12 @bddppq "}
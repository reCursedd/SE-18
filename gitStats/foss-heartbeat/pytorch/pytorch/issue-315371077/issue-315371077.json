{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6700", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6700/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6700/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6700/events", "html_url": "https://github.com/pytorch/pytorch/issues/6700", "id": 315371077, "node_id": "MDU6SXNzdWUzMTUzNzEwNzc=", "number": 6700, "title": "rsample() in distributions.relaxed_bernoulli", "user": {"login": "eelxpeng", "id": 14260983, "node_id": "MDQ6VXNlcjE0MjYwOTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/14260983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eelxpeng", "html_url": "https://github.com/eelxpeng", "followers_url": "https://api.github.com/users/eelxpeng/followers", "following_url": "https://api.github.com/users/eelxpeng/following{/other_user}", "gists_url": "https://api.github.com/users/eelxpeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/eelxpeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eelxpeng/subscriptions", "organizations_url": "https://api.github.com/users/eelxpeng/orgs", "repos_url": "https://api.github.com/users/eelxpeng/repos", "events_url": "https://api.github.com/users/eelxpeng/events{/privacy}", "received_events_url": "https://api.github.com/users/eelxpeng/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-04-18T07:59:19Z", "updated_at": "2018-04-19T07:34:57Z", "closed_at": "2018-04-19T07:34:57Z", "author_association": "NONE", "body_html": "<p>I noted some discrepency of the implementation of <code>LogitRelaxedBernoulli </code> in distributions.relaxed_bernoulli with the following cited paper in the code</p>\n<blockquote>\n<p>[1] The Concrete Distribution: A Continuous Relaxation of Discrete Random Variables<br>\n(Maddison et al, 2017)</p>\n</blockquote>\n<p>The <code>rsample()</code> function is implemented as</p>\n<p><code>(uniforms.log() - (-uniforms).log1p() + probs.log() - (-probs).log1p()) / self.temperature</code></p>\n<p>But according to the paper <code>(uniforms.log() - (-uniforms).log1p() + probs.log() ) / self.temperature</code> is what should be done. There is no <code>log(1-alpha)</code> in the original paper. I know that this is also how RelaxedBernoulli is implemented in the Tensorflow Distribution package. I wonder if this is a bug instead.</p>", "body_text": "I noted some discrepency of the implementation of LogitRelaxedBernoulli  in distributions.relaxed_bernoulli with the following cited paper in the code\n\n[1] The Concrete Distribution: A Continuous Relaxation of Discrete Random Variables\n(Maddison et al, 2017)\n\nThe rsample() function is implemented as\n(uniforms.log() - (-uniforms).log1p() + probs.log() - (-probs).log1p()) / self.temperature\nBut according to the paper (uniforms.log() - (-uniforms).log1p() + probs.log() ) / self.temperature is what should be done. There is no log(1-alpha) in the original paper. I know that this is also how RelaxedBernoulli is implemented in the Tensorflow Distribution package. I wonder if this is a bug instead.", "body": "I noted some discrepency of the implementation of `LogitRelaxedBernoulli ` in distributions.relaxed_bernoulli with the following cited paper in the code\r\n\r\n> [1] The Concrete Distribution: A Continuous Relaxation of Discrete Random Variables\r\n>     (Maddison et al, 2017)\r\n\r\nThe `rsample()` function is implemented as \r\n\r\n`(uniforms.log() - (-uniforms).log1p() + probs.log() - (-probs).log1p()) / self.temperature`\r\n\r\nBut according to the paper `(uniforms.log() - (-uniforms).log1p() + probs.log() ) / self.temperature` is what should be done. There is no `log(1-alpha)` in the original paper. I know that this is also how RelaxedBernoulli is implemented in the Tensorflow Distribution package. I wonder if this is a bug instead."}
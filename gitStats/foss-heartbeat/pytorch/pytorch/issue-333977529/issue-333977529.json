{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8685", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8685/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8685/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8685/events", "html_url": "https://github.com/pytorch/pytorch/issues/8685", "id": 333977529, "node_id": "MDU6SXNzdWUzMzM5Nzc1Mjk=", "number": 8685, "title": "Unknown CMake command \"cuda_select_nvcc_arch_flags\".", "user": {"login": "Nigel-Amers", "id": 14248498, "node_id": "MDQ6VXNlcjE0MjQ4NDk4", "avatar_url": "https://avatars3.githubusercontent.com/u/14248498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nigel-Amers", "html_url": "https://github.com/Nigel-Amers", "followers_url": "https://api.github.com/users/Nigel-Amers/followers", "following_url": "https://api.github.com/users/Nigel-Amers/following{/other_user}", "gists_url": "https://api.github.com/users/Nigel-Amers/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nigel-Amers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nigel-Amers/subscriptions", "organizations_url": "https://api.github.com/users/Nigel-Amers/orgs", "repos_url": "https://api.github.com/users/Nigel-Amers/repos", "events_url": "https://api.github.com/users/Nigel-Amers/events{/privacy}", "received_events_url": "https://api.github.com/users/Nigel-Amers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-06-20T08:38:45Z", "updated_at": "2018-06-22T00:30:08Z", "closed_at": "2018-06-22T00:30:08Z", "author_association": "NONE", "body_html": "<ul>\n<li>CMake version:3.5.1</li>\n</ul>\n<pre><code>(torchsource) amers@dp:~/pytorch$ python setup.py install\nrunning install\nrunning build_deps\n+ USE_CUDA=0\n+ USE_ROCM=0\n+ USE_NNPACK=0\n+ USE_MKLDNN=0\n+ USE_GLOO_IBVERBS=0\n+ USE_DISTRIBUTED_MW=0\n+ FULL_CAFFE2=0\n+ [[ 9 -gt 0 ]]\n+ case \"$1\" in\n+ USE_CUDA=1\n+ shift\n+ [[ 8 -gt 0 ]]\n+ case \"$1\" in\n+ USE_NNPACK=1\n+ shift\n+ [[ 7 -gt 0 ]]\n+ case \"$1\" in\n+ break\n+ CMAKE_INSTALL='make install'\n+ USER_CFLAGS=\n+ USER_LDFLAGS=\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n++ dirname tools/build_pytorch_libs.sh\n+ cd tools/..\n+++ pwd\n++ printf '%q\\n' /home/amers/pytorch\n+ PWD=/home/amers/pytorch\n+ BASE_DIR=/home/amers/pytorch\n+ TORCH_LIB_DIR=/home/amers/pytorch/torch/lib\n+ INSTALL_DIR=/home/amers/pytorch/torch/lib/tmp_install\n+ THIRD_PARTY_DIR=/home/amers/pytorch/third_party\n+ CMAKE_VERSION=cmake\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\"'\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ LDFLAGS='-L\"/home/amers/pytorch/torch/lib/tmp_install/lib\" '\n+ LD_POSTFIX=.so\n++ uname\n+ [[ Linux == \\D\\a\\r\\w\\i\\n ]]\n+ LDFLAGS='-L\"/home/amers/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\n+ CPP_FLAGS=' -std=c++11 '\n+ GLOO_FLAGS=\n+ THD_FLAGS=\n+ NCCL_ROOT_DIR=/home/amers/pytorch/torch/lib/tmp_install\n+ [[ 1 -eq 1 ]]\n+ GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/amers/pytorch/torch/lib/tmp_install'\n+ [[ 0 -eq 1 ]]\n+ [[ 0 -eq 1 ]]\n+ CWRAP_FILES='/home/amers/pytorch/torch/lib/ATen/Declarations.cwrap;/home/amers/pytorch/torch/lib/THNN/generic/THNN.h;/home/amers/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/amers/pytorch/torch/lib/ATen/nn.yaml'\n+ CUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ [[ -z '' ]]\n+ CUDA_DEVICE_DEBUG=0\n+ '[' -z 12 ']'\n+ BUILD_TYPE=Release\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ echo 'Building in Release mode'\nBuilding in Release mode\n+ mkdir -p torch/lib/tmp_install\n+ for arg in '\"$@\"'\n+ [[ nccl == \\n\\c\\c\\l ]]\n+ pushd /home/amers/pytorch/third_party\n~/pytorch/third_party ~/pytorch\n+ build_nccl\n+ mkdir -p build/nccl\n+ pushd build/nccl\n~/pytorch/third_party/build/nccl ~/pytorch/third_party ~/pytorch\n+ cmake ../../nccl -DCMAKE_MODULE_PATH=/home/amers/pytorch/cmake/FindCUDA -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/amers/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/amers/pytorch/cmake/public/utils.cmake\n-- The C compiler identification is GNU 5.4.0\n-- The CXX compiler identification is GNU 5.4.0\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Looking for pthread.h\n-- Looking for pthread.h - found\n-- Looking for pthread_create\n-- Looking for pthread_create - not found\n-- Looking for pthread_create in pthreads\n-- Looking for pthread_create in pthreads - not found\n-- Looking for pthread_create in pthread\n-- Looking for pthread_create in pthread - found\n-- Found Threads: TRUE  \n-- Found CUDA: /usr/local/cuda (found suitable version \"8.0\", minimum required is \"7.0\") \nCMake Error at /home/amers/pytorch/cmake/public/utils.cmake:164 (cuda_select_nvcc_arch_flags):\n  Unknown CMake command \"cuda_select_nvcc_arch_flags\".\nCall Stack (most recent call first):\n  CMakeLists.txt:9 (torch_cuda_get_nvcc_gencode_flag)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/home/amers/pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".\nSee also \"/home/amers/pytorch/third_party/build/nccl/CMakeFiles/CMakeError.log\".\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\n(torchsource) amers@dp:~/pytorch$ cmake --version\ncmake version 3.5.1\n</code></pre>\n<p>CMake suite maintained and supported by Kitware (kitware.com/cmake).</p>", "body_text": "CMake version:3.5.1\n\n(torchsource) amers@dp:~/pytorch$ python setup.py install\nrunning install\nrunning build_deps\n+ USE_CUDA=0\n+ USE_ROCM=0\n+ USE_NNPACK=0\n+ USE_MKLDNN=0\n+ USE_GLOO_IBVERBS=0\n+ USE_DISTRIBUTED_MW=0\n+ FULL_CAFFE2=0\n+ [[ 9 -gt 0 ]]\n+ case \"$1\" in\n+ USE_CUDA=1\n+ shift\n+ [[ 8 -gt 0 ]]\n+ case \"$1\" in\n+ USE_NNPACK=1\n+ shift\n+ [[ 7 -gt 0 ]]\n+ case \"$1\" in\n+ break\n+ CMAKE_INSTALL='make install'\n+ USER_CFLAGS=\n+ USER_LDFLAGS=\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n++ dirname tools/build_pytorch_libs.sh\n+ cd tools/..\n+++ pwd\n++ printf '%q\\n' /home/amers/pytorch\n+ PWD=/home/amers/pytorch\n+ BASE_DIR=/home/amers/pytorch\n+ TORCH_LIB_DIR=/home/amers/pytorch/torch/lib\n+ INSTALL_DIR=/home/amers/pytorch/torch/lib/tmp_install\n+ THIRD_PARTY_DIR=/home/amers/pytorch/third_party\n+ CMAKE_VERSION=cmake\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\"'\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ LDFLAGS='-L\"/home/amers/pytorch/torch/lib/tmp_install/lib\" '\n+ LD_POSTFIX=.so\n++ uname\n+ [[ Linux == \\D\\a\\r\\w\\i\\n ]]\n+ LDFLAGS='-L\"/home/amers/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\n+ CPP_FLAGS=' -std=c++11 '\n+ GLOO_FLAGS=\n+ THD_FLAGS=\n+ NCCL_ROOT_DIR=/home/amers/pytorch/torch/lib/tmp_install\n+ [[ 1 -eq 1 ]]\n+ GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/amers/pytorch/torch/lib/tmp_install'\n+ [[ 0 -eq 1 ]]\n+ [[ 0 -eq 1 ]]\n+ CWRAP_FILES='/home/amers/pytorch/torch/lib/ATen/Declarations.cwrap;/home/amers/pytorch/torch/lib/THNN/generic/THNN.h;/home/amers/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/amers/pytorch/torch/lib/ATen/nn.yaml'\n+ CUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ [[ -z '' ]]\n+ CUDA_DEVICE_DEBUG=0\n+ '[' -z 12 ']'\n+ BUILD_TYPE=Release\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ echo 'Building in Release mode'\nBuilding in Release mode\n+ mkdir -p torch/lib/tmp_install\n+ for arg in '\"$@\"'\n+ [[ nccl == \\n\\c\\c\\l ]]\n+ pushd /home/amers/pytorch/third_party\n~/pytorch/third_party ~/pytorch\n+ build_nccl\n+ mkdir -p build/nccl\n+ pushd build/nccl\n~/pytorch/third_party/build/nccl ~/pytorch/third_party ~/pytorch\n+ cmake ../../nccl -DCMAKE_MODULE_PATH=/home/amers/pytorch/cmake/FindCUDA -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/amers/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/amers/pytorch/cmake/public/utils.cmake\n-- The C compiler identification is GNU 5.4.0\n-- The CXX compiler identification is GNU 5.4.0\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Looking for pthread.h\n-- Looking for pthread.h - found\n-- Looking for pthread_create\n-- Looking for pthread_create - not found\n-- Looking for pthread_create in pthreads\n-- Looking for pthread_create in pthreads - not found\n-- Looking for pthread_create in pthread\n-- Looking for pthread_create in pthread - found\n-- Found Threads: TRUE  \n-- Found CUDA: /usr/local/cuda (found suitable version \"8.0\", minimum required is \"7.0\") \nCMake Error at /home/amers/pytorch/cmake/public/utils.cmake:164 (cuda_select_nvcc_arch_flags):\n  Unknown CMake command \"cuda_select_nvcc_arch_flags\".\nCall Stack (most recent call first):\n  CMakeLists.txt:9 (torch_cuda_get_nvcc_gencode_flag)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/home/amers/pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".\nSee also \"/home/amers/pytorch/third_party/build/nccl/CMakeFiles/CMakeError.log\".\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\n(torchsource) amers@dp:~/pytorch$ cmake --version\ncmake version 3.5.1\n\nCMake suite maintained and supported by Kitware (kitware.com/cmake).", "body": "- CMake version:3.5.1\r\n\r\n```\r\n(torchsource) amers@dp:~/pytorch$ python setup.py install\r\nrunning install\r\nrunning build_deps\r\n+ USE_CUDA=0\r\n+ USE_ROCM=0\r\n+ USE_NNPACK=0\r\n+ USE_MKLDNN=0\r\n+ USE_GLOO_IBVERBS=0\r\n+ USE_DISTRIBUTED_MW=0\r\n+ FULL_CAFFE2=0\r\n+ [[ 9 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_CUDA=1\r\n+ shift\r\n+ [[ 8 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_NNPACK=1\r\n+ shift\r\n+ [[ 7 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ break\r\n+ CMAKE_INSTALL='make install'\r\n+ USER_CFLAGS=\r\n+ USER_LDFLAGS=\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n++ dirname tools/build_pytorch_libs.sh\r\n+ cd tools/..\r\n+++ pwd\r\n++ printf '%q\\n' /home/amers/pytorch\r\n+ PWD=/home/amers/pytorch\r\n+ BASE_DIR=/home/amers/pytorch\r\n+ TORCH_LIB_DIR=/home/amers/pytorch/torch/lib\r\n+ INSTALL_DIR=/home/amers/pytorch/torch/lib/tmp_install\r\n+ THIRD_PARTY_DIR=/home/amers/pytorch/third_party\r\n+ CMAKE_VERSION=cmake\r\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\"'\r\n+ C_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ LDFLAGS='-L\"/home/amers/pytorch/torch/lib/tmp_install/lib\" '\r\n+ LD_POSTFIX=.so\r\n++ uname\r\n+ [[ Linux == \\D\\a\\r\\w\\i\\n ]]\r\n+ LDFLAGS='-L\"/home/amers/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\r\n+ CPP_FLAGS=' -std=c++11 '\r\n+ GLOO_FLAGS=\r\n+ THD_FLAGS=\r\n+ NCCL_ROOT_DIR=/home/amers/pytorch/torch/lib/tmp_install\r\n+ [[ 1 -eq 1 ]]\r\n+ GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR=/home/amers/pytorch/torch/lib/tmp_install'\r\n+ [[ 0 -eq 1 ]]\r\n+ [[ 0 -eq 1 ]]\r\n+ CWRAP_FILES='/home/amers/pytorch/torch/lib/ATen/Declarations.cwrap;/home/amers/pytorch/torch/lib/THNN/generic/THNN.h;/home/amers/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/home/amers/pytorch/torch/lib/ATen/nn.yaml'\r\n+ CUDA_NVCC_FLAGS=' -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ [[ -z '' ]]\r\n+ CUDA_DEVICE_DEBUG=0\r\n+ '[' -z 12 ']'\r\n+ BUILD_TYPE=Release\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ echo 'Building in Release mode'\r\nBuilding in Release mode\r\n+ mkdir -p torch/lib/tmp_install\r\n+ for arg in '\"$@\"'\r\n+ [[ nccl == \\n\\c\\c\\l ]]\r\n+ pushd /home/amers/pytorch/third_party\r\n~/pytorch/third_party ~/pytorch\r\n+ build_nccl\r\n+ mkdir -p build/nccl\r\n+ pushd build/nccl\r\n~/pytorch/third_party/build/nccl ~/pytorch/third_party ~/pytorch\r\n+ cmake ../../nccl -DCMAKE_MODULE_PATH=/home/amers/pytorch/cmake/FindCUDA -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/home/amers/pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -DTH_INDEX_BASE=0 -I\"/home/amers/pytorch/torch/lib/tmp_install/include\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/TH\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THS\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/home/amers/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH=/home/amers/pytorch/cmake/public/utils.cmake\r\n-- The C compiler identification is GNU 5.4.0\r\n-- The CXX compiler identification is GNU 5.4.0\r\n-- Check for working C compiler: /usr/bin/cc\r\n-- Check for working C compiler: /usr/bin/cc -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Check for working CXX compiler: /usr/bin/c++\r\n-- Check for working CXX compiler: /usr/bin/c++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Looking for pthread.h\r\n-- Looking for pthread.h - found\r\n-- Looking for pthread_create\r\n-- Looking for pthread_create - not found\r\n-- Looking for pthread_create in pthreads\r\n-- Looking for pthread_create in pthreads - not found\r\n-- Looking for pthread_create in pthread\r\n-- Looking for pthread_create in pthread - found\r\n-- Found Threads: TRUE  \r\n-- Found CUDA: /usr/local/cuda (found suitable version \"8.0\", minimum required is \"7.0\") \r\nCMake Error at /home/amers/pytorch/cmake/public/utils.cmake:164 (cuda_select_nvcc_arch_flags):\r\n  Unknown CMake command \"cuda_select_nvcc_arch_flags\".\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:9 (torch_cuda_get_nvcc_gencode_flag)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"/home/amers/pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".\r\nSee also \"/home/amers/pytorch/third_party/build/nccl/CMakeFiles/CMakeError.log\".\r\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\r\n(torchsource) amers@dp:~/pytorch$ cmake --version\r\ncmake version 3.5.1\r\n```\r\n\r\nCMake suite maintained and supported by Kitware (kitware.com/cmake).\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/303692200", "html_url": "https://github.com/pytorch/pytorch/pull/1594#issuecomment-303692200", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1594", "id": 303692200, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzY5MjIwMA==", "user": {"login": "aromnvidia", "id": 26991072, "node_id": "MDQ6VXNlcjI2OTkxMDcy", "avatar_url": "https://avatars3.githubusercontent.com/u/26991072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aromnvidia", "html_url": "https://github.com/aromnvidia", "followers_url": "https://api.github.com/users/aromnvidia/followers", "following_url": "https://api.github.com/users/aromnvidia/following{/other_user}", "gists_url": "https://api.github.com/users/aromnvidia/gists{/gist_id}", "starred_url": "https://api.github.com/users/aromnvidia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aromnvidia/subscriptions", "organizations_url": "https://api.github.com/users/aromnvidia/orgs", "repos_url": "https://api.github.com/users/aromnvidia/repos", "events_url": "https://api.github.com/users/aromnvidia/events{/privacy}", "received_events_url": "https://api.github.com/users/aromnvidia/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-24T11:04:19Z", "updated_at": "2017-05-24T11:04:19Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Sorry, Adam. Removed your comment by mistake. I thought I remove mine.</p>\n<p>I thought it's not the right place to call emptyCache after <code>CHECK(cudnnFindConvolutionForwardAlgorithmEx(handle, conv.idesc.desc, in..</code>. We will fall into deadlock on <code>cuda_free_mutex</code>. I'd suggested to flush the cache in <code>chooseAlgorithm()</code> after <code>findAlgorithm(state, handle, conv, benchmark, in, out, wght, algo);</code></p>", "body_text": "Sorry, Adam. Removed your comment by mistake. I thought I remove mine.\nI thought it's not the right place to call emptyCache after CHECK(cudnnFindConvolutionForwardAlgorithmEx(handle, conv.idesc.desc, in... We will fall into deadlock on cuda_free_mutex. I'd suggested to flush the cache in chooseAlgorithm() after findAlgorithm(state, handle, conv, benchmark, in, out, wght, algo);", "body": "Sorry, Adam. Removed your comment by mistake. I thought I remove mine.\r\n\r\nI thought it's not the right place to call emptyCache after `CHECK(cudnnFindConvolutionForwardAlgorithmEx(handle, conv.idesc.desc, in..`. We will fall into deadlock on `cuda_free_mutex`. I'd suggested to flush the cache in `chooseAlgorithm()` after `findAlgorithm(state, handle, conv, benchmark, in, out, wght, algo);` "}
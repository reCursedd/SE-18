{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/153817287", "pull_request_review_id": 79881942, "id": 153817287, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MzgxNzI4Nw==", "diff_hunk": "@@ -0,0 +1,213 @@\n+#include \"ATen/Check.h\"\n+\n+#include \"ATen/ATen.h\"\n+\n+namespace at {\n+\n+namespace {\n+  std::vector<TensorArg> filterDefined(ArrayRef<TensorArg> ts) {", "path": "aten/src/ATen/Check.cpp", "position": null, "original_position": 8, "commit_id": "6c637bca42913c8377068a1bee874b2160c7f6c1", "original_commit_id": "bb46318fddcce1244d22a0a131f7b384d31dedb5", "user": {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, "body": "Keep in mind this does 2*N atomic adds and 2 mallocs for every call to to a vararg checking function. This seems expecially bad if ts was an initializer list that had no allocations to begin with. This is probably fine for cudnn, so no need for changes now, but it is probably not what we want for smaller kernels. This can be fixed by putting the `defined` calls the individual checker functions.", "created_at": "2017-11-29T15:19:15Z", "updated_at": "2018-11-23T15:36:57Z", "html_url": "https://github.com/pytorch/pytorch/pull/3666#discussion_r153817287", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/3666", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/153817287"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/3666#discussion_r153817287"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/3666"}}, "body_html": "<p>Keep in mind this does 2*N atomic adds and 2 mallocs for every call to to a vararg checking function. This seems expecially bad if ts was an initializer list that had no allocations to begin with. This is probably fine for cudnn, so no need for changes now, but it is probably not what we want for smaller kernels. This can be fixed by putting the <code>defined</code> calls the individual checker functions.</p>", "body_text": "Keep in mind this does 2*N atomic adds and 2 mallocs for every call to to a vararg checking function. This seems expecially bad if ts was an initializer list that had no allocations to begin with. This is probably fine for cudnn, so no need for changes now, but it is probably not what we want for smaller kernels. This can be fixed by putting the defined calls the individual checker functions."}
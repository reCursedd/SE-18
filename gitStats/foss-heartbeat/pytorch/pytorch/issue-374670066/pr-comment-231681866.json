{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/231681866", "pull_request_review_id": 172696539, "id": 231681866, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMTY4MTg2Ng==", "diff_hunk": "@@ -678,7 +700,13 @@ struct InterpreterStateImpl {\n         }\n     }\n     current_pc = pc;\n+    if (stack.size() > 0) {", "path": "torch/csrc/jit/interpreter.cpp", "position": null, "original_position": 59, "commit_id": "928476a76fc9249e71a8a523919ab91bc49e5b2e", "original_commit_id": "eba61b41862c42d186e6bf317d356c00ef197abd", "user": {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, "body": "The stack is not guaranteed to be empty on entry in the interpreter. You can figure out how many things are returned by the interpreter by looking at the number of outputs in the original graph, and saving that number in Code. Also, there may be more than 1 output. \r\n\r\n```\r\nif(num_outputs == 1)\r\n  future->markCompleted(stack.back());\r\nelse\r\n  future->markCompleted(Tuple::create(peekSlice(stack,0, num_outputs))\r\n```", "created_at": "2018-11-07T21:23:40Z", "updated_at": "2018-11-23T15:54:28Z", "html_url": "https://github.com/pytorch/pytorch/pull/13212#discussion_r231681866", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/13212", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/231681866"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/13212#discussion_r231681866"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/13212"}}, "body_html": "<p>The stack is not guaranteed to be empty on entry in the interpreter. You can figure out how many things are returned by the interpreter by looking at the number of outputs in the original graph, and saving that number in Code. Also, there may be more than 1 output.</p>\n<pre><code>if(num_outputs == 1)\n  future-&gt;markCompleted(stack.back());\nelse\n  future-&gt;markCompleted(Tuple::create(peekSlice(stack,0, num_outputs))\n</code></pre>", "body_text": "The stack is not guaranteed to be empty on entry in the interpreter. You can figure out how many things are returned by the interpreter by looking at the number of outputs in the original graph, and saving that number in Code. Also, there may be more than 1 output.\nif(num_outputs == 1)\n  future->markCompleted(stack.back());\nelse\n  future->markCompleted(Tuple::create(peekSlice(stack,0, num_outputs))"}
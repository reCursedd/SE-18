{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7374", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7374/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7374/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7374/events", "html_url": "https://github.com/pytorch/pytorch/issues/7374", "id": 321232488, "node_id": "MDU6SXNzdWUzMjEyMzI0ODg=", "number": 7374, "title": "[Caffe2] Can't use resnet50_trainer.py through redis.", "user": {"login": "joey3639570", "id": 33180739, "node_id": "MDQ6VXNlcjMzMTgwNzM5", "avatar_url": "https://avatars2.githubusercontent.com/u/33180739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joey3639570", "html_url": "https://github.com/joey3639570", "followers_url": "https://api.github.com/users/joey3639570/followers", "following_url": "https://api.github.com/users/joey3639570/following{/other_user}", "gists_url": "https://api.github.com/users/joey3639570/gists{/gist_id}", "starred_url": "https://api.github.com/users/joey3639570/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joey3639570/subscriptions", "organizations_url": "https://api.github.com/users/joey3639570/orgs", "repos_url": "https://api.github.com/users/joey3639570/repos", "events_url": "https://api.github.com/users/joey3639570/events{/privacy}", "received_events_url": "https://api.github.com/users/joey3639570/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-05-08T15:20:45Z", "updated_at": "2018-05-08T17:32:18Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>I was trying to use resnet50_trainer.py to do distributed training.<br>\nHowever, I encountered this problem.</p>\n<blockquote>\n<p>RuntimeError: [enforce fail at operator.cc:185] op. Cannot create operator of type 'RedisStoreHandlerCreate' on the device 'CPU'. Verify that implementation for the corresponding device exist. It might also happen if the binary is not linked with the operator implementation code. If Python frontend is used it might happen if dyndep.InitOpsLibrary call is missing. Operator def: output: \"store_handler\" name: \"\" type: \"RedisStoreHandlerCreate\" arg { name: \"host\" s: \"192.168.1.24\" } arg { name: \"prefix\" s: \"1\" } arg { name: \"port\" i: 6379 }</p>\n</blockquote>\n<p>I am able to run resnet50_trainer.py on single machine,<br>\nand I'm able to connect to the redis host through<br>\n<code>redis-cli -h 192.168.1.24 -p 6379</code><br>\nPlease give me some help.</p>\n<h2>Code example</h2>\n<p>python resnet50_trainer.py --train_data /home/cch/Downloads/Downloads/imagenet_cars_boats_train/ --batch_size 1 --run_id 1 --redis_host 192.168.1.24 --redis_port 6379 --num_shards 2 --shard_id 1</p>\n<ul>\n<li>PyTorch or Caffe2:</li>\n<li>How you installed PyTorch (conda, pip, source):source</li>\n<li>Build command you used (if compiling from source): cmake .. -DCUDA_ARCH_NAME=Manual -DCUDA_ARCH_BIN=\"50\" -DCUDA_ARCH_PTX=\"50\" -DUSE_NNPACK=OFF -DUSE_ROCKSDB=OFF -DUSE_GLOO=ON -DUSE_REDIS=ON -DUSE_IBVERBS=ON -DUSE_MPI=OFF</li>\n<li>OS:Centos6.9</li>\n<li>Python version:2.7.14</li>\n<li>CUDA/cuDNN version:9.0/7.0</li>\n<li>GCC version (if compiling from source):4.8.5</li>\n<li>CMake version:3.11.1</li>\n</ul>", "body_text": "Issue description\nI was trying to use resnet50_trainer.py to do distributed training.\nHowever, I encountered this problem.\n\nRuntimeError: [enforce fail at operator.cc:185] op. Cannot create operator of type 'RedisStoreHandlerCreate' on the device 'CPU'. Verify that implementation for the corresponding device exist. It might also happen if the binary is not linked with the operator implementation code. If Python frontend is used it might happen if dyndep.InitOpsLibrary call is missing. Operator def: output: \"store_handler\" name: \"\" type: \"RedisStoreHandlerCreate\" arg { name: \"host\" s: \"192.168.1.24\" } arg { name: \"prefix\" s: \"1\" } arg { name: \"port\" i: 6379 }\n\nI am able to run resnet50_trainer.py on single machine,\nand I'm able to connect to the redis host through\nredis-cli -h 192.168.1.24 -p 6379\nPlease give me some help.\nCode example\npython resnet50_trainer.py --train_data /home/cch/Downloads/Downloads/imagenet_cars_boats_train/ --batch_size 1 --run_id 1 --redis_host 192.168.1.24 --redis_port 6379 --num_shards 2 --shard_id 1\n\nPyTorch or Caffe2:\nHow you installed PyTorch (conda, pip, source):source\nBuild command you used (if compiling from source): cmake .. -DCUDA_ARCH_NAME=Manual -DCUDA_ARCH_BIN=\"50\" -DCUDA_ARCH_PTX=\"50\" -DUSE_NNPACK=OFF -DUSE_ROCKSDB=OFF -DUSE_GLOO=ON -DUSE_REDIS=ON -DUSE_IBVERBS=ON -DUSE_MPI=OFF\nOS:Centos6.9\nPython version:2.7.14\nCUDA/cuDNN version:9.0/7.0\nGCC version (if compiling from source):4.8.5\nCMake version:3.11.1", "body": "## Issue description\r\nI was trying to use resnet50_trainer.py to do distributed training.\r\nHowever, I encountered this problem.\r\n\r\n> RuntimeError: [enforce fail at operator.cc:185] op. Cannot create operator of type 'RedisStoreHandlerCreate' on the device 'CPU'. Verify that implementation for the corresponding device exist. It might also happen if the binary is not linked with the operator implementation code. If Python frontend is used it might happen if dyndep.InitOpsLibrary call is missing. Operator def: output: \"store_handler\" name: \"\" type: \"RedisStoreHandlerCreate\" arg { name: \"host\" s: \"192.168.1.24\" } arg { name: \"prefix\" s: \"1\" } arg { name: \"port\" i: 6379 }\r\n\r\nI am able to run resnet50_trainer.py on single machine, \r\nand I'm able to connect to the redis host through \r\n`redis-cli -h 192.168.1.24 -p 6379`\r\nPlease give me some help.\r\n\r\n## Code example\r\npython resnet50_trainer.py --train_data /home/cch/Downloads/Downloads/imagenet_cars_boats_train/ --batch_size 1 --run_id 1 --redis_host 192.168.1.24 --redis_port 6379 --num_shards 2 --shard_id 1\r\n\r\n\r\n- PyTorch or Caffe2:\r\n- How you installed PyTorch (conda, pip, source):source\r\n- Build command you used (if compiling from source): cmake .. -DCUDA_ARCH_NAME=Manual -DCUDA_ARCH_BIN=\"50\" -DCUDA_ARCH_PTX=\"50\" -DUSE_NNPACK=OFF -DUSE_ROCKSDB=OFF -DUSE_GLOO=ON -DUSE_REDIS=ON -DUSE_IBVERBS=ON -DUSE_MPI=OFF\r\n- OS:Centos6.9\r\n- Python version:2.7.14\r\n- CUDA/cuDNN version:9.0/7.0\r\n- GCC version (if compiling from source):4.8.5\r\n- CMake version:3.11.1\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9086", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9086/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9086/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9086/events", "html_url": "https://github.com/pytorch/pytorch/issues/9086", "id": 337341140, "node_id": "MDU6SXNzdWUzMzczNDExNDA=", "number": 9086, "title": "test_ind_worker_queue: Address already in use / Sometimes hangs", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-02T01:22:24Z", "updated_at": "2018-07-19T13:41:15Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>Intermittent OS X failure:</p>\n<pre><code>15:29:51 test_ind_worker_queue (__main__.TestIndividualWorkerQueue) ... libc++abi.dylib: terminating with uncaught exception of type std::__1::system_error: Address already in use\n15:29:53 Process Process-48:\n15:29:53 Traceback (most recent call last):\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/process.py\", line 258, in _bootstrap\n15:29:53     self.run()\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/process.py\", line 93, in run\n15:29:53     self._target(*self._args, **self._kwargs)\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 110, in _worker_loop\n15:29:53     data_queue.put((idx, samples))\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/queues.py\", line 341, in put\n15:29:53     obj = _ForkingPickler.dumps(obj)\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/reduction.py\", line 51, in dumps\n15:29:53     cls(buf, protocol).dump(obj)\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/multiprocessing/reductions.py\", line 112, in reduce_storage\n15:29:53     metadata = storage._share_filename_()\n15:29:53 RuntimeError: std::exception at /private/var/lib/jenkins/workspace/pytorch-builds/pytorch-macos-10.13-py3-build/torch/lib/libshm/core.cpp:125\n15:29:53 ERROR\n15:29:53 test_shuffle_pin_memory (__main__.TestStringDataLoader) ... skipped 'CUDA unavailable'\n15:29:53 test_getitem (__main__.TestTensorDataset) ... ok\n15:29:53 test_getitem_1d (__main__.TestTensorDataset) ... ok\n15:29:53 test_len (__main__.TestTensorDataset) ... ok\n15:29:53 test_many_tensors (__main__.TestTensorDataset) ... ok\n15:29:54 test_single_tensor (__main__.TestTensorDataset) ... ok\n15:29:54 \n15:29:54 ======================================================================\n15:29:54 ERROR: test_ind_worker_queue (__main__.TestIndividualWorkerQueue)\n15:29:54 ----------------------------------------------------------------------\n15:29:54 Traceback (most recent call last):\n15:29:54   File \"test_dataloader.py\", line 714, in test_ind_worker_queue\n15:29:54     self._run_ind_worker_queue_test(batch_size=batch_size, num_workers=num_workers)\n15:29:54   File \"test_dataloader.py\", line 704, in _run_ind_worker_queue_test\n15:29:54     for i, (worker_ids, sample) in enumerate(loader):\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 330, in __next__\n15:29:54     idx, batch = self._get_batch()\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 309, in _get_batch\n15:29:54     return self.data_queue.get()\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/queues.py\", line 335, in get\n15:29:54     res = self._reader.recv_bytes()\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 216, in recv_bytes\n15:29:54     buf = self._recv_bytes(maxlength)\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 407, in _recv_bytes\n15:29:54     buf = self._recv(4)\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 379, in _recv\n15:29:54     chunk = read(handle, remaining)\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 227, in handler\n15:29:54     _error_if_any_worker_fails()\n15:29:54 RuntimeError: DataLoader worker (pid 8952) exited unexpectedly with exit code 1.\n15:29:54 \n</code></pre>\n<p>Sample log: <a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-macos-10.13-py3-test1/2484/console\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-macos-10.13-py3-test1/2484/console</a></p>", "body_text": "Intermittent OS X failure:\n15:29:51 test_ind_worker_queue (__main__.TestIndividualWorkerQueue) ... libc++abi.dylib: terminating with uncaught exception of type std::__1::system_error: Address already in use\n15:29:53 Process Process-48:\n15:29:53 Traceback (most recent call last):\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/process.py\", line 258, in _bootstrap\n15:29:53     self.run()\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/process.py\", line 93, in run\n15:29:53     self._target(*self._args, **self._kwargs)\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 110, in _worker_loop\n15:29:53     data_queue.put((idx, samples))\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/queues.py\", line 341, in put\n15:29:53     obj = _ForkingPickler.dumps(obj)\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/reduction.py\", line 51, in dumps\n15:29:53     cls(buf, protocol).dump(obj)\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/multiprocessing/reductions.py\", line 112, in reduce_storage\n15:29:53     metadata = storage._share_filename_()\n15:29:53 RuntimeError: std::exception at /private/var/lib/jenkins/workspace/pytorch-builds/pytorch-macos-10.13-py3-build/torch/lib/libshm/core.cpp:125\n15:29:53 ERROR\n15:29:53 test_shuffle_pin_memory (__main__.TestStringDataLoader) ... skipped 'CUDA unavailable'\n15:29:53 test_getitem (__main__.TestTensorDataset) ... ok\n15:29:53 test_getitem_1d (__main__.TestTensorDataset) ... ok\n15:29:53 test_len (__main__.TestTensorDataset) ... ok\n15:29:53 test_many_tensors (__main__.TestTensorDataset) ... ok\n15:29:54 test_single_tensor (__main__.TestTensorDataset) ... ok\n15:29:54 \n15:29:54 ======================================================================\n15:29:54 ERROR: test_ind_worker_queue (__main__.TestIndividualWorkerQueue)\n15:29:54 ----------------------------------------------------------------------\n15:29:54 Traceback (most recent call last):\n15:29:54   File \"test_dataloader.py\", line 714, in test_ind_worker_queue\n15:29:54     self._run_ind_worker_queue_test(batch_size=batch_size, num_workers=num_workers)\n15:29:54   File \"test_dataloader.py\", line 704, in _run_ind_worker_queue_test\n15:29:54     for i, (worker_ids, sample) in enumerate(loader):\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 330, in __next__\n15:29:54     idx, batch = self._get_batch()\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 309, in _get_batch\n15:29:54     return self.data_queue.get()\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/queues.py\", line 335, in get\n15:29:54     res = self._reader.recv_bytes()\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 216, in recv_bytes\n15:29:54     buf = self._recv_bytes(maxlength)\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 407, in _recv_bytes\n15:29:54     buf = self._recv(4)\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 379, in _recv\n15:29:54     chunk = read(handle, remaining)\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 227, in handler\n15:29:54     _error_if_any_worker_fails()\n15:29:54 RuntimeError: DataLoader worker (pid 8952) exited unexpectedly with exit code 1.\n15:29:54 \n\nSample log: https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-macos-10.13-py3-test1/2484/console", "body": "Intermittent OS X failure:\r\n\r\n```\r\n15:29:51 test_ind_worker_queue (__main__.TestIndividualWorkerQueue) ... libc++abi.dylib: terminating with uncaught exception of type std::__1::system_error: Address already in use\r\n15:29:53 Process Process-48:\r\n15:29:53 Traceback (most recent call last):\r\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/process.py\", line 258, in _bootstrap\r\n15:29:53     self.run()\r\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/process.py\", line 93, in run\r\n15:29:53     self._target(*self._args, **self._kwargs)\r\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 110, in _worker_loop\r\n15:29:53     data_queue.put((idx, samples))\r\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/queues.py\", line 341, in put\r\n15:29:53     obj = _ForkingPickler.dumps(obj)\r\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/reduction.py\", line 51, in dumps\r\n15:29:53     cls(buf, protocol).dump(obj)\r\n15:29:53   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/multiprocessing/reductions.py\", line 112, in reduce_storage\r\n15:29:53     metadata = storage._share_filename_()\r\n15:29:53 RuntimeError: std::exception at /private/var/lib/jenkins/workspace/pytorch-builds/pytorch-macos-10.13-py3-build/torch/lib/libshm/core.cpp:125\r\n15:29:53 ERROR\r\n15:29:53 test_shuffle_pin_memory (__main__.TestStringDataLoader) ... skipped 'CUDA unavailable'\r\n15:29:53 test_getitem (__main__.TestTensorDataset) ... ok\r\n15:29:53 test_getitem_1d (__main__.TestTensorDataset) ... ok\r\n15:29:53 test_len (__main__.TestTensorDataset) ... ok\r\n15:29:53 test_many_tensors (__main__.TestTensorDataset) ... ok\r\n15:29:54 test_single_tensor (__main__.TestTensorDataset) ... ok\r\n15:29:54 \r\n15:29:54 ======================================================================\r\n15:29:54 ERROR: test_ind_worker_queue (__main__.TestIndividualWorkerQueue)\r\n15:29:54 ----------------------------------------------------------------------\r\n15:29:54 Traceback (most recent call last):\r\n15:29:54   File \"test_dataloader.py\", line 714, in test_ind_worker_queue\r\n15:29:54     self._run_ind_worker_queue_test(batch_size=batch_size, num_workers=num_workers)\r\n15:29:54   File \"test_dataloader.py\", line 704, in _run_ind_worker_queue_test\r\n15:29:54     for i, (worker_ids, sample) in enumerate(loader):\r\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 330, in __next__\r\n15:29:54     idx, batch = self._get_batch()\r\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 309, in _get_batch\r\n15:29:54     return self.data_queue.get()\r\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/queues.py\", line 335, in get\r\n15:29:54     res = self._reader.recv_bytes()\r\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 216, in recv_bytes\r\n15:29:54     buf = self._recv_bytes(maxlength)\r\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 407, in _recv_bytes\r\n15:29:54     buf = self._recv(4)\r\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 379, in _recv\r\n15:29:54     chunk = read(handle, remaining)\r\n15:29:54   File \"/var/lib/jenkins/pytorch-ci-env/miniconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 227, in handler\r\n15:29:54     _error_if_any_worker_fails()\r\n15:29:54 RuntimeError: DataLoader worker (pid 8952) exited unexpectedly with exit code 1.\r\n15:29:54 \r\n```\r\n\r\nSample log: https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-macos-10.13-py3-test1/2484/console"}
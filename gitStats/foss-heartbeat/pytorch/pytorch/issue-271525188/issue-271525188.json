{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3506", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3506/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3506/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3506/events", "html_url": "https://github.com/pytorch/pytorch/issues/3506", "id": 271525188, "node_id": "MDU6SXNzdWUyNzE1MjUxODg=", "number": 3506, "title": "nn.Embedding with sparse=True ignores padding_idx", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-06T15:57:58Z", "updated_at": "2017-11-23T00:04:29Z", "closed_at": "2017-11-23T00:04:29Z", "author_association": "MEMBER", "body_html": "<p>As reported here <a href=\"https://discuss.pytorch.org/t/bug-of-nn-embedding-when-sparse-true-and-padding-idx-is-set/9382\" rel=\"nofollow\">https://discuss.pytorch.org/t/bug-of-nn-embedding-when-sparse-true-and-padding-idx-is-set/9382</a> with repro.</p>\n<p>When sparse=True, padding_idx should probably error out (as the easiest solution).<br>\nAlternatively, the gradients for padding_idx indices should be zeroed out explicitly in the sparse=True backward codepath.</p>", "body_text": "As reported here https://discuss.pytorch.org/t/bug-of-nn-embedding-when-sparse-true-and-padding-idx-is-set/9382 with repro.\nWhen sparse=True, padding_idx should probably error out (as the easiest solution).\nAlternatively, the gradients for padding_idx indices should be zeroed out explicitly in the sparse=True backward codepath.", "body": "As reported here https://discuss.pytorch.org/t/bug-of-nn-embedding-when-sparse-true-and-padding-idx-is-set/9382 with repro.\r\n\r\nWhen sparse=True, padding_idx should probably error out (as the easiest solution).\r\nAlternatively, the gradients for padding_idx indices should be zeroed out explicitly in the sparse=True backward codepath."}
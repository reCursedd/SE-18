{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6432", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6432/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6432/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6432/events", "html_url": "https://github.com/pytorch/pytorch/issues/6432", "id": 312652918, "node_id": "MDU6SXNzdWUzMTI2NTI5MTg=", "number": 6432, "title": "[PyTorch] ReflectionPad2d illegal memory access", "user": {"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-04-09T19:17:44Z", "updated_at": "2018-04-10T14:37:11Z", "closed_at": "2018-04-10T14:37:11Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"highlight highlight-source-python\"><pre>Python <span class=\"pl-c1\">3.6</span>.4 <span class=\"pl-k\">|</span>Anaconda, Inc.<span class=\"pl-k\">|</span> (default, Jan <span class=\"pl-c1\">16</span> <span class=\"pl-c1\">2018</span>, <span class=\"pl-c1\">18</span>:<span class=\"pl-c1\">10</span>:<span class=\"pl-c1\">19</span>)\n[<span class=\"pl-c1\">GCC</span> <span class=\"pl-c1\">7.2</span>.0] on linux\nType <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>help<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>copyright<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>credits<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">or</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>license<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">for</span> more information.\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">import</span> torch\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> m <span class=\"pl-k\">=</span> torch.nn.ReflectionPad2d(<span class=\"pl-c1\">2</span>)\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> x <span class=\"pl-k\">=</span> torch.randn(<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">2</span>,<span class=\"pl-c1\">2</span>)\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> m(x)\n<span class=\"pl-k\">================================================================</span><span class=\"pl-k\">=</span>\n<span class=\"pl-k\">==</span><span class=\"pl-c1\">6656</span><span class=\"pl-k\">==</span><span class=\"pl-c1\">ERROR</span>: AddressSanitizer: heap<span class=\"pl-k\">-</span>buffer<span class=\"pl-k\">-</span>overflow on address <span class=\"pl-c1\"><span class=\"pl-k\">0x</span>6020000056e8</span> at pc <span class=\"pl-c1\"><span class=\"pl-k\">0x</span>7f8316f2e3b8</span> bp <span class=\"pl-c1\"><span class=\"pl-k\">0x</span>7ffe6c372690</span> sp <span class=\"pl-c1\"><span class=\"pl-k\">0x</span>7ffe6c372688</span>\n<span class=\"pl-c1\">READ</span> of size <span class=\"pl-c1\">4</span> at <span class=\"pl-c1\"><span class=\"pl-k\">0x</span>6020000056e8</span> thread T0\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>0 0x7f8316f2e3b7 in .omp_outlined..521 (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x16c43b7)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>1 0x7f832258dac2 in __kmp_invoke_microtask (/opt/conda/bin/../lib/libiomp5.so+0xb5ac2)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>2 0x7f832255c6ec in __kmp_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x846ec)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>3 0x7f83225347dd in __kmpc_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x5c7dd)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>4 0x7f8316edc880 in .omp_outlined..365 (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x1672880)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>5 0x7f832258dac2 in __kmp_invoke_microtask (/opt/conda/bin/../lib/libiomp5.so+0xb5ac2)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>6 0x7f832255c256 in __kmp_invoke_task_func (/opt/conda/bin/../lib/libiomp5.so+0x84256)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>7 0x7f832255d497 in __kmp_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x85497)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>8 0x7f83225347dd in __kmpc_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x5c7dd)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>9 0x7f8316edbccd in THNN_FloatSpatialReflectionPadding_updateOutput (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x167</span>\n<span class=\"pl-ii\">1ccd</span>)\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>10 0x7f8315e0146e in at::CPUFloatType::reflection_pad2d_forward(at::Tensor const&amp;, at::ArrayRef&lt;long&gt;) const (/opt/conda/lib/python3.6</span>\n<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>torch<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>libATen.so<span class=\"pl-k\">+</span><span class=\"pl-c1\"><span class=\"pl-k\">0x</span>59746e</span>)\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>11 0x7f8319077d95 in torch::autograd::VariableType::reflection_pad2d_forward(at::Tensor const&amp;, at::ArrayRef&lt;long&gt;) const /var/lib/jen</span>\nkins<span class=\"pl-k\">/</span>workspace<span class=\"pl-k\">/</span>torch<span class=\"pl-k\">/</span>csrc<span class=\"pl-k\">/</span>autograd<span class=\"pl-k\">/</span>generated<span class=\"pl-k\">/</span>VariableType.cpp:<span class=\"pl-c1\">14878</span>:<span class=\"pl-c1\">39</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>12 0x7f8315ff8140 in at::Type::reflection_pad2d(at::Tensor const&amp;, at::ArrayRef&lt;long&gt;) const (/opt/conda/lib/python3.6/site-packages/t</span>\norch<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>libATen.so<span class=\"pl-k\">+</span><span class=\"pl-c1\"><span class=\"pl-k\">0x</span>78e140</span>)\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>13 0x7f8319073fc1 in torch::autograd::VariableType::reflection_pad2d(at::Tensor const&amp;, at::ArrayRef&lt;long&gt;) const /var/lib/jenkins/wor</span>\nkspace<span class=\"pl-k\">/</span>torch<span class=\"pl-k\">/</span>csrc<span class=\"pl-k\">/</span>autograd<span class=\"pl-k\">/</span>generated<span class=\"pl-k\">/</span>VariableType.cpp:<span class=\"pl-c1\">14833</span>:<span class=\"pl-c1\">23</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>14 0x7f8319d548e3 in at::reflection_pad2d(at::Tensor const&amp;, at::ArrayRef&lt;long&gt;) /var/lib/jenkins/workspace/torch/lib/tmp_install/incl</span>\nude<span class=\"pl-k\">/</span>ATen<span class=\"pl-k\">/</span>Functions.h:<span class=\"pl-c1\">2499</span>:<span class=\"pl-c1\">29</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>15 0x7f8319d548e3 in torch::autograd::dispatch_reflection_pad2d(at::Tensor const&amp;, at::ArrayRef&lt;long&gt;) /var/lib/jenkins/workspace/torc</span>\nh<span class=\"pl-k\">/</span>csrc<span class=\"pl-k\">/</span>autograd<span class=\"pl-k\">/</span>generated<span class=\"pl-k\">/</span>python_nn_functions_dispatch.h:<span class=\"pl-c1\">423</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>16 0x7f8319cd88ec in torch::autograd::THPVariable_reflection_pad2d(_object*, _object*, _object*) /var/lib/jenkins/workspace/torch/csrc</span>\n<span class=\"pl-k\">/</span>autograd<span class=\"pl-k\">/</span>generated<span class=\"pl-k\">/</span>python_nn_functions.cpp:<span class=\"pl-c1\">694</span>:<span class=\"pl-c1\">19</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>17 0x563e63b1efd3 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10efd3)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>18 0x563e63bacbeb in call_function (/opt/conda/bin/python3.6+0x19cbeb)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>19 0x563e63bd1199 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c1199)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>20 0x563e63ba59a5 in _PyEval_EvalCodeWithName (/opt/conda/bin/python3.6+0x1959a5)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>21 0x563e63ba6a10 in fast_function (/opt/conda/bin/python3.6+0x196a10)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>22 0x563e63baccc4 in call_function (/opt/conda/bin/python3.6+0x19ccc4)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>23 0x563e63bd1199 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c1199)</span>\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>24 0x563e63ba6e4a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x196e4a)</span></pre></div>\n<p>Fix incoming.</p>", "body_text": "Python 3.6.4 |Anaconda, Inc.| (default, Jan 16 2018, 18:10:19)\n[GCC 7.2.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import torch\n>>> m = torch.nn.ReflectionPad2d(2)\n>>> x = torch.randn(1,1,2,2)\n>>> m(x)\n=================================================================\n==6656==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x6020000056e8 at pc 0x7f8316f2e3b8 bp 0x7ffe6c372690 sp 0x7ffe6c372688\nREAD of size 4 at 0x6020000056e8 thread T0\n    #0 0x7f8316f2e3b7 in .omp_outlined..521 (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x16c43b7)\n    #1 0x7f832258dac2 in __kmp_invoke_microtask (/opt/conda/bin/../lib/libiomp5.so+0xb5ac2)\n    #2 0x7f832255c6ec in __kmp_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x846ec)\n    #3 0x7f83225347dd in __kmpc_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x5c7dd)\n    #4 0x7f8316edc880 in .omp_outlined..365 (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x1672880)\n    #5 0x7f832258dac2 in __kmp_invoke_microtask (/opt/conda/bin/../lib/libiomp5.so+0xb5ac2)\n    #6 0x7f832255c256 in __kmp_invoke_task_func (/opt/conda/bin/../lib/libiomp5.so+0x84256)\n    #7 0x7f832255d497 in __kmp_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x85497)\n    #8 0x7f83225347dd in __kmpc_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x5c7dd)\n    #9 0x7f8316edbccd in THNN_FloatSpatialReflectionPadding_updateOutput (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x167\n1ccd)\n    #10 0x7f8315e0146e in at::CPUFloatType::reflection_pad2d_forward(at::Tensor const&, at::ArrayRef<long>) const (/opt/conda/lib/python3.6\n/site-packages/torch/lib/libATen.so+0x59746e)\n    #11 0x7f8319077d95 in torch::autograd::VariableType::reflection_pad2d_forward(at::Tensor const&, at::ArrayRef<long>) const /var/lib/jen\nkins/workspace/torch/csrc/autograd/generated/VariableType.cpp:14878:39\n    #12 0x7f8315ff8140 in at::Type::reflection_pad2d(at::Tensor const&, at::ArrayRef<long>) const (/opt/conda/lib/python3.6/site-packages/t\norch/lib/libATen.so+0x78e140)\n    #13 0x7f8319073fc1 in torch::autograd::VariableType::reflection_pad2d(at::Tensor const&, at::ArrayRef<long>) const /var/lib/jenkins/wor\nkspace/torch/csrc/autograd/generated/VariableType.cpp:14833:23\n    #14 0x7f8319d548e3 in at::reflection_pad2d(at::Tensor const&, at::ArrayRef<long>) /var/lib/jenkins/workspace/torch/lib/tmp_install/incl\nude/ATen/Functions.h:2499:29\n    #15 0x7f8319d548e3 in torch::autograd::dispatch_reflection_pad2d(at::Tensor const&, at::ArrayRef<long>) /var/lib/jenkins/workspace/torc\nh/csrc/autograd/generated/python_nn_functions_dispatch.h:423\n    #16 0x7f8319cd88ec in torch::autograd::THPVariable_reflection_pad2d(_object*, _object*, _object*) /var/lib/jenkins/workspace/torch/csrc\n/autograd/generated/python_nn_functions.cpp:694:19\n    #17 0x563e63b1efd3 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10efd3)\n    #18 0x563e63bacbeb in call_function (/opt/conda/bin/python3.6+0x19cbeb)\n    #19 0x563e63bd1199 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c1199)\n    #20 0x563e63ba59a5 in _PyEval_EvalCodeWithName (/opt/conda/bin/python3.6+0x1959a5)\n    #21 0x563e63ba6a10 in fast_function (/opt/conda/bin/python3.6+0x196a10)\n    #22 0x563e63baccc4 in call_function (/opt/conda/bin/python3.6+0x19ccc4)\n    #23 0x563e63bd1199 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c1199)\n    #24 0x563e63ba6e4a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x196e4a)\nFix incoming.", "body": "```python\r\nPython 3.6.4 |Anaconda, Inc.| (default, Jan 16 2018, 18:10:19)\r\n[GCC 7.2.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import torch\r\n>>> m = torch.nn.ReflectionPad2d(2)\r\n>>> x = torch.randn(1,1,2,2)\r\n>>> m(x)\r\n=================================================================\r\n==6656==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x6020000056e8 at pc 0x7f8316f2e3b8 bp 0x7ffe6c372690 sp 0x7ffe6c372688\r\nREAD of size 4 at 0x6020000056e8 thread T0\r\n    #0 0x7f8316f2e3b7 in .omp_outlined..521 (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x16c43b7)\r\n    #1 0x7f832258dac2 in __kmp_invoke_microtask (/opt/conda/bin/../lib/libiomp5.so+0xb5ac2)\r\n    #2 0x7f832255c6ec in __kmp_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x846ec)\r\n    #3 0x7f83225347dd in __kmpc_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x5c7dd)\r\n    #4 0x7f8316edc880 in .omp_outlined..365 (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x1672880)\r\n    #5 0x7f832258dac2 in __kmp_invoke_microtask (/opt/conda/bin/../lib/libiomp5.so+0xb5ac2)\r\n    #6 0x7f832255c256 in __kmp_invoke_task_func (/opt/conda/bin/../lib/libiomp5.so+0x84256)\r\n    #7 0x7f832255d497 in __kmp_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x85497)\r\n    #8 0x7f83225347dd in __kmpc_fork_call (/opt/conda/bin/../lib/libiomp5.so+0x5c7dd)\r\n    #9 0x7f8316edbccd in THNN_FloatSpatialReflectionPadding_updateOutput (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so+0x167\r\n1ccd)\r\n    #10 0x7f8315e0146e in at::CPUFloatType::reflection_pad2d_forward(at::Tensor const&, at::ArrayRef<long>) const (/opt/conda/lib/python3.6\r\n/site-packages/torch/lib/libATen.so+0x59746e)\r\n    #11 0x7f8319077d95 in torch::autograd::VariableType::reflection_pad2d_forward(at::Tensor const&, at::ArrayRef<long>) const /var/lib/jen\r\nkins/workspace/torch/csrc/autograd/generated/VariableType.cpp:14878:39\r\n    #12 0x7f8315ff8140 in at::Type::reflection_pad2d(at::Tensor const&, at::ArrayRef<long>) const (/opt/conda/lib/python3.6/site-packages/t\r\norch/lib/libATen.so+0x78e140)\r\n    #13 0x7f8319073fc1 in torch::autograd::VariableType::reflection_pad2d(at::Tensor const&, at::ArrayRef<long>) const /var/lib/jenkins/wor\r\nkspace/torch/csrc/autograd/generated/VariableType.cpp:14833:23\r\n    #14 0x7f8319d548e3 in at::reflection_pad2d(at::Tensor const&, at::ArrayRef<long>) /var/lib/jenkins/workspace/torch/lib/tmp_install/incl\r\nude/ATen/Functions.h:2499:29\r\n    #15 0x7f8319d548e3 in torch::autograd::dispatch_reflection_pad2d(at::Tensor const&, at::ArrayRef<long>) /var/lib/jenkins/workspace/torc\r\nh/csrc/autograd/generated/python_nn_functions_dispatch.h:423\r\n    #16 0x7f8319cd88ec in torch::autograd::THPVariable_reflection_pad2d(_object*, _object*, _object*) /var/lib/jenkins/workspace/torch/csrc\r\n/autograd/generated/python_nn_functions.cpp:694:19\r\n    #17 0x563e63b1efd3 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10efd3)\r\n    #18 0x563e63bacbeb in call_function (/opt/conda/bin/python3.6+0x19cbeb)\r\n    #19 0x563e63bd1199 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c1199)\r\n    #20 0x563e63ba59a5 in _PyEval_EvalCodeWithName (/opt/conda/bin/python3.6+0x1959a5)\r\n    #21 0x563e63ba6a10 in fast_function (/opt/conda/bin/python3.6+0x196a10)\r\n    #22 0x563e63baccc4 in call_function (/opt/conda/bin/python3.6+0x19ccc4)\r\n    #23 0x563e63bd1199 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c1199)\r\n    #24 0x563e63ba6e4a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x196e4a)\r\n```\r\n\r\nFix incoming."}
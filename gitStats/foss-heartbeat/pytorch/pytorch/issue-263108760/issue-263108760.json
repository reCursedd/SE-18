{"url": "https://api.github.com/repos/pytorch/pytorch/issues/2984", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/2984/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/2984/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/2984/events", "html_url": "https://github.com/pytorch/pytorch/pull/2984", "id": 263108760, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ0OTAzNjE3", "number": 2984, "title": "Make cuDNN use the current stream", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-10-05T12:35:59Z", "updated_at": "2018-11-23T15:35:01Z", "closed_at": "2017-10-05T13:27:05Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/2984", "html_url": "https://github.com/pytorch/pytorch/pull/2984", "diff_url": "https://github.com/pytorch/pytorch/pull/2984.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/2984.patch"}, "body_html": "<h3>Summary</h3>\n<p>cudnnSetStream calls were missing in the cudnn bindings, resulting in cudnn not using the current stream. This makes it so that the cudnn functions use the current stream. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"252440824\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/2523\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/2523/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/2523\">#2523</a></p>\n<h3>Test plan</h3>\n<p>Create a <a href=\"https://gist.github.com/zou3519/47f961bb0745ff8fea04a603ac653431\">test file</a> (adopted from <a href=\"https://discuss.pytorch.org/t/torch-nn-in-context-of-a-cuda-stream/6304\" rel=\"nofollow\">here</a>)</p>\n<p>Ran it through <code>nvprof</code>. Asserted that the cudnn functions did not use the current stream before changes. Asserted that the cudnn functions did use the current stream after changes.</p>\n<p>Before:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/5652049/31227505-1388a89e-a9a8-11e7-873d-153433dc6fc1.png\"><img src=\"https://user-images.githubusercontent.com/5652049/31227505-1388a89e-a9a8-11e7-873d-153433dc6fc1.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>\n<p>After:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/5652049/31227514-1b2994aa-a9a8-11e7-87f1-a12d80e17eb5.png\"><img src=\"https://user-images.githubusercontent.com/5652049/31227514-1b2994aa-a9a8-11e7-87f1-a12d80e17eb5.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>", "body_text": "Summary\ncudnnSetStream calls were missing in the cudnn bindings, resulting in cudnn not using the current stream. This makes it so that the cudnn functions use the current stream. #2523\nTest plan\nCreate a test file (adopted from here)\nRan it through nvprof. Asserted that the cudnn functions did not use the current stream before changes. Asserted that the cudnn functions did use the current stream after changes.\nBefore:\n\nAfter:", "body": "### Summary\r\ncudnnSetStream calls were missing in the cudnn bindings, resulting in cudnn not using the current stream. This makes it so that the cudnn functions use the current stream. #2523\r\n\r\n### Test plan\r\nCreate a [test file](https://gist.github.com/zou3519/47f961bb0745ff8fea04a603ac653431) (adopted from [here](https://discuss.pytorch.org/t/torch-nn-in-context-of-a-cuda-stream/6304))\r\n\r\nRan it through `nvprof`. Asserted that the cudnn functions did not use the current stream before changes. Asserted that the cudnn functions did use the current stream after changes.\r\n\r\nBefore:\r\n![image](https://user-images.githubusercontent.com/5652049/31227505-1388a89e-a9a8-11e7-873d-153433dc6fc1.png)\r\n\r\nAfter:\r\n![image](https://user-images.githubusercontent.com/5652049/31227514-1b2994aa-a9a8-11e7-87f1-a12d80e17eb5.png)\r\n\r\n"}
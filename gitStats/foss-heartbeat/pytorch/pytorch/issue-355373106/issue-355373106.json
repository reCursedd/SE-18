{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11044", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11044/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11044/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11044/events", "html_url": "https://github.com/pytorch/pytorch/issues/11044", "id": 355373106, "node_id": "MDU6SXNzdWUzNTUzNzMxMDY=", "number": 11044, "title": "[JIT] [Script] not support arbitrary expression eval in if statement", "user": {"login": "wanchaol", "id": 9443650, "node_id": "MDQ6VXNlcjk0NDM2NTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9443650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wanchaol", "html_url": "https://github.com/wanchaol", "followers_url": "https://api.github.com/users/wanchaol/followers", "following_url": "https://api.github.com/users/wanchaol/following{/other_user}", "gists_url": "https://api.github.com/users/wanchaol/gists{/gist_id}", "starred_url": "https://api.github.com/users/wanchaol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wanchaol/subscriptions", "organizations_url": "https://api.github.com/users/wanchaol/orgs", "repos_url": "https://api.github.com/users/wanchaol/repos", "events_url": "https://api.github.com/users/wanchaol/events{/privacy}", "received_events_url": "https://api.github.com/users/wanchaol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 679953983, "node_id": "MDU6TGFiZWw2Nzk5NTM5ODM=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/jit", "name": "jit", "color": "c5def5", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-08-29T23:46:40Z", "updated_at": "2018-11-06T20:40:13Z", "closed_at": "2018-11-06T20:40:13Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-en\">@torch.jit.script</span>\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">testIf</span>(<span class=\"pl-smi\">a</span>):\n    <span class=\"pl-k\">if</span> a:\n        b <span class=\"pl-k\">=</span> a[<span class=\"pl-c1\">0</span>]\n    <span class=\"pl-k\">else</span>:\n        b <span class=\"pl-k\">=</span> a[<span class=\"pl-c1\">1</span>] <span class=\"pl-k\">+</span> <span class=\"pl-c1\">1</span>\n    <span class=\"pl-k\">return</span> b\n\ntestIf((torch.tensor(<span class=\"pl-c1\">0</span>), torch.tensor(<span class=\"pl-c1\">1</span>)))</pre></div>\n<p>output:</p>\n<pre><code>RuntimeError: testIf() expected value of type Tensor for argument 'a' in position 0, but instead got value of type tuple. Declaration: testIf(Tensor a) -&gt;  (argumentToIValue at /data/users/wanchaol/pytorch/torch/csrc/jit/pybind_utils.h:143)\nframe #0: &lt;unknown function&gt; + 0x73f596 (0x7f365bede596 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #1: &lt;unknown function&gt; + 0x81279e (0x7f365bfb179e in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #2: &lt;unknown function&gt; + 0x8070e0 (0x7f365bfa60e0 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #3: &lt;unknown function&gt; + 0x80fa6c (0x7f365bfaea6c in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #4: &lt;unknown function&gt; + 0x80ed9f (0x7f365bfadd9f in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #5: &lt;unknown function&gt; + 0x80d775 (0x7f365bfac775 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #6: &lt;unknown function&gt; + 0x80d80f (0x7f365bfac80f in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #7: &lt;unknown function&gt; + 0x490a1e (0x7f365bc2fa1e in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\n\n</code></pre>", "body_text": "@torch.jit.script\ndef testIf(a):\n    if a:\n        b = a[0]\n    else:\n        b = a[1] + 1\n    return b\n\ntestIf((torch.tensor(0), torch.tensor(1)))\noutput:\nRuntimeError: testIf() expected value of type Tensor for argument 'a' in position 0, but instead got value of type tuple. Declaration: testIf(Tensor a) ->  (argumentToIValue at /data/users/wanchaol/pytorch/torch/csrc/jit/pybind_utils.h:143)\nframe #0: <unknown function> + 0x73f596 (0x7f365bede596 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #1: <unknown function> + 0x81279e (0x7f365bfb179e in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #2: <unknown function> + 0x8070e0 (0x7f365bfa60e0 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #3: <unknown function> + 0x80fa6c (0x7f365bfaea6c in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #4: <unknown function> + 0x80ed9f (0x7f365bfadd9f in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #5: <unknown function> + 0x80d775 (0x7f365bfac775 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #6: <unknown function> + 0x80d80f (0x7f365bfac80f in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\nframe #7: <unknown function> + 0x490a1e (0x7f365bc2fa1e in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)", "body": "```python\r\n@torch.jit.script\r\ndef testIf(a):\r\n    if a:\r\n        b = a[0]\r\n    else:\r\n        b = a[1] + 1\r\n    return b\r\n\r\ntestIf((torch.tensor(0), torch.tensor(1)))\r\n```\r\n\r\noutput:\r\n\r\n```\r\nRuntimeError: testIf() expected value of type Tensor for argument 'a' in position 0, but instead got value of type tuple. Declaration: testIf(Tensor a) ->  (argumentToIValue at /data/users/wanchaol/pytorch/torch/csrc/jit/pybind_utils.h:143)\r\nframe #0: <unknown function> + 0x73f596 (0x7f365bede596 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\r\nframe #1: <unknown function> + 0x81279e (0x7f365bfb179e in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\r\nframe #2: <unknown function> + 0x8070e0 (0x7f365bfa60e0 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\r\nframe #3: <unknown function> + 0x80fa6c (0x7f365bfaea6c in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\r\nframe #4: <unknown function> + 0x80ed9f (0x7f365bfadd9f in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\r\nframe #5: <unknown function> + 0x80d775 (0x7f365bfac775 in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\r\nframe #6: <unknown function> + 0x80d80f (0x7f365bfac80f in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\r\nframe #7: <unknown function> + 0x490a1e (0x7f365bc2fa1e in /data/users/wanchaol/pytorch/torch/_C.cpython-37m-x86_64-linux-gnu.so)\r\n\r\n```"}
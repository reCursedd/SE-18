{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/174480692", "pull_request_review_id": 103836568, "id": 174480692, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NDQ4MDY5Mg==", "diff_hunk": "@@ -1960,11 +1960,7 @@ def pairwise_distance(x1, x2, p=2, eps=1e-6):\n         >>> output = F.pairwise_distance(input1, input2, p=2)\n         >>> output.backward()\n     \"\"\"\n-    assert x1.size() == x2.size(), \"Input sizes must be equal.\"\n-    assert x1.dim() == 2, \"Input must be a 2D matrix.\"\n-    diff = torch.abs(x1 - x2)\n-    out = torch.pow(diff + eps, p).sum(dim=1, keepdim=True)", "path": "torch/nn/functional.py", "position": 33, "original_position": 7, "commit_id": "1f0560d05b97d9529c84ce6ce9d158b2bee210f8", "original_commit_id": "4d23df16d154c8dfe1b94c387201c446fe222235", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "body": "I'm a little worried because it looks like we're changing the behavior of `pairwise_distance` to return a tensor of size `(N,)` instead of size `(N, 1)`.\r\n\r\nI think keeping the old behavior (return tensor of size `(N, 1)`) might be better because it represents batched distances. On the other hand, this makes it inconsistent with our loss functions (but I guess `pairwise_distance` isn't a loss, and you can keep the current behavior of `triplet_margin_loss`. What do you think?", "created_at": "2018-03-14T14:36:19Z", "updated_at": "2018-11-23T15:40:43Z", "html_url": "https://github.com/pytorch/pytorch/pull/5680#discussion_r174480692", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/5680", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/174480692"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/5680#discussion_r174480692"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/5680"}}, "body_html": "<p>I'm a little worried because it looks like we're changing the behavior of <code>pairwise_distance</code> to return a tensor of size <code>(N,)</code> instead of size <code>(N, 1)</code>.</p>\n<p>I think keeping the old behavior (return tensor of size <code>(N, 1)</code>) might be better because it represents batched distances. On the other hand, this makes it inconsistent with our loss functions (but I guess <code>pairwise_distance</code> isn't a loss, and you can keep the current behavior of <code>triplet_margin_loss</code>. What do you think?</p>", "body_text": "I'm a little worried because it looks like we're changing the behavior of pairwise_distance to return a tensor of size (N,) instead of size (N, 1).\nI think keeping the old behavior (return tensor of size (N, 1)) might be better because it represents batched distances. On the other hand, this makes it inconsistent with our loss functions (but I guess pairwise_distance isn't a loss, and you can keep the current behavior of triplet_margin_loss. What do you think?"}
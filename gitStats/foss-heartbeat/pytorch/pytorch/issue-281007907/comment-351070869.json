{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/351070869", "html_url": "https://github.com/pytorch/pytorch/issues/4111#issuecomment-351070869", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/4111", "id": 351070869, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTA3MDg2OQ==", "user": {"login": "BernardoGO", "id": 1606650, "node_id": "MDQ6VXNlcjE2MDY2NTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1606650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BernardoGO", "html_url": "https://github.com/BernardoGO", "followers_url": "https://api.github.com/users/BernardoGO/followers", "following_url": "https://api.github.com/users/BernardoGO/following{/other_user}", "gists_url": "https://api.github.com/users/BernardoGO/gists{/gist_id}", "starred_url": "https://api.github.com/users/BernardoGO/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BernardoGO/subscriptions", "organizations_url": "https://api.github.com/users/BernardoGO/orgs", "repos_url": "https://api.github.com/users/BernardoGO/repos", "events_url": "https://api.github.com/users/BernardoGO/events{/privacy}", "received_events_url": "https://api.github.com/users/BernardoGO/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-12T14:41:59Z", "updated_at": "2017-12-12T14:42:16Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=115795\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/diravan\">@diravan</a> The import also works for me on PyTorch 0.2 without turning on the dGPU.<br>\nIt only crashes if I call cuda, which doesn't happen in TF.</p>\n<p>PyTorch 0.2:</p>\n<pre><code>Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import torch\n&gt;&gt;&gt; print(torch.rand(2,3).cuda())\nTHCudaCheck FAIL file=/build/python-pytorch/src/pytorch-0.2.0-py3-cuda/torch/lib/THC/THCGeneral.c line=70 error=30 : unknown error\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python3.6/site-packages/torch/_utils.py\", line 66, in _cuda\n    return new_type(self.size()).copy_(self, async)\n  File \"/usr/lib/python3.6/site-packages/torch/cuda/__init__.py\", line 266, in _lazy_new\n    _lazy_init()\n  File \"/usr/lib/python3.6/site-packages/torch/cuda/__init__.py\", line 85, in _lazy_init\n    torch._C._cuda_init()\nRuntimeError: cuda runtime error (30) : unknown error at /build/python-pytorch/src/pytorch-0.2.0-py3-cuda/torch/lib/THC/THCGeneral.c:70\n\n</code></pre>\n<p>TensorFlow 1.4:</p>\n<pre><code>Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt; hello = tf.constant('Hello, TensorFlow!')\n&gt;&gt;&gt; sess = tf.Session()\n2017-12-12 12:40:49.049963: E tensorflow/stream_executor/cuda/cuda_driver.cc:406] failed call to cuInit: CUDA_ERROR_UNKNOWN\n2017-12-12 12:40:49.050005: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:145] kernel driver does not appear to be running on this host (sager-pc): /proc/driver/nvidia/version does not exist\n&gt;&gt;&gt; print(sess.run(hello))\nb'Hello, TensorFlow!'\n</code></pre>\n<p>It does not detect NVIDIA (as expected) but it runs just fine on CPU instead of crashing.<br>\nIt would be awesome if Torch did the same.</p>", "body_text": "@diravan The import also works for me on PyTorch 0.2 without turning on the dGPU.\nIt only crashes if I call cuda, which doesn't happen in TF.\nPyTorch 0.2:\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import torch\n>>> print(torch.rand(2,3).cuda())\nTHCudaCheck FAIL file=/build/python-pytorch/src/pytorch-0.2.0-py3-cuda/torch/lib/THC/THCGeneral.c line=70 error=30 : unknown error\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/lib/python3.6/site-packages/torch/_utils.py\", line 66, in _cuda\n    return new_type(self.size()).copy_(self, async)\n  File \"/usr/lib/python3.6/site-packages/torch/cuda/__init__.py\", line 266, in _lazy_new\n    _lazy_init()\n  File \"/usr/lib/python3.6/site-packages/torch/cuda/__init__.py\", line 85, in _lazy_init\n    torch._C._cuda_init()\nRuntimeError: cuda runtime error (30) : unknown error at /build/python-pytorch/src/pytorch-0.2.0-py3-cuda/torch/lib/THC/THCGeneral.c:70\n\n\nTensorFlow 1.4:\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import tensorflow as tf\n>>> hello = tf.constant('Hello, TensorFlow!')\n>>> sess = tf.Session()\n2017-12-12 12:40:49.049963: E tensorflow/stream_executor/cuda/cuda_driver.cc:406] failed call to cuInit: CUDA_ERROR_UNKNOWN\n2017-12-12 12:40:49.050005: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:145] kernel driver does not appear to be running on this host (sager-pc): /proc/driver/nvidia/version does not exist\n>>> print(sess.run(hello))\nb'Hello, TensorFlow!'\n\nIt does not detect NVIDIA (as expected) but it runs just fine on CPU instead of crashing.\nIt would be awesome if Torch did the same.", "body": "@diravan The import also works for me on PyTorch 0.2 without turning on the dGPU.\r\nIt only crashes if I call cuda, which doesn't happen in TF.\r\n\r\nPyTorch 0.2:\r\n```\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import torch\r\n>>> print(torch.rand(2,3).cuda())\r\nTHCudaCheck FAIL file=/build/python-pytorch/src/pytorch-0.2.0-py3-cuda/torch/lib/THC/THCGeneral.c line=70 error=30 : unknown error\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python3.6/site-packages/torch/_utils.py\", line 66, in _cuda\r\n    return new_type(self.size()).copy_(self, async)\r\n  File \"/usr/lib/python3.6/site-packages/torch/cuda/__init__.py\", line 266, in _lazy_new\r\n    _lazy_init()\r\n  File \"/usr/lib/python3.6/site-packages/torch/cuda/__init__.py\", line 85, in _lazy_init\r\n    torch._C._cuda_init()\r\nRuntimeError: cuda runtime error (30) : unknown error at /build/python-pytorch/src/pytorch-0.2.0-py3-cuda/torch/lib/THC/THCGeneral.c:70\r\n\r\n```\r\n\r\n\r\nTensorFlow 1.4:\r\n```\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import tensorflow as tf\r\n>>> hello = tf.constant('Hello, TensorFlow!')\r\n>>> sess = tf.Session()\r\n2017-12-12 12:40:49.049963: E tensorflow/stream_executor/cuda/cuda_driver.cc:406] failed call to cuInit: CUDA_ERROR_UNKNOWN\r\n2017-12-12 12:40:49.050005: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:145] kernel driver does not appear to be running on this host (sager-pc): /proc/driver/nvidia/version does not exist\r\n>>> print(sess.run(hello))\r\nb'Hello, TensorFlow!'\r\n```\r\nIt does not detect NVIDIA (as expected) but it runs just fine on CPU instead of crashing.\r\nIt would be awesome if Torch did the same."}
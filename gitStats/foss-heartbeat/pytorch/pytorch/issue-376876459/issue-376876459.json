{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13511", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13511/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13511/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13511/events", "html_url": "https://github.com/pytorch/pytorch/issues/13511", "id": 376876459, "node_id": "MDU6SXNzdWUzNzY4NzY0NTk=", "number": 13511, "title": "An illegal memory access with CudaHalf Tensors bigger than 1/2 of total memory", "user": {"login": "AleximusOrloff", "id": 27707369, "node_id": "MDQ6VXNlcjI3NzA3MzY5", "avatar_url": "https://avatars1.githubusercontent.com/u/27707369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AleximusOrloff", "html_url": "https://github.com/AleximusOrloff", "followers_url": "https://api.github.com/users/AleximusOrloff/followers", "following_url": "https://api.github.com/users/AleximusOrloff/following{/other_user}", "gists_url": "https://api.github.com/users/AleximusOrloff/gists{/gist_id}", "starred_url": "https://api.github.com/users/AleximusOrloff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AleximusOrloff/subscriptions", "organizations_url": "https://api.github.com/users/AleximusOrloff/orgs", "repos_url": "https://api.github.com/users/AleximusOrloff/repos", "events_url": "https://api.github.com/users/AleximusOrloff/events{/privacy}", "received_events_url": "https://api.github.com/users/AleximusOrloff/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-11-02T16:15:29Z", "updated_at": "2018-11-17T05:00:53Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>On Pascal Cards pytorch(and torch7 as well) fails when acessing memory after following steps</p>\n<p>On machine <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"171281708\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/1/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/1\">#1</a> I have GTX1080 with 8Gb onboard (30mln of 128D vectors actually occupy about 7,2Gb)</p>\n<pre><code>device = torch.device(\"cuda\")\nTensor=torch.cuda.HalfTensor(30*1000*1000,128)\nout=torch.mv(Tensor,Tensor[0])\nprint(out[0])\n</code></pre>\n<p>And here Cuda FAIL on print(!!) (actually on access to out[0]):<br>\nTHCudaCheck FAIL file=/pytorch/aten/src/THC/generic/THCTensorCopy.cpp line=70 error=77 : an illegal memory access was encountered<br>\nTraceback (most recent call last):<br>\nFile \u201ctest_pytorch.py\u201d, line 112, in<br>\nmain()<br>\nFile \u201ctest_pytorch.py\u201d, line 26, in main<br>\nprint(out[0])<br>\nFile \u201c/home/integral/.local/lib/python3.5/site-packages/torch/tensor.py\u201d, line 57, in repr<br>\nreturn torch._tensor_str._str(self)<br>\nFile \u201c/home/integral/.local/lib/python3.5/site-packages/torch/_tensor_str.py\u201d, line 256, in _str<br>\nformatter = _Formatter(get_summarized_data(self) if summarize else self)<br>\nFile \"/home/integral/.local/lib/python3.5/site-packages/torch/tensor_str.py\", line 82, in init<br>\ncopy = torch.empty(tensor.size(), dtype=torch.float64).copy(tensor).view(tensor.nelement())<br>\nRuntimeError: cuda runtime error (77) : an illegal memory access was encountered at /pytorch/aten/src/THC/generic/THCTensorCopy.cpp:70</p>\n<p>On another machine same issue with Torch7, GTX1080ti</p>\n<p>If Tensor size smaller than 1/2 of total GPU memory error doesn't occur.</p>", "body_text": "On Pascal Cards pytorch(and torch7 as well) fails when acessing memory after following steps\nOn machine #1 I have GTX1080 with 8Gb onboard (30mln of 128D vectors actually occupy about 7,2Gb)\ndevice = torch.device(\"cuda\")\nTensor=torch.cuda.HalfTensor(30*1000*1000,128)\nout=torch.mv(Tensor,Tensor[0])\nprint(out[0])\n\nAnd here Cuda FAIL on print(!!) (actually on access to out[0]):\nTHCudaCheck FAIL file=/pytorch/aten/src/THC/generic/THCTensorCopy.cpp line=70 error=77 : an illegal memory access was encountered\nTraceback (most recent call last):\nFile \u201ctest_pytorch.py\u201d, line 112, in\nmain()\nFile \u201ctest_pytorch.py\u201d, line 26, in main\nprint(out[0])\nFile \u201c/home/integral/.local/lib/python3.5/site-packages/torch/tensor.py\u201d, line 57, in repr\nreturn torch._tensor_str._str(self)\nFile \u201c/home/integral/.local/lib/python3.5/site-packages/torch/_tensor_str.py\u201d, line 256, in _str\nformatter = _Formatter(get_summarized_data(self) if summarize else self)\nFile \"/home/integral/.local/lib/python3.5/site-packages/torch/tensor_str.py\", line 82, in init\ncopy = torch.empty(tensor.size(), dtype=torch.float64).copy(tensor).view(tensor.nelement())\nRuntimeError: cuda runtime error (77) : an illegal memory access was encountered at /pytorch/aten/src/THC/generic/THCTensorCopy.cpp:70\nOn another machine same issue with Torch7, GTX1080ti\nIf Tensor size smaller than 1/2 of total GPU memory error doesn't occur.", "body": "On Pascal Cards pytorch(and torch7 as well) fails when acessing memory after following steps\r\n\r\nOn machine #1 I have GTX1080 with 8Gb onboard (30mln of 128D vectors actually occupy about 7,2Gb)\r\n```\r\ndevice = torch.device(\"cuda\")\r\nTensor=torch.cuda.HalfTensor(30*1000*1000,128)\r\nout=torch.mv(Tensor,Tensor[0])\r\nprint(out[0])\r\n```\r\nAnd here Cuda FAIL on print(!!) (actually on access to out[0]):\r\nTHCudaCheck FAIL file=/pytorch/aten/src/THC/generic/THCTensorCopy.cpp line=70 error=77 : an illegal memory access was encountered\r\nTraceback (most recent call last):\r\nFile \u201ctest_pytorch.py\u201d, line 112, in \r\nmain()\r\nFile \u201ctest_pytorch.py\u201d, line 26, in main\r\nprint(out[0])\r\nFile \u201c/home/integral/.local/lib/python3.5/site-packages/torch/tensor.py\u201d, line 57, in repr\r\nreturn torch._tensor_str._str(self)\r\nFile \u201c/home/integral/.local/lib/python3.5/site-packages/torch/_tensor_str.py\u201d, line 256, in _str\r\nformatter = _Formatter(get_summarized_data(self) if summarize else self)\r\nFile \"/home/integral/.local/lib/python3.5/site-packages/torch/tensor_str.py\", line 82, in init\r\ncopy = torch.empty(tensor.size(), dtype=torch.float64).copy(tensor).view(tensor.nelement())\r\nRuntimeError: cuda runtime error (77) : an illegal memory access was encountered at /pytorch/aten/src/THC/generic/THCTensorCopy.cpp:70\r\n\r\nOn another machine same issue with Torch7, GTX1080ti\r\n\r\nIf Tensor size smaller than 1/2 of total GPU memory error doesn't occur."}
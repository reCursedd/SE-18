{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/392650714", "html_url": "https://github.com/pytorch/pytorch/issues/6351#issuecomment-392650714", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6351", "id": 392650714, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjY1MDcxNA==", "user": {"login": "dlmacedo", "id": 15001116, "node_id": "MDQ6VXNlcjE1MDAxMTE2", "avatar_url": "https://avatars2.githubusercontent.com/u/15001116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dlmacedo", "html_url": "https://github.com/dlmacedo", "followers_url": "https://api.github.com/users/dlmacedo/followers", "following_url": "https://api.github.com/users/dlmacedo/following{/other_user}", "gists_url": "https://api.github.com/users/dlmacedo/gists{/gist_id}", "starred_url": "https://api.github.com/users/dlmacedo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlmacedo/subscriptions", "organizations_url": "https://api.github.com/users/dlmacedo/orgs", "repos_url": "https://api.github.com/users/dlmacedo/repos", "events_url": "https://api.github.com/users/dlmacedo/events{/privacy}", "received_events_url": "https://api.github.com/users/dlmacedo/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-29T04:38:37Z", "updated_at": "2018-05-29T04:38:37Z", "author_association": "NONE", "body_html": "<p>Based on my tests, even in PyTorch 0.4 we still need to initialize the workers with the same seed to get deterministic behavior. The following lines are NOT enough:</p>\n<pre><code>cudnn.benchmark = False\ncudnn.deterministic = True\n\nrandom.seed(1)\nnumpy.random.seed(1)\ntorch.manual_seed(1)\ntorch.cuda.manual_seed(1)\n</code></pre>\n<p>I think this should not be the standard behavior. In my opinion, the above lines should be enough to provide deterministic behavior. It is not obvious to the novice that, besides the above lines, he also need to initialize the workers with the same seed to get deterministic behavior.</p>", "body_text": "Based on my tests, even in PyTorch 0.4 we still need to initialize the workers with the same seed to get deterministic behavior. The following lines are NOT enough:\ncudnn.benchmark = False\ncudnn.deterministic = True\n\nrandom.seed(1)\nnumpy.random.seed(1)\ntorch.manual_seed(1)\ntorch.cuda.manual_seed(1)\n\nI think this should not be the standard behavior. In my opinion, the above lines should be enough to provide deterministic behavior. It is not obvious to the novice that, besides the above lines, he also need to initialize the workers with the same seed to get deterministic behavior.", "body": "Based on my tests, even in PyTorch 0.4 we still need to initialize the workers with the same seed to get deterministic behavior. The following lines are NOT enough:\r\n\r\n```\r\ncudnn.benchmark = False\r\ncudnn.deterministic = True\r\n\r\nrandom.seed(1)\r\nnumpy.random.seed(1)\r\ntorch.manual_seed(1)\r\ntorch.cuda.manual_seed(1)\r\n```\r\n\r\nI think this should not be the standard behavior. In my opinion, the above lines should be enough to provide deterministic behavior. It is not obvious to the novice that, besides the above lines, he also need to initialize the workers with the same seed to get deterministic behavior.\r\n"}
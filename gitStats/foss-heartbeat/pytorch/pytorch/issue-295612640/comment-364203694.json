{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/364203694", "html_url": "https://github.com/pytorch/pytorch/issues/5136#issuecomment-364203694", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5136", "id": 364203694, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDIwMzY5NA==", "user": {"login": "vadimkantorov", "id": 1041752, "node_id": "MDQ6VXNlcjEwNDE3NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1041752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vadimkantorov", "html_url": "https://github.com/vadimkantorov", "followers_url": "https://api.github.com/users/vadimkantorov/followers", "following_url": "https://api.github.com/users/vadimkantorov/following{/other_user}", "gists_url": "https://api.github.com/users/vadimkantorov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vadimkantorov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vadimkantorov/subscriptions", "organizations_url": "https://api.github.com/users/vadimkantorov/orgs", "repos_url": "https://api.github.com/users/vadimkantorov/repos", "events_url": "https://api.github.com/users/vadimkantorov/events{/privacy}", "received_events_url": "https://api.github.com/users/vadimkantorov/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-08T18:25:01Z", "updated_at": "2018-02-08T21:10:52Z", "author_association": "NONE", "body_html": "<p>Downgrading to <code>apt install gcc-5 g++-5</code> (version is 5.4.1) gets to different errors on <code>std::to_string</code>, <code>std::isnan</code>, <code>std::isinf</code> missing:</p>\n<details>\n<pre><code>\n[ 46%] Building NVCC (Device) object src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n3 errors detected in the compilation of \"/tmp/tmpxft_00001dae_00000000-4_CUDAHalf.cpp4.ii\".\nCMake Error at ATen_generated_CUDAHalf.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/cuda/./ATen_generated_CUDAHalf.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1134: recipe for target 'src/ATen/CMakeFiles/ATen.dir/cuda/ATen_generated_CUDAHalf.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/cuda/ATen_generated_CUDAHalf.cu.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n          detected during instantiation of \"To at::checked_convert&lt;To,From&gt;(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n          detected during instantiation of \"To at::checked_convert&lt;To,From&gt;(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n3 errors detected in the compilation of \"/tmp/tmpxft_00001dc2_00000000-6_IndexUtils.cpp1.ii\".\nCMake Error at ATen_generated_IndexUtils.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/cuda/detail/./ATen_generated_IndexUtils.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1127: recipe for target 'src/ATen/CMakeFiles/ATen.dir/cuda/detail/ATen_generated_IndexUtils.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/cuda/detail/ATen_generated_IndexUtils.cu.o] Error 1\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n          detected during instantiation of \"To at::checked_convert&lt;To,From&gt;(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n          detected during instantiation of \"To at::checked_convert&lt;To,From&gt;(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n          detected during instantiation of \"To at::checked_convert&lt;To,From&gt;(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n          detected during instantiation of \"To at::checked_convert&lt;To,From&gt;(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e1d_00000000-6_Distributions.cpp1.ii\".\nCMake Error at ATen_generated_Distributions.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_Distributions.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1141: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Distributions.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Distributions.cu.o] Error 1\n.../pytorch/aten/src/ATen/native/cuda/Embedding.cu(36): warning: function \"__any\"\n/usr/local/cuda/include/device_atomic_functions.h(180): here was declared deprecated (\"__any() is deprecated in favor of __any_sync() and may be removed in a future release (Use -Wno-deprecated-declarations to suppress this warning).\")\n\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n          detected during instantiation of \"To at::checked_convert&lt;To,From&gt;(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n          detected during instantiation of \"To at::checked_convert&lt;To,From&gt;(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e29_00000000-6_TensorCompare.cpp1.ii\".\nCMake Error at ATen_generated_TensorCompare.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_TensorCompare.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1155: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o] Error 1\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e3c_00000000-6_Embedding.cpp1.ii\".\nCMake Error at ATen_generated_Embedding.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_Embedding.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1148: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Embedding.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Embedding.cu.o] Error 1\nCMakeFiles/Makefile2:194: recipe for target 'src/ATen/CMakeFiles/ATen.dir/all' failed\nmake[1]: *** [src/ATen/CMakeFiles/ATen.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n</details>\n<p>In g++ 5.4.1 installed with <code>apt install g++-5</code>, even this fails:</p>\n<div class=\"highlight highlight-source-c++\"><pre># g++-<span class=\"pl-c1\">5</span> -std=c++<span class=\"pl-c1\">11</span> test.cpp\n\n#<span class=\"pl-k\">include</span> <span class=\"pl-s\"><span class=\"pl-pds\">&lt;</span>cmath<span class=\"pl-pds\">&gt;</span></span>\n\n<span class=\"pl-k\">int</span> <span class=\"pl-en\">main</span>()\n{\n    <span class=\"pl-k\">return</span> <span class=\"pl-c1\">int</span>(<span class=\"pl-c1\">std::isinf</span>(<span class=\"pl-c1\">3.0</span>));\n}</pre></div>\n<p>So it seems, usage of <code>std::isinf</code> etc is not stable in g++-5 and breaks pytorch.</p>\n<p>Seems math export to std is broken in g++-5.4.1</p>\n<p>At the moment no standard compiler of Ubuntu 17.10 can compile PyTorch :(</p>", "body_text": "Downgrading to apt install gcc-5 g++-5 (version is 5.4.1) gets to different errors on std::to_string, std::isnan, std::isinf missing:\n\n\n[ 46%] Building NVCC (Device) object src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n3 errors detected in the compilation of \"/tmp/tmpxft_00001dae_00000000-4_CUDAHalf.cpp4.ii\".\nCMake Error at ATen_generated_CUDAHalf.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/cuda/./ATen_generated_CUDAHalf.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1134: recipe for target 'src/ATen/CMakeFiles/ATen.dir/cuda/ATen_generated_CUDAHalf.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/cuda/ATen_generated_CUDAHalf.cu.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n3 errors detected in the compilation of \"/tmp/tmpxft_00001dc2_00000000-6_IndexUtils.cpp1.ii\".\nCMake Error at ATen_generated_IndexUtils.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/cuda/detail/./ATen_generated_IndexUtils.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1127: recipe for target 'src/ATen/CMakeFiles/ATen.dir/cuda/detail/ATen_generated_IndexUtils.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/cuda/detail/ATen_generated_IndexUtils.cu.o] Error 1\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e1d_00000000-6_Distributions.cpp1.ii\".\nCMake Error at ATen_generated_Distributions.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_Distributions.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1141: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Distributions.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Distributions.cu.o] Error 1\n.../pytorch/aten/src/ATen/native/cuda/Embedding.cu(36): warning: function \"__any\"\n/usr/local/cuda/include/device_atomic_functions.h(180): here was declared deprecated (\"__any() is deprecated in favor of __any_sync() and may be removed in a future release (Use -Wno-deprecated-declarations to suppress this warning).\")\n\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\n\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \n.../pytorch/aten/src/ATen/Scalar.h(61): here\n\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e29_00000000-6_TensorCompare.cpp1.ii\".\nCMake Error at ATen_generated_TensorCompare.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_TensorCompare.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1155: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o] Error 1\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e3c_00000000-6_Embedding.cpp1.ii\".\nCMake Error at ATen_generated_Embedding.cu.o.cmake:267 (message):\n  Error generating file\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_Embedding.cu.o\n\n\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1148: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Embedding.cu.o' failed\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Embedding.cu.o] Error 1\nCMakeFiles/Makefile2:194: recipe for target 'src/ATen/CMakeFiles/ATen.dir/all' failed\nmake[1]: *** [src/ATen/CMakeFiles/ATen.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\n\n\nIn g++ 5.4.1 installed with apt install g++-5, even this fails:\n# g++-5 -std=c++11 test.cpp\n\n#include <cmath>\n\nint main()\n{\n    return int(std::isinf(3.0));\n}\nSo it seems, usage of std::isinf etc is not stable in g++-5 and breaks pytorch.\nSeems math export to std is broken in g++-5.4.1\nAt the moment no standard compiler of Ubuntu 17.10 can compile PyTorch :(", "body": "Downgrading to `apt install gcc-5 g++-5` (version is 5.4.1) gets to different errors on `std::to_string`, `std::isnan`, `std::isinf` missing:\r\n\r\n<details>\r\n\r\n```\r\n\r\n[ 46%] Building NVCC (Device) object src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o\r\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\r\n\r\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\r\n\r\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\r\n\r\n3 errors detected in the compilation of \"/tmp/tmpxft_00001dae_00000000-4_CUDAHalf.cpp4.ii\".\r\nCMake Error at ATen_generated_CUDAHalf.cu.o.cmake:267 (message):\r\n  Error generating file\r\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/cuda/./ATen_generated_CUDAHalf.cu.o\r\n\r\n\r\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1134: recipe for target 'src/ATen/CMakeFiles/ATen.dir/cuda/ATen_generated_CUDAHalf.cu.o' failed\r\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/cuda/ATen_generated_CUDAHalf.cu.o] Error 1\r\nmake[2]: *** Waiting for unfinished jobs....\r\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\r\n\r\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\r\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \r\n.../pytorch/aten/src/ATen/Scalar.h(61): here\r\n\r\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\r\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \r\n.../pytorch/aten/src/ATen/Scalar.h(61): here\r\n\r\n3 errors detected in the compilation of \"/tmp/tmpxft_00001dc2_00000000-6_IndexUtils.cpp1.ii\".\r\nCMake Error at ATen_generated_IndexUtils.cu.o.cmake:267 (message):\r\n  Error generating file\r\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/cuda/detail/./ATen_generated_IndexUtils.cu.o\r\n\r\n\r\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1127: recipe for target 'src/ATen/CMakeFiles/ATen.dir/cuda/detail/ATen_generated_IndexUtils.cu.o' failed\r\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/cuda/detail/ATen_generated_IndexUtils.cu.o] Error 1\r\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\r\n\r\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\r\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \r\n.../pytorch/aten/src/ATen/Scalar.h(61): here\r\n\r\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\r\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \r\n.../pytorch/aten/src/ATen/Scalar.h(61): here\r\n\r\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\r\n\r\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\r\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \r\n.../pytorch/aten/src/ATen/Scalar.h(61): here\r\n\r\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\r\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \r\n.../pytorch/aten/src/ATen/Scalar.h(61): here\r\n\r\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e1d_00000000-6_Distributions.cpp1.ii\".\r\nCMake Error at ATen_generated_Distributions.cu.o.cmake:267 (message):\r\n  Error generating file\r\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_Distributions.cu.o\r\n\r\n\r\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1141: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Distributions.cu.o' failed\r\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Distributions.cu.o] Error 1\r\n.../pytorch/aten/src/ATen/native/cuda/Embedding.cu(36): warning: function \"__any\"\r\n/usr/local/cuda/include/device_atomic_functions.h(180): here was declared deprecated (\"__any() is deprecated in favor of __any_sync() and may be removed in a future release (Use -Wno-deprecated-declarations to suppress this warning).\")\r\n\r\n.../pytorch/aten/src/ATen/Half.h(42): error: namespace \"std\" has no member \"to_string\"\r\n\r\n.../pytorch/aten/src/ATen/Half.h(28): error: namespace \"std\" has no member \"isinf\"\r\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \r\n.../pytorch/aten/src/ATen/Scalar.h(61): here\r\n\r\n.../pytorch/aten/src/ATen/Half.h(31): error: namespace \"std\" has no member \"isnan\"\r\n          detected during instantiation of \"To at::checked_convert<To,From>(From, const char *) [with To=uint8_t, From=double]\" \r\n.../pytorch/aten/src/ATen/Scalar.h(61): here\r\n\r\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e29_00000000-6_TensorCompare.cpp1.ii\".\r\nCMake Error at ATen_generated_TensorCompare.cu.o.cmake:267 (message):\r\n  Error generating file\r\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_TensorCompare.cu.o\r\n\r\n\r\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1155: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o' failed\r\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_TensorCompare.cu.o] Error 1\r\n3 errors detected in the compilation of \"/tmp/tmpxft_00001e3c_00000000-6_Embedding.cpp1.ii\".\r\nCMake Error at ATen_generated_Embedding.cu.o.cmake:267 (message):\r\n  Error generating file\r\n  .../pytorch/torch/lib/build/aten/src/ATen/CMakeFiles/ATen.dir/native/cuda/./ATen_generated_Embedding.cu.o\r\n\r\n\r\nsrc/ATen/CMakeFiles/ATen.dir/build.make:1148: recipe for target 'src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Embedding.cu.o' failed\r\nmake[2]: *** [src/ATen/CMakeFiles/ATen.dir/native/cuda/ATen_generated_Embedding.cu.o] Error 1\r\nCMakeFiles/Makefile2:194: recipe for target 'src/ATen/CMakeFiles/ATen.dir/all' failed\r\nmake[1]: *** [src/ATen/CMakeFiles/ATen.dir/all] Error 2\r\nMakefile:127: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n```\r\n</details>\r\n\r\nIn g++ 5.4.1 installed with `apt install g++-5`, even this fails:\r\n```cpp\r\n# g++-5 -std=c++11 test.cpp\r\n\r\n#include <cmath>\r\n\r\nint main()\r\n{\r\n    return int(std::isinf(3.0));\r\n}\r\n```\r\n\r\nSo it seems, usage of `std::isinf` etc is not stable in g++-5 and breaks pytorch.\r\n\r\nSeems math export to std is broken in g++-5.4.1\r\n\r\nAt the moment no standard compiler of Ubuntu 17.10 can compile PyTorch :("}
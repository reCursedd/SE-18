{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12169", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12169/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12169/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12169/events", "html_url": "https://github.com/pytorch/pytorch/issues/12169", "id": 364913880, "node_id": "MDU6SXNzdWUzNjQ5MTM4ODA=", "number": 12169, "title": "Error building a custom PyTorch CUDA extension with 1.0 on macOS High Sierra", "user": {"login": "michhar", "id": 13988934, "node_id": "MDQ6VXNlcjEzOTg4OTM0", "avatar_url": "https://avatars0.githubusercontent.com/u/13988934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michhar", "html_url": "https://github.com/michhar", "followers_url": "https://api.github.com/users/michhar/followers", "following_url": "https://api.github.com/users/michhar/following{/other_user}", "gists_url": "https://api.github.com/users/michhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/michhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michhar/subscriptions", "organizations_url": "https://api.github.com/users/michhar/orgs", "repos_url": "https://api.github.com/users/michhar/repos", "events_url": "https://api.github.com/users/michhar/events{/privacy}", "received_events_url": "https://api.github.com/users/michhar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-28T14:29:58Z", "updated_at": "2018-10-06T03:46:36Z", "closed_at": "2018-10-06T03:46:36Z", "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>I am getting an error during the build of a custom CUDA extension with PyTorch 1.0 on macOS High Sierra.  I built PyTorch from source with <code>clang version 3.9.1 (tags/RELEASE_391/final)</code>.   This build worked once with a <code>pip install</code> of PyTorch 0.4.1 and <code>gcc-7</code>, however I wanted to upgrade from 0.4.1 to 1.0 for these extensions.  I have CUDA and cuDNN, but no NVIDIA GPU.</p>\n<p>Please see stack trace below and additional information for context.  And thank you, a ton, in advance for any help/guidance/direction/questions back/magic wand/bandaid.</p>\n<h2>To Reproduce</h2>\n<p>Steps to reproduce the behavior:</p>\n<ol>\n<li>See environment below for setup</li>\n<li>Check out this folder <code>https://github.com/michhar/pytorch-mask-rcnn-samples/tree/master/roialign</code></li>\n<li>Run this build command for the PyTorch extension (excuse the format as it was run from a Jupyter notebook sitting on top of the System 3.6 Python install as the kernel - but you get the idea):</li>\n</ol>\n<pre><code>! export PATH=/Developer/NVIDIA/CUDA-10.0/bin:$PATH &amp;&amp;\\\n    export LD_LIBRARY_PATH=//Developer/NVIDIA/CUDA-10.0/lib:$LD_LIBRARY_PATH &amp;&amp;\\\n    export CUDA_BIN_PATH=/Developer/NVIDIA/CUDA-10.0/bin &amp;&amp;\\\n    export CUDA_TOOLKIT_ROOT_DIR=/Developer/NVIDIA/CUDA-10.0 &amp;&amp;\\\n    export CUDNN_LIB_DIR=/Developer/NVIDIA/CUDA-10.0/lib &amp;&amp;\\\n    export USE_CUDA=1 &amp;&amp;\\\n    export CC=clang &amp;&amp;\\\n    export CXX=clang++ &amp;&amp;\\\n    cd roialign/roi_align/src/cuda/ &amp;&amp;\\\n    nvcc -c -o crop_and_resize_kernel.cu.o crop_and_resize_kernel.cu -x cu -Xcompiler -fPIC &amp;&amp;\\\n    cd ../../ &amp;&amp;\\\n    python3 build.py\n</code></pre>\n\n<p>(See below)</p>\n<h2>Expected behavior</h2>\n<p>Compiled cuda extension:  <code>crop_and_resize_kernel.cu.o</code></p>\n<h2>Environment</h2>\n<p>Please copy and paste the output from our<br>\n[environment collection script]</p>\n<p><strong>Some values could not be collected and are manually specified in bold</strong></p>\n<pre><code>PyTorch version: 1.0.0a0+c35f85a\nIs debug build: No\nCUDA used to build PyTorch: 10.0\n\nOS: Mac OSX 10.13.6\nGCC version: Could not collect\nCMake version: version 3.9.0-rc5\n\nPython version: 3.6\nIs CUDA available: No\nCUDA runtime version: 9.2.148\nGPU models and configuration: Could not collect\nNvidia driver version: Could not collect\ncuDNN version: Probably one of the following:\n/usr/local/cuda/lib/libcudnn.7.dylib\n/usr/local/cuda/lib/libcudnn.dylib\n/usr/local/cuda/lib/libcudnn_static.a\n\nVersions of relevant libraries:\n[pip3] numpy (1.15.2)\n[pip3] torch (1.0.0a0+c35f85a)\n[pip3] torchvision (0.2.1)\n[conda] Could not collect\n</code></pre>\n<p><strong>Nvidia driver version:  Not known</strong><br>\n<strong>cuDNN version: 7.3.0</strong></p>\n<p>I don't have an NVIDIA GPU</p>\n<ul>\n<li>PyTorch Version (e.g., 1.0): 1.0.0a0+c35f85a</li>\n<li>OS (e.g., Linux): macOS High Sierra</li>\n<li>How you installed PyTorch (<code>conda</code>, <code>pip</code>, source): source</li>\n<li>Build command you used (if compiling from source) (from Jupyter):</li>\n</ul>\n<pre><code>! export PATH=/usr/local/cuda/bin:$PATH &amp;&amp;\\\n    export LD_LIBRARY_PATH=/usr/local/cuda/lib:$LD_LIBRARY_PATH &amp;&amp;\\\n    export CUDA_BIN_PATH=/usr/local/cuda/bin &amp;&amp;\\\n    export CUDA_TOOLKIT_ROOT_DIR=/Developer/NVIDIA/CUDA-10.0 &amp;&amp;\\\n    export CUDNN_LIB_DIR=/usr/local/cuda/lib &amp;&amp;\\\n    export CUDA_HOST_COMPILER=/usr/bin/gcc &amp;&amp;\\\n    export USE_CUDA=1 &amp;&amp;\\\n    export CC=clang &amp;&amp;\\\n    export CXX=clang++ &amp;&amp;\\\n    git clone --recursive https://github.com/pytorch/pytorch &amp;&amp;\\\n    cd pytorch &amp;&amp;\\\n    pip3 uninstall torch --yes &amp;&amp;\\\n    python3 setup.py clean &amp;&amp;\\\n    python3 setup.py build &amp;&amp;\\\n    TORCH_CUDA_ARCH_LIST=\"3.7\" python3 setup.py install\n</code></pre>\n<ul>\n<li>Python version: 3.6 (Python.org)</li>\n<li>CUDA/cuDNN version: 10.0/7.3.0</li>\n<li>GPU models and configuration: N/A</li>\n<li>Any other relevant information:</li>\n</ul>\n<h2>Additional context</h2>\n<h3>Stack trace snippet</h3>\n<pre><code>In file included from /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:1:\nIn file included from /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/TH.h:16:\nIn file included from /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/THTensor.h:14:\nIn file included from generic/THTensor.h:1:\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:31: warning: \n      redefinition of typedef 'at_Tensor_Impl' is a C11 feature\n      [-Wtypedef-redefinition]\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n                              ^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:31: note: \n      previous definition is here\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n                              ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:126:33: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int batch_size = image-&gt;size[0];\n                           ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:127:28: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int depth = image-&gt;size[1];\n                      ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:128:35: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int image_height = image-&gt;size[2];\n                             ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:129:34: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int image_width = image-&gt;size[3];\n                            ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:131:32: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int num_boxes = boxes-&gt;size[0];\n                          ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:167:39: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int batch_size = grads_image-&gt;size[0];\n                           ~~~~~~~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:168:34: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int depth = grads_image-&gt;size[1];\n                      ~~~~~~~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:169:41: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int image_height = grads_image-&gt;size[2];\n                             ~~~~~~~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:170:40: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int image_width = grads_image-&gt;size[3];\n                            ~~~~~~~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:172:32: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int num_boxes = grads-&gt;size[0];\n                          ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:173:34: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int crop_height = grads-&gt;size[2];\n                            ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:174:33: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int crop_width = grads-&gt;size[3];\n                           ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n14 warnings and 12 errors generated.\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/unixccompiler.py\", line 118, in _compile\n    extra_postargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/ccompiler.py\", line 909, in spawn\n    spawn(cmd, dry_run=self.dry_run)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/spawn.py\", line 36, in spawn\n    _spawn_posix(cmd, search_path, dry_run=dry_run)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/spawn.py\", line 159, in _spawn_posix\n    % (cmd, exit_status))\ndistutils.errors.DistutilsExecError: command 'clang' failed with exit status 1\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 51, in _build\n    dist.run_command('build_ext')\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 339, in run\n    self.build_extensions()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 448, in build_extensions\n    self._build_extensions_serial()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 473, in _build_extensions_serial\n    self.build_extension(ext)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 533, in build_extension\n    depends=ext.depends)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/ccompiler.py\", line 574, in compile\n    self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/unixccompiler.py\", line 120, in _compile\n    raise CompileError(msg)\ndistutils.errors.CompileError: command 'clang' failed with exit status 1\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"build.py\", line 40, in &lt;module&gt;\n    ffi.build()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 189, in build\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 111, in _build_extension\n    outfile = ffi.compile(tmpdir=tmpdir, verbose=verbose, target=libname)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/api.py\", line 697, in compile\n    compiler_verbose=verbose, debug=debug, **kwds)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/recompiler.py\", line 1520, in recompile\n    compiler_verbose, debug)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 22, in compile\n    outputfilename = _build(tmpdir, ext, compiler_verbose, debug)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 58, in _build\n    raise VerificationError('%s: %s' % (e.__class__.__name__, e))\ncffi.error.VerificationError: CompileError: command 'clang' failed with exit status 1\n</code></pre>", "body_text": "\ud83d\udc1b Bug\nI am getting an error during the build of a custom CUDA extension with PyTorch 1.0 on macOS High Sierra.  I built PyTorch from source with clang version 3.9.1 (tags/RELEASE_391/final).   This build worked once with a pip install of PyTorch 0.4.1 and gcc-7, however I wanted to upgrade from 0.4.1 to 1.0 for these extensions.  I have CUDA and cuDNN, but no NVIDIA GPU.\nPlease see stack trace below and additional information for context.  And thank you, a ton, in advance for any help/guidance/direction/questions back/magic wand/bandaid.\nTo Reproduce\nSteps to reproduce the behavior:\n\nSee environment below for setup\nCheck out this folder https://github.com/michhar/pytorch-mask-rcnn-samples/tree/master/roialign\nRun this build command for the PyTorch extension (excuse the format as it was run from a Jupyter notebook sitting on top of the System 3.6 Python install as the kernel - but you get the idea):\n\n! export PATH=/Developer/NVIDIA/CUDA-10.0/bin:$PATH &&\\\n    export LD_LIBRARY_PATH=//Developer/NVIDIA/CUDA-10.0/lib:$LD_LIBRARY_PATH &&\\\n    export CUDA_BIN_PATH=/Developer/NVIDIA/CUDA-10.0/bin &&\\\n    export CUDA_TOOLKIT_ROOT_DIR=/Developer/NVIDIA/CUDA-10.0 &&\\\n    export CUDNN_LIB_DIR=/Developer/NVIDIA/CUDA-10.0/lib &&\\\n    export USE_CUDA=1 &&\\\n    export CC=clang &&\\\n    export CXX=clang++ &&\\\n    cd roialign/roi_align/src/cuda/ &&\\\n    nvcc -c -o crop_and_resize_kernel.cu.o crop_and_resize_kernel.cu -x cu -Xcompiler -fPIC &&\\\n    cd ../../ &&\\\n    python3 build.py\n\n\n(See below)\nExpected behavior\nCompiled cuda extension:  crop_and_resize_kernel.cu.o\nEnvironment\nPlease copy and paste the output from our\n[environment collection script]\nSome values could not be collected and are manually specified in bold\nPyTorch version: 1.0.0a0+c35f85a\nIs debug build: No\nCUDA used to build PyTorch: 10.0\n\nOS: Mac OSX 10.13.6\nGCC version: Could not collect\nCMake version: version 3.9.0-rc5\n\nPython version: 3.6\nIs CUDA available: No\nCUDA runtime version: 9.2.148\nGPU models and configuration: Could not collect\nNvidia driver version: Could not collect\ncuDNN version: Probably one of the following:\n/usr/local/cuda/lib/libcudnn.7.dylib\n/usr/local/cuda/lib/libcudnn.dylib\n/usr/local/cuda/lib/libcudnn_static.a\n\nVersions of relevant libraries:\n[pip3] numpy (1.15.2)\n[pip3] torch (1.0.0a0+c35f85a)\n[pip3] torchvision (0.2.1)\n[conda] Could not collect\n\nNvidia driver version:  Not known\ncuDNN version: 7.3.0\nI don't have an NVIDIA GPU\n\nPyTorch Version (e.g., 1.0): 1.0.0a0+c35f85a\nOS (e.g., Linux): macOS High Sierra\nHow you installed PyTorch (conda, pip, source): source\nBuild command you used (if compiling from source) (from Jupyter):\n\n! export PATH=/usr/local/cuda/bin:$PATH &&\\\n    export LD_LIBRARY_PATH=/usr/local/cuda/lib:$LD_LIBRARY_PATH &&\\\n    export CUDA_BIN_PATH=/usr/local/cuda/bin &&\\\n    export CUDA_TOOLKIT_ROOT_DIR=/Developer/NVIDIA/CUDA-10.0 &&\\\n    export CUDNN_LIB_DIR=/usr/local/cuda/lib &&\\\n    export CUDA_HOST_COMPILER=/usr/bin/gcc &&\\\n    export USE_CUDA=1 &&\\\n    export CC=clang &&\\\n    export CXX=clang++ &&\\\n    git clone --recursive https://github.com/pytorch/pytorch &&\\\n    cd pytorch &&\\\n    pip3 uninstall torch --yes &&\\\n    python3 setup.py clean &&\\\n    python3 setup.py build &&\\\n    TORCH_CUDA_ARCH_LIST=\"3.7\" python3 setup.py install\n\n\nPython version: 3.6 (Python.org)\nCUDA/cuDNN version: 10.0/7.3.0\nGPU models and configuration: N/A\nAny other relevant information:\n\nAdditional context\nStack trace snippet\nIn file included from /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:1:\nIn file included from /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/TH.h:16:\nIn file included from /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/THTensor.h:14:\nIn file included from generic/THTensor.h:1:\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:31: warning: \n      redefinition of typedef 'at_Tensor_Impl' is a C11 feature\n      [-Wtypedef-redefinition]\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n                              ^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:31: note: \n      previous definition is here\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n                              ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:126:33: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int batch_size = image->size[0];\n                           ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:127:28: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int depth = image->size[1];\n                      ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:128:35: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int image_height = image->size[2];\n                             ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:129:34: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int image_width = image->size[3];\n                            ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:131:32: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int num_boxes = boxes->size[0];\n                          ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:167:39: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int batch_size = grads_image->size[0];\n                           ~~~~~~~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:168:34: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int depth = grads_image->size[1];\n                      ~~~~~~~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:169:41: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int image_height = grads_image->size[2];\n                             ~~~~~~~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:170:40: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int image_width = grads_image->size[3];\n                            ~~~~~~~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:172:32: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int num_boxes = grads->size[0];\n                          ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:173:34: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int crop_height = grads->size[2];\n                            ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:174:33: error: \n      incomplete definition of type 'struct at_Tensor_Impl'\n    const int crop_width = grads->size[3];\n                           ~~~~~^\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \n      forward declaration of 'struct at_Tensor_Impl'\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\n               ^\n14 warnings and 12 errors generated.\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/unixccompiler.py\", line 118, in _compile\n    extra_postargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/ccompiler.py\", line 909, in spawn\n    spawn(cmd, dry_run=self.dry_run)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/spawn.py\", line 36, in spawn\n    _spawn_posix(cmd, search_path, dry_run=dry_run)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/spawn.py\", line 159, in _spawn_posix\n    % (cmd, exit_status))\ndistutils.errors.DistutilsExecError: command 'clang' failed with exit status 1\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 51, in _build\n    dist.run_command('build_ext')\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 339, in run\n    self.build_extensions()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 448, in build_extensions\n    self._build_extensions_serial()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 473, in _build_extensions_serial\n    self.build_extension(ext)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 533, in build_extension\n    depends=ext.depends)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/ccompiler.py\", line 574, in compile\n    self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/unixccompiler.py\", line 120, in _compile\n    raise CompileError(msg)\ndistutils.errors.CompileError: command 'clang' failed with exit status 1\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"build.py\", line 40, in <module>\n    ffi.build()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 189, in build\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 111, in _build_extension\n    outfile = ffi.compile(tmpdir=tmpdir, verbose=verbose, target=libname)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/api.py\", line 697, in compile\n    compiler_verbose=verbose, debug=debug, **kwds)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/recompiler.py\", line 1520, in recompile\n    compiler_verbose, debug)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 22, in compile\n    outputfilename = _build(tmpdir, ext, compiler_verbose, debug)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 58, in _build\n    raise VerificationError('%s: %s' % (e.__class__.__name__, e))\ncffi.error.VerificationError: CompileError: command 'clang' failed with exit status 1", "body": "## \ud83d\udc1b Bug\r\n\r\nI am getting an error during the build of a custom CUDA extension with PyTorch 1.0 on macOS High Sierra.  I built PyTorch from source with `clang version 3.9.1 (tags/RELEASE_391/final)`.   This build worked once with a `pip install` of PyTorch 0.4.1 and `gcc-7`, however I wanted to upgrade from 0.4.1 to 1.0 for these extensions.  I have CUDA and cuDNN, but no NVIDIA GPU.\r\n\r\nPlease see stack trace below and additional information for context.  And thank you, a ton, in advance for any help/guidance/direction/questions back/magic wand/bandaid.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1.  See environment below for setup\r\n1. Check out this folder `https://github.com/michhar/pytorch-mask-rcnn-samples/tree/master/roialign`\r\n1. Run this build command for the PyTorch extension (excuse the format as it was run from a Jupyter notebook sitting on top of the System 3.6 Python install as the kernel - but you get the idea):\r\n```\r\n! export PATH=/Developer/NVIDIA/CUDA-10.0/bin:$PATH &&\\\r\n    export LD_LIBRARY_PATH=//Developer/NVIDIA/CUDA-10.0/lib:$LD_LIBRARY_PATH &&\\\r\n    export CUDA_BIN_PATH=/Developer/NVIDIA/CUDA-10.0/bin &&\\\r\n    export CUDA_TOOLKIT_ROOT_DIR=/Developer/NVIDIA/CUDA-10.0 &&\\\r\n    export CUDNN_LIB_DIR=/Developer/NVIDIA/CUDA-10.0/lib &&\\\r\n    export USE_CUDA=1 &&\\\r\n    export CC=clang &&\\\r\n    export CXX=clang++ &&\\\r\n    cd roialign/roi_align/src/cuda/ &&\\\r\n    nvcc -c -o crop_and_resize_kernel.cu.o crop_and_resize_kernel.cu -x cu -Xcompiler -fPIC &&\\\r\n    cd ../../ &&\\\r\n    python3 build.py\r\n```\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n(See below)\r\n\r\n\r\n## Expected behavior\r\n\r\nCompiled cuda extension:  `crop_and_resize_kernel.cu.o`\r\n\r\n## Environment\r\n\r\nPlease copy and paste the output from our\r\n[environment collection script]\r\n\r\n**Some values could not be collected and are manually specified in bold**\r\n```\r\nPyTorch version: 1.0.0a0+c35f85a\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0\r\n\r\nOS: Mac OSX 10.13.6\r\nGCC version: Could not collect\r\nCMake version: version 3.9.0-rc5\r\n\r\nPython version: 3.6\r\nIs CUDA available: No\r\nCUDA runtime version: 9.2.148\r\nGPU models and configuration: Could not collect\r\nNvidia driver version: Could not collect\r\ncuDNN version: Probably one of the following:\r\n/usr/local/cuda/lib/libcudnn.7.dylib\r\n/usr/local/cuda/lib/libcudnn.dylib\r\n/usr/local/cuda/lib/libcudnn_static.a\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy (1.15.2)\r\n[pip3] torch (1.0.0a0+c35f85a)\r\n[pip3] torchvision (0.2.1)\r\n[conda] Could not collect\r\n```\r\n\r\n**Nvidia driver version:  Not known**\r\n**cuDNN version: 7.3.0**\r\n\r\nI don't have an NVIDIA GPU\r\n\r\n\r\n - PyTorch Version (e.g., 1.0): 1.0.0a0+c35f85a\r\n - OS (e.g., Linux): macOS High Sierra\r\n - How you installed PyTorch (`conda`, `pip`, source): source\r\n - Build command you used (if compiling from source) (from Jupyter):\r\n```\r\n! export PATH=/usr/local/cuda/bin:$PATH &&\\\r\n    export LD_LIBRARY_PATH=/usr/local/cuda/lib:$LD_LIBRARY_PATH &&\\\r\n    export CUDA_BIN_PATH=/usr/local/cuda/bin &&\\\r\n    export CUDA_TOOLKIT_ROOT_DIR=/Developer/NVIDIA/CUDA-10.0 &&\\\r\n    export CUDNN_LIB_DIR=/usr/local/cuda/lib &&\\\r\n    export CUDA_HOST_COMPILER=/usr/bin/gcc &&\\\r\n    export USE_CUDA=1 &&\\\r\n    export CC=clang &&\\\r\n    export CXX=clang++ &&\\\r\n    git clone --recursive https://github.com/pytorch/pytorch &&\\\r\n    cd pytorch &&\\\r\n    pip3 uninstall torch --yes &&\\\r\n    python3 setup.py clean &&\\\r\n    python3 setup.py build &&\\\r\n    TORCH_CUDA_ARCH_LIST=\"3.7\" python3 setup.py install\r\n```\r\n - Python version: 3.6 (Python.org)\r\n - CUDA/cuDNN version: 10.0/7.3.0\r\n - GPU models and configuration: N/A\r\n - Any other relevant information:\r\n\r\n## Additional context\r\n\r\n### Stack trace snippet\r\n\r\n```\r\nIn file included from /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:1:\r\nIn file included from /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/TH.h:16:\r\nIn file included from /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/THTensor.h:14:\r\nIn file included from generic/THTensor.h:1:\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:31: warning: \r\n      redefinition of typedef 'at_Tensor_Impl' is a C11 feature\r\n      [-Wtypedef-redefinition]\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n                              ^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:31: note: \r\n      previous definition is here\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n                              ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:126:33: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int batch_size = image->size[0];\r\n                           ~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:127:28: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int depth = image->size[1];\r\n                      ~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:128:35: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int image_height = image->size[2];\r\n                             ~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:129:34: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int image_width = image->size[3];\r\n                            ~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:131:32: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int num_boxes = boxes->size[0];\r\n                          ~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:167:39: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int batch_size = grads_image->size[0];\r\n                           ~~~~~~~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:168:34: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int depth = grads_image->size[1];\r\n                      ~~~~~~~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:169:41: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int image_height = grads_image->size[2];\r\n                             ~~~~~~~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:170:40: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int image_width = grads_image->size[3];\r\n                            ~~~~~~~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:172:32: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int num_boxes = grads->size[0];\r\n                          ~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:173:34: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int crop_height = grads->size[2];\r\n                            ~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/roialign/roi_align/src/crop_and_resize.c:174:33: error: \r\n      incomplete definition of type 'struct at_Tensor_Impl'\r\n    const int crop_width = grads->size[3];\r\n                           ~~~~~^\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/../../lib/include/TH/generic/THTensor.h:14:16: note: \r\n      forward declaration of 'struct at_Tensor_Impl'\r\ntypedef struct at_Tensor_Impl at_Tensor_Impl;\r\n               ^\r\n14 warnings and 12 errors generated.\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/unixccompiler.py\", line 118, in _compile\r\n    extra_postargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/ccompiler.py\", line 909, in spawn\r\n    spawn(cmd, dry_run=self.dry_run)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/spawn.py\", line 36, in spawn\r\n    _spawn_posix(cmd, search_path, dry_run=dry_run)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/spawn.py\", line 159, in _spawn_posix\r\n    % (cmd, exit_status))\r\ndistutils.errors.DistutilsExecError: command 'clang' failed with exit status 1\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 51, in _build\r\n    dist.run_command('build_ext')\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 974, in run_command\r\n    cmd_obj.run()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 339, in run\r\n    self.build_extensions()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 448, in build_extensions\r\n    self._build_extensions_serial()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 473, in _build_extensions_serial\r\n    self.build_extension(ext)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 533, in build_extension\r\n    depends=ext.depends)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/ccompiler.py\", line 574, in compile\r\n    self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/unixccompiler.py\", line 120, in _compile\r\n    raise CompileError(msg)\r\ndistutils.errors.CompileError: command 'clang' failed with exit status 1\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"build.py\", line 40, in <module>\r\n    ffi.build()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 189, in build\r\n    _build_extension(ffi, cffi_wrapper_name, target_dir, verbose)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/torch/utils/ffi/__init__.py\", line 111, in _build_extension\r\n    outfile = ffi.compile(tmpdir=tmpdir, verbose=verbose, target=libname)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/api.py\", line 697, in compile\r\n    compiler_verbose=verbose, debug=debug, **kwds)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/recompiler.py\", line 1520, in recompile\r\n    compiler_verbose, debug)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 22, in compile\r\n    outputfilename = _build(tmpdir, ext, compiler_verbose, debug)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 58, in _build\r\n    raise VerificationError('%s: %s' % (e.__class__.__name__, e))\r\ncffi.error.VerificationError: CompileError: command 'clang' failed with exit status 1\r\n```\r\n"}
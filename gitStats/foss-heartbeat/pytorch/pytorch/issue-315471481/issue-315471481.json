{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6704", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6704/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6704/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6704/events", "html_url": "https://github.com/pytorch/pytorch/issues/6704", "id": 315471481, "node_id": "MDU6SXNzdWUzMTU0NzE0ODE=", "number": 6704, "title": "[ppc64le pytorch] random failures in test_det_logdet_slogdet (test_torch.TestTorch)", "user": {"login": "avmgithub", "id": 9083746, "node_id": "MDQ6VXNlcjkwODM3NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/9083746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avmgithub", "html_url": "https://github.com/avmgithub", "followers_url": "https://api.github.com/users/avmgithub/followers", "following_url": "https://api.github.com/users/avmgithub/following{/other_user}", "gists_url": "https://api.github.com/users/avmgithub/gists{/gist_id}", "starred_url": "https://api.github.com/users/avmgithub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avmgithub/subscriptions", "organizations_url": "https://api.github.com/users/avmgithub/orgs", "repos_url": "https://api.github.com/users/avmgithub/repos", "events_url": "https://api.github.com/users/avmgithub/events{/privacy}", "received_events_url": "https://api.github.com/users/avmgithub/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-04-18T13:07:02Z", "updated_at": "2018-04-18T20:37:12Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<ul>\n<li>PyTorch or Caffe2:  PyTorch</li>\n<li>OS: RedHat 7.4</li>\n<li>PyTorch version:</li>\n<li>How you installed PyTorch (conda, pip, source):</li>\n<li>Python version:  master branch as of 4/17/2018</li>\n<li>CUDA/cuDNN version:  7</li>\n<li>GPU models and configuration:   Nvidia P100</li>\n<li>GCC version (if compiling from source):  4.8.5</li>\n<li>CMake version:  3+</li>\n<li>Build command you used (if compiling from source):   python setup.py install</li>\n<li>Versions of any other relevant libraries:</li>\n</ul>\n<p>The following random failures has been happening for some time.  We do a nightly build and most of the time the test passes.  But in this case  both of the nightly builds using python 2 and 3 failed.  And it had different failures.   If I re-build and test several times in succession,  it may fail  1 out of  10 times.</p>\n<p>1st failure type</p>\n<p>FAIL: test_det_logdet_slogdet (test_torch.TestTorch)</p>\n<p>Traceback (most recent call last):<br>\nFile \"common.py\", line 66, in wrapper<br>\nfn(*args, **kwargs)<br>\nFile \"test_torch.py\", line 3577, in test_det_logdet_slogdet<br>\nself._test_det_logdet_slogdet(self, lambda x: x)<br>\nFile \"test_torch.py\", line 3573, in _test_det_logdet_slogdet<br>\ntest(u.mm(s.diag()).mm(v))<br>\nFile \"test_torch.py\", line 3512, in test<br>\ntest_single_det(M_clone, target, 'two columns are same')<br>\nFile \"test_torch.py\", line 3466, in test_single_det<br>\nself.assertEqual(logabsdet.exp(), det.abs(), 1e-7, '{} (slogdet logabsdet negative case)'.format(desc))<br>\nFile \"common.py\", line 243, in assertEqual<br>\nassertTensorsEqual(x, y)<br>\nFile \"common.py\", line 235, in assertTensorsEqual<br>\nself.assertLessEqual(max_err, prec, message)<br>\nAssertionError: two columns are same (slogdet logabsdet negative case)</p>\n<p>2nd Failure</p>\n<p>FAIL: test_det_logdet_slogdet (test_torch.TestTorch)</p>\n<p>Traceback (most recent call last):<br>\nFile \"/home/jenkins/pytorch/test/common.py\", line 66, in wrapper<br>\nfn(*args, **kwargs)<br>\nFile \"/home/jenkins/pytorch/test/test_torch.py\", line 3577, in test_det_logdet_slogdet<br>\nself._test_det_logdet_slogdet(self, lambda x: x)<br>\nFile \"/home/jenkins/pytorch/test/test_torch.py\", line 3573, in _test_det_logdet_slogdet<br>\ntest(u.mm(s.diag()).mm(v))<br>\nFile \"/home/jenkins/pytorch/test/test_torch.py\", line 3521, in test<br>\ntest_single_det(M_clone, target, 'exchanging rows')<br>\nFile \"/home/jenkins/pytorch/test/test_torch.py\", line 3473, in test_single_det<br>\nself.assertTrue(sdet.item() == 1, '{} (slogdet sign  positive case)'.format(desc))<br>\nAssertionError: False is not true : exchanging rows (slogdet sign  positive case)</p>", "body_text": "PyTorch or Caffe2:  PyTorch\nOS: RedHat 7.4\nPyTorch version:\nHow you installed PyTorch (conda, pip, source):\nPython version:  master branch as of 4/17/2018\nCUDA/cuDNN version:  7\nGPU models and configuration:   Nvidia P100\nGCC version (if compiling from source):  4.8.5\nCMake version:  3+\nBuild command you used (if compiling from source):   python setup.py install\nVersions of any other relevant libraries:\n\nThe following random failures has been happening for some time.  We do a nightly build and most of the time the test passes.  But in this case  both of the nightly builds using python 2 and 3 failed.  And it had different failures.   If I re-build and test several times in succession,  it may fail  1 out of  10 times.\n1st failure type\nFAIL: test_det_logdet_slogdet (test_torch.TestTorch)\nTraceback (most recent call last):\nFile \"common.py\", line 66, in wrapper\nfn(*args, **kwargs)\nFile \"test_torch.py\", line 3577, in test_det_logdet_slogdet\nself._test_det_logdet_slogdet(self, lambda x: x)\nFile \"test_torch.py\", line 3573, in _test_det_logdet_slogdet\ntest(u.mm(s.diag()).mm(v))\nFile \"test_torch.py\", line 3512, in test\ntest_single_det(M_clone, target, 'two columns are same')\nFile \"test_torch.py\", line 3466, in test_single_det\nself.assertEqual(logabsdet.exp(), det.abs(), 1e-7, '{} (slogdet logabsdet negative case)'.format(desc))\nFile \"common.py\", line 243, in assertEqual\nassertTensorsEqual(x, y)\nFile \"common.py\", line 235, in assertTensorsEqual\nself.assertLessEqual(max_err, prec, message)\nAssertionError: two columns are same (slogdet logabsdet negative case)\n2nd Failure\nFAIL: test_det_logdet_slogdet (test_torch.TestTorch)\nTraceback (most recent call last):\nFile \"/home/jenkins/pytorch/test/common.py\", line 66, in wrapper\nfn(*args, **kwargs)\nFile \"/home/jenkins/pytorch/test/test_torch.py\", line 3577, in test_det_logdet_slogdet\nself._test_det_logdet_slogdet(self, lambda x: x)\nFile \"/home/jenkins/pytorch/test/test_torch.py\", line 3573, in _test_det_logdet_slogdet\ntest(u.mm(s.diag()).mm(v))\nFile \"/home/jenkins/pytorch/test/test_torch.py\", line 3521, in test\ntest_single_det(M_clone, target, 'exchanging rows')\nFile \"/home/jenkins/pytorch/test/test_torch.py\", line 3473, in test_single_det\nself.assertTrue(sdet.item() == 1, '{} (slogdet sign  positive case)'.format(desc))\nAssertionError: False is not true : exchanging rows (slogdet sign  positive case)", "body": "- PyTorch or Caffe2:  PyTorch\r\n- OS: RedHat 7.4\r\n- PyTorch version:  \r\n- How you installed PyTorch (conda, pip, source):\r\n- Python version:  master branch as of 4/17/2018\r\n- CUDA/cuDNN version:  7\r\n- GPU models and configuration:   Nvidia P100\r\n- GCC version (if compiling from source):  4.8.5\r\n- CMake version:  3+\r\n- Build command you used (if compiling from source):   python setup.py install\r\n- Versions of any other relevant libraries:  \r\n\r\nThe following random failures has been happening for some time.  We do a nightly build and most of the time the test passes.  But in this case  both of the nightly builds using python 2 and 3 failed.  And it had different failures.   If I re-build and test several times in succession,  it may fail  1 out of  10 times.\r\n\r\n\r\n1st failure type\r\n\r\nFAIL: test_det_logdet_slogdet (test_torch.TestTorch)\r\n\r\nTraceback (most recent call last):\r\n  File \"common.py\", line 66, in wrapper\r\n    fn(*args, **kwargs)\r\n  File \"test_torch.py\", line 3577, in test_det_logdet_slogdet\r\n    self._test_det_logdet_slogdet(self, lambda x: x)\r\n  File \"test_torch.py\", line 3573, in _test_det_logdet_slogdet\r\n    test(u.mm(s.diag()).mm(v))\r\n  File \"test_torch.py\", line 3512, in test\r\n    test_single_det(M_clone, target, 'two columns are same')\r\n  File \"test_torch.py\", line 3466, in test_single_det\r\n    self.assertEqual(logabsdet.exp(), det.abs(), 1e-7, '{} (slogdet logabsdet negative case)'.format(desc))\r\n  File \"common.py\", line 243, in assertEqual\r\n    assertTensorsEqual(x, y)\r\n  File \"common.py\", line 235, in assertTensorsEqual\r\n    self.assertLessEqual(max_err, prec, message)\r\nAssertionError: two columns are same (slogdet logabsdet negative case)\r\n\r\n\r\n2nd Failure\r\n\r\nFAIL: test_det_logdet_slogdet (test_torch.TestTorch)\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/pytorch/test/common.py\", line 66, in wrapper\r\n    fn(*args, **kwargs)\r\n  File \"/home/jenkins/pytorch/test/test_torch.py\", line 3577, in test_det_logdet_slogdet\r\n    self._test_det_logdet_slogdet(self, lambda x: x)\r\n  File \"/home/jenkins/pytorch/test/test_torch.py\", line 3573, in _test_det_logdet_slogdet\r\n    test(u.mm(s.diag()).mm(v))\r\n  File \"/home/jenkins/pytorch/test/test_torch.py\", line 3521, in test\r\n    test_single_det(M_clone, target, 'exchanging rows')\r\n  File \"/home/jenkins/pytorch/test/test_torch.py\", line 3473, in test_single_det\r\n    self.assertTrue(sdet.item() == 1, '{} (slogdet sign  positive case)'.format(desc))\r\nAssertionError: False is not true : exchanging rows (slogdet sign  positive case)"}
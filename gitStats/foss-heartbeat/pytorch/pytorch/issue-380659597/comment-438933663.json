{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/438933663", "html_url": "https://github.com/pytorch/pytorch/issues/13963#issuecomment-438933663", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/13963", "id": 438933663, "node_id": "MDEyOklzc3VlQ29tbWVudDQzODkzMzY2Mw==", "user": {"login": "nerox8664", "id": 3521007, "node_id": "MDQ6VXNlcjM1MjEwMDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3521007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nerox8664", "html_url": "https://github.com/nerox8664", "followers_url": "https://api.github.com/users/nerox8664/followers", "following_url": "https://api.github.com/users/nerox8664/following{/other_user}", "gists_url": "https://api.github.com/users/nerox8664/gists{/gist_id}", "starred_url": "https://api.github.com/users/nerox8664/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nerox8664/subscriptions", "organizations_url": "https://api.github.com/users/nerox8664/orgs", "repos_url": "https://api.github.com/users/nerox8664/repos", "events_url": "https://api.github.com/users/nerox8664/events{/privacy}", "received_events_url": "https://api.github.com/users/nerox8664/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-15T06:34:52Z", "updated_at": "2018-11-15T06:34:52Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5652049\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zou3519\">@zou3519</a> the difference in <code>jit graph</code>:</p>\n<p>without cast (<code>x = x.view([x.size(0), -1])</code>):</p>\n<pre><code> %15 : Long() = onnx::Constant[value={0}](), scope: TestView\n  %16 : Dynamic = onnx::Shape(%14), scope: TestView\n  %18 : Long() = onnx::Gather[axis=0](%16, %15), scope: TestView\n  %19 : Long() = onnx::Constant[value={-1}](), scope: TestView\n  %26 : Dynamic = onnx::Unsqueeze[axes=[0]](%18)\n  %27 : Dynamic = onnx::Unsqueeze[axes=[0]](%19)\n  %28 : Dynamic = onnx::Concat[axis=0](%26, %27)\n  %21 : Float(1, 15488) = onnx::Reshape(%14, %28), scope: TestView\n</code></pre>\n<p>with cast (<code>x = x.view([int(x.size(0)), -1])</code>):</p>\n<pre><code>%16 : Float(1, 15488) = onnx::Flatten[axis=1](%14), scope: TestView\n</code></pre>", "body_text": "@zou3519 the difference in jit graph:\nwithout cast (x = x.view([x.size(0), -1])):\n %15 : Long() = onnx::Constant[value={0}](), scope: TestView\n  %16 : Dynamic = onnx::Shape(%14), scope: TestView\n  %18 : Long() = onnx::Gather[axis=0](%16, %15), scope: TestView\n  %19 : Long() = onnx::Constant[value={-1}](), scope: TestView\n  %26 : Dynamic = onnx::Unsqueeze[axes=[0]](%18)\n  %27 : Dynamic = onnx::Unsqueeze[axes=[0]](%19)\n  %28 : Dynamic = onnx::Concat[axis=0](%26, %27)\n  %21 : Float(1, 15488) = onnx::Reshape(%14, %28), scope: TestView\n\nwith cast (x = x.view([int(x.size(0)), -1])):\n%16 : Float(1, 15488) = onnx::Flatten[axis=1](%14), scope: TestView", "body": "@zou3519 the difference in `jit graph`:\r\n\r\nwithout cast (`x = x.view([x.size(0), -1])`): \r\n\r\n```\r\n %15 : Long() = onnx::Constant[value={0}](), scope: TestView\r\n  %16 : Dynamic = onnx::Shape(%14), scope: TestView\r\n  %18 : Long() = onnx::Gather[axis=0](%16, %15), scope: TestView\r\n  %19 : Long() = onnx::Constant[value={-1}](), scope: TestView\r\n  %26 : Dynamic = onnx::Unsqueeze[axes=[0]](%18)\r\n  %27 : Dynamic = onnx::Unsqueeze[axes=[0]](%19)\r\n  %28 : Dynamic = onnx::Concat[axis=0](%26, %27)\r\n  %21 : Float(1, 15488) = onnx::Reshape(%14, %28), scope: TestView\r\n```\r\n\r\nwith cast (`x = x.view([int(x.size(0)), -1])`):\r\n\r\n```\r\n%16 : Float(1, 15488) = onnx::Flatten[axis=1](%14), scope: TestView\r\n```"}
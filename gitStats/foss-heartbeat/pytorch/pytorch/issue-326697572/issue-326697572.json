{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7867", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7867/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7867/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7867/events", "html_url": "https://github.com/pytorch/pytorch/pull/7867", "id": 326697572, "node_id": "MDExOlB1bGxSZXF1ZXN0MTkwNzE4MjUw", "number": 7867, "title": "Split CI tests in half and run them in parallel", "user": {"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-05-26T00:58:33Z", "updated_at": "2018-11-23T15:44:42Z", "closed_at": "2018-05-30T21:42:26Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/7867", "html_url": "https://github.com/pytorch/pytorch/pull/7867", "diff_url": "https://github.com/pytorch/pytorch/pull/7867.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/7867.patch"}, "body_html": "<p>This PR aims to speed up our CI jobs by splitting some of the test jobs in half and running them in parallel. Specifically, we are targeting these 3 build environments that run the slowest in our CI:</p>\n<ul>\n<li>pytorch-macos-10.13-py3</li>\n<li>pytorch-win-ws2016-cuda9-cudnn7-py3</li>\n<li>pytorch-linux-xenial-cuda9-cudnn7-py3</li>\n</ul>\n<p>They typically take 40-50 mins from start to finish (not counting the wait time in the CI job queue), and half of the time is spent on running the tests. With this PR we will run two halves of the tests in parallel and cut 10 mins from the total runtime, a 20% improvement in our CI runtime in the ideal case (i.e. when all machines are available). We could consider splitting the tests further if we got overall positive results from this two-way split.</p>\n<p>Note that the runtime improvement won't show up in this PR because we need to flip a switch in the CI system to enable the splitting. But this will show that the new test script works in the old settings as well.</p>", "body_text": "This PR aims to speed up our CI jobs by splitting some of the test jobs in half and running them in parallel. Specifically, we are targeting these 3 build environments that run the slowest in our CI:\n\npytorch-macos-10.13-py3\npytorch-win-ws2016-cuda9-cudnn7-py3\npytorch-linux-xenial-cuda9-cudnn7-py3\n\nThey typically take 40-50 mins from start to finish (not counting the wait time in the CI job queue), and half of the time is spent on running the tests. With this PR we will run two halves of the tests in parallel and cut 10 mins from the total runtime, a 20% improvement in our CI runtime in the ideal case (i.e. when all machines are available). We could consider splitting the tests further if we got overall positive results from this two-way split.\nNote that the runtime improvement won't show up in this PR because we need to flip a switch in the CI system to enable the splitting. But this will show that the new test script works in the old settings as well.", "body": "This PR aims to speed up our CI jobs by splitting some of the test jobs in half and running them in parallel. Specifically, we are targeting these 3 build environments that run the slowest in our CI:\r\n\r\n- pytorch-macos-10.13-py3\r\n- pytorch-win-ws2016-cuda9-cudnn7-py3\r\n- pytorch-linux-xenial-cuda9-cudnn7-py3\r\n\r\nThey typically take 40-50 mins from start to finish (not counting the wait time in the CI job queue), and half of the time is spent on running the tests. With this PR we will run two halves of the tests in parallel and cut 10 mins from the total runtime, a 20% improvement in our CI runtime in the ideal case (i.e. when all machines are available). We could consider splitting the tests further if we got overall positive results from this two-way split.\r\n\r\nNote that the runtime improvement won't show up in this PR because we need to flip a switch in the CI system to enable the splitting. But this will show that the new test script works in the old settings as well."}
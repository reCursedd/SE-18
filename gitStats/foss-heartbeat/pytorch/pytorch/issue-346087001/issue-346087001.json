{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10062", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10062/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10062/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10062/events", "html_url": "https://github.com/pytorch/pytorch/issues/10062", "id": 346087001, "node_id": "MDU6SXNzdWUzNDYwODcwMDE=", "number": 10062, "title": "Does this mean onnx do not support spatialBN operator?", "user": {"login": "veepersgit", "id": 19464374, "node_id": "MDQ6VXNlcjE5NDY0Mzc0", "avatar_url": "https://avatars1.githubusercontent.com/u/19464374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/veepersgit", "html_url": "https://github.com/veepersgit", "followers_url": "https://api.github.com/users/veepersgit/followers", "following_url": "https://api.github.com/users/veepersgit/following{/other_user}", "gists_url": "https://api.github.com/users/veepersgit/gists{/gist_id}", "starred_url": "https://api.github.com/users/veepersgit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/veepersgit/subscriptions", "organizations_url": "https://api.github.com/users/veepersgit/orgs", "repos_url": "https://api.github.com/users/veepersgit/repos", "events_url": "https://api.github.com/users/veepersgit/events{/privacy}", "received_events_url": "https://api.github.com/users/veepersgit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}, {"id": 693805995, "node_id": "MDU6TGFiZWw2OTM4MDU5OTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/onnx", "name": "onnx", "color": "e99695", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-31T08:32:32Z", "updated_at": "2018-10-23T14:58:16Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I am using pytorch to train a shuffleNet model which uses spatialBN operator. And I'm trying this way: Pytorch model-&gt;onnx model-&gt;caffe2 model. It works smoothly. But when I try to do the inference using the well-transfered caffe2 model. It comes this:</p>\n<p>Unexpected Error: [enforce fail at spatial_batch_norm_op.cc:11] X.ndim() &gt;= 3 &amp;&amp; X.ndim() &lt;= 5.  Error from operator:<br>\ninput: \"1967\" input: \"1103\" input: \"1104\" input: \"1105\" input: \"1106\" output: \"1968\" name: \"\" type: \"SpatialBN\" arg { name: \"is_test\" i: 1 } arg { name: \"epsilon\" f: 0.001 } arg { name: \"momentum\" f: 0.9 } device_option { device_type: 0 cuda_gpu_id: 0 }</p>\n<p>Does this mean onnx do not support spatialBN operator?</p>", "body_text": "I am using pytorch to train a shuffleNet model which uses spatialBN operator. And I'm trying this way: Pytorch model->onnx model->caffe2 model. It works smoothly. But when I try to do the inference using the well-transfered caffe2 model. It comes this:\nUnexpected Error: [enforce fail at spatial_batch_norm_op.cc:11] X.ndim() >= 3 && X.ndim() <= 5.  Error from operator:\ninput: \"1967\" input: \"1103\" input: \"1104\" input: \"1105\" input: \"1106\" output: \"1968\" name: \"\" type: \"SpatialBN\" arg { name: \"is_test\" i: 1 } arg { name: \"epsilon\" f: 0.001 } arg { name: \"momentum\" f: 0.9 } device_option { device_type: 0 cuda_gpu_id: 0 }\nDoes this mean onnx do not support spatialBN operator?", "body": "I am using pytorch to train a shuffleNet model which uses spatialBN operator. And I'm trying this way: Pytorch model->onnx model->caffe2 model. It works smoothly. But when I try to do the inference using the well-transfered caffe2 model. It comes this:\r\n\r\nUnexpected Error: [enforce fail at spatial_batch_norm_op.cc:11] X.ndim() >= 3 && X.ndim() <= 5.  Error from operator: \r\ninput: \"1967\" input: \"1103\" input: \"1104\" input: \"1105\" input: \"1106\" output: \"1968\" name: \"\" type: \"SpatialBN\" arg { name: \"is_test\" i: 1 } arg { name: \"epsilon\" f: 0.001 } arg { name: \"momentum\" f: 0.9 } device_option { device_type: 0 cuda_gpu_id: 0 }\r\n\r\nDoes this mean onnx do not support spatialBN operator? "}
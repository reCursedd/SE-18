{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/292493655", "html_url": "https://github.com/pytorch/pytorch/pull/802#issuecomment-292493655", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/802", "id": 292493655, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjQ5MzY1NQ==", "user": {"login": "fmassa", "id": 9110200, "node_id": "MDQ6VXNlcjkxMTAyMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9110200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fmassa", "html_url": "https://github.com/fmassa", "followers_url": "https://api.github.com/users/fmassa/followers", "following_url": "https://api.github.com/users/fmassa/following{/other_user}", "gists_url": "https://api.github.com/users/fmassa/gists{/gist_id}", "starred_url": "https://api.github.com/users/fmassa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fmassa/subscriptions", "organizations_url": "https://api.github.com/users/fmassa/orgs", "repos_url": "https://api.github.com/users/fmassa/repos", "events_url": "https://api.github.com/users/fmassa/events{/privacy}", "received_events_url": "https://api.github.com/users/fmassa/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-07T09:53:55Z", "updated_at": "2017-04-07T09:53:55Z", "author_association": "MEMBER", "body_html": "<p>The GPU kernels are implemented in <a href=\"https://github.com/pytorch/pytorch/blob/master/torch/lib/THCUNN/SpatialClassNLLCriterion.cu\">https://github.com/pytorch/pytorch/blob/master/torch/lib/THCUNN/SpatialClassNLLCriterion.cu</a> and the C function calling it in <a href=\"https://github.com/pytorch/pytorch/blob/master/torch/lib/THCUNN/generic/SpatialClassNLLCriterion.cu\">https://github.com/pytorch/pytorch/blob/master/torch/lib/THCUNN/generic/SpatialClassNLLCriterion.cu</a><br>\nBut the same changes would need to be done in the corresponding CPU implementation, and then the python interface would need to be changed. But before doing it, we should see if it's something we would want to add to core or not (because the weighting can mimic the masking, but it's not super convenient for a few reasons mentioned above)</p>", "body_text": "The GPU kernels are implemented in https://github.com/pytorch/pytorch/blob/master/torch/lib/THCUNN/SpatialClassNLLCriterion.cu and the C function calling it in https://github.com/pytorch/pytorch/blob/master/torch/lib/THCUNN/generic/SpatialClassNLLCriterion.cu\nBut the same changes would need to be done in the corresponding CPU implementation, and then the python interface would need to be changed. But before doing it, we should see if it's something we would want to add to core or not (because the weighting can mimic the masking, but it's not super convenient for a few reasons mentioned above)", "body": "The GPU kernels are implemented in https://github.com/pytorch/pytorch/blob/master/torch/lib/THCUNN/SpatialClassNLLCriterion.cu and the C function calling it in https://github.com/pytorch/pytorch/blob/master/torch/lib/THCUNN/generic/SpatialClassNLLCriterion.cu\r\nBut the same changes would need to be done in the corresponding CPU implementation, and then the python interface would need to be changed. But before doing it, we should see if it's something we would want to add to core or not (because the weighting can mimic the masking, but it's not super convenient for a few reasons mentioned above)"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/375181908", "html_url": "https://github.com/pytorch/pytorch/pull/5920#issuecomment-375181908", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5920", "id": 375181908, "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTE4MTkwOA==", "user": {"login": "berzjackson", "id": 1171221, "node_id": "MDQ6VXNlcjExNzEyMjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1171221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berzjackson", "html_url": "https://github.com/berzjackson", "followers_url": "https://api.github.com/users/berzjackson/followers", "following_url": "https://api.github.com/users/berzjackson/following{/other_user}", "gists_url": "https://api.github.com/users/berzjackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/berzjackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berzjackson/subscriptions", "organizations_url": "https://api.github.com/users/berzjackson/orgs", "repos_url": "https://api.github.com/users/berzjackson/repos", "events_url": "https://api.github.com/users/berzjackson/events{/privacy}", "received_events_url": "https://api.github.com/users/berzjackson/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-22T05:11:37Z", "updated_at": "2018-03-22T05:15:14Z", "author_association": "NONE", "body_html": "<p>I happened to have gone through this part of the codebase and checked the implementations carefully last month. I believe there is no bug here.</p>\n<p>Sticking to your notations, here are the derivations for NAG in Pytorch</p>\n<p>\\theta'<em>{t} = \\theta</em>{t} - lr * \\mu * v_{t}<br>\nv_{t+1} = \\mu * v_{t} + g(\\theta_{t} - lr * \\mu * v_{t})<br>\n\\theta_{t+1} = \\theta_{t} - lr * v_{t+1}<br>\n\\theta'<em>{t+1} = \\theta</em>{t+1} - lr * \\mu * v_{t+1} = \\theta_{t} - lr * v_{t+1} - lr * \\mu * v_{t+1} = \\theta'<em>{t} + lr * \\mu * v</em>{t} - lr * v_{t+1} - lr * \\mu * v_{t+1} = \\theta'<em>{t} - lr * (v</em>{t+1} - \\mu * v_{t} + \\mu * v_{t+1}) = \\theta'<em>{t} - lr * (v</em>{t+1} - \\mu * v_{t} + \\mu * v_{t+1}) = \\theta'<em>{t} - lr * (g(\\theta'</em>{t}) + \\mu * v_{t+1})</p>", "body_text": "I happened to have gone through this part of the codebase and checked the implementations carefully last month. I believe there is no bug here.\nSticking to your notations, here are the derivations for NAG in Pytorch\n\\theta'{t} = \\theta{t} - lr * \\mu * v_{t}\nv_{t+1} = \\mu * v_{t} + g(\\theta_{t} - lr * \\mu * v_{t})\n\\theta_{t+1} = \\theta_{t} - lr * v_{t+1}\n\\theta'{t+1} = \\theta{t+1} - lr * \\mu * v_{t+1} = \\theta_{t} - lr * v_{t+1} - lr * \\mu * v_{t+1} = \\theta'{t} + lr * \\mu * v{t} - lr * v_{t+1} - lr * \\mu * v_{t+1} = \\theta'{t} - lr * (v{t+1} - \\mu * v_{t} + \\mu * v_{t+1}) = \\theta'{t} - lr * (v{t+1} - \\mu * v_{t} + \\mu * v_{t+1}) = \\theta'{t} - lr * (g(\\theta'{t}) + \\mu * v_{t+1})", "body": "I happened to have gone through this part of the codebase and checked the implementations carefully last month. I believe there is no bug here. \r\n\r\nSticking to your notations, here are the derivations for NAG in Pytorch\r\n\r\n\\theta'_{t} = \\theta_{t} - lr * \\mu * v_{t}\r\nv_{t+1} = \\mu * v_{t} + g(\\theta_{t} - lr * \\mu * v_{t})\r\n\\theta_{t+1} = \\theta_{t} - lr * v_{t+1}\r\n\\theta'_{t+1} = \\theta_{t+1} - lr * \\mu * v_{t+1} = \\theta_{t} - lr * v_{t+1} - lr * \\mu * v_{t+1} = \\theta'_{t} + lr * \\mu * v_{t} - lr * v_{t+1} - lr * \\mu * v_{t+1} = \\theta'_{t} - lr * (v_{t+1} - \\mu * v_{t} + \\mu * v_{t+1}) = \\theta'_{t} - lr * (v_{t+1} - \\mu * v_{t} + \\mu * v_{t+1}) = \\theta'_{t} - lr * (g(\\theta'_{t}) + \\mu * v_{t+1})"}
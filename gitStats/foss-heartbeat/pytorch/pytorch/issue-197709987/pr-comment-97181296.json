{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/97181296", "pull_request_review_id": 17791025, "id": 97181296, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk3MTgxMjk2", "diff_hunk": "@@ -160,7 +160,11 @@ def read_storage(reader, version):\n         # source:\n         # https://github.com/torch/torch7/blob/master/generic/Storage.c#L244\n         size = reader.read_long() * element_size\n-        return python_class.from_buffer(reader.f.read(size), 'native')\n+        # because there's no torch.cuda.FloatStorage.from_buffer\n+        if python_class == torch.cuda.FloatStorage:\n+            return torch.FloatStorage.from_buffer(reader.f.read(size), 'native').cuda()\n+        else:\n+            return python_class.from_buffer(reader.f.read(size), 'native')\n     return read_storage\n \n ", "path": "torch/utils/serialization/read_lua_file.py", "position": 12, "original_position": 12, "commit_id": "24acc27405d484ee427271ba69374aa6c3415fce", "original_commit_id": "24acc27405d484ee427271ba69374aa6c3415fce", "user": {"login": "Wakeupbuddy", "id": 1822032, "node_id": "MDQ6VXNlcjE4MjIwMzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1822032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Wakeupbuddy", "html_url": "https://github.com/Wakeupbuddy", "followers_url": "https://api.github.com/users/Wakeupbuddy/followers", "following_url": "https://api.github.com/users/Wakeupbuddy/following{/other_user}", "gists_url": "https://api.github.com/users/Wakeupbuddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Wakeupbuddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Wakeupbuddy/subscriptions", "organizations_url": "https://api.github.com/users/Wakeupbuddy/orgs", "repos_url": "https://api.github.com/users/Wakeupbuddy/repos", "events_url": "https://api.github.com/users/Wakeupbuddy/events{/privacy}", "received_events_url": "https://api.github.com/users/Wakeupbuddy/received_events", "type": "User", "site_admin": false}, "body": "I think we need to call the following for cudnn modules as well, like:\r\n\r\n`ensure_attr('cudnn.SpatialConvolution', 'bias', 'finput', 'fgradInput', 'gradWeight', 'gradBias')`\r\n`ensure_attr('cudnn.SpatialBatchNormalization', 'weight', 'bias', 'gradWeight', 'gradBias')\r\n`\r\n`ensure_attr('cudnn.BatchNormalization', 'weight', 'bias', 'gradWeight', 'gradBias')\r\n`\r\nmight need some change in registry_addon() as well, because it appends 'nn.' prefix for all input.", "created_at": "2017-01-21T00:23:40Z", "updated_at": "2018-11-23T15:32:15Z", "html_url": "https://github.com/pytorch/pytorch/pull/357#discussion_r97181296", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/357", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/97181296"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/357#discussion_r97181296"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/357"}}, "body_html": "<p>I think we need to call the following for cudnn modules as well, like:</p>\n<p><code>ensure_attr('cudnn.SpatialConvolution', 'bias', 'finput', 'fgradInput', 'gradWeight', 'gradBias')</code><br>\n<code>ensure_attr('cudnn.SpatialBatchNormalization', 'weight', 'bias', 'gradWeight', 'gradBias') </code><br>\n<code>ensure_attr('cudnn.BatchNormalization', 'weight', 'bias', 'gradWeight', 'gradBias') </code><br>\nmight need some change in registry_addon() as well, because it appends 'nn.' prefix for all input.</p>", "body_text": "I think we need to call the following for cudnn modules as well, like:\nensure_attr('cudnn.SpatialConvolution', 'bias', 'finput', 'fgradInput', 'gradWeight', 'gradBias')\nensure_attr('cudnn.SpatialBatchNormalization', 'weight', 'bias', 'gradWeight', 'gradBias') \nensure_attr('cudnn.BatchNormalization', 'weight', 'bias', 'gradWeight', 'gradBias') \nmight need some change in registry_addon() as well, because it appends 'nn.' prefix for all input."}
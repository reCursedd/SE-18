{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10147", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10147/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10147/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10147/events", "html_url": "https://github.com/pytorch/pytorch/pull/10147", "id": 346804012, "node_id": "MDExOlB1bGxSZXF1ZXN0MjA1NTc5MjY2", "number": 10147, "title": "Cuda half macros cleanup", "user": {"login": "syed-ahmed", "id": 8906225, "node_id": "MDQ6VXNlcjg5MDYyMjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/8906225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syed-ahmed", "html_url": "https://github.com/syed-ahmed", "followers_url": "https://api.github.com/users/syed-ahmed/followers", "following_url": "https://api.github.com/users/syed-ahmed/following{/other_user}", "gists_url": "https://api.github.com/users/syed-ahmed/gists{/gist_id}", "starred_url": "https://api.github.com/users/syed-ahmed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syed-ahmed/subscriptions", "organizations_url": "https://api.github.com/users/syed-ahmed/orgs", "repos_url": "https://api.github.com/users/syed-ahmed/repos", "events_url": "https://api.github.com/users/syed-ahmed/events{/privacy}", "received_events_url": "https://api.github.com/users/syed-ahmed/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-08-01T23:17:25Z", "updated_at": "2018-08-16T00:08:37Z", "closed_at": "2018-08-15T20:26:51Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/10147", "html_url": "https://github.com/pytorch/pytorch/pull/10147", "diff_url": "https://github.com/pytorch/pytorch/pull/10147.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/10147.patch"}, "body_html": "<p>Summary: This PR removes couple of macros throughout TH* as part of the re-factoring effort for ATen. Removing these macros should avoid confusion among developers who are trying to move things from TH* to ATen. This PR is part of the THCNumerics deprecation that I have been working on following up on <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=38511765\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mruberry\">@mruberry</a>'s <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"339988863\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/9318\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/9318/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/9318\">#9318</a>. I am separating these two commits to see if removal of these macros doesn't upset the pytorch public CI, as well as internal builds.</p>\n<ul>\n<li>\n<p>Commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/1248de7baf4e37f69aa871520135bc9779dccfda/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/1248de7baf4e37f69aa871520135bc9779dccfda\"><tt>1248de7</tt></a> removes the code paths guarded by <code>CUDA_HALF_INSTRUCTIONS</code> macro. Since the macro was removed in commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/2f186df52d029073c1745274e74ce8700aa3f0f0/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/2f186df52d029073c1745274e74ce8700aa3f0f0\"><tt>2f186df</tt></a>, <code>ifdef CUDA_HALF_INSTRUCTIONS</code> would return false and hence the code path that is kept after this change is for the false case of <code>ifdef CUDA_HALF_INSTRUCTIONS</code></p>\n</li>\n<li>\n<p>Commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/520c99b057e741ccd4c96653650932902fb8b53e/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/520c99b057e741ccd4c96653650932902fb8b53e\"><tt>520c99b</tt></a> removes the code paths guarded by <code>CUDA_HALF_TENSOR</code> macro. Since Pytorch now provides support for only CUDA 8.0 and above, <code>CUDA_HALF_TENSOR</code> is always true since CUDA 8.0 satisfies <code>CUDA_HAS_FP16</code> and hence, the code path that is kept after this change is for the true case of <code>ifdef CUDA_HALF_TENSOR</code>.</p>\n</li>\n</ul>", "body_text": "Summary: This PR removes couple of macros throughout TH* as part of the re-factoring effort for ATen. Removing these macros should avoid confusion among developers who are trying to move things from TH* to ATen. This PR is part of the THCNumerics deprecation that I have been working on following up on @mruberry's #9318. I am separating these two commits to see if removal of these macros doesn't upset the pytorch public CI, as well as internal builds.\n\n\nCommit 1248de7 removes the code paths guarded by CUDA_HALF_INSTRUCTIONS macro. Since the macro was removed in commit 2f186df, ifdef CUDA_HALF_INSTRUCTIONS would return false and hence the code path that is kept after this change is for the false case of ifdef CUDA_HALF_INSTRUCTIONS\n\n\nCommit 520c99b removes the code paths guarded by CUDA_HALF_TENSOR macro. Since Pytorch now provides support for only CUDA 8.0 and above, CUDA_HALF_TENSOR is always true since CUDA 8.0 satisfies CUDA_HAS_FP16 and hence, the code path that is kept after this change is for the true case of ifdef CUDA_HALF_TENSOR.", "body": "Summary: This PR removes couple of macros throughout TH* as part of the re-factoring effort for ATen. Removing these macros should avoid confusion among developers who are trying to move things from TH* to ATen. This PR is part of the THCNumerics deprecation that I have been working on following up on @mruberry's https://github.com/pytorch/pytorch/pull/9318. I am separating these two commits to see if removal of these macros doesn't upset the pytorch public CI, as well as internal builds.\r\n\r\n- Commit https://github.com/pytorch/pytorch/commit/1248de7baf4e37f69aa871520135bc9779dccfda removes the code paths guarded by `CUDA_HALF_INSTRUCTIONS` macro. Since the macro was removed in commit https://github.com/pytorch/pytorch/commit/2f186df52d029073c1745274e74ce8700aa3f0f0, `ifdef CUDA_HALF_INSTRUCTIONS` would return false and hence the code path that is kept after this change is for the false case of `ifdef CUDA_HALF_INSTRUCTIONS`\r\n\r\n- Commit https://github.com/pytorch/pytorch/commit/520c99b057e741ccd4c96653650932902fb8b53e removes the code paths guarded by `CUDA_HALF_TENSOR` macro. Since Pytorch now provides support for only CUDA 8.0 and above, `CUDA_HALF_TENSOR` is always true since CUDA 8.0 satisfies `CUDA_HAS_FP16` and hence, the code path that is kept after this change is for the true case of `ifdef CUDA_HALF_TENSOR`."}
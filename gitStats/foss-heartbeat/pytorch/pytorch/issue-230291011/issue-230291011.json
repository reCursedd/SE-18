{"url": "https://api.github.com/repos/pytorch/pytorch/issues/1607", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/1607/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/1607/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/1607/events", "html_url": "https://github.com/pytorch/pytorch/issues/1607", "id": 230291011, "node_id": "MDU6SXNzdWUyMzAyOTEwMTE=", "number": 1607, "title": "Conv2d is missing CUDA/CPU type checks", "user": {"login": "zklgame", "id": 8563573, "node_id": "MDQ6VXNlcjg1NjM1NzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8563573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zklgame", "html_url": "https://github.com/zklgame", "followers_url": "https://api.github.com/users/zklgame/followers", "following_url": "https://api.github.com/users/zklgame/following{/other_user}", "gists_url": "https://api.github.com/users/zklgame/gists{/gist_id}", "starred_url": "https://api.github.com/users/zklgame/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zklgame/subscriptions", "organizations_url": "https://api.github.com/users/zklgame/orgs", "repos_url": "https://api.github.com/users/zklgame/repos", "events_url": "https://api.github.com/users/zklgame/events{/privacy}", "received_events_url": "https://api.github.com/users/zklgame/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 545367190, "node_id": "MDU6TGFiZWw1NDUzNjcxOTA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/awaiting%20response", "name": "awaiting response", "color": "5319e7", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-05-22T05:52:29Z", "updated_at": "2018-03-19T14:52:05Z", "closed_at": "2018-03-19T14:52:05Z", "author_association": "NONE", "body_html": "<p>When I run the GPU version of pytorch, some error occurs, and kill the ipython notebook kernel.<br>\nsome code is listed as bellow:</p>\n<pre><code>dtype = torch.cuda.FloatTensor\ncnn = torchvision.models.squeezenet1_1(pretrained=True).features\ncnn.type(dtype)\n</code></pre>\n<pre><code>print type(prev_feat)\nprint len(cnn._modules.values())\nfor i, module in enumerate(cnn._modules.values()):\n        print i, module\n        next_feat = module(prev_feat)\n        print 'done module'\n        features.append(next_feat)\n        prev_feat = next_feat\nprint 'done all'\n</code></pre>\n<p>output is:</p>\n<pre><code>&lt;class 'torch.autograd.variable.Variable'&gt;\n13\n0 Conv2d(3, 64, kernel_size=(3, 3), stride=(2, 2))\n</code></pre>\n<p>Then, ipython notebook kernel stoped, infomation(too long to list them all):</p>\n<pre><code>*** Error in `/home/zkl/anaconda2/bin/python': free(): invalid pointer: 0x00007f790d2deae0 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7f79417f37e5]\n/lib/x86_64-linux-gnu/libc.so.6(+0x7fe0a)[0x7f79417fbe0a]\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x4c)[0x7f79417ff98c]\n/home/zkl/anaconda2/lib/python2.7/site-packages/zmq/backend/cython/../../../../.././libstdc++.so.6(_ZNSt15basic_stringbufIcSt11char_traitsIcESaIcEE8overflowEi+0x13b)[0x7f793ab09f9b]\n/home/zkl/anaconda2/lib/python2.7/site-packages/zmq/backend/cython/../../../../.././libstdc++.so.6(_ZNSt15basic_streambufIcSt11char_traitsIcEE6xsputnEPKcl+0x36)[0x7f793ab0e106]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/lib/libshm.so(_ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_l+0x1c5)[0x7f790d053235]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5d2842)[0x7f790d8d4842]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5d34ae)[0x7f790d8d54ae]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(_ZN5torch2nn33SpatialConvolutionMM_updateOutputEPN4thpp6TensorES3_S3_S3_S3_S3_iiiiii+0xb3)[0x7f790d8e91a3]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5caf27)[0x7f790d8ccf27]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(_ZN5torch8autograd11ConvForward5applyERKSt6vectorISt10shared_ptrINS0_8VariableEESaIS5_EE+0x17bf)[0x7f790d8d165f]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5c191b)[0x7f790d8c391b]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x715d)[0x7f794256e80d]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79a61)[0x7f79424eba61]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x5c64f)[0x7f79424ce64f]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0xba2ac)[0x7f794252c2ac]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x715d)[0x7f794256e80d]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8c95)[0x7f7942570345]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8c95)[0x7f7942570345]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCode+0x32)[0x7f7942570d52]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8158)[0x7f794256f808]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n======= Memory map: ========\n00400000-00401000 r-xp 00000000 08:04 4853203                            /home/zkl/anaconda2/bin/python2.7\n00600000-00601000 rw-p 00000000 08:04 4853203                            /home/zkl/anaconda2/bin/python2.7\n012c3000-3bc9d000 rw-p 00000000 00:00 0                                  [heap]\n200000000-200100000 rw-s 1cc537000 00:06 575                             /dev/nvidiactl\n200100000-200104000 rw-s 1cc63a000 00:06 575                             /dev/nvidiactl\n200104000-200120000 ---p 00000000 00:00 0 \n200120000-200520000 rw-s 1cc646000 00:06 575                             /dev/nvidiactl\n200520000-200524000 rw-s 8f058000 00:06 575                              /dev/nvidiactl\n200524000-200540000 ---p 00000000 00:00 0 \n200540000-200940000 rw-s 8f064000 00:06 575                              /dev/nvidiactl\n200940000-200a40000 rw-s 8e4ba000 00:06 575                              /dev/nvidiactl\n200a40000-200b40000 rw-s 8e5bd000 00:06 575                              /dev/nvidiactl\n200b40000-200c40000 rw-s 1cb61e000 00:06 575                             /dev/nvidiactl\n200c40000-200d40000 rw-s 1cb721000 00:06 575                             /dev/nvidiactl\n200d40000-200e40000 rw-s 1cb024000 00:06 575                             /dev/nvidiactl\n200e40000-200ec2000 rw-s 1cb127000 00:06 575                             /dev/nvidiactl\n200ec2000-200ee0000 ---p 00000000 00:00 0 \n200ee0000-200fe0000 rw-s 00000000 00:05 22857                            /dev/zero (deleted)\n200fe0000-700000000 ---p 00000000 00:00 0 \n7f78b8000000-7f78b8021000 rw-p 00000000 00:00 0 \n7f78b8021000-7f78bc000000 ---p 00000000 00:00 0 \n7f78bc000000-7f78bc021000 rw-p 00000000 00:00 0 \n7f78bc021000-7f78c0000000 ---p 00000000 00:00 0 \n7f78c0000000-7f78c0021000 rw-p 00000000 00:00 0 \n7f78c0021000-7f78c4000000 ---p 00000000 00:00 0 \n7f78c8000000-7f78c8021000 rw-p 00000000 00:00 0 \n7f78c8021000-7f78cc000000 ---p 00000000 00:00 0 \n7f78cc000000-7f78cc021000 rw-p 00000000 00:00 0 \n7f78cc021000-7f78d0000000 ---p 00000000 00:00 0 \n7f78d0b34000-7f78d15f9000 rw-p 00000000 00:00 0 \n7f78d20be000-7f78d2992000 rw-p 00000000 00:00 0 \n7f78d2a64000-7f78d2a65000 ---p 00000000 00:00 0 \n7f78d2a65000-7f78d2e65000 rw-p 00000000 00:00 0 \n7f78d2e65000-7f78d2e66000 ---p 00000000 00:00 0 \n7f78d2e66000-7f78d3933000 rw-p 00000000 00:00 0 \n7f78d3bff000-7f78d3c00000 ---p 00000000 00:00 0 \n7f78d3c00000-7f78d4000000 rw-p 00000000 00:00 0 \n7f78d4000000-7f78d4021000 rw-p 00000000 00:00 0 \n7f78d4021000-7f78d8000000 ---p 00000000 00:00 0 \n7f78d821b000-7f78d8568000 rw-p 00000000 00:00 0 \n7f78d88b5000-7f78d8bff000 rw-p 00000000 00:00 0 \n7f78d8c3c000-7f78d8d39000 r-xp 00000000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\n7f78d8d39000-7f78d8f38000 ---p 000fd000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\n7f78d8f38000-7f78d8f3d000 rw-p 000fc000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\n7f78d8f3d000-7f78d8f49000 rw-p 0035f000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\n7f78d8f49000-7f78d9199000 rw-p 00000000 00:00 0 \n7f78d930e000-7f78d940e000 rw-p 00000000 00:00 0 \n7f78d940e000-7f78d9450000 r-xp 00000000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\n7f78d9450000-7f78d964f000 ---p 00042000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\n7f78d964f000-7f78d9659000 rw-p 00041000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\n7f78d9659000-7f78d965a000 rw-p 00000000 00:00 0 \n7f78d965a000-7f78d9d28000 r-xp 00000000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\n7f78d9d28000-7f78d9f27000 ---p 006ce000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\n7f78d9f27000-7f78da043000 rw-p 006cd000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\n7f78da043000-7f78da04f000 rw-p 00000000 00:00 0 \n7f78da04f000-7f78da059000 r-xp 00000000 08:04 5507160                    /home/zkl/anaconda2/lib/python2.7/site-packages/scipy/optimize/_nnls.so\n7f78da059000-7f78da259000 ---p 0000a000 08:04 5507160                    /home/zkl/anaconda2/lib/python2.7/site-packages/scipy/optimize/_nnls.so\n</code></pre>\n<p>if I change the dtype to CPU version, everything is OK:</p>\n<pre><code>dtype = torch.FloatTensor\n</code></pre>\n<p>Well, I found some reason:<br>\nIf I change the prev_feat to .cuda() version, then everything works well. Now I really do not want the kernel to be crashed when this kind of mistake happened, can anyone help? Thanks.</p>", "body_text": "When I run the GPU version of pytorch, some error occurs, and kill the ipython notebook kernel.\nsome code is listed as bellow:\ndtype = torch.cuda.FloatTensor\ncnn = torchvision.models.squeezenet1_1(pretrained=True).features\ncnn.type(dtype)\n\nprint type(prev_feat)\nprint len(cnn._modules.values())\nfor i, module in enumerate(cnn._modules.values()):\n        print i, module\n        next_feat = module(prev_feat)\n        print 'done module'\n        features.append(next_feat)\n        prev_feat = next_feat\nprint 'done all'\n\noutput is:\n<class 'torch.autograd.variable.Variable'>\n13\n0 Conv2d(3, 64, kernel_size=(3, 3), stride=(2, 2))\n\nThen, ipython notebook kernel stoped, infomation(too long to list them all):\n*** Error in `/home/zkl/anaconda2/bin/python': free(): invalid pointer: 0x00007f790d2deae0 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7f79417f37e5]\n/lib/x86_64-linux-gnu/libc.so.6(+0x7fe0a)[0x7f79417fbe0a]\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x4c)[0x7f79417ff98c]\n/home/zkl/anaconda2/lib/python2.7/site-packages/zmq/backend/cython/../../../../.././libstdc++.so.6(_ZNSt15basic_stringbufIcSt11char_traitsIcESaIcEE8overflowEi+0x13b)[0x7f793ab09f9b]\n/home/zkl/anaconda2/lib/python2.7/site-packages/zmq/backend/cython/../../../../.././libstdc++.so.6(_ZNSt15basic_streambufIcSt11char_traitsIcEE6xsputnEPKcl+0x36)[0x7f793ab0e106]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/lib/libshm.so(_ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_l+0x1c5)[0x7f790d053235]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5d2842)[0x7f790d8d4842]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5d34ae)[0x7f790d8d54ae]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(_ZN5torch2nn33SpatialConvolutionMM_updateOutputEPN4thpp6TensorES3_S3_S3_S3_S3_iiiiii+0xb3)[0x7f790d8e91a3]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5caf27)[0x7f790d8ccf27]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(_ZN5torch8autograd11ConvForward5applyERKSt6vectorISt10shared_ptrINS0_8VariableEESaIS5_EE+0x17bf)[0x7f790d8d165f]\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5c191b)[0x7f790d8c391b]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x715d)[0x7f794256e80d]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79a61)[0x7f79424eba61]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x5c64f)[0x7f79424ce64f]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0xba2ac)[0x7f794252c2ac]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x715d)[0x7f794256e80d]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8c95)[0x7f7942570345]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8c95)[0x7f7942570345]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCode+0x32)[0x7f7942570d52]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8158)[0x7f794256f808]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\n======= Memory map: ========\n00400000-00401000 r-xp 00000000 08:04 4853203                            /home/zkl/anaconda2/bin/python2.7\n00600000-00601000 rw-p 00000000 08:04 4853203                            /home/zkl/anaconda2/bin/python2.7\n012c3000-3bc9d000 rw-p 00000000 00:00 0                                  [heap]\n200000000-200100000 rw-s 1cc537000 00:06 575                             /dev/nvidiactl\n200100000-200104000 rw-s 1cc63a000 00:06 575                             /dev/nvidiactl\n200104000-200120000 ---p 00000000 00:00 0 \n200120000-200520000 rw-s 1cc646000 00:06 575                             /dev/nvidiactl\n200520000-200524000 rw-s 8f058000 00:06 575                              /dev/nvidiactl\n200524000-200540000 ---p 00000000 00:00 0 \n200540000-200940000 rw-s 8f064000 00:06 575                              /dev/nvidiactl\n200940000-200a40000 rw-s 8e4ba000 00:06 575                              /dev/nvidiactl\n200a40000-200b40000 rw-s 8e5bd000 00:06 575                              /dev/nvidiactl\n200b40000-200c40000 rw-s 1cb61e000 00:06 575                             /dev/nvidiactl\n200c40000-200d40000 rw-s 1cb721000 00:06 575                             /dev/nvidiactl\n200d40000-200e40000 rw-s 1cb024000 00:06 575                             /dev/nvidiactl\n200e40000-200ec2000 rw-s 1cb127000 00:06 575                             /dev/nvidiactl\n200ec2000-200ee0000 ---p 00000000 00:00 0 \n200ee0000-200fe0000 rw-s 00000000 00:05 22857                            /dev/zero (deleted)\n200fe0000-700000000 ---p 00000000 00:00 0 \n7f78b8000000-7f78b8021000 rw-p 00000000 00:00 0 \n7f78b8021000-7f78bc000000 ---p 00000000 00:00 0 \n7f78bc000000-7f78bc021000 rw-p 00000000 00:00 0 \n7f78bc021000-7f78c0000000 ---p 00000000 00:00 0 \n7f78c0000000-7f78c0021000 rw-p 00000000 00:00 0 \n7f78c0021000-7f78c4000000 ---p 00000000 00:00 0 \n7f78c8000000-7f78c8021000 rw-p 00000000 00:00 0 \n7f78c8021000-7f78cc000000 ---p 00000000 00:00 0 \n7f78cc000000-7f78cc021000 rw-p 00000000 00:00 0 \n7f78cc021000-7f78d0000000 ---p 00000000 00:00 0 \n7f78d0b34000-7f78d15f9000 rw-p 00000000 00:00 0 \n7f78d20be000-7f78d2992000 rw-p 00000000 00:00 0 \n7f78d2a64000-7f78d2a65000 ---p 00000000 00:00 0 \n7f78d2a65000-7f78d2e65000 rw-p 00000000 00:00 0 \n7f78d2e65000-7f78d2e66000 ---p 00000000 00:00 0 \n7f78d2e66000-7f78d3933000 rw-p 00000000 00:00 0 \n7f78d3bff000-7f78d3c00000 ---p 00000000 00:00 0 \n7f78d3c00000-7f78d4000000 rw-p 00000000 00:00 0 \n7f78d4000000-7f78d4021000 rw-p 00000000 00:00 0 \n7f78d4021000-7f78d8000000 ---p 00000000 00:00 0 \n7f78d821b000-7f78d8568000 rw-p 00000000 00:00 0 \n7f78d88b5000-7f78d8bff000 rw-p 00000000 00:00 0 \n7f78d8c3c000-7f78d8d39000 r-xp 00000000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\n7f78d8d39000-7f78d8f38000 ---p 000fd000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\n7f78d8f38000-7f78d8f3d000 rw-p 000fc000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\n7f78d8f3d000-7f78d8f49000 rw-p 0035f000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\n7f78d8f49000-7f78d9199000 rw-p 00000000 00:00 0 \n7f78d930e000-7f78d940e000 rw-p 00000000 00:00 0 \n7f78d940e000-7f78d9450000 r-xp 00000000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\n7f78d9450000-7f78d964f000 ---p 00042000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\n7f78d964f000-7f78d9659000 rw-p 00041000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\n7f78d9659000-7f78d965a000 rw-p 00000000 00:00 0 \n7f78d965a000-7f78d9d28000 r-xp 00000000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\n7f78d9d28000-7f78d9f27000 ---p 006ce000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\n7f78d9f27000-7f78da043000 rw-p 006cd000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\n7f78da043000-7f78da04f000 rw-p 00000000 00:00 0 \n7f78da04f000-7f78da059000 r-xp 00000000 08:04 5507160                    /home/zkl/anaconda2/lib/python2.7/site-packages/scipy/optimize/_nnls.so\n7f78da059000-7f78da259000 ---p 0000a000 08:04 5507160                    /home/zkl/anaconda2/lib/python2.7/site-packages/scipy/optimize/_nnls.so\n\nif I change the dtype to CPU version, everything is OK:\ndtype = torch.FloatTensor\n\nWell, I found some reason:\nIf I change the prev_feat to .cuda() version, then everything works well. Now I really do not want the kernel to be crashed when this kind of mistake happened, can anyone help? Thanks.", "body": "When I run the GPU version of pytorch, some error occurs, and kill the ipython notebook kernel.\r\nsome code is listed as bellow:\r\n```\r\ndtype = torch.cuda.FloatTensor\r\ncnn = torchvision.models.squeezenet1_1(pretrained=True).features\r\ncnn.type(dtype)\r\n```\r\n```\r\nprint type(prev_feat)\r\nprint len(cnn._modules.values())\r\nfor i, module in enumerate(cnn._modules.values()):\r\n        print i, module\r\n        next_feat = module(prev_feat)\r\n        print 'done module'\r\n        features.append(next_feat)\r\n        prev_feat = next_feat\r\nprint 'done all'\r\n```\r\n\r\noutput is:\r\n```\r\n<class 'torch.autograd.variable.Variable'>\r\n13\r\n0 Conv2d(3, 64, kernel_size=(3, 3), stride=(2, 2))\r\n```\r\nThen, ipython notebook kernel stoped, infomation(too long to list them all):\r\n```\r\n*** Error in `/home/zkl/anaconda2/bin/python': free(): invalid pointer: 0x00007f790d2deae0 ***\r\n======= Backtrace: =========\r\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7f79417f37e5]\r\n/lib/x86_64-linux-gnu/libc.so.6(+0x7fe0a)[0x7f79417fbe0a]\r\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x4c)[0x7f79417ff98c]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/zmq/backend/cython/../../../../.././libstdc++.so.6(_ZNSt15basic_stringbufIcSt11char_traitsIcESaIcEE8overflowEi+0x13b)[0x7f793ab09f9b]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/zmq/backend/cython/../../../../.././libstdc++.so.6(_ZNSt15basic_streambufIcSt11char_traitsIcEE6xsputnEPKcl+0x36)[0x7f793ab0e106]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/lib/libshm.so(_ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_l+0x1c5)[0x7f790d053235]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5d2842)[0x7f790d8d4842]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5d34ae)[0x7f790d8d54ae]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(_ZN5torch2nn33SpatialConvolutionMM_updateOutputEPN4thpp6TensorES3_S3_S3_S3_S3_iiiiii+0xb3)[0x7f790d8e91a3]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5caf27)[0x7f790d8ccf27]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(_ZN5torch8autograd11ConvForward5applyERKSt6vectorISt10shared_ptrINS0_8VariableEESaIS5_EE+0x17bf)[0x7f790d8d165f]\r\n/home/zkl/anaconda2/lib/python2.7/site-packages/torch/_C.so(+0x5c191b)[0x7f790d8c391b]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x715d)[0x7f794256e80d]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79a61)[0x7f79424eba61]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x5c64f)[0x7f79424ce64f]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0xba2ac)[0x7f794252c2ac]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x715d)[0x7f794256e80d]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8c95)[0x7f7942570345]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8c95)[0x7f7942570345]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCode+0x32)[0x7f7942570d52]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8158)[0x7f794256f808]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyObject_Call+0x53)[0x7f79424bbe93]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x61d6)[0x7f794256d886]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x8b47)[0x7f79425701f7]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x89e)[0x7f7942570c3e]\r\n/home/zkl/anaconda2/bin/../lib/libpython2.7.so.1.0(+0x79b68)[0x7f79424ebb68]\r\n======= Memory map: ========\r\n00400000-00401000 r-xp 00000000 08:04 4853203                            /home/zkl/anaconda2/bin/python2.7\r\n00600000-00601000 rw-p 00000000 08:04 4853203                            /home/zkl/anaconda2/bin/python2.7\r\n012c3000-3bc9d000 rw-p 00000000 00:00 0                                  [heap]\r\n200000000-200100000 rw-s 1cc537000 00:06 575                             /dev/nvidiactl\r\n200100000-200104000 rw-s 1cc63a000 00:06 575                             /dev/nvidiactl\r\n200104000-200120000 ---p 00000000 00:00 0 \r\n200120000-200520000 rw-s 1cc646000 00:06 575                             /dev/nvidiactl\r\n200520000-200524000 rw-s 8f058000 00:06 575                              /dev/nvidiactl\r\n200524000-200540000 ---p 00000000 00:00 0 \r\n200540000-200940000 rw-s 8f064000 00:06 575                              /dev/nvidiactl\r\n200940000-200a40000 rw-s 8e4ba000 00:06 575                              /dev/nvidiactl\r\n200a40000-200b40000 rw-s 8e5bd000 00:06 575                              /dev/nvidiactl\r\n200b40000-200c40000 rw-s 1cb61e000 00:06 575                             /dev/nvidiactl\r\n200c40000-200d40000 rw-s 1cb721000 00:06 575                             /dev/nvidiactl\r\n200d40000-200e40000 rw-s 1cb024000 00:06 575                             /dev/nvidiactl\r\n200e40000-200ec2000 rw-s 1cb127000 00:06 575                             /dev/nvidiactl\r\n200ec2000-200ee0000 ---p 00000000 00:00 0 \r\n200ee0000-200fe0000 rw-s 00000000 00:05 22857                            /dev/zero (deleted)\r\n200fe0000-700000000 ---p 00000000 00:00 0 \r\n7f78b8000000-7f78b8021000 rw-p 00000000 00:00 0 \r\n7f78b8021000-7f78bc000000 ---p 00000000 00:00 0 \r\n7f78bc000000-7f78bc021000 rw-p 00000000 00:00 0 \r\n7f78bc021000-7f78c0000000 ---p 00000000 00:00 0 \r\n7f78c0000000-7f78c0021000 rw-p 00000000 00:00 0 \r\n7f78c0021000-7f78c4000000 ---p 00000000 00:00 0 \r\n7f78c8000000-7f78c8021000 rw-p 00000000 00:00 0 \r\n7f78c8021000-7f78cc000000 ---p 00000000 00:00 0 \r\n7f78cc000000-7f78cc021000 rw-p 00000000 00:00 0 \r\n7f78cc021000-7f78d0000000 ---p 00000000 00:00 0 \r\n7f78d0b34000-7f78d15f9000 rw-p 00000000 00:00 0 \r\n7f78d20be000-7f78d2992000 rw-p 00000000 00:00 0 \r\n7f78d2a64000-7f78d2a65000 ---p 00000000 00:00 0 \r\n7f78d2a65000-7f78d2e65000 rw-p 00000000 00:00 0 \r\n7f78d2e65000-7f78d2e66000 ---p 00000000 00:00 0 \r\n7f78d2e66000-7f78d3933000 rw-p 00000000 00:00 0 \r\n7f78d3bff000-7f78d3c00000 ---p 00000000 00:00 0 \r\n7f78d3c00000-7f78d4000000 rw-p 00000000 00:00 0 \r\n7f78d4000000-7f78d4021000 rw-p 00000000 00:00 0 \r\n7f78d4021000-7f78d8000000 ---p 00000000 00:00 0 \r\n7f78d821b000-7f78d8568000 rw-p 00000000 00:00 0 \r\n7f78d88b5000-7f78d8bff000 rw-p 00000000 00:00 0 \r\n7f78d8c3c000-7f78d8d39000 r-xp 00000000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\r\n7f78d8d39000-7f78d8f38000 ---p 000fd000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\r\n7f78d8f38000-7f78d8f3d000 rw-p 000fc000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\r\n7f78d8f3d000-7f78d8f49000 rw-p 0035f000 08:04 5642187                    /home/zkl/anaconda2/lib/python2.7/site-packages/torch/_thnn/_THCUNN.so\r\n7f78d8f49000-7f78d9199000 rw-p 00000000 00:00 0 \r\n7f78d930e000-7f78d940e000 rw-p 00000000 00:00 0 \r\n7f78d940e000-7f78d9450000 r-xp 00000000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\r\n7f78d9450000-7f78d964f000 ---p 00042000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\r\n7f78d964f000-7f78d9659000 rw-p 00041000 08:04 7605248                    /usr/lib/nvidia-375/libnvidia-fatbinaryloader.so.375.39\r\n7f78d9659000-7f78d965a000 rw-p 00000000 00:00 0 \r\n7f78d965a000-7f78d9d28000 r-xp 00000000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\r\n7f78d9d28000-7f78d9f27000 ---p 006ce000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\r\n7f78d9f27000-7f78da043000 rw-p 006cd000 08:04 400258                     /usr/lib/x86_64-linux-gnu/libcuda.so.375.39\r\n7f78da043000-7f78da04f000 rw-p 00000000 00:00 0 \r\n7f78da04f000-7f78da059000 r-xp 00000000 08:04 5507160                    /home/zkl/anaconda2/lib/python2.7/site-packages/scipy/optimize/_nnls.so\r\n7f78da059000-7f78da259000 ---p 0000a000 08:04 5507160                    /home/zkl/anaconda2/lib/python2.7/site-packages/scipy/optimize/_nnls.so\r\n``` \r\n\r\nif I change the dtype to CPU version, everything is OK:\r\n```\r\ndtype = torch.FloatTensor\r\n```\r\n\r\nWell, I found some reason:\r\nIf I change the prev_feat to .cuda() version, then everything works well. Now I really do not want the kernel to be crashed when this kind of mistake happened, can anyone help? Thanks.\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11614", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11614/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11614/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11614/events", "html_url": "https://github.com/pytorch/pytorch/issues/11614", "id": 359701191, "node_id": "MDU6SXNzdWUzNTk3MDExOTE=", "number": 11614, "title": "[jit] Support torch.scatter in jit.trace", "user": {"login": "fritzo", "id": 648532, "node_id": "MDQ6VXNlcjY0ODUzMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/648532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fritzo", "html_url": "https://github.com/fritzo", "followers_url": "https://api.github.com/users/fritzo/followers", "following_url": "https://api.github.com/users/fritzo/following{/other_user}", "gists_url": "https://api.github.com/users/fritzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/fritzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fritzo/subscriptions", "organizations_url": "https://api.github.com/users/fritzo/orgs", "repos_url": "https://api.github.com/users/fritzo/repos", "events_url": "https://api.github.com/users/fritzo/events{/privacy}", "received_events_url": "https://api.github.com/users/fritzo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 679953983, "node_id": "MDU6TGFiZWw2Nzk5NTM5ODM=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/jit", "name": "jit", "color": "c5def5", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-09-13T00:41:26Z", "updated_at": "2018-11-01T21:53:40Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>It would be nice to have jit support for <code>torch.scatter</code>, since <code>scatter</code> is the most common way to create one-hot vectors (to my knowledge).</p>\n<p>This is blocking e.g. jit support for <code>torch.distributions.OneHotCategorical.sample()</code> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"359284146\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/11560\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/11560/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/11560\">#11560</a> . Is there an easy workaround?</p>\n<h2>Failing test:</h2>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">test_scatter</span>():\n\n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">make_one_hot</span>(<span class=\"pl-smi\">x</span>, <span class=\"pl-smi\">i</span>):\n        <span class=\"pl-k\">return</span> x.new_zeros(x.shape).scatter(<span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>, i, <span class=\"pl-c1\">1.0</span>)\n\n    x <span class=\"pl-k\">=</span> torch.randn(<span class=\"pl-c1\">5</span>, <span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">3</span>)\n    i <span class=\"pl-k\">=</span> torch.randint(<span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">3</span>, torch.Size((<span class=\"pl-c1\">5</span>, <span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">1</span>)))\n    torch.jit.trace(make_one_hot, (x, i))</pre></div>\n<h2>Error:</h2>\n<details>\n<pre><code>________________________________________________ test_scatter _________________________________________________\n\n    def test_scatter():\n\n        def make_one_hot(x, i):\n            return x.new_zeros(x.shape).scatter(-1, i, 1.0)\n\n        x = torch.randn(5, 4, 3)\n        i = torch.randint(0, 3, torch.Size((5, 4, 1)))\n&gt;       torch.jit.trace(make_one_hot, (x, i))\n\ntests/infer/test_jit.py:161:\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n../../../pytorch-dev/torch/jit/__init__.py:521: in trace\n    _check_trace([example_inputs], func, executor_options, module, check_tolerance)\n../../../pytorch-dev/torch/jit/__init__.py:423: in _check_trace\n    traced_outs = run_mod_and_filter_tensor_outputs(module, inputs, 'trace')\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nmod = make_one_hot()\ninputs = (tensor([[[ 0.9098,  0.1538,  0.6344],\n         [ 0.3665,  0.3767,  0.2252],\n  ...,\n         [ 0.2171,  1.3690, -0.308...         [2]],\n\n        [[1],\n      ... [1],\n         [2]],\n\n        [[1],\n         [1],\n         [2],\n         [2]]]))\nrunning_what = 'trace'\n\n    def run_mod_and_filter_tensor_outputs(mod, inputs, running_what):\n        try:\n            outs = wrap_retval(mod(*_clone_inputs(inputs)))\n            outs = [out for out in outs if isinstance(out, torch.Tensor)]\n            return outs\n        except Exception as e:\n            raise TracingCheckError(*graph_diagnostic_info(),\n                                    extra_msg='Encountered an exception while running the ' + running_what +\n&gt;                                             ' with test inputs.\\nException:\\n' + indent(str(e)))\nE           TracingCheckError: Tracing failed sanity checks!\nE           Encountered an exception while running the trace with test inputs.\nE           Exception:\nE\nE\nE           \tSchema not found for node. File a bug report.\nE           \tNode: %22 : Dynamic = aten::scatter(%19, %20, %1, %21)\nE\nE           \tInput types:Dynamic, int, Long(*, *, *), float\nE           \tcandidates were:\nE           \t:\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/tensor.py(305): scatter\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(157): make_one_hot\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/jit/__init__.py(514): trace\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(161): test_scatter\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(196): pytest_pyfunc_call\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(1431): runtest\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(111): pytest_runtest_call\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(183): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(201): __init__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(185): call_runtest_hook\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(161): call_and_report\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(81): runtestprotocol\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(66): pytest_runtest_protocol\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(236): pytest_runtestloop\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(215): _main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(178): wrap_session\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(208): pytest_cmdline_main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/config/__init__.py(64): main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/bin/pytest(11): &lt;module&gt;\nE           \t:\nE           \toperation failed shape propagation:\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/tensor.py(305): scatter\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(157): make_one_hot\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/jit/__init__.py(514): trace\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(161): test_scatter\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(196): pytest_pyfunc_call\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(1431): runtest\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(111): pytest_runtest_call\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(183): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(201): __init__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(185): call_runtest_hook\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(161): call_and_report\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(81): runtestprotocol\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(66): pytest_runtest_protocol\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(236): pytest_runtestloop\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(215): _main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(178): wrap_session\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(208): pytest_cmdline_main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): &lt;lambda&gt;\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/config/__init__.py(64): main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/bin/pytest(11): &lt;module&gt;\n\n../../../pytorch-dev/torch/jit/__init__.py:392: TracingCheckError\n</code></pre>\n</details>\n<h2>System Info</h2>\n<pre><code>$ python collect_env.py\nCollecting environment information...\nPyTorch version: 0.5.0a0+276313d\nIs debug build: No\nCUDA used to build PyTorch: None\n\nOS: Mac OSX 10.13.3\nGCC version: Could not collect\nCMake version: version 3.12.0\n\nPython version: 2.7\nIs CUDA available: No\nCUDA runtime version: No CUDA\nGPU models and configuration: No CUDA\nNvidia driver version: No CUDA\ncuDNN version: No CUDA\n\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] torchfile                 0.1.0                     &lt;pip&gt;\n[conda] torchvision               0.2.0                     &lt;pip&gt;\n</code></pre>", "body_text": "It would be nice to have jit support for torch.scatter, since scatter is the most common way to create one-hot vectors (to my knowledge).\nThis is blocking e.g. jit support for torch.distributions.OneHotCategorical.sample() #11560 . Is there an easy workaround?\nFailing test:\ndef test_scatter():\n\n    def make_one_hot(x, i):\n        return x.new_zeros(x.shape).scatter(-1, i, 1.0)\n\n    x = torch.randn(5, 4, 3)\n    i = torch.randint(0, 3, torch.Size((5, 4, 1)))\n    torch.jit.trace(make_one_hot, (x, i))\nError:\n\n________________________________________________ test_scatter _________________________________________________\n\n    def test_scatter():\n\n        def make_one_hot(x, i):\n            return x.new_zeros(x.shape).scatter(-1, i, 1.0)\n\n        x = torch.randn(5, 4, 3)\n        i = torch.randint(0, 3, torch.Size((5, 4, 1)))\n>       torch.jit.trace(make_one_hot, (x, i))\n\ntests/infer/test_jit.py:161:\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n../../../pytorch-dev/torch/jit/__init__.py:521: in trace\n    _check_trace([example_inputs], func, executor_options, module, check_tolerance)\n../../../pytorch-dev/torch/jit/__init__.py:423: in _check_trace\n    traced_outs = run_mod_and_filter_tensor_outputs(module, inputs, 'trace')\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nmod = make_one_hot()\ninputs = (tensor([[[ 0.9098,  0.1538,  0.6344],\n         [ 0.3665,  0.3767,  0.2252],\n  ...,\n         [ 0.2171,  1.3690, -0.308...         [2]],\n\n        [[1],\n      ... [1],\n         [2]],\n\n        [[1],\n         [1],\n         [2],\n         [2]]]))\nrunning_what = 'trace'\n\n    def run_mod_and_filter_tensor_outputs(mod, inputs, running_what):\n        try:\n            outs = wrap_retval(mod(*_clone_inputs(inputs)))\n            outs = [out for out in outs if isinstance(out, torch.Tensor)]\n            return outs\n        except Exception as e:\n            raise TracingCheckError(*graph_diagnostic_info(),\n                                    extra_msg='Encountered an exception while running the ' + running_what +\n>                                             ' with test inputs.\\nException:\\n' + indent(str(e)))\nE           TracingCheckError: Tracing failed sanity checks!\nE           Encountered an exception while running the trace with test inputs.\nE           Exception:\nE\nE\nE           \tSchema not found for node. File a bug report.\nE           \tNode: %22 : Dynamic = aten::scatter(%19, %20, %1, %21)\nE\nE           \tInput types:Dynamic, int, Long(*, *, *), float\nE           \tcandidates were:\nE           \t:\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/tensor.py(305): scatter\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(157): make_one_hot\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/jit/__init__.py(514): trace\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(161): test_scatter\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(196): pytest_pyfunc_call\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(1431): runtest\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(111): pytest_runtest_call\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(183): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(201): __init__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(185): call_runtest_hook\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(161): call_and_report\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(81): runtestprotocol\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(66): pytest_runtest_protocol\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(236): pytest_runtestloop\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(215): _main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(178): wrap_session\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(208): pytest_cmdline_main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/config/__init__.py(64): main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/bin/pytest(11): <module>\nE           \t:\nE           \toperation failed shape propagation:\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/tensor.py(305): scatter\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(157): make_one_hot\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/jit/__init__.py(514): trace\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(161): test_scatter\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(196): pytest_pyfunc_call\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(1431): runtest\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(111): pytest_runtest_call\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(183): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(201): __init__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(185): call_runtest_hook\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(161): call_and_report\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(81): runtestprotocol\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(66): pytest_runtest_protocol\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(236): pytest_runtestloop\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(215): _main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(178): wrap_session\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(208): pytest_cmdline_main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/config/__init__.py(64): main\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/bin/pytest(11): <module>\n\n../../../pytorch-dev/torch/jit/__init__.py:392: TracingCheckError\n\n\nSystem Info\n$ python collect_env.py\nCollecting environment information...\nPyTorch version: 0.5.0a0+276313d\nIs debug build: No\nCUDA used to build PyTorch: None\n\nOS: Mac OSX 10.13.3\nGCC version: Could not collect\nCMake version: version 3.12.0\n\nPython version: 2.7\nIs CUDA available: No\nCUDA runtime version: No CUDA\nGPU models and configuration: No CUDA\nNvidia driver version: No CUDA\ncuDNN version: No CUDA\n\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] torchfile                 0.1.0                     <pip>\n[conda] torchvision               0.2.0                     <pip>", "body": "It would be nice to have jit support for `torch.scatter`, since `scatter` is the most common way to create one-hot vectors (to my knowledge).\r\n\r\nThis is blocking e.g. jit support for `torch.distributions.OneHotCategorical.sample()` #11560 . Is there an easy workaround?\r\n\r\n## Failing test:\r\n```py\r\ndef test_scatter():\r\n\r\n    def make_one_hot(x, i):\r\n        return x.new_zeros(x.shape).scatter(-1, i, 1.0)\r\n\r\n    x = torch.randn(5, 4, 3)\r\n    i = torch.randint(0, 3, torch.Size((5, 4, 1)))\r\n    torch.jit.trace(make_one_hot, (x, i))\r\n```\r\n\r\n## Error:\r\n\r\n<details>\r\n\r\n```\r\n________________________________________________ test_scatter _________________________________________________\r\n\r\n    def test_scatter():\r\n\r\n        def make_one_hot(x, i):\r\n            return x.new_zeros(x.shape).scatter(-1, i, 1.0)\r\n\r\n        x = torch.randn(5, 4, 3)\r\n        i = torch.randint(0, 3, torch.Size((5, 4, 1)))\r\n>       torch.jit.trace(make_one_hot, (x, i))\r\n\r\ntests/infer/test_jit.py:161:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n../../../pytorch-dev/torch/jit/__init__.py:521: in trace\r\n    _check_trace([example_inputs], func, executor_options, module, check_tolerance)\r\n../../../pytorch-dev/torch/jit/__init__.py:423: in _check_trace\r\n    traced_outs = run_mod_and_filter_tensor_outputs(module, inputs, 'trace')\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nmod = make_one_hot()\r\ninputs = (tensor([[[ 0.9098,  0.1538,  0.6344],\r\n         [ 0.3665,  0.3767,  0.2252],\r\n  ...,\r\n         [ 0.2171,  1.3690, -0.308...         [2]],\r\n\r\n        [[1],\r\n      ... [1],\r\n         [2]],\r\n\r\n        [[1],\r\n         [1],\r\n         [2],\r\n         [2]]]))\r\nrunning_what = 'trace'\r\n\r\n    def run_mod_and_filter_tensor_outputs(mod, inputs, running_what):\r\n        try:\r\n            outs = wrap_retval(mod(*_clone_inputs(inputs)))\r\n            outs = [out for out in outs if isinstance(out, torch.Tensor)]\r\n            return outs\r\n        except Exception as e:\r\n            raise TracingCheckError(*graph_diagnostic_info(),\r\n                                    extra_msg='Encountered an exception while running the ' + running_what +\r\n>                                             ' with test inputs.\\nException:\\n' + indent(str(e)))\r\nE           TracingCheckError: Tracing failed sanity checks!\r\nE           Encountered an exception while running the trace with test inputs.\r\nE           Exception:\r\nE\r\nE\r\nE           \tSchema not found for node. File a bug report.\r\nE           \tNode: %22 : Dynamic = aten::scatter(%19, %20, %1, %21)\r\nE\r\nE           \tInput types:Dynamic, int, Long(*, *, *), float\r\nE           \tcandidates were:\r\nE           \t:\r\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/tensor.py(305): scatter\r\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(157): make_one_hot\r\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/jit/__init__.py(514): trace\r\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(161): test_scatter\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(196): pytest_pyfunc_call\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(1431): runtest\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(111): pytest_runtest_call\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(183): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(201): __init__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(185): call_runtest_hook\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(161): call_and_report\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(81): runtestprotocol\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(66): pytest_runtest_protocol\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(236): pytest_runtestloop\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(215): _main\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(178): wrap_session\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(208): pytest_cmdline_main\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/config/__init__.py(64): main\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/bin/pytest(11): <module>\r\nE           \t:\r\nE           \toperation failed shape propagation:\r\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/tensor.py(305): scatter\r\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(157): make_one_hot\r\nE           \t/Users/fritzobermeyer/pytorch-dev/torch/jit/__init__.py(514): trace\r\nE           \t/Users/fritzobermeyer/github/uber/pyro/tests/infer/test_jit.py(161): test_scatter\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(196): pytest_pyfunc_call\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/python.py(1431): runtest\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(111): pytest_runtest_call\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(183): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(201): __init__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(185): call_runtest_hook\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(161): call_and_report\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(81): runtestprotocol\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/runner.py(66): pytest_runtest_protocol\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(236): pytest_runtestloop\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(215): _main\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(178): wrap_session\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/main.py(208): pytest_cmdline_main\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/callers.py(180): _multicall\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(61): <lambda>\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/manager.py(67): _hookexec\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/pluggy/hooks.py(258): __call__\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/lib/python2.7/site-packages/_pytest/config/__init__.py(64): main\r\nE           \t/Users/fritzobermeyer/miniconda2/envs/pytorch-dev/bin/pytest(11): <module>\r\n\r\n../../../pytorch-dev/torch/jit/__init__.py:392: TracingCheckError\r\n```\r\n\r\n</details>\r\n\r\n## System Info\r\n\r\n```\r\n$ python collect_env.py\r\nCollecting environment information...\r\nPyTorch version: 0.5.0a0+276313d\r\nIs debug build: No\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Mac OSX 10.13.3\r\nGCC version: Could not collect\r\nCMake version: version 3.12.0\r\n\r\nPython version: 2.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] torchfile                 0.1.0                     <pip>\r\n[conda] torchvision               0.2.0                     <pip>\r\n```"}
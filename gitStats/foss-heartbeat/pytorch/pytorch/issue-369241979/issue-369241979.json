{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12573", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12573/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12573/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12573/events", "html_url": "https://github.com/pytorch/pytorch/pull/12573", "id": 369241979, "node_id": "MDExOlB1bGxSZXF1ZXN0MjIyMjMwMzEw", "number": 12573, "title": "nn.Module hook fix and improvements", "user": {"login": "albanD", "id": 6359743, "node_id": "MDQ6VXNlcjYzNTk3NDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/6359743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albanD", "html_url": "https://github.com/albanD", "followers_url": "https://api.github.com/users/albanD/followers", "following_url": "https://api.github.com/users/albanD/following{/other_user}", "gists_url": "https://api.github.com/users/albanD/gists{/gist_id}", "starred_url": "https://api.github.com/users/albanD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albanD/subscriptions", "organizations_url": "https://api.github.com/users/albanD/orgs", "repos_url": "https://api.github.com/users/albanD/repos", "events_url": "https://api.github.com/users/albanD/events{/privacy}", "received_events_url": "https://api.github.com/users/albanD/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846310180, "node_id": "MDU6TGFiZWw4NDYzMTAxODA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bc-breaking", "name": "bc-breaking", "color": "ed7d8a", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-10-11T18:09:34Z", "updated_at": "2018-11-23T15:53:18Z", "closed_at": "2018-11-03T12:49:28Z", "author_association": "COLLABORATOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/12573", "html_url": "https://github.com/pytorch/pytorch/pull/12573", "diff_url": "https://github.com/pytorch/pytorch/pull/12573.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/12573.patch"}, "body_html": "<p>This PR adds the following:</p>\n<ul>\n<li>Allow forward pre hooks and foward hooks to modify the input by returning a not-None value. Some checks are done here to make sure the returned value is similar to the input.</li>\n<li>Fix the backward hooks for the case where all inputs and outputs are Tensors. Raise an error if any input or output is not a Tensor.</li>\n</ul>\n<p>Do we actually want to check the returned values from the forward hooks?</p>\n<p>Adding support for Module taking other things than Tensors (and giving <code>None</code> gradient for these) is left to be done later.<br>\nThis is a breaking change with the current nn.Module backward hooks. But no one should be using them as they are heavily broken atm anyway.</p>", "body_text": "This PR adds the following:\n\nAllow forward pre hooks and foward hooks to modify the input by returning a not-None value. Some checks are done here to make sure the returned value is similar to the input.\nFix the backward hooks for the case where all inputs and outputs are Tensors. Raise an error if any input or output is not a Tensor.\n\nDo we actually want to check the returned values from the forward hooks?\nAdding support for Module taking other things than Tensors (and giving None gradient for these) is left to be done later.\nThis is a breaking change with the current nn.Module backward hooks. But no one should be using them as they are heavily broken atm anyway.", "body": "This PR adds the following:\r\n- Allow forward pre hooks and foward hooks to modify the input by returning a not-None value. Some checks are done here to make sure the returned value is similar to the input.\r\n- Fix the backward hooks for the case where all inputs and outputs are Tensors. Raise an error if any input or output is not a Tensor.\r\n\r\n Do we actually want to check the returned values from the forward hooks?\r\n\r\nAdding support for Module taking other things than Tensors (and giving `None` gradient for these) is left to be done later.\r\nThis is a breaking change with the current nn.Module backward hooks. But no one should be using them as they are heavily broken atm anyway."}
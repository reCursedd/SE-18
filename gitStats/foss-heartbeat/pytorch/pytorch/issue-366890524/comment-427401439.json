{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/427401439", "html_url": "https://github.com/pytorch/pytorch/issues/12331#issuecomment-427401439", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12331", "id": 427401439, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzQwMTQzOQ==", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-05T15:17:42Z", "updated_at": "2018-10-05T15:17:42Z", "author_association": "MEMBER", "body_html": "<p>The recursive wrapping is extremely hard to get right. If you take checkpointing as an example, it already doesn't work in <code>grad</code> mode, can possibly greatly increase the complexity of backward, and we've had a few bugs in the implementation anyway. I think we might just need to create a whitelist of modules that can use backward callbacks and forbid them otherwise.</p>", "body_text": "The recursive wrapping is extremely hard to get right. If you take checkpointing as an example, it already doesn't work in grad mode, can possibly greatly increase the complexity of backward, and we've had a few bugs in the implementation anyway. I think we might just need to create a whitelist of modules that can use backward callbacks and forbid them otherwise.", "body": "The recursive wrapping is extremely hard to get right. If you take checkpointing as an example, it already doesn't work in `grad` mode, can possibly greatly increase the complexity of backward, and we've had a few bugs in the implementation anyway. I think we might just need to create a whitelist of modules that can use backward callbacks and forbid them otherwise."}
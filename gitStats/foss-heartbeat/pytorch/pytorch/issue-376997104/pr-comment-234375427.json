{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/234375427", "pull_request_review_id": 176015800, "id": 234375427, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNDM3NTQyNw==", "diff_hunk": "@@ -0,0 +1,32 @@\n+#pragma once\n+\n+#include \"caffe2/core/tensor.h\"\n+#include <c10/util/Array.h>\n+\n+namespace caffe2 {\n+namespace ops {\n+\n+struct LayerNorm final {\n+  static constexpr const char* name = \"LayerNorm\";\n+\n+  struct Cache final {\n+    Tensor scale = Tensor{CPU};\n+    Tensor bias = Tensor{CPU};\n+  };\n+\n+  using Signature = void(\n+      const Tensor& input,\n+      Tensor* output,\n+      Tensor* output_mean,\n+      Tensor* output_stddev,\n+      int axis,\n+      float epsilon,\n+      Cache* cache,\n+      BaseContext* context);", "path": "caffe2/operators/experimental/c10/schemas/layer_norm.h", "position": 25, "original_position": 25, "commit_id": "234a86dd9bca0d6b2b1d6b44cb186204cd6b76e3", "original_commit_id": "372aeff8b5877fe610024c23c5cef4883fff0f89", "user": {"login": "smessmer", "id": 2373925, "node_id": "MDQ6VXNlcjIzNzM5MjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2373925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smessmer", "html_url": "https://github.com/smessmer", "followers_url": "https://api.github.com/users/smessmer/followers", "following_url": "https://api.github.com/users/smessmer/following{/other_user}", "gists_url": "https://api.github.com/users/smessmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/smessmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smessmer/subscriptions", "organizations_url": "https://api.github.com/users/smessmer/orgs", "repos_url": "https://api.github.com/users/smessmer/repos", "events_url": "https://api.github.com/users/smessmer/events{/privacy}", "received_events_url": "https://api.github.com/users/smessmer/received_events", "type": "User", "site_admin": false}, "body": "When calling from caffe2, I'm getting the context from the Operator calling it, so that should be routed correctly and also work for CUDA. Calling CUDA from PyTorch won't work for the reasons you mentioned.", "created_at": "2018-11-16T23:16:37Z", "updated_at": "2018-11-23T15:55:05Z", "html_url": "https://github.com/pytorch/pytorch/pull/13533#discussion_r234375427", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/13533", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/234375427"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/13533#discussion_r234375427"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/13533"}}, "body_html": "<p>When calling from caffe2, I'm getting the context from the Operator calling it, so that should be routed correctly and also work for CUDA. Calling CUDA from PyTorch won't work for the reasons you mentioned.</p>", "body_text": "When calling from caffe2, I'm getting the context from the Operator calling it, so that should be routed correctly and also work for CUDA. Calling CUDA from PyTorch won't work for the reasons you mentioned.", "in_reply_to_id": 231007477}
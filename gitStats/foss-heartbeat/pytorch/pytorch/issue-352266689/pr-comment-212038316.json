{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/212038316", "pull_request_review_id": 148582031, "id": 212038316, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMjAzODMxNg==", "diff_hunk": "@@ -244,6 +244,17 @@ struct Value {\n   //          %5 = h(%6, %6)\n   void replaceAllUsesWith(Value * newValue);\n \n+  // Removes all uses of this value.\n+  //\n+  // Given:   %3 = f(%1, %2)\n+  //          %4 = g(%3, %5)\n+  //          %5 = h(%3, %4)\n+  // Execute: %3.removeAllUses()\n+  // Result:  %3 = f(%1, %2)\n+  //          %4 = g(%5)\n+  //          %5 = h(%4)\n+  void removeAllUses();", "path": "torch/csrc/jit/ir.h", "position": null, "original_position": 13, "commit_id": "fbcf02446753bff536faca7fa093af5f88fc621c", "original_commit_id": "3ab89f73ed99cbea775ac32ed1e502b081356cc5", "user": {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, "body": "I don't think we should add this function. It doesn't appear used, but even if it were, it encourages people to accidentally break schema. For instance, if someone tries to `destroy()` a Node and gets a \"there are still uses!\" exception, they might edit the code to first call `removeAllUses()` and then `destroy()`.  That would _appear_ to work at the call site, but in reality it would have broken the schema for every use and fail later in weird ways. ", "created_at": "2018-08-22T17:22:28Z", "updated_at": "2018-11-23T15:49:45Z", "html_url": "https://github.com/pytorch/pytorch/pull/10700#discussion_r212038316", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/10700", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/212038316"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/10700#discussion_r212038316"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/10700"}}, "body_html": "<p>I don't think we should add this function. It doesn't appear used, but even if it were, it encourages people to accidentally break schema. For instance, if someone tries to <code>destroy()</code> a Node and gets a \"there are still uses!\" exception, they might edit the code to first call <code>removeAllUses()</code> and then <code>destroy()</code>.  That would <em>appear</em> to work at the call site, but in reality it would have broken the schema for every use and fail later in weird ways.</p>", "body_text": "I don't think we should add this function. It doesn't appear used, but even if it were, it encourages people to accidentally break schema. For instance, if someone tries to destroy() a Node and gets a \"there are still uses!\" exception, they might edit the code to first call removeAllUses() and then destroy().  That would appear to work at the call site, but in reality it would have broken the schema for every use and fail later in weird ways."}
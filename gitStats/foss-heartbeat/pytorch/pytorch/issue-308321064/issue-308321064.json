{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5989", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5989/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5989/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5989/events", "html_url": "https://github.com/pytorch/pytorch/pull/5989", "id": 308321064, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc3MjcyMTIw", "number": 5989, "title": "[distributions] Rename .params to .arg_constraints, fix logic", "user": {"login": "fritzo", "id": 648532, "node_id": "MDQ6VXNlcjY0ODUzMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/648532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fritzo", "html_url": "https://github.com/fritzo", "followers_url": "https://api.github.com/users/fritzo/followers", "following_url": "https://api.github.com/users/fritzo/following{/other_user}", "gists_url": "https://api.github.com/users/fritzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/fritzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fritzo/subscriptions", "organizations_url": "https://api.github.com/users/fritzo/orgs", "repos_url": "https://api.github.com/users/fritzo/repos", "events_url": "https://api.github.com/users/fritzo/events{/privacy}", "received_events_url": "https://api.github.com/users/fritzo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-25T04:20:04Z", "updated_at": "2018-11-23T15:41:07Z", "closed_at": "2018-03-25T13:24:33Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/5989", "html_url": "https://github.com/pytorch/pytorch/pull/5989", "diff_url": "https://github.com/pytorch/pytorch/pull/5989.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/5989.patch"}, "body_html": "<p>This PR originated from discussion with <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a> at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"299546794\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/5358\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/5358/hovercard?comment_id=174145151&amp;comment_type=review_comment\" href=\"https://github.com/pytorch/pytorch/pull/5358#discussion_r174145151\">#5358 (comment)</a></p>\n<ol>\n<li>Renames <code>.params</code> to <code>.arg_constraints</code> to make it clear that this dict concerns arguments to the <code>__init__()</code> method (as suggested by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a> and <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1093846\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/alicanb\">@alicanb</a>). This avoids confusion with other PyTorch usage of <code>.parameters</code> to mean \"the set of leaf variables parameterizing an object\". The distinction is especially important regarding <code>TransformedDistribution</code>, some of whose parameters are part of <code>.base_dist</code> and other of whose parameters are part of various <code>.transforms</code>.</li>\n<li>Fixes buggy/inconsistent logic whereby <code>TransformedDistribution.params</code> was a <code>Constraint</code> object (a <code>constraints.dependent_property</code>) and referred to leaf params in its <code>.base_dist</code>. After this PR <code>TransformedDistribution.arg_constraints == {}</code>, since the <code>.base_dist</code> will do its own arg validation. This is currently triggering errors when we turn on arg_validation in the Pyro unit test suite <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"308205280\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/uber/pyro/issues/922\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/uber/pyro/pull/922/hovercard\" href=\"https://github.com/uber/pyro/pull/922\">uber/pyro#922</a> (test logs <a href=\"https://travis-ci.org/uber/pyro/jobs/357976836\" rel=\"nofollow\">https://travis-ci.org/uber/pyro/jobs/357976836</a>)</li>\n</ol>\n<p>Previous review: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"308305087\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/probtorch/pytorch/issues/142\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/probtorch/pytorch/pull/142/hovercard\" href=\"https://github.com/probtorch/pytorch/pull/142\">probtorch#142</a></p>", "body_text": "This PR originated from discussion with @apaszke at #5358 (comment)\n\nRenames .params to .arg_constraints to make it clear that this dict concerns arguments to the __init__() method (as suggested by @apaszke and @alicanb). This avoids confusion with other PyTorch usage of .parameters to mean \"the set of leaf variables parameterizing an object\". The distinction is especially important regarding TransformedDistribution, some of whose parameters are part of .base_dist and other of whose parameters are part of various .transforms.\nFixes buggy/inconsistent logic whereby TransformedDistribution.params was a Constraint object (a constraints.dependent_property) and referred to leaf params in its .base_dist. After this PR TransformedDistribution.arg_constraints == {}, since the .base_dist will do its own arg validation. This is currently triggering errors when we turn on arg_validation in the Pyro unit test suite uber/pyro#922 (test logs https://travis-ci.org/uber/pyro/jobs/357976836)\n\nPrevious review: probtorch#142", "body": "This PR originated from discussion with @apaszke at https://github.com/pytorch/pytorch/pull/5358#discussion_r174145151\r\n\r\n1. Renames `.params` to `.arg_constraints` to make it clear that this dict concerns arguments to the `__init__()` method (as suggested by @apaszke and @alicanb). This avoids confusion with other PyTorch usage of `.parameters` to mean \"the set of leaf variables parameterizing an object\". The distinction is especially important regarding `TransformedDistribution`, some of whose parameters are part of `.base_dist` and other of whose parameters are part of various `.transforms`.\r\n2. Fixes buggy/inconsistent logic whereby `TransformedDistribution.params` was a `Constraint` object (a `constraints.dependent_property`) and referred to leaf params in its `.base_dist`. After this PR `TransformedDistribution.arg_constraints == {}`, since the `.base_dist` will do its own arg validation. This is currently triggering errors when we turn on arg_validation in the Pyro unit test suite https://github.com/uber/pyro/pull/922 (test logs https://travis-ci.org/uber/pyro/jobs/357976836)\r\n\r\nPrevious review: https://github.com/probtorch/pytorch/pull/142"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/330738568", "html_url": "https://github.com/pytorch/pytorch/issues/2718#issuecomment-330738568", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2718", "id": 330738568, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDczODU2OA==", "user": {"login": "peterjc123", "id": 9998726, "node_id": "MDQ6VXNlcjk5OTg3MjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/9998726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peterjc123", "html_url": "https://github.com/peterjc123", "followers_url": "https://api.github.com/users/peterjc123/followers", "following_url": "https://api.github.com/users/peterjc123/following{/other_user}", "gists_url": "https://api.github.com/users/peterjc123/gists{/gist_id}", "starred_url": "https://api.github.com/users/peterjc123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peterjc123/subscriptions", "organizations_url": "https://api.github.com/users/peterjc123/orgs", "repos_url": "https://api.github.com/users/peterjc123/repos", "events_url": "https://api.github.com/users/peterjc123/events{/privacy}", "received_events_url": "https://api.github.com/users/peterjc123/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-20T03:58:42Z", "updated_at": "2017-09-20T03:58:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The stack trace is listed as the following:</p>\n<pre lang=\"Traceback\"><code>_C.cp36-win_amd64.pyd!torch::autograd::Engine::thread_main(torch::autograd::GraphTask * graph_task) Line 141\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!torch::autograd::Engine::thread_init(int) Line 121\tC++\tSymbols loaded.\n_C.cp36-win_amd64.pyd!torch::autograd::python::PythonEngine::thread_init(int device) Line 28\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_Invoker_pmf_pointer::_Call(void(torch::autograd::Engine::*)(int) _Pmf, torch::autograd::Engine * &amp;&amp;) Line 1790\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::invoke(void(torch::autograd::Engine::*)(int) &amp;&amp;) Line 1790\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad&lt;std::unique_ptr&lt;std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt;,std::default_delete&lt;std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt; &gt; &gt; &gt;::_Execute(std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt; &amp;) Line 240\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad&lt;std::unique_ptr&lt;std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt;,std::default_delete&lt;std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt; &gt; &gt; &gt;::_Run(std::_LaunchPad&lt;std::unique_ptr&lt;std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt;,std::default_delete&lt;std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt; &gt; &gt; &gt; *) Line 247\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad&lt;std::unique_ptr&lt;std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt;,std::default_delete&lt;std::tuple&lt;void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int&gt; &gt; &gt; &gt;::_Go() Line 232\tC++\tSymbols loaded.\n_C.cp36-win_amd64.pyd!std::_Pad::_Call_func(void * _Data) Line 210\tC++\tSymbols loaded.\n</code></pre>\n<p>It stucks in the while loop in the function thread_main of engine.cpp. The exact location that it get freezed is:<br>\n<strong></strong></p><strong>\n<div class=\"highlight highlight-source-c++\"><pre>FunctionTask task = queue-&gt;<span class=\"pl-en\">pop_back</span>();</pre></div>\n</strong>\nAt that time, the queue is empty. It happens on two background threads, while the main thread is waiting for the two threads to terminate to get the traceback.", "body_text": "The stack trace is listed as the following:\n_C.cp36-win_amd64.pyd!torch::autograd::Engine::thread_main(torch::autograd::GraphTask * graph_task) Line 141\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!torch::autograd::Engine::thread_init(int) Line 121\tC++\tSymbols loaded.\n_C.cp36-win_amd64.pyd!torch::autograd::python::PythonEngine::thread_init(int device) Line 28\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_Invoker_pmf_pointer::_Call(void(torch::autograd::Engine::*)(int) _Pmf, torch::autograd::Engine * &&) Line 1790\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::invoke(void(torch::autograd::Engine::*)(int) &&) Line 1790\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad<std::unique_ptr<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int>,std::default_delete<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> > > >::_Execute(std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> &) Line 240\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad<std::unique_ptr<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int>,std::default_delete<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> > > >::_Run(std::_LaunchPad<std::unique_ptr<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int>,std::default_delete<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> > > > *) Line 247\tC++\tSymbols loaded.\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad<std::unique_ptr<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int>,std::default_delete<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> > > >::_Go() Line 232\tC++\tSymbols loaded.\n_C.cp36-win_amd64.pyd!std::_Pad::_Call_func(void * _Data) Line 210\tC++\tSymbols loaded.\n\nIt stucks in the while loop in the function thread_main of engine.cpp. The exact location that it get freezed is:\n\nFunctionTask task = queue->pop_back();\n\nAt that time, the queue is empty. It happens on two background threads, while the main thread is waiting for the two threads to terminate to get the traceback.", "body": "The stack trace is listed as the following:\r\n```Traceback\r\n_C.cp36-win_amd64.pyd!torch::autograd::Engine::thread_main(torch::autograd::GraphTask * graph_task) Line 141\tC++\tSymbols loaded.\r\n[Inline Frame] _C.cp36-win_amd64.pyd!torch::autograd::Engine::thread_init(int) Line 121\tC++\tSymbols loaded.\r\n_C.cp36-win_amd64.pyd!torch::autograd::python::PythonEngine::thread_init(int device) Line 28\tC++\tSymbols loaded.\r\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_Invoker_pmf_pointer::_Call(void(torch::autograd::Engine::*)(int) _Pmf, torch::autograd::Engine * &&) Line 1790\tC++\tSymbols loaded.\r\n[Inline Frame] _C.cp36-win_amd64.pyd!std::invoke(void(torch::autograd::Engine::*)(int) &&) Line 1790\tC++\tSymbols loaded.\r\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad<std::unique_ptr<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int>,std::default_delete<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> > > >::_Execute(std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> &) Line 240\tC++\tSymbols loaded.\r\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad<std::unique_ptr<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int>,std::default_delete<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> > > >::_Run(std::_LaunchPad<std::unique_ptr<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int>,std::default_delete<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> > > > *) Line 247\tC++\tSymbols loaded.\r\n[Inline Frame] _C.cp36-win_amd64.pyd!std::_LaunchPad<std::unique_ptr<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int>,std::default_delete<std::tuple<void (__cdecl torch::autograd::Engine::*)(int),torch::autograd::Engine *,int> > > >::_Go() Line 232\tC++\tSymbols loaded.\r\n_C.cp36-win_amd64.pyd!std::_Pad::_Call_func(void * _Data) Line 210\tC++\tSymbols loaded.\r\n```\r\nIt stucks in the while loop in the function thread_main of engine.cpp. The exact location that it get freezed is:\r\n<strong>\r\n```CPP\r\nFunctionTask task = queue->pop_back();\r\n```\r\n</strong>\r\nAt that time, the queue is empty. It happens on two background threads, while the main thread is waiting for the two threads to terminate to get the traceback."}
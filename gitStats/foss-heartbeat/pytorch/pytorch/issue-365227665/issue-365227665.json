{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12203", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12203/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12203/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12203/events", "html_url": "https://github.com/pytorch/pytorch/pull/12203", "id": 365227665, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE5MjA2NzUx", "number": 12203, "title": "[JIT] Allow gathering tuple", "user": {"login": "zasdfgbnm", "id": 1032377, "node_id": "MDQ6VXNlcjEwMzIzNzc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1032377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zasdfgbnm", "html_url": "https://github.com/zasdfgbnm", "followers_url": "https://api.github.com/users/zasdfgbnm/followers", "following_url": "https://api.github.com/users/zasdfgbnm/following{/other_user}", "gists_url": "https://api.github.com/users/zasdfgbnm/gists{/gist_id}", "starred_url": "https://api.github.com/users/zasdfgbnm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zasdfgbnm/subscriptions", "organizations_url": "https://api.github.com/users/zasdfgbnm/orgs", "repos_url": "https://api.github.com/users/zasdfgbnm/repos", "events_url": "https://api.github.com/users/zasdfgbnm/events{/privacy}", "received_events_url": "https://api.github.com/users/zasdfgbnm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-09-30T14:09:57Z", "updated_at": "2018-11-13T01:56:01Z", "closed_at": "2018-11-13T01:56:01Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/12203", "html_url": "https://github.com/pytorch/pytorch/pull/12203", "diff_url": "https://github.com/pytorch/pytorch/pull/12203.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/12203.patch"}, "body_html": "<p><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #12365.\">Closes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"367083612\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/12365\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/12365/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/12365\">#12365</a></p>\n<p>Current, the following code gives an error:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-en\">@torch.jit.script</span>\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">f</span>(<span class=\"pl-smi\">x</span>):\n    <span class=\"pl-k\">return</span> torch.sort(x)[<span class=\"pl-c1\">0</span>]</pre></div>\n<p>With error message:</p>\n<pre><code>Traceback (most recent call last):\n  File \"quicktest.py\", line 3, in &lt;module&gt;\n    @torch.jit.script\n  File \"/Users/gaoxiang/anaconda3/lib/python3.6/site-packages/torch/jit/__init__.py\", line 589, in script\n    graph = _jit_script_compile(ast, rcb)\nRuntimeError: gatherable-&gt;type()-&gt;isSubtypeOf(DynamicType::get()) ASSERT FAILED at /Users/administrator/nightlies/2018_09_28/wheel_build_dirs/conda_3.6/conda/conda-bld/pytorch-nightly_1538131714608/work/torch/csrc/jit/script/compiler.cpp:1819, please report a bug to PyTorch. (emitBasicGather at /Users/administrator/nightlies/2018_09_28/wheel_build_dirs/conda_3.6/conda/conda-bld/pytorch-nightly_1538131714608/work/torch/csrc/jit/script/compiler.cpp:1819)\nframe #0: torch::jit::script::to_ir::emitSimpleExpr(std::__1::shared_ptr&lt;torch::jit::script::Tree&gt; const&amp;) + 2371 (0x10c3e5e53 in libtorch.dylib)\nframe #1: torch::jit::script::to_ir::emitSugaredExpr(torch::jit::script::Expr, unsigned long) + 1446 (0x10c3dd326 in libtorch.dylib)\nframe #2: torch::jit::script::to_ir::emitExpr(torch::jit::script::Expr) + 69 (0x10c3dddd5 in libtorch.dylib)\nframe #3: torch::jit::script::to_ir::getNamedValues(std::__1::vector&lt;std::__1::shared_ptr&lt;torch::jit::script::Tree&gt;, std::__1::allocator&lt;std::__1::shared_ptr&lt;torch::jit::script::Tree&gt; &gt; &gt;, bool) + 1216 (0x10c3e6a40 in libtorch.dylib)\nframe #4: torch::jit::script::to_ir::getValues(std::__1::vector&lt;std::__1::shared_ptr&lt;torch::jit::script::Tree&gt;, std::__1::allocator&lt;std::__1::shared_ptr&lt;torch::jit::script::Tree&gt; &gt; &gt;, bool) + 64 (0x10c3eec30 in libtorch.dylib)\nframe #5: torch::jit::script::to_ir::getValues(torch::jit::script::List&lt;torch::jit::script::Expr&gt;, bool) + 86 (0x10c3d8156 in libtorch.dylib)\nframe #6: torch::jit::script::to_ir::to_ir(torch::jit::script::Def, std::__1::unordered_map&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, torch::jit::script::Method&amp;, std::__1::hash&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;, std::__1::equal_to&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;, std::__1::allocator&lt;std::__1::pair&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const, torch::jit::script::Method&amp;&gt; &gt; &gt;&amp;, std::__1::function&lt;std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt; (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, torch::jit::script::Method&amp;, torch::jit::SourceRange const&amp;)&gt; const&amp;, std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt;, torch::jit::script::Method&amp;) + 2754 (0x10c3d5082 in libtorch.dylib)\nframe #7: std::__1::__function::__func&lt;torch::jit::script::defineMethodsInModule(torch::jit::script::Module&amp;, std::__1::vector&lt;torch::jit::script::Def, std::__1::allocator&lt;torch::jit::script::Def&gt; &gt; const&amp;, std::__1::vector&lt;std::__1::function&lt;std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt; (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, torch::jit::script::Method&amp;, torch::jit::SourceRange const&amp;)&gt;, std::__1::allocator&lt;std::__1::function&lt;std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt; (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, torch::jit::script::Method&amp;, torch::jit::SourceRange const&amp;)&gt; &gt; &gt; const&amp;, std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt;)::$_5, std::__1::allocator&lt;torch::jit::script::defineMethodsInModule(torch::jit::script::Module&amp;, std::__1::vector&lt;torch::jit::script::Def, std::__1::allocator&lt;torch::jit::script::Def&gt; &gt; const&amp;, std::__1::vector&lt;std::__1::function&lt;std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt; (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, torch::jit::script::Method&amp;, torch::jit::SourceRange const&amp;)&gt;, std::__1::allocator&lt;std::__1::function&lt;std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt; (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, torch::jit::script::Method&amp;, torch::jit::SourceRange const&amp;)&gt; &gt; &gt; const&amp;, std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt;)::$_5&gt;, void (torch::jit::script::Method&amp;)&gt;::operator()(torch::jit::script::Method&amp;) + 111 (0x10c3d452f in libtorch.dylib)\nframe #8: torch::jit::script::Method::ensure_defined() + 175 (0x10c3f7fbf in libtorch.dylib)\nframe #9: torch::jit::script::defineMethodsInModule(torch::jit::script::Module&amp;, std::__1::vector&lt;torch::jit::script::Def, std::__1::allocator&lt;torch::jit::script::Def&gt; &gt; const&amp;, std::__1::vector&lt;std::__1::function&lt;std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt; (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, torch::jit::script::Method&amp;, torch::jit::SourceRange const&amp;)&gt;, std::__1::allocator&lt;std::__1::function&lt;std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt; (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, torch::jit::script::Method&amp;, torch::jit::SourceRange const&amp;)&gt; &gt; &gt; const&amp;, std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt;) + 2520 (0x10c3bfa28 in libtorch.dylib)\nframe #10: torch::jit::script::compileFunction(torch::jit::script::Def, std::__1::function&lt;std::__1::shared_ptr&lt;torch::jit::script::SugaredValue&gt; (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, torch::jit::script::Method&amp;, torch::jit::SourceRange const&amp;)&gt; const&amp;) + 620 (0x10c3c405c in libtorch.dylib)\nframe #11: void pybind11::cpp_function::initialize&lt;torch::jit::script::initJitScriptBindings(_object*)::$_21, std::__1::shared_ptr&lt;torch::jit::Graph&gt;, torch::jit::script::Def const&amp;, std::__1::function&lt;pybind11::function (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;)&gt;, pybind11::name, pybind11::scope, pybind11::sibling&gt;(torch::jit::script::initJitScriptBindings(_object*)::$_21&amp;&amp;, std::__1::shared_ptr&lt;torch::jit::Graph&gt; (*)(torch::jit::script::Def const&amp;, std::__1::function&lt;pybind11::function (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;)&gt;), pybind11::name const&amp;, pybind11::scope const&amp;, pybind11::sibling const&amp;)::'lambda'(pybind11::detail::function_call&amp;)::__invoke(pybind11::detail::function_call&amp;) + 408 (0x10937fe58 in _C.cpython-36m-darwin.so)\nframe #12: pybind11::cpp_function::dispatcher(_object*, _object*, _object*) + 3308 (0x108fc570c in _C.cpython-36m-darwin.so)\n&lt;omitting python frames&gt;\nframe #25: start + 1 (0x7fff67c8f085 in libdyld.dylib)\n</code></pre>\n<p>This PR fix this issue by allowing JIT to emit code for gathering tuples.</p>", "body_text": "Closes: #12365\nCurrent, the following code gives an error:\n@torch.jit.script\ndef f(x):\n    return torch.sort(x)[0]\nWith error message:\nTraceback (most recent call last):\n  File \"quicktest.py\", line 3, in <module>\n    @torch.jit.script\n  File \"/Users/gaoxiang/anaconda3/lib/python3.6/site-packages/torch/jit/__init__.py\", line 589, in script\n    graph = _jit_script_compile(ast, rcb)\nRuntimeError: gatherable->type()->isSubtypeOf(DynamicType::get()) ASSERT FAILED at /Users/administrator/nightlies/2018_09_28/wheel_build_dirs/conda_3.6/conda/conda-bld/pytorch-nightly_1538131714608/work/torch/csrc/jit/script/compiler.cpp:1819, please report a bug to PyTorch. (emitBasicGather at /Users/administrator/nightlies/2018_09_28/wheel_build_dirs/conda_3.6/conda/conda-bld/pytorch-nightly_1538131714608/work/torch/csrc/jit/script/compiler.cpp:1819)\nframe #0: torch::jit::script::to_ir::emitSimpleExpr(std::__1::shared_ptr<torch::jit::script::Tree> const&) + 2371 (0x10c3e5e53 in libtorch.dylib)\nframe #1: torch::jit::script::to_ir::emitSugaredExpr(torch::jit::script::Expr, unsigned long) + 1446 (0x10c3dd326 in libtorch.dylib)\nframe #2: torch::jit::script::to_ir::emitExpr(torch::jit::script::Expr) + 69 (0x10c3dddd5 in libtorch.dylib)\nframe #3: torch::jit::script::to_ir::getNamedValues(std::__1::vector<std::__1::shared_ptr<torch::jit::script::Tree>, std::__1::allocator<std::__1::shared_ptr<torch::jit::script::Tree> > >, bool) + 1216 (0x10c3e6a40 in libtorch.dylib)\nframe #4: torch::jit::script::to_ir::getValues(std::__1::vector<std::__1::shared_ptr<torch::jit::script::Tree>, std::__1::allocator<std::__1::shared_ptr<torch::jit::script::Tree> > >, bool) + 64 (0x10c3eec30 in libtorch.dylib)\nframe #5: torch::jit::script::to_ir::getValues(torch::jit::script::List<torch::jit::script::Expr>, bool) + 86 (0x10c3d8156 in libtorch.dylib)\nframe #6: torch::jit::script::to_ir::to_ir(torch::jit::script::Def, std::__1::unordered_map<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, torch::jit::script::Method&, std::__1::hash<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::equal_to<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::pair<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const, torch::jit::script::Method&> > >&, std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> const&, std::__1::shared_ptr<torch::jit::script::SugaredValue>, torch::jit::script::Method&) + 2754 (0x10c3d5082 in libtorch.dylib)\nframe #7: std::__1::__function::__func<torch::jit::script::defineMethodsInModule(torch::jit::script::Module&, std::__1::vector<torch::jit::script::Def, std::__1::allocator<torch::jit::script::Def> > const&, std::__1::vector<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)>, std::__1::allocator<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> > > const&, std::__1::shared_ptr<torch::jit::script::SugaredValue>)::$_5, std::__1::allocator<torch::jit::script::defineMethodsInModule(torch::jit::script::Module&, std::__1::vector<torch::jit::script::Def, std::__1::allocator<torch::jit::script::Def> > const&, std::__1::vector<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)>, std::__1::allocator<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> > > const&, std::__1::shared_ptr<torch::jit::script::SugaredValue>)::$_5>, void (torch::jit::script::Method&)>::operator()(torch::jit::script::Method&) + 111 (0x10c3d452f in libtorch.dylib)\nframe #8: torch::jit::script::Method::ensure_defined() + 175 (0x10c3f7fbf in libtorch.dylib)\nframe #9: torch::jit::script::defineMethodsInModule(torch::jit::script::Module&, std::__1::vector<torch::jit::script::Def, std::__1::allocator<torch::jit::script::Def> > const&, std::__1::vector<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)>, std::__1::allocator<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> > > const&, std::__1::shared_ptr<torch::jit::script::SugaredValue>) + 2520 (0x10c3bfa28 in libtorch.dylib)\nframe #10: torch::jit::script::compileFunction(torch::jit::script::Def, std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> const&) + 620 (0x10c3c405c in libtorch.dylib)\nframe #11: void pybind11::cpp_function::initialize<torch::jit::script::initJitScriptBindings(_object*)::$_21, std::__1::shared_ptr<torch::jit::Graph>, torch::jit::script::Def const&, std::__1::function<pybind11::function (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)>, pybind11::name, pybind11::scope, pybind11::sibling>(torch::jit::script::initJitScriptBindings(_object*)::$_21&&, std::__1::shared_ptr<torch::jit::Graph> (*)(torch::jit::script::Def const&, std::__1::function<pybind11::function (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)>), pybind11::name const&, pybind11::scope const&, pybind11::sibling const&)::'lambda'(pybind11::detail::function_call&)::__invoke(pybind11::detail::function_call&) + 408 (0x10937fe58 in _C.cpython-36m-darwin.so)\nframe #12: pybind11::cpp_function::dispatcher(_object*, _object*, _object*) + 3308 (0x108fc570c in _C.cpython-36m-darwin.so)\n<omitting python frames>\nframe #25: start + 1 (0x7fff67c8f085 in libdyld.dylib)\n\nThis PR fix this issue by allowing JIT to emit code for gathering tuples.", "body": "Closes: https://github.com/pytorch/pytorch/issues/12365\r\n\r\nCurrent, the following code gives an error:\r\n```python\r\n@torch.jit.script\r\ndef f(x):\r\n    return torch.sort(x)[0]\r\n```\r\nWith error message:\r\n```\r\nTraceback (most recent call last):\r\n  File \"quicktest.py\", line 3, in <module>\r\n    @torch.jit.script\r\n  File \"/Users/gaoxiang/anaconda3/lib/python3.6/site-packages/torch/jit/__init__.py\", line 589, in script\r\n    graph = _jit_script_compile(ast, rcb)\r\nRuntimeError: gatherable->type()->isSubtypeOf(DynamicType::get()) ASSERT FAILED at /Users/administrator/nightlies/2018_09_28/wheel_build_dirs/conda_3.6/conda/conda-bld/pytorch-nightly_1538131714608/work/torch/csrc/jit/script/compiler.cpp:1819, please report a bug to PyTorch. (emitBasicGather at /Users/administrator/nightlies/2018_09_28/wheel_build_dirs/conda_3.6/conda/conda-bld/pytorch-nightly_1538131714608/work/torch/csrc/jit/script/compiler.cpp:1819)\r\nframe #0: torch::jit::script::to_ir::emitSimpleExpr(std::__1::shared_ptr<torch::jit::script::Tree> const&) + 2371 (0x10c3e5e53 in libtorch.dylib)\r\nframe #1: torch::jit::script::to_ir::emitSugaredExpr(torch::jit::script::Expr, unsigned long) + 1446 (0x10c3dd326 in libtorch.dylib)\r\nframe #2: torch::jit::script::to_ir::emitExpr(torch::jit::script::Expr) + 69 (0x10c3dddd5 in libtorch.dylib)\r\nframe #3: torch::jit::script::to_ir::getNamedValues(std::__1::vector<std::__1::shared_ptr<torch::jit::script::Tree>, std::__1::allocator<std::__1::shared_ptr<torch::jit::script::Tree> > >, bool) + 1216 (0x10c3e6a40 in libtorch.dylib)\r\nframe #4: torch::jit::script::to_ir::getValues(std::__1::vector<std::__1::shared_ptr<torch::jit::script::Tree>, std::__1::allocator<std::__1::shared_ptr<torch::jit::script::Tree> > >, bool) + 64 (0x10c3eec30 in libtorch.dylib)\r\nframe #5: torch::jit::script::to_ir::getValues(torch::jit::script::List<torch::jit::script::Expr>, bool) + 86 (0x10c3d8156 in libtorch.dylib)\r\nframe #6: torch::jit::script::to_ir::to_ir(torch::jit::script::Def, std::__1::unordered_map<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, torch::jit::script::Method&, std::__1::hash<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::equal_to<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::pair<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const, torch::jit::script::Method&> > >&, std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> const&, std::__1::shared_ptr<torch::jit::script::SugaredValue>, torch::jit::script::Method&) + 2754 (0x10c3d5082 in libtorch.dylib)\r\nframe #7: std::__1::__function::__func<torch::jit::script::defineMethodsInModule(torch::jit::script::Module&, std::__1::vector<torch::jit::script::Def, std::__1::allocator<torch::jit::script::Def> > const&, std::__1::vector<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)>, std::__1::allocator<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> > > const&, std::__1::shared_ptr<torch::jit::script::SugaredValue>)::$_5, std::__1::allocator<torch::jit::script::defineMethodsInModule(torch::jit::script::Module&, std::__1::vector<torch::jit::script::Def, std::__1::allocator<torch::jit::script::Def> > const&, std::__1::vector<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)>, std::__1::allocator<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> > > const&, std::__1::shared_ptr<torch::jit::script::SugaredValue>)::$_5>, void (torch::jit::script::Method&)>::operator()(torch::jit::script::Method&) + 111 (0x10c3d452f in libtorch.dylib)\r\nframe #8: torch::jit::script::Method::ensure_defined() + 175 (0x10c3f7fbf in libtorch.dylib)\r\nframe #9: torch::jit::script::defineMethodsInModule(torch::jit::script::Module&, std::__1::vector<torch::jit::script::Def, std::__1::allocator<torch::jit::script::Def> > const&, std::__1::vector<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)>, std::__1::allocator<std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> > > const&, std::__1::shared_ptr<torch::jit::script::SugaredValue>) + 2520 (0x10c3bfa28 in libtorch.dylib)\r\nframe #10: torch::jit::script::compileFunction(torch::jit::script::Def, std::__1::function<std::__1::shared_ptr<torch::jit::script::SugaredValue> (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, torch::jit::script::Method&, torch::jit::SourceRange const&)> const&) + 620 (0x10c3c405c in libtorch.dylib)\r\nframe #11: void pybind11::cpp_function::initialize<torch::jit::script::initJitScriptBindings(_object*)::$_21, std::__1::shared_ptr<torch::jit::Graph>, torch::jit::script::Def const&, std::__1::function<pybind11::function (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)>, pybind11::name, pybind11::scope, pybind11::sibling>(torch::jit::script::initJitScriptBindings(_object*)::$_21&&, std::__1::shared_ptr<torch::jit::Graph> (*)(torch::jit::script::Def const&, std::__1::function<pybind11::function (std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)>), pybind11::name const&, pybind11::scope const&, pybind11::sibling const&)::'lambda'(pybind11::detail::function_call&)::__invoke(pybind11::detail::function_call&) + 408 (0x10937fe58 in _C.cpython-36m-darwin.so)\r\nframe #12: pybind11::cpp_function::dispatcher(_object*, _object*, _object*) + 3308 (0x108fc570c in _C.cpython-36m-darwin.so)\r\n<omitting python frames>\r\nframe #25: start + 1 (0x7fff67c8f085 in libdyld.dylib)\r\n```\r\nThis PR fix this issue by allowing JIT to emit code for gathering tuples."}
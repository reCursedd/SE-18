{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/313972178", "html_url": "https://github.com/pytorch/pytorch/issues/2014#issuecomment-313972178", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2014", "id": 313972178, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzk3MjE3OA==", "user": {"login": "narendasan", "id": 1790613, "node_id": "MDQ6VXNlcjE3OTA2MTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1790613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/narendasan", "html_url": "https://github.com/narendasan", "followers_url": "https://api.github.com/users/narendasan/followers", "following_url": "https://api.github.com/users/narendasan/following{/other_user}", "gists_url": "https://api.github.com/users/narendasan/gists{/gist_id}", "starred_url": "https://api.github.com/users/narendasan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/narendasan/subscriptions", "organizations_url": "https://api.github.com/users/narendasan/orgs", "repos_url": "https://api.github.com/users/narendasan/repos", "events_url": "https://api.github.com/users/narendasan/events{/privacy}", "received_events_url": "https://api.github.com/users/narendasan/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-09T23:19:25Z", "updated_at": "2017-07-09T23:19:25Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I have <code>from_numpy</code> working but <code>.numpy()</code> doesn't seem to work by just adding</p>\n<pre><code>#ifdef TH_REAL_IS_HALF\n#define NUMPY_TYPE_ENUM NPY_HALF\n#endif\n</code></pre>\n<p>I was looking around and there seems some specific HalfTensor code, could that be effecting the code gen?</p>\n<p>I also found that the RuntimeError you get when using an incorrect type in trying to make a HalfTensor refers to the tensor as an int tensor instead of a float tensor</p>\n<pre><code>RuntimeError: tried to construct a tensor from a int sequence, but found an item of \ntype numpy.float32 at index (0)\n</code></pre>\n<p>I saw where the <code>python_type_str</code> is defined in <code>utils.h</code> it refers to <code>THC_REAL_IS_HALF</code> instead of <code>TH_REAL_IS_HALF</code>. What is the difference between the two symbols and should I be using one over the other?</p>\n<p>Also I noticed that there are some inconsistencies between DoubleTensor, FloatTensor and HalfTensor.<br>\nCreating a Tensor with an FP16/FP32 numpy array only works for half and float respectively but FP64 works for all of them, is this expected?</p>", "body_text": "I have from_numpy working but .numpy() doesn't seem to work by just adding\n#ifdef TH_REAL_IS_HALF\n#define NUMPY_TYPE_ENUM NPY_HALF\n#endif\n\nI was looking around and there seems some specific HalfTensor code, could that be effecting the code gen?\nI also found that the RuntimeError you get when using an incorrect type in trying to make a HalfTensor refers to the tensor as an int tensor instead of a float tensor\nRuntimeError: tried to construct a tensor from a int sequence, but found an item of \ntype numpy.float32 at index (0)\n\nI saw where the python_type_str is defined in utils.h it refers to THC_REAL_IS_HALF instead of TH_REAL_IS_HALF. What is the difference between the two symbols and should I be using one over the other?\nAlso I noticed that there are some inconsistencies between DoubleTensor, FloatTensor and HalfTensor.\nCreating a Tensor with an FP16/FP32 numpy array only works for half and float respectively but FP64 works for all of them, is this expected?", "body": "I have ```from_numpy``` working but ```.numpy()``` doesn't seem to work by just adding \r\n```\r\n#ifdef TH_REAL_IS_HALF\r\n#define NUMPY_TYPE_ENUM NPY_HALF\r\n#endif\r\n```\r\n\r\nI was looking around and there seems some specific HalfTensor code, could that be effecting the code gen?\r\n\r\nI also found that the RuntimeError you get when using an incorrect type in trying to make a HalfTensor refers to the tensor as an int tensor instead of a float tensor \r\n```\r\nRuntimeError: tried to construct a tensor from a int sequence, but found an item of \r\ntype numpy.float32 at index (0)\r\n```\r\nI saw where the ```python_type_str``` is defined in ```utils.h``` it refers to ```THC_REAL_IS_HALF``` instead of ```TH_REAL_IS_HALF```. What is the difference between the two symbols and should I be using one over the other? \r\n\r\nAlso I noticed that there are some inconsistencies between DoubleTensor, FloatTensor and HalfTensor.\r\nCreating a Tensor with an FP16/FP32 numpy array only works for half and float respectively but FP64 works for all of them, is this expected?\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/11418", "id": 214070452, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE0MDcwNDUy", "html_url": "https://github.com/pytorch/pytorch/pull/11418", "diff_url": "https://github.com/pytorch/pytorch/pull/11418.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/11418.patch", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/11418", "number": 11418, "state": "closed", "locked": false, "title": "nomnigraph - Improvements to subgraph matching APIs", "user": {"login": "duc0", "id": 10603132, "node_id": "MDQ6VXNlcjEwNjAzMTMy", "avatar_url": "https://avatars1.githubusercontent.com/u/10603132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duc0", "html_url": "https://github.com/duc0", "followers_url": "https://api.github.com/users/duc0/followers", "following_url": "https://api.github.com/users/duc0/following{/other_user}", "gists_url": "https://api.github.com/users/duc0/gists{/gist_id}", "starred_url": "https://api.github.com/users/duc0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duc0/subscriptions", "organizations_url": "https://api.github.com/users/duc0/orgs", "repos_url": "https://api.github.com/users/duc0/repos", "events_url": "https://api.github.com/users/duc0/events{/privacy}", "received_events_url": "https://api.github.com/users/duc0/received_events", "type": "User", "site_admin": false}, "body": "Summary:\nSeveral improvements that aim to make the APIs more straightforward to use\n\n- Get rid of helper methods subgraph and nonTerminal . Users now should create a NNMatchGraph directly via graph's createNode and createEdge API\n\n- Get rid of operatorSubgraph helper method\n\n- invertGraphTraversal flag applies to both the match graph and the scanned graph. This allows user to create match graph in the same direction as the scanned graph, thus reduce confusion.\n\n- additional parameters of matchNode (count, includeInSubgraph, nonTerminal) are removed from the constructors and moved into setter methods. (We no longer enforce that MatchNode is immutable but this helps improve code clarity).\n\n- Tests are updated to reflect the changes\n\nFollow up changes:\n- Possibly clean up the tests further. This change aims to minimally modify the unit tests.\n- Help a validity check that enforce the current limitation of the match graph (single source node), and throws if the match graph does not satisfy the criteria.\n- Have the single source node be detected automatically and callers just need to pass in the matchGraph instead of the source node reference.\n\nDifferential Revision: D9732565\n", "created_at": "2018-09-08T01:37:08Z", "updated_at": "2018-09-11T11:40:49Z", "closed_at": "2018-09-11T11:40:49Z", "merged_at": null, "merge_commit_sha": "56ff78fb888bb721d8956e58a2599454fe249200", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/pytorch/pytorch/pulls/11418/commits", "review_comments_url": "https://api.github.com/repos/pytorch/pytorch/pulls/11418/comments", "review_comment_url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11418/comments", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/7b49c51f5cd5d952e163cddb2438ab7e7e9206f9", "head": {"label": "duc0:export-D9732565", "ref": "export-D9732565", "sha": "7b49c51f5cd5d952e163cddb2438ab7e7e9206f9", "user": {"login": "duc0", "id": 10603132, "node_id": "MDQ6VXNlcjEwNjAzMTMy", "avatar_url": "https://avatars1.githubusercontent.com/u/10603132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duc0", "html_url": "https://github.com/duc0", "followers_url": "https://api.github.com/users/duc0/followers", "following_url": "https://api.github.com/users/duc0/following{/other_user}", "gists_url": "https://api.github.com/users/duc0/gists{/gist_id}", "starred_url": "https://api.github.com/users/duc0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duc0/subscriptions", "organizations_url": "https://api.github.com/users/duc0/orgs", "repos_url": "https://api.github.com/users/duc0/repos", "events_url": "https://api.github.com/users/duc0/events{/privacy}", "received_events_url": "https://api.github.com/users/duc0/received_events", "type": "User", "site_admin": false}, "repo": {"id": 136542103, "node_id": "MDEwOlJlcG9zaXRvcnkxMzY1NDIxMDM=", "name": "pytorch", "full_name": "duc0/pytorch", "private": false, "owner": {"login": "duc0", "id": 10603132, "node_id": "MDQ6VXNlcjEwNjAzMTMy", "avatar_url": "https://avatars1.githubusercontent.com/u/10603132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duc0", "html_url": "https://github.com/duc0", "followers_url": "https://api.github.com/users/duc0/followers", "following_url": "https://api.github.com/users/duc0/following{/other_user}", "gists_url": "https://api.github.com/users/duc0/gists{/gist_id}", "starred_url": "https://api.github.com/users/duc0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duc0/subscriptions", "organizations_url": "https://api.github.com/users/duc0/orgs", "repos_url": "https://api.github.com/users/duc0/repos", "events_url": "https://api.github.com/users/duc0/events{/privacy}", "received_events_url": "https://api.github.com/users/duc0/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/duc0/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": true, "url": "https://api.github.com/repos/duc0/pytorch", "forks_url": "https://api.github.com/repos/duc0/pytorch/forks", "keys_url": "https://api.github.com/repos/duc0/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/duc0/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/duc0/pytorch/teams", "hooks_url": "https://api.github.com/repos/duc0/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/duc0/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/duc0/pytorch/events", "assignees_url": "https://api.github.com/repos/duc0/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/duc0/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/duc0/pytorch/tags", "blobs_url": "https://api.github.com/repos/duc0/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/duc0/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/duc0/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/duc0/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/duc0/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/duc0/pytorch/languages", "stargazers_url": "https://api.github.com/repos/duc0/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/duc0/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/duc0/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/duc0/pytorch/subscription", "commits_url": "https://api.github.com/repos/duc0/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/duc0/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/duc0/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/duc0/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/duc0/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/duc0/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/duc0/pytorch/merges", "archive_url": "https://api.github.com/repos/duc0/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/duc0/pytorch/downloads", "issues_url": "https://api.github.com/repos/duc0/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/duc0/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/duc0/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/duc0/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/duc0/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/duc0/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/duc0/pytorch/deployments", "created_at": "2018-06-07T23:32:54Z", "updated_at": "2018-08-29T17:49:09Z", "pushed_at": "2018-11-16T04:06:53Z", "git_url": "git://github.com/duc0/pytorch.git", "ssh_url": "git@github.com:duc0/pytorch.git", "clone_url": "https://github.com/duc0/pytorch.git", "svn_url": "https://github.com/duc0/pytorch", "homepage": "http://pytorch.org", "size": 85592, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "pytorch:master", "ref": "master", "sha": "f2f43ad2dab024ef4010b63ec2faa64e9affcdac", "user": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 65600975, "node_id": "MDEwOlJlcG9zaXRvcnk2NTYwMDk3NQ==", "name": "pytorch", "full_name": "pytorch/pytorch", "private": false, "owner": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/pytorch/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": false, "url": "https://api.github.com/repos/pytorch/pytorch", "forks_url": "https://api.github.com/repos/pytorch/pytorch/forks", "keys_url": "https://api.github.com/repos/pytorch/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pytorch/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pytorch/pytorch/teams", "hooks_url": "https://api.github.com/repos/pytorch/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/pytorch/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/pytorch/pytorch/events", "assignees_url": "https://api.github.com/repos/pytorch/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/pytorch/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/pytorch/pytorch/tags", "blobs_url": "https://api.github.com/repos/pytorch/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pytorch/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pytorch/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pytorch/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/pytorch/pytorch/languages", "stargazers_url": "https://api.github.com/repos/pytorch/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/pytorch/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/pytorch/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/pytorch/pytorch/subscription", "commits_url": "https://api.github.com/repos/pytorch/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pytorch/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pytorch/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pytorch/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/pytorch/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pytorch/pytorch/merges", "archive_url": "https://api.github.com/repos/pytorch/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pytorch/pytorch/downloads", "issues_url": "https://api.github.com/repos/pytorch/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/pytorch/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/pytorch/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/pytorch/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pytorch/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/pytorch/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/pytorch/pytorch/deployments", "created_at": "2016-08-13T05:26:41Z", "updated_at": "2018-11-24T12:35:43Z", "pushed_at": "2018-11-24T12:42:01Z", "git_url": "git://github.com/pytorch/pytorch.git", "ssh_url": "git@github.com:pytorch/pytorch.git", "clone_url": "https://github.com/pytorch/pytorch.git", "svn_url": "https://github.com/pytorch/pytorch", "homepage": "http://pytorch.org", "size": 89656, "stargazers_count": 21589, "watchers_count": 21589, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 5153, "mirror_url": null, "archived": false, "open_issues_count": 2196, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 5153, "open_issues": 2196, "watchers": 21589, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/11418"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/11418"}, "issue": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/11418"}, "comments": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/11418/comments"}, "review_comments": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/11418/comments"}, "review_comment": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/11418/commits"}, "statuses": {"href": "https://api.github.com/repos/pytorch/pytorch/statuses/7b49c51f5cd5d952e163cddb2438ab7e7e9206f9"}}, "author_association": "CONTRIBUTOR", "body_html": "<p>Summary:<br>\nSeveral improvements that aim to make the APIs more straightforward to use</p>\n<ul>\n<li>\n<p>Get rid of helper methods subgraph and nonTerminal . Users now should create a NNMatchGraph directly via graph's createNode and createEdge API</p>\n</li>\n<li>\n<p>Get rid of operatorSubgraph helper method</p>\n</li>\n<li>\n<p>invertGraphTraversal flag applies to both the match graph and the scanned graph. This allows user to create match graph in the same direction as the scanned graph, thus reduce confusion.</p>\n</li>\n<li>\n<p>additional parameters of matchNode (count, includeInSubgraph, nonTerminal) are removed from the constructors and moved into setter methods. (We no longer enforce that MatchNode is immutable but this helps improve code clarity).</p>\n</li>\n<li>\n<p>Tests are updated to reflect the changes</p>\n</li>\n</ul>\n<p>Follow up changes:</p>\n<ul>\n<li>Possibly clean up the tests further. This change aims to minimally modify the unit tests.</li>\n<li>Help a validity check that enforce the current limitation of the match graph (single source node), and throws if the match graph does not satisfy the criteria.</li>\n<li>Have the single source node be detected automatically and callers just need to pass in the matchGraph instead of the source node reference.</li>\n</ul>\n<p>Differential Revision: D9732565</p>", "body_text": "Summary:\nSeveral improvements that aim to make the APIs more straightforward to use\n\n\nGet rid of helper methods subgraph and nonTerminal . Users now should create a NNMatchGraph directly via graph's createNode and createEdge API\n\n\nGet rid of operatorSubgraph helper method\n\n\ninvertGraphTraversal flag applies to both the match graph and the scanned graph. This allows user to create match graph in the same direction as the scanned graph, thus reduce confusion.\n\n\nadditional parameters of matchNode (count, includeInSubgraph, nonTerminal) are removed from the constructors and moved into setter methods. (We no longer enforce that MatchNode is immutable but this helps improve code clarity).\n\n\nTests are updated to reflect the changes\n\n\nFollow up changes:\n\nPossibly clean up the tests further. This change aims to minimally modify the unit tests.\nHelp a validity check that enforce the current limitation of the match graph (single source node), and throws if the match graph does not satisfy the criteria.\nHave the single source node be detected automatically and callers just need to pass in the matchGraph instead of the source node reference.\n\nDifferential Revision: D9732565", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 0, "review_comments": 0, "maintainer_can_modify": false, "commits": 1, "additions": 127, "deletions": 122, "changed_files": 6}
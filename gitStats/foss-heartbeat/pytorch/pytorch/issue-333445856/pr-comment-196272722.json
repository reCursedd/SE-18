{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/196272722", "pull_request_review_id": 129792819, "id": 196272722, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjI3MjcyMg==", "diff_hunk": "@@ -19,7 +19,10 @@ struct Handle {\n   }\n   ~Handle() {\n     if (handle) {\n+#ifdef NO_CUDNN_DESTROY_HANDLE", "path": "aten/src/ATen/cudnn/Handles.cpp", "position": null, "original_position": 4, "commit_id": "ed1c6821bd1b42cde1bc06ac73d6305103e656aa", "original_commit_id": "b8bd187fb0c1849e031e67fb8234e88f60bf73a1", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "body": "this is because of something dumb in the ordering of destruction. Sometimes `atexit`, the cuda context (or something) would already be destroyed by the time this gets destroyed. It happens in fbcode setting. @colesbury and I decided to not destroy the handle as a workaround.", "created_at": "2018-06-19T01:34:34Z", "updated_at": "2018-11-23T15:45:44Z", "html_url": "https://github.com/pytorch/pytorch/pull/8627#discussion_r196272722", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/8627", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/196272722"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/8627#discussion_r196272722"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/8627"}}, "body_html": "<p>this is because of something dumb in the ordering of destruction. Sometimes <code>atexit</code>, the cuda context (or something) would already be destroyed by the time this gets destroyed. It happens in fbcode setting. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=655866\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/colesbury\">@colesbury</a> and I decided to not destroy the handle as a workaround.</p>", "body_text": "this is because of something dumb in the ordering of destruction. Sometimes atexit, the cuda context (or something) would already be destroyed by the time this gets destroyed. It happens in fbcode setting. @colesbury and I decided to not destroy the handle as a workaround.", "in_reply_to_id": 196236544}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/182557857", "pull_request_review_id": 113378003, "id": 182557857, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MjU1Nzg1Nw==", "diff_hunk": "@@ -41,28 +37,47 @@ class ChannelShuffleOp final : public ConvPoolOpBase<Context> {\n     }\n     return true;\n   }\n+\n+  bool RunOnDeviceWithOrderNHWC() override {\n+    const auto& X = Input(0);\n+    auto* Y = Output(0);\n+    Y->ResizeLike(X);\n+    const auto C = X.dim32(3);\n+    const auto G = this->group_;\n+    CAFFE_ENFORCE(C % G == 0, \"\");\n+    const auto K = C / G;\n+    std::array<int, 2> dims = {G, K};\n+    std::array<int, 2> axes = {1, 0};\n+    for (auto i = 0; i < X.size(); i += C) {\n+      // Transpose each C = GxK matrix\n+      math::Transpose(", "path": "caffe2/operators/channel_shuffle_op.h", "position": 49, "original_position": 43, "commit_id": "a106eb55bde2575268bde6a1e8ba07bc687f1b7f", "original_commit_id": "aacbd8536ed66be6a8a44eee258157a71fb8cd4c", "user": {"login": "bddppq", "id": 9300575, "node_id": "MDQ6VXNlcjkzMDA1NzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/9300575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bddppq", "html_url": "https://github.com/bddppq", "followers_url": "https://api.github.com/users/bddppq/followers", "following_url": "https://api.github.com/users/bddppq/following{/other_user}", "gists_url": "https://api.github.com/users/bddppq/gists{/gist_id}", "starred_url": "https://api.github.com/users/bddppq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bddppq/subscriptions", "organizations_url": "https://api.github.com/users/bddppq/orgs", "repos_url": "https://api.github.com/users/bddppq/repos", "events_url": "https://api.github.com/users/bddppq/events{/privacy}", "received_events_url": "https://api.github.com/users/bddppq/received_events", "type": "User", "site_admin": false}, "body": "I think you need to include caffe2/utils/math.h", "created_at": "2018-04-18T20:24:01Z", "updated_at": "2018-11-23T15:42:47Z", "html_url": "https://github.com/pytorch/pytorch/pull/6667#discussion_r182557857", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/6667", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/182557857"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/6667#discussion_r182557857"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6667"}}, "body_html": "<p>I think you need to include caffe2/utils/math.h</p>", "body_text": "I think you need to include caffe2/utils/math.h"}
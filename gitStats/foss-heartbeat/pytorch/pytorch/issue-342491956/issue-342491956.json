{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9564", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9564/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9564/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9564/events", "html_url": "https://github.com/pytorch/pytorch/issues/9564", "id": 342491956, "node_id": "MDU6SXNzdWUzNDI0OTE5NTY=", "number": 9564, "title": "Failed to compile PyTorch on IBM Power8 arch same as  #8787", "user": {"login": "bapriddy", "id": 30074504, "node_id": "MDQ6VXNlcjMwMDc0NTA0", "avatar_url": "https://avatars0.githubusercontent.com/u/30074504?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bapriddy", "html_url": "https://github.com/bapriddy", "followers_url": "https://api.github.com/users/bapriddy/followers", "following_url": "https://api.github.com/users/bapriddy/following{/other_user}", "gists_url": "https://api.github.com/users/bapriddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/bapriddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bapriddy/subscriptions", "organizations_url": "https://api.github.com/users/bapriddy/orgs", "repos_url": "https://api.github.com/users/bapriddy/repos", "events_url": "https://api.github.com/users/bapriddy/events{/privacy}", "received_events_url": "https://api.github.com/users/bapriddy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-18T21:05:57Z", "updated_at": "2018-08-03T15:45:58Z", "closed_at": "2018-07-18T22:29:35Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=18168681\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zuoxingdong\">@zuoxingdong</a> ,  <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9083746\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/avmgithub\">@avmgithub</a> , <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1310570\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/soumith\">@soumith</a>   see  <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"334846354\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/8787\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/8787/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/8787\">#8787</a></p>\n<p>I am also using the IBM Power 8 architecture (ppc64le) with CUDA 9.2 and latest cudnn/6.0 and nvcc/9.2. Since none of this is supported with conda or pip installs, I attempeted a build from the source instruction after reading the same issue posted by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=18168681\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zuoxingdong\">@zuoxingdong</a>.   It get the following error...</p>\n<p>~    /pytorch$ python setup.py install<br>\nrunning install<br>\nrunning build_deps</p>\n<ul>\n<li>\n<p>USE_CUDA=0</p>\n</li>\n<li>\n<p>USE_ROCM=0</p>\n</li>\n<li>\n<p>USE_NNPACK=0</p>\n</li>\n<li>\n<p>USE_MKLDNN=0</p>\n</li>\n<li>\n<p>USE_GLOO_IBVERBS=0</p>\n</li>\n<li>\n<p>USE_DISTRIBUTED_MW=0</p>\n</li>\n<li>\n<p>FULL_CAFFE2=0</p>\n</li>\n<li>\n<p>[[ 9 -gt 0 ]]</p>\n</li>\n<li>\n<p>case \"$1\" in</p>\n</li>\n<li>\n<p>USE_CUDA=1</p>\n</li>\n<li>\n<p>shift</p>\n</li>\n<li>\n<p>[[ 8 -gt 0 ]]</p>\n</li>\n<li>\n<p>case \"$1\" in</p>\n</li>\n<li>\n<p>USE_NNPACK=1</p>\n</li>\n<li>\n<p>shift</p>\n</li>\n<li>\n<p>[[ 7 -gt 0 ]]</p>\n</li>\n<li>\n<p>case \"$1\" in</p>\n</li>\n<li>\n<p>break</p>\n</li>\n<li>\n<p>CMAKE_INSTALL='make install'</p>\n</li>\n<li>\n<p>USER_CFLAGS=</p>\n</li>\n<li>\n<p>USER_LDFLAGS=</p>\n</li>\n<li>\n<p>[[ -n '' ]]</p>\n</li>\n<li>\n<p>[[ -n '' ]]</p>\n</li>\n<li>\n<p>[[ -n '' ]]<br>\n++ uname</p>\n</li>\n<li>\n<p>'[' Linux == Darwin ']'<br>\n++ dirname tools/build_pytorch_libs.sh</p>\n</li>\n<li>\n<p>cd tools/..<br>\n+++ pwd<br>\n++ printf '%q\\n'  /pytorch</p>\n</li>\n<li>\n<p>PWD= /pytorch</p>\n</li>\n<li>\n<p>BASE_DIR= /pytorch</p>\n</li>\n<li>\n<p>TORCH_LIB_DIR= /pytorch/torch/lib</p>\n</li>\n<li>\n<p>INSTALL_DIR= /pytorch/torch/lib/tmp_install</p>\n</li>\n<li>\n<p>THIRD_PARTY_DIR= /pytorch/third_party</p>\n</li>\n<li>\n<p>CMAKE_VERSION=cmake</p>\n</li>\n<li>\n<p>C_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\"'</p>\n</li>\n<li>\n<p>C_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'</p>\n</li>\n<li>\n<p>LDFLAGS='-L\" /pytorch/torch/lib/tmp_install/lib\" '</p>\n</li>\n<li>\n<p>LD_POSTFIX=.so<br>\n++ uname</p>\n</li>\n<li>\n<p>[[ Linux == \\D\\a\\r\\w\\i\\n ]]</p>\n</li>\n<li>\n<p>LDFLAGS='-L\" /pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'</p>\n</li>\n<li>\n<p>CPP_FLAGS=' -std=c++11 '</p>\n</li>\n<li>\n<p>GLOO_FLAGS=</p>\n</li>\n<li>\n<p>THD_FLAGS=</p>\n</li>\n<li>\n<p>NCCL_ROOT_DIR= /pytorch/torch/lib/tmp_install</p>\n</li>\n<li>\n<p>[[ 1 -eq 1 ]]</p>\n</li>\n<li>\n<p>GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR= /pytorch/torch/lib/tmp_install'</p>\n</li>\n<li>\n<p>[[ 0 -eq 1 ]]</p>\n</li>\n<li>\n<p>[[ 0 -eq 1 ]]</p>\n</li>\n<li>\n<p>CWRAP_FILES=' /pytorch/torch/lib/ATen/Declarations.cwrap; /pytorch/torch/lib/THNN/generic/THNN.h; /pytorch/torch/lib/THCUNN/generic/THCUNN.h; /pytorch/torch/lib/ATen/nn.yaml'</p>\n</li>\n<li>\n<p>CUDA_NVCC_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'</p>\n</li>\n<li>\n<p>[[ -z '' ]]</p>\n</li>\n<li>\n<p>CUDA_DEVICE_DEBUG=0</p>\n</li>\n<li>\n<p>'[' -z 160 ']'</p>\n</li>\n<li>\n<p>BUILD_TYPE=Release</p>\n</li>\n<li>\n<p>[[ -n '' ]]</p>\n</li>\n<li>\n<p>[[ -n '' ]]</p>\n</li>\n<li>\n<p>echo 'Building in Release mode'<br>\nBuilding in Release mode</p>\n</li>\n<li>\n<p>mkdir -p torch/lib/tmp_install</p>\n</li>\n<li>\n<p>for arg in '\"$@\"'</p>\n</li>\n<li>\n<p>[[ nccl == \\n\\c\\c\\l ]]</p>\n</li>\n<li>\n<p>pushd  /pytorch/third_party<br>\n/pytorch/third_party  /pytorch</p>\n</li>\n<li>\n<p>build_nccl</p>\n</li>\n<li>\n<p>mkdir -p build/nccl</p>\n</li>\n<li>\n<p>pushd build/nccl<br>\n/pytorch/third_party/build/nccl  /pytorch/third_party  /pytorch</p>\n</li>\n<li>\n<p>cmake ../../nccl -DCMAKE_MODULE_PATH= /pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX= /pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH= /pytorch/cmake/public/utils.cmake -DNUM_JOBS=160<br>\n-- The C compiler identification is GNU 4.8.5<br>\n-- The CXX compiler identification is GNU 4.8.5<br>\n-- Check for working C compiler: /usr/bin/cc<br>\n-- Check for working C compiler: /usr/bin/cc -- works<br>\n-- Detecting C compiler ABI info<br>\n-- Detecting C compiler ABI info - done<br>\n-- Check for working CXX compiler: /usr/bin/c++<br>\n-- Check for working CXX compiler: /usr/bin/c++ -- works<br>\n-- Detecting CXX compiler ABI info<br>\n-- Detecting CXX compiler ABI info - done<br>\n-- Looking for include file pthread.h<br>\n-- Looking for include file pthread.h - found<br>\n-- Looking for pthread_create<br>\n-- Looking for pthread_create - not found<br>\n-- Looking for pthread_create in pthreads<br>\n-- Looking for pthread_create in pthreads - not found<br>\n-- Looking for pthread_create in pthread<br>\n-- Looking for pthread_create in pthread - found<br>\n-- Found Threads: TRUE<br>\nCMake Error: Error in cmake code at<br>\n/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:6:<br>\nParse error.  Expected \"(\", got newline with text \"<br>\n\".<br>\nCMake Error at  /pytorch/cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1102 (include):<br>\ninclude could not find load file:</p>\n<p>/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake<br>\nCall Stack (most recent call first):<br>\n/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:11 (include)<br>\nCMakeLists.txt:5 (FIND_PACKAGE)</p>\n</li>\n</ul>\n<p>-- Found CUDA: /usr/local/cuda (found suitable version \"9.2\", minimum required is \"7.0\")<br>\n-- Autodetected CUDA architecture(s): 6.0 6.0<br>\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_60,code=sm_60<br>\n-- Configuring incomplete, errors occurred!<br>\nSee also \" /pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".<br>\nSee also \" /pytorch/third_party/build/nccl/CMakeFiles/CMakeError.log\".<br>\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'<br>\n~</p>", "body_text": "@zuoxingdong ,  @avmgithub , @soumith   see  #8787\nI am also using the IBM Power 8 architecture (ppc64le) with CUDA 9.2 and latest cudnn/6.0 and nvcc/9.2. Since none of this is supported with conda or pip installs, I attempeted a build from the source instruction after reading the same issue posted by @zuoxingdong.   It get the following error...\n~    /pytorch$ python setup.py install\nrunning install\nrunning build_deps\n\n\nUSE_CUDA=0\n\n\nUSE_ROCM=0\n\n\nUSE_NNPACK=0\n\n\nUSE_MKLDNN=0\n\n\nUSE_GLOO_IBVERBS=0\n\n\nUSE_DISTRIBUTED_MW=0\n\n\nFULL_CAFFE2=0\n\n\n[[ 9 -gt 0 ]]\n\n\ncase \"$1\" in\n\n\nUSE_CUDA=1\n\n\nshift\n\n\n[[ 8 -gt 0 ]]\n\n\ncase \"$1\" in\n\n\nUSE_NNPACK=1\n\n\nshift\n\n\n[[ 7 -gt 0 ]]\n\n\ncase \"$1\" in\n\n\nbreak\n\n\nCMAKE_INSTALL='make install'\n\n\nUSER_CFLAGS=\n\n\nUSER_LDFLAGS=\n\n\n[[ -n '' ]]\n\n\n[[ -n '' ]]\n\n\n[[ -n '' ]]\n++ uname\n\n\n'[' Linux == Darwin ']'\n++ dirname tools/build_pytorch_libs.sh\n\n\ncd tools/..\n+++ pwd\n++ printf '%q\\n'  /pytorch\n\n\nPWD= /pytorch\n\n\nBASE_DIR= /pytorch\n\n\nTORCH_LIB_DIR= /pytorch/torch/lib\n\n\nINSTALL_DIR= /pytorch/torch/lib/tmp_install\n\n\nTHIRD_PARTY_DIR= /pytorch/third_party\n\n\nCMAKE_VERSION=cmake\n\n\nC_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\"'\n\n\nC_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n\n\nLDFLAGS='-L\" /pytorch/torch/lib/tmp_install/lib\" '\n\n\nLD_POSTFIX=.so\n++ uname\n\n\n[[ Linux == \\D\\a\\r\\w\\i\\n ]]\n\n\nLDFLAGS='-L\" /pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\n\n\nCPP_FLAGS=' -std=c++11 '\n\n\nGLOO_FLAGS=\n\n\nTHD_FLAGS=\n\n\nNCCL_ROOT_DIR= /pytorch/torch/lib/tmp_install\n\n\n[[ 1 -eq 1 ]]\n\n\nGLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR= /pytorch/torch/lib/tmp_install'\n\n\n[[ 0 -eq 1 ]]\n\n\n[[ 0 -eq 1 ]]\n\n\nCWRAP_FILES=' /pytorch/torch/lib/ATen/Declarations.cwrap; /pytorch/torch/lib/THNN/generic/THNN.h; /pytorch/torch/lib/THCUNN/generic/THCUNN.h; /pytorch/torch/lib/ATen/nn.yaml'\n\n\nCUDA_NVCC_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n\n\n[[ -z '' ]]\n\n\nCUDA_DEVICE_DEBUG=0\n\n\n'[' -z 160 ']'\n\n\nBUILD_TYPE=Release\n\n\n[[ -n '' ]]\n\n\n[[ -n '' ]]\n\n\necho 'Building in Release mode'\nBuilding in Release mode\n\n\nmkdir -p torch/lib/tmp_install\n\n\nfor arg in '\"$@\"'\n\n\n[[ nccl == \\n\\c\\c\\l ]]\n\n\npushd  /pytorch/third_party\n/pytorch/third_party  /pytorch\n\n\nbuild_nccl\n\n\nmkdir -p build/nccl\n\n\npushd build/nccl\n/pytorch/third_party/build/nccl  /pytorch/third_party  /pytorch\n\n\ncmake ../../nccl -DCMAKE_MODULE_PATH= /pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX= /pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH= /pytorch/cmake/public/utils.cmake -DNUM_JOBS=160\n-- The C compiler identification is GNU 4.8.5\n-- The CXX compiler identification is GNU 4.8.5\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Looking for include file pthread.h\n-- Looking for include file pthread.h - found\n-- Looking for pthread_create\n-- Looking for pthread_create - not found\n-- Looking for pthread_create in pthreads\n-- Looking for pthread_create in pthreads - not found\n-- Looking for pthread_create in pthread\n-- Looking for pthread_create in pthread - found\n-- Found Threads: TRUE\nCMake Error: Error in cmake code at\n/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:6:\nParse error.  Expected \"(\", got newline with text \"\n\".\nCMake Error at  /pytorch/cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1102 (include):\ninclude could not find load file:\n/pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake\nCall Stack (most recent call first):\n/pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:11 (include)\nCMakeLists.txt:5 (FIND_PACKAGE)\n\n\n-- Found CUDA: /usr/local/cuda (found suitable version \"9.2\", minimum required is \"7.0\")\n-- Autodetected CUDA architecture(s): 6.0 6.0\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_60,code=sm_60\n-- Configuring incomplete, errors occurred!\nSee also \" /pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".\nSee also \" /pytorch/third_party/build/nccl/CMakeFiles/CMakeError.log\".\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\n~", "body": "@zuoxingdong ,  @avmgithub , @soumith   see  #8787\r\n\r\nI am also using the IBM Power 8 architecture (ppc64le) with CUDA 9.2 and latest cudnn/6.0 and nvcc/9.2. Since none of this is supported with conda or pip installs, I attempeted a build from the source instruction after reading the same issue posted by @zuoxingdong.   It get the following error...\r\n\r\n~    /pytorch$ python setup.py install\r\nrunning install\r\nrunning build_deps\r\n+ USE_CUDA=0\r\n+ USE_ROCM=0\r\n+ USE_NNPACK=0\r\n+ USE_MKLDNN=0\r\n+ USE_GLOO_IBVERBS=0\r\n+ USE_DISTRIBUTED_MW=0\r\n+ FULL_CAFFE2=0\r\n+ [[ 9 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_CUDA=1\r\n+ shift\r\n+ [[ 8 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_NNPACK=1\r\n+ shift\r\n+ [[ 7 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ break\r\n+ CMAKE_INSTALL='make install'\r\n+ USER_CFLAGS=\r\n+ USER_LDFLAGS=\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n++ uname\r\n+ '[' Linux == Darwin ']'\r\n++ dirname tools/build_pytorch_libs.sh\r\n+ cd tools/..\r\n+++ pwd\r\n++ printf '%q\\n'  /pytorch\r\n+ PWD= /pytorch\r\n+ BASE_DIR= /pytorch\r\n+ TORCH_LIB_DIR= /pytorch/torch/lib\r\n+ INSTALL_DIR= /pytorch/torch/lib/tmp_install\r\n+ THIRD_PARTY_DIR= /pytorch/third_party\r\n+ CMAKE_VERSION=cmake\r\n+ C_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\"'\r\n+ C_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ LDFLAGS='-L\" /pytorch/torch/lib/tmp_install/lib\" '\r\n+ LD_POSTFIX=.so\r\n++ uname\r\n+ [[ Linux == \\D\\a\\r\\w\\i\\n ]]\r\n+ LDFLAGS='-L\" /pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,$ORIGIN'\r\n+ CPP_FLAGS=' -std=c++11 '\r\n+ GLOO_FLAGS=\r\n+ THD_FLAGS=\r\n+ NCCL_ROOT_DIR= /pytorch/torch/lib/tmp_install\r\n+ [[ 1 -eq 1 ]]\r\n+ GLOO_FLAGS='-DUSE_CUDA=1 -DNCCL_ROOT_DIR= /pytorch/torch/lib/tmp_install'\r\n+ [[ 0 -eq 1 ]]\r\n+ [[ 0 -eq 1 ]]\r\n+ CWRAP_FILES=' /pytorch/torch/lib/ATen/Declarations.cwrap; /pytorch/torch/lib/THNN/generic/THNN.h; /pytorch/torch/lib/THCUNN/generic/THCUNN.h; /pytorch/torch/lib/ATen/nn.yaml'\r\n+ CUDA_NVCC_FLAGS=' -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ [[ -z '' ]]\r\n+ CUDA_DEVICE_DEBUG=0\r\n+ '[' -z 160 ']'\r\n+ BUILD_TYPE=Release\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ echo 'Building in Release mode'\r\nBuilding in Release mode\r\n+ mkdir -p torch/lib/tmp_install\r\n+ for arg in '\"$@\"'\r\n+ [[ nccl == \\n\\c\\c\\l ]]\r\n+ pushd  /pytorch/third_party\r\n /pytorch/third_party  /pytorch\r\n+ build_nccl\r\n+ mkdir -p build/nccl\r\n+ pushd build/nccl\r\n /pytorch/third_party/build/nccl  /pytorch/third_party  /pytorch\r\n+ cmake ../../nccl -DCMAKE_MODULE_PATH= /pytorch/cmake/Modules_CUDA_fix -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX= /pytorch/torch/lib/tmp_install '-DCMAKE_C_FLAGS= -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 ' '-DCMAKE_CXX_FLAGS= -I\" /pytorch/torch/lib/tmp_install/include\"   -I\" /pytorch/torch/lib/tmp_install/include/TH\" -I\" /pytorch/torch/lib/tmp_install/include/THC\"   -I\" /pytorch/torch/lib/tmp_install/include/THS\" -I\" /pytorch/torch/lib/tmp_install/include/THCS\"   -I\" /pytorch/torch/lib/tmp_install/include/THNN\" -I\" /pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1  -std=c++11  ' -DCMAKE_SHARED_LINKER_FLAGS= -DCMAKE_UTILS_PATH= /pytorch/cmake/public/utils.cmake -DNUM_JOBS=160\r\n-- The C compiler identification is GNU 4.8.5\r\n-- The CXX compiler identification is GNU 4.8.5\r\n-- Check for working C compiler: /usr/bin/cc\r\n-- Check for working C compiler: /usr/bin/cc -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/c++\r\n-- Check for working CXX compiler: /usr/bin/c++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Looking for include file pthread.h\r\n-- Looking for include file pthread.h - found\r\n-- Looking for pthread_create\r\n-- Looking for pthread_create - not found\r\n-- Looking for pthread_create in pthreads\r\n-- Looking for pthread_create in pthreads - not found\r\n-- Looking for pthread_create in pthread\r\n-- Looking for pthread_create in pthread - found\r\n-- Found Threads: TRUE  \r\nCMake Error: Error in cmake code at\r\n /pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake:6:\r\nParse error.  Expected \"(\", got newline with text \"\r\n\".\r\nCMake Error at  /pytorch/cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1102 (include):\r\n  include could not find load file:\r\n\r\n     /pytorch/cmake/Modules_CUDA_fix/upstream/FindPackageHandleStandardArgs.cmake\r\nCall Stack (most recent call first):\r\n   /pytorch/cmake/Modules_CUDA_fix/FindCUDA.cmake:11 (include)\r\n  CMakeLists.txt:5 (FIND_PACKAGE)\r\n\r\n\r\n-- Found CUDA: /usr/local/cuda (found suitable version \"9.2\", minimum required is \"7.0\") \r\n-- Autodetected CUDA architecture(s): 6.0 6.0 \r\n-- Set NVCC_GENCODE for building NCCL: -gencode=arch=compute_60,code=sm_60\r\n-- Configuring incomplete, errors occurred!\r\nSee also \" /pytorch/third_party/build/nccl/CMakeFiles/CMakeOutput.log\".\r\nSee also \" /pytorch/third_party/build/nccl/CMakeFiles/CMakeError.log\".\r\nFailed to run 'bash tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 nanopb libshm gloo THD c10d'\r\n ~\r\n\r\n\r\n\r\n\r\n\r\n"}
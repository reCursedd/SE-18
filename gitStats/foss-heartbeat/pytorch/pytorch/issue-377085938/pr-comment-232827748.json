{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/232827748", "pull_request_review_id": 174112969, "id": 232827748, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjgyNzc0OA==", "diff_hunk": "@@ -544,14 +545,15 @@ if (BUILD_PYTHON)\n     set_target_properties(caffe2_pybind11_state_gpu PROPERTIES PREFIX \"\" DEBUG_POSTFIX \"\")\n     set_target_properties(caffe2_pybind11_state_gpu PROPERTIES SUFFIX ${PY_EXT_SUFFIX})\n     if (APPLE)\n-      set_target_properties(caffe2_pybind11_state_gpu PROPERTIES LINK_FLAGS \"-undefined dynamic_lookup\")\n+      set_target_properties(caffe2_pybind11_state_gpu PROPERTIES LINK_FLAGS \"-undefined dynamic_lookup\") \n     endif()\n     target_include_directories(caffe2_pybind11_state_gpu PRIVATE $<INSTALL_INTERFACE:include>)\n     target_include_directories(caffe2_pybind11_state_gpu PRIVATE ${Caffe2_CPU_INCLUDE})\n     target_link_libraries(\n         caffe2_pybind11_state_gpu caffe2_library caffe2_gpu_library)\n     if (WIN32)\n       target_link_libraries(caffe2_pybind11_state_gpu ${PYTHON_LIBRARIES})\n+      target_link_libraries(caffe2_pybind11_state_gpu onnx_proto)", "path": "caffe2/CMakeLists.txt", "position": 12, "original_position": 23, "commit_id": "147c7f735d90054283afe1f78126a85fa03336bd", "original_commit_id": "6360cd9384b1884f9b166692b449294272da83f5", "user": {"login": "ArutyunovG", "id": 10763026, "node_id": "MDQ6VXNlcjEwNzYzMDI2", "avatar_url": "https://avatars0.githubusercontent.com/u/10763026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArutyunovG", "html_url": "https://github.com/ArutyunovG", "followers_url": "https://api.github.com/users/ArutyunovG/followers", "following_url": "https://api.github.com/users/ArutyunovG/following{/other_user}", "gists_url": "https://api.github.com/users/ArutyunovG/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArutyunovG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArutyunovG/subscriptions", "organizations_url": "https://api.github.com/users/ArutyunovG/orgs", "repos_url": "https://api.github.com/users/ArutyunovG/repos", "events_url": "https://api.github.com/users/ArutyunovG/events{/privacy}", "received_events_url": "https://api.github.com/users/ArutyunovG/received_events", "type": "User", "site_admin": false}, "body": "Unfortunately, even after last explicit merge the error is here. We have to link to onnx_proto.\r\n\r\nBeginning of error log to avoid spam:\r\n\r\n> \"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\INSTALL.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (1) ->\r\n>        \"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\ALL_BUILD.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (3) ->\r\n>        \"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\caffe2\\caffe2_pybind11_state.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (27) ->\r\n>        (\u0426\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 Link) ->\r\n>          pybind_state.obj : error LNK2019: unresolved external symbol \"public: __cdecl onnx_c2::ValueInfoProto::ValueInfoProto(void)\" (??0ValueInfoProto@onnx_c2@@QEAA@XZ) referenced in func\r\n>        tion \"public: class std::vector<class std::vector<class pybind11::bytes,class std::allocator<class pybind11::bytes> >,class std::allocator<class std::vector<class pybind11::bytes,cla\r\n>        ss std::allocator<class pybind11::bytes> > > > __cdecl <lambda_cbc5b9b4b7daf442305dec23ae9651fd>::operator()(class caffe2::onnx::Caffe2Backend &,class pybind11::bytes const &,class s\r\n>        td::vector<class pybind11::bytes,class std::allocator<class pybind11::bytes> > const &,int)const \" (??R<lambda_cbc5b9b4b7daf442305dec23ae9651fd>@@QEBA?AV?$vector@V?$vector@Vbytes@pyb\r\n>        ind11@@V?$allocator@Vbytes@pybind11@@@std@@@std@@V?$allocator@V?$vector@Vbytes@pybind11@@V?$allocator@Vbytes@pybind11@@@std@@@std@@@2@@std@@AEAVCaffe2Backend@onnx@caffe2@@AEBVbytes@p\r\n>        ybind11@@AEBV?$vector@Vbytes@pybind11@@V?$allocator@Vbytes@pybind11@@@std@@@2@H@Z) [D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\caffe2\\caffe2_pybind11_state.vcxproj\r\n>        ]\r\n", "created_at": "2018-11-12T22:01:32Z", "updated_at": "2018-11-23T15:54:41Z", "html_url": "https://github.com/pytorch/pytorch/pull/13550#discussion_r232827748", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/13550", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/232827748"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/13550#discussion_r232827748"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/13550"}}, "body_html": "<p>Unfortunately, even after last explicit merge the error is here. We have to link to onnx_proto.</p>\n<p>Beginning of error log to avoid spam:</p>\n<blockquote>\n<p>\"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\INSTALL.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (1) -&gt;<br>\n\"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\ALL_BUILD.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (3) -&gt;<br>\n\"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\caffe2\\caffe2_pybind11_state.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (27) -&gt;<br>\n(\u0426\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 Link) -&gt;<br>\npybind_state.obj : error LNK2019: unresolved external symbol \"public: __cdecl onnx_c2::ValueInfoProto::ValueInfoProto(void)\" (??0ValueInfoProto@onnx_c2@@QEAA@XZ) referenced in func<br>\ntion \"public: class std::vector&lt;class std::vector&lt;class pybind11::bytes,class std::allocator &gt;,class std::allocator&lt;class std::vector&lt;class pybind11::bytes,cla<br>\nss std::allocator &gt; &gt; &gt; __cdecl &lt;lambda_cbc5b9b4b7daf442305dec23ae9651fd&gt;::operator()(class caffe2::onnx::Caffe2Backend &amp;,class pybind11::bytes const &amp;,class s<br>\ntd::vector&lt;class pybind11::bytes,class std::allocator &gt; const &amp;,int)const \" (??R&lt;lambda_cbc5b9b4b7daf442305dec23ae9651fd&gt;@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=29443296\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/qeba\">@qeba</a>?AV?$vector@V?$vector@Vbytes@pyb<br>\nind11@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=627846\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/v\">@v</a>?$allocator@Vbytes@pybind11@@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=434613\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/std\">@std</a>@@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=434613\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/std\">@std</a>@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=627846\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/v\">@v</a>?$allocator@V?$vector@Vbytes@pybind11@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=627846\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/v\">@v</a>?$allocator@Vbytes@pybind11@@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=434613\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/std\">@std</a>@@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=434613\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/std\">@std</a>@@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=372966\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/2\">@2</a>@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=434613\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/std\">@std</a>@@AEAVCaffe2Backend@onnx@caffe2@@AEBVbytes@p<br>\nybind11@@AEBV?$vector@Vbytes@pybind11@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=627846\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/v\">@v</a>?$allocator@Vbytes@pybind11@@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=434613\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/std\">@std</a>@@<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=372966\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/2\">@2</a>@H@Z) [D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\caffe2\\caffe2_pybind11_state.vcxproj<br>\n]</p>\n</blockquote>", "body_text": "Unfortunately, even after last explicit merge the error is here. We have to link to onnx_proto.\nBeginning of error log to avoid spam:\n\n\"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\INSTALL.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (1) ->\n\"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\ALL_BUILD.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (3) ->\n\"D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\caffe2\\caffe2_pybind11_state.vcxproj\" (\u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) (27) ->\n(\u0426\u0435\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 Link) ->\npybind_state.obj : error LNK2019: unresolved external symbol \"public: __cdecl onnx_c2::ValueInfoProto::ValueInfoProto(void)\" (??0ValueInfoProto@onnx_c2@@QEAA@XZ) referenced in func\ntion \"public: class std::vector<class std::vector<class pybind11::bytes,class std::allocator >,class std::allocator<class std::vector<class pybind11::bytes,cla\nss std::allocator > > > __cdecl <lambda_cbc5b9b4b7daf442305dec23ae9651fd>::operator()(class caffe2::onnx::Caffe2Backend &,class pybind11::bytes const &,class s\ntd::vector<class pybind11::bytes,class std::allocator > const &,int)const \" (??R<lambda_cbc5b9b4b7daf442305dec23ae9651fd>@@qeba?AV?$vector@V?$vector@Vbytes@pyb\nind11@@v?$allocator@Vbytes@pybind11@@@std@@@std@@v?$allocator@V?$vector@Vbytes@pybind11@@v?$allocator@Vbytes@pybind11@@@std@@@std@@@2@@std@@AEAVCaffe2Backend@onnx@caffe2@@AEBVbytes@p\nybind11@@AEBV?$vector@Vbytes@pybind11@@v?$allocator@Vbytes@pybind11@@@std@@@2@H@Z) [D:\\pytorch-scripts\\caffe2_builders\\v140\\pytorch\\build\\Release\\caffe2\\caffe2_pybind11_state.vcxproj\n]", "in_reply_to_id": 232736312}
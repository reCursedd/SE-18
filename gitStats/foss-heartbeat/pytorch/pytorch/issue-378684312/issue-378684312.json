{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13717", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13717/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13717/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13717/events", "html_url": "https://github.com/pytorch/pytorch/issues/13717", "id": 378684312, "node_id": "MDU6SXNzdWUzNzg2ODQzMTI=", "number": 13717, "title": "Bug in scatter_add_ ", "user": {"login": "tanaka-jp", "id": 29939758, "node_id": "MDQ6VXNlcjI5OTM5NzU4", "avatar_url": "https://avatars2.githubusercontent.com/u/29939758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanaka-jp", "html_url": "https://github.com/tanaka-jp", "followers_url": "https://api.github.com/users/tanaka-jp/followers", "following_url": "https://api.github.com/users/tanaka-jp/following{/other_user}", "gists_url": "https://api.github.com/users/tanaka-jp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanaka-jp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanaka-jp/subscriptions", "organizations_url": "https://api.github.com/users/tanaka-jp/orgs", "repos_url": "https://api.github.com/users/tanaka-jp/repos", "events_url": "https://api.github.com/users/tanaka-jp/events{/privacy}", "received_events_url": "https://api.github.com/users/tanaka-jp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-08T11:10:44Z", "updated_at": "2018-11-13T04:40:38Z", "closed_at": "2018-11-12T18:34:27Z", "author_association": "NONE", "body_html": "<p>I am using pytorch 0.4.1 .</p>\n<p>The scatter_add_  works different from cpu to gpu.</p>\n<p>============================</p>\n<p>import torch<br>\nx = torch.rand(2, 5)<br>\ntorch.ones(3, 5).scatter_add_(1, torch.tensor([[1], [2]]), x)</p>\n<p>tensor([[1.0000, 1.8184, 1.0000, 1.0000, 1.0000],<br>\n[1.0000, 1.0000, 1.3166, 1.0000, 1.0000],<br>\n[1.0007, 1.0000, 1.0000, 1.0000, 1.0000]])</p>\n<p>x = x.to(torch.device('cuda:0'))<br>\ntorch.ones(3, 5).scatter_add_(1, torch.tensor([[1], [2]]), x)</p>\n<p>Traceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nRuntimeError: Expected object of type torch.FloatTensor but found type torch.cuda.FloatTensor for argument <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"171522963\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/4\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/4/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/4\">#4</a> 'src'</p>\n<p>============================</p>\n<p>The cpu mode is bug which is not the same as document.<br>\nBut I think it is more convenient.</p>", "body_text": "I am using pytorch 0.4.1 .\nThe scatter_add_  works different from cpu to gpu.\n============================\nimport torch\nx = torch.rand(2, 5)\ntorch.ones(3, 5).scatter_add_(1, torch.tensor([[1], [2]]), x)\ntensor([[1.0000, 1.8184, 1.0000, 1.0000, 1.0000],\n[1.0000, 1.0000, 1.3166, 1.0000, 1.0000],\n[1.0007, 1.0000, 1.0000, 1.0000, 1.0000]])\nx = x.to(torch.device('cuda:0'))\ntorch.ones(3, 5).scatter_add_(1, torch.tensor([[1], [2]]), x)\nTraceback (most recent call last):\nFile \"\", line 1, in \nRuntimeError: Expected object of type torch.FloatTensor but found type torch.cuda.FloatTensor for argument #4 'src'\n============================\nThe cpu mode is bug which is not the same as document.\nBut I think it is more convenient.", "body": "I am using pytorch 0.4.1 .\r\n\r\nThe scatter_add_  works different from cpu to gpu.\r\n\r\n============================\r\n\r\nimport torch\r\nx = torch.rand(2, 5)\r\ntorch.ones(3, 5).scatter_add_(1, torch.tensor([[1], [2]]), x)\r\n\r\ntensor([[1.0000, 1.8184, 1.0000, 1.0000, 1.0000],\r\n        [1.0000, 1.0000, 1.3166, 1.0000, 1.0000],\r\n        [1.0007, 1.0000, 1.0000, 1.0000, 1.0000]])\r\n\r\n\r\n\r\nx = x.to(torch.device('cuda:0'))\r\ntorch.ones(3, 5).scatter_add_(1, torch.tensor([[1], [2]]), x)\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nRuntimeError: Expected object of type torch.FloatTensor but found type torch.cuda.FloatTensor for argument #4 'src'\r\n\r\n============================\r\n\r\nThe cpu mode is bug which is not the same as document.\r\nBut I think it is more convenient.\r\n\r\n"}
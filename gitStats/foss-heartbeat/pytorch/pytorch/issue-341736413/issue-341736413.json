{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9479", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9479/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9479/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9479/events", "html_url": "https://github.com/pytorch/pytorch/issues/9479", "id": 341736413, "node_id": "MDU6SXNzdWUzNDE3MzY0MTM=", "number": 9479, "title": "test_as_strided intermittently fails", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-07-17T01:50:39Z", "updated_at": "2018-07-19T16:12:13Z", "closed_at": "2018-07-19T16:12:13Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Examples: <a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-trusty-py2.7.9-test/11014/console\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-trusty-py2.7.9-test/11014/console</a> <a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-macos-10.13-py3-test1/3757/console\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-macos-10.13-py3-test1/3757/console</a></p>\n<pre><code>00:20:35 ======================================================================\n00:20:35 ERROR: test_as_strided (__main__.TestAutograd)\n00:20:35 ----------------------------------------------------------------------\n00:20:35 Traceback (most recent call last):\n00:20:35   File \"test_autograd.py\", line 2122, in test_as_strided\n00:20:35     test(torch.randn(10), None, [1, 2, 1, 5], [0, 5, 100, 1], 2)\n00:20:35   File \"test_autograd.py\", line 2115, in test\n00:20:35     gradcheck(closure, [x])\n00:20:35   File \"/opt/python/2.7.9/lib/python2.7/site-packages/torch/autograd/gradcheck.py\", line 214, in gradcheck\n00:20:35     'numerical:%s\\nanalytical:%s\\n' % (i, j, n, a))\n00:20:35   File \"/opt/python/2.7.9/lib/python2.7/site-packages/torch/autograd/gradcheck.py\", line 194, in fail_test\n00:20:35     raise RuntimeError(msg)\n00:20:35 RuntimeError: Jacobian mismatch for output 0 with respect to input 0,\n00:20:35 numerical:tensor([[0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000,    nan,\n00:20:35          0.0000]])\n00:20:35 analytical:tensor([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [1., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 1., 0., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 1., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 1., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 1., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 0., 1., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 0., 0., 1., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 0., 0., 0., 1., 0., 0.]])\n00:20:35 \n</code></pre>\n<p>CC <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5674597\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/SsnL\">@SsnL</a>, since you fixed <code>as_strided</code> backward recently.</p>", "body_text": "Examples: https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-trusty-py2.7.9-test/11014/console https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-macos-10.13-py3-test1/3757/console\n00:20:35 ======================================================================\n00:20:35 ERROR: test_as_strided (__main__.TestAutograd)\n00:20:35 ----------------------------------------------------------------------\n00:20:35 Traceback (most recent call last):\n00:20:35   File \"test_autograd.py\", line 2122, in test_as_strided\n00:20:35     test(torch.randn(10), None, [1, 2, 1, 5], [0, 5, 100, 1], 2)\n00:20:35   File \"test_autograd.py\", line 2115, in test\n00:20:35     gradcheck(closure, [x])\n00:20:35   File \"/opt/python/2.7.9/lib/python2.7/site-packages/torch/autograd/gradcheck.py\", line 214, in gradcheck\n00:20:35     'numerical:%s\\nanalytical:%s\\n' % (i, j, n, a))\n00:20:35   File \"/opt/python/2.7.9/lib/python2.7/site-packages/torch/autograd/gradcheck.py\", line 194, in fail_test\n00:20:35     raise RuntimeError(msg)\n00:20:35 RuntimeError: Jacobian mismatch for output 0 with respect to input 0,\n00:20:35 numerical:tensor([[0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000,    nan,\n00:20:35          0.0000],\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000,    nan,\n00:20:35          0.0000]])\n00:20:35 analytical:tensor([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [1., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 1., 0., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 1., 0., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 1., 0., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 1., 0., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 0., 1., 0., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 0., 0., 1., 0., 0., 0.],\n00:20:35         [0., 0., 0., 0., 0., 0., 0., 1., 0., 0.]])\n00:20:35 \n\nCC @SsnL, since you fixed as_strided backward recently.", "body": "Examples: https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-trusty-py2.7.9-test/11014/console https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-macos-10.13-py3-test1/3757/console\r\n\r\n```\r\n00:20:35 ======================================================================\r\n00:20:35 ERROR: test_as_strided (__main__.TestAutograd)\r\n00:20:35 ----------------------------------------------------------------------\r\n00:20:35 Traceback (most recent call last):\r\n00:20:35   File \"test_autograd.py\", line 2122, in test_as_strided\r\n00:20:35     test(torch.randn(10), None, [1, 2, 1, 5], [0, 5, 100, 1], 2)\r\n00:20:35   File \"test_autograd.py\", line 2115, in test\r\n00:20:35     gradcheck(closure, [x])\r\n00:20:35   File \"/opt/python/2.7.9/lib/python2.7/site-packages/torch/autograd/gradcheck.py\", line 214, in gradcheck\r\n00:20:35     'numerical:%s\\nanalytical:%s\\n' % (i, j, n, a))\r\n00:20:35   File \"/opt/python/2.7.9/lib/python2.7/site-packages/torch/autograd/gradcheck.py\", line 194, in fail_test\r\n00:20:35     raise RuntimeError(msg)\r\n00:20:35 RuntimeError: Jacobian mismatch for output 0 with respect to input 0,\r\n00:20:35 numerical:tensor([[0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000,    nan,\r\n00:20:35          0.0000],\r\n00:20:35         [0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 1.0000,    nan,\r\n00:20:35          0.0000]])\r\n00:20:35 analytical:tensor([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\r\n00:20:35         [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\r\n00:20:35         [1., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\r\n00:20:35         [0., 1., 0., 0., 0., 0., 0., 0., 0., 0.],\r\n00:20:35         [0., 0., 1., 0., 0., 0., 0., 0., 0., 0.],\r\n00:20:35         [0., 0., 0., 1., 0., 0., 0., 0., 0., 0.],\r\n00:20:35         [0., 0., 0., 0., 1., 0., 0., 0., 0., 0.],\r\n00:20:35         [0., 0., 0., 0., 0., 1., 0., 0., 0., 0.],\r\n00:20:35         [0., 0., 0., 0., 0., 0., 1., 0., 0., 0.],\r\n00:20:35         [0., 0., 0., 0., 0., 0., 0., 1., 0., 0.]])\r\n00:20:35 \r\n```\r\n\r\nCC @SsnL, since you fixed `as_strided` backward recently."}
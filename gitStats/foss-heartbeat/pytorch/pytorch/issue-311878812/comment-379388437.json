{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/379388437", "html_url": "https://github.com/pytorch/pytorch/pull/6343#issuecomment-379388437", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6343", "id": 379388437, "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTM4ODQzNw==", "user": {"login": "lantiga", "id": 191033, "node_id": "MDQ6VXNlcjE5MTAzMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/191033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lantiga", "html_url": "https://github.com/lantiga", "followers_url": "https://api.github.com/users/lantiga/followers", "following_url": "https://api.github.com/users/lantiga/following{/other_user}", "gists_url": "https://api.github.com/users/lantiga/gists{/gist_id}", "starred_url": "https://api.github.com/users/lantiga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lantiga/subscriptions", "organizations_url": "https://api.github.com/users/lantiga/orgs", "repos_url": "https://api.github.com/users/lantiga/repos", "events_url": "https://api.github.com/users/lantiga/events{/privacy}", "received_events_url": "https://api.github.com/users/lantiga/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-06T21:33:55Z", "updated_at": "2018-04-06T21:35:21Z", "author_association": "COLLABORATOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6429851\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/goldsborough\">@goldsborough</a>, an important point related to CI: currently (in <code>master</code>) <code>.jenkins/pytorch/build.sh</code> is passing <code>'pwd'/../libtorch</code> (the install path) as the first argument to <code>build_all.sh</code>. We need this to move the build artifacts out of the way before the source tree is cleaned (after build and before test), so the artifacts are still there by the time <code>test.sh</code> is called.</p>\n<p>The new <code>build_all.sh</code> doesn't run <code>make install</code>, but need it for CI if we keep it working as above.</p>\n<p>The better alternative IMHO is to use the first argument as the location of the <code>build</code> directory, instead of using <code>SCRIPTPATH</code> (which could be the default if no argument is provided).</p>\n<p>In this case, the <code>.jenkins/pytorch/test.sh</code> should be updated to reflect the new location of the <code>test_jit</code> executable.</p>", "body_text": "@goldsborough, an important point related to CI: currently (in master) .jenkins/pytorch/build.sh is passing 'pwd'/../libtorch (the install path) as the first argument to build_all.sh. We need this to move the build artifacts out of the way before the source tree is cleaned (after build and before test), so the artifacts are still there by the time test.sh is called.\nThe new build_all.sh doesn't run make install, but need it for CI if we keep it working as above.\nThe better alternative IMHO is to use the first argument as the location of the build directory, instead of using SCRIPTPATH (which could be the default if no argument is provided).\nIn this case, the .jenkins/pytorch/test.sh should be updated to reflect the new location of the test_jit executable.", "body": "@goldsborough, an important point related to CI: currently (in `master`) `.jenkins/pytorch/build.sh` is passing `'pwd'/../libtorch` (the install path) as the first argument to `build_all.sh`. We need this to move the build artifacts out of the way before the source tree is cleaned (after build and before test), so the artifacts are still there by the time `test.sh` is called.\r\n\r\nThe new `build_all.sh` doesn't run `make install`, but need it for CI if we keep it working as above.\r\n\r\nThe better alternative IMHO is to use the first argument as the location of the `build` directory, instead of using `SCRIPTPATH` (which could be the default if no argument is provided).\r\n\r\nIn this case, the `.jenkins/pytorch/test.sh` should be updated to reflect the new location of the `test_jit` executable.\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/179874794", "pull_request_review_id": 110207600, "id": 179874794, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3OTg3NDc5NA==", "diff_hunk": "@@ -141,51 +139,34 @@ TARGET_LINK_LIBRARIES(torch\n   ${ATEN_LIBRARY}\n )\n \n-TARGET_INCLUDE_DIRECTORIES(torch\n-  PUBLIC\n+set(COMMON_INCLUDES\n   \"${ATEN_INCLUDE_DIR}\"\n   \"${ATEN_INCLUDE_DIR}/TH\"\n+  \"${ATEN_BUILD_INCLUDE_DIR}\"\n+  \"${ATEN_BUILD_PATH}/src/TH\"\n   \"${CMAKE_CURRENT_SOURCE_DIR}\"\n+  \"${CUDA_INCLUDE_DIRS}\")\n+\n+TARGET_INCLUDE_DIRECTORIES(torch\n+  PUBLIC\n+  \"${COMMON_INCLUDES}\"\n   \"${TORCH_SRC_DIR}/../\"\n-  \"${TORCH_SRC_DIR}/../third_party/nanopb\"\n-  \"${CUDA_INCLUDE_DIRS}\"\n-  )\n+  \"${TORCH_SRC_DIR}/csrc/api/include\"\n+  \"${TORCH_SRC_DIR}/../third_party/nanopb\")\n \n SET_TARGET_PROPERTIES(torch PROPERTIES VERSION 1 SOVERSION 1)\n \n if(NOT ${CMAKE_VERSION} VERSION_LESS \"3.1\")\n   SET_PROPERTY(TARGET torch PROPERTY CXX_STANDARD 11)\n endif(NOT ${CMAKE_VERSION} VERSION_LESS \"3.1\")\n \n-install(DIRECTORY \"${TORCH_SRC_DIR}/csrc\"\n-        DESTINATION ${TORCH_INSTALL_INCLUDE_DIR}/torch\n-        FILES_MATCHING PATTERN \"*.h\")\n-\n-INSTALL(TARGETS torch", "path": "tools/cpp_build/libtorch/CMakeLists.txt", "position": null, "original_position": 108, "commit_id": "0d4bc6870cf9d70e7aab000f9858d9e14089c880", "original_commit_id": "691b36fb48a2a8e94adc56d8afbd66f7bbcf2817", "user": {"login": "lantiga", "id": 191033, "node_id": "MDQ6VXNlcjE5MTAzMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/191033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lantiga", "html_url": "https://github.com/lantiga", "followers_url": "https://api.github.com/users/lantiga/followers", "following_url": "https://api.github.com/users/lantiga/following{/other_user}", "gists_url": "https://api.github.com/users/lantiga/gists{/gist_id}", "starred_url": "https://api.github.com/users/lantiga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lantiga/subscriptions", "organizations_url": "https://api.github.com/users/lantiga/orgs", "repos_url": "https://api.github.com/users/lantiga/repos", "events_url": "https://api.github.com/users/lantiga/events{/privacy}", "received_events_url": "https://api.github.com/users/lantiga/received_events", "type": "User", "site_admin": false}, "body": "While I agree with building against the ATen-build tree rather than relying on the Install tree, I would keep the install rules for the `libtorch` target. `ATen` has them too, they're only triggered by `make install`, they have no impact otherwise, but they can be useful for shipping / packaging.", "created_at": "2018-04-06T21:01:03Z", "updated_at": "2018-11-23T15:41:56Z", "html_url": "https://github.com/pytorch/pytorch/pull/6343#discussion_r179874794", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/6343", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/179874794"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/6343#discussion_r179874794"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6343"}}, "body_html": "<p>While I agree with building against the ATen-build tree rather than relying on the Install tree, I would keep the install rules for the <code>libtorch</code> target. <code>ATen</code> has them too, they're only triggered by <code>make install</code>, they have no impact otherwise, but they can be useful for shipping / packaging.</p>", "body_text": "While I agree with building against the ATen-build tree rather than relying on the Install tree, I would keep the install rules for the libtorch target. ATen has them too, they're only triggered by make install, they have no impact otherwise, but they can be useful for shipping / packaging."}
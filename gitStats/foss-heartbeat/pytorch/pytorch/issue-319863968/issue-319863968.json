{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7238", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7238/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7238/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7238/events", "html_url": "https://github.com/pytorch/pytorch/issues/7238", "id": 319863968, "node_id": "MDU6SXNzdWUzMTk4NjM5Njg=", "number": 7238, "title": "[feature request] show name of damaged file in DataLoader", "user": {"login": "medakk", "id": 10536745, "node_id": "MDQ6VXNlcjEwNTM2NzQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/10536745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/medakk", "html_url": "https://github.com/medakk", "followers_url": "https://api.github.com/users/medakk/followers", "following_url": "https://api.github.com/users/medakk/following{/other_user}", "gists_url": "https://api.github.com/users/medakk/gists{/gist_id}", "starred_url": "https://api.github.com/users/medakk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/medakk/subscriptions", "organizations_url": "https://api.github.com/users/medakk/orgs", "repos_url": "https://api.github.com/users/medakk/repos", "events_url": "https://api.github.com/users/medakk/events{/privacy}", "received_events_url": "https://api.github.com/users/medakk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-03T10:23:36Z", "updated_at": "2018-05-03T12:14:24Z", "closed_at": "2018-05-03T12:14:24Z", "author_association": "NONE", "body_html": "<p>I am using DataLoader to get some images from a dataset with a few bad images. It would be nice if the DataLoader mentioned the name of the damaged image in the exception thrown:</p>\n<pre><code>---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n&lt;ipython-input-10-cc88ea5f8bd3&gt; in &lt;module&gt;()\n      1 model_ft = train_model(model_ft, criterion, optimizer_ft, exp_lr_scheduler,\n----&gt; 2                        num_epochs=25)\n\n&lt;ipython-input-6-373a4f614762&gt; in train_model(model, criterion, optimizer, scheduler, num_epochs)\n     21 \n     22             # Iterate over data.\n---&gt; 23             for inputs, labels in data_loaders[phase]:\n     24                 inputs = inputs.to(device)\n     25                 labels = labels.to(device)\n\n~/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py in __next__(self)\n    284                 self.reorder_dict[idx] = batch\n    285                 continue\n--&gt; 286             return self._process_next_batch(batch)\n    287 \n    288     next = __next__  # Python 2 compatibility\n\n~/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py in _process_next_batch(self, batch)\n    305         self._put_indices()\n    306         if isinstance(batch, ExceptionWrapper):\n--&gt; 307             raise batch.exc_type(batch.exc_msg)\n    308         return batch\n    309 \n\nOSError: Traceback (most recent call last):\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 57, in _worker_loop\n    samples = collate_fn([dataset[i] for i in batch_indices])\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 57, in &lt;listcomp&gt;\n    samples = collate_fn([dataset[i] for i in batch_indices])\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 101, in __getitem__\n    sample = self.loader(path)\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 147, in default_loader\n    return pil_loader(path)\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 130, in pil_loader\n    return img.convert('RGB')\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/PIL/Image.py\", line 879, in convert\n    self.load()\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/PIL/ImageFile.py\", line 228, in load\n    \"(%d bytes not processed)\" % len(b))\nOSError: image file is truncated (5 bytes not processed)\n</code></pre>", "body_text": "I am using DataLoader to get some images from a dataset with a few bad images. It would be nice if the DataLoader mentioned the name of the damaged image in the exception thrown:\n---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n<ipython-input-10-cc88ea5f8bd3> in <module>()\n      1 model_ft = train_model(model_ft, criterion, optimizer_ft, exp_lr_scheduler,\n----> 2                        num_epochs=25)\n\n<ipython-input-6-373a4f614762> in train_model(model, criterion, optimizer, scheduler, num_epochs)\n     21 \n     22             # Iterate over data.\n---> 23             for inputs, labels in data_loaders[phase]:\n     24                 inputs = inputs.to(device)\n     25                 labels = labels.to(device)\n\n~/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py in __next__(self)\n    284                 self.reorder_dict[idx] = batch\n    285                 continue\n--> 286             return self._process_next_batch(batch)\n    287 \n    288     next = __next__  # Python 2 compatibility\n\n~/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py in _process_next_batch(self, batch)\n    305         self._put_indices()\n    306         if isinstance(batch, ExceptionWrapper):\n--> 307             raise batch.exc_type(batch.exc_msg)\n    308         return batch\n    309 \n\nOSError: Traceback (most recent call last):\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 57, in _worker_loop\n    samples = collate_fn([dataset[i] for i in batch_indices])\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 57, in <listcomp>\n    samples = collate_fn([dataset[i] for i in batch_indices])\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 101, in __getitem__\n    sample = self.loader(path)\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 147, in default_loader\n    return pil_loader(path)\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 130, in pil_loader\n    return img.convert('RGB')\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/PIL/Image.py\", line 879, in convert\n    self.load()\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/PIL/ImageFile.py\", line 228, in load\n    \"(%d bytes not processed)\" % len(b))\nOSError: image file is truncated (5 bytes not processed)", "body": "I am using DataLoader to get some images from a dataset with a few bad images. It would be nice if the DataLoader mentioned the name of the damaged image in the exception thrown:\r\n```\r\n---------------------------------------------------------------------------\r\nOSError                                   Traceback (most recent call last)\r\n<ipython-input-10-cc88ea5f8bd3> in <module>()\r\n      1 model_ft = train_model(model_ft, criterion, optimizer_ft, exp_lr_scheduler,\r\n----> 2                        num_epochs=25)\r\n\r\n<ipython-input-6-373a4f614762> in train_model(model, criterion, optimizer, scheduler, num_epochs)\r\n     21 \r\n     22             # Iterate over data.\r\n---> 23             for inputs, labels in data_loaders[phase]:\r\n     24                 inputs = inputs.to(device)\r\n     25                 labels = labels.to(device)\r\n\r\n~/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py in __next__(self)\r\n    284                 self.reorder_dict[idx] = batch\r\n    285                 continue\r\n--> 286             return self._process_next_batch(batch)\r\n    287 \r\n    288     next = __next__  # Python 2 compatibility\r\n\r\n~/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py in _process_next_batch(self, batch)\r\n    305         self._put_indices()\r\n    306         if isinstance(batch, ExceptionWrapper):\r\n--> 307             raise batch.exc_type(batch.exc_msg)\r\n    308         return batch\r\n    309 \r\n\r\nOSError: Traceback (most recent call last):\r\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 57, in _worker_loop\r\n    samples = collate_fn([dataset[i] for i in batch_indices])\r\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 57, in <listcomp>\r\n    samples = collate_fn([dataset[i] for i in batch_indices])\r\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 101, in __getitem__\r\n    sample = self.loader(path)\r\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 147, in default_loader\r\n    return pil_loader(path)\r\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/torchvision/datasets/folder.py\", line 130, in pil_loader\r\n    return img.convert('RGB')\r\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/PIL/Image.py\", line 879, in convert\r\n    self.load()\r\n  File \"/home/karthik/.virtualenvs/pytorch-sandbox/lib/python3.6/site-packages/PIL/ImageFile.py\", line 228, in load\r\n    \"(%d bytes not processed)\" % len(b))\r\nOSError: image file is truncated (5 bytes not processed)\r\n```"}
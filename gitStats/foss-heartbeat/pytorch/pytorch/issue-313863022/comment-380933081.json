{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/380933081", "html_url": "https://github.com/pytorch/pytorch/issues/6562#issuecomment-380933081", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6562", "id": 380933081, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDkzMzA4MQ==", "user": {"login": "shirishr", "id": 7770013, "node_id": "MDQ6VXNlcjc3NzAwMTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/7770013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shirishr", "html_url": "https://github.com/shirishr", "followers_url": "https://api.github.com/users/shirishr/followers", "following_url": "https://api.github.com/users/shirishr/following{/other_user}", "gists_url": "https://api.github.com/users/shirishr/gists{/gist_id}", "starred_url": "https://api.github.com/users/shirishr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shirishr/subscriptions", "organizations_url": "https://api.github.com/users/shirishr/orgs", "repos_url": "https://api.github.com/users/shirishr/repos", "events_url": "https://api.github.com/users/shirishr/events{/privacy}", "received_events_url": "https://api.github.com/users/shirishr/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-12T20:23:51Z", "updated_at": "2018-04-12T21:01:48Z", "author_association": "NONE", "body_html": "<p>I came across a post <a href=\"https://github.com/caffe2/caffe2/issues/1229\" data-hovercard-type=\"issue\" data-hovercard-url=\"/caffe2/caffe2/issues/1229/hovercard\">here</a><br>\nThis suggests that</p>\n<p>Caffe2 works with GPU - but not in workspace.Predictor framework. (You must use older way to setup/invoke your networks.).</p>\n<p>Can this be confirmed?<br>\nAnother reference is <a href=\"https://github.com/caffe2/caffe2/issues/1294\" data-hovercard-type=\"issue\" data-hovercard-url=\"/caffe2/caffe2/issues/1294/hovercard\">here</a></p>\n<p>Unfortunately both threads above are not closed to be definitive.</p>\n<p>Thanks for your help (Is there any other code I can run to see Caffe2 play with GPU?)</p>\n<p><strong>Update</strong><br>\nI installed nccl using command line as</p>\n<p>sudo dpkg -i nccl-repo-ubuntu1604-2.1.15-ga-cuda9.0_1-1_amd64.deb</p>\n<p>This instructed me to install a key</p>\n<p>sudo apt-key add /var/nccl-repo-2.1.15-ga-cuda9.0/7fa2af80.pub</p>\n<p>I also installed libnccl2 and libnccl-dev</p>\n<p>sudo apt install libnccl2 libnccl-dev</p>\n<p>As a result the two warnings reproduced below <strong>have gone away</strong>:</p>\n<p>WARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.<br>\nWARNING:root:Debug message: libnccl.so.2: cannot open shared object file: No such file or directory</p>\n<p>However, the notebook cells when run (network training / testing) <strong>does not show</strong> any usage on nvidia-smi.</p>", "body_text": "I came across a post here\nThis suggests that\nCaffe2 works with GPU - but not in workspace.Predictor framework. (You must use older way to setup/invoke your networks.).\nCan this be confirmed?\nAnother reference is here\nUnfortunately both threads above are not closed to be definitive.\nThanks for your help (Is there any other code I can run to see Caffe2 play with GPU?)\nUpdate\nI installed nccl using command line as\nsudo dpkg -i nccl-repo-ubuntu1604-2.1.15-ga-cuda9.0_1-1_amd64.deb\nThis instructed me to install a key\nsudo apt-key add /var/nccl-repo-2.1.15-ga-cuda9.0/7fa2af80.pub\nI also installed libnccl2 and libnccl-dev\nsudo apt install libnccl2 libnccl-dev\nAs a result the two warnings reproduced below have gone away:\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nWARNING:root:Debug message: libnccl.so.2: cannot open shared object file: No such file or directory\nHowever, the notebook cells when run (network training / testing) does not show any usage on nvidia-smi.", "body": "I came across a post [here](https://github.com/caffe2/caffe2/issues/1229)\r\nThis suggests that\r\n\r\nCaffe2 works with GPU - but not in workspace.Predictor framework. (You must use older way to setup/invoke your networks.). \r\n\r\nCan this be confirmed?\r\n Another reference is [here](https://github.com/caffe2/caffe2/issues/1294)\r\n\r\nUnfortunately both threads above are not closed to be definitive.\r\n\r\nThanks for your help (Is there any other code I can run to see Caffe2 play with GPU?)\r\n\r\n**Update**\r\nI installed nccl using command line as\r\n\r\nsudo dpkg -i nccl-repo-ubuntu1604-2.1.15-ga-cuda9.0_1-1_amd64.deb\r\n\r\nThis instructed me to install a key\r\n\r\nsudo apt-key add /var/nccl-repo-2.1.15-ga-cuda9.0/7fa2af80.pub\r\n\r\nI also installed libnccl2 and libnccl-dev\r\n\r\nsudo apt install libnccl2 libnccl-dev\r\n\r\nAs a result the two warnings reproduced below **have gone away**:\r\n\r\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\r\nWARNING:root:Debug message: libnccl.so.2: cannot open shared object file: No such file or directory\r\n\r\nHowever, the notebook cells when run (network training / testing) **does not show** any usage on nvidia-smi."}
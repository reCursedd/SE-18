{"url": "https://api.github.com/repos/pytorch/pytorch/issues/330", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/330/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/330/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/330/events", "html_url": "https://github.com/pytorch/pytorch/issues/330", "id": 196492651, "node_id": "MDU6SXNzdWUxOTY0OTI2NTE=", "number": 330, "title": "torch.topk arguments interpreted differently from Torch", "user": {"login": "colesbury", "id": 655866, "node_id": "MDQ6VXNlcjY1NTg2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/655866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colesbury", "html_url": "https://github.com/colesbury", "followers_url": "https://api.github.com/users/colesbury/followers", "following_url": "https://api.github.com/users/colesbury/following{/other_user}", "gists_url": "https://api.github.com/users/colesbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/colesbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colesbury/subscriptions", "organizations_url": "https://api.github.com/users/colesbury/orgs", "repos_url": "https://api.github.com/users/colesbury/repos", "events_url": "https://api.github.com/users/colesbury/events{/privacy}", "received_events_url": "https://api.github.com/users/colesbury/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 424131847, "node_id": "MDU6TGFiZWw0MjQxMzE4NDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bug", "name": "bug", "color": "b60205", "default": true}, {"id": 443484135, "node_id": "MDU6TGFiZWw0NDM0ODQxMzU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/high%20priority", "name": "high priority", "color": "F22613", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-12-19T18:53:54Z", "updated_at": "2016-12-28T17:16:02Z", "closed_at": "2016-12-28T17:16:02Z", "author_association": "MEMBER", "body_html": "<p>In Lua Torch <code>tensor:topk(5, true, true)</code> is interpreted as <code>k=5</code>, <code>dim=&lt;last&gt;</code>, <code>dir=True</code> (smallest) <code>sort=True</code></p>\n<p>In PyTorch <code>tensor.topk(5, True, True)</code> is interpreted as <code>k=5</code>, <code>dim=1</code> (True is 1) <code>smallest=True</code> (smallest) <code>sort=False</code> (default)</p>\n<p>This is because Python booleans are also numbers. In both Python and Lua the arguments to topk are really confusing because the ordering of \"smallest\" and \"sorted\" can be easily swapped because they are the same type and <code>True</code> can also be interpreted as the \"dim\" (as in the example above).</p>\n<p>It's also weird that:</p>\n<ul>\n<li>By default, the output order is unspecified (not sorted) which can lead to confusing bugs</li>\n<li>By default, it returns the <strong>bottom</strong> k not the <strong>top</strong> k</li>\n</ul>", "body_text": "In Lua Torch tensor:topk(5, true, true) is interpreted as k=5, dim=<last>, dir=True (smallest) sort=True\nIn PyTorch tensor.topk(5, True, True) is interpreted as k=5, dim=1 (True is 1) smallest=True (smallest) sort=False (default)\nThis is because Python booleans are also numbers. In both Python and Lua the arguments to topk are really confusing because the ordering of \"smallest\" and \"sorted\" can be easily swapped because they are the same type and True can also be interpreted as the \"dim\" (as in the example above).\nIt's also weird that:\n\nBy default, the output order is unspecified (not sorted) which can lead to confusing bugs\nBy default, it returns the bottom k not the top k", "body": "In Lua Torch `tensor:topk(5, true, true)` is interpreted as `k=5`, `dim=<last>`, `dir=True` (smallest) `sort=True`\r\n\r\nIn PyTorch `tensor.topk(5, True, True)` is interpreted as `k=5`, `dim=1` (True is 1) `smallest=True` (smallest) `sort=False` (default)\r\n\r\nThis is because Python booleans are also numbers. In both Python and Lua the arguments to topk are really confusing because the ordering of \"smallest\" and \"sorted\" can be easily swapped because they are the same type and `True` can also be interpreted as the \"dim\" (as in the example above).\r\n\r\nIt's also weird that:\r\n\r\n- By default, the output order is unspecified (not sorted) which can lead to confusing bugs\r\n- By default, it returns the **bottom** k not the **top** k\r\n"}
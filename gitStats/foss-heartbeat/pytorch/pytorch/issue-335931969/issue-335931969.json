{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8903", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8903/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8903/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8903/events", "html_url": "https://github.com/pytorch/pytorch/pull/8903", "id": 335931969, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk3NTA2MTQz", "number": 8903, "title": "[C++ API] Set random seed at the start of C++ tests", "user": {"login": "goldsborough", "id": 6429851, "node_id": "MDQ6VXNlcjY0Mjk4NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6429851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldsborough", "html_url": "https://github.com/goldsborough", "followers_url": "https://api.github.com/users/goldsborough/followers", "following_url": "https://api.github.com/users/goldsborough/following{/other_user}", "gists_url": "https://api.github.com/users/goldsborough/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldsborough/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldsborough/subscriptions", "organizations_url": "https://api.github.com/users/goldsborough/orgs", "repos_url": "https://api.github.com/users/goldsborough/repos", "events_url": "https://api.github.com/users/goldsborough/events{/privacy}", "received_events_url": "https://api.github.com/users/goldsborough/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-06-26T18:02:27Z", "updated_at": "2018-11-23T15:46:26Z", "closed_at": "2018-06-28T03:10:45Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/8903", "html_url": "https://github.com/pytorch/pytorch/pull/8903", "diff_url": "https://github.com/pytorch/pytorch/pull/8903.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/8903.patch"}, "body_html": "<p>Sets the random seed at the start of C++ tests so that everything is super deterministic.</p>\n<p>I made sure we only generate random values from torch instead of <code>std::</code>, so that this seed always applies. I.e. I do:</p>\n<pre><code>torch::randint(2, {2}, at::kInt64)\n</code></pre>\n<p>instead of</p>\n<pre><code>std::rand() % 2\n</code></pre>\n<p>Also got rid of the tests that test the random seeding, since it would interfere here. And the test is not useful since we just use ATen's seeding mechanism, which should work.</p>\n<p><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #7288.\">Fixes</span>  <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"320335875\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/7288\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/7288/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/7288\">#7288</a> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"320335579\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/7286\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/7286/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/7286\">#7286</a> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"320336484\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/7289\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/7289/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/7289\">#7289</a></p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3605224\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ebetica\">@ebetica</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13564\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ezyang\">@ezyang</a></p>", "body_text": "Sets the random seed at the start of C++ tests so that everything is super deterministic.\nI made sure we only generate random values from torch instead of std::, so that this seed always applies. I.e. I do:\ntorch::randint(2, {2}, at::kInt64)\n\ninstead of\nstd::rand() % 2\n\nAlso got rid of the tests that test the random seeding, since it would interfere here. And the test is not useful since we just use ATen's seeding mechanism, which should work.\nFixes  #7288 #7286 #7289\n@ebetica @ezyang", "body": "Sets the random seed at the start of C++ tests so that everything is super deterministic.\r\n\r\nI made sure we only generate random values from torch instead of `std::`, so that this seed always applies. I.e. I do:\r\n\r\n```\r\ntorch::randint(2, {2}, at::kInt64)\r\n```\r\n\r\ninstead of\r\n\r\n```\r\nstd::rand() % 2\r\n```\r\n\r\nAlso got rid of the tests that test the random seeding, since it would interfere here. And the test is not useful since we just use ATen's seeding mechanism, which should work.\r\n\r\nFixes  #7288 #7286 #7289\r\n\r\n@ebetica @ezyang "}
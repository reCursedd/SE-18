{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10375", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10375/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10375/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10375/events", "html_url": "https://github.com/pytorch/pytorch/issues/10375", "id": 349123533, "node_id": "MDU6SXNzdWUzNDkxMjM1MzM=", "number": 10375, "title": "Sending CUDA tensor to process, and then back, does not work", "user": {"login": "acgtyrant", "id": 3921062, "node_id": "MDQ6VXNlcjM5MjEwNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3921062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acgtyrant", "html_url": "https://github.com/acgtyrant", "followers_url": "https://api.github.com/users/acgtyrant/followers", "following_url": "https://api.github.com/users/acgtyrant/following{/other_user}", "gists_url": "https://api.github.com/users/acgtyrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/acgtyrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acgtyrant/subscriptions", "organizations_url": "https://api.github.com/users/acgtyrant/orgs", "repos_url": "https://api.github.com/users/acgtyrant/repos", "events_url": "https://api.github.com/users/acgtyrant/events{/privacy}", "received_events_url": "https://api.github.com/users/acgtyrant/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-08-09T13:17:34Z", "updated_at": "2018-10-25T21:41:55Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p><strong>Editorial note:</strong> See <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"349123533\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/10375\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/10375/hovercard?comment_id=412574947&amp;comment_type=issue_comment\" href=\"https://github.com/pytorch/pytorch/issues/10375#issuecomment-412574947\">#10375 (comment)</a> for the real problem</p>\n<h2>Issue description</h2>\n<p>I can not get the tensor from queue.</p>\n<h2>Code example</h2>\n<pre><code>import torch\n\n\ndef _process(queue):\n    input_ = queue.get()\n    print('get')\n    queue.put(input_)\n    print('put')\n\n\nif __name__ == '__main__':\n    torch.multiprocessing.set_start_method('spawn')\n    input_ = torch.ones(1).cuda()\n    queue = torch.multiprocessing.Queue()\n    queue.put(input_)\n    process = torch.multiprocessing.Process(target=_process, args=(queue,))\n    process.start()\n    process.join()\n    result = queue.get()\n    print('end')\n    print(result)\n</code></pre>\n<p>I executed this code, and only get and put printed, no end. I use ctrl-c to interrupt it, I find it blocks in result = queue.get(). Any idea?</p>\n<h2>System Info</h2>\n<p>Collecting environment information...<br>\nPyTorch version: 0.4.0a0+200fb22<br>\nIs debug build: No<br>\nCUDA used to build PyTorch: Could not collect</p>\n<p>OS: Arch Linux<br>\nGCC version: (GCC) 8.1.1 20180531<br>\nCMake version: version 3.11.4</p>\n<p>Python version: 2.7<br>\nIs CUDA available: No<br>\nCUDA runtime version: 9.2.148<br>\nGPU models and configuration: GPU 0: GeForce GTX 1080<br>\nNvidia driver version: 396.45<br>\ncuDNN version: Could not collect</p>\n<p>Versions of relevant libraries:<br>\n[pip] numpy (1.14.3)<br>\n[pip] torch (0.4.1)<br>\n[pip] torchvision (0.2.1)<br>\n[conda] Could not collect</p>", "body_text": "Editorial note: See #10375 (comment) for the real problem\nIssue description\nI can not get the tensor from queue.\nCode example\nimport torch\n\n\ndef _process(queue):\n    input_ = queue.get()\n    print('get')\n    queue.put(input_)\n    print('put')\n\n\nif __name__ == '__main__':\n    torch.multiprocessing.set_start_method('spawn')\n    input_ = torch.ones(1).cuda()\n    queue = torch.multiprocessing.Queue()\n    queue.put(input_)\n    process = torch.multiprocessing.Process(target=_process, args=(queue,))\n    process.start()\n    process.join()\n    result = queue.get()\n    print('end')\n    print(result)\n\nI executed this code, and only get and put printed, no end. I use ctrl-c to interrupt it, I find it blocks in result = queue.get(). Any idea?\nSystem Info\nCollecting environment information...\nPyTorch version: 0.4.0a0+200fb22\nIs debug build: No\nCUDA used to build PyTorch: Could not collect\nOS: Arch Linux\nGCC version: (GCC) 8.1.1 20180531\nCMake version: version 3.11.4\nPython version: 2.7\nIs CUDA available: No\nCUDA runtime version: 9.2.148\nGPU models and configuration: GPU 0: GeForce GTX 1080\nNvidia driver version: 396.45\ncuDNN version: Could not collect\nVersions of relevant libraries:\n[pip] numpy (1.14.3)\n[pip] torch (0.4.1)\n[pip] torchvision (0.2.1)\n[conda] Could not collect", "body": "**Editorial note:** See https://github.com/pytorch/pytorch/issues/10375#issuecomment-412574947 for the real problem\r\n\r\n## Issue description\r\n\r\nI can not get the tensor from queue.\r\n\r\n## Code example\r\n\r\n```\r\nimport torch\r\n\r\n\r\ndef _process(queue):\r\n    input_ = queue.get()\r\n    print('get')\r\n    queue.put(input_)\r\n    print('put')\r\n\r\n\r\nif __name__ == '__main__':\r\n    torch.multiprocessing.set_start_method('spawn')\r\n    input_ = torch.ones(1).cuda()\r\n    queue = torch.multiprocessing.Queue()\r\n    queue.put(input_)\r\n    process = torch.multiprocessing.Process(target=_process, args=(queue,))\r\n    process.start()\r\n    process.join()\r\n    result = queue.get()\r\n    print('end')\r\n    print(result)\r\n```\r\n\r\nI executed this code, and only get and put printed, no end. I use ctrl-c to interrupt it, I find it blocks in result = queue.get(). Any idea?\r\n\r\n## System Info\r\n\r\nCollecting environment information...\r\nPyTorch version: 0.4.0a0+200fb22\r\nIs debug build: No\r\nCUDA used to build PyTorch: Could not collect\r\n\r\nOS: Arch Linux\r\nGCC version: (GCC) 8.1.1 20180531\r\nCMake version: version 3.11.4\r\n\r\nPython version: 2.7\r\nIs CUDA available: No\r\nCUDA runtime version: 9.2.148\r\nGPU models and configuration: GPU 0: GeForce GTX 1080\r\nNvidia driver version: 396.45\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy (1.14.3)\r\n[pip] torch (0.4.1)\r\n[pip] torchvision (0.2.1)\r\n[conda] Could not collect"}
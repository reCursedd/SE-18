{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/183591411", "pull_request_review_id": 114617116, "id": 183591411, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MzU5MTQxMQ==", "diff_hunk": "@@ -14,10 +15,16 @@ def detach_variable(inputs):\n             \"Only tuple of tensors is supported. Got Unsupported input type: \", type(inputs).__name__)\n \n \n+def check_backward_validity(inputs):\n+    if not any(inp.requires_grad for inp in inputs):\n+        warnings.warn(\"None of the inputs have requires_grad=True. Gradients will be None\")\n+\n+\n class CheckpointFunction(torch.autograd.Function):\n \n     @staticmethod\n     def forward(ctx, run_function, *args):\n+        check_backward_validity(*args)", "path": "torch/utils/checkpoint.py", "position": null, "original_position": 19, "commit_id": "3b295702c611b96b5d6f86ab1af4e6c0bdce3003", "original_commit_id": "43903e693822794b3eb698a302be7cfa213b5282", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "body": "check_backward_validity(*args) doesn't make sense. The only reason everything worked is that there are no unit tests for variable number of args in unit tests (all unit tests have one input argument).\r\nEven in one-argument case, `check_backward_validity` didn't have an error because Tensor is iterable.\r\n\r\nI've fixed it, `check_backward_validity(args)` is correct, as `inputs` will then be a tuple.\r\n\r\nPriya, can you send a PR to add unit tests for multiple input case (no hurry)", "created_at": "2018-04-24T02:43:06Z", "updated_at": "2018-11-23T15:43:03Z", "html_url": "https://github.com/pytorch/pytorch/pull/6883#discussion_r183591411", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/6883", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/183591411"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/6883#discussion_r183591411"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6883"}}, "body_html": "<p>check_backward_validity(*args) doesn't make sense. The only reason everything worked is that there are no unit tests for variable number of args in unit tests (all unit tests have one input argument).<br>\nEven in one-argument case, <code>check_backward_validity</code> didn't have an error because Tensor is iterable.</p>\n<p>I've fixed it, <code>check_backward_validity(args)</code> is correct, as <code>inputs</code> will then be a tuple.</p>\n<p>Priya, can you send a PR to add unit tests for multiple input case (no hurry)</p>", "body_text": "check_backward_validity(*args) doesn't make sense. The only reason everything worked is that there are no unit tests for variable number of args in unit tests (all unit tests have one input argument).\nEven in one-argument case, check_backward_validity didn't have an error because Tensor is iterable.\nI've fixed it, check_backward_validity(args) is correct, as inputs will then be a tuple.\nPriya, can you send a PR to add unit tests for multiple input case (no hurry)", "in_reply_to_id": 183580689}
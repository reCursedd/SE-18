{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/183601200", "pull_request_review_id": 114628257, "id": 183601200, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MzYwMTIwMA==", "diff_hunk": "@@ -14,10 +15,16 @@ def detach_variable(inputs):\n             \"Only tuple of tensors is supported. Got Unsupported input type: \", type(inputs).__name__)\n \n \n+def check_backward_validity(inputs):\n+    if not any(inp.requires_grad for inp in inputs):\n+        warnings.warn(\"None of the inputs have requires_grad=True. Gradients will be None\")\n+\n+\n class CheckpointFunction(torch.autograd.Function):\n \n     @staticmethod\n     def forward(ctx, run_function, *args):\n+        check_backward_validity(*args)", "path": "torch/utils/checkpoint.py", "position": null, "original_position": 19, "commit_id": "3b295702c611b96b5d6f86ab1af4e6c0bdce3003", "original_commit_id": "43903e693822794b3eb698a302be7cfa213b5282", "user": {"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}, "body": "Thanks for fixing @soumith and @prigoyal. \r\n\r\nI brought up `**kwarg` because users may want to specify keyword argument for the checkpointed function. There can be many valid reasons, e.g. for clarity, for default values in other args, and for keyword-only args. So I think it would be great if users can do things like `checkpoint(torch.svd, x, some=False)` to mean checkpointing the function call `torch.svd(x, some=False)`. :) Hope this makes sense!", "created_at": "2018-04-24T04:18:07Z", "updated_at": "2018-11-23T15:43:04Z", "html_url": "https://github.com/pytorch/pytorch/pull/6883#discussion_r183601200", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/6883", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/183601200"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/6883#discussion_r183601200"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6883"}}, "body_html": "<p>Thanks for fixing <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1310570\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/soumith\">@soumith</a> and <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13488275\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/prigoyal\">@prigoyal</a>.</p>\n<p>I brought up <code>**kwarg</code> because users may want to specify keyword argument for the checkpointed function. There can be many valid reasons, e.g. for clarity, for default values in other args, and for keyword-only args. So I think it would be great if users can do things like <code>checkpoint(torch.svd, x, some=False)</code> to mean checkpointing the function call <code>torch.svd(x, some=False)</code>. :) Hope this makes sense!</p>", "body_text": "Thanks for fixing @soumith and @prigoyal.\nI brought up **kwarg because users may want to specify keyword argument for the checkpointed function. There can be many valid reasons, e.g. for clarity, for default values in other args, and for keyword-only args. So I think it would be great if users can do things like checkpoint(torch.svd, x, some=False) to mean checkpointing the function call torch.svd(x, some=False). :) Hope this makes sense!", "in_reply_to_id": 183580689}
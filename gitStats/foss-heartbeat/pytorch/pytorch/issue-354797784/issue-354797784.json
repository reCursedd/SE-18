{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10950", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10950/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10950/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10950/events", "html_url": "https://github.com/pytorch/pytorch/issues/10950", "id": 354797784, "node_id": "MDU6SXNzdWUzNTQ3OTc3ODQ=", "number": 10950, "title": "Cannot run torch in different sub-interpreters", "user": {"login": "dawagnbr", "id": 15707432, "node_id": "MDQ6VXNlcjE1NzA3NDMy", "avatar_url": "https://avatars0.githubusercontent.com/u/15707432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dawagnbr", "html_url": "https://github.com/dawagnbr", "followers_url": "https://api.github.com/users/dawagnbr/followers", "following_url": "https://api.github.com/users/dawagnbr/following{/other_user}", "gists_url": "https://api.github.com/users/dawagnbr/gists{/gist_id}", "starred_url": "https://api.github.com/users/dawagnbr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dawagnbr/subscriptions", "organizations_url": "https://api.github.com/users/dawagnbr/orgs", "repos_url": "https://api.github.com/users/dawagnbr/repos", "events_url": "https://api.github.com/users/dawagnbr/events{/privacy}", "received_events_url": "https://api.github.com/users/dawagnbr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-28T15:59:18Z", "updated_at": "2018-09-04T16:54:57Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>It seems that torch cannot be imported in two different sub-interpreters, as they are described in <a href=\"https://docs.python.org/2/c-api/init.html#sub-interpreter-support\" rel=\"nofollow\">https://docs.python.org/2/c-api/init.html#sub-interpreter-support</a>.</p>\n<h2>Code example</h2>\n<pre><code>#include &lt;Python.h&gt;\n\nint main(int argc, char **argv) {\n\n    Py_Initialize();\n    PyEval_InitThreads();\n\n    PyThreadState *thread1 = Py_NewInterpreter();\n    PyThreadState *thread2 = Py_NewInterpreter();\n\n    PyEval_ReleaseLock();\n\n    PyEval_AcquireLock();\n    PyThreadState_Swap(thread1);\n    PyRun_SimpleString(\"import torch\");\n    PyEval_ReleaseLock();\n\n    PyEval_AcquireLock();\n    PyThreadState_Swap(thread2);\n    PyRun_SimpleString(\"import torch\"); // This is where the error occurs.\n    PyEval_ReleaseLock();\n\n    Py_Finalize();\n\n    return 0;\n}\n</code></pre>\n<h2>Result</h2>\n<p>Traceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nFile \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/<strong>init</strong>.py\", line 186, in <br>\nfrom .tensor import Tensor<br>\nFile \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/tensor.py\", line 12, in <br>\nclass Tensor(torch._C._TensorBase):<br>\nFile \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/tensor.py\", line 172, in Tensor<br>\n\"\"\")<br>\nRuntimeError: method 'detach' already has a docstring</p>\n<h2>System Info</h2>\n<p>PyTorch version: 0.4.1<br>\nIs debug build: No<br>\nCUDA used to build PyTorch: 9.0.176</p>\n<p>OS: Fedora 28 (Twenty Eight)<br>\nGCC version: (GCC) 8.1.1 20180712 (Red Hat 8.1.1-5)<br>\nCMake version: version 3.11.2</p>\n<p>Python version: 3.6<br>\nIs CUDA available: Yes<br>\nCUDA runtime version: 9.1.85<br>\nGPU models and configuration:<br>\nGPU 0: GeForce GTX 1080 Ti<br>\nGPU 1: GeForce GTX 1080 Ti</p>\n<p>Nvidia driver version: 396.45<br>\ncuDNN version: Could not collect</p>\n<p>Versions of relevant libraries:<br>\n[pip] Could not collect<br>\n[conda] Could not collect</p>", "body_text": "Issue description\nIt seems that torch cannot be imported in two different sub-interpreters, as they are described in https://docs.python.org/2/c-api/init.html#sub-interpreter-support.\nCode example\n#include <Python.h>\n\nint main(int argc, char **argv) {\n\n    Py_Initialize();\n    PyEval_InitThreads();\n\n    PyThreadState *thread1 = Py_NewInterpreter();\n    PyThreadState *thread2 = Py_NewInterpreter();\n\n    PyEval_ReleaseLock();\n\n    PyEval_AcquireLock();\n    PyThreadState_Swap(thread1);\n    PyRun_SimpleString(\"import torch\");\n    PyEval_ReleaseLock();\n\n    PyEval_AcquireLock();\n    PyThreadState_Swap(thread2);\n    PyRun_SimpleString(\"import torch\"); // This is where the error occurs.\n    PyEval_ReleaseLock();\n\n    Py_Finalize();\n\n    return 0;\n}\n\nResult\nTraceback (most recent call last):\nFile \"\", line 1, in \nFile \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/init.py\", line 186, in \nfrom .tensor import Tensor\nFile \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/tensor.py\", line 12, in \nclass Tensor(torch._C._TensorBase):\nFile \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/tensor.py\", line 172, in Tensor\n\"\"\")\nRuntimeError: method 'detach' already has a docstring\nSystem Info\nPyTorch version: 0.4.1\nIs debug build: No\nCUDA used to build PyTorch: 9.0.176\nOS: Fedora 28 (Twenty Eight)\nGCC version: (GCC) 8.1.1 20180712 (Red Hat 8.1.1-5)\nCMake version: version 3.11.2\nPython version: 3.6\nIs CUDA available: Yes\nCUDA runtime version: 9.1.85\nGPU models and configuration:\nGPU 0: GeForce GTX 1080 Ti\nGPU 1: GeForce GTX 1080 Ti\nNvidia driver version: 396.45\ncuDNN version: Could not collect\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] Could not collect", "body": "## Issue description\r\n\r\nIt seems that torch cannot be imported in two different sub-interpreters, as they are described in https://docs.python.org/2/c-api/init.html#sub-interpreter-support.\r\n\r\n## Code example\r\n\r\n    #include <Python.h>\r\n\r\n    int main(int argc, char **argv) {\r\n\r\n        Py_Initialize();\r\n        PyEval_InitThreads();\r\n\r\n        PyThreadState *thread1 = Py_NewInterpreter();\r\n        PyThreadState *thread2 = Py_NewInterpreter();\r\n\r\n        PyEval_ReleaseLock();\r\n\r\n        PyEval_AcquireLock();\r\n        PyThreadState_Swap(thread1);\r\n        PyRun_SimpleString(\"import torch\");\r\n        PyEval_ReleaseLock();\r\n\r\n        PyEval_AcquireLock();\r\n        PyThreadState_Swap(thread2);\r\n        PyRun_SimpleString(\"import torch\"); // This is where the error occurs.\r\n        PyEval_ReleaseLock();\r\n\r\n        Py_Finalize();\r\n\r\n        return 0;\r\n    }\r\n\r\n## Result\r\n\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/__init__.py\", line 186, in <module>\r\n    from .tensor import Tensor\r\n  File \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/tensor.py\", line 12, in <module>\r\n    class Tensor(torch._C._TensorBase):\r\n  File \"/usr/data/bdawagne/python/lib/python3.6/site-packages/torch/tensor.py\", line 172, in Tensor\r\n    \"\"\")\r\nRuntimeError: method 'detach' already has a docstring\r\n\r\n## System Info\r\nPyTorch version: 0.4.1\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Fedora 28 (Twenty Eight)\r\nGCC version: (GCC) 8.1.1 20180712 (Red Hat 8.1.1-5)\r\nCMake version: version 3.11.2\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 9.1.85\r\nGPU models and configuration: \r\nGPU 0: GeForce GTX 1080 Ti\r\nGPU 1: GeForce GTX 1080 Ti\r\n\r\nNvidia driver version: 396.45\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] Could not collect\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3193", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3193/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3193/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3193/events", "html_url": "https://github.com/pytorch/pytorch/issues/3193", "id": 267027805, "node_id": "MDU6SXNzdWUyNjcwMjc4MDU=", "number": 3193, "title": "urllib & urllib2 may fail ssl handshaking under a variety of circumstances", "user": {"login": "ZacVawter", "id": 628019, "node_id": "MDQ6VXNlcjYyODAxOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/628019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZacVawter", "html_url": "https://github.com/ZacVawter", "followers_url": "https://api.github.com/users/ZacVawter/followers", "following_url": "https://api.github.com/users/ZacVawter/following{/other_user}", "gists_url": "https://api.github.com/users/ZacVawter/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZacVawter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZacVawter/subscriptions", "organizations_url": "https://api.github.com/users/ZacVawter/orgs", "repos_url": "https://api.github.com/users/ZacVawter/repos", "events_url": "https://api.github.com/users/ZacVawter/events{/privacy}", "received_events_url": "https://api.github.com/users/ZacVawter/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-10-20T00:18:02Z", "updated_at": "2017-10-31T12:54:21Z", "closed_at": "2017-10-31T12:54:20Z", "author_association": "NONE", "body_html": "<p>I'm not sure of the root cause down in the depths of SSL.  It somewhere there is improper use of SSL in (python 2.7, ubuntu 14.04, or my compiled version of openSSL).</p>\n<p>If desired, I can provide a patch or pull request that changes the model_zoo.py over to use <code>requests</code> which properly handles this situation, and is aparently the 'recommended' library for python now (instead of urllib or urllib2).</p>\n<p>`&gt;&gt;&gt; import torchvision</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>net = torchvision.models.vgg16(pretrained=True)<br>\nDownloading: \"<a href=\"https://download.pytorch.org/models/vgg16-397923af.pth\" rel=\"nofollow\">https://download.pytorch.org/models/vgg16-397923af.pth</a>\" to /home/vawter/.torch/models/vgg16-397923af.pth<br>\nTraceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nFile \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torchvision/models/vgg.py\", line 142, in vgg16<br>\nmodel.load_state_dict(model_zoo.load_url(model_urls['vgg16']))<br>\nFile \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torch/utils/model_zoo.py\", line 57, in load_url<br>\n_download_url_to_file(url, cached_file, hash_prefix)<br>\nFile \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torch/utils/model_zoo.py\", line 62, in _download_url_to_file<br>\nu = urlopen(url)<br>\nFile \"/usr/lib/python2.7/urllib2.py\", line 127, in urlopen<br>\nreturn _opener.open(url, data, timeout)<br>\nFile \"/usr/lib/python2.7/urllib2.py\", line 404, in open<br>\nresponse = self._open(req, data)<br>\nFile \"/usr/lib/python2.7/urllib2.py\", line 422, in _open<br>\n'_open', req)<br>\nFile \"/usr/lib/python2.7/urllib2.py\", line 382, in _call_chain<br>\nresult = func(*args)<br>\nFile \"/usr/lib/python2.7/urllib2.py\", line 1222, in https_open<br>\nreturn self.do_open(httplib.HTTPSConnection, req)<br>\nFile \"/usr/lib/python2.7/urllib2.py\", line 1184, in do_open<br>\nraise URLError(err)<br>\nurllib2.URLError: &lt;urlopen error [Errno 1] _ssl.c:510: error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure&gt;`</p>\n</blockquote>\n</blockquote>\n</blockquote>", "body_text": "I'm not sure of the root cause down in the depths of SSL.  It somewhere there is improper use of SSL in (python 2.7, ubuntu 14.04, or my compiled version of openSSL).\nIf desired, I can provide a patch or pull request that changes the model_zoo.py over to use requests which properly handles this situation, and is aparently the 'recommended' library for python now (instead of urllib or urllib2).\n`>>> import torchvision\n\n\n\nnet = torchvision.models.vgg16(pretrained=True)\nDownloading: \"https://download.pytorch.org/models/vgg16-397923af.pth\" to /home/vawter/.torch/models/vgg16-397923af.pth\nTraceback (most recent call last):\nFile \"\", line 1, in \nFile \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torchvision/models/vgg.py\", line 142, in vgg16\nmodel.load_state_dict(model_zoo.load_url(model_urls['vgg16']))\nFile \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torch/utils/model_zoo.py\", line 57, in load_url\n_download_url_to_file(url, cached_file, hash_prefix)\nFile \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torch/utils/model_zoo.py\", line 62, in _download_url_to_file\nu = urlopen(url)\nFile \"/usr/lib/python2.7/urllib2.py\", line 127, in urlopen\nreturn _opener.open(url, data, timeout)\nFile \"/usr/lib/python2.7/urllib2.py\", line 404, in open\nresponse = self._open(req, data)\nFile \"/usr/lib/python2.7/urllib2.py\", line 422, in _open\n'_open', req)\nFile \"/usr/lib/python2.7/urllib2.py\", line 382, in _call_chain\nresult = func(*args)\nFile \"/usr/lib/python2.7/urllib2.py\", line 1222, in https_open\nreturn self.do_open(httplib.HTTPSConnection, req)\nFile \"/usr/lib/python2.7/urllib2.py\", line 1184, in do_open\nraise URLError(err)\nurllib2.URLError: <urlopen error [Errno 1] _ssl.c:510: error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure>`", "body": "I'm not sure of the root cause down in the depths of SSL.  It somewhere there is improper use of SSL in (python 2.7, ubuntu 14.04, or my compiled version of openSSL).\r\n\r\nIf desired, I can provide a patch or pull request that changes the model_zoo.py over to use `requests` which properly handles this situation, and is aparently the 'recommended' library for python now (instead of urllib or urllib2).\r\n\r\n`>>> import torchvision\r\n>>> net = torchvision.models.vgg16(pretrained=True)\r\nDownloading: \"https://download.pytorch.org/models/vgg16-397923af.pth\" to /home/vawter/.torch/models/vgg16-397923af.pth\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torchvision/models/vgg.py\", line 142, in vgg16\r\n    model.load_state_dict(model_zoo.load_url(model_urls['vgg16']))\r\n  File \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torch/utils/model_zoo.py\", line 57, in load_url\r\n    _download_url_to_file(url, cached_file, hash_prefix)\r\n  File \"/home/vawter/.cache/bazel/_bazel_vawter/8a8977c0d8b4d7d21d82bcdeeaf06b5c/execroot/source/bazel-out/release_links/lib/python/torch/utils/model_zoo.py\", line 62, in _download_url_to_file\r\n    u = urlopen(url)\r\n  File \"/usr/lib/python2.7/urllib2.py\", line 127, in urlopen\r\n    return _opener.open(url, data, timeout)\r\n  File \"/usr/lib/python2.7/urllib2.py\", line 404, in open\r\n    response = self._open(req, data)\r\n  File \"/usr/lib/python2.7/urllib2.py\", line 422, in _open\r\n    '_open', req)\r\n  File \"/usr/lib/python2.7/urllib2.py\", line 382, in _call_chain\r\n    result = func(*args)\r\n  File \"/usr/lib/python2.7/urllib2.py\", line 1222, in https_open\r\n    return self.do_open(httplib.HTTPSConnection, req)\r\n  File \"/usr/lib/python2.7/urllib2.py\", line 1184, in do_open\r\n    raise URLError(err)\r\nurllib2.URLError: <urlopen error [Errno 1] _ssl.c:510: error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure>`"}
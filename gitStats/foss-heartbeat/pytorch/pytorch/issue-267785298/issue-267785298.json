{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3243", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3243/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3243/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3243/events", "html_url": "https://github.com/pytorch/pytorch/issues/3243", "id": 267785298, "node_id": "MDU6SXNzdWUyNjc3ODUyOTg=", "number": 3243, "title": "Compile error:  \u2018__T0\u2019 was not declared in this scope", "user": {"login": "stsievert", "id": 1320475, "node_id": "MDQ6VXNlcjEzMjA0NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1320475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stsievert", "html_url": "https://github.com/stsievert", "followers_url": "https://api.github.com/users/stsievert/followers", "following_url": "https://api.github.com/users/stsievert/following{/other_user}", "gists_url": "https://api.github.com/users/stsievert/gists{/gist_id}", "starred_url": "https://api.github.com/users/stsievert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stsievert/subscriptions", "organizations_url": "https://api.github.com/users/stsievert/orgs", "repos_url": "https://api.github.com/users/stsievert/repos", "events_url": "https://api.github.com/users/stsievert/events{/privacy}", "received_events_url": "https://api.github.com/users/stsievert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-23T19:17:35Z", "updated_at": "2017-12-02T00:01:24Z", "closed_at": "2017-12-02T00:01:24Z", "author_association": "CONTRIBUTOR", "body_html": "<p>When I build PyTorch from source following the <a href=\"https://github.com/pytorch/pytorch#from-source\">README directions</a>, I get an error:</p>\n<div class=\"highlight highlight-source-shell\"><pre>[ 64%] Building CXX object gloo/CMakeFiles/gloo.dir/transport/tcp/device.cc.o\n[ 68%] Building CXX object gloo/CMakeFiles/gloo.dir/transport/tcp/pair.cc.o\n[ 72%] Linking CXX static library libgloo.a\n[ 72%] Built target gloo\n[ 76%] Building NVCC (Device) object gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda_private.cu.o\n[ 80%] Building NVCC (Device) object gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda.cu.o\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:26:26: error: \u2018__T0\u2019 was not declared <span class=\"pl-k\">in</span> this scope\n const auto kPCIClass3D = PCIClassMatch{0x030200, 0xffff00}<span class=\"pl-k\">;</span>\n                          ^\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:29:31: error: \u2018__T0\u2019 was not declared <span class=\"pl-k\">in</span> this scope\n const auto kPCIClassNetwork = PCIClassMatch{0x020000, 0xff0000}<span class=\"pl-k\">;</span>\n                               ^\nCMake Error at gloo_cuda_generated_cuda_private.cu.o.cmake:263 (message):\n  Error generating file\n  /home/ec2-user/pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda_private.cu.o\n\n\nmake[2]: <span class=\"pl-k\">***</span> [gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda_private.cu.o] Error 1\nmake[2]: <span class=\"pl-k\">***</span> Waiting <span class=\"pl-k\">for</span> unfinished jobs....\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:26:26: error: \u2018__T0\u2019 was not declared <span class=\"pl-k\">in</span> this scope\n const auto kPCIClass3D = PCIClassMatch{0x030200, 0xffff00}<span class=\"pl-k\">;</span>\n                          ^\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:29:31: error: \u2018__T0\u2019 was not declared <span class=\"pl-k\">in</span> this scope\n const auto kPCIClassNetwork = PCIClassMatch{0x020000, 0xff0000}<span class=\"pl-k\">;</span>\n                               ^\nCMake Error at gloo_cuda_generated_cuda.cu.o.cmake:263 (message):\n  Error generating file\n  /home/ec2-user/pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda.cu.o\n\n\nmake[2]: <span class=\"pl-k\">***</span> [gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda.cu.o] Error 1\nmake[1]: <span class=\"pl-k\">***</span> [gloo/CMakeFiles/gloo_cuda.dir/all] Error 2\nmake: <span class=\"pl-k\">***</span> [all] Error 2 \u00a0</pre></div>\n<p>Machine details:</p>\n<ul>\n<li>nvcc release 7.5, V7.5.17</li>\n<li>gcc version 4.8.3 20140911 (Red Hat 4.8.3-9) (GCC)</li>\n<li>gcc version 4.8.3 20140911 (Red Hat 4.8.3-9) (GCC)</li>\n<li>Python 3.6.1 with Anaconda</li>\n<li>OS: Red Hat</li>\n</ul>\n<p>I'm not sure if I have cuDNN. I am using Amazon's EC2 Deep Learning AMI, and they say they have cuDNN drivers: <a href=\"https://aws.amazon.com/amazon-ai/amis/\" rel=\"nofollow\">https://aws.amazon.com/amazon-ai/amis/</a></p>", "body_text": "When I build PyTorch from source following the README directions, I get an error:\n[ 64%] Building CXX object gloo/CMakeFiles/gloo.dir/transport/tcp/device.cc.o\n[ 68%] Building CXX object gloo/CMakeFiles/gloo.dir/transport/tcp/pair.cc.o\n[ 72%] Linking CXX static library libgloo.a\n[ 72%] Built target gloo\n[ 76%] Building NVCC (Device) object gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda_private.cu.o\n[ 80%] Building NVCC (Device) object gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda.cu.o\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:26:26: error: \u2018__T0\u2019 was not declared in this scope\n const auto kPCIClass3D = PCIClassMatch{0x030200, 0xffff00};\n                          ^\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:29:31: error: \u2018__T0\u2019 was not declared in this scope\n const auto kPCIClassNetwork = PCIClassMatch{0x020000, 0xff0000};\n                               ^\nCMake Error at gloo_cuda_generated_cuda_private.cu.o.cmake:263 (message):\n  Error generating file\n  /home/ec2-user/pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda_private.cu.o\n\n\nmake[2]: *** [gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda_private.cu.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:26:26: error: \u2018__T0\u2019 was not declared in this scope\n const auto kPCIClass3D = PCIClassMatch{0x030200, 0xffff00};\n                          ^\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:29:31: error: \u2018__T0\u2019 was not declared in this scope\n const auto kPCIClassNetwork = PCIClassMatch{0x020000, 0xff0000};\n                               ^\nCMake Error at gloo_cuda_generated_cuda.cu.o.cmake:263 (message):\n  Error generating file\n  /home/ec2-user/pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda.cu.o\n\n\nmake[2]: *** [gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda.cu.o] Error 1\nmake[1]: *** [gloo/CMakeFiles/gloo_cuda.dir/all] Error 2\nmake: *** [all] Error 2 \u00a0\nMachine details:\n\nnvcc release 7.5, V7.5.17\ngcc version 4.8.3 20140911 (Red Hat 4.8.3-9) (GCC)\ngcc version 4.8.3 20140911 (Red Hat 4.8.3-9) (GCC)\nPython 3.6.1 with Anaconda\nOS: Red Hat\n\nI'm not sure if I have cuDNN. I am using Amazon's EC2 Deep Learning AMI, and they say they have cuDNN drivers: https://aws.amazon.com/amazon-ai/amis/", "body": "When I build PyTorch from source following the [README directions][1], I get an error:\r\n\r\n``` shell\r\n[ 64%] Building CXX object gloo/CMakeFiles/gloo.dir/transport/tcp/device.cc.o\r\n[ 68%] Building CXX object gloo/CMakeFiles/gloo.dir/transport/tcp/pair.cc.o\r\n[ 72%] Linking CXX static library libgloo.a\r\n[ 72%] Built target gloo\r\n[ 76%] Building NVCC (Device) object gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda_private.cu.o\r\n[ 80%] Building NVCC (Device) object gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda.cu.o\r\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:26:26: error: \u2018__T0\u2019 was not declared in this scope\r\n const auto kPCIClass3D = PCIClassMatch{0x030200, 0xffff00};\r\n                          ^\r\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:29:31: error: \u2018__T0\u2019 was not declared in this scope\r\n const auto kPCIClassNetwork = PCIClassMatch{0x020000, 0xff0000};\r\n                               ^\r\nCMake Error at gloo_cuda_generated_cuda_private.cu.o.cmake:263 (message):\r\n  Error generating file\r\n  /home/ec2-user/pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda_private.cu.o\r\n\r\n\r\nmake[2]: *** [gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda_private.cu.o] Error 1\r\nmake[2]: *** Waiting for unfinished jobs....\r\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:26:26: error: \u2018__T0\u2019 was not declared in this scope\r\n const auto kPCIClass3D = PCIClassMatch{0x030200, 0xffff00};\r\n                          ^\r\n/home/ec2-user/pytorch/torch/lib/gloo/gloo/common/linux.h:29:31: error: \u2018__T0\u2019 was not declared in this scope\r\n const auto kPCIClassNetwork = PCIClassMatch{0x020000, 0xff0000};\r\n                               ^\r\nCMake Error at gloo_cuda_generated_cuda.cu.o.cmake:263 (message):\r\n  Error generating file\r\n  /home/ec2-user/pytorch/torch/lib/build/gloo/gloo/CMakeFiles/gloo_cuda.dir//./gloo_cuda_generated_cuda.cu.o\r\n\r\n\r\nmake[2]: *** [gloo/CMakeFiles/gloo_cuda.dir/gloo_cuda_generated_cuda.cu.o] Error 1\r\nmake[1]: *** [gloo/CMakeFiles/gloo_cuda.dir/all] Error 2\r\nmake: *** [all] Error 2 \u00a0\r\n```\r\n\r\nMachine details:\r\n\r\n* nvcc release 7.5, V7.5.17\r\n* gcc version 4.8.3 20140911 (Red Hat 4.8.3-9) (GCC)\r\n* gcc version 4.8.3 20140911 (Red Hat 4.8.3-9) (GCC)\r\n* Python 3.6.1 with Anaconda\r\n* OS: Red Hat\r\n\r\nI'm not sure if I have cuDNN. I am using Amazon's EC2 Deep Learning AMI, and they say they have cuDNN drivers: https://aws.amazon.com/amazon-ai/amis/\r\n\r\n[1]:https://github.com/pytorch/pytorch#from-source"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11431", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11431/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11431/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11431/events", "html_url": "https://github.com/pytorch/pytorch/pull/11431", "id": 358337997, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE0MTIwNzg2", "number": 11431, "title": "override BUILD_TEST when building gloo", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-09T00:22:22Z", "updated_at": "2018-09-20T16:54:37Z", "closed_at": "2018-09-09T17:13:16Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/11431", "html_url": "https://github.com/pytorch/pytorch/pull/11431", "diff_url": "https://github.com/pytorch/pytorch/pull/11431.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/11431.patch"}, "body_html": "<p>A recent build regression is that we need a system GoogleTest for builds to pass.</p>\n<p>This was because, when building with Gloo, gloo is trying to build it's own tests, which look for system gtest <a href=\"https://github.com/facebookincubator/gloo/blob/master/cmake/Dependencies.cmake#L72-L80\">here</a> (because we're not using full cmake build and making it aware of third_party/GoogleTest, but instead, we are building it isolated using tools/build_pytorch_libs.sh</p>\n<p>Traditionally, we didn't ask Gloo to build it's tests, but because we added <code>-DBUILD_TEST=1</code> by default to all builds (in refactoring variable names), we accidentally started asking Gloo to build it's tests.</p>\n<p>This PR overrides the Gloo flags and asks it to not build tests (like it used to)</p>", "body_text": "A recent build regression is that we need a system GoogleTest for builds to pass.\nThis was because, when building with Gloo, gloo is trying to build it's own tests, which look for system gtest here (because we're not using full cmake build and making it aware of third_party/GoogleTest, but instead, we are building it isolated using tools/build_pytorch_libs.sh\nTraditionally, we didn't ask Gloo to build it's tests, but because we added -DBUILD_TEST=1 by default to all builds (in refactoring variable names), we accidentally started asking Gloo to build it's tests.\nThis PR overrides the Gloo flags and asks it to not build tests (like it used to)", "body": "A recent build regression is that we need a system GoogleTest for builds to pass.\r\n\r\nThis was because, when building with Gloo, gloo is trying to build it's own tests, which look for system gtest [here](https://github.com/facebookincubator/gloo/blob/master/cmake/Dependencies.cmake#L72-L80) (because we're not using full cmake build and making it aware of third_party/GoogleTest, but instead, we are building it isolated using tools/build_pytorch_libs.sh\r\n\r\nTraditionally, we didn't ask Gloo to build it's tests, but because we added `-DBUILD_TEST=1` by default to all builds (in refactoring variable names), we accidentally started asking Gloo to build it's tests.\r\n\r\nThis PR overrides the Gloo flags and asks it to not build tests (like it used to)"}
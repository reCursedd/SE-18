{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11171", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11171/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11171/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11171/events", "html_url": "https://github.com/pytorch/pytorch/issues/11171", "id": 356194022, "node_id": "MDU6SXNzdWUzNTYxOTQwMjI=", "number": 11171, "title": "[Caffe2] Compile Error in ATen tests.", "user": {"login": "xkszltl", "id": 5203025, "node_id": "MDQ6VXNlcjUyMDMwMjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/5203025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xkszltl", "html_url": "https://github.com/xkszltl", "followers_url": "https://api.github.com/users/xkszltl/followers", "following_url": "https://api.github.com/users/xkszltl/following{/other_user}", "gists_url": "https://api.github.com/users/xkszltl/gists{/gist_id}", "starred_url": "https://api.github.com/users/xkszltl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xkszltl/subscriptions", "organizations_url": "https://api.github.com/users/xkszltl/orgs", "repos_url": "https://api.github.com/users/xkszltl/repos", "events_url": "https://api.github.com/users/xkszltl/events{/privacy}", "received_events_url": "https://api.github.com/users/xkszltl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-09-01T11:06:19Z", "updated_at": "2018-09-10T20:22:55Z", "closed_at": "2018-09-07T22:27:26Z", "author_association": "CONTRIBUTOR", "body_html": "<h2>Issue description</h2>\n<p>I've been getting following errors on Linux CUDA build for quite a while.<br>\nUsed to bypass them temporarily by BUILD_ATEN=OFF since I don't have time to dig in further.<br>\nBut that flag has gone recently and I wanna know if there's any help I can get.</p>\n<p>Here's the error log:</p>\n<pre><code>[108/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test &amp;&amp; /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/. &amp;&amp; /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake\nFAILED: caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o \ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test &amp;&amp; /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/. &amp;&amp; /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b4e_00000000-6_integer_divider_test.cpp1.ii\".\nCMake Error at integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake:279 (message):\n  Error generating file\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o\n\n\n[109/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test &amp;&amp; /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/. &amp;&amp; /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake\nFAILED: caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o \ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test &amp;&amp; /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/. &amp;&amp; /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b59_00000000-6_cuda_optional_test.cpp1.ii\".\nCMake Error at cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake:279 (message):\n  Error generating file\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o\n\n\n[110/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test &amp;&amp; /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/. &amp;&amp; /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake\nFAILED: caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o \ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test &amp;&amp; /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/. &amp;&amp; /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b66_00000000-6_cuda_half_test.cpp1.ii\".\nCMake Error at cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake:279 (message):\n  Error generating file\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o\n\n\n</code></pre>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: Caffe2</li>\n<li>How you installed PyTorch (conda, pip, source): source</li>\n<li>Build command you used (if compiling from source): cmake+ninja</li>\n<li>OS: CentOS 7</li>\n<li>PyTorch version: master</li>\n<li>CUDA/cuDNN version: 9.2 / 7.1.4</li>\n<li>GPU models and configuration: Volta</li>\n<li>GCC version (if compiling from source): 7.3.1</li>\n<li>CMake version: 3.12.1</li>\n</ul>", "body_text": "Issue description\nI've been getting following errors on Linux CUDA build for quite a while.\nUsed to bypass them temporarily by BUILD_ATEN=OFF since I don't have time to dig in further.\nBut that flag has gone recently and I wanna know if there's any help I can get.\nHere's the error log:\n[108/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake\nFAILED: caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o \ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b4e_00000000-6_integer_divider_test.cpp1.ii\".\nCMake Error at integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake:279 (message):\n  Error generating file\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o\n\n\n[109/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake\nFAILED: caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o \ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b59_00000000-6_cuda_optional_test.cpp1.ii\".\nCMake Error at cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake:279 (message):\n  Error generating file\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o\n\n\n[110/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake\nFAILED: caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o \ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\n\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b66_00000000-6_cuda_half_test.cpp1.ii\".\nCMake Error at cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake:279 (message):\n  Error generating file\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o\n\n\n\nSystem Info\n\nPyTorch or Caffe2: Caffe2\nHow you installed PyTorch (conda, pip, source): source\nBuild command you used (if compiling from source): cmake+ninja\nOS: CentOS 7\nPyTorch version: master\nCUDA/cuDNN version: 9.2 / 7.1.4\nGPU models and configuration: Volta\nGCC version (if compiling from source): 7.3.1\nCMake version: 3.12.1", "body": "## Issue description\r\n\r\nI've been getting following errors on Linux CUDA build for quite a while.\r\nUsed to bypass them temporarily by BUILD_ATEN=OFF since I don't have time to dig in further.\r\nBut that flag has gone recently and I wanna know if there's any help I can get.\r\n\r\nHere's the error log:\r\n\r\n```\r\n[108/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake\r\nFAILED: caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o \r\ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake\r\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\r\n\r\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\r\n\r\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b4e_00000000-6_integer_divider_test.cpp1.ii\".\r\nCMake Error at integer_divider_test_generated_integer_divider_test.cu.o.Release.cmake:279 (message):\r\n  Error generating file\r\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/integer_divider_test.dir/__/aten/src/ATen/test/./integer_divider_test_generated_integer_divider_test.cu.o\r\n\r\n\r\n[109/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake\r\nFAILED: caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o \r\ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake\r\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\r\n\r\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\r\n\r\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b59_00000000-6_cuda_optional_test.cpp1.ii\".\r\nCMake Error at cuda_optional_test_generated_cuda_optional_test.cu.o.Release.cmake:279 (message):\r\n  Error generating file\r\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_optional_test.dir/__/aten/src/ATen/test/./cuda_optional_test_generated_cuda_optional_test.cu.o\r\n\r\n\r\n[110/114] cd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake\r\nFAILED: caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o \r\ncd /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test && /usr/local/bin/cmake -E make_directory /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/. && /usr/local/bin/cmake -D verbose:BOOL=OFF -D build_configuration:STRING=Release -D generated_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o -D generated_cubin_file:STRING=/media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o.cubin.txt -P /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake\r\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\r\n\r\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h(331): error: identifier \"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage\" is undefined in device code\r\n\r\n2 errors detected in the compilation of \"/tmp/tmpxft_00017b66_00000000-6_cuda_half_test.cpp1.ii\".\r\nCMake Error at cuda_half_test_generated_cuda_half_test.cu.o.Release.cmake:279 (message):\r\n  Error generating file\r\n  /media/Scratch/tmp.yhKcQoslrF/pytorch/build/caffe2/CMakeFiles/cuda_half_test.dir/__/aten/src/ATen/test/./cuda_half_test_generated_cuda_half_test.cu.o\r\n\r\n\r\n```\r\n\r\n## System Info\r\n\r\n- PyTorch or Caffe2: Caffe2\r\n- How you installed PyTorch (conda, pip, source): source\r\n- Build command you used (if compiling from source): cmake+ninja\r\n- OS: CentOS 7\r\n- PyTorch version: master\r\n- CUDA/cuDNN version: 9.2 / 7.1.4\r\n- GPU models and configuration: Volta\r\n- GCC version (if compiling from source): 7.3.1\r\n- CMake version: 3.12.1"}
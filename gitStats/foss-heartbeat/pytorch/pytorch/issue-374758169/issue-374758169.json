{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13226", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13226/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13226/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13226/events", "html_url": "https://github.com/pytorch/pytorch/issues/13226", "id": 374758169, "node_id": "MDU6SXNzdWUzNzQ3NTgxNjk=", "number": 13226, "title": "[Caffe2] cmake3 detection error?", "user": {"login": "apiszcz", "id": 1430861, "node_id": "MDQ6VXNlcjE0MzA4NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1430861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apiszcz", "html_url": "https://github.com/apiszcz", "followers_url": "https://api.github.com/users/apiszcz/followers", "following_url": "https://api.github.com/users/apiszcz/following{/other_user}", "gists_url": "https://api.github.com/users/apiszcz/gists{/gist_id}", "starred_url": "https://api.github.com/users/apiszcz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apiszcz/subscriptions", "organizations_url": "https://api.github.com/users/apiszcz/orgs", "repos_url": "https://api.github.com/users/apiszcz/repos", "events_url": "https://api.github.com/users/apiszcz/events{/privacy}", "received_events_url": "https://api.github.com/users/apiszcz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-28T14:12:52Z", "updated_at": "2018-11-22T04:09:42Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>cmake 3 is detected however version check fails?</p>\n<pre><code>$ python setup.py install\nBuilding wheel torch-1.0.0a0+1fe8278\nrunning install\nsetup.py::run()\nrunning build_deps\nsetup.py::build_deps::run()\n+ SYNC_COMMAND=cp\n++ command -v rsync\n+ '[' -x /usr/bin/rsync ']'\n+ SYNC_COMMAND='rsync -lptgoD'\n+ CMAKE_COMMAND=cmake\n++ command -v cmake3\n+ [[ -x /usr/bin/cmake3 ]]\n++ command -v cmake\n+ [[ -x /usr/bin/cmake ]]\n++ cmake --version\n++ grep version\n++ awk '{print $3}'\n+ CMAKE_VERSION=2.8.12.2\n++ cmake3 --version\n++ awk '{print $3}'\n++ grep version\n+ CMAKE3_VERSION=3.12.1\n++ /home/apiszcz/p/vx/lib/a3/bin/python -c 'from distutils.version import StrictVersion; print(1 if StrictVersion(\"2.8.12.2\") &lt; StrictVersion(\"3.5.0\") and StrictVersion(\"3.12.1\") &gt; StrictVersion(\"2.8.12.2\") else 0)'\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"/home/apiszcz/p/vx/lib/a3/lib/python3.5/distutils/version.py\", line 40, in __init__\n    self.parse(vstring)\n  File \"/home/apiszcz/p/vx/lib/a3/lib/python3.5/distutils/version.py\", line 137, in parse\n    raise ValueError(\"invalid version number '%s'\" % vstring)\nValueError: invalid version number '2.8.12.2'\n+ CMAKE3_NEEDED=\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack --use-qnnpack nccl caffe2'\n</code></pre>", "body_text": "cmake 3 is detected however version check fails?\n$ python setup.py install\nBuilding wheel torch-1.0.0a0+1fe8278\nrunning install\nsetup.py::run()\nrunning build_deps\nsetup.py::build_deps::run()\n+ SYNC_COMMAND=cp\n++ command -v rsync\n+ '[' -x /usr/bin/rsync ']'\n+ SYNC_COMMAND='rsync -lptgoD'\n+ CMAKE_COMMAND=cmake\n++ command -v cmake3\n+ [[ -x /usr/bin/cmake3 ]]\n++ command -v cmake\n+ [[ -x /usr/bin/cmake ]]\n++ cmake --version\n++ grep version\n++ awk '{print $3}'\n+ CMAKE_VERSION=2.8.12.2\n++ cmake3 --version\n++ awk '{print $3}'\n++ grep version\n+ CMAKE3_VERSION=3.12.1\n++ /home/apiszcz/p/vx/lib/a3/bin/python -c 'from distutils.version import StrictVersion; print(1 if StrictVersion(\"2.8.12.2\") < StrictVersion(\"3.5.0\") and StrictVersion(\"3.12.1\") > StrictVersion(\"2.8.12.2\") else 0)'\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/home/apiszcz/p/vx/lib/a3/lib/python3.5/distutils/version.py\", line 40, in __init__\n    self.parse(vstring)\n  File \"/home/apiszcz/p/vx/lib/a3/lib/python3.5/distutils/version.py\", line 137, in parse\n    raise ValueError(\"invalid version number '%s'\" % vstring)\nValueError: invalid version number '2.8.12.2'\n+ CMAKE3_NEEDED=\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack --use-qnnpack nccl caffe2'", "body": "cmake 3 is detected however version check fails?\r\n\r\n```\r\n$ python setup.py install\r\nBuilding wheel torch-1.0.0a0+1fe8278\r\nrunning install\r\nsetup.py::run()\r\nrunning build_deps\r\nsetup.py::build_deps::run()\r\n+ SYNC_COMMAND=cp\r\n++ command -v rsync\r\n+ '[' -x /usr/bin/rsync ']'\r\n+ SYNC_COMMAND='rsync -lptgoD'\r\n+ CMAKE_COMMAND=cmake\r\n++ command -v cmake3\r\n+ [[ -x /usr/bin/cmake3 ]]\r\n++ command -v cmake\r\n+ [[ -x /usr/bin/cmake ]]\r\n++ cmake --version\r\n++ grep version\r\n++ awk '{print $3}'\r\n+ CMAKE_VERSION=2.8.12.2\r\n++ cmake3 --version\r\n++ awk '{print $3}'\r\n++ grep version\r\n+ CMAKE3_VERSION=3.12.1\r\n++ /home/apiszcz/p/vx/lib/a3/bin/python -c 'from distutils.version import StrictVersion; print(1 if StrictVersion(\"2.8.12.2\") < StrictVersion(\"3.5.0\") and StrictVersion(\"3.12.1\") > StrictVersion(\"2.8.12.2\") else 0)'\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/apiszcz/p/vx/lib/a3/lib/python3.5/distutils/version.py\", line 40, in __init__\r\n    self.parse(vstring)\r\n  File \"/home/apiszcz/p/vx/lib/a3/lib/python3.5/distutils/version.py\", line 137, in parse\r\n    raise ValueError(\"invalid version number '%s'\" % vstring)\r\nValueError: invalid version number '2.8.12.2'\r\n+ CMAKE3_NEEDED=\r\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack --use-qnnpack nccl caffe2'\r\n```\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/440907140", "html_url": "https://github.com/pytorch/pytorch/issues/13226#issuecomment-440907140", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/13226", "id": 440907140, "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDkwNzE0MA==", "user": {"login": "jgong5", "id": 8359223, "node_id": "MDQ6VXNlcjgzNTkyMjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/8359223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgong5", "html_url": "https://github.com/jgong5", "followers_url": "https://api.github.com/users/jgong5/followers", "following_url": "https://api.github.com/users/jgong5/following{/other_user}", "gists_url": "https://api.github.com/users/jgong5/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgong5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgong5/subscriptions", "organizations_url": "https://api.github.com/users/jgong5/orgs", "repos_url": "https://api.github.com/users/jgong5/repos", "events_url": "https://api.github.com/users/jgong5/events{/privacy}", "received_events_url": "https://api.github.com/users/jgong5/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-22T04:09:42Z", "updated_at": "2018-11-22T04:09:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1430861\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apiszcz\">@apiszcz</a> Try the patch below:</p>\n<pre><code>diff --git a/tools/build_pytorch_libs.sh b/tools/build_pytorch_libs.sh\nindex 39edc5d..69e11d4 100755\n--- a/tools/build_pytorch_libs.sh\n+++ b/tools/build_pytorch_libs.sh\n@@ -28,8 +28,8 @@ if [[ -x \"$(command -v cmake3)\" ]]; then\n         #   cmake3 version 3.11.0 CMake suite maintained and supported by Kitware (kitware.com/cmake).\n         # Thus we extract the line that has 'version' in it and hope the actual\n         # version number is gonna be the 3rd element\n-        CMAKE_VERSION=$(cmake --version | grep 'version' | awk '{print $3}')\n-        CMAKE3_VERSION=$(cmake3 --version | grep 'version' | awk '{print $3}')\n+        CMAKE_VERSION=$(cmake --version | grep 'version' | awk '{print $3}' | awk -F. '{print $1\".\"$2\".\"$3}')\n+        CMAKE3_VERSION=$(cmake3 --version | grep 'version' | awk '{print $3}' | awk -F. '{print $1\".\"$2\".\"$3}')\n         CMAKE3_NEEDED=$($PYTORCH_PYTHON -c \"from distutils.version import StrictVersion; print(1 if StrictVersion(\\\"${CMAKE_VERSION}\\\") &lt; StrictVersion(\\\"3.5.0\\\") and StrictVersion(\\\"${CMAKE3_VERSION}\\\") &gt; Stri\n     else\n         # don't have cmake\n</code></pre>", "body_text": "@apiszcz Try the patch below:\ndiff --git a/tools/build_pytorch_libs.sh b/tools/build_pytorch_libs.sh\nindex 39edc5d..69e11d4 100755\n--- a/tools/build_pytorch_libs.sh\n+++ b/tools/build_pytorch_libs.sh\n@@ -28,8 +28,8 @@ if [[ -x \"$(command -v cmake3)\" ]]; then\n         #   cmake3 version 3.11.0 CMake suite maintained and supported by Kitware (kitware.com/cmake).\n         # Thus we extract the line that has 'version' in it and hope the actual\n         # version number is gonna be the 3rd element\n-        CMAKE_VERSION=$(cmake --version | grep 'version' | awk '{print $3}')\n-        CMAKE3_VERSION=$(cmake3 --version | grep 'version' | awk '{print $3}')\n+        CMAKE_VERSION=$(cmake --version | grep 'version' | awk '{print $3}' | awk -F. '{print $1\".\"$2\".\"$3}')\n+        CMAKE3_VERSION=$(cmake3 --version | grep 'version' | awk '{print $3}' | awk -F. '{print $1\".\"$2\".\"$3}')\n         CMAKE3_NEEDED=$($PYTORCH_PYTHON -c \"from distutils.version import StrictVersion; print(1 if StrictVersion(\\\"${CMAKE_VERSION}\\\") < StrictVersion(\\\"3.5.0\\\") and StrictVersion(\\\"${CMAKE3_VERSION}\\\") > Stri\n     else\n         # don't have cmake", "body": "@apiszcz Try the patch below:\r\n```\r\ndiff --git a/tools/build_pytorch_libs.sh b/tools/build_pytorch_libs.sh\r\nindex 39edc5d..69e11d4 100755\r\n--- a/tools/build_pytorch_libs.sh\r\n+++ b/tools/build_pytorch_libs.sh\r\n@@ -28,8 +28,8 @@ if [[ -x \"$(command -v cmake3)\" ]]; then\r\n         #   cmake3 version 3.11.0 CMake suite maintained and supported by Kitware (kitware.com/cmake).\r\n         # Thus we extract the line that has 'version' in it and hope the actual\r\n         # version number is gonna be the 3rd element\r\n-        CMAKE_VERSION=$(cmake --version | grep 'version' | awk '{print $3}')\r\n-        CMAKE3_VERSION=$(cmake3 --version | grep 'version' | awk '{print $3}')\r\n+        CMAKE_VERSION=$(cmake --version | grep 'version' | awk '{print $3}' | awk -F. '{print $1\".\"$2\".\"$3}')\r\n+        CMAKE3_VERSION=$(cmake3 --version | grep 'version' | awk '{print $3}' | awk -F. '{print $1\".\"$2\".\"$3}')\r\n         CMAKE3_NEEDED=$($PYTORCH_PYTHON -c \"from distutils.version import StrictVersion; print(1 if StrictVersion(\\\"${CMAKE_VERSION}\\\") < StrictVersion(\\\"3.5.0\\\") and StrictVersion(\\\"${CMAKE3_VERSION}\\\") > Stri\r\n     else\r\n         # don't have cmake\r\n```"}
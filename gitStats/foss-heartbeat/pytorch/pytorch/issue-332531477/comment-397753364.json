{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/397753364", "html_url": "https://github.com/pytorch/pytorch/issues/8499#issuecomment-397753364", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8499", "id": 397753364, "node_id": "MDEyOklzc3VlQ29tbWVudDM5Nzc1MzM2NA==", "user": {"login": "jamesr66a", "id": 4685384, "node_id": "MDQ6VXNlcjQ2ODUzODQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4685384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesr66a", "html_url": "https://github.com/jamesr66a", "followers_url": "https://api.github.com/users/jamesr66a/followers", "following_url": "https://api.github.com/users/jamesr66a/following{/other_user}", "gists_url": "https://api.github.com/users/jamesr66a/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesr66a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesr66a/subscriptions", "organizations_url": "https://api.github.com/users/jamesr66a/orgs", "repos_url": "https://api.github.com/users/jamesr66a/repos", "events_url": "https://api.github.com/users/jamesr66a/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesr66a/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-15T22:01:40Z", "updated_at": "2018-06-15T22:01:40Z", "author_association": "CONTRIBUTOR", "body_html": "<p>In fact, this is where the deprecated signatures are getting added to the python schema: <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/c537fd7432b1cf2d11552e485dc00dd9eea0e03c/tools/autograd/gen_autograd.py#L154\">pytorch/tools/autograd/gen_autograd.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 154\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/c537fd7432b1cf2d11552e485dc00dd9eea0e03c\">c537fd7</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L154\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"154\"></td>\n          <td id=\"LC154\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> deprecated <span class=\"pl-k\">=</span> load_deprecated_signatures( </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>But we don't have a corresponding addition in JIT dispatch: <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/c537fd7432b1cf2d11552e485dc00dd9eea0e03c/tools/jit/gen_jit_dispatch.py#L280\">pytorch/tools/jit/gen_jit_dispatch.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 280\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/c537fd7432b1cf2d11552e485dc00dd9eea0e03c\">c537fd7</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L280\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"280\"></td>\n          <td id=\"LC280\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> aten_decls <span class=\"pl-k\">=</span> load_aten_declarations(declarations) <span class=\"pl-k\">+</span> tensor_impl_methods </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>I think it's legit for the JIT to not support deprecated schema. I think a good thing to do is to stop using deprecated signatures in the autograd test vectors (where we get our tests as well). However, in the new schema <code>beta</code> and <code>alpha</code> are kwarg-only, and it doesn't look like the autograd tests support kwarg-only args at the moment: <a href=\"https://github.com/pytorch/pytorch/blob/master/test/test_autograd.py#L2752\">https://github.com/pytorch/pytorch/blob/master/test/test_autograd.py#L2752</a></p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=655866\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/colesbury\">@colesbury</a> is it worth it for me to add support for kwargs to these tests?</p>", "body_text": "In fact, this is where the deprecated signatures are getting added to the python schema: \n  \n    \n      pytorch/tools/autograd/gen_autograd.py\n    \n    \n         Line 154\n      in\n      c537fd7\n    \n    \n    \n    \n\n        \n          \n           deprecated = load_deprecated_signatures( \n        \n    \n  \n\n\nBut we don't have a corresponding addition in JIT dispatch: \n  \n    \n      pytorch/tools/jit/gen_jit_dispatch.py\n    \n    \n         Line 280\n      in\n      c537fd7\n    \n    \n    \n    \n\n        \n          \n           aten_decls = load_aten_declarations(declarations) + tensor_impl_methods \n        \n    \n  \n\n\nI think it's legit for the JIT to not support deprecated schema. I think a good thing to do is to stop using deprecated signatures in the autograd test vectors (where we get our tests as well). However, in the new schema beta and alpha are kwarg-only, and it doesn't look like the autograd tests support kwarg-only args at the moment: https://github.com/pytorch/pytorch/blob/master/test/test_autograd.py#L2752\ncc @colesbury is it worth it for me to add support for kwargs to these tests?", "body": "In fact, this is where the deprecated signatures are getting added to the python schema: https://github.com/pytorch/pytorch/blob/c537fd7432b1cf2d11552e485dc00dd9eea0e03c/tools/autograd/gen_autograd.py#L154\r\n\r\nBut we don't have a corresponding addition in JIT dispatch: https://github.com/pytorch/pytorch/blob/c537fd7432b1cf2d11552e485dc00dd9eea0e03c/tools/jit/gen_jit_dispatch.py#L280\r\n\r\nI think it's legit for the JIT to not support deprecated schema. I think a good thing to do is to stop using deprecated signatures in the autograd test vectors (where we get our tests as well). However, in the new schema `beta` and `alpha` are kwarg-only, and it doesn't look like the autograd tests support kwarg-only args at the moment: https://github.com/pytorch/pytorch/blob/master/test/test_autograd.py#L2752\r\n\r\ncc @colesbury is it worth it for me to add support for kwargs to these tests?"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13827", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13827/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13827/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13827/events", "html_url": "https://github.com/pytorch/pytorch/pull/13827", "id": 379540592, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI5OTYzNTk0", "number": 13827, "title": "Move autograd metadata from VariableImpl to TensorImpl", "user": {"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-11T16:49:29Z", "updated_at": "2018-11-23T15:55:22Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/13827", "html_url": "https://github.com/pytorch/pytorch/pull/13827", "diff_url": "https://github.com/pytorch/pytorch/pull/13827.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/13827.patch"}, "body_html": "<p>Changes originally in this PR:</p>\n<ol>\n<li>Move Variable::Impl data members into TensorImpl as <code>AutogradMeta</code> struct</li>\n<li>Change Variable::Impl functions to use data members in <code>AutogradMeta</code> struct</li>\n<li>Add <code>shallow_copy_and_detach()</code> function to each subclass of TensorImpl</li>\n<li>Do shallow copy when the user calls <code>make_variable(tensor)</code> / <code>make_variable_view(tensor)</code> / <code>variable.set_data(tensor)</code> / <code>variable.detach()</code></li>\n</ol>\n<p>Changes moved from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"378075166\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/13645\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/13645/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/13645\">#13645</a>:</p>\n<ol>\n<li>Add a flag to Variable to disallow size/stride/storage_ptr changes from in-place operations such as <code>resize_</code> / <code>resize_as_</code> / <code>set_</code> / <code>transpose_</code>, and set this flag to true when people call <code>tensor.data</code> in Python.</li>\n<li>Write text in the docs to actively discourage changing the shape or storage of <code>tensor_detached</code> and expecting <code>tensor</code> to also be updated.</li>\n</ol>\n<p>This is the 1st+2nd PR mentioned in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"378028003\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/13638\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/13638/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/13638\">#13638</a>.</p>", "body_text": "Changes originally in this PR:\n\nMove Variable::Impl data members into TensorImpl as AutogradMeta struct\nChange Variable::Impl functions to use data members in AutogradMeta struct\nAdd shallow_copy_and_detach() function to each subclass of TensorImpl\nDo shallow copy when the user calls make_variable(tensor) / make_variable_view(tensor) / variable.set_data(tensor) / variable.detach()\n\nChanges moved from #13645:\n\nAdd a flag to Variable to disallow size/stride/storage_ptr changes from in-place operations such as resize_ / resize_as_ / set_ / transpose_, and set this flag to true when people call tensor.data in Python.\nWrite text in the docs to actively discourage changing the shape or storage of tensor_detached and expecting tensor to also be updated.\n\nThis is the 1st+2nd PR mentioned in #13638.", "body": "Changes originally in this PR:\r\n1. Move Variable::Impl data members into TensorImpl as `AutogradMeta` struct\r\n2. Change Variable::Impl functions to use data members in `AutogradMeta` struct\r\n3. Add `shallow_copy_and_detach()` function to each subclass of TensorImpl\r\n4. Do shallow copy when the user calls `make_variable(tensor)` / `make_variable_view(tensor)` / `variable.set_data(tensor)` / `variable.detach()`\r\n\r\nChanges moved from https://github.com/pytorch/pytorch/pull/13645:\r\n1. Add a flag to Variable to disallow size/stride/storage_ptr changes from in-place operations such as `resize_` / `resize_as_` / `set_` / `transpose_`, and set this flag to true when people call `tensor.data` in Python.\r\n2. Write text in the docs to actively discourage changing the shape or storage of `tensor_detached` and expecting `tensor` to also be updated.\r\n\r\nThis is the 1st+2nd PR mentioned in https://github.com/pytorch/pytorch/issues/13638."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/1955", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/1955/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/1955/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/1955/events", "html_url": "https://github.com/pytorch/pytorch/issues/1955", "id": 239653423, "node_id": "MDU6SXNzdWUyMzk2NTM0MjM=", "number": 1955, "title": "Cuda runtime error (8) : invalid device function at THCTensorMathPointwise.cu for latest build", "user": {"login": "dendisuhubdy", "id": 4477337, "node_id": "MDQ6VXNlcjQ0NzczMzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/4477337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dendisuhubdy", "html_url": "https://github.com/dendisuhubdy", "followers_url": "https://api.github.com/users/dendisuhubdy/followers", "following_url": "https://api.github.com/users/dendisuhubdy/following{/other_user}", "gists_url": "https://api.github.com/users/dendisuhubdy/gists{/gist_id}", "starred_url": "https://api.github.com/users/dendisuhubdy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dendisuhubdy/subscriptions", "organizations_url": "https://api.github.com/users/dendisuhubdy/orgs", "repos_url": "https://api.github.com/users/dendisuhubdy/repos", "events_url": "https://api.github.com/users/dendisuhubdy/events{/privacy}", "received_events_url": "https://api.github.com/users/dendisuhubdy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2017-06-30T01:22:27Z", "updated_at": "2018-11-19T05:25:13Z", "closed_at": "2017-07-13T06:28:44Z", "author_association": "NONE", "body_html": "<p>So I've tried to compile Pytorch locally for development purposes under the (dev) anaconda environment and another one under (lisa) which I install from the instructions from pytorch.org, I've got a recent warning when running the VAE code on Pytorch tutorials when running it on the newest version.</p>\n<pre><code>(dev) [SLURM] suhubdyd@kepler2:~/research/models/pytorch-models/vae$ python main.py \nTHCudaCheck FAIL file=/u/suhubdyd/research/dl-frameworks/pytorch/torch/lib/THC/generated/../generic/THCTensorMathPointwise.cu line=247 error=8 : invalid device function\nTraceback (most recent call last):\n  File \"main.py\", line 138, in &lt;module&gt;\n    train(epoch)\n  File \"main.py\", line 108, in train\n    recon_batch, mu, logvar = model(data)\n  File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/module.py\", line 206, in __call__\n    result = self.forward(*input, **kwargs)\n  File \"main.py\", line 71, in forward\n    mu, logvar = self.encode(x.view(-1, 784))\n  File \"main.py\", line 54, in encode\n    h1 = self.relu(self.fc1(x))\n  File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/module.py\", line 206, in __call__\n    result = self.forward(*input, **kwargs)\n  File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/linear.py\", line 54, in forward\n    return self._backend.Linear.apply(input, self.weight, self.bias)\n  File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/_functions/linear.py\", line 14, in forward\n    output.add_(bias.expand_as(output))\nRuntimeError: cuda runtime error (8) : invalid device function at /u/suhubdyd/research/dl-frameworks/pytorch/torch/lib/THC/generated/../generic/THCTensorMathPointwise.cu:247\n</code></pre>\n<p>while it doesn't matter for the stable distribution</p>\n<pre><code>(lisa) [SLURM] suhubdyd@kepler2:~/research/models/pytorch-models/vae$ python main.py \nTrain Epoch: 1 [0/60000 (0%)]   Loss: 549.307800\nTrain Epoch: 1 [1280/60000 (2%)]        Loss: 311.565613\nTrain Epoch: 1 [2560/60000 (4%)]        Loss: 236.338989\nTrain Epoch: 1 [3840/60000 (6%)]        Loss: 225.371078\nTrain Epoch: 1 [5120/60000 (9%)]        Loss: 208.993668\nTrain Epoch: 1 [6400/60000 (11%)]       Loss: 206.427368\nTrain Epoch: 1 [7680/60000 (13%)]       Loss: 208.580597\nTrain Epoch: 1 [8960/60000 (15%)]       Loss: 201.324646\nTrain Epoch: 1 [10240/60000 (17%)]      Loss: 191.824326\nTrain Epoch: 1 [11520/60000 (19%)]      Loss: 195.214188\nTrain Epoch: 1 [12800/60000 (21%)]      Loss: 189.770447\nTrain Epoch: 1 [14080/60000 (23%)]      Loss: 173.119644\nTrain Epoch: 1 [15360/60000 (26%)]      Loss: 179.030197\nTrain Epoch: 1 [16640/60000 (28%)]      Loss: 170.247345\nTrain Epoch: 1 [17920/60000 (30%)]      Loss: 169.193451\nTrain Epoch: 1 [19200/60000 (32%)]      Loss: 162.828690\nTrain Epoch: 1 [20480/60000 (34%)]      Loss: 158.171326\nTrain Epoch: 1 [21760/60000 (36%)]      Loss: 158.530518\nTrain Epoch: 1 [23040/60000 (38%)]      Loss: 155.896255\nTrain Epoch: 1 [24320/60000 (41%)]      Loss: 158.835968\nTrain Epoch: 1 [25600/60000 (43%)]      Loss: 152.416977\nTrain Epoch: 1 [26880/60000 (45%)]      Loss: 153.593964\nTrain Epoch: 1 [28160/60000 (47%)]      Loss: 147.944260\nTrain Epoch: 1 [29440/60000 (49%)]      Loss: 148.223892\nTrain Epoch: 1 [30720/60000 (51%)]      Loss: 145.770905\nTrain Epoch: 1 [32000/60000 (53%)]      Loss: 144.410706\nTrain Epoch: 1 [33280/60000 (55%)]      Loss: 147.592163\nTrain Epoch: 1 [34560/60000 (58%)]      Loss: 149.320328\n</code></pre>", "body_text": "So I've tried to compile Pytorch locally for development purposes under the (dev) anaconda environment and another one under (lisa) which I install from the instructions from pytorch.org, I've got a recent warning when running the VAE code on Pytorch tutorials when running it on the newest version.\n(dev) [SLURM] suhubdyd@kepler2:~/research/models/pytorch-models/vae$ python main.py \nTHCudaCheck FAIL file=/u/suhubdyd/research/dl-frameworks/pytorch/torch/lib/THC/generated/../generic/THCTensorMathPointwise.cu line=247 error=8 : invalid device function\nTraceback (most recent call last):\n  File \"main.py\", line 138, in <module>\n    train(epoch)\n  File \"main.py\", line 108, in train\n    recon_batch, mu, logvar = model(data)\n  File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/module.py\", line 206, in __call__\n    result = self.forward(*input, **kwargs)\n  File \"main.py\", line 71, in forward\n    mu, logvar = self.encode(x.view(-1, 784))\n  File \"main.py\", line 54, in encode\n    h1 = self.relu(self.fc1(x))\n  File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/module.py\", line 206, in __call__\n    result = self.forward(*input, **kwargs)\n  File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/linear.py\", line 54, in forward\n    return self._backend.Linear.apply(input, self.weight, self.bias)\n  File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/_functions/linear.py\", line 14, in forward\n    output.add_(bias.expand_as(output))\nRuntimeError: cuda runtime error (8) : invalid device function at /u/suhubdyd/research/dl-frameworks/pytorch/torch/lib/THC/generated/../generic/THCTensorMathPointwise.cu:247\n\nwhile it doesn't matter for the stable distribution\n(lisa) [SLURM] suhubdyd@kepler2:~/research/models/pytorch-models/vae$ python main.py \nTrain Epoch: 1 [0/60000 (0%)]   Loss: 549.307800\nTrain Epoch: 1 [1280/60000 (2%)]        Loss: 311.565613\nTrain Epoch: 1 [2560/60000 (4%)]        Loss: 236.338989\nTrain Epoch: 1 [3840/60000 (6%)]        Loss: 225.371078\nTrain Epoch: 1 [5120/60000 (9%)]        Loss: 208.993668\nTrain Epoch: 1 [6400/60000 (11%)]       Loss: 206.427368\nTrain Epoch: 1 [7680/60000 (13%)]       Loss: 208.580597\nTrain Epoch: 1 [8960/60000 (15%)]       Loss: 201.324646\nTrain Epoch: 1 [10240/60000 (17%)]      Loss: 191.824326\nTrain Epoch: 1 [11520/60000 (19%)]      Loss: 195.214188\nTrain Epoch: 1 [12800/60000 (21%)]      Loss: 189.770447\nTrain Epoch: 1 [14080/60000 (23%)]      Loss: 173.119644\nTrain Epoch: 1 [15360/60000 (26%)]      Loss: 179.030197\nTrain Epoch: 1 [16640/60000 (28%)]      Loss: 170.247345\nTrain Epoch: 1 [17920/60000 (30%)]      Loss: 169.193451\nTrain Epoch: 1 [19200/60000 (32%)]      Loss: 162.828690\nTrain Epoch: 1 [20480/60000 (34%)]      Loss: 158.171326\nTrain Epoch: 1 [21760/60000 (36%)]      Loss: 158.530518\nTrain Epoch: 1 [23040/60000 (38%)]      Loss: 155.896255\nTrain Epoch: 1 [24320/60000 (41%)]      Loss: 158.835968\nTrain Epoch: 1 [25600/60000 (43%)]      Loss: 152.416977\nTrain Epoch: 1 [26880/60000 (45%)]      Loss: 153.593964\nTrain Epoch: 1 [28160/60000 (47%)]      Loss: 147.944260\nTrain Epoch: 1 [29440/60000 (49%)]      Loss: 148.223892\nTrain Epoch: 1 [30720/60000 (51%)]      Loss: 145.770905\nTrain Epoch: 1 [32000/60000 (53%)]      Loss: 144.410706\nTrain Epoch: 1 [33280/60000 (55%)]      Loss: 147.592163\nTrain Epoch: 1 [34560/60000 (58%)]      Loss: 149.320328", "body": "So I've tried to compile Pytorch locally for development purposes under the (dev) anaconda environment and another one under (lisa) which I install from the instructions from pytorch.org, I've got a recent warning when running the VAE code on Pytorch tutorials when running it on the newest version.\r\n\r\n    (dev) [SLURM] suhubdyd@kepler2:~/research/models/pytorch-models/vae$ python main.py \r\n    THCudaCheck FAIL file=/u/suhubdyd/research/dl-frameworks/pytorch/torch/lib/THC/generated/../generic/THCTensorMathPointwise.cu line=247 error=8 : invalid device function\r\n    Traceback (most recent call last):\r\n      File \"main.py\", line 138, in <module>\r\n        train(epoch)\r\n      File \"main.py\", line 108, in train\r\n        recon_batch, mu, logvar = model(data)\r\n      File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/module.py\", line 206, in __call__\r\n        result = self.forward(*input, **kwargs)\r\n      File \"main.py\", line 71, in forward\r\n        mu, logvar = self.encode(x.view(-1, 784))\r\n      File \"main.py\", line 54, in encode\r\n        h1 = self.relu(self.fc1(x))\r\n      File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/module.py\", line 206, in __call__\r\n        result = self.forward(*input, **kwargs)\r\n      File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/modules/linear.py\", line 54, in forward\r\n        return self._backend.Linear.apply(input, self.weight, self.bias)\r\n      File \"/u/suhubdyd/.conda/envs/dev/lib/python2.7/site-packages/torch/nn/_functions/linear.py\", line 14, in forward\r\n        output.add_(bias.expand_as(output))\r\n    RuntimeError: cuda runtime error (8) : invalid device function at /u/suhubdyd/research/dl-frameworks/pytorch/torch/lib/THC/generated/../generic/THCTensorMathPointwise.cu:247\r\n\r\nwhile it doesn't matter for the stable distribution\r\n\r\n    (lisa) [SLURM] suhubdyd@kepler2:~/research/models/pytorch-models/vae$ python main.py \r\n    Train Epoch: 1 [0/60000 (0%)]   Loss: 549.307800\r\n    Train Epoch: 1 [1280/60000 (2%)]        Loss: 311.565613\r\n    Train Epoch: 1 [2560/60000 (4%)]        Loss: 236.338989\r\n    Train Epoch: 1 [3840/60000 (6%)]        Loss: 225.371078\r\n    Train Epoch: 1 [5120/60000 (9%)]        Loss: 208.993668\r\n    Train Epoch: 1 [6400/60000 (11%)]       Loss: 206.427368\r\n    Train Epoch: 1 [7680/60000 (13%)]       Loss: 208.580597\r\n    Train Epoch: 1 [8960/60000 (15%)]       Loss: 201.324646\r\n    Train Epoch: 1 [10240/60000 (17%)]      Loss: 191.824326\r\n    Train Epoch: 1 [11520/60000 (19%)]      Loss: 195.214188\r\n    Train Epoch: 1 [12800/60000 (21%)]      Loss: 189.770447\r\n    Train Epoch: 1 [14080/60000 (23%)]      Loss: 173.119644\r\n    Train Epoch: 1 [15360/60000 (26%)]      Loss: 179.030197\r\n    Train Epoch: 1 [16640/60000 (28%)]      Loss: 170.247345\r\n    Train Epoch: 1 [17920/60000 (30%)]      Loss: 169.193451\r\n    Train Epoch: 1 [19200/60000 (32%)]      Loss: 162.828690\r\n    Train Epoch: 1 [20480/60000 (34%)]      Loss: 158.171326\r\n    Train Epoch: 1 [21760/60000 (36%)]      Loss: 158.530518\r\n    Train Epoch: 1 [23040/60000 (38%)]      Loss: 155.896255\r\n    Train Epoch: 1 [24320/60000 (41%)]      Loss: 158.835968\r\n    Train Epoch: 1 [25600/60000 (43%)]      Loss: 152.416977\r\n    Train Epoch: 1 [26880/60000 (45%)]      Loss: 153.593964\r\n    Train Epoch: 1 [28160/60000 (47%)]      Loss: 147.944260\r\n    Train Epoch: 1 [29440/60000 (49%)]      Loss: 148.223892\r\n    Train Epoch: 1 [30720/60000 (51%)]      Loss: 145.770905\r\n    Train Epoch: 1 [32000/60000 (53%)]      Loss: 144.410706\r\n    Train Epoch: 1 [33280/60000 (55%)]      Loss: 147.592163\r\n    Train Epoch: 1 [34560/60000 (58%)]      Loss: 149.320328"}
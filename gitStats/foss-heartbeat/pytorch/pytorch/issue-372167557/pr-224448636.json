{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/12899", "id": 224448636, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI0NDQ4NjM2", "html_url": "https://github.com/pytorch/pytorch/pull/12899", "diff_url": "https://github.com/pytorch/pytorch/pull/12899.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/12899.patch", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12899", "number": 12899, "state": "closed", "locked": false, "title": "Switch to packaged Thrust on Ubuntu, enable CentOS 7.5 as a CI target", "user": {"login": "iotamudelta", "id": 12565466, "node_id": "MDQ6VXNlcjEyNTY1NDY2", "avatar_url": "https://avatars2.githubusercontent.com/u/12565466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iotamudelta", "html_url": "https://github.com/iotamudelta", "followers_url": "https://api.github.com/users/iotamudelta/followers", "following_url": "https://api.github.com/users/iotamudelta/following{/other_user}", "gists_url": "https://api.github.com/users/iotamudelta/gists{/gist_id}", "starred_url": "https://api.github.com/users/iotamudelta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iotamudelta/subscriptions", "organizations_url": "https://api.github.com/users/iotamudelta/orgs", "repos_url": "https://api.github.com/users/iotamudelta/repos", "events_url": "https://api.github.com/users/iotamudelta/events{/privacy}", "received_events_url": "https://api.github.com/users/iotamudelta/received_events", "type": "User", "site_admin": false}, "body": "1) Use the hip-thrust version of Thrust as opposed to the GH master. (ROCm 267)\r\n\r\n2) CentOS 7.5 docker (ROCm 279)\r\n\r\n* Always install the libraries at docker creation for ubuntu.\r\n* Add Dockerfile for CentOS ROCm\r\n* Enable the centos build\r\n* Source devtoolset in bashrc\r\n* Set locales correctly depending on whether we are on Ubuntu or CentOS\r\n* Install a newer cmake for CentOS\r\n* Checkout thrust as there is no package for CentOS yet.\r\n\r\nPyTorch/Caffe2 on ROCm passed tests: https://github.com/ROCmSoftwarePlatform/pytorch/pull/280\r\n\r\nFor attention: @bddppq @ezyang \r\n\r\nDocker rebuild for Ubuntu not urgent (getting rid of Thrust checkout and package install is mainly cosmetic). If docker for CentOS 7.5 is wanted, build is necessary. Build of PyTorch tested by me in CentOS docker. PyTorch unit tests work mostly, however, a test in test_jit causes a python recursion error that seems to be due to the python2 on CentOS as we haven't ever seen this on Ubuntu - hence please do not enable unit tests.", "created_at": "2018-10-20T03:29:22Z", "updated_at": "2018-11-23T15:53:25Z", "closed_at": "2018-11-12T22:41:36Z", "merged_at": null, "merge_commit_sha": "482098ed7954ee2db8edb83a73eab0fa0545a574", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 1078897659, "node_id": "MDU6TGFiZWwxMDc4ODk3NjU5", "url": "https://api.github.com/repos/pytorch/pytorch/labels/rocm", "name": "rocm", "color": "499cd1", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/pytorch/pytorch/pulls/12899/commits", "review_comments_url": "https://api.github.com/repos/pytorch/pytorch/pulls/12899/comments", "review_comment_url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12899/comments", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/887963d4afdf9d02c2d539a6ff3c398011d370c2", "head": {"label": "ROCmSoftwarePlatform:thrust_centos", "ref": "thrust_centos", "sha": "887963d4afdf9d02c2d539a6ff3c398011d370c2", "user": {"login": "ROCmSoftwarePlatform", "id": 16900697, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE2OTAwNjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/16900697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ROCmSoftwarePlatform", "html_url": "https://github.com/ROCmSoftwarePlatform", "followers_url": "https://api.github.com/users/ROCmSoftwarePlatform/followers", "following_url": "https://api.github.com/users/ROCmSoftwarePlatform/following{/other_user}", "gists_url": "https://api.github.com/users/ROCmSoftwarePlatform/gists{/gist_id}", "starred_url": "https://api.github.com/users/ROCmSoftwarePlatform/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ROCmSoftwarePlatform/subscriptions", "organizations_url": "https://api.github.com/users/ROCmSoftwarePlatform/orgs", "repos_url": "https://api.github.com/users/ROCmSoftwarePlatform/repos", "events_url": "https://api.github.com/users/ROCmSoftwarePlatform/events{/privacy}", "received_events_url": "https://api.github.com/users/ROCmSoftwarePlatform/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 128132891, "node_id": "MDEwOlJlcG9zaXRvcnkxMjgxMzI4OTE=", "name": "pytorch", "full_name": "ROCmSoftwarePlatform/pytorch", "private": false, "owner": {"login": "ROCmSoftwarePlatform", "id": 16900697, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE2OTAwNjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/16900697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ROCmSoftwarePlatform", "html_url": "https://github.com/ROCmSoftwarePlatform", "followers_url": "https://api.github.com/users/ROCmSoftwarePlatform/followers", "following_url": "https://api.github.com/users/ROCmSoftwarePlatform/following{/other_user}", "gists_url": "https://api.github.com/users/ROCmSoftwarePlatform/gists{/gist_id}", "starred_url": "https://api.github.com/users/ROCmSoftwarePlatform/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ROCmSoftwarePlatform/subscriptions", "organizations_url": "https://api.github.com/users/ROCmSoftwarePlatform/orgs", "repos_url": "https://api.github.com/users/ROCmSoftwarePlatform/repos", "events_url": "https://api.github.com/users/ROCmSoftwarePlatform/events{/privacy}", "received_events_url": "https://api.github.com/users/ROCmSoftwarePlatform/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/ROCmSoftwarePlatform/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": true, "url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch", "forks_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/forks", "keys_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/teams", "hooks_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/events", "assignees_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/tags", "blobs_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/languages", "stargazers_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/subscription", "commits_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/merges", "archive_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/downloads", "issues_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/ROCmSoftwarePlatform/pytorch/deployments", "created_at": "2018-04-04T23:08:21Z", "updated_at": "2018-11-20T16:32:41Z", "pushed_at": "2018-11-21T18:53:27Z", "git_url": "git://github.com/ROCmSoftwarePlatform/pytorch.git", "ssh_url": "git@github.com:ROCmSoftwarePlatform/pytorch.git", "clone_url": "https://github.com/ROCmSoftwarePlatform/pytorch.git", "svn_url": "https://github.com/ROCmSoftwarePlatform/pytorch", "homepage": "http://pytorch.org", "size": 90540, "stargazers_count": 24, "watchers_count": 24, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 11, "mirror_url": null, "archived": false, "open_issues_count": 24, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 11, "open_issues": 24, "watchers": 24, "default_branch": "master"}}, "base": {"label": "pytorch:master", "ref": "master", "sha": "8752214fb7534d3d3f83c1a459f24c57db86cd10", "user": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 65600975, "node_id": "MDEwOlJlcG9zaXRvcnk2NTYwMDk3NQ==", "name": "pytorch", "full_name": "pytorch/pytorch", "private": false, "owner": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/pytorch/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": false, "url": "https://api.github.com/repos/pytorch/pytorch", "forks_url": "https://api.github.com/repos/pytorch/pytorch/forks", "keys_url": "https://api.github.com/repos/pytorch/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pytorch/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pytorch/pytorch/teams", "hooks_url": "https://api.github.com/repos/pytorch/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/pytorch/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/pytorch/pytorch/events", "assignees_url": "https://api.github.com/repos/pytorch/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/pytorch/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/pytorch/pytorch/tags", "blobs_url": "https://api.github.com/repos/pytorch/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pytorch/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pytorch/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pytorch/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/pytorch/pytorch/languages", "stargazers_url": "https://api.github.com/repos/pytorch/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/pytorch/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/pytorch/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/pytorch/pytorch/subscription", "commits_url": "https://api.github.com/repos/pytorch/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pytorch/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pytorch/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pytorch/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/pytorch/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pytorch/pytorch/merges", "archive_url": "https://api.github.com/repos/pytorch/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pytorch/pytorch/downloads", "issues_url": "https://api.github.com/repos/pytorch/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/pytorch/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/pytorch/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/pytorch/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pytorch/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/pytorch/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/pytorch/pytorch/deployments", "created_at": "2016-08-13T05:26:41Z", "updated_at": "2018-11-24T14:27:35Z", "pushed_at": "2018-11-24T12:42:01Z", "git_url": "git://github.com/pytorch/pytorch.git", "ssh_url": "git@github.com:pytorch/pytorch.git", "clone_url": "https://github.com/pytorch/pytorch.git", "svn_url": "https://github.com/pytorch/pytorch", "homepage": "http://pytorch.org", "size": 89656, "stargazers_count": 21591, "watchers_count": 21591, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 5154, "mirror_url": null, "archived": false, "open_issues_count": 2196, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 5154, "open_issues": 2196, "watchers": 21591, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/12899"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/12899"}, "issue": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/12899"}, "comments": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/12899/comments"}, "review_comments": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/12899/comments"}, "review_comment": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/12899/commits"}, "statuses": {"href": "https://api.github.com/repos/pytorch/pytorch/statuses/887963d4afdf9d02c2d539a6ff3c398011d370c2"}}, "author_association": "CONTRIBUTOR", "body_html": "<ol>\n<li>\n<p>Use the hip-thrust version of Thrust as opposed to the GH master. (ROCm 267)</p>\n</li>\n<li>\n<p>CentOS 7.5 docker (ROCm 279)</p>\n</li>\n</ol>\n<ul>\n<li>Always install the libraries at docker creation for ubuntu.</li>\n<li>Add Dockerfile for CentOS ROCm</li>\n<li>Enable the centos build</li>\n<li>Source devtoolset in bashrc</li>\n<li>Set locales correctly depending on whether we are on Ubuntu or CentOS</li>\n<li>Install a newer cmake for CentOS</li>\n<li>Checkout thrust as there is no package for CentOS yet.</li>\n</ul>\n<p>PyTorch/Caffe2 on ROCm passed tests: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"372145553\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/ROCmSoftwarePlatform/pytorch/issues/280\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/ROCmSoftwarePlatform/pytorch/pull/280/hovercard\" href=\"https://github.com/ROCmSoftwarePlatform/pytorch/pull/280\">ROCmSoftwarePlatform#280</a></p>\n<p>For attention: <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9300575\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/bddppq\">@bddppq</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13564\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ezyang\">@ezyang</a></p>\n<p>Docker rebuild for Ubuntu not urgent (getting rid of Thrust checkout and package install is mainly cosmetic). If docker for CentOS 7.5 is wanted, build is necessary. Build of PyTorch tested by me in CentOS docker. PyTorch unit tests work mostly, however, a test in test_jit causes a python recursion error that seems to be due to the python2 on CentOS as we haven't ever seen this on Ubuntu - hence please do not enable unit tests.</p>", "body_text": "Use the hip-thrust version of Thrust as opposed to the GH master. (ROCm 267)\n\n\nCentOS 7.5 docker (ROCm 279)\n\n\n\nAlways install the libraries at docker creation for ubuntu.\nAdd Dockerfile for CentOS ROCm\nEnable the centos build\nSource devtoolset in bashrc\nSet locales correctly depending on whether we are on Ubuntu or CentOS\nInstall a newer cmake for CentOS\nCheckout thrust as there is no package for CentOS yet.\n\nPyTorch/Caffe2 on ROCm passed tests: ROCmSoftwarePlatform#280\nFor attention: @bddppq @ezyang\nDocker rebuild for Ubuntu not urgent (getting rid of Thrust checkout and package install is mainly cosmetic). If docker for CentOS 7.5 is wanted, build is necessary. Build of PyTorch tested by me in CentOS docker. PyTorch unit tests work mostly, however, a test in test_jit causes a python recursion error that seems to be due to the python2 on CentOS as we haven't ever seen this on Ubuntu - hence please do not enable unit tests.", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 9, "review_comments": 23, "maintainer_can_modify": false, "commits": 37, "additions": 200, "deletions": 135, "changed_files": 18}
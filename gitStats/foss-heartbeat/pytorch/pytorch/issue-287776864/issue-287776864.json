{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4606", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4606/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4606/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4606/events", "html_url": "https://github.com/pytorch/pytorch/issues/4606", "id": 287776864, "node_id": "MDU6SXNzdWUyODc3NzY4NjQ=", "number": 4606, "title": "Error while install distributed pytorch", "user": {"login": "Zrachel", "id": 4532062, "node_id": "MDQ6VXNlcjQ1MzIwNjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/4532062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zrachel", "html_url": "https://github.com/Zrachel", "followers_url": "https://api.github.com/users/Zrachel/followers", "following_url": "https://api.github.com/users/Zrachel/following{/other_user}", "gists_url": "https://api.github.com/users/Zrachel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zrachel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zrachel/subscriptions", "organizations_url": "https://api.github.com/users/Zrachel/orgs", "repos_url": "https://api.github.com/users/Zrachel/repos", "events_url": "https://api.github.com/users/Zrachel/events{/privacy}", "received_events_url": "https://api.github.com/users/Zrachel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-01-11T12:56:29Z", "updated_at": "2018-01-15T02:43:04Z", "closed_at": "2018-01-12T11:42:55Z", "author_association": "NONE", "body_html": "<p>I run <code>WITH_DISTRIBUTED_MW=1 &amp;&amp; python setup.py install</code> to install pytorch supporting distributed training. However, I get the following error:</p>\n<pre><code>......\ngcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/zhangruiqing01/tools/py-torch-install/pytorch -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/TH -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THPP -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THNN -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/ATen -I/home/zhangruiqing01/tools/anaconda3/lib/python3.6/site-packages/numpy/core/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THD -I/usr/local/cuda/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THCUNN -I/usr/local/cuda/include -I/home/zhangruiqing01/tools/anaconda3/include/python3.6m -c /home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc/generated/cuda_TensorFloat.cpp -o build/temp.linux-x86_64-3.6/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc/generated/cuda_TensorFloat.o -D_THP_CORE -std=c++11 -Wno-write-strings -fno-strict-aliasing -DWITH_NUMPY -DWITH_DISTRIBUTED -DWITH_DISTRIBUTED_MW -DWITH_CUDA -DCUDA_LIB_PATH=/usr/local/cuda/lib64 -DWITH_NCCL -DWITH_CUDNN\nerror: command 'gcc' failed with exit status 1\n</code></pre>\n<p>Here is my environment:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ which gcc\n<span class=\"pl-k\">~</span>/tools/anaconda3/bin/gcc\n[zhangruiqing01@szwg-rp-nlp01.szwg01.baidu.com:<span class=\"pl-k\">~</span>/tools/py-torch-install/pytorch]\n$ gcc -v\nReading specs from /home/zhangruiqing01/tools/anaconda3/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.8.5/specs\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/home/zhangruiqing01/tools/anaconda3/bin/../libexec/gcc/x86_64-unknown-linux-gnu/4.8.5/lto-wrapper\nTarget: x86_64-unknown-linux-gnu\nConfigured with: ./configure --prefix=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-gxx-include-dir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/gcc/include/c++ --bindir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/bin --datarootdir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/share --libdir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/lib --with-gmp=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-mpfr=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-mpc=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-isl=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-cloog=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --enable-checking=release --with-tune=generic --disable-multilib\nThread model: posix\ngcc version 4.8.5 (GCC) </pre></div>", "body_text": "I run WITH_DISTRIBUTED_MW=1 && python setup.py install to install pytorch supporting distributed training. However, I get the following error:\n......\ngcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/zhangruiqing01/tools/py-torch-install/pytorch -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/TH -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THPP -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THNN -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/ATen -I/home/zhangruiqing01/tools/anaconda3/lib/python3.6/site-packages/numpy/core/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THD -I/usr/local/cuda/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THCUNN -I/usr/local/cuda/include -I/home/zhangruiqing01/tools/anaconda3/include/python3.6m -c /home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc/generated/cuda_TensorFloat.cpp -o build/temp.linux-x86_64-3.6/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc/generated/cuda_TensorFloat.o -D_THP_CORE -std=c++11 -Wno-write-strings -fno-strict-aliasing -DWITH_NUMPY -DWITH_DISTRIBUTED -DWITH_DISTRIBUTED_MW -DWITH_CUDA -DCUDA_LIB_PATH=/usr/local/cuda/lib64 -DWITH_NCCL -DWITH_CUDNN\nerror: command 'gcc' failed with exit status 1\n\nHere is my environment:\n$ which gcc\n~/tools/anaconda3/bin/gcc\n[zhangruiqing01@szwg-rp-nlp01.szwg01.baidu.com:~/tools/py-torch-install/pytorch]\n$ gcc -v\nReading specs from /home/zhangruiqing01/tools/anaconda3/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.8.5/specs\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/home/zhangruiqing01/tools/anaconda3/bin/../libexec/gcc/x86_64-unknown-linux-gnu/4.8.5/lto-wrapper\nTarget: x86_64-unknown-linux-gnu\nConfigured with: ./configure --prefix=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-gxx-include-dir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/gcc/include/c++ --bindir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/bin --datarootdir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/share --libdir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/lib --with-gmp=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-mpfr=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-mpc=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-isl=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-cloog=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --enable-checking=release --with-tune=generic --disable-multilib\nThread model: posix\ngcc version 4.8.5 (GCC)", "body": "I run `WITH_DISTRIBUTED_MW=1 && python setup.py install` to install pytorch supporting distributed training. However, I get the following error:\r\n```\r\n......\r\ngcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -I/home/zhangruiqing01/tools/py-torch-install/pytorch -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/TH -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THPP -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THNN -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/ATen -I/home/zhangruiqing01/tools/anaconda3/lib/python3.6/site-packages/numpy/core/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THD -I/usr/local/cuda/include -I/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/lib/tmp_install/include/THCUNN -I/usr/local/cuda/include -I/home/zhangruiqing01/tools/anaconda3/include/python3.6m -c /home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc/generated/cuda_TensorFloat.cpp -o build/temp.linux-x86_64-3.6/home/zhangruiqing01/tools/py-torch-install/pytorch/torch/csrc/generated/cuda_TensorFloat.o -D_THP_CORE -std=c++11 -Wno-write-strings -fno-strict-aliasing -DWITH_NUMPY -DWITH_DISTRIBUTED -DWITH_DISTRIBUTED_MW -DWITH_CUDA -DCUDA_LIB_PATH=/usr/local/cuda/lib64 -DWITH_NCCL -DWITH_CUDNN\r\nerror: command 'gcc' failed with exit status 1\r\n```\r\n\r\nHere is my environment:\r\n```bash\r\n$ which gcc\r\n~/tools/anaconda3/bin/gcc\r\n[zhangruiqing01@szwg-rp-nlp01.szwg01.baidu.com:~/tools/py-torch-install/pytorch]\r\n$ gcc -v\r\nReading specs from /home/zhangruiqing01/tools/anaconda3/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.8.5/specs\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=/home/zhangruiqing01/tools/anaconda3/bin/../libexec/gcc/x86_64-unknown-linux-gnu/4.8.5/lto-wrapper\r\nTarget: x86_64-unknown-linux-gnu\r\nConfigured with: ./configure --prefix=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-gxx-include-dir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/gcc/include/c++ --bindir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/bin --datarootdir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/share --libdir=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold/lib --with-gmp=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-mpfr=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-mpc=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-isl=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --with-cloog=/home/ray/mc-x64-2.7/conda-bld/gcc_1479223211463/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold --enable-checking=release --with-tune=generic --disable-multilib\r\nThread model: posix\r\ngcc version 4.8.5 (GCC) \r\n```\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8352", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8352/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8352/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8352/events", "html_url": "https://github.com/pytorch/pytorch/pull/8352", "id": 331385478, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk0MTI5OTgw", "number": 8352, "title": "Skip calling ncclCommDestroy in destructor", "user": {"login": "xw285cornell", "id": 7795712, "node_id": "MDQ6VXNlcjc3OTU3MTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/7795712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xw285cornell", "html_url": "https://github.com/xw285cornell", "followers_url": "https://api.github.com/users/xw285cornell/followers", "following_url": "https://api.github.com/users/xw285cornell/following{/other_user}", "gists_url": "https://api.github.com/users/xw285cornell/gists{/gist_id}", "starred_url": "https://api.github.com/users/xw285cornell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xw285cornell/subscriptions", "organizations_url": "https://api.github.com/users/xw285cornell/orgs", "repos_url": "https://api.github.com/users/xw285cornell/repos", "events_url": "https://api.github.com/users/xw285cornell/events{/privacy}", "received_events_url": "https://api.github.com/users/xw285cornell/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-11T23:30:09Z", "updated_at": "2018-06-13T06:07:04Z", "closed_at": "2018-06-12T17:11:10Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/8352", "html_url": "https://github.com/pytorch/pytorch/pull/8352", "diff_url": "https://github.com/pytorch/pytorch/pull/8352.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/8352.patch"}, "body_html": "<p>There is a bug in NCCL that causing seg faults while calling ncclCommDestroy() in the destructor during program exit. According to Nvidia, whether the NCCL destructor will be called before or after the CUDA runtime destructor is undefined, which can lead to crashes.</p>\n<p>For the immediate workaround, skip calling ncclCommDestroy ihe NCCL destructor. This is UGLY and we'll follow up with Nvidia to solve this ASAP.</p>", "body_text": "There is a bug in NCCL that causing seg faults while calling ncclCommDestroy() in the destructor during program exit. According to Nvidia, whether the NCCL destructor will be called before or after the CUDA runtime destructor is undefined, which can lead to crashes.\nFor the immediate workaround, skip calling ncclCommDestroy ihe NCCL destructor. This is UGLY and we'll follow up with Nvidia to solve this ASAP.", "body": "There is a bug in NCCL that causing seg faults while calling ncclCommDestroy() in the destructor during program exit. According to Nvidia, whether the NCCL destructor will be called before or after the CUDA runtime destructor is undefined, which can lead to crashes.\r\n\r\nFor the immediate workaround, skip calling ncclCommDestroy ihe NCCL destructor. This is UGLY and we'll follow up with Nvidia to solve this ASAP.\r\n\r\n"}
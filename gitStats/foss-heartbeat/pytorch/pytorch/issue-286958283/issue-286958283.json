{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4551", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4551/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4551/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4551/events", "html_url": "https://github.com/pytorch/pytorch/issues/4551", "id": 286958283, "node_id": "MDU6SXNzdWUyODY5NTgyODM=", "number": 4551, "title": "Met 'cudnnDestroyDropoutDescriptor' while run multiply gpu-based models in multiply processes", "user": {"login": "IdiosyncraticDragon", "id": 3750460, "node_id": "MDQ6VXNlcjM3NTA0NjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3750460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IdiosyncraticDragon", "html_url": "https://github.com/IdiosyncraticDragon", "followers_url": "https://api.github.com/users/IdiosyncraticDragon/followers", "following_url": "https://api.github.com/users/IdiosyncraticDragon/following{/other_user}", "gists_url": "https://api.github.com/users/IdiosyncraticDragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/IdiosyncraticDragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IdiosyncraticDragon/subscriptions", "organizations_url": "https://api.github.com/users/IdiosyncraticDragon/orgs", "repos_url": "https://api.github.com/users/IdiosyncraticDragon/repos", "events_url": "https://api.github.com/users/IdiosyncraticDragon/events{/privacy}", "received_events_url": "https://api.github.com/users/IdiosyncraticDragon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 806617721, "node_id": "MDU6TGFiZWw4MDY2MTc3MjE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/cudnn", "name": "cudnn", "color": "fbca04", "default": false}, {"id": 679953919, "node_id": "MDU6TGFiZWw2Nzk5NTM5MTk=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/multi-gpu", "name": "multi-gpu", "color": "bfdadc", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-09T03:18:00Z", "updated_at": "2018-01-16T17:15:52Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I loaded a model and replicated 3 models which are all on different GPUs, and use torch.multiprocessing to create 4 processes. By this  setting, I run one model in on process, so that I parallel run them. The running is fine, but when the processes were finished, this error occurred:</p>\n<pre><code>Exception ignored in: &lt;bound method CuDNNHandle.__del__ of &lt;torch.backends.cudnn.CuDNNHandle object at 0x7f86ea1bcf28&gt;&gt;\nTraceback (most recent call last):\n  File \"/home/lgy/installed/anacoda3/lib/python3.6/site-packages/torch/backends/cudnn/__init__.py\", line 114, in __del__\nAttributeError: 'NoneType' object has no attribute 'cudnnDestroy'\n</code></pre>\n<p>The code where the error happens is:</p>\n<pre><code>class DropoutDescriptor(object):\n    def __del__(self):\n        check_error(lib.cudnnDestroyDropoutDescriptor(self))\n</code></pre>\n<p>My pytorch version:</p>\n<pre><code>$&gt; pip list\n....\ntorch (0.3.0.post4)\ntorchtext (0.1.1)\ntorchvision (0.2.0)\n....\n</code></pre>\n<p>Is there any ways to fix this?</p>", "body_text": "I loaded a model and replicated 3 models which are all on different GPUs, and use torch.multiprocessing to create 4 processes. By this  setting, I run one model in on process, so that I parallel run them. The running is fine, but when the processes were finished, this error occurred:\nException ignored in: <bound method CuDNNHandle.__del__ of <torch.backends.cudnn.CuDNNHandle object at 0x7f86ea1bcf28>>\nTraceback (most recent call last):\n  File \"/home/lgy/installed/anacoda3/lib/python3.6/site-packages/torch/backends/cudnn/__init__.py\", line 114, in __del__\nAttributeError: 'NoneType' object has no attribute 'cudnnDestroy'\n\nThe code where the error happens is:\nclass DropoutDescriptor(object):\n    def __del__(self):\n        check_error(lib.cudnnDestroyDropoutDescriptor(self))\n\nMy pytorch version:\n$> pip list\n....\ntorch (0.3.0.post4)\ntorchtext (0.1.1)\ntorchvision (0.2.0)\n....\n\nIs there any ways to fix this?", "body": "I loaded a model and replicated 3 models which are all on different GPUs, and use torch.multiprocessing to create 4 processes. By this  setting, I run one model in on process, so that I parallel run them. The running is fine, but when the processes were finished, this error occurred:\r\n```\r\nException ignored in: <bound method CuDNNHandle.__del__ of <torch.backends.cudnn.CuDNNHandle object at 0x7f86ea1bcf28>>\r\nTraceback (most recent call last):\r\n  File \"/home/lgy/installed/anacoda3/lib/python3.6/site-packages/torch/backends/cudnn/__init__.py\", line 114, in __del__\r\nAttributeError: 'NoneType' object has no attribute 'cudnnDestroy'\r\n```\r\n\r\nThe code where the error happens is:\r\n```\r\nclass DropoutDescriptor(object):\r\n    def __del__(self):\r\n        check_error(lib.cudnnDestroyDropoutDescriptor(self))\r\n```\r\n\r\nMy pytorch version:\r\n```\r\n$> pip list\r\n....\r\ntorch (0.3.0.post4)\r\ntorchtext (0.1.1)\r\ntorchvision (0.2.0)\r\n....\r\n```\r\n\r\nIs there any ways to fix this?"}
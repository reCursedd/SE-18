{"url": "https://api.github.com/repos/pytorch/pytorch/issues/728", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/728/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/728/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/728/events", "html_url": "https://github.com/pytorch/pytorch/issues/728", "id": 207106170, "node_id": "MDU6SXNzdWUyMDcxMDYxNzA=", "number": 728, "title": "a simple  compiling error with clang in macOS ", "user": {"login": "Teaonly", "id": 2042911, "node_id": "MDQ6VXNlcjIwNDI5MTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2042911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Teaonly", "html_url": "https://github.com/Teaonly", "followers_url": "https://api.github.com/users/Teaonly/followers", "following_url": "https://api.github.com/users/Teaonly/following{/other_user}", "gists_url": "https://api.github.com/users/Teaonly/gists{/gist_id}", "starred_url": "https://api.github.com/users/Teaonly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Teaonly/subscriptions", "organizations_url": "https://api.github.com/users/Teaonly/orgs", "repos_url": "https://api.github.com/users/Teaonly/repos", "events_url": "https://api.github.com/users/Teaonly/events{/privacy}", "received_events_url": "https://api.github.com/users/Teaonly/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-02-13T02:07:23Z", "updated_at": "2017-02-13T17:08:51Z", "closed_at": "2017-02-13T17:08:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Building error in macOS (version 10.12.3)<br>\nCode commit version:</p>\n<pre><code>commit 0a893abc7be4dbaf609c1db180dcc148853ad208\nAuthor: Adam Lerer &lt;alerer@fb.com&gt;\nDate:   Sat Feb 11 18:49:32 2017 -0800\n\n    fix serialization bug for large files\n</code></pre>\n<p>Error message:</p>\n<pre><code>In file included from torch/csrc/serialization.cpp:7:\nIn file included from /Users/teaonly/Workspace/github/pytorch/torch/lib/tmp_install/include/TH/THGenerateAllTypes.h:8:\nIn file included from generic/serialization.cpp:1:\n/Users/teaonly/Workspace/github/pytorch/torch/csrc/generic/serialization.cpp:106:27: error: no matching function for call to 'min'\n      size_t to_convert = std::min(size - i, buffer_size);\n                          ^~~~~~~~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2589:1: note: candidate template ignored: deduced conflicting types\n      for parameter '_Tp' ('long long' vs. 'long')\nmin(const _Tp&amp; __a, const _Tp&amp; __b)\n^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2599:1: note: candidate template ignored: could not match\n      'initializer_list&lt;type-parameter-0-0&gt;' against 'long long'\nmin(initializer_list&lt;_Tp&gt; __t, _Compare __comp)\n^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2581:1: note: candidate function template not viable: requires 3\n      arguments, but 2 were provided\nmin(const _Tp&amp; __a, const _Tp&amp; __b, _Compare __comp)\n^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2607:1: note: candidate function template not viable: requires single\n      argument '__t', but 2 arguments were provided\nmin(initializer_list&lt;_Tp&gt; __t)\n</code></pre>\n<p>The clang will report error in the following code:</p>\n<pre><code> 54     for (int64_t i = 0; i &lt; self-&gt;size; i += buffer_size) {\n 55       size_t to_convert = std::min(self-&gt;size - i, buffer_size);\n</code></pre>\n<p>self-&gt;size is long<br>\ni is int64_t<br>\nbuffer_size is long<br>\nso 'self-&gt;size-i' is a long long,</p>\n<p>clang will report error when different type in std::min.</p>", "body_text": "Building error in macOS (version 10.12.3)\nCode commit version:\ncommit 0a893abc7be4dbaf609c1db180dcc148853ad208\nAuthor: Adam Lerer <alerer@fb.com>\nDate:   Sat Feb 11 18:49:32 2017 -0800\n\n    fix serialization bug for large files\n\nError message:\nIn file included from torch/csrc/serialization.cpp:7:\nIn file included from /Users/teaonly/Workspace/github/pytorch/torch/lib/tmp_install/include/TH/THGenerateAllTypes.h:8:\nIn file included from generic/serialization.cpp:1:\n/Users/teaonly/Workspace/github/pytorch/torch/csrc/generic/serialization.cpp:106:27: error: no matching function for call to 'min'\n      size_t to_convert = std::min(size - i, buffer_size);\n                          ^~~~~~~~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2589:1: note: candidate template ignored: deduced conflicting types\n      for parameter '_Tp' ('long long' vs. 'long')\nmin(const _Tp& __a, const _Tp& __b)\n^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2599:1: note: candidate template ignored: could not match\n      'initializer_list<type-parameter-0-0>' against 'long long'\nmin(initializer_list<_Tp> __t, _Compare __comp)\n^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2581:1: note: candidate function template not viable: requires 3\n      arguments, but 2 were provided\nmin(const _Tp& __a, const _Tp& __b, _Compare __comp)\n^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2607:1: note: candidate function template not viable: requires single\n      argument '__t', but 2 arguments were provided\nmin(initializer_list<_Tp> __t)\n\nThe clang will report error in the following code:\n 54     for (int64_t i = 0; i < self->size; i += buffer_size) {\n 55       size_t to_convert = std::min(self->size - i, buffer_size);\n\nself->size is long\ni is int64_t\nbuffer_size is long\nso 'self->size-i' is a long long,\nclang will report error when different type in std::min.", "body": "Building error in macOS (version 10.12.3)\r\nCode commit version: \r\n\r\n```\r\ncommit 0a893abc7be4dbaf609c1db180dcc148853ad208\r\nAuthor: Adam Lerer <alerer@fb.com>\r\nDate:   Sat Feb 11 18:49:32 2017 -0800\r\n\r\n    fix serialization bug for large files\r\n```\r\n\r\nError message:\r\n\r\n```\r\nIn file included from torch/csrc/serialization.cpp:7:\r\nIn file included from /Users/teaonly/Workspace/github/pytorch/torch/lib/tmp_install/include/TH/THGenerateAllTypes.h:8:\r\nIn file included from generic/serialization.cpp:1:\r\n/Users/teaonly/Workspace/github/pytorch/torch/csrc/generic/serialization.cpp:106:27: error: no matching function for call to 'min'\r\n      size_t to_convert = std::min(size - i, buffer_size);\r\n                          ^~~~~~~~\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2589:1: note: candidate template ignored: deduced conflicting types\r\n      for parameter '_Tp' ('long long' vs. 'long')\r\nmin(const _Tp& __a, const _Tp& __b)\r\n^\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2599:1: note: candidate template ignored: could not match\r\n      'initializer_list<type-parameter-0-0>' against 'long long'\r\nmin(initializer_list<_Tp> __t, _Compare __comp)\r\n^\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2581:1: note: candidate function template not viable: requires 3\r\n      arguments, but 2 were provided\r\nmin(const _Tp& __a, const _Tp& __b, _Compare __comp)\r\n^\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/algorithm:2607:1: note: candidate function template not viable: requires single\r\n      argument '__t', but 2 arguments were provided\r\nmin(initializer_list<_Tp> __t)\r\n```\r\nThe clang will report error in the following code:\r\n\r\n```\r\n 54     for (int64_t i = 0; i < self->size; i += buffer_size) {\r\n 55       size_t to_convert = std::min(self->size - i, buffer_size);\r\n```\r\nself->size is long\r\ni is int64_t\r\nbuffer_size is long\r\nso 'self->size-i' is a long long, \r\n\r\nclang will report error when different type in std::min. \r\n\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/430560919", "html_url": "https://github.com/pytorch/pytorch/pull/12625#issuecomment-430560919", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12625", "id": 430560919, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDU2MDkxOQ==", "user": {"login": "kleisauke", "id": 12746591, "node_id": "MDQ6VXNlcjEyNzQ2NTkx", "avatar_url": "https://avatars3.githubusercontent.com/u/12746591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kleisauke", "html_url": "https://github.com/kleisauke", "followers_url": "https://api.github.com/users/kleisauke/followers", "following_url": "https://api.github.com/users/kleisauke/following{/other_user}", "gists_url": "https://api.github.com/users/kleisauke/gists{/gist_id}", "starred_url": "https://api.github.com/users/kleisauke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kleisauke/subscriptions", "organizations_url": "https://api.github.com/users/kleisauke/orgs", "repos_url": "https://api.github.com/users/kleisauke/repos", "events_url": "https://api.github.com/users/kleisauke/events{/privacy}", "received_events_url": "https://api.github.com/users/kleisauke/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-17T09:38:43Z", "updated_at": "2018-10-17T09:38:43Z", "author_association": "NONE", "body_html": "<p>Please add this patch as well:</p>\n<div class=\"highlight highlight-source-diff\"><pre><span class=\"pl-c1\">diff --git a/caffe2/python/CMakeLists.txt b/caffe2/python/CMakeLists.txt</span>\nindex 1111111..2222222 100644\n<span class=\"pl-md\">--- a/caffe2/python/CMakeLists.txt</span>\n<span class=\"pl-mi1\">+++ b/caffe2/python/CMakeLists.txt</span>\n<span class=\"pl-mdr\">@@ -6,14 +6,6 @@</span> set(Caffe2_CPU_PYTHON_SRCS\n     \"/pybind_state_registry.cc\"\n )\n \n<span class=\"pl-md\"><span class=\"pl-md\">-</span># ---[ MKL binding</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>if(USE_MKL AND USE_MKLML)</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>  set(Caffe2_CPU_PYTHON_SRCS</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>      ${Caffe2_CPU_PYTHON_SRCS}</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>      \"/pybind_state_mkl.cc\"</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>  )</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>endif()</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span></span>\n # ---[ GPU files\n set(Caffe2_GPU_PYTHON_SRCS\n     ${Caffe2_CPU_PYTHON_SRCS}</pre></div>\n<p>Because it currently fails to build Caffe2 when MKL is found (on master):</p>\n<pre><code>CMake Error at caffe2/CMakeLists.txt:503 (add_library):\n  Cannot find source file:\n\n    /home/pytorch/src/pytorch/caffe2/python/pybind_state_mkl.cc\n\n  Tried extensions .c .C .c++ .cc .cpp .cxx .cu .m .M .mm .h .hh .h++ .hm\n  .hpp .hxx .in .txx\n\n\nCMake Error at caffe2/CMakeLists.txt:503 (add_library):\n  No SOURCES given to target: caffe2_pybind11_state\n</code></pre>", "body_text": "Please add this patch as well:\ndiff --git a/caffe2/python/CMakeLists.txt b/caffe2/python/CMakeLists.txt\nindex 1111111..2222222 100644\n--- a/caffe2/python/CMakeLists.txt\n+++ b/caffe2/python/CMakeLists.txt\n@@ -6,14 +6,6 @@ set(Caffe2_CPU_PYTHON_SRCS\n     \"/pybind_state_registry.cc\"\n )\n \n-# ---[ MKL binding\n-if(USE_MKL AND USE_MKLML)\n-  set(Caffe2_CPU_PYTHON_SRCS\n-      ${Caffe2_CPU_PYTHON_SRCS}\n-      \"/pybind_state_mkl.cc\"\n-  )\n-endif()\n-\n # ---[ GPU files\n set(Caffe2_GPU_PYTHON_SRCS\n     ${Caffe2_CPU_PYTHON_SRCS}\nBecause it currently fails to build Caffe2 when MKL is found (on master):\nCMake Error at caffe2/CMakeLists.txt:503 (add_library):\n  Cannot find source file:\n\n    /home/pytorch/src/pytorch/caffe2/python/pybind_state_mkl.cc\n\n  Tried extensions .c .C .c++ .cc .cpp .cxx .cu .m .M .mm .h .hh .h++ .hm\n  .hpp .hxx .in .txx\n\n\nCMake Error at caffe2/CMakeLists.txt:503 (add_library):\n  No SOURCES given to target: caffe2_pybind11_state", "body": "Please add this patch as well:\r\n```patch\r\ndiff --git a/caffe2/python/CMakeLists.txt b/caffe2/python/CMakeLists.txt\r\nindex 1111111..2222222 100644\r\n--- a/caffe2/python/CMakeLists.txt\r\n+++ b/caffe2/python/CMakeLists.txt\r\n@@ -6,14 +6,6 @@ set(Caffe2_CPU_PYTHON_SRCS\r\n     \"/pybind_state_registry.cc\"\r\n )\r\n \r\n-# ---[ MKL binding\r\n-if(USE_MKL AND USE_MKLML)\r\n-  set(Caffe2_CPU_PYTHON_SRCS\r\n-      ${Caffe2_CPU_PYTHON_SRCS}\r\n-      \"/pybind_state_mkl.cc\"\r\n-  )\r\n-endif()\r\n-\r\n # ---[ GPU files\r\n set(Caffe2_GPU_PYTHON_SRCS\r\n     ${Caffe2_CPU_PYTHON_SRCS}\r\n```\r\n\r\nBecause it currently fails to build Caffe2 when MKL is found (on master):\r\n```\r\nCMake Error at caffe2/CMakeLists.txt:503 (add_library):\r\n  Cannot find source file:\r\n\r\n    /home/pytorch/src/pytorch/caffe2/python/pybind_state_mkl.cc\r\n\r\n  Tried extensions .c .C .c++ .cc .cpp .cxx .cu .m .M .mm .h .hh .h++ .hm\r\n  .hpp .hxx .in .txx\r\n\r\n\r\nCMake Error at caffe2/CMakeLists.txt:503 (add_library):\r\n  No SOURCES given to target: caffe2_pybind11_state\r\n```"}
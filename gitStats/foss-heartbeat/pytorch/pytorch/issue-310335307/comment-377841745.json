{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/377841745", "html_url": "https://github.com/pytorch/pytorch/pull/6172#issuecomment-377841745", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6172", "id": 377841745, "node_id": "MDEyOklzc3VlQ29tbWVudDM3Nzg0MTc0NQ==", "user": {"login": "vishwakftw", "id": 23639302, "node_id": "MDQ6VXNlcjIzNjM5MzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/23639302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vishwakftw", "html_url": "https://github.com/vishwakftw", "followers_url": "https://api.github.com/users/vishwakftw/followers", "following_url": "https://api.github.com/users/vishwakftw/following{/other_user}", "gists_url": "https://api.github.com/users/vishwakftw/gists{/gist_id}", "starred_url": "https://api.github.com/users/vishwakftw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vishwakftw/subscriptions", "organizations_url": "https://api.github.com/users/vishwakftw/orgs", "repos_url": "https://api.github.com/users/vishwakftw/repos", "events_url": "https://api.github.com/users/vishwakftw/events{/privacy}", "received_events_url": "https://api.github.com/users/vishwakftw/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-02T02:47:57Z", "updated_at": "2018-04-02T02:47:57Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=648532\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fritzo\">@fritzo</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4736342\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fehiepsi\">@fehiepsi</a> There seems to be a problem in the <code>precision_matrix</code>. Sample code below:</p>\n<pre><code>&gt;&gt;&gt; import torch as t\n&gt;&gt;&gt; a = t.randn(4, 4)\n&gt;&gt;&gt; a = t.distributions.transform_to(t.distributions.constraints.lower_cholesky)(a)\n&gt;&gt;&gt; m = t.distributions.MultivariateNormal(loc=t.randn(4), scale_tril=a)\n&gt;&gt;&gt; m.covariance_matrix\n\n 1.9258  0.3293 -0.0941 -0.6035\n 0.3293  0.2726  0.0188  0.2138\n-0.0941  0.0188  0.1522  0.0935\n-0.6035  0.2138  0.0935  0.6917\n[torch.FloatTensor of size (4,4)]\n\n&gt;&gt;&gt; m.precision_matrix\n\n 2.1758 -0.1910 -0.0405 -0.0837\n-0.1910  0.6863  0.0517  0.1311\n-0.0405  0.0517  0.1432  0.0066\n-0.0837  0.1311  0.0066  0.0370\n[torch.FloatTensor of size (4,4)]\n\n&gt;&gt;&gt; m.covariance_matrix.mm(m.precision_matrix)\n\n 4.1817 -0.2260 -0.0785 -0.1410\n 0.6457  0.1532  0.0049  0.0162\n-0.2223  0.0510  0.0272  0.0148\n-1.4156  0.3575  0.0535  0.1048\n[torch.FloatTensor of size (4,4)]\n</code></pre>", "body_text": "@fritzo @fehiepsi There seems to be a problem in the precision_matrix. Sample code below:\n>>> import torch as t\n>>> a = t.randn(4, 4)\n>>> a = t.distributions.transform_to(t.distributions.constraints.lower_cholesky)(a)\n>>> m = t.distributions.MultivariateNormal(loc=t.randn(4), scale_tril=a)\n>>> m.covariance_matrix\n\n 1.9258  0.3293 -0.0941 -0.6035\n 0.3293  0.2726  0.0188  0.2138\n-0.0941  0.0188  0.1522  0.0935\n-0.6035  0.2138  0.0935  0.6917\n[torch.FloatTensor of size (4,4)]\n\n>>> m.precision_matrix\n\n 2.1758 -0.1910 -0.0405 -0.0837\n-0.1910  0.6863  0.0517  0.1311\n-0.0405  0.0517  0.1432  0.0066\n-0.0837  0.1311  0.0066  0.0370\n[torch.FloatTensor of size (4,4)]\n\n>>> m.covariance_matrix.mm(m.precision_matrix)\n\n 4.1817 -0.2260 -0.0785 -0.1410\n 0.6457  0.1532  0.0049  0.0162\n-0.2223  0.0510  0.0272  0.0148\n-1.4156  0.3575  0.0535  0.1048\n[torch.FloatTensor of size (4,4)]", "body": "@fritzo @fehiepsi There seems to be a problem in the `precision_matrix`. Sample code below:\r\n```\r\n>>> import torch as t\r\n>>> a = t.randn(4, 4)\r\n>>> a = t.distributions.transform_to(t.distributions.constraints.lower_cholesky)(a)\r\n>>> m = t.distributions.MultivariateNormal(loc=t.randn(4), scale_tril=a)\r\n>>> m.covariance_matrix\r\n\r\n 1.9258  0.3293 -0.0941 -0.6035\r\n 0.3293  0.2726  0.0188  0.2138\r\n-0.0941  0.0188  0.1522  0.0935\r\n-0.6035  0.2138  0.0935  0.6917\r\n[torch.FloatTensor of size (4,4)]\r\n\r\n>>> m.precision_matrix\r\n\r\n 2.1758 -0.1910 -0.0405 -0.0837\r\n-0.1910  0.6863  0.0517  0.1311\r\n-0.0405  0.0517  0.1432  0.0066\r\n-0.0837  0.1311  0.0066  0.0370\r\n[torch.FloatTensor of size (4,4)]\r\n\r\n>>> m.covariance_matrix.mm(m.precision_matrix)\r\n\r\n 4.1817 -0.2260 -0.0785 -0.1410\r\n 0.6457  0.1532  0.0049  0.0162\r\n-0.2223  0.0510  0.0272  0.0148\r\n-1.4156  0.3575  0.0535  0.1048\r\n[torch.FloatTensor of size (4,4)]\r\n```"}
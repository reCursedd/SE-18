{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6333", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6333/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6333/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6333/events", "html_url": "https://github.com/pytorch/pytorch/issues/6333", "id": 311839976, "node_id": "MDU6SXNzdWUzMTE4Mzk5NzY=", "number": 6333, "title": "test_nn fail with source build PyTorch 0.4 Google Cloud K80", "user": {"login": "subcomputes", "id": 32626926, "node_id": "MDQ6VXNlcjMyNjI2OTI2", "avatar_url": "https://avatars3.githubusercontent.com/u/32626926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subcomputes", "html_url": "https://github.com/subcomputes", "followers_url": "https://api.github.com/users/subcomputes/followers", "following_url": "https://api.github.com/users/subcomputes/following{/other_user}", "gists_url": "https://api.github.com/users/subcomputes/gists{/gist_id}", "starred_url": "https://api.github.com/users/subcomputes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subcomputes/subscriptions", "organizations_url": "https://api.github.com/users/subcomputes/orgs", "repos_url": "https://api.github.com/users/subcomputes/repos", "events_url": "https://api.github.com/users/subcomputes/events{/privacy}", "received_events_url": "https://api.github.com/users/subcomputes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-04-06T03:49:40Z", "updated_at": "2018-04-10T13:28:00Z", "closed_at": "2018-04-10T13:28:00Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a href=\"https://github.com/pytorch/pytorch/blob/master/test/test_nn.py\">test_nn.py</a> fails when running on google cloud standard compute image with K80 GPU</p>\n<ul>\n<li>OS: Ubuntu 16.04 LTS</li>\n<li>PyTorch version: 0.4.0a0+afdaf52</li>\n<li>How you installed PyTorch (conda, pip, source): source</li>\n<li>Python version: 3.6.4</li>\n<li>CUDA/cuDNN version: 9.1</li>\n<li>GPU models and configuration: K80 on google cloud</li>\n<li>GCC version (if compiling from source): 5.4.0</li>\n<li>CMake version: 3.9.4</li>\n<li>Build command you used (if compiling from source): python setup.py build develop</li>\n<li>Versions of any other relevant libraries: N/A</li>\n</ul>\n<p>Most python tests work, but 1 failure and 18 errors:</p>\n<pre><code>======================================================================\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in &lt;lambda&gt;\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in &lt;lambda&gt;\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_eval (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in &lt;lambda&gt;\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_eval_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in &lt;lambda&gt;\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_no_elementwise_affine (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in &lt;lambda&gt;\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_no_elementwise_affine_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in &lt;lambda&gt;\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_no_elementwise_affine_eval (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in &lt;lambda&gt;\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_no_elementwise_affine_eval_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in &lt;lambda&gt;\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in &lt;lambda&gt;\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in &lt;lambda&gt;\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_eval (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in &lt;lambda&gt;\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_eval_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in &lt;lambda&gt;\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_no_elementwise_affine (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in &lt;lambda&gt;\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_no_elementwise_affine_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in &lt;lambda&gt;\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_no_elementwise_affine_eval (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in &lt;lambda&gt;\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_no_elementwise_affine_eval_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in &lt;lambda&gt;\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_general (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1789, in test_LayerNorm_general\n    self._test_LayerNorm_general(torch.FloatTensor)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1764, in _test_LayerNorm_general\n    elementwise_affine=False, track_running_stats=True).type(type)\nTypeError: __init__() got an unexpected keyword argument 'momentum'\n\n======================================================================\nERROR: test_LayerNorm_general_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1793, in test_LayerNorm_general_cuda\n    self._test_LayerNorm_general(torch.cuda.FloatTensor)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1764, in _test_LayerNorm_general\n    elementwise_affine=False, track_running_stats=True).type(type)\nTypeError: __init__() got an unexpected keyword argument 'momentum'\n\n======================================================================\nFAIL: test_noncontig_conv_grad (__main__.TestNN) (dtype=&lt;class 'torch.HalfTensor'&gt;)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 65, in call_helper\n    f(self, *args, dtype=dtype)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 3735, in test_noncontig_conv_grad\n    self.assertEqual(result, input.grad.data)\n  File \"/home/subcompute/pytorch/test/common.py\", line 253, in assertEqual\n    assertTensorsEqual(x, y)\n  File \"/home/subcompute/pytorch/test/common.py\", line 245, in assertTensorsEqual\n    self.assertLessEqual(max_err, prec, message)\nAssertionError: \n1.00000e-04 *\n  9.7656\n[torch.cuda.HalfTensor of size () (GPU 0)]\n not less than or equal to 1e-05 : \n\n----------------------------------------------------------------------\nRan 1106 tests in 594.896s\n\nFAILED (failures=1, errors=18, skipped=25)\n</code></pre>", "body_text": "test_nn.py fails when running on google cloud standard compute image with K80 GPU\n\nOS: Ubuntu 16.04 LTS\nPyTorch version: 0.4.0a0+afdaf52\nHow you installed PyTorch (conda, pip, source): source\nPython version: 3.6.4\nCUDA/cuDNN version: 9.1\nGPU models and configuration: K80 on google cloud\nGCC version (if compiling from source): 5.4.0\nCMake version: 3.9.4\nBuild command you used (if compiling from source): python setup.py build develop\nVersions of any other relevant libraries: N/A\n\nMost python tests work, but 1 failure and 18 errors:\n======================================================================\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_eval (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_eval_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_no_elementwise_affine (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_no_elementwise_affine_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_no_elementwise_affine_eval (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_1d_no_elementwise_affine_eval_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_eval (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_eval_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_no_elementwise_affine (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_no_elementwise_affine_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_no_elementwise_affine_eval (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\n    module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_3d_no_elementwise_affine_eval_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\n    cpu_module = self.constructor(*self.constructor_args)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\n    cons = constructor(*args, **kwargs)\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\n\n======================================================================\nERROR: test_LayerNorm_general (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1789, in test_LayerNorm_general\n    self._test_LayerNorm_general(torch.FloatTensor)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1764, in _test_LayerNorm_general\n    elementwise_affine=False, track_running_stats=True).type(type)\nTypeError: __init__() got an unexpected keyword argument 'momentum'\n\n======================================================================\nERROR: test_LayerNorm_general_cuda (__main__.TestNN)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1793, in test_LayerNorm_general_cuda\n    self._test_LayerNorm_general(torch.cuda.FloatTensor)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1764, in _test_LayerNorm_general\n    elementwise_affine=False, track_running_stats=True).type(type)\nTypeError: __init__() got an unexpected keyword argument 'momentum'\n\n======================================================================\nFAIL: test_noncontig_conv_grad (__main__.TestNN) (dtype=<class 'torch.HalfTensor'>)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 65, in call_helper\n    f(self, *args, dtype=dtype)\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 3735, in test_noncontig_conv_grad\n    self.assertEqual(result, input.grad.data)\n  File \"/home/subcompute/pytorch/test/common.py\", line 253, in assertEqual\n    assertTensorsEqual(x, y)\n  File \"/home/subcompute/pytorch/test/common.py\", line 245, in assertTensorsEqual\n    self.assertLessEqual(max_err, prec, message)\nAssertionError: \n1.00000e-04 *\n  9.7656\n[torch.cuda.HalfTensor of size () (GPU 0)]\n not less than or equal to 1e-05 : \n\n----------------------------------------------------------------------\nRan 1106 tests in 594.896s\n\nFAILED (failures=1, errors=18, skipped=25)", "body": "[test_nn.py](https://github.com/pytorch/pytorch/blob/master/test/test_nn.py) fails when running on google cloud standard compute image with K80 GPU\r\n- OS: Ubuntu 16.04 LTS\r\n- PyTorch version: 0.4.0a0+afdaf52\r\n- How you installed PyTorch (conda, pip, source): source\r\n- Python version: 3.6.4\r\n- CUDA/cuDNN version: 9.1\r\n- GPU models and configuration: K80 on google cloud\r\n- GCC version (if compiling from source): 5.4.0\r\n- CMake version: 3.9.4\r\n- Build command you used (if compiling from source): python setup.py build develop\r\n- Versions of any other relevant libraries: N/A\r\n\r\nMost python tests work, but 1 failure and 18 errors:\r\n```\r\n======================================================================\r\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\r\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\r\n    module = self.constructor(*self.constructor_args)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\r\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\r\n    cpu_module = self.constructor(*self.constructor_args)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_eval (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\r\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\r\n    module = self.constructor(*self.constructor_args)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\r\n    cons = constructor(*args, **kwargs)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_1d_elementwise_affine_tracking_stats_eval_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\r\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\r\n    cpu_module = self.constructor(*self.constructor_args)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\r\n    cons = constructor(*args, **kwargs)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_1d_no_elementwise_affine (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\r\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\r\n    module = self.constructor(*self.constructor_args)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_1d_no_elementwise_affine_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\r\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\r\n    cpu_module = self.constructor(*self.constructor_args)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_1d_no_elementwise_affine_eval (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\r\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\r\n    module = self.constructor(*self.constructor_args)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\r\n    cons = constructor(*args, **kwargs)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_1d_no_elementwise_affine_eval_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\r\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\r\n    cpu_module = self.constructor(*self.constructor_args)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\r\n    cons = constructor(*args, **kwargs)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\r\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\r\n    module = self.constructor(*self.constructor_args)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\r\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\r\n    cpu_module = self.constructor(*self.constructor_args)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_eval (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\r\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\r\n    module = self.constructor(*self.constructor_args)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\r\n    cons = constructor(*args, **kwargs)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_3d_elementwise_affine_tracking_stats_eval_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\r\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\r\n    cpu_module = self.constructor(*self.constructor_args)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\r\n    cons = constructor(*args, **kwargs)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 6 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_3d_no_elementwise_affine (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\r\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\r\n    module = self.constructor(*self.constructor_args)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_3d_no_elementwise_affine_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\r\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\r\n    cpu_module = self.constructor(*self.constructor_args)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_3d_no_elementwise_affine_eval (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5066, in <lambda>\r\n    setattr(TestNN, test_name, lambda self, test=test: test(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 943, in __call__\r\n    module = self.constructor(*self.constructor_args)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\r\n    cons = constructor(*args, **kwargs)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_3d_no_elementwise_affine_eval_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 5078, in <lambda>\r\n    setattr(TestNN, cuda_test_name, lambda self, test=test: test.test_cuda(self))\r\n  File \"/home/subcompute/pytorch/test/common_nn.py\", line 1018, in test_cuda\r\n    cpu_module = self.constructor(*self.constructor_args)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 7011, in eval_constructor\r\n    cons = constructor(*args, **kwargs)\r\nTypeError: __init__() takes from 2 to 4 positional arguments but 5 were given\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_general (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1789, in test_LayerNorm_general\r\n    self._test_LayerNorm_general(torch.FloatTensor)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1764, in _test_LayerNorm_general\r\n    elementwise_affine=False, track_running_stats=True).type(type)\r\nTypeError: __init__() got an unexpected keyword argument 'momentum'\r\n\r\n======================================================================\r\nERROR: test_LayerNorm_general_cuda (__main__.TestNN)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1793, in test_LayerNorm_general_cuda\r\n    self._test_LayerNorm_general(torch.cuda.FloatTensor)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 1764, in _test_LayerNorm_general\r\n    elementwise_affine=False, track_running_stats=True).type(type)\r\nTypeError: __init__() got an unexpected keyword argument 'momentum'\r\n\r\n======================================================================\r\nFAIL: test_noncontig_conv_grad (__main__.TestNN) (dtype=<class 'torch.HalfTensor'>)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 65, in call_helper\r\n    f(self, *args, dtype=dtype)\r\n  File \"/home/subcompute/pytorch/test/test_nn.py\", line 3735, in test_noncontig_conv_grad\r\n    self.assertEqual(result, input.grad.data)\r\n  File \"/home/subcompute/pytorch/test/common.py\", line 253, in assertEqual\r\n    assertTensorsEqual(x, y)\r\n  File \"/home/subcompute/pytorch/test/common.py\", line 245, in assertTensorsEqual\r\n    self.assertLessEqual(max_err, prec, message)\r\nAssertionError: \r\n1.00000e-04 *\r\n  9.7656\r\n[torch.cuda.HalfTensor of size () (GPU 0)]\r\n not less than or equal to 1e-05 : \r\n\r\n----------------------------------------------------------------------\r\nRan 1106 tests in 594.896s\r\n\r\nFAILED (failures=1, errors=18, skipped=25)\r\n ```\r\n"}
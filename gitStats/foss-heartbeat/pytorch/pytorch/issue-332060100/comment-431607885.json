{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/431607885", "html_url": "https://github.com/pytorch/pytorch/issues/8430#issuecomment-431607885", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8430", "id": 431607885, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTYwNzg4NQ==", "user": {"login": "mojesty", "id": 11249214, "node_id": "MDQ6VXNlcjExMjQ5MjE0", "avatar_url": "https://avatars1.githubusercontent.com/u/11249214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mojesty", "html_url": "https://github.com/mojesty", "followers_url": "https://api.github.com/users/mojesty/followers", "following_url": "https://api.github.com/users/mojesty/following{/other_user}", "gists_url": "https://api.github.com/users/mojesty/gists{/gist_id}", "starred_url": "https://api.github.com/users/mojesty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mojesty/subscriptions", "organizations_url": "https://api.github.com/users/mojesty/orgs", "repos_url": "https://api.github.com/users/mojesty/repos", "events_url": "https://api.github.com/users/mojesty/events{/privacy}", "received_events_url": "https://api.github.com/users/mojesty/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-20T18:42:07Z", "updated_at": "2018-10-20T18:42:07Z", "author_association": "NONE", "body_html": "<p>Hello! I have the same issue when trying to load in <code>0.4.1.post2</code> model trained in <em>mayve</em> <code>0.3</code> (authors of the code didn't write requirements file so I have to infer version myself, but it is not 0.3 + because code still have Variables and volatiles).<br>\nIn my case, <code>getattr(model.state_dict(), '_metadata', None)</code> returned</p>\n<pre><code>OrderedDict([('', {'version': 1}),\n             ('drop', {'version': 1}),\n             ('idrop', {'version': 1}),\n             ('rdrop', {'version': 1}),\n             ('encoder', {'version': 1}),\n             ('parser', {'version': 1}),\n             ('parser.drop', {'version': 1}),\n             ('parser.gate', {'version': 1}),\n             ('parser.gate.0', {'version': 1}),\n             ('parser.gate.1', {'version': 1}),\n             ('parser.gate.2', {'version': 2}),\n             ('parser.gate.3', {'version': 1}),\n             ('parser.gate.4', {'version': 1}),\n             ('parser.gate.5', {'version': 1}),\n             ('parser.gate.6', {'version': 1}),\n             ('reader', {'version': 1}),\n             ('reader.0', {'version': 1}),\n             ('reader.0.drop', {'version': 1}),\n             ('reader.0.memory_rnn', {'version': 1}),\n             ('reader.0.memory_rnn.ih', {'version': 1}),\n             ('reader.0.memory_rnn.ih.0', {'version': 1}),\n             ('reader.0.memory_rnn.ih.1', {'version': 1}),\n             ('reader.0.memory_rnn.hh', {'version': 1}),\n             ('reader.0.memory_rnn.hh.0', {'version': 1}),\n             ('reader.0.memory_rnn.hh.1', {'version': 1}),\n             ('reader.0.memory_rnn.c_norm', {'version': 1}),\n             ('reader.0.memory_rnn.drop', {'version': 1}),\n             ('reader.0.projector_summ', {'version': 1}),\n             ('reader.0.projector_summ.0', {'version': 1}),\n             ('reader.0.projector_summ.1', {'version': 1}),\n             ('reader.0.projector_summ.2', {'version': 1}),\n             ('reader.1', {'version': 1}),\n             ('reader.1.drop', {'version': 1}),\n             ('reader.1.memory_rnn', {'version': 1}),\n             ('reader.1.memory_rnn.ih', {'version': 1}),\n             ('reader.1.memory_rnn.ih.0', {'version': 1}),\n             ('reader.1.memory_rnn.ih.1', {'version': 1}),\n             ('reader.1.memory_rnn.hh', {'version': 1}),\n             ('reader.1.memory_rnn.hh.0', {'version': 1}),\n             ('reader.1.memory_rnn.hh.1', {'version': 1}),\n             ('reader.1.memory_rnn.c_norm', {'version': 1}),\n             ('reader.1.memory_rnn.drop', {'version': 1}),\n             ('reader.1.projector_summ', {'version': 1}),\n             ('reader.1.projector_summ.0', {'version': 1}),\n             ('reader.1.projector_summ.1', {'version': 1}),\n             ('reader.1.projector_summ.2', {'version': 1}),\n             ('predictor', {'version': 1}),\n             ('predictor.drop', {'version': 1}),\n             ('predictor.projector_pred', {'version': 1}),\n             ('predictor.projector_pred.0', {'version': 1}),\n             ('predictor.projector_pred.1', {'version': 1}),\n             ('predictor.projector_pred.2', {'version': 1}),\n             ('predictor.ffd', {'version': 1}),\n             ('predictor.ffd.0', {'version': 1}),\n             ('predictor.ffd.1', {'version': 1}),\n             ('predictor.ffd.2', {'version': 2}),\n             ('predictor.ffd.3', {'version': 1}),\n             ('decoder', {'version': 1})])\n</code></pre>\n<p>and <code>list(model.state_dict().keys())</code> returned</p>\n<pre lang=\"['encoder.weight',\"><code> 'parser.gate.1.weight',\n 'parser.gate.1.bias',\n 'parser.gate.2.weight',\n 'parser.gate.2.bias',\n 'parser.gate.2.running_mean',\n 'parser.gate.2.running_var',\n 'parser.gate.5.weight',\n 'parser.gate.5.bias',\n 'reader.0.memory_rnn.ih.0.weight',\n 'reader.0.memory_rnn.ih.0.bias',\n 'reader.0.memory_rnn.ih.1.gamma',\n 'reader.0.memory_rnn.ih.1.beta',\n 'reader.0.memory_rnn.hh.0.weight',\n 'reader.0.memory_rnn.hh.0.bias',\n 'reader.0.memory_rnn.hh.1.gamma',\n 'reader.0.memory_rnn.hh.1.beta',\n 'reader.0.memory_rnn.c_norm.gamma',\n 'reader.0.memory_rnn.c_norm.beta',\n 'reader.0.projector_summ.1.weight',\n 'reader.0.projector_summ.1.bias',\n 'reader.1.memory_rnn.ih.0.weight',\n 'reader.1.memory_rnn.ih.0.bias',\n 'reader.1.memory_rnn.ih.1.gamma',\n 'reader.1.memory_rnn.ih.1.beta',\n 'reader.1.memory_rnn.hh.0.weight',\n 'reader.1.memory_rnn.hh.0.bias',\n 'reader.1.memory_rnn.hh.1.gamma',\n 'reader.1.memory_rnn.hh.1.beta',\n 'reader.1.memory_rnn.c_norm.gamma',\n 'reader.1.memory_rnn.c_norm.beta',\n 'reader.1.projector_summ.1.weight',\n 'reader.1.projector_summ.1.bias',\n 'predictor.projector_pred.1.weight',\n 'predictor.projector_pred.1.bias',\n 'predictor.ffd.1.weight',\n 'predictor.ffd.1.bias',\n 'predictor.ffd.2.weight',\n 'predictor.ffd.2.bias',\n 'predictor.ffd.2.running_mean',\n 'predictor.ffd.2.running_var',\n 'decoder.weight',\n 'decoder.bias']\n</code></pre>\n<p>maybe there is some work around to set this attribute in newer version of pyotrch without changing source code?</p>", "body_text": "Hello! I have the same issue when trying to load in 0.4.1.post2 model trained in mayve 0.3 (authors of the code didn't write requirements file so I have to infer version myself, but it is not 0.3 + because code still have Variables and volatiles).\nIn my case, getattr(model.state_dict(), '_metadata', None) returned\nOrderedDict([('', {'version': 1}),\n             ('drop', {'version': 1}),\n             ('idrop', {'version': 1}),\n             ('rdrop', {'version': 1}),\n             ('encoder', {'version': 1}),\n             ('parser', {'version': 1}),\n             ('parser.drop', {'version': 1}),\n             ('parser.gate', {'version': 1}),\n             ('parser.gate.0', {'version': 1}),\n             ('parser.gate.1', {'version': 1}),\n             ('parser.gate.2', {'version': 2}),\n             ('parser.gate.3', {'version': 1}),\n             ('parser.gate.4', {'version': 1}),\n             ('parser.gate.5', {'version': 1}),\n             ('parser.gate.6', {'version': 1}),\n             ('reader', {'version': 1}),\n             ('reader.0', {'version': 1}),\n             ('reader.0.drop', {'version': 1}),\n             ('reader.0.memory_rnn', {'version': 1}),\n             ('reader.0.memory_rnn.ih', {'version': 1}),\n             ('reader.0.memory_rnn.ih.0', {'version': 1}),\n             ('reader.0.memory_rnn.ih.1', {'version': 1}),\n             ('reader.0.memory_rnn.hh', {'version': 1}),\n             ('reader.0.memory_rnn.hh.0', {'version': 1}),\n             ('reader.0.memory_rnn.hh.1', {'version': 1}),\n             ('reader.0.memory_rnn.c_norm', {'version': 1}),\n             ('reader.0.memory_rnn.drop', {'version': 1}),\n             ('reader.0.projector_summ', {'version': 1}),\n             ('reader.0.projector_summ.0', {'version': 1}),\n             ('reader.0.projector_summ.1', {'version': 1}),\n             ('reader.0.projector_summ.2', {'version': 1}),\n             ('reader.1', {'version': 1}),\n             ('reader.1.drop', {'version': 1}),\n             ('reader.1.memory_rnn', {'version': 1}),\n             ('reader.1.memory_rnn.ih', {'version': 1}),\n             ('reader.1.memory_rnn.ih.0', {'version': 1}),\n             ('reader.1.memory_rnn.ih.1', {'version': 1}),\n             ('reader.1.memory_rnn.hh', {'version': 1}),\n             ('reader.1.memory_rnn.hh.0', {'version': 1}),\n             ('reader.1.memory_rnn.hh.1', {'version': 1}),\n             ('reader.1.memory_rnn.c_norm', {'version': 1}),\n             ('reader.1.memory_rnn.drop', {'version': 1}),\n             ('reader.1.projector_summ', {'version': 1}),\n             ('reader.1.projector_summ.0', {'version': 1}),\n             ('reader.1.projector_summ.1', {'version': 1}),\n             ('reader.1.projector_summ.2', {'version': 1}),\n             ('predictor', {'version': 1}),\n             ('predictor.drop', {'version': 1}),\n             ('predictor.projector_pred', {'version': 1}),\n             ('predictor.projector_pred.0', {'version': 1}),\n             ('predictor.projector_pred.1', {'version': 1}),\n             ('predictor.projector_pred.2', {'version': 1}),\n             ('predictor.ffd', {'version': 1}),\n             ('predictor.ffd.0', {'version': 1}),\n             ('predictor.ffd.1', {'version': 1}),\n             ('predictor.ffd.2', {'version': 2}),\n             ('predictor.ffd.3', {'version': 1}),\n             ('decoder', {'version': 1})])\n\nand list(model.state_dict().keys()) returned\n 'parser.gate.1.weight',\n 'parser.gate.1.bias',\n 'parser.gate.2.weight',\n 'parser.gate.2.bias',\n 'parser.gate.2.running_mean',\n 'parser.gate.2.running_var',\n 'parser.gate.5.weight',\n 'parser.gate.5.bias',\n 'reader.0.memory_rnn.ih.0.weight',\n 'reader.0.memory_rnn.ih.0.bias',\n 'reader.0.memory_rnn.ih.1.gamma',\n 'reader.0.memory_rnn.ih.1.beta',\n 'reader.0.memory_rnn.hh.0.weight',\n 'reader.0.memory_rnn.hh.0.bias',\n 'reader.0.memory_rnn.hh.1.gamma',\n 'reader.0.memory_rnn.hh.1.beta',\n 'reader.0.memory_rnn.c_norm.gamma',\n 'reader.0.memory_rnn.c_norm.beta',\n 'reader.0.projector_summ.1.weight',\n 'reader.0.projector_summ.1.bias',\n 'reader.1.memory_rnn.ih.0.weight',\n 'reader.1.memory_rnn.ih.0.bias',\n 'reader.1.memory_rnn.ih.1.gamma',\n 'reader.1.memory_rnn.ih.1.beta',\n 'reader.1.memory_rnn.hh.0.weight',\n 'reader.1.memory_rnn.hh.0.bias',\n 'reader.1.memory_rnn.hh.1.gamma',\n 'reader.1.memory_rnn.hh.1.beta',\n 'reader.1.memory_rnn.c_norm.gamma',\n 'reader.1.memory_rnn.c_norm.beta',\n 'reader.1.projector_summ.1.weight',\n 'reader.1.projector_summ.1.bias',\n 'predictor.projector_pred.1.weight',\n 'predictor.projector_pred.1.bias',\n 'predictor.ffd.1.weight',\n 'predictor.ffd.1.bias',\n 'predictor.ffd.2.weight',\n 'predictor.ffd.2.bias',\n 'predictor.ffd.2.running_mean',\n 'predictor.ffd.2.running_var',\n 'decoder.weight',\n 'decoder.bias']\n\nmaybe there is some work around to set this attribute in newer version of pyotrch without changing source code?", "body": "Hello! I have the same issue when trying to load in `0.4.1.post2` model trained in _mayve_ `0.3` (authors of the code didn't write requirements file so I have to infer version myself, but it is not 0.3 + because code still have Variables and volatiles).\r\nIn my case, `getattr(model.state_dict(), '_metadata', None)` returned \r\n```\r\nOrderedDict([('', {'version': 1}),\r\n             ('drop', {'version': 1}),\r\n             ('idrop', {'version': 1}),\r\n             ('rdrop', {'version': 1}),\r\n             ('encoder', {'version': 1}),\r\n             ('parser', {'version': 1}),\r\n             ('parser.drop', {'version': 1}),\r\n             ('parser.gate', {'version': 1}),\r\n             ('parser.gate.0', {'version': 1}),\r\n             ('parser.gate.1', {'version': 1}),\r\n             ('parser.gate.2', {'version': 2}),\r\n             ('parser.gate.3', {'version': 1}),\r\n             ('parser.gate.4', {'version': 1}),\r\n             ('parser.gate.5', {'version': 1}),\r\n             ('parser.gate.6', {'version': 1}),\r\n             ('reader', {'version': 1}),\r\n             ('reader.0', {'version': 1}),\r\n             ('reader.0.drop', {'version': 1}),\r\n             ('reader.0.memory_rnn', {'version': 1}),\r\n             ('reader.0.memory_rnn.ih', {'version': 1}),\r\n             ('reader.0.memory_rnn.ih.0', {'version': 1}),\r\n             ('reader.0.memory_rnn.ih.1', {'version': 1}),\r\n             ('reader.0.memory_rnn.hh', {'version': 1}),\r\n             ('reader.0.memory_rnn.hh.0', {'version': 1}),\r\n             ('reader.0.memory_rnn.hh.1', {'version': 1}),\r\n             ('reader.0.memory_rnn.c_norm', {'version': 1}),\r\n             ('reader.0.memory_rnn.drop', {'version': 1}),\r\n             ('reader.0.projector_summ', {'version': 1}),\r\n             ('reader.0.projector_summ.0', {'version': 1}),\r\n             ('reader.0.projector_summ.1', {'version': 1}),\r\n             ('reader.0.projector_summ.2', {'version': 1}),\r\n             ('reader.1', {'version': 1}),\r\n             ('reader.1.drop', {'version': 1}),\r\n             ('reader.1.memory_rnn', {'version': 1}),\r\n             ('reader.1.memory_rnn.ih', {'version': 1}),\r\n             ('reader.1.memory_rnn.ih.0', {'version': 1}),\r\n             ('reader.1.memory_rnn.ih.1', {'version': 1}),\r\n             ('reader.1.memory_rnn.hh', {'version': 1}),\r\n             ('reader.1.memory_rnn.hh.0', {'version': 1}),\r\n             ('reader.1.memory_rnn.hh.1', {'version': 1}),\r\n             ('reader.1.memory_rnn.c_norm', {'version': 1}),\r\n             ('reader.1.memory_rnn.drop', {'version': 1}),\r\n             ('reader.1.projector_summ', {'version': 1}),\r\n             ('reader.1.projector_summ.0', {'version': 1}),\r\n             ('reader.1.projector_summ.1', {'version': 1}),\r\n             ('reader.1.projector_summ.2', {'version': 1}),\r\n             ('predictor', {'version': 1}),\r\n             ('predictor.drop', {'version': 1}),\r\n             ('predictor.projector_pred', {'version': 1}),\r\n             ('predictor.projector_pred.0', {'version': 1}),\r\n             ('predictor.projector_pred.1', {'version': 1}),\r\n             ('predictor.projector_pred.2', {'version': 1}),\r\n             ('predictor.ffd', {'version': 1}),\r\n             ('predictor.ffd.0', {'version': 1}),\r\n             ('predictor.ffd.1', {'version': 1}),\r\n             ('predictor.ffd.2', {'version': 2}),\r\n             ('predictor.ffd.3', {'version': 1}),\r\n             ('decoder', {'version': 1})])\r\n```\r\nand `list(model.state_dict().keys())` returned \r\n```['encoder.weight',\r\n 'parser.gate.1.weight',\r\n 'parser.gate.1.bias',\r\n 'parser.gate.2.weight',\r\n 'parser.gate.2.bias',\r\n 'parser.gate.2.running_mean',\r\n 'parser.gate.2.running_var',\r\n 'parser.gate.5.weight',\r\n 'parser.gate.5.bias',\r\n 'reader.0.memory_rnn.ih.0.weight',\r\n 'reader.0.memory_rnn.ih.0.bias',\r\n 'reader.0.memory_rnn.ih.1.gamma',\r\n 'reader.0.memory_rnn.ih.1.beta',\r\n 'reader.0.memory_rnn.hh.0.weight',\r\n 'reader.0.memory_rnn.hh.0.bias',\r\n 'reader.0.memory_rnn.hh.1.gamma',\r\n 'reader.0.memory_rnn.hh.1.beta',\r\n 'reader.0.memory_rnn.c_norm.gamma',\r\n 'reader.0.memory_rnn.c_norm.beta',\r\n 'reader.0.projector_summ.1.weight',\r\n 'reader.0.projector_summ.1.bias',\r\n 'reader.1.memory_rnn.ih.0.weight',\r\n 'reader.1.memory_rnn.ih.0.bias',\r\n 'reader.1.memory_rnn.ih.1.gamma',\r\n 'reader.1.memory_rnn.ih.1.beta',\r\n 'reader.1.memory_rnn.hh.0.weight',\r\n 'reader.1.memory_rnn.hh.0.bias',\r\n 'reader.1.memory_rnn.hh.1.gamma',\r\n 'reader.1.memory_rnn.hh.1.beta',\r\n 'reader.1.memory_rnn.c_norm.gamma',\r\n 'reader.1.memory_rnn.c_norm.beta',\r\n 'reader.1.projector_summ.1.weight',\r\n 'reader.1.projector_summ.1.bias',\r\n 'predictor.projector_pred.1.weight',\r\n 'predictor.projector_pred.1.bias',\r\n 'predictor.ffd.1.weight',\r\n 'predictor.ffd.1.bias',\r\n 'predictor.ffd.2.weight',\r\n 'predictor.ffd.2.bias',\r\n 'predictor.ffd.2.running_mean',\r\n 'predictor.ffd.2.running_var',\r\n 'decoder.weight',\r\n 'decoder.bias']\r\n```\r\nmaybe there is some work around to set this attribute in newer version of pyotrch without changing source code?\r\n"}
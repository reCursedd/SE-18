{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/154691753", "pull_request_review_id": 80892157, "id": 154691753, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NDY5MTc1Mw==", "diff_hunk": "@@ -86,7 +244,13 @@ def link(self, target_desc, objects,\n                       export_symbols, debug, extra_preargs,\n                       extra_postargs, build_temp, target_lang)\n \n-        with patch(distutils.unixccompiler.UnixCCompiler, '_compile', _compile):\n-            with patch(distutils.unixccompiler.UnixCCompiler, 'link', link):\n-                with patch(self, 'force', True):\n-                    self._build_default(ext)\n+        if os.sys.platform == 'win32':\n+            with patch(distutils.msvccompiler.MSVCCompiler, 'compile', win_compile):", "path": "tools/setup_helpers/ninja_builder.py", "position": null, "original_position": 198, "commit_id": "369577127ba8c78cf42931b68058d83b3b647206", "original_commit_id": "0abfcb6c6694109d85f5cfa6d6c41757031fac53", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "body": "Consider reducing copy paste here by doing something like:\r\n\r\n```\r\nif os.sys.platform == 'win32':\r\n  compiler = distutils.msvccompiler.MSVCCompiler\r\n  new_compile, new_link = win_compile, win_link\r\nelse:\r\n  compiler = distutils.unixccompiler.UnixCCompiler\r\n  new_compile, new_link = unix_compile, new_link\r\n# ...etc..\r\n```", "created_at": "2017-12-04T16:04:57Z", "updated_at": "2018-11-23T15:37:02Z", "html_url": "https://github.com/pytorch/pytorch/pull/3993#discussion_r154691753", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/3993", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/154691753"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/3993#discussion_r154691753"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/3993"}}, "body_html": "<p>Consider reducing copy paste here by doing something like:</p>\n<pre><code>if os.sys.platform == 'win32':\n  compiler = distutils.msvccompiler.MSVCCompiler\n  new_compile, new_link = win_compile, win_link\nelse:\n  compiler = distutils.unixccompiler.UnixCCompiler\n  new_compile, new_link = unix_compile, new_link\n# ...etc..\n</code></pre>", "body_text": "Consider reducing copy paste here by doing something like:\nif os.sys.platform == 'win32':\n  compiler = distutils.msvccompiler.MSVCCompiler\n  new_compile, new_link = win_compile, win_link\nelse:\n  compiler = distutils.unixccompiler.UnixCCompiler\n  new_compile, new_link = unix_compile, new_link\n# ...etc.."}
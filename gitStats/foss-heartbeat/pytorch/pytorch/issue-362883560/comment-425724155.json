{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/425724155", "html_url": "https://github.com/pytorch/pytorch/issues/11981#issuecomment-425724155", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/11981", "id": 425724155, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTcyNDE1NQ==", "user": {"login": "khurramHazen", "id": 29463157, "node_id": "MDQ6VXNlcjI5NDYzMTU3", "avatar_url": "https://avatars2.githubusercontent.com/u/29463157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/khurramHazen", "html_url": "https://github.com/khurramHazen", "followers_url": "https://api.github.com/users/khurramHazen/followers", "following_url": "https://api.github.com/users/khurramHazen/following{/other_user}", "gists_url": "https://api.github.com/users/khurramHazen/gists{/gist_id}", "starred_url": "https://api.github.com/users/khurramHazen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/khurramHazen/subscriptions", "organizations_url": "https://api.github.com/users/khurramHazen/orgs", "repos_url": "https://api.github.com/users/khurramHazen/repos", "events_url": "https://api.github.com/users/khurramHazen/events{/privacy}", "received_events_url": "https://api.github.com/users/khurramHazen/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-30T14:21:02Z", "updated_at": "2018-09-30T14:26:24Z", "author_association": "NONE", "body_html": "<p>I am having the exact same issue.<br>\n<strong>Platform</strong>: <code>nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04</code><br>\nPyTorch compiled from master using the provided Dockerfile script.<br>\nONNX and ONNX-Caffe2 installed via conda<br>\n<code>conda install -c ezyang onnx onnx-caffe2</code></p>\n<pre><code>&gt;&gt; conda list\n...\nonnx                      0.2.1            py36h7954c55_1    ezyang\nonnx-caffe2               0.2.1            py36h71a8c3b_1    ezyang\n...\ntorch                     1.0.0a0+21ed7e5           &lt;pip&gt;\ntorchvision               0.2.1                     &lt;pip&gt;\n</code></pre>\n<p><strong>Error</strong><br>\n<code>UserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist</code></p>\n<p><strong>Log output</strong></p>\n<pre><code># python super_resolution_with_caffe2.py                                 \nDownloading: \"https://s3.amazonaws.com/pytorch/test_data/export/superres_epoch100-44c6958e.pth\" to /root/.torch/models/superres_epoch100-44c6958e.pth\n100%|##################################################################| 239691/239691 [00:00&lt;00:00, 347694.80it/s]\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist\n  .format(op_name, op_name))\nTraceback (most recent call last):\n  File \"super_resolution_with_caffe2.py\", line 116, in &lt;module&gt;\n    export_params=True)      # store the trained parameter weights inside the model file\n  File \"/opt/conda/lib/python3.6/site-packages/torch/onnx/__init__.py\", line 22, in _export\n    return utils._export(*args, **kwargs)\n  File \"/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py\", line 286, in _export\n    proto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)\nRuntimeError: ONNX export failed: Couldn't export operator aten::pixel_shuffle\n\nDefined at:\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/pixelshuffle.py(40): forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(475): __call__\nsuper_resolution_with_caffe2.py(63): forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(475): __call__\n/opt/conda/lib/python3.6/site-packages/torch/jit/__init__.py(146): forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(477): __call__\n/opt/conda/lib/python3.6/site-packages/torch/jit/__init__.py(115): get_trace_graph\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(223): _model_to_graph\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(280): _export\n/opt/conda/lib/python3.6/site-packages/torch/onnx/__init__.py(22): _export\nsuper_resolution_with_caffe2.py(116): &lt;module&gt;\n\n\nGraph we tried to export:\ngraph(%0 : Float(1, 1, 224, 224)\n      %1 : Float(64, 1, 5, 5)\n      %2 : Float(64)\n      %3 : Float(64, 64, 3, 3)\n      %4 : Float(64)\n      %5 : Float(32, 64, 3, 3)\n      %6 : Float(32)\n      %7 : Float(9, 32, 3, 3)\n      %8 : Float(9)) {\n  %9 : Float(1, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[5, 5], pads=[2, 2, 2, 2], strides=[1, 1]](%0, %1, %2), scope: SuperResolutionNet/Conv2d[conv1]\n  %10 : Float(1, 64, 224, 224) = onnx::Relu(%9), scope: SuperResolutionNet/ReLU[relu]\n  %11 : Float(1, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%10, %3, %4), scope: SuperResolutionNet/Conv2d[conv2]\n  %12 : Float(1, 64, 224, 224) = onnx::Relu(%11), scope: SuperResolutionNet/ReLU[relu]\n  %13 : Float(1, 32, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%12, %5, %6), scope: SuperResolutionNet/Conv2d[conv3]\n  %14 : Float(1, 32, 224, 224) = onnx::Relu(%13), scope: SuperResolutionNet/ReLU[relu]\n  %15 : Float(1, 9, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%14, %7, %8), scope: SuperResolutionNet/Conv2d[conv4]\n  %16 : Long() = onnx::Constant[value={3}]()\n  %17 : Float(1, 1, 672, 672) = aten::pixel_shuffle(%15, %16), scope: SuperResolutionNet/PixelShuffle[pixel_shuffle]\n  return (%17);\n}\n</code></pre>", "body_text": "I am having the exact same issue.\nPlatform: nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nPyTorch compiled from master using the provided Dockerfile script.\nONNX and ONNX-Caffe2 installed via conda\nconda install -c ezyang onnx onnx-caffe2\n>> conda list\n...\nonnx                      0.2.1            py36h7954c55_1    ezyang\nonnx-caffe2               0.2.1            py36h71a8c3b_1    ezyang\n...\ntorch                     1.0.0a0+21ed7e5           <pip>\ntorchvision               0.2.1                     <pip>\n\nError\nUserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist\nLog output\n# python super_resolution_with_caffe2.py                                 \nDownloading: \"https://s3.amazonaws.com/pytorch/test_data/export/superres_epoch100-44c6958e.pth\" to /root/.torch/models/superres_epoch100-44c6958e.pth\n100%|##################################################################| 239691/239691 [00:00<00:00, 347694.80it/s]\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist\n  .format(op_name, op_name))\nTraceback (most recent call last):\n  File \"super_resolution_with_caffe2.py\", line 116, in <module>\n    export_params=True)      # store the trained parameter weights inside the model file\n  File \"/opt/conda/lib/python3.6/site-packages/torch/onnx/__init__.py\", line 22, in _export\n    return utils._export(*args, **kwargs)\n  File \"/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py\", line 286, in _export\n    proto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)\nRuntimeError: ONNX export failed: Couldn't export operator aten::pixel_shuffle\n\nDefined at:\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/pixelshuffle.py(40): forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(475): __call__\nsuper_resolution_with_caffe2.py(63): forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(475): __call__\n/opt/conda/lib/python3.6/site-packages/torch/jit/__init__.py(146): forward\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(477): __call__\n/opt/conda/lib/python3.6/site-packages/torch/jit/__init__.py(115): get_trace_graph\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(223): _model_to_graph\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(280): _export\n/opt/conda/lib/python3.6/site-packages/torch/onnx/__init__.py(22): _export\nsuper_resolution_with_caffe2.py(116): <module>\n\n\nGraph we tried to export:\ngraph(%0 : Float(1, 1, 224, 224)\n      %1 : Float(64, 1, 5, 5)\n      %2 : Float(64)\n      %3 : Float(64, 64, 3, 3)\n      %4 : Float(64)\n      %5 : Float(32, 64, 3, 3)\n      %6 : Float(32)\n      %7 : Float(9, 32, 3, 3)\n      %8 : Float(9)) {\n  %9 : Float(1, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[5, 5], pads=[2, 2, 2, 2], strides=[1, 1]](%0, %1, %2), scope: SuperResolutionNet/Conv2d[conv1]\n  %10 : Float(1, 64, 224, 224) = onnx::Relu(%9), scope: SuperResolutionNet/ReLU[relu]\n  %11 : Float(1, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%10, %3, %4), scope: SuperResolutionNet/Conv2d[conv2]\n  %12 : Float(1, 64, 224, 224) = onnx::Relu(%11), scope: SuperResolutionNet/ReLU[relu]\n  %13 : Float(1, 32, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%12, %5, %6), scope: SuperResolutionNet/Conv2d[conv3]\n  %14 : Float(1, 32, 224, 224) = onnx::Relu(%13), scope: SuperResolutionNet/ReLU[relu]\n  %15 : Float(1, 9, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%14, %7, %8), scope: SuperResolutionNet/Conv2d[conv4]\n  %16 : Long() = onnx::Constant[value={3}]()\n  %17 : Float(1, 1, 672, 672) = aten::pixel_shuffle(%15, %16), scope: SuperResolutionNet/PixelShuffle[pixel_shuffle]\n  return (%17);\n}", "body": "I am having the exact same issue.\r\n**Platform**: `nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04`\r\nPyTorch compiled from master using the provided Dockerfile script.\r\nONNX and ONNX-Caffe2 installed via conda\r\n`conda install -c ezyang onnx onnx-caffe2`\r\n\r\n```\r\n>> conda list\r\n...\r\nonnx                      0.2.1            py36h7954c55_1    ezyang\r\nonnx-caffe2               0.2.1            py36h71a8c3b_1    ezyang\r\n...\r\ntorch                     1.0.0a0+21ed7e5           <pip>\r\ntorchvision               0.2.1                     <pip>\r\n```\r\n\r\n**Error**\r\n`UserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist`\r\n\r\n**Log output**\r\n```\r\n# python super_resolution_with_caffe2.py                                 \r\nDownloading: \"https://s3.amazonaws.com/pytorch/test_data/export/superres_epoch100-44c6958e.pth\" to /root/.torch/models/superres_epoch100-44c6958e.pth\r\n100%|##################################################################| 239691/239691 [00:00<00:00, 347694.80it/s]\r\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist\r\n  .format(op_name, op_name))\r\nTraceback (most recent call last):\r\n  File \"super_resolution_with_caffe2.py\", line 116, in <module>\r\n    export_params=True)      # store the trained parameter weights inside the model file\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/onnx/__init__.py\", line 22, in _export\r\n    return utils._export(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py\", line 286, in _export\r\n    proto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)\r\nRuntimeError: ONNX export failed: Couldn't export operator aten::pixel_shuffle\r\n\r\nDefined at:\r\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/pixelshuffle.py(40): forward\r\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\r\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(475): __call__\r\nsuper_resolution_with_caffe2.py(63): forward\r\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\r\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(475): __call__\r\n/opt/conda/lib/python3.6/site-packages/torch/jit/__init__.py(146): forward\r\n/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py(477): __call__\r\n/opt/conda/lib/python3.6/site-packages/torch/jit/__init__.py(115): get_trace_graph\r\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model\r\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(223): _model_to_graph\r\n/opt/conda/lib/python3.6/site-packages/torch/onnx/utils.py(280): _export\r\n/opt/conda/lib/python3.6/site-packages/torch/onnx/__init__.py(22): _export\r\nsuper_resolution_with_caffe2.py(116): <module>\r\n\r\n\r\nGraph we tried to export:\r\ngraph(%0 : Float(1, 1, 224, 224)\r\n      %1 : Float(64, 1, 5, 5)\r\n      %2 : Float(64)\r\n      %3 : Float(64, 64, 3, 3)\r\n      %4 : Float(64)\r\n      %5 : Float(32, 64, 3, 3)\r\n      %6 : Float(32)\r\n      %7 : Float(9, 32, 3, 3)\r\n      %8 : Float(9)) {\r\n  %9 : Float(1, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[5, 5], pads=[2, 2, 2, 2], strides=[1, 1]](%0, %1, %2), scope: SuperResolutionNet/Conv2d[conv1]\r\n  %10 : Float(1, 64, 224, 224) = onnx::Relu(%9), scope: SuperResolutionNet/ReLU[relu]\r\n  %11 : Float(1, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%10, %3, %4), scope: SuperResolutionNet/Conv2d[conv2]\r\n  %12 : Float(1, 64, 224, 224) = onnx::Relu(%11), scope: SuperResolutionNet/ReLU[relu]\r\n  %13 : Float(1, 32, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%12, %5, %6), scope: SuperResolutionNet/Conv2d[conv3]\r\n  %14 : Float(1, 32, 224, 224) = onnx::Relu(%13), scope: SuperResolutionNet/ReLU[relu]\r\n  %15 : Float(1, 9, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%14, %7, %8), scope: SuperResolutionNet/Conv2d[conv4]\r\n  %16 : Long() = onnx::Constant[value={3}]()\r\n  %17 : Float(1, 1, 672, 672) = aten::pixel_shuffle(%15, %16), scope: SuperResolutionNet/PixelShuffle[pixel_shuffle]\r\n  return (%17);\r\n}\r\n```"}
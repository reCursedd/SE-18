{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11981", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11981/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11981/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11981/events", "html_url": "https://github.com/pytorch/pytorch/issues/11981", "id": 362883560, "node_id": "MDU6SXNzdWUzNjI4ODM1NjA=", "number": 11981, "title": "RuntimeError: ONNX export failed: Couldn't export operator aten::pixel_shuffle", "user": {"login": "phalexo", "id": 4603365, "node_id": "MDQ6VXNlcjQ2MDMzNjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/4603365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phalexo", "html_url": "https://github.com/phalexo", "followers_url": "https://api.github.com/users/phalexo/followers", "following_url": "https://api.github.com/users/phalexo/following{/other_user}", "gists_url": "https://api.github.com/users/phalexo/gists{/gist_id}", "starred_url": "https://api.github.com/users/phalexo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phalexo/subscriptions", "organizations_url": "https://api.github.com/users/phalexo/orgs", "repos_url": "https://api.github.com/users/phalexo/repos", "events_url": "https://api.github.com/users/phalexo/events{/privacy}", "received_events_url": "https://api.github.com/users/phalexo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 693805995, "node_id": "MDU6TGFiZWw2OTM4MDU5OTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/onnx", "name": "onnx", "color": "e99695", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-22T19:21:35Z", "updated_at": "2018-10-24T14:21:10Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>Ubuntu 14.04, CUDA 9.2, CUDNN 7.1.4, Python 3.6, PyTorch 1.0</p>\n<p>Trying out exporting to Caffe2 <a href=\"https://pytorch.org/tutorials/advanced/super_resolution_with_caffe2.html\" rel=\"nofollow\">https://pytorch.org/tutorials/advanced/super_resolution_with_caffe2.html</a></p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>x.shape<br>\ntorch.Size([64, 1, 224, 224])<br>\ntorch_out = torch.onnx._export(torch_model,             # model being run<br>\n...                                x,                       # model input (or a tuple for multiple inputs)<br>\n...                                \"super_resolution.onnx\", # where to save the model (can be a file or file-like object)<br>\n...                                export_params=True)      # store the trained</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist<br>\n.format(op_name, op_name))<br>\nTraceback (most recent call last):<br>\nFile \"\", line 4, in <br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/<strong>init</strong>.py\", line 22, in _export<br>\nreturn utils._export(*args, **kwargs)<br>\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py\", line 286, in _export<br>\nproto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)<br>\nRuntimeError: ONNX export failed: Couldn't export operator aten::pixel_shuffle</p>\n<p>Defined at:<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/pixelshuffle.py(40): forward<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(475): <strong>call</strong><br>\n/home/developer/examples-pytorch/super_resolution/model.py(23): forward<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(475): <strong>call</strong><br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/jit/<strong>init</strong>.py(146): forward<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(477): <strong>call</strong><br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/jit/<strong>init</strong>.py(115): get_trace_graph<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(223): _model_to_graph<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(280): _export<br>\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/<strong>init</strong>.py(22): _export<br>\n(4): </p>\n<p>Graph we tried to export:<br>\ngraph(%0 : Float(64, 1, 224, 224)<br>\n%1 : Float(64, 1, 5, 5)<br>\n%2 : Float(64)<br>\n%3 : Float(64, 64, 3, 3)<br>\n%4 : Float(64)<br>\n%5 : Float(32, 64, 3, 3)<br>\n%6 : Float(32)<br>\n%7 : Float(9, 32, 3, 3)<br>\n%8 : Float(9)) {<br>\n%9 : Float(64, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[5, 5], pads=[2, 2, 2, 2], strides=[1, 1]](%0, %1, %2), scope: Net/Conv2d[conv1]<br>\n%10 : Float(64, 64, 224, 224) = onnx::Relu(%9), scope: Net/ReLU[relu]<br>\n%11 : Float(64, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%10, %3, %4), scope: Net/Conv2d[conv2]<br>\n%12 : Float(64, 64, 224, 224) = onnx::Relu(%11), scope: Net/ReLU[relu]<br>\n%13 : Float(64, 32, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%12, %5, %6), scope: Net/Conv2d[conv3]<br>\n%14 : Float(64, 32, 224, 224) = onnx::Relu(%13), scope: Net/ReLU[relu]<br>\n%15 : Float(64, 9, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%14, %7, %8), scope: Net/Conv2d[conv4]<br>\n%16 : Long() = onnx::Constant<a href=\"\">value={3}</a><br>\n%17 : Float(64, 1, 672, 672) = aten::pixel_shuffle(%15, %16), scope: Net/PixelShuffle[pixel_shuffle]<br>\nreturn (%17);<br>\n}</p>", "body_text": "Ubuntu 14.04, CUDA 9.2, CUDNN 7.1.4, Python 3.6, PyTorch 1.0\nTrying out exporting to Caffe2 https://pytorch.org/tutorials/advanced/super_resolution_with_caffe2.html\n\n\n\nx.shape\ntorch.Size([64, 1, 224, 224])\ntorch_out = torch.onnx._export(torch_model,             # model being run\n...                                x,                       # model input (or a tuple for multiple inputs)\n...                                \"super_resolution.onnx\", # where to save the model (can be a file or file-like object)\n...                                export_params=True)      # store the trained\n\n\n\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist\n.format(op_name, op_name))\nTraceback (most recent call last):\nFile \"\", line 4, in \nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/init.py\", line 22, in _export\nreturn utils._export(*args, **kwargs)\nFile \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py\", line 286, in _export\nproto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)\nRuntimeError: ONNX export failed: Couldn't export operator aten::pixel_shuffle\nDefined at:\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/pixelshuffle.py(40): forward\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(475): call\n/home/developer/examples-pytorch/super_resolution/model.py(23): forward\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(475): call\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/jit/init.py(146): forward\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(477): call\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/jit/init.py(115): get_trace_graph\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(223): _model_to_graph\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(280): _export\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/init.py(22): _export\n(4): \nGraph we tried to export:\ngraph(%0 : Float(64, 1, 224, 224)\n%1 : Float(64, 1, 5, 5)\n%2 : Float(64)\n%3 : Float(64, 64, 3, 3)\n%4 : Float(64)\n%5 : Float(32, 64, 3, 3)\n%6 : Float(32)\n%7 : Float(9, 32, 3, 3)\n%8 : Float(9)) {\n%9 : Float(64, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[5, 5], pads=[2, 2, 2, 2], strides=[1, 1]](%0, %1, %2), scope: Net/Conv2d[conv1]\n%10 : Float(64, 64, 224, 224) = onnx::Relu(%9), scope: Net/ReLU[relu]\n%11 : Float(64, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%10, %3, %4), scope: Net/Conv2d[conv2]\n%12 : Float(64, 64, 224, 224) = onnx::Relu(%11), scope: Net/ReLU[relu]\n%13 : Float(64, 32, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%12, %5, %6), scope: Net/Conv2d[conv3]\n%14 : Float(64, 32, 224, 224) = onnx::Relu(%13), scope: Net/ReLU[relu]\n%15 : Float(64, 9, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%14, %7, %8), scope: Net/Conv2d[conv4]\n%16 : Long() = onnx::Constantvalue={3}\n%17 : Float(64, 1, 672, 672) = aten::pixel_shuffle(%15, %16), scope: Net/PixelShuffle[pixel_shuffle]\nreturn (%17);\n}", "body": "Ubuntu 14.04, CUDA 9.2, CUDNN 7.1.4, Python 3.6, PyTorch 1.0\r\n\r\nTrying out exporting to Caffe2 https://pytorch.org/tutorials/advanced/super_resolution_with_caffe2.html\r\n\r\n>>> x.shape\r\ntorch.Size([64, 1, 224, 224])\r\n>>> torch_out = torch.onnx._export(torch_model,             # model being run\r\n...                                x,                       # model input (or a tuple for multiple inputs)\r\n...                                \"super_resolution.onnx\", # where to save the model (can be a file or file-like object)\r\n...                                export_params=True)      # store the trained\r\n\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py:500: UserWarning: ONNX export failed on ATen operator pixel_shuffle because torch.onnx.symbolic.pixel_shuffle does not exist\r\n  .format(op_name, op_name))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 4, in <module>\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/__init__.py\", line 22, in _export\r\n    return utils._export(*args, **kwargs)\r\n  File \"/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py\", line 286, in _export\r\n    proto, export_map = graph.export(params, _onnx_opset_version, defer_weight_export, operator_export_type)\r\nRuntimeError: ONNX export failed: Couldn't export operator aten::pixel_shuffle\r\n\r\nDefined at:\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/pixelshuffle.py(40): forward\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(475): __call__\r\n/home/developer/examples-pytorch/super_resolution/model.py(23): forward\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(465): _slow_forward\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(475): __call__\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/jit/__init__.py(146): forward\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/nn/modules/module.py(477): __call__\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/jit/__init__.py(115): get_trace_graph\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(191): _trace_and_get_graph_from_model\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(223): _model_to_graph\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/utils.py(280): _export\r\n/home/developer/anaconda3/envs/pytorch/lib/python3.6/site-packages/torch/onnx/__init__.py(22): _export\r\n<stdin>(4): <module>\r\n\r\n\r\nGraph we tried to export:\r\ngraph(%0 : Float(64, 1, 224, 224)\r\n      %1 : Float(64, 1, 5, 5)\r\n      %2 : Float(64)\r\n      %3 : Float(64, 64, 3, 3)\r\n      %4 : Float(64)\r\n      %5 : Float(32, 64, 3, 3)\r\n      %6 : Float(32)\r\n      %7 : Float(9, 32, 3, 3)\r\n      %8 : Float(9)) {\r\n  %9 : Float(64, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[5, 5], pads=[2, 2, 2, 2], strides=[1, 1]](%0, %1, %2), scope: Net/Conv2d[conv1]\r\n  %10 : Float(64, 64, 224, 224) = onnx::Relu(%9), scope: Net/ReLU[relu]\r\n  %11 : Float(64, 64, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%10, %3, %4), scope: Net/Conv2d[conv2]\r\n  %12 : Float(64, 64, 224, 224) = onnx::Relu(%11), scope: Net/ReLU[relu]\r\n  %13 : Float(64, 32, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%12, %5, %6), scope: Net/Conv2d[conv3]\r\n  %14 : Float(64, 32, 224, 224) = onnx::Relu(%13), scope: Net/ReLU[relu]\r\n  %15 : Float(64, 9, 224, 224) = onnx::Conv[dilations=[1, 1], group=1, kernel_shape=[3, 3], pads=[1, 1, 1, 1], strides=[1, 1]](%14, %7, %8), scope: Net/Conv2d[conv4]\r\n  %16 : Long() = onnx::Constant[value={3}]()\r\n  %17 : Float(64, 1, 672, 672) = aten::pixel_shuffle(%15, %16), scope: Net/PixelShuffle[pixel_shuffle]\r\n  return (%17);\r\n}\r\n\r\n"}
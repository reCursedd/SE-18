{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/284194411", "html_url": "https://github.com/pytorch/pytorch/issues/921#issuecomment-284194411", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/921", "id": 284194411, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDE5NDQxMQ==", "user": {"login": "jekbradbury", "id": 11729078, "node_id": "MDQ6VXNlcjExNzI5MDc4", "avatar_url": "https://avatars2.githubusercontent.com/u/11729078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jekbradbury", "html_url": "https://github.com/jekbradbury", "followers_url": "https://api.github.com/users/jekbradbury/followers", "following_url": "https://api.github.com/users/jekbradbury/following{/other_user}", "gists_url": "https://api.github.com/users/jekbradbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/jekbradbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jekbradbury/subscriptions", "organizations_url": "https://api.github.com/users/jekbradbury/orgs", "repos_url": "https://api.github.com/users/jekbradbury/repos", "events_url": "https://api.github.com/users/jekbradbury/events{/privacy}", "received_events_url": "https://api.github.com/users/jekbradbury/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-05T00:03:58Z", "updated_at": "2017-03-05T00:03:58Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Unless you're doing something very unusual, you should be initializing <code>AuxNet</code>'s child <code>Linear</code> layer in <code>__init__</code> and not the forward pass. Otherwise you're creating a new module with independent, randomly-initialized weights with each forward pass -- so the <code>.weight</code> of this new <code>Linear</code> module isn't really a part of the stored parameter state (i.e., <code>state_dict</code>) of your model since it disappears each time.<br>\n(And if you are doing something unusual involving modules that can only be defined at runtime, you should probably look at the <code>nn.functional</code> interface)</p>", "body_text": "Unless you're doing something very unusual, you should be initializing AuxNet's child Linear layer in __init__ and not the forward pass. Otherwise you're creating a new module with independent, randomly-initialized weights with each forward pass -- so the .weight of this new Linear module isn't really a part of the stored parameter state (i.e., state_dict) of your model since it disappears each time.\n(And if you are doing something unusual involving modules that can only be defined at runtime, you should probably look at the nn.functional interface)", "body": "Unless you're doing something very unusual, you should be initializing `AuxNet`'s child `Linear` layer in `__init__` and not the forward pass. Otherwise you're creating a new module with independent, randomly-initialized weights with each forward pass -- so the `.weight` of this new `Linear` module isn't really a part of the stored parameter state (i.e., `state_dict`) of your model since it disappears each time.\r\n(And if you are doing something unusual involving modules that can only be defined at runtime, you should probably look at the `nn.functional` interface)"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11203", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11203/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11203/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11203/events", "html_url": "https://github.com/pytorch/pytorch/issues/11203", "id": 356570303, "node_id": "MDU6SXNzdWUzNTY1NzAzMDM=", "number": 11203, "title": "Windows 10 Build Error - caffe2_gpu", "user": {"login": "nwsterling", "id": 8649725, "node_id": "MDQ6VXNlcjg2NDk3MjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/8649725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nwsterling", "html_url": "https://github.com/nwsterling", "followers_url": "https://api.github.com/users/nwsterling/followers", "following_url": "https://api.github.com/users/nwsterling/following{/other_user}", "gists_url": "https://api.github.com/users/nwsterling/gists{/gist_id}", "starred_url": "https://api.github.com/users/nwsterling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nwsterling/subscriptions", "organizations_url": "https://api.github.com/users/nwsterling/orgs", "repos_url": "https://api.github.com/users/nwsterling/repos", "events_url": "https://api.github.com/users/nwsterling/events{/privacy}", "received_events_url": "https://api.github.com/users/nwsterling/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 790080431, "node_id": "MDU6TGFiZWw3OTAwODA0MzE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/windows", "name": "windows", "color": "fcff6b", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-09-03T17:28:22Z", "updated_at": "2018-09-24T03:47:08Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>Hello. I have been trying to build pytorch on Windows 10 Pro for about a week. I am really hitting a wall, and not sure how to proceed. I would appreciate so much any pointers that someone could give me. Here is my set of commands and output....</p>\n<p>INPUT</p>\n<p>set \"VS150COMNTOOLS=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Auxiliary\\Build\"<br>\nset CMAKE_GENERATOR=Visual Studio 15 2017 Win64<br>\nset DISTUTILS_USE_SDK=1<br>\nREM The following two lines are needed for Python 2.7, but the support for it is very experimental.<br>\nset MSSdk=1<br>\nset FORCE_PY27_BUILD=1<br>\nREM As for CUDA 8, VS2015 Update 3 is also required to build PyTorch. Use the following two lines.<br>\nset \"PREBUILD_COMMAND=%VS140COMNTOOLS%....\\VC\\vcvarsall.bat\"<br>\nset PREBUILD_COMMAND_ARGS=x64</p>\n<p>call \"%VS150COMNTOOLS%\\vcvarsall.bat\" x64 -vcvars_ver=14.15<br>\npython setup.py install</p>\n<p>OUTPUT<br>\n...</p>\n<p>C:/Development/workspaces/repos/pytorch/aten/src/ATen/native/cuda/SpectralOps.cu(288): warning : dllexport/dllimpo<br>\nrt conflict with \"at::native::_fft_cufft\" [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]</p>\n<p>\"c:\\Development\\workspaces\\repos\\pytorch\\build\\INSTALL.vcxproj\" (default target) (1) -&gt;<br>\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\ALL_BUILD.vcxproj\" (default target) (3) -&gt;<br>\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\apply_test.vcxproj\" (default target) (4) -&gt;<br>\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj\" (default target) (18) -&gt;<br>\n(CustomBuild target) -&gt;<br>\nC:/Development/workspaces/repos/pytorch/aten/src\\ATen/core/ArrayRef.h(152): error : cannot use an entity undefined<br>\nin device code [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]<br>\nC:/Development/workspaces/repos/pytorch/aten/src\\ATen/core/ArrayRef.h(152): error : identifier \"Typeinfo for ::at<br>\n::Error\" is undefined in device code [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]<br>\nError : Internal Compiler error (codegen): \"there was an error in verifying the lgenfe output!\" [C:\\Development\\wo<br>\nrkspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]</p>\n<p>11950 Warning(s)<br>\n3 Error(s)<br>\nTime Elapsed 01:56:37.06</p>\n<p>(py36) c:\\Development\\workspaces\\repos\\pytorch\\build&gt;IF ERRORLEVEL 1 exit 1<br>\nFailed to run 'tools\\build_pytorch_libs.bat --use-cuda --use-nnpack caffe2 libshm_windows'</p>", "body_text": "Hello. I have been trying to build pytorch on Windows 10 Pro for about a week. I am really hitting a wall, and not sure how to proceed. I would appreciate so much any pointers that someone could give me. Here is my set of commands and output....\nINPUT\nset \"VS150COMNTOOLS=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Auxiliary\\Build\"\nset CMAKE_GENERATOR=Visual Studio 15 2017 Win64\nset DISTUTILS_USE_SDK=1\nREM The following two lines are needed for Python 2.7, but the support for it is very experimental.\nset MSSdk=1\nset FORCE_PY27_BUILD=1\nREM As for CUDA 8, VS2015 Update 3 is also required to build PyTorch. Use the following two lines.\nset \"PREBUILD_COMMAND=%VS140COMNTOOLS%....\\VC\\vcvarsall.bat\"\nset PREBUILD_COMMAND_ARGS=x64\ncall \"%VS150COMNTOOLS%\\vcvarsall.bat\" x64 -vcvars_ver=14.15\npython setup.py install\nOUTPUT\n...\nC:/Development/workspaces/repos/pytorch/aten/src/ATen/native/cuda/SpectralOps.cu(288): warning : dllexport/dllimpo\nrt conflict with \"at::native::_fft_cufft\" [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\n\"c:\\Development\\workspaces\\repos\\pytorch\\build\\INSTALL.vcxproj\" (default target) (1) ->\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\ALL_BUILD.vcxproj\" (default target) (3) ->\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\apply_test.vcxproj\" (default target) (4) ->\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj\" (default target) (18) ->\n(CustomBuild target) ->\nC:/Development/workspaces/repos/pytorch/aten/src\\ATen/core/ArrayRef.h(152): error : cannot use an entity undefined\nin device code [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\nC:/Development/workspaces/repos/pytorch/aten/src\\ATen/core/ArrayRef.h(152): error : identifier \"Typeinfo for ::at\n::Error\" is undefined in device code [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\nError : Internal Compiler error (codegen): \"there was an error in verifying the lgenfe output!\" [C:\\Development\\wo\nrkspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\n11950 Warning(s)\n3 Error(s)\nTime Elapsed 01:56:37.06\n(py36) c:\\Development\\workspaces\\repos\\pytorch\\build>IF ERRORLEVEL 1 exit 1\nFailed to run 'tools\\build_pytorch_libs.bat --use-cuda --use-nnpack caffe2 libshm_windows'", "body": "Hello. I have been trying to build pytorch on Windows 10 Pro for about a week. I am really hitting a wall, and not sure how to proceed. I would appreciate so much any pointers that someone could give me. Here is my set of commands and output....\r\n\r\nINPUT\r\n\r\nset \"VS150COMNTOOLS=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Auxiliary\\Build\"\r\nset CMAKE_GENERATOR=Visual Studio 15 2017 Win64\r\nset DISTUTILS_USE_SDK=1\r\nREM The following two lines are needed for Python 2.7, but the support for it is very experimental.\r\nset MSSdk=1\r\nset FORCE_PY27_BUILD=1\r\nREM As for CUDA 8, VS2015 Update 3 is also required to build PyTorch. Use the following two lines.\r\nset \"PREBUILD_COMMAND=%VS140COMNTOOLS%....\\VC\\vcvarsall.bat\"\r\nset PREBUILD_COMMAND_ARGS=x64\r\n\r\ncall \"%VS150COMNTOOLS%\\vcvarsall.bat\" x64 -vcvars_ver=14.15\r\npython setup.py install\r\n\r\nOUTPUT\r\n...\r\n\r\nC:/Development/workspaces/repos/pytorch/aten/src/ATen/native/cuda/SpectralOps.cu(288): warning : dllexport/dllimpo\r\nrt conflict with \"at::native::_fft_cufft\" [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\r\n\r\n\"c:\\Development\\workspaces\\repos\\pytorch\\build\\INSTALL.vcxproj\" (default target) (1) ->\r\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\ALL_BUILD.vcxproj\" (default target) (3) ->\r\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\apply_test.vcxproj\" (default target) (4) ->\r\n\"C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj\" (default target) (18) ->\r\n(CustomBuild target) ->\r\nC:/Development/workspaces/repos/pytorch/aten/src\\ATen/core/ArrayRef.h(152): error : cannot use an entity undefined\r\nin device code [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\r\nC:/Development/workspaces/repos/pytorch/aten/src\\ATen/core/ArrayRef.h(152): error : identifier \"Typeinfo for ::at\r\n::Error\" is undefined in device code [C:\\Development\\workspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\r\nError : Internal Compiler error (codegen): \"there was an error in verifying the lgenfe output!\" [C:\\Development\\wo\r\nrkspaces\\repos\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj]\r\n\r\n11950 Warning(s)\r\n3 Error(s)\r\nTime Elapsed 01:56:37.06\r\n\r\n(py36) c:\\Development\\workspaces\\repos\\pytorch\\build>IF ERRORLEVEL 1 exit 1\r\nFailed to run 'tools\\build_pytorch_libs.bat --use-cuda --use-nnpack caffe2 libshm_windows'"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/423352988", "html_url": "https://github.com/pytorch/pytorch/pull/11579#issuecomment-423352988", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/11579", "id": 423352988, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzM1Mjk4OA==", "user": {"login": "avmgithub", "id": 9083746, "node_id": "MDQ6VXNlcjkwODM3NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/9083746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avmgithub", "html_url": "https://github.com/avmgithub", "followers_url": "https://api.github.com/users/avmgithub/followers", "following_url": "https://api.github.com/users/avmgithub/following{/other_user}", "gists_url": "https://api.github.com/users/avmgithub/gists{/gist_id}", "starred_url": "https://api.github.com/users/avmgithub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avmgithub/subscriptions", "organizations_url": "https://api.github.com/users/avmgithub/orgs", "repos_url": "https://api.github.com/users/avmgithub/repos", "events_url": "https://api.github.com/users/avmgithub/events{/privacy}", "received_events_url": "https://api.github.com/users/avmgithub/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-20T22:20:44Z", "updated_at": "2018-09-20T22:20:44Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5652049\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zou3519\">@zou3519</a> , I've attached 2 files , one for x86 and one ppc64le .  From a test run like : python -m unittest -q  test_jit.TestScript.test_milstm_fusion_cuda   .     There's differences in the sigmoid function. I'm assuming the graph is for the backward operation.   Here is an example:</p>\n<p>x86 :<br>\n%56 : Dynamic = aten::neg(%outgate)<br>\n%57 : Dynamic = aten::add(%56, %28, %28)<br>\n%58 : Dynamic = aten::mul(%34, %outgate)<br>\n%59 : Dynamic = aten::mul(%58, %57)</p>\n<p>ppc :<br>\n%56 : Dynamic = aten::mul(%34, %outgate)<br>\n%57 : Dynamic = aten::neg(%outgate)<br>\n%58 : Dynamic = aten::add(%57, %28, %28)<br>\n%59 : Dynamic = aten::mul(%56, %58)</p>\n<p>There are 3 such instances since there are three sigmoid functions in the MiLSTMCell  function in test_jit.py</p>", "body_text": "@zou3519 , I've attached 2 files , one for x86 and one ppc64le .  From a test run like : python -m unittest -q  test_jit.TestScript.test_milstm_fusion_cuda   .     There's differences in the sigmoid function. I'm assuming the graph is for the backward operation.   Here is an example:\nx86 :\n%56 : Dynamic = aten::neg(%outgate)\n%57 : Dynamic = aten::add(%56, %28, %28)\n%58 : Dynamic = aten::mul(%34, %outgate)\n%59 : Dynamic = aten::mul(%58, %57)\nppc :\n%56 : Dynamic = aten::mul(%34, %outgate)\n%57 : Dynamic = aten::neg(%outgate)\n%58 : Dynamic = aten::add(%57, %28, %28)\n%59 : Dynamic = aten::mul(%56, %58)\nThere are 3 such instances since there are three sigmoid functions in the MiLSTMCell  function in test_jit.py", "body": "@zou3519 , I've attached 2 files , one for x86 and one ppc64le .  From a test run like : python -m unittest -q  test_jit.TestScript.test_milstm_fusion_cuda   .     There's differences in the sigmoid function. I'm assuming the graph is for the backward operation.   Here is an example:\r\n\r\nx86 : \r\n%56 : Dynamic = aten::neg(%outgate)\r\n%57 : Dynamic = aten::add(%56, %28, %28)\r\n%58 : Dynamic = aten::mul(%34, %outgate)\r\n%59 : Dynamic = aten::mul(%58, %57)\r\n\r\nppc : \r\n%56 : Dynamic = aten::mul(%34, %outgate)\r\n%57 : Dynamic = aten::neg(%outgate)\r\n%58 : Dynamic = aten::add(%57, %28, %28)\r\n%59 : Dynamic = aten::mul(%56, %58)\r\n\r\nThere are 3 such instances since there are three sigmoid functions in the MiLSTMCell  function in test_jit.py\r\n\r\n\r\n"}
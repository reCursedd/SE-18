{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11978", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11978/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11978/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11978/events", "html_url": "https://github.com/pytorch/pytorch/issues/11978", "id": 362876336, "node_id": "MDU6SXNzdWUzNjI4NzYzMzY=", "number": 11978, "title": "[Caffe2] Attempting to install Caffe2 in Google Colab", "user": {"login": "alainray", "id": 7986848, "node_id": "MDQ6VXNlcjc5ODY4NDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/7986848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alainray", "html_url": "https://github.com/alainray", "followers_url": "https://api.github.com/users/alainray/followers", "following_url": "https://api.github.com/users/alainray/following{/other_user}", "gists_url": "https://api.github.com/users/alainray/gists{/gist_id}", "starred_url": "https://api.github.com/users/alainray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alainray/subscriptions", "organizations_url": "https://api.github.com/users/alainray/orgs", "repos_url": "https://api.github.com/users/alainray/repos", "events_url": "https://api.github.com/users/alainray/events{/privacy}", "received_events_url": "https://api.github.com/users/alainray/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-22T17:43:12Z", "updated_at": "2018-09-22T17:43:13Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>Hello, I'm trying to install Caffe2 in Google Colab so I can work with Detectron.<br>\nI've tried installing from Source however it takes too long (more than 2 hours) so it is impractical for Colab. Thus, I'm forced to install from binaries using Anaconda.</p>\n<p>I install anaconda without much issues.</p>\n<p><code>!bash ./Anaconda2-5.2.0-Linux-x86_64.sh</code></p>\n<p>However, I'm trying to follow the <a href=\"https://caffe2.ai/docs/faq.html#why-is-caffe2-not-working-as-expected-in-anaconda\" rel=\"nofollow\">recommendation</a> to install Caffe2 on a different environment than the base one.<br>\nI manage to create the environment just fine, however, trying to activate it does not work. In particular using: <code>source activate test_caffe2</code> seems to do nothing. So it seems that's out.</p>\n<p>So, I go and install Caffe2 using the base anaconda environment. First, I have to add some code to add the anaconda binaries to the PATH, as it seems the usual way to assign environmental variables in Colab seem to not work.</p>\n<pre><code>import os\nos.environ['PATH'] += \":/root/anaconda2/bin\"\n</code></pre>\n<p>Then installation as usual:<br>\n<code>conda install -c caffe2 caffe2-cuda9.0-cudnn7</code></p>\n<p>It installs without any issues. However, when trying to run the test code:</p>\n<pre><code># To check if Caffe2 build was successful\npython2 -c 'from caffe2.python import core'\n\n</code></pre>\n<p>It returns:</p>\n<pre><code>Traceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nImportError: No module named caffe2.python\n</code></pre>\n<p>I understand this is probably some PYTHONPATH <a href=\"https://github.com/facebookresearch/Detectron/blob/master/INSTALL.md#caffe2\">issue</a>, however, I can't seem to find the \"build\" folder in caffe2.<br>\nIf I search for caffe2 directory (<code>find / -type d -name 'caffe2'</code>)  after installing I only get the following results:</p>\n<pre><code>/root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/lib/python2.7/site-packages/caffe2\n/root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/include/caffe2\n/root/anaconda2/lib/python2.7/site-packages/caffe2\n/root/anaconda2/include/caffe2\n</code></pre>\n<p>If I search in the directories of each result I get:</p>\n<p>ls /root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/lib/python2.7/site-packages/caffe2:</p>\n<pre><code>contrib  distributed  __init__.py   perfkernels  python\ncore\t experiments  __init__.pyc  proto\n</code></pre>\n<p>ls /root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/include/caffe2:</p>\n<pre><code>contrib   distributed  mkl\t  onnx\t       predictor  sgd\t      video\ncore\t  experiments  mobile\t  operators    proto\t  share\ncuda_rtc  ideep        mpi\t  opt\t       python\t  transforms\ndb\t  image        observers  perfkernels  queue\t  utils\n</code></pre>\n<p>ls /root/anaconda2/lib/python2.7/site-packages/caffe2:</p>\n<pre><code>contrib  distributed  __init__.py   perfkernels  python\ncore\t experiments  __init__.pyc  proto\n</code></pre>\n<p>ls /root/anaconda2/include/caffe2:</p>\n<pre><code>contrib   distributed  mkl\t  onnx\t       predictor  sgd\t      video\ncore\t  experiments  mobile\t  operators    proto\t  share\ncuda_rtc  ideep        mpi\t  opt\t       python\t  transforms\ndb\t  image        observers  perfkernels  queue\t  utils\n</code></pre>\n<p>None of them has a build directory.</p>\n<p>So finally I have some questions:</p>\n<ul>\n<li><strong>Was the Caffe2 installation successful?</strong> I wonder given that I cannot find the 'build' directory.</li>\n<li><strong>Is this only a PYTHONPATH variable issue?</strong> If so, to which folder should I point it?</li>\n</ul>\n<p>I'm sorry if the question is noobish. But I'm a bit stuck. Thanks in advance!</p>\n<h3>System Settings</h3>\n<ul>\n<li>PyTorch or Caffe2: Caffe2</li>\n<li>How you installed PyTorch (conda, pip, source): conda</li>\n<li>Build command you used (if compiling from source):</li>\n<li>OS: Linux, whatever Colab's using.</li>\n<li>PyTorch version:</li>\n<li>Python version: 2.7</li>\n<li>CUDA/cuDNN version: 9.0 and 7.0</li>\n<li>GPU models and configuration:  Tesla K80</li>\n<li>GCC version (if compiling from source):</li>\n<li>CMake version:</li>\n<li>Versions of any other relevant libraries:</li>\n</ul>", "body_text": "Issue description\nHello, I'm trying to install Caffe2 in Google Colab so I can work with Detectron.\nI've tried installing from Source however it takes too long (more than 2 hours) so it is impractical for Colab. Thus, I'm forced to install from binaries using Anaconda.\nI install anaconda without much issues.\n!bash ./Anaconda2-5.2.0-Linux-x86_64.sh\nHowever, I'm trying to follow the recommendation to install Caffe2 on a different environment than the base one.\nI manage to create the environment just fine, however, trying to activate it does not work. In particular using: source activate test_caffe2 seems to do nothing. So it seems that's out.\nSo, I go and install Caffe2 using the base anaconda environment. First, I have to add some code to add the anaconda binaries to the PATH, as it seems the usual way to assign environmental variables in Colab seem to not work.\nimport os\nos.environ['PATH'] += \":/root/anaconda2/bin\"\n\nThen installation as usual:\nconda install -c caffe2 caffe2-cuda9.0-cudnn7\nIt installs without any issues. However, when trying to run the test code:\n# To check if Caffe2 build was successful\npython2 -c 'from caffe2.python import core'\n\n\nIt returns:\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\nImportError: No module named caffe2.python\n\nI understand this is probably some PYTHONPATH issue, however, I can't seem to find the \"build\" folder in caffe2.\nIf I search for caffe2 directory (find / -type d -name 'caffe2')  after installing I only get the following results:\n/root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/lib/python2.7/site-packages/caffe2\n/root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/include/caffe2\n/root/anaconda2/lib/python2.7/site-packages/caffe2\n/root/anaconda2/include/caffe2\n\nIf I search in the directories of each result I get:\nls /root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/lib/python2.7/site-packages/caffe2:\ncontrib  distributed  __init__.py   perfkernels  python\ncore\t experiments  __init__.pyc  proto\n\nls /root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/include/caffe2:\ncontrib   distributed  mkl\t  onnx\t       predictor  sgd\t      video\ncore\t  experiments  mobile\t  operators    proto\t  share\ncuda_rtc  ideep        mpi\t  opt\t       python\t  transforms\ndb\t  image        observers  perfkernels  queue\t  utils\n\nls /root/anaconda2/lib/python2.7/site-packages/caffe2:\ncontrib  distributed  __init__.py   perfkernels  python\ncore\t experiments  __init__.pyc  proto\n\nls /root/anaconda2/include/caffe2:\ncontrib   distributed  mkl\t  onnx\t       predictor  sgd\t      video\ncore\t  experiments  mobile\t  operators    proto\t  share\ncuda_rtc  ideep        mpi\t  opt\t       python\t  transforms\ndb\t  image        observers  perfkernels  queue\t  utils\n\nNone of them has a build directory.\nSo finally I have some questions:\n\nWas the Caffe2 installation successful? I wonder given that I cannot find the 'build' directory.\nIs this only a PYTHONPATH variable issue? If so, to which folder should I point it?\n\nI'm sorry if the question is noobish. But I'm a bit stuck. Thanks in advance!\nSystem Settings\n\nPyTorch or Caffe2: Caffe2\nHow you installed PyTorch (conda, pip, source): conda\nBuild command you used (if compiling from source):\nOS: Linux, whatever Colab's using.\nPyTorch version:\nPython version: 2.7\nCUDA/cuDNN version: 9.0 and 7.0\nGPU models and configuration:  Tesla K80\nGCC version (if compiling from source):\nCMake version:\nVersions of any other relevant libraries:", "body": "## Issue description\r\n\r\nHello, I'm trying to install Caffe2 in Google Colab so I can work with Detectron.\r\nI've tried installing from Source however it takes too long (more than 2 hours) so it is impractical for Colab. Thus, I'm forced to install from binaries using Anaconda.\r\n\r\nI install anaconda without much issues.\r\n\r\n`!bash ./Anaconda2-5.2.0-Linux-x86_64.sh`\r\n\r\nHowever, I'm trying to follow the [recommendation](https://caffe2.ai/docs/faq.html#why-is-caffe2-not-working-as-expected-in-anaconda) to install Caffe2 on a different environment than the base one.\r\nI manage to create the environment just fine, however, trying to activate it does not work. In particular using: `source activate test_caffe2` seems to do nothing. So it seems that's out.\r\n\r\nSo, I go and install Caffe2 using the base anaconda environment. First, I have to add some code to add the anaconda binaries to the PATH, as it seems the usual way to assign environmental variables in Colab seem to not work.\r\n```\r\nimport os\r\nos.environ['PATH'] += \":/root/anaconda2/bin\"\r\n```\r\nThen installation as usual:\r\n`conda install -c caffe2 caffe2-cuda9.0-cudnn7`\r\n\r\nIt installs without any issues. However, when trying to run the test code:\r\n```\r\n# To check if Caffe2 build was successful\r\npython2 -c 'from caffe2.python import core'\r\n\r\n```\r\nIt returns:\r\n```\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nImportError: No module named caffe2.python\r\n```\r\n\r\nI understand this is probably some PYTHONPATH [issue](https://github.com/facebookresearch/Detectron/blob/master/INSTALL.md#caffe2), however, I can't seem to find the \"build\" folder in caffe2.\r\nIf I search for caffe2 directory (`find / -type d -name 'caffe2'`)  after installing I only get the following results:\r\n```\r\n/root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/lib/python2.7/site-packages/caffe2\r\n/root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/include/caffe2\r\n/root/anaconda2/lib/python2.7/site-packages/caffe2\r\n/root/anaconda2/include/caffe2\r\n```\r\nIf I search in the directories of each result I get:\r\n\r\nls /root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/lib/python2.7/site-packages/caffe2:\r\n```\r\ncontrib  distributed  __init__.py   perfkernels  python\r\ncore\t experiments  __init__.pyc  proto\r\n```\r\nls /root/anaconda2/pkgs/caffe2-cuda9.0-cudnn7-0.8.dev-py27_2018.08.26/include/caffe2:\r\n```\r\ncontrib   distributed  mkl\t  onnx\t       predictor  sgd\t      video\r\ncore\t  experiments  mobile\t  operators    proto\t  share\r\ncuda_rtc  ideep        mpi\t  opt\t       python\t  transforms\r\ndb\t  image        observers  perfkernels  queue\t  utils\r\n```\r\nls /root/anaconda2/lib/python2.7/site-packages/caffe2:\r\n```\r\ncontrib  distributed  __init__.py   perfkernels  python\r\ncore\t experiments  __init__.pyc  proto\r\n```\r\nls /root/anaconda2/include/caffe2:\r\n```\r\ncontrib   distributed  mkl\t  onnx\t       predictor  sgd\t      video\r\ncore\t  experiments  mobile\t  operators    proto\t  share\r\ncuda_rtc  ideep        mpi\t  opt\t       python\t  transforms\r\ndb\t  image        observers  perfkernels  queue\t  utils\r\n```\r\nNone of them has a build directory.\r\n\r\nSo finally I have some questions:\r\n\r\n- **Was the Caffe2 installation successful?** I wonder given that I cannot find the 'build' directory.\r\n- **Is this only a PYTHONPATH variable issue?** If so, to which folder should I point it?\r\n\r\nI'm sorry if the question is noobish. But I'm a bit stuck. Thanks in advance!\r\n\r\n### System Settings\r\n\r\n- PyTorch or Caffe2: Caffe2\r\n- How you installed PyTorch (conda, pip, source): conda\r\n- Build command you used (if compiling from source):\r\n- OS: Linux, whatever Colab's using.\r\n- PyTorch version:\r\n- Python version: 2.7\r\n- CUDA/cuDNN version: 9.0 and 7.0\r\n- GPU models and configuration:  Tesla K80\r\n- GCC version (if compiling from source):\r\n- CMake version:\r\n- Versions of any other relevant libraries:\r\n"}
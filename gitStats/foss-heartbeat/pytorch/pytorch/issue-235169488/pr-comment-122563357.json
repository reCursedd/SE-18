{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/122563357", "pull_request_review_id": 44695345, "id": 122563357, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMjU2MzM1Nw==", "diff_hunk": "@@ -547,6 +547,22 @@ def nll_loss(input, target, weight=None, size_average=True):\n     return f(input, target)\n \n \n+def poisson_nll_loss(log_input, target, size_average=True):\n+    r\"\"\"Poisson negative log likelihood loss.\n+\n+    Drops :math:`log(target!)` term. See :class:`~torch.nn.PoissonNLLLoss` for details.\n+\n+    Args:\n+        log_input: :math:`log(input)`\n+        target: :math:`target \\sim Pois(input)`\n+    \"\"\"\n+    loss = torch.exp(log_input) - target * log_input", "path": "torch/nn/functional.py", "position": null, "original_position": 13, "commit_id": "e25e166720fb43a89f40f671d8b3267c0881c093", "original_commit_id": "cae7d3088d7899a139f461ba39e8cd4b9579b8e0", "user": {"login": "vlasenkov", "id": 13369474, "node_id": "MDQ6VXNlcjEzMzY5NDc0", "avatar_url": "https://avatars3.githubusercontent.com/u/13369474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlasenkov", "html_url": "https://github.com/vlasenkov", "followers_url": "https://api.github.com/users/vlasenkov/followers", "following_url": "https://api.github.com/users/vlasenkov/following{/other_user}", "gists_url": "https://api.github.com/users/vlasenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlasenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlasenkov/subscriptions", "organizations_url": "https://api.github.com/users/vlasenkov/orgs", "repos_url": "https://api.github.com/users/vlasenkov/repos", "events_url": "https://api.github.com/users/vlasenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/vlasenkov/received_events", "type": "User", "site_admin": false}, "body": "I could do it, but this seems to have very restricted usage. The approximation requires evaluation of `log(target)`, but `target` for poissonian processes often happens to be zero. \r\nBy the way probably we should add two losses? One is ordinary `PoissonNLLLoss` (without `log(input)`) and the other is `LogPoissonNLLLoss` which is current implementation", "created_at": "2017-06-17T07:33:24Z", "updated_at": "2018-11-23T15:33:55Z", "html_url": "https://github.com/pytorch/pytorch/pull/1779#discussion_r122563357", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/1779", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/122563357"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/1779#discussion_r122563357"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/1779"}}, "body_html": "<p>I could do it, but this seems to have very restricted usage. The approximation requires evaluation of <code>log(target)</code>, but <code>target</code> for poissonian processes often happens to be zero.<br>\nBy the way probably we should add two losses? One is ordinary <code>PoissonNLLLoss</code> (without <code>log(input)</code>) and the other is <code>LogPoissonNLLLoss</code> which is current implementation</p>", "body_text": "I could do it, but this seems to have very restricted usage. The approximation requires evaluation of log(target), but target for poissonian processes often happens to be zero.\nBy the way probably we should add two losses? One is ordinary PoissonNLLLoss (without log(input)) and the other is LogPoissonNLLLoss which is current implementation", "in_reply_to_id": 122468298}
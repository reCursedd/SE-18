{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/153931595", "pull_request_review_id": 80016727, "id": 153931595, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MzkzMTU5NQ==", "diff_hunk": "@@ -28,8 +28,14 @@\n static void HANDLER_NAME(int sig, siginfo_t *info, void *ctx)                 \\\n {                                                                             \\\n   write(STDERR_FILENO, ERROR_MSG, sizeof(ERROR_MSG) / sizeof(char));          \\\n-  signal(SIGNAL, SIG_DFL);                                                    \\\n-  raise(SIGNAL);                                                              \\\n+  struct sigaction sa;                                                        \\\n+  sa.sa_handler = SIG_DFL;                                                    \\\n+  sa.sa_flags = 0;                                                            \\\n+  if (sigemptyset(&sa.sa_mask) != 0 || sigaction(SIGNAL, &sa, NULL) != 0) {   \\\n+    _exit(EXIT_FAILURE);                                                      \\\n+  } else {                                                                    \\\n+    raise(SIGNAL);                                                            \\", "path": "torch/csrc/DataLoader.cpp", "position": 37, "original_position": 12, "commit_id": "5733b553bcf269fb3782f7a0dbd4a12918998a5e", "original_commit_id": "5733b553bcf269fb3782f7a0dbd4a12918998a5e", "user": {"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}, "body": "`SIGNAL` is an argument of the macro. Both `sig` and `info` contain the same signal code, but those are generated at runtime when signal happens. So all three things are equivalent.", "created_at": "2017-11-29T22:16:00Z", "updated_at": "2018-11-23T15:36:58Z", "html_url": "https://github.com/pytorch/pytorch/pull/3474#discussion_r153931595", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/3474", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/153931595"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/3474#discussion_r153931595"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/3474"}}, "body_html": "<p><code>SIGNAL</code> is an argument of the macro. Both <code>sig</code> and <code>info</code> contain the same signal code, but those are generated at runtime when signal happens. So all three things are equivalent.</p>", "body_text": "SIGNAL is an argument of the macro. Both sig and info contain the same signal code, but those are generated at runtime when signal happens. So all three things are equivalent.", "in_reply_to_id": 153930891}
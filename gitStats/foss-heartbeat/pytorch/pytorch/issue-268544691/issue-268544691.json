{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3292", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3292/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3292/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3292/events", "html_url": "https://github.com/pytorch/pytorch/issues/3292", "id": 268544691, "node_id": "MDU6SXNzdWUyNjg1NDQ2OTE=", "number": 3292, "title": "Not linked against libmpi ?", "user": {"login": "eLvErDe", "id": 1586757, "node_id": "MDQ6VXNlcjE1ODY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1586757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eLvErDe", "html_url": "https://github.com/eLvErDe", "followers_url": "https://api.github.com/users/eLvErDe/followers", "following_url": "https://api.github.com/users/eLvErDe/following{/other_user}", "gists_url": "https://api.github.com/users/eLvErDe/gists{/gist_id}", "starred_url": "https://api.github.com/users/eLvErDe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eLvErDe/subscriptions", "organizations_url": "https://api.github.com/users/eLvErDe/orgs", "repos_url": "https://api.github.com/users/eLvErDe/repos", "events_url": "https://api.github.com/users/eLvErDe/events{/privacy}", "received_events_url": "https://api.github.com/users/eLvErDe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-10-25T20:50:13Z", "updated_at": "2017-10-30T18:37:20Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>Hi there,</p>\n<p>Here is what happen with my package built against openmpi:</p>\n<pre><code>\nPython 3.5.3 (default, Jan 19 2017, 14:11:04) \n[GCC 6.3.0 20170118] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import torch\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python3/dist-packages/torch/__init__.py\", line 53, in &lt;module&gt;\n    from torch._C import *\nImportError: /usr/lib/python3/dist-packages/torch/_C.cpython-35m-x86_64-linux-gnu.so: undefined symbol: ompi_mpi_char\n&gt;&gt;&gt; \n</code></pre>\n<p>_C.so seems miss -lmpi linking, don't you think ?</p>\n<pre><code>root@zelda.domain.llu:~# ldd /usr/lib/python3/dist-packages/torch/_C.cpython-35m-x86_64-linux-gnu.so \n\tlinux-vdso.so.1 (0x00007ffd1dff4000)\n\tlibshm.so =&gt; /usr/lib/python3/dist-packages/torch/lib/libshm.so (0x00007f13ed80e000)\n\tlibcudart.so.8.0 =&gt; /usr/lib/x86_64-linux-gnu/libcudart.so.8.0 (0x00007f13ed5a8000)\n\tlibnvToolsExt.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libnvToolsExt.so.1 (0x00007f13ed39f000)\n\tlibnccl.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libnccl.so.1 (0x00007f13e99ae000)\n\tlibcudnn.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libcudnn.so.6 (0x00007f13e044c000)\n\tlibTH.so.1 =&gt; /usr/lib/python3/dist-packages/torch/lib/libTH.so.1 (0x00007f13dfe86000)\n\tlibTHS.so.1 =&gt; /usr/lib/python3/dist-packages/torch/lib/libTHS.so.1 (0x00007f13dfc56000)\n\tlibTHPP.so.1 =&gt; /usr/lib/python3/dist-packages/torch/lib/libTHPP.so.1 (0x00007f13df7df000)\n\tlibTHNN.so.1 =&gt; /usr/lib/python3/dist-packages/torch/lib/libTHNN.so.1 (0x00007f13df4c6000)\n\tlibATen.so.1 =&gt; /usr/lib/python3/dist-packages/torch/lib/libATen.so.1 (0x00007f13ded48000)\n\tlibTHC.so.1 =&gt; /usr/lib/python3/dist-packages/torch/lib/libTHC.so.1 (0x00007f13a3827000)\n\tlibTHCS.so.1 =&gt; /usr/lib/python3/dist-packages/torch/lib/libTHCS.so.1 (0x00007f13a3012000)\n\tlibTHCUNN.so.1 =&gt; /usr/lib/python3/dist-packages/torch/lib/libTHCUNN.so.1 (0x00007f1392ccf000)\n\tlibgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f1392ab8000)\n\tlibpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f139289b000)\n\tlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f13924fc000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f13eef10000)\n\tlibrt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f13922f4000)\n\tlibstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f1391f72000)\n\tlibm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f1391c6e000)\n\tlibdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f1391a6a000)\n\tlibgomp.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libgomp.so.1 (0x00007f139183d000)\n\tlibcublas.so.8.0 =&gt; /usr/lib/x86_64-linux-gnu/libcublas.so.8.0 (0x00007f138ee8d000)\n\tlibcurand.so.8.0 =&gt; /usr/lib/x86_64-linux-gnu/libcurand.so.8.0 (0x00007f138af24000)\n\tlibcusparse.so.8.0 =&gt; /usr/lib/x86_64-linux-gnu/libcusparse.so.8.0 (0x00007f1388416000)\n</code></pre>", "body_text": "Hi there,\nHere is what happen with my package built against openmpi:\n\nPython 3.5.3 (default, Jan 19 2017, 14:11:04) \n[GCC 6.3.0 20170118] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import torch\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/lib/python3/dist-packages/torch/__init__.py\", line 53, in <module>\n    from torch._C import *\nImportError: /usr/lib/python3/dist-packages/torch/_C.cpython-35m-x86_64-linux-gnu.so: undefined symbol: ompi_mpi_char\n>>> \n\n_C.so seems miss -lmpi linking, don't you think ?\nroot@zelda.domain.llu:~# ldd /usr/lib/python3/dist-packages/torch/_C.cpython-35m-x86_64-linux-gnu.so \n\tlinux-vdso.so.1 (0x00007ffd1dff4000)\n\tlibshm.so => /usr/lib/python3/dist-packages/torch/lib/libshm.so (0x00007f13ed80e000)\n\tlibcudart.so.8.0 => /usr/lib/x86_64-linux-gnu/libcudart.so.8.0 (0x00007f13ed5a8000)\n\tlibnvToolsExt.so.1 => /usr/lib/x86_64-linux-gnu/libnvToolsExt.so.1 (0x00007f13ed39f000)\n\tlibnccl.so.1 => /usr/lib/x86_64-linux-gnu/libnccl.so.1 (0x00007f13e99ae000)\n\tlibcudnn.so.6 => /usr/lib/x86_64-linux-gnu/libcudnn.so.6 (0x00007f13e044c000)\n\tlibTH.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTH.so.1 (0x00007f13dfe86000)\n\tlibTHS.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHS.so.1 (0x00007f13dfc56000)\n\tlibTHPP.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHPP.so.1 (0x00007f13df7df000)\n\tlibTHNN.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHNN.so.1 (0x00007f13df4c6000)\n\tlibATen.so.1 => /usr/lib/python3/dist-packages/torch/lib/libATen.so.1 (0x00007f13ded48000)\n\tlibTHC.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHC.so.1 (0x00007f13a3827000)\n\tlibTHCS.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHCS.so.1 (0x00007f13a3012000)\n\tlibTHCUNN.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHCUNN.so.1 (0x00007f1392ccf000)\n\tlibgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f1392ab8000)\n\tlibpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f139289b000)\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f13924fc000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f13eef10000)\n\tlibrt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f13922f4000)\n\tlibstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f1391f72000)\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f1391c6e000)\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f1391a6a000)\n\tlibgomp.so.1 => /usr/lib/x86_64-linux-gnu/libgomp.so.1 (0x00007f139183d000)\n\tlibcublas.so.8.0 => /usr/lib/x86_64-linux-gnu/libcublas.so.8.0 (0x00007f138ee8d000)\n\tlibcurand.so.8.0 => /usr/lib/x86_64-linux-gnu/libcurand.so.8.0 (0x00007f138af24000)\n\tlibcusparse.so.8.0 => /usr/lib/x86_64-linux-gnu/libcusparse.so.8.0 (0x00007f1388416000)", "body": "Hi there,\r\n\r\nHere is what happen with my package built against openmpi:\r\n```\r\n\r\nPython 3.5.3 (default, Jan 19 2017, 14:11:04) \r\n[GCC 6.3.0 20170118] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import torch\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python3/dist-packages/torch/__init__.py\", line 53, in <module>\r\n    from torch._C import *\r\nImportError: /usr/lib/python3/dist-packages/torch/_C.cpython-35m-x86_64-linux-gnu.so: undefined symbol: ompi_mpi_char\r\n>>> \r\n```\r\n\r\n_C.so seems miss -lmpi linking, don't you think ?\r\n\r\n```\r\nroot@zelda.domain.llu:~# ldd /usr/lib/python3/dist-packages/torch/_C.cpython-35m-x86_64-linux-gnu.so \r\n\tlinux-vdso.so.1 (0x00007ffd1dff4000)\r\n\tlibshm.so => /usr/lib/python3/dist-packages/torch/lib/libshm.so (0x00007f13ed80e000)\r\n\tlibcudart.so.8.0 => /usr/lib/x86_64-linux-gnu/libcudart.so.8.0 (0x00007f13ed5a8000)\r\n\tlibnvToolsExt.so.1 => /usr/lib/x86_64-linux-gnu/libnvToolsExt.so.1 (0x00007f13ed39f000)\r\n\tlibnccl.so.1 => /usr/lib/x86_64-linux-gnu/libnccl.so.1 (0x00007f13e99ae000)\r\n\tlibcudnn.so.6 => /usr/lib/x86_64-linux-gnu/libcudnn.so.6 (0x00007f13e044c000)\r\n\tlibTH.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTH.so.1 (0x00007f13dfe86000)\r\n\tlibTHS.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHS.so.1 (0x00007f13dfc56000)\r\n\tlibTHPP.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHPP.so.1 (0x00007f13df7df000)\r\n\tlibTHNN.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHNN.so.1 (0x00007f13df4c6000)\r\n\tlibATen.so.1 => /usr/lib/python3/dist-packages/torch/lib/libATen.so.1 (0x00007f13ded48000)\r\n\tlibTHC.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHC.so.1 (0x00007f13a3827000)\r\n\tlibTHCS.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHCS.so.1 (0x00007f13a3012000)\r\n\tlibTHCUNN.so.1 => /usr/lib/python3/dist-packages/torch/lib/libTHCUNN.so.1 (0x00007f1392ccf000)\r\n\tlibgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f1392ab8000)\r\n\tlibpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f139289b000)\r\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f13924fc000)\r\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f13eef10000)\r\n\tlibrt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f13922f4000)\r\n\tlibstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f1391f72000)\r\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f1391c6e000)\r\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f1391a6a000)\r\n\tlibgomp.so.1 => /usr/lib/x86_64-linux-gnu/libgomp.so.1 (0x00007f139183d000)\r\n\tlibcublas.so.8.0 => /usr/lib/x86_64-linux-gnu/libcublas.so.8.0 (0x00007f138ee8d000)\r\n\tlibcurand.so.8.0 => /usr/lib/x86_64-linux-gnu/libcurand.so.8.0 (0x00007f138af24000)\r\n\tlibcusparse.so.8.0 => /usr/lib/x86_64-linux-gnu/libcusparse.so.8.0 (0x00007f1388416000)\r\n```\r\n\r\n"}
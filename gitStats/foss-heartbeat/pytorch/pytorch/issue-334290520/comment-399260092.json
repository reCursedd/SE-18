{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/399260092", "html_url": "https://github.com/pytorch/pytorch/pull/8723#issuecomment-399260092", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8723", "id": 399260092, "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTI2MDA5Mg==", "user": {"login": "cpuhrsch", "id": 1716488, "node_id": "MDQ6VXNlcjE3MTY0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1716488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpuhrsch", "html_url": "https://github.com/cpuhrsch", "followers_url": "https://api.github.com/users/cpuhrsch/followers", "following_url": "https://api.github.com/users/cpuhrsch/following{/other_user}", "gists_url": "https://api.github.com/users/cpuhrsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpuhrsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpuhrsch/subscriptions", "organizations_url": "https://api.github.com/users/cpuhrsch/orgs", "repos_url": "https://api.github.com/users/cpuhrsch/repos", "events_url": "https://api.github.com/users/cpuhrsch/events{/privacy}", "received_events_url": "https://api.github.com/users/cpuhrsch/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-21T22:13:51Z", "updated_at": "2018-06-21T22:13:51Z", "author_association": "CONTRIBUTOR", "body_html": "<p>This helps with the contiguous cases and brings back some of that perf we lost when removing TBB.</p>\n<pre><code>framework                                          Torch  Torch Master     Ratio  Better\ncont  trans function         dims      mag\nFalse False ('mean', 'mean') (3, 0)    6     6701.382882   6879.984488  1.026651    True\n                             (3, 1)    6     9924.472657   9494.475229  0.956673   False\n                             (3, 2)    6     7010.525207   7258.477669  1.035369    True\n                             (3, None) 6     6857.167164   6985.889971  1.018772    True\n            ('prod', 'prod') (3, 0)    6     7276.052502   6833.933697  0.939236   False\n                             (3, 1)    6    17542.781991  16541.595454  0.942929   False\n                             (3, 2)    6    14439.062495  14224.246361  0.985123   False\n                             (3, None) 6     6978.505411   6725.937062  0.963808   False\n            ('sum', 'sum')   (3, 0)    6     6676.847825   6607.803707  0.989659   False\n                             (3, 1)    6     9952.696012   9333.603506  0.937797   False\n                             (3, 2)    6     7136.489192   6897.342967  0.966490   False\n                             (3, None) 6     6650.022418   6663.763262  1.002066    True\n      True  ('mean', 'mean') (3, 0)    6     7170.366784   7320.717891  1.020968    True\n                             (3, 1)    6     9840.082277   9634.554139  0.979113   False\n                             (3, 2)    6     7837.373721   7848.160852  1.001376    True\n                             (3, None) 6     6997.179292   7280.161069  1.040442    True\n            ('prod', 'prod') (3, 0)    6     6950.780213   6937.386472  0.998073   False\n                             (3, 1)    6    16754.285102  16183.011912  0.965903   False\n                             (3, 2)    6    15567.295334  14440.673446  0.927629   False\n                             (3, None) 6     7469.579783   6918.785555  0.926262   False\n            ('sum', 'sum')   (3, 0)    6     6902.898977   6902.392964  0.999927   False\n                             (3, 1)    6     9926.626272   9062.697379  0.912969   False\n                             (3, 2)    6     7581.733190   7584.712134  1.000393    True\n                             (3, None) 6     6978.222372   6908.055662  0.989945   False\nTrue  False ('mean', 'mean') (3, 0)    6      632.855250    633.110660  1.000404    True\n                             (3, 1)    6     2419.566856    241.799825  0.099935   False\n                             (3, 2)    6     1239.254150   4336.572558  3.499341    True\n                             (3, None) 6      600.421910    605.018138  1.007655    True\n            ('prod', 'prod') (3, 0)    6     1037.283065   1089.741900  1.050573    True\n                             (3, 1)    6     9044.283486   2327.889289  0.257388   False\n                             (3, 2)    6     4818.369895   8436.057362  1.750811    True\n                             (3, None) 6     1091.034340   1173.024231  1.075149    True\n            ('sum', 'sum')   (3, 0)    6      598.180962    628.249863  1.050267    True\n                             (3, 1)    6     2167.069814    230.730546  0.106471   False\n                             (3, 2)    6     1047.699047   4190.517256  3.999734    True\n                             (3, None) 6      571.860716    593.055146  1.037062    True\n      True  ('mean', 'mean') (3, 0)    6     1995.406979   1990.448682  0.997515   False\n                             (3, 1)    6     2810.649215   2964.802893  1.054846    True\n                             (3, 2)    6     2654.699634   2617.143126  0.985853   False\n                             (3, None) 6     2001.500816   1969.605817  0.984064   False\n            ('prod', 'prod') (3, 0)    6     2081.646534   2171.181426  1.043012    True\n                             (3, 1)    6    10420.174235  10626.649047  1.019815    True\n                             (3, 2)    6    10084.421303   9961.095806  0.987771   False\n                             (3, None) 6     2027.610709   2167.616438  1.069050    True\n            ('sum', 'sum')   (3, 0)    6     1957.235241   1953.219322  0.997948   False\n                             (3, 1)    6     2656.771482   2797.435121  1.052945    True\n                             (3, 2)    6     2478.364571   2453.479527  0.989959   False\n                             (3, None) 6     2054.568403   1957.569074  0.952788   False\n</code></pre>", "body_text": "This helps with the contiguous cases and brings back some of that perf we lost when removing TBB.\nframework                                          Torch  Torch Master     Ratio  Better\ncont  trans function         dims      mag\nFalse False ('mean', 'mean') (3, 0)    6     6701.382882   6879.984488  1.026651    True\n                             (3, 1)    6     9924.472657   9494.475229  0.956673   False\n                             (3, 2)    6     7010.525207   7258.477669  1.035369    True\n                             (3, None) 6     6857.167164   6985.889971  1.018772    True\n            ('prod', 'prod') (3, 0)    6     7276.052502   6833.933697  0.939236   False\n                             (3, 1)    6    17542.781991  16541.595454  0.942929   False\n                             (3, 2)    6    14439.062495  14224.246361  0.985123   False\n                             (3, None) 6     6978.505411   6725.937062  0.963808   False\n            ('sum', 'sum')   (3, 0)    6     6676.847825   6607.803707  0.989659   False\n                             (3, 1)    6     9952.696012   9333.603506  0.937797   False\n                             (3, 2)    6     7136.489192   6897.342967  0.966490   False\n                             (3, None) 6     6650.022418   6663.763262  1.002066    True\n      True  ('mean', 'mean') (3, 0)    6     7170.366784   7320.717891  1.020968    True\n                             (3, 1)    6     9840.082277   9634.554139  0.979113   False\n                             (3, 2)    6     7837.373721   7848.160852  1.001376    True\n                             (3, None) 6     6997.179292   7280.161069  1.040442    True\n            ('prod', 'prod') (3, 0)    6     6950.780213   6937.386472  0.998073   False\n                             (3, 1)    6    16754.285102  16183.011912  0.965903   False\n                             (3, 2)    6    15567.295334  14440.673446  0.927629   False\n                             (3, None) 6     7469.579783   6918.785555  0.926262   False\n            ('sum', 'sum')   (3, 0)    6     6902.898977   6902.392964  0.999927   False\n                             (3, 1)    6     9926.626272   9062.697379  0.912969   False\n                             (3, 2)    6     7581.733190   7584.712134  1.000393    True\n                             (3, None) 6     6978.222372   6908.055662  0.989945   False\nTrue  False ('mean', 'mean') (3, 0)    6      632.855250    633.110660  1.000404    True\n                             (3, 1)    6     2419.566856    241.799825  0.099935   False\n                             (3, 2)    6     1239.254150   4336.572558  3.499341    True\n                             (3, None) 6      600.421910    605.018138  1.007655    True\n            ('prod', 'prod') (3, 0)    6     1037.283065   1089.741900  1.050573    True\n                             (3, 1)    6     9044.283486   2327.889289  0.257388   False\n                             (3, 2)    6     4818.369895   8436.057362  1.750811    True\n                             (3, None) 6     1091.034340   1173.024231  1.075149    True\n            ('sum', 'sum')   (3, 0)    6      598.180962    628.249863  1.050267    True\n                             (3, 1)    6     2167.069814    230.730546  0.106471   False\n                             (3, 2)    6     1047.699047   4190.517256  3.999734    True\n                             (3, None) 6      571.860716    593.055146  1.037062    True\n      True  ('mean', 'mean') (3, 0)    6     1995.406979   1990.448682  0.997515   False\n                             (3, 1)    6     2810.649215   2964.802893  1.054846    True\n                             (3, 2)    6     2654.699634   2617.143126  0.985853   False\n                             (3, None) 6     2001.500816   1969.605817  0.984064   False\n            ('prod', 'prod') (3, 0)    6     2081.646534   2171.181426  1.043012    True\n                             (3, 1)    6    10420.174235  10626.649047  1.019815    True\n                             (3, 2)    6    10084.421303   9961.095806  0.987771   False\n                             (3, None) 6     2027.610709   2167.616438  1.069050    True\n            ('sum', 'sum')   (3, 0)    6     1957.235241   1953.219322  0.997948   False\n                             (3, 1)    6     2656.771482   2797.435121  1.052945    True\n                             (3, 2)    6     2478.364571   2453.479527  0.989959   False\n                             (3, None) 6     2054.568403   1957.569074  0.952788   False", "body": "This helps with the contiguous cases and brings back some of that perf we lost when removing TBB.\r\n\r\n```\r\nframework                                          Torch  Torch Master     Ratio  Better\r\ncont  trans function         dims      mag\r\nFalse False ('mean', 'mean') (3, 0)    6     6701.382882   6879.984488  1.026651    True\r\n                             (3, 1)    6     9924.472657   9494.475229  0.956673   False\r\n                             (3, 2)    6     7010.525207   7258.477669  1.035369    True\r\n                             (3, None) 6     6857.167164   6985.889971  1.018772    True\r\n            ('prod', 'prod') (3, 0)    6     7276.052502   6833.933697  0.939236   False\r\n                             (3, 1)    6    17542.781991  16541.595454  0.942929   False\r\n                             (3, 2)    6    14439.062495  14224.246361  0.985123   False\r\n                             (3, None) 6     6978.505411   6725.937062  0.963808   False\r\n            ('sum', 'sum')   (3, 0)    6     6676.847825   6607.803707  0.989659   False\r\n                             (3, 1)    6     9952.696012   9333.603506  0.937797   False\r\n                             (3, 2)    6     7136.489192   6897.342967  0.966490   False\r\n                             (3, None) 6     6650.022418   6663.763262  1.002066    True\r\n      True  ('mean', 'mean') (3, 0)    6     7170.366784   7320.717891  1.020968    True\r\n                             (3, 1)    6     9840.082277   9634.554139  0.979113   False\r\n                             (3, 2)    6     7837.373721   7848.160852  1.001376    True\r\n                             (3, None) 6     6997.179292   7280.161069  1.040442    True\r\n            ('prod', 'prod') (3, 0)    6     6950.780213   6937.386472  0.998073   False\r\n                             (3, 1)    6    16754.285102  16183.011912  0.965903   False\r\n                             (3, 2)    6    15567.295334  14440.673446  0.927629   False\r\n                             (3, None) 6     7469.579783   6918.785555  0.926262   False\r\n            ('sum', 'sum')   (3, 0)    6     6902.898977   6902.392964  0.999927   False\r\n                             (3, 1)    6     9926.626272   9062.697379  0.912969   False\r\n                             (3, 2)    6     7581.733190   7584.712134  1.000393    True\r\n                             (3, None) 6     6978.222372   6908.055662  0.989945   False\r\nTrue  False ('mean', 'mean') (3, 0)    6      632.855250    633.110660  1.000404    True\r\n                             (3, 1)    6     2419.566856    241.799825  0.099935   False\r\n                             (3, 2)    6     1239.254150   4336.572558  3.499341    True\r\n                             (3, None) 6      600.421910    605.018138  1.007655    True\r\n            ('prod', 'prod') (3, 0)    6     1037.283065   1089.741900  1.050573    True\r\n                             (3, 1)    6     9044.283486   2327.889289  0.257388   False\r\n                             (3, 2)    6     4818.369895   8436.057362  1.750811    True\r\n                             (3, None) 6     1091.034340   1173.024231  1.075149    True\r\n            ('sum', 'sum')   (3, 0)    6      598.180962    628.249863  1.050267    True\r\n                             (3, 1)    6     2167.069814    230.730546  0.106471   False\r\n                             (3, 2)    6     1047.699047   4190.517256  3.999734    True\r\n                             (3, None) 6      571.860716    593.055146  1.037062    True\r\n      True  ('mean', 'mean') (3, 0)    6     1995.406979   1990.448682  0.997515   False\r\n                             (3, 1)    6     2810.649215   2964.802893  1.054846    True\r\n                             (3, 2)    6     2654.699634   2617.143126  0.985853   False\r\n                             (3, None) 6     2001.500816   1969.605817  0.984064   False\r\n            ('prod', 'prod') (3, 0)    6     2081.646534   2171.181426  1.043012    True\r\n                             (3, 1)    6    10420.174235  10626.649047  1.019815    True\r\n                             (3, 2)    6    10084.421303   9961.095806  0.987771   False\r\n                             (3, None) 6     2027.610709   2167.616438  1.069050    True\r\n            ('sum', 'sum')   (3, 0)    6     1957.235241   1953.219322  0.997948   False\r\n                             (3, 1)    6     2656.771482   2797.435121  1.052945    True\r\n                             (3, 2)    6     2478.364571   2453.479527  0.989959   False\r\n                             (3, None) 6     2054.568403   1957.569074  0.952788   False\r\n```"}
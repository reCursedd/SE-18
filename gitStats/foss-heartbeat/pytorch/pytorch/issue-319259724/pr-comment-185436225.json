{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/185436225", "pull_request_review_id": 116822119, "id": 185436225, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NTQzNjIyNQ==", "diff_hunk": "@@ -371,19 +371,8 @@ def _shutdown_workers(self):\n                 self.done_event.set()\n                 for q in self.index_queues:\n                     q.put(None)\n-                # if some workers are waiting to put, make place for them\n-                try:\n-                    while not self.worker_result_queue.empty():\n-                        self.worker_result_queue.get()\n-                except (FileNotFoundError, ImportError):\n-                    # Many weird errors can happen here due to Python\n-                    # shutting down. These are more like obscure Python bugs.\n-                    # FileNotFoundError can happen when we rebuild the fd\n-                    # fetched from the queue but the socket is already closed\n-                    # from the worker side.\n-                    # ImportError can happen when the unpickler loads the\n-                    # resource from `get`.\n-                    pass\n+                # Workers can't be waiting to put because they each has only at\n+                # most 2 batches, which should be far below SimpleQueue's limit.", "path": "torch/utils/data/dataloader.py", "position": null, "original_position": 18, "commit_id": "61b82ad27c2bfe611c35b8672061a6a438920b48", "original_commit_id": "8592b7091073131a10a5e2386568f3c9b01d0ff8", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "I don't think that's a good idea. The pipe buffer size on my Ubuntu host is 1MB, and assuming that batches are smaller than 0.5MB is too fragile. People are loading large images and videos using those classes.", "created_at": "2018-05-02T09:14:02Z", "updated_at": "2018-11-23T15:43:30Z", "html_url": "https://github.com/pytorch/pytorch/pull/7140#discussion_r185436225", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/7140", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/185436225"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/7140#discussion_r185436225"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/7140"}}, "body_html": "<p>I don't think that's a good idea. The pipe buffer size on my Ubuntu host is 1MB, and assuming that batches are smaller than 0.5MB is too fragile. People are loading large images and videos using those classes.</p>", "body_text": "I don't think that's a good idea. The pipe buffer size on my Ubuntu host is 1MB, and assuming that batches are smaller than 0.5MB is too fragile. People are loading large images and videos using those classes.", "in_reply_to_id": 185309955}
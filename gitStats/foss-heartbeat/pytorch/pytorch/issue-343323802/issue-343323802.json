{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9679", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9679/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9679/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9679/events", "html_url": "https://github.com/pytorch/pytorch/issues/9679", "id": 343323802, "node_id": "MDU6SXNzdWUzNDMzMjM4MDI=", "number": 9679, "title": "[Caffe2] Build Errors : undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string", "user": {"login": "forestriveral", "id": 37567948, "node_id": "MDQ6VXNlcjM3NTY3OTQ4", "avatar_url": "https://avatars0.githubusercontent.com/u/37567948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/forestriveral", "html_url": "https://github.com/forestriveral", "followers_url": "https://api.github.com/users/forestriveral/followers", "following_url": "https://api.github.com/users/forestriveral/following{/other_user}", "gists_url": "https://api.github.com/users/forestriveral/gists{/gist_id}", "starred_url": "https://api.github.com/users/forestriveral/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/forestriveral/subscriptions", "organizations_url": "https://api.github.com/users/forestriveral/orgs", "repos_url": "https://api.github.com/users/forestriveral/repos", "events_url": "https://api.github.com/users/forestriveral/events{/privacy}", "received_events_url": "https://api.github.com/users/forestriveral/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-07-21T12:38:13Z", "updated_at": "2018-08-10T13:54:58Z", "closed_at": "2018-07-25T01:58:57Z", "author_association": "NONE", "body_html": "<p>I'm trying to build Caffe2 (with gpu supported) from source codes in Ubuntu16.04.<br>\nAnd I followed the official instructions on the Caffe2 page.<br>\n<a href=\"https://caffe2.ai/docs/getting-started.html?platform=mac&amp;configuration=compile#anaconda-install-path\" rel=\"nofollow\">https://caffe2.ai/docs/getting-started.html?platform=mac&amp;configuration=compile#anaconda-install-path</a></p>\n<pre><code># Clone Caffe2's source code from our Github repository\ncd ~ &amp;&amp; git clone --recursive https://github.com/pytorch/pytorch.git &amp;&amp; cd pytorch\ngit submodule update --init\n# Create a directory to put Caffe2's build files in\nrm -rf build &amp;&amp; mkdir build &amp;&amp; cd build\n# Configure Caffe2's build\n# This looks for packages on your machine and figures out which functionality\n# to include in the Caffe2 installation. The output of this command is very\n# useful in debugging.\ncmake -DCMAKE_PREFIX_PATH=~/anaconda2/envs/my_caffe2_env -DCMAKE_INSTALL_PREFIX=~/anaconda2/envs/my_caffe2_env ..\n# Compile, link, and install Caffe2\nmake install\n</code></pre>\n<p>Errors ocurred during running the command<br>\n<code> $ sudo make install -j8</code></p>\n<h2>Issue description</h2>\n<p>I activated the specific conda environment <code>Caffe2</code>.<br>\nWhen compiling caffe2, the following errors occurred.<br>\n<strong>Error Output:</strong></p>\n<pre lang=\"[\" data-meta=\"94%] Building CXX object caffe2/CMakeFiles/caffe2_gpu.dir/sgd/learning_rate_op_gpu.cc.o\"><code>[ 94%] Linking CXX shared library ../lib/libcaffe2_gpu.so\n[ 94%] Built target caffe2_gpu\nScanning dependencies of target convert_caffe_image_db\nScanning dependencies of target db_throughput\nScanning dependencies of target convert_db\nScanning dependencies of target predictor_verifier\nScanning dependencies of target make_cifar_db\nScanning dependencies of target caffe2_pybind11_state_gpu\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_upsample_nearest_op.cu.o\nScanning dependencies of target split_db\n[ 94%] Building CXX object binaries/CMakeFiles/convert_db.dir/convert_db.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/split_db.dir/split_db.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/predictor_verifier.dir/predictor_verifier.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/convert_caffe_image_db.dir/convert_caffe_image_db.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/make_cifar_db.dir/make_cifar_db.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/db_throughput.dir/db_throughput.cc.o\n[ 94%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state.cc.o\n[ 94%] Linking CXX executable ../bin/convert_db\n[ 94%] Linking CXX executable ../bin/split_db\n[ 94%] Linking CXX executable ../bin/make_cifar_db\n[ 94%] Linking CXX executable ../bin/predictor_verifier\n[ 94%] Linking CXX executable ../bin/db_throughput\nCMakeFiles/convert_db.dir/convert_db.cc.o: In function `_GLOBAL__sub_I_convert_db.cc':\nconvert_db.cc:(.text.startup+0x4a7): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nconvert_db.cc:(.text.startup+0x55b): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nconvert_db.cc:(.text.startup+0x60f): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nconvert_db.cc:(.text.startup+0x6c3): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/convert_db.dir/build.make:95: recipe for target 'bin/convert_db' failed\nmake[2]: *** [bin/convert_db] Error 1\nCMakeFiles/Makefile2:2888: recipe for target 'binaries/CMakeFiles/convert_db.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/convert_db.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\nCMakeFiles/split_db.dir/split_db.cc.o: In function `_GLOBAL__sub_I_split_db.cc':\nsplit_db.cc:(.text.startup+0xae): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nsplit_db.cc:(.text.startup+0x198): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nCMakeFiles/make_cifar_db.dir/make_cifar_db.cc.o: In function `_GLOBAL__sub_I_make_cifar_db.cc':\nmake_cifar_db.cc:(.text.startup+0x22e): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nmake_cifar_db.cc:(.text.startup+0x2e9): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nmake_cifar_db.cc:(.text.startup+0x3a4): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nmake_cifar_db.cc:(.text.startup+0x45f): undefined reference to `binaries/CMakeFiles/split_db.dir/build.make:95: recipe for target 'bin/split_db' failed\nmake[2]: *** [bin/split_db] Error 1\nCMakeFiles/Makefile2:2806: recipe for target 'binaries/CMakeFiles/split_db.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/split_db.dir/all] Error 2\ngoogle::FlagRegisterer::FlagRegisterer&lt;std[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_batch_permutation_op.cu.o\n::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/make_cifar_db.dir/build.make:95: recipe for target 'bin/make_cifar_db' failed\nmake[2]: *** [bin/make_cifar_db] Error 1\nCMakeFiles/Makefile2:2765: recipe for target 'binaries/CMakeFiles/make_cifar_db.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/make_cifar_db.dir/all] Error 2\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_ps_roi_pool_op.cu.o\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_group_spatial_softmax_op.cu.o\n[ 95%] Linking CXX executable ../bin/convert_caffe_image_db\nCMakeFiles/predictor_verifier.dir/predictor_verifier.cc.o: In function `_GLOBAL__sub_I_predictor_verifier.cc':\npredictor_verifier.cc:(.text.startup+0x16b): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\npredictor_verifier.cc:(.text.startup+0x233): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/predictor_verifier.dir/build.make:95: recipe for target 'bin/predictor_verifier' failed\nmake[2]: *** [bin/predictor_verifier] Error 1\nCMakeFiles/Makefile2:2847: recipe for target 'binaries/CMakeFiles/predictor_verifier.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/predictor_verifier.dir/all] Error 2\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_roi_pool_f_op.cu.o\nCMakeFiles/db_throughput.dir/db_throughput.cc.o: In function `_GLOBAL__sub_I_db_throughput.cc':\ndb_throughput.cc:(.text.startup+0xde): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\ndb_throughput.cc:(.text.startup+0x199): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/db_throughput.dir/build.make:95: recipe for target 'bin/db_throughput' failed\nmake[2]: *** [bin/db_throughput] Error 1\nCMakeFiles/Makefile2:2683: recipe for target 'binaries/CMakeFiles/db_throughput.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/db_throughput.dir/all] Error 2\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sample_as_op.cu.o\nCMakeFiles/convert_caffe_image_db.dir/convert_caffe_image_db.cc.o: In function `_GLOBAL__sub_I_convert_caffe_image_db.cc':\nconvert_caffe_image_db.cc:(.text.startup+0x177): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nconvert_caffe_image_db.cc:(.text.startup+0x22b): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nconvert_caffe_image_db.cc:(.text.startup+0x2df): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\nconvert_caffe_image_db.cc:(.text.startup+0x393): undefined reference to `google::FlagRegisterer::FlagRegisterer&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;(char const*, char const*, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/convert_caffe_image_db.dir/build.make:95: recipe for target 'bin/convert_caffe_image_db' failed\nmake[2]: *** [bin/convert_caffe_image_db] Error 1\nCMakeFiles/Makefile2:2724: recipe for target 'binaries/CMakeFiles/convert_caffe_image_db.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/convert_caffe_image_db.dir/all] Error 2\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_select_smooth_l1_loss_op.cu.o\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sigmoid_cross_entropy_loss_op.cu.o\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sigmoid_focal_loss_op.cu.o\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_smooth_l1_loss_op.cu.o\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_softmax_focal_loss_op.cu.o\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_spatial_narrow_as_op.cu.o\n[ 96%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state_dlpack.cc.o\n[ 96%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state_gpu.cc.o\nScanning dependencies of target caffe2_detectron_ops_gpu\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/group_spatial_softmax_op.cc.o\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/ps_roi_pool_op.cc.o\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/roi_pool_f_op.cc.o\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/batch_permutation_op.cc.o\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sample_as_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/select_smooth_l1_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_cross_entropy_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_focal_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/smooth_l1_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/softmax_focal_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/spatial_narrow_as_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/upsample_nearest_op.cc.o\n[ 97%] Linking CXX shared module python/caffe2_pybind11_state_gpu.cpython-36m-x86_64-linux-gnu.so\n[ 97%] Built target caffe2_pybind11_state_gpu\n[ 97%] Linking CXX shared library ../../lib/libcaffe2_detectron_ops_gpu.so\n[ 97%] Built target caffe2_detectron_ops_gpu\nMakefile:140: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n<p>There seems to be some version mismatch issues, but I don't know what exactly it is.<br>\nI have tried something, but it still didn't fix these errors.<br>\nIt has bothered me a few days. Any suggestions or ideas will be grateful!</p>\n<h2>Code example</h2>\n<p><strong>output of cmake:</strong></p>\n<pre lang=\"Does\" data-meta=\"not need to define long separately.\"><code>std::exception_ptr is supported.\nNUMA is available\nCurrent compiler supports avx2 extention. Will build perfkernels.\nBuilding using own protobuf under third_party per request.\nUse custom protobuf build.\nCaffe2 protobuf include directory: $&lt;BUILD_INTERFACE:/home/forestriveral/DeepLearning/Caffe2/pytorch/third_party/protobuf/src&gt;$&lt;INSTALL_INTERFACE:include&gt;\nThe BLAS backend of choice:Eigen\nBrace yourself, we are building NNPACK\nFound PythonInterp: /home/forestriveral/anaconda3/envs/caffe2/bin/python (found version \"3.6.2\") \nCaffe2: Found gflags with new-style gflags target.\nCaffe2: Cannot find glog automatically. Using legacy find.\nCaffe2: Found glog (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libglog.so)\nFound lmdb    (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/liblmdb.so)\nFound LevelDB (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libleveldb.so)\nFound Snappy  (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libsnappy.so)\nFound Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)\nOpenCV found (/home/forestriveral/anaconda3/envs/caffe2/share/OpenCV)\nDid not find system Eigen. Using third party subdirectory.\nPython 3.6.2 :: Continuum Analytics, Inc.\n\nSetting Python's include dir to /home/forestriveral/anaconda3/envs/caffe2/include/python3.6m from distutils.sysconfig\nSetting Python's library to /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6\nFound PythonInterp: /home/forestriveral/anaconda3/envs/caffe2/bin/python (found suitable version \"3.6.2\", minimum required is \"2.7\") \nNumPy ver. 1.14.5 found (include: /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6/site-packages/numpy/core/include)\nFound pybind11: /home/forestriveral/DeepLearning/Caffe2/pytorch/third_party/pybind11/include  \nCaffe2: CUDA detected: 9.0\nCaffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc\nCaffe2: CUDA toolkit directory: /usr/local/cuda\nCaffe2: Header version is: 9.0\nFound cuDNN: v7.0.3  (include: /usr/local/cuda/include, library: /usr/local/cuda/lib64/libcudnn.so)\nAutodetected CUDA architecture(s): 6.1 \nAdded CUDA NVCC flags for: -gencode;arch=compute_61,code=sm_61\nCould NOT find CUB (missing: CUB_INCLUDE_DIR) \nCould NOT find Gloo (missing: Gloo_INCLUDE_DIR Gloo_LIBRARY) \nCUDA detected: 9.0\nFound libcuda: /usr/local/cuda/lib64/stubs/libcuda.so\nFound libnvrtc: /usr/local/cuda/lib64/libnvrtc.so\nGCC 5.4.0: Adding gcc and gcc_s libs to link line\nNCCL operators skipped due to no CUDA support\nExcluding ideep operators as we are not using ideep\nIncluding image processing operators\nExcluding video processing operators due to no opencv\nExcluding mkl operators as we are not using mkl\nMPI operators skipped due to no MPI support\nInclude Observer library\nUsing lib/python3.6/site-packages as python relative installation path\nAutomatically generating missing __init__.py files.\nA previous caffe2 cmake run already created the __init__.py files.\nCMake Warning at CMakeLists.txt:352 (message):\n  Generated cmake files are only fully tested if one builds with system glog,\n  gflags, and protobuf.  Other settings may generate files that are not well\n  tested.\n\n******** Summary ********\nGeneral:\n  CMake version         : 3.11.4\n  CMake command         : /opt/cmake-3.11.4-Linux-x86_64/bin/cmake\n  Git version           : v0.1.11-9397-gaa7af94-dirty\n  System                : Linux\n  C++ compiler          : /usr/bin/c++\n  C++ compiler version  : 5.4.0\n  BLAS                  : Eigen\n  CXX flags             :  -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations\n  Build type       : Release\n  Compile definitions   : \n  CMAKE_PREFIX_PATH     : \n  CMAKE_INSTALL_PREFIX  : /home/forestriveral/anaconda3/envs/caffe2\n  BUILD_CAFFE2          : ON\n  BUILD_ATEN            : OFF\n  BUILD_BINARY          : ON\n  BUILD_CUSTOM_PROTOBUF : ON\n    Link local protobuf : ON\n  BUILD_DOCS            : OFF\n  BUILD_PYTHON          : ON\n    Python version      : 3.6.2\n    Python executable   : /home/forestriveral/anaconda3/envs/caffe2/bin/python\n    Pythonlibs version  : 3.6.2\n    Python library      : /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6\n    Python includes     : /home/forestriveral/anaconda3/envs/caffe2/include/python3.6m\n    Python site-packages: lib/python3.6/site-packages\n  BUILD_SHARED_LIBS     : ON\n  BUILD_TEST            : OFF\n  USE_ASAN              : OFF\n  USE_ATEN              : OFF\n  USE_CUDA              : ON\n    CUDA static link    : OFF\n    USE_CUDNN           : ON\n    CUDA version        : 9.0\n    cuDNN version       : 7.0.3\n    CUDA root directory : /usr/local/cuda\n    CUDA library        : /usr/local/cuda/lib64/stubs/libcuda.so\n    cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\n    cublas library      : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\n    cufft library       : /usr/local/cuda/lib64/libcufft.so\n    curand library      : /usr/local/cuda/lib64/libcurand.so\n    cuDNN library       : /usr/local/cuda/lib64/libcudnn.so\n    nvrtc               : /usr/local/cuda/lib64/libnvrtc.so\n    CUDA include path   : /usr/local/cuda/include\n    NVCC executable     : /usr/local/cuda/bin/nvcc\n    CUDA host compiler  : /usr/bin/cc\n    USE_TENSORRT        : OFF\n  USE_ROCM              : OFF\n  USE_EIGEN_FOR_BLAS    : ON\n  USE_FFMPEG            : OFF\n  USE_GFLAGS            : ON\n  USE_GLOG              : ON\n  USE_GLOO              : ON\n    USE_GLOO_IBVERBS    : OFF\n  USE_LEVELDB           : ON\n    LevelDB version     : 1.19\n    Snappy version      : ..\n  USE_LITE_PROTO        : OFF\n  USE_LMDB              : ON\n    LMDB version        : 0.9.17\n  USE_METAL             : OFF\n  USE_MKL               : \n  USE_MOBILE_OPENGL     : OFF\n  USE_MPI               : OFF\n  USE_NCCL              : OFF\n  USE_NERVANA_GPU       : OFF\n  USE_NNPACK            : ON\n  USE_OBSERVERS         : ON\n  USE_OPENCL            : OFF\n  USE_OPENCV            : ON\n    OpenCV version      : 3.1.0\n  USE_OPENMP            : OFF\n  USE_PROF              : OFF\n  USE_REDIS             : OFF\n  USE_ROCKSDB           : OFF\n  USE_ZMQ               : OFF\n  Public Dependencies  : Threads::Threads;gflags;glog::glog\n  Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/home/forestriveral/anaconda3/envs/caffe2/lib/libleveldb.so;/home/forestriveral/anaconda3/envs/caffe2/lib/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;gloo;onnxifi_loader;gcc_s;gcc;dl\nConfiguring done\nGenerating done\n</code></pre>\n<p>Before I built Caffe2 from source codes, I followed the instructions of Pre-Built Binaries  installation in Anaconda.    <code>conda install -c caffe2 caffe2-cuda9.0-cudnn7 </code><br>\n<a href=\"https://caffe2.ai/docs/getting-started.html?platform=ubuntu&amp;configuration=prebuilt#anaconda-install-path\" rel=\"nofollow\">https://caffe2.ai/docs/getting-started.html?platform=ubuntu&amp;configuration=prebuilt#anaconda-install-path</a><br>\nBut it showed that the package was missing and I also failed to manually download the package from  <a href=\"http://conda.anaconda.org/caffe2/linux-64\" rel=\"nofollow\">http://conda.anaconda.org/caffe2/linux-64</a>. I don't know whether this way does really work.<br>\n<strong>Error:</strong></p>\n<pre><code>Solving environment: failed\nPackagesNotFoundError: The following packages are not available from current channels:\n       caffe2-cuda9.0-cudnn7\n</code></pre>\n<p>My aim is to run detectron on my Ubuntu platform.If there are some other ways to install Caffe2, I'd appreciate your advice on this issue! Thanks!</p>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: Caffe2</li>\n<li>How you installed PyTorch (conda, pip, source):  camke of Caffe2</li>\n<li>Build command you used (if compiling from source):  sudo make install -j8</li>\n<li>OS: Ubuntu 16.04</li>\n<li>PyTorch version: null</li>\n<li>Python version: 3.6.2 (Anaconda3)</li>\n<li>CUDA/cuDNN version:9.0 / 7.0.3</li>\n<li>GPU models and configuration: GTX1050</li>\n<li>GCC version (if compiling from source): 5.4.0</li>\n<li>CMake version: 3.11.4</li>\n</ul>", "body_text": "I'm trying to build Caffe2 (with gpu supported) from source codes in Ubuntu16.04.\nAnd I followed the official instructions on the Caffe2 page.\nhttps://caffe2.ai/docs/getting-started.html?platform=mac&configuration=compile#anaconda-install-path\n# Clone Caffe2's source code from our Github repository\ncd ~ && git clone --recursive https://github.com/pytorch/pytorch.git && cd pytorch\ngit submodule update --init\n# Create a directory to put Caffe2's build files in\nrm -rf build && mkdir build && cd build\n# Configure Caffe2's build\n# This looks for packages on your machine and figures out which functionality\n# to include in the Caffe2 installation. The output of this command is very\n# useful in debugging.\ncmake -DCMAKE_PREFIX_PATH=~/anaconda2/envs/my_caffe2_env -DCMAKE_INSTALL_PREFIX=~/anaconda2/envs/my_caffe2_env ..\n# Compile, link, and install Caffe2\nmake install\n\nErrors ocurred during running the command\n $ sudo make install -j8\nIssue description\nI activated the specific conda environment Caffe2.\nWhen compiling caffe2, the following errors occurred.\nError Output:\n[ 94%] Linking CXX shared library ../lib/libcaffe2_gpu.so\n[ 94%] Built target caffe2_gpu\nScanning dependencies of target convert_caffe_image_db\nScanning dependencies of target db_throughput\nScanning dependencies of target convert_db\nScanning dependencies of target predictor_verifier\nScanning dependencies of target make_cifar_db\nScanning dependencies of target caffe2_pybind11_state_gpu\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_upsample_nearest_op.cu.o\nScanning dependencies of target split_db\n[ 94%] Building CXX object binaries/CMakeFiles/convert_db.dir/convert_db.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/split_db.dir/split_db.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/predictor_verifier.dir/predictor_verifier.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/convert_caffe_image_db.dir/convert_caffe_image_db.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/make_cifar_db.dir/make_cifar_db.cc.o\n[ 94%] Building CXX object binaries/CMakeFiles/db_throughput.dir/db_throughput.cc.o\n[ 94%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state.cc.o\n[ 94%] Linking CXX executable ../bin/convert_db\n[ 94%] Linking CXX executable ../bin/split_db\n[ 94%] Linking CXX executable ../bin/make_cifar_db\n[ 94%] Linking CXX executable ../bin/predictor_verifier\n[ 94%] Linking CXX executable ../bin/db_throughput\nCMakeFiles/convert_db.dir/convert_db.cc.o: In function `_GLOBAL__sub_I_convert_db.cc':\nconvert_db.cc:(.text.startup+0x4a7): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nconvert_db.cc:(.text.startup+0x55b): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nconvert_db.cc:(.text.startup+0x60f): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nconvert_db.cc:(.text.startup+0x6c3): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/convert_db.dir/build.make:95: recipe for target 'bin/convert_db' failed\nmake[2]: *** [bin/convert_db] Error 1\nCMakeFiles/Makefile2:2888: recipe for target 'binaries/CMakeFiles/convert_db.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/convert_db.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\nCMakeFiles/split_db.dir/split_db.cc.o: In function `_GLOBAL__sub_I_split_db.cc':\nsplit_db.cc:(.text.startup+0xae): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nsplit_db.cc:(.text.startup+0x198): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nCMakeFiles/make_cifar_db.dir/make_cifar_db.cc.o: In function `_GLOBAL__sub_I_make_cifar_db.cc':\nmake_cifar_db.cc:(.text.startup+0x22e): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nmake_cifar_db.cc:(.text.startup+0x2e9): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nmake_cifar_db.cc:(.text.startup+0x3a4): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nmake_cifar_db.cc:(.text.startup+0x45f): undefined reference to `binaries/CMakeFiles/split_db.dir/build.make:95: recipe for target 'bin/split_db' failed\nmake[2]: *** [bin/split_db] Error 1\nCMakeFiles/Makefile2:2806: recipe for target 'binaries/CMakeFiles/split_db.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/split_db.dir/all] Error 2\ngoogle::FlagRegisterer::FlagRegisterer<std[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_batch_permutation_op.cu.o\n::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/make_cifar_db.dir/build.make:95: recipe for target 'bin/make_cifar_db' failed\nmake[2]: *** [bin/make_cifar_db] Error 1\nCMakeFiles/Makefile2:2765: recipe for target 'binaries/CMakeFiles/make_cifar_db.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/make_cifar_db.dir/all] Error 2\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_ps_roi_pool_op.cu.o\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_group_spatial_softmax_op.cu.o\n[ 95%] Linking CXX executable ../bin/convert_caffe_image_db\nCMakeFiles/predictor_verifier.dir/predictor_verifier.cc.o: In function `_GLOBAL__sub_I_predictor_verifier.cc':\npredictor_verifier.cc:(.text.startup+0x16b): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\npredictor_verifier.cc:(.text.startup+0x233): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/predictor_verifier.dir/build.make:95: recipe for target 'bin/predictor_verifier' failed\nmake[2]: *** [bin/predictor_verifier] Error 1\nCMakeFiles/Makefile2:2847: recipe for target 'binaries/CMakeFiles/predictor_verifier.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/predictor_verifier.dir/all] Error 2\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_roi_pool_f_op.cu.o\nCMakeFiles/db_throughput.dir/db_throughput.cc.o: In function `_GLOBAL__sub_I_db_throughput.cc':\ndb_throughput.cc:(.text.startup+0xde): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\ndb_throughput.cc:(.text.startup+0x199): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/db_throughput.dir/build.make:95: recipe for target 'bin/db_throughput' failed\nmake[2]: *** [bin/db_throughput] Error 1\nCMakeFiles/Makefile2:2683: recipe for target 'binaries/CMakeFiles/db_throughput.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/db_throughput.dir/all] Error 2\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sample_as_op.cu.o\nCMakeFiles/convert_caffe_image_db.dir/convert_caffe_image_db.cc.o: In function `_GLOBAL__sub_I_convert_caffe_image_db.cc':\nconvert_caffe_image_db.cc:(.text.startup+0x177): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nconvert_caffe_image_db.cc:(.text.startup+0x22b): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nconvert_caffe_image_db.cc:(.text.startup+0x2df): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\nconvert_caffe_image_db.cc:(.text.startup+0x393): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\ncollect2: error: ld returned 1 exit status\nbinaries/CMakeFiles/convert_caffe_image_db.dir/build.make:95: recipe for target 'bin/convert_caffe_image_db' failed\nmake[2]: *** [bin/convert_caffe_image_db] Error 1\nCMakeFiles/Makefile2:2724: recipe for target 'binaries/CMakeFiles/convert_caffe_image_db.dir/all' failed\nmake[1]: *** [binaries/CMakeFiles/convert_caffe_image_db.dir/all] Error 2\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_select_smooth_l1_loss_op.cu.o\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sigmoid_cross_entropy_loss_op.cu.o\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sigmoid_focal_loss_op.cu.o\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_smooth_l1_loss_op.cu.o\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_softmax_focal_loss_op.cu.o\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_spatial_narrow_as_op.cu.o\n[ 96%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state_dlpack.cc.o\n[ 96%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state_gpu.cc.o\nScanning dependencies of target caffe2_detectron_ops_gpu\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/group_spatial_softmax_op.cc.o\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/ps_roi_pool_op.cc.o\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/roi_pool_f_op.cc.o\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/batch_permutation_op.cc.o\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sample_as_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/select_smooth_l1_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_cross_entropy_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_focal_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/smooth_l1_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/softmax_focal_loss_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/spatial_narrow_as_op.cc.o\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/upsample_nearest_op.cc.o\n[ 97%] Linking CXX shared module python/caffe2_pybind11_state_gpu.cpython-36m-x86_64-linux-gnu.so\n[ 97%] Built target caffe2_pybind11_state_gpu\n[ 97%] Linking CXX shared library ../../lib/libcaffe2_detectron_ops_gpu.so\n[ 97%] Built target caffe2_detectron_ops_gpu\nMakefile:140: recipe for target 'all' failed\nmake: *** [all] Error 2\n\nThere seems to be some version mismatch issues, but I don't know what exactly it is.\nI have tried something, but it still didn't fix these errors.\nIt has bothered me a few days. Any suggestions or ideas will be grateful!\nCode example\noutput of cmake:\nstd::exception_ptr is supported.\nNUMA is available\nCurrent compiler supports avx2 extention. Will build perfkernels.\nBuilding using own protobuf under third_party per request.\nUse custom protobuf build.\nCaffe2 protobuf include directory: $<BUILD_INTERFACE:/home/forestriveral/DeepLearning/Caffe2/pytorch/third_party/protobuf/src>$<INSTALL_INTERFACE:include>\nThe BLAS backend of choice:Eigen\nBrace yourself, we are building NNPACK\nFound PythonInterp: /home/forestriveral/anaconda3/envs/caffe2/bin/python (found version \"3.6.2\") \nCaffe2: Found gflags with new-style gflags target.\nCaffe2: Cannot find glog automatically. Using legacy find.\nCaffe2: Found glog (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libglog.so)\nFound lmdb    (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/liblmdb.so)\nFound LevelDB (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libleveldb.so)\nFound Snappy  (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libsnappy.so)\nFound Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)\nOpenCV found (/home/forestriveral/anaconda3/envs/caffe2/share/OpenCV)\nDid not find system Eigen. Using third party subdirectory.\nPython 3.6.2 :: Continuum Analytics, Inc.\n\nSetting Python's include dir to /home/forestriveral/anaconda3/envs/caffe2/include/python3.6m from distutils.sysconfig\nSetting Python's library to /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6\nFound PythonInterp: /home/forestriveral/anaconda3/envs/caffe2/bin/python (found suitable version \"3.6.2\", minimum required is \"2.7\") \nNumPy ver. 1.14.5 found (include: /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6/site-packages/numpy/core/include)\nFound pybind11: /home/forestriveral/DeepLearning/Caffe2/pytorch/third_party/pybind11/include  \nCaffe2: CUDA detected: 9.0\nCaffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc\nCaffe2: CUDA toolkit directory: /usr/local/cuda\nCaffe2: Header version is: 9.0\nFound cuDNN: v7.0.3  (include: /usr/local/cuda/include, library: /usr/local/cuda/lib64/libcudnn.so)\nAutodetected CUDA architecture(s): 6.1 \nAdded CUDA NVCC flags for: -gencode;arch=compute_61,code=sm_61\nCould NOT find CUB (missing: CUB_INCLUDE_DIR) \nCould NOT find Gloo (missing: Gloo_INCLUDE_DIR Gloo_LIBRARY) \nCUDA detected: 9.0\nFound libcuda: /usr/local/cuda/lib64/stubs/libcuda.so\nFound libnvrtc: /usr/local/cuda/lib64/libnvrtc.so\nGCC 5.4.0: Adding gcc and gcc_s libs to link line\nNCCL operators skipped due to no CUDA support\nExcluding ideep operators as we are not using ideep\nIncluding image processing operators\nExcluding video processing operators due to no opencv\nExcluding mkl operators as we are not using mkl\nMPI operators skipped due to no MPI support\nInclude Observer library\nUsing lib/python3.6/site-packages as python relative installation path\nAutomatically generating missing __init__.py files.\nA previous caffe2 cmake run already created the __init__.py files.\nCMake Warning at CMakeLists.txt:352 (message):\n  Generated cmake files are only fully tested if one builds with system glog,\n  gflags, and protobuf.  Other settings may generate files that are not well\n  tested.\n\n******** Summary ********\nGeneral:\n  CMake version         : 3.11.4\n  CMake command         : /opt/cmake-3.11.4-Linux-x86_64/bin/cmake\n  Git version           : v0.1.11-9397-gaa7af94-dirty\n  System                : Linux\n  C++ compiler          : /usr/bin/c++\n  C++ compiler version  : 5.4.0\n  BLAS                  : Eigen\n  CXX flags             :  -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations\n  Build type       : Release\n  Compile definitions   : \n  CMAKE_PREFIX_PATH     : \n  CMAKE_INSTALL_PREFIX  : /home/forestriveral/anaconda3/envs/caffe2\n  BUILD_CAFFE2          : ON\n  BUILD_ATEN            : OFF\n  BUILD_BINARY          : ON\n  BUILD_CUSTOM_PROTOBUF : ON\n    Link local protobuf : ON\n  BUILD_DOCS            : OFF\n  BUILD_PYTHON          : ON\n    Python version      : 3.6.2\n    Python executable   : /home/forestriveral/anaconda3/envs/caffe2/bin/python\n    Pythonlibs version  : 3.6.2\n    Python library      : /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6\n    Python includes     : /home/forestriveral/anaconda3/envs/caffe2/include/python3.6m\n    Python site-packages: lib/python3.6/site-packages\n  BUILD_SHARED_LIBS     : ON\n  BUILD_TEST            : OFF\n  USE_ASAN              : OFF\n  USE_ATEN              : OFF\n  USE_CUDA              : ON\n    CUDA static link    : OFF\n    USE_CUDNN           : ON\n    CUDA version        : 9.0\n    cuDNN version       : 7.0.3\n    CUDA root directory : /usr/local/cuda\n    CUDA library        : /usr/local/cuda/lib64/stubs/libcuda.so\n    cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\n    cublas library      : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\n    cufft library       : /usr/local/cuda/lib64/libcufft.so\n    curand library      : /usr/local/cuda/lib64/libcurand.so\n    cuDNN library       : /usr/local/cuda/lib64/libcudnn.so\n    nvrtc               : /usr/local/cuda/lib64/libnvrtc.so\n    CUDA include path   : /usr/local/cuda/include\n    NVCC executable     : /usr/local/cuda/bin/nvcc\n    CUDA host compiler  : /usr/bin/cc\n    USE_TENSORRT        : OFF\n  USE_ROCM              : OFF\n  USE_EIGEN_FOR_BLAS    : ON\n  USE_FFMPEG            : OFF\n  USE_GFLAGS            : ON\n  USE_GLOG              : ON\n  USE_GLOO              : ON\n    USE_GLOO_IBVERBS    : OFF\n  USE_LEVELDB           : ON\n    LevelDB version     : 1.19\n    Snappy version      : ..\n  USE_LITE_PROTO        : OFF\n  USE_LMDB              : ON\n    LMDB version        : 0.9.17\n  USE_METAL             : OFF\n  USE_MKL               : \n  USE_MOBILE_OPENGL     : OFF\n  USE_MPI               : OFF\n  USE_NCCL              : OFF\n  USE_NERVANA_GPU       : OFF\n  USE_NNPACK            : ON\n  USE_OBSERVERS         : ON\n  USE_OPENCL            : OFF\n  USE_OPENCV            : ON\n    OpenCV version      : 3.1.0\n  USE_OPENMP            : OFF\n  USE_PROF              : OFF\n  USE_REDIS             : OFF\n  USE_ROCKSDB           : OFF\n  USE_ZMQ               : OFF\n  Public Dependencies  : Threads::Threads;gflags;glog::glog\n  Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/home/forestriveral/anaconda3/envs/caffe2/lib/libleveldb.so;/home/forestriveral/anaconda3/envs/caffe2/lib/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;gloo;onnxifi_loader;gcc_s;gcc;dl\nConfiguring done\nGenerating done\n\nBefore I built Caffe2 from source codes, I followed the instructions of Pre-Built Binaries  installation in Anaconda.    conda install -c caffe2 caffe2-cuda9.0-cudnn7 \nhttps://caffe2.ai/docs/getting-started.html?platform=ubuntu&configuration=prebuilt#anaconda-install-path\nBut it showed that the package was missing and I also failed to manually download the package from  http://conda.anaconda.org/caffe2/linux-64. I don't know whether this way does really work.\nError:\nSolving environment: failed\nPackagesNotFoundError: The following packages are not available from current channels:\n       caffe2-cuda9.0-cudnn7\n\nMy aim is to run detectron on my Ubuntu platform.If there are some other ways to install Caffe2, I'd appreciate your advice on this issue! Thanks!\nSystem Info\n\nPyTorch or Caffe2: Caffe2\nHow you installed PyTorch (conda, pip, source):  camke of Caffe2\nBuild command you used (if compiling from source):  sudo make install -j8\nOS: Ubuntu 16.04\nPyTorch version: null\nPython version: 3.6.2 (Anaconda3)\nCUDA/cuDNN version:9.0 / 7.0.3\nGPU models and configuration: GTX1050\nGCC version (if compiling from source): 5.4.0\nCMake version: 3.11.4", "body": "I'm trying to build Caffe2 (with gpu supported) from source codes in Ubuntu16.04.\r\nAnd I followed the official instructions on the Caffe2 page.\r\nhttps://caffe2.ai/docs/getting-started.html?platform=mac&configuration=compile#anaconda-install-path\r\n\r\n```\r\n# Clone Caffe2's source code from our Github repository\r\ncd ~ && git clone --recursive https://github.com/pytorch/pytorch.git && cd pytorch\r\ngit submodule update --init\r\n# Create a directory to put Caffe2's build files in\r\nrm -rf build && mkdir build && cd build\r\n# Configure Caffe2's build\r\n# This looks for packages on your machine and figures out which functionality\r\n# to include in the Caffe2 installation. The output of this command is very\r\n# useful in debugging.\r\ncmake -DCMAKE_PREFIX_PATH=~/anaconda2/envs/my_caffe2_env -DCMAKE_INSTALL_PREFIX=~/anaconda2/envs/my_caffe2_env ..\r\n# Compile, link, and install Caffe2\r\nmake install\r\n```\r\nErrors ocurred during running the command\r\n` $ sudo make install -j8`\r\n\r\n## Issue description\r\nI activated the specific conda environment `Caffe2`.\r\nWhen compiling caffe2, the following errors occurred.\r\n**Error Output:**\r\n\r\n```[ 94%] Building CXX object caffe2/CMakeFiles/caffe2_gpu.dir/sgd/learning_rate_op_gpu.cc.o\r\n[ 94%] Linking CXX shared library ../lib/libcaffe2_gpu.so\r\n[ 94%] Built target caffe2_gpu\r\nScanning dependencies of target convert_caffe_image_db\r\nScanning dependencies of target db_throughput\r\nScanning dependencies of target convert_db\r\nScanning dependencies of target predictor_verifier\r\nScanning dependencies of target make_cifar_db\r\nScanning dependencies of target caffe2_pybind11_state_gpu\r\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_upsample_nearest_op.cu.o\r\nScanning dependencies of target split_db\r\n[ 94%] Building CXX object binaries/CMakeFiles/convert_db.dir/convert_db.cc.o\r\n[ 94%] Building CXX object binaries/CMakeFiles/split_db.dir/split_db.cc.o\r\n[ 94%] Building CXX object binaries/CMakeFiles/predictor_verifier.dir/predictor_verifier.cc.o\r\n[ 94%] Building CXX object binaries/CMakeFiles/convert_caffe_image_db.dir/convert_caffe_image_db.cc.o\r\n[ 94%] Building CXX object binaries/CMakeFiles/make_cifar_db.dir/make_cifar_db.cc.o\r\n[ 94%] Building CXX object binaries/CMakeFiles/db_throughput.dir/db_throughput.cc.o\r\n[ 94%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state.cc.o\r\n[ 94%] Linking CXX executable ../bin/convert_db\r\n[ 94%] Linking CXX executable ../bin/split_db\r\n[ 94%] Linking CXX executable ../bin/make_cifar_db\r\n[ 94%] Linking CXX executable ../bin/predictor_verifier\r\n[ 94%] Linking CXX executable ../bin/db_throughput\r\nCMakeFiles/convert_db.dir/convert_db.cc.o: In function `_GLOBAL__sub_I_convert_db.cc':\r\nconvert_db.cc:(.text.startup+0x4a7): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nconvert_db.cc:(.text.startup+0x55b): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nconvert_db.cc:(.text.startup+0x60f): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nconvert_db.cc:(.text.startup+0x6c3): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\r\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\r\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\ncollect2: error: ld returned 1 exit status\r\nbinaries/CMakeFiles/convert_db.dir/build.make:95: recipe for target 'bin/convert_db' failed\r\nmake[2]: *** [bin/convert_db] Error 1\r\nCMakeFiles/Makefile2:2888: recipe for target 'binaries/CMakeFiles/convert_db.dir/all' failed\r\nmake[1]: *** [binaries/CMakeFiles/convert_db.dir/all] Error 2\r\nmake[1]: *** Waiting for unfinished jobs....\r\nCMakeFiles/split_db.dir/split_db.cc.o: In function `_GLOBAL__sub_I_split_db.cc':\r\nsplit_db.cc:(.text.startup+0xae): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nsplit_db.cc:(.text.startup+0x198): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\r\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\r\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\ncollect2: error: ld returned 1 exit status\r\nCMakeFiles/make_cifar_db.dir/make_cifar_db.cc.o: In function `_GLOBAL__sub_I_make_cifar_db.cc':\r\nmake_cifar_db.cc:(.text.startup+0x22e): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nmake_cifar_db.cc:(.text.startup+0x2e9): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nmake_cifar_db.cc:(.text.startup+0x3a4): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nmake_cifar_db.cc:(.text.startup+0x45f): undefined reference to `binaries/CMakeFiles/split_db.dir/build.make:95: recipe for target 'bin/split_db' failed\r\nmake[2]: *** [bin/split_db] Error 1\r\nCMakeFiles/Makefile2:2806: recipe for target 'binaries/CMakeFiles/split_db.dir/all' failed\r\nmake[1]: *** [binaries/CMakeFiles/split_db.dir/all] Error 2\r\ngoogle::FlagRegisterer::FlagRegisterer<std[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_batch_permutation_op.cu.o\r\n::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\r\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\r\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\ncollect2: error: ld returned 1 exit status\r\nbinaries/CMakeFiles/make_cifar_db.dir/build.make:95: recipe for target 'bin/make_cifar_db' failed\r\nmake[2]: *** [bin/make_cifar_db] Error 1\r\nCMakeFiles/Makefile2:2765: recipe for target 'binaries/CMakeFiles/make_cifar_db.dir/all' failed\r\nmake[1]: *** [binaries/CMakeFiles/make_cifar_db.dir/all] Error 2\r\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_ps_roi_pool_op.cu.o\r\n[ 94%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_group_spatial_softmax_op.cu.o\r\n[ 95%] Linking CXX executable ../bin/convert_caffe_image_db\r\nCMakeFiles/predictor_verifier.dir/predictor_verifier.cc.o: In function `_GLOBAL__sub_I_predictor_verifier.cc':\r\npredictor_verifier.cc:(.text.startup+0x16b): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\npredictor_verifier.cc:(.text.startup+0x233): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\r\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\r\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\ncollect2: error: ld returned 1 exit status\r\nbinaries/CMakeFiles/predictor_verifier.dir/build.make:95: recipe for target 'bin/predictor_verifier' failed\r\nmake[2]: *** [bin/predictor_verifier] Error 1\r\nCMakeFiles/Makefile2:2847: recipe for target 'binaries/CMakeFiles/predictor_verifier.dir/all' failed\r\nmake[1]: *** [binaries/CMakeFiles/predictor_verifier.dir/all] Error 2\r\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_roi_pool_f_op.cu.o\r\nCMakeFiles/db_throughput.dir/db_throughput.cc.o: In function `_GLOBAL__sub_I_db_throughput.cc':\r\ndb_throughput.cc:(.text.startup+0xde): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\ndb_throughput.cc:(.text.startup+0x199): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\r\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\r\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\ncollect2: error: ld returned 1 exit status\r\nbinaries/CMakeFiles/db_throughput.dir/build.make:95: recipe for target 'bin/db_throughput' failed\r\nmake[2]: *** [bin/db_throughput] Error 1\r\nCMakeFiles/Makefile2:2683: recipe for target 'binaries/CMakeFiles/db_throughput.dir/all' failed\r\nmake[1]: *** [binaries/CMakeFiles/db_throughput.dir/all] Error 2\r\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sample_as_op.cu.o\r\nCMakeFiles/convert_caffe_image_db.dir/convert_caffe_image_db.cc.o: In function `_GLOBAL__sub_I_convert_caffe_image_db.cc':\r\nconvert_caffe_image_db.cc:(.text.startup+0x177): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nconvert_caffe_image_db.cc:(.text.startup+0x22b): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nconvert_caffe_image_db.cc:(.text.startup+0x2df): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\nconvert_caffe_image_db.cc:(.text.startup+0x393): undefined reference to `google::FlagRegisterer::FlagRegisterer<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(char const*, char const*, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'\r\n../lib/libcaffe2.so: undefined reference to `google::SetUsageMessage(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\n../lib/libcaffe2.so: undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'\r\n/home/forestriveral/DeepLearning/Caffe2/pytorch/build/lib/libcaffe2_gpu.so: undefined reference to `google::base::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\ncollect2: error: ld returned 1 exit status\r\nbinaries/CMakeFiles/convert_caffe_image_db.dir/build.make:95: recipe for target 'bin/convert_caffe_image_db' failed\r\nmake[2]: *** [bin/convert_caffe_image_db] Error 1\r\nCMakeFiles/Makefile2:2724: recipe for target 'binaries/CMakeFiles/convert_caffe_image_db.dir/all' failed\r\nmake[1]: *** [binaries/CMakeFiles/convert_caffe_image_db.dir/all] Error 2\r\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_select_smooth_l1_loss_op.cu.o\r\n[ 95%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sigmoid_cross_entropy_loss_op.cu.o\r\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_sigmoid_focal_loss_op.cu.o\r\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_smooth_l1_loss_op.cu.o\r\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_softmax_focal_loss_op.cu.o\r\n[ 96%] Building NVCC (Device) object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/caffe2_detectron_ops_gpu_generated_spatial_narrow_as_op.cu.o\r\n[ 96%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state_dlpack.cc.o\r\n[ 96%] Building CXX object caffe2/CMakeFiles/caffe2_pybind11_state_gpu.dir/python/pybind_state_gpu.cc.o\r\nScanning dependencies of target caffe2_detectron_ops_gpu\r\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/group_spatial_softmax_op.cc.o\r\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/ps_roi_pool_op.cc.o\r\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/roi_pool_f_op.cc.o\r\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/batch_permutation_op.cc.o\r\n[ 96%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sample_as_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/select_smooth_l1_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_cross_entropy_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/sigmoid_focal_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/smooth_l1_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/softmax_focal_loss_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/spatial_narrow_as_op.cc.o\r\n[ 97%] Building CXX object modules/detectron/CMakeFiles/caffe2_detectron_ops_gpu.dir/upsample_nearest_op.cc.o\r\n[ 97%] Linking CXX shared module python/caffe2_pybind11_state_gpu.cpython-36m-x86_64-linux-gnu.so\r\n[ 97%] Built target caffe2_pybind11_state_gpu\r\n[ 97%] Linking CXX shared library ../../lib/libcaffe2_detectron_ops_gpu.so\r\n[ 97%] Built target caffe2_detectron_ops_gpu\r\nMakefile:140: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n```\r\nThere seems to be some version mismatch issues, but I don't know what exactly it is. \r\nI have tried something, but it still didn't fix these errors.\r\nIt has bothered me a few days. Any suggestions or ideas will be grateful! \r\n\r\n\r\n## Code example\r\n**output of cmake:**\r\n\r\n```Does not need to define long separately.\r\nstd::exception_ptr is supported.\r\nNUMA is available\r\nCurrent compiler supports avx2 extention. Will build perfkernels.\r\nBuilding using own protobuf under third_party per request.\r\nUse custom protobuf build.\r\nCaffe2 protobuf include directory: $<BUILD_INTERFACE:/home/forestriveral/DeepLearning/Caffe2/pytorch/third_party/protobuf/src>$<INSTALL_INTERFACE:include>\r\nThe BLAS backend of choice:Eigen\r\nBrace yourself, we are building NNPACK\r\nFound PythonInterp: /home/forestriveral/anaconda3/envs/caffe2/bin/python (found version \"3.6.2\") \r\nCaffe2: Found gflags with new-style gflags target.\r\nCaffe2: Cannot find glog automatically. Using legacy find.\r\nCaffe2: Found glog (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libglog.so)\r\nFound lmdb    (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/liblmdb.so)\r\nFound LevelDB (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libleveldb.so)\r\nFound Snappy  (include: /home/forestriveral/anaconda3/envs/caffe2/include, library: /home/forestriveral/anaconda3/envs/caffe2/lib/libsnappy.so)\r\nFound Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)\r\nOpenCV found (/home/forestriveral/anaconda3/envs/caffe2/share/OpenCV)\r\nDid not find system Eigen. Using third party subdirectory.\r\nPython 3.6.2 :: Continuum Analytics, Inc.\r\n\r\nSetting Python's include dir to /home/forestriveral/anaconda3/envs/caffe2/include/python3.6m from distutils.sysconfig\r\nSetting Python's library to /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6\r\nFound PythonInterp: /home/forestriveral/anaconda3/envs/caffe2/bin/python (found suitable version \"3.6.2\", minimum required is \"2.7\") \r\nNumPy ver. 1.14.5 found (include: /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6/site-packages/numpy/core/include)\r\nFound pybind11: /home/forestriveral/DeepLearning/Caffe2/pytorch/third_party/pybind11/include  \r\nCaffe2: CUDA detected: 9.0\r\nCaffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc\r\nCaffe2: CUDA toolkit directory: /usr/local/cuda\r\nCaffe2: Header version is: 9.0\r\nFound cuDNN: v7.0.3  (include: /usr/local/cuda/include, library: /usr/local/cuda/lib64/libcudnn.so)\r\nAutodetected CUDA architecture(s): 6.1 \r\nAdded CUDA NVCC flags for: -gencode;arch=compute_61,code=sm_61\r\nCould NOT find CUB (missing: CUB_INCLUDE_DIR) \r\nCould NOT find Gloo (missing: Gloo_INCLUDE_DIR Gloo_LIBRARY) \r\nCUDA detected: 9.0\r\nFound libcuda: /usr/local/cuda/lib64/stubs/libcuda.so\r\nFound libnvrtc: /usr/local/cuda/lib64/libnvrtc.so\r\nGCC 5.4.0: Adding gcc and gcc_s libs to link line\r\nNCCL operators skipped due to no CUDA support\r\nExcluding ideep operators as we are not using ideep\r\nIncluding image processing operators\r\nExcluding video processing operators due to no opencv\r\nExcluding mkl operators as we are not using mkl\r\nMPI operators skipped due to no MPI support\r\nInclude Observer library\r\nUsing lib/python3.6/site-packages as python relative installation path\r\nAutomatically generating missing __init__.py files.\r\nA previous caffe2 cmake run already created the __init__.py files.\r\nCMake Warning at CMakeLists.txt:352 (message):\r\n  Generated cmake files are only fully tested if one builds with system glog,\r\n  gflags, and protobuf.  Other settings may generate files that are not well\r\n  tested.\r\n\r\n******** Summary ********\r\nGeneral:\r\n  CMake version         : 3.11.4\r\n  CMake command         : /opt/cmake-3.11.4-Linux-x86_64/bin/cmake\r\n  Git version           : v0.1.11-9397-gaa7af94-dirty\r\n  System                : Linux\r\n  C++ compiler          : /usr/bin/c++\r\n  C++ compiler version  : 5.4.0\r\n  BLAS                  : Eigen\r\n  CXX flags             :  -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations\r\n  Build type       : Release\r\n  Compile definitions   : \r\n  CMAKE_PREFIX_PATH     : \r\n  CMAKE_INSTALL_PREFIX  : /home/forestriveral/anaconda3/envs/caffe2\r\n  BUILD_CAFFE2          : ON\r\n  BUILD_ATEN            : OFF\r\n  BUILD_BINARY          : ON\r\n  BUILD_CUSTOM_PROTOBUF : ON\r\n    Link local protobuf : ON\r\n  BUILD_DOCS            : OFF\r\n  BUILD_PYTHON          : ON\r\n    Python version      : 3.6.2\r\n    Python executable   : /home/forestriveral/anaconda3/envs/caffe2/bin/python\r\n    Pythonlibs version  : 3.6.2\r\n    Python library      : /home/forestriveral/anaconda3/envs/caffe2/lib/python3.6\r\n    Python includes     : /home/forestriveral/anaconda3/envs/caffe2/include/python3.6m\r\n    Python site-packages: lib/python3.6/site-packages\r\n  BUILD_SHARED_LIBS     : ON\r\n  BUILD_TEST            : OFF\r\n  USE_ASAN              : OFF\r\n  USE_ATEN              : OFF\r\n  USE_CUDA              : ON\r\n    CUDA static link    : OFF\r\n    USE_CUDNN           : ON\r\n    CUDA version        : 9.0\r\n    cuDNN version       : 7.0.3\r\n    CUDA root directory : /usr/local/cuda\r\n    CUDA library        : /usr/local/cuda/lib64/stubs/libcuda.so\r\n    cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\r\n    cublas library      : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\r\n    cufft library       : /usr/local/cuda/lib64/libcufft.so\r\n    curand library      : /usr/local/cuda/lib64/libcurand.so\r\n    cuDNN library       : /usr/local/cuda/lib64/libcudnn.so\r\n    nvrtc               : /usr/local/cuda/lib64/libnvrtc.so\r\n    CUDA include path   : /usr/local/cuda/include\r\n    NVCC executable     : /usr/local/cuda/bin/nvcc\r\n    CUDA host compiler  : /usr/bin/cc\r\n    USE_TENSORRT        : OFF\r\n  USE_ROCM              : OFF\r\n  USE_EIGEN_FOR_BLAS    : ON\r\n  USE_FFMPEG            : OFF\r\n  USE_GFLAGS            : ON\r\n  USE_GLOG              : ON\r\n  USE_GLOO              : ON\r\n    USE_GLOO_IBVERBS    : OFF\r\n  USE_LEVELDB           : ON\r\n    LevelDB version     : 1.19\r\n    Snappy version      : ..\r\n  USE_LITE_PROTO        : OFF\r\n  USE_LMDB              : ON\r\n    LMDB version        : 0.9.17\r\n  USE_METAL             : OFF\r\n  USE_MKL               : \r\n  USE_MOBILE_OPENGL     : OFF\r\n  USE_MPI               : OFF\r\n  USE_NCCL              : OFF\r\n  USE_NERVANA_GPU       : OFF\r\n  USE_NNPACK            : ON\r\n  USE_OBSERVERS         : ON\r\n  USE_OPENCL            : OFF\r\n  USE_OPENCV            : ON\r\n    OpenCV version      : 3.1.0\r\n  USE_OPENMP            : OFF\r\n  USE_PROF              : OFF\r\n  USE_REDIS             : OFF\r\n  USE_ROCKSDB           : OFF\r\n  USE_ZMQ               : OFF\r\n  Public Dependencies  : Threads::Threads;gflags;glog::glog\r\n  Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/home/forestriveral/anaconda3/envs/caffe2/lib/libleveldb.so;/home/forestriveral/anaconda3/envs/caffe2/lib/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;gloo;onnxifi_loader;gcc_s;gcc;dl\r\nConfiguring done\r\nGenerating done\r\n```\r\nBefore I built Caffe2 from source codes, I followed the instructions of Pre-Built Binaries  installation in Anaconda.    ``conda install -c caffe2 caffe2-cuda9.0-cudnn7 ``\r\nhttps://caffe2.ai/docs/getting-started.html?platform=ubuntu&configuration=prebuilt#anaconda-install-path\r\nBut it showed that the package was missing and I also failed to manually download the package from  http://conda.anaconda.org/caffe2/linux-64. I don't know whether this way does really work. \r\n**Error:**\r\n```\r\nSolving environment: failed\r\nPackagesNotFoundError: The following packages are not available from current channels:\r\n       caffe2-cuda9.0-cudnn7\r\n```\r\nMy aim is to run detectron on my Ubuntu platform.If there are some other ways to install Caffe2, I'd appreciate your advice on this issue! Thanks!\r\n\r\n## System Info\r\n\r\n- PyTorch or Caffe2: Caffe2\r\n- How you installed PyTorch (conda, pip, source):  camke of Caffe2\r\n- Build command you used (if compiling from source):  sudo make install -j8\r\n- OS: Ubuntu 16.04\r\n- PyTorch version: null\r\n- Python version: 3.6.2 (Anaconda3)\r\n- CUDA/cuDNN version:9.0 / 7.0.3\r\n- GPU models and configuration: GTX1050\r\n- GCC version (if compiling from source): 5.4.0\r\n- CMake version: 3.11.4\r\n"}
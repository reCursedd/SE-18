{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4381", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4381/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4381/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4381/events", "html_url": "https://github.com/pytorch/pytorch/issues/4381", "id": 284934761, "node_id": "MDU6SXNzdWUyODQ5MzQ3NjE=", "number": 4381, "title": "pad_sequences duplicates variable", "user": {"login": "williamFalcon", "id": 3640001, "node_id": "MDQ6VXNlcjM2NDAwMDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/3640001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/williamFalcon", "html_url": "https://github.com/williamFalcon", "followers_url": "https://api.github.com/users/williamFalcon/followers", "following_url": "https://api.github.com/users/williamFalcon/following{/other_user}", "gists_url": "https://api.github.com/users/williamFalcon/gists{/gist_id}", "starred_url": "https://api.github.com/users/williamFalcon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/williamFalcon/subscriptions", "organizations_url": "https://api.github.com/users/williamFalcon/orgs", "repos_url": "https://api.github.com/users/williamFalcon/repos", "events_url": "https://api.github.com/users/williamFalcon/events{/privacy}", "received_events_url": "https://api.github.com/users/williamFalcon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-28T15:18:05Z", "updated_at": "2017-12-28T23:35:20Z", "closed_at": "2017-12-28T23:35:20Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"highlight highlight-source-python\"><pre>    <span class=\"pl-k\">from</span> torch.nn.utils.rnn <span class=\"pl-k\">import</span> pad_sequence\n\n    seq_lengths <span class=\"pl-k\">=</span> [<span class=\"pl-c1\">12</span>, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">1</span>]\n    a <span class=\"pl-k\">=</span> Variable(torch.randn(<span class=\"pl-c1\">12</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">10</span>))\n    b <span class=\"pl-k\">=</span> Variable(torch.randn(<span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">10</span>))\n    c <span class=\"pl-k\">=</span> Variable(torch.randn(<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">10</span>))\n\n    pad_sequence([a, b, c])</pre></div>\n<p>Errors:</p>\n<pre><code>File \"/Developer/floor_rnn/floor_rnn/models/utils/early_rnn.py\", line 92, in pad_sequence\n    out_variable.select(batch_dim, i)[:length] = variable\n  File \"anaconda/envs/torch/lib/python3.6/site-packages/torch/autograd/variable.py\", line 85, in __setitem__\n    return SetItem.apply(self, key, value)\nRuntimeError: in-place operations can be only used on variables that don't share storage with any other variables, but detected that there are 2 objects sharing it\n</code></pre>", "body_text": "from torch.nn.utils.rnn import pad_sequence\n\n    seq_lengths = [12, 2, 1]\n    a = Variable(torch.randn(12, 1, 10))\n    b = Variable(torch.randn(2, 1, 10))\n    c = Variable(torch.randn(1, 1, 10))\n\n    pad_sequence([a, b, c])\nErrors:\nFile \"/Developer/floor_rnn/floor_rnn/models/utils/early_rnn.py\", line 92, in pad_sequence\n    out_variable.select(batch_dim, i)[:length] = variable\n  File \"anaconda/envs/torch/lib/python3.6/site-packages/torch/autograd/variable.py\", line 85, in __setitem__\n    return SetItem.apply(self, key, value)\nRuntimeError: in-place operations can be only used on variables that don't share storage with any other variables, but detected that there are 2 objects sharing it", "body": "```python\r\n    from torch.nn.utils.rnn import pad_sequence\r\n\r\n    seq_lengths = [12, 2, 1]\r\n    a = Variable(torch.randn(12, 1, 10))\r\n    b = Variable(torch.randn(2, 1, 10))\r\n    c = Variable(torch.randn(1, 1, 10))\r\n\r\n    pad_sequence([a, b, c])\r\n```\r\n\r\nErrors:    \r\n```\r\nFile \"/Developer/floor_rnn/floor_rnn/models/utils/early_rnn.py\", line 92, in pad_sequence\r\n    out_variable.select(batch_dim, i)[:length] = variable\r\n  File \"anaconda/envs/torch/lib/python3.6/site-packages/torch/autograd/variable.py\", line 85, in __setitem__\r\n    return SetItem.apply(self, key, value)\r\nRuntimeError: in-place operations can be only used on variables that don't share storage with any other variables, but detected that there are 2 objects sharing it\r\n```"}
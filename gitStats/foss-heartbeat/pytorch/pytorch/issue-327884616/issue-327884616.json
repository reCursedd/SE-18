{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7961", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7961/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7961/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7961/events", "html_url": "https://github.com/pytorch/pytorch/issues/7961", "id": 327884616, "node_id": "MDU6SXNzdWUzMjc4ODQ2MTY=", "number": 7961, "title": "[Bug report] RuntimeError: backward_input can only be called in training mode", "user": {"login": "edchengg", "id": 20430102, "node_id": "MDQ6VXNlcjIwNDMwMTAy", "avatar_url": "https://avatars0.githubusercontent.com/u/20430102?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edchengg", "html_url": "https://github.com/edchengg", "followers_url": "https://api.github.com/users/edchengg/followers", "following_url": "https://api.github.com/users/edchengg/following{/other_user}", "gists_url": "https://api.github.com/users/edchengg/gists{/gist_id}", "starred_url": "https://api.github.com/users/edchengg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edchengg/subscriptions", "organizations_url": "https://api.github.com/users/edchengg/orgs", "repos_url": "https://api.github.com/users/edchengg/repos", "events_url": "https://api.github.com/users/edchengg/events{/privacy}", "received_events_url": "https://api.github.com/users/edchengg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-05-30T20:21:51Z", "updated_at": "2018-06-20T21:46:44Z", "closed_at": "2018-06-20T21:46:44Z", "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>The code runs fine on CPU and GPU(pytorch 0.3) but failed on GPU(pytorch 0.4).</p>\n<h2>Code example</h2>\n<p>code can be found from this:<br>\n<a href=\"https://github.com/wiseodd/controlled-text-generation\">https://github.com/wiseodd/controlled-text-generation</a></p>\n<p>Error message:</p>\n<p>Traceback (most recent call last):<br>\nFile \"train_discriminator.py\", line 308, in<br>\nmain()<br>\nFile \"train_discriminator.py\", line 239, in main<br>\nloss_G.backward()<br>\nFile \"/home-nfs/yangc1/anaconda3/envs/speech/lib/python3.6/site-packages/torch/tensor.py\", line 93, in backward<br>\ntorch.autograd.backward(self, gradient, retain_graph, create_graph)<br>\nFile \"/home-nfs/yangc1/anaconda3/envs/speech/lib/python3.6/site-packages/torch/autograd/init.py\", line 89, in backward<br>\nallow_unreachable=True) # allow_unreachable flag<br>\nRuntimeError: backward_input can only be called in training mode</p>\n<h2>System Info</h2>\n<p>Please copy and paste the output from our<br>\n<a href=\"https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py\" rel=\"nofollow\">environment collection script</a><br>\n(or fill out the checklist below manually).</p>\n<p>You can get the script from here<br>\n<a href=\"https://github.com/wiseodd/controlled-text-generation\">https://github.com/wiseodd/controlled-text-generation</a></p>\n<p>and run it with:</p>\n<pre><code>python train_vae.py --save {--gpu}\npython train_discriminator --save {--gpu}\n</code></pre>\n<ul>\n<li>PyTorch or Caffe2: pytorch</li>\n<li>PyTorch version: 0.4</li>\n<li>Python version: 3.6</li>\n<li>CUDA/cuDNN version: 8</li>\n</ul>", "body_text": "Issue description\nThe code runs fine on CPU and GPU(pytorch 0.3) but failed on GPU(pytorch 0.4).\nCode example\ncode can be found from this:\nhttps://github.com/wiseodd/controlled-text-generation\nError message:\nTraceback (most recent call last):\nFile \"train_discriminator.py\", line 308, in\nmain()\nFile \"train_discriminator.py\", line 239, in main\nloss_G.backward()\nFile \"/home-nfs/yangc1/anaconda3/envs/speech/lib/python3.6/site-packages/torch/tensor.py\", line 93, in backward\ntorch.autograd.backward(self, gradient, retain_graph, create_graph)\nFile \"/home-nfs/yangc1/anaconda3/envs/speech/lib/python3.6/site-packages/torch/autograd/init.py\", line 89, in backward\nallow_unreachable=True) # allow_unreachable flag\nRuntimeError: backward_input can only be called in training mode\nSystem Info\nPlease copy and paste the output from our\nenvironment collection script\n(or fill out the checklist below manually).\nYou can get the script from here\nhttps://github.com/wiseodd/controlled-text-generation\nand run it with:\npython train_vae.py --save {--gpu}\npython train_discriminator --save {--gpu}\n\n\nPyTorch or Caffe2: pytorch\nPyTorch version: 0.4\nPython version: 3.6\nCUDA/cuDNN version: 8", "body": "## Issue description\r\n\r\nThe code runs fine on CPU and GPU(pytorch 0.3) but failed on GPU(pytorch 0.4).\r\n\r\n## Code example\r\ncode can be found from this:\r\nhttps://github.com/wiseodd/controlled-text-generation\r\n\r\nError message:\r\n\r\nTraceback (most recent call last):\r\nFile \"train_discriminator.py\", line 308, in \r\nmain()\r\nFile \"train_discriminator.py\", line 239, in main\r\nloss_G.backward()\r\nFile \"/home-nfs/yangc1/anaconda3/envs/speech/lib/python3.6/site-packages/torch/tensor.py\", line 93, in backward\r\ntorch.autograd.backward(self, gradient, retain_graph, create_graph)\r\nFile \"/home-nfs/yangc1/anaconda3/envs/speech/lib/python3.6/site-packages/torch/autograd/init.py\", line 89, in backward\r\nallow_unreachable=True) # allow_unreachable flag\r\nRuntimeError: backward_input can only be called in training mode\r\n\r\n\r\n## System Info\r\nPlease copy and paste the output from our\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)\r\n(or fill out the checklist below manually).\r\n\r\nYou can get the script from here \r\nhttps://github.com/wiseodd/controlled-text-generation\r\n\r\nand run it with:\r\n```\r\npython train_vae.py --save {--gpu}\r\npython train_discriminator --save {--gpu}\r\n```\r\n\r\n- PyTorch or Caffe2: pytorch\r\n- PyTorch version: 0.4\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: 8\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7959", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7959/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7959/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7959/events", "html_url": "https://github.com/pytorch/pytorch/pull/7959", "id": 327873060, "node_id": "MDExOlB1bGxSZXF1ZXN0MTkxNTYwNzY3", "number": 7959, "title": "Fix EmbeddingBag max_norm option", "user": {"login": "SsnL", "id": 5674597, "node_id": "MDQ6VXNlcjU2NzQ1OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5674597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SsnL", "html_url": "https://github.com/SsnL", "followers_url": "https://api.github.com/users/SsnL/followers", "following_url": "https://api.github.com/users/SsnL/following{/other_user}", "gists_url": "https://api.github.com/users/SsnL/gists{/gist_id}", "starred_url": "https://api.github.com/users/SsnL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SsnL/subscriptions", "organizations_url": "https://api.github.com/users/SsnL/orgs", "repos_url": "https://api.github.com/users/SsnL/repos", "events_url": "https://api.github.com/users/SsnL/events{/privacy}", "received_events_url": "https://api.github.com/users/SsnL/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-30T19:46:05Z", "updated_at": "2018-05-31T18:01:20Z", "closed_at": "2018-05-31T13:42:57Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/7959", "html_url": "https://github.com/pytorch/pytorch/pull/7959", "diff_url": "https://github.com/pytorch/pytorch/pull/7959.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/7959.patch"}, "body_html": "<ol>\n<li><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #7947.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"327632400\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/7947\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/7947/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/7947\">#7947</a></li>\n<li>Added entries for <code>embedding</code>, <code>embedding_bag</code>, <code>gumbel_softmax</code> under <code>nn.functional</code></li>\n<li>Improved embedding and embedding bag docs (both Module and functional forms). It took me way tooo long staring at previous docs to figure out what <code>offset</code>, <code>max_norm</code>, <code>scale_grad_by_freq</code> exactly does.</li>\n<li>Added test for <code>max_norm</code> in testing <code>EmbeddingBag</code>.</li>\n<li>Swapped positional args <code>input</code> and <code>weight</code> in <code>F.embedding_bag</code> with BC fix (discussed with <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1310570\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/soumith\">@soumith</a> )</li>\n</ol>\n<p>Also, cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1716488\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/cpuhrsch\">@cpuhrsch</a>  the new test with <code>max_norm</code> set easily fails with CUDA. Basically any value below 3 seem to fail. But on CPU it is stable even when <code>max_norm=0.1</code>. I'll open an issue after this is merged.</p>", "body_text": "Fixes #7947\nAdded entries for embedding, embedding_bag, gumbel_softmax under nn.functional\nImproved embedding and embedding bag docs (both Module and functional forms). It took me way tooo long staring at previous docs to figure out what offset, max_norm, scale_grad_by_freq exactly does.\nAdded test for max_norm in testing EmbeddingBag.\nSwapped positional args input and weight in F.embedding_bag with BC fix (discussed with @soumith )\n\nAlso, cc @cpuhrsch  the new test with max_norm set easily fails with CUDA. Basically any value below 3 seem to fail. But on CPU it is stable even when max_norm=0.1. I'll open an issue after this is merged.", "body": "1. Fixes #7947 \r\n2. Added entries for `embedding`, `embedding_bag`, `gumbel_softmax` under `nn.functional`\r\n3. Improved embedding and embedding bag docs (both Module and functional forms). It took me way tooo long staring at previous docs to figure out what `offset`, `max_norm`, `scale_grad_by_freq` exactly does.\r\n4. Added test for `max_norm` in testing `EmbeddingBag`.\r\n5. Swapped positional args `input` and `weight` in `F.embedding_bag` with BC fix (discussed with @soumith )\r\n\r\nAlso, cc @cpuhrsch  the new test with `max_norm` set easily fails with CUDA. Basically any value below 3 seem to fail. But on CPU it is stable even when `max_norm=0.1`. I'll open an issue after this is merged."}
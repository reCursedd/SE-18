{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/318143377", "html_url": "https://github.com/pytorch/pytorch/pull/1792#issuecomment-318143377", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1792", "id": 318143377, "node_id": "MDEyOklzc3VlQ29tbWVudDMxODE0MzM3Nw==", "user": {"login": "F0REacH", "id": 2180791, "node_id": "MDQ6VXNlcjIxODA3OTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/2180791?v=4", "gravatar_id": "", "url": "https://api.github.com/users/F0REacH", "html_url": "https://github.com/F0REacH", "followers_url": "https://api.github.com/users/F0REacH/followers", "following_url": "https://api.github.com/users/F0REacH/following{/other_user}", "gists_url": "https://api.github.com/users/F0REacH/gists{/gist_id}", "starred_url": "https://api.github.com/users/F0REacH/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/F0REacH/subscriptions", "organizations_url": "https://api.github.com/users/F0REacH/orgs", "repos_url": "https://api.github.com/users/F0REacH/repos", "events_url": "https://api.github.com/users/F0REacH/events{/privacy}", "received_events_url": "https://api.github.com/users/F0REacH/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-26T18:34:50Z", "updated_at": "2017-07-26T18:34:50Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=687194\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/alykhantejani\">@alykhantejani</a> Fix from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"245191487\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/2195\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/2195/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/2195\">#2195</a> gives some unexpected behavior:<br>\n<code>input, target = torch.Tensor([-100.0]), torch.Tensor([0]) print(F.binary_cross_entropy(torch.sigmoid(input), torch.Tensor(target)))</code></p>\n<blockquote>\n<p>Variable containing:<br>\n1.00000e-12 *<br>\n-1.0001<br>\n[torch.FloatTensor of size 1]</p>\n</blockquote>\n<p><code>print(F.binary_cross_entropy_with_logits(input, torch.Tensor(target)))</code></p>\n<blockquote>\n<p>inf</p>\n</blockquote>\n<p><code>neg_abs = - input.abs() loss = input.clamp(min=0) - input * target + (1 + neg_abs.exp()).log() print(loss)</code></p>\n<blockquote>\n<p>0<br>\n[torch.FloatTensor of size 1]</p>\n</blockquote>", "body_text": "@alykhantejani Fix from #2195 gives some unexpected behavior:\ninput, target = torch.Tensor([-100.0]), torch.Tensor([0]) print(F.binary_cross_entropy(torch.sigmoid(input), torch.Tensor(target)))\n\nVariable containing:\n1.00000e-12 *\n-1.0001\n[torch.FloatTensor of size 1]\n\nprint(F.binary_cross_entropy_with_logits(input, torch.Tensor(target)))\n\ninf\n\nneg_abs = - input.abs() loss = input.clamp(min=0) - input * target + (1 + neg_abs.exp()).log() print(loss)\n\n0\n[torch.FloatTensor of size 1]", "body": "@alykhantejani Fix from #2195 gives some unexpected behavior:\r\n`\r\ninput, target = torch.Tensor([-100.0]), torch.Tensor([0])\r\nprint(F.binary_cross_entropy(torch.sigmoid(input), torch.Tensor(target)))\r\n`\r\n>Variable containing:\r\n1.00000e-12 *\r\n -1.0001\r\n[torch.FloatTensor of size 1]\r\n\r\n\r\n\r\n`\r\nprint(F.binary_cross_entropy_with_logits(input, torch.Tensor(target)))\r\n`\r\n> inf\r\n\r\n`\r\nneg_abs = - input.abs()\r\nloss = input.clamp(min=0) - input * target + (1 + neg_abs.exp()).log()\r\nprint(loss)\r\n`\r\n> 0\r\n[torch.FloatTensor of size 1]"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12396", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12396/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12396/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12396/events", "html_url": "https://github.com/pytorch/pytorch/issues/12396", "id": 367367377, "node_id": "MDU6SXNzdWUzNjczNjczNzc=", "number": 12396, "title": "Improve CircleCI configuration", "user": {"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yf225", "id": 4063635, "node_id": "MDQ6VXNlcjQwNjM2MzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4063635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yf225", "html_url": "https://github.com/yf225", "followers_url": "https://api.github.com/users/yf225/followers", "following_url": "https://api.github.com/users/yf225/following{/other_user}", "gists_url": "https://api.github.com/users/yf225/gists{/gist_id}", "starred_url": "https://api.github.com/users/yf225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yf225/subscriptions", "organizations_url": "https://api.github.com/users/yf225/orgs", "repos_url": "https://api.github.com/users/yf225/repos", "events_url": "https://api.github.com/users/yf225/events{/privacy}", "received_events_url": "https://api.github.com/users/yf225/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-10-05T21:01:51Z", "updated_at": "2018-11-20T19:01:53Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Reduce copy-pasta, make things more DRY.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Try to fix Caffe2 flaky tests in order to get rid of intermediate Docker image push. (See issue: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"367366546\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/12395\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/12395/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/12395\">#12395</a>) (One solution I am exploring is to have CircleCI run our jobs on a new AMI that matches our Jenkins AMI more closely.)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Show CircleCI master and PR statuses on <a href=\"https://ezyang.github.io/pytorch-ci-hud/\" rel=\"nofollow\">https://ezyang.github.io/pytorch-ci-hud/</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Right now the Docker image push flow is \"create a new image\" -&gt; \"test against master\" -&gt; \"push to ECR\" -&gt; \"update DockerVersion.groovy\". But once all Linux jobs are removed from Jenkins, we might want to do \"create a new image\" -&gt; \"push to ECR\" -&gt; \"open PR to test against master\" -&gt; \"merge new image version number into master config.yml\". For the ECR clean up job in Jenkins, we will let it check the newest version number from PyTorch repo and do the clean up accordingly.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Move Docker image build process to CircleCI entirely.</li>\n</ul>\n<p>For more details, see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"367355259\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/12389\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/12389/hovercard?comment_id=427491549&amp;comment_type=issue_comment\" href=\"https://github.com/pytorch/pytorch/pull/12389#issuecomment-427491549\">#12389 (comment)</a>.</p>", "body_text": "Reduce copy-pasta, make things more DRY.\n Try to fix Caffe2 flaky tests in order to get rid of intermediate Docker image push. (See issue: #12395) (One solution I am exploring is to have CircleCI run our jobs on a new AMI that matches our Jenkins AMI more closely.)\n Show CircleCI master and PR statuses on https://ezyang.github.io/pytorch-ci-hud/\n Right now the Docker image push flow is \"create a new image\" -> \"test against master\" -> \"push to ECR\" -> \"update DockerVersion.groovy\". But once all Linux jobs are removed from Jenkins, we might want to do \"create a new image\" -> \"push to ECR\" -> \"open PR to test against master\" -> \"merge new image version number into master config.yml\". For the ECR clean up job in Jenkins, we will let it check the newest version number from PyTorch repo and do the clean up accordingly.\n Move Docker image build process to CircleCI entirely.\n\nFor more details, see #12389 (comment).", "body": "- [x] Reduce copy-pasta, make things more DRY.\r\n- [x] Try to fix Caffe2 flaky tests in order to get rid of intermediate Docker image push. (See issue: https://github.com/pytorch/pytorch/issues/12395) (One solution I am exploring is to have CircleCI run our jobs on a new AMI that matches our Jenkins AMI more closely.)\r\n- [ ] Show CircleCI master and PR statuses on https://ezyang.github.io/pytorch-ci-hud/\r\n- [x] Right now the Docker image push flow is \"create a new image\" -> \"test against master\" -> \"push to ECR\" -> \"update DockerVersion.groovy\". But once all Linux jobs are removed from Jenkins, we might want to do \"create a new image\" -> \"push to ECR\" -> \"open PR to test against master\" -> \"merge new image version number into master config.yml\". For the ECR clean up job in Jenkins, we will let it check the newest version number from PyTorch repo and do the clean up accordingly.\r\n- [ ] Move Docker image build process to CircleCI entirely.\r\n\r\nFor more details, see https://github.com/pytorch/pytorch/pull/12389#issuecomment-427491549."}
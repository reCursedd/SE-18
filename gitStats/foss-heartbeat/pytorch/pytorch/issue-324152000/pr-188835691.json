{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/7653", "id": 188835691, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4ODM1Njkx", "html_url": "https://github.com/pytorch/pytorch/pull/7653", "diff_url": "https://github.com/pytorch/pytorch/pull/7653.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/7653.patch", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7653", "number": 7653, "state": "open", "locked": false, "title": "[caffe2][nomnigraph] External input/output support", "user": {"login": "bwasti", "id": 4842908, "node_id": "MDQ6VXNlcjQ4NDI5MDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4842908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bwasti", "html_url": "https://github.com/bwasti", "followers_url": "https://api.github.com/users/bwasti/followers", "following_url": "https://api.github.com/users/bwasti/following{/other_user}", "gists_url": "https://api.github.com/users/bwasti/gists{/gist_id}", "starred_url": "https://api.github.com/users/bwasti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bwasti/subscriptions", "organizations_url": "https://api.github.com/users/bwasti/orgs", "repos_url": "https://api.github.com/users/bwasti/repos", "events_url": "https://api.github.com/users/bwasti/events{/privacy}", "received_events_url": "https://api.github.com/users/bwasti/received_events", "type": "User", "site_admin": false}, "body": "This PR brings the ownership of blob names into the hands of nomnigraph, which may not always be beneficial.  I'd appreciate feedback on how to best allow users to specify blob-name optimizations while maintaining the SSA format nomnigraph canonically uses (and ultimately injects into caffe2 via this diff).\r\n\r\nWhat this diff does:\r\n\r\n- Versions all blobs.\r\n- Recreates in-place ops manually by setting the input and output to the same version.\r\n- Outputs names for all the blobs by appending `_{version number}`\r\n- Rectifies input and output blobnames (based on external_input/external_output fed from caffe2 earlier).\r\n\r\nI think it'll be beneficial to use this API (of only preserving input and output names of the *entire* graph), but I can see how that will change many things.  I'd appreciate opinions on the matter \ud83d\ude04 ", "created_at": "2018-05-17T19:19:06Z", "updated_at": "2018-11-23T15:44:24Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "bbfd7b096498479ad18db4a7357a455ad95a5ef1", "assignee": null, "assignees": [], "requested_reviewers": [{"login": "ilia-cher", "id": 30845429, "node_id": "MDQ6VXNlcjMwODQ1NDI5", "avatar_url": "https://avatars1.githubusercontent.com/u/30845429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilia-cher", "html_url": "https://github.com/ilia-cher", "followers_url": "https://api.github.com/users/ilia-cher/followers", "following_url": "https://api.github.com/users/ilia-cher/following{/other_user}", "gists_url": "https://api.github.com/users/ilia-cher/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilia-cher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilia-cher/subscriptions", "organizations_url": "https://api.github.com/users/ilia-cher/orgs", "repos_url": "https://api.github.com/users/ilia-cher/repos", "events_url": "https://api.github.com/users/ilia-cher/events{/privacy}", "received_events_url": "https://api.github.com/users/ilia-cher/received_events", "type": "User", "site_admin": false}, {"login": "aazzolini", "id": 37222419, "node_id": "MDQ6VXNlcjM3MjIyNDE5", "avatar_url": "https://avatars2.githubusercontent.com/u/37222419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aazzolini", "html_url": "https://github.com/aazzolini", "followers_url": "https://api.github.com/users/aazzolini/followers", "following_url": "https://api.github.com/users/aazzolini/following{/other_user}", "gists_url": "https://api.github.com/users/aazzolini/gists{/gist_id}", "starred_url": "https://api.github.com/users/aazzolini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aazzolini/subscriptions", "organizations_url": "https://api.github.com/users/aazzolini/orgs", "repos_url": "https://api.github.com/users/aazzolini/repos", "events_url": "https://api.github.com/users/aazzolini/events{/privacy}", "received_events_url": "https://api.github.com/users/aazzolini/received_events", "type": "User", "site_admin": false}], "requested_teams": [], "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/pytorch/pytorch/pulls/7653/commits", "review_comments_url": "https://api.github.com/repos/pytorch/pytorch/pulls/7653/comments", "review_comment_url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7653/comments", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/7ce031223ff0bd268a4220f46ccb2b5eeb2e61be", "head": {"label": "bwasti:input_output_tracking", "ref": "input_output_tracking", "sha": "7ce031223ff0bd268a4220f46ccb2b5eeb2e61be", "user": {"login": "bwasti", "id": 4842908, "node_id": "MDQ6VXNlcjQ4NDI5MDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4842908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bwasti", "html_url": "https://github.com/bwasti", "followers_url": "https://api.github.com/users/bwasti/followers", "following_url": "https://api.github.com/users/bwasti/following{/other_user}", "gists_url": "https://api.github.com/users/bwasti/gists{/gist_id}", "starred_url": "https://api.github.com/users/bwasti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bwasti/subscriptions", "organizations_url": "https://api.github.com/users/bwasti/orgs", "repos_url": "https://api.github.com/users/bwasti/repos", "events_url": "https://api.github.com/users/bwasti/events{/privacy}", "received_events_url": "https://api.github.com/users/bwasti/received_events", "type": "User", "site_admin": false}, "repo": {"id": 128470629, "node_id": "MDEwOlJlcG9zaXRvcnkxMjg0NzA2Mjk=", "name": "pytorch", "full_name": "bwasti/pytorch", "private": false, "owner": {"login": "bwasti", "id": 4842908, "node_id": "MDQ6VXNlcjQ4NDI5MDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4842908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bwasti", "html_url": "https://github.com/bwasti", "followers_url": "https://api.github.com/users/bwasti/followers", "following_url": "https://api.github.com/users/bwasti/following{/other_user}", "gists_url": "https://api.github.com/users/bwasti/gists{/gist_id}", "starred_url": "https://api.github.com/users/bwasti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bwasti/subscriptions", "organizations_url": "https://api.github.com/users/bwasti/orgs", "repos_url": "https://api.github.com/users/bwasti/repos", "events_url": "https://api.github.com/users/bwasti/events{/privacy}", "received_events_url": "https://api.github.com/users/bwasti/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/bwasti/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": true, "url": "https://api.github.com/repos/bwasti/pytorch", "forks_url": "https://api.github.com/repos/bwasti/pytorch/forks", "keys_url": "https://api.github.com/repos/bwasti/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/bwasti/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/bwasti/pytorch/teams", "hooks_url": "https://api.github.com/repos/bwasti/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/bwasti/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/bwasti/pytorch/events", "assignees_url": "https://api.github.com/repos/bwasti/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/bwasti/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/bwasti/pytorch/tags", "blobs_url": "https://api.github.com/repos/bwasti/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/bwasti/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/bwasti/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/bwasti/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/bwasti/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/bwasti/pytorch/languages", "stargazers_url": "https://api.github.com/repos/bwasti/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/bwasti/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/bwasti/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/bwasti/pytorch/subscription", "commits_url": "https://api.github.com/repos/bwasti/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/bwasti/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/bwasti/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/bwasti/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/bwasti/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/bwasti/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/bwasti/pytorch/merges", "archive_url": "https://api.github.com/repos/bwasti/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/bwasti/pytorch/downloads", "issues_url": "https://api.github.com/repos/bwasti/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/bwasti/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/bwasti/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/bwasti/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/bwasti/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/bwasti/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/bwasti/pytorch/deployments", "created_at": "2018-04-06T21:08:51Z", "updated_at": "2018-07-20T20:09:01Z", "pushed_at": "2018-11-20T07:26:19Z", "git_url": "git://github.com/bwasti/pytorch.git", "ssh_url": "git@github.com:bwasti/pytorch.git", "clone_url": "https://github.com/bwasti/pytorch.git", "svn_url": "https://github.com/bwasti/pytorch", "homepage": "http://pytorch.org", "size": 86408, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "pytorch:master", "ref": "master", "sha": "ec42a1141083f1266c079756c96df287c965b18e", "user": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 65600975, "node_id": "MDEwOlJlcG9zaXRvcnk2NTYwMDk3NQ==", "name": "pytorch", "full_name": "pytorch/pytorch", "private": false, "owner": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/pytorch/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": false, "url": "https://api.github.com/repos/pytorch/pytorch", "forks_url": "https://api.github.com/repos/pytorch/pytorch/forks", "keys_url": "https://api.github.com/repos/pytorch/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pytorch/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pytorch/pytorch/teams", "hooks_url": "https://api.github.com/repos/pytorch/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/pytorch/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/pytorch/pytorch/events", "assignees_url": "https://api.github.com/repos/pytorch/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/pytorch/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/pytorch/pytorch/tags", "blobs_url": "https://api.github.com/repos/pytorch/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pytorch/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pytorch/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pytorch/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/pytorch/pytorch/languages", "stargazers_url": "https://api.github.com/repos/pytorch/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/pytorch/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/pytorch/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/pytorch/pytorch/subscription", "commits_url": "https://api.github.com/repos/pytorch/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pytorch/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pytorch/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pytorch/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/pytorch/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pytorch/pytorch/merges", "archive_url": "https://api.github.com/repos/pytorch/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pytorch/pytorch/downloads", "issues_url": "https://api.github.com/repos/pytorch/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/pytorch/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/pytorch/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/pytorch/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pytorch/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/pytorch/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/pytorch/pytorch/deployments", "created_at": "2016-08-13T05:26:41Z", "updated_at": "2018-11-24T14:27:35Z", "pushed_at": "2018-11-24T12:42:01Z", "git_url": "git://github.com/pytorch/pytorch.git", "ssh_url": "git@github.com:pytorch/pytorch.git", "clone_url": "https://github.com/pytorch/pytorch.git", "svn_url": "https://github.com/pytorch/pytorch", "homepage": "http://pytorch.org", "size": 89656, "stargazers_count": 21591, "watchers_count": 21591, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 5154, "mirror_url": null, "archived": false, "open_issues_count": 2196, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 5154, "open_issues": 2196, "watchers": 21591, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/7653"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/7653"}, "issue": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/7653"}, "comments": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/7653/comments"}, "review_comments": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/7653/comments"}, "review_comment": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/7653/commits"}, "statuses": {"href": "https://api.github.com/repos/pytorch/pytorch/statuses/7ce031223ff0bd268a4220f46ccb2b5eeb2e61be"}}, "author_association": "CONTRIBUTOR", "body_html": "<p>This PR brings the ownership of blob names into the hands of nomnigraph, which may not always be beneficial.  I'd appreciate feedback on how to best allow users to specify blob-name optimizations while maintaining the SSA format nomnigraph canonically uses (and ultimately injects into caffe2 via this diff).</p>\n<p>What this diff does:</p>\n<ul>\n<li>Versions all blobs.</li>\n<li>Recreates in-place ops manually by setting the input and output to the same version.</li>\n<li>Outputs names for all the blobs by appending <code>_{version number}</code></li>\n<li>Rectifies input and output blobnames (based on external_input/external_output fed from caffe2 earlier).</li>\n</ul>\n<p>I think it'll be beneficial to use this API (of only preserving input and output names of the <em>entire</em> graph), but I can see how that will change many things.  I'd appreciate opinions on the matter <g-emoji class=\"g-emoji\" alias=\"smile\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png\">\ud83d\ude04</g-emoji></p>", "body_text": "This PR brings the ownership of blob names into the hands of nomnigraph, which may not always be beneficial.  I'd appreciate feedback on how to best allow users to specify blob-name optimizations while maintaining the SSA format nomnigraph canonically uses (and ultimately injects into caffe2 via this diff).\nWhat this diff does:\n\nVersions all blobs.\nRecreates in-place ops manually by setting the input and output to the same version.\nOutputs names for all the blobs by appending _{version number}\nRectifies input and output blobnames (based on external_input/external_output fed from caffe2 earlier).\n\nI think it'll be beneficial to use this API (of only preserving input and output names of the entire graph), but I can see how that will change many things.  I'd appreciate opinions on the matter \ud83d\ude04", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 0, "review_comments": 19, "maintainer_can_modify": true, "commits": 1, "additions": 122, "deletions": 7, "changed_files": 4}
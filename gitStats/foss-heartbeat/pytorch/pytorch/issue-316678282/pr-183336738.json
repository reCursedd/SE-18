{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/6854", "id": 183336738, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgzMzM2NzM4", "html_url": "https://github.com/pytorch/pytorch/pull/6854", "diff_url": "https://github.com/pytorch/pytorch/pull/6854.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/6854.patch", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6854", "number": 6854, "state": "closed", "locked": false, "title": "[WIP] Working MSVC 2015 Build", "user": {"login": "bstriner", "id": 12462956, "node_id": "MDQ6VXNlcjEyNDYyOTU2", "avatar_url": "https://avatars3.githubusercontent.com/u/12462956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstriner", "html_url": "https://github.com/bstriner", "followers_url": "https://api.github.com/users/bstriner/followers", "following_url": "https://api.github.com/users/bstriner/following{/other_user}", "gists_url": "https://api.github.com/users/bstriner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstriner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstriner/subscriptions", "organizations_url": "https://api.github.com/users/bstriner/orgs", "repos_url": "https://api.github.com/users/bstriner/repos", "events_url": "https://api.github.com/users/bstriner/events{/privacy}", "received_events_url": "https://api.github.com/users/bstriner/received_events", "type": "User", "site_admin": false}, "body": "Hi everybody!\r\n\r\nA few modifications to get pytorch up and running with a Visual Studio 14 2015 Win64 cmake build. This build currently works on my machine but I need to make sure I haven't broken something on another platform. Several different issues addressed. Would appreciate any feedback on solutions.\r\n\r\n- Lots of switches changed to ifs. This is most of the changes and nothing too surprising. Some macros were there already, some I added.\r\n- one static_assert had to become an assert. Not sure how the static_assert is supposed to be working because seems like a runtime issue to me.\r\n- weird issues with hashing. Had to add something so the custom template doesn't match things that are hashable to avoid ambiguity. Also had to add a custom specific hash function for 2 classes for some reason.\r\n- weirdest issue is cnt_to_dst_idx_functor. It has const members so the operator= is deleted, but the operator= is being referenced somewhere and causing a compilation issue. I added an operator= so it can compile. The root cause I have no idea about. Should it be assignable or not? If not, where is the operator= coming from?\r\n\r\nWould welcome any help from people with other windows rigs to try this build out.\r\n\r\nIn terms of actually running the build, here is my environment setup. Probably a few more variables than needed but it works. (These are actually the combined environment variables I used for Magma, numpy, mkldnn, pytorch, etc.)\r\n```\r\n\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\vcvars64.bat\"\r\n\"C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018\\windows\\mkl\\bin\\mklvars.bat\" intel64 lp64 vs2015\r\nset MKLDNN_HOME=C:\\Program Files\\Intel(R) MKL-DNN\r\nset MKLDNN_ROOT_DIR=C:\\Program Files\\Intel(R) MKL-DNN\r\nset MAGMA_HOME=C:\\Program Files\\MAGMA\r\nset MKL_HOME=%MKLROOT%\r\nset MKLDNN_INCLUDE_DIR=C:\\Program Files\\Intel(R) MKL-DNN\\include\r\nset MKLDNN_LIB_DIR=C:\\Program Files\\Intel(R) MKL-DNN\\lib\r\nset MKLDNN_LIBRARY=C:\\Program Files\\Intel(R) MKL-DNN\\mkldnn.lib\r\nset MKL_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\mkl\\lib\r\nset OPENMP_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\compiler\\lib\\intel64_win\r\nset TBB_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\tbb\\lib\\intel64_win\\vc_mt\r\nset TORCH_CUDA_ARCH_LIST=6.1\r\nset MKL_INCLUDE_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\mkl\\include\r\nset CMAKE_LIBRARY_PATH=%MKLDNN_LIB_DIR%;%OPENMP_LIB_DIR%;%TBB_LIB_DIR%;%MKL_LIB_DIR%\r\nset CMAKE_INCLUDE_PATH=%MKL_INCLUDE_DIR%;%MKLDNN_INCLUDE_DIR%\r\nset CMAKE_GENERATOR=Visual Studio 14 2015 Win64\r\nset DISTUTILS_USE_SDK=1\r\n```\r\n\r\nCheers", "created_at": "2018-04-23T06:28:43Z", "updated_at": "2018-11-23T15:43:00Z", "closed_at": "2018-04-23T17:03:14Z", "merged_at": null, "merge_commit_sha": "02271f11d21387f1ae74fa58fe4277eb846c958e", "assignee": null, "assignees": [], "requested_reviewers": [{"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, {"login": "zdevito", "id": 370202, "node_id": "MDQ6VXNlcjM3MDIwMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/370202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdevito", "html_url": "https://github.com/zdevito", "followers_url": "https://api.github.com/users/zdevito/followers", "following_url": "https://api.github.com/users/zdevito/following{/other_user}", "gists_url": "https://api.github.com/users/zdevito/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdevito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdevito/subscriptions", "organizations_url": "https://api.github.com/users/zdevito/orgs", "repos_url": "https://api.github.com/users/zdevito/repos", "events_url": "https://api.github.com/users/zdevito/events{/privacy}", "received_events_url": "https://api.github.com/users/zdevito/received_events", "type": "User", "site_admin": false}, {"login": "colesbury", "id": 655866, "node_id": "MDQ6VXNlcjY1NTg2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/655866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colesbury", "html_url": "https://github.com/colesbury", "followers_url": "https://api.github.com/users/colesbury/followers", "following_url": "https://api.github.com/users/colesbury/following{/other_user}", "gists_url": "https://api.github.com/users/colesbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/colesbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colesbury/subscriptions", "organizations_url": "https://api.github.com/users/colesbury/orgs", "repos_url": "https://api.github.com/users/colesbury/repos", "events_url": "https://api.github.com/users/colesbury/events{/privacy}", "received_events_url": "https://api.github.com/users/colesbury/received_events", "type": "User", "site_admin": false}, {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, {"login": "gchanan", "id": 3768583, "node_id": "MDQ6VXNlcjM3Njg1ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3768583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gchanan", "html_url": "https://github.com/gchanan", "followers_url": "https://api.github.com/users/gchanan/followers", "following_url": "https://api.github.com/users/gchanan/following{/other_user}", "gists_url": "https://api.github.com/users/gchanan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gchanan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gchanan/subscriptions", "organizations_url": "https://api.github.com/users/gchanan/orgs", "repos_url": "https://api.github.com/users/gchanan/repos", "events_url": "https://api.github.com/users/gchanan/events{/privacy}", "received_events_url": "https://api.github.com/users/gchanan/received_events", "type": "User", "site_admin": false}], "requested_teams": [], "labels": [], "milestone": null, "commits_url": "https://api.github.com/repos/pytorch/pytorch/pulls/6854/commits", "review_comments_url": "https://api.github.com/repos/pytorch/pytorch/pulls/6854/comments", "review_comment_url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6854/comments", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/bd0c57997f8a3957277062f6befa1be192d591ea", "head": {"label": "bstriner:fix_operator_equals", "ref": "fix_operator_equals", "sha": "bd0c57997f8a3957277062f6befa1be192d591ea", "user": {"login": "bstriner", "id": 12462956, "node_id": "MDQ6VXNlcjEyNDYyOTU2", "avatar_url": "https://avatars3.githubusercontent.com/u/12462956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstriner", "html_url": "https://github.com/bstriner", "followers_url": "https://api.github.com/users/bstriner/followers", "following_url": "https://api.github.com/users/bstriner/following{/other_user}", "gists_url": "https://api.github.com/users/bstriner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstriner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstriner/subscriptions", "organizations_url": "https://api.github.com/users/bstriner/orgs", "repos_url": "https://api.github.com/users/bstriner/repos", "events_url": "https://api.github.com/users/bstriner/events{/privacy}", "received_events_url": "https://api.github.com/users/bstriner/received_events", "type": "User", "site_admin": false}, "repo": {"id": 126265417, "node_id": "MDEwOlJlcG9zaXRvcnkxMjYyNjU0MTc=", "name": "pytorch", "full_name": "bstriner/pytorch", "private": false, "owner": {"login": "bstriner", "id": 12462956, "node_id": "MDQ6VXNlcjEyNDYyOTU2", "avatar_url": "https://avatars3.githubusercontent.com/u/12462956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstriner", "html_url": "https://github.com/bstriner", "followers_url": "https://api.github.com/users/bstriner/followers", "following_url": "https://api.github.com/users/bstriner/following{/other_user}", "gists_url": "https://api.github.com/users/bstriner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstriner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstriner/subscriptions", "organizations_url": "https://api.github.com/users/bstriner/orgs", "repos_url": "https://api.github.com/users/bstriner/repos", "events_url": "https://api.github.com/users/bstriner/events{/privacy}", "received_events_url": "https://api.github.com/users/bstriner/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/bstriner/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": true, "url": "https://api.github.com/repos/bstriner/pytorch", "forks_url": "https://api.github.com/repos/bstriner/pytorch/forks", "keys_url": "https://api.github.com/repos/bstriner/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/bstriner/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/bstriner/pytorch/teams", "hooks_url": "https://api.github.com/repos/bstriner/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/bstriner/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/bstriner/pytorch/events", "assignees_url": "https://api.github.com/repos/bstriner/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/bstriner/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/bstriner/pytorch/tags", "blobs_url": "https://api.github.com/repos/bstriner/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/bstriner/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/bstriner/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/bstriner/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/bstriner/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/bstriner/pytorch/languages", "stargazers_url": "https://api.github.com/repos/bstriner/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/bstriner/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/bstriner/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/bstriner/pytorch/subscription", "commits_url": "https://api.github.com/repos/bstriner/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/bstriner/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/bstriner/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/bstriner/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/bstriner/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/bstriner/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/bstriner/pytorch/merges", "archive_url": "https://api.github.com/repos/bstriner/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/bstriner/pytorch/downloads", "issues_url": "https://api.github.com/repos/bstriner/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/bstriner/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/bstriner/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/bstriner/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/bstriner/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/bstriner/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/bstriner/pytorch/deployments", "created_at": "2018-03-22T02:02:59Z", "updated_at": "2018-07-22T22:22:48Z", "pushed_at": "2018-07-22T22:22:10Z", "git_url": "git://github.com/bstriner/pytorch.git", "ssh_url": "git@github.com:bstriner/pytorch.git", "clone_url": "https://github.com/bstriner/pytorch.git", "svn_url": "https://github.com/bstriner/pytorch", "homepage": "http://pytorch.org", "size": 63931, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "pytorch:master", "ref": "master", "sha": "26ddefbda14d9b11d1c4f6be181d878a3deae418", "user": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 65600975, "node_id": "MDEwOlJlcG9zaXRvcnk2NTYwMDk3NQ==", "name": "pytorch", "full_name": "pytorch/pytorch", "private": false, "owner": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/pytorch/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": false, "url": "https://api.github.com/repos/pytorch/pytorch", "forks_url": "https://api.github.com/repos/pytorch/pytorch/forks", "keys_url": "https://api.github.com/repos/pytorch/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pytorch/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pytorch/pytorch/teams", "hooks_url": "https://api.github.com/repos/pytorch/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/pytorch/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/pytorch/pytorch/events", "assignees_url": "https://api.github.com/repos/pytorch/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/pytorch/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/pytorch/pytorch/tags", "blobs_url": "https://api.github.com/repos/pytorch/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pytorch/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pytorch/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pytorch/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/pytorch/pytorch/languages", "stargazers_url": "https://api.github.com/repos/pytorch/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/pytorch/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/pytorch/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/pytorch/pytorch/subscription", "commits_url": "https://api.github.com/repos/pytorch/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pytorch/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pytorch/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pytorch/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/pytorch/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pytorch/pytorch/merges", "archive_url": "https://api.github.com/repos/pytorch/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pytorch/pytorch/downloads", "issues_url": "https://api.github.com/repos/pytorch/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/pytorch/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/pytorch/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/pytorch/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pytorch/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/pytorch/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/pytorch/pytorch/deployments", "created_at": "2016-08-13T05:26:41Z", "updated_at": "2018-11-24T05:35:41Z", "pushed_at": "2018-11-24T05:34:07Z", "git_url": "git://github.com/pytorch/pytorch.git", "ssh_url": "git@github.com:pytorch/pytorch.git", "clone_url": "https://github.com/pytorch/pytorch.git", "svn_url": "https://github.com/pytorch/pytorch", "homepage": "http://pytorch.org", "size": 89651, "stargazers_count": 21577, "watchers_count": 21577, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 5149, "mirror_url": null, "archived": false, "open_issues_count": 2193, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 5149, "open_issues": 2193, "watchers": 21577, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6854"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/6854"}, "issue": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/6854"}, "comments": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/6854/comments"}, "review_comments": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6854/comments"}, "review_comment": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/6854/commits"}, "statuses": {"href": "https://api.github.com/repos/pytorch/pytorch/statuses/bd0c57997f8a3957277062f6befa1be192d591ea"}}, "author_association": "CONTRIBUTOR", "body_html": "<p>Hi everybody!</p>\n<p>A few modifications to get pytorch up and running with a Visual Studio 14 2015 Win64 cmake build. This build currently works on my machine but I need to make sure I haven't broken something on another platform. Several different issues addressed. Would appreciate any feedback on solutions.</p>\n<ul>\n<li>Lots of switches changed to ifs. This is most of the changes and nothing too surprising. Some macros were there already, some I added.</li>\n<li>one static_assert had to become an assert. Not sure how the static_assert is supposed to be working because seems like a runtime issue to me.</li>\n<li>weird issues with hashing. Had to add something so the custom template doesn't match things that are hashable to avoid ambiguity. Also had to add a custom specific hash function for 2 classes for some reason.</li>\n<li>weirdest issue is cnt_to_dst_idx_functor. It has const members so the operator= is deleted, but the operator= is being referenced somewhere and causing a compilation issue. I added an operator= so it can compile. The root cause I have no idea about. Should it be assignable or not? If not, where is the operator= coming from?</li>\n</ul>\n<p>Would welcome any help from people with other windows rigs to try this build out.</p>\n<p>In terms of actually running the build, here is my environment setup. Probably a few more variables than needed but it works. (These are actually the combined environment variables I used for Magma, numpy, mkldnn, pytorch, etc.)</p>\n<pre><code>\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\vcvars64.bat\"\n\"C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018\\windows\\mkl\\bin\\mklvars.bat\" intel64 lp64 vs2015\nset MKLDNN_HOME=C:\\Program Files\\Intel(R) MKL-DNN\nset MKLDNN_ROOT_DIR=C:\\Program Files\\Intel(R) MKL-DNN\nset MAGMA_HOME=C:\\Program Files\\MAGMA\nset MKL_HOME=%MKLROOT%\nset MKLDNN_INCLUDE_DIR=C:\\Program Files\\Intel(R) MKL-DNN\\include\nset MKLDNN_LIB_DIR=C:\\Program Files\\Intel(R) MKL-DNN\\lib\nset MKLDNN_LIBRARY=C:\\Program Files\\Intel(R) MKL-DNN\\mkldnn.lib\nset MKL_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\mkl\\lib\nset OPENMP_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\compiler\\lib\\intel64_win\nset TBB_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\tbb\\lib\\intel64_win\\vc_mt\nset TORCH_CUDA_ARCH_LIST=6.1\nset MKL_INCLUDE_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\mkl\\include\nset CMAKE_LIBRARY_PATH=%MKLDNN_LIB_DIR%;%OPENMP_LIB_DIR%;%TBB_LIB_DIR%;%MKL_LIB_DIR%\nset CMAKE_INCLUDE_PATH=%MKL_INCLUDE_DIR%;%MKLDNN_INCLUDE_DIR%\nset CMAKE_GENERATOR=Visual Studio 14 2015 Win64\nset DISTUTILS_USE_SDK=1\n</code></pre>\n<p>Cheers</p>", "body_text": "Hi everybody!\nA few modifications to get pytorch up and running with a Visual Studio 14 2015 Win64 cmake build. This build currently works on my machine but I need to make sure I haven't broken something on another platform. Several different issues addressed. Would appreciate any feedback on solutions.\n\nLots of switches changed to ifs. This is most of the changes and nothing too surprising. Some macros were there already, some I added.\none static_assert had to become an assert. Not sure how the static_assert is supposed to be working because seems like a runtime issue to me.\nweird issues with hashing. Had to add something so the custom template doesn't match things that are hashable to avoid ambiguity. Also had to add a custom specific hash function for 2 classes for some reason.\nweirdest issue is cnt_to_dst_idx_functor. It has const members so the operator= is deleted, but the operator= is being referenced somewhere and causing a compilation issue. I added an operator= so it can compile. The root cause I have no idea about. Should it be assignable or not? If not, where is the operator= coming from?\n\nWould welcome any help from people with other windows rigs to try this build out.\nIn terms of actually running the build, here is my environment setup. Probably a few more variables than needed but it works. (These are actually the combined environment variables I used for Magma, numpy, mkldnn, pytorch, etc.)\n\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\vcvars64.bat\"\n\"C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018\\windows\\mkl\\bin\\mklvars.bat\" intel64 lp64 vs2015\nset MKLDNN_HOME=C:\\Program Files\\Intel(R) MKL-DNN\nset MKLDNN_ROOT_DIR=C:\\Program Files\\Intel(R) MKL-DNN\nset MAGMA_HOME=C:\\Program Files\\MAGMA\nset MKL_HOME=%MKLROOT%\nset MKLDNN_INCLUDE_DIR=C:\\Program Files\\Intel(R) MKL-DNN\\include\nset MKLDNN_LIB_DIR=C:\\Program Files\\Intel(R) MKL-DNN\\lib\nset MKLDNN_LIBRARY=C:\\Program Files\\Intel(R) MKL-DNN\\mkldnn.lib\nset MKL_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\mkl\\lib\nset OPENMP_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\compiler\\lib\\intel64_win\nset TBB_LIB_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\tbb\\lib\\intel64_win\\vc_mt\nset TORCH_CUDA_ARCH_LIST=6.1\nset MKL_INCLUDE_DIR=C:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries_2018.2.185\\windows\\mkl\\include\nset CMAKE_LIBRARY_PATH=%MKLDNN_LIB_DIR%;%OPENMP_LIB_DIR%;%TBB_LIB_DIR%;%MKL_LIB_DIR%\nset CMAKE_INCLUDE_PATH=%MKL_INCLUDE_DIR%;%MKLDNN_INCLUDE_DIR%\nset CMAKE_GENERATOR=Visual Studio 14 2015 Win64\nset DISTUTILS_USE_SDK=1\n\nCheers", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 9, "review_comments": 13, "maintainer_can_modify": false, "commits": 13, "additions": 244, "deletions": 150, "changed_files": 13}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/232067506", "pull_request_review_id": 173180938, "id": 232067506, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjA2NzUwNg==", "diff_hunk": "@@ -234,12 +257,17 @@ int64_t FileStore::add(const std::string& key, int64_t i) {\n     auto len = value.size();\n     ti += std::stoll(std::string(buf, len));\n   }\n-\n+  // Always seek to the end to write\n+  file.seek(0, SEEK_END);", "path": "torch/lib/c10d/FileStore.cpp", "position": 95, "original_position": 57, "commit_id": "459f11878ca51fc436e69a78f8d1beefe44d12f9", "original_commit_id": "a6799f8f8371b9d5b0b4f821cf703cc85dd2f87e", "user": {"login": "teng-li", "id": 8120856, "node_id": "MDQ6VXNlcjgxMjA4NTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/8120856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teng-li", "html_url": "https://github.com/teng-li", "followers_url": "https://api.github.com/users/teng-li/followers", "following_url": "https://api.github.com/users/teng-li/following{/other_user}", "gists_url": "https://api.github.com/users/teng-li/gists{/gist_id}", "starred_url": "https://api.github.com/users/teng-li/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teng-li/subscriptions", "organizations_url": "https://api.github.com/users/teng-li/orgs", "repos_url": "https://api.github.com/users/teng-li/repos", "events_url": "https://api.github.com/users/teng-li/events{/privacy}", "received_events_url": "https://api.github.com/users/teng-li/received_events", "type": "User", "site_admin": false}, "body": "That's where the bug is, there is no guarantee that refresh will seek to the end.  And set will always move seek to the end, why not add, they are both the only two write paths.", "created_at": "2018-11-08T21:29:48Z", "updated_at": "2018-11-23T15:54:33Z", "html_url": "https://github.com/pytorch/pytorch/pull/13708#discussion_r232067506", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/13708", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/232067506"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/13708#discussion_r232067506"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/13708"}}, "body_html": "<p>That's where the bug is, there is no guarantee that refresh will seek to the end.  And set will always move seek to the end, why not add, they are both the only two write paths.</p>", "body_text": "That's where the bug is, there is no guarantee that refresh will seek to the end.  And set will always move seek to the end, why not add, they are both the only two write paths.", "in_reply_to_id": 231773446}
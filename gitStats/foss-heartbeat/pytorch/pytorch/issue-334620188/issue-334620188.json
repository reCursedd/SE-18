{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8753", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8753/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8753/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8753/events", "html_url": "https://github.com/pytorch/pytorch/pull/8753", "id": 334620188, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk2NTQ4MDgx", "number": 8753, "title": "Accumulate loss function reduce=True into accreal instead of real", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-06-21T19:08:38Z", "updated_at": "2018-07-09T21:14:54Z", "closed_at": "2018-07-09T21:14:54Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/8753", "html_url": "https://github.com/pytorch/pytorch/pull/8753", "diff_url": "https://github.com/pytorch/pytorch/pull/8753.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/8753.patch"}, "body_html": "<p>THNN was accumulating the result of reduction loss functions<br>\ninto real instead of accreal. This was causing precision issues with<br>\nMSELoss.</p>\n<p><del>I added precision tests for some of the losses (KLDivLoss, BCELoss,<br>\nL1Loss, SmoothL1Loss, MSELoss). The other ones are a bit harder<br>\nto test.</del></p>\n<p>This patch only fixes MSELoss. Some of the other losses exhibit bad precision as well (because they accumulate into real instead of accreal) and require more investigation. I will open an issue for those.</p>\n<p><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #8710.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"334249746\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/8710\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/8710/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/8710\">#8710</a></p>", "body_text": "THNN was accumulating the result of reduction loss functions\ninto real instead of accreal. This was causing precision issues with\nMSELoss.\nI added precision tests for some of the losses (KLDivLoss, BCELoss,\nL1Loss, SmoothL1Loss, MSELoss). The other ones are a bit harder\nto test.\nThis patch only fixes MSELoss. Some of the other losses exhibit bad precision as well (because they accumulate into real instead of accreal) and require more investigation. I will open an issue for those.\nFixes #8710", "body": "THNN was accumulating the result of reduction loss functions\r\ninto real instead of accreal. This was causing precision issues with\r\nMSELoss.\r\n\r\n~~I added precision tests for some of the losses (KLDivLoss, BCELoss,\r\nL1Loss, SmoothL1Loss, MSELoss). The other ones are a bit harder\r\nto test.~~\r\n\r\nThis patch only fixes MSELoss. Some of the other losses exhibit bad precision as well (because they accumulate into real instead of accreal) and require more investigation. I will open an issue for those.\r\n\r\nFixes #8710 \r\n\r\n"}
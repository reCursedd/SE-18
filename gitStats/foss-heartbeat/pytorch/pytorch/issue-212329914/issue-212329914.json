{"url": "https://api.github.com/repos/pytorch/pytorch/issues/946", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/946/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/946/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/946/events", "html_url": "https://github.com/pytorch/pytorch/issues/946", "id": 212329914, "node_id": "MDU6SXNzdWUyMTIzMjk5MTQ=", "number": 946, "title": "flaky VolumetricMaxPooling test", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 424131847, "node_id": "MDU6TGFiZWw0MjQxMzE4NDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bug", "name": "bug", "color": "b60205", "default": true}, {"id": 443484135, "node_id": "MDU6TGFiZWw0NDM0ODQxMzU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/high%20priority", "name": "high priority", "color": "F22613", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-07T04:49:07Z", "updated_at": "2017-03-07T15:55:46Z", "closed_at": "2017-03-07T15:55:46Z", "author_association": "MEMBER", "body_html": "<p>A few times, VolumetricMaxPooling (in legacy.nn) kept failing on the continuous builds, and needed to investigate that.</p>\n<p>So it turns out, there were these one set of indices that were in the same Pooling window that differed by less than epsilon. So, the numeric gradient was hitting boundary conditions (max-pooling is discontinuous of course).</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/1310570/23642248/2a678388-02c7-11e7-91a2-88a04aff2f34.png\"><img src=\"https://cloud.githubusercontent.com/assets/1310570/23642248/2a678388-02c7-11e7-91a2-88a04aff2f34.png\" alt=\"screen shot 2017-03-06 at 11 36 18 pm\" style=\"max-width:100%;\"></a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/1310570/23642250/2c3f4272-02c7-11e7-90c7-2913ec70107f.png\"><img src=\"https://cloud.githubusercontent.com/assets/1310570/23642250/2c3f4272-02c7-11e7-90c7-2913ec70107f.png\" alt=\"screen shot 2017-03-06 at 11 43 53 pm\" style=\"max-width:100%;\"></a></p>\n<p>The obvious fix is to modify the test to not have the input tensor have these boundary conditions.</p>\n<p>However, as an aside, I am not sure why the boundary condition is only hit sometimes and not always, because the same random numbers are generated always, and division is unstable but it is deterministic (right? or have i always got this wrong)</p>", "body_text": "A few times, VolumetricMaxPooling (in legacy.nn) kept failing on the continuous builds, and needed to investigate that.\nSo it turns out, there were these one set of indices that were in the same Pooling window that differed by less than epsilon. So, the numeric gradient was hitting boundary conditions (max-pooling is discontinuous of course).\n\n\nThe obvious fix is to modify the test to not have the input tensor have these boundary conditions.\nHowever, as an aside, I am not sure why the boundary condition is only hit sometimes and not always, because the same random numbers are generated always, and division is unstable but it is deterministic (right? or have i always got this wrong)", "body": "A few times, VolumetricMaxPooling (in legacy.nn) kept failing on the continuous builds, and needed to investigate that.\r\n\r\nSo it turns out, there were these one set of indices that were in the same Pooling window that differed by less than epsilon. So, the numeric gradient was hitting boundary conditions (max-pooling is discontinuous of course).\r\n\r\n![screen shot 2017-03-06 at 11 36 18 pm](https://cloud.githubusercontent.com/assets/1310570/23642248/2a678388-02c7-11e7-91a2-88a04aff2f34.png)\r\n![screen shot 2017-03-06 at 11 43 53 pm](https://cloud.githubusercontent.com/assets/1310570/23642250/2c3f4272-02c7-11e7-90c7-2913ec70107f.png)\r\n\r\nThe obvious fix is to modify the test to not have the input tensor have these boundary conditions.\r\n\r\nHowever, as an aside, I am not sure why the boundary condition is only hit sometimes and not always, because the same random numbers are generated always, and division is unstable but it is deterministic (right? or have i always got this wrong)\r\n\r\n"}
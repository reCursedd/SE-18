{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/338471682", "html_url": "https://github.com/pytorch/pytorch/issues/2575#issuecomment-338471682", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/2575", "id": 338471682, "node_id": "MDEyOklzc3VlQ29tbWVudDMzODQ3MTY4Mg==", "user": {"login": "MichaelLiang12", "id": 17873150, "node_id": "MDQ6VXNlcjE3ODczMTUw", "avatar_url": "https://avatars1.githubusercontent.com/u/17873150?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaelLiang12", "html_url": "https://github.com/MichaelLiang12", "followers_url": "https://api.github.com/users/MichaelLiang12/followers", "following_url": "https://api.github.com/users/MichaelLiang12/following{/other_user}", "gists_url": "https://api.github.com/users/MichaelLiang12/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaelLiang12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaelLiang12/subscriptions", "organizations_url": "https://api.github.com/users/MichaelLiang12/orgs", "repos_url": "https://api.github.com/users/MichaelLiang12/repos", "events_url": "https://api.github.com/users/MichaelLiang12/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaelLiang12/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-22T11:54:08Z", "updated_at": "2017-10-22T12:18:23Z", "author_association": "NONE", "body_html": "<p>Though I don't know its insight. Here are tricky phennomenons and possible solution:<br>\n1, When I use ipython6.2.1, I can't <code>import torch</code> with the problem as follows:</p>\n<pre><code>from torch._C import *\nImportError: dlopen: cannot load any more object with static TLS\n</code></pre>\n<p>2, When I use ipython4.2.0, <strong>I can run <code>import torch</code> successfully in direct execution</strong>,  but failed it debug mode as follows:</p>\n<pre><code>Connected to pydev debugger (build 172.3968.37)\nTraceback (most recent call last):\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/pydevd.py\", line 1599, in &lt;module&gt;\n    globals = debugger.run(setup['file'], None, None, is_module)\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/pydevd.py\", line 1026, in run\n    pydev_imports.execfile(file, globals, locals)  # execute the script\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/demo.py\", line 20, in &lt;module&gt;\n    from model.test import im_detect\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/../lib/model/test.py\", line 19, in &lt;module&gt;\n    from utils.timer import Timer\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/../lib/utils/timer.py\", line 9, in &lt;module&gt;\n    import torch\n  File \"/home/ljy/anaconda3/lib/python3.6/site-packages/torch/__init__.py\", line 53, in &lt;module&gt;\n    from torch._C import *\nImportError: dlopen: cannot load any more object with static TLS\n</code></pre>\n<p>As you can see, I <code>import torch</code> in <code>timer.py</code>, which is called by my main file <code>demo.py</code>. When I add <code>import torch</code> to all files in a recursively way, (I mean adding <code>import torch</code> to all files called in the nested calling of <code>error file</code>,like <code>timer.py</code> in the above illustration), problem solved!</p>\n<h1>Possible Solution</h1>\n<p><strong>Thus, I guess there is something conflict with ipython and torch. To alleviate the problem, you should</strong><br>\nIf you cannot run <code>import torch</code> in any case, you can try to install ipython4.2.0 by</p>\n<pre><code>pip uninstall ipython\npip install ipython==4.2.0\n</code></pre>\n<p>And if you want to debug the program using ipython, you can try <code>import torch</code> to all files used in the nested calling of the <code>error file</code>.<br>\nGood luck!</p>", "body_text": "Though I don't know its insight. Here are tricky phennomenons and possible solution:\n1, When I use ipython6.2.1, I can't import torch with the problem as follows:\nfrom torch._C import *\nImportError: dlopen: cannot load any more object with static TLS\n\n2, When I use ipython4.2.0, I can run import torch successfully in direct execution,  but failed it debug mode as follows:\nConnected to pydev debugger (build 172.3968.37)\nTraceback (most recent call last):\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/pydevd.py\", line 1599, in <module>\n    globals = debugger.run(setup['file'], None, None, is_module)\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/pydevd.py\", line 1026, in run\n    pydev_imports.execfile(file, globals, locals)  # execute the script\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/demo.py\", line 20, in <module>\n    from model.test import im_detect\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/../lib/model/test.py\", line 19, in <module>\n    from utils.timer import Timer\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/../lib/utils/timer.py\", line 9, in <module>\n    import torch\n  File \"/home/ljy/anaconda3/lib/python3.6/site-packages/torch/__init__.py\", line 53, in <module>\n    from torch._C import *\nImportError: dlopen: cannot load any more object with static TLS\n\nAs you can see, I import torch in timer.py, which is called by my main file demo.py. When I add import torch to all files in a recursively way, (I mean adding import torch to all files called in the nested calling of error file,like timer.py in the above illustration), problem solved!\nPossible Solution\nThus, I guess there is something conflict with ipython and torch. To alleviate the problem, you should\nIf you cannot run import torch in any case, you can try to install ipython4.2.0 by\npip uninstall ipython\npip install ipython==4.2.0\n\nAnd if you want to debug the program using ipython, you can try import torch to all files used in the nested calling of the error file.\nGood luck!", "body": "Though I don't know its insight. Here are tricky phennomenons and possible solution:\r\n1, When I use ipython6.2.1, I can't `import torch` with the problem as follows: \r\n```\r\nfrom torch._C import *\r\nImportError: dlopen: cannot load any more object with static TLS\r\n```\r\n2, When I use ipython4.2.0, **I can run `import torch` successfully in direct execution**,  but failed it debug mode as follows:\r\n```\r\nConnected to pydev debugger (build 172.3968.37)\r\nTraceback (most recent call last):\r\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/pydevd.py\", line 1599, in <module>\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/pydevd.py\", line 1026, in run\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"/usr/local/pycharm-community-2017.2.3/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/demo.py\", line 20, in <module>\r\n    from model.test import im_detect\r\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/../lib/model/test.py\", line 19, in <module>\r\n    from utils.timer import Timer\r\n  File \"/home/ljy/pytorch-examples-master/pytorch-faster-rcnn-master/tools/../lib/utils/timer.py\", line 9, in <module>\r\n    import torch\r\n  File \"/home/ljy/anaconda3/lib/python3.6/site-packages/torch/__init__.py\", line 53, in <module>\r\n    from torch._C import *\r\nImportError: dlopen: cannot load any more object with static TLS\r\n```\r\n\r\nAs you can see, I `import torch` in `timer.py`, which is called by my main file `demo.py`. When I add `import torch` to all files in a recursively way, (I mean adding `import torch` to all files called in the nested calling of `error file`,like `timer.py` in the above illustration), problem solved!\r\n\r\n# Possible Solution\r\n**Thus, I guess there is something conflict with ipython and torch. To alleviate the problem, you should** \r\nIf you cannot run `import torch` in any case, you can try to install ipython4.2.0 by \r\n```\r\npip uninstall ipython\r\npip install ipython==4.2.0\r\n```\r\nAnd if you want to debug the program using ipython, you can try `import torch` to all files used in the nested calling of the `error file`.\r\nGood luck!"}
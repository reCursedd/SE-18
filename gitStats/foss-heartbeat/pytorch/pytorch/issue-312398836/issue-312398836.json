{"url": "https://api.github.com/repos/pytorch/pytorch/issues/6414", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/6414/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/6414/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/6414/events", "html_url": "https://github.com/pytorch/pytorch/pull/6414", "id": 312398836, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgwMjE0NDMw", "number": 6414, "title": "[modcmake 2/N] Switch ATen target_link_libraries to new-style syntax", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-09T05:32:23Z", "updated_at": "2018-04-24T17:31:00Z", "closed_at": "2018-04-24T17:31:00Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/6414", "html_url": "https://github.com/pytorch/pytorch/pull/6414", "diff_url": "https://github.com/pytorch/pytorch/pull/6414.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/6414.patch"}, "body_html": "<p>Last patch only.</p>\n<pre><code>Modern CMake uses target_link_libraries with PUBLIC/PRIVATE keywords\nto specify how a library works.  This can matter quite a bit when\nyou are linking against a static versus a dynamic library: if you are\ncreating a dynamical library, it is a bad idea to link a static\nlibrary to it PUBLICally, as every downstream consumer will attempt\nto redundantly link that static library along with your dynamic\nlibrary (which is also exporting those static library symbols.)  This\nmanifested itself as a very weird error where linking verify_api_visibility\nwould lead to the message:\n\n    /opt/conda/lib/libmkl_gf_lp64.so: undefined reference to `mkl_lapack_zgbtrf'\n\nEven though everything else is in order.  Don't do that.\n</code></pre>\n<p>Previous patch in the series: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"312395980\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/6413\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/6413/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/6413\">#6413</a><br>\nFor the overall patch:  <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"310501657\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/6188\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/6188/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/6188\">#6188</a></p>", "body_text": "Last patch only.\nModern CMake uses target_link_libraries with PUBLIC/PRIVATE keywords\nto specify how a library works.  This can matter quite a bit when\nyou are linking against a static versus a dynamic library: if you are\ncreating a dynamical library, it is a bad idea to link a static\nlibrary to it PUBLICally, as every downstream consumer will attempt\nto redundantly link that static library along with your dynamic\nlibrary (which is also exporting those static library symbols.)  This\nmanifested itself as a very weird error where linking verify_api_visibility\nwould lead to the message:\n\n    /opt/conda/lib/libmkl_gf_lp64.so: undefined reference to `mkl_lapack_zgbtrf'\n\nEven though everything else is in order.  Don't do that.\n\nPrevious patch in the series: #6413\nFor the overall patch:  #6188", "body": "Last patch only.\r\n\r\n    Modern CMake uses target_link_libraries with PUBLIC/PRIVATE keywords\r\n    to specify how a library works.  This can matter quite a bit when\r\n    you are linking against a static versus a dynamic library: if you are\r\n    creating a dynamical library, it is a bad idea to link a static\r\n    library to it PUBLICally, as every downstream consumer will attempt\r\n    to redundantly link that static library along with your dynamic\r\n    library (which is also exporting those static library symbols.)  This\r\n    manifested itself as a very weird error where linking verify_api_visibility\r\n    would lead to the message:\r\n    \r\n        /opt/conda/lib/libmkl_gf_lp64.so: undefined reference to `mkl_lapack_zgbtrf'\r\n    \r\n    Even though everything else is in order.  Don't do that.\r\n\r\nPrevious patch in the series: #6413\r\nFor the overall patch:  #6188"}
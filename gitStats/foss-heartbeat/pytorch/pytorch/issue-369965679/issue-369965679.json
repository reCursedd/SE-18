{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12641", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12641/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12641/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12641/events", "html_url": "https://github.com/pytorch/pytorch/issues/12641", "id": 369965679, "node_id": "MDU6SXNzdWUzNjk5NjU2Nzk=", "number": 12641, "title": "Install Jetson TX2 Max Regcount Error", "user": {"login": "lesreaper", "id": 6892945, "node_id": "MDQ6VXNlcjY4OTI5NDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/6892945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesreaper", "html_url": "https://github.com/lesreaper", "followers_url": "https://api.github.com/users/lesreaper/followers", "following_url": "https://api.github.com/users/lesreaper/following{/other_user}", "gists_url": "https://api.github.com/users/lesreaper/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesreaper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesreaper/subscriptions", "organizations_url": "https://api.github.com/users/lesreaper/orgs", "repos_url": "https://api.github.com/users/lesreaper/repos", "events_url": "https://api.github.com/users/lesreaper/events{/privacy}", "received_events_url": "https://api.github.com/users/lesreaper/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 778855555, "node_id": "MDU6TGFiZWw3Nzg4NTU1NTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/build", "name": "build", "color": "bfdadc", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-15T01:15:52Z", "updated_at": "2018-10-25T19:47:07Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n\n<h2>To Reproduce</h2>\n<p>Steps to reproduce the behavior:</p>\n<ol>\n<li>Attempt to install from source on a fresh Jetpack 3.3 on nVidia Jetson TX2</li>\n<li>Instead of <code>python setup.py install</code>, install with <code>python3 setup.py install</code> (Tried with both, same error)</li>\n</ol>\n\n<p>Errors are:<br>\n...about 100 NVLink errors, listing the last few below along with final error log.<br>\nnvlink error   : entry function '_Z28ncclAllReduceLLKernel_sum_i88ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96<br>\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_i328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96<br>\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_f168ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96<br>\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_u328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96<br>\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_f328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96<br>\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_u648ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96<br>\nnvlink error   : entry function '_Z28ncclAllReduceLLKernel_sum_u88ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96<br>\nMakefile:83: recipe for target '/home/nvidia/jetson-reinforcement/build/pytorch/third_party/build/nccl/obj/collectives/device/devlink.o' failed<br>\nmake[5]: *** [/home/nvidia/jetson-reinforcement/build/pytorch/third_party/build/nccl/obj/collectives/device/devlink.o] Error 255<br>\nMakefile:45: recipe for target 'devicelib' failed<br>\nmake[4]: *** [devicelib] Error 2<br>\nMakefile:24: recipe for target 'src.build' failed<br>\nmake[3]: *** [src.build] Error 2<br>\nCMakeFiles/nccl.dir/build.make:60: recipe for target 'lib/libnccl.so' failed<br>\nmake[2]: *** [lib/libnccl.so] Error 2<br>\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/nccl.dir/all' failed<br>\nmake[1]: *** [CMakeFiles/nccl.dir/all] Error 2<br>\nMakefile:127: recipe for target 'all' failed<br>\nmake: *** [all] Error 2<br>\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 libshm gloo c10d THD'</p>\n<h2>Expected behavior</h2>\n\n<p>Install should work so that I can open a Python 3 console and can succesfully do: <code>import torch</code></p>\n<h2>Environment</h2>\n<p>Script does not run.</p>\n<ul>\n<li>PyTorch Version (e.g., 1.0): Latest master</li>\n<li>OS (e.g., Linux): nVidia Jetson TX2 Ubuntu, aarch64 architecture</li>\n<li>How you installed PyTorch (<code>conda</code>, <code>pip</code>, source): source</li>\n<li>Build command you used (if compiling from source): <code>python3 setup.py install</code></li>\n<li>Python version: 3.5.3</li>\n<li>CUDA/cuDNN version: 9.0, 7.0</li>\n<li>GPU models and configuration:</li>\n<li>Any other relevant information:</li>\n</ul>\n<p>There is no Conda build for aarch64, so have to use standard python libraries.</p>", "body_text": "\ud83d\udc1b Bug\n\nTo Reproduce\nSteps to reproduce the behavior:\n\nAttempt to install from source on a fresh Jetpack 3.3 on nVidia Jetson TX2\nInstead of python setup.py install, install with python3 setup.py install (Tried with both, same error)\n\n\nErrors are:\n...about 100 NVLink errors, listing the last few below along with final error log.\nnvlink error   : entry function '_Z28ncclAllReduceLLKernel_sum_i88ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_i328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_f168ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_u328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_f328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_u648ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\nnvlink error   : entry function '_Z28ncclAllReduceLLKernel_sum_u88ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\nMakefile:83: recipe for target '/home/nvidia/jetson-reinforcement/build/pytorch/third_party/build/nccl/obj/collectives/device/devlink.o' failed\nmake[5]: *** [/home/nvidia/jetson-reinforcement/build/pytorch/third_party/build/nccl/obj/collectives/device/devlink.o] Error 255\nMakefile:45: recipe for target 'devicelib' failed\nmake[4]: *** [devicelib] Error 2\nMakefile:24: recipe for target 'src.build' failed\nmake[3]: *** [src.build] Error 2\nCMakeFiles/nccl.dir/build.make:60: recipe for target 'lib/libnccl.so' failed\nmake[2]: *** [lib/libnccl.so] Error 2\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/nccl.dir/all' failed\nmake[1]: *** [CMakeFiles/nccl.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 libshm gloo c10d THD'\nExpected behavior\n\nInstall should work so that I can open a Python 3 console and can succesfully do: import torch\nEnvironment\nScript does not run.\n\nPyTorch Version (e.g., 1.0): Latest master\nOS (e.g., Linux): nVidia Jetson TX2 Ubuntu, aarch64 architecture\nHow you installed PyTorch (conda, pip, source): source\nBuild command you used (if compiling from source): python3 setup.py install\nPython version: 3.5.3\nCUDA/cuDNN version: 9.0, 7.0\nGPU models and configuration:\nAny other relevant information:\n\nThere is no Conda build for aarch64, so have to use standard python libraries.", "body": "## \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Attempt to install from source on a fresh Jetpack 3.3 on nVidia Jetson TX2\r\n2. Instead of ```python setup.py install```, install with ```python3 setup.py install``` (Tried with both, same error)\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\nErrors are:\r\n...about 100 NVLink errors, listing the last few below along with final error log.\r\nnvlink error   : entry function '_Z28ncclAllReduceLLKernel_sum_i88ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\r\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_i328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\r\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_f168ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\r\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_u328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\r\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_f328ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\r\nnvlink error   : entry function '_Z29ncclAllReduceLLKernel_sum_u648ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\r\nnvlink error   : entry function '_Z28ncclAllReduceLLKernel_sum_u88ncclColl' with max regcount of 80 calls function '_Z25ncclReduceScatter_max_u64P14CollectiveArgs' with regcount of 96\r\nMakefile:83: recipe for target '/home/nvidia/jetson-reinforcement/build/pytorch/third_party/build/nccl/obj/collectives/device/devlink.o' failed\r\nmake[5]: *** [/home/nvidia/jetson-reinforcement/build/pytorch/third_party/build/nccl/obj/collectives/device/devlink.o] Error 255\r\nMakefile:45: recipe for target 'devicelib' failed\r\nmake[4]: *** [devicelib] Error 2\r\nMakefile:24: recipe for target 'src.build' failed\r\nmake[3]: *** [src.build] Error 2\r\nCMakeFiles/nccl.dir/build.make:60: recipe for target 'lib/libnccl.so' failed\r\nmake[2]: *** [lib/libnccl.so] Error 2\r\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/nccl.dir/all' failed\r\nmake[1]: *** [CMakeFiles/nccl.dir/all] Error 2\r\nMakefile:127: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-cuda --use-nnpack nccl caffe2 libshm gloo c10d THD'\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nInstall should work so that I can open a Python 3 console and can succesfully do: ```import torch```\r\n## Environment\r\n\r\nScript does not run.\r\n\r\n - PyTorch Version (e.g., 1.0): Latest master\r\n - OS (e.g., Linux): nVidia Jetson TX2 Ubuntu, aarch64 architecture\r\n - How you installed PyTorch (`conda`, `pip`, source): source\r\n - Build command you used (if compiling from source): ```python3 setup.py install```\r\n - Python version: 3.5.3\r\n - CUDA/cuDNN version: 9.0, 7.0\r\n - GPU models and configuration:\r\n - Any other relevant information:\r\n\r\nThere is no Conda build for aarch64, so have to use standard python libraries.\r\n"}
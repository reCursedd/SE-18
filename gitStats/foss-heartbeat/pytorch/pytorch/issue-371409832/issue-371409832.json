{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12810", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12810/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12810/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12810/events", "html_url": "https://github.com/pytorch/pytorch/issues/12810", "id": 371409832, "node_id": "MDU6SXNzdWUzNzE0MDk4MzI=", "number": 12810, "title": "The JIT does not support Unsqueezing using the `None` keyword", "user": {"login": "pfrendl", "id": 6968154, "node_id": "MDQ6VXNlcjY5NjgxNTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/6968154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pfrendl", "html_url": "https://github.com/pfrendl", "followers_url": "https://api.github.com/users/pfrendl/followers", "following_url": "https://api.github.com/users/pfrendl/following{/other_user}", "gists_url": "https://api.github.com/users/pfrendl/gists{/gist_id}", "starred_url": "https://api.github.com/users/pfrendl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pfrendl/subscriptions", "organizations_url": "https://api.github.com/users/pfrendl/orgs", "repos_url": "https://api.github.com/users/pfrendl/repos", "events_url": "https://api.github.com/users/pfrendl/events{/privacy}", "received_events_url": "https://api.github.com/users/pfrendl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 679953983, "node_id": "MDU6TGFiZWw2Nzk5NTM5ODM=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/jit", "name": "jit", "color": "c5def5", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-18T08:10:42Z", "updated_at": "2018-10-18T18:56:30Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>Unsqueezing using the <code>None</code> keyword does not work with the @torch.jit.script notation.</p>\n<h2>To Reproduce</h2>\n<p>MWE to reproduce the behavior:</p>\n<pre><code>import torch\n\n\n@torch.jit.script\ndef fun(a):\n\treturn a[None, :]\n\n\nif __name__ == '__main__':\n\ta = torch.tensor([0])\n\tfun(a)\n</code></pre>\n<pre><code>Error message:\nTraceback (most recent call last):\n  File \"ttt.py\", line 11, in &lt;module&gt;\n    fun(a)\n  File \"/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py\", line 477, in __call__\n    result = self.forward(*input, **kwargs)\nRuntimeError: \nSchema not found for node. File a bug report.\nNode: %4 : Dynamic = prim::None()\n\nInput types:\ncandidates were:\n:\n@torch.jit.script\ndef fun(a):\n\treturn a[None, :]\n          ~~~~ &lt;--- HERE\n</code></pre>\n<h2>Expected behavior</h2>\n<p>Unsqueezing using None should work. This is important, because torch.unsqueeze() can only be called for a single dimension atm.</p>\n<h2>Environment</h2>\n<ul>\n<li>PyTorch Version (e.g., 1.0): 1.0.0.dev20181017</li>\n<li>OS (e.g., Linux): Ubuntu 16.04</li>\n<li>How you installed PyTorch (<code>conda</code>, <code>pip</code>, source): pip3</li>\n<li>Python version: 3.5.2</li>\n<li>CUDA/cuDNN version: 9.2/7104</li>\n<li>GPU models and configuration: 2 x GTX 1080 Ti</li>\n</ul>", "body_text": "\ud83d\udc1b Bug\nUnsqueezing using the None keyword does not work with the @torch.jit.script notation.\nTo Reproduce\nMWE to reproduce the behavior:\nimport torch\n\n\n@torch.jit.script\ndef fun(a):\n\treturn a[None, :]\n\n\nif __name__ == '__main__':\n\ta = torch.tensor([0])\n\tfun(a)\n\nError message:\nTraceback (most recent call last):\n  File \"ttt.py\", line 11, in <module>\n    fun(a)\n  File \"/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py\", line 477, in __call__\n    result = self.forward(*input, **kwargs)\nRuntimeError: \nSchema not found for node. File a bug report.\nNode: %4 : Dynamic = prim::None()\n\nInput types:\ncandidates were:\n:\n@torch.jit.script\ndef fun(a):\n\treturn a[None, :]\n          ~~~~ <--- HERE\n\nExpected behavior\nUnsqueezing using None should work. This is important, because torch.unsqueeze() can only be called for a single dimension atm.\nEnvironment\n\nPyTorch Version (e.g., 1.0): 1.0.0.dev20181017\nOS (e.g., Linux): Ubuntu 16.04\nHow you installed PyTorch (conda, pip, source): pip3\nPython version: 3.5.2\nCUDA/cuDNN version: 9.2/7104\nGPU models and configuration: 2 x GTX 1080 Ti", "body": "## \ud83d\udc1b Bug\r\n\r\nUnsqueezing using the `None` keyword does not work with the @torch.jit.script notation.\r\n\r\n## To Reproduce\r\n\r\nMWE to reproduce the behavior:\r\n\r\n```\r\nimport torch\r\n\r\n\r\n@torch.jit.script\r\ndef fun(a):\r\n\treturn a[None, :]\r\n\r\n\r\nif __name__ == '__main__':\r\n\ta = torch.tensor([0])\r\n\tfun(a)\r\n```\r\n\r\n```\r\nError message:\r\nTraceback (most recent call last):\r\n  File \"ttt.py\", line 11, in <module>\r\n    fun(a)\r\n  File \"/usr/local/lib/python3.5/dist-packages/torch/nn/modules/module.py\", line 477, in __call__\r\n    result = self.forward(*input, **kwargs)\r\nRuntimeError: \r\nSchema not found for node. File a bug report.\r\nNode: %4 : Dynamic = prim::None()\r\n\r\nInput types:\r\ncandidates were:\r\n:\r\n@torch.jit.script\r\ndef fun(a):\r\n\treturn a[None, :]\r\n          ~~~~ <--- HERE\r\n```\r\n\r\n## Expected behavior\r\n\r\nUnsqueezing using None should work. This is important, because torch.unsqueeze() can only be called for a single dimension atm.\r\n\r\n## Environment\r\n\r\n - PyTorch Version (e.g., 1.0): 1.0.0.dev20181017\r\n - OS (e.g., Linux): Ubuntu 16.04\r\n - How you installed PyTorch (`conda`, `pip`, source): pip3\r\n - Python version: 3.5.2\r\n - CUDA/cuDNN version: 9.2/7104 \r\n - GPU models and configuration: 2 x GTX 1080 Ti\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11899", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11899/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11899/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11899/events", "html_url": "https://github.com/pytorch/pytorch/issues/11899", "id": 362333196, "node_id": "MDU6SXNzdWUzNjIzMzMxOTY=", "number": 11899, "title": "torch.tensors in torch.multiprocessing", "user": {"login": "TomasVaskevicius", "id": 8312273, "node_id": "MDQ6VXNlcjgzMTIyNzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/8312273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TomasVaskevicius", "html_url": "https://github.com/TomasVaskevicius", "followers_url": "https://api.github.com/users/TomasVaskevicius/followers", "following_url": "https://api.github.com/users/TomasVaskevicius/following{/other_user}", "gists_url": "https://api.github.com/users/TomasVaskevicius/gists{/gist_id}", "starred_url": "https://api.github.com/users/TomasVaskevicius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TomasVaskevicius/subscriptions", "organizations_url": "https://api.github.com/users/TomasVaskevicius/orgs", "repos_url": "https://api.github.com/users/TomasVaskevicius/repos", "events_url": "https://api.github.com/users/TomasVaskevicius/events{/privacy}", "received_events_url": "https://api.github.com/users/TomasVaskevicius/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-20T19:31:44Z", "updated_at": "2018-09-20T19:50:58Z", "closed_at": "2018-09-20T19:50:58Z", "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>The following code involving torch.multiprocessing.Pool does not work for torch.tensor<br>\ndata type, while works for python numbers.</p>\n<h2>Code example</h2>\n<pre><code>import torch\nimport torch.multiprocessing as mp\n\ndef worker(arg):\n    return [torch.tensor(1) for i in range(100)]\n\nif __name__ == \"__main__\":\n    pool = mp.Pool(1)\n    out = pool.map(worker, [() for i in range(10)])\n    pool.close()\n    pool.join()\n</code></pre>\n<p>The above code can yields:</p>\n<pre><code>OSError: [Errno 24] Too many open files\n</code></pre>\n<p>which is strange, since we are launching only 10 jobs using one process at a time.</p>\n<p>Changing the worker function to:</p>\n<pre><code>def worker(arg):\n    return [1 for i in range(100)]\n</code></pre>\n<p>executes correctly.</p>\n<h2>System Info</h2>\n<p>Ubuntu 16.04.01 LTS<br>\nPython version: 3.6<br>\n[conda] pytorch                   0.4.0            py36hd73e86b_0    anaconda</p>\n<pre><code>$ ulimit -n\n1024\n</code></pre>", "body_text": "Issue description\nThe following code involving torch.multiprocessing.Pool does not work for torch.tensor\ndata type, while works for python numbers.\nCode example\nimport torch\nimport torch.multiprocessing as mp\n\ndef worker(arg):\n    return [torch.tensor(1) for i in range(100)]\n\nif __name__ == \"__main__\":\n    pool = mp.Pool(1)\n    out = pool.map(worker, [() for i in range(10)])\n    pool.close()\n    pool.join()\n\nThe above code can yields:\nOSError: [Errno 24] Too many open files\n\nwhich is strange, since we are launching only 10 jobs using one process at a time.\nChanging the worker function to:\ndef worker(arg):\n    return [1 for i in range(100)]\n\nexecutes correctly.\nSystem Info\nUbuntu 16.04.01 LTS\nPython version: 3.6\n[conda] pytorch                   0.4.0            py36hd73e86b_0    anaconda\n$ ulimit -n\n1024", "body": "## Issue description\r\nThe following code involving torch.multiprocessing.Pool does not work for torch.tensor\r\ndata type, while works for python numbers.\r\n\r\n## Code example\r\n```\r\nimport torch\r\nimport torch.multiprocessing as mp\r\n\r\ndef worker(arg):\r\n    return [torch.tensor(1) for i in range(100)]\r\n\r\nif __name__ == \"__main__\":\r\n    pool = mp.Pool(1)\r\n    out = pool.map(worker, [() for i in range(10)])\r\n    pool.close()\r\n    pool.join()\r\n```\r\n\r\nThe above code can yields:\r\n```\r\nOSError: [Errno 24] Too many open files\r\n```\r\nwhich is strange, since we are launching only 10 jobs using one process at a time.\r\n\r\nChanging the worker function to:\r\n```\r\ndef worker(arg):\r\n    return [1 for i in range(100)]\r\n```\r\nexecutes correctly.\r\n\r\n## System Info\r\nUbuntu 16.04.01 LTS\r\nPython version: 3.6\r\n[conda] pytorch                   0.4.0            py36hd73e86b_0    anaconda\r\n\r\n```\r\n$ ulimit -n\r\n1024\r\n```\r\n\r\n"}
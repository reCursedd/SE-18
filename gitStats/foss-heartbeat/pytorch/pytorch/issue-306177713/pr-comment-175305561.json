{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/175305561", "pull_request_review_id": 104812888, "id": 175305561, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NTMwNTU2MQ==", "diff_hunk": "@@ -0,0 +1,19 @@\n+#!/bin/bash\n+\n+COMPACT_JOB_NAME=\"${BUILD_ENVIRONMENT}-multigpu-test\"\n+source \"$(dirname \"${BASH_SOURCE[0]}\")/common.sh\"\n+\n+# Required environment variable: $BUILD_ENVIRONMENT\n+# (This is set by default in the Docker images we build, so you don't\n+# need to set it yourself.\n+\n+export PATH=/opt/conda/bin:$PATH\n+\n+export LD_LIBRARY_PATH=/usr/local/cuda/lib64/stubs:$LD_LIBRARY_PATH\n+export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH\n+\n+echo \"Testing pytorch\"\n+export OMP_NUM_THREADS=4\n+export MKL_NUM_THREADS=4\n+\n+time python test/run_test.py --verbose -i distributed", "path": ".jenkins/multigpu-test.sh", "position": 19, "original_position": 19, "commit_id": "0d92b9e1ab58a4567d25b1279b697029a11afaed", "original_commit_id": "0d92b9e1ab58a4567d25b1279b697029a11afaed", "user": {"login": "ailzhang", "id": 5248122, "node_id": "MDQ6VXNlcjUyNDgxMjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5248122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ailzhang", "html_url": "https://github.com/ailzhang", "followers_url": "https://api.github.com/users/ailzhang/followers", "following_url": "https://api.github.com/users/ailzhang/following{/other_user}", "gists_url": "https://api.github.com/users/ailzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ailzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ailzhang/subscriptions", "organizations_url": "https://api.github.com/users/ailzhang/orgs", "repos_url": "https://api.github.com/users/ailzhang/repos", "events_url": "https://api.github.com/users/ailzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/ailzhang/received_events", "type": "User", "site_admin": false}, "body": "I think it's not treated differently. Just that for most test cases, it doesn't worth testing again on 4GPU machines since they exercise exactly the same code path as 2GPU machines. So here we only run the distributed test on 4GPU machines. Correct me if I'm wrong @ezyang @apaszke .", "created_at": "2018-03-18T21:51:53Z", "updated_at": "2018-11-23T15:40:56Z", "html_url": "https://github.com/pytorch/pytorch/pull/5854#discussion_r175305561", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/5854", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/175305561"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/5854#discussion_r175305561"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/5854"}}, "body_html": "<p>I think it's not treated differently. Just that for most test cases, it doesn't worth testing again on 4GPU machines since they exercise exactly the same code path as 2GPU machines. So here we only run the distributed test on 4GPU machines. Correct me if I'm wrong <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13564\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ezyang\">@ezyang</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a> .</p>", "body_text": "I think it's not treated differently. Just that for most test cases, it doesn't worth testing again on 4GPU machines since they exercise exactly the same code path as 2GPU machines. So here we only run the distributed test on 4GPU machines. Correct me if I'm wrong @ezyang @apaszke .", "in_reply_to_id": 175296335}
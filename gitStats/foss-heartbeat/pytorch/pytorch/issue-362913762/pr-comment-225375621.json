{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/225375621", "pull_request_review_id": 164961580, "id": 225375621, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTM3NTYyMQ==", "diff_hunk": "@@ -223,9 +223,10 @@ def main():\n     # if their execution times are very different.\n     cuda_prof_exec_time = cpu_time_total(autograd_prof_cuda)\n     cpu_prof_exec_time = cpu_time_total(autograd_prof_cpu)\n-    pct_diff = cuda_prof_exec_time - cpu_prof_exec_time / cuda_prof_exec_time\n-    if abs(pct_diff) > 0.05:\n-        print_autograd_prof_summary(autograd_prof_cpu, 'CPU', autograd_prof_sortby, autograd_prof_topk)\n+    if cuda_prof_exec_time > 0.0:", "path": "torch/utils/bottleneck/__main__.py", "position": null, "original_position": 7, "commit_id": "1144eaa6283c81fa71453e88ba8efff2cfee2d34", "original_commit_id": "99c09db43f08c9c5070af45f1b850a0fca69803d", "user": {"login": "zou3519", "id": 5652049, "node_id": "MDQ6VXNlcjU2NTIwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5652049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zou3519", "html_url": "https://github.com/zou3519", "followers_url": "https://api.github.com/users/zou3519/followers", "following_url": "https://api.github.com/users/zou3519/following{/other_user}", "gists_url": "https://api.github.com/users/zou3519/gists{/gist_id}", "starred_url": "https://api.github.com/users/zou3519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zou3519/subscriptions", "organizations_url": "https://api.github.com/users/zou3519/orgs", "repos_url": "https://api.github.com/users/zou3519/repos", "events_url": "https://api.github.com/users/zou3519/events{/privacy}", "received_events_url": "https://api.github.com/users/zou3519/received_events", "type": "User", "site_admin": false}, "body": "@egg-west what do you mean by lack of bracket?\r\n\r\nI'm able to reproduce this with the following things:\r\n- empty script -- records nothing on the profiler\r\n- `import torch; torch.empty([])` -- records nothing on the profiler\r\n\r\nIn general the CUDA time should always be nonzero because we're recording a CUDA event, running the function, and then recording another CUDA event, unless that function does nothing (and even then, python overhead adds some time). This is true even if the program doesn't use CUDA. The divide by zero error happens only when the profiler records nothing.", "created_at": "2018-10-16T02:16:45Z", "updated_at": "2018-11-23T15:53:04Z", "html_url": "https://github.com/pytorch/pytorch/pull/11987#discussion_r225375621", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/11987", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/225375621"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/11987#discussion_r225375621"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/11987"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=27271284\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/egg-west\">@egg-west</a> what do you mean by lack of bracket?</p>\n<p>I'm able to reproduce this with the following things:</p>\n<ul>\n<li>empty script -- records nothing on the profiler</li>\n<li><code>import torch; torch.empty([])</code> -- records nothing on the profiler</li>\n</ul>\n<p>In general the CUDA time should always be nonzero because we're recording a CUDA event, running the function, and then recording another CUDA event, unless that function does nothing (and even then, python overhead adds some time). This is true even if the program doesn't use CUDA. The divide by zero error happens only when the profiler records nothing.</p>", "body_text": "@egg-west what do you mean by lack of bracket?\nI'm able to reproduce this with the following things:\n\nempty script -- records nothing on the profiler\nimport torch; torch.empty([]) -- records nothing on the profiler\n\nIn general the CUDA time should always be nonzero because we're recording a CUDA event, running the function, and then recording another CUDA event, unless that function does nothing (and even then, python overhead adds some time). This is true even if the program doesn't use CUDA. The divide by zero error happens only when the profiler records nothing.", "in_reply_to_id": 221331300}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12607", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12607/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12607/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12607/events", "html_url": "https://github.com/pytorch/pytorch/issues/12607", "id": 369563854, "node_id": "MDU6SXNzdWUzNjk1NjM4NTQ=", "number": 12607, "title": "caffe2  GetMutableTensor", "user": {"login": "mhubii", "id": 26366414, "node_id": "MDQ6VXNlcjI2MzY2NDE0", "avatar_url": "https://avatars0.githubusercontent.com/u/26366414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhubii", "html_url": "https://github.com/mhubii", "followers_url": "https://api.github.com/users/mhubii/followers", "following_url": "https://api.github.com/users/mhubii/following{/other_user}", "gists_url": "https://api.github.com/users/mhubii/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhubii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhubii/subscriptions", "organizations_url": "https://api.github.com/users/mhubii/orgs", "repos_url": "https://api.github.com/users/mhubii/repos", "events_url": "https://api.github.com/users/mhubii/events{/privacy}", "received_events_url": "https://api.github.com/users/mhubii/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-12T13:58:39Z", "updated_at": "2018-10-25T18:44:15Z", "closed_at": "2018-10-15T08:16:33Z", "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>Can someone reproduce this error? What am I doing wrong?</p>\n<pre><code>*** Aborted at 1539351838 (unix time) try \"date -d @1539351838\" if you are using GNU date ***\nPC: @           0x404525 at::StorageImpl::capacity()\n*** SIGSEGV (@0x40) received by PID 29800 (TID 0x7f16d8d6e880) from PID 64; stack trace: ***\n    @     0x7f16d5a754b0 (unknown)\n    @           0x404525 at::StorageImpl::capacity()\n    @           0x404946 at::Storage::capacity()\n    @           0x407311 _ZN2at10TensorImpl6ResizeIJNS_8ArrayRefIlEEEEEvDpT_\n    @           0x40563c caffe2::Tensor::ResizeLike()\n    @           0x4033ce main\n    @     0x7f16d5a60830 __libc_start_main\n    @           0x402fe9 _start\n    @                0x0 (unknown)\nSegmentation fault (core dumped)\n</code></pre>\n<h2>To Reproduce</h2>\n<p>in your cmake:</p>\n<pre><code>cmake_minimum_required(VERSION 3.11 FATAL_ERROR)\nset(CMAKE_CXX_STANDARD 11)\n\nfind_library(CAFFE2_LIB caffe2)\nfind_package(Protobuf REQUIRED)\n\nadd_executable(main main.cpp)\ntarget_link_libraries(main ${CAFFE2_LIB} ${PROTOBUF_LIBRARIES})\n</code></pre>\n<p>in your main:</p>\n<pre><code>#include &lt;caffe2/core/init.h&gt;\n#include &lt;caffe2/core/tensor.h&gt;\n#include &lt;caffe2/core/workspace.h&gt;\n\nusing namespace std;\nusing namespace caffe2;\n\nint main(int argc, char** argv) {\n\n\tcaffe2::GlobalInit(&amp;argc, &amp;argv);\n\n\t// Tensor.\n\tvector&lt;int64_t&gt; dims({10});\n\tvector&lt;float&gt; values(10, 1);\n\n\tTensor tensor(dims, CPU);\n\ttensor.ShareExternalPointer(values.data());\n\n\t// Workspace.\n\tWorkspace workspace;\n\n\tTensor* data = workspace.CreateBlob(\"data\")-&gt;GetMutable&lt;Tensor&gt;();\n\tdata-&gt;ResizeLike(tensor); // doesn't work\n\t\n\tgoogle::protobuf::ShutdownProtobufLibrary();\n\t\n\treturn 0;\n}\n</code></pre>\n<h2>Environment</h2>\n<pre><code>PyTorch version: 0.3.0b0+af3964a\nIs debug build: No\nCUDA used to build PyTorch: 9.0.176\n\nOS: Ubuntu 16.04.5 LTS\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\nCMake version: version 3.11.4\n\nPython version: 2.7\nIs CUDA available: Yes\nCUDA runtime version: 9.0.176\nGPU models and configuration: GPU 0: GeForce GTX 1050\nNvidia driver version: 396.54\ncuDNN version: Probably one of the following:\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.0.5\n/usr/lib/x86_64-linux-gnu/libcudnn_static_v7.a\n\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] Could not collect\n</code></pre>", "body_text": "\ud83d\udc1b Bug\nCan someone reproduce this error? What am I doing wrong?\n*** Aborted at 1539351838 (unix time) try \"date -d @1539351838\" if you are using GNU date ***\nPC: @           0x404525 at::StorageImpl::capacity()\n*** SIGSEGV (@0x40) received by PID 29800 (TID 0x7f16d8d6e880) from PID 64; stack trace: ***\n    @     0x7f16d5a754b0 (unknown)\n    @           0x404525 at::StorageImpl::capacity()\n    @           0x404946 at::Storage::capacity()\n    @           0x407311 _ZN2at10TensorImpl6ResizeIJNS_8ArrayRefIlEEEEEvDpT_\n    @           0x40563c caffe2::Tensor::ResizeLike()\n    @           0x4033ce main\n    @     0x7f16d5a60830 __libc_start_main\n    @           0x402fe9 _start\n    @                0x0 (unknown)\nSegmentation fault (core dumped)\n\nTo Reproduce\nin your cmake:\ncmake_minimum_required(VERSION 3.11 FATAL_ERROR)\nset(CMAKE_CXX_STANDARD 11)\n\nfind_library(CAFFE2_LIB caffe2)\nfind_package(Protobuf REQUIRED)\n\nadd_executable(main main.cpp)\ntarget_link_libraries(main ${CAFFE2_LIB} ${PROTOBUF_LIBRARIES})\n\nin your main:\n#include <caffe2/core/init.h>\n#include <caffe2/core/tensor.h>\n#include <caffe2/core/workspace.h>\n\nusing namespace std;\nusing namespace caffe2;\n\nint main(int argc, char** argv) {\n\n\tcaffe2::GlobalInit(&argc, &argv);\n\n\t// Tensor.\n\tvector<int64_t> dims({10});\n\tvector<float> values(10, 1);\n\n\tTensor tensor(dims, CPU);\n\ttensor.ShareExternalPointer(values.data());\n\n\t// Workspace.\n\tWorkspace workspace;\n\n\tTensor* data = workspace.CreateBlob(\"data\")->GetMutable<Tensor>();\n\tdata->ResizeLike(tensor); // doesn't work\n\t\n\tgoogle::protobuf::ShutdownProtobufLibrary();\n\t\n\treturn 0;\n}\n\nEnvironment\nPyTorch version: 0.3.0b0+af3964a\nIs debug build: No\nCUDA used to build PyTorch: 9.0.176\n\nOS: Ubuntu 16.04.5 LTS\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\nCMake version: version 3.11.4\n\nPython version: 2.7\nIs CUDA available: Yes\nCUDA runtime version: 9.0.176\nGPU models and configuration: GPU 0: GeForce GTX 1050\nNvidia driver version: 396.54\ncuDNN version: Probably one of the following:\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.0.5\n/usr/lib/x86_64-linux-gnu/libcudnn_static_v7.a\n\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] Could not collect", "body": "## \ud83d\udc1b Bug\r\n\r\nCan someone reproduce this error? What am I doing wrong?\r\n\r\n```\r\n*** Aborted at 1539351838 (unix time) try \"date -d @1539351838\" if you are using GNU date ***\r\nPC: @           0x404525 at::StorageImpl::capacity()\r\n*** SIGSEGV (@0x40) received by PID 29800 (TID 0x7f16d8d6e880) from PID 64; stack trace: ***\r\n    @     0x7f16d5a754b0 (unknown)\r\n    @           0x404525 at::StorageImpl::capacity()\r\n    @           0x404946 at::Storage::capacity()\r\n    @           0x407311 _ZN2at10TensorImpl6ResizeIJNS_8ArrayRefIlEEEEEvDpT_\r\n    @           0x40563c caffe2::Tensor::ResizeLike()\r\n    @           0x4033ce main\r\n    @     0x7f16d5a60830 __libc_start_main\r\n    @           0x402fe9 _start\r\n    @                0x0 (unknown)\r\nSegmentation fault (core dumped)\r\n```\r\n\r\n## To Reproduce\r\n\r\nin your cmake:\r\n\r\n```\r\ncmake_minimum_required(VERSION 3.11 FATAL_ERROR)\r\nset(CMAKE_CXX_STANDARD 11)\r\n\r\nfind_library(CAFFE2_LIB caffe2)\r\nfind_package(Protobuf REQUIRED)\r\n\r\nadd_executable(main main.cpp)\r\ntarget_link_libraries(main ${CAFFE2_LIB} ${PROTOBUF_LIBRARIES})\r\n```\r\n\r\nin your main:\r\n\r\n```\r\n#include <caffe2/core/init.h>\r\n#include <caffe2/core/tensor.h>\r\n#include <caffe2/core/workspace.h>\r\n\r\nusing namespace std;\r\nusing namespace caffe2;\r\n\r\nint main(int argc, char** argv) {\r\n\r\n\tcaffe2::GlobalInit(&argc, &argv);\r\n\r\n\t// Tensor.\r\n\tvector<int64_t> dims({10});\r\n\tvector<float> values(10, 1);\r\n\r\n\tTensor tensor(dims, CPU);\r\n\ttensor.ShareExternalPointer(values.data());\r\n\r\n\t// Workspace.\r\n\tWorkspace workspace;\r\n\r\n\tTensor* data = workspace.CreateBlob(\"data\")->GetMutable<Tensor>();\r\n\tdata->ResizeLike(tensor); // doesn't work\r\n\t\r\n\tgoogle::protobuf::ShutdownProtobufLibrary();\r\n\t\r\n\treturn 0;\r\n}\r\n```\r\n\r\n## Environment\r\n\r\n```\r\nPyTorch version: 0.3.0b0+af3964a\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Ubuntu 16.04.5 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\nCMake version: version 3.11.4\r\n\r\nPython version: 2.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 9.0.176\r\nGPU models and configuration: GPU 0: GeForce GTX 1050\r\nNvidia driver version: 396.54\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_static_v7.a\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] Could not collect\r\n```\r\n\r\n"}
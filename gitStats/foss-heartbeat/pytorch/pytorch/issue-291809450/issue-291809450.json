{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4865", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4865/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4865/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4865/events", "html_url": "https://github.com/pytorch/pytorch/issues/4865", "id": 291809450, "node_id": "MDU6SXNzdWUyOTE4MDk0NTA=", "number": 4865, "title": "DataParallel module leaks memory", "user": {"login": "khanrc", "id": 3657248, "node_id": "MDQ6VXNlcjM2NTcyNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/3657248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/khanrc", "html_url": "https://github.com/khanrc", "followers_url": "https://api.github.com/users/khanrc/followers", "following_url": "https://api.github.com/users/khanrc/following{/other_user}", "gists_url": "https://api.github.com/users/khanrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/khanrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/khanrc/subscriptions", "organizations_url": "https://api.github.com/users/khanrc/orgs", "repos_url": "https://api.github.com/users/khanrc/repos", "events_url": "https://api.github.com/users/khanrc/events{/privacy}", "received_events_url": "https://api.github.com/users/khanrc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 424131847, "node_id": "MDU6TGFiZWw0MjQxMzE4NDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/bug", "name": "bug", "color": "b60205", "default": true}, {"id": 443484135, "node_id": "MDU6TGFiZWw0NDM0ODQxMzU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/high%20priority", "name": "high priority", "color": "F22613", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-01-26T06:20:46Z", "updated_at": "2018-02-05T18:50:44Z", "closed_at": "2018-02-05T02:08:31Z", "author_association": "NONE", "body_html": "<h2>Environment</h2>\n<ul>\n<li>OS: ubuntu 14.04, 16.04</li>\n<li>PyTorch version: 0.3</li>\n<li>How you installed PyTorch (conda, pip, source): pip</li>\n<li>Python version: 2.7</li>\n<li>CUDA/cuDNN version: 8.0/6.0, 9.0/7.0</li>\n<li>GPU models and configuration: Geforce 1080Ti, TITAN XP</li>\n</ul>\n<h2>Symptom</h2>\n<p><a href=\"https://discuss.pytorch.org/t/dataparallel-makes-garbages/12771\" rel=\"nofollow\">https://discuss.pytorch.org/t/dataparallel-makes-garbages/12771</a><br>\n<a href=\"https://nbviewer.jupyter.org/gist/khanrc/a21dbe0dc316c31387a56b683b94aa2d\" rel=\"nofollow\">https://nbviewer.jupyter.org/gist/khanrc/a21dbe0dc316c31387a56b683b94aa2d</a></p>\n<ul>\n<li>Memory leak arises when using DataParallel module</li>\n<li>It mainly came from the replicate module, as a results of my tests\n<ul>\n<li>So more gpu devices (more replicas) make more leak</li>\n</ul>\n</li>\n<li>In the above jupyter notebook link, you can see the collected garbages, which indicates memory leak</li>\n<li>This memory leak come from DataParallel module; There is no leak without DataParallel module</li>\n</ul>\n<h2>Reproduce</h2>\n<p>Reproducing is very easy. You can reproduce this problem using above jupyter notebook code. Further, I've always had this problem every time I use the DataParallel module.</p>", "body_text": "Environment\n\nOS: ubuntu 14.04, 16.04\nPyTorch version: 0.3\nHow you installed PyTorch (conda, pip, source): pip\nPython version: 2.7\nCUDA/cuDNN version: 8.0/6.0, 9.0/7.0\nGPU models and configuration: Geforce 1080Ti, TITAN XP\n\nSymptom\nhttps://discuss.pytorch.org/t/dataparallel-makes-garbages/12771\nhttps://nbviewer.jupyter.org/gist/khanrc/a21dbe0dc316c31387a56b683b94aa2d\n\nMemory leak arises when using DataParallel module\nIt mainly came from the replicate module, as a results of my tests\n\nSo more gpu devices (more replicas) make more leak\n\n\nIn the above jupyter notebook link, you can see the collected garbages, which indicates memory leak\nThis memory leak come from DataParallel module; There is no leak without DataParallel module\n\nReproduce\nReproducing is very easy. You can reproduce this problem using above jupyter notebook code. Further, I've always had this problem every time I use the DataParallel module.", "body": "## Environment\r\n\r\n- OS: ubuntu 14.04, 16.04\r\n- PyTorch version: 0.3\r\n- How you installed PyTorch (conda, pip, source): pip\r\n- Python version: 2.7\r\n- CUDA/cuDNN version: 8.0/6.0, 9.0/7.0\r\n- GPU models and configuration: Geforce 1080Ti, TITAN XP\r\n\r\n## Symptom\r\n\r\nhttps://discuss.pytorch.org/t/dataparallel-makes-garbages/12771\r\nhttps://nbviewer.jupyter.org/gist/khanrc/a21dbe0dc316c31387a56b683b94aa2d\r\n\r\n- Memory leak arises when using DataParallel module \r\n- It mainly came from the replicate module, as a results of my tests\r\n  - So more gpu devices (more replicas) make more leak\r\n- In the above jupyter notebook link, you can see the collected garbages, which indicates memory leak\r\n- This memory leak come from DataParallel module; There is no leak without DataParallel module\r\n\r\n## Reproduce\r\n\r\nReproducing is very easy. You can reproduce this problem using above jupyter notebook code. Further, I've always had this problem every time I use the DataParallel module."}
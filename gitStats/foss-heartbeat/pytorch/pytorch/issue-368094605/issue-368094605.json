{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12477", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12477/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12477/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12477/events", "html_url": "https://github.com/pytorch/pytorch/issues/12477", "id": 368094605, "node_id": "MDU6SXNzdWUzNjgwOTQ2MDU=", "number": 12477, "title": "pytorch c++ examples-cpp problem", "user": {"login": "bamtercelboo", "id": 22359268, "node_id": "MDQ6VXNlcjIyMzU5MjY4", "avatar_url": "https://avatars0.githubusercontent.com/u/22359268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bamtercelboo", "html_url": "https://github.com/bamtercelboo", "followers_url": "https://api.github.com/users/bamtercelboo/followers", "following_url": "https://api.github.com/users/bamtercelboo/following{/other_user}", "gists_url": "https://api.github.com/users/bamtercelboo/gists{/gist_id}", "starred_url": "https://api.github.com/users/bamtercelboo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bamtercelboo/subscriptions", "organizations_url": "https://api.github.com/users/bamtercelboo/orgs", "repos_url": "https://api.github.com/users/bamtercelboo/repos", "events_url": "https://api.github.com/users/bamtercelboo/events{/privacy}", "received_events_url": "https://api.github.com/users/bamtercelboo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-09T08:26:08Z", "updated_at": "2018-10-09T08:55:37Z", "closed_at": "2018-10-09T08:55:37Z", "author_association": "NONE", "body_html": "<p>Hi, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6429851\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/goldsborough\">@goldsborough</a></p>\n<p>I run the cpp examples   <a href=\"https://github.com/goldsborough/examples/tree/cpp/cpp\">https://github.com/goldsborough/examples/tree/cpp/cpp</a></p>\n<p>and bug appears when make</p>\n<p>Why is this bug(torch::data\u2019 has not been declared) present ?</p>\n<p>Thanks.</p>\n<pre><code>/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In function \u2018void test(Net&amp;, at::Device, DataLoader&amp;)\u2019:\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:109:31: error: \u2018torch::data\u2019 has not been declared\n   data_loader.loop([&amp;](torch::data::Example&lt;&gt;&amp; batch) {\n                               ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:109:44: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018&lt;\u2019 token\n   data_loader.loop([&amp;](torch::data::Example&lt;&gt;&amp; batch) {\n                                            ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In lambda function:\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:110:17: error: \u2018batch\u2019 was not declared in this scope\n     auto data = batch.data.to(device), labels = batch.label.to(device);\n                 ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:114:22: error: \u2018labels\u2019 was not declared in this scope\n                      labels,\n                      ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In function \u2018int main(int, const char**)\u2019:\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:145:30: error: \u2018torch::data\u2019 has not been declared\n   auto train_loader = torch::data::make_data_loader(\n                              ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:146:14: error: \u2018torch::data\u2019 has not been declared\n       torch::data::datasets::MNIST(options.data_root, /*train=*/true)\n              ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:147:23: error: \u2018torch::data\u2019 has not been declared\n           .map(torch::data::transforms::Normalize&lt;&gt;(0.1307, 0.3081))\n                       ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:147:51: error: expected primary-expression before \u2018&gt;\u2019 token\n           .map(torch::data::transforms::Normalize&lt;&gt;(0.1307, 0.3081))\n                                                   ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:23: error: \u2018torch::data\u2019 has not been declared\n           .map(torch::data::transforms::Stack&lt;&gt;()),\n                       ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:47: error: expected primary-expression before \u2018&gt;\u2019 token\n           .map(torch::data::transforms::Stack&lt;&gt;()),\n                                               ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:49: error: expected primary-expression before \u2018)\u2019 token\n           .map(torch::data::transforms::Stack&lt;&gt;()),\n                                                 ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:149:14: error: \u2018torch::data\u2019 has not been declared\n       torch::data::DataLoaderOptions().batch_size(options.batch_size));\n              ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:151:29: error: \u2018torch::data\u2019 has not been declared\n   auto test_loader = torch::data::make_data_loader(\n                             ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:152:14: error: \u2018torch::data\u2019 has not been declared\n       torch::data::datasets::MNIST(options.data_root, /*train=*/false)\n              ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:153:23: error: \u2018torch::data\u2019 has not been declared\n           .map(torch::data::transforms::Normalize&lt;&gt;(0.1307, 0.3081))\n                       ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:153:51: error: expected primary-expression before \u2018&gt;\u2019 token\n           .map(torch::data::transforms::Normalize&lt;&gt;(0.1307, 0.3081))\n                                                   ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:23: error: \u2018torch::data\u2019 has not been declared\n           .map(torch::data::transforms::Stack&lt;&gt;()),\n                       ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:47: error: expected primary-expression before \u2018&gt;\u2019 token\n           .map(torch::data::transforms::Stack&lt;&gt;()),\n                                               ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:49: error: expected primary-expression before \u2018)\u2019 token\n           .map(torch::data::transforms::Stack&lt;&gt;()),\n                                                 ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:155:14: error: \u2018torch::data\u2019 has not been declared\n       torch::data::DataLoaderOptions().batch_size(options.batch_size));\n              ^\nCMakeFiles/mnist.dir/build.make:62: recipe for target 'CMakeFiles/mnist.dir/mnist.cpp.o' failed\nmake[2]: *** [CMakeFiles/mnist.dir/mnist.cpp.o] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/mnist.dir/all' failed\nmake[1]: *** [CMakeFiles/mnist.dir/all] Error 2\nMakefile:83: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>", "body_text": "Hi, @goldsborough\nI run the cpp examples   https://github.com/goldsborough/examples/tree/cpp/cpp\nand bug appears when make\nWhy is this bug(torch::data\u2019 has not been declared) present ?\nThanks.\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In function \u2018void test(Net&, at::Device, DataLoader&)\u2019:\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:109:31: error: \u2018torch::data\u2019 has not been declared\n   data_loader.loop([&](torch::data::Example<>& batch) {\n                               ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:109:44: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018<\u2019 token\n   data_loader.loop([&](torch::data::Example<>& batch) {\n                                            ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In lambda function:\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:110:17: error: \u2018batch\u2019 was not declared in this scope\n     auto data = batch.data.to(device), labels = batch.label.to(device);\n                 ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:114:22: error: \u2018labels\u2019 was not declared in this scope\n                      labels,\n                      ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In function \u2018int main(int, const char**)\u2019:\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:145:30: error: \u2018torch::data\u2019 has not been declared\n   auto train_loader = torch::data::make_data_loader(\n                              ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:146:14: error: \u2018torch::data\u2019 has not been declared\n       torch::data::datasets::MNIST(options.data_root, /*train=*/true)\n              ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:147:23: error: \u2018torch::data\u2019 has not been declared\n           .map(torch::data::transforms::Normalize<>(0.1307, 0.3081))\n                       ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:147:51: error: expected primary-expression before \u2018>\u2019 token\n           .map(torch::data::transforms::Normalize<>(0.1307, 0.3081))\n                                                   ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:23: error: \u2018torch::data\u2019 has not been declared\n           .map(torch::data::transforms::Stack<>()),\n                       ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:47: error: expected primary-expression before \u2018>\u2019 token\n           .map(torch::data::transforms::Stack<>()),\n                                               ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:49: error: expected primary-expression before \u2018)\u2019 token\n           .map(torch::data::transforms::Stack<>()),\n                                                 ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:149:14: error: \u2018torch::data\u2019 has not been declared\n       torch::data::DataLoaderOptions().batch_size(options.batch_size));\n              ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:151:29: error: \u2018torch::data\u2019 has not been declared\n   auto test_loader = torch::data::make_data_loader(\n                             ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:152:14: error: \u2018torch::data\u2019 has not been declared\n       torch::data::datasets::MNIST(options.data_root, /*train=*/false)\n              ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:153:23: error: \u2018torch::data\u2019 has not been declared\n           .map(torch::data::transforms::Normalize<>(0.1307, 0.3081))\n                       ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:153:51: error: expected primary-expression before \u2018>\u2019 token\n           .map(torch::data::transforms::Normalize<>(0.1307, 0.3081))\n                                                   ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:23: error: \u2018torch::data\u2019 has not been declared\n           .map(torch::data::transforms::Stack<>()),\n                       ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:47: error: expected primary-expression before \u2018>\u2019 token\n           .map(torch::data::transforms::Stack<>()),\n                                               ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:49: error: expected primary-expression before \u2018)\u2019 token\n           .map(torch::data::transforms::Stack<>()),\n                                                 ^\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:155:14: error: \u2018torch::data\u2019 has not been declared\n       torch::data::DataLoaderOptions().batch_size(options.batch_size));\n              ^\nCMakeFiles/mnist.dir/build.make:62: recipe for target 'CMakeFiles/mnist.dir/mnist.cpp.o' failed\nmake[2]: *** [CMakeFiles/mnist.dir/mnist.cpp.o] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/mnist.dir/all' failed\nmake[1]: *** [CMakeFiles/mnist.dir/all] Error 2\nMakefile:83: recipe for target 'all' failed\nmake: *** [all] Error 2", "body": "Hi, @goldsborough \r\n\r\nI run the cpp examples   https://github.com/goldsborough/examples/tree/cpp/cpp\r\n\r\nand bug appears when make\r\n\r\nWhy is this bug(torch::data\u2019 has not been declared) present ? \r\n\r\nThanks.\r\n\r\n\r\n```\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In function \u2018void test(Net&, at::Device, DataLoader&)\u2019:\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:109:31: error: \u2018torch::data\u2019 has not been declared\r\n   data_loader.loop([&](torch::data::Example<>& batch) {\r\n                               ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:109:44: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018<\u2019 token\r\n   data_loader.loop([&](torch::data::Example<>& batch) {\r\n                                            ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In lambda function:\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:110:17: error: \u2018batch\u2019 was not declared in this scope\r\n     auto data = batch.data.to(device), labels = batch.label.to(device);\r\n                 ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:114:22: error: \u2018labels\u2019 was not declared in this scope\r\n                      labels,\r\n                      ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp: In function \u2018int main(int, const char**)\u2019:\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:145:30: error: \u2018torch::data\u2019 has not been declared\r\n   auto train_loader = torch::data::make_data_loader(\r\n                              ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:146:14: error: \u2018torch::data\u2019 has not been declared\r\n       torch::data::datasets::MNIST(options.data_root, /*train=*/true)\r\n              ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:147:23: error: \u2018torch::data\u2019 has not been declared\r\n           .map(torch::data::transforms::Normalize<>(0.1307, 0.3081))\r\n                       ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:147:51: error: expected primary-expression before \u2018>\u2019 token\r\n           .map(torch::data::transforms::Normalize<>(0.1307, 0.3081))\r\n                                                   ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:23: error: \u2018torch::data\u2019 has not been declared\r\n           .map(torch::data::transforms::Stack<>()),\r\n                       ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:47: error: expected primary-expression before \u2018>\u2019 token\r\n           .map(torch::data::transforms::Stack<>()),\r\n                                               ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:148:49: error: expected primary-expression before \u2018)\u2019 token\r\n           .map(torch::data::transforms::Stack<>()),\r\n                                                 ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:149:14: error: \u2018torch::data\u2019 has not been declared\r\n       torch::data::DataLoaderOptions().batch_size(options.batch_size));\r\n              ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:151:29: error: \u2018torch::data\u2019 has not been declared\r\n   auto test_loader = torch::data::make_data_loader(\r\n                             ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:152:14: error: \u2018torch::data\u2019 has not been declared\r\n       torch::data::datasets::MNIST(options.data_root, /*train=*/false)\r\n              ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:153:23: error: \u2018torch::data\u2019 has not been declared\r\n           .map(torch::data::transforms::Normalize<>(0.1307, 0.3081))\r\n                       ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:153:51: error: expected primary-expression before \u2018>\u2019 token\r\n           .map(torch::data::transforms::Normalize<>(0.1307, 0.3081))\r\n                                                   ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:23: error: \u2018torch::data\u2019 has not been declared\r\n           .map(torch::data::transforms::Stack<>()),\r\n                       ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:47: error: expected primary-expression before \u2018>\u2019 token\r\n           .map(torch::data::transforms::Stack<>()),\r\n                                               ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:154:49: error: expected primary-expression before \u2018)\u2019 token\r\n           .map(torch::data::transforms::Stack<>()),\r\n                                                 ^\r\n/home/lzl/workspace/pytorch_cpp/minist_cpp/examples-cpp/cpp/mnist/mnist.cpp:155:14: error: \u2018torch::data\u2019 has not been declared\r\n       torch::data::DataLoaderOptions().batch_size(options.batch_size));\r\n              ^\r\nCMakeFiles/mnist.dir/build.make:62: recipe for target 'CMakeFiles/mnist.dir/mnist.cpp.o' failed\r\nmake[2]: *** [CMakeFiles/mnist.dir/mnist.cpp.o] Error 1\r\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/mnist.dir/all' failed\r\nmake[1]: *** [CMakeFiles/mnist.dir/all] Error 2\r\nMakefile:83: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/231266138", "pull_request_review_id": 172200040, "id": 231266138, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMTI2NjEzOA==", "diff_hunk": "@@ -0,0 +1,70 @@\n+# ---[ AVX2 Ops\n+set(DNNLOWP_AVX2_OPS_SRCS\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/conv_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/elementwise_sum_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/fully_connected_fake_lowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/group_norm_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/relu_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/transpose.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/dnnlowp.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/norm_minimization_avx2.cc\")\n+\n+# ---[ CPU files only\n+list(APPEND Caffe2_CPU_SRCS\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/activation_distribution_observer.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/batch_matmul_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/caffe2_dnnlowp_utils.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/channel_shuffle_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/concat_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/conv_dnnlowp_acc16_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/conv_relu_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/dequantize_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/dnnlowp_partition.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/elementwise_add_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/elementwise_linear_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/elementwise_mul_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/elementwise_sum_relu_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/fully_connected_dnnlowp_acc16_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/fully_connected_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/fully_connected_rowwise_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/lstm_unit_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/op_wrapper.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/pool_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/quantize_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/sigmoid_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/tanh_dnnlowp_op.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/utility_dnnlowp_ops.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/dynamic_histogram.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/kl_minimization.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/norm_minimization.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/p99.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/sigmoid.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/tanh.cc\")\n+\n+#Common sources\n+\n+# ---[ CPU test files\n+# TODO: fc_fake_lowp_test.cc needs avx flags\n+# sigmoid_test.cc doesn build; error: undefined Sigmoid and Compute\n+list(APPEND Caffe2_CPU_TEST_SRCS\n+  #\"${CMAKE_CURRENT_SOURCE_DIR}/dynamic_histogram_test.cc\"\n+  #\"${CMAKE_CURRENT_SOURCE_DIR}/l2_minimization_test.cc\"\n+  \"${CMAKE_CURRENT_SOURCE_DIR}/requantization_test.cc\")\n+  #\"${CMAKE_CURRENT_SOURCE_DIR}/sigmoid_test.cc\")\n+  #\"${CMAKE_CURRENT_SOURCE_DIR}/tanh_test.cc\")\n+\n+if (NOT MSVC AND CAFFE2_COMPILER_SUPPORTS_AVX2_EXTENSIONS)\n+  add_library(dnnlowp_avx2_ops OBJECT ${DNNLOWP_AVX2_OPS_SRCS})\n+  add_dependencies(dnnlowp_avx2_ops fbgemm Caffe2_PROTO c10)\n+  target_include_directories(dnnlowp_avx2_ops BEFORE\n+    PRIVATE $<BUILD_INTERFACE:${FBGEMM_SOURCE_DIR}/include>)\n+  set_target_properties(\n+    dnnlowp_avx2_ops PROPERTIES COMPILE_FLAGS \"-mavx2 -mfma -mf16c -mxsave\")", "path": "caffe2/operators/quantized/server/CMakeLists.txt", "position": null, "original_position": 62, "commit_id": "c5d448a5861c56c222725a782867618561412403", "original_commit_id": "24764141b8e7be1b0ba4824ee63123057ed6a0d8", "user": {"login": "dskhudia", "id": 37562707, "node_id": "MDQ6VXNlcjM3NTYyNzA3", "avatar_url": "https://avatars2.githubusercontent.com/u/37562707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dskhudia", "html_url": "https://github.com/dskhudia", "followers_url": "https://api.github.com/users/dskhudia/followers", "following_url": "https://api.github.com/users/dskhudia/following{/other_user}", "gists_url": "https://api.github.com/users/dskhudia/gists{/gist_id}", "starred_url": "https://api.github.com/users/dskhudia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dskhudia/subscriptions", "organizations_url": "https://api.github.com/users/dskhudia/orgs", "repos_url": "https://api.github.com/users/dskhudia/repos", "events_url": "https://api.github.com/users/dskhudia/events{/privacy}", "received_events_url": "https://api.github.com/users/dskhudia/received_events", "type": "User", "site_admin": false}, "body": "fixed", "created_at": "2018-11-06T19:45:04Z", "updated_at": "2018-11-23T15:54:25Z", "html_url": "https://github.com/pytorch/pytorch/pull/13558#discussion_r231266138", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/13558", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/231266138"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/13558#discussion_r231266138"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/13558"}}, "body_html": "<p>fixed</p>", "body_text": "fixed", "in_reply_to_id": 231174374}
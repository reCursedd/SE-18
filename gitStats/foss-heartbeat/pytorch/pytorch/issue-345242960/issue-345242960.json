{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9932", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9932/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9932/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9932/events", "html_url": "https://github.com/pytorch/pytorch/issues/9932", "id": 345242960, "node_id": "MDU6SXNzdWUzNDUyNDI5NjA=", "number": 9932, "title": "NCCL Runtime Error", "user": {"login": "ggordonhall", "id": 24595376, "node_id": "MDQ6VXNlcjI0NTk1Mzc2", "avatar_url": "https://avatars3.githubusercontent.com/u/24595376?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ggordonhall", "html_url": "https://github.com/ggordonhall", "followers_url": "https://api.github.com/users/ggordonhall/followers", "following_url": "https://api.github.com/users/ggordonhall/following{/other_user}", "gists_url": "https://api.github.com/users/ggordonhall/gists{/gist_id}", "starred_url": "https://api.github.com/users/ggordonhall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ggordonhall/subscriptions", "organizations_url": "https://api.github.com/users/ggordonhall/orgs", "repos_url": "https://api.github.com/users/ggordonhall/repos", "events_url": "https://api.github.com/users/ggordonhall/events{/privacy}", "received_events_url": "https://api.github.com/users/ggordonhall/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-27T14:15:34Z", "updated_at": "2018-07-27T14:21:02Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>I'm trying to run an OpenNMT-py model across 4 Nvidia P100 GPUs but I receive this error:</p>\n<pre><code>RuntimeError: the distributed NCCL backend is not available; try to recompile the THD package with CUDA and NCCL 2+ support at /home/ggordo04/pytorch/torch/lib/THD/process_group/General.cpp:17\n</code></pre>\n<p>This surprised me because I have NCCL2 on my system (Ubuntu 16.04, CUDA 9.2, CuDNN 7.1) and PyTorch picks it up. When I run <code>torch.cuda.nccl.version()</code> I get <code>2213</code>. Also, I pass the NCCL tests at <a href=\"https://github.com/NVIDIA/nccl-tests\">https://github.com/NVIDIA/nccl-tests</a>.</p>\n<p>Has anyone run into this problem?</p>\n<p>My build log is here:<br>\n<a href=\"https://gist.github.com/ggordonhall/175817c36549ef17f9a3465c383ca492\">https://gist.github.com/ggordonhall/175817c36549ef17f9a3465c383ca492</a></p>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch 0.5 - Source installation</li>\n<li>Ubuntu 16.04</li>\n<li>Python version: 3.6</li>\n<li>CUDA/cuDNN version: 9.2, 7.1</li>\n<li>GPU models and configuration: 4 x Nvidia P100</li>\n<li>GCC 5.4</li>\n<li>CMake 3.1</li>\n<li>NCCL 2.213</li>\n</ul>", "body_text": "Issue description\nI'm trying to run an OpenNMT-py model across 4 Nvidia P100 GPUs but I receive this error:\nRuntimeError: the distributed NCCL backend is not available; try to recompile the THD package with CUDA and NCCL 2+ support at /home/ggordo04/pytorch/torch/lib/THD/process_group/General.cpp:17\n\nThis surprised me because I have NCCL2 on my system (Ubuntu 16.04, CUDA 9.2, CuDNN 7.1) and PyTorch picks it up. When I run torch.cuda.nccl.version() I get 2213. Also, I pass the NCCL tests at https://github.com/NVIDIA/nccl-tests.\nHas anyone run into this problem?\nMy build log is here:\nhttps://gist.github.com/ggordonhall/175817c36549ef17f9a3465c383ca492\nSystem Info\n\nPyTorch 0.5 - Source installation\nUbuntu 16.04\nPython version: 3.6\nCUDA/cuDNN version: 9.2, 7.1\nGPU models and configuration: 4 x Nvidia P100\nGCC 5.4\nCMake 3.1\nNCCL 2.213", "body": "## Issue description\r\n\r\nI'm trying to run an OpenNMT-py model across 4 Nvidia P100 GPUs but I receive this error:\r\n\r\n```\r\nRuntimeError: the distributed NCCL backend is not available; try to recompile the THD package with CUDA and NCCL 2+ support at /home/ggordo04/pytorch/torch/lib/THD/process_group/General.cpp:17\r\n```\r\nThis surprised me because I have NCCL2 on my system (Ubuntu 16.04, CUDA 9.2, CuDNN 7.1) and PyTorch picks it up. When I run `torch.cuda.nccl.version()` I get `2213`. Also, I pass the NCCL tests at https://github.com/NVIDIA/nccl-tests. \r\n\r\nHas anyone run into this problem?\r\n\r\nMy build log is here:\r\nhttps://gist.github.com/ggordonhall/175817c36549ef17f9a3465c383ca492\r\n\r\n## System Info\r\n\r\n- PyTorch 0.5 - Source installation\r\n- Ubuntu 16.04\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: 9.2, 7.1\r\n- GPU models and configuration: 4 x Nvidia P100\r\n- GCC 5.4\r\n- CMake 3.1\r\n- NCCL 2.213\r\n\r\n"}
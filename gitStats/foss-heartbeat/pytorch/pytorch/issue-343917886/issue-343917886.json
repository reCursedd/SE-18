{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9752", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9752/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9752/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9752/events", "html_url": "https://github.com/pytorch/pytorch/issues/9752", "id": 343917886, "node_id": "MDU6SXNzdWUzNDM5MTc4ODY=", "number": 9752, "title": "Failed to run \"build_android.sh\"  i686-linux-android-g++: error: unrecognized command line option '-fno-limit-debug-info'", "user": {"login": "avrum", "id": 7944539, "node_id": "MDQ6VXNlcjc5NDQ1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/7944539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avrum", "html_url": "https://github.com/avrum", "followers_url": "https://api.github.com/users/avrum/followers", "following_url": "https://api.github.com/users/avrum/following{/other_user}", "gists_url": "https://api.github.com/users/avrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/avrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avrum/subscriptions", "organizations_url": "https://api.github.com/users/avrum/orgs", "repos_url": "https://api.github.com/users/avrum/repos", "events_url": "https://api.github.com/users/avrum/events{/privacy}", "received_events_url": "https://api.github.com/users/avrum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-07-24T07:32:18Z", "updated_at": "2018-07-30T07:31:51Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>I want to compile all the android native libraries (.a &amp; .so) to x86 processor.<br>\nWhile running the \"build_android.sh\" script i'm getting failed error regarding the make file.</p>\n<h2>Code example</h2>\n<p>I tried running both for x86 and arm64, failed to do so in both scenarios:</p>\n<p>./scripts/build_android.sh -DANDROID_ABI=arm64-v8a -DANDROID_TOOLCHAIN=clang<br>\n./scripts/build_android.sh -DANDROID_ABI=x86 -DANDROID_TOOLCHAIN=clang</p>\n<h2>System Info</h2>\n<p>Mac 10.12.6<br>\nAndroid NDK - R14<br>\ncmake version 3.12.0<br>\nclang Apple LLVM version 9.0.0 (clang-900.0.39.2)<br>\nTarget: x86_64-apple-darwin16.7.0</p>\n<h2>The error while running the build with x86 is :</h2>\n<p>Android: Selected GCC toolchain 'x86-4.9'<br>\n-- Check for working CXX compiler: /Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++<br>\n-- Check for working CXX compiler: /Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++ -- broken<br>\nCMake Error at /usr/local/Cellar/cmake/3.12.0/share/cmake/Modules/CMakeTestCXXCompiler.cmake:45 (message):<br>\nThe C++ compiler</p>\n<pre><code>\"/Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++\"\n</code></pre>\n<p>is not able to compile a simple test program.</p>\n<p>It fails with the following output:</p>\n<pre><code>Change Dir: /Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeTmp\n\nRun Build Command:\"/usr/bin/make\" \"cmTC_6ad89/fast\"\n/Users/myuser/Downloads/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_6ad89.dir/build.make CMakeFiles/cmTC_6ad89.dir/build\nBuilding CXX object CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o\n/Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++ --target=i686-none-linux-android --sysroot=/Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86   -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/libs/x86/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/libs/x86/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86/usr/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86/usr/include/i686-linux-android  -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mstackrealign -Wa,--noexecstack -Wformat -Werror=format-security -frtti -fexceptions   -O0 -fno-limit-debug-info  -fPIE   -o CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o -c /Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeTmp/testCXXCompiler.cxx\ni686-linux-android-g++: error: unrecognized command line option '-fno-limit-debug-info'\nmake[1]: *** [CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o] Error 1\nmake: *** [cmTC_6ad89/fast] Error 2\n</code></pre>\n<p>CMake will not be able to correctly generate this project.<br>\nCall Stack (most recent call first):<br>\nCMakeLists.txt:6 (project)</p>\n<p>-- Configuring incomplete, errors occurred!<br>\nSee also \"/Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeOutput.log\".<br>\nSee also \"/Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeError.log\".</p>", "body_text": "Issue description\nI want to compile all the android native libraries (.a & .so) to x86 processor.\nWhile running the \"build_android.sh\" script i'm getting failed error regarding the make file.\nCode example\nI tried running both for x86 and arm64, failed to do so in both scenarios:\n./scripts/build_android.sh -DANDROID_ABI=arm64-v8a -DANDROID_TOOLCHAIN=clang\n./scripts/build_android.sh -DANDROID_ABI=x86 -DANDROID_TOOLCHAIN=clang\nSystem Info\nMac 10.12.6\nAndroid NDK - R14\ncmake version 3.12.0\nclang Apple LLVM version 9.0.0 (clang-900.0.39.2)\nTarget: x86_64-apple-darwin16.7.0\nThe error while running the build with x86 is :\nAndroid: Selected GCC toolchain 'x86-4.9'\n-- Check for working CXX compiler: /Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++\n-- Check for working CXX compiler: /Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++ -- broken\nCMake Error at /usr/local/Cellar/cmake/3.12.0/share/cmake/Modules/CMakeTestCXXCompiler.cmake:45 (message):\nThe C++ compiler\n\"/Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++\"\n\nis not able to compile a simple test program.\nIt fails with the following output:\nChange Dir: /Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeTmp\n\nRun Build Command:\"/usr/bin/make\" \"cmTC_6ad89/fast\"\n/Users/myuser/Downloads/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_6ad89.dir/build.make CMakeFiles/cmTC_6ad89.dir/build\nBuilding CXX object CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o\n/Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++ --target=i686-none-linux-android --sysroot=/Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86   -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/libs/x86/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/libs/x86/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86/usr/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86/usr/include/i686-linux-android  -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mstackrealign -Wa,--noexecstack -Wformat -Werror=format-security -frtti -fexceptions   -O0 -fno-limit-debug-info  -fPIE   -o CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o -c /Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeTmp/testCXXCompiler.cxx\ni686-linux-android-g++: error: unrecognized command line option '-fno-limit-debug-info'\nmake[1]: *** [CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o] Error 1\nmake: *** [cmTC_6ad89/fast] Error 2\n\nCMake will not be able to correctly generate this project.\nCall Stack (most recent call first):\nCMakeLists.txt:6 (project)\n-- Configuring incomplete, errors occurred!\nSee also \"/Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeOutput.log\".\nSee also \"/Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeError.log\".", "body": "## Issue description\r\n\r\nI want to compile all the android native libraries (.a & .so) to x86 processor.\r\nWhile running the \"build_android.sh\" script i'm getting failed error regarding the make file.\r\n\r\n## Code example\r\n\r\nI tried running both for x86 and arm64, failed to do so in both scenarios:\r\n\r\n ./scripts/build_android.sh -DANDROID_ABI=arm64-v8a -DANDROID_TOOLCHAIN=clang\r\n./scripts/build_android.sh -DANDROID_ABI=x86 -DANDROID_TOOLCHAIN=clang\r\n\r\n## System Info\r\n\r\nMac 10.12.6\r\nAndroid NDK - R14\r\ncmake version 3.12.0\r\nclang Apple LLVM version 9.0.0 (clang-900.0.39.2)\r\nTarget: x86_64-apple-darwin16.7.0\r\n\r\n\r\n\r\n## The error while running the build with x86 is :\r\n\r\nAndroid: Selected GCC toolchain 'x86-4.9'\r\n-- Check for working CXX compiler: /Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++\r\n-- Check for working CXX compiler: /Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++ -- broken\r\nCMake Error at /usr/local/Cellar/cmake/3.12.0/share/cmake/Modules/CMakeTestCXXCompiler.cmake:45 (message):\r\n  The C++ compiler\r\n\r\n    \"/Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++\"\r\n\r\n  is not able to compile a simple test program.\r\n\r\n  It fails with the following output:\r\n\r\n    Change Dir: /Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeTmp\r\n    \r\n    Run Build Command:\"/usr/bin/make\" \"cmTC_6ad89/fast\"\r\n    /Users/myuser/Downloads/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_6ad89.dir/build.make CMakeFiles/cmTC_6ad89.dir/build\r\n    Building CXX object CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o\r\n    /Users/myuser/Library/Android/sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/darwin-x86_64/bin/i686-linux-android-g++ --target=i686-none-linux-android --sysroot=/Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86   -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/libs/x86/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/libs/x86/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86/usr/include -isystem /Users/myuser/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-x86/usr/include/i686-linux-android  -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mstackrealign -Wa,--noexecstack -Wformat -Werror=format-security -frtti -fexceptions   -O0 -fno-limit-debug-info  -fPIE   -o CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o -c /Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeTmp/testCXXCompiler.cxx\r\n    i686-linux-android-g++: error: unrecognized command line option '-fno-limit-debug-info'\r\n    make[1]: *** [CMakeFiles/cmTC_6ad89.dir/testCXXCompiler.cxx.o] Error 1\r\n    make: *** [cmTC_6ad89/fast] Error 2\r\n    \r\n\r\n  \r\n\r\n  CMake will not be able to correctly generate this project.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:6 (project)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"/Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeOutput.log\".\r\nSee also \"/Users/myuser/Workspaces/pytorch_source_code/pytorch/build_android/CMakeFiles/CMakeError.log\".\r\n"}
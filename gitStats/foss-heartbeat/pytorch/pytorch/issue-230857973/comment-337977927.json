{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/337977927", "html_url": "https://github.com/pytorch/pytorch/issues/1637#issuecomment-337977927", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1637", "id": 337977927, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzk3NzkyNw==", "user": {"login": "awaelchli", "id": 5495193, "node_id": "MDQ6VXNlcjU0OTUxOTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5495193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awaelchli", "html_url": "https://github.com/awaelchli", "followers_url": "https://api.github.com/users/awaelchli/followers", "following_url": "https://api.github.com/users/awaelchli/following{/other_user}", "gists_url": "https://api.github.com/users/awaelchli/gists{/gist_id}", "starred_url": "https://api.github.com/users/awaelchli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awaelchli/subscriptions", "organizations_url": "https://api.github.com/users/awaelchli/orgs", "repos_url": "https://api.github.com/users/awaelchli/repos", "events_url": "https://api.github.com/users/awaelchli/events{/privacy}", "received_events_url": "https://api.github.com/users/awaelchli/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-19T17:22:58Z", "updated_at": "2017-10-19T17:26:12Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3503919\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/thatguymike\">@thatguymike</a> I did that with cuda 9.0.176. <em>p2pBandwithLatencyTest</em> gives me the following output and then hangs. At the same time, GPU utilization is at 100% on the first GPU until I kill the process.</p>\n<pre lang=\"[P2P\" data-meta=\"(Peer-to-Peer) GPU Bandwidth Latency Test]\"><code>Device: 0, GeForce GTX 1080 Ti, pciBusID: 9, pciDeviceID: 0, pciDomainID:0\nDevice: 1, GeForce GTX 1080 Ti, pciBusID: a, pciDeviceID: 0, pciDomainID:0\nDevice: 2, GeForce GTX 1080 Ti, pciBusID: 42, pciDeviceID: 0, pciDomainID:0\nDevice: 3, GeForce GTX 1080 Ti, pciBusID: 43, pciDeviceID: 0, pciDomainID:0\nDevice=0 CAN Access Peer Device=1\nDevice=0 CAN Access Peer Device=2\nDevice=0 CAN Access Peer Device=3\nDevice=1 CAN Access Peer Device=0\nDevice=1 CAN Access Peer Device=2\nDevice=1 CAN Access Peer Device=3\nDevice=2 CAN Access Peer Device=0\nDevice=2 CAN Access Peer Device=1\nDevice=2 CAN Access Peer Device=3\nDevice=3 CAN Access Peer Device=0\nDevice=3 CAN Access Peer Device=1\nDevice=3 CAN Access Peer Device=2\n\n***NOTE: In case a device doesn't have P2P access to other one, it falls back to normal memcopy procedure.\nSo you can see lesser Bandwidth (GB/s) in those cases.\n\nP2P Connectivity Matrix\n     D\\D     0     1     2     3\n     0\t     1     1     1     1\n     1\t     1     1     1     1\n     2\t     1     1     1     1\n     3\t     1     1     1     1\nUnidirectional P2P=Disabled Bandwidth Matrix (GB/s)\n   D\\D     0      1      2      3 \n     0 350.37   3.17   3.17   3.17 \n     1   3.34 352.77   4.60   4.58 \n     2   3.31   4.57 351.91   4.50 \n     3   3.34   4.62   4.16 352.17 \nUnidirectional P2P=Enabled Bandwidth Matrix (GB/s)\n</code></pre>", "body_text": "@thatguymike I did that with cuda 9.0.176. p2pBandwithLatencyTest gives me the following output and then hangs. At the same time, GPU utilization is at 100% on the first GPU until I kill the process.\nDevice: 0, GeForce GTX 1080 Ti, pciBusID: 9, pciDeviceID: 0, pciDomainID:0\nDevice: 1, GeForce GTX 1080 Ti, pciBusID: a, pciDeviceID: 0, pciDomainID:0\nDevice: 2, GeForce GTX 1080 Ti, pciBusID: 42, pciDeviceID: 0, pciDomainID:0\nDevice: 3, GeForce GTX 1080 Ti, pciBusID: 43, pciDeviceID: 0, pciDomainID:0\nDevice=0 CAN Access Peer Device=1\nDevice=0 CAN Access Peer Device=2\nDevice=0 CAN Access Peer Device=3\nDevice=1 CAN Access Peer Device=0\nDevice=1 CAN Access Peer Device=2\nDevice=1 CAN Access Peer Device=3\nDevice=2 CAN Access Peer Device=0\nDevice=2 CAN Access Peer Device=1\nDevice=2 CAN Access Peer Device=3\nDevice=3 CAN Access Peer Device=0\nDevice=3 CAN Access Peer Device=1\nDevice=3 CAN Access Peer Device=2\n\n***NOTE: In case a device doesn't have P2P access to other one, it falls back to normal memcopy procedure.\nSo you can see lesser Bandwidth (GB/s) in those cases.\n\nP2P Connectivity Matrix\n     D\\D     0     1     2     3\n     0\t     1     1     1     1\n     1\t     1     1     1     1\n     2\t     1     1     1     1\n     3\t     1     1     1     1\nUnidirectional P2P=Disabled Bandwidth Matrix (GB/s)\n   D\\D     0      1      2      3 \n     0 350.37   3.17   3.17   3.17 \n     1   3.34 352.77   4.60   4.58 \n     2   3.31   4.57 351.91   4.50 \n     3   3.34   4.62   4.16 352.17 \nUnidirectional P2P=Enabled Bandwidth Matrix (GB/s)", "body": "@thatguymike I did that with cuda 9.0.176. _p2pBandwithLatencyTest_ gives me the following output and then hangs. At the same time, GPU utilization is at 100% on the first GPU until I kill the process.\r\n\r\n```[P2P (Peer-to-Peer) GPU Bandwidth Latency Test]\r\nDevice: 0, GeForce GTX 1080 Ti, pciBusID: 9, pciDeviceID: 0, pciDomainID:0\r\nDevice: 1, GeForce GTX 1080 Ti, pciBusID: a, pciDeviceID: 0, pciDomainID:0\r\nDevice: 2, GeForce GTX 1080 Ti, pciBusID: 42, pciDeviceID: 0, pciDomainID:0\r\nDevice: 3, GeForce GTX 1080 Ti, pciBusID: 43, pciDeviceID: 0, pciDomainID:0\r\nDevice=0 CAN Access Peer Device=1\r\nDevice=0 CAN Access Peer Device=2\r\nDevice=0 CAN Access Peer Device=3\r\nDevice=1 CAN Access Peer Device=0\r\nDevice=1 CAN Access Peer Device=2\r\nDevice=1 CAN Access Peer Device=3\r\nDevice=2 CAN Access Peer Device=0\r\nDevice=2 CAN Access Peer Device=1\r\nDevice=2 CAN Access Peer Device=3\r\nDevice=3 CAN Access Peer Device=0\r\nDevice=3 CAN Access Peer Device=1\r\nDevice=3 CAN Access Peer Device=2\r\n\r\n***NOTE: In case a device doesn't have P2P access to other one, it falls back to normal memcopy procedure.\r\nSo you can see lesser Bandwidth (GB/s) in those cases.\r\n\r\nP2P Connectivity Matrix\r\n     D\\D     0     1     2     3\r\n     0\t     1     1     1     1\r\n     1\t     1     1     1     1\r\n     2\t     1     1     1     1\r\n     3\t     1     1     1     1\r\nUnidirectional P2P=Disabled Bandwidth Matrix (GB/s)\r\n   D\\D     0      1      2      3 \r\n     0 350.37   3.17   3.17   3.17 \r\n     1   3.34 352.77   4.60   4.58 \r\n     2   3.31   4.57 351.91   4.50 \r\n     3   3.34   4.62   4.16 352.17 \r\nUnidirectional P2P=Enabled Bandwidth Matrix (GB/s)\r\n```\r\n\r\n\r\n"}
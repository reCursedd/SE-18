{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/379156862", "html_url": "https://github.com/pytorch/pytorch/issues/1637#issuecomment-379156862", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1637", "id": 379156862, "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTE1Njg2Mg==", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-06T06:02:31Z", "updated_at": "2018-04-06T06:11:09Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3366685\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yubeic\">@yubeic</a> no issues at all once you disable IOMMU. But there was much trial and error before we got to a working config that doesn't die and doesn't thermal throttle.</p>\n<ol>\n<li>\n<p><strong>Power</strong>: Be aware that, as it turns out, power supply manufacturers routinely overstate the current capabilities of their power supplies (we've had bad luck with Rosewill in particular), and NVIDIA understates the peak power draw. We've had good results with EVGA SuperNova 1600, everything less than that resulted in sudden shutdowns, usually in the first few batches of a 4-GPU job. With 1600W PSU everything is rock solid. The issue with this is $#@ miners are willing to pay twice the cost for this power supply, so it's $500+, which is way too much.</p>\n</li>\n<li>\n<p><strong>Heat</strong>: A potential issue with consumer cards in a 4GPU box is that they are, well, consumer cards, and they are optimized for low noise. They would rather thermal throttle to 160W than ramp up the fan. The workaround is you force X to run on all GPUs, even if monitors aren't connected, and force the fans to 100% through coolbits. There are numerous examples of that on the internet. Another possible solution is to make a \"hood\" and attach a 120mm fan externally to suck the air out of all the GPUs at once. I wish someone made something like that. I'd pay $10/pc just for the hood. FWIW, we chose the \"software\" solution.</p>\n</li>\n<li>\n<p><strong>Fans</strong>: Not all fans are made equal. GIGABYTE 1080ti cards have pretty weak fans. PNY 1080ti's have pretty good ones. So we mix them, Gigabyte cards in slots 1 and 4 (\"outside\") and PNY in slots 2 and 3 (\"inside\"). Works pretty well, with no thermal throttling.</p>\n</li>\n</ol>\n<p>Once you take care of all this, you get a pretty solid box with 4C/8T to feed each GPU. In fact, I'm thinking of building one for myself right now, it's a sweet rig. 10GbE copper Ethernet is built in as well (the board is Fatal1ty x399).</p>", "body_text": "@yubeic no issues at all once you disable IOMMU. But there was much trial and error before we got to a working config that doesn't die and doesn't thermal throttle.\n\n\nPower: Be aware that, as it turns out, power supply manufacturers routinely overstate the current capabilities of their power supplies (we've had bad luck with Rosewill in particular), and NVIDIA understates the peak power draw. We've had good results with EVGA SuperNova 1600, everything less than that resulted in sudden shutdowns, usually in the first few batches of a 4-GPU job. With 1600W PSU everything is rock solid. The issue with this is $#@ miners are willing to pay twice the cost for this power supply, so it's $500+, which is way too much.\n\n\nHeat: A potential issue with consumer cards in a 4GPU box is that they are, well, consumer cards, and they are optimized for low noise. They would rather thermal throttle to 160W than ramp up the fan. The workaround is you force X to run on all GPUs, even if monitors aren't connected, and force the fans to 100% through coolbits. There are numerous examples of that on the internet. Another possible solution is to make a \"hood\" and attach a 120mm fan externally to suck the air out of all the GPUs at once. I wish someone made something like that. I'd pay $10/pc just for the hood. FWIW, we chose the \"software\" solution.\n\n\nFans: Not all fans are made equal. GIGABYTE 1080ti cards have pretty weak fans. PNY 1080ti's have pretty good ones. So we mix them, Gigabyte cards in slots 1 and 4 (\"outside\") and PNY in slots 2 and 3 (\"inside\"). Works pretty well, with no thermal throttling.\n\n\nOnce you take care of all this, you get a pretty solid box with 4C/8T to feed each GPU. In fact, I'm thinking of building one for myself right now, it's a sweet rig. 10GbE copper Ethernet is built in as well (the board is Fatal1ty x399).", "body": "@yubeic no issues at all once you disable IOMMU. But there was much trial and error before we got to a working config that doesn't die and doesn't thermal throttle.\r\n\r\n1. **Power**: Be aware that, as it turns out, power supply manufacturers routinely overstate the current capabilities of their power supplies (we've had bad luck with Rosewill in particular), and NVIDIA understates the peak power draw. We've had good results with EVGA SuperNova 1600, everything less than that resulted in sudden shutdowns, usually in the first few batches of a 4-GPU job. With 1600W PSU everything is rock solid. The issue with this is $#@ miners are willing to pay twice the cost for this power supply, so it's $500+, which is way too much.\r\n\r\n2. **Heat**: A potential issue with consumer cards in a 4GPU box is that they are, well, consumer cards, and they are optimized for low noise. They would rather thermal throttle to 160W than ramp up the fan. The workaround is you force X to run on all GPUs, even if monitors aren't connected, and force the fans to 100% through coolbits. There are numerous examples of that on the internet. Another possible solution is to make a \"hood\" and attach a 120mm fan externally to suck the air out of all the GPUs at once. I wish someone made something like that. I'd pay $10/pc just for the hood. FWIW, we chose the \"software\" solution.\r\n\r\n3. **Fans**: Not all fans are made equal. GIGABYTE 1080ti cards have pretty weak fans. PNY 1080ti's have pretty good ones. So we mix them, Gigabyte cards in slots 1 and 4 (\"outside\") and PNY in slots 2 and 3 (\"inside\"). Works pretty well, with no thermal throttling.\r\n\r\nOnce you take care of all this, you get a pretty solid box with 4C/8T to feed each GPU. In fact, I'm thinking of building one for myself right now, it's a sweet rig. 10GbE copper Ethernet is built in as well (the board is Fatal1ty x399)."}
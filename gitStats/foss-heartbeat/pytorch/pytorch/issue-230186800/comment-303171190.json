{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/303171190", "html_url": "https://github.com/pytorch/pytorch/pull/1603#issuecomment-303171190", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1603", "id": 303171190, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzE3MTE5MA==", "user": {"login": "adamlerer", "id": 5702157, "node_id": "MDQ6VXNlcjU3MDIxNTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5702157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adamlerer", "html_url": "https://github.com/adamlerer", "followers_url": "https://api.github.com/users/adamlerer/followers", "following_url": "https://api.github.com/users/adamlerer/following{/other_user}", "gists_url": "https://api.github.com/users/adamlerer/gists{/gist_id}", "starred_url": "https://api.github.com/users/adamlerer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adamlerer/subscriptions", "organizations_url": "https://api.github.com/users/adamlerer/orgs", "repos_url": "https://api.github.com/users/adamlerer/repos", "events_url": "https://api.github.com/users/adamlerer/events{/privacy}", "received_events_url": "https://api.github.com/users/adamlerer/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-22T17:45:38Z", "updated_at": "2017-05-22T17:45:38Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I don't see what the problem is with the extra <code>THPInsertCopyFunction</code>. <code>THPInsertCopyFunction</code> is inserting options at init time into a list of possible functions to dispatch <code>copy</code>; when you call <code>copy</code> it tries matching the type to each element in the list. I just stuck <code>THTensor_(copy)</code> (which is a separate, more-optimized function for copying to the same type) at the head of the list, so that if <code>src</code> and <code>dst</code> are the same type it will execute that one instead of the slow one.</p>", "body_text": "I don't see what the problem is with the extra THPInsertCopyFunction. THPInsertCopyFunction is inserting options at init time into a list of possible functions to dispatch copy; when you call copy it tries matching the type to each element in the list. I just stuck THTensor_(copy) (which is a separate, more-optimized function for copying to the same type) at the head of the list, so that if src and dst are the same type it will execute that one instead of the slow one.", "body": "I don't see what the problem is with the extra `THPInsertCopyFunction`. `THPInsertCopyFunction` is inserting options at init time into a list of possible functions to dispatch `copy`; when you call `copy` it tries matching the type to each element in the list. I just stuck `THTensor_(copy)` (which is a separate, more-optimized function for copying to the same type) at the head of the list, so that if `src` and `dst` are the same type it will execute that one instead of the slow one."}
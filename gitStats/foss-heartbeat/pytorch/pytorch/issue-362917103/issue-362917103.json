{"url": "https://api.github.com/repos/pytorch/pytorch/issues/11988", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/11988/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/11988/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/11988/events", "html_url": "https://github.com/pytorch/pytorch/issues/11988", "id": 362917103, "node_id": "MDU6SXNzdWUzNjI5MTcxMDM=", "number": 11988, "title": "massive test failures with SIGILL on old P6200 CPU with pytorch-0.4.1 built from source", "user": {"login": "akamaus", "id": 58955, "node_id": "MDQ6VXNlcjU4OTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/58955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akamaus", "html_url": "https://github.com/akamaus", "followers_url": "https://api.github.com/users/akamaus/followers", "following_url": "https://api.github.com/users/akamaus/following{/other_user}", "gists_url": "https://api.github.com/users/akamaus/gists{/gist_id}", "starred_url": "https://api.github.com/users/akamaus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akamaus/subscriptions", "organizations_url": "https://api.github.com/users/akamaus/orgs", "repos_url": "https://api.github.com/users/akamaus/repos", "events_url": "https://api.github.com/users/akamaus/events{/privacy}", "received_events_url": "https://api.github.com/users/akamaus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "cpuhrsch", "id": 1716488, "node_id": "MDQ6VXNlcjE3MTY0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1716488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpuhrsch", "html_url": "https://github.com/cpuhrsch", "followers_url": "https://api.github.com/users/cpuhrsch/followers", "following_url": "https://api.github.com/users/cpuhrsch/following{/other_user}", "gists_url": "https://api.github.com/users/cpuhrsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpuhrsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpuhrsch/subscriptions", "organizations_url": "https://api.github.com/users/cpuhrsch/orgs", "repos_url": "https://api.github.com/users/cpuhrsch/repos", "events_url": "https://api.github.com/users/cpuhrsch/events{/privacy}", "received_events_url": "https://api.github.com/users/cpuhrsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cpuhrsch", "id": 1716488, "node_id": "MDQ6VXNlcjE3MTY0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1716488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpuhrsch", "html_url": "https://github.com/cpuhrsch", "followers_url": "https://api.github.com/users/cpuhrsch/followers", "following_url": "https://api.github.com/users/cpuhrsch/following{/other_user}", "gists_url": "https://api.github.com/users/cpuhrsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpuhrsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpuhrsch/subscriptions", "organizations_url": "https://api.github.com/users/cpuhrsch/orgs", "repos_url": "https://api.github.com/users/cpuhrsch/repos", "events_url": "https://api.github.com/users/cpuhrsch/events{/privacy}", "received_events_url": "https://api.github.com/users/cpuhrsch/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2018-09-23T06:11:19Z", "updated_at": "2018-10-31T19:48:27Z", "closed_at": "2018-10-31T19:48:27Z", "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>I've built pytorch-0.4.1 from source on old laptop having P6200 CPU. Previous versions (0.2,0.3) worked fine but to my surprise almost all testsuite fails for 0.4.1.</p>\n<p>I've to exclude the following in order to run it to the end:<br>\n<code>python3.6 run_test.py  --exclude autograd dataloader distributed distributions indexing jit legacy_nn nn optim sparse torch utils</code></p>\n<p>I run some of the tests with gdb and basically saw this:</p>\n<pre><code>(gdb) set args test_nn.py\n(gdb) r\nThe program being debugged has been started already.\nStart it from the beginning? (y or n) y\nStarting program: /nix/store/hy65mn4wjswqih75gfr6g4q3xgqdm325-python3-3.6.6/bin/python3.6 test_nn.py\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/nix/store/fg4yq8i8wd08xg3fy58l6q73cjy8hjr2-glibc-2.27/lib/libthread_db.so.1\".\nwarning: File \"/nix/store/zk5zj2307zxaq7dx585yia3dn5k4qlsl-gcc-7.3.0-lib/lib/libstdc++.so.6.0.24-gdb.py\" auto-loading has been declined by your `auto-load safe-path' set to \"$debugdir:$datadir/auto-load\".\n\nProgram received signal SIGILL, Illegal instruction.\n0x00007fffe92613e3 in at::parallel_for&lt;void at::vml::(anonymous namespace)::vfloor&lt;double&gt;(double*, double const*, long)::{lambda(long, long)#1}&gt; ()\n   from /nix/store/v1zd6aqz2x3y3qsbfkx3z6kg7zi6b09m-python3.6-pytorch-0.4.1/lib/python3.6/site-packages/torch/lib/libcaffe2.so\n</code></pre>\n<pre><code>(gdb) set args test_distributions.py\n(gdb) r\nThe program being debugged has been started already.\nStart it from the beginning? (y or n) y \nStarting program: /nix/store/hy65mn4wjswqih75gfr6g4q3xgqdm325-python3-3.6.6/bin/python3.6 test_distributions.py\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/nix/store/fg4yq8i8wd08xg3fy58l6q73cjy8hjr2-glibc-2.27/lib/libthread_db.so.1\".\nwarning: File \"/nix/store/zk5zj2307zxaq7dx585yia3dn5k4qlsl-gcc-7.3.0-lib/lib/libstdc++.so.6.0.24-gdb.py\" auto-loading has been declined by your `auto-load safe-path' set to \"$debugdir:$datadir/auto-load\".\nssss[New Thread 0x7fffe78f7700 (LWP 28505)]\n\nThread 1 \"python3.6\" received signal SIGILL, Illegal instruction.\n0x00007fffe937d694 in at::native::(anonymous namespace)::sum_kernel_impl ()\n   from /nix/store/v1zd6aqz2x3y3qsbfkx3z6kg7zi6b09m-python3.6-pytorch-0.4.1/lib/python3.6/site-packages/torch/lib/libcaffe2.so\n</code></pre>\n<h2>System Info</h2>\n<pre><code>% cat /proc/cpuinfo                                                                                                                  \nprocessor       : 0\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 37\nmodel name      : Intel(R) Pentium(R) CPU        P6200  @ 2.13GHz\nstepping        : 5\nmicrocode       : 0x2\ncpu MHz         : 933.000\ncache size      : 3072 KB\nphysical id     : 0\nsiblings        : 2\ncore id         : 0\ncpu cores       : 2\napicid          : 0\ninitial apicid  : 0\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 11\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 cx16 xtpr pdcm pcid popcnt lahf_lm arat dtherm\nbogomips        : 4266.82\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 36 bits physical, 48 bits virtual\npower management:\n</code></pre>\n<pre><code>- PyTorch or Caffe2: pytorch\n- How you installed PyTorch (conda, pip, source): source\n- Build command you used (if compiling from source): \n- OS: ubuntu14 + nix package manager\n- PyTorch version: 0.4.1\n- Python version: 3.6.0\n- CUDA/cuDNN version: CPU-only\n- GCC version (if compiling from source): 7.3.0\n- CMake version: 3.11.2\n\n</code></pre>", "body_text": "Issue description\nI've built pytorch-0.4.1 from source on old laptop having P6200 CPU. Previous versions (0.2,0.3) worked fine but to my surprise almost all testsuite fails for 0.4.1.\nI've to exclude the following in order to run it to the end:\npython3.6 run_test.py  --exclude autograd dataloader distributed distributions indexing jit legacy_nn nn optim sparse torch utils\nI run some of the tests with gdb and basically saw this:\n(gdb) set args test_nn.py\n(gdb) r\nThe program being debugged has been started already.\nStart it from the beginning? (y or n) y\nStarting program: /nix/store/hy65mn4wjswqih75gfr6g4q3xgqdm325-python3-3.6.6/bin/python3.6 test_nn.py\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/nix/store/fg4yq8i8wd08xg3fy58l6q73cjy8hjr2-glibc-2.27/lib/libthread_db.so.1\".\nwarning: File \"/nix/store/zk5zj2307zxaq7dx585yia3dn5k4qlsl-gcc-7.3.0-lib/lib/libstdc++.so.6.0.24-gdb.py\" auto-loading has been declined by your `auto-load safe-path' set to \"$debugdir:$datadir/auto-load\".\n\nProgram received signal SIGILL, Illegal instruction.\n0x00007fffe92613e3 in at::parallel_for<void at::vml::(anonymous namespace)::vfloor<double>(double*, double const*, long)::{lambda(long, long)#1}> ()\n   from /nix/store/v1zd6aqz2x3y3qsbfkx3z6kg7zi6b09m-python3.6-pytorch-0.4.1/lib/python3.6/site-packages/torch/lib/libcaffe2.so\n\n(gdb) set args test_distributions.py\n(gdb) r\nThe program being debugged has been started already.\nStart it from the beginning? (y or n) y \nStarting program: /nix/store/hy65mn4wjswqih75gfr6g4q3xgqdm325-python3-3.6.6/bin/python3.6 test_distributions.py\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/nix/store/fg4yq8i8wd08xg3fy58l6q73cjy8hjr2-glibc-2.27/lib/libthread_db.so.1\".\nwarning: File \"/nix/store/zk5zj2307zxaq7dx585yia3dn5k4qlsl-gcc-7.3.0-lib/lib/libstdc++.so.6.0.24-gdb.py\" auto-loading has been declined by your `auto-load safe-path' set to \"$debugdir:$datadir/auto-load\".\nssss[New Thread 0x7fffe78f7700 (LWP 28505)]\n\nThread 1 \"python3.6\" received signal SIGILL, Illegal instruction.\n0x00007fffe937d694 in at::native::(anonymous namespace)::sum_kernel_impl ()\n   from /nix/store/v1zd6aqz2x3y3qsbfkx3z6kg7zi6b09m-python3.6-pytorch-0.4.1/lib/python3.6/site-packages/torch/lib/libcaffe2.so\n\nSystem Info\n% cat /proc/cpuinfo                                                                                                                  \nprocessor       : 0\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 37\nmodel name      : Intel(R) Pentium(R) CPU        P6200  @ 2.13GHz\nstepping        : 5\nmicrocode       : 0x2\ncpu MHz         : 933.000\ncache size      : 3072 KB\nphysical id     : 0\nsiblings        : 2\ncore id         : 0\ncpu cores       : 2\napicid          : 0\ninitial apicid  : 0\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 11\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 cx16 xtpr pdcm pcid popcnt lahf_lm arat dtherm\nbogomips        : 4266.82\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 36 bits physical, 48 bits virtual\npower management:\n\n- PyTorch or Caffe2: pytorch\n- How you installed PyTorch (conda, pip, source): source\n- Build command you used (if compiling from source): \n- OS: ubuntu14 + nix package manager\n- PyTorch version: 0.4.1\n- Python version: 3.6.0\n- CUDA/cuDNN version: CPU-only\n- GCC version (if compiling from source): 7.3.0\n- CMake version: 3.11.2", "body": "## Issue description\r\nI've built pytorch-0.4.1 from source on old laptop having P6200 CPU. Previous versions (0.2,0.3) worked fine but to my surprise almost all testsuite fails for 0.4.1.\r\n\r\n I've to exclude the following in order to run it to the end:\r\n```python3.6 run_test.py  --exclude autograd dataloader distributed distributions indexing jit legacy_nn nn optim sparse torch utils```\r\n\r\nI run some of the tests with gdb and basically saw this:\r\n\r\n```\r\n(gdb) set args test_nn.py\r\n(gdb) r\r\nThe program being debugged has been started already.\r\nStart it from the beginning? (y or n) y\r\nStarting program: /nix/store/hy65mn4wjswqih75gfr6g4q3xgqdm325-python3-3.6.6/bin/python3.6 test_nn.py\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/nix/store/fg4yq8i8wd08xg3fy58l6q73cjy8hjr2-glibc-2.27/lib/libthread_db.so.1\".\r\nwarning: File \"/nix/store/zk5zj2307zxaq7dx585yia3dn5k4qlsl-gcc-7.3.0-lib/lib/libstdc++.so.6.0.24-gdb.py\" auto-loading has been declined by your `auto-load safe-path' set to \"$debugdir:$datadir/auto-load\".\r\n\r\nProgram received signal SIGILL, Illegal instruction.\r\n0x00007fffe92613e3 in at::parallel_for<void at::vml::(anonymous namespace)::vfloor<double>(double*, double const*, long)::{lambda(long, long)#1}> ()\r\n   from /nix/store/v1zd6aqz2x3y3qsbfkx3z6kg7zi6b09m-python3.6-pytorch-0.4.1/lib/python3.6/site-packages/torch/lib/libcaffe2.so\r\n```\r\n\r\n```\r\n(gdb) set args test_distributions.py\r\n(gdb) r\r\nThe program being debugged has been started already.\r\nStart it from the beginning? (y or n) y \r\nStarting program: /nix/store/hy65mn4wjswqih75gfr6g4q3xgqdm325-python3-3.6.6/bin/python3.6 test_distributions.py\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/nix/store/fg4yq8i8wd08xg3fy58l6q73cjy8hjr2-glibc-2.27/lib/libthread_db.so.1\".\r\nwarning: File \"/nix/store/zk5zj2307zxaq7dx585yia3dn5k4qlsl-gcc-7.3.0-lib/lib/libstdc++.so.6.0.24-gdb.py\" auto-loading has been declined by your `auto-load safe-path' set to \"$debugdir:$datadir/auto-load\".\r\nssss[New Thread 0x7fffe78f7700 (LWP 28505)]\r\n\r\nThread 1 \"python3.6\" received signal SIGILL, Illegal instruction.\r\n0x00007fffe937d694 in at::native::(anonymous namespace)::sum_kernel_impl ()\r\n   from /nix/store/v1zd6aqz2x3y3qsbfkx3z6kg7zi6b09m-python3.6-pytorch-0.4.1/lib/python3.6/site-packages/torch/lib/libcaffe2.so\r\n```\r\n\r\n## System Info\r\n\r\n```\r\n% cat /proc/cpuinfo                                                                                                                  \r\nprocessor       : 0\r\nvendor_id       : GenuineIntel\r\ncpu family      : 6\r\nmodel           : 37\r\nmodel name      : Intel(R) Pentium(R) CPU        P6200  @ 2.13GHz\r\nstepping        : 5\r\nmicrocode       : 0x2\r\ncpu MHz         : 933.000\r\ncache size      : 3072 KB\r\nphysical id     : 0\r\nsiblings        : 2\r\ncore id         : 0\r\ncpu cores       : 2\r\napicid          : 0\r\ninitial apicid  : 0\r\nfpu             : yes\r\nfpu_exception   : yes\r\ncpuid level     : 11\r\nwp              : yes\r\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 cx16 xtpr pdcm pcid popcnt lahf_lm arat dtherm\r\nbogomips        : 4266.82\r\nclflush size    : 64\r\ncache_alignment : 64\r\naddress sizes   : 36 bits physical, 48 bits virtual\r\npower management:\r\n```\r\n\r\n```\r\n- PyTorch or Caffe2: pytorch\r\n- How you installed PyTorch (conda, pip, source): source\r\n- Build command you used (if compiling from source): \r\n- OS: ubuntu14 + nix package manager\r\n- PyTorch version: 0.4.1\r\n- Python version: 3.6.0\r\n- CUDA/cuDNN version: CPU-only\r\n- GCC version (if compiling from source): 7.3.0\r\n- CMake version: 3.11.2\r\n\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13373", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13373/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13373/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13373/events", "html_url": "https://github.com/pytorch/pytorch/issues/13373", "id": 375810518, "node_id": "MDU6SXNzdWUzNzU4MTA1MTg=", "number": 13373, "title": "cannot run mobilenet_v2_quantized on pytorch/caffe2", "user": {"login": "pcub", "id": 7065417, "node_id": "MDQ6VXNlcjcwNjU0MTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7065417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcub", "html_url": "https://github.com/pcub", "followers_url": "https://api.github.com/users/pcub/followers", "following_url": "https://api.github.com/users/pcub/following{/other_user}", "gists_url": "https://api.github.com/users/pcub/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcub/subscriptions", "organizations_url": "https://api.github.com/users/pcub/orgs", "repos_url": "https://api.github.com/users/pcub/repos", "events_url": "https://api.github.com/users/pcub/events{/privacy}", "received_events_url": "https://api.github.com/users/pcub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": {"login": "harouwu", "id": 5057263, "node_id": "MDQ6VXNlcjUwNTcyNjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/5057263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harouwu", "html_url": "https://github.com/harouwu", "followers_url": "https://api.github.com/users/harouwu/followers", "following_url": "https://api.github.com/users/harouwu/following{/other_user}", "gists_url": "https://api.github.com/users/harouwu/gists{/gist_id}", "starred_url": "https://api.github.com/users/harouwu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harouwu/subscriptions", "organizations_url": "https://api.github.com/users/harouwu/orgs", "repos_url": "https://api.github.com/users/harouwu/repos", "events_url": "https://api.github.com/users/harouwu/events{/privacy}", "received_events_url": "https://api.github.com/users/harouwu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "harouwu", "id": 5057263, "node_id": "MDQ6VXNlcjUwNTcyNjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/5057263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harouwu", "html_url": "https://github.com/harouwu", "followers_url": "https://api.github.com/users/harouwu/followers", "following_url": "https://api.github.com/users/harouwu/following{/other_user}", "gists_url": "https://api.github.com/users/harouwu/gists{/gist_id}", "starred_url": "https://api.github.com/users/harouwu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harouwu/subscriptions", "organizations_url": "https://api.github.com/users/harouwu/orgs", "repos_url": "https://api.github.com/users/harouwu/repos", "events_url": "https://api.github.com/users/harouwu/events{/privacy}", "received_events_url": "https://api.github.com/users/harouwu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-31T05:59:13Z", "updated_at": "2018-11-02T00:38:43Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"question\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/2753.png\">\u2753</g-emoji> Questions and Help</h2>\n<p>I am trying to run mobilenet_v2_quantized (<a href=\"https://github.com/caffe2/models/tree/master/mobilenet_v2_quantized\">https://github.com/caffe2/models/tree/master/mobilenet_v2_quantized</a>) on pytorch/caffe2 repo which supports int8 .</p>\n<p>after compiling pytorch on tx2 and run the model, I meet the following error:</p>\n<pre><code>WARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nWARNING:caffe2.python.workspace:Original python traceback for operator `-2110861432` in network `mobilenet_v2_quant` in exception above (most recent call last):\nTraceback (most recent call last):\n  File \"test_caffe2.py\", line 470, in &lt;module&gt;\n    net_def = createNet(pred_net)\n  File \"test_caffe2.py\", line 406, in createNet\n    workspace.CreateNet(net_def, overwrite=True)\n  File \"/home/gg/pytorch/build/caffe2/python/workspace.py\", line 154, in CreateNet\n    StringifyProto(net), overwrite,\n  File \"/home/gg/pytorch/build/caffe2/python/workspace.py\", line 180, in CallWithExceptionIntercept\n    return func(*args, **kwargs)\nRuntimeError: [enforce fail at operator.cc:46] blob != nullptr. op NCHW2NHWC: Encountered a non-existing input blob: data\nframe #0: c10::ThrowEnforceNotMet(char const*, int, char const*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, void const*) + 0x7c (0x7f5ac89ed4 in /home/gg/pytorch/build/lib/libc10.so)\nframe #1: caffe2::OperatorBase::OperatorBase(caffe2::OperatorDef const&amp;, caffe2::Workspace*) + 0x560 (0x7f5bc5fa18 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #2: &lt;unknown function&gt; + 0x13e5efc (0x7f5c088efc in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #3: std::_Function_handler&lt;std::unique_ptr&lt;caffe2::OperatorBase, std::default_delete&lt;caffe2::OperatorBase&gt; &gt; (caffe2::OperatorDef const&amp;, caffe2::Workspace*), std::unique_ptr&lt;caffe2::OperatorBase, std::default_delete&lt;caffe2::OperatorBase&gt; &gt; (*)(caffe2::OperatorDef const&amp;, caffe2::Workspace*)&gt;::_M_invoke(std::_Any_data const&amp;, caffe2::OperatorDef const&amp;, caffe2::Workspace*&amp;&amp;) + 0x34 (0x7f5cb5dd9c in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\nframe #4: &lt;unknown function&gt; + 0xfbacfc (0x7f5bc5dcfc in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #5: &lt;unknown function&gt; + 0xfbcd0c (0x7f5bc5fd0c in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #6: caffe2::CreateOperator(caffe2::OperatorDef const&amp;, caffe2::Workspace*, int) + 0x430 (0x7f5bc60898 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #7: caffe2::SimpleNet::SimpleNet(std::shared_ptr&lt;caffe2::NetDef const&gt; const&amp;, caffe2::Workspace*) + 0x3dc (0x7f5bcc016c in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #8: &lt;unknown function&gt; + 0x101eb3c (0x7f5bcc1b3c in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #9: &lt;unknown function&gt; + 0xfa5904 (0x7f5bc48904 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #10: caffe2::CreateNet(std::shared_ptr&lt;caffe2::NetDef const&gt; const&amp;, caffe2::Workspace*) + 0x90c (0x7f5bc98f94 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #11: caffe2::Workspace::CreateNet(std::shared_ptr&lt;caffe2::NetDef const&gt; const&amp;, bool) + 0x1e4 (0x7f5bcab824 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #12: caffe2::Workspace::CreateNet(caffe2::NetDef const&amp;, bool) + 0xa4 (0x7f5bcaca7c in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #13: &lt;unknown function&gt; + 0x51060 (0x7f5cb55060 in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\nframe #14: &lt;unknown function&gt; + 0x512d0 (0x7f5cb552d0 in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\nframe #15: &lt;unknown function&gt; + 0x8edfc (0x7f5cb92dfc in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\n&lt;omitting python frames&gt;\n\n\n</code></pre>\n<p>the model is running on CPU only<br>\nwhat is the problem?</p>", "body_text": "\u2753 Questions and Help\nI am trying to run mobilenet_v2_quantized (https://github.com/caffe2/models/tree/master/mobilenet_v2_quantized) on pytorch/caffe2 repo which supports int8 .\nafter compiling pytorch on tx2 and run the model, I meet the following error:\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nWARNING:caffe2.python.workspace:Original python traceback for operator `-2110861432` in network `mobilenet_v2_quant` in exception above (most recent call last):\nTraceback (most recent call last):\n  File \"test_caffe2.py\", line 470, in <module>\n    net_def = createNet(pred_net)\n  File \"test_caffe2.py\", line 406, in createNet\n    workspace.CreateNet(net_def, overwrite=True)\n  File \"/home/gg/pytorch/build/caffe2/python/workspace.py\", line 154, in CreateNet\n    StringifyProto(net), overwrite,\n  File \"/home/gg/pytorch/build/caffe2/python/workspace.py\", line 180, in CallWithExceptionIntercept\n    return func(*args, **kwargs)\nRuntimeError: [enforce fail at operator.cc:46] blob != nullptr. op NCHW2NHWC: Encountered a non-existing input blob: data\nframe #0: c10::ThrowEnforceNotMet(char const*, int, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, void const*) + 0x7c (0x7f5ac89ed4 in /home/gg/pytorch/build/lib/libc10.so)\nframe #1: caffe2::OperatorBase::OperatorBase(caffe2::OperatorDef const&, caffe2::Workspace*) + 0x560 (0x7f5bc5fa18 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #2: <unknown function> + 0x13e5efc (0x7f5c088efc in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #3: std::_Function_handler<std::unique_ptr<caffe2::OperatorBase, std::default_delete<caffe2::OperatorBase> > (caffe2::OperatorDef const&, caffe2::Workspace*), std::unique_ptr<caffe2::OperatorBase, std::default_delete<caffe2::OperatorBase> > (*)(caffe2::OperatorDef const&, caffe2::Workspace*)>::_M_invoke(std::_Any_data const&, caffe2::OperatorDef const&, caffe2::Workspace*&&) + 0x34 (0x7f5cb5dd9c in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\nframe #4: <unknown function> + 0xfbacfc (0x7f5bc5dcfc in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #5: <unknown function> + 0xfbcd0c (0x7f5bc5fd0c in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #6: caffe2::CreateOperator(caffe2::OperatorDef const&, caffe2::Workspace*, int) + 0x430 (0x7f5bc60898 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #7: caffe2::SimpleNet::SimpleNet(std::shared_ptr<caffe2::NetDef const> const&, caffe2::Workspace*) + 0x3dc (0x7f5bcc016c in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #8: <unknown function> + 0x101eb3c (0x7f5bcc1b3c in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #9: <unknown function> + 0xfa5904 (0x7f5bc48904 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #10: caffe2::CreateNet(std::shared_ptr<caffe2::NetDef const> const&, caffe2::Workspace*) + 0x90c (0x7f5bc98f94 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #11: caffe2::Workspace::CreateNet(std::shared_ptr<caffe2::NetDef const> const&, bool) + 0x1e4 (0x7f5bcab824 in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #12: caffe2::Workspace::CreateNet(caffe2::NetDef const&, bool) + 0xa4 (0x7f5bcaca7c in /home/gg/pytorch/build/lib/libcaffe2.so)\nframe #13: <unknown function> + 0x51060 (0x7f5cb55060 in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\nframe #14: <unknown function> + 0x512d0 (0x7f5cb552d0 in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\nframe #15: <unknown function> + 0x8edfc (0x7f5cb92dfc in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\n<omitting python frames>\n\n\n\nthe model is running on CPU only\nwhat is the problem?", "body": "## \u2753 Questions and Help\r\nI am trying to run mobilenet_v2_quantized (https://github.com/caffe2/models/tree/master/mobilenet_v2_quantized) on pytorch/caffe2 repo which supports int8 .\r\n\r\nafter compiling pytorch on tx2 and run the model, I meet the following error:\r\n\r\n```\r\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\r\nWARNING:caffe2.python.workspace:Original python traceback for operator `-2110861432` in network `mobilenet_v2_quant` in exception above (most recent call last):\r\nTraceback (most recent call last):\r\n  File \"test_caffe2.py\", line 470, in <module>\r\n    net_def = createNet(pred_net)\r\n  File \"test_caffe2.py\", line 406, in createNet\r\n    workspace.CreateNet(net_def, overwrite=True)\r\n  File \"/home/gg/pytorch/build/caffe2/python/workspace.py\", line 154, in CreateNet\r\n    StringifyProto(net), overwrite,\r\n  File \"/home/gg/pytorch/build/caffe2/python/workspace.py\", line 180, in CallWithExceptionIntercept\r\n    return func(*args, **kwargs)\r\nRuntimeError: [enforce fail at operator.cc:46] blob != nullptr. op NCHW2NHWC: Encountered a non-existing input blob: data\r\nframe #0: c10::ThrowEnforceNotMet(char const*, int, char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, void const*) + 0x7c (0x7f5ac89ed4 in /home/gg/pytorch/build/lib/libc10.so)\r\nframe #1: caffe2::OperatorBase::OperatorBase(caffe2::OperatorDef const&, caffe2::Workspace*) + 0x560 (0x7f5bc5fa18 in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #2: <unknown function> + 0x13e5efc (0x7f5c088efc in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #3: std::_Function_handler<std::unique_ptr<caffe2::OperatorBase, std::default_delete<caffe2::OperatorBase> > (caffe2::OperatorDef const&, caffe2::Workspace*), std::unique_ptr<caffe2::OperatorBase, std::default_delete<caffe2::OperatorBase> > (*)(caffe2::OperatorDef const&, caffe2::Workspace*)>::_M_invoke(std::_Any_data const&, caffe2::OperatorDef const&, caffe2::Workspace*&&) + 0x34 (0x7f5cb5dd9c in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\r\nframe #4: <unknown function> + 0xfbacfc (0x7f5bc5dcfc in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #5: <unknown function> + 0xfbcd0c (0x7f5bc5fd0c in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #6: caffe2::CreateOperator(caffe2::OperatorDef const&, caffe2::Workspace*, int) + 0x430 (0x7f5bc60898 in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #7: caffe2::SimpleNet::SimpleNet(std::shared_ptr<caffe2::NetDef const> const&, caffe2::Workspace*) + 0x3dc (0x7f5bcc016c in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #8: <unknown function> + 0x101eb3c (0x7f5bcc1b3c in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #9: <unknown function> + 0xfa5904 (0x7f5bc48904 in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #10: caffe2::CreateNet(std::shared_ptr<caffe2::NetDef const> const&, caffe2::Workspace*) + 0x90c (0x7f5bc98f94 in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #11: caffe2::Workspace::CreateNet(std::shared_ptr<caffe2::NetDef const> const&, bool) + 0x1e4 (0x7f5bcab824 in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #12: caffe2::Workspace::CreateNet(caffe2::NetDef const&, bool) + 0xa4 (0x7f5bcaca7c in /home/gg/pytorch/build/lib/libcaffe2.so)\r\nframe #13: <unknown function> + 0x51060 (0x7f5cb55060 in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\r\nframe #14: <unknown function> + 0x512d0 (0x7f5cb552d0 in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\r\nframe #15: <unknown function> + 0x8edfc (0x7f5cb92dfc in /home/gg/pytorch/build/caffe2/python/caffe2_pybind11_state.cpython-35m-aarch64-linux-gnu.so)\r\n<omitting python frames>\r\n\r\n\r\n```\r\nthe model is running on CPU only\r\nwhat is the problem?\r\n"}
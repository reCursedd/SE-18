{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9181", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9181/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9181/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9181/events", "html_url": "https://github.com/pytorch/pytorch/issues/9181", "id": 338515216, "node_id": "MDU6SXNzdWUzMzg1MTUyMTY=", "number": 9181, "title": "token \"\"CUDACC_VER is no longer supported. Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\" is not valid in preprocessor expressions", "user": {"login": "Rahul-Venugopal", "id": 30955455, "node_id": "MDQ6VXNlcjMwOTU1NDU1", "avatar_url": "https://avatars1.githubusercontent.com/u/30955455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rahul-Venugopal", "html_url": "https://github.com/Rahul-Venugopal", "followers_url": "https://api.github.com/users/Rahul-Venugopal/followers", "following_url": "https://api.github.com/users/Rahul-Venugopal/following{/other_user}", "gists_url": "https://api.github.com/users/Rahul-Venugopal/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rahul-Venugopal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rahul-Venugopal/subscriptions", "organizations_url": "https://api.github.com/users/Rahul-Venugopal/orgs", "repos_url": "https://api.github.com/users/Rahul-Venugopal/repos", "events_url": "https://api.github.com/users/Rahul-Venugopal/events{/privacy}", "received_events_url": "https://api.github.com/users/Rahul-Venugopal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": {"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-07-05T10:24:50Z", "updated_at": "2018-07-12T17:49:08Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><strong>### Installation guide followed  -</strong><br>\n<a href=\"https://caffe2.ai/docs/getting-started.html?platform=ubuntu&amp;configuration=compile\" rel=\"nofollow\">https://caffe2.ai/docs/getting-started.html?platform=ubuntu&amp;configuration=compile</a></p>\n<h3><strong>Error Output</strong></h3>\n<p>Scanning dependencies of target python_copy_files<br>\n[ 72%] Built target python_copy_files<br>\n[ 72%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/sgd/caffe2_gpu_generated_adagrad_op_gpu.cu.o<br>\n[ 72%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o<br>\nIn file included from /usr/local/cuda/include/common_functions.h:50:0,<br>\nfrom /usr/local/cuda/include/cuda_runtime.h:115,<br>\nfrom :0:<br>\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"\" is not valid in preprocessor expressions<br>\n#define <strong>CUDACC_VER</strong> \"<strong>CUDACC_VER</strong> is no longer supported.  Use <strong>CUDACC_VER_MAJOR</strong>, <strong>CUDACC_VER_MINOR</strong>, and <strong>CUDACC_VER_BUILD</strong> instead.\"<br>\n^<br>\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:364:33: note: in expansion of macro \u2018<strong>CUDACC_VER</strong>\u2019<br>\n#if defined(<strong>CUDACC_VER</strong>) &amp;&amp;  <strong>CUDACC_VER</strong> &gt;= 70500 &amp;&amp; __cplusplus &gt; 199711L<br>\n^<br>\nCMake Error at caffe2_gpu_generated_math_gpu.cu.o.Release.cmake:219 (message):<br>\nError generating<br>\n/home/rv/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/utils/./caffe2_gpu_generated_math_gpu.cu.o</p>\n<p>caffe2/CMakeFiles/caffe2_gpu.dir/build.make:63: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o' failed<br>\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o] Error 1<br>\nCMakeFiles/Makefile2:1456: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/all' failed<br>\nmake[1]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2<br>\nMakefile:138: recipe for target 'all' failed<br>\nmake: *** [all] Error 2</p>\n<h2>Issue description</h2>\n<p>Error during running the command<br>\n$ <strong>sudo make install</strong></p>\n<h2>Code example</h2>\n<h3><strong>output of cmake ..</strong></h3>\n<p>Does not need to define long separately.<br>\n-- std::exception_ptr is supported.<br>\n-- NUMA is available<br>\n-- Current compiler supports avx2 extention. Will build perfkernels.<br>\n-- Building using own protobuf under third_party per request.<br>\n-- Use custom protobuf build.<br>\n-- Caffe2 protobuf include directory: $&lt;BUILD_INTERFACE:/home/rv/pytorch/third_party/protobuf/src&gt;$&lt;INSTALL_INTERFACE:include&gt;<br>\n-- The BLAS backend of choice:Eigen<br>\n-- Brace yourself, we are building NNPACK<br>\n-- Found PythonInterp: /usr/bin/python (found version \"2.7.12\")<br>\n-- Caffe2: Cannot find gflags automatically. Using legacy find.<br>\n-- Caffe2: Found gflags  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libgflags.so)<br>\n-- Caffe2: Cannot find glog automatically. Using legacy find.<br>\n-- Caffe2: Found glog (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libglog.so)<br>\n-- Found lmdb    (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/liblmdb.so)<br>\n-- Found LevelDB (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libleveldb.so)<br>\n-- Found Snappy  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libsnappy.so)<br>\n-- Found Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)<br>\n-- OpenCV found (/usr/share/OpenCV)<br>\n-- Found system Eigen at /usr/include/eigen3<br>\n-- Found PythonInterp: /usr/bin/python (found suitable version \"2.7.12\", minimum required is \"2.7\")<br>\n-- NumPy ver. 1.11.0 found (include: /usr/lib/python2.7/dist-packages/numpy/core/include)<br>\n-- Could NOT find pybind11 (missing:  pybind11_INCLUDE_DIR)<br>\n-- MPI support found<br>\n-- MPI compile flags:<br>\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi<br>\n-- MPI LINK flags path:  -Wl,-rpath  -Wl,/usr/lib/openmpi/lib  -Wl,--enable-new-dtags<br>\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so<br>\nCMake Warning at cmake/Dependencies.cmake:376 (message):<br>\nOpenMPI found, but it is not built with CUDA support.<br>\nCall Stack (most recent call first):<br>\nCMakeLists.txt:181 (include)</p>\n<p>-- Caffe2: CUDA detected: 9.0<br>\n-- Caffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc<br>\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda<br>\n-- Caffe2: Header version is: 9.0<br>\n-- Found cuDNN: v7.1.4  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libcudnn.so)<br>\n-- Autodetected CUDA architecture(s): 5.0<br>\n-- Added CUDA NVCC flags for: -gencode;arch=compute_50,code=sm_50<br>\n-- Could NOT find NCCL (missing:  NCCL_INCLUDE_DIRS NCCL_LIBRARIES)<br>\n-- Could NOT find CUB (missing:  CUB_INCLUDE_DIR)<br>\n-- Could NOT find Gloo (missing:  Gloo_INCLUDE_DIR Gloo_LIBRARY)<br>\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi<br>\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so<br>\n-- CUDA detected: 9.0<br>\n-- Found libcuda: /usr/local/cuda-9.0/lib64/stubs/libcuda.so<br>\n-- Found libnvrtc: /usr/local/cuda-9.0/lib64/libnvrtc.so<br>\n-- Could NOT find NCCL (missing:  NCCL_INCLUDE_DIR NCCL_LIBRARY)<br>\nCMake Warning at third_party/gloo/cmake/Dependencies.cmake:62 (message):<br>\nNot compiling with NCCL support.  Suppress this warning with<br>\n-DUSE_NCCL=OFF.<br>\nCall Stack (most recent call first):<br>\nthird_party/gloo/CMakeLists.txt:56 (include)</p>\n<p>-- GCC 5.4.0: Adding gcc and gcc_s libs to link line<br>\n-- Include NCCL operators<br>\n-- Excluding ideep operators as we are not using ideep<br>\n-- Including image processing operators<br>\n-- Excluding video processing operators due to no opencv<br>\n-- Excluding mkl operators as we are not using mkl<br>\n-- Include Observer library<br>\nCMake Error at cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:497 (file):<br>\nfile failed to open for writing (Permission denied):</p>\n<pre><code>/home/rv/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/sgd/caffe2_gpu_generated_adagrad_op_gpu.cu.o.depend\n</code></pre>\n<p>Call Stack (most recent call first):<br>\ncmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1595 (cuda_include_nvcc_dependencies)<br>\ncmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1827 (CUDA_WRAP_SRCS)<br>\ncmake/public/utils.cmake:134 (cuda_add_library)<br>\ncaffe2/CMakeLists.txt:230 (torch_cuda_based_add_library)</p>\n<p>-- Using lib/python2.7/dist-packages as python relative installation path<br>\n-- Automatically generating missing <strong>init</strong>.py files.<br>\n-- A previous caffe2 cmake run already created the <strong>init</strong>.py files.<br>\nCMake Warning at CMakeLists.txt:341 (message):<br>\nGenerated cmake files are only fully tested if one builds with system glog,<br>\ngflags, and protobuf.  Other settings may generate files that are not well<br>\ntested.</p>\n<h2>--<br>\n-- ******** Summary ********<br>\n-- General:<br>\n--   CMake version         : 3.5.1<br>\n--   CMake command         : /usr/bin/cmake<br>\n--   Git version           : v0.1.11-9191-g08daed4<br>\n--   System                : Linux<br>\n--   C++ compiler          : /usr/bin/c++<br>\n--   C++ compiler version  : 5.4.0<br>\n--   BLAS                  : Eigen<br>\n--   CXX flags             :  -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-error=deprecated-declarations<br>\n--   Build type            : Release<br>\n--   Compile definitions   :<br>\n--   CMAKE_PREFIX_PATH     :<br>\n--   CMAKE_INSTALL_PREFIX  : /usr/local</h2>\n<p>--   BUILD_CAFFE2          : ON<br>\n--   BUILD_ATEN            : OFF<br>\n--   BUILD_BINARY          : ON<br>\n--   BUILD_CUSTOM_PROTOBUF : ON<br>\n--     Link local protobuf : ON<br>\n--   BUILD_DOCS            : OFF<br>\n--   BUILD_PYTHON          : ON<br>\n--     Python version      : 2.7.12<br>\n--     Python includes     : /usr/include/python2.7<br>\n--   BUILD_SHARED_LIBS     : ON<br>\n--   BUILD_TEST            : OFF<br>\n--   USE_ASAN              : OFF<br>\n--   USE_ATEN              : OFF<br>\n--   USE_CUDA              : ON<br>\n--     CUDA static link    : OFF<br>\n--     USE_CUDNN           : ON<br>\n--     CUDA version        : 9.0<br>\n--     cuDNN version       : 7.1.4<br>\n--     CUDA root directory : /usr/local/cuda<br>\n--     CUDA library        : /usr/local/cuda-9.0/lib64/stubs/libcuda.so<br>\n--     cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so<br>\n--     cublas library      : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a<br>\n--     cufft library       : /usr/local/cuda/lib64/libcufft.so<br>\n--     curand library      : /usr/local/cuda/lib64/libcurand.so<br>\n--     cuDNN library       : /usr/lib/x86_64-linux-gnu/libcudnn.so<br>\n--     nvrtc               : /usr/local/cuda-9.0/lib64/libnvrtc.so<br>\n--     CUDA include path   : /usr/local/cuda/include<br>\n--     NVCC executable     : /usr/local/cuda/bin/nvcc<br>\n--     CUDA host compiler  : /usr/bin/cc<br>\n--     USE_TENSORRT        : OFF<br>\n--   USE_ROCM              : OFF<br>\n--   USE_EIGEN_FOR_BLAS    : ON<br>\n--   USE_FFMPEG            : OFF<br>\n--   USE_GFLAGS            : ON<br>\n--   USE_GLOG              : ON<br>\n--   USE_GLOO              : ON<br>\n--     USE_GLOO_IBVERBS    : OFF<br>\n--   USE_LEVELDB           : ON<br>\n--     LevelDB version     : 1.18<br>\n--     Snappy version      : 1.1.3<br>\n--   USE_LITE_PROTO        : OFF<br>\n--   USE_LMDB              : ON<br>\n--     LMDB version        : 0.9.17<br>\n--   USE_METAL             : OFF<br>\n--   USE_MKL               :<br>\n--   USE_MOBILE_OPENGL     : OFF<br>\n--   USE_MPI               : ON<br>\n--   USE_NCCL              : ON<br>\n--     USE_SYSTEM_NCCL     : OFF<br>\n--   USE_NERVANA_GPU       : OFF<br>\n--   USE_NNPACK            : ON<br>\n--   USE_OBSERVERS         : ON<br>\n--   USE_OPENCL            : OFF<br>\n--   USE_OPENCV            : ON<br>\n--     OpenCV version      : 3.3.1<br>\n--   USE_OPENMP            : OFF<br>\n--   USE_PROF              : OFF<br>\n--   USE_REDIS             : OFF<br>\n--   USE_ROCKSDB           : OFF<br>\n--   USE_ZMQ               : OFF<br>\n--   Public Dependencies  : Threads::Threads;gflags;glog::glog<br>\n--   Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/usr/lib/x86_64-linux-gnu/libleveldb.so;/usr/lib/x86_64-linux-gnu/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;/usr/lib/openmpi/lib/libmpi_cxx.so;/usr/lib/openmpi/lib/libmpi.so;gloo;onnxifi_loader;gcc_s;gcc;dl<br>\n-- Configuring incomplete, errors occurred!<br>\nSee also \"/home/rv/pytorch/build/CMakeFiles/CMakeOutput.log\".<br>\nSee also \"/home/rv/pytorch/build/CMakeFiles/CMakeError.log\".</p>\n<h2>System Info</h2>", "body_text": "### Installation guide followed  -\nhttps://caffe2.ai/docs/getting-started.html?platform=ubuntu&configuration=compile\nError Output\nScanning dependencies of target python_copy_files\n[ 72%] Built target python_copy_files\n[ 72%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/sgd/caffe2_gpu_generated_adagrad_op_gpu.cu.o\n[ 72%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o\nIn file included from /usr/local/cuda/include/common_functions.h:50:0,\nfrom /usr/local/cuda/include/cuda_runtime.h:115,\nfrom :0:\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\" is not valid in preprocessor expressions\n#define CUDACC_VER \"CUDACC_VER is no longer supported.  Use CUDACC_VER_MAJOR, CUDACC_VER_MINOR, and CUDACC_VER_BUILD instead.\"\n^\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:364:33: note: in expansion of macro \u2018CUDACC_VER\u2019\n#if defined(CUDACC_VER) &&  CUDACC_VER >= 70500 && __cplusplus > 199711L\n^\nCMake Error at caffe2_gpu_generated_math_gpu.cu.o.Release.cmake:219 (message):\nError generating\n/home/rv/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/utils/./caffe2_gpu_generated_math_gpu.cu.o\ncaffe2/CMakeFiles/caffe2_gpu.dir/build.make:63: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o' failed\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o] Error 1\nCMakeFiles/Makefile2:1456: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/all' failed\nmake[1]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2\nMakefile:138: recipe for target 'all' failed\nmake: *** [all] Error 2\nIssue description\nError during running the command\n$ sudo make install\nCode example\noutput of cmake ..\nDoes not need to define long separately.\n-- std::exception_ptr is supported.\n-- NUMA is available\n-- Current compiler supports avx2 extention. Will build perfkernels.\n-- Building using own protobuf under third_party per request.\n-- Use custom protobuf build.\n-- Caffe2 protobuf include directory: $<BUILD_INTERFACE:/home/rv/pytorch/third_party/protobuf/src>$<INSTALL_INTERFACE:include>\n-- The BLAS backend of choice:Eigen\n-- Brace yourself, we are building NNPACK\n-- Found PythonInterp: /usr/bin/python (found version \"2.7.12\")\n-- Caffe2: Cannot find gflags automatically. Using legacy find.\n-- Caffe2: Found gflags  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libgflags.so)\n-- Caffe2: Cannot find glog automatically. Using legacy find.\n-- Caffe2: Found glog (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libglog.so)\n-- Found lmdb    (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/liblmdb.so)\n-- Found LevelDB (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libleveldb.so)\n-- Found Snappy  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libsnappy.so)\n-- Found Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)\n-- OpenCV found (/usr/share/OpenCV)\n-- Found system Eigen at /usr/include/eigen3\n-- Found PythonInterp: /usr/bin/python (found suitable version \"2.7.12\", minimum required is \"2.7\")\n-- NumPy ver. 1.11.0 found (include: /usr/lib/python2.7/dist-packages/numpy/core/include)\n-- Could NOT find pybind11 (missing:  pybind11_INCLUDE_DIR)\n-- MPI support found\n-- MPI compile flags:\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi\n-- MPI LINK flags path:  -Wl,-rpath  -Wl,/usr/lib/openmpi/lib  -Wl,--enable-new-dtags\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so\nCMake Warning at cmake/Dependencies.cmake:376 (message):\nOpenMPI found, but it is not built with CUDA support.\nCall Stack (most recent call first):\nCMakeLists.txt:181 (include)\n-- Caffe2: CUDA detected: 9.0\n-- Caffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda\n-- Caffe2: Header version is: 9.0\n-- Found cuDNN: v7.1.4  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libcudnn.so)\n-- Autodetected CUDA architecture(s): 5.0\n-- Added CUDA NVCC flags for: -gencode;arch=compute_50,code=sm_50\n-- Could NOT find NCCL (missing:  NCCL_INCLUDE_DIRS NCCL_LIBRARIES)\n-- Could NOT find CUB (missing:  CUB_INCLUDE_DIR)\n-- Could NOT find Gloo (missing:  Gloo_INCLUDE_DIR Gloo_LIBRARY)\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so\n-- CUDA detected: 9.0\n-- Found libcuda: /usr/local/cuda-9.0/lib64/stubs/libcuda.so\n-- Found libnvrtc: /usr/local/cuda-9.0/lib64/libnvrtc.so\n-- Could NOT find NCCL (missing:  NCCL_INCLUDE_DIR NCCL_LIBRARY)\nCMake Warning at third_party/gloo/cmake/Dependencies.cmake:62 (message):\nNot compiling with NCCL support.  Suppress this warning with\n-DUSE_NCCL=OFF.\nCall Stack (most recent call first):\nthird_party/gloo/CMakeLists.txt:56 (include)\n-- GCC 5.4.0: Adding gcc and gcc_s libs to link line\n-- Include NCCL operators\n-- Excluding ideep operators as we are not using ideep\n-- Including image processing operators\n-- Excluding video processing operators due to no opencv\n-- Excluding mkl operators as we are not using mkl\n-- Include Observer library\nCMake Error at cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:497 (file):\nfile failed to open for writing (Permission denied):\n/home/rv/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/sgd/caffe2_gpu_generated_adagrad_op_gpu.cu.o.depend\n\nCall Stack (most recent call first):\ncmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1595 (cuda_include_nvcc_dependencies)\ncmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1827 (CUDA_WRAP_SRCS)\ncmake/public/utils.cmake:134 (cuda_add_library)\ncaffe2/CMakeLists.txt:230 (torch_cuda_based_add_library)\n-- Using lib/python2.7/dist-packages as python relative installation path\n-- Automatically generating missing init.py files.\n-- A previous caffe2 cmake run already created the init.py files.\nCMake Warning at CMakeLists.txt:341 (message):\nGenerated cmake files are only fully tested if one builds with system glog,\ngflags, and protobuf.  Other settings may generate files that are not well\ntested.\n--\n-- ******** Summary ********\n-- General:\n--   CMake version         : 3.5.1\n--   CMake command         : /usr/bin/cmake\n--   Git version           : v0.1.11-9191-g08daed4\n--   System                : Linux\n--   C++ compiler          : /usr/bin/c++\n--   C++ compiler version  : 5.4.0\n--   BLAS                  : Eigen\n--   CXX flags             :  -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-error=deprecated-declarations\n--   Build type            : Release\n--   Compile definitions   :\n--   CMAKE_PREFIX_PATH     :\n--   CMAKE_INSTALL_PREFIX  : /usr/local\n--   BUILD_CAFFE2          : ON\n--   BUILD_ATEN            : OFF\n--   BUILD_BINARY          : ON\n--   BUILD_CUSTOM_PROTOBUF : ON\n--     Link local protobuf : ON\n--   BUILD_DOCS            : OFF\n--   BUILD_PYTHON          : ON\n--     Python version      : 2.7.12\n--     Python includes     : /usr/include/python2.7\n--   BUILD_SHARED_LIBS     : ON\n--   BUILD_TEST            : OFF\n--   USE_ASAN              : OFF\n--   USE_ATEN              : OFF\n--   USE_CUDA              : ON\n--     CUDA static link    : OFF\n--     USE_CUDNN           : ON\n--     CUDA version        : 9.0\n--     cuDNN version       : 7.1.4\n--     CUDA root directory : /usr/local/cuda\n--     CUDA library        : /usr/local/cuda-9.0/lib64/stubs/libcuda.so\n--     cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\n--     cublas library      : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\n--     cufft library       : /usr/local/cuda/lib64/libcufft.so\n--     curand library      : /usr/local/cuda/lib64/libcurand.so\n--     cuDNN library       : /usr/lib/x86_64-linux-gnu/libcudnn.so\n--     nvrtc               : /usr/local/cuda-9.0/lib64/libnvrtc.so\n--     CUDA include path   : /usr/local/cuda/include\n--     NVCC executable     : /usr/local/cuda/bin/nvcc\n--     CUDA host compiler  : /usr/bin/cc\n--     USE_TENSORRT        : OFF\n--   USE_ROCM              : OFF\n--   USE_EIGEN_FOR_BLAS    : ON\n--   USE_FFMPEG            : OFF\n--   USE_GFLAGS            : ON\n--   USE_GLOG              : ON\n--   USE_GLOO              : ON\n--     USE_GLOO_IBVERBS    : OFF\n--   USE_LEVELDB           : ON\n--     LevelDB version     : 1.18\n--     Snappy version      : 1.1.3\n--   USE_LITE_PROTO        : OFF\n--   USE_LMDB              : ON\n--     LMDB version        : 0.9.17\n--   USE_METAL             : OFF\n--   USE_MKL               :\n--   USE_MOBILE_OPENGL     : OFF\n--   USE_MPI               : ON\n--   USE_NCCL              : ON\n--     USE_SYSTEM_NCCL     : OFF\n--   USE_NERVANA_GPU       : OFF\n--   USE_NNPACK            : ON\n--   USE_OBSERVERS         : ON\n--   USE_OPENCL            : OFF\n--   USE_OPENCV            : ON\n--     OpenCV version      : 3.3.1\n--   USE_OPENMP            : OFF\n--   USE_PROF              : OFF\n--   USE_REDIS             : OFF\n--   USE_ROCKSDB           : OFF\n--   USE_ZMQ               : OFF\n--   Public Dependencies  : Threads::Threads;gflags;glog::glog\n--   Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/usr/lib/x86_64-linux-gnu/libleveldb.so;/usr/lib/x86_64-linux-gnu/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;/usr/lib/openmpi/lib/libmpi_cxx.so;/usr/lib/openmpi/lib/libmpi.so;gloo;onnxifi_loader;gcc_s;gcc;dl\n-- Configuring incomplete, errors occurred!\nSee also \"/home/rv/pytorch/build/CMakeFiles/CMakeOutput.log\".\nSee also \"/home/rv/pytorch/build/CMakeFiles/CMakeError.log\".\nSystem Info", "body": "\r\n**### Installation guide followed  -**\r\nhttps://caffe2.ai/docs/getting-started.html?platform=ubuntu&configuration=compile\r\n\r\n\r\n\r\n### **Error Output**  \r\n\r\n\r\nScanning dependencies of target python_copy_files\r\n[ 72%] Built target python_copy_files\r\n[ 72%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/sgd/caffe2_gpu_generated_adagrad_op_gpu.cu.o\r\n[ 72%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o\r\nIn file included from /usr/local/cuda/include/common_functions.h:50:0,\r\n                 from /usr/local/cuda/include/cuda_runtime.h:115,\r\n                 from <command-line>:0:\r\n/usr/local/cuda/include/crt/common_functions.h:64:24: error: token \"\"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\" is not valid in preprocessor expressions\r\n #define __CUDACC_VER__ \"__CUDACC_VER__ is no longer supported.  Use __CUDACC_VER_MAJOR__, __CUDACC_VER_MINOR__, and __CUDACC_VER_BUILD__ instead.\"\r\n                        ^\r\n/usr/include/eigen3/Eigen/src/Core/util/Macros.h:364:33: note: in expansion of macro \u2018__CUDACC_VER__\u2019\r\n #if defined(__CUDACC_VER__) &&  __CUDACC_VER__ >= 70500 && __cplusplus > 199711L\r\n                                 ^\r\nCMake Error at caffe2_gpu_generated_math_gpu.cu.o.Release.cmake:219 (message):\r\n  Error generating\r\n  /home/rv/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/utils/./caffe2_gpu_generated_math_gpu.cu.o\r\n\r\n\r\ncaffe2/CMakeFiles/caffe2_gpu.dir/build.make:63: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o' failed\r\nmake[2]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/utils/caffe2_gpu_generated_math_gpu.cu.o] Error 1\r\nCMakeFiles/Makefile2:1456: recipe for target 'caffe2/CMakeFiles/caffe2_gpu.dir/all' failed\r\nmake[1]: *** [caffe2/CMakeFiles/caffe2_gpu.dir/all] Error 2\r\nMakefile:138: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n## Issue description\r\n\r\nError during running the command \r\n$ **sudo make install**\r\n\r\n## Code example\r\n\r\n### **output of cmake ..**\r\n\r\nDoes not need to define long separately.\r\n-- std::exception_ptr is supported.\r\n-- NUMA is available\r\n-- Current compiler supports avx2 extention. Will build perfkernels.\r\n-- Building using own protobuf under third_party per request.\r\n-- Use custom protobuf build.\r\n-- Caffe2 protobuf include directory: $<BUILD_INTERFACE:/home/rv/pytorch/third_party/protobuf/src>$<INSTALL_INTERFACE:include>\r\n-- The BLAS backend of choice:Eigen\r\n-- Brace yourself, we are building NNPACK\r\n-- Found PythonInterp: /usr/bin/python (found version \"2.7.12\") \r\n-- Caffe2: Cannot find gflags automatically. Using legacy find.\r\n-- Caffe2: Found gflags  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libgflags.so)\r\n-- Caffe2: Cannot find glog automatically. Using legacy find.\r\n-- Caffe2: Found glog (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libglog.so)\r\n-- Found lmdb    (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/liblmdb.so)\r\n-- Found LevelDB (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libleveldb.so)\r\n-- Found Snappy  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libsnappy.so)\r\n-- Found Numa  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libnuma.so)\r\n-- OpenCV found (/usr/share/OpenCV)\r\n-- Found system Eigen at /usr/include/eigen3\r\n-- Found PythonInterp: /usr/bin/python (found suitable version \"2.7.12\", minimum required is \"2.7\") \r\n-- NumPy ver. 1.11.0 found (include: /usr/lib/python2.7/dist-packages/numpy/core/include)\r\n-- Could NOT find pybind11 (missing:  pybind11_INCLUDE_DIR) \r\n-- MPI support found\r\n-- MPI compile flags: \r\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi\r\n-- MPI LINK flags path:  -Wl,-rpath  -Wl,/usr/lib/openmpi/lib  -Wl,--enable-new-dtags\r\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so\r\nCMake Warning at cmake/Dependencies.cmake:376 (message):\r\n  OpenMPI found, but it is not built with CUDA support.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:181 (include)\r\n\r\n\r\n-- Caffe2: CUDA detected: 9.0\r\n-- Caffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc\r\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda\r\n-- Caffe2: Header version is: 9.0\r\n-- Found cuDNN: v7.1.4  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libcudnn.so)\r\n-- Autodetected CUDA architecture(s): 5.0 \r\n-- Added CUDA NVCC flags for: -gencode;arch=compute_50,code=sm_50\r\n-- Could NOT find NCCL (missing:  NCCL_INCLUDE_DIRS NCCL_LIBRARIES) \r\n-- Could NOT find CUB (missing:  CUB_INCLUDE_DIR) \r\n-- Could NOT find Gloo (missing:  Gloo_INCLUDE_DIR Gloo_LIBRARY) \r\n-- MPI include path: /usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include/usr/lib/openmpi/include/usr/lib/openmpi/include/openmpi\r\n-- MPI libraries: /usr/lib/openmpi/lib/libmpi_cxx.so/usr/lib/openmpi/lib/libmpi.so\r\n-- CUDA detected: 9.0\r\n-- Found libcuda: /usr/local/cuda-9.0/lib64/stubs/libcuda.so\r\n-- Found libnvrtc: /usr/local/cuda-9.0/lib64/libnvrtc.so\r\n-- Could NOT find NCCL (missing:  NCCL_INCLUDE_DIR NCCL_LIBRARY) \r\nCMake Warning at third_party/gloo/cmake/Dependencies.cmake:62 (message):\r\n  Not compiling with NCCL support.  Suppress this warning with\r\n  -DUSE_NCCL=OFF.\r\nCall Stack (most recent call first):\r\n  third_party/gloo/CMakeLists.txt:56 (include)\r\n\r\n\r\n-- GCC 5.4.0: Adding gcc and gcc_s libs to link line\r\n-- Include NCCL operators\r\n-- Excluding ideep operators as we are not using ideep\r\n-- Including image processing operators\r\n-- Excluding video processing operators due to no opencv\r\n-- Excluding mkl operators as we are not using mkl\r\n-- Include Observer library\r\nCMake Error at cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:497 (file):\r\n  file failed to open for writing (Permission denied):\r\n\r\n    /home/rv/pytorch/build/caffe2/CMakeFiles/caffe2_gpu.dir/sgd/caffe2_gpu_generated_adagrad_op_gpu.cu.o.depend\r\nCall Stack (most recent call first):\r\n  cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1595 (cuda_include_nvcc_dependencies)\r\n  cmake/Modules_CUDA_fix/upstream/FindCUDA.cmake:1827 (CUDA_WRAP_SRCS)\r\n  cmake/public/utils.cmake:134 (cuda_add_library)\r\n  caffe2/CMakeLists.txt:230 (torch_cuda_based_add_library)\r\n\r\n\r\n-- Using lib/python2.7/dist-packages as python relative installation path\r\n-- Automatically generating missing __init__.py files.\r\n-- A previous caffe2 cmake run already created the __init__.py files.\r\nCMake Warning at CMakeLists.txt:341 (message):\r\n  Generated cmake files are only fully tested if one builds with system glog,\r\n  gflags, and protobuf.  Other settings may generate files that are not well\r\n  tested.\r\n\r\n\r\n-- \r\n-- ******** Summary ********\r\n-- General:\r\n--   CMake version         : 3.5.1\r\n--   CMake command         : /usr/bin/cmake\r\n--   Git version           : v0.1.11-9191-g08daed4\r\n--   System                : Linux\r\n--   C++ compiler          : /usr/bin/c++\r\n--   C++ compiler version  : 5.4.0\r\n--   BLAS                  : Eigen\r\n--   CXX flags             :  -fvisibility-inlines-hidden -DONNX_NAMESPACE=onnx_c2 -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-error=deprecated-declarations\r\n--   Build type            : Release\r\n--   Compile definitions   : \r\n--   CMAKE_PREFIX_PATH     : \r\n--   CMAKE_INSTALL_PREFIX  : /usr/local\r\n-- \r\n--   BUILD_CAFFE2          : ON\r\n--   BUILD_ATEN            : OFF\r\n--   BUILD_BINARY          : ON\r\n--   BUILD_CUSTOM_PROTOBUF : ON\r\n--     Link local protobuf : ON\r\n--   BUILD_DOCS            : OFF\r\n--   BUILD_PYTHON          : ON\r\n--     Python version      : 2.7.12\r\n--     Python includes     : /usr/include/python2.7\r\n--   BUILD_SHARED_LIBS     : ON\r\n--   BUILD_TEST            : OFF\r\n--   USE_ASAN              : OFF\r\n--   USE_ATEN              : OFF\r\n--   USE_CUDA              : ON\r\n--     CUDA static link    : OFF\r\n--     USE_CUDNN           : ON\r\n--     CUDA version        : 9.0\r\n--     cuDNN version       : 7.1.4\r\n--     CUDA root directory : /usr/local/cuda\r\n--     CUDA library        : /usr/local/cuda-9.0/lib64/stubs/libcuda.so\r\n--     cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib/x86_64-linux-gnu/librt.so\r\n--     cublas library      : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\r\n--     cufft library       : /usr/local/cuda/lib64/libcufft.so\r\n--     curand library      : /usr/local/cuda/lib64/libcurand.so\r\n--     cuDNN library       : /usr/lib/x86_64-linux-gnu/libcudnn.so\r\n--     nvrtc               : /usr/local/cuda-9.0/lib64/libnvrtc.so\r\n--     CUDA include path   : /usr/local/cuda/include\r\n--     NVCC executable     : /usr/local/cuda/bin/nvcc\r\n--     CUDA host compiler  : /usr/bin/cc\r\n--     USE_TENSORRT        : OFF\r\n--   USE_ROCM              : OFF\r\n--   USE_EIGEN_FOR_BLAS    : ON\r\n--   USE_FFMPEG            : OFF\r\n--   USE_GFLAGS            : ON\r\n--   USE_GLOG              : ON\r\n--   USE_GLOO              : ON\r\n--     USE_GLOO_IBVERBS    : OFF\r\n--   USE_LEVELDB           : ON\r\n--     LevelDB version     : 1.18\r\n--     Snappy version      : 1.1.3\r\n--   USE_LITE_PROTO        : OFF\r\n--   USE_LMDB              : ON\r\n--     LMDB version        : 0.9.17\r\n--   USE_METAL             : OFF\r\n--   USE_MKL               : \r\n--   USE_MOBILE_OPENGL     : OFF\r\n--   USE_MPI               : ON\r\n--   USE_NCCL              : ON\r\n--     USE_SYSTEM_NCCL     : OFF\r\n--   USE_NERVANA_GPU       : OFF\r\n--   USE_NNPACK            : ON\r\n--   USE_OBSERVERS         : ON\r\n--   USE_OPENCL            : OFF\r\n--   USE_OPENCV            : ON\r\n--     OpenCV version      : 3.3.1\r\n--   USE_OPENMP            : OFF\r\n--   USE_PROF              : OFF\r\n--   USE_REDIS             : OFF\r\n--   USE_ROCKSDB           : OFF\r\n--   USE_ZMQ               : OFF\r\n--   Public Dependencies  : Threads::Threads;gflags;glog::glog\r\n--   Private Dependencies : nnpack;cpuinfo;/usr/lib/x86_64-linux-gnu/liblmdb.so;/usr/lib/x86_64-linux-gnu/libleveldb.so;/usr/lib/x86_64-linux-gnu/libsnappy.so;/usr/lib/x86_64-linux-gnu/libnuma.so;opencv_core;opencv_highgui;opencv_imgproc;opencv_imgcodecs;opencv_videoio;opencv_video;/usr/lib/openmpi/lib/libmpi_cxx.so;/usr/lib/openmpi/lib/libmpi.so;gloo;onnxifi_loader;gcc_s;gcc;dl\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"/home/rv/pytorch/build/CMakeFiles/CMakeOutput.log\".\r\nSee also \"/home/rv/pytorch/build/CMakeFiles/CMakeError.log\".\r\n\r\n## System Info\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/386179270", "html_url": "https://github.com/pytorch/pytorch/issues/7214#issuecomment-386179270", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7214", "id": 386179270, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjE3OTI3MA==", "user": {"login": "flx42", "id": 3645581, "node_id": "MDQ6VXNlcjM2NDU1ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3645581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flx42", "html_url": "https://github.com/flx42", "followers_url": "https://api.github.com/users/flx42/followers", "following_url": "https://api.github.com/users/flx42/following{/other_user}", "gists_url": "https://api.github.com/users/flx42/gists{/gist_id}", "starred_url": "https://api.github.com/users/flx42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flx42/subscriptions", "organizations_url": "https://api.github.com/users/flx42/orgs", "repos_url": "https://api.github.com/users/flx42/repos", "events_url": "https://api.github.com/users/flx42/events{/privacy}", "received_events_url": "https://api.github.com/users/flx42/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-03T02:51:26Z", "updated_at": "2018-05-03T02:53:17Z", "author_association": "NONE", "body_html": "<blockquote>\n<p>So it seems, at least, there should be a way to prevent the RPATH from being set.</p>\n</blockquote>\n<p>That would be fine, yes.<br>\nRegarding whether it should be the default or not, depend how common the use case 1 is, in your experience. I think the whole situation has improved now:</p>\n<ul>\n<li>cuDNN has deb packages and is now installed at the standard path, respecting multi-arch.</li>\n<li>Package <code>cuda-cudart-9-0</code> will install <code>/etc/ld.so.conf.d/cuda-9-0.conf</code> which will add <code>/usr/local/cuda/lib64</code> to <code>ld.so.cache</code>.</li>\n<li>Driver libraries (like <code>libcuda.so</code>) are now installed in a standard path in Ubuntu 18.04, instead of <code>/usr/lib/nvidia-390</code>. In ubuntu 16.04 it was not the case, but a file was installed in <code>/etc/ld.so.conf.d</code>.</li>\n</ul>\n<p>So, notwithstanding driver install issues, you can get the latest CUDA,, cuDNN and NVIDIA driver with just <code>apt-get</code> commands, and everything will be at standard paths.</p>", "body_text": "So it seems, at least, there should be a way to prevent the RPATH from being set.\n\nThat would be fine, yes.\nRegarding whether it should be the default or not, depend how common the use case 1 is, in your experience. I think the whole situation has improved now:\n\ncuDNN has deb packages and is now installed at the standard path, respecting multi-arch.\nPackage cuda-cudart-9-0 will install /etc/ld.so.conf.d/cuda-9-0.conf which will add /usr/local/cuda/lib64 to ld.so.cache.\nDriver libraries (like libcuda.so) are now installed in a standard path in Ubuntu 18.04, instead of /usr/lib/nvidia-390. In ubuntu 16.04 it was not the case, but a file was installed in /etc/ld.so.conf.d.\n\nSo, notwithstanding driver install issues, you can get the latest CUDA,, cuDNN and NVIDIA driver with just apt-get commands, and everything will be at standard paths.", "body": "> So it seems, at least, there should be a way to prevent the RPATH from being set.\r\n\r\nThat would be fine, yes.\r\nRegarding whether it should be the default or not, depend how common the use case 1 is, in your experience. I think the whole situation has improved now:\r\n- cuDNN has deb packages and is now installed at the standard path, respecting multi-arch.\r\n- Package `cuda-cudart-9-0` will install `/etc/ld.so.conf.d/cuda-9-0.conf` which will add `/usr/local/cuda/lib64` to `ld.so.cache`.\r\n- Driver libraries (like `libcuda.so`) are now installed in a standard path in Ubuntu 18.04, instead of `/usr/lib/nvidia-390`. In ubuntu 16.04 it was not the case, but a file was installed in `/etc/ld.so.conf.d`.\r\n\r\nSo, notwithstanding driver install issues, you can get the latest CUDA,, cuDNN and NVIDIA driver with just `apt-get` commands, and everything will be at standard paths."}
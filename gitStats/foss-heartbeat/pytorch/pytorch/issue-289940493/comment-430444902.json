{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/430444902", "html_url": "https://github.com/pytorch/pytorch/issues/4741#issuecomment-430444902", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/4741", "id": 430444902, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDQ0NDkwMg==", "user": {"login": "penguinshin", "id": 10840426, "node_id": "MDQ6VXNlcjEwODQwNDI2", "avatar_url": "https://avatars3.githubusercontent.com/u/10840426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penguinshin", "html_url": "https://github.com/penguinshin", "followers_url": "https://api.github.com/users/penguinshin/followers", "following_url": "https://api.github.com/users/penguinshin/following{/other_user}", "gists_url": "https://api.github.com/users/penguinshin/gists{/gist_id}", "starred_url": "https://api.github.com/users/penguinshin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penguinshin/subscriptions", "organizations_url": "https://api.github.com/users/penguinshin/orgs", "repos_url": "https://api.github.com/users/penguinshin/repos", "events_url": "https://api.github.com/users/penguinshin/events{/privacy}", "received_events_url": "https://api.github.com/users/penguinshin/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-17T00:13:30Z", "updated_at": "2018-10-17T00:13:30Z", "author_association": "NONE", "body_html": "<div class=\"email-fragment\">I\u2019ll send an example over shortly. But yes, I feed a single batch (the same batch) through a batchnorm layer in train mode until the mean of batchnorm layer becomes fixed, and then switch to eval mode and apply on the same batch and I get different results from the train mode, even though the reported batchnorm running mean for both the train and eval trials are the same</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-signature-reply\">Sent from my iPhone</div>\n<div class=\"email-quoted-reply\"> On Oct 16, 2018, at 8:06 PM, Tongzhou Wang ***@***.***&gt; wrote:\n\n <a class=\"user-mention\" href=\"https://github.com/penguinshin\">@penguinshin</a> Not sure if I understand. Are you saying that you are training on a fixed batch and when switching to eval the error is high? Could you send a small example showing that please? Thank you!\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub, or mute the thread.</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "I\u2019ll send an example over shortly. But yes, I feed a single batch (the same batch) through a batchnorm layer in train mode until the mean of batchnorm layer becomes fixed, and then switch to eval mode and apply on the same batch and I get different results from the train mode, even though the reported batchnorm running mean for both the train and eval trials are the same\n\u2026\nSent from my iPhone\n On Oct 16, 2018, at 8:06 PM, Tongzhou Wang ***@***.***> wrote:\n\n @penguinshin Not sure if I understand. Are you saying that you are training on a fixed batch and when switching to eval the error is high? Could you send a small example showing that please? Thank you!\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub, or mute the thread.", "body": "I\u2019ll send an example over shortly. But yes, I feed a single batch (the same batch) through a batchnorm layer in train mode until the mean of batchnorm layer becomes fixed, and then switch to eval mode and apply on the same batch and I get different results from the train mode, even though the reported batchnorm running mean for both the train and eval trials are the same \n\nSent from my iPhone\n\n> On Oct 16, 2018, at 8:06 PM, Tongzhou Wang <notifications@github.com> wrote:\n> \n> @penguinshin Not sure if I understand. Are you saying that you are training on a fixed batch and when switching to eval the error is high? Could you send a small example showing that please? Thank you!\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7781", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7781/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7781/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7781/events", "html_url": "https://github.com/pytorch/pytorch/issues/7781", "id": 325529323, "node_id": "MDU6SXNzdWUzMjU1MjkzMjM=", "number": 7781, "title": "[Caffe2] Fail to build after upgrading to cuda 9.2", "user": {"login": "baking-soda", "id": 37813659, "node_id": "MDQ6VXNlcjM3ODEzNjU5", "avatar_url": "https://avatars3.githubusercontent.com/u/37813659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/baking-soda", "html_url": "https://github.com/baking-soda", "followers_url": "https://api.github.com/users/baking-soda/followers", "following_url": "https://api.github.com/users/baking-soda/following{/other_user}", "gists_url": "https://api.github.com/users/baking-soda/gists{/gist_id}", "starred_url": "https://api.github.com/users/baking-soda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/baking-soda/subscriptions", "organizations_url": "https://api.github.com/users/baking-soda/orgs", "repos_url": "https://api.github.com/users/baking-soda/repos", "events_url": "https://api.github.com/users/baking-soda/events{/privacy}", "received_events_url": "https://api.github.com/users/baking-soda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-23T02:44:49Z", "updated_at": "2018-06-28T17:36:52Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>I am baffled by this actually (probably because I don't understand cmake very well). After I upgraded to cuda-9.2, wiped out the whole build directory, and reran the build flow, Caffe2 cannot be run:</p>\n<p><code>WARNING:root:Debug message: libcurand.so.9.1: cannot open shared object file: No such file or directory</code></p>\n<p>While 'ldd libcaffe2_gpu.so' gives:<br>\n<code>\tlibcurand.so.9.2 =&gt; /usr/local/cuda-9.2/targets/x86_64-linux/lib/libcurand.so.9.2 (0x00007f7b4965c000)</code></p>\n<h2>Code example</h2>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: Caffe2</li>\n<li>How you installed PyTorch (conda, pip, source): Source build</li>\n<li>Build command you used (if compiling from source): <code>mkdir build &amp;&amp; cd mkdir &amp;&amp; cmake $(python3 ../scripts/get_python_cmake_flags.py) -DUSE_NATIVE_ARCH=ON  -DUSE_CUDA=ON .. &amp;&amp; make &amp;&amp; sudo make install</code></li>\n<li>OS: Ubuntu 1604</li>\n<li>PyTorch version:</li>\n<li>Python version: 3.5.2</li>\n<li>CUDA/cuDNN version: 9.2</li>\n<li>GPU models and configuration: GTX 1070</li>\n<li>GCC version (if compiling from source): gcc (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609</li>\n<li>CMake version: 3.5.1</li>\n<li>Versions of any other relevant libraries:</li>\n</ul>", "body_text": "Issue description\nI am baffled by this actually (probably because I don't understand cmake very well). After I upgraded to cuda-9.2, wiped out the whole build directory, and reran the build flow, Caffe2 cannot be run:\nWARNING:root:Debug message: libcurand.so.9.1: cannot open shared object file: No such file or directory\nWhile 'ldd libcaffe2_gpu.so' gives:\n\tlibcurand.so.9.2 => /usr/local/cuda-9.2/targets/x86_64-linux/lib/libcurand.so.9.2 (0x00007f7b4965c000)\nCode example\nSystem Info\n\nPyTorch or Caffe2: Caffe2\nHow you installed PyTorch (conda, pip, source): Source build\nBuild command you used (if compiling from source): mkdir build && cd mkdir && cmake $(python3 ../scripts/get_python_cmake_flags.py) -DUSE_NATIVE_ARCH=ON  -DUSE_CUDA=ON .. && make && sudo make install\nOS: Ubuntu 1604\nPyTorch version:\nPython version: 3.5.2\nCUDA/cuDNN version: 9.2\nGPU models and configuration: GTX 1070\nGCC version (if compiling from source): gcc (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\nCMake version: 3.5.1\nVersions of any other relevant libraries:", "body": "## Issue description\r\nI am baffled by this actually (probably because I don't understand cmake very well). After I upgraded to cuda-9.2, wiped out the whole build directory, and reran the build flow, Caffe2 cannot be run: \r\n\r\n`WARNING:root:Debug message: libcurand.so.9.1: cannot open shared object file: No such file or directory`\r\n\r\nWhile 'ldd libcaffe2_gpu.so' gives: \r\n`\tlibcurand.so.9.2 => /usr/local/cuda-9.2/targets/x86_64-linux/lib/libcurand.so.9.2 (0x00007f7b4965c000)`\r\n## Code example\r\n\r\n\r\n## System Info\r\n- PyTorch or Caffe2: Caffe2\r\n- How you installed PyTorch (conda, pip, source): Source build\r\n- Build command you used (if compiling from source): `mkdir build && cd mkdir && cmake $(python3 ../scripts/get_python_cmake_flags.py) -DUSE_NATIVE_ARCH=ON  -DUSE_CUDA=ON .. && make && sudo make install`\r\n- OS: Ubuntu 1604\r\n- PyTorch version:\r\n- Python version: 3.5.2\r\n- CUDA/cuDNN version: 9.2\r\n- GPU models and configuration: GTX 1070\r\n- GCC version (if compiling from source): gcc (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\r\n- CMake version: 3.5.1\r\n- Versions of any other relevant libraries:\r\n"}
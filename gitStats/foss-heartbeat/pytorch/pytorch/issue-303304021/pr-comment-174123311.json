{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/174123311", "pull_request_review_id": 103421046, "id": 174123311, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3NDEyMzMxMQ==", "diff_hunk": "@@ -51,6 +51,12 @@ NVCUFLAGS  := -ccbin $(CXX) $(NVCC_GENCODE) -lineinfo -std=c++11 -maxrregcount 9\n # Use addprefix so that we can specify more than one path\n LDFLAGS    := $(addprefix -L,${CUDA_LIB}) -lcudart -lrt\n \n+# If CUDA < 8.0, add workaround C++ flags\n+CUDA_MAJOR_LT_8 := $(shell [ $(CUDA_MAJOR) -lt 8 ] && echo true)\n+ifeq ($(CUDA_MAJOR_LT_8), true)\n+CXXFLAGS += -D_FORCE_INLINES -D_MWAITXINTRIN_H_INCLUDED -D__STRICT_ANSI__\n+endif", "path": "torch/lib/nccl/Makefile", "position": 8, "original_position": 8, "commit_id": "c180bd00baa2faaca642775feb27b7b2a7654406", "original_commit_id": "c180bd00baa2faaca642775feb27b7b2a7654406", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "@jpuigcerver well this issue isn't very convincing. It looks like a hack that has to be applied sometimes, and wasn't included into TF by default. The flags you want to add are not documented online and are internal to compiler headers, so I would rather avoid patching them. It might be a bug in the default Ubuntu compiler, consider upgrading it to a newer version.", "created_at": "2018-03-13T13:15:23Z", "updated_at": "2018-11-23T15:40:40Z", "html_url": "https://github.com/pytorch/pytorch/pull/5621#discussion_r174123311", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/5621", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/174123311"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/5621#discussion_r174123311"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/5621"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=656080\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jpuigcerver\">@jpuigcerver</a> well this issue isn't very convincing. It looks like a hack that has to be applied sometimes, and wasn't included into TF by default. The flags you want to add are not documented online and are internal to compiler headers, so I would rather avoid patching them. It might be a bug in the default Ubuntu compiler, consider upgrading it to a newer version.</p>", "body_text": "@jpuigcerver well this issue isn't very convincing. It looks like a hack that has to be applied sometimes, and wasn't included into TF by default. The flags you want to add are not documented online and are internal to compiler headers, so I would rather avoid patching them. It might be a bug in the default Ubuntu compiler, consider upgrading it to a newer version.", "in_reply_to_id": 173201417}
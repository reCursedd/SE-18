{"url": "https://api.github.com/repos/pytorch/pytorch/issues/329", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/329/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/329/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/329/events", "html_url": "https://github.com/pytorch/pytorch/issues/329", "id": 196445701, "node_id": "MDU6SXNzdWUxOTY0NDU3MDE=", "number": 329, "title": "Softmax2d and LogSoftmax don't work for 2d and higher", "user": {"login": "y0ast", "id": 485778, "node_id": "MDQ6VXNlcjQ4NTc3OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/485778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/y0ast", "html_url": "https://github.com/y0ast", "followers_url": "https://api.github.com/users/y0ast/followers", "following_url": "https://api.github.com/users/y0ast/following{/other_user}", "gists_url": "https://api.github.com/users/y0ast/gists{/gist_id}", "starred_url": "https://api.github.com/users/y0ast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/y0ast/subscriptions", "organizations_url": "https://api.github.com/users/y0ast/orgs", "repos_url": "https://api.github.com/users/y0ast/repos", "events_url": "https://api.github.com/users/y0ast/events{/privacy}", "received_events_url": "https://api.github.com/users/y0ast/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-19T15:44:30Z", "updated_at": "2017-01-04T13:35:52Z", "closed_at": "2017-01-03T20:14:17Z", "author_association": "CONTRIBUTOR", "body_html": "<pre><code>import torch\nfrom torch import nn\nfrom torch.autograd import Variable\nfrom matplotlib import pyplot as plt\n\nsm2 = nn.Softmax2d()\ninput = torch.Tensor(10,1,10,10).uniform_()\noutput = sm2(Variable(input))\n\nprint(output.sum())\nprint(output.mean())\n\nplt.figure()\nplt.imshow(output.data.numpy()[0,0,:,:])\nplt.colorbar()\n</code></pre>\n<p>leads to the following:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/485778/21318599/c8ddc674-c601-11e6-8a0b-2d28d98fd336.png\"><img width=\"449\" alt=\"screen shot 2016-12-19 at 3 42 34 pm\" src=\"https://cloud.githubusercontent.com/assets/485778/21318599/c8ddc674-c601-11e6-8a0b-2d28d98fd336.png\" style=\"max-width:100%;\"></a></p>\n<p>However it should normalize dimension 3 and 4 (1-based), and thus sum to 10.</p>\n<p>see also:<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"194477395\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/torch/nn/issues/1066\" data-hovercard-type=\"issue\" data-hovercard-url=\"/torch/nn/issues/1066/hovercard\" href=\"https://github.com/torch/nn/issues/1066\">torch/nn#1066</a> in lua-torch</p>", "body_text": "import torch\nfrom torch import nn\nfrom torch.autograd import Variable\nfrom matplotlib import pyplot as plt\n\nsm2 = nn.Softmax2d()\ninput = torch.Tensor(10,1,10,10).uniform_()\noutput = sm2(Variable(input))\n\nprint(output.sum())\nprint(output.mean())\n\nplt.figure()\nplt.imshow(output.data.numpy()[0,0,:,:])\nplt.colorbar()\n\nleads to the following:\n\nHowever it should normalize dimension 3 and 4 (1-based), and thus sum to 10.\nsee also:\ntorch/nn#1066 in lua-torch", "body": "```\r\nimport torch\r\nfrom torch import nn\r\nfrom torch.autograd import Variable\r\nfrom matplotlib import pyplot as plt\r\n\r\nsm2 = nn.Softmax2d()\r\ninput = torch.Tensor(10,1,10,10).uniform_()\r\noutput = sm2(Variable(input))\r\n\r\nprint(output.sum())\r\nprint(output.mean())\r\n\r\nplt.figure()\r\nplt.imshow(output.data.numpy()[0,0,:,:])\r\nplt.colorbar()\r\n```\r\n\r\nleads to the following:\r\n<img width=\"449\" alt=\"screen shot 2016-12-19 at 3 42 34 pm\" src=\"https://cloud.githubusercontent.com/assets/485778/21318599/c8ddc674-c601-11e6-8a0b-2d28d98fd336.png\">\r\n\r\nHowever it should normalize dimension 3 and 4 (1-based), and thus sum to 10.\r\n\r\nsee also:\r\nhttps://github.com/torch/nn/issues/1066 in lua-torch"}
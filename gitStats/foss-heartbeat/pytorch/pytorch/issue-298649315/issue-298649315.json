{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5311", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5311/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5311/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5311/events", "html_url": "https://github.com/pytorch/pytorch/issues/5311", "id": 298649315, "node_id": "MDU6SXNzdWUyOTg2NDkzMTU=", "number": 5311, "title": "ASAN detected heap-use-after-free", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-20T16:01:14Z", "updated_at": "2018-07-17T18:11:19Z", "closed_at": "2018-07-17T18:11:19Z", "author_association": "CONTRIBUTOR", "body_html": "<pre><code>17:46:13 test_fd_preserve_sharing (__main__.TestMultiprocessing) ... =================================================================\n17:46:13 ==623==ERROR: AddressSanitizer: heap-use-after-free on address 0x611000005a48 at pc 0x7f41d880cf0a bp 0x7f41c5adaa40 sp 0x7f41c5adaa38\n17:46:13 READ of size 8 at 0x611000005a48 thread T93\n17:46:14     #0 0x7f41d880cf09 in THDoubleStorage_copy (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7a5f09)\n17:46:14     #1 0x7f41da27b161 in THPDoubleStorage_shareFd(THPDoubleStorage*) /var/lib/jenkins/workspace/torch/csrc/generic/StorageSharing.cpp:186:5\n17:46:14     #2 0x555b065c08d9 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e8d9)\n17:46:14     #3 0x555b0665017b in call_function (/opt/conda/bin/python3.6+0x19e17b)\n17:46:14     #4 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #5 0x555b0664a65a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x19865a)\n17:46:14     #6 0x555b065c0c5e in _PyObject_FastCallDict (/opt/conda/bin/python3.6+0x10ec5e)\n17:46:14     #7 0x7f41e0536dca in _Pickle_FastCall (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x8dca)\n17:46:14     #8 0x7f41e054041b in save (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x1241b)\n17:46:14     #9 0x7f41e053f772 in save (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x11772)\n17:46:14     #10 0x7f41e0543b83 in _pickle_Pickler_dump (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x15b83)\n17:46:14     #11 0x555b065c0854 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e854)\n17:46:14     #12 0x555b0665017b in call_function (/opt/conda/bin/python3.6+0x19e17b)\n17:46:14     #13 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #14 0x555b06649353 in _PyEval_EvalCodeWithName (/opt/conda/bin/python3.6+0x197353)\n17:46:14     #15 0x555b0664a24e in fast_function (/opt/conda/bin/python3.6+0x19824e)\n17:46:14     #16 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\n17:46:14     #17 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #18 0x555b0664ad38 in PyEval_EvalCodeEx (/opt/conda/bin/python3.6+0x198d38)\n17:46:14     #19 0x555b0664bc65 in function_call (/opt/conda/bin/python3.6+0x199c65)\n17:46:14     #20 0x555b065c069d in PyObject_Call (/opt/conda/bin/python3.6+0x10e69d)\n17:46:14     #21 0x555b06674217 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c2217)\n17:46:14     #22 0x555b0664a00a in fast_function (/opt/conda/bin/python3.6+0x19800a)\n17:46:14     #23 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\n17:46:14     #24 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #25 0x555b0664a00a in fast_function (/opt/conda/bin/python3.6+0x19800a)\n17:46:14     #26 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\n17:46:14     #27 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #28 0x555b0664a65a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x19865a)\n17:46:14     #29 0x555b065c0c5e in _PyObject_FastCallDict (/opt/conda/bin/python3.6+0x10ec5e)\n17:46:14     #30 0x555b065c58c2 in _PyObject_Call_Prepend (/opt/conda/bin/python3.6+0x1138c2)\n17:46:14     #31 0x555b065c069d in PyObject_Call (/opt/conda/bin/python3.6+0x10e69d)\n17:46:14     #32 0x555b066c0d15 in t_bootstrap (/opt/conda/bin/python3.6+0x20ed15)\n17:46:14     #33 0x7f41e62ab6b9 in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76b9)\n17:46:14     #34 0x7f41e5fe141c in clone (/lib/x86_64-linux-gnu/libc.so.6+0x10741c)\n17:46:14 \n17:46:14 0x611000005a48 is located 8 bytes inside of 200-byte region [0x611000005a40,0x611000005b08)\n17:46:14 freed by thread T93 here:\n17:46:14     #0 0x7f41e65c8cc0 in __interceptor_cfree (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x107cc0)\n17:46:14     #1 0x7f41d87fdf66 in THDoubleStorage_free (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x796f66)\n17:46:14     #2 0x555b065c08d9 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e8d9)\n17:46:14 \n17:46:14 previously allocated by thread T0 here:\n17:46:14     #0 0x7f41e65c8e88 in malloc (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x107e88)\n17:46:14     #1 0x7f41d87f93ec in THAlloc (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7923ec)\n17:46:14     #2 0x7f41d87fe2c0 in THDoubleStorage_resize (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7972c0)\n17:46:14 \n17:46:14 Thread T93 created by T0 here:\n17:46:14     #0 0x7f41e65203cd in pthread_create (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x5f3cd)\n17:46:14     #1 0x555b0667ec3f in PyThread_start_new_thread (/opt/conda/bin/python3.6+0x1ccc3f)\n17:46:14 \n17:46:14 SUMMARY: AddressSanitizer: heap-use-after-free (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7a5f09) in THDoubleStorage_copy\n17:46:14 Shadow bytes around the buggy address:\n17:46:14   0x0c227fff8af0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n17:46:14   0x0c227fff8b00: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n17:46:14   0x0c227fff8b10: fd fd fd fd fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14   0x0c227fff8b20: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n17:46:14   0x0c227fff8b30: fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa\n17:46:14 =&gt;0x0c227fff8b40: fa fa fa fa fa fa fa fa fd[fd]fd fd fd fd fd fd\n17:46:14   0x0c227fff8b50: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n17:46:14   0x0c227fff8b60: fd fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14   0x0c227fff8b70: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14   0x0c227fff8b80: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14   0x0c227fff8b90: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14 Shadow byte legend (one shadow byte represents 8 application bytes):\n17:46:14   Addressable:           00\n17:46:14   Partially addressable: 01 02 03 04 05 06 07 \n17:46:14   Heap left redzone:       fa\n17:46:14   Freed heap region:       fd\n17:46:14   Stack left redzone:      f1\n17:46:14   Stack mid redzone:       f2\n17:46:14   Stack right redzone:     f3\n17:46:14   Stack after return:      f5\n17:46:14   Stack use after scope:   f8\n17:46:14   Global redzone:          f9\n17:46:14   Global init order:       f6\n17:46:14   Poisoned by user:        f7\n17:46:14   Container overflow:      fc\n17:46:14   Array cookie:            ac\n17:46:14   Intra object redzone:    bb\n17:46:14   ASan internal:           fe\n17:46:14   Left alloca redzone:     ca\n17:46:14   Right alloca redzone:    cb\n17:46:14 ==623==ABORTING\n17:46:14 + cleanup\n</code></pre>\n<p>EDIT: Updated with symbolized output</p>", "body_text": "17:46:13 test_fd_preserve_sharing (__main__.TestMultiprocessing) ... =================================================================\n17:46:13 ==623==ERROR: AddressSanitizer: heap-use-after-free on address 0x611000005a48 at pc 0x7f41d880cf0a bp 0x7f41c5adaa40 sp 0x7f41c5adaa38\n17:46:13 READ of size 8 at 0x611000005a48 thread T93\n17:46:14     #0 0x7f41d880cf09 in THDoubleStorage_copy (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7a5f09)\n17:46:14     #1 0x7f41da27b161 in THPDoubleStorage_shareFd(THPDoubleStorage*) /var/lib/jenkins/workspace/torch/csrc/generic/StorageSharing.cpp:186:5\n17:46:14     #2 0x555b065c08d9 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e8d9)\n17:46:14     #3 0x555b0665017b in call_function (/opt/conda/bin/python3.6+0x19e17b)\n17:46:14     #4 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #5 0x555b0664a65a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x19865a)\n17:46:14     #6 0x555b065c0c5e in _PyObject_FastCallDict (/opt/conda/bin/python3.6+0x10ec5e)\n17:46:14     #7 0x7f41e0536dca in _Pickle_FastCall (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x8dca)\n17:46:14     #8 0x7f41e054041b in save (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x1241b)\n17:46:14     #9 0x7f41e053f772 in save (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x11772)\n17:46:14     #10 0x7f41e0543b83 in _pickle_Pickler_dump (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x15b83)\n17:46:14     #11 0x555b065c0854 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e854)\n17:46:14     #12 0x555b0665017b in call_function (/opt/conda/bin/python3.6+0x19e17b)\n17:46:14     #13 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #14 0x555b06649353 in _PyEval_EvalCodeWithName (/opt/conda/bin/python3.6+0x197353)\n17:46:14     #15 0x555b0664a24e in fast_function (/opt/conda/bin/python3.6+0x19824e)\n17:46:14     #16 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\n17:46:14     #17 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #18 0x555b0664ad38 in PyEval_EvalCodeEx (/opt/conda/bin/python3.6+0x198d38)\n17:46:14     #19 0x555b0664bc65 in function_call (/opt/conda/bin/python3.6+0x199c65)\n17:46:14     #20 0x555b065c069d in PyObject_Call (/opt/conda/bin/python3.6+0x10e69d)\n17:46:14     #21 0x555b06674217 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c2217)\n17:46:14     #22 0x555b0664a00a in fast_function (/opt/conda/bin/python3.6+0x19800a)\n17:46:14     #23 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\n17:46:14     #24 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #25 0x555b0664a00a in fast_function (/opt/conda/bin/python3.6+0x19800a)\n17:46:14     #26 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\n17:46:14     #27 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\n17:46:14     #28 0x555b0664a65a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x19865a)\n17:46:14     #29 0x555b065c0c5e in _PyObject_FastCallDict (/opt/conda/bin/python3.6+0x10ec5e)\n17:46:14     #30 0x555b065c58c2 in _PyObject_Call_Prepend (/opt/conda/bin/python3.6+0x1138c2)\n17:46:14     #31 0x555b065c069d in PyObject_Call (/opt/conda/bin/python3.6+0x10e69d)\n17:46:14     #32 0x555b066c0d15 in t_bootstrap (/opt/conda/bin/python3.6+0x20ed15)\n17:46:14     #33 0x7f41e62ab6b9 in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76b9)\n17:46:14     #34 0x7f41e5fe141c in clone (/lib/x86_64-linux-gnu/libc.so.6+0x10741c)\n17:46:14 \n17:46:14 0x611000005a48 is located 8 bytes inside of 200-byte region [0x611000005a40,0x611000005b08)\n17:46:14 freed by thread T93 here:\n17:46:14     #0 0x7f41e65c8cc0 in __interceptor_cfree (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x107cc0)\n17:46:14     #1 0x7f41d87fdf66 in THDoubleStorage_free (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x796f66)\n17:46:14     #2 0x555b065c08d9 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e8d9)\n17:46:14 \n17:46:14 previously allocated by thread T0 here:\n17:46:14     #0 0x7f41e65c8e88 in malloc (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x107e88)\n17:46:14     #1 0x7f41d87f93ec in THAlloc (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7923ec)\n17:46:14     #2 0x7f41d87fe2c0 in THDoubleStorage_resize (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7972c0)\n17:46:14 \n17:46:14 Thread T93 created by T0 here:\n17:46:14     #0 0x7f41e65203cd in pthread_create (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x5f3cd)\n17:46:14     #1 0x555b0667ec3f in PyThread_start_new_thread (/opt/conda/bin/python3.6+0x1ccc3f)\n17:46:14 \n17:46:14 SUMMARY: AddressSanitizer: heap-use-after-free (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7a5f09) in THDoubleStorage_copy\n17:46:14 Shadow bytes around the buggy address:\n17:46:14   0x0c227fff8af0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n17:46:14   0x0c227fff8b00: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n17:46:14   0x0c227fff8b10: fd fd fd fd fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14   0x0c227fff8b20: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n17:46:14   0x0c227fff8b30: fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa\n17:46:14 =>0x0c227fff8b40: fa fa fa fa fa fa fa fa fd[fd]fd fd fd fd fd fd\n17:46:14   0x0c227fff8b50: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n17:46:14   0x0c227fff8b60: fd fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14   0x0c227fff8b70: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14   0x0c227fff8b80: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14   0x0c227fff8b90: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n17:46:14 Shadow byte legend (one shadow byte represents 8 application bytes):\n17:46:14   Addressable:           00\n17:46:14   Partially addressable: 01 02 03 04 05 06 07 \n17:46:14   Heap left redzone:       fa\n17:46:14   Freed heap region:       fd\n17:46:14   Stack left redzone:      f1\n17:46:14   Stack mid redzone:       f2\n17:46:14   Stack right redzone:     f3\n17:46:14   Stack after return:      f5\n17:46:14   Stack use after scope:   f8\n17:46:14   Global redzone:          f9\n17:46:14   Global init order:       f6\n17:46:14   Poisoned by user:        f7\n17:46:14   Container overflow:      fc\n17:46:14   Array cookie:            ac\n17:46:14   Intra object redzone:    bb\n17:46:14   ASan internal:           fe\n17:46:14   Left alloca redzone:     ca\n17:46:14   Right alloca redzone:    cb\n17:46:14 ==623==ABORTING\n17:46:14 + cleanup\n\nEDIT: Updated with symbolized output", "body": "```\r\n17:46:13 test_fd_preserve_sharing (__main__.TestMultiprocessing) ... =================================================================\r\n17:46:13 ==623==ERROR: AddressSanitizer: heap-use-after-free on address 0x611000005a48 at pc 0x7f41d880cf0a bp 0x7f41c5adaa40 sp 0x7f41c5adaa38\r\n17:46:13 READ of size 8 at 0x611000005a48 thread T93\r\n17:46:14     #0 0x7f41d880cf09 in THDoubleStorage_copy (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7a5f09)\r\n17:46:14     #1 0x7f41da27b161 in THPDoubleStorage_shareFd(THPDoubleStorage*) /var/lib/jenkins/workspace/torch/csrc/generic/StorageSharing.cpp:186:5\r\n17:46:14     #2 0x555b065c08d9 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e8d9)\r\n17:46:14     #3 0x555b0665017b in call_function (/opt/conda/bin/python3.6+0x19e17b)\r\n17:46:14     #4 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\r\n17:46:14     #5 0x555b0664a65a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x19865a)\r\n17:46:14     #6 0x555b065c0c5e in _PyObject_FastCallDict (/opt/conda/bin/python3.6+0x10ec5e)\r\n17:46:14     #7 0x7f41e0536dca in _Pickle_FastCall (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x8dca)\r\n17:46:14     #8 0x7f41e054041b in save (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x1241b)\r\n17:46:14     #9 0x7f41e053f772 in save (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x11772)\r\n17:46:14     #10 0x7f41e0543b83 in _pickle_Pickler_dump (/opt/conda/lib/python3.6/lib-dynload/_pickle.cpython-36m-x86_64-linux-gnu.so+0x15b83)\r\n17:46:14     #11 0x555b065c0854 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e854)\r\n17:46:14     #12 0x555b0665017b in call_function (/opt/conda/bin/python3.6+0x19e17b)\r\n17:46:14     #13 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\r\n17:46:14     #14 0x555b06649353 in _PyEval_EvalCodeWithName (/opt/conda/bin/python3.6+0x197353)\r\n17:46:14     #15 0x555b0664a24e in fast_function (/opt/conda/bin/python3.6+0x19824e)\r\n17:46:14     #16 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\r\n17:46:14     #17 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\r\n17:46:14     #18 0x555b0664ad38 in PyEval_EvalCodeEx (/opt/conda/bin/python3.6+0x198d38)\r\n17:46:14     #19 0x555b0664bc65 in function_call (/opt/conda/bin/python3.6+0x199c65)\r\n17:46:14     #20 0x555b065c069d in PyObject_Call (/opt/conda/bin/python3.6+0x10e69d)\r\n17:46:14     #21 0x555b06674217 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c2217)\r\n17:46:14     #22 0x555b0664a00a in fast_function (/opt/conda/bin/python3.6+0x19800a)\r\n17:46:14     #23 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\r\n17:46:14     #24 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\r\n17:46:14     #25 0x555b0664a00a in fast_function (/opt/conda/bin/python3.6+0x19800a)\r\n17:46:14     #26 0x555b06650254 in call_function (/opt/conda/bin/python3.6+0x19e254)\r\n17:46:14     #27 0x555b06672bb9 in _PyEval_EvalFrameDefault (/opt/conda/bin/python3.6+0x1c0bb9)\r\n17:46:14     #28 0x555b0664a65a in _PyFunction_FastCallDict (/opt/conda/bin/python3.6+0x19865a)\r\n17:46:14     #29 0x555b065c0c5e in _PyObject_FastCallDict (/opt/conda/bin/python3.6+0x10ec5e)\r\n17:46:14     #30 0x555b065c58c2 in _PyObject_Call_Prepend (/opt/conda/bin/python3.6+0x1138c2)\r\n17:46:14     #31 0x555b065c069d in PyObject_Call (/opt/conda/bin/python3.6+0x10e69d)\r\n17:46:14     #32 0x555b066c0d15 in t_bootstrap (/opt/conda/bin/python3.6+0x20ed15)\r\n17:46:14     #33 0x7f41e62ab6b9 in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76b9)\r\n17:46:14     #34 0x7f41e5fe141c in clone (/lib/x86_64-linux-gnu/libc.so.6+0x10741c)\r\n17:46:14 \r\n17:46:14 0x611000005a48 is located 8 bytes inside of 200-byte region [0x611000005a40,0x611000005b08)\r\n17:46:14 freed by thread T93 here:\r\n17:46:14     #0 0x7f41e65c8cc0 in __interceptor_cfree (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x107cc0)\r\n17:46:14     #1 0x7f41d87fdf66 in THDoubleStorage_free (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x796f66)\r\n17:46:14     #2 0x555b065c08d9 in _PyCFunction_FastCallDict (/opt/conda/bin/python3.6+0x10e8d9)\r\n17:46:14 \r\n17:46:14 previously allocated by thread T0 here:\r\n17:46:14     #0 0x7f41e65c8e88 in malloc (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x107e88)\r\n17:46:14     #1 0x7f41d87f93ec in THAlloc (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7923ec)\r\n17:46:14     #2 0x7f41d87fe2c0 in THDoubleStorage_resize (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7972c0)\r\n17:46:14 \r\n17:46:14 Thread T93 created by T0 here:\r\n17:46:14     #0 0x7f41e65203cd in pthread_create (/usr/lib/llvm-5.0/lib/clang/5.0.0/lib/linux/libclang_rt.asan-x86_64.so+0x5f3cd)\r\n17:46:14     #1 0x555b0667ec3f in PyThread_start_new_thread (/opt/conda/bin/python3.6+0x1ccc3f)\r\n17:46:14 \r\n17:46:14 SUMMARY: AddressSanitizer: heap-use-after-free (/opt/conda/lib/python3.6/site-packages/torch/lib/libATen.so.1+0x7a5f09) in THDoubleStorage_copy\r\n17:46:14 Shadow bytes around the buggy address:\r\n17:46:14   0x0c227fff8af0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\r\n17:46:14   0x0c227fff8b00: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n17:46:14   0x0c227fff8b10: fd fd fd fd fa fa fa fa fa fa fa fa fa fa fa fa\r\n17:46:14   0x0c227fff8b20: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n17:46:14   0x0c227fff8b30: fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa\r\n17:46:14 =>0x0c227fff8b40: fa fa fa fa fa fa fa fa fd[fd]fd fd fd fd fd fd\r\n17:46:14   0x0c227fff8b50: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n17:46:14   0x0c227fff8b60: fd fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n17:46:14   0x0c227fff8b70: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n17:46:14   0x0c227fff8b80: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n17:46:14   0x0c227fff8b90: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n17:46:14 Shadow byte legend (one shadow byte represents 8 application bytes):\r\n17:46:14   Addressable:           00\r\n17:46:14   Partially addressable: 01 02 03 04 05 06 07 \r\n17:46:14   Heap left redzone:       fa\r\n17:46:14   Freed heap region:       fd\r\n17:46:14   Stack left redzone:      f1\r\n17:46:14   Stack mid redzone:       f2\r\n17:46:14   Stack right redzone:     f3\r\n17:46:14   Stack after return:      f5\r\n17:46:14   Stack use after scope:   f8\r\n17:46:14   Global redzone:          f9\r\n17:46:14   Global init order:       f6\r\n17:46:14   Poisoned by user:        f7\r\n17:46:14   Container overflow:      fc\r\n17:46:14   Array cookie:            ac\r\n17:46:14   Intra object redzone:    bb\r\n17:46:14   ASan internal:           fe\r\n17:46:14   Left alloca redzone:     ca\r\n17:46:14   Right alloca redzone:    cb\r\n17:46:14 ==623==ABORTING\r\n17:46:14 + cleanup\r\n```\r\n\r\nEDIT: Updated with symbolized output\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/412322737", "html_url": "https://github.com/pytorch/pytorch/issues/10430#issuecomment-412322737", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/10430", "id": 412322737, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjMyMjczNw==", "user": {"login": "johnhany", "id": 3396062, "node_id": "MDQ6VXNlcjMzOTYwNjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/3396062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnhany", "html_url": "https://github.com/johnhany", "followers_url": "https://api.github.com/users/johnhany/followers", "following_url": "https://api.github.com/users/johnhany/following{/other_user}", "gists_url": "https://api.github.com/users/johnhany/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnhany/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnhany/subscriptions", "organizations_url": "https://api.github.com/users/johnhany/orgs", "repos_url": "https://api.github.com/users/johnhany/repos", "events_url": "https://api.github.com/users/johnhany/events{/privacy}", "received_events_url": "https://api.github.com/users/johnhany/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-12T06:52:33Z", "updated_at": "2018-08-12T06:52:33Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13564\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ezyang\">@ezyang</a> Here's the backtrace information I get:</p>\n<ol>\n<li><code>(gdb) run mnist.py</code></li>\n</ol>\n<div class=\"highlight highlight-source-shell\"><pre>Starting program: /usr/bin/python3 mnist.py\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/lib/x86_64-linux-gnu/libthread_db.so.1<span class=\"pl-pds\">\"</span></span>.\n[New Thread 0x7ffff38fc700 (LWP 10517)]\n[New Thread 0x7ffff30fb700 (LWP 10518)]\n[New Thread 0x7ffff08fa700 (LWP 10519)]\n[Thread 0x7ffff08fa700 (LWP 10519) exited]\n[Thread 0x7ffff30fb700 (LWP 10518) exited]\n[Thread 0x7ffff38fc700 (LWP 10517) exited]\n\nThread 1 <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>python3<span class=\"pl-pds\">\"</span></span> received signal SIGSEGV, Segmentation fault.\n0x00007fffe2c2cb80 <span class=\"pl-k\">in</span> <span class=\"pl-en\">??</span> ()</pre></div>\n<ol start=\"2\">\n<li><code>(gdb) bt</code><br>\n<a href=\"https://gist.github.com/johnhany/539e2f30ecac48a02d70b8486ea05a01\">gdb-bt.log</a></li>\n<li><code>(gdb) py-bt</code><br>\n<a href=\"https://gist.github.com/johnhany/e4ebf5d0b372dd8daf914b3b6d322e98\">gdb-py-bt.log</a></li>\n<li><code>(gdb) py-bt-full</code><br>\n<a href=\"https://gist.github.com/johnhany/24e43bde8090959344772abe5a3b4953\">gdb-py-bt-full.log</a><br>\nSo far, key word <code>torch</code> comes up the first time in the last line.<br>\nIt reads that symbol <code>_ZTI24THRefcountedMapAllocator</code> is not defined for <code>torch/lib/libshm.so</code>. After a little bit of search, I think that <code>THRefcountedMapAllocator</code> is indeed declared and defined in <code>aten/src/TH/THAllocator.h</code> and <code>aten/src/TH/THAllocator.cpp</code>.</li>\n<li><code>(gdb) py-list</code></li>\n</ol>\n<div class=\"highlight highlight-source-shell\"><pre>  29    ProblemResolver  <span class=\"pl-c\"><span class=\"pl-c\">#</span> pyflakes</span>\n  30    from apt.cdrom import Cdrom\n  31    \n  32    <span class=\"pl-c\"><span class=\"pl-c\">#</span> init the package system, but do not re-initialize config</span>\n  33    <span class=\"pl-k\">if</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>APT<span class=\"pl-pds\">\"</span></span> not <span class=\"pl-k\">in</span> apt_pkg.config:\n <span class=\"pl-k\">&gt;</span>34        <span class=\"pl-en\">apt_pkg.init_config</span>()\n  35    <span class=\"pl-en\">apt_pkg.init_system</span>()\n  36    \n  37    __all__ = [<span class=\"pl-s\"><span class=\"pl-pds\">'</span>Cache<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>Cdrom<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>Package<span class=\"pl-pds\">'</span></span>]</pre></div>", "body_text": "@ezyang Here's the backtrace information I get:\n\n(gdb) run mnist.py\n\nStarting program: /usr/bin/python3 mnist.py\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7ffff38fc700 (LWP 10517)]\n[New Thread 0x7ffff30fb700 (LWP 10518)]\n[New Thread 0x7ffff08fa700 (LWP 10519)]\n[Thread 0x7ffff08fa700 (LWP 10519) exited]\n[Thread 0x7ffff30fb700 (LWP 10518) exited]\n[Thread 0x7ffff38fc700 (LWP 10517) exited]\n\nThread 1 \"python3\" received signal SIGSEGV, Segmentation fault.\n0x00007fffe2c2cb80 in ?? ()\n\n(gdb) bt\ngdb-bt.log\n(gdb) py-bt\ngdb-py-bt.log\n(gdb) py-bt-full\ngdb-py-bt-full.log\nSo far, key word torch comes up the first time in the last line.\nIt reads that symbol _ZTI24THRefcountedMapAllocator is not defined for torch/lib/libshm.so. After a little bit of search, I think that THRefcountedMapAllocator is indeed declared and defined in aten/src/TH/THAllocator.h and aten/src/TH/THAllocator.cpp.\n(gdb) py-list\n\n  29    ProblemResolver  # pyflakes\n  30    from apt.cdrom import Cdrom\n  31    \n  32    # init the package system, but do not re-initialize config\n  33    if \"APT\" not in apt_pkg.config:\n >34        apt_pkg.init_config()\n  35    apt_pkg.init_system()\n  36    \n  37    __all__ = ['Cache', 'Cdrom', 'Package']", "body": "@ezyang Here's the backtrace information I get:\r\n1. `(gdb) run mnist.py`\r\n```bash\r\nStarting program: /usr/bin/python3 mnist.py\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n[New Thread 0x7ffff38fc700 (LWP 10517)]\r\n[New Thread 0x7ffff30fb700 (LWP 10518)]\r\n[New Thread 0x7ffff08fa700 (LWP 10519)]\r\n[Thread 0x7ffff08fa700 (LWP 10519) exited]\r\n[Thread 0x7ffff30fb700 (LWP 10518) exited]\r\n[Thread 0x7ffff38fc700 (LWP 10517) exited]\r\n\r\nThread 1 \"python3\" received signal SIGSEGV, Segmentation fault.\r\n0x00007fffe2c2cb80 in ?? ()\r\n```\r\n2. `(gdb) bt`\r\n[gdb-bt.log](https://gist.github.com/johnhany/539e2f30ecac48a02d70b8486ea05a01)\r\n3. `(gdb) py-bt`\r\n[gdb-py-bt.log](https://gist.github.com/johnhany/e4ebf5d0b372dd8daf914b3b6d322e98)\r\n4. `(gdb) py-bt-full`\r\n[gdb-py-bt-full.log](https://gist.github.com/johnhany/24e43bde8090959344772abe5a3b4953)\r\nSo far, key word `torch` comes up the first time in the last line.\r\nIt reads that symbol `_ZTI24THRefcountedMapAllocator` is not defined for `torch/lib/libshm.so`. After a little bit of search, I think that `THRefcountedMapAllocator` is indeed declared and defined in `aten/src/TH/THAllocator.h` and `aten/src/TH/THAllocator.cpp`.\r\n5. `(gdb) py-list`\r\n```bash\r\n  29    ProblemResolver  # pyflakes\r\n  30    from apt.cdrom import Cdrom\r\n  31    \r\n  32    # init the package system, but do not re-initialize config\r\n  33    if \"APT\" not in apt_pkg.config:\r\n >34        apt_pkg.init_config()\r\n  35    apt_pkg.init_system()\r\n  36    \r\n  37    __all__ = ['Cache', 'Cdrom', 'Package']\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/412791342", "html_url": "https://github.com/pytorch/pytorch/issues/10430#issuecomment-412791342", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/10430", "id": 412791342, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjc5MTM0Mg==", "user": {"login": "johnhany", "id": 3396062, "node_id": "MDQ6VXNlcjMzOTYwNjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/3396062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnhany", "html_url": "https://github.com/johnhany", "followers_url": "https://api.github.com/users/johnhany/followers", "following_url": "https://api.github.com/users/johnhany/following{/other_user}", "gists_url": "https://api.github.com/users/johnhany/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnhany/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnhany/subscriptions", "organizations_url": "https://api.github.com/users/johnhany/orgs", "repos_url": "https://api.github.com/users/johnhany/repos", "events_url": "https://api.github.com/users/johnhany/events{/privacy}", "received_events_url": "https://api.github.com/users/johnhany/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-14T08:13:29Z", "updated_at": "2018-08-14T08:13:29Z", "author_association": "NONE", "body_html": "<p>Well... It happens to conda as well. Here are what I've tried.</p>\n<ol>\n<li>Install Anaconda with Python 3.6 and PyTorch 0.4.1, run MNIST example and get the following error. (I've disabled Apport)</li>\n</ol>\n<pre><code>Traceback (most recent call last):\n  File \"mnist.py\", line 3, in &lt;module&gt;\n    import torch\n  File \"/home/john/anaconda3/envs/python35/lib/python3.5/site-packages/torch/__init__.py\", line 80, in &lt;module&gt;\n    from torch._C import *\nImportError: /home/john/anaconda3/envs/python35/lib/python3.5/site-packages/torch/lib/libshm.so: undefined symbol: _ZTI24THRefcountedMapAllocator\n</code></pre>\n<ol start=\"2\">\n<li>Install Anaconda with Python 2.7 and PyTorch, get the same <code>undefined symbol</code> error.</li>\n<li>Install Miniconda with Python 3.5 and PyTorch, get the same error:(</li>\n</ol>\n<p>And here're all the files in my <code>/usr/local/lib/python3.5/dist-packages/torch/lib/</code> directory.</p>\n<pre><code>include                    libgomp-7bcb08ae.so.1        libshm.so\nlibcaffe2_gpu.so           libnvrtc-007d19c9.so.9.0     THCUNN.h\nlibcaffe2.so               libnvrtc-builtins.so         THNN.h\nlibcudart-f7fdd8d7.so.9.0  libnvToolsExt-3965bdd0.so.1  torch_shm_manager\n</code></pre>\n<p>BTW, I'm having some troubles collecting backtrace with gdb when Apport is disabled (by setting <code>enabled=0</code> in <code>/etc/default/apport</code>). It always shows <code>no stack</code> when running command <code>bt</code>. If I re-enable Apport, the <code>py-bt</code> command does not work properly under the conda environment with gdb, as similar to <a href=\"https://github.com/pypa/virtualenv/issues/644\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pypa/virtualenv/issues/644/hovercard\">this issue</a> in virtualenv. What should I do to get detailed backtrace information manually?</p>", "body_text": "Well... It happens to conda as well. Here are what I've tried.\n\nInstall Anaconda with Python 3.6 and PyTorch 0.4.1, run MNIST example and get the following error. (I've disabled Apport)\n\nTraceback (most recent call last):\n  File \"mnist.py\", line 3, in <module>\n    import torch\n  File \"/home/john/anaconda3/envs/python35/lib/python3.5/site-packages/torch/__init__.py\", line 80, in <module>\n    from torch._C import *\nImportError: /home/john/anaconda3/envs/python35/lib/python3.5/site-packages/torch/lib/libshm.so: undefined symbol: _ZTI24THRefcountedMapAllocator\n\n\nInstall Anaconda with Python 2.7 and PyTorch, get the same undefined symbol error.\nInstall Miniconda with Python 3.5 and PyTorch, get the same error:(\n\nAnd here're all the files in my /usr/local/lib/python3.5/dist-packages/torch/lib/ directory.\ninclude                    libgomp-7bcb08ae.so.1        libshm.so\nlibcaffe2_gpu.so           libnvrtc-007d19c9.so.9.0     THCUNN.h\nlibcaffe2.so               libnvrtc-builtins.so         THNN.h\nlibcudart-f7fdd8d7.so.9.0  libnvToolsExt-3965bdd0.so.1  torch_shm_manager\n\nBTW, I'm having some troubles collecting backtrace with gdb when Apport is disabled (by setting enabled=0 in /etc/default/apport). It always shows no stack when running command bt. If I re-enable Apport, the py-bt command does not work properly under the conda environment with gdb, as similar to this issue in virtualenv. What should I do to get detailed backtrace information manually?", "body": "Well... It happens to conda as well. Here are what I've tried.\r\n1. Install Anaconda with Python 3.6 and PyTorch 0.4.1, run MNIST example and get the following error. (I've disabled Apport)\r\n```\r\nTraceback (most recent call last):\r\n  File \"mnist.py\", line 3, in <module>\r\n    import torch\r\n  File \"/home/john/anaconda3/envs/python35/lib/python3.5/site-packages/torch/__init__.py\", line 80, in <module>\r\n    from torch._C import *\r\nImportError: /home/john/anaconda3/envs/python35/lib/python3.5/site-packages/torch/lib/libshm.so: undefined symbol: _ZTI24THRefcountedMapAllocator\r\n```\r\n2. Install Anaconda with Python 2.7 and PyTorch, get the same `undefined symbol` error.\r\n3. Install Miniconda with Python 3.5 and PyTorch, get the same error:(\r\n\r\nAnd here're all the files in my `/usr/local/lib/python3.5/dist-packages/torch/lib/` directory.\r\n```\r\ninclude                    libgomp-7bcb08ae.so.1        libshm.so\r\nlibcaffe2_gpu.so           libnvrtc-007d19c9.so.9.0     THCUNN.h\r\nlibcaffe2.so               libnvrtc-builtins.so         THNN.h\r\nlibcudart-f7fdd8d7.so.9.0  libnvToolsExt-3965bdd0.so.1  torch_shm_manager\r\n```\r\nBTW, I'm having some troubles collecting backtrace with gdb when Apport is disabled (by setting `enabled=0` in `/etc/default/apport`). It always shows `no stack` when running command `bt`. If I re-enable Apport, the `py-bt` command does not work properly under the conda environment with gdb, as similar to [this issue](https://github.com/pypa/virtualenv/issues/644) in virtualenv. What should I do to get detailed backtrace information manually?"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/209998540", "pull_request_review_id": 146122678, "id": 209998540, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwOTk5ODU0MA==", "diff_hunk": "@@ -120,6 +120,9 @@ void initJITBindings(PyObject *module) {\n       });\n \n   py::class_<ExecutionPlanState>(m, \"ExecutionPlanState\")\n+    .def(\"_graph_copy\", [](ExecutionPlanState& s) {\n+      return s.graph->copy();\n+    })", "path": "torch/csrc/jit/init.cpp", "position": null, "original_position": 6, "commit_id": "e9ad596912a275d2885b630e3ef45869870dc75d", "original_commit_id": "051f6343daaf57551ecf78d5ec57e1345f72f14a", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "Can we make `assertExpectedGraph` *not* mutate the inputs? That's very counterintuitive, and shouldn't really happen. Let's just make it clone the graph when it's called (and expose `Graph::copy()` if it's not exposed yet).", "created_at": "2018-08-14T15:32:16Z", "updated_at": "2018-11-23T15:49:18Z", "html_url": "https://github.com/pytorch/pytorch/pull/10506#discussion_r209998540", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/10506", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/209998540"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/10506#discussion_r209998540"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/10506"}}, "body_html": "<p>Can we make <code>assertExpectedGraph</code> <em>not</em> mutate the inputs? That's very counterintuitive, and shouldn't really happen. Let's just make it clone the graph when it's called (and expose <code>Graph::copy()</code> if it's not exposed yet).</p>", "body_text": "Can we make assertExpectedGraph not mutate the inputs? That's very counterintuitive, and shouldn't really happen. Let's just make it clone the graph when it's called (and expose Graph::copy() if it's not exposed yet)."}
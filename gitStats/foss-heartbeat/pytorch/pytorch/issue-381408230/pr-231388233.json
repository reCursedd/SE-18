{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/14054", "id": 231388233, "node_id": "MDExOlB1bGxSZXF1ZXN0MjMxMzg4MjMz", "html_url": "https://github.com/pytorch/pytorch/pull/14054", "diff_url": "https://github.com/pytorch/pytorch/pull/14054.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/14054.patch", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/14054", "number": 14054, "state": "open", "locked": false, "title": "Jaliyae/dataloader api", "user": {"login": "jaliyae", "id": 12703337, "node_id": "MDQ6VXNlcjEyNzAzMzM3", "avatar_url": "https://avatars3.githubusercontent.com/u/12703337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaliyae", "html_url": "https://github.com/jaliyae", "followers_url": "https://api.github.com/users/jaliyae/followers", "following_url": "https://api.github.com/users/jaliyae/following{/other_user}", "gists_url": "https://api.github.com/users/jaliyae/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaliyae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaliyae/subscriptions", "organizations_url": "https://api.github.com/users/jaliyae/orgs", "repos_url": "https://api.github.com/users/jaliyae/repos", "events_url": "https://api.github.com/users/jaliyae/events{/privacy}", "received_events_url": "https://api.github.com/users/jaliyae/received_events", "type": "User", "site_admin": false}, "body": "@goldsborough @apaszke \r\nThis PR includes all the changes we need from the dataloader to support chunk loading. I incorporated most of your suggestions in our previous PRs. This still needs to be integrated with the SharedDataSet change once it is merged. In the  meantime, please have a look and let me know your comments. here is a brief description of what we plan to do with chunk loading.\r\n\r\n**Chunk data set** - A dataset that support preloading whole chunks (not a batch) to memory. For this we don't need to know the size of the dataset like in the current data sets. It will be a stateful dataset, so we don't want it to be copied to threads in the dataloader, therefore this PR depends on the SharedDataSet PR. \r\n\r\n**Dataset.reset()** - Similar to dataloader.reset(), this will help us start the preloading and clear Chunk data set at epoch boundaries. \r\n\r\n**Sampler.reset(new_size)** - We need this support, because the size of the dataset or the chunks are unknown at the start, so we need to set the size of the samplers after loading data.\r\n\r\nThese are the minimum changes we need and as you can see, most of the changes going to be in the chunk data set, which will be completed with all the test cases once we conclude the API changes. \r\n\r\nPlease let me know your comments/suggestions.\r\n\r\nPrevious PRs: [Sampler.rest()](https://github.com/pytorch/pytorch/pull/13870/files), [Dataloader](https://github.com/pytorch/pytorch/pull/13585/files), [SharedDataSet](https://github.com/pytorch/pytorch/pull/13800/files)\r\n", "created_at": "2018-11-16T01:24:36Z", "updated_at": "2018-11-21T21:55:36Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "374ddd869977548da76a60707fc8f9c58257d041", "assignee": null, "assignees": [], "requested_reviewers": [{"login": "ebetica", "id": 3605224, "node_id": "MDQ6VXNlcjM2MDUyMjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3605224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebetica", "html_url": "https://github.com/ebetica", "followers_url": "https://api.github.com/users/ebetica/followers", "following_url": "https://api.github.com/users/ebetica/following{/other_user}", "gists_url": "https://api.github.com/users/ebetica/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebetica/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebetica/subscriptions", "organizations_url": "https://api.github.com/users/ebetica/orgs", "repos_url": "https://api.github.com/users/ebetica/repos", "events_url": "https://api.github.com/users/ebetica/events{/privacy}", "received_events_url": "https://api.github.com/users/ebetica/received_events", "type": "User", "site_admin": false}, {"login": "goldsborough", "id": 6429851, "node_id": "MDQ6VXNlcjY0Mjk4NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6429851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldsborough", "html_url": "https://github.com/goldsborough", "followers_url": "https://api.github.com/users/goldsborough/followers", "following_url": "https://api.github.com/users/goldsborough/following{/other_user}", "gists_url": "https://api.github.com/users/goldsborough/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldsborough/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldsborough/subscriptions", "organizations_url": "https://api.github.com/users/goldsborough/orgs", "repos_url": "https://api.github.com/users/goldsborough/repos", "events_url": "https://api.github.com/users/goldsborough/events{/privacy}", "received_events_url": "https://api.github.com/users/goldsborough/received_events", "type": "User", "site_admin": false}], "requested_teams": [], "labels": [], "milestone": null, "commits_url": "https://api.github.com/repos/pytorch/pytorch/pulls/14054/commits", "review_comments_url": "https://api.github.com/repos/pytorch/pytorch/pulls/14054/comments", "review_comment_url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/14054/comments", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/8764e24ae43a103f4b74dcc1ef5a5dbc5b0f8fa7", "head": {"label": "jaliyae:jaliyae/dataloader_api", "ref": "jaliyae/dataloader_api", "sha": "8764e24ae43a103f4b74dcc1ef5a5dbc5b0f8fa7", "user": {"login": "jaliyae", "id": 12703337, "node_id": "MDQ6VXNlcjEyNzAzMzM3", "avatar_url": "https://avatars3.githubusercontent.com/u/12703337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaliyae", "html_url": "https://github.com/jaliyae", "followers_url": "https://api.github.com/users/jaliyae/followers", "following_url": "https://api.github.com/users/jaliyae/following{/other_user}", "gists_url": "https://api.github.com/users/jaliyae/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaliyae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaliyae/subscriptions", "organizations_url": "https://api.github.com/users/jaliyae/orgs", "repos_url": "https://api.github.com/users/jaliyae/repos", "events_url": "https://api.github.com/users/jaliyae/events{/privacy}", "received_events_url": "https://api.github.com/users/jaliyae/received_events", "type": "User", "site_admin": false}, "repo": {"id": 154229247, "node_id": "MDEwOlJlcG9zaXRvcnkxNTQyMjkyNDc=", "name": "pytorch", "full_name": "jaliyae/pytorch", "private": false, "owner": {"login": "jaliyae", "id": 12703337, "node_id": "MDQ6VXNlcjEyNzAzMzM3", "avatar_url": "https://avatars3.githubusercontent.com/u/12703337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaliyae", "html_url": "https://github.com/jaliyae", "followers_url": "https://api.github.com/users/jaliyae/followers", "following_url": "https://api.github.com/users/jaliyae/following{/other_user}", "gists_url": "https://api.github.com/users/jaliyae/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaliyae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaliyae/subscriptions", "organizations_url": "https://api.github.com/users/jaliyae/orgs", "repos_url": "https://api.github.com/users/jaliyae/repos", "events_url": "https://api.github.com/users/jaliyae/events{/privacy}", "received_events_url": "https://api.github.com/users/jaliyae/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/jaliyae/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": true, "url": "https://api.github.com/repos/jaliyae/pytorch", "forks_url": "https://api.github.com/repos/jaliyae/pytorch/forks", "keys_url": "https://api.github.com/repos/jaliyae/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/jaliyae/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/jaliyae/pytorch/teams", "hooks_url": "https://api.github.com/repos/jaliyae/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/jaliyae/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/jaliyae/pytorch/events", "assignees_url": "https://api.github.com/repos/jaliyae/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/jaliyae/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/jaliyae/pytorch/tags", "blobs_url": "https://api.github.com/repos/jaliyae/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/jaliyae/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/jaliyae/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/jaliyae/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/jaliyae/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/jaliyae/pytorch/languages", "stargazers_url": "https://api.github.com/repos/jaliyae/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/jaliyae/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/jaliyae/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/jaliyae/pytorch/subscription", "commits_url": "https://api.github.com/repos/jaliyae/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/jaliyae/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/jaliyae/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/jaliyae/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/jaliyae/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/jaliyae/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/jaliyae/pytorch/merges", "archive_url": "https://api.github.com/repos/jaliyae/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/jaliyae/pytorch/downloads", "issues_url": "https://api.github.com/repos/jaliyae/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/jaliyae/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/jaliyae/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/jaliyae/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/jaliyae/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/jaliyae/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/jaliyae/pytorch/deployments", "created_at": "2018-10-22T23:09:40Z", "updated_at": "2018-11-21T21:54:44Z", "pushed_at": "2018-11-21T21:55:35Z", "git_url": "git://github.com/jaliyae/pytorch.git", "ssh_url": "git@github.com:jaliyae/pytorch.git", "clone_url": "https://github.com/jaliyae/pytorch.git", "svn_url": "https://github.com/jaliyae/pytorch", "homepage": "http://pytorch.org", "size": 88307, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 2, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 0, "open_issues": 2, "watchers": 0, "default_branch": "master"}}, "base": {"label": "pytorch:master", "ref": "master", "sha": "accbcca33853c79bed8048b1ece86afd832ae763", "user": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 65600975, "node_id": "MDEwOlJlcG9zaXRvcnk2NTYwMDk3NQ==", "name": "pytorch", "full_name": "pytorch/pytorch", "private": false, "owner": {"login": "pytorch", "id": 21003710, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMDAzNzEw", "avatar_url": "https://avatars3.githubusercontent.com/u/21003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pytorch", "html_url": "https://github.com/pytorch", "followers_url": "https://api.github.com/users/pytorch/followers", "following_url": "https://api.github.com/users/pytorch/following{/other_user}", "gists_url": "https://api.github.com/users/pytorch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pytorch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pytorch/subscriptions", "organizations_url": "https://api.github.com/users/pytorch/orgs", "repos_url": "https://api.github.com/users/pytorch/repos", "events_url": "https://api.github.com/users/pytorch/events{/privacy}", "received_events_url": "https://api.github.com/users/pytorch/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/pytorch/pytorch", "description": "Tensors and Dynamic neural networks in Python  with strong GPU acceleration", "fork": false, "url": "https://api.github.com/repos/pytorch/pytorch", "forks_url": "https://api.github.com/repos/pytorch/pytorch/forks", "keys_url": "https://api.github.com/repos/pytorch/pytorch/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pytorch/pytorch/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pytorch/pytorch/teams", "hooks_url": "https://api.github.com/repos/pytorch/pytorch/hooks", "issue_events_url": "https://api.github.com/repos/pytorch/pytorch/issues/events{/number}", "events_url": "https://api.github.com/repos/pytorch/pytorch/events", "assignees_url": "https://api.github.com/repos/pytorch/pytorch/assignees{/user}", "branches_url": "https://api.github.com/repos/pytorch/pytorch/branches{/branch}", "tags_url": "https://api.github.com/repos/pytorch/pytorch/tags", "blobs_url": "https://api.github.com/repos/pytorch/pytorch/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pytorch/pytorch/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pytorch/pytorch/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pytorch/pytorch/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pytorch/pytorch/statuses/{sha}", "languages_url": "https://api.github.com/repos/pytorch/pytorch/languages", "stargazers_url": "https://api.github.com/repos/pytorch/pytorch/stargazers", "contributors_url": "https://api.github.com/repos/pytorch/pytorch/contributors", "subscribers_url": "https://api.github.com/repos/pytorch/pytorch/subscribers", "subscription_url": "https://api.github.com/repos/pytorch/pytorch/subscription", "commits_url": "https://api.github.com/repos/pytorch/pytorch/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pytorch/pytorch/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pytorch/pytorch/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pytorch/pytorch/contents/{+path}", "compare_url": "https://api.github.com/repos/pytorch/pytorch/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pytorch/pytorch/merges", "archive_url": "https://api.github.com/repos/pytorch/pytorch/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pytorch/pytorch/downloads", "issues_url": "https://api.github.com/repos/pytorch/pytorch/issues{/number}", "pulls_url": "https://api.github.com/repos/pytorch/pytorch/pulls{/number}", "milestones_url": "https://api.github.com/repos/pytorch/pytorch/milestones{/number}", "notifications_url": "https://api.github.com/repos/pytorch/pytorch/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pytorch/pytorch/labels{/name}", "releases_url": "https://api.github.com/repos/pytorch/pytorch/releases{/id}", "deployments_url": "https://api.github.com/repos/pytorch/pytorch/deployments", "created_at": "2016-08-13T05:26:41Z", "updated_at": "2018-11-24T05:35:41Z", "pushed_at": "2018-11-24T05:34:07Z", "git_url": "git://github.com/pytorch/pytorch.git", "ssh_url": "git@github.com:pytorch/pytorch.git", "clone_url": "https://github.com/pytorch/pytorch.git", "svn_url": "https://github.com/pytorch/pytorch", "homepage": "http://pytorch.org", "size": 89651, "stargazers_count": 21577, "watchers_count": 21577, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 5149, "mirror_url": null, "archived": false, "open_issues_count": 2193, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "forks": 5149, "open_issues": 2193, "watchers": 21577, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/14054"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/14054"}, "issue": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/14054"}, "comments": {"href": "https://api.github.com/repos/pytorch/pytorch/issues/14054/comments"}, "review_comments": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/14054/comments"}, "review_comment": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/14054/commits"}, "statuses": {"href": "https://api.github.com/repos/pytorch/pytorch/statuses/8764e24ae43a103f4b74dcc1ef5a5dbc5b0f8fa7"}}, "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6429851\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/goldsborough\">@goldsborough</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a><br>\nThis PR includes all the changes we need from the dataloader to support chunk loading. I incorporated most of your suggestions in our previous PRs. This still needs to be integrated with the SharedDataSet change once it is merged. In the  meantime, please have a look and let me know your comments. here is a brief description of what we plan to do with chunk loading.</p>\n<p><strong>Chunk data set</strong> - A dataset that support preloading whole chunks (not a batch) to memory. For this we don't need to know the size of the dataset like in the current data sets. It will be a stateful dataset, so we don't want it to be copied to threads in the dataloader, therefore this PR depends on the SharedDataSet PR.</p>\n<p><strong>Dataset.reset()</strong> - Similar to dataloader.reset(), this will help us start the preloading and clear Chunk data set at epoch boundaries.</p>\n<p><strong>Sampler.reset(new_size)</strong> - We need this support, because the size of the dataset or the chunks are unknown at the start, so we need to set the size of the samplers after loading data.</p>\n<p>These are the minimum changes we need and as you can see, most of the changes going to be in the chunk data set, which will be completed with all the test cases once we conclude the API changes.</p>\n<p>Please let me know your comments/suggestions.</p>\n<p>Previous PRs: <a href=\"https://github.com/pytorch/pytorch/pull/13870/files\">Sampler.rest()</a>, <a href=\"https://github.com/pytorch/pytorch/pull/13585/files\">Dataloader</a>, <a href=\"https://github.com/pytorch/pytorch/pull/13800/files\">SharedDataSet</a></p>", "body_text": "@goldsborough @apaszke\nThis PR includes all the changes we need from the dataloader to support chunk loading. I incorporated most of your suggestions in our previous PRs. This still needs to be integrated with the SharedDataSet change once it is merged. In the  meantime, please have a look and let me know your comments. here is a brief description of what we plan to do with chunk loading.\nChunk data set - A dataset that support preloading whole chunks (not a batch) to memory. For this we don't need to know the size of the dataset like in the current data sets. It will be a stateful dataset, so we don't want it to be copied to threads in the dataloader, therefore this PR depends on the SharedDataSet PR.\nDataset.reset() - Similar to dataloader.reset(), this will help us start the preloading and clear Chunk data set at epoch boundaries.\nSampler.reset(new_size) - We need this support, because the size of the dataset or the chunks are unknown at the start, so we need to set the size of the samplers after loading data.\nThese are the minimum changes we need and as you can see, most of the changes going to be in the chunk data set, which will be completed with all the test cases once we conclude the API changes.\nPlease let me know your comments/suggestions.\nPrevious PRs: Sampler.rest(), Dataloader, SharedDataSet", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 3, "review_comments": 0, "maintainer_can_modify": true, "commits": 13, "additions": 274, "deletions": 16, "changed_files": 13}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/185642465", "pull_request_review_id": 117074011, "id": 185642465, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NTY0MjQ2NQ==", "diff_hunk": "@@ -19,90 +16,199 @@\n }\n \"\"\")\n \n+CUDA_INCLUDES = \"\"\"\\\n+#undef THNN_\n+#include \"THC/THC.h\"\n+\"\"\"\n+\n COPY = CodeTemplate(\"\"\"\\\n-${THTensor}_copy${cuda}${src_scalar_name}(${state,}self_->tensor, static_cast<${src_tensor}*>(src.pImpl)->tensor);\n+${THTensor}_copy${cuda}${src_scalar_name}(\n+    ${state,}\n+    static_cast<${dst_tensor}*>(dst.pImpl)->tensor,\n+    static_cast<${src_tensor}*>(src.pImpl)->tensor);\n \"\"\")\n \n COPY_ASYNC_CPU = CodeTemplate(\"\"\"\\\n if (non_blocking) {\n-    ${THTensor}_copyAsyncCPU(${state,}self_->tensor, static_cast<${src_tensor}*>(src.pImpl)->tensor);\n+    ${THTensor}_copyAsyncCPU(\n+        ${state,}\n+        static_cast<${dst_tensor}*>(dst.pImpl)->tensor,", "path": "aten/src/ATen/copy_wrapper.py", "position": null, "original_position": 34, "commit_id": "578200ff1084fad5c708597b2f95b29001a3c88c", "original_commit_id": "1bbe606bf1a96be2923385743e5bc7b45397a1b3", "user": {"login": "gchanan", "id": 3768583, "node_id": "MDQ6VXNlcjM3Njg1ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3768583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gchanan", "html_url": "https://github.com/gchanan", "followers_url": "https://api.github.com/users/gchanan/followers", "following_url": "https://api.github.com/users/gchanan/following{/other_user}", "gists_url": "https://api.github.com/users/gchanan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gchanan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gchanan/subscriptions", "organizations_url": "https://api.github.com/users/gchanan/orgs", "repos_url": "https://api.github.com/users/gchanan/repos", "events_url": "https://api.github.com/users/gchanan/events{/privacy}", "received_events_url": "https://api.github.com/users/gchanan/received_events", "type": "User", "site_admin": false}, "body": "I haven't looked through the rest of the code yet, so maybe I'm missing something, but did you just add the static_cast to the destinations for consistency with sources?  It so, this seems _slightly_ worse to me because if you forget to do the checked cast crazy things will happen, but in the old code it won't compile.", "created_at": "2018-05-02T21:20:58Z", "updated_at": "2018-11-23T15:43:33Z", "html_url": "https://github.com/pytorch/pytorch/pull/7197#discussion_r185642465", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/7197", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/185642465"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/7197#discussion_r185642465"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/7197"}}, "body_html": "<p>I haven't looked through the rest of the code yet, so maybe I'm missing something, but did you just add the static_cast to the destinations for consistency with sources?  It so, this seems <em>slightly</em> worse to me because if you forget to do the checked cast crazy things will happen, but in the old code it won't compile.</p>", "body_text": "I haven't looked through the rest of the code yet, so maybe I'm missing something, but did you just add the static_cast to the destinations for consistency with sources?  It so, this seems slightly worse to me because if you forget to do the checked cast crazy things will happen, but in the old code it won't compile."}
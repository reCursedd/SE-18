{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7074", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7074/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7074/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7074/events", "html_url": "https://github.com/pytorch/pytorch/pull/7074", "id": 318672928, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg0ODA4MDky", "number": 7074, "title": "Merge autogradpp into PyTorch", "user": {"login": "goldsborough", "id": 6429851, "node_id": "MDQ6VXNlcjY0Mjk4NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6429851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldsborough", "html_url": "https://github.com/goldsborough", "followers_url": "https://api.github.com/users/goldsborough/followers", "following_url": "https://api.github.com/users/goldsborough/following{/other_user}", "gists_url": "https://api.github.com/users/goldsborough/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldsborough/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldsborough/subscriptions", "organizations_url": "https://api.github.com/users/goldsborough/orgs", "repos_url": "https://api.github.com/users/goldsborough/repos", "events_url": "https://api.github.com/users/goldsborough/events{/privacy}", "received_events_url": "https://api.github.com/users/goldsborough/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-04-28T22:22:14Z", "updated_at": "2018-11-23T15:43:27Z", "closed_at": "2018-04-30T19:53:47Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/7074", "html_url": "https://github.com/pytorch/pytorch/pull/7074", "diff_url": "https://github.com/pytorch/pytorch/pull/7074.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/7074.patch"}, "body_html": "<p>This PR moves autogradpp into PyTorch, as the basis for the C++ API. I will rebase my C++ API concepts from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"311886101\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/6345\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/6345/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/6345\">#6345</a> onto this afterwards.</p>\n<p>Notes (especially relevant for current users of autogradpp):</p>\n<ol>\n<li>New home of autogradpp is <code>torch/csrc/api</code> (as in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"311886101\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/6345\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/6345/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/6345\">#6345</a>)</li>\n<li>File structure has been renamed to <code>torch</code> instead of <code>autogradpp</code>, i.e. <code>torch/csrc/api/include/autogradpp</code> -&gt; <code>torch/csrc/api/include/torch</code> and includes updated accordingly</li>\n<li>autogradpp CMake is merged into <code>pytorch/tools/cpp_build/libtorch/CMakeLists.txt</code></li>\n<li>Tests are moved into <code>pytorch/test/cpp/api</code> (as <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a> requested in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"311886101\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/6345\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/6345/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/6345\">#6345</a>)</li>\n<li>Cereal moved into <code>pytorch/third_party</code> as a submodule. This is temporary until we figure out our own dependency-less weight serialization format, after which this dependency will be removed.</li>\n<li>The <code>pytorch</code> submodule of autogradpp is of course removed, since pytorch is now supermodule :)</li>\n<li>I hade to fix a few lines in <code>optimizers.cpp</code> because <code>Variable::grad</code> returns an <code>at::Tensor</code> (which is actually a <code>Variable</code>) after <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"313999853\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/6582\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/6582/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/6582\">#6582</a></li>\n</ol>\n<p>I also created <code>tools/download_mnist.py</code> to download MNIST instead of storing it in the repo</p>\n<p>TODO:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Download <code>mnist</code> from the internet instead of storing it in the repo</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Fix warnings in autogradpp (we have more warnings enabled than autogradpp) and enable <code>-Werror</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add autogradpp's tests to our CI</li>\n</ul>\n<p>Immediate action items after this PR:</p>\n<ol>\n<li>Have autogradpp tests use Catch instead of the current Lest library (which is a single header)</li>\n</ol>\n<p>Towards <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"318669404\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/7073\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/7073/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/7073\">#7073</a></p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3605224\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ebetica\">@ebetica</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=88510\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jgehring\">@jgehring</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=57564\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/syhw\">@syhw</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13564\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ezyang\">@ezyang</a></p>", "body_text": "This PR moves autogradpp into PyTorch, as the basis for the C++ API. I will rebase my C++ API concepts from #6345 onto this afterwards.\nNotes (especially relevant for current users of autogradpp):\n\nNew home of autogradpp is torch/csrc/api (as in #6345)\nFile structure has been renamed to torch instead of autogradpp, i.e. torch/csrc/api/include/autogradpp -> torch/csrc/api/include/torch and includes updated accordingly\nautogradpp CMake is merged into pytorch/tools/cpp_build/libtorch/CMakeLists.txt\nTests are moved into pytorch/test/cpp/api (as @apaszke requested in #6345)\nCereal moved into pytorch/third_party as a submodule. This is temporary until we figure out our own dependency-less weight serialization format, after which this dependency will be removed.\nThe pytorch submodule of autogradpp is of course removed, since pytorch is now supermodule :)\nI hade to fix a few lines in optimizers.cpp because Variable::grad returns an at::Tensor (which is actually a Variable) after #6582\n\nI also created tools/download_mnist.py to download MNIST instead of storing it in the repo\nTODO:\n\n Download mnist from the internet instead of storing it in the repo\n Fix warnings in autogradpp (we have more warnings enabled than autogradpp) and enable -Werror\n Add autogradpp's tests to our CI\n\nImmediate action items after this PR:\n\nHave autogradpp tests use Catch instead of the current Lest library (which is a single header)\n\nTowards #7073\n@ebetica @apaszke @jgehring @syhw @ezyang", "body": "This PR moves autogradpp into PyTorch, as the basis for the C++ API. I will rebase my C++ API concepts from https://github.com/pytorch/pytorch/pull/6345 onto this afterwards.\r\n\r\nNotes (especially relevant for current users of autogradpp):\r\n\r\n1. New home of autogradpp is `torch/csrc/api` (as in https://github.com/pytorch/pytorch/pull/6345)\r\n2. File structure has been renamed to `torch` instead of `autogradpp`, i.e. `torch/csrc/api/include/autogradpp` -> `torch/csrc/api/include/torch` and includes updated accordingly\r\n3. autogradpp CMake is merged into `pytorch/tools/cpp_build/libtorch/CMakeLists.txt`\r\n4. Tests are moved into `pytorch/test/cpp/api` (as @apaszke requested in #6345)\r\n5. Cereal moved into `pytorch/third_party` as a submodule. This is temporary until we figure out our own dependency-less weight serialization format, after which this dependency will be removed.\r\n6. The `pytorch` submodule of autogradpp is of course removed, since pytorch is now supermodule :)\r\n7. I hade to fix a few lines in `optimizers.cpp` because `Variable::grad` returns an `at::Tensor` (which is actually a `Variable`) after https://github.com/pytorch/pytorch/pull/6582\r\n\r\nI also created `tools/download_mnist.py` to download MNIST instead of storing it in the repo\r\n\r\nTODO:\r\n- [x] Download `mnist` from the internet instead of storing it in the repo\r\n- [x] Fix warnings in autogradpp (we have more warnings enabled than autogradpp) and enable `-Werror`\r\n- [x] Add autogradpp's tests to our CI\r\n\r\nImmediate action items after this PR:\r\n1. Have autogradpp tests use Catch instead of the current Lest library (which is a single header)\r\n\r\nTowards #7073 \r\n\r\n@ebetica @apaszke @jgehring @syhw @ezyang "}
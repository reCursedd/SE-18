{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/205294167", "pull_request_review_id": 140537525, "id": 205294167, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNTI5NDE2Nw==", "diff_hunk": "@@ -161,31 +161,31 @@ endif(MKLDNN_FOUND)\n \n list(APPEND ATen_CPU_DEPENDENCY_LIBS cpuinfo)\n \n-if(NOT MSVC)\n-  # Preserve values for the main build\n-  set(__aten_sleef_build_shared_libs ${BUILD_SHARED_LIBS})\n-  set(__aten_sleef_build_tests ${BUILD_TESTS})\n-\n-  # Unset our restrictive C++ flags here and reset them later.\n-  # Remove this once we use proper target_compile_options.\n-  set(OLD_CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS})\n-  set(CMAKE_CXX_FLAGS)\n-\n-  set(BUILD_SHARED_LIBS OFF CACHE BOOL \"Build sleef static\" FORCE)\n-  set(BUILD_DFT OFF CACHE BOOL \"Don't build sleef DFT lib\" FORCE)\n-  set(BUILD_GNUABI_LIBS OFF CACHE BOOL \"Don't build sleef gnuabi libs\" FORCE)\n-  set(BUILD_TESTS OFF CACHE BOOL \"Don't build sleef tests\" FORCE)\n-  add_subdirectory(\"${CMAKE_CURRENT_SOURCE_DIR}/../../../third_party/sleef\" ${CMAKE_BINARY_DIR}/sleef)\n-  set_property(TARGET sleef PROPERTY FOLDER \"dependencies\")\n-  list(APPEND ATen_THIRD_PARTY_INCLUDE ${CMAKE_BINARY_DIR}/include)\n-  link_directories(${CMAKE_BINARY_DIR}/sleef/lib)\n-  list(APPEND ATen_CPU_DEPENDENCY_LIBS sleef)\n-\n-  set(CMAKE_CXX_FLAGS ${OLD_CMAKE_CXX_FLAGS})\n-\n-  # Set these back. TODO: Use SLEEF_ to pass these instead\n-  set(BUILD_SHARED_LIBS ${__aten_sleef_build_shared_libs} CACHE BOOL \"Build shared libs\" FORCE)\n-  set(BUILD_TESTS ${__aten_sleef_build_tests} CACHE BOOL \"Build tests\" FORCE)\n+if(NOT MSVC AND NOT EMSCRIPTEN)\n+ # Preserve values for the main build\n+ set(__aten_sleef_build_shared_libs ${BUILD_SHARED_LIBS})\n+ set(__aten_sleef_build_tests ${BUILD_TESTS})\n+\n+ # Unset our restrictive C++ flags here and reset them later.\n+ # Remove this once we use proper target_compile_options.\n+ set(OLD_CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS})\n+ set(CMAKE_CXX_FLAGS)\n+\n+ set(BUILD_SHARED_LIBS OFF CACHE BOOL \"Build sleef static\" FORCE)\n+ set(BUILD_DFT OFF CACHE BOOL \"Don't build sleef DFT lib\" FORCE)\n+ set(BUILD_GNUABI_LIBS OFF CACHE BOOL \"Don't build sleef gnuabi libs\" FORCE)\n+ set(BUILD_TESTS OFF CACHE BOOL \"Don't build sleef tests\" FORCE)\n+ add_subdirectory(\"${CMAKE_CURRENT_SOURCE_DIR}/../../../third_party/sleef\" ${CMAKE_BINARY_DIR}/sleef)\n+ set_property(TARGET sleef PROPERTY FOLDER \"dependencies\")\n+ list(APPEND ATen_THIRD_PARTY_INCLUDE ${CMAKE_BINARY_DIR}/include)\n+ link_directories(${CMAKE_BINARY_DIR}/sleef/lib)\n+ list(APPEND ATen_CPU_DEPENDENCY_LIBS sleef)\n+\n+ set(CMAKE_CXX_FLAGS ${OLD_CMAKE_CXX_FLAGS})\n+\n+ # Set these back. TODO: Use SLEEF_ to pass these instead\n+ set(BUILD_SHARED_LIBS ${__aten_sleef_build_shared_libs} CACHE BOOL \"Build shared libs\" FORCE)\n+ set(BUILD_TESTS ${__aten_sleef_build_tests} CACHE BOOL \"Build tests\" FORCE)", "path": "aten/src/ATen/CMakeLists.txt", "position": null, "original_position": 53, "commit_id": "bcef2a26aa8c037109026c4fb5df18a2210f0af1", "original_commit_id": "5d9560d704b34ce375d0b48fb10c025659de4cce", "user": {"login": "sinkingsugar", "id": 7008900, "node_id": "MDQ6VXNlcjcwMDg5MDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/7008900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkingsugar", "html_url": "https://github.com/sinkingsugar", "followers_url": "https://api.github.com/users/sinkingsugar/followers", "following_url": "https://api.github.com/users/sinkingsugar/following{/other_user}", "gists_url": "https://api.github.com/users/sinkingsugar/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkingsugar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkingsugar/subscriptions", "organizations_url": "https://api.github.com/users/sinkingsugar/orgs", "repos_url": "https://api.github.com/users/sinkingsugar/repos", "events_url": "https://api.github.com/users/sinkingsugar/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkingsugar/received_events", "type": "User", "site_admin": false}, "body": "No idea why that happened actually, I must have had it commented out at some point!", "created_at": "2018-07-25T23:43:03Z", "updated_at": "2018-11-23T15:48:09Z", "html_url": "https://github.com/pytorch/pytorch/pull/9803#discussion_r205294167", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/9803", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/205294167"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/9803#discussion_r205294167"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/9803"}}, "body_html": "<p>No idea why that happened actually, I must have had it commented out at some point!</p>", "body_text": "No idea why that happened actually, I must have had it commented out at some point!", "in_reply_to_id": 205275082}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/398523513", "html_url": "https://github.com/pytorch/pytorch/pull/8272#issuecomment-398523513", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8272", "id": 398523513, "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODUyMzUxMw==", "user": {"login": "cpuhrsch", "id": 1716488, "node_id": "MDQ6VXNlcjE3MTY0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1716488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpuhrsch", "html_url": "https://github.com/cpuhrsch", "followers_url": "https://api.github.com/users/cpuhrsch/followers", "following_url": "https://api.github.com/users/cpuhrsch/following{/other_user}", "gists_url": "https://api.github.com/users/cpuhrsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpuhrsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpuhrsch/subscriptions", "organizations_url": "https://api.github.com/users/cpuhrsch/orgs", "repos_url": "https://api.github.com/users/cpuhrsch/repos", "events_url": "https://api.github.com/users/cpuhrsch/events{/privacy}", "received_events_url": "https://api.github.com/users/cpuhrsch/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-19T19:51:12Z", "updated_at": "2018-06-19T19:51:12Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9998726\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/peterjc123\">@peterjc123</a> - We removed TBB for now. There have been too many issues in it clashing with OpenMP (think MKL and MKLDNN) causing performance regressions.</p>\n<p>Ideally I'd like to see tbb as a part of conda similar to mkl and mkl-dnn for development. However, for binary deployment this is complicated by the fact that tbb philosophically <a href=\"https://www.threadingbuildingblocks.org/faq/11#sthash.t3BrizFQ.dpuf\" rel=\"nofollow\">does not like static libraries</a>. Further, we decided to not ship shared libraries with PyTorch anymore if it can be avoided. And on top of that, PyTorch also needs to be available via pypi. So, ideally we can get TBB to be available on conda (not conda-forge) and pypi.</p>\n<p>We'll need to consider TBB, OpenMP and even other threadpools at a higher level as well moving forward. At least until further notice, TBB has, sadly, been dropped and we're stuck with OpenMP.</p>", "body_text": "@peterjc123 - We removed TBB for now. There have been too many issues in it clashing with OpenMP (think MKL and MKLDNN) causing performance regressions.\nIdeally I'd like to see tbb as a part of conda similar to mkl and mkl-dnn for development. However, for binary deployment this is complicated by the fact that tbb philosophically does not like static libraries. Further, we decided to not ship shared libraries with PyTorch anymore if it can be avoided. And on top of that, PyTorch also needs to be available via pypi. So, ideally we can get TBB to be available on conda (not conda-forge) and pypi.\nWe'll need to consider TBB, OpenMP and even other threadpools at a higher level as well moving forward. At least until further notice, TBB has, sadly, been dropped and we're stuck with OpenMP.", "body": "@peterjc123 - We removed TBB for now. There have been too many issues in it clashing with OpenMP (think MKL and MKLDNN) causing performance regressions. \r\n\r\nIdeally I'd like to see tbb as a part of conda similar to mkl and mkl-dnn for development. However, for binary deployment this is complicated by the fact that tbb philosophically [does not like static libraries](https://www.threadingbuildingblocks.org/faq/11#sthash.t3BrizFQ.dpuf). Further, we decided to not ship shared libraries with PyTorch anymore if it can be avoided. And on top of that, PyTorch also needs to be available via pypi. So, ideally we can get TBB to be available on conda (not conda-forge) and pypi. \r\n\r\nWe'll need to consider TBB, OpenMP and even other threadpools at a higher level as well moving forward. At least until further notice, TBB has, sadly, been dropped and we're stuck with OpenMP."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8295", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8295/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8295/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8295/events", "html_url": "https://github.com/pytorch/pytorch/issues/8295", "id": 330836230, "node_id": "MDU6SXNzdWUzMzA4MzYyMzA=", "number": 8295, "title": "Build broken with NO_CUDNN = 1 flag", "user": {"login": "chintak", "id": 3398558, "node_id": "MDQ6VXNlcjMzOTg1NTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/3398558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chintak", "html_url": "https://github.com/chintak", "followers_url": "https://api.github.com/users/chintak/followers", "following_url": "https://api.github.com/users/chintak/following{/other_user}", "gists_url": "https://api.github.com/users/chintak/gists{/gist_id}", "starred_url": "https://api.github.com/users/chintak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chintak/subscriptions", "organizations_url": "https://api.github.com/users/chintak/orgs", "repos_url": "https://api.github.com/users/chintak/repos", "events_url": "https://api.github.com/users/chintak/events{/privacy}", "received_events_url": "https://api.github.com/users/chintak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 778855555, "node_id": "MDU6TGFiZWw3Nzg4NTU1NTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/build", "name": "build", "color": "bfdadc", "default": false}, {"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-06-09T00:23:05Z", "updated_at": "2018-06-11T19:43:47Z", "closed_at": "2018-06-11T19:43:47Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Command:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ NO_CUDNN=1 NO_MKLDNN=1 python setup.py build develop</pre></div>\n<p>Quoting from the log file:</p>\n<div class=\"highlight highlight-source-shell\"><pre>--   BUILD_CAFFE2          <span class=\"pl-c1\">:</span> 0\n--   BUILD_ATEN            <span class=\"pl-c1\">:</span> ON\n--   BUILD_BINARY          <span class=\"pl-c1\">:</span> OFF\n--   BUILD_PYTHON          <span class=\"pl-c1\">:</span> 0\n--   BUILD_SHARED_LIBS     <span class=\"pl-c1\">:</span> ON\n--   BUILD_TEST            <span class=\"pl-c1\">:</span> OFF\n--   USE_ASAN              <span class=\"pl-c1\">:</span> OFF\n--   USE_ATEN              <span class=\"pl-c1\">:</span> OFF\n--   USE_CUDA              <span class=\"pl-c1\">:</span> 1\n--     CUDA static link    <span class=\"pl-c1\">:</span> OFF\n--     USE_CUDNN           <span class=\"pl-c1\">:</span> ON       <span class=\"pl-c\"><span class=\"pl-c\">#</span> this line</span>\n--     CUDA version        <span class=\"pl-c1\">:</span> 9.1\n--     cuDNN version       <span class=\"pl-c1\">:</span>\n--     CUDA root directory <span class=\"pl-c1\">:</span> /usr/local/cuda\n--     CUDA library        <span class=\"pl-c1\">:</span> /usr/lib64/libcuda.so\n--     cudart library      <span class=\"pl-c1\">:</span> /usr/local/cuda/lib64/libcudart_static.a<span class=\"pl-k\">;</span>-pthread<span class=\"pl-k\">;</span>dl<span class=\"pl-k\">;</span>/usr/lib64/librt.so\n--     cublas library      <span class=\"pl-c1\">:</span> /usr/local/cuda/lib64/libcublas.so<span class=\"pl-k\">;</span>/usr/local/cuda/lib64/libcublas_device.a\n--     cufft library       <span class=\"pl-c1\">:</span> /usr/local/cuda/lib64/libcufft.so\n--     curand library      <span class=\"pl-c1\">:</span> /usr/local/cuda/lib64/libcurand.so\nCMake Error at cmake/Summary.cmake:63 (get_target_property):\n  <span class=\"pl-en\">get_target_property</span>() called with non-existent target <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>caffe2::cudnn<span class=\"pl-pds\">\"</span></span>.</pre></div>\n<p>Even though I'm trying to build without CUDNN support, it still seems to build with it's support. After installing cuDNN, I'm able to compile properly. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5674597\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/SsnL\">@SsnL</a> mentioned a recent CMake refactor which might be causing this issue.</p>\n<p><a href=\"https://pastebin.com/DYe4cdxf\" rel=\"nofollow\">Full log file</a></p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=79994\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/orionr\">@orionr</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5674597\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/SsnL\">@SsnL</a></p>", "body_text": "Command:\n$ NO_CUDNN=1 NO_MKLDNN=1 python setup.py build develop\nQuoting from the log file:\n--   BUILD_CAFFE2          : 0\n--   BUILD_ATEN            : ON\n--   BUILD_BINARY          : OFF\n--   BUILD_PYTHON          : 0\n--   BUILD_SHARED_LIBS     : ON\n--   BUILD_TEST            : OFF\n--   USE_ASAN              : OFF\n--   USE_ATEN              : OFF\n--   USE_CUDA              : 1\n--     CUDA static link    : OFF\n--     USE_CUDNN           : ON       # this line\n--     CUDA version        : 9.1\n--     cuDNN version       :\n--     CUDA root directory : /usr/local/cuda\n--     CUDA library        : /usr/lib64/libcuda.so\n--     cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib64/librt.so\n--     cublas library      : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\n--     cufft library       : /usr/local/cuda/lib64/libcufft.so\n--     curand library      : /usr/local/cuda/lib64/libcurand.so\nCMake Error at cmake/Summary.cmake:63 (get_target_property):\n  get_target_property() called with non-existent target \"caffe2::cudnn\".\nEven though I'm trying to build without CUDNN support, it still seems to build with it's support. After installing cuDNN, I'm able to compile properly. @SsnL mentioned a recent CMake refactor which might be causing this issue.\nFull log file\ncc @orionr, @SsnL", "body": "Command: \r\n```bash\r\n$ NO_CUDNN=1 NO_MKLDNN=1 python setup.py build develop\r\n```\r\n\r\nQuoting from the log file:\r\n\r\n```bash\r\n--   BUILD_CAFFE2          : 0\r\n--   BUILD_ATEN            : ON\r\n--   BUILD_BINARY          : OFF\r\n--   BUILD_PYTHON          : 0\r\n--   BUILD_SHARED_LIBS     : ON\r\n--   BUILD_TEST            : OFF\r\n--   USE_ASAN              : OFF\r\n--   USE_ATEN              : OFF\r\n--   USE_CUDA              : 1\r\n--     CUDA static link    : OFF\r\n--     USE_CUDNN           : ON       # this line\r\n--     CUDA version        : 9.1\r\n--     cuDNN version       :\r\n--     CUDA root directory : /usr/local/cuda\r\n--     CUDA library        : /usr/lib64/libcuda.so\r\n--     cudart library      : /usr/local/cuda/lib64/libcudart_static.a;-pthread;dl;/usr/lib64/librt.so\r\n--     cublas library      : /usr/local/cuda/lib64/libcublas.so;/usr/local/cuda/lib64/libcublas_device.a\r\n--     cufft library       : /usr/local/cuda/lib64/libcufft.so\r\n--     curand library      : /usr/local/cuda/lib64/libcurand.so\r\nCMake Error at cmake/Summary.cmake:63 (get_target_property):\r\n  get_target_property() called with non-existent target \"caffe2::cudnn\".\r\n```\r\n\r\nEven though I'm trying to build without CUDNN support, it still seems to build with it's support. After installing cuDNN, I'm able to compile properly. @SsnL mentioned a recent CMake refactor which might be causing this issue.\r\n\r\n[Full log file](https://pastebin.com/DYe4cdxf)\r\n\r\ncc @orionr, @SsnL"}
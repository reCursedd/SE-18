{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5408", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5408/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5408/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5408/events", "html_url": "https://github.com/pytorch/pytorch/pull/5408", "id": 300182486, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcxMzMzODg4", "number": 5408, "title": "Expose gradients w.r.t. input & weight for conv1d, conv2d, conv3d in Python", "user": {"login": "vedanuj", "id": 13946458, "node_id": "MDQ6VXNlcjEzOTQ2NDU4", "avatar_url": "https://avatars2.githubusercontent.com/u/13946458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vedanuj", "html_url": "https://github.com/vedanuj", "followers_url": "https://api.github.com/users/vedanuj/followers", "following_url": "https://api.github.com/users/vedanuj/following{/other_user}", "gists_url": "https://api.github.com/users/vedanuj/gists{/gist_id}", "starred_url": "https://api.github.com/users/vedanuj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vedanuj/subscriptions", "organizations_url": "https://api.github.com/users/vedanuj/orgs", "repos_url": "https://api.github.com/users/vedanuj/repos", "events_url": "https://api.github.com/users/vedanuj/events{/privacy}", "received_events_url": "https://api.github.com/users/vedanuj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 545367190, "node_id": "MDU6TGFiZWw1NDUzNjcxOTA=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/awaiting%20response", "name": "awaiting response", "color": "5319e7", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-02-26T10:24:15Z", "updated_at": "2018-11-23T15:41:02Z", "closed_at": "2018-03-23T21:49:32Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/5408", "html_url": "https://github.com/pytorch/pytorch/pull/5408", "diff_url": "https://github.com/pytorch/pytorch/pull/5408.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/5408.patch"}, "body_html": "<p>This PR addresses issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"294056804\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/5024\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/5024/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/5024\">#5024</a> and exposes in python gradients with respect to input and weight for <code>conv2d</code> and <code>conv3d</code>.</p>\n<h3>Gradients with respect to input of convolution (<code>F.grad.conv2d_input</code> , <code>F.grad.conv3d_input</code>) :</h3>\n<p>For this <code>conv_transpose2d</code>/<code>conv_transpose3d</code> are used which are essentially the gradients of <code>conv2d</code>/<code>conv3d</code> w.r.t. input. The output_padding required for <code>conv_transpose2d</code>/<code>conv_transpose3d</code> are implicitly calculated from shape of input gradient, shape of output gradient, kernel size, stride and padding.</p>\n<h3>Gradients with respect to weights (<code>F.grad.conv2d_weight</code> , <code>F.grad.conv3d_weight</code>):</h3>\n<p>For gradients with respect to the weight we use the  <code>conv2d</code>/<code>conv3d</code> but with strides and dilations swapped. We reshape the output gradient and input in such a way that the output gradient can be treated as the weight of the forward convolution.</p>\n<p>Please review <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13564\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ezyang\">@ezyang</a></p>", "body_text": "This PR addresses issue #5024 and exposes in python gradients with respect to input and weight for conv2d and conv3d.\nGradients with respect to input of convolution (F.grad.conv2d_input , F.grad.conv3d_input) :\nFor this conv_transpose2d/conv_transpose3d are used which are essentially the gradients of conv2d/conv3d w.r.t. input. The output_padding required for conv_transpose2d/conv_transpose3d are implicitly calculated from shape of input gradient, shape of output gradient, kernel size, stride and padding.\nGradients with respect to weights (F.grad.conv2d_weight , F.grad.conv3d_weight):\nFor gradients with respect to the weight we use the  conv2d/conv3d but with strides and dilations swapped. We reshape the output gradient and input in such a way that the output gradient can be treated as the weight of the forward convolution.\nPlease review @ezyang", "body": "This PR addresses issue #5024 and exposes in python gradients with respect to input and weight for `conv2d` and `conv3d`. \r\n\r\n### Gradients with respect to input of convolution (`F.grad.conv2d_input` , `F.grad.conv3d_input`) : \r\n\r\nFor this `conv_transpose2d`/`conv_transpose3d` are used which are essentially the gradients of `conv2d`/`conv3d` w.r.t. input. The output_padding required for `conv_transpose2d`/`conv_transpose3d` are implicitly calculated from shape of input gradient, shape of output gradient, kernel size, stride and padding.\r\n\r\n### Gradients with respect to weights (`F.grad.conv2d_weight` , `F.grad.conv3d_weight`): \r\n\r\nFor gradients with respect to the weight we use the  `conv2d`/`conv3d` but with strides and dilations swapped. We reshape the output gradient and input in such a way that the output gradient can be treated as the weight of the forward convolution.\r\n\r\nPlease review @ezyang "}
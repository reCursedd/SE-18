{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/370240124", "html_url": "https://github.com/pytorch/pytorch/issues/5553#issuecomment-370240124", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5553", "id": 370240124, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDI0MDEyNA==", "user": {"login": "VladislavZavadskyy", "id": 16824835, "node_id": "MDQ6VXNlcjE2ODI0ODM1", "avatar_url": "https://avatars1.githubusercontent.com/u/16824835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VladislavZavadskyy", "html_url": "https://github.com/VladislavZavadskyy", "followers_url": "https://api.github.com/users/VladislavZavadskyy/followers", "following_url": "https://api.github.com/users/VladislavZavadskyy/following{/other_user}", "gists_url": "https://api.github.com/users/VladislavZavadskyy/gists{/gist_id}", "starred_url": "https://api.github.com/users/VladislavZavadskyy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VladislavZavadskyy/subscriptions", "organizations_url": "https://api.github.com/users/VladislavZavadskyy/orgs", "repos_url": "https://api.github.com/users/VladislavZavadskyy/repos", "events_url": "https://api.github.com/users/VladislavZavadskyy/events{/privacy}", "received_events_url": "https://api.github.com/users/VladislavZavadskyy/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-04T15:59:28Z", "updated_at": "2018-03-04T16:03:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Steps I took to fix this issue:</p>\n<ol start=\"0\">\n<li>Determine if CUDA version you've installed is compatible with your GPU compute capability (<a href=\"https://stackoverflow.com/questions/28932864/cuda-compute-capability-requirements\" rel=\"nofollow\">e.g. here</a>)</li>\n<li>Build NCCL from <a href=\"https://github.com/NVIDIA/nccl\">source</a> by running <code>NVCC_GENCODE=\"-gencode=arch=compute_&lt;compute_v&gt;,code=sm_&lt;compute_v&gt; make CUDA_HOME=&lt;cuda_path&gt; test\"</code> from source directory, where <code>&lt;compute_v&gt;</code> is compute capability version of your GPUs without dot (e.g. 3.0 would be 30). If you have GPUs with different compute capabilities duplicate the <code>-gencode=arch=compute_&lt;compute_v&gt;,code=sm_&lt;compute_v&gt; </code> part as many times you as you need.</li>\n<li>Copy the contents of build folder into some permanent place (e.g. <code>/usr/local/nccl</code>).</li>\n<li>Run export <code>LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/nccl/lib</code>.</li>\n<li>Run tests from <code>test</code> folder to see if everything is fine (e.g. <code>./usr/local/nccl/test/single/all_reduce_test 10000</code>).<br>\n4.5 If something is wrong in any of those tests, running the test with prefix <code>NCCL_DEBUG=WARN</code> or even <code>NCCL_DEBUG=INFO</code> will provide you information for further debugging, else proceed to the step 5.</li>\n<li>Set environmental variables <code>NCCL_ROOT_DIR</code>, <code>NCCL_LIB_DIR</code> and <code>NCCL_INCLUDE_DIR</code> to corresponding paths (e.g. <code>export NCCL_LIB_DIR=/usr/local/nccl/lib/</code>).</li>\n<li>Build pytorch from source.</li>\n</ol>", "body_text": "Steps I took to fix this issue:\n\nDetermine if CUDA version you've installed is compatible with your GPU compute capability (e.g. here)\nBuild NCCL from source by running NVCC_GENCODE=\"-gencode=arch=compute_<compute_v>,code=sm_<compute_v> make CUDA_HOME=<cuda_path> test\" from source directory, where <compute_v> is compute capability version of your GPUs without dot (e.g. 3.0 would be 30). If you have GPUs with different compute capabilities duplicate the -gencode=arch=compute_<compute_v>,code=sm_<compute_v>  part as many times you as you need.\nCopy the contents of build folder into some permanent place (e.g. /usr/local/nccl).\nRun export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/nccl/lib.\nRun tests from test folder to see if everything is fine (e.g. ./usr/local/nccl/test/single/all_reduce_test 10000).\n4.5 If something is wrong in any of those tests, running the test with prefix NCCL_DEBUG=WARN or even NCCL_DEBUG=INFO will provide you information for further debugging, else proceed to the step 5.\nSet environmental variables NCCL_ROOT_DIR, NCCL_LIB_DIR and NCCL_INCLUDE_DIR to corresponding paths (e.g. export NCCL_LIB_DIR=/usr/local/nccl/lib/).\nBuild pytorch from source.", "body": "Steps I took to fix this issue:\r\n\r\n0.  Determine if CUDA version you've installed is compatible with your GPU compute capability ([e.g. here](https://stackoverflow.com/questions/28932864/cuda-compute-capability-requirements))\r\n1.  Build NCCL from [source](https://github.com/NVIDIA/nccl) by running `NVCC_GENCODE=\"-gencode=arch=compute_<compute_v>,code=sm_<compute_v> make CUDA_HOME=<cuda_path> test\"` from source directory, where `<compute_v>` is compute capability version of your GPUs without dot (e.g. 3.0 would be 30). If you have GPUs with different compute capabilities duplicate the `-gencode=arch=compute_<compute_v>,code=sm_<compute_v> ` part as many times you as you need.\r\n2. Copy the contents of build folder into some permanent place (e.g. `/usr/local/nccl`).\r\n3. Run export `LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/nccl/lib`.\r\n4. Run tests from `test` folder to see if everything is fine (e.g. `./usr/local/nccl/test/single/all_reduce_test 10000`).\r\n4.5 If something is wrong in any of those tests, running the test with prefix `NCCL_DEBUG=WARN` or even `NCCL_DEBUG=INFO` will provide you information for further debugging, else proceed to the step 5.\r\n5. Set environmental variables `NCCL_ROOT_DIR`, `NCCL_LIB_DIR` and `NCCL_INCLUDE_DIR` to corresponding paths (e.g. `export NCCL_LIB_DIR=/usr/local/nccl/lib/`).\r\n6. Build pytorch from source."}
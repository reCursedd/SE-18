{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12626", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12626/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12626/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12626/events", "html_url": "https://github.com/pytorch/pytorch/issues/12626", "id": 369770802, "node_id": "MDU6SXNzdWUzNjk3NzA4MDI=", "number": 12626, "title": "Pytorch 1.0 installation in WIndows fails with error", "user": {"login": "sheikmohdimran", "id": 26189183, "node_id": "MDQ6VXNlcjI2MTg5MTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/26189183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sheikmohdimran", "html_url": "https://github.com/sheikmohdimran", "followers_url": "https://api.github.com/users/sheikmohdimran/followers", "following_url": "https://api.github.com/users/sheikmohdimran/following{/other_user}", "gists_url": "https://api.github.com/users/sheikmohdimran/gists{/gist_id}", "starred_url": "https://api.github.com/users/sheikmohdimran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sheikmohdimran/subscriptions", "organizations_url": "https://api.github.com/users/sheikmohdimran/orgs", "repos_url": "https://api.github.com/users/sheikmohdimran/repos", "events_url": "https://api.github.com/users/sheikmohdimran/events{/privacy}", "received_events_url": "https://api.github.com/users/sheikmohdimran/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-13T05:55:37Z", "updated_at": "2018-10-29T09:40:26Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>While installing from source on windows, build fails with the error</p>\n<h2>To Reproduce</h2>\n<p>Steps to reproduce the behavior:<br>\nInstall pytorch from source as per below steps.</p>\n<p>cd  ~\\Desktop<br>\ngit clone --recursive <a href=\"https://github.com/pytorch/pytorch\">https://github.com/pytorch/pytorch</a><br>\ncd  ~\\Desktop\\pytorch<br>\nset \"VS150COMNTOOLS=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Auxiliary\\Build\"<br>\nset CMAKE_GENERATOR=Visual Studio 15 2017 Win64<br>\nset DISTUTILS_USE_SDK=1<br>\nset \"PREBUILD_COMMAND=%VS140COMNTOOLS%....\\VC\\vcvarsall.bat\"<br>\nset PREBUILD_COMMAND_ARGS=x64</p>\n<p>call \"%VS150COMNTOOLS%\\vcvarsall.bat\" x64 -vcvars_ver=14.11<br>\npython setup.py install</p>\n<p>Error message as below.<br>\n\"C:\\Users&lt;username&gt;\\Desktop\\pytorch\\build\\INSTALL.vcxproj\" (default target) (1) -&gt;<br>\n\"C:\\Users&lt;username&gt;\\Desktop\\pytorch\\build\\ALL_BUILD.vcxproj\" (default target) (3) -&gt;<br>\n\"C:\\Users&lt;username&gt;\\Desktop\\pytorch\\build\\caffe2\\AlgorithmsTest.vcxproj\" (default target) (4) -&gt;<br>\n\"C:\\Users&lt;username&gt;\\Desktop\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj\" (default target) (22) -&gt;<br>\n(CustomBuild target) -&gt;<br>\nc:\\users&lt;username&gt;\\desktop\\pytorch\\third_party\\eigen\\eigen\\src/Core/arch/CUDA/Half.h(212): error : more than one instance of overloaded function \"__hadd\" matches the argument list: [C:\\Users&lt;username&gt;\\Desktop\\pytorch<br>\n\\build\\caffe2\\caffe2_gpu.vcxproj]</p>\n<h2>Expected behavior</h2>\n<p>Build to complete properly</p>\n<h2>Environment</h2>\n<p>Windows</p>\n<pre><code>Collecting environment information...\nPyTorch version: 1.0.0a0+0f9807e\nIs debug build: No\nCUDA used to build PyTorch: 9.0\n\nOS: Microsoft Windows 10 Pro\nGCC version: (Rev5, Built by MSYS2 project) 5.3.0\nCMake version: version 3.12.2\n\nPython version: 3.6\nIs CUDA available: Yes\nCUDA runtime version: 9.0.176\nGPU models and configuration: GPU 0: GeForce GTX 1080\nNvidia driver version: 397.93\ncuDNN version: Probably one of the following:\nC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0\\bin\\cudnn64_7.dll\n\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] cuda90                    1.0                           0    pytorch\n[conda] pytorch                   0.4.1           py36_cuda90_cudnn7he774522_1    pytorch\n[conda] torch                     1.0.0a0+0f9807e           &lt;pip&gt;\n[conda] torchtext                 0.2.3                     &lt;pip&gt;\n[conda] torchvision               0.2.0                     &lt;pip&gt;\n[conda] torchvision-nightly       0.2.1                     &lt;pip&gt;\n</code></pre>\n<ul>\n<li>PyTorch Version (e.g., 1.0): 1.0</li>\n<li>OS (e.g., Linux): Windows</li>\n<li>How you installed PyTorch (<code>conda</code>, <code>pip</code>, source): source</li>\n<li>Build command you used (if compiling from source): given above</li>\n<li>Python version:3.6.6</li>\n<li>CUDA/cuDNN version:9.0</li>\n<li>GPU models and configuration:GTX 1080</li>\n<li>Any other relevant information: N/A</li>\n</ul>\n<h2>Additional context</h2>\n<p>To fix the error and ensure that the compile is successful,  Modify the following lines in (where pytorch git source is cloned)<br>\n~\\Desktop\\pytorch\\third_party\\eigen\\Eigen\\src\\Core\\arch\\CUDA\\Half.h</p>\n<p>EIGEN_STRONG_INLINE <strong>device</strong> half operator + (const half&amp; a, const half&amp; b) {<br>\nreturn __hadd(::__half(a), ::__half(b));<br>\n//  return __hadd(a, b);<br>\n}<br>\nEIGEN_STRONG_INLINE <strong>device</strong> half operator * (const half&amp; a, const half&amp; b) {<br>\nreturn __hmul(a, b);<br>\n}<br>\nEIGEN_STRONG_INLINE <strong>device</strong> half operator - (const half&amp; a, const half&amp; b) {<br>\nreturn __hsub(a, b);<br>\n}<br>\nEIGEN_STRONG_INLINE <strong>device</strong> half operator / (const half&amp; a, const half&amp; b) {<br>\nreturn __hdiv(a, b);<br>\n//  float num = __half2float(a);<br>\n//  float denom = __half2float(b);<br>\n//  return __float2half(num / denom);<br>\n}</p>", "body_text": "\ud83d\udc1b Bug\nWhile installing from source on windows, build fails with the error\nTo Reproduce\nSteps to reproduce the behavior:\nInstall pytorch from source as per below steps.\ncd  ~\\Desktop\ngit clone --recursive https://github.com/pytorch/pytorch\ncd  ~\\Desktop\\pytorch\nset \"VS150COMNTOOLS=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Auxiliary\\Build\"\nset CMAKE_GENERATOR=Visual Studio 15 2017 Win64\nset DISTUTILS_USE_SDK=1\nset \"PREBUILD_COMMAND=%VS140COMNTOOLS%....\\VC\\vcvarsall.bat\"\nset PREBUILD_COMMAND_ARGS=x64\ncall \"%VS150COMNTOOLS%\\vcvarsall.bat\" x64 -vcvars_ver=14.11\npython setup.py install\nError message as below.\n\"C:\\Users<username>\\Desktop\\pytorch\\build\\INSTALL.vcxproj\" (default target) (1) ->\n\"C:\\Users<username>\\Desktop\\pytorch\\build\\ALL_BUILD.vcxproj\" (default target) (3) ->\n\"C:\\Users<username>\\Desktop\\pytorch\\build\\caffe2\\AlgorithmsTest.vcxproj\" (default target) (4) ->\n\"C:\\Users<username>\\Desktop\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj\" (default target) (22) ->\n(CustomBuild target) ->\nc:\\users<username>\\desktop\\pytorch\\third_party\\eigen\\eigen\\src/Core/arch/CUDA/Half.h(212): error : more than one instance of overloaded function \"__hadd\" matches the argument list: [C:\\Users<username>\\Desktop\\pytorch\n\\build\\caffe2\\caffe2_gpu.vcxproj]\nExpected behavior\nBuild to complete properly\nEnvironment\nWindows\nCollecting environment information...\nPyTorch version: 1.0.0a0+0f9807e\nIs debug build: No\nCUDA used to build PyTorch: 9.0\n\nOS: Microsoft Windows 10 Pro\nGCC version: (Rev5, Built by MSYS2 project) 5.3.0\nCMake version: version 3.12.2\n\nPython version: 3.6\nIs CUDA available: Yes\nCUDA runtime version: 9.0.176\nGPU models and configuration: GPU 0: GeForce GTX 1080\nNvidia driver version: 397.93\ncuDNN version: Probably one of the following:\nC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0\\bin\\cudnn64_7.dll\n\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] cuda90                    1.0                           0    pytorch\n[conda] pytorch                   0.4.1           py36_cuda90_cudnn7he774522_1    pytorch\n[conda] torch                     1.0.0a0+0f9807e           <pip>\n[conda] torchtext                 0.2.3                     <pip>\n[conda] torchvision               0.2.0                     <pip>\n[conda] torchvision-nightly       0.2.1                     <pip>\n\n\nPyTorch Version (e.g., 1.0): 1.0\nOS (e.g., Linux): Windows\nHow you installed PyTorch (conda, pip, source): source\nBuild command you used (if compiling from source): given above\nPython version:3.6.6\nCUDA/cuDNN version:9.0\nGPU models and configuration:GTX 1080\nAny other relevant information: N/A\n\nAdditional context\nTo fix the error and ensure that the compile is successful,  Modify the following lines in (where pytorch git source is cloned)\n~\\Desktop\\pytorch\\third_party\\eigen\\Eigen\\src\\Core\\arch\\CUDA\\Half.h\nEIGEN_STRONG_INLINE device half operator + (const half& a, const half& b) {\nreturn __hadd(::__half(a), ::__half(b));\n//  return __hadd(a, b);\n}\nEIGEN_STRONG_INLINE device half operator * (const half& a, const half& b) {\nreturn __hmul(a, b);\n}\nEIGEN_STRONG_INLINE device half operator - (const half& a, const half& b) {\nreturn __hsub(a, b);\n}\nEIGEN_STRONG_INLINE device half operator / (const half& a, const half& b) {\nreturn __hdiv(a, b);\n//  float num = __half2float(a);\n//  float denom = __half2float(b);\n//  return __float2half(num / denom);\n}", "body": "## \ud83d\udc1b Bug\r\n\r\nWhile installing from source on windows, build fails with the error\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\nInstall pytorch from source as per below steps. \r\n\r\ncd  ~\\Desktop\r\ngit clone --recursive https://github.com/pytorch/pytorch\r\ncd  ~\\Desktop\\pytorch\r\nset \"VS150COMNTOOLS=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Auxiliary\\Build\"\r\nset CMAKE_GENERATOR=Visual Studio 15 2017 Win64\r\nset DISTUTILS_USE_SDK=1\r\nset \"PREBUILD_COMMAND=%VS140COMNTOOLS%\\..\\..\\VC\\vcvarsall.bat\"\r\nset PREBUILD_COMMAND_ARGS=x64\r\n\r\ncall \"%VS150COMNTOOLS%\\vcvarsall.bat\" x64 -vcvars_ver=14.11\r\npython setup.py install\r\n\r\n\r\nError message as below.\r\n\"C:\\Users\\<username>\\Desktop\\pytorch\\build\\INSTALL.vcxproj\" (default target) (1) ->\r\n\"C:\\Users\\<username>\\Desktop\\pytorch\\build\\ALL_BUILD.vcxproj\" (default target) (3) ->\r\n\"C:\\Users\\<username>\\Desktop\\pytorch\\build\\caffe2\\AlgorithmsTest.vcxproj\" (default target) (4) ->\r\n\"C:\\Users\\<username>\\Desktop\\pytorch\\build\\caffe2\\caffe2_gpu.vcxproj\" (default target) (22) ->\r\n(CustomBuild target) ->\r\n  c:\\users\\<username>\\desktop\\pytorch\\third_party\\eigen\\eigen\\src/Core/arch/CUDA/Half.h(212): error : more than one instance of overloaded function \"__hadd\" matches the argument list: [C:\\Users\\<username>\\Desktop\\pytorch\r\n\\build\\caffe2\\caffe2_gpu.vcxproj]\r\n\r\n## Expected behavior\r\nBuild to complete properly\r\n\r\n## Environment\r\nWindows\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.0.0a0+0f9807e\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0\r\n\r\nOS: Microsoft Windows 10 Pro\r\nGCC version: (Rev5, Built by MSYS2 project) 5.3.0\r\nCMake version: version 3.12.2\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 9.0.176\r\nGPU models and configuration: GPU 0: GeForce GTX 1080\r\nNvidia driver version: 397.93\r\ncuDNN version: Probably one of the following:\r\nC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0\\bin\\cudnn64_7.dll\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] cuda90                    1.0                           0    pytorch\r\n[conda] pytorch                   0.4.1           py36_cuda90_cudnn7he774522_1    pytorch\r\n[conda] torch                     1.0.0a0+0f9807e           <pip>\r\n[conda] torchtext                 0.2.3                     <pip>\r\n[conda] torchvision               0.2.0                     <pip>\r\n[conda] torchvision-nightly       0.2.1                     <pip>\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0): 1.0\r\n - OS (e.g., Linux): Windows\r\n - How you installed PyTorch (`conda`, `pip`, source): source\r\n - Build command you used (if compiling from source): given above\r\n - Python version:3.6.6\r\n - CUDA/cuDNN version:9.0\r\n - GPU models and configuration:GTX 1080\r\n - Any other relevant information: N/A\r\n\r\n## Additional context\r\n\r\nTo fix the error and ensure that the compile is successful,  Modify the following lines in (where pytorch git source is cloned)\r\n~\\Desktop\\pytorch\\third_party\\eigen\\Eigen\\src\\Core\\arch\\CUDA\\Half.h\r\n\r\nEIGEN_STRONG_INLINE __device__ half operator + (const half& a, const half& b) {\r\n  return __hadd(::__half(a), ::__half(b));\r\n//  return __hadd(a, b);\r\n}\r\nEIGEN_STRONG_INLINE __device__ half operator * (const half& a, const half& b) {\r\n  return __hmul(a, b);\r\n}\r\nEIGEN_STRONG_INLINE __device__ half operator - (const half& a, const half& b) {\r\n  return __hsub(a, b);\r\n}\r\nEIGEN_STRONG_INLINE __device__ half operator / (const half& a, const half& b) {\r\n  return __hdiv(a, b);\r\n//  float num = __half2float(a);\r\n//  float denom = __half2float(b);\r\n//  return __float2half(num / denom);\r\n}\r\n"}
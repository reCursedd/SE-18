{"url": "https://api.github.com/repos/pytorch/pytorch/issues/9582", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/9582/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/9582/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/9582/events", "html_url": "https://github.com/pytorch/pytorch/issues/9582", "id": 342574504, "node_id": "MDU6SXNzdWUzNDI1NzQ1MDQ=", "number": 9582, "title": "[Caffe2] caffe2 onnx backend doesn't suport onnx opset8", "user": {"login": "JerryShih", "id": 5842681, "node_id": "MDQ6VXNlcjU4NDI2ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5842681?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JerryShih", "html_url": "https://github.com/JerryShih", "followers_url": "https://api.github.com/users/JerryShih/followers", "following_url": "https://api.github.com/users/JerryShih/following{/other_user}", "gists_url": "https://api.github.com/users/JerryShih/gists{/gist_id}", "starred_url": "https://api.github.com/users/JerryShih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JerryShih/subscriptions", "organizations_url": "https://api.github.com/users/JerryShih/orgs", "repos_url": "https://api.github.com/users/JerryShih/repos", "events_url": "https://api.github.com/users/JerryShih/events{/privacy}", "received_events_url": "https://api.github.com/users/JerryShih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-19T04:24:45Z", "updated_at": "2018-07-26T18:16:12Z", "closed_at": "2018-07-26T18:16:12Z", "author_association": "CONTRIBUTOR", "body_html": "<h2>Issue description</h2>\n<p>The caffe2 onnx frontend will export opset8 onnx model, but the backend side still uses opset7<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/45f0d05202f0506f39dad7e5cc537b5851dbb298/caffe2/python/onnx/frontend.py#L41\">pytorch/caffe2/python/onnx/frontend.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 41\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/45f0d05202f0506f39dad7e5cc537b5851dbb298\">45f0d05</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L41\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"41\"></td>\n          <td id=\"LC41\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> target_opset_version <span class=\"pl-k\">=</span> <span class=\"pl-c1\">8</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/45f0d05202f0506f39dad7e5cc537b5851dbb298/caffe2/python/onnx/backend.py#L142\">pytorch/caffe2/python/onnx/backend.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 142\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/45f0d05202f0506f39dad7e5cc537b5851dbb298\">45f0d05</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L142\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"142\"></td>\n          <td id=\"LC142\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> _known_opset_version <span class=\"pl-k\">=</span> <span class=\"pl-c1\">7</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>Then, we will have the error like:</p>\n<p>UserWarning: This version of onnx-caffe2 targets ONNX operator set version 7, but the model we are trying to import uses version 8.  We will try to import it anyway, but if the model uses operators which had BC-breaking changes in the intervening versions, import will fail.</p>", "body_text": "Issue description\nThe caffe2 onnx frontend will export opset8 onnx model, but the backend side still uses opset7\n\n  \n    \n      pytorch/caffe2/python/onnx/frontend.py\n    \n    \n         Line 41\n      in\n      45f0d05\n    \n    \n    \n    \n\n        \n          \n           target_opset_version = 8 \n        \n    \n  \n\n\n\n  \n    \n      pytorch/caffe2/python/onnx/backend.py\n    \n    \n         Line 142\n      in\n      45f0d05\n    \n    \n    \n    \n\n        \n          \n           _known_opset_version = 7 \n        \n    \n  \n\n\nThen, we will have the error like:\nUserWarning: This version of onnx-caffe2 targets ONNX operator set version 7, but the model we are trying to import uses version 8.  We will try to import it anyway, but if the model uses operators which had BC-breaking changes in the intervening versions, import will fail.", "body": "## Issue description\r\n\r\nThe caffe2 onnx frontend will export opset8 onnx model, but the backend side still uses opset7\r\nhttps://github.com/pytorch/pytorch/blob/45f0d05202f0506f39dad7e5cc537b5851dbb298/caffe2/python/onnx/frontend.py#L41\r\nhttps://github.com/pytorch/pytorch/blob/45f0d05202f0506f39dad7e5cc537b5851dbb298/caffe2/python/onnx/backend.py#L142\r\n\r\nThen, we will have the error like:\r\n\r\nUserWarning: This version of onnx-caffe2 targets ONNX operator set version 7, but the model we are trying to import uses version 8.  We will try to import it anyway, but if the model uses operators which had BC-breaking changes in the intervening versions, import will fail.\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/14255", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/14255/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/14255/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/14255/events", "html_url": "https://github.com/pytorch/pytorch/issues/14255", "id": 382902915, "node_id": "MDU6SXNzdWUzODI5MDI5MTU=", "number": 14255, "title": "[jit] graph differentiation segfaults on a particular graph", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 679953983, "node_id": "MDU6TGFiZWw2Nzk5NTM5ODM=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/jit", "name": "jit", "color": "c5def5", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-21T00:20:38Z", "updated_at": "2018-11-21T00:20:44Z", "closed_at": null, "author_association": "MEMBER", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<h2>To Reproduce</h2>\n<p>Short repro code<br>\n<a href=\"https://gist.github.com/soumith/68e55c24845ca16770f55409c0230776\">https://gist.github.com/soumith/68e55c24845ca16770f55409c0230776</a></p>\n<p>Segmentation fault stack-trace:</p>\n<pre><code>Thread 1 \"test_jit\" received signal SIGSEGV, Segmentation fault.\n0x00007ffff6be10f4 in torch::jit::Node::inBlockList (this=0x0) at ../torch/csrc/jit/ir.h:600\n600         if(next() == nullptr) {\n(gdb) bt\n#0  0x00007ffff6be10f4 in torch::jit::Node::inBlockList (this=0x0) at ../torch/csrc/jit/ir.h:600\n#1  0x00007ffff71b5494 in torch::jit::Node::insertAfter (this=0xbcbb60, n=0x0) at ../torch/csrc/jit/ir.cpp:905\n#2  0x00007ffff71b668b in torch::jit::Node::moveAfter (this=0xbcbb60, n=0x0) at ../torch/csrc/jit/ir.cpp:1125\n#3  0x00007ffff6e89b09 in torch::jit::lambdaLiftReverse (grad_desc=..., rev_info=...) at ../torch/csrc/jit/autodiff.cpp:724\n#4  0x00007ffff6e8a113 in torch::jit::differentiate (graph=...) at ../torch/csrc/jit/autodiff.cpp:773\n#5  0x0000000000527a41 in torch::jit::(anonymous namespace)::testTHNNConv () at ../test/cpp/jit/tests.h:563\n#6  0x000000000054d4fd in JitTest_THNNConv_Test::TestBody (this=0xb47900) at ../test/cpp/jit/gtest.cpp:31\n#7  0x0000000000602fe5 in testing::internal::HandleSehExceptionsInMethodIfSupported&lt;testing::Test, void&gt; (object=0xb47900, method=&amp;virtual testing::Test::TestBody(), location=0x6232eb \"the test body\")\n    at ../third_party/googletest/googletest/src/gtest.cc:2443\n#8  0x00000000005fd889 in testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::Test, void&gt; (object=0xb47900, method=&amp;virtual testing::Test::TestBody(), location=0x6232eb \"the test body\")\n    at ../third_party/googletest/googletest/src/gtest.cc:2479\n#9  0x00000000005dd166 in testing::Test::Run (this=0xb47900) at ../third_party/googletest/googletest/src/gtest.cc:2518\n#10 0x00000000005ddaa7 in testing::TestInfo::Run (this=0xb54ff0) at ../third_party/googletest/googletest/src/gtest.cc:2693\n#11 0x00000000005de111 in testing::TestCase::Run (this=0xb338f0) at ../third_party/googletest/googletest/src/gtest.cc:2811\n#12 0x00000000005e9110 in testing::internal::UnitTestImpl::RunAllTests (this=0xb56d30) at ../third_party/googletest/googletest/src/gtest.cc:5177\n#13 0x0000000000603f1b in testing::internal::HandleSehExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt; (object=0xb56d30,\n    method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x5e8e70 &lt;testing::internal::UnitTestImpl::RunAllTests()&gt;, location=0x623ca0 \"auxiliary test code (environments or event listeners)\")\n    at ../third_party/googletest/googletest/src/gtest.cc:2443\n#14 0x00000000005fe63b in testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt; (object=0xb56d30,\n    method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x5e8e70 &lt;testing::internal::UnitTestImpl::RunAllTests()&gt;, location=0x623ca0 \"auxiliary test code (environments or event listeners)\")\n    at ../third_party/googletest/googletest/src/gtest.cc:2479\n#15 0x00000000005e7b98 in testing::UnitTest::Run (this=0x89b880 &lt;testing::UnitTest::GetInstance()::instance&gt;) at ../third_party/googletest/googletest/src/gtest.cc:4786\n#16 0x000000000051b59a in RUN_ALL_TESTS () at ../cmake/../third_party/googletest/googletest/include/gtest/gtest.h:2341\n#17 0x000000000051b496 in main (argc=1, argv=0x7fffffffda78) at ../test/cpp/common/main.cpp:31\n</code></pre>", "body_text": "\ud83d\udc1b Bug\nTo Reproduce\nShort repro code\nhttps://gist.github.com/soumith/68e55c24845ca16770f55409c0230776\nSegmentation fault stack-trace:\nThread 1 \"test_jit\" received signal SIGSEGV, Segmentation fault.\n0x00007ffff6be10f4 in torch::jit::Node::inBlockList (this=0x0) at ../torch/csrc/jit/ir.h:600\n600         if(next() == nullptr) {\n(gdb) bt\n#0  0x00007ffff6be10f4 in torch::jit::Node::inBlockList (this=0x0) at ../torch/csrc/jit/ir.h:600\n#1  0x00007ffff71b5494 in torch::jit::Node::insertAfter (this=0xbcbb60, n=0x0) at ../torch/csrc/jit/ir.cpp:905\n#2  0x00007ffff71b668b in torch::jit::Node::moveAfter (this=0xbcbb60, n=0x0) at ../torch/csrc/jit/ir.cpp:1125\n#3  0x00007ffff6e89b09 in torch::jit::lambdaLiftReverse (grad_desc=..., rev_info=...) at ../torch/csrc/jit/autodiff.cpp:724\n#4  0x00007ffff6e8a113 in torch::jit::differentiate (graph=...) at ../torch/csrc/jit/autodiff.cpp:773\n#5  0x0000000000527a41 in torch::jit::(anonymous namespace)::testTHNNConv () at ../test/cpp/jit/tests.h:563\n#6  0x000000000054d4fd in JitTest_THNNConv_Test::TestBody (this=0xb47900) at ../test/cpp/jit/gtest.cpp:31\n#7  0x0000000000602fe5 in testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void> (object=0xb47900, method=&virtual testing::Test::TestBody(), location=0x6232eb \"the test body\")\n    at ../third_party/googletest/googletest/src/gtest.cc:2443\n#8  0x00000000005fd889 in testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void> (object=0xb47900, method=&virtual testing::Test::TestBody(), location=0x6232eb \"the test body\")\n    at ../third_party/googletest/googletest/src/gtest.cc:2479\n#9  0x00000000005dd166 in testing::Test::Run (this=0xb47900) at ../third_party/googletest/googletest/src/gtest.cc:2518\n#10 0x00000000005ddaa7 in testing::TestInfo::Run (this=0xb54ff0) at ../third_party/googletest/googletest/src/gtest.cc:2693\n#11 0x00000000005de111 in testing::TestCase::Run (this=0xb338f0) at ../third_party/googletest/googletest/src/gtest.cc:2811\n#12 0x00000000005e9110 in testing::internal::UnitTestImpl::RunAllTests (this=0xb56d30) at ../third_party/googletest/googletest/src/gtest.cc:5177\n#13 0x0000000000603f1b in testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (object=0xb56d30,\n    method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x5e8e70 <testing::internal::UnitTestImpl::RunAllTests()>, location=0x623ca0 \"auxiliary test code (environments or event listeners)\")\n    at ../third_party/googletest/googletest/src/gtest.cc:2443\n#14 0x00000000005fe63b in testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (object=0xb56d30,\n    method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x5e8e70 <testing::internal::UnitTestImpl::RunAllTests()>, location=0x623ca0 \"auxiliary test code (environments or event listeners)\")\n    at ../third_party/googletest/googletest/src/gtest.cc:2479\n#15 0x00000000005e7b98 in testing::UnitTest::Run (this=0x89b880 <testing::UnitTest::GetInstance()::instance>) at ../third_party/googletest/googletest/src/gtest.cc:4786\n#16 0x000000000051b59a in RUN_ALL_TESTS () at ../cmake/../third_party/googletest/googletest/include/gtest/gtest.h:2341\n#17 0x000000000051b496 in main (argc=1, argv=0x7fffffffda78) at ../test/cpp/common/main.cpp:31", "body": "## \ud83d\udc1b Bug\r\n\r\n## To Reproduce\r\n\r\nShort repro code\r\nhttps://gist.github.com/soumith/68e55c24845ca16770f55409c0230776\r\n\r\n\r\nSegmentation fault stack-trace:\r\n\r\n```\r\nThread 1 \"test_jit\" received signal SIGSEGV, Segmentation fault.\r\n0x00007ffff6be10f4 in torch::jit::Node::inBlockList (this=0x0) at ../torch/csrc/jit/ir.h:600\r\n600         if(next() == nullptr) {\r\n(gdb) bt\r\n#0  0x00007ffff6be10f4 in torch::jit::Node::inBlockList (this=0x0) at ../torch/csrc/jit/ir.h:600\r\n#1  0x00007ffff71b5494 in torch::jit::Node::insertAfter (this=0xbcbb60, n=0x0) at ../torch/csrc/jit/ir.cpp:905\r\n#2  0x00007ffff71b668b in torch::jit::Node::moveAfter (this=0xbcbb60, n=0x0) at ../torch/csrc/jit/ir.cpp:1125\r\n#3  0x00007ffff6e89b09 in torch::jit::lambdaLiftReverse (grad_desc=..., rev_info=...) at ../torch/csrc/jit/autodiff.cpp:724\r\n#4  0x00007ffff6e8a113 in torch::jit::differentiate (graph=...) at ../torch/csrc/jit/autodiff.cpp:773\r\n#5  0x0000000000527a41 in torch::jit::(anonymous namespace)::testTHNNConv () at ../test/cpp/jit/tests.h:563\r\n#6  0x000000000054d4fd in JitTest_THNNConv_Test::TestBody (this=0xb47900) at ../test/cpp/jit/gtest.cpp:31\r\n#7  0x0000000000602fe5 in testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void> (object=0xb47900, method=&virtual testing::Test::TestBody(), location=0x6232eb \"the test body\")\r\n    at ../third_party/googletest/googletest/src/gtest.cc:2443\r\n#8  0x00000000005fd889 in testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void> (object=0xb47900, method=&virtual testing::Test::TestBody(), location=0x6232eb \"the test body\")\r\n    at ../third_party/googletest/googletest/src/gtest.cc:2479\r\n#9  0x00000000005dd166 in testing::Test::Run (this=0xb47900) at ../third_party/googletest/googletest/src/gtest.cc:2518\r\n#10 0x00000000005ddaa7 in testing::TestInfo::Run (this=0xb54ff0) at ../third_party/googletest/googletest/src/gtest.cc:2693\r\n#11 0x00000000005de111 in testing::TestCase::Run (this=0xb338f0) at ../third_party/googletest/googletest/src/gtest.cc:2811\r\n#12 0x00000000005e9110 in testing::internal::UnitTestImpl::RunAllTests (this=0xb56d30) at ../third_party/googletest/googletest/src/gtest.cc:5177\r\n#13 0x0000000000603f1b in testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (object=0xb56d30,\r\n    method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x5e8e70 <testing::internal::UnitTestImpl::RunAllTests()>, location=0x623ca0 \"auxiliary test code (environments or event listeners)\")\r\n    at ../third_party/googletest/googletest/src/gtest.cc:2443\r\n#14 0x00000000005fe63b in testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (object=0xb56d30,\r\n    method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x5e8e70 <testing::internal::UnitTestImpl::RunAllTests()>, location=0x623ca0 \"auxiliary test code (environments or event listeners)\")\r\n    at ../third_party/googletest/googletest/src/gtest.cc:2479\r\n#15 0x00000000005e7b98 in testing::UnitTest::Run (this=0x89b880 <testing::UnitTest::GetInstance()::instance>) at ../third_party/googletest/googletest/src/gtest.cc:4786\r\n#16 0x000000000051b59a in RUN_ALL_TESTS () at ../cmake/../third_party/googletest/googletest/include/gtest/gtest.h:2341\r\n#17 0x000000000051b496 in main (argc=1, argv=0x7fffffffda78) at ../test/cpp/common/main.cpp:31\r\n```"}
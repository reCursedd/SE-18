{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/308673264", "html_url": "https://github.com/pytorch/pytorch/issues/1355#issuecomment-308673264", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1355", "id": 308673264, "node_id": "MDEyOklzc3VlQ29tbWVudDMwODY3MzI2NA==", "user": {"login": "ClementPinard", "id": 4380424, "node_id": "MDQ6VXNlcjQzODA0MjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4380424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ClementPinard", "html_url": "https://github.com/ClementPinard", "followers_url": "https://api.github.com/users/ClementPinard/followers", "following_url": "https://api.github.com/users/ClementPinard/following{/other_user}", "gists_url": "https://api.github.com/users/ClementPinard/gists{/gist_id}", "starred_url": "https://api.github.com/users/ClementPinard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ClementPinard/subscriptions", "organizations_url": "https://api.github.com/users/ClementPinard/orgs", "repos_url": "https://api.github.com/users/ClementPinard/repos", "events_url": "https://api.github.com/users/ClementPinard/events{/privacy}", "received_events_url": "https://api.github.com/users/ClementPinard/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-15T09:03:27Z", "updated_at": "2017-06-15T09:03:27Z", "author_association": "NONE", "body_html": "<p>Thanks for your time about this issue, it has been driving me nuts for a long time! If I understand correctly I need to expand <code>/dev/shm</code> to be 16G instead of 8G. It makes sens but when when in try <code>df -h</code>, I can see that all my ram is actually allocated as such : (I have 16G)</p>\n<pre><code>tmpfs              7,8G    393M  7,4G   5% /dev/shm\ntmpfs              5,0M    4,0K  5,0M   1% /run/lock\ntmpfs              7,8G       0  7,8G   0% /sys/fs/cgroup\ntmpfs              1,6G     60K  1,6G   1% /run/user/1001\n</code></pre>\n<p>This is the output of <code>df -h</code> during a deadlock. As far as I understand, If I have a SWAP partition of 16G, I can mount tmpfs up to 32G, so it shouldn't be a problem to expand <code>/dev/shm</code>, right ?</p>\n<p>More importantly, I am puzzled about the cgroup partition and its purpose since it takes nearly a half of my RAM. Apparently it's designed to manage efficiently multi-processor tasks, but I'm really not familiar with what it does and why we need it, would it change something to allocate all of physical RAM to shm (because we set its size to 16G) and put it in SWAP (although i believe both will be partly in the RAM and SWAP simultaneously)</p>", "body_text": "Thanks for your time about this issue, it has been driving me nuts for a long time! If I understand correctly I need to expand /dev/shm to be 16G instead of 8G. It makes sens but when when in try df -h, I can see that all my ram is actually allocated as such : (I have 16G)\ntmpfs              7,8G    393M  7,4G   5% /dev/shm\ntmpfs              5,0M    4,0K  5,0M   1% /run/lock\ntmpfs              7,8G       0  7,8G   0% /sys/fs/cgroup\ntmpfs              1,6G     60K  1,6G   1% /run/user/1001\n\nThis is the output of df -h during a deadlock. As far as I understand, If I have a SWAP partition of 16G, I can mount tmpfs up to 32G, so it shouldn't be a problem to expand /dev/shm, right ?\nMore importantly, I am puzzled about the cgroup partition and its purpose since it takes nearly a half of my RAM. Apparently it's designed to manage efficiently multi-processor tasks, but I'm really not familiar with what it does and why we need it, would it change something to allocate all of physical RAM to shm (because we set its size to 16G) and put it in SWAP (although i believe both will be partly in the RAM and SWAP simultaneously)", "body": "Thanks for your time about this issue, it has been driving me nuts for a long time! If I understand correctly I need to expand `/dev/shm` to be 16G instead of 8G. It makes sens but when when in try `df -h`, I can see that all my ram is actually allocated as such : (I have 16G)\r\n```\r\ntmpfs              7,8G    393M  7,4G   5% /dev/shm\r\ntmpfs              5,0M    4,0K  5,0M   1% /run/lock\r\ntmpfs              7,8G       0  7,8G   0% /sys/fs/cgroup\r\ntmpfs              1,6G     60K  1,6G   1% /run/user/1001\r\n```\r\n\r\nThis is the output of `df -h` during a deadlock. As far as I understand, If I have a SWAP partition of 16G, I can mount tmpfs up to 32G, so it shouldn't be a problem to expand `/dev/shm`, right ?\r\n\r\nMore importantly, I am puzzled about the cgroup partition and its purpose since it takes nearly a half of my RAM. Apparently it's designed to manage efficiently multi-processor tasks, but I'm really not familiar with what it does and why we need it, would it change something to allocate all of physical RAM to shm (because we set its size to 16G) and put it in SWAP (although i believe both will be partly in the RAM and SWAP simultaneously)"}
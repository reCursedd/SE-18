{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/307375229", "html_url": "https://github.com/pytorch/pytorch/issues/1355#issuecomment-307375229", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1355", "id": 307375229, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzM3NTIyOQ==", "user": {"login": "jsainio", "id": 28704589, "node_id": "MDQ6VXNlcjI4NzA0NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/28704589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsainio", "html_url": "https://github.com/jsainio", "followers_url": "https://api.github.com/users/jsainio/followers", "following_url": "https://api.github.com/users/jsainio/following{/other_user}", "gists_url": "https://api.github.com/users/jsainio/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsainio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsainio/subscriptions", "organizations_url": "https://api.github.com/users/jsainio/orgs", "repos_url": "https://api.github.com/users/jsainio/repos", "events_url": "https://api.github.com/users/jsainio/events{/privacy}", "received_events_url": "https://api.github.com/users/jsainio/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-09T12:27:23Z", "updated_at": "2017-06-09T12:29:07Z", "author_association": "NONE", "body_html": "<p>I'm running a test with <code>num_workers = 0</code> currently, no hangs yet. I'm running the example code from <a href=\"https://github.com/pytorch/examples/blob/master/imagenet/main.py\">https://github.com/pytorch/examples/blob/master/imagenet/main.py</a>. <code>pytorch/vision</code> ImageFolder seems to use <code>PIL</code> or <code>pytorch/accimage</code> internally to load the images, so there's no OpenCV involved.</p>\n<p>With <code>num_workers = 4</code>, I can occasionally get the first epoch train and validate fully, and it locks up in the middle of the second epoch. So, it is unlikely a problem in the dataset/loading function.</p>\n<p>It looks something like a race condition in ImageLoader which might be triggered relatively rarely by a certain hardware/software combination.</p>", "body_text": "I'm running a test with num_workers = 0 currently, no hangs yet. I'm running the example code from https://github.com/pytorch/examples/blob/master/imagenet/main.py. pytorch/vision ImageFolder seems to use PIL or pytorch/accimage internally to load the images, so there's no OpenCV involved.\nWith num_workers = 4, I can occasionally get the first epoch train and validate fully, and it locks up in the middle of the second epoch. So, it is unlikely a problem in the dataset/loading function.\nIt looks something like a race condition in ImageLoader which might be triggered relatively rarely by a certain hardware/software combination.", "body": "I'm running a test with `num_workers = 0` currently, no hangs yet. I'm running the example code from https://github.com/pytorch/examples/blob/master/imagenet/main.py. `pytorch/vision` ImageFolder seems to use `PIL` or `pytorch/accimage` internally to load the images, so there's no OpenCV involved.\r\n\r\nWith `num_workers = 4`, I can occasionally get the first epoch train and validate fully, and it locks up in the middle of the second epoch. So, it is unlikely a problem in the dataset/loading function.\r\n\r\nIt looks something like a race condition in ImageLoader which might be triggered relatively rarely by a certain hardware/software combination."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5834", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5834/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5834/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5834/events", "html_url": "https://github.com/pytorch/pytorch/issues/5834", "id": 305957701, "node_id": "MDU6SXNzdWUzMDU5NTc3MDE=", "number": 5834, "title": "test_backwards_fork flaky test (plus deadlock after)", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-03-16T14:51:31Z", "updated_at": "2018-03-16T14:52:01Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>Here's what a failure looks like:</p>\n<pre><code>07:50:54 ======================================================================\n07:50:54 FAIL: test_backwards_fork (__main__.TestMultiprocessing)\n07:50:54 backwards() should succeed when called before and after a fork\n07:50:54 ----------------------------------------------------------------------\n07:50:54 Traceback (most recent call last):\n07:50:54   File \"test_multiprocessing.py\", line 436, in test_backwards_fork\n07:50:54     self.assertFalse(p.is_alive())\n07:50:54 AssertionError: True is not false\n07:50:54 \n07:50:54 ----------------------------------------------------------------------\n07:50:54 Ran 19 tests in 23.804s\n07:50:54 \n07:50:54 FAILED (failures=1, skipped=3)\n08:03:07 Build timed out (after 20 minutes). Marking the build as failed.\n08:03:07 Build was aborted\n</code></pre>\n<p>First <code>test_backward_fork</code> fails (not good), and then the exit from Python hangs, so that the build is only terminated when timeout happens.</p>\n<p>CC <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=655866\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/colesbury\">@colesbury</a> who originally added the test in <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/b79d74aa812cf5a3370ab09e20704453b070cb0e/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/b79d74aa812cf5a3370ab09e20704453b070cb0e\"><tt>b79d74a</tt></a></p>\n<p>Known failure occurrences:</p>\n<p>On master:</p>\n<ul>\n<li><a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-win-ws2016-cuda9-cudnn7-py3-test/2927//console\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-win-ws2016-cuda9-cudnn7-py3-test/2927//console</a> (on master; tests before and after pass)</li>\n</ul>\n<p>PRs:</p>\n<ul>\n<li><a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda9-cudnn7-py2-test/4624//console\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda9-cudnn7-py2-test/4624//console</a></li>\n<li><a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda9-cudnn7-py2-test/4623//console\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda9-cudnn7-py2-test/4623//console</a></li>\n<li><a href=\"https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda8-cudnn6-py3-test/4685//console\" rel=\"nofollow\">https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda8-cudnn6-py3-test/4685//console</a></li>\n</ul>", "body_text": "Here's what a failure looks like:\n07:50:54 ======================================================================\n07:50:54 FAIL: test_backwards_fork (__main__.TestMultiprocessing)\n07:50:54 backwards() should succeed when called before and after a fork\n07:50:54 ----------------------------------------------------------------------\n07:50:54 Traceback (most recent call last):\n07:50:54   File \"test_multiprocessing.py\", line 436, in test_backwards_fork\n07:50:54     self.assertFalse(p.is_alive())\n07:50:54 AssertionError: True is not false\n07:50:54 \n07:50:54 ----------------------------------------------------------------------\n07:50:54 Ran 19 tests in 23.804s\n07:50:54 \n07:50:54 FAILED (failures=1, skipped=3)\n08:03:07 Build timed out (after 20 minutes). Marking the build as failed.\n08:03:07 Build was aborted\n\nFirst test_backward_fork fails (not good), and then the exit from Python hangs, so that the build is only terminated when timeout happens.\nCC @colesbury who originally added the test in b79d74a\nKnown failure occurrences:\nOn master:\n\nhttps://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-win-ws2016-cuda9-cudnn7-py3-test/2927//console (on master; tests before and after pass)\n\nPRs:\n\nhttps://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda9-cudnn7-py2-test/4624//console\nhttps://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda9-cudnn7-py2-test/4623//console\nhttps://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda8-cudnn6-py3-test/4685//console", "body": "Here's what a failure looks like:\r\n\r\n```\r\n07:50:54 ======================================================================\r\n07:50:54 FAIL: test_backwards_fork (__main__.TestMultiprocessing)\r\n07:50:54 backwards() should succeed when called before and after a fork\r\n07:50:54 ----------------------------------------------------------------------\r\n07:50:54 Traceback (most recent call last):\r\n07:50:54   File \"test_multiprocessing.py\", line 436, in test_backwards_fork\r\n07:50:54     self.assertFalse(p.is_alive())\r\n07:50:54 AssertionError: True is not false\r\n07:50:54 \r\n07:50:54 ----------------------------------------------------------------------\r\n07:50:54 Ran 19 tests in 23.804s\r\n07:50:54 \r\n07:50:54 FAILED (failures=1, skipped=3)\r\n08:03:07 Build timed out (after 20 minutes). Marking the build as failed.\r\n08:03:07 Build was aborted\r\n```\r\n\r\nFirst `test_backward_fork` fails (not good), and then the exit from Python hangs, so that the build is only terminated when timeout happens.\r\n\r\nCC @colesbury who originally added the test in b79d74aa812cf5a3370ab09e20704453b070cb0e\r\n\r\nKnown failure occurrences:\r\n\r\nOn master:\r\n* https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-win-ws2016-cuda9-cudnn7-py3-test/2927//console (on master; tests before and after pass)\r\n\r\nPRs:\r\n* https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda9-cudnn7-py2-test/4624//console\r\n* https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda9-cudnn7-py2-test/4623//console\r\n* https://ci.pytorch.org/jenkins/job/pytorch-builds/job/pytorch-linux-xenial-cuda8-cudnn6-py3-test/4685//console"}
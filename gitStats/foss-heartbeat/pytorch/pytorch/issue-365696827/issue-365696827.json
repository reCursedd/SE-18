{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12243", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12243/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12243/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12243/events", "html_url": "https://github.com/pytorch/pytorch/pull/12243", "id": 365696827, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE5NTU2MjAy", "number": 12243, "title": "[jit] Properly catch errors in PythonOps", "user": {"login": "driazati", "id": 9407960, "node_id": "MDQ6VXNlcjk0MDc5NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/9407960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/driazati", "html_url": "https://github.com/driazati", "followers_url": "https://api.github.com/users/driazati/followers", "following_url": "https://api.github.com/users/driazati/following{/other_user}", "gists_url": "https://api.github.com/users/driazati/gists{/gist_id}", "starred_url": "https://api.github.com/users/driazati/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/driazati/subscriptions", "organizations_url": "https://api.github.com/users/driazati/orgs", "repos_url": "https://api.github.com/users/driazati/repos", "events_url": "https://api.github.com/users/driazati/events{/privacy}", "received_events_url": "https://api.github.com/users/driazati/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-02T00:47:14Z", "updated_at": "2018-10-04T00:26:27Z", "closed_at": "2018-10-04T00:26:27Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/12243", "html_url": "https://github.com/pytorch/pytorch/pull/12243", "diff_url": "https://github.com/pytorch/pytorch/pull/12243.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/12243.patch"}, "body_html": "<p>If a PythonOp throws an error it raises an exception to the interpreter and also releases the GIL which causes <a href=\"https://github.com/potassco/clingo/issues/42\" data-hovercard-type=\"issue\" data-hovercard-url=\"/potassco/clingo/issues/42/hovercard\">pybind to segfault</a></p>\n<p>This fix catches pybind errors while the GIL is still held and throws a <code>python_error</code> to re-capture the GIL</p>\n<p><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #12118.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"364211100\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/12118\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/12118/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/12118\">#12118</a></p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a></p>", "body_text": "If a PythonOp throws an error it raises an exception to the interpreter and also releases the GIL which causes pybind to segfault\nThis fix catches pybind errors while the GIL is still held and throws a python_error to re-capture the GIL\nFixes #12118\n@apaszke", "body": "If a PythonOp throws an error it raises an exception to the interpreter and also releases the GIL which causes [pybind to segfault](https://github.com/potassco/clingo/issues/42)\r\n\r\nThis fix catches pybind errors while the GIL is still held and throws a `python_error` to re-capture the GIL\r\n\r\nFixes #12118\r\n\r\n@apaszke "}
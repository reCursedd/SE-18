{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/430019303", "html_url": "https://github.com/pytorch/pytorch/issues/12578#issuecomment-430019303", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/12578", "id": 430019303, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDAxOTMwMw==", "user": {"login": "ailzhang", "id": 5248122, "node_id": "MDQ6VXNlcjUyNDgxMjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5248122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ailzhang", "html_url": "https://github.com/ailzhang", "followers_url": "https://api.github.com/users/ailzhang/followers", "following_url": "https://api.github.com/users/ailzhang/following{/other_user}", "gists_url": "https://api.github.com/users/ailzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ailzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ailzhang/subscriptions", "organizations_url": "https://api.github.com/users/ailzhang/orgs", "repos_url": "https://api.github.com/users/ailzhang/repos", "events_url": "https://api.github.com/users/ailzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/ailzhang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-15T21:25:43Z", "updated_at": "2018-10-15T21:25:43Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Btw some quick thoughts, as I need to change the title for this issue.</p>\n<ul>\n<li>this is not related to odd/even steps, if you change <code>mult_factor=0.00003</code>, even steps are also wrong.</li>\n</ul>\n<pre><code>import torch\nimport numpy as np\nimport sys\nimport pdb\n\nmult_factor=0.00003\npdb.set_trace()\n\n# Torch\n\nprint('11 steps')\nn_ = torch.linspace(-5.0, 5.0,steps=11)* mult_factor\nprint(n_)\n\nn_ = np.linspace(-5.0, 5.0,11)* mult_factor\nprint(n_)\n\nprint('.....')\n\nprint('12 steps')\nn_ = torch.linspace(-5.0, 5.0,steps=12)* mult_factor\nprint(n_)\n\nn_ = np.linspace(-5.0, 5.0,12)* mult_factor\nprint(n_)\nprint('.....')\n</code></pre>\n<ul>\n<li>This is not related to linspace, given that if create the tensor myself, the problem is still there.</li>\n</ul>\n<pre><code>In [1]: import torch\n\nIn [2]:  a = torch.tensor([-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5])\n\nIn [5]: mult_factor = 0.00002\n\nIn [7]: a = a.double()\n\nIn [8]: a * mult_factor\nOut[8]:\ntensor([-0.0001, -0.0001, -0.0001, -0.0000, -0.0000,  0.0000,  0.0000,  0.0000,\n         0.0001,  0.0001,  0.0001], dtype=torch.float64)\n</code></pre>\n<p>This looks more like a type promotion thing to me. Taking a closer look...</p>", "body_text": "Btw some quick thoughts, as I need to change the title for this issue.\n\nthis is not related to odd/even steps, if you change mult_factor=0.00003, even steps are also wrong.\n\nimport torch\nimport numpy as np\nimport sys\nimport pdb\n\nmult_factor=0.00003\npdb.set_trace()\n\n# Torch\n\nprint('11 steps')\nn_ = torch.linspace(-5.0, 5.0,steps=11)* mult_factor\nprint(n_)\n\nn_ = np.linspace(-5.0, 5.0,11)* mult_factor\nprint(n_)\n\nprint('.....')\n\nprint('12 steps')\nn_ = torch.linspace(-5.0, 5.0,steps=12)* mult_factor\nprint(n_)\n\nn_ = np.linspace(-5.0, 5.0,12)* mult_factor\nprint(n_)\nprint('.....')\n\n\nThis is not related to linspace, given that if create the tensor myself, the problem is still there.\n\nIn [1]: import torch\n\nIn [2]:  a = torch.tensor([-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5])\n\nIn [5]: mult_factor = 0.00002\n\nIn [7]: a = a.double()\n\nIn [8]: a * mult_factor\nOut[8]:\ntensor([-0.0001, -0.0001, -0.0001, -0.0000, -0.0000,  0.0000,  0.0000,  0.0000,\n         0.0001,  0.0001,  0.0001], dtype=torch.float64)\n\nThis looks more like a type promotion thing to me. Taking a closer look...", "body": "Btw some quick thoughts, as I need to change the title for this issue.\r\n*  this is not related to odd/even steps, if you change `mult_factor=0.00003`, even steps are also wrong. \r\n```\r\nimport torch\r\nimport numpy as np\r\nimport sys\r\nimport pdb\r\n\r\nmult_factor=0.00003\r\npdb.set_trace()\r\n\r\n# Torch\r\n\r\nprint('11 steps')\r\nn_ = torch.linspace(-5.0, 5.0,steps=11)* mult_factor\r\nprint(n_)\r\n\r\nn_ = np.linspace(-5.0, 5.0,11)* mult_factor\r\nprint(n_)\r\n\r\nprint('.....')\r\n\r\nprint('12 steps')\r\nn_ = torch.linspace(-5.0, 5.0,steps=12)* mult_factor\r\nprint(n_)\r\n\r\nn_ = np.linspace(-5.0, 5.0,12)* mult_factor\r\nprint(n_)\r\nprint('.....')\r\n```\r\n* This is not related to linspace, given that if create the tensor myself, the problem is still there. \r\n```\r\nIn [1]: import torch\r\n\r\nIn [2]:  a = torch.tensor([-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5])\r\n\r\nIn [5]: mult_factor = 0.00002\r\n\r\nIn [7]: a = a.double()\r\n\r\nIn [8]: a * mult_factor\r\nOut[8]:\r\ntensor([-0.0001, -0.0001, -0.0001, -0.0000, -0.0000,  0.0000,  0.0000,  0.0000,\r\n         0.0001,  0.0001,  0.0001], dtype=torch.float64)\r\n```\r\nThis looks more like a type promotion thing to me. Taking a closer look..."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13899", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13899/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13899/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13899/events", "html_url": "https://github.com/pytorch/pytorch/issues/13899", "id": 380281179, "node_id": "MDU6SXNzdWUzODAyODExNzk=", "number": 13899, "title": "Better error messaging for requiring ModuleList to be constant", "user": {"login": "sidazhang", "id": 3519115, "node_id": "MDQ6VXNlcjM1MTkxMTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3519115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sidazhang", "html_url": "https://github.com/sidazhang", "followers_url": "https://api.github.com/users/sidazhang/followers", "following_url": "https://api.github.com/users/sidazhang/following{/other_user}", "gists_url": "https://api.github.com/users/sidazhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/sidazhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sidazhang/subscriptions", "organizations_url": "https://api.github.com/users/sidazhang/orgs", "repos_url": "https://api.github.com/users/sidazhang/repos", "events_url": "https://api.github.com/users/sidazhang/events{/privacy}", "received_events_url": "https://api.github.com/users/sidazhang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 679953983, "node_id": "MDU6TGFiZWw2Nzk5NTM5ODM=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/jit", "name": "jit", "color": "c5def5", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-13T15:30:41Z", "updated_at": "2018-11-23T06:28:45Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"rocket\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f680.png\">\ud83d\ude80</g-emoji> Feature</h2>\n<pre><code>def __init__\n        // ....\n        self.conv_lstms = nn.ModuleList(conv_lstms)\n        // ...\n\ndef forward()\n        for i in range(len(self.cell_n)):\n            cell = self.conv_lstms[i]\n</code></pre>\n<pre><code>python value of type 'ModuleList' cannot be used as a value:\ndef forward(self, inputs, hidden):\n    for i in range(len(self.cell_n)):\n        cell = self.conv_lstms[i]\n               ~~~~~~~~~ &lt;--- HERE\n        hidden[i] = cell(step_input, hidden[i])\n        step_input = hidden[i][0]\n\n    return step_input, hidden\n</code></pre>\n<p>The fix in the above case is to declare <code>__constants__ = [\"conv_lstms\"]</code></p>\n<p>So the error message should say that <code>ModuleList</code> should be declared constant</p>\n<h2>Motivation</h2>\n<p>The error message is very unclear for new users.</p>", "body_text": "\ud83d\ude80 Feature\ndef __init__\n        // ....\n        self.conv_lstms = nn.ModuleList(conv_lstms)\n        // ...\n\ndef forward()\n        for i in range(len(self.cell_n)):\n            cell = self.conv_lstms[i]\n\npython value of type 'ModuleList' cannot be used as a value:\ndef forward(self, inputs, hidden):\n    for i in range(len(self.cell_n)):\n        cell = self.conv_lstms[i]\n               ~~~~~~~~~ <--- HERE\n        hidden[i] = cell(step_input, hidden[i])\n        step_input = hidden[i][0]\n\n    return step_input, hidden\n\nThe fix in the above case is to declare __constants__ = [\"conv_lstms\"]\nSo the error message should say that ModuleList should be declared constant\nMotivation\nThe error message is very unclear for new users.", "body": "## \ud83d\ude80 Feature\r\n```\r\ndef __init__\r\n        // ....\r\n        self.conv_lstms = nn.ModuleList(conv_lstms)\r\n        // ...\r\n\r\ndef forward()\r\n        for i in range(len(self.cell_n)):\r\n            cell = self.conv_lstms[i]\r\n```\r\n\r\n```\r\npython value of type 'ModuleList' cannot be used as a value:\r\ndef forward(self, inputs, hidden):\r\n    for i in range(len(self.cell_n)):\r\n        cell = self.conv_lstms[i]\r\n               ~~~~~~~~~ <--- HERE\r\n        hidden[i] = cell(step_input, hidden[i])\r\n        step_input = hidden[i][0]\r\n\r\n    return step_input, hidden\r\n```\r\n\r\nThe fix in the above case is to declare `__constants__ = [\"conv_lstms\"]`\r\n\r\nSo the error message should say that `ModuleList` should be declared constant\r\n\r\n## Motivation\r\nThe error message is very unclear for new users.\r\n"}
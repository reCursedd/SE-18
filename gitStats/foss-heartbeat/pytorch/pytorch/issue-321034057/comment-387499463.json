{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/387499463", "html_url": "https://github.com/pytorch/pytorch/pull/7366#issuecomment-387499463", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7366", "id": 387499463, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQ5OTQ2Mw==", "user": {"login": "mruberry", "id": 38511765, "node_id": "MDQ6VXNlcjM4NTExNzY1", "avatar_url": "https://avatars3.githubusercontent.com/u/38511765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mruberry", "html_url": "https://github.com/mruberry", "followers_url": "https://api.github.com/users/mruberry/followers", "following_url": "https://api.github.com/users/mruberry/following{/other_user}", "gists_url": "https://api.github.com/users/mruberry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mruberry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mruberry/subscriptions", "organizations_url": "https://api.github.com/users/mruberry/orgs", "repos_url": "https://api.github.com/users/mruberry/repos", "events_url": "https://api.github.com/users/mruberry/events{/privacy}", "received_events_url": "https://api.github.com/users/mruberry/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-08T18:33:26Z", "updated_at": "2018-05-08T18:33:26Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Always happy to remove code ;)</p>\n<p>I aligned the IndexToOffset code (for some reason there were 3 slightly different versions) and removed the IndexToOffset specialization in TensorInfo.cuh (under ATen). I was mistaken that the OffsetInfo specialization would be so easy to remove, however, since it allocates arrays, and the 1D case does not need to do so. I've kept that one for now.</p>\n<p>I am currently working on a follow-up PR, however, that I expect will improve performance and further adjust the THCTensorInfo.cuh code in a way that will render this issue moot.</p>", "body_text": "Always happy to remove code ;)\nI aligned the IndexToOffset code (for some reason there were 3 slightly different versions) and removed the IndexToOffset specialization in TensorInfo.cuh (under ATen). I was mistaken that the OffsetInfo specialization would be so easy to remove, however, since it allocates arrays, and the 1D case does not need to do so. I've kept that one for now.\nI am currently working on a follow-up PR, however, that I expect will improve performance and further adjust the THCTensorInfo.cuh code in a way that will render this issue moot.", "body": "Always happy to remove code ;)\r\n\r\nI aligned the IndexToOffset code (for some reason there were 3 slightly different versions) and removed the IndexToOffset specialization in TensorInfo.cuh (under ATen). I was mistaken that the OffsetInfo specialization would be so easy to remove, however, since it allocates arrays, and the 1D case does not need to do so. I've kept that one for now.\r\n\r\nI am currently working on a follow-up PR, however, that I expect will improve performance and further adjust the THCTensorInfo.cuh code in a way that will render this issue moot. "}
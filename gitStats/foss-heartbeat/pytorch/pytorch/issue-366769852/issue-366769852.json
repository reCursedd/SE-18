{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12322", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12322/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12322/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12322/events", "html_url": "https://github.com/pytorch/pytorch/issues/12322", "id": 366769852, "node_id": "MDU6SXNzdWUzNjY3Njk4NTI=", "number": 12322, "title": "[Caffe2] Segmentation fault (core dumped) while import caffe2.python.core", "user": {"login": "connesso", "id": 9828883, "node_id": "MDQ6VXNlcjk4Mjg4ODM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9828883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/connesso", "html_url": "https://github.com/connesso", "followers_url": "https://api.github.com/users/connesso/followers", "following_url": "https://api.github.com/users/connesso/following{/other_user}", "gists_url": "https://api.github.com/users/connesso/gists{/gist_id}", "starred_url": "https://api.github.com/users/connesso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/connesso/subscriptions", "organizations_url": "https://api.github.com/users/connesso/orgs", "repos_url": "https://api.github.com/users/connesso/repos", "events_url": "https://api.github.com/users/connesso/events{/privacy}", "received_events_url": "https://api.github.com/users/connesso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-04T12:39:39Z", "updated_at": "2018-10-12T13:18:34Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>When I want to import caffe2.pytho.core, I get a Segmentation fault.</p>\n<p>I followed the install guide for ubuntu 16 with prebuilt binaries and also installed nccl, I've been browsing past issues but can't find a solution.</p>\n<p>please help me</p>\n<h2>To Reproduce</h2>\n<p>Steps to reproduce the behavior:</p>\n<ol>\n<li>Install NCCL 2.3.5</li>\n<li>conda install -c caffe2 caffe2-cuda9.0-cudnn7</li>\n<li>import caffe2.python.core</li>\n</ol>\n<p>ERROR :</p>\n<pre><code>WARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nSegmentation fault (core dumped)\n</code></pre>\n<h2>Environment</h2>\n<pre><code>uname -a\nLinux realAI 4.4.0-131-generic #157-Ubuntu SMP Thu Jul 12 15:51:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n<p>Followed : <a href=\"https://caffe2.ai/docs/getting-started.html?platform=ubuntu&amp;configuration=prebuilt\" rel=\"nofollow\"></a></p>\n<p>Cmake : I installed with anaconda I can't find the cmake output</p>\n<pre><code>which python\n/home/mputtnam/anaconda3/bin/python\n\nwhich pip\n/home/mputtnam/anaconda3/bin/pip\n\necho $PYTHONPATH\n&lt;blank&gt;\n</code></pre>\n<pre><code>nvidia-smi\nThu Oct  4 08:35:22 2018\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 396.54                 Driver Version: 396.54                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Quadro K4000        Off  | 00000000:02:00.0  On |                  N/A |\n| 30%   38C    P8    11W /  87W |    419MiB /  3010MiB |      3%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  Quadro K4000        Off  | 00000000:81:00.0 Off |                  N/A |\n| 30%   33C    P8    10W /  87W |      1MiB /  3018MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   2  Quadro K4000        Off  | 00000000:82:00.0 Off |                  N/A |\n| 30%   32C    P8    10W /  87W |      1MiB /  3018MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0      1974      G   /usr/lib/xorg/Xorg                           210MiB |\n|    0      2955      G   compiz                                       180MiB |\n|    0      4925      G   /usr/bin/nvidia-settings                      24MiB |\n+-----------------------------------------------------------------------------+\n\n</code></pre>\n<pre><code>nvcc --version\nnvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2015 NVIDIA Corporation\nBuilt on Tue_Aug_11_14:27:32_CDT_2015\nCuda compilation tools, release 7.5, V7.5.17\n\nls -lah /usr/local/cuda\nlrwxrwxrwx 1 root root 8 Oct  3 08:35 /usr/local/cuda -&gt; cuda-9.0\n\n\n</code></pre>", "body_text": "\ud83d\udc1b Bug\nWhen I want to import caffe2.pytho.core, I get a Segmentation fault.\nI followed the install guide for ubuntu 16 with prebuilt binaries and also installed nccl, I've been browsing past issues but can't find a solution.\nplease help me\nTo Reproduce\nSteps to reproduce the behavior:\n\nInstall NCCL 2.3.5\nconda install -c caffe2 caffe2-cuda9.0-cudnn7\nimport caffe2.python.core\n\nERROR :\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\nSegmentation fault (core dumped)\n\nEnvironment\nuname -a\nLinux realAI 4.4.0-131-generic #157-Ubuntu SMP Thu Jul 12 15:51:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\nFollowed : \nCmake : I installed with anaconda I can't find the cmake output\nwhich python\n/home/mputtnam/anaconda3/bin/python\n\nwhich pip\n/home/mputtnam/anaconda3/bin/pip\n\necho $PYTHONPATH\n<blank>\n\nnvidia-smi\nThu Oct  4 08:35:22 2018\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 396.54                 Driver Version: 396.54                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Quadro K4000        Off  | 00000000:02:00.0  On |                  N/A |\n| 30%   38C    P8    11W /  87W |    419MiB /  3010MiB |      3%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  Quadro K4000        Off  | 00000000:81:00.0 Off |                  N/A |\n| 30%   33C    P8    10W /  87W |      1MiB /  3018MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   2  Quadro K4000        Off  | 00000000:82:00.0 Off |                  N/A |\n| 30%   32C    P8    10W /  87W |      1MiB /  3018MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0      1974      G   /usr/lib/xorg/Xorg                           210MiB |\n|    0      2955      G   compiz                                       180MiB |\n|    0      4925      G   /usr/bin/nvidia-settings                      24MiB |\n+-----------------------------------------------------------------------------+\n\n\nnvcc --version\nnvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2015 NVIDIA Corporation\nBuilt on Tue_Aug_11_14:27:32_CDT_2015\nCuda compilation tools, release 7.5, V7.5.17\n\nls -lah /usr/local/cuda\nlrwxrwxrwx 1 root root 8 Oct  3 08:35 /usr/local/cuda -> cuda-9.0", "body": "## \ud83d\udc1b Bug\r\n\r\nWhen I want to import caffe2.pytho.core, I get a Segmentation fault.\r\n\r\nI followed the install guide for ubuntu 16 with prebuilt binaries and also installed nccl, I've been browsing past issues but can't find a solution.\r\n\r\nplease help me\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Install NCCL 2.3.5\r\n2. conda install -c caffe2 caffe2-cuda9.0-cudnn7\r\n3. import caffe2.python.core\r\n\r\nERROR : \r\n```\r\nWARNING:root:This caffe2 python run does not have GPU support. Will run in CPU only mode.\r\nSegmentation fault (core dumped)\r\n```\r\n\r\n\r\n## Environment\r\n\r\n```\r\nuname -a\r\nLinux realAI 4.4.0-131-generic #157-Ubuntu SMP Thu Jul 12 15:51:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\nFollowed : [](https://caffe2.ai/docs/getting-started.html?platform=ubuntu&configuration=prebuilt)\r\n\r\nCmake : I installed with anaconda I can't find the cmake output\r\n\r\n```\r\nwhich python\r\n/home/mputtnam/anaconda3/bin/python\r\n\r\nwhich pip\r\n/home/mputtnam/anaconda3/bin/pip\r\n\r\necho $PYTHONPATH\r\n<blank>\r\n```\r\n\r\n```\r\nnvidia-smi\r\nThu Oct  4 08:35:22 2018\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 396.54                 Driver Version: 396.54                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Quadro K4000        Off  | 00000000:02:00.0  On |                  N/A |\r\n| 30%   38C    P8    11W /  87W |    419MiB /  3010MiB |      3%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   1  Quadro K4000        Off  | 00000000:81:00.0 Off |                  N/A |\r\n| 30%   33C    P8    10W /  87W |      1MiB /  3018MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   2  Quadro K4000        Off  | 00000000:82:00.0 Off |                  N/A |\r\n| 30%   32C    P8    10W /  87W |      1MiB /  3018MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n\r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0      1974      G   /usr/lib/xorg/Xorg                           210MiB |\r\n|    0      2955      G   compiz                                       180MiB |\r\n|    0      4925      G   /usr/bin/nvidia-settings                      24MiB |\r\n+-----------------------------------------------------------------------------+\r\n\r\n```\r\n```\r\nnvcc --version\r\nnvcc: NVIDIA (R) Cuda compiler driver\r\nCopyright (c) 2005-2015 NVIDIA Corporation\r\nBuilt on Tue_Aug_11_14:27:32_CDT_2015\r\nCuda compilation tools, release 7.5, V7.5.17\r\n\r\nls -lah /usr/local/cuda\r\nlrwxrwxrwx 1 root root 8 Oct  3 08:35 /usr/local/cuda -> cuda-9.0\r\n\r\n\r\n```"}
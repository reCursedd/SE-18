{"url": "https://api.github.com/repos/pytorch/pytorch/issues/680", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/680/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/680/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/680/events", "html_url": "https://github.com/pytorch/pytorch/issues/680", "id": 204869386, "node_id": "MDU6SXNzdWUyMDQ4NjkzODY=", "number": 680, "title": "Low CPU utilization on ImageNet example", "user": {"login": "nadavbh12", "id": 14809804, "node_id": "MDQ6VXNlcjE0ODA5ODA0", "avatar_url": "https://avatars1.githubusercontent.com/u/14809804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nadavbh12", "html_url": "https://github.com/nadavbh12", "followers_url": "https://api.github.com/users/nadavbh12/followers", "following_url": "https://api.github.com/users/nadavbh12/following{/other_user}", "gists_url": "https://api.github.com/users/nadavbh12/gists{/gist_id}", "starred_url": "https://api.github.com/users/nadavbh12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nadavbh12/subscriptions", "organizations_url": "https://api.github.com/users/nadavbh12/orgs", "repos_url": "https://api.github.com/users/nadavbh12/repos", "events_url": "https://api.github.com/users/nadavbh12/events{/privacy}", "received_events_url": "https://api.github.com/users/nadavbh12/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-02-02T13:13:55Z", "updated_at": "2017-02-02T17:12:02Z", "closed_at": "2017-02-02T13:40:41Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I'm getting very low utilization on my CPUs on the ImageNet sample code using AlexNet.<br>\nSo it took me 2 days to reach epoch 5 using two Titans.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">=</span><span class=\"pl-k\">&gt;</span> creating model <span class=\"pl-s\"><span class=\"pl-pds\">'</span>alexnet<span class=\"pl-pds\">'</span></span>\nEpoch: [<span class=\"pl-c1\">0</span>][<span class=\"pl-c1\">0</span><span class=\"pl-k\">/</span><span class=\"pl-c1\">5005</span>]\tTime <span class=\"pl-c1\">48.842</span> (<span class=\"pl-c1\">48.842</span>)\tData <span class=\"pl-c1\">45.054</span> (<span class=\"pl-c1\">45.054</span>)\tLoss <span class=\"pl-c1\">6.9073</span> (<span class=\"pl-c1\">6.9073</span>)\tPrec<span class=\"pl-k\">@</span><span class=\"pl-c1\">1</span> <span class=\"pl-c1\">0.000</span> (<span class=\"pl-c1\">0.000</span>)\tPrec<span class=\"pl-k\">@</span><span class=\"pl-c1\">5</span> <span class=\"pl-c1\">0.000</span> (<span class=\"pl-c1\">0.000</span>)\nEpoch: [<span class=\"pl-c1\">0</span>][<span class=\"pl-c1\">10</span><span class=\"pl-k\">/</span><span class=\"pl-c1\">5005</span>]\tTime <span class=\"pl-c1\">22.424</span> (<span class=\"pl-c1\">7.498</span>)\tData <span class=\"pl-c1\">22.372</span> (<span class=\"pl-c1\">7.070</span>)\tLoss <span class=\"pl-c1\">6.9065</span> (<span class=\"pl-c1\">6.9074</span>)\tPrec<span class=\"pl-k\">@</span><span class=\"pl-c1\">1</span> <span class=\"pl-c1\">0.000</span> (<span class=\"pl-c1\">0.142</span>)\tPrec<span class=\"pl-k\">@</span><span class=\"pl-c1\">5</span> <span class=\"pl-c1\">1.172</span> (<span class=\"pl-c1\">0.533</span>)\nEpoch: [<span class=\"pl-c1\">0</span>][<span class=\"pl-c1\">20</span><span class=\"pl-k\">/</span><span class=\"pl-c1\">5005</span>]\tTime <span class=\"pl-c1\">10.452</span> (<span class=\"pl-c1\">5.893</span>)\tData <span class=\"pl-c1\">10.404</span> (<span class=\"pl-c1\">5.632</span>)\tLoss <span class=\"pl-c1\">6.9075</span> (<span class=\"pl-c1\">6.9076</span>)\tPrec<span class=\"pl-k\">@</span><span class=\"pl-c1\">1</span> <span class=\"pl-c1\">0.391</span> (<span class=\"pl-c1\">0.149</span>)\tPrec<span class=\"pl-k\">@</span><span class=\"pl-c1\">5</span> <span class=\"pl-c1\">1.562</span> (<span class=\"pl-c1\">0.446</span>)</pre></div>\n<p>I see that only 2 or 3 out of my 12 cores are working.</p>\n<p>Ubuntu 14.04, Cuda 8.0, python 2.7.12, CPU i7-5930K.<br>\nInstalled using Conda. Then re-installed from source.<br>\nBoth exhibit same problem.</p>", "body_text": "I'm getting very low utilization on my CPUs on the ImageNet sample code using AlexNet.\nSo it took me 2 days to reach epoch 5 using two Titans.\n=> creating model 'alexnet'\nEpoch: [0][0/5005]\tTime 48.842 (48.842)\tData 45.054 (45.054)\tLoss 6.9073 (6.9073)\tPrec@1 0.000 (0.000)\tPrec@5 0.000 (0.000)\nEpoch: [0][10/5005]\tTime 22.424 (7.498)\tData 22.372 (7.070)\tLoss 6.9065 (6.9074)\tPrec@1 0.000 (0.142)\tPrec@5 1.172 (0.533)\nEpoch: [0][20/5005]\tTime 10.452 (5.893)\tData 10.404 (5.632)\tLoss 6.9075 (6.9076)\tPrec@1 0.391 (0.149)\tPrec@5 1.562 (0.446)\nI see that only 2 or 3 out of my 12 cores are working.\nUbuntu 14.04, Cuda 8.0, python 2.7.12, CPU i7-5930K.\nInstalled using Conda. Then re-installed from source.\nBoth exhibit same problem.", "body": "I'm getting very low utilization on my CPUs on the ImageNet sample code using AlexNet.\r\nSo it took me 2 days to reach epoch 5 using two Titans.\r\n```main.py -a alexnet --lr 0.01 ../../datasets/imagenet2012 --workers=10\r\n=> creating model 'alexnet'\r\nEpoch: [0][0/5005]\tTime 48.842 (48.842)\tData 45.054 (45.054)\tLoss 6.9073 (6.9073)\tPrec@1 0.000 (0.000)\tPrec@5 0.000 (0.000)\r\nEpoch: [0][10/5005]\tTime 22.424 (7.498)\tData 22.372 (7.070)\tLoss 6.9065 (6.9074)\tPrec@1 0.000 (0.142)\tPrec@5 1.172 (0.533)\r\nEpoch: [0][20/5005]\tTime 10.452 (5.893)\tData 10.404 (5.632)\tLoss 6.9075 (6.9076)\tPrec@1 0.391 (0.149)\tPrec@5 1.562 (0.446)\r\n```\r\nI see that only 2 or 3 out of my 12 cores are working.\r\n\r\nUbuntu 14.04, Cuda 8.0, python 2.7.12, CPU i7-5930K.\r\nInstalled using Conda. Then re-installed from source.\r\nBoth exhibit same problem.\r\n"}
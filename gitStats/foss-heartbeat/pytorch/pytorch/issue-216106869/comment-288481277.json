{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/288481277", "html_url": "https://github.com/pytorch/pytorch/pull/1061#issuecomment-288481277", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1061", "id": 288481277, "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODQ4MTI3Nw==", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-22T17:44:15Z", "updated_at": "2017-03-22T17:44:15Z", "author_association": "MEMBER", "body_html": "<p>Over here, I wrote a trace Function that correctly computes it for non-square matrices as well:<br>\n<a href=\"https://discuss.pytorch.org/t/function-for-trace/1015/2?u=smth\" rel=\"nofollow\">https://discuss.pytorch.org/t/function-for-trace/1015/2?u=smth</a></p>\n<pre><code>class CustomTrace(torch.autograd.Function):\n    \n    def forward(self, input):\n        self.isize = input.size()\n        return input.new([torch.trace(input)])\n    \n    def backward(self, grad_output):\n        isize = self.isize\n        grad_input = grad_output.new(isize).copy_(torch.eye(*isize))\n        grad_input.mul_(grad_output[0])\n        return grad_input\n</code></pre>", "body_text": "Over here, I wrote a trace Function that correctly computes it for non-square matrices as well:\nhttps://discuss.pytorch.org/t/function-for-trace/1015/2?u=smth\nclass CustomTrace(torch.autograd.Function):\n    \n    def forward(self, input):\n        self.isize = input.size()\n        return input.new([torch.trace(input)])\n    \n    def backward(self, grad_output):\n        isize = self.isize\n        grad_input = grad_output.new(isize).copy_(torch.eye(*isize))\n        grad_input.mul_(grad_output[0])\n        return grad_input", "body": "Over here, I wrote a trace Function that correctly computes it for non-square matrices as well:\r\nhttps://discuss.pytorch.org/t/function-for-trace/1015/2?u=smth\r\n\r\n```\r\nclass CustomTrace(torch.autograd.Function):\r\n    \r\n    def forward(self, input):\r\n        self.isize = input.size()\r\n        return input.new([torch.trace(input)])\r\n    \r\n    def backward(self, grad_output):\r\n        isize = self.isize\r\n        grad_input = grad_output.new(isize).copy_(torch.eye(*isize))\r\n        grad_input.mul_(grad_output[0])\r\n        return grad_input\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/226526057", "pull_request_review_id": 166369796, "id": 226526057, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjUyNjA1Nw==", "diff_hunk": "@@ -140,6 +139,15 @@ ENDIF()\n INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})\n \n ADD_LIBRARY(THD STATIC ${all_cpp})\n+\n+ADD_DEPENDENCIES(THD caffe2)\n+target_include_directories(THD PRIVATE\n+  ${CMAKE_SOURCE_DIR}/aten/src/TH # provides \"THAllocator.h\" to THCGeneral.h\n+  ${CMAKE_BINARY_DIR}/aten/src # provides \"ATen/TypeExtendedInterface.h\" to ATen.h\n+  ${CMAKE_BINARY_DIR}/caffe2/aten/src # provides <TH/THGeneral.h> to THC.h\n+  ${CMAKE_BINARY_DIR}/caffe2/aten/src/THC # provides \"THCGeneral.h\" to THC.h\n+  )", "path": "torch/lib/THD/CMakeLists.txt", "position": 61, "original_position": 19, "commit_id": "d7ec1a6afbb9ad2864826edaf901d1ab0a33932d", "original_commit_id": "c83a91952a5464a9830934bebec3a5fd968f6df8", "user": {"login": "soumith", "id": 1310570, "node_id": "MDQ6VXNlcjEzMTA1NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1310570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soumith", "html_url": "https://github.com/soumith", "followers_url": "https://api.github.com/users/soumith/followers", "following_url": "https://api.github.com/users/soumith/following{/other_user}", "gists_url": "https://api.github.com/users/soumith/gists{/gist_id}", "starred_url": "https://api.github.com/users/soumith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soumith/subscriptions", "organizations_url": "https://api.github.com/users/soumith/orgs", "repos_url": "https://api.github.com/users/soumith/repos", "events_url": "https://api.github.com/users/soumith/events{/privacy}", "received_events_url": "https://api.github.com/users/soumith/received_events", "type": "User", "site_admin": false}, "body": "what Ed is referring to, and what I mentioned with my comments before is that it's the responsibility of `caffe2` cmake target to automatically include these directories when THD is being compiled, because you declared that THD depends on `caffe2` target via `ADD_DEPENDENCIES(THD caffe2)`", "created_at": "2018-10-19T03:29:50Z", "updated_at": "2018-11-23T15:53:17Z", "html_url": "https://github.com/pytorch/pytorch/pull/12775#discussion_r226526057", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/12775", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/226526057"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/12775#discussion_r226526057"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/12775"}}, "body_html": "<p>what Ed is referring to, and what I mentioned with my comments before is that it's the responsibility of <code>caffe2</code> cmake target to automatically include these directories when THD is being compiled, because you declared that THD depends on <code>caffe2</code> target via <code>ADD_DEPENDENCIES(THD caffe2)</code></p>", "body_text": "what Ed is referring to, and what I mentioned with my comments before is that it's the responsibility of caffe2 cmake target to automatically include these directories when THD is being compiled, because you declared that THD depends on caffe2 target via ADD_DEPENDENCIES(THD caffe2)", "in_reply_to_id": 226510649}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/434881809", "html_url": "https://github.com/pytorch/pytorch/issues/13192#issuecomment-434881809", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/13192", "id": 434881809, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDg4MTgwOQ==", "user": {"login": "jjsjann123", "id": 3709243, "node_id": "MDQ6VXNlcjM3MDkyNDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/3709243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jjsjann123", "html_url": "https://github.com/jjsjann123", "followers_url": "https://api.github.com/users/jjsjann123/followers", "following_url": "https://api.github.com/users/jjsjann123/following{/other_user}", "gists_url": "https://api.github.com/users/jjsjann123/gists{/gist_id}", "starred_url": "https://api.github.com/users/jjsjann123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jjsjann123/subscriptions", "organizations_url": "https://api.github.com/users/jjsjann123/orgs", "repos_url": "https://api.github.com/users/jjsjann123/repos", "events_url": "https://api.github.com/users/jjsjann123/events{/privacy}", "received_events_url": "https://api.github.com/users/jjsjann123/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-31T23:27:50Z", "updated_at": "2018-10-31T23:27:50Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"376195168\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/13435\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/13435/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/13435\">#13435</a> has been issued.<br>\nGot expected improvements on the old test cases (attached below). This is draw on a modified code path, since in the PR, the original variance/std kernel has been removed.</p>\n<p>I did notice that the new kernel has regression on cases where the reduction is applied on the middle dimension (XXXXOXXXX) where it has been surrounded with enough length on both direction. This gives the old kernel a good launch configure and outperforms reduction kernel, indicating that reduction kernel could use better heuristics picking the contig kernel over the non-contig one. As well as fine tuning launch configures.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/3709243/47824272-4e308380-dd29-11e8-9a51-2542cf4c7f58.png\"><img src=\"https://user-images.githubusercontent.com/3709243/47824272-4e308380-dd29-11e8-9a51-2542cf4c7f58.png\" alt=\"perf_compare\" style=\"max-width:100%;\"></a></p>", "body_text": "#13435 has been issued.\nGot expected improvements on the old test cases (attached below). This is draw on a modified code path, since in the PR, the original variance/std kernel has been removed.\nI did notice that the new kernel has regression on cases where the reduction is applied on the middle dimension (XXXXOXXXX) where it has been surrounded with enough length on both direction. This gives the old kernel a good launch configure and outperforms reduction kernel, indicating that reduction kernel could use better heuristics picking the contig kernel over the non-contig one. As well as fine tuning launch configures.", "body": "#13435 has been issued.\r\nGot expected improvements on the old test cases (attached below). This is draw on a modified code path, since in the PR, the original variance/std kernel has been removed.\r\n\r\nI did notice that the new kernel has regression on cases where the reduction is applied on the middle dimension (XXXXOXXXX) where it has been surrounded with enough length on both direction. This gives the old kernel a good launch configure and outperforms reduction kernel, indicating that reduction kernel could use better heuristics picking the contig kernel over the non-contig one. As well as fine tuning launch configures.\r\n\r\n![perf_compare](https://user-images.githubusercontent.com/3709243/47824272-4e308380-dd29-11e8-9a51-2542cf4c7f58.png)\r\n"}
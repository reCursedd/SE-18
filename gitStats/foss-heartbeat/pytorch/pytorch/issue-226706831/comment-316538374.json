{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/316538374", "html_url": "https://github.com/pytorch/pytorch/pull/1492#issuecomment-316538374", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1492", "id": 316538374, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjUzODM3NA==", "user": {"login": "jekbradbury", "id": 11729078, "node_id": "MDQ6VXNlcjExNzI5MDc4", "avatar_url": "https://avatars2.githubusercontent.com/u/11729078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jekbradbury", "html_url": "https://github.com/jekbradbury", "followers_url": "https://api.github.com/users/jekbradbury/followers", "following_url": "https://api.github.com/users/jekbradbury/following{/other_user}", "gists_url": "https://api.github.com/users/jekbradbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/jekbradbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jekbradbury/subscriptions", "organizations_url": "https://api.github.com/users/jekbradbury/orgs", "repos_url": "https://api.github.com/users/jekbradbury/repos", "events_url": "https://api.github.com/users/jekbradbury/events{/privacy}", "received_events_url": "https://api.github.com/users/jekbradbury/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-19T22:32:26Z", "updated_at": "2017-07-19T22:48:09Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I'm a little confused -- I remembered the <code>keepdim</code> default as having changed to <code>False</code> and that's the behavior on current master but above it says \"the keepdim default is now True\". It's clear that <code>keepdim=False</code> is necessary for behavior like <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"193133052\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/289\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/289/hovercard?comment_id=298705616&amp;comment_type=issue_comment\" href=\"https://github.com/pytorch/pytorch/issues/289#issuecomment-298705616\">#289 (comment)</a>, but that wasn't possible in 0.1.12 so it's ok to require the kwarg. With <code>keepdim=False</code> as default the fairly common 0.1.12 patterns <code>var2 = var1.sum(dim); var2.expand_as(var1)</code> and <code>var2 = var1.sum(dim); var2.squeeze(dim)</code> both break, the latter without a Python traceback.</p>\n<p>EDIT: the \"True\" comment is a typo, and there's a depwarn <code>torch.utils.backcompat.keepdim_warning.enabled = True</code> so that should cover the backwards compatibility concerns. Thanks Soumith for staying on top of these things and sorry for the noise.</p>", "body_text": "I'm a little confused -- I remembered the keepdim default as having changed to False and that's the behavior on current master but above it says \"the keepdim default is now True\". It's clear that keepdim=False is necessary for behavior like #289 (comment), but that wasn't possible in 0.1.12 so it's ok to require the kwarg. With keepdim=False as default the fairly common 0.1.12 patterns var2 = var1.sum(dim); var2.expand_as(var1) and var2 = var1.sum(dim); var2.squeeze(dim) both break, the latter without a Python traceback.\nEDIT: the \"True\" comment is a typo, and there's a depwarn torch.utils.backcompat.keepdim_warning.enabled = True so that should cover the backwards compatibility concerns. Thanks Soumith for staying on top of these things and sorry for the noise.", "body": "I'm a little confused -- I remembered the `keepdim` default as having changed to `False` and that's the behavior on current master but above it says \"the keepdim default is now True\". It's clear that `keepdim=False` is necessary for behavior like https://github.com/pytorch/pytorch/issues/289#issuecomment-298705616, but that wasn't possible in 0.1.12 so it's ok to require the kwarg. With `keepdim=False` as default the fairly common 0.1.12 patterns `var2 = var1.sum(dim); var2.expand_as(var1)` and `var2 = var1.sum(dim); var2.squeeze(dim)` both break, the latter without a Python traceback.\r\n\r\nEDIT: the \"True\" comment is a typo, and there's a depwarn `torch.utils.backcompat.keepdim_warning.enabled = True` so that should cover the backwards compatibility concerns. Thanks Soumith for staying on top of these things and sorry for the noise."}
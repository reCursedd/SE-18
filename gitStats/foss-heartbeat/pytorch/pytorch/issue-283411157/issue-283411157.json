{"url": "https://api.github.com/repos/pytorch/pytorch/issues/4262", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/4262/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/4262/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/4262/events", "html_url": "https://github.com/pytorch/pytorch/pull/4262", "id": 283411157, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU5MzAzODI3", "number": 4262, "title": "Ensure gamma samples are positive", "user": {"login": "fritzo", "id": 648532, "node_id": "MDQ6VXNlcjY0ODUzMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/648532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fritzo", "html_url": "https://github.com/fritzo", "followers_url": "https://api.github.com/users/fritzo/followers", "following_url": "https://api.github.com/users/fritzo/following{/other_user}", "gists_url": "https://api.github.com/users/fritzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/fritzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fritzo/subscriptions", "organizations_url": "https://api.github.com/users/fritzo/orgs", "repos_url": "https://api.github.com/users/fritzo/repos", "events_url": "https://api.github.com/users/fritzo/events{/privacy}", "received_events_url": "https://api.github.com/users/fritzo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-20T00:20:12Z", "updated_at": "2018-01-09T15:32:21Z", "closed_at": "2017-12-20T09:17:32Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/4262", "html_url": "https://github.com/pytorch/pytorch/pull/4262", "diff_url": "https://github.com/pytorch/pytorch/pull/4262.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/4262.patch"}, "body_html": "<p>This ensures random Gamma samples are positive by clamping results to at least <code>DBL_MIN</code> or <code>FLT_MIN</code>. This is needed to avoid NANs in <code>Beta</code> and <code>Dirichlet</code> samples for small <code>alpha</code> (e.g. &lt; 0.001).</p>\n<p>This is a low-level alternative to <code>Tensor.numpy_dtype()</code> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"283356693\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/4256\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/4256/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/4256\">#4256</a> , which would require a dependency on Numpy's <code>np.finfo</code> in torch.distributions.</p>\n<h2>Tested</h2>\n<ul>\n<li>Added a regression test</li>\n<li>Tested locally with Scipy in Python 2.7</li>\n<li>Tested locally with Scipy in Python 3.6</li>\n</ul>", "body_text": "This ensures random Gamma samples are positive by clamping results to at least DBL_MIN or FLT_MIN. This is needed to avoid NANs in Beta and Dirichlet samples for small alpha (e.g. < 0.001).\nThis is a low-level alternative to Tensor.numpy_dtype() in #4256 , which would require a dependency on Numpy's np.finfo in torch.distributions.\nTested\n\nAdded a regression test\nTested locally with Scipy in Python 2.7\nTested locally with Scipy in Python 3.6", "body": "This ensures random Gamma samples are positive by clamping results to at least `DBL_MIN` or `FLT_MIN`. This is needed to avoid NANs in `Beta` and `Dirichlet` samples for small `alpha` (e.g. < 0.001).\r\n\r\nThis is a low-level alternative to `Tensor.numpy_dtype()` in https://github.com/pytorch/pytorch/pull/4256 , which would require a dependency on Numpy's `np.finfo` in torch.distributions.\r\n\r\n## Tested\r\n\r\n- Added a regression test\r\n- Tested locally with Scipy in Python 2.7\r\n- Tested locally with Scipy in Python 3.6"}
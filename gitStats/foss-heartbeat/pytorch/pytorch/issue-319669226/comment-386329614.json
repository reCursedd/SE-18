{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/386329614", "html_url": "https://github.com/pytorch/pytorch/pull/7190#issuecomment-386329614", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7190", "id": 386329614, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjMyOTYxNA==", "user": {"login": "cpuhrsch", "id": 1716488, "node_id": "MDQ6VXNlcjE3MTY0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1716488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpuhrsch", "html_url": "https://github.com/cpuhrsch", "followers_url": "https://api.github.com/users/cpuhrsch/followers", "following_url": "https://api.github.com/users/cpuhrsch/following{/other_user}", "gists_url": "https://api.github.com/users/cpuhrsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpuhrsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpuhrsch/subscriptions", "organizations_url": "https://api.github.com/users/cpuhrsch/orgs", "repos_url": "https://api.github.com/users/cpuhrsch/repos", "events_url": "https://api.github.com/users/cpuhrsch/events{/privacy}", "received_events_url": "https://api.github.com/users/cpuhrsch/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-03T15:11:10Z", "updated_at": "2018-05-03T15:12:02Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15994775\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/shibatch\">@shibatch</a>!</p>\n<p>I updated the PR. Right now I'm still seeing</p>\n<pre><code>+ ninja install -j80\n[180/215] Building CXX object src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o\nFAILED: src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o\n/private/home/cpuhrsch/ccache/lib/c++  -DATen_EXPORTS -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DTH_BLAS_MKL -DTH_INDEX_BASE=0 -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I/private/home\n/cpuhrsch/miniconda2/include -I../src/TH -I../src/THC -Isrc/TH -Isrc/THC -I../src/THS -I../src/THCS -Isrc/THS -Isrc/THCS -I../src -Isrc -I../src/THNN -I../src/THCUNN -I../src/ATen/.. -Isrc/ATen -isystem src/ATen/contrib/sleef/include -I../../third_party/t\nbb/include -I/private/home/cpuhrsch/dev/pytorch/third_party/cpuinfo/include -msse3 -msse4.1 -msse4.2   --std=c++11  -D_FORCE_INLINES -D_MWAITXINTRIN_H_INCLUDED -D__STRICT_ANSI__ -fopenmp -Wno-ignored-qualifiers -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DE\nFINITION -O3  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_SSE2 -DUSE_SSE4_1 -DUSE_SSE4_2 -DUSE_SSE3 -DUSE_AVX -DUSE_AVX2 -Wall -Wextra -fexceptions -Wno-missing-field-initializers -Wno-type-limits -Wno-unused-parameter -Wno-unknown-pragmas -std=gnu++11 -O3 -mavx2\n-DCPU_CAPABILITY=AVX2 -DCPU_CAPABILITY_AVX2 -MD -MT src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o -MF src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o.d -o src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel\n.cpp.AVX2.cpp.o -c src/ATen/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp\nIn file included from ../src/ATen/cpu/vec256/vec256.h:6:0,\n                 from src/ATen/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp:7:\n../src/ATen/cpu/vec256/vec256_float.h:5:19: fatal error: sleef.h: No such file or directory\ncompilation terminated.\n[181/215] Building CXX object src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o\nFAILED: src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o\n/private/home/cpuhrsch/ccache/lib/c++  -DATen_EXPORTS -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DTH_BLAS_MKL -DTH_INDEX_BASE=0 -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I/private/home\n/cpuhrsch/miniconda2/include -I../src/TH -I../src/THC -Isrc/TH -Isrc/THC -I../src/THS -I../src/THCS -Isrc/THS -Isrc/THCS -I../src -Isrc -I../src/THNN -I../src/THCUNN -I../src/ATen/.. -Isrc/ATen -isystem src/ATen/contrib/sleef/include -I../../third_party/t\nbb/include -I/private/home/cpuhrsch/dev/pytorch/third_party/cpuinfo/include -msse3 -msse4.1 -msse4.2   --std=c++11  -D_FORCE_INLINES -D_MWAITXINTRIN_H_INCLUDED -D__STRICT_ANSI__ -fopenmp -Wno-ignored-qualifiers -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DE\nFINITION -O3  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_SSE2 -DUSE_SSE4_1 -DUSE_SSE4_2 -DUSE_SSE3 -DUSE_AVX -DUSE_AVX2 -Wall -Wextra -fexceptions -Wno-missing-field-initializers -Wno-type-limits -Wno-unused-parameter -Wno-unknown-pragmas -std=gnu++11 -O3 -mavx2\n-DCPU_CAPABILITY=AVX2 -DCPU_CAPABILITY_AVX2 -MD -MT src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o -MF src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o.d -o src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKer\nnel.cpp.AVX2.cpp.o -c src/ATen/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp\nIn file included from ../src/ATen/cpu/vec256/vec256.h:6:0,\n                 from src/ATen/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp:10:\n../src/ATen/cpu/vec256/vec256_float.h:5:19: fatal error: sleef.h: No such file or directory\ncompilation terminated.\n</code></pre>\n<p>This is the diff</p>\n<pre><code>diff --git a/aten/src/ATen/CMakeLists.txt b/aten/src/ATen/CMakeLists.txt\nindex b4637e1..167297a 100644\n--- a/aten/src/ATen/CMakeLists.txt\n+++ b/aten/src/ATen/CMakeLists.txt\n@@ -1,4 +1,4 @@\n-CMAKE_MINIMUM_REQUIRED(VERSION 2.8)\n+CMAKE_MINIMUM_REQUIRED(VERSION 3.4.3)\n SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake ${CMAKE_MODULE_PATH})\n\n # avoid some cmake warnings\n@@ -372,8 +372,13 @@ TARGET_LINK_LIBRARIES(ATen cpuinfo)\n\n # ---[ Configure SLEEF\n IF(NOT TARGET sleef)\n-  add_subdirectory(\"cpu/sleef\")\n-  include_directories(${CMAKE_BINARY_DIR}/include)\n+  include(ExternalProject)\n+  ExternalProject_Add(libsleef\n+    SOURCE_DIR \"${PROJECT_SOURCE_DIR}/../third_party/sleef\"\n+    CMAKE_ARGS -DBUILD_DFT=FALSE -DBUILD_SHARED_LIBS=FALSE -DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef\n+  )\n+  include_directories(SYSTEM ${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef/include)\n+  link_directories(${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef/lib)\n ENDIF()\n TARGET_LINK_LIBRARIES(ATen sleef)\n</code></pre>\n<p>We use SYSTEM for include_directories as a convention to suppress warnings particular to an external header.</p>", "body_text": "Thanks @shibatch!\nI updated the PR. Right now I'm still seeing\n+ ninja install -j80\n[180/215] Building CXX object src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o\nFAILED: src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o\n/private/home/cpuhrsch/ccache/lib/c++  -DATen_EXPORTS -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DTH_BLAS_MKL -DTH_INDEX_BASE=0 -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I/private/home\n/cpuhrsch/miniconda2/include -I../src/TH -I../src/THC -Isrc/TH -Isrc/THC -I../src/THS -I../src/THCS -Isrc/THS -Isrc/THCS -I../src -Isrc -I../src/THNN -I../src/THCUNN -I../src/ATen/.. -Isrc/ATen -isystem src/ATen/contrib/sleef/include -I../../third_party/t\nbb/include -I/private/home/cpuhrsch/dev/pytorch/third_party/cpuinfo/include -msse3 -msse4.1 -msse4.2   --std=c++11  -D_FORCE_INLINES -D_MWAITXINTRIN_H_INCLUDED -D__STRICT_ANSI__ -fopenmp -Wno-ignored-qualifiers -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DE\nFINITION -O3  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_SSE2 -DUSE_SSE4_1 -DUSE_SSE4_2 -DUSE_SSE3 -DUSE_AVX -DUSE_AVX2 -Wall -Wextra -fexceptions -Wno-missing-field-initializers -Wno-type-limits -Wno-unused-parameter -Wno-unknown-pragmas -std=gnu++11 -O3 -mavx2\n-DCPU_CAPABILITY=AVX2 -DCPU_CAPABILITY_AVX2 -MD -MT src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o -MF src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o.d -o src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel\n.cpp.AVX2.cpp.o -c src/ATen/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp\nIn file included from ../src/ATen/cpu/vec256/vec256.h:6:0,\n                 from src/ATen/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp:7:\n../src/ATen/cpu/vec256/vec256_float.h:5:19: fatal error: sleef.h: No such file or directory\ncompilation terminated.\n[181/215] Building CXX object src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o\nFAILED: src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o\n/private/home/cpuhrsch/ccache/lib/c++  -DATen_EXPORTS -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DTH_BLAS_MKL -DTH_INDEX_BASE=0 -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I/private/home\n/cpuhrsch/miniconda2/include -I../src/TH -I../src/THC -Isrc/TH -Isrc/THC -I../src/THS -I../src/THCS -Isrc/THS -Isrc/THCS -I../src -Isrc -I../src/THNN -I../src/THCUNN -I../src/ATen/.. -Isrc/ATen -isystem src/ATen/contrib/sleef/include -I../../third_party/t\nbb/include -I/private/home/cpuhrsch/dev/pytorch/third_party/cpuinfo/include -msse3 -msse4.1 -msse4.2   --std=c++11  -D_FORCE_INLINES -D_MWAITXINTRIN_H_INCLUDED -D__STRICT_ANSI__ -fopenmp -Wno-ignored-qualifiers -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DE\nFINITION -O3  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_SSE2 -DUSE_SSE4_1 -DUSE_SSE4_2 -DUSE_SSE3 -DUSE_AVX -DUSE_AVX2 -Wall -Wextra -fexceptions -Wno-missing-field-initializers -Wno-type-limits -Wno-unused-parameter -Wno-unknown-pragmas -std=gnu++11 -O3 -mavx2\n-DCPU_CAPABILITY=AVX2 -DCPU_CAPABILITY_AVX2 -MD -MT src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o -MF src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o.d -o src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKer\nnel.cpp.AVX2.cpp.o -c src/ATen/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp\nIn file included from ../src/ATen/cpu/vec256/vec256.h:6:0,\n                 from src/ATen/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp:10:\n../src/ATen/cpu/vec256/vec256_float.h:5:19: fatal error: sleef.h: No such file or directory\ncompilation terminated.\n\nThis is the diff\ndiff --git a/aten/src/ATen/CMakeLists.txt b/aten/src/ATen/CMakeLists.txt\nindex b4637e1..167297a 100644\n--- a/aten/src/ATen/CMakeLists.txt\n+++ b/aten/src/ATen/CMakeLists.txt\n@@ -1,4 +1,4 @@\n-CMAKE_MINIMUM_REQUIRED(VERSION 2.8)\n+CMAKE_MINIMUM_REQUIRED(VERSION 3.4.3)\n SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake ${CMAKE_MODULE_PATH})\n\n # avoid some cmake warnings\n@@ -372,8 +372,13 @@ TARGET_LINK_LIBRARIES(ATen cpuinfo)\n\n # ---[ Configure SLEEF\n IF(NOT TARGET sleef)\n-  add_subdirectory(\"cpu/sleef\")\n-  include_directories(${CMAKE_BINARY_DIR}/include)\n+  include(ExternalProject)\n+  ExternalProject_Add(libsleef\n+    SOURCE_DIR \"${PROJECT_SOURCE_DIR}/../third_party/sleef\"\n+    CMAKE_ARGS -DBUILD_DFT=FALSE -DBUILD_SHARED_LIBS=FALSE -DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef\n+  )\n+  include_directories(SYSTEM ${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef/include)\n+  link_directories(${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef/lib)\n ENDIF()\n TARGET_LINK_LIBRARIES(ATen sleef)\n\nWe use SYSTEM for include_directories as a convention to suppress warnings particular to an external header.", "body": "Thanks @shibatch!\r\n\r\nI updated the PR. Right now I'm still seeing\r\n\r\n```\r\n+ ninja install -j80\r\n[180/215] Building CXX object src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o\r\nFAILED: src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o\r\n/private/home/cpuhrsch/ccache/lib/c++  -DATen_EXPORTS -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DTH_BLAS_MKL -DTH_INDEX_BASE=0 -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I/private/home\r\n/cpuhrsch/miniconda2/include -I../src/TH -I../src/THC -Isrc/TH -Isrc/THC -I../src/THS -I../src/THCS -Isrc/THS -Isrc/THCS -I../src -Isrc -I../src/THNN -I../src/THCUNN -I../src/ATen/.. -Isrc/ATen -isystem src/ATen/contrib/sleef/include -I../../third_party/t\r\nbb/include -I/private/home/cpuhrsch/dev/pytorch/third_party/cpuinfo/include -msse3 -msse4.1 -msse4.2   --std=c++11  -D_FORCE_INLINES -D_MWAITXINTRIN_H_INCLUDED -D__STRICT_ANSI__ -fopenmp -Wno-ignored-qualifiers -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DE\r\nFINITION -O3  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_SSE2 -DUSE_SSE4_1 -DUSE_SSE4_2 -DUSE_SSE3 -DUSE_AVX -DUSE_AVX2 -Wall -Wextra -fexceptions -Wno-missing-field-initializers -Wno-type-limits -Wno-unused-parameter -Wno-unknown-pragmas -std=gnu++11 -O3 -mavx2\r\n-DCPU_CAPABILITY=AVX2 -DCPU_CAPABILITY_AVX2 -MD -MT src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o -MF src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp.o.d -o src/ATen/CMakeFiles/ATen.dir/native/cpu/UnaryOpsKernel\r\n.cpp.AVX2.cpp.o -c src/ATen/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp\r\nIn file included from ../src/ATen/cpu/vec256/vec256.h:6:0,\r\n                 from src/ATen/native/cpu/UnaryOpsKernel.cpp.AVX2.cpp:7:\r\n../src/ATen/cpu/vec256/vec256_float.h:5:19: fatal error: sleef.h: No such file or directory\r\ncompilation terminated.\r\n[181/215] Building CXX object src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o\r\nFAILED: src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o\r\n/private/home/cpuhrsch/ccache/lib/c++  -DATen_EXPORTS -DCPUINFO_SUPPORTED_PLATFORM=1 -DHAVE_MALLOC_USABLE_SIZE=1 -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DTH_BLAS_MKL -DTH_INDEX_BASE=0 -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I/private/home\r\n/cpuhrsch/miniconda2/include -I../src/TH -I../src/THC -Isrc/TH -Isrc/THC -I../src/THS -I../src/THCS -Isrc/THS -Isrc/THCS -I../src -Isrc -I../src/THNN -I../src/THCUNN -I../src/ATen/.. -Isrc/ATen -isystem src/ATen/contrib/sleef/include -I../../third_party/t\r\nbb/include -I/private/home/cpuhrsch/dev/pytorch/third_party/cpuinfo/include -msse3 -msse4.1 -msse4.2   --std=c++11  -D_FORCE_INLINES -D_MWAITXINTRIN_H_INCLUDED -D__STRICT_ANSI__ -fopenmp -Wno-ignored-qualifiers -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DE\r\nFINITION -O3  -fPIC   -DHAVE_GCC_GET_CPUID -DUSE_SSE2 -DUSE_SSE4_1 -DUSE_SSE4_2 -DUSE_SSE3 -DUSE_AVX -DUSE_AVX2 -Wall -Wextra -fexceptions -Wno-missing-field-initializers -Wno-type-limits -Wno-unused-parameter -Wno-unknown-pragmas -std=gnu++11 -O3 -mavx2\r\n-DCPU_CAPABILITY=AVX2 -DCPU_CAPABILITY_AVX2 -MD -MT src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o -MF src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp.o.d -o src/ATen/CMakeFiles/ATen.dir/native/cpu/ReduceOpsKer\r\nnel.cpp.AVX2.cpp.o -c src/ATen/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp\r\nIn file included from ../src/ATen/cpu/vec256/vec256.h:6:0,\r\n                 from src/ATen/native/cpu/ReduceOpsKernel.cpp.AVX2.cpp:10:\r\n../src/ATen/cpu/vec256/vec256_float.h:5:19: fatal error: sleef.h: No such file or directory\r\ncompilation terminated.\r\n```\r\n\r\nThis is the diff\r\n\r\n```\r\ndiff --git a/aten/src/ATen/CMakeLists.txt b/aten/src/ATen/CMakeLists.txt\r\nindex b4637e1..167297a 100644\r\n--- a/aten/src/ATen/CMakeLists.txt\r\n+++ b/aten/src/ATen/CMakeLists.txt\r\n@@ -1,4 +1,4 @@\r\n-CMAKE_MINIMUM_REQUIRED(VERSION 2.8)\r\n+CMAKE_MINIMUM_REQUIRED(VERSION 3.4.3)\r\n SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake ${CMAKE_MODULE_PATH})\r\n\r\n # avoid some cmake warnings\r\n@@ -372,8 +372,13 @@ TARGET_LINK_LIBRARIES(ATen cpuinfo)\r\n\r\n # ---[ Configure SLEEF\r\n IF(NOT TARGET sleef)\r\n-  add_subdirectory(\"cpu/sleef\")\r\n-  include_directories(${CMAKE_BINARY_DIR}/include)\r\n+  include(ExternalProject)\r\n+  ExternalProject_Add(libsleef\r\n+    SOURCE_DIR \"${PROJECT_SOURCE_DIR}/../third_party/sleef\"\r\n+    CMAKE_ARGS -DBUILD_DFT=FALSE -DBUILD_SHARED_LIBS=FALSE -DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef\r\n+  )\r\n+  include_directories(SYSTEM ${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef/include)\r\n+  link_directories(${CMAKE_CURRENT_BINARY_DIR}/contrib/sleef/lib)\r\n ENDIF()\r\n TARGET_LINK_LIBRARIES(ATen sleef)\r\n```\r\n\r\nWe use SYSTEM for include_directories as a convention to suppress warnings particular to an external header."}
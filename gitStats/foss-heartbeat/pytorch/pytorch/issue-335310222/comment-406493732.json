{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/406493732", "html_url": "https://github.com/pytorch/pytorch/pull/8845#issuecomment-406493732", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8845", "id": 406493732, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjQ5MzczMg==", "user": {"login": "kimdwkimdw", "id": 386070, "node_id": "MDQ6VXNlcjM4NjA3MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/386070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kimdwkimdw", "html_url": "https://github.com/kimdwkimdw", "followers_url": "https://api.github.com/users/kimdwkimdw/followers", "following_url": "https://api.github.com/users/kimdwkimdw/following{/other_user}", "gists_url": "https://api.github.com/users/kimdwkimdw/gists{/gist_id}", "starred_url": "https://api.github.com/users/kimdwkimdw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kimdwkimdw/subscriptions", "organizations_url": "https://api.github.com/users/kimdwkimdw/orgs", "repos_url": "https://api.github.com/users/kimdwkimdw/repos", "events_url": "https://api.github.com/users/kimdwkimdw/events{/privacy}", "received_events_url": "https://api.github.com/users/kimdwkimdw/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-20T05:33:01Z", "updated_at": "2018-07-20T05:33:01Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5652049\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zou3519\">@zou3519</a> I'm not sure. But, I don't think that can solve its problem easily.</p>\n<p>Originally, <code>pytorch 0.3.x</code> have all torch functions in <code>torch._C</code> with <code>PyModule_Create</code> and <code>Py_InitModule3</code>.<br>\nHowever, <code>pytorch 0.4.0</code> divided <code>torch._C</code> into multiple <em><em><strong>objects</strong></em></em> like <code>_C._VariableFunctions</code>.</p>\n<p>I think we can think multiple solutions</p>\n<ol>\n<li>Move all code to torch._C gracefully for Python 2 like pytorch 0.3.0.<br>\nAll torch functions and other functions are added with <code>PyModule_AddObject</code>, not <code>Module</code>.</li>\n</ol>\n<p>Too lots of code change are needed</p>\n<ol start=\"2\">\n<li>Make multiple C Extensions and connect them. Then we can use your suggestion</li>\n</ol>\n<pre><code>#if PY_MAJOR_VERSION &gt;= 3\n    m = PyModule_Create(&amp;moduledef);\n#else\n    m = Py_InitModule3(\"themodulename\",\n</code></pre>\n<p>Also too lots of code change are needed</p>\n<ol start=\"3\">\n<li>Merge it, and wait for deprecation of PY2. <a href=\"https://pythonclock.org/\" rel=\"nofollow\">https://pythonclock.org/</a> lol.</li>\n</ol>", "body_text": "@zou3519 I'm not sure. But, I don't think that can solve its problem easily.\nOriginally, pytorch 0.3.x have all torch functions in torch._C with PyModule_Create and Py_InitModule3.\nHowever, pytorch 0.4.0 divided torch._C into multiple objects like _C._VariableFunctions.\nI think we can think multiple solutions\n\nMove all code to torch._C gracefully for Python 2 like pytorch 0.3.0.\nAll torch functions and other functions are added with PyModule_AddObject, not Module.\n\nToo lots of code change are needed\n\nMake multiple C Extensions and connect them. Then we can use your suggestion\n\n#if PY_MAJOR_VERSION >= 3\n    m = PyModule_Create(&moduledef);\n#else\n    m = Py_InitModule3(\"themodulename\",\n\nAlso too lots of code change are needed\n\nMerge it, and wait for deprecation of PY2. https://pythonclock.org/ lol.", "body": "@zou3519 I'm not sure. But, I don't think that can solve its problem easily. \r\n\r\nOriginally, `pytorch 0.3.x` have all torch functions in `torch._C` with `PyModule_Create` and `Py_InitModule3`.\r\nHowever, `pytorch 0.4.0` divided `torch._C` into multiple _***objects***_ like `_C._VariableFunctions`. \r\n\r\nI think we can think multiple solutions\r\n1) Move all code to torch._C gracefully for Python 2 like pytorch 0.3.0.\r\nAll torch functions and other functions are added with `PyModule_AddObject`, not `Module`.\r\n\r\nToo lots of code change are needed\r\n\r\n2) Make multiple C Extensions and connect them. Then we can use your suggestion\r\n```\r\n#if PY_MAJOR_VERSION >= 3\r\n    m = PyModule_Create(&moduledef);\r\n#else\r\n    m = Py_InitModule3(\"themodulename\",\r\n```\r\n\r\nAlso too lots of code change are needed\r\n\r\n3) Merge it, and wait for deprecation of PY2. https://pythonclock.org/ lol."}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/101486382", "pull_request_review_id": 22215382, "id": 101486382, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwMTQ4NjM4Mg==", "diff_hunk": "@@ -7,19 +7,22 @@\n     pass\n \n \n-def RNNReLUCell(input, hidden, w_ih, w_hh, b_ih=None, b_hh=None):\n-    hy = F.relu(F.linear(input, w_ih, b_ih) + F.linear(hidden, w_hh, b_hh))\n+def RNNReLUCell(input, hidden, w_ih, w_hh, b_ih=None, b_hh=None, skip_input=False):\n+    xw_ih = input if skip_input else F.linear(input, w_ih, b_ih)\n+    hy = F.relu(xw_ih + F.linear(hidden, w_hh, b_hh))\n     return hy\n \n \n-def RNNTanhCell(input, hidden, w_ih, w_hh, b_ih=None, b_hh=None):\n-    hy = F.tanh(F.linear(input, w_ih, b_ih) + F.linear(hidden, w_hh, b_hh))\n+def RNNTanhCell(input, hidden, w_ih, w_hh, b_ih=None, b_hh=None, skip_input=False):\n+    xw_ih = input if skip_input else F.linear(input, w_ih, b_ih)\n+    hy = F.tanh(xw_ih + F.linear(hidden, w_hh, b_hh))\n     return hy\n \n \n-def LSTMCell(input, hidden, w_ih, w_hh, b_ih=None, b_hh=None):\n+def LSTMCell(input, hidden, w_ih, w_hh, b_ih=None, b_hh=None, skip_input=False):\n     hx, cx = hidden\n-    gates = F.linear(input, w_ih, b_ih) + F.linear(hx, w_hh, b_hh)\n+    xw_ih = input.repeat(1, 4) if skip_input else F.linear(input, w_ih, b_ih)", "path": "torch/nn/_functions/rnn.py", "position": null, "original_position": 24, "commit_id": "3d1b9b211dc191902b524fd06e2ca85e95cd823f", "original_commit_id": "a72dd1b212470ab246253a9f318b91a33256febd", "user": {"login": "SeanNaren", "id": 6707363, "node_id": "MDQ6VXNlcjY3MDczNjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/6707363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeanNaren", "html_url": "https://github.com/SeanNaren", "followers_url": "https://api.github.com/users/SeanNaren/followers", "following_url": "https://api.github.com/users/SeanNaren/following{/other_user}", "gists_url": "https://api.github.com/users/SeanNaren/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeanNaren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeanNaren/subscriptions", "organizations_url": "https://api.github.com/users/SeanNaren/orgs", "repos_url": "https://api.github.com/users/SeanNaren/repos", "events_url": "https://api.github.com/users/SeanNaren/events{/privacy}", "received_events_url": "https://api.github.com/users/SeanNaren/received_events", "type": "User", "site_admin": false}, "body": "Would that be possible on a tensor that does not have a singleton dimension? I could create the singleton dim and then do the expand, but then the output tensor would need to be contig for me to view it correctly. Let me know if I'm thinking about this wrong!", "created_at": "2017-02-16T10:25:53Z", "updated_at": "2018-11-23T15:32:28Z", "html_url": "https://github.com/pytorch/pytorch/pull/658#discussion_r101486382", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/658", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/101486382"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/658#discussion_r101486382"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/658"}}, "body_html": "<p>Would that be possible on a tensor that does not have a singleton dimension? I could create the singleton dim and then do the expand, but then the output tensor would need to be contig for me to view it correctly. Let me know if I'm thinking about this wrong!</p>", "body_text": "Would that be possible on a tensor that does not have a singleton dimension? I could create the singleton dim and then do the expand, but then the output tensor would need to be contig for me to view it correctly. Let me know if I'm thinking about this wrong!", "in_reply_to_id": 101390546}
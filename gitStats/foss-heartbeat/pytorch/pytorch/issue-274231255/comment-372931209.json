{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/372931209", "html_url": "https://github.com/pytorch/pytorch/issues/3718#issuecomment-372931209", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/3718", "id": 372931209, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjkzMTIwOQ==", "user": {"login": "magic282", "id": 2285145, "node_id": "MDQ6VXNlcjIyODUxNDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2285145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magic282", "html_url": "https://github.com/magic282", "followers_url": "https://api.github.com/users/magic282/followers", "following_url": "https://api.github.com/users/magic282/following{/other_user}", "gists_url": "https://api.github.com/users/magic282/gists{/gist_id}", "starred_url": "https://api.github.com/users/magic282/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magic282/subscriptions", "organizations_url": "https://api.github.com/users/magic282/orgs", "repos_url": "https://api.github.com/users/magic282/repos", "events_url": "https://api.github.com/users/magic282/events{/privacy}", "received_events_url": "https://api.github.com/users/magic282/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-14T07:41:57Z", "updated_at": "2018-03-14T07:41:57Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3637896\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rdspring1\">@rdspring1</a> , I have read your LM code and it is really great job. I am considering to use pytorch <a href=\"http://pytorch.org/docs/master/torch.html?highlight=multinomial#torch.multinomial\" rel=\"nofollow\">multinominal</a> to implement to avoid the cython build.</p>\n<p>Do you think I can just change the code in your repo <a href=\"https://github.com/rdspring1/PyTorch_GBW_LM/blob/master/lm/model.py#L29\">https://github.com/rdspring1/PyTorch_GBW_LM/blob/master/lm/model.py#L29</a><br>\nto <code>torch.multinomial(weights, nsample)</code>, where weights is a uniform distribution (1/vocab_size) with size (batch, vocab_size) and nsample is the <code>hps.num_sampled</code>.</p>\n<p>Do you think this is a correct implementation?</p>\n<p>Thank you.</p>", "body_text": "Hi @rdspring1 , I have read your LM code and it is really great job. I am considering to use pytorch multinominal to implement to avoid the cython build.\nDo you think I can just change the code in your repo https://github.com/rdspring1/PyTorch_GBW_LM/blob/master/lm/model.py#L29\nto torch.multinomial(weights, nsample), where weights is a uniform distribution (1/vocab_size) with size (batch, vocab_size) and nsample is the hps.num_sampled.\nDo you think this is a correct implementation?\nThank you.", "body": "Hi @rdspring1 , I have read your LM code and it is really great job. I am considering to use pytorch [multinominal](http://pytorch.org/docs/master/torch.html?highlight=multinomial#torch.multinomial) to implement to avoid the cython build.\r\n\r\nDo you think I can just change the code in your repo https://github.com/rdspring1/PyTorch_GBW_LM/blob/master/lm/model.py#L29\r\nto `torch.multinomial(weights, nsample)`, where weights is a uniform distribution (1/vocab_size) with size (batch, vocab_size) and nsample is the `hps.num_sampled`.\r\n\r\nDo you think this is a correct implementation?\r\n\r\nThank you."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/5816", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/5816/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/5816/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/5816/events", "html_url": "https://github.com/pytorch/pytorch/issues/5816", "id": 305668190, "node_id": "MDU6SXNzdWUzMDU2NjgxOTA=", "number": 5816, "title": "master fails to build due to '...is ambiguuous' error", "user": {"login": "malmaud", "id": 987837, "node_id": "MDQ6VXNlcjk4NzgzNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/987837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malmaud", "html_url": "https://github.com/malmaud", "followers_url": "https://api.github.com/users/malmaud/followers", "following_url": "https://api.github.com/users/malmaud/following{/other_user}", "gists_url": "https://api.github.com/users/malmaud/gists{/gist_id}", "starred_url": "https://api.github.com/users/malmaud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malmaud/subscriptions", "organizations_url": "https://api.github.com/users/malmaud/orgs", "repos_url": "https://api.github.com/users/malmaud/repos", "events_url": "https://api.github.com/users/malmaud/events{/privacy}", "received_events_url": "https://api.github.com/users/malmaud/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-03-15T18:22:53Z", "updated_at": "2018-03-19T10:07:44Z", "closed_at": "2018-03-16T22:10:37Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Getting an error trying to  build <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/pytorch/pytorch/commit/3084a577ebf7b89f0f42b97cd43157acdbc709ab/hovercard\" href=\"https://github.com/pytorch/pytorch/commit/3084a577ebf7b89f0f42b97cd43157acdbc709ab\"><tt>3084a57</tt></a> from source; <code>master</code> built fine as of a few days ago in my environment.</p>\n<p>Environment info:</p>\n<pre><code>malmaud@devon:~/pytorch$ gcc --version\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.6) 5.4.0 20160609\n\nmalmaud@devon:~/pytorch$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 16.04.2 LTS\nRelease:        16.04\nCodename:       xenial\n</code></pre>\n<p>Error when running <code>python setup.py install</code>:</p>\n<pre><code>[1/3] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\nFAILED: CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\n/usr/bin/c++  -DWITH_CUDA=1 -DWITH_GLOO=1 -DWITH_MPI=1 -D_THD_CORE=1 -I/storage/malmaud/pytorch/torch/lib/tmp_install/include -I/storage/malmaud/cuda-9.1/include -I/storage/malmaud/pytorch/torch/lib/THD/CUDA_SDK_ROOT_DIR-NOTFOUND/common/inc -I/storage/malmaud/pytorch/torch/lib/THD -I/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent -I/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include -I/usr/lib/openmpi/include -I/usr/lib/openmpi/include/openmpi -DTH_INDEX_BASE=0 -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/TH\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THS\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 -fexceptions  -std=c++11 -std=c++11 -O3 -DNDEBUG -fPIC -MD -MT CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o -MF CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o.d -o CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o -c /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp\n/storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::allGather(std::vector&lt;at::Tensor&gt;&amp;, at::Tensor&amp;, THDGroup)\u2019:\n/storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:194:34: error: conversion from \u2018std::size_t {aka long unsigned int}\u2019 to \u2018at::Scalar\u2019 is ambiguous\n     output[i].copy_(recv_buffer[i]);\n                                  ^\nIn file included from /storage/malmaud/pytorch/torch/lib/tmp_install/include/ATen/ATen.h:5:0,\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:3,\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/../DataChannel.hpp:4,\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.hpp:3,\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:1:\n</code></pre>", "body_text": "Getting an error trying to  build 3084a57 from source; master built fine as of a few days ago in my environment.\nEnvironment info:\nmalmaud@devon:~/pytorch$ gcc --version\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.6) 5.4.0 20160609\n\nmalmaud@devon:~/pytorch$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 16.04.2 LTS\nRelease:        16.04\nCodename:       xenial\n\nError when running python setup.py install:\n[1/3] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\nFAILED: CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\n/usr/bin/c++  -DWITH_CUDA=1 -DWITH_GLOO=1 -DWITH_MPI=1 -D_THD_CORE=1 -I/storage/malmaud/pytorch/torch/lib/tmp_install/include -I/storage/malmaud/cuda-9.1/include -I/storage/malmaud/pytorch/torch/lib/THD/CUDA_SDK_ROOT_DIR-NOTFOUND/common/inc -I/storage/malmaud/pytorch/torch/lib/THD -I/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent -I/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include -I/usr/lib/openmpi/include -I/usr/lib/openmpi/include/openmpi -DTH_INDEX_BASE=0 -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/TH\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THS\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 -fexceptions  -std=c++11 -std=c++11 -O3 -DNDEBUG -fPIC -MD -MT CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o -MF CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o.d -o CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o -c /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp\n/storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::allGather(std::vector<at::Tensor>&, at::Tensor&, THDGroup)\u2019:\n/storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:194:34: error: conversion from \u2018std::size_t {aka long unsigned int}\u2019 to \u2018at::Scalar\u2019 is ambiguous\n     output[i].copy_(recv_buffer[i]);\n                                  ^\nIn file included from /storage/malmaud/pytorch/torch/lib/tmp_install/include/ATen/ATen.h:5:0,\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:3,\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/../DataChannel.hpp:4,\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.hpp:3,\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:1:", "body": "Getting an error trying to  build 3084a57 from source; `master` built fine as of a few days ago in my environment.\r\n\r\nEnvironment info:\r\n```\r\nmalmaud@devon:~/pytorch$ gcc --version\r\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.6) 5.4.0 20160609\r\n\r\nmalmaud@devon:~/pytorch$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 16.04.2 LTS\r\nRelease:        16.04\r\nCodename:       xenial\r\n```\r\n\r\nError when running `python setup.py install`:\r\n\r\n```\r\n[1/3] Building CXX object CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\r\nFAILED: CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o\r\n/usr/bin/c++  -DWITH_CUDA=1 -DWITH_GLOO=1 -DWITH_MPI=1 -D_THD_CORE=1 -I/storage/malmaud/pytorch/torch/lib/tmp_install/include -I/storage/malmaud/cuda-9.1/include -I/storage/malmaud/pytorch/torch/lib/THD/CUDA_SDK_ROOT_DIR-NOTFOUND/common/inc -I/storage/malmaud/pytorch/torch/lib/THD -I/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent -I/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include -I/usr/lib/openmpi/include -I/usr/lib/openmpi/include/openmpi -DTH_INDEX_BASE=0 -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/TH\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THS\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/storage/malmaud/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1 -fexceptions  -std=c++11 -std=c++11 -O3 -DNDEBUG -fPIC -MD -MT CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o -MF CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o.d -o CMakeFiles/THD.dir/base/data_channels/DataChannelMPI.cpp.o -c /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp\r\n/storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp: In member function \u2018virtual void thd::DataChannelMPI::allGather(std::vector<at::Tensor>&, at::Tensor&, THDGroup)\u2019:\r\n/storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:194:34: error: conversion from \u2018std::size_t {aka long unsigned int}\u2019 to \u2018at::Scalar\u2019 is ambiguous\r\n     output[i].copy_(recv_buffer[i]);\r\n                                  ^\r\nIn file included from /storage/malmaud/pytorch/torch/lib/tmp_install/include/ATen/ATen.h:5:0,\r\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/../ChannelUtils.hpp:3,\r\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/../DataChannel.hpp:4,\r\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.hpp:3,\r\n                 from /storage/malmaud/pytorch/torch/lib/THD/base/data_channels/DataChannelMPI.cpp:1:\r\n```"}
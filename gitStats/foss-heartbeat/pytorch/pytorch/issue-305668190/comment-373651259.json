{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/373651259", "html_url": "https://github.com/pytorch/pytorch/issues/5816#issuecomment-373651259", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5816", "id": 373651259, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzY1MTI1OQ==", "user": {"login": "geordi", "id": 263425, "node_id": "MDQ6VXNlcjI2MzQyNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/263425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geordi", "html_url": "https://github.com/geordi", "followers_url": "https://api.github.com/users/geordi/followers", "following_url": "https://api.github.com/users/geordi/following{/other_user}", "gists_url": "https://api.github.com/users/geordi/gists{/gist_id}", "starred_url": "https://api.github.com/users/geordi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geordi/subscriptions", "organizations_url": "https://api.github.com/users/geordi/orgs", "repos_url": "https://api.github.com/users/geordi/repos", "events_url": "https://api.github.com/users/geordi/events{/privacy}", "received_events_url": "https://api.github.com/users/geordi/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-16T09:18:34Z", "updated_at": "2018-03-16T09:18:34Z", "author_association": "CONTRIBUTOR", "body_html": "<p>A dirty fix is to change lines <code>194</code>, <code>234</code>from:</p>\n<pre><code>for (std::size_t i = 0; i &lt; output.size(); ++i)\n    output[i].copy_(recv_buffer[i]);\n</code></pre>\n<p>to:</p>\n<pre><code>for (std::size_t i = 0; i &lt; output.size(); ++i) {\n    at::Tensor t = CPU(at::kInt).ones(i);\n    output[i].copy_(recv_buffer[t]);\n}\n</code></pre>\n<p>And change line <code>266</code> from:</p>\n<pre><code>for (std::size_t i = 0; i &lt; input.size(); ++i)\n  send_buffer[i].copy_(input[i]);\n</code></pre>\n<p>to:</p>\n<pre><code>for (std::size_t i = 0; i &lt; input.size(); ++i) {\n  at::Tensor t = CPU(at::kInt).ones( i );\n  send_buffer[t].copy_(input[i]);\n}\n</code></pre>\n<p>I don't have any knowledge of ATen, so it can probably be done in a better way.</p>", "body_text": "A dirty fix is to change lines 194, 234from:\nfor (std::size_t i = 0; i < output.size(); ++i)\n    output[i].copy_(recv_buffer[i]);\n\nto:\nfor (std::size_t i = 0; i < output.size(); ++i) {\n    at::Tensor t = CPU(at::kInt).ones(i);\n    output[i].copy_(recv_buffer[t]);\n}\n\nAnd change line 266 from:\nfor (std::size_t i = 0; i < input.size(); ++i)\n  send_buffer[i].copy_(input[i]);\n\nto:\nfor (std::size_t i = 0; i < input.size(); ++i) {\n  at::Tensor t = CPU(at::kInt).ones( i );\n  send_buffer[t].copy_(input[i]);\n}\n\nI don't have any knowledge of ATen, so it can probably be done in a better way.", "body": "A dirty fix is to change lines `194`, `234`from:\r\n\r\n```\r\nfor (std::size_t i = 0; i < output.size(); ++i)\r\n    output[i].copy_(recv_buffer[i]);\r\n```\r\n\r\nto:\r\n\r\n```\r\nfor (std::size_t i = 0; i < output.size(); ++i) {\r\n    at::Tensor t = CPU(at::kInt).ones(i);\r\n    output[i].copy_(recv_buffer[t]);\r\n}\r\n```\r\n\r\nAnd change line `266` from:\r\n\r\n```\r\nfor (std::size_t i = 0; i < input.size(); ++i)\r\n  send_buffer[i].copy_(input[i]);\r\n```\r\n\r\nto:\r\n\r\n```\r\nfor (std::size_t i = 0; i < input.size(); ++i) {\r\n  at::Tensor t = CPU(at::kInt).ones( i );\r\n  send_buffer[t].copy_(input[i]);\r\n}\r\n```\r\n\r\nI don't have any knowledge of ATen, so it can probably be done in a better way."}
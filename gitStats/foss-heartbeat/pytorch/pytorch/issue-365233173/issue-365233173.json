{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12204", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12204/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12204/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12204/events", "html_url": "https://github.com/pytorch/pytorch/issues/12204", "id": 365233173, "node_id": "MDU6SXNzdWUzNjUyMzMxNzM=", "number": 12204, "title": "[Build] of [1.0] from source failed on macOS High Sierra CPU-only", "user": {"login": "michhar", "id": 13988934, "node_id": "MDQ6VXNlcjEzOTg4OTM0", "avatar_url": "https://avatars0.githubusercontent.com/u/13988934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michhar", "html_url": "https://github.com/michhar", "followers_url": "https://api.github.com/users/michhar/followers", "following_url": "https://api.github.com/users/michhar/following{/other_user}", "gists_url": "https://api.github.com/users/michhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/michhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michhar/subscriptions", "organizations_url": "https://api.github.com/users/michhar/orgs", "repos_url": "https://api.github.com/users/michhar/repos", "events_url": "https://api.github.com/users/michhar/events{/privacy}", "received_events_url": "https://api.github.com/users/michhar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-09-30T15:20:53Z", "updated_at": "2018-10-05T05:09:39Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>Build 1.0 from source (tried today) has failed on CPU-only macOS.  Looks like a linker error, but perhaps something else.  Please help!</p>\n<h2>To Reproduce</h2>\n<p>Steps to reproduce the behavior:</p>\n<p>Three commands on command line.</p>\n<pre><code>git clone --recursive https://github.com/pytorch/pytorch\ncd pytorch\nNO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\n</code></pre>\n<p><strong>Stack trace for build (output in full below in <a href=\"#additional-context\">Additional context</a></strong></p>\n<pre><code>[snipped]\n[ 40%] Built target onnx\n[ 40%] Linking CXX shared library ../lib/libcaffe2.dylib\nld: warning: directory not found for option '-L/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib'\nduplicate symbol __ZN2at6native13pixel_shuffleERKNS_6TensorEx in:\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle_2.cpp.o\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle.cpp.o\nld: 1 duplicate symbol for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [lib/libcaffe2.dylib] Error 1\nmake[1]: *** [caffe2/CMakeFiles/caffe2.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n[ 40%] Built target python_copy_files\nmake: *** [all] Error 2\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'\n</code></pre>\n<h2>Expected behavior</h2>\n<p>PyTorch build from source such that we can <code>import torch</code>.</p>\n<h2>Environment</h2>\n<p>Please copy and paste the output from our<br>\n[environment collection script - does not run because torch is not installed]</p>\n<ul>\n<li>PyTorch Version (e.g., 1.0): <strong>PyTorch source version (1.0 currently)</strong></li>\n<li>OS (e.g., Linux): <strong>macOS High Sierra</strong></li>\n<li>How you installed PyTorch (<code>conda</code>, <code>pip</code>, source): <strong>source</strong></li>\n<li>Build command you used (if compiling from source):</li>\n</ul>\n<pre><code>NO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\n</code></pre>\n<ul>\n<li>Python version:</li>\n</ul>\n<pre><code>Python 3.6.6 (v3.6.6:4cf1f54eb7, Jun 26 2018, 19:50:54)\n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)] on darwin\n</code></pre>\n<ul>\n<li>CUDA/cuDNN version: <strong>N/A (not building with CUDA, or this is the goal as system is CPU-only)</strong></li>\n<li>GPU models and configuration: <strong>N/A</strong></li>\n<li>Any other relevant information:  <strong>The system does have CUDA 10.0 and cuDNN 7.3.0, but this is not a target.</strong></li>\n</ul>\n<h2>Additional context</h2>\n<p>Entire output from build:</p>\n<pre><code>umwhat:pytorch micheleenharris$ NO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\nBuilding wheel torch-1.0.0a0+9c49bb9\nrunning install\nsetup.py::run()\nrunning build_deps\nsetup.py::build_deps::run()\n+ SYNC_COMMAND=cp\n++ command -v rsync\n+ '[' -x /usr/bin/rsync ']'\n+ SYNC_COMMAND='rsync -lptgoD'\n+ USE_CUDA=0\n+ USE_ROCM=0\n+ USE_NNPACK=0\n+ USE_MKLDNN=0\n+ USE_GLOO_IBVERBS=0\n+ CAFFE2_STATIC_LINK_CUDA=0\n+ RERUN_CMAKE=1\n+ [[ 4 -gt 0 ]]\n+ case \"$1\" in\n+ USE_NNPACK=1\n+ shift\n+ [[ 3 -gt 0 ]]\n+ case \"$1\" in\n+ break\n+ CMAKE_INSTALL='make install'\n+ BUILD_SHARED_LIBS=ON\n+ USER_CFLAGS=\n+ USER_LDFLAGS=\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n++ uname\n+ '[' Darwin == Darwin ']'\n+ '[' -d /usr/local/opt/ccache/libexec ']'\n+++ dirname ../tools/build_pytorch_libs.sh\n++ cd ../tools/..\n+++ pwd\n++ printf '%q\\n' /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch\n+ BASE_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch\n+ TORCH_LIB_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib\n+ INSTALL_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n+ THIRD_PARTY_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/third_party\n+ CMAKE_VERSION=cmake\n+ C_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\"'\n+ C_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ LDFLAGS='-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\" '\n+ LD_POSTFIX=.so\n++ uname\n+ [[ Darwin == \\D\\a\\r\\w\\i\\n ]]\n+ LDFLAGS='-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path'\n+ LD_POSTFIX=.dylib\n+ CPP_FLAGS=' -std=c++11 '\n+ GLOO_FLAGS='-DBUILD_TEST=OFF '\n+ THD_FLAGS=\n+ NCCL_ROOT_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n+ [[ 0 -eq 1 ]]\n+ [[ 0 -eq 1 ]]\n+ CWRAP_FILES='/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/ATen/Declarations.cwrap;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/THNN/generic/THNN.h;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/ATen/nn.yaml'\n+ CUDA_NVCC_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ [[ -z '' ]]\n+ CUDA_DEVICE_DEBUG=0\n+ '[' -z '' ']'\n++ getconf _NPROCESSORS_ONLN\n+ MAX_JOBS=8\n+ BUILD_TYPE=Release\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ echo 'Building in Release mode'\nBuilding in Release mode\n+ mkdir -p /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n+ for arg in '\"$@\"'\n+ [[ caffe2 == \\n\\c\\c\\l ]]\n+ [[ caffe2 == \\g\\l\\o\\o ]]\n+ [[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]\n+ build_caffe2\n+ [[ -z '' ]]\n+ EXTRA_CAFFE2_CMAKE_FLAGS=()\n+ [[ -n '' ]]\n+ [[ -n /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages ]]\n+ EXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")\n+ [[ 1 -eq 1 ]]\n+ cmake /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch -DCMAKE_INSTALL_MESSAGE=LAZY -DPYTHON_EXECUTABLE=/Library/Frameworks/Python.framework/Versions/3.6/bin/python3 -DBUILDING_WITH_TORCH_LIBS=ON -DTORCH_BUILD_VERSION=1.0.0a0+9c49bb9 -DCMAKE_BUILD_TYPE=Release -DBUILD_TORCH=ON -DBUILD_PYTHON=ON -DBUILD_SHARED_LIBS=ON -DBUILD_BINARY=OFF -DBUILD_TEST=ON -DINSTALL_TEST=ON -DBUILD_CAFFE2_OPS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=0 -DCAFFE2_STATIC_LINK_CUDA=0 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DUSE_LEVELDB=OFF -DUSE_LMDB=OFF -DUSE_OPENCV=OFF -DUSE_GLOG=OFF -DUSE_GFLAGS=OFF -DUSE_SYSTEM_EIGEN_INSTALL=OFF -DCUDNN_INCLUDE_DIR= -DCUDNN_LIB_DIR=//Developer/NVIDIA/CUDA-10.0/lib -DCUDNN_LIBRARY= -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path ' -DCMAKE_PREFIX_PATH=/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\n-- CLANG_VERSION_STRING:         9.1\n-- Need to define long as a separate typeid.\n-- std::exception_ptr is supported.\n-- NUMA is disabled\n-- Turning off deprecation warning due to glog.\n-- Current compiler supports avx2 extention. Will build perfkernels.\n-- Building using own protobuf under third_party per request.\n-- Use custom protobuf build.\n-- Caffe2 protobuf include directory: $&lt;BUILD_INTERFACE:/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/third_party/protobuf/src&gt;$&lt;INSTALL_INTERFACE:include&gt;\n-- The BLAS backend of choice:MKL\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl - guide - pthread - m]\n--   Library mkl: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl - guide - pthread - m]\n--   Library mkl: not found\nCMake Warning at cmake/Dependencies.cmake:74 (message):\n  MKL could not be found.  Defaulting to Eigen\nCall Stack (most recent call first):\n  CMakeLists.txt:179 (include)\n\n\n-- Brace yourself, we are building NNPACK\n-- Found PythonInterp: /Library/Frameworks/Python.framework/Versions/3.6/bin/python3 (found version \"3.6.6\")\n-- LLVM FileCheck Found: /usr/local/opt/llvm/bin/FileCheck\n-- git Version: v1.4.0-505be96a\n-- Version: 1.4.0\n-- Performing Test HAVE_THREAD_SAFETY_ATTRIBUTES -- failed to compile\n-- Performing Test HAVE_STD_REGEX -- success\n-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile\n-- Performing Test HAVE_POSIX_REGEX -- success\n-- Performing Test HAVE_STEADY_CLOCK -- success\n-- Using third party subdirectory Eigen.\nPython 3.6.6\n-- Setting Python's include dir to /Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m from distutils.sysconfig\n-- Setting Python's library to /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6\n-- Found PythonInterp: /Library/Frameworks/Python.framework/Versions/3.6/bin/python3 (found suitable version \"3.6.6\", minimum required is \"2.7\")\n-- NumPy ver. 1.15.2 found (include: /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/numpy/core/include)\n-- Could NOT find pybind11 (missing: pybind11_DIR)\n-- Could NOT find pybind11 (missing: pybind11_INCLUDE_DIR)\n-- Using third_party/pybind11.\n--\n-- ******** Summary ********\n--   CMake version         : 3.9.0-rc5\n--   CMake command         : /usr/local/bin/cmake\n--   System                : Darwin\n--   C++ compiler          : /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n--   C++ compiler version  : 9.1.0.9020039\n--   CXX flags             :  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations\n--   Build type            : Release\n--   Compile definitions   :\n--   CMAKE_PREFIX_PATH     : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\n--   CMAKE_INSTALL_PREFIX  : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n--   CMAKE_MODULE_PATH     : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/cmake/Modules\n--\n--   ONNX version          : 1.3.0\n--   ONNX NAMESPACE        : onnx_torch\n--   ONNX_BUILD_TESTS      : OFF\n--   ONNX_BUILD_BENCHMARKS : OFF\n--   ONNX_USE_LITE_PROTO   : OFF\n--   ONNXIFI_DUMMY_BACKEND : OFF\n--\n--   Protobuf compiler     :\n--   Protobuf includes     :\n--   Protobuf libraries    :\n--   BUILD_ONNX_PYTHON     : OFF\n-- Could not find CUDA with FP16 support, compiling without torch.CudaHalfTensor\n-- Removing -DNDEBUG from compile flags\n-- MAGMA not found. Compiling without MAGMA support\n-- Could not find hardware support for NEON on this machine.\n-- No OMAP3 processor on this machine.\n-- No OMAP4 processor on this machine.\n-- SSE2 Found\n-- SSE3 Found\n-- AVX Found\n-- AVX2 Found\n-- Atomics: using GCC intrinsics\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl - guide - pthread - m]\n--   Library mkl: not found\n-- MKL library not found\n-- Checking for [Accelerate]\n--   Library Accelerate: /System/Library/Frameworks/Accelerate.framework\n-- This BLAS uses the F2C return conventions\n-- Found a library with BLAS API (accelerate).\n-- Found a library with LAPACK API. (accelerate)\ndisabling CUDA because NOT USE_CUDA is set\n-- CuDNN not found. Compiling without CuDNN support\ndisabling ROCM because NOT USE_ROCM is set\n-- MIOpen not found. Compiling without MIOpen support\n-- Could NOT find MKLDNN (missing: MKLDNN_INCLUDE_DIR MKLDNN_LIBRARY)\n-- MKLDNN not found. Compiling without MKLDNN support\n-- Using python found in /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\ndisabling CUDA because USE_CUDA is set false\n-- Could NOT find OpenMP_C (missing: OpenMP_C_FLAGS OpenMP_C_LIB_NAMES) (found version \"1.0\")\n-- Could NOT find OpenMP_CXX (missing: OpenMP_CXX_FLAGS OpenMP_CXX_LIB_NAMES) (found version \"1.0\")\n-- Configuring build for SLEEF-v3.2\n   Target system: Darwin-17.7.0\n   Target processor: x86_64\n   Host system: Darwin-17.7.0\n   Host processor: x86_64\n   Detected C compiler: AppleClang @ /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc\n-- Using option `-Wall -Wno-unused -Wno-attributes -Wno-unused-result -ffp-contract=off -fno-math-errno -fno-trapping-math` to compile libsleef\n-- Building shared libs : OFF\n-- MPFR : /usr/local/lib/libmpfr.dylib\n-- MPFR header file in /usr/local/include\n-- GMP : /usr/local/lib/libgmp.dylib\n-- RUNNING_ON_TRAVIS : 0\n-- COMPILER_SUPPORTS_OPENMP :\n-- Using python found in /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\n-- Could NOT find OpenMP_C (missing: OpenMP_C_FLAGS OpenMP_C_LIB_NAMES) (found version \"1.0\")\n-- Could NOT find OpenMP_CXX (missing: OpenMP_CXX_FLAGS OpenMP_CXX_LIB_NAMES) (found version \"1.0\")\n-- NCCL operators skipped due to no CUDA support\n-- Excluding ideep operators as we are not using ideep\n-- Excluding image processing operators due to no opencv\n-- Excluding video processing operators due to no opencv\n-- Excluding mkl operators as we are not using mkl\n-- MPI operators skipped due to no MPI support\n-- Include Observer library\n-- Using lib/python3.6/site-packages as python relative installation path\n-- Automatically generating missing __init__.py files.\n-- A previous caffe2 cmake run already created the __init__.py files.\nCMake Warning at CMakeLists.txt:363 (message):\n  Generated cmake files are only fully tested if one builds with system glog,\n  gflags, and protobuf.  Other settings may generate files that are not well\n  tested.\n\n\n--\n-- ******** Summary ********\n-- General:\n--   CMake version         : 3.9.0-rc5\n--   CMake command         : /usr/local/bin/cmake\n--   System                : Darwin\n--   C++ compiler          : /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n--   C++ compiler version  : 9.1.0.9020039\n--   BLAS                  : MKL\n--   CXX flags             :     -msse4.2   --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const\n--   Build type            : Release\n--   Compile definitions   : ONNX_NAMESPACE=onnx_torch;USE_GCC_ATOMICS=1;HAVE_MMAP=1;_FILE_OFFSET_BITS=64;HAVE_SHM_OPEN=1;HAVE_SHM_UNLINK=1\n--   CMAKE_PREFIX_PATH     : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\n--   CMAKE_INSTALL_PREFIX  : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n--\n--   TORCH_VERSION         : 1.0.0\n--   CAFFE2_VERSION        : 1.0.0\n--   BUILD_ATEN_MOBILE     : OFF\n--   BUILD_BINARY          : OFF\n--   BUILD_CUSTOM_PROTOBUF : ON\n--     Link local protobuf : ON\n--   BUILD_DOCS            : OFF\n--   BUILD_PYTHON          : ON\n--     Python version      : 3.6.6\n--     Python executable   : /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\n--     Pythonlibs version  : 3.6.6\n--     Python library      : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6\n--     Python includes     : /Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m\n--     Python site-packages: lib/python3.6/site-packages\n--   BUILD_CAFFE2_OPS      : ON\n--   BUILD_SHARED_LIBS     : ON\n--   BUILD_TEST            : ON\n--   USE_ASAN              : OFF\n--   USE_CUDA              : 0\n--   USE_ROCM              : OFF\n--   USE_EIGEN_FOR_BLAS    : ON\n--   USE_FFMPEG            : OFF\n--   USE_GFLAGS            : OFF\n--   USE_GLOG              : OFF\n--   USE_LEVELDB           : OFF\n--   USE_LITE_PROTO        : OFF\n--   USE_LMDB              : OFF\n--   USE_METAL             : OFF\n--   USE_MKL               :\n--   USE_MOBILE_OPENGL     : OFF\n--   USE_NCCL              : OFF\n--   USE_NERVANA_GPU       : OFF\n--   USE_NNPACK            : 1\n--   USE_OBSERVERS         : ON\n--   USE_OPENCL            : OFF\n--   USE_OPENCV            : OFF\n--   USE_OPENMP            : OFF\n--   USE_PROF              : OFF\n--   USE_REDIS             : OFF\n--   USE_ROCKSDB           : OFF\n--   USE_ZMQ               : OFF\n--   USE_DISTRIBUTED       : ON\n--     USE_MPI             : OFF\n--     USE_GLOO            : OFF\n--     USE_GLOO_IBVERBS    : OFF\n--   Public Dependencies  : Threads::Threads\n--   Private Dependencies : nnpack;cpuinfo;aten_op_header_gen;onnxifi_loader\n-- Configuring done\n-- Generating done\nCMake Warning:\n  Manually-specified variables were not used by the project:\n\n    CUDNN_LIB_DIR\n\n\n-- Build files have been written to: /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/build\n+ '[' -f /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib/libnccl.so ']'\n+ make install -j8\n[  0%] Built target js_embed\n[  0%] Built target pthreadpool\n[  0%] Built target onnxifi_loader\n[  1%] Built target gtest\n[  1%] Built target clog\n[  3%] Built target benchmark\n[  5%] Built target libprotobuf-lite\n[  5%] Built target onnxifi_dummy\n[  5%] Built target mkrename\n[  5%] Built target common\n[  6%] Built target c10\n[  7%] Built target mkdisp\n[  7%] Built target mkalias\n[  7%] Built target ATEN_CPU_FILES_GEN_TARGET\n[  7%] Built target mkmasked_gnuabi\n[  7%] Built target arraymap\n[  7%] Built target mkrename_gnuabi\n[ 11%] Built target c10_utils_hip\n[ 13%] Built target libprotobuf\n[ 13%] Built target c10_utils_gpu\n[ 13%] Built target c10_utils_cpu\n[ 14%] Built target nnpack_reference_layers\n[ 14%] Built target benchmark_main\n[ 14%] Built target gtest_main\n[ 15%] Built target onnxifi_wrapper\n[ 17%] Built target cpuinfo\n[ 18%] Built target renamedsp256.h_generated\n[ 18%] Built target dispavx.c_generated\n[ 18%] Built target renameSSE2.h_generated\n[ 18%] Built target renameAVX.h_generated\n[ 18%] Built target renameFMA4.h_generated\n[ 19%] Built target headers\n[ 19%] Built target renameSSE4.h_generated\n[ 19%] Built target renameAVX2128.h_generated\n[ 19%] Built target renameAVX2.h_generated\n[ 19%] Built target dispsse.c_generated\n[ 19%] Built target renamedsp128.h_generated\n[ 19%] Built target renameAVX512F.h_generated\n[ 19%] Generating alias_avx512f.h\n[ 20%] Built target __aten_op_header_gen\n[ 20%] Built target c10_utils_gpu_test\n[ 20%] Built target c10_utils_hip_test\n[ 21%] Built target c10_utils_cpu_test\n[ 21%] Built target alias_avx512f.h_generated\n[ 23%] Built target nnpack\n[ 23%] Built target c10_registry_test\n[ 23%] Built target dispavx_obj\n[ 23%] Built target sleefsse2\n[ 24%] Built target sleefavx\n[ 25%] Built target sleeffma4\n[ 25%] Built target sleefsse4\n[ 25%] Built target sleefavx2128\n[ 25%] Built target sleefavx2\n[ 25%] Built target dispsse_obj\n[ 25%] Built target sleefavx512f\n[ 25%] Built target sleef\n[ 33%] Built target libprotoc\n[ 33%] Built target protoc\n[ 33%] Built target gen_onnx_proto\n[ 34%] Built target Caffe2_PROTO\n[ 34%] Built target onnx_proto\n[ 35%] Built target caffe2_protos\n[ 35%] Built target Caffe2_perfkernels_avx\n[ 36%] Built target dispatch\n[ 37%] Built target Caffe2_perfkernels_avx2\n[ 37%] Built target dispatch_test\n[ 40%] Built target onnx\n[ 40%] Linking CXX shared library ../lib/libcaffe2.dylib\nld: warning: directory not found for option '-L/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib'\nduplicate symbol __ZN2at6native13pixel_shuffleERKNS_6TensorEx in:\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle_2.cpp.o\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle.cpp.o\nld: 1 duplicate symbol for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [lib/libcaffe2.dylib] Error 1\nmake[1]: *** [caffe2/CMakeFiles/caffe2.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n[ 40%] Built target python_copy_files\nmake: *** [all] Error 2\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'\n</code></pre>", "body_text": "\ud83d\udc1b Bug\nBuild 1.0 from source (tried today) has failed on CPU-only macOS.  Looks like a linker error, but perhaps something else.  Please help!\nTo Reproduce\nSteps to reproduce the behavior:\nThree commands on command line.\ngit clone --recursive https://github.com/pytorch/pytorch\ncd pytorch\nNO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\n\nStack trace for build (output in full below in Additional context\n[snipped]\n[ 40%] Built target onnx\n[ 40%] Linking CXX shared library ../lib/libcaffe2.dylib\nld: warning: directory not found for option '-L/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib'\nduplicate symbol __ZN2at6native13pixel_shuffleERKNS_6TensorEx in:\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle_2.cpp.o\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle.cpp.o\nld: 1 duplicate symbol for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [lib/libcaffe2.dylib] Error 1\nmake[1]: *** [caffe2/CMakeFiles/caffe2.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n[ 40%] Built target python_copy_files\nmake: *** [all] Error 2\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'\n\nExpected behavior\nPyTorch build from source such that we can import torch.\nEnvironment\nPlease copy and paste the output from our\n[environment collection script - does not run because torch is not installed]\n\nPyTorch Version (e.g., 1.0): PyTorch source version (1.0 currently)\nOS (e.g., Linux): macOS High Sierra\nHow you installed PyTorch (conda, pip, source): source\nBuild command you used (if compiling from source):\n\nNO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\n\n\nPython version:\n\nPython 3.6.6 (v3.6.6:4cf1f54eb7, Jun 26 2018, 19:50:54)\n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)] on darwin\n\n\nCUDA/cuDNN version: N/A (not building with CUDA, or this is the goal as system is CPU-only)\nGPU models and configuration: N/A\nAny other relevant information:  The system does have CUDA 10.0 and cuDNN 7.3.0, but this is not a target.\n\nAdditional context\nEntire output from build:\numwhat:pytorch micheleenharris$ NO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\nBuilding wheel torch-1.0.0a0+9c49bb9\nrunning install\nsetup.py::run()\nrunning build_deps\nsetup.py::build_deps::run()\n+ SYNC_COMMAND=cp\n++ command -v rsync\n+ '[' -x /usr/bin/rsync ']'\n+ SYNC_COMMAND='rsync -lptgoD'\n+ USE_CUDA=0\n+ USE_ROCM=0\n+ USE_NNPACK=0\n+ USE_MKLDNN=0\n+ USE_GLOO_IBVERBS=0\n+ CAFFE2_STATIC_LINK_CUDA=0\n+ RERUN_CMAKE=1\n+ [[ 4 -gt 0 ]]\n+ case \"$1\" in\n+ USE_NNPACK=1\n+ shift\n+ [[ 3 -gt 0 ]]\n+ case \"$1\" in\n+ break\n+ CMAKE_INSTALL='make install'\n+ BUILD_SHARED_LIBS=ON\n+ USER_CFLAGS=\n+ USER_LDFLAGS=\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n++ uname\n+ '[' Darwin == Darwin ']'\n+ '[' -d /usr/local/opt/ccache/libexec ']'\n+++ dirname ../tools/build_pytorch_libs.sh\n++ cd ../tools/..\n+++ pwd\n++ printf '%q\\n' /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch\n+ BASE_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch\n+ TORCH_LIB_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib\n+ INSTALL_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n+ THIRD_PARTY_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/third_party\n+ CMAKE_VERSION=cmake\n+ C_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\"'\n+ C_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ LDFLAGS='-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\" '\n+ LD_POSTFIX=.so\n++ uname\n+ [[ Darwin == \\D\\a\\r\\w\\i\\n ]]\n+ LDFLAGS='-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path'\n+ LD_POSTFIX=.dylib\n+ CPP_FLAGS=' -std=c++11 '\n+ GLOO_FLAGS='-DBUILD_TEST=OFF '\n+ THD_FLAGS=\n+ NCCL_ROOT_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n+ [[ 0 -eq 1 ]]\n+ [[ 0 -eq 1 ]]\n+ CWRAP_FILES='/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/ATen/Declarations.cwrap;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/THNN/generic/THNN.h;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/ATen/nn.yaml'\n+ CUDA_NVCC_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\n+ [[ -z '' ]]\n+ CUDA_DEVICE_DEBUG=0\n+ '[' -z '' ']'\n++ getconf _NPROCESSORS_ONLN\n+ MAX_JOBS=8\n+ BUILD_TYPE=Release\n+ [[ -n '' ]]\n+ [[ -n '' ]]\n+ echo 'Building in Release mode'\nBuilding in Release mode\n+ mkdir -p /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n+ for arg in '\"$@\"'\n+ [[ caffe2 == \\n\\c\\c\\l ]]\n+ [[ caffe2 == \\g\\l\\o\\o ]]\n+ [[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]\n+ build_caffe2\n+ [[ -z '' ]]\n+ EXTRA_CAFFE2_CMAKE_FLAGS=()\n+ [[ -n '' ]]\n+ [[ -n /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages ]]\n+ EXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")\n+ [[ 1 -eq 1 ]]\n+ cmake /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch -DCMAKE_INSTALL_MESSAGE=LAZY -DPYTHON_EXECUTABLE=/Library/Frameworks/Python.framework/Versions/3.6/bin/python3 -DBUILDING_WITH_TORCH_LIBS=ON -DTORCH_BUILD_VERSION=1.0.0a0+9c49bb9 -DCMAKE_BUILD_TYPE=Release -DBUILD_TORCH=ON -DBUILD_PYTHON=ON -DBUILD_SHARED_LIBS=ON -DBUILD_BINARY=OFF -DBUILD_TEST=ON -DINSTALL_TEST=ON -DBUILD_CAFFE2_OPS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=0 -DCAFFE2_STATIC_LINK_CUDA=0 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DUSE_LEVELDB=OFF -DUSE_LMDB=OFF -DUSE_OPENCV=OFF -DUSE_GLOG=OFF -DUSE_GFLAGS=OFF -DUSE_SYSTEM_EIGEN_INSTALL=OFF -DCUDNN_INCLUDE_DIR= -DCUDNN_LIB_DIR=//Developer/NVIDIA/CUDA-10.0/lib -DCUDNN_LIBRARY= -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path ' -DCMAKE_PREFIX_PATH=/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\n-- CLANG_VERSION_STRING:         9.1\n-- Need to define long as a separate typeid.\n-- std::exception_ptr is supported.\n-- NUMA is disabled\n-- Turning off deprecation warning due to glog.\n-- Current compiler supports avx2 extention. Will build perfkernels.\n-- Building using own protobuf under third_party per request.\n-- Use custom protobuf build.\n-- Caffe2 protobuf include directory: $<BUILD_INTERFACE:/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/third_party/protobuf/src>$<INSTALL_INTERFACE:include>\n-- The BLAS backend of choice:MKL\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl - guide - pthread - m]\n--   Library mkl: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl - guide - pthread - m]\n--   Library mkl: not found\nCMake Warning at cmake/Dependencies.cmake:74 (message):\n  MKL could not be found.  Defaulting to Eigen\nCall Stack (most recent call first):\n  CMakeLists.txt:179 (include)\n\n\n-- Brace yourself, we are building NNPACK\n-- Found PythonInterp: /Library/Frameworks/Python.framework/Versions/3.6/bin/python3 (found version \"3.6.6\")\n-- LLVM FileCheck Found: /usr/local/opt/llvm/bin/FileCheck\n-- git Version: v1.4.0-505be96a\n-- Version: 1.4.0\n-- Performing Test HAVE_THREAD_SAFETY_ATTRIBUTES -- failed to compile\n-- Performing Test HAVE_STD_REGEX -- success\n-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile\n-- Performing Test HAVE_POSIX_REGEX -- success\n-- Performing Test HAVE_STEADY_CLOCK -- success\n-- Using third party subdirectory Eigen.\nPython 3.6.6\n-- Setting Python's include dir to /Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m from distutils.sysconfig\n-- Setting Python's library to /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6\n-- Found PythonInterp: /Library/Frameworks/Python.framework/Versions/3.6/bin/python3 (found suitable version \"3.6.6\", minimum required is \"2.7\")\n-- NumPy ver. 1.15.2 found (include: /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/numpy/core/include)\n-- Could NOT find pybind11 (missing: pybind11_DIR)\n-- Could NOT find pybind11 (missing: pybind11_INCLUDE_DIR)\n-- Using third_party/pybind11.\n--\n-- ******** Summary ********\n--   CMake version         : 3.9.0-rc5\n--   CMake command         : /usr/local/bin/cmake\n--   System                : Darwin\n--   C++ compiler          : /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n--   C++ compiler version  : 9.1.0.9020039\n--   CXX flags             :  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations\n--   Build type            : Release\n--   Compile definitions   :\n--   CMAKE_PREFIX_PATH     : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\n--   CMAKE_INSTALL_PREFIX  : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n--   CMAKE_MODULE_PATH     : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/cmake/Modules\n--\n--   ONNX version          : 1.3.0\n--   ONNX NAMESPACE        : onnx_torch\n--   ONNX_BUILD_TESTS      : OFF\n--   ONNX_BUILD_BENCHMARKS : OFF\n--   ONNX_USE_LITE_PROTO   : OFF\n--   ONNXIFI_DUMMY_BACKEND : OFF\n--\n--   Protobuf compiler     :\n--   Protobuf includes     :\n--   Protobuf libraries    :\n--   BUILD_ONNX_PYTHON     : OFF\n-- Could not find CUDA with FP16 support, compiling without torch.CudaHalfTensor\n-- Removing -DNDEBUG from compile flags\n-- MAGMA not found. Compiling without MAGMA support\n-- Could not find hardware support for NEON on this machine.\n-- No OMAP3 processor on this machine.\n-- No OMAP4 processor on this machine.\n-- SSE2 Found\n-- SSE3 Found\n-- AVX Found\n-- AVX2 Found\n-- Atomics: using GCC intrinsics\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel_lp64: not found\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\n--   Library mkl_intel: not found\n-- Checking for [mkl - guide - pthread - m]\n--   Library mkl: not found\n-- MKL library not found\n-- Checking for [Accelerate]\n--   Library Accelerate: /System/Library/Frameworks/Accelerate.framework\n-- This BLAS uses the F2C return conventions\n-- Found a library with BLAS API (accelerate).\n-- Found a library with LAPACK API. (accelerate)\ndisabling CUDA because NOT USE_CUDA is set\n-- CuDNN not found. Compiling without CuDNN support\ndisabling ROCM because NOT USE_ROCM is set\n-- MIOpen not found. Compiling without MIOpen support\n-- Could NOT find MKLDNN (missing: MKLDNN_INCLUDE_DIR MKLDNN_LIBRARY)\n-- MKLDNN not found. Compiling without MKLDNN support\n-- Using python found in /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\ndisabling CUDA because USE_CUDA is set false\n-- Could NOT find OpenMP_C (missing: OpenMP_C_FLAGS OpenMP_C_LIB_NAMES) (found version \"1.0\")\n-- Could NOT find OpenMP_CXX (missing: OpenMP_CXX_FLAGS OpenMP_CXX_LIB_NAMES) (found version \"1.0\")\n-- Configuring build for SLEEF-v3.2\n   Target system: Darwin-17.7.0\n   Target processor: x86_64\n   Host system: Darwin-17.7.0\n   Host processor: x86_64\n   Detected C compiler: AppleClang @ /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc\n-- Using option `-Wall -Wno-unused -Wno-attributes -Wno-unused-result -ffp-contract=off -fno-math-errno -fno-trapping-math` to compile libsleef\n-- Building shared libs : OFF\n-- MPFR : /usr/local/lib/libmpfr.dylib\n-- MPFR header file in /usr/local/include\n-- GMP : /usr/local/lib/libgmp.dylib\n-- RUNNING_ON_TRAVIS : 0\n-- COMPILER_SUPPORTS_OPENMP :\n-- Using python found in /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\n-- Could NOT find OpenMP_C (missing: OpenMP_C_FLAGS OpenMP_C_LIB_NAMES) (found version \"1.0\")\n-- Could NOT find OpenMP_CXX (missing: OpenMP_CXX_FLAGS OpenMP_CXX_LIB_NAMES) (found version \"1.0\")\n-- NCCL operators skipped due to no CUDA support\n-- Excluding ideep operators as we are not using ideep\n-- Excluding image processing operators due to no opencv\n-- Excluding video processing operators due to no opencv\n-- Excluding mkl operators as we are not using mkl\n-- MPI operators skipped due to no MPI support\n-- Include Observer library\n-- Using lib/python3.6/site-packages as python relative installation path\n-- Automatically generating missing __init__.py files.\n-- A previous caffe2 cmake run already created the __init__.py files.\nCMake Warning at CMakeLists.txt:363 (message):\n  Generated cmake files are only fully tested if one builds with system glog,\n  gflags, and protobuf.  Other settings may generate files that are not well\n  tested.\n\n\n--\n-- ******** Summary ********\n-- General:\n--   CMake version         : 3.9.0-rc5\n--   CMake command         : /usr/local/bin/cmake\n--   System                : Darwin\n--   C++ compiler          : /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n--   C++ compiler version  : 9.1.0.9020039\n--   BLAS                  : MKL\n--   CXX flags             :     -msse4.2   --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const\n--   Build type            : Release\n--   Compile definitions   : ONNX_NAMESPACE=onnx_torch;USE_GCC_ATOMICS=1;HAVE_MMAP=1;_FILE_OFFSET_BITS=64;HAVE_SHM_OPEN=1;HAVE_SHM_UNLINK=1\n--   CMAKE_PREFIX_PATH     : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\n--   CMAKE_INSTALL_PREFIX  : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\n--\n--   TORCH_VERSION         : 1.0.0\n--   CAFFE2_VERSION        : 1.0.0\n--   BUILD_ATEN_MOBILE     : OFF\n--   BUILD_BINARY          : OFF\n--   BUILD_CUSTOM_PROTOBUF : ON\n--     Link local protobuf : ON\n--   BUILD_DOCS            : OFF\n--   BUILD_PYTHON          : ON\n--     Python version      : 3.6.6\n--     Python executable   : /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\n--     Pythonlibs version  : 3.6.6\n--     Python library      : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6\n--     Python includes     : /Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m\n--     Python site-packages: lib/python3.6/site-packages\n--   BUILD_CAFFE2_OPS      : ON\n--   BUILD_SHARED_LIBS     : ON\n--   BUILD_TEST            : ON\n--   USE_ASAN              : OFF\n--   USE_CUDA              : 0\n--   USE_ROCM              : OFF\n--   USE_EIGEN_FOR_BLAS    : ON\n--   USE_FFMPEG            : OFF\n--   USE_GFLAGS            : OFF\n--   USE_GLOG              : OFF\n--   USE_LEVELDB           : OFF\n--   USE_LITE_PROTO        : OFF\n--   USE_LMDB              : OFF\n--   USE_METAL             : OFF\n--   USE_MKL               :\n--   USE_MOBILE_OPENGL     : OFF\n--   USE_NCCL              : OFF\n--   USE_NERVANA_GPU       : OFF\n--   USE_NNPACK            : 1\n--   USE_OBSERVERS         : ON\n--   USE_OPENCL            : OFF\n--   USE_OPENCV            : OFF\n--   USE_OPENMP            : OFF\n--   USE_PROF              : OFF\n--   USE_REDIS             : OFF\n--   USE_ROCKSDB           : OFF\n--   USE_ZMQ               : OFF\n--   USE_DISTRIBUTED       : ON\n--     USE_MPI             : OFF\n--     USE_GLOO            : OFF\n--     USE_GLOO_IBVERBS    : OFF\n--   Public Dependencies  : Threads::Threads\n--   Private Dependencies : nnpack;cpuinfo;aten_op_header_gen;onnxifi_loader\n-- Configuring done\n-- Generating done\nCMake Warning:\n  Manually-specified variables were not used by the project:\n\n    CUDNN_LIB_DIR\n\n\n-- Build files have been written to: /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/build\n+ '[' -f /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib/libnccl.so ']'\n+ make install -j8\n[  0%] Built target js_embed\n[  0%] Built target pthreadpool\n[  0%] Built target onnxifi_loader\n[  1%] Built target gtest\n[  1%] Built target clog\n[  3%] Built target benchmark\n[  5%] Built target libprotobuf-lite\n[  5%] Built target onnxifi_dummy\n[  5%] Built target mkrename\n[  5%] Built target common\n[  6%] Built target c10\n[  7%] Built target mkdisp\n[  7%] Built target mkalias\n[  7%] Built target ATEN_CPU_FILES_GEN_TARGET\n[  7%] Built target mkmasked_gnuabi\n[  7%] Built target arraymap\n[  7%] Built target mkrename_gnuabi\n[ 11%] Built target c10_utils_hip\n[ 13%] Built target libprotobuf\n[ 13%] Built target c10_utils_gpu\n[ 13%] Built target c10_utils_cpu\n[ 14%] Built target nnpack_reference_layers\n[ 14%] Built target benchmark_main\n[ 14%] Built target gtest_main\n[ 15%] Built target onnxifi_wrapper\n[ 17%] Built target cpuinfo\n[ 18%] Built target renamedsp256.h_generated\n[ 18%] Built target dispavx.c_generated\n[ 18%] Built target renameSSE2.h_generated\n[ 18%] Built target renameAVX.h_generated\n[ 18%] Built target renameFMA4.h_generated\n[ 19%] Built target headers\n[ 19%] Built target renameSSE4.h_generated\n[ 19%] Built target renameAVX2128.h_generated\n[ 19%] Built target renameAVX2.h_generated\n[ 19%] Built target dispsse.c_generated\n[ 19%] Built target renamedsp128.h_generated\n[ 19%] Built target renameAVX512F.h_generated\n[ 19%] Generating alias_avx512f.h\n[ 20%] Built target __aten_op_header_gen\n[ 20%] Built target c10_utils_gpu_test\n[ 20%] Built target c10_utils_hip_test\n[ 21%] Built target c10_utils_cpu_test\n[ 21%] Built target alias_avx512f.h_generated\n[ 23%] Built target nnpack\n[ 23%] Built target c10_registry_test\n[ 23%] Built target dispavx_obj\n[ 23%] Built target sleefsse2\n[ 24%] Built target sleefavx\n[ 25%] Built target sleeffma4\n[ 25%] Built target sleefsse4\n[ 25%] Built target sleefavx2128\n[ 25%] Built target sleefavx2\n[ 25%] Built target dispsse_obj\n[ 25%] Built target sleefavx512f\n[ 25%] Built target sleef\n[ 33%] Built target libprotoc\n[ 33%] Built target protoc\n[ 33%] Built target gen_onnx_proto\n[ 34%] Built target Caffe2_PROTO\n[ 34%] Built target onnx_proto\n[ 35%] Built target caffe2_protos\n[ 35%] Built target Caffe2_perfkernels_avx\n[ 36%] Built target dispatch\n[ 37%] Built target Caffe2_perfkernels_avx2\n[ 37%] Built target dispatch_test\n[ 40%] Built target onnx\n[ 40%] Linking CXX shared library ../lib/libcaffe2.dylib\nld: warning: directory not found for option '-L/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib'\nduplicate symbol __ZN2at6native13pixel_shuffleERKNS_6TensorEx in:\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle_2.cpp.o\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle.cpp.o\nld: 1 duplicate symbol for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [lib/libcaffe2.dylib] Error 1\nmake[1]: *** [caffe2/CMakeFiles/caffe2.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n[ 40%] Built target python_copy_files\nmake: *** [all] Error 2\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'", "body": "## \ud83d\udc1b Bug\r\n\r\nBuild 1.0 from source (tried today) has failed on CPU-only macOS.  Looks like a linker error, but perhaps something else.  Please help!\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\nThree commands on command line.\r\n```\r\ngit clone --recursive https://github.com/pytorch/pytorch\r\ncd pytorch\r\nNO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\r\n```\r\n\r\n**Stack trace for build (output in full below in [Additional context](#additional-context)**\r\n\r\n```\r\n[snipped]\r\n[ 40%] Built target onnx\r\n[ 40%] Linking CXX shared library ../lib/libcaffe2.dylib\r\nld: warning: directory not found for option '-L/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib'\r\nduplicate symbol __ZN2at6native13pixel_shuffleERKNS_6TensorEx in:\r\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle_2.cpp.o\r\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle.cpp.o\r\nld: 1 duplicate symbol for architecture x86_64\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\nmake[2]: *** [lib/libcaffe2.dylib] Error 1\r\nmake[1]: *** [caffe2/CMakeFiles/caffe2.dir/all] Error 2\r\nmake[1]: *** Waiting for unfinished jobs....\r\n[ 40%] Built target python_copy_files\r\nmake: *** [all] Error 2\r\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'\r\n```\r\n## Expected behavior\r\n\r\nPyTorch build from source such that we can `import torch`.\r\n\r\n## Environment\r\n\r\nPlease copy and paste the output from our\r\n[environment collection script - does not run because torch is not installed]\r\n\r\n - PyTorch Version (e.g., 1.0): **PyTorch source version (1.0 currently)**\r\n - OS (e.g., Linux): **macOS High Sierra**\r\n - How you installed PyTorch (`conda`, `pip`, source): **source**\r\n - Build command you used (if compiling from source):  \r\n```\r\nNO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\r\n```\r\n - Python version:\r\n```\r\nPython 3.6.6 (v3.6.6:4cf1f54eb7, Jun 26 2018, 19:50:54)\r\n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)] on darwin\r\n```\r\n - CUDA/cuDNN version: **N/A (not building with CUDA, or this is the goal as system is CPU-only)**\r\n - GPU models and configuration: **N/A**\r\n - Any other relevant information:  **The system does have CUDA 10.0 and cuDNN 7.3.0, but this is not a target.**\r\n\r\n## Additional context\r\n\r\nEntire output from build:\r\n\r\n```\r\numwhat:pytorch micheleenharris$ NO_CUDA=1 USE_CUDA=0 CC=clang CXX=clang++ python3 setup.py install\r\nBuilding wheel torch-1.0.0a0+9c49bb9\r\nrunning install\r\nsetup.py::run()\r\nrunning build_deps\r\nsetup.py::build_deps::run()\r\n+ SYNC_COMMAND=cp\r\n++ command -v rsync\r\n+ '[' -x /usr/bin/rsync ']'\r\n+ SYNC_COMMAND='rsync -lptgoD'\r\n+ USE_CUDA=0\r\n+ USE_ROCM=0\r\n+ USE_NNPACK=0\r\n+ USE_MKLDNN=0\r\n+ USE_GLOO_IBVERBS=0\r\n+ CAFFE2_STATIC_LINK_CUDA=0\r\n+ RERUN_CMAKE=1\r\n+ [[ 4 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ USE_NNPACK=1\r\n+ shift\r\n+ [[ 3 -gt 0 ]]\r\n+ case \"$1\" in\r\n+ break\r\n+ CMAKE_INSTALL='make install'\r\n+ BUILD_SHARED_LIBS=ON\r\n+ USER_CFLAGS=\r\n+ USER_LDFLAGS=\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n++ uname\r\n+ '[' Darwin == Darwin ']'\r\n+ '[' -d /usr/local/opt/ccache/libexec ']'\r\n+++ dirname ../tools/build_pytorch_libs.sh\r\n++ cd ../tools/..\r\n+++ pwd\r\n++ printf '%q\\n' /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch\r\n+ BASE_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch\r\n+ TORCH_LIB_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib\r\n+ INSTALL_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\r\n+ THIRD_PARTY_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/third_party\r\n+ CMAKE_VERSION=cmake\r\n+ C_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\"'\r\n+ C_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ LDFLAGS='-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\" '\r\n+ LD_POSTFIX=.so\r\n++ uname\r\n+ [[ Darwin == \\D\\a\\r\\w\\i\\n ]]\r\n+ LDFLAGS='-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path'\r\n+ LD_POSTFIX=.dylib\r\n+ CPP_FLAGS=' -std=c++11 '\r\n+ GLOO_FLAGS='-DBUILD_TEST=OFF '\r\n+ THD_FLAGS=\r\n+ NCCL_ROOT_DIR=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\r\n+ [[ 0 -eq 1 ]]\r\n+ [[ 0 -eq 1 ]]\r\n+ CWRAP_FILES='/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/ATen/Declarations.cwrap;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/THNN/generic/THNN.h;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/THCUNN/generic/THCUNN.h;/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/ATen/nn.yaml'\r\n+ CUDA_NVCC_FLAGS=' -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/TH\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THC\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THS\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCS\"   -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THNN\" -I\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/include/THCUNN\" -DOMPI_SKIP_MPICXX=1'\r\n+ [[ -z '' ]]\r\n+ CUDA_DEVICE_DEBUG=0\r\n+ '[' -z '' ']'\r\n++ getconf _NPROCESSORS_ONLN\r\n+ MAX_JOBS=8\r\n+ BUILD_TYPE=Release\r\n+ [[ -n '' ]]\r\n+ [[ -n '' ]]\r\n+ echo 'Building in Release mode'\r\nBuilding in Release mode\r\n+ mkdir -p /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\r\n+ for arg in '\"$@\"'\r\n+ [[ caffe2 == \\n\\c\\c\\l ]]\r\n+ [[ caffe2 == \\g\\l\\o\\o ]]\r\n+ [[ caffe2 == \\c\\a\\f\\f\\e\\2 ]]\r\n+ build_caffe2\r\n+ [[ -z '' ]]\r\n+ EXTRA_CAFFE2_CMAKE_FLAGS=()\r\n+ [[ -n '' ]]\r\n+ [[ -n /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages ]]\r\n+ EXTRA_CAFFE2_CMAKE_FLAGS+=(\"-DCMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH\")\r\n+ [[ 1 -eq 1 ]]\r\n+ cmake /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch -DCMAKE_INSTALL_MESSAGE=LAZY -DPYTHON_EXECUTABLE=/Library/Frameworks/Python.framework/Versions/3.6/bin/python3 -DBUILDING_WITH_TORCH_LIBS=ON -DTORCH_BUILD_VERSION=1.0.0a0+9c49bb9 -DCMAKE_BUILD_TYPE=Release -DBUILD_TORCH=ON -DBUILD_PYTHON=ON -DBUILD_SHARED_LIBS=ON -DBUILD_BINARY=OFF -DBUILD_TEST=ON -DINSTALL_TEST=ON -DBUILD_CAFFE2_OPS=ON -DONNX_NAMESPACE=onnx_torch -DUSE_CUDA=0 -DCAFFE2_STATIC_LINK_CUDA=0 -DUSE_ROCM=0 -DUSE_NNPACK=1 -DUSE_LEVELDB=OFF -DUSE_LMDB=OFF -DUSE_OPENCV=OFF -DUSE_GLOG=OFF -DUSE_GFLAGS=OFF -DUSE_SYSTEM_EIGEN_INSTALL=OFF -DCUDNN_INCLUDE_DIR= -DCUDNN_LIB_DIR=//Developer/NVIDIA/CUDA-10.0/lib -DCUDNN_LIBRARY= -DUSE_MKLDNN=0 -DMKLDNN_INCLUDE_DIR= -DMKLDNN_LIB_DIR= -DMKLDNN_LIBRARY= -DCMAKE_INSTALL_PREFIX=/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install -DCMAKE_EXPORT_COMPILE_COMMANDS=1 -DCMAKE_C_FLAGS= -DCMAKE_CXX_FLAGS= '-DCMAKE_EXE_LINKER_FLAGS=-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path ' '-DCMAKE_SHARED_LINKER_FLAGS=-L\"/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib\"  -Wl,-rpath,@loader_path ' -DCMAKE_PREFIX_PATH=/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\r\n-- CLANG_VERSION_STRING:         9.1\r\n-- Need to define long as a separate typeid.\r\n-- std::exception_ptr is supported.\r\n-- NUMA is disabled\r\n-- Turning off deprecation warning due to glog.\r\n-- Current compiler supports avx2 extention. Will build perfkernels.\r\n-- Building using own protobuf under third_party per request.\r\n-- Use custom protobuf build.\r\n-- Caffe2 protobuf include directory: $<BUILD_INTERFACE:/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/third_party/protobuf/src>$<INSTALL_INTERFACE:include>\r\n-- The BLAS backend of choice:MKL\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl - guide - pthread - m]\r\n--   Library mkl: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl - guide - pthread - m]\r\n--   Library mkl: not found\r\nCMake Warning at cmake/Dependencies.cmake:74 (message):\r\n  MKL could not be found.  Defaulting to Eigen\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:179 (include)\r\n\r\n\r\n-- Brace yourself, we are building NNPACK\r\n-- Found PythonInterp: /Library/Frameworks/Python.framework/Versions/3.6/bin/python3 (found version \"3.6.6\")\r\n-- LLVM FileCheck Found: /usr/local/opt/llvm/bin/FileCheck\r\n-- git Version: v1.4.0-505be96a\r\n-- Version: 1.4.0\r\n-- Performing Test HAVE_THREAD_SAFETY_ATTRIBUTES -- failed to compile\r\n-- Performing Test HAVE_STD_REGEX -- success\r\n-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile\r\n-- Performing Test HAVE_POSIX_REGEX -- success\r\n-- Performing Test HAVE_STEADY_CLOCK -- success\r\n-- Using third party subdirectory Eigen.\r\nPython 3.6.6\r\n-- Setting Python's include dir to /Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m from distutils.sysconfig\r\n-- Setting Python's library to /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6\r\n-- Found PythonInterp: /Library/Frameworks/Python.framework/Versions/3.6/bin/python3 (found suitable version \"3.6.6\", minimum required is \"2.7\")\r\n-- NumPy ver. 1.15.2 found (include: /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/numpy/core/include)\r\n-- Could NOT find pybind11 (missing: pybind11_DIR)\r\n-- Could NOT find pybind11 (missing: pybind11_INCLUDE_DIR)\r\n-- Using third_party/pybind11.\r\n--\r\n-- ******** Summary ********\r\n--   CMake version         : 3.9.0-rc5\r\n--   CMake command         : /usr/local/bin/cmake\r\n--   System                : Darwin\r\n--   C++ compiler          : /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\r\n--   C++ compiler version  : 9.1.0.9020039\r\n--   CXX flags             :  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations\r\n--   Build type            : Release\r\n--   Compile definitions   :\r\n--   CMAKE_PREFIX_PATH     : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\r\n--   CMAKE_INSTALL_PREFIX  : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\r\n--   CMAKE_MODULE_PATH     : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/cmake/Modules\r\n--\r\n--   ONNX version          : 1.3.0\r\n--   ONNX NAMESPACE        : onnx_torch\r\n--   ONNX_BUILD_TESTS      : OFF\r\n--   ONNX_BUILD_BENCHMARKS : OFF\r\n--   ONNX_USE_LITE_PROTO   : OFF\r\n--   ONNXIFI_DUMMY_BACKEND : OFF\r\n--\r\n--   Protobuf compiler     :\r\n--   Protobuf includes     :\r\n--   Protobuf libraries    :\r\n--   BUILD_ONNX_PYTHON     : OFF\r\n-- Could not find CUDA with FP16 support, compiling without torch.CudaHalfTensor\r\n-- Removing -DNDEBUG from compile flags\r\n-- MAGMA not found. Compiling without MAGMA support\r\n-- Could not find hardware support for NEON on this machine.\r\n-- No OMAP3 processor on this machine.\r\n-- No OMAP4 processor on this machine.\r\n-- SSE2 Found\r\n-- SSE3 Found\r\n-- AVX Found\r\n-- AVX2 Found\r\n-- Atomics: using GCC intrinsics\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_sequential - mkl_core - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - iomp5 - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - guide - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl_intel_lp64 - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel_lp64: not found\r\n-- Checking for [mkl_intel - mkl_intel_thread - mkl_core - pthread - m]\r\n--   Library mkl_intel: not found\r\n-- Checking for [mkl - guide - pthread - m]\r\n--   Library mkl: not found\r\n-- MKL library not found\r\n-- Checking for [Accelerate]\r\n--   Library Accelerate: /System/Library/Frameworks/Accelerate.framework\r\n-- This BLAS uses the F2C return conventions\r\n-- Found a library with BLAS API (accelerate).\r\n-- Found a library with LAPACK API. (accelerate)\r\ndisabling CUDA because NOT USE_CUDA is set\r\n-- CuDNN not found. Compiling without CuDNN support\r\ndisabling ROCM because NOT USE_ROCM is set\r\n-- MIOpen not found. Compiling without MIOpen support\r\n-- Could NOT find MKLDNN (missing: MKLDNN_INCLUDE_DIR MKLDNN_LIBRARY)\r\n-- MKLDNN not found. Compiling without MKLDNN support\r\n-- Using python found in /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\r\ndisabling CUDA because USE_CUDA is set false\r\n-- Could NOT find OpenMP_C (missing: OpenMP_C_FLAGS OpenMP_C_LIB_NAMES) (found version \"1.0\")\r\n-- Could NOT find OpenMP_CXX (missing: OpenMP_CXX_FLAGS OpenMP_CXX_LIB_NAMES) (found version \"1.0\")\r\n-- Configuring build for SLEEF-v3.2\r\n   Target system: Darwin-17.7.0\r\n   Target processor: x86_64\r\n   Host system: Darwin-17.7.0\r\n   Host processor: x86_64\r\n   Detected C compiler: AppleClang @ /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc\r\n-- Using option `-Wall -Wno-unused -Wno-attributes -Wno-unused-result -ffp-contract=off -fno-math-errno -fno-trapping-math` to compile libsleef\r\n-- Building shared libs : OFF\r\n-- MPFR : /usr/local/lib/libmpfr.dylib\r\n-- MPFR header file in /usr/local/include\r\n-- GMP : /usr/local/lib/libgmp.dylib\r\n-- RUNNING_ON_TRAVIS : 0\r\n-- COMPILER_SUPPORTS_OPENMP :\r\n-- Using python found in /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\r\n-- Could NOT find OpenMP_C (missing: OpenMP_C_FLAGS OpenMP_C_LIB_NAMES) (found version \"1.0\")\r\n-- Could NOT find OpenMP_CXX (missing: OpenMP_CXX_FLAGS OpenMP_CXX_LIB_NAMES) (found version \"1.0\")\r\n-- NCCL operators skipped due to no CUDA support\r\n-- Excluding ideep operators as we are not using ideep\r\n-- Excluding image processing operators due to no opencv\r\n-- Excluding video processing operators due to no opencv\r\n-- Excluding mkl operators as we are not using mkl\r\n-- MPI operators skipped due to no MPI support\r\n-- Include Observer library\r\n-- Using lib/python3.6/site-packages as python relative installation path\r\n-- Automatically generating missing __init__.py files.\r\n-- A previous caffe2 cmake run already created the __init__.py files.\r\nCMake Warning at CMakeLists.txt:363 (message):\r\n  Generated cmake files are only fully tested if one builds with system glog,\r\n  gflags, and protobuf.  Other settings may generate files that are not well\r\n  tested.\r\n\r\n\r\n--\r\n-- ******** Summary ********\r\n-- General:\r\n--   CMake version         : 3.9.0-rc5\r\n--   CMake command         : /usr/local/bin/cmake\r\n--   System                : Darwin\r\n--   C++ compiler          : /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\r\n--   C++ compiler version  : 9.1.0.9020039\r\n--   BLAS                  : MKL\r\n--   CXX flags             :     -msse4.2   --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const\r\n--   Build type            : Release\r\n--   Compile definitions   : ONNX_NAMESPACE=onnx_torch;USE_GCC_ATOMICS=1;HAVE_MMAP=1;_FILE_OFFSET_BITS=64;HAVE_SHM_OPEN=1;HAVE_SHM_UNLINK=1\r\n--   CMAKE_PREFIX_PATH     : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\r\n--   CMAKE_INSTALL_PREFIX  : /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install\r\n--\r\n--   TORCH_VERSION         : 1.0.0\r\n--   CAFFE2_VERSION        : 1.0.0\r\n--   BUILD_ATEN_MOBILE     : OFF\r\n--   BUILD_BINARY          : OFF\r\n--   BUILD_CUSTOM_PROTOBUF : ON\r\n--     Link local protobuf : ON\r\n--   BUILD_DOCS            : OFF\r\n--   BUILD_PYTHON          : ON\r\n--     Python version      : 3.6.6\r\n--     Python executable   : /Library/Frameworks/Python.framework/Versions/3.6/bin/python3\r\n--     Pythonlibs version  : 3.6.6\r\n--     Python library      : /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6\r\n--     Python includes     : /Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m\r\n--     Python site-packages: lib/python3.6/site-packages\r\n--   BUILD_CAFFE2_OPS      : ON\r\n--   BUILD_SHARED_LIBS     : ON\r\n--   BUILD_TEST            : ON\r\n--   USE_ASAN              : OFF\r\n--   USE_CUDA              : 0\r\n--   USE_ROCM              : OFF\r\n--   USE_EIGEN_FOR_BLAS    : ON\r\n--   USE_FFMPEG            : OFF\r\n--   USE_GFLAGS            : OFF\r\n--   USE_GLOG              : OFF\r\n--   USE_LEVELDB           : OFF\r\n--   USE_LITE_PROTO        : OFF\r\n--   USE_LMDB              : OFF\r\n--   USE_METAL             : OFF\r\n--   USE_MKL               :\r\n--   USE_MOBILE_OPENGL     : OFF\r\n--   USE_NCCL              : OFF\r\n--   USE_NERVANA_GPU       : OFF\r\n--   USE_NNPACK            : 1\r\n--   USE_OBSERVERS         : ON\r\n--   USE_OPENCL            : OFF\r\n--   USE_OPENCV            : OFF\r\n--   USE_OPENMP            : OFF\r\n--   USE_PROF              : OFF\r\n--   USE_REDIS             : OFF\r\n--   USE_ROCKSDB           : OFF\r\n--   USE_ZMQ               : OFF\r\n--   USE_DISTRIBUTED       : ON\r\n--     USE_MPI             : OFF\r\n--     USE_GLOO            : OFF\r\n--     USE_GLOO_IBVERBS    : OFF\r\n--   Public Dependencies  : Threads::Threads\r\n--   Private Dependencies : nnpack;cpuinfo;aten_op_header_gen;onnxifi_loader\r\n-- Configuring done\r\n-- Generating done\r\nCMake Warning:\r\n  Manually-specified variables were not used by the project:\r\n\r\n    CUDNN_LIB_DIR\r\n\r\n\r\n-- Build files have been written to: /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/build\r\n+ '[' -f /Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib/libnccl.so ']'\r\n+ make install -j8\r\n[  0%] Built target js_embed\r\n[  0%] Built target pthreadpool\r\n[  0%] Built target onnxifi_loader\r\n[  1%] Built target gtest\r\n[  1%] Built target clog\r\n[  3%] Built target benchmark\r\n[  5%] Built target libprotobuf-lite\r\n[  5%] Built target onnxifi_dummy\r\n[  5%] Built target mkrename\r\n[  5%] Built target common\r\n[  6%] Built target c10\r\n[  7%] Built target mkdisp\r\n[  7%] Built target mkalias\r\n[  7%] Built target ATEN_CPU_FILES_GEN_TARGET\r\n[  7%] Built target mkmasked_gnuabi\r\n[  7%] Built target arraymap\r\n[  7%] Built target mkrename_gnuabi\r\n[ 11%] Built target c10_utils_hip\r\n[ 13%] Built target libprotobuf\r\n[ 13%] Built target c10_utils_gpu\r\n[ 13%] Built target c10_utils_cpu\r\n[ 14%] Built target nnpack_reference_layers\r\n[ 14%] Built target benchmark_main\r\n[ 14%] Built target gtest_main\r\n[ 15%] Built target onnxifi_wrapper\r\n[ 17%] Built target cpuinfo\r\n[ 18%] Built target renamedsp256.h_generated\r\n[ 18%] Built target dispavx.c_generated\r\n[ 18%] Built target renameSSE2.h_generated\r\n[ 18%] Built target renameAVX.h_generated\r\n[ 18%] Built target renameFMA4.h_generated\r\n[ 19%] Built target headers\r\n[ 19%] Built target renameSSE4.h_generated\r\n[ 19%] Built target renameAVX2128.h_generated\r\n[ 19%] Built target renameAVX2.h_generated\r\n[ 19%] Built target dispsse.c_generated\r\n[ 19%] Built target renamedsp128.h_generated\r\n[ 19%] Built target renameAVX512F.h_generated\r\n[ 19%] Generating alias_avx512f.h\r\n[ 20%] Built target __aten_op_header_gen\r\n[ 20%] Built target c10_utils_gpu_test\r\n[ 20%] Built target c10_utils_hip_test\r\n[ 21%] Built target c10_utils_cpu_test\r\n[ 21%] Built target alias_avx512f.h_generated\r\n[ 23%] Built target nnpack\r\n[ 23%] Built target c10_registry_test\r\n[ 23%] Built target dispavx_obj\r\n[ 23%] Built target sleefsse2\r\n[ 24%] Built target sleefavx\r\n[ 25%] Built target sleeffma4\r\n[ 25%] Built target sleefsse4\r\n[ 25%] Built target sleefavx2128\r\n[ 25%] Built target sleefavx2\r\n[ 25%] Built target dispsse_obj\r\n[ 25%] Built target sleefavx512f\r\n[ 25%] Built target sleef\r\n[ 33%] Built target libprotoc\r\n[ 33%] Built target protoc\r\n[ 33%] Built target gen_onnx_proto\r\n[ 34%] Built target Caffe2_PROTO\r\n[ 34%] Built target onnx_proto\r\n[ 35%] Built target caffe2_protos\r\n[ 35%] Built target Caffe2_perfkernels_avx\r\n[ 36%] Built target dispatch\r\n[ 37%] Built target Caffe2_perfkernels_avx2\r\n[ 37%] Built target dispatch_test\r\n[ 40%] Built target onnx\r\n[ 40%] Linking CXX shared library ../lib/libcaffe2.dylib\r\nld: warning: directory not found for option '-L/Users/micheleenharris/Documents/bin/github/pytorch-mask-rcnn-samples/pytorch/torch/lib/tmp_install/lib'\r\nduplicate symbol __ZN2at6native13pixel_shuffleERKNS_6TensorEx in:\r\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle_2.cpp.o\r\n    CMakeFiles/caffe2.dir/__/aten/src/ATen/native/PixelShuffle.cpp.o\r\nld: 1 duplicate symbol for architecture x86_64\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\nmake[2]: *** [lib/libcaffe2.dylib] Error 1\r\nmake[1]: *** [caffe2/CMakeFiles/caffe2.dir/all] Error 2\r\nmake[1]: *** Waiting for unfinished jobs....\r\n[ 40%] Built target python_copy_files\r\nmake: *** [all] Error 2\r\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/371196927", "html_url": "https://github.com/pytorch/pytorch/pull/5608#issuecomment-371196927", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/5608", "id": 371196927, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTE5NjkyNw==", "user": {"login": "vadimkantorov", "id": 1041752, "node_id": "MDQ6VXNlcjEwNDE3NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1041752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vadimkantorov", "html_url": "https://github.com/vadimkantorov", "followers_url": "https://api.github.com/users/vadimkantorov/followers", "following_url": "https://api.github.com/users/vadimkantorov/following{/other_user}", "gists_url": "https://api.github.com/users/vadimkantorov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vadimkantorov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vadimkantorov/subscriptions", "organizations_url": "https://api.github.com/users/vadimkantorov/orgs", "repos_url": "https://api.github.com/users/vadimkantorov/repos", "events_url": "https://api.github.com/users/vadimkantorov/events{/privacy}", "received_events_url": "https://api.github.com/users/vadimkantorov/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-07T16:30:55Z", "updated_at": "2018-03-07T16:30:55Z", "author_association": "NONE", "body_html": "<pre><code>_calc_length:\n*next = PyNumber_Subtract(stop, start);\nval = PyNumber_TrueDivide(*next, step);\nval = _arange_safe_ceil_to_intp(val)\n\n_arange_safe_ceil_to_intp(double value):\nivalue = npy_ceil(value);\nreturn (npy_intp)ivalue;\n\n</code></pre>\n<p>NumPy has two different impls of PyArray_Arange: <a href=\"https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/ctors.c#L2968\">https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/ctors.c#L2968</a> and <a href=\"https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/ctors.c#L3111\">https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/ctors.c#L3111</a></p>\n<p>npy_ceil is auto-generated here: <a href=\"https://github.com/numpy/numpy/blob/d407f24cb5ad85850a60b1be3dade3305ea30c98/numpy/core/src/npymath/npy_math_internal.h.src#L359\">https://github.com/numpy/numpy/blob/d407f24cb5ad85850a60b1be3dade3305ea30c98/numpy/core/src/npymath/npy_math_internal.h.src#L359</a></p>\n<p>I hope we are doing operations in double precision here.</p>", "body_text": "_calc_length:\n*next = PyNumber_Subtract(stop, start);\nval = PyNumber_TrueDivide(*next, step);\nval = _arange_safe_ceil_to_intp(val)\n\n_arange_safe_ceil_to_intp(double value):\nivalue = npy_ceil(value);\nreturn (npy_intp)ivalue;\n\n\nNumPy has two different impls of PyArray_Arange: https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/ctors.c#L2968 and https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/ctors.c#L3111\nnpy_ceil is auto-generated here: https://github.com/numpy/numpy/blob/d407f24cb5ad85850a60b1be3dade3305ea30c98/numpy/core/src/npymath/npy_math_internal.h.src#L359\nI hope we are doing operations in double precision here.", "body": "```\r\n_calc_length:\r\n*next = PyNumber_Subtract(stop, start);\r\nval = PyNumber_TrueDivide(*next, step);\r\nval = _arange_safe_ceil_to_intp(val)\r\n\r\n_arange_safe_ceil_to_intp(double value):\r\nivalue = npy_ceil(value);\r\nreturn (npy_intp)ivalue;\r\n\r\n```\r\n\r\nNumPy has two different impls of PyArray_Arange: https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/ctors.c#L2968 and https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/ctors.c#L3111\r\n\r\nnpy_ceil is auto-generated here: https://github.com/numpy/numpy/blob/d407f24cb5ad85850a60b1be3dade3305ea30c98/numpy/core/src/npymath/npy_math_internal.h.src#L359\r\n\r\nI hope we are doing operations in double precision here."}
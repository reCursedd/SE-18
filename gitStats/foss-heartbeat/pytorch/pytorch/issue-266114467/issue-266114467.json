{"url": "https://api.github.com/repos/pytorch/pytorch/issues/3147", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/3147/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/3147/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/3147/events", "html_url": "https://github.com/pytorch/pytorch/issues/3147", "id": 266114467, "node_id": "MDU6SXNzdWUyNjYxMTQ0Njc=", "number": 3147, "title": "Crash when building pytorch from sources with CUDA: ld: cannot find -lcuda", "user": {"login": "cjsg", "id": 28411935, "node_id": "MDQ6VXNlcjI4NDExOTM1", "avatar_url": "https://avatars0.githubusercontent.com/u/28411935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjsg", "html_url": "https://github.com/cjsg", "followers_url": "https://api.github.com/users/cjsg/followers", "following_url": "https://api.github.com/users/cjsg/following{/other_user}", "gists_url": "https://api.github.com/users/cjsg/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjsg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjsg/subscriptions", "organizations_url": "https://api.github.com/users/cjsg/orgs", "repos_url": "https://api.github.com/users/cjsg/repos", "events_url": "https://api.github.com/users/cjsg/events{/privacy}", "received_events_url": "https://api.github.com/users/cjsg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-10-17T12:58:34Z", "updated_at": "2017-12-02T00:39:28Z", "closed_at": "2017-10-20T09:51:56Z", "author_association": "CONTRIBUTOR", "body_html": "<p>When building pytorch from sources with cuda support (for cuda-8.0 and cudnn-6.0), it crashes (relatively at the end I think) with the following message:</p>\n<blockquote>\n<p>/home/cjsimon/anaconda3/compiler_compat/ld: cannot find -lcuda<br>\ncollect2: error: ld returned 1 exit status<br>\nerror: command 'gcc' failed with exit status 1</p>\n</blockquote>\n<p>I followed the steps described in the official <a href=\"https://github.com/pytorch/pytorch#installation\">readme</a>, using a clean conda environment. I use the system-wide gcc (version 5.4.0) with Ubuntu 16.04.01 LTS.<br>\nInspired by <a href=\"https://github.com/pytorch/pytorch/issues/3050\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/3050/hovercard\">this</a> post, I also tried first installing a new gcc with conda (leading to a gcc version 4.8.5), but then the build stops right away with the following output:</p>\n<blockquote>\n<p>running install<br>\nrunning build_deps<br>\ncmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version <code>GLIBCXX_3.4.20' not found (required by cmake) cmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version </code>CXXABI_1.3.9' not found (required by cmake)<br>\ncmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by cmake)</p>\n</blockquote>\n<p>(This in turn seems related to the <a href=\"https://github.com/ContinuumIO/anaconda-issues/issues/483\" data-hovercard-type=\"issue\" data-hovercard-url=\"/ContinuumIO/anaconda-issues/issues/483/hovercard\">following</a> issue, which essentially states that I would need a gcc version 4.9 or higher. But conda does not provide it.)<br>\nImportantly, I do not have sudo rights on that server, so installing another system-wide version of gcc is not an option.<br>\nThanks for your help!</p>", "body_text": "When building pytorch from sources with cuda support (for cuda-8.0 and cudnn-6.0), it crashes (relatively at the end I think) with the following message:\n\n/home/cjsimon/anaconda3/compiler_compat/ld: cannot find -lcuda\ncollect2: error: ld returned 1 exit status\nerror: command 'gcc' failed with exit status 1\n\nI followed the steps described in the official readme, using a clean conda environment. I use the system-wide gcc (version 5.4.0) with Ubuntu 16.04.01 LTS.\nInspired by this post, I also tried first installing a new gcc with conda (leading to a gcc version 4.8.5), but then the build stops right away with the following output:\n\nrunning install\nrunning build_deps\ncmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version GLIBCXX_3.4.20' not found (required by cmake) cmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version CXXABI_1.3.9' not found (required by cmake)\ncmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by cmake)\n\n(This in turn seems related to the following issue, which essentially states that I would need a gcc version 4.9 or higher. But conda does not provide it.)\nImportantly, I do not have sudo rights on that server, so installing another system-wide version of gcc is not an option.\nThanks for your help!", "body": "When building pytorch from sources with cuda support (for cuda-8.0 and cudnn-6.0), it crashes (relatively at the end I think) with the following message:\r\n\r\n> /home/cjsimon/anaconda3/compiler_compat/ld: cannot find -lcuda\r\n> collect2: error: ld returned 1 exit status\r\n> error: command 'gcc' failed with exit status 1\r\n\r\nI followed the steps described in the official [readme](https://github.com/pytorch/pytorch#installation), using a clean conda environment. I use the system-wide gcc (version 5.4.0) with Ubuntu 16.04.01 LTS.\r\nInspired by [this](https://github.com/pytorch/pytorch/issues/3050) post, I also tried first installing a new gcc with conda (leading to a gcc version 4.8.5), but then the build stops right away with the following output:\r\n\r\n> running install\r\n> running build_deps\r\n> cmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by cmake)\r\n> cmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by cmake)\r\n> cmake: /lustre/home/cjsimon/anaconda3/envs/pytorch/bin/../lib/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by cmake)\r\n\r\n(This in turn seems related to the [following](https://github.com/ContinuumIO/anaconda-issues/issues/483) issue, which essentially states that I would need a gcc version 4.9 or higher. But conda does not provide it.)\r\nImportantly, I do not have sudo rights on that server, so installing another system-wide version of gcc is not an option.\r\nThanks for your help!"}
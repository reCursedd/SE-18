{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/292156257", "html_url": "https://github.com/pytorch/pytorch/issues/956#issuecomment-292156257", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/956", "id": 292156257, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjE1NjI1Nw==", "user": {"login": "TwoBranchDracaena", "id": 22960643, "node_id": "MDQ6VXNlcjIyOTYwNjQz", "avatar_url": "https://avatars2.githubusercontent.com/u/22960643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TwoBranchDracaena", "html_url": "https://github.com/TwoBranchDracaena", "followers_url": "https://api.github.com/users/TwoBranchDracaena/followers", "following_url": "https://api.github.com/users/TwoBranchDracaena/following{/other_user}", "gists_url": "https://api.github.com/users/TwoBranchDracaena/gists{/gist_id}", "starred_url": "https://api.github.com/users/TwoBranchDracaena/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TwoBranchDracaena/subscriptions", "organizations_url": "https://api.github.com/users/TwoBranchDracaena/orgs", "repos_url": "https://api.github.com/users/TwoBranchDracaena/repos", "events_url": "https://api.github.com/users/TwoBranchDracaena/events{/privacy}", "received_events_url": "https://api.github.com/users/TwoBranchDracaena/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-06T12:18:10Z", "updated_at": "2017-04-06T14:08:00Z", "author_association": "NONE", "body_html": "<p>I load and save the t7 model with the latest lua torch.</p>\n<p>But when I try to load it in PyTorch, I get this error:</p>\n<p>File \"/usr/local/lib/python3.5/site-packages/torch/utils/serialization/read_lua_file.py\", line 357, in storage_to_size<br>\nvalue = getattr(obj, attr)<br>\nAttributeError: 'DepthConcat' object has no attribute 'outputSize'</p>\n<p>Anybody has the same problem?</p>\n<p>========</p>\n<p>OK, problem found.<br>\nDepthConcat only creates 'outputSize' field during forward:</p>\n<div class=\"highlight highlight-source-lua\"><pre><span class=\"pl-k\">function</span> <span class=\"pl-en\">DepthConcat:updateOutput</span>(<span class=\"pl-smi\">input</span>)\n   <span class=\"pl-c1\">self</span>.<span class=\"pl-smi\">outputSize</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.<span class=\"pl-smi\">outputSize</span> <span class=\"pl-k\">or</span> torch.<span class=\"pl-c1\">LongStorage</span>()</pre></div>\n<p>So, the solution is</p>\n<ol>\n<li>load .t7 with latest lua</li>\n<li>forward a random tensor through it</li>\n<li>save to another .t7</li>\n</ol>", "body_text": "I load and save the t7 model with the latest lua torch.\nBut when I try to load it in PyTorch, I get this error:\nFile \"/usr/local/lib/python3.5/site-packages/torch/utils/serialization/read_lua_file.py\", line 357, in storage_to_size\nvalue = getattr(obj, attr)\nAttributeError: 'DepthConcat' object has no attribute 'outputSize'\nAnybody has the same problem?\n========\nOK, problem found.\nDepthConcat only creates 'outputSize' field during forward:\nfunction DepthConcat:updateOutput(input)\n   self.outputSize = self.outputSize or torch.LongStorage()\nSo, the solution is\n\nload .t7 with latest lua\nforward a random tensor through it\nsave to another .t7", "body": "I load and save the t7 model with the latest lua torch.\r\n\r\nBut when I try to load it in PyTorch, I get this error:\r\n\r\nFile \"/usr/local/lib/python3.5/site-packages/torch/utils/serialization/read_lua_file.py\", line 357, in storage_to_size\r\n    value = getattr(obj, attr)\r\nAttributeError: 'DepthConcat' object has no attribute 'outputSize'\r\n\r\nAnybody has the same problem?\r\n\r\n========\r\n\r\nOK, problem found.\r\nDepthConcat only creates 'outputSize' field during forward:\r\n```lua\r\nfunction DepthConcat:updateOutput(input)\r\n   self.outputSize = self.outputSize or torch.LongStorage()\r\n```\r\nSo, the solution is\r\n1) load .t7 with latest lua\r\n2) forward a random tensor through it\r\n3) save to another .t7\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10698", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10698/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10698/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10698/events", "html_url": "https://github.com/pytorch/pytorch/issues/10698", "id": 352256529, "node_id": "MDU6SXNzdWUzNTIyNTY1Mjk=", "number": 10698, "title": "[ppc64le/pytorch] build break due to #10478", "user": {"login": "avmgithub", "id": 9083746, "node_id": "MDQ6VXNlcjkwODM3NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/9083746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avmgithub", "html_url": "https://github.com/avmgithub", "followers_url": "https://api.github.com/users/avmgithub/followers", "following_url": "https://api.github.com/users/avmgithub/following{/other_user}", "gists_url": "https://api.github.com/users/avmgithub/gists{/gist_id}", "starred_url": "https://api.github.com/users/avmgithub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avmgithub/subscriptions", "organizations_url": "https://api.github.com/users/avmgithub/orgs", "repos_url": "https://api.github.com/users/avmgithub/repos", "events_url": "https://api.github.com/users/avmgithub/events{/privacy}", "received_events_url": "https://api.github.com/users/avmgithub/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-20T19:00:02Z", "updated_at": "2018-08-20T21:11:30Z", "closed_at": "2018-08-20T21:11:30Z", "author_association": "CONTRIBUTOR", "body_html": "<p>ppc64le build breaks after <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"350151649\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/10478\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/pytorch/pytorch/pull/10478/hovercard\" href=\"https://github.com/pytorch/pytorch/pull/10478\">#10478</a>.<br>\nI am building with :</p>\n<p>export USE_SYSTEM_NCCL=TRUE<br>\nexport NCCL_ROOT_DIR=/usr/local/cuda/<br>\nexport NCCL_LIB_DIR=/usr/local/cuda/lib64<br>\nexport NCCL_INCLUDE_DIR=/usr/local/cuda/include</p>\n<p>I have NCCL2 from nvidia<br>\ncuda 9.2<br>\ncudnn 7</p>\n<p>here is the log :<br>\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp: In member function \u2018std::vectorat::Tensor NCCLTest::getTensors()\u2019:<br>\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:99:49: error: no matching function for call to \u2018at::Tensor::toBackend(const at::DeviceType&amp;)\u2019<br>\noutputs[i] = inputs_[i].toBackend(at::kCPU);<br>\n^<br>\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:99:49: note: candidate is:<br>\nIn file included from /pytorch/torch/lib/tmp_install/include/ATen/NativeFunctions.h:7:0,<br>\nfrom /pytorch/torch/lib/tmp_install/include/ATen/Functions.h:11,<br>\nfrom /pytorch/torch/lib/tmp_install/include/ATen/ATen.h:13,<br>\nfrom /pytorch/torch/lib/c10d/../c10d/ProcessGroup.hpp:7,<br>\nfrom /pytorch/torch/lib/c10d/../c10d/ProcessGroupNCCL.hpp:8,<br>\nfrom /pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:5:<br>\n/pytorch/torch/lib/tmp_install/include/ATen/TensorMethods.h:38:15: note: at::Tensor at::Tensor::toBackend(at::Backend) const<br>\ninline Tensor Tensor::toBackend(Backend b) const {<br>\n^<br>\n/pytorch/torch/lib/tmp_install/include/ATen/TensorMethods.h:38:15: note:   no known conversion for argument 1 from \u2018const at::DeviceType\u2019 to \u2018at::Backend\u2019<br>\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp: In member function \u2018std::vector&lt;std::vectorat::Tensor &gt; NCCLTest::getOutputTensors()\u2019:<br>\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:118:58: error: no matching function for call to \u2018at::Tensor::toBackend(const at::DeviceType&amp;)\u2019<br>\noutputs[i][j] = outputs_[i][j].toBackend(at::kCPU);<br>\n^</p>\n<p>I noticed there is another reported build break pointing to backend() == kCPU as well ( <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"352040550\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/10678\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/10678/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/10678\">#10678</a>)</p>", "body_text": "ppc64le build breaks after #10478.\nI am building with :\nexport USE_SYSTEM_NCCL=TRUE\nexport NCCL_ROOT_DIR=/usr/local/cuda/\nexport NCCL_LIB_DIR=/usr/local/cuda/lib64\nexport NCCL_INCLUDE_DIR=/usr/local/cuda/include\nI have NCCL2 from nvidia\ncuda 9.2\ncudnn 7\nhere is the log :\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp: In member function \u2018std::vectorat::Tensor NCCLTest::getTensors()\u2019:\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:99:49: error: no matching function for call to \u2018at::Tensor::toBackend(const at::DeviceType&)\u2019\noutputs[i] = inputs_[i].toBackend(at::kCPU);\n^\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:99:49: note: candidate is:\nIn file included from /pytorch/torch/lib/tmp_install/include/ATen/NativeFunctions.h:7:0,\nfrom /pytorch/torch/lib/tmp_install/include/ATen/Functions.h:11,\nfrom /pytorch/torch/lib/tmp_install/include/ATen/ATen.h:13,\nfrom /pytorch/torch/lib/c10d/../c10d/ProcessGroup.hpp:7,\nfrom /pytorch/torch/lib/c10d/../c10d/ProcessGroupNCCL.hpp:8,\nfrom /pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:5:\n/pytorch/torch/lib/tmp_install/include/ATen/TensorMethods.h:38:15: note: at::Tensor at::Tensor::toBackend(at::Backend) const\ninline Tensor Tensor::toBackend(Backend b) const {\n^\n/pytorch/torch/lib/tmp_install/include/ATen/TensorMethods.h:38:15: note:   no known conversion for argument 1 from \u2018const at::DeviceType\u2019 to \u2018at::Backend\u2019\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp: In member function \u2018std::vector<std::vectorat::Tensor > NCCLTest::getOutputTensors()\u2019:\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:118:58: error: no matching function for call to \u2018at::Tensor::toBackend(const at::DeviceType&)\u2019\noutputs[i][j] = outputs_[i][j].toBackend(at::kCPU);\n^\nI noticed there is another reported build break pointing to backend() == kCPU as well ( #10678)", "body": "ppc64le build breaks after #10478.  \r\nI am building with :  \r\n\r\nexport USE_SYSTEM_NCCL=TRUE\r\nexport NCCL_ROOT_DIR=/usr/local/cuda/\r\nexport NCCL_LIB_DIR=/usr/local/cuda/lib64\r\nexport NCCL_INCLUDE_DIR=/usr/local/cuda/include\r\n\r\nI have NCCL2 from nvidia \r\ncuda 9.2 \r\ncudnn 7\r\n\r\nhere is the log : \r\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp: In member function \u2018std::vector<at::Tensor> NCCLTest::getTensors()\u2019:\r\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:99:49: error: no matching function for call to \u2018at::Tensor::toBackend(const at::DeviceType&)\u2019\r\n       outputs[i] = inputs_[i].toBackend(at::kCPU);\r\n                                                 ^\r\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:99:49: note: candidate is:\r\nIn file included from /pytorch/torch/lib/tmp_install/include/ATen/NativeFunctions.h:7:0,\r\n                 from /pytorch/torch/lib/tmp_install/include/ATen/Functions.h:11,\r\n                 from /pytorch/torch/lib/tmp_install/include/ATen/ATen.h:13,\r\n                 from /pytorch/torch/lib/c10d/../c10d/ProcessGroup.hpp:7,\r\n                 from /pytorch/torch/lib/c10d/../c10d/ProcessGroupNCCL.hpp:8,\r\n                 from /pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:5:\r\n/pytorch/torch/lib/tmp_install/include/ATen/TensorMethods.h:38:15: note: at::Tensor at::Tensor::toBackend(at::Backend) const\r\n inline Tensor Tensor::toBackend(Backend b) const {\r\n               ^\r\n/pytorch/torch/lib/tmp_install/include/ATen/TensorMethods.h:38:15: note:   no known conversion for argument 1 from \u2018const at::DeviceType\u2019 to \u2018at::Backend\u2019\r\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp: In member function \u2018std::vector<std::vector<at::Tensor> > NCCLTest::getOutputTensors()\u2019:\r\n/pytorch/torch/lib/c10d/test/ProcessGroupNCCLTest.cpp:118:58: error: no matching function for call to \u2018at::Tensor::toBackend(const at::DeviceType&)\u2019\r\n         outputs[i][j] = outputs_[i][j].toBackend(at::kCPU);\r\n                                                         ^\r\n\r\nI noticed there is another reported build break pointing to backend() == kCPU as well ( #10678)\r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/299671561", "html_url": "https://github.com/pytorch/pytorch/pull/1491#issuecomment-299671561", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/1491", "id": 299671561, "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTY3MTU2MQ==", "user": {"login": "lantiga", "id": 191033, "node_id": "MDQ6VXNlcjE5MTAzMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/191033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lantiga", "html_url": "https://github.com/lantiga", "followers_url": "https://api.github.com/users/lantiga/followers", "following_url": "https://api.github.com/users/lantiga/following{/other_user}", "gists_url": "https://api.github.com/users/lantiga/gists{/gist_id}", "starred_url": "https://api.github.com/users/lantiga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lantiga/subscriptions", "organizations_url": "https://api.github.com/users/lantiga/orgs", "repos_url": "https://api.github.com/users/lantiga/repos", "events_url": "https://api.github.com/users/lantiga/events{/privacy}", "received_events_url": "https://api.github.com/users/lantiga/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-06T23:10:35Z", "updated_at": "2017-05-06T23:10:35Z", "author_association": "COLLABORATOR", "body_html": "<p>Issue with test_pack_padded_sequence:</p>\n<p><code>expected_data</code> here <a href=\"https://github.com/pytorch/pytorch/blob/master/test/test_nn.py#L1480-L1482\">https://github.com/pytorch/pytorch/blob/master/test/test_nn.py#L1480-L1482</a> is constructed incorrectly.</p>\n<p><code>padded</code> is</p>\n<pre><code>(0 ,.,.) = \n  101  102  103  104  105\n  201  202  203  204  205\n  301  302  303  304  305\n  401  402  403  404  405\n  501  502  503  504  505\n  601  602  603  604  605\n  701  702  703  704  705\n\n(1 ,.,.) = \n  106  107  108  109  110\n  206  207  208  209  210\n  306  307  308  309  310\n  406  407  408  409  410\n  506  507  508  509  510\n  606  607  608  609  610\n    0    0    0    0    0\n\n(2 ,.,.) = \n  111  112  113  114  115\n  211  212  213  214  215\n  311  312  313  314  315\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(3 ,.,.) = \n  116  117  118  119  120\n  216  217  218  219  220\n  316  317  318  319  320\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(4 ,.,.) = \n  121  122  123  124  125\n  221  222  223  224  225\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(5 ,.,.) = \n  126  127  128  129  130\n  226  227  228  229  230\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(6 ,.,.) = \n  131  132  133  134  135\n  231  232  233  234  235\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(7 ,.,.) = \n  136  137  138  139  140\n  236  237  238  239  240\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(8 ,.,.) = \n  141  142  143  144  145\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(9 ,.,.) = \n  146  147  148  149  150\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n</code></pre>\n<p><code>packed</code> should be</p>\n<pre><code>  101   102   103   104   105\n  201   202   203   204   205\n  301   302   303   304   305\n  401   402   403   404   405\n  501   502   503   504   505\n  601   602   603   604   605\n  701   702   703   704   705\n  106   107   108   109   110\n  206   207   208   209   210\n  306   307   308   309   310\n  406   407   408   409   410\n  506   507   508   509   510\n  606   607   608   609   610\n  111   112   113   114   115\n  211   212   213   214   215\n  311   312   313   314   315\n  116   117   118   119   120\n  216   217   218   219   220\n  316   317   318   319   320\n  121   122   123   124   125\n  221   222   223   224   225\n  126   127   128   129   130\n  226   227   228   229   230\n  131   132   133   134   135\n  231   232   233   234   235\n  136   137   138   139   140\n  236   237   238   239   240\n  141   142   143   144   145\n  146   147   148   149   150\n[torch.DoubleTensor of size 29x5]\n</code></pre>\n<p>while <code>expected_data</code> is</p>\n<pre><code>1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n 201\n 202\n 203\n 204\n 205\n 301\n 302\n 303\n 304\n 305\n 401\n 402\n 403\n 404\n 405\n 501\n 502\n 503\n 504\n 505\n 601\n 602\n 603\n 604\n 605\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n 201\n 202\n 203\n 204\n 205\n 301\n 302\n 303\n 304\n 305\n 401\n 402\n 403\n 404\n 405\n 501\n 502\n 503\n 504\n 505\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n 201\n 202\n 203\n 204\n 205\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n 201\n 202\n 203\n 204\n 205\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n   1\n   2\n   3\n   4\n   5\n   1\n   2\n   3\n   4\n   5\n[torch.DoubleTensor of size 145]\n</code></pre>", "body_text": "Issue with test_pack_padded_sequence:\nexpected_data here https://github.com/pytorch/pytorch/blob/master/test/test_nn.py#L1480-L1482 is constructed incorrectly.\npadded is\n(0 ,.,.) = \n  101  102  103  104  105\n  201  202  203  204  205\n  301  302  303  304  305\n  401  402  403  404  405\n  501  502  503  504  505\n  601  602  603  604  605\n  701  702  703  704  705\n\n(1 ,.,.) = \n  106  107  108  109  110\n  206  207  208  209  210\n  306  307  308  309  310\n  406  407  408  409  410\n  506  507  508  509  510\n  606  607  608  609  610\n    0    0    0    0    0\n\n(2 ,.,.) = \n  111  112  113  114  115\n  211  212  213  214  215\n  311  312  313  314  315\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(3 ,.,.) = \n  116  117  118  119  120\n  216  217  218  219  220\n  316  317  318  319  320\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(4 ,.,.) = \n  121  122  123  124  125\n  221  222  223  224  225\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(5 ,.,.) = \n  126  127  128  129  130\n  226  227  228  229  230\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(6 ,.,.) = \n  131  132  133  134  135\n  231  232  233  234  235\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(7 ,.,.) = \n  136  137  138  139  140\n  236  237  238  239  240\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(8 ,.,.) = \n  141  142  143  144  145\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\n(9 ,.,.) = \n  146  147  148  149  150\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n    0    0    0    0    0\n\npacked should be\n  101   102   103   104   105\n  201   202   203   204   205\n  301   302   303   304   305\n  401   402   403   404   405\n  501   502   503   504   505\n  601   602   603   604   605\n  701   702   703   704   705\n  106   107   108   109   110\n  206   207   208   209   210\n  306   307   308   309   310\n  406   407   408   409   410\n  506   507   508   509   510\n  606   607   608   609   610\n  111   112   113   114   115\n  211   212   213   214   215\n  311   312   313   314   315\n  116   117   118   119   120\n  216   217   218   219   220\n  316   317   318   319   320\n  121   122   123   124   125\n  221   222   223   224   225\n  126   127   128   129   130\n  226   227   228   229   230\n  131   132   133   134   135\n  231   232   233   234   235\n  136   137   138   139   140\n  236   237   238   239   240\n  141   142   143   144   145\n  146   147   148   149   150\n[torch.DoubleTensor of size 29x5]\n\nwhile expected_data is\n1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n 201\n 202\n 203\n 204\n 205\n 301\n 302\n 303\n 304\n 305\n 401\n 402\n 403\n 404\n 405\n 501\n 502\n 503\n 504\n 505\n 601\n 602\n 603\n 604\n 605\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n 201\n 202\n 203\n 204\n 205\n 301\n 302\n 303\n 304\n 305\n 401\n 402\n 403\n 404\n 405\n 501\n 502\n 503\n 504\n 505\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n 201\n 202\n 203\n 204\n 205\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n 201\n 202\n 203\n 204\n 205\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n   1\n   2\n   3\n   4\n   5\n 101\n 102\n 103\n 104\n 105\n   1\n   2\n   3\n   4\n   5\n   1\n   2\n   3\n   4\n   5\n[torch.DoubleTensor of size 145]", "body": "Issue with test_pack_padded_sequence:\r\n\r\n`expected_data` here https://github.com/pytorch/pytorch/blob/master/test/test_nn.py#L1480-L1482 is constructed incorrectly.\r\n\r\n`padded` is\r\n```\r\n(0 ,.,.) = \r\n  101  102  103  104  105\r\n  201  202  203  204  205\r\n  301  302  303  304  305\r\n  401  402  403  404  405\r\n  501  502  503  504  505\r\n  601  602  603  604  605\r\n  701  702  703  704  705\r\n\r\n(1 ,.,.) = \r\n  106  107  108  109  110\r\n  206  207  208  209  210\r\n  306  307  308  309  310\r\n  406  407  408  409  410\r\n  506  507  508  509  510\r\n  606  607  608  609  610\r\n    0    0    0    0    0\r\n\r\n(2 ,.,.) = \r\n  111  112  113  114  115\r\n  211  212  213  214  215\r\n  311  312  313  314  315\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n\r\n(3 ,.,.) = \r\n  116  117  118  119  120\r\n  216  217  218  219  220\r\n  316  317  318  319  320\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n\r\n(4 ,.,.) = \r\n  121  122  123  124  125\r\n  221  222  223  224  225\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n\r\n(5 ,.,.) = \r\n  126  127  128  129  130\r\n  226  227  228  229  230\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n\r\n(6 ,.,.) = \r\n  131  132  133  134  135\r\n  231  232  233  234  235\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n\r\n(7 ,.,.) = \r\n  136  137  138  139  140\r\n  236  237  238  239  240\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n\r\n(8 ,.,.) = \r\n  141  142  143  144  145\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n\r\n(9 ,.,.) = \r\n  146  147  148  149  150\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n    0    0    0    0    0\r\n```\r\n\r\n`packed` should be\r\n```\r\n  101   102   103   104   105\r\n  201   202   203   204   205\r\n  301   302   303   304   305\r\n  401   402   403   404   405\r\n  501   502   503   504   505\r\n  601   602   603   604   605\r\n  701   702   703   704   705\r\n  106   107   108   109   110\r\n  206   207   208   209   210\r\n  306   307   308   309   310\r\n  406   407   408   409   410\r\n  506   507   508   509   510\r\n  606   607   608   609   610\r\n  111   112   113   114   115\r\n  211   212   213   214   215\r\n  311   312   313   314   315\r\n  116   117   118   119   120\r\n  216   217   218   219   220\r\n  316   317   318   319   320\r\n  121   122   123   124   125\r\n  221   222   223   224   225\r\n  126   127   128   129   130\r\n  226   227   228   229   230\r\n  131   132   133   134   135\r\n  231   232   233   234   235\r\n  136   137   138   139   140\r\n  236   237   238   239   240\r\n  141   142   143   144   145\r\n  146   147   148   149   150\r\n[torch.DoubleTensor of size 29x5]\r\n```\r\n\r\nwhile `expected_data` is\r\n```\r\n1\r\n   2\r\n   3\r\n   4\r\n   5\r\n 101\r\n 102\r\n 103\r\n 104\r\n 105\r\n 201\r\n 202\r\n 203\r\n 204\r\n 205\r\n 301\r\n 302\r\n 303\r\n 304\r\n 305\r\n 401\r\n 402\r\n 403\r\n 404\r\n 405\r\n 501\r\n 502\r\n 503\r\n 504\r\n 505\r\n 601\r\n 602\r\n 603\r\n 604\r\n 605\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n 101\r\n 102\r\n 103\r\n 104\r\n 105\r\n 201\r\n 202\r\n 203\r\n 204\r\n 205\r\n 301\r\n 302\r\n 303\r\n 304\r\n 305\r\n 401\r\n 402\r\n 403\r\n 404\r\n 405\r\n 501\r\n 502\r\n 503\r\n 504\r\n 505\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n 101\r\n 102\r\n 103\r\n 104\r\n 105\r\n 201\r\n 202\r\n 203\r\n 204\r\n 205\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n 101\r\n 102\r\n 103\r\n 104\r\n 105\r\n 201\r\n 202\r\n 203\r\n 204\r\n 205\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n 101\r\n 102\r\n 103\r\n 104\r\n 105\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n 101\r\n 102\r\n 103\r\n 104\r\n 105\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n 101\r\n 102\r\n 103\r\n 104\r\n 105\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n 101\r\n 102\r\n 103\r\n 104\r\n 105\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n   1\r\n   2\r\n   3\r\n   4\r\n   5\r\n[torch.DoubleTensor of size 145]\r\n```"}
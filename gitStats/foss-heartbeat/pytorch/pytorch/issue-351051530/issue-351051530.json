{"url": "https://api.github.com/repos/pytorch/pytorch/issues/10576", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/10576/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/10576/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/10576/events", "html_url": "https://github.com/pytorch/pytorch/issues/10576", "id": 351051530, "node_id": "MDU6SXNzdWUzNTEwNTE1MzA=", "number": 10576, "title": "[Caffe2] Error C2280 on Windows", "user": {"login": "xkszltl", "id": 5203025, "node_id": "MDQ6VXNlcjUyMDMwMjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/5203025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xkszltl", "html_url": "https://github.com/xkszltl", "followers_url": "https://api.github.com/users/xkszltl/followers", "following_url": "https://api.github.com/users/xkszltl/following{/other_user}", "gists_url": "https://api.github.com/users/xkszltl/gists{/gist_id}", "starred_url": "https://api.github.com/users/xkszltl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xkszltl/subscriptions", "organizations_url": "https://api.github.com/users/xkszltl/orgs", "repos_url": "https://api.github.com/users/xkszltl/repos", "events_url": "https://api.github.com/users/xkszltl/events{/privacy}", "received_events_url": "https://api.github.com/users/xkszltl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-16T04:29:58Z", "updated_at": "2018-08-22T00:19:18Z", "closed_at": "2018-08-22T00:19:18Z", "author_association": "CONTRIBUTOR", "body_html": "<h2>Issue description</h2>\n<p>This seems to be an error inside observer:<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/pytorch/pytorch/blob/0fe4cb10e3b10a657edf454411c3c549403a0878/caffe2/core/observer.h#L152\">pytorch/caffe2/core/observer.h</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 152\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/pytorch/pytorch/commit/0fe4cb10e3b10a657edf454411c3c549403a0878\">0fe4cb1</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L152\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"152\"></td>\n          <td id=\"LC152\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> std::vector&lt;std::unique_ptr&lt;Observer&gt;&gt; observers_list_; </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>Getting a lot of error C2280 when building on Windows.<br>\nLooks like it's caused by <code>vector&lt;unique_ptr&lt;...&gt;&gt;</code>'s copy assignment <code>T&amp; operator =(const T&amp;)</code>, which calls the deleted copy assignment of unique_ptr.</p>\n<p>Even though it doesn't seem to be used in anywhere, it will still be defined when instantiate vector.<br>\nCorrect me if I'm wrong.</p>\n<pre><code>c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\xutility(2400): error C2280: 'std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt; &amp;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;::operator =(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': attempting to reference a deleted function [pytorch\\build\\caffe2\\caffe2.vcxproj]\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\memory(2395): note: see declaration of 'std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;::operator ='\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\xutility(2419): note: see reference to function template instantiation '_OutIt std::_Copy_unchecked1&lt;_InIt,_OutIt&gt;(_InIt,_InIt,_OutIt,std::_General_ptr_iterator_tag)' being compiled\n          with\n          [\n              _OutIt=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *,\n              _InIt=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1432): note: see reference to function template instantiation '_OutIt *std::_Copy_unchecked&lt;_Iter,std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;*&gt;(_InIt,_InIt,_OutIt)' being compiled\n          with\n          [\n              _OutIt=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *,\n              _Iter=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *,\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,\n              _InIt=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1450): note: see reference to function template instantiation 'void std::vector&lt;std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::_Assign_range&lt;_Iter&gt;(_Iter,_Iter,std::forward_iterator_tag)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,\n              _Iter=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1450): note: see reference to function template instantiation 'void std::vector&lt;std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::_Assign_range&lt;_Iter&gt;(_Iter,_Iter,std::forward_iterator_tag)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,\n              _Iter=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1473): note: see reference to function template instantiation 'void std::vector&lt;std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::assign&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;*,void&gt;(_Iter,_Iter)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,\n              _Iter=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1473): note: see reference to function template instantiation 'void std::vector&lt;std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::assign&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;*,void&gt;(_Iter,_Iter)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,\n              _Iter=std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;&gt;&gt; *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1459): note: while compiling class template member function 'std::vector&lt;std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt; &amp;std::vector&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::operator =(const std::vector&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt; &amp;)'\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  pytorch\\caffe2\\core\\operator.h(411): note: see reference to function template instantiation 'std::vector&lt;std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt; &amp;std::vector&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::operator =(const std::vector&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt; &amp;)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  pytorch\\caffe2\\core\\observer.h(152): note: see reference to class template instantiation 'std::vector&lt;std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  pytorch\\caffe2\\core\\operator.h(30): note: see reference to class template instantiation 'caffe2::Observable&lt;caffe2::OperatorBase&gt;' being compiled (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\memory(2395): note: 'std::unique_ptr&lt;caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;,std::default_delete&lt;_Ty&gt;&gt; &amp;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;::operator =(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': function was explicitly deleted\n          with\n          [\n              _Ty=caffe2::ObserverBase&lt;caffe2::OperatorBase&gt;\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n</code></pre>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: C2</li>\n<li>How you installed PyTorch (conda, pip, source): src</li>\n<li>Build command you used (if compiling from source): cmake</li>\n<li>OS: Win10</li>\n<li>PyTorch version: master</li>\n<li>VS version (if compiling from source): 2017</li>\n<li>CMake version: 3.12</li>\n</ul>", "body_text": "Issue description\nThis seems to be an error inside observer:\n\n  \n    \n      pytorch/caffe2/core/observer.h\n    \n    \n         Line 152\n      in\n      0fe4cb1\n    \n    \n    \n    \n\n        \n          \n           std::vector<std::unique_ptr<Observer>> observers_list_; \n        \n    \n  \n\n\nGetting a lot of error C2280 when building on Windows.\nLooks like it's caused by vector<unique_ptr<...>>'s copy assignment T& operator =(const T&), which calls the deleted copy assignment of unique_ptr.\nEven though it doesn't seem to be used in anywhere, it will still be defined when instantiate vector.\nCorrect me if I'm wrong.\nc:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\xutility(2400): error C2280: 'std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>> &std::unique_ptr<_Ty,std::default_delete<_Ty>>::operator =(const std::unique_ptr<_Ty,std::default_delete<_Ty>> &)': attempting to reference a deleted function [pytorch\\build\\caffe2\\caffe2.vcxproj]\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\memory(2395): note: see declaration of 'std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>::operator ='\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\xutility(2419): note: see reference to function template instantiation '_OutIt std::_Copy_unchecked1<_InIt,_OutIt>(_InIt,_InIt,_OutIt,std::_General_ptr_iterator_tag)' being compiled\n          with\n          [\n              _OutIt=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *,\n              _InIt=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1432): note: see reference to function template instantiation '_OutIt *std::_Copy_unchecked<_Iter,std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>*>(_InIt,_InIt,_OutIt)' being compiled\n          with\n          [\n              _OutIt=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *,\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *,\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\n              _InIt=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1450): note: see reference to function template instantiation 'void std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::_Assign_range<_Iter>(_Iter,_Iter,std::forward_iterator_tag)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1450): note: see reference to function template instantiation 'void std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::_Assign_range<_Iter>(_Iter,_Iter,std::forward_iterator_tag)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1473): note: see reference to function template instantiation 'void std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::assign<std::unique_ptr<_Ty,std::default_delete<_Ty>>*,void>(_Iter,_Iter)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1473): note: see reference to function template instantiation 'void std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::assign<std::unique_ptr<_Ty,std::default_delete<_Ty>>*,void>(_Iter,_Iter)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1459): note: while compiling class template member function 'std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>> &std::vector<std::unique_ptr<_Ty,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::operator =(const std::vector<std::unique_ptr<_Ty,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>> &)'\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  pytorch\\caffe2\\core\\operator.h(411): note: see reference to function template instantiation 'std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>> &std::vector<std::unique_ptr<_Ty,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::operator =(const std::vector<std::unique_ptr<_Ty,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>> &)' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  pytorch\\caffe2\\core\\observer.h(152): note: see reference to class template instantiation 'std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>' being compiled\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n  pytorch\\caffe2\\core\\operator.h(30): note: see reference to class template instantiation 'caffe2::Observable<caffe2::OperatorBase>' being compiled (compiling source file pytorch\\caffe2\\core\\event.cc)\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\memory(2395): note: 'std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>> &std::unique_ptr<_Ty,std::default_delete<_Ty>>::operator =(const std::unique_ptr<_Ty,std::default_delete<_Ty>> &)': function was explicitly deleted\n          with\n          [\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\n\nSystem Info\n\nPyTorch or Caffe2: C2\nHow you installed PyTorch (conda, pip, source): src\nBuild command you used (if compiling from source): cmake\nOS: Win10\nPyTorch version: master\nVS version (if compiling from source): 2017\nCMake version: 3.12", "body": "## Issue description\r\n\r\nThis seems to be an error inside observer:\r\nhttps://github.com/pytorch/pytorch/blob/0fe4cb10e3b10a657edf454411c3c549403a0878/caffe2/core/observer.h#L152\r\n\r\nGetting a lot of error C2280 when building on Windows.\r\nLooks like it's caused by `vector<unique_ptr<...>>`'s copy assignment `T& operator =(const T&)`, which calls the deleted copy assignment of unique_ptr.\r\n\r\nEven though it doesn't seem to be used in anywhere, it will still be defined when instantiate vector.\r\nCorrect me if I'm wrong.\r\n\r\n```\r\nc:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\xutility(2400): error C2280: 'std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>> &std::unique_ptr<_Ty,std::default_delete<_Ty>>::operator =(const std::unique_ptr<_Ty,std::default_delete<_Ty>> &)': attempting to reference a deleted function [pytorch\\build\\caffe2\\caffe2.vcxproj]\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\memory(2395): note: see declaration of 'std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>::operator ='\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\xutility(2419): note: see reference to function template instantiation '_OutIt std::_Copy_unchecked1<_InIt,_OutIt>(_InIt,_InIt,_OutIt,std::_General_ptr_iterator_tag)' being compiled\r\n          with\r\n          [\r\n              _OutIt=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *,\r\n              _InIt=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1432): note: see reference to function template instantiation '_OutIt *std::_Copy_unchecked<_Iter,std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>*>(_InIt,_InIt,_OutIt)' being compiled\r\n          with\r\n          [\r\n              _OutIt=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *,\r\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *,\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\r\n              _InIt=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1450): note: see reference to function template instantiation 'void std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::_Assign_range<_Iter>(_Iter,_Iter,std::forward_iterator_tag)' being compiled\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\r\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1450): note: see reference to function template instantiation 'void std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::_Assign_range<_Iter>(_Iter,_Iter,std::forward_iterator_tag)' being compiled\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\r\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1473): note: see reference to function template instantiation 'void std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::assign<std::unique_ptr<_Ty,std::default_delete<_Ty>>*,void>(_Iter,_Iter)' being compiled\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\r\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1473): note: see reference to function template instantiation 'void std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::assign<std::unique_ptr<_Ty,std::default_delete<_Ty>>*,void>(_Iter,_Iter)' being compiled\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>,\r\n              _Iter=std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<caffe2::ObserverBase<caffe2::OperatorBase>>> *\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\vector(1459): note: while compiling class template member function 'std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>> &std::vector<std::unique_ptr<_Ty,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::operator =(const std::vector<std::unique_ptr<_Ty,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>> &)'\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  pytorch\\caffe2\\core\\operator.h(411): note: see reference to function template instantiation 'std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>> &std::vector<std::unique_ptr<_Ty,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>::operator =(const std::vector<std::unique_ptr<_Ty,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>> &)' being compiled\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  pytorch\\caffe2\\core\\observer.h(152): note: see reference to class template instantiation 'std::vector<std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>>,std::allocator<std::unique_ptr<_Ty,std::default_delete<_Ty>>>>' being compiled\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  pytorch\\caffe2\\core\\operator.h(30): note: see reference to class template instantiation 'caffe2::Observable<caffe2::OperatorBase>' being compiled (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n  c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.13.26128\\include\\memory(2395): note: 'std::unique_ptr<caffe2::ObserverBase<caffe2::OperatorBase>,std::default_delete<_Ty>> &std::unique_ptr<_Ty,std::default_delete<_Ty>>::operator =(const std::unique_ptr<_Ty,std::default_delete<_Ty>> &)': function was explicitly deleted\r\n          with\r\n          [\r\n              _Ty=caffe2::ObserverBase<caffe2::OperatorBase>\r\n          ] (compiling source file pytorch\\caffe2\\core\\event.cc)\r\n```\r\n\r\n## System Info\r\n- PyTorch or Caffe2: C2\r\n- How you installed PyTorch (conda, pip, source): src\r\n- Build command you used (if compiling from source): cmake\r\n- OS: Win10\r\n- PyTorch version: master\r\n- VS version (if compiling from source): 2017\r\n- CMake version: 3.12"}
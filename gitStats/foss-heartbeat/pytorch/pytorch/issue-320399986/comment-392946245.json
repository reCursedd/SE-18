{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/392946245", "html_url": "https://github.com/pytorch/pytorch/pull/7300#issuecomment-392946245", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7300", "id": 392946245, "node_id": "MDEyOklzc3VlQ29tbWVudDM5Mjk0NjI0NQ==", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-29T21:09:52Z", "updated_at": "2018-05-29T21:09:52Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Failure looks legit-ish?</p>\n<pre><code>19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp: In instantiation of 'static thd::GlooCache::key_type thd::gloo_cache::algorithm_spec&lt;(thd::CollectiveType)3u, T&gt;::key(THDGroup, thd::DeviceType, std::size_t, std::size_t, THDReduceOp) [with T = float; thd::GlooCache::key_type = std::tuple&lt;thd::CollectiveType, int, thd::DeviceType, int, long unsigned int, long unsigned int, THDReduceOp, unsigned int&gt;; THDGroup = int; std::size_t = long unsigned int]':\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:158:53:   required from 'thd::GlooCache::value_type thd::GlooCache::getAlgorithm(THDGroup, const thd::DataChannelGloo::Group&amp;, Args ...) [with thd::CollectiveType D = (thd::CollectiveType)3u; T = float; Args = {thd::DeviceType, long unsigned int, long int, THDReduceOp}; thd::GlooCache::value_type = std::tuple&lt;std::shared_ptr&lt;gloo::Algorithm&gt;, std::shared_ptr&lt;char&gt;, std::shared_ptr&lt;char&gt;, std::shared_ptr&lt;std::mutex&gt; &gt;; THDGroup = int]'\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/DataChannelGloo.cpp:223:89:   required from 'void thd::DataChannelGloo::allReduceT(at::Tensor&amp;, THDReduceOp, THDGroup) [with T = float; THDGroup = int]'\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/DataChannelGloo.cpp:236:3:   required from here\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:300:67: error: 'THDGetCudaState' was not declared in this scope\n19:06:38        auto cuda_stream = THCState_getCurrentStream(THDGetCudaState());\n19:06:38                                                                    ^\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:300:51: error: 'THCState_getCurrentStream' was not declared in this scope\n19:06:38        auto cuda_stream = THCState_getCurrentStream(THDGetCudaState());\n19:06:38                                                    ^\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:301:30: error: 'THDGetStreamId' was not declared in this scope\n19:06:38        stream = THDGetStreamId(cuda_stream);\n</code></pre>\n<p>Also needs rebase.</p>", "body_text": "Failure looks legit-ish?\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp: In instantiation of 'static thd::GlooCache::key_type thd::gloo_cache::algorithm_spec<(thd::CollectiveType)3u, T>::key(THDGroup, thd::DeviceType, std::size_t, std::size_t, THDReduceOp) [with T = float; thd::GlooCache::key_type = std::tuple<thd::CollectiveType, int, thd::DeviceType, int, long unsigned int, long unsigned int, THDReduceOp, unsigned int>; THDGroup = int; std::size_t = long unsigned int]':\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:158:53:   required from 'thd::GlooCache::value_type thd::GlooCache::getAlgorithm(THDGroup, const thd::DataChannelGloo::Group&, Args ...) [with thd::CollectiveType D = (thd::CollectiveType)3u; T = float; Args = {thd::DeviceType, long unsigned int, long int, THDReduceOp}; thd::GlooCache::value_type = std::tuple<std::shared_ptr<gloo::Algorithm>, std::shared_ptr<char>, std::shared_ptr<char>, std::shared_ptr<std::mutex> >; THDGroup = int]'\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/DataChannelGloo.cpp:223:89:   required from 'void thd::DataChannelGloo::allReduceT(at::Tensor&, THDReduceOp, THDGroup) [with T = float; THDGroup = int]'\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/DataChannelGloo.cpp:236:3:   required from here\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:300:67: error: 'THDGetCudaState' was not declared in this scope\n19:06:38        auto cuda_stream = THCState_getCurrentStream(THDGetCudaState());\n19:06:38                                                                    ^\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:300:51: error: 'THCState_getCurrentStream' was not declared in this scope\n19:06:38        auto cuda_stream = THCState_getCurrentStream(THDGetCudaState());\n19:06:38                                                    ^\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:301:30: error: 'THDGetStreamId' was not declared in this scope\n19:06:38        stream = THDGetStreamId(cuda_stream);\n\nAlso needs rebase.", "body": "Failure looks legit-ish?\r\n\r\n```\r\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp: In instantiation of 'static thd::GlooCache::key_type thd::gloo_cache::algorithm_spec<(thd::CollectiveType)3u, T>::key(THDGroup, thd::DeviceType, std::size_t, std::size_t, THDReduceOp) [with T = float; thd::GlooCache::key_type = std::tuple<thd::CollectiveType, int, thd::DeviceType, int, long unsigned int, long unsigned int, THDReduceOp, unsigned int>; THDGroup = int; std::size_t = long unsigned int]':\r\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:158:53:   required from 'thd::GlooCache::value_type thd::GlooCache::getAlgorithm(THDGroup, const thd::DataChannelGloo::Group&, Args ...) [with thd::CollectiveType D = (thd::CollectiveType)3u; T = float; Args = {thd::DeviceType, long unsigned int, long int, THDReduceOp}; thd::GlooCache::value_type = std::tuple<std::shared_ptr<gloo::Algorithm>, std::shared_ptr<char>, std::shared_ptr<char>, std::shared_ptr<std::mutex> >; THDGroup = int]'\r\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/DataChannelGloo.cpp:223:89:   required from 'void thd::DataChannelGloo::allReduceT(at::Tensor&, THDReduceOp, THDGroup) [with T = float; THDGroup = int]'\r\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/DataChannelGloo.cpp:236:3:   required from here\r\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:300:67: error: 'THDGetCudaState' was not declared in this scope\r\n19:06:38        auto cuda_stream = THCState_getCurrentStream(THDGetCudaState());\r\n19:06:38                                                                    ^\r\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:300:51: error: 'THCState_getCurrentStream' was not declared in this scope\r\n19:06:38        auto cuda_stream = THCState_getCurrentStream(THDGetCudaState());\r\n19:06:38                                                    ^\r\n19:06:38 /var/lib/jenkins/workspace/torch/lib/THD/base/data_channels/GlooCache.hpp:301:30: error: 'THDGetStreamId' was not declared in this scope\r\n19:06:38        stream = THDGetStreamId(cuda_stream);\r\n```\r\n\r\nAlso needs rebase."}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/353412582", "html_url": "https://github.com/pytorch/pytorch/issues/4271#issuecomment-353412582", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/4271", "id": 353412582, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzQxMjU4Mg==", "user": {"login": "kashif", "id": 8100, "node_id": "MDQ6VXNlcjgxMDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/8100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kashif", "html_url": "https://github.com/kashif", "followers_url": "https://api.github.com/users/kashif/followers", "following_url": "https://api.github.com/users/kashif/following{/other_user}", "gists_url": "https://api.github.com/users/kashif/gists{/gist_id}", "starred_url": "https://api.github.com/users/kashif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kashif/subscriptions", "organizations_url": "https://api.github.com/users/kashif/orgs", "repos_url": "https://api.github.com/users/kashif/repos", "events_url": "https://api.github.com/users/kashif/events{/privacy}", "received_events_url": "https://api.github.com/users/kashif/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-21T17:42:13Z", "updated_at": "2017-12-21T17:42:13Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4583066\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/apaszke\">@apaszke</a> any idea how to get the indicies for scatter from the <code>grad</code>? Having trouble finding the right API... at the moment I have something like:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-c1\">...</span>\n\ntorch.max(old_max_exp_avg_sq_values, exp_avg_sq_update_values, <span class=\"pl-v\">out</span><span class=\"pl-k\">=</span>old_max_exp_avg_sq_values)\ndenom <span class=\"pl-k\">=</span> old_max_exp_avg_sq_values.sqrt_().add_(group[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>eps<span class=\"pl-pds\">'</span></span>])\nmax_exp_avg_sq.scatter_(<span class=\"pl-c1\">0</span>, grad_indices, old_max_exp_avg_sq_values)\n<span class=\"pl-c1\">...</span></pre></div>", "body_text": "@apaszke any idea how to get the indicies for scatter from the grad? Having trouble finding the right API... at the moment I have something like:\n...\n\ntorch.max(old_max_exp_avg_sq_values, exp_avg_sq_update_values, out=old_max_exp_avg_sq_values)\ndenom = old_max_exp_avg_sq_values.sqrt_().add_(group['eps'])\nmax_exp_avg_sq.scatter_(0, grad_indices, old_max_exp_avg_sq_values)\n...", "body": "@apaszke any idea how to get the indicies for scatter from the `grad`? Having trouble finding the right API... at the moment I have something like:\r\n\r\n```python\r\n...\r\n\r\ntorch.max(old_max_exp_avg_sq_values, exp_avg_sq_update_values, out=old_max_exp_avg_sq_values)\r\ndenom = old_max_exp_avg_sq_values.sqrt_().add_(group['eps'])\r\nmax_exp_avg_sq.scatter_(0, grad_indices, old_max_exp_avg_sq_values)\r\n...\r\n```"}
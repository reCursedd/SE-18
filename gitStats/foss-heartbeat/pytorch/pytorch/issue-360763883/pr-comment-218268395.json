{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/218268395", "pull_request_review_id": 156167456, "id": 218268395, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxODI2ODM5NQ==", "diff_hunk": "@@ -47,7 +47,9 @@ def __init__(self, probs=None, logits=None, validate_args=None):\n         if probs is not None:\n             if probs.dim() < 1:\n                 raise ValueError(\"`probs` parameter must be at least one-dimensional.\")\n-            self.probs = probs / probs.sum(-1, keepdim=True)\n+            sum_probs = probs.detach().cpu().numpy().sum(-1, keepdims=True)", "path": "torch/distributions/categorical.py", "position": 5, "original_position": 5, "commit_id": "af2a1b8fbc273d5095dffcf7ba886bdb46851b6c", "original_commit_id": "af2a1b8fbc273d5095dffcf7ba886bdb46851b6c", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars0.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "body": "Just to be clear: it would be \"fine\" to keep this operation in if you reimplement it with PyTorch only code.\r\n\r\nI don't know enough about the API here to know if we should force normalization for users.", "created_at": "2018-09-18T00:25:44Z", "updated_at": "2018-11-23T15:51:31Z", "html_url": "https://github.com/pytorch/pytorch/pull/11749#discussion_r218268395", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/11749", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/218268395"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/11749#discussion_r218268395"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/11749"}}, "body_html": "<p>Just to be clear: it would be \"fine\" to keep this operation in if you reimplement it with PyTorch only code.</p>\n<p>I don't know enough about the API here to know if we should force normalization for users.</p>", "body_text": "Just to be clear: it would be \"fine\" to keep this operation in if you reimplement it with PyTorch only code.\nI don't know enough about the API here to know if we should force normalization for users.", "in_reply_to_id": 218055627}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/401181335", "html_url": "https://github.com/pytorch/pytorch/issues/7420#issuecomment-401181335", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7420", "id": 401181335, "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTE4MTMzNQ==", "user": {"login": "hartb", "id": 18429659, "node_id": "MDQ6VXNlcjE4NDI5NjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/18429659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartb", "html_url": "https://github.com/hartb", "followers_url": "https://api.github.com/users/hartb/followers", "following_url": "https://api.github.com/users/hartb/following{/other_user}", "gists_url": "https://api.github.com/users/hartb/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartb/subscriptions", "organizations_url": "https://api.github.com/users/hartb/orgs", "repos_url": "https://api.github.com/users/hartb/repos", "events_url": "https://api.github.com/users/hartb/events{/privacy}", "received_events_url": "https://api.github.com/users/hartb/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-28T21:37:51Z", "updated_at": "2018-06-28T21:38:03Z", "author_association": "CONTRIBUTOR", "body_html": "<p>If I test only float16 the results change a bit, but are still repeatable, now:</p>\n<pre><code>AssertionError: tensor(1.00000e-05 *     \n       1.5258789062, dtype=torch.float16, device='cuda:0') not less than or equal to 1e-05\n</code></pre>\n<p>and</p>\n<pre><code>$ diff x_leaf.grad grad_x                               \n5c5                                      \n&lt;          [0.0141143799, 0.0502929688, -0.0027675629],                           \n---                                      \n&gt;          [0.0140991211, 0.0502929688, -0.0027675629],\n</code></pre>\n<p>And the mis-match is now always <code>2**-16</code> (I misspoke above, <code>3.0518e-05</code> == <code>2**-15</code>).</p>", "body_text": "If I test only float16 the results change a bit, but are still repeatable, now:\nAssertionError: tensor(1.00000e-05 *     \n       1.5258789062, dtype=torch.float16, device='cuda:0') not less than or equal to 1e-05\n\nand\n$ diff x_leaf.grad grad_x                               \n5c5                                      \n<          [0.0141143799, 0.0502929688, -0.0027675629],                           \n---                                      \n>          [0.0140991211, 0.0502929688, -0.0027675629],\n\nAnd the mis-match is now always 2**-16 (I misspoke above, 3.0518e-05 == 2**-15).", "body": "If I test only float16 the results change a bit, but are still repeatable, now:\r\n\r\n```\r\nAssertionError: tensor(1.00000e-05 *     \r\n       1.5258789062, dtype=torch.float16, device='cuda:0') not less than or equal to 1e-05\r\n```\r\n\r\nand\r\n\r\n```\r\n$ diff x_leaf.grad grad_x                               \r\n5c5                                      \r\n<          [0.0141143799, 0.0502929688, -0.0027675629],                           \r\n---                                      \r\n>          [0.0140991211, 0.0502929688, -0.0027675629],\r\n```\r\n\r\nAnd the mis-match is now always `2**-16` (I misspoke above, `3.0518e-05` == `2**-15`)."}
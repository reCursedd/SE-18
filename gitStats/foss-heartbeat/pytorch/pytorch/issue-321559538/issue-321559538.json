{"url": "https://api.github.com/repos/pytorch/pytorch/issues/7420", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/7420/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/7420/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/7420/events", "html_url": "https://github.com/pytorch/pytorch/issues/7420", "id": 321559538, "node_id": "MDU6SXNzdWUzMjE1NTk1Mzg=", "number": 7420, "title": "[ppc64le pytorch] test_nn failures when using dtype=torch.float16", "user": {"login": "avmgithub", "id": 9083746, "node_id": "MDQ6VXNlcjkwODM3NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/9083746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avmgithub", "html_url": "https://github.com/avmgithub", "followers_url": "https://api.github.com/users/avmgithub/followers", "following_url": "https://api.github.com/users/avmgithub/following{/other_user}", "gists_url": "https://api.github.com/users/avmgithub/gists{/gist_id}", "starred_url": "https://api.github.com/users/avmgithub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avmgithub/subscriptions", "organizations_url": "https://api.github.com/users/avmgithub/orgs", "repos_url": "https://api.github.com/users/avmgithub/repos", "events_url": "https://api.github.com/users/avmgithub/events{/privacy}", "received_events_url": "https://api.github.com/users/avmgithub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 443483881, "node_id": "MDU6TGFiZWw0NDM0ODM4ODE=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/todo", "name": "todo", "color": "c2e0c6", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2018-05-09T12:57:32Z", "updated_at": "2018-08-29T14:49:03Z", "closed_at": "2018-08-29T14:49:03Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I'm getting the following two test failures which may be related to using torch.float16<br>\nIt only happens when running on ppc64le Power9 (volta gpu).    It does not happen on Power8 (pascal gpu)  More system details below.</p>\n<p>FAIL: test_Conv2d_groups_nobias (<strong>main</strong>.TestNN)</p>\n<p>Traceback (most recent call last):<br>\nFile \"test_nn.py\", line 3011, in test_Conv2d_groups_nobias<br>\ndtype2prec[dtype])<br>\nFile \"/home/freddie/pytorch/test/common.py\", line 245, in assertEqual<br>\nassertTensorsEqual(x, y)<br>\nFile \"/home/freddie/pytorch/test/common.py\", line 237, in assertTensorsEqual<br>\nself.assertLessEqual(max_err, prec, message)<br>\nAssertionError: tensor(1.00000e-02 *<br>\n1.5625, dtype=torch.float16, device='cuda:0') not less than or equal to 0.01 :</p>\n<p>FAIL: test_variable_sequence_cuda (<strong>main</strong>.TestNN) (dtype=torch.float16)</p>\n<p>Traceback (most recent call last):<br>\nFile \"test_nn.py\", line 65, in call_helper<br>\nf(self, *args, dtype=dtype)<br>\nFile \"test_nn.py\", line 3348, in test_variable_sequence_cuda<br>\nself._test_variable_sequence(\"cuda\", dtype)<br>\nFile \"test_nn.py\", line 3340, in _test_variable_sequence<br>\nself.assertEqual(p1.grad, p2.grad, dtype2prec[dtype])<br>\nFile \"/home/freddie/pytorch/test/common.py\", line 245, in assertEqual<br>\nassertTensorsEqual(x, y)<br>\nFile \"/home/freddie/pytorch/test/common.py\", line 237, in assertTensorsEqual<br>\nself.assertLessEqual(max_err, prec, message)<br>\nAssertionError: tensor(5.0391, dtype=torch.float16, device='cuda:0') not less than or equal to 0.01 :</p>\n<p>ppc64le<br>\nPower 9  4 x Volta GPU<br>\nRH7.4<br>\nLinux p95a28.pbm.ihost.com 4.11.0-44.5.1.el7a.ppc64le <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"171281708\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/pytorch/pytorch/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/pytorch/pytorch/issues/1/hovercard\" href=\"https://github.com/pytorch/pytorch/issues/1\">#1</a> SMP Thu Jan 18 02:18:03 EST 2018 ppc64le ppc64le ppc64le GNU/Linux<br>\nCUDA 9.1  CuDNN 7.0.5<br>\ntorch (0.5.0a0+537cb10)</p>", "body_text": "I'm getting the following two test failures which may be related to using torch.float16\nIt only happens when running on ppc64le Power9 (volta gpu).    It does not happen on Power8 (pascal gpu)  More system details below.\nFAIL: test_Conv2d_groups_nobias (main.TestNN)\nTraceback (most recent call last):\nFile \"test_nn.py\", line 3011, in test_Conv2d_groups_nobias\ndtype2prec[dtype])\nFile \"/home/freddie/pytorch/test/common.py\", line 245, in assertEqual\nassertTensorsEqual(x, y)\nFile \"/home/freddie/pytorch/test/common.py\", line 237, in assertTensorsEqual\nself.assertLessEqual(max_err, prec, message)\nAssertionError: tensor(1.00000e-02 *\n1.5625, dtype=torch.float16, device='cuda:0') not less than or equal to 0.01 :\nFAIL: test_variable_sequence_cuda (main.TestNN) (dtype=torch.float16)\nTraceback (most recent call last):\nFile \"test_nn.py\", line 65, in call_helper\nf(self, *args, dtype=dtype)\nFile \"test_nn.py\", line 3348, in test_variable_sequence_cuda\nself._test_variable_sequence(\"cuda\", dtype)\nFile \"test_nn.py\", line 3340, in _test_variable_sequence\nself.assertEqual(p1.grad, p2.grad, dtype2prec[dtype])\nFile \"/home/freddie/pytorch/test/common.py\", line 245, in assertEqual\nassertTensorsEqual(x, y)\nFile \"/home/freddie/pytorch/test/common.py\", line 237, in assertTensorsEqual\nself.assertLessEqual(max_err, prec, message)\nAssertionError: tensor(5.0391, dtype=torch.float16, device='cuda:0') not less than or equal to 0.01 :\nppc64le\nPower 9  4 x Volta GPU\nRH7.4\nLinux p95a28.pbm.ihost.com 4.11.0-44.5.1.el7a.ppc64le #1 SMP Thu Jan 18 02:18:03 EST 2018 ppc64le ppc64le ppc64le GNU/Linux\nCUDA 9.1  CuDNN 7.0.5\ntorch (0.5.0a0+537cb10)", "body": "I'm getting the following two test failures which may be related to using torch.float16\r\nIt only happens when running on ppc64le Power9 (volta gpu).    It does not happen on Power8 (pascal gpu)  More system details below.\r\n\r\nFAIL: test_Conv2d_groups_nobias (__main__.TestNN)\r\n \r\nTraceback (most recent call last):\r\n  File \"test_nn.py\", line 3011, in test_Conv2d_groups_nobias\r\n    dtype2prec[dtype])\r\n  File \"/home/freddie/pytorch/test/common.py\", line 245, in assertEqual\r\n    assertTensorsEqual(x, y)\r\n  File \"/home/freddie/pytorch/test/common.py\", line 237, in assertTensorsEqual\r\n    self.assertLessEqual(max_err, prec, message)\r\nAssertionError: tensor(1.00000e-02 *\r\n       1.5625, dtype=torch.float16, device='cuda:0') not less than or equal to 0.01 :\r\n\r\n\r\nFAIL: test_variable_sequence_cuda (__main__.TestNN) (dtype=torch.float16)\r\n \r\nTraceback (most recent call last):\r\n  File \"test_nn.py\", line 65, in call_helper\r\n    f(self, *args, dtype=dtype)\r\n  File \"test_nn.py\", line 3348, in test_variable_sequence_cuda\r\n    self._test_variable_sequence(\"cuda\", dtype)\r\n  File \"test_nn.py\", line 3340, in _test_variable_sequence\r\n    self.assertEqual(p1.grad, p2.grad, dtype2prec[dtype])\r\n  File \"/home/freddie/pytorch/test/common.py\", line 245, in assertEqual\r\n    assertTensorsEqual(x, y)\r\n  File \"/home/freddie/pytorch/test/common.py\", line 237, in assertTensorsEqual\r\n    self.assertLessEqual(max_err, prec, message)\r\nAssertionError: tensor(5.0391, dtype=torch.float16, device='cuda:0') not less than or equal to 0.01 :\r\n\r\nppc64le  \r\nPower 9  4 x Volta GPU\r\nRH7.4\r\nLinux p95a28.pbm.ihost.com 4.11.0-44.5.1.el7a.ppc64le #1 SMP Thu Jan 18 02:18:03 EST 2018 ppc64le ppc64le ppc64le GNU/Linux\r\nCUDA 9.1  CuDNN 7.0.5\r\ntorch (0.5.0a0+537cb10)\r\n\r\n\r\n"}
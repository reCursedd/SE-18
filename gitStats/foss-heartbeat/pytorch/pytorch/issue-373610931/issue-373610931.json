{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13061", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13061/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13061/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13061/events", "html_url": "https://github.com/pytorch/pytorch/issues/13061", "id": 373610931, "node_id": "MDU6SXNzdWUzNzM2MTA5MzE=", "number": 13061, "title": "FAILED Build:  __AVX2__ is defined (via e.g. -mavx2) \"     \"but CAFFE2_PERF_WITH_AVX2 is not defined.", "user": {"login": "dendisuhubdy", "id": 4477337, "node_id": "MDQ6VXNlcjQ0NzczMzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/4477337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dendisuhubdy", "html_url": "https://github.com/dendisuhubdy", "followers_url": "https://api.github.com/users/dendisuhubdy/followers", "following_url": "https://api.github.com/users/dendisuhubdy/following{/other_user}", "gists_url": "https://api.github.com/users/dendisuhubdy/gists{/gist_id}", "starred_url": "https://api.github.com/users/dendisuhubdy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dendisuhubdy/subscriptions", "organizations_url": "https://api.github.com/users/dendisuhubdy/orgs", "repos_url": "https://api.github.com/users/dendisuhubdy/repos", "events_url": "https://api.github.com/users/dendisuhubdy/events{/privacy}", "received_events_url": "https://api.github.com/users/dendisuhubdy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 778855555, "node_id": "MDU6TGFiZWw3Nzg4NTU1NTU=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/build", "name": "build", "color": "bfdadc", "default": false}, {"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-24T18:12:21Z", "updated_at": "2018-11-07T21:38:25Z", "closed_at": null, "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p>I found out the torch nightly builds are sufficient for my needs but I keep one separate virtual environment that makes sure that my DL research code is always on Pytorch's HEAD. Thus do a build of torch from scratch at least once every week but since last month I've always got this strange error when building. The full build log is here <a href=\"https://gist.github.com/dendisuhubdy/3cf00b9224acdb8fe43281d922d05bf8\">https://gist.github.com/dendisuhubdy/3cf00b9224acdb8fe43281d922d05bf8</a></p>\n<p>The error part is here if that's TLDR</p>\n<pre><code>FAILED: caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++  -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I../aten/src -I. -I../ -I../third_party/protobuf/src -I../cmake/../third_party/benchmark/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -isystem ../cmake/../third_party/googletest/googletest/include -isystem ../cmake/../third_party/eigen -isystem /usr/local/Cellar/python/3.7.0/Frameworks/Python.framework/Versions/3.7/include/python3.7m -isystem /Users/grokmachine/torch/lib/python3.7/site-packages/numpy/core/include -isystem /usr/local/include --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O3  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk -mmacosx-version-min=10.9 -fPIC   -mavx -mf16c -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -std=gnu++11 -MD -MT caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o -MF caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o.d -o caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o -c ../caffe2/perfkernels/common_avx.cc\n../caffe2/perfkernels/common_avx.cc:17:2: error: (     \"You found a build system error: __AVX__ is defined (via e.g. -mavx) \"     \"but CAFFE2_PERF_WITH_AVX is not defined.\");\n#error( \\\n ^\n1 error generated.\n[943/1793] Building CXX object caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o\nFAILED: caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++  -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I../aten/src -I. -I../ -I../third_party/protobuf/src -I../cmake/../third_party/benchmark/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -isystem ../cmake/../third_party/googletest/googletest/include -isystem ../cmake/../third_party/eigen -isystem /usr/local/Cellar/python/3.7.0/Frameworks/Python.framework/Versions/3.7/include/python3.7m -isystem /Users/grokmachine/torch/lib/python3.7/site-packages/numpy/core/include -isystem /usr/local/include --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O3  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk -mmacosx-version-min=10.9 -fPIC   -mavx2 -mfma -mavx -mf16c -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -std=gnu++11 -MD -MT caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o -MF caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o.d -o caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o -c ../caffe2/perfkernels/common_avx2.cc\n../caffe2/perfkernels/common_avx2.cc:17:2: error: (     \"You found a build system error: __AVX2__ is defined (via e.g. -mavx2) \"     \"but CAFFE2_PERF_WITH_AVX2 is not defined.\");\n#error( \\\n ^\n1 error generated.\n[949/1793] Generating src/x86_64-fma/softmax.py.o\nninja: build stopped: subcommand failed.\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'\n</code></pre>\n<h2>To Reproduce</h2>\n<p>I'm on a Mac OS X Mojave, and I'm on an MBP 15\" 2016.</p>\n<p>Steps to reproduce the behavior:</p>\n<ol>\n<li>cd <code>pytorch</code></li>\n<li><code>MACOSX_DEPLOYMENT_TARGET=10.9 CC=cc CXX=c++ python setup.py install</code></li>\n</ol>\n<h2>Environment</h2>\n<p>from running <code>collect_env.py</code>:</p>\n<pre><code>PyTorch version: 1.0.0.dev20181014\nIs debug build: No\nCUDA used to build PyTorch: None\n\nOS: Mac OSX 10.14.1\nGCC version: Could not collect\nCMake version: version 3.12.0\n\nPython version: 3.7\nIs CUDA available: No\nCUDA runtime version: No CUDA\nGPU models and configuration: No CUDA\nNvidia driver version: No CUDA\ncuDNN version: No CUDA\n\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] Could not collect```\n\n</code></pre>", "body_text": "\ud83d\udc1b Bug\nI found out the torch nightly builds are sufficient for my needs but I keep one separate virtual environment that makes sure that my DL research code is always on Pytorch's HEAD. Thus do a build of torch from scratch at least once every week but since last month I've always got this strange error when building. The full build log is here https://gist.github.com/dendisuhubdy/3cf00b9224acdb8fe43281d922d05bf8\nThe error part is here if that's TLDR\nFAILED: caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++  -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I../aten/src -I. -I../ -I../third_party/protobuf/src -I../cmake/../third_party/benchmark/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -isystem ../cmake/../third_party/googletest/googletest/include -isystem ../cmake/../third_party/eigen -isystem /usr/local/Cellar/python/3.7.0/Frameworks/Python.framework/Versions/3.7/include/python3.7m -isystem /Users/grokmachine/torch/lib/python3.7/site-packages/numpy/core/include -isystem /usr/local/include --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O3  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk -mmacosx-version-min=10.9 -fPIC   -mavx -mf16c -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -std=gnu++11 -MD -MT caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o -MF caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o.d -o caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o -c ../caffe2/perfkernels/common_avx.cc\n../caffe2/perfkernels/common_avx.cc:17:2: error: (     \"You found a build system error: __AVX__ is defined (via e.g. -mavx) \"     \"but CAFFE2_PERF_WITH_AVX is not defined.\");\n#error( \\\n ^\n1 error generated.\n[943/1793] Building CXX object caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o\nFAILED: caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++  -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I../aten/src -I. -I../ -I../third_party/protobuf/src -I../cmake/../third_party/benchmark/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -isystem ../cmake/../third_party/googletest/googletest/include -isystem ../cmake/../third_party/eigen -isystem /usr/local/Cellar/python/3.7.0/Frameworks/Python.framework/Versions/3.7/include/python3.7m -isystem /Users/grokmachine/torch/lib/python3.7/site-packages/numpy/core/include -isystem /usr/local/include --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O3  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk -mmacosx-version-min=10.9 -fPIC   -mavx2 -mfma -mavx -mf16c -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -std=gnu++11 -MD -MT caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o -MF caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o.d -o caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o -c ../caffe2/perfkernels/common_avx2.cc\n../caffe2/perfkernels/common_avx2.cc:17:2: error: (     \"You found a build system error: __AVX2__ is defined (via e.g. -mavx2) \"     \"but CAFFE2_PERF_WITH_AVX2 is not defined.\");\n#error( \\\n ^\n1 error generated.\n[949/1793] Generating src/x86_64-fma/softmax.py.o\nninja: build stopped: subcommand failed.\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'\n\nTo Reproduce\nI'm on a Mac OS X Mojave, and I'm on an MBP 15\" 2016.\nSteps to reproduce the behavior:\n\ncd pytorch\nMACOSX_DEPLOYMENT_TARGET=10.9 CC=cc CXX=c++ python setup.py install\n\nEnvironment\nfrom running collect_env.py:\nPyTorch version: 1.0.0.dev20181014\nIs debug build: No\nCUDA used to build PyTorch: None\n\nOS: Mac OSX 10.14.1\nGCC version: Could not collect\nCMake version: version 3.12.0\n\nPython version: 3.7\nIs CUDA available: No\nCUDA runtime version: No CUDA\nGPU models and configuration: No CUDA\nNvidia driver version: No CUDA\ncuDNN version: No CUDA\n\nVersions of relevant libraries:\n[pip] Could not collect\n[conda] Could not collect```", "body": "## \ud83d\udc1b Bug\r\n\r\nI found out the torch nightly builds are sufficient for my needs but I keep one separate virtual environment that makes sure that my DL research code is always on Pytorch's HEAD. Thus do a build of torch from scratch at least once every week but since last month I've always got this strange error when building. The full build log is here https://gist.github.com/dendisuhubdy/3cf00b9224acdb8fe43281d922d05bf8\r\n\r\nThe error part is here if that's TLDR\r\n\r\n```\r\nFAILED: caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++  -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I../aten/src -I. -I../ -I../third_party/protobuf/src -I../cmake/../third_party/benchmark/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -isystem ../cmake/../third_party/googletest/googletest/include -isystem ../cmake/../third_party/eigen -isystem /usr/local/Cellar/python/3.7.0/Frameworks/Python.framework/Versions/3.7/include/python3.7m -isystem /Users/grokmachine/torch/lib/python3.7/site-packages/numpy/core/include -isystem /usr/local/include --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O3  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk -mmacosx-version-min=10.9 -fPIC   -mavx -mf16c -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -std=gnu++11 -MD -MT caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o -MF caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o.d -o caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx.dir/common_avx.cc.o -c ../caffe2/perfkernels/common_avx.cc\r\n../caffe2/perfkernels/common_avx.cc:17:2: error: (     \"You found a build system error: __AVX__ is defined (via e.g. -mavx) \"     \"but CAFFE2_PERF_WITH_AVX is not defined.\");\r\n#error( \\\r\n ^\r\n1 error generated.\r\n[943/1793] Building CXX object caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o\r\nFAILED: caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++  -DHAVE_MMAP=1 -DHAVE_SHM_OPEN=1 -DHAVE_SHM_UNLINK=1 -DONNX_NAMESPACE=onnx_torch -DUSE_GCC_ATOMICS=1 -D_FILE_OFFSET_BITS=64 -I../aten/src -I. -I../ -I../third_party/protobuf/src -I../cmake/../third_party/benchmark/include -Icaffe2/contrib/aten -I../third_party/onnx -Ithird_party/onnx -isystem ../cmake/../third_party/googletest/googletest/include -isystem ../cmake/../third_party/eigen -isystem /usr/local/Cellar/python/3.7.0/Frameworks/Python.framework/Versions/3.7/include/python3.7m -isystem /Users/grokmachine/torch/lib/python3.7/site-packages/numpy/core/include -isystem /usr/local/include --std=c++11  -Wno-deprecated -fvisibility-inlines-hidden -Wno-deprecated-declarations -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -Wno-invalid-partial-specialization -Wno-typedef-redefinition -Wno-unknown-warning-option -Wno-unused-private-field -Wno-inconsistent-missing-override -Wno-aligned-allocation-unavailable -Wno-c++14-extensions -Wno-constexpr-not-const -Wno-missing-braces -Qunused-arguments -faligned-new -Wno-unused-private-field -Wno-missing-braces -Wno-c++14-extensions -Wno-constexpr-not-const -DHAVE_AVX_CPU_DEFINITION -DHAVE_AVX2_CPU_DEFINITION -O3  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk -mmacosx-version-min=10.9 -fPIC   -mavx2 -mfma -mavx -mf16c -DHAVE_GCC_GET_CPUID -DUSE_AVX -DUSE_AVX2 -DTH_HAVE_THREAD -std=gnu++11 -MD -MT caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o -MF caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o.d -o caffe2/perfkernels/CMakeFiles/Caffe2_perfkernels_avx2.dir/common_avx2.cc.o -c ../caffe2/perfkernels/common_avx2.cc\r\n../caffe2/perfkernels/common_avx2.cc:17:2: error: (     \"You found a build system error: __AVX2__ is defined (via e.g. -mavx2) \"     \"but CAFFE2_PERF_WITH_AVX2 is not defined.\");\r\n#error( \\\r\n ^\r\n1 error generated.\r\n[949/1793] Generating src/x86_64-fma/softmax.py.o\r\nninja: build stopped: subcommand failed.\r\nFailed to run 'bash ../tools/build_pytorch_libs.sh --use-nnpack caffe2 libshm THD'\r\n```\r\n\r\n## To Reproduce\r\n\r\nI'm on a Mac OS X Mojave, and I'm on an MBP 15\" 2016.\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. cd `pytorch`\r\n2. `MACOSX_DEPLOYMENT_TARGET=10.9 CC=cc CXX=c++ python setup.py install`\r\n\r\n## Environment\r\n\r\nfrom running `collect_env.py`:\r\n```\r\nPyTorch version: 1.0.0.dev20181014\r\nIs debug build: No\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Mac OSX 10.14.1\r\nGCC version: Could not collect\r\nCMake version: version 3.12.0\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] Could not collect```\r\n\r\n"}
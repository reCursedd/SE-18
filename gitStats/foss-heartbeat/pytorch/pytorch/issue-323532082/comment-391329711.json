{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/391329711", "html_url": "https://github.com/pytorch/pytorch/issues/7609#issuecomment-391329711", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/7609", "id": 391329711, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTMyOTcxMQ==", "user": {"login": "ailzhang", "id": 5248122, "node_id": "MDQ6VXNlcjUyNDgxMjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5248122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ailzhang", "html_url": "https://github.com/ailzhang", "followers_url": "https://api.github.com/users/ailzhang/followers", "following_url": "https://api.github.com/users/ailzhang/following{/other_user}", "gists_url": "https://api.github.com/users/ailzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ailzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ailzhang/subscriptions", "organizations_url": "https://api.github.com/users/ailzhang/orgs", "repos_url": "https://api.github.com/users/ailzhang/repos", "events_url": "https://api.github.com/users/ailzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/ailzhang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-23T12:33:24Z", "updated_at": "2018-05-23T12:33:24Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5652049\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zou3519\">@zou3519</a> Hmm this doesn't align with what I saw from numpy.</p>\n<pre><code>&gt;&gt;&gt; x = np.ones((1, 2, 3, 4))\n&gt;&gt;&gt; np.transpose(x, (1, 0, 2, 3)).shape\n(2, 1, 3, 4)\n&gt;&gt;&gt; np.transpose(x, (1, 0, 2)).shape\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/Users/ailzhang/miniconda3/lib/python3.6/site-packages/numpy/core/fromnumeric.py\", line 575, in transpose\n    return _wrapfunc(a, 'transpose', axes)\n  File \"/Users/ailzhang/miniconda3/lib/python3.6/site-packages/numpy/core/fromnumeric.py\", line 52, in _wrapfunc\n    return getattr(obj, method)(*args, **kwds)\nValueError: axes don't match array\n</code></pre>\n<p>So if I understand correctly, the desired API is like this</p>\n<pre><code>x = torch.randn(4, 2, 3, 5)\nx.transpose().shape() # should return (5, 3, 2, 4), as np.transpose(x).shape = (4, 3, 2, 1)\nx.transpose((1, 2, 0, 3)) # should work like a permute\nx.transpose((1, 2, 0)) # should error out, like numpy behavior above\n</code></pre>", "body_text": "@zou3519 Hmm this doesn't align with what I saw from numpy.\n>>> x = np.ones((1, 2, 3, 4))\n>>> np.transpose(x, (1, 0, 2, 3)).shape\n(2, 1, 3, 4)\n>>> np.transpose(x, (1, 0, 2)).shape\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/Users/ailzhang/miniconda3/lib/python3.6/site-packages/numpy/core/fromnumeric.py\", line 575, in transpose\n    return _wrapfunc(a, 'transpose', axes)\n  File \"/Users/ailzhang/miniconda3/lib/python3.6/site-packages/numpy/core/fromnumeric.py\", line 52, in _wrapfunc\n    return getattr(obj, method)(*args, **kwds)\nValueError: axes don't match array\n\nSo if I understand correctly, the desired API is like this\nx = torch.randn(4, 2, 3, 5)\nx.transpose().shape() # should return (5, 3, 2, 4), as np.transpose(x).shape = (4, 3, 2, 1)\nx.transpose((1, 2, 0, 3)) # should work like a permute\nx.transpose((1, 2, 0)) # should error out, like numpy behavior above", "body": "@zou3519 Hmm this doesn't align with what I saw from numpy.\r\n```\r\n>>> x = np.ones((1, 2, 3, 4))\r\n>>> np.transpose(x, (1, 0, 2, 3)).shape\r\n(2, 1, 3, 4)\r\n>>> np.transpose(x, (1, 0, 2)).shape\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/ailzhang/miniconda3/lib/python3.6/site-packages/numpy/core/fromnumeric.py\", line 575, in transpose\r\n    return _wrapfunc(a, 'transpose', axes)\r\n  File \"/Users/ailzhang/miniconda3/lib/python3.6/site-packages/numpy/core/fromnumeric.py\", line 52, in _wrapfunc\r\n    return getattr(obj, method)(*args, **kwds)\r\nValueError: axes don't match array\r\n```\r\nSo if I understand correctly, the desired API is like this\r\n```\r\nx = torch.randn(4, 2, 3, 5)\r\nx.transpose().shape() # should return (5, 3, 2, 4), as np.transpose(x).shape = (4, 3, 2, 1)\r\nx.transpose((1, 2, 0, 3)) # should work like a permute\r\nx.transpose((1, 2, 0)) # should error out, like numpy behavior above\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/229462831", "pull_request_review_id": 169969747, "id": 229462831, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyOTQ2MjgzMQ==", "diff_hunk": "@@ -298,9 +287,13 @@ template <\n std::unique_ptr<DataLoader<Dataset, Sampler>> make_data_loader(\n     Dataset dataset,\n     DataLoaderOptions options = DataLoaderOptions()) {\n-  const auto size = dataset.size();\n-  return torch::make_unique<DataLoader<Dataset, Sampler>>(\n-      std::move(dataset), std::move(options), Sampler(size));\n+  const optional<size_t> size = dataset.size();\n+  AT_CHECK(\n+      size.has_value(),\n+      \"Expected the dataset to be sized in \"\n+      \"order to construct the Sampler\");", "path": "torch/csrc/api/include/torch/data/dataloader.h", "position": 145, "original_position": 115, "commit_id": "ca8bf7cb1600b77f543744f5c0e5a5fd750be324", "original_commit_id": "bcf8a94cef28493b64a8ce603dcb30feb976a891", "user": {"login": "apaszke", "id": 4583066, "node_id": "MDQ6VXNlcjQ1ODMwNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4583066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apaszke", "html_url": "https://github.com/apaszke", "followers_url": "https://api.github.com/users/apaszke/followers", "following_url": "https://api.github.com/users/apaszke/following{/other_user}", "gists_url": "https://api.github.com/users/apaszke/gists{/gist_id}", "starred_url": "https://api.github.com/users/apaszke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apaszke/subscriptions", "organizations_url": "https://api.github.com/users/apaszke/orgs", "repos_url": "https://api.github.com/users/apaszke/repos", "events_url": "https://api.github.com/users/apaszke/events{/privacy}", "received_events_url": "https://api.github.com/users/apaszke/received_events", "type": "User", "site_admin": false}, "body": "Hmm isn't this only needed if `Sampler` is specified to be a `RandomSampler`? This function is templated on the type, and not all of them might need this, so that doesn't feel right. Why even add an option to have unspecified size if such a fundamental function errors out in that case.", "created_at": "2018-10-30T19:57:16Z", "updated_at": "2018-11-23T15:53:52Z", "html_url": "https://github.com/pytorch/pytorch/pull/12960#discussion_r229462831", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/12960", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/229462831"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/12960#discussion_r229462831"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/12960"}}, "body_html": "<p>Hmm isn't this only needed if <code>Sampler</code> is specified to be a <code>RandomSampler</code>? This function is templated on the type, and not all of them might need this, so that doesn't feel right. Why even add an option to have unspecified size if such a fundamental function errors out in that case.</p>", "body_text": "Hmm isn't this only needed if Sampler is specified to be a RandomSampler? This function is templated on the type, and not all of them might need this, so that doesn't feel right. Why even add an option to have unspecified size if such a fundamental function errors out in that case."}
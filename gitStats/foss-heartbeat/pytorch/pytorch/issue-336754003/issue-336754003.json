{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8994", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8994/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8994/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8994/events", "html_url": "https://github.com/pytorch/pytorch/issues/8994", "id": 336754003, "node_id": "MDU6SXNzdWUzMzY3NTQwMDM=", "number": 8994, "title": "After using unsqueeze and expand to add a new dimension to a tensor, assign value to one \"page\" of the tensor (such like tensor[:, :, 0] = 1) will change every \"page\" of the tensor. ", "user": {"login": "VirosaLi", "id": 7614606, "node_id": "MDQ6VXNlcjc2MTQ2MDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7614606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VirosaLi", "html_url": "https://github.com/VirosaLi", "followers_url": "https://api.github.com/users/VirosaLi/followers", "following_url": "https://api.github.com/users/VirosaLi/following{/other_user}", "gists_url": "https://api.github.com/users/VirosaLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/VirosaLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VirosaLi/subscriptions", "organizations_url": "https://api.github.com/users/VirosaLi/orgs", "repos_url": "https://api.github.com/users/VirosaLi/repos", "events_url": "https://api.github.com/users/VirosaLi/events{/privacy}", "received_events_url": "https://api.github.com/users/VirosaLi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-28T19:41:36Z", "updated_at": "2018-06-28T21:17:52Z", "closed_at": "2018-06-28T21:17:52Z", "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>After using unsqueeze and expand to add a new dimension to a tensor, assign value to one \"page\" of the tensor (such like tensor[:, :, 0] = 1) will change every \"page\" of the tensor.</p>\n<h2>Code example</h2>\n<p>`<br>\nimport torch</p>\n<p>expand_length = 8</p>\n<p>tensor = torch.randn(2, 2).mul(2)<br>\nexpand_tensor = torch.zeros_like(tensor).unsqueeze(-1).expand(-1, -1, expand_length)<br>\nexpand_tensor[:, :, 0] = 1<br>\nprint(expand_tensor)<br>\n`</p>\n<p>output:<br>\ntensor([[[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],<br>\n[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]],<br>\n[[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],<br>\n[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]]])</p>\n<p>It should be:</p>\n<p>tensor([[[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],<br>\n[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]],<br>\n[[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],<br>\n[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]]])</p>\n<h2>System Info</h2>\n<ul>\n<li>PyTorch or Caffe2: PyTorch</li>\n<li>How you installed PyTorch (conda, pip, source): conda</li>\n<li>Build command you used (if compiling from source):</li>\n<li>OS: Ubuntu 18.04 LTS</li>\n<li>PyTorch version: 0.4.0</li>\n<li>Python version:3.6</li>\n<li>CUDA/cuDNN version: 9.1.85</li>\n<li>GPU models and configuration:<br>\nGPU 0: GeForce GTX 1080 Ti<br>\nGPU 1: GeForce GTX 1080 Ti</li>\n<li>GCC version (if compiling from source):</li>\n<li>CMake version:</li>\n<li>Versions of any other relevant libraries: Nvidia driver version: 390.48</li>\n</ul>", "body_text": "Issue description\nAfter using unsqueeze and expand to add a new dimension to a tensor, assign value to one \"page\" of the tensor (such like tensor[:, :, 0] = 1) will change every \"page\" of the tensor.\nCode example\n`\nimport torch\nexpand_length = 8\ntensor = torch.randn(2, 2).mul(2)\nexpand_tensor = torch.zeros_like(tensor).unsqueeze(-1).expand(-1, -1, expand_length)\nexpand_tensor[:, :, 0] = 1\nprint(expand_tensor)\n`\noutput:\ntensor([[[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],\n[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]],\n[[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],\n[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]]])\nIt should be:\ntensor([[[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],\n[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]],\n[[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],\n[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]]])\nSystem Info\n\nPyTorch or Caffe2: PyTorch\nHow you installed PyTorch (conda, pip, source): conda\nBuild command you used (if compiling from source):\nOS: Ubuntu 18.04 LTS\nPyTorch version: 0.4.0\nPython version:3.6\nCUDA/cuDNN version: 9.1.85\nGPU models and configuration:\nGPU 0: GeForce GTX 1080 Ti\nGPU 1: GeForce GTX 1080 Ti\nGCC version (if compiling from source):\nCMake version:\nVersions of any other relevant libraries: Nvidia driver version: 390.48", "body": "## Issue description\r\n\r\nAfter using unsqueeze and expand to add a new dimension to a tensor, assign value to one \"page\" of the tensor (such like tensor[:, :, 0] = 1) will change every \"page\" of the tensor. \r\n\r\n## Code example\r\n`\r\nimport torch\r\n\r\nexpand_length = 8\r\n\r\ntensor = torch.randn(2, 2).mul(2)\r\nexpand_tensor = torch.zeros_like(tensor).unsqueeze(-1).expand(-1, -1, expand_length)\r\nexpand_tensor[:, :, 0] = 1\r\nprint(expand_tensor)\r\n`\r\n\r\noutput:\r\ntensor([[[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],\r\n         [ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]],\r\n        [[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],\r\n         [ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]]])\r\n\r\nIt should be:\r\n\r\ntensor([[[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],\r\n         [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]],\r\n        [[ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],\r\n         [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]]])\r\n\r\n## System Info\r\n\r\n- PyTorch or Caffe2: PyTorch\r\n- How you installed PyTorch (conda, pip, source): conda\r\n- Build command you used (if compiling from source):\r\n- OS: Ubuntu 18.04 LTS\r\n- PyTorch version: 0.4.0\r\n- Python version:3.6\r\n- CUDA/cuDNN version: 9.1.85\r\n- GPU models and configuration:\r\nGPU 0: GeForce GTX 1080 Ti\r\nGPU 1: GeForce GTX 1080 Ti\r\n- GCC version (if compiling from source):\r\n- CMake version:\r\n- Versions of any other relevant libraries: Nvidia driver version: 390.48\r\n"}
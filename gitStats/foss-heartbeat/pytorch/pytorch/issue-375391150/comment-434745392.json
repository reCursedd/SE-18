{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/434745392", "html_url": "https://github.com/pytorch/pytorch/pull/13303#issuecomment-434745392", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/13303", "id": 434745392, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDc0NTM5Mg==", "user": {"login": "gujinghui", "id": 31264804, "node_id": "MDQ6VXNlcjMxMjY0ODA0", "avatar_url": "https://avatars2.githubusercontent.com/u/31264804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gujinghui", "html_url": "https://github.com/gujinghui", "followers_url": "https://api.github.com/users/gujinghui/followers", "following_url": "https://api.github.com/users/gujinghui/following{/other_user}", "gists_url": "https://api.github.com/users/gujinghui/gists{/gist_id}", "starred_url": "https://api.github.com/users/gujinghui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gujinghui/subscriptions", "organizations_url": "https://api.github.com/users/gujinghui/orgs", "repos_url": "https://api.github.com/users/gujinghui/repos", "events_url": "https://api.github.com/users/gujinghui/events{/privacy}", "received_events_url": "https://api.github.com/users/gujinghui/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-31T16:02:33Z", "updated_at": "2018-10-31T16:02:33Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1310570\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/soumith\">@soumith</a><br>\nThanks for reply.</p>\n<p>The cases with below failure have been modified here.</p>\n<blockquote>\n<p>[E ideep_operator.h:62] IDEEP error:could not initialize a memory descriptor</p>\n</blockquote>\n<p>The reason is zero dim is still not supported for now both in ideep and mkl-dnn.<br>\nI have to skip such cases to avoid failures now.</p>\n<p>But the coming upgrade will introduce zero dim feature soon.<br>\nThe cases will be enabled after next upgrade.</p>\n<p>Besides, we still have rest 3 kinds of failures in this PR:</p>\n<ol>\n<li>illegal instructions in compiling or cases.</li>\n</ol>\n<blockquote>\n<pre><code>Oct 30 09:25:58 ERROR:sccache::server: Compilation failed: Output { status: ExitStatus(ExitStatus(256)), stdout: \"\", stderr: \"/tmp/ccfAyF9m.s: Assembler messages:\\n/tmp/ccfAyF9m.s:424: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm0\\'\\n/tmp/ccfAyF9m.s:426: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:427: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:431: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm0\\'\\n/tmp/ccfAyF9m.s:434: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:437: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:552: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm1\\'\\n/tmp/ccfAyF9m.s:555: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:556: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:562: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:565: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:568: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm0\\'\\n/tmp/ccfAyF9m.s:679: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm1\\'\\n/tmp/ccfAyF9m.s:682: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:683: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:688: Error: no such instruction: `vpmullq %zmm2,%zmm1,%zmm1\\'\\n/tmp/ccfAyF9m.s:690: Error: no such instruction: `vpmullq %zmm1,%zmm0,%zmm1\\'\\n/tmp/ccfAyF9m.s:693: Error: no such instruction: `vpmullq %zmm1,%zmm0,%zmm0\\'\\n\" }\n</code></pre>\n</blockquote>\n<p>I'm trying to repro this locally. But still suspect this should be building environment issue.<br>\nIf got solid evident, will return to you soon.</p>\n<ol start=\"2\">\n<li>\n<p>not find libmkldnn.dylib on macOS.<br>\nPerhaps, it should be FindMKLDNN.cmake issue, which gives lib path for libmkldnn.<br>\nThe lib path should be corrected for macOS.</p>\n</li>\n<li>\n<p>crashed due to wrong deconstructor of mkldnn_engine<br>\nUnder debuging. If got any update, will send here.</p>\n</li>\n</ol>", "body_text": "@soumith\nThanks for reply.\nThe cases with below failure have been modified here.\n\n[E ideep_operator.h:62] IDEEP error:could not initialize a memory descriptor\n\nThe reason is zero dim is still not supported for now both in ideep and mkl-dnn.\nI have to skip such cases to avoid failures now.\nBut the coming upgrade will introduce zero dim feature soon.\nThe cases will be enabled after next upgrade.\nBesides, we still have rest 3 kinds of failures in this PR:\n\nillegal instructions in compiling or cases.\n\n\nOct 30 09:25:58 ERROR:sccache::server: Compilation failed: Output { status: ExitStatus(ExitStatus(256)), stdout: \"\", stderr: \"/tmp/ccfAyF9m.s: Assembler messages:\\n/tmp/ccfAyF9m.s:424: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm0\\'\\n/tmp/ccfAyF9m.s:426: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:427: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:431: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm0\\'\\n/tmp/ccfAyF9m.s:434: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:437: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:552: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm1\\'\\n/tmp/ccfAyF9m.s:555: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:556: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:562: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:565: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:568: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm0\\'\\n/tmp/ccfAyF9m.s:679: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm1\\'\\n/tmp/ccfAyF9m.s:682: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:683: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:688: Error: no such instruction: `vpmullq %zmm2,%zmm1,%zmm1\\'\\n/tmp/ccfAyF9m.s:690: Error: no such instruction: `vpmullq %zmm1,%zmm0,%zmm1\\'\\n/tmp/ccfAyF9m.s:693: Error: no such instruction: `vpmullq %zmm1,%zmm0,%zmm0\\'\\n\" }\n\n\nI'm trying to repro this locally. But still suspect this should be building environment issue.\nIf got solid evident, will return to you soon.\n\n\nnot find libmkldnn.dylib on macOS.\nPerhaps, it should be FindMKLDNN.cmake issue, which gives lib path for libmkldnn.\nThe lib path should be corrected for macOS.\n\n\ncrashed due to wrong deconstructor of mkldnn_engine\nUnder debuging. If got any update, will send here.", "body": "@soumith \r\nThanks for reply.\r\n\r\nThe cases with below failure have been modified here.\r\n> [E ideep_operator.h:62] IDEEP error:could not initialize a memory descriptor\r\n\r\nThe reason is zero dim is still not supported for now both in ideep and mkl-dnn.\r\nI have to skip such cases to avoid failures now.\r\n\r\nBut the coming upgrade will introduce zero dim feature soon.\r\nThe cases will be enabled after next upgrade.\r\n\r\nBesides, we still have rest 3 kinds of failures in this PR:\r\n1.  illegal instructions in compiling or cases.\r\n> ```\r\n> Oct 30 09:25:58 ERROR:sccache::server: Compilation failed: Output { status: ExitStatus(ExitStatus(256)), stdout: \"\", stderr: \"/tmp/ccfAyF9m.s: Assembler messages:\\n/tmp/ccfAyF9m.s:424: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm0\\'\\n/tmp/ccfAyF9m.s:426: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:427: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:431: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm0\\'\\n/tmp/ccfAyF9m.s:434: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:437: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:552: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm1\\'\\n/tmp/ccfAyF9m.s:555: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:556: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:562: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:565: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm2\\'\\n/tmp/ccfAyF9m.s:568: Error: no such instruction: `vpmullq %zmm2,%zmm0,%zmm0\\'\\n/tmp/ccfAyF9m.s:679: Error: no such instruction: `vextracti32x8 $0x1,%zmm0,%ymm1\\'\\n/tmp/ccfAyF9m.s:682: Error: no such instruction: `vpmullq %zmm0,%zmm1,%zmm0\\'\\n/tmp/ccfAyF9m.s:683: Error: no such instruction: `vpmullq %zmm0,%zmm2,%zmm2\\'\\n/tmp/ccfAyF9m.s:688: Error: no such instruction: `vpmullq %zmm2,%zmm1,%zmm1\\'\\n/tmp/ccfAyF9m.s:690: Error: no such instruction: `vpmullq %zmm1,%zmm0,%zmm1\\'\\n/tmp/ccfAyF9m.s:693: Error: no such instruction: `vpmullq %zmm1,%zmm0,%zmm0\\'\\n\" }\r\n> ```\r\nI'm trying to repro this locally. But still suspect this should be building environment issue.\r\nIf got solid evident, will return to you soon.\r\n\r\n2. not find libmkldnn.dylib on macOS.\r\nPerhaps, it should be FindMKLDNN.cmake issue, which gives lib path for libmkldnn.\r\nThe lib path should be corrected for macOS.\r\n\r\n3. crashed due to wrong deconstructor of mkldnn_engine\r\nUnder debuging. If got any update, will send here."}
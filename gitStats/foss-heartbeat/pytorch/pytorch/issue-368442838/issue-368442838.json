{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12508", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12508/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12508/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12508/events", "html_url": "https://github.com/pytorch/pytorch/pull/12508", "id": 368442838, "node_id": "MDExOlB1bGxSZXF1ZXN0MjIxNjIxMDU2", "number": 12508, "title": "Operator instantiation from pytorch FS/IValue", "user": {"login": "bwasti", "id": 4842908, "node_id": "MDQ6VXNlcjQ4NDI5MDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4842908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bwasti", "html_url": "https://github.com/bwasti", "followers_url": "https://api.github.com/users/bwasti/followers", "following_url": "https://api.github.com/users/bwasti/following{/other_user}", "gists_url": "https://api.github.com/users/bwasti/gists{/gist_id}", "starred_url": "https://api.github.com/users/bwasti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bwasti/subscriptions", "organizations_url": "https://api.github.com/users/bwasti/orgs", "repos_url": "https://api.github.com/users/bwasti/repos", "events_url": "https://api.github.com/users/bwasti/events{/privacy}", "received_events_url": "https://api.github.com/users/bwasti/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-09T23:56:52Z", "updated_at": "2018-11-23T15:52:48Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/12508", "html_url": "https://github.com/pytorch/pytorch/pull/12508", "diff_url": "https://github.com/pytorch/pytorch/pull/12508.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/12508.patch"}, "body_html": "<p>Summary:<br>\nchoices made:</p>\n<ul>\n<li>Blobs over at::Tensor in IValues (for the time being) -- this is a result of caffe2 denoting mutability with non-const pointers to Tensors and it seems to be required to shim the T* Output(idx) function.</li>\n<li><code>DEFINE_TO(unsigned long, toInt)</code> this might be invalid</li>\n<li>Pass function_schema by reference -- this is simply an inheritance of the pytorch ownership model</li>\n<li>Store pointers to function_schema and input/output ivalues rather than a reference to a nomnigraph Node</li>\n<li>Store a tagged union of function_schema/IValue in nomnigraph\n<ul>\n<li>This will need to be extended going forward to support other annotations (see Caffe2Annotation in nomnigraph)</li>\n</ul>\n</li>\n</ul>\n<p>TODO:</p>\n<ul>\n<li>fully shim the operator.h\n<ul>\n<li>Input()</li>\n<li>Argument helpers</li>\n</ul>\n</li>\n<li>rename things (NewAPI is probably not a very good name for the registry :P )</li>\n</ul>\n<p>Differential Revision: D10254923</p>", "body_text": "Summary:\nchoices made:\n\nBlobs over at::Tensor in IValues (for the time being) -- this is a result of caffe2 denoting mutability with non-const pointers to Tensors and it seems to be required to shim the T* Output(idx) function.\nDEFINE_TO(unsigned long, toInt) this might be invalid\nPass function_schema by reference -- this is simply an inheritance of the pytorch ownership model\nStore pointers to function_schema and input/output ivalues rather than a reference to a nomnigraph Node\nStore a tagged union of function_schema/IValue in nomnigraph\n\nThis will need to be extended going forward to support other annotations (see Caffe2Annotation in nomnigraph)\n\n\n\nTODO:\n\nfully shim the operator.h\n\nInput()\nArgument helpers\n\n\nrename things (NewAPI is probably not a very good name for the registry :P )\n\nDifferential Revision: D10254923", "body": "Summary:\nchoices made:\n\n- Blobs over at::Tensor in IValues (for the time being) -- this is a result of caffe2 denoting mutability with non-const pointers to Tensors and it seems to be required to shim the T* Output(idx) function.\n- `DEFINE_TO(unsigned long, toInt)` this might be invalid\n- Pass function_schema by reference -- this is simply an inheritance of the pytorch ownership model\n- Store pointers to function_schema and input/output ivalues rather than a reference to a nomnigraph Node\n- Store a tagged union of function_schema/IValue in nomnigraph\n  - This will need to be extended going forward to support other annotations (see Caffe2Annotation in nomnigraph)\n\nTODO:\n- fully shim the operator.h\n  - Input()\n  - Argument helpers\n- rename things (NewAPI is probably not a very good name for the registry :P )\n\nDifferential Revision: D10254923\n"}
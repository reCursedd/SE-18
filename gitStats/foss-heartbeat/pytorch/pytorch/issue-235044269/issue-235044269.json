{"url": "https://api.github.com/repos/pytorch/pytorch/issues/1771", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/1771/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/1771/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/1771/events", "html_url": "https://github.com/pytorch/pytorch/issues/1771", "id": 235044269, "node_id": "MDU6SXNzdWUyMzUwNDQyNjk=", "number": 1771, "title": "Error using cuda in docker container", "user": {"login": "devendrachaplot", "id": 1102621, "node_id": "MDQ6VXNlcjExMDI2MjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1102621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devendrachaplot", "html_url": "https://github.com/devendrachaplot", "followers_url": "https://api.github.com/users/devendrachaplot/followers", "following_url": "https://api.github.com/users/devendrachaplot/following{/other_user}", "gists_url": "https://api.github.com/users/devendrachaplot/gists{/gist_id}", "starred_url": "https://api.github.com/users/devendrachaplot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devendrachaplot/subscriptions", "organizations_url": "https://api.github.com/users/devendrachaplot/orgs", "repos_url": "https://api.github.com/users/devendrachaplot/repos", "events_url": "https://api.github.com/users/devendrachaplot/events{/privacy}", "received_events_url": "https://api.github.com/users/devendrachaplot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-06-11T05:17:56Z", "updated_at": "2018-03-30T10:07:27Z", "closed_at": "2017-06-13T18:03:42Z", "author_association": "NONE", "body_html": "<p>I used the Dockerfile to build pytorch<br>\n<code>docker build -t pytorch .</code><br>\nand ran the image with<br>\n<code>nvidia-docker run --rm -ti --ipc=host pytorch</code></p>\n<p>Inside the container, I get an error using cuda:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>import torch<br>\nx = torch.rand(1).cuda()</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<pre><code>THCudaCheck FAIL file=/tmp/pip-b1neh3fv-build/torch/lib/THC/THCGeneral.c line=66 error=30 : unknown error\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/_utils.py\", line 65, in _cuda\n    return new_type(self.size()).copy_(self, async)\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/cuda/__init__.py\", line 266, in _lazy_new\n    _lazy_init()\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/cuda/__init__.py\", line 85, in _lazy_init\n    torch._C._cuda_init()\nRuntimeError: cuda runtime error (30) : unknown error at /tmp/pip-b1neh3fv-build/torch/lib/THC/THCGeneral.c:66\n</code></pre>", "body_text": "I used the Dockerfile to build pytorch\ndocker build -t pytorch .\nand ran the image with\nnvidia-docker run --rm -ti --ipc=host pytorch\nInside the container, I get an error using cuda:\n\n\n\nimport torch\nx = torch.rand(1).cuda()\n\n\n\nTHCudaCheck FAIL file=/tmp/pip-b1neh3fv-build/torch/lib/THC/THCGeneral.c line=66 error=30 : unknown error\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/_utils.py\", line 65, in _cuda\n    return new_type(self.size()).copy_(self, async)\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/cuda/__init__.py\", line 266, in _lazy_new\n    _lazy_init()\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/cuda/__init__.py\", line 85, in _lazy_init\n    torch._C._cuda_init()\nRuntimeError: cuda runtime error (30) : unknown error at /tmp/pip-b1neh3fv-build/torch/lib/THC/THCGeneral.c:66", "body": "I used the Dockerfile to build pytorch\r\n`docker build -t pytorch .`\r\nand ran the image with\r\n`nvidia-docker run --rm -ti --ipc=host pytorch`\r\n\r\nInside the container, I get an error using cuda:\r\n\r\n>>> import torch\r\n>>> x = torch.rand(1).cuda()\r\n\r\n```\r\nTHCudaCheck FAIL file=/tmp/pip-b1neh3fv-build/torch/lib/THC/THCGeneral.c line=66 error=30 : unknown error\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/_utils.py\", line 65, in _cuda\r\n    return new_type(self.size()).copy_(self, async)\r\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/cuda/__init__.py\", line 266, in _lazy_new\r\n    _lazy_init()\r\n  File \"/opt/conda/envs/pytorch-py35/lib/python3.5/site-packages/torch/cuda/__init__.py\", line 85, in _lazy_init\r\n    torch._C._cuda_init()\r\nRuntimeError: cuda runtime error (30) : unknown error at /tmp/pip-b1neh3fv-build/torch/lib/THC/THCGeneral.c:66\r\n```"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13182", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13182/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13182/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13182/events", "html_url": "https://github.com/pytorch/pytorch/pull/13182", "id": 374548262, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI2MjI2NzIz", "number": 13182, "title": "Speed up CPU threshold and relu implementation", "user": {"login": "colesbury", "id": 655866, "node_id": "MDQ6VXNlcjY1NTg2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/655866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colesbury", "html_url": "https://github.com/colesbury", "followers_url": "https://api.github.com/users/colesbury/followers", "following_url": "https://api.github.com/users/colesbury/following{/other_user}", "gists_url": "https://api.github.com/users/colesbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/colesbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colesbury/subscriptions", "organizations_url": "https://api.github.com/users/colesbury/orgs", "repos_url": "https://api.github.com/users/colesbury/repos", "events_url": "https://api.github.com/users/colesbury/events{/privacy}", "received_events_url": "https://api.github.com/users/colesbury/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-26T21:08:38Z", "updated_at": "2018-11-23T15:53:58Z", "closed_at": "2018-11-05T20:53:03Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/pytorch/pytorch/pulls/13182", "html_url": "https://github.com/pytorch/pytorch/pull/13182", "diff_url": "https://github.com/pytorch/pytorch/pull/13182.diff", "patch_url": "https://github.com/pytorch/pytorch/pull/13182.patch"}, "body_html": "<pre><code>The previous threshold implementation was not vectorized or parallelized.\nThis speeds up ResNet-50 CPU inference [1] from ~88 ms to ~67 ms\n\nCPU timings:\nhttps://gist.github.com/colesbury/d0d1be6974841d62696dbde329a8fde8\n\n1 thread (before vs. after)\n10240:  17.4 us vs. 6.9 \u00b5s per loop\n102400: 141 us vs. 39.8 \u00b5s per loop\n\n16 threads (before vs. after)\n10240:  17.4 us vs. 6.7 \u00b5s per loop\n102400: 141 us vs. 14.3 \u00b5s per loop\n\nCUDA timings are not measurably different.\n\n[1]: compiled with MKL-DNN, 8 threads, batch norm merged into convolutions\nhttps://gist.github.com/colesbury/8a64897dae97558b3b82da665048c782\n</code></pre>", "body_text": "The previous threshold implementation was not vectorized or parallelized.\nThis speeds up ResNet-50 CPU inference [1] from ~88 ms to ~67 ms\n\nCPU timings:\nhttps://gist.github.com/colesbury/d0d1be6974841d62696dbde329a8fde8\n\n1 thread (before vs. after)\n10240:  17.4 us vs. 6.9 \u00b5s per loop\n102400: 141 us vs. 39.8 \u00b5s per loop\n\n16 threads (before vs. after)\n10240:  17.4 us vs. 6.7 \u00b5s per loop\n102400: 141 us vs. 14.3 \u00b5s per loop\n\nCUDA timings are not measurably different.\n\n[1]: compiled with MKL-DNN, 8 threads, batch norm merged into convolutions\nhttps://gist.github.com/colesbury/8a64897dae97558b3b82da665048c782", "body": "```\r\nThe previous threshold implementation was not vectorized or parallelized.\r\nThis speeds up ResNet-50 CPU inference [1] from ~88 ms to ~67 ms\r\n\r\nCPU timings:\r\nhttps://gist.github.com/colesbury/d0d1be6974841d62696dbde329a8fde8\r\n\r\n1 thread (before vs. after)\r\n10240:  17.4 us vs. 6.9 \u00b5s per loop\r\n102400: 141 us vs. 39.8 \u00b5s per loop\r\n\r\n16 threads (before vs. after)\r\n10240:  17.4 us vs. 6.7 \u00b5s per loop\r\n102400: 141 us vs. 14.3 \u00b5s per loop\r\n\r\nCUDA timings are not measurably different.\r\n\r\n[1]: compiled with MKL-DNN, 8 threads, batch norm merged into convolutions\r\nhttps://gist.github.com/colesbury/8a64897dae97558b3b82da665048c782\r\n```"}
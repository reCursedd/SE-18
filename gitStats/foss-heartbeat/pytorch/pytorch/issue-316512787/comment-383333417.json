{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/383333417", "html_url": "https://github.com/pytorch/pytorch/issues/6842#issuecomment-383333417", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/6842", "id": 383333417, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzMzMzQxNw==", "user": {"login": "RoyiAvital", "id": 7347975, "node_id": "MDQ6VXNlcjczNDc5NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/7347975?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RoyiAvital", "html_url": "https://github.com/RoyiAvital", "followers_url": "https://api.github.com/users/RoyiAvital/followers", "following_url": "https://api.github.com/users/RoyiAvital/following{/other_user}", "gists_url": "https://api.github.com/users/RoyiAvital/gists{/gist_id}", "starred_url": "https://api.github.com/users/RoyiAvital/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RoyiAvital/subscriptions", "organizations_url": "https://api.github.com/users/RoyiAvital/orgs", "repos_url": "https://api.github.com/users/RoyiAvital/repos", "events_url": "https://api.github.com/users/RoyiAvital/events{/privacy}", "received_events_url": "https://api.github.com/users/RoyiAvital/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-21T21:40:00Z", "updated_at": "2018-04-21T21:44:28Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5674597\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/SsnL\">@SsnL</a> ,<br>\nThe <a href=\"http://pytorch.org/docs/0.3.0/nn.html#torch.nn.MaxPool2d\" rel=\"nofollow\">MaxPool2d Documentation of 0.3.1</a> has the same formula (Just displayed differently).<br>\nI didn't miss the Dilation term. It equals to 1 and multiplied by (2 - 1) hence 25 - 1.</p>\n<p>Let's go through parameters (Horizontal):</p>\n<p>Hin = 25.<br>\nPadding = 0.<br>\nDilation = 1.<br>\nKernelSize = 2.<br>\nStride = 2.</p>\n<p>So we have:</p>\n<p><code>floor( ((Hin + 2 * Padding - Dilation * (KernelSize - 1)) / Stride) + 1 ) = floor( ((25 + 2 * 0 - 1 * (2 - 1)) / 2) + 1 ) = floor( (24 / 2) + 1 ) = 13</code>.</p>\n<p>So either the documentation is wrong or the the code isn't doing as written.<br>\nIt doesn't make sense to have output of size 12 for input of 25 as it means a complete column is ignored.</p>\n<p>Indeed the example in the 0.3.x branch include the Variable function as needed.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9110200\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fmassa\">@fmassa</a> , Since in this case the inner value is integer the rounding mode won't make a difference.</p>", "body_text": "@SsnL ,\nThe MaxPool2d Documentation of 0.3.1 has the same formula (Just displayed differently).\nI didn't miss the Dilation term. It equals to 1 and multiplied by (2 - 1) hence 25 - 1.\nLet's go through parameters (Horizontal):\nHin = 25.\nPadding = 0.\nDilation = 1.\nKernelSize = 2.\nStride = 2.\nSo we have:\nfloor( ((Hin + 2 * Padding - Dilation * (KernelSize - 1)) / Stride) + 1 ) = floor( ((25 + 2 * 0 - 1 * (2 - 1)) / 2) + 1 ) = floor( (24 / 2) + 1 ) = 13.\nSo either the documentation is wrong or the the code isn't doing as written.\nIt doesn't make sense to have output of size 12 for input of 25 as it means a complete column is ignored.\nIndeed the example in the 0.3.x branch include the Variable function as needed.\n@fmassa , Since in this case the inner value is integer the rounding mode won't make a difference.", "body": "@SsnL ,\r\nThe [MaxPool2d Documentation of 0.3.1](http://pytorch.org/docs/0.3.0/nn.html#torch.nn.MaxPool2d) has the same formula (Just displayed differently).  \r\nI didn't miss the Dilation term. It equals to 1 and multiplied by (2 - 1) hence 25 - 1.\r\n\r\nLet's go through parameters (Horizontal):\r\n\r\nHin = 25.\r\nPadding = 0.\r\nDilation = 1.\r\nKernelSize = 2.\r\nStride = 2.\r\n\r\nSo we have:\r\n\r\n`floor( ((Hin + 2 * Padding - Dilation * (KernelSize - 1)) / Stride) + 1 ) = floor( ((25 + 2 * 0 - 1 * (2 - 1)) / 2) + 1 ) = floor( (24 / 2) + 1 ) = 13`.\r\n\r\nSo either the documentation is wrong or the the code isn't doing as written.\r\nIt doesn't make sense to have output of size 12 for input of 25 as it means a complete column is ignored.\r\n\r\nIndeed the example in the 0.3.x branch include the Variable function as needed.\r\n\r\n@fmassa , Since in this case the inner value is integer the rounding mode won't make a difference."}
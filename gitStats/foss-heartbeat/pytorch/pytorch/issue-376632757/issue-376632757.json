{"url": "https://api.github.com/repos/pytorch/pytorch/issues/13494", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/13494/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/13494/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/13494/events", "html_url": "https://github.com/pytorch/pytorch/issues/13494", "id": 376632757, "node_id": "MDU6SXNzdWUzNzY2MzI3NTc=", "number": 13494, "title": "Throws error when backward through sum() twice", "user": {"login": "ailzhang", "id": 5248122, "node_id": "MDQ6VXNlcjUyNDgxMjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5248122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ailzhang", "html_url": "https://github.com/ailzhang", "followers_url": "https://api.github.com/users/ailzhang/followers", "following_url": "https://api.github.com/users/ailzhang/following{/other_user}", "gists_url": "https://api.github.com/users/ailzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ailzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ailzhang/subscriptions", "organizations_url": "https://api.github.com/users/ailzhang/orgs", "repos_url": "https://api.github.com/users/ailzhang/repos", "events_url": "https://api.github.com/users/ailzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/ailzhang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "ailzhang", "id": 5248122, "node_id": "MDQ6VXNlcjUyNDgxMjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5248122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ailzhang", "html_url": "https://github.com/ailzhang", "followers_url": "https://api.github.com/users/ailzhang/followers", "following_url": "https://api.github.com/users/ailzhang/following{/other_user}", "gists_url": "https://api.github.com/users/ailzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ailzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ailzhang/subscriptions", "organizations_url": "https://api.github.com/users/ailzhang/orgs", "repos_url": "https://api.github.com/users/ailzhang/repos", "events_url": "https://api.github.com/users/ailzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/ailzhang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ailzhang", "id": 5248122, "node_id": "MDQ6VXNlcjUyNDgxMjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/5248122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ailzhang", "html_url": "https://github.com/ailzhang", "followers_url": "https://api.github.com/users/ailzhang/followers", "following_url": "https://api.github.com/users/ailzhang/following{/other_user}", "gists_url": "https://api.github.com/users/ailzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ailzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ailzhang/subscriptions", "organizations_url": "https://api.github.com/users/ailzhang/orgs", "repos_url": "https://api.github.com/users/ailzhang/repos", "events_url": "https://api.github.com/users/ailzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/ailzhang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2018-11-02T01:21:52Z", "updated_at": "2018-11-02T18:26:43Z", "closed_at": "2018-11-02T17:41:21Z", "author_association": "CONTRIBUTOR", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"bug\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f41b.png\">\ud83d\udc1b</g-emoji> Bug</h2>\n<p><code>sum()</code> is special that we can backward() through it multiple times since it doesn't have saved variable, so nothing was really destroyed after the first backward.</p>\n<p>This behavior is bad as we might silently backward through it multiple times without noticing, but the grad accumulates.</p>\n<h2>To Reproduce</h2>\n<pre><code>a = torch.randn(2, 2, 2, 2).requires_grad_(True)\na_sum = a.sum()\na_sum.backward()\na_sum.backward()\n</code></pre>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=370202\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zdevito\">@zdevito</a> told me briefly how to fix, I will send a PR for it soon.</p>", "body_text": "\ud83d\udc1b Bug\nsum() is special that we can backward() through it multiple times since it doesn't have saved variable, so nothing was really destroyed after the first backward.\nThis behavior is bad as we might silently backward through it multiple times without noticing, but the grad accumulates.\nTo Reproduce\na = torch.randn(2, 2, 2, 2).requires_grad_(True)\na_sum = a.sum()\na_sum.backward()\na_sum.backward()\n\n@zdevito told me briefly how to fix, I will send a PR for it soon.", "body": "## \ud83d\udc1b Bug\r\n`sum()` is special that we can backward() through it multiple times since it doesn't have saved variable, so nothing was really destroyed after the first backward.\r\n\r\nThis behavior is bad as we might silently backward through it multiple times without noticing, but the grad accumulates.\r\n\r\n## To Reproduce\r\n```\r\na = torch.randn(2, 2, 2, 2).requires_grad_(True)\r\na_sum = a.sum()\r\na_sum.backward()\r\na_sum.backward()\r\n```\r\n\r\n@zdevito told me briefly how to fix, I will send a PR for it soon. \r\n"}
{"url": "https://api.github.com/repos/pytorch/pytorch/issues/12339", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/12339/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/12339/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/12339/events", "html_url": "https://github.com/pytorch/pytorch/issues/12339", "id": 366959966, "node_id": "MDU6SXNzdWUzNjY5NTk5NjY=", "number": 12339, "title": "Build simple example using pytorch C++ API on Jetson TX1 failed", "user": {"login": "JunhongXu", "id": 13001487, "node_id": "MDQ6VXNlcjEzMDAxNDg3", "avatar_url": "https://avatars2.githubusercontent.com/u/13001487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JunhongXu", "html_url": "https://github.com/JunhongXu", "followers_url": "https://api.github.com/users/JunhongXu/followers", "following_url": "https://api.github.com/users/JunhongXu/following{/other_user}", "gists_url": "https://api.github.com/users/JunhongXu/gists{/gist_id}", "starred_url": "https://api.github.com/users/JunhongXu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JunhongXu/subscriptions", "organizations_url": "https://api.github.com/users/JunhongXu/orgs", "repos_url": "https://api.github.com/users/JunhongXu/repos", "events_url": "https://api.github.com/users/JunhongXu/events{/privacy}", "received_events_url": "https://api.github.com/users/JunhongXu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-04T20:36:10Z", "updated_at": "2018-10-06T03:59:08Z", "closed_at": "2018-10-06T03:21:41Z", "author_association": "NONE", "body_html": "<h2><g-emoji class=\"g-emoji\" alias=\"question\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/2753.png\">\u2753</g-emoji> Questions and Help</h2>\n<p>I was trying to follow the instructions to build a simple C++ program by following the URL, <a href=\"https://pytorch.org/cppdocs/installing.html\" rel=\"nofollow\">https://pytorch.org/cppdocs/installing.html</a> on Jetson TX1.</p>\n<p>After executing <code>cmake -DCMAKE_PREFIX_PATH=~/build/libtorch ..</code>, the log is</p>\n<blockquote>\n<p>-- The C compiler identification is GNU 5.4.0<br>\n-- The CXX compiler identification is GNU 5.4.0<br>\n-- Check for working C compiler: /usr/bin/cc<br>\n-- Check for working C compiler: /usr/bin/cc -- works<br>\n-- Detecting C compiler ABI info<br>\n-- Detecting C compiler ABI info - done<br>\n-- Detecting C compile features<br>\n-- Detecting C compile features - done<br>\n-- Check for working CXX compiler: /usr/bin/c++<br>\n-- Check for working CXX compiler: /usr/bin/c++ -- works<br>\n-- Detecting CXX compiler ABI info<br>\n-- Detecting CXX compiler ABI info - done<br>\n-- Detecting CXX compile features<br>\n-- Detecting CXX compile features - done<br>\n-- Looking for pthread.h<br>\n-- Looking for pthread.h - found<br>\n-- Looking for pthread_create<br>\n-- Looking for pthread_create - not found<br>\n-- Looking for pthread_create in pthreads<br>\n-- Looking for pthread_create in pthreads - not found<br>\n-- Looking for pthread_create in pthread<br>\n-- Looking for pthread_create in pthread - found<br>\n-- Found Threads: TRUE<br>\n-- Found CUDA: /usr/local/cuda-9.0 (found suitable version \"9.0\", minimum required is \"7.0\")<br>\n-- Caffe2: CUDA detected: 9.0<br>\n-- Caffe2: CUDA nvcc is: /usr/local/cuda-9.0/bin/nvcc<br>\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda-9.0<br>\n-- Caffe2: Header version is: 9.0<br>\n-- Found CUDNN: /usr/include<br>\n-- Found cuDNN: v7.1.5  (include: /usr/include, library: /usr/lib/aarch64-linux-gnu/libcudnn.so)<br>\n-- Autodetected CUDA architecture(s):  5.3<br>\n-- Added CUDA NVCC flags for: -gencode;arch=compute_53,code=sm_53<br>\n-- Configuring done<br>\n-- Generating done<br>\n-- Build files have been written to: /home/nvidia/test/build</p>\n</blockquote>\n<p>When I do make, I got the following error:</p>\n<blockquote>\n<p>Scanning dependencies of target example-app<br>\n[ 50%] Building CXX object CMakeFiles/example-app.dir/example-app.cpp.o<br>\n[100%] Linking CXX executable example-app<br>\n/home/nvidia/build/libtorch/lib/libtorch.so: error adding symbols: File in wrong format<br>\ncollect2: error: ld returned 1 exit status<br>\nCMakeFiles/example-app.dir/build.make:99: recipe for target 'example-app' failed<br>\nmake[2]: *** [example-app] Error 1<br>\nCMakeFiles/Makefile2:72: recipe for target 'CMakeFiles/example-app.dir/all' failed<br>\nmake[1]: *** [CMakeFiles/example-app.dir/all] Error 2<br>\nMakefile:83: recipe for target 'all' failed<br>\nmake: *** [all] Error 2</p>\n</blockquote>\n<p>However, I can compile and build this simple program on my desktop (Ubuntu 16.04).</p>", "body_text": "\u2753 Questions and Help\nI was trying to follow the instructions to build a simple C++ program by following the URL, https://pytorch.org/cppdocs/installing.html on Jetson TX1.\nAfter executing cmake -DCMAKE_PREFIX_PATH=~/build/libtorch .., the log is\n\n-- The C compiler identification is GNU 5.4.0\n-- The CXX compiler identification is GNU 5.4.0\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Looking for pthread.h\n-- Looking for pthread.h - found\n-- Looking for pthread_create\n-- Looking for pthread_create - not found\n-- Looking for pthread_create in pthreads\n-- Looking for pthread_create in pthreads - not found\n-- Looking for pthread_create in pthread\n-- Looking for pthread_create in pthread - found\n-- Found Threads: TRUE\n-- Found CUDA: /usr/local/cuda-9.0 (found suitable version \"9.0\", minimum required is \"7.0\")\n-- Caffe2: CUDA detected: 9.0\n-- Caffe2: CUDA nvcc is: /usr/local/cuda-9.0/bin/nvcc\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda-9.0\n-- Caffe2: Header version is: 9.0\n-- Found CUDNN: /usr/include\n-- Found cuDNN: v7.1.5  (include: /usr/include, library: /usr/lib/aarch64-linux-gnu/libcudnn.so)\n-- Autodetected CUDA architecture(s):  5.3\n-- Added CUDA NVCC flags for: -gencode;arch=compute_53,code=sm_53\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/nvidia/test/build\n\nWhen I do make, I got the following error:\n\nScanning dependencies of target example-app\n[ 50%] Building CXX object CMakeFiles/example-app.dir/example-app.cpp.o\n[100%] Linking CXX executable example-app\n/home/nvidia/build/libtorch/lib/libtorch.so: error adding symbols: File in wrong format\ncollect2: error: ld returned 1 exit status\nCMakeFiles/example-app.dir/build.make:99: recipe for target 'example-app' failed\nmake[2]: *** [example-app] Error 1\nCMakeFiles/Makefile2:72: recipe for target 'CMakeFiles/example-app.dir/all' failed\nmake[1]: *** [CMakeFiles/example-app.dir/all] Error 2\nMakefile:83: recipe for target 'all' failed\nmake: *** [all] Error 2\n\nHowever, I can compile and build this simple program on my desktop (Ubuntu 16.04).", "body": "## \u2753 Questions and Help\r\n\r\nI was trying to follow the instructions to build a simple C++ program by following the URL, https://pytorch.org/cppdocs/installing.html on Jetson TX1. \r\n\r\nAfter executing `cmake -DCMAKE_PREFIX_PATH=~/build/libtorch ..`, the log is\r\n\r\n> -- The C compiler identification is GNU 5.4.0\r\n-- The CXX compiler identification is GNU 5.4.0\r\n-- Check for working C compiler: /usr/bin/cc\r\n-- Check for working C compiler: /usr/bin/cc -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Check for working CXX compiler: /usr/bin/c++\r\n-- Check for working CXX compiler: /usr/bin/c++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Looking for pthread.h\r\n-- Looking for pthread.h - found\r\n-- Looking for pthread_create\r\n-- Looking for pthread_create - not found\r\n-- Looking for pthread_create in pthreads\r\n-- Looking for pthread_create in pthreads - not found\r\n-- Looking for pthread_create in pthread\r\n-- Looking for pthread_create in pthread - found\r\n-- Found Threads: TRUE  \r\n-- Found CUDA: /usr/local/cuda-9.0 (found suitable version \"9.0\", minimum required is \"7.0\") \r\n-- Caffe2: CUDA detected: 9.0\r\n-- Caffe2: CUDA nvcc is: /usr/local/cuda-9.0/bin/nvcc\r\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda-9.0\r\n-- Caffe2: Header version is: 9.0\r\n-- Found CUDNN: /usr/include  \r\n-- Found cuDNN: v7.1.5  (include: /usr/include, library: /usr/lib/aarch64-linux-gnu/libcudnn.so)\r\n-- Autodetected CUDA architecture(s):  5.3\r\n-- Added CUDA NVCC flags for: -gencode;arch=compute_53,code=sm_53\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /home/nvidia/test/build\r\n\r\nWhen I do make, I got the following error:\r\n\r\n> Scanning dependencies of target example-app\r\n[ 50%] Building CXX object CMakeFiles/example-app.dir/example-app.cpp.o\r\n[100%] Linking CXX executable example-app\r\n/home/nvidia/build/libtorch/lib/libtorch.so: error adding symbols: File in wrong format\r\ncollect2: error: ld returned 1 exit status\r\nCMakeFiles/example-app.dir/build.make:99: recipe for target 'example-app' failed\r\nmake[2]: *** [example-app] Error 1\r\nCMakeFiles/Makefile2:72: recipe for target 'CMakeFiles/example-app.dir/all' failed\r\nmake[1]: *** [CMakeFiles/example-app.dir/all] Error 2\r\nMakefile:83: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n\r\nHowever, I can compile and build this simple program on my desktop (Ubuntu 16.04).\r\n\r\n\r\n"}
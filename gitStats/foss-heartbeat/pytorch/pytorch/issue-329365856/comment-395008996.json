{"url": "https://api.github.com/repos/pytorch/pytorch/issues/comments/395008996", "html_url": "https://github.com/pytorch/pytorch/issues/8158#issuecomment-395008996", "issue_url": "https://api.github.com/repos/pytorch/pytorch/issues/8158", "id": 395008996, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTAwODk5Ng==", "user": {"login": "lukemurray", "id": 156625, "node_id": "MDQ6VXNlcjE1NjYyNQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/156625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukemurray", "html_url": "https://github.com/lukemurray", "followers_url": "https://api.github.com/users/lukemurray/followers", "following_url": "https://api.github.com/users/lukemurray/following{/other_user}", "gists_url": "https://api.github.com/users/lukemurray/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukemurray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukemurray/subscriptions", "organizations_url": "https://api.github.com/users/lukemurray/orgs", "repos_url": "https://api.github.com/users/lukemurray/repos", "events_url": "https://api.github.com/users/lukemurray/events{/privacy}", "received_events_url": "https://api.github.com/users/lukemurray/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-06T09:38:38Z", "updated_at": "2018-06-06T09:38:38Z", "author_association": "NONE", "body_html": "<p>Yes, I mean on a clean install I get the error. I expect installing caffe2 to work without having to manually install another protobuf version.</p>\n<p>i.e.</p>\n<ul>\n<li>I have <em>no</em> protobuf library installed</li>\n<li>I install caffe2 via <code>conda install -c caffe2 caffe2</code>. This also installs protobuf 3.4.1</li>\n<li>I compile my application that includes depends on caffe2 (via cmake, which cmake finds)\n<ul>\n<li>App has <code>#include &lt;caffe2/core/init.h&gt;</code>, <code>#include &lt;caffe2/core/net.h&gt;</code> &amp; <code>#include &lt;caffe2/utils/proto_utils.h&gt;</code></li>\n</ul>\n</li>\n<li>I receive the above errors listed above</li>\n</ul>\n<p>Those errors tell me that the headers in caffe2 are compiled with a <em>newer</em> version of protobuf than installed (installed is 3.4.1).</p>\n<p>I install protobuf 3.5.x from brew (I can't from conda as it will uninstall caffe2). And I can now compile my application as it finds the caffe2 headers and a matching protobuf version (now 3.5.x).</p>\n<p>So out of the box install of caffe2 I can't link against it/include it's headers.</p>\n<p>I have no requirement on any protobuf version myself, only caffe2 does. But, for me, it doesn't work out of the box. Based on the error messages I <em>assumed</em> that the conda package <em>may</em> be installing the wrong protobuf version.</p>", "body_text": "Yes, I mean on a clean install I get the error. I expect installing caffe2 to work without having to manually install another protobuf version.\ni.e.\n\nI have no protobuf library installed\nI install caffe2 via conda install -c caffe2 caffe2. This also installs protobuf 3.4.1\nI compile my application that includes depends on caffe2 (via cmake, which cmake finds)\n\nApp has #include <caffe2/core/init.h>, #include <caffe2/core/net.h> & #include <caffe2/utils/proto_utils.h>\n\n\nI receive the above errors listed above\n\nThose errors tell me that the headers in caffe2 are compiled with a newer version of protobuf than installed (installed is 3.4.1).\nI install protobuf 3.5.x from brew (I can't from conda as it will uninstall caffe2). And I can now compile my application as it finds the caffe2 headers and a matching protobuf version (now 3.5.x).\nSo out of the box install of caffe2 I can't link against it/include it's headers.\nI have no requirement on any protobuf version myself, only caffe2 does. But, for me, it doesn't work out of the box. Based on the error messages I assumed that the conda package may be installing the wrong protobuf version.", "body": "Yes, I mean on a clean install I get the error. I expect installing caffe2 to work without having to manually install another protobuf version.\r\n\r\ni.e.\r\n\r\n- I have _no_ protobuf library installed\r\n- I install caffe2 via `conda install -c caffe2 caffe2`. This also installs protobuf 3.4.1\r\n- I compile my application that includes depends on caffe2 (via cmake, which cmake finds)\r\n  - App has `#include <caffe2/core/init.h>`, `#include <caffe2/core/net.h>` & `#include <caffe2/utils/proto_utils.h>`\r\n- I receive the above errors listed above\r\n\r\nThose errors tell me that the headers in caffe2 are compiled with a _newer_ version of protobuf than installed (installed is 3.4.1).\r\n\r\nI install protobuf 3.5.x from brew (I can't from conda as it will uninstall caffe2). And I can now compile my application as it finds the caffe2 headers and a matching protobuf version (now 3.5.x).\r\n\r\nSo out of the box install of caffe2 I can't link against it/include it's headers.\r\n\r\nI have no requirement on any protobuf version myself, only caffe2 does. But, for me, it doesn't work out of the box. Based on the error messages I _assumed_ that the conda package _may_ be installing the wrong protobuf version.\r\n"}
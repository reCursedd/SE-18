{"url": "https://api.github.com/repos/pytorch/pytorch/issues/8158", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/8158/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/8158/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/8158/events", "html_url": "https://github.com/pytorch/pytorch/issues/8158", "id": 329365856, "node_id": "MDU6SXNzdWUzMjkzNjU4NTY=", "number": 8158, "title": "MacOS conda caffe2 package incorrect protobuf versions.", "user": {"login": "lukemurray", "id": 156625, "node_id": "MDQ6VXNlcjE1NjYyNQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/156625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukemurray", "html_url": "https://github.com/lukemurray", "followers_url": "https://api.github.com/users/lukemurray/followers", "following_url": "https://api.github.com/users/lukemurray/following{/other_user}", "gists_url": "https://api.github.com/users/lukemurray/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukemurray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukemurray/subscriptions", "organizations_url": "https://api.github.com/users/lukemurray/orgs", "repos_url": "https://api.github.com/users/lukemurray/repos", "events_url": "https://api.github.com/users/lukemurray/events{/privacy}", "received_events_url": "https://api.github.com/users/lukemurray/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 890282107, "node_id": "MDU6TGFiZWw4OTAyODIxMDc=", "url": "https://api.github.com/repos/pytorch/pytorch/labels/caffe2", "name": "caffe2", "color": "210aa8", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pjh5", "id": 6456020, "node_id": "MDQ6VXNlcjY0NTYwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6456020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjh5", "html_url": "https://github.com/pjh5", "followers_url": "https://api.github.com/users/pjh5/followers", "following_url": "https://api.github.com/users/pjh5/following{/other_user}", "gists_url": "https://api.github.com/users/pjh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjh5/subscriptions", "organizations_url": "https://api.github.com/users/pjh5/orgs", "repos_url": "https://api.github.com/users/pjh5/repos", "events_url": "https://api.github.com/users/pjh5/events{/privacy}", "received_events_url": "https://api.github.com/users/pjh5/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-06-05T09:08:36Z", "updated_at": "2018-06-08T03:39:45Z", "closed_at": "2018-06-07T18:23:43Z", "author_association": "NONE", "body_html": "<h2>Issue description</h2>\n<p>Installing the caffe2 package with <code>conda install -c caffe2 caffe2</code> installs <code>protobuf: 3.4.1-py36h314970b_0</code> as well.</p>\n<p>When I try to compile a C++ application with Caffe2 it complains that the protobuf headers are compiled with 3.5.x and 3.4.x is too old.</p>\n<p>I got around this by using <code>brew</code> to install protobuf 3.5.x and my app linked against that. But I think the conda package is incorrect?</p>\n<h2>Code example</h2>\n<p>Error with the conda protobuf</p>\n<pre lang=\"/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:12:2:\" data-meta=\"error: This file was generated by a newer version of protoc which is\"><code>#error This file was generated by a newer version of protoc which is\n ^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:13:2: error: incompatible with your Protocol Buffer headers. Please update\n#error incompatible with your Protocol Buffer headers.  Please update\n ^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:14:2: error: your headers.\n#error your headers.\n ^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:3384:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      device_detail = ::google::protobuf::internal::GetOwnedMessage(\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:3438:47: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      segment = ::google::protobuf::internal::GetOwnedMessage(\n                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:4137:41: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      n = ::google::protobuf::internal::GetOwnedMessage(\n          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:4880:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      device_option = ::google::protobuf::internal::GetOwnedMessage(\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:5337:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      device_option = ::google::protobuf::internal::GetOwnedMessage(\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:6339:46: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      tensor = ::google::protobuf::internal::GetOwnedMessage(\n               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:6456:47: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      qtensor = ::google::protobuf::internal::GetOwnedMessage(\n                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n10 errors generated.\n</code></pre>\n<h2>System Info</h2>\n<p>Please copy and paste the output from our<br>\n<a href=\"https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py\" rel=\"nofollow\">environment collection script</a><br>\n(or fill out the checklist below manually).</p>\n<ul>\n<li>PyTorch or Caffe2: Caffe2</li>\n<li>How you installed PyTorch (conda, pip, source): Pytorch, PIP (in conda env), Caffe2 Conda</li>\n<li>Build command you used (if compiling from source):</li>\n<li>OS: MacOS 10.13.4</li>\n<li>PyTorch version: 0.4</li>\n<li>Python version: 3.6</li>\n<li>CUDA/cuDNN version: none</li>\n<li>GPU models and configuration: none</li>\n<li>GCC version (if compiling from source):</li>\n<li>CMake version:</li>\n<li>Versions of any other relevant libraries:</li>\n</ul>", "body_text": "Issue description\nInstalling the caffe2 package with conda install -c caffe2 caffe2 installs protobuf: 3.4.1-py36h314970b_0 as well.\nWhen I try to compile a C++ application with Caffe2 it complains that the protobuf headers are compiled with 3.5.x and 3.4.x is too old.\nI got around this by using brew to install protobuf 3.5.x and my app linked against that. But I think the conda package is incorrect?\nCode example\nError with the conda protobuf\n#error This file was generated by a newer version of protoc which is\n ^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:13:2: error: incompatible with your Protocol Buffer headers. Please update\n#error incompatible with your Protocol Buffer headers.  Please update\n ^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:14:2: error: your headers.\n#error your headers.\n ^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:3384:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      device_detail = ::google::protobuf::internal::GetOwnedMessage(\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:3438:47: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      segment = ::google::protobuf::internal::GetOwnedMessage(\n                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:4137:41: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      n = ::google::protobuf::internal::GetOwnedMessage(\n          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:4880:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      device_option = ::google::protobuf::internal::GetOwnedMessage(\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:5337:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      device_option = ::google::protobuf::internal::GetOwnedMessage(\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:6339:46: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      tensor = ::google::protobuf::internal::GetOwnedMessage(\n               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:6456:47: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\n      qtensor = ::google::protobuf::internal::GetOwnedMessage(\n                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n10 errors generated.\n\nSystem Info\nPlease copy and paste the output from our\nenvironment collection script\n(or fill out the checklist below manually).\n\nPyTorch or Caffe2: Caffe2\nHow you installed PyTorch (conda, pip, source): Pytorch, PIP (in conda env), Caffe2 Conda\nBuild command you used (if compiling from source):\nOS: MacOS 10.13.4\nPyTorch version: 0.4\nPython version: 3.6\nCUDA/cuDNN version: none\nGPU models and configuration: none\nGCC version (if compiling from source):\nCMake version:\nVersions of any other relevant libraries:", "body": "## Issue description\r\n\r\nInstalling the caffe2 package with `conda install -c caffe2 caffe2` installs `protobuf: 3.4.1-py36h314970b_0` as well. \r\n\r\nWhen I try to compile a C++ application with Caffe2 it complains that the protobuf headers are compiled with 3.5.x and 3.4.x is too old.\r\n\r\nI got around this by using `brew` to install protobuf 3.5.x and my app linked against that. But I think the conda package is incorrect?\r\n\r\n## Code example\r\n\r\nError with the conda protobuf\r\n```/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:12:2: error: This file was generated by a newer version of protoc which is\r\n#error This file was generated by a newer version of protoc which is\r\n ^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:13:2: error: incompatible with your Protocol Buffer headers. Please update\r\n#error incompatible with your Protocol Buffer headers.  Please update\r\n ^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:14:2: error: your headers.\r\n#error your headers.\r\n ^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:3384:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\r\n      device_detail = ::google::protobuf::internal::GetOwnedMessage(\r\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:3438:47: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\r\n      segment = ::google::protobuf::internal::GetOwnedMessage(\r\n                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:4137:41: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\r\n      n = ::google::protobuf::internal::GetOwnedMessage(\r\n          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:4880:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\r\n      device_option = ::google::protobuf::internal::GetOwnedMessage(\r\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:5337:53: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\r\n      device_option = ::google::protobuf::internal::GetOwnedMessage(\r\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:6339:46: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\r\n      tensor = ::google::protobuf::internal::GetOwnedMessage(\r\n               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\n/Users/lukemurray/anaconda3/include/caffe2/proto/caffe2.pb.h:6456:47: error: no member named 'GetOwnedMessage' in namespace 'google::protobuf::internal'\r\n      qtensor = ::google::protobuf::internal::GetOwnedMessage(\r\n                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\n10 errors generated.\r\n```\r\n\r\n## System Info\r\nPlease copy and paste the output from our\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)\r\n(or fill out the checklist below manually).\r\n\r\n\r\n- PyTorch or Caffe2: Caffe2\r\n- How you installed PyTorch (conda, pip, source): Pytorch, PIP (in conda env), Caffe2 Conda\r\n- Build command you used (if compiling from source):\r\n- OS: MacOS 10.13.4\r\n- PyTorch version: 0.4\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: none\r\n- GPU models and configuration: none\r\n- GCC version (if compiling from source):\r\n- CMake version:\r\n- Versions of any other relevant libraries:\r\n"}
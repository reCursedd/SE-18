{"url": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/160025890", "pull_request_review_id": 87075705, "id": 160025890, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDAyNTg5MA==", "diff_hunk": "@@ -57,13 +61,17 @@ def step(self, closure=None):\n \n                 state['step'] += 1\n \n-                if group['weight_decay'] != 0:\n-                    grad = grad.add(group['weight_decay'], p.data)\n-\n                 square_avg.mul_(rho).addcmul_(1 - rho, grad, grad)\n                 std = square_avg.add(eps).sqrt_()\n                 delta = acc_delta.add(eps).sqrt_().div_(std).mul_(grad)\n+", "path": "torch/optim/adadelta.py", "position": 48, "original_position": 25, "commit_id": "52acf1b7bc74f54a16317b179ba97f1a4e7c0f7a", "original_commit_id": "85beab6429c40ed6abfb98b0ea8be3fb8fa663c9", "user": {"login": "kashif", "id": 8100, "node_id": "MDQ6VXNlcjgxMDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/8100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kashif", "html_url": "https://github.com/kashif", "followers_url": "https://api.github.com/users/kashif/followers", "following_url": "https://api.github.com/users/kashif/following{/other_user}", "gists_url": "https://api.github.com/users/kashif/gists{/gist_id}", "starred_url": "https://api.github.com/users/kashif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kashif/subscriptions", "organizations_url": "https://api.github.com/users/kashif/orgs", "repos_url": "https://api.github.com/users/kashif/repos", "events_url": "https://api.github.com/users/kashif/events{/privacy}", "received_events_url": "https://api.github.com/users/kashif/received_events", "type": "User", "site_admin": false}, "body": "@vishwakftw no correct me if I am wrong, but then you would be multiplying the `lr` with the weight decayed `p.data` and confounding the weight decay rate and `lr` which is what this is trying to fix in the first place...", "created_at": "2018-01-06T13:34:41Z", "updated_at": "2018-11-23T15:37:54Z", "html_url": "https://github.com/pytorch/pytorch/pull/4429#discussion_r160025890", "pull_request_url": "https://api.github.com/repos/pytorch/pytorch/pulls/4429", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/comments/160025890"}, "html": {"href": "https://github.com/pytorch/pytorch/pull/4429#discussion_r160025890"}, "pull_request": {"href": "https://api.github.com/repos/pytorch/pytorch/pulls/4429"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23639302\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vishwakftw\">@vishwakftw</a> no correct me if I am wrong, but then you would be multiplying the <code>lr</code> with the weight decayed <code>p.data</code> and confounding the weight decay rate and <code>lr</code> which is what this is trying to fix in the first place...</p>", "body_text": "@vishwakftw no correct me if I am wrong, but then you would be multiplying the lr with the weight decayed p.data and confounding the weight decay rate and lr which is what this is trying to fix in the first place...", "in_reply_to_id": 160025136}
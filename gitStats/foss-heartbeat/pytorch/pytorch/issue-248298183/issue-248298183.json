{"url": "https://api.github.com/repos/pytorch/pytorch/issues/2311", "repository_url": "https://api.github.com/repos/pytorch/pytorch", "labels_url": "https://api.github.com/repos/pytorch/pytorch/issues/2311/labels{/name}", "comments_url": "https://api.github.com/repos/pytorch/pytorch/issues/2311/comments", "events_url": "https://api.github.com/repos/pytorch/pytorch/issues/2311/events", "html_url": "https://github.com/pytorch/pytorch/issues/2311", "id": 248298183, "node_id": "MDU6SXNzdWUyNDgyOTgxODM=", "number": 2311, "title": "LSTM mask / remove zeros", "user": {"login": "HuangZili", "id": 11537804, "node_id": "MDQ6VXNlcjExNTM3ODA0", "avatar_url": "https://avatars0.githubusercontent.com/u/11537804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HuangZili", "html_url": "https://github.com/HuangZili", "followers_url": "https://api.github.com/users/HuangZili/followers", "following_url": "https://api.github.com/users/HuangZili/following{/other_user}", "gists_url": "https://api.github.com/users/HuangZili/gists{/gist_id}", "starred_url": "https://api.github.com/users/HuangZili/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HuangZili/subscriptions", "organizations_url": "https://api.github.com/users/HuangZili/orgs", "repos_url": "https://api.github.com/users/HuangZili/repos", "events_url": "https://api.github.com/users/HuangZili/events{/privacy}", "received_events_url": "https://api.github.com/users/HuangZili/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-07T03:24:04Z", "updated_at": "2017-08-07T03:46:09Z", "closed_at": "2017-08-07T03:46:09Z", "author_association": "NONE", "body_html": "<p>Hi, I am writing a LSTM with variable sequence length. I got the lstm output using <code>lstm_out, _ = pad_packed_sequence(packed_output, batch_first=True)</code> . Now the lstm_out will be of size BxTx* format, where B is the batch size, T is the max length of sequence and * is the number of hidden units. What I want is the average of lstm output for every sequence(Bx1x*). The length of every sequence is also available.</p>\n<p>Do I have to index the nonzero lines first and then calculate the mean? I wonder if there exists some easy way to implement this method. Thank you a lot!</p>", "body_text": "Hi, I am writing a LSTM with variable sequence length. I got the lstm output using lstm_out, _ = pad_packed_sequence(packed_output, batch_first=True) . Now the lstm_out will be of size BxTx* format, where B is the batch size, T is the max length of sequence and * is the number of hidden units. What I want is the average of lstm output for every sequence(Bx1x*). The length of every sequence is also available.\nDo I have to index the nonzero lines first and then calculate the mean? I wonder if there exists some easy way to implement this method. Thank you a lot!", "body": "Hi, I am writing a LSTM with variable sequence length. I got the lstm output using `lstm_out, _ = pad_packed_sequence(packed_output, batch_first=True)` . Now the lstm_out will be of size BxTx* format, where B is the batch size, T is the max length of sequence and * is the number of hidden units. What I want is the average of lstm output for every sequence(Bx1x*). The length of every sequence is also available.\r\n\r\nDo I have to index the nonzero lines first and then calculate the mean? I wonder if there exists some easy way to implement this method. Thank you a lot!\r\n"}
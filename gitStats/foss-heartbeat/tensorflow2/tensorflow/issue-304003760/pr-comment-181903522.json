{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/181903522", "pull_request_review_id": 112610644, "id": 181903522, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTkwMzUyMg==", "diff_hunk": "@@ -159,6 +159,9 @@ Status FuseScaleOffsetToConvWeights(const std::vector<float>& scale_values,\n   NodeDef bias_add_node;\n   bias_add_node.set_op(\"BiasAdd\");\n   bias_add_node.set_name(conv_output_name);\n+  if (HasAttr(conv_node, \"data_format\")) {", "path": "tensorflow/tools/graph_transforms/fold_old_batch_norms.cc", "position": null, "original_position": 4, "commit_id": "ddda9acc9b922a9983128fc2e47f3541b8e456bc", "original_commit_id": "0c6845db28bd690eb848dde837f23fef6a0a8eed", "user": {"login": "mingxingtan", "id": 6027221, "node_id": "MDQ6VXNlcjYwMjcyMjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/6027221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxingtan", "html_url": "https://github.com/mingxingtan", "followers_url": "https://api.github.com/users/mingxingtan/followers", "following_url": "https://api.github.com/users/mingxingtan/following{/other_user}", "gists_url": "https://api.github.com/users/mingxingtan/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxingtan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxingtan/subscriptions", "organizations_url": "https://api.github.com/users/mingxingtan/orgs", "repos_url": "https://api.github.com/users/mingxingtan/repos", "events_url": "https://api.github.com/users/mingxingtan/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxingtan/received_events", "type": "User", "site_admin": false}, "body": "I don't see where is HasAttr defined. Maybe you can directly use something like:\r\n\r\n```\r\nif (!conv_node.attr().count(\"data_format\")) {\r\n  CopyNodeAttr(conv_node, \"data_format\", \"data_format\", &bias_add_node);\r\n}\r\n```\r\n", "created_at": "2018-04-16T22:24:15Z", "updated_at": "2018-04-21T16:12:51Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/17602#discussion_r181903522", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17602", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/181903522"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/17602#discussion_r181903522"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17602"}}, "body_html": "<p>I don't see where is HasAttr defined. Maybe you can directly use something like:</p>\n<pre><code>if (!conv_node.attr().count(\"data_format\")) {\n  CopyNodeAttr(conv_node, \"data_format\", \"data_format\", &amp;bias_add_node);\n}\n</code></pre>", "body_text": "I don't see where is HasAttr defined. Maybe you can directly use something like:\nif (!conv_node.attr().count(\"data_format\")) {\n  CopyNodeAttr(conv_node, \"data_format\", \"data_format\", &bias_add_node);\n}"}
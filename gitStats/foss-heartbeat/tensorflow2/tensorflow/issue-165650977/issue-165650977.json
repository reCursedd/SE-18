{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3319", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3319/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3319/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3319/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3319", "id": 165650977, "node_id": "MDU6SXNzdWUxNjU2NTA5Nzc=", "number": 3319, "title": "TensorFlow Android demo crashes on start", "user": {"login": "PatrickGuo", "id": 7960095, "node_id": "MDQ6VXNlcjc5NjAwOTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/7960095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PatrickGuo", "html_url": "https://github.com/PatrickGuo", "followers_url": "https://api.github.com/users/PatrickGuo/followers", "following_url": "https://api.github.com/users/PatrickGuo/following{/other_user}", "gists_url": "https://api.github.com/users/PatrickGuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/PatrickGuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PatrickGuo/subscriptions", "organizations_url": "https://api.github.com/users/PatrickGuo/orgs", "repos_url": "https://api.github.com/users/PatrickGuo/repos", "events_url": "https://api.github.com/users/PatrickGuo/events{/privacy}", "received_events_url": "https://api.github.com/users/PatrickGuo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 23, "created_at": "2016-07-14T20:27:23Z", "updated_at": "2016-11-15T09:13:56Z", "closed_at": "2016-07-16T09:57:27Z", "author_association": "NONE", "body_html": "<p>I installed the TensorFlow on my mac and tried the Android demo. It is confusing that it's all fine with compiling to .apk, but the application crashes as soon as it starts on my Nexus5 cellphone.</p>\n<h3>Environment info</h3>\n<p>Operating System: Mac OS X<br>\nAndroid SDK: 24.0.0<br>\nAndroid NDK: r10e (will encounter problems when building with bazel if using latest v12)<br>\nBazel: 0.1.4<br>\nCellphone OS: Android 6</p>\n<p>I tried using adb to install the application, and everything seems perfectly fine until I launched the application. Before that, I have already checked that the camera permission is fine. As soon as I open the application, it will immediately crash. I grabbed the log from my device. Besides, I also compared the log with those generated by a successfully running demo. The main difference starts from:<br>\n<strong>07-14 14:00:46.044  2754  2754 E tensorflow: CameraConnectionFragment: Couldn't find any suitable preview size</strong><br>\nCould anyone help me on finding out what cause this problem? The complete log is attached below.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>07-14 14:00:45.722   773  1502 I ActivityManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.tensorflow.demo/.CameraActivity (has extras)} from uid 10022 on display 0<br>\n07-14 14:00:45.735   202   811 D audio_hw_primary: out_set_parameters: enter: usecase(1: low-latency-playback) kvpairs: routing=2<br>\n07-14 14:00:45.767   202   811 D AudioFlinger: mixer(0xb4100000) throttle end: throttle time(9)<br>\n07-14 14:00:45.767  2754  2754 I art     : Late-enabling -Xcheck:jni<br>\n07-14 14:00:45.768   773   947 I ActivityManager: Start proc 2754:org.tensorflow.demo/u0a84 for activity org.tensorflow.demo/.CameraActivity<br>\n07-14 14:00:45.800  2734  2734 W System  : ClassLoader referenced unknown path: /system/priv-app/MediaProvider/lib/arm<br>\n07-14 14:00:45.815  2734  2734 W System  : ClassLoader referenced unknown path: /system/priv-app/DownloadProvider/lib/arm<br>\n07-14 14:00:45.858  2754  2754 W linker  : /data/app/org.tensorflow.demo-1/lib/arm/libtensorflow_demo.so: unused DT entry: type 0x1d arg 0x10ff60a<br>\n07-14 14:00:45.871  1146  1929 D GCM     : GcmService start Intent { act=com.google.android.checkin.CHECKIN_COMPLETE flg=0x10 cmp=com.google.android.gms/.gcm.GcmService (has extras) } com.google.android.checkin.CHECKIN_COMPLETE<br>\n07-14 14:00:45.875  1566  1566 D ChimeraCfgMgr: Loading module com.google.android.gms.kids from APK com.google.android.gms<br>\n07-14 14:00:45.876  1566  1566 I Kids    : [GCoreUtils] Current gmscore version, 8186438 is smaller than the required version 8400000<br>\n07-14 14:00:45.907  1385  1385 V UserPresentBroadcastReceiver: Received Intent { act=android.intent.action.USER_PRESENT flg=0x24000010 cmp=com.google.android.gms/.auth.trustagent.UserPresentBroadcastReceiver }.<br>\n07-14 14:00:45.937  2754  2788 D OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true<br>\n07-14 14:00:45.979  1408  1408 W LocationOracleImpl: Not started: ignore location<br>\n07-14 14:00:45.981  1408  1408 E LocationReceiver: Received bad location: null<br>\n07-14 14:00:45.984  1408  1408 E LocationReceiver: Received bad location: null<br>\n07-14 14:00:45.990  2754  2788 I Adreno-EGL: &lt;qeglDrvAPI_eglInitialize:379&gt;: QUALCOMM Build: 10/21/15, 369a2ea, I96aee987eb<br>\n07-14 14:00:45.994  2754  2788 I OpenGLRenderer: Initialized EGL, version 1.4<br>\n07-14 14:00:46.025  1258  1258 I Keyboard.Facilitator: onFinishInput()<br>\n07-14 14:00:46.026  2754  2754 I CameraManagerGlobal: Connecting to camera service<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 3264x2448<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 3200x2400<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 2592x1944<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 2048x1536<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1920x1080<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1600x1200<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x960<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x768<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x720<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1024x768<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 800x600<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 800x480<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 720x480<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 640x480<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 352x288<br>\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 320x240<br>\n07-14 14:00:46.044  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 176x144<br>\n07-14 14:00:46.044  2754  2754 E tensorflow: CameraConnectionFragment: Couldn't find any suitable preview size<br>\n07-14 14:00:46.049   202   887 I CameraService: CameraService::connect call (PID 2754 \"org.tensorflow.demo\", camera ID 0) for HAL version default and Camera API version 2<br>\n07-14 14:00:46.052   202   887 I CameraService: onTorchStatusChangedLocked: Torch status changed for cameraId=0, newStatus=0<br>\n07-14 14:00:46.052   202   887 I Camera2ClientBase: Camera 0: Opened. Client: org.tensorflow.demo (PID 2754, UID 10084)<br>\n07-14 14:00:46.052   202   887 I CameraDeviceClient: CameraDeviceClient 0: Opened<br>\n07-14 14:00:46.057   202   887 D mm-camera-intf: mm_camera_open: dev name = /dev/video1, cam_idx = 1<br>\n07-14 14:00:46.061   217   217 I mm-camera-sensor: module_sensor_start_session:584 session 1<br>\n07-14 14:00:46.074  2696  2732 I MediaStoreImporter: Update: incremental Added music: 0 Updated music: 0 Deleted music: 0 Created playlists: 0 Updated playlists: 0 Deleted playlists: 0 Inserted playlist items: 0 Deleted playlist items: 0 Removed orphaned playlist items: 0<br>\n07-14 14:00:46.075  2696  2696 D MusicLifecycle: com.google.android.music.store.MediaStoreImportService generated event: Service destroyed<br>\n07-14 14:00:46.076   773  1275 I ActivityManager: Killing 2280:com.google.android.configupdater/u0a27 (adj 15): empty <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115925964\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/17\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/17/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/17\">#17</a><br>\n07-14 14:00:46.102   217   217 I mm-camera: gyro_module_start_session: Enter<br>\n07-14 14:00:46.102   217   217 I mm-camera: gyro_module_start_session: Init DSPS<br>\n07-14 14:00:46.103   217   217 E mm-camera: Failed to open sensor1 port<br>\n07-14 14:00:46.103   217   217 I mm-camera: gyro_module_start_session: dsps_proc_init() failed<br>\n07-14 14:00:46.103   217   217 I mm-camera: gyro_module_get_port: Exit failure<br>\n07-14 14:00:46.103   217   217 I mm-camera: cpp_module_start_session:352, info: starting session 1<br>\n07-14 14:00:46.113   773  1275 I ActivityManager: Killing 2255:com.google.android.apps.gcs/u0a25 (adj 15): empty <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115926208\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/18\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/18/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/18\">#18</a><br>\n07-14 14:00:46.122   217  2793 I mm-camera: cpp_thread_func:55: cpp_thread entering the polling loop...<br>\n07-14 14:00:46.122   217   217 I mm-camera: cpp_module_start_session:433, info: cpp_thread created.<br>\n07-14 14:00:46.122   217   217 I mm-camera: cpp_module_start_session:436, info: session 1 started.<br>\n07-14 14:00:46.122   217   217 I mm-camera: c2d_module_start_session:246, info: starting session 1<br>\n07-14 14:00:46.122   217   217 I mm-camera: c2d_module_start_session:284, info: c2d_thread created.<br>\n07-14 14:00:46.122   217  2794 I mm-camera: c2d_thread_func:39: c2d_thread entering the polling loop...<br>\n07-14 14:00:46.124   217   217 I mm-camera: c2d_module_start_session:306, info: session 1 started.<br>\n07-14 14:00:46.125   217   217 I mm-camera-sensor: module_module_set_session_data:2667 max delay 2 report dSelay 1<br>\n07-14 14:00:46.125   217   217 D mm-camera: module_faceproc_set_session_data:1987] Per frame control 2 1<br>\n07-14 14:00:46.125   202   887 D mm-camera-intf: mm_camera_open:  opened, break out while loop<br>\n07-14 14:00:46.125  1872  1878 E ANDR-PERF-LOCK: Failed to apply optimization for resource: 4 level: 0<br>\n07-14 14:00:46.131  2754  2786 I tensorflow: CameraConnectionFragment: Opening camera preview: 3264x2448<br>\n07-14 14:00:46.139   202   887 W CameraDeviceClient: createStream: Camera 0: Forcing asynchronous mode for stream<br>\n07-14 14:00:46.139   202   887 W CameraDeviceClient: createStream: Camera 0: Overriding format 0x1 to IMPLEMENTATION_DEFINED<br>\n07-14 14:00:46.140   202  2542 E CameraDeviceClient: createStream: bufferProducer must not be null<br>\n--------- beginning of crash<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: FATAL EXCEPTION: CameraBackground<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: Process: org.tensorflow.demo, PID: 2754<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: java.lang.IllegalArgumentException: Bad argument passed to camera service<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.CameraBinderDecorator.throwOnError(CameraBinderDecorator.java:114)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.CameraBinderDecorator$CameraBinderDecoratorListener.onAfterInvocation(CameraBinderDecorator.java:73)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.Decorator.invoke(Decorator.java:81)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at java.lang.reflect.Proxy.invoke(Proxy.java:393)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at $Proxy1.createStream(Unknown Source)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.configureStreamsChecked(CameraDeviceImpl.java:429)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.createCaptureSessionInternal(CameraDeviceImpl.java:561)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.createCaptureSession(CameraDeviceImpl.java:476)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment.createCameraPreviewSession(CameraConnectionFragment.java:471)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment.access$400(CameraConnectionFragment.java:63)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment$2.onOpened(CameraConnectionFragment.java:144)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl$1.run(CameraDeviceImpl.java:134)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Handler.handleCallback(Handler.java:739)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:95)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Looper.loop(Looper.java:148)<br>\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.HandlerThread.run(HandlerThread.java:61)<br>\n07-14 14:00:46.159   773   792 I ActivityManager: Displayed org.tensorflow.demo/.CameraActivity: +404ms<br>\n07-14 14:00:46.162   773  1503 W ActivityManager:   Force finishing activity org.tensorflow.demo/.CameraActivity</p>", "body_text": "I installed the TensorFlow on my mac and tried the Android demo. It is confusing that it's all fine with compiling to .apk, but the application crashes as soon as it starts on my Nexus5 cellphone.\nEnvironment info\nOperating System: Mac OS X\nAndroid SDK: 24.0.0\nAndroid NDK: r10e (will encounter problems when building with bazel if using latest v12)\nBazel: 0.1.4\nCellphone OS: Android 6\nI tried using adb to install the application, and everything seems perfectly fine until I launched the application. Before that, I have already checked that the camera permission is fine. As soon as I open the application, it will immediately crash. I grabbed the log from my device. Besides, I also compared the log with those generated by a successfully running demo. The main difference starts from:\n07-14 14:00:46.044  2754  2754 E tensorflow: CameraConnectionFragment: Couldn't find any suitable preview size\nCould anyone help me on finding out what cause this problem? The complete log is attached below.\nLogs or other output that would be helpful\n07-14 14:00:45.722   773  1502 I ActivityManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.tensorflow.demo/.CameraActivity (has extras)} from uid 10022 on display 0\n07-14 14:00:45.735   202   811 D audio_hw_primary: out_set_parameters: enter: usecase(1: low-latency-playback) kvpairs: routing=2\n07-14 14:00:45.767   202   811 D AudioFlinger: mixer(0xb4100000) throttle end: throttle time(9)\n07-14 14:00:45.767  2754  2754 I art     : Late-enabling -Xcheck:jni\n07-14 14:00:45.768   773   947 I ActivityManager: Start proc 2754:org.tensorflow.demo/u0a84 for activity org.tensorflow.demo/.CameraActivity\n07-14 14:00:45.800  2734  2734 W System  : ClassLoader referenced unknown path: /system/priv-app/MediaProvider/lib/arm\n07-14 14:00:45.815  2734  2734 W System  : ClassLoader referenced unknown path: /system/priv-app/DownloadProvider/lib/arm\n07-14 14:00:45.858  2754  2754 W linker  : /data/app/org.tensorflow.demo-1/lib/arm/libtensorflow_demo.so: unused DT entry: type 0x1d arg 0x10ff60a\n07-14 14:00:45.871  1146  1929 D GCM     : GcmService start Intent { act=com.google.android.checkin.CHECKIN_COMPLETE flg=0x10 cmp=com.google.android.gms/.gcm.GcmService (has extras) } com.google.android.checkin.CHECKIN_COMPLETE\n07-14 14:00:45.875  1566  1566 D ChimeraCfgMgr: Loading module com.google.android.gms.kids from APK com.google.android.gms\n07-14 14:00:45.876  1566  1566 I Kids    : [GCoreUtils] Current gmscore version, 8186438 is smaller than the required version 8400000\n07-14 14:00:45.907  1385  1385 V UserPresentBroadcastReceiver: Received Intent { act=android.intent.action.USER_PRESENT flg=0x24000010 cmp=com.google.android.gms/.auth.trustagent.UserPresentBroadcastReceiver }.\n07-14 14:00:45.937  2754  2788 D OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true\n07-14 14:00:45.979  1408  1408 W LocationOracleImpl: Not started: ignore location\n07-14 14:00:45.981  1408  1408 E LocationReceiver: Received bad location: null\n07-14 14:00:45.984  1408  1408 E LocationReceiver: Received bad location: null\n07-14 14:00:45.990  2754  2788 I Adreno-EGL: <qeglDrvAPI_eglInitialize:379>: QUALCOMM Build: 10/21/15, 369a2ea, I96aee987eb\n07-14 14:00:45.994  2754  2788 I OpenGLRenderer: Initialized EGL, version 1.4\n07-14 14:00:46.025  1258  1258 I Keyboard.Facilitator: onFinishInput()\n07-14 14:00:46.026  2754  2754 I CameraManagerGlobal: Connecting to camera service\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 3264x2448\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 3200x2400\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 2592x1944\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 2048x1536\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1920x1080\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1600x1200\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x960\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x768\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x720\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1024x768\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 800x600\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 800x480\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 720x480\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 640x480\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 352x288\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 320x240\n07-14 14:00:46.044  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 176x144\n07-14 14:00:46.044  2754  2754 E tensorflow: CameraConnectionFragment: Couldn't find any suitable preview size\n07-14 14:00:46.049   202   887 I CameraService: CameraService::connect call (PID 2754 \"org.tensorflow.demo\", camera ID 0) for HAL version default and Camera API version 2\n07-14 14:00:46.052   202   887 I CameraService: onTorchStatusChangedLocked: Torch status changed for cameraId=0, newStatus=0\n07-14 14:00:46.052   202   887 I Camera2ClientBase: Camera 0: Opened. Client: org.tensorflow.demo (PID 2754, UID 10084)\n07-14 14:00:46.052   202   887 I CameraDeviceClient: CameraDeviceClient 0: Opened\n07-14 14:00:46.057   202   887 D mm-camera-intf: mm_camera_open: dev name = /dev/video1, cam_idx = 1\n07-14 14:00:46.061   217   217 I mm-camera-sensor: module_sensor_start_session:584 session 1\n07-14 14:00:46.074  2696  2732 I MediaStoreImporter: Update: incremental Added music: 0 Updated music: 0 Deleted music: 0 Created playlists: 0 Updated playlists: 0 Deleted playlists: 0 Inserted playlist items: 0 Deleted playlist items: 0 Removed orphaned playlist items: 0\n07-14 14:00:46.075  2696  2696 D MusicLifecycle: com.google.android.music.store.MediaStoreImportService generated event: Service destroyed\n07-14 14:00:46.076   773  1275 I ActivityManager: Killing 2280:com.google.android.configupdater/u0a27 (adj 15): empty #17\n07-14 14:00:46.102   217   217 I mm-camera: gyro_module_start_session: Enter\n07-14 14:00:46.102   217   217 I mm-camera: gyro_module_start_session: Init DSPS\n07-14 14:00:46.103   217   217 E mm-camera: Failed to open sensor1 port\n07-14 14:00:46.103   217   217 I mm-camera: gyro_module_start_session: dsps_proc_init() failed\n07-14 14:00:46.103   217   217 I mm-camera: gyro_module_get_port: Exit failure\n07-14 14:00:46.103   217   217 I mm-camera: cpp_module_start_session:352, info: starting session 1\n07-14 14:00:46.113   773  1275 I ActivityManager: Killing 2255:com.google.android.apps.gcs/u0a25 (adj 15): empty #18\n07-14 14:00:46.122   217  2793 I mm-camera: cpp_thread_func:55: cpp_thread entering the polling loop...\n07-14 14:00:46.122   217   217 I mm-camera: cpp_module_start_session:433, info: cpp_thread created.\n07-14 14:00:46.122   217   217 I mm-camera: cpp_module_start_session:436, info: session 1 started.\n07-14 14:00:46.122   217   217 I mm-camera: c2d_module_start_session:246, info: starting session 1\n07-14 14:00:46.122   217   217 I mm-camera: c2d_module_start_session:284, info: c2d_thread created.\n07-14 14:00:46.122   217  2794 I mm-camera: c2d_thread_func:39: c2d_thread entering the polling loop...\n07-14 14:00:46.124   217   217 I mm-camera: c2d_module_start_session:306, info: session 1 started.\n07-14 14:00:46.125   217   217 I mm-camera-sensor: module_module_set_session_data:2667 max delay 2 report dSelay 1\n07-14 14:00:46.125   217   217 D mm-camera: module_faceproc_set_session_data:1987] Per frame control 2 1\n07-14 14:00:46.125   202   887 D mm-camera-intf: mm_camera_open:  opened, break out while loop\n07-14 14:00:46.125  1872  1878 E ANDR-PERF-LOCK: Failed to apply optimization for resource: 4 level: 0\n07-14 14:00:46.131  2754  2786 I tensorflow: CameraConnectionFragment: Opening camera preview: 3264x2448\n07-14 14:00:46.139   202   887 W CameraDeviceClient: createStream: Camera 0: Forcing asynchronous mode for stream\n07-14 14:00:46.139   202   887 W CameraDeviceClient: createStream: Camera 0: Overriding format 0x1 to IMPLEMENTATION_DEFINED\n07-14 14:00:46.140   202  2542 E CameraDeviceClient: createStream: bufferProducer must not be null\n--------- beginning of crash\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: FATAL EXCEPTION: CameraBackground\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: Process: org.tensorflow.demo, PID: 2754\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: java.lang.IllegalArgumentException: Bad argument passed to camera service\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.CameraBinderDecorator.throwOnError(CameraBinderDecorator.java:114)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.CameraBinderDecorator$CameraBinderDecoratorListener.onAfterInvocation(CameraBinderDecorator.java:73)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.Decorator.invoke(Decorator.java:81)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at java.lang.reflect.Proxy.invoke(Proxy.java:393)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at $Proxy1.createStream(Unknown Source)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.configureStreamsChecked(CameraDeviceImpl.java:429)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.createCaptureSessionInternal(CameraDeviceImpl.java:561)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.createCaptureSession(CameraDeviceImpl.java:476)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment.createCameraPreviewSession(CameraConnectionFragment.java:471)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment.access$400(CameraConnectionFragment.java:63)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment$2.onOpened(CameraConnectionFragment.java:144)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl$1.run(CameraDeviceImpl.java:134)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Handler.handleCallback(Handler.java:739)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:95)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Looper.loop(Looper.java:148)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.HandlerThread.run(HandlerThread.java:61)\n07-14 14:00:46.159   773   792 I ActivityManager: Displayed org.tensorflow.demo/.CameraActivity: +404ms\n07-14 14:00:46.162   773  1503 W ActivityManager:   Force finishing activity org.tensorflow.demo/.CameraActivity", "body": "I installed the TensorFlow on my mac and tried the Android demo. It is confusing that it's all fine with compiling to .apk, but the application crashes as soon as it starts on my Nexus5 cellphone.\n### Environment info\n\nOperating System: Mac OS X\nAndroid SDK: 24.0.0\nAndroid NDK: r10e (will encounter problems when building with bazel if using latest v12)\nBazel: 0.1.4\nCellphone OS: Android 6\n\nI tried using adb to install the application, and everything seems perfectly fine until I launched the application. Before that, I have already checked that the camera permission is fine. As soon as I open the application, it will immediately crash. I grabbed the log from my device. Besides, I also compared the log with those generated by a successfully running demo. The main difference starts from:\n **07-14 14:00:46.044  2754  2754 E tensorflow: CameraConnectionFragment: Couldn't find any suitable preview size**\nCould anyone help me on finding out what cause this problem? The complete log is attached below.\n### Logs or other output that would be helpful\n\n07-14 14:00:45.722   773  1502 I ActivityManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.tensorflow.demo/.CameraActivity (has extras)} from uid 10022 on display 0\n07-14 14:00:45.735   202   811 D audio_hw_primary: out_set_parameters: enter: usecase(1: low-latency-playback) kvpairs: routing=2\n07-14 14:00:45.767   202   811 D AudioFlinger: mixer(0xb4100000) throttle end: throttle time(9)\n07-14 14:00:45.767  2754  2754 I art     : Late-enabling -Xcheck:jni\n07-14 14:00:45.768   773   947 I ActivityManager: Start proc 2754:org.tensorflow.demo/u0a84 for activity org.tensorflow.demo/.CameraActivity\n07-14 14:00:45.800  2734  2734 W System  : ClassLoader referenced unknown path: /system/priv-app/MediaProvider/lib/arm\n07-14 14:00:45.815  2734  2734 W System  : ClassLoader referenced unknown path: /system/priv-app/DownloadProvider/lib/arm\n07-14 14:00:45.858  2754  2754 W linker  : /data/app/org.tensorflow.demo-1/lib/arm/libtensorflow_demo.so: unused DT entry: type 0x1d arg 0x10ff60a\n07-14 14:00:45.871  1146  1929 D GCM     : GcmService start Intent { act=com.google.android.checkin.CHECKIN_COMPLETE flg=0x10 cmp=com.google.android.gms/.gcm.GcmService (has extras) } com.google.android.checkin.CHECKIN_COMPLETE\n07-14 14:00:45.875  1566  1566 D ChimeraCfgMgr: Loading module com.google.android.gms.kids from APK com.google.android.gms\n07-14 14:00:45.876  1566  1566 I Kids    : [GCoreUtils] Current gmscore version, 8186438 is smaller than the required version 8400000\n07-14 14:00:45.907  1385  1385 V UserPresentBroadcastReceiver: Received Intent { act=android.intent.action.USER_PRESENT flg=0x24000010 cmp=com.google.android.gms/.auth.trustagent.UserPresentBroadcastReceiver }.\n07-14 14:00:45.937  2754  2788 D OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true\n07-14 14:00:45.979  1408  1408 W LocationOracleImpl: Not started: ignore location\n07-14 14:00:45.981  1408  1408 E LocationReceiver: Received bad location: null\n07-14 14:00:45.984  1408  1408 E LocationReceiver: Received bad location: null\n07-14 14:00:45.990  2754  2788 I Adreno-EGL: <qeglDrvAPI_eglInitialize:379>: QUALCOMM Build: 10/21/15, 369a2ea, I96aee987eb\n07-14 14:00:45.994  2754  2788 I OpenGLRenderer: Initialized EGL, version 1.4\n07-14 14:00:46.025  1258  1258 I Keyboard.Facilitator: onFinishInput()\n07-14 14:00:46.026  2754  2754 I CameraManagerGlobal: Connecting to camera service\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 3264x2448\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 3200x2400\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 2592x1944\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 2048x1536\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1920x1080\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1600x1200\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x960\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x768\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1280x720\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 1024x768\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 800x600\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 800x480\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 720x480\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 640x480\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 352x288\n07-14 14:00:46.043  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 320x240\n07-14 14:00:46.044  2754  2754 I tensorflow: CameraConnectionFragment: Not adding size: 176x144\n07-14 14:00:46.044  2754  2754 E tensorflow: CameraConnectionFragment: Couldn't find any suitable preview size\n07-14 14:00:46.049   202   887 I CameraService: CameraService::connect call (PID 2754 \"org.tensorflow.demo\", camera ID 0) for HAL version default and Camera API version 2\n07-14 14:00:46.052   202   887 I CameraService: onTorchStatusChangedLocked: Torch status changed for cameraId=0, newStatus=0\n07-14 14:00:46.052   202   887 I Camera2ClientBase: Camera 0: Opened. Client: org.tensorflow.demo (PID 2754, UID 10084)\n07-14 14:00:46.052   202   887 I CameraDeviceClient: CameraDeviceClient 0: Opened\n07-14 14:00:46.057   202   887 D mm-camera-intf: mm_camera_open: dev name = /dev/video1, cam_idx = 1\n07-14 14:00:46.061   217   217 I mm-camera-sensor: module_sensor_start_session:584 session 1\n07-14 14:00:46.074  2696  2732 I MediaStoreImporter: Update: incremental Added music: 0 Updated music: 0 Deleted music: 0 Created playlists: 0 Updated playlists: 0 Deleted playlists: 0 Inserted playlist items: 0 Deleted playlist items: 0 Removed orphaned playlist items: 0\n07-14 14:00:46.075  2696  2696 D MusicLifecycle: com.google.android.music.store.MediaStoreImportService generated event: Service destroyed\n07-14 14:00:46.076   773  1275 I ActivityManager: Killing 2280:com.google.android.configupdater/u0a27 (adj 15): empty #17\n07-14 14:00:46.102   217   217 I mm-camera: gyro_module_start_session: Enter\n07-14 14:00:46.102   217   217 I mm-camera: gyro_module_start_session: Init DSPS\n07-14 14:00:46.103   217   217 E mm-camera: Failed to open sensor1 port\n07-14 14:00:46.103   217   217 I mm-camera: gyro_module_start_session: dsps_proc_init() failed\n07-14 14:00:46.103   217   217 I mm-camera: gyro_module_get_port: Exit failure\n07-14 14:00:46.103   217   217 I mm-camera: cpp_module_start_session:352, info: starting session 1\n07-14 14:00:46.113   773  1275 I ActivityManager: Killing 2255:com.google.android.apps.gcs/u0a25 (adj 15): empty #18\n07-14 14:00:46.122   217  2793 I mm-camera: cpp_thread_func:55: cpp_thread entering the polling loop...\n07-14 14:00:46.122   217   217 I mm-camera: cpp_module_start_session:433, info: cpp_thread created.\n07-14 14:00:46.122   217   217 I mm-camera: cpp_module_start_session:436, info: session 1 started.\n07-14 14:00:46.122   217   217 I mm-camera: c2d_module_start_session:246, info: starting session 1\n07-14 14:00:46.122   217   217 I mm-camera: c2d_module_start_session:284, info: c2d_thread created.\n07-14 14:00:46.122   217  2794 I mm-camera: c2d_thread_func:39: c2d_thread entering the polling loop...\n07-14 14:00:46.124   217   217 I mm-camera: c2d_module_start_session:306, info: session 1 started.\n07-14 14:00:46.125   217   217 I mm-camera-sensor: module_module_set_session_data:2667 max delay 2 report dSelay 1\n07-14 14:00:46.125   217   217 D mm-camera: module_faceproc_set_session_data:1987] Per frame control 2 1\n07-14 14:00:46.125   202   887 D mm-camera-intf: mm_camera_open:  opened, break out while loop\n07-14 14:00:46.125  1872  1878 E ANDR-PERF-LOCK: Failed to apply optimization for resource: 4 level: 0\n07-14 14:00:46.131  2754  2786 I tensorflow: CameraConnectionFragment: Opening camera preview: 3264x2448\n07-14 14:00:46.139   202   887 W CameraDeviceClient: createStream: Camera 0: Forcing asynchronous mode for stream\n07-14 14:00:46.139   202   887 W CameraDeviceClient: createStream: Camera 0: Overriding format 0x1 to IMPLEMENTATION_DEFINED\n07-14 14:00:46.140   202  2542 E CameraDeviceClient: createStream: bufferProducer must not be null\n--------- beginning of crash\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: FATAL EXCEPTION: CameraBackground\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: Process: org.tensorflow.demo, PID: 2754\n07-14 14:00:46.141  2754  2786 E AndroidRuntime: java.lang.IllegalArgumentException: Bad argument passed to camera service\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.CameraBinderDecorator.throwOnError(CameraBinderDecorator.java:114)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.CameraBinderDecorator$CameraBinderDecoratorListener.onAfterInvocation(CameraBinderDecorator.java:73)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.utils.Decorator.invoke(Decorator.java:81)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at java.lang.reflect.Proxy.invoke(Proxy.java:393)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at $Proxy1.createStream(Unknown Source)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.configureStreamsChecked(CameraDeviceImpl.java:429)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.createCaptureSessionInternal(CameraDeviceImpl.java:561)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl.createCaptureSession(CameraDeviceImpl.java:476)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment.createCameraPreviewSession(CameraConnectionFragment.java:471)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment.access$400(CameraConnectionFragment.java:63)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at org.tensorflow.demo.CameraConnectionFragment$2.onOpened(CameraConnectionFragment.java:144)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.hardware.camera2.impl.CameraDeviceImpl$1.run(CameraDeviceImpl.java:134)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Handler.handleCallback(Handler.java:739)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:95)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.Looper.loop(Looper.java:148)\n07-14 14:00:46.141  2754  2786 E AndroidRuntime:    at android.os.HandlerThread.run(HandlerThread.java:61)\n07-14 14:00:46.159   773   792 I ActivityManager: Displayed org.tensorflow.demo/.CameraActivity: +404ms\n07-14 14:00:46.162   773  1503 W ActivityManager:   Force finishing activity org.tensorflow.demo/.CameraActivity\n"}
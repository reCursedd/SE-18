{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/326038865", "html_url": "https://github.com/tensorflow/tensorflow/issues/11948#issuecomment-326038865", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11948", "id": 326038865, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjAzODg2NQ==", "user": {"login": "riklopfer", "id": 413300, "node_id": "MDQ6VXNlcjQxMzMwMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/413300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/riklopfer", "html_url": "https://github.com/riklopfer", "followers_url": "https://api.github.com/users/riklopfer/followers", "following_url": "https://api.github.com/users/riklopfer/following{/other_user}", "gists_url": "https://api.github.com/users/riklopfer/gists{/gist_id}", "starred_url": "https://api.github.com/users/riklopfer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/riklopfer/subscriptions", "organizations_url": "https://api.github.com/users/riklopfer/orgs", "repos_url": "https://api.github.com/users/riklopfer/repos", "events_url": "https://api.github.com/users/riklopfer/events{/privacy}", "received_events_url": "https://api.github.com/users/riklopfer/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-30T16:04:36Z", "updated_at": "2017-08-30T16:12:24Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I've added <a href=\"http://valgrind.org/info/tools.html#memcheck\" rel=\"nofollow\">valgrind</a> output to the test repository: <a href=\"https://github.com/riklopfer/TensorflowJavaGpuMemoryTest/blob/master/valgrind.out\">https://github.com/riklopfer/TensorflowJavaGpuMemoryTest/blob/master/valgrind.out</a></p>\n<p>I'm not really familiar with this tool, but it seems like it would be useful. The summary makes me think that there definitely is a leak somewhere</p>\n<pre><code>==28997== LEAK SUMMARY:\n==28997==    definitely lost: 257,022 bytes in 1,028 blocks\n==28997==    indirectly lost: 6,840 bytes in 15 blocks\n==28997==      possibly lost: 61,716,234 bytes in 14,975 blocks\n==28997==    still reachable: 397,427,506 bytes in 261,680 blocks\n==28997==                       of which reachable via heuristic:\n==28997==                         stdstring          : 2,034,837 bytes in 43,856 blocks\n==28997==                         newarray           : 22,536 bytes in 1 blocks\n==28997==         suppressed: 0 bytes in 0 blocks\n==28997== Reachable blocks (those to which a pointer was found) are not shown.\n==28997== To see them, rerun with: --leak-check=full --show-leak-kinds=all\n==28997== \n==28997== For counts of detected and suppressed errors, rerun with: -v\n==28997== ERROR SUMMARY: 1011246 errors from 460 contexts (suppressed: 0 from 0)\n</code></pre>", "body_text": "I've added valgrind output to the test repository: https://github.com/riklopfer/TensorflowJavaGpuMemoryTest/blob/master/valgrind.out\nI'm not really familiar with this tool, but it seems like it would be useful. The summary makes me think that there definitely is a leak somewhere\n==28997== LEAK SUMMARY:\n==28997==    definitely lost: 257,022 bytes in 1,028 blocks\n==28997==    indirectly lost: 6,840 bytes in 15 blocks\n==28997==      possibly lost: 61,716,234 bytes in 14,975 blocks\n==28997==    still reachable: 397,427,506 bytes in 261,680 blocks\n==28997==                       of which reachable via heuristic:\n==28997==                         stdstring          : 2,034,837 bytes in 43,856 blocks\n==28997==                         newarray           : 22,536 bytes in 1 blocks\n==28997==         suppressed: 0 bytes in 0 blocks\n==28997== Reachable blocks (those to which a pointer was found) are not shown.\n==28997== To see them, rerun with: --leak-check=full --show-leak-kinds=all\n==28997== \n==28997== For counts of detected and suppressed errors, rerun with: -v\n==28997== ERROR SUMMARY: 1011246 errors from 460 contexts (suppressed: 0 from 0)", "body": "I've added [valgrind](http://valgrind.org/info/tools.html#memcheck) output to the test repository: https://github.com/riklopfer/TensorflowJavaGpuMemoryTest/blob/master/valgrind.out\r\n\r\nI'm not really familiar with this tool, but it seems like it would be useful. The summary makes me think that there definitely is a leak somewhere\r\n\r\n```\r\n==28997== LEAK SUMMARY:\r\n==28997==    definitely lost: 257,022 bytes in 1,028 blocks\r\n==28997==    indirectly lost: 6,840 bytes in 15 blocks\r\n==28997==      possibly lost: 61,716,234 bytes in 14,975 blocks\r\n==28997==    still reachable: 397,427,506 bytes in 261,680 blocks\r\n==28997==                       of which reachable via heuristic:\r\n==28997==                         stdstring          : 2,034,837 bytes in 43,856 blocks\r\n==28997==                         newarray           : 22,536 bytes in 1 blocks\r\n==28997==         suppressed: 0 bytes in 0 blocks\r\n==28997== Reachable blocks (those to which a pointer was found) are not shown.\r\n==28997== To see them, rerun with: --leak-check=full --show-leak-kinds=all\r\n==28997== \r\n==28997== For counts of detected and suppressed errors, rerun with: -v\r\n==28997== ERROR SUMMARY: 1011246 errors from 460 contexts (suppressed: 0 from 0)\r\n```"}
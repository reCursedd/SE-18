{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16228", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16228/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16228/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16228/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16228", "id": 289792944, "node_id": "MDU6SXNzdWUyODk3OTI5NDQ=", "number": 16228, "title": "tf.contrib.rnn.LSTMCell()  dtype not defined. Error when creating initializer for bias variable. ", "user": {"login": "arbellea", "id": 18375618, "node_id": "MDQ6VXNlcjE4Mzc1NjE4", "avatar_url": "https://avatars2.githubusercontent.com/u/18375618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arbellea", "html_url": "https://github.com/arbellea", "followers_url": "https://api.github.com/users/arbellea/followers", "following_url": "https://api.github.com/users/arbellea/following{/other_user}", "gists_url": "https://api.github.com/users/arbellea/gists{/gist_id}", "starred_url": "https://api.github.com/users/arbellea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arbellea/subscriptions", "organizations_url": "https://api.github.com/users/arbellea/orgs", "repos_url": "https://api.github.com/users/arbellea/repos", "events_url": "https://api.github.com/users/arbellea/events{/privacy}", "received_events_url": "https://api.github.com/users/arbellea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-01-18T22:08:47Z", "updated_at": "2018-04-28T19:06:16Z", "closed_at": "2018-04-28T19:06:16Z", "author_association": "NONE", "body_html": "<ul>\n<li>\n<p><strong>OS Platform and Distribution</strong>: Mac OSX 10.10.5</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from</strong>: binary</p>\n</li>\n<li>\n<p><strong>TensorFlow version</strong>: 1.5.0rc</p>\n</li>\n<li>\n<p><strong>Python version</strong>:   3.6</p>\n</li>\n<li>\n<p><strong>Have I written custom code</strong>: NA</p>\n</li>\n<li>\n<p><strong>Bazel version</strong>: NA</p>\n</li>\n<li>\n<p><strong>CUDA/cuDNN version</strong>: NA</p>\n</li>\n<li>\n<p><strong>GPU model and memory</strong>:NA</p>\n</li>\n<li>\n<p><strong>Exact command to reproduce</strong>:</p>\n</li>\n</ul>\n<p>import tensorflow as tf<br>\nlstm = tf.contrib.rnn.LSTMCell(10)<br>\ninput_tensor = tf.ones([10,50])<br>\nlstm.build(input_tensor.get_shape())</p>\n<p>Traceback (most recent call last):<br>\nFile \"/Applications/PyCharm CE.app/Contents/helpers/pydev/_pydevd_bundle/pydevd_exec2.py\", line 3, in Exec<br>\nexec(exp, global_vars, local_vars)<br>\nFile \"\", line 1, in <br>\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 719, in build<br>\ninitializer=init_ops.zeros_initializer(dtype=self.dtype))<br>\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/init_ops.py\", line 88, in <strong>init</strong><br>\nself.dtype = dtypes.as_dtype(dtype)<br>\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py\", line 627, in as_dtype<br>\n\"Cannot convert value %r to a TensorFlow DType.\" % type_value)<br>\nTypeError: Cannot convert value None to a TensorFlow DType.</p>\n<h3>Describe the problem</h3>\n<p>It seems that LSTMCell does get the dtype in <strong>init</strong> and does not pass to parent object. Then lstm._dtype is always None.<br>\nA workearound is to add:<br>\nlstm._dtype = 'float32'<br>\nbefore:<br>\nlstm.build(input_tensor.get_shape())</p>", "body_text": "OS Platform and Distribution: Mac OSX 10.10.5\n\n\nTensorFlow installed from: binary\n\n\nTensorFlow version: 1.5.0rc\n\n\nPython version:   3.6\n\n\nHave I written custom code: NA\n\n\nBazel version: NA\n\n\nCUDA/cuDNN version: NA\n\n\nGPU model and memory:NA\n\n\nExact command to reproduce:\n\n\nimport tensorflow as tf\nlstm = tf.contrib.rnn.LSTMCell(10)\ninput_tensor = tf.ones([10,50])\nlstm.build(input_tensor.get_shape())\nTraceback (most recent call last):\nFile \"/Applications/PyCharm CE.app/Contents/helpers/pydev/_pydevd_bundle/pydevd_exec2.py\", line 3, in Exec\nexec(exp, global_vars, local_vars)\nFile \"\", line 1, in \nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 719, in build\ninitializer=init_ops.zeros_initializer(dtype=self.dtype))\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/init_ops.py\", line 88, in init\nself.dtype = dtypes.as_dtype(dtype)\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py\", line 627, in as_dtype\n\"Cannot convert value %r to a TensorFlow DType.\" % type_value)\nTypeError: Cannot convert value None to a TensorFlow DType.\nDescribe the problem\nIt seems that LSTMCell does get the dtype in init and does not pass to parent object. Then lstm._dtype is always None.\nA workearound is to add:\nlstm._dtype = 'float32'\nbefore:\nlstm.build(input_tensor.get_shape())", "body": "- **OS Platform and Distribution**: Mac OSX 10.10.5\r\n- **TensorFlow installed from**: binary\r\n- **TensorFlow version**: 1.5.0rc\r\n- **Python version**:   3.6\r\n- **Have I written custom code**: NA\r\n- **Bazel version**: NA\r\n- **CUDA/cuDNN version**: NA\r\n- **GPU model and memory**:NA\r\n\r\n- **Exact command to reproduce**:\r\n\r\nimport tensorflow as tf\r\nlstm = tf.contrib.rnn.LSTMCell(10)\r\ninput_tensor = tf.ones([10,50])\r\nlstm.build(input_tensor.get_shape())\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/Applications/PyCharm CE.app/Contents/helpers/pydev/_pydevd_bundle/pydevd_exec2.py\", line 3, in Exec\r\n    exec(exp, global_vars, local_vars)\r\n  File \"<input>\", line 1, in <module>\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 719, in build\r\n    initializer=init_ops.zeros_initializer(dtype=self.dtype))\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/init_ops.py\", line 88, in __init__\r\n    self.dtype = dtypes.as_dtype(dtype)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py\", line 627, in as_dtype\r\n    \"Cannot convert value %r to a TensorFlow DType.\" % type_value)\r\nTypeError: Cannot convert value None to a TensorFlow DType.\r\n\r\n### Describe the problem\r\nIt seems that LSTMCell does get the dtype in __init__ and does not pass to parent object. Then lstm._dtype is always None. \r\nA workearound is to add:\r\nlstm._dtype = 'float32'\r\nbefore:\r\nlstm.build(input_tensor.get_shape())\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298208067", "html_url": "https://github.com/tensorflow/tensorflow/issues/9470#issuecomment-298208067", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9470", "id": 298208067, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODIwODA2Nw==", "user": {"login": "teeekay", "id": 11139118, "node_id": "MDQ6VXNlcjExMTM5MTE4", "avatar_url": "https://avatars3.githubusercontent.com/u/11139118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teeekay", "html_url": "https://github.com/teeekay", "followers_url": "https://api.github.com/users/teeekay/followers", "following_url": "https://api.github.com/users/teeekay/following{/other_user}", "gists_url": "https://api.github.com/users/teeekay/gists{/gist_id}", "starred_url": "https://api.github.com/users/teeekay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teeekay/subscriptions", "organizations_url": "https://api.github.com/users/teeekay/orgs", "repos_url": "https://api.github.com/users/teeekay/repos", "events_url": "https://api.github.com/users/teeekay/events{/privacy}", "received_events_url": "https://api.github.com/users/teeekay/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-30T03:08:56Z", "updated_at": "2017-04-30T03:08:56Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=70511\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/girving\">@girving</a><br>\nI observed the same thing as <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19419399\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/guileryu01\">@guileryu01</a> and have a similar setup.</p>\n<pre><code>Have I written custom code: No\nOS Platform and Distribution: Windows 10\nTensorFlow installed from:source\nTensorFlow version:master\nBazel version:NA - (Using Cmake and Visual Studio 2015)\nCUDA/cuDNN version:8.0/5.1\nGPU model and memory:GTX 1060 6Gb\n</code></pre>\n<p>Exact command to reproduce:</p>\n<pre><code>c:&gt;cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release ^\n-DSWIG_EXECUTABLE=C:/swigwin-3.0.12/swig.exe ^\n-DPYTHON_EXECUTABLE=C:/Users/tknight/AppData/Local/Programs/Python/Python35/python.exe ^\n-DPYTHON_LIBRARIES=C:/Users/tknight/AppData/Local/Programs/Python/Python35/libs/python35.lib ^\n-Dtensorflow_ENABLE_GPU=ON ^\n-DCUDNN_HOME=\"C:\\cuDNN\" ^\n-Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX\n\nc:&gt;MSBuild /p:Configuration=Release tf_python_build_pip_package.vcxproj\n</code></pre>\n<p>results in:</p>\n<pre><code>\\tensorflow\\core\\kernels\\reduction_ops_gpu.cu.cc(64): fatal error C1001: An internal error h as occurred\n</code></pre>\n<p>after about 3 hours of building.</p>\n<p>If I remove the line regarding arch:AVX in the cmake command</p>\n<pre><code>-Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX \n</code></pre>\n<p>The python wheel builds ok.</p>\n<p>I want to help getting the builds with CPU optimizations to work for Windows -<br>\nI wasn't exactly clear what you were asking to be done.  I tried commenting out the six lines you referenced, and this resulted in 31 linking errors instead. - I have clipped them from the console output and put them in <a href=\"https://github.com/tensorflow/tensorflow/files/966527/build_errors.txt\">build_errors.txt</a>.</p>\n<p>Let me know if/how to continue..</p>", "body_text": "@girving\nI observed the same thing as @guileryu01 and have a similar setup.\nHave I written custom code: No\nOS Platform and Distribution: Windows 10\nTensorFlow installed from:source\nTensorFlow version:master\nBazel version:NA - (Using Cmake and Visual Studio 2015)\nCUDA/cuDNN version:8.0/5.1\nGPU model and memory:GTX 1060 6Gb\n\nExact command to reproduce:\nc:>cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release ^\n-DSWIG_EXECUTABLE=C:/swigwin-3.0.12/swig.exe ^\n-DPYTHON_EXECUTABLE=C:/Users/tknight/AppData/Local/Programs/Python/Python35/python.exe ^\n-DPYTHON_LIBRARIES=C:/Users/tknight/AppData/Local/Programs/Python/Python35/libs/python35.lib ^\n-Dtensorflow_ENABLE_GPU=ON ^\n-DCUDNN_HOME=\"C:\\cuDNN\" ^\n-Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX\n\nc:>MSBuild /p:Configuration=Release tf_python_build_pip_package.vcxproj\n\nresults in:\n\\tensorflow\\core\\kernels\\reduction_ops_gpu.cu.cc(64): fatal error C1001: An internal error h as occurred\n\nafter about 3 hours of building.\nIf I remove the line regarding arch:AVX in the cmake command\n-Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX \n\nThe python wheel builds ok.\nI want to help getting the builds with CPU optimizations to work for Windows -\nI wasn't exactly clear what you were asking to be done.  I tried commenting out the six lines you referenced, and this resulted in 31 linking errors instead. - I have clipped them from the console output and put them in build_errors.txt.\nLet me know if/how to continue..", "body": "@girving \r\nI observed the same thing as @guileryu01 and have a similar setup.\r\n```\r\nHave I written custom code: No\r\nOS Platform and Distribution: Windows 10\r\nTensorFlow installed from:source\r\nTensorFlow version:master\r\nBazel version:NA - (Using Cmake and Visual Studio 2015)\r\nCUDA/cuDNN version:8.0/5.1\r\nGPU model and memory:GTX 1060 6Gb\r\n```\r\nExact command to reproduce:\r\n\r\n\r\n```\r\nc:>cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release ^\r\n-DSWIG_EXECUTABLE=C:/swigwin-3.0.12/swig.exe ^\r\n-DPYTHON_EXECUTABLE=C:/Users/tknight/AppData/Local/Programs/Python/Python35/python.exe ^\r\n-DPYTHON_LIBRARIES=C:/Users/tknight/AppData/Local/Programs/Python/Python35/libs/python35.lib ^\r\n-Dtensorflow_ENABLE_GPU=ON ^\r\n-DCUDNN_HOME=\"C:\\cuDNN\" ^\r\n-Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX\r\n\r\nc:>MSBuild /p:Configuration=Release tf_python_build_pip_package.vcxproj\r\n```\r\nresults in:\r\n```\r\n\\tensorflow\\core\\kernels\\reduction_ops_gpu.cu.cc(64): fatal error C1001: An internal error h as occurred\r\n```\r\nafter about 3 hours of building.\r\n\r\nIf I remove the line regarding arch:AVX in the cmake command\r\n```\r\n-Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX \r\n```\r\nThe python wheel builds ok.\r\n\r\nI want to help getting the builds with CPU optimizations to work for Windows -\r\nI wasn't exactly clear what you were asking to be done.  I tried commenting out the six lines you referenced, and this resulted in 31 linking errors instead. - I have clipped them from the console output and put them in [build_errors.txt](https://github.com/tensorflow/tensorflow/files/966527/build_errors.txt).\r\n\r\nLet me know if/how to continue.."}
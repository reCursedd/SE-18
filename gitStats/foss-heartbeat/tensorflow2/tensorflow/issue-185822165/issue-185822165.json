{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5250", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5250/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5250/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5250/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5250", "id": 185822165, "node_id": "MDU6SXNzdWUxODU4MjIxNjU=", "number": 5250, "title": "NaN gradient after py_func call", "user": {"login": "Heungwoo", "id": 12824143, "node_id": "MDQ6VXNlcjEyODI0MTQz", "avatar_url": "https://avatars0.githubusercontent.com/u/12824143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Heungwoo", "html_url": "https://github.com/Heungwoo", "followers_url": "https://api.github.com/users/Heungwoo/followers", "following_url": "https://api.github.com/users/Heungwoo/following{/other_user}", "gists_url": "https://api.github.com/users/Heungwoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Heungwoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Heungwoo/subscriptions", "organizations_url": "https://api.github.com/users/Heungwoo/orgs", "repos_url": "https://api.github.com/users/Heungwoo/repos", "events_url": "https://api.github.com/users/Heungwoo/events{/privacy}", "received_events_url": "https://api.github.com/users/Heungwoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-10-28T02:03:58Z", "updated_at": "2016-11-10T18:01:56Z", "closed_at": "2016-11-10T11:13:33Z", "author_association": "NONE", "body_html": "<p>Hello,</p>\n<p>I did implemented faster rcnn with py_func op.</p>\n<ul>\n<li>py-func is placed in the middle of graph. And there are the other path in parallel with py_func node.</li>\n<li>I did not add any gradient function for it, So it should ignore gradient path through py_func. And gradient calculation should done with connection from the other path.</li>\n</ul>\n<p>It works fine in tensorflow r0.9 version.<br>\nBut, in the tensorflow version &gt; r0.9, the node before py_func get NaN error when writing histogram summary. .<br>\nI did check several version: r0.10, r0.11, all of them does not worked.</p>\n<p>Is there any change in gradient calculation for the node which have connection with py_func node ?<br>\nOr should I use py-func in different way?</p>\n<p>Any advice will be helpful for me.<br>\nThanks in advance.</p>", "body_text": "Hello,\nI did implemented faster rcnn with py_func op.\n\npy-func is placed in the middle of graph. And there are the other path in parallel with py_func node.\nI did not add any gradient function for it, So it should ignore gradient path through py_func. And gradient calculation should done with connection from the other path.\n\nIt works fine in tensorflow r0.9 version.\nBut, in the tensorflow version > r0.9, the node before py_func get NaN error when writing histogram summary. .\nI did check several version: r0.10, r0.11, all of them does not worked.\nIs there any change in gradient calculation for the node which have connection with py_func node ?\nOr should I use py-func in different way?\nAny advice will be helpful for me.\nThanks in advance.", "body": "Hello,\n\nI did implemented faster rcnn with py_func op. \n- py-func is placed in the middle of graph. And there are the other path in parallel with py_func node.\n- I did not add any gradient function for it, So it should ignore gradient path through py_func. And gradient calculation should done with connection from the other path.\n\nIt works fine in tensorflow r0.9 version. \nBut, in the tensorflow version > r0.9, the node before py_func get NaN error when writing histogram summary. .\nI did check several version: r0.10, r0.11, all of them does not worked.\n\nIs there any change in gradient calculation for the node which have connection with py_func node ?\nOr should I use py-func in different way?\n\nAny advice will be helpful for me.\nThanks in advance.\n"}
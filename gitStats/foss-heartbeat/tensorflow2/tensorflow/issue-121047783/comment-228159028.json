{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/228159028", "html_url": "https://github.com/tensorflow/tensorflow/issues/446#issuecomment-228159028", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/446", "id": 228159028, "node_id": "MDEyOklzc3VlQ29tbWVudDIyODE1OTAyOA==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-23T19:31:36Z", "updated_at": "2016-06-23T19:31:36Z", "author_association": "CONTRIBUTOR", "body_html": "<p>So I have <a href=\"https://github.com/yaroslavvb/lbfgs/blob/master/lbfgs_optimize_reference.py\">a version</a> of l-BFGS that relies on persistent tensors to keep data in TensorFlow runtime, and <a href=\"https://github.com/tensorflow/tensorflow/pull/2747\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/2747/hovercard\">Immediate mode</a> for syntactic sugar. It's a line-by-line port of <a href=\"https://github.com/torch/optim/blob/master/lbfgs.lua\">lbfgs.lua</a> -- here's <a href=\"https://docs.google.com/spreadsheets/d/17RwQSIV6E0uXSATec2-Lu_GdhoqEsbabFEWHg1k5wzc/edit#gid=0\" rel=\"nofollow\">a comparison</a> . I checked numerics on some toy problems and it tracks Lua implementation <a href=\"https://github.com/yaroslavvb/lbfgs/blob/master/Porting%20Torch%20l-BFGS%20to%20immediate.ipynb\">almost exactly</a> .</p>\n<p>Persistent tensor operations adds 200-300 usec overhead for each TensorFlow operation, so if \"the meat\" of each tensor operation is below 300usec, then a fully native TensorFlow implementation will be more efficient.</p>", "body_text": "So I have a version of l-BFGS that relies on persistent tensors to keep data in TensorFlow runtime, and Immediate mode for syntactic sugar. It's a line-by-line port of lbfgs.lua -- here's a comparison . I checked numerics on some toy problems and it tracks Lua implementation almost exactly .\nPersistent tensor operations adds 200-300 usec overhead for each TensorFlow operation, so if \"the meat\" of each tensor operation is below 300usec, then a fully native TensorFlow implementation will be more efficient.", "body": "So I have [a version](https://github.com/yaroslavvb/lbfgs/blob/master/lbfgs_optimize_reference.py) of l-BFGS that relies on persistent tensors to keep data in TensorFlow runtime, and [Immediate mode](https://github.com/tensorflow/tensorflow/pull/2747) for syntactic sugar. It's a line-by-line port of [lbfgs.lua](https://github.com/torch/optim/blob/master/lbfgs.lua) -- here's [a comparison](https://docs.google.com/spreadsheets/d/17RwQSIV6E0uXSATec2-Lu_GdhoqEsbabFEWHg1k5wzc/edit#gid=0) . I checked numerics on some toy problems and it tracks Lua implementation [almost exactly](https://github.com/yaroslavvb/lbfgs/blob/master/Porting%20Torch%20l-BFGS%20to%20immediate.ipynb) .\n\nPersistent tensor operations adds 200-300 usec overhead for each TensorFlow operation, so if \"the meat\" of each tensor operation is below 300usec, then a fully native TensorFlow implementation will be more efficient. \n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12522", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12522/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12522/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12522/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12522", "id": 252224461, "node_id": "MDU6SXNzdWUyNTIyMjQ0NjE=", "number": 12522, "title": "Stacking CNN with LSTM", "user": {"login": "kjanjua26", "id": 14023660, "node_id": "MDQ6VXNlcjE0MDIzNjYw", "avatar_url": "https://avatars3.githubusercontent.com/u/14023660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjanjua26", "html_url": "https://github.com/kjanjua26", "followers_url": "https://api.github.com/users/kjanjua26/followers", "following_url": "https://api.github.com/users/kjanjua26/following{/other_user}", "gists_url": "https://api.github.com/users/kjanjua26/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjanjua26/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjanjua26/subscriptions", "organizations_url": "https://api.github.com/users/kjanjua26/orgs", "repos_url": "https://api.github.com/users/kjanjua26/repos", "events_url": "https://api.github.com/users/kjanjua26/events{/privacy}", "received_events_url": "https://api.github.com/users/kjanjua26/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2017-08-23T09:53:02Z", "updated_at": "2018-09-13T05:58:31Z", "closed_at": "2018-02-06T15:44:53Z", "author_association": "NONE", "body_html": "<p>I am trying to stack CNN before LSTM, however, I am experience a little problem.<br>\nMy LSTM + CTC works fine. However, I want to pass extracted feature from CNN to LSTM instead of whole image.</p>\n<p>The code is here: <a href=\"https://gist.github.com/kjanjua26/b756b6aae2277423c1f94b435a82f808\">https://gist.github.com/kjanjua26/b756b6aae2277423c1f94b435a82f808</a></p>\n<p>I error I am facing is:</p>\n<p><code>File \"trainer2.py\", line 182, in &lt;module&gt; train() File \"trainer2.py\", line 75, in train logits, inputs, targets, seq_len,W, b = model.get_train_model() File \"/home2/kamranjanjua/tf_cnnlstm/tlstm9Aug/model.py\", line 97, in get_train_model outputs, _ = tf.nn.bidirectional_dynamic_rnn(forwardH1,backwardH1,x,seq_len,dtype=tf.float32) File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 652, in bidirectional_dynamic_rnn time_major=time_major, scope=fw_scope) File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 845, in dynamic_rnn dtype=dtype) File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 919, in _dynamic_rnn_loop \"Input size (depth of inputs) must be accessible via shape inference,\" ValueError: Input size (depth of inputs) must be accessible via shape inference, but saw value None.</code></p>\n<p>Any help in this matter would be appreciated. I am kind of stuck here.</p>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Custom code.</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 0.12 (Using this on purpose since my older code works in 0.12 and I didn't update it for the new version.</li>\n<li><strong>Python version</strong>: 2.7</li>\n<li><strong>GPU model and memory</strong>: TitanX, 12 GB</li>\n</ul>", "body_text": "I am trying to stack CNN before LSTM, however, I am experience a little problem.\nMy LSTM + CTC works fine. However, I want to pass extracted feature from CNN to LSTM instead of whole image.\nThe code is here: https://gist.github.com/kjanjua26/b756b6aae2277423c1f94b435a82f808\nI error I am facing is:\nFile \"trainer2.py\", line 182, in <module> train() File \"trainer2.py\", line 75, in train logits, inputs, targets, seq_len,W, b = model.get_train_model() File \"/home2/kamranjanjua/tf_cnnlstm/tlstm9Aug/model.py\", line 97, in get_train_model outputs, _ = tf.nn.bidirectional_dynamic_rnn(forwardH1,backwardH1,x,seq_len,dtype=tf.float32) File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 652, in bidirectional_dynamic_rnn time_major=time_major, scope=fw_scope) File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 845, in dynamic_rnn dtype=dtype) File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 919, in _dynamic_rnn_loop \"Input size (depth of inputs) must be accessible via shape inference,\" ValueError: Input size (depth of inputs) must be accessible via shape inference, but saw value None.\nAny help in this matter would be appreciated. I am kind of stuck here.\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Custom code.\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\nTensorFlow installed from (source or binary): Source\nTensorFlow version (use command below): 0.12 (Using this on purpose since my older code works in 0.12 and I didn't update it for the new version.\nPython version: 2.7\nGPU model and memory: TitanX, 12 GB", "body": "I am trying to stack CNN before LSTM, however, I am experience a little problem. \r\nMy LSTM + CTC works fine. However, I want to pass extracted feature from CNN to LSTM instead of whole image. \r\n\r\nThe code is here: https://gist.github.com/kjanjua26/b756b6aae2277423c1f94b435a82f808\r\n\r\nI error I am facing is: \r\n\r\n`File \"trainer2.py\", line 182, in <module>\r\n    train()\r\n  File \"trainer2.py\", line 75, in train\r\n    logits, inputs, targets, seq_len,W, b = model.get_train_model()\r\n  File \"/home2/kamranjanjua/tf_cnnlstm/tlstm9Aug/model.py\", line 97, in get_train_model\r\n    outputs, _ = tf.nn.bidirectional_dynamic_rnn(forwardH1,backwardH1,x,seq_len,dtype=tf.float32)\r\n  File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 652, in bidirectional_dynamic_rnn\r\n    time_major=time_major, scope=fw_scope)\r\n  File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 845, in dynamic_rnn\r\n    dtype=dtype)\r\n  File \"/home/kamranjanjua/anaconda2/envs/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/rnn.py\", line 919, in _dynamic_rnn_loop\r\n    \"Input size (depth of inputs) must be accessible via shape inference,\"\r\nValueError: Input size (depth of inputs) must be accessible via shape inference, but saw value None.`\r\n\r\nAny help in this matter would be appreciated. I am kind of stuck here. \r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Custom code.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: 0.12 (Using this on purpose since my older code works in 0.12 and I didn't update it for the new version.\r\n- **Python version**: 2.7\r\n- **GPU model and memory**: TitanX, 12 GB\r\n"}
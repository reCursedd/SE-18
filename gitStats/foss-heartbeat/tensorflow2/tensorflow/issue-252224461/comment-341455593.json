{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/341455593", "html_url": "https://github.com/tensorflow/tensorflow/issues/12522#issuecomment-341455593", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12522", "id": 341455593, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTQ1NTU5Mw==", "user": {"login": "amundle-cs", "id": 29923691, "node_id": "MDQ6VXNlcjI5OTIzNjkx", "avatar_url": "https://avatars3.githubusercontent.com/u/29923691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amundle-cs", "html_url": "https://github.com/amundle-cs", "followers_url": "https://api.github.com/users/amundle-cs/followers", "following_url": "https://api.github.com/users/amundle-cs/following{/other_user}", "gists_url": "https://api.github.com/users/amundle-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/amundle-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amundle-cs/subscriptions", "organizations_url": "https://api.github.com/users/amundle-cs/orgs", "repos_url": "https://api.github.com/users/amundle-cs/repos", "events_url": "https://api.github.com/users/amundle-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/amundle-cs/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-02T15:19:01Z", "updated_at": "2017-11-02T15:36:15Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=14023660\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kjanjua26\">@kjanjua26</a> Thanks for you suggestion. I believe, that the 3D tensor (output of CNN) is being reshaped into <a href=\"https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L80\"><code>samples x time x features</code></a> Please let me know if you think otherwise.<br>\nInstead of using <code>tf.squeeze(...)</code>,<a href=\"https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L71\"> I am applying <code>tf.reduce_max(...)</code> to the output of CNN.</a></p>\n<p>I did try to run my code using <code>tf.squeeze</code> instead of <code>tf.reduce_max</code> but I am running into the same issue.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1794715\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ebrevdo\">@ebrevdo</a> The <a href=\"https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L88\"><code>tf.nn.bidirectional_dynamic_rnn</code></a> seems works fine if the <a href=\"https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L49\"><code>char_embeddings</code></a> shape is a static, instead of using <code>tf.shape(...)</code> which is dynamic.<br>\n<del>After doing some more experiments, I think it is tripping up because it cannot infer the size since <a href=\"https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L22-L24\">placeholders's shape partially defined</a>, which I <strong>have to</strong> for variable sentence and word length.</del> Nah. It still fails if the placeholder's shape if completely specified.</p>", "body_text": "@kjanjua26 Thanks for you suggestion. I believe, that the 3D tensor (output of CNN) is being reshaped into samples x time x features Please let me know if you think otherwise.\nInstead of using tf.squeeze(...), I am applying tf.reduce_max(...) to the output of CNN.\nI did try to run my code using tf.squeeze instead of tf.reduce_max but I am running into the same issue.\n@ebrevdo The tf.nn.bidirectional_dynamic_rnn seems works fine if the char_embeddings shape is a static, instead of using tf.shape(...) which is dynamic.\nAfter doing some more experiments, I think it is tripping up because it cannot infer the size since placeholders's shape partially defined, which I have to for variable sentence and word length. Nah. It still fails if the placeholder's shape if completely specified.", "body": "@kjanjua26 Thanks for you suggestion. I believe, that the 3D tensor (output of CNN) is being reshaped into [`samples x time x features`](https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L80) Please let me know if you think otherwise.\r\nInstead of using `tf.squeeze(...)`,[ I am applying `tf.reduce_max(...)` to the output of CNN.](https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L71)\r\n\r\nI did try to run my code using `tf.squeeze` instead of `tf.reduce_max` but I am running into the same issue.\r\n\r\n@ebrevdo The [`tf.nn.bidirectional_dynamic_rnn`](https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L88) seems works fine if the [`char_embeddings`](https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L49) shape is a static, instead of using `tf.shape(...)` which is dynamic.\r\n~~After doing some more experiments, I think it is tripping up because it cannot infer the size since [placeholders's shape partially defined](https://gist.github.com/amundle-cs/9dcf32bf8ee53d8e868fbf332f54312d#file-cnn_bilstm-py-L22-L24), which I **have to** for variable sentence and word length.~~ Nah. It still fails if the placeholder's shape if completely specified."}
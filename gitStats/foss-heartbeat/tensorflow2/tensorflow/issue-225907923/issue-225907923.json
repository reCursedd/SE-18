{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9618", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9618/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9618/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9618/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9618", "id": 225907923, "node_id": "MDU6SXNzdWUyMjU5MDc5MjM=", "number": 9618, "title": "Can't load the model file from model_dir in CNN text classifier", "user": {"login": "SakthivelAnand", "id": 12402720, "node_id": "MDQ6VXNlcjEyNDAyNzIw", "avatar_url": "https://avatars0.githubusercontent.com/u/12402720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SakthivelAnand", "html_url": "https://github.com/SakthivelAnand", "followers_url": "https://api.github.com/users/SakthivelAnand/followers", "following_url": "https://api.github.com/users/SakthivelAnand/following{/other_user}", "gists_url": "https://api.github.com/users/SakthivelAnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/SakthivelAnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SakthivelAnand/subscriptions", "organizations_url": "https://api.github.com/users/SakthivelAnand/orgs", "repos_url": "https://api.github.com/users/SakthivelAnand/repos", "events_url": "https://api.github.com/users/SakthivelAnand/events{/privacy}", "received_events_url": "https://api.github.com/users/SakthivelAnand/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-03T07:55:20Z", "updated_at": "2017-05-04T16:52:48Z", "closed_at": "2017-05-04T16:52:48Z", "author_association": "NONE", "body_html": "<p>Dear all,<br>\nI am working on NLP using tensor flow, i am using thhe text classifier using cnn from the tensor flow git hub example, where i stored my trained model by passing \"model_dir\" argument successfully , but when i try to reload the model it says an error<br>\nError occurring part of my code is,</p>\n<p>\"<br>\nclassifier = learn.Estimator(model_fn=cnn_model,model_dir = \"/home/local/models/\")<br>\n#classifier.fit(x_train, y_train, steps=1000)<br>\ny_predicted = [p['class'] for p in classifier.predict(x_test, as_iterable=True)]<br>\nprint(y_predicted)<br>\n\"<br>\nthis is a code when i try to reload the model file files from the \"model_dir\" which is already stored in it when train.</p>\n<p>The error is ,</p>\n<p>\"<br>\nTraceback (most recent call last):<br>\nFile \"CNN_Text.py\", line 114, in <br>\ny_predicted = [p['class'] for p in classifier.predict(x_test, as_iterable=True)]<br>\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 281, in new_func<br>\nreturn func(*args, **kwargs)<br>\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 565, in predict<br>\nas_iterable=as_iterable)<br>\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 857, in _infer_model<br>\ninfer_ops = self._get_predict_ops(features)<br>\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1188, in _get_predict_ops<br>\nreturn self._call_model_fn(features, labels, model_fn_lib.ModeKeys.INFER)<br>\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1103, in _call_model_fn<br>\nmodel_fn_results = self._model_fn(features, labels, **kwargs)<br>\nFile \"CNN_Text.py\", line 31, in cnn_model<br>\ntarget = tf.one_hot(target, 2, 1, 0)<br>\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 2156, in one_hot<br>\nname)<br>\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 1848, in _one_hot<br>\naxis=axis, name=name)<br>\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 509, in apply_op<br>\n(input_name, err))<br>\nValueError: Tried to convert 'indices' to a tensor and failed. Error: None values not supported.<br>\n\"</p>\n<p>Please help me to solve this problem.<br>\nThank you in advance.</p>", "body_text": "Dear all,\nI am working on NLP using tensor flow, i am using thhe text classifier using cnn from the tensor flow git hub example, where i stored my trained model by passing \"model_dir\" argument successfully , but when i try to reload the model it says an error\nError occurring part of my code is,\n\"\nclassifier = learn.Estimator(model_fn=cnn_model,model_dir = \"/home/local/models/\")\n#classifier.fit(x_train, y_train, steps=1000)\ny_predicted = [p['class'] for p in classifier.predict(x_test, as_iterable=True)]\nprint(y_predicted)\n\"\nthis is a code when i try to reload the model file files from the \"model_dir\" which is already stored in it when train.\nThe error is ,\n\"\nTraceback (most recent call last):\nFile \"CNN_Text.py\", line 114, in \ny_predicted = [p['class'] for p in classifier.predict(x_test, as_iterable=True)]\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 281, in new_func\nreturn func(*args, **kwargs)\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 565, in predict\nas_iterable=as_iterable)\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 857, in _infer_model\ninfer_ops = self._get_predict_ops(features)\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1188, in _get_predict_ops\nreturn self._call_model_fn(features, labels, model_fn_lib.ModeKeys.INFER)\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1103, in _call_model_fn\nmodel_fn_results = self._model_fn(features, labels, **kwargs)\nFile \"CNN_Text.py\", line 31, in cnn_model\ntarget = tf.one_hot(target, 2, 1, 0)\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 2156, in one_hot\nname)\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 1848, in _one_hot\naxis=axis, name=name)\nFile \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 509, in apply_op\n(input_name, err))\nValueError: Tried to convert 'indices' to a tensor and failed. Error: None values not supported.\n\"\nPlease help me to solve this problem.\nThank you in advance.", "body": "Dear all,\r\nI am working on NLP using tensor flow, i am using thhe text classifier using cnn from the tensor flow git hub example, where i stored my trained model by passing \"model_dir\" argument successfully , but when i try to reload the model it says an error\r\nError occurring part of my code is, \r\n\r\n\"\r\nclassifier = learn.Estimator(model_fn=cnn_model,model_dir = \"/home/local/models/\")\r\n#classifier.fit(x_train, y_train, steps=1000)\r\ny_predicted = [p['class'] for p in classifier.predict(x_test, as_iterable=True)]\r\nprint(y_predicted)\r\n\"\r\nthis is a code when i try to reload the model file files from the \"model_dir\" which is already stored in it when train.\r\n\r\nThe error is ,\r\n\r\n\"\r\nTraceback (most recent call last):\r\n  File \"CNN_Text.py\", line 114, in <module>\r\n    y_predicted = [p['class'] for p in classifier.predict(x_test, as_iterable=True)]\r\n  File \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 281, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 565, in predict\r\n    as_iterable=as_iterable)\r\n  File \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 857, in _infer_model\r\n    infer_ops = self._get_predict_ops(features)\r\n  File \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1188, in _get_predict_ops\r\n    return self._call_model_fn(features, labels, model_fn_lib.ModeKeys.INFER)\r\n  File \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1103, in _call_model_fn\r\n    model_fn_results = self._model_fn(features, labels, **kwargs)\r\n  File \"CNN_Text.py\", line 31, in cnn_model\r\n    target = tf.one_hot(target, 2, 1, 0)\r\n  File \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 2156, in one_hot\r\n    name)\r\n  File \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 1848, in _one_hot\r\n    axis=axis, name=name)\r\n  File \"/home/local/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 509, in apply_op\r\n    (input_name, err))\r\nValueError: Tried to convert 'indices' to a tensor and failed. Error: None values not supported.\r\n\"\r\n\r\nPlease help me to solve this problem.\r\nThank you in advance."}
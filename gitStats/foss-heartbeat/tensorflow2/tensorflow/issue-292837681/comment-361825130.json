{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/361825130", "html_url": "https://github.com/tensorflow/tensorflow/issues/16588#issuecomment-361825130", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16588", "id": 361825130, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTgyNTEzMA==", "user": {"login": "rimidalv", "id": 1157911, "node_id": "MDQ6VXNlcjExNTc5MTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1157911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rimidalv", "html_url": "https://github.com/rimidalv", "followers_url": "https://api.github.com/users/rimidalv/followers", "following_url": "https://api.github.com/users/rimidalv/following{/other_user}", "gists_url": "https://api.github.com/users/rimidalv/gists{/gist_id}", "starred_url": "https://api.github.com/users/rimidalv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rimidalv/subscriptions", "organizations_url": "https://api.github.com/users/rimidalv/orgs", "repos_url": "https://api.github.com/users/rimidalv/repos", "events_url": "https://api.github.com/users/rimidalv/events{/privacy}", "received_events_url": "https://api.github.com/users/rimidalv/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-31T05:06:01Z", "updated_at": "2018-01-31T05:11:48Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20959853\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/drpngx\">@drpngx</a> if you say about ops_to_register I do this:</p>\n<pre><code>bazel-bin/tensorflow/python/tools/print_selective_registration_header \\\n--graphs=$PB_MAIN/frozen_opt.pb &gt; $TFP/tensorflow/core/framework/ops_to_register.h\n</code></pre>\n<p>then this ( tried with --copt=\"-D__ANDROID_TYPES_FULL__\" \\ and without it):</p>\n<pre><code>bazel build -c opt --copt=\"-DSELECTIVE_REGISTRATION\" \\\n--copt=\"-DSUPPORT_SELECTIVE_REGISTRATION\" \\\n//tensorflow/contrib/android:libtensorflow_inference.so \\\n--host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n--crosstool_top=//external:android/crosstool --cpu=armeabi-v7a \n</code></pre>\n<p>and finaly:</p>\n<pre><code>cp $TFP/bazel-bin/tensorflow/contrib/android/libtensorflow_inference.so /Users/rimidalv/AndroidStudioProjects/agronumbers/libs/armeabi-v7a\n</code></pre>\n<p>And I tried next configuration of GRU:</p>\n<pre><code>decoder_gru = GRU(latent_dim, return_sequences=False, kernel_initializer='zeros')(decoder_inputs)\n</code></pre>\n<p>and this:</p>\n<pre><code>decoder_gru = GRU(latent_dim, return_sequences=False)(decoder_inputs)\n</code></pre>", "body_text": "@drpngx if you say about ops_to_register I do this:\nbazel-bin/tensorflow/python/tools/print_selective_registration_header \\\n--graphs=$PB_MAIN/frozen_opt.pb > $TFP/tensorflow/core/framework/ops_to_register.h\n\nthen this ( tried with --copt=\"-D__ANDROID_TYPES_FULL__\" \\ and without it):\nbazel build -c opt --copt=\"-DSELECTIVE_REGISTRATION\" \\\n--copt=\"-DSUPPORT_SELECTIVE_REGISTRATION\" \\\n//tensorflow/contrib/android:libtensorflow_inference.so \\\n--host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n--crosstool_top=//external:android/crosstool --cpu=armeabi-v7a \n\nand finaly:\ncp $TFP/bazel-bin/tensorflow/contrib/android/libtensorflow_inference.so /Users/rimidalv/AndroidStudioProjects/agronumbers/libs/armeabi-v7a\n\nAnd I tried next configuration of GRU:\ndecoder_gru = GRU(latent_dim, return_sequences=False, kernel_initializer='zeros')(decoder_inputs)\n\nand this:\ndecoder_gru = GRU(latent_dim, return_sequences=False)(decoder_inputs)", "body": "@drpngx if you say about ops_to_register I do this:\r\n\r\n```\r\nbazel-bin/tensorflow/python/tools/print_selective_registration_header \\\r\n--graphs=$PB_MAIN/frozen_opt.pb > $TFP/tensorflow/core/framework/ops_to_register.h\r\n```\r\nthen this ( tried with --copt=\"-D__ANDROID_TYPES_FULL__\" \\ and without it):\r\n```\r\nbazel build -c opt --copt=\"-DSELECTIVE_REGISTRATION\" \\\r\n--copt=\"-DSUPPORT_SELECTIVE_REGISTRATION\" \\\r\n//tensorflow/contrib/android:libtensorflow_inference.so \\\r\n--host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\r\n--crosstool_top=//external:android/crosstool --cpu=armeabi-v7a \r\n```\r\nand finaly:\r\n```\r\ncp $TFP/bazel-bin/tensorflow/contrib/android/libtensorflow_inference.so /Users/rimidalv/AndroidStudioProjects/agronumbers/libs/armeabi-v7a\r\n```\r\n\r\nAnd I tried next configuration of GRU:\r\n```\r\ndecoder_gru = GRU(latent_dim, return_sequences=False, kernel_initializer='zeros')(decoder_inputs)\r\n```\r\nand this:\r\n```\r\ndecoder_gru = GRU(latent_dim, return_sequences=False)(decoder_inputs)\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/160264051", "pull_request_review_id": 87123786, "id": 160264051, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDI2NDA1MQ==", "diff_hunk": "@@ -0,0 +1,131 @@\n+/* Copyright 2017 The TensorFlow Authors. All Rights Reserved.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+\n+#ifndef TENSORFLOW_JAVA_SRC_GEN_CC_SOURCE_WRITER_H_\n+#define TENSORFLOW_JAVA_SRC_GEN_CC_SOURCE_WRITER_H_\n+\n+#include <string>\n+\n+#include \"tensorflow/core/platform/env.h\"\n+#include \"tensorflow/core/lib/core/stringpiece.h\"\n+\n+namespace tensorflow {\n+\n+// A utility class for writing source code, normally generated at\n+// compile-time.\n+//\n+// Source writers are language-agnostic and therefore only expose generic\n+// methods common to most languages. Extend or wrap this class to implement\n+// language-specific features.\n+//\n+// Note: if you are looking to reuse this class for generating code in another\n+// language than Java, please do by moving it at the '//tensorflow/core/lib/io'\n+// level.\n+class SourceWriter {\n+ public:\n+  virtual ~SourceWriter() = default;\n+\n+  // Returns true if the writer is at the beginnig of a new line\n+  bool newline() const { return newline_; }\n+\n+  // Appends a piece of code or text.\n+  //\n+  // It is expected that no newline character is present in the data provided,\n+  // otherwise Write() must be used.\n+  SourceWriter& Append(const StringPiece& str);\n+\n+  // Writes a block of code or text.\n+  //\n+  // The data might potentially contain newline characters, therefore it will\n+  // be scanned to ensure that each line is indented and prefixed properly,\n+  // making it a bit slower than Append().\n+  SourceWriter& Write(const string& text);", "path": "tensorflow/java/src/gen/cc/source_writer.h", "position": 54, "original_position": 54, "commit_id": "e019a4d6f0b3de23befe9690e3a50aee3cfdf4bc", "original_commit_id": "80ec9931d8b61b33675fff269c069868346adc9d", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "body": "Do we need a separate `Write` method? Would it be simpler if the callers invoked `SourceWriter` in a way that they always use `EndLine()` when they need to add a new line (and maintain the prefix/indentation)?", "created_at": "2018-01-08T21:44:34Z", "updated_at": "2018-01-09T04:28:55Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/15928#discussion_r160264051", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/15928", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/160264051"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/15928#discussion_r160264051"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/15928"}}, "body_html": "<p>Do we need a separate <code>Write</code> method? Would it be simpler if the callers invoked <code>SourceWriter</code> in a way that they always use <code>EndLine()</code> when they need to add a new line (and maintain the prefix/indentation)?</p>", "body_text": "Do we need a separate Write method? Would it be simpler if the callers invoked SourceWriter in a way that they always use EndLine() when they need to add a new line (and maintain the prefix/indentation)?"}
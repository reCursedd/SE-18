{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5562", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5562/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5562/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5562/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5562", "id": 188908592, "node_id": "MDU6SXNzdWUxODg5MDg1OTI=", "number": 5562, "title": "square of square root is identity", "user": {"login": "AshishBora", "id": 4586769, "node_id": "MDQ6VXNlcjQ1ODY3Njk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4586769?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AshishBora", "html_url": "https://github.com/AshishBora", "followers_url": "https://api.github.com/users/AshishBora/followers", "following_url": "https://api.github.com/users/AshishBora/following{/other_user}", "gists_url": "https://api.github.com/users/AshishBora/gists{/gist_id}", "starred_url": "https://api.github.com/users/AshishBora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AshishBora/subscriptions", "organizations_url": "https://api.github.com/users/AshishBora/orgs", "repos_url": "https://api.github.com/users/AshishBora/repos", "events_url": "https://api.github.com/users/AshishBora/events{/privacy}", "received_events_url": "https://api.github.com/users/AshishBora/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "andydavis1", "id": 15696327, "node_id": "MDQ6VXNlcjE1Njk2MzI3", "avatar_url": "https://avatars0.githubusercontent.com/u/15696327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andydavis1", "html_url": "https://github.com/andydavis1", "followers_url": "https://api.github.com/users/andydavis1/followers", "following_url": "https://api.github.com/users/andydavis1/following{/other_user}", "gists_url": "https://api.github.com/users/andydavis1/gists{/gist_id}", "starred_url": "https://api.github.com/users/andydavis1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andydavis1/subscriptions", "organizations_url": "https://api.github.com/users/andydavis1/orgs", "repos_url": "https://api.github.com/users/andydavis1/repos", "events_url": "https://api.github.com/users/andydavis1/events{/privacy}", "received_events_url": "https://api.github.com/users/andydavis1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andydavis1", "id": 15696327, "node_id": "MDQ6VXNlcjE1Njk2MzI3", "avatar_url": "https://avatars0.githubusercontent.com/u/15696327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andydavis1", "html_url": "https://github.com/andydavis1", "followers_url": "https://api.github.com/users/andydavis1/followers", "following_url": "https://api.github.com/users/andydavis1/following{/other_user}", "gists_url": "https://api.github.com/users/andydavis1/gists{/gist_id}", "starred_url": "https://api.github.com/users/andydavis1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andydavis1/subscriptions", "organizations_url": "https://api.github.com/users/andydavis1/orgs", "repos_url": "https://api.github.com/users/andydavis1/repos", "events_url": "https://api.github.com/users/andydavis1/events{/privacy}", "received_events_url": "https://api.github.com/users/andydavis1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2016-11-12T12:12:44Z", "updated_at": "2017-06-16T17:24:39Z", "closed_at": "2017-06-16T17:24:37Z", "author_association": "NONE", "body_html": "<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\ntensor <span class=\"pl-k\">=</span> tf.constant(<span class=\"pl-c1\">0.0</span>)\nloss <span class=\"pl-k\">=</span> tf.square(tf.sqrt(tensor))\ngrad <span class=\"pl-k\">=</span> tf.gradients(loss, tensor)\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    <span class=\"pl-c1\">print</span> grad[<span class=\"pl-c1\">0</span>].eval()</pre></div>\n<p>This gives <code>nan</code>. The gradient of <code>sqrt(x)</code> with respect to <code>x</code> is <code>inf</code> at <code>0</code> which is likely causing the problem.</p>\n<p>Would be useful to have automatic inference for this such that <code>sqrt</code> followed by <code>square</code> can be removed at least for the purpose of gradient computation. There are other similar cases (e.g. <code>exp</code> of <code>log</code>) where such inference would help.</p>", "body_text": "import tensorflow as tf\n\ntensor = tf.constant(0.0)\nloss = tf.square(tf.sqrt(tensor))\ngrad = tf.gradients(loss, tensor)\n\nwith tf.Session() as sess:\n    print grad[0].eval()\nThis gives nan. The gradient of sqrt(x) with respect to x is inf at 0 which is likely causing the problem.\nWould be useful to have automatic inference for this such that sqrt followed by square can be removed at least for the purpose of gradient computation. There are other similar cases (e.g. exp of log) where such inference would help.", "body": "```python\r\nimport tensorflow as tf\r\n\r\ntensor = tf.constant(0.0)\r\nloss = tf.square(tf.sqrt(tensor))\r\ngrad = tf.gradients(loss, tensor)\r\n\r\nwith tf.Session() as sess:\r\n    print grad[0].eval()\r\n```\r\n\r\nThis gives `nan`. The gradient of `sqrt(x)` with respect to `x` is `inf` at `0` which is likely causing the problem.\r\n\r\nWould be useful to have automatic inference for this such that `sqrt` followed by `square` can be removed at least for the purpose of gradient computation. There are other similar cases (e.g. `exp` of `log`) where such inference would help."}
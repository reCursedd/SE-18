{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16935", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16935/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16935/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16935/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16935", "id": 296189869, "node_id": "MDU6SXNzdWUyOTYxODk4Njk=", "number": 16935, "title": "TensorFlow1.5.0 absl.flags._exceptions.UnparsedFlagAccessError in Jupyter Notebook", "user": {"login": "jhljx", "id": 10150586, "node_id": "MDQ6VXNlcjEwMTUwNTg2", "avatar_url": "https://avatars0.githubusercontent.com/u/10150586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhljx", "html_url": "https://github.com/jhljx", "followers_url": "https://api.github.com/users/jhljx/followers", "following_url": "https://api.github.com/users/jhljx/following{/other_user}", "gists_url": "https://api.github.com/users/jhljx/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhljx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhljx/subscriptions", "organizations_url": "https://api.github.com/users/jhljx/orgs", "repos_url": "https://api.github.com/users/jhljx/repos", "events_url": "https://api.github.com/users/jhljx/events{/privacy}", "received_events_url": "https://api.github.com/users/jhljx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-02-11T13:26:33Z", "updated_at": "2018-11-22T18:54:13Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.5.0</li>\n<li><strong>Python version</strong>:  3.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: n/a</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: n/a</li>\n<li><strong>CUDA/cuDNN version</strong>: 9.0/7.0.5</li>\n<li><strong>GPU model and memory</strong>:GeForce 950M(4Gb)</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I run the function <code>cifar10.maybe_download_and_extract()</code> of <code>tensorflow/models/tutorials/image/cifar10.py</code> file in python command and jupyter notebook .The code runs successfully in python command,  but it causes <code>absl.flags._exceptions.UnparsedFlagAccessError</code>from <code>cifar10.FLAGS.data_dir</code> in jupyter notebook.</p>\n<p>The jupyter notebook has already <strong>configured the tensorflow kernel</strong>, other tensorflow examples could run smoothly on jupyter notebook.</p>\n<p>Significant code in <code>cifar10.py</code> file is:</p>\n<pre><code>import tensorflow as tf\nimport cifar10_input\nFLAGS = tf.app.flags.FLAGS\n\n# Basic model parameters.\ntf.app.flags.DEFINE_integer('batch_size', 128,\n                        \"\"\"Number of images to process in a batch.\"\"\")\ntf.app.flags.DEFINE_string('data_dir', '/tmp/cifar10_data',\n                       \"\"\"Path to the CIFAR-10 data directory.\"\"\")\ntf.app.flags.DEFINE_boolean('use_fp16', False,\n                        \"\"\"Train the model using fp16.\"\"\")\n# .....\ndef maybe_download_and_extract():\n    \"\"\"Download and extract the tarball from Alex's website.\"\"\"\n    dest_directory = FLAGS.data_dir\n    if not os.path.exists(dest_directory):\n        os.makedirs(dest_directory)\n# ......\n</code></pre>\n<p>The exception happened from the code statement <code>dest_directory = FLAGS.data_dir</code>.</p>\n<p>The successful output in python command is as follows:</p>\n<pre><code>&gt;&gt;&gt; cifar10.maybe_download_and_extract()\n&gt;&gt; Downloading cifar-10-binary.tar.gz 100.0%\nSuccessfully downloaded cifar-10-binary.tar.gz 170052171 bytes.\n</code></pre>\n<p>The detailed error in jupyter notebook is as follows:</p>\n<pre><code>UnrecognizedFlagError                     Traceback (most recent call last)\n&lt;ipython-input-6-ddaee26bfd14&gt; in &lt;module&gt;()\n----&gt; 1 cifar10.maybe_download_and_extract()\n~/models/tutorials/image/cifar10/cifar10.py in maybe_download_and_extract()\n381 def maybe_download_and_extract():\n382   \"\"\"Download and extract the tarball from Alex's website.\"\"\"\n--&gt; 383   dest_directory = FLAGS.data_dir\n384   if not os.path.exists(dest_directory):\n385     os.makedirs(dest_directory)\n~/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/platform/flags.py in \n__getattr__(self, name)\n82     # a flag.\n83     if not wrapped.is_parsed():\n---&gt; 84       wrapped(_sys.argv)\n85     return wrapped.__getattr__(name)\n86 \n~/anaconda3/envs/tensorflow/lib/python3.6/site-packages/absl/flags/_flagvalues.py in __call__(self, argv, known_only)\n628       suggestions = _helpers.get_flag_suggestions(name, list(self))\n629       raise _exceptions.UnrecognizedFlagError(\n--&gt; 630           name, value, suggestions=suggestions)\n631 \n632     self.mark_as_parsed()\nUnrecognizedFlagError: Unknown command line flag 'f'\n</code></pre>\n<h3>Source code / logs</h3>\n<pre><code>#git clone https://github.com/tensorflow/models.git\n#cd models/tutorials/image/cifar10\nimport cifar10\ncifar10.maybe_download_and_extract()\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): 1.5.0\nPython version:  3.6\nBazel version (if compiling from source): n/a\nGCC/Compiler version (if compiling from source): n/a\nCUDA/cuDNN version: 9.0/7.0.5\nGPU model and memory:GeForce 950M(4Gb)\nExact command to reproduce:\n\nDescribe the problem\nI run the function cifar10.maybe_download_and_extract() of tensorflow/models/tutorials/image/cifar10.py file in python command and jupyter notebook .The code runs successfully in python command,  but it causes absl.flags._exceptions.UnparsedFlagAccessErrorfrom cifar10.FLAGS.data_dir in jupyter notebook.\nThe jupyter notebook has already configured the tensorflow kernel, other tensorflow examples could run smoothly on jupyter notebook.\nSignificant code in cifar10.py file is:\nimport tensorflow as tf\nimport cifar10_input\nFLAGS = tf.app.flags.FLAGS\n\n# Basic model parameters.\ntf.app.flags.DEFINE_integer('batch_size', 128,\n                        \"\"\"Number of images to process in a batch.\"\"\")\ntf.app.flags.DEFINE_string('data_dir', '/tmp/cifar10_data',\n                       \"\"\"Path to the CIFAR-10 data directory.\"\"\")\ntf.app.flags.DEFINE_boolean('use_fp16', False,\n                        \"\"\"Train the model using fp16.\"\"\")\n# .....\ndef maybe_download_and_extract():\n    \"\"\"Download and extract the tarball from Alex's website.\"\"\"\n    dest_directory = FLAGS.data_dir\n    if not os.path.exists(dest_directory):\n        os.makedirs(dest_directory)\n# ......\n\nThe exception happened from the code statement dest_directory = FLAGS.data_dir.\nThe successful output in python command is as follows:\n>>> cifar10.maybe_download_and_extract()\n>> Downloading cifar-10-binary.tar.gz 100.0%\nSuccessfully downloaded cifar-10-binary.tar.gz 170052171 bytes.\n\nThe detailed error in jupyter notebook is as follows:\nUnrecognizedFlagError                     Traceback (most recent call last)\n<ipython-input-6-ddaee26bfd14> in <module>()\n----> 1 cifar10.maybe_download_and_extract()\n~/models/tutorials/image/cifar10/cifar10.py in maybe_download_and_extract()\n381 def maybe_download_and_extract():\n382   \"\"\"Download and extract the tarball from Alex's website.\"\"\"\n--> 383   dest_directory = FLAGS.data_dir\n384   if not os.path.exists(dest_directory):\n385     os.makedirs(dest_directory)\n~/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/platform/flags.py in \n__getattr__(self, name)\n82     # a flag.\n83     if not wrapped.is_parsed():\n---> 84       wrapped(_sys.argv)\n85     return wrapped.__getattr__(name)\n86 \n~/anaconda3/envs/tensorflow/lib/python3.6/site-packages/absl/flags/_flagvalues.py in __call__(self, argv, known_only)\n628       suggestions = _helpers.get_flag_suggestions(name, list(self))\n629       raise _exceptions.UnrecognizedFlagError(\n--> 630           name, value, suggestions=suggestions)\n631 \n632     self.mark_as_parsed()\nUnrecognizedFlagError: Unknown command line flag 'f'\n\nSource code / logs\n#git clone https://github.com/tensorflow/models.git\n#cd models/tutorials/image/cifar10\nimport cifar10\ncifar10.maybe_download_and_extract()", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.5.0\r\n- **Python version**:  3.6\r\n- **Bazel version (if compiling from source)**: n/a\r\n- **GCC/Compiler version (if compiling from source)**: n/a\r\n- **CUDA/cuDNN version**: 9.0/7.0.5\r\n- **GPU model and memory**:GeForce 950M(4Gb)\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nI run the function `cifar10.maybe_download_and_extract()` of `tensorflow/models/tutorials/image/cifar10.py` file in python command and jupyter notebook .The code runs successfully in python command,  but it causes `absl.flags._exceptions.UnparsedFlagAccessError`from `cifar10.FLAGS.data_dir` in jupyter notebook.\r\n\r\nThe jupyter notebook has already **configured the tensorflow kernel**, other tensorflow examples could run smoothly on jupyter notebook.\r\n\r\nSignificant code in `cifar10.py` file is:\r\n\r\n    import tensorflow as tf\r\n    import cifar10_input\r\n    FLAGS = tf.app.flags.FLAGS\r\n\r\n    # Basic model parameters.\r\n    tf.app.flags.DEFINE_integer('batch_size', 128,\r\n                            \"\"\"Number of images to process in a batch.\"\"\")\r\n    tf.app.flags.DEFINE_string('data_dir', '/tmp/cifar10_data',\r\n                           \"\"\"Path to the CIFAR-10 data directory.\"\"\")\r\n    tf.app.flags.DEFINE_boolean('use_fp16', False,\r\n                            \"\"\"Train the model using fp16.\"\"\")\r\n    # .....\r\n    def maybe_download_and_extract():\r\n        \"\"\"Download and extract the tarball from Alex's website.\"\"\"\r\n        dest_directory = FLAGS.data_dir\r\n        if not os.path.exists(dest_directory):\r\n            os.makedirs(dest_directory)\r\n    # ......\r\n\r\nThe exception happened from the code statement `dest_directory = FLAGS.data_dir`.\r\n\r\nThe successful output in python command is as follows:\r\n\r\n    >>> cifar10.maybe_download_and_extract()\r\n    >> Downloading cifar-10-binary.tar.gz 100.0%\r\n    Successfully downloaded cifar-10-binary.tar.gz 170052171 bytes.\r\n\r\n\r\nThe detailed error in jupyter notebook is as follows:\r\n\r\n    UnrecognizedFlagError                     Traceback (most recent call last)\r\n    <ipython-input-6-ddaee26bfd14> in <module>()\r\n    ----> 1 cifar10.maybe_download_and_extract()\r\n    ~/models/tutorials/image/cifar10/cifar10.py in maybe_download_and_extract()\r\n    381 def maybe_download_and_extract():\r\n    382   \"\"\"Download and extract the tarball from Alex's website.\"\"\"\r\n    --> 383   dest_directory = FLAGS.data_dir\r\n    384   if not os.path.exists(dest_directory):\r\n    385     os.makedirs(dest_directory)\r\n    ~/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/platform/flags.py in \r\n    __getattr__(self, name)\r\n    82     # a flag.\r\n    83     if not wrapped.is_parsed():\r\n    ---> 84       wrapped(_sys.argv)\r\n    85     return wrapped.__getattr__(name)\r\n    86 \r\n    ~/anaconda3/envs/tensorflow/lib/python3.6/site-packages/absl/flags/_flagvalues.py in __call__(self, argv, known_only)\r\n    628       suggestions = _helpers.get_flag_suggestions(name, list(self))\r\n    629       raise _exceptions.UnrecognizedFlagError(\r\n    --> 630           name, value, suggestions=suggestions)\r\n    631 \r\n    632     self.mark_as_parsed()\r\n    UnrecognizedFlagError: Unknown command line flag 'f'\r\n\r\n### Source code / logs\r\n\r\n    #git clone https://github.com/tensorflow/models.git\r\n    #cd models/tutorials/image/cifar10\r\n    import cifar10\r\n    cifar10.maybe_download_and_extract()"}
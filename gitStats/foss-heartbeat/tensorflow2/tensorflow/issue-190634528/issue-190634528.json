{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5742", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5742/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5742/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5742/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5742", "id": 190634528, "node_id": "MDU6SXNzdWUxOTA2MzQ1Mjg=", "number": 5742, "title": "TypeError: ones_initializer() got multiple values for keyword argument 'dtype' when execute the inception_train", "user": {"login": "masanao-miyamoto", "id": 14864021, "node_id": "MDQ6VXNlcjE0ODY0MDIx", "avatar_url": "https://avatars2.githubusercontent.com/u/14864021?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masanao-miyamoto", "html_url": "https://github.com/masanao-miyamoto", "followers_url": "https://api.github.com/users/masanao-miyamoto/followers", "following_url": "https://api.github.com/users/masanao-miyamoto/following{/other_user}", "gists_url": "https://api.github.com/users/masanao-miyamoto/gists{/gist_id}", "starred_url": "https://api.github.com/users/masanao-miyamoto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masanao-miyamoto/subscriptions", "organizations_url": "https://api.github.com/users/masanao-miyamoto/orgs", "repos_url": "https://api.github.com/users/masanao-miyamoto/repos", "events_url": "https://api.github.com/users/masanao-miyamoto/events{/privacy}", "received_events_url": "https://api.github.com/users/masanao-miyamoto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": {"login": "itsmeolivia", "id": 2469592, "node_id": "MDQ6VXNlcjI0Njk1OTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2469592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itsmeolivia", "html_url": "https://github.com/itsmeolivia", "followers_url": "https://api.github.com/users/itsmeolivia/followers", "following_url": "https://api.github.com/users/itsmeolivia/following{/other_user}", "gists_url": "https://api.github.com/users/itsmeolivia/gists{/gist_id}", "starred_url": "https://api.github.com/users/itsmeolivia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itsmeolivia/subscriptions", "organizations_url": "https://api.github.com/users/itsmeolivia/orgs", "repos_url": "https://api.github.com/users/itsmeolivia/repos", "events_url": "https://api.github.com/users/itsmeolivia/events{/privacy}", "received_events_url": "https://api.github.com/users/itsmeolivia/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "itsmeolivia", "id": 2469592, "node_id": "MDQ6VXNlcjI0Njk1OTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2469592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itsmeolivia", "html_url": "https://github.com/itsmeolivia", "followers_url": "https://api.github.com/users/itsmeolivia/followers", "following_url": "https://api.github.com/users/itsmeolivia/following{/other_user}", "gists_url": "https://api.github.com/users/itsmeolivia/gists{/gist_id}", "starred_url": "https://api.github.com/users/itsmeolivia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itsmeolivia/subscriptions", "organizations_url": "https://api.github.com/users/itsmeolivia/orgs", "repos_url": "https://api.github.com/users/itsmeolivia/repos", "events_url": "https://api.github.com/users/itsmeolivia/events{/privacy}", "received_events_url": "https://api.github.com/users/itsmeolivia/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2016-11-21T06:59:51Z", "updated_at": "2017-02-15T19:07:27Z", "closed_at": "2017-02-15T19:07:27Z", "author_association": "NONE", "body_html": "<h2>Exception:</h2>\n<pre><code>...\nFile \"inception/slim/variables.py\", line 290, in variable\n  trainable=trainable, collections=collections)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 1024, in get_variable\n  custom_getter=custom_getter)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 850, in get_variable\n  custom_getter=custom_getter)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 346, in get_variable\n  validate_shape=validate_shape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 331, in _true_getter\n  caching_device=caching_device, validate_shape=validate_shape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 677, in _get_single_variable\n  expected_shape=shape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 224, in __init__\n  expected_shape=expected_shape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 327, in _init_from_args\n  initial_value(), name=\"initial_value\", dtype=dtype)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 665, in &lt;lambda&gt;\n  shape.as_list(), dtype=dtype, partition_info=partition_info)\nTypeError: ones_initializer() got multiple values for keyword argument 'dtype'\n</code></pre>\n<p>I think recently changes of tensorflow.python.init_ops influence to this issue.</p>\n<h2><a href=\"https://github.com/tensorflow/tensorflow/commit/cfb2280d3f6ced298681bd1141479a59a06abde8\">init_ops.py</a></h2>\n<div class=\"highlight highlight-source-diff\"><pre><span class=\"pl-md\"><span class=\"pl-md\">&lt;</span> def ones_initializer(dtype=dtypes.float32, partition_info=None):</span>\n<span class=\"pl-ms\">---</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">&gt;</span> def ones_initializer(shape, dtype=dtypes.float32, partition_info=None):</span></pre></div>\n<h2><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/variable_scope.py#L665\">variable_scope.py</a></h2>\n<div class=\"highlight highlight-source-python\"><pre> <span class=\"pl-c1\">655</span>     <span class=\"pl-c\"><span class=\"pl-c\">#</span> Create the tensor to initialize the variable.</span>\n <span class=\"pl-c1\">656</span>     <span class=\"pl-k\">if</span> initializer <span class=\"pl-k\">is</span> <span class=\"pl-c1\">None</span>:\n <span class=\"pl-c1\">657</span>       initializer <span class=\"pl-k\">=</span> init_ops.uniform_unit_scaling_initializer()\n <span class=\"pl-c1\">658</span>     <span class=\"pl-c\"><span class=\"pl-c\">#</span> Clear control dependencies while creating the initializer.</span>\n <span class=\"pl-c1\">659</span>     <span class=\"pl-k\">with</span> ops.control_dependencies(<span class=\"pl-c1\">None</span>):\n <span class=\"pl-c1\">660</span>       <span class=\"pl-k\">if</span> initializing_from_value:\n <span class=\"pl-c1\">661</span>         init_val <span class=\"pl-k\">=</span> initializer\n <span class=\"pl-c1\">662</span>         variable_dtype <span class=\"pl-k\">=</span> <span class=\"pl-c1\">None</span>\n <span class=\"pl-c1\">663</span>       <span class=\"pl-k\">else</span>:\n <span class=\"pl-c1\">664</span>         init_val <span class=\"pl-k\">=</span> <span class=\"pl-k\">lambda</span>: initializer(\n <span class=\"pl-c1\">665</span>             shape.as_list(), <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>dtype, <span class=\"pl-v\">partition_info</span><span class=\"pl-k\">=</span>partition_info)\n <span class=\"pl-c1\">666</span>         variable_dtype <span class=\"pl-k\">=</span> dtype.base_dtype</pre></div>\n<p><code>lambda:initiallizer</code> calls with three parameters. So, parameter missmatch occured.</p>\n<p>I think it needs to change <code>variable_scope.py</code> source code.</p>", "body_text": "Exception:\n...\nFile \"inception/slim/variables.py\", line 290, in variable\n  trainable=trainable, collections=collections)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 1024, in get_variable\n  custom_getter=custom_getter)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 850, in get_variable\n  custom_getter=custom_getter)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 346, in get_variable\n  validate_shape=validate_shape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 331, in _true_getter\n  caching_device=caching_device, validate_shape=validate_shape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 677, in _get_single_variable\n  expected_shape=shape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 224, in __init__\n  expected_shape=expected_shape)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 327, in _init_from_args\n  initial_value(), name=\"initial_value\", dtype=dtype)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 665, in <lambda>\n  shape.as_list(), dtype=dtype, partition_info=partition_info)\nTypeError: ones_initializer() got multiple values for keyword argument 'dtype'\n\nI think recently changes of tensorflow.python.init_ops influence to this issue.\ninit_ops.py\n< def ones_initializer(dtype=dtypes.float32, partition_info=None):\n---\n> def ones_initializer(shape, dtype=dtypes.float32, partition_info=None):\nvariable_scope.py\n 655     # Create the tensor to initialize the variable.\n 656     if initializer is None:\n 657       initializer = init_ops.uniform_unit_scaling_initializer()\n 658     # Clear control dependencies while creating the initializer.\n 659     with ops.control_dependencies(None):\n 660       if initializing_from_value:\n 661         init_val = initializer\n 662         variable_dtype = None\n 663       else:\n 664         init_val = lambda: initializer(\n 665             shape.as_list(), dtype=dtype, partition_info=partition_info)\n 666         variable_dtype = dtype.base_dtype\nlambda:initiallizer calls with three parameters. So, parameter missmatch occured.\nI think it needs to change variable_scope.py source code.", "body": "## Exception:\r\n\r\n```\r\n...\r\nFile \"inception/slim/variables.py\", line 290, in variable\r\n  trainable=trainable, collections=collections)\r\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 1024, in get_variable\r\n  custom_getter=custom_getter)\r\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 850, in get_variable\r\n  custom_getter=custom_getter)\r\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 346, in get_variable\r\n  validate_shape=validate_shape)\r\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 331, in _true_getter\r\n  caching_device=caching_device, validate_shape=validate_shape)\r\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 677, in _get_single_variable\r\n  expected_shape=shape)\r\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 224, in __init__\r\n  expected_shape=expected_shape)\r\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py\", line 327, in _init_from_args\r\n  initial_value(), name=\"initial_value\", dtype=dtype)\r\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variable_scope.py\", line 665, in <lambda>\r\n  shape.as_list(), dtype=dtype, partition_info=partition_info)\r\nTypeError: ones_initializer() got multiple values for keyword argument 'dtype'\r\n```\r\n\r\nI think recently changes of tensorflow.python.init_ops influence to this issue.\r\n\r\n## [init_ops.py](https://github.com/tensorflow/tensorflow/commit/cfb2280d3f6ced298681bd1141479a59a06abde8)\r\n```diff\r\n< def ones_initializer(dtype=dtypes.float32, partition_info=None):\r\n---\r\n> def ones_initializer(shape, dtype=dtypes.float32, partition_info=None):\r\n```\r\n\r\n## [variable_scope.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/variable_scope.py#L665)\r\n\r\n```python\r\n 655     # Create the tensor to initialize the variable.\r\n 656     if initializer is None:\r\n 657       initializer = init_ops.uniform_unit_scaling_initializer()\r\n 658     # Clear control dependencies while creating the initializer.\r\n 659     with ops.control_dependencies(None):\r\n 660       if initializing_from_value:\r\n 661         init_val = initializer\r\n 662         variable_dtype = None\r\n 663       else:\r\n 664         init_val = lambda: initializer(\r\n 665             shape.as_list(), dtype=dtype, partition_info=partition_info)\r\n 666         variable_dtype = dtype.base_dtype\r\n```\r\n\r\n`lambda:initiallizer` calls with three parameters. So, parameter missmatch occured.\r\n\r\nI think it needs to change `variable_scope.py` source code.\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320236290", "html_url": "https://github.com/tensorflow/tensorflow/issues/11967#issuecomment-320236290", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11967", "id": 320236290, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDIzNjI5MA==", "user": {"login": "namrata-ibm", "id": 21953668, "node_id": "MDQ6VXNlcjIxOTUzNjY4", "avatar_url": "https://avatars3.githubusercontent.com/u/21953668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/namrata-ibm", "html_url": "https://github.com/namrata-ibm", "followers_url": "https://api.github.com/users/namrata-ibm/followers", "following_url": "https://api.github.com/users/namrata-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/namrata-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/namrata-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/namrata-ibm/subscriptions", "organizations_url": "https://api.github.com/users/namrata-ibm/orgs", "repos_url": "https://api.github.com/users/namrata-ibm/repos", "events_url": "https://api.github.com/users/namrata-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/namrata-ibm/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-04T12:28:31Z", "updated_at": "2017-08-04T12:28:31Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15676913\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/poxvoculi\">@poxvoculi</a>, Thank you for you support.</p>\n<p>On similar lines I found a test failure in <code>//tensorflow/python/kernel_tests:summary_image_op_test</code>.<br>\nHere the error tolerance increase needed is even lower ( i.e. 2e-06) at <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/kernel_tests/summary_image_op_test.py#L83\">assert</a>.</p>\n<p>Also test passes when run in debug mode without tolerance increase.</p>\n<p>Adding the log below:</p>\n<pre><code>F..\n======================================================================\nFAIL: testImageSummary (__main__.SummaryImageOpTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/summary_image_op_test.py\", line 83, in testImageSummary\n    self.assertAllClose(image, adjusted[0])\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 634, in assertAllClose\n    self._assertArrayLikeAllClose(a, b, rtol=rtol, atol=atol)\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 604, in _assertArrayLikeAllClose\n    np.testing.assert_allclose(a, b, rtol=rtol, atol=atol, err_msg=msg)\n  File \"/usr/lib/python2.7/dist-packages/numpy/testing/utils.py\", line 1391, in assert_allclose\n    verbose=verbose, header=header)\n  File \"/usr/lib/python2.7/dist-packages/numpy/testing/utils.py\", line 733, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError:\nNot equal to tolerance rtol=1e-06, atol=1e-06\nNone\n(mismatch 2.85714285714%)\n x: array([[[221],\n        [102],\n        [129],...\n y: array([[[ 221.],\n        [ 102.],\n        [ 129.],...\n\n----------------------------------------------------------------------\nRan 3 tests in 0.069s\n\nFAILED (failures=1)\nnot close where =  (array([3]), array([6]), array([0]))\nnot close lhs =  [0]\nnot close rhs =  [ 1.]\nnot close dif =  [ 1.]\nnot close tol =  [  1.99999999e-06]\ndtype = uint8, shape = (5, 7, 1)\n\n</code></pre>", "body_text": "@poxvoculi, Thank you for you support.\nOn similar lines I found a test failure in //tensorflow/python/kernel_tests:summary_image_op_test.\nHere the error tolerance increase needed is even lower ( i.e. 2e-06) at assert.\nAlso test passes when run in debug mode without tolerance increase.\nAdding the log below:\nF..\n======================================================================\nFAIL: testImageSummary (__main__.SummaryImageOpTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/summary_image_op_test.py\", line 83, in testImageSummary\n    self.assertAllClose(image, adjusted[0])\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 634, in assertAllClose\n    self._assertArrayLikeAllClose(a, b, rtol=rtol, atol=atol)\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 604, in _assertArrayLikeAllClose\n    np.testing.assert_allclose(a, b, rtol=rtol, atol=atol, err_msg=msg)\n  File \"/usr/lib/python2.7/dist-packages/numpy/testing/utils.py\", line 1391, in assert_allclose\n    verbose=verbose, header=header)\n  File \"/usr/lib/python2.7/dist-packages/numpy/testing/utils.py\", line 733, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError:\nNot equal to tolerance rtol=1e-06, atol=1e-06\nNone\n(mismatch 2.85714285714%)\n x: array([[[221],\n        [102],\n        [129],...\n y: array([[[ 221.],\n        [ 102.],\n        [ 129.],...\n\n----------------------------------------------------------------------\nRan 3 tests in 0.069s\n\nFAILED (failures=1)\nnot close where =  (array([3]), array([6]), array([0]))\nnot close lhs =  [0]\nnot close rhs =  [ 1.]\nnot close dif =  [ 1.]\nnot close tol =  [  1.99999999e-06]\ndtype = uint8, shape = (5, 7, 1)", "body": "@poxvoculi, Thank you for you support.\r\n\r\nOn similar lines I found a test failure in `//tensorflow/python/kernel_tests:summary_image_op_test`.\r\nHere the error tolerance increase needed is even lower ( i.e. 2e-06) at [assert](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/kernel_tests/summary_image_op_test.py#L83).\r\n\r\nAlso test passes when run in debug mode without tolerance increase.\r\n\r\nAdding the log below:\r\n\r\n```\r\nF..\r\n======================================================================\r\nFAIL: testImageSummary (__main__.SummaryImageOpTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/summary_image_op_test.py\", line 83, in testImageSummary\r\n    self.assertAllClose(image, adjusted[0])\r\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 634, in assertAllClose\r\n    self._assertArrayLikeAllClose(a, b, rtol=rtol, atol=atol)\r\n  File \"/home/test/.cache/bazel/_bazel_test/24685d064c07f7346b48c2d13ec3ad69/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/summary_image_op_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 604, in _assertArrayLikeAllClose\r\n    np.testing.assert_allclose(a, b, rtol=rtol, atol=atol, err_msg=msg)\r\n  File \"/usr/lib/python2.7/dist-packages/numpy/testing/utils.py\", line 1391, in assert_allclose\r\n    verbose=verbose, header=header)\r\n  File \"/usr/lib/python2.7/dist-packages/numpy/testing/utils.py\", line 733, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError:\r\nNot equal to tolerance rtol=1e-06, atol=1e-06\r\nNone\r\n(mismatch 2.85714285714%)\r\n x: array([[[221],\r\n        [102],\r\n        [129],...\r\n y: array([[[ 221.],\r\n        [ 102.],\r\n        [ 129.],...\r\n\r\n----------------------------------------------------------------------\r\nRan 3 tests in 0.069s\r\n\r\nFAILED (failures=1)\r\nnot close where =  (array([3]), array([6]), array([0]))\r\nnot close lhs =  [0]\r\nnot close rhs =  [ 1.]\r\nnot close dif =  [ 1.]\r\nnot close tol =  [  1.99999999e-06]\r\ndtype = uint8, shape = (5, 7, 1)\r\n\r\n```\r\n\r\n"}
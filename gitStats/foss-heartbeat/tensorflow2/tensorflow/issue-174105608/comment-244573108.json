{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/244573108", "html_url": "https://github.com/tensorflow/tensorflow/issues/4105#issuecomment-244573108", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4105", "id": 244573108, "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDU3MzEwOA==", "user": {"login": "FlorinAndrei", "id": 901867, "node_id": "MDQ6VXNlcjkwMTg2Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/901867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FlorinAndrei", "html_url": "https://github.com/FlorinAndrei", "followers_url": "https://api.github.com/users/FlorinAndrei/followers", "following_url": "https://api.github.com/users/FlorinAndrei/following{/other_user}", "gists_url": "https://api.github.com/users/FlorinAndrei/gists{/gist_id}", "starred_url": "https://api.github.com/users/FlorinAndrei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FlorinAndrei/subscriptions", "organizations_url": "https://api.github.com/users/FlorinAndrei/orgs", "repos_url": "https://api.github.com/users/FlorinAndrei/repos", "events_url": "https://api.github.com/users/FlorinAndrei/events{/privacy}", "received_events_url": "https://api.github.com/users/FlorinAndrei/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-03T22:16:10Z", "updated_at": "2016-09-04T03:29:54Z", "author_association": "NONE", "body_html": "<pre><code>root@machine-learning:/vagrant/packages/tensorflow# ls *bazel*\nls: cannot access '*bazel*': No such file or directory\nroot@machine-learning:/vagrant/packages/tensorflow# ls -l $(bazel info output_base)/external/local_config_cuda/crosstool\nls: cannot access '/root/.cache/bazel/_bazel_root/b0bb79a433b74dfa52314ef9af1d2ddd/external/local_config_cuda/crosstool': No such file or directory\n</code></pre>\n<p><a href=\"https://gist.github.com/FlorinAndrei/c706fa420d118ecdd29c3016ae13cea1\">contents of bazel cache after BUILD file not found</a></p>\n<p>Here's how to reproduce it:</p>\n<p>Clone this repo: <a href=\"https://github.com/FlorinAndrei/ml-setup\">https://github.com/FlorinAndrei/ml-setup</a></p>\n<p>Checkout the ubuntu1604 branch, then launch the virtual machine and run the ansible installer, then compile TF by hand:</p>\n<pre><code>git clone https://github.com/FlorinAndrei/ml-setup\ncd ml-setup\ngit checkout ubuntu1604\nvagrant up\nvagrant ssh\n\nsudo su -\ncp /vagrant/bash_profile_example /root/.bash_profile\nexit\nsudo su -\n\ncd /vagrant\n# this will take a long time\nansible-playbook -i inventory main.yml\nexit\nsudo su -\n\ncd /vagrant/packages/tensorflow\n./configure\n\n# Hit ENTER on every question except:\n# Do you wish to build TensorFlow with GPU support? (answer: y)\n# Please specify a list of comma-separated Cuda compute capabilities you want to build with. (answer: 6.1)\n\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<p>However, if you delete the tensorflow repo, re-clone and try again, it starts compiling:</p>\n<pre><code>cd\nrm -rf /vagrant/packages/tensorflow\ncd /vagrant\nansible-playbook -i inventory 40-tensorflow.yml\n\ncd /vagrant/packages/tensorflow\n./configure\n\n# Hit ENTER on every question except:\n# Do you wish to build TensorFlow with GPU support? (answer: y)\n# Please specify a list of comma-separated Cuda compute capabilities you want to build with. (answer: 6.1)\n</code></pre>\n<p><a href=\"https://gist.github.com/FlorinAndrei/38b886ae3aa46760ca8228cc889971ca\">contents of bazel cache after ./configure</a></p>\n<pre><code>bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<p>And now it starts compiling.</p>\n<p>EDIT: Even on second try, it still fails to compile all the way to the end, but that seems like a different issue, which I've opened here:</p>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"174921033\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4190\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4190/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4190\">#4190</a></p>", "body_text": "root@machine-learning:/vagrant/packages/tensorflow# ls *bazel*\nls: cannot access '*bazel*': No such file or directory\nroot@machine-learning:/vagrant/packages/tensorflow# ls -l $(bazel info output_base)/external/local_config_cuda/crosstool\nls: cannot access '/root/.cache/bazel/_bazel_root/b0bb79a433b74dfa52314ef9af1d2ddd/external/local_config_cuda/crosstool': No such file or directory\n\ncontents of bazel cache after BUILD file not found\nHere's how to reproduce it:\nClone this repo: https://github.com/FlorinAndrei/ml-setup\nCheckout the ubuntu1604 branch, then launch the virtual machine and run the ansible installer, then compile TF by hand:\ngit clone https://github.com/FlorinAndrei/ml-setup\ncd ml-setup\ngit checkout ubuntu1604\nvagrant up\nvagrant ssh\n\nsudo su -\ncp /vagrant/bash_profile_example /root/.bash_profile\nexit\nsudo su -\n\ncd /vagrant\n# this will take a long time\nansible-playbook -i inventory main.yml\nexit\nsudo su -\n\ncd /vagrant/packages/tensorflow\n./configure\n\n# Hit ENTER on every question except:\n# Do you wish to build TensorFlow with GPU support? (answer: y)\n# Please specify a list of comma-separated Cuda compute capabilities you want to build with. (answer: 6.1)\n\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n\nHowever, if you delete the tensorflow repo, re-clone and try again, it starts compiling:\ncd\nrm -rf /vagrant/packages/tensorflow\ncd /vagrant\nansible-playbook -i inventory 40-tensorflow.yml\n\ncd /vagrant/packages/tensorflow\n./configure\n\n# Hit ENTER on every question except:\n# Do you wish to build TensorFlow with GPU support? (answer: y)\n# Please specify a list of comma-separated Cuda compute capabilities you want to build with. (answer: 6.1)\n\ncontents of bazel cache after ./configure\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n\nAnd now it starts compiling.\nEDIT: Even on second try, it still fails to compile all the way to the end, but that seems like a different issue, which I've opened here:\n#4190", "body": "```\nroot@machine-learning:/vagrant/packages/tensorflow# ls *bazel*\nls: cannot access '*bazel*': No such file or directory\nroot@machine-learning:/vagrant/packages/tensorflow# ls -l $(bazel info output_base)/external/local_config_cuda/crosstool\nls: cannot access '/root/.cache/bazel/_bazel_root/b0bb79a433b74dfa52314ef9af1d2ddd/external/local_config_cuda/crosstool': No such file or directory\n```\n\n[contents of bazel cache after BUILD file not found](https://gist.github.com/FlorinAndrei/c706fa420d118ecdd29c3016ae13cea1)\n\nHere's how to reproduce it:\n\nClone this repo: https://github.com/FlorinAndrei/ml-setup\n\nCheckout the ubuntu1604 branch, then launch the virtual machine and run the ansible installer, then compile TF by hand:\n\n```\ngit clone https://github.com/FlorinAndrei/ml-setup\ncd ml-setup\ngit checkout ubuntu1604\nvagrant up\nvagrant ssh\n\nsudo su -\ncp /vagrant/bash_profile_example /root/.bash_profile\nexit\nsudo su -\n\ncd /vagrant\n# this will take a long time\nansible-playbook -i inventory main.yml\nexit\nsudo su -\n\ncd /vagrant/packages/tensorflow\n./configure\n\n# Hit ENTER on every question except:\n# Do you wish to build TensorFlow with GPU support? (answer: y)\n# Please specify a list of comma-separated Cuda compute capabilities you want to build with. (answer: 6.1)\n\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n```\n\nHowever, if you delete the tensorflow repo, re-clone and try again, it starts compiling:\n\n```\ncd\nrm -rf /vagrant/packages/tensorflow\ncd /vagrant\nansible-playbook -i inventory 40-tensorflow.yml\n\ncd /vagrant/packages/tensorflow\n./configure\n\n# Hit ENTER on every question except:\n# Do you wish to build TensorFlow with GPU support? (answer: y)\n# Please specify a list of comma-separated Cuda compute capabilities you want to build with. (answer: 6.1)\n```\n\n[contents of bazel cache after ./configure](https://gist.github.com/FlorinAndrei/38b886ae3aa46760ca8228cc889971ca)\n\n```\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n```\n\nAnd now it starts compiling.\n\nEDIT: Even on second try, it still fails to compile all the way to the end, but that seems like a different issue, which I've opened here:\n\nhttps://github.com/tensorflow/tensorflow/issues/4190\n"}
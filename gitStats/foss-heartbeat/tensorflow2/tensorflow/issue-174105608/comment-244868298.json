{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/244868298", "html_url": "https://github.com/tensorflow/tensorflow/issues/4105#issuecomment-244868298", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4105", "id": 244868298, "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDg2ODI5OA==", "user": {"login": "davidzchen", "id": 5283042, "node_id": "MDQ6VXNlcjUyODMwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5283042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidzchen", "html_url": "https://github.com/davidzchen", "followers_url": "https://api.github.com/users/davidzchen/followers", "following_url": "https://api.github.com/users/davidzchen/following{/other_user}", "gists_url": "https://api.github.com/users/davidzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidzchen/subscriptions", "organizations_url": "https://api.github.com/users/davidzchen/orgs", "repos_url": "https://api.github.com/users/davidzchen/repos", "events_url": "https://api.github.com/users/davidzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/davidzchen/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-06T07:14:01Z", "updated_at": "2016-09-06T07:14:01Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3064114\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nsuke\">@nsuke</a> That seems to indicate that Bazel is re-fetching if you run <code>bazel build</code> separately from the <code>configure</code> script, which seems to be a bug. To help us better understand what is going on, can you apply the <a href=\"https://gist.github.com/davidzchen/165e6ec139fcd9245b5721c8bf2fdd53\">patch</a> that I linked in my comment above, reproduce the <code>'@local_config_cuda//crosstool': BUILD file not found</code> error and paste the output that you get? In particular, I am interested in:</p>\n<ol>\n<li>What the debug (<code>WARNING</code>) messages say when the <code>bazel fetch</code> command is running, which will tell us whether <code>cuda_configure</code> thinks GPU support is enabled and what the value of <code>TF_NEED_CUDA</code> is.</li>\n<li>Whether the same debug messages are also being printed when you run <code>bazel build</code>, which will tell us whether Bazel is re-fetching during build.</li>\n</ol>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3721087\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/damienmg\">@damienmg</a> Are there any flags that can be used to enable some additional logging to understand what <code>fetch</code> is doing in this case?</p>", "body_text": "@nsuke That seems to indicate that Bazel is re-fetching if you run bazel build separately from the configure script, which seems to be a bug. To help us better understand what is going on, can you apply the patch that I linked in my comment above, reproduce the '@local_config_cuda//crosstool': BUILD file not found error and paste the output that you get? In particular, I am interested in:\n\nWhat the debug (WARNING) messages say when the bazel fetch command is running, which will tell us whether cuda_configure thinks GPU support is enabled and what the value of TF_NEED_CUDA is.\nWhether the same debug messages are also being printed when you run bazel build, which will tell us whether Bazel is re-fetching during build.\n\n@damienmg Are there any flags that can be used to enable some additional logging to understand what fetch is doing in this case?", "body": "@nsuke That seems to indicate that Bazel is re-fetching if you run `bazel build` separately from the `configure` script, which seems to be a bug. To help us better understand what is going on, can you apply the [patch](https://gist.github.com/davidzchen/165e6ec139fcd9245b5721c8bf2fdd53) that I linked in my comment above, reproduce the `'@local_config_cuda//crosstool': BUILD file not found` error and paste the output that you get? In particular, I am interested in:\n1. What the debug (`WARNING`) messages say when the `bazel fetch` command is running, which will tell us whether `cuda_configure` thinks GPU support is enabled and what the value of `TF_NEED_CUDA` is.\n2. Whether the same debug messages are also being printed when you run `bazel build`, which will tell us whether Bazel is re-fetching during build.\n\n@damienmg Are there any flags that can be used to enable some additional logging to understand what `fetch` is doing in this case?\n"}
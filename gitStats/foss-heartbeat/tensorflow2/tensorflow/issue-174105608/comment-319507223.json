{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/319507223", "html_url": "https://github.com/tensorflow/tensorflow/issues/4105#issuecomment-319507223", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4105", "id": 319507223, "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTUwNzIyMw==", "user": {"login": "itssujeeth", "id": 3579613, "node_id": "MDQ6VXNlcjM1Nzk2MTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/3579613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itssujeeth", "html_url": "https://github.com/itssujeeth", "followers_url": "https://api.github.com/users/itssujeeth/followers", "following_url": "https://api.github.com/users/itssujeeth/following{/other_user}", "gists_url": "https://api.github.com/users/itssujeeth/gists{/gist_id}", "starred_url": "https://api.github.com/users/itssujeeth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itssujeeth/subscriptions", "organizations_url": "https://api.github.com/users/itssujeeth/orgs", "repos_url": "https://api.github.com/users/itssujeeth/repos", "events_url": "https://api.github.com/users/itssujeeth/events{/privacy}", "received_events_url": "https://api.github.com/users/itssujeeth/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-01T21:49:31Z", "updated_at": "2017-08-01T21:49:31Z", "author_association": "NONE", "body_html": "<p>I\u2019m also facing the same challenge - unable to build tensor flow on a gpu server.  Below given are the details.  OS is Ubuntu 16.04LTS</p>\n<pre><code>user@gpu-devbox:~/Workouts/tensorflow$ python --version\nPython 2.7.12\n</code></pre>\n<pre><code>user@gpu-devbox:~/Workouts/tensorflow$ gcc --version\ngcc (Ubuntu 5.4.0-6ubuntu1-16.04.4) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n<pre><code>user@gpu-devbox:~/Workouts/tensorflow$ bazel version\nBuild label: 0.5.3\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Jul 28 08:34:59 2017 (1501230899)\nBuild timestamp: 1501230899\nBuild timestamp as int: 1501230899\n</code></pre>\n<pre><code>user@gpu-devbox:~/Workouts/tensorflow$ ./configure \nWARNING: Running Bazel server needs to be killed, because the startup options are different.\nPlease specify the location of python. [Default is /usr/bin/python]: \nFound possible Python library paths:\n/usr/local/lib/python2.7/dist-packages\n/usr/lib/python2.7/dist-packages\nPlease input the desired Python library path to use.  Default is /usr/local/lib/python2.7/dist-packages\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: \njemalloc as malloc support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]: \nNo Google Cloud Platform support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Hadoop File System support? [y/N]: \nNo Hadoop File System support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: \nNo XLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: \nNo VERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with OpenCL support? [y/N]: \nNo OpenCL support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with CUDA support? [y/N]: Y\nCUDA support will be enabled for TensorFlow.\n\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\"Please specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: \nPlease specify the location where cuDNN 6 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 6.1,6.1,6.1,6.1]6.1\nDo you want to use clang as CUDA compiler? [y/N]: \nnvcc will be used as CUDA compiler.\n\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: \nDo you wish to build TensorFlow with MPI support? [y/N]: \nNo MPI support will be enabled for TensorFlow.\n\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \nAdd \"--config=mkl\" to your bazel command to build with MKL support.\nPlease note that MKL on MacOS or windows is still not supported.\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\nConfiguration finished\n</code></pre>\n<pre><code>user@gpu-devbox:~/Workouts/tensorflow$ echo $CUDA_HOME\n/usr/local/cuda-8.0\n\nuser@gpu-devbox:~/Workouts/tensorflow$ echo $LD_LIBRARY_PATH\n/usr/local/cuda-8.0/lib64\n</code></pre>\n<pre><code>user@gpu-devbox:~/Workouts/tensorflow$ bazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" ./tensorflow/tools/pip_package:build_pip_package \n.......\nERROR: no such package '@local_config_cuda//crosstool': Traceback (most recent call last):\n    File \"/home/u19061/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039\n        _create_local_cuda_repository(repository_ctx)\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository\n        _host_compiler_includes(repository_ctx, cc)\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes\n        get_cxx_inc_directories(repository_ctx, cc)\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories\n        set(includes_cpp)\ndepsets cannot contain mutable items\nINFO: Elapsed time: 5.488s\nFAILED: Build did NOT complete successfully (3 packages loaded)\n</code></pre>", "body_text": "I\u2019m also facing the same challenge - unable to build tensor flow on a gpu server.  Below given are the details.  OS is Ubuntu 16.04LTS\nuser@gpu-devbox:~/Workouts/tensorflow$ python --version\nPython 2.7.12\n\nuser@gpu-devbox:~/Workouts/tensorflow$ gcc --version\ngcc (Ubuntu 5.4.0-6ubuntu1-16.04.4) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nuser@gpu-devbox:~/Workouts/tensorflow$ bazel version\nBuild label: 0.5.3\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Jul 28 08:34:59 2017 (1501230899)\nBuild timestamp: 1501230899\nBuild timestamp as int: 1501230899\n\nuser@gpu-devbox:~/Workouts/tensorflow$ ./configure \nWARNING: Running Bazel server needs to be killed, because the startup options are different.\nPlease specify the location of python. [Default is /usr/bin/python]: \nFound possible Python library paths:\n/usr/local/lib/python2.7/dist-packages\n/usr/lib/python2.7/dist-packages\nPlease input the desired Python library path to use.  Default is /usr/local/lib/python2.7/dist-packages\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: \njemalloc as malloc support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]: \nNo Google Cloud Platform support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Hadoop File System support? [y/N]: \nNo Hadoop File System support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: \nNo XLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: \nNo VERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with OpenCL support? [y/N]: \nNo OpenCL support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with CUDA support? [y/N]: Y\nCUDA support will be enabled for TensorFlow.\n\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \n\"Please specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: \nPlease specify the location where cuDNN 6 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 6.1,6.1,6.1,6.1]6.1\nDo you want to use clang as CUDA compiler? [y/N]: \nnvcc will be used as CUDA compiler.\n\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: \nDo you wish to build TensorFlow with MPI support? [y/N]: \nNo MPI support will be enabled for TensorFlow.\n\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \nAdd \"--config=mkl\" to your bazel command to build with MKL support.\nPlease note that MKL on MacOS or windows is still not supported.\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\nConfiguration finished\n\nuser@gpu-devbox:~/Workouts/tensorflow$ echo $CUDA_HOME\n/usr/local/cuda-8.0\n\nuser@gpu-devbox:~/Workouts/tensorflow$ echo $LD_LIBRARY_PATH\n/usr/local/cuda-8.0/lib64\n\nuser@gpu-devbox:~/Workouts/tensorflow$ bazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" ./tensorflow/tools/pip_package:build_pip_package \n.......\nERROR: no such package '@local_config_cuda//crosstool': Traceback (most recent call last):\n    File \"/home/u19061/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039\n        _create_local_cuda_repository(repository_ctx)\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository\n        _host_compiler_includes(repository_ctx, cc)\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes\n        get_cxx_inc_directories(repository_ctx, cc)\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories\n        set(includes_cpp)\ndepsets cannot contain mutable items\nINFO: Elapsed time: 5.488s\nFAILED: Build did NOT complete successfully (3 packages loaded)", "body": "I\u2019m also facing the same challenge - unable to build tensor flow on a gpu server.  Below given are the details.  OS is Ubuntu 16.04LTS\r\n\r\n```\r\nuser@gpu-devbox:~/Workouts/tensorflow$ python --version\r\nPython 2.7.12\r\n```\r\n```\r\nuser@gpu-devbox:~/Workouts/tensorflow$ gcc --version\r\ngcc (Ubuntu 5.4.0-6ubuntu1-16.04.4) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n```\r\n```\r\nuser@gpu-devbox:~/Workouts/tensorflow$ bazel version\r\nBuild label: 0.5.3\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Fri Jul 28 08:34:59 2017 (1501230899)\r\nBuild timestamp: 1501230899\r\nBuild timestamp as int: 1501230899\r\n```\r\n```\r\nuser@gpu-devbox:~/Workouts/tensorflow$ ./configure \r\nWARNING: Running Bazel server needs to be killed, because the startup options are different.\r\nPlease specify the location of python. [Default is /usr/bin/python]: \r\nFound possible Python library paths:\r\n/usr/local/lib/python2.7/dist-packages\r\n/usr/lib/python2.7/dist-packages\r\nPlease input the desired Python library path to use.  Default is /usr/local/lib/python2.7/dist-packages\r\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: \r\njemalloc as malloc support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]: \r\nNo Google Cloud Platform support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N]: \r\nNo Hadoop File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: \r\nNo XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with VERBS support? [y/N]: \r\nNo VERBS support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL support? [y/N]: \r\nNo OpenCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: Y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: \r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\n\"Please specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: \r\nPlease specify the location where cuDNN 6 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 6.1,6.1,6.1,6.1]6.1\r\nDo you want to use clang as CUDA compiler? [y/N]: \r\nnvcc will be used as CUDA compiler.\r\n\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: \r\nDo you wish to build TensorFlow with MPI support? [y/N]: \r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\r\nPlease note that MKL on MacOS or windows is still not supported.\r\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\r\nConfiguration finished\r\n```\r\n```\r\nuser@gpu-devbox:~/Workouts/tensorflow$ echo $CUDA_HOME\r\n/usr/local/cuda-8.0\r\n\r\nuser@gpu-devbox:~/Workouts/tensorflow$ echo $LD_LIBRARY_PATH\r\n/usr/local/cuda-8.0/lib64\r\n```\r\n```\r\nuser@gpu-devbox:~/Workouts/tensorflow$ bazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" ./tensorflow/tools/pip_package:build_pip_package \r\n.......\r\nERROR: no such package '@local_config_cuda//crosstool': Traceback (most recent call last):\r\n    File \"/home/u19061/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1039\r\n        _create_local_cuda_repository(repository_ctx)\r\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 976, in _create_local_cuda_repository\r\n        _host_compiler_includes(repository_ctx, cc)\r\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 145, in _host_compiler_includes\r\n        get_cxx_inc_directories(repository_ctx, cc)\r\n    File \"/home/user/Workouts/tensorflow/third_party/gpus/cuda_configure.bzl\", line 120, in get_cxx_inc_directories\r\n        set(includes_cpp)\r\ndepsets cannot contain mutable items\r\nINFO: Elapsed time: 5.488s\r\nFAILED: Build did NOT complete successfully (3 packages loaded)\r\n```"}
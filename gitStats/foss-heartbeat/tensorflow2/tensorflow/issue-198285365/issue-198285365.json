{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6596", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6596/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6596/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6596/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6596", "id": 198285365, "node_id": "MDU6SXNzdWUxOTgyODUzNjU=", "number": 6596, "title": "[ Bug ] The 2nd Saver fails to recognize its Checkpoint State file.", "user": {"login": "kumikokashii", "id": 8810755, "node_id": "MDQ6VXNlcjg4MTA3NTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/8810755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kumikokashii", "html_url": "https://github.com/kumikokashii", "followers_url": "https://api.github.com/users/kumikokashii/followers", "following_url": "https://api.github.com/users/kumikokashii/following{/other_user}", "gists_url": "https://api.github.com/users/kumikokashii/gists{/gist_id}", "starred_url": "https://api.github.com/users/kumikokashii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kumikokashii/subscriptions", "organizations_url": "https://api.github.com/users/kumikokashii/orgs", "repos_url": "https://api.github.com/users/kumikokashii/repos", "events_url": "https://api.github.com/users/kumikokashii/events{/privacy}", "received_events_url": "https://api.github.com/users/kumikokashii/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-01T23:06:34Z", "updated_at": "2018-02-07T23:49:40Z", "closed_at": "2018-02-07T23:49:40Z", "author_association": "NONE", "body_html": "<p><strong>Operating System:</strong> macOS Sierra</p>\n<p><strong>Steps to Reproduce:</strong></p>\n<ol>\n<li>In a session, create two Savers.</li>\n<li>Let one of the Saver save the variables.</li>\n<li>Let the other Saver save the variables in a different directory from the first Saver's destination directory.</li>\n</ol>\n<p><strong>Result:</strong><br>\nAn Info message is displayed indicating that a Checkpoint State file does not exist (<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/saver.py#L738\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/saver.py#L738</a>). And TensorFlow creates a new Checkpoint State file. This happens every time the 2nd Saver saves the variables.</p>\n<p><strong>Expected Result:</strong><br>\nThe 2nd Saver's Checkpoint State file should be recognized.</p>\n<p><strong>Code to Reproduce:</strong></p>\n<pre><code>with tf.Session(graph=graph) as sess:\n    ...\n    saver_best = tf.train.Saver()\n    saver_hourly = tf.train.Saver(max_to_keep=None)  \n    ...\n    for i in range(max_step):\n        ...\n        if last_hourly_save + datetime.timedelta(hours=1) &lt; datetime.datetime.now():                     \n            path_checkpoint_file = saver_hourly.save(sess, 'checkpoint_directory/hourly/model', global_step=i, latest_filename='hourly_checkpoint')\n        ...\n        if best:\n            path_checkpoint_file = saver_best.save(sess, 'checkpoint_directory/best/model', global_step=i, latest_filename='best_checkpoint')\n        ...\n</code></pre>", "body_text": "Operating System: macOS Sierra\nSteps to Reproduce:\n\nIn a session, create two Savers.\nLet one of the Saver save the variables.\nLet the other Saver save the variables in a different directory from the first Saver's destination directory.\n\nResult:\nAn Info message is displayed indicating that a Checkpoint State file does not exist (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/saver.py#L738). And TensorFlow creates a new Checkpoint State file. This happens every time the 2nd Saver saves the variables.\nExpected Result:\nThe 2nd Saver's Checkpoint State file should be recognized.\nCode to Reproduce:\nwith tf.Session(graph=graph) as sess:\n    ...\n    saver_best = tf.train.Saver()\n    saver_hourly = tf.train.Saver(max_to_keep=None)  \n    ...\n    for i in range(max_step):\n        ...\n        if last_hourly_save + datetime.timedelta(hours=1) < datetime.datetime.now():                     \n            path_checkpoint_file = saver_hourly.save(sess, 'checkpoint_directory/hourly/model', global_step=i, latest_filename='hourly_checkpoint')\n        ...\n        if best:\n            path_checkpoint_file = saver_best.save(sess, 'checkpoint_directory/best/model', global_step=i, latest_filename='best_checkpoint')\n        ...", "body": "**Operating System:** macOS Sierra\r\n\r\n**Steps to Reproduce:**\r\n1. In a session, create two Savers.\r\n2. Let one of the Saver save the variables.\r\n3. Let the other Saver save the variables in a different directory from the first Saver's destination directory.\r\n\r\n**Result:**\r\nAn Info message is displayed indicating that a Checkpoint State file does not exist (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/training/saver.py#L738). And TensorFlow creates a new Checkpoint State file. This happens every time the 2nd Saver saves the variables.\r\n\r\n**Expected Result:**\r\nThe 2nd Saver's Checkpoint State file should be recognized.\r\n\r\n**Code to Reproduce:**\r\n```\r\nwith tf.Session(graph=graph) as sess:\r\n    ...\r\n    saver_best = tf.train.Saver()\r\n    saver_hourly = tf.train.Saver(max_to_keep=None)  \r\n    ...\r\n    for i in range(max_step):\r\n        ...\r\n        if last_hourly_save + datetime.timedelta(hours=1) < datetime.datetime.now():                     \r\n            path_checkpoint_file = saver_hourly.save(sess, 'checkpoint_directory/hourly/model', global_step=i, latest_filename='hourly_checkpoint')\r\n        ...\r\n        if best:\r\n            path_checkpoint_file = saver_best.save(sess, 'checkpoint_directory/best/model', global_step=i, latest_filename='best_checkpoint')\r\n        ...\r\n```"}
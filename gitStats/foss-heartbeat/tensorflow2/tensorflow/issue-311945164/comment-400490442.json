{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/400490442", "html_url": "https://github.com/tensorflow/tensorflow/pull/18293#issuecomment-400490442", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18293", "id": 400490442, "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDQ5MDQ0Mg==", "user": {"login": "rongjiecomputer", "id": 13115060, "node_id": "MDQ6VXNlcjEzMTE1MDYw", "avatar_url": "https://avatars2.githubusercontent.com/u/13115060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rongjiecomputer", "html_url": "https://github.com/rongjiecomputer", "followers_url": "https://api.github.com/users/rongjiecomputer/followers", "following_url": "https://api.github.com/users/rongjiecomputer/following{/other_user}", "gists_url": "https://api.github.com/users/rongjiecomputer/gists{/gist_id}", "starred_url": "https://api.github.com/users/rongjiecomputer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rongjiecomputer/subscriptions", "organizations_url": "https://api.github.com/users/rongjiecomputer/orgs", "repos_url": "https://api.github.com/users/rongjiecomputer/repos", "events_url": "https://api.github.com/users/rongjiecomputer/events{/privacy}", "received_events_url": "https://api.github.com/users/rongjiecomputer/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-26T23:05:00Z", "updated_at": "2018-06-26T23:05:00Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=136291\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sanjoy\">@sanjoy</a> That is brilliant! I think that will work.</p>\n<p>Also note that LLVM Support library need to be handled separately as that directory have Unix and Windows specific code.</p>\n<pre><code>cc_library(\n    name = \"support\",\n    srcs = glob([\n        \"lib/Support/*.c\",\n        \"lib/Support/*.cpp\",\n        \"lib/Support/*.inc\",\n        \"include/llvm-c/*.h\",\n        \"include/llvm/CodeGen/MachineValueType.h\",\n        \"include/llvm/BinaryFormat/COFF.h\",\n        \"include/llvm/BinaryFormat/MachO.h\",\n        \"lib/Support/*.h\",\n    ]) + select({\n        \"@org_tensorflow//tensorflow:windows\": glob([\n            \"lib/Support/Windows/*.inc\",\n            \"lib/Support/Windows/*.h\"\n        ]),\n        \"//conditions:default\": glob([\n            \"lib/Support/Unix/*.inc\",\n            \"lib/Support/Unix/*.h\",\n        ]),\n    }),\n    copts = LLVM_COPTS,\n    hdrs = glob([\n        \"include/llvm/Support/*.h\",\n        \"include/llvm/Support/*.def\",\n        \"include/llvm/Support/*.inc\",\n        \"include/llvm/ADT/*.h\",\n        \"include/llvm/Support/ELFRelocs/*.def\",\n        \"include/llvm/Support/WasmRelocs/*.def\",\n    ]) + [\n        \"include/llvm/BinaryFormat/MachO.def\",\n        \"include/llvm/Support/VCSRevision.h\",\n    ],\n    deps = [\n        \":config\",\n        \":demangle\",\n        \"@zlib_archive//:zlib\",\n    ],\n)\n</code></pre>", "body_text": "@sanjoy That is brilliant! I think that will work.\nAlso note that LLVM Support library need to be handled separately as that directory have Unix and Windows specific code.\ncc_library(\n    name = \"support\",\n    srcs = glob([\n        \"lib/Support/*.c\",\n        \"lib/Support/*.cpp\",\n        \"lib/Support/*.inc\",\n        \"include/llvm-c/*.h\",\n        \"include/llvm/CodeGen/MachineValueType.h\",\n        \"include/llvm/BinaryFormat/COFF.h\",\n        \"include/llvm/BinaryFormat/MachO.h\",\n        \"lib/Support/*.h\",\n    ]) + select({\n        \"@org_tensorflow//tensorflow:windows\": glob([\n            \"lib/Support/Windows/*.inc\",\n            \"lib/Support/Windows/*.h\"\n        ]),\n        \"//conditions:default\": glob([\n            \"lib/Support/Unix/*.inc\",\n            \"lib/Support/Unix/*.h\",\n        ]),\n    }),\n    copts = LLVM_COPTS,\n    hdrs = glob([\n        \"include/llvm/Support/*.h\",\n        \"include/llvm/Support/*.def\",\n        \"include/llvm/Support/*.inc\",\n        \"include/llvm/ADT/*.h\",\n        \"include/llvm/Support/ELFRelocs/*.def\",\n        \"include/llvm/Support/WasmRelocs/*.def\",\n    ]) + [\n        \"include/llvm/BinaryFormat/MachO.def\",\n        \"include/llvm/Support/VCSRevision.h\",\n    ],\n    deps = [\n        \":config\",\n        \":demangle\",\n        \"@zlib_archive//:zlib\",\n    ],\n)", "body": "@Sanjoy That is brilliant! I think that will work.\r\n\r\nAlso note that LLVM Support library need to be handled separately as that directory have Unix and Windows specific code.\r\n\r\n```\r\ncc_library(\r\n    name = \"support\",\r\n    srcs = glob([\r\n        \"lib/Support/*.c\",\r\n        \"lib/Support/*.cpp\",\r\n        \"lib/Support/*.inc\",\r\n        \"include/llvm-c/*.h\",\r\n        \"include/llvm/CodeGen/MachineValueType.h\",\r\n        \"include/llvm/BinaryFormat/COFF.h\",\r\n        \"include/llvm/BinaryFormat/MachO.h\",\r\n        \"lib/Support/*.h\",\r\n    ]) + select({\r\n        \"@org_tensorflow//tensorflow:windows\": glob([\r\n            \"lib/Support/Windows/*.inc\",\r\n            \"lib/Support/Windows/*.h\"\r\n        ]),\r\n        \"//conditions:default\": glob([\r\n            \"lib/Support/Unix/*.inc\",\r\n            \"lib/Support/Unix/*.h\",\r\n        ]),\r\n    }),\r\n    copts = LLVM_COPTS,\r\n    hdrs = glob([\r\n        \"include/llvm/Support/*.h\",\r\n        \"include/llvm/Support/*.def\",\r\n        \"include/llvm/Support/*.inc\",\r\n        \"include/llvm/ADT/*.h\",\r\n        \"include/llvm/Support/ELFRelocs/*.def\",\r\n        \"include/llvm/Support/WasmRelocs/*.def\",\r\n    ]) + [\r\n        \"include/llvm/BinaryFormat/MachO.def\",\r\n        \"include/llvm/Support/VCSRevision.h\",\r\n    ],\r\n    deps = [\r\n        \":config\",\r\n        \":demangle\",\r\n        \"@zlib_archive//:zlib\",\r\n    ],\r\n)\r\n```"}
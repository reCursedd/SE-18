{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14170", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14170/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14170/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14170/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14170", "id": 270520490, "node_id": "MDU6SXNzdWUyNzA1MjA0OTA=", "number": 14170, "title": "List of functions could be improved with \"const std::string&\" or \"std::string&\" instead \"std::string\"", "user": {"login": "orpillar", "id": 33270570, "node_id": "MDQ6VXNlcjMzMjcwNTcw", "avatar_url": "https://avatars2.githubusercontent.com/u/33270570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/orpillar", "html_url": "https://github.com/orpillar", "followers_url": "https://api.github.com/users/orpillar/followers", "following_url": "https://api.github.com/users/orpillar/following{/other_user}", "gists_url": "https://api.github.com/users/orpillar/gists{/gist_id}", "starred_url": "https://api.github.com/users/orpillar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/orpillar/subscriptions", "organizations_url": "https://api.github.com/users/orpillar/orgs", "repos_url": "https://api.github.com/users/orpillar/repos", "events_url": "https://api.github.com/users/orpillar/events{/privacy}", "received_events_url": "https://api.github.com/users/orpillar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-11-02T03:23:27Z", "updated_at": "2017-11-03T01:45:06Z", "closed_at": "2017-11-03T01:45:06Z", "author_association": "NONE", "body_html": "<p>After a quick scan in the latest tensorflow \"master\" branch, here is the list of functions which could improve passing parameter by \"std::string\":</p>\n<p>After a quick scan in the latest tensorflow \"master\" branch, here is the list of functions which could improve passing parameter by \"std::string\":</p>\n<ol>\n<li>c/c_api_function.cc:  static string Normalize(string name);<br>\nSuggestion: string&amp; name;</li>\n<li>c/c_api_function.cc:string NodeNameMapping::Normalize(string name) {<br>\nSuggestion: string&amp; name</li>\n</ol>\n<h1></h1>\n<ol start=\"3\">\n<li>compiler/jit/graph_to_functiondef.cc:  string NormalizeHelper(string name) const;<br>\nSuggestion: string&amp; name</li>\n<li>compiler/jit/graph_to_functiondef.cc:  string UniquifyHelper(string name);<br>\nSuggestion: const string&amp;</li>\n<li>compiler/jit/graph_to_functiondef.cc:string NodeNameMapping::NormalizeHelper(string name) const {<br>\nSuggestion: string&amp; name</li>\n<li>compiler/jit/graph_to_functiondef.cc:string NodeNameMapping::UniquifyHelper(string name) {<br>\nSuggestion: const string&amp;</li>\n<li>compiler/tf2xla/dump_graph.cc:string MakeUniquePath(string name) {<br>\nSuggestion: string&amp; name</li>\n<li>compiler/xla/service/llvm_ir/llvm_util.cc:string IrName(string a) {<br>\nSuggestion: string&amp; a</li>\n<li>compiler/xla/service/llvm_ir/llvm_util.cc:string SanitizeFunctionName(string function_name) {<br>\nSuggestion: string&amp; function_name</li>\n<li>compiler/xla/service/llvm_ir/llvm_util.h:string IrName(string a);<br>\nSuggestion: string&amp; a</li>\n<li>compiler/xla/service/llvm_ir/llvm_util.h:string SanitizeFunctionName(string function_name);<br>\nSuggestion: string&amp; function_name</li>\n<li>compiler/xla/util.cc:string SanitizeFileName(string file_name) {<br>\nSuggestion: string&amp; file_name</li>\n<li>compiler/xla/util.h:string SanitizeFileName(string file_name);<br>\nSuggestion: string&amp; file_name</li>\n</ol>\n<h1></h1>\n<ol start=\"14\">\n<li>contrib/verbs/rdma.cc:RdmaBuffer::RdmaBuffer(RdmaChannel* channel, string name)<br>\nSuggestion: const string&amp; name</li>\n<li>contrib/verbs/rdma.cc:RdmaAckBuffer::RdmaAckBuffer(RdmaChannel* channel, string name)<br>\nSuggestion: const string&amp; name</li>\n<li>contrib/verbs/rdma.cc:RdmaMessageBuffer::RdmaMessageBuffer(RdmaChannel* channel, string name)<br>\nSuggestion: const string&amp; name</li>\n<li>contrib/verbs/rdma.cc:RdmaTensorBuffer::RdmaTensorBuffer(RdmaChannel* channel, string name)<br>\nSuggestion: const string&amp; name</li>\n<li>contrib/verbs/rdma.h:  explicit RdmaBuffer(RdmaChannel* channel, string name);<br>\nSuggestion: const string&amp; name</li>\n<li>contrib/verbs/rdma.h:  explicit RdmaAckBuffer(RdmaChannel* channel, string name);<br>\nSuggestion: const string&amp; name</li>\n<li>contrib/verbs/rdma.h:  explicit RdmaMessageBuffer(RdmaChannel* channel, string name);<br>\nSuggestion: const string&amp; name</li>\n<li>contrib/verbs/rdma.h:  explicit RdmaTensorBuffer(RdmaChannel* channel, string name);<br>\nSuggestion: const string&amp; name</li>\n</ol>\n<h1></h1>\n<ol start=\"22\">\n<li>core/common_runtime/step_stats_collector.cc:static int ExtractGpuWithStreamAll(string device_name) {<br>\nSuggestion: string&amp; device_name</li>\n<li>core/common_runtime/step_stats_collector.cc:static int ExtractGpuWithoutStream(string device_name) {<br>\nSuggestion: string&amp; device_name</li>\n<li>core/kernels/ops_util.cc:string SanitizeThreadSuffix(string suffix) {<br>\nSuggestion: const string&amp; suffix</li>\n<li>core/kernels/ops_util.h:string SanitizeThreadSuffix(string suffix);<br>\nSuggestion: const string&amp; suffix</li>\n<li>core/kernels/xsmm_conv2d.cc:static void chk_libxsmm_err(libxsmm_dnn_err_t status, string msg) {<br>\nSuggestion: const string&amp; msg</li>\n</ol>\n<h1></h1>\n<ol start=\"27\">\n<li>stream_executor/platform.cc:PlatformKind PlatformKindFromString(string kind) {<br>\nSuggestion: const string&amp; kind</li>\n<li>stream_executor/platform.h:PlatformKind PlatformKindFromString(string platform_string);<br>\nSuggestion: const string&amp; platform_string</li>\n</ol>", "body_text": "After a quick scan in the latest tensorflow \"master\" branch, here is the list of functions which could improve passing parameter by \"std::string\":\nAfter a quick scan in the latest tensorflow \"master\" branch, here is the list of functions which could improve passing parameter by \"std::string\":\n\nc/c_api_function.cc:  static string Normalize(string name);\nSuggestion: string& name;\nc/c_api_function.cc:string NodeNameMapping::Normalize(string name) {\nSuggestion: string& name\n\n\n\ncompiler/jit/graph_to_functiondef.cc:  string NormalizeHelper(string name) const;\nSuggestion: string& name\ncompiler/jit/graph_to_functiondef.cc:  string UniquifyHelper(string name);\nSuggestion: const string&\ncompiler/jit/graph_to_functiondef.cc:string NodeNameMapping::NormalizeHelper(string name) const {\nSuggestion: string& name\ncompiler/jit/graph_to_functiondef.cc:string NodeNameMapping::UniquifyHelper(string name) {\nSuggestion: const string&\ncompiler/tf2xla/dump_graph.cc:string MakeUniquePath(string name) {\nSuggestion: string& name\ncompiler/xla/service/llvm_ir/llvm_util.cc:string IrName(string a) {\nSuggestion: string& a\ncompiler/xla/service/llvm_ir/llvm_util.cc:string SanitizeFunctionName(string function_name) {\nSuggestion: string& function_name\ncompiler/xla/service/llvm_ir/llvm_util.h:string IrName(string a);\nSuggestion: string& a\ncompiler/xla/service/llvm_ir/llvm_util.h:string SanitizeFunctionName(string function_name);\nSuggestion: string& function_name\ncompiler/xla/util.cc:string SanitizeFileName(string file_name) {\nSuggestion: string& file_name\ncompiler/xla/util.h:string SanitizeFileName(string file_name);\nSuggestion: string& file_name\n\n\n\ncontrib/verbs/rdma.cc:RdmaBuffer::RdmaBuffer(RdmaChannel* channel, string name)\nSuggestion: const string& name\ncontrib/verbs/rdma.cc:RdmaAckBuffer::RdmaAckBuffer(RdmaChannel* channel, string name)\nSuggestion: const string& name\ncontrib/verbs/rdma.cc:RdmaMessageBuffer::RdmaMessageBuffer(RdmaChannel* channel, string name)\nSuggestion: const string& name\ncontrib/verbs/rdma.cc:RdmaTensorBuffer::RdmaTensorBuffer(RdmaChannel* channel, string name)\nSuggestion: const string& name\ncontrib/verbs/rdma.h:  explicit RdmaBuffer(RdmaChannel* channel, string name);\nSuggestion: const string& name\ncontrib/verbs/rdma.h:  explicit RdmaAckBuffer(RdmaChannel* channel, string name);\nSuggestion: const string& name\ncontrib/verbs/rdma.h:  explicit RdmaMessageBuffer(RdmaChannel* channel, string name);\nSuggestion: const string& name\ncontrib/verbs/rdma.h:  explicit RdmaTensorBuffer(RdmaChannel* channel, string name);\nSuggestion: const string& name\n\n\n\ncore/common_runtime/step_stats_collector.cc:static int ExtractGpuWithStreamAll(string device_name) {\nSuggestion: string& device_name\ncore/common_runtime/step_stats_collector.cc:static int ExtractGpuWithoutStream(string device_name) {\nSuggestion: string& device_name\ncore/kernels/ops_util.cc:string SanitizeThreadSuffix(string suffix) {\nSuggestion: const string& suffix\ncore/kernels/ops_util.h:string SanitizeThreadSuffix(string suffix);\nSuggestion: const string& suffix\ncore/kernels/xsmm_conv2d.cc:static void chk_libxsmm_err(libxsmm_dnn_err_t status, string msg) {\nSuggestion: const string& msg\n\n\n\nstream_executor/platform.cc:PlatformKind PlatformKindFromString(string kind) {\nSuggestion: const string& kind\nstream_executor/platform.h:PlatformKind PlatformKindFromString(string platform_string);\nSuggestion: const string& platform_string", "body": "After a quick scan in the latest tensorflow \"master\" branch, here is the list of functions which could improve passing parameter by \"std::string\":\r\n\r\nAfter a quick scan in the latest tensorflow \"master\" branch, here is the list of functions which could improve passing parameter by \"std::string\":\r\n\r\n1. c/c_api_function.cc:  static string Normalize(string name);\r\n   Suggestion: string& name;\r\n2. c/c_api_function.cc:string NodeNameMapping::Normalize(string name) {\r\n   Suggestion: string& name\r\n#\r\n3. compiler/jit/graph_to_functiondef.cc:  string NormalizeHelper(string name) const;\r\n   Suggestion: string& name\r\n4. compiler/jit/graph_to_functiondef.cc:  string UniquifyHelper(string name);\r\n   Suggestion: const string&\r\n5. compiler/jit/graph_to_functiondef.cc:string NodeNameMapping::NormalizeHelper(string name) const {\r\n   Suggestion: string& name\r\n6. compiler/jit/graph_to_functiondef.cc:string NodeNameMapping::UniquifyHelper(string name) {\r\n   Suggestion: const string&\r\n7. compiler/tf2xla/dump_graph.cc:string MakeUniquePath(string name) {\r\n   Suggestion: string& name\r\n8. compiler/xla/service/llvm_ir/llvm_util.cc:string IrName(string a) {\r\n    Suggestion: string& a\r\n9. compiler/xla/service/llvm_ir/llvm_util.cc:string SanitizeFunctionName(string function_name) {\r\n    Suggestion: string& function_name\r\n10. compiler/xla/service/llvm_ir/llvm_util.h:string IrName(string a);\r\n    Suggestion: string& a\r\n11. compiler/xla/service/llvm_ir/llvm_util.h:string SanitizeFunctionName(string function_name);\r\n    Suggestion: string& function_name\r\n12. compiler/xla/util.cc:string SanitizeFileName(string file_name) {\r\n    Suggestion: string& file_name\r\n13. compiler/xla/util.h:string SanitizeFileName(string file_name);\r\n    Suggestion: string& file_name\r\n#\r\n14. contrib/verbs/rdma.cc:RdmaBuffer::RdmaBuffer(RdmaChannel* channel, string name)\r\n    Suggestion: const string& name\r\n15. contrib/verbs/rdma.cc:RdmaAckBuffer::RdmaAckBuffer(RdmaChannel* channel, string name)\r\n    Suggestion: const string& name\r\n16. contrib/verbs/rdma.cc:RdmaMessageBuffer::RdmaMessageBuffer(RdmaChannel* channel, string name)\r\n    Suggestion: const string& name\r\n17. contrib/verbs/rdma.cc:RdmaTensorBuffer::RdmaTensorBuffer(RdmaChannel* channel, string name)\r\n    Suggestion: const string& name\r\n18. contrib/verbs/rdma.h:  explicit RdmaBuffer(RdmaChannel* channel, string name);\r\n    Suggestion: const string& name\r\n19. contrib/verbs/rdma.h:  explicit RdmaAckBuffer(RdmaChannel* channel, string name);\r\n    Suggestion: const string& name\r\n20. contrib/verbs/rdma.h:  explicit RdmaMessageBuffer(RdmaChannel* channel, string name);\r\n    Suggestion: const string& name\r\n21. contrib/verbs/rdma.h:  explicit RdmaTensorBuffer(RdmaChannel* channel, string name);\r\n    Suggestion: const string& name\r\n#\r\n22. core/common_runtime/step_stats_collector.cc:static int ExtractGpuWithStreamAll(string device_name) {\r\n    Suggestion: string& device_name\r\n23. core/common_runtime/step_stats_collector.cc:static int ExtractGpuWithoutStream(string device_name) {\r\n    Suggestion: string& device_name\r\n24. core/kernels/ops_util.cc:string SanitizeThreadSuffix(string suffix) {\r\n    Suggestion: const string& suffix\r\n25. core/kernels/ops_util.h:string SanitizeThreadSuffix(string suffix);\r\n    Suggestion: const string& suffix\r\n26. core/kernels/xsmm_conv2d.cc:static void chk_libxsmm_err(libxsmm_dnn_err_t status, string msg) {\r\n    Suggestion: const string& msg\r\n#\r\n27. stream_executor/platform.cc:PlatformKind PlatformKindFromString(string kind) {\r\n    Suggestion: const string& kind\r\n28. stream_executor/platform.h:PlatformKind PlatformKindFromString(string platform_string);\r\n    Suggestion: const string& platform_string\r\n"}
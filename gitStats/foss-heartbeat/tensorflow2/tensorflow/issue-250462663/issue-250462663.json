{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12307", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12307/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12307/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12307/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12307", "id": 250462663, "node_id": "MDU6SXNzdWUyNTA0NjI2NjM=", "number": 12307, "title": "Exception when shutting down TensorFlow after running some ops", "user": {"login": "wchargin", "id": 4317806, "node_id": "MDQ6VXNlcjQzMTc4MDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4317806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wchargin", "html_url": "https://github.com/wchargin", "followers_url": "https://api.github.com/users/wchargin/followers", "following_url": "https://api.github.com/users/wchargin/following{/other_user}", "gists_url": "https://api.github.com/users/wchargin/gists{/gist_id}", "starred_url": "https://api.github.com/users/wchargin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wchargin/subscriptions", "organizations_url": "https://api.github.com/users/wchargin/orgs", "repos_url": "https://api.github.com/users/wchargin/repos", "events_url": "https://api.github.com/users/wchargin/events{/privacy}", "received_events_url": "https://api.github.com/users/wchargin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-15T23:00:09Z", "updated_at": "2017-08-16T16:55:28Z", "closed_at": "2017-08-16T16:55:28Z", "author_association": "MEMBER", "body_html": "<h2>Error</h2>\n<p>The following error appears when exiting the Python session after a TensorFlow op has been run in a session:</p>\n<pre><code>Exception TypeError: \"'NoneType' object is not callable\" in &lt;bound method Context.__del__ of &lt;tensorflow.python.eager.context.Context object at 0x7fcd7f98b450&gt;&gt; ignored\n</code></pre>\n<p>The Python session still exits cleanly (status 0).</p>\n<h2>Repro</h2>\n<pre><code>$ cat test.py\nimport sys\nimport tensorflow as tf\ntf.Session().run(tf.square(0))\nsys.stderr.write(\"Done.\\n\")\n$ . tensorflow-nightly-20170814/bin/activate\n$ python test.py 2&gt;&amp;1 | grep -Fv 'could speed up CPU computations'\nDone.\n$ . tensorflow-nightly-20170815/bin/activate\n$ python test.py 2&gt;&amp;1 | grep -Fv 'could speed up CPU computations'\nDone.\nException TypeError: \"'NoneType' object is not callable\" in &lt;bound method Context.__del__ of &lt;tensorflow.python.eager.context.Context object at 0x7f9d8795c450&gt;&gt; ignored\n</code></pre>\n<p>Most ops seem to trigger this: I tried <code>tf.square</code>, <code>tf.add</code>, and <code>tf.summary.scalar</code> and <code>tf.summary.text</code>, and they all do. However, <code>tf.constant</code> does not.</p>\n<h2>Introduction</h2>\n<p>Bug introduced between 20170814 and 20170815 nightlies. (In particular, <a href=\"http://ci.tensorflow.org/view/Nightly/job/nightly-matrix-cpu/TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=PYTHON2,label=cpu-slave/588/\" rel=\"nofollow\">build 588</a> does not have the bug, while <a href=\"http://ci.tensorflow.org/view/Nightly/job/nightly-matrix-cpu/TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=PYTHON2,label=cpu-slave/589/\" rel=\"nofollow\">build 589</a> does.) The changelog for these two builds is <a class=\"commit-link\" href=\"https://github.com/tensorflow/tensorflow/compare/b93fd37e143bcdd6339f8e6081c948384a262e0b...1d33a59a9d554be863cfb06e9aa0ce1fa33ce9e6\"><tt>b93fd37...1d33a59</tt></a>, which does include changes to eager.</p>", "body_text": "Error\nThe following error appears when exiting the Python session after a TensorFlow op has been run in a session:\nException TypeError: \"'NoneType' object is not callable\" in <bound method Context.__del__ of <tensorflow.python.eager.context.Context object at 0x7fcd7f98b450>> ignored\n\nThe Python session still exits cleanly (status 0).\nRepro\n$ cat test.py\nimport sys\nimport tensorflow as tf\ntf.Session().run(tf.square(0))\nsys.stderr.write(\"Done.\\n\")\n$ . tensorflow-nightly-20170814/bin/activate\n$ python test.py 2>&1 | grep -Fv 'could speed up CPU computations'\nDone.\n$ . tensorflow-nightly-20170815/bin/activate\n$ python test.py 2>&1 | grep -Fv 'could speed up CPU computations'\nDone.\nException TypeError: \"'NoneType' object is not callable\" in <bound method Context.__del__ of <tensorflow.python.eager.context.Context object at 0x7f9d8795c450>> ignored\n\nMost ops seem to trigger this: I tried tf.square, tf.add, and tf.summary.scalar and tf.summary.text, and they all do. However, tf.constant does not.\nIntroduction\nBug introduced between 20170814 and 20170815 nightlies. (In particular, build 588 does not have the bug, while build 589 does.) The changelog for these two builds is b93fd37...1d33a59, which does include changes to eager.", "body": "## Error\r\n\r\nThe following error appears when exiting the Python session after a TensorFlow op has been run in a session:\r\n```\r\nException TypeError: \"'NoneType' object is not callable\" in <bound method Context.__del__ of <tensorflow.python.eager.context.Context object at 0x7fcd7f98b450>> ignored\r\n```\r\n\r\nThe Python session still exits cleanly (status 0).\r\n\r\n## Repro\r\n\r\n```\r\n$ cat test.py\r\nimport sys\r\nimport tensorflow as tf\r\ntf.Session().run(tf.square(0))\r\nsys.stderr.write(\"Done.\\n\")\r\n$ . tensorflow-nightly-20170814/bin/activate\r\n$ python test.py 2>&1 | grep -Fv 'could speed up CPU computations'\r\nDone.\r\n$ . tensorflow-nightly-20170815/bin/activate\r\n$ python test.py 2>&1 | grep -Fv 'could speed up CPU computations'\r\nDone.\r\nException TypeError: \"'NoneType' object is not callable\" in <bound method Context.__del__ of <tensorflow.python.eager.context.Context object at 0x7f9d8795c450>> ignored\r\n```\r\n\r\nMost ops seem to trigger this: I tried `tf.square`, `tf.add`, and `tf.summary.scalar` and `tf.summary.text`, and they all do. However, `tf.constant` does not.\r\n\r\n## Introduction\r\n\r\nBug introduced between 20170814 and 20170815 nightlies. (In particular, [build 588] does not have the bug, while [build 589] does.) The changelog for these two builds is b93fd37e143bcdd6339f8e6081c948384a262e0b...1d33a59a9d554be863cfb06e9aa0ce1fa33ce9e6, which does include changes to eager.\r\n\r\n[build 588]: http://ci.tensorflow.org/view/Nightly/job/nightly-matrix-cpu/TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=PYTHON2,label=cpu-slave/588/\r\n[build 589]: http://ci.tensorflow.org/view/Nightly/job/nightly-matrix-cpu/TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=PIP,TF_BUILD_PYTHON_VERSION=PYTHON2,label=cpu-slave/589/\r\n"}
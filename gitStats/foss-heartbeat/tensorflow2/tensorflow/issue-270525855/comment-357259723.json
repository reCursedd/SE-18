{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/357259723", "html_url": "https://github.com/tensorflow/tensorflow/issues/14171#issuecomment-357259723", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14171", "id": 357259723, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzI1OTcyMw==", "user": {"login": "Overdrivr", "id": 1294805, "node_id": "MDQ6VXNlcjEyOTQ4MDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1294805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Overdrivr", "html_url": "https://github.com/Overdrivr", "followers_url": "https://api.github.com/users/Overdrivr/followers", "following_url": "https://api.github.com/users/Overdrivr/following{/other_user}", "gists_url": "https://api.github.com/users/Overdrivr/gists{/gist_id}", "starred_url": "https://api.github.com/users/Overdrivr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Overdrivr/subscriptions", "organizations_url": "https://api.github.com/users/Overdrivr/orgs", "repos_url": "https://api.github.com/users/Overdrivr/repos", "events_url": "https://api.github.com/users/Overdrivr/events{/privacy}", "received_events_url": "https://api.github.com/users/Overdrivr/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-12T14:57:12Z", "updated_at": "2018-01-12T15:18:12Z", "author_association": "NONE", "body_html": "<p>I'm currently trying to run your code on a Windows 10 machine, with 2 NVidia GeForce GTX 1070.<br>\nThe <a href=\"https://github.com/tensorflow/tensorflow/issues/15412\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/15412/hovercard\">memory_stats</a> op is not yet available on windows, so I used the following strategy to get an estimate of used VRAM, could you please comment if this approach is correct ?</p>\n<p>I have removed the mem_stats op, and allowed growth of GPU memory allocation with</p>\n<pre><code>gpu_options = tf.GPUOptions(allow_growth=True)\nwith tf.Session(config=tf.ConfigProto(gpu_options=gpu_options)) as session:\n</code></pre>\n<p>Then using a tool like GPU-Z, I'm plotting GPU usage. Of course this gives me the memory allocated by TF, not the amount it is truly using (which should be less than that I guess).</p>\n<p>The GPU <code>Memory Used</code> is at 352 MB at rest, after starting the script it climbs up to 1623MB (if you remove the initial 352MB, that leaves approximately ~ 1.2GB allocated by TF).</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/1294805/34879708-68927fe6-f7ae-11e7-83d7-869f988c4edb.png\"><img src=\"https://user-images.githubusercontent.com/1294805/34879708-68927fe6-f7ae-11e7-83d7-869f988c4edb.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>\n<p>The script has not yet reached the last batch. How long does it take approximately to complete ?</p>\n<h3>Edit</h3>\n<p>It's now in epoch 2 and VRAM is still at 1623MB</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/1294805/34881545-251cef84-f7b4-11e7-96d0-f368b284217f.png\"><img src=\"https://user-images.githubusercontent.com/1294805/34881545-251cef84-f7b4-11e7-96d0-f368b284217f.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>", "body_text": "I'm currently trying to run your code on a Windows 10 machine, with 2 NVidia GeForce GTX 1070.\nThe memory_stats op is not yet available on windows, so I used the following strategy to get an estimate of used VRAM, could you please comment if this approach is correct ?\nI have removed the mem_stats op, and allowed growth of GPU memory allocation with\ngpu_options = tf.GPUOptions(allow_growth=True)\nwith tf.Session(config=tf.ConfigProto(gpu_options=gpu_options)) as session:\n\nThen using a tool like GPU-Z, I'm plotting GPU usage. Of course this gives me the memory allocated by TF, not the amount it is truly using (which should be less than that I guess).\nThe GPU Memory Used is at 352 MB at rest, after starting the script it climbs up to 1623MB (if you remove the initial 352MB, that leaves approximately ~ 1.2GB allocated by TF).\n\nThe script has not yet reached the last batch. How long does it take approximately to complete ?\nEdit\nIt's now in epoch 2 and VRAM is still at 1623MB", "body": "I'm currently trying to run your code on a Windows 10 machine, with 2 NVidia GeForce GTX 1070.\r\nThe [memory_stats](https://github.com/tensorflow/tensorflow/issues/15412) op is not yet available on windows, so I used the following strategy to get an estimate of used VRAM, could you please comment if this approach is correct ?\r\n\r\nI have removed the mem_stats op, and allowed growth of GPU memory allocation with\r\n\r\n```\r\ngpu_options = tf.GPUOptions(allow_growth=True)\r\nwith tf.Session(config=tf.ConfigProto(gpu_options=gpu_options)) as session:\r\n```\r\n\r\nThen using a tool like GPU-Z, I'm plotting GPU usage. Of course this gives me the memory allocated by TF, not the amount it is truly using (which should be less than that I guess).\r\n\r\nThe GPU `Memory Used` is at 352 MB at rest, after starting the script it climbs up to 1623MB (if you remove the initial 352MB, that leaves approximately ~ 1.2GB allocated by TF).\r\n\r\n![image](https://user-images.githubusercontent.com/1294805/34879708-68927fe6-f7ae-11e7-83d7-869f988c4edb.png)\r\n\r\nThe script has not yet reached the last batch. How long does it take approximately to complete ?\r\n\r\n### Edit\r\nIt's now in epoch 2 and VRAM is still at 1623MB\r\n\r\n![image](https://user-images.githubusercontent.com/1294805/34881545-251cef84-f7b4-11e7-96d0-f368b284217f.png)\r\n"}
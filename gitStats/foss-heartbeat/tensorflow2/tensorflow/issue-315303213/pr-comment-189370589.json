{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/189370589", "pull_request_review_id": 121544229, "id": 189370589, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4OTM3MDU4OQ==", "diff_hunk": "@@ -3746,5 +3746,49 @@ def testSobelEdges5x3x4x2(self):\n       self.assertAllClose(expected_batch, actual_sobel)\n \n \n+class DecodeImageTest(test_util.TensorFlowTestCase):\n+\n+  def testJpegUint16(self):\n+    with self.test_session(use_gpu=True) as sess:\n+      base = \"tensorflow/core/lib/jpeg/testdata\"\n+      jpeg0 = io_ops.read_file(os.path.join(base, \"jpeg_merge_test1.jpg\"))\n+      image0 = image_ops.decode_image(jpeg0, dtype=dtypes.uint16)\n+      image1 = image_ops.convert_image_dtype(image_ops.decode_jpeg(jpeg0),\n+                                             dtypes.uint16)\n+      image0, image1 = sess.run([image0, image1])\n+      self.assertAllEqual(image0, image1)\n+\n+  def testPngUint16(self):\n+    with self.test_session(use_gpu=True) as sess:\n+      base = \"tensorflow/core/lib/png/testdata\"\n+      png0 = io_ops.read_file(os.path.join(base, \"lena_rgba.png\"))\n+      image0 = image_ops.decode_image(png0, dtype=dtypes.uint16)\n+      image1 = image_ops.convert_image_dtype(image_ops.decode_png(png0,\n+                                             dtype=dtypes.uint16),\n+                                             dtypes.uint16)\n+      image0, image1 = sess.run([image0, image1])\n+      self.assertAllEqual(image0, image1)\n+\n+  def testGifUint16(self):\n+    with self.test_session(use_gpu=True) as sess:\n+      base = \"tensorflow/core/lib/gif/testdata\"\n+      gif0 = io_ops.read_file(os.path.join(base, \"scan.gif\"))\n+      image0 = image_ops.decode_image(gif0, dtype=dtypes.uint16)\n+      image1 = image_ops.convert_image_dtype(image_ops.decode_gif(gif0),\n+                                             dtypes.uint16)\n+      image0, image1 = sess.run([image0, image1])\n+      self.assertAllEqual(image0, image1)\n+\n+  def testBmpUint16(self):\n+    with self.test_session(use_gpu=True) as sess:\n+      base = \"tensorflow/core/lib/bmp/testdata\"\n+      bmp0 = io_ops.read_file(os.path.join(base, \"lena.bmp\"))\n+      image0 = image_ops.decode_image(bmp0, dtype=dtypes.uint16)\n+      image1 = image_ops.convert_image_dtype(image_ops.decode_bmp(bmp0),\n+                                             dtypes.uint16)\n+      image0, image1 = sess.run([image0, image1])\n+      self.assertAllEqual(image0, image1)", "path": "tensorflow/python/ops/image_ops_test.py", "position": 44, "original_position": 45, "commit_id": "eee0aebe1bb0313e1bc5a841aded31d65123ca59", "original_commit_id": "b2a5d44a34adc128c34d04b3b21cddb741874408", "user": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "body": "Can you also test the float32 case? I think then we're happy.", "created_at": "2018-05-18T19:24:21Z", "updated_at": "2018-06-05T01:46:14Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/18628#discussion_r189370589", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18628", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/189370589"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/18628#discussion_r189370589"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18628"}}, "body_html": "<p>Can you also test the float32 case? I think then we're happy.</p>", "body_text": "Can you also test the float32 case? I think then we're happy."}
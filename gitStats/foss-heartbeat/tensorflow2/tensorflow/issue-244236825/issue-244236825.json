{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11630", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11630/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11630/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11630/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/11630", "id": 244236825, "node_id": "MDExOlB1bGxSZXF1ZXN0MTMxNDYzNzc3", "number": 11630, "title": "Add GPU implementation for tf.segment_sum.", "user": {"login": "tjingrant", "id": 6410074, "node_id": "MDQ6VXNlcjY0MTAwNzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6410074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjingrant", "html_url": "https://github.com/tjingrant", "followers_url": "https://api.github.com/users/tjingrant/followers", "following_url": "https://api.github.com/users/tjingrant/following{/other_user}", "gists_url": "https://api.github.com/users/tjingrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjingrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjingrant/subscriptions", "organizations_url": "https://api.github.com/users/tjingrant/orgs", "repos_url": "https://api.github.com/users/tjingrant/repos", "events_url": "https://api.github.com/users/tjingrant/events{/privacy}", "received_events_url": "https://api.github.com/users/tjingrant/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2017-07-20T03:39:37Z", "updated_at": "2017-09-07T17:07:01Z", "closed_at": "2017-09-05T16:36:08Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/11630", "html_url": "https://github.com/tensorflow/tensorflow/pull/11630", "diff_url": "https://github.com/tensorflow/tensorflow/pull/11630.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/11630.patch"}, "body_html": "<p>As per <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"240035606\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/11228\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/11228/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/11228\">#11228</a>, a GPU version of segment sum has been created.</p>\n<h2>Performance</h2>\n<p>On a Tesla K40c GPU, the following performance tests have been performed.</p>\n<ul>\n<li>The test case sizes are represented using 3-tuples of integers. The first two integers correspond to the outer and inner dimension of the input data and the last integer corresponds to the outer dimension of the output data, which is also the total number of segments.</li>\n<li>The first three rows of data are obtained by running reductions on float32 input type whereas the last three rows of data are obtained by running reductions on float64 input type.</li>\n<li>We use the GPU version of unsorted segment reduction as the baseline.</li>\n<li>During experiments, they share the same input data and outputs are compared for consistency.</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>(1024, 1024, 128)</th>\n<th>(2048, 2048, 256)</th>\n<th>(4096, 4096, 512)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>t_unsorted</td>\n<td>84.942us</td>\n<td>332.12us</td>\n<td>1.3170ms</td>\n</tr>\n<tr>\n<td>t_sorted</td>\n<td>71.047us</td>\n<td>264.16us</td>\n<td>1.0391ms</td>\n</tr>\n<tr>\n<td>speedup</td>\n<td>1.20</td>\n<td>1.26</td>\n<td>1.27</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>t_unsorted</td>\n<td>160.69us</td>\n<td>594.93us</td>\n<td>2.2895ms</td>\n</tr>\n<tr>\n<td>t_sorted</td>\n<td>106.94us</td>\n<td>395.19us</td>\n<td>1.5662ms</td>\n</tr>\n<tr>\n<td>speedup</td>\n<td>1.50</td>\n<td>1.51</td>\n<td>1.46</td>\n</tr>\n</tbody>\n</table>\n<h2>Known Limitations:</h2>\n<ul>\n<li>We do not check segment_id to make sure that they are within [0, num_outputs-1].</li>\n<li>We do not verify that segment_id is increasing.</li>\n</ul>", "body_text": "As per #11228, a GPU version of segment sum has been created.\nPerformance\nOn a Tesla K40c GPU, the following performance tests have been performed.\n\nThe test case sizes are represented using 3-tuples of integers. The first two integers correspond to the outer and inner dimension of the input data and the last integer corresponds to the outer dimension of the output data, which is also the total number of segments.\nThe first three rows of data are obtained by running reductions on float32 input type whereas the last three rows of data are obtained by running reductions on float64 input type.\nWe use the GPU version of unsorted segment reduction as the baseline.\nDuring experiments, they share the same input data and outputs are compared for consistency.\n\n\n\n\n\n(1024, 1024, 128)\n(2048, 2048, 256)\n(4096, 4096, 512)\n\n\n\n\nt_unsorted\n84.942us\n332.12us\n1.3170ms\n\n\nt_sorted\n71.047us\n264.16us\n1.0391ms\n\n\nspeedup\n1.20\n1.26\n1.27\n\n\n\n\n\n\n\n\nt_unsorted\n160.69us\n594.93us\n2.2895ms\n\n\nt_sorted\n106.94us\n395.19us\n1.5662ms\n\n\nspeedup\n1.50\n1.51\n1.46\n\n\n\nKnown Limitations:\n\nWe do not check segment_id to make sure that they are within [0, num_outputs-1].\nWe do not verify that segment_id is increasing.", "body": "As per #11228, a GPU version of segment sum has been created. \r\n## Performance \r\nOn a Tesla K40c GPU, the following performance tests have been performed. \r\n- The test case sizes are represented using 3-tuples of integers. The first two integers correspond to the outer and inner dimension of the input data and the last integer corresponds to the outer dimension of the output data, which is also the total number of segments. \r\n- The first three rows of data are obtained by running reductions on float32 input type whereas the last three rows of data are obtained by running reductions on float64 input type. \r\n- We use the GPU version of unsorted segment reduction as the baseline. \r\n- During experiments, they share the same input data and outputs are compared for consistency.\r\n\r\n|  | (1024, 1024, 128)            |   (2048, 2048, 256)          |    (4096, 4096, 512)         | \r\n|-------------------------------------------------------------|-------------|-------------|-------------| \r\n| t_unsorted                                                  | 84.942us    | 332.12us    | 1.3170ms    | \r\n| t_sorted                                                    | 71.047us    | 264.16us    | 1.0391ms    | \r\n| speedup                                                     | 1.20  | 1.26 | 1.27  | \r\n|                                                             |             |             |             | \r\n| t_unsorted                                                  | 160.69us    | 594.93us    | 2.2895ms    | \r\n| t_sorted                                                    | 106.94us    | 395.19us    | 1.5662ms    | \r\n| speedup                                                     | 1.50 | 1.51 | 1.46 | \r\n\r\n## Known Limitations:\r\n- We do not check segment_id to make sure that they are within [0, num_outputs-1].\r\n- We do not verify that segment_id is increasing."}
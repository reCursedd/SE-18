{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5116", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5116/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5116/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5116/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/5116", "id": 184508170, "node_id": "MDExOlB1bGxSZXF1ZXN0OTAzOTk5MDE=", "number": 5116, "title": "Fixes and improvements to docker build script and dockerfiles", "user": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2016-10-21T15:03:50Z", "updated_at": "2016-10-25T19:44:25Z", "closed_at": "2016-10-23T05:23:00Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5116", "html_url": "https://github.com/tensorflow/tensorflow/pull/5116", "diff_url": "https://github.com/tensorflow/tensorflow/pull/5116.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/5116.patch"}, "body_html": "<ol>\n<li>Clean up large Bazel build cache. Total filesystem size reduction as seen by du -sh /:<br>\ndevel image: 1.5 GB (Before: 2.9 GB; After: 1.4 GB)<br>\ndevel-gpu image: 2.3 GB (Before: 4.7 GB; After: 2.4 GB)</li>\n<li>Using nvidia-docker for GPU docker build.</li>\n<li>Upgrade Bazel version from 0.3.1 to 0.3.2.</li>\n<li>Add missing libcurl3-dev build dependency to devel images.</li>\n<li>Add scipy and sklearn to Dockerfile.devel-gpu to enhance consistency with other image types (e.g., Dockerfile.devel).</li>\n<li>Remove the obsolete and unnecessary --recurse-submodules flag for git clone.</li>\n</ol>\n<p>Related to GH issues: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"174173577\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4116\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4116/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4116\">#4116</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"174175445\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4117\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4117/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4117\">#4117</a></p>\n<p>However, not using the \"git clone --depth 1\" suggested by issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"174175445\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4117\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4117/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4117\">#4117</a>, because the size of the git repo is only reduced by about 50 MB by the \"--depth 1\" flag. This space saving is small compared to the space saving due to bazel cache removal. The complete history of the git repo can be useful for certain development purposes.<br>\nChange: 136302103</p>", "body_text": "Clean up large Bazel build cache. Total filesystem size reduction as seen by du -sh /:\ndevel image: 1.5 GB (Before: 2.9 GB; After: 1.4 GB)\ndevel-gpu image: 2.3 GB (Before: 4.7 GB; After: 2.4 GB)\nUsing nvidia-docker for GPU docker build.\nUpgrade Bazel version from 0.3.1 to 0.3.2.\nAdd missing libcurl3-dev build dependency to devel images.\nAdd scipy and sklearn to Dockerfile.devel-gpu to enhance consistency with other image types (e.g., Dockerfile.devel).\nRemove the obsolete and unnecessary --recurse-submodules flag for git clone.\n\nRelated to GH issues: #4116 and #4117\nHowever, not using the \"git clone --depth 1\" suggested by issue #4117, because the size of the git repo is only reduced by about 50 MB by the \"--depth 1\" flag. This space saving is small compared to the space saving due to bazel cache removal. The complete history of the git repo can be useful for certain development purposes.\nChange: 136302103", "body": "1) Clean up large Bazel build cache. Total filesystem size reduction as seen by du -sh /:\n  devel image: 1.5 GB (Before: 2.9 GB; After: 1.4 GB)\n  devel-gpu image: 2.3 GB (Before: 4.7 GB; After: 2.4 GB)\n2) Using nvidia-docker for GPU docker build.\n3) Upgrade Bazel version from 0.3.1 to 0.3.2.\n4) Add missing libcurl3-dev build dependency to devel images.\n5) Add scipy and sklearn to Dockerfile.devel-gpu to enhance consistency with other image types (e.g., Dockerfile.devel).\n6) Remove the obsolete and unnecessary --recurse-submodules flag for git clone.\n\nRelated to GH issues: https://github.com/tensorflow/tensorflow/issues/4116 and https://github.com/tensorflow/tensorflow/issues/4117\n\nHowever, not using the \"git clone --depth 1\" suggested by issue #4117, because the size of the git repo is only reduced by about 50 MB by the \"--depth 1\" flag. This space saving is small compared to the space saving due to bazel cache removal. The complete history of the git repo can be useful for certain development purposes.\nChange: 136302103\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13587", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13587/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13587/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13587/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13587", "id": 263951545, "node_id": "MDU6SXNzdWUyNjM5NTE1NDU=", "number": 13587, "title": "TF fails to build on PowerPC. Issues with BoringSSL.", "user": {"login": "tjingrant", "id": 6410074, "node_id": "MDQ6VXNlcjY0MTAwNzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6410074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjingrant", "html_url": "https://github.com/tjingrant", "followers_url": "https://api.github.com/users/tjingrant/followers", "following_url": "https://api.github.com/users/tjingrant/following{/other_user}", "gists_url": "https://api.github.com/users/tjingrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjingrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjingrant/subscriptions", "organizations_url": "https://api.github.com/users/tjingrant/orgs", "repos_url": "https://api.github.com/users/tjingrant/repos", "events_url": "https://api.github.com/users/tjingrant/events{/privacy}", "received_events_url": "https://api.github.com/users/tjingrant/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-10-09T16:19:14Z", "updated_at": "2018-01-12T04:37:34Z", "closed_at": "2017-10-27T01:30:41Z", "author_association": "CONTRIBUTOR", "body_html": "<hr>\n<p>BoringSSL doesn't seem to have their own issue board. So I'm guessing here's the closest alternative.</p>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04.2 LTS</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source (github master, <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/10c871ed92a1d9b36c5e2e3a674d5812c67e82a1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/10c871ed92a1d9b36c5e2e3a674d5812c67e82a1\"><tt>10c871e</tt></a>)</li>\n<li><strong>TensorFlow version (use command below)</strong>:  (doesn't compile)</li>\n<li><strong>Python version</strong>: 2.7.12</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.6.1</li>\n<li><strong>CUDA/cuDNN version</strong>: (not relevant)</li>\n<li><strong>GPU model and memory</strong>: Nvidia K40</li>\n<li><strong>Exact command to reproduce</strong>: <code>bazel --host_jvm_args=-XX:+IgnoreUnrecognizedVMOptions build -c opt --config=cuda  //tensorflow/tools/pip_package:build_pip_package --verbose_failures</code></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Latest TF master branch does not build on PowerPC.<br>\nProblem seems to be with BoringSSL.<br>\nThis <a href=\"https://github.com/google/boringssl/blob/f21650709a6f76e829ddcc77fe221c9d6a5c12de/crypto/fipsmodule/bcm.c#L91\">link</a> points to a file in BoringSSL that has the following inclusions:</p>\n<pre><code>#include \"sha/sha1-altivec.c\"\n#include \"sha/sha1.c\"\n</code></pre>\n<p>Both files included seem to have their own definition of <code>sha1_block_data_order</code> and both are enabled on PowerPC. This seems to cause GCC 4.8.5 to freak out (did not test other versions of gcc). My temporary fix is to remove the altivec version of sha1 and it works. Hopefully someone working on BoringSSL can take a look.</p>\n<p>Below is the exact error message:</p>\n<pre><code>ERROR: /gsa/yktgsa-h2/05/tjin/.cache/bazel/_bazel_tjin/5ebd35a31f2e08b1acf4a588141b13f1/external/boringssl/BUILD:118:1: C++ compilation of rule '@boringssl//:crypto' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command\n  (cd /gsa/yktgsa-h2/05/tjin/.cache/bazel/_bazel_tjin/5ebd35a31f2e08b1acf4a588141b13f1/execroot/org_tensorflow &amp;&amp; \\\n  exec env - \\\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\n    CUDNN_INSTALL_PATH=/usr/local/cuda-8.0 \\\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\n    LD_LIBRARY_PATH=/usr/local/cuda/extras/CUPTI/lib64: \\\n    PATH=/usr/lib/jvm/java-8-openjdk-ppc64el/bin:/localhd/tjin/tensorflow_latest/bin:/gsa/yktgsa/home/t/j/tjin/anaconda2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/local/cuda/bin:/localhd/tjin/tensorflow_latest/bazel/output:/usr/local/cuda/bin \\\n    PWD=/proc/self/cwd \\\n    PYTHON_BIN_PATH=/localhd/tjin/tensorflow_latest/bin/python \\\n    PYTHON_LIB_PATH=/localhd/tjin/tensorflow_latest/lib/python2.7/site-packages \\\n    TF_CUDA_CLANG=0 \\\n    TF_CUDA_COMPUTE_CAPABILITIES=3.5,5.2 \\\n    TF_CUDA_VERSION=8.0 \\\n    TF_CUDNN_VERSION=5.1.5 \\\n    TF_NEED_CUDA=1 \\\n    TF_NEED_OPENCL=0 \\\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -MD -MF bazel-out/local_linux-opt/bin/external/boringssl/_objs/crypto/external/boringssl/src/crypto/fipsmodule/bcm.pic.d -fPIC -iquote external/boringssl -iquote bazel-out/local_linux-opt/genfiles/external/boringssl -iquote external/bazel_tools -iquote bazel-out/local_linux-opt/genfiles/external/bazel_tools -isystem external/boringssl/src/include -isystem bazel-out/local_linux-opt/genfiles/external/boringssl/src/include -isystem external/bazel_tools/tools/cpp/gcc3 -Wa,--noexecstack '-D_XOPEN_SOURCE=700' -Wall -Werror '-Wformat=2' -Wsign-compare -Wmissing-field-initializers -Wwrite-strings -Wshadow -fno-common -DOPENSSL_NO_ASM '-std=c11' -Wmissing-prototypes -Wold-style-definition -Wstrict-prototypes -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c external/boringssl/src/crypto/fipsmodule/bcm.c -o bazel-out/local_linux-opt/bin/external/boringssl/_objs/crypto/external/boringssl/src/crypto/fipsmodule/bcm.pic.o).\nIn file included from external/boringssl/src/crypto/fipsmodule/bcm.c:92:0:\nexternal/boringssl/src/crypto/fipsmodule/sha/sha1.c:125:6: error: static declaration of 'sha1_block_data_order' follows non-static declaration\n void sha1_block_data_order(uint32_t *state, const uint8_t *data, size_t num);\n      ^\nIn file included from external/boringssl/src/crypto/fipsmodule/bcm.c:91:0:\nexternal/boringssl/src/crypto/fipsmodule/sha/sha1-altivec.c:190:6: note: previous definition of 'sha1_block_data_order' was here\n void sha1_block_data_order(uint32_t *state, const uint8_t *data, size_t num) {\n      ^\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 311.401s, Critical Path: 8.71s\n</code></pre>", "body_text": "BoringSSL doesn't seem to have their own issue board. So I'm guessing here's the closest alternative.\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04.2 LTS\nTensorFlow installed from (source or binary): source (github master, 10c871e)\nTensorFlow version (use command below):  (doesn't compile)\nPython version: 2.7.12\nBazel version (if compiling from source): 0.6.1\nCUDA/cuDNN version: (not relevant)\nGPU model and memory: Nvidia K40\nExact command to reproduce: bazel --host_jvm_args=-XX:+IgnoreUnrecognizedVMOptions build -c opt --config=cuda  //tensorflow/tools/pip_package:build_pip_package --verbose_failures\n\nDescribe the problem\nLatest TF master branch does not build on PowerPC.\nProblem seems to be with BoringSSL.\nThis link points to a file in BoringSSL that has the following inclusions:\n#include \"sha/sha1-altivec.c\"\n#include \"sha/sha1.c\"\n\nBoth files included seem to have their own definition of sha1_block_data_order and both are enabled on PowerPC. This seems to cause GCC 4.8.5 to freak out (did not test other versions of gcc). My temporary fix is to remove the altivec version of sha1 and it works. Hopefully someone working on BoringSSL can take a look.\nBelow is the exact error message:\nERROR: /gsa/yktgsa-h2/05/tjin/.cache/bazel/_bazel_tjin/5ebd35a31f2e08b1acf4a588141b13f1/external/boringssl/BUILD:118:1: C++ compilation of rule '@boringssl//:crypto' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command\n  (cd /gsa/yktgsa-h2/05/tjin/.cache/bazel/_bazel_tjin/5ebd35a31f2e08b1acf4a588141b13f1/execroot/org_tensorflow && \\\n  exec env - \\\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\n    CUDNN_INSTALL_PATH=/usr/local/cuda-8.0 \\\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\n    LD_LIBRARY_PATH=/usr/local/cuda/extras/CUPTI/lib64: \\\n    PATH=/usr/lib/jvm/java-8-openjdk-ppc64el/bin:/localhd/tjin/tensorflow_latest/bin:/gsa/yktgsa/home/t/j/tjin/anaconda2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/local/cuda/bin:/localhd/tjin/tensorflow_latest/bazel/output:/usr/local/cuda/bin \\\n    PWD=/proc/self/cwd \\\n    PYTHON_BIN_PATH=/localhd/tjin/tensorflow_latest/bin/python \\\n    PYTHON_LIB_PATH=/localhd/tjin/tensorflow_latest/lib/python2.7/site-packages \\\n    TF_CUDA_CLANG=0 \\\n    TF_CUDA_COMPUTE_CAPABILITIES=3.5,5.2 \\\n    TF_CUDA_VERSION=8.0 \\\n    TF_CUDNN_VERSION=5.1.5 \\\n    TF_NEED_CUDA=1 \\\n    TF_NEED_OPENCL=0 \\\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -MD -MF bazel-out/local_linux-opt/bin/external/boringssl/_objs/crypto/external/boringssl/src/crypto/fipsmodule/bcm.pic.d -fPIC -iquote external/boringssl -iquote bazel-out/local_linux-opt/genfiles/external/boringssl -iquote external/bazel_tools -iquote bazel-out/local_linux-opt/genfiles/external/bazel_tools -isystem external/boringssl/src/include -isystem bazel-out/local_linux-opt/genfiles/external/boringssl/src/include -isystem external/bazel_tools/tools/cpp/gcc3 -Wa,--noexecstack '-D_XOPEN_SOURCE=700' -Wall -Werror '-Wformat=2' -Wsign-compare -Wmissing-field-initializers -Wwrite-strings -Wshadow -fno-common -DOPENSSL_NO_ASM '-std=c11' -Wmissing-prototypes -Wold-style-definition -Wstrict-prototypes -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c external/boringssl/src/crypto/fipsmodule/bcm.c -o bazel-out/local_linux-opt/bin/external/boringssl/_objs/crypto/external/boringssl/src/crypto/fipsmodule/bcm.pic.o).\nIn file included from external/boringssl/src/crypto/fipsmodule/bcm.c:92:0:\nexternal/boringssl/src/crypto/fipsmodule/sha/sha1.c:125:6: error: static declaration of 'sha1_block_data_order' follows non-static declaration\n void sha1_block_data_order(uint32_t *state, const uint8_t *data, size_t num);\n      ^\nIn file included from external/boringssl/src/crypto/fipsmodule/bcm.c:91:0:\nexternal/boringssl/src/crypto/fipsmodule/sha/sha1-altivec.c:190:6: note: previous definition of 'sha1_block_data_order' was here\n void sha1_block_data_order(uint32_t *state, const uint8_t *data, size_t num) {\n      ^\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 311.401s, Critical Path: 8.71s", "body": "\r\n------------------------\r\nBoringSSL doesn't seem to have their own issue board. So I'm guessing here's the closest alternative.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04.2 LTS\r\n- **TensorFlow installed from (source or binary)**: source (github master, 10c871ed92a1d9b36c5e2e3a674d5812c67e82a1)\r\n- **TensorFlow version (use command below)**:  (doesn't compile)\r\n- **Python version**: 2.7.12\r\n- **Bazel version (if compiling from source)**: 0.6.1\r\n- **CUDA/cuDNN version**: (not relevant)\r\n- **GPU model and memory**: Nvidia K40\r\n- **Exact command to reproduce**: ```bazel --host_jvm_args=-XX:+IgnoreUnrecognizedVMOptions build -c opt --config=cuda  //tensorflow/tools/pip_package:build_pip_package --verbose_failures```\r\n\r\n\r\n### Describe the problem\r\nLatest TF master branch does not build on PowerPC. \r\nProblem seems to be with BoringSSL.\r\nThis [link](https://github.com/google/boringssl/blob/f21650709a6f76e829ddcc77fe221c9d6a5c12de/crypto/fipsmodule/bcm.c#L91) points to a file in BoringSSL that has the following inclusions:\r\n```\r\n#include \"sha/sha1-altivec.c\"\r\n#include \"sha/sha1.c\"\r\n```\r\n\r\nBoth files included seem to have their own definition of `sha1_block_data_order` and both are enabled on PowerPC. This seems to cause GCC 4.8.5 to freak out (did not test other versions of gcc). My temporary fix is to remove the altivec version of sha1 and it works. Hopefully someone working on BoringSSL can take a look.\r\n\r\n\r\nBelow is the exact error message:\r\n```\r\nERROR: /gsa/yktgsa-h2/05/tjin/.cache/bazel/_bazel_tjin/5ebd35a31f2e08b1acf4a588141b13f1/external/boringssl/BUILD:118:1: C++ compilation of rule '@boringssl//:crypto' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command\r\n  (cd /gsa/yktgsa-h2/05/tjin/.cache/bazel/_bazel_tjin/5ebd35a31f2e08b1acf4a588141b13f1/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    CUDNN_INSTALL_PATH=/usr/local/cuda-8.0 \\\r\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\r\n    LD_LIBRARY_PATH=/usr/local/cuda/extras/CUPTI/lib64: \\\r\n    PATH=/usr/lib/jvm/java-8-openjdk-ppc64el/bin:/localhd/tjin/tensorflow_latest/bin:/gsa/yktgsa/home/t/j/tjin/anaconda2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/local/cuda/bin:/localhd/tjin/tensorflow_latest/bazel/output:/usr/local/cuda/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/localhd/tjin/tensorflow_latest/bin/python \\\r\n    PYTHON_LIB_PATH=/localhd/tjin/tensorflow_latest/lib/python2.7/site-packages \\\r\n    TF_CUDA_CLANG=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=3.5,5.2 \\\r\n    TF_CUDA_VERSION=8.0 \\\r\n    TF_CUDNN_VERSION=5.1.5 \\\r\n    TF_NEED_CUDA=1 \\\r\n    TF_NEED_OPENCL=0 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -MD -MF bazel-out/local_linux-opt/bin/external/boringssl/_objs/crypto/external/boringssl/src/crypto/fipsmodule/bcm.pic.d -fPIC -iquote external/boringssl -iquote bazel-out/local_linux-opt/genfiles/external/boringssl -iquote external/bazel_tools -iquote bazel-out/local_linux-opt/genfiles/external/bazel_tools -isystem external/boringssl/src/include -isystem bazel-out/local_linux-opt/genfiles/external/boringssl/src/include -isystem external/bazel_tools/tools/cpp/gcc3 -Wa,--noexecstack '-D_XOPEN_SOURCE=700' -Wall -Werror '-Wformat=2' -Wsign-compare -Wmissing-field-initializers -Wwrite-strings -Wshadow -fno-common -DOPENSSL_NO_ASM '-std=c11' -Wmissing-prototypes -Wold-style-definition -Wstrict-prototypes -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c external/boringssl/src/crypto/fipsmodule/bcm.c -o bazel-out/local_linux-opt/bin/external/boringssl/_objs/crypto/external/boringssl/src/crypto/fipsmodule/bcm.pic.o).\r\nIn file included from external/boringssl/src/crypto/fipsmodule/bcm.c:92:0:\r\nexternal/boringssl/src/crypto/fipsmodule/sha/sha1.c:125:6: error: static declaration of 'sha1_block_data_order' follows non-static declaration\r\n void sha1_block_data_order(uint32_t *state, const uint8_t *data, size_t num);\r\n      ^\r\nIn file included from external/boringssl/src/crypto/fipsmodule/bcm.c:91:0:\r\nexternal/boringssl/src/crypto/fipsmodule/sha/sha1-altivec.c:190:6: note: previous definition of 'sha1_block_data_order' was here\r\n void sha1_block_data_order(uint32_t *state, const uint8_t *data, size_t num) {\r\n      ^\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 311.401s, Critical Path: 8.71s\r\n```"}
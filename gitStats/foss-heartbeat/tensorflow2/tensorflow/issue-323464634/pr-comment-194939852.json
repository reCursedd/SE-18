{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/194939852", "pull_request_review_id": 128207804, "id": 194939852, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NDkzOTg1Mg==", "diff_hunk": "@@ -119,46 +147,291 @@ public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment\n     return Collections.singleton(String.format(\"%s.annotation.Operator\", OP_PACKAGE));\n   }\n \n-  private void writeApi() {\n-    // Generate an empty class for now and get the build working correctly. This will be changed to\n-    // generate the actual API once we've done with build-related changes.\n-    // TODO:(kbsriram)\n-    try (PrintWriter writer =\n-        new PrintWriter(filer.createSourceFile(String.format(\"%s.Ops\", OP_PACKAGE)).openWriter())) {\n-      writer.println(String.format(\"package %s;\", OP_PACKAGE));\n-      writer.println(\"public class Ops{}\");\n+  private static final Pattern JAVADOC_TAG_PATTERN = Pattern.compile(\"@(?:param|return|throws|exception|see)\\\\s+.*\");\n+  private static final TypeName T_OPS = ClassName.get(\"org.tensorflow.op\", \"Ops\");\n+  private static final TypeName T_OPERATOR = ClassName.get(\"org.tensorflow.op.annotation\", \"Operator\");\n+  private static final TypeName T_SCOPE = ClassName.get(\"org.tensorflow.op\", \"Scope\");\n+  private static final TypeName T_GRAPH = ClassName.get(\"org.tensorflow\", \"Graph\");\n+  private static final TypeName T_STRING = ClassName.get(String.class);\n+  private static final String OP_PACKAGE = \"org.tensorflow.op\";", "path": "tensorflow/java/src/gen/java/org/tensorflow/processor/OperatorProcessor.java", "position": null, "original_position": 117, "commit_id": "6156168877c9eecac04c492178e137c93da4a4b9", "original_commit_id": "744036553bfe691e0e28e23157af9a42802a7c49", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "body": "Seems like `OP_PACKAGE` is used in exactly one place, would it make sense to just inline it there instead?\r\nSo:\r\n\r\n```java\r\nreturn Collections.singleton(\"org.tensorflow.op.annotation.Operator\")\r\n```\r\n\r\ninstead of:\r\n\r\n```\r\nreturn Collections.singletom(String.format(\"%s.annotation.Operator\", OP_PACKAGE));\r\n```\r\n", "created_at": "2018-06-13T02:23:04Z", "updated_at": "2018-06-15T01:13:26Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/19309#discussion_r194939852", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19309", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/194939852"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/19309#discussion_r194939852"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19309"}}, "body_html": "<p>Seems like <code>OP_PACKAGE</code> is used in exactly one place, would it make sense to just inline it there instead?<br>\nSo:</p>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-k\">return</span> <span class=\"pl-smi\">Collections</span><span class=\"pl-k\">.</span>singleton(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>org.tensorflow.op.annotation.Operator<span class=\"pl-pds\">\"</span></span>)</pre></div>\n<p>instead of:</p>\n<pre><code>return Collections.singletom(String.format(\"%s.annotation.Operator\", OP_PACKAGE));\n</code></pre>", "body_text": "Seems like OP_PACKAGE is used in exactly one place, would it make sense to just inline it there instead?\nSo:\nreturn Collections.singleton(\"org.tensorflow.op.annotation.Operator\")\ninstead of:\nreturn Collections.singletom(String.format(\"%s.annotation.Operator\", OP_PACKAGE));"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2332", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2332/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2332/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2332/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2332", "id": 154377703, "node_id": "MDU6SXNzdWUxNTQzNzc3MDM=", "number": 2332, "title": "install_name_tool error when running reduction_ops_test_gpu on OS X", "user": {"login": "davidzchen", "id": 5283042, "node_id": "MDQ6VXNlcjUyODMwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5283042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidzchen", "html_url": "https://github.com/davidzchen", "followers_url": "https://api.github.com/users/davidzchen/followers", "following_url": "https://api.github.com/users/davidzchen/following{/other_user}", "gists_url": "https://api.github.com/users/davidzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidzchen/subscriptions", "organizations_url": "https://api.github.com/users/davidzchen/orgs", "repos_url": "https://api.github.com/users/davidzchen/repos", "events_url": "https://api.github.com/users/davidzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/davidzchen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-05-12T01:26:35Z", "updated_at": "2016-05-25T00:04:44Z", "closed_at": "2016-05-25T00:04:44Z", "author_association": "MEMBER", "body_html": "<p>I ran into this while testing my patch <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"136523525\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1289\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/1289/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/1289\">#1289</a> on OS X. At first, I thought that it was caused by my patch but then I found that it also reproduces at HEAD.</p>\n<p>I am not entirely sure whether this is a TensorFlow issue (the error seems to indicate that we need to add a <code>ld</code> flag) or a Bazel issue in the gcc wrapper.</p>\n<p>+cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3524818\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/lberki\">@lberki</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3721087\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/damienmg\">@damienmg</a></p>\n<h3>Environment info</h3>\n<p>Operating System: Mac OS X 10.11.4</p>\n<p>Installed version of CUDA and cuDNN: Building without GPU support</p>\n<p>If installed from sources, provide the commit hash: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/d3d1a63a8b8ad99347d95756e88ae0589ed1a9b0/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/d3d1a63a8b8ad99347d95756e88ae0589ed1a9b0\"><tt>d3d1a63</tt></a></p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Run <code>bazel test //tensorflow/core/kernels:reduction_ops_test_gpu</code> on OS X</li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>This does not reproduce on Linux</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<pre><code>\u276f\u276f\u276f bazel test //tensorflow/core/kernels:reduction_ops_test_gpu --test_output=errors\nWARNING: /private/var/tmp/_bazel_dzc/50d95479571c8b29601dcbccdd342764/external/re2/WORKSPACE:1: Workspace name in /private/var/tmp/_bazel_dzc/50d95479571c8b29601dcbccdd342764/external/re2/WORKSPACE (@__main__) does not match the name given in the repository's definition (@re2); this will cause a build error in future versions.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:59:16: in includes attribute of cc_library rule //google/protobuf:protobuf_lite: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:124:16: in includes attribute of cc_library rule //google/protobuf:protobuf: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:266:16: in includes attribute of cc_library rule //google/protobuf:protoc_lib: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nINFO: Found 1 test target...\nERROR: /Users/dzc/Projects/tensorflow/tensorflow/tensorflow/core/kernels/BUILD:1044:1: Linking of rule '//tensorflow/core/kernels:reduction_ops_test_gpu' failed: cc_wrapper.sh failed: error executing command external/local_config_cc/cc_wrapper.sh -o bazel-out/local-fastbuild/bin/tensorflow/core/kernels/reduction_ops_test_gpu '-Wl,-rpath,$ORIGIN/../../../_solib_darwin/' ... (remaining 53 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nclang: warning: argument unused during compilation: '-pthread'\nerror: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/install_name_tool: changing install names or rpaths can't be redone for: bazel-out/local-fastbuild/bin/tensorflow/core/kernels/reduction_ops_test_gpu (for architecture x86_64) because larger updated load commands do not fit (the program must be relinked, and you may need to use -headerpad or -headerpad_max_install_names)\nTarget //tensorflow/core/kernels:reduction_ops_test_gpu failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 0.623s, Critical Path: 0.49s\n\nExecuted 0 out of 1 test: 1 fails to build.\n</code></pre>", "body_text": "I ran into this while testing my patch #1289 on OS X. At first, I thought that it was caused by my patch but then I found that it also reproduces at HEAD.\nI am not entirely sure whether this is a TensorFlow issue (the error seems to indicate that we need to add a ld flag) or a Bazel issue in the gcc wrapper.\n+cc @lberki @damienmg\nEnvironment info\nOperating System: Mac OS X 10.11.4\nInstalled version of CUDA and cuDNN: Building without GPU support\nIf installed from sources, provide the commit hash: d3d1a63\nSteps to reproduce\n\nRun bazel test //tensorflow/core/kernels:reduction_ops_test_gpu on OS X\n\nWhat have you tried?\n\nThis does not reproduce on Linux\n\nLogs or other output that would be helpful\n\u276f\u276f\u276f bazel test //tensorflow/core/kernels:reduction_ops_test_gpu --test_output=errors\nWARNING: /private/var/tmp/_bazel_dzc/50d95479571c8b29601dcbccdd342764/external/re2/WORKSPACE:1: Workspace name in /private/var/tmp/_bazel_dzc/50d95479571c8b29601dcbccdd342764/external/re2/WORKSPACE (@__main__) does not match the name given in the repository's definition (@re2); this will cause a build error in future versions.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:59:16: in includes attribute of cc_library rule //google/protobuf:protobuf_lite: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:124:16: in includes attribute of cc_library rule //google/protobuf:protobuf: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:266:16: in includes attribute of cc_library rule //google/protobuf:protoc_lib: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nINFO: Found 1 test target...\nERROR: /Users/dzc/Projects/tensorflow/tensorflow/tensorflow/core/kernels/BUILD:1044:1: Linking of rule '//tensorflow/core/kernels:reduction_ops_test_gpu' failed: cc_wrapper.sh failed: error executing command external/local_config_cc/cc_wrapper.sh -o bazel-out/local-fastbuild/bin/tensorflow/core/kernels/reduction_ops_test_gpu '-Wl,-rpath,$ORIGIN/../../../_solib_darwin/' ... (remaining 53 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nclang: warning: argument unused during compilation: '-pthread'\nerror: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/install_name_tool: changing install names or rpaths can't be redone for: bazel-out/local-fastbuild/bin/tensorflow/core/kernels/reduction_ops_test_gpu (for architecture x86_64) because larger updated load commands do not fit (the program must be relinked, and you may need to use -headerpad or -headerpad_max_install_names)\nTarget //tensorflow/core/kernels:reduction_ops_test_gpu failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 0.623s, Critical Path: 0.49s\n\nExecuted 0 out of 1 test: 1 fails to build.", "body": "I ran into this while testing my patch tensorflow/tensorflow#1289 on OS X. At first, I thought that it was caused by my patch but then I found that it also reproduces at HEAD.\n\nI am not entirely sure whether this is a TensorFlow issue (the error seems to indicate that we need to add a `ld` flag) or a Bazel issue in the gcc wrapper.\n\n+cc @lberki @damienmg\n### Environment info\n\nOperating System: Mac OS X 10.11.4\n\nInstalled version of CUDA and cuDNN: Building without GPU support\n\nIf installed from sources, provide the commit hash: d3d1a63a8b8ad99347d95756e88ae0589ed1a9b0\n### Steps to reproduce\n1. Run `bazel test //tensorflow/core/kernels:reduction_ops_test_gpu` on OS X\n### What have you tried?\n1. This does not reproduce on Linux\n### Logs or other output that would be helpful\n\n```\n\u276f\u276f\u276f bazel test //tensorflow/core/kernels:reduction_ops_test_gpu --test_output=errors\nWARNING: /private/var/tmp/_bazel_dzc/50d95479571c8b29601dcbccdd342764/external/re2/WORKSPACE:1: Workspace name in /private/var/tmp/_bazel_dzc/50d95479571c8b29601dcbccdd342764/external/re2/WORKSPACE (@__main__) does not match the name given in the repository's definition (@re2); this will cause a build error in future versions.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:59:16: in includes attribute of cc_library rule //google/protobuf:protobuf_lite: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:124:16: in includes attribute of cc_library rule //google/protobuf:protobuf: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nWARNING: /Users/dzc/Projects/tensorflow/tensorflow/google/protobuf/BUILD:266:16: in includes attribute of cc_library rule //google/protobuf:protoc_lib: 'src/' resolves to 'google/protobuf/src' not in 'third_party'. This will be an error in the future.\nINFO: Found 1 test target...\nERROR: /Users/dzc/Projects/tensorflow/tensorflow/tensorflow/core/kernels/BUILD:1044:1: Linking of rule '//tensorflow/core/kernels:reduction_ops_test_gpu' failed: cc_wrapper.sh failed: error executing command external/local_config_cc/cc_wrapper.sh -o bazel-out/local-fastbuild/bin/tensorflow/core/kernels/reduction_ops_test_gpu '-Wl,-rpath,$ORIGIN/../../../_solib_darwin/' ... (remaining 53 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nclang: warning: argument unused during compilation: '-pthread'\nerror: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/install_name_tool: changing install names or rpaths can't be redone for: bazel-out/local-fastbuild/bin/tensorflow/core/kernels/reduction_ops_test_gpu (for architecture x86_64) because larger updated load commands do not fit (the program must be relinked, and you may need to use -headerpad or -headerpad_max_install_names)\nTarget //tensorflow/core/kernels:reduction_ops_test_gpu failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 0.623s, Critical Path: 0.49s\n\nExecuted 0 out of 1 test: 1 fails to build.\n```\n"}
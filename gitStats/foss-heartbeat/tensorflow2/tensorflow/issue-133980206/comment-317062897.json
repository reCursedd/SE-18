{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/317062897", "html_url": "https://github.com/tensorflow/tensorflow/issues/1122#issuecomment-317062897", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1122", "id": 317062897, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzA2Mjg5Nw==", "user": {"login": "abred", "id": 1835958, "node_id": "MDQ6VXNlcjE4MzU5NTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1835958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abred", "html_url": "https://github.com/abred", "followers_url": "https://api.github.com/users/abred/followers", "following_url": "https://api.github.com/users/abred/following{/other_user}", "gists_url": "https://api.github.com/users/abred/gists{/gist_id}", "starred_url": "https://api.github.com/users/abred/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abred/subscriptions", "organizations_url": "https://api.github.com/users/abred/orgs", "repos_url": "https://api.github.com/users/abred/repos", "events_url": "https://api.github.com/users/abred/events{/privacy}", "received_events_url": "https://api.github.com/users/abred/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-21T17:29:23Z", "updated_at": "2017-07-21T17:29:23Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=18667639\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tano297\">@tano297</a> you right about that, I was in the wrong place, but still:<br>\nline 755-770 calculate the moments, but the moments are only used in _force_updates which is only executed if is_training evaluates to True, aren't they?<br>\nAnd thus</p>\n<pre><code>mean, variance = utils.smart_cond(is_training, _force_updates, moving_vars_fn) \n</code></pre>\n<p>should be equivalent to line 804:</p>\n<pre><code>mean, variance = moving_mean, moving_variance\n</code></pre>\n<p>if is_training evalutes to False and thus the \"moments\"-part of the graph is never used and thus shouldn't be executed</p>\n<p>but I haven't tested, so I might be wrong about that :)</p>", "body_text": "@tano297 you right about that, I was in the wrong place, but still:\nline 755-770 calculate the moments, but the moments are only used in _force_updates which is only executed if is_training evaluates to True, aren't they?\nAnd thus\nmean, variance = utils.smart_cond(is_training, _force_updates, moving_vars_fn) \n\nshould be equivalent to line 804:\nmean, variance = moving_mean, moving_variance\n\nif is_training evalutes to False and thus the \"moments\"-part of the graph is never used and thus shouldn't be executed\nbut I haven't tested, so I might be wrong about that :)", "body": "@tano297 you right about that, I was in the wrong place, but still:\r\nline 755-770 calculate the moments, but the moments are only used in _force_updates which is only executed if is_training evaluates to True, aren't they?\r\nAnd thus \r\n```\r\nmean, variance = utils.smart_cond(is_training, _force_updates, moving_vars_fn) \r\n```\r\nshould be equivalent to line 804:\r\n```\r\nmean, variance = moving_mean, moving_variance\r\n```\r\nif is_training evalutes to False and thus the \"moments\"-part of the graph is never used and thus shouldn't be executed\r\n\r\nbut I haven't tested, so I might be wrong about that :)"}
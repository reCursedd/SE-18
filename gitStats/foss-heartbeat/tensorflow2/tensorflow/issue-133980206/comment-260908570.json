{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/260908570", "html_url": "https://github.com/tensorflow/tensorflow/issues/1122#issuecomment-260908570", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1122", "id": 260908570, "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDkwODU3MA==", "user": {"login": "nmduc", "id": 2166977, "node_id": "MDQ6VXNlcjIxNjY5Nzc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2166977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmduc", "html_url": "https://github.com/nmduc", "followers_url": "https://api.github.com/users/nmduc/followers", "following_url": "https://api.github.com/users/nmduc/following{/other_user}", "gists_url": "https://api.github.com/users/nmduc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmduc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmduc/subscriptions", "organizations_url": "https://api.github.com/users/nmduc/orgs", "repos_url": "https://api.github.com/users/nmduc/repos", "events_url": "https://api.github.com/users/nmduc/events{/privacy}", "received_events_url": "https://api.github.com/users/nmduc/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-16T10:20:57Z", "updated_at": "2016-11-16T10:20:57Z", "author_association": "NONE", "body_html": "<blockquote>\n<p>I see the same poor test performance with that code.</p>\n</blockquote>\n<p>I had exactly the same problem either with tf.slim batchnorm or with tf.cond and input is_training as a placeholder.<br>\nIn the former case, when investigating the trained model, I found out that the moving mean and moving variance consist of all zeros.<br>\nIn the latter case, the moving mean and variance look more reasonable (with different values), but if I use is_training=False in test time, the performance is also really bad. Using is_training=True, it works better but I think it only uses the moving mean and variance inside the test batch.</p>", "body_text": "I see the same poor test performance with that code.\n\nI had exactly the same problem either with tf.slim batchnorm or with tf.cond and input is_training as a placeholder.\nIn the former case, when investigating the trained model, I found out that the moving mean and moving variance consist of all zeros.\nIn the latter case, the moving mean and variance look more reasonable (with different values), but if I use is_training=False in test time, the performance is also really bad. Using is_training=True, it works better but I think it only uses the moving mean and variance inside the test batch.", "body": "> I see the same poor test performance with that code.\n\nI had exactly the same problem either with tf.slim batchnorm or with tf.cond and input is_training as a placeholder.\nIn the former case, when investigating the trained model, I found out that the moving mean and moving variance consist of all zeros. \nIn the latter case, the moving mean and variance look more reasonable (with different values), but if I use is_training=False in test time, the performance is also really bad. Using is_training=True, it works better but I think it only uses the moving mean and variance inside the test batch.\n"}
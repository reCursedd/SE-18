{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/174082378", "html_url": "https://github.com/tensorflow/tensorflow/issues/837#issuecomment-174082378", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/837", "id": 174082378, "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDA4MjM3OA==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2016-01-22T23:07:13Z", "updated_at": "2016-01-22T23:10:00Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Re: \"Pinning the pipeline to the CPU\":</p>\n<p>here's how I would optimize it -- pin everything to CPU (export<br>\nTF_MIN_GPU_MULTIPROCESSOR_COUNT=800), and remove all the non-reading ops.<br>\nTweak your pipeline design/number of threads until you get maximum<br>\nthroughput. Then re-enable GPU, and use manual pinning to make sure that<br>\nyour input pipeline throughput is unchanged. Then attach your processing<br>\nops (on GPU)</p>\n<p>On Fri, Jan 22, 2016 at 2:59 PM, nryant <a href=\"mailto:notifications@github.com\">notifications@github.com</a> wrote:</p>\n<blockquote>\n<p>Pinning the pipeline to the CPU helps somewhat, but still is worse than I<br>\nwould expect. For num_threads=2 the time reduces to 12.6 seconds with 13%<br>\nGPU utilization and for num_threads=16 to 9.4 seconds with 18% utilization</p>\n<p>\u2014<br>\nReply to this email directly or view it on GitHub<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"128062452\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/837\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/837/hovercard?comment_id=174081084&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/837#issuecomment-174081084\">#837 (comment)</a><br>\n.</p>\n</blockquote>", "body_text": "Re: \"Pinning the pipeline to the CPU\":\nhere's how I would optimize it -- pin everything to CPU (export\nTF_MIN_GPU_MULTIPROCESSOR_COUNT=800), and remove all the non-reading ops.\nTweak your pipeline design/number of threads until you get maximum\nthroughput. Then re-enable GPU, and use manual pinning to make sure that\nyour input pipeline throughput is unchanged. Then attach your processing\nops (on GPU)\nOn Fri, Jan 22, 2016 at 2:59 PM, nryant notifications@github.com wrote:\n\nPinning the pipeline to the CPU helps somewhat, but still is worse than I\nwould expect. For num_threads=2 the time reduces to 12.6 seconds with 13%\nGPU utilization and for num_threads=16 to 9.4 seconds with 18% utilization\n\u2014\nReply to this email directly or view it on GitHub\n#837 (comment)\n.", "body": "Re: \"Pinning the pipeline to the CPU\":\n\nhere's how I would optimize it -- pin everything to CPU (export\nTF_MIN_GPU_MULTIPROCESSOR_COUNT=800), and remove all the non-reading ops.\nTweak your pipeline design/number of threads until you get maximum\nthroughput. Then re-enable GPU, and use manual pinning to make sure that\nyour input pipeline throughput is unchanged. Then attach your processing\nops (on GPU)\n\nOn Fri, Jan 22, 2016 at 2:59 PM, nryant notifications@github.com wrote:\n\n> Pinning the pipeline to the CPU helps somewhat, but still is worse than I\n> would expect. For num_threads=2 the time reduces to 12.6 seconds with 13%\n> GPU utilization and for num_threads=16 to 9.4 seconds with 18% utilization\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/837#issuecomment-174081084\n> .\n"}
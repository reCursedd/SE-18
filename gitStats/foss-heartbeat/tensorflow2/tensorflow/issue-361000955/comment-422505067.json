{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/422505067", "html_url": "https://github.com/tensorflow/tensorflow/issues/22321#issuecomment-422505067", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22321", "id": 422505067, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjUwNTA2Nw==", "user": {"login": "dmitrievanthony", "id": 1028969, "node_id": "MDQ6VXNlcjEwMjg5Njk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1028969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitrievanthony", "html_url": "https://github.com/dmitrievanthony", "followers_url": "https://api.github.com/users/dmitrievanthony/followers", "following_url": "https://api.github.com/users/dmitrievanthony/following{/other_user}", "gists_url": "https://api.github.com/users/dmitrievanthony/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitrievanthony/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitrievanthony/subscriptions", "organizations_url": "https://api.github.com/users/dmitrievanthony/orgs", "repos_url": "https://api.github.com/users/dmitrievanthony/repos", "events_url": "https://api.github.com/users/dmitrievanthony/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitrievanthony/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-18T18:47:21Z", "updated_at": "2018-09-18T18:47:21Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1647833\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yuefengz\">@yuefengz</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=42781361\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/harshini-gadige\">@harshini-gadige</a>, yes I use standalone client mode.</p>\n<p>I've prepared an example based on keras_model_to_estimator_client.py. Please take a look <a href=\"https://github.com/dmitrievanthony/ecosystem/blob/ignite-2/distribution_strategy/keras_model_to_estimator_client.py\">here</a>. It uses <code>FixedLengthRecordDataset</code> and <code>CollectiveAllReduceStrategy</code> strategy.</p>\n<p>I don't use Kubernetes, so to reproduce this problem I do the following:</p>\n<ol>\n<li>Start <a href=\"https://github.com/dmitrievanthony/ecosystem/blob/ignite-2/ignite/worker1.py\">worker1.py</a>.</li>\n<li>Start <a href=\"https://github.com/dmitrievanthony/ecosystem/blob/ignite-2/ignite/worker2.py\">worker2.py</a>.</li>\n<li>Set <code>TF_CONFIG='{\"cluster\":{\"worker\":[\"localhost:1111\", \"localhost:1112\"],\"chief\":[\"localhost:1113\"]}, \"task\":{\"type\":\"chief\",\"index\":0}}'</code></li>\n<li>Start <a href=\"https://github.com/dmitrievanthony/ecosystem/blob/ignite-2/distribution_strategy/keras_model_to_estimator_client.py\">keras_model_to_estimator_client.py</a>.<br>\nGet the exception.</li>\n</ol>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://camo.githubusercontent.com/bc7602eb7d47a70274fe41f3c04475ccc59771e0/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f68656c6c6f776f726c643233343233343233657732332f2544302541312544302542442544302542382544302542432544302542452544302542412b2544312538442544302542412544312538302544302542302544302542442544302542302b323031382d30392d31382b2544302542322b32312e33392e31392e706e67\"><img src=\"https://camo.githubusercontent.com/bc7602eb7d47a70274fe41f3c04475ccc59771e0/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f68656c6c6f776f726c643233343233343233657732332f2544302541312544302542442544302542382544302542432544302542452544302542412b2544312538442544302542412544312538302544302542302544302542442544302542302b323031382d30392d31382b2544302542322b32312e33392e31392e706e67\" alt=\"screen\" data-canonical-src=\"https://s3.amazonaws.com/helloworld23423423ew23/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA+%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0+2018-09-18+%D0%B2+21.39.19.png\" style=\"max-width:100%;\"></a></p>", "body_text": "@yuefengz, @harshini-gadige, yes I use standalone client mode.\nI've prepared an example based on keras_model_to_estimator_client.py. Please take a look here. It uses FixedLengthRecordDataset and CollectiveAllReduceStrategy strategy.\nI don't use Kubernetes, so to reproduce this problem I do the following:\n\nStart worker1.py.\nStart worker2.py.\nSet TF_CONFIG='{\"cluster\":{\"worker\":[\"localhost:1111\", \"localhost:1112\"],\"chief\":[\"localhost:1113\"]}, \"task\":{\"type\":\"chief\",\"index\":0}}'\nStart keras_model_to_estimator_client.py.\nGet the exception.", "body": "@yuefengz, @harshini-gadige, yes I use standalone client mode. \r\n\r\nI've prepared an example based on keras_model_to_estimator_client.py. Please take a look [here](https://github.com/dmitrievanthony/ecosystem/blob/ignite-2/distribution_strategy/keras_model_to_estimator_client.py). It uses `FixedLengthRecordDataset` and `CollectiveAllReduceStrategy` strategy.\r\n\r\nI don't use Kubernetes, so to reproduce this problem I do the following:\r\n1. Start [worker1.py](https://github.com/dmitrievanthony/ecosystem/blob/ignite-2/ignite/worker1.py).\r\n2. Start [worker2.py](https://github.com/dmitrievanthony/ecosystem/blob/ignite-2/ignite/worker2.py).\r\n3. Set `TF_CONFIG='{\"cluster\":{\"worker\":[\"localhost:1111\", \"localhost:1112\"],\"chief\":[\"localhost:1113\"]}, \"task\":{\"type\":\"chief\",\"index\":0}}'`\r\n4. Start [keras_model_to_estimator_client.py](https://github.com/dmitrievanthony/ecosystem/blob/ignite-2/distribution_strategy/keras_model_to_estimator_client.py).\r\nGet the exception.\r\n\r\n![screen](https://s3.amazonaws.com/helloworld23423423ew23/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA+%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0+2018-09-18+%D0%B2+21.39.19.png)"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7109", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7109/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7109/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7109/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7109", "id": 203606176, "node_id": "MDU6SXNzdWUyMDM2MDYxNzY=", "number": 7109, "title": "error training LSTM image captioning model using dynamic_rnn", "user": {"login": "mutasem-mattar", "id": 8367757, "node_id": "MDQ6VXNlcjgzNjc3NTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/8367757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mutasem-mattar", "html_url": "https://github.com/mutasem-mattar", "followers_url": "https://api.github.com/users/mutasem-mattar/followers", "following_url": "https://api.github.com/users/mutasem-mattar/following{/other_user}", "gists_url": "https://api.github.com/users/mutasem-mattar/gists{/gist_id}", "starred_url": "https://api.github.com/users/mutasem-mattar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mutasem-mattar/subscriptions", "organizations_url": "https://api.github.com/users/mutasem-mattar/orgs", "repos_url": "https://api.github.com/users/mutasem-mattar/repos", "events_url": "https://api.github.com/users/mutasem-mattar/events{/privacy}", "received_events_url": "https://api.github.com/users/mutasem-mattar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-27T10:50:41Z", "updated_at": "2017-01-27T18:00:49Z", "closed_at": "2017-01-27T18:00:49Z", "author_association": "NONE", "body_html": "<p>Hello,<br>\nI am trying to use tf.nn.dynamic_rnn to train an image captioning model. However, I keep getting this error.</p>\n<pre><code>ValueError: Variable lstm//BasicLSTMCell/Linear/Matrix does not exist, or was not created with tf.get_variable(). Did you mean to set reuse=None in VarScope?\n</code></pre>\n<p>I am using Tensorflow version 0.12.1</p>\n<p>Here is the code snippet:</p>\n<pre><code> lstm_cell = tf.nn.rnn_cell.BasicLSTMCell(num_units=self.config.num_lstm_units, state_is_tuple=True)\n if self.mode == \"train\":\n lstm_cell = tf.nn.rnn_cell.DropoutWrapper(\n    lstm_cell,\n    input_keep_prob=self.config.lstm_dropout_keep_prob,\n    output_keep_prob=self.config.lstm_dropout_keep_prob)\n\nwith tf.variable_scope(\"lstm\", initializer=self.initializer) as lstm_scope:\n     zero_state = initial_state = lstm_cell.zero_state(\n                  batch_size=self.seq_embeddings.get_shape()[0], dtype=tf.float32)\n\n    lstm_scope.reuse_variables()  \n    sequence_length = tf.reduce_sum(self.input_mask, 1)\n    lstm_outputs, _ = tf.nn.dynamic_rnn(cell=lstm_cell,\n                                    inputs=self.seq_embeddings,\n                                    sequence_length=sequence_length,\n                                    initial_state=initial_state,\n                                    dtype=tf.float32,\n                                    scope=lstm_scope\n                                    )\n</code></pre>", "body_text": "Hello,\nI am trying to use tf.nn.dynamic_rnn to train an image captioning model. However, I keep getting this error.\nValueError: Variable lstm//BasicLSTMCell/Linear/Matrix does not exist, or was not created with tf.get_variable(). Did you mean to set reuse=None in VarScope?\n\nI am using Tensorflow version 0.12.1\nHere is the code snippet:\n lstm_cell = tf.nn.rnn_cell.BasicLSTMCell(num_units=self.config.num_lstm_units, state_is_tuple=True)\n if self.mode == \"train\":\n lstm_cell = tf.nn.rnn_cell.DropoutWrapper(\n    lstm_cell,\n    input_keep_prob=self.config.lstm_dropout_keep_prob,\n    output_keep_prob=self.config.lstm_dropout_keep_prob)\n\nwith tf.variable_scope(\"lstm\", initializer=self.initializer) as lstm_scope:\n     zero_state = initial_state = lstm_cell.zero_state(\n                  batch_size=self.seq_embeddings.get_shape()[0], dtype=tf.float32)\n\n    lstm_scope.reuse_variables()  \n    sequence_length = tf.reduce_sum(self.input_mask, 1)\n    lstm_outputs, _ = tf.nn.dynamic_rnn(cell=lstm_cell,\n                                    inputs=self.seq_embeddings,\n                                    sequence_length=sequence_length,\n                                    initial_state=initial_state,\n                                    dtype=tf.float32,\n                                    scope=lstm_scope\n                                    )", "body": "Hello, \r\nI am trying to use tf.nn.dynamic_rnn to train an image captioning model. However, I keep getting this error. \r\n\r\n    ValueError: Variable lstm//BasicLSTMCell/Linear/Matrix does not exist, or was not created with tf.get_variable(). Did you mean to set reuse=None in VarScope?\r\n\r\nI am using Tensorflow version 0.12.1\r\n\r\nHere is the code snippet:\r\n\r\n     lstm_cell = tf.nn.rnn_cell.BasicLSTMCell(num_units=self.config.num_lstm_units, state_is_tuple=True)\r\n     if self.mode == \"train\":\r\n     lstm_cell = tf.nn.rnn_cell.DropoutWrapper(\r\n        lstm_cell,\r\n        input_keep_prob=self.config.lstm_dropout_keep_prob,\r\n        output_keep_prob=self.config.lstm_dropout_keep_prob)\r\n\r\n    with tf.variable_scope(\"lstm\", initializer=self.initializer) as lstm_scope:\r\n         zero_state = initial_state = lstm_cell.zero_state(\r\n                      batch_size=self.seq_embeddings.get_shape()[0], dtype=tf.float32)\r\n\r\n        lstm_scope.reuse_variables()  \r\n        sequence_length = tf.reduce_sum(self.input_mask, 1)\r\n        lstm_outputs, _ = tf.nn.dynamic_rnn(cell=lstm_cell,\r\n                                        inputs=self.seq_embeddings,\r\n                                        sequence_length=sequence_length,\r\n                                        initial_state=initial_state,\r\n                                        dtype=tf.float32,\r\n                                        scope=lstm_scope\r\n                                        )"}
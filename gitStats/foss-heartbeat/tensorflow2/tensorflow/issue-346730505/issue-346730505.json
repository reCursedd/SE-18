{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21315", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21315/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21315/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21315/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21315", "id": 346730505, "node_id": "MDU6SXNzdWUzNDY3MzA1MDU=", "number": 21315, "title": "building tensorflow shared library in windows debug mode (cmake) /MDd", "user": {"login": "amirhessam", "id": 9620110, "node_id": "MDQ6VXNlcjk2MjAxMTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9620110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amirhessam", "html_url": "https://github.com/amirhessam", "followers_url": "https://api.github.com/users/amirhessam/followers", "following_url": "https://api.github.com/users/amirhessam/following{/other_user}", "gists_url": "https://api.github.com/users/amirhessam/gists{/gist_id}", "starred_url": "https://api.github.com/users/amirhessam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amirhessam/subscriptions", "organizations_url": "https://api.github.com/users/amirhessam/orgs", "repos_url": "https://api.github.com/users/amirhessam/repos", "events_url": "https://api.github.com/users/amirhessam/events{/privacy}", "received_events_url": "https://api.github.com/users/amirhessam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-08-01T19:10:32Z", "updated_at": "2018-10-31T17:13:35Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: windows 10</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: r 1.9</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>We get many linking error for building tensorflow shared library in windows when debug mode is selected<br>\n(/MDd switch in VC++). We get many error messages like</p>\n<blockquote>\n<p>mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug'</p>\n</blockquote>\n<p>After digging into the issue, I noticed the linker is using wrong GRPC libs.</p>\n<p><code>double_conversion\\src\\double_conversion\\double-conversion\\$(Configuration)\\double-conversion.lib zlib\\install\\lib\\zlibstaticd.lib grpc\\src\\grpc\\Release\\grpc++_unsecure.lib grpc\\src\\grpc\\Release\\grpc_unsecure.lib grpc\\src\\grpc\\Release\\gpr.lib snappy\\src\\snappy\\$(Configuration)\\snappy.lib</code><br>\nApparently, the cmake script is using the release version of grpc regardless of the config. I changed it manually and it was fixed. It would be nice if this fix is included in the future patches.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): windows 10\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): r 1.9\n\nDescribe the problem\nWe get many linking error for building tensorflow shared library in windows when debug mode is selected\n(/MDd switch in VC++). We get many error messages like\n\nmismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug'\n\nAfter digging into the issue, I noticed the linker is using wrong GRPC libs.\ndouble_conversion\\src\\double_conversion\\double-conversion\\$(Configuration)\\double-conversion.lib zlib\\install\\lib\\zlibstaticd.lib grpc\\src\\grpc\\Release\\grpc++_unsecure.lib grpc\\src\\grpc\\Release\\grpc_unsecure.lib grpc\\src\\grpc\\Release\\gpr.lib snappy\\src\\snappy\\$(Configuration)\\snappy.lib\nApparently, the cmake script is using the release version of grpc regardless of the config. I changed it manually and it was fixed. It would be nice if this fix is included in the future patches.", "body": "\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: windows 10\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: r 1.9\r\n### Describe the problem\r\nWe get many linking error for building tensorflow shared library in windows when debug mode is selected\r\n(/MDd switch in VC++). We get many error messages like\r\n\r\n> mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug' \r\n\r\nAfter digging into the issue, I noticed the linker is using wrong GRPC libs. \r\n\r\n`\r\ndouble_conversion\\src\\double_conversion\\double-conversion\\$(Configuration)\\double-conversion.lib\r\nzlib\\install\\lib\\zlibstaticd.lib\r\ngrpc\\src\\grpc\\Release\\grpc++_unsecure.lib\r\ngrpc\\src\\grpc\\Release\\grpc_unsecure.lib\r\ngrpc\\src\\grpc\\Release\\gpr.lib\r\nsnappy\\src\\snappy\\$(Configuration)\\snappy.lib\r\n`\r\nApparently, the cmake script is using the release version of grpc regardless of the config. I changed it manually and it was fixed. It would be nice if this fix is included in the future patches. \r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/309127690", "html_url": "https://github.com/tensorflow/tensorflow/issues/3636#issuecomment-309127690", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3636", "id": 309127690, "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTEyNzY5MA==", "user": {"login": "tfboyd", "id": 23486130, "node_id": "MDQ6VXNlcjIzNDg2MTMw", "avatar_url": "https://avatars1.githubusercontent.com/u/23486130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfboyd", "html_url": "https://github.com/tfboyd", "followers_url": "https://api.github.com/users/tfboyd/followers", "following_url": "https://api.github.com/users/tfboyd/following{/other_user}", "gists_url": "https://api.github.com/users/tfboyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfboyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfboyd/subscriptions", "organizations_url": "https://api.github.com/users/tfboyd/orgs", "repos_url": "https://api.github.com/users/tfboyd/repos", "events_url": "https://api.github.com/users/tfboyd/events{/privacy}", "received_events_url": "https://api.github.com/users/tfboyd/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-16T20:34:33Z", "updated_at": "2017-06-16T20:34:33Z", "author_association": "MEMBER", "body_html": "<p>It seems really odd that the one core is being stressed.  Given you have two GTX 1080s I am assuming you have at least a 4 core 8 thread setup.</p>\n<p>Using our benchmark code I have not had an issue feeding 1080s.  I 100% recognize that my code is not the same as this code.</p>\n<p>I will leave this open a contributions welcome.  I looked over the example and I can see where it could use some help that might speed it up.  It does not actually define a tf.device so it is very possible that part of the image input pipeline is happening on CPU and even something crazy like some ops running on CPU could be happening (although less likely).</p>\n<p>I will pick this up but if I do not do anything in the next few weeks it is something that will likely not get updated with out community support.</p>\n<p>If you wanted to do it yourself  you just need to wrap the input pipeline with</p>\n<pre><code>with tf.device(\":/CPU\"):\n</code></pre>\n<p>And the model aspects with</p>\n<pre><code>with tf.device(\":/GPU:0\")\n</code></pre>\n<p>It is slightly more complicated than that.  These examples were written to give people a place to start and unfortunately did not age well and people did not think about all the scenarios.</p>", "body_text": "It seems really odd that the one core is being stressed.  Given you have two GTX 1080s I am assuming you have at least a 4 core 8 thread setup.\nUsing our benchmark code I have not had an issue feeding 1080s.  I 100% recognize that my code is not the same as this code.\nI will leave this open a contributions welcome.  I looked over the example and I can see where it could use some help that might speed it up.  It does not actually define a tf.device so it is very possible that part of the image input pipeline is happening on CPU and even something crazy like some ops running on CPU could be happening (although less likely).\nI will pick this up but if I do not do anything in the next few weeks it is something that will likely not get updated with out community support.\nIf you wanted to do it yourself  you just need to wrap the input pipeline with\nwith tf.device(\":/CPU\"):\n\nAnd the model aspects with\nwith tf.device(\":/GPU:0\")\n\nIt is slightly more complicated than that.  These examples were written to give people a place to start and unfortunately did not age well and people did not think about all the scenarios.", "body": "It seems really odd that the one core is being stressed.  Given you have two GTX 1080s I am assuming you have at least a 4 core 8 thread setup.  \r\n\r\nUsing our benchmark code I have not had an issue feeding 1080s.  I 100% recognize that my code is not the same as this code.  \r\n\r\nI will leave this open a contributions welcome.  I looked over the example and I can see where it could use some help that might speed it up.  It does not actually define a tf.device so it is very possible that part of the image input pipeline is happening on CPU and even something crazy like some ops running on CPU could be happening (although less likely).  \r\n\r\nI will pick this up but if I do not do anything in the next few weeks it is something that will likely not get updated with out community support.   \r\n\r\nIf you wanted to do it yourself  you just need to wrap the input pipeline with\r\n```\r\nwith tf.device(\":/CPU\"):\r\n```\r\n\r\nAnd the model aspects with \r\n\r\n```\r\nwith tf.device(\":/GPU:0\")\r\n```\r\n\r\nIt is slightly more complicated than that.  These examples were written to give people a place to start and unfortunately did not age well and people did not think about all the scenarios.  \r\n\r\n"}
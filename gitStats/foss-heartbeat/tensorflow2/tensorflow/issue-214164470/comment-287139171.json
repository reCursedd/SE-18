{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/287139171", "html_url": "https://github.com/tensorflow/tensorflow/issues/8403#issuecomment-287139171", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8403", "id": 287139171, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzEzOTE3MQ==", "user": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-16T17:52:00Z", "updated_at": "2017-03-16T17:52:00Z", "author_association": "MEMBER", "body_html": "<div class=\"email-fragment\">You could try linkshared = 1 while building the protobuf.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Thu, Mar 16, 2017 at 10:26 AM, Dan Barnes ***@***.***&gt; wrote:\n hi <a class=\"user-mention\" href=\"https://github.com/drpngx\">@drpngx</a> &lt;<a href=\"https://github.com/drpngx\">https://github.com/drpngx</a>&gt;. Thanks for your reply.\n\n I see what your saying. I linked to libtensorflow.so (not\n _pywrap_tensorflow) and rebuilt all dependencies pointing at\n libtensorflow.so and the error went away.\n\n However this proves quite a challenge for our buildsystem as all the\n dependencies pulled in for a particular C++ app by CMake also have to be\n rebuilt pointing at libtensorflow.so. This can be quite a lot of\n dependencies.\n\n Is there any specific bazel BUILD file I could modify to stop tensorflow\n statically linking against protobuf and make it dynamic instead?\n\n Specifically it feels like I could modify something in\n <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD</a>.\n However I have not used bazel before and am not sure where to start.\n\n Thanks\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"214164470\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8403\" href=\"https://github.com/tensorflow/tensorflow/issues/8403#issuecomment-287130932\">#8403 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AT_SbfnSjnbgPJTHsa398He84eXWsI4jks5rmXC_gaJpZM4Mc-QB\">https://github.com/notifications/unsubscribe-auth/AT_SbfnSjnbgPJTHsa398He84eXWsI4jks5rmXC_gaJpZM4Mc-QB</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "You could try linkshared = 1 while building the protobuf.\n\u2026\nOn Thu, Mar 16, 2017 at 10:26 AM, Dan Barnes ***@***.***> wrote:\n hi @drpngx <https://github.com/drpngx>. Thanks for your reply.\n\n I see what your saying. I linked to libtensorflow.so (not\n _pywrap_tensorflow) and rebuilt all dependencies pointing at\n libtensorflow.so and the error went away.\n\n However this proves quite a challenge for our buildsystem as all the\n dependencies pulled in for a particular C++ app by CMake also have to be\n rebuilt pointing at libtensorflow.so. This can be quite a lot of\n dependencies.\n\n Is there any specific bazel BUILD file I could modify to stop tensorflow\n statically linking against protobuf and make it dynamic instead?\n\n Specifically it feels like I could modify something in\n https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD.\n However I have not used bazel before and am not sure where to start.\n\n Thanks\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#8403 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/AT_SbfnSjnbgPJTHsa398He84eXWsI4jks5rmXC_gaJpZM4Mc-QB>\n .", "body": "You could try linkshared = 1 while building the protobuf.\n\nOn Thu, Mar 16, 2017 at 10:26 AM, Dan Barnes <notifications@github.com>\nwrote:\n\n> hi @drpngx <https://github.com/drpngx>. Thanks for your reply.\n>\n> I see what your saying. I linked to libtensorflow.so (not\n> _pywrap_tensorflow) and rebuilt all dependencies pointing at\n> libtensorflow.so and the error went away.\n>\n> However this proves quite a challenge for our buildsystem as all the\n> dependencies pulled in for a particular C++ app by CMake also have to be\n> rebuilt pointing at libtensorflow.so. This can be quite a lot of\n> dependencies.\n>\n> Is there any specific bazel BUILD file I could modify to stop tensorflow\n> statically linking against protobuf and make it dynamic instead?\n>\n> Specifically it feels like I could modify something in\n> https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD.\n> However I have not used bazel before and am not sure where to start.\n>\n> Thanks\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/8403#issuecomment-287130932>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AT_SbfnSjnbgPJTHsa398He84eXWsI4jks5rmXC_gaJpZM4Mc-QB>\n> .\n>\n"}
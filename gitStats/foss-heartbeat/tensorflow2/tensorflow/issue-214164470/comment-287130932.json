{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/287130932", "html_url": "https://github.com/tensorflow/tensorflow/issues/8403#issuecomment-287130932", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8403", "id": 287130932, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzEzMDkzMg==", "user": {"login": "dbarnes", "id": 5920715, "node_id": "MDQ6VXNlcjU5MjA3MTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/5920715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbarnes", "html_url": "https://github.com/dbarnes", "followers_url": "https://api.github.com/users/dbarnes/followers", "following_url": "https://api.github.com/users/dbarnes/following{/other_user}", "gists_url": "https://api.github.com/users/dbarnes/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbarnes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbarnes/subscriptions", "organizations_url": "https://api.github.com/users/dbarnes/orgs", "repos_url": "https://api.github.com/users/dbarnes/repos", "events_url": "https://api.github.com/users/dbarnes/events{/privacy}", "received_events_url": "https://api.github.com/users/dbarnes/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-16T17:24:49Z", "updated_at": "2017-03-16T17:24:49Z", "author_association": "NONE", "body_html": "<p>hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20959853\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/drpngx\">@drpngx</a>. Thanks for your reply.</p>\n<p>I see what your saying. I linked to <code>libtensorflow.so</code> (not <code>_pywrap_tensorflow</code>) and rebuilt all dependencies pointing at <code>libtensorflow.so</code> and the error went away.</p>\n<p>However this proves quite a challenge for our buildsystem as all the dependencies pulled in for a particular C++ app by CMake also have to be rebuilt pointing at <code>libtensorflow.so</code>. This can be quite a lot of dependencies.</p>\n<p>Is there any specific bazel <code>BUILD</code> file I could modify to stop tensorflow statically linking against protobuf  and make it dynamic instead?</p>\n<p>Specifically it feels like I could modify something in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD</a>. However I have not used bazel before and am not sure where to start.</p>\n<p>Thanks</p>", "body_text": "hi @drpngx. Thanks for your reply.\nI see what your saying. I linked to libtensorflow.so (not _pywrap_tensorflow) and rebuilt all dependencies pointing at libtensorflow.so and the error went away.\nHowever this proves quite a challenge for our buildsystem as all the dependencies pulled in for a particular C++ app by CMake also have to be rebuilt pointing at libtensorflow.so. This can be quite a lot of dependencies.\nIs there any specific bazel BUILD file I could modify to stop tensorflow statically linking against protobuf  and make it dynamic instead?\nSpecifically it feels like I could modify something in https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD. However I have not used bazel before and am not sure where to start.\nThanks", "body": "hi @drpngx. Thanks for your reply.\r\n\r\nI see what your saying. I linked to `libtensorflow.so` (not `_pywrap_tensorflow`) and rebuilt all dependencies pointing at `libtensorflow.so` and the error went away. \r\n\r\nHowever this proves quite a challenge for our buildsystem as all the dependencies pulled in for a particular C++ app by CMake also have to be rebuilt pointing at `libtensorflow.so`. This can be quite a lot of dependencies.\r\n\r\nIs there any specific bazel `BUILD` file I could modify to stop tensorflow statically linking against protobuf  and make it dynamic instead? \r\n\r\nSpecifically it feels like I could modify something in [https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/BUILD). However I have not used bazel before and am not sure where to start.\r\n\r\nThanks"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/335237647", "html_url": "https://github.com/tensorflow/tensorflow/issues/13583#issuecomment-335237647", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13583", "id": 335237647, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTIzNzY0Nw==", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-09T18:01:23Z", "updated_at": "2017-10-09T18:01:23Z", "author_association": "MEMBER", "body_html": "<p>This question is better asked on  <a href=\"http://stackoverflow.com/questions/tagged/tensorflow\" rel=\"nofollow\">StackOverflow</a> since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!</p>\n<p>That said, a few things to note:</p>\n<ul>\n<li>\n<p><code>tf.image.decode_jpeg</code> expects the encoded-JPEG bytes (i.e., the contents of the file). The use of <code>PIL</code> and in particular <code>PIL.Image.load()</code> suggests that the numpy array you're creating consists of the decoded contents (decoded by <code>PIL</code>). Which is why the <code>sess.run()</code> call is failing as it expects an encoded JPEG but you're providing it a decoded one.</p>\n</li>\n<li>\n<p>To provide the raw contents of the file as a feed, you'd want to do something like so:</p>\n</li>\n</ul>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">load_image</span>(<span class=\"pl-smi\">filename</span>):\n  <span class=\"pl-k\">with</span> <span class=\"pl-c1\">open</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>fullsize.jpeg<span class=\"pl-pds\">'</span></span>) <span class=\"pl-k\">as</span> f:\n    <span class=\"pl-k\">return</span> np.array(f.read())</pre></div>\n<p>Which will create the numpy array of the encoded JPEG bytes that you can feed to your session.</p>\n<p>Hope that helps.</p>", "body_text": "This question is better asked on  StackOverflow since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!\nThat said, a few things to note:\n\n\ntf.image.decode_jpeg expects the encoded-JPEG bytes (i.e., the contents of the file). The use of PIL and in particular PIL.Image.load() suggests that the numpy array you're creating consists of the decoded contents (decoded by PIL). Which is why the sess.run() call is failing as it expects an encoded JPEG but you're providing it a decoded one.\n\n\nTo provide the raw contents of the file as a feed, you'd want to do something like so:\n\n\ndef load_image(filename):\n  with open('fullsize.jpeg') as f:\n    return np.array(f.read())\nWhich will create the numpy array of the encoded JPEG bytes that you can feed to your session.\nHope that helps.", "body": "This question is better asked on  [StackOverflow](http://stackoverflow.com/questions/tagged/tensorflow) since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!\r\n\r\nThat said, a few things to note:\r\n\r\n- `tf.image.decode_jpeg` expects the encoded-JPEG bytes (i.e., the contents of the file). The use of `PIL` and in particular `PIL.Image.load()` suggests that the numpy array you're creating consists of the decoded contents (decoded by `PIL`). Which is why the `sess.run()` call is failing as it expects an encoded JPEG but you're providing it a decoded one.\r\n\r\n- To provide the raw contents of the file as a feed, you'd want to do something like so:\r\n\r\n```python\r\ndef load_image(filename):\r\n  with open('fullsize.jpeg') as f:\r\n    return np.array(f.read())\r\n```\r\nWhich will create the numpy array of the encoded JPEG bytes that you can feed to your session.\r\n\r\nHope that helps."}
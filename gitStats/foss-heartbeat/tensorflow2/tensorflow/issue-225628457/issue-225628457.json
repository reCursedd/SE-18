{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9589", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9589/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9589/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9589/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9589", "id": 225628457, "node_id": "MDU6SXNzdWUyMjU2Mjg0NTc=", "number": 9589, "title": "sparse_reshape could not generate correct SparseTensor shape before eval", "user": {"login": "antronshao001", "id": 12727293, "node_id": "MDQ6VXNlcjEyNzI3Mjkz", "avatar_url": "https://avatars1.githubusercontent.com/u/12727293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antronshao001", "html_url": "https://github.com/antronshao001", "followers_url": "https://api.github.com/users/antronshao001/followers", "following_url": "https://api.github.com/users/antronshao001/following{/other_user}", "gists_url": "https://api.github.com/users/antronshao001/gists{/gist_id}", "starred_url": "https://api.github.com/users/antronshao001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antronshao001/subscriptions", "organizations_url": "https://api.github.com/users/antronshao001/orgs", "repos_url": "https://api.github.com/users/antronshao001/repos", "events_url": "https://api.github.com/users/antronshao001/events{/privacy}", "received_events_url": "https://api.github.com/users/antronshao001/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-05-02T08:41:40Z", "updated_at": "2017-05-02T08:58:48Z", "closed_at": "2017-05-02T08:58:48Z", "author_association": "NONE", "body_html": "<p><strong>System information</strong></p>\n<p>Have I written custom code (as opposed to using a stock example script provided in TensorFlow): N/A<br>\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS X EL Capitan &amp; CentOS7.3.1611<br>\nTensorFlow installed from (source or binary): N/A (compiling from HEAD)<br>\nTensorFlow version (use command below): 1.1.0<br>\nCUDA/cuDNN version: none (AMD GPU)<br>\nExact command to reproduce:</p>\n<pre><code># python 2.7.12, tensorflow 1.1.0\nimport tensorflow as tf\nfrom tensorflow.python.ops import gen_sparse_ops\nfrom tensorflow.python.framework import sparse_tensor\nfrom tensorflow.python.ops import array_ops\n\nori = tf.SparseTensor([[1,2],[3,4],[5,5]], [1,2,5], [10,10])\na = tf.sparse_reshape(ori, [100,1])\nprint(a.get_shape())  # will get TensorShape([Dimension(None), Dimension(None)]) instead of (TensorShape([Dimension(100), Dimension(1)]))\n</code></pre>\n<p><strong>Describe the problem</strong><br>\nsparse_reshape could not generate correct SparseTensor shape before eval. (but it is correct with tf.Session().run(a))<br>\nThis will cause some problems for further matrix operation if we want to eval later.<br>\nThe issue came from sparse_ops.py, line 428:<br>\n<code>SparseTensor( reshaped_ind, array_ops.identity(sp_input.values), reshaped_shape)</code><br>\nSparseTensor could not convert <code>dense_shape=reshaped_shape</code> correctly before eval()</p>", "body_text": "System information\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): N/A\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS X EL Capitan & CentOS7.3.1611\nTensorFlow installed from (source or binary): N/A (compiling from HEAD)\nTensorFlow version (use command below): 1.1.0\nCUDA/cuDNN version: none (AMD GPU)\nExact command to reproduce:\n# python 2.7.12, tensorflow 1.1.0\nimport tensorflow as tf\nfrom tensorflow.python.ops import gen_sparse_ops\nfrom tensorflow.python.framework import sparse_tensor\nfrom tensorflow.python.ops import array_ops\n\nori = tf.SparseTensor([[1,2],[3,4],[5,5]], [1,2,5], [10,10])\na = tf.sparse_reshape(ori, [100,1])\nprint(a.get_shape())  # will get TensorShape([Dimension(None), Dimension(None)]) instead of (TensorShape([Dimension(100), Dimension(1)]))\n\nDescribe the problem\nsparse_reshape could not generate correct SparseTensor shape before eval. (but it is correct with tf.Session().run(a))\nThis will cause some problems for further matrix operation if we want to eval later.\nThe issue came from sparse_ops.py, line 428:\nSparseTensor( reshaped_ind, array_ops.identity(sp_input.values), reshaped_shape)\nSparseTensor could not convert dense_shape=reshaped_shape correctly before eval()", "body": "**System information**\r\n\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): N/A\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS X EL Capitan & CentOS7.3.1611\r\nTensorFlow installed from (source or binary): N/A (compiling from HEAD)\r\nTensorFlow version (use command below): 1.1.0\r\nCUDA/cuDNN version: none (AMD GPU)\r\nExact command to reproduce:\r\n\r\n````\r\n# python 2.7.12, tensorflow 1.1.0\r\nimport tensorflow as tf\r\nfrom tensorflow.python.ops import gen_sparse_ops\r\nfrom tensorflow.python.framework import sparse_tensor\r\nfrom tensorflow.python.ops import array_ops\r\n\r\nori = tf.SparseTensor([[1,2],[3,4],[5,5]], [1,2,5], [10,10])\r\na = tf.sparse_reshape(ori, [100,1])\r\nprint(a.get_shape())  # will get TensorShape([Dimension(None), Dimension(None)]) instead of (TensorShape([Dimension(100), Dimension(1)]))\r\n````\r\n\r\n**Describe the problem**\r\nsparse_reshape could not generate correct SparseTensor shape before eval. (but it is correct with tf.Session().run(a))\r\nThis will cause some problems for further matrix operation if we want to eval later.\r\nThe issue came from sparse_ops.py, line 428:\r\n```SparseTensor( reshaped_ind, array_ops.identity(sp_input.values), reshaped_shape)``` \r\nSparseTensor could not convert ```dense_shape=reshaped_shape``` correctly before eval()\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13777", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13777/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13777/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13777/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13777", "id": 266047396, "node_id": "MDU6SXNzdWUyNjYwNDczOTY=", "number": 13777, "title": "s390x support for google/nsync", "user": {"login": "Nayana-ibm", "id": 20816038, "node_id": "MDQ6VXNlcjIwODE2MDM4", "avatar_url": "https://avatars0.githubusercontent.com/u/20816038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nayana-ibm", "html_url": "https://github.com/Nayana-ibm", "followers_url": "https://api.github.com/users/Nayana-ibm/followers", "following_url": "https://api.github.com/users/Nayana-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/Nayana-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nayana-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nayana-ibm/subscriptions", "organizations_url": "https://api.github.com/users/Nayana-ibm/orgs", "repos_url": "https://api.github.com/users/Nayana-ibm/repos", "events_url": "https://api.github.com/users/Nayana-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/Nayana-ibm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2017-10-17T09:08:47Z", "updated_at": "2017-10-27T22:49:41Z", "closed_at": "2017-10-27T22:49:41Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: building from source</li>\n<li><strong>TensorFlow version (use command below)</strong>: master</li>\n<li><strong>Python version</strong>:  Python 2.7.12</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.6.1</li>\n<li><strong>Exact command to reproduce</strong>:  bazel build -c opt //tensorflow/tools/pip_package:build_pip_package</li>\n</ul>\n<p>Tensorflow master build is failing on s390x platform with an error below:</p>\n<pre><code>$ bazel build -c opt //tensorflow/tools/pip_package:build_pip_package\n.................................................\nERROR: /home/test/.cache/bazel/_bazel_test/dece280ae0e9dc772a9ff752f1374540/external/nsync/BUILD:401:13: Configurable attribute \"copts\" doesn't match this configuration (would a default condition help?).\nConditions checked:\n@nsync//:android_arm\n@nsync//:android_arm64\n@nsync//:android_armeabi\n@nsync//:android_x86_32\n@nsync//:android_x86_64\n@nsync//:clang_macos_x86_64\n@nsync//:gcc_linux_aarch64\n@nsync//:gcc_linux_ppc64\n@nsync//:gcc_linux_x86_64_1\n@nsync//:gcc_linux_x86_64_2\n@nsync//:ios_x86_64\n@nsync//:msvc_windows_x86_64.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n</code></pre>\n<p>Recently,  <a href=\"https://github.com/google/nsync\">google/nsync</a> is added to Tensorflow master as an <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/workspace.bzl\">external dependency</a>.<br>\nSo, s390x support needs to be added to nsync module which includes code changes in BUILD file as well as adding source code in nsync package for s390x.</p>\n<p>We could create platform specific subdirectory inside <a href=\"https://github.com/google/nsync\">nysnc/builds</a> for s390x by executing  tools/mkmakefile.sh script. Also, could build nsync separately on s390x by executing command make depend test.<br>\nHowever, Tensorflow also uses code from platform-specific sub directories available inside  <a href=\"https://github.com/google/nsync/tree/master/platform\">nsync/platform/ </a>  which has source code containing assembly instructions.</p>\n<p>Need information on how to generate similar code structure for s390x (we could see ppc, windows , arm etc platforms are supported).<br>\n<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7946809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gunan\">@gunan</a> As we are not able to create an issue on nsync repository, could you please let me know whom to contact for this?</p>\n<p>Note: In Tensorflow, nsync dependency is added through <a href=\"https://github.com/tensorflow/tensorflow/commit/b48cfaea2aea3707a33e60c10385a87e37101b95\">this </a>commit.</p>", "body_text": "System information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\nTensorFlow installed from (source or binary): building from source\nTensorFlow version (use command below): master\nPython version:  Python 2.7.12\nBazel version (if compiling from source): 0.6.1\nExact command to reproduce:  bazel build -c opt //tensorflow/tools/pip_package:build_pip_package\n\nTensorflow master build is failing on s390x platform with an error below:\n$ bazel build -c opt //tensorflow/tools/pip_package:build_pip_package\n.................................................\nERROR: /home/test/.cache/bazel/_bazel_test/dece280ae0e9dc772a9ff752f1374540/external/nsync/BUILD:401:13: Configurable attribute \"copts\" doesn't match this configuration (would a default condition help?).\nConditions checked:\n@nsync//:android_arm\n@nsync//:android_arm64\n@nsync//:android_armeabi\n@nsync//:android_x86_32\n@nsync//:android_x86_64\n@nsync//:clang_macos_x86_64\n@nsync//:gcc_linux_aarch64\n@nsync//:gcc_linux_ppc64\n@nsync//:gcc_linux_x86_64_1\n@nsync//:gcc_linux_x86_64_2\n@nsync//:ios_x86_64\n@nsync//:msvc_windows_x86_64.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n\nRecently,  google/nsync is added to Tensorflow master as an external dependency.\nSo, s390x support needs to be added to nsync module which includes code changes in BUILD file as well as adding source code in nsync package for s390x.\nWe could create platform specific subdirectory inside nysnc/builds for s390x by executing  tools/mkmakefile.sh script. Also, could build nsync separately on s390x by executing command make depend test.\nHowever, Tensorflow also uses code from platform-specific sub directories available inside  nsync/platform/   which has source code containing assembly instructions.\nNeed information on how to generate similar code structure for s390x (we could see ppc, windows , arm etc platforms are supported).\n@gunan As we are not able to create an issue on nsync repository, could you please let me know whom to contact for this?\nNote: In Tensorflow, nsync dependency is added through this commit.", "body": "### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: building from source\r\n- **TensorFlow version (use command below)**: master \r\n- **Python version**:  Python 2.7.12\r\n- **Bazel version (if compiling from source)**: 0.6.1\r\n- **Exact command to reproduce**:  bazel build -c opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\nTensorflow master build is failing on s390x platform with an error below: \r\n```\r\n$ bazel build -c opt //tensorflow/tools/pip_package:build_pip_package\r\n.................................................\r\nERROR: /home/test/.cache/bazel/_bazel_test/dece280ae0e9dc772a9ff752f1374540/external/nsync/BUILD:401:13: Configurable attribute \"copts\" doesn't match this configuration (would a default condition help?).\r\nConditions checked:\r\n@nsync//:android_arm\r\n@nsync//:android_arm64\r\n@nsync//:android_armeabi\r\n@nsync//:android_x86_32\r\n@nsync//:android_x86_64\r\n@nsync//:clang_macos_x86_64\r\n@nsync//:gcc_linux_aarch64\r\n@nsync//:gcc_linux_ppc64\r\n@nsync//:gcc_linux_x86_64_1\r\n@nsync//:gcc_linux_x86_64_2\r\n@nsync//:ios_x86_64\r\n@nsync//:msvc_windows_x86_64.\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\r\n```\r\n\r\nRecently,  [google/nsync](https://github.com/google/nsync) is added to Tensorflow master as an [external dependency](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/workspace.bzl).  \r\nSo, s390x support needs to be added to nsync module which includes code changes in BUILD file as well as adding source code in nsync package for s390x.   \r\n\r\nWe could create platform specific subdirectory inside [nysnc/builds](https://github.com/google/nsync) for s390x by executing  tools/mkmakefile.sh script. Also, could build nsync separately on s390x by executing command make depend test.\r\nHowever, Tensorflow also uses code from platform-specific sub directories available inside  [nsync/platform/ ](https://github.com/google/nsync/tree/master/platform)  which has source code containing assembly instructions. \r\n\r\nNeed information on how to generate similar code structure for s390x (we could see ppc, windows , arm etc platforms are supported).  \r\n@gunan As we are not able to create an issue on nsync repository, could you please let me know whom to contact for this? \r\n\r\nNote: In Tensorflow, nsync dependency is added through [this ](https://github.com/tensorflow/tensorflow/commit/b48cfaea2aea3707a33e60c10385a87e37101b95)commit. \r\n\r\n\r\n\r\n\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/405669188", "html_url": "https://github.com/tensorflow/tensorflow/issues/17246#issuecomment-405669188", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17246", "id": 405669188, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTY2OTE4OA==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-17T17:50:45Z", "updated_at": "2018-07-17T17:50:55Z", "author_association": "CONTRIBUTOR", "body_html": "<p>BTW, I just did a benchmark with TF on DLAMI v11 (with MKL) on Skylake 18 core, and I'm seeing 10x improvement if I fetch \"var+0\" instead of var. Could try with nightly because of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"342020869\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/20887\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/20887/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/20887\">#20887</a></p>\n<pre><code># fetching variable is slow from TF, because its single threaded\npython tf_numpy_benchmark.py --benchmark=fetch_cpu_variable --num-iters=200\nfetch_cpu_variable            :   2.0 GB/sec, min: 50.75, median: 50.89, mean: 50.94\n\n# however, there's a trick, adding 0 to variable makes it multithreaded 10x faster\npython tf_numpy_benchmark.py --benchmark=fetch_cpu_variable_plus0 --num-iters=200\nfetch_cpu_variable            :  33.1 GB/sec, min:  3.02, median:  3.21, mean:  3.22\n\n</code></pre>", "body_text": "BTW, I just did a benchmark with TF on DLAMI v11 (with MKL) on Skylake 18 core, and I'm seeing 10x improvement if I fetch \"var+0\" instead of var. Could try with nightly because of #20887\n# fetching variable is slow from TF, because its single threaded\npython tf_numpy_benchmark.py --benchmark=fetch_cpu_variable --num-iters=200\nfetch_cpu_variable            :   2.0 GB/sec, min: 50.75, median: 50.89, mean: 50.94\n\n# however, there's a trick, adding 0 to variable makes it multithreaded 10x faster\npython tf_numpy_benchmark.py --benchmark=fetch_cpu_variable_plus0 --num-iters=200\nfetch_cpu_variable            :  33.1 GB/sec, min:  3.02, median:  3.21, mean:  3.22", "body": "BTW, I just did a benchmark with TF on DLAMI v11 (with MKL) on Skylake 18 core, and I'm seeing 10x improvement if I fetch \"var+0\" instead of var. Could try with nightly because of https://github.com/tensorflow/tensorflow/issues/20887\r\n```\r\n# fetching variable is slow from TF, because its single threaded\r\npython tf_numpy_benchmark.py --benchmark=fetch_cpu_variable --num-iters=200\r\nfetch_cpu_variable            :   2.0 GB/sec, min: 50.75, median: 50.89, mean: 50.94\r\n\r\n# however, there's a trick, adding 0 to variable makes it multithreaded 10x faster\r\npython tf_numpy_benchmark.py --benchmark=fetch_cpu_variable_plus0 --num-iters=200\r\nfetch_cpu_variable            :  33.1 GB/sec, min:  3.02, median:  3.21, mean:  3.22\r\n\r\n```"}
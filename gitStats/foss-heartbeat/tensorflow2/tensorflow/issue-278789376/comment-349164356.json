{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/349164356", "html_url": "https://github.com/tensorflow/tensorflow/issues/15079#issuecomment-349164356", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15079", "id": 349164356, "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTE2NDM1Ng==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-05T01:25:32Z", "updated_at": "2017-12-05T01:25:32Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The documentation clearly states that the input should be a probability distribution.  It seems fine to add the check for the CPU version, without worrying about backwards compatibility guarantees (though we'd want to run internal tests before accepting the change).  However, on the GPU this check is sufficiently expensive that we can't implement it without a lot of trickery and, probably, some slowdown.  So my suggestion is:</p>\n<p>Add the check for the CPU impl, run all unit tests; then we run all internal unit tests and see if there are basic models that rely on broken behavior.</p>", "body_text": "The documentation clearly states that the input should be a probability distribution.  It seems fine to add the check for the CPU version, without worrying about backwards compatibility guarantees (though we'd want to run internal tests before accepting the change).  However, on the GPU this check is sufficiently expensive that we can't implement it without a lot of trickery and, probably, some slowdown.  So my suggestion is:\nAdd the check for the CPU impl, run all unit tests; then we run all internal unit tests and see if there are basic models that rely on broken behavior.", "body": "The documentation clearly states that the input should be a probability distribution.  It seems fine to add the check for the CPU version, without worrying about backwards compatibility guarantees (though we'd want to run internal tests before accepting the change).  However, on the GPU this check is sufficiently expensive that we can't implement it without a lot of trickery and, probably, some slowdown.  So my suggestion is:\r\n\r\nAdd the check for the CPU impl, run all unit tests; then we run all internal unit tests and see if there are basic models that rely on broken behavior."}
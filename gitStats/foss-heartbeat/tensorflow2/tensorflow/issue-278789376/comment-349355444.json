{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/349355444", "html_url": "https://github.com/tensorflow/tensorflow/issues/15079#issuecomment-349355444", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15079", "id": 349355444, "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTM1NTQ0NA==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-05T16:17:51Z", "updated_at": "2017-12-05T16:17:51Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">The cpu kernel can run `if (std::is_same&lt;Device, CPUDevice&gt;::value) {\n&lt;perform check&gt; }`.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Mon, Dec 4, 2017 at 8:37 PM, Yan Facai (\u989c\u53d1\u624d) ***@***.***&gt; wrote:\n Hi, <a class=\"user-mention\" href=\"https://github.com/ebrevdo\">@ebrevdo</a> &lt;<a href=\"https://github.com/ebrevdo\">https://github.com/ebrevdo</a>&gt; . I checked the implementation\n of SoftmaxCrossEntropyWithLogits: kernel functions in xent_op seems\n totally shared by both CPU and GPU. So I'm afraid that only checking in CPU\n impl is impossible.\n\n Is it good to check in python side, for example, using tf.reduce_sum?\n Take account of performance, perhaps we'd better make it optional.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"278789376\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/15079\" href=\"https://github.com/tensorflow/tensorflow/issues/15079#issuecomment-349193079\">#15079 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtim9CIO5enuzQ3RkpMlAb1AATlTWKnks5s9Mh9gaJpZM4Qzwxp\">https://github.com/notifications/unsubscribe-auth/ABtim9CIO5enuzQ3RkpMlAb1AATlTWKnks5s9Mh9gaJpZM4Qzwxp</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "The cpu kernel can run `if (std::is_same<Device, CPUDevice>::value) {\n<perform check> }`.\n\u2026\nOn Mon, Dec 4, 2017 at 8:37 PM, Yan Facai (\u989c\u53d1\u624d) ***@***.***> wrote:\n Hi, @ebrevdo <https://github.com/ebrevdo> . I checked the implementation\n of SoftmaxCrossEntropyWithLogits: kernel functions in xent_op seems\n totally shared by both CPU and GPU. So I'm afraid that only checking in CPU\n impl is impossible.\n\n Is it good to check in python side, for example, using tf.reduce_sum?\n Take account of performance, perhaps we'd better make it optional.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#15079 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtim9CIO5enuzQ3RkpMlAb1AATlTWKnks5s9Mh9gaJpZM4Qzwxp>\n .", "body": "The cpu kernel can run `if (std::is_same<Device, CPUDevice>::value) {\n<perform check> }`.\n\nOn Mon, Dec 4, 2017 at 8:37 PM, Yan Facai (\u989c\u53d1\u624d) <notifications@github.com>\nwrote:\n\n> Hi, @ebrevdo <https://github.com/ebrevdo> . I checked the implementation\n> of SoftmaxCrossEntropyWithLogits: kernel functions in xent_op seems\n> totally shared by both CPU and GPU. So I'm afraid that only checking in CPU\n> impl is impossible.\n>\n> Is it good to check in python side, for example, using tf.reduce_sum?\n> Take account of performance, perhaps we'd better make it optional.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/15079#issuecomment-349193079>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim9CIO5enuzQ3RkpMlAb1AATlTWKnks5s9Mh9gaJpZM4Qzwxp>\n> .\n>\n"}
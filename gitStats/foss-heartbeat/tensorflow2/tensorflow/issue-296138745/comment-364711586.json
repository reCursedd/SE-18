{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/364711586", "html_url": "https://github.com/tensorflow/tensorflow/issues/16924#issuecomment-364711586", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16924", "id": 364711586, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDcxMTU4Ng==", "user": {"login": "galv", "id": 4767568, "node_id": "MDQ6VXNlcjQ3Njc1Njg=", "avatar_url": "https://avatars0.githubusercontent.com/u/4767568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/galv", "html_url": "https://github.com/galv", "followers_url": "https://api.github.com/users/galv/followers", "following_url": "https://api.github.com/users/galv/following{/other_user}", "gists_url": "https://api.github.com/users/galv/gists{/gist_id}", "starred_url": "https://api.github.com/users/galv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/galv/subscriptions", "organizations_url": "https://api.github.com/users/galv/orgs", "repos_url": "https://api.github.com/users/galv/repos", "events_url": "https://api.github.com/users/galv/events{/privacy}", "received_events_url": "https://api.github.com/users/galv/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-11T01:39:22Z", "updated_at": "2018-02-11T01:39:22Z", "author_association": "NONE", "body_html": "<div class=\"email-fragment\">That's good to hear.\n\nI am building tensorflow using Bazel, and the building the external library\nusing CMake. A reasonable thing for me to do is to link against the latest\nnightly build, rather than building from source. (I built from source only\nbecause I was changing the error message to understand the problem better.)\n\nThe appropriate linker flags and so on are acquired via tf.sysconfig.*\nfunctions.\n\nI'll build a small test case myself (in progress right now...) and get back\nto this issue with the results I see.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Sat, Feb 10, 2018 at 5:28 PM, Derek Murray ***@***.***&gt; wrote:\n I can just confirm that I was able to build the internal version (with the\n IgnoreErrorsDatasetOp moved to a separate .so) as a PIP package and run\n tensorflow/contrib/data/python/kernel_tests/map_dataset_op_test.py, which\n invokes that op.\n\n I suspect there is something different in the way the custom op .so is\n built in our Bazel build, and how it is built in your CMake build. (Are you\n building TensorFlow using Bazel and then building the external library with\n CMake?) I'll follow up on this thread with more details when the code is\n available in the master branch.\n\n \u2014\n You are receiving this because you authored the thread.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"296138745\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16924\" href=\"https://github.com/tensorflow/tensorflow/issues/16924#issuecomment-364710874\">#16924 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AEi_UAB1v3m0CI1Y663pRATV52s17rgSks5tTkItgaJpZM4SBGlS\">https://github.com/notifications/unsubscribe-auth/AEi_UAB1v3m0CI1Y663pRATV52s17rgSks5tTkItgaJpZM4SBGlS</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n<div class=\"email-signature-reply\">-- \nDaniel Galvez\n<a href=\"http://danielgalvez.me\">http://danielgalvez.me</a>\n<a href=\"https://github.com/galv\">https://github.com/galv</a>\n</div>\n</div>", "body_text": "That's good to hear.\n\nI am building tensorflow using Bazel, and the building the external library\nusing CMake. A reasonable thing for me to do is to link against the latest\nnightly build, rather than building from source. (I built from source only\nbecause I was changing the error message to understand the problem better.)\n\nThe appropriate linker flags and so on are acquired via tf.sysconfig.*\nfunctions.\n\nI'll build a small test case myself (in progress right now...) and get back\nto this issue with the results I see.\n\u2026\nOn Sat, Feb 10, 2018 at 5:28 PM, Derek Murray ***@***.***> wrote:\n I can just confirm that I was able to build the internal version (with the\n IgnoreErrorsDatasetOp moved to a separate .so) as a PIP package and run\n tensorflow/contrib/data/python/kernel_tests/map_dataset_op_test.py, which\n invokes that op.\n\n I suspect there is something different in the way the custom op .so is\n built in our Bazel build, and how it is built in your CMake build. (Are you\n building TensorFlow using Bazel and then building the external library with\n CMake?) I'll follow up on this thread with more details when the code is\n available in the master branch.\n\n \u2014\n You are receiving this because you authored the thread.\n Reply to this email directly, view it on GitHub\n <#16924 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/AEi_UAB1v3m0CI1Y663pRATV52s17rgSks5tTkItgaJpZM4SBGlS>\n .\n\n\n-- \nDaniel Galvez\nhttp://danielgalvez.me\nhttps://github.com/galv", "body": "That's good to hear.\n\nI am building tensorflow using Bazel, and the building the external library\nusing CMake. A reasonable thing for me to do is to link against the latest\nnightly build, rather than building from source. (I built from source only\nbecause I was changing the error message to understand the problem better.)\n\nThe appropriate linker flags and so on are acquired via tf.sysconfig.*\nfunctions.\n\nI'll build a small test case myself (in progress right now...) and get back\nto this issue with the results I see.\n\nOn Sat, Feb 10, 2018 at 5:28 PM, Derek Murray <notifications@github.com>\nwrote:\n\n> I can just confirm that I was able to build the internal version (with the\n> IgnoreErrorsDatasetOp moved to a separate .so) as a PIP package and run\n> tensorflow/contrib/data/python/kernel_tests/map_dataset_op_test.py, which\n> invokes that op.\n>\n> I suspect there is something different in the way the custom op .so is\n> built in our Bazel build, and how it is built in your CMake build. (Are you\n> building TensorFlow using Bazel and then building the external library with\n> CMake?) I'll follow up on this thread with more details when the code is\n> available in the master branch.\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/16924#issuecomment-364710874>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AEi_UAB1v3m0CI1Y663pRATV52s17rgSks5tTkItgaJpZM4SBGlS>\n> .\n>\n\n\n\n-- \nDaniel Galvez\nhttp://danielgalvez.me\nhttps://github.com/galv\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/274670242", "html_url": "https://github.com/tensorflow/tensorflow/issues/6132#issuecomment-274670242", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6132", "id": 274670242, "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDY3MDI0Mg==", "user": {"login": "vvpreetham", "id": 16869974, "node_id": "MDQ6VXNlcjE2ODY5OTc0", "avatar_url": "https://avatars2.githubusercontent.com/u/16869974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vvpreetham", "html_url": "https://github.com/vvpreetham", "followers_url": "https://api.github.com/users/vvpreetham/followers", "following_url": "https://api.github.com/users/vvpreetham/following{/other_user}", "gists_url": "https://api.github.com/users/vvpreetham/gists{/gist_id}", "starred_url": "https://api.github.com/users/vvpreetham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vvpreetham/subscriptions", "organizations_url": "https://api.github.com/users/vvpreetham/orgs", "repos_url": "https://api.github.com/users/vvpreetham/repos", "events_url": "https://api.github.com/users/vvpreetham/events{/privacy}", "received_events_url": "https://api.github.com/users/vvpreetham/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-24T01:08:56Z", "updated_at": "2017-01-24T01:16:18Z", "author_association": "NONE", "body_html": "<div class=\"email-fragment\">Thanks for the quick response Wicke.\n\nI have done the following: tensorflow (v0.12)\n\nIn\nthe tensorflow/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/run_config.py\n\nLine 241: I have changed the code to:\n    self.tf_config = ConfigProto(allow_soft_placement=True,....\n\nThen in my files:\nI am using a LinearRegressor as follows:\n       config_ = run_config.RunConfig()\n       m = tf.contrib.learn.LinearRegressor(model_dir=model_dir,\n                                          config=config_,\n                                          feature_columns=wide_columns,\n                                          optimizer=tf.train.FtrlOptimizer(\n            learning_rate=0.2,\n            l1_regularization_strength=1.0,\n            l2_regularization_strength=1.0))\n\nWhich has a feed function:\ndef feed_fn(df):\n    with tf.device('/gpu:2'):\n        categorical_cols = {k: tf.SparseTensor(\n         indices=[[i, 0] for i in range(df[k].size)],\n         values=df[k].values,\n         shape=[df[k].size, 1]) for k in CATEGORICAL_COLUMNS}\n        label = tf.constant(df[REGRESSOR_LABEL_COLUMN].values)\n    return categorical_cols, label\n\nI get the error:\nInvalidArgumentError (see above for traceback): Cannot assign a device to\nnode 'SparseTensor_55/values': Could not satisfy explicit device\nspecification '/device:GPU:2' because no supported kernel for GPU devices\nis available.\n         [[Node: SparseTensor_55/values = Const[dtype=DT_STRING,\nvalue=Tensor&lt;type: string shape: [149999] values:\n6b76ea8a9a6046649c021c2c26f9e2e7 bf9319d59ac94dd396de82601d3ccba0\n4028cbe0384137e1013846732b4e009d...&gt;, _device=\"/device:GPU:2\"]()]]\n\nShould I use the scope for the variable (Given that SparseTensor is a\nvariable and not a constant?)</div>", "body_text": "Thanks for the quick response Wicke.\n\nI have done the following: tensorflow (v0.12)\n\nIn\nthe tensorflow/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/run_config.py\n\nLine 241: I have changed the code to:\n    self.tf_config = ConfigProto(allow_soft_placement=True,....\n\nThen in my files:\nI am using a LinearRegressor as follows:\n       config_ = run_config.RunConfig()\n       m = tf.contrib.learn.LinearRegressor(model_dir=model_dir,\n                                          config=config_,\n                                          feature_columns=wide_columns,\n                                          optimizer=tf.train.FtrlOptimizer(\n            learning_rate=0.2,\n            l1_regularization_strength=1.0,\n            l2_regularization_strength=1.0))\n\nWhich has a feed function:\ndef feed_fn(df):\n    with tf.device('/gpu:2'):\n        categorical_cols = {k: tf.SparseTensor(\n         indices=[[i, 0] for i in range(df[k].size)],\n         values=df[k].values,\n         shape=[df[k].size, 1]) for k in CATEGORICAL_COLUMNS}\n        label = tf.constant(df[REGRESSOR_LABEL_COLUMN].values)\n    return categorical_cols, label\n\nI get the error:\nInvalidArgumentError (see above for traceback): Cannot assign a device to\nnode 'SparseTensor_55/values': Could not satisfy explicit device\nspecification '/device:GPU:2' because no supported kernel for GPU devices\nis available.\n         [[Node: SparseTensor_55/values = Const[dtype=DT_STRING,\nvalue=Tensor<type: string shape: [149999] values:\n6b76ea8a9a6046649c021c2c26f9e2e7 bf9319d59ac94dd396de82601d3ccba0\n4028cbe0384137e1013846732b4e009d...>, _device=\"/device:GPU:2\"]()]]\n\nShould I use the scope for the variable (Given that SparseTensor is a\nvariable and not a constant?)", "body": "Thanks for the quick response Wicke.\r\n\r\nI have done the following: tensorflow (v0.12)\r\n\r\nIn\r\nthe tensorflow/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/run_config.py\r\n\r\nLine 241: I have changed the code to:\r\n    self.tf_config = ConfigProto(allow_soft_placement=True,....\r\n\r\nThen in my files: \r\nI am using a LinearRegressor as follows:\r\n       config_ = run_config.RunConfig()\r\n       m = tf.contrib.learn.LinearRegressor(model_dir=model_dir,\r\n                                          config=config_,\r\n                                          feature_columns=wide_columns,\r\n                                          optimizer=tf.train.FtrlOptimizer(\r\n            learning_rate=0.2,\r\n            l1_regularization_strength=1.0,\r\n            l2_regularization_strength=1.0))\r\n\r\nWhich has a feed function:\r\ndef feed_fn(df):\r\n    with tf.device('/gpu:2'):\r\n        categorical_cols = {k: tf.SparseTensor(\r\n         indices=[[i, 0] for i in range(df[k].size)],\r\n         values=df[k].values,\r\n         shape=[df[k].size, 1]) for k in CATEGORICAL_COLUMNS}\r\n        label = tf.constant(df[REGRESSOR_LABEL_COLUMN].values)\r\n    return categorical_cols, label\r\n\r\nI get the error:\r\nInvalidArgumentError (see above for traceback): Cannot assign a device to\r\nnode 'SparseTensor_55/values': Could not satisfy explicit device\r\nspecification '/device:GPU:2' because no supported kernel for GPU devices\r\nis available.\r\n         [[Node: SparseTensor_55/values = Const[dtype=DT_STRING,\r\nvalue=Tensor<type: string shape: [149999] values:\r\n6b76ea8a9a6046649c021c2c26f9e2e7 bf9319d59ac94dd396de82601d3ccba0\r\n4028cbe0384137e1013846732b4e009d...>, _device=\"/device:GPU:2\"]()]]\r\n\r\nShould I use the scope for the variable (Given that SparseTensor is a\r\nvariable and not a constant?)"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/288805826", "html_url": "https://github.com/tensorflow/tensorflow/issues/8569#issuecomment-288805826", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8569", "id": 288805826, "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODgwNTgyNg==", "user": {"login": "bowang", "id": 425637, "node_id": "MDQ6VXNlcjQyNTYzNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/425637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bowang", "html_url": "https://github.com/bowang", "followers_url": "https://api.github.com/users/bowang/followers", "following_url": "https://api.github.com/users/bowang/following{/other_user}", "gists_url": "https://api.github.com/users/bowang/gists{/gist_id}", "starred_url": "https://api.github.com/users/bowang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bowang/subscriptions", "organizations_url": "https://api.github.com/users/bowang/orgs", "repos_url": "https://api.github.com/users/bowang/repos", "events_url": "https://api.github.com/users/bowang/events{/privacy}", "received_events_url": "https://api.github.com/users/bowang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-23T17:51:55Z", "updated_at": "2017-03-23T17:51:55Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I looked into the tensorflow internals a bit deeper. The numbers gathered in gpu_tracer.cc (~ln 580) using CUPTI Activity API are consistent with NVIDIA Visual Profiler (NVVP). But these numbers are not used in RunMetadata.</p>\n<p>I can see the GPU perf numbers being used in direct_session.cc (~ln 535) to build the cost model. But the annotated cost graph is not incorporated into RunMetadata or used by tfprof.</p>\n<p>The numbers in RunMetadata are from executor.cc (~ln 1360) which are purely CPU-based. Thus, the numbers are actually GPU kernel launch time rather than kernel execution time.</p>", "body_text": "I looked into the tensorflow internals a bit deeper. The numbers gathered in gpu_tracer.cc (~ln 580) using CUPTI Activity API are consistent with NVIDIA Visual Profiler (NVVP). But these numbers are not used in RunMetadata.\nI can see the GPU perf numbers being used in direct_session.cc (~ln 535) to build the cost model. But the annotated cost graph is not incorporated into RunMetadata or used by tfprof.\nThe numbers in RunMetadata are from executor.cc (~ln 1360) which are purely CPU-based. Thus, the numbers are actually GPU kernel launch time rather than kernel execution time.", "body": "I looked into the tensorflow internals a bit deeper. The numbers gathered in gpu_tracer.cc (~ln 580) using CUPTI Activity API are consistent with NVIDIA Visual Profiler (NVVP). But these numbers are not used in RunMetadata.\r\n\r\nI can see the GPU perf numbers being used in direct_session.cc (~ln 535) to build the cost model. But the annotated cost graph is not incorporated into RunMetadata or used by tfprof.\r\n\r\nThe numbers in RunMetadata are from executor.cc (~ln 1360) which are purely CPU-based. Thus, the numbers are actually GPU kernel launch time rather than kernel execution time.\r\n"}
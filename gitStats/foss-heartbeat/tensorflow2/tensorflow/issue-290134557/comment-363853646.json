{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/363853646", "html_url": "https://github.com/tensorflow/tensorflow/pull/16253#issuecomment-363853646", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16253", "id": 363853646, "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mzg1MzY0Ng==", "user": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-07T17:54:21Z", "updated_at": "2018-02-07T17:54:21Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=10539540\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/samikama\">@samikama</a> I just pushed a fix, the test script works well on building the trt op for both python2 and 3, but then it detect a mem leak as:</p>\n<pre><code>2018-02-07 09:22:29.444379: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:1650] OK finished op building\nTraceback (most recent call last):\n  File \".../tensorflow/contrib/tensorrt/test/test_tftrt.py\", line 67, in &lt;module&gt;\n    inpDims[0])  # Get optimized graph\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 72, in CreateInferenceGraph\n    output_graph_def_string = to_bytes(out[1])\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 49, in py3bytes\n    return inp.encode('utf-8', errors='surrogateescape')\nAttributeError: 'SwigPyObject' object has no attribute 'encode'\nswig/python detected a memory leak of type 'string *', no destructor found.\nswig/python detected a memory leak of type 'string *', no destructor found.\n</code></pre>\n<p>For python 2 the error is like:</p>\n<pre><code>2018-02-07 09:44:28.066669: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:1650] OK finished op building\nTraceback (most recent call last):\n  File \".../tensorflow/contrib/tensorrt/test/test_tftrt.py\", line 67, in &lt;module&gt;\n    inpDims[0])  # Get optimized graph\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 74, in CreateInferenceGraph\n    if len(status) &lt; 2:\nTypeError: object of type 'SwigPyObject' has no len()\nswig/python detected a memory leak of type 'string *', no destructor found.\nswig/python detected a memory leak of type 'string *', no destructor found.\n</code></pre>\n<p>Any ideas?</p>", "body_text": "@samikama I just pushed a fix, the test script works well on building the trt op for both python2 and 3, but then it detect a mem leak as:\n2018-02-07 09:22:29.444379: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:1650] OK finished op building\nTraceback (most recent call last):\n  File \".../tensorflow/contrib/tensorrt/test/test_tftrt.py\", line 67, in <module>\n    inpDims[0])  # Get optimized graph\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 72, in CreateInferenceGraph\n    output_graph_def_string = to_bytes(out[1])\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 49, in py3bytes\n    return inp.encode('utf-8', errors='surrogateescape')\nAttributeError: 'SwigPyObject' object has no attribute 'encode'\nswig/python detected a memory leak of type 'string *', no destructor found.\nswig/python detected a memory leak of type 'string *', no destructor found.\n\nFor python 2 the error is like:\n2018-02-07 09:44:28.066669: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:1650] OK finished op building\nTraceback (most recent call last):\n  File \".../tensorflow/contrib/tensorrt/test/test_tftrt.py\", line 67, in <module>\n    inpDims[0])  # Get optimized graph\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 74, in CreateInferenceGraph\n    if len(status) < 2:\nTypeError: object of type 'SwigPyObject' has no len()\nswig/python detected a memory leak of type 'string *', no destructor found.\nswig/python detected a memory leak of type 'string *', no destructor found.\n\nAny ideas?", "body": "@samikama I just pushed a fix, the test script works well on building the trt op for both python2 and 3, but then it detect a mem leak as:\r\n```\r\n2018-02-07 09:22:29.444379: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:1650] OK finished op building\r\nTraceback (most recent call last):\r\n  File \".../tensorflow/contrib/tensorrt/test/test_tftrt.py\", line 67, in <module>\r\n    inpDims[0])  # Get optimized graph\r\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 72, in CreateInferenceGraph\r\n    output_graph_def_string = to_bytes(out[1])\r\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 49, in py3bytes\r\n    return inp.encode('utf-8', errors='surrogateescape')\r\nAttributeError: 'SwigPyObject' object has no attribute 'encode'\r\nswig/python detected a memory leak of type 'string *', no destructor found.\r\nswig/python detected a memory leak of type 'string *', no destructor found.\r\n```\r\nFor python 2 the error is like:\r\n```\r\n2018-02-07 09:44:28.066669: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:1650] OK finished op building\r\nTraceback (most recent call last):\r\n  File \".../tensorflow/contrib/tensorrt/test/test_tftrt.py\", line 67, in <module>\r\n    inpDims[0])  # Get optimized graph\r\n  File \".../tensorflow/contrib/tensorrt/python/trt_convert.py\", line 74, in CreateInferenceGraph\r\n    if len(status) < 2:\r\nTypeError: object of type 'SwigPyObject' has no len()\r\nswig/python detected a memory leak of type 'string *', no destructor found.\r\nswig/python detected a memory leak of type 'string *', no destructor found.\r\n```\r\nAny ideas?"}
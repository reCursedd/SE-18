{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17537", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17537/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17537/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17537/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17537", "id": 303347251, "node_id": "MDU6SXNzdWUzMDMzNDcyNTE=", "number": 17537, "title": "AVX512F is not compiled when running \"hello world\" test using Tensorflow 1.6 on Intel KNL", "user": {"login": "melodylail", "id": 12897407, "node_id": "MDQ6VXNlcjEyODk3NDA3", "avatar_url": "https://avatars3.githubusercontent.com/u/12897407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melodylail", "html_url": "https://github.com/melodylail", "followers_url": "https://api.github.com/users/melodylail/followers", "following_url": "https://api.github.com/users/melodylail/following{/other_user}", "gists_url": "https://api.github.com/users/melodylail/gists{/gist_id}", "starred_url": "https://api.github.com/users/melodylail/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melodylail/subscriptions", "organizations_url": "https://api.github.com/users/melodylail/orgs", "repos_url": "https://api.github.com/users/melodylail/repos", "events_url": "https://api.github.com/users/melodylail/events{/privacy}", "received_events_url": "https://api.github.com/users/melodylail/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-08T03:51:13Z", "updated_at": "2018-03-08T08:16:35Z", "closed_at": "2018-03-08T08:16:35Z", "author_association": "NONE", "body_html": "<hr>\n<h3>System information</h3>\n<ul>\n<li>\n<p><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nNo custom code</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from (source or binary)</strong>:<br>\nbinary, follow the instructions from intel,<br>\n<a href=\"https://software.intel.com/en-us/articles/intel-optimized-tensorflow-wheel-now-available#comment-1919528\" rel=\"nofollow\">https://software.intel.com/en-us/articles/intel-optimized-tensorflow-wheel-now-available#comment-1919528</a></p>\n</li>\n</ul>\n<p>Linux KNL101-04 4.13.0-21-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115932607\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/24\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/24/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/24\">#24</a>-Ubuntu SMP Mon Dec 18 17:29:16 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION=\"17.10 (Artful Aardvark)\"<br>\nVERSION_ID=\"17.10\"<br>\nVERSION_CODENAME=artful</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Ubuntu 7.2.0-8ubuntu3.2) 7.2.0<br>\nCopyright (C) 2017 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux KNL101-04 4.13.0-21-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115932607\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/24\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/24/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/24\">#24</a>-Ubuntu SMP Mon Dec 18 17:29:16 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nnumpy (1.13.3)<br>\nprotobuf (3.5.2)<br>\ntensorflow (1.6.0)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.6.0<br>\ntf.GIT_VERSION = b'unknown'<br>\ntf.COMPILER_VERSION = b'unknown'<br>\nSanity check: array([1], dtype=int32)</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH is unset<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\n./tf_env_collect.sh: line 105: nvidia-smi: command not found</p>\n<p>== cuda libs  ===================================================</p>\n<h3>Describe the problem</h3>\n<p>It seems that AVX512F is not compiled into released tensorflow 1.6. (but other KNL specific AVX512 instructions are compiled!!!)</p>\n<p>I run simple \"hello world\" test on KNL after install the tensorflow 1.6 by following the steps mentioned here!!</p>\n<p>it give me the message as follows:</p>\n<p>2018-03-08 13:08:26.924344: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F</p>\n<p>BTW, i try to compile the tensorflow 1.6 from source code, and adding all of avxxxxx as -copt to bazel build cmd, after build tensorflow 1.6 package correctly, re-run above test program, it seems the \"AVX512F\" is compiled!!!!</p>\n<h3>Source code / logs</h3>\n<p>Source code<br>\nsimple program, just print \"hello tensorflow\" using tensorflow.</p>\n<p>logs:<br>\n2018-03-08 13:08:26.924344: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F</p>", "body_text": "System information\n\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nNo custom code\n\n\nTensorFlow installed from (source or binary):\nbinary, follow the instructions from intel,\nhttps://software.intel.com/en-us/articles/intel-optimized-tensorflow-wheel-now-available#comment-1919528\n\n\nLinux KNL101-04 4.13.0-21-generic #24-Ubuntu SMP Mon Dec 18 17:29:16 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"17.10 (Artful Aardvark)\"\nVERSION_ID=\"17.10\"\nVERSION_CODENAME=artful\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Ubuntu 7.2.0-8ubuntu3.2) 7.2.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux KNL101-04 4.13.0-21-generic #24-Ubuntu SMP Mon Dec 18 17:29:16 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\nnumpy (1.13.3)\nprotobuf (3.5.2)\ntensorflow (1.6.0)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.6.0\ntf.GIT_VERSION = b'unknown'\ntf.COMPILER_VERSION = b'unknown'\nSanity check: array([1], dtype=int32)\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\n== cuda libs  ===================================================\nDescribe the problem\nIt seems that AVX512F is not compiled into released tensorflow 1.6. (but other KNL specific AVX512 instructions are compiled!!!)\nI run simple \"hello world\" test on KNL after install the tensorflow 1.6 by following the steps mentioned here!!\nit give me the message as follows:\n2018-03-08 13:08:26.924344: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F\nBTW, i try to compile the tensorflow 1.6 from source code, and adding all of avxxxxx as -copt to bazel build cmd, after build tensorflow 1.6 package correctly, re-run above test program, it seems the \"AVX512F\" is compiled!!!!\nSource code / logs\nSource code\nsimple program, just print \"hello tensorflow\" using tensorflow.\nlogs:\n2018-03-08 13:08:26.924344: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F", "body": "------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNo custom code\r\n\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary, follow the instructions from intel,\r\nhttps://software.intel.com/en-us/articles/intel-optimized-tensorflow-wheel-now-available#comment-1919528\r\n\r\nLinux KNL101-04 4.13.0-21-generic #24-Ubuntu SMP Mon Dec 18 17:29:16 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"17.10 (Artful Aardvark)\"\r\nVERSION_ID=\"17.10\"\r\nVERSION_CODENAME=artful\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 7.2.0-8ubuntu3.2) 7.2.0\r\nCopyright (C) 2017 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux KNL101-04 4.13.0-21-generic #24-Ubuntu SMP Mon Dec 18 17:29:16 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy (1.13.3)\r\nprotobuf (3.5.2)\r\ntensorflow (1.6.0)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.6.0\r\ntf.GIT_VERSION = b'unknown'\r\ntf.COMPILER_VERSION = b'unknown'\r\nSanity check: array([1], dtype=int32)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n\r\n### Describe the problem\r\n\r\nIt seems that AVX512F is not compiled into released tensorflow 1.6. (but other KNL specific AVX512 instructions are compiled!!!)\r\n\r\nI run simple \"hello world\" test on KNL after install the tensorflow 1.6 by following the steps mentioned here!!\r\n\r\nit give me the message as follows:\r\n\r\n2018-03-08 13:08:26.924344: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F\r\n\r\nBTW, i try to compile the tensorflow 1.6 from source code, and adding all of avxxxxx as -copt to bazel build cmd, after build tensorflow 1.6 package correctly, re-run above test program, it seems the \"AVX512F\" is compiled!!!!\r\n\r\n### Source code / logs\r\nSource code\r\nsimple program, just print \"hello tensorflow\" using tensorflow.\r\n\r\nlogs:\r\n2018-03-08 13:08:26.924344: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F"}
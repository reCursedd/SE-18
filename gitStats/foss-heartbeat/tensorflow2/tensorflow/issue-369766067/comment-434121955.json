{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/434121955", "html_url": "https://github.com/tensorflow/tensorflow/issues/22957#issuecomment-434121955", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22957", "id": 434121955, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDEyMTk1NQ==", "user": {"login": "fferroni", "id": 16327442, "node_id": "MDQ6VXNlcjE2MzI3NDQy", "avatar_url": "https://avatars1.githubusercontent.com/u/16327442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fferroni", "html_url": "https://github.com/fferroni", "followers_url": "https://api.github.com/users/fferroni/followers", "following_url": "https://api.github.com/users/fferroni/following{/other_user}", "gists_url": "https://api.github.com/users/fferroni/gists{/gist_id}", "starred_url": "https://api.github.com/users/fferroni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fferroni/subscriptions", "organizations_url": "https://api.github.com/users/fferroni/orgs", "repos_url": "https://api.github.com/users/fferroni/repos", "events_url": "https://api.github.com/users/fferroni/events{/privacy}", "received_events_url": "https://api.github.com/users/fferroni/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-29T23:49:22Z", "updated_at": "2018-10-29T23:52:17Z", "author_association": "NONE", "body_html": "<p>Yes,</p>\n<p>But the error still looks like this:</p>\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 39, in &lt;module&gt;\n    precision_mode=\"FP32\") \n  File \"/home/ferronfr/.local/lib/python3.5/site-packages/tensorflow/contrib/tensorrt/python/trt_convert.py\", line 153, in create_inference_graph\n    int(msg[0]))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Input 0 of node bn/cond/ReadVariableOp/Switch was passed float from bn/gamma:0 incompatible with expected resource.\n</code></pre>\n<p>I also tried to set K.set_learning_phase(0) but get an error like:</p>\n<pre><code>2018-10-30 00:47:18.401715: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count &gt;= 8): 1\n2018-10-30 00:47:18.403717: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:2853] Segment @scope '', converted to graph\n2018-10-30 00:47:18.406910: W tensorflow/contrib/tensorrt/convert/convert_graph.cc:724] Can't determine the device, constructing an allocator at device 0\n2018-10-30 00:47:18.535147: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger resources.cpp (199) - Cuda Error in gieCudaMalloc: 2\n2018-10-30 00:47:18.535494: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger resources.cpp (199) - Cuda Error in gieCudaMalloc: 2\n2018-10-30 00:47:18.535555: W tensorflow/contrib/tensorrt/convert/convert_graph.cc:857] Engine creation for segment 0, composed of 7 nodes failed: Internal: Failed to build TensorRT engine. Skipping...\n</code></pre>", "body_text": "Yes,\nBut the error still looks like this:\nTraceback (most recent call last):\n  File \"test.py\", line 39, in <module>\n    precision_mode=\"FP32\") \n  File \"/home/ferronfr/.local/lib/python3.5/site-packages/tensorflow/contrib/tensorrt/python/trt_convert.py\", line 153, in create_inference_graph\n    int(msg[0]))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Input 0 of node bn/cond/ReadVariableOp/Switch was passed float from bn/gamma:0 incompatible with expected resource.\n\nI also tried to set K.set_learning_phase(0) but get an error like:\n2018-10-30 00:47:18.401715: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 1\n2018-10-30 00:47:18.403717: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:2853] Segment @scope '', converted to graph\n2018-10-30 00:47:18.406910: W tensorflow/contrib/tensorrt/convert/convert_graph.cc:724] Can't determine the device, constructing an allocator at device 0\n2018-10-30 00:47:18.535147: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger resources.cpp (199) - Cuda Error in gieCudaMalloc: 2\n2018-10-30 00:47:18.535494: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger resources.cpp (199) - Cuda Error in gieCudaMalloc: 2\n2018-10-30 00:47:18.535555: W tensorflow/contrib/tensorrt/convert/convert_graph.cc:857] Engine creation for segment 0, composed of 7 nodes failed: Internal: Failed to build TensorRT engine. Skipping...", "body": "Yes,\r\n\r\nBut the error still looks like this:\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 39, in <module>\r\n    precision_mode=\"FP32\") \r\n  File \"/home/ferronfr/.local/lib/python3.5/site-packages/tensorflow/contrib/tensorrt/python/trt_convert.py\", line 153, in create_inference_graph\r\n    int(msg[0]))\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Input 0 of node bn/cond/ReadVariableOp/Switch was passed float from bn/gamma:0 incompatible with expected resource.\r\n```\r\n\r\n I also tried to set K.set_learning_phase(0) but get an error like:\r\n\r\n```\r\n2018-10-30 00:47:18.401715: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 1\r\n2018-10-30 00:47:18.403717: I tensorflow/contrib/tensorrt/convert/convert_nodes.cc:2853] Segment @scope '', converted to graph\r\n2018-10-30 00:47:18.406910: W tensorflow/contrib/tensorrt/convert/convert_graph.cc:724] Can't determine the device, constructing an allocator at device 0\r\n2018-10-30 00:47:18.535147: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger resources.cpp (199) - Cuda Error in gieCudaMalloc: 2\r\n2018-10-30 00:47:18.535494: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger resources.cpp (199) - Cuda Error in gieCudaMalloc: 2\r\n2018-10-30 00:47:18.535555: W tensorflow/contrib/tensorrt/convert/convert_graph.cc:857] Engine creation for segment 0, composed of 7 nodes failed: Internal: Failed to build TensorRT engine. Skipping...\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/397399678", "html_url": "https://github.com/tensorflow/tensorflow/issues/20026#issuecomment-397399678", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20026", "id": 397399678, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzM5OTY3OA==", "user": {"login": "jrbtaylor", "id": 15191858, "node_id": "MDQ6VXNlcjE1MTkxODU4", "avatar_url": "https://avatars3.githubusercontent.com/u/15191858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrbtaylor", "html_url": "https://github.com/jrbtaylor", "followers_url": "https://api.github.com/users/jrbtaylor/followers", "following_url": "https://api.github.com/users/jrbtaylor/following{/other_user}", "gists_url": "https://api.github.com/users/jrbtaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrbtaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrbtaylor/subscriptions", "organizations_url": "https://api.github.com/users/jrbtaylor/orgs", "repos_url": "https://api.github.com/users/jrbtaylor/repos", "events_url": "https://api.github.com/users/jrbtaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/jrbtaylor/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-14T18:46:46Z", "updated_at": "2018-06-14T18:53:55Z", "author_association": "NONE", "body_html": "<p>It appears the problem is in the copy_op_handler function where it copies the shape of the old op to the new one:</p>\n<pre><code>def copy_op_handler(info, op, new_inputs, copy_shape=True):\n...\n  if copy_shape:\n    for t, t_ in zip(op.outputs, op_.outputs):\n      t_.set_shape(t.get_shape())\n...\n</code></pre>\n<p>I changed the default copy_shape to False and now it works. None of the calls to copy_op_handler seem to pass this argument though - is there a reason why it defaults to True?</p>", "body_text": "It appears the problem is in the copy_op_handler function where it copies the shape of the old op to the new one:\ndef copy_op_handler(info, op, new_inputs, copy_shape=True):\n...\n  if copy_shape:\n    for t, t_ in zip(op.outputs, op_.outputs):\n      t_.set_shape(t.get_shape())\n...\n\nI changed the default copy_shape to False and now it works. None of the calls to copy_op_handler seem to pass this argument though - is there a reason why it defaults to True?", "body": "It appears the problem is in the copy_op_handler function where it copies the shape of the old op to the new one:\r\n```\r\ndef copy_op_handler(info, op, new_inputs, copy_shape=True):\r\n...\r\n  if copy_shape:\r\n    for t, t_ in zip(op.outputs, op_.outputs):\r\n      t_.set_shape(t.get_shape())\r\n...\r\n```\r\nI changed the default copy_shape to False and now it works. None of the calls to copy_op_handler seem to pass this argument though - is there a reason why it defaults to True?\r\n"}
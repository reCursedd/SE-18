{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/282053748", "html_url": "https://github.com/tensorflow/tensorflow/issues/7789#issuecomment-282053748", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7789", "id": 282053748, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MjA1Mzc0OA==", "user": {"login": "spmckenney", "id": 13424614, "node_id": "MDQ6VXNlcjEzNDI0NjE0", "avatar_url": "https://avatars3.githubusercontent.com/u/13424614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spmckenney", "html_url": "https://github.com/spmckenney", "followers_url": "https://api.github.com/users/spmckenney/followers", "following_url": "https://api.github.com/users/spmckenney/following{/other_user}", "gists_url": "https://api.github.com/users/spmckenney/gists{/gist_id}", "starred_url": "https://api.github.com/users/spmckenney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spmckenney/subscriptions", "organizations_url": "https://api.github.com/users/spmckenney/orgs", "repos_url": "https://api.github.com/users/spmckenney/repos", "events_url": "https://api.github.com/users/spmckenney/events{/privacy}", "received_events_url": "https://api.github.com/users/spmckenney/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-23T17:01:55Z", "updated_at": "2017-02-23T17:02:11Z", "author_association": "NONE", "body_html": "<p>Perhaps it would be a little more clear to have an interface such as:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-en\">TensorFlowTestCase</span>(<span class=\"pl-e\">googletest</span>.<span class=\"pl-e\">TestCase</span>):\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_session</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>,\n                   <span class=\"pl-smi\">graph</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">None</span>,\n                   <span class=\"pl-smi\">config</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">None</span>,\n                   <span class=\"pl-smi\">use_device</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/device:CPU:0<span class=\"pl-pds\">\"</span></span>,\n                   <span class=\"pl-smi\">force_device_placement</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>)</pre></div>\n<p>Forcing GPU use could then be done with <code>sess = self.test_session(use_device=\"/device:GPU:0\", force_device_placement=True)</code>. This would also deconvolve the selecting of a device and the forcing of its use, unlike the current implementation (i.e. <code>sess = self.test_session(use_gpu=False, force_gpu=True)</code> &lt;- what happens?).</p>\n<p>However, the goal of the change is to generalize all of the tests, which may also impose significant costs. There is also a bit more gpu-specific code in the method that would have to be dealt with. I agree that forking and seeing how it plays out is a good idea. I'll report back in a couple of days with how it is going.</p>", "body_text": "Perhaps it would be a little more clear to have an interface such as:\nclass TensorFlowTestCase(googletest.TestCase):\n  def test_session(self,\n                   graph=None,\n                   config=None,\n                   use_device=\"/device:CPU:0\",\n                   force_device_placement=False)\nForcing GPU use could then be done with sess = self.test_session(use_device=\"/device:GPU:0\", force_device_placement=True). This would also deconvolve the selecting of a device and the forcing of its use, unlike the current implementation (i.e. sess = self.test_session(use_gpu=False, force_gpu=True) <- what happens?).\nHowever, the goal of the change is to generalize all of the tests, which may also impose significant costs. There is also a bit more gpu-specific code in the method that would have to be dealt with. I agree that forking and seeing how it plays out is a good idea. I'll report back in a couple of days with how it is going.", "body": "Perhaps it would be a little more clear to have an interface such as:\r\n```python\r\nclass TensorFlowTestCase(googletest.TestCase):\r\n  def test_session(self,\r\n                   graph=None,\r\n                   config=None,\r\n                   use_device=\"/device:CPU:0\",\r\n                   force_device_placement=False)\r\n```\r\nForcing GPU use could then be done with `sess = self.test_session(use_device=\"/device:GPU:0\", force_device_placement=True)`. This would also deconvolve the selecting of a device and the forcing of its use, unlike the current implementation (i.e. `sess = self.test_session(use_gpu=False, force_gpu=True)` <- what happens?).\r\n\r\nHowever, the goal of the change is to generalize all of the tests, which may also impose significant costs. There is also a bit more gpu-specific code in the method that would have to be dealt with. I agree that forking and seeing how it plays out is a good idea. I'll report back in a couple of days with how it is going."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/235071731", "pull_request_review_id": 176843815, "id": 235071731, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTA3MTczMQ==", "diff_hunk": "@@ -406,22 +406,43 @@ tensorflow::Status SegmentGraph(\n   // Use a union-find to collect the nodes that belong to the same\n   // segment. A node value of nullptr indicates that the node is not a candidate\n   // for TRT.\n+  std::unordered_set<string> unsupported_ops;\n+  int num_unsupported_ops = 0;\n   std::vector<UnionFind<SimpleNode*>> node_segments;\n   for (int i = 0; i < graph->num_node_ids(); ++i) {\n     SimpleNode* node = graph->FindNodeId(i);\n     if (options.exclude_node_list.count(node->name()) != 0) {\n-      VLOG(1) << \"Not a TF-TRT candidate: \" << node->name()\n-              << \" (excluded by segmenter option).\";\n+      VLOG(1) << \"Not a TF-TRT candidate, \"\n+              << \"(Op type: \" << node->tf_node()->type_string() << \"), \"\n+              << \"(Op name: \" << node->name() << \"), \"\n+              << \"(Reason: excluded by segmenter option)\";\n+      unsupported_ops.emplace(node->tf_node()->type_string());\n+      num_unsupported_ops++;\n       node = nullptr;\n     } else {\n       const Status status = candidate_fn(node->tf_node());\n       if (!status.ok()) {\n-        VLOG(1) << \"Not a TF-TRT candidate: \" << node->name() << \": \" << status;\n+        VLOG(1) << \"Not a TF-TRT candidate, \"\n+                << \"(Op type: \" << node->tf_node()->type_string() << \"), \"\n+                << \"(Op name: \" << node->name() << \"), \"\n+                << \"(Reason: \" << status << \")\";\n+        unsupported_ops.emplace(node->tf_node()->type_string());\n+        num_unsupported_ops++;\n         node = nullptr;\n       }\n     }\n     node_segments.emplace_back(node);\n   }\n+  string msg = \"There are \"\n+               + std::to_string(num_unsupported_ops)\n+               + \" unsupported ops of \"\n+               + std::to_string(unsupported_ops.size())\n+               + \" different types in the graph: \";\n+  for (const auto& elem: unsupported_ops) {\n+    msg += elem + \", \";\n+  }\n+  LOG(INFO) << msg << \"(For more information see \"", "path": "tensorflow/contrib/tensorrt/segment/segment.cc", "position": 48, "original_position": 42, "commit_id": "09b97212ff568282aa07af48eb3ae908946de4c7", "original_commit_id": "e13fa8d670b2dba7ba337471c918e5dbbeca3072", "user": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "body": "This may make people confused, since some of those op types are not really unsupported, but may be excluded by the segment options, or some other reasons (e.g. Reshape op is supported but only for the ones that doesn't change the batch dimension). What do you think?", "created_at": "2018-11-20T16:20:48Z", "updated_at": "2018-11-21T16:05:07Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/23866#discussion_r235071731", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23866", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/235071731"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/23866#discussion_r235071731"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23866"}}, "body_html": "<p>This may make people confused, since some of those op types are not really unsupported, but may be excluded by the segment options, or some other reasons (e.g. Reshape op is supported but only for the ones that doesn't change the batch dimension). What do you think?</p>", "body_text": "This may make people confused, since some of those op types are not really unsupported, but may be excluded by the segment options, or some other reasons (e.g. Reshape op is supported but only for the ones that doesn't change the batch dimension). What do you think?"}
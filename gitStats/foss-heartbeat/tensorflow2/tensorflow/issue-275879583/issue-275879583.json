{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14771", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14771/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14771/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14771/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14771", "id": 275879583, "node_id": "MDU6SXNzdWUyNzU4Nzk1ODM=", "number": 14771, "title": "bazel 0.5.4 says \"ERROR: infinite symlink expansion detected\"", "user": {"login": "eLvErDe", "id": 1586757, "node_id": "MDQ6VXNlcjE1ODY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1586757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eLvErDe", "html_url": "https://github.com/eLvErDe", "followers_url": "https://api.github.com/users/eLvErDe/followers", "following_url": "https://api.github.com/users/eLvErDe/following{/other_user}", "gists_url": "https://api.github.com/users/eLvErDe/gists{/gist_id}", "starred_url": "https://api.github.com/users/eLvErDe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eLvErDe/subscriptions", "organizations_url": "https://api.github.com/users/eLvErDe/orgs", "repos_url": "https://api.github.com/users/eLvErDe/repos", "events_url": "https://api.github.com/users/eLvErDe/events{/privacy}", "received_events_url": "https://api.github.com/users/eLvErDe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-21T22:20:43Z", "updated_at": "2017-11-22T20:05:20Z", "closed_at": "2017-11-22T20:05:20Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>I just tried to update my build script (that worked perfectly fine on 1.2.1 and 1.3.0) and it fails with a not-understandable error.<br>\nEverything is exactly the same, build is done in a clean ephemeral environment. The only difference is that I updated bazel to 0.5.4 per TF configure script request...</p>\n<pre><code>____Loading package: @boringssl//\n____Loading package: @org_python_license//\n____Loading package: tensorflow/compiler/xla\n____Loading package: tensorflow/core/kernels/neon\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 41,040 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 98,480 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 288,648 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 430,920 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 584,136 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 746,928 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 918,008 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,090,296 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,254,456 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,363,896 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,545,840 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,716,840 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,838,592 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 2,023,272 bytes\n____Loading package: @sqlite_archive//\n____Loading package: tensorflow/core/kernels/hexagon\n____Loading package: tensorflow/compiler/xla/legacy_flags\nERROR: infinite symlink expansion detected\n[start of symlink chain]\n/build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/org_tensorflow\n/build/python-tensorflow-cuda-1.4.0\n[end of symlink chain]\n.\nERROR: /build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/llvm/BUILD:186:1: no such package '@org_tensorflow//third_party/llvm': Could not access /build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/org_tensorflow: Infinite symlink expansion and referenced by '@llvm//:abi_breaking_gen'.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n</code></pre>\n<p>And the configure-script:</p>\n<pre><code>Please specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3.4\n\nFound possible Python library paths:\n  /usr/local/lib/python3.4/dist-packages\n  /usr/lib/python3/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python3.4/dist-packages]\n/usr/lib/python3/dist-packages/\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: Y\njemalloc as malloc support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: Y\nGoogle Cloud Platform support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: Y\nHadoop File System support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: Y\nAmazon S3 File System support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: Y\nXLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with GDR support? [y/N]: Y\nGDR support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: Y\nVERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with OpenCL support? [y/N]: N\nNo OpenCL support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with CUDA support? [y/N]: N\nNo CUDA support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with MPI support? [y/N]: N\nNo MPI support will be enabled for TensorFlow.\n\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -mavx -msse4.1 -msse4.2\n</code></pre>", "body_text": "Hi,\nI just tried to update my build script (that worked perfectly fine on 1.2.1 and 1.3.0) and it fails with a not-understandable error.\nEverything is exactly the same, build is done in a clean ephemeral environment. The only difference is that I updated bazel to 0.5.4 per TF configure script request...\n____Loading package: @boringssl//\n____Loading package: @org_python_license//\n____Loading package: tensorflow/compiler/xla\n____Loading package: tensorflow/core/kernels/neon\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 41,040 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 98,480 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 288,648 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 430,920 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 584,136 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 746,928 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 918,008 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,090,296 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,254,456 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,363,896 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,545,840 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,716,840 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,838,592 bytes\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 2,023,272 bytes\n____Loading package: @sqlite_archive//\n____Loading package: tensorflow/core/kernels/hexagon\n____Loading package: tensorflow/compiler/xla/legacy_flags\nERROR: infinite symlink expansion detected\n[start of symlink chain]\n/build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/org_tensorflow\n/build/python-tensorflow-cuda-1.4.0\n[end of symlink chain]\n.\nERROR: /build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/llvm/BUILD:186:1: no such package '@org_tensorflow//third_party/llvm': Could not access /build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/org_tensorflow: Infinite symlink expansion and referenced by '@llvm//:abi_breaking_gen'.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n\nAnd the configure-script:\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3.4\n\nFound possible Python library paths:\n  /usr/local/lib/python3.4/dist-packages\n  /usr/lib/python3/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python3.4/dist-packages]\n/usr/lib/python3/dist-packages/\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: Y\njemalloc as malloc support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: Y\nGoogle Cloud Platform support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: Y\nHadoop File System support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: Y\nAmazon S3 File System support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: Y\nXLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with GDR support? [y/N]: Y\nGDR support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: Y\nVERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with OpenCL support? [y/N]: N\nNo OpenCL support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with CUDA support? [y/N]: N\nNo CUDA support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with MPI support? [y/N]: N\nNo MPI support will be enabled for TensorFlow.\n\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -mavx -msse4.1 -msse4.2", "body": "Hi,\r\n\r\nI just tried to update my build script (that worked perfectly fine on 1.2.1 and 1.3.0) and it fails with a not-understandable error.\r\nEverything is exactly the same, build is done in a clean ephemeral environment. The only difference is that I updated bazel to 0.5.4 per TF configure script request...\r\n\r\n```\r\n____Loading package: @boringssl//\r\n____Loading package: @org_python_license//\r\n____Loading package: tensorflow/compiler/xla\r\n____Loading package: tensorflow/core/kernels/neon\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 41,040 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 98,480 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 288,648 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 430,920 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 584,136 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 746,928 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 918,008 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,090,296 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,254,456 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,363,896 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,545,840 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,716,840 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 1,838,592 bytes\r\n____Downloading http://www.sqlite.org/2017/sqlite-amalgamation-3200000.zip: 2,023,272 bytes\r\n____Loading package: @sqlite_archive//\r\n____Loading package: tensorflow/core/kernels/hexagon\r\n____Loading package: tensorflow/compiler/xla/legacy_flags\r\nERROR: infinite symlink expansion detected\r\n[start of symlink chain]\r\n/build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/org_tensorflow\r\n/build/python-tensorflow-cuda-1.4.0\r\n[end of symlink chain]\r\n.\r\nERROR: /build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/llvm/BUILD:186:1: no such package '@org_tensorflow//third_party/llvm': Could not access /build/python-tensorflow-cuda-1.4.0/.cache/bazel/_bazel_pbuilder/436710022b7d9d872ccd97b57710586f/external/org_tensorflow: Infinite symlink expansion and referenced by '@llvm//:abi_breaking_gen'.\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\r\n```\r\nAnd the configure-script:\r\n\r\n```\r\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3.4\r\n\r\nFound possible Python library paths:\r\n  /usr/local/lib/python3.4/dist-packages\r\n  /usr/lib/python3/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python3.4/dist-packages]\r\n/usr/lib/python3/dist-packages/\r\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: Y\r\njemalloc as malloc support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: Y\r\nGoogle Cloud Platform support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: Y\r\nHadoop File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: Y\r\nAmazon S3 File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: Y\r\nXLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with GDR support? [y/N]: Y\r\nGDR support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with VERBS support? [y/N]: Y\r\nVERBS support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL support? [y/N]: N\r\nNo OpenCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: N\r\nNo CUDA support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: N\r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -mavx -msse4.1 -msse4.2\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6693", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6693/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6693/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6693/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6693", "id": 199193691, "node_id": "MDU6SXNzdWUxOTkxOTM2OTE=", "number": 6693, "title": "Misnamed libcuda.dylib. (CUDA 8.0, macOS 10.12)", "user": {"login": "djwbrown", "id": 1072419, "node_id": "MDQ6VXNlcjEwNzI0MTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/1072419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djwbrown", "html_url": "https://github.com/djwbrown", "followers_url": "https://api.github.com/users/djwbrown/followers", "following_url": "https://api.github.com/users/djwbrown/following{/other_user}", "gists_url": "https://api.github.com/users/djwbrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/djwbrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djwbrown/subscriptions", "organizations_url": "https://api.github.com/users/djwbrown/orgs", "repos_url": "https://api.github.com/users/djwbrown/repos", "events_url": "https://api.github.com/users/djwbrown/events{/privacy}", "received_events_url": "https://api.github.com/users/djwbrown/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2017-01-06T13:11:09Z", "updated_at": "2017-01-29T07:20:30Z", "closed_at": "2017-01-29T07:20:30Z", "author_association": "NONE", "body_html": "<h3>Misnamed <code>libcuda.dylib</code> in prebuilt binary. (CUDA 8.0, macOS 10.12).</h3>\n<p>Tensorflow fails to load <code>libcuda.1.dylib</code>, a file which does not exist for CUDA 8.0 on macOS. The filename is <code>libcuda.dylib</code>.</p>\n<p>Resolved by <code>sudo ln -s /usr/local/cuda/lib/libcuda.dylib /usr/local/cuda/lib/libcuda.1.dylib</code>.</p>\n<p>Preferable solution is a change to <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/dso_loader.cc#L82\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/dso_loader.cc#L82</a>.</p>\n<p>I would change <code>FormatLibraryFileName(\"cuda\", \"1\")</code> to <code>FormatLibraryFileName(\"cuda\")</code>, but I'm not sure on which OS and CUDA versions this is the correct naming scheme. Possibly a check is needed, <code>if ( stoi(GetCudaVersion()) &gt;= 8 ) {...}</code> and maybe <code>if (__APPLE__) {...}</code>.</p>\n<h3>Related issue</h3>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"153686414\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2278\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2278/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2278\">#2278</a><br>\nSolution provided <a href=\"https://github.com/tensorflow/tensorflow/issues/2278#issuecomment-244828047\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2278/hovercard\">here</a> by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=9784\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/eagleflo\">@eagleflo</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13022981\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/martinianodl\">@martinianodl</a>.</p>\n<h3>Environment info</h3>\n<p>macOS 10.12.2<br>\nCUDA Toolkit 8.0</p>\n<pre><code>ls -l /usr/local/cuda/lib/libcud*\nlrwxr-xr-x  1 root  wheel     33 Jan  6 14:34 /usr/local/cuda/lib/libcuda.1.dylib -&gt; /usr/local/cuda/lib/libcuda.dylib\n-rwxr-xr-x@ 1 root  wheel  13504 Nov  3 20:39 /usr/local/cuda/lib/libcuda.dylib\nlrwxr-xr-x@ 1 root  wheel     45 Nov  3 20:40 /usr/local/cuda/lib/libcudadevrt.a -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudadevrt.a\nlrwxr-xr-x@ 1 root  wheel     50 Nov  3 20:40 /usr/local/cuda/lib/libcudart.8.0.dylib -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudart.8.0.dylib\nlrwxr-xr-x@ 1 root  wheel     46 Nov  3 20:40 /usr/local/cuda/lib/libcudart.dylib -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudart.dylib\nlrwxr-xr-x@ 1 root  wheel     49 Nov  3 20:40 /usr/local/cuda/lib/libcudart_static.a -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudart_static.a\nlrwxr-xr-x  1 root  wheel     47 Jan  6 13:19 /usr/local/cuda/lib/libcudnn.5.dylib -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudnn.5.dylib\nlrwxr-xr-x  1 root  wheel     45 Jan  6 13:19 /usr/local/cuda/lib/libcudnn.dylib -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudnn.dylib\nlrwxr-xr-x  1 root  wheel     48 Jan  6 13:19 /usr/local/cuda/lib/libcudnn_static.a -&gt; /Developer/NVIDIA/CUDA-8.0/lib/libcudnn_static.a\n\n</code></pre>\n<p>Installed as a virtualenv with the prebuilt binary.</p>\n<p>TF_BINARY_URL=<a href=\"https://storage.googleapis.com/tensorflow/mac/gpu/tensorflow_gpu-0.12.1-py3-none-any.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/mac/gpu/tensorflow_gpu-0.12.1-py3-none-any.whl</a></p>\n<pre><code>&gt;&gt;&gt; tf.__version__\n'0.12.1'\n</code></pre>", "body_text": "Misnamed libcuda.dylib in prebuilt binary. (CUDA 8.0, macOS 10.12).\nTensorflow fails to load libcuda.1.dylib, a file which does not exist for CUDA 8.0 on macOS. The filename is libcuda.dylib.\nResolved by sudo ln -s /usr/local/cuda/lib/libcuda.dylib /usr/local/cuda/lib/libcuda.1.dylib.\nPreferable solution is a change to https://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/dso_loader.cc#L82.\nI would change FormatLibraryFileName(\"cuda\", \"1\") to FormatLibraryFileName(\"cuda\"), but I'm not sure on which OS and CUDA versions this is the correct naming scheme. Possibly a check is needed, if ( stoi(GetCudaVersion()) >= 8 ) {...} and maybe if (__APPLE__) {...}.\nRelated issue\n#2278\nSolution provided here by @eagleflo, @martinianodl.\nEnvironment info\nmacOS 10.12.2\nCUDA Toolkit 8.0\nls -l /usr/local/cuda/lib/libcud*\nlrwxr-xr-x  1 root  wheel     33 Jan  6 14:34 /usr/local/cuda/lib/libcuda.1.dylib -> /usr/local/cuda/lib/libcuda.dylib\n-rwxr-xr-x@ 1 root  wheel  13504 Nov  3 20:39 /usr/local/cuda/lib/libcuda.dylib\nlrwxr-xr-x@ 1 root  wheel     45 Nov  3 20:40 /usr/local/cuda/lib/libcudadevrt.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudadevrt.a\nlrwxr-xr-x@ 1 root  wheel     50 Nov  3 20:40 /usr/local/cuda/lib/libcudart.8.0.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart.8.0.dylib\nlrwxr-xr-x@ 1 root  wheel     46 Nov  3 20:40 /usr/local/cuda/lib/libcudart.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart.dylib\nlrwxr-xr-x@ 1 root  wheel     49 Nov  3 20:40 /usr/local/cuda/lib/libcudart_static.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart_static.a\nlrwxr-xr-x  1 root  wheel     47 Jan  6 13:19 /usr/local/cuda/lib/libcudnn.5.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudnn.5.dylib\nlrwxr-xr-x  1 root  wheel     45 Jan  6 13:19 /usr/local/cuda/lib/libcudnn.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudnn.dylib\nlrwxr-xr-x  1 root  wheel     48 Jan  6 13:19 /usr/local/cuda/lib/libcudnn_static.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudnn_static.a\n\n\nInstalled as a virtualenv with the prebuilt binary.\nTF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/gpu/tensorflow_gpu-0.12.1-py3-none-any.whl\n>>> tf.__version__\n'0.12.1'", "body": "### Misnamed `libcuda.dylib` in prebuilt binary. (CUDA 8.0, macOS 10.12).\r\nTensorflow fails to load `libcuda.1.dylib`, a file which does not exist for CUDA 8.0 on macOS. The filename is `libcuda.dylib`.\r\n\r\nResolved by `sudo ln -s /usr/local/cuda/lib/libcuda.dylib /usr/local/cuda/lib/libcuda.1.dylib`.\r\n\r\nPreferable solution is a change to https://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/dso_loader.cc#L82.\r\n\r\nI would change `FormatLibraryFileName(\"cuda\", \"1\")` to `FormatLibraryFileName(\"cuda\")`, but I'm not sure on which OS and CUDA versions this is the correct naming scheme. Possibly a check is needed, `if ( stoi(GetCudaVersion()) >= 8 ) {...}` and maybe `if (__APPLE__) {...}`. \r\n\r\n### Related issue\r\nhttps://github.com/tensorflow/tensorflow/issues/2278\r\nSolution provided [here](https://github.com/tensorflow/tensorflow/issues/2278#issuecomment-244828047) by @eagleflo, @martinianodl.\r\n### Environment info\r\nmacOS 10.12.2\r\nCUDA Toolkit 8.0\r\n```\r\nls -l /usr/local/cuda/lib/libcud*\r\nlrwxr-xr-x  1 root  wheel     33 Jan  6 14:34 /usr/local/cuda/lib/libcuda.1.dylib -> /usr/local/cuda/lib/libcuda.dylib\r\n-rwxr-xr-x@ 1 root  wheel  13504 Nov  3 20:39 /usr/local/cuda/lib/libcuda.dylib\r\nlrwxr-xr-x@ 1 root  wheel     45 Nov  3 20:40 /usr/local/cuda/lib/libcudadevrt.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudadevrt.a\r\nlrwxr-xr-x@ 1 root  wheel     50 Nov  3 20:40 /usr/local/cuda/lib/libcudart.8.0.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart.8.0.dylib\r\nlrwxr-xr-x@ 1 root  wheel     46 Nov  3 20:40 /usr/local/cuda/lib/libcudart.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart.dylib\r\nlrwxr-xr-x@ 1 root  wheel     49 Nov  3 20:40 /usr/local/cuda/lib/libcudart_static.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudart_static.a\r\nlrwxr-xr-x  1 root  wheel     47 Jan  6 13:19 /usr/local/cuda/lib/libcudnn.5.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudnn.5.dylib\r\nlrwxr-xr-x  1 root  wheel     45 Jan  6 13:19 /usr/local/cuda/lib/libcudnn.dylib -> /Developer/NVIDIA/CUDA-8.0/lib/libcudnn.dylib\r\nlrwxr-xr-x  1 root  wheel     48 Jan  6 13:19 /usr/local/cuda/lib/libcudnn_static.a -> /Developer/NVIDIA/CUDA-8.0/lib/libcudnn_static.a\r\n\r\n```\r\nInstalled as a virtualenv with the prebuilt binary.\r\n\r\nTF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/gpu/tensorflow_gpu-0.12.1-py3-none-any.whl\r\n```\r\n>>> tf.__version__\r\n'0.12.1'\r\n```\r\n\r\n"}
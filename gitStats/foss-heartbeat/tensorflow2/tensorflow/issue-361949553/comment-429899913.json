{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/429899913", "html_url": "https://github.com/tensorflow/tensorflow/issues/22395#issuecomment-429899913", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22395", "id": 429899913, "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTg5OTkxMw==", "user": {"login": "davidlange6", "id": 5042883, "node_id": "MDQ6VXNlcjUwNDI4ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/5042883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidlange6", "html_url": "https://github.com/davidlange6", "followers_url": "https://api.github.com/users/davidlange6/followers", "following_url": "https://api.github.com/users/davidlange6/following{/other_user}", "gists_url": "https://api.github.com/users/davidlange6/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidlange6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidlange6/subscriptions", "organizations_url": "https://api.github.com/users/davidlange6/orgs", "repos_url": "https://api.github.com/users/davidlange6/repos", "events_url": "https://api.github.com/users/davidlange6/events{/privacy}", "received_events_url": "https://api.github.com/users/davidlange6/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-15T15:26:50Z", "updated_at": "2018-10-15T15:26:50Z", "author_association": "NONE", "body_html": "<div class=\"email-fragment\">Perhaps I just have a typo... but this does not work solve the issue I've had - changing\n\nbazel --output_user_root ../build build -s --verbose_failures -c opt --cxxopt=$CXX_OPT_FLAGS //tensorflow/tools/pip_package:build_pip_package\n\nto\n\nbazel --output_user_root ../build build -s --verbose_failures -c opt --cxxopt=$CXX_OPT_FLAGS --action_env PYTHONPATH=\"${PYTHON27PATH}\" //tensorflow/tools/pip_package:build_pip_package\n\nresults in the same error of numpy missing. [where PYTHON27PATH is a PATH like variable listing all of the entries I want in PYTHONPATH]\n\n  File \"/build/dlange/180925/BUILD/slc6_amd64_gcc700/external/tensorflow-sources/1.10.1/build/0a8c18c4045ab378bcc6\\\n140b80b5d812/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tenso\\\nrflow/tensorflow/python/__init__.py\", line 47, in &lt;module&gt;\n    import numpy as np\nImportError: No module named numpy\n\nI added a printout to the failing script (create_python_api.py) just to confirm that in fact the python environment is not being seen. eg,\n\nimport sys\nprint(sys.path)\n\nindeed does not include any of my PYTHONPATH</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\"> On Oct 12, 2018, at 11:06 PM, annarev ***@***.***&gt; wrote:\n\n Thank you <a class=\"user-mention\" href=\"https://github.com/meteorcloudy\">@meteorcloudy</a>!\n\n hm passing --action_env PYTHONPATH= works for me. I tried the following:\n\n \t\u2022 Setup virtualenv \"venv\" and install pip dependencies except keras_applications\n \t\u2022 Setup virtualenv \"venv1\" and install only keras_applications\n \t\u2022 Then I activate \"venv\" and run:\n bazel test tensorflow/tools/api/tests:api_compatibility_test --nocache_test_results\n\n It fails because keras_applications is not found, as expected.\n\n \t\u2022 Then, I run the same but pass PYTHONPATH that points to venv1 site-packages:\n bazel test --action_env PYTHONPATH=\"&lt;path to venv1&gt;/venv1/lib/python2.7/site-packages\" tensorflow/tools/api/tests:api_compatibility_test --nocache_test_results\n\n This command passes.\n\n In case relevant, this is my setup:\n\n virtualenv venv1\n source venv1/bin/activate\n pip install keras_applications==1.0.4\n deactivate\n\n virtualenv venv\n source venv/bin/activate\n pip install --upgrade setuptools==39.1.0\n pip install keras_preprocessing==1.0.2\n pip install --upgrade six mock portpicker scipy sklearn grpcio\n pip install numpy==1.14.5\n pip uninstall keras_applications\n\n git clone <a href=\"https://github.com/tensorflow/tensorflow.git\">https://github.com/tensorflow/tensorflow.git</a>\n cd tensorflow/\n export TF_NEED_CUDA=0\n yes \"\" | python configure.py\n\n \u2014\n You are receiving this because you commented.\n Reply to this email directly, view it on GitHub, or mute the thread.\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "Perhaps I just have a typo... but this does not work solve the issue I've had - changing\n\nbazel --output_user_root ../build build -s --verbose_failures -c opt --cxxopt=$CXX_OPT_FLAGS //tensorflow/tools/pip_package:build_pip_package\n\nto\n\nbazel --output_user_root ../build build -s --verbose_failures -c opt --cxxopt=$CXX_OPT_FLAGS --action_env PYTHONPATH=\"${PYTHON27PATH}\" //tensorflow/tools/pip_package:build_pip_package\n\nresults in the same error of numpy missing. [where PYTHON27PATH is a PATH like variable listing all of the entries I want in PYTHONPATH]\n\n  File \"/build/dlange/180925/BUILD/slc6_amd64_gcc700/external/tensorflow-sources/1.10.1/build/0a8c18c4045ab378bcc6\\\n140b80b5d812/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tenso\\\nrflow/tensorflow/python/__init__.py\", line 47, in <module>\n    import numpy as np\nImportError: No module named numpy\n\nI added a printout to the failing script (create_python_api.py) just to confirm that in fact the python environment is not being seen. eg,\n\nimport sys\nprint(sys.path)\n\nindeed does not include any of my PYTHONPATH\n\u2026\n On Oct 12, 2018, at 11:06 PM, annarev ***@***.***> wrote:\n\n Thank you @meteorcloudy!\n\n hm passing --action_env PYTHONPATH= works for me. I tried the following:\n\n \t\u2022 Setup virtualenv \"venv\" and install pip dependencies except keras_applications\n \t\u2022 Setup virtualenv \"venv1\" and install only keras_applications\n \t\u2022 Then I activate \"venv\" and run:\n bazel test tensorflow/tools/api/tests:api_compatibility_test --nocache_test_results\n\n It fails because keras_applications is not found, as expected.\n\n \t\u2022 Then, I run the same but pass PYTHONPATH that points to venv1 site-packages:\n bazel test --action_env PYTHONPATH=\"<path to venv1>/venv1/lib/python2.7/site-packages\" tensorflow/tools/api/tests:api_compatibility_test --nocache_test_results\n\n This command passes.\n\n In case relevant, this is my setup:\n\n virtualenv venv1\n source venv1/bin/activate\n pip install keras_applications==1.0.4\n deactivate\n\n virtualenv venv\n source venv/bin/activate\n pip install --upgrade setuptools==39.1.0\n pip install keras_preprocessing==1.0.2\n pip install --upgrade six mock portpicker scipy sklearn grpcio\n pip install numpy==1.14.5\n pip uninstall keras_applications\n\n git clone https://github.com/tensorflow/tensorflow.git\n cd tensorflow/\n export TF_NEED_CUDA=0\n yes \"\" | python configure.py\n\n \u2014\n You are receiving this because you commented.\n Reply to this email directly, view it on GitHub, or mute the thread.", "body": "Perhaps I just have a typo... but this does not work solve the issue I've had - changing\r\n\r\nbazel --output_user_root ../build build -s --verbose_failures -c opt --cxxopt=$CXX_OPT_FLAGS //tensorflow/tools/pip_package:build_pip_package\r\n\r\nto\r\n\r\nbazel --output_user_root ../build build -s --verbose_failures -c opt --cxxopt=$CXX_OPT_FLAGS --action_env PYTHONPATH=\"${PYTHON27PATH}\" //tensorflow/tools/pip_package:build_pip_package\r\n\r\nresults in the same error of numpy missing. [where PYTHON27PATH is a PATH like variable listing all of the entries I want in PYTHONPATH]\r\n\r\n  File \"/build/dlange/180925/BUILD/slc6_amd64_gcc700/external/tensorflow-sources/1.10.1/build/0a8c18c4045ab378bcc6\\\r\n140b80b5d812/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tenso\\\r\nrflow/tensorflow/python/__init__.py\", line 47, in <module>\r\n    import numpy as np\r\nImportError: No module named numpy\r\n\r\nI added a printout to the failing script (create_python_api.py) just to confirm that in fact the python environment is not being seen. eg, \r\n\r\nimport sys\r\nprint(sys.path)\r\n\r\nindeed does not include any of my PYTHONPATH\r\n\r\n> On Oct 12, 2018, at 11:06 PM, annarev <notifications@github.com> wrote:\r\n> \r\n> Thank you @meteorcloudy!\r\n> \r\n> hm passing --action_env PYTHONPATH= works for me. I tried the following:\r\n> \r\n> \t\u2022 Setup virtualenv \"venv\" and install pip dependencies except keras_applications\r\n> \t\u2022 Setup virtualenv \"venv1\" and install only keras_applications\r\n> \t\u2022 Then I activate \"venv\" and run:\r\n> bazel test tensorflow/tools/api/tests:api_compatibility_test --nocache_test_results\r\n> \r\n> It fails because keras_applications is not found, as expected.\r\n> \r\n> \t\u2022 Then, I run the same but pass PYTHONPATH that points to venv1 site-packages:\r\n> bazel test --action_env PYTHONPATH=\"<path to venv1>/venv1/lib/python2.7/site-packages\" tensorflow/tools/api/tests:api_compatibility_test --nocache_test_results\r\n> \r\n> This command passes.\r\n> \r\n> In case relevant, this is my setup:\r\n> \r\n> virtualenv venv1\r\n> source venv1/bin/activate\r\n> pip install keras_applications==1.0.4\r\n> deactivate\r\n> \r\n> virtualenv venv\r\n> source venv/bin/activate\r\n> pip install --upgrade setuptools==39.1.0\r\n> pip install keras_preprocessing==1.0.2\r\n> pip install --upgrade six mock portpicker scipy sklearn grpcio\r\n> pip install numpy==1.14.5\r\n> pip uninstall keras_applications\r\n> \r\n> git clone https://github.com/tensorflow/tensorflow.git\r\n> cd tensorflow/\r\n> export TF_NEED_CUDA=0\r\n> yes \"\" | python configure.py\r\n> \r\n> \u2014\r\n> You are receiving this because you commented.\r\n> Reply to this email directly, view it on GitHub, or mute the thread.\r\n> \r\n\r\n"}
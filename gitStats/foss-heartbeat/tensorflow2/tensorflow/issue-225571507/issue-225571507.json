{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9583", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9583/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9583/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9583/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9583", "id": 225571507, "node_id": "MDU6SXNzdWUyMjU1NzE1MDc=", "number": 9583, "title": "TensorArray: Tried to write to index 18 but array is not resizeable and size is: 18", "user": {"login": "viettan28", "id": 14936640, "node_id": "MDQ6VXNlcjE0OTM2NjQw", "avatar_url": "https://avatars1.githubusercontent.com/u/14936640?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viettan28", "html_url": "https://github.com/viettan28", "followers_url": "https://api.github.com/users/viettan28/followers", "following_url": "https://api.github.com/users/viettan28/following{/other_user}", "gists_url": "https://api.github.com/users/viettan28/gists{/gist_id}", "starred_url": "https://api.github.com/users/viettan28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viettan28/subscriptions", "organizations_url": "https://api.github.com/users/viettan28/orgs", "repos_url": "https://api.github.com/users/viettan28/repos", "events_url": "https://api.github.com/users/viettan28/events{/privacy}", "received_events_url": "https://api.github.com/users/viettan28/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-05-02T01:57:50Z", "updated_at": "2018-10-17T12:27:28Z", "closed_at": "2017-05-04T06:40:39Z", "author_association": "NONE", "body_html": "<h3>Problem</h3>\n<p>I wrote an application using TensorArray. It prints out error about allocate memory.<br>\nFor each sample. It must create a lot of TensorArray to store temporary data.<br>\nWith few number of samples (around 20), it passed smoothly 100 epochs.<br>\nWhen I trained with the whole dataset (10.000 samples), it have never passed epoch 6. The stopped epochs are varied.</p>\n<h3>Logs</h3>\n<p>2017-05-02 10:29:25,886 CFG INFO [Epoch 0] Shuffling data...<br>\n(0.058350346982479095, 0.76190478)<br>\n2017-05-02 10:29:31.197277: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: Tried to read from index 23 but array size is: 23<br>\n2017-05-02 10:29:31.197277: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23<br>\nTraceback (most recent call last):<br>\nFile \"/work/vietld/py27/lib/python2.7/runpy.py\", line 174, in _run_module_as_main<br>\nFile \"/work/vietld/py27/lib/python2.7/runpy.py\", line 72, in _run_code<br>\nexec code in run_globals<br>\nFile \"/home/s1610204/tree-lstm/py/run.py\", line 45, in <br>\ntrain(args)<br>\nFile \"/home/s1610204/tree-lstm/py/run.py\", line 29, in train<br>\nloss, acc = treelstm.train(session, train_data)<br>\nFile \"py/lstmtree.py\", line 175, in train<br>\nloss, acc, _ = session.run([self.full_loss, self.acc, self.train_op], feed_dict)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 778, in run<br>\nrun_metadata_ptr)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 982, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1032, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1052, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23<br>\n[[Node: bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta = TensorArrayWriteV3[T=DT_FLOAT, _class=[\"loc:@bu/dec_c_ta\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](bu/while_decode<br>\n/dec/cond_1/gather_dec_c_ta/Enter, bu/while_decode/Identity_3, bu/while_decode/dec/LSTM/add_6, bu/while_decode/Identity_1)]]</p>\n<p>Caused by op u'bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta', defined at:<br>\nFile \"/work/vietld/py27/lib/python2.7/runpy.py\", line 174, in _run_module_as_mai \"<strong>main</strong>\", fname, loader, pkg_name)</p>\n<p>File \"/work/vietld/py27/lib/python2.7/runpy.py\", line 72, in _run_code exec code in run_globals<br>\nFile \"/home/s1610204/tree-lstm/py/run.py\", line 45, in <br>\ntrain(args)<br>\nFile \"/home/s1610204/tree-lstm/py/run.py\", line 20, in train<br>\ntreelstm = RecursiveLSTM(config)<br>\nFile \"py/lstmtree.py\", line 137, in <strong>init</strong><br>\nname='while_decode')<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2623, in while_loop<br>\nresult = context.BuildLoop(cond, body, loop_vars, shape_invariants)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2456, in BuildLoop<br>\npred, body, original_loop_vars, loop_vars, shape_invariants)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2406, in _BuildLoop<br>\nbody_result = body(*packed_vars_for_body)<br>\nFile \"py/lstmtree.py\", line 115, in decode_body<br>\nr_dec_c_ta = dec_c_ta.write(i, c, name='write_dec_c_ta')<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 279, in write<br>\nname=name)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 2823, in _tensor_array_write_v3<br>\nname=name)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 768, in apply_op<br>\nop_def=op_def)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2336, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1228, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>InvalidArgumentError (see above for traceback): TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23<br>\n[[Node: bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta = TensorArrayWriteV3[T=DT_FLOAT, _class=[\"loc:@bu/dec_c_ta\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](bu/while_decode<br>\n/dec/cond_1/gather_dec_c_ta/Enter, bu/while_decode/Identity_3, bu/while_decode/dec/LSTM/add_6, bu/while_decode/Identity_1)]]</p>\n<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Operating system</strong>: Altix-UV 3000, SUSE Enterprise Server 12 SP2</li>\n<li><strong>TensorFlow installed from</strong>: binary</li>\n<li><strong>TensorFlow version</strong>: ('v1.1.0-rc0-61-g1ec6ed5', '1.1.0')</li>\n<li><strong>Bazel version (if compiling from source)</strong>: N/A</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: No GPU, 256GB RAM</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>SYSTEM ENVIRONMENT: == cat /etc/issue ===============================================<br>\nLinux altix-uv 3.12.62-60.64.8-default <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Tue Oct 18 12:21:38 UTC 2016 (42e0a66) x86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION = 12<br>\nVERSION=\"12-SP1\"<br>\nVERSION_ID=\"12.1\"</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (SUSE Linux) 4.8.5<br>\nCopyright (C) 2015 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux altix-uv 3.12.62-60.64.8-default <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Tue Oct 18 12:21:38 UTC 2016 (42e0a66) x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nnumpy (1.12.1)<br>\nprotobuf (3.2.0)<br>\ntensorflow (1.1.0)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\n2017-05-02 10:42:09.139127: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-05-02 10:42:09.139314: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-05-02 10:42:09.139322: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-05-02 10:42:09.139328: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-05-02 10:42:09.139334: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.<br>\nsched_getaffinity: Invalid argument<br>\ncan't determine number of CPU cores: assuming 4<br>\nsched_getaffinity: Invalid argument<br>\ncan't determine number of CPU cores: assuming 4<br>\ntf.VERSION = 1.1.0<br>\ntf.GIT_VERSION = v1.1.0-rc0-61-g1ec6ed5<br>\ntf.COMPILER_VERSION = v1.1.0-rc0-61-g1ec6ed5<br>\nSanity check: array([1], dtype=int32)</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH /opt/cuda/8.0/lib64:/opt/cuda/8.0/lib:/work/vietld/cuda/lib64<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\ntf_env_collect.sh: line 77: nvidia-smi: command not found</p>\n<p>== cuda libs  ===================================================</p>\n<h3>Source code / logs</h3>\n<p>I dont know why github cant attach this .zip file<br>\nPlease download it from <a href=\"https://drive.google.com/open?id=0BxQsywFyW2C7UUVSeHBHZ25mWXM\" rel=\"nofollow\">https://drive.google.com/open?id=0BxQsywFyW2C7UUVSeHBHZ25mWXM</a></p>", "body_text": "Problem\nI wrote an application using TensorArray. It prints out error about allocate memory.\nFor each sample. It must create a lot of TensorArray to store temporary data.\nWith few number of samples (around 20), it passed smoothly 100 epochs.\nWhen I trained with the whole dataset (10.000 samples), it have never passed epoch 6. The stopped epochs are varied.\nLogs\n2017-05-02 10:29:25,886 CFG INFO [Epoch 0] Shuffling data...\n(0.058350346982479095, 0.76190478)\n2017-05-02 10:29:31.197277: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: Tried to read from index 23 but array size is: 23\n2017-05-02 10:29:31.197277: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23\nTraceback (most recent call last):\nFile \"/work/vietld/py27/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\nFile \"/work/vietld/py27/lib/python2.7/runpy.py\", line 72, in _run_code\nexec code in run_globals\nFile \"/home/s1610204/tree-lstm/py/run.py\", line 45, in \ntrain(args)\nFile \"/home/s1610204/tree-lstm/py/run.py\", line 29, in train\nloss, acc = treelstm.train(session, train_data)\nFile \"py/lstmtree.py\", line 175, in train\nloss, acc, _ = session.run([self.full_loss, self.acc, self.train_op], feed_dict)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 778, in run\nrun_metadata_ptr)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 982, in _run\nfeed_dict_string, options, run_metadata)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1032, in _do_run\ntarget_list, options, run_metadata)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1052, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23\n[[Node: bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta = TensorArrayWriteV3[T=DT_FLOAT, _class=[\"loc:@bu/dec_c_ta\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](bu/while_decode\n/dec/cond_1/gather_dec_c_ta/Enter, bu/while_decode/Identity_3, bu/while_decode/dec/LSTM/add_6, bu/while_decode/Identity_1)]]\nCaused by op u'bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta', defined at:\nFile \"/work/vietld/py27/lib/python2.7/runpy.py\", line 174, in _run_module_as_mai \"main\", fname, loader, pkg_name)\nFile \"/work/vietld/py27/lib/python2.7/runpy.py\", line 72, in _run_code exec code in run_globals\nFile \"/home/s1610204/tree-lstm/py/run.py\", line 45, in \ntrain(args)\nFile \"/home/s1610204/tree-lstm/py/run.py\", line 20, in train\ntreelstm = RecursiveLSTM(config)\nFile \"py/lstmtree.py\", line 137, in init\nname='while_decode')\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2623, in while_loop\nresult = context.BuildLoop(cond, body, loop_vars, shape_invariants)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2456, in BuildLoop\npred, body, original_loop_vars, loop_vars, shape_invariants)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2406, in _BuildLoop\nbody_result = body(*packed_vars_for_body)\nFile \"py/lstmtree.py\", line 115, in decode_body\nr_dec_c_ta = dec_c_ta.write(i, c, name='write_dec_c_ta')\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 279, in write\nname=name)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 2823, in _tensor_array_write_v3\nname=name)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 768, in apply_op\nop_def=op_def)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2336, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1228, in init\nself._traceback = _extract_stack()\nInvalidArgumentError (see above for traceback): TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23\n[[Node: bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta = TensorArrayWriteV3[T=DT_FLOAT, _class=[\"loc:@bu/dec_c_ta\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](bu/while_decode\n/dec/cond_1/gather_dec_c_ta/Enter, bu/while_decode/Identity_3, bu/while_decode/dec/LSTM/add_6, bu/while_decode/Identity_1)]]\n\nSystem information\n\nOperating system: Altix-UV 3000, SUSE Enterprise Server 12 SP2\nTensorFlow installed from: binary\nTensorFlow version: ('v1.1.0-rc0-61-g1ec6ed5', '1.1.0')\nBazel version (if compiling from source): N/A\nCUDA/cuDNN version: N/A\nGPU model and memory: No GPU, 256GB RAM\nExact command to reproduce:\n\nSYSTEM ENVIRONMENT: == cat /etc/issue ===============================================\nLinux altix-uv 3.12.62-60.64.8-default #1 SMP Tue Oct 18 12:21:38 UTC 2016 (42e0a66) x86_64 x86_64 x86_64 GNU/Linux\nVERSION = 12\nVERSION=\"12-SP1\"\nVERSION_ID=\"12.1\"\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (SUSE Linux) 4.8.5\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux altix-uv 3.12.62-60.64.8-default #1 SMP Tue Oct 18 12:21:38 UTC 2016 (42e0a66) x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\nnumpy (1.12.1)\nprotobuf (3.2.0)\ntensorflow (1.1.0)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\n2017-05-02 10:42:09.139127: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-02 10:42:09.139314: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-02 10:42:09.139322: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-02 10:42:09.139328: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-02 10:42:09.139334: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\nsched_getaffinity: Invalid argument\ncan't determine number of CPU cores: assuming 4\nsched_getaffinity: Invalid argument\ncan't determine number of CPU cores: assuming 4\ntf.VERSION = 1.1.0\ntf.GIT_VERSION = v1.1.0-rc0-61-g1ec6ed5\ntf.COMPILER_VERSION = v1.1.0-rc0-61-g1ec6ed5\nSanity check: array([1], dtype=int32)\n== env ==========================================================\nLD_LIBRARY_PATH /opt/cuda/8.0/lib64:/opt/cuda/8.0/lib:/work/vietld/cuda/lib64\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\ntf_env_collect.sh: line 77: nvidia-smi: command not found\n== cuda libs  ===================================================\nSource code / logs\nI dont know why github cant attach this .zip file\nPlease download it from https://drive.google.com/open?id=0BxQsywFyW2C7UUVSeHBHZ25mWXM", "body": "### Problem\r\nI wrote an application using TensorArray. It prints out error about allocate memory.\r\nFor each sample. It must create a lot of TensorArray to store temporary data.\r\nWith few number of samples (around 20), it passed smoothly 100 epochs.\r\nWhen I trained with the whole dataset (10.000 samples), it have never passed epoch 6. The stopped epochs are varied.\r\n\r\n### Logs\r\n2017-05-02 10:29:25,886 CFG INFO [Epoch 0] Shuffling data...                                                                                                                                     \r\n(0.058350346982479095, 0.76190478)                                                                                                                                                               \r\n2017-05-02 10:29:31.197277: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: Tried to read from index 23 but array size is: 23                                                   \r\n2017-05-02 10:29:31.197277: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23\r\nTraceback (most recent call last):                                                                                                                                                               \r\n  File \"/work/vietld/py27/lib/python2.7/runpy.py\", line 174, in _run_module_as_main                                                                                                              \r\n  File \"/work/vietld/py27/lib/python2.7/runpy.py\", line 72, in _run_code                                                                                                                         \r\n    exec code in run_globals                                                                                                                                                                     \r\n  File \"/home/s1610204/tree-lstm/py/run.py\", line 45, in <module>                                                                                                                                \r\n    train(args)                                                                                                                                                                                  \r\n  File \"/home/s1610204/tree-lstm/py/run.py\", line 29, in train                                                                                                                                   \r\n    loss, acc = treelstm.train(session, train_data)                                                                                                                                              \r\n  File \"py/lstmtree.py\", line 175, in train                                                                                                                                                      \r\n    loss, acc, _ = session.run([self.full_loss, self.acc, self.train_op], feed_dict)                                                                                                             \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 778, in run                                                                                     \r\n    run_metadata_ptr)                                                                                                                                                                            \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 982, in _run                                                                                    \r\n    feed_dict_string, options, run_metadata)                                                                                                                                                     \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1032, in _do_run                                                                                \r\n    target_list, options, run_metadata)                                                                                                                                                          \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1052, in _do_call                                                                               \r\n    raise type(e)(node_def, op, message)                                                                                                                                                         \r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23                               \r\n         [[Node: bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta = TensorArrayWriteV3[T=DT_FLOAT, _class=[\"loc:@bu/dec_c_ta\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](bu/while_decode\r\n/dec/cond_1/gather_dec_c_ta/Enter, bu/while_decode/Identity_3, bu/while_decode/dec/LSTM/add_6, bu/while_decode/Identity_1)]]                                                                     \r\n                                                                                                                                                                                                 \r\nCaused by op u'bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta', defined at:                                                                                                                   \r\n  File \"/work/vietld/py27/lib/python2.7/runpy.py\", line 174, in _run_module_as_mai \"__main__\", fname, loader, pkg_name)                                                                                                              \r\n                                                                                                                                                         \r\n  File \"/work/vietld/py27/lib/python2.7/runpy.py\", line 72, in _run_code exec code in run_globals                                                                                                                                                                                                                                                                                     \r\n  File \"/home/s1610204/tree-lstm/py/run.py\", line 45, in <module>                                                                                                                                \r\n    train(args)                                                                                                                                                                                  \r\n  File \"/home/s1610204/tree-lstm/py/run.py\", line 20, in train                                                                                                                                   \r\n    treelstm = RecursiveLSTM(config)                                                                                                                                                             \r\n  File \"py/lstmtree.py\", line 137, in __init__                                                                                                                                                   \r\n    name='while_decode')                                                                                                                                                                         \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2623, in while_loop                                                                       \r\n    result = context.BuildLoop(cond, body, loop_vars, shape_invariants)                                                                                                                          \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2456, in BuildLoop                                                                        \r\n    pred, body, original_loop_vars, loop_vars, shape_invariants)                                                                                                                                 \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2406, in _BuildLoop                                                                       \r\n    body_result = body(*packed_vars_for_body)                                                                                                                                                    \r\n  File \"py/lstmtree.py\", line 115, in decode_body                                                                                                                                                \r\n    r_dec_c_ta = dec_c_ta.write(i, c, name='write_dec_c_ta')                                                                                                                                     \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 279, in write                                                                             \r\n    name=name)                                                                                                                                                                                   \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 2823, in _tensor_array_write_v3                                                          \r\n    name=name)                                                                                                                                                                                   \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 768, in apply_op                                                                      \r\n    op_def=op_def)                                                                                                                                                                               \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2336, in create_op                                                                               \r\n    original_op=self._default_original_op, op_def=op_def)                                                                                                                                        \r\n  File \"/work/vietld/py27/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1228, in __init__                                                                                \r\n    self._traceback = _extract_stack()                                                                                                                                                           \r\n                                                                                                                                                                                                 \r\nInvalidArgumentError (see above for traceback): TensorArray bu/dec_c_ta_4628: Tried to write to index 23 but array is not resizeable and size is: 23                                             \r\n         [[Node: bu/while_decode/dec/write_dec_c_ta/write_dec_c_ta = TensorArrayWriteV3[T=DT_FLOAT, _class=[\"loc:@bu/dec_c_ta\"], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](bu/while_decode\r\n/dec/cond_1/gather_dec_c_ta/Enter, bu/while_decode/Identity_3, bu/while_decode/dec/LSTM/add_6, bu/while_decode/Identity_1)]]      \r\n\r\n------------------------\r\n### System information\r\n- **Operating system**: Altix-UV 3000, SUSE Enterprise Server 12 SP2\r\n- **TensorFlow installed from**: binary\r\n- **TensorFlow version**: ('v1.1.0-rc0-61-g1ec6ed5', '1.1.0')\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: No GPU, 256GB RAM\r\n- **Exact command to reproduce**:\r\n\r\nSYSTEM ENVIRONMENT: == cat /etc/issue ===============================================\r\nLinux altix-uv 3.12.62-60.64.8-default #1 SMP Tue Oct 18 12:21:38 UTC 2016 (42e0a66) x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION = 12\r\nVERSION=\"12-SP1\"\r\nVERSION_ID=\"12.1\"\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (SUSE Linux) 4.8.5\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux altix-uv 3.12.62-60.64.8-default #1 SMP Tue Oct 18 12:21:38 UTC 2016 (42e0a66) x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy (1.12.1)\r\nprotobuf (3.2.0)\r\ntensorflow (1.1.0)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\n2017-05-02 10:42:09.139127: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-02 10:42:09.139314: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-02 10:42:09.139322: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-02 10:42:09.139328: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-02 10:42:09.139334: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\nsched_getaffinity: Invalid argument\r\ncan't determine number of CPU cores: assuming 4\r\nsched_getaffinity: Invalid argument\r\ncan't determine number of CPU cores: assuming 4\r\ntf.VERSION = 1.1.0\r\ntf.GIT_VERSION = v1.1.0-rc0-61-g1ec6ed5\r\ntf.COMPILER_VERSION = v1.1.0-rc0-61-g1ec6ed5\r\nSanity check: array([1], dtype=int32)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH /opt/cuda/8.0/lib64:/opt/cuda/8.0/lib:/work/vietld/cuda/lib64\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\ntf_env_collect.sh: line 77: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n\r\n### Source code / logs\r\nI dont know why github cant attach this .zip file\r\nPlease download it from https://drive.google.com/open?id=0BxQsywFyW2C7UUVSeHBHZ25mWXM\r\n"}
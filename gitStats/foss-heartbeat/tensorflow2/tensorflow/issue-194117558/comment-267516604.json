{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/267516604", "html_url": "https://github.com/tensorflow/tensorflow/issues/6166#issuecomment-267516604", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6166", "id": 267516604, "node_id": "MDEyOklzc3VlQ29tbWVudDI2NzUxNjYwNA==", "user": {"login": "kevinashaw", "id": 7141343, "node_id": "MDQ6VXNlcjcxNDEzNDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7141343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevinashaw", "html_url": "https://github.com/kevinashaw", "followers_url": "https://api.github.com/users/kevinashaw/followers", "following_url": "https://api.github.com/users/kevinashaw/following{/other_user}", "gists_url": "https://api.github.com/users/kevinashaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevinashaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevinashaw/subscriptions", "organizations_url": "https://api.github.com/users/kevinashaw/orgs", "repos_url": "https://api.github.com/users/kevinashaw/repos", "events_url": "https://api.github.com/users/kevinashaw/events{/privacy}", "received_events_url": "https://api.github.com/users/kevinashaw/received_events", "type": "User", "site_admin": false}, "created_at": "2016-12-16T04:52:15Z", "updated_at": "2016-12-16T06:09:47Z", "author_association": "NONE", "body_html": "<p>Not sure if this is useful, but am reporting for your info.<br>\nI used the following command (as listed above):</p>\n<pre><code>bazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\n   --crosstool_top=//external:android/crosstool \\\n   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n   --cpu=armeabi-v7a\n</code></pre>\n<p>and got the following error message (Running on MacOS with TF0.12 (Commit#412428)):</p>\n<pre><code>Kevins-MacBook-Air-2:tensorflow kevin$ bazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\n&gt;    --crosstool_top=//external:android/crosstool \\\n&gt;    --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n&gt;    --cpu=armeabi-v7a\n..........................................................\nWARNING: Bazel Android NDK crosstools are based on Android NDK revision 12. The revision of the Android NDK given in android_ndk_repository rule 'androidndk' is '13.1.3345770'.\nINFO: Loading package: @local_config_cuda//cuda\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:avgpooling_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:bounds_check.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops_common.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops_gradients.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_activations.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_attention.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_backward_cuboid_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_backward_spatial_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_cuboid_convolution.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_patch_3d.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_pooling.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_softmax.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_spatial_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:fifo_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:maxpooling_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:ops_util.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:ops_util.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:padding_fifo_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:pooling_ops_common.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:pooling_ops_common.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:queue_base.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:queue_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:typed_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_entry.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_scorer.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_search.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_decoder.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_loss_util.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:naming.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:naming.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:tensor_bundle.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:tensor_bundle.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nINFO: Found 1 target...\nINFO: From Compiling external/protobuf/src/google/protobuf/util/time_util.cc [for host]:\nexternal/protobuf/src/google/protobuf/util/time_util.cc:52:18: warning: unused variable 'kMicrosPerMillisecond' [-Wunused-const-variable]\nstatic const int kMicrosPerMillisecond = 1000;\n                 ^\nexternal/protobuf/src/google/protobuf/util/time_util.cc:56:19: warning: unused variable 'kTimestampFormat' [-Wunused-const-variable]\nstatic const char kTimestampFormat[] = \"%E4Y-%m-%dT%H:%M:%S\";\n                  ^\n2 warnings generated.\nINFO: From ProtoCompile tensorflow/core/example/example.pb.cc:\nbazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-fastbuild/genfiles/external/protobuf/src: warning: directory does not exist.\nINFO: From Compiling tensorflow/core/kernels/split_v_op.cc:\ntensorflow/core/kernels/split_v_op.cc: In instantiation of 'void tensorflow::SplitVOpCPU&lt;T, Tlen&gt;::Compute(tensorflow::OpKernelContext*) [with T = float; Tlen = long long int]':\ntensorflow/core/kernels/split_v_op.cc:400:1:   required from here\ntensorflow/core/kernels/split_v_op.cc:212:63: warning: narrowing conversion of 'split_sizes_vec.std::vector&lt;_Tp, _Alloc&gt;::operator[]&lt;long long int, std::allocator&lt;long long int&gt; &gt;(((std::vector&lt;long long int, std::allocator&lt;long long int&gt; &gt;::size_type)i))' from '__gnu_cxx::__alloc_traits&lt;std::allocator&lt;long long int&gt; &gt;::value_type {aka long long int}' to 'int' inside { } [-Wnarrowing]\n           prefix_dim_size, split_sizes_vec[i], suffix_dim_size};\n                                                               ^\ntensorflow/core/kernels/split_v_op.cc: In instantiation of 'void tensorflow::SplitVOpCPU&lt;T, Tlen&gt;::Compute(tensorflow::OpKernelContext*) [with T = int; Tlen = long long int]':\ntensorflow/core/kernels/split_v_op.cc:400:1:   required from here\ntensorflow/core/kernels/split_v_op.cc:212:63: warning: narrowing conversion of 'split_sizes_vec.std::vector&lt;_Tp, _Alloc&gt;::operator[]&lt;long long int, std::allocator&lt;long long int&gt; &gt;(((std::vector&lt;long long int, std::allocator&lt;long long int&gt; &gt;::size_type)i))' from '__gnu_cxx::__alloc_traits&lt;std::allocator&lt;long long int&gt; &gt;::value_type {aka long long int}' to 'int' inside { } [-Wnarrowing]\nINFO: From Compiling tensorflow/core/kernels/split_op.cc:\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU&lt;T&gt;::Compute(tensorflow::OpKernelContext*) [with T = Eigen::QUInt8]':\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\n         prefix_dim_size, split_dim_output_size, suffix_dim_size};\n                                                                ^\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU&lt;T&gt;::Compute(tensorflow::OpKernelContext*) [with T = float]':\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU&lt;T&gt;::Compute(tensorflow::OpKernelContext*) [with T = int]':\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\nINFO: From Compiling tensorflow/core/kernels/tensor_array_ops.cc:\ntensorflow/core/kernels/tensor_array_ops.cc: In instantiation of 'void tensorflow::TensorArraySplitOp&lt;Device, T&gt;::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = float]':\ntensorflow/core/kernels/tensor_array_ops.cc:1268:1:   required from here\ntensorflow/core/kernels/tensor_array_ops.cc:1131:72: warning: narrowing conversion of 'previous_length' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\n       Eigen::DSizes&lt;Eigen::DenseIndex, 3&gt; indices{0, previous_length, 0};\n                                                                        ^\ntensorflow/core/kernels/tensor_array_ops.cc:1133:65: warning: narrowing conversion of '(Scalar)tensor_lengths_t.Eigen::TensorMap&lt;PlainObjectType, Options_, MakePointer_&gt;::operator()&lt;Eigen::Tensor&lt;const long long int, 1, 1, int&gt;, 16, Eigen::MakePointer&gt;(i)' from 'Scalar {aka long long int}' to 'int' inside { } [-Wnarrowing]\n                                                 elements_per_row};\n                                                                 ^\ntensorflow/core/kernels/tensor_array_ops.cc: In instantiation of 'void tensorflow::TensorArraySplitOp&lt;Device, T&gt;::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = int]':\ntensorflow/core/kernels/tensor_array_ops.cc:1268:1:   required from here\ntensorflow/core/kernels/tensor_array_ops.cc:1131:72: warning: narrowing conversion of 'previous_length' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\n       Eigen::DSizes&lt;Eigen::DenseIndex, 3&gt; indices{0, previous_length, 0};\n                                                                        ^\ntensorflow/core/kernels/tensor_array_ops.cc:1133:65: warning: narrowing conversion of '(Scalar)tensor_lengths_t.Eigen::TensorMap&lt;PlainObjectType, Options_, MakePointer_&gt;::operator()&lt;Eigen::Tensor&lt;const long long int, 1, 1, int&gt;, 16, Eigen::MakePointer&gt;(i)' from 'Scalar {aka long long int}' to 'int' inside { } [-Wnarrowing]\n                                                 elements_per_row};\n                                                                 ^\nINFO: From Compiling tensorflow/core/kernels/unpack_op.cc:\ntensorflow/core/kernels/unpack_op.cc: In instantiation of 'void tensorflow::UnpackOp&lt;Device, T&gt;::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = float]':\ntensorflow/core/kernels/unpack_op.cc:152:1:   required from here\ntensorflow/core/kernels/unpack_op.cc:109:75: warning: narrowing conversion of 'before_dim' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\n         Eigen::DSizes&lt;Eigen::DenseIndex, 3&gt; sizes{1, before_dim, after_dim};\n                                                                           ^\ntensorflow/core/kernels/unpack_op.cc: In instantiation of 'void tensorflow::UnpackOp&lt;Device, T&gt;::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = int]':\ntensorflow/core/kernels/unpack_op.cc:152:1:   required from here\ntensorflow/core/kernels/unpack_op.cc:109:75: warning: narrowing conversion of 'before_dim' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\nTarget //tensorflow/contrib/android:libtensorflow_inference.so up-to-date:\n  bazel-bin/tensorflow/contrib/android/libtensorflow_inference.so\nINFO: Elapsed time: 2481.205s, Critical Path: 2358.75s\n\n</code></pre>\n<p>Furthermore, I can confirm that the BUILD file has the following section (with the required '-llog' an d '-lm' options):</p>\n<pre><code># Build the native .so.\n# bazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\n#   --crosstool_top=//external:android/crosstool \\\n#   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n#   --cpu=armeabi-v7a\nLINKER_SCRIPT = \"//tensorflow/contrib/android:jni/version_script.lds\"\n\ncc_binary(\n    name = \"libtensorflow_inference.so\",\n    srcs = [],\n    copts = tf_copts(),\n    linkopts = if_android([\n        \"-landroid\",\n        \"-llog\",\n        \"-lm\",\n        \"-z defs\",\n        \"-s\",\n        \"-Wl,--version-script\",  # This line must be directly followed by LINKER_SCRIPT.\n        LINKER_SCRIPT,\n    ]),\n    linkshared = 1,\n    linkstatic = 1,\n    tags = [\n        \"manual\",\n        \"notap\",\n    ],\n    deps = [\n        \":android_tensorflow_inference_jni\",\n        \"//tensorflow/core:android_tensorflow_lib\",\n        LINKER_SCRIPT,\n    ],\n)\n</code></pre>\n<p>When I finally found the libtensorflow_inference.so file, it was only 177 bytes long.  Not sure it completed.</p>", "body_text": "Not sure if this is useful, but am reporting for your info.\nI used the following command (as listed above):\nbazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\n   --crosstool_top=//external:android/crosstool \\\n   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n   --cpu=armeabi-v7a\n\nand got the following error message (Running on MacOS with TF0.12 (Commit#412428)):\nKevins-MacBook-Air-2:tensorflow kevin$ bazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\n>    --crosstool_top=//external:android/crosstool \\\n>    --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n>    --cpu=armeabi-v7a\n..........................................................\nWARNING: Bazel Android NDK crosstools are based on Android NDK revision 12. The revision of the Android NDK given in android_ndk_repository rule 'androidndk' is '13.1.3345770'.\nINFO: Loading package: @local_config_cuda//cuda\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:avgpooling_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:bounds_check.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops_common.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops_gradients.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_activations.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_attention.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_backward_cuboid_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_backward_spatial_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_cuboid_convolution.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_patch_3d.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_pooling.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_softmax.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_spatial_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:fifo_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:maxpooling_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:ops_util.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:ops_util.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:padding_fifo_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:pooling_ops_common.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:pooling_ops_common.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:queue_base.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:queue_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:typed_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_entry.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_scorer.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_search.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_decoder.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_loss_util.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:naming.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:naming.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:tensor_bundle.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:tensor_bundle.h' directly. You should either move the file to this package or depend on an appropriate rule there.\nINFO: Found 1 target...\nINFO: From Compiling external/protobuf/src/google/protobuf/util/time_util.cc [for host]:\nexternal/protobuf/src/google/protobuf/util/time_util.cc:52:18: warning: unused variable 'kMicrosPerMillisecond' [-Wunused-const-variable]\nstatic const int kMicrosPerMillisecond = 1000;\n                 ^\nexternal/protobuf/src/google/protobuf/util/time_util.cc:56:19: warning: unused variable 'kTimestampFormat' [-Wunused-const-variable]\nstatic const char kTimestampFormat[] = \"%E4Y-%m-%dT%H:%M:%S\";\n                  ^\n2 warnings generated.\nINFO: From ProtoCompile tensorflow/core/example/example.pb.cc:\nbazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-fastbuild/genfiles/external/protobuf/src: warning: directory does not exist.\nINFO: From Compiling tensorflow/core/kernels/split_v_op.cc:\ntensorflow/core/kernels/split_v_op.cc: In instantiation of 'void tensorflow::SplitVOpCPU<T, Tlen>::Compute(tensorflow::OpKernelContext*) [with T = float; Tlen = long long int]':\ntensorflow/core/kernels/split_v_op.cc:400:1:   required from here\ntensorflow/core/kernels/split_v_op.cc:212:63: warning: narrowing conversion of 'split_sizes_vec.std::vector<_Tp, _Alloc>::operator[]<long long int, std::allocator<long long int> >(((std::vector<long long int, std::allocator<long long int> >::size_type)i))' from '__gnu_cxx::__alloc_traits<std::allocator<long long int> >::value_type {aka long long int}' to 'int' inside { } [-Wnarrowing]\n           prefix_dim_size, split_sizes_vec[i], suffix_dim_size};\n                                                               ^\ntensorflow/core/kernels/split_v_op.cc: In instantiation of 'void tensorflow::SplitVOpCPU<T, Tlen>::Compute(tensorflow::OpKernelContext*) [with T = int; Tlen = long long int]':\ntensorflow/core/kernels/split_v_op.cc:400:1:   required from here\ntensorflow/core/kernels/split_v_op.cc:212:63: warning: narrowing conversion of 'split_sizes_vec.std::vector<_Tp, _Alloc>::operator[]<long long int, std::allocator<long long int> >(((std::vector<long long int, std::allocator<long long int> >::size_type)i))' from '__gnu_cxx::__alloc_traits<std::allocator<long long int> >::value_type {aka long long int}' to 'int' inside { } [-Wnarrowing]\nINFO: From Compiling tensorflow/core/kernels/split_op.cc:\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU<T>::Compute(tensorflow::OpKernelContext*) [with T = Eigen::QUInt8]':\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\n         prefix_dim_size, split_dim_output_size, suffix_dim_size};\n                                                                ^\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU<T>::Compute(tensorflow::OpKernelContext*) [with T = float]':\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU<T>::Compute(tensorflow::OpKernelContext*) [with T = int]':\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\nINFO: From Compiling tensorflow/core/kernels/tensor_array_ops.cc:\ntensorflow/core/kernels/tensor_array_ops.cc: In instantiation of 'void tensorflow::TensorArraySplitOp<Device, T>::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = float]':\ntensorflow/core/kernels/tensor_array_ops.cc:1268:1:   required from here\ntensorflow/core/kernels/tensor_array_ops.cc:1131:72: warning: narrowing conversion of 'previous_length' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\n       Eigen::DSizes<Eigen::DenseIndex, 3> indices{0, previous_length, 0};\n                                                                        ^\ntensorflow/core/kernels/tensor_array_ops.cc:1133:65: warning: narrowing conversion of '(Scalar)tensor_lengths_t.Eigen::TensorMap<PlainObjectType, Options_, MakePointer_>::operator()<Eigen::Tensor<const long long int, 1, 1, int>, 16, Eigen::MakePointer>(i)' from 'Scalar {aka long long int}' to 'int' inside { } [-Wnarrowing]\n                                                 elements_per_row};\n                                                                 ^\ntensorflow/core/kernels/tensor_array_ops.cc: In instantiation of 'void tensorflow::TensorArraySplitOp<Device, T>::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = int]':\ntensorflow/core/kernels/tensor_array_ops.cc:1268:1:   required from here\ntensorflow/core/kernels/tensor_array_ops.cc:1131:72: warning: narrowing conversion of 'previous_length' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\n       Eigen::DSizes<Eigen::DenseIndex, 3> indices{0, previous_length, 0};\n                                                                        ^\ntensorflow/core/kernels/tensor_array_ops.cc:1133:65: warning: narrowing conversion of '(Scalar)tensor_lengths_t.Eigen::TensorMap<PlainObjectType, Options_, MakePointer_>::operator()<Eigen::Tensor<const long long int, 1, 1, int>, 16, Eigen::MakePointer>(i)' from 'Scalar {aka long long int}' to 'int' inside { } [-Wnarrowing]\n                                                 elements_per_row};\n                                                                 ^\nINFO: From Compiling tensorflow/core/kernels/unpack_op.cc:\ntensorflow/core/kernels/unpack_op.cc: In instantiation of 'void tensorflow::UnpackOp<Device, T>::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = float]':\ntensorflow/core/kernels/unpack_op.cc:152:1:   required from here\ntensorflow/core/kernels/unpack_op.cc:109:75: warning: narrowing conversion of 'before_dim' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\n         Eigen::DSizes<Eigen::DenseIndex, 3> sizes{1, before_dim, after_dim};\n                                                                           ^\ntensorflow/core/kernels/unpack_op.cc: In instantiation of 'void tensorflow::UnpackOp<Device, T>::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = int]':\ntensorflow/core/kernels/unpack_op.cc:152:1:   required from here\ntensorflow/core/kernels/unpack_op.cc:109:75: warning: narrowing conversion of 'before_dim' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\nTarget //tensorflow/contrib/android:libtensorflow_inference.so up-to-date:\n  bazel-bin/tensorflow/contrib/android/libtensorflow_inference.so\nINFO: Elapsed time: 2481.205s, Critical Path: 2358.75s\n\n\nFurthermore, I can confirm that the BUILD file has the following section (with the required '-llog' an d '-lm' options):\n# Build the native .so.\n# bazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\n#   --crosstool_top=//external:android/crosstool \\\n#   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n#   --cpu=armeabi-v7a\nLINKER_SCRIPT = \"//tensorflow/contrib/android:jni/version_script.lds\"\n\ncc_binary(\n    name = \"libtensorflow_inference.so\",\n    srcs = [],\n    copts = tf_copts(),\n    linkopts = if_android([\n        \"-landroid\",\n        \"-llog\",\n        \"-lm\",\n        \"-z defs\",\n        \"-s\",\n        \"-Wl,--version-script\",  # This line must be directly followed by LINKER_SCRIPT.\n        LINKER_SCRIPT,\n    ]),\n    linkshared = 1,\n    linkstatic = 1,\n    tags = [\n        \"manual\",\n        \"notap\",\n    ],\n    deps = [\n        \":android_tensorflow_inference_jni\",\n        \"//tensorflow/core:android_tensorflow_lib\",\n        LINKER_SCRIPT,\n    ],\n)\n\nWhen I finally found the libtensorflow_inference.so file, it was only 177 bytes long.  Not sure it completed.", "body": "Not sure if this is useful, but am reporting for your info.\r\nI used the following command (as listed above):\r\n\r\n```\r\nbazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\r\n   --crosstool_top=//external:android/crosstool \\\r\n   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\r\n   --cpu=armeabi-v7a\r\n```\r\n\r\nand got the following error message (Running on MacOS with TF0.12 (Commit#412428)):\r\n\r\n```\r\nKevins-MacBook-Air-2:tensorflow kevin$ bazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\r\n>    --crosstool_top=//external:android/crosstool \\\r\n>    --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\r\n>    --cpu=armeabi-v7a\r\n..........................................................\r\nWARNING: Bazel Android NDK crosstools are based on Android NDK revision 12. The revision of the Android NDK given in android_ndk_repository rule 'androidndk' is '13.1.3345770'.\r\nINFO: Loading package: @local_config_cuda//cuda\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:avgpooling_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:bounds_check.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops_common.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:cwise_ops_gradients.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_activations.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_attention.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_backward_cuboid_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_backward_spatial_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_cuboid_convolution.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_patch_3d.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_pooling.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_softmax.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:eigen_spatial_convolutions.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:fifo_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:maxpooling_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:ops_util.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:ops_util.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:padding_fifo_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:pooling_ops_common.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:pooling_ops_common.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:queue_base.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:queue_op.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/kernels:typed_queue.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_entry.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_scorer.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_beam_search.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_decoder.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/ctc:ctc_loss_util.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:naming.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:naming.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:tensor_bundle.cc' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nWARNING: /Users/kevin/tensorflow/tensorflow/core/BUILD:779:12: in srcs attribute of cc_library rule //tensorflow/core:android_tensorflow_lib_lite: please do not import '//tensorflow/core/util/tensor_bundle:tensor_bundle.h' directly. You should either move the file to this package or depend on an appropriate rule there.\r\nINFO: Found 1 target...\r\nINFO: From Compiling external/protobuf/src/google/protobuf/util/time_util.cc [for host]:\r\nexternal/protobuf/src/google/protobuf/util/time_util.cc:52:18: warning: unused variable 'kMicrosPerMillisecond' [-Wunused-const-variable]\r\nstatic const int kMicrosPerMillisecond = 1000;\r\n                 ^\r\nexternal/protobuf/src/google/protobuf/util/time_util.cc:56:19: warning: unused variable 'kTimestampFormat' [-Wunused-const-variable]\r\nstatic const char kTimestampFormat[] = \"%E4Y-%m-%dT%H:%M:%S\";\r\n                  ^\r\n2 warnings generated.\r\nINFO: From ProtoCompile tensorflow/core/example/example.pb.cc:\r\nbazel-out/arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-fastbuild/genfiles/external/protobuf/src: warning: directory does not exist.\r\nINFO: From Compiling tensorflow/core/kernels/split_v_op.cc:\r\ntensorflow/core/kernels/split_v_op.cc: In instantiation of 'void tensorflow::SplitVOpCPU<T, Tlen>::Compute(tensorflow::OpKernelContext*) [with T = float; Tlen = long long int]':\r\ntensorflow/core/kernels/split_v_op.cc:400:1:   required from here\r\ntensorflow/core/kernels/split_v_op.cc:212:63: warning: narrowing conversion of 'split_sizes_vec.std::vector<_Tp, _Alloc>::operator[]<long long int, std::allocator<long long int> >(((std::vector<long long int, std::allocator<long long int> >::size_type)i))' from '__gnu_cxx::__alloc_traits<std::allocator<long long int> >::value_type {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\n           prefix_dim_size, split_sizes_vec[i], suffix_dim_size};\r\n                                                               ^\r\ntensorflow/core/kernels/split_v_op.cc: In instantiation of 'void tensorflow::SplitVOpCPU<T, Tlen>::Compute(tensorflow::OpKernelContext*) [with T = int; Tlen = long long int]':\r\ntensorflow/core/kernels/split_v_op.cc:400:1:   required from here\r\ntensorflow/core/kernels/split_v_op.cc:212:63: warning: narrowing conversion of 'split_sizes_vec.std::vector<_Tp, _Alloc>::operator[]<long long int, std::allocator<long long int> >(((std::vector<long long int, std::allocator<long long int> >::size_type)i))' from '__gnu_cxx::__alloc_traits<std::allocator<long long int> >::value_type {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\nINFO: From Compiling tensorflow/core/kernels/split_op.cc:\r\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU<T>::Compute(tensorflow::OpKernelContext*) [with T = Eigen::QUInt8]':\r\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\r\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\n         prefix_dim_size, split_dim_output_size, suffix_dim_size};\r\n                                                                ^\r\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU<T>::Compute(tensorflow::OpKernelContext*) [with T = float]':\r\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\r\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\ntensorflow/core/kernels/split_op.cc: In instantiation of 'void tensorflow::SplitOpCPU<T>::Compute(tensorflow::OpKernelContext*) [with T = int]':\r\ntensorflow/core/kernels/split_op.cc:272:1:   required from here\r\ntensorflow/core/kernels/split_op.cc:156:64: warning: narrowing conversion of '(tensorflow::int64)split_dim_output_size' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\nINFO: From Compiling tensorflow/core/kernels/tensor_array_ops.cc:\r\ntensorflow/core/kernels/tensor_array_ops.cc: In instantiation of 'void tensorflow::TensorArraySplitOp<Device, T>::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = float]':\r\ntensorflow/core/kernels/tensor_array_ops.cc:1268:1:   required from here\r\ntensorflow/core/kernels/tensor_array_ops.cc:1131:72: warning: narrowing conversion of 'previous_length' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\n       Eigen::DSizes<Eigen::DenseIndex, 3> indices{0, previous_length, 0};\r\n                                                                        ^\r\ntensorflow/core/kernels/tensor_array_ops.cc:1133:65: warning: narrowing conversion of '(Scalar)tensor_lengths_t.Eigen::TensorMap<PlainObjectType, Options_, MakePointer_>::operator()<Eigen::Tensor<const long long int, 1, 1, int>, 16, Eigen::MakePointer>(i)' from 'Scalar {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\n                                                 elements_per_row};\r\n                                                                 ^\r\ntensorflow/core/kernels/tensor_array_ops.cc: In instantiation of 'void tensorflow::TensorArraySplitOp<Device, T>::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = int]':\r\ntensorflow/core/kernels/tensor_array_ops.cc:1268:1:   required from here\r\ntensorflow/core/kernels/tensor_array_ops.cc:1131:72: warning: narrowing conversion of 'previous_length' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\n       Eigen::DSizes<Eigen::DenseIndex, 3> indices{0, previous_length, 0};\r\n                                                                        ^\r\ntensorflow/core/kernels/tensor_array_ops.cc:1133:65: warning: narrowing conversion of '(Scalar)tensor_lengths_t.Eigen::TensorMap<PlainObjectType, Options_, MakePointer_>::operator()<Eigen::Tensor<const long long int, 1, 1, int>, 16, Eigen::MakePointer>(i)' from 'Scalar {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\n                                                 elements_per_row};\r\n                                                                 ^\r\nINFO: From Compiling tensorflow/core/kernels/unpack_op.cc:\r\ntensorflow/core/kernels/unpack_op.cc: In instantiation of 'void tensorflow::UnpackOp<Device, T>::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = float]':\r\ntensorflow/core/kernels/unpack_op.cc:152:1:   required from here\r\ntensorflow/core/kernels/unpack_op.cc:109:75: warning: narrowing conversion of 'before_dim' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\n         Eigen::DSizes<Eigen::DenseIndex, 3> sizes{1, before_dim, after_dim};\r\n                                                                           ^\r\ntensorflow/core/kernels/unpack_op.cc: In instantiation of 'void tensorflow::UnpackOp<Device, T>::Compute(tensorflow::OpKernelContext*) [with Device = Eigen::ThreadPoolDevice; T = int]':\r\ntensorflow/core/kernels/unpack_op.cc:152:1:   required from here\r\ntensorflow/core/kernels/unpack_op.cc:109:75: warning: narrowing conversion of 'before_dim' from 'tensorflow::int64 {aka long long int}' to 'int' inside { } [-Wnarrowing]\r\nTarget //tensorflow/contrib/android:libtensorflow_inference.so up-to-date:\r\n  bazel-bin/tensorflow/contrib/android/libtensorflow_inference.so\r\nINFO: Elapsed time: 2481.205s, Critical Path: 2358.75s\r\n\r\n```\r\nFurthermore, I can confirm that the BUILD file has the following section (with the required '-llog' an d '-lm' options): \r\n```\r\n# Build the native .so.\r\n# bazel build //tensorflow/contrib/android:libtensorflow_inference.so \\\r\n#   --crosstool_top=//external:android/crosstool \\\r\n#   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\r\n#   --cpu=armeabi-v7a\r\nLINKER_SCRIPT = \"//tensorflow/contrib/android:jni/version_script.lds\"\r\n\r\ncc_binary(\r\n    name = \"libtensorflow_inference.so\",\r\n    srcs = [],\r\n    copts = tf_copts(),\r\n    linkopts = if_android([\r\n        \"-landroid\",\r\n        \"-llog\",\r\n        \"-lm\",\r\n        \"-z defs\",\r\n        \"-s\",\r\n        \"-Wl,--version-script\",  # This line must be directly followed by LINKER_SCRIPT.\r\n        LINKER_SCRIPT,\r\n    ]),\r\n    linkshared = 1,\r\n    linkstatic = 1,\r\n    tags = [\r\n        \"manual\",\r\n        \"notap\",\r\n    ],\r\n    deps = [\r\n        \":android_tensorflow_inference_jni\",\r\n        \"//tensorflow/core:android_tensorflow_lib\",\r\n        LINKER_SCRIPT,\r\n    ],\r\n)\r\n```\r\nWhen I finally found the libtensorflow_inference.so file, it was only 177 bytes long.  Not sure it completed."}
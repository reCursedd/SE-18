{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/308931453", "html_url": "https://github.com/tensorflow/tensorflow/issues/10665#issuecomment-308931453", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10665", "id": 308931453, "node_id": "MDEyOklzc3VlQ29tbWVudDMwODkzMTQ1Mw==", "user": {"login": "RustingSword", "id": 449233, "node_id": "MDQ6VXNlcjQ0OTIzMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/449233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RustingSword", "html_url": "https://github.com/RustingSword", "followers_url": "https://api.github.com/users/RustingSword/followers", "following_url": "https://api.github.com/users/RustingSword/following{/other_user}", "gists_url": "https://api.github.com/users/RustingSword/gists{/gist_id}", "starred_url": "https://api.github.com/users/RustingSword/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RustingSword/subscriptions", "organizations_url": "https://api.github.com/users/RustingSword/orgs", "repos_url": "https://api.github.com/users/RustingSword/repos", "events_url": "https://api.github.com/users/RustingSword/events{/privacy}", "received_events_url": "https://api.github.com/users/RustingSword/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-16T04:40:17Z", "updated_at": "2017-06-16T04:40:17Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I had this exact problem on CentOS 7.1, with gcc 4.8.3, bazel 0.4.5, CUDA 8.0, cuDNN 5.1. CUDA and cuDNN are installed in the default path (<code>/usr/local/cuda</code>).</p>\n<p>The error messages are as follows:</p>\n<pre><code>ERROR: /home/user/.cache/bazel/_bazel_sankuai/a124f28b2f66957c03d4d409b9638361/external/nccl_archive/BUILD:33:1: undeclared inclusion(s) in rule '@nccl_archive//:nccl':\nthis rule is missing dependency declarations for the following files included by 'external/nccl_archive/src/libwrap.cu.cc':\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/limits.h'\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/syslimits.h'\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/stddef.h'\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/stdarg.h'.\n[...]\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 38.362s, Critical Path: 28.04s\n</code></pre>\n<p>Adding</p>\n<pre><code>cxx_builtin_include_directory: \"/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include\"\n</code></pre>\n<p>to</p>\n<pre><code>third_party/gpus/crosstool/CROSSTOOL_nvcc.tpl\n</code></pre>\n<p>seems fixed the problem.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11053933\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/lxwgcool\">@lxwgcool</a> I noticed that the file path in your errors starts with <code>/gpfs/gpfs1/</code>, while your added path in <code>CROSSTOOL_nvcc.tpl</code> starts with <code>/apps2</code>, could this be the problem?</p>", "body_text": "I had this exact problem on CentOS 7.1, with gcc 4.8.3, bazel 0.4.5, CUDA 8.0, cuDNN 5.1. CUDA and cuDNN are installed in the default path (/usr/local/cuda).\nThe error messages are as follows:\nERROR: /home/user/.cache/bazel/_bazel_sankuai/a124f28b2f66957c03d4d409b9638361/external/nccl_archive/BUILD:33:1: undeclared inclusion(s) in rule '@nccl_archive//:nccl':\nthis rule is missing dependency declarations for the following files included by 'external/nccl_archive/src/libwrap.cu.cc':\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/limits.h'\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/syslimits.h'\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/stddef.h'\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/stdarg.h'.\n[...]\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 38.362s, Critical Path: 28.04s\n\nAdding\ncxx_builtin_include_directory: \"/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include\"\n\nto\nthird_party/gpus/crosstool/CROSSTOOL_nvcc.tpl\n\nseems fixed the problem.\n@lxwgcool I noticed that the file path in your errors starts with /gpfs/gpfs1/, while your added path in CROSSTOOL_nvcc.tpl starts with /apps2, could this be the problem?", "body": "I had this exact problem on CentOS 7.1, with gcc 4.8.3, bazel 0.4.5, CUDA 8.0, cuDNN 5.1. CUDA and cuDNN are installed in the default path (`/usr/local/cuda`).\r\n\r\nThe error messages are as follows:\r\n```\r\nERROR: /home/user/.cache/bazel/_bazel_sankuai/a124f28b2f66957c03d4d409b9638361/external/nccl_archive/BUILD:33:1: undeclared inclusion(s) in rule '@nccl_archive//:nccl':\r\nthis rule is missing dependency declarations for the following files included by 'external/nccl_archive/src/libwrap.cu.cc':\r\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/limits.h'\r\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/syslimits.h'\r\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/stddef.h'\r\n  '/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include/stdarg.h'.\r\n[...]\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 38.362s, Critical Path: 28.04s\r\n```\r\n\r\nAdding\r\n```\r\ncxx_builtin_include_directory: \"/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include\"\r\n```\r\nto\r\n```\r\nthird_party/gpus/crosstool/CROSSTOOL_nvcc.tpl\r\n```\r\nseems fixed the problem.\r\n\r\n@lxwgcool I noticed that the file path in your errors starts with `/gpfs/gpfs1/`, while your added path in `CROSSTOOL_nvcc.tpl` starts with `/apps2`, could this be the problem?"}
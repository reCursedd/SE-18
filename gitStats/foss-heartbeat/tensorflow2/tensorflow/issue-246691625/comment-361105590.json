{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/361105590", "html_url": "https://github.com/tensorflow/tensorflow/issues/11903#issuecomment-361105590", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11903", "id": 361105590, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTEwNTU5MA==", "user": {"login": "ahundt", "id": 55744, "node_id": "MDQ6VXNlcjU1NzQ0", "avatar_url": "https://avatars1.githubusercontent.com/u/55744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahundt", "html_url": "https://github.com/ahundt", "followers_url": "https://api.github.com/users/ahundt/followers", "following_url": "https://api.github.com/users/ahundt/following{/other_user}", "gists_url": "https://api.github.com/users/ahundt/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahundt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahundt/subscriptions", "organizations_url": "https://api.github.com/users/ahundt/orgs", "repos_url": "https://api.github.com/users/ahundt/repos", "events_url": "https://api.github.com/users/ahundt/events{/privacy}", "received_events_url": "https://api.github.com/users/ahundt/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-28T23:15:45Z", "updated_at": "2018-01-30T02:07:14Z", "author_association": "NONE", "body_html": "<p>I'm encountering <del>this same</del> a similar error when compiling the tf1.5 release from source. Would someone mind posting the flags or a super obvious command line BASH script that enables MPI correctly works with ubuntu 16.04?</p>\n<p>my error:</p>\n<pre><code>INFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (267 packages loaded).\nINFO: Found 1 target...\nERROR: missing input file '//third_party/mpi:mpi.h'\nERROR: /home/ahundt/src/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpi.h'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nERROR: /home/ahundt/src/tensorflow/third_party/mpi/BUILD:18:1 1 input file(s) do not exist\nINFO: Elapsed time: 29.868s, Critical Path: 8.44s\nFAILED: Build did NOT complete successfully\n</code></pre>\n<p>I also tried<br>\n<code>export MPI_HOME=/usr</code><br>\nwhich got:</p>\n<pre><code>WARNING: /home/ahundt/src/tensorflow/tensorflow/core/BUILD:1807:1: in includes attribute of cc_library rule //tensorflow/core:framework_headers_lib: '../../external/nsync/public' resolves to 'external/nsync/public' not below the relative path of its package 'tensorflow/core'. This will be an error in the future. Since this rule was created by the macro 'cc_header_only_library', the error might have been caused by the macro implementation in /home/ahundt/src/tensorflow/tensorflow/tensorflow.bzl:1138:30\nWARNING: /home/ahundt/src/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.\nWARNING: /home/ahundt/src/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:gc': No longer supported. Switch to SavedModel immediately.\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (267 packages loaded).\nINFO: Found 1 target...\nERROR: missing input file '//third_party/mpi:mpi.h'\nERROR: /home/ahundt/src/tensorflow/tensorflow/python/BUILD:3055:1: //tensorflow/python:pywrap_tensorflow_internal_py_wrap: missing input file '//third_party/mpi:mpi.h'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nERROR: /home/ahundt/src/tensorflow/tensorflow/python/BUILD:3055:1 1 input file(s) do not exist\nINFO: Elapsed time: 20.864s, Critical Path: 0.04s\nFAILED: Build did NOT complete successfully\n-&gt; [1]\n</code></pre>\n<p>Additionally the following options for MPI_HOME didn't work:<br>\n<code>/usr/include/openmpi</code>, <code>/user/lib/openmpi</code></p>", "body_text": "I'm encountering this same a similar error when compiling the tf1.5 release from source. Would someone mind posting the flags or a super obvious command line BASH script that enables MPI correctly works with ubuntu 16.04?\nmy error:\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (267 packages loaded).\nINFO: Found 1 target...\nERROR: missing input file '//third_party/mpi:mpi.h'\nERROR: /home/ahundt/src/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpi.h'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nERROR: /home/ahundt/src/tensorflow/third_party/mpi/BUILD:18:1 1 input file(s) do not exist\nINFO: Elapsed time: 29.868s, Critical Path: 8.44s\nFAILED: Build did NOT complete successfully\n\nI also tried\nexport MPI_HOME=/usr\nwhich got:\nWARNING: /home/ahundt/src/tensorflow/tensorflow/core/BUILD:1807:1: in includes attribute of cc_library rule //tensorflow/core:framework_headers_lib: '../../external/nsync/public' resolves to 'external/nsync/public' not below the relative path of its package 'tensorflow/core'. This will be an error in the future. Since this rule was created by the macro 'cc_header_only_library', the error might have been caused by the macro implementation in /home/ahundt/src/tensorflow/tensorflow/tensorflow.bzl:1138:30\nWARNING: /home/ahundt/src/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.\nWARNING: /home/ahundt/src/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:gc': No longer supported. Switch to SavedModel immediately.\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (267 packages loaded).\nINFO: Found 1 target...\nERROR: missing input file '//third_party/mpi:mpi.h'\nERROR: /home/ahundt/src/tensorflow/tensorflow/python/BUILD:3055:1: //tensorflow/python:pywrap_tensorflow_internal_py_wrap: missing input file '//third_party/mpi:mpi.h'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nERROR: /home/ahundt/src/tensorflow/tensorflow/python/BUILD:3055:1 1 input file(s) do not exist\nINFO: Elapsed time: 20.864s, Critical Path: 0.04s\nFAILED: Build did NOT complete successfully\n-> [1]\n\nAdditionally the following options for MPI_HOME didn't work:\n/usr/include/openmpi, /user/lib/openmpi", "body": "I'm encountering ~this same~ a similar error when compiling the tf1.5 release from source. Would someone mind posting the flags or a super obvious command line BASH script that enables MPI correctly works with ubuntu 16.04?\r\n\r\nmy error:\r\n```\r\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (267 packages loaded).\r\nINFO: Found 1 target...\r\nERROR: missing input file '//third_party/mpi:mpi.h'\r\nERROR: /home/ahundt/src/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpi.h'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: /home/ahundt/src/tensorflow/third_party/mpi/BUILD:18:1 1 input file(s) do not exist\r\nINFO: Elapsed time: 29.868s, Critical Path: 8.44s\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nI also tried \r\n`export MPI_HOME=/usr`\r\nwhich got:\r\n```\r\nWARNING: /home/ahundt/src/tensorflow/tensorflow/core/BUILD:1807:1: in includes attribute of cc_library rule //tensorflow/core:framework_headers_lib: '../../external/nsync/public' resolves to 'external/nsync/public' not below the relative path of its package 'tensorflow/core'. This will be an error in the future. Since this rule was created by the macro 'cc_header_only_library', the error might have been caused by the macro implementation in /home/ahundt/src/tensorflow/tensorflow/tensorflow.bzl:1138:30\r\nWARNING: /home/ahundt/src/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /home/ahundt/src/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:gc': No longer supported. Switch to SavedModel immediately.\r\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (267 packages loaded).\r\nINFO: Found 1 target...\r\nERROR: missing input file '//third_party/mpi:mpi.h'\r\nERROR: /home/ahundt/src/tensorflow/tensorflow/python/BUILD:3055:1: //tensorflow/python:pywrap_tensorflow_internal_py_wrap: missing input file '//third_party/mpi:mpi.h'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: /home/ahundt/src/tensorflow/tensorflow/python/BUILD:3055:1 1 input file(s) do not exist\r\nINFO: Elapsed time: 20.864s, Critical Path: 0.04s\r\nFAILED: Build did NOT complete successfully\r\n-> [1]\r\n```\r\nAdditionally the following options for MPI_HOME didn't work:\r\n`/usr/include/openmpi`, `/user/lib/openmpi`"}
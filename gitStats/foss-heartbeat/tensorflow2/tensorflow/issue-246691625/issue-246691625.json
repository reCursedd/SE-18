{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11903", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11903/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11903/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11903/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11903", "id": 246691625, "node_id": "MDU6SXNzdWUyNDY2OTE2MjU=", "number": 11903, "title": "Missing input file mpi:mpio.h", "user": {"login": "episodeyang", "id": 630490, "node_id": "MDQ6VXNlcjYzMDQ5MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/630490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/episodeyang", "html_url": "https://github.com/episodeyang", "followers_url": "https://api.github.com/users/episodeyang/followers", "following_url": "https://api.github.com/users/episodeyang/following{/other_user}", "gists_url": "https://api.github.com/users/episodeyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/episodeyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/episodeyang/subscriptions", "organizations_url": "https://api.github.com/users/episodeyang/orgs", "repos_url": "https://api.github.com/users/episodeyang/repos", "events_url": "https://api.github.com/users/episodeyang/events{/privacy}", "received_events_url": "https://api.github.com/users/episodeyang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2017-07-31T09:09:55Z", "updated_at": "2018-11-10T17:56:52Z", "closed_at": "2018-11-10T17:56:51Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>Have I written custom code (as opposed to using a stock example script provided in TensorFlow): <strong>No</strong></li>\n<li>OS Platform and Distribution: <strong>Linux Ubuntu 16.04)</strong></li>\n<li>TensorFlow installed from: <strong>source</strong></li>\n<li>TensorFlow version: <strong>master</strong></li>\n<li>Python version: <strong>3.5.2</strong></li>\n<li>Bazel version (if compiling from source): <strong>0.5.2</strong></li>\n<li>CUDA/cuDNN version: <strong>8.0</strong></li>\n<li>GPU model and memory: <strong>K80</strong></li>\n<li>Exact command to reproduce:</li>\n</ul>\n<div class=\"highlight highlight-source-shell\"><pre><span class=\"pl-c\"><span class=\"pl-c\">#!</span>/usr/bin/env bash</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> Only the compilation step for tensorflow is in this script, for clarity.</span>\n\ngit clone https://github.com/tensorflow/tensorflow\n<span class=\"pl-c1\">cd</span> ./tensorflow\n<span class=\"pl-k\">export</span> LD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda-8.0/targets/x86_64-linux/lib:/usr/lib/x86_64-linux-gnu/\n<span class=\"pl-k\">export</span> PYTHON_BIN_PATH=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/ubuntu/anaconda3/bin/python<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> PYTHON_LIB_PATH=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/ubuntu/anaconda3/lib/python3.6/site-packages<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> TF_NEED_JEMALLOC=1\n<span class=\"pl-k\">export</span> TF_NEED_GCP=0\n<span class=\"pl-k\">export</span> TF_NEED_HDFS=0\n<span class=\"pl-k\">export</span> TF_ENABLE_XLA=0\n<span class=\"pl-k\">export</span> TF_NEED_VERBS=0\n<span class=\"pl-k\">export</span> TF_NEED_OPENCL=0\n<span class=\"pl-k\">export</span> TF_NEED_CUDA=1\n<span class=\"pl-k\">export</span> TF_CUDA_CLANG=0\n<span class=\"pl-k\">export</span> TF_NEED_MPI=1\n<span class=\"pl-k\">export</span> MPI_HOME=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/lib/openmpi<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> GCC_HOST_COMPILER_PATH=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/bin/gcc<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> CUDA_VERSION=<span class=\"pl-s\"><span class=\"pl-pds\">'</span>8.0<span class=\"pl-pds\">'</span></span>\n<span class=\"pl-k\">export</span> CUDNN_VERSION=<span class=\"pl-s\"><span class=\"pl-pds\">'</span>6<span class=\"pl-pds\">'</span></span>\n<span class=\"pl-k\">export</span> CUDNN_INSTALL_PATH=/usr/local/cuda\n<span class=\"pl-k\">export</span> CUDA_COMPUTE_CAPABILITIES=<span class=\"pl-s\"><span class=\"pl-pds\">'</span>3.7<span class=\"pl-pds\">'</span></span>\n<span class=\"pl-k\">export</span> CUDA_PATH=<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/usr/local/cuda<span class=\"pl-pds\">'</span></span>\n<span class=\"pl-k\">export</span> CUDA_PATH_LINUX=<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/opt/cuda<span class=\"pl-pds\">'</span></span>\nyes <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">|</span> ./configure\nbazel build -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-msse4.2 --config=cuda -k //tensorflow/tools/pip_package:build_pip_package <span class=\"pl-k\">&amp;&amp;</span> \\\nbazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg</pre></div>\n<h3>Describe the problem</h3>\n<p>When turning on <code>mpi</code>, the compile fails with the following error:</p>\n<pre lang=\"error\"><code>INFO: Found 1 target...\nERROR: missing input file '//third_party/mpi:mpicxx.h'.\nERROR: missing input file '//third_party/mpi:mpi.h'.\nERROR: missing input file '//third_party/mpi:mpio.h'.\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpicxx.h'.\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpio.h'.\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpi.h'.\n</code></pre>\n<h3>Source code / logs</h3>\n<p>before running the build script I install bazel 0.5.2 (0.5.3 breaks the build)</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution: Linux Ubuntu 16.04)\nTensorFlow installed from: source\nTensorFlow version: master\nPython version: 3.5.2\nBazel version (if compiling from source): 0.5.2\nCUDA/cuDNN version: 8.0\nGPU model and memory: K80\nExact command to reproduce:\n\n#!/usr/bin/env bash\n# Only the compilation step for tensorflow is in this script, for clarity.\n\ngit clone https://github.com/tensorflow/tensorflow\ncd ./tensorflow\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda-8.0/targets/x86_64-linux/lib:/usr/lib/x86_64-linux-gnu/\nexport PYTHON_BIN_PATH=\"/home/ubuntu/anaconda3/bin/python\"\nexport PYTHON_LIB_PATH=\"/home/ubuntu/anaconda3/lib/python3.6/site-packages\"\nexport TF_NEED_JEMALLOC=1\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_ENABLE_XLA=0\nexport TF_NEED_VERBS=0\nexport TF_NEED_OPENCL=0\nexport TF_NEED_CUDA=1\nexport TF_CUDA_CLANG=0\nexport TF_NEED_MPI=1\nexport MPI_HOME=\"/usr/lib/openmpi\"\nexport GCC_HOST_COMPILER_PATH=\"/usr/bin/gcc\"\nexport CUDA_VERSION='8.0'\nexport CUDNN_VERSION='6'\nexport CUDNN_INSTALL_PATH=/usr/local/cuda\nexport CUDA_COMPUTE_CAPABILITIES='3.7'\nexport CUDA_PATH='/usr/local/cuda'\nexport CUDA_PATH_LINUX='/opt/cuda'\nyes \"\" | ./configure\nbazel build -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-msse4.2 --config=cuda -k //tensorflow/tools/pip_package:build_pip_package && \\\nbazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\nDescribe the problem\nWhen turning on mpi, the compile fails with the following error:\nINFO: Found 1 target...\nERROR: missing input file '//third_party/mpi:mpicxx.h'.\nERROR: missing input file '//third_party/mpi:mpi.h'.\nERROR: missing input file '//third_party/mpi:mpio.h'.\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpicxx.h'.\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpio.h'.\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpi.h'.\n\nSource code / logs\nbefore running the build script I install bazel 0.5.2 (0.5.3 breaks the build)", "body": "### System information\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **No**\r\n- OS Platform and Distribution: **Linux Ubuntu 16.04)**\r\n- TensorFlow installed from: **source**\r\n- TensorFlow version: **master**\r\n- Python version: **3.5.2**\r\n- Bazel version (if compiling from source): **0.5.2**\r\n- CUDA/cuDNN version: **8.0**\r\n- GPU model and memory: **K80**\r\n- Exact command to reproduce:\r\n\r\n```bash\r\n#!/usr/bin/env bash\r\n# Only the compilation step for tensorflow is in this script, for clarity.\r\n\r\ngit clone https://github.com/tensorflow/tensorflow\r\ncd ./tensorflow\r\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda-8.0/targets/x86_64-linux/lib:/usr/lib/x86_64-linux-gnu/\r\nexport PYTHON_BIN_PATH=\"/home/ubuntu/anaconda3/bin/python\"\r\nexport PYTHON_LIB_PATH=\"/home/ubuntu/anaconda3/lib/python3.6/site-packages\"\r\nexport TF_NEED_JEMALLOC=1\r\nexport TF_NEED_GCP=0\r\nexport TF_NEED_HDFS=0\r\nexport TF_ENABLE_XLA=0\r\nexport TF_NEED_VERBS=0\r\nexport TF_NEED_OPENCL=0\r\nexport TF_NEED_CUDA=1\r\nexport TF_CUDA_CLANG=0\r\nexport TF_NEED_MPI=1\r\nexport MPI_HOME=\"/usr/lib/openmpi\"\r\nexport GCC_HOST_COMPILER_PATH=\"/usr/bin/gcc\"\r\nexport CUDA_VERSION='8.0'\r\nexport CUDNN_VERSION='6'\r\nexport CUDNN_INSTALL_PATH=/usr/local/cuda\r\nexport CUDA_COMPUTE_CAPABILITIES='3.7'\r\nexport CUDA_PATH='/usr/local/cuda'\r\nexport CUDA_PATH_LINUX='/opt/cuda'\r\nyes \"\" | ./configure\r\nbazel build -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-msse4.2 --config=cuda -k //tensorflow/tools/pip_package:build_pip_package && \\\r\nbazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg\r\n```\r\n\r\n### Describe the problem\r\n\r\nWhen turning on `mpi`, the compile fails with the following error:\r\n\r\n```error\r\nINFO: Found 1 target...\r\nERROR: missing input file '//third_party/mpi:mpicxx.h'.\r\nERROR: missing input file '//third_party/mpi:mpi.h'.\r\nERROR: missing input file '//third_party/mpi:mpio.h'.\r\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpicxx.h'.\r\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpio.h'.\r\nERROR: /home/ubuntu/scripts/tensorflow/third_party/mpi/BUILD:18:1: //third_party/mpi:mpi: missing input file '//third_party/mpi:mpi.h'.\r\n```\r\n\r\n### Source code / logs\r\nbefore running the build script I install bazel 0.5.2 (0.5.3 breaks the build)"}
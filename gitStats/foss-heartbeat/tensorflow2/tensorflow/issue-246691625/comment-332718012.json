{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/332718012", "html_url": "https://github.com/tensorflow/tensorflow/issues/11903#issuecomment-332718012", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11903", "id": 332718012, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjcxODAxMg==", "user": {"login": "tz579", "id": 15526452, "node_id": "MDQ6VXNlcjE1NTI2NDUy", "avatar_url": "https://avatars0.githubusercontent.com/u/15526452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tz579", "html_url": "https://github.com/tz579", "followers_url": "https://api.github.com/users/tz579/followers", "following_url": "https://api.github.com/users/tz579/following{/other_user}", "gists_url": "https://api.github.com/users/tz579/gists{/gist_id}", "starred_url": "https://api.github.com/users/tz579/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tz579/subscriptions", "organizations_url": "https://api.github.com/users/tz579/orgs", "repos_url": "https://api.github.com/users/tz579/repos", "events_url": "https://api.github.com/users/tz579/events{/privacy}", "received_events_url": "https://api.github.com/users/tz579/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-28T03:32:07Z", "updated_at": "2017-09-28T03:42:54Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1643141\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jbedorf\">@jbedorf</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1586757\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/eLvErDe\">@eLvErDe</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8320911\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ahaider3\">@ahaider3</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=30652972\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/xgh45\">@xgh45</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=630490\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/episodeyang\">@episodeyang</a><br>\nI have successfully tweaked the variable OMPI_SKIP_MPICXX for a successful building (for trunk version of tensorflow).<br>\nHowever, it seems that we have to use an enviroment variable CC_OPT_FLAGS=\"-DOMPI_SKIP_MPICXX=1 -march=native\" instead. That's because only in this way we can pass the variable into the source code layer and bypass the original definition of the macro OMPI_SKIP_MPICXX in the source code (for this case mpi.h). CC_OPT_FLAGS is the variable taken by configure.py (for trunk version of tensorflow) to assign the values for --copt &amp; --cxxopt in bazel build process.</p>", "body_text": "@jbedorf @eLvErDe @ahaider3 @xgh45 @episodeyang\nI have successfully tweaked the variable OMPI_SKIP_MPICXX for a successful building (for trunk version of tensorflow).\nHowever, it seems that we have to use an enviroment variable CC_OPT_FLAGS=\"-DOMPI_SKIP_MPICXX=1 -march=native\" instead. That's because only in this way we can pass the variable into the source code layer and bypass the original definition of the macro OMPI_SKIP_MPICXX in the source code (for this case mpi.h). CC_OPT_FLAGS is the variable taken by configure.py (for trunk version of tensorflow) to assign the values for --copt & --cxxopt in bazel build process.", "body": "@jbedorf @eLvErDe @ahaider3 @xgh45 @episodeyang \r\nI have successfully tweaked the variable OMPI_SKIP_MPICXX for a successful building (for trunk version of tensorflow).\r\nHowever, it seems that we have to use an enviroment variable CC_OPT_FLAGS=\"-DOMPI_SKIP_MPICXX=1 -march=native\" instead. That's because only in this way we can pass the variable into the source code layer and bypass the original definition of the macro OMPI_SKIP_MPICXX in the source code (for this case mpi.h). CC_OPT_FLAGS is the variable taken by configure.py (for trunk version of tensorflow) to assign the values for --copt & --cxxopt in bazel build process."}
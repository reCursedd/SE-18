{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/121178649", "pull_request_review_id": 43212469, "id": 121178649, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMTE3ODY0OQ==", "diff_hunk": "@@ -102,6 +110,9 @@ def generate_batch(batch_size, num_skips, skip_window):\n   span = 2 * skip_window + 1  # [ skip_window target skip_window ]\n   buffer = collections.deque(maxlen=span)\n   for _ in range(span):\n+    if len(buffer)!=0 and data_index == 0:\n+      skip_to_start(buffer, skip_window)\n+      break\n     buffer.append(data[data_index])\n     data_index = (data_index + 1) % len(data)", "path": "tensorflow/examples/tutorials/word2vec/word2vec_basic.py", "position": null, "original_position": 23, "commit_id": "c36c5fdc59a9753e4dde1fb695ba7b265802134f", "original_commit_id": "75bdaa37ec07e3b697cac9f8f7427b5b4f5402e9", "user": {"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}, "body": "Please use the shorter and clearer version.  Note that you don't need to clear the buffer for the first use, since it was created immediately before.  However, note that my shorter clearer version is slightly wrong.  It should be\r\n\r\n    if data_index + span > len(data):\r\n      data_index = 0\r\n    buffer.extend(data[data_index:data_index + span])\r\n    data_index += span", "created_at": "2017-06-09T17:18:15Z", "updated_at": "2017-06-09T17:40:58Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/10414#discussion_r121178649", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/10414", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/121178649"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/10414#discussion_r121178649"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/10414"}}, "body_html": "<p>Please use the shorter and clearer version.  Note that you don't need to clear the buffer for the first use, since it was created immediately before.  However, note that my shorter clearer version is slightly wrong.  It should be</p>\n<pre><code>if data_index + span &gt; len(data):\n  data_index = 0\nbuffer.extend(data[data_index:data_index + span])\ndata_index += span\n</code></pre>", "body_text": "Please use the shorter and clearer version.  Note that you don't need to clear the buffer for the first use, since it was created immediately before.  However, note that my shorter clearer version is slightly wrong.  It should be\nif data_index + span > len(data):\n  data_index = 0\nbuffer.extend(data[data_index:data_index + span])\ndata_index += span", "in_reply_to_id": 121168038}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/396462644", "html_url": "https://github.com/tensorflow/tensorflow/issues/15134#issuecomment-396462644", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15134", "id": 396462644, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjQ2MjY0NA==", "user": {"login": "rryan", "id": 26527, "node_id": "MDQ6VXNlcjI2NTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/26527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rryan", "html_url": "https://github.com/rryan", "followers_url": "https://api.github.com/users/rryan/followers", "following_url": "https://api.github.com/users/rryan/following{/other_user}", "gists_url": "https://api.github.com/users/rryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/rryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rryan/subscriptions", "organizations_url": "https://api.github.com/users/rryan/orgs", "repos_url": "https://api.github.com/users/rryan/repos", "events_url": "https://api.github.com/users/rryan/events{/privacy}", "received_events_url": "https://api.github.com/users/rryan/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-12T04:32:35Z", "updated_at": "2018-06-12T04:32:35Z", "author_association": "MEMBER", "body_html": "<p>Hi! Thank you <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11923487\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fedden\">@fedden</a> for the helpful repro.</p>\n<p>One difference between librosa and <code>tf.contrib.signal.stft</code> is that librosa center-pads the signal with reflection when framing while <code>tf.contrib.signal.stft</code> (and <code>tf.spectral.rfft</code> and <code>np.fft.rfft</code>) pad from the right with zeros by default. Adding support for padding options like these to <code>tf.contrib.signal.stft</code> would be a nice addition!</p>\n<p>I think that accounts for the difference here. I put your repro in a <a href=\"https://colab.research.google.com/drive/1MFhk40mojsXI-_prvePwRyhSgLrYzi3p#scrollTo=nmPlOcYoPEZp\" rel=\"nofollow\">Colab notebook</a> and set <code>center=False</code> and the max difference in magnitude between TF and librosa becomes <code>1e-5</code>.</p>", "body_text": "Hi! Thank you @fedden for the helpful repro.\nOne difference between librosa and tf.contrib.signal.stft is that librosa center-pads the signal with reflection when framing while tf.contrib.signal.stft (and tf.spectral.rfft and np.fft.rfft) pad from the right with zeros by default. Adding support for padding options like these to tf.contrib.signal.stft would be a nice addition!\nI think that accounts for the difference here. I put your repro in a Colab notebook and set center=False and the max difference in magnitude between TF and librosa becomes 1e-5.", "body": "Hi! Thank you @fedden for the helpful repro.\r\n\r\nOne difference between librosa and `tf.contrib.signal.stft` is that librosa center-pads the signal with reflection when framing while `tf.contrib.signal.stft` (and `tf.spectral.rfft` and `np.fft.rfft`) pad from the right with zeros by default. Adding support for padding options like these to `tf.contrib.signal.stft` would be a nice addition!\r\n\r\n I think that accounts for the difference here. I put your repro in a [Colab notebook](https://colab.research.google.com/drive/1MFhk40mojsXI-_prvePwRyhSgLrYzi3p#scrollTo=nmPlOcYoPEZp) and set `center=False` and the max difference in magnitude between TF and librosa becomes `1e-5`."}
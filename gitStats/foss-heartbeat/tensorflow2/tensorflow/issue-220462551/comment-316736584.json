{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/316736584", "html_url": "https://github.com/tensorflow/tensorflow/issues/9080#issuecomment-316736584", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9080", "id": 316736584, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjczNjU4NA==", "user": {"login": "nsmetanin", "id": 764902, "node_id": "MDQ6VXNlcjc2NDkwMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/764902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nsmetanin", "html_url": "https://github.com/nsmetanin", "followers_url": "https://api.github.com/users/nsmetanin/followers", "following_url": "https://api.github.com/users/nsmetanin/following{/other_user}", "gists_url": "https://api.github.com/users/nsmetanin/gists{/gist_id}", "starred_url": "https://api.github.com/users/nsmetanin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nsmetanin/subscriptions", "organizations_url": "https://api.github.com/users/nsmetanin/orgs", "repos_url": "https://api.github.com/users/nsmetanin/repos", "events_url": "https://api.github.com/users/nsmetanin/events{/privacy}", "received_events_url": "https://api.github.com/users/nsmetanin/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-20T15:18:31Z", "updated_at": "2017-07-20T15:18:31Z", "author_association": "NONE", "body_html": "<p>Just figured out that building tensorflow (1.2.1) <strong>from source</strong> with pretty much all configure options set to default solves this problem. My intuition is that the problem was caused by default allocator in tensorflow from pip package, but when you build it from source, it enables jemalloc by default (I've not reviewed this a lot).</p>\n<p>Now it works flawlessly through NVIDIA MPS, but I couldn't get any performance gain for my inference tasks (mostly RNN-based), only slight speed decrease ~10%.</p>", "body_text": "Just figured out that building tensorflow (1.2.1) from source with pretty much all configure options set to default solves this problem. My intuition is that the problem was caused by default allocator in tensorflow from pip package, but when you build it from source, it enables jemalloc by default (I've not reviewed this a lot).\nNow it works flawlessly through NVIDIA MPS, but I couldn't get any performance gain for my inference tasks (mostly RNN-based), only slight speed decrease ~10%.", "body": "Just figured out that building tensorflow (1.2.1) **from source** with pretty much all configure options set to default solves this problem. My intuition is that the problem was caused by default allocator in tensorflow from pip package, but when you build it from source, it enables jemalloc by default (I've not reviewed this a lot).\r\n\r\nNow it works flawlessly through NVIDIA MPS, but I couldn't get any performance gain for my inference tasks (mostly RNN-based), only slight speed decrease ~10%."}
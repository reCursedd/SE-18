{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/439987237", "html_url": "https://github.com/tensorflow/tensorflow/issues/9080#issuecomment-439987237", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9080", "id": 439987237, "node_id": "MDEyOklzc3VlQ29tbWVudDQzOTk4NzIzNw==", "user": {"login": "vykozlov", "id": 8523545, "node_id": "MDQ6VXNlcjg1MjM1NDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/8523545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vykozlov", "html_url": "https://github.com/vykozlov", "followers_url": "https://api.github.com/users/vykozlov/followers", "following_url": "https://api.github.com/users/vykozlov/following{/other_user}", "gists_url": "https://api.github.com/users/vykozlov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vykozlov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vykozlov/subscriptions", "organizations_url": "https://api.github.com/users/vykozlov/orgs", "repos_url": "https://api.github.com/users/vykozlov/repos", "events_url": "https://api.github.com/users/vykozlov/events{/privacy}", "received_events_url": "https://api.github.com/users/vykozlov/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-19T18:05:02Z", "updated_at": "2018-11-19T18:05:02Z", "author_association": "NONE", "body_html": "<p>Hi, googling ends up on this page, also pointing it should work on new Volta architectures. In my experience it does NOT. My exp setup:</p>\n<p>1.) AWS instance p3.2xlarge with Nvidia V100<br>\n2.) Ubuntu 16.04 with CUDA 9.2 and Driver 396.37<br>\n3.) nvidia-docker: Docker version 18.09.0, build 4d60db4<br>\n4.) start MPS by $ sudo nvidia-cuda-mps-control -d<br>\n5.) running nbody example from CUDA works fine with MPS: can be run in parallel if same user<br>\n6.) have own Docker image with Tensorflow 1.8.0 (GPU) and CUDA 9.0.176, where Dockerfile starts with<br>\nFROM tensorflow/tensorflow:1.8.0-gpu<br>\n7.) Trying to run two instances of this image with CNN scripts inside via<br>\n$ docker run --ipc=host --runtime=nvidia --rm -ti  dockerimage python ./cnn_tf_script.py<br>\n<strong>fails.</strong> (N.B.: one instance works fine)</p>\n<ul>\n<li>Does it mean that by default Tensorflow (1.8.0) still does not work with MPS and Volta cards?</li>\n<li>And anyway one has to install Tensorflow from sources to make it working with MPS (even when Volta GPU card is used)?</li>\n</ul>", "body_text": "Hi, googling ends up on this page, also pointing it should work on new Volta architectures. In my experience it does NOT. My exp setup:\n1.) AWS instance p3.2xlarge with Nvidia V100\n2.) Ubuntu 16.04 with CUDA 9.2 and Driver 396.37\n3.) nvidia-docker: Docker version 18.09.0, build 4d60db4\n4.) start MPS by $ sudo nvidia-cuda-mps-control -d\n5.) running nbody example from CUDA works fine with MPS: can be run in parallel if same user\n6.) have own Docker image with Tensorflow 1.8.0 (GPU) and CUDA 9.0.176, where Dockerfile starts with\nFROM tensorflow/tensorflow:1.8.0-gpu\n7.) Trying to run two instances of this image with CNN scripts inside via\n$ docker run --ipc=host --runtime=nvidia --rm -ti  dockerimage python ./cnn_tf_script.py\nfails. (N.B.: one instance works fine)\n\nDoes it mean that by default Tensorflow (1.8.0) still does not work with MPS and Volta cards?\nAnd anyway one has to install Tensorflow from sources to make it working with MPS (even when Volta GPU card is used)?", "body": "Hi, googling ends up on this page, also pointing it should work on new Volta architectures. In my experience it does NOT. My exp setup:\r\n\r\n1.) AWS instance p3.2xlarge with Nvidia V100\r\n2.) Ubuntu 16.04 with CUDA 9.2 and Driver 396.37\r\n3.) nvidia-docker: Docker version 18.09.0, build 4d60db4\r\n4.) start MPS by $ sudo nvidia-cuda-mps-control -d\r\n5.) running nbody example from CUDA works fine with MPS: can be run in parallel if same user\r\n6.) have own Docker image with Tensorflow 1.8.0 (GPU) and CUDA 9.0.176, where Dockerfile starts with \r\nFROM tensorflow/tensorflow:1.8.0-gpu\r\n7.) Trying to run two instances of this image with CNN scripts inside via\r\n$ docker run --ipc=host --runtime=nvidia --rm -ti  dockerimage python ./cnn_tf_script.py\r\n**fails.** (N.B.: one instance works fine)\r\n\r\n- Does it mean that by default Tensorflow (1.8.0) still does not work with MPS and Volta cards? \r\n- And anyway one has to install Tensorflow from sources to make it working with MPS (even when Volta GPU card is used)?\r\n"}
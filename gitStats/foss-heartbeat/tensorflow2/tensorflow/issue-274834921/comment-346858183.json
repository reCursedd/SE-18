{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/346858183", "html_url": "https://github.com/tensorflow/tensorflow/pull/14653#issuecomment-346858183", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14653", "id": 346858183, "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njg1ODE4Mw==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-24T15:57:54Z", "updated_at": "2017-11-24T15:57:54Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">The shape of the input sequence is not known in general. The batch size and\nmax time steps can change from batch to batch.</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Wed, Nov 22, 2017, 6:39 AM David Norman ***@***.***&gt; wrote:\n *<a class=\"user-mention\" href=\"https://github.com/DavidNorman\">@DavidNorman</a>* commented on this pull request.\n ------------------------------\n\n In tensorflow/python/ops/rnn.py\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"274834921\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14653\" href=\"https://github.com/tensorflow/tensorflow/pull/14653#discussion_r152582888\">#14653 (comment)</a>&gt;\n :\n\n &gt; @@ -810,7 +810,8 @@ def _time_step(time, output_ta_t, state):\n\n    # Unpack final output if not using output tuples.\n    if in_graph_mode:\n -    final_outputs = tuple(ta.stack() for ta in output_final_ta)\n +    final_outputs = tuple(\n +        ta.gather(range(time_steps)) for ta in output_final_ta)\n\n Can you explain why it is not? The time steps parameter (graph compile\n time) is both the size of the output tensor array and the loop counter. It\n comes from the shape of the input sequence, which is known.\n\n I'm not suggesting that you take this change, if there is an alternative\n XLA compatible dynamic_rnn in the pipeline. Just curious why it isn't\n static.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"274834921\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14653\" href=\"https://github.com/tensorflow/tensorflow/pull/14653#discussion_r152582888\">#14653 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtimzQwaByBg3r91WuainNYiweub2Lvks5s5DIngaJpZM4Qh57J\">https://github.com/notifications/unsubscribe-auth/ABtimzQwaByBg3r91WuainNYiweub2Lvks5s5DIngaJpZM4Qh57J</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "The shape of the input sequence is not known in general. The batch size and\nmax time steps can change from batch to batch.\n\u2026\nOn Wed, Nov 22, 2017, 6:39 AM David Norman ***@***.***> wrote:\n *@DavidNorman* commented on this pull request.\n ------------------------------\n\n In tensorflow/python/ops/rnn.py\n <#14653 (comment)>\n :\n\n > @@ -810,7 +810,8 @@ def _time_step(time, output_ta_t, state):\n\n    # Unpack final output if not using output tuples.\n    if in_graph_mode:\n -    final_outputs = tuple(ta.stack() for ta in output_final_ta)\n +    final_outputs = tuple(\n +        ta.gather(range(time_steps)) for ta in output_final_ta)\n\n Can you explain why it is not? The time steps parameter (graph compile\n time) is both the size of the output tensor array and the loop counter. It\n comes from the shape of the input sequence, which is known.\n\n I'm not suggesting that you take this change, if there is an alternative\n XLA compatible dynamic_rnn in the pipeline. Just curious why it isn't\n static.\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#14653 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtimzQwaByBg3r91WuainNYiweub2Lvks5s5DIngaJpZM4Qh57J>\n .", "body": "The shape of the input sequence is not known in general. The batch size and\nmax time steps can change from batch to batch.\n\nOn Wed, Nov 22, 2017, 6:39 AM David Norman <notifications@github.com> wrote:\n\n> *@DavidNorman* commented on this pull request.\n> ------------------------------\n>\n> In tensorflow/python/ops/rnn.py\n> <https://github.com/tensorflow/tensorflow/pull/14653#discussion_r152582888>\n> :\n>\n> > @@ -810,7 +810,8 @@ def _time_step(time, output_ta_t, state):\n>\n>    # Unpack final output if not using output tuples.\n>    if in_graph_mode:\n> -    final_outputs = tuple(ta.stack() for ta in output_final_ta)\n> +    final_outputs = tuple(\n> +        ta.gather(range(time_steps)) for ta in output_final_ta)\n>\n> Can you explain why it is not? The time steps parameter (graph compile\n> time) is both the size of the output tensor array and the loop counter. It\n> comes from the shape of the input sequence, which is known.\n>\n> I'm not suggesting that you take this change, if there is an alternative\n> XLA compatible dynamic_rnn in the pipeline. Just curious why it isn't\n> static.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/14653#discussion_r152582888>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtimzQwaByBg3r91WuainNYiweub2Lvks5s5DIngaJpZM4Qh57J>\n> .\n>\n"}
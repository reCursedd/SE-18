{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3029", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3029/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3029/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3029/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3029", "id": 162202669, "node_id": "MDU6SXNzdWUxNjIyMDI2Njk=", "number": 3029, "title": "Linking Error building master from sources on 16.04", "user": {"login": "MadcowD", "id": 719535, "node_id": "MDQ6VXNlcjcxOTUzNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/719535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MadcowD", "html_url": "https://github.com/MadcowD", "followers_url": "https://api.github.com/users/MadcowD/followers", "following_url": "https://api.github.com/users/MadcowD/following{/other_user}", "gists_url": "https://api.github.com/users/MadcowD/gists{/gist_id}", "starred_url": "https://api.github.com/users/MadcowD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MadcowD/subscriptions", "organizations_url": "https://api.github.com/users/MadcowD/orgs", "repos_url": "https://api.github.com/users/MadcowD/repos", "events_url": "https://api.github.com/users/MadcowD/events{/privacy}", "received_events_url": "https://api.github.com/users/MadcowD/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-06-24T18:20:38Z", "updated_at": "2016-09-19T02:33:47Z", "closed_at": "2016-06-24T21:07:46Z", "author_association": "NONE", "body_html": "<p>Hey all I am getting the following error building tensorflow from sources:</p>\n<pre><code>ERROR: /home/william/tensorflow/tensorflow/tools/proto_text/BUILD:31:1: Linking of rule '//tensorflow/tools/proto_text:gen_proto_text_functions' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command \n  (cd /home/william/.cache/bazel/_bazel_william/1c01fb06292961944db1914ac48e6a52/execroot/tensorflow &amp;&amp; \\\n  exec env - \\\n  third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/host/bin/tensorflow/tools/proto_text/gen_proto_text_functions bazel-out/host/bin/tensorflow/tools/proto_text/_objs/gen_proto_text_functions/tensorflow/tools/proto_text/gen_proto_text_functions.o bazel-out/host/bin/tensorflow/tools/proto_text/libgen_proto_text_functions_lib.a bazel-out/host/bin/tensorflow/core/liblib_internal.a bazel-out/host/bin/external/farmhash_archive/libfarmhash.a bazel-out/host/bin/external/jpeg_archive/libjpeg.a bazel-out/host/bin/external/png_archive/libpng.a bazel-out/host/bin/external/highwayhash/libsip_hash.a bazel-out/host/bin/external/re2/libre2.a bazel-out/host/bin/tensorflow/core/libprotos_all_cc.a bazel-out/host/bin/external/protobuf/libprotobuf.a bazel-out/host/bin/external/protobuf/libprotobuf_lite.a bazel-out/host/bin/external/zlib_archive/libzlib.a -ldl -lz -pthread -lpthread -lstdc++ -B/usr/bin/ -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,-S -Wl,--gc-sections): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n/usr/bin/ld: bazel-out/host/bin/tensorflow/core/liblib_internal.a(numbers.o): undefined reference to symbol 'ceil@@GLIBC_2.2.5'\n//lib/x86_64-linux-gnu/libm.so.6: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\n</code></pre>\n<p>This occurs when I run <code>bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer --verbose_failures</code></p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 16.04</p>\n<p>Installed version of CUDA and cuDNN: 8.0, 5</p>\n<pre><code>ls -l /usr/local/cuda-8.0/lib64/libcud*\n-rw-r--r-- 1 root root   560184 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 May 18 17:47 /usr/local/cuda-8.0/lib64/libcudart.so -&gt; libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 May 18 17:47 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.27\n-rw-r--r-- 1 root root   394472 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n</code></pre>\n<p>If installed from sources, provide the commit hash: <code>84225a2b612fe748c9c923f0c1cb8471911c3b77</code></p>\n<h3>Reproduce It</h3>\n<p>Follow the documnentation exactly for building from sources:</p>\n<ol>\n<li>Install Cuda and Cudnn from nvidia</li>\n<li>Install python/build dependencies</li>\n<li>Install bazel from apt-get:</li>\n</ol>\n<ul>\n<li><code>sudo apt-get install openjdk-8-jdk</code></li>\n<li><code>sudo apt-get install pkg-config zip g++ zlib1g-dev unzip</code>\n<ul>\n<li><code>echo \"deb http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list</code></li>\n</ul>\n</li>\n<li><code>curl https://storage.googleapis.com/bazel-apt/doc/apt-key.pub.gpg | sudo apt-key add -</code></li>\n<li><code>sudo apt-get update &amp;&amp; sudo apt-get install bazel</code></li>\n<li>Then run the first install command using bazel as mentioned before.</li>\n</ul>", "body_text": "Hey all I am getting the following error building tensorflow from sources:\nERROR: /home/william/tensorflow/tensorflow/tools/proto_text/BUILD:31:1: Linking of rule '//tensorflow/tools/proto_text:gen_proto_text_functions' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command \n  (cd /home/william/.cache/bazel/_bazel_william/1c01fb06292961944db1914ac48e6a52/execroot/tensorflow && \\\n  exec env - \\\n  third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/host/bin/tensorflow/tools/proto_text/gen_proto_text_functions bazel-out/host/bin/tensorflow/tools/proto_text/_objs/gen_proto_text_functions/tensorflow/tools/proto_text/gen_proto_text_functions.o bazel-out/host/bin/tensorflow/tools/proto_text/libgen_proto_text_functions_lib.a bazel-out/host/bin/tensorflow/core/liblib_internal.a bazel-out/host/bin/external/farmhash_archive/libfarmhash.a bazel-out/host/bin/external/jpeg_archive/libjpeg.a bazel-out/host/bin/external/png_archive/libpng.a bazel-out/host/bin/external/highwayhash/libsip_hash.a bazel-out/host/bin/external/re2/libre2.a bazel-out/host/bin/tensorflow/core/libprotos_all_cc.a bazel-out/host/bin/external/protobuf/libprotobuf.a bazel-out/host/bin/external/protobuf/libprotobuf_lite.a bazel-out/host/bin/external/zlib_archive/libzlib.a -ldl -lz -pthread -lpthread -lstdc++ -B/usr/bin/ -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,-S -Wl,--gc-sections): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n/usr/bin/ld: bazel-out/host/bin/tensorflow/core/liblib_internal.a(numbers.o): undefined reference to symbol 'ceil@@GLIBC_2.2.5'\n//lib/x86_64-linux-gnu/libm.so.6: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\n\nThis occurs when I run bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer --verbose_failures\nEnvironment info\nOperating System: Ubuntu 16.04\nInstalled version of CUDA and cuDNN: 8.0, 5\nls -l /usr/local/cuda-8.0/lib64/libcud*\n-rw-r--r-- 1 root root   560184 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 May 18 17:47 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 May 18 17:47 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rw-r--r-- 1 root root   394472 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n\nIf installed from sources, provide the commit hash: 84225a2b612fe748c9c923f0c1cb8471911c3b77\nReproduce It\nFollow the documnentation exactly for building from sources:\n\nInstall Cuda and Cudnn from nvidia\nInstall python/build dependencies\nInstall bazel from apt-get:\n\n\nsudo apt-get install openjdk-8-jdk\nsudo apt-get install pkg-config zip g++ zlib1g-dev unzip\n\necho \"deb http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list\n\n\ncurl https://storage.googleapis.com/bazel-apt/doc/apt-key.pub.gpg | sudo apt-key add -\nsudo apt-get update && sudo apt-get install bazel\nThen run the first install command using bazel as mentioned before.", "body": "Hey all I am getting the following error building tensorflow from sources:\n\n```\nERROR: /home/william/tensorflow/tensorflow/tools/proto_text/BUILD:31:1: Linking of rule '//tensorflow/tools/proto_text:gen_proto_text_functions' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command \n  (cd /home/william/.cache/bazel/_bazel_william/1c01fb06292961944db1914ac48e6a52/execroot/tensorflow && \\\n  exec env - \\\n  third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/host/bin/tensorflow/tools/proto_text/gen_proto_text_functions bazel-out/host/bin/tensorflow/tools/proto_text/_objs/gen_proto_text_functions/tensorflow/tools/proto_text/gen_proto_text_functions.o bazel-out/host/bin/tensorflow/tools/proto_text/libgen_proto_text_functions_lib.a bazel-out/host/bin/tensorflow/core/liblib_internal.a bazel-out/host/bin/external/farmhash_archive/libfarmhash.a bazel-out/host/bin/external/jpeg_archive/libjpeg.a bazel-out/host/bin/external/png_archive/libpng.a bazel-out/host/bin/external/highwayhash/libsip_hash.a bazel-out/host/bin/external/re2/libre2.a bazel-out/host/bin/tensorflow/core/libprotos_all_cc.a bazel-out/host/bin/external/protobuf/libprotobuf.a bazel-out/host/bin/external/protobuf/libprotobuf_lite.a bazel-out/host/bin/external/zlib_archive/libzlib.a -ldl -lz -pthread -lpthread -lstdc++ -B/usr/bin/ -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,-S -Wl,--gc-sections): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\n/usr/bin/ld: bazel-out/host/bin/tensorflow/core/liblib_internal.a(numbers.o): undefined reference to symbol 'ceil@@GLIBC_2.2.5'\n//lib/x86_64-linux-gnu/libm.so.6: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\n```\n\nThis occurs when I run `bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer --verbose_failures`\n### Environment info\n\nOperating System: Ubuntu 16.04\n\nInstalled version of CUDA and cuDNN: 8.0, 5\n\n```\nls -l /usr/local/cuda-8.0/lib64/libcud*\n-rw-r--r-- 1 root root   560184 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 May 18 17:47 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 May 18 17:47 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rw-r--r-- 1 root root   394472 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 May 18 17:44 /usr/local/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 78065952 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 Jun 23 18:54 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n```\n\nIf installed from sources, provide the commit hash: `84225a2b612fe748c9c923f0c1cb8471911c3b77`\n### Reproduce It\n\nFollow the documnentation exactly for building from sources:\n1. Install Cuda and Cudnn from nvidia\n2. Install python/build dependencies\n3. Install bazel from apt-get:\n- `sudo apt-get install openjdk-8-jdk`\n- `sudo apt-get install pkg-config zip g++ zlib1g-dev unzip`\n  -  `echo \"deb http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list`\n- `curl https://storage.googleapis.com/bazel-apt/doc/apt-key.pub.gpg | sudo apt-key add -`\n-  `sudo apt-get update && sudo apt-get install bazel`\n- Then run the first install command using bazel as mentioned before.\n"}
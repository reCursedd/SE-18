{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10776", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10776/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10776/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10776/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10776", "id": 236568256, "node_id": "MDU6SXNzdWUyMzY1NjgyNTY=", "number": 10776, "title": "Docker build issues -- libcuda.so.1 cannot be found", "user": {"login": "nmiculinic", "id": 3183610, "node_id": "MDQ6VXNlcjMxODM2MTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/3183610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmiculinic", "html_url": "https://github.com/nmiculinic", "followers_url": "https://api.github.com/users/nmiculinic/followers", "following_url": "https://api.github.com/users/nmiculinic/following{/other_user}", "gists_url": "https://api.github.com/users/nmiculinic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmiculinic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmiculinic/subscriptions", "organizations_url": "https://api.github.com/users/nmiculinic/orgs", "repos_url": "https://api.github.com/users/nmiculinic/repos", "events_url": "https://api.github.com/users/nmiculinic/events{/privacy}", "received_events_url": "https://api.github.com/users/nmiculinic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-06-16T19:07:08Z", "updated_at": "2017-06-16T20:41:21Z", "closed_at": "2017-06-16T20:40:59Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No, I'm using baidu's warp-ctc which has custom code</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: N/A, using docker</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: provided docker image</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.2.0</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>: Provided</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>: See below</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.</p>\n<p>Unable to install warp-ctc with tensorflow in version 1.2, while it works in version 1.0.0</p>\n<p>This is screenshot of dockerfile for version 1.0: <a href=\"http://i.imgur.com/Zl9ikYT.png\" rel=\"nofollow\">http://i.imgur.com/Zl9ikYT.png</a><br>\nFor newer tensorflow versions (e.g. 1.1 and 1.2 have the same issue) problems occur: <a href=\"http://i.imgur.com/UEcCkOm.png\" rel=\"nofollow\">http://i.imgur.com/UEcCkOm.png</a></p>\n<p>That is libcuda.so.1 cannot be found.</p>\n<p>I've opened similar issue on nvidia-docker <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"225161740\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/NVIDIA/nvidia-docker/issues/374\" data-hovercard-type=\"issue\" data-hovercard-url=\"/NVIDIA/nvidia-docker/issues/374/hovercard\" href=\"https://github.com/NVIDIA/nvidia-docker/issues/374\">NVIDIA/nvidia-docker#374</a> since I've used their images and installed tensorflow via pip with same exact issues. Only change is tensorflow verions while everything else remains the same.</p>\n<p>I'm unable to test this outside docker contained due to machine permissions (or lack thereof, no admin and cannot install newer CUDA/cuDNN/etc.)</p>\n<h3>Source code / logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.</p>\n<p>Here is dockerfile used in the reproduction:</p>\n<pre><code>FROM tensorflow/tensorflow:1.2.0-devel-gpu-py3\n \nRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\\n        build-essential \\\n        python3-setuptools \\\n        python3-dev \\\n        python3-pip \\\n        python3-numpy \\\n        python3-scipy \\\n        software-properties-common \\\n        libhdf5-serial-dev \\\n        cmake \\\n        git \\\n        &amp;&amp; \\\n    apt-get clean &amp;&amp; \\\n    rm -rf /var/lib/apt/lists/*\n \nWORKDIR /opt\nENV TENSORFLOW_SRC_PATH=/opt/tensorflow\nENV WARP_CTC_PATH=/opt/warp-ctc/build\nENV CUDA_HOME=/usr/local/cuda\n \nRUN git clone https://github.com/tensorflow/tensorflow.git tensorflow\nRUN git clone https://github.com/nmiculinic/warp-ctc.git warp-ctc\n \nWORKDIR $TENSORFLOW_SRC_PATH\nRUN git checkout tags/v1.2.0\n \nWORKDIR /opt/warp-ctc\nRUN git checkout 4875195a4444991b5c8c6027ffd4bd485e2aac3a\n \nRUN mkdir build\nWORKDIR /opt/warp-ctc/build\nRUN cmake .. &amp;&amp; make\nWORKDIR /opt/warp-ctc/tensorflow_binding\nRUN python3 setup.py install\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No, I'm using baidu's warp-ctc which has custom code\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): N/A, using docker\nTensorFlow installed from (source or binary): provided docker image\nTensorFlow version (use command below): 1.2.0\nBazel version (if compiling from source):\nCUDA/cuDNN version: Provided\nGPU model and memory: N/A\nExact command to reproduce: See below\n\nDescribe the problem\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\nUnable to install warp-ctc with tensorflow in version 1.2, while it works in version 1.0.0\nThis is screenshot of dockerfile for version 1.0: http://i.imgur.com/Zl9ikYT.png\nFor newer tensorflow versions (e.g. 1.1 and 1.2 have the same issue) problems occur: http://i.imgur.com/UEcCkOm.png\nThat is libcuda.so.1 cannot be found.\nI've opened similar issue on nvidia-docker NVIDIA/nvidia-docker#374 since I've used their images and installed tensorflow via pip with same exact issues. Only change is tensorflow verions while everything else remains the same.\nI'm unable to test this outside docker contained due to machine permissions (or lack thereof, no admin and cannot install newer CUDA/cuDNN/etc.)\nSource code / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\nHere is dockerfile used in the reproduction:\nFROM tensorflow/tensorflow:1.2.0-devel-gpu-py3\n \nRUN apt-get update && apt-get install -y --no-install-recommends \\\n        build-essential \\\n        python3-setuptools \\\n        python3-dev \\\n        python3-pip \\\n        python3-numpy \\\n        python3-scipy \\\n        software-properties-common \\\n        libhdf5-serial-dev \\\n        cmake \\\n        git \\\n        && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n \nWORKDIR /opt\nENV TENSORFLOW_SRC_PATH=/opt/tensorflow\nENV WARP_CTC_PATH=/opt/warp-ctc/build\nENV CUDA_HOME=/usr/local/cuda\n \nRUN git clone https://github.com/tensorflow/tensorflow.git tensorflow\nRUN git clone https://github.com/nmiculinic/warp-ctc.git warp-ctc\n \nWORKDIR $TENSORFLOW_SRC_PATH\nRUN git checkout tags/v1.2.0\n \nWORKDIR /opt/warp-ctc\nRUN git checkout 4875195a4444991b5c8c6027ffd4bd485e2aac3a\n \nRUN mkdir build\nWORKDIR /opt/warp-ctc/build\nRUN cmake .. && make\nWORKDIR /opt/warp-ctc/tensorflow_binding\nRUN python3 setup.py install", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No, I'm using baidu's warp-ctc which has custom code\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: N/A, using docker\r\n- **TensorFlow installed from (source or binary)**: provided docker image\r\n- **TensorFlow version (use command below)**: 1.2.0\r\n- **Bazel version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: Provided\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: See below\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nUnable to install warp-ctc with tensorflow in version 1.2, while it works in version 1.0.0\r\n\r\nThis is screenshot of dockerfile for version 1.0: http://i.imgur.com/Zl9ikYT.png\r\nFor newer tensorflow versions (e.g. 1.1 and 1.2 have the same issue) problems occur: http://i.imgur.com/UEcCkOm.png\r\n\r\nThat is libcuda.so.1 cannot be found. \r\n\r\nI've opened similar issue on nvidia-docker https://github.com/NVIDIA/nvidia-docker/issues/374 since I've used their images and installed tensorflow via pip with same exact issues. Only change is tensorflow verions while everything else remains the same.\r\n\r\nI'm unable to test this outside docker contained due to machine permissions (or lack thereof, no admin and cannot install newer CUDA/cuDNN/etc.)\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nHere is dockerfile used in the reproduction:\r\n```\r\nFROM tensorflow/tensorflow:1.2.0-devel-gpu-py3\r\n \r\nRUN apt-get update && apt-get install -y --no-install-recommends \\\r\n        build-essential \\\r\n        python3-setuptools \\\r\n        python3-dev \\\r\n        python3-pip \\\r\n        python3-numpy \\\r\n        python3-scipy \\\r\n        software-properties-common \\\r\n        libhdf5-serial-dev \\\r\n        cmake \\\r\n        git \\\r\n        && \\\r\n    apt-get clean && \\\r\n    rm -rf /var/lib/apt/lists/*\r\n \r\nWORKDIR /opt\r\nENV TENSORFLOW_SRC_PATH=/opt/tensorflow\r\nENV WARP_CTC_PATH=/opt/warp-ctc/build\r\nENV CUDA_HOME=/usr/local/cuda\r\n \r\nRUN git clone https://github.com/tensorflow/tensorflow.git tensorflow\r\nRUN git clone https://github.com/nmiculinic/warp-ctc.git warp-ctc\r\n \r\nWORKDIR $TENSORFLOW_SRC_PATH\r\nRUN git checkout tags/v1.2.0\r\n \r\nWORKDIR /opt/warp-ctc\r\nRUN git checkout 4875195a4444991b5c8c6027ffd4bd485e2aac3a\r\n \r\nRUN mkdir build\r\nWORKDIR /opt/warp-ctc/build\r\nRUN cmake .. && make\r\nWORKDIR /opt/warp-ctc/tensorflow_binding\r\nRUN python3 setup.py install\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7935", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7935/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7935/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7935/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7935", "id": 210664202, "node_id": "MDU6SXNzdWUyMTA2NjQyMDI=", "number": 7935, "title": "RuntimeError: No C++ shape function registered for standard op: NearestNeighbors", "user": {"login": "mahatosourav91", "id": 25343161, "node_id": "MDQ6VXNlcjI1MzQzMTYx", "avatar_url": "https://avatars0.githubusercontent.com/u/25343161?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mahatosourav91", "html_url": "https://github.com/mahatosourav91", "followers_url": "https://api.github.com/users/mahatosourav91/followers", "following_url": "https://api.github.com/users/mahatosourav91/following{/other_user}", "gists_url": "https://api.github.com/users/mahatosourav91/gists{/gist_id}", "starred_url": "https://api.github.com/users/mahatosourav91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mahatosourav91/subscriptions", "organizations_url": "https://api.github.com/users/mahatosourav91/orgs", "repos_url": "https://api.github.com/users/mahatosourav91/repos", "events_url": "https://api.github.com/users/mahatosourav91/events{/privacy}", "received_events_url": "https://api.github.com/users/mahatosourav91/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2017-02-28T01:57:00Z", "updated_at": "2017-05-02T17:11:58Z", "closed_at": "2017-03-08T01:12:00Z", "author_association": "NONE", "body_html": "<p>For bugs or installation issues, please provide the following information.<br>\nThe more information you provide, the more easily we will be able to offer<br>\nhelp and advice.</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>Github issue :- <a href=\"https://github.com/tensorflow/tensorflow/issues/7524\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7524/hovercard\">7524</a><br>\nStackoverflow question:- <a href=\"http://stackoverflow.com/questions/42250340/runtimeerror-no-c-shape-function-registered-for-standard-op-nearestneighbors\" rel=\"nofollow\">here</a></p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 16.04 / Windows</p>\n<p>Installed version of CUDA and cuDNN: NO</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>A link to the pip package you installed:</li>\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>. 1.0</li>\n</ol>\n<p>If installed from source, provide NO</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<pre><code>from tensorflow.contrib.learn.python.learn.estimators import kmeans as kmeans_lib\nfrom tensorflow.contrib.factorization.python.ops import clustering_ops\nimport random\nimport numpy as np\nimport tensorflow as tf\n\n\ndef input_fn(x):\n\"\"\"Returns an input_fn\"\"\"\ndef _fn():\n       return tf.constant(x), None\nreturn _fn\n\nx = np.array([[random.random() for i in range(198)] for j in range(2384)], dtype=np.float32)\nkm = kmeans_lib.KMeansClustering(num_clusters=200, initial_clusters=clustering_ops.KMEANS_PLUS_PLUS_INIT)\nkm.fit(input_fn=input_fn(x), max_steps=300)\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Hi, I found following 2 lines missing in gen_clustering_ops.py. I believe they should there in the file. If not then please raise a bug.  I couldn't find the correct place where the change is to be made<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/25343161/23388256/21b477fe-fd87-11e6-856c-c07dc3de4fa8.png\"><img src=\"https://cloud.githubusercontent.com/assets/25343161/23388256/21b477fe-fd87-11e6-856c-c07dc3de4fa8.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).</p>\n<pre><code>File \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1568, in call_with_requiring\nreturn getattr(x, f)\nFile \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 610, in call_cpp_shape_fn\ndebug_python_shape_fn, require_shape_fn)\nFile \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 680, in _call_cpp_shape_fn_impl\n\"No C++ shape function registered for standard op: %s\" % op.type)\nRuntimeError: No C++ shape function registered for standard op: NearestNeighbors\n</code></pre>", "body_text": "For bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nGithub issue :- 7524\nStackoverflow question:- here\nEnvironment info\nOperating System: Ubuntu 16.04 / Windows\nInstalled version of CUDA and cuDNN: NO\nIf installed from binary pip package, provide:\n\nA link to the pip package you installed:\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\". 1.0\n\nIf installed from source, provide NO\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nfrom tensorflow.contrib.learn.python.learn.estimators import kmeans as kmeans_lib\nfrom tensorflow.contrib.factorization.python.ops import clustering_ops\nimport random\nimport numpy as np\nimport tensorflow as tf\n\n\ndef input_fn(x):\n\"\"\"Returns an input_fn\"\"\"\ndef _fn():\n       return tf.constant(x), None\nreturn _fn\n\nx = np.array([[random.random() for i in range(198)] for j in range(2384)], dtype=np.float32)\nkm = kmeans_lib.KMeansClustering(num_clusters=200, initial_clusters=clustering_ops.KMEANS_PLUS_PLUS_INIT)\nkm.fit(input_fn=input_fn(x), max_steps=300)\n\nWhat other attempted solutions have you tried?\nHi, I found following 2 lines missing in gen_clustering_ops.py. I believe they should there in the file. If not then please raise a bug.  I couldn't find the correct place where the change is to be made\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).\nFile \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1568, in call_with_requiring\nreturn getattr(x, f)\nFile \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 610, in call_cpp_shape_fn\ndebug_python_shape_fn, require_shape_fn)\nFile \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 680, in _call_cpp_shape_fn_impl\n\"No C++ shape function registered for standard op: %s\" % op.type)\nRuntimeError: No C++ shape function registered for standard op: NearestNeighbors", "body": "For bugs or installation issues, please provide the following information.\r\nThe more information you provide, the more easily we will be able to offer\r\nhelp and advice.\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nGithub issue :- [7524](https://github.com/tensorflow/tensorflow/issues/7524)\r\nStackoverflow question:- [here](http://stackoverflow.com/questions/42250340/runtimeerror-no-c-shape-function-registered-for-standard-op-nearestneighbors)\r\n\r\n### Environment info\r\nOperating System: Ubuntu 16.04 / Windows\r\n\r\nInstalled version of CUDA and cuDNN: NO\r\n\r\nIf installed from binary pip package, provide:\r\n\r\n1. A link to the pip package you installed:\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`. 1.0\r\n\r\nIf installed from source, provide NO\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n\r\n```\r\nfrom tensorflow.contrib.learn.python.learn.estimators import kmeans as kmeans_lib\r\nfrom tensorflow.contrib.factorization.python.ops import clustering_ops\r\nimport random\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\n\r\ndef input_fn(x):\r\n\"\"\"Returns an input_fn\"\"\"\r\ndef _fn():\r\n       return tf.constant(x), None\r\nreturn _fn\r\n\r\nx = np.array([[random.random() for i in range(198)] for j in range(2384)], dtype=np.float32)\r\nkm = kmeans_lib.KMeansClustering(num_clusters=200, initial_clusters=clustering_ops.KMEANS_PLUS_PLUS_INIT)\r\nkm.fit(input_fn=input_fn(x), max_steps=300)\r\n```\r\n\r\n### What other attempted solutions have you tried?\r\nHi, I found following 2 lines missing in gen_clustering_ops.py. I believe they should there in the file. If not then please raise a bug.  I couldn't find the correct place where the change is to be made\r\n![image](https://cloud.githubusercontent.com/assets/25343161/23388256/21b477fe-fd87-11e6-856c-c07dc3de4fa8.png)\r\n\r\n\r\n### Logs or other output that would be helpful\r\n(If logs are large, please upload as attachment or provide link).\r\n\r\n```\r\nFile \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1568, in call_with_requiring\r\nreturn getattr(x, f)\r\nFile \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 610, in call_cpp_shape_fn\r\ndebug_python_shape_fn, require_shape_fn)\r\nFile \"C:\\Users#####\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 680, in _call_cpp_shape_fn_impl\r\n\"No C++ shape function registered for standard op: %s\" % op.type)\r\nRuntimeError: No C++ shape function registered for standard op: NearestNeighbors\r\n```"}
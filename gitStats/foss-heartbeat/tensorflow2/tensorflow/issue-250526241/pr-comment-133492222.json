{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/133492222", "pull_request_review_id": 56678427, "id": 133492222, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzQ5MjIyMg==", "diff_hunk": "@@ -526,20 +514,7 @@ void Master::ListDevices(const ListDevicesRequest* req,\n                          ListDevicesResponse* resp, MyClosure done) {\n   SchedClosure([this, req, resp, done]() {\n     if (!req->session_handle().empty()) {\n-      MasterSession* session = nullptr;\n-      {\n-        mutex_lock l(mu_);\n-        session = gtl::FindPtrOrNull(sessions_, req->session_handle());\n-        if (session != nullptr) {\n-          session->Ref();\n-        }\n-      }\n-      if (session == nullptr) {\n-        done(errors::InvalidArgument(\n-            \"Session \", req->session_handle(),\n-            \" is not found. Possibly, this master has restarted.\"));", "path": "tensorflow/core/distributed_runtime/master.cc", "position": null, "original_position": 93, "commit_id": "e9c8066023e1e27f1aa4c9c0f7834f35d397634e", "original_commit_id": "388398f02bf5356ee81f89375fd8cb16c0163004", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "body": "This change would remove the informative \"Possibly, this master has restarted.\" from the error message. It might be better to have `FindMasterSession()` return `nullptr` in the event that the session isn't found, and allow the caller to send the appropriate error response.", "created_at": "2017-08-16T15:56:55Z", "updated_at": "2017-08-19T07:00:49Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12317#discussion_r133492222", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12317", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/133492222"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12317#discussion_r133492222"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12317"}}, "body_html": "<p>This change would remove the informative \"Possibly, this master has restarted.\" from the error message. It might be better to have <code>FindMasterSession()</code> return <code>nullptr</code> in the event that the session isn't found, and allow the caller to send the appropriate error response.</p>", "body_text": "This change would remove the informative \"Possibly, this master has restarted.\" from the error message. It might be better to have FindMasterSession() return nullptr in the event that the session isn't found, and allow the caller to send the appropriate error response."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/366692627", "html_url": "https://github.com/tensorflow/tensorflow/issues/17127#issuecomment-366692627", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17127", "id": 366692627, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjY5MjYyNw==", "user": {"login": "rays2pix", "id": 8069175, "node_id": "MDQ6VXNlcjgwNjkxNzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/8069175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rays2pix", "html_url": "https://github.com/rays2pix", "followers_url": "https://api.github.com/users/rays2pix/followers", "following_url": "https://api.github.com/users/rays2pix/following{/other_user}", "gists_url": "https://api.github.com/users/rays2pix/gists{/gist_id}", "starred_url": "https://api.github.com/users/rays2pix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rays2pix/subscriptions", "organizations_url": "https://api.github.com/users/rays2pix/orgs", "repos_url": "https://api.github.com/users/rays2pix/repos", "events_url": "https://api.github.com/users/rays2pix/events{/privacy}", "received_events_url": "https://api.github.com/users/rays2pix/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-19T13:26:47Z", "updated_at": "2018-02-19T13:26:47Z", "author_association": "NONE", "body_html": "<p>Adding the stack trace,</p>\n<blockquote>\n<p>Caused by op 'while/TensorArrayWrite_1/TensorArrayWriteV3', defined at:<br>\nFile \"nms.py\", line 175, in <br>\ntest_pynms()<br>\nFile \"nms.py\", line 171, in test_pynms<br>\npicked_tf = tf_soft_nms(boxes_tf,scores_tf,nms_t_tf,dt_tf)<br>\nFile \"nms.py\", line 107, in tf_soft_nms<br>\npicked = tf.while_loop(cond,nms_iter,loop_vars,back_prop=False,parallel_iterations=1)<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2816, in while_loop<br>\nresult = loop_context.BuildLoop(cond, body, loop_vars, shape_invariants)<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2640, in BuildLoop<br>\npred, body, original_loop_vars, loop_vars, shape_invariants)<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2590, in _BuildLoop<br>\nbody_result = body(*packed_vars_for_body)<br>\nFile \"nms.py\", line 82, in nms_iter<br>\nscores_ta = scores_ta.write(pick,tf.constant(0.2))<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/util/tf_should_use.py\", line 107, in wrapped<br>\nreturn _add_should_use_warning(fn(*args, **kwargs))<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 310, in write<br>\nname=name)<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 5038, in _tensor_array_write_v3<br>\nflow_in=flow_in, name=name)<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper<br>\nop_def=op_def)<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 2956, in create_op<br>\nop_def=op_def)<br>\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1470, in <strong>init</strong><br>\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access</p>\n<p>InvalidArgumentError (see above for traceback): TensorArray TensorArray_1_1: Could not write to TensorArray index 0 because it has already been read.<br>\n[[Node: while/TensorArrayWrite_1/TensorArrayWriteV3 = TensorArrayWriteV3[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](while/TensorArrayStack/TensorArraySizeV3/Enter, while/strided_slice_1, while/Const_1, while/Switch_1:1)]]</p>\n</blockquote>", "body_text": "Adding the stack trace,\n\nCaused by op 'while/TensorArrayWrite_1/TensorArrayWriteV3', defined at:\nFile \"nms.py\", line 175, in \ntest_pynms()\nFile \"nms.py\", line 171, in test_pynms\npicked_tf = tf_soft_nms(boxes_tf,scores_tf,nms_t_tf,dt_tf)\nFile \"nms.py\", line 107, in tf_soft_nms\npicked = tf.while_loop(cond,nms_iter,loop_vars,back_prop=False,parallel_iterations=1)\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2816, in while_loop\nresult = loop_context.BuildLoop(cond, body, loop_vars, shape_invariants)\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2640, in BuildLoop\npred, body, original_loop_vars, loop_vars, shape_invariants)\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2590, in _BuildLoop\nbody_result = body(*packed_vars_for_body)\nFile \"nms.py\", line 82, in nms_iter\nscores_ta = scores_ta.write(pick,tf.constant(0.2))\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/util/tf_should_use.py\", line 107, in wrapped\nreturn _add_should_use_warning(fn(*args, **kwargs))\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 310, in write\nname=name)\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 5038, in _tensor_array_write_v3\nflow_in=flow_in, name=name)\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\nop_def=op_def)\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 2956, in create_op\nop_def=op_def)\nFile \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1470, in init\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\nInvalidArgumentError (see above for traceback): TensorArray TensorArray_1_1: Could not write to TensorArray index 0 because it has already been read.\n[[Node: while/TensorArrayWrite_1/TensorArrayWriteV3 = TensorArrayWriteV3[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](while/TensorArrayStack/TensorArraySizeV3/Enter, while/strided_slice_1, while/Const_1, while/Switch_1:1)]]", "body": "Adding the stack trace,\r\n\r\n> Caused by op 'while/TensorArrayWrite_1/TensorArrayWriteV3', defined at:\r\n>   File \"nms.py\", line 175, in <module>\r\n>     test_pynms()\r\n>   File \"nms.py\", line 171, in test_pynms\r\n>     picked_tf = tf_soft_nms(boxes_tf,scores_tf,nms_t_tf,dt_tf)\r\n>   File \"nms.py\", line 107, in tf_soft_nms\r\n>     picked = tf.while_loop(cond,nms_iter,loop_vars,back_prop=False,parallel_iterations=1)\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2816, in while_loop\r\n>     result = loop_context.BuildLoop(cond, body, loop_vars, shape_invariants)\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2640, in BuildLoop\r\n>     pred, body, original_loop_vars, loop_vars, shape_invariants)\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2590, in _BuildLoop\r\n>     body_result = body(*packed_vars_for_body)\r\n>   File \"nms.py\", line 82, in nms_iter\r\n>     scores_ta = scores_ta.write(pick,tf.constant(0.2))\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/util/tf_should_use.py\", line 107, in wrapped\r\n>     return _add_should_use_warning(fn(*args, **kwargs))\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 310, in write\r\n>     name=name)\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 5038, in _tensor_array_write_v3\r\n>     flow_in=flow_in, name=name)\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n>     op_def=op_def)\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 2956, in create_op\r\n>     op_def=op_def)\r\n>   File \"/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1470, in __init__\r\n>     self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n> \r\n> InvalidArgumentError (see above for traceback): TensorArray TensorArray_1_1: Could not write to TensorArray index 0 because it has already been read.\r\n> \t [[Node: while/TensorArrayWrite_1/TensorArrayWriteV3 = TensorArrayWriteV3[T=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](while/TensorArrayStack/TensorArraySizeV3/Enter, while/strided_slice_1, while/Const_1, while/Switch_1:1)]]\r\n> "}
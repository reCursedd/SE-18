{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/164823612", "pull_request_review_id": 92655094, "id": 164823612, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDgyMzYxMg==", "diff_hunk": "@@ -16,30 +16,74 @@ limitations under the License.\n #ifndef TENSORFLOW_CONTRIB_LITE_EXAMPLES_LABEL_IMAGE_BITMAP_HELPERS_IMPL_H\n #define TENSORFLOW_CONTRIB_LITE_EXAMPLES_LABEL_IMAGE_BITMAP_HELPERS_IMPL_H\n \n+#include \"tensorflow/contrib/lite/builtin_op_data.h\"\n+#include \"tensorflow/contrib/lite/interpreter.h\"\n+#include \"tensorflow/contrib/lite/kernels/register.h\"\n+#include \"tensorflow/contrib/lite/string_util.h\"\n+#include \"tensorflow/contrib/lite/version.h\"\n+\n #include \"tensorflow/contrib/lite/examples/label_image/label_image.h\"\n \n namespace tflite {\n namespace label_image {\n \n template <class T>\n-void downsize(T* out, uint8_t* in, int image_height, int image_width,\n-              int image_channels, int wanted_height, int wanted_width,\n-              int wanted_channels, Settings* s) {\n-  for (int y = 0; y < wanted_height; ++y) {\n-    const int in_y = (y * image_height) / wanted_height;\n-    uint8_t* in_row = in + (in_y * image_width * image_channels);\n-    T* out_row = out + (y * wanted_width * wanted_channels);\n-    for (int x = 0; x < wanted_width; ++x) {\n-      const int in_x = (x * image_width) / wanted_width;\n-      uint8_t* in_pixel = in_row + (in_x * image_channels);\n-      T* out_pixel = out_row + (x * wanted_channels);\n-      for (int c = 0; c < wanted_channels; ++c) {\n-        if (s->input_floating)\n-          out_pixel[c] = (in_pixel[c] - s->input_mean) / s->input_std;\n-        else\n-          out_pixel[c] = in_pixel[c];\n-      }\n-    }\n+void resize(T* out, uint8_t* in, int image_height, int image_width,\n+            int image_channels, int wanted_height, int wanted_width,\n+            int wanted_channels, Settings* s) {\n+\n+  int number_of_pixels = image_height * image_width * image_channels;\n+  std::unique_ptr<Interpreter> interpreter(new Interpreter);", "path": "tensorflow/contrib/lite/examples/label_image/bitmap_helpers_impl.h", "position": 39, "original_position": 39, "commit_id": "00c4febdac23cade71d6fdcf10c9ccb982e2a582", "original_commit_id": "3cf36b440e7866895e5fc20f2c15ac56f0d96cbc", "user": {"login": "andrehentz", "id": 25754898, "node_id": "MDQ6VXNlcjI1NzU0ODk4", "avatar_url": "https://avatars3.githubusercontent.com/u/25754898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrehentz", "html_url": "https://github.com/andrehentz", "followers_url": "https://api.github.com/users/andrehentz/followers", "following_url": "https://api.github.com/users/andrehentz/following{/other_user}", "gists_url": "https://api.github.com/users/andrehentz/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrehentz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrehentz/subscriptions", "organizations_url": "https://api.github.com/users/andrehentz/orgs", "repos_url": "https://api.github.com/users/andrehentz/repos", "events_url": "https://api.github.com/users/andrehentz/events{/privacy}", "received_events_url": "https://api.github.com/users/andrehentz/received_events", "type": "User", "site_admin": false}, "body": "This is a clever idea. I wish we had a more general way to manipulate the original graph and add the extra node directly. That would avoid the need to instantiate a separate interpreter just to resize the image. Anyway, no action required. This is just food for thought.", "created_at": "2018-01-30T17:44:56Z", "updated_at": "2018-01-31T05:29:55Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/16446#discussion_r164823612", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16446", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/164823612"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/16446#discussion_r164823612"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16446"}}, "body_html": "<p>This is a clever idea. I wish we had a more general way to manipulate the original graph and add the extra node directly. That would avoid the need to instantiate a separate interpreter just to resize the image. Anyway, no action required. This is just food for thought.</p>", "body_text": "This is a clever idea. I wish we had a more general way to manipulate the original graph and add the extra node directly. That would avoid the need to instantiate a separate interpreter just to resize the image. Anyway, no action required. This is just food for thought."}
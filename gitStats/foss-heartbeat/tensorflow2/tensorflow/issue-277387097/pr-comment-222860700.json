{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/222860700", "pull_request_review_id": 161851674, "id": 222860700, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjg2MDcwMA==", "diff_hunk": "@@ -203,14 +203,25 @@ class SquaredDifferenceTest(test_util.TensorFlowTestCase):\n \n   @test_util.run_in_graph_and_eager_modes()\n   def testSquaredDifference(self):\n-    for dtype in [np.int32, np.float16]:\n+    for dtype in [np.float16, np.float32, np.float64,\n+                  np.int32, np.int64]:\n       x = np.array([[1, 2, 3], [4, 5, 6]], dtype=dtype)\n       y = np.array([-3, -2, -1], dtype=dtype)\n       z = (x - y) * (x - y)\n       with test_util.device(use_gpu=True):\n         z_tf = self.evaluate(math_ops.squared_difference(x, y))\n         self.assertAllClose(z, z_tf)\n \n+  @test_util.run_in_graph_and_eager_modes()\n+  def testComplexSquaredDifference(self):\n+    for dtype in [np.complex64, np.complex128]:\n+      x = np.array([[1+3j, 2+2j, 3+1j], [4-1j, 5-2j, 6-3j]], dtype=dtype)\n+      y = np.array([-3+1j, -2+2j, -1+3j], dtype=dtype)\n+      z = (x - y) * (x - y)", "path": "tensorflow/python/ops/math_ops_test.py", "position": null, "original_position": 19, "commit_id": "82642d91dbe6fbba87e6a582e396ca91df1f6440", "original_commit_id": "ab5cdb187d96e3a865724c3d41671dd253288456", "user": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "body": "normally when we talk about \"squared difference\" we are referring to the L2 metric in a vector space. Therefore, this function should compute conj(x-y)*(x-y). In other words, you need to modify the implementation as well by adding a conjugation to the first input for complex types.", "created_at": "2018-10-04T23:54:46Z", "updated_at": "2018-10-13T20:44:38Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/14939#discussion_r222860700", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14939", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/222860700"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/14939#discussion_r222860700"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14939"}}, "body_html": "<p>normally when we talk about \"squared difference\" we are referring to the L2 metric in a vector space. Therefore, this function should compute conj(x-y)*(x-y). In other words, you need to modify the implementation as well by adding a conjugation to the first input for complex types.</p>", "body_text": "normally when we talk about \"squared difference\" we are referring to the L2 metric in a vector space. Therefore, this function should compute conj(x-y)*(x-y). In other words, you need to modify the implementation as well by adding a conjugation to the first input for complex types."}
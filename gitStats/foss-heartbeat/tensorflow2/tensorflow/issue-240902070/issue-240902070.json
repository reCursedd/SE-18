{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11319", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11319/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11319/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11319/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/11319", "id": 240902070, "node_id": "MDExOlB1bGxSZXF1ZXN0MTI5MTQ0Njg1", "number": 11319, "title": "c: fix a possible segmentfault", "user": {"login": "yorkie", "id": 1935767, "node_id": "MDQ6VXNlcjE5MzU3Njc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1935767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yorkie", "html_url": "https://github.com/yorkie", "followers_url": "https://api.github.com/users/yorkie/followers", "following_url": "https://api.github.com/users/yorkie/following{/other_user}", "gists_url": "https://api.github.com/users/yorkie/gists{/gist_id}", "starred_url": "https://api.github.com/users/yorkie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yorkie/subscriptions", "organizations_url": "https://api.github.com/users/yorkie/orgs", "repos_url": "https://api.github.com/users/yorkie/repos", "events_url": "https://api.github.com/users/yorkie/events{/privacy}", "received_events_url": "https://api.github.com/users/yorkie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "josh11b", "id": 15258583, "node_id": "MDQ6VXNlcjE1MjU4NTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/15258583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josh11b", "html_url": "https://github.com/josh11b", "followers_url": "https://api.github.com/users/josh11b/followers", "following_url": "https://api.github.com/users/josh11b/following{/other_user}", "gists_url": "https://api.github.com/users/josh11b/gists{/gist_id}", "starred_url": "https://api.github.com/users/josh11b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josh11b/subscriptions", "organizations_url": "https://api.github.com/users/josh11b/orgs", "repos_url": "https://api.github.com/users/josh11b/repos", "events_url": "https://api.github.com/users/josh11b/events{/privacy}", "received_events_url": "https://api.github.com/users/josh11b/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "josh11b", "id": 15258583, "node_id": "MDQ6VXNlcjE1MjU4NTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/15258583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josh11b", "html_url": "https://github.com/josh11b", "followers_url": "https://api.github.com/users/josh11b/followers", "following_url": "https://api.github.com/users/josh11b/following{/other_user}", "gists_url": "https://api.github.com/users/josh11b/gists{/gist_id}", "starred_url": "https://api.github.com/users/josh11b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josh11b/subscriptions", "organizations_url": "https://api.github.com/users/josh11b/orgs", "repos_url": "https://api.github.com/users/josh11b/repos", "events_url": "https://api.github.com/users/josh11b/events{/privacy}", "received_events_url": "https://api.github.com/users/josh11b/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2017-07-06T09:47:37Z", "updated_at": "2017-07-07T02:18:34Z", "closed_at": "2017-07-07T01:38:51Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/11319", "html_url": "https://github.com/tensorflow/tensorflow/pull/11319", "diff_url": "https://github.com/tensorflow/tensorflow/pull/11319.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/11319.patch"}, "body_html": "<p>We also need allocation for <code>output_values_</code> when updating <code>output_</code>, or we will get a segment fault on:</p>\n<div class=\"highlight highlight-source-c++\"><pre><span class=\"pl-k\">static</span> <span class=\"pl-k\">void</span> <span class=\"pl-en\">TF_Run_Setup</span>(<span class=\"pl-k\">int</span> noutputs, TF_Tensor** c_outputs,\n                         TF_Status* status) {\n  status-&gt;<span class=\"pl-smi\">status</span> = <span class=\"pl-c1\">Status::OK</span>();\n  <span class=\"pl-k\">for</span> (<span class=\"pl-k\">int</span> i = <span class=\"pl-c1\">0</span>; i &lt; noutputs; ++i) {\n    c_outputs[i] = <span class=\"pl-c1\">nullptr</span>;\n  }\n}</pre></div>", "body_text": "We also need allocation for output_values_ when updating output_, or we will get a segment fault on:\nstatic void TF_Run_Setup(int noutputs, TF_Tensor** c_outputs,\n                         TF_Status* status) {\n  status->status = Status::OK();\n  for (int i = 0; i < noutputs; ++i) {\n    c_outputs[i] = nullptr;\n  }\n}", "body": "We also need allocation for `output_values_` when updating `output_`, or we will get a segment fault on:\r\n\r\n```c++\r\nstatic void TF_Run_Setup(int noutputs, TF_Tensor** c_outputs,\r\n                         TF_Status* status) {\r\n  status->status = Status::OK();\r\n  for (int i = 0; i < noutputs; ++i) {\r\n    c_outputs[i] = nullptr;\r\n  }\r\n}\r\n```\r\n"}
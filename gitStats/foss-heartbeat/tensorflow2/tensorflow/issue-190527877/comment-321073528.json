{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/321073528", "html_url": "https://github.com/tensorflow/tensorflow/issues/5722#issuecomment-321073528", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5722", "id": 321073528, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTA3MzUyOA==", "user": {"login": "agupta74", "id": 21690396, "node_id": "MDQ6VXNlcjIxNjkwMzk2", "avatar_url": "https://avatars2.githubusercontent.com/u/21690396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agupta74", "html_url": "https://github.com/agupta74", "followers_url": "https://api.github.com/users/agupta74/followers", "following_url": "https://api.github.com/users/agupta74/following{/other_user}", "gists_url": "https://api.github.com/users/agupta74/gists{/gist_id}", "starred_url": "https://api.github.com/users/agupta74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agupta74/subscriptions", "organizations_url": "https://api.github.com/users/agupta74/orgs", "repos_url": "https://api.github.com/users/agupta74/repos", "events_url": "https://api.github.com/users/agupta74/events{/privacy}", "received_events_url": "https://api.github.com/users/agupta74/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T20:33:06Z", "updated_at": "2017-08-08T20:33:06Z", "author_association": "NONE", "body_html": "<p>I wrote a simple script with Timeline API in order to understand if StagingQueue is infact overlapping data transfer with GPU processing but for some reason I did not see any overlap in computation and communication in the timelines shown below. Infact the gap between 2 GPU processing tasks increased on adding the StagingQueue. Any ideas on what could explain this behavior?  Is there anything wrong in my usage of StagingQueues? I am attaching a couple of Python scripts in order reproduce the behavior.</p>\n<p><strong>With StagingQueue (using 1 GPU)</strong></p>\n<p>python InferenceTest.py 1 1</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/21690396/29092688-118a996a-7c3c-11e7-9337-d4b8c3aeb9f7.png\"><img src=\"https://user-images.githubusercontent.com/21690396/29092688-118a996a-7c3c-11e7-9337-d4b8c3aeb9f7.png\" alt=\"staging\" style=\"max-width:100%;\"></a></p>\n<p><strong>No StagingQueue (using 1 GPU)</strong><br>\npython InferenceTest.py 1 0</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/21690396/29092782-59724174-7c3c-11e7-91d9-5b997a38a5da.png\"><img src=\"https://user-images.githubusercontent.com/21690396/29092782-59724174-7c3c-11e7-91d9-5b997a38a5da.png\" alt=\"nostaging\" style=\"max-width:100%;\"></a></p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/1209463/Inference.txt\">Inference.txt</a><br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1209462/InferenceTest.txt\">InferenceTest.txt</a></p>", "body_text": "I wrote a simple script with Timeline API in order to understand if StagingQueue is infact overlapping data transfer with GPU processing but for some reason I did not see any overlap in computation and communication in the timelines shown below. Infact the gap between 2 GPU processing tasks increased on adding the StagingQueue. Any ideas on what could explain this behavior?  Is there anything wrong in my usage of StagingQueues? I am attaching a couple of Python scripts in order reproduce the behavior.\nWith StagingQueue (using 1 GPU)\npython InferenceTest.py 1 1\n\nNo StagingQueue (using 1 GPU)\npython InferenceTest.py 1 0\n\nInference.txt\nInferenceTest.txt", "body": "I wrote a simple script with Timeline API in order to understand if StagingQueue is infact overlapping data transfer with GPU processing but for some reason I did not see any overlap in computation and communication in the timelines shown below. Infact the gap between 2 GPU processing tasks increased on adding the StagingQueue. Any ideas on what could explain this behavior?  Is there anything wrong in my usage of StagingQueues? I am attaching a couple of Python scripts in order reproduce the behavior.\r\n\r\n**With StagingQueue (using 1 GPU)**\r\n\r\npython InferenceTest.py 1 1\r\n\r\n![staging](https://user-images.githubusercontent.com/21690396/29092688-118a996a-7c3c-11e7-9337-d4b8c3aeb9f7.png)\r\n\r\n**No StagingQueue (using 1 GPU)**\r\npython InferenceTest.py 1 0\r\n\r\n![nostaging](https://user-images.githubusercontent.com/21690396/29092782-59724174-7c3c-11e7-91d9-5b997a38a5da.png)\r\n\r\n[Inference.txt](https://github.com/tensorflow/tensorflow/files/1209463/Inference.txt)\r\n[InferenceTest.txt](https://github.com/tensorflow/tensorflow/files/1209462/InferenceTest.txt)\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/232421689", "pull_request_review_id": 173625040, "id": 232421689, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjQyMTY4OQ==", "diff_hunk": "@@ -195,6 +222,224 @@ void DoNonMaxSuppressionOp(\n   std::copy_n(selected.begin(), selected.size(), output_indices_data.data());\n }\n \n+void BatchedNonMaxSuppressionOp(OpKernelContext* context,\n+                                const Tensor& inp_boxes,\n+                                const Tensor& inp_scores,\n+                                int num_boxes,\n+                                const int max_size_per_class,\n+                                const int total_size_per_batch,\n+                                const float score_threshold,\n+                                const float iou_threshold,\n+                                bool use_static_shapes = false) {\n+\n+  int q = inp_boxes.dim_size(2);\n+  int num_classes = inp_scores.dim_size(2);\n+  //unpack along batch dimension\n+  const int num_batches = inp_boxes.dim_size(0);\n+\n+  // Default clip window of [0, 0, 1, 1] if none specified\n+  std::vector <float> clip_window{0, 0, 1, 1};\n+  \n+  // [num_batches, per_batch_size, 4]\n+  std::vector <std::vector<float>> nmsed_boxes(num_batches);\n+  // [num_batches, per_batch_size]\n+  std::vector <std::vector<float>> nmsed_scores(num_batches);", "path": "tensorflow/core/kernels/non_max_suppression_op.cc", "position": null, "original_position": 59, "commit_id": "e433fd8adab6a6646f9c6c738ce70682a15193bb", "original_commit_id": "ff885ef229da8e0e19792b9ce6a9c506d3738157", "user": {"login": "azaks2", "id": 40365382, "node_id": "MDQ6VXNlcjQwMzY1Mzgy", "avatar_url": "https://avatars2.githubusercontent.com/u/40365382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/azaks2", "html_url": "https://github.com/azaks2", "followers_url": "https://api.github.com/users/azaks2/followers", "following_url": "https://api.github.com/users/azaks2/following{/other_user}", "gists_url": "https://api.github.com/users/azaks2/gists{/gist_id}", "starred_url": "https://api.github.com/users/azaks2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/azaks2/subscriptions", "organizations_url": "https://api.github.com/users/azaks2/orgs", "repos_url": "https://api.github.com/users/azaks2/repos", "events_url": "https://api.github.com/users/azaks2/events{/privacy}", "received_events_url": "https://api.github.com/users/azaks2/received_events", "type": "User", "site_admin": false}, "body": "no space after vector", "created_at": "2018-11-09T23:21:59Z", "updated_at": "2018-11-15T21:42:03Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/23567#discussion_r232421689", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23567", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/232421689"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/23567#discussion_r232421689"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23567"}}, "body_html": "<p>no space after vector</p>", "body_text": "no space after vector"}
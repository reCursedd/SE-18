{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13479", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13479/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13479/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13479/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13479", "id": 262626389, "node_id": "MDU6SXNzdWUyNjI2MjYzODk=", "number": 13479, "title": "Allow creating global tf.FIFOQueue in deep frame contexts", "user": {"login": "hnsl", "id": 948471, "node_id": "MDQ6VXNlcjk0ODQ3MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/948471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hnsl", "html_url": "https://github.com/hnsl", "followers_url": "https://api.github.com/users/hnsl/followers", "following_url": "https://api.github.com/users/hnsl/following{/other_user}", "gists_url": "https://api.github.com/users/hnsl/gists{/gist_id}", "starred_url": "https://api.github.com/users/hnsl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hnsl/subscriptions", "organizations_url": "https://api.github.com/users/hnsl/orgs", "repos_url": "https://api.github.com/users/hnsl/repos", "events_url": "https://api.github.com/users/hnsl/events{/privacy}", "received_events_url": "https://api.github.com/users/hnsl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-03T23:51:51Z", "updated_at": "2017-10-04T00:14:55Z", "closed_at": "2017-10-04T00:14:55Z", "author_association": "NONE", "body_html": "<p>Let's say I'm building a graph. It's a pretty deep graph with many nested while loops. Let's also say I have some template/abstraction that allows me to create a tf.FIFOQueue on demand deep in my nested while loops as I encounter things I want to send out of the graph. This template allows me to infer the shape automatically from the tensors as they are encountered rather than to have to write a bunch of painful boilerplate to define all the queues and their corresponding shapes up-front.</p>\n<p>This is currently not possible with TensorFlow, because this gives this error:</p>\n<blockquote>\n<p>tensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'fifo_queue_DequeueMany' has inputs from different frames. The input 'while/fifo_queue' is in frame 'while/while/'. The input 'fifo_queue_DequeueMany/n' is in frame ''.</p>\n</blockquote>\n<p>I want to create a FIFOQueue() in the global \"frame\" so I don't get this error. In addition the documentation never explains what a \"frame\" even is. Having undocumented restrictions that suddenly explode without warning is a sign of leaky abstractions and very frustrating for users.</p>", "body_text": "Let's say I'm building a graph. It's a pretty deep graph with many nested while loops. Let's also say I have some template/abstraction that allows me to create a tf.FIFOQueue on demand deep in my nested while loops as I encounter things I want to send out of the graph. This template allows me to infer the shape automatically from the tensors as they are encountered rather than to have to write a bunch of painful boilerplate to define all the queues and their corresponding shapes up-front.\nThis is currently not possible with TensorFlow, because this gives this error:\n\ntensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'fifo_queue_DequeueMany' has inputs from different frames. The input 'while/fifo_queue' is in frame 'while/while/'. The input 'fifo_queue_DequeueMany/n' is in frame ''.\n\nI want to create a FIFOQueue() in the global \"frame\" so I don't get this error. In addition the documentation never explains what a \"frame\" even is. Having undocumented restrictions that suddenly explode without warning is a sign of leaky abstractions and very frustrating for users.", "body": "Let's say I'm building a graph. It's a pretty deep graph with many nested while loops. Let's also say I have some template/abstraction that allows me to create a tf.FIFOQueue on demand deep in my nested while loops as I encounter things I want to send out of the graph. This template allows me to infer the shape automatically from the tensors as they are encountered rather than to have to write a bunch of painful boilerplate to define all the queues and their corresponding shapes up-front.\r\n\r\nThis is currently not possible with TensorFlow, because this gives this error: \r\n\r\n> tensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'fifo_queue_DequeueMany' has inputs from different frames. The input 'while/fifo_queue' is in frame 'while/while/'. The input 'fifo_queue_DequeueMany/n' is in frame ''.\r\n\r\nI want to create a FIFOQueue() in the global \"frame\" so I don't get this error. In addition the documentation never explains what a \"frame\" even is. Having undocumented restrictions that suddenly explode without warning is a sign of leaky abstractions and very frustrating for users."}
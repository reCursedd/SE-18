{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/348675456", "html_url": "https://github.com/tensorflow/tensorflow/issues/15028#issuecomment-348675456", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15028", "id": 348675456, "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODY3NTQ1Ng==", "user": {"login": "xushenkun", "id": 1085843, "node_id": "MDQ6VXNlcjEwODU4NDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1085843?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xushenkun", "html_url": "https://github.com/xushenkun", "followers_url": "https://api.github.com/users/xushenkun/followers", "following_url": "https://api.github.com/users/xushenkun/following{/other_user}", "gists_url": "https://api.github.com/users/xushenkun/gists{/gist_id}", "starred_url": "https://api.github.com/users/xushenkun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xushenkun/subscriptions", "organizations_url": "https://api.github.com/users/xushenkun/orgs", "repos_url": "https://api.github.com/users/xushenkun/repos", "events_url": "https://api.github.com/users/xushenkun/events{/privacy}", "received_events_url": "https://api.github.com/users/xushenkun/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-02T07:47:23Z", "updated_at": "2017-12-02T07:47:23Z", "author_association": "NONE", "body_html": "<p>According to \"<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/util/ctc/ctc_loss_calculator.cc\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/util/ctc/ctc_loss_calculator.cc</a>\", I think the best alignment and probs may be as below and this is not a waste of resources during calculating ctc loss.</p>\n<p>best_align = argmax(log_alpha, axis=0)<br>\nblank_pos = where(best_align % 2 == 0)<br>\ntarget_pos = where(best_align % 2 != 0)<br>\nbest_align[target_pos] = target[best_align[target_pos] // 2]<br>\nbest_align[blank_pos] = blank_index_<br>\nbest_prob = logit[best_align, range(T)]</p>", "body_text": "According to \"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/util/ctc/ctc_loss_calculator.cc\", I think the best alignment and probs may be as below and this is not a waste of resources during calculating ctc loss.\nbest_align = argmax(log_alpha, axis=0)\nblank_pos = where(best_align % 2 == 0)\ntarget_pos = where(best_align % 2 != 0)\nbest_align[target_pos] = target[best_align[target_pos] // 2]\nbest_align[blank_pos] = blank_index_\nbest_prob = logit[best_align, range(T)]", "body": "According to \"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/util/ctc/ctc_loss_calculator.cc\", I think the best alignment and probs may be as below and this is not a waste of resources during calculating ctc loss.\r\n\r\nbest_align = argmax(log_alpha, axis=0) \r\nblank_pos = where(best_align % 2 == 0)\r\ntarget_pos = where(best_align % 2 != 0)\r\nbest_align[target_pos] = target[best_align[target_pos] // 2]\r\nbest_align[blank_pos] = blank_index_\r\nbest_prob = logit[best_align, range(T)]"}
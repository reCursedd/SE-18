{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10399", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10399/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10399/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10399/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10399", "id": 233209852, "node_id": "MDU6SXNzdWUyMzMyMDk4NTI=", "number": 10399, "title": "export step of Experiment fails in python 3.5 (likely due to string-type mismatch)", "user": {"login": "yufengg", "id": 4944507, "node_id": "MDQ6VXNlcjQ5NDQ1MDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4944507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yufengg", "html_url": "https://github.com/yufengg", "followers_url": "https://api.github.com/users/yufengg/followers", "following_url": "https://api.github.com/users/yufengg/following{/other_user}", "gists_url": "https://api.github.com/users/yufengg/gists{/gist_id}", "starred_url": "https://api.github.com/users/yufengg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yufengg/subscriptions", "organizations_url": "https://api.github.com/users/yufengg/orgs", "repos_url": "https://api.github.com/users/yufengg/repos", "events_url": "https://api.github.com/users/yufengg/events{/privacy}", "received_events_url": "https://api.github.com/users/yufengg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-06-02T15:00:07Z", "updated_at": "2017-11-09T20:27:35Z", "closed_at": "2017-11-09T20:27:15Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yep</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Mac OSX</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary 1.1.0</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.1.0</li>\n<li><strong>Bazel version (if compiling from source)</strong>: n/a</li>\n<li><strong>CUDA/cuDNN version</strong>: n/a</li>\n<li><strong>GPU model and memory</strong>: n/a</li>\n<li><strong>Exact command to reproduce</strong>:<br>\ngit clone <a href=\"https://github.com/amygdala/tensorflow-workshop\">https://github.com/amygdala/tensorflow-workshop</a><br>\npython tensorflow-workshop/workshop_sections/wide_n_deep/widendeep/model.py</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>When running Experiment stuff, it works fine in 2.7 but breaks in 3.5. From what I can tell, it's happening in gc.py, which is being called <em>after</em> the model has been exported and everything is done.</p>\n<p>My best guess from looking at similar bugs on SO is that there's a mismatch somewhere between 'byte' strings and python strings, possibly because the base folder path of the export is generated (e.g. /exports/Servo/123456789/saved_model.py), so the somehow the concat isn't happy with this.</p>\n<h3>Source code / logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.</p>\n<p>File \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/utils/gc.py\", line 202, in get_paths<br>\np = parser(Path(os.path.join(base_dir, r), None))<br>\nFile \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/posixpath.py\", line 89, in join<br>\ngenericpath._check_arg_types('join', a, *p)<br>\nFile \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/genericpath.py\", line 145, in _check_arg_types<br>\nraise TypeError(\"Can't mix strings and bytes in path components\") from None<br>\nTypeError: Can't mix strings and bytes in path components</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yep\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OSX\nTensorFlow installed from (source or binary): binary 1.1.0\nTensorFlow version (use command below): 1.1.0\nBazel version (if compiling from source): n/a\nCUDA/cuDNN version: n/a\nGPU model and memory: n/a\nExact command to reproduce:\ngit clone https://github.com/amygdala/tensorflow-workshop\npython tensorflow-workshop/workshop_sections/wide_n_deep/widendeep/model.py\n\nDescribe the problem\nWhen running Experiment stuff, it works fine in 2.7 but breaks in 3.5. From what I can tell, it's happening in gc.py, which is being called after the model has been exported and everything is done.\nMy best guess from looking at similar bugs on SO is that there's a mismatch somewhere between 'byte' strings and python strings, possibly because the base folder path of the export is generated (e.g. /exports/Servo/123456789/saved_model.py), so the somehow the concat isn't happy with this.\nSource code / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\nFile \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/utils/gc.py\", line 202, in get_paths\np = parser(Path(os.path.join(base_dir, r), None))\nFile \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/posixpath.py\", line 89, in join\ngenericpath._check_arg_types('join', a, *p)\nFile \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/genericpath.py\", line 145, in _check_arg_types\nraise TypeError(\"Can't mix strings and bytes in path components\") from None\nTypeError: Can't mix strings and bytes in path components", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yep\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Mac OSX\r\n- **TensorFlow installed from (source or binary)**: binary 1.1.0\r\n- **TensorFlow version (use command below)**: 1.1.0\r\n- **Bazel version (if compiling from source)**: n/a\r\n- **CUDA/cuDNN version**: n/a\r\n- **GPU model and memory**: n/a\r\n- **Exact command to reproduce**:\r\ngit clone https://github.com/amygdala/tensorflow-workshop\r\npython tensorflow-workshop/workshop_sections/wide_n_deep/widendeep/model.py\r\n\r\n\r\n### Describe the problem\r\n\r\nWhen running Experiment stuff, it works fine in 2.7 but breaks in 3.5. From what I can tell, it's happening in gc.py, which is being called _after_ the model has been exported and everything is done. \r\n\r\nMy best guess from looking at similar bugs on SO is that there's a mismatch somewhere between 'byte' strings and python strings, possibly because the base folder path of the export is generated (e.g. /exports/Servo/123456789/saved_model.py), so the somehow the concat isn't happy with this.\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nFile \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/utils/gc.py\", line 202, in get_paths\r\n    p = parser(Path(os.path.join(base_dir, r), None))\r\n  File \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/posixpath.py\", line 89, in join\r\n    genericpath._check_arg_types('join', a, *p)\r\n  File \"/Users/yufengg/.pyenv/versions/anaconda3-4.1.1/lib/python3.5/genericpath.py\", line 145, in _check_arg_types\r\n    raise TypeError(\"Can't mix strings and bytes in path components\") from None\r\nTypeError: Can't mix strings and bytes in path components\r\n"}
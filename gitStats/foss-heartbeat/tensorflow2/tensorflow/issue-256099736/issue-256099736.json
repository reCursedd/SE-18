{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12891", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12891/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12891/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12891/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12891", "id": 256099736, "node_id": "MDU6SXNzdWUyNTYwOTk3MzY=", "number": 12891, "title": "build fail (looser throw specifier in EnvWrapper)", "user": {"login": "fetchinson", "id": 1704054, "node_id": "MDQ6VXNlcjE3MDQwNTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1704054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fetchinson", "html_url": "https://github.com/fetchinson", "followers_url": "https://api.github.com/users/fetchinson/followers", "following_url": "https://api.github.com/users/fetchinson/following{/other_user}", "gists_url": "https://api.github.com/users/fetchinson/gists{/gist_id}", "starred_url": "https://api.github.com/users/fetchinson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fetchinson/subscriptions", "organizations_url": "https://api.github.com/users/fetchinson/orgs", "repos_url": "https://api.github.com/users/fetchinson/repos", "events_url": "https://api.github.com/users/fetchinson/events{/privacy}", "received_events_url": "https://api.github.com/users/fetchinson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-09-07T23:31:06Z", "updated_at": "2017-09-13T19:57:59Z", "closed_at": "2017-09-13T19:57:59Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:</li>\n</ul>\n<p>No.</p>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:</li>\n</ul>\n<p>Linux Fedora 17</p>\n<ul>\n<li><strong>TensorFlow installed from (source or binary)</strong>:</li>\n</ul>\n<p>Trying to build from source.</p>\n<ul>\n<li><strong>TensorFlow version (use command below)</strong>:</li>\n</ul>\n<p>1.3</p>\n<ul>\n<li><strong>Python version</strong>:</li>\n</ul>\n<p>2.7</p>\n<ul>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n</ul>\n<p>0.5.4</p>\n<ul>\n<li><strong>CUDA/cuDNN version</strong>:</li>\n</ul>\n<p>Disabled.</p>\n<ul>\n<li><strong>GPU model and memory</strong>:</li>\n</ul>\n<p>Disabled.</p>\n<ul>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>bazel build</p>\n<h3>Describe the problem</h3>\n<p>I'm trying to compile tensorflow from source, don't modify anything, simply following the instructions on the webpage:</p>\n<p>built bazel 0.5.4 from source</p>\n<p>git clone<br>\ngit checkout origin/1.3<br>\n./configure     # all answers are the defaults</p>\n<p>bazel build --verbose_failures --config=opt //tensorflow/tools/pip_package:build_pip_package</p>\n<p>The above fails with with a looser throw specifier error in core/platform/env.h</p>\n<p>The versions of the various tools involved:</p>\n<p>openjdk 1.8.0<br>\nbazel 0.5.4<br>\npython 2.7<br>\ngcc 4.7.2<br>\nlibstdc++ 4.7.2</p>\n<p>The problem is reproducible on my box.</p>\n<h3>Source code / logs</h3>\n<p>The precise failure from the bazel build is this:</p>\n<pre><code>&gt; \n&gt; \n&gt; ERROR: /home/fetch/tensorflow/tensorflow/core/BUILD:1244:1: C++ compilation of rule '//tensorflow/core:lib_internal' failed (Exit 1): gcc failed: error executing command \n&gt;   (cd /home/fetch/.cache/bazel/_bazel_fetch/7ef242de6c5f89b75c729448096cd3bb/execroot/org_tensorflow &amp;&amp; \\\n&gt;   exec env - \\\n&gt;     LD_LIBRARY_PATH=/usr/lib64:/usr/lib64/openmpi/lib \\\n&gt;     PATH=/opt/obuildfactory/jdk-1.8.0-openjdk-x86_64/bin:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.25.x86_64/bin:/usr/lib64/openmpi/bin:/home/fetch/opt/bin:/home/fetch/bin:/usr/lib64/openmpi/bin:/home/fetch/opt/bin:/home/fetch/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin \\\n&gt;     PWD=/proc/self/cwd \\\n&gt;     PYTHON_BIN_PATH=/bin/python \\\n&gt;     PYTHON_LIB_PATH=/usr/lib/python2.7/site-packages \\\n&gt;     TF_NEED_CUDA=0 \\\n&gt;     TF_NEED_OPENCL=0 \\\n&gt;   /bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -B/bin -B/usr/bin -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections '-march=native' '-std=c++0x' '-march=native' -MD -MF bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.d '-frandom-seed=bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.o' -fPIC -DEIGEN_MPL2_ONLY -DSNAPPY -iquote . -iquote bazel-out/local-opt/genfiles -iquote external/bazel_tools -iquote bazel-out/local-opt/genfiles/external/bazel_tools -iquote external/protobuf -iquote bazel-out/local-opt/genfiles/external/protobuf -iquote external/eigen_archive -iquote bazel-out/local-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/local-opt/genfiles/external/local_config_sycl -iquote external/gif_archive -iquote bazel-out/local-opt/genfiles/external/gif_archive -iquote external/jpeg -iquote bazel-out/local-opt/genfiles/external/jpeg -iquote external/com_googlesource_code_re2 -iquote bazel-out/local-opt/genfiles/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/local-opt/genfiles/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/local-opt/genfiles/external/fft2d -iquote external/highwayhash -iquote bazel-out/local-opt/genfiles/external/highwayhash -iquote external/png_archive -iquote bazel-out/local-opt/genfiles/external/png_archive -iquote external/zlib_archive -iquote bazel-out/local-opt/genfiles/external/zlib_archive -iquote external/snappy -iquote bazel-out/local-opt/genfiles/external/snappy -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/protobuf/src -isystem bazel-out/local-opt/genfiles/external/protobuf/src -isystem external/eigen_archive -isystem bazel-out/local-opt/genfiles/external/eigen_archive -isystem external/gif_archive/lib -isystem bazel-out/local-opt/genfiles/external/gif_archive/lib -isystem external/farmhash_archive/src -isystem bazel-out/local-opt/genfiles/external/farmhash_archive/src -isystem external/png_archive -isystem bazel-out/local-opt/genfiles/external/png_archive -isystem external/zlib_archive -isystem bazel-out/local-opt/genfiles/external/zlib_archive -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare -fno-exceptions -msse3 -pthread -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c tensorflow/core/platform/default/tracing.cc -o bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.o).\n&gt; In file included from ./tensorflow/core/lib/core/threadpool.h:21:0,\n&gt;                  from ./tensorflow/core/platform/default/tracing_impl.h:25,\n&gt;                  from ./tensorflow/core/platform/tracing.h:266,\n&gt;                  from tensorflow/core/platform/default/tracing.cc:16:\n&gt; ./tensorflow/core/platform/env.h:295:11: error: looser throw specifier for 'virtual tensorflow::EnvWrapper::~EnvWrapper()'\n&gt; ./tensorflow/core/platform/env.h:50:11: error:   overriding 'virtual tensorflow::Env::~Env() noexcept (true)'\n&gt; tensorflow/core/platform/default/tracing.cc:32:19: warning: 'tensorflow::port::dummy' defined but not used [-Wunused-variable]\n&gt; Target //tensorflow/tools/pip_package:build_pip_package failed to build\n&gt; INFO: Elapsed time: 418.721s, Critical Path: 19.37s\n&gt; \n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\n\nNo.\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\n\nLinux Fedora 17\n\nTensorFlow installed from (source or binary):\n\nTrying to build from source.\n\nTensorFlow version (use command below):\n\n1.3\n\nPython version:\n\n2.7\n\nBazel version (if compiling from source):\n\n0.5.4\n\nCUDA/cuDNN version:\n\nDisabled.\n\nGPU model and memory:\n\nDisabled.\n\nExact command to reproduce:\n\nbazel build\nDescribe the problem\nI'm trying to compile tensorflow from source, don't modify anything, simply following the instructions on the webpage:\nbuilt bazel 0.5.4 from source\ngit clone\ngit checkout origin/1.3\n./configure     # all answers are the defaults\nbazel build --verbose_failures --config=opt //tensorflow/tools/pip_package:build_pip_package\nThe above fails with with a looser throw specifier error in core/platform/env.h\nThe versions of the various tools involved:\nopenjdk 1.8.0\nbazel 0.5.4\npython 2.7\ngcc 4.7.2\nlibstdc++ 4.7.2\nThe problem is reproducible on my box.\nSource code / logs\nThe precise failure from the bazel build is this:\n> \n> \n> ERROR: /home/fetch/tensorflow/tensorflow/core/BUILD:1244:1: C++ compilation of rule '//tensorflow/core:lib_internal' failed (Exit 1): gcc failed: error executing command \n>   (cd /home/fetch/.cache/bazel/_bazel_fetch/7ef242de6c5f89b75c729448096cd3bb/execroot/org_tensorflow && \\\n>   exec env - \\\n>     LD_LIBRARY_PATH=/usr/lib64:/usr/lib64/openmpi/lib \\\n>     PATH=/opt/obuildfactory/jdk-1.8.0-openjdk-x86_64/bin:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.25.x86_64/bin:/usr/lib64/openmpi/bin:/home/fetch/opt/bin:/home/fetch/bin:/usr/lib64/openmpi/bin:/home/fetch/opt/bin:/home/fetch/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin \\\n>     PWD=/proc/self/cwd \\\n>     PYTHON_BIN_PATH=/bin/python \\\n>     PYTHON_LIB_PATH=/usr/lib/python2.7/site-packages \\\n>     TF_NEED_CUDA=0 \\\n>     TF_NEED_OPENCL=0 \\\n>   /bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -B/bin -B/usr/bin -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections '-march=native' '-std=c++0x' '-march=native' -MD -MF bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.d '-frandom-seed=bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.o' -fPIC -DEIGEN_MPL2_ONLY -DSNAPPY -iquote . -iquote bazel-out/local-opt/genfiles -iquote external/bazel_tools -iquote bazel-out/local-opt/genfiles/external/bazel_tools -iquote external/protobuf -iquote bazel-out/local-opt/genfiles/external/protobuf -iquote external/eigen_archive -iquote bazel-out/local-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/local-opt/genfiles/external/local_config_sycl -iquote external/gif_archive -iquote bazel-out/local-opt/genfiles/external/gif_archive -iquote external/jpeg -iquote bazel-out/local-opt/genfiles/external/jpeg -iquote external/com_googlesource_code_re2 -iquote bazel-out/local-opt/genfiles/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/local-opt/genfiles/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/local-opt/genfiles/external/fft2d -iquote external/highwayhash -iquote bazel-out/local-opt/genfiles/external/highwayhash -iquote external/png_archive -iquote bazel-out/local-opt/genfiles/external/png_archive -iquote external/zlib_archive -iquote bazel-out/local-opt/genfiles/external/zlib_archive -iquote external/snappy -iquote bazel-out/local-opt/genfiles/external/snappy -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/protobuf/src -isystem bazel-out/local-opt/genfiles/external/protobuf/src -isystem external/eigen_archive -isystem bazel-out/local-opt/genfiles/external/eigen_archive -isystem external/gif_archive/lib -isystem bazel-out/local-opt/genfiles/external/gif_archive/lib -isystem external/farmhash_archive/src -isystem bazel-out/local-opt/genfiles/external/farmhash_archive/src -isystem external/png_archive -isystem bazel-out/local-opt/genfiles/external/png_archive -isystem external/zlib_archive -isystem bazel-out/local-opt/genfiles/external/zlib_archive -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare -fno-exceptions -msse3 -pthread -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c tensorflow/core/platform/default/tracing.cc -o bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.o).\n> In file included from ./tensorflow/core/lib/core/threadpool.h:21:0,\n>                  from ./tensorflow/core/platform/default/tracing_impl.h:25,\n>                  from ./tensorflow/core/platform/tracing.h:266,\n>                  from tensorflow/core/platform/default/tracing.cc:16:\n> ./tensorflow/core/platform/env.h:295:11: error: looser throw specifier for 'virtual tensorflow::EnvWrapper::~EnvWrapper()'\n> ./tensorflow/core/platform/env.h:50:11: error:   overriding 'virtual tensorflow::Env::~Env() noexcept (true)'\n> tensorflow/core/platform/default/tracing.cc:32:19: warning: 'tensorflow::port::dummy' defined but not used [-Wunused-variable]\n> Target //tensorflow/tools/pip_package:build_pip_package failed to build\n> INFO: Elapsed time: 418.721s, Critical Path: 19.37s\n>", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n\r\nNo.\r\n\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n\r\nLinux Fedora 17\r\n\r\n- **TensorFlow installed from (source or binary)**:\r\n\r\nTrying to build from source.\r\n\r\n- **TensorFlow version (use command below)**:\r\n\r\n1.3\r\n\r\n- **Python version**: \r\n\r\n2.7\r\n\r\n- **Bazel version (if compiling from source)**:\r\n\r\n0.5.4\r\n\r\n- **CUDA/cuDNN version**:\r\n\r\nDisabled.\r\n\r\n- **GPU model and memory**:\r\n\r\nDisabled.\r\n\r\n- **Exact command to reproduce**:\r\n\r\nbazel build\r\n\r\n### Describe the problem\r\n\r\nI'm trying to compile tensorflow from source, don't modify anything, simply following the instructions on the webpage:\r\n\r\nbuilt bazel 0.5.4 from source\r\n\r\ngit clone\r\ngit checkout origin/1.3\r\n./configure     # all answers are the defaults\r\n\r\nbazel build --verbose_failures --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\nThe above fails with with a looser throw specifier error in core/platform/env.h\r\n\r\nThe versions of the various tools involved:\r\n\r\nopenjdk 1.8.0\r\nbazel 0.5.4\r\npython 2.7\r\ngcc 4.7.2\r\nlibstdc++ 4.7.2\r\n\r\nThe problem is reproducible on my box.\r\n\r\n### Source code / logs\r\n\r\nThe precise failure from the bazel build is this:\r\n\r\n```\r\n> \r\n> \r\n> ERROR: /home/fetch/tensorflow/tensorflow/core/BUILD:1244:1: C++ compilation of rule '//tensorflow/core:lib_internal' failed (Exit 1): gcc failed: error executing command \r\n>   (cd /home/fetch/.cache/bazel/_bazel_fetch/7ef242de6c5f89b75c729448096cd3bb/execroot/org_tensorflow && \\\r\n>   exec env - \\\r\n>     LD_LIBRARY_PATH=/usr/lib64:/usr/lib64/openmpi/lib \\\r\n>     PATH=/opt/obuildfactory/jdk-1.8.0-openjdk-x86_64/bin:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.25.x86_64/bin:/usr/lib64/openmpi/bin:/home/fetch/opt/bin:/home/fetch/bin:/usr/lib64/openmpi/bin:/home/fetch/opt/bin:/home/fetch/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin \\\r\n>     PWD=/proc/self/cwd \\\r\n>     PYTHON_BIN_PATH=/bin/python \\\r\n>     PYTHON_LIB_PATH=/usr/lib/python2.7/site-packages \\\r\n>     TF_NEED_CUDA=0 \\\r\n>     TF_NEED_OPENCL=0 \\\r\n>   /bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -B/bin -B/usr/bin -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections '-march=native' '-std=c++0x' '-march=native' -MD -MF bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.d '-frandom-seed=bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.o' -fPIC -DEIGEN_MPL2_ONLY -DSNAPPY -iquote . -iquote bazel-out/local-opt/genfiles -iquote external/bazel_tools -iquote bazel-out/local-opt/genfiles/external/bazel_tools -iquote external/protobuf -iquote bazel-out/local-opt/genfiles/external/protobuf -iquote external/eigen_archive -iquote bazel-out/local-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/local-opt/genfiles/external/local_config_sycl -iquote external/gif_archive -iquote bazel-out/local-opt/genfiles/external/gif_archive -iquote external/jpeg -iquote bazel-out/local-opt/genfiles/external/jpeg -iquote external/com_googlesource_code_re2 -iquote bazel-out/local-opt/genfiles/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/local-opt/genfiles/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/local-opt/genfiles/external/fft2d -iquote external/highwayhash -iquote bazel-out/local-opt/genfiles/external/highwayhash -iquote external/png_archive -iquote bazel-out/local-opt/genfiles/external/png_archive -iquote external/zlib_archive -iquote bazel-out/local-opt/genfiles/external/zlib_archive -iquote external/snappy -iquote bazel-out/local-opt/genfiles/external/snappy -isystem external/bazel_tools/tools/cpp/gcc3 -isystem external/protobuf/src -isystem bazel-out/local-opt/genfiles/external/protobuf/src -isystem external/eigen_archive -isystem bazel-out/local-opt/genfiles/external/eigen_archive -isystem external/gif_archive/lib -isystem bazel-out/local-opt/genfiles/external/gif_archive/lib -isystem external/farmhash_archive/src -isystem bazel-out/local-opt/genfiles/external/farmhash_archive/src -isystem external/png_archive -isystem bazel-out/local-opt/genfiles/external/png_archive -isystem external/zlib_archive -isystem bazel-out/local-opt/genfiles/external/zlib_archive -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare -fno-exceptions -msse3 -pthread -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c tensorflow/core/platform/default/tracing.cc -o bazel-out/local-opt/bin/tensorflow/core/_objs/lib_internal/tensorflow/core/platform/default/tracing.pic.o).\r\n> In file included from ./tensorflow/core/lib/core/threadpool.h:21:0,\r\n>                  from ./tensorflow/core/platform/default/tracing_impl.h:25,\r\n>                  from ./tensorflow/core/platform/tracing.h:266,\r\n>                  from tensorflow/core/platform/default/tracing.cc:16:\r\n> ./tensorflow/core/platform/env.h:295:11: error: looser throw specifier for 'virtual tensorflow::EnvWrapper::~EnvWrapper()'\r\n> ./tensorflow/core/platform/env.h:50:11: error:   overriding 'virtual tensorflow::Env::~Env() noexcept (true)'\r\n> tensorflow/core/platform/default/tracing.cc:32:19: warning: 'tensorflow::port::dummy' defined but not used [-Wunused-variable]\r\n> Target //tensorflow/tools/pip_package:build_pip_package failed to build\r\n> INFO: Elapsed time: 418.721s, Critical Path: 19.37s\r\n> \r\n"}
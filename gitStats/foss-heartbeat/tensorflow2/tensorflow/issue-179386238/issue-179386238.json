{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4593", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4593/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4593/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4593/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4593", "id": 179386238, "node_id": "MDU6SXNzdWUxNzkzODYyMzg=", "number": 4593, "title": "tf.cumsum returns wrong value on reverse", "user": {"login": "mathDR", "id": 2363269, "node_id": "MDQ6VXNlcjIzNjMyNjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/2363269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mathDR", "html_url": "https://github.com/mathDR", "followers_url": "https://api.github.com/users/mathDR/followers", "following_url": "https://api.github.com/users/mathDR/following{/other_user}", "gists_url": "https://api.github.com/users/mathDR/gists{/gist_id}", "starred_url": "https://api.github.com/users/mathDR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mathDR/subscriptions", "organizations_url": "https://api.github.com/users/mathDR/orgs", "repos_url": "https://api.github.com/users/mathDR/repos", "events_url": "https://api.github.com/users/mathDR/events{/privacy}", "received_events_url": "https://api.github.com/users/mathDR/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-09-27T02:59:02Z", "updated_at": "2016-09-27T22:44:37Z", "closed_at": "2016-09-27T22:44:37Z", "author_association": "NONE", "body_html": "<p>To reproduce the issue:</p>\n<div class=\"highlight highlight-source-python\"><pre>v <span class=\"pl-k\">=</span> [ <span class=\"pl-c1\">10.52005689</span>  <span class=\"pl-c1\">10.9425797</span>   <span class=\"pl-c1\">10.60515152</span>   <span class=\"pl-c1\">9.59574335</span>   <span class=\"pl-c1\">8.4282654</span>\n   <span class=\"pl-c1\">9.97478889</span>   <span class=\"pl-c1\">9.33102282</span>  <span class=\"pl-c1\">10.68171879</span>  <span class=\"pl-c1\">10.85262443</span>   <span class=\"pl-c1\">9.06804822</span>]\nw <span class=\"pl-k\">=</span> tf.cumsum(tf.reverse(v,[<span class=\"pl-c1\">True</span>]))\nq <span class=\"pl-k\">=</span> tf.cumsum(tf.reverse(v,[<span class=\"pl-c1\">True</span>]),<span class=\"pl-v\">reverse</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>)\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    res <span class=\"pl-k\">=</span> sess.run([w,q])\n    <span class=\"pl-c1\">print</span> res[<span class=\"pl-c1\">0</span>]\n    <span class=\"pl-c1\">print</span> res[<span class=\"pl-c1\">1</span>]</pre></div>\n<p>returns</p>\n<div class=\"highlight highlight-source-python\"><pre>[   <span class=\"pl-c1\">9.06804822</span>   <span class=\"pl-c1\">19.92067265</span>   <span class=\"pl-c1\">30.60239143</span>   <span class=\"pl-c1\">39.93341425</span>   <span class=\"pl-c1\">49.90820314</span>\n   <span class=\"pl-c1\">58.33646854</span>   <span class=\"pl-c1\">67.93221189</span>   <span class=\"pl-c1\">78.5373634</span>    <span class=\"pl-c1\">89.47994311</span>  <span class=\"pl-c1\">100</span>.        ]\n[ <span class=\"pl-c1\">100</span>.           90.93195178   <span class=\"pl-c1\">80.07932735</span>   <span class=\"pl-c1\">69.39760857</span>   <span class=\"pl-c1\">60.06658575</span>\n   <span class=\"pl-c1\">50.09179686</span>   <span class=\"pl-c1\">41.66353146</span>   <span class=\"pl-c1\">32.06778811</span>   <span class=\"pl-c1\">21.4626366</span>    <span class=\"pl-c1\">10.52005689</span>]</pre></div>\n<p>which are NOT the reverse of each other.  Note, the value for w is correct.  The q value should be the reverse of w, but is not.  The cumsum values are also incorrect...</p>", "body_text": "To reproduce the issue:\nv = [ 10.52005689  10.9425797   10.60515152   9.59574335   8.4282654\n   9.97478889   9.33102282  10.68171879  10.85262443   9.06804822]\nw = tf.cumsum(tf.reverse(v,[True]))\nq = tf.cumsum(tf.reverse(v,[True]),reverse=True)\nwith tf.Session() as sess:\n    res = sess.run([w,q])\n    print res[0]\n    print res[1]\nreturns\n[   9.06804822   19.92067265   30.60239143   39.93341425   49.90820314\n   58.33646854   67.93221189   78.5373634    89.47994311  100.        ]\n[ 100.           90.93195178   80.07932735   69.39760857   60.06658575\n   50.09179686   41.66353146   32.06778811   21.4626366    10.52005689]\nwhich are NOT the reverse of each other.  Note, the value for w is correct.  The q value should be the reverse of w, but is not.  The cumsum values are also incorrect...", "body": "To reproduce the issue:\n\n``` python\nv = [ 10.52005689  10.9425797   10.60515152   9.59574335   8.4282654\n   9.97478889   9.33102282  10.68171879  10.85262443   9.06804822]\nw = tf.cumsum(tf.reverse(v,[True]))\nq = tf.cumsum(tf.reverse(v,[True]),reverse=True)\nwith tf.Session() as sess:\n    res = sess.run([w,q])\n    print res[0]\n    print res[1]\n```\n\nreturns\n\n``` python\n[   9.06804822   19.92067265   30.60239143   39.93341425   49.90820314\n   58.33646854   67.93221189   78.5373634    89.47994311  100.        ]\n[ 100.           90.93195178   80.07932735   69.39760857   60.06658575\n   50.09179686   41.66353146   32.06778811   21.4626366    10.52005689]\n```\n\nwhich are NOT the reverse of each other.  Note, the value for w is correct.  The q value should be the reverse of w, but is not.  The cumsum values are also incorrect...\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/352907067", "html_url": "https://github.com/tensorflow/tensorflow/issues/15396#issuecomment-352907067", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15396", "id": 352907067, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjkwNzA2Nw==", "user": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-19T22:33:15Z", "updated_at": "2017-12-19T22:33:15Z", "author_association": "MEMBER", "body_html": "<p>Shape inference cannot use the values inside a Tensor. In full generality, that would require evaluating that tensor. For some tensors, that is possible (i.e., constant folding), and in this case, arguably all involved tensors are constants, and all operations are simple enough that constants could still be constants after. So this is possible in theory, but I wouldn't want to predict how complicated it would be to implement.</p>\n<p>concat and stack/unstack on shapes is probably very common, so it may be worth thinking about this special case in particular.</p>\n<p>@skyewm do you have an educated guess how hard it would be to do?</p>", "body_text": "Shape inference cannot use the values inside a Tensor. In full generality, that would require evaluating that tensor. For some tensors, that is possible (i.e., constant folding), and in this case, arguably all involved tensors are constants, and all operations are simple enough that constants could still be constants after. So this is possible in theory, but I wouldn't want to predict how complicated it would be to implement.\nconcat and stack/unstack on shapes is probably very common, so it may be worth thinking about this special case in particular.\n@skyewm do you have an educated guess how hard it would be to do?", "body": "Shape inference cannot use the values inside a Tensor. In full generality, that would require evaluating that tensor. For some tensors, that is possible (i.e., constant folding), and in this case, arguably all involved tensors are constants, and all operations are simple enough that constants could still be constants after. So this is possible in theory, but I wouldn't want to predict how complicated it would be to implement. \r\n\r\nconcat and stack/unstack on shapes is probably very common, so it may be worth thinking about this special case in particular.\r\n\r\n@skyewm do you have an educated guess how hard it would be to do?"}
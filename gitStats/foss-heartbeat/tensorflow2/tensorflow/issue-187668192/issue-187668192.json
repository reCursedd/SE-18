{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5445", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5445/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5445/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5445/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5445", "id": 187668192, "node_id": "MDU6SXNzdWUxODc2NjgxOTI=", "number": 5445, "title": "tf.gather doesn't run on GPU for DT_INT32", "user": {"login": "chhwang", "id": 8018170, "node_id": "MDQ6VXNlcjgwMTgxNzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/8018170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chhwang", "html_url": "https://github.com/chhwang", "followers_url": "https://api.github.com/users/chhwang/followers", "following_url": "https://api.github.com/users/chhwang/following{/other_user}", "gists_url": "https://api.github.com/users/chhwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chhwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chhwang/subscriptions", "organizations_url": "https://api.github.com/users/chhwang/orgs", "repos_url": "https://api.github.com/users/chhwang/repos", "events_url": "https://api.github.com/users/chhwang/events{/privacy}", "received_events_url": "https://api.github.com/users/chhwang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-11-07T09:57:33Z", "updated_at": "2016-11-07T17:25:30Z", "closed_at": "2016-11-07T17:25:30Z", "author_association": "NONE", "body_html": "<p>As I know, <code>tf.gather</code> should be able to operate on a GPU device according to this issue: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"156711649\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2502\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2502/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2502\">#2502</a></p>\n<p>I installed the latest version of <code>r0.11</code> branch (commit hash written below) and ran the following code:</p>\n<div class=\"highlight highlight-source-python\"><pre>    <span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n    x <span class=\"pl-k\">=</span> tf.constant([<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">2</span>,<span class=\"pl-c1\">3</span>,<span class=\"pl-c1\">4</span>,<span class=\"pl-c1\">5</span>])\n    idx <span class=\"pl-k\">=</span> tf.constant([<span class=\"pl-c1\">0</span>,<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">2</span>,<span class=\"pl-c1\">3</span>,<span class=\"pl-c1\">4</span>])\n    <span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/gpu:0<span class=\"pl-pds\">'</span></span>):\n        y <span class=\"pl-k\">=</span> tf.gather(x, idx)\n    sess <span class=\"pl-k\">=</span> tf.Session()\n    <span class=\"pl-c1\">print</span>(sess.run(y))</pre></div>\n<p>and it returned the following error message:</p>\n<pre><code>tensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'Gather': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\n     [[Node: Gather = Gather[Tindices=DT_INT32, Tparams=DT_INT32, validate_indices=true, _device=\"/device:GPU:0\"](Const, Const_1)]]\n</code></pre>\n<p>If I change <code>'/gpu:0'</code> into <code>'/cpu:0'</code>, it works well. Can you give me any hint on this?</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04</p>\n<p>Installed version of CUDA and cuDNN: CUDA 8.0 and cuDNN 5.1.5</p>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>)<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/7197421df430a51383fba7c4e7ff9a3fd7795535/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/7197421df430a51383fba7c4e7ff9a3fd7795535\"><tt>7197421</tt></a></li>\n<li>The output of <code>bazel version</code><br>\nBuild label: 0.3.1<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Fri Jul 29 09:09:52 2016 (1469783392)<br>\nBuild timestamp: 1469783392<br>\nBuild timestamp as int: 1469783392</li>\n</ol>", "body_text": "As I know, tf.gather should be able to operate on a GPU device according to this issue: #2502\nI installed the latest version of r0.11 branch (commit hash written below) and ran the following code:\n    import tensorflow as tf\n    x = tf.constant([1,2,3,4,5])\n    idx = tf.constant([0,1,2,3,4])\n    with tf.device('/gpu:0'):\n        y = tf.gather(x, idx)\n    sess = tf.Session()\n    print(sess.run(y))\nand it returned the following error message:\ntensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'Gather': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\n     [[Node: Gather = Gather[Tindices=DT_INT32, Tparams=DT_INT32, validate_indices=true, _device=\"/device:GPU:0\"](Const, Const_1)]]\n\nIf I change '/gpu:0' into '/cpu:0', it works well. Can you give me any hint on this?\nEnvironment info\nOperating System: Ubuntu 14.04\nInstalled version of CUDA and cuDNN: CUDA 8.0 and cuDNN 5.1.5\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD)\n7197421\nThe output of bazel version\nBuild label: 0.3.1\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Jul 29 09:09:52 2016 (1469783392)\nBuild timestamp: 1469783392\nBuild timestamp as int: 1469783392", "body": "As I know, `tf.gather` should be able to operate on a GPU device according to this issue: #2502\r\n\r\nI installed the latest version of `r0.11` branch (commit hash written below) and ran the following code:\r\n```python\r\n    import tensorflow as tf\r\n    x = tf.constant([1,2,3,4,5])\r\n    idx = tf.constant([0,1,2,3,4])\r\n    with tf.device('/gpu:0'):\r\n        y = tf.gather(x, idx)\r\n    sess = tf.Session()\r\n    print(sess.run(y))\r\n```\r\n\r\nand it returned the following error message:\r\n\r\n    tensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'Gather': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\r\n         [[Node: Gather = Gather[Tindices=DT_INT32, Tparams=DT_INT32, validate_indices=true, _device=\"/device:GPU:0\"](Const, Const_1)]]\r\n\r\nIf I change `'/gpu:0'` into `'/cpu:0'`, it works well. Can you give me any hint on this?\r\n\r\n### Environment info\r\nOperating System: Ubuntu 14.04\r\n\r\nInstalled version of CUDA and cuDNN: CUDA 8.0 and cuDNN 5.1.5\r\n\r\nIf installed from source, provide \r\n\r\n1. The commit hash (`git rev-parse HEAD`)\r\n7197421df430a51383fba7c4e7ff9a3fd7795535\r\n2. The output of `bazel version`\r\nBuild label: 0.3.1\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Fri Jul 29 09:09:52 2016 (1469783392)\r\nBuild timestamp: 1469783392\r\nBuild timestamp as int: 1469783392"}
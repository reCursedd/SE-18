{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/284220571", "html_url": "https://github.com/tensorflow/tensorflow/issues/4451#issuecomment-284220571", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4451", "id": 284220571, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDIyMDU3MQ==", "user": {"login": "879622409", "id": 23717495, "node_id": "MDQ6VXNlcjIzNzE3NDk1", "avatar_url": "https://avatars2.githubusercontent.com/u/23717495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/879622409", "html_url": "https://github.com/879622409", "followers_url": "https://api.github.com/users/879622409/followers", "following_url": "https://api.github.com/users/879622409/following{/other_user}", "gists_url": "https://api.github.com/users/879622409/gists{/gist_id}", "starred_url": "https://api.github.com/users/879622409/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/879622409/subscriptions", "organizations_url": "https://api.github.com/users/879622409/orgs", "repos_url": "https://api.github.com/users/879622409/repos", "events_url": "https://api.github.com/users/879622409/events{/privacy}", "received_events_url": "https://api.github.com/users/879622409/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-05T11:04:20Z", "updated_at": "2017-03-05T11:04:20Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a> I try the strip_unused command and get 997 ops. But app crashes on importGraphDef.<br>\nHere are my logs:<br>\njava.lang.RuntimeException: Error initializing TensorFlow!<br>\nat org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:141)<br>\nat org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158)<br>\nat org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:394)<br>\nat org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:411)<br>\nat org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)<br>\nat org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:94)<br>\nat android.view.TextureView.getHardwareLayer(TextureView.java:394)<br>\nat android.view.TextureView.draw(TextureView.java:330)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:16197)<br>\nat android.view.View.draw(View.java:16998)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:16192)<br>\nat android.view.View.draw(View.java:16998)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)<br>\nat android.view.View.draw(View.java:17235)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:16197)<br>\nat android.view.View.draw(View.java:16998)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:16192)<br>\nat android.view.View.draw(View.java:16998)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:16192)<br>\nat android.view.View.draw(View.java:16998)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)<br>\nat android.view.View.draw(View.java:17235)<br>\nat com.android.internal.policy.DecorView.draw(DecorView.java:801)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:16197)<br>\nat android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:676)<br>\nat android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:682)<br>\nat android.view.ThreadedRenderer.draw(ThreadedRenderer.java:796)<br>\nat android.view.ViewRootImpl.draw(ViewRootImpl.java:2989)<br>\nat android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2783)<br>\nat android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2374)<br>\nat android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1364)<br>\nat android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6757)<br>\nat android.view.Choreographer$CallbackRecord.run(Choreographer.java:923)<br>\nat android.view.Choreographer.doCallbacks(Choreographer.java:735)<br>\nat android.view.Choreographer.doFrame(Choreographer.java:667)<br>\nat android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:909)<br>\nat android.os.Handler.handleCallback(Handler.java:755)<br>\nat android.os.Handler.dispatchMessage(Handler.java:95)<br>\nat android.os.Looper.loop(Looper.java:156)<br>\nat android.app.ActivityThread.main(ActivityThread.java:6524)<br>\nat java.lang.reflect.Method.invoke(Native Method)<br>\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)<br>\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)<br>\nCaused by: java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization().<br>\nat org.tensorflow.Graph.importGraphDef(Native Method)<br>\nat org.tensorflow.Graph.importGraphDef(Graph.java:113)<br>\nat org.tensorflow.Graph.importGraphDef(Graph.java:97)<br>\nat org.tensorflow.contrib.android.TensorFlowInferenceInterface.load(TensorFlowInferenceInterface.java:402)<br>\n03-05 18:42:02.972 4844-4844/org.tensorflow.demo E/AndroidRuntime:     at org.tensorflow.contrib.android.TensorFlowInferenceInterface.initializeTensorFlow(TensorFlowInferenceInterface.java:91)<br>\nat org.tensorflow.demo.TensorFlowImageClassifier.create(TensorFlowImageClassifier.java:102)<br>\nat org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:131)<br>\n... 50 more</p>", "body_text": "@andrewharp I try the strip_unused command and get 997 ops. But app crashes on importGraphDef.\nHere are my logs:\njava.lang.RuntimeException: Error initializing TensorFlow!\nat org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:141)\nat org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158)\nat org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:394)\nat org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:411)\nat org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)\nat org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:94)\nat android.view.TextureView.getHardwareLayer(TextureView.java:394)\nat android.view.TextureView.draw(TextureView.java:330)\nat android.view.View.updateDisplayListIfDirty(View.java:16197)\nat android.view.View.draw(View.java:16998)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\nat android.view.View.updateDisplayListIfDirty(View.java:16192)\nat android.view.View.draw(View.java:16998)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\nat android.view.View.draw(View.java:17235)\nat android.view.View.updateDisplayListIfDirty(View.java:16197)\nat android.view.View.draw(View.java:16998)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\nat android.view.View.updateDisplayListIfDirty(View.java:16192)\nat android.view.View.draw(View.java:16998)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\nat android.view.View.updateDisplayListIfDirty(View.java:16192)\nat android.view.View.draw(View.java:16998)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3777)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\nat android.view.View.draw(View.java:17235)\nat com.android.internal.policy.DecorView.draw(DecorView.java:801)\nat android.view.View.updateDisplayListIfDirty(View.java:16197)\nat android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:676)\nat android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:682)\nat android.view.ThreadedRenderer.draw(ThreadedRenderer.java:796)\nat android.view.ViewRootImpl.draw(ViewRootImpl.java:2989)\nat android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2783)\nat android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2374)\nat android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1364)\nat android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6757)\nat android.view.Choreographer$CallbackRecord.run(Choreographer.java:923)\nat android.view.Choreographer.doCallbacks(Choreographer.java:735)\nat android.view.Choreographer.doFrame(Choreographer.java:667)\nat android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:909)\nat android.os.Handler.handleCallback(Handler.java:755)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:156)\nat android.app.ActivityThread.main(ActivityThread.java:6524)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)\nCaused by: java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization().\nat org.tensorflow.Graph.importGraphDef(Native Method)\nat org.tensorflow.Graph.importGraphDef(Graph.java:113)\nat org.tensorflow.Graph.importGraphDef(Graph.java:97)\nat org.tensorflow.contrib.android.TensorFlowInferenceInterface.load(TensorFlowInferenceInterface.java:402)\n03-05 18:42:02.972 4844-4844/org.tensorflow.demo E/AndroidRuntime:     at org.tensorflow.contrib.android.TensorFlowInferenceInterface.initializeTensorFlow(TensorFlowInferenceInterface.java:91)\nat org.tensorflow.demo.TensorFlowImageClassifier.create(TensorFlowImageClassifier.java:102)\nat org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:131)\n... 50 more", "body": "@andrewharp I try the strip_unused command and get 997 ops. But app crashes on importGraphDef.\r\nHere are my logs:\r\njava.lang.RuntimeException: Error initializing TensorFlow!\r\n                                                                       at org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:141)\r\n                                                                       at org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158)\r\n                                                                       at org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:394)\r\n                                                                       at org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:411)\r\n                                                                       at org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)\r\n                                                                       at org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:94)\r\n                                                                       at android.view.TextureView.getHardwareLayer(TextureView.java:394)\r\n                                                                       at android.view.TextureView.draw(TextureView.java:330)\r\n                                                                       at android.view.View.updateDisplayListIfDirty(View.java:16197)\r\n                                                                       at android.view.View.draw(View.java:16998)\r\n                                                                       at android.view.ViewGroup.drawChild(ViewGroup.java:3777)\r\n                                                                       at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\r\n                                                                       at android.view.View.updateDisplayListIfDirty(View.java:16192)\r\n                                                                       at android.view.View.draw(View.java:16998)\r\n                                                                       at android.view.ViewGroup.drawChild(ViewGroup.java:3777)\r\n                                                                       at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\r\n                                                                       at android.view.View.draw(View.java:17235)\r\n                                                                       at android.view.View.updateDisplayListIfDirty(View.java:16197)\r\n                                                                       at android.view.View.draw(View.java:16998)\r\n                                                                       at android.view.ViewGroup.drawChild(ViewGroup.java:3777)\r\n                                                                       at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\r\n                                                                       at android.view.View.updateDisplayListIfDirty(View.java:16192)\r\n                                                                       at android.view.View.draw(View.java:16998)\r\n                                                                       at android.view.ViewGroup.drawChild(ViewGroup.java:3777)\r\n                                                                       at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\r\n                                                                       at android.view.View.updateDisplayListIfDirty(View.java:16192)\r\n                                                                       at android.view.View.draw(View.java:16998)\r\n                                                                       at android.view.ViewGroup.drawChild(ViewGroup.java:3777)\r\n                                                                       at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3560)\r\n                                                                       at android.view.View.draw(View.java:17235)\r\n                                                                       at com.android.internal.policy.DecorView.draw(DecorView.java:801)\r\n                                                                       at android.view.View.updateDisplayListIfDirty(View.java:16197)\r\n                                                                       at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:676)\r\n                                                                       at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:682)\r\n                                                                       at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:796)\r\n                                                                       at android.view.ViewRootImpl.draw(ViewRootImpl.java:2989)\r\n                                                                       at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2783)\r\n                                                                       at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2374)\r\n                                                                       at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1364)\r\n                                                                       at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6757)\r\n                                                                       at android.view.Choreographer$CallbackRecord.run(Choreographer.java:923)\r\n                                                                       at android.view.Choreographer.doCallbacks(Choreographer.java:735)\r\n                                                                       at android.view.Choreographer.doFrame(Choreographer.java:667)\r\n                                                                       at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:909)\r\n                                                                       at android.os.Handler.handleCallback(Handler.java:755)\r\n                                                                       at android.os.Handler.dispatchMessage(Handler.java:95)\r\n                                                                       at android.os.Looper.loop(Looper.java:156)\r\n                                                                       at android.app.ActivityThread.main(ActivityThread.java:6524)\r\n                                                                       at java.lang.reflect.Method.invoke(Native Method)\r\n                                                                       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)\r\n                                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)\r\n                                                                    Caused by: java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization().\r\n                                                                       at org.tensorflow.Graph.importGraphDef(Native Method)\r\n                                                                       at org.tensorflow.Graph.importGraphDef(Graph.java:113)\r\n                                                                       at org.tensorflow.Graph.importGraphDef(Graph.java:97)\r\n                                                                       at org.tensorflow.contrib.android.TensorFlowInferenceInterface.load(TensorFlowInferenceInterface.java:402)\r\n03-05 18:42:02.972 4844-4844/org.tensorflow.demo E/AndroidRuntime:     at org.tensorflow.contrib.android.TensorFlowInferenceInterface.initializeTensorFlow(TensorFlowInferenceInterface.java:91)\r\n                                                                       at org.tensorflow.demo.TensorFlowImageClassifier.create(TensorFlowImageClassifier.java:102)\r\n                                                                       at org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:131)\r\n                                                                       \t... 50 more\r\n                                                              "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/311450378", "html_url": "https://github.com/tensorflow/tensorflow/issues/9926#issuecomment-311450378", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9926", "id": 311450378, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTQ1MDM3OA==", "user": {"login": "byronyi", "id": 2613663, "node_id": "MDQ6VXNlcjI2MTM2NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2613663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/byronyi", "html_url": "https://github.com/byronyi", "followers_url": "https://api.github.com/users/byronyi/followers", "following_url": "https://api.github.com/users/byronyi/following{/other_user}", "gists_url": "https://api.github.com/users/byronyi/gists{/gist_id}", "starred_url": "https://api.github.com/users/byronyi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/byronyi/subscriptions", "organizations_url": "https://api.github.com/users/byronyi/orgs", "repos_url": "https://api.github.com/users/byronyi/repos", "events_url": "https://api.github.com/users/byronyi/events{/privacy}", "received_events_url": "https://api.github.com/users/byronyi/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-27T18:49:24Z", "updated_at": "2017-06-27T18:59:07Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=22274255\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/shamoya\">@shamoya</a> I followed the configuration guide <a href=\"https://community.mellanox.com/docs/DOC-2911\" rel=\"nofollow\">here</a>.</p>\n<p>Hardware:<br>\nWe are using a 4-node 40Gb RoCE topology, with 4 K40m GPUs each node and and ConnectX-3 dual port NIC that connects to 2 MSN2100-BB2F switches. The switch is configured with link-level flow control (as opposed to PFC).</p>\n<p>Software:<br>\nWe are using Debian 9 with in-stock kernel version 4.9, and MLNX_OFED 4.0-2.0.2.0 that built from source. We are using CUDA 8.0 with cuDNN 6.0, but the bug seems to appear even when running on CPU. But it runs smoothly within the same box, i.e. there is no such error when running worker and ps on the same host only.</p>\n<p>We regularly rebase our codebase with current TF master, and the issue seems to be rather persistent. We are using the latest <code>tf_cnn_benchmark.py</code> in the benchmark repository.</p>\n<p>For the verbosity issue, I'll simply suggest you to change the ones that interest you to <code>VLOG(0)</code> so it prints by default.</p>", "body_text": "Hi @shamoya I followed the configuration guide here.\nHardware:\nWe are using a 4-node 40Gb RoCE topology, with 4 K40m GPUs each node and and ConnectX-3 dual port NIC that connects to 2 MSN2100-BB2F switches. The switch is configured with link-level flow control (as opposed to PFC).\nSoftware:\nWe are using Debian 9 with in-stock kernel version 4.9, and MLNX_OFED 4.0-2.0.2.0 that built from source. We are using CUDA 8.0 with cuDNN 6.0, but the bug seems to appear even when running on CPU. But it runs smoothly within the same box, i.e. there is no such error when running worker and ps on the same host only.\nWe regularly rebase our codebase with current TF master, and the issue seems to be rather persistent. We are using the latest tf_cnn_benchmark.py in the benchmark repository.\nFor the verbosity issue, I'll simply suggest you to change the ones that interest you to VLOG(0) so it prints by default.", "body": "Hi @shamoya I followed the configuration guide [here](https://community.mellanox.com/docs/DOC-2911).\r\n\r\nHardware:\r\nWe are using a 4-node 40Gb RoCE topology, with 4 K40m GPUs each node and and ConnectX-3 dual port NIC that connects to 2 MSN2100-BB2F switches. The switch is configured with link-level flow control (as opposed to PFC). \r\n\r\nSoftware:\r\nWe are using Debian 9 with in-stock kernel version 4.9, and MLNX_OFED 4.0-2.0.2.0 that built from source. We are using CUDA 8.0 with cuDNN 6.0, but the bug seems to appear even when running on CPU. But it runs smoothly within the same box, i.e. there is no such error when running worker and ps on the same host only.\r\n\r\nWe regularly rebase our codebase with current TF master, and the issue seems to be rather persistent. We are using the latest ``tf_cnn_benchmark.py`` in the benchmark repository.\r\n\r\nFor the verbosity issue, I'll simply suggest you to change the ones that interest you to ``VLOG(0)`` so it prints by default."}
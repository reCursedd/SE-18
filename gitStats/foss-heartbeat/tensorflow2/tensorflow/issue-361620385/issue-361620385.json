{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22373", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22373/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22373/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22373/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22373", "id": 361620385, "node_id": "MDU6SXNzdWUzNjE2MjAzODU=", "number": 22373, "title": "AttributeError: 'TocoConverter' object has no attribute 'get_input_arrays'", "user": {"login": "sxsxsx", "id": 16790259, "node_id": "MDQ6VXNlcjE2NzkwMjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/16790259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sxsxsx", "html_url": "https://github.com/sxsxsx", "followers_url": "https://api.github.com/users/sxsxsx/followers", "following_url": "https://api.github.com/users/sxsxsx/following{/other_user}", "gists_url": "https://api.github.com/users/sxsxsx/gists{/gist_id}", "starred_url": "https://api.github.com/users/sxsxsx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sxsxsx/subscriptions", "organizations_url": "https://api.github.com/users/sxsxsx/orgs", "repos_url": "https://api.github.com/users/sxsxsx/repos", "events_url": "https://api.github.com/users/sxsxsx/events{/privacy}", "received_events_url": "https://api.github.com/users/sxsxsx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-09-19T07:45:26Z", "updated_at": "2018-09-21T14:41:37Z", "closed_at": "2018-09-21T14:41:37Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: NO</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:  Linux Ubuntu 16.04</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>: NO</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: pip install-gpu==1.9</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.9 GPU</li>\n<li><strong>Python version</strong>: python27</li>\n<li><strong>Bazel version (if compiling from source)</strong>: NO</li>\n<li><strong>CUDA/cuDNN version</strong>: CUDA9.0 cuDNN7.0</li>\n<li><strong>GPU model and memory</strong>: GTX1070 8G</li>\n</ul>\n<p>You can collect some of this information using our environment capture script:</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\">https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh</a></p>\n<p>You can obtain the TensorFlow version with</p>\n<p>python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"</p>\n<h3>Describe the problem</h3>\n<p>I want to conver the pb file to tflite file,<br>\naccording to <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/python_api.md\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/python_api.md</a>,<br>\nI run the example codes, but failed<br>\nI run the following code</p>\n<h3>Source code</h3>\n<p>`import tensorflow as tf<br>\nimg = tf.placeholder(name=\"img\", dtype=tf.float32, shape=(1, 64, 64, 3))<br>\nconst = tf.constant([1., 2., 3.]) + tf.constant([1., 4., 4.])<br>\nval = img + const<br>\nout = tf.fake_quant_with_min_max_args(val, min=0., max=1., name=\"output\")</p>\n<p>with tf.Session() as sess:<br>\nconverter = tf.contrib.lite.TocoConverter.from_session(sess, [img], [out])<br>\nconverter.inference_type = tf.contrib.lite.constants.QUANTIZED_UINT8<br>\ninput_arrays = converter.get_input_arrays()<br>\nconverter.quantized_input_stats = {input_arrays[0] : (0., 1.)}  # mean, std_dev<br>\ntflite_model = converter.convert()<br>\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)`</p>\n<p>error occurs, logs are below</p>\n<h3>logs</h3>\n<p>2018-09-19 15:22:25.875027: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA<br>\n2018-09-19 15:22:25.964421: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:897] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero<br>\n2018-09-19 15:22:25.964839: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1392] Found device 0 with properties:<br>\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.8225<br>\npciBusID: 0000:01:00.0<br>\ntotalMemory: 7.92GiB freeMemory: 7.77GiB<br>\n2018-09-19 15:22:25.964854: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1471] Adding visible gpu devices: 0<br>\n2018-09-19 15:22:26.147714: I tensorflow/core/common_runtime/gpu/gpu_device.cc:952] Device interconnect StreamExecutor with strength 1 edge matrix:<br>\n2018-09-19 15:22:26.147746: I tensorflow/core/common_runtime/gpu/gpu_device.cc:958]      0<br>\n2018-09-19 15:22:26.147752: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   N<br>\n2018-09-19 15:22:26.147938: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1084] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7502 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)<br>\nTraceback (most recent call last):<br>\nFile \"test.py\", line 10, in <br>\ninput_arrays = converter.get_input_arrays()<br>\nAttributeError: 'TocoConverter' object has no attribute 'get_input_arrays'</p>\n<p>what should I do?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): NO\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Linux Ubuntu 16.04\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NO\nTensorFlow installed from (source or binary): pip install-gpu==1.9\nTensorFlow version (use command below): 1.9 GPU\nPython version: python27\nBazel version (if compiling from source): NO\nCUDA/cuDNN version: CUDA9.0 cuDNN7.0\nGPU model and memory: GTX1070 8G\n\nYou can collect some of this information using our environment capture script:\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\nYou can obtain the TensorFlow version with\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nDescribe the problem\nI want to conver the pb file to tflite file,\naccording to https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/python_api.md,\nI run the example codes, but failed\nI run the following code\nSource code\n`import tensorflow as tf\nimg = tf.placeholder(name=\"img\", dtype=tf.float32, shape=(1, 64, 64, 3))\nconst = tf.constant([1., 2., 3.]) + tf.constant([1., 4., 4.])\nval = img + const\nout = tf.fake_quant_with_min_max_args(val, min=0., max=1., name=\"output\")\nwith tf.Session() as sess:\nconverter = tf.contrib.lite.TocoConverter.from_session(sess, [img], [out])\nconverter.inference_type = tf.contrib.lite.constants.QUANTIZED_UINT8\ninput_arrays = converter.get_input_arrays()\nconverter.quantized_input_stats = {input_arrays[0] : (0., 1.)}  # mean, std_dev\ntflite_model = converter.convert()\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)`\nerror occurs, logs are below\nlogs\n2018-09-19 15:22:25.875027: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\n2018-09-19 15:22:25.964421: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:897] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2018-09-19 15:22:25.964839: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1392] Found device 0 with properties:\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.8225\npciBusID: 0000:01:00.0\ntotalMemory: 7.92GiB freeMemory: 7.77GiB\n2018-09-19 15:22:25.964854: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1471] Adding visible gpu devices: 0\n2018-09-19 15:22:26.147714: I tensorflow/core/common_runtime/gpu/gpu_device.cc:952] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-09-19 15:22:26.147746: I tensorflow/core/common_runtime/gpu/gpu_device.cc:958]      0\n2018-09-19 15:22:26.147752: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   N\n2018-09-19 15:22:26.147938: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1084] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7502 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\nTraceback (most recent call last):\nFile \"test.py\", line 10, in \ninput_arrays = converter.get_input_arrays()\nAttributeError: 'TocoConverter' object has no attribute 'get_input_arrays'\nwhat should I do?", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: NO\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  Linux Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: NO\r\n- **TensorFlow installed from (source or binary)**: pip install-gpu==1.9\r\n- **TensorFlow version (use command below)**: 1.9 GPU\r\n- **Python version**: python27\r\n- **Bazel version (if compiling from source)**: NO\r\n- **CUDA/cuDNN version**: CUDA9.0 cuDNN7.0\r\n- **GPU model and memory**: GTX1070 8G\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n### Describe the problem\r\nI want to conver the pb file to tflite file, \r\naccording to https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/python_api.md, \r\nI run the example codes, but failed\r\nI run the following code\r\n### Source code \r\n\r\n`import tensorflow as tf\r\nimg = tf.placeholder(name=\"img\", dtype=tf.float32, shape=(1, 64, 64, 3))\r\nconst = tf.constant([1., 2., 3.]) + tf.constant([1., 4., 4.])\r\nval = img + const\r\nout = tf.fake_quant_with_min_max_args(val, min=0., max=1., name=\"output\")\r\n\r\nwith tf.Session() as sess:\r\n  converter = tf.contrib.lite.TocoConverter.from_session(sess, [img], [out])\r\n  converter.inference_type = tf.contrib.lite.constants.QUANTIZED_UINT8\r\n  input_arrays = converter.get_input_arrays()\r\n  converter.quantized_input_stats = {input_arrays[0] : (0., 1.)}  # mean, std_dev\r\n  tflite_model = converter.convert()\r\n  open(\"converted_model.tflite\", \"wb\").write(tflite_model)`\r\n\r\n\r\n\r\nerror occurs, logs are below\r\n###  logs\r\n2018-09-19 15:22:25.875027: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2018-09-19 15:22:25.964421: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:897] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2018-09-19 15:22:25.964839: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1392] Found device 0 with properties: \r\nname: GeForce GTX 1080 major: 6 minor: 1 memoryClockRate(GHz): 1.8225\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 7.92GiB freeMemory: 7.77GiB\r\n2018-09-19 15:22:25.964854: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1471] Adding visible gpu devices: 0\r\n2018-09-19 15:22:26.147714: I tensorflow/core/common_runtime/gpu/gpu_device.cc:952] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-09-19 15:22:26.147746: I tensorflow/core/common_runtime/gpu/gpu_device.cc:958]      0 \r\n2018-09-19 15:22:26.147752: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   N \r\n2018-09-19 15:22:26.147938: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1084] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7502 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 10, in <module>\r\n    input_arrays = converter.get_input_arrays()\r\nAttributeError: 'TocoConverter' object has no attribute 'get_input_arrays'\r\n\r\n\r\nwhat should I do?\r\n\r\n\r\n"}
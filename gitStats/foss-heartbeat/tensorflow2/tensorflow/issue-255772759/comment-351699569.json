{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/351699569", "html_url": "https://github.com/tensorflow/tensorflow/issues/12859#issuecomment-351699569", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12859", "id": 351699569, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTY5OTU2OQ==", "user": {"login": "maxfiedler", "id": 4192637, "node_id": "MDQ6VXNlcjQxOTI2Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/4192637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxfiedler", "html_url": "https://github.com/maxfiedler", "followers_url": "https://api.github.com/users/maxfiedler/followers", "following_url": "https://api.github.com/users/maxfiedler/following{/other_user}", "gists_url": "https://api.github.com/users/maxfiedler/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxfiedler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxfiedler/subscriptions", "organizations_url": "https://api.github.com/users/maxfiedler/orgs", "repos_url": "https://api.github.com/users/maxfiedler/repos", "events_url": "https://api.github.com/users/maxfiedler/events{/privacy}", "received_events_url": "https://api.github.com/users/maxfiedler/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-14T12:38:02Z", "updated_at": "2017-12-14T12:38:02Z", "author_association": "NONE", "body_html": "<p>So, the problem is that the graph_def contains the <strong>content</strong> of the tf.Dataset instances that I build with the <code>.from_tensor_slices(array of file-path-strings)</code> method.<br>\nI assume, this is not the intended behavior of the tf.Dataset and Iterator API. Is this a bug or is there something to watch out for while constructing the tf.Dataset instances? (e.g. Do Not directly pass numpy arrays to <code>from_tensor_slices()</code> but create <code>tf.constants</code> from them first?)<br>\nBelow, as an example a few lines of the <code>graph.pbtxt</code> file storing my ResNet implementation using Imagenet</p>\n<pre><code>node {\n  name: \"tensors/component_0\"\n  op: \"Const\"\n  device: \"/device:CPU:0\"\n  attr {\n    key: \"_output_shapes\"\n    value {\n      list {\n        shape {\n          dim {\n            size: 1281167\n          }\n        }\n      }\n    }\n  }\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"value\"\n    value {\n      tensor {\n        dtype: DT_STRING\n        tensor_shape {\n          dim {\n            size: 1281167\n          }\n        }\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03042490/n03042490_4061.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02110063/n02110063_5748.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02113624/n02113624_695.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02804610/n02804610_19564.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02979186/n02979186_4284.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01641577/n01641577_17952.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02692877/n02692877_28505.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03777568/n03777568_9134.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01530575/n01530575_1008.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03733281/n03733281_42923.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03345487/n03345487_16827.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03697007/n03697007_15122.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02088466/n02088466_9046.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02655020/n02655020_8269.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01984695/n01984695_11124.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03781244/n03781244_12596.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03109150/n03109150_25698.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02119022/n02119022_12055.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03680355/n03680355_4881.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03742115/n03742115_12877.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02128925/n02128925_3865.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n13044778/n13044778_1545.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02396427/n02396427_29936.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02104365/n02104365_7290.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03637318/n03637318_7028.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01774384/n01774384_17819.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02782093/n02782093_2885.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02804414/n02804414_4313.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n04026417/n04026417_9113.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02110341/n02110341_2431.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02442845/n02442845_5329.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07579787/n07579787_3848.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07753113/n07753113_4663.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01914609/n01914609_17098.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07711569/n07711569_3906.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03956157/n03956157_13205.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02443114/n02443114_38892.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03908714/n03908714_2272.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03394916/n03394916_54636.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01601694/n01601694_519.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03450230/n03450230_11239.JPEG\"\n</code></pre>", "body_text": "So, the problem is that the graph_def contains the content of the tf.Dataset instances that I build with the .from_tensor_slices(array of file-path-strings) method.\nI assume, this is not the intended behavior of the tf.Dataset and Iterator API. Is this a bug or is there something to watch out for while constructing the tf.Dataset instances? (e.g. Do Not directly pass numpy arrays to from_tensor_slices() but create tf.constants from them first?)\nBelow, as an example a few lines of the graph.pbtxt file storing my ResNet implementation using Imagenet\nnode {\n  name: \"tensors/component_0\"\n  op: \"Const\"\n  device: \"/device:CPU:0\"\n  attr {\n    key: \"_output_shapes\"\n    value {\n      list {\n        shape {\n          dim {\n            size: 1281167\n          }\n        }\n      }\n    }\n  }\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"value\"\n    value {\n      tensor {\n        dtype: DT_STRING\n        tensor_shape {\n          dim {\n            size: 1281167\n          }\n        }\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03042490/n03042490_4061.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02110063/n02110063_5748.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02113624/n02113624_695.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02804610/n02804610_19564.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02979186/n02979186_4284.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01641577/n01641577_17952.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02692877/n02692877_28505.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03777568/n03777568_9134.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01530575/n01530575_1008.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03733281/n03733281_42923.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03345487/n03345487_16827.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03697007/n03697007_15122.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02088466/n02088466_9046.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02655020/n02655020_8269.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01984695/n01984695_11124.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03781244/n03781244_12596.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03109150/n03109150_25698.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02119022/n02119022_12055.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03680355/n03680355_4881.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03742115/n03742115_12877.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02128925/n02128925_3865.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n13044778/n13044778_1545.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02396427/n02396427_29936.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02104365/n02104365_7290.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03637318/n03637318_7028.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01774384/n01774384_17819.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02782093/n02782093_2885.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02804414/n02804414_4313.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n04026417/n04026417_9113.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02110341/n02110341_2431.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02442845/n02442845_5329.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07579787/n07579787_3848.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07753113/n07753113_4663.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01914609/n01914609_17098.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07711569/n07711569_3906.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03956157/n03956157_13205.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02443114/n02443114_38892.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03908714/n03908714_2272.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03394916/n03394916_54636.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01601694/n01601694_519.JPEG\"\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03450230/n03450230_11239.JPEG\"", "body": "So, the problem is that the graph_def contains the **content** of the tf.Dataset instances that I build with the `.from_tensor_slices(array of file-path-strings)` method.\r\nI assume, this is not the intended behavior of the tf.Dataset and Iterator API. Is this a bug or is there something to watch out for while constructing the tf.Dataset instances? (e.g. Do Not directly pass numpy arrays to `from_tensor_slices()` but create `tf.constants` from them first?)\r\nBelow, as an example a few lines of the `graph.pbtxt` file storing my ResNet implementation using Imagenet\r\n```\r\nnode {\r\n  name: \"tensors/component_0\"\r\n  op: \"Const\"\r\n  device: \"/device:CPU:0\"\r\n  attr {\r\n    key: \"_output_shapes\"\r\n    value {\r\n      list {\r\n        shape {\r\n          dim {\r\n            size: 1281167\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  attr {\r\n    key: \"dtype\"\r\n    value {\r\n      type: DT_STRING\r\n    }\r\n  }\r\n  attr {\r\n    key: \"value\"\r\n    value {\r\n      tensor {\r\n        dtype: DT_STRING\r\n        tensor_shape {\r\n          dim {\r\n            size: 1281167\r\n          }\r\n        }\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03042490/n03042490_4061.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02110063/n02110063_5748.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02113624/n02113624_695.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02804610/n02804610_19564.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02979186/n02979186_4284.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01641577/n01641577_17952.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02692877/n02692877_28505.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03777568/n03777568_9134.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01530575/n01530575_1008.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03733281/n03733281_42923.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03345487/n03345487_16827.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03697007/n03697007_15122.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02088466/n02088466_9046.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02655020/n02655020_8269.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01984695/n01984695_11124.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03781244/n03781244_12596.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03109150/n03109150_25698.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02119022/n02119022_12055.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03680355/n03680355_4881.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03742115/n03742115_12877.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02128925/n02128925_3865.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n13044778/n13044778_1545.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02396427/n02396427_29936.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02104365/n02104365_7290.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03637318/n03637318_7028.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01774384/n01774384_17819.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02782093/n02782093_2885.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02804414/n02804414_4313.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n04026417/n04026417_9113.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02110341/n02110341_2431.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02442845/n02442845_5329.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07579787/n07579787_3848.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07753113/n07753113_4663.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01914609/n01914609_17098.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n07711569/n07711569_3906.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03956157/n03956157_13205.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n02443114/n02443114_38892.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03908714/n03908714_2272.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03394916/n03394916_54636.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n01601694/n01601694_519.JPEG\"\r\n        string_val: \"/mnt/extra_storage/datasets/ILSVRC/Data/CLS-LOC/train/n03450230/n03450230_11239.JPEG\"\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21088", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21088/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21088/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21088/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21088", "id": 344004382, "node_id": "MDU6SXNzdWUzNDQwMDQzODI=", "number": 21088, "title": "3*cycle_length readers are created when using tf.data.Dataset? ", "user": {"login": "Jar7", "id": 6380445, "node_id": "MDQ6VXNlcjYzODA0NDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/6380445?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jar7", "html_url": "https://github.com/Jar7", "followers_url": "https://api.github.com/users/Jar7/followers", "following_url": "https://api.github.com/users/Jar7/following{/other_user}", "gists_url": "https://api.github.com/users/Jar7/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jar7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jar7/subscriptions", "organizations_url": "https://api.github.com/users/Jar7/orgs", "repos_url": "https://api.github.com/users/Jar7/repos", "events_url": "https://api.github.com/users/Jar7/events{/privacy}", "received_events_url": "https://api.github.com/users/Jar7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-24T11:55:08Z", "updated_at": "2018-07-25T11:32:22Z", "closed_at": "2018-07-24T14:36:56Z", "author_association": "NONE", "body_html": "<p>Hello, I am creating a tensorflow dataset using the following code.</p>\n<pre><code>files = 'hdfs://default/testset/*'\nds = tf.data.Dataset.list_files(files)\nds = ds.apply(interleave_ops.parallel_interleave(tf.data.TextLineDataset, cycle_length=1))\nds = ds.shuffle(buffer_size=10000)\nds = ds.map(parse_line)\nds = ds.repeat()\nds = ds.batch(128)\nds = ds.prefetch(1)\niterator = ds.make_one_shot_iterator()\nnext_element = iterator.get_next()\n</code></pre>\n<p>Since the first line of each file is an empty line, I can notice it read 3*cycle_length(here cycle_length=1) files at the beginning from the the following output. After that, it still read files in order(not recurrently).</p>\n<pre><code>18/07/24 11:07:44 WARN hdfs.DFSClient: zero\n18/07/24 11:07:44 WARN hdfs.DFSClient: zero\n18/07/24 11:07:44 WARN hdfs.DFSClient: zero\n</code></pre>\n<p>I could not find a argument whose default value is 3. Does anyone know why it is 3? Thank you.</p>", "body_text": "Hello, I am creating a tensorflow dataset using the following code.\nfiles = 'hdfs://default/testset/*'\nds = tf.data.Dataset.list_files(files)\nds = ds.apply(interleave_ops.parallel_interleave(tf.data.TextLineDataset, cycle_length=1))\nds = ds.shuffle(buffer_size=10000)\nds = ds.map(parse_line)\nds = ds.repeat()\nds = ds.batch(128)\nds = ds.prefetch(1)\niterator = ds.make_one_shot_iterator()\nnext_element = iterator.get_next()\n\nSince the first line of each file is an empty line, I can notice it read 3*cycle_length(here cycle_length=1) files at the beginning from the the following output. After that, it still read files in order(not recurrently).\n18/07/24 11:07:44 WARN hdfs.DFSClient: zero\n18/07/24 11:07:44 WARN hdfs.DFSClient: zero\n18/07/24 11:07:44 WARN hdfs.DFSClient: zero\n\nI could not find a argument whose default value is 3. Does anyone know why it is 3? Thank you.", "body": "Hello, I am creating a tensorflow dataset using the following code.\r\n```\r\nfiles = 'hdfs://default/testset/*'\r\nds = tf.data.Dataset.list_files(files)\r\nds = ds.apply(interleave_ops.parallel_interleave(tf.data.TextLineDataset, cycle_length=1))\r\nds = ds.shuffle(buffer_size=10000)\r\nds = ds.map(parse_line)\r\nds = ds.repeat()\r\nds = ds.batch(128)\r\nds = ds.prefetch(1)\r\niterator = ds.make_one_shot_iterator()\r\nnext_element = iterator.get_next()\r\n```\r\nSince the first line of each file is an empty line, I can notice it read 3*cycle_length(here cycle_length=1) files at the beginning from the the following output. After that, it still read files in order(not recurrently).\r\n```\r\n18/07/24 11:07:44 WARN hdfs.DFSClient: zero\r\n18/07/24 11:07:44 WARN hdfs.DFSClient: zero\r\n18/07/24 11:07:44 WARN hdfs.DFSClient: zero\r\n```\r\nI could not find a argument whose default value is 3. Does anyone know why it is 3? Thank you."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18306", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18306/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18306/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18306/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18306", "id": 312176761, "node_id": "MDU6SXNzdWUzMTIxNzY3NjE=", "number": 18306, "title": "[Go] SIGABRT (Unexpected type: 23) when running go test, using tensorflow > 1.4", "user": {"login": "galeone", "id": 8427788, "node_id": "MDQ6VXNlcjg0Mjc3ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8427788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/galeone", "html_url": "https://github.com/galeone", "followers_url": "https://api.github.com/users/galeone/followers", "following_url": "https://api.github.com/users/galeone/following{/other_user}", "gists_url": "https://api.github.com/users/galeone/gists{/gist_id}", "starred_url": "https://api.github.com/users/galeone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/galeone/subscriptions", "organizations_url": "https://api.github.com/users/galeone/orgs", "repos_url": "https://api.github.com/users/galeone/repos", "events_url": "https://api.github.com/users/galeone/events{/privacy}", "received_events_url": "https://api.github.com/users/galeone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-04-07T06:44:30Z", "updated_at": "2018-04-07T08:28:44Z", "closed_at": "2018-04-07T08:28:44Z", "author_association": "NONE", "body_html": "<p>The same error reported in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"273774119\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14546\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/14546/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/14546\">#14546</a> is still present in every tensorflow release &gt; 1.4 (and master branch).</p>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Archlinux</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4.0</li>\n<li><strong>Python version</strong>: 3.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: Build label: 0.7.0- (@non-git)</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: gcc-6</li>\n<li><strong>CUDA/cuDNN version</strong>: CUDA 9 / cuDNN 7</li>\n<li><strong>GPU model and memory</strong>: Dual Nvidia 1080 Ti</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<pre><code>go test github.com/tensorflow/tensorflow/tensorflow/go\n</code></pre>\n<h3>Describe the problem</h3>\n<p>I have build tensorflow with CUDA support. Since Go requires the C library, I built <code>libtensorflow.so</code> and <code>libtensorflow_framework.so</code>, with:</p>\n<pre><code>bazel build //tensorflow:libtensorflow_framework.so\nbazel build //tensorflow:libtensorflow.so\n</code></pre>\n<p>I updated <code>LD_LIBRARY_PATH</code> accordingly:</p>\n<div class=\"highlight highlight-source-shell\"><pre>TENSORFLOW_LIBLIB=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-smi\">${HOME}</span>/sources/tensorflow/bazel-bin/tensorflow/<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> LD_LIBRARY_PATH=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-smi\">$LD_LIBRARY_PATH</span>:/opt/cuda/lib64:/opt/cuda/extras/CUPTI/lib64:<span class=\"pl-smi\">${TENSORFLOW_LIBLIB}</span><span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> LIBRARY_PATH=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-smi\">${TENSORFLOW_LIBLIB}</span>:<span class=\"pl-smi\">${LIBRARY_PATH}</span><span class=\"pl-pds\">\"</span></span></pre></div>\n<p>I can now go get tensorflow without problems, I can hence compile it and use the <code>-ltensorflow</code> linker flag.</p>\n<p>When I run <code>go test</code> on the tensorflow package, the following error (<code>tensorflow/core/framework/tensor.cc:822] Unexpected type: 23 </code>) is thrown and causes SIGABRT.</p>\n<h3>Source code / logs</h3>\n<p><strong>1.5</strong></p>\n<pre><code>(cv) [pgaleone@persefone go]$ git checkout r1.5\nSwitched to branch 'r1.5'\nYour branch is up to date with 'origin/r1.5'.\n(cv) [pgaleone@persefone go]$ go test\n2018-04-07 08:37:06.625482: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\nSIGABRT: abort\nPC=0x7f82afedd860 m=8 sigcode=18446744073709551610\n\ngoroutine 0 [idle]:\nruntime: unknown pc 0x7f82afedd860\nstack: frame={sp:0x7f82937f5880, fp:0x0} stack=[0x7f8292ff61d0,0x7f82937f5dd0)\n00007f82937f5780:  0000000000000000  0000006e0000005b \n00007f82937f5790:  0000000000000000  000000770000007c \n00007f82937f57a0:  000000000000001b  00007f827c000020 \n00007f82937f57b0:  0000000000000014  fffffffffffffef8 \n00007f82937f57c0:  00007f827c00822d  0000000000000003 \n00007f82937f57d0:  00007f827c006940  00007f82aff2b47a \n00007f82937f57e0:  00007f827c0052b0  00007f827c0052c1 \n00007f82937f57f0:  000000000000000d  00007f82aff5cdc2 \n00007f82937f5800:  00007f82b025b350  0000000000000001 \n00007f82937f5810:  0000000000000000  00000000000000ac \n00007f82937f5820:  00007f82b025b350  00007f82aff5de29 \n00007f82937f5830:  0000000000000001  ffffffff00000008 \n00007f82937f5840:  01000000004d1d96  0000000000000011 \n00007f82937f5850:  0000000000000008  0000000000000008 \n00007f82937f5860:  00000000000006b8  00000000000006b8 \n00007f82937f5870:  00007f82937f5900  0000000000000000 \n00007f82937f5880: &lt;0000000000000000  0000000000000000 \n00007f82937f5890:  0800000000000000  0000000008000000 \n00007f82937f58a0:  08000000ae000000  0000000011000000 \n00007f82937f58b0:  0000000000000802  000000000076074b \n00007f82937f58c0:  0000000000000003  a56bbb4077756a00 \n00007f82937f58d0:  0000000000000000  00007f82937f5ae0 \n00007f82937f58e0:  00007f82937f5a50  00007f82937f5a70 \n00007f82937f58f0:  0000000000098b4a  00007f82937f5a20 \n00007f82937f5900:  fffffffe7fffffff  ffffffffffffffff \n00007f82937f5910:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5920:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5930:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5940:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5950:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5960:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5970:  ffffffffffffffff  ffffffffffffffff \nruntime: unknown pc 0x7f82afedd860\nstack: frame={sp:0x7f82937f5880, fp:0x0} stack=[0x7f8292ff61d0,0x7f82937f5dd0)\n00007f82937f5780:  0000000000000000  0000006e0000005b \n00007f82937f5790:  0000000000000000  000000770000007c \n00007f82937f57a0:  000000000000001b  00007f827c000020 \n00007f82937f57b0:  0000000000000014  fffffffffffffef8 \n00007f82937f57c0:  00007f827c00822d  0000000000000003 \n00007f82937f57d0:  00007f827c006940  00007f82aff2b47a \n00007f82937f57e0:  00007f827c0052b0  00007f827c0052c1 \n00007f82937f57f0:  000000000000000d  00007f82aff5cdc2 \n00007f82937f5800:  00007f82b025b350  0000000000000001 \n00007f82937f5810:  0000000000000000  00000000000000ac \n00007f82937f5820:  00007f82b025b350  00007f82aff5de29 \n00007f82937f5830:  0000000000000001  ffffffff00000008 \n00007f82937f5840:  01000000004d1d96  0000000000000011 \n00007f82937f5850:  0000000000000008  0000000000000008 \n00007f82937f5860:  00000000000006b8  00000000000006b8 \n00007f82937f5870:  00007f82937f5900  0000000000000000 \n00007f82937f5880: &lt;0000000000000000  0000000000000000 \n00007f82937f5890:  0800000000000000  0000000008000000 \n00007f82937f58a0:  08000000ae000000  0000000011000000 \n00007f82937f58b0:  0000000000000802  000000000076074b \n00007f82937f58c0:  0000000000000003  a56bbb4077756a00 \n00007f82937f58d0:  0000000000000000  00007f82937f5ae0 \n00007f82937f58e0:  00007f82937f5a50  00007f82937f5a70 \n00007f82937f58f0:  0000000000098b4a  00007f82937f5a20 \n00007f82937f5900:  fffffffe7fffffff  ffffffffffffffff \n00007f82937f5910:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5920:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5930:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5940:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5950:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5960:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5970:  ffffffffffffffff  ffffffffffffffff \n\ngoroutine 30 [syscall]:\nruntime.cgocall(0x6524d0, 0xc42005b8d0, 0xc42005b8d8)\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc42005b8a0 sp=0xc42005b868 pc=0x405454\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f827c0043b0, 0x7f827c005190, 0x7f827c005280, 0x7f827c006650)\n\t_cgo_gotypes.go:921 +0x45 fp=0xc42005b8d0 sp=0xc42005b8a0 pc=0x522ac5\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f827c0043b0, 0x7f827c005190, 0x7f827c005280, 0x7f827c006650)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:306 +0xce fp=0xc42005b908 sp=0xc42005b8d0 pc=0x52e4ae\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f827c0043b0, 0xc42000e0c0, 0x6ed34c, 0x5, 0x6b21a0, 0xc420112500, 0x0, 0x0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:306 +0x1006 fp=0xc42005bad8 sp=0xc42005b908 pc=0x5255f6\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc42000e080, 0x6ed1a3, 0x5, 0xc42001a7e8, 0x6, 0x0, 0x0, 0x0, 0xc42005bcb0, 0xc420047cf0, ...)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:209 +0x49d fp=0xc42005bc30 sp=0xc42005bad8 pc=0x52443d\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc42000e080, 0xc42001a7e8, 0x6, 0x67d160, 0xc420112340, 0xc42001a7e8, 0x6, 0x7ad090, 0x7ad0d0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x247 fp=0xc42005be40 sp=0xc42005bc30 pc=0x51fb77\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc420128780)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc42005bfa8 sp=0xc42005be40 pc=0x52bbc1\ntesting.tRunner(0xc420128780, 0xc4201124c0)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc42005bfd0 sp=0xc42005bfa8 pc=0x4ce240\nruntime.goexit()\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc42005bfd8 sp=0xc42005bfd0 pc=0x45cf41\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\ngoroutine 1 [chan receive]:\ntesting.(*T).Run(0xc4201283c0, 0x6f3637, 0x1a, 0x7013f0, 0x477b01)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ntesting.runTests.func1(0xc420128000)\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\ntesting.tRunner(0xc420128000, 0xc42006bdf8)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ntesting.runTests(0xc420112260, 0xa49460, 0x11, 0x11, 0x413b29)\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\ntesting.(*M).Run(0xc420126000, 0x0)\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\nmain.main()\n\t_testmain.go:82 +0x151\n\ngoroutine 26 [chan receive]:\ntesting.(*T).Run(0xc420128780, 0xc420018420, 0x13, 0xc4201124c0, 0x2)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc4201283c0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\ntesting.tRunner(0xc4201283c0, 0x7013f0)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\nrax    0x0\nrbx    0x6\nrcx    0x7f82afedd860\nrdx    0x0\nrdi    0x2\nrsi    0x7f82937f5880\nrbp    0x7f82937f5ad0\nrsp    0x7f82937f5880\nr8     0x0\nr9     0x7f82937f5880\nr10    0x8\nr11    0x246\nr12    0x7f82937f5d10\nr13    0x5\nr14    0x7f827c005190\nr15    0x7f82937f5d10\nrip    0x7f82afedd860\nrflags 0x246\ncs     0x33\nfs     0x0\ngs     0x0\nexit status 2\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.081s\n</code></pre>\n<p><strong>1.6</strong></p>\n<pre><code>(cv) [pgaleone@persefone go]$ git checkout r1.6\nSwitched to branch 'r1.6'\nYour branch is up to date with 'origin/r1.6'.\n(cv) [pgaleone@persefone go]$ go test\n2018-04-07 08:37:33.608147: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\nSIGABRT: abort\nPC=0x7f884c725860 m=7 sigcode=18446744073709551610\n\ngoroutine 0 [idle]:\nruntime: unknown pc 0x7f884c725860\nstack: frame={sp:0x7f88307f7880, fp:0x0} stack=[0x7f882fff81d0,0x7f88307f7dd0)\n00007f88307f7780:  0000000000000000  0000006e0000005b \n00007f88307f7790:  0000000000000000  000000770000007c \n00007f88307f77a0:  000000000000001b  00007f8828000020 \n00007f88307f77b0:  0000000000000014  fffffffffffffef8 \n00007f88307f77c0:  00007f882800a19d  0000000000000003 \n00007f88307f77d0:  00007f88280088b0  00007f884c77347a \n00007f88307f77e0:  00007f8828007220  00007f8828007231 \n00007f88307f77f0:  000000000000000d  00007f884c7a4dc2 \n00007f88307f7800:  00007f884caa3350  0000000000000001 \n00007f88307f7810:  0000000000000000  00000000000000ac \n00007f88307f7820:  00007f884caa3350  00007f884c7a5e29 \n00007f88307f7830:  0000000000000001  ffffffff00000008 \n00007f88307f7840:  01000000004d2166  0000000000000011 \n00007f88307f7850:  0000000000000008  0000000000000008 \n00007f88307f7860:  00000000000006b8  00000000000006b8 \n00007f88307f7870:  00007f88307f7900  0000000000000000 \n00007f88307f7880: &lt;0000000000000000  0000000000000000 \n00007f88307f7890:  0800000000000000  0000000008000000 \n00007f88307f78a0:  08000000ae000000  0000000011000000 \n00007f88307f78b0:  0000000000000802  000000000076074b \n00007f88307f78c0:  0000000000000003  61e47ad4235a2e00 \n00007f88307f78d0:  0000000000000000  00007f88307f7ae0 \n00007f88307f78e0:  00007f88307f7a50  00007f88307f7a70 \n00007f88307f78f0:  0000000000094793  00007f88307f7a20 \n00007f88307f7900:  fffffffe7fffffff  ffffffffffffffff \n00007f88307f7910:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7920:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7930:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7940:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7950:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7960:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7970:  ffffffffffffffff  ffffffffffffffff \nruntime: unknown pc 0x7f884c725860\nstack: frame={sp:0x7f88307f7880, fp:0x0} stack=[0x7f882fff81d0,0x7f88307f7dd0)\n00007f88307f7780:  0000000000000000  0000006e0000005b \n00007f88307f7790:  0000000000000000  000000770000007c \n00007f88307f77a0:  000000000000001b  00007f8828000020 \n00007f88307f77b0:  0000000000000014  fffffffffffffef8 \n00007f88307f77c0:  00007f882800a19d  0000000000000003 \n00007f88307f77d0:  00007f88280088b0  00007f884c77347a \n00007f88307f77e0:  00007f8828007220  00007f8828007231 \n00007f88307f77f0:  000000000000000d  00007f884c7a4dc2 \n00007f88307f7800:  00007f884caa3350  0000000000000001 \n00007f88307f7810:  0000000000000000  00000000000000ac \n00007f88307f7820:  00007f884caa3350  00007f884c7a5e29 \n00007f88307f7830:  0000000000000001  ffffffff00000008 \n00007f88307f7840:  01000000004d2166  0000000000000011 \n00007f88307f7850:  0000000000000008  0000000000000008 \n00007f88307f7860:  00000000000006b8  00000000000006b8 \n00007f88307f7870:  00007f88307f7900  0000000000000000 \n00007f88307f7880: &lt;0000000000000000  0000000000000000 \n00007f88307f7890:  0800000000000000  0000000008000000 \n00007f88307f78a0:  08000000ae000000  0000000011000000 \n00007f88307f78b0:  0000000000000802  000000000076074b \n00007f88307f78c0:  0000000000000003  61e47ad4235a2e00 \n00007f88307f78d0:  0000000000000000  00007f88307f7ae0 \n00007f88307f78e0:  00007f88307f7a50  00007f88307f7a70 \n00007f88307f78f0:  0000000000094793  00007f88307f7a20 \n00007f88307f7900:  fffffffe7fffffff  ffffffffffffffff \n00007f88307f7910:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7920:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7930:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7940:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7950:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7960:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7970:  ffffffffffffffff  ffffffffffffffff \n\ngoroutine 30 [syscall]:\nruntime.cgocall(0x653f10, 0xc420057898, 0xc4200578a0)\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc420057868 sp=0xc420057830 pc=0x405824\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f8828006320, 0x7f8828007100, 0x7f88280071f0, 0x7f88280085c0)\n\t_cgo_gotypes.go:1024 +0x45 fp=0xc420057898 sp=0xc420057868 pc=0x523695\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f8828006320, 0x7f8828007100, 0x7f88280071f0, 0x7f88280085c0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0xce fp=0xc4200578d0 sp=0xc420057898 pc=0x52f98e\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f8828006320, 0xc4200a60b8, 0x6ef1cc, 0x5, 0x6b3f40, 0xc4201284e0, 0x0, 0x0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0x1006 fp=0xc420057aa0 sp=0xc4200578d0 pc=0x526226\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc4200a6080, 0x6ef023, 0x5, 0xc42001a408, 0x6, 0x0, 0x0, 0x0, 0xc420057c98, 0x0, ...)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:216 +0x4fb fp=0xc420057c00 sp=0xc420057aa0 pc=0x52506b\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc4200a6080, 0xc42001a408, 0x6, 0x67ee40, 0xc420128320, 0xc42001a408, 0x6, 0x7af1f0, 0x7af230)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x271 fp=0xc420057e40 sp=0xc420057c00 pc=0x5201e1\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc420140780)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc420057fa8 sp=0xc420057e40 pc=0x52cff1\ntesting.tRunner(0xc420140780, 0xc4201284a0)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc420057fd0 sp=0xc420057fa8 pc=0x4ce610\nruntime.goexit()\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc420057fd8 sp=0xc420057fd0 pc=0x45d311\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\ngoroutine 1 [chan receive]:\ntesting.(*T).Run(0xc4201403c0, 0x6f54ea, 0x1a, 0x703348, 0x477f01)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ntesting.runTests.func1(0xc420140000)\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\ntesting.tRunner(0xc420140000, 0xc42006bdf8)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ntesting.runTests(0xc420128220, 0xa4c4c0, 0x12, 0x12, 0x413ef9)\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\ntesting.(*M).Run(0xc42013e000, 0x0)\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\nmain.main()\n\t_testmain.go:84 +0x151\n\ngoroutine 26 [chan receive]:\ntesting.(*T).Run(0xc420140780, 0xc4200d22c0, 0x13, 0xc4201284a0, 0x2)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc4201403c0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\ntesting.tRunner(0xc4201403c0, 0x703348)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\nrax    0x0\nrbx    0x6\nrcx    0x7f884c725860\nrdx    0x0\nrdi    0x2\nrsi    0x7f88307f7880\nrbp    0x7f88307f7ad0\nrsp    0x7f88307f7880\nr8     0x0\nr9     0x7f88307f7880\nr10    0x8\nr11    0x246\nr12    0x7f88307f7d10\nr13    0x5\nr14    0x7f8828007100\nr15    0x7f88307f7d10\nrip    0x7f884c725860\nrflags 0x246\ncs     0x33\nfs     0x0\ngs     0x0\nexit status 2\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.082s\n</code></pre>\n<p><strong>1.7</strong></p>\n<pre><code>(cv) [pgaleone@persefone go]$ git checkout r1.7\nSwitched to branch 'r1.7'\nYour branch is up to date with 'origin/r1.7'.\n(cv) [pgaleone@persefone go]$ go test\n2018-04-07 08:38:02.846973: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\nSIGABRT: abort\nPC=0x7f88599b1860 m=7 sigcode=18446744073709551610\n\ngoroutine 0 [idle]:\nruntime: unknown pc 0x7f88599b1860\nstack: frame={sp:0x7f88417f9880, fp:0x0} stack=[0x7f8840ffa1d0,0x7f88417f9dd0)\n00007f88417f9780:  0000000000000000  0000006e0000005b \n00007f88417f9790:  0000000000000000  000000770000007c \n00007f88417f97a0:  000000000000001b  00007f8838000020 \n00007f88417f97b0:  0000000000000014  fffffffffffffef8 \n00007f88417f97c0:  00007f8838009d4d  0000000000000003 \n00007f88417f97d0:  00007f8838008460  00007f88599ff47a \n00007f88417f97e0:  00007f8838006dd0  00007f8838006de1 \n00007f88417f97f0:  000000000000000d  00007f8859a30dc2 \n00007f88417f9800:  00007f8859d2f350  0000000000000001 \n00007f88417f9810:  0000000000000000  00000000000000ac \n00007f88417f9820:  00007f8859d2f350  00007f8859a31e29 \n00007f88417f9830:  0000000000000001  ffffffff00000008 \n00007f88417f9840:  01000000004d2166  0000000000000011 \n00007f88417f9850:  0000000000000008  0000000000000008 \n00007f88417f9860:  00000000000006b8  00000000000006b8 \n00007f88417f9870:  00007f88417f9900  0000000000000000 \n00007f88417f9880: &lt;0000000000000000  0000000000000000 \n00007f88417f9890:  0800000000000000  0000000008000000 \n00007f88417f98a0:  08000000ae000000  0000000011000000 \n00007f88417f98b0:  0000000000000802  000000000076074b \n00007f88417f98c0:  0000000000000003  6b320cc32e502500 \n00007f88417f98d0:  0000000000000000  00007f88417f9ae0 \n00007f88417f98e0:  00007f88417f9a50  00007f88417f9a70 \n00007f88417f98f0:  00000000000cec7d  00007f88417f9a20 \n00007f88417f9900:  fffffffe7fffffff  ffffffffffffffff \n00007f88417f9910:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9920:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9930:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9940:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9950:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9960:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9970:  ffffffffffffffff  ffffffffffffffff \nruntime: unknown pc 0x7f88599b1860\nstack: frame={sp:0x7f88417f9880, fp:0x0} stack=[0x7f8840ffa1d0,0x7f88417f9dd0)\n00007f88417f9780:  0000000000000000  0000006e0000005b \n00007f88417f9790:  0000000000000000  000000770000007c \n00007f88417f97a0:  000000000000001b  00007f8838000020 \n00007f88417f97b0:  0000000000000014  fffffffffffffef8 \n00007f88417f97c0:  00007f8838009d4d  0000000000000003 \n00007f88417f97d0:  00007f8838008460  00007f88599ff47a \n00007f88417f97e0:  00007f8838006dd0  00007f8838006de1 \n00007f88417f97f0:  000000000000000d  00007f8859a30dc2 \n00007f88417f9800:  00007f8859d2f350  0000000000000001 \n00007f88417f9810:  0000000000000000  00000000000000ac \n00007f88417f9820:  00007f8859d2f350  00007f8859a31e29 \n00007f88417f9830:  0000000000000001  ffffffff00000008 \n00007f88417f9840:  01000000004d2166  0000000000000011 \n00007f88417f9850:  0000000000000008  0000000000000008 \n00007f88417f9860:  00000000000006b8  00000000000006b8 \n00007f88417f9870:  00007f88417f9900  0000000000000000 \n00007f88417f9880: &lt;0000000000000000  0000000000000000 \n00007f88417f9890:  0800000000000000  0000000008000000 \n00007f88417f98a0:  08000000ae000000  0000000011000000 \n00007f88417f98b0:  0000000000000802  000000000076074b \n00007f88417f98c0:  0000000000000003  6b320cc32e502500 \n00007f88417f98d0:  0000000000000000  00007f88417f9ae0 \n00007f88417f98e0:  00007f88417f9a50  00007f88417f9a70 \n00007f88417f98f0:  00000000000cec7d  00007f88417f9a20 \n00007f88417f9900:  fffffffe7fffffff  ffffffffffffffff \n00007f88417f9910:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9920:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9930:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9940:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9950:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9960:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9970:  ffffffffffffffff  ffffffffffffffff \n\ngoroutine 24 [syscall]:\nruntime.cgocall(0x653f10, 0xc42005b898, 0xc42005b8a0)\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc42005b868 sp=0xc42005b830 pc=0x405824\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f8838005ed0, 0x7f8838006cb0, 0x7f8838006da0, 0x7f8838008170)\n\t_cgo_gotypes.go:1024 +0x45 fp=0xc42005b898 sp=0xc42005b868 pc=0x523695\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f8838005ed0, 0x7f8838006cb0, 0x7f8838006da0, 0x7f8838008170)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0xce fp=0xc42005b8d0 sp=0xc42005b898 pc=0x52f98e\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f8838005ed0, 0xc42000e0c0, 0x6ef1cc, 0x5, 0x6b3f40, 0xc420104500, 0x0, 0x0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0x1006 fp=0xc42005baa0 sp=0xc42005b8d0 pc=0x526226\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc42000e080, 0x6ef023, 0x5, 0xc42001a808, 0x6, 0x0, 0x0, 0x0, 0xc42005bc98, 0x0, ...)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:216 +0x4fb fp=0xc42005bc00 sp=0xc42005baa0 pc=0x52506b\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc42000e080, 0xc42001a808, 0x6, 0x67ee40, 0xc420104340, 0xc42001a808, 0x6, 0x7af1f0, 0x7af230)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x271 fp=0xc42005be40 sp=0xc42005bc00 pc=0x5201e1\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc42011a780)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc42005bfa8 sp=0xc42005be40 pc=0x52cff1\ntesting.tRunner(0xc42011a780, 0xc4201044c0)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc42005bfd0 sp=0xc42005bfa8 pc=0x4ce610\nruntime.goexit()\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc42005bfd8 sp=0xc42005bfd0 pc=0x45d311\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\ngoroutine 1 [chan receive]:\ntesting.(*T).Run(0xc42011a3c0, 0x6f54ea, 0x1a, 0x703348, 0x477f01)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ntesting.runTests.func1(0xc42011a000)\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\ntesting.tRunner(0xc42011a000, 0xc42006bdf8)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ntesting.runTests(0xc420104260, 0xa4c4c0, 0x12, 0x12, 0x413ef9)\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\ntesting.(*M).Run(0xc420118000, 0x0)\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\nmain.main()\n\t_testmain.go:84 +0x151\n\ngoroutine 20 [chan receive]:\ntesting.(*T).Run(0xc42011a780, 0xc420018420, 0x13, 0xc4201044c0, 0x2)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc42011a3c0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\ntesting.tRunner(0xc42011a3c0, 0x703348)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\nrax    0x0\nrbx    0x6\nrcx    0x7f88599b1860\nrdx    0x0\nrdi    0x2\nrsi    0x7f88417f9880\nrbp    0x7f88417f9ad0\nrsp    0x7f88417f9880\nr8     0x0\nr9     0x7f88417f9880\nr10    0x8\nr11    0x246\nr12    0x7f88417f9d10\nr13    0x5\nr14    0x7f8838006cb0\nr15    0x7f88417f9d10\nrip    0x7f88599b1860\nrflags 0x246\ncs     0x33\nfs     0x0\ngs     0x0\nexit status 2\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.073s\n</code></pre>", "body_text": "The same error reported in #14546 is still present in every tensorflow release > 1.4 (and master branch).\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Archlinux\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.4.0\nPython version: 3.6\nBazel version (if compiling from source): Build label: 0.7.0- (@non-git)\nGCC/Compiler version (if compiling from source): gcc-6\nCUDA/cuDNN version: CUDA 9 / cuDNN 7\nGPU model and memory: Dual Nvidia 1080 Ti\nExact command to reproduce:\n\ngo test github.com/tensorflow/tensorflow/tensorflow/go\n\nDescribe the problem\nI have build tensorflow with CUDA support. Since Go requires the C library, I built libtensorflow.so and libtensorflow_framework.so, with:\nbazel build //tensorflow:libtensorflow_framework.so\nbazel build //tensorflow:libtensorflow.so\n\nI updated LD_LIBRARY_PATH accordingly:\nTENSORFLOW_LIBLIB=\"${HOME}/sources/tensorflow/bazel-bin/tensorflow/\"\nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/opt/cuda/lib64:/opt/cuda/extras/CUPTI/lib64:${TENSORFLOW_LIBLIB}\"\nexport LIBRARY_PATH=\"${TENSORFLOW_LIBLIB}:${LIBRARY_PATH}\"\nI can now go get tensorflow without problems, I can hence compile it and use the -ltensorflow linker flag.\nWhen I run go test on the tensorflow package, the following error (tensorflow/core/framework/tensor.cc:822] Unexpected type: 23 ) is thrown and causes SIGABRT.\nSource code / logs\n1.5\n(cv) [pgaleone@persefone go]$ git checkout r1.5\nSwitched to branch 'r1.5'\nYour branch is up to date with 'origin/r1.5'.\n(cv) [pgaleone@persefone go]$ go test\n2018-04-07 08:37:06.625482: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\nSIGABRT: abort\nPC=0x7f82afedd860 m=8 sigcode=18446744073709551610\n\ngoroutine 0 [idle]:\nruntime: unknown pc 0x7f82afedd860\nstack: frame={sp:0x7f82937f5880, fp:0x0} stack=[0x7f8292ff61d0,0x7f82937f5dd0)\n00007f82937f5780:  0000000000000000  0000006e0000005b \n00007f82937f5790:  0000000000000000  000000770000007c \n00007f82937f57a0:  000000000000001b  00007f827c000020 \n00007f82937f57b0:  0000000000000014  fffffffffffffef8 \n00007f82937f57c0:  00007f827c00822d  0000000000000003 \n00007f82937f57d0:  00007f827c006940  00007f82aff2b47a \n00007f82937f57e0:  00007f827c0052b0  00007f827c0052c1 \n00007f82937f57f0:  000000000000000d  00007f82aff5cdc2 \n00007f82937f5800:  00007f82b025b350  0000000000000001 \n00007f82937f5810:  0000000000000000  00000000000000ac \n00007f82937f5820:  00007f82b025b350  00007f82aff5de29 \n00007f82937f5830:  0000000000000001  ffffffff00000008 \n00007f82937f5840:  01000000004d1d96  0000000000000011 \n00007f82937f5850:  0000000000000008  0000000000000008 \n00007f82937f5860:  00000000000006b8  00000000000006b8 \n00007f82937f5870:  00007f82937f5900  0000000000000000 \n00007f82937f5880: <0000000000000000  0000000000000000 \n00007f82937f5890:  0800000000000000  0000000008000000 \n00007f82937f58a0:  08000000ae000000  0000000011000000 \n00007f82937f58b0:  0000000000000802  000000000076074b \n00007f82937f58c0:  0000000000000003  a56bbb4077756a00 \n00007f82937f58d0:  0000000000000000  00007f82937f5ae0 \n00007f82937f58e0:  00007f82937f5a50  00007f82937f5a70 \n00007f82937f58f0:  0000000000098b4a  00007f82937f5a20 \n00007f82937f5900:  fffffffe7fffffff  ffffffffffffffff \n00007f82937f5910:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5920:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5930:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5940:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5950:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5960:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5970:  ffffffffffffffff  ffffffffffffffff \nruntime: unknown pc 0x7f82afedd860\nstack: frame={sp:0x7f82937f5880, fp:0x0} stack=[0x7f8292ff61d0,0x7f82937f5dd0)\n00007f82937f5780:  0000000000000000  0000006e0000005b \n00007f82937f5790:  0000000000000000  000000770000007c \n00007f82937f57a0:  000000000000001b  00007f827c000020 \n00007f82937f57b0:  0000000000000014  fffffffffffffef8 \n00007f82937f57c0:  00007f827c00822d  0000000000000003 \n00007f82937f57d0:  00007f827c006940  00007f82aff2b47a \n00007f82937f57e0:  00007f827c0052b0  00007f827c0052c1 \n00007f82937f57f0:  000000000000000d  00007f82aff5cdc2 \n00007f82937f5800:  00007f82b025b350  0000000000000001 \n00007f82937f5810:  0000000000000000  00000000000000ac \n00007f82937f5820:  00007f82b025b350  00007f82aff5de29 \n00007f82937f5830:  0000000000000001  ffffffff00000008 \n00007f82937f5840:  01000000004d1d96  0000000000000011 \n00007f82937f5850:  0000000000000008  0000000000000008 \n00007f82937f5860:  00000000000006b8  00000000000006b8 \n00007f82937f5870:  00007f82937f5900  0000000000000000 \n00007f82937f5880: <0000000000000000  0000000000000000 \n00007f82937f5890:  0800000000000000  0000000008000000 \n00007f82937f58a0:  08000000ae000000  0000000011000000 \n00007f82937f58b0:  0000000000000802  000000000076074b \n00007f82937f58c0:  0000000000000003  a56bbb4077756a00 \n00007f82937f58d0:  0000000000000000  00007f82937f5ae0 \n00007f82937f58e0:  00007f82937f5a50  00007f82937f5a70 \n00007f82937f58f0:  0000000000098b4a  00007f82937f5a20 \n00007f82937f5900:  fffffffe7fffffff  ffffffffffffffff \n00007f82937f5910:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5920:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5930:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5940:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5950:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5960:  ffffffffffffffff  ffffffffffffffff \n00007f82937f5970:  ffffffffffffffff  ffffffffffffffff \n\ngoroutine 30 [syscall]:\nruntime.cgocall(0x6524d0, 0xc42005b8d0, 0xc42005b8d8)\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc42005b8a0 sp=0xc42005b868 pc=0x405454\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f827c0043b0, 0x7f827c005190, 0x7f827c005280, 0x7f827c006650)\n\t_cgo_gotypes.go:921 +0x45 fp=0xc42005b8d0 sp=0xc42005b8a0 pc=0x522ac5\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f827c0043b0, 0x7f827c005190, 0x7f827c005280, 0x7f827c006650)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:306 +0xce fp=0xc42005b908 sp=0xc42005b8d0 pc=0x52e4ae\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f827c0043b0, 0xc42000e0c0, 0x6ed34c, 0x5, 0x6b21a0, 0xc420112500, 0x0, 0x0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:306 +0x1006 fp=0xc42005bad8 sp=0xc42005b908 pc=0x5255f6\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc42000e080, 0x6ed1a3, 0x5, 0xc42001a7e8, 0x6, 0x0, 0x0, 0x0, 0xc42005bcb0, 0xc420047cf0, ...)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:209 +0x49d fp=0xc42005bc30 sp=0xc42005bad8 pc=0x52443d\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc42000e080, 0xc42001a7e8, 0x6, 0x67d160, 0xc420112340, 0xc42001a7e8, 0x6, 0x7ad090, 0x7ad0d0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x247 fp=0xc42005be40 sp=0xc42005bc30 pc=0x51fb77\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc420128780)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc42005bfa8 sp=0xc42005be40 pc=0x52bbc1\ntesting.tRunner(0xc420128780, 0xc4201124c0)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc42005bfd0 sp=0xc42005bfa8 pc=0x4ce240\nruntime.goexit()\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc42005bfd8 sp=0xc42005bfd0 pc=0x45cf41\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\ngoroutine 1 [chan receive]:\ntesting.(*T).Run(0xc4201283c0, 0x6f3637, 0x1a, 0x7013f0, 0x477b01)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ntesting.runTests.func1(0xc420128000)\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\ntesting.tRunner(0xc420128000, 0xc42006bdf8)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ntesting.runTests(0xc420112260, 0xa49460, 0x11, 0x11, 0x413b29)\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\ntesting.(*M).Run(0xc420126000, 0x0)\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\nmain.main()\n\t_testmain.go:82 +0x151\n\ngoroutine 26 [chan receive]:\ntesting.(*T).Run(0xc420128780, 0xc420018420, 0x13, 0xc4201124c0, 0x2)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc4201283c0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\ntesting.tRunner(0xc4201283c0, 0x7013f0)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\nrax    0x0\nrbx    0x6\nrcx    0x7f82afedd860\nrdx    0x0\nrdi    0x2\nrsi    0x7f82937f5880\nrbp    0x7f82937f5ad0\nrsp    0x7f82937f5880\nr8     0x0\nr9     0x7f82937f5880\nr10    0x8\nr11    0x246\nr12    0x7f82937f5d10\nr13    0x5\nr14    0x7f827c005190\nr15    0x7f82937f5d10\nrip    0x7f82afedd860\nrflags 0x246\ncs     0x33\nfs     0x0\ngs     0x0\nexit status 2\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.081s\n\n1.6\n(cv) [pgaleone@persefone go]$ git checkout r1.6\nSwitched to branch 'r1.6'\nYour branch is up to date with 'origin/r1.6'.\n(cv) [pgaleone@persefone go]$ go test\n2018-04-07 08:37:33.608147: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\nSIGABRT: abort\nPC=0x7f884c725860 m=7 sigcode=18446744073709551610\n\ngoroutine 0 [idle]:\nruntime: unknown pc 0x7f884c725860\nstack: frame={sp:0x7f88307f7880, fp:0x0} stack=[0x7f882fff81d0,0x7f88307f7dd0)\n00007f88307f7780:  0000000000000000  0000006e0000005b \n00007f88307f7790:  0000000000000000  000000770000007c \n00007f88307f77a0:  000000000000001b  00007f8828000020 \n00007f88307f77b0:  0000000000000014  fffffffffffffef8 \n00007f88307f77c0:  00007f882800a19d  0000000000000003 \n00007f88307f77d0:  00007f88280088b0  00007f884c77347a \n00007f88307f77e0:  00007f8828007220  00007f8828007231 \n00007f88307f77f0:  000000000000000d  00007f884c7a4dc2 \n00007f88307f7800:  00007f884caa3350  0000000000000001 \n00007f88307f7810:  0000000000000000  00000000000000ac \n00007f88307f7820:  00007f884caa3350  00007f884c7a5e29 \n00007f88307f7830:  0000000000000001  ffffffff00000008 \n00007f88307f7840:  01000000004d2166  0000000000000011 \n00007f88307f7850:  0000000000000008  0000000000000008 \n00007f88307f7860:  00000000000006b8  00000000000006b8 \n00007f88307f7870:  00007f88307f7900  0000000000000000 \n00007f88307f7880: <0000000000000000  0000000000000000 \n00007f88307f7890:  0800000000000000  0000000008000000 \n00007f88307f78a0:  08000000ae000000  0000000011000000 \n00007f88307f78b0:  0000000000000802  000000000076074b \n00007f88307f78c0:  0000000000000003  61e47ad4235a2e00 \n00007f88307f78d0:  0000000000000000  00007f88307f7ae0 \n00007f88307f78e0:  00007f88307f7a50  00007f88307f7a70 \n00007f88307f78f0:  0000000000094793  00007f88307f7a20 \n00007f88307f7900:  fffffffe7fffffff  ffffffffffffffff \n00007f88307f7910:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7920:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7930:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7940:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7950:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7960:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7970:  ffffffffffffffff  ffffffffffffffff \nruntime: unknown pc 0x7f884c725860\nstack: frame={sp:0x7f88307f7880, fp:0x0} stack=[0x7f882fff81d0,0x7f88307f7dd0)\n00007f88307f7780:  0000000000000000  0000006e0000005b \n00007f88307f7790:  0000000000000000  000000770000007c \n00007f88307f77a0:  000000000000001b  00007f8828000020 \n00007f88307f77b0:  0000000000000014  fffffffffffffef8 \n00007f88307f77c0:  00007f882800a19d  0000000000000003 \n00007f88307f77d0:  00007f88280088b0  00007f884c77347a \n00007f88307f77e0:  00007f8828007220  00007f8828007231 \n00007f88307f77f0:  000000000000000d  00007f884c7a4dc2 \n00007f88307f7800:  00007f884caa3350  0000000000000001 \n00007f88307f7810:  0000000000000000  00000000000000ac \n00007f88307f7820:  00007f884caa3350  00007f884c7a5e29 \n00007f88307f7830:  0000000000000001  ffffffff00000008 \n00007f88307f7840:  01000000004d2166  0000000000000011 \n00007f88307f7850:  0000000000000008  0000000000000008 \n00007f88307f7860:  00000000000006b8  00000000000006b8 \n00007f88307f7870:  00007f88307f7900  0000000000000000 \n00007f88307f7880: <0000000000000000  0000000000000000 \n00007f88307f7890:  0800000000000000  0000000008000000 \n00007f88307f78a0:  08000000ae000000  0000000011000000 \n00007f88307f78b0:  0000000000000802  000000000076074b \n00007f88307f78c0:  0000000000000003  61e47ad4235a2e00 \n00007f88307f78d0:  0000000000000000  00007f88307f7ae0 \n00007f88307f78e0:  00007f88307f7a50  00007f88307f7a70 \n00007f88307f78f0:  0000000000094793  00007f88307f7a20 \n00007f88307f7900:  fffffffe7fffffff  ffffffffffffffff \n00007f88307f7910:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7920:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7930:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7940:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7950:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7960:  ffffffffffffffff  ffffffffffffffff \n00007f88307f7970:  ffffffffffffffff  ffffffffffffffff \n\ngoroutine 30 [syscall]:\nruntime.cgocall(0x653f10, 0xc420057898, 0xc4200578a0)\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc420057868 sp=0xc420057830 pc=0x405824\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f8828006320, 0x7f8828007100, 0x7f88280071f0, 0x7f88280085c0)\n\t_cgo_gotypes.go:1024 +0x45 fp=0xc420057898 sp=0xc420057868 pc=0x523695\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f8828006320, 0x7f8828007100, 0x7f88280071f0, 0x7f88280085c0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0xce fp=0xc4200578d0 sp=0xc420057898 pc=0x52f98e\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f8828006320, 0xc4200a60b8, 0x6ef1cc, 0x5, 0x6b3f40, 0xc4201284e0, 0x0, 0x0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0x1006 fp=0xc420057aa0 sp=0xc4200578d0 pc=0x526226\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc4200a6080, 0x6ef023, 0x5, 0xc42001a408, 0x6, 0x0, 0x0, 0x0, 0xc420057c98, 0x0, ...)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:216 +0x4fb fp=0xc420057c00 sp=0xc420057aa0 pc=0x52506b\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc4200a6080, 0xc42001a408, 0x6, 0x67ee40, 0xc420128320, 0xc42001a408, 0x6, 0x7af1f0, 0x7af230)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x271 fp=0xc420057e40 sp=0xc420057c00 pc=0x5201e1\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc420140780)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc420057fa8 sp=0xc420057e40 pc=0x52cff1\ntesting.tRunner(0xc420140780, 0xc4201284a0)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc420057fd0 sp=0xc420057fa8 pc=0x4ce610\nruntime.goexit()\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc420057fd8 sp=0xc420057fd0 pc=0x45d311\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\ngoroutine 1 [chan receive]:\ntesting.(*T).Run(0xc4201403c0, 0x6f54ea, 0x1a, 0x703348, 0x477f01)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ntesting.runTests.func1(0xc420140000)\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\ntesting.tRunner(0xc420140000, 0xc42006bdf8)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ntesting.runTests(0xc420128220, 0xa4c4c0, 0x12, 0x12, 0x413ef9)\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\ntesting.(*M).Run(0xc42013e000, 0x0)\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\nmain.main()\n\t_testmain.go:84 +0x151\n\ngoroutine 26 [chan receive]:\ntesting.(*T).Run(0xc420140780, 0xc4200d22c0, 0x13, 0xc4201284a0, 0x2)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc4201403c0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\ntesting.tRunner(0xc4201403c0, 0x703348)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\nrax    0x0\nrbx    0x6\nrcx    0x7f884c725860\nrdx    0x0\nrdi    0x2\nrsi    0x7f88307f7880\nrbp    0x7f88307f7ad0\nrsp    0x7f88307f7880\nr8     0x0\nr9     0x7f88307f7880\nr10    0x8\nr11    0x246\nr12    0x7f88307f7d10\nr13    0x5\nr14    0x7f8828007100\nr15    0x7f88307f7d10\nrip    0x7f884c725860\nrflags 0x246\ncs     0x33\nfs     0x0\ngs     0x0\nexit status 2\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.082s\n\n1.7\n(cv) [pgaleone@persefone go]$ git checkout r1.7\nSwitched to branch 'r1.7'\nYour branch is up to date with 'origin/r1.7'.\n(cv) [pgaleone@persefone go]$ go test\n2018-04-07 08:38:02.846973: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\nSIGABRT: abort\nPC=0x7f88599b1860 m=7 sigcode=18446744073709551610\n\ngoroutine 0 [idle]:\nruntime: unknown pc 0x7f88599b1860\nstack: frame={sp:0x7f88417f9880, fp:0x0} stack=[0x7f8840ffa1d0,0x7f88417f9dd0)\n00007f88417f9780:  0000000000000000  0000006e0000005b \n00007f88417f9790:  0000000000000000  000000770000007c \n00007f88417f97a0:  000000000000001b  00007f8838000020 \n00007f88417f97b0:  0000000000000014  fffffffffffffef8 \n00007f88417f97c0:  00007f8838009d4d  0000000000000003 \n00007f88417f97d0:  00007f8838008460  00007f88599ff47a \n00007f88417f97e0:  00007f8838006dd0  00007f8838006de1 \n00007f88417f97f0:  000000000000000d  00007f8859a30dc2 \n00007f88417f9800:  00007f8859d2f350  0000000000000001 \n00007f88417f9810:  0000000000000000  00000000000000ac \n00007f88417f9820:  00007f8859d2f350  00007f8859a31e29 \n00007f88417f9830:  0000000000000001  ffffffff00000008 \n00007f88417f9840:  01000000004d2166  0000000000000011 \n00007f88417f9850:  0000000000000008  0000000000000008 \n00007f88417f9860:  00000000000006b8  00000000000006b8 \n00007f88417f9870:  00007f88417f9900  0000000000000000 \n00007f88417f9880: <0000000000000000  0000000000000000 \n00007f88417f9890:  0800000000000000  0000000008000000 \n00007f88417f98a0:  08000000ae000000  0000000011000000 \n00007f88417f98b0:  0000000000000802  000000000076074b \n00007f88417f98c0:  0000000000000003  6b320cc32e502500 \n00007f88417f98d0:  0000000000000000  00007f88417f9ae0 \n00007f88417f98e0:  00007f88417f9a50  00007f88417f9a70 \n00007f88417f98f0:  00000000000cec7d  00007f88417f9a20 \n00007f88417f9900:  fffffffe7fffffff  ffffffffffffffff \n00007f88417f9910:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9920:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9930:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9940:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9950:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9960:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9970:  ffffffffffffffff  ffffffffffffffff \nruntime: unknown pc 0x7f88599b1860\nstack: frame={sp:0x7f88417f9880, fp:0x0} stack=[0x7f8840ffa1d0,0x7f88417f9dd0)\n00007f88417f9780:  0000000000000000  0000006e0000005b \n00007f88417f9790:  0000000000000000  000000770000007c \n00007f88417f97a0:  000000000000001b  00007f8838000020 \n00007f88417f97b0:  0000000000000014  fffffffffffffef8 \n00007f88417f97c0:  00007f8838009d4d  0000000000000003 \n00007f88417f97d0:  00007f8838008460  00007f88599ff47a \n00007f88417f97e0:  00007f8838006dd0  00007f8838006de1 \n00007f88417f97f0:  000000000000000d  00007f8859a30dc2 \n00007f88417f9800:  00007f8859d2f350  0000000000000001 \n00007f88417f9810:  0000000000000000  00000000000000ac \n00007f88417f9820:  00007f8859d2f350  00007f8859a31e29 \n00007f88417f9830:  0000000000000001  ffffffff00000008 \n00007f88417f9840:  01000000004d2166  0000000000000011 \n00007f88417f9850:  0000000000000008  0000000000000008 \n00007f88417f9860:  00000000000006b8  00000000000006b8 \n00007f88417f9870:  00007f88417f9900  0000000000000000 \n00007f88417f9880: <0000000000000000  0000000000000000 \n00007f88417f9890:  0800000000000000  0000000008000000 \n00007f88417f98a0:  08000000ae000000  0000000011000000 \n00007f88417f98b0:  0000000000000802  000000000076074b \n00007f88417f98c0:  0000000000000003  6b320cc32e502500 \n00007f88417f98d0:  0000000000000000  00007f88417f9ae0 \n00007f88417f98e0:  00007f88417f9a50  00007f88417f9a70 \n00007f88417f98f0:  00000000000cec7d  00007f88417f9a20 \n00007f88417f9900:  fffffffe7fffffff  ffffffffffffffff \n00007f88417f9910:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9920:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9930:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9940:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9950:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9960:  ffffffffffffffff  ffffffffffffffff \n00007f88417f9970:  ffffffffffffffff  ffffffffffffffff \n\ngoroutine 24 [syscall]:\nruntime.cgocall(0x653f10, 0xc42005b898, 0xc42005b8a0)\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc42005b868 sp=0xc42005b830 pc=0x405824\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f8838005ed0, 0x7f8838006cb0, 0x7f8838006da0, 0x7f8838008170)\n\t_cgo_gotypes.go:1024 +0x45 fp=0xc42005b898 sp=0xc42005b868 pc=0x523695\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f8838005ed0, 0x7f8838006cb0, 0x7f8838006da0, 0x7f8838008170)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0xce fp=0xc42005b8d0 sp=0xc42005b898 pc=0x52f98e\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f8838005ed0, 0xc42000e0c0, 0x6ef1cc, 0x5, 0x6b3f40, 0xc420104500, 0x0, 0x0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0x1006 fp=0xc42005baa0 sp=0xc42005b8d0 pc=0x526226\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc42000e080, 0x6ef023, 0x5, 0xc42001a808, 0x6, 0x0, 0x0, 0x0, 0xc42005bc98, 0x0, ...)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:216 +0x4fb fp=0xc42005bc00 sp=0xc42005baa0 pc=0x52506b\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc42000e080, 0xc42001a808, 0x6, 0x67ee40, 0xc420104340, 0xc42001a808, 0x6, 0x7af1f0, 0x7af230)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x271 fp=0xc42005be40 sp=0xc42005bc00 pc=0x5201e1\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc42011a780)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc42005bfa8 sp=0xc42005be40 pc=0x52cff1\ntesting.tRunner(0xc42011a780, 0xc4201044c0)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc42005bfd0 sp=0xc42005bfa8 pc=0x4ce610\nruntime.goexit()\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc42005bfd8 sp=0xc42005bfd0 pc=0x45d311\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\ngoroutine 1 [chan receive]:\ntesting.(*T).Run(0xc42011a3c0, 0x6f54ea, 0x1a, 0x703348, 0x477f01)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ntesting.runTests.func1(0xc42011a000)\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\ntesting.tRunner(0xc42011a000, 0xc42006bdf8)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ntesting.runTests(0xc420104260, 0xa4c4c0, 0x12, 0x12, 0x413ef9)\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\ntesting.(*M).Run(0xc420118000, 0x0)\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\nmain.main()\n\t_testmain.go:84 +0x151\n\ngoroutine 20 [chan receive]:\ntesting.(*T).Run(0xc42011a780, 0xc420018420, 0x13, 0xc4201044c0, 0x2)\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc42011a3c0)\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\ntesting.tRunner(0xc42011a3c0, 0x703348)\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\ncreated by testing.(*T).Run\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\n\nrax    0x0\nrbx    0x6\nrcx    0x7f88599b1860\nrdx    0x0\nrdi    0x2\nrsi    0x7f88417f9880\nrbp    0x7f88417f9ad0\nrsp    0x7f88417f9880\nr8     0x0\nr9     0x7f88417f9880\nr10    0x8\nr11    0x246\nr12    0x7f88417f9d10\nr13    0x5\nr14    0x7f8838006cb0\nr15    0x7f88417f9d10\nrip    0x7f88599b1860\nrflags 0x246\ncs     0x33\nfs     0x0\ngs     0x0\nexit status 2\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.073s", "body": "The same error reported in #14546 is still present in every tensorflow release > 1.4 (and master branch).\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Archlinux\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.4.0\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: Build label: 0.7.0- (@non-git)\r\n- **GCC/Compiler version (if compiling from source)**: gcc-6\r\n- **CUDA/cuDNN version**: CUDA 9 / cuDNN 7\r\n- **GPU model and memory**: Dual Nvidia 1080 Ti\r\n- **Exact command to reproduce**:\r\n\r\n```\r\ngo test github.com/tensorflow/tensorflow/tensorflow/go\r\n```\r\n\r\n### Describe the problem\r\n\r\nI have build tensorflow with CUDA support. Since Go requires the C library, I built `libtensorflow.so` and `libtensorflow_framework.so`, with:\r\n\r\n```\r\nbazel build //tensorflow:libtensorflow_framework.so\r\nbazel build //tensorflow:libtensorflow.so\r\n```\r\n\r\nI updated `LD_LIBRARY_PATH` accordingly:\r\n\r\n```bash\r\nTENSORFLOW_LIBLIB=\"${HOME}/sources/tensorflow/bazel-bin/tensorflow/\"\r\nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/opt/cuda/lib64:/opt/cuda/extras/CUPTI/lib64:${TENSORFLOW_LIBLIB}\"\r\nexport LIBRARY_PATH=\"${TENSORFLOW_LIBLIB}:${LIBRARY_PATH}\"\r\n```\r\n\r\nI can now go get tensorflow without problems, I can hence compile it and use the `-ltensorflow` linker flag.\r\n\r\nWhen I run `go test` on the tensorflow package, the following error (`tensorflow/core/framework/tensor.cc:822] Unexpected type: 23 `) is thrown and causes SIGABRT.\r\n\r\n### Source code / logs\r\n\r\n**1.5**\r\n```\r\n(cv) [pgaleone@persefone go]$ git checkout r1.5\r\nSwitched to branch 'r1.5'\r\nYour branch is up to date with 'origin/r1.5'.\r\n(cv) [pgaleone@persefone go]$ go test\r\n2018-04-07 08:37:06.625482: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\r\nSIGABRT: abort\r\nPC=0x7f82afedd860 m=8 sigcode=18446744073709551610\r\n\r\ngoroutine 0 [idle]:\r\nruntime: unknown pc 0x7f82afedd860\r\nstack: frame={sp:0x7f82937f5880, fp:0x0} stack=[0x7f8292ff61d0,0x7f82937f5dd0)\r\n00007f82937f5780:  0000000000000000  0000006e0000005b \r\n00007f82937f5790:  0000000000000000  000000770000007c \r\n00007f82937f57a0:  000000000000001b  00007f827c000020 \r\n00007f82937f57b0:  0000000000000014  fffffffffffffef8 \r\n00007f82937f57c0:  00007f827c00822d  0000000000000003 \r\n00007f82937f57d0:  00007f827c006940  00007f82aff2b47a \r\n00007f82937f57e0:  00007f827c0052b0  00007f827c0052c1 \r\n00007f82937f57f0:  000000000000000d  00007f82aff5cdc2 \r\n00007f82937f5800:  00007f82b025b350  0000000000000001 \r\n00007f82937f5810:  0000000000000000  00000000000000ac \r\n00007f82937f5820:  00007f82b025b350  00007f82aff5de29 \r\n00007f82937f5830:  0000000000000001  ffffffff00000008 \r\n00007f82937f5840:  01000000004d1d96  0000000000000011 \r\n00007f82937f5850:  0000000000000008  0000000000000008 \r\n00007f82937f5860:  00000000000006b8  00000000000006b8 \r\n00007f82937f5870:  00007f82937f5900  0000000000000000 \r\n00007f82937f5880: <0000000000000000  0000000000000000 \r\n00007f82937f5890:  0800000000000000  0000000008000000 \r\n00007f82937f58a0:  08000000ae000000  0000000011000000 \r\n00007f82937f58b0:  0000000000000802  000000000076074b \r\n00007f82937f58c0:  0000000000000003  a56bbb4077756a00 \r\n00007f82937f58d0:  0000000000000000  00007f82937f5ae0 \r\n00007f82937f58e0:  00007f82937f5a50  00007f82937f5a70 \r\n00007f82937f58f0:  0000000000098b4a  00007f82937f5a20 \r\n00007f82937f5900:  fffffffe7fffffff  ffffffffffffffff \r\n00007f82937f5910:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5920:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5930:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5940:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5950:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5960:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5970:  ffffffffffffffff  ffffffffffffffff \r\nruntime: unknown pc 0x7f82afedd860\r\nstack: frame={sp:0x7f82937f5880, fp:0x0} stack=[0x7f8292ff61d0,0x7f82937f5dd0)\r\n00007f82937f5780:  0000000000000000  0000006e0000005b \r\n00007f82937f5790:  0000000000000000  000000770000007c \r\n00007f82937f57a0:  000000000000001b  00007f827c000020 \r\n00007f82937f57b0:  0000000000000014  fffffffffffffef8 \r\n00007f82937f57c0:  00007f827c00822d  0000000000000003 \r\n00007f82937f57d0:  00007f827c006940  00007f82aff2b47a \r\n00007f82937f57e0:  00007f827c0052b0  00007f827c0052c1 \r\n00007f82937f57f0:  000000000000000d  00007f82aff5cdc2 \r\n00007f82937f5800:  00007f82b025b350  0000000000000001 \r\n00007f82937f5810:  0000000000000000  00000000000000ac \r\n00007f82937f5820:  00007f82b025b350  00007f82aff5de29 \r\n00007f82937f5830:  0000000000000001  ffffffff00000008 \r\n00007f82937f5840:  01000000004d1d96  0000000000000011 \r\n00007f82937f5850:  0000000000000008  0000000000000008 \r\n00007f82937f5860:  00000000000006b8  00000000000006b8 \r\n00007f82937f5870:  00007f82937f5900  0000000000000000 \r\n00007f82937f5880: <0000000000000000  0000000000000000 \r\n00007f82937f5890:  0800000000000000  0000000008000000 \r\n00007f82937f58a0:  08000000ae000000  0000000011000000 \r\n00007f82937f58b0:  0000000000000802  000000000076074b \r\n00007f82937f58c0:  0000000000000003  a56bbb4077756a00 \r\n00007f82937f58d0:  0000000000000000  00007f82937f5ae0 \r\n00007f82937f58e0:  00007f82937f5a50  00007f82937f5a70 \r\n00007f82937f58f0:  0000000000098b4a  00007f82937f5a20 \r\n00007f82937f5900:  fffffffe7fffffff  ffffffffffffffff \r\n00007f82937f5910:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5920:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5930:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5940:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5950:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5960:  ffffffffffffffff  ffffffffffffffff \r\n00007f82937f5970:  ffffffffffffffff  ffffffffffffffff \r\n\r\ngoroutine 30 [syscall]:\r\nruntime.cgocall(0x6524d0, 0xc42005b8d0, 0xc42005b8d8)\r\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc42005b8a0 sp=0xc42005b868 pc=0x405454\r\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f827c0043b0, 0x7f827c005190, 0x7f827c005280, 0x7f827c006650)\r\n\t_cgo_gotypes.go:921 +0x45 fp=0xc42005b8d0 sp=0xc42005b8a0 pc=0x522ac5\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f827c0043b0, 0x7f827c005190, 0x7f827c005280, 0x7f827c006650)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:306 +0xce fp=0xc42005b908 sp=0xc42005b8d0 pc=0x52e4ae\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f827c0043b0, 0xc42000e0c0, 0x6ed34c, 0x5, 0x6b21a0, 0xc420112500, 0x0, 0x0)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:306 +0x1006 fp=0xc42005bad8 sp=0xc42005b908 pc=0x5255f6\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc42000e080, 0x6ed1a3, 0x5, 0xc42001a7e8, 0x6, 0x0, 0x0, 0x0, 0xc42005bcb0, 0xc420047cf0, ...)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:209 +0x49d fp=0xc42005bc30 sp=0xc42005bad8 pc=0x52443d\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc42000e080, 0xc42001a7e8, 0x6, 0x67d160, 0xc420112340, 0xc42001a7e8, 0x6, 0x7ad090, 0x7ad0d0)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x247 fp=0xc42005be40 sp=0xc42005bc30 pc=0x51fb77\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc420128780)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc42005bfa8 sp=0xc42005be40 pc=0x52bbc1\r\ntesting.tRunner(0xc420128780, 0xc4201124c0)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc42005bfd0 sp=0xc42005bfa8 pc=0x4ce240\r\nruntime.goexit()\r\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc42005bfd8 sp=0xc42005bfd0 pc=0x45cf41\r\ncreated by testing.(*T).Run\r\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.(*T).Run(0xc4201283c0, 0x6f3637, 0x1a, 0x7013f0, 0x477b01)\r\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\r\ntesting.runTests.func1(0xc420128000)\r\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\r\ntesting.tRunner(0xc420128000, 0xc42006bdf8)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\r\ntesting.runTests(0xc420112260, 0xa49460, 0x11, 0x11, 0x413b29)\r\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\r\ntesting.(*M).Run(0xc420126000, 0x0)\r\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\r\nmain.main()\r\n\t_testmain.go:82 +0x151\r\n\r\ngoroutine 26 [chan receive]:\r\ntesting.(*T).Run(0xc420128780, 0xc420018420, 0x13, 0xc4201124c0, 0x2)\r\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc4201283c0)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\r\ntesting.tRunner(0xc4201283c0, 0x7013f0)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\r\ncreated by testing.(*T).Run\r\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\r\n\r\nrax    0x0\r\nrbx    0x6\r\nrcx    0x7f82afedd860\r\nrdx    0x0\r\nrdi    0x2\r\nrsi    0x7f82937f5880\r\nrbp    0x7f82937f5ad0\r\nrsp    0x7f82937f5880\r\nr8     0x0\r\nr9     0x7f82937f5880\r\nr10    0x8\r\nr11    0x246\r\nr12    0x7f82937f5d10\r\nr13    0x5\r\nr14    0x7f827c005190\r\nr15    0x7f82937f5d10\r\nrip    0x7f82afedd860\r\nrflags 0x246\r\ncs     0x33\r\nfs     0x0\r\ngs     0x0\r\nexit status 2\r\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.081s\r\n```\r\n\r\n**1.6**\r\n```\r\n(cv) [pgaleone@persefone go]$ git checkout r1.6\r\nSwitched to branch 'r1.6'\r\nYour branch is up to date with 'origin/r1.6'.\r\n(cv) [pgaleone@persefone go]$ go test\r\n2018-04-07 08:37:33.608147: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\r\nSIGABRT: abort\r\nPC=0x7f884c725860 m=7 sigcode=18446744073709551610\r\n\r\ngoroutine 0 [idle]:\r\nruntime: unknown pc 0x7f884c725860\r\nstack: frame={sp:0x7f88307f7880, fp:0x0} stack=[0x7f882fff81d0,0x7f88307f7dd0)\r\n00007f88307f7780:  0000000000000000  0000006e0000005b \r\n00007f88307f7790:  0000000000000000  000000770000007c \r\n00007f88307f77a0:  000000000000001b  00007f8828000020 \r\n00007f88307f77b0:  0000000000000014  fffffffffffffef8 \r\n00007f88307f77c0:  00007f882800a19d  0000000000000003 \r\n00007f88307f77d0:  00007f88280088b0  00007f884c77347a \r\n00007f88307f77e0:  00007f8828007220  00007f8828007231 \r\n00007f88307f77f0:  000000000000000d  00007f884c7a4dc2 \r\n00007f88307f7800:  00007f884caa3350  0000000000000001 \r\n00007f88307f7810:  0000000000000000  00000000000000ac \r\n00007f88307f7820:  00007f884caa3350  00007f884c7a5e29 \r\n00007f88307f7830:  0000000000000001  ffffffff00000008 \r\n00007f88307f7840:  01000000004d2166  0000000000000011 \r\n00007f88307f7850:  0000000000000008  0000000000000008 \r\n00007f88307f7860:  00000000000006b8  00000000000006b8 \r\n00007f88307f7870:  00007f88307f7900  0000000000000000 \r\n00007f88307f7880: <0000000000000000  0000000000000000 \r\n00007f88307f7890:  0800000000000000  0000000008000000 \r\n00007f88307f78a0:  08000000ae000000  0000000011000000 \r\n00007f88307f78b0:  0000000000000802  000000000076074b \r\n00007f88307f78c0:  0000000000000003  61e47ad4235a2e00 \r\n00007f88307f78d0:  0000000000000000  00007f88307f7ae0 \r\n00007f88307f78e0:  00007f88307f7a50  00007f88307f7a70 \r\n00007f88307f78f0:  0000000000094793  00007f88307f7a20 \r\n00007f88307f7900:  fffffffe7fffffff  ffffffffffffffff \r\n00007f88307f7910:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7920:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7930:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7940:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7950:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7960:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7970:  ffffffffffffffff  ffffffffffffffff \r\nruntime: unknown pc 0x7f884c725860\r\nstack: frame={sp:0x7f88307f7880, fp:0x0} stack=[0x7f882fff81d0,0x7f88307f7dd0)\r\n00007f88307f7780:  0000000000000000  0000006e0000005b \r\n00007f88307f7790:  0000000000000000  000000770000007c \r\n00007f88307f77a0:  000000000000001b  00007f8828000020 \r\n00007f88307f77b0:  0000000000000014  fffffffffffffef8 \r\n00007f88307f77c0:  00007f882800a19d  0000000000000003 \r\n00007f88307f77d0:  00007f88280088b0  00007f884c77347a \r\n00007f88307f77e0:  00007f8828007220  00007f8828007231 \r\n00007f88307f77f0:  000000000000000d  00007f884c7a4dc2 \r\n00007f88307f7800:  00007f884caa3350  0000000000000001 \r\n00007f88307f7810:  0000000000000000  00000000000000ac \r\n00007f88307f7820:  00007f884caa3350  00007f884c7a5e29 \r\n00007f88307f7830:  0000000000000001  ffffffff00000008 \r\n00007f88307f7840:  01000000004d2166  0000000000000011 \r\n00007f88307f7850:  0000000000000008  0000000000000008 \r\n00007f88307f7860:  00000000000006b8  00000000000006b8 \r\n00007f88307f7870:  00007f88307f7900  0000000000000000 \r\n00007f88307f7880: <0000000000000000  0000000000000000 \r\n00007f88307f7890:  0800000000000000  0000000008000000 \r\n00007f88307f78a0:  08000000ae000000  0000000011000000 \r\n00007f88307f78b0:  0000000000000802  000000000076074b \r\n00007f88307f78c0:  0000000000000003  61e47ad4235a2e00 \r\n00007f88307f78d0:  0000000000000000  00007f88307f7ae0 \r\n00007f88307f78e0:  00007f88307f7a50  00007f88307f7a70 \r\n00007f88307f78f0:  0000000000094793  00007f88307f7a20 \r\n00007f88307f7900:  fffffffe7fffffff  ffffffffffffffff \r\n00007f88307f7910:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7920:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7930:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7940:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7950:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7960:  ffffffffffffffff  ffffffffffffffff \r\n00007f88307f7970:  ffffffffffffffff  ffffffffffffffff \r\n\r\ngoroutine 30 [syscall]:\r\nruntime.cgocall(0x653f10, 0xc420057898, 0xc4200578a0)\r\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc420057868 sp=0xc420057830 pc=0x405824\r\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f8828006320, 0x7f8828007100, 0x7f88280071f0, 0x7f88280085c0)\r\n\t_cgo_gotypes.go:1024 +0x45 fp=0xc420057898 sp=0xc420057868 pc=0x523695\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f8828006320, 0x7f8828007100, 0x7f88280071f0, 0x7f88280085c0)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0xce fp=0xc4200578d0 sp=0xc420057898 pc=0x52f98e\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f8828006320, 0xc4200a60b8, 0x6ef1cc, 0x5, 0x6b3f40, 0xc4201284e0, 0x0, 0x0)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0x1006 fp=0xc420057aa0 sp=0xc4200578d0 pc=0x526226\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc4200a6080, 0x6ef023, 0x5, 0xc42001a408, 0x6, 0x0, 0x0, 0x0, 0xc420057c98, 0x0, ...)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:216 +0x4fb fp=0xc420057c00 sp=0xc420057aa0 pc=0x52506b\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc4200a6080, 0xc42001a408, 0x6, 0x67ee40, 0xc420128320, 0xc42001a408, 0x6, 0x7af1f0, 0x7af230)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x271 fp=0xc420057e40 sp=0xc420057c00 pc=0x5201e1\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc420140780)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc420057fa8 sp=0xc420057e40 pc=0x52cff1\r\ntesting.tRunner(0xc420140780, 0xc4201284a0)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc420057fd0 sp=0xc420057fa8 pc=0x4ce610\r\nruntime.goexit()\r\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc420057fd8 sp=0xc420057fd0 pc=0x45d311\r\ncreated by testing.(*T).Run\r\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.(*T).Run(0xc4201403c0, 0x6f54ea, 0x1a, 0x703348, 0x477f01)\r\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\r\ntesting.runTests.func1(0xc420140000)\r\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\r\ntesting.tRunner(0xc420140000, 0xc42006bdf8)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\r\ntesting.runTests(0xc420128220, 0xa4c4c0, 0x12, 0x12, 0x413ef9)\r\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\r\ntesting.(*M).Run(0xc42013e000, 0x0)\r\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\r\nmain.main()\r\n\t_testmain.go:84 +0x151\r\n\r\ngoroutine 26 [chan receive]:\r\ntesting.(*T).Run(0xc420140780, 0xc4200d22c0, 0x13, 0xc4201284a0, 0x2)\r\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc4201403c0)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\r\ntesting.tRunner(0xc4201403c0, 0x703348)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\r\ncreated by testing.(*T).Run\r\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\r\n\r\nrax    0x0\r\nrbx    0x6\r\nrcx    0x7f884c725860\r\nrdx    0x0\r\nrdi    0x2\r\nrsi    0x7f88307f7880\r\nrbp    0x7f88307f7ad0\r\nrsp    0x7f88307f7880\r\nr8     0x0\r\nr9     0x7f88307f7880\r\nr10    0x8\r\nr11    0x246\r\nr12    0x7f88307f7d10\r\nr13    0x5\r\nr14    0x7f8828007100\r\nr15    0x7f88307f7d10\r\nrip    0x7f884c725860\r\nrflags 0x246\r\ncs     0x33\r\nfs     0x0\r\ngs     0x0\r\nexit status 2\r\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.082s\r\n```\r\n\r\n**1.7**\r\n```\r\n(cv) [pgaleone@persefone go]$ git checkout r1.7\r\nSwitched to branch 'r1.7'\r\nYour branch is up to date with 'origin/r1.7'.\r\n(cv) [pgaleone@persefone go]$ go test\r\n2018-04-07 08:38:02.846973: F tensorflow/core/framework/tensor.cc:822] Unexpected type: 23\r\nSIGABRT: abort\r\nPC=0x7f88599b1860 m=7 sigcode=18446744073709551610\r\n\r\ngoroutine 0 [idle]:\r\nruntime: unknown pc 0x7f88599b1860\r\nstack: frame={sp:0x7f88417f9880, fp:0x0} stack=[0x7f8840ffa1d0,0x7f88417f9dd0)\r\n00007f88417f9780:  0000000000000000  0000006e0000005b \r\n00007f88417f9790:  0000000000000000  000000770000007c \r\n00007f88417f97a0:  000000000000001b  00007f8838000020 \r\n00007f88417f97b0:  0000000000000014  fffffffffffffef8 \r\n00007f88417f97c0:  00007f8838009d4d  0000000000000003 \r\n00007f88417f97d0:  00007f8838008460  00007f88599ff47a \r\n00007f88417f97e0:  00007f8838006dd0  00007f8838006de1 \r\n00007f88417f97f0:  000000000000000d  00007f8859a30dc2 \r\n00007f88417f9800:  00007f8859d2f350  0000000000000001 \r\n00007f88417f9810:  0000000000000000  00000000000000ac \r\n00007f88417f9820:  00007f8859d2f350  00007f8859a31e29 \r\n00007f88417f9830:  0000000000000001  ffffffff00000008 \r\n00007f88417f9840:  01000000004d2166  0000000000000011 \r\n00007f88417f9850:  0000000000000008  0000000000000008 \r\n00007f88417f9860:  00000000000006b8  00000000000006b8 \r\n00007f88417f9870:  00007f88417f9900  0000000000000000 \r\n00007f88417f9880: <0000000000000000  0000000000000000 \r\n00007f88417f9890:  0800000000000000  0000000008000000 \r\n00007f88417f98a0:  08000000ae000000  0000000011000000 \r\n00007f88417f98b0:  0000000000000802  000000000076074b \r\n00007f88417f98c0:  0000000000000003  6b320cc32e502500 \r\n00007f88417f98d0:  0000000000000000  00007f88417f9ae0 \r\n00007f88417f98e0:  00007f88417f9a50  00007f88417f9a70 \r\n00007f88417f98f0:  00000000000cec7d  00007f88417f9a20 \r\n00007f88417f9900:  fffffffe7fffffff  ffffffffffffffff \r\n00007f88417f9910:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9920:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9930:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9940:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9950:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9960:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9970:  ffffffffffffffff  ffffffffffffffff \r\nruntime: unknown pc 0x7f88599b1860\r\nstack: frame={sp:0x7f88417f9880, fp:0x0} stack=[0x7f8840ffa1d0,0x7f88417f9dd0)\r\n00007f88417f9780:  0000000000000000  0000006e0000005b \r\n00007f88417f9790:  0000000000000000  000000770000007c \r\n00007f88417f97a0:  000000000000001b  00007f8838000020 \r\n00007f88417f97b0:  0000000000000014  fffffffffffffef8 \r\n00007f88417f97c0:  00007f8838009d4d  0000000000000003 \r\n00007f88417f97d0:  00007f8838008460  00007f88599ff47a \r\n00007f88417f97e0:  00007f8838006dd0  00007f8838006de1 \r\n00007f88417f97f0:  000000000000000d  00007f8859a30dc2 \r\n00007f88417f9800:  00007f8859d2f350  0000000000000001 \r\n00007f88417f9810:  0000000000000000  00000000000000ac \r\n00007f88417f9820:  00007f8859d2f350  00007f8859a31e29 \r\n00007f88417f9830:  0000000000000001  ffffffff00000008 \r\n00007f88417f9840:  01000000004d2166  0000000000000011 \r\n00007f88417f9850:  0000000000000008  0000000000000008 \r\n00007f88417f9860:  00000000000006b8  00000000000006b8 \r\n00007f88417f9870:  00007f88417f9900  0000000000000000 \r\n00007f88417f9880: <0000000000000000  0000000000000000 \r\n00007f88417f9890:  0800000000000000  0000000008000000 \r\n00007f88417f98a0:  08000000ae000000  0000000011000000 \r\n00007f88417f98b0:  0000000000000802  000000000076074b \r\n00007f88417f98c0:  0000000000000003  6b320cc32e502500 \r\n00007f88417f98d0:  0000000000000000  00007f88417f9ae0 \r\n00007f88417f98e0:  00007f88417f9a50  00007f88417f9a70 \r\n00007f88417f98f0:  00000000000cec7d  00007f88417f9a20 \r\n00007f88417f9900:  fffffffe7fffffff  ffffffffffffffff \r\n00007f88417f9910:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9920:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9930:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9940:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9950:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9960:  ffffffffffffffff  ffffffffffffffff \r\n00007f88417f9970:  ffffffffffffffff  ffffffffffffffff \r\n\r\ngoroutine 24 [syscall]:\r\nruntime.cgocall(0x653f10, 0xc42005b898, 0xc42005b8a0)\r\n\t/usr/lib/go/src/runtime/cgocall.go:128 +0x64 fp=0xc42005b868 sp=0xc42005b830 pc=0x405824\r\ngithub.com/tensorflow/tensorflow/tensorflow/go._Cfunc_TF_SetAttrTensor(0x7f8838005ed0, 0x7f8838006cb0, 0x7f8838006da0, 0x7f8838008170)\r\n\t_cgo_gotypes.go:1024 +0x45 fp=0xc42005b898 sp=0xc42005b868 pc=0x523695\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr.func18(0x7f8838005ed0, 0x7f8838006cb0, 0x7f8838006da0, 0x7f8838008170)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0xce fp=0xc42005b8d0 sp=0xc42005b898 pc=0x52f98e\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.setAttr(0x7f8838005ed0, 0xc42000e0c0, 0x6ef1cc, 0x5, 0x6b3f40, 0xc420104500, 0x0, 0x0)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:313 +0x1006 fp=0xc42005baa0 sp=0xc42005b8d0 pc=0x526226\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Graph).AddOperation(0xc42000e080, 0x6ef023, 0x5, 0xc42001a808, 0x6, 0x0, 0x0, 0x0, 0xc42005bc98, 0x0, ...)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/graph.go:216 +0x4fb fp=0xc42005bc00 sp=0xc42005baa0 pc=0x52506b\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.Const(0xc42000e080, 0xc42001a808, 0x6, 0x67ee40, 0xc420104340, 0xc42001a808, 0x6, 0x7af1f0, 0x7af230)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/util_test.go:38 +0x271 fp=0xc42005be40 sp=0xc42005bc00 pc=0x5201e1\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape.func1(0xc42011a780)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:137 +0x111 fp=0xc42005bfa8 sp=0xc42005be40 pc=0x52cff1\r\ntesting.tRunner(0xc42011a780, 0xc4201044c0)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0 fp=0xc42005bfd0 sp=0xc42005bfa8 pc=0x4ce610\r\nruntime.goexit()\r\n\t/usr/lib/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc42005bfd8 sp=0xc42005bfd0 pc=0x45d311\r\ncreated by testing.(*T).Run\r\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.(*T).Run(0xc42011a3c0, 0x6f54ea, 0x1a, 0x703348, 0x477f01)\r\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\r\ntesting.runTests.func1(0xc42011a000)\r\n\t/usr/lib/go/src/testing/testing.go:1063 +0x64\r\ntesting.tRunner(0xc42011a000, 0xc42006bdf8)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\r\ntesting.runTests(0xc420104260, 0xa4c4c0, 0x12, 0x12, 0x413ef9)\r\n\t/usr/lib/go/src/testing/testing.go:1061 +0x2c4\r\ntesting.(*M).Run(0xc420118000, 0x0)\r\n\t/usr/lib/go/src/testing/testing.go:978 +0x171\r\nmain.main()\r\n\t_testmain.go:84 +0x151\r\n\r\ngoroutine 20 [chan receive]:\r\ntesting.(*T).Run(0xc42011a780, 0xc420018420, 0x13, 0xc4201044c0, 0x2)\r\n\t/usr/lib/go/src/testing/testing.go:825 +0x301\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.TestOutputDataTypeAndShape(0xc42011a3c0)\r\n\t/home/pgaleone/projects/go/src/github.com/tensorflow/tensorflow/tensorflow/go/operation_test.go:136 +0x552\r\ntesting.tRunner(0xc42011a3c0, 0x703348)\r\n\t/usr/lib/go/src/testing/testing.go:777 +0xd0\r\ncreated by testing.(*T).Run\r\n\t/usr/lib/go/src/testing/testing.go:824 +0x2e0\r\n\r\nrax    0x0\r\nrbx    0x6\r\nrcx    0x7f88599b1860\r\nrdx    0x0\r\nrdi    0x2\r\nrsi    0x7f88417f9880\r\nrbp    0x7f88417f9ad0\r\nrsp    0x7f88417f9880\r\nr8     0x0\r\nr9     0x7f88417f9880\r\nr10    0x8\r\nr11    0x246\r\nr12    0x7f88417f9d10\r\nr13    0x5\r\nr14    0x7f8838006cb0\r\nr15    0x7f88417f9d10\r\nrip    0x7f88599b1860\r\nrflags 0x246\r\ncs     0x33\r\nfs     0x0\r\ngs     0x0\r\nexit status 2\r\nFAIL\tgithub.com/tensorflow/tensorflow/tensorflow/go\t0.073s\r\n```"}
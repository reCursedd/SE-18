{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/339867222", "html_url": "https://github.com/tensorflow/tensorflow/issues/9550#issuecomment-339867222", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9550", "id": 339867222, "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTg2NzIyMg==", "user": {"login": "ryanleary", "id": 2212584, "node_id": "MDQ6VXNlcjIyMTI1ODQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2212584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanleary", "html_url": "https://github.com/ryanleary", "followers_url": "https://api.github.com/users/ryanleary/followers", "following_url": "https://api.github.com/users/ryanleary/following{/other_user}", "gists_url": "https://api.github.com/users/ryanleary/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanleary/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanleary/subscriptions", "organizations_url": "https://api.github.com/users/ryanleary/orgs", "repos_url": "https://api.github.com/users/ryanleary/repos", "events_url": "https://api.github.com/users/ryanleary/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanleary/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-27T04:09:19Z", "updated_at": "2017-10-27T04:09:19Z", "author_association": "NONE", "body_html": "<p>I agree that <code>merge_repeated=True</code> should give <code>AA</code> is the correct behavior. What I'm saying is that having a case where <code>merge_repeated=False</code> in a beam decoder doesn't make a whole lot of sense. Further, the merging is somewhat fundamental to the way the algorithm handles summing probabilities across multiple paths.</p>\n<p>In the current implementation of the beam decoder, if <code>merge_repeated=False</code>, repeated characters are merged once. If <code>merge_repeated=True</code>, they are merged <em>again</em>, returning nonsensical results.</p>\n<p>I'm advocating for removing the flag, and the <em>only</em> behavior to be where repeated characters are merged (but equivalent to the <code>merge_repeated=False</code> current functionality).</p>", "body_text": "I agree that merge_repeated=True should give AA is the correct behavior. What I'm saying is that having a case where merge_repeated=False in a beam decoder doesn't make a whole lot of sense. Further, the merging is somewhat fundamental to the way the algorithm handles summing probabilities across multiple paths.\nIn the current implementation of the beam decoder, if merge_repeated=False, repeated characters are merged once. If merge_repeated=True, they are merged again, returning nonsensical results.\nI'm advocating for removing the flag, and the only behavior to be where repeated characters are merged (but equivalent to the merge_repeated=False current functionality).", "body": "I agree that `merge_repeated=True` should give `AA` is the correct behavior. What I'm saying is that having a case where `merge_repeated=False` in a beam decoder doesn't make a whole lot of sense. Further, the merging is somewhat fundamental to the way the algorithm handles summing probabilities across multiple paths.\r\n\r\nIn the current implementation of the beam decoder, if `merge_repeated=False`, repeated characters are merged once. If `merge_repeated=True`, they are merged *again*, returning nonsensical results.\r\n\r\nI'm advocating for removing the flag, and the *only* behavior to be where repeated characters are merged (but equivalent to the `merge_repeated=False` current functionality)."}
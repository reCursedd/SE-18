{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/325858014", "html_url": "https://github.com/tensorflow/tensorflow/issues/9550#issuecomment-325858014", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9550", "id": 325858014, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTg1ODAxNA==", "user": {"login": "haotianteng", "id": 11155295, "node_id": "MDQ6VXNlcjExMTU1Mjk1", "avatar_url": "https://avatars3.githubusercontent.com/u/11155295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haotianteng", "html_url": "https://github.com/haotianteng", "followers_url": "https://api.github.com/users/haotianteng/followers", "following_url": "https://api.github.com/users/haotianteng/following{/other_user}", "gists_url": "https://api.github.com/users/haotianteng/gists{/gist_id}", "starred_url": "https://api.github.com/users/haotianteng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haotianteng/subscriptions", "organizations_url": "https://api.github.com/users/haotianteng/orgs", "repos_url": "https://api.github.com/users/haotianteng/repos", "events_url": "https://api.github.com/users/haotianteng/events{/privacy}", "received_events_url": "https://api.github.com/users/haotianteng/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-30T02:13:48Z", "updated_at": "2017-08-30T02:13:48Z", "author_association": "NONE", "body_html": "<p>Also encounter this problem as well.<br>\nAnd test with this data set:<br>\nLogits: [ [[200.0,1.0]] , [[-100.0,200.0]] , [[200.0,1.0]] ]<br>\nWhich should give 'AA',<br>\nThe greedy decoder is correct, but the beam search decoder only give 'A'</p>\n<p>And the beam search deocder work on this dataset:<br>\n[ [[log(0.4),log(0.6)]] , [[log(0.4),log(0.6)]]  ]<br>\nGreedy decoder gives an empty output, where the beam search decoder gives the true output  'A'.<br>\nWhich is known would fail in best path greedy decoding.</p>\n<p>But they both fail on this dataset:<br>\n[ [[log(0.4),log(0.6)]] , [[log(0.4),log(0.6)]], [[-200.0,200.0]] , [[200.0,-200.0]] ]<br>\nWhere the true output is 'AA', but both decoders give 'A'.<br>\nBut I guess they fail in the different place, beam_search decoder seems unable to give the correct answer for 'AbA'-type path, where greedy decoder failed in the first two logits.</p>\n<p>To reproduce:</p>\n<pre><code>logits = tf.Variable(initial_value = [[[np.log(0.4),np.log(0.6)]],[[np.log(0.4),np.log(0.6)]],[[-200.0,200.0]],[[200.0,-200.0]]])\noutput= tf.nn.ctc_beam_search_decoder(inputs = logits,sequence_length=[4],top_paths = 3,beam_width = 500)\ngreedy_output = tf.nn.ctc_greedy_decoder(inputs = logits,sequence_length = [4])\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\ndecode_val = sess.run(output)\ngreedy_val = sess.run(greedy_output)\nprint decode_val,'\\n',greedy_val\n</code></pre>\n<p>##System information<br>\nUbuntu 14.04, Tensorflow 1.3.0 CPU from pip install.</p>", "body_text": "Also encounter this problem as well.\nAnd test with this data set:\nLogits: [ [[200.0,1.0]] , [[-100.0,200.0]] , [[200.0,1.0]] ]\nWhich should give 'AA',\nThe greedy decoder is correct, but the beam search decoder only give 'A'\nAnd the beam search deocder work on this dataset:\n[ [[log(0.4),log(0.6)]] , [[log(0.4),log(0.6)]]  ]\nGreedy decoder gives an empty output, where the beam search decoder gives the true output  'A'.\nWhich is known would fail in best path greedy decoding.\nBut they both fail on this dataset:\n[ [[log(0.4),log(0.6)]] , [[log(0.4),log(0.6)]], [[-200.0,200.0]] , [[200.0,-200.0]] ]\nWhere the true output is 'AA', but both decoders give 'A'.\nBut I guess they fail in the different place, beam_search decoder seems unable to give the correct answer for 'AbA'-type path, where greedy decoder failed in the first two logits.\nTo reproduce:\nlogits = tf.Variable(initial_value = [[[np.log(0.4),np.log(0.6)]],[[np.log(0.4),np.log(0.6)]],[[-200.0,200.0]],[[200.0,-200.0]]])\noutput= tf.nn.ctc_beam_search_decoder(inputs = logits,sequence_length=[4],top_paths = 3,beam_width = 500)\ngreedy_output = tf.nn.ctc_greedy_decoder(inputs = logits,sequence_length = [4])\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\ndecode_val = sess.run(output)\ngreedy_val = sess.run(greedy_output)\nprint decode_val,'\\n',greedy_val\n\n##System information\nUbuntu 14.04, Tensorflow 1.3.0 CPU from pip install.", "body": "Also encounter this problem as well.\r\nAnd test with this data set:\r\nLogits: [ [[200.0,1.0]] , [[-100.0,200.0]] , [[200.0,1.0]] ]\r\nWhich should give 'AA',\r\nThe greedy decoder is correct, but the beam search decoder only give 'A'\r\n\r\nAnd the beam search deocder work on this dataset:\r\n[ [[log(0.4),log(0.6)]] , [[log(0.4),log(0.6)]]  ]\r\nGreedy decoder gives an empty output, where the beam search decoder gives the true output  'A'.\r\nWhich is known would fail in best path greedy decoding.\r\n\r\nBut they both fail on this dataset:\r\n[ [[log(0.4),log(0.6)]] , [[log(0.4),log(0.6)]], [[-200.0,200.0]] , [[200.0,-200.0]] ]\r\nWhere the true output is 'AA', but both decoders give 'A'.\r\nBut I guess they fail in the different place, beam_search decoder seems unable to give the correct answer for 'AbA'-type path, where greedy decoder failed in the first two logits.\r\n\r\n\r\nTo reproduce:\r\n```\r\nlogits = tf.Variable(initial_value = [[[np.log(0.4),np.log(0.6)]],[[np.log(0.4),np.log(0.6)]],[[-200.0,200.0]],[[200.0,-200.0]]])\r\noutput= tf.nn.ctc_beam_search_decoder(inputs = logits,sequence_length=[4],top_paths = 3,beam_width = 500)\r\ngreedy_output = tf.nn.ctc_greedy_decoder(inputs = logits,sequence_length = [4])\r\nsess = tf.Session()\r\nsess.run(tf.global_variables_initializer())\r\ndecode_val = sess.run(output)\r\ngreedy_val = sess.run(greedy_output)\r\nprint decode_val,'\\n',greedy_val\r\n```\r\n\r\n##System information\r\nUbuntu 14.04, Tensorflow 1.3.0 CPU from pip install.\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/339858451", "html_url": "https://github.com/tensorflow/tensorflow/issues/9550#issuecomment-339858451", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9550", "id": 339858451, "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTg1ODQ1MQ==", "user": {"login": "ryanleary", "id": 2212584, "node_id": "MDQ6VXNlcjIyMTI1ODQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2212584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanleary", "html_url": "https://github.com/ryanleary", "followers_url": "https://api.github.com/users/ryanleary/followers", "following_url": "https://api.github.com/users/ryanleary/following{/other_user}", "gists_url": "https://api.github.com/users/ryanleary/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanleary/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanleary/subscriptions", "organizations_url": "https://api.github.com/users/ryanleary/orgs", "repos_url": "https://api.github.com/users/ryanleary/repos", "events_url": "https://api.github.com/users/ryanleary/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanleary/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-27T02:53:22Z", "updated_at": "2017-10-27T02:53:22Z", "author_association": "NONE", "body_html": "<p>I spent a good fraction of the day debugging this before coming to a somewhat obvious realization. If you read the Graves paper, CTC beam decoding implicitly collapses repeated characters as part of calculating the optimal path (i.e. 'AAA' will contribute probability mass through the path 'A').</p>\n<p>So the correct CTC decoding behavior occurs when <code>merge_repeated=False</code>. In this case, it DOES merge repeated characters. The <code>merge_repeated</code> flag, when true, will merge repeated characters after characters have already been merged/blank symbols removed. This parameter should simply be removed. As it stands now, the behavior is <em>extremely</em> misleading.</p>\n<p>I'm happy to provide a PR for this change if it's something a tensorflower would be amenable with. cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1794715\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ebrevdo\">@ebrevdo</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7946809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gunan\">@gunan</a></p>", "body_text": "I spent a good fraction of the day debugging this before coming to a somewhat obvious realization. If you read the Graves paper, CTC beam decoding implicitly collapses repeated characters as part of calculating the optimal path (i.e. 'AAA' will contribute probability mass through the path 'A').\nSo the correct CTC decoding behavior occurs when merge_repeated=False. In this case, it DOES merge repeated characters. The merge_repeated flag, when true, will merge repeated characters after characters have already been merged/blank symbols removed. This parameter should simply be removed. As it stands now, the behavior is extremely misleading.\nI'm happy to provide a PR for this change if it's something a tensorflower would be amenable with. cc @ebrevdo @gunan", "body": "I spent a good fraction of the day debugging this before coming to a somewhat obvious realization. If you read the Graves paper, CTC beam decoding implicitly collapses repeated characters as part of calculating the optimal path (i.e. 'AAA' will contribute probability mass through the path 'A'). \r\n\r\nSo the correct CTC decoding behavior occurs when `merge_repeated=False`. In this case, it DOES merge repeated characters. The `merge_repeated` flag, when true, will merge repeated characters after characters have already been merged/blank symbols removed. This parameter should simply be removed. As it stands now, the behavior is _extremely_ misleading.\r\n\r\nI'm happy to provide a PR for this change if it's something a tensorflower would be amenable with. cc @ebrevdo @gunan "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/76190150", "pull_request_review_id": null, "id": 76190150, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc2MTkwMTUw", "diff_hunk": "@@ -1109,7 +1109,7 @@ def dropout(x, keep_prob, noise_shape=None, seed=None, name=None):\n   \"\"\"\n   with ops.name_scope(name, \"dropout\", [x]) as name:\n     x = ops.convert_to_tensor(x, name=\"x\")\n-    if isinstance(keep_prob, float) and not 0 < keep_prob <= 1:\n+    if (isinstance(keep_prob, int) or isinstance(keep_prob, float)) and not 0 < keep_prob <= 1:\n       raise ValueError(\"keep_prob must be a scalar tensor or a float in the \"", "path": "tensorflow/python/ops/nn_ops.py", "position": null, "original_position": 6, "commit_id": "8945adf2fd8806b36d42a15b5fca70b7726a3c39", "original_commit_id": "1028c83d9fd338149c305604c1a89e93ff02812b", "user": {"login": "gnebehay", "id": 756433, "node_id": "MDQ6VXNlcjc1NjQzMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/756433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnebehay", "html_url": "https://github.com/gnebehay", "followers_url": "https://api.github.com/users/gnebehay/followers", "following_url": "https://api.github.com/users/gnebehay/following{/other_user}", "gists_url": "https://api.github.com/users/gnebehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnebehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnebehay/subscriptions", "organizations_url": "https://api.github.com/users/gnebehay/orgs", "repos_url": "https://api.github.com/users/gnebehay/repos", "events_url": "https://api.github.com/users/gnebehay/events{/privacy}", "received_events_url": "https://api.github.com/users/gnebehay/received_events", "type": "User", "site_admin": false}, "body": "It seems that the problem prevails when long ints are passed, e.g. 0L.\n\nIf you can afford an additional import,\n\nimport numbers\nisinstance(keep_prob, numbers.Real)\n\nappears to be the proper solution.\n\nhttp://stackoverflow.com/questions/4541155/check-if-a-number-is-int-or-float\n\nOn 25 August 2016 at 06:44, Derek Murray notifications@github.com wrote:\n\n> In tensorflow/python/ops/nn_ops.py\n> https://github.com/tensorflow/tensorflow/pull/4015#discussion_r76179387:\n> \n> > @@ -1109,7 +1109,7 @@ def dropout(x, keep_prob, noise_shape=None, seed=None, name=None):\n> >    \"\"\"\n> >    with ops.name_scope(name, \"dropout\", [x]) as name:\n> >      x = ops.convert_to_tensor(x, name=\"x\")\n> > -    if isinstance(keep_prob, float) and not 0 < keep_prob <= 1:\n> > -    if (isinstance(keep_prob, int) or isinstance(keep_prob, float)) and not 0 < keep_prob <= 1:\n> >      raise ValueError(\"keep_prob must be a scalar tensor or a float in the \"\n> \n> Sorry for the drive-by, but isinstance(keep_prob, (float, int)) would be\n> more idiomatic (and compact!) here.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/pull/4015/files/1028c83d9fd338149c305604c1a89e93ff02812b#r76179387,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAuK0fLQLW9PtD5QkyQjYkFDJk5Mop3Kks5qjR2xgaJpZM4Jr7f_\n> .\n", "created_at": "2016-08-25T07:02:21Z", "updated_at": "2016-08-26T06:47:41Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4015#discussion_r76190150", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4015", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/76190150"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4015#discussion_r76190150"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4015"}}, "body_html": "<p>It seems that the problem prevails when long ints are passed, e.g. 0L.</p>\n<p>If you can afford an additional import,</p>\n<p>import numbers<br>\nisinstance(keep_prob, numbers.Real)</p>\n<p>appears to be the proper solution.</p>\n<p><a href=\"http://stackoverflow.com/questions/4541155/check-if-a-number-is-int-or-float\" rel=\"nofollow\">http://stackoverflow.com/questions/4541155/check-if-a-number-is-int-or-float</a></p>\n<p>On 25 August 2016 at 06:44, Derek Murray <a href=\"mailto:notifications@github.com\">notifications@github.com</a> wrote:</p>\n<blockquote>\n<p>In tensorflow/python/ops/nn_ops.py<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"172933240\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4015\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/4015/hovercard?comment_id=76179387&amp;comment_type=review_comment\" href=\"https://github.com/tensorflow/tensorflow/pull/4015#discussion_r76179387\">#4015 (comment)</a>:</p>\n<blockquote>\n<p>@@ -1109,7 +1109,7 @@ def dropout(x, keep_prob, noise_shape=None, seed=None, name=None):<br>\n\"\"\"<br>\nwith ops.name_scope(name, \"dropout\", [x]) as name:<br>\nx = ops.convert_to_tensor(x, name=\"x\")</p>\n<ul>\n<li>if isinstance(keep_prob, float) and not 0 &lt; keep_prob &lt;= 1:</li>\n<li>if (isinstance(keep_prob, int) or isinstance(keep_prob, float)) and not 0 &lt; keep_prob &lt;= 1:<br>\nraise ValueError(\"keep_prob must be a scalar tensor or a float in the \"</li>\n</ul>\n</blockquote>\n<p>Sorry for the drive-by, but isinstance(keep_prob, (float, int)) would be<br>\nmore idiomatic (and compact!) here.</p>\n<p>\u2014<br>\nYou are receiving this because you authored the thread.<br>\nReply to this email directly, view it on GitHub<br>\n<a href=\"https://github.com/tensorflow/tensorflow/pull/4015/files/1028c83d9fd338149c305604c1a89e93ff02812b#r76179387\">https://github.com/tensorflow/tensorflow/pull/4015/files/1028c83d9fd338149c305604c1a89e93ff02812b#r76179387</a>,<br>\nor mute the thread<br>\n<a href=\"https://github.com/notifications/unsubscribe-auth/AAuK0fLQLW9PtD5QkyQjYkFDJk5Mop3Kks5qjR2xgaJpZM4Jr7f\">https://github.com/notifications/unsubscribe-auth/AAuK0fLQLW9PtD5QkyQjYkFDJk5Mop3Kks5qjR2xgaJpZM4Jr7f</a>_<br>\n.</p>\n</blockquote>", "body_text": "It seems that the problem prevails when long ints are passed, e.g. 0L.\nIf you can afford an additional import,\nimport numbers\nisinstance(keep_prob, numbers.Real)\nappears to be the proper solution.\nhttp://stackoverflow.com/questions/4541155/check-if-a-number-is-int-or-float\nOn 25 August 2016 at 06:44, Derek Murray notifications@github.com wrote:\n\nIn tensorflow/python/ops/nn_ops.py\n#4015 (comment):\n\n@@ -1109,7 +1109,7 @@ def dropout(x, keep_prob, noise_shape=None, seed=None, name=None):\n\"\"\"\nwith ops.name_scope(name, \"dropout\", [x]) as name:\nx = ops.convert_to_tensor(x, name=\"x\")\n\nif isinstance(keep_prob, float) and not 0 < keep_prob <= 1:\nif (isinstance(keep_prob, int) or isinstance(keep_prob, float)) and not 0 < keep_prob <= 1:\nraise ValueError(\"keep_prob must be a scalar tensor or a float in the \"\n\n\nSorry for the drive-by, but isinstance(keep_prob, (float, int)) would be\nmore idiomatic (and compact!) here.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/tensorflow/tensorflow/pull/4015/files/1028c83d9fd338149c305604c1a89e93ff02812b#r76179387,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAuK0fLQLW9PtD5QkyQjYkFDJk5Mop3Kks5qjR2xgaJpZM4Jr7f_\n."}
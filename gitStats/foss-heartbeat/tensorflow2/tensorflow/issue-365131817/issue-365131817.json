{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22617", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22617/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22617/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22617/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22617", "id": 365131817, "node_id": "MDU6SXNzdWUzNjUxMzE4MTc=", "number": 22617, "title": "No module named '_tensorflow_wrap_toco'", "user": {"login": "B-C-WANG", "id": 25495799, "node_id": "MDQ6VXNlcjI1NDk1Nzk5", "avatar_url": "https://avatars3.githubusercontent.com/u/25495799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/B-C-WANG", "html_url": "https://github.com/B-C-WANG", "followers_url": "https://api.github.com/users/B-C-WANG/followers", "following_url": "https://api.github.com/users/B-C-WANG/following{/other_user}", "gists_url": "https://api.github.com/users/B-C-WANG/gists{/gist_id}", "starred_url": "https://api.github.com/users/B-C-WANG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/B-C-WANG/subscriptions", "organizations_url": "https://api.github.com/users/B-C-WANG/orgs", "repos_url": "https://api.github.com/users/B-C-WANG/repos", "events_url": "https://api.github.com/users/B-C-WANG/events{/privacy}", "received_events_url": "https://api.github.com/users/B-C-WANG/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2018-09-29T13:17:45Z", "updated_at": "2018-10-15T22:26:37Z", "closed_at": "2018-10-11T16:40:10Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nyes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nWindows 10</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nbinary (through pip)</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.11.0</li>\n<li><strong>Python version</strong>:<br>\n3.6.4</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nNone (CPU only)</li>\n<li><strong>GPU model and memory</strong>:<br>\nNone</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I saved my keras model to file and tried to use \"lite.TFLiteConverter.from_keras_model_file(...)\"  and \"tflite_model = converter.convert()\" to get a lite model, but got error \"No module named '_tensorflow_wrap_toco'\". This is only a \"tensorflow_wrap_toco.py\" in \"\\tensorflow\\contrib\\lite\\toco\\python\", and no \"_tensorflow_wrap_toco\" in that file.<br>\nI have updated my tensorflow through \"pip install tensorflow --upgrade\"</p>\n<h3>Source code / logs</h3>\n<pre><code>model= get_testing_model(input_shape=(160,140)) \nmodel.load_weights(keras_weights_file)\nmodel.save(\"kerasModel.h5\")\nconverter = lite.TFLiteConverter.from_keras_model_file(\"kerasModel.h5\")\ntflite_model = converter.convert() # bug happens here\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\n</code></pre>\n<p>Logs:<br>\nFutureWarning: Conversion of the second argument of issubdtype from <code>float</code> to <code>np.floating</code> is deprecated. In future, it will be treated as <code>np.float64 == np.dtype(float).type</code>.<br>\nfrom ._conv import register_converters as _register_converters<br>\nUsing TensorFlow backend.<br>\n2018-09-29 21:03:55.936260: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2<br>\nWARNING:tensorflow:No training configuration found in save file: the model was <em>not</em> compiled. Compile it manually.<br>\nTraceback (most recent call last):<br>\nFile \"C:/Users/wang/Desktop/OpenPoseApp/camera-openpose-keras/demo_camera.py\", line 325, in <br>\nsave_tf_lite_model()<br>\nFile \"C:/Users/wang/Desktop/OpenPoseApp/camera-openpose-keras/demo_camera.py\", line 311, in save_tf_lite_model<br>\ntflite_model = converter.convert()<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\lite.py\", line 453, in convert<br>\n**converter_kwargs)<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\convert.py\", line 342, in toco_convert_impl<br>\ninput_data.SerializeToString())<br>\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\convert.py\", line 135, in toco_convert_protos<br>\n(stdout, stderr))<br>\nRuntimeError: TOCO failed see console for info.<br>\nb'c:\\programdata\\anaconda3\\lib\\site-packages\\h5py\\<strong>init</strong>.py:36: FutureWarning: Conversion of the second argument of issubdtype from <code>float</code> to <code>np.floating</code> is deprecated. In future, it will be treated as <code>np.float64 == np.dtype(float).type</code>.\\r\\n  from ._conv import register_converters as _register_converters\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 18, in swig_import_helper\\r\\n    fp, pathname, description = imp.find_module('_tensorflow_wrap_toco', [dirname(<strong>file</strong>)])\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\imp.py\", line 297, in find_module\\r\\n    raise ImportError(_ERR_MSG.format(name), name=name)\\r\\nImportError: No module named '_tensorflow_wrap_toco'\\r\\n\\r\\nDuring handling of the above exception, another exception occurred:\\r\\n\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\runpy.py\", line 193, in _run_module_as_main\\r\\n    \"<strong>main</strong>\", mod_spec)\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\runpy.py\", line 85, in _run_code\\r\\n    exec(code, run_globals)\\r\\n  File \"C:\\ProgramData\\Anaconda3\\Scripts\\toco_from_protos.exe\\<strong>main</strong>.py\", line 5, in \\r\\n  File \"c:\\programdata\\anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\toco_from_protos.py\", line 22, in \\r\\n    from tensorflow.contrib.lite.toco.python import tensorflow_wrap_toco\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 28, in \\r\\n    _tensorflow_wrap_toco = swig_import_helper()\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 20, in swig_import_helper\\r\\n    import _tensorflow_wrap_toco\\r\\nModuleNotFoundError: No module named '_tensorflow_wrap_toco'\\r\\n'<br>\nNone</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nyes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nWindows 10\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nTensorFlow installed from (source or binary):\nbinary (through pip)\nTensorFlow version (use command below):\n1.11.0\nPython version:\n3.6.4\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version:\nNone (CPU only)\nGPU model and memory:\nNone\nExact command to reproduce:\n\nDescribe the problem\nI saved my keras model to file and tried to use \"lite.TFLiteConverter.from_keras_model_file(...)\"  and \"tflite_model = converter.convert()\" to get a lite model, but got error \"No module named '_tensorflow_wrap_toco'\". This is only a \"tensorflow_wrap_toco.py\" in \"\\tensorflow\\contrib\\lite\\toco\\python\", and no \"_tensorflow_wrap_toco\" in that file.\nI have updated my tensorflow through \"pip install tensorflow --upgrade\"\nSource code / logs\nmodel= get_testing_model(input_shape=(160,140)) \nmodel.load_weights(keras_weights_file)\nmodel.save(\"kerasModel.h5\")\nconverter = lite.TFLiteConverter.from_keras_model_file(\"kerasModel.h5\")\ntflite_model = converter.convert() # bug happens here\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\n\nLogs:\nFutureWarning: Conversion of the second argument of issubdtype from float to np.floating is deprecated. In future, it will be treated as np.float64 == np.dtype(float).type.\nfrom ._conv import register_converters as _register_converters\nUsing TensorFlow backend.\n2018-09-29 21:03:55.936260: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\nWARNING:tensorflow:No training configuration found in save file: the model was not compiled. Compile it manually.\nTraceback (most recent call last):\nFile \"C:/Users/wang/Desktop/OpenPoseApp/camera-openpose-keras/demo_camera.py\", line 325, in \nsave_tf_lite_model()\nFile \"C:/Users/wang/Desktop/OpenPoseApp/camera-openpose-keras/demo_camera.py\", line 311, in save_tf_lite_model\ntflite_model = converter.convert()\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\lite.py\", line 453, in convert\n**converter_kwargs)\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\convert.py\", line 342, in toco_convert_impl\ninput_data.SerializeToString())\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\convert.py\", line 135, in toco_convert_protos\n(stdout, stderr))\nRuntimeError: TOCO failed see console for info.\nb'c:\\programdata\\anaconda3\\lib\\site-packages\\h5py\\init.py:36: FutureWarning: Conversion of the second argument of issubdtype from float to np.floating is deprecated. In future, it will be treated as np.float64 == np.dtype(float).type.\\r\\n  from ._conv import register_converters as _register_converters\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 18, in swig_import_helper\\r\\n    fp, pathname, description = imp.find_module('_tensorflow_wrap_toco', [dirname(file)])\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\imp.py\", line 297, in find_module\\r\\n    raise ImportError(_ERR_MSG.format(name), name=name)\\r\\nImportError: No module named '_tensorflow_wrap_toco'\\r\\n\\r\\nDuring handling of the above exception, another exception occurred:\\r\\n\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\runpy.py\", line 193, in _run_module_as_main\\r\\n    \"main\", mod_spec)\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\runpy.py\", line 85, in _run_code\\r\\n    exec(code, run_globals)\\r\\n  File \"C:\\ProgramData\\Anaconda3\\Scripts\\toco_from_protos.exe\\main.py\", line 5, in \\r\\n  File \"c:\\programdata\\anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\toco_from_protos.py\", line 22, in \\r\\n    from tensorflow.contrib.lite.toco.python import tensorflow_wrap_toco\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 28, in \\r\\n    _tensorflow_wrap_toco = swig_import_helper()\\r\\n  File \"c:\\programdata\\anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\toco\\python\\tensorflow_wrap_toco.py\", line 20, in swig_import_helper\\r\\n    import _tensorflow_wrap_toco\\r\\nModuleNotFoundError: No module named '_tensorflow_wrap_toco'\\r\\n'\nNone", "body": "\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nyes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nWindows 10\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary (through pip)\r\n- **TensorFlow version (use command below)**:\r\n1.11.0\r\n- **Python version**:\r\n3.6.4\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\nNone (CPU only)\r\n- **GPU model and memory**:\r\nNone\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nI saved my keras model to file and tried to use \"lite.TFLiteConverter.from_keras_model_file(...)\"  and \"tflite_model = converter.convert()\" to get a lite model, but got error \"No module named '_tensorflow_wrap_toco'\". This is only a \"tensorflow_wrap_toco.py\" in \"\\tensorflow\\contrib\\lite\\toco\\python\", and no \"_tensorflow_wrap_toco\" in that file.\r\nI have updated my tensorflow through \"pip install tensorflow --upgrade\"\r\n\r\n### Source code / logs\r\n```\r\nmodel= get_testing_model(input_shape=(160,140)) \r\nmodel.load_weights(keras_weights_file)\r\nmodel.save(\"kerasModel.h5\")\r\nconverter = lite.TFLiteConverter.from_keras_model_file(\"kerasModel.h5\")\r\ntflite_model = converter.convert() # bug happens here\r\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\n```\r\nLogs:\r\nFutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\nUsing TensorFlow backend.\r\n2018-09-29 21:03:55.936260: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\nWARNING:tensorflow:No training configuration found in save file: the model was *not* compiled. Compile it manually.\r\nTraceback (most recent call last):\r\n  File \"C:/Users/wang/Desktop/OpenPoseApp/camera-openpose-keras/demo_camera.py\", line 325, in <module>\r\n    save_tf_lite_model()\r\n  File \"C:/Users/wang/Desktop/OpenPoseApp/camera-openpose-keras/demo_camera.py\", line 311, in save_tf_lite_model\r\n    tflite_model = converter.convert()\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\lite.py\", line 453, in convert\r\n    **converter_kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\convert.py\", line 342, in toco_convert_impl\r\n    input_data.SerializeToString())\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\lite\\python\\convert.py\", line 135, in toco_convert_protos\r\n    (stdout, stderr))\r\nRuntimeError: TOCO failed see console for info.\r\nb'c:\\\\programdata\\\\anaconda3\\\\lib\\\\site-packages\\\\h5py\\\\__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\\r\\n  from ._conv import register_converters as _register_converters\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\\\programdata\\\\anaconda3\\\\lib\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 18, in swig_import_helper\\r\\n    fp, pathname, description = imp.find_module(\\'_tensorflow_wrap_toco\\', [dirname(__file__)])\\r\\n  File \"c:\\\\programdata\\\\anaconda3\\\\lib\\\\imp.py\", line 297, in find_module\\r\\n    raise ImportError(_ERR_MSG.format(name), name=name)\\r\\nImportError: No module named \\'_tensorflow_wrap_toco\\'\\r\\n\\r\\nDuring handling of the above exception, another exception occurred:\\r\\n\\r\\nTraceback (most recent call last):\\r\\n  File \"c:\\\\programdata\\\\anaconda3\\\\lib\\\\runpy.py\", line 193, in _run_module_as_main\\r\\n    \"__main__\", mod_spec)\\r\\n  File \"c:\\\\programdata\\\\anaconda3\\\\lib\\\\runpy.py\", line 85, in _run_code\\r\\n    exec(code, run_globals)\\r\\n  File \"C:\\\\ProgramData\\\\Anaconda3\\\\Scripts\\\\toco_from_protos.exe\\\\__main__.py\", line 5, in <module>\\r\\n  File \"c:\\\\programdata\\\\anaconda3\\\\lib\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\toco_from_protos.py\", line 22, in <module>\\r\\n    from tensorflow.contrib.lite.toco.python import tensorflow_wrap_toco\\r\\n  File \"c:\\\\programdata\\\\anaconda3\\\\lib\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 28, in <module>\\r\\n    _tensorflow_wrap_toco = swig_import_helper()\\r\\n  File \"c:\\\\programdata\\\\anaconda3\\\\lib\\\\site-packages\\\\tensorflow\\\\contrib\\\\lite\\\\toco\\\\python\\\\tensorflow_wrap_toco.py\", line 20, in swig_import_helper\\r\\n    import _tensorflow_wrap_toco\\r\\nModuleNotFoundError: No module named \\'_tensorflow_wrap_toco\\'\\r\\n'\r\nNone\r\n"}
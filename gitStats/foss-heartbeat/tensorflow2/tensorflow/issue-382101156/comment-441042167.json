{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/441042167", "html_url": "https://github.com/tensorflow/tensorflow/issues/23846#issuecomment-441042167", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23846", "id": 441042167, "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTA0MjE2Nw==", "user": {"login": "formath", "id": 6040127, "node_id": "MDQ6VXNlcjYwNDAxMjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6040127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/formath", "html_url": "https://github.com/formath", "followers_url": "https://api.github.com/users/formath/followers", "following_url": "https://api.github.com/users/formath/following{/other_user}", "gists_url": "https://api.github.com/users/formath/gists{/gist_id}", "starred_url": "https://api.github.com/users/formath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/formath/subscriptions", "organizations_url": "https://api.github.com/users/formath/orgs", "repos_url": "https://api.github.com/users/formath/repos", "events_url": "https://api.github.com/users/formath/events{/privacy}", "received_events_url": "https://api.github.com/users/formath/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-22T14:11:46Z", "updated_at": "2018-11-22T14:11:46Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I also found a strange thing. If replacing the inputs of <code>self.model</code> from tensors generated by data iterator with tensor placeholder, the program will not hangs.</p>\n<div class=\"highlight highlight-source-python\"><pre>train_user_id_placeholder <span class=\"pl-k\">=</span> tf.placeholder(<span class=\"pl-c1\">...</span>)\ntrain_item_id_placeholder <span class=\"pl-k\">=</span> <span class=\"pl-c1\">...</span>\ntrain_label_placeholder <span class=\"pl-k\">=</span> <span class=\"pl-c1\">...</span>\ntrain_logit <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.model(train_user_id_placeholder, train_item_id_placeholder)\n<span class=\"pl-c1\">...</span>\ntrain_op <span class=\"pl-k\">=</span> opt.minimize(train_loss)\n<span class=\"pl-c1\">...</span>\n<span class=\"pl-k\">try</span>:\n  train_user_id_val, train_item_id_val, train_label_val <span class=\"pl-k\">=</span> sess.run([train_user_id, train_item_id, train_label])\n  sess.run(train_op,\n      <span class=\"pl-v\">feed_dict</span><span class=\"pl-k\">=</span>{\n        train_user_id_placeholder: train_user_id_val,\n        train_item_id_placeholder: train_item_id_val,\n        train_label_placeholder: train_label_val})\n<span class=\"pl-k\">except</span> tf.errors.OutOfRangeError:\n   <span class=\"pl-c1\">...</span></pre></div>", "body_text": "I also found a strange thing. If replacing the inputs of self.model from tensors generated by data iterator with tensor placeholder, the program will not hangs.\ntrain_user_id_placeholder = tf.placeholder(...)\ntrain_item_id_placeholder = ...\ntrain_label_placeholder = ...\ntrain_logit = self.model(train_user_id_placeholder, train_item_id_placeholder)\n...\ntrain_op = opt.minimize(train_loss)\n...\ntry:\n  train_user_id_val, train_item_id_val, train_label_val = sess.run([train_user_id, train_item_id, train_label])\n  sess.run(train_op,\n      feed_dict={\n        train_user_id_placeholder: train_user_id_val,\n        train_item_id_placeholder: train_item_id_val,\n        train_label_placeholder: train_label_val})\nexcept tf.errors.OutOfRangeError:\n   ...", "body": "I also found a strange thing. If replacing the inputs of `self.model` from tensors generated by data iterator with tensor placeholder, the program will not hangs.\r\n```python\r\ntrain_user_id_placeholder = tf.placeholder(...)\r\ntrain_item_id_placeholder = ...\r\ntrain_label_placeholder = ...\r\ntrain_logit = self.model(train_user_id_placeholder, train_item_id_placeholder)\r\n...\r\ntrain_op = opt.minimize(train_loss)\r\n...\r\ntry:\r\n  train_user_id_val, train_item_id_val, train_label_val = sess.run([train_user_id, train_item_id, train_label])\r\n  sess.run(train_op,\r\n      feed_dict={\r\n        train_user_id_placeholder: train_user_id_val,\r\n        train_item_id_placeholder: train_item_id_val,\r\n        train_label_placeholder: train_label_val})\r\nexcept tf.errors.OutOfRangeError:\r\n   ...\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9190", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9190/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9190/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9190/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9190", "id": 221584898, "node_id": "MDU6SXNzdWUyMjE1ODQ4OTg=", "number": 9190, "title": "SpaceToBatchND / BatchToSpaceND Documentation Error", "user": {"login": "eplondke", "id": 1642090, "node_id": "MDQ6VXNlcjE2NDIwOTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1642090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eplondke", "html_url": "https://github.com/eplondke", "followers_url": "https://api.github.com/users/eplondke/followers", "following_url": "https://api.github.com/users/eplondke/following{/other_user}", "gists_url": "https://api.github.com/users/eplondke/gists{/gist_id}", "starred_url": "https://api.github.com/users/eplondke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eplondke/subscriptions", "organizations_url": "https://api.github.com/users/eplondke/orgs", "repos_url": "https://api.github.com/users/eplondke/repos", "events_url": "https://api.github.com/users/eplondke/events{/privacy}", "received_events_url": "https://api.github.com/users/eplondke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-13T14:43:54Z", "updated_at": "2017-04-13T21:18:23Z", "closed_at": "2017-04-13T21:18:23Z", "author_association": "NONE", "body_html": "<p>I think there is an error in the <em>documentation</em> for SpaceToBatchND and BatchToSpaceND.  (The op itself seems to be working fine.)</p>\n<p>In example (3) from SpaceToBatchND:</p>\n<blockquote>\n<p>(3) For the following input of shape [1, 4, 4, 1], block_shape = [2, 2], and paddings = [[0, 0], [0, 0]]:</p>\n<p><code>prettyprint x = [[[[1], [2], [3], [4]], [[5], [6], [7], [8]], [[9], [10], [11], [12]], [[13], [14], [15], [16]]]] </code></p>\n<p>The output tensor has shape [4, 2, 2, 1] and value:</p>\n<p><code>prettyprint x = [[[[1], [3]], [[5], [7]]], [[[2], [4]], [[10], [12]]], [[[5], [7]], [[13], [15]]], [[[6], [8]], [[14], [16]]]] </code></p>\n</blockquote>\n<p>Note how [[5],[7]] appears twice in the result and [[9],[11]] is missing.</p>\n<p>The example (3) in BatchToSpaceND has the same problem in reverse.</p>\n<p>If I actually try this op in TensorFlow, I get results that differ from the documentation but make sense to me:</p>\n<pre><code>\n&gt;&gt;&gt; bshape = [2,2]\n&gt;&gt;&gt; paddings = [[0,0],[0,0]]\n&gt;&gt;&gt; x  = [[[[1], [2], [3], [4]], [[5], [6], [7], [8]], [[9], [10], [11], [12]], [[13], [14], [15], [16]]]]\n&gt;&gt;&gt; s2btest = tf.space_to_batch_nd(x,bshape,paddings)\n&gt;&gt;&gt; sess.run(s2btest)\narray([[[[ 1],\n         [ 3]],\n\n        [[ 9],\n         [11]]],\n\n\n       [[[ 2],\n         [ 4]],\n\n        [[10],\n         [12]]],\n\n\n       [[[ 5],\n         [ 7]],\n\n        [[13],\n         [15]]],\n\n\n       [[[ 6],\n         [ 8]],\n\n        [[14],\n         [16]]]], dtype=int32)\n\n</code></pre>\n<p>Example tried with TensorFlow from source / Linux Ubuntu Xenial / v1.1.0-rc1-168-g0054c39 1.1.0-rc1<br>\n.</p>\n<p>Documentation from <a href=\"https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/batch-to-space-n-d\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/batch-to-space-n-d</a> and <a href=\"https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/space-to-batch-n-d\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/space-to-batch-n-d</a></p>\n<p>Looking at the doc string this may be fixed in master (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/d1ba01f81d8fa1d0171ba9ce871599063d5c7eb9/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/d1ba01f81d8fa1d0171ba9ce871599063d5c7eb9\"><tt>d1ba01f</tt></a>) and just not updated on the 1.0 branch web docs yet.</p>", "body_text": "I think there is an error in the documentation for SpaceToBatchND and BatchToSpaceND.  (The op itself seems to be working fine.)\nIn example (3) from SpaceToBatchND:\n\n(3) For the following input of shape [1, 4, 4, 1], block_shape = [2, 2], and paddings = [[0, 0], [0, 0]]:\nprettyprint x = [[[[1], [2], [3], [4]], [[5], [6], [7], [8]], [[9], [10], [11], [12]], [[13], [14], [15], [16]]]] \nThe output tensor has shape [4, 2, 2, 1] and value:\nprettyprint x = [[[[1], [3]], [[5], [7]]], [[[2], [4]], [[10], [12]]], [[[5], [7]], [[13], [15]]], [[[6], [8]], [[14], [16]]]] \n\nNote how [[5],[7]] appears twice in the result and [[9],[11]] is missing.\nThe example (3) in BatchToSpaceND has the same problem in reverse.\nIf I actually try this op in TensorFlow, I get results that differ from the documentation but make sense to me:\n\n>>> bshape = [2,2]\n>>> paddings = [[0,0],[0,0]]\n>>> x  = [[[[1], [2], [3], [4]], [[5], [6], [7], [8]], [[9], [10], [11], [12]], [[13], [14], [15], [16]]]]\n>>> s2btest = tf.space_to_batch_nd(x,bshape,paddings)\n>>> sess.run(s2btest)\narray([[[[ 1],\n         [ 3]],\n\n        [[ 9],\n         [11]]],\n\n\n       [[[ 2],\n         [ 4]],\n\n        [[10],\n         [12]]],\n\n\n       [[[ 5],\n         [ 7]],\n\n        [[13],\n         [15]]],\n\n\n       [[[ 6],\n         [ 8]],\n\n        [[14],\n         [16]]]], dtype=int32)\n\n\nExample tried with TensorFlow from source / Linux Ubuntu Xenial / v1.1.0-rc1-168-g0054c39 1.1.0-rc1\n.\nDocumentation from https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/batch-to-space-n-d and https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/space-to-batch-n-d\nLooking at the doc string this may be fixed in master (d1ba01f) and just not updated on the 1.0 branch web docs yet.", "body": "\r\nI think there is an error in the *documentation* for SpaceToBatchND and BatchToSpaceND.  (The op itself seems to be working fine.)\r\n\r\nIn example (3) from SpaceToBatchND:\r\n\r\n> (3) For the following input of shape [1, 4, 4, 1], block_shape = [2, 2], and paddings = [[0, 0], [0, 0]]:\r\n> \r\n> ```prettyprint x = [[[[1], [2], [3], [4]], [[5], [6], [7], [8]], [[9], [10], [11], [12]], [[13], [14], [15], [16]]]] ```\r\n> \r\n> The output tensor has shape [4, 2, 2, 1] and value:\r\n> \r\n> ```prettyprint x = [[[[1], [3]], [[5], [7]]], [[[2], [4]], [[10], [12]]], [[[5], [7]], [[13], [15]]], [[[6], [8]], [[14], [16]]]] ```\r\n\r\nNote how [[5],[7]] appears twice in the result and [[9],[11]] is missing.\r\n\r\nThe example (3) in BatchToSpaceND has the same problem in reverse.\r\n\r\nIf I actually try this op in TensorFlow, I get results that differ from the documentation but make sense to me:\r\n\r\n```\r\n\r\n>>> bshape = [2,2]\r\n>>> paddings = [[0,0],[0,0]]\r\n>>> x  = [[[[1], [2], [3], [4]], [[5], [6], [7], [8]], [[9], [10], [11], [12]], [[13], [14], [15], [16]]]]\r\n>>> s2btest = tf.space_to_batch_nd(x,bshape,paddings)\r\n>>> sess.run(s2btest)\r\narray([[[[ 1],\r\n         [ 3]],\r\n\r\n        [[ 9],\r\n         [11]]],\r\n\r\n\r\n       [[[ 2],\r\n         [ 4]],\r\n\r\n        [[10],\r\n         [12]]],\r\n\r\n\r\n       [[[ 5],\r\n         [ 7]],\r\n\r\n        [[13],\r\n         [15]]],\r\n\r\n\r\n       [[[ 6],\r\n         [ 8]],\r\n\r\n        [[14],\r\n         [16]]]], dtype=int32)\r\n\r\n```\r\n\r\n\r\nExample tried with TensorFlow from source / Linux Ubuntu Xenial / v1.1.0-rc1-168-g0054c39 1.1.0-rc1\r\n.\r\n\r\nDocumentation from https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/batch-to-space-n-d and https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/space-to-batch-n-d \r\n\r\nLooking at the doc string this may be fixed in master (d1ba01f8) and just not updated on the 1.0 branch web docs yet.\r\n\r\n"}
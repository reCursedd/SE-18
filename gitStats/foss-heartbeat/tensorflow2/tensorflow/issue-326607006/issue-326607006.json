{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19557", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19557/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19557/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19557/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19557", "id": 326607006, "node_id": "MDU6SXNzdWUzMjY2MDcwMDY=", "number": 19557, "title": "OpenCL GPU support issue", "user": {"login": "Kenop", "id": 8582091, "node_id": "MDQ6VXNlcjg1ODIwOTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/8582091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kenop", "html_url": "https://github.com/Kenop", "followers_url": "https://api.github.com/users/Kenop/followers", "following_url": "https://api.github.com/users/Kenop/following{/other_user}", "gists_url": "https://api.github.com/users/Kenop/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kenop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kenop/subscriptions", "organizations_url": "https://api.github.com/users/Kenop/orgs", "repos_url": "https://api.github.com/users/Kenop/repos", "events_url": "https://api.github.com/users/Kenop/events{/privacy}", "received_events_url": "https://api.github.com/users/Kenop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-05-25T17:32:16Z", "updated_at": "2018-10-26T17:49:09Z", "closed_at": "2018-10-26T17:49:09Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: 18.04 LTS (Bionic Beaver)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: v1.8.0-2217-g7ad3964dcb 1.8.0</li>\n<li><strong>Python version</strong>: Python 3.6.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>: Build label: 0.13.1</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: g++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0</li>\n<li><strong>CUDA/cuDNN version</strong>: NA</li>\n<li><strong>GPU model and memory</strong>: AMD Radeon R9290</li>\n<li><strong>Exact command to reproduce</strong>: bazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I built TF 1.8 from source with 'y' for OpenCL SYCL and ComputeCPP support in build configuration ('n' for other options). Build was complete successfully, but GPU device seems unavailable in TF, only CPU:0 is listed by<br>\n<code>tensorflow.python.client.device_lib.device_lib.list_local_devices()</code><br>\nand<br>\n<code>tensorflow.contrib.eager.list_devices()</code><br>\nAlso, <code>tensorflow.matmul(a, b)</code> is placed on CPU:0, log_device_placement says: \"Device mapping: no known devices.\"</p>\n<p><code>bazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test</code><br>\nfails with errors from SYCL.</p>\n<p>Bazel test, clinfo and computecpp_info logs are listed below.</p>\n<p>Requirements for OpenCL GPU support seem to be met, but it doesn't work. Am I missing something?</p>\n<h3>Source code / logs</h3>\n<p>clinfo</p>\n<blockquote>\n<p>Number of platforms                               1<br>\nPlatform Name                                   AMD Accelerated Parallel Processing<br>\nPlatform Vendor                                 Advanced Micro Devices, Inc.<br>\nPlatform Version                                OpenCL 2.1 AMD-APP (2633.3)<br>\nPlatform Profile                                FULL_PROFILE<br>\nPlatform Extensions                             cl_khr_icd cl_amd_event_callback cl_amd_offline_devices<br>\nPlatform Host timer resolution                  1ns<br>\nPlatform Extensions function suffix             AMD<br>\nPlatform Name                                   AMD Accelerated Parallel Processing<br>\nNumber of devices                                 1<br>\nDevice Name                                     Hawaii<br>\nDevice Vendor                                   Advanced Micro Devices, Inc.<br>\nDevice Vendor ID                                0x1002<br>\nDevice Version                                  OpenCL 1.2 AMD-APP (2633.3)<br>\nDriver Version                                  2633.3<br>\nDevice OpenCL C Version                         OpenCL C 1.2<br>\nDevice Type                                     GPU<br>\nDevice Board Name (AMD)                         AMD Radeon R9 200 Series<br>\nDevice Topology (AMD)                           PCI-E, 01:00.0<br>\nDevice Profile                                  FULL_PROFILE<br>\nDevice Available                                Yes<br>\nCompiler Available                              Yes<br>\nLinker Available                                Yes<br>\nMax compute units                               40<br>\nSIMD per compute unit (AMD)                     4<br>\nSIMD width (AMD)                                16<br>\nSIMD instruction width (AMD)                    1<br>\nMax clock frequency                             947MHz<br>\nGraphics IP (AMD)                               7.2<br>\nDevice Partition                                (core)<br>\nMax number of sub-devices                     40<br>\nSupported partition types                     none specified<br>\nMax work item dimensions                        3<br>\nMax work item sizes                             1024x1024x1024<br>\nMax work group size                             256<br>\nPreferred work group size (AMD)                 256<br>\nMax work group size (AMD)                       1024<br>\nPreferred work group size multiple              64<br>\nWavefront width (AMD)                           64<br>\nPreferred / native vector sizes<br>\nchar                                                 4 / 4<br>\nshort                                                2 / 2<br>\nint                                                  1 / 1<br>\nlong                                                 1 / 1<br>\nhalf                                                 1 / 1        (n/a)<br>\nfloat                                                1 / 1<br>\ndouble                                               1 / 1        (cl_khr_fp64)<br>\nHalf-precision Floating-point support           (n/a)<br>\nSingle-precision Floating-point support         (core)<br>\nDenormals                                     No<br>\nInfinity and NANs                             Yes<br>\nRound to nearest                              Yes<br>\nRound to zero                                 Yes<br>\nRound to infinity                             Yes<br>\nIEEE754-2008 fused multiply-add               Yes<br>\nSupport is emulated in software               No<br>\nCorrectly-rounded divide and sqrt operations  Yes<br>\nDouble-precision Floating-point support         (cl_khr_fp64)<br>\nDenormals                                     Yes<br>\nInfinity and NANs                             Yes<br>\nRound to nearest                              Yes<br>\nRound to zero                                 Yes<br>\nRound to infinity                             Yes<br>\nIEEE754-2008 fused multiply-add               Yes<br>\nSupport is emulated in software               No<br>\nAddress bits                                    64, Little-Endian<br>\nGlobal memory size                              2471116800 (2.301GiB)<br>\nGlobal free memory (AMD)                        2398160 (2.287GiB)<br>\nGlobal memory channels (AMD)                    16<br>\nGlobal memory banks per channel (AMD)           16<br>\nGlobal memory bank width (AMD)                  256 bytes<br>\nError Correction support                        No<br>\nMax memory allocation                           2082456371 (1.939GiB)<br>\nUnified memory for Host and Device              No<br>\nMinimum alignment for any data type             128 bytes<br>\nAlignment of base address                       2048 bits (256 bytes)<br>\nGlobal Memory cache type                        Read/Write<br>\nGlobal Memory cache size                        16384 (16KiB)<br>\nGlobal Memory cache line size                   64 bytes<br>\nImage support                                   Yes<br>\nMax number of samplers per kernel             16<br>\nMax size for 1D images from buffer            134217728 pixels<br>\nMax 1D or 2D image array size                 2048 images<br>\nBase address alignment for 2D image buffers   256 bytes<br>\nPitch alignment for 2D image buffers          256 pixels<br>\nMax 2D image size                             16384x16384 pixels<br>\nMax 3D image size                             2048x2048x2048 pixels<br>\nMax number of read image args                 128<br>\nMax number of write image args                8<br>\nLocal memory type                               Local<br>\nLocal memory size                               32768 (32KiB)<br>\nLocal memory syze per CU (AMD)                  65536 (64KiB)<br>\nLocal memory banks (AMD)                        32<br>\nMax number of constant args                     8<br>\nMax constant buffer size                        2082456371 (1.939GiB)<br>\nPreferred constant buffer size (AMD)            16384 (16KiB)<br>\nMax size of kernel argument                     1024<br>\nQueue properties<br>\nOut-of-order execution                        No<br>\nProfiling                                     Yes<br>\nPrefer user sync for interop                    Yes<br>\nProfiling timer resolution                      1ns<br>\nProfiling timer offset since Epoch (AMD)        1527256350447623220ns (Fri May 25 10:52:30 2018)<br>\nExecution capabilities<br>\nRun OpenCL kernels                            Yes<br>\nRun native kernels                            No<br>\nThread trace supported (AMD)                  Yes<br>\nNumber of async queues (AMD)                  2<br>\nMax real-time compute queues (AMD)            0<br>\nMax real-time compute units (AMD)             0<br>\nSPIR versions                                 1.2<br>\nprintf() buffer size                            4194304 (4MiB)<br>\nBuilt-in kernels<br>\nDevice Extensions                               cl_khr_fp64 cl_amd_fp64 cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_3d_image_writes cl_khr_byte_addressable_store cl_khr_gl_sharing cl_amd_device_attribute_query cl_amd_vec3 cl_amd_printf cl_amd_media_ops cl_amd_media_ops2 cl_amd_popcnt cl_khr_image2d_from_buffer cl_khr_spir cl_khr_gl_event<br>\nNULL platform behavior<br>\nclGetPlatformInfo(NULL, CL_PLATFORM_NAME, ...)  No platform<br>\nclGetDeviceIDs(NULL, CL_DEVICE_TYPE_ALL, ...)   No platform<br>\nclCreateContext(NULL, ...) [default]            No platform<br>\nclCreateContext(NULL, ...) [other]              Success [AMD]<br>\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_DEFAULT)  Success (1)<br>\nPlatform Name                                 AMD Accelerated Parallel Processing<br>\nDevice Name                                   Hawaii<br>\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_CPU)  No devices found in platform<br>\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_GPU)  Success (1)<br>\nPlatform Name                                 AMD Accelerated Parallel Processing<br>\nDevice Name                                   Hawaii<br>\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_ACCELERATOR)  No devices found in platform<br>\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_CUSTOM)  No devices found in platform<br>\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_ALL)  Success (1)<br>\nPlatform Name                                 AMD Accelerated Parallel Processing<br>\nDevice Name                                   Hawaii</p>\n</blockquote>\n<p>/usr/local/computecpp/bin/computecpp_info</p>\n<blockquote>\n<p>ComputeCpp Info (CE 0.8.0)<br>\nToolchain information:<br>\nGLIBC version: 2.27<br>\nGLIBCXX: 20160609<br>\nThis version of libstdc++ is supported.<br>\nDevice Info:<br>\nDiscovered 1 devices matching:<br>\nplatform    : <br>\ndevice type : <br>\nDevice 0:<br>\nDevice is supported                     : UNTESTED - Untested OS<br>\nCL_DEVICE_NAME                          : Hawaii<br>\nCL_DEVICE_VENDOR                        : Advanced Micro Devices, Inc.<br>\nCL_DRIVER_VERSION                       : 2633.3<br>\nCL_DEVICE_TYPE                          : CL_DEVICE_TYPE_GPU</p>\n</blockquote>\n<p>bazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test</p>\n<blockquote>\n<p>INFO: Analysed target //tensorflow/python/kernel_tests:basic_gpu_test (0 packages loaded).<br>\nINFO: Found 1 test target...<br>\nERROR: /home/dmitry/Soft/dev/source/TensorFlow/tensorflow/tensorflow/core/BUILD:715:1: C++ compilation of rule '//tensorflow/core:ctc_ops_op_lib' failed (Exit 1)<br>\nIn file included from tensorflow/core/ops/ctc_ops.cc:17:<br>\nIn file included from ./tensorflow/core/framework/shape_inference.h:20:<br>\nIn file included from ./tensorflow/core/framework/node_def_util.h:23:<br>\nIn file included from ./tensorflow/core/framework/attr_value_util.h:23:<br>\nIn file included from ./tensorflow/core/framework/partial_tensor_shape.h:20:<br>\nIn file included from ./tensorflow/core/framework/tensor_shape.h:21:<br>\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:<br>\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99:<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:163:19: error: no matching member function for call to 'get_access'<br>\nauto ptr =buf.get_access&lt;cl::sycl::access::mode::discard_write, cl::sycl::access::target::host_buffer&gt;().get_pointer();<br>\n~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:593:3: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'accessMode'<br>\nget_access() {<br>\n^<br>\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:611:53: note: candidate function template not viable: requires single argument 'cgh', but no arguments were provided<br>\naccessor&lt;T, dimensions, accessMode, accessTarget&gt; get_access(<br>\n^<br>\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:633:53: note: candidate function template not viable: requires 3 arguments, but 0 were provided<br>\naccessor&lt;T, dimensions, accessMode, accessTarget&gt; get_access(<br>\n^<br>\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:653:53: note: candidate function template not viable: requires at least 2 arguments, but 0 were provided<br>\naccessor&lt;T, dimensions, accessMode, accessTarget&gt; get_access(<br>\n^<br>\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:670:68: note: candidate function template not viable: requires 2 arguments, but 0 were provided<br>\naccessor&lt;T, dimensions, accessMode, access::target::host_buffer&gt; get_access(<br>\n^<br>\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:684:68: note: candidate function template not viable: requires at least argument 'range', but no arguments were provided<br>\naccessor&lt;T, dimensions, accessMode, access::target::host_buffer&gt; get_access(<br>\n^<br>\nIn file included from tensorflow/core/ops/ctc_ops.cc:17:<br>\nIn file included from ./tensorflow/core/framework/shape_inference.h:20:<br>\nIn file included from ./tensorflow/core/framework/node_def_util.h:23:<br>\nIn file included from ./tensorflow/core/framework/attr_value_util.h:23:<br>\nIn file included from ./tensorflow/core/framework/partial_tensor_shape.h:20:<br>\nIn file included from ./tensorflow/core/framework/tensor_shape.h:21:<br>\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:<br>\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99:<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:61: error: no member named 'map_allocator' in namespace 'cl::sycl'<br>\nauto src_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(static_cast&lt;void*&gt;(const_cast&lt;Index*&gt;(src))), cl::sycl::range&lt;1&gt;(n));<br>\n~~~~~~~~~~^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:75: error: unexpected type name 'uint8_t': expected expression<br>\nauto src_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(static_cast&lt;void*&gt;(const_cast&lt;Index*&gt;(src))), cl::sycl::range&lt;1&gt;(n));<br>\n^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:86: warning: expression result unused [-Wunused-value]<br>\nauto src_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(static_cast&lt;void*&gt;(const_cast&lt;Index*&gt;(src))), cl::sycl::range&lt;1&gt;(n));<br>\n^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:31: error: expected unqualified-id<br>\nauto src_acc =src_buf.template get_access&lt;cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer&gt;(cgh);<br>\n^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:107: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class template or class template partial specialization<br>\nauto src_acc =src_buf.template get_access&lt;cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer&gt;(cgh);<br>\n~~~~~~~~~~~~~~~~~~~~~~~~~~^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:120: error: expected ';' at end of declaration<br>\nauto src_acc =src_buf.template get_access&lt;cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer&gt;(cgh);<br>\n^<br>\n;<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:62: error: no member named 'map_allocator' in namespace 'cl::sycl'<br>\nauto dest_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(dst), cl::sycl::range&lt;1&gt;(n));<br>\n~~~~~~~~~~^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:76: error: unexpected type name 'uint8_t': expected expression<br>\nauto dest_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(dst), cl::sycl::range&lt;1&gt;(n));<br>\n^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:87: warning: expression result unused [-Wunused-value]<br>\nauto dest_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(dst), cl::sycl::range&lt;1&gt;(n));<br>\n^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:32: error: expected unqualified-id<br>\nauto dst_acc =dest_buf.template get_access&lt;cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer&gt;(cgh);<br>\n^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:117: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class template or class template partial specialization<br>\nauto dst_acc =dest_buf.template get_access&lt;cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer&gt;(cgh);<br>\n~~~~~~~~~~~~~~~~~~~~~~~~~~^<br>\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:130: error: expected ';' at end of declaration<br>\nauto dst_acc =dest_buf.template get_access&lt;cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer&gt;(cgh);<br>\n^<br>\n;<br>\n2 warnings and 11 errors generated.<br>\nTarget //tensorflow/python/kernel_tests:basic_gpu_test failed to build<br>\nUse --verbose_failures to see the command lines of failed build steps.<br>\nINFO: Elapsed time: 10.427s, Critical Path: 9.81s<br>\nINFO: 4 processes, local.<br>\nFAILED: Build did NOT complete successfully<br>\nExecuted 0 out of 1 test: 1 fails to build</p>\n</blockquote>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): 18.04 LTS (Bionic Beaver)\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): v1.8.0-2217-g7ad3964dcb 1.8.0\nPython version: Python 3.6.5\nBazel version (if compiling from source): Build label: 0.13.1\nGCC/Compiler version (if compiling from source): g++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0\nCUDA/cuDNN version: NA\nGPU model and memory: AMD Radeon R9290\nExact command to reproduce: bazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test\n\nDescribe the problem\nI built TF 1.8 from source with 'y' for OpenCL SYCL and ComputeCPP support in build configuration ('n' for other options). Build was complete successfully, but GPU device seems unavailable in TF, only CPU:0 is listed by\ntensorflow.python.client.device_lib.device_lib.list_local_devices()\nand\ntensorflow.contrib.eager.list_devices()\nAlso, tensorflow.matmul(a, b) is placed on CPU:0, log_device_placement says: \"Device mapping: no known devices.\"\nbazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test\nfails with errors from SYCL.\nBazel test, clinfo and computecpp_info logs are listed below.\nRequirements for OpenCL GPU support seem to be met, but it doesn't work. Am I missing something?\nSource code / logs\nclinfo\n\nNumber of platforms                               1\nPlatform Name                                   AMD Accelerated Parallel Processing\nPlatform Vendor                                 Advanced Micro Devices, Inc.\nPlatform Version                                OpenCL 2.1 AMD-APP (2633.3)\nPlatform Profile                                FULL_PROFILE\nPlatform Extensions                             cl_khr_icd cl_amd_event_callback cl_amd_offline_devices\nPlatform Host timer resolution                  1ns\nPlatform Extensions function suffix             AMD\nPlatform Name                                   AMD Accelerated Parallel Processing\nNumber of devices                                 1\nDevice Name                                     Hawaii\nDevice Vendor                                   Advanced Micro Devices, Inc.\nDevice Vendor ID                                0x1002\nDevice Version                                  OpenCL 1.2 AMD-APP (2633.3)\nDriver Version                                  2633.3\nDevice OpenCL C Version                         OpenCL C 1.2\nDevice Type                                     GPU\nDevice Board Name (AMD)                         AMD Radeon R9 200 Series\nDevice Topology (AMD)                           PCI-E, 01:00.0\nDevice Profile                                  FULL_PROFILE\nDevice Available                                Yes\nCompiler Available                              Yes\nLinker Available                                Yes\nMax compute units                               40\nSIMD per compute unit (AMD)                     4\nSIMD width (AMD)                                16\nSIMD instruction width (AMD)                    1\nMax clock frequency                             947MHz\nGraphics IP (AMD)                               7.2\nDevice Partition                                (core)\nMax number of sub-devices                     40\nSupported partition types                     none specified\nMax work item dimensions                        3\nMax work item sizes                             1024x1024x1024\nMax work group size                             256\nPreferred work group size (AMD)                 256\nMax work group size (AMD)                       1024\nPreferred work group size multiple              64\nWavefront width (AMD)                           64\nPreferred / native vector sizes\nchar                                                 4 / 4\nshort                                                2 / 2\nint                                                  1 / 1\nlong                                                 1 / 1\nhalf                                                 1 / 1        (n/a)\nfloat                                                1 / 1\ndouble                                               1 / 1        (cl_khr_fp64)\nHalf-precision Floating-point support           (n/a)\nSingle-precision Floating-point support         (core)\nDenormals                                     No\nInfinity and NANs                             Yes\nRound to nearest                              Yes\nRound to zero                                 Yes\nRound to infinity                             Yes\nIEEE754-2008 fused multiply-add               Yes\nSupport is emulated in software               No\nCorrectly-rounded divide and sqrt operations  Yes\nDouble-precision Floating-point support         (cl_khr_fp64)\nDenormals                                     Yes\nInfinity and NANs                             Yes\nRound to nearest                              Yes\nRound to zero                                 Yes\nRound to infinity                             Yes\nIEEE754-2008 fused multiply-add               Yes\nSupport is emulated in software               No\nAddress bits                                    64, Little-Endian\nGlobal memory size                              2471116800 (2.301GiB)\nGlobal free memory (AMD)                        2398160 (2.287GiB)\nGlobal memory channels (AMD)                    16\nGlobal memory banks per channel (AMD)           16\nGlobal memory bank width (AMD)                  256 bytes\nError Correction support                        No\nMax memory allocation                           2082456371 (1.939GiB)\nUnified memory for Host and Device              No\nMinimum alignment for any data type             128 bytes\nAlignment of base address                       2048 bits (256 bytes)\nGlobal Memory cache type                        Read/Write\nGlobal Memory cache size                        16384 (16KiB)\nGlobal Memory cache line size                   64 bytes\nImage support                                   Yes\nMax number of samplers per kernel             16\nMax size for 1D images from buffer            134217728 pixels\nMax 1D or 2D image array size                 2048 images\nBase address alignment for 2D image buffers   256 bytes\nPitch alignment for 2D image buffers          256 pixels\nMax 2D image size                             16384x16384 pixels\nMax 3D image size                             2048x2048x2048 pixels\nMax number of read image args                 128\nMax number of write image args                8\nLocal memory type                               Local\nLocal memory size                               32768 (32KiB)\nLocal memory syze per CU (AMD)                  65536 (64KiB)\nLocal memory banks (AMD)                        32\nMax number of constant args                     8\nMax constant buffer size                        2082456371 (1.939GiB)\nPreferred constant buffer size (AMD)            16384 (16KiB)\nMax size of kernel argument                     1024\nQueue properties\nOut-of-order execution                        No\nProfiling                                     Yes\nPrefer user sync for interop                    Yes\nProfiling timer resolution                      1ns\nProfiling timer offset since Epoch (AMD)        1527256350447623220ns (Fri May 25 10:52:30 2018)\nExecution capabilities\nRun OpenCL kernels                            Yes\nRun native kernels                            No\nThread trace supported (AMD)                  Yes\nNumber of async queues (AMD)                  2\nMax real-time compute queues (AMD)            0\nMax real-time compute units (AMD)             0\nSPIR versions                                 1.2\nprintf() buffer size                            4194304 (4MiB)\nBuilt-in kernels\nDevice Extensions                               cl_khr_fp64 cl_amd_fp64 cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_3d_image_writes cl_khr_byte_addressable_store cl_khr_gl_sharing cl_amd_device_attribute_query cl_amd_vec3 cl_amd_printf cl_amd_media_ops cl_amd_media_ops2 cl_amd_popcnt cl_khr_image2d_from_buffer cl_khr_spir cl_khr_gl_event\nNULL platform behavior\nclGetPlatformInfo(NULL, CL_PLATFORM_NAME, ...)  No platform\nclGetDeviceIDs(NULL, CL_DEVICE_TYPE_ALL, ...)   No platform\nclCreateContext(NULL, ...) [default]            No platform\nclCreateContext(NULL, ...) [other]              Success [AMD]\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_DEFAULT)  Success (1)\nPlatform Name                                 AMD Accelerated Parallel Processing\nDevice Name                                   Hawaii\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_CPU)  No devices found in platform\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_GPU)  Success (1)\nPlatform Name                                 AMD Accelerated Parallel Processing\nDevice Name                                   Hawaii\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_ACCELERATOR)  No devices found in platform\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_CUSTOM)  No devices found in platform\nclCreateContextFromType(NULL, CL_DEVICE_TYPE_ALL)  Success (1)\nPlatform Name                                 AMD Accelerated Parallel Processing\nDevice Name                                   Hawaii\n\n/usr/local/computecpp/bin/computecpp_info\n\nComputeCpp Info (CE 0.8.0)\nToolchain information:\nGLIBC version: 2.27\nGLIBCXX: 20160609\nThis version of libstdc++ is supported.\nDevice Info:\nDiscovered 1 devices matching:\nplatform    : \ndevice type : \nDevice 0:\nDevice is supported                     : UNTESTED - Untested OS\nCL_DEVICE_NAME                          : Hawaii\nCL_DEVICE_VENDOR                        : Advanced Micro Devices, Inc.\nCL_DRIVER_VERSION                       : 2633.3\nCL_DEVICE_TYPE                          : CL_DEVICE_TYPE_GPU\n\nbazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test\n\nINFO: Analysed target //tensorflow/python/kernel_tests:basic_gpu_test (0 packages loaded).\nINFO: Found 1 test target...\nERROR: /home/dmitry/Soft/dev/source/TensorFlow/tensorflow/tensorflow/core/BUILD:715:1: C++ compilation of rule '//tensorflow/core:ctc_ops_op_lib' failed (Exit 1)\nIn file included from tensorflow/core/ops/ctc_ops.cc:17:\nIn file included from ./tensorflow/core/framework/shape_inference.h:20:\nIn file included from ./tensorflow/core/framework/node_def_util.h:23:\nIn file included from ./tensorflow/core/framework/attr_value_util.h:23:\nIn file included from ./tensorflow/core/framework/partial_tensor_shape.h:20:\nIn file included from ./tensorflow/core/framework/tensor_shape.h:21:\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99:\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:163:19: error: no matching member function for call to 'get_access'\nauto ptr =buf.get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::host_buffer>().get_pointer();\n~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:593:3: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'accessMode'\nget_access() {\n^\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:611:53: note: candidate function template not viable: requires single argument 'cgh', but no arguments were provided\naccessor<T, dimensions, accessMode, accessTarget> get_access(\n^\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:633:53: note: candidate function template not viable: requires 3 arguments, but 0 were provided\naccessor<T, dimensions, accessMode, accessTarget> get_access(\n^\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:653:53: note: candidate function template not viable: requires at least 2 arguments, but 0 were provided\naccessor<T, dimensions, accessMode, accessTarget> get_access(\n^\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:670:68: note: candidate function template not viable: requires 2 arguments, but 0 were provided\naccessor<T, dimensions, accessMode, access::target::host_buffer> get_access(\n^\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:684:68: note: candidate function template not viable: requires at least argument 'range', but no arguments were provided\naccessor<T, dimensions, accessMode, access::target::host_buffer> get_access(\n^\nIn file included from tensorflow/core/ops/ctc_ops.cc:17:\nIn file included from ./tensorflow/core/framework/shape_inference.h:20:\nIn file included from ./tensorflow/core/framework/node_def_util.h:23:\nIn file included from ./tensorflow/core/framework/attr_value_util.h:23:\nIn file included from ./tensorflow/core/framework/partial_tensor_shape.h:20:\nIn file included from ./tensorflow/core/framework/tensor_shape.h:21:\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99:\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:61: error: no member named 'map_allocator' in namespace 'cl::sycl'\nauto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\n~~~~~~~~~~^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:75: error: unexpected type name 'uint8_t': expected expression\nauto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\n^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:86: warning: expression result unused [-Wunused-value]\nauto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\n^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:31: error: expected unqualified-id\nauto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\n^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:107: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class template or class template partial specialization\nauto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\n~~~~~~~~~~~~~~~~~~~~~~~~~~^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:120: error: expected ';' at end of declaration\nauto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\n^\n;\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:62: error: no member named 'map_allocator' in namespace 'cl::sycl'\nauto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\n~~~~~~~~~~^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:76: error: unexpected type name 'uint8_t': expected expression\nauto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\n^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:87: warning: expression result unused [-Wunused-value]\nauto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\n^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:32: error: expected unqualified-id\nauto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\n^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:117: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class template or class template partial specialization\nauto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\n~~~~~~~~~~~~~~~~~~~~~~~~~~^\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:130: error: expected ';' at end of declaration\nauto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\n^\n;\n2 warnings and 11 errors generated.\nTarget //tensorflow/python/kernel_tests:basic_gpu_test failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 10.427s, Critical Path: 9.81s\nINFO: 4 processes, local.\nFAILED: Build did NOT complete successfully\nExecuted 0 out of 1 test: 1 fails to build", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: 18.04 LTS (Bionic Beaver)\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: v1.8.0-2217-g7ad3964dcb 1.8.0\r\n- **Python version**: Python 3.6.5\r\n- **Bazel version (if compiling from source)**: Build label: 0.13.1\r\n- **GCC/Compiler version (if compiling from source)**: g++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0\r\n- **CUDA/cuDNN version**: NA\r\n- **GPU model and memory**: AMD Radeon R9290\r\n- **Exact command to reproduce**: bazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test\r\n\r\n### Describe the problem\r\nI built TF 1.8 from source with 'y' for OpenCL SYCL and ComputeCPP support in build configuration ('n' for other options). Build was complete successfully, but GPU device seems unavailable in TF, only CPU:0 is listed by\r\n`tensorflow.python.client.device_lib.device_lib.list_local_devices()`\r\nand\r\n`tensorflow.contrib.eager.list_devices()`\r\nAlso, `tensorflow.matmul(a, b)` is placed on CPU:0, log_device_placement says: \"Device mapping: no known devices.\"\r\n\r\n`bazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test`\r\nfails with errors from SYCL.\r\n\r\nBazel test, clinfo and computecpp_info logs are listed below.\r\n\r\nRequirements for OpenCL GPU support seem to be met, but it doesn't work. Am I missing something?\r\n\r\n### Source code / logs\r\nclinfo\r\n\r\n> Number of platforms                               1\r\n  Platform Name                                   AMD Accelerated Parallel Processing\r\n  Platform Vendor                                 Advanced Micro Devices, Inc.\r\n  Platform Version                                OpenCL 2.1 AMD-APP (2633.3)\r\n  Platform Profile                                FULL_PROFILE\r\n  Platform Extensions                             cl_khr_icd cl_amd_event_callback cl_amd_offline_devices \r\n  Platform Host timer resolution                  1ns\r\n  Platform Extensions function suffix             AMD\r\n  Platform Name                                   AMD Accelerated Parallel Processing\r\nNumber of devices                                 1\r\n  Device Name                                     Hawaii\r\n  Device Vendor                                   Advanced Micro Devices, Inc.\r\n  Device Vendor ID                                0x1002\r\n  Device Version                                  OpenCL 1.2 AMD-APP (2633.3)\r\n  Driver Version                                  2633.3\r\n  Device OpenCL C Version                         OpenCL C 1.2 \r\n  Device Type                                     GPU\r\n  Device Board Name (AMD)                         AMD Radeon R9 200 Series\r\n  Device Topology (AMD)                           PCI-E, 01:00.0\r\n  Device Profile                                  FULL_PROFILE\r\n  Device Available                                Yes\r\n  Compiler Available                              Yes\r\n  Linker Available                                Yes\r\n  Max compute units                               40\r\n  SIMD per compute unit (AMD)                     4\r\n  SIMD width (AMD)                                16\r\n  SIMD instruction width (AMD)                    1\r\n  Max clock frequency                             947MHz\r\n  Graphics IP (AMD)                               7.2\r\n  Device Partition                                (core)\r\n    Max number of sub-devices                     40\r\n    Supported partition types                     none specified\r\n  Max work item dimensions                        3\r\n  Max work item sizes                             1024x1024x1024\r\n  Max work group size                             256\r\n  Preferred work group size (AMD)                 256\r\n  Max work group size (AMD)                       1024\r\n  Preferred work group size multiple              64\r\n  Wavefront width (AMD)                           64\r\n  Preferred / native vector sizes                 \r\n    char                                                 4 / 4       \r\n    short                                                2 / 2       \r\n    int                                                  1 / 1       \r\n    long                                                 1 / 1       \r\n    half                                                 1 / 1        (n/a)\r\n    float                                                1 / 1       \r\n    double                                               1 / 1        (cl_khr_fp64)\r\n  Half-precision Floating-point support           (n/a)\r\n  Single-precision Floating-point support         (core)\r\n    Denormals                                     No\r\n    Infinity and NANs                             Yes\r\n    Round to nearest                              Yes\r\n    Round to zero                                 Yes\r\n    Round to infinity                             Yes\r\n    IEEE754-2008 fused multiply-add               Yes\r\n    Support is emulated in software               No\r\n    Correctly-rounded divide and sqrt operations  Yes\r\n  Double-precision Floating-point support         (cl_khr_fp64)\r\n    Denormals                                     Yes\r\n    Infinity and NANs                             Yes\r\n    Round to nearest                              Yes\r\n    Round to zero                                 Yes\r\n    Round to infinity                             Yes\r\n    IEEE754-2008 fused multiply-add               Yes\r\n    Support is emulated in software               No\r\n  Address bits                                    64, Little-Endian\r\n  Global memory size                              2471116800 (2.301GiB)\r\n  Global free memory (AMD)                        2398160 (2.287GiB)\r\n  Global memory channels (AMD)                    16\r\n  Global memory banks per channel (AMD)           16\r\n  Global memory bank width (AMD)                  256 bytes\r\n  Error Correction support                        No\r\n  Max memory allocation                           2082456371 (1.939GiB)\r\n  Unified memory for Host and Device              No\r\n  Minimum alignment for any data type             128 bytes\r\n  Alignment of base address                       2048 bits (256 bytes)\r\n  Global Memory cache type                        Read/Write\r\n  Global Memory cache size                        16384 (16KiB)\r\n  Global Memory cache line size                   64 bytes\r\n  Image support                                   Yes\r\n    Max number of samplers per kernel             16\r\n    Max size for 1D images from buffer            134217728 pixels\r\n    Max 1D or 2D image array size                 2048 images\r\n    Base address alignment for 2D image buffers   256 bytes\r\n    Pitch alignment for 2D image buffers          256 pixels\r\n    Max 2D image size                             16384x16384 pixels\r\n    Max 3D image size                             2048x2048x2048 pixels\r\n    Max number of read image args                 128\r\n    Max number of write image args                8\r\n  Local memory type                               Local\r\n  Local memory size                               32768 (32KiB)\r\n  Local memory syze per CU (AMD)                  65536 (64KiB)\r\n  Local memory banks (AMD)                        32\r\n  Max number of constant args                     8\r\n  Max constant buffer size                        2082456371 (1.939GiB)\r\n  Preferred constant buffer size (AMD)            16384 (16KiB)\r\n  Max size of kernel argument                     1024\r\n  Queue properties                                \r\n    Out-of-order execution                        No\r\n    Profiling                                     Yes\r\n  Prefer user sync for interop                    Yes\r\n  Profiling timer resolution                      1ns\r\n  Profiling timer offset since Epoch (AMD)        1527256350447623220ns (Fri May 25 10:52:30 2018)\r\n  Execution capabilities                          \r\n    Run OpenCL kernels                            Yes\r\n    Run native kernels                            No\r\n    Thread trace supported (AMD)                  Yes\r\n    Number of async queues (AMD)                  2\r\n    Max real-time compute queues (AMD)            0\r\n    Max real-time compute units (AMD)             0\r\n    SPIR versions                                 1.2\r\n  printf() buffer size                            4194304 (4MiB)\r\n  Built-in kernels                                \r\n  Device Extensions                               cl_khr_fp64 cl_amd_fp64 cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_3d_image_writes cl_khr_byte_addressable_store cl_khr_gl_sharing cl_amd_device_attribute_query cl_amd_vec3 cl_amd_printf cl_amd_media_ops cl_amd_media_ops2 cl_amd_popcnt cl_khr_image2d_from_buffer cl_khr_spir cl_khr_gl_event \r\nNULL platform behavior\r\n  clGetPlatformInfo(NULL, CL_PLATFORM_NAME, ...)  No platform\r\n  clGetDeviceIDs(NULL, CL_DEVICE_TYPE_ALL, ...)   No platform\r\n  clCreateContext(NULL, ...) [default]            No platform\r\n  clCreateContext(NULL, ...) [other]              Success [AMD]\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_DEFAULT)  Success (1)\r\n    Platform Name                                 AMD Accelerated Parallel Processing\r\n    Device Name                                   Hawaii\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_CPU)  No devices found in platform\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_GPU)  Success (1)\r\n    Platform Name                                 AMD Accelerated Parallel Processing\r\n    Device Name                                   Hawaii\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_ACCELERATOR)  No devices found in platform\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_CUSTOM)  No devices found in platform\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_ALL)  Success (1)\r\n    Platform Name                                 AMD Accelerated Parallel Processing\r\n    Device Name                                   Hawaii\r\n\r\n/usr/local/computecpp/bin/computecpp_info\r\n\r\n>ComputeCpp Info (CE 0.8.0)\r\nToolchain information:\r\nGLIBC version: 2.27\r\nGLIBCXX: 20160609\r\nThis version of libstdc++ is supported.\r\nDevice Info:\r\nDiscovered 1 devices matching:\r\n  platform    : <any>\r\n  device type : <any>\r\nDevice 0:\r\n  Device is supported                     : UNTESTED - Untested OS\r\n  CL_DEVICE_NAME                          : Hawaii\r\n  CL_DEVICE_VENDOR                        : Advanced Micro Devices, Inc.\r\n  CL_DRIVER_VERSION                       : 2633.3\r\n  CL_DEVICE_TYPE                          : CL_DEVICE_TYPE_GPU \r\n\r\nbazel test -c opt --config=sycl --test_output=all //tensorflow/python/kernel_tests:basic_gpu_test\r\n\r\n> INFO: Analysed target //tensorflow/python/kernel_tests:basic_gpu_test (0 packages loaded).\r\nINFO: Found 1 test target...\r\nERROR: /home/dmitry/Soft/dev/source/TensorFlow/tensorflow/tensorflow/core/BUILD:715:1: C++ compilation of rule '//tensorflow/core:ctc_ops_op_lib' failed (Exit 1)\r\nIn file included from tensorflow/core/ops/ctc_ops.cc:17:\r\nIn file included from ./tensorflow/core/framework/shape_inference.h:20:\r\nIn file included from ./tensorflow/core/framework/node_def_util.h:23:\r\nIn file included from ./tensorflow/core/framework/attr_value_util.h:23:\r\nIn file included from ./tensorflow/core/framework/partial_tensor_shape.h:20:\r\nIn file included from ./tensorflow/core/framework/tensor_shape.h:21:\r\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:163:19: error: no matching member function for call to 'get_access'\r\n    auto ptr =buf.get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::host_buffer>().get_pointer();\r\n              ~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:593:3: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'accessMode'\r\n  get_access() {\r\n  ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:611:53: note: candidate function template not viable: requires single argument 'cgh', but no arguments were provided\r\n  accessor<T, dimensions, accessMode, accessTarget> get_access(\r\n                                                    ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:633:53: note: candidate function template not viable: requires 3 arguments, but 0 were provided\r\n  accessor<T, dimensions, accessMode, accessTarget> get_access(\r\n                                                    ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:653:53: note: candidate function template not viable: requires at least 2 arguments, but 0 were provided\r\n  accessor<T, dimensions, accessMode, accessTarget> get_access(\r\n                                                    ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:670:68: note: candidate function template not viable: requires 2 arguments, but 0 were provided\r\n  accessor<T, dimensions, accessMode, access::target::host_buffer> get_access(\r\n                                                                   ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:684:68: note: candidate function template not viable: requires at least argument 'range', but no arguments were provided\r\n  accessor<T, dimensions, accessMode, access::target::host_buffer> get_access(\r\n                                                                   ^\r\nIn file included from tensorflow/core/ops/ctc_ops.cc:17:\r\nIn file included from ./tensorflow/core/framework/shape_inference.h:20:\r\nIn file included from ./tensorflow/core/framework/node_def_util.h:23:\r\nIn file included from ./tensorflow/core/framework/attr_value_util.h:23:\r\nIn file included from ./tensorflow/core/framework/partial_tensor_shape.h:20:\r\nIn file included from ./tensorflow/core/framework/tensor_shape.h:21:\r\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:61: error: no member named 'map_allocator' in namespace 'cl::sycl'\r\n      auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\r\n                                                  ~~~~~~~~~~^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:75: error: unexpected type name 'uint8_t': expected expression\r\n      auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\r\n                                                                          ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:86: warning: expression result unused [-Wunused-value]\r\n      auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\r\n                                                                                     ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:31: error: expected unqualified-id\r\n        auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\r\n                              ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:107: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class template or class template partial specialization\r\n        auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\r\n                                                                                ~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:120: error: expected ';' at end of declaration\r\n        auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\r\n                                                                                                                       ^\r\n                                                                                                                       ;\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:62: error: no member named 'map_allocator' in namespace 'cl::sycl'\r\n      auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\r\n                                                   ~~~~~~~~~~^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:76: error: unexpected type name 'uint8_t': expected expression\r\n      auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\r\n                                                                           ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:87: warning: expression result unused [-Wunused-value]\r\n      auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\r\n                                                                                      ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:32: error: expected unqualified-id\r\n        auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\r\n                               ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:117: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class template or class template partial specialization\r\n        auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\r\n                                                                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:130: error: expected ';' at end of declaration\r\n        auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\r\n                                                                                                                                 ^\r\n                                                                                                                                 ;\r\n2 warnings and 11 errors generated.\r\nTarget //tensorflow/python/kernel_tests:basic_gpu_test failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 10.427s, Critical Path: 9.81s\r\nINFO: 4 processes, local.\r\nFAILED: Build did NOT complete successfully\r\nExecuted 0 out of 1 test: 1 fails to build"}
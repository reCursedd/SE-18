{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/371836888", "html_url": "https://github.com/tensorflow/tensorflow/issues/9868#issuecomment-371836888", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9868", "id": 371836888, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTgzNjg4OA==", "user": {"login": "JaspervDalen", "id": 5681571, "node_id": "MDQ6VXNlcjU2ODE1NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5681571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JaspervDalen", "html_url": "https://github.com/JaspervDalen", "followers_url": "https://api.github.com/users/JaspervDalen/followers", "following_url": "https://api.github.com/users/JaspervDalen/following{/other_user}", "gists_url": "https://api.github.com/users/JaspervDalen/gists{/gist_id}", "starred_url": "https://api.github.com/users/JaspervDalen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JaspervDalen/subscriptions", "organizations_url": "https://api.github.com/users/JaspervDalen/orgs", "repos_url": "https://api.github.com/users/JaspervDalen/repos", "events_url": "https://api.github.com/users/JaspervDalen/events{/privacy}", "received_events_url": "https://api.github.com/users/JaspervDalen/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-09T15:00:55Z", "updated_at": "2018-03-09T15:18:29Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19927736\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/al626\">@al626</a> I try to get a timeline but it creates a file that only contains:</p>\n<pre><code>  \"traceEvents\": [\n        {\n            \"name\": \"process_name\",\n            \"ph\": \"M\",\n            \"pid\": 0,\n            \"args\": {\n                \"name\": \"Allocators\"\n            }\n        }\n    ]\n}\n</code></pre>\n<p>I get this by running the following</p>\n<pre><code>import time\nfrom tensorflow.python.client import timeline\nrun_options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)\nrun_metadata = tf.RunMetadata()\nn=3\nnet.compile( optimizer='Adam', loss='categorical_crossentropy', loss_weights=[1.0, 0.4, 0.16], metrics=['categorical_accuracy'], run_metadata=run_metadata)\n\nstart=time.time()\npred=net.predict(np.zeros((n,2048,1024,3)))\nend=time.time()\ntrace = timeline.Timeline(step_stats=run_metadata.step_stats)\nwith open('timeline.ctf.json', 'w') as f:\n    f.write(trace.generate_chrome_trace_format())\n# print(np.array(pred.shape)\nprint((end-start)/n)\n</code></pre>\n<p>what am i doing wrong?</p>\n<p>EDIT: I frogot to add options=run_options, to the compile. When i add that it works</p>", "body_text": "@al626 I try to get a timeline but it creates a file that only contains:\n  \"traceEvents\": [\n        {\n            \"name\": \"process_name\",\n            \"ph\": \"M\",\n            \"pid\": 0,\n            \"args\": {\n                \"name\": \"Allocators\"\n            }\n        }\n    ]\n}\n\nI get this by running the following\nimport time\nfrom tensorflow.python.client import timeline\nrun_options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)\nrun_metadata = tf.RunMetadata()\nn=3\nnet.compile( optimizer='Adam', loss='categorical_crossentropy', loss_weights=[1.0, 0.4, 0.16], metrics=['categorical_accuracy'], run_metadata=run_metadata)\n\nstart=time.time()\npred=net.predict(np.zeros((n,2048,1024,3)))\nend=time.time()\ntrace = timeline.Timeline(step_stats=run_metadata.step_stats)\nwith open('timeline.ctf.json', 'w') as f:\n    f.write(trace.generate_chrome_trace_format())\n# print(np.array(pred.shape)\nprint((end-start)/n)\n\nwhat am i doing wrong?\nEDIT: I frogot to add options=run_options, to the compile. When i add that it works", "body": "@al626 I try to get a timeline but it creates a file that only contains:\r\n```\r\n  \"traceEvents\": [\r\n        {\r\n            \"name\": \"process_name\",\r\n            \"ph\": \"M\",\r\n            \"pid\": 0,\r\n            \"args\": {\r\n                \"name\": \"Allocators\"\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nI get this by running the following\r\n\r\n```\r\nimport time\r\nfrom tensorflow.python.client import timeline\r\nrun_options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)\r\nrun_metadata = tf.RunMetadata()\r\nn=3\r\nnet.compile( optimizer='Adam', loss='categorical_crossentropy', loss_weights=[1.0, 0.4, 0.16], metrics=['categorical_accuracy'], run_metadata=run_metadata)\r\n\r\nstart=time.time()\r\npred=net.predict(np.zeros((n,2048,1024,3)))\r\nend=time.time()\r\ntrace = timeline.Timeline(step_stats=run_metadata.step_stats)\r\nwith open('timeline.ctf.json', 'w') as f:\r\n    f.write(trace.generate_chrome_trace_format())\r\n# print(np.array(pred.shape)\r\nprint((end-start)/n)\r\n```\r\nwhat am i doing wrong?\r\n\r\nEDIT: I frogot to add options=run_options, to the compile. When i add that it works\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/83465667", "pull_request_review_id": 4310233, "id": 83465667, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzNDY1NjY3", "diff_hunk": "@@ -41,46 +51,67 @@ function main() {\n     exit 1\n   fi\n \n-  if [ ! -d bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow ]; then\n-    # Really old (0.2.1-) runfiles, without workspace name.\n+  if is_windows; then\n+    mkdir -p ./bazel-bin/tensorflow/tools/pip_package/simple_console_for_window_unzip\n+    echo \"Unzipping simple_console_for_windows.zip to create runfiles tree...\"\n+    unzip -o -q ./bazel-bin/tensorflow/tools/pip_package/simple_console_for_windows.zip -d ./bazel-bin/tensorflow/tools/pip_package/simple_console_for_window_unzip\n+    echo \"Unzip finished.\"\n+    # runfiles structure after unzip the python binary\n     cp -R \\\n-      bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/tensorflow \\\n+      bazel-bin/tensorflow/tools/pip_package/simple_console_for_window_unzip/runfiles/org_tensorflow/tensorflow \\\n       \"${TMPDIR}\"\n     mkdir \"${TMPDIR}/external\"\n+    # Note: this makes an extra copy of org_tensorflow.\n     cp_external \\\n-      bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/external \\\n+      bazel-bin/tensorflow/tools/pip_package/simple_console_for_window_unzip/runfiles \\\n       \"${TMPDIR}/external\"\n-    RUNFILES=bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles\n+    RUNFILES=bazel-bin/tensorflow/tools/pip_package/simple_console_for_window_unzip/runfiles/org_tensorflow\n   else\n-    if [ -d bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/external ]; then\n-      # Old-style runfiles structure (--legacy_external_runfiles).\n+    if [ ! -d bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow ]; then", "path": "tensorflow/tools/pip_package/build_pip_package.sh", "position": null, "original_position": 44, "commit_id": "a981a7dae464a04236c25c114872c02a4e3c574e", "original_commit_id": "38077a9dc0d076845eee39c3b52f055d30a7e29f", "user": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "body": "Done.\n", "created_at": "2016-10-14T17:27:08Z", "updated_at": "2016-10-19T11:12:03Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4942#discussion_r83465667", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4942", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/83465667"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4942#discussion_r83465667"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4942"}}, "body_html": "<p>Done.</p>", "body_text": "Done.", "in_reply_to_id": 83248546}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/357043287", "html_url": "https://github.com/tensorflow/tensorflow/issues/9545#issuecomment-357043287", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9545", "id": 357043287, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzA0MzI4Nw==", "user": {"login": "sleighsoft", "id": 9438971, "node_id": "MDQ6VXNlcjk0Mzg5NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9438971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleighsoft", "html_url": "https://github.com/sleighsoft", "followers_url": "https://api.github.com/users/sleighsoft/followers", "following_url": "https://api.github.com/users/sleighsoft/following{/other_user}", "gists_url": "https://api.github.com/users/sleighsoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleighsoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleighsoft/subscriptions", "organizations_url": "https://api.github.com/users/sleighsoft/orgs", "repos_url": "https://api.github.com/users/sleighsoft/repos", "events_url": "https://api.github.com/users/sleighsoft/events{/privacy}", "received_events_url": "https://api.github.com/users/sleighsoft/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-11T19:56:30Z", "updated_at": "2018-01-11T20:47:59Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Why does a <code>tf.VariableScope</code> open up a name scope?<br>\nI am confused why in the end I have a node called <code>ns/s4_1/concat</code> and one called <code>s4/concat</code>.<br>\nI would expect it to be <code>ns/s4/concat</code> and <code>ns/s4/concat_1</code> or something</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\n<span class=\"pl-k\">with</span> tf.name_scope(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>ns<span class=\"pl-pds\">'</span></span>):\n  s4 <span class=\"pl-k\">=</span> tf.VariableScope(tf.<span class=\"pl-c1\">AUTO_REUSE</span>, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>s4<span class=\"pl-pds\">'</span></span>)\n\n  <span class=\"pl-k\">with</span> tf.variable_scope(s4, tf.<span class=\"pl-c1\">AUTO_REUSE</span>):\n    <span class=\"pl-c1\">print</span>(tf.get_variable(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>f<span class=\"pl-pds\">'</span></span>, []))\n\n  <span class=\"pl-k\">with</span> tf.variable_scope(s4, <span class=\"pl-c1\">True</span>):\n    <span class=\"pl-c1\">print</span>(tf.get_variable(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>f<span class=\"pl-pds\">'</span></span>, []))\n    <span class=\"pl-c1\">print</span>(tf.concat([tf.constant([<span class=\"pl-c1\">1</span>]), tf.constant([<span class=\"pl-c1\">1</span>])], <span class=\"pl-c1\">0</span>))\n\n<span class=\"pl-k\">with</span> tf.variable_scope(s4, <span class=\"pl-c1\">True</span>):\n    <span class=\"pl-c1\">print</span>(tf.concat([tf.constant([<span class=\"pl-c1\">1</span>]), tf.constant([<span class=\"pl-c1\">1</span>])], <span class=\"pl-c1\">0</span>))\n\nsession <span class=\"pl-k\">=</span> tf.Session()\n\ntf.summary.FileWriter(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>./tmp/scope/<span class=\"pl-pds\">'</span></span>, session.graph)</pre></div>", "body_text": "Why does a tf.VariableScope open up a name scope?\nI am confused why in the end I have a node called ns/s4_1/concat and one called s4/concat.\nI would expect it to be ns/s4/concat and ns/s4/concat_1 or something\nimport tensorflow as tf\n\nwith tf.name_scope('ns'):\n  s4 = tf.VariableScope(tf.AUTO_REUSE, name='s4')\n\n  with tf.variable_scope(s4, tf.AUTO_REUSE):\n    print(tf.get_variable('f', []))\n\n  with tf.variable_scope(s4, True):\n    print(tf.get_variable('f', []))\n    print(tf.concat([tf.constant([1]), tf.constant([1])], 0))\n\nwith tf.variable_scope(s4, True):\n    print(tf.concat([tf.constant([1]), tf.constant([1])], 0))\n\nsession = tf.Session()\n\ntf.summary.FileWriter('./tmp/scope/', session.graph)", "body": "Why does a `tf.VariableScope` open up a name scope?\r\nI am confused why in the end I have a node called `ns/s4_1/concat` and one called `s4/concat`.\r\nI would expect it to be `ns/s4/concat` and `ns/s4/concat_1` or something\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\nwith tf.name_scope('ns'):\r\n  s4 = tf.VariableScope(tf.AUTO_REUSE, name='s4')\r\n\r\n  with tf.variable_scope(s4, tf.AUTO_REUSE):\r\n    print(tf.get_variable('f', []))\r\n\r\n  with tf.variable_scope(s4, True):\r\n    print(tf.get_variable('f', []))\r\n    print(tf.concat([tf.constant([1]), tf.constant([1])], 0))\r\n\r\nwith tf.variable_scope(s4, True):\r\n    print(tf.concat([tf.constant([1]), tf.constant([1])], 0))\r\n\r\nsession = tf.Session()\r\n\r\ntf.summary.FileWriter('./tmp/scope/', session.graph)\r\n```"}
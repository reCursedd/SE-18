{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21128", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21128/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21128/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21128/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21128", "id": 344455115, "node_id": "MDU6SXNzdWUzNDQ0NTUxMTU=", "number": 21128, "title": "No contrib directory after installation via virtualenv", "user": {"login": "kate-kate", "id": 4061805, "node_id": "MDQ6VXNlcjQwNjE4MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/4061805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kate-kate", "html_url": "https://github.com/kate-kate", "followers_url": "https://api.github.com/users/kate-kate/followers", "following_url": "https://api.github.com/users/kate-kate/following{/other_user}", "gists_url": "https://api.github.com/users/kate-kate/gists{/gist_id}", "starred_url": "https://api.github.com/users/kate-kate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kate-kate/subscriptions", "organizations_url": "https://api.github.com/users/kate-kate/orgs", "repos_url": "https://api.github.com/users/kate-kate/repos", "events_url": "https://api.github.com/users/kate-kate/events{/privacy}", "received_events_url": "https://api.github.com/users/kate-kate/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-07-25T13:57:23Z", "updated_at": "2018-07-27T09:09:06Z", "closed_at": "2018-07-26T17:35:20Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: macOS High Sierra 10.13.4</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: <a href=\"https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.9.0-py3-none-any.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.9.0-py3-none-any.whl</a></li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.9.0 (v1.9.0-0-g25c197e023)</li>\n<li><strong>Python version</strong>: 3.6.4</li>\n<li><strong>CUDA/cuDNN version</strong>: -</li>\n<li><strong>GPU model and memory</strong>: Intel Iris Graphics 6100 / 1536 MB</li>\n<li><strong>Exact command to reproduce</strong>: bazel build tensorflow/contrib/lite/toco:toco</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Hi, I've successfully installed the latest version of tensorflow with virtualenv and even created the frozen graph of my model with help of it, but then I needed the .tflite file and I found that <code>bazel run -c opt tensorflow/contrib/lite/toco:toco</code> returns <code>no such package 'tensorflow/contrib/lite/toco'</code> error (at first run there was <code>The 'run' command is only supported from within a workspace.</code> and I've created WORKSPACE file, because I saw some issue with such an advice, but problem was not in this file).<br>\nThen I've admitted that directory structure differs from one from the github. I had only include, bin and lib directories and pip-selfcheck.json<br>\nI've reinstalled tensorflow few times, I've deleted environment in Anaconda, when I had another build of tensorflow and reinstalled it again. Nothing changes. Also I haven't found any issues with this problem in github or stackoverflow. Maybe I've missed something (despite I followed the docs very precisely)? Any help would be very appreciated</p>\n<h3>Source code / logs</h3>\n<p>I've installed When I'm trying to run</p>\n<pre><code>bazel run -c opt tensorflow/contrib/lite/toco:toco -- \\\n--input_file=/Users/kate/python/codes2/tflite_res/tflite_graph.pb \\\n--output_file=/Users/kate/python/codes2/tflite_res/detect.tflite \\\n--input_shapes=1,300,300,3 \\\n--input_arrays=normalized_input_image_tensor \\\n--output_arrays='TFLite_Detection_PostProcess','TFLite_Detection_PostProcess:1','TFLite_Detection_PostProcess:2','TFLite_Detection_PostProcess:3'  \\\n--inference_type=QUANTIZED_UINT8 \\\n--mean_values=128 \\\n--std_values=128 \\\n--change_concat_input_ranges=false \\\n--allow_custom_ops\n</code></pre>\n<p>I get</p>\n<pre><code>ERROR: Skipping 'tensorflow/contrib/lite/toco:toco': no such package 'tensorflow/contrib/lite/toco': BUILD file not found on package path\nWARNING: Target pattern parsing failed.\nERROR: no such package 'tensorflow/contrib/lite/toco': BUILD file not found on package path\nINFO: Elapsed time: 0.370s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (0 packages loaded)\nFAILED: Build did NOT complete successfully (0 packages loaded)\n</code></pre>\n<p>Bazel was installed with homebrew. Build command returns the same.<br>\nAlso here is the info I've collected with the help of your script</p>\n<pre><code>== cat /etc/issue ===============================================\nDarwin MacBook-Pro-Ekaterina.local 17.5.0 Darwin Kernel Version 17.5.0: Fri Apr 13 19:32:32 PDT 2018; root:xnu-4570.51.2~1/RELEASE_X86_64 x86_64\nMac OS X 10.13.4\n\n== are we in docker =============================================\nNo\n\n== compiler =====================================================\nApple LLVM version 9.1.0 (clang-902.0.39.2)\nTarget: x86_64-apple-darwin17.5.0\nThread model: posix\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n\n== uname -a =====================================================\nDarwin MacBook-Pro-Ekaterina.local 17.5.0 Darwin Kernel Version 17.5.0: Fri Apr 13 19:32:32 PDT 2018; root:xnu-4570.51.2~1/RELEASE_X86_64 x86_64\n\n== check pips ===================================================\nnumpy                              1.15.0\nnumpydoc                           0.7.0\nprotobuf                           3.6.0\ntensorflow                         1.9.0\n\n== check for virtualenv =========================================\nFalse\n\n== tensorflow import ============================================\ntf.VERSION = 1.9.0\ntf.GIT_VERSION = v1.9.0-0-g25c197e023\ntf.COMPILER_VERSION = v1.9.0-0-g25c197e023\nSanity check: array([1], dtype=int32)\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\n  return f(*args, **kwds)\n/Users/kate/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\n  return f(*args, **kwds)\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\n  return f(*args, **kwds)\n\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n\n== nvidia-smi ===================================================\ntf_env_collect.sh: line 105: nvidia-smi: command not found\n\n== cuda libs  ===================================================\n</code></pre>\n<p>There are some warnings about deprecation in python libs but them seem to be harmless. Also I don't understand why check for virtualenv is false (I've tried to run the command with both activated and deactivated tensorflow environment but it is always false).</p>\n<p>Thanks</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS High Sierra 10.13.4\nTensorFlow installed from (source or binary): https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.9.0-py3-none-any.whl\nTensorFlow version (use command below): 1.9.0 (v1.9.0-0-g25c197e023)\nPython version: 3.6.4\nCUDA/cuDNN version: -\nGPU model and memory: Intel Iris Graphics 6100 / 1536 MB\nExact command to reproduce: bazel build tensorflow/contrib/lite/toco:toco\n\nDescribe the problem\nHi, I've successfully installed the latest version of tensorflow with virtualenv and even created the frozen graph of my model with help of it, but then I needed the .tflite file and I found that bazel run -c opt tensorflow/contrib/lite/toco:toco returns no such package 'tensorflow/contrib/lite/toco' error (at first run there was The 'run' command is only supported from within a workspace. and I've created WORKSPACE file, because I saw some issue with such an advice, but problem was not in this file).\nThen I've admitted that directory structure differs from one from the github. I had only include, bin and lib directories and pip-selfcheck.json\nI've reinstalled tensorflow few times, I've deleted environment in Anaconda, when I had another build of tensorflow and reinstalled it again. Nothing changes. Also I haven't found any issues with this problem in github or stackoverflow. Maybe I've missed something (despite I followed the docs very precisely)? Any help would be very appreciated\nSource code / logs\nI've installed When I'm trying to run\nbazel run -c opt tensorflow/contrib/lite/toco:toco -- \\\n--input_file=/Users/kate/python/codes2/tflite_res/tflite_graph.pb \\\n--output_file=/Users/kate/python/codes2/tflite_res/detect.tflite \\\n--input_shapes=1,300,300,3 \\\n--input_arrays=normalized_input_image_tensor \\\n--output_arrays='TFLite_Detection_PostProcess','TFLite_Detection_PostProcess:1','TFLite_Detection_PostProcess:2','TFLite_Detection_PostProcess:3'  \\\n--inference_type=QUANTIZED_UINT8 \\\n--mean_values=128 \\\n--std_values=128 \\\n--change_concat_input_ranges=false \\\n--allow_custom_ops\n\nI get\nERROR: Skipping 'tensorflow/contrib/lite/toco:toco': no such package 'tensorflow/contrib/lite/toco': BUILD file not found on package path\nWARNING: Target pattern parsing failed.\nERROR: no such package 'tensorflow/contrib/lite/toco': BUILD file not found on package path\nINFO: Elapsed time: 0.370s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (0 packages loaded)\nFAILED: Build did NOT complete successfully (0 packages loaded)\n\nBazel was installed with homebrew. Build command returns the same.\nAlso here is the info I've collected with the help of your script\n== cat /etc/issue ===============================================\nDarwin MacBook-Pro-Ekaterina.local 17.5.0 Darwin Kernel Version 17.5.0: Fri Apr 13 19:32:32 PDT 2018; root:xnu-4570.51.2~1/RELEASE_X86_64 x86_64\nMac OS X 10.13.4\n\n== are we in docker =============================================\nNo\n\n== compiler =====================================================\nApple LLVM version 9.1.0 (clang-902.0.39.2)\nTarget: x86_64-apple-darwin17.5.0\nThread model: posix\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n\n== uname -a =====================================================\nDarwin MacBook-Pro-Ekaterina.local 17.5.0 Darwin Kernel Version 17.5.0: Fri Apr 13 19:32:32 PDT 2018; root:xnu-4570.51.2~1/RELEASE_X86_64 x86_64\n\n== check pips ===================================================\nnumpy                              1.15.0\nnumpydoc                           0.7.0\nprotobuf                           3.6.0\ntensorflow                         1.9.0\n\n== check for virtualenv =========================================\nFalse\n\n== tensorflow import ============================================\ntf.VERSION = 1.9.0\ntf.GIT_VERSION = v1.9.0-0-g25c197e023\ntf.COMPILER_VERSION = v1.9.0-0-g25c197e023\nSanity check: array([1], dtype=int32)\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\n  return f(*args, **kwds)\n/Users/kate/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\n  return f(*args, **kwds)\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\n  return f(*args, **kwds)\n\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n\n== nvidia-smi ===================================================\ntf_env_collect.sh: line 105: nvidia-smi: command not found\n\n== cuda libs  ===================================================\n\nThere are some warnings about deprecation in python libs but them seem to be harmless. Also I don't understand why check for virtualenv is false (I've tried to run the command with both activated and deactivated tensorflow environment but it is always false).\nThanks", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: macOS High Sierra 10.13.4\r\n- **TensorFlow installed from (source or binary)**: https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.9.0-py3-none-any.whl\r\n- **TensorFlow version (use command below)**: 1.9.0 (v1.9.0-0-g25c197e023)\r\n- **Python version**: 3.6.4\r\n- **CUDA/cuDNN version**: -\r\n- **GPU model and memory**: Intel Iris Graphics 6100 / 1536 MB\r\n- **Exact command to reproduce**: bazel build tensorflow/contrib/lite/toco:toco\r\n\r\n### Describe the problem\r\nHi, I've successfully installed the latest version of tensorflow with virtualenv and even created the frozen graph of my model with help of it, but then I needed the .tflite file and I found that ```bazel run -c opt tensorflow/contrib/lite/toco:toco``` returns ```no such package 'tensorflow/contrib/lite/toco'``` error (at first run there was ```The 'run' command is only supported from within a workspace.``` and I've created WORKSPACE file, because I saw some issue with such an advice, but problem was not in this file).\r\nThen I've admitted that directory structure differs from one from the github. I had only include, bin and lib directories and pip-selfcheck.json\r\nI've reinstalled tensorflow few times, I've deleted environment in Anaconda, when I had another build of tensorflow and reinstalled it again. Nothing changes. Also I haven't found any issues with this problem in github or stackoverflow. Maybe I've missed something (despite I followed the docs very precisely)? Any help would be very appreciated\r\n\r\n### Source code / logs\r\nI've installed When I'm trying to run \r\n```\r\nbazel run -c opt tensorflow/contrib/lite/toco:toco -- \\\r\n--input_file=/Users/kate/python/codes2/tflite_res/tflite_graph.pb \\\r\n--output_file=/Users/kate/python/codes2/tflite_res/detect.tflite \\\r\n--input_shapes=1,300,300,3 \\\r\n--input_arrays=normalized_input_image_tensor \\\r\n--output_arrays='TFLite_Detection_PostProcess','TFLite_Detection_PostProcess:1','TFLite_Detection_PostProcess:2','TFLite_Detection_PostProcess:3'  \\\r\n--inference_type=QUANTIZED_UINT8 \\\r\n--mean_values=128 \\\r\n--std_values=128 \\\r\n--change_concat_input_ranges=false \\\r\n--allow_custom_ops\r\n```\r\nI get \r\n```\r\nERROR: Skipping 'tensorflow/contrib/lite/toco:toco': no such package 'tensorflow/contrib/lite/toco': BUILD file not found on package path\r\nWARNING: Target pattern parsing failed.\r\nERROR: no such package 'tensorflow/contrib/lite/toco': BUILD file not found on package path\r\nINFO: Elapsed time: 0.370s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\n```\r\n\r\nBazel was installed with homebrew. Build command returns the same. \r\nAlso here is the info I've collected with the help of your script\r\n```\r\n== cat /etc/issue ===============================================\r\nDarwin MacBook-Pro-Ekaterina.local 17.5.0 Darwin Kernel Version 17.5.0: Fri Apr 13 19:32:32 PDT 2018; root:xnu-4570.51.2~1/RELEASE_X86_64 x86_64\r\nMac OS X 10.13.4\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nApple LLVM version 9.1.0 (clang-902.0.39.2)\r\nTarget: x86_64-apple-darwin17.5.0\r\nThread model: posix\r\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\r\n\r\n== uname -a =====================================================\r\nDarwin MacBook-Pro-Ekaterina.local 17.5.0 Darwin Kernel Version 17.5.0: Fri Apr 13 19:32:32 PDT 2018; root:xnu-4570.51.2~1/RELEASE_X86_64 x86_64\r\n\r\n== check pips ===================================================\r\nnumpy                              1.15.0\r\nnumpydoc                           0.7.0\r\nprotobuf                           3.6.0\r\ntensorflow                         1.9.0\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.9.0\r\ntf.GIT_VERSION = v1.9.0-0-g25c197e023\r\ntf.COMPILER_VERSION = v1.9.0-0-g25c197e023\r\nSanity check: array([1], dtype=int32)\r\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  return f(*args, **kwds)\r\n/Users/kate/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  return f(*args, **kwds)\r\n/Users/kate/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  return f(*args, **kwds)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\ntf_env_collect.sh: line 105: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n```\r\n\r\nThere are some warnings about deprecation in python libs but them seem to be harmless. Also I don't understand why check for virtualenv is false (I've tried to run the command with both activated and deactivated tensorflow environment but it is always false).\r\n\r\nThanks\r\n"}
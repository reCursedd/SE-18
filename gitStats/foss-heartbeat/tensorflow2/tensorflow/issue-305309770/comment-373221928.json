{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/373221928", "html_url": "https://github.com/tensorflow/tensorflow/issues/17720#issuecomment-373221928", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17720", "id": 373221928, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzIyMTkyOA==", "user": {"login": "mbrio", "id": 13557, "node_id": "MDQ6VXNlcjEzNTU3", "avatar_url": "https://avatars2.githubusercontent.com/u/13557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbrio", "html_url": "https://github.com/mbrio", "followers_url": "https://api.github.com/users/mbrio/followers", "following_url": "https://api.github.com/users/mbrio/following{/other_user}", "gists_url": "https://api.github.com/users/mbrio/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbrio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbrio/subscriptions", "organizations_url": "https://api.github.com/users/mbrio/orgs", "repos_url": "https://api.github.com/users/mbrio/repos", "events_url": "https://api.github.com/users/mbrio/events{/privacy}", "received_events_url": "https://api.github.com/users/mbrio/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-15T00:40:40Z", "updated_at": "2018-03-15T00:40:40Z", "author_association": "NONE", "body_html": "<p>To clarify, it should be:</p>\n<div class=\"highlight highlight-source-python\"><pre>dataset <span class=\"pl-k\">=</span> dataset.apply(\n    tf.contrib.data.map_and_batch(\n        <span class=\"pl-v\">map_func</span><span class=\"pl-k\">=</span>parse_fn,\n        <span class=\"pl-v\">batch_size</span><span class=\"pl-k\">=</span>tf.placeholder_with_default(tf.constant(<span class=\"pl-c1\">128</span>, <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.int64), ()),\n        <span class=\"pl-v\">num_parallel_batches</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">28</span>\n     )\n)</pre></div>\n<p><code>tf.placeholder_with_default</code> needs shape passed to it, is it correct to pass that in as <code>()</code> in this situation? I don't get a problem, and it fixes the issue, thank you!</p>", "body_text": "To clarify, it should be:\ndataset = dataset.apply(\n    tf.contrib.data.map_and_batch(\n        map_func=parse_fn,\n        batch_size=tf.placeholder_with_default(tf.constant(128, dtype=tf.int64), ()),\n        num_parallel_batches=28\n     )\n)\ntf.placeholder_with_default needs shape passed to it, is it correct to pass that in as () in this situation? I don't get a problem, and it fixes the issue, thank you!", "body": "To clarify, it should be:\r\n\r\n```python\r\ndataset = dataset.apply(\r\n    tf.contrib.data.map_and_batch(\r\n        map_func=parse_fn,\r\n        batch_size=tf.placeholder_with_default(tf.constant(128, dtype=tf.int64), ()),\r\n        num_parallel_batches=28\r\n     )\r\n)\r\n```\r\n\r\n`tf.placeholder_with_default` needs shape passed to it, is it correct to pass that in as `()` in this situation? I don't get a problem, and it fixes the issue, thank you!"}
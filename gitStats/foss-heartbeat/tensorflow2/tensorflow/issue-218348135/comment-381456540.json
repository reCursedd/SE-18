{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/381456540", "html_url": "https://github.com/tensorflow/tensorflow/issues/8854#issuecomment-381456540", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8854", "id": 381456540, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTQ1NjU0MA==", "user": {"login": "jhw6976", "id": 22847354, "node_id": "MDQ6VXNlcjIyODQ3MzU0", "avatar_url": "https://avatars1.githubusercontent.com/u/22847354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhw6976", "html_url": "https://github.com/jhw6976", "followers_url": "https://api.github.com/users/jhw6976/followers", "following_url": "https://api.github.com/users/jhw6976/following{/other_user}", "gists_url": "https://api.github.com/users/jhw6976/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhw6976/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhw6976/subscriptions", "organizations_url": "https://api.github.com/users/jhw6976/orgs", "repos_url": "https://api.github.com/users/jhw6976/repos", "events_url": "https://api.github.com/users/jhw6976/events{/privacy}", "received_events_url": "https://api.github.com/users/jhw6976/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-16T01:37:08Z", "updated_at": "2018-04-16T17:51:47Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=389853\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Jon889\">@Jon889</a>, I followed you suggestion and I can overcome error \"the google.protobuf.message.DecodeError: Error parsing message\"</p>\n<p>But when I use tensorboard to view the graph, it is empty graph,</p>\n<p>i made below change, and i can view graph,<br>\nI tested with .pb created by \"mnist_saved_model.py\" (<a href=\"https://github.com/tensorflow/serving/blob/master/tensorflow_serving/example/mnist_saved_model.py\">https://github.com/tensorflow/serving/blob/master/tensorflow_serving/example/mnist_saved_model.py</a>)</p>\n<p>code snippet:</p>\n<pre><code>import argparse\nimport sys\nimport tensorflow as tf\n\nfrom tensorflow.python.platform import app\nfrom tensorflow.python.summary import summary\n\ndef import_to_tensorboard(model_dir, log_dir):\n  \"\"\"View an imported protobuf model (`.pb` file) as a graph in Tensorboard.\n\n  Args:\n    model_dir: The location of the protobuf (`pb`) model to visualize\n    log_dir: The location for the Tensorboard log to begin visualization from.\n\n  Usage:\n    Call this function with your model location and desired log directory.\n    Launch Tensorboard by pointing it to the log directory.\n    View your imported `.pb` model as a graph.\n  \"\"\"\n\n  with tf.Session(graph=tf.Graph()) as sess:\n    tf.saved_model.loader.load(\n        sess, [tf.saved_model.tag_constants.SERVING], model_dir)\n\n    pb_visual_writer = summary.FileWriter(log_dir)\n    pb_visual_writer.add_graph(sess.graph)\n    print(\"Model Imported. Visualize by running: \"\n          \"tensorboard --logdir={}\".format(log_dir))\n\n</code></pre>", "body_text": "@Jon889, I followed you suggestion and I can overcome error \"the google.protobuf.message.DecodeError: Error parsing message\"\nBut when I use tensorboard to view the graph, it is empty graph,\ni made below change, and i can view graph,\nI tested with .pb created by \"mnist_saved_model.py\" (https://github.com/tensorflow/serving/blob/master/tensorflow_serving/example/mnist_saved_model.py)\ncode snippet:\nimport argparse\nimport sys\nimport tensorflow as tf\n\nfrom tensorflow.python.platform import app\nfrom tensorflow.python.summary import summary\n\ndef import_to_tensorboard(model_dir, log_dir):\n  \"\"\"View an imported protobuf model (`.pb` file) as a graph in Tensorboard.\n\n  Args:\n    model_dir: The location of the protobuf (`pb`) model to visualize\n    log_dir: The location for the Tensorboard log to begin visualization from.\n\n  Usage:\n    Call this function with your model location and desired log directory.\n    Launch Tensorboard by pointing it to the log directory.\n    View your imported `.pb` model as a graph.\n  \"\"\"\n\n  with tf.Session(graph=tf.Graph()) as sess:\n    tf.saved_model.loader.load(\n        sess, [tf.saved_model.tag_constants.SERVING], model_dir)\n\n    pb_visual_writer = summary.FileWriter(log_dir)\n    pb_visual_writer.add_graph(sess.graph)\n    print(\"Model Imported. Visualize by running: \"\n          \"tensorboard --logdir={}\".format(log_dir))", "body": "@Jon889, I followed you suggestion and I can overcome error \"the google.protobuf.message.DecodeError: Error parsing message\"\r\n\r\nBut when I use tensorboard to view the graph, it is empty graph,\r\n\r\ni made below change, and i can view graph, \r\nI tested with .pb created by \"mnist_saved_model.py\" (https://github.com/tensorflow/serving/blob/master/tensorflow_serving/example/mnist_saved_model.py) \r\n\r\ncode snippet:\r\n```\r\nimport argparse\r\nimport sys\r\nimport tensorflow as tf\r\n\r\nfrom tensorflow.python.platform import app\r\nfrom tensorflow.python.summary import summary\r\n\r\ndef import_to_tensorboard(model_dir, log_dir):\r\n  \"\"\"View an imported protobuf model (`.pb` file) as a graph in Tensorboard.\r\n\r\n  Args:\r\n    model_dir: The location of the protobuf (`pb`) model to visualize\r\n    log_dir: The location for the Tensorboard log to begin visualization from.\r\n\r\n  Usage:\r\n    Call this function with your model location and desired log directory.\r\n    Launch Tensorboard by pointing it to the log directory.\r\n    View your imported `.pb` model as a graph.\r\n  \"\"\"\r\n\r\n  with tf.Session(graph=tf.Graph()) as sess:\r\n    tf.saved_model.loader.load(\r\n        sess, [tf.saved_model.tag_constants.SERVING], model_dir)\r\n\r\n    pb_visual_writer = summary.FileWriter(log_dir)\r\n    pb_visual_writer.add_graph(sess.graph)\r\n    print(\"Model Imported. Visualize by running: \"\r\n          \"tensorboard --logdir={}\".format(log_dir))\r\n\r\n```\r\n\r\n\r\n"}
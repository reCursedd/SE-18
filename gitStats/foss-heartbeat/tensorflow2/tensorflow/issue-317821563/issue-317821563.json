{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18880", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18880/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18880/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18880/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18880", "id": 317821563, "node_id": "MDU6SXNzdWUzMTc4MjE1NjM=", "number": 18880, "title": "[Feature Request] Dynamic RPC Address Resolution", "user": {"login": "make1980", "id": 19718982, "node_id": "MDQ6VXNlcjE5NzE4OTgy", "avatar_url": "https://avatars3.githubusercontent.com/u/19718982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/make1980", "html_url": "https://github.com/make1980", "followers_url": "https://api.github.com/users/make1980/followers", "following_url": "https://api.github.com/users/make1980/following{/other_user}", "gists_url": "https://api.github.com/users/make1980/gists{/gist_id}", "starred_url": "https://api.github.com/users/make1980/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/make1980/subscriptions", "organizations_url": "https://api.github.com/users/make1980/orgs", "repos_url": "https://api.github.com/users/make1980/repos", "events_url": "https://api.github.com/users/make1980/events{/privacy}", "received_events_url": "https://api.github.com/users/make1980/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 29, "created_at": "2018-04-25T22:55:25Z", "updated_at": "2018-11-20T07:52:53Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>Currently TensorFlow cluster is created statically with host name/port information defined in cluster spec. The host name and port information for a worker can't be changed during run-time. In a multi-tenancy environment where host name/port is assigned to worker by a job manager after worker failover happens, this static cluster spec prevents other workers to communicate with this new worker using the latest host name and port.</p>\n<p>With dynamic RPC address resolution feature, the host name of each TF server is resolved against an RPC address registry before initiating each RPC call. This allows changing the host name and port of each TF server at run time, which is useful in the following cases:</p>\n<ul>\n<li>\n<p>A stateless TF worker fails over and gets assigned with new host name/port by an external job scheduler.</p>\n</li>\n<li>\n<p>A stateful TF worker fails over and all workers get restarted without changing the cluster spec. The failed worker can be assigned with new host name/port.</p>\n</li>\n</ul>\n<p>I have composed a design document <a href=\"https://docs.google.com/document/d/1Fl-mMZ9NMBDaQkhhVpXe-UdYC-iYg6hlSj7bBZSMCSM/edit?usp=sharing\" rel=\"nofollow\">here</a>. A prototype has been done as well based on this design. We hope to contribute this feature to the upstream. Any feedbacks for the design are welcome.</p>", "body_text": "Currently TensorFlow cluster is created statically with host name/port information defined in cluster spec. The host name and port information for a worker can't be changed during run-time. In a multi-tenancy environment where host name/port is assigned to worker by a job manager after worker failover happens, this static cluster spec prevents other workers to communicate with this new worker using the latest host name and port.\nWith dynamic RPC address resolution feature, the host name of each TF server is resolved against an RPC address registry before initiating each RPC call. This allows changing the host name and port of each TF server at run time, which is useful in the following cases:\n\n\nA stateless TF worker fails over and gets assigned with new host name/port by an external job scheduler.\n\n\nA stateful TF worker fails over and all workers get restarted without changing the cluster spec. The failed worker can be assigned with new host name/port.\n\n\nI have composed a design document here. A prototype has been done as well based on this design. We hope to contribute this feature to the upstream. Any feedbacks for the design are welcome.", "body": "Currently TensorFlow cluster is created statically with host name/port information defined in cluster spec. The host name and port information for a worker can't be changed during run-time. In a multi-tenancy environment where host name/port is assigned to worker by a job manager after worker failover happens, this static cluster spec prevents other workers to communicate with this new worker using the latest host name and port.\r\n\r\nWith dynamic RPC address resolution feature, the host name of each TF server is resolved against an RPC address registry before initiating each RPC call. This allows changing the host name and port of each TF server at run time, which is useful in the following cases:\r\n\r\n- A stateless TF worker fails over and gets assigned with new host name/port by an external job scheduler.\r\n\r\n- A stateful TF worker fails over and all workers get restarted without changing the cluster spec. The failed worker can be assigned with new host name/port.\r\n\r\nI have composed a design document [here](https://docs.google.com/document/d/1Fl-mMZ9NMBDaQkhhVpXe-UdYC-iYg6hlSj7bBZSMCSM/edit?usp=sharing). A prototype has been done as well based on this design. We hope to contribute this feature to the upstream. Any feedbacks for the design are welcome.\r\n\r\n"}
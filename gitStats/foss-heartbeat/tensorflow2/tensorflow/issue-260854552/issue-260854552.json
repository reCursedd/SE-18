{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13333", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13333/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13333/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13333/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13333", "id": 260854552, "node_id": "MDU6SXNzdWUyNjA4NTQ1NTI=", "number": 13333, "title": "TensorFlow buillt with -march option gives illegal instruction when imported", "user": {"login": "namrata-ibm", "id": 21953668, "node_id": "MDQ6VXNlcjIxOTUzNjY4", "avatar_url": "https://avatars3.githubusercontent.com/u/21953668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/namrata-ibm", "html_url": "https://github.com/namrata-ibm", "followers_url": "https://api.github.com/users/namrata-ibm/followers", "following_url": "https://api.github.com/users/namrata-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/namrata-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/namrata-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/namrata-ibm/subscriptions", "organizations_url": "https://api.github.com/users/namrata-ibm/orgs", "repos_url": "https://api.github.com/users/namrata-ibm/repos", "events_url": "https://api.github.com/users/namrata-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/namrata-ibm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-27T05:51:56Z", "updated_at": "2017-09-28T04:44:51Z", "closed_at": "2017-09-28T04:44:51Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.2.1</li>\n<li><strong>Python version</strong>: 2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.4.5</li>\n<li><strong>CUDA/cuDNN version</strong>: No GPU</li>\n<li><strong>GPU model and memory</strong>: No GPU</li>\n<li><strong>Exact command to reproduce</strong>: Build and Install TensorFlow wheel and import TensorFlow</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I am trying to build TensorFlow by explicitly providing <code>\u2013march option on z13</code>.<br>\nIn the past I could build and install same version (v1.2.1) with default options(-march=native).</p>\n<p>The issue is when I use below commands for configure and build respectively:</p>\n<ul>\n<li>Configure -  <code>Please specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -march=z13    </code></li>\n<li>Build - <code>bazel build -c opt --config=opt //tensorflow/tools/pip_package:build_pip_package, </code></li>\n</ul>\n<p>the build succeeds however the TensorFlow wheel when installed gives issue of python crash:</p>\n<pre><code>root@8a268ac0eaea:~# python\n &gt;&gt;&gt; import tensorflow as tf\nIllegal instruction (core dumped)\nroot@8a268ac0eaea:\n\n</code></pre>\n<p>I have verified the system arch to be z13. However when I use command <code>gcc \u2013Q \u2013help=target </code> I could see <code>-march= zEC12</code>.<br>\nI am now trying to debug why passing \u2018z13\u2019  causes above issue with wheel.<br>\nAlso is there a way to find out what arch is exactly detected when \u2018native\u2019 is passed?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.2.1\nPython version: 2.7\nBazel version (if compiling from source): 0.4.5\nCUDA/cuDNN version: No GPU\nGPU model and memory: No GPU\nExact command to reproduce: Build and Install TensorFlow wheel and import TensorFlow\n\nDescribe the problem\nI am trying to build TensorFlow by explicitly providing \u2013march option on z13.\nIn the past I could build and install same version (v1.2.1) with default options(-march=native).\nThe issue is when I use below commands for configure and build respectively:\n\nConfigure -  Please specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -march=z13    \nBuild - bazel build -c opt --config=opt //tensorflow/tools/pip_package:build_pip_package, \n\nthe build succeeds however the TensorFlow wheel when installed gives issue of python crash:\nroot@8a268ac0eaea:~# python\n >>> import tensorflow as tf\nIllegal instruction (core dumped)\nroot@8a268ac0eaea:\n\n\nI have verified the system arch to be z13. However when I use command gcc \u2013Q \u2013help=target  I could see -march= zEC12.\nI am now trying to debug why passing \u2018z13\u2019  causes above issue with wheel.\nAlso is there a way to find out what arch is exactly detected when \u2018native\u2019 is passed?", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.2.1\r\n- **Python version**: 2.7\r\n- **Bazel version (if compiling from source)**: 0.4.5\r\n- **CUDA/cuDNN version**: No GPU\r\n- **GPU model and memory**: No GPU\r\n- **Exact command to reproduce**: Build and Install TensorFlow wheel and import TensorFlow\r\n\r\n### Describe the problem\r\nI am trying to build TensorFlow by explicitly providing `\u2013march option on z13`.   \r\nIn the past I could build and install same version (v1.2.1) with default options(-march=native). \r\n\r\nThe issue is when I use below commands for configure and build respectively:\r\n* Configure -  `Please specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: -march=z13   \r\n`   \r\n* Build - `bazel build -c opt --config=opt //tensorflow/tools/pip_package:build_pip_package,\r\n`   \r\n\r\nthe build succeeds however the TensorFlow wheel when installed gives issue of python crash:\r\n```\r\nroot@8a268ac0eaea:~# python\r\n >>> import tensorflow as tf\r\nIllegal instruction (core dumped)\r\nroot@8a268ac0eaea:\r\n\r\n```\r\nI have verified the system arch to be z13. However when I use command `gcc \u2013Q \u2013help=target ` I could see `-march= zEC12`.\r\nI am now trying to debug why passing \u2018z13\u2019  causes above issue with wheel.\r\nAlso is there a way to find out what arch is exactly detected when \u2018native\u2019 is passed?\r\n\r\n"}
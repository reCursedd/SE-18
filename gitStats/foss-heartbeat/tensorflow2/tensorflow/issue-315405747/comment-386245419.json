{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/386245419", "html_url": "https://github.com/tensorflow/tensorflow/issues/18643#issuecomment-386245419", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18643", "id": 386245419, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjI0NTQxOQ==", "user": {"login": "psyhtest", "id": 6597818, "node_id": "MDQ6VXNlcjY1OTc4MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/6597818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psyhtest", "html_url": "https://github.com/psyhtest", "followers_url": "https://api.github.com/users/psyhtest/followers", "following_url": "https://api.github.com/users/psyhtest/following{/other_user}", "gists_url": "https://api.github.com/users/psyhtest/gists{/gist_id}", "starred_url": "https://api.github.com/users/psyhtest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psyhtest/subscriptions", "organizations_url": "https://api.github.com/users/psyhtest/orgs", "repos_url": "https://api.github.com/users/psyhtest/repos", "events_url": "https://api.github.com/users/psyhtest/events{/privacy}", "received_events_url": "https://api.github.com/users/psyhtest/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-03T09:57:02Z", "updated_at": "2018-05-04T10:38:50Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=906325\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/peterlee0127\">@peterlee0127</a> I've incorporated your patch into <a href=\"https://github.com/ctuning/ck-tensorflow/tree/master/package/lib-tensorflow-1.8.0-src-cpu\"><code>ck-tensorflow:package:lib-tensorflow-1.8.0-src-cpu</code></a>, and also tested that (the latest) TensorFlow v1.8.0 can be built with (the latest) Bazel v0.13.0:</p>\n<pre><code>$ sudo apt install liblapack-dev libatlas-dev\n$ sudo pip install enum34 mock pillow wheel absl-py scipy ck\n$ ck pull repo:ck-tensorflow\n$ ck install ck-env:package:tool-bazel-0.13.0-linux\n$ ck install package:lib-tensorflow-1.8.0-src-cpu [--env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=1]\n</code></pre>\n<p>Specifically, here's how I built on:</p>\n<ul>\n<li>Firefly RK3399 (4 GB RAM, with swap):</li>\n</ul>\n<pre><code>$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=3\n...\nInstallation time: 24036.3912299 sec.\n</code></pre>\n<ul>\n<li>Linaro HiKey960 (3 GB RAM, with swap):</li>\n</ul>\n<pre><code>$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=2\n...\nInstallation time: 28039.245172 sec.\n</code></pre>\n<ul>\n<li>Jetson TX1 (4 GB RAM, without swap):</li>\n</ul>\n<pre><code>$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=1\n...\nInstallation time: 51031.3029599 sec.\n</code></pre>\n<p>(In other words, it took less than 7 hours on RK3399, and more than 14 hours on TX1.)</p>\n<p>Look forward to a more elegant solution to appear in TensorFlow v1.9.0, so this workaround is no longer needed.</p>", "body_text": "@peterlee0127 I've incorporated your patch into ck-tensorflow:package:lib-tensorflow-1.8.0-src-cpu, and also tested that (the latest) TensorFlow v1.8.0 can be built with (the latest) Bazel v0.13.0:\n$ sudo apt install liblapack-dev libatlas-dev\n$ sudo pip install enum34 mock pillow wheel absl-py scipy ck\n$ ck pull repo:ck-tensorflow\n$ ck install ck-env:package:tool-bazel-0.13.0-linux\n$ ck install package:lib-tensorflow-1.8.0-src-cpu [--env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=1]\n\nSpecifically, here's how I built on:\n\nFirefly RK3399 (4 GB RAM, with swap):\n\n$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=3\n...\nInstallation time: 24036.3912299 sec.\n\n\nLinaro HiKey960 (3 GB RAM, with swap):\n\n$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=2\n...\nInstallation time: 28039.245172 sec.\n\n\nJetson TX1 (4 GB RAM, without swap):\n\n$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=1\n...\nInstallation time: 51031.3029599 sec.\n\n(In other words, it took less than 7 hours on RK3399, and more than 14 hours on TX1.)\nLook forward to a more elegant solution to appear in TensorFlow v1.9.0, so this workaround is no longer needed.", "body": "@peterlee0127 I've incorporated your patch into [`ck-tensorflow:package:lib-tensorflow-1.8.0-src-cpu`](https://github.com/ctuning/ck-tensorflow/tree/master/package/lib-tensorflow-1.8.0-src-cpu), and also tested that (the latest) TensorFlow v1.8.0 can be built with (the latest) Bazel v0.13.0:\r\n```\r\n$ sudo apt install liblapack-dev libatlas-dev\r\n$ sudo pip install enum34 mock pillow wheel absl-py scipy ck\r\n$ ck pull repo:ck-tensorflow\r\n$ ck install ck-env:package:tool-bazel-0.13.0-linux\r\n$ ck install package:lib-tensorflow-1.8.0-src-cpu [--env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=1]\r\n```\r\nSpecifically, here's how I built on:\r\n- Firefly RK3399 (4 GB RAM, with swap):\r\n```\r\n$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=3\r\n...\r\nInstallation time: 24036.3912299 sec.\r\n```\r\n- Linaro HiKey960 (3 GB RAM, with swap):\r\n```\r\n$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=2\r\n...\r\nInstallation time: 28039.245172 sec.\r\n```\r\n\r\n- Jetson TX1 (4 GB RAM, without swap):\r\n```\r\n$ ck install package:lib-tensorflow-1.8.0-src-cpu --env.CK_HOST_CPU_NUMBER_OF_PROCESSORS=1\r\n...\r\nInstallation time: 51031.3029599 sec.\r\n```\r\n(In other words, it took less than 7 hours on RK3399, and more than 14 hours on TX1.)\r\n\r\nLook forward to a more elegant solution to appear in TensorFlow v1.9.0, so this workaround is no longer needed."}
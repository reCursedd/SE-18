{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22519", "id": 218188137, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE4MTg4MTM3", "html_url": "https://github.com/tensorflow/tensorflow/pull/22519", "diff_url": "https://github.com/tensorflow/tensorflow/pull/22519.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/22519.patch", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22519", "number": 22519, "state": "closed", "locked": false, "title": "Find NCCL2 debians in Tensorflow configure", "user": {"login": "jayfurmanek", "id": 8660918, "node_id": "MDQ6VXNlcjg2NjA5MTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/8660918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayfurmanek", "html_url": "https://github.com/jayfurmanek", "followers_url": "https://api.github.com/users/jayfurmanek/followers", "following_url": "https://api.github.com/users/jayfurmanek/following{/other_user}", "gists_url": "https://api.github.com/users/jayfurmanek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayfurmanek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayfurmanek/subscriptions", "organizations_url": "https://api.github.com/users/jayfurmanek/orgs", "repos_url": "https://api.github.com/users/jayfurmanek/repos", "events_url": "https://api.github.com/users/jayfurmanek/events{/privacy}", "received_events_url": "https://api.github.com/users/jayfurmanek/received_events", "type": "User", "site_admin": false}, "body": "Continuation of https://github.com/tensorflow/tensorflow/pull/20155\r\n\r\nThe Tensorlfow configure doesn't work with NCCL2 when it is installed via the debians.\r\nThis PR adds code that will handle the following scenarios:\r\n\r\n    NCCL2 installed via unpacked .tar file and not listed in ldconfig\r\n    NCCL2 installed via unpacked .tar file and listed properly in ldconfig\r\n    NCCL2 installed via debian file and not listed in ldconfig\r\n    NCCL2 installed via debian file and listed properly in ldconfig\r\n\r\nThe debian places the lib and header in the system paths (`/usr/lib/*-linux-gnu` and `/usr/include`). A new environment variable `NCCL_HDR_PATH` was created to deal with the divergence in the lib and header paths in this scenario. The `third_party/nccl/nccl_configure.bzl` file was changed to look up the new environment variable for the header location.", "created_at": "2018-09-26T04:48:57Z", "updated_at": "2018-10-02T00:30:23Z", "closed_at": "2018-10-02T00:30:23Z", "merged_at": "2018-10-02T00:30:23Z", "merge_commit_sha": "49978a87c80d85f8eea71e003265b788aa5febc3", "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22519/commits", "review_comments_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22519/comments", "review_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22519/comments", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/49978a87c80d85f8eea71e003265b788aa5febc3", "head": {"label": "jayfurmanek:nccl2_configure", "ref": "nccl2_configure", "sha": "49978a87c80d85f8eea71e003265b788aa5febc3", "user": {"login": "jayfurmanek", "id": 8660918, "node_id": "MDQ6VXNlcjg2NjA5MTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/8660918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayfurmanek", "html_url": "https://github.com/jayfurmanek", "followers_url": "https://api.github.com/users/jayfurmanek/followers", "following_url": "https://api.github.com/users/jayfurmanek/following{/other_user}", "gists_url": "https://api.github.com/users/jayfurmanek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayfurmanek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayfurmanek/subscriptions", "organizations_url": "https://api.github.com/users/jayfurmanek/orgs", "repos_url": "https://api.github.com/users/jayfurmanek/repos", "events_url": "https://api.github.com/users/jayfurmanek/events{/privacy}", "received_events_url": "https://api.github.com/users/jayfurmanek/received_events", "type": "User", "site_admin": false}, "repo": {"id": 137101083, "node_id": "MDEwOlJlcG9zaXRvcnkxMzcxMDEwODM=", "name": "tensorflow", "full_name": "jayfurmanek/tensorflow", "private": false, "owner": {"login": "jayfurmanek", "id": 8660918, "node_id": "MDQ6VXNlcjg2NjA5MTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/8660918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayfurmanek", "html_url": "https://github.com/jayfurmanek", "followers_url": "https://api.github.com/users/jayfurmanek/followers", "following_url": "https://api.github.com/users/jayfurmanek/following{/other_user}", "gists_url": "https://api.github.com/users/jayfurmanek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayfurmanek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayfurmanek/subscriptions", "organizations_url": "https://api.github.com/users/jayfurmanek/orgs", "repos_url": "https://api.github.com/users/jayfurmanek/repos", "events_url": "https://api.github.com/users/jayfurmanek/events{/privacy}", "received_events_url": "https://api.github.com/users/jayfurmanek/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/jayfurmanek/tensorflow", "description": "Computation using data flow graphs for scalable machine learning", "fork": true, "url": "https://api.github.com/repos/jayfurmanek/tensorflow", "forks_url": "https://api.github.com/repos/jayfurmanek/tensorflow/forks", "keys_url": "https://api.github.com/repos/jayfurmanek/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/jayfurmanek/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/jayfurmanek/tensorflow/teams", "hooks_url": "https://api.github.com/repos/jayfurmanek/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/jayfurmanek/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/jayfurmanek/tensorflow/events", "assignees_url": "https://api.github.com/repos/jayfurmanek/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/jayfurmanek/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/jayfurmanek/tensorflow/tags", "blobs_url": "https://api.github.com/repos/jayfurmanek/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/jayfurmanek/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/jayfurmanek/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/jayfurmanek/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/jayfurmanek/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/jayfurmanek/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/jayfurmanek/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/jayfurmanek/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/jayfurmanek/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/jayfurmanek/tensorflow/subscription", "commits_url": "https://api.github.com/repos/jayfurmanek/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/jayfurmanek/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/jayfurmanek/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/jayfurmanek/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/jayfurmanek/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/jayfurmanek/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/jayfurmanek/tensorflow/merges", "archive_url": "https://api.github.com/repos/jayfurmanek/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/jayfurmanek/tensorflow/downloads", "issues_url": "https://api.github.com/repos/jayfurmanek/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/jayfurmanek/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/jayfurmanek/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/jayfurmanek/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/jayfurmanek/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/jayfurmanek/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/jayfurmanek/tensorflow/deployments", "created_at": "2018-06-12T16:42:53Z", "updated_at": "2018-11-08T20:00:20Z", "pushed_at": "2018-11-09T22:28:33Z", "git_url": "git://github.com/jayfurmanek/tensorflow.git", "ssh_url": "git@github.com:jayfurmanek/tensorflow.git", "clone_url": "https://github.com/jayfurmanek/tensorflow.git", "svn_url": "https://github.com/jayfurmanek/tensorflow", "homepage": "https://tensorflow.org", "size": 273845, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "tensorflow:master", "ref": "master", "sha": "e45f7ee4182d5e831026f329cff5da2596d6733a", "user": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 45717250, "node_id": "MDEwOlJlcG9zaXRvcnk0NTcxNzI1MA==", "name": "tensorflow", "full_name": "tensorflow/tensorflow", "private": false, "owner": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/tensorflow/tensorflow", "description": "An Open Source Machine Learning Framework for Everyone", "fork": false, "url": "https://api.github.com/repos/tensorflow/tensorflow", "forks_url": "https://api.github.com/repos/tensorflow/tensorflow/forks", "keys_url": "https://api.github.com/repos/tensorflow/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/tensorflow/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/tensorflow/tensorflow/teams", "hooks_url": "https://api.github.com/repos/tensorflow/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/events", "assignees_url": "https://api.github.com/repos/tensorflow/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/tensorflow/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/tensorflow/tensorflow/tags", "blobs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/tensorflow/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/tensorflow/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/tensorflow/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/tensorflow/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/tensorflow/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/tensorflow/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/tensorflow/tensorflow/subscription", "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/tensorflow/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/tensorflow/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/tensorflow/tensorflow/merges", "archive_url": "https://api.github.com/repos/tensorflow/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/tensorflow/tensorflow/downloads", "issues_url": "https://api.github.com/repos/tensorflow/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/tensorflow/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/tensorflow/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/tensorflow/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/tensorflow/tensorflow/deployments", "created_at": "2015-11-07T01:19:20Z", "updated_at": "2018-11-24T22:13:04Z", "pushed_at": "2018-11-24T18:40:19Z", "git_url": "git://github.com/tensorflow/tensorflow.git", "ssh_url": "git@github.com:tensorflow/tensorflow.git", "clone_url": "https://github.com/tensorflow/tensorflow.git", "svn_url": "https://github.com/tensorflow/tensorflow", "homepage": "https://tensorflow.org", "size": 284546, "stargazers_count": 115176, "watchers_count": 115176, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 69946, "mirror_url": null, "archived": false, "open_issues_count": 1760, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 69946, "open_issues": 1760, "watchers": 115176, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22519"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/22519"}, "issue": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/22519"}, "comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/22519/comments"}, "review_comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22519/comments"}, "review_comment": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22519/commits"}, "statuses": {"href": "https://api.github.com/repos/tensorflow/tensorflow/statuses/49978a87c80d85f8eea71e003265b788aa5febc3"}}, "author_association": "CONTRIBUTOR", "body_html": "<p>Continuation of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"334195206\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/20155\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/20155/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/20155\">#20155</a></p>\n<p>The Tensorlfow configure doesn't work with NCCL2 when it is installed via the debians.<br>\nThis PR adds code that will handle the following scenarios:</p>\n<pre><code>NCCL2 installed via unpacked .tar file and not listed in ldconfig\nNCCL2 installed via unpacked .tar file and listed properly in ldconfig\nNCCL2 installed via debian file and not listed in ldconfig\nNCCL2 installed via debian file and listed properly in ldconfig\n</code></pre>\n<p>The debian places the lib and header in the system paths (<code>/usr/lib/*-linux-gnu</code> and <code>/usr/include</code>). A new environment variable <code>NCCL_HDR_PATH</code> was created to deal with the divergence in the lib and header paths in this scenario. The <code>third_party/nccl/nccl_configure.bzl</code> file was changed to look up the new environment variable for the header location.</p>", "body_text": "Continuation of #20155\nThe Tensorlfow configure doesn't work with NCCL2 when it is installed via the debians.\nThis PR adds code that will handle the following scenarios:\nNCCL2 installed via unpacked .tar file and not listed in ldconfig\nNCCL2 installed via unpacked .tar file and listed properly in ldconfig\nNCCL2 installed via debian file and not listed in ldconfig\nNCCL2 installed via debian file and listed properly in ldconfig\n\nThe debian places the lib and header in the system paths (/usr/lib/*-linux-gnu and /usr/include). A new environment variable NCCL_HDR_PATH was created to deal with the divergence in the lib and header paths in this scenario. The third_party/nccl/nccl_configure.bzl file was changed to look up the new environment variable for the header location.", "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "tensorflow-copybara", "id": 33434372, "node_id": "MDQ6VXNlcjMzNDM0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/33434372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow-copybara", "html_url": "https://github.com/tensorflow-copybara", "followers_url": "https://api.github.com/users/tensorflow-copybara/followers", "following_url": "https://api.github.com/users/tensorflow-copybara/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow-copybara/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow-copybara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow-copybara/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow-copybara/orgs", "repos_url": "https://api.github.com/users/tensorflow-copybara/repos", "events_url": "https://api.github.com/users/tensorflow-copybara/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow-copybara/received_events", "type": "User", "site_admin": false}, "comments": 4, "review_comments": 0, "maintainer_can_modify": false, "commits": 5, "additions": 104, "deletions": 38, "changed_files": 3}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3083", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3083/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3083/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3083/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3083", "id": 162743198, "node_id": "MDU6SXNzdWUxNjI3NDMxOTg=", "number": 3083, "title": "ValueError in tensorflow/examples/skflow/mnist_weights.py", "user": {"login": "tcfuji", "id": 4951527, "node_id": "MDQ6VXNlcjQ5NTE1Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4951527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tcfuji", "html_url": "https://github.com/tcfuji", "followers_url": "https://api.github.com/users/tcfuji/followers", "following_url": "https://api.github.com/users/tcfuji/following{/other_user}", "gists_url": "https://api.github.com/users/tcfuji/gists{/gist_id}", "starred_url": "https://api.github.com/users/tcfuji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tcfuji/subscriptions", "organizations_url": "https://api.github.com/users/tcfuji/orgs", "repos_url": "https://api.github.com/users/tcfuji/repos", "events_url": "https://api.github.com/users/tcfuji/events{/privacy}", "received_events_url": "https://api.github.com/users/tcfuji/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "ilblackdragon", "id": 175486, "node_id": "MDQ6VXNlcjE3NTQ4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/175486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilblackdragon", "html_url": "https://github.com/ilblackdragon", "followers_url": "https://api.github.com/users/ilblackdragon/followers", "following_url": "https://api.github.com/users/ilblackdragon/following{/other_user}", "gists_url": "https://api.github.com/users/ilblackdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilblackdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilblackdragon/subscriptions", "organizations_url": "https://api.github.com/users/ilblackdragon/orgs", "repos_url": "https://api.github.com/users/ilblackdragon/repos", "events_url": "https://api.github.com/users/ilblackdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/ilblackdragon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ilblackdragon", "id": 175486, "node_id": "MDQ6VXNlcjE3NTQ4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/175486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilblackdragon", "html_url": "https://github.com/ilblackdragon", "followers_url": "https://api.github.com/users/ilblackdragon/followers", "following_url": "https://api.github.com/users/ilblackdragon/following{/other_user}", "gists_url": "https://api.github.com/users/ilblackdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilblackdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilblackdragon/subscriptions", "organizations_url": "https://api.github.com/users/ilblackdragon/orgs", "repos_url": "https://api.github.com/users/ilblackdragon/repos", "events_url": "https://api.github.com/users/ilblackdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/ilblackdragon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-06-28T17:37:06Z", "updated_at": "2016-10-28T05:02:39Z", "closed_at": "2016-10-28T05:02:39Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>Environment info</h3>\n<p>OS: OS X 10.11.5</p>\n<p>Cuda version: 7.5.30</p>\n<p>cuDNN version: v5.1rc (or 5103)</p>\n<p>Tensorflow version: 0.9.0rc0</p>\n<p>Installed with cuda support using these <a href=\"https://medium.com/@fabmilo/how-to-compile-tensorflow-with-cuda-support-on-osx-fd27108e27e1#.mf4zcsmu3\" rel=\"nofollow\">instructions</a>.</p>\n<h3>Steps to reproduce:</h3>\n<ol>\n<li>cd tensorflow/examples/skflow/</li>\n<li>$ python mnist_weights.py</li>\n</ol>\n<h3>Output:</h3>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.7.5.dylib locally\nExtracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\nWARNING:tensorflow:TensorFlowLinearClassifier class is deprecated. Please consider using LinearClassifier as an alternative.\nTraceback (most recent call last):\n  File \"mnist_weights.py\", line 37, in &lt;module&gt;\n    classifier.fit(mnist.train.images, mnist.train.labels)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 458, in fit\n    batch_size=batch_size or self.batch_size, monitors=monitors)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 182, in fit\n    monitors=monitors)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 449, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/linear.py\", line 97, in _get_train_ops\n    return super(LinearClassifier, self)._get_train_ops(features, targets)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 158, in _get_train_ops\n    targets, self._get_weight_tensor(features))]):\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 282, in _centered_bias_step\n    loss = self._loss(logits, targets, weight_tensor)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 316, in _loss\n    loss_vec = self._loss_vec(logits, target)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 510, in _loss_vec\n    \"Instead got %s.\" % target.dtype)\nValueError: Target's dtype should be int32, int64 or compatible. Instead got &lt;dtype: 'uint8'&gt;.\n</code></pre>\n<h3>What have I tried?</h3>\n<p>I used the ndarray method <code>.astype</code> to change the type appropriately. That is, I replaced <code>mnist.train.images</code> with <code>mnist.train.images.astype(np.float32)</code> and <code>mnist.train.labels</code> with <code>mnist.train.images.astype(int)</code>.</p>\n<h5>I can make a PR for this if you want.</h5>", "body_text": "Environment info\nOS: OS X 10.11.5\nCuda version: 7.5.30\ncuDNN version: v5.1rc (or 5103)\nTensorflow version: 0.9.0rc0\nInstalled with cuda support using these instructions.\nSteps to reproduce:\n\ncd tensorflow/examples/skflow/\n$ python mnist_weights.py\n\nOutput:\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.7.5.dylib locally\nExtracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\nWARNING:tensorflow:TensorFlowLinearClassifier class is deprecated. Please consider using LinearClassifier as an alternative.\nTraceback (most recent call last):\n  File \"mnist_weights.py\", line 37, in <module>\n    classifier.fit(mnist.train.images, mnist.train.labels)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 458, in fit\n    batch_size=batch_size or self.batch_size, monitors=monitors)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 182, in fit\n    monitors=monitors)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 449, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/linear.py\", line 97, in _get_train_ops\n    return super(LinearClassifier, self)._get_train_ops(features, targets)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 158, in _get_train_ops\n    targets, self._get_weight_tensor(features))]):\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 282, in _centered_bias_step\n    loss = self._loss(logits, targets, weight_tensor)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 316, in _loss\n    loss_vec = self._loss_vec(logits, target)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 510, in _loss_vec\n    \"Instead got %s.\" % target.dtype)\nValueError: Target's dtype should be int32, int64 or compatible. Instead got <dtype: 'uint8'>.\n\nWhat have I tried?\nI used the ndarray method .astype to change the type appropriately. That is, I replaced mnist.train.images with mnist.train.images.astype(np.float32) and mnist.train.labels with mnist.train.images.astype(int).\nI can make a PR for this if you want.", "body": "### Environment info\n\nOS: OS X 10.11.5\n\nCuda version: 7.5.30\n\ncuDNN version: v5.1rc (or 5103)\n\nTensorflow version: 0.9.0rc0\n\nInstalled with cuda support using these [instructions](https://medium.com/@fabmilo/how-to-compile-tensorflow-with-cuda-support-on-osx-fd27108e27e1#.mf4zcsmu3).\n### Steps to reproduce:\n1. cd tensorflow/examples/skflow/\n2. $ python mnist_weights.py\n### Output:\n\n```\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.7.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.7.5.dylib locally\nExtracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\nWARNING:tensorflow:TensorFlowLinearClassifier class is deprecated. Please consider using LinearClassifier as an alternative.\nTraceback (most recent call last):\n  File \"mnist_weights.py\", line 37, in <module>\n    classifier.fit(mnist.train.images, mnist.train.labels)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 458, in fit\n    batch_size=batch_size or self.batch_size, monitors=monitors)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 182, in fit\n    monitors=monitors)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 449, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/linear.py\", line 97, in _get_train_ops\n    return super(LinearClassifier, self)._get_train_ops(features, targets)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 158, in _get_train_ops\n    targets, self._get_weight_tensor(features))]):\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 282, in _centered_bias_step\n    loss = self._loss(logits, targets, weight_tensor)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 316, in _loss\n    loss_vec = self._loss_vec(logits, target)\n  File \"/Users/tcf/.virtualenvs/dnn/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 510, in _loss_vec\n    \"Instead got %s.\" % target.dtype)\nValueError: Target's dtype should be int32, int64 or compatible. Instead got <dtype: 'uint8'>.\n```\n### What have I tried?\n\nI used the ndarray method `.astype` to change the type appropriately. That is, I replaced `mnist.train.images` with `mnist.train.images.astype(np.float32)` and `mnist.train.labels` with `mnist.train.images.astype(int)`.\n##### I can make a PR for this if you want.\n"}
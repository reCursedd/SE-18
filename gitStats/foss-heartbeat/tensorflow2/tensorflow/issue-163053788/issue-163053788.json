{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3117", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3117/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3117/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3117/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3117", "id": 163053788, "node_id": "MDU6SXNzdWUxNjMwNTM3ODg=", "number": 3117, "title": "Android Tensorflow Crashes w/ Custom Graph ", "user": {"login": "wagonhelm", "id": 18343189, "node_id": "MDQ6VXNlcjE4MzQzMTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/18343189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wagonhelm", "html_url": "https://github.com/wagonhelm", "followers_url": "https://api.github.com/users/wagonhelm/followers", "following_url": "https://api.github.com/users/wagonhelm/following{/other_user}", "gists_url": "https://api.github.com/users/wagonhelm/gists{/gist_id}", "starred_url": "https://api.github.com/users/wagonhelm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wagonhelm/subscriptions", "organizations_url": "https://api.github.com/users/wagonhelm/orgs", "repos_url": "https://api.github.com/users/wagonhelm/repos", "events_url": "https://api.github.com/users/wagonhelm/events{/privacy}", "received_events_url": "https://api.github.com/users/wagonhelm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-06-29T23:59:33Z", "updated_at": "2016-07-01T00:08:13Z", "closed_at": "2016-06-30T16:54:27Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Solved: Followed steps at the bottom of <a href=\"https://github.com/tensorflow/tensorflow/issues/1269\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1269/hovercard\">#1269</a></p>\n<p>And the app works fine!</p>\n<h3>Environment info</h3>\n<p>Ubuntu 14.04<br>\nAndroid LG G4</p>\n<p>Installed version of CUDA and cuDNN:<br>\nCuda 7.5<br>\ncuDNN 5</p>\n<p>-rw-r--r-- 1 root root   322936 Aug 15  2015 /usr/local/cuda/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root       16 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so -&gt; libcudart.so.7.5<br>\nlrwxrwxrwx 1 root root       19 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so.7.5 -&gt; libcudart.so.7.5.18<br>\n-rwxr-xr-x 1 root root   383336 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so.7.5.18<br>\n-rw-r--r-- 1 root root   720192 Aug 15  2015 /usr/local/cuda/lib64/libcudart_static.a<br>\nlrwxrwxrwx 1 root root       13 Jun 29 09:46 /usr/local/cuda/lib64/libcudnn.so -&gt; libcudnn.so.5<br>\nlrwxrwxrwx 1 root root       17 Jun 29 09:46 /usr/local/cuda/lib64/libcudnn.so.5 -&gt; libcudnn.so.5.0.5<br>\n-rwxrwxr-x 1 root root 59909104 Apr 22 17:15 /usr/local/cuda/lib64/libcudnn.so.5.0.5<br>\n-rw-rw-r-- 1 root root 58775484 Apr 22 17:15 /usr/local/cuda/lib64/libcudnn_static.a</p>\n<p>If installed from sources, provide the commit hash:</p>\n<p>Installed from source June 29th, 2016</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Followed Tensorflow for Poets tutorial (OK!) used --config=cuda and --use_gpu to speed up process</li>\n<li>Create new graph and labels and test to see if it can classify new image (OK!)</li>\n<li>Try to build tensorflow_demo.apk using new graph and labels with modifications to:</li>\n</ol>\n<p><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/src/org/tensorflow/demo/TensorflowImageListener.java#L45\">TensorflowImageListener.java</a></p>\n<pre><code>  // These are the settings for the original v1 Inception model. If you want to\n  // use a model that's been produced from the TensorFlow for Poets codelab,\n  // you'll need to set IMAGE_SIZE = 299 **_# do they mean INPUT_SIZE?_**, IMAGE_MEAN = 128, IMAGE_STD = 128,\n  // INPUT_NAME = \"Mul:0\", and OUTPUT_NAME = \"final_result:0\".\n  // You'll also need to update the MODEL_FILE and LABEL_FILE paths to point to\n  // the ones you produced.\n  private static final int NUM_CLASSES = 5;\n  private static final int INPUT_SIZE = 299;\n  private static final int IMAGE_SIZE = 299; **_# i added this line in / confused about instructions_**\n  private static final int IMAGE_MEAN = 128;\n  private static final float IMAGE_STD = 128;\n  private static final String INPUT_NAME = \"Mul:0\";\n  private static final String OUTPUT_NAME = \"final_result:0\";\n\n  private static final String MODEL_FILE = \"file:///android_asset/retrained_graph.pb\";\n  private static final String LABEL_FILE =\n\"file:///android_asset/retrained_labels.txt\";\n\n// I moved files into /tensorflow/examples/android/assets\n</code></pre>\n<ol start=\"4\">\n<li>\n<p>Do bazel build and adb devices install</p>\n</li>\n<li>\n<p>Launch app and it crashes everytime</p>\n</li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>I restored TensorflowImageListener.java to it's original state and the app works fine.</li>\n</ol>", "body_text": "Solved: Followed steps at the bottom of #1269\nAnd the app works fine!\nEnvironment info\nUbuntu 14.04\nAndroid LG G4\nInstalled version of CUDA and cuDNN:\nCuda 7.5\ncuDNN 5\n-rw-r--r-- 1 root root   322936 Aug 15  2015 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root   383336 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root   720192 Aug 15  2015 /usr/local/cuda/lib64/libcudart_static.a\nlrwxrwxrwx 1 root root       13 Jun 29 09:46 /usr/local/cuda/lib64/libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Jun 29 09:46 /usr/local/cuda/lib64/libcudnn.so.5 -> libcudnn.so.5.0.5\n-rwxrwxr-x 1 root root 59909104 Apr 22 17:15 /usr/local/cuda/lib64/libcudnn.so.5.0.5\n-rw-rw-r-- 1 root root 58775484 Apr 22 17:15 /usr/local/cuda/lib64/libcudnn_static.a\nIf installed from sources, provide the commit hash:\nInstalled from source June 29th, 2016\nSteps to reproduce\n\nFollowed Tensorflow for Poets tutorial (OK!) used --config=cuda and --use_gpu to speed up process\nCreate new graph and labels and test to see if it can classify new image (OK!)\nTry to build tensorflow_demo.apk using new graph and labels with modifications to:\n\nTensorflowImageListener.java\n  // These are the settings for the original v1 Inception model. If you want to\n  // use a model that's been produced from the TensorFlow for Poets codelab,\n  // you'll need to set IMAGE_SIZE = 299 **_# do they mean INPUT_SIZE?_**, IMAGE_MEAN = 128, IMAGE_STD = 128,\n  // INPUT_NAME = \"Mul:0\", and OUTPUT_NAME = \"final_result:0\".\n  // You'll also need to update the MODEL_FILE and LABEL_FILE paths to point to\n  // the ones you produced.\n  private static final int NUM_CLASSES = 5;\n  private static final int INPUT_SIZE = 299;\n  private static final int IMAGE_SIZE = 299; **_# i added this line in / confused about instructions_**\n  private static final int IMAGE_MEAN = 128;\n  private static final float IMAGE_STD = 128;\n  private static final String INPUT_NAME = \"Mul:0\";\n  private static final String OUTPUT_NAME = \"final_result:0\";\n\n  private static final String MODEL_FILE = \"file:///android_asset/retrained_graph.pb\";\n  private static final String LABEL_FILE =\n\"file:///android_asset/retrained_labels.txt\";\n\n// I moved files into /tensorflow/examples/android/assets\n\n\n\nDo bazel build and adb devices install\n\n\nLaunch app and it crashes everytime\n\n\nWhat have you tried?\n\nI restored TensorflowImageListener.java to it's original state and the app works fine.", "body": "Solved: Followed steps at the bottom of [#1269](https://github.com/tensorflow/tensorflow/issues/1269)\n\nAnd the app works fine!\n### Environment info\n\nUbuntu 14.04\nAndroid LG G4\n\nInstalled version of CUDA and cuDNN: \nCuda 7.5\ncuDNN 5\n\n-rw-r--r-- 1 root root   322936 Aug 15  2015 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root       19 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root   383336 Aug 15  2015 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root   720192 Aug 15  2015 /usr/local/cuda/lib64/libcudart_static.a\nlrwxrwxrwx 1 root root       13 Jun 29 09:46 /usr/local/cuda/lib64/libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Jun 29 09:46 /usr/local/cuda/lib64/libcudnn.so.5 -> libcudnn.so.5.0.5\n-rwxrwxr-x 1 root root 59909104 Apr 22 17:15 /usr/local/cuda/lib64/libcudnn.so.5.0.5\n-rw-rw-r-- 1 root root 58775484 Apr 22 17:15 /usr/local/cuda/lib64/libcudnn_static.a\n\nIf installed from sources, provide the commit hash:\n\nInstalled from source June 29th, 2016\n### Steps to reproduce\n1. Followed Tensorflow for Poets tutorial (OK!) used --config=cuda and --use_gpu to speed up process\n2. Create new graph and labels and test to see if it can classify new image (OK!)\n3. Try to build tensorflow_demo.apk using new graph and labels with modifications to:\n\n[TensorflowImageListener.java](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/src/org/tensorflow/demo/TensorflowImageListener.java#L45)\n\n```\n  // These are the settings for the original v1 Inception model. If you want to\n  // use a model that's been produced from the TensorFlow for Poets codelab,\n  // you'll need to set IMAGE_SIZE = 299 **_# do they mean INPUT_SIZE?_**, IMAGE_MEAN = 128, IMAGE_STD = 128,\n  // INPUT_NAME = \"Mul:0\", and OUTPUT_NAME = \"final_result:0\".\n  // You'll also need to update the MODEL_FILE and LABEL_FILE paths to point to\n  // the ones you produced.\n  private static final int NUM_CLASSES = 5;\n  private static final int INPUT_SIZE = 299;\n  private static final int IMAGE_SIZE = 299; **_# i added this line in / confused about instructions_**\n  private static final int IMAGE_MEAN = 128;\n  private static final float IMAGE_STD = 128;\n  private static final String INPUT_NAME = \"Mul:0\";\n  private static final String OUTPUT_NAME = \"final_result:0\";\n\n  private static final String MODEL_FILE = \"file:///android_asset/retrained_graph.pb\";\n  private static final String LABEL_FILE =\n\"file:///android_asset/retrained_labels.txt\";\n\n// I moved files into /tensorflow/examples/android/assets\n```\n\n4) Do bazel build and adb devices install\n\n5) Launch app and it crashes everytime\n### What have you tried?\n1.  I restored TensorflowImageListener.java to it's original state and the app works fine.\n"}
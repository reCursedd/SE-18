{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/304480028", "html_url": "https://github.com/tensorflow/tensorflow/issues/10199#issuecomment-304480028", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10199", "id": 304480028, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDQ4MDAyOA==", "user": {"login": "serchsm", "id": 22671922, "node_id": "MDQ6VXNlcjIyNjcxOTIy", "avatar_url": "https://avatars2.githubusercontent.com/u/22671922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/serchsm", "html_url": "https://github.com/serchsm", "followers_url": "https://api.github.com/users/serchsm/followers", "following_url": "https://api.github.com/users/serchsm/following{/other_user}", "gists_url": "https://api.github.com/users/serchsm/gists{/gist_id}", "starred_url": "https://api.github.com/users/serchsm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/serchsm/subscriptions", "organizations_url": "https://api.github.com/users/serchsm/orgs", "repos_url": "https://api.github.com/users/serchsm/repos", "events_url": "https://api.github.com/users/serchsm/events{/privacy}", "received_events_url": "https://api.github.com/users/serchsm/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-27T22:30:55Z", "updated_at": "2017-05-27T22:30:55Z", "author_association": "NONE", "body_html": "<p>Hi.<br>\nIt builds with \"arch:/avx\" and I installed the whl. It works and it actually does inference 30% faster than without the SIMD options! From what I understand, we are seeing false warnings.</p>\n<p>Now, since one of the warnings was that the CPU supports AVX2. I tried to build with AVX2<br>\n<code>&gt;cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:/tools/swigwin-3.0.12\\swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\sergio.murillo\\AppData\\Local\\Programs\\Python\\Python35/PYTHON.EXE -DPYTHON_LIBRARIES=C:\\Users\\sergio.murillo\\AppData\\Local\\Programs\\Python\\Python35\\libs\\python35.lib -Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX2</code></p>\n<p>Then,</p>\n<p><code>MSBuild /p:Configuration=Release /filelogger tf_python_build_pip_package.vcxproj</code></p>\n<p>Here is when it returns 550 errors all variants of the following:</p>\n<p><code>\"C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj\" (default target) (7) -&gt; (ClCompile target) -&gt;  c:\\projects\\tensorflow\\third_party\\eigen3\\unsupported\\eigen\\cxx11\\src\\fixedpoint\\packetmathavx2.h(274): error C3861: '_mm256_extract_epi16': identifier not found (compiling source file C:\\Projects\\tensorflow\\tensorflow\\core\\framework\\allocator_registry.cc) [C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj] c:\\projects\\tensorflow\\third_party\\eigen3\\unsupported\\eigen\\cxx11\\src\\fixedpoint\\packetmathavx2.h(278): error C3861: '_mm256_extract_epi8': identifier not found (compiling source file C:\\Projects\\tensorflow\\tensorflow\\core\\framework\\allocator_registry.cc) [C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj]</code></p>\n<p>Same type of error but for different source files. My processor is i7-6600U which according to <a href=\"http://www.intel.com/content/www/us/en/products/processors/core/core-vpro/i7-6600u.html\" rel=\"nofollow\">this Intel page</a> supports SSE4.1/4.2, AVX 2.0</p>\n<p>I do have <code>immintrin.h</code> in C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include but  <code>_mm256_extract_epi8</code> and <code>_mm256_extract_epi16</code>are not defined in that file.</p>", "body_text": "Hi.\nIt builds with \"arch:/avx\" and I installed the whl. It works and it actually does inference 30% faster than without the SIMD options! From what I understand, we are seeing false warnings.\nNow, since one of the warnings was that the CPU supports AVX2. I tried to build with AVX2\n>cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:/tools/swigwin-3.0.12\\swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\sergio.murillo\\AppData\\Local\\Programs\\Python\\Python35/PYTHON.EXE -DPYTHON_LIBRARIES=C:\\Users\\sergio.murillo\\AppData\\Local\\Programs\\Python\\Python35\\libs\\python35.lib -Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX2\nThen,\nMSBuild /p:Configuration=Release /filelogger tf_python_build_pip_package.vcxproj\nHere is when it returns 550 errors all variants of the following:\n\"C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj\" (default target) (7) -> (ClCompile target) ->  c:\\projects\\tensorflow\\third_party\\eigen3\\unsupported\\eigen\\cxx11\\src\\fixedpoint\\packetmathavx2.h(274): error C3861: '_mm256_extract_epi16': identifier not found (compiling source file C:\\Projects\\tensorflow\\tensorflow\\core\\framework\\allocator_registry.cc) [C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj] c:\\projects\\tensorflow\\third_party\\eigen3\\unsupported\\eigen\\cxx11\\src\\fixedpoint\\packetmathavx2.h(278): error C3861: '_mm256_extract_epi8': identifier not found (compiling source file C:\\Projects\\tensorflow\\tensorflow\\core\\framework\\allocator_registry.cc) [C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj]\nSame type of error but for different source files. My processor is i7-6600U which according to this Intel page supports SSE4.1/4.2, AVX 2.0\nI do have immintrin.h in C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include but  _mm256_extract_epi8 and _mm256_extract_epi16are not defined in that file.", "body": "Hi.\r\nIt builds with \"arch:/avx\" and I installed the whl. It works and it actually does inference 30% faster than without the SIMD options! From what I understand, we are seeing false warnings.\r\n\r\nNow, since one of the warnings was that the CPU supports AVX2. I tried to build with AVX2\r\n`>cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:/tools/swigwin-3.0.12\\swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\sergio.murillo\\AppData\\Local\\Programs\\Python\\Python35/PYTHON.EXE -DPYTHON_LIBRARIES=C:\\Users\\sergio.murillo\\AppData\\Local\\Programs\\Python\\Python35\\libs\\python35.lib -Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX2`\r\n\r\nThen,\r\n\r\n`MSBuild /p:Configuration=Release /filelogger tf_python_build_pip_package.vcxproj`\r\n\r\nHere is when it returns 550 errors all variants of the following:\r\n\r\n`\"C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj\" (default target) (7) ->\r\n(ClCompile target) -> \r\n  c:\\projects\\tensorflow\\third_party\\eigen3\\unsupported\\eigen\\cxx11\\src\\fixedpoint\\packetmathavx2.h(274): error C3861: '_mm256_extract_epi16': identifier not found (compiling source file C:\\Projects\\tensorflow\\tensorflow\\core\\framework\\allocator_registry.cc) [C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj]\r\n  c:\\projects\\tensorflow\\third_party\\eigen3\\unsupported\\eigen\\cxx11\\src\\fixedpoint\\packetmathavx2.h(278): error C3861: '_mm256_extract_epi8': identifier not found (compiling source file C:\\Projects\\tensorflow\\tensorflow\\core\\framework\\allocator_registry.cc) [C:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj]`\r\n\r\nSame type of error but for different source files. My processor is i7-6600U which according to [this Intel page](http://www.intel.com/content/www/us/en/products/processors/core/core-vpro/i7-6600u.html) supports SSE4.1/4.2, AVX 2.0\r\n\r\nI do have `immintrin.h` in C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include but  `_mm256_extract_epi8` and ` _mm256_extract_epi16 `are not defined in that file. "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6195", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6195/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6195/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6195/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6195", "id": 194430171, "node_id": "MDU6SXNzdWUxOTQ0MzAxNzE=", "number": 6195, "title": "Running summary call crashes sporadically", "user": {"login": "danielgordon10", "id": 7245472, "node_id": "MDQ6VXNlcjcyNDU0NzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/7245472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielgordon10", "html_url": "https://github.com/danielgordon10", "followers_url": "https://api.github.com/users/danielgordon10/followers", "following_url": "https://api.github.com/users/danielgordon10/following{/other_user}", "gists_url": "https://api.github.com/users/danielgordon10/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielgordon10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielgordon10/subscriptions", "organizations_url": "https://api.github.com/users/danielgordon10/orgs", "repos_url": "https://api.github.com/users/danielgordon10/repos", "events_url": "https://api.github.com/users/danielgordon10/events{/privacy}", "received_events_url": "https://api.github.com/users/danielgordon10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2016-12-08T20:00:51Z", "updated_at": "2018-02-06T16:31:56Z", "closed_at": "2018-02-06T16:31:56Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Every so often when calling session.run on my summary graph, the whole thing crashes. The only error it says is Segmentation fault (core dumped). I don't know exactly what steps to take to reproduce it, but I do know it fails on this line:</p>\n<div class=\"highlight highlight-source-python\"><pre>_, summary_str <span class=\"pl-k\">=</span> sess.run([train_op, summary],  \n    <span class=\"pl-v\">options</span><span class=\"pl-k\">=</span>run_options,\n    <span class=\"pl-v\">run_metadata</span><span class=\"pl-k\">=</span>run_metadata)</pre></div>\n<p>Summary is just defined as <code>summary = tf.summary.merge_all()</code></p>\n<p>It never crashes when only running train_op, and only crashes when running the summary every 10,000 or so iterations.</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 16.04</p>\n<p>Installed version of CUDA and cuDNN: 8.0, cudnn 5.1.5<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\nls -l /usr/local/cuda/lib64/libcud* results in</p>\n<p>-rw-r--r-- 1 root root   558720 Nov 17 14:07 /usr/local/cuda/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root       16 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so -&gt; libcudart.so.8.0<br>\nlrwxrwxrwx 1 root root       19 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.44<br>\n-rwxr-xr-x 1 root root   415432 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so.8.0.44<br>\n-rw-r--r-- 1 root root   775162 Nov 17 14:07 /usr/local/cuda/lib64/libcudart_static.a<br>\n-rwxr-xr-x 1 root root 79337624 Nov 17 17:24 /usr/local/cuda/lib64/libcudnn.so<br>\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5 -&gt; /usr/local/cuda/lib64/libcudnn.so<br>\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5.1 -&gt; /usr/local/cuda/lib64/libcudnn.so<br>\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5.1.5 -&gt; /usr/local/cuda/lib64/libcudnn.so</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>) <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/93a91d9b782e01612175bb1f76688aa2580a968f/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/93a91d9b782e01612175bb1f76688aa2580a968f\"><tt>93a91d9</tt></a></li>\n<li>The output of <code>bazel version</code><br>\nExtracting Bazel installation...<br>\n..........<br>\nBuild label: 0.4.0<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Wed Nov 2 17:54:14 2016 (1478109254)<br>\nBuild timestamp: 1478109254<br>\nBuild timestamp as int: 1478109254</li>\n</ol>", "body_text": "Every so often when calling session.run on my summary graph, the whole thing crashes. The only error it says is Segmentation fault (core dumped). I don't know exactly what steps to take to reproduce it, but I do know it fails on this line:\n_, summary_str = sess.run([train_op, summary],  \n    options=run_options,\n    run_metadata=run_metadata)\nSummary is just defined as summary = tf.summary.merge_all()\nIt never crashes when only running train_op, and only crashes when running the summary every 10,000 or so iterations.\nEnvironment info\nOperating System: Ubuntu 16.04\nInstalled version of CUDA and cuDNN: 8.0, cudnn 5.1.5\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nls -l /usr/local/cuda/lib64/libcud* results in\n-rw-r--r-- 1 root root   558720 Nov 17 14:07 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so.8.0 -> libcudart.so.8.0.44\n-rwxr-xr-x 1 root root   415432 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so.8.0.44\n-rw-r--r-- 1 root root   775162 Nov 17 14:07 /usr/local/cuda/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 79337624 Nov 17 17:24 /usr/local/cuda/lib64/libcudnn.so\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5 -> /usr/local/cuda/lib64/libcudnn.so\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5.1 -> /usr/local/cuda/lib64/libcudnn.so\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5.1.5 -> /usr/local/cuda/lib64/libcudnn.so\n\nThe commit hash (git rev-parse HEAD) 93a91d9\nThe output of bazel version\nExtracting Bazel installation...\n..........\nBuild label: 0.4.0\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Nov 2 17:54:14 2016 (1478109254)\nBuild timestamp: 1478109254\nBuild timestamp as int: 1478109254", "body": "Every so often when calling session.run on my summary graph, the whole thing crashes. The only error it says is Segmentation fault (core dumped). I don't know exactly what steps to take to reproduce it, but I do know it fails on this line:\r\n``` python\r\n_, summary_str = sess.run([train_op, summary],  \r\n    options=run_options,\r\n    run_metadata=run_metadata)\r\n```\r\nSummary is just defined as `summary = tf.summary.merge_all()`\r\n\r\nIt never crashes when only running train_op, and only crashes when running the summary every 10,000 or so iterations.\r\n\r\n### Environment info\r\nOperating System: Ubuntu 16.04\r\n\r\nInstalled version of CUDA and cuDNN: 8.0, cudnn 5.1.5\r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\nls -l /usr/local/cuda/lib64/libcud* results in \r\n\r\n-rw-r--r-- 1 root root   558720 Nov 17 14:07 /usr/local/cuda/lib64/libcudadevrt.a\r\nlrwxrwxrwx 1 root root       16 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.8.0\r\nlrwxrwxrwx 1 root root       19 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so.8.0 -> libcudart.so.8.0.44\r\n-rwxr-xr-x 1 root root   415432 Nov 17 14:07 /usr/local/cuda/lib64/libcudart.so.8.0.44\r\n-rw-r--r-- 1 root root   775162 Nov 17 14:07 /usr/local/cuda/lib64/libcudart_static.a\r\n-rwxr-xr-x 1 root root 79337624 Nov 17 17:24 /usr/local/cuda/lib64/libcudnn.so\r\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5 -> /usr/local/cuda/lib64/libcudnn.so\r\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5.1 -> /usr/local/cuda/lib64/libcudnn.so\r\nlrwxrwxrwx 1 root root       33 Nov 17 17:25 /usr/local/cuda/lib64/libcudnn.so.5.1.5 -> /usr/local/cuda/lib64/libcudnn.so\r\n\r\n1. The commit hash (`git rev-parse HEAD`) 93a91d9b782e01612175bb1f76688aa2580a968f\r\n2. The output of `bazel version`\r\nExtracting Bazel installation...\r\n..........\r\nBuild label: 0.4.0\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed Nov 2 17:54:14 2016 (1478109254)\r\nBuild timestamp: 1478109254\r\nBuild timestamp as int: 1478109254\r\n"}
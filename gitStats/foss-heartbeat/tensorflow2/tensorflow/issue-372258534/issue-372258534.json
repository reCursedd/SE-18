{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23134", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23134/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23134/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23134/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23134", "id": 372258534, "node_id": "MDU6SXNzdWUzNzIyNTg1MzQ=", "number": 23134, "title": "AttributeError: 'CuDNNLSTM' object has no attribute '_num_inputs' | Tflite", "user": {"login": "kedartatwawadi", "id": 1708665, "node_id": "MDQ6VXNlcjE3MDg2NjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1708665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kedartatwawadi", "html_url": "https://github.com/kedartatwawadi", "followers_url": "https://api.github.com/users/kedartatwawadi/followers", "following_url": "https://api.github.com/users/kedartatwawadi/following{/other_user}", "gists_url": "https://api.github.com/users/kedartatwawadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kedartatwawadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kedartatwawadi/subscriptions", "organizations_url": "https://api.github.com/users/kedartatwawadi/orgs", "repos_url": "https://api.github.com/users/kedartatwawadi/repos", "events_url": "https://api.github.com/users/kedartatwawadi/events{/privacy}", "received_events_url": "https://api.github.com/users/kedartatwawadi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-20T22:25:25Z", "updated_at": "2018-11-13T22:02:49Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><em>Please make sure that this is a bug. As per our <a href=\"https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md\">GitHub Policy</a>, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em></p>\n<p><strong>System information</strong></p>\n<ul>\n<li>Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No</li>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04 (I think), I used the nightly docker:<br>\ndocker run --runtime=nvidia -it tensorflow/tensorflow:nightly-gpu-py3 bash</li>\n<li>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No</li>\n<li>TensorFlow installed from (source or binary): docker:<br>\ndocker run --runtime=nvidia -it tensorflow/tensorflow:nightly-gpu-py3 bash</li>\n<li>TensorFlow version (use command below): nightly (v1.12.0-rc0-1214-g6802f29084' 1.13.0-dev20181020)</li>\n<li>Python version: py3</li>\n<li>Bazel version (if compiling from source): NA</li>\n<li>GCC/Compiler version (if compiling from source): NA</li>\n<li>CUDA/cuDNN version:</li>\n<li>GPU model and memory:</li>\n</ul>\n<p>You can collect some of this information using our environment capture <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\">script</a><br>\nYou can also obtain the TensorFlow version with<br>\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"</p>\n<p><strong>Describe the current behavior</strong><br>\nI am trying to convert a model.h5 keras model using tflite. Command used:<br>\n<code>tflite_convert --output_file=./model_tflite --keras_model_file=./model.h5 </code><br>\nError:<br>\n<code>root@7580fbf40640:/DNA_Compression/encoder_decoder# tflite_convert --output_file=./model_tflite --keras_model_file=./model.h5 Traceback (most recent call last): File \"/usr/local/bin/tflite_convert\", line 11, in &lt;module&gt; sys.exit(main()) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 412, in main app.run(main=run_main, argv=sys.argv[:1]) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/platform/app.py\", line 125, in run _sys.exit(main(argv)) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 408, in run_main _convert_model(tflite_flags) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 100, in _convert_model converter = _get_toco_converter(flags) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 87, in _get_toco_converter return converter_fn(**converter_kwargs) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 368, in from_keras_model_file keras_model = _keras.models.load_model(model_file) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/saving.py\", line 230, in load_model model = model_from_config(model_config, custom_objects=custom_objects) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/saving.py\", line 310, in model_from_config return deserialize(config, custom_objects=custom_objects) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize printable_module_name='layer') File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object list(custom_objects.items()))) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/sequential.py\", line 340, in from_config model.add(layer) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/training/checkpointable/base.py\", line 474, in _method_wrapper method(self, *args, **kwargs) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/sequential.py\", line 175, in add output_tensor = layer(self.outputs[0]) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/layers/recurrent.py\", line 706, in __call__ self._num_inputs) AttributeError: 'CuDNNLSTM' object has no attribute '_num_inputs' </code><br>\n<strong>Describe the expected behavior</strong><br>\nIdeally there should be no error, as it is a model which works fine in keras (TF backend)<br>\n<strong>Code to reproduce the issue</strong><br>\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.<br>\n`root@7580fbf40640:/DNA_Compression/encoder_decoder# tflite_convert --output_file=./model_tflite --keras_model_file=./model.h5'<br>\n(I can upload the model somewhere, if needed!)<br>\n<strong>Other info / logs</strong><br>\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.</p>", "body_text": "Please make sure that this is a bug. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04 (I think), I used the nightly docker:\ndocker run --runtime=nvidia -it tensorflow/tensorflow:nightly-gpu-py3 bash\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\nTensorFlow installed from (source or binary): docker:\ndocker run --runtime=nvidia -it tensorflow/tensorflow:nightly-gpu-py3 bash\nTensorFlow version (use command below): nightly (v1.12.0-rc0-1214-g6802f29084' 1.13.0-dev20181020)\nPython version: py3\nBazel version (if compiling from source): NA\nGCC/Compiler version (if compiling from source): NA\nCUDA/cuDNN version:\nGPU model and memory:\n\nYou can collect some of this information using our environment capture script\nYou can also obtain the TensorFlow version with\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nDescribe the current behavior\nI am trying to convert a model.h5 keras model using tflite. Command used:\ntflite_convert --output_file=./model_tflite --keras_model_file=./model.h5 \nError:\nroot@7580fbf40640:/DNA_Compression/encoder_decoder# tflite_convert --output_file=./model_tflite --keras_model_file=./model.h5 Traceback (most recent call last): File \"/usr/local/bin/tflite_convert\", line 11, in <module> sys.exit(main()) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 412, in main app.run(main=run_main, argv=sys.argv[:1]) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/platform/app.py\", line 125, in run _sys.exit(main(argv)) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 408, in run_main _convert_model(tflite_flags) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 100, in _convert_model converter = _get_toco_converter(flags) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 87, in _get_toco_converter return converter_fn(**converter_kwargs) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 368, in from_keras_model_file keras_model = _keras.models.load_model(model_file) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/saving.py\", line 230, in load_model model = model_from_config(model_config, custom_objects=custom_objects) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/saving.py\", line 310, in model_from_config return deserialize(config, custom_objects=custom_objects) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize printable_module_name='layer') File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object list(custom_objects.items()))) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/sequential.py\", line 340, in from_config model.add(layer) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/training/checkpointable/base.py\", line 474, in _method_wrapper method(self, *args, **kwargs) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/sequential.py\", line 175, in add output_tensor = layer(self.outputs[0]) File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/layers/recurrent.py\", line 706, in __call__ self._num_inputs) AttributeError: 'CuDNNLSTM' object has no attribute '_num_inputs' \nDescribe the expected behavior\nIdeally there should be no error, as it is a model which works fine in keras (TF backend)\nCode to reproduce the issue\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\n`root@7580fbf40640:/DNA_Compression/encoder_decoder# tflite_convert --output_file=./model_tflite --keras_model_file=./model.h5'\n(I can upload the model somewhere, if needed!)\nOther info / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04 (I think), I used the nightly docker: \r\ndocker run --runtime=nvidia -it tensorflow/tensorflow:nightly-gpu-py3 bash\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): docker:\r\ndocker run --runtime=nvidia -it tensorflow/tensorflow:nightly-gpu-py3 bash\r\n- TensorFlow version (use command below): nightly (v1.12.0-rc0-1214-g6802f29084' 1.13.0-dev20181020)\r\n- Python version: py3\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: \r\n- GPU model and memory: \r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI am trying to convert a model.h5 keras model using tflite. Command used: \r\n`tflite_convert --output_file=./model_tflite --keras_model_file=./model.h5\r\n`\r\nError: \r\n`root@7580fbf40640:/DNA_Compression/encoder_decoder# tflite_convert --output_file=./model_tflite --keras_model_file=./model.h5\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/tflite_convert\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 412, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 408, in run_main\r\n    _convert_model(tflite_flags)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 100, in _convert_model\r\n    converter = _get_toco_converter(flags)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 87, in _get_toco_converter\r\n    return converter_fn(**converter_kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 368, in from_keras_model_file\r\n    keras_model = _keras.models.load_model(model_file)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/saving.py\", line 230, in load_model\r\n    model = model_from_config(model_config, custom_objects=custom_objects)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/saving.py\", line 310, in model_from_config\r\n    return deserialize(config, custom_objects=custom_objects)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/layers/serialization.py\", line 64, in deserialize\r\n    printable_module_name='layer')\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/utils/generic_utils.py\", line 173, in deserialize_keras_object\r\n    list(custom_objects.items())))\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/sequential.py\", line 340, in from_config\r\n    model.add(layer)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/training/checkpointable/base.py\", line 474, in _method_wrapper\r\n    method(self, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/sequential.py\", line 175, in add\r\n    output_tensor = layer(self.outputs[0])\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/layers/recurrent.py\", line 706, in __call__\r\n    self._num_inputs)\r\nAttributeError: 'CuDNNLSTM' object has no attribute '_num_inputs'\r\n`\r\n**Describe the expected behavior**\r\nIdeally there should be no error, as it is a model which works fine in keras (TF backend)\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n`root@7580fbf40640:/DNA_Compression/encoder_decoder# tflite_convert --output_file=./model_tflite --keras_model_file=./model.h5'\r\n(I can upload the model somewhere, if needed!)\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}
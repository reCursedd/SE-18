{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2753", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2753/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2753/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2753/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2753", "id": 159376351, "node_id": "MDU6SXNzdWUxNTkzNzYzNTE=", "number": 2753, "title": "C++ compilation of rule '@highwayhash//:sip_hash' failed (Tensorflow serving on Android)", "user": {"login": "M1ch13l", "id": 5907979, "node_id": "MDQ6VXNlcjU5MDc5Nzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5907979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/M1ch13l", "html_url": "https://github.com/M1ch13l", "followers_url": "https://api.github.com/users/M1ch13l/followers", "following_url": "https://api.github.com/users/M1ch13l/following{/other_user}", "gists_url": "https://api.github.com/users/M1ch13l/gists{/gist_id}", "starred_url": "https://api.github.com/users/M1ch13l/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/M1ch13l/subscriptions", "organizations_url": "https://api.github.com/users/M1ch13l/orgs", "repos_url": "https://api.github.com/users/M1ch13l/repos", "events_url": "https://api.github.com/users/M1ch13l/events{/privacy}", "received_events_url": "https://api.github.com/users/M1ch13l/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-06-09T10:33:00Z", "updated_at": "2016-07-27T20:29:02Z", "closed_at": "2016-07-09T03:33:08Z", "author_association": "NONE", "body_html": "<p>Operating System: Ubuntu 16 64bit</p>\n<p>Installed:<br>\nAndroid NDK (r10e / r11c),<br>\nAndroid SDK (Latest),<br>\nTensorflow (Latest),<br>\nTensorflow serving (Latest),<br>\nBazel (0.2.1 / 0.2.3)</p>\n<p>I can build android projects (SDK and NDK) with bazel, build Tensorflow with bazel and build android jni projects with bazel.</p>\n<p>This is the Error I get when trying to build an android project which uses tensorflow serving: ($ bazel build //MouthDetection:android).</p>\n<p><code>ERROR: /home/michiel/.cache/bazel/_bazel_michiel/224c8e6cc63c3cf5a14b148ed24603d7/external/highwayhash/BUILD:17:1: C++ compilation of rule '@highwayhash//:sip_hash' failed: arm-linux-androideabi-gcc failed: error executing command external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables ... (remaining 38 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1. In file included from external/highwayhash/highwayhash/sip_hash.h:23:0, from external/highwayhash/highwayhash/sip_hash.cc:15: external/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::UpdateState(const char*, highwayhash::uint64, State*)': external/highwayhash/highwayhash/state_helpers.h:36:76: error: there are no arguments to 'static_assert' that depend on a template parameter, so a declaration of 'static_assert' must be available [-fpermissive] static_assert((kPacketSize &amp; (kPacketSize - 1)) == 0, \"Size must be 2^i.\"); ^ external/highwayhash/highwayhash/state_helpers.h:36:76: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated) In file included from external/highwayhash/highwayhash/sip_hash.cc:15:0: external/highwayhash/highwayhash/sip_hash.h: At global scope: external/highwayhash/highwayhash/sip_hash.h:31:9: error: expected nested-name-specifier before 'Key' using Key = uint64[2]; ^ external/highwayhash/highwayhash/sip_hash.h:34:38: error: 'Key' does not name a type explicit INLINE SipHashState(const Key&amp; key) { ^ external/highwayhash/highwayhash/sip_hash.h: In constructor 'highwayhash::SipHashState::SipHashState(const int&amp;)': external/highwayhash/highwayhash/sip_hash.h:35:39: error: invalid types 'const int[int]' for array subscript v0 = 0x736f6d6570736575ull ^ key[0]; ^ external/highwayhash/highwayhash/sip_hash.h:36:39: error: invalid types 'const int[int]' for array subscript v1 = 0x646f72616e646f6dull ^ key[1]; ^ external/highwayhash/highwayhash/sip_hash.h:37:39: error: invalid types 'const int[int]' for array subscript v2 = 0x6c7967656e657261ull ^ key[0]; ^ external/highwayhash/highwayhash/sip_hash.h:38:39: error: invalid types 'const int[int]' for array subscript v3 = 0x7465646279746573ull ^ key[1]; ^ external/highwayhash/highwayhash/sip_hash.h: At global scope: external/highwayhash/highwayhash/sip_hash.h:114:50: error: 'Key' in 'class highwayhash::SipHashState' does not name a type static INLINE uint64 SipHash(const SipHashState::Key&amp; key, const char* bytes, ^ external/highwayhash/highwayhash/sip_hash.h: In function 'highwayhash::uint64 highwayhash::SipHash(const int&amp;, const char*, highwayhash::uint64)': external/highwayhash/highwayhash/sip_hash.h:116:52: error: no matching function for call to 'ComputeHash(const int&amp;, const char*&amp;, const uint64&amp;)' return ComputeHash&lt;SipHashState&gt;(key, bytes, size); ^ external/highwayhash/highwayhash/sip_hash.h:116:52: note: candidate is: In file included from external/highwayhash/highwayhash/sip_hash.h:23:0, from external/highwayhash/highwayhash/sip_hash.cc:15: external/highwayhash/highwayhash/state_helpers.h:63:8: note: template&lt;class State&gt; highwayhash::uint64 highwayhash::ComputeHash(const typename State::Key&amp;, const char*, highwayhash::uint64) uint64 ComputeHash(const typename State::Key&amp; key, const char* bytes, ^ external/highwayhash/highwayhash/state_helpers.h:63:8: note:   template argument deduction/substitution failed: external/highwayhash/highwayhash/state_helpers.h: In substitution of 'template&lt;class State&gt; highwayhash::uint64 highwayhash::ComputeHash(const typename State::Key&amp;, const char*, highwayhash::uint64) [with State = highwayhash::SipHashState]': external/highwayhash/highwayhash/sip_hash.h:116:52:   required from here external/highwayhash/highwayhash/state_helpers.h:63:8: error: no type named 'Key' in 'class highwayhash::SipHashState' In file included from external/highwayhash/highwayhash/sip_hash.cc:15:0: external/highwayhash/highwayhash/sip_hash.h: At global scope: external/highwayhash/highwayhash/sip_hash.h:120:60: error: 'Key' in 'class highwayhash::SipHashState' does not name a type static INLINE uint64 ReduceSipTreeHash(const SipHashState::Key&amp; key, ^ Target //MouthDetection:android failed to build Use --verbose_failures to see the command lines of failed build steps. INFO: Elapsed time: 32.618s, Critical Path: 18.78s </code></p>\n<p>Does anyone know a solution to this problem</p>", "body_text": "Operating System: Ubuntu 16 64bit\nInstalled:\nAndroid NDK (r10e / r11c),\nAndroid SDK (Latest),\nTensorflow (Latest),\nTensorflow serving (Latest),\nBazel (0.2.1 / 0.2.3)\nI can build android projects (SDK and NDK) with bazel, build Tensorflow with bazel and build android jni projects with bazel.\nThis is the Error I get when trying to build an android project which uses tensorflow serving: ($ bazel build //MouthDetection:android).\nERROR: /home/michiel/.cache/bazel/_bazel_michiel/224c8e6cc63c3cf5a14b148ed24603d7/external/highwayhash/BUILD:17:1: C++ compilation of rule '@highwayhash//:sip_hash' failed: arm-linux-androideabi-gcc failed: error executing command external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables ... (remaining 38 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1. In file included from external/highwayhash/highwayhash/sip_hash.h:23:0, from external/highwayhash/highwayhash/sip_hash.cc:15: external/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::UpdateState(const char*, highwayhash::uint64, State*)': external/highwayhash/highwayhash/state_helpers.h:36:76: error: there are no arguments to 'static_assert' that depend on a template parameter, so a declaration of 'static_assert' must be available [-fpermissive] static_assert((kPacketSize & (kPacketSize - 1)) == 0, \"Size must be 2^i.\"); ^ external/highwayhash/highwayhash/state_helpers.h:36:76: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated) In file included from external/highwayhash/highwayhash/sip_hash.cc:15:0: external/highwayhash/highwayhash/sip_hash.h: At global scope: external/highwayhash/highwayhash/sip_hash.h:31:9: error: expected nested-name-specifier before 'Key' using Key = uint64[2]; ^ external/highwayhash/highwayhash/sip_hash.h:34:38: error: 'Key' does not name a type explicit INLINE SipHashState(const Key& key) { ^ external/highwayhash/highwayhash/sip_hash.h: In constructor 'highwayhash::SipHashState::SipHashState(const int&)': external/highwayhash/highwayhash/sip_hash.h:35:39: error: invalid types 'const int[int]' for array subscript v0 = 0x736f6d6570736575ull ^ key[0]; ^ external/highwayhash/highwayhash/sip_hash.h:36:39: error: invalid types 'const int[int]' for array subscript v1 = 0x646f72616e646f6dull ^ key[1]; ^ external/highwayhash/highwayhash/sip_hash.h:37:39: error: invalid types 'const int[int]' for array subscript v2 = 0x6c7967656e657261ull ^ key[0]; ^ external/highwayhash/highwayhash/sip_hash.h:38:39: error: invalid types 'const int[int]' for array subscript v3 = 0x7465646279746573ull ^ key[1]; ^ external/highwayhash/highwayhash/sip_hash.h: At global scope: external/highwayhash/highwayhash/sip_hash.h:114:50: error: 'Key' in 'class highwayhash::SipHashState' does not name a type static INLINE uint64 SipHash(const SipHashState::Key& key, const char* bytes, ^ external/highwayhash/highwayhash/sip_hash.h: In function 'highwayhash::uint64 highwayhash::SipHash(const int&, const char*, highwayhash::uint64)': external/highwayhash/highwayhash/sip_hash.h:116:52: error: no matching function for call to 'ComputeHash(const int&, const char*&, const uint64&)' return ComputeHash<SipHashState>(key, bytes, size); ^ external/highwayhash/highwayhash/sip_hash.h:116:52: note: candidate is: In file included from external/highwayhash/highwayhash/sip_hash.h:23:0, from external/highwayhash/highwayhash/sip_hash.cc:15: external/highwayhash/highwayhash/state_helpers.h:63:8: note: template<class State> highwayhash::uint64 highwayhash::ComputeHash(const typename State::Key&, const char*, highwayhash::uint64) uint64 ComputeHash(const typename State::Key& key, const char* bytes, ^ external/highwayhash/highwayhash/state_helpers.h:63:8: note:   template argument deduction/substitution failed: external/highwayhash/highwayhash/state_helpers.h: In substitution of 'template<class State> highwayhash::uint64 highwayhash::ComputeHash(const typename State::Key&, const char*, highwayhash::uint64) [with State = highwayhash::SipHashState]': external/highwayhash/highwayhash/sip_hash.h:116:52:   required from here external/highwayhash/highwayhash/state_helpers.h:63:8: error: no type named 'Key' in 'class highwayhash::SipHashState' In file included from external/highwayhash/highwayhash/sip_hash.cc:15:0: external/highwayhash/highwayhash/sip_hash.h: At global scope: external/highwayhash/highwayhash/sip_hash.h:120:60: error: 'Key' in 'class highwayhash::SipHashState' does not name a type static INLINE uint64 ReduceSipTreeHash(const SipHashState::Key& key, ^ Target //MouthDetection:android failed to build Use --verbose_failures to see the command lines of failed build steps. INFO: Elapsed time: 32.618s, Critical Path: 18.78s \nDoes anyone know a solution to this problem", "body": "Operating System: Ubuntu 16 64bit\n\nInstalled:\nAndroid NDK (r10e / r11c), \nAndroid SDK (Latest), \nTensorflow (Latest), \nTensorflow serving (Latest), \nBazel (0.2.1 / 0.2.3)\n\nI can build android projects (SDK and NDK) with bazel, build Tensorflow with bazel and build android jni projects with bazel. \n\nThis is the Error I get when trying to build an android project which uses tensorflow serving: ($ bazel build //MouthDetection:android).\n\n`ERROR: /home/michiel/.cache/bazel/_bazel_michiel/224c8e6cc63c3cf5a14b148ed24603d7/external/highwayhash/BUILD:17:1: C++ compilation of rule '@highwayhash//:sip_hash' failed: arm-linux-androideabi-gcc failed: error executing command external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables ... (remaining 38 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from external/highwayhash/highwayhash/sip_hash.h:23:0,\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\nexternal/highwayhash/highwayhash/state_helpers.h: In function 'void highwayhash::UpdateState(const char*, highwayhash::uint64, State*)':\nexternal/highwayhash/highwayhash/state_helpers.h:36:76: error: there are no arguments to 'static_assert' that depend on a template parameter, so a declaration of 'static_assert' must be available [-fpermissive]\n   static_assert((kPacketSize & (kPacketSize - 1)) == 0, \"Size must be 2^i.\");\n                                                                            ^\nexternal/highwayhash/highwayhash/state_helpers.h:36:76: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\nIn file included from external/highwayhash/highwayhash/sip_hash.cc:15:0:\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:31:9: error: expected nested-name-specifier before 'Key'\n   using Key = uint64[2];\n         ^\nexternal/highwayhash/highwayhash/sip_hash.h:34:38: error: 'Key' does not name a type\n   explicit INLINE SipHashState(const Key& key) {\n                                      ^\nexternal/highwayhash/highwayhash/sip_hash.h: In constructor 'highwayhash::SipHashState::SipHashState(const int&)':\nexternal/highwayhash/highwayhash/sip_hash.h:35:39: error: invalid types 'const int[int]' for array subscript\n     v0 = 0x736f6d6570736575ull ^ key[0];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:36:39: error: invalid types 'const int[int]' for array subscript\n     v1 = 0x646f72616e646f6dull ^ key[1];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:37:39: error: invalid types 'const int[int]' for array subscript\n     v2 = 0x6c7967656e657261ull ^ key[0];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h:38:39: error: invalid types 'const int[int]' for array subscript\n     v3 = 0x7465646279746573ull ^ key[1];\n                                       ^\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:114:50: error: 'Key' in 'class highwayhash::SipHashState' does not name a type\n static INLINE uint64 SipHash(const SipHashState::Key& key, const char* bytes,\n                                                  ^\nexternal/highwayhash/highwayhash/sip_hash.h: In function 'highwayhash::uint64 highwayhash::SipHash(const int&, const char*, highwayhash::uint64)':\nexternal/highwayhash/highwayhash/sip_hash.h:116:52: error: no matching function for call to 'ComputeHash(const int&, const char*&, const uint64&)'\n   return ComputeHash<SipHashState>(key, bytes, size);\n                                                    ^\nexternal/highwayhash/highwayhash/sip_hash.h:116:52: note: candidate is:\nIn file included from external/highwayhash/highwayhash/sip_hash.h:23:0,\n                 from external/highwayhash/highwayhash/sip_hash.cc:15:\nexternal/highwayhash/highwayhash/state_helpers.h:63:8: note: template<class State> highwayhash::uint64 highwayhash::ComputeHash(const typename State::Key&, const char*, highwayhash::uint64)\n uint64 ComputeHash(const typename State::Key& key, const char* bytes,\n        ^\nexternal/highwayhash/highwayhash/state_helpers.h:63:8: note:   template argument deduction/substitution failed:\nexternal/highwayhash/highwayhash/state_helpers.h: In substitution of 'template<class State> highwayhash::uint64 highwayhash::ComputeHash(const typename State::Key&, const char*, highwayhash::uint64) [with State = highwayhash::SipHashState]':\nexternal/highwayhash/highwayhash/sip_hash.h:116:52:   required from here\nexternal/highwayhash/highwayhash/state_helpers.h:63:8: error: no type named 'Key' in 'class highwayhash::SipHashState'\nIn file included from external/highwayhash/highwayhash/sip_hash.cc:15:0:\nexternal/highwayhash/highwayhash/sip_hash.h: At global scope:\nexternal/highwayhash/highwayhash/sip_hash.h:120:60: error: 'Key' in 'class highwayhash::SipHashState' does not name a type\n static INLINE uint64 ReduceSipTreeHash(const SipHashState::Key& key,\n                                                            ^\nTarget //MouthDetection:android failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 32.618s, Critical Path: 18.78s\n`\n\nDoes anyone know a solution to this problem\n"}
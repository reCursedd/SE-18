{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/385149186", "html_url": "https://github.com/tensorflow/tensorflow/issues/18931#issuecomment-385149186", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18931", "id": 385149186, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTE0OTE4Ng==", "user": {"login": "Skydes", "id": 15985472, "node_id": "MDQ6VXNlcjE1OTg1NDcy", "avatar_url": "https://avatars0.githubusercontent.com/u/15985472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Skydes", "html_url": "https://github.com/Skydes", "followers_url": "https://api.github.com/users/Skydes/followers", "following_url": "https://api.github.com/users/Skydes/following{/other_user}", "gists_url": "https://api.github.com/users/Skydes/gists{/gist_id}", "starred_url": "https://api.github.com/users/Skydes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Skydes/subscriptions", "organizations_url": "https://api.github.com/users/Skydes/orgs", "repos_url": "https://api.github.com/users/Skydes/repos", "events_url": "https://api.github.com/users/Skydes/events{/privacy}", "received_events_url": "https://api.github.com/users/Skydes/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-28T07:33:44Z", "updated_at": "2018-04-28T07:33:44Z", "author_association": "NONE", "body_html": "<p>This seems to fix the issue with the Python binding:</p>\n<div class=\"highlight highlight-source-diff\"><pre><span class=\"pl-c1\">diff --git a/tensorflow/contrib/cmake/tf_core_framework.cmake b/tensorflow/contrib/cmake/tf_core_framework.cmake</span>\nindex b47c32f..94dda24 100644\n<span class=\"pl-md\">--- a/tensorflow/contrib/cmake/tf_core_framework.cmake</span>\n<span class=\"pl-mi1\">+++ b/tensorflow/contrib/cmake/tf_core_framework.cmake</span>\n<span class=\"pl-mdr\">@@ -127,6 +127,7 @@</span> file(GLOB_RECURSE tf_protos_cc_srcs RELATIVE ${tensorflow_source_dir}\n     \"${tensorflow_source_dir}/tensorflow/core/*.proto\"\n     \"${tensorflow_source_dir}/tensorflow/contrib/boosted_trees/proto/*.proto\"\n     \"${tensorflow_source_dir}/tensorflow/contrib/tpu/proto/*.proto\"\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    \"${tensorflow_source_dir}/tensorflow/python/framework/*.proto\"</span>\n )\n \n RELATIVE_PROTOBUF_GENERATE_CPP(PROTO_SRCS PROTO_HDRS</pre></div>\n<p>Regarding the GRPC dependency, this helps:</p>\n<div class=\"highlight highlight-source-diff\"><pre><span class=\"pl-c1\">diff --git a/tensorflow/contrib/cmake/tf_core_framework.cmake b/tensorflow/contrib/cmake/tf_core_framework.cmake</span>\nindex b47c32f..34ed324 100644\n<span class=\"pl-md\">--- a/tensorflow/contrib/cmake/tf_core_framework.cmake</span>\n<span class=\"pl-mi1\">+++ b/tensorflow/contrib/cmake/tf_core_framework.cmake</span>\n<span class=\"pl-mdr\">@@ -177,13 +177,16 @@</span> RELATIVE_PROTOBUF_TEXT_GENERATE_CPP(PROTO_TEXT_SRCS PROTO_TEXT_HDRS\n if(WIN32)\n   add_library(tf_protos_cc ${PROTO_SRCS} ${PROTO_HDRS})\n else()\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>  file(GLOB_RECURSE tf_protos_grpc_cc_srcs RELATIVE ${tensorflow_source_dir}</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>      \"${tensorflow_source_dir}/tensorflow/core/debug/*.proto\"</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>  )</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>  RELATIVE_PROTOBUF_GENERATE_GRPC_CPP(PROTO_GRPC_SRCS PROTO_GRPC_HDRS</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>      ${tensorflow_source_dir} ${tf_protos_grpc_cc_srcs}</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>  )</span>\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>  add_library(tf_protos_cc ${PROTO_GRPC_SRCS} ${PROTO_GRPC_HDRS} ${PROTO_SRCS} ${PROTO_HDRS})</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  if(tensorflow_ENABLE_GRPC_SUPPORT)</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    file(GLOB_RECURSE tf_protos_grpc_cc_srcs RELATIVE ${tensorflow_source_dir}</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        \"${tensorflow_source_dir}/tensorflow/core/debug/*.proto\"</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    )</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    RELATIVE_PROTOBUF_GENERATE_GRPC_CPP(PROTO_GRPC_SRCS PROTO_GRPC_HDRS</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        ${tensorflow_source_dir} ${tf_protos_grpc_cc_srcs}</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    )</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    add_library(tf_protos_cc ${PROTO_GRPC_SRCS} ${PROTO_GRPC_HDRS})</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  endif(tensorflow_ENABLE_GRPC_SUPPORT)</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  add_library(tf_protos_cc ${PROTO_SRCS} ${PROTO_HDRS})</span>\n endif()</pre></div>\n<p>However some issues remain with <a href=\"../blob/master/tensorflow/core/debug/debug_io_utils.h\"><code>debug_io_utils.h</code></a> and <a href=\"../blob/master/tensorflow/core/debug/debug_io_utils.cc\"><code>debug_io_utils.cc</code></a>, which require GRPC and are included by  <a href=\"../blob/master/tensorflow/core/kernels/debug_ops.h\"><code>debug_ops.h</code></a>.</p>", "body_text": "This seems to fix the issue with the Python binding:\ndiff --git a/tensorflow/contrib/cmake/tf_core_framework.cmake b/tensorflow/contrib/cmake/tf_core_framework.cmake\nindex b47c32f..94dda24 100644\n--- a/tensorflow/contrib/cmake/tf_core_framework.cmake\n+++ b/tensorflow/contrib/cmake/tf_core_framework.cmake\n@@ -127,6 +127,7 @@ file(GLOB_RECURSE tf_protos_cc_srcs RELATIVE ${tensorflow_source_dir}\n     \"${tensorflow_source_dir}/tensorflow/core/*.proto\"\n     \"${tensorflow_source_dir}/tensorflow/contrib/boosted_trees/proto/*.proto\"\n     \"${tensorflow_source_dir}/tensorflow/contrib/tpu/proto/*.proto\"\n+    \"${tensorflow_source_dir}/tensorflow/python/framework/*.proto\"\n )\n \n RELATIVE_PROTOBUF_GENERATE_CPP(PROTO_SRCS PROTO_HDRS\nRegarding the GRPC dependency, this helps:\ndiff --git a/tensorflow/contrib/cmake/tf_core_framework.cmake b/tensorflow/contrib/cmake/tf_core_framework.cmake\nindex b47c32f..34ed324 100644\n--- a/tensorflow/contrib/cmake/tf_core_framework.cmake\n+++ b/tensorflow/contrib/cmake/tf_core_framework.cmake\n@@ -177,13 +177,16 @@ RELATIVE_PROTOBUF_TEXT_GENERATE_CPP(PROTO_TEXT_SRCS PROTO_TEXT_HDRS\n if(WIN32)\n   add_library(tf_protos_cc ${PROTO_SRCS} ${PROTO_HDRS})\n else()\n-  file(GLOB_RECURSE tf_protos_grpc_cc_srcs RELATIVE ${tensorflow_source_dir}\n-      \"${tensorflow_source_dir}/tensorflow/core/debug/*.proto\"\n-  )\n-  RELATIVE_PROTOBUF_GENERATE_GRPC_CPP(PROTO_GRPC_SRCS PROTO_GRPC_HDRS\n-      ${tensorflow_source_dir} ${tf_protos_grpc_cc_srcs}\n-  )\n-  add_library(tf_protos_cc ${PROTO_GRPC_SRCS} ${PROTO_GRPC_HDRS} ${PROTO_SRCS} ${PROTO_HDRS})\n+  if(tensorflow_ENABLE_GRPC_SUPPORT)\n+    file(GLOB_RECURSE tf_protos_grpc_cc_srcs RELATIVE ${tensorflow_source_dir}\n+        \"${tensorflow_source_dir}/tensorflow/core/debug/*.proto\"\n+    )\n+    RELATIVE_PROTOBUF_GENERATE_GRPC_CPP(PROTO_GRPC_SRCS PROTO_GRPC_HDRS\n+        ${tensorflow_source_dir} ${tf_protos_grpc_cc_srcs}\n+    )\n+    add_library(tf_protos_cc ${PROTO_GRPC_SRCS} ${PROTO_GRPC_HDRS})\n+  endif(tensorflow_ENABLE_GRPC_SUPPORT)\n+  add_library(tf_protos_cc ${PROTO_SRCS} ${PROTO_HDRS})\n endif()\nHowever some issues remain with debug_io_utils.h and debug_io_utils.cc, which require GRPC and are included by  debug_ops.h.", "body": "This seems to fix the issue with the Python binding:\r\n```diff\r\ndiff --git a/tensorflow/contrib/cmake/tf_core_framework.cmake b/tensorflow/contrib/cmake/tf_core_framework.cmake\r\nindex b47c32f..94dda24 100644\r\n--- a/tensorflow/contrib/cmake/tf_core_framework.cmake\r\n+++ b/tensorflow/contrib/cmake/tf_core_framework.cmake\r\n@@ -127,6 +127,7 @@ file(GLOB_RECURSE tf_protos_cc_srcs RELATIVE ${tensorflow_source_dir}\r\n     \"${tensorflow_source_dir}/tensorflow/core/*.proto\"\r\n     \"${tensorflow_source_dir}/tensorflow/contrib/boosted_trees/proto/*.proto\"\r\n     \"${tensorflow_source_dir}/tensorflow/contrib/tpu/proto/*.proto\"\r\n+    \"${tensorflow_source_dir}/tensorflow/python/framework/*.proto\"\r\n )\r\n \r\n RELATIVE_PROTOBUF_GENERATE_CPP(PROTO_SRCS PROTO_HDRS\r\n```\r\n\r\nRegarding the GRPC dependency, this helps:\r\n```diff\r\ndiff --git a/tensorflow/contrib/cmake/tf_core_framework.cmake b/tensorflow/contrib/cmake/tf_core_framework.cmake\r\nindex b47c32f..34ed324 100644\r\n--- a/tensorflow/contrib/cmake/tf_core_framework.cmake\r\n+++ b/tensorflow/contrib/cmake/tf_core_framework.cmake\r\n@@ -177,13 +177,16 @@ RELATIVE_PROTOBUF_TEXT_GENERATE_CPP(PROTO_TEXT_SRCS PROTO_TEXT_HDRS\r\n if(WIN32)\r\n   add_library(tf_protos_cc ${PROTO_SRCS} ${PROTO_HDRS})\r\n else()\r\n-  file(GLOB_RECURSE tf_protos_grpc_cc_srcs RELATIVE ${tensorflow_source_dir}\r\n-      \"${tensorflow_source_dir}/tensorflow/core/debug/*.proto\"\r\n-  )\r\n-  RELATIVE_PROTOBUF_GENERATE_GRPC_CPP(PROTO_GRPC_SRCS PROTO_GRPC_HDRS\r\n-      ${tensorflow_source_dir} ${tf_protos_grpc_cc_srcs}\r\n-  )\r\n-  add_library(tf_protos_cc ${PROTO_GRPC_SRCS} ${PROTO_GRPC_HDRS} ${PROTO_SRCS} ${PROTO_HDRS})\r\n+  if(tensorflow_ENABLE_GRPC_SUPPORT)\r\n+    file(GLOB_RECURSE tf_protos_grpc_cc_srcs RELATIVE ${tensorflow_source_dir}\r\n+        \"${tensorflow_source_dir}/tensorflow/core/debug/*.proto\"\r\n+    )\r\n+    RELATIVE_PROTOBUF_GENERATE_GRPC_CPP(PROTO_GRPC_SRCS PROTO_GRPC_HDRS\r\n+        ${tensorflow_source_dir} ${tf_protos_grpc_cc_srcs}\r\n+    )\r\n+    add_library(tf_protos_cc ${PROTO_GRPC_SRCS} ${PROTO_GRPC_HDRS})\r\n+  endif(tensorflow_ENABLE_GRPC_SUPPORT)\r\n+  add_library(tf_protos_cc ${PROTO_SRCS} ${PROTO_HDRS})\r\n endif()\r\n```\r\n\r\nHowever some issues remain with [`debug_io_utils.h`](../blob/master/tensorflow/core/debug/debug_io_utils.h) and [`debug_io_utils.cc`](../blob/master/tensorflow/core/debug/debug_io_utils.cc), which require GRPC and are included by  [`debug_ops.h`](../blob/master/tensorflow/core/kernels/debug_ops.h)."}
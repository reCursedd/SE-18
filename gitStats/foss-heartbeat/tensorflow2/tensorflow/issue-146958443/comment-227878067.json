{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/227878067", "html_url": "https://github.com/tensorflow/tensorflow/issues/1824#issuecomment-227878067", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1824", "id": 227878067, "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzg3ODA2Nw==", "user": {"login": "ericox", "id": 1696588, "node_id": "MDQ6VXNlcjE2OTY1ODg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1696588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericox", "html_url": "https://github.com/ericox", "followers_url": "https://api.github.com/users/ericox/followers", "following_url": "https://api.github.com/users/ericox/following{/other_user}", "gists_url": "https://api.github.com/users/ericox/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericox/subscriptions", "organizations_url": "https://api.github.com/users/ericox/orgs", "repos_url": "https://api.github.com/users/ericox/repos", "events_url": "https://api.github.com/users/ericox/events{/privacy}", "received_events_url": "https://api.github.com/users/ericox/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-22T21:11:06Z", "updated_at": "2016-06-22T21:11:06Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11547801\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/prb12\">@prb12</a> I am wondering if it would it be more useful to use a worker-specific device prefix such as <code>/job:worker/task:7</code> from the code snippet from the distributed tensorflow tutorial?</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:worker/task:7<span class=\"pl-pds\">\"</span></span>):\n  <span class=\"pl-c1\">input</span>, labels <span class=\"pl-k\">=</span> <span class=\"pl-c1\">...</span>\n  layer_1 <span class=\"pl-k\">=</span> tf.nn.relu(tf.matmul(<span class=\"pl-c1\">input</span>, weights_1) <span class=\"pl-k\">+</span> biases_1)\n  logits <span class=\"pl-k\">=</span> tf.nn.relu(tf.matmul(layer_1, weights_2) <span class=\"pl-k\">+</span> biases_2)\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> ...</span>\n  train_op <span class=\"pl-k\">=</span> <span class=\"pl-c1\">...</span></pre></div>\n<p>Or to include the worker hostname in the prefix as well, say the worker_hosts string(s) here.</p>\n<pre><code># On ps0.example.com:\n$ python trainer.py \\\n     --ps_hosts=ps0.example.com:2222,ps1.example.com:2222 \\\n     --worker_hosts=worker0.example.com:2222,worker1.example.com:2222 \\\n     --job_name=ps --task_index=0\n</code></pre>", "body_text": "@prb12 I am wondering if it would it be more useful to use a worker-specific device prefix such as /job:worker/task:7 from the code snippet from the distributed tensorflow tutorial?\nwith tf.device(\"/job:worker/task:7\"):\n  input, labels = ...\n  layer_1 = tf.nn.relu(tf.matmul(input, weights_1) + biases_1)\n  logits = tf.nn.relu(tf.matmul(layer_1, weights_2) + biases_2)\n  # ...\n  train_op = ...\nOr to include the worker hostname in the prefix as well, say the worker_hosts string(s) here.\n# On ps0.example.com:\n$ python trainer.py \\\n     --ps_hosts=ps0.example.com:2222,ps1.example.com:2222 \\\n     --worker_hosts=worker0.example.com:2222,worker1.example.com:2222 \\\n     --job_name=ps --task_index=0", "body": "@prb12 I am wondering if it would it be more useful to use a worker-specific device prefix such as `/job:worker/task:7` from the code snippet from the distributed tensorflow tutorial?\n\n``` python\nwith tf.device(\"/job:worker/task:7\"):\n  input, labels = ...\n  layer_1 = tf.nn.relu(tf.matmul(input, weights_1) + biases_1)\n  logits = tf.nn.relu(tf.matmul(layer_1, weights_2) + biases_2)\n  # ...\n  train_op = ...\n```\n\nOr to include the worker hostname in the prefix as well, say the worker_hosts string(s) here. \n\n```\n# On ps0.example.com:\n$ python trainer.py \\\n     --ps_hosts=ps0.example.com:2222,ps1.example.com:2222 \\\n     --worker_hosts=worker0.example.com:2222,worker1.example.com:2222 \\\n     --job_name=ps --task_index=0\n```\n"}
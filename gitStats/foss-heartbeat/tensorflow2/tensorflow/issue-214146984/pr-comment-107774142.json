{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/107774142", "pull_request_review_id": 28767115, "id": 107774142, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNzc3NDE0Mg==", "diff_hunk": "@@ -105,55 +116,90 @@ public void createFromBufferWithNonNativeByteOrder() {\n   }\n \n   @Test\n-  public void createWithTypedBuffer() {\n-    int[] ints = {1, 2, 3, 4};\n-    float[] floats = {1f, 2f, 3f, 4f};\n-    double[] doubles = {1d, 2d, 3d, 4d};\n-    long[] longs = {1L, 2L, 3L, 4L};\n-    long[] shape = {4};\n+  public void whenCreateUsingDoubleBufferThenExpectedMatrixIsStoredInTensor() {\n+    final double[] expected = {1d, 2d, 3d, 4d};\n+    final long[] shape = {4};\n+\n+    try (final Tensor t = Tensor.create(shape, DoubleBuffer.wrap(expected))) {\n+      final double[] actual = new double[expected.length];\n+      t.copyTo(actual);\n+      assertArrayEquals(expected, actual, EPSILON);", "path": "tensorflow/java/src/test/java/org/tensorflow/TensorTest.java", "position": 57, "original_position": 57, "commit_id": "0404ac06d5d0d07e08b97e987106b9096c6cb045", "original_commit_id": "0404ac06d5d0d07e08b97e987106b9096c6cb045", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "body": "Could this and the others be shortened to:\r\n\r\n```java\r\ntry (final Tensor t = Tensor.create(shape, DoubleBuffer.wrap(expected)) {\r\n  assertArrayEquals(expected, t.copyTo(new double[expected.length]), EPSILON);\r\n}\r\n```", "created_at": "2017-03-23T20:23:34Z", "updated_at": "2017-03-24T05:58:54Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/8400#discussion_r107774142", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/8400", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/107774142"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/8400#discussion_r107774142"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/8400"}}, "body_html": "<p>Could this and the others be shortened to:</p>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-k\">try</span> (<span class=\"pl-k\">final</span> <span class=\"pl-smi\">Tensor</span> t <span class=\"pl-k\">=</span> <span class=\"pl-smi\">Tensor</span><span class=\"pl-k\">.</span>create(shape, <span class=\"pl-smi\">DoubleBuffer</span><span class=\"pl-k\">.</span>wrap(expected)) {\n  assertArrayEquals(expected, t<span class=\"pl-k\">.</span>copyTo(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">double</span>[expected<span class=\"pl-k\">.</span>length]), <span class=\"pl-c1\">EPSILON</span>);\n}</pre></div>", "body_text": "Could this and the others be shortened to:\ntry (final Tensor t = Tensor.create(shape, DoubleBuffer.wrap(expected)) {\n  assertArrayEquals(expected, t.copyTo(new double[expected.length]), EPSILON);\n}"}
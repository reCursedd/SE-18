{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/299276209", "html_url": "https://github.com/tensorflow/tensorflow/pull/9667#issuecomment-299276209", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9667", "id": 299276209, "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTI3NjIwOQ==", "user": {"login": "shamoya", "id": 22274255, "node_id": "MDQ6VXNlcjIyMjc0MjU1", "avatar_url": "https://avatars2.githubusercontent.com/u/22274255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shamoya", "html_url": "https://github.com/shamoya", "followers_url": "https://api.github.com/users/shamoya/followers", "following_url": "https://api.github.com/users/shamoya/following{/other_user}", "gists_url": "https://api.github.com/users/shamoya/gists{/gist_id}", "starred_url": "https://api.github.com/users/shamoya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shamoya/subscriptions", "organizations_url": "https://api.github.com/users/shamoya/orgs", "repos_url": "https://api.github.com/users/shamoya/repos", "events_url": "https://api.github.com/users/shamoya/events{/privacy}", "received_events_url": "https://api.github.com/users/shamoya/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-04T18:51:45Z", "updated_at": "2017-05-04T18:51:45Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15676913\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/poxvoculi\">@poxvoculi</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=170179\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jhseu\">@jhseu</a>,<br>\nYou are right of course and it's better to query the port (ibv_qeury_port) attributes for the MTU.<br>\nThe attention was to create a (very) temporary fix just to get things working in Roce for the time being, as<br>\nI am working on a patch that adds rdmacm connection management support to the verbs code.</p>\n<p>This is the best to go, and removes all the manual connection configurations the code is doing today.<br>\nIt will also save the need to get all configurations from the user in Server creation (device, port, gid index, roce version, mtu, etc..) since all the connection configuration will be set automatically accordingly to the grpc network provided by the cluster spec (user controls the verbs network according the GRPC network interfaces). It means they are binded (grpc and verbs on the same hw interface ) but this is the way to go according the grpc+verbs protocol <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=12075848\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/junshi15\">@junshi15</a> created.<br>\nWhat do you think ?</p>\n<p>Anyway, I will change for selecting the MTU from the port query.</p>", "body_text": "Thanks @poxvoculi @jhseu,\nYou are right of course and it's better to query the port (ibv_qeury_port) attributes for the MTU.\nThe attention was to create a (very) temporary fix just to get things working in Roce for the time being, as\nI am working on a patch that adds rdmacm connection management support to the verbs code.\nThis is the best to go, and removes all the manual connection configurations the code is doing today.\nIt will also save the need to get all configurations from the user in Server creation (device, port, gid index, roce version, mtu, etc..) since all the connection configuration will be set automatically accordingly to the grpc network provided by the cluster spec (user controls the verbs network according the GRPC network interfaces). It means they are binded (grpc and verbs on the same hw interface ) but this is the way to go according the grpc+verbs protocol @junshi15 created.\nWhat do you think ?\nAnyway, I will change for selecting the MTU from the port query.", "body": "Thanks @poxvoculi @jhseu,\r\nYou are right of course and it's better to query the port (ibv_qeury_port) attributes for the MTU.\r\nThe attention was to create a (very) temporary fix just to get things working in Roce for the time being, as \r\nI am working on a patch that adds rdmacm connection management support to the verbs code.\r\n\r\nThis is the best to go, and removes all the manual connection configurations the code is doing today.\r\nIt will also save the need to get all configurations from the user in Server creation (device, port, gid index, roce version, mtu, etc..) since all the connection configuration will be set automatically accordingly to the grpc network provided by the cluster spec (user controls the verbs network according the GRPC network interfaces). It means they are binded (grpc and verbs on the same hw interface ) but this is the way to go according the grpc+verbs protocol @junshi15 created.\r\nWhat do you think ?\r\n\r\nAnyway, I will change for selecting the MTU from the port query."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/381475543", "html_url": "https://github.com/tensorflow/tensorflow/issues/1769#issuecomment-381475543", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1769", "id": 381475543, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTQ3NTU0Mw==", "user": {"login": "chingjunehao", "id": 20645021, "node_id": "MDQ6VXNlcjIwNjQ1MDIx", "avatar_url": "https://avatars3.githubusercontent.com/u/20645021?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chingjunehao", "html_url": "https://github.com/chingjunehao", "followers_url": "https://api.github.com/users/chingjunehao/followers", "following_url": "https://api.github.com/users/chingjunehao/following{/other_user}", "gists_url": "https://api.github.com/users/chingjunehao/gists{/gist_id}", "starred_url": "https://api.github.com/users/chingjunehao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chingjunehao/subscriptions", "organizations_url": "https://api.github.com/users/chingjunehao/orgs", "repos_url": "https://api.github.com/users/chingjunehao/repos", "events_url": "https://api.github.com/users/chingjunehao/events{/privacy}", "received_events_url": "https://api.github.com/users/chingjunehao/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-16T04:16:17Z", "updated_at": "2018-04-16T04:16:17Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a> , I was trying to build the libtensorflow_inference.so file, following this <a href=\"https://www.skcript.com/svr/realtime-object-and-face-detection-in-android-using-tensorflow-object-detection-api/\" rel=\"nofollow\">tutorial</a>.</p>\n<p>I'm on</p>\n<ul>\n<li>Windows 10</li>\n<li>Installed the latest version of Bazel using <code>choco install bazel</code> with cmd</li>\n<li>NDK r14b version</li>\n<li>JDK 8 updated with Android Studio</li>\n</ul>\n<p>When I was trying to build .so file with</p>\n<pre><code>bazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so \n  --crosstool_top=//external:android/crosstool\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\n  --cpu=armeabi-v7a --verbose_failures\n</code></pre>\n<p>I had this error:<br>\nERROR: C:/users/user/appdata/local/temp/_bazel_user/xbt4cnkp/external/protobuf_archive/BUILD:265:1: Executing genrule @protobuf_archive//:generate_js_well_known_types_embed failed (Exit -1). Note: Remote connection/protocol failed with: execution failed: bash.exe failed: error executing command<br>\ncd C:/users/user/appdata/local/temp/_bazel_user/xbt4cnkp/execroot/org_tensorflow<br>\nSET PATH=C:\\tools\\msys64\\usr\\bin;C:\\tools\\msys64\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\libnvvp;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\Intel\\iCLS Client;C:\\Program Files\\Intel\\iCLS Client;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\Program Files\\nodejs;C:\\Program Files\\MATLAB\\R2016b\\bin;C:\\Program Files\\ibm\\gsk8\\lib64;C:\\Program Files (x86)\\ibm\\gsk8\\lib;C:\\PROGRA<del>1\\IBM\\SQLLIB\\BIN;C:\\PROGRA</del>1\\IBM\\SQLLIB\\FUNCTION;C:\\PROGRA~1\\IBM\\SQLLIB\\SAMPLES\\REPL;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Users\\User.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm;C:\\Program Files (x86)\\Windows Kits\\8.1\\Windows Performance Toolkit;C:\\Program Files\\Git\\cmd;C:\\Program Files\\OpenVPN\\bin;C:\\Program Files\\PuTTY;C:\\Program Files\\Java\\jdk1.7.0_79\\bin;C:\\Users\\User\\Anaconda3\\envs\\py36;C:\\Python27;C:\\Users\\User\\Anaconda3\\Scripts;C:\\Users\\User\\Anaconda3\\Library\\bin;C:\\Users\\User\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\User\\AppData\\Roaming\\npm;C:\\Program Files (x86)\\CodeBlocks\\MinGW\\bin;C:\\Program Files\\Docker Toolbox;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\extras\\CUPTI\\libx64;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64;C:\\ProgramData\\chocolatey\\bin<br>\nC:/tools/msys64/usr/bin/bash.exe -c source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/external/protobuf_archive/js_embed.exe external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/any.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/struct.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/timestamp.js &gt; bazel-out/host/genfiles/external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types_embed.cc<br>\nAction failed to execute: java.io.IOException: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"C:\\tools\\msys64\\usr\\bin\\bash.exe\" -c \"source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/external/protobuf_archive/js_embed.exe external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/any.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/struct.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/timestamp.js &gt; bazel-out/host/genfiles/external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types_embed.cc\"): The system cannot find the file specified.</p>\n<p>Target //tensorflow/contrib/android:libtensorflow_inference.so failed to build<br>\nINFO: Elapsed time: 232.602s, Critical Path: 15.31s<br>\nFAILED: Build did NOT complete successfully</p>\n<p>I have been trying with other version of bazel and NDK, but still can't build the file. Can you help me look into it?</p>\n<p>Thanks in advance.</p>", "body_text": "Hi @andrewharp , I was trying to build the libtensorflow_inference.so file, following this tutorial.\nI'm on\n\nWindows 10\nInstalled the latest version of Bazel using choco install bazel with cmd\nNDK r14b version\nJDK 8 updated with Android Studio\n\nWhen I was trying to build .so file with\nbazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so \n  --crosstool_top=//external:android/crosstool\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\n  --cpu=armeabi-v7a --verbose_failures\n\nI had this error:\nERROR: C:/users/user/appdata/local/temp/_bazel_user/xbt4cnkp/external/protobuf_archive/BUILD:265:1: Executing genrule @protobuf_archive//:generate_js_well_known_types_embed failed (Exit -1). Note: Remote connection/protocol failed with: execution failed: bash.exe failed: error executing command\ncd C:/users/user/appdata/local/temp/_bazel_user/xbt4cnkp/execroot/org_tensorflow\nSET PATH=C:\\tools\\msys64\\usr\\bin;C:\\tools\\msys64\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\libnvvp;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\Intel\\iCLS Client;C:\\Program Files\\Intel\\iCLS Client;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\Program Files\\nodejs;C:\\Program Files\\MATLAB\\R2016b\\bin;C:\\Program Files\\ibm\\gsk8\\lib64;C:\\Program Files (x86)\\ibm\\gsk8\\lib;C:\\PROGRA1\\IBM\\SQLLIB\\BIN;C:\\PROGRA1\\IBM\\SQLLIB\\FUNCTION;C:\\PROGRA~1\\IBM\\SQLLIB\\SAMPLES\\REPL;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Users\\User.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm;C:\\Program Files (x86)\\Windows Kits\\8.1\\Windows Performance Toolkit;C:\\Program Files\\Git\\cmd;C:\\Program Files\\OpenVPN\\bin;C:\\Program Files\\PuTTY;C:\\Program Files\\Java\\jdk1.7.0_79\\bin;C:\\Users\\User\\Anaconda3\\envs\\py36;C:\\Python27;C:\\Users\\User\\Anaconda3\\Scripts;C:\\Users\\User\\Anaconda3\\Library\\bin;C:\\Users\\User\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\User\\AppData\\Roaming\\npm;C:\\Program Files (x86)\\CodeBlocks\\MinGW\\bin;C:\\Program Files\\Docker Toolbox;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\extras\\CUPTI\\libx64;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64;C:\\ProgramData\\chocolatey\\bin\nC:/tools/msys64/usr/bin/bash.exe -c source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/external/protobuf_archive/js_embed.exe external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/any.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/struct.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/timestamp.js > bazel-out/host/genfiles/external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types_embed.cc\nAction failed to execute: java.io.IOException: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"C:\\tools\\msys64\\usr\\bin\\bash.exe\" -c \"source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/external/protobuf_archive/js_embed.exe external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/any.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/struct.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/timestamp.js > bazel-out/host/genfiles/external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types_embed.cc\"): The system cannot find the file specified.\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\nINFO: Elapsed time: 232.602s, Critical Path: 15.31s\nFAILED: Build did NOT complete successfully\nI have been trying with other version of bazel and NDK, but still can't build the file. Can you help me look into it?\nThanks in advance.", "body": "Hi @andrewharp , I was trying to build the libtensorflow_inference.so file, following this [tutorial](https://www.skcript.com/svr/realtime-object-and-face-detection-in-android-using-tensorflow-object-detection-api/). \r\n\r\nI'm on\r\n- Windows 10\r\n- Installed the latest version of Bazel using `choco install bazel` with cmd\r\n- NDK r14b version\r\n- JDK 8 updated with Android Studio\r\n\r\nWhen I was trying to build .so file with \r\n```\r\nbazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so \r\n  --crosstool_top=//external:android/crosstool\r\n  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\r\n  --cpu=armeabi-v7a --verbose_failures\r\n```\r\n\r\nI had this error:\r\nERROR: C:/users/user/appdata/local/temp/_bazel_user/xbt4cnkp/external/protobuf_archive/BUILD:265:1: Executing genrule @protobuf_archive//:generate_js_well_known_types_embed failed (Exit -1). Note: Remote connection/protocol failed with: execution failed: bash.exe failed: error executing command\r\n  cd C:/users/user/appdata/local/temp/_bazel_user/xbt4cnkp/execroot/org_tensorflow\r\n  SET PATH=C:\\tools\\msys64\\usr\\bin;C:\\tools\\msys64\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\libnvvp;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\Program Files\\nodejs\\;C:\\Program Files\\MATLAB\\R2016b\\bin;C:\\Program Files\\ibm\\gsk8\\lib64;C:\\Program Files (x86)\\ibm\\gsk8\\lib;C:\\PROGRA~1\\IBM\\SQLLIB\\BIN;C:\\PROGRA~1\\IBM\\SQLLIB\\FUNCTION;C:\\PROGRA~1\\IBM\\SQLLIB\\SAMPLES\\REPL;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Users\\User\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\\;C:\\Program Files (x86)\\Windows Kits\\8.1\\Windows Performance Toolkit\\;C:\\Program Files\\Git\\cmd;C:\\Program Files\\OpenVPN\\bin;C:\\Program Files\\PuTTY\\;C:\\Program Files\\Java\\jdk1.7.0_79\\bin;C:\\Users\\User\\Anaconda3\\envs\\py36;C:\\Python27;C:\\Users\\User\\Anaconda3\\Scripts;C:\\Users\\User\\Anaconda3\\Library\\bin;C:\\Users\\User\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\User\\AppData\\Roaming\\npm;C:\\Program Files (x86)\\CodeBlocks\\MinGW\\bin;C:\\Program Files\\Docker Toolbox;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\extras\\CUPTI\\libx64;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64;C:\\ProgramData\\chocolatey\\bin\r\n  C:/tools/msys64/usr/bin/bash.exe -c source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/external/protobuf_archive/js_embed.exe external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/any.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/struct.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/timestamp.js > bazel-out/host/genfiles/external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types_embed.cc\r\nAction failed to execute: java.io.IOException: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"C:\\tools\\msys64\\usr\\bin\\bash.exe\" -c \"source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/external/protobuf_archive/js_embed.exe external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/any.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/struct.js external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types/timestamp.js > bazel-out/host/genfiles/external/protobuf_archive/src/google/protobuf/compiler/js/well_known_types_embed.cc\"): The system cannot find the file specified.\r\n\r\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\r\nINFO: Elapsed time: 232.602s, Critical Path: 15.31s\r\nFAILED: Build did NOT complete successfully\r\n\r\n\r\nI have been trying with other version of bazel and NDK, but still can't build the file. Can you help me look into it?\r\n\r\nThanks in advance."}
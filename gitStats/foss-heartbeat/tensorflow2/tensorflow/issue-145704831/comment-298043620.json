{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298043620", "html_url": "https://github.com/tensorflow/tensorflow/issues/1769#issuecomment-298043620", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1769", "id": 298043620, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODA0MzYyMA==", "user": {"login": "j2emanue", "id": 4960058, "node_id": "MDQ6VXNlcjQ5NjAwNTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4960058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j2emanue", "html_url": "https://github.com/j2emanue", "followers_url": "https://api.github.com/users/j2emanue/followers", "following_url": "https://api.github.com/users/j2emanue/following{/other_user}", "gists_url": "https://api.github.com/users/j2emanue/gists{/gist_id}", "starred_url": "https://api.github.com/users/j2emanue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j2emanue/subscriptions", "organizations_url": "https://api.github.com/users/j2emanue/orgs", "repos_url": "https://api.github.com/users/j2emanue/repos", "events_url": "https://api.github.com/users/j2emanue/events{/privacy}", "received_events_url": "https://api.github.com/users/j2emanue/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-28T16:25:28Z", "updated_at": "2017-04-28T16:49:06Z", "author_association": "NONE", "body_html": "<p>i've already updated git submodules recursively on my macbook.  i am on master branch. But i am getting an error on building with bazel. Here is my workspace file changes:</p>\n<pre><code># Uncomment and update the paths in these entries to build the Android demo.\nandroid_sdk_repository(\n    name = \"androidsdk\",\n    api_level = 23,\n    # Ensure that you have the build_tools_version below installed in the\n    # SDK manager as it updates periodically.\n    build_tools_version = \"25.0.2\",\n#    # Replace with path to Android SDK on your system\n    path = \"/Users/j2emanue/Library/Android/sdk\",\n)\n#\n# Android NDK r12b is recommended (higher may cause issues with Bazel)\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/Users/j2emanue/Downloads/android-ndk-r12b\",\n#    # This needs to be 14 or higher to compile TensorFlow.\n#    # Note that the NDK version is not the API level.\n    api_level=14)\n</code></pre>\n<p>for the api_level in the android_ndk_repository closure i tried 23, 14, 21 . im not sure what to put there ?  on my pc i have android api 23 sdk already installed.</p>\n<p>here is the build error i get:</p>\n<p><code>ERROR: /private/var/tmp/_bazel_j2emanue/b0092c80c1dd2ccd3bd26061f20bf823/external/protobuf/BUILD:113:1: C++ compilation of rule '@protobuf//:protobuf' failed: Process exited with status 71 [sandboxed]. sandbox-exec: external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc: No such file or directory Use --strategy=CppCompile=standalone to disable sandboxing for the failing actions. Target //tensorflow/examples/android:tensorflow_demo failed to build</code></p>\n<p>and if i use verbose reporting here is the error i get and the command used:</p>\n<p><code>bazel build  --verbose_failures -c  opt --local_resources 2048,0.5,1.0 //tensorflow/examples/android:tensorflow_demo</code></p>\n<p>error:</p>\n<pre><code>ERROR: /private/var/tmp/_bazel_j2emanue/b0092c80c1dd2ccd3bd26061f20bf823/external/protobuf/BUILD:113:1: C++ compilation of rule '@protobuf//:protobuf' failed: arm-linux-androideabi-gcc failed: error executing command\n  (exec env - \\\n    PATH='/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/j2emanue/Library/Android/sdk/platform-tools/:\n/Users/j2emanue/Downloads/android-ndk-r12b/:\n/Users/j2emanue/Library/Android/sdk/build-tools/25.0.2/' \\\n    TMPDIR=/var/folders/q7/m2l4qpf11mqf2wjr24_jxrhc0000gn/T/ \\\n  external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables -no-canonical-prefixes -fno-canonical-system-headers '-march=armv7-a' '-mfpu=vfpv3-d16' '-mfloat-abi=softfp' -mthumb -Os -g -DNDEBUG -MD -MF bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.d '-frandom-seed=bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.o' -iquote external/protobuf -iquote bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/bazel_tools -isystem external/protobuf/src -isystem bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/protobuf/src -isystem external/bazel_tools/tools/cpp/gcc3 -DHAVE_PTHREAD -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -Wno-unused-function '--sysroot=external/androidndk/ndk/platforms/android-14/arch-arm' -isystem external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/include -isystem external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/include-fixed -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -c external/protobuf/src/google/protobuf/extension_set_heavy.cc -o bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.o)\n\nUse --sandbox_debug to see verbose messages from the sandbox.\nsandbox-exec: external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc: No such file or directory\nUse --strategy=CppCompile=standalone to disable sandboxing for the failing actions.\nTarget //tensorflow/examples/android:tensorflow_demo failed to build\nINFO: Elapsed time: 181.225s, Critical Path: 168.96s\n</code></pre>\n<p>How can i resolve this ?</p>", "body_text": "i've already updated git submodules recursively on my macbook.  i am on master branch. But i am getting an error on building with bazel. Here is my workspace file changes:\n# Uncomment and update the paths in these entries to build the Android demo.\nandroid_sdk_repository(\n    name = \"androidsdk\",\n    api_level = 23,\n    # Ensure that you have the build_tools_version below installed in the\n    # SDK manager as it updates periodically.\n    build_tools_version = \"25.0.2\",\n#    # Replace with path to Android SDK on your system\n    path = \"/Users/j2emanue/Library/Android/sdk\",\n)\n#\n# Android NDK r12b is recommended (higher may cause issues with Bazel)\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/Users/j2emanue/Downloads/android-ndk-r12b\",\n#    # This needs to be 14 or higher to compile TensorFlow.\n#    # Note that the NDK version is not the API level.\n    api_level=14)\n\nfor the api_level in the android_ndk_repository closure i tried 23, 14, 21 . im not sure what to put there ?  on my pc i have android api 23 sdk already installed.\nhere is the build error i get:\nERROR: /private/var/tmp/_bazel_j2emanue/b0092c80c1dd2ccd3bd26061f20bf823/external/protobuf/BUILD:113:1: C++ compilation of rule '@protobuf//:protobuf' failed: Process exited with status 71 [sandboxed]. sandbox-exec: external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc: No such file or directory Use --strategy=CppCompile=standalone to disable sandboxing for the failing actions. Target //tensorflow/examples/android:tensorflow_demo failed to build\nand if i use verbose reporting here is the error i get and the command used:\nbazel build  --verbose_failures -c  opt --local_resources 2048,0.5,1.0 //tensorflow/examples/android:tensorflow_demo\nerror:\nERROR: /private/var/tmp/_bazel_j2emanue/b0092c80c1dd2ccd3bd26061f20bf823/external/protobuf/BUILD:113:1: C++ compilation of rule '@protobuf//:protobuf' failed: arm-linux-androideabi-gcc failed: error executing command\n  (exec env - \\\n    PATH='/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/j2emanue/Library/Android/sdk/platform-tools/:\n/Users/j2emanue/Downloads/android-ndk-r12b/:\n/Users/j2emanue/Library/Android/sdk/build-tools/25.0.2/' \\\n    TMPDIR=/var/folders/q7/m2l4qpf11mqf2wjr24_jxrhc0000gn/T/ \\\n  external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables -no-canonical-prefixes -fno-canonical-system-headers '-march=armv7-a' '-mfpu=vfpv3-d16' '-mfloat-abi=softfp' -mthumb -Os -g -DNDEBUG -MD -MF bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.d '-frandom-seed=bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.o' -iquote external/protobuf -iquote bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/bazel_tools -isystem external/protobuf/src -isystem bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/protobuf/src -isystem external/bazel_tools/tools/cpp/gcc3 -DHAVE_PTHREAD -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -Wno-unused-function '--sysroot=external/androidndk/ndk/platforms/android-14/arch-arm' -isystem external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/include -isystem external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/include-fixed -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -c external/protobuf/src/google/protobuf/extension_set_heavy.cc -o bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.o)\n\nUse --sandbox_debug to see verbose messages from the sandbox.\nsandbox-exec: external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc: No such file or directory\nUse --strategy=CppCompile=standalone to disable sandboxing for the failing actions.\nTarget //tensorflow/examples/android:tensorflow_demo failed to build\nINFO: Elapsed time: 181.225s, Critical Path: 168.96s\n\nHow can i resolve this ?", "body": "i've already updated git submodules recursively on my macbook.  i am on master branch. But i am getting an error on building with bazel. Here is my workspace file changes:\r\n\r\n```\r\n# Uncomment and update the paths in these entries to build the Android demo.\r\nandroid_sdk_repository(\r\n    name = \"androidsdk\",\r\n    api_level = 23,\r\n    # Ensure that you have the build_tools_version below installed in the\r\n    # SDK manager as it updates periodically.\r\n    build_tools_version = \"25.0.2\",\r\n#    # Replace with path to Android SDK on your system\r\n    path = \"/Users/j2emanue/Library/Android/sdk\",\r\n)\r\n#\r\n# Android NDK r12b is recommended (higher may cause issues with Bazel)\r\nandroid_ndk_repository(\r\n    name=\"androidndk\",\r\n    path=\"/Users/j2emanue/Downloads/android-ndk-r12b\",\r\n#    # This needs to be 14 or higher to compile TensorFlow.\r\n#    # Note that the NDK version is not the API level.\r\n    api_level=14)\r\n```\r\n\r\nfor the api_level in the android_ndk_repository closure i tried 23, 14, 21 . im not sure what to put there ?  on my pc i have android api 23 sdk already installed.  \r\n\r\nhere is the build error i get:\r\n\r\n`ERROR: /private/var/tmp/_bazel_j2emanue/b0092c80c1dd2ccd3bd26061f20bf823/external/protobuf/BUILD:113:1: C++ compilation of rule '@protobuf//:protobuf' failed: Process exited with status 71 [sandboxed].\r\nsandbox-exec: external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc: No such file or directory\r\nUse --strategy=CppCompile=standalone to disable sandboxing for the failing actions.\r\nTarget //tensorflow/examples/android:tensorflow_demo failed to build`\r\n\r\n\r\nand if i use verbose reporting here is the error i get and the command used:\r\n\r\n`bazel build  --verbose_failures -c  opt --local_resources 2048,0.5,1.0 //tensorflow/examples/android:tensorflow_demo`\r\n\r\nerror:\r\n\r\n```\r\nERROR: /private/var/tmp/_bazel_j2emanue/b0092c80c1dd2ccd3bd26061f20bf823/external/protobuf/BUILD:113:1: C++ compilation of rule '@protobuf//:protobuf' failed: arm-linux-androideabi-gcc failed: error executing command\r\n  (exec env - \\\r\n    PATH='/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/j2emanue/Library/Android/sdk/platform-tools/:\r\n/Users/j2emanue/Downloads/android-ndk-r12b/:\r\n/Users/j2emanue/Library/Android/sdk/build-tools/25.0.2/' \\\r\n    TMPDIR=/var/folders/q7/m2l4qpf11mqf2wjr24_jxrhc0000gn/T/ \\\r\n  external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc -fstack-protector-strong -fpic -ffunction-sections -funwind-tables -no-canonical-prefixes -fno-canonical-system-headers '-march=armv7-a' '-mfpu=vfpv3-d16' '-mfloat-abi=softfp' -mthumb -Os -g -DNDEBUG -MD -MF bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.d '-frandom-seed=bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.o' -iquote external/protobuf -iquote bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/bazel_tools -isystem external/protobuf/src -isystem bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/genfiles/external/protobuf/src -isystem external/bazel_tools/tools/cpp/gcc3 -DHAVE_PTHREAD -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare -Wno-unused-function '--sysroot=external/androidndk/ndk/platforms/android-14/arch-arm' -isystem external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/include -isystem external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/include-fixed -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem external/androidndk/ndk/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -c external/protobuf/src/google/protobuf/extension_set_heavy.cc -o bazel-out/android-arm-linux-androideabi-4.9-v7a-gnu-libstdcpp-opt/bin/external/protobuf/_objs/protobuf/external/protobuf/src/google/protobuf/extension_set_heavy.o)\r\n\r\nUse --sandbox_debug to see verbose messages from the sandbox.\r\nsandbox-exec: external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-gcc: No such file or directory\r\nUse --strategy=CppCompile=standalone to disable sandboxing for the failing actions.\r\nTarget //tensorflow/examples/android:tensorflow_demo failed to build\r\nINFO: Elapsed time: 181.225s, Critical Path: 168.96s\r\n```\r\n\r\n\r\nHow can i resolve this ? "}
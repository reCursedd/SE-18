{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1769", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1769/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1769/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1769/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1769", "id": 145704831, "node_id": "MDU6SXNzdWUxNDU3MDQ4MzE=", "number": 1769, "title": "Bazel build Android shared object libtensorflow_demo.so fails with jni.h not found", "user": {"login": "lingz", "id": 3147213, "node_id": "MDQ6VXNlcjMxNDcyMTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/3147213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lingz", "html_url": "https://github.com/lingz", "followers_url": "https://api.github.com/users/lingz/followers", "following_url": "https://api.github.com/users/lingz/following{/other_user}", "gists_url": "https://api.github.com/users/lingz/gists{/gist_id}", "starred_url": "https://api.github.com/users/lingz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lingz/subscriptions", "organizations_url": "https://api.github.com/users/lingz/orgs", "repos_url": "https://api.github.com/users/lingz/repos", "events_url": "https://api.github.com/users/lingz/events{/privacy}", "received_events_url": "https://api.github.com/users/lingz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 25, "created_at": "2016-04-04T14:44:20Z", "updated_at": "2018-05-10T04:38:41Z", "closed_at": "2016-04-11T18:12:17Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I'm trying to build a .so of the Tensorflow Android lib in order to include in the build process of an existing app. Bazel is able to build the full apk fine, but it's having trouble when I tell it to only build the .so, complaining that jni.h is not found.</p>\n<h3>Environment info</h3>\n<p>Operating System:</p>\n<p>Ubuntu 14.04 x64</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed:</li>\n</ol>\n<p><a href=\"https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl</a></p>\n<ol>\n<li>The output from python -c \"import tensorflow; print(tensorflow.<strong>version</strong>)\":<br>\n0.7.1</li>\n</ol>\n<p>If installed from sources, provide the commit hash:</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>bazel build //tensorflow/examples/android:libtensorflow_demo.so</li>\n<li>You get the error message:</li>\n</ol>\n<p>ERROR: /Code/tensorflow/tensorflow/examples/android/BUILD:12:1: C++ compilation of rule '//tensorflow/examples/android:libtensorflow_demo.so' failed: namespace-sandbox failed: error executing command /home/user/.cache/bazel/_bazel_user/460c757144c1d801a3560f7277d7643a/tensorflow/_bin/namespace-sandbox ... (remaining 63 argument(s) skipped).<br>\nIn file included from tensorflow/examples/android/jni/jni_utils.cc:16:0:<br>\n./tensorflow/examples/android/jni/jni_utils.h:19:17: fatal error: jni.h: No such file or directory<br>\n#include &lt;jni.h&gt;<br>\n^<br>\ncompilation terminated.</p>\n<h3>What have you tried?</h3>\n<ol>\n<li>Running bazel build //tensorflow/examples/android:tensorflow_demo does in fact work correctly.</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment).</p>", "body_text": "I'm trying to build a .so of the Tensorflow Android lib in order to include in the build process of an existing app. Bazel is able to build the full apk fine, but it's having trouble when I tell it to only build the .so, complaining that jni.h is not found.\nEnvironment info\nOperating System:\nUbuntu 14.04 x64\nIf installed from binary pip package, provide:\n\nWhich pip package you installed:\n\nhttps://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl\n\nThe output from python -c \"import tensorflow; print(tensorflow.version)\":\n0.7.1\n\nIf installed from sources, provide the commit hash:\nSteps to reproduce\n\nbazel build //tensorflow/examples/android:libtensorflow_demo.so\nYou get the error message:\n\nERROR: /Code/tensorflow/tensorflow/examples/android/BUILD:12:1: C++ compilation of rule '//tensorflow/examples/android:libtensorflow_demo.so' failed: namespace-sandbox failed: error executing command /home/user/.cache/bazel/_bazel_user/460c757144c1d801a3560f7277d7643a/tensorflow/_bin/namespace-sandbox ... (remaining 63 argument(s) skipped).\nIn file included from tensorflow/examples/android/jni/jni_utils.cc:16:0:\n./tensorflow/examples/android/jni/jni_utils.h:19:17: fatal error: jni.h: No such file or directory\n#include <jni.h>\n^\ncompilation terminated.\nWhat have you tried?\n\nRunning bazel build //tensorflow/examples/android:tensorflow_demo does in fact work correctly.\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment).", "body": "I'm trying to build a .so of the Tensorflow Android lib in order to include in the build process of an existing app. Bazel is able to build the full apk fine, but it's having trouble when I tell it to only build the .so, complaining that jni.h is not found.\n### Environment info\n\nOperating System:\n\nUbuntu 14.04 x64\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed:\n\nhttps://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl\n1. The output from python -c \"import tensorflow; print(tensorflow.**version**)\":\n   0.7.1\n\nIf installed from sources, provide the commit hash:\n### Steps to reproduce\n1.  bazel build //tensorflow/examples/android:libtensorflow_demo.so\n2. You get the error message: \n\nERROR: /Code/tensorflow/tensorflow/examples/android/BUILD:12:1: C++ compilation of rule '//tensorflow/examples/android:libtensorflow_demo.so' failed: namespace-sandbox failed: error executing command /home/user/.cache/bazel/_bazel_user/460c757144c1d801a3560f7277d7643a/tensorflow/_bin/namespace-sandbox ... (remaining 63 argument(s) skipped).\nIn file included from tensorflow/examples/android/jni/jni_utils.cc:16:0:\n./tensorflow/examples/android/jni/jni_utils.h:19:17: fatal error: jni.h: No such file or directory\n #include <jni.h>\n                 ^\ncompilation terminated.\n### What have you tried?\n1. Running bazel build //tensorflow/examples/android:tensorflow_demo does in fact work correctly.\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n"}
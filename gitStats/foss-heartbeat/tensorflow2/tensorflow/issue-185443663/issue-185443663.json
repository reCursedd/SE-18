{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5216", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5216/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5216/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5216/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5216", "id": 185443663, "node_id": "MDU6SXNzdWUxODU0NDM2NjM=", "number": 5216, "title": "sparse tensor.shape method returns a tensor object  ", "user": {"login": "amrit-poudel", "id": 12847183, "node_id": "MDQ6VXNlcjEyODQ3MTgz", "avatar_url": "https://avatars2.githubusercontent.com/u/12847183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amrit-poudel", "html_url": "https://github.com/amrit-poudel", "followers_url": "https://api.github.com/users/amrit-poudel/followers", "following_url": "https://api.github.com/users/amrit-poudel/following{/other_user}", "gists_url": "https://api.github.com/users/amrit-poudel/gists{/gist_id}", "starred_url": "https://api.github.com/users/amrit-poudel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amrit-poudel/subscriptions", "organizations_url": "https://api.github.com/users/amrit-poudel/orgs", "repos_url": "https://api.github.com/users/amrit-poudel/repos", "events_url": "https://api.github.com/users/amrit-poudel/events{/privacy}", "received_events_url": "https://api.github.com/users/amrit-poudel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-10-26T16:24:15Z", "updated_at": "2016-10-27T04:27:25Z", "closed_at": "2016-10-26T16:27:07Z", "author_association": "NONE", "body_html": "<p>sparse tensor.shape method returns a tensor object which seems to be of no use to extract the actual shape of the sparse tensor without resorting to run function.</p>\n<p>To clarify what I mean, first consider a sparse tensor:</p>\n<p>a = tf.SparseTensor(indices=[[0, 0, 0], [1, 2, 1]], values=[1.0+2j, 2.0], shape=[3, 4, 2])</p>\n<p>a.shape returns:</p>\n<p>tf.Tensor 'SparseTensor_1/shape:0' shape=(3,) dtype=int64</p>\n<p>This is kind of no use.</p>\n<p>Now, consider a dense tensor:</p>\n<p>a = tf.constant(np.random.normal(0.0, 1.0, (4, 4)).astype(dtype=np.complex128))</p>\n<p>a.get_shape() returns:<br>\nTensorShape([Dimension(4), Dimension(4)])</p>\n<p>I can use this output and cast it into a list or tuple of integers without ever invoking run(). However, I cannot do the same for sparse tensor, unless I first convert sparse tensor to dense (which is <em>not</em> implemented for complex sparse tensor yet) and then call get_shape() method on it, but this is kind of  redundant, defeats the purpose of using a sparse tensor in the first place and also leads to error down the road if the input sparse tensor is complex.</p>\n<p>Is there a way to obtain the shape of a sparse tensor without invoking run() or converting it to a dense tensor first?</p>", "body_text": "sparse tensor.shape method returns a tensor object which seems to be of no use to extract the actual shape of the sparse tensor without resorting to run function.\nTo clarify what I mean, first consider a sparse tensor:\na = tf.SparseTensor(indices=[[0, 0, 0], [1, 2, 1]], values=[1.0+2j, 2.0], shape=[3, 4, 2])\na.shape returns:\ntf.Tensor 'SparseTensor_1/shape:0' shape=(3,) dtype=int64\nThis is kind of no use.\nNow, consider a dense tensor:\na = tf.constant(np.random.normal(0.0, 1.0, (4, 4)).astype(dtype=np.complex128))\na.get_shape() returns:\nTensorShape([Dimension(4), Dimension(4)])\nI can use this output and cast it into a list or tuple of integers without ever invoking run(). However, I cannot do the same for sparse tensor, unless I first convert sparse tensor to dense (which is not implemented for complex sparse tensor yet) and then call get_shape() method on it, but this is kind of  redundant, defeats the purpose of using a sparse tensor in the first place and also leads to error down the road if the input sparse tensor is complex.\nIs there a way to obtain the shape of a sparse tensor without invoking run() or converting it to a dense tensor first?", "body": "sparse tensor.shape method returns a tensor object which seems to be of no use to extract the actual shape of the sparse tensor without resorting to run function.\n\nTo clarify what I mean, first consider a sparse tensor:\n\n a = tf.SparseTensor(indices=[[0, 0, 0], [1, 2, 1]], values=[1.0+2j, 2.0], shape=[3, 4, 2])\n\na.shape returns:\n\n tf.Tensor 'SparseTensor_1/shape:0' shape=(3,) dtype=int64\n\nThis is kind of no use. \n\nNow, consider a dense tensor:\n\na = tf.constant(np.random.normal(0.0, 1.0, (4, 4)).astype(dtype=np.complex128))\n\na.get_shape() returns:\nTensorShape([Dimension(4), Dimension(4)])\n\nI can use this output and cast it into a list or tuple of integers without ever invoking run(). However, I cannot do the same for sparse tensor, unless I first convert sparse tensor to dense (which is _not_ implemented for complex sparse tensor yet) and then call get_shape() method on it, but this is kind of  redundant, defeats the purpose of using a sparse tensor in the first place and also leads to error down the road if the input sparse tensor is complex.\n\nIs there a way to obtain the shape of a sparse tensor without invoking run() or converting it to a dense tensor first?\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/339126341", "html_url": "https://github.com/tensorflow/tensorflow/issues/13413#issuecomment-339126341", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13413", "id": 339126341, "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTEyNjM0MQ==", "user": {"login": "galv", "id": 4767568, "node_id": "MDQ6VXNlcjQ3Njc1Njg=", "avatar_url": "https://avatars0.githubusercontent.com/u/4767568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/galv", "html_url": "https://github.com/galv", "followers_url": "https://api.github.com/users/galv/followers", "following_url": "https://api.github.com/users/galv/following{/other_user}", "gists_url": "https://api.github.com/users/galv/gists{/gist_id}", "starred_url": "https://api.github.com/users/galv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/galv/subscriptions", "organizations_url": "https://api.github.com/users/galv/orgs", "repos_url": "https://api.github.com/users/galv/repos", "events_url": "https://api.github.com/users/galv/events{/privacy}", "received_events_url": "https://api.github.com/users/galv/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-24T20:48:52Z", "updated_at": "2017-10-24T20:48:52Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15672652\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/channingxiao\">@channingxiao</a> I encountered the same issue on RHEL6 in tensorflow 1.3.1. You need to link explicitly the librt library in RHEL6, since it uses glibc 2.12, while Google apparently uses a glibc newer than glibc 2.17, which changed the location of the time_* functions from librt to glibc itself. See <a href=\"https://blog.flameeyes.eu/2012/12/glibc-2-17-what-s-going-to-be-a-trouble/\" rel=\"nofollow\">here</a> for more details.</p>\n<p>The work-around is to change:</p>\n<pre><code>        \"//conditions:default\": [\n            \"-z defs\",\n            \"-s\",\n            \"-Wl,--version-script\",  #  This line must be directly followed by LINKER_VERSION_SCRIPT\n            LINKER_VERSION_SCRIPT,\n        ],\n</code></pre>\n<p>to</p>\n<pre><code>        \"//conditions:default\": [\n            \"-lrt\",\n            \"-z defs\",\n            \"-s\",\n            \"-Wl,--version-script\",  #  This line must be directly followed by LINKER_VERSION_SCRIPT\n            LINKER_VERSION_SCRIPT,\n        ],\n</code></pre>\n<p>in tensorflow/java/BUILD.</p>\n<p>Let me know if it works for you.</p>\n<p>I'm happy to make a PR like <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"236062114\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/10717\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/10717/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/10717\">#10717</a> (which fixed the same problem for the C++ build on RHEL6) to fix this problem.</p>", "body_text": "@channingxiao I encountered the same issue on RHEL6 in tensorflow 1.3.1. You need to link explicitly the librt library in RHEL6, since it uses glibc 2.12, while Google apparently uses a glibc newer than glibc 2.17, which changed the location of the time_* functions from librt to glibc itself. See here for more details.\nThe work-around is to change:\n        \"//conditions:default\": [\n            \"-z defs\",\n            \"-s\",\n            \"-Wl,--version-script\",  #  This line must be directly followed by LINKER_VERSION_SCRIPT\n            LINKER_VERSION_SCRIPT,\n        ],\n\nto\n        \"//conditions:default\": [\n            \"-lrt\",\n            \"-z defs\",\n            \"-s\",\n            \"-Wl,--version-script\",  #  This line must be directly followed by LINKER_VERSION_SCRIPT\n            LINKER_VERSION_SCRIPT,\n        ],\n\nin tensorflow/java/BUILD.\nLet me know if it works for you.\nI'm happy to make a PR like #10717 (which fixed the same problem for the C++ build on RHEL6) to fix this problem.", "body": "@channingxiao I encountered the same issue on RHEL6 in tensorflow 1.3.1. You need to link explicitly the librt library in RHEL6, since it uses glibc 2.12, while Google apparently uses a glibc newer than glibc 2.17, which changed the location of the time_* functions from librt to glibc itself. See [here](https://blog.flameeyes.eu/2012/12/glibc-2-17-what-s-going-to-be-a-trouble/) for more details.\r\n\r\nThe work-around is to change:\r\n\r\n```\r\n        \"//conditions:default\": [\r\n            \"-z defs\",\r\n            \"-s\",\r\n            \"-Wl,--version-script\",  #  This line must be directly followed by LINKER_VERSION_SCRIPT\r\n            LINKER_VERSION_SCRIPT,\r\n        ],\r\n```\r\n\r\nto\r\n\r\n```\r\n        \"//conditions:default\": [\r\n            \"-lrt\",\r\n            \"-z defs\",\r\n            \"-s\",\r\n            \"-Wl,--version-script\",  #  This line must be directly followed by LINKER_VERSION_SCRIPT\r\n            LINKER_VERSION_SCRIPT,\r\n        ],\r\n```\r\n\r\nin tensorflow/java/BUILD.\r\n\r\nLet me know if it works for you.\r\n\r\nI'm happy to make a PR like #10717 (which fixed the same problem for the C++ build on RHEL6) to fix this problem."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22105", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22105/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22105/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22105/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22105", "id": 357485592, "node_id": "MDU6SXNzdWUzNTc0ODU1OTI=", "number": 22105, "title": "[Bug] Sometimes CUDA check failed", "user": {"login": "OneMoreSecond", "id": 16792948, "node_id": "MDQ6VXNlcjE2NzkyOTQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/16792948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OneMoreSecond", "html_url": "https://github.com/OneMoreSecond", "followers_url": "https://api.github.com/users/OneMoreSecond/followers", "following_url": "https://api.github.com/users/OneMoreSecond/following{/other_user}", "gists_url": "https://api.github.com/users/OneMoreSecond/gists{/gist_id}", "starred_url": "https://api.github.com/users/OneMoreSecond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OneMoreSecond/subscriptions", "organizations_url": "https://api.github.com/users/OneMoreSecond/orgs", "repos_url": "https://api.github.com/users/OneMoreSecond/repos", "events_url": "https://api.github.com/users/OneMoreSecond/events{/privacy}", "received_events_url": "https://api.github.com/users/OneMoreSecond/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-09-06T03:43:38Z", "updated_at": "2018-09-27T18:58:33Z", "closed_at": "2018-09-27T18:58:33Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>\n<p><strong>Code</strong>: a keras example (use tf.keras instead) <a href=\"https://github.com/keras-team/keras/blob/master/examples/lstm_seq2seq.py\">https://github.com/keras-team/keras/blob/master/examples/lstm_seq2seq.py</a></p>\n</li>\n<li>\n<p><strong>OS Platform and Distribution</strong>: Windows server 2016</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from (source or binary)</strong>: binary</p>\n</li>\n<li>\n<p><strong>TensorFlow version (use command below)</strong>: 'v1.10.0-rc1-19-g656e7a2b34' 1.10.0</p>\n</li>\n<li>\n<p><strong>Python version</strong>: 3.6.6</p>\n</li>\n<li>\n<p><strong>CUDA/cuDNN version</strong>: CUDA 9.0, cuDNN 7.0</p>\n</li>\n<li>\n<p><strong>Have I written custom code</strong>: some I/O code to adapt data format, which shouldn't involved</p>\n</li>\n<li>\n<p><strong>Bazel version</strong> : N/A</p>\n</li>\n<li>\n<p><strong>GPU model and memory</strong>: Quadro P600, 2GiB</p>\n</li>\n<li>\n<p><strong>Exact command to reproduce</strong>: python lstm_seq2seq.py</p>\n</li>\n<li>\n<p><strong>Mobile device</strong>: N/A</p>\n</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I try to run the code mentioned above.<br>\nIf I run the script successfully, the script will raise a error in next several runs.<br>\nKeep retry and I can successfully run it again.</p>\n<p>I only know the check failed, but can't see the error code.<br>\nCould you provide some help on it?</p>\n<p>Another problem: only changing latent_dim from 128 to 256 results in 5e-8 training loss and a bad model. But CPU training gives a good result.</p>\n<h3>Source code / logs</h3>\n<p>Epoch 1/100<br>\n2018-09-06 10:51:48.513539: I T:\\src\\github\\tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2<br>\n2018-09-06 10:51:48.726860: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1405] Found device 0 with properties:<br>\nname: Quadro P600 major: 6 minor: 1 memoryClockRate(GHz): 1.5565<br>\npciBusID: 0000:21:00.0<br>\ntotalMemory: 2.00GiB freeMemory: 1.62GiB<br>\n2018-09-06 10:51:48.731423: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1484] Adding visible gpu devices: 0<br>\n2018-09-06 10:51:49.568323: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:965] Device interconnect StreamExecutor with strength 1 edge matrix:<br>\n2018-09-06 10:51:49.573347: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:971]      0<br>\n2018-09-06 10:51:49.576631: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:984] 0:   N<br>\n2018-09-06 10:51:49.582844: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1097] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 1377 MB memory) -&gt; physical GPU (device: 0, name:<br>\nQuadro P600, pci bus id: 0000:21:00.0, compute capability: 6.1)<br>\n2018-09-06 10:51:49.872995: I T:\\src\\github\\tensorflow\\tensorflow\\core\\kernels\\cuda_solvers.cc:159] Creating CudaSolver handles for stream 000001DDA2412050<br>\n<strong>2018-09-06 10:51:50.120523: F T:\\src\\github\\tensorflow\\tensorflow\\core\\kernels\\cuda_solvers.cc:94] Check failed: cusolverDnCreate(&amp;cusolver_dn_handle) == CUSOLVER_STATUS_SUCCESS Failed to create cuSolverDN instance.</strong></p>", "body_text": "System information\n\n\nCode: a keras example (use tf.keras instead) https://github.com/keras-team/keras/blob/master/examples/lstm_seq2seq.py\n\n\nOS Platform and Distribution: Windows server 2016\n\n\nTensorFlow installed from (source or binary): binary\n\n\nTensorFlow version (use command below): 'v1.10.0-rc1-19-g656e7a2b34' 1.10.0\n\n\nPython version: 3.6.6\n\n\nCUDA/cuDNN version: CUDA 9.0, cuDNN 7.0\n\n\nHave I written custom code: some I/O code to adapt data format, which shouldn't involved\n\n\nBazel version : N/A\n\n\nGPU model and memory: Quadro P600, 2GiB\n\n\nExact command to reproduce: python lstm_seq2seq.py\n\n\nMobile device: N/A\n\n\nDescribe the problem\nI try to run the code mentioned above.\nIf I run the script successfully, the script will raise a error in next several runs.\nKeep retry and I can successfully run it again.\nI only know the check failed, but can't see the error code.\nCould you provide some help on it?\nAnother problem: only changing latent_dim from 128 to 256 results in 5e-8 training loss and a bad model. But CPU training gives a good result.\nSource code / logs\nEpoch 1/100\n2018-09-06 10:51:48.513539: I T:\\src\\github\\tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\n2018-09-06 10:51:48.726860: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1405] Found device 0 with properties:\nname: Quadro P600 major: 6 minor: 1 memoryClockRate(GHz): 1.5565\npciBusID: 0000:21:00.0\ntotalMemory: 2.00GiB freeMemory: 1.62GiB\n2018-09-06 10:51:48.731423: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1484] Adding visible gpu devices: 0\n2018-09-06 10:51:49.568323: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:965] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-09-06 10:51:49.573347: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:971]      0\n2018-09-06 10:51:49.576631: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:984] 0:   N\n2018-09-06 10:51:49.582844: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1097] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 1377 MB memory) -> physical GPU (device: 0, name:\nQuadro P600, pci bus id: 0000:21:00.0, compute capability: 6.1)\n2018-09-06 10:51:49.872995: I T:\\src\\github\\tensorflow\\tensorflow\\core\\kernels\\cuda_solvers.cc:159] Creating CudaSolver handles for stream 000001DDA2412050\n2018-09-06 10:51:50.120523: F T:\\src\\github\\tensorflow\\tensorflow\\core\\kernels\\cuda_solvers.cc:94] Check failed: cusolverDnCreate(&cusolver_dn_handle) == CUSOLVER_STATUS_SUCCESS Failed to create cuSolverDN instance.", "body": "### System information\r\n- **Code**: a keras example (use tf.keras instead) https://github.com/keras-team/keras/blob/master/examples/lstm_seq2seq.py\r\n- **OS Platform and Distribution**: Windows server 2016\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 'v1.10.0-rc1-19-g656e7a2b34' 1.10.0\r\n- **Python version**: 3.6.6\r\n- **CUDA/cuDNN version**: CUDA 9.0, cuDNN 7.0\r\n\r\n- **Have I written custom code**: some I/O code to adapt data format, which shouldn't involved\r\n- **Bazel version** : N/A\r\n- **GPU model and memory**: Quadro P600, 2GiB\r\n- **Exact command to reproduce**: python lstm_seq2seq.py\r\n- **Mobile device**: N/A\r\n\r\n### Describe the problem\r\nI try to run the code mentioned above.\r\nIf I run the script successfully, the script will raise a error in next several runs.\r\nKeep retry and I can successfully run it again.\r\n\r\nI only know the check failed, but can't see the error code.\r\nCould you provide some help on it?\r\n\r\nAnother problem: only changing latent_dim from 128 to 256 results in 5e-8 training loss and a bad model. But CPU training gives a good result.\r\n\r\n### Source code / logs\r\nEpoch 1/100\r\n2018-09-06 10:51:48.513539: I T:\\src\\github\\tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\n2018-09-06 10:51:48.726860: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1405] Found device 0 with properties:\r\nname: Quadro P600 major: 6 minor: 1 memoryClockRate(GHz): 1.5565\r\npciBusID: 0000:21:00.0\r\ntotalMemory: 2.00GiB freeMemory: 1.62GiB\r\n2018-09-06 10:51:48.731423: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1484] Adding visible gpu devices: 0\r\n2018-09-06 10:51:49.568323: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:965] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-09-06 10:51:49.573347: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:971]      0\r\n2018-09-06 10:51:49.576631: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:984] 0:   N\r\n2018-09-06 10:51:49.582844: I T:\\src\\github\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1097] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 1377 MB memory) -> physical GPU (device: 0, name:\r\nQuadro P600, pci bus id: 0000:21:00.0, compute capability: 6.1)\r\n2018-09-06 10:51:49.872995: I T:\\src\\github\\tensorflow\\tensorflow\\core\\kernels\\cuda_solvers.cc:159] Creating CudaSolver handles for stream 000001DDA2412050\r\n**2018-09-06 10:51:50.120523: F T:\\src\\github\\tensorflow\\tensorflow\\core\\kernels\\cuda_solvers.cc:94] Check failed: cusolverDnCreate(&cusolver_dn_handle) == CUSOLVER_STATUS_SUCCESS Failed to create cuSolverDN instance.**\r\n"}
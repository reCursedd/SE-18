{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/373243190", "html_url": "https://github.com/tensorflow/tensorflow/pull/17114#issuecomment-373243190", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17114", "id": 373243190, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzI0MzE5MA==", "user": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-15T02:49:35Z", "updated_at": "2018-03-15T02:49:35Z", "author_association": "MEMBER", "body_html": "<p>To clarify Asim's message: Let's do the following:</p>\n<ul>\n<li>leave <code>get_variable_value</code> as is</li>\n<li>add a new method <code>get_variable_values</code> which accepts a list and returns a dict</li>\n<li>in this new function, make a <code>CheckpointReader</code> (using <code>load_checkpoint</code>) and then loop over the variable names to be loaded and load them using <code>get_tensor</code>.</li>\n</ul>\n<p>This is much more efficient, since you only read the checkpoint once. The current implementation in this PR loads the checkpoint again for each variable to be loaded.</p>", "body_text": "To clarify Asim's message: Let's do the following:\n\nleave get_variable_value as is\nadd a new method get_variable_values which accepts a list and returns a dict\nin this new function, make a CheckpointReader (using load_checkpoint) and then loop over the variable names to be loaded and load them using get_tensor.\n\nThis is much more efficient, since you only read the checkpoint once. The current implementation in this PR loads the checkpoint again for each variable to be loaded.", "body": "To clarify Asim's message: Let's do the following:\r\n\r\n- leave `get_variable_value` as is\r\n- add a new method `get_variable_values` which accepts a list and returns a dict\r\n- in this new function, make a `CheckpointReader` (using `load_checkpoint`) and then loop over the variable names to be loaded and load them using `get_tensor`. \r\n\r\nThis is much more efficient, since you only read the checkpoint once. The current implementation in this PR loads the checkpoint again for each variable to be loaded."}
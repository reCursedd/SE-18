{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20730", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20730/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20730/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20730/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20730", "id": 340558476, "node_id": "MDU6SXNzdWUzNDA1NTg0NzY=", "number": 20730, "title": "tensorflow uses recomputer technology", "user": {"login": "jerryli1119", "id": 34928698, "node_id": "MDQ6VXNlcjM0OTI4Njk4", "avatar_url": "https://avatars0.githubusercontent.com/u/34928698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jerryli1119", "html_url": "https://github.com/jerryli1119", "followers_url": "https://api.github.com/users/jerryli1119/followers", "following_url": "https://api.github.com/users/jerryli1119/following{/other_user}", "gists_url": "https://api.github.com/users/jerryli1119/gists{/gist_id}", "starred_url": "https://api.github.com/users/jerryli1119/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jerryli1119/subscriptions", "organizations_url": "https://api.github.com/users/jerryli1119/orgs", "repos_url": "https://api.github.com/users/jerryli1119/repos", "events_url": "https://api.github.com/users/jerryli1119/events{/privacy}", "received_events_url": "https://api.github.com/users/jerryli1119/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-07-12T09:27:16Z", "updated_at": "2018-07-12T19:39:04Z", "closed_at": "2018-07-12T19:39:04Z", "author_association": "NONE", "body_html": "<p>System information<br>\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No<br>\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04<br>\nTensorFlow installed from (source or binary):source<br>\nTensorFlow version (use command below):1.8.0<br>\nPython version: 3.5<br>\nBazel version (if compiling from source):0.10.0<br>\nGCC/Compiler version (if compiling from source): c++11<br>\nCUDA/cuDNN version: 9/7<br>\nGPU model and memory: gtx 1080ti, 11G<br>\nExact command to reproduce:N/A<br>\nDescribe the problem:</p>\n<p>In order to understand how much gpu memory resources tensorflow can economize, I did some experiments.<br>\nMy network is vgg-16 and dataset is mnist, batch size is 128. i estimate my gpu memory usage is 2.8GB.<br>\nI close  all the RewriterConfig like:<br>\nrewrite_options.memory_optimization = rewriter_config_pb2.RewriterConfig.NO_MEM_OPT<br>\nrewrite_options.layout_optimizer = rewriter_config_pb2.RewriterConfig.OFF<br>\nrewrite_options.function_optimization = rewriter_config_pb2.RewriterConfig.OFF<br>\nrewrite_options.constant_folding = rewriter_config_pb2.RewriterConfig.OFF<br>\nrewrite_options.arithmetic_optimization = rewriter_config_pb2.RewriterConfig.OFF<br>\nrewrite_options.loop_optimization = rewriter_config_pb2.RewriterConfig.OFF<br>\nrewrite_options.dependency_optimization = rewriter_config_pb2.RewriterConfig.OFF<br>\nAnd i gradually reduce the amount of gpu memory usage :</p>\n<table>\n<thead>\n<tr>\n<th>GPU   memory usage</th>\n<th>2.883</th>\n<th>2.5</th>\n<th>2</th>\n<th>1.5</th>\n<th>1.307</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>average(iter   5000)</td>\n<td>337.161</td>\n<td>336.968</td>\n<td>339.018</td>\n<td>338.409</td>\n<td>412.119</td>\n</tr>\n<tr>\n<td>average(iter   50000)</td>\n<td>3350.804</td>\n<td>3352.093</td>\n<td>3358.742</td>\n<td>3373.366</td>\n<td>4116.673</td>\n</tr>\n</tbody>\n</table>\n<p>I observed that the method used by tensorflow is recomputer. Why use recomputer technology instead of swapping technology? Is recompute faster than swapping? or ?<br>\nIn the memory_optimizer.cc:1226, it has RecomputationRewritingPass function. After I close the function to test, i find that tensorflow has other block do same event.<br>\nWhy tensorflow has two block to do same event ?</p>\n<p>Thanks.</p>", "body_text": "System information\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nTensorFlow installed from (source or binary):source\nTensorFlow version (use command below):1.8.0\nPython version: 3.5\nBazel version (if compiling from source):0.10.0\nGCC/Compiler version (if compiling from source): c++11\nCUDA/cuDNN version: 9/7\nGPU model and memory: gtx 1080ti, 11G\nExact command to reproduce:N/A\nDescribe the problem:\nIn order to understand how much gpu memory resources tensorflow can economize, I did some experiments.\nMy network is vgg-16 and dataset is mnist, batch size is 128. i estimate my gpu memory usage is 2.8GB.\nI close  all the RewriterConfig like:\nrewrite_options.memory_optimization = rewriter_config_pb2.RewriterConfig.NO_MEM_OPT\nrewrite_options.layout_optimizer = rewriter_config_pb2.RewriterConfig.OFF\nrewrite_options.function_optimization = rewriter_config_pb2.RewriterConfig.OFF\nrewrite_options.constant_folding = rewriter_config_pb2.RewriterConfig.OFF\nrewrite_options.arithmetic_optimization = rewriter_config_pb2.RewriterConfig.OFF\nrewrite_options.loop_optimization = rewriter_config_pb2.RewriterConfig.OFF\nrewrite_options.dependency_optimization = rewriter_config_pb2.RewriterConfig.OFF\nAnd i gradually reduce the amount of gpu memory usage :\n\n\n\nGPU   memory usage\n2.883\n2.5\n2\n1.5\n1.307\n\n\n\n\naverage(iter   5000)\n337.161\n336.968\n339.018\n338.409\n412.119\n\n\naverage(iter   50000)\n3350.804\n3352.093\n3358.742\n3373.366\n4116.673\n\n\n\nI observed that the method used by tensorflow is recomputer. Why use recomputer technology instead of swapping technology? Is recompute faster than swapping? or ?\nIn the memory_optimizer.cc:1226, it has RecomputationRewritingPass function. After I close the function to test, i find that tensorflow has other block do same event.\nWhy tensorflow has two block to do same event ?\nThanks.", "body": "System information\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\nTensorFlow installed from (source or binary):source\r\nTensorFlow version (use command below):1.8.0\r\nPython version: 3.5\r\nBazel version (if compiling from source):0.10.0\r\nGCC/Compiler version (if compiling from source): c++11\r\nCUDA/cuDNN version: 9/7\r\nGPU model and memory: gtx 1080ti, 11G\r\nExact command to reproduce:N/A\r\nDescribe the problem:\r\n\r\nIn order to understand how much gpu memory resources tensorflow can economize, I did some experiments.\r\nMy network is vgg-16 and dataset is mnist, batch size is 128. i estimate my gpu memory usage is 2.8GB.\r\nI close  all the RewriterConfig like:\r\n  rewrite_options.memory_optimization = rewriter_config_pb2.RewriterConfig.NO_MEM_OPT\r\n  rewrite_options.layout_optimizer = rewriter_config_pb2.RewriterConfig.OFF\r\n  rewrite_options.function_optimization = rewriter_config_pb2.RewriterConfig.OFF\r\n  rewrite_options.constant_folding = rewriter_config_pb2.RewriterConfig.OFF\r\n  rewrite_options.arithmetic_optimization = rewriter_config_pb2.RewriterConfig.OFF\r\n  rewrite_options.loop_optimization = rewriter_config_pb2.RewriterConfig.OFF\r\n  rewrite_options.dependency_optimization = rewriter_config_pb2.RewriterConfig.OFF\r\nAnd i gradually reduce the amount of gpu memory usage :\r\n\r\nGPU   memory usage | 2.883 | 2.5 | 2 | 1.5 | 1.307\r\n-- | -- | -- | -- | -- | --\r\naverage(iter   5000) | 337.161 | 336.968 | 339.018 | 338.409 | 412.119\r\naverage(iter   50000) | 3350.804 | 3352.093 | 3358.742 | 3373.366 | 4116.673\r\n\r\nI observed that the method used by tensorflow is recomputer. Why use recomputer technology instead of swapping technology? Is recompute faster than swapping? or ?\r\nIn the memory_optimizer.cc:1226, it has RecomputationRewritingPass function. After I close the function to test, i find that tensorflow has other block do same event.\r\nWhy tensorflow has two block to do same event ?\r\n\r\nThanks.\r\n"}
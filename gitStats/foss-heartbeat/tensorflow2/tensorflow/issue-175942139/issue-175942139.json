{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4293", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4293/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4293/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4293/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4293", "id": 175942139, "node_id": "MDU6SXNzdWUxNzU5NDIxMzk=", "number": 4293, "title": "The train and test data of wide and deep example is broken", "user": {"login": "tobegit3hub", "id": 2715000, "node_id": "MDQ6VXNlcjI3MTUwMDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/2715000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tobegit3hub", "html_url": "https://github.com/tobegit3hub", "followers_url": "https://api.github.com/users/tobegit3hub/followers", "following_url": "https://api.github.com/users/tobegit3hub/following{/other_user}", "gists_url": "https://api.github.com/users/tobegit3hub/gists{/gist_id}", "starred_url": "https://api.github.com/users/tobegit3hub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tobegit3hub/subscriptions", "organizations_url": "https://api.github.com/users/tobegit3hub/orgs", "repos_url": "https://api.github.com/users/tobegit3hub/repos", "events_url": "https://api.github.com/users/tobegit3hub/events{/privacy}", "received_events_url": "https://api.github.com/users/tobegit3hub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-09-09T07:05:21Z", "updated_at": "2017-06-16T17:03:14Z", "closed_at": "2017-06-16T17:03:13Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Wide and deep example code will download train and test data from <code>https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data</code> and <code>https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.test</code>. But those files are broken now and you can <code>wget</code> to read the raw data.</p>\n<pre><code>|1x3 Cross validator\n25, Private, 226802, 11th, 7, Never-married, Machine-op-inspct, Own-child, Black, Male, 0, 0, 40, United-States, &lt;=50K.\n38, Private, 89814, HS-grad, 9, Married-civ-spouse, Farming-fishing, Husband, White, Male, 0, 0, 50, United-States, &lt;=50K.\n28, Local-gov, 336951, Assoc-acdm, 12, Married-civ-spouse, Protective-serv, Husband, White, Male, 0, 0, 40, United-States, &gt;50K.\n44, Private, 160323, Some-college, 10, Married-civ-spouse, Machine-op-inspct, Husband, Black, Male, 7688, 0, 40, United-States, &gt;50K.\n</code></pre>\n<p>If I modify the file and run with this command, it works. Maybe we should fix the raw dataset or change to other valid files.</p>\n<pre><code>python ./wide_n_deep_tutorial.py --train_data /home/data/train_data --test_data /home/data/test_data\n</code></pre>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>Someone has asked the similar question in stackoverflow, <a href=\"http://stackoverflow.com/questions/38558976/tensorflow-wide-deep-example-not-working\" rel=\"nofollow\">http://stackoverflow.com/questions/38558976/tensorflow-wide-deep-example-not-working</a> .</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04<br>\nTensorFlow: 0.9.0</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>Clone the tensorflow project and run <code>python wide_n_deep_tutorial.py</code> directly.</p>\n<h3>Logs or other output that would be helpful</h3>\n<pre><code># python ./wide_n_deep_tutorial.py\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\nTraining data is downloaded to /tmp/tmpUs2und\nTest data is downloaded to /tmp/tmp1aH4KY\nTraceback (most recent call last):\n  File \"./wide_n_deep_tutorial.py\", line 213, in &lt;module&gt;\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"./wide_n_deep_tutorial.py\", line 209, in main\n    train_and_eval()\n  File \"./wide_n_deep_tutorial.py\", line 194, in train_and_eval\n    df_train[\"income_bracket\"].apply(lambda x: \"&gt;50K\" in x)).astype(int)\n  File \"/usr/lib/python2.7/dist-packages/pandas/core/series.py\", line 2023, in apply\n    mapped = lib.map_infer(values, f, convert=convert_dtype)\n  File \"inference.pyx\", line 920, in pandas.lib.map_infer (pandas/lib.c:44780)\n  File \"./wide_n_deep_tutorial.py\", line 194, in &lt;lambda&gt;\n    df_train[\"income_bracket\"].apply(lambda x: \"&gt;50K\" in x)).astype(int)\nTypeError: argument of type 'float' is not iterable\n</code></pre>", "body_text": "Wide and deep example code will download train and test data from https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data and https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.test. But those files are broken now and you can wget to read the raw data.\n|1x3 Cross validator\n25, Private, 226802, 11th, 7, Never-married, Machine-op-inspct, Own-child, Black, Male, 0, 0, 40, United-States, <=50K.\n38, Private, 89814, HS-grad, 9, Married-civ-spouse, Farming-fishing, Husband, White, Male, 0, 0, 50, United-States, <=50K.\n28, Local-gov, 336951, Assoc-acdm, 12, Married-civ-spouse, Protective-serv, Husband, White, Male, 0, 0, 40, United-States, >50K.\n44, Private, 160323, Some-college, 10, Married-civ-spouse, Machine-op-inspct, Husband, Black, Male, 7688, 0, 40, United-States, >50K.\n\nIf I modify the file and run with this command, it works. Maybe we should fix the raw dataset or change to other valid files.\npython ./wide_n_deep_tutorial.py --train_data /home/data/train_data --test_data /home/data/test_data\n\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nSomeone has asked the similar question in stackoverflow, http://stackoverflow.com/questions/38558976/tensorflow-wide-deep-example-not-working .\nEnvironment info\nOperating System: Ubuntu 14.04\nTensorFlow: 0.9.0\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nClone the tensorflow project and run python wide_n_deep_tutorial.py directly.\nLogs or other output that would be helpful\n# python ./wide_n_deep_tutorial.py\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\nTraining data is downloaded to /tmp/tmpUs2und\nTest data is downloaded to /tmp/tmp1aH4KY\nTraceback (most recent call last):\n  File \"./wide_n_deep_tutorial.py\", line 213, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"./wide_n_deep_tutorial.py\", line 209, in main\n    train_and_eval()\n  File \"./wide_n_deep_tutorial.py\", line 194, in train_and_eval\n    df_train[\"income_bracket\"].apply(lambda x: \">50K\" in x)).astype(int)\n  File \"/usr/lib/python2.7/dist-packages/pandas/core/series.py\", line 2023, in apply\n    mapped = lib.map_infer(values, f, convert=convert_dtype)\n  File \"inference.pyx\", line 920, in pandas.lib.map_infer (pandas/lib.c:44780)\n  File \"./wide_n_deep_tutorial.py\", line 194, in <lambda>\n    df_train[\"income_bracket\"].apply(lambda x: \">50K\" in x)).astype(int)\nTypeError: argument of type 'float' is not iterable", "body": "Wide and deep example code will download train and test data from `https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data` and `https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.test`. But those files are broken now and you can `wget` to read the raw data.\n\n```\n|1x3 Cross validator\n25, Private, 226802, 11th, 7, Never-married, Machine-op-inspct, Own-child, Black, Male, 0, 0, 40, United-States, <=50K.\n38, Private, 89814, HS-grad, 9, Married-civ-spouse, Farming-fishing, Husband, White, Male, 0, 0, 50, United-States, <=50K.\n28, Local-gov, 336951, Assoc-acdm, 12, Married-civ-spouse, Protective-serv, Husband, White, Male, 0, 0, 40, United-States, >50K.\n44, Private, 160323, Some-college, 10, Married-civ-spouse, Machine-op-inspct, Husband, Black, Male, 7688, 0, 40, United-States, >50K.\n```\n\nIf I modify the file and run with this command, it works. Maybe we should fix the raw dataset or change to other valid files.\n\n```\npython ./wide_n_deep_tutorial.py --train_data /home/data/train_data --test_data /home/data/test_data\n```\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nSomeone has asked the similar question in stackoverflow, http://stackoverflow.com/questions/38558976/tensorflow-wide-deep-example-not-working .\n### Environment info\n\nOperating System: Ubuntu 14.04\nTensorFlow: 0.9.0\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n\nClone the tensorflow project and run `python wide_n_deep_tutorial.py` directly.\n### Logs or other output that would be helpful\n\n```\n# python ./wide_n_deep_tutorial.py\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\nTraining data is downloaded to /tmp/tmpUs2und\nTest data is downloaded to /tmp/tmp1aH4KY\nTraceback (most recent call last):\n  File \"./wide_n_deep_tutorial.py\", line 213, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"./wide_n_deep_tutorial.py\", line 209, in main\n    train_and_eval()\n  File \"./wide_n_deep_tutorial.py\", line 194, in train_and_eval\n    df_train[\"income_bracket\"].apply(lambda x: \">50K\" in x)).astype(int)\n  File \"/usr/lib/python2.7/dist-packages/pandas/core/series.py\", line 2023, in apply\n    mapped = lib.map_infer(values, f, convert=convert_dtype)\n  File \"inference.pyx\", line 920, in pandas.lib.map_infer (pandas/lib.c:44780)\n  File \"./wide_n_deep_tutorial.py\", line 194, in <lambda>\n    df_train[\"income_bracket\"].apply(lambda x: \">50K\" in x)).astype(int)\nTypeError: argument of type 'float' is not iterable\n```\n"}
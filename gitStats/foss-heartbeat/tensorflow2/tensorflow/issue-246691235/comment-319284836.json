{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/319284836", "html_url": "https://github.com/tensorflow/tensorflow/issues/11902#issuecomment-319284836", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11902", "id": 319284836, "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTI4NDgzNg==", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-01T06:55:51Z", "updated_at": "2017-08-01T07:32:13Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I was discussing about this test failure on power porting mailing list (<a href=\"mailto:power-port-tune@lists.linux.ibm.com\">power-port-tune@lists.linux.ibm.com</a>) , see below-</p>\n<blockquote>\n<p>Hi,</p>\n<p>I am trying to port the TensorFlow code to Power, I'm looking at<br>\nsome code which uses certain Intel intrinsics and want to know if<br>\nthere are equivalent Power equivalents</p>\n<p>The code I'm trying to port uses these intrinsics:</p>\n<p>_MM_GET_FLUSH_ZERO_MODE<br>\n_MM_GET_DENORMALS_ZERO_MODE<br>\n_MM_SET_FLUSH_ZERO_MODE<br>\n_MM_SET_DENORMALS_ZERO_MODE<br>\n_MM_SET_FLUSH_ZERO_MODE</p>\n<p>Would there be corresponding intrinsics on Power?</p>\n<p>Just for reference, the functions I'm trying to port are these :<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/core/platform/denormal.cc#L43-L73\">https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/core/platform/denormal.cc#L43-L73</a><br>\n(ScopedFlushDenormal::ScopedFlushDenormal() andScopedFlushDenormal::~ScopedFlushDenormal() )</p>\n<p>Any suggestions would help!</p>\n<p>Thanks!<br>\nSandip__</p>\n</blockquote>\n<p>And I got following reply -</p>\n<p>This is not an intrinsic, it is mode and a nonstandard (not IEEE754 conforming) one at that.</p>\n<p>Some embedded machines perform slight better in this mode, but POWER servers do not. So for POWER you do not need this and should simply disable it.</p>\n<p>// For now, we flush denormals only on SSE 3. Other architectures such as ARM</p>\n<p>// can be added as needed.</p>\n<p>#ifdef DENORM_USE_INTRINSICS</p>\n<p>So find out where DENORM_USE_INTRINSICS is #define and #undef it.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20959853\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/drpngx\">@drpngx</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7946809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gunan\">@gunan</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=70511\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/girving\">@girving</a>  <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a>   -  Is it OK to disable or don't execute this test on power ?</p>", "body_text": "I was discussing about this test failure on power porting mailing list (power-port-tune@lists.linux.ibm.com) , see below-\n\nHi,\nI am trying to port the TensorFlow code to Power, I'm looking at\nsome code which uses certain Intel intrinsics and want to know if\nthere are equivalent Power equivalents\nThe code I'm trying to port uses these intrinsics:\n_MM_GET_FLUSH_ZERO_MODE\n_MM_GET_DENORMALS_ZERO_MODE\n_MM_SET_FLUSH_ZERO_MODE\n_MM_SET_DENORMALS_ZERO_MODE\n_MM_SET_FLUSH_ZERO_MODE\nWould there be corresponding intrinsics on Power?\nJust for reference, the functions I'm trying to port are these :\nhttps://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/core/platform/denormal.cc#L43-L73\n(ScopedFlushDenormal::ScopedFlushDenormal() andScopedFlushDenormal::~ScopedFlushDenormal() )\nAny suggestions would help!\nThanks!\nSandip__\n\nAnd I got following reply -\nThis is not an intrinsic, it is mode and a nonstandard (not IEEE754 conforming) one at that.\nSome embedded machines perform slight better in this mode, but POWER servers do not. So for POWER you do not need this and should simply disable it.\n// For now, we flush denormals only on SSE 3. Other architectures such as ARM\n// can be added as needed.\n#ifdef DENORM_USE_INTRINSICS\nSo find out where DENORM_USE_INTRINSICS is #define and #undef it.\n@drpngx @gunan @girving  @mrry   -  Is it OK to disable or don't execute this test on power ?", "body": "I was discussing about this test failure on power porting mailing list (power-port-tune@lists.linux.ibm.com) , see below- \r\n> Hi,\r\n> \r\n> I am trying to port the TensorFlow code to Power, I'm looking at \r\n> some code which uses certain Intel intrinsics and want to know if \r\n> there are equivalent Power equivalents \r\n> \r\n> The code I'm trying to port uses these intrinsics:\r\n> \r\n> _MM_GET_FLUSH_ZERO_MODE\r\n> _MM_GET_DENORMALS_ZERO_MODE\r\n> _MM_SET_FLUSH_ZERO_MODE \r\n> _MM_SET_DENORMALS_ZERO_MODE\r\n> _MM_SET_FLUSH_ZERO_MODE \r\n> \r\n> Would there be corresponding intrinsics on Power? \r\n> \r\n> Just for reference, the functions I'm trying to port are these : \r\n> https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/core/platform/denormal.cc#L43-L73 \r\n> (ScopedFlushDenormal::ScopedFlushDenormal() andScopedFlushDenormal::~ScopedFlushDenormal() )\r\n> \r\n> Any suggestions would help!\r\n> \r\n> Thanks!\r\n> Sandip__\r\n\r\nAnd I got following reply - \r\n\r\nThis is not an intrinsic, it is mode and a nonstandard (not IEEE754 conforming) one at that. \r\n\r\nSome embedded machines perform slight better in this mode, but POWER servers do not. So for POWER you do not need this and should simply disable it.\r\n\r\n// For now, we flush denormals only on SSE 3. Other architectures such as ARM\r\n\r\n\\// can be added as needed.\r\n\r\n#ifdef DENORM_USE_INTRINSICS \r\n\r\nSo find out where DENORM_USE_INTRINSICS is #define and #undef it.\r\n\r\n@drpngx @gunan @girving  @mrry   -  Is it OK to disable or don't execute this test on power ?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11902", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11902/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11902/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11902/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11902", "id": 246691235, "node_id": "MDU6SXNzdWUyNDY2OTEyMzU=", "number": 11902, "title": "//tensorflow/python/kernel_tests:denormal_test test failure on ppc64le (error : Arrays are not equal)", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-07-31T09:08:29Z", "updated_at": "2017-08-09T03:27:11Z", "closed_at": "2017-08-09T03:27:10Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 16.04 (ppc64le)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nInstalled from source</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n('v1.2.1-0-gb4957ff', '1.2.1')</li>\n<li><strong>Python version</strong>:<br>\nPython 2.7.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.4.5-2017-07-13 (@037b9b9)</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nNA</li>\n<li><strong>GPU model and memory</strong>:<br>\nNA</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nbazel test --test_output=errors //tensorflow/python/kernel_tests:denormal_test</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Following code returning incorrect results -<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/python/kernel_tests/denormal_test.py#L36-L44\">https://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/python/kernel_tests/denormal_test.py#L36-L44</a></p>\n<pre><code>def _flushDenormalsTest(self, use_gpu, dtypes):\n    with self.test_session(use_gpu=use_gpu):\n      array_ops.identity(7).eval()\n      for dtype in dtypes:\n        tiny = np.finfo(dtype).tiny\n        # Small shape to test main thread, large shape to test thread pool\n        for shape in (), (1 &lt;&lt; 20,):\n          flush = 0.1 * constant_op.constant(tiny, shape=shape)\n          self.assertAllEqual(flush.eval(), np.zeros(shape))\n</code></pre>\n<p>I have printed the values of <code>flush.eval() </code>and <code>np.zeros(shape)</code> , see below :<br>\n<code>flush.eval()</code> o/p =  <code>1.17549463108e-39</code><br>\n<code>np.zeros(shape)</code> o/p = <code>0.0</code></p>\n<p>Getting failure <code>1.17549463108e-39</code> vs expected <code>0.0</code>.  I am not able to understand why we are getting flush.eval() o/p <code>1.17549463108e-39</code>  and not  <code>0.0</code>.  But I tried changing the  comparison function from assertAllEqual to assertAllClose and test is passing successfully. Is it OK to merge this changes or ? I would like to hear comment on this.Thanks!</p>\n<p>This test passing successfully in TF1.0.1 without any changes, see relevant code :<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/python/kernel_tests/denormal_test.py#L31-L48\">https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/python/kernel_tests/denormal_test.py#L31-L48</a></p>\n<pre><code> def testPythonHasDenormals(self):\n    \"\"\"Non-tf numpy code should treat denormals correctly.\"\"\"\n    for dtype in np.float32, np.float64:\n      tiny = np.finfo(dtype).tiny\n      self.assertEqual(tiny, tiny / 16 * 16)\n\n  def _flushDenormalsTest(self, use_gpu, dtypes):\n    if control_imports.USE_OSS:\n      # TODO(irving): Fix denormal flushing for open source.\n      return\n    with self.test_session(use_gpu=use_gpu):\n      array_ops.identity(7).eval()\n      for dtype in dtypes:\n        tiny = np.finfo(dtype).tiny\n        # Small shape to test main thread, large shape to test thread pool\n        for shape in (), (1 &lt;&lt; 20,):\n          flush = 0.1 * constant_op.constant(tiny, shape=shape)\n          self.assertAllEqual(flush.eval(), np.zeros(shape))\n</code></pre>\n<p>Looks like this test is disabled in TF1.0.1</p>\n<h3>Source code / logs</h3>\n<pre><code>$ bazel test --test_output=errors //tensorflow/python/kernel_tests:denormal_test\n\n==================== Test output for //tensorflow/python/kernel_tests:denormal_test:\n2017-07-31 08:45:48.796363: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 8 visible devices\n2017-07-31 08:45:48.798909: I tensorflow/compiler/xla/service/service.cc:198] XLA service 0x100386c7120 executing computations on platform Host. Devices:\n2017-07-31 08:45:48.798936: I tensorflow/compiler/xla/service/service.cc:206]   StreamExecutor device (0): &lt;undefined&gt;, &lt;undefined&gt;\nFF..\n======================================================================\nFAIL: testFlushDenormalsCPU (__main__.DenormalTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 50, in testFlushDenormalsCPU\n    self._flushDenormalsTest(use_gpu=False, dtypes=(np.float32, np.float64))\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 44, in _flushDenormalsTest\n    self.assertAllEqual(flush.eval(), np.zeros(shape))\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 699, in assertAllEqual\n    np.testing.assert_array_equal(a, b)\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 871, in assert_array_equal\n    verbose=verbose, header='Arrays are not equal')\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 796, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError:\nArrays are not equal\n\n(mismatch 100.0%)\n x: array(1.1754946310819804e-39, dtype=float32)\n y: array(0.0)\n\n======================================================================\nFAIL: testFlushDenormalsGPU (__main__.DenormalTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 54, in testFlushDenormalsGPU\n    self._flushDenormalsTest(use_gpu=True, dtypes=(np.float32,))\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 44, in _flushDenormalsTest\n    self.assertAllEqual(flush.eval(), np.zeros(shape))\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 699, in assertAllEqual\n    np.testing.assert_array_equal(a, b)\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 871, in assert_array_equal\n    verbose=verbose, header='Arrays are not equal')\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 796, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError:\nArrays are not equal\n\n(mismatch 100.0%)\n x: array(1.1754946310819804e-39, dtype=float32)\n y: array(0.0)\n\n----------------------------------------------------------------------\nRan 4 tests in 0.071s\n\nFAILED (failures=2)\nnot equal lhs =  1.17549463108e-39\nnot equal rhs =  0.0\nnot equal lhs =  1.17549463108e-39\nnot equal rhs =  0.0\n\n</code></pre>", "body_text": "System information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04 (ppc64le)\nTensorFlow installed from (source or binary):\nInstalled from source\nTensorFlow version (use command below):\n('v1.2.1-0-gb4957ff', '1.2.1')\nPython version:\nPython 2.7.5\nBazel version (if compiling from source):\n0.4.5-2017-07-13 (@037b9b9)\nCUDA/cuDNN version:\nNA\nGPU model and memory:\nNA\nExact command to reproduce:\nbazel test --test_output=errors //tensorflow/python/kernel_tests:denormal_test\n\nDescribe the problem\nFollowing code returning incorrect results -\nhttps://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/python/kernel_tests/denormal_test.py#L36-L44\ndef _flushDenormalsTest(self, use_gpu, dtypes):\n    with self.test_session(use_gpu=use_gpu):\n      array_ops.identity(7).eval()\n      for dtype in dtypes:\n        tiny = np.finfo(dtype).tiny\n        # Small shape to test main thread, large shape to test thread pool\n        for shape in (), (1 << 20,):\n          flush = 0.1 * constant_op.constant(tiny, shape=shape)\n          self.assertAllEqual(flush.eval(), np.zeros(shape))\n\nI have printed the values of flush.eval() and np.zeros(shape) , see below :\nflush.eval() o/p =  1.17549463108e-39\nnp.zeros(shape) o/p = 0.0\nGetting failure 1.17549463108e-39 vs expected 0.0.  I am not able to understand why we are getting flush.eval() o/p 1.17549463108e-39  and not  0.0.  But I tried changing the  comparison function from assertAllEqual to assertAllClose and test is passing successfully. Is it OK to merge this changes or ? I would like to hear comment on this.Thanks!\nThis test passing successfully in TF1.0.1 without any changes, see relevant code :\nhttps://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/python/kernel_tests/denormal_test.py#L31-L48\n def testPythonHasDenormals(self):\n    \"\"\"Non-tf numpy code should treat denormals correctly.\"\"\"\n    for dtype in np.float32, np.float64:\n      tiny = np.finfo(dtype).tiny\n      self.assertEqual(tiny, tiny / 16 * 16)\n\n  def _flushDenormalsTest(self, use_gpu, dtypes):\n    if control_imports.USE_OSS:\n      # TODO(irving): Fix denormal flushing for open source.\n      return\n    with self.test_session(use_gpu=use_gpu):\n      array_ops.identity(7).eval()\n      for dtype in dtypes:\n        tiny = np.finfo(dtype).tiny\n        # Small shape to test main thread, large shape to test thread pool\n        for shape in (), (1 << 20,):\n          flush = 0.1 * constant_op.constant(tiny, shape=shape)\n          self.assertAllEqual(flush.eval(), np.zeros(shape))\n\nLooks like this test is disabled in TF1.0.1\nSource code / logs\n$ bazel test --test_output=errors //tensorflow/python/kernel_tests:denormal_test\n\n==================== Test output for //tensorflow/python/kernel_tests:denormal_test:\n2017-07-31 08:45:48.796363: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 8 visible devices\n2017-07-31 08:45:48.798909: I tensorflow/compiler/xla/service/service.cc:198] XLA service 0x100386c7120 executing computations on platform Host. Devices:\n2017-07-31 08:45:48.798936: I tensorflow/compiler/xla/service/service.cc:206]   StreamExecutor device (0): <undefined>, <undefined>\nFF..\n======================================================================\nFAIL: testFlushDenormalsCPU (__main__.DenormalTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 50, in testFlushDenormalsCPU\n    self._flushDenormalsTest(use_gpu=False, dtypes=(np.float32, np.float64))\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 44, in _flushDenormalsTest\n    self.assertAllEqual(flush.eval(), np.zeros(shape))\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 699, in assertAllEqual\n    np.testing.assert_array_equal(a, b)\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 871, in assert_array_equal\n    verbose=verbose, header='Arrays are not equal')\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 796, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError:\nArrays are not equal\n\n(mismatch 100.0%)\n x: array(1.1754946310819804e-39, dtype=float32)\n y: array(0.0)\n\n======================================================================\nFAIL: testFlushDenormalsGPU (__main__.DenormalTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 54, in testFlushDenormalsGPU\n    self._flushDenormalsTest(use_gpu=True, dtypes=(np.float32,))\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 44, in _flushDenormalsTest\n    self.assertAllEqual(flush.eval(), np.zeros(shape))\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 699, in assertAllEqual\n    np.testing.assert_array_equal(a, b)\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 871, in assert_array_equal\n    verbose=verbose, header='Arrays are not equal')\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 796, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError:\nArrays are not equal\n\n(mismatch 100.0%)\n x: array(1.1754946310819804e-39, dtype=float32)\n y: array(0.0)\n\n----------------------------------------------------------------------\nRan 4 tests in 0.071s\n\nFAILED (failures=2)\nnot equal lhs =  1.17549463108e-39\nnot equal rhs =  0.0\nnot equal lhs =  1.17549463108e-39\nnot equal rhs =  0.0", "body": "### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n    Ubuntu 16.04 (ppc64le)\r\n- **TensorFlow installed from (source or binary)**:\r\n     Installed from source\r\n- **TensorFlow version (use command below)**:\r\n    ('v1.2.1-0-gb4957ff', '1.2.1')\r\n- **Python version**: \r\n     Python 2.7.5\r\n- **Bazel version (if compiling from source)**:\r\n      0.4.5-2017-07-13 (@037b9b9)\r\n- **CUDA/cuDNN version**:\r\n     NA\r\n- **GPU model and memory**:\r\n      NA\r\n- **Exact command to reproduce**:\r\nbazel test --test_output=errors //tensorflow/python/kernel_tests:denormal_test\r\n\r\n\r\n### Describe the problem\r\nFollowing code returning incorrect results -\r\nhttps://github.com/tensorflow/tensorflow/blob/v1.2.1/tensorflow/python/kernel_tests/denormal_test.py#L36-L44\r\n\r\n```\r\ndef _flushDenormalsTest(self, use_gpu, dtypes):\r\n    with self.test_session(use_gpu=use_gpu):\r\n      array_ops.identity(7).eval()\r\n      for dtype in dtypes:\r\n        tiny = np.finfo(dtype).tiny\r\n        # Small shape to test main thread, large shape to test thread pool\r\n        for shape in (), (1 << 20,):\r\n          flush = 0.1 * constant_op.constant(tiny, shape=shape)\r\n          self.assertAllEqual(flush.eval(), np.zeros(shape))\r\n```\r\n\r\nI have printed the values of `flush.eval() `and `np.zeros(shape)` , see below :\r\n`flush.eval()` o/p =  `1.17549463108e-39`\r\n`np.zeros(shape)` o/p = `0.0`\r\n\r\nGetting failure `1.17549463108e-39` vs expected `0.0`.  I am not able to understand why we are getting flush.eval() o/p `1.17549463108e-39`  and not  `0.0`.  But I tried changing the  comparison function from assertAllEqual to assertAllClose and test is passing successfully. Is it OK to merge this changes or ? I would like to hear comment on this.Thanks!\r\n\r\nThis test passing successfully in TF1.0.1 without any changes, see relevant code : \r\nhttps://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/python/kernel_tests/denormal_test.py#L31-L48\r\n\r\n```\r\n def testPythonHasDenormals(self):\r\n    \"\"\"Non-tf numpy code should treat denormals correctly.\"\"\"\r\n    for dtype in np.float32, np.float64:\r\n      tiny = np.finfo(dtype).tiny\r\n      self.assertEqual(tiny, tiny / 16 * 16)\r\n\r\n  def _flushDenormalsTest(self, use_gpu, dtypes):\r\n    if control_imports.USE_OSS:\r\n      # TODO(irving): Fix denormal flushing for open source.\r\n      return\r\n    with self.test_session(use_gpu=use_gpu):\r\n      array_ops.identity(7).eval()\r\n      for dtype in dtypes:\r\n        tiny = np.finfo(dtype).tiny\r\n        # Small shape to test main thread, large shape to test thread pool\r\n        for shape in (), (1 << 20,):\r\n          flush = 0.1 * constant_op.constant(tiny, shape=shape)\r\n          self.assertAllEqual(flush.eval(), np.zeros(shape))\r\n```\r\nLooks like this test is disabled in TF1.0.1\r\n\r\n### Source code / logs\r\n```\r\n$ bazel test --test_output=errors //tensorflow/python/kernel_tests:denormal_test\r\n\r\n==================== Test output for //tensorflow/python/kernel_tests:denormal_test:\r\n2017-07-31 08:45:48.796363: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 8 visible devices\r\n2017-07-31 08:45:48.798909: I tensorflow/compiler/xla/service/service.cc:198] XLA service 0x100386c7120 executing computations on platform Host. Devices:\r\n2017-07-31 08:45:48.798936: I tensorflow/compiler/xla/service/service.cc:206]   StreamExecutor device (0): <undefined>, <undefined>\r\nFF..\r\n======================================================================\r\nFAIL: testFlushDenormalsCPU (__main__.DenormalTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 50, in testFlushDenormalsCPU\r\n    self._flushDenormalsTest(use_gpu=False, dtypes=(np.float32, np.float64))\r\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 44, in _flushDenormalsTest\r\n    self.assertAllEqual(flush.eval(), np.zeros(shape))\r\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 699, in assertAllEqual\r\n    np.testing.assert_array_equal(a, b)\r\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 871, in assert_array_equal\r\n    verbose=verbose, header='Arrays are not equal')\r\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 796, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError:\r\nArrays are not equal\r\n\r\n(mismatch 100.0%)\r\n x: array(1.1754946310819804e-39, dtype=float32)\r\n y: array(0.0)\r\n\r\n======================================================================\r\nFAIL: testFlushDenormalsGPU (__main__.DenormalTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 54, in testFlushDenormalsGPU\r\n    self._flushDenormalsTest(use_gpu=True, dtypes=(np.float32,))\r\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/denormal_test.py\", line 44, in _flushDenormalsTest\r\n    self.assertAllEqual(flush.eval(), np.zeros(shape))\r\n  File \"/root/.cache/bazel/_bazel_root/725e77151072daec43bc353cb6fcb26c/execroot/tensorflow/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/denormal_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 699, in assertAllEqual\r\n    np.testing.assert_array_equal(a, b)\r\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 871, in assert_array_equal\r\n    verbose=verbose, header='Arrays are not equal')\r\n  File \"/usr/lib64/python2.7/site-packages/numpy/testing/utils.py\", line 796, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError:\r\nArrays are not equal\r\n\r\n(mismatch 100.0%)\r\n x: array(1.1754946310819804e-39, dtype=float32)\r\n y: array(0.0)\r\n\r\n----------------------------------------------------------------------\r\nRan 4 tests in 0.071s\r\n\r\nFAILED (failures=2)\r\nnot equal lhs =  1.17549463108e-39\r\nnot equal rhs =  0.0\r\nnot equal lhs =  1.17549463108e-39\r\nnot equal rhs =  0.0\r\n\r\n```"}
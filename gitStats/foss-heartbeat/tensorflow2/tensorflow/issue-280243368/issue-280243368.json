{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15190", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15190/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15190/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15190/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15190", "id": 280243368, "node_id": "MDU6SXNzdWUyODAyNDMzNjg=", "number": 15190, "title": "S3 reads eventually fail with tensorflow's dataset API", "user": {"login": "thunterdb", "id": 7594753, "node_id": "MDQ6VXNlcjc1OTQ3NTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/7594753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thunterdb", "html_url": "https://github.com/thunterdb", "followers_url": "https://api.github.com/users/thunterdb/followers", "following_url": "https://api.github.com/users/thunterdb/following{/other_user}", "gists_url": "https://api.github.com/users/thunterdb/gists{/gist_id}", "starred_url": "https://api.github.com/users/thunterdb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thunterdb/subscriptions", "organizations_url": "https://api.github.com/users/thunterdb/orgs", "repos_url": "https://api.github.com/users/thunterdb/repos", "events_url": "https://api.github.com/users/thunterdb/events{/privacy}", "received_events_url": "https://api.github.com/users/thunterdb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2017-12-07T19:07:40Z", "updated_at": "2017-12-13T02:18:21Z", "closed_at": "2017-12-13T01:32:46Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04.3 LTS</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: v1.4.0-rc1-11-g130a514</li>\n<li><strong>Python version</strong>: Python 2.7.12</li>\n<li><strong>Bazel version (if compiling from source)</strong>: N/A</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: N/A</li>\n<li><strong>CUDA/cuDNN version</strong>: CPU</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>: <a href=\"https://gist.github.com/thunterdb/d5f86c79457eea0f1021117ea4bce0ba\">https://gist.github.com/thunterdb/d5f86c79457eea0f1021117ea4bce0ba</a></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>The given script reads the MNIST data from S3 repeatedly from a public bucket, on an EC2 machine in the same region as the S3 bucket.</p>\n<p>Running this script eventually leads to python crashing after a few hours, and the following error:</p>\n<pre><code>Finished step 31890, time: 05:45:28 12/07/17, result: 32\nFinished step 31920, time: 05:46:01 12/07/17, result: 32\nterminate called after throwing an instance of 'std::system_error'\n  what():  Resource temporarily unavailable\nAborted\n</code></pre>\n<h3>Source code / logs</h3>\n<p><a href=\"https://gist.github.com/thunterdb/d5f86c79457eea0f1021117ea4bce0ba\">https://gist.github.com/thunterdb/d5f86c79457eea0f1021117ea4bce0ba</a></p>\n<p>It is hard to say what is happening without debugging symbols. From the very generic error, I suspect this is an issue with the S3 SDK. As a workaround, it would be nice for tensorflow's S3 plugin to retry or be more resilient to networking issues.</p>\n<p>It is currently an annoying issue when running large distributed training jobs, because they crash after a few hours of reading data. Is anyone having a similar experience with S3?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04.3 LTS\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): v1.4.0-rc1-11-g130a514\nPython version: Python 2.7.12\nBazel version (if compiling from source): N/A\nGCC/Compiler version (if compiling from source): N/A\nCUDA/cuDNN version: CPU\nGPU model and memory: N/A\nExact command to reproduce: https://gist.github.com/thunterdb/d5f86c79457eea0f1021117ea4bce0ba\n\nDescribe the problem\nThe given script reads the MNIST data from S3 repeatedly from a public bucket, on an EC2 machine in the same region as the S3 bucket.\nRunning this script eventually leads to python crashing after a few hours, and the following error:\nFinished step 31890, time: 05:45:28 12/07/17, result: 32\nFinished step 31920, time: 05:46:01 12/07/17, result: 32\nterminate called after throwing an instance of 'std::system_error'\n  what():  Resource temporarily unavailable\nAborted\n\nSource code / logs\nhttps://gist.github.com/thunterdb/d5f86c79457eea0f1021117ea4bce0ba\nIt is hard to say what is happening without debugging symbols. From the very generic error, I suspect this is an issue with the S3 SDK. As a workaround, it would be nice for tensorflow's S3 plugin to retry or be more resilient to networking issues.\nIt is currently an annoying issue when running large distributed training jobs, because they crash after a few hours of reading data. Is anyone having a similar experience with S3?", "body": "\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04.3 LTS\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: v1.4.0-rc1-11-g130a514\r\n- **Python version**: Python 2.7.12\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: CPU\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: https://gist.github.com/thunterdb/d5f86c79457eea0f1021117ea4bce0ba\r\n\r\n### Describe the problem\r\nThe given script reads the MNIST data from S3 repeatedly from a public bucket, on an EC2 machine in the same region as the S3 bucket.\r\n\r\nRunning this script eventually leads to python crashing after a few hours, and the following error:\r\n\r\n```\r\nFinished step 31890, time: 05:45:28 12/07/17, result: 32\r\nFinished step 31920, time: 05:46:01 12/07/17, result: 32\r\nterminate called after throwing an instance of 'std::system_error'\r\n  what():  Resource temporarily unavailable\r\nAborted\r\n```\r\n\r\n### Source code / logs\r\nhttps://gist.github.com/thunterdb/d5f86c79457eea0f1021117ea4bce0ba\r\n\r\nIt is hard to say what is happening without debugging symbols. From the very generic error, I suspect this is an issue with the S3 SDK. As a workaround, it would be nice for tensorflow's S3 plugin to retry or be more resilient to networking issues.\r\n\r\nIt is currently an annoying issue when running large distributed training jobs, because they crash after a few hours of reading data. Is anyone having a similar experience with S3?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/112804137", "pull_request_review_id": 34151761, "id": 112804137, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjgwNDEzNw==", "diff_hunk": "@@ -423,5 +423,72 @@ def testConsistent(self):\n       self.assertAllEqual(tf_result, expanded_nums)\n \n \n+class PartialReduceTest(test_util.TensorFlowTestCase):\n+\n+  def testPartialSum(self):\n+    x = np.array([[1, 2, 3], [40, 50, 60], [700,800,900]], dtype=np.int32)\n+    indices = np.array([[0, 1], [0, 3], [1, 2], [1, 3], [0,2]], dtype=np.int32)\n+    result = np.array([[1, 2, 3], [741, 852, 963], [40, 50, 60], [740, 850, 960], [41, 52, 63]], dtype=np.int32)\n+    with self.test_session(use_gpu=True):\n+      y_tf = math_ops.partial_sum(x,indices).eval()\n+      self.assertAllEqual(y_tf, result)\n+\n+  def testPartialSum1D(self):\n+    x = np.array([1, 40, 700], dtype=np.int32)\n+    indices = np.array([[0, 1], [0, 3], [1, 2], [1, 3], [0,2]], dtype=np.int32)\n+    result = np.array([1, 741, 40, 740, 41], dtype=np.int32)\n+    with self.test_session(use_gpu=True):\n+      y_tf = math_ops.partial_sum(x,indices).eval()\n+      self.assertAllEqual(y_tf, result)\n+\n+  def testPartialProd(self):\n+    x = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]], dtype=np.int32)\n+    indices = np.array([[0, 1], [0, 3], [1, 2], [1, 3], [0,2]], dtype=np.int32)\n+    result = np.array([[1, 2, 3], [28, 80, 162], [4, 5, 6], [28, 40, 54], [4, 10, 18]], dtype=np.int32)\n+    with self.test_session(use_gpu=True):\n+      y_tf = math_ops.partial_prod(x,indices).eval()\n+      self.assertAllEqual(y_tf, result)\n+\n+  def testPartialMax(self):\n+    x = np.array([[1, 2, 3], [4, 5, 6], [7,8,9]], dtype=np.int32)\n+    indices = np.array([[0, 1], [0, 3], [1, 2], [1, 3], [0,2]], dtype=np.int32)\n+    result = np.array([[1, 2, 3], [7,8,9], [4, 5, 6], [7, 8, 9], [4, 5, 6]], dtype=np.int32)\n+    with self.test_session(use_gpu=True):\n+      y_tf = math_ops.partial_max(x,indices).eval()\n+      self.assertAllEqual(y_tf, result)\n+\n+  def testPartialMin(self):\n+    x = np.array([[1, 2, 3], [4, 5, 6], [7,8,9]], dtype=np.int32)\n+    indices = np.array([[0, 1], [0, 3], [1, 2], [1, 3], [0,2]], dtype=np.int32)\n+    result = np.array([[1, 2, 3], [1, 2, 3], [4, 5, 6], [4, 5, 6], [1, 2, 3]], dtype=np.int32)\n+    with self.test_session(use_gpu=True):\n+      y_tf = math_ops.partial_min(x,indices).eval()\n+      self.assertAllEqual(y_tf, result)\n+\n+  def testPartialReduceEmptyDataRows(self):", "path": "tensorflow/python/ops/math_ops_test.py", "position": null, "original_position": 46, "commit_id": "686d7fffa42ca0e78268fa2b94ca480da2f22368", "original_commit_id": "5e34a4fccdd28af7f89a2840b0a8731bfcd86787", "user": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "body": "thanks for testing this case.", "created_at": "2017-04-22T06:45:21Z", "updated_at": "2017-08-10T00:09:10Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/9063#discussion_r112804137", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/9063", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/112804137"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/9063#discussion_r112804137"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/9063"}}, "body_html": "<p>thanks for testing this case.</p>", "body_text": "thanks for testing this case."}
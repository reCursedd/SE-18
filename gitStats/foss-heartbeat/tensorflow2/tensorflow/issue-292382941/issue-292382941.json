{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16539", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16539/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16539/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16539/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16539", "id": 292382941, "node_id": "MDU6SXNzdWUyOTIzODI5NDE=", "number": 16539, "title": "How to use tensorflow library in c programs??", "user": {"login": "yunyin", "id": 9065977, "node_id": "MDQ6VXNlcjkwNjU5Nzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/9065977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yunyin", "html_url": "https://github.com/yunyin", "followers_url": "https://api.github.com/users/yunyin/followers", "following_url": "https://api.github.com/users/yunyin/following{/other_user}", "gists_url": "https://api.github.com/users/yunyin/gists{/gist_id}", "starred_url": "https://api.github.com/users/yunyin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yunyin/subscriptions", "organizations_url": "https://api.github.com/users/yunyin/orgs", "repos_url": "https://api.github.com/users/yunyin/repos", "events_url": "https://api.github.com/users/yunyin/events{/privacy}", "received_events_url": "https://api.github.com/users/yunyin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-29T12:06:26Z", "updated_at": "2018-02-07T00:20:10Z", "closed_at": "2018-02-07T00:20:10Z", "author_association": "NONE", "body_html": "<p>I build shared libraries in tensorflow-serving with bazel.<br>\nHowever, I can not build C programs with the shared libraries.</p>\n<p>I build C programs like this:<br>\ng++ main.cc -L../../bazel-bin/tensorflow_serving/rnnlm -lrnnlm_client_run -ldata_generator</p>\n<p>Details is shown below:</p>\n<p>../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::serving::PredictionService::Stub::Predict(grpc::Cli entContext*, tensorflow::serving::PredictRequest const&amp;, tensorflow::serving::PredictResponse*)' 12 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>google::protobuf::internal::fixed_address_empty_string'<br>\n13 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::Tensor::CheckTypeAndIsAligned(tensorflow::DataType) const' 14 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>tensorflow::serving::PredictRequest::_slow_mutable_model_spec()<br>\n'<br>\n15 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::Tensor::FromProto(tensorflow::TensorProto const&amp;)' 16 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>tensorflow::serving::PredictResponse::PredictResponse()'<br>\n17 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::TensorShape::CheckDimsEqual(int) const' 18 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>tensorflow::Tensor::Tensor()'<br>\n19 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::serving::PredictionService::NewStub(std::shared_ptr &lt;grpc::ChannelInterface&gt; const&amp;, grpc::StubOptions const&amp;)' 20 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>tensorflow::TensorShapeProto_Dim::TensorShapeProto_Dim(google::<br>\nprotobuf::Arena*)'<br>\n21 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::TensorProto::TensorProto(google::protobuf::Arena*)' 22 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>google::protobuf::internal::ArenaImpl::AllocateAligned(unsigned<br>\nlong)'<br>\n23 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::TensorShapeBase&lt;tensorflow::TensorShape&gt;::dim_size( int) const' 24 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>tensorflow::serving::PredictRequest::~PredictRequest()'<br>\n25 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>google::protobuf::internal::RepeatedPtrFieldBase::Reserve(int)' 26 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>tensorflow::TensorShapeProto_Dim::TensorShapeProto_Dim()'<br>\n27 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::serving::PredictRequest::PredictRequest()' 28 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>google::protobuf::Arena::OnArenaAllocation(std::type_info const<br>\n*, unsigned long) const'<br>\n29 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to <code>tensorflow::TensorProto::~TensorProto()' 30 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to </code>tensorflow::TensorProto::_slow_mutable_tensor_shape()'</p>", "body_text": "I build shared libraries in tensorflow-serving with bazel.\nHowever, I can not build C programs with the shared libraries.\nI build C programs like this:\ng++ main.cc -L../../bazel-bin/tensorflow_serving/rnnlm -lrnnlm_client_run -ldata_generator\nDetails is shown below:\n../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::serving::PredictionService::Stub::Predict(grpc::Cli entContext*, tensorflow::serving::PredictRequest const&, tensorflow::serving::PredictResponse*)' 12 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to google::protobuf::internal::fixed_address_empty_string'\n13 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::Tensor::CheckTypeAndIsAligned(tensorflow::DataType) const' 14 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::serving::PredictRequest::_slow_mutable_model_spec()\n'\n15 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::Tensor::FromProto(tensorflow::TensorProto const&)' 16 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::serving::PredictResponse::PredictResponse()'\n17 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::TensorShape::CheckDimsEqual(int) const' 18 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::Tensor::Tensor()'\n19 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::serving::PredictionService::NewStub(std::shared_ptr <grpc::ChannelInterface> const&, grpc::StubOptions const&)' 20 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::TensorShapeProto_Dim::TensorShapeProto_Dim(google::\nprotobuf::Arena*)'\n21 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::TensorProto::TensorProto(google::protobuf::Arena*)' 22 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to google::protobuf::internal::ArenaImpl::AllocateAligned(unsigned\nlong)'\n23 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::TensorShapeBase<tensorflow::TensorShape>::dim_size( int) const' 24 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::serving::PredictRequest::~PredictRequest()'\n25 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to google::protobuf::internal::RepeatedPtrFieldBase::Reserve(int)' 26 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::TensorShapeProto_Dim::TensorShapeProto_Dim()'\n27 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::serving::PredictRequest::PredictRequest()' 28 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to google::protobuf::Arena::OnArenaAllocation(std::type_info const\n*, unsigned long) const'\n29 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::TensorProto::~TensorProto()' 30 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to tensorflow::TensorProto::_slow_mutable_tensor_shape()'", "body": "I build shared libraries in tensorflow-serving with bazel.\r\nHowever, I can not build C programs with the shared libraries.\r\n\r\nI build C programs like this:\r\ng++ main.cc -L../../bazel-bin/tensorflow_serving/rnnlm -lrnnlm_client_run -ldata_generator\r\n\r\nDetails is shown below:\r\n\r\n../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::serving::PredictionService::Stub::Predict(grpc::Cli\r\n    entContext*, tensorflow::serving::PredictRequest const&, tensorflow::serving::PredictResponse*)'\r\n 12 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `google::protobuf::internal::fixed_address_empty_string'\r\n 13 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::Tensor::CheckTypeAndIsAligned(tensorflow::DataType)\r\n     const'\r\n 14 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::serving::PredictRequest::_slow_mutable_model_spec()\r\n    '\r\n 15 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::Tensor::FromProto(tensorflow::TensorProto const&)'\r\n 16 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::serving::PredictResponse::PredictResponse()'\r\n 17 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::TensorShape::CheckDimsEqual(int) const'\r\n 18 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::Tensor::Tensor()'\r\n 19 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::serving::PredictionService::NewStub(std::shared_ptr\r\n    <grpc::ChannelInterface> const&, grpc::StubOptions const&)'\r\n 20 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::TensorShapeProto_Dim::TensorShapeProto_Dim(google::\r\n    protobuf::Arena*)'\r\n 21 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::TensorProto::TensorProto(google::protobuf::Arena*)'\r\n 22 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `google::protobuf::internal::ArenaImpl::AllocateAligned(unsigned\r\n     long)'\r\n 23 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::TensorShapeBase<tensorflow::TensorShape>::dim_size(\r\n    int) const'\r\n 24 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::serving::PredictRequest::~PredictRequest()'\r\n 25 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `google::protobuf::internal::RepeatedPtrFieldBase::Reserve(int)'\r\n 26 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::TensorShapeProto_Dim::TensorShapeProto_Dim()'\r\n 27 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::serving::PredictRequest::PredictRequest()'\r\n 28 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `google::protobuf::Arena::OnArenaAllocation(std::type_info const\r\n    *, unsigned long) const'\r\n 29 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::TensorProto::~TensorProto()'\r\n 30 ../../bazel-bin/tensorflow_serving/rnnlm/librnnlm_client_run.so: undefined reference to `tensorflow::TensorProto::_slow_mutable_tensor_shape()'"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14194", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14194/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14194/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14194/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14194", "id": 270841160, "node_id": "MDU6SXNzdWUyNzA4NDExNjA=", "number": 14194, "title": "Make CMake on TensorFlow Incrementally Compile on Windows", "user": {"login": "johnsrude", "id": 15482785, "node_id": "MDQ6VXNlcjE1NDgyNzg1", "avatar_url": "https://avatars1.githubusercontent.com/u/15482785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnsrude", "html_url": "https://github.com/johnsrude", "followers_url": "https://api.github.com/users/johnsrude/followers", "following_url": "https://api.github.com/users/johnsrude/following{/other_user}", "gists_url": "https://api.github.com/users/johnsrude/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnsrude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnsrude/subscriptions", "organizations_url": "https://api.github.com/users/johnsrude/orgs", "repos_url": "https://api.github.com/users/johnsrude/repos", "events_url": "https://api.github.com/users/johnsrude/events{/privacy}", "received_events_url": "https://api.github.com/users/johnsrude/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2017-11-02T23:35:27Z", "updated_at": "2018-09-28T17:27:44Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I'm working with the tensorflow r1.4 branch on Windows 7 with Visual Studio 2015.   When I configure</p>\n<pre><code>cmake C:\\Users\\Kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:/Users/Kevin/dev/swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=C:/ProgramData/Anaconda3/python.exe -DPYTHON_LIBRARIES=C:/ProgramData/Anaconda3/libs/python35.lib -DPYTHON_INCLUDE_DIR=C:\\ProgramData\\Anaconda3\\include -DNUMPY_INCLUDE_DIR=C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\numpy\\core\\include -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\"\n</code></pre>\n<p>and run</p>\n<pre><code>powershell \"MSBuild /m /p:Configuration=Release tf_python_build_pip_package.vcxproj | tee msbuild.txt\"\n</code></pre>\n<p>the build always compiles all the projects, even the projects already compiled.</p>\n<p>Looking at the first few lines of msbuild.txt I see</p>\n<pre><code>Microsoft (R) Build Engine version 14.0.25420.1\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nBuild started 11/2/2017 4:35:58 PM.\n     1&gt;Project \"C:\\users\\kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\tf_python_build_pip_package.vcxproj\" on node 1 (default targets).\n     1&gt;Project \"C:\\users\\kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\tf_python_build_pip_package.vcxproj\" (1) is building \"C:\\Users\\Kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\ZERO_CHECK.vcxproj\" (2) on node 1 (default targets).\n     2&gt;InitializeBuildStatus:\n         Creating \"x64\\Release\\ZERO_CHECK\\ZERO_CHECK.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n       CustomBuild:\n         Checking Build System\n         CMake is re-running because C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/generate.stamp is out-of-date.\n           the file 'C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/tf_core_gpu_kernels_generated_cwise_op_gpu_igammas.cu.cc.obj.depend'\n           is newer than 'C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/generate.stamp.depend'\n           result='-1'\n         -- Configuring done\n</code></pre>\n<p>The issue isn't the multicore builds, I'm just using multicore builds to speed up the overall build, which takes 5 hours on one core.</p>\n<p>The problem appears to be that the generate.stamp isn't what's expected.</p>", "body_text": "I'm working with the tensorflow r1.4 branch on Windows 7 with Visual Studio 2015.   When I configure\ncmake C:\\Users\\Kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:/Users/Kevin/dev/swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=C:/ProgramData/Anaconda3/python.exe -DPYTHON_LIBRARIES=C:/ProgramData/Anaconda3/libs/python35.lib -DPYTHON_INCLUDE_DIR=C:\\ProgramData\\Anaconda3\\include -DNUMPY_INCLUDE_DIR=C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\numpy\\core\\include -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\"\n\nand run\npowershell \"MSBuild /m /p:Configuration=Release tf_python_build_pip_package.vcxproj | tee msbuild.txt\"\n\nthe build always compiles all the projects, even the projects already compiled.\nLooking at the first few lines of msbuild.txt I see\nMicrosoft (R) Build Engine version 14.0.25420.1\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nBuild started 11/2/2017 4:35:58 PM.\n     1>Project \"C:\\users\\kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\tf_python_build_pip_package.vcxproj\" on node 1 (default targets).\n     1>Project \"C:\\users\\kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\tf_python_build_pip_package.vcxproj\" (1) is building \"C:\\Users\\Kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\ZERO_CHECK.vcxproj\" (2) on node 1 (default targets).\n     2>InitializeBuildStatus:\n         Creating \"x64\\Release\\ZERO_CHECK\\ZERO_CHECK.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n       CustomBuild:\n         Checking Build System\n         CMake is re-running because C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/generate.stamp is out-of-date.\n           the file 'C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/tf_core_gpu_kernels_generated_cwise_op_gpu_igammas.cu.cc.obj.depend'\n           is newer than 'C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/generate.stamp.depend'\n           result='-1'\n         -- Configuring done\n\nThe issue isn't the multicore builds, I'm just using multicore builds to speed up the overall build, which takes 5 hours on one core.\nThe problem appears to be that the generate.stamp isn't what's expected.", "body": "I'm working with the tensorflow r1.4 branch on Windows 7 with Visual Studio 2015.   When I configure\r\n\r\n```\r\ncmake C:\\Users\\Kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:/Users/Kevin/dev/swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=C:/ProgramData/Anaconda3/python.exe -DPYTHON_LIBRARIES=C:/ProgramData/Anaconda3/libs/python35.lib -DPYTHON_INCLUDE_DIR=C:\\ProgramData\\Anaconda3\\include -DNUMPY_INCLUDE_DIR=C:\\ProgramData\\Anaconda3\\Lib\\site-packages\\numpy\\core\\include -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\"\r\n```\r\nand run\r\n\r\n```\r\npowershell \"MSBuild /m /p:Configuration=Release tf_python_build_pip_package.vcxproj | tee msbuild.txt\"\r\n```\r\nthe build always compiles all the projects, even the projects already compiled.\r\n\r\nLooking at the first few lines of msbuild.txt I see\r\n\r\n```\r\nMicrosoft (R) Build Engine version 14.0.25420.1\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nBuild started 11/2/2017 4:35:58 PM.\r\n     1>Project \"C:\\users\\kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\tf_python_build_pip_package.vcxproj\" on node 1 (default targets).\r\n     1>Project \"C:\\users\\kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\tf_python_build_pip_package.vcxproj\" (1) is building \"C:\\Users\\Kevin\\dev\\tensorflow-r1.4\\tensorflow\\contrib\\cmake\\ZERO_CHECK.vcxproj\" (2) on node 1 (default targets).\r\n     2>InitializeBuildStatus:\r\n         Creating \"x64\\Release\\ZERO_CHECK\\ZERO_CHECK.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\r\n       CustomBuild:\r\n         Checking Build System\r\n         CMake is re-running because C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/generate.stamp is out-of-date.\r\n           the file 'C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/tf_core_gpu_kernels_generated_cwise_op_gpu_igammas.cu.cc.obj.depend'\r\n           is newer than 'C:/Users/Kevin/dev/tensorflow-r1.4/tensorflow/contrib/cmake/CMakeFiles/generate.stamp.depend'\r\n           result='-1'\r\n         -- Configuring done\r\n```\r\nThe issue isn't the multicore builds, I'm just using multicore builds to speed up the overall build, which takes 5 hours on one core.\r\n\r\nThe problem appears to be that the generate.stamp isn't what's expected."}
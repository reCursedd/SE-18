{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21547", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21547/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21547/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21547/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21547", "id": 349691349, "node_id": "MDU6SXNzdWUzNDk2OTEzNDk=", "number": 21547, "title": "tf.image.decode_image cannot decode b64-encoded string in Python3.6", "user": {"login": "FortiLeiZhang", "id": 19476992, "node_id": "MDQ6VXNlcjE5NDc2OTky", "avatar_url": "https://avatars1.githubusercontent.com/u/19476992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FortiLeiZhang", "html_url": "https://github.com/FortiLeiZhang", "followers_url": "https://api.github.com/users/FortiLeiZhang/followers", "following_url": "https://api.github.com/users/FortiLeiZhang/following{/other_user}", "gists_url": "https://api.github.com/users/FortiLeiZhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/FortiLeiZhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FortiLeiZhang/subscriptions", "organizations_url": "https://api.github.com/users/FortiLeiZhang/orgs", "repos_url": "https://api.github.com/users/FortiLeiZhang/repos", "events_url": "https://api.github.com/users/FortiLeiZhang/events{/privacy}", "received_events_url": "https://api.github.com/users/FortiLeiZhang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-11T00:34:20Z", "updated_at": "2018-08-12T18:31:51Z", "closed_at": "2018-08-12T18:31:51Z", "author_association": "NONE", "body_html": "<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">import</span> base64\n\n<span class=\"pl-k\">with</span> <span class=\"pl-c1\">open</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>~/001.jpg<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>r<span class=\"pl-pds\">'</span></span>) <span class=\"pl-k\">as</span> img:\n\tencoded_string <span class=\"pl-k\">=</span> base64.b64encode(img.read())\n\timage_tensor <span class=\"pl-k\">=</span> tf.image.decode_image(encoded_string, <span class=\"pl-v\">channels</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">3</span>)\n\t<span class=\"pl-c1\">print</span>(image_tensor)</pre></div>\n<p>When run above code with Python 2, it is ok, the result is:<br>\nTensor(\"decode_image/cond_jpeg/Merge:0\", dtype=uint8)</p>\n<p>However, when run with Python 3, it shows:<br>\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte</p>", "body_text": "import tensorflow as tf\nimport base64\n\nwith open('~/001.jpg', 'r') as img:\n\tencoded_string = base64.b64encode(img.read())\n\timage_tensor = tf.image.decode_image(encoded_string, channels=3)\n\tprint(image_tensor)\nWhen run above code with Python 2, it is ok, the result is:\nTensor(\"decode_image/cond_jpeg/Merge:0\", dtype=uint8)\nHowever, when run with Python 3, it shows:\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte", "body": "```python\r\nimport tensorflow as tf\r\nimport base64\r\n\r\nwith open('~/001.jpg', 'r') as img:\r\n\tencoded_string = base64.b64encode(img.read())\r\n\timage_tensor = tf.image.decode_image(encoded_string, channels=3)\r\n\tprint(image_tensor)\r\n```\r\n\r\nWhen run above code with Python 2, it is ok, the result is:\r\nTensor(\"decode_image/cond_jpeg/Merge:0\", dtype=uint8)\r\n\r\nHowever, when run with Python 3, it shows:\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte"}
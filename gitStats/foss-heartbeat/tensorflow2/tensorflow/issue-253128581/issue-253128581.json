{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12622", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12622/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12622/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12622/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/12622", "id": 253128581, "node_id": "MDExOlB1bGxSZXF1ZXN0MTM3ODE0OTc1", "number": 12622, "title": "[android demo] fix issue #12431 Java implementation of YUV420SP to ARGB8888 converting", "user": {"login": "ArtsiomCh", "id": 14268320, "node_id": "MDQ6VXNlcjE0MjY4MzIw", "avatar_url": "https://avatars1.githubusercontent.com/u/14268320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArtsiomCh", "html_url": "https://github.com/ArtsiomCh", "followers_url": "https://api.github.com/users/ArtsiomCh/followers", "following_url": "https://api.github.com/users/ArtsiomCh/following{/other_user}", "gists_url": "https://api.github.com/users/ArtsiomCh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArtsiomCh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArtsiomCh/subscriptions", "organizations_url": "https://api.github.com/users/ArtsiomCh/orgs", "repos_url": "https://api.github.com/users/ArtsiomCh/repos", "events_url": "https://api.github.com/users/ArtsiomCh/events{/privacy}", "received_events_url": "https://api.github.com/users/ArtsiomCh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2017-08-26T23:04:39Z", "updated_at": "2017-09-08T01:36:09Z", "closed_at": "2017-09-08T01:36:09Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12622", "html_url": "https://github.com/tensorflow/tensorflow/pull/12622", "diff_url": "https://github.com/tensorflow/tensorflow/pull/12622.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/12622.patch"}, "body_html": "<p>This PR fix issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"251504903\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12431\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/12431/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/12431\">#12431</a><br>\nJava implementation of <code>ImageUtils.convertYUV420SPToARGB8888</code> made and refactoring for Java implementation of <code>ImageUtils.convertYUV420ToARGB8888</code> made as well.</p>\n<p>Despite the fact that code looks a bit 'nuddle-style' that was made for efficiency reasons. Breaking down it into few, more readable functions (like it was made before at <code>ImageUtils.convertYUV420ToARGB8888</code>) lead into 3-time function execution increase:<br>\nPrevious implementation of <code>ImageUtils.convertYUV420ToARGB8888</code> cause invocation inside double nested circles 307200 times (<code>640x480</code>) of <code>YUV2RGB</code> function and three times more <code>convertByteToInt</code> with <code>Math.min</code> and <code>Math.max</code> functions.</p>\n<p>Total costs of classification at TF Classify was around 3000 ms on my test device (Meizu N2, API 22). Proposed implementation drops it down to 1000-1100 ms (which is comparable with native C implementation from <code>libtensorflow_demo.so</code>  ~700 ms).</p>", "body_text": "This PR fix issue #12431\nJava implementation of ImageUtils.convertYUV420SPToARGB8888 made and refactoring for Java implementation of ImageUtils.convertYUV420ToARGB8888 made as well.\nDespite the fact that code looks a bit 'nuddle-style' that was made for efficiency reasons. Breaking down it into few, more readable functions (like it was made before at ImageUtils.convertYUV420ToARGB8888) lead into 3-time function execution increase:\nPrevious implementation of ImageUtils.convertYUV420ToARGB8888 cause invocation inside double nested circles 307200 times (640x480) of YUV2RGB function and three times more convertByteToInt with Math.min and Math.max functions.\nTotal costs of classification at TF Classify was around 3000 ms on my test device (Meizu N2, API 22). Proposed implementation drops it down to 1000-1100 ms (which is comparable with native C implementation from libtensorflow_demo.so  ~700 ms).", "body": "This PR fix issue #12431\r\nJava implementation of `ImageUtils.convertYUV420SPToARGB8888` made and refactoring for Java implementation of `ImageUtils.convertYUV420ToARGB8888` made as well.\r\n\r\nDespite the fact that code looks a bit 'nuddle-style' that was made for efficiency reasons. Breaking down it into few, more readable functions (like it was made before at `ImageUtils.convertYUV420ToARGB8888`) lead into 3-time function execution increase:\r\nPrevious implementation of `ImageUtils.convertYUV420ToARGB8888` cause invocation inside double nested circles 307200 times (`640x480`) of `YUV2RGB` function and three times more `convertByteToInt` with `Math.min` and `Math.max` functions. \r\n\r\nTotal costs of classification at TF Classify was around 3000 ms on my test device (Meizu N2, API 22). Proposed implementation drops it down to 1000-1100 ms (which is comparable with native C implementation from `libtensorflow_demo.so`  ~700 ms)."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/137149192", "pull_request_review_id": 60705185, "id": 137149192, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNzE0OTE5Mg==", "diff_hunk": "@@ -122,48 +176,47 @@ public static void convertYUV420ToARGB8888(\n     int i = 0;\n     for (int y = 0; y < height; y++) {\n       int pY = yRowStride * y;\n-      int uv_row_start = uvRowStride * (y >> 1);\n-      int pUV = uv_row_start;\n-      int pV = uv_row_start;\n+      int pUV = uvRowStride * (y >> 1);\n \n       for (int x = 0; x < width; x++) {\n         int uv_offset = pUV + (x >> 1) * uvPixelStride;\n-        out[i++] =\n-            YUV2RGB(\n-                convertByteToInt(yData, pY + x),\n-                convertByteToInt(uData, uv_offset),\n-                convertByteToInt(vData, uv_offset));\n+        int nY = (yData[pY + x] & 0xFF) - 16;\n+        int nU = (uData[uv_offset] & 0xFF) - 128;\n+        int nV = (vData[uv_offset] & 0xFF) - 128;\n+        if (nY < 0)\n+          nY = 0;\n+\n+        // This is the floating point equivalent. We do the conversion in integer\n+        // because some Android devices do not have floating point in hardware.\n+        // nR = (int)(1.164 * nY + 2.018 * nU);\n+        // nG = (int)(1.164 * nY - 0.813 * nV - 0.391 * nU);\n+        // nB = (int)(1.164 * nY + 1.596 * nV);\n+\n+        final int foo = 1192 * nY;", "path": "tensorflow/examples/android/src/org/tensorflow/demo/env/ImageUtils.java", "position": null, "original_position": 89, "commit_id": "0e2b975c9e112dd10a5739a84c49362921b57176", "original_commit_id": "88ce1937ee201ce816791f390d149d6d202a0a3a", "user": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "body": "s/foo/y1192/", "created_at": "2017-09-06T00:46:23Z", "updated_at": "2017-09-06T21:07:38Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12622#discussion_r137149192", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12622", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/137149192"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12622#discussion_r137149192"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12622"}}, "body_html": "<p>s/foo/y1192/</p>", "body_text": "s/foo/y1192/"}
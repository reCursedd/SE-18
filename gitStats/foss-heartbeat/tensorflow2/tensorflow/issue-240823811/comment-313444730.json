{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/313444730", "html_url": "https://github.com/tensorflow/tensorflow/issues/11312#issuecomment-313444730", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11312", "id": 313444730, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzQ0NDczMA==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-06T16:15:41Z", "updated_at": "2017-07-06T16:15:41Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Python 3 introduces a distinction between the \"r\" and \"rb\" modes for <a href=\"https://docs.python.org/3/library/functions.html#open\" rel=\"nofollow\">opening a file</a>. Using the \"r\" mode will cause Python to interpret the file contents as text\u2014in your case (and the common case) using an UTF-8 encoding\u2014but the error message indicates that data is binary format (presumably some image format, based on your variable name). Changing the code to use the mode \"rb\"  should fix the problem and work in both versions of Python:</p>\n<div class=\"highlight highlight-source-python\"><pre>image_data <span class=\"pl-k\">=</span> tf.gfile.FastGFile(filename, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>rb<span class=\"pl-pds\">'</span></span>).read()</pre></div>", "body_text": "Python 3 introduces a distinction between the \"r\" and \"rb\" modes for opening a file. Using the \"r\" mode will cause Python to interpret the file contents as text\u2014in your case (and the common case) using an UTF-8 encoding\u2014but the error message indicates that data is binary format (presumably some image format, based on your variable name). Changing the code to use the mode \"rb\"  should fix the problem and work in both versions of Python:\nimage_data = tf.gfile.FastGFile(filename, 'rb').read()", "body": "Python 3 introduces a distinction between the \"r\" and \"rb\" modes for [opening a file](https://docs.python.org/3/library/functions.html#open). Using the \"r\" mode will cause Python to interpret the file contents as text&mdash;in your case (and the common case) using an UTF-8 encoding&mdash;but the error message indicates that data is binary format (presumably some image format, based on your variable name). Changing the code to use the mode \"rb\"  should fix the problem and work in both versions of Python:\r\n\r\n```python\r\nimage_data = tf.gfile.FastGFile(filename, 'rb').read()\r\n```"}
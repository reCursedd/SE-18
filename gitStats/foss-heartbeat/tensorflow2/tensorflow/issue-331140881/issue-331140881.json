{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19906", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19906/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19906/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19906/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19906", "id": 331140881, "node_id": "MDU6SXNzdWUzMzExNDA4ODE=", "number": 19906, "title": "Build OK ,but My own C++ project has error :\" std::bad_alloc \"", "user": {"login": "EdwardVincentMa", "id": 39480728, "node_id": "MDQ6VXNlcjM5NDgwNzI4", "avatar_url": "https://avatars3.githubusercontent.com/u/39480728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdwardVincentMa", "html_url": "https://github.com/EdwardVincentMa", "followers_url": "https://api.github.com/users/EdwardVincentMa/followers", "following_url": "https://api.github.com/users/EdwardVincentMa/following{/other_user}", "gists_url": "https://api.github.com/users/EdwardVincentMa/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdwardVincentMa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdwardVincentMa/subscriptions", "organizations_url": "https://api.github.com/users/EdwardVincentMa/orgs", "repos_url": "https://api.github.com/users/EdwardVincentMa/repos", "events_url": "https://api.github.com/users/EdwardVincentMa/events{/privacy}", "received_events_url": "https://api.github.com/users/EdwardVincentMa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-06-11T10:58:41Z", "updated_at": "2018-10-08T07:33:07Z", "closed_at": "2018-07-11T19:51:55Z", "author_association": "NONE", "body_html": "<p><strong>System information:</strong><br>\n\u00b7 Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes</p>\n<p>\u00b7 OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Win10-x64</p>\n<p>\u00b7 TensorFlow installed from (source or binary): git clone <a href=\"https://github.com/tensorflow/tensorflow.git\">https://github.com/tensorflow/tensorflow.git</a></p>\n<p>\u00b7 TensorFlow version (use command below): r1.8, command :<br>\ngit checkout -b v1.8 -f origin/r1.8</p>\n<p>\u00b7 Python version: Anaconda3 - python3.6</p>\n<p>\u00b7 Bazel version (if compiling from source): I used CMAKE 3.11.1</p>\n<p>\u00b7 GCC/Compiler version (if compiling from source): both Visual Studio 2015 and Visual Studio 2015' MSBuild</p>\n<p>\u00b7 CUDA/cuDNN version: CUDA9.0, cudnn-9.0-win10-7.1</p>\n<p>\u00b7 GPU model and memory: GTX-860m with 2Gb Memory</p>\n<p>Exact command to reproduce:<br>\n\"<br>\nD:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build&gt; cmake .. -A x64 -DCMAKE_BUILD_TYPE=<strong>Release</strong> -DSWIG_EXECUTABLE=D:/soft/TensorflowSoft/swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=D:/ProgramData/Anaconda3/python.exe -DPYTHON_LIBRARIES=D:/ProgramData/Anaconda3/libs/python36.lib -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"D:\\soft\\TensorflowSoft\\cudnn\" -G \"Visual Studio 14 2015\"</p>\n<p>D:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build&gt; set PreferredToolArchitecture=x64</p>\n<p>D:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build&gt; MSBuild /p:Configuration=<strong>Release</strong> ALL_BUILD.vcxproj<br>\n\"</p>\n<p><strong>Describe the problem :</strong></p>\n<p>I build tensorflow-<strong>GPU-Release</strong> version sucessfully (even though GPU - Debug version had error). My project code is :</p>\n<p>\"</p>\n<pre><code>GraphDef CMFCtensorTest01Dlg::CreateGraphDef()\n{      \n     Scope root = Scope::NewRootScope();\n\n     auto X = ops::Placeholder(root.WithOpName(\"x\"), DT_FLOAT, ops::Placeholder::Shape({ -1, 2 }));\n\n     auto A = ops::Const(root, { { 3.f, 2.f },{ -1.f, 0.f } });\n\n     auto Y = ops::MatMul(root.WithOpName(\"y\"), A, X,\n     ops::MatMul::TransposeB(true));\n\n     GraphDef def;\n     TF_CHECK_OK(root.ToGraphDef(&amp;def));\n     return def;\n}\n</code></pre>\n<p>\"</p>\n<p>Error running to the second line :\"<strong>auto X = ops::Placeholder(root.WithOpName(\"x\"), DT_FLOAT, ops::Placeholder::Shape({ -1, 2 }))</strong>;\"</p>\n<p>The error is : \"0x00007FF95998F218 \u5904(\u4f4d\u4e8e MFCtensorTest01.exe \u4e2d)\u5f15\u53d1\u7684\u5f02\u5e38: Microsoft C++ \u5f02\u5e38: std::bad_alloc\uff0c\u4f4d\u4e8e\u5185\u5b58\u4f4d\u7f6e 0x00000065700F9280 \u5904\u3002\"</p>\n<p>These code worked successfully on my <strong>CPU - Debug</strong> version build,  <strong>GPU - Release</strong> version had error. I think this error is about application memory.</p>\n<p>Not long ago I tested it, if I change the <strong>GUP - Release\u2018 s _pywrap_tensorflow_internal.pyd</strong>  to <strong>CPU - Debug \u2018s _pywrap_tensorflow_internal.pyd</strong>\uff0ccode runs successfully\uff08I build Win10 - CPU - Debug version <strong>successfully</strong> several days ago\uff09\uff0cI think the <strong>GUP - Release\u2018 s _pywrap_tensorflow_internal.pyd</strong> had something wrong.</p>", "body_text": "System information:\n\u00b7 Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\n\u00b7 OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Win10-x64\n\u00b7 TensorFlow installed from (source or binary): git clone https://github.com/tensorflow/tensorflow.git\n\u00b7 TensorFlow version (use command below): r1.8, command :\ngit checkout -b v1.8 -f origin/r1.8\n\u00b7 Python version: Anaconda3 - python3.6\n\u00b7 Bazel version (if compiling from source): I used CMAKE 3.11.1\n\u00b7 GCC/Compiler version (if compiling from source): both Visual Studio 2015 and Visual Studio 2015' MSBuild\n\u00b7 CUDA/cuDNN version: CUDA9.0, cudnn-9.0-win10-7.1\n\u00b7 GPU model and memory: GTX-860m with 2Gb Memory\nExact command to reproduce:\n\"\nD:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build> cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=D:/soft/TensorflowSoft/swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=D:/ProgramData/Anaconda3/python.exe -DPYTHON_LIBRARIES=D:/ProgramData/Anaconda3/libs/python36.lib -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"D:\\soft\\TensorflowSoft\\cudnn\" -G \"Visual Studio 14 2015\"\nD:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build> set PreferredToolArchitecture=x64\nD:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build> MSBuild /p:Configuration=Release ALL_BUILD.vcxproj\n\"\nDescribe the problem :\nI build tensorflow-GPU-Release version sucessfully (even though GPU - Debug version had error). My project code is :\n\"\nGraphDef CMFCtensorTest01Dlg::CreateGraphDef()\n{      \n     Scope root = Scope::NewRootScope();\n\n     auto X = ops::Placeholder(root.WithOpName(\"x\"), DT_FLOAT, ops::Placeholder::Shape({ -1, 2 }));\n\n     auto A = ops::Const(root, { { 3.f, 2.f },{ -1.f, 0.f } });\n\n     auto Y = ops::MatMul(root.WithOpName(\"y\"), A, X,\n     ops::MatMul::TransposeB(true));\n\n     GraphDef def;\n     TF_CHECK_OK(root.ToGraphDef(&def));\n     return def;\n}\n\n\"\nError running to the second line :\"auto X = ops::Placeholder(root.WithOpName(\"x\"), DT_FLOAT, ops::Placeholder::Shape({ -1, 2 }));\"\nThe error is : \"0x00007FF95998F218 \u5904(\u4f4d\u4e8e MFCtensorTest01.exe \u4e2d)\u5f15\u53d1\u7684\u5f02\u5e38: Microsoft C++ \u5f02\u5e38: std::bad_alloc\uff0c\u4f4d\u4e8e\u5185\u5b58\u4f4d\u7f6e 0x00000065700F9280 \u5904\u3002\"\nThese code worked successfully on my CPU - Debug version build,  GPU - Release version had error. I think this error is about application memory.\nNot long ago I tested it, if I change the GUP - Release\u2018 s _pywrap_tensorflow_internal.pyd  to CPU - Debug \u2018s _pywrap_tensorflow_internal.pyd\uff0ccode runs successfully\uff08I build Win10 - CPU - Debug version successfully several days ago\uff09\uff0cI think the GUP - Release\u2018 s _pywrap_tensorflow_internal.pyd had something wrong.", "body": "**System information:**\r\n\u00b7 Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n\r\n\u00b7 OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Win10-x64\r\n\r\n\u00b7 TensorFlow installed from (source or binary): git clone https://github.com/tensorflow/tensorflow.git\r\n\r\n\u00b7 TensorFlow version (use command below): r1.8, command :\r\ngit checkout -b v1.8 -f origin/r1.8\r\n\r\n\u00b7 Python version: Anaconda3 - python3.6\r\n\r\n\u00b7 Bazel version (if compiling from source): I used CMAKE 3.11.1\r\n\r\n\u00b7 GCC/Compiler version (if compiling from source): both Visual Studio 2015 and Visual Studio 2015' MSBuild\r\n\r\n\u00b7 CUDA/cuDNN version: CUDA9.0, cudnn-9.0-win10-7.1\r\n\r\n\u00b7 GPU model and memory: GTX-860m with 2Gb Memory\r\n\r\nExact command to reproduce:\r\n\"\r\nD:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build> cmake .. -A x64 -DCMAKE_BUILD_TYPE=**Release** -DSWIG_EXECUTABLE=D:/soft/TensorflowSoft/swigwin-3.0.12/swig.exe -DPYTHON_EXECUTABLE=D:/ProgramData/Anaconda3/python.exe -DPYTHON_LIBRARIES=D:/ProgramData/Anaconda3/libs/python36.lib -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"D:\\soft\\TensorflowSoft\\cudnn\" -G \"Visual Studio 14 2015\"\r\n\r\nD:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build> set PreferredToolArchitecture=x64\r\n\r\nD:\\ProgramData\\tensorflow\\tensorflow\\contrib\\cmake\\build> MSBuild /p:Configuration=**Release** ALL_BUILD.vcxproj\r\n\"\r\n\r\n**Describe the problem :**\r\n\r\nI build tensorflow-**GPU-Release** version sucessfully (even though GPU - Debug version had error). My project code is :\r\n\r\n\" \r\n```\r\nGraphDef CMFCtensorTest01Dlg::CreateGraphDef()\r\n{      \r\n     Scope root = Scope::NewRootScope();\r\n\r\n     auto X = ops::Placeholder(root.WithOpName(\"x\"), DT_FLOAT, ops::Placeholder::Shape({ -1, 2 }));\r\n\r\n     auto A = ops::Const(root, { { 3.f, 2.f },{ -1.f, 0.f } });\r\n\r\n     auto Y = ops::MatMul(root.WithOpName(\"y\"), A, X,\r\n     ops::MatMul::TransposeB(true));\r\n\r\n     GraphDef def;\r\n     TF_CHECK_OK(root.ToGraphDef(&def));\r\n     return def;\r\n}\r\n```\r\n\"\r\n\r\nError running to the second line :\"**auto X = ops::Placeholder(root.WithOpName(\"x\"), DT_FLOAT, ops::Placeholder::Shape({ -1, 2 }))**;\"\r\n\r\n\r\nThe error is : \"0x00007FF95998F218 \u5904(\u4f4d\u4e8e MFCtensorTest01.exe \u4e2d)\u5f15\u53d1\u7684\u5f02\u5e38: Microsoft C++ \u5f02\u5e38: std::bad_alloc\uff0c\u4f4d\u4e8e\u5185\u5b58\u4f4d\u7f6e 0x00000065700F9280 \u5904\u3002\"\r\n\r\nThese code worked successfully on my **CPU - Debug** version build,  **GPU - Release** version had error. I think this error is about application memory.\r\n\r\nNot long ago I tested it, if I change the **GUP - Release\u2018 s _pywrap_tensorflow_internal.pyd**  to **CPU - Debug \u2018s _pywrap_tensorflow_internal.pyd**\uff0ccode runs successfully\uff08I build Win10 - CPU - Debug version **successfully** several days ago\uff09\uff0cI think the **GUP - Release\u2018 s _pywrap_tensorflow_internal.pyd** had something wrong."}
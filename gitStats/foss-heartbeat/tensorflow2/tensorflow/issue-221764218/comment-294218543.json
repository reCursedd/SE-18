{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/294218543", "html_url": "https://github.com/tensorflow/tensorflow/pull/9214#issuecomment-294218543", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9214", "id": 294218543, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIxODU0Mw==", "user": {"login": "hartb", "id": 18429659, "node_id": "MDQ6VXNlcjE4NDI5NjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/18429659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartb", "html_url": "https://github.com/hartb", "followers_url": "https://api.github.com/users/hartb/followers", "following_url": "https://api.github.com/users/hartb/following{/other_user}", "gists_url": "https://api.github.com/users/hartb/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartb/subscriptions", "organizations_url": "https://api.github.com/users/hartb/orgs", "repos_url": "https://api.github.com/users/hartb/repos", "events_url": "https://api.github.com/users/hartb/events{/privacy}", "received_events_url": "https://api.github.com/users/hartb/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-14T19:20:53Z", "updated_at": "2017-04-14T19:20:53Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=49262\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jart\">@jart</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=170179\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jhseu\">@jhseu</a> I'm another member of <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=14196089\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/npanpaliya\">@npanpaliya</a> 's team.  We don't want to force jemalloc to always build on ppc, but we couldn't think of a good way to work around the fact that the current with_jemalloc config_setting in tensorflow/BUILD is limited to k8.</p>\n<p>Looking at the suggestions in the thread now...  Would it be a good solution to:</p>\n<ul>\n<li>modify existing K8-specific config_setting rule to be \"with_jemalloc_k8\"</li>\n<li>add new ppc64le-specific config_setting rule \"with_jemalloc_ppc64le\"</li>\n<li>update the selects in build_config.bzl / tf_additional_lib_defines and tf_additional_lib_deps to recognize both with_jemalloc_k8 and with_jemalloc_ppc64le</li>\n</ul>", "body_text": "@jart @jhseu I'm another member of @npanpaliya 's team.  We don't want to force jemalloc to always build on ppc, but we couldn't think of a good way to work around the fact that the current with_jemalloc config_setting in tensorflow/BUILD is limited to k8.\nLooking at the suggestions in the thread now...  Would it be a good solution to:\n\nmodify existing K8-specific config_setting rule to be \"with_jemalloc_k8\"\nadd new ppc64le-specific config_setting rule \"with_jemalloc_ppc64le\"\nupdate the selects in build_config.bzl / tf_additional_lib_defines and tf_additional_lib_deps to recognize both with_jemalloc_k8 and with_jemalloc_ppc64le", "body": "@jart @jhseu I'm another member of @npanpaliya 's team.  We don't want to force jemalloc to always build on ppc, but we couldn't think of a good way to work around the fact that the current with_jemalloc config_setting in tensorflow/BUILD is limited to k8.\r\n\r\nLooking at the suggestions in the thread now...  Would it be a good solution to:\r\n\r\n- modify existing K8-specific config_setting rule to be \"with_jemalloc_k8\"\r\n- add new ppc64le-specific config_setting rule \"with_jemalloc_ppc64le\"\r\n- update the selects in build_config.bzl / tf_additional_lib_defines and tf_additional_lib_deps to recognize both with_jemalloc_k8 and with_jemalloc_ppc64le"}
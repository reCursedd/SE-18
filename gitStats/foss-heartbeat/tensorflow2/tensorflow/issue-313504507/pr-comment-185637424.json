{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/185637424", "pull_request_review_id": 117067866, "id": 185637424, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NTYzNzQyNA==", "diff_hunk": "@@ -67,6 +67,7 @@ tf_cuda_library(\n     visibility = [\"//visibility:public\"],\n     deps = [\n         \":trt_logging\",\n+        \":trt_plugins\",", "path": "tensorflow/contrib/tensorrt/BUILD", "position": 4, "original_position": 4, "commit_id": "82a0695ccf59b6903ba36875f9f335bac710322d", "original_commit_id": "9d1aa895adda8644ddbb55b5e1dbb0797ea6cbb0", "user": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "body": "My understanding is that linker will load the first copy of the factory instance and ignore the second, regardless which .so is loaded first. Then, if the one who is not linked against the plugin registration is loaded first (maybe _trt_engine_op.so), then later when it tried to find the plugin it will fail. I could be wrong though.\r\n\r\nWe can see that both .so file has GetInstance() defined as a unique global symbol.", "created_at": "2018-05-02T21:01:11Z", "updated_at": "2018-05-15T17:09:29Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/18433#discussion_r185637424", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18433", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/185637424"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/18433#discussion_r185637424"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18433"}}, "body_html": "<p>My understanding is that linker will load the first copy of the factory instance and ignore the second, regardless which .so is loaded first. Then, if the one who is not linked against the plugin registration is loaded first (maybe _trt_engine_op.so), then later when it tried to find the plugin it will fail. I could be wrong though.</p>\n<p>We can see that both .so file has GetInstance() defined as a unique global symbol.</p>", "body_text": "My understanding is that linker will load the first copy of the factory instance and ignore the second, regardless which .so is loaded first. Then, if the one who is not linked against the plugin registration is loaded first (maybe _trt_engine_op.so), then later when it tried to find the plugin it will fail. I could be wrong though.\nWe can see that both .so file has GetInstance() defined as a unique global symbol.", "in_reply_to_id": 181515507}
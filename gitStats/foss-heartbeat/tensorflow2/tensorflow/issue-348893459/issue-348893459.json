{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21488", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21488/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21488/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21488/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21488", "id": 348893459, "node_id": "MDU6SXNzdWUzNDg4OTM0NTk=", "number": 21488, "title": "Tensorflow PIP Package fails to build - AttributeError: module 'pandas' has no attribute 'core'", "user": {"login": "matt-garman", "id": 3482585, "node_id": "MDQ6VXNlcjM0ODI1ODU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3482585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matt-garman", "html_url": "https://github.com/matt-garman", "followers_url": "https://api.github.com/users/matt-garman/followers", "following_url": "https://api.github.com/users/matt-garman/following{/other_user}", "gists_url": "https://api.github.com/users/matt-garman/gists{/gist_id}", "starred_url": "https://api.github.com/users/matt-garman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matt-garman/subscriptions", "organizations_url": "https://api.github.com/users/matt-garman/orgs", "repos_url": "https://api.github.com/users/matt-garman/repos", "events_url": "https://api.github.com/users/matt-garman/events{/privacy}", "received_events_url": "https://api.github.com/users/matt-garman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-08-08T21:10:27Z", "updated_at": "2018-11-15T19:03:36Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>This may be a bug in the Python PIP build script(s), or something askew in my environment.  I am trying to build Tensorflow from source, to include AVX/AVX2 support.  It always fails with the error log pasted below.  I have tried the latest git pull over the last week or so (i.e. multiple git pulls, followed by \"bazel clean ; bazel build \".  I have also tried the same with the r1.10 branch.</p>\n<p>There is <a href=\"https://stackoverflow.com/questions/36521691/importing-pandas-gives-error-attributeerror-module-pandas-has-no-attribute-c\" rel=\"nofollow\">this somewhat similar question on StackOverflow</a>.  That is more about using Pandas, rather than building Tensorflow.  At any rate I tried all the suggestions to no avail.  And my Pandas is working:</p>\n<pre><code>$ python -c \"import pandas as pd ; import pandas.core.ops as ops ; print(pd.__version__)\" &amp;&amp; echo $?\n0.23.4\n0\n</code></pre>\n<h2>System Details:</h2>\n<ul>\n<li>Have I written custom code: NO</li>\n<li>OS Platform and Distribution: CentOS Linux 7.4.1708 with Anaconda Python3 distribution</li>\n<li>Mobile device: N/A</li>\n<li>TensorFlow installed from: not yet installed, trying to build from source (no build-halting errors during the C/C++ portion of the build)</li>\n<li>TensorFlow version: latest git pull over the last several days, both master and r1.10 branch</li>\n<li>Python version: Python 3.6.6 :: Anaconda custom (64-bit)</li>\n<li>Bazel version (if compiling from source):</li>\n</ul>\n<pre><code>$ bazel version\nBuild label: 0.16.0- (@non-git)\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Jul 31 18:27:17 2018 (1533061637)\nBuild timestamp: 1533061637\nBuild timestamp as int: 1533061637\n</code></pre>\n<ul>\n<li>GCC/Compiler version: gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-16)</li>\n<li>CUDA/cuDNN version: N/A</li>\n<li>GPU model and memory: N/A</li>\n<li>Exact command to reproduce:</li>\n</ul>\n<pre><code>  $ git clone https://github.com/tensorflow/tensorflow.git\n  $ cd tensorflow\n  $ ./configure # accept all defaults\n  $ bazel build -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 --verbose_failures -k //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<h2>Output of tf_env_collect.sh:</h2>\n<p>== cat /etc/issue ===============================================<br>\nLinux septictank 3.10.0-693.21.1.el7.x86_64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Wed Mar 7 19:03:37 UTC 2018 x<br>\n86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION=\"7 (Core)\"<br>\nVERSION_ID=\"7\"<br>\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"<br>\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-16)<br>\nCopyright (C) 2015 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux septictank 3.10.0-693.21.1.el7.x86_64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Wed Mar 7 19:03:37 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nnumpy                              1.15.0<br>\nnumpydoc                           0.8.0<br>\nprotobuf                           3.5.2</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\nTraceback (most recent call last):<br>\nFile \"/home/matt/tensorflow/tensorflow/python/platform/self_check.py\", line 2$, in <br>\nfrom tensorflow.python.platform import build_info<br>\nImportError: cannot import name 'build_info'</p>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>Traceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nFile \"/home/matt/tensorflow/tensorflow/<strong>init</strong>.py\", line 24, in <br>\nfrom tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-i$port<br>\nFile \"/home/matt/tensorflow/tensorflow/python/<strong>init</strong>.py\", line 49, in <br>\nfrom tensorflow.python import pywrap_tensorflow<br>\nFile \"/home/matt/tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 25,<br>\nin <br>\nfrom tensorflow.python.platform import self_check<br>\nFile \"/home/matt/tensorflow/tensorflow/python/platform/self_check.py\", line 27<br>\n, in <br>\nraise ImportError(\"Could not import tensorflow. Do not import tensorflow \"<br>\nImportError: Could not import tensorflow. Do not import tensorflow from its sour<br>\nce directory; change directory to outside the TensorFlow source tree, and relaun<br>\nch your Python interpreter from there.</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH is unset<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\n./tf_env_collect.sh: line 105: nvidia-smi: command not found</p>\n<p>== cuda libs  ===================================================</p>\n<h2>Error message from bazel:</h2>\n<pre><code>ERROR: /home/matt/tensorflow/tensorflow/python/estimator/api/BUILD:12:1: Couldn't build file tensorflow/python/estimator/api/__init__.py: Executing genrule //tensorflow/python/estimator/api:estimator_python_api_gen failed (Exit 1): bash failed: error executing command\n  (cd /home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow &amp;&amp; \\\n  exec env - \\\n    PATH=/opt/anaconda3/bin:/opt/anaconda3/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/bin:/sbin:/usr/sbin:/usr/local/bin:/sbin:/usr/sbin \\\n    PYTHON_BIN_PATH=/opt/anaconda3/bin/python \\\n    PYTHON_LIB_PATH=/opt/anaconda3/lib/python3.6/site-packages \\\n    TF_DOWNLOAD_CLANG=0 \\\n    TF_NEED_CUDA=0 \\\n    TF_NEED_OPENCL_SYCL=0 \\\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api  --apidir=bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api --apiname=estimator --apiversion=2 --package=tensorflow.python.estimator --output_package=tensorflow.python.estimator.api bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/export/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/inputs/__init__.py')\ntf.estimator package not installed.\nTraceback (most recent call last):\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 511, in &lt;module&gt;\n    main()\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 504, in main\n    importlib.import_module(args.package)\n  File \"/opt/anaconda3/lib/python3.6/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 955, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 665, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 678, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/__init__.py\", line 25, in &lt;module&gt;\n    import tensorflow.python.estimator.estimator_lib\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/estimator_lib.py\", line 41, in &lt;module&gt;\n    from tensorflow.python.estimator.inputs import inputs\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/inputs/inputs.py\", line 23, in &lt;module&gt;\n    from tensorflow.python.estimator.inputs.pandas_io import pandas_input_fn\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/inputs/pandas_io.py\", line 31, in &lt;module&gt;\n    import pandas as pd\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/__init__.py\", line 42, in &lt;module&gt;\n    from pandas.core.api import *\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/api.py\", line 10, in &lt;module&gt;\n    from pandas.core.groupby.groupby import Grouper\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/groupby/__init__.py\", line 2, in &lt;module&gt;\n    from pandas.core.groupby.groupby import (\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/groupby/groupby.py\", line 49, in &lt;module&gt;\n    from pandas.core.frame import DataFrame\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py\", line 74, in &lt;module&gt;\n    from pandas.core.series import Series\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/series.py\", line 67, in &lt;module&gt;\n    import pandas.core.ops as ops\nAttributeError: module 'pandas' has no attribute 'core'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n</code></pre>", "body_text": "This may be a bug in the Python PIP build script(s), or something askew in my environment.  I am trying to build Tensorflow from source, to include AVX/AVX2 support.  It always fails with the error log pasted below.  I have tried the latest git pull over the last week or so (i.e. multiple git pulls, followed by \"bazel clean ; bazel build \".  I have also tried the same with the r1.10 branch.\nThere is this somewhat similar question on StackOverflow.  That is more about using Pandas, rather than building Tensorflow.  At any rate I tried all the suggestions to no avail.  And my Pandas is working:\n$ python -c \"import pandas as pd ; import pandas.core.ops as ops ; print(pd.__version__)\" && echo $?\n0.23.4\n0\n\nSystem Details:\n\nHave I written custom code: NO\nOS Platform and Distribution: CentOS Linux 7.4.1708 with Anaconda Python3 distribution\nMobile device: N/A\nTensorFlow installed from: not yet installed, trying to build from source (no build-halting errors during the C/C++ portion of the build)\nTensorFlow version: latest git pull over the last several days, both master and r1.10 branch\nPython version: Python 3.6.6 :: Anaconda custom (64-bit)\nBazel version (if compiling from source):\n\n$ bazel version\nBuild label: 0.16.0- (@non-git)\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Jul 31 18:27:17 2018 (1533061637)\nBuild timestamp: 1533061637\nBuild timestamp as int: 1533061637\n\n\nGCC/Compiler version: gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-16)\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce:\n\n  $ git clone https://github.com/tensorflow/tensorflow.git\n  $ cd tensorflow\n  $ ./configure # accept all defaults\n  $ bazel build -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 --verbose_failures -k //tensorflow/tools/pip_package:build_pip_package\n\nOutput of tf_env_collect.sh:\n== cat /etc/issue ===============================================\nLinux septictank 3.10.0-693.21.1.el7.x86_64 #1 SMP Wed Mar 7 19:03:37 UTC 2018 x\n86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"7 (Core)\"\nVERSION_ID=\"7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-16)\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux septictank 3.10.0-693.21.1.el7.x86_64 #1 SMP Wed Mar 7 19:03:37 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\nnumpy                              1.15.0\nnumpydoc                           0.8.0\nprotobuf                           3.5.2\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\nTraceback (most recent call last):\nFile \"/home/matt/tensorflow/tensorflow/python/platform/self_check.py\", line 2$, in \nfrom tensorflow.python.platform import build_info\nImportError: cannot import name 'build_info'\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\nFile \"\", line 1, in \nFile \"/home/matt/tensorflow/tensorflow/init.py\", line 24, in \nfrom tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-i$port\nFile \"/home/matt/tensorflow/tensorflow/python/init.py\", line 49, in \nfrom tensorflow.python import pywrap_tensorflow\nFile \"/home/matt/tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 25,\nin \nfrom tensorflow.python.platform import self_check\nFile \"/home/matt/tensorflow/tensorflow/python/platform/self_check.py\", line 27\n, in \nraise ImportError(\"Could not import tensorflow. Do not import tensorflow \"\nImportError: Could not import tensorflow. Do not import tensorflow from its sour\nce directory; change directory to outside the TensorFlow source tree, and relaun\nch your Python interpreter from there.\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\n== cuda libs  ===================================================\nError message from bazel:\nERROR: /home/matt/tensorflow/tensorflow/python/estimator/api/BUILD:12:1: Couldn't build file tensorflow/python/estimator/api/__init__.py: Executing genrule //tensorflow/python/estimator/api:estimator_python_api_gen failed (Exit 1): bash failed: error executing command\n  (cd /home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow && \\\n  exec env - \\\n    PATH=/opt/anaconda3/bin:/opt/anaconda3/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/bin:/sbin:/usr/sbin:/usr/local/bin:/sbin:/usr/sbin \\\n    PYTHON_BIN_PATH=/opt/anaconda3/bin/python \\\n    PYTHON_LIB_PATH=/opt/anaconda3/lib/python3.6/site-packages \\\n    TF_DOWNLOAD_CLANG=0 \\\n    TF_NEED_CUDA=0 \\\n    TF_NEED_OPENCL_SYCL=0 \\\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api  --apidir=bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api --apiname=estimator --apiversion=2 --package=tensorflow.python.estimator --output_package=tensorflow.python.estimator.api bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/export/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/inputs/__init__.py')\ntf.estimator package not installed.\nTraceback (most recent call last):\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 511, in <module>\n    main()\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 504, in main\n    importlib.import_module(args.package)\n  File \"/opt/anaconda3/lib/python3.6/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/__init__.py\", line 25, in <module>\n    import tensorflow.python.estimator.estimator_lib\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/estimator_lib.py\", line 41, in <module>\n    from tensorflow.python.estimator.inputs import inputs\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/inputs/inputs.py\", line 23, in <module>\n    from tensorflow.python.estimator.inputs.pandas_io import pandas_input_fn\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/inputs/pandas_io.py\", line 31, in <module>\n    import pandas as pd\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/__init__.py\", line 42, in <module>\n    from pandas.core.api import *\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/api.py\", line 10, in <module>\n    from pandas.core.groupby.groupby import Grouper\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/groupby/__init__.py\", line 2, in <module>\n    from pandas.core.groupby.groupby import (\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/groupby/groupby.py\", line 49, in <module>\n    from pandas.core.frame import DataFrame\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py\", line 74, in <module>\n    from pandas.core.series import Series\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/series.py\", line 67, in <module>\n    import pandas.core.ops as ops\nAttributeError: module 'pandas' has no attribute 'core'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build", "body": "This may be a bug in the Python PIP build script(s), or something askew in my environment.  I am trying to build Tensorflow from source, to include AVX/AVX2 support.  It always fails with the error log pasted below.  I have tried the latest git pull over the last week or so (i.e. multiple git pulls, followed by \"bazel clean ; bazel build <options>\".  I have also tried the same with the r1.10 branch.\r\n\r\nThere is [this somewhat similar question on StackOverflow](https://stackoverflow.com/questions/36521691/importing-pandas-gives-error-attributeerror-module-pandas-has-no-attribute-c).  That is more about using Pandas, rather than building Tensorflow.  At any rate I tried all the suggestions to no avail.  And my Pandas is working:\r\n\r\n```\r\n$ python -c \"import pandas as pd ; import pandas.core.ops as ops ; print(pd.__version__)\" && echo $?\r\n0.23.4\r\n0\r\n```\r\n\r\nSystem Details:\r\n-----------------\r\n\r\n  - Have I written custom code: NO\r\n  - OS Platform and Distribution: CentOS Linux 7.4.1708 with Anaconda Python3 distribution\r\n  - Mobile device: N/A\r\n  - TensorFlow installed from: not yet installed, trying to build from source (no build-halting errors during the C/C++ portion of the build)\r\n  - TensorFlow version: latest git pull over the last several days, both master and r1.10 branch\r\n  - Python version: Python 3.6.6 :: Anaconda custom (64-bit)\r\n  - Bazel version (if compiling from source):\r\n```\r\n$ bazel version\r\nBuild label: 0.16.0- (@non-git)\r\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Tue Jul 31 18:27:17 2018 (1533061637)\r\nBuild timestamp: 1533061637\r\nBuild timestamp as int: 1533061637\r\n```\r\n  - GCC/Compiler version: gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-16)\r\n  - CUDA/cuDNN version: N/A\r\n  - GPU model and memory: N/A\r\n  - Exact command to reproduce:\r\n```\r\n  $ git clone https://github.com/tensorflow/tensorflow.git\r\n  $ cd tensorflow\r\n  $ ./configure # accept all defaults\r\n  $ bazel build -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 --verbose_failures -k //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\nOutput of tf_env_collect.sh:\r\n------------------------------\r\n\r\n== cat /etc/issue ===============================================\r\nLinux septictank 3.10.0-693.21.1.el7.x86_64 #1 SMP Wed Mar 7 19:03:37 UTC 2018 x\r\n86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"7 (Core)\"\r\nVERSION_ID=\"7\"\r\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\r\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-16)\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux septictank 3.10.0-693.21.1.el7.x86_64 #1 SMP Wed Mar 7 19:03:37 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy                              1.15.0\r\nnumpydoc                           0.8.0\r\nprotobuf                           3.5.2\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\nTraceback (most recent call last):\r\n  File \"/home/matt/tensorflow/tensorflow/python/platform/self_check.py\", line 2$, in <module>\r\n    from tensorflow.python.platform import build_info\r\nImportError: cannot import name 'build_info'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/matt/tensorflow/tensorflow/__init__.py\", line 24, in <module>\r\n    from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-i$port\r\n  File \"/home/matt/tensorflow/tensorflow/python/__init__.py\", line 49, in <modul\r\ne>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/home/matt/tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 25,\r\nin <module>\r\n    from tensorflow.python.platform import self_check\r\n  File \"/home/matt/tensorflow/tensorflow/python/platform/self_check.py\", line 27\r\n, in <module>\r\n    raise ImportError(\"Could not import tensorflow. Do not import tensorflow \"\r\nImportError: Could not import tensorflow. Do not import tensorflow from its sour\r\nce directory; change directory to outside the TensorFlow source tree, and relaun\r\nch your Python interpreter from there.\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n\r\n\r\nError message from bazel:\r\n-----------------------------\r\n```\r\nERROR: /home/matt/tensorflow/tensorflow/python/estimator/api/BUILD:12:1: Couldn't build file tensorflow/python/estimator/api/__init__.py: Executing genrule //tensorflow/python/estimator/api:estimator_python_api_gen failed (Exit 1): bash failed: error executing command\r\n  (cd /home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/opt/anaconda3/bin:/opt/anaconda3/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/bin:/sbin:/usr/sbin:/usr/local/bin:/sbin:/usr/sbin \\\r\n    PYTHON_BIN_PATH=/opt/anaconda3/bin/python \\\r\n    PYTHON_LIB_PATH=/opt/anaconda3/lib/python3.6/site-packages \\\r\n    TF_DOWNLOAD_CLANG=0 \\\r\n    TF_NEED_CUDA=0 \\\r\n    TF_NEED_OPENCL_SYCL=0 \\\r\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api  --apidir=bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api --apiname=estimator --apiversion=2 --package=tensorflow.python.estimator --output_package=tensorflow.python.estimator.api bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/export/__init__.py bazel-out/k8-opt/genfiles/tensorflow/python/estimator/api/estimator/inputs/__init__.py')\r\ntf.estimator package not installed.\r\nTraceback (most recent call last):\r\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 511, in <module>\r\n    main()\r\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 504, in main\r\n    importlib.import_module(args.package)\r\n  File \"/opt/anaconda3/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/__init__.py\", line 25, in <module>\r\n    import tensorflow.python.estimator.estimator_lib\r\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/estimator_lib.py\", line 41, in <module>\r\n    from tensorflow.python.estimator.inputs import inputs\r\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/inputs/inputs.py\", line 23, in <module>\r\n    from tensorflow.python.estimator.inputs.pandas_io import pandas_input_fn\r\n  File \"/home/matt/.cache/bazel/_bazel_matt/b51f46dcf2ef174fa43a943ad13629f0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/estimator/api/create_tensorflow.python.estimator_api.runfiles/org_tensorflow/tensorflow/python/estimator/inputs/pandas_io.py\", line 31, in <module>\r\n    import pandas as pd\r\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/__init__.py\", line 42, in <module>\r\n    from pandas.core.api import *\r\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/api.py\", line 10, in <module>\r\n    from pandas.core.groupby.groupby import Grouper\r\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/groupby/__init__.py\", line 2, in <module>\r\n    from pandas.core.groupby.groupby import (\r\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/groupby/groupby.py\", line 49, in <module>\r\n    from pandas.core.frame import DataFrame\r\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py\", line 74, in <module>\r\n    from pandas.core.series import Series\r\n  File \"/opt/anaconda3/lib/python3.6/site-packages/pandas/core/series.py\", line 67, in <module>\r\n    import pandas.core.ops as ops\r\nAttributeError: module 'pandas' has no attribute 'core'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n```\r\n"}
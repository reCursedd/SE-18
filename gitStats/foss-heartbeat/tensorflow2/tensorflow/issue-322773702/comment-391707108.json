{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/391707108", "html_url": "https://github.com/tensorflow/tensorflow/issues/19265#issuecomment-391707108", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19265", "id": 391707108, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTcwNzEwOA==", "user": {"login": "ccolby", "id": 15960281, "node_id": "MDQ6VXNlcjE1OTYwMjgx", "avatar_url": "https://avatars1.githubusercontent.com/u/15960281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccolby", "html_url": "https://github.com/ccolby", "followers_url": "https://api.github.com/users/ccolby/followers", "following_url": "https://api.github.com/users/ccolby/following{/other_user}", "gists_url": "https://api.github.com/users/ccolby/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccolby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccolby/subscriptions", "organizations_url": "https://api.github.com/users/ccolby/orgs", "repos_url": "https://api.github.com/users/ccolby/repos", "events_url": "https://api.github.com/users/ccolby/events{/privacy}", "received_events_url": "https://api.github.com/users/ccolby/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-24T13:05:02Z", "updated_at": "2018-05-24T13:05:02Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=24707558\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/syltruong\">@syltruong</a> I'm referring to the <a href=\"https://www.tensorflow.org/api_docs/python/tf/nn/embedding_lookup\" rel=\"nofollow\"><code>tf.nn.embedding_lookup</code> documentation</a>. That documentation describes how the two supported partitioning strategies work\u2014<code>\"div\"</code> and <code>\"mod\"</code>. It also clarifies that for the <code>params</code> argument:</p>\n<blockquote>\n<p>Each element must be appropriately sized for the given <code>partition_strategy</code></p>\n</blockquote>\n<p>As for why <code>tf.nn.embedding_lookup</code> doesn't support arbitrary partitioning, it is most likely because the <code>\"div\"</code> and <code>\"mod\"</code> strategies cover the common use case of balanced partitions and are easy to compute. It is a simple and efficient formula to map from <code>index</code> to <code>(partition number, index within partition)</code>. There is certainly no reason why you can't implement the more general case, but the code will be more complex, with more ops required to implement that index mapping.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13089297\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/robieta\">@robieta</a> I suggest closing this issue, since there is no bug. (I cannot do it.)<br>\n<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=24707558\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/syltruong\">@syltruong</a> Consider posting further questions to stackoverflow.</p>", "body_text": "@syltruong I'm referring to the tf.nn.embedding_lookup documentation. That documentation describes how the two supported partitioning strategies work\u2014\"div\" and \"mod\". It also clarifies that for the params argument:\n\nEach element must be appropriately sized for the given partition_strategy\n\nAs for why tf.nn.embedding_lookup doesn't support arbitrary partitioning, it is most likely because the \"div\" and \"mod\" strategies cover the common use case of balanced partitions and are easy to compute. It is a simple and efficient formula to map from index to (partition number, index within partition). There is certainly no reason why you can't implement the more general case, but the code will be more complex, with more ops required to implement that index mapping.\n@robieta I suggest closing this issue, since there is no bug. (I cannot do it.)\n@syltruong Consider posting further questions to stackoverflow.", "body": "@syltruong I'm referring to the [`tf.nn.embedding_lookup` documentation](https://www.tensorflow.org/api_docs/python/tf/nn/embedding_lookup). That documentation describes how the two supported partitioning strategies work\u2014`\"div\"` and `\"mod\"`. It also clarifies that for the `params` argument:\r\n\r\n> Each element must be appropriately sized for the given `partition_strategy`\r\n\r\nAs for why `tf.nn.embedding_lookup` doesn't support arbitrary partitioning, it is most likely because the `\"div\"` and `\"mod\"` strategies cover the common use case of balanced partitions and are easy to compute. It is a simple and efficient formula to map from `index` to `(partition number, index within partition)`. There is certainly no reason why you can't implement the more general case, but the code will be more complex, with more ops required to implement that index mapping.\r\n\r\n@robieta I suggest closing this issue, since there is no bug. (I cannot do it.)\r\n@syltruong Consider posting further questions to stackoverflow."}
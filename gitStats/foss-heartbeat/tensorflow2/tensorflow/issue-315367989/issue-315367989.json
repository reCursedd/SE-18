{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18635", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18635/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18635/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18635/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18635", "id": 315367989, "node_id": "MDU6SXNzdWUzMTUzNjc5ODk=", "number": 18635, "title": "Strange result of float division", "user": {"login": "weichiche", "id": 7419189, "node_id": "MDQ6VXNlcjc0MTkxODk=", "avatar_url": "https://avatars2.githubusercontent.com/u/7419189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weichiche", "html_url": "https://github.com/weichiche", "followers_url": "https://api.github.com/users/weichiche/followers", "following_url": "https://api.github.com/users/weichiche/following{/other_user}", "gists_url": "https://api.github.com/users/weichiche/gists{/gist_id}", "starred_url": "https://api.github.com/users/weichiche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weichiche/subscriptions", "organizations_url": "https://api.github.com/users/weichiche/orgs", "repos_url": "https://api.github.com/users/weichiche/repos", "events_url": "https://api.github.com/users/weichiche/events{/privacy}", "received_events_url": "https://api.github.com/users/weichiche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-04-18T07:48:58Z", "updated_at": "2018-05-29T18:16:46Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nLinux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nbinary</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.5.0</li>\n<li><strong>Python version</strong>:<br>\n3.5.2</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\n9.0</li>\n<li><strong>GPU model and memory</strong>:<br>\nGTX 1080Ti</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>The below Numpy and TensorFlow codelets produce different results, while I suppose they should be the same.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> numpy <span class=\"pl-k\">as</span> np\n<span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\nx <span class=\"pl-k\">=</span> np.array([<span class=\"pl-c1\">247</span>.], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>np.float32)\ny <span class=\"pl-k\">=</span> x <span class=\"pl-k\">/</span> <span class=\"pl-c1\">255</span>.\n<span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span><span class=\"pl-c1\">{<span class=\"pl-k\">:12.10f</span>}</span><span class=\"pl-pds\">'</span></span>.format(y[<span class=\"pl-c1\">0</span>]))\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> 0.9686274529</span>\n\na <span class=\"pl-k\">=</span> tf.placeholder(tf.float32)\nb <span class=\"pl-k\">=</span> a <span class=\"pl-k\">/</span> <span class=\"pl-c1\">255</span>.\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    _b <span class=\"pl-k\">=</span> sess.run(b, <span class=\"pl-v\">feed_dict</span><span class=\"pl-k\">=</span>{a: x})\n<span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span><span class=\"pl-c1\">{<span class=\"pl-k\">:12.10f</span>}</span><span class=\"pl-pds\">'</span></span>.format(_b[<span class=\"pl-c1\">0</span>]))\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> 0.9686275125</span></pre></div>\n<p>Running on CPU gives the same issue.</p>\n<p>However, if I use <code>a = tf.constant(x, dtype=tf.float32)</code> instead of <code>tf.placeholder</code>, the result seems correct.</p>\n<p>Is this an issue about <code>tf.placeholder</code> or something else? Does this affect other operations?</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nLinux Ubuntu 16.04\nTensorFlow installed from (source or binary):\nbinary\nTensorFlow version (use command below):\n1.5.0\nPython version:\n3.5.2\nCUDA/cuDNN version:\n9.0\nGPU model and memory:\nGTX 1080Ti\n\nDescribe the problem\nThe below Numpy and TensorFlow codelets produce different results, while I suppose they should be the same.\nimport numpy as np\nimport tensorflow as tf\n\nx = np.array([247.], dtype=np.float32)\ny = x / 255.\nprint('{:12.10f}'.format(y[0]))\n# 0.9686274529\n\na = tf.placeholder(tf.float32)\nb = a / 255.\nwith tf.Session() as sess:\n    _b = sess.run(b, feed_dict={a: x})\nprint('{:12.10f}'.format(_b[0]))\n# 0.9686275125\nRunning on CPU gives the same issue.\nHowever, if I use a = tf.constant(x, dtype=tf.float32) instead of tf.placeholder, the result seems correct.\nIs this an issue about tf.placeholder or something else? Does this affect other operations?", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nLinux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary\r\n- **TensorFlow version (use command below)**:\r\n1.5.0\r\n- **Python version**: \r\n3.5.2\r\n- **CUDA/cuDNN version**:\r\n9.0\r\n- **GPU model and memory**:\r\nGTX 1080Ti\r\n\r\n### Describe the problem\r\n\r\nThe below Numpy and TensorFlow codelets produce different results, while I suppose they should be the same.\r\n\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nx = np.array([247.], dtype=np.float32)\r\ny = x / 255.\r\nprint('{:12.10f}'.format(y[0]))\r\n# 0.9686274529\r\n\r\na = tf.placeholder(tf.float32)\r\nb = a / 255.\r\nwith tf.Session() as sess:\r\n    _b = sess.run(b, feed_dict={a: x})\r\nprint('{:12.10f}'.format(_b[0]))\r\n# 0.9686275125\r\n```\r\n\r\nRunning on CPU gives the same issue.\r\n\r\nHowever, if I use `a = tf.constant(x, dtype=tf.float32)` instead of `tf.placeholder`, the result seems correct.\r\n\r\nIs this an issue about `tf.placeholder` or something else? Does this affect other operations?"}
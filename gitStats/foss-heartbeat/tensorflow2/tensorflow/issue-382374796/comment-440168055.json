{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/440168055", "html_url": "https://github.com/tensorflow/tensorflow/issues/23859#issuecomment-440168055", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859", "id": 440168055, "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDE2ODA1NQ==", "user": {"login": "iwsmith", "id": 2998356, "node_id": "MDQ6VXNlcjI5OTgzNTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2998356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iwsmith", "html_url": "https://github.com/iwsmith", "followers_url": "https://api.github.com/users/iwsmith/followers", "following_url": "https://api.github.com/users/iwsmith/following{/other_user}", "gists_url": "https://api.github.com/users/iwsmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/iwsmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iwsmith/subscriptions", "organizations_url": "https://api.github.com/users/iwsmith/orgs", "repos_url": "https://api.github.com/users/iwsmith/repos", "events_url": "https://api.github.com/users/iwsmith/events{/privacy}", "received_events_url": "https://api.github.com/users/iwsmith/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-20T07:12:31Z", "updated_at": "2018-11-20T07:12:31Z", "author_association": "NONE", "body_html": "<p>Thanks for the quick followup!<br>\nI've done as you suggested, and am now trying with bazel 0.15.2 and GCC 4.8.5:</p>\n<pre><code>iwsmith@bob:~/tensorflow$ bazel version\nBuild label: 0.15.2\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Jul 17 12:22:40 2018 (1531830160)\nBuild timestamp: 1531830160\nBuild timestamp as int: 1531830160\niwsmith@bob:~/tensorflow$ gcc --version\ngcc (Ubuntu 4.8.5-4ubuntu8) 4.8.5\n</code></pre>\n<p>However, I am still getting the following build errors:</p>\n<pre><code>ERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1995:1: C++ compilation of rule '@llvm//:target' failed (Exit 1)\nIn file included from external/llvm/lib/Target/TargetIntrinsicInfo.cpp:14:\nIn file included from external/llvm/include/llvm/Target/TargetIntrinsicInfo.h:17:\nIn file included from external/llvm/include/llvm/ADT/StringRef.h:13:\nIn file included from external/llvm/include/llvm/ADT/STLExtras.h:21:\nIn file included from external/llvm/include/llvm/ADT/SmallVector.h:20:\nIn file included from external/llvm/include/llvm/Support/MathExtras.h:18:\nIn file included from external/llvm/include/llvm/Support/SwapByteOrder.h:19:\nIn file included from external/llvm/include/llvm/Support/DataTypes.h:17:\nIn file included from external/llvm/include/llvm-c/DataTypes.h:28:\nIn file included from external/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/cmath:305:\nIn file included from external/androidndk/ndk/sources/android/support/include/math.h:32:\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:93: error: no member named 'log2f' in the global namespace\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\n                                                                                          ~~^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:93: error: no member named 'log2l' in the global namespace\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\n                                                                                          ~~^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1308:38: error: call to 'log2' is ambiguous\nlog2(_A1 __lcpp_x) _NOEXCEPT {return ::log2((double)__lcpp_x);}\n                                     ^~~~~~\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\n                                             ^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\n                                             ^\n3 errors generated.\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\n</code></pre>\n<p>Furthermore, at the start of the build I receive the following warning:</p>\n<pre><code>WARNING: The major revision of the Android NDK referenced by android_ndk_repository rule 'androidndk' is 17. The major revisions supported by Bazel are [10, 11, 12, 13, 14, 15, 16]. \nBazel will attempt to treat the NDK as if it was r16. This may cause compilation and linkage problems. Please download a supported NDK version.  \n</code></pre>\n<p>I went ahead and tried with NDK 16b and go the following compile error (which matches the original one):</p>\n<pre><code>ERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1941:1: C++ compilation of rule '@llvm//:support' failed (Exit 1)\nIn file included from external/llvm/lib/Support/Path.cpp:1111:\nexternal/llvm/lib/Support/Unix/Path.inc:633:9: error: no member named 'futimens' in the global namespace\n  if (::futimens(FD, Times))\n      ~~^\n1 error generated.\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\n</code></pre>", "body_text": "Thanks for the quick followup!\nI've done as you suggested, and am now trying with bazel 0.15.2 and GCC 4.8.5:\niwsmith@bob:~/tensorflow$ bazel version\nBuild label: 0.15.2\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Jul 17 12:22:40 2018 (1531830160)\nBuild timestamp: 1531830160\nBuild timestamp as int: 1531830160\niwsmith@bob:~/tensorflow$ gcc --version\ngcc (Ubuntu 4.8.5-4ubuntu8) 4.8.5\n\nHowever, I am still getting the following build errors:\nERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1995:1: C++ compilation of rule '@llvm//:target' failed (Exit 1)\nIn file included from external/llvm/lib/Target/TargetIntrinsicInfo.cpp:14:\nIn file included from external/llvm/include/llvm/Target/TargetIntrinsicInfo.h:17:\nIn file included from external/llvm/include/llvm/ADT/StringRef.h:13:\nIn file included from external/llvm/include/llvm/ADT/STLExtras.h:21:\nIn file included from external/llvm/include/llvm/ADT/SmallVector.h:20:\nIn file included from external/llvm/include/llvm/Support/MathExtras.h:18:\nIn file included from external/llvm/include/llvm/Support/SwapByteOrder.h:19:\nIn file included from external/llvm/include/llvm/Support/DataTypes.h:17:\nIn file included from external/llvm/include/llvm-c/DataTypes.h:28:\nIn file included from external/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/cmath:305:\nIn file included from external/androidndk/ndk/sources/android/support/include/math.h:32:\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:93: error: no member named 'log2f' in the global namespace\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\n                                                                                          ~~^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:93: error: no member named 'log2l' in the global namespace\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\n                                                                                          ~~^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1308:38: error: call to 'log2' is ambiguous\nlog2(_A1 __lcpp_x) _NOEXCEPT {return ::log2((double)__lcpp_x);}\n                                     ^~~~~~\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\n                                             ^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\n                                             ^\n3 errors generated.\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\n\nFurthermore, at the start of the build I receive the following warning:\nWARNING: The major revision of the Android NDK referenced by android_ndk_repository rule 'androidndk' is 17. The major revisions supported by Bazel are [10, 11, 12, 13, 14, 15, 16]. \nBazel will attempt to treat the NDK as if it was r16. This may cause compilation and linkage problems. Please download a supported NDK version.  \n\nI went ahead and tried with NDK 16b and go the following compile error (which matches the original one):\nERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1941:1: C++ compilation of rule '@llvm//:support' failed (Exit 1)\nIn file included from external/llvm/lib/Support/Path.cpp:1111:\nexternal/llvm/lib/Support/Unix/Path.inc:633:9: error: no member named 'futimens' in the global namespace\n  if (::futimens(FD, Times))\n      ~~^\n1 error generated.\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build", "body": "Thanks for the quick followup! \r\nI've done as you suggested, and am now trying with bazel 0.15.2 and GCC 4.8.5:\r\n```\r\niwsmith@bob:~/tensorflow$ bazel version\r\nBuild label: 0.15.2\r\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Tue Jul 17 12:22:40 2018 (1531830160)\r\nBuild timestamp: 1531830160\r\nBuild timestamp as int: 1531830160\r\niwsmith@bob:~/tensorflow$ gcc --version\r\ngcc (Ubuntu 4.8.5-4ubuntu8) 4.8.5\r\n```\r\nHowever, I am still getting the following build errors:\r\n```\r\nERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1995:1: C++ compilation of rule '@llvm//:target' failed (Exit 1)\r\nIn file included from external/llvm/lib/Target/TargetIntrinsicInfo.cpp:14:\r\nIn file included from external/llvm/include/llvm/Target/TargetIntrinsicInfo.h:17:\r\nIn file included from external/llvm/include/llvm/ADT/StringRef.h:13:\r\nIn file included from external/llvm/include/llvm/ADT/STLExtras.h:21:\r\nIn file included from external/llvm/include/llvm/ADT/SmallVector.h:20:\r\nIn file included from external/llvm/include/llvm/Support/MathExtras.h:18:\r\nIn file included from external/llvm/include/llvm/Support/SwapByteOrder.h:19:\r\nIn file included from external/llvm/include/llvm/Support/DataTypes.h:17:\r\nIn file included from external/llvm/include/llvm-c/DataTypes.h:28:\r\nIn file included from external/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/cmath:305:\r\nIn file included from external/androidndk/ndk/sources/android/support/include/math.h:32:\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:93: error: no member named 'log2f' in the global namespace\r\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\r\n                                                                                          ~~^\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:93: error: no member named 'log2l' in the global namespace\r\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\r\n                                                                                          ~~^\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1308:38: error: call to 'log2' is ambiguous\r\nlog2(_A1 __lcpp_x) _NOEXCEPT {return ::log2((double)__lcpp_x);}\r\n                                     ^~~~~~\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:46: note: candidate function\r\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\r\n                                             ^\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:46: note: candidate function\r\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\r\n                                             ^\r\n3 errors generated.\r\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\r\n```\r\n\r\nFurthermore, at the start of the build I receive the following warning:\r\n```\r\nWARNING: The major revision of the Android NDK referenced by android_ndk_repository rule 'androidndk' is 17. The major revisions supported by Bazel are [10, 11, 12, 13, 14, 15, 16]. \r\nBazel will attempt to treat the NDK as if it was r16. This may cause compilation and linkage problems. Please download a supported NDK version.  \r\n```\r\n\r\nI went ahead and tried with NDK 16b and go the following compile error (which matches the original one):\r\n```\r\nERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1941:1: C++ compilation of rule '@llvm//:support' failed (Exit 1)\r\nIn file included from external/llvm/lib/Support/Path.cpp:1111:\r\nexternal/llvm/lib/Support/Unix/Path.inc:633:9: error: no member named 'futimens' in the global namespace\r\n  if (::futimens(FD, Times))\r\n      ~~^\r\n1 error generated.\r\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\r\n```"}
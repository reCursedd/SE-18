{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23859/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23859", "id": 382374796, "node_id": "MDU6SXNzdWUzODIzNzQ3OTY=", "number": 23859, "title": "Android Bazel Build Error ", "user": {"login": "iwsmith", "id": 2998356, "node_id": "MDQ6VXNlcjI5OTgzNTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2998356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iwsmith", "html_url": "https://github.com/iwsmith", "followers_url": "https://api.github.com/users/iwsmith/followers", "following_url": "https://api.github.com/users/iwsmith/following{/other_user}", "gists_url": "https://api.github.com/users/iwsmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/iwsmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iwsmith/subscriptions", "organizations_url": "https://api.github.com/users/iwsmith/orgs", "repos_url": "https://api.github.com/users/iwsmith/repos", "events_url": "https://api.github.com/users/iwsmith/events{/privacy}", "received_events_url": "https://api.github.com/users/iwsmith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-19T20:11:37Z", "updated_at": "2018-11-20T21:41:00Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><strong>System information</strong></p>\n<ul>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04</li>\n<li>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:</li>\n<li>TensorFlow installed from (source or binary): source</li>\n<li>TensorFlow version: master (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/5c60fb7e9b90d6641c2b5848773ef49956ed54e3/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/5c60fb7e9b90d6641c2b5848773ef49956ed54e3\"><tt>5c60fb7</tt></a>)</li>\n<li>Python version: Python 2.7.15rc1</li>\n<li>Installed using virtualenv? pip? conda?: pip</li>\n<li>Bazel version (if compiling from source): 0.19.1</li>\n<li>GCC/Compiler version (if compiling from source): gcc 7.3.0</li>\n<li>CUDA/cuDNN version:</li>\n<li>GPU model and memory:</li>\n</ul>\n<p>I am trying to build <code>//tensorflow/contrib/android:libtensorflow_inference.so</code> so I can use some new ops (cos specifically) in my graph, but am getting build errors:</p>\n<pre><code>ERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1941:1: C++ compilation of rule '@llvm//:support' failed (Exit 1)\nIn file included from external/llvm/lib/Support/Path.cpp:1111:                        \nexternal/llvm/lib/Support/Unix/Path.inc:633:9: error: no member named 'futimens' in the global namespace\n  if (::futimens(FD, Times))                                                                                                     \n      ~~^                                                                                                                                                                             1 error generated.                                                    \nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\n</code></pre>\n<p>NDK: r17c<br>\nSDK: 28</p>\n<pre lang=\"iwsmith@bob:~/sdk/tools$\" data-meta=\"bin/sdkmanager --list\"><code>Warning: File /home/iwsmith/.android/repositories.cfg could not be loaded.                                                                                           \nInstalled packages:=====================] 100% Computing updates...                                                                                  \n  Path                 | Version | Description                       | Location                                                                      \n  -------              | ------- | -------                           | -------                                                                        \n  build-tools;28.0.3   | 28.0.3  | Android SDK Build-Tools 28.0.3    | build-tools/28.0.3/                                                          \n  platform-tools       | 28.0.1  | Android SDK Platform-Tools 28.0.1 | platform-tools/                                                                \n  platforms;android-28 | 6       | Android SDK Platform 28           | platforms/android-28/                                                        \n  tools                | 26.1.1  | Android SDK Tools 26.1.1          | tools/    \n</code></pre>\n<p><strong>Provide the exact sequence of commands / steps that you executed before running into the problem</strong></p>\n<ol>\n<li><code>git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git</code></li>\n<li><code>./configure</code></li>\n<li><code>bazel clean</code></li>\n<li><code>bazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so --crosstool_top=//external:android/crosstool    --host_crosstool_top=@bazel_tools//tools/cpp:toolchain    --cxxopt=-std=c++11    --cpu=armeabi-v7a</code></li>\n</ol>\n<p><strong>Any other info / logs</strong><br>\nI have tried with a variety of NDK versions (18b, 14b) and get different build errors each time. I also tried with <code>--cpu=arm64-v8a</code> and got build errors. I am unsure which cpu architecture to target for the Pixel.</p>", "body_text": "System information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nTensorFlow installed from (source or binary): source\nTensorFlow version: master (5c60fb7)\nPython version: Python 2.7.15rc1\nInstalled using virtualenv? pip? conda?: pip\nBazel version (if compiling from source): 0.19.1\nGCC/Compiler version (if compiling from source): gcc 7.3.0\nCUDA/cuDNN version:\nGPU model and memory:\n\nI am trying to build //tensorflow/contrib/android:libtensorflow_inference.so so I can use some new ops (cos specifically) in my graph, but am getting build errors:\nERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1941:1: C++ compilation of rule '@llvm//:support' failed (Exit 1)\nIn file included from external/llvm/lib/Support/Path.cpp:1111:                        \nexternal/llvm/lib/Support/Unix/Path.inc:633:9: error: no member named 'futimens' in the global namespace\n  if (::futimens(FD, Times))                                                                                                     \n      ~~^                                                                                                                                                                             1 error generated.                                                    \nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\n\nNDK: r17c\nSDK: 28\nWarning: File /home/iwsmith/.android/repositories.cfg could not be loaded.                                                                                           \nInstalled packages:=====================] 100% Computing updates...                                                                                  \n  Path                 | Version | Description                       | Location                                                                      \n  -------              | ------- | -------                           | -------                                                                        \n  build-tools;28.0.3   | 28.0.3  | Android SDK Build-Tools 28.0.3    | build-tools/28.0.3/                                                          \n  platform-tools       | 28.0.1  | Android SDK Platform-Tools 28.0.1 | platform-tools/                                                                \n  platforms;android-28 | 6       | Android SDK Platform 28           | platforms/android-28/                                                        \n  tools                | 26.1.1  | Android SDK Tools 26.1.1          | tools/    \n\nProvide the exact sequence of commands / steps that you executed before running into the problem\n\ngit clone --recurse-submodules https://github.com/tensorflow/tensorflow.git\n./configure\nbazel clean\nbazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so --crosstool_top=//external:android/crosstool    --host_crosstool_top=@bazel_tools//tools/cpp:toolchain    --cxxopt=-std=c++11    --cpu=armeabi-v7a\n\nAny other info / logs\nI have tried with a variety of NDK versions (18b, 14b) and get different build errors each time. I also tried with --cpu=arm64-v8a and got build errors. I am unsure which cpu architecture to target for the Pixel.", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: \r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: master (5c60fb7e9b90d6641c2b5848773ef49956ed54e3)\r\n- Python version: Python 2.7.15rc1\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.19.1\r\n- GCC/Compiler version (if compiling from source): gcc 7.3.0\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nI am trying to build `//tensorflow/contrib/android:libtensorflow_inference.so` so I can use some new ops (cos specifically) in my graph, but am getting build errors:\r\n```\r\nERROR: /home/iwsmith/.cache/bazel/_bazel_iwsmith/df6342feda2c8ba7bff417a851a0ca71/external/llvm/BUILD.bazel:1941:1: C++ compilation of rule '@llvm//:support' failed (Exit 1)\r\nIn file included from external/llvm/lib/Support/Path.cpp:1111:                        \r\nexternal/llvm/lib/Support/Unix/Path.inc:633:9: error: no member named 'futimens' in the global namespace\r\n  if (::futimens(FD, Times))                                                                                                     \r\n      ~~^                                                                                                                                                                             1 error generated.                                                    \r\nTarget //tensorflow/contrib/android:libtensorflow_inference.so failed to build\r\n```\r\nNDK: r17c\r\nSDK: 28\r\n```iwsmith@bob:~/sdk/tools$ bin/sdkmanager --list                                                                                                       \r\nWarning: File /home/iwsmith/.android/repositories.cfg could not be loaded.                                                                                           \r\nInstalled packages:=====================] 100% Computing updates...                                                                                  \r\n  Path                 | Version | Description                       | Location                                                                      \r\n  -------              | ------- | -------                           | -------                                                                        \r\n  build-tools;28.0.3   | 28.0.3  | Android SDK Build-Tools 28.0.3    | build-tools/28.0.3/                                                          \r\n  platform-tools       | 28.0.1  | Android SDK Platform-Tools 28.0.1 | platform-tools/                                                                \r\n  platforms;android-28 | 6       | Android SDK Platform 28           | platforms/android-28/                                                        \r\n  tools                | 26.1.1  | Android SDK Tools 26.1.1          | tools/    \r\n```\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n1. `git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git`\r\n1. `./configure`\r\n1. `bazel clean`\r\n1. `bazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so --crosstool_top=//external:android/crosstool    --host_crosstool_top=@bazel_tools//tools/cpp:toolchain    --cxxopt=-std=c++11    --cpu=armeabi-v7a`\r\n\r\n**Any other info / logs**\r\nI have tried with a variety of NDK versions (18b, 14b) and get different build errors each time. I also tried with `--cpu=arm64-v8a` and got build errors. I am unsure which cpu architecture to target for the Pixel.\r\n"}
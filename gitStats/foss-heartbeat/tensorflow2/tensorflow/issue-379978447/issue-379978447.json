{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23695", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23695/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23695/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23695/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23695", "id": 379978447, "node_id": "MDU6SXNzdWUzNzk5Nzg0NDc=", "number": 23695, "title": "Failure to parse PYTHONPATH to find keras_preprocessing?", "user": {"login": "coreyjadams", "id": 6619961, "node_id": "MDQ6VXNlcjY2MTk5NjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/6619961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coreyjadams", "html_url": "https://github.com/coreyjadams", "followers_url": "https://api.github.com/users/coreyjadams/followers", "following_url": "https://api.github.com/users/coreyjadams/following{/other_user}", "gists_url": "https://api.github.com/users/coreyjadams/gists{/gist_id}", "starred_url": "https://api.github.com/users/coreyjadams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coreyjadams/subscriptions", "organizations_url": "https://api.github.com/users/coreyjadams/orgs", "repos_url": "https://api.github.com/users/coreyjadams/repos", "events_url": "https://api.github.com/users/coreyjadams/events{/privacy}", "received_events_url": "https://api.github.com/users/coreyjadams/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": {"login": "harshini-gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshini-gadige", "html_url": "https://github.com/harshini-gadige", "followers_url": "https://api.github.com/users/harshini-gadige/followers", "following_url": "https://api.github.com/users/harshini-gadige/following{/other_user}", "gists_url": "https://api.github.com/users/harshini-gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshini-gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshini-gadige/subscriptions", "organizations_url": "https://api.github.com/users/harshini-gadige/orgs", "repos_url": "https://api.github.com/users/harshini-gadige/repos", "events_url": "https://api.github.com/users/harshini-gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/harshini-gadige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "harshini-gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshini-gadige", "html_url": "https://github.com/harshini-gadige", "followers_url": "https://api.github.com/users/harshini-gadige/followers", "following_url": "https://api.github.com/users/harshini-gadige/following{/other_user}", "gists_url": "https://api.github.com/users/harshini-gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshini-gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshini-gadige/subscriptions", "organizations_url": "https://api.github.com/users/harshini-gadige/orgs", "repos_url": "https://api.github.com/users/harshini-gadige/repos", "events_url": "https://api.github.com/users/harshini-gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/harshini-gadige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-11-12T22:30:52Z", "updated_at": "2018-11-19T20:13:49Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><strong>System information</strong></p>\n<ul>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux variant</li>\n<li>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A</li>\n<li>TensorFlow installed from (source or binary): source</li>\n<li>TensorFlow version: (master branch, latest commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/e84d75dd7429cdcbfa20518cce4a0e886271cfa0/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/e84d75dd7429cdcbfa20518cce4a0e886271cfa0\"><tt>e84d75d</tt></a>)</li>\n<li>Python version: 3.6.5.1</li>\n<li>Installed using virtualenv? pip? conda?: No</li>\n<li>Bazel version (if compiling from source): 0.18.1</li>\n<li>GCC/Compiler version (if compiling from source): gcc 7.3.0</li>\n<li>CUDA/cuDNN version: N/A</li>\n<li>GPU model and memory: N/A</li>\n</ul>\n<p><strong>Describe the problem</strong></p>\n<p>I am trying to build tensorflow from source using mkl-dnn.  The command I use for compilation is</p>\n<pre><code>../bazel-0.18.1/output/bazel build --config=mkl -c opt --copt=-g --strip=never --copt='-Wl,rpath=/opt/gcc/7.3.0/snos' --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mavx512f --copt=-mavx512pf --copt=-mavx512cd --copt=-mavx512er --copt='-mtune=knl' --copt=\"-DEIGEN_USE_VML\" //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<p>I get the error eventually:</p>\n<pre><code>from tensorflow.python.keras.preprocessing.sequence import _remove_long_seq\n  File \"/gpfs/mira-home/cadams/.cache/bazel/_bazel_cadams/33ea5823a114d12c2a1643d7402e760f/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/keras/preprocessing/__init__.py\", line 21, in &lt;module&gt;\n    import keras_preprocessing\nModuleNotFoundError: No module named 'keras_preprocessing'\n</code></pre>\n<p>Following several leads on the internet (such as <a href=\"https://stackoverflow.com/questions/51771039/error-compiling-tensorflow-from-source-no-module-named-keras-applications/51774943#51774943\" rel=\"nofollow\">https://stackoverflow.com/questions/51771039/error-compiling-tensorflow-from-source-no-module-named-keras-applications/51774943#51774943</a>), I installed keras_preprocessing, keras_applications, h5py and put them on PYTHONPATH. This did not work.</p>\n<p>Ultimately, the solution that <em>did</em> work was to manually edit the file tensorflow/python/keras/preprocessing/<strong>init</strong>.py to import sys and for the folder containing keras_preprocessing to be added using sys.path.append.</p>", "body_text": "System information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux variant\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\nTensorFlow installed from (source or binary): source\nTensorFlow version: (master branch, latest commit e84d75d)\nPython version: 3.6.5.1\nInstalled using virtualenv? pip? conda?: No\nBazel version (if compiling from source): 0.18.1\nGCC/Compiler version (if compiling from source): gcc 7.3.0\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\n\nDescribe the problem\nI am trying to build tensorflow from source using mkl-dnn.  The command I use for compilation is\n../bazel-0.18.1/output/bazel build --config=mkl -c opt --copt=-g --strip=never --copt='-Wl,rpath=/opt/gcc/7.3.0/snos' --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mavx512f --copt=-mavx512pf --copt=-mavx512cd --copt=-mavx512er --copt='-mtune=knl' --copt=\"-DEIGEN_USE_VML\" //tensorflow/tools/pip_package:build_pip_package\n\nI get the error eventually:\nfrom tensorflow.python.keras.preprocessing.sequence import _remove_long_seq\n  File \"/gpfs/mira-home/cadams/.cache/bazel/_bazel_cadams/33ea5823a114d12c2a1643d7402e760f/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/keras/preprocessing/__init__.py\", line 21, in <module>\n    import keras_preprocessing\nModuleNotFoundError: No module named 'keras_preprocessing'\n\nFollowing several leads on the internet (such as https://stackoverflow.com/questions/51771039/error-compiling-tensorflow-from-source-no-module-named-keras-applications/51774943#51774943), I installed keras_preprocessing, keras_applications, h5py and put them on PYTHONPATH. This did not work.\nUltimately, the solution that did work was to manually edit the file tensorflow/python/keras/preprocessing/init.py to import sys and for the folder containing keras_preprocessing to be added using sys.path.append.", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux variant\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: (master branch, latest commit e84d75dd7429cdcbfa20518cce4a0e886271cfa0)\r\n- Python version: 3.6.5.1\r\n- Installed using virtualenv? pip? conda?: No\r\n- Bazel version (if compiling from source): 0.18.1\r\n- GCC/Compiler version (if compiling from source): gcc 7.3.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI am trying to build tensorflow from source using mkl-dnn.  The command I use for compilation is \r\n```\r\n../bazel-0.18.1/output/bazel build --config=mkl -c opt --copt=-g --strip=never --copt='-Wl,rpath=/opt/gcc/7.3.0/snos' --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mavx512f --copt=-mavx512pf --copt=-mavx512cd --copt=-mavx512er --copt='-mtune=knl' --copt=\"-DEIGEN_USE_VML\" //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\nI get the error eventually:\r\n```\r\nfrom tensorflow.python.keras.preprocessing.sequence import _remove_long_seq\r\n  File \"/gpfs/mira-home/cadams/.cache/bazel/_bazel_cadams/33ea5823a114d12c2a1643d7402e760f/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/keras/preprocessing/__init__.py\", line 21, in <module>\r\n    import keras_preprocessing\r\nModuleNotFoundError: No module named 'keras_preprocessing'\r\n```\r\n\r\nFollowing several leads on the internet (such as https://stackoverflow.com/questions/51771039/error-compiling-tensorflow-from-source-no-module-named-keras-applications/51774943#51774943), I installed keras_preprocessing, keras_applications, h5py and put them on PYTHONPATH. This did not work.   \r\n\r\nUltimately, the solution that *did* work was to manually edit the file tensorflow/python/keras/preprocessing/__init__.py to import sys and for the folder containing keras_preprocessing to be added using sys.path.append.\r\n\r\n"}
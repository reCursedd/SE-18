{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18363", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18363/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18363/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18363/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18363", "id": 312702715, "node_id": "MDU6SXNzdWUzMTI3MDI3MTU=", "number": 18363, "title": "Won't build on Ubuntu 16, CUDA 9.0", "user": {"login": "grahammorehead", "id": 11891733, "node_id": "MDQ6VXNlcjExODkxNzMz", "avatar_url": "https://avatars2.githubusercontent.com/u/11891733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grahammorehead", "html_url": "https://github.com/grahammorehead", "followers_url": "https://api.github.com/users/grahammorehead/followers", "following_url": "https://api.github.com/users/grahammorehead/following{/other_user}", "gists_url": "https://api.github.com/users/grahammorehead/gists{/gist_id}", "starred_url": "https://api.github.com/users/grahammorehead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grahammorehead/subscriptions", "organizations_url": "https://api.github.com/users/grahammorehead/orgs", "repos_url": "https://api.github.com/users/grahammorehead/repos", "events_url": "https://api.github.com/users/grahammorehead/events{/privacy}", "received_events_url": "https://api.github.com/users/grahammorehead/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-04-09T21:59:37Z", "updated_at": "2018-06-25T03:15:13Z", "closed_at": "2018-04-26T22:30:36Z", "author_association": "NONE", "body_html": "<p>I've tried to build TF from source, a number of times over the span of a week, each day pulling the latest TF.  I've tried gcc and I've tried clang.  With gcc it fails near the end.  If needed I'll open a separate issue for clang (the error is very different)</p>\n<p>First I'll give configuration, then the FAIL output.</p>\n<h2>Configuration</h2>\n<ul>\n<li>bazel 0.11.1</li>\n<li>python3.5 (/home/ubuntu/envs/med/lib/python3.5/site-packages)</li>\n<li>jemalloc</li>\n<li>No Google Cloud Platform support</li>\n<li>No Hadoop File System support</li>\n<li>Amazon S3 File System support enabled</li>\n<li>No Apache Kafka Platform support</li>\n<li>No XLA JIT support</li>\n<li>No GDR support</li>\n<li>No VERBS support</li>\n<li>No OpenCL SYCL support</li>\n<li>CUDA support</li>\n<li>CUDA SDK 9.0</li>\n<li>cuDNN version 7.0</li>\n<li>TensorRT support will be enabled</li>\n<li>NCCL 1.3</li>\n<li>Nvidia compute capability 7.0</li>\n<li>nvcc will be used as CUDA compiler</li>\n<li>MPI support will be enabled for TensorFlow.</li>\n<li>optimization flags during compilation when bazel option \"--config=opt\": -march=native</li>\n<li>Not configuring the WORKSPACE for Android builds.</li>\n</ul>\n<h2>Latest fail output:</h2>\n<p>... (many warnings before this)</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(199): warning: <strong>device</strong> annotation on a defaulted function(\"scalar_right\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(169): warning: <strong>host</strong> annotation on a defaulted function(\"scalar_left\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(169): warning: <strong>device</strong> annotation on a defaulted function(\"scalar_left\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(199): warning: <strong>host</strong> annotation on a defaulted function(\"scalar_right\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(199): warning: <strong>device</strong> annotation on a defaulted function(\"scalar_right\") is ignored</p>\n<p>INFO: From Compiling tensorflow/core/kernels/data/repeat_dataset_op.cc:<br>\ntensorflow/core/kernels/data/repeat_dataset_op.cc: In member function 'virtual void tensorflow::{anonymous}::RepeatDatasetOp::MakeDataset(tensorflow::OpKernelContext*, tensorflow::DatasetBase*, tensorflow::DatasetBase**)':<br>\ntensorflow/core/kernels/data/repeat_dataset_op.cc:45:61: warning: 'count' may be used uninitialized in this function [-Wmaybe-uninitialized]<br>\n: GraphDatasetBase(ctx), count_(count), input_(input) {<br>\n^<br>\ntensorflow/core/kernels/data/repeat_dataset_op.cc:36:11: note: 'count' was declared here<br>\nint64 count;<br>\n^<br>\nINFO: From Compiling tensorflow/core/kernels/cwise_op_gpu_bitwise_and.cu.cc:<br>\n./tensorflow/core/kernels/cwise_ops.h(169): warning: <strong>host</strong> annotation on a defaulted function(\"scalar_left\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(169): warning: <strong>device</strong> annotation on a defaulted function(\"scalar_left\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(199): warning: <strong>host</strong> annotation on a defaulted function(\"scalar_right\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(199): warning: <strong>device</strong> annotation on a defaulted function(\"scalar_right\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(169): warning: <strong>host</strong> annotation on a defaulted function(\"scalar_left\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(169): warning: <strong>device</strong> annotation on a defaulted function(\"scalar_left\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(199): warning: <strong>host</strong> annotation on a defaulted function(\"scalar_right\") is ignored</p>\n<p>./tensorflow/core/kernels/cwise_ops.h(199): warning: <strong>device</strong> annotation on a defaulted function(\"scalar_right\") is ignored</p>\n<p>INFO: From ProtoCompile tensorflow/core/debug/debugger_event_metadata.pb.cc:<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nINFO: From ProtoCompile tensorflow/contrib/mpi/mpi_msg.pb.cc:<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nINFO: From ProtoCompile tensorflow/python/framework/cpp_shape_inference.pb.cc:<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nINFO: From ProtoCompile tensorflow/core/debug/debug_service.pb.cc:<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.<br>\nINFO: From Compiling tensorflow/core/grappler/optimizers/graph_optimizer_stage.cc:<br>\ntensorflow/core/grappler/optimizers/graph_optimizer_stage.cc: In function 'tensorflow::Status tensorflow::grappler::GetTensorProperties(const tensorflow::grappler::GraphOptimizerContext&amp;, const string&amp;, tensorflow::OpInfo::TensorProperties*)':<br>\ntensorflow/core/grappler/optimizers/graph_optimizer_stage.cc:60:32: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]<br>\nif (num_outputs == 0 || port &gt; num_outputs - 1) {<br>\n^<br>\nERROR: /home/ubuntu/downloads/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)<br>\nIn file included from ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:34:0,<br>\nfrom tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:<br>\n./tensorflow/contrib/mpi/mpi_utils.h: In member function 'const int tensorflow::MPIUtils::GetSourceID(const string&amp;) const':<br>\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: error: 'FATAL' was not declared in this scope<br>\nLOG(FATAL) &lt;&lt; \"Failed to convert worker name to MPI index: \" &lt;&lt; task_id;<br>\n^<br>\n./tensorflow/contrib/mpi/mpi_utils.h:49:16: error: 'LOG' was not declared in this scope<br>\nLOG(FATAL) &lt;&lt; \"Failed to convert worker name to MPI index: \" &lt;&lt; task_id;<br>\n^<br>\nIn file included from ./tensorflow/core/lib/strings/strcat.h:27:0,<br>\nfrom ./tensorflow/core/lib/strings/str_util.h:23,<br>\nfrom ./tensorflow/contrib/mpi/mpi_utils.h:25,<br>\nfrom ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:34,<br>\nfrom tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:<br>\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetTensorDim(tensorflow::gtl::ArraySlice, tensorflow::TensorFormat, char) [with T = long long int]':<br>\n./tensorflow/core/util/tensor_format.h:372:47:   required from here<br>\n./tensorflow/core/util/tensor_format.h:340:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]<br>\nCHECK(index &gt;= 0 &amp;&amp; index &lt; dimension_attributes.size())<br>\n^<br>\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'<br>\n#define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))<br>\n^<br>\n./tensorflow/core/util/tensor_format.h:340:3: note: in expansion of macro 'CHECK'<br>\nCHECK(index &gt;= 0 &amp;&amp; index &lt; dimension_attributes.size())<br>\n^<br>\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetFilterDim(tensorflow::gtl::ArraySlice, tensorflow::FilterTensorFormat, char) [with T = long long int]':<br>\n./tensorflow/core/util/tensor_format.h:381:54:   required from here<br>\n./tensorflow/core/util/tensor_format.h:355:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]<br>\nCHECK(index &gt;= 0 &amp;&amp; index &lt; dimension_attribute.size())<br>\n^<br>\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'<br>\n#define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))<br>\n^<br>\n./tensorflow/core/util/tensor_format.h:355:3: note: in expansion of macro 'CHECK'<br>\nCHECK(index &gt;= 0 &amp;&amp; index &lt; dimension_attribute.size())<br>\n^<br>\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build<br>\nUse --verbose_failures to see the command lines of failed build steps.<br>\nINFO: Elapsed time: 2688.392s, Critical Path: 200.30s<br>\nFAILED: Build did NOT complete successfully</p>", "body_text": "I've tried to build TF from source, a number of times over the span of a week, each day pulling the latest TF.  I've tried gcc and I've tried clang.  With gcc it fails near the end.  If needed I'll open a separate issue for clang (the error is very different)\nFirst I'll give configuration, then the FAIL output.\nConfiguration\n\nbazel 0.11.1\npython3.5 (/home/ubuntu/envs/med/lib/python3.5/site-packages)\njemalloc\nNo Google Cloud Platform support\nNo Hadoop File System support\nAmazon S3 File System support enabled\nNo Apache Kafka Platform support\nNo XLA JIT support\nNo GDR support\nNo VERBS support\nNo OpenCL SYCL support\nCUDA support\nCUDA SDK 9.0\ncuDNN version 7.0\nTensorRT support will be enabled\nNCCL 1.3\nNvidia compute capability 7.0\nnvcc will be used as CUDA compiler\nMPI support will be enabled for TensorFlow.\noptimization flags during compilation when bazel option \"--config=opt\": -march=native\nNot configuring the WORKSPACE for Android builds.\n\nLatest fail output:\n... (many warnings before this)\n./tensorflow/core/kernels/cwise_ops.h(199): warning: device annotation on a defaulted function(\"scalar_right\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(169): warning: host annotation on a defaulted function(\"scalar_left\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(169): warning: device annotation on a defaulted function(\"scalar_left\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(199): warning: host annotation on a defaulted function(\"scalar_right\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(199): warning: device annotation on a defaulted function(\"scalar_right\") is ignored\nINFO: From Compiling tensorflow/core/kernels/data/repeat_dataset_op.cc:\ntensorflow/core/kernels/data/repeat_dataset_op.cc: In member function 'virtual void tensorflow::{anonymous}::RepeatDatasetOp::MakeDataset(tensorflow::OpKernelContext*, tensorflow::DatasetBase*, tensorflow::DatasetBase**)':\ntensorflow/core/kernels/data/repeat_dataset_op.cc:45:61: warning: 'count' may be used uninitialized in this function [-Wmaybe-uninitialized]\n: GraphDatasetBase(ctx), count_(count), input_(input) {\n^\ntensorflow/core/kernels/data/repeat_dataset_op.cc:36:11: note: 'count' was declared here\nint64 count;\n^\nINFO: From Compiling tensorflow/core/kernels/cwise_op_gpu_bitwise_and.cu.cc:\n./tensorflow/core/kernels/cwise_ops.h(169): warning: host annotation on a defaulted function(\"scalar_left\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(169): warning: device annotation on a defaulted function(\"scalar_left\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(199): warning: host annotation on a defaulted function(\"scalar_right\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(199): warning: device annotation on a defaulted function(\"scalar_right\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(169): warning: host annotation on a defaulted function(\"scalar_left\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(169): warning: device annotation on a defaulted function(\"scalar_left\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(199): warning: host annotation on a defaulted function(\"scalar_right\") is ignored\n./tensorflow/core/kernels/cwise_ops.h(199): warning: device annotation on a defaulted function(\"scalar_right\") is ignored\nINFO: From ProtoCompile tensorflow/core/debug/debugger_event_metadata.pb.cc:\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nINFO: From ProtoCompile tensorflow/contrib/mpi/mpi_msg.pb.cc:\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nINFO: From ProtoCompile tensorflow/python/framework/cpp_shape_inference.pb.cc:\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nINFO: From ProtoCompile tensorflow/core/debug/debug_service.pb.cc:\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\nINFO: From Compiling tensorflow/core/grappler/optimizers/graph_optimizer_stage.cc:\ntensorflow/core/grappler/optimizers/graph_optimizer_stage.cc: In function 'tensorflow::Status tensorflow::grappler::GetTensorProperties(const tensorflow::grappler::GraphOptimizerContext&, const string&, tensorflow::OpInfo::TensorProperties*)':\ntensorflow/core/grappler/optimizers/graph_optimizer_stage.cc:60:32: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\nif (num_outputs == 0 || port > num_outputs - 1) {\n^\nERROR: /home/ubuntu/downloads/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)\nIn file included from ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:34:0,\nfrom tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:\n./tensorflow/contrib/mpi/mpi_utils.h: In member function 'const int tensorflow::MPIUtils::GetSourceID(const string&) const':\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: error: 'FATAL' was not declared in this scope\nLOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\n^\n./tensorflow/contrib/mpi/mpi_utils.h:49:16: error: 'LOG' was not declared in this scope\nLOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\n^\nIn file included from ./tensorflow/core/lib/strings/strcat.h:27:0,\nfrom ./tensorflow/core/lib/strings/str_util.h:23,\nfrom ./tensorflow/contrib/mpi/mpi_utils.h:25,\nfrom ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:34,\nfrom tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetTensorDim(tensorflow::gtl::ArraySlice, tensorflow::TensorFormat, char) [with T = long long int]':\n./tensorflow/core/util/tensor_format.h:372:47:   required from here\n./tensorflow/core/util/tensor_format.h:340:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\nCHECK(index >= 0 && index < dimension_attributes.size())\n^\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'\n#define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))\n^\n./tensorflow/core/util/tensor_format.h:340:3: note: in expansion of macro 'CHECK'\nCHECK(index >= 0 && index < dimension_attributes.size())\n^\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetFilterDim(tensorflow::gtl::ArraySlice, tensorflow::FilterTensorFormat, char) [with T = long long int]':\n./tensorflow/core/util/tensor_format.h:381:54:   required from here\n./tensorflow/core/util/tensor_format.h:355:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\nCHECK(index >= 0 && index < dimension_attribute.size())\n^\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'\n#define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))\n^\n./tensorflow/core/util/tensor_format.h:355:3: note: in expansion of macro 'CHECK'\nCHECK(index >= 0 && index < dimension_attribute.size())\n^\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 2688.392s, Critical Path: 200.30s\nFAILED: Build did NOT complete successfully", "body": "I've tried to build TF from source, a number of times over the span of a week, each day pulling the latest TF.  I've tried gcc and I've tried clang.  With gcc it fails near the end.  If needed I'll open a separate issue for clang (the error is very different)\r\n\r\nFirst I'll give configuration, then the FAIL output.\r\n\r\nConfiguration\r\n--------------\r\n - bazel 0.11.1\r\n - python3.5 (/home/ubuntu/envs/med/lib/python3.5/site-packages)\r\n - jemalloc\r\n - No Google Cloud Platform support\r\n - No Hadoop File System support\r\n - Amazon S3 File System support enabled\r\n - No Apache Kafka Platform support\r\n - No XLA JIT support\r\n - No GDR support\r\n - No VERBS support\r\n - No OpenCL SYCL support\r\n - CUDA support\r\n - CUDA SDK 9.0\r\n - cuDNN version 7.0\r\n - TensorRT support will be enabled\r\n - NCCL 1.3\r\n - Nvidia compute capability 7.0\r\n - nvcc will be used as CUDA compiler\r\n - MPI support will be enabled for TensorFlow.\r\n - optimization flags during compilation when bazel option \"--config=opt\": -march=native\r\n - Not configuring the WORKSPACE for Android builds.\r\n\r\n\r\nLatest fail output:\r\n-----------------\r\n... (many warnings before this)\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(199): warning: __device__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(169): warning: __host__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(169): warning: __device__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(199): warning: __host__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(199): warning: __device__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\nINFO: From Compiling tensorflow/core/kernels/data/repeat_dataset_op.cc:\r\ntensorflow/core/kernels/data/repeat_dataset_op.cc: In member function 'virtual void tensorflow::{anonymous}::RepeatDatasetOp::MakeDataset(tensorflow::OpKernelContext*, tensorflow::DatasetBase*, tensorflow::DatasetBase**)':\r\ntensorflow/core/kernels/data/repeat_dataset_op.cc:45:61: warning: 'count' may be used uninitialized in this function [-Wmaybe-uninitialized]\r\n         : GraphDatasetBase(ctx), count_(count), input_(input) {\r\n                                                             ^\r\ntensorflow/core/kernels/data/repeat_dataset_op.cc:36:11: note: 'count' was declared here\r\n     int64 count;\r\n           ^\r\nINFO: From Compiling tensorflow/core/kernels/cwise_op_gpu_bitwise_and.cu.cc:\r\n./tensorflow/core/kernels/cwise_ops.h(169): warning: __host__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(169): warning: __device__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(199): warning: __host__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(199): warning: __device__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(169): warning: __host__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(169): warning: __device__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(199): warning: __host__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(199): warning: __device__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\nINFO: From ProtoCompile tensorflow/core/debug/debugger_event_metadata.pb.cc:\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/contrib/mpi/mpi_msg.pb.cc:\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/python/framework/cpp_shape_inference.pb.cc:\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From ProtoCompile tensorflow/core/debug/debug_service.pb.cc:\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nbazel-out/k8-py3-opt/genfiles/external/protobuf_archive/src: warning: directory does not exist.\r\nINFO: From Compiling tensorflow/core/grappler/optimizers/graph_optimizer_stage.cc:\r\ntensorflow/core/grappler/optimizers/graph_optimizer_stage.cc: In function 'tensorflow::Status tensorflow::grappler::GetTensorProperties(const tensorflow::grappler::GraphOptimizerContext&, const string&, tensorflow::OpInfo::TensorProperties*)':\r\ntensorflow/core/grappler/optimizers/graph_optimizer_stage.cc:60:32: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   if (num_outputs == 0 || port > num_outputs - 1) {\r\n                                ^\r\nERROR: /home/ubuntu/downloads/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)\r\nIn file included from ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:34:0,\r\n                 from tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:\r\n./tensorflow/contrib/mpi/mpi_utils.h: In member function 'const int tensorflow::MPIUtils::GetSourceID(const string&) const':\r\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: error: 'FATAL' was not declared in this scope\r\n       LOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\r\n           ^\r\n./tensorflow/contrib/mpi/mpi_utils.h:49:16: error: 'LOG' was not declared in this scope\r\n       LOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\r\n                ^\r\nIn file included from ./tensorflow/core/lib/strings/strcat.h:27:0,\r\n                 from ./tensorflow/core/lib/strings/str_util.h:23,\r\n                 from ./tensorflow/contrib/mpi/mpi_utils.h:25,\r\n                 from ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:34,\r\n                 from tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:\r\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetTensorDim(tensorflow::gtl::ArraySlice<T>, tensorflow::TensorFormat, char) [with T = long long int]':\r\n./tensorflow/core/util/tensor_format.h:372:47:   required from here\r\n./tensorflow/core/util/tensor_format.h:340:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   CHECK(index >= 0 && index < dimension_attributes.size())\r\n                             ^\r\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'\r\n #define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))\r\n                                               ^\r\n./tensorflow/core/util/tensor_format.h:340:3: note: in expansion of macro 'CHECK'\r\n   CHECK(index >= 0 && index < dimension_attributes.size())\r\n   ^\r\n./tensorflow/core/util/tensor_format.h: In instantiation of 'T tensorflow::GetFilterDim(tensorflow::gtl::ArraySlice<T>, tensorflow::FilterTensorFormat, char) [with T = long long int]':\r\n./tensorflow/core/util/tensor_format.h:381:54:   required from here\r\n./tensorflow/core/util/tensor_format.h:355:29: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   CHECK(index >= 0 && index < dimension_attribute.size())\r\n                             ^\r\n./tensorflow/core/platform/macros.h:82:47: note: in definition of macro 'TF_PREDICT_FALSE'\r\n #define TF_PREDICT_FALSE(x) (__builtin_expect(x, 0))\r\n                                               ^\r\n./tensorflow/core/util/tensor_format.h:355:3: note: in expansion of macro 'CHECK'\r\n   CHECK(index >= 0 && index < dimension_attribute.size())\r\n   ^\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 2688.392s, Critical Path: 200.30s\r\nFAILED: Build did NOT complete successfully\r\n"}
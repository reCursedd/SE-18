{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6224", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6224/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6224/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6224/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6224", "id": 194694729, "node_id": "MDU6SXNzdWUxOTQ2OTQ3Mjk=", "number": 6224, "title": "Extremely inefficient cuda event polling", "user": {"login": "ZhengBitFusion", "id": 13840805, "node_id": "MDQ6VXNlcjEzODQwODA1", "avatar_url": "https://avatars1.githubusercontent.com/u/13840805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengBitFusion", "html_url": "https://github.com/ZhengBitFusion", "followers_url": "https://api.github.com/users/ZhengBitFusion/followers", "following_url": "https://api.github.com/users/ZhengBitFusion/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengBitFusion/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengBitFusion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengBitFusion/subscriptions", "organizations_url": "https://api.github.com/users/ZhengBitFusion/orgs", "repos_url": "https://api.github.com/users/ZhengBitFusion/repos", "events_url": "https://api.github.com/users/ZhengBitFusion/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengBitFusion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2016-12-09T20:55:32Z", "updated_at": "2017-05-08T17:43:39Z", "closed_at": "2017-05-08T17:43:39Z", "author_association": "NONE", "body_html": "<p>I am running tensorflow with this application: <a href=\"https://github.com/openai/pixel-cnn\">https://github.com/openai/pixel-cnn</a>. I am running on 4 NVIDIA K80 cards and CUDA 7.5. For my experiment, I modified the code to only do 100 training iterations.</p>\n<p>During the 100 iterations, tensorflow destroys 2662 cuda events. But how many times it polls event status? 40669120 times. This means on average it polls ~15,000 times for 1 destroy. Isn't it extremely inefficient?</p>\n<p>Per my understanding of tensorflow source code, it uses one dedicated thread to poll event status and destroy an event once it's complete. That's the only place where the event status is polled.</p>", "body_text": "I am running tensorflow with this application: https://github.com/openai/pixel-cnn. I am running on 4 NVIDIA K80 cards and CUDA 7.5. For my experiment, I modified the code to only do 100 training iterations.\nDuring the 100 iterations, tensorflow destroys 2662 cuda events. But how many times it polls event status? 40669120 times. This means on average it polls ~15,000 times for 1 destroy. Isn't it extremely inefficient?\nPer my understanding of tensorflow source code, it uses one dedicated thread to poll event status and destroy an event once it's complete. That's the only place where the event status is polled.", "body": "I am running tensorflow with this application: https://github.com/openai/pixel-cnn. I am running on 4 NVIDIA K80 cards and CUDA 7.5. For my experiment, I modified the code to only do 100 training iterations.\r\n\r\nDuring the 100 iterations, tensorflow destroys 2662 cuda events. But how many times it polls event status? 40669120 times. This means on average it polls ~15,000 times for 1 destroy. Isn't it extremely inefficient?\r\n\r\nPer my understanding of tensorflow source code, it uses one dedicated thread to poll event status and destroy an event once it's complete. That's the only place where the event status is polled."}
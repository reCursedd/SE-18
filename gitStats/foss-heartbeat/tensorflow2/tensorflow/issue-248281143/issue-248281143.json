{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12066", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12066/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12066/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12066/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12066", "id": 248281143, "node_id": "MDU6SXNzdWUyNDgyODExNDM=", "number": 12066, "title": "Encounter Fatal signal 11 (SIGSEGV) problem doing training on mobile device", "user": {"login": "ychen404", "id": 22212046, "node_id": "MDQ6VXNlcjIyMjEyMDQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/22212046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ychen404", "html_url": "https://github.com/ychen404", "followers_url": "https://api.github.com/users/ychen404/followers", "following_url": "https://api.github.com/users/ychen404/following{/other_user}", "gists_url": "https://api.github.com/users/ychen404/gists{/gist_id}", "starred_url": "https://api.github.com/users/ychen404/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ychen404/subscriptions", "organizations_url": "https://api.github.com/users/ychen404/orgs", "repos_url": "https://api.github.com/users/ychen404/repos", "events_url": "https://api.github.com/users/ychen404/events{/privacy}", "received_events_url": "https://api.github.com/users/ychen404/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-07T00:07:16Z", "updated_at": "2017-08-11T12:20:17Z", "closed_at": "2017-08-11T12:20:02Z", "author_association": "NONE", "body_html": "<p>I am stuck on the SIGSEGV problem while trying to do training on a mobile device (Nexus 7), can you help me out?</p>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes. I added a couple of lines to the TensorFlowInferenceInterface.java</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nSource</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.2.1</li>\n<li><strong>Python version</strong>:<br>\n2.7.12</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.52</li>\n<li><strong>CUDA/cuDNN version</strong>:</li>\n<li></li>\n<li><strong>GPU model and memory</strong>:</li>\n<li></li>\n<li><strong>Exact command to reproduce</strong>:</li>\n<li></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I am trying to find out the performance of doing training on mobile devices.<br>\nI got the Fatal signal 11 (SIGSEGV) when I am trying to work with a graph including a couple of convolutional layers, FC layers, and cross entropy operation.</p>\n<p>Here is what I did:<br>\nI modified the TensorFlowInferenceInterface.java by adding a function for initialization all nodes; then I was able to reproduce the example in the following link in Android.<br>\n<a href=\"https://tebesu.github.io/posts/Training-a-TensorFlow-graph-in-C++-API\" rel=\"nofollow\">https://tebesu.github.io/posts/Training-a-TensorFlow-graph-in-C++-API</a></p>\n<p>I try to do the training with a more complicated graph (including a couple of convolutional layers, FC layers and cross entropy operation). I can do the training with this graph using the C++ API.</p>\n<p>I first solved the No OpKernel problem. The error message is as follows.<br>\nNo OpKernel was registered to support Op 'SparseSoftmaxCrossEntropyWithLogits' with these attrs.</p>\n<p>I add the sparse_xent_op.h and the sparse_xent_op.cc files to the BUILD file locates at /tensorflow/tensorflow/core/kernels/.<br>\nI modify the list_op_files.txt locally, adding the sparse_xent_op operator and, rebuild the Tensorflow source.</p>\n<p>The No OpKernel error disappears, but the program stops at runner.runAndFetchMetadata() and throws me an error:<br>\nA/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 15173 (inference)</p>\n<h3>Source code / logs</h3>\n<p>TensorFlowInferenceInterface.java:</p>\n<p>public void runTarget(String[] outputNames){<br>\nLog.d(TAG, \"start of the runTarget\");<br>\nfor (String t : outputNames) {<br>\nrunner.addTarget(t);</p>\n<pre><code>}\nLog.d(TAG, \"finished adding target\");\n\n  runner.runAndFetchMetadata();\nLog.d(TAG,\"runAndFetchMetadata\");\n   runner = sess.runner();\nLog.d(TAG,\"sess.runner\");\n</code></pre>\n<p>}</p>\n<p>Corresponding Logcat messages:<br>\n08-06 16:25:01.900 15099-15173/org.tensorflow.demo D/TensorFlowInferenceInterface: start of the runTarget<br>\n08-06 16:25:01.900 15099-15173/org.tensorflow.demo D/TensorFlowInferenceInterface: finished adding target<br>\n08-06 16:25:04.576 15099-15173/org.tensorflow.demo A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 15173 (inference)</p>\n<p>Crash dump result:</p>\n<p>********** Crash dump: **********<br>\nBuild fingerprint: 'google/razor/flo:6.0/MRA58K/2256973:user/release-keys'<br>\npid: 5414, tid: 5478, name: inference  &gt;&gt;&gt; org.tensorflow.demo &lt;&lt;&lt;<br>\nsignal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0<br>\nStack frame #00 pc 00017664  /system/lib/libc.so (__memcpy_base+91)<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> pc 0072a203  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115894138\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2\">#2</a> pc 006eea49  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115896656\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/3\">#3</a> pc 006d59d3  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115898449\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4\">#4</a> pc 006ed9c3  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115910900\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/5\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/5/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/5\">#5</a> pc 006df991  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115911735\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6\">#6</a> pc 006dffb5  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115912111\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7\">#7</a> pc 0009eff9  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115914495\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8\">#8</a> pc 0009f403  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115914691\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/9\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/9/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/9\">#9</a> pc 00099085  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so (Java_org_tensorflow_Session_run+920)<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115914766\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/10\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/10/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/10\">#10</a> pc 000eaa29  /system/lib/libart.so (art_quick_generic_jni_trampoline+40)<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115914813\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/11\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/11/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/11\">#11</a> pc 000e6331  /system/lib/libart.so (art_quick_invoke_stub_internal+64)<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115915395\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/12/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/12\">#12</a> pc 00402663  /system/lib/libart.so (art_quick_invoke_static_stub+170)<br>\nStack frame <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115918299\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/13\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/13/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/13\">#13</a> pc 001009f4  [stack:5478]</p>", "body_text": "I am stuck on the SIGSEGV problem while trying to do training on a mobile device (Nexus 7), can you help me out?\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes. I added a couple of lines to the TensorFlowInferenceInterface.java\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04\nTensorFlow installed from (source or binary):\nSource\nTensorFlow version (use command below):\n1.2.1\nPython version:\n2.7.12\nBazel version (if compiling from source):\n0.52\nCUDA/cuDNN version:\n\nGPU model and memory:\n\nExact command to reproduce:\n\n\nDescribe the problem\nI am trying to find out the performance of doing training on mobile devices.\nI got the Fatal signal 11 (SIGSEGV) when I am trying to work with a graph including a couple of convolutional layers, FC layers, and cross entropy operation.\nHere is what I did:\nI modified the TensorFlowInferenceInterface.java by adding a function for initialization all nodes; then I was able to reproduce the example in the following link in Android.\nhttps://tebesu.github.io/posts/Training-a-TensorFlow-graph-in-C++-API\nI try to do the training with a more complicated graph (including a couple of convolutional layers, FC layers and cross entropy operation). I can do the training with this graph using the C++ API.\nI first solved the No OpKernel problem. The error message is as follows.\nNo OpKernel was registered to support Op 'SparseSoftmaxCrossEntropyWithLogits' with these attrs.\nI add the sparse_xent_op.h and the sparse_xent_op.cc files to the BUILD file locates at /tensorflow/tensorflow/core/kernels/.\nI modify the list_op_files.txt locally, adding the sparse_xent_op operator and, rebuild the Tensorflow source.\nThe No OpKernel error disappears, but the program stops at runner.runAndFetchMetadata() and throws me an error:\nA/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 15173 (inference)\nSource code / logs\nTensorFlowInferenceInterface.java:\npublic void runTarget(String[] outputNames){\nLog.d(TAG, \"start of the runTarget\");\nfor (String t : outputNames) {\nrunner.addTarget(t);\n}\nLog.d(TAG, \"finished adding target\");\n\n  runner.runAndFetchMetadata();\nLog.d(TAG,\"runAndFetchMetadata\");\n   runner = sess.runner();\nLog.d(TAG,\"sess.runner\");\n\n}\nCorresponding Logcat messages:\n08-06 16:25:01.900 15099-15173/org.tensorflow.demo D/TensorFlowInferenceInterface: start of the runTarget\n08-06 16:25:01.900 15099-15173/org.tensorflow.demo D/TensorFlowInferenceInterface: finished adding target\n08-06 16:25:04.576 15099-15173/org.tensorflow.demo A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 15173 (inference)\nCrash dump result:\n********** Crash dump: **********\nBuild fingerprint: 'google/razor/flo:6.0/MRA58K/2256973:user/release-keys'\npid: 5414, tid: 5478, name: inference  >>> org.tensorflow.demo <<<\nsignal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0\nStack frame #00 pc 00017664  /system/lib/libc.so (__memcpy_base+91)\nStack frame #1 pc 0072a203  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\nStack frame #2 pc 006eea49  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\nStack frame #3 pc 006d59d3  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\nStack frame #4 pc 006ed9c3  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\nStack frame #5 pc 006df991  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\nStack frame #6 pc 006dffb5  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\nStack frame #7 pc 0009eff9  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\nStack frame #8 pc 0009f403  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\nStack frame #9 pc 00099085  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so (Java_org_tensorflow_Session_run+920)\nStack frame #10 pc 000eaa29  /system/lib/libart.so (art_quick_generic_jni_trampoline+40)\nStack frame #11 pc 000e6331  /system/lib/libart.so (art_quick_invoke_stub_internal+64)\nStack frame #12 pc 00402663  /system/lib/libart.so (art_quick_invoke_static_stub+170)\nStack frame #13 pc 001009f4  [stack:5478]", "body": "I am stuck on the SIGSEGV problem while trying to do training on a mobile device (Nexus 7), can you help me out? \r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes. I added a couple of lines to the TensorFlowInferenceInterface.java\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\nSource\r\n- **TensorFlow version (use command below)**:\r\n1.2.1\r\n- **Python version**: \r\n2.7.12\r\n- **Bazel version (if compiling from source)**:\r\n0.52\r\n- **CUDA/cuDNN version**:\r\n-\r\n- **GPU model and memory**:\r\n-\r\n- **Exact command to reproduce**:\r\n-\r\n### Describe the problem\r\nI am trying to find out the performance of doing training on mobile devices. \r\nI got the Fatal signal 11 (SIGSEGV) when I am trying to work with a graph including a couple of convolutional layers, FC layers, and cross entropy operation. \r\n\r\nHere is what I did:\r\nI modified the TensorFlowInferenceInterface.java by adding a function for initialization all nodes; then I was able to reproduce the example in the following link in Android.\r\nhttps://tebesu.github.io/posts/Training-a-TensorFlow-graph-in-C++-API\r\n\r\nI try to do the training with a more complicated graph (including a couple of convolutional layers, FC layers and cross entropy operation). I can do the training with this graph using the C++ API.\r\n\r\nI first solved the No OpKernel problem. The error message is as follows. \r\nNo OpKernel was registered to support Op 'SparseSoftmaxCrossEntropyWithLogits' with these attrs.\r\n\r\nI add the sparse_xent_op.h and the sparse_xent_op.cc files to the BUILD file locates at /tensorflow/tensorflow/core/kernels/. \r\nI modify the list_op_files.txt locally, adding the sparse_xent_op operator and, rebuild the Tensorflow source. \r\n\r\nThe No OpKernel error disappears, but the program stops at runner.runAndFetchMetadata() and throws me an error:\r\nA/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 15173 (inference)\r\n\r\n### Source code / logs\r\nTensorFlowInferenceInterface.java:\r\n\r\n  public void runTarget(String[] outputNames){\r\n    Log.d(TAG, \"start of the runTarget\");\r\n    for (String t : outputNames) {\r\n      runner.addTarget(t);\r\n   \r\n    }\r\n    Log.d(TAG, \"finished adding target\");\r\n\r\n      runner.runAndFetchMetadata();\r\n    Log.d(TAG,\"runAndFetchMetadata\");\r\n       runner = sess.runner();\r\n    Log.d(TAG,\"sess.runner\");\r\n\r\n  }\r\n\r\nCorresponding Logcat messages:\r\n08-06 16:25:01.900 15099-15173/org.tensorflow.demo D/TensorFlowInferenceInterface: start of the runTarget\r\n08-06 16:25:01.900 15099-15173/org.tensorflow.demo D/TensorFlowInferenceInterface: finished adding target\r\n08-06 16:25:04.576 15099-15173/org.tensorflow.demo A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 15173 (inference)\r\n\r\nCrash dump result:\r\n\r\n********** Crash dump: **********\r\nBuild fingerprint: 'google/razor/flo:6.0/MRA58K/2256973:user/release-keys'\r\npid: 5414, tid: 5478, name: inference  >>> org.tensorflow.demo <<<\r\nsignal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0\r\nStack frame #00 pc 00017664  /system/lib/libc.so (__memcpy_base+91)\r\nStack frame #01 pc 0072a203  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\r\nStack frame #02 pc 006eea49  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\r\nStack frame #03 pc 006d59d3  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\r\nStack frame #04 pc 006ed9c3  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\r\nStack frame #05 pc 006df991  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\r\nStack frame #06 pc 006dffb5  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\r\nStack frame #07 pc 0009eff9  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\r\nStack frame #08 pc 0009f403  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so\r\nStack frame #09 pc 00099085  /data/app/org.tensorflow.demo-2/lib/arm/libtensorflow_inference.so (Java_org_tensorflow_Session_run+920)\r\nStack frame #10 pc 000eaa29  /system/lib/libart.so (art_quick_generic_jni_trampoline+40)\r\nStack frame #11 pc 000e6331  /system/lib/libart.so (art_quick_invoke_stub_internal+64)\r\nStack frame #12 pc 00402663  /system/lib/libart.so (art_quick_invoke_static_stub+170)\r\nStack frame #13 pc 001009f4  [stack:5478]\r\n"}
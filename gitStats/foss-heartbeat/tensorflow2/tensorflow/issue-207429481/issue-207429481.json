{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7491", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7491/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7491/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7491/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7491", "id": 207429481, "node_id": "MDU6SXNzdWUyMDc0Mjk0ODE=", "number": 7491, "title": "BatchNormalization error with keras", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-02-14T06:28:55Z", "updated_at": "2017-03-10T20:02:15Z", "closed_at": "2017-03-10T20:02:15Z", "author_association": "NONE", "body_html": "<p>Hello,<br>\nI use keras and tensorflow backend and ran into error with the follow code:<br>\nseq.add(LSTM(256,<br>\ninput_shape=(length, dim),<br>\nactivation='tanh',<br>\nreturn_sequences=True))<br>\nseq.add(BatchNormalization(<br>\nmode=0,<br>\naxis=1))<br>\nthe eroor message is:<br>\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\", line 165, in cons<br>\ntant<br>\ntensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))<br>\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\", line 441, in make<br>\n_tensor_proto<br>\ntensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])<br>\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\", line 441, in<br>\ntensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])<br>\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\compat.py\", line 65, in as_bytes<br>\n(bytes_or_text,))<br>\nTypeError: Expected binary or unicode string, got 1</p>\n<p>if I set mode = 2, then everything is fine. If remove seq.add(BatchNormalization)), it also works smoothly.<br>\nno idea the problem is with tensorflow or keras.<br>\nI tried keras from 1.1.2  to 1.2.2, same error happens.<br>\nI am using tensorflow 1.0.0rc2 and Anaconda 4.3.0 on Windows 10<br>\nanyone can help me?<br>\nthanks a lot</p>", "body_text": "Hello,\nI use keras and tensorflow backend and ran into error with the follow code:\nseq.add(LSTM(256,\ninput_shape=(length, dim),\nactivation='tanh',\nreturn_sequences=True))\nseq.add(BatchNormalization(\nmode=0,\naxis=1))\nthe eroor message is:\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\", line 165, in cons\ntant\ntensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\", line 441, in make\n_tensor_proto\ntensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\", line 441, in\ntensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\compat.py\", line 65, in as_bytes\n(bytes_or_text,))\nTypeError: Expected binary or unicode string, got 1\nif I set mode = 2, then everything is fine. If remove seq.add(BatchNormalization)), it also works smoothly.\nno idea the problem is with tensorflow or keras.\nI tried keras from 1.1.2  to 1.2.2, same error happens.\nI am using tensorflow 1.0.0rc2 and Anaconda 4.3.0 on Windows 10\nanyone can help me?\nthanks a lot", "body": "Hello,\r\nI use keras and tensorflow backend and ran into error with the follow code:\r\nseq.add(LSTM(256,\r\ninput_shape=(length, dim),\r\nactivation='tanh',\r\nreturn_sequences=True))\r\nseq.add(BatchNormalization(\r\nmode=0,\r\naxis=1))\r\nthe eroor message is:\r\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\constant_op.py\", line 165, in cons\r\ntant\r\ntensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))\r\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\", line 441, in make\r\n_tensor_proto\r\ntensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\r\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\tensor_util.py\", line 441, in\r\ntensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])\r\nFile \"D:\\SciSoft\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\compat.py\", line 65, in as_bytes\r\n(bytes_or_text,))\r\nTypeError: Expected binary or unicode string, got 1\r\n \r\nif I set mode = 2, then everything is fine. If remove seq.add(BatchNormalization)), it also works smoothly.\r\nno idea the problem is with tensorflow or keras.\r\nI tried keras from 1.1.2  to 1.2.2, same error happens.\r\nI am using tensorflow 1.0.0rc2 and Anaconda 4.3.0 on Windows 10\r\nanyone can help me? \r\nthanks a lot\r\n"}
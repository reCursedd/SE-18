{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/284752113", "html_url": "https://github.com/tensorflow/tensorflow/issues/8154#issuecomment-284752113", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8154", "id": 284752113, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDc1MjExMw==", "user": {"login": "MicaelCarvalho", "id": 17184992, "node_id": "MDQ6VXNlcjE3MTg0OTky", "avatar_url": "https://avatars3.githubusercontent.com/u/17184992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MicaelCarvalho", "html_url": "https://github.com/MicaelCarvalho", "followers_url": "https://api.github.com/users/MicaelCarvalho/followers", "following_url": "https://api.github.com/users/MicaelCarvalho/following{/other_user}", "gists_url": "https://api.github.com/users/MicaelCarvalho/gists{/gist_id}", "starred_url": "https://api.github.com/users/MicaelCarvalho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MicaelCarvalho/subscriptions", "organizations_url": "https://api.github.com/users/MicaelCarvalho/orgs", "repos_url": "https://api.github.com/users/MicaelCarvalho/repos", "events_url": "https://api.github.com/users/MicaelCarvalho/events{/privacy}", "received_events_url": "https://api.github.com/users/MicaelCarvalho/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-07T15:22:10Z", "updated_at": "2017-03-07T15:22:10Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I didn't pay much attention to your construction of the <code>image</code> parameter, it seems you misinterpreted the docs: the <code>image</code> parameter is of shape <code>[batch, image_height, image_width, depth]</code> \u2014 that doesn't mean it should have the values of <code>image_height</code>, <code>image_width</code> and <code>depth</code> inside of it, the doc is only explaining its shape \u2014 meaning: it has the shape of an image, with the first index referring to the batch position (4D instead of 3D). Since you seem to be processing a single image, we can simply add a dimension to the beginning of the tensor. Here is a working example:</p>\n<pre><code>ori_image = Image.open('/home/sumith/imagepyramids/1.jpg')\nimg_data = np.expand_dims(np.asarray(ori_image).astype(np.float32), axis=0)\nsess.run([tf.global_variables_initializer(), tf.local_variables_initializer()])\ncropped_list = sess.run(tf.image.crop_and_resize(image=img_data, boxes=[[.1,.1,.6,.6]], crop_size=[40, 36], box_ind=[0]))\n</code></pre>", "body_text": "I didn't pay much attention to your construction of the image parameter, it seems you misinterpreted the docs: the image parameter is of shape [batch, image_height, image_width, depth] \u2014 that doesn't mean it should have the values of image_height, image_width and depth inside of it, the doc is only explaining its shape \u2014 meaning: it has the shape of an image, with the first index referring to the batch position (4D instead of 3D). Since you seem to be processing a single image, we can simply add a dimension to the beginning of the tensor. Here is a working example:\nori_image = Image.open('/home/sumith/imagepyramids/1.jpg')\nimg_data = np.expand_dims(np.asarray(ori_image).astype(np.float32), axis=0)\nsess.run([tf.global_variables_initializer(), tf.local_variables_initializer()])\ncropped_list = sess.run(tf.image.crop_and_resize(image=img_data, boxes=[[.1,.1,.6,.6]], crop_size=[40, 36], box_ind=[0]))", "body": "I didn't pay much attention to your construction of the `image` parameter, it seems you misinterpreted the docs: the `image` parameter is of shape `[batch, image_height, image_width, depth]` \u2014 that doesn't mean it should have the values of `image_height`, `image_width` and `depth` inside of it, the doc is only explaining its shape \u2014 meaning: it has the shape of an image, with the first index referring to the batch position (4D instead of 3D). Since you seem to be processing a single image, we can simply add a dimension to the beginning of the tensor. Here is a working example:\r\n\r\n```\r\nori_image = Image.open('/home/sumith/imagepyramids/1.jpg')\r\nimg_data = np.expand_dims(np.asarray(ori_image).astype(np.float32), axis=0)\r\nsess.run([tf.global_variables_initializer(), tf.local_variables_initializer()])\r\ncropped_list = sess.run(tf.image.crop_and_resize(image=img_data, boxes=[[.1,.1,.6,.6]], crop_size=[40, 36], box_ind=[0]))\r\n```"}
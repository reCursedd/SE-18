{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19989", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19989/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19989/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19989/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19989", "id": 332014206, "node_id": "MDU6SXNzdWUzMzIwMTQyMDY=", "number": 19989, "title": "S3 backend request fails on small object (at least) against Minio S3 storage implementation", "user": {"login": "jlaako", "id": 996356, "node_id": "MDQ6VXNlcjk5NjM1Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/996356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlaako", "html_url": "https://github.com/jlaako", "followers_url": "https://api.github.com/users/jlaako/followers", "following_url": "https://api.github.com/users/jlaako/following{/other_user}", "gists_url": "https://api.github.com/users/jlaako/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlaako/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlaako/subscriptions", "organizations_url": "https://api.github.com/users/jlaako/orgs", "repos_url": "https://api.github.com/users/jlaako/repos", "events_url": "https://api.github.com/users/jlaako/events{/privacy}", "received_events_url": "https://api.github.com/users/jlaako/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-06-13T14:14:04Z", "updated_at": "2018-11-19T23:25:38Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Debian 9 (Stretch)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: v1.8.0-5-gcfd0ea3bfb 1.8.0</li>\n<li><strong>Python version</strong>: 3.5.3</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.11.1</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:gcc (Debian 6.3.0-18+deb9u1) 6.3.0 20170516 / clang version 4.0.1</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>At least when using <a href=\"https://minio.io\" rel=\"nofollow\">minio</a> for S3 storage, small object requests initiated from TFRecordDataset() fail with following error:<br>\n2018-06-13 17:02:04.857500: W tensorflow/core/platform/s3/aws_logging.cc:57] Encountered Unknown AWSError 'InvalidRange': The requested range is not satisfiable<br>\nReason is that TF is requesting the object with buffer size Range header and when the object is smaller than the buffer (256 kB) the system is not satisfied with the smaller response size, although response HTTP header clearly indicates that the object was received in full. Instead there's an attempt to try to fetch next chunk with Range that begins at the end of object and reaches further beyond end of the object. Naturally this request will fail. This will cause the entire request fail.</p>\n<h3>Source code / logs</h3>\n<p>2018-06-13 17:02:04.857500: W tensorflow/core/platform/s3/aws_logging.cc:57] Encountered Unknown AWSError 'InvalidRange': The requested range is not satisfiable</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian 9 (Stretch)\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): v1.8.0-5-gcfd0ea3bfb 1.8.0\nPython version: 3.5.3\nBazel version (if compiling from source): 0.11.1\nGCC/Compiler version (if compiling from source):gcc (Debian 6.3.0-18+deb9u1) 6.3.0 20170516 / clang version 4.0.1\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce:\n\nDescribe the problem\nAt least when using minio for S3 storage, small object requests initiated from TFRecordDataset() fail with following error:\n2018-06-13 17:02:04.857500: W tensorflow/core/platform/s3/aws_logging.cc:57] Encountered Unknown AWSError 'InvalidRange': The requested range is not satisfiable\nReason is that TF is requesting the object with buffer size Range header and when the object is smaller than the buffer (256 kB) the system is not satisfied with the smaller response size, although response HTTP header clearly indicates that the object was received in full. Instead there's an attempt to try to fetch next chunk with Range that begins at the end of object and reaches further beyond end of the object. Naturally this request will fail. This will cause the entire request fail.\nSource code / logs\n2018-06-13 17:02:04.857500: W tensorflow/core/platform/s3/aws_logging.cc:57] Encountered Unknown AWSError 'InvalidRange': The requested range is not satisfiable", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Debian 9 (Stretch)\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: v1.8.0-5-gcfd0ea3bfb 1.8.0\r\n- **Python version**: 3.5.3\r\n- **Bazel version (if compiling from source)**: 0.11.1\r\n- **GCC/Compiler version (if compiling from source)**:gcc (Debian 6.3.0-18+deb9u1) 6.3.0 20170516 / clang version 4.0.1\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nAt least when using [minio](https://minio.io) for S3 storage, small object requests initiated from TFRecordDataset() fail with following error:\r\n2018-06-13 17:02:04.857500: W tensorflow/core/platform/s3/aws_logging.cc:57] Encountered Unknown AWSError 'InvalidRange': The requested range is not satisfiable\r\nReason is that TF is requesting the object with buffer size Range header and when the object is smaller than the buffer (256 kB) the system is not satisfied with the smaller response size, although response HTTP header clearly indicates that the object was received in full. Instead there's an attempt to try to fetch next chunk with Range that begins at the end of object and reaches further beyond end of the object. Naturally this request will fail. This will cause the entire request fail.\r\n\r\n### Source code / logs\r\n2018-06-13 17:02:04.857500: W tensorflow/core/platform/s3/aws_logging.cc:57] Encountered Unknown AWSError 'InvalidRange': The requested range is not satisfiable\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/219647415", "html_url": "https://github.com/tensorflow/tensorflow/pull/1759#issuecomment-219647415", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1759", "id": 219647415, "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTY0NzQxNQ==", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "created_at": "2016-05-17T08:04:39Z", "updated_at": "2016-05-17T08:04:39Z", "author_association": "NONE", "body_html": "<p>So I recompliled from source based on the pull request.<br>\nSeveral problems with the code:</p>\n<ol>\n<li><code>tf.nn.batch_norm_training</code> only returns <code>output</code> while the docstring says it returns <code>output</code>, <code>mean</code> and <code>inv_var</code>. Also several typos in the docstring</li>\n<li>Shape info is lost on the three variables mentioned above after <code>batch_norm_training</code>; had to manually set the shape afterwards</li>\n<li>Seems to be sensitive against small epsilon. Something as \"big\" as 1e-5 gives cudnn launch error</li>\n<li>This one is important: <strong>gives OOM error</strong> after fixed number of executions. On my 980 Ti, the test code in OP stops at <code>i=81</code> in the warmup when I set <code>shape = [128, 32, 32, 128]</code></li>\n</ol>", "body_text": "So I recompliled from source based on the pull request.\nSeveral problems with the code:\n\ntf.nn.batch_norm_training only returns output while the docstring says it returns output, mean and inv_var. Also several typos in the docstring\nShape info is lost on the three variables mentioned above after batch_norm_training; had to manually set the shape afterwards\nSeems to be sensitive against small epsilon. Something as \"big\" as 1e-5 gives cudnn launch error\nThis one is important: gives OOM error after fixed number of executions. On my 980 Ti, the test code in OP stops at i=81 in the warmup when I set shape = [128, 32, 32, 128]", "body": "So I recompliled from source based on the pull request.\nSeveral problems with the code:\n1. `tf.nn.batch_norm_training` only returns `output` while the docstring says it returns `output`, `mean` and `inv_var`. Also several typos in the docstring\n2. Shape info is lost on the three variables mentioned above after `batch_norm_training`; had to manually set the shape afterwards\n3. Seems to be sensitive against small epsilon. Something as \"big\" as 1e-5 gives cudnn launch error\n4. This one is important: **gives OOM error** after fixed number of executions. On my 980 Ti, the test code in OP stops at `i=81` in the warmup when I set `shape = [128, 32, 32, 128]`\n"}
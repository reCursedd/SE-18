{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/429758923", "html_url": "https://github.com/tensorflow/tensorflow/issues/21574#issuecomment-429758923", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21574", "id": 429758923, "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTc1ODkyMw==", "user": {"login": "zhewang95", "id": 22929722, "node_id": "MDQ6VXNlcjIyOTI5NzIy", "avatar_url": "https://avatars0.githubusercontent.com/u/22929722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhewang95", "html_url": "https://github.com/zhewang95", "followers_url": "https://api.github.com/users/zhewang95/followers", "following_url": "https://api.github.com/users/zhewang95/following{/other_user}", "gists_url": "https://api.github.com/users/zhewang95/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhewang95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhewang95/subscriptions", "organizations_url": "https://api.github.com/users/zhewang95/orgs", "repos_url": "https://api.github.com/users/zhewang95/repos", "events_url": "https://api.github.com/users/zhewang95/events{/privacy}", "received_events_url": "https://api.github.com/users/zhewang95/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-15T08:45:19Z", "updated_at": "2018-10-15T08:48:35Z", "author_association": "NONE", "body_html": "<p>It turns out that target \"tensor_utils\" may have missed neon deps. To correct it, make sure that  <code>tensorflow/contrib/lite/kernels/internal:tensor_utils</code> have <code>neon_tensor_utils</code> deps.<br>\nFor aarch64 cross-compile configuration, do below modification can solve the problem:</p>\n<pre><code>diff --git a/tensorflow/contrib/lite/kernels/internal/BUILD b/tensorflow/contrib/lite/kernels/internal/BUILD\nindex 464163b..d1f4a0e 100644\n--- a/tensorflow/contrib/lite/kernels/internal/BUILD\n+++ b/tensorflow/contrib/lite/kernels/internal/BUILD\n@@ -53,6 +53,13 @@ config_setting(\n )\n \n config_setting(\n+    name = \"aarch64\",\n+    values = {\n+        \"cpu\": \"aarch64\",\n+    },\n+)\n+\n+config_setting(\n     name = \"arm64-v8a\",\n     values = {\n         \"cpu\": \"arm64-v8a\",\n@@ -448,6 +455,9 @@ cc_library(\n         \":arm\": [\n             \":neon_tensor_utils\",\n         ],\n+        \":aarch64\": [\n+            \":neon_tensor_utils\",\n+        ],\n         \":arm64-v8a\": [\n             \":neon_tensor_utils\",\n         ],\n</code></pre>", "body_text": "It turns out that target \"tensor_utils\" may have missed neon deps. To correct it, make sure that  tensorflow/contrib/lite/kernels/internal:tensor_utils have neon_tensor_utils deps.\nFor aarch64 cross-compile configuration, do below modification can solve the problem:\ndiff --git a/tensorflow/contrib/lite/kernels/internal/BUILD b/tensorflow/contrib/lite/kernels/internal/BUILD\nindex 464163b..d1f4a0e 100644\n--- a/tensorflow/contrib/lite/kernels/internal/BUILD\n+++ b/tensorflow/contrib/lite/kernels/internal/BUILD\n@@ -53,6 +53,13 @@ config_setting(\n )\n \n config_setting(\n+    name = \"aarch64\",\n+    values = {\n+        \"cpu\": \"aarch64\",\n+    },\n+)\n+\n+config_setting(\n     name = \"arm64-v8a\",\n     values = {\n         \"cpu\": \"arm64-v8a\",\n@@ -448,6 +455,9 @@ cc_library(\n         \":arm\": [\n             \":neon_tensor_utils\",\n         ],\n+        \":aarch64\": [\n+            \":neon_tensor_utils\",\n+        ],\n         \":arm64-v8a\": [\n             \":neon_tensor_utils\",\n         ],", "body": "It turns out that target \"tensor_utils\" may have missed neon deps. To correct it, make sure that  `tensorflow/contrib/lite/kernels/internal:tensor_utils` have `neon_tensor_utils` deps. \r\nFor aarch64 cross-compile configuration, do below modification can solve the problem:\r\n```\r\ndiff --git a/tensorflow/contrib/lite/kernels/internal/BUILD b/tensorflow/contrib/lite/kernels/internal/BUILD\r\nindex 464163b..d1f4a0e 100644\r\n--- a/tensorflow/contrib/lite/kernels/internal/BUILD\r\n+++ b/tensorflow/contrib/lite/kernels/internal/BUILD\r\n@@ -53,6 +53,13 @@ config_setting(\r\n )\r\n \r\n config_setting(\r\n+    name = \"aarch64\",\r\n+    values = {\r\n+        \"cpu\": \"aarch64\",\r\n+    },\r\n+)\r\n+\r\n+config_setting(\r\n     name = \"arm64-v8a\",\r\n     values = {\r\n         \"cpu\": \"arm64-v8a\",\r\n@@ -448,6 +455,9 @@ cc_library(\r\n         \":arm\": [\r\n             \":neon_tensor_utils\",\r\n         ],\r\n+        \":aarch64\": [\r\n+            \":neon_tensor_utils\",\r\n+        ],\r\n         \":arm64-v8a\": [\r\n             \":neon_tensor_utils\",\r\n         ],\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2161", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2161/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2161/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2161/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2161", "id": 151777679, "node_id": "MDU6SXNzdWUxNTE3Nzc2Nzk=", "number": 2161, "title": "make data_feeder for sparse matrices", "user": {"login": "callicles", "id": 4429209, "node_id": "MDQ6VXNlcjQ0MjkyMDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/4429209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/callicles", "html_url": "https://github.com/callicles", "followers_url": "https://api.github.com/users/callicles/followers", "following_url": "https://api.github.com/users/callicles/following{/other_user}", "gists_url": "https://api.github.com/users/callicles/gists{/gist_id}", "starred_url": "https://api.github.com/users/callicles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/callicles/subscriptions", "organizations_url": "https://api.github.com/users/callicles/orgs", "repos_url": "https://api.github.com/users/callicles/repos", "events_url": "https://api.github.com/users/callicles/events{/privacy}", "received_events_url": "https://api.github.com/users/callicles/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-04-29T01:29:57Z", "updated_at": "2017-06-16T17:43:56Z", "closed_at": "2017-06-16T17:43:56Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System: OS X El Capitan 10.11.4</p>\n<p>Installed version of CUDA and cuDNN: N/A</p>\n<ol>\n<li>pip install: <a href=\"https://storage.googleapis.com/tensorflow/mac/tensorflow-0.8.0-py2-none-any.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/mac/tensorflow-0.8.0-py2-none-any.whl</a></li>\n<li>version: 0.8.0</li>\n</ol>\n<h3>Steps to reproduce</h3>\n<p>Run this code with svm light data:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">from</span> sklearn <span class=\"pl-k\">import</span> datasets, metrics\n<span class=\"pl-k\">from</span> tensorflow.contrib <span class=\"pl-k\">import</span> skflow\n\ntrain_data, train_labels <span class=\"pl-k\">=</span> datasets.load_svmlight_file(<span class=\"pl-c1\">TRAIN</span>)\n\nclassifier <span class=\"pl-k\">=</span> skflow.TensorFlowDNNClassifier(<span class=\"pl-v\">hidden_units</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">20</span>, <span class=\"pl-c1\">10</span>], <span class=\"pl-v\">n_classes</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">2</span>)\nclassifier.fit(train_data, train_labels)\nscore <span class=\"pl-k\">=</span> metrics.accuracy_score(train_labels, classifier.predict(train_data))</pre></div>\n<h3>What have you tried?</h3>\n<p>I think the classifier doesn't handle the CSR matrix matrix produced by the loader</p>\n<h3>Logs or other output that would be helpful</h3>\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-27-01a3edd34655&gt; in &lt;module&gt;()\n      1 classifier = skflow.TensorFlowDNNClassifier(hidden_units=[10, 20, 10], n_classes=2)\n----&gt; 2 classifier.fit(train_data, train_labels)\n      3 score = metrics.accuracy_score(train_labels, classifier.predict(train_data))\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in fit(self, X, y, monitor, logdir)\n    216         self._data_feeder = setup_train_data_feeder(X, y,\n    217                                                     self.n_classes,\n--&gt; 218                                                     self.batch_size)\n    219 \n    220         if monitor is None:\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in setup_train_data_feeder(X, y, n_classes, batch_size)\n     97                              \"streaming learning to work.\")\n     98         data_feeder_cls = StreamingDataFeeder\n---&gt; 99     return data_feeder_cls(X, y, n_classes, batch_size)\n    100 \n    101 \n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in __init__(self, X, y, n_classes, batch_size, random_state)\n    189         x_dtype = np.int64 if X.dtype == np.int64 else np.float32\n    190         y_dtype = np.int64 if n_classes &gt; 1 else np.float32\n--&gt; 191         self.X = check_array(X, dtype=x_dtype)\n    192         self.y = (None if y is None else check_array(y, dtype=y_dtype))\n    193         self.n_classes = n_classes\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in check_array(array, dtype)\n    159         Original array or converted.\n    160     \"\"\"\n--&gt; 161     array = np.array(array, dtype=dtype, order=None, copy=False)\n    162     return array\n    163 \n\nValueError: setting an array element with a sequence.\n</code></pre>", "body_text": "Environment info\nOperating System: OS X El Capitan 10.11.4\nInstalled version of CUDA and cuDNN: N/A\n\npip install: https://storage.googleapis.com/tensorflow/mac/tensorflow-0.8.0-py2-none-any.whl\nversion: 0.8.0\n\nSteps to reproduce\nRun this code with svm light data:\nfrom sklearn import datasets, metrics\nfrom tensorflow.contrib import skflow\n\ntrain_data, train_labels = datasets.load_svmlight_file(TRAIN)\n\nclassifier = skflow.TensorFlowDNNClassifier(hidden_units=[10, 20, 10], n_classes=2)\nclassifier.fit(train_data, train_labels)\nscore = metrics.accuracy_score(train_labels, classifier.predict(train_data))\nWhat have you tried?\nI think the classifier doesn't handle the CSR matrix matrix produced by the loader\nLogs or other output that would be helpful\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-27-01a3edd34655> in <module>()\n      1 classifier = skflow.TensorFlowDNNClassifier(hidden_units=[10, 20, 10], n_classes=2)\n----> 2 classifier.fit(train_data, train_labels)\n      3 score = metrics.accuracy_score(train_labels, classifier.predict(train_data))\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in fit(self, X, y, monitor, logdir)\n    216         self._data_feeder = setup_train_data_feeder(X, y,\n    217                                                     self.n_classes,\n--> 218                                                     self.batch_size)\n    219 \n    220         if monitor is None:\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in setup_train_data_feeder(X, y, n_classes, batch_size)\n     97                              \"streaming learning to work.\")\n     98         data_feeder_cls = StreamingDataFeeder\n---> 99     return data_feeder_cls(X, y, n_classes, batch_size)\n    100 \n    101 \n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in __init__(self, X, y, n_classes, batch_size, random_state)\n    189         x_dtype = np.int64 if X.dtype == np.int64 else np.float32\n    190         y_dtype = np.int64 if n_classes > 1 else np.float32\n--> 191         self.X = check_array(X, dtype=x_dtype)\n    192         self.y = (None if y is None else check_array(y, dtype=y_dtype))\n    193         self.n_classes = n_classes\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in check_array(array, dtype)\n    159         Original array or converted.\n    160     \"\"\"\n--> 161     array = np.array(array, dtype=dtype, order=None, copy=False)\n    162     return array\n    163 \n\nValueError: setting an array element with a sequence.", "body": "### Environment info\n\nOperating System: OS X El Capitan 10.11.4\n\nInstalled version of CUDA and cuDNN: N/A\n1. pip install: https://storage.googleapis.com/tensorflow/mac/tensorflow-0.8.0-py2-none-any.whl\n2. version: 0.8.0\n### Steps to reproduce\n\nRun this code with svm light data:\n\n``` python\nfrom sklearn import datasets, metrics\nfrom tensorflow.contrib import skflow\n\ntrain_data, train_labels = datasets.load_svmlight_file(TRAIN)\n\nclassifier = skflow.TensorFlowDNNClassifier(hidden_units=[10, 20, 10], n_classes=2)\nclassifier.fit(train_data, train_labels)\nscore = metrics.accuracy_score(train_labels, classifier.predict(train_data))\n```\n### What have you tried?\n\nI think the classifier doesn't handle the CSR matrix matrix produced by the loader\n### Logs or other output that would be helpful\n\n```\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-27-01a3edd34655> in <module>()\n      1 classifier = skflow.TensorFlowDNNClassifier(hidden_units=[10, 20, 10], n_classes=2)\n----> 2 classifier.fit(train_data, train_labels)\n      3 score = metrics.accuracy_score(train_labels, classifier.predict(train_data))\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in fit(self, X, y, monitor, logdir)\n    216         self._data_feeder = setup_train_data_feeder(X, y,\n    217                                                     self.n_classes,\n--> 218                                                     self.batch_size)\n    219 \n    220         if monitor is None:\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in setup_train_data_feeder(X, y, n_classes, batch_size)\n     97                              \"streaming learning to work.\")\n     98         data_feeder_cls = StreamingDataFeeder\n---> 99     return data_feeder_cls(X, y, n_classes, batch_size)\n    100 \n    101 \n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in __init__(self, X, y, n_classes, batch_size, random_state)\n    189         x_dtype = np.int64 if X.dtype == np.int64 else np.float32\n    190         y_dtype = np.int64 if n_classes > 1 else np.float32\n--> 191         self.X = check_array(X, dtype=x_dtype)\n    192         self.y = (None if y is None else check_array(y, dtype=y_dtype))\n    193         self.n_classes = n_classes\n\n/Users/nicolas/anaconda/envs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/io/data_feeder.pyc in check_array(array, dtype)\n    159         Original array or converted.\n    160     \"\"\"\n--> 161     array = np.array(array, dtype=dtype, order=None, copy=False)\n    162     return array\n    163 \n\nValueError: setting an array element with a sequence.\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17611", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17611/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17611/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17611/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17611", "id": 304037362, "node_id": "MDU6SXNzdWUzMDQwMzczNjI=", "number": 17611, "title": "TypeError: __new__() got an unexpected keyword argument 'output_alternatives'", "user": {"login": "arakhmat", "id": 17034792, "node_id": "MDQ6VXNlcjE3MDM0Nzky", "avatar_url": "https://avatars1.githubusercontent.com/u/17034792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arakhmat", "html_url": "https://github.com/arakhmat", "followers_url": "https://api.github.com/users/arakhmat/followers", "following_url": "https://api.github.com/users/arakhmat/following{/other_user}", "gists_url": "https://api.github.com/users/arakhmat/gists{/gist_id}", "starred_url": "https://api.github.com/users/arakhmat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arakhmat/subscriptions", "organizations_url": "https://api.github.com/users/arakhmat/orgs", "repos_url": "https://api.github.com/users/arakhmat/repos", "events_url": "https://api.github.com/users/arakhmat/events{/privacy}", "received_events_url": "https://api.github.com/users/arakhmat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-10T03:27:44Z", "updated_at": "2018-03-10T08:10:38Z", "closed_at": "2018-03-10T08:09:13Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>OS Distribution: Linux Ubuntu 16.04.3 LTS</li>\n<li>TensorFlow is installed from binary</li>\n<li>TensorFlow version: v1.6.0-0-gd2e24b6039 1.6.0</li>\n<li>Python version: 3.6.1</li>\n<li>CUDA/cuDNN version: 9.0</li>\n<li>GPU model and memory: GeForce GTX 850m</li>\n</ul>\n<p>and</p>\n<ul>\n<li>OS Distribution: CentOS Linux release 7.3.1611 (Core)</li>\n<li>TensorFlow is installed from binary</li>\n<li>TensorFlow version: v1.6.0-0-gd2e24b6039 1.6.0</li>\n<li>Python version: 3.6.0</li>\n</ul>\n<h3>Describe the problem</h3>\n<p><code>TypeError: __new__() got an unexpected keyword argument 'output_alternatives'</code> is thrown on line 611 in <code>_scale_tower_loss</code> function in tensorflow/contrib/estimator/python/estimator/replicate_model_fn.py</p>\n<p>It can be resolved by adding <code>del estimator_spec['output_alternatives']</code>:</p>\n<pre lang=\"def\" data-meta=\"_scale_tower_loss(tower_spec, loss_reduction, number_of_towers):\"><code>  \"\"\"Produce an EstimatorSpec with approproriately scaled loss.\"\"\"\n  if tower_spec.loss is None:\n    return tower_spec\n\n  estimator_spec = _asdict(tower_spec)\n  estimator_spec['loss'] = _scale_loss(tower_spec.loss, loss_reduction,\n                                       number_of_towers)\n  del estimator_spec['output_alternatives'] # RESOLVES THE ISSUE\n  return model_fn_lib.EstimatorSpec(**estimator_spec)\n</code></pre>\n<p>After running <code>grep</code> command, I have noticed that <code>output_alternatives</code> variable is mostly used in tensorflow/contrib/learn. My guess is that <code>output_alternatives</code>  was forgotten to be removed from the new  tf.estimator.Estimator as it is only used by the old tf.contrib.learn.Estimator.</p>\n<h3>Source code / logs</h3>\n<p>Unfortunately cannot be provided.</p>", "body_text": "System information\n\nOS Distribution: Linux Ubuntu 16.04.3 LTS\nTensorFlow is installed from binary\nTensorFlow version: v1.6.0-0-gd2e24b6039 1.6.0\nPython version: 3.6.1\nCUDA/cuDNN version: 9.0\nGPU model and memory: GeForce GTX 850m\n\nand\n\nOS Distribution: CentOS Linux release 7.3.1611 (Core)\nTensorFlow is installed from binary\nTensorFlow version: v1.6.0-0-gd2e24b6039 1.6.0\nPython version: 3.6.0\n\nDescribe the problem\nTypeError: __new__() got an unexpected keyword argument 'output_alternatives' is thrown on line 611 in _scale_tower_loss function in tensorflow/contrib/estimator/python/estimator/replicate_model_fn.py\nIt can be resolved by adding del estimator_spec['output_alternatives']:\n  \"\"\"Produce an EstimatorSpec with approproriately scaled loss.\"\"\"\n  if tower_spec.loss is None:\n    return tower_spec\n\n  estimator_spec = _asdict(tower_spec)\n  estimator_spec['loss'] = _scale_loss(tower_spec.loss, loss_reduction,\n                                       number_of_towers)\n  del estimator_spec['output_alternatives'] # RESOLVES THE ISSUE\n  return model_fn_lib.EstimatorSpec(**estimator_spec)\n\nAfter running grep command, I have noticed that output_alternatives variable is mostly used in tensorflow/contrib/learn. My guess is that output_alternatives  was forgotten to be removed from the new  tf.estimator.Estimator as it is only used by the old tf.contrib.learn.Estimator.\nSource code / logs\nUnfortunately cannot be provided.", "body": "### System information\r\n- OS Distribution: Linux Ubuntu 16.04.3 LTS\r\n- TensorFlow is installed from binary\r\n- TensorFlow version: v1.6.0-0-gd2e24b6039 1.6.0\r\n- Python version: 3.6.1\r\n- CUDA/cuDNN version: 9.0\r\n- GPU model and memory: GeForce GTX 850m\r\n\r\nand\r\n\r\n- OS Distribution: CentOS Linux release 7.3.1611 (Core) \r\n- TensorFlow is installed from binary\r\n- TensorFlow version: v1.6.0-0-gd2e24b6039 1.6.0\r\n- Python version: 3.6.0\r\n\r\n### Describe the problem\r\n`TypeError: __new__() got an unexpected keyword argument 'output_alternatives'` is thrown on line 611 in `_scale_tower_loss` function in tensorflow/contrib/estimator/python/estimator/replicate_model_fn.py\r\n\r\nIt can be resolved by adding `del estimator_spec['output_alternatives']`:\r\n```def _scale_tower_loss(tower_spec, loss_reduction, number_of_towers):\r\n  \"\"\"Produce an EstimatorSpec with approproriately scaled loss.\"\"\"\r\n  if tower_spec.loss is None:\r\n    return tower_spec\r\n\r\n  estimator_spec = _asdict(tower_spec)\r\n  estimator_spec['loss'] = _scale_loss(tower_spec.loss, loss_reduction,\r\n                                       number_of_towers)\r\n  del estimator_spec['output_alternatives'] # RESOLVES THE ISSUE\r\n  return model_fn_lib.EstimatorSpec(**estimator_spec)\r\n```\r\n\r\nAfter running `grep` command, I have noticed that `output_alternatives` variable is mostly used in tensorflow/contrib/learn. My guess is that `output_alternatives`  was forgotten to be removed from the new  tf.estimator.Estimator as it is only used by the old tf.contrib.learn.Estimator.\r\n\r\n\r\n### Source code / logs\r\nUnfortunately cannot be provided.\r\n"}
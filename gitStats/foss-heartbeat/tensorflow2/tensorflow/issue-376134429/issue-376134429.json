{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23410", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23410/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23410/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23410/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23410", "id": 376134429, "node_id": "MDU6SXNzdWUzNzYxMzQ0Mjk=", "number": 23410, "title": "UnboundLocalError: local variable 'a' referenced before assignment", "user": {"login": "theeheng", "id": 10799037, "node_id": "MDQ6VXNlcjEwNzk5MDM3", "avatar_url": "https://avatars0.githubusercontent.com/u/10799037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theeheng", "html_url": "https://github.com/theeheng", "followers_url": "https://api.github.com/users/theeheng/followers", "following_url": "https://api.github.com/users/theeheng/following{/other_user}", "gists_url": "https://api.github.com/users/theeheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/theeheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theeheng/subscriptions", "organizations_url": "https://api.github.com/users/theeheng/orgs", "repos_url": "https://api.github.com/users/theeheng/repos", "events_url": "https://api.github.com/users/theeheng/events{/privacy}", "received_events_url": "https://api.github.com/users/theeheng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "open", "locked": false, "assignee": {"login": "tofulawrence", "id": 24887415, "node_id": "MDQ6VXNlcjI0ODg3NDE1", "avatar_url": "https://avatars2.githubusercontent.com/u/24887415?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tofulawrence", "html_url": "https://github.com/tofulawrence", "followers_url": "https://api.github.com/users/tofulawrence/followers", "following_url": "https://api.github.com/users/tofulawrence/following{/other_user}", "gists_url": "https://api.github.com/users/tofulawrence/gists{/gist_id}", "starred_url": "https://api.github.com/users/tofulawrence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tofulawrence/subscriptions", "organizations_url": "https://api.github.com/users/tofulawrence/orgs", "repos_url": "https://api.github.com/users/tofulawrence/repos", "events_url": "https://api.github.com/users/tofulawrence/events{/privacy}", "received_events_url": "https://api.github.com/users/tofulawrence/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tofulawrence", "id": 24887415, "node_id": "MDQ6VXNlcjI0ODg3NDE1", "avatar_url": "https://avatars2.githubusercontent.com/u/24887415?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tofulawrence", "html_url": "https://github.com/tofulawrence", "followers_url": "https://api.github.com/users/tofulawrence/followers", "following_url": "https://api.github.com/users/tofulawrence/following{/other_user}", "gists_url": "https://api.github.com/users/tofulawrence/gists{/gist_id}", "starred_url": "https://api.github.com/users/tofulawrence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tofulawrence/subscriptions", "organizations_url": "https://api.github.com/users/tofulawrence/orgs", "repos_url": "https://api.github.com/users/tofulawrence/repos", "events_url": "https://api.github.com/users/tofulawrence/events{/privacy}", "received_events_url": "https://api.github.com/users/tofulawrence/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-31T19:52:29Z", "updated_at": "2018-11-21T20:13:25Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>hi there, i have install phyton 3.7 with the following build : v1.11.0-rc2-4-gc19e29306c 1.11.0</p>\n<p>here the phyton sample code:</p>\n<p>keras_file = \"keras_model.h5\"<br>\ntf.keras.models.save_model(model, keras_file)</p>\n<h1>Convert to TensorFlow Lite model.</h1>\n<p>converter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)<br>\ntflite_model = converter.convert()<br>\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)</p>\n<p>when it try to execute : converter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)</p>\n<p>and throw the following error:</p>\n<p>converter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/contrib/lite/python/lite.py\", line 354, in from_keras_model_file<br>\n_keras.backend.clear_session()<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/keras/backend.py\", line 335, in clear_session<br>\nFalse, shape=(), name='keras_learning_phase')<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 5148, in placeholder_with_default<br>\n\"PlaceholderWithDefault\", input=input, shape=shape, name=name)<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 510, in _apply_op_helper<br>\npreferred_dtype=default_dtype)<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/ops.py\", line 1144, in internal_convert_to_tensor<br>\nret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/constant_op.py\", line 228, in _constant_tensor_conversion_function<br>\nreturn constant(v, dtype=dtype, name=name)<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/constant_op.py\", line 207, in constant<br>\nvalue, dtype=dtype, shape=shape, verify_shape=verify_shape))<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 542, in make_tensor_proto<br>\nappend_fn(tensor_proto, proto_values)<br>\nFile \"tensorflow/python/framework/fast_tensor_util.pyx\", line 134, in tensorflow.python.framework.fast_tensor_util.AppendBoolArrayToTensorProto<br>\nFile \"/Users/htan/venv/lib/python3.7/site-packages/numpy/lib/type_check.py\", line 489, in asscalar<br>\nreturn a.item()<br>\nUnboundLocalError: local variable 'a' referenced before assignment</p>", "body_text": "hi there, i have install phyton 3.7 with the following build : v1.11.0-rc2-4-gc19e29306c 1.11.0\nhere the phyton sample code:\nkeras_file = \"keras_model.h5\"\ntf.keras.models.save_model(model, keras_file)\nConvert to TensorFlow Lite model.\nconverter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)\ntflite_model = converter.convert()\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\nwhen it try to execute : converter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)\nand throw the following error:\nconverter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/contrib/lite/python/lite.py\", line 354, in from_keras_model_file\n_keras.backend.clear_session()\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/keras/backend.py\", line 335, in clear_session\nFalse, shape=(), name='keras_learning_phase')\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 5148, in placeholder_with_default\n\"PlaceholderWithDefault\", input=input, shape=shape, name=name)\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 510, in _apply_op_helper\npreferred_dtype=default_dtype)\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/ops.py\", line 1144, in internal_convert_to_tensor\nret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/constant_op.py\", line 228, in _constant_tensor_conversion_function\nreturn constant(v, dtype=dtype, name=name)\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/constant_op.py\", line 207, in constant\nvalue, dtype=dtype, shape=shape, verify_shape=verify_shape))\nFile \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 542, in make_tensor_proto\nappend_fn(tensor_proto, proto_values)\nFile \"tensorflow/python/framework/fast_tensor_util.pyx\", line 134, in tensorflow.python.framework.fast_tensor_util.AppendBoolArrayToTensorProto\nFile \"/Users/htan/venv/lib/python3.7/site-packages/numpy/lib/type_check.py\", line 489, in asscalar\nreturn a.item()\nUnboundLocalError: local variable 'a' referenced before assignment", "body": "hi there, i have install phyton 3.7 with the following build : v1.11.0-rc2-4-gc19e29306c 1.11.0\r\n\r\nhere the phyton sample code: \r\n\r\nkeras_file = \"keras_model.h5\"\r\ntf.keras.models.save_model(model, keras_file)\r\n\r\n# Convert to TensorFlow Lite model.\r\nconverter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)\r\ntflite_model = converter.convert()\r\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\n\r\nwhen it try to execute : converter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)\r\n\r\nand throw the following error:\r\n\r\nconverter = tf.contrib.lite.TocoConverter.from_keras_model_file(keras_file)\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/contrib/lite/python/lite.py\", line 354, in from_keras_model_file\r\n    _keras.backend.clear_session()\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/keras/backend.py\", line 335, in clear_session\r\n    False, shape=(), name='keras_learning_phase')\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 5148, in placeholder_with_default\r\n    \"PlaceholderWithDefault\", input=input, shape=shape, name=name)\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 510, in _apply_op_helper\r\n    preferred_dtype=default_dtype)\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/ops.py\", line 1144, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/constant_op.py\", line 228, in _constant_tensor_conversion_function\r\n    return constant(v, dtype=dtype, name=name)\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/constant_op.py\", line 207, in constant\r\n    value, dtype=dtype, shape=shape, verify_shape=verify_shape))\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/tensorflow/python/framework/tensor_util.py\", line 542, in make_tensor_proto\r\n    append_fn(tensor_proto, proto_values)\r\n  File \"tensorflow/python/framework/fast_tensor_util.pyx\", line 134, in tensorflow.python.framework.fast_tensor_util.AppendBoolArrayToTensorProto\r\n  File \"/Users/htan/venv/lib/python3.7/site-packages/numpy/lib/type_check.py\", line 489, in asscalar\r\n    return a.item()\r\nUnboundLocalError: local variable 'a' referenced before assignment"}
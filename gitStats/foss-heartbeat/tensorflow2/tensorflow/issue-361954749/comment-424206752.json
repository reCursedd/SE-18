{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/424206752", "html_url": "https://github.com/tensorflow/tensorflow/issues/22396#issuecomment-424206752", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22396", "id": 424206752, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDIwNjc1Mg==", "user": {"login": "haotianteng", "id": 11155295, "node_id": "MDQ6VXNlcjExMTU1Mjk1", "avatar_url": "https://avatars3.githubusercontent.com/u/11155295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haotianteng", "html_url": "https://github.com/haotianteng", "followers_url": "https://api.github.com/users/haotianteng/followers", "following_url": "https://api.github.com/users/haotianteng/following{/other_user}", "gists_url": "https://api.github.com/users/haotianteng/gists{/gist_id}", "starred_url": "https://api.github.com/users/haotianteng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haotianteng/subscriptions", "organizations_url": "https://api.github.com/users/haotianteng/orgs", "repos_url": "https://api.github.com/users/haotianteng/repos", "events_url": "https://api.github.com/users/haotianteng/events{/privacy}", "received_events_url": "https://api.github.com/users/haotianteng/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-25T04:53:48Z", "updated_at": "2018-09-25T04:53:48Z", "author_association": "NONE", "body_html": "<p>The problem can be solved by exporting the three dense tensor of the Sparse Tensor instead of exporting the Sparse Tensor itself, e.g.:<br>\nChange</p>\n<pre><code>sparse_output_tensor_info = tf.saved_model.utils.build_tensor_info(\n                    predict)\noutputs = {'output':sparse_output_tensor_info}\n</code></pre>\n<p>to</p>\n<pre><code>indices_output_tensor_info = tf.saved_model.utils.build_tensor_info(\n                    predict.indices)\nvalues_output_tensor_info = tf.saved_model.utils.build_tensor_info(\n                    predict.values)\ndense_shape_output_tensor_info = tf.saved_model.utils.build_tensor_info(\n                    predict.dense_shape)\n outputs = {'indices':indices_output_tensor_info,\n                           'values':values_output_tensor_info,\n                           'dense_shape':dense_shape_output_tensor_info}\n</code></pre>\n<p>Well I guess it could be an easy fix by redirecting the correct name of SparseTensor when predicting, but I am not sure.</p>", "body_text": "The problem can be solved by exporting the three dense tensor of the Sparse Tensor instead of exporting the Sparse Tensor itself, e.g.:\nChange\nsparse_output_tensor_info = tf.saved_model.utils.build_tensor_info(\n                    predict)\noutputs = {'output':sparse_output_tensor_info}\n\nto\nindices_output_tensor_info = tf.saved_model.utils.build_tensor_info(\n                    predict.indices)\nvalues_output_tensor_info = tf.saved_model.utils.build_tensor_info(\n                    predict.values)\ndense_shape_output_tensor_info = tf.saved_model.utils.build_tensor_info(\n                    predict.dense_shape)\n outputs = {'indices':indices_output_tensor_info,\n                           'values':values_output_tensor_info,\n                           'dense_shape':dense_shape_output_tensor_info}\n\nWell I guess it could be an easy fix by redirecting the correct name of SparseTensor when predicting, but I am not sure.", "body": "The problem can be solved by exporting the three dense tensor of the Sparse Tensor instead of exporting the Sparse Tensor itself, e.g.:\r\nChange\r\n```\r\nsparse_output_tensor_info = tf.saved_model.utils.build_tensor_info(\r\n                    predict)\r\noutputs = {'output':sparse_output_tensor_info}\r\n```\r\n\r\nto\r\n\r\n```\r\nindices_output_tensor_info = tf.saved_model.utils.build_tensor_info(\r\n                    predict.indices)\r\nvalues_output_tensor_info = tf.saved_model.utils.build_tensor_info(\r\n                    predict.values)\r\ndense_shape_output_tensor_info = tf.saved_model.utils.build_tensor_info(\r\n                    predict.dense_shape)\r\n outputs = {'indices':indices_output_tensor_info,\r\n                           'values':values_output_tensor_info,\r\n                           'dense_shape':dense_shape_output_tensor_info}\r\n```\r\nWell I guess it could be an easy fix by redirecting the correct name of SparseTensor when predicting, but I am not sure."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/79936311", "pull_request_review_id": 1045997, "id": 79936311, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc5OTM2MzEx", "diff_hunk": "@@ -40,20 +42,22 @@ bool IsRetriable(Status status) {\n Status CallWithRetries(const std::function<Status()>& f) {\n   int attempts = 0;\n   while (true) {\n+    int delay = std::min(initial_delay_seconds << attempts, kMaximumBackoffSeconds);", "path": "tensorflow/core/platform/cloud/retrying_file_system.cc", "position": null, "original_position": 13, "commit_id": "f6b6a9d38da07753541c47487fbe7ce3361a4ed1", "original_commit_id": "a3a26d4a32a5063a7ea9890fc975633a38cee25d", "user": {"login": "rinugun", "id": 1694130, "node_id": "MDQ6VXNlcjE2OTQxMzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1694130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rinugun", "html_url": "https://github.com/rinugun", "followers_url": "https://api.github.com/users/rinugun/followers", "following_url": "https://api.github.com/users/rinugun/following{/other_user}", "gists_url": "https://api.github.com/users/rinugun/gists{/gist_id}", "starred_url": "https://api.github.com/users/rinugun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rinugun/subscriptions", "organizations_url": "https://api.github.com/users/rinugun/orgs", "repos_url": "https://api.github.com/users/rinugun/repos", "events_url": "https://api.github.com/users/rinugun/events{/privacy}", "received_events_url": "https://api.github.com/users/rinugun/received_events", "type": "User", "site_admin": false}, "body": "1. Will 'constexpr' compile though? I thought 'constexpr' has to be computable at compile time. \n2. I think it's fine to move 'attempts++' to make it the last line in the loop (i.e it could be after sleep())\n3. In that case its semantics changes from \"the number of made attempts\" to \"the current attempt number\", so I suggest renaming 'attempts' to 'attempt' to reflect that\n4. Also, 'attempts >= kMaxAttempts\" in the 'if' line must be replaced with \"attempt > kMaxAttempt\" to keep the total amount of allowed attempts the same.\n", "created_at": "2016-09-21T21:25:26Z", "updated_at": "2016-09-30T07:04:19Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4501#discussion_r79936311", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4501", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/79936311"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4501#discussion_r79936311"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4501"}}, "body_html": "<ol>\n<li>Will 'constexpr' compile though? I thought 'constexpr' has to be computable at compile time.</li>\n<li>I think it's fine to move 'attempts++' to make it the last line in the loop (i.e it could be after sleep())</li>\n<li>In that case its semantics changes from \"the number of made attempts\" to \"the current attempt number\", so I suggest renaming 'attempts' to 'attempt' to reflect that</li>\n<li>Also, 'attempts &gt;= kMaxAttempts\" in the 'if' line must be replaced with \"attempt &gt; kMaxAttempt\" to keep the total amount of allowed attempts the same.</li>\n</ol>", "body_text": "Will 'constexpr' compile though? I thought 'constexpr' has to be computable at compile time.\nI think it's fine to move 'attempts++' to make it the last line in the loop (i.e it could be after sleep())\nIn that case its semantics changes from \"the number of made attempts\" to \"the current attempt number\", so I suggest renaming 'attempts' to 'attempt' to reflect that\nAlso, 'attempts >= kMaxAttempts\" in the 'if' line must be replaced with \"attempt > kMaxAttempt\" to keep the total amount of allowed attempts the same.", "in_reply_to_id": 79765165}
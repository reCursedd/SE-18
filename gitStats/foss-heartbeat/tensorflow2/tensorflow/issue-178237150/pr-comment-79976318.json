{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/79976318", "pull_request_review_id": 1081761, "id": 79976318, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc5OTc2MzE4", "diff_hunk": "@@ -22,8 +22,10 @@ namespace tensorflow {\n \n namespace {\n \n-// In case of failure, every call will be retried kMaxAttempts-1 times.\n-constexpr int kMaxAttempts = 4;\n+// In case of failure, every call will be retried kMaxAttempts times.\n+constexpr int kMaxAttempts = 3;", "path": "tensorflow/core/platform/cloud/retrying_file_system.cc", "position": null, "original_position": 7, "commit_id": "f6b6a9d38da07753541c47487fbe7ce3361a4ed1", "original_commit_id": "7d04fd1522c5b22bc666d208d2e57e86f5e143d3", "user": {"login": "rinugun", "id": 1694130, "node_id": "MDQ6VXNlcjE2OTQxMzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1694130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rinugun", "html_url": "https://github.com/rinugun", "followers_url": "https://api.github.com/users/rinugun/followers", "following_url": "https://api.github.com/users/rinugun/following{/other_user}", "gists_url": "https://api.github.com/users/rinugun/gists{/gist_id}", "starred_url": "https://api.github.com/users/rinugun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rinugun/subscriptions", "organizations_url": "https://api.github.com/users/rinugun/orgs", "repos_url": "https://api.github.com/users/rinugun/repos", "events_url": "https://api.github.com/users/rinugun/events{/privacy}", "received_events_url": "https://api.github.com/users/rinugun/received_events", "type": "User", "site_admin": false}, "body": "Ok, I think I got it. It looks like kMaxAttempts has become a \"retry count\" instead of an \"attempt count\" that it used to be. So this needs to be fixed to be made consistent again. \n\nOne way would be to rename it to kMaxRetries and rename 'attempt' to 'retry' respectively, keeping the constant value '3', the comment and the rest of the code as it is now.\n\nAnother, maybe a simpler way, would be to replace \"attempt >= kMaxAttempts\" with \"attempt >= kMaxAttempts -1\" to solve the \"off by one\" error.  And then the lines 25-26 can be reverted back to the previous state.\n\nWhat do you think?\n", "created_at": "2016-09-22T05:01:39Z", "updated_at": "2016-09-30T07:04:19Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4501#discussion_r79976318", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4501", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/79976318"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4501#discussion_r79976318"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4501"}}, "body_html": "<p>Ok, I think I got it. It looks like kMaxAttempts has become a \"retry count\" instead of an \"attempt count\" that it used to be. So this needs to be fixed to be made consistent again.</p>\n<p>One way would be to rename it to kMaxRetries and rename 'attempt' to 'retry' respectively, keeping the constant value '3', the comment and the rest of the code as it is now.</p>\n<p>Another, maybe a simpler way, would be to replace \"attempt &gt;= kMaxAttempts\" with \"attempt &gt;= kMaxAttempts -1\" to solve the \"off by one\" error.  And then the lines 25-26 can be reverted back to the previous state.</p>\n<p>What do you think?</p>", "body_text": "Ok, I think I got it. It looks like kMaxAttempts has become a \"retry count\" instead of an \"attempt count\" that it used to be. So this needs to be fixed to be made consistent again.\nOne way would be to rename it to kMaxRetries and rename 'attempt' to 'retry' respectively, keeping the constant value '3', the comment and the rest of the code as it is now.\nAnother, maybe a simpler way, would be to replace \"attempt >= kMaxAttempts\" with \"attempt >= kMaxAttempts -1\" to solve the \"off by one\" error.  And then the lines 25-26 can be reverted back to the previous state.\nWhat do you think?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6833", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6833/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6833/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6833/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6833", "id": 200690943, "node_id": "MDU6SXNzdWUyMDA2OTA5NDM=", "number": 6833, "title": "Go: Unable to set shape attributes on operations", "user": {"login": "sdeoras", "id": 16372009, "node_id": "MDQ6VXNlcjE2MzcyMDA5", "avatar_url": "https://avatars2.githubusercontent.com/u/16372009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sdeoras", "html_url": "https://github.com/sdeoras", "followers_url": "https://api.github.com/users/sdeoras/followers", "following_url": "https://api.github.com/users/sdeoras/following{/other_user}", "gists_url": "https://api.github.com/users/sdeoras/gists{/gist_id}", "starred_url": "https://api.github.com/users/sdeoras/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sdeoras/subscriptions", "organizations_url": "https://api.github.com/users/sdeoras/orgs", "repos_url": "https://api.github.com/users/sdeoras/repos", "events_url": "https://api.github.com/users/sdeoras/events{/privacy}", "received_events_url": "https://api.github.com/users/sdeoras/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-01-13T17:58:27Z", "updated_at": "2017-01-19T19:32:19Z", "closed_at": "2017-01-19T17:41:51Z", "author_association": "NONE", "body_html": "<p>Hi TensorFlow/Go team, I am attaching a code snippet that is failing due to the way shape argument is expected.</p>\n<p>cc: <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16018\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/asimshankar\">@asimshankar</a> and referencing <a href=\"https://github.com/tensorflow/tensorflow/issues/10#issuecomment-272461355\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/10/hovercard\">this</a> discussion</p>\n<pre><code>\npackage bugs\n\nimport (\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\n\t\"testing\"\n)\n\nfunc TestVarHandleOpShape(t *testing.T) {\n\tscope := op.NewScope()\n\t_ = op.VarHandleOp(scope, tf.Int32, []int64{2, 3})\n\t_, err := scope.Finalize()\n\tif err != nil {\n\t\tt.Fatal(err)\n\t}\n}\n\n/*\n=== RUN   TestVarHandleOpShape\n--- FAIL: TestVarHandleOpShape (0.00s)\n        bugs_test.go:14: failed to add operation \"VarHandleOp\": AttrValue had value with type 'list(int)' when 'shape' expected\n                         for attr 'shape'\n                        ; NodeDef: VarHandleOp = VarHandleOp[_class=[], container=\"\", dtype=DT_INT32, shape=[2, 3], shared_name=\"\"](); Op&lt;name=VarHandleOp; signature= -&gt; resource:resource; attr=container:string,default=\"\"; attr=shared_name:string,default=\"\"; attr=dtype:type; attr=shape:shape; is_stateful=true&gt; (Stacktrace: goroutine 6 [running]:\n                runtime/debug.Stack(0x0, 0x0, 0x0)\n                        /usr/lib/golang/src/runtime/debug/stack.go:24 +0x79\n                github.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).UpdateErr(0xc420012570, 0x51d427, 0xb, 0x79fba0, 0xc420054048)\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:113 +0x72\n                github.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).AddOperation(0xc420012570, 0x51d427, 0xb, 0x51d427, 0xb, 0x0, 0x0, 0x0, 0xc4200125a0, 0xc420012540)\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:78 +0xf9\n                github.com/tensorflow/tensorflow/tensorflow/go/op.VarHandleOp(0xc420012570, 0xc400000003, 0xc4200106e0, 0x2, 0x2, 0x0, 0x0, 0x0, 0x1123b1d4, 0xc420051f78)\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:14045 +0x27d\n                bitbucket.hgst.com/x/tensorflow.git/bugs.TestVarHandleOpShape(0xc4200b8240)\n                        /home/sdeoras/go/src/bitbucket.hgst.com/x/tensorflow.git/bugs/bugs_test.go:11 +0x96\n                testing.tRunner(0xc4200b8240, 0x52bb48)\n                        /usr/lib/golang/src/testing/testing.go:610 +0x81\n                created by testing.(*T).Run\n                        /usr/lib/golang/src/testing/testing.go:646 +0x2ec\n                )\nFAIL\nexit status 1\nFAIL    bitbucket.hgst.com/x/tensorflow.git/bugs        0.134s\n*/\n\n</code></pre>", "body_text": "Hi TensorFlow/Go team, I am attaching a code snippet that is failing due to the way shape argument is expected.\ncc: @asimshankar and referencing this discussion\n\npackage bugs\n\nimport (\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\n\t\"testing\"\n)\n\nfunc TestVarHandleOpShape(t *testing.T) {\n\tscope := op.NewScope()\n\t_ = op.VarHandleOp(scope, tf.Int32, []int64{2, 3})\n\t_, err := scope.Finalize()\n\tif err != nil {\n\t\tt.Fatal(err)\n\t}\n}\n\n/*\n=== RUN   TestVarHandleOpShape\n--- FAIL: TestVarHandleOpShape (0.00s)\n        bugs_test.go:14: failed to add operation \"VarHandleOp\": AttrValue had value with type 'list(int)' when 'shape' expected\n                         for attr 'shape'\n                        ; NodeDef: VarHandleOp = VarHandleOp[_class=[], container=\"\", dtype=DT_INT32, shape=[2, 3], shared_name=\"\"](); Op<name=VarHandleOp; signature= -> resource:resource; attr=container:string,default=\"\"; attr=shared_name:string,default=\"\"; attr=dtype:type; attr=shape:shape; is_stateful=true> (Stacktrace: goroutine 6 [running]:\n                runtime/debug.Stack(0x0, 0x0, 0x0)\n                        /usr/lib/golang/src/runtime/debug/stack.go:24 +0x79\n                github.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).UpdateErr(0xc420012570, 0x51d427, 0xb, 0x79fba0, 0xc420054048)\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:113 +0x72\n                github.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).AddOperation(0xc420012570, 0x51d427, 0xb, 0x51d427, 0xb, 0x0, 0x0, 0x0, 0xc4200125a0, 0xc420012540)\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:78 +0xf9\n                github.com/tensorflow/tensorflow/tensorflow/go/op.VarHandleOp(0xc420012570, 0xc400000003, 0xc4200106e0, 0x2, 0x2, 0x0, 0x0, 0x0, 0x1123b1d4, 0xc420051f78)\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:14045 +0x27d\n                bitbucket.hgst.com/x/tensorflow.git/bugs.TestVarHandleOpShape(0xc4200b8240)\n                        /home/sdeoras/go/src/bitbucket.hgst.com/x/tensorflow.git/bugs/bugs_test.go:11 +0x96\n                testing.tRunner(0xc4200b8240, 0x52bb48)\n                        /usr/lib/golang/src/testing/testing.go:610 +0x81\n                created by testing.(*T).Run\n                        /usr/lib/golang/src/testing/testing.go:646 +0x2ec\n                )\nFAIL\nexit status 1\nFAIL    bitbucket.hgst.com/x/tensorflow.git/bugs        0.134s\n*/", "body": "Hi TensorFlow/Go team, I am attaching a code snippet that is failing due to the way shape argument is expected.\r\n\r\ncc: @asimshankar and referencing [this](https://github.com/tensorflow/tensorflow/issues/10#issuecomment-272461355) discussion\r\n\r\n```\r\n\r\npackage bugs\r\n\r\nimport (\r\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\r\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\r\n\t\"testing\"\r\n)\r\n\r\nfunc TestVarHandleOpShape(t *testing.T) {\r\n\tscope := op.NewScope()\r\n\t_ = op.VarHandleOp(scope, tf.Int32, []int64{2, 3})\r\n\t_, err := scope.Finalize()\r\n\tif err != nil {\r\n\t\tt.Fatal(err)\r\n\t}\r\n}\r\n\r\n/*\r\n=== RUN   TestVarHandleOpShape\r\n--- FAIL: TestVarHandleOpShape (0.00s)\r\n        bugs_test.go:14: failed to add operation \"VarHandleOp\": AttrValue had value with type 'list(int)' when 'shape' expected\r\n                         for attr 'shape'\r\n                        ; NodeDef: VarHandleOp = VarHandleOp[_class=[], container=\"\", dtype=DT_INT32, shape=[2, 3], shared_name=\"\"](); Op<name=VarHandleOp; signature= -> resource:resource; attr=container:string,default=\"\"; attr=shared_name:string,default=\"\"; attr=dtype:type; attr=shape:shape; is_stateful=true> (Stacktrace: goroutine 6 [running]:\r\n                runtime/debug.Stack(0x0, 0x0, 0x0)\r\n                        /usr/lib/golang/src/runtime/debug/stack.go:24 +0x79\r\n                github.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).UpdateErr(0xc420012570, 0x51d427, 0xb, 0x79fba0, 0xc420054048)\r\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:113 +0x72\r\n                github.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).AddOperation(0xc420012570, 0x51d427, 0xb, 0x51d427, 0xb, 0x0, 0x0, 0x0, 0xc4200125a0, 0xc420012540)\r\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:78 +0xf9\r\n                github.com/tensorflow/tensorflow/tensorflow/go/op.VarHandleOp(0xc420012570, 0xc400000003, 0xc4200106e0, 0x2, 0x2, 0x0, 0x0, 0x0, 0x1123b1d4, 0xc420051f78)\r\n                        /home/sdeoras/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:14045 +0x27d\r\n                bitbucket.hgst.com/x/tensorflow.git/bugs.TestVarHandleOpShape(0xc4200b8240)\r\n                        /home/sdeoras/go/src/bitbucket.hgst.com/x/tensorflow.git/bugs/bugs_test.go:11 +0x96\r\n                testing.tRunner(0xc4200b8240, 0x52bb48)\r\n                        /usr/lib/golang/src/testing/testing.go:610 +0x81\r\n                created by testing.(*T).Run\r\n                        /usr/lib/golang/src/testing/testing.go:646 +0x2ec\r\n                )\r\nFAIL\r\nexit status 1\r\nFAIL    bitbucket.hgst.com/x/tensorflow.git/bugs        0.134s\r\n*/\r\n\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/287001974", "html_url": "https://github.com/tensorflow/tensorflow/issues/7585#issuecomment-287001974", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7585", "id": 287001974, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzAwMTk3NA==", "user": {"login": "SeguinBe", "id": 7132817, "node_id": "MDQ6VXNlcjcxMzI4MTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7132817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeguinBe", "html_url": "https://github.com/SeguinBe", "followers_url": "https://api.github.com/users/SeguinBe/followers", "following_url": "https://api.github.com/users/SeguinBe/following{/other_user}", "gists_url": "https://api.github.com/users/SeguinBe/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeguinBe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeguinBe/subscriptions", "organizations_url": "https://api.github.com/users/SeguinBe/orgs", "repos_url": "https://api.github.com/users/SeguinBe/repos", "events_url": "https://api.github.com/users/SeguinBe/events{/privacy}", "received_events_url": "https://api.github.com/users/SeguinBe/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-16T09:28:14Z", "updated_at": "2017-03-16T09:53:29Z", "author_association": "NONE", "body_html": "<p>Is there any update on this? Just encountered it as well. Feels indeed that the shape validation part of <code>scatter_nd</code> is buggy.</p>\n<p>It checks for <code>updates.shape = indices.shape[:IXDIM] + params_shape[IXDIM:]</code> but as far as I understand something like <code>updates.shape = indices.shape[:-1] + params_shape[indices.shape[-1]:]</code> is what is expected.</p>\n<p>EDIT: by the way this test <a href=\"https://github.com/tensorflow/tensorflow/blob/63a21e054007d86269ed1ad0145ebce04ee57a81/tensorflow/python/kernel_tests/scatter_nd_ops_test.py#L480\">scatter_nd_ops_test.py</a> fails for me when I reproduce it :</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">with</span> tf.Session():\n    indices <span class=\"pl-k\">=</span> tf.zeros([<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">3</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.int32)\n    values <span class=\"pl-k\">=</span> tf.zeros([<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">6</span>, <span class=\"pl-c1\">7</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">9</span>])\n    shape <span class=\"pl-k\">=</span> [<span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">5</span>, <span class=\"pl-c1\">6</span>, <span class=\"pl-c1\">7</span>, <span class=\"pl-c1\">8</span>, <span class=\"pl-c1\">9</span>]\n    tf.scatter_nd(indices, values, shape).eval()</pre></div>\n<p>EDIT2: apaprently was corrected <a href=\"https://github.com/tensorflow/tensorflow/commit/3b7b39ac5dd2dceebe4b80b5e0b12316720a924b\">here already</a></p>", "body_text": "Is there any update on this? Just encountered it as well. Feels indeed that the shape validation part of scatter_nd is buggy.\nIt checks for updates.shape = indices.shape[:IXDIM] + params_shape[IXDIM:] but as far as I understand something like updates.shape = indices.shape[:-1] + params_shape[indices.shape[-1]:] is what is expected.\nEDIT: by the way this test scatter_nd_ops_test.py fails for me when I reproduce it :\nwith tf.Session():\n    indices = tf.zeros([1, 2, 3], dtype=tf.int32)\n    values = tf.zeros([1, 2, 6, 7, 8, 9])\n    shape = [3, 4, 5, 6, 7, 8, 9]\n    tf.scatter_nd(indices, values, shape).eval()\nEDIT2: apaprently was corrected here already", "body": "Is there any update on this? Just encountered it as well. Feels indeed that the shape validation part of `scatter_nd` is buggy.\r\n\r\nIt checks for `updates.shape = indices.shape[:IXDIM] + params_shape[IXDIM:]` but as far as I understand something like `updates.shape = indices.shape[:-1] + params_shape[indices.shape[-1]:]` is what is expected.\r\n\r\nEDIT: by the way this test [scatter_nd_ops_test.py](https://github.com/tensorflow/tensorflow/blob/63a21e054007d86269ed1ad0145ebce04ee57a81/tensorflow/python/kernel_tests/scatter_nd_ops_test.py#L480) fails for me when I reproduce it :\r\n\r\n```python\r\nwith tf.Session():\r\n    indices = tf.zeros([1, 2, 3], dtype=tf.int32)\r\n    values = tf.zeros([1, 2, 6, 7, 8, 9])\r\n    shape = [3, 4, 5, 6, 7, 8, 9]\r\n    tf.scatter_nd(indices, values, shape).eval()\r\n```\r\n\r\nEDIT2: apaprently was corrected [here already](https://github.com/tensorflow/tensorflow/commit/3b7b39ac5dd2dceebe4b80b5e0b12316720a924b)"}
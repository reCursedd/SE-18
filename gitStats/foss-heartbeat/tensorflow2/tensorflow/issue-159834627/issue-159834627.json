{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2816", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2816/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2816/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2816/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2816", "id": 159834627, "node_id": "MDU6SXNzdWUxNTk4MzQ2Mjc=", "number": 2816, "title": "Executing genrule //tensorflow/contrib/session_bundle/example:half_plus_two failed", "user": {"login": "kmhofmann", "id": 7887138, "node_id": "MDQ6VXNlcjc4ODcxMzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7887138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmhofmann", "html_url": "https://github.com/kmhofmann", "followers_url": "https://api.github.com/users/kmhofmann/followers", "following_url": "https://api.github.com/users/kmhofmann/following{/other_user}", "gists_url": "https://api.github.com/users/kmhofmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmhofmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmhofmann/subscriptions", "organizations_url": "https://api.github.com/users/kmhofmann/orgs", "repos_url": "https://api.github.com/users/kmhofmann/repos", "events_url": "https://api.github.com/users/kmhofmann/events{/privacy}", "received_events_url": "https://api.github.com/users/kmhofmann/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "nfiedel", "id": 447896, "node_id": "MDQ6VXNlcjQ0Nzg5Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/447896?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfiedel", "html_url": "https://github.com/nfiedel", "followers_url": "https://api.github.com/users/nfiedel/followers", "following_url": "https://api.github.com/users/nfiedel/following{/other_user}", "gists_url": "https://api.github.com/users/nfiedel/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfiedel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfiedel/subscriptions", "organizations_url": "https://api.github.com/users/nfiedel/orgs", "repos_url": "https://api.github.com/users/nfiedel/repos", "events_url": "https://api.github.com/users/nfiedel/events{/privacy}", "received_events_url": "https://api.github.com/users/nfiedel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nfiedel", "id": 447896, "node_id": "MDQ6VXNlcjQ0Nzg5Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/447896?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfiedel", "html_url": "https://github.com/nfiedel", "followers_url": "https://api.github.com/users/nfiedel/followers", "following_url": "https://api.github.com/users/nfiedel/following{/other_user}", "gists_url": "https://api.github.com/users/nfiedel/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfiedel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfiedel/subscriptions", "organizations_url": "https://api.github.com/users/nfiedel/orgs", "repos_url": "https://api.github.com/users/nfiedel/repos", "events_url": "https://api.github.com/users/nfiedel/events{/privacy}", "received_events_url": "https://api.github.com/users/nfiedel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-06-12T16:07:29Z", "updated_at": "2016-06-20T09:48:11Z", "closed_at": "2016-06-20T09:48:11Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hi,<br>\nInstalling TensorFlow from source fails on my system. There seems to be some Python-related error when building 'half_plus_two'.<br>\nSee (hopefully) all relevant output below.</p>\n<h3>Environment info</h3>\n<p>Operating System:</p>\n<blockquote>\n<p>lsb_release -a<br>\nNo LSB modules are available.<br>\nDistributor ID: Ubuntu<br>\nDescription:    Ubuntu 16.04 LTS<br>\nRelease:    16.04<br>\nCodename:   xenial</p>\n<p>uname -a<br>\nLinux the-beast 4.4.0-24-generic <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115973401\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/43\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/43/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/43\">#43</a>-Ubuntu SMP Wed Jun 8 19:27:37 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux</p>\n</blockquote>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<blockquote>\n<p>ls -l /usr/local/cuda-8.0/lib64/libcud*<br>\n-rw-r--r-- 1 root root   560184 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root       16 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so -&gt; libcudart.so.8.0<br>\nlrwxrwxrwx 1 root root       19 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.27<br>\n-rwxr-xr-x 1 root root   394472 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27<br>\n-rw-r--r-- 1 root root   737516 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart_static.a<br>\n-rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so<br>\n-rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5<br>\n-rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5<br>\n-rw-r--r-- 1 root root 68709594 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn_static.a</p>\n</blockquote>\n<p>If installed from sources, provide the commit hash:<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/bf83048d5f28b7fa0f39df799bd01a8fc581f5cf/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/bf83048d5f28b7fa0f39df799bd01a8fc581f5cf\"><tt>bf83048</tt></a></p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Clone TensorFlow and follow instructions to build from source:<br>\n<a href=\"https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#installation-for-linux\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#installation-for-linux</a></li>\n<li>Execute command<br>\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package<br>\nwhich ultimately fails.</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>This should be the relevant part:</p>\n<p>michael@the-beast:~/devel/tensorflow$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures<br>\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/protobuf/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/protobuf/WORKSPACE (@<strong>main</strong>) does not match the name given in the repository's definition (<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=30293029\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/protobuf\">@protobuf</a>); this will cause a build error in future versions.<br>\nWARNING: /home/michael/devel/tensorflow/util/python/BUILD:11:16: in includes attribute of cc_library rule //util/python:python_headers: 'python_include' resolves to 'util/python/python_include' not in 'third_party'. This will be an error in the future.<br>\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/highwayhash/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/highwayhash/WORKSPACE (@<strong>main</strong>) does not match the name given in the repository's definition (@highwayhash); this will cause a build error in future versions.<br>\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/re2/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/re2/WORKSPACE (@<strong>main</strong>) does not match the name given in the repository's definition (<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23161534\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/re2\">@re2</a>); this will cause a build error in future versions.<br>\nINFO: Found 1 target...<br>\nERROR: /home/michael/devel/tensorflow/tensorflow/contrib/session_bundle/example/BUILD:38:1: Executing genrule //tensorflow/contrib/session_bundle/example:half_plus_two failed: bash failed: error executing command<br>\n(cd /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow &amp;&amp; <br>\nexec env - <br>\nPATH=/home/michael/torch/install/bin:/home/michael/devel/jdk1.8.0_77/bin:/home/michael/devel/bazel/output:/usr/local/cuda-8.0/bin:/home/michael/devel/gocode/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin <br>\n/bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; rm -rf /tmp/half_plus_two; /usr/bin/python bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two; cp -r /tmp/half_plus_two/* bazel-out/local_linux-opt/genfiles/tensorflow/contrib/session_bundle/example/half_plus_two'): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.8.0 locally<br>\nTraceback (most recent call last):<br>\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/contrib/session_bundle/example/export_half_plus_two.py\", line 32, in <br>\nimport tensorflow as tf<br>\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/<strong>init</strong>.py\", line 23, in <br>\nfrom tensorflow.python import *<br>\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/python/<strong>init</strong>.py\", line 52, in <br>\nfrom tensorflow.core.framework.graph_pb2 import *<br>\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/graph_pb2.py\", line 16, in <br>\nfrom tensorflow.core.framework import attr_value_pb2 as tensorflow_dot_core_dot_framework_dot_attr__value__pb2<br>\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/attr_value_pb2.py\", line 16, in <br>\nfrom tensorflow.core.framework import tensor_pb2 as tensorflow_dot_core_dot_framework_dot_tensor__pb2<br>\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/tensor_pb2.py\", line 16, in <br>\nfrom tensorflow.core.framework import tensor_shape_pb2 as tensorflow_dot_core_dot_framework_dot_tensor__shape__pb2<br>\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/tensor_shape_pb2.py\", line 22, in <br>\nserialized_pb=_b('\\n,tensorflow/core/framework/tensor_shape.proto\\x12\\ntensorflow\"z\\n\\x10TensorShapeProto\\x12-\\n\\x03\\x64im\\x18\\x02 \\x03(\\x0b\\x32 .tensorflow.TensorShapeProto.Dim\\x12\\x14\\n\\x0cunknown_rank\\x18\\x03 \\x01(\\x08\\x1a!\\n\\x03\\x44im\\x12\\x0c\\n\\x04size\\x18\\x01 \\x01(\\x03\\x12\\x0c\\n\\x04name\\x18\\x02 \\x01(\\tB/\\n\\x18org.tensorflow.frameworkB\\x11TensorShapeProtosP\\x01\\x62\\x06proto3')<br>\nTypeError: <strong>init</strong>() got an unexpected keyword argument 'syntax'<br>\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build<br>\nINFO: Elapsed time: 16.639s, Critical Path: 8.93s</p>", "body_text": "Hi,\nInstalling TensorFlow from source fails on my system. There seems to be some Python-related error when building 'half_plus_two'.\nSee (hopefully) all relevant output below.\nEnvironment info\nOperating System:\n\nlsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 16.04 LTS\nRelease:    16.04\nCodename:   xenial\nuname -a\nLinux the-beast 4.4.0-24-generic #43-Ubuntu SMP Wed Jun 8 19:27:37 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n\nls -l /usr/local/cuda-8.0/lib64/libcud*\n-rw-r--r-- 1 root root   560184 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 root root   394472 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n\nIf installed from sources, provide the commit hash:\nbf83048\nSteps to reproduce\n\nClone TensorFlow and follow instructions to build from source:\nhttps://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#installation-for-linux\nExecute command\nbazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nwhich ultimately fails.\n\nLogs or other output that would be helpful\nThis should be the relevant part:\nmichael@the-beast:~/devel/tensorflow$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/protobuf/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/protobuf/WORKSPACE (@main) does not match the name given in the repository's definition (@protobuf); this will cause a build error in future versions.\nWARNING: /home/michael/devel/tensorflow/util/python/BUILD:11:16: in includes attribute of cc_library rule //util/python:python_headers: 'python_include' resolves to 'util/python/python_include' not in 'third_party'. This will be an error in the future.\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/highwayhash/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/highwayhash/WORKSPACE (@main) does not match the name given in the repository's definition (@highwayhash); this will cause a build error in future versions.\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/re2/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/re2/WORKSPACE (@main) does not match the name given in the repository's definition (@re2); this will cause a build error in future versions.\nINFO: Found 1 target...\nERROR: /home/michael/devel/tensorflow/tensorflow/contrib/session_bundle/example/BUILD:38:1: Executing genrule //tensorflow/contrib/session_bundle/example:half_plus_two failed: bash failed: error executing command\n(cd /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow && \nexec env - \nPATH=/home/michael/torch/install/bin:/home/michael/devel/jdk1.8.0_77/bin:/home/michael/devel/bazel/output:/usr/local/cuda-8.0/bin:/home/michael/devel/gocode/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \n/bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; rm -rf /tmp/half_plus_two; /usr/bin/python bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two; cp -r /tmp/half_plus_two/* bazel-out/local_linux-opt/genfiles/tensorflow/contrib/session_bundle/example/half_plus_two'): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.8.0 locally\nTraceback (most recent call last):\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/contrib/session_bundle/example/export_half_plus_two.py\", line 32, in \nimport tensorflow as tf\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/init.py\", line 23, in \nfrom tensorflow.python import *\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/python/init.py\", line 52, in \nfrom tensorflow.core.framework.graph_pb2 import *\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/graph_pb2.py\", line 16, in \nfrom tensorflow.core.framework import attr_value_pb2 as tensorflow_dot_core_dot_framework_dot_attr__value__pb2\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/attr_value_pb2.py\", line 16, in \nfrom tensorflow.core.framework import tensor_pb2 as tensorflow_dot_core_dot_framework_dot_tensor__pb2\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/tensor_pb2.py\", line 16, in \nfrom tensorflow.core.framework import tensor_shape_pb2 as tensorflow_dot_core_dot_framework_dot_tensor__shape__pb2\nFile \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/tensor_shape_pb2.py\", line 22, in \nserialized_pb=_b('\\n,tensorflow/core/framework/tensor_shape.proto\\x12\\ntensorflow\"z\\n\\x10TensorShapeProto\\x12-\\n\\x03\\x64im\\x18\\x02 \\x03(\\x0b\\x32 .tensorflow.TensorShapeProto.Dim\\x12\\x14\\n\\x0cunknown_rank\\x18\\x03 \\x01(\\x08\\x1a!\\n\\x03\\x44im\\x12\\x0c\\n\\x04size\\x18\\x01 \\x01(\\x03\\x12\\x0c\\n\\x04name\\x18\\x02 \\x01(\\tB/\\n\\x18org.tensorflow.frameworkB\\x11TensorShapeProtosP\\x01\\x62\\x06proto3')\nTypeError: init() got an unexpected keyword argument 'syntax'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 16.639s, Critical Path: 8.93s", "body": "Hi,\nInstalling TensorFlow from source fails on my system. There seems to be some Python-related error when building 'half_plus_two'.\nSee (hopefully) all relevant output below.\n### Environment info\n\nOperating System:\n\n> lsb_release -a\n> No LSB modules are available.\n> Distributor ID: Ubuntu\n> Description:    Ubuntu 16.04 LTS\n> Release:    16.04\n> Codename:   xenial\n> \n> uname -a\n> Linux the-beast 4.4.0-24-generic #43-Ubuntu SMP Wed Jun 8 19:27:37 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n> ls -l /usr/local/cuda-8.0/lib64/libcud*\n> -rw-r--r-- 1 root root   560184 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudadevrt.a\n> lrwxrwxrwx 1 root root       16 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\n> lrwxrwxrwx 1 root root       19 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n> -rwxr-xr-x 1 root root   394472 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n> -rw-r--r-- 1 root root   737516 Jun 12 16:53 /usr/local/cuda-8.0/lib64/libcudart_static.a\n> -rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so\n> -rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n> -rwxr-xr-x 1 root root 78065952 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5\n> -rw-r--r-- 1 root root 68709594 Jun 12 16:54 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n\nIf installed from sources, provide the commit hash:\nbf83048d5f28b7fa0f39df799bd01a8fc581f5cf\n### Steps to reproduce\n1. Clone TensorFlow and follow instructions to build from source:\n   https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#installation-for-linux\n2. Execute command\n   bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n   which ultimately fails.\n### Logs or other output that would be helpful\n\nThis should be the relevant part:\n\nmichael@the-beast:~/devel/tensorflow$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/protobuf/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/protobuf/WORKSPACE (@__main__) does not match the name given in the repository's definition (@protobuf); this will cause a build error in future versions.\nWARNING: /home/michael/devel/tensorflow/util/python/BUILD:11:16: in includes attribute of cc_library rule //util/python:python_headers: 'python_include' resolves to 'util/python/python_include' not in 'third_party'. This will be an error in the future.\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/highwayhash/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/highwayhash/WORKSPACE (@__main__) does not match the name given in the repository's definition (@highwayhash); this will cause a build error in future versions.\nWARNING: /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/re2/WORKSPACE:1: Workspace name in /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/external/re2/WORKSPACE (@__main__) does not match the name given in the repository's definition (@re2); this will cause a build error in future versions.\nINFO: Found 1 target...\nERROR: /home/michael/devel/tensorflow/tensorflow/contrib/session_bundle/example/BUILD:38:1: Executing genrule //tensorflow/contrib/session_bundle/example:half_plus_two failed: bash failed: error executing command \n  (cd /home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow && \\\n  exec env - \\\n    PATH=/home/michael/torch/install/bin:/home/michael/devel/jdk1.8.0_77/bin:/home/michael/devel/bazel/output:/usr/local/cuda-8.0/bin:/home/michael/devel/gocode/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/home/michael/torch/install/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; rm -rf /tmp/half_plus_two; /usr/bin/python bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two; cp -r /tmp/half_plus_two/\\* bazel-out/local_linux-opt/genfiles/tensorflow/contrib/session_bundle/example/half_plus_two'): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.8.0 locally\nTraceback (most recent call last):\n  File \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/contrib/session_bundle/example/export_half_plus_two.py\", line 32, in <module>\n    import tensorflow as tf\n  File \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/__init__.py\", line 23, in <module>\n    from tensorflow.python import *\n  File \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 52, in <module>\n    from tensorflow.core.framework.graph_pb2 import *\n  File \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/graph_pb2.py\", line 16, in <module>\n    from tensorflow.core.framework import attr_value_pb2 as tensorflow_dot_core_dot_framework_dot_attr__value__pb2\n  File \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/attr_value_pb2.py\", line 16, in <module>\n    from tensorflow.core.framework import tensor_pb2 as tensorflow_dot_core_dot_framework_dot_tensor__pb2\n  File \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/tensor_pb2.py\", line 16, in <module>\n    from tensorflow.core.framework import tensor_shape_pb2 as tensorflow_dot_core_dot_framework_dot_tensor__shape__pb2\n  File \"/home/michael/.cache/bazel/_bazel_michael/09c785d214849e49e64c5959b4c31911/execroot/tensorflow/bazel-out/host/bin/tensorflow/contrib/session_bundle/example/export_half_plus_two.runfiles/org_tensorflow/tensorflow/core/framework/tensor_shape_pb2.py\", line 22, in <module>\n    serialized_pb=_b('\\n,tensorflow/core/framework/tensor_shape.proto\\x12\\ntensorflow\\\"z\\n\\x10TensorShapeProto\\x12-\\n\\x03\\x64im\\x18\\x02 \\x03(\\x0b\\x32 .tensorflow.TensorShapeProto.Dim\\x12\\x14\\n\\x0cunknown_rank\\x18\\x03 \\x01(\\x08\\x1a!\\n\\x03\\x44im\\x12\\x0c\\n\\x04size\\x18\\x01 \\x01(\\x03\\x12\\x0c\\n\\x04name\\x18\\x02 \\x01(\\tB/\\n\\x18org.tensorflow.frameworkB\\x11TensorShapeProtosP\\x01\\x62\\x06proto3')\nTypeError: __init__() got an unexpected keyword argument 'syntax'\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 16.639s, Critical Path: 8.93s\n"}
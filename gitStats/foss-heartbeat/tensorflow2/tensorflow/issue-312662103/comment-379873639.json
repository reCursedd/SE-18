{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/379873639", "html_url": "https://github.com/tensorflow/tensorflow/issues/18355#issuecomment-379873639", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18355", "id": 379873639, "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTg3MzYzOQ==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-09T19:53:25Z", "updated_at": "2018-04-09T19:53:25Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1072079\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jsimsa\">@jsimsa</a> I think this regression crept in at <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/82fa1e1ae5b2f8af642979fafb1cab455db1882f/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/82fa1e1ae5b2f8af642979fafb1cab455db1882f\"><tt>82fa1e1</tt></a>, which added SparseTensor support, because the new logic assumes that all return values from a map function are either <code>tf.Tensor</code> or <code>tf.SparseTensor</code>, whereas the old logic had a conversion pass. Perhaps some variant of <code>convert_to_tensor_or_sparse_tensor()</code> is needed here?</p>", "body_text": "@jsimsa I think this regression crept in at 82fa1e1, which added SparseTensor support, because the new logic assumes that all return values from a map function are either tf.Tensor or tf.SparseTensor, whereas the old logic had a conversion pass. Perhaps some variant of convert_to_tensor_or_sparse_tensor() is needed here?", "body": "@jsimsa I think this regression crept in at 82fa1e1ae5b2f8af642979fafb1cab455db1882f, which added SparseTensor support, because the new logic assumes that all return values from a map function are either `tf.Tensor` or `tf.SparseTensor`, whereas the old logic had a conversion pass. Perhaps some variant of `convert_to_tensor_or_sparse_tensor()` is needed here?"}
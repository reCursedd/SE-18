{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19150", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19150/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19150/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19150/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19150", "id": 321246236, "node_id": "MDU6SXNzdWUzMjEyNDYyMzY=", "number": 19150, "title": "error while converting *.pb file to *.tflite with toco", "user": {"login": "avielas", "id": 13708541, "node_id": "MDQ6VXNlcjEzNzA4NTQx", "avatar_url": "https://avatars3.githubusercontent.com/u/13708541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avielas", "html_url": "https://github.com/avielas", "followers_url": "https://api.github.com/users/avielas/followers", "following_url": "https://api.github.com/users/avielas/following{/other_user}", "gists_url": "https://api.github.com/users/avielas/gists{/gist_id}", "starred_url": "https://api.github.com/users/avielas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avielas/subscriptions", "organizations_url": "https://api.github.com/users/avielas/orgs", "repos_url": "https://api.github.com/users/avielas/repos", "events_url": "https://api.github.com/users/avielas/events{/privacy}", "received_events_url": "https://api.github.com/users/avielas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "robieta", "id": 13089297, "node_id": "MDQ6VXNlcjEzMDg5Mjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/13089297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robieta", "html_url": "https://github.com/robieta", "followers_url": "https://api.github.com/users/robieta/followers", "following_url": "https://api.github.com/users/robieta/following{/other_user}", "gists_url": "https://api.github.com/users/robieta/gists{/gist_id}", "starred_url": "https://api.github.com/users/robieta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robieta/subscriptions", "organizations_url": "https://api.github.com/users/robieta/orgs", "repos_url": "https://api.github.com/users/robieta/repos", "events_url": "https://api.github.com/users/robieta/events{/privacy}", "received_events_url": "https://api.github.com/users/robieta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "robieta", "id": 13089297, "node_id": "MDQ6VXNlcjEzMDg5Mjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/13089297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robieta", "html_url": "https://github.com/robieta", "followers_url": "https://api.github.com/users/robieta/followers", "following_url": "https://api.github.com/users/robieta/following{/other_user}", "gists_url": "https://api.github.com/users/robieta/gists{/gist_id}", "starred_url": "https://api.github.com/users/robieta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robieta/subscriptions", "organizations_url": "https://api.github.com/users/robieta/orgs", "repos_url": "https://api.github.com/users/robieta/repos", "events_url": "https://api.github.com/users/robieta/events{/privacy}", "received_events_url": "https://api.github.com/users/robieta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-05-08T15:55:42Z", "updated_at": "2018-07-15T16:00:13Z", "closed_at": "2018-05-10T18:00:50Z", "author_association": "NONE", "body_html": "<p>I used the following example to create tensorflow model: <a href=\"http://cv-tricks.com/tensorflow-tutorial/training-convolutional-neural-network-for-image-classification/\" rel=\"nofollow\">http://cv-tricks.com/tensorflow-tutorial/training-convolutional-neural-network-for-image-classification/</a><br>\nYou can download the code from here: <a href=\"https://github.com/sankit1/cv-tricks.com/tree/master/Tensorflow-tutorials/tutorial-2-image-classifier\">https://github.com/sankit1/cv-tricks.com/tree/master/Tensorflow-tutorials/tutorial-2-image-classifier</a><br>\nAlso I used \"2. Freezing the graph\" section from <a href=\"http://cv-tricks.com/how-to/freeze-tensorflow-models/\" rel=\"nofollow\">http://cv-tricks.com/how-to/freeze-tensorflow-models/</a><br>\nto create a *.pb file of my model.<br>\nI have Ubuntu 16.04 and tensorflow cpu version 1.8.0 from binary. python version is 3.5.2 and bazel 0.13.0.<br>\nI'm tried to convert *.pb file with toco command line tool, as describe on \"Convert a TensorFlow SavedModel to TensorFlow Lite\" at <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#savedmodel\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#savedmodel</a><br>\nand got he following error:<br>\n(venv) user@user-desktop:~/PycharmProjects/tensorflow_tutorial/tensorflow$ <strong>bazel run -c opt   tensorflow/contrib/lite/toco:toco --   --savedmodel_directory=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier   --output_file=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier/dogs-cats-model.tflite</strong><br>\nWARNING: /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/external/protobuf_archive/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions<br>\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).<br>\nINFO: Found 1 target...<br>\nWARNING: failed to create one or more convenience symlinks for prefix 'bazel-':<br>\ncannot create symbolic link bazel-out -&gt; /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-out (File exists)<br>\ncannot create symbolic link bazel-out -&gt; /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-out (File exists)<br>\ncannot create symbolic link bazel-tensorflow -&gt; /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-tensorflow (File exists)<br>\ncannot create symbolic link bazel-bin -&gt; /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-bin (File exists)<br>\ncannot create symbolic link bazel-testlogs -&gt; /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/testlogs:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-testlogs (File exists)<br>\ncannot create symbolic link bazel-genfiles -&gt; /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/genfiles:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-genfiles (File exists)<br>\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:<br>\n/home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/lite/toco/toco<br>\nINFO: Elapsed time: 0.271s, Critical Path: 0.00s<br>\nINFO: 0 processes.<br>\nINFO: Build completed successfully, 1 total action<br>\nINFO: Running command line: /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/lite/toco/toco '--savedmodel_directory=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier' '--output_file=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier/dogs-cats-model.tflite'<br>\n2018-05-07 01:33:13.776954: F tensorflow/contrib/lite/toco/toco_saved_model.cc:34] <strong>Check failed: tensorflow::MaybeSavedModelDirectory(model_path) Model is not saved in the supported SavedModel format.</strong></p>\n<p>The function which throw this error is MaybeSavedModelDirectory at<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/toco_saved_model.cc\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/toco_saved_model.cc</a><br>\nI took a look at the implementation of it on<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/cc/saved_model/loader.cc\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/cc/saved_model/loader.cc</a><br>\nActually it looking for *.pb or *.pbtxt file on the model directory. I got this file at this location so why I get this error?</p>", "body_text": "I used the following example to create tensorflow model: http://cv-tricks.com/tensorflow-tutorial/training-convolutional-neural-network-for-image-classification/\nYou can download the code from here: https://github.com/sankit1/cv-tricks.com/tree/master/Tensorflow-tutorials/tutorial-2-image-classifier\nAlso I used \"2. Freezing the graph\" section from http://cv-tricks.com/how-to/freeze-tensorflow-models/\nto create a *.pb file of my model.\nI have Ubuntu 16.04 and tensorflow cpu version 1.8.0 from binary. python version is 3.5.2 and bazel 0.13.0.\nI'm tried to convert *.pb file with toco command line tool, as describe on \"Convert a TensorFlow SavedModel to TensorFlow Lite\" at https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#savedmodel\nand got he following error:\n(venv) user@user-desktop:~/PycharmProjects/tensorflow_tutorial/tensorflow$ bazel run -c opt   tensorflow/contrib/lite/toco:toco --   --savedmodel_directory=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier   --output_file=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier/dogs-cats-model.tflite\nWARNING: /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/external/protobuf_archive/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\nINFO: Found 1 target...\nWARNING: failed to create one or more convenience symlinks for prefix 'bazel-':\ncannot create symbolic link bazel-out -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-out (File exists)\ncannot create symbolic link bazel-out -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-out (File exists)\ncannot create symbolic link bazel-tensorflow -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-tensorflow (File exists)\ncannot create symbolic link bazel-bin -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-bin (File exists)\ncannot create symbolic link bazel-testlogs -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/testlogs:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-testlogs (File exists)\ncannot create symbolic link bazel-genfiles -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/genfiles:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-genfiles (File exists)\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\n/home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/lite/toco/toco\nINFO: Elapsed time: 0.271s, Critical Path: 0.00s\nINFO: 0 processes.\nINFO: Build completed successfully, 1 total action\nINFO: Running command line: /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/lite/toco/toco '--savedmodel_directory=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier' '--output_file=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier/dogs-cats-model.tflite'\n2018-05-07 01:33:13.776954: F tensorflow/contrib/lite/toco/toco_saved_model.cc:34] Check failed: tensorflow::MaybeSavedModelDirectory(model_path) Model is not saved in the supported SavedModel format.\nThe function which throw this error is MaybeSavedModelDirectory at\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/toco_saved_model.cc\nI took a look at the implementation of it on\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/cc/saved_model/loader.cc\nActually it looking for *.pb or *.pbtxt file on the model directory. I got this file at this location so why I get this error?", "body": "I used the following example to create tensorflow model: http://cv-tricks.com/tensorflow-tutorial/training-convolutional-neural-network-for-image-classification/\r\nYou can download the code from here: https://github.com/sankit1/cv-tricks.com/tree/master/Tensorflow-tutorials/tutorial-2-image-classifier\r\nAlso I used \"2. Freezing the graph\" section from http://cv-tricks.com/how-to/freeze-tensorflow-models/\r\nto create a *.pb file of my model.\r\nI have Ubuntu 16.04 and tensorflow cpu version 1.8.0 from binary. python version is 3.5.2 and bazel 0.13.0. \r\nI'm tried to convert *.pb file with toco command line tool, as describe on \"Convert a TensorFlow SavedModel to TensorFlow Lite\" at https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/g3doc/cmdline_examples.md#savedmodel\r\nand got he following error: \r\n(venv) user@user-desktop:~/PycharmProjects/tensorflow_tutorial/tensorflow$ **bazel run -c opt   tensorflow/contrib/lite/toco:toco --   --savedmodel_directory=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier   --output_file=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier/dogs-cats-model.tflite**\r\nWARNING: /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/external/protobuf_archive/WORKSPACE:1: Workspace name in /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/external/protobuf_archive/WORKSPACE (@com_google_protobuf) does not match the name given in the repository's definition (@protobuf_archive); this will cause a build error in future versions\r\nINFO: Analysed target //tensorflow/contrib/lite/toco:toco (0 packages loaded).\r\nINFO: Found 1 target...\r\nWARNING: failed to create one or more convenience symlinks for prefix 'bazel-':\r\n  cannot create symbolic link bazel-out -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-out (File exists)\r\n  cannot create symbolic link bazel-out -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-out (File exists)\r\n  cannot create symbolic link bazel-tensorflow -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-tensorflow (File exists)\r\n  cannot create symbolic link bazel-bin -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-bin (File exists)\r\n  cannot create symbolic link bazel-testlogs -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/testlogs:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-testlogs (File exists)\r\ncannot create symbolic link bazel-genfiles -> /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/genfiles:  /home/user/PycharmProjects/tensorflow_tutorial/tensorflow/bazel-genfiles (File exists)\r\nTarget //tensorflow/contrib/lite/toco:toco up-to-date:\r\n/home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/lite/toco/toco\r\nINFO: Elapsed time: 0.271s, Critical Path: 0.00s\r\nINFO: 0 processes.\r\nINFO: Build completed successfully, 1 total action\r\nINFO: Running command line: /home/user/.cache/bazel/_bazel_user/e21a56d90e65395c94952f8aa3d0c4bc/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/lite/toco/toco '--savedmodel_directory=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier' '--output_file=/home/user/PycharmProjects/tensorflow_tutorial/tutorial-2-image-classifier/dogs-cats-model.tflite'\r\n2018-05-07 01:33:13.776954: F tensorflow/contrib/lite/toco/toco_saved_model.cc:34] **Check failed: tensorflow::MaybeSavedModelDirectory(model_path) Model is not saved in the supported SavedModel format.**\r\n\r\nThe function which throw this error is MaybeSavedModelDirectory at\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/toco/toco_saved_model.cc\r\nI took a look at the implementation of it on \r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/cc/saved_model/loader.cc\r\nActually it looking for *.pb or *.pbtxt file on the model directory. I got this file at this location so why I get this error?\r\n"}
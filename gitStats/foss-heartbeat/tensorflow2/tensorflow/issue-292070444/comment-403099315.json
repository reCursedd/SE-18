{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/403099315", "html_url": "https://github.com/tensorflow/tensorflow/pull/16476#issuecomment-403099315", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16476", "id": 403099315, "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzA5OTMxNQ==", "user": {"login": "mohamedadaly", "id": 3480703, "node_id": "MDQ6VXNlcjM0ODA3MDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3480703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohamedadaly", "html_url": "https://github.com/mohamedadaly", "followers_url": "https://api.github.com/users/mohamedadaly/followers", "following_url": "https://api.github.com/users/mohamedadaly/following{/other_user}", "gists_url": "https://api.github.com/users/mohamedadaly/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohamedadaly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohamedadaly/subscriptions", "organizations_url": "https://api.github.com/users/mohamedadaly/orgs", "repos_url": "https://api.github.com/users/mohamedadaly/repos", "events_url": "https://api.github.com/users/mohamedadaly/events{/privacy}", "received_events_url": "https://api.github.com/users/mohamedadaly/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-06T17:31:57Z", "updated_at": "2018-07-06T17:31:57Z", "author_association": "CONTRIBUTOR", "body_html": "<p>You first need to strip out a bunch of the unsupported operations from the .pb file. You could use something like this <a href=\"https://gist.github.com/mohamedadaly/2e6f0f5daff41919de1d37d8858f63a0\">script</a>.</p>\n<p>Then use toco, with something like this:</p>\n<div class=\"highlight highlight-source-shell\"><pre>bazel-bin/tensorflow/contrib/lite/toco/toco \\\n    --input_file=/home/maly/tensorflow-lite/ssd_mobilenet_coco_2017-11-17_lite.pb \\\n    --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\n    --output_file=/home/maly/tensorflow-lite/ssd_mobilenet_coco_2017-11-17_lite.lite \\\n    --inference_type=FLOAT   --input_data_type=FLOAT --input_array=image_tensor   \\\n    --output_arrays=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Result/NumDetections,Result/Boxes,Result/Scores,Result/Classes<span class=\"pl-pds\">\"</span></span> \\\n    --input_shape=1,300,300,3   --allow_custom_ops\n</pre></div>", "body_text": "You first need to strip out a bunch of the unsupported operations from the .pb file. You could use something like this script.\nThen use toco, with something like this:\nbazel-bin/tensorflow/contrib/lite/toco/toco \\\n    --input_file=/home/maly/tensorflow-lite/ssd_mobilenet_coco_2017-11-17_lite.pb \\\n    --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\n    --output_file=/home/maly/tensorflow-lite/ssd_mobilenet_coco_2017-11-17_lite.lite \\\n    --inference_type=FLOAT   --input_data_type=FLOAT --input_array=image_tensor   \\\n    --output_arrays=\"Result/NumDetections,Result/Boxes,Result/Scores,Result/Classes\" \\\n    --input_shape=1,300,300,3   --allow_custom_ops", "body": "You first need to strip out a bunch of the unsupported operations from the .pb file. You could use something like this [script](https://gist.github.com/mohamedadaly/2e6f0f5daff41919de1d37d8858f63a0).\r\n\r\nThen use toco, with something like this:\r\n```bash\r\nbazel-bin/tensorflow/contrib/lite/toco/toco \\\r\n    --input_file=/home/maly/tensorflow-lite/ssd_mobilenet_coco_2017-11-17_lite.pb \\\r\n    --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE \\\r\n    --output_file=/home/maly/tensorflow-lite/ssd_mobilenet_coco_2017-11-17_lite.lite \\\r\n    --inference_type=FLOAT   --input_data_type=FLOAT --input_array=image_tensor   \\\r\n    --output_arrays=\"Result/NumDetections,Result/Boxes,Result/Scores,Result/Classes\" \\\r\n    --input_shape=1,300,300,3   --allow_custom_ops\r\n\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3543", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3543/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3543/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3543/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3543", "id": 168012445, "node_id": "MDU6SXNzdWUxNjgwMTI0NDU=", "number": 3543, "title": "boolean_mask failed in iOS: Running model failed:Invalid argument: No OpKernel was registered to support Op 'Gather' with these attrs", "user": {"login": "yjmade", "id": 1754190, "node_id": "MDQ6VXNlcjE3NTQxOTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1754190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yjmade", "html_url": "https://github.com/yjmade", "followers_url": "https://api.github.com/users/yjmade/followers", "following_url": "https://api.github.com/users/yjmade/following{/other_user}", "gists_url": "https://api.github.com/users/yjmade/gists{/gist_id}", "starred_url": "https://api.github.com/users/yjmade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yjmade/subscriptions", "organizations_url": "https://api.github.com/users/yjmade/orgs", "repos_url": "https://api.github.com/users/yjmade/repos", "events_url": "https://api.github.com/users/yjmade/events{/privacy}", "received_events_url": "https://api.github.com/users/yjmade/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-07-28T04:38:58Z", "updated_at": "2017-01-23T23:11:07Z", "closed_at": "2017-01-23T23:11:07Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>Environment info</h3>\n<p>Operating System:<br>\nBuilding on Mac OS X<br>\nRunning on iOS 9.2.1</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>)<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/71f6bb336e5e11d6da2cedac6ba1c992ad9992bd/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/71f6bb336e5e11d6da2cedac6ba1c992ad9992bd\"><tt>71f6bb3</tt></a></li>\n<li>The output of <code>bazel version</code></li>\n</ol>\n<pre><code>Build target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Jul 12 11:11:47 2016 (1468321907)\nBuild timestamp: 1468321907\nBuild timestamp as int: 1468321907\n</code></pre>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>I compile tf for iOS with the makefile</li>\n<li>I frozen a model with last step as  a boolean_mask (that prozen pb file runs perfectly with TF 0.9.0 python api )</li>\n<li>I run it in iOS, log report</li>\n</ol>\n<pre><code>Running model failed:Invalid argument: No OpKernel was registered to support Op 'Gather' with these attrs\n     [[Node: classes_num_filtered/Gather = Gather[Tindices=DT_INT64, Tparams=DT_INT64, validate_indices=true](classes_num_filtered/Reshape, classes_num_filtered/Squeeze)]]\n</code></pre>\n<p>so it happens with the gather op inside the boolean_mask, when I removed this operation, it runs without problem in iOS.<br>\nIs that means gather op is not currently support in iOS?<br>\nDo I have a work around for now? I need to filter the data with porbs &gt; threhold.</p>\n<div class=\"highlight highlight-source-python\"><pre>        mask <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.classes_prob <span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">self</span>.threshold\n        <span class=\"pl-c1\">self</span>.classes_prob_filtered <span class=\"pl-k\">=</span> tf.boolean_mask(<span class=\"pl-c1\">self</span>.classes_prob, mask, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>probs_filtered<span class=\"pl-pds\">\"</span></span>) \n        <span class=\"pl-c1\">self</span>.classes_arg_filtered <span class=\"pl-k\">=</span> tf.boolean_mask(<span class=\"pl-c1\">self</span>.classes_arg, mask, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>classes_num_filtered<span class=\"pl-pds\">\"</span></span>) \n        <span class=\"pl-c1\">self</span>.boxes_filtered <span class=\"pl-k\">=</span> tf.boolean_mask(<span class=\"pl-c1\">self</span>.boxes, mask, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>boxes_filtered<span class=\"pl-pds\">\"</span></span>) </pre></div>\n<p>I checked the  tf_cc_files.txt, tensorflow/core/kernels/gather_op.cc do exist.</p>", "body_text": "Environment info\nOperating System:\nBuilding on Mac OS X\nRunning on iOS 9.2.1\n\nThe commit hash (git rev-parse HEAD)\n71f6bb3\nThe output of bazel version\n\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Jul 12 11:11:47 2016 (1468321907)\nBuild timestamp: 1468321907\nBuild timestamp as int: 1468321907\n\nSteps to reproduce\n\nI compile tf for iOS with the makefile\nI frozen a model with last step as  a boolean_mask (that prozen pb file runs perfectly with TF 0.9.0 python api )\nI run it in iOS, log report\n\nRunning model failed:Invalid argument: No OpKernel was registered to support Op 'Gather' with these attrs\n     [[Node: classes_num_filtered/Gather = Gather[Tindices=DT_INT64, Tparams=DT_INT64, validate_indices=true](classes_num_filtered/Reshape, classes_num_filtered/Squeeze)]]\n\nso it happens with the gather op inside the boolean_mask, when I removed this operation, it runs without problem in iOS.\nIs that means gather op is not currently support in iOS?\nDo I have a work around for now? I need to filter the data with porbs > threhold.\n        mask = self.classes_prob > self.threshold\n        self.classes_prob_filtered = tf.boolean_mask(self.classes_prob, mask, name=\"probs_filtered\") \n        self.classes_arg_filtered = tf.boolean_mask(self.classes_arg, mask, name=\"classes_num_filtered\") \n        self.boxes_filtered = tf.boolean_mask(self.boxes, mask, name=\"boxes_filtered\") \nI checked the  tf_cc_files.txt, tensorflow/core/kernels/gather_op.cc do exist.", "body": "### Environment info\n\nOperating System:\nBuilding on Mac OS X\nRunning on iOS 9.2.1\n1. The commit hash (`git rev-parse HEAD`)\n   71f6bb336e5e11d6da2cedac6ba1c992ad9992bd\n2. The output of `bazel version`\n\n```\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Tue Jul 12 11:11:47 2016 (1468321907)\nBuild timestamp: 1468321907\nBuild timestamp as int: 1468321907\n```\n### Steps to reproduce\n1. I compile tf for iOS with the makefile\n2. I frozen a model with last step as  a boolean_mask (that prozen pb file runs perfectly with TF 0.9.0 python api )\n3. I run it in iOS, log report \n\n```\nRunning model failed:Invalid argument: No OpKernel was registered to support Op 'Gather' with these attrs\n     [[Node: classes_num_filtered/Gather = Gather[Tindices=DT_INT64, Tparams=DT_INT64, validate_indices=true](classes_num_filtered/Reshape, classes_num_filtered/Squeeze)]]\n```\n\nso it happens with the gather op inside the boolean_mask, when I removed this operation, it runs without problem in iOS.\nIs that means gather op is not currently support in iOS? \nDo I have a work around for now? I need to filter the data with porbs > threhold.\n\n``` python\n        mask = self.classes_prob > self.threshold\n        self.classes_prob_filtered = tf.boolean_mask(self.classes_prob, mask, name=\"probs_filtered\") \n        self.classes_arg_filtered = tf.boolean_mask(self.classes_arg, mask, name=\"classes_num_filtered\") \n        self.boxes_filtered = tf.boolean_mask(self.boxes, mask, name=\"boxes_filtered\") \n```\n\nI checked the  tf_cc_files.txt, tensorflow/core/kernels/gather_op.cc do exist.\n"}
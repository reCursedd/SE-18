{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20008", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20008/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20008/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20008/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20008", "id": 332321164, "node_id": "MDU6SXNzdWUzMzIzMjExNjQ=", "number": 20008, "title": "//tensorflow/python:cost_analyzer_test test fails on ppc64le", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-06-14T09:26:30Z", "updated_at": "2018-07-13T07:04:51Z", "closed_at": "2018-07-13T07:04:50Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:N/A</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 16.04 (ppc64le)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nInstalled from source</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\nTF master</li>\n<li><strong>Python version</strong>:<br>\nPython 2.7.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\nbazel-0.11.1</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nNA</li>\n<li><strong>GPU model and memory</strong>:<br>\nNA</li>\n<li><strong>Exact command to reproduce</strong>:<br>\n<code>bazel test -c opt --jobs 1 -k --cache_test_results=no --test_output=errors  //tensorflow/python:cost_analyzer_test</code></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>FAIL: testBasicMemory (<strong>main</strong>.CostAnalysisTest)<br>\nMake sure arguments can be passed correctly.<br>\nAssertionError: False is not true</p>\n<p>I have started looking into this.<br>\nAny comments/suggestions appreciated.Thanks!</p>\n<h3>Source code / logs</h3>\n<pre><code>INFO: Analysed target //tensorflow/python:cost_analyzer_test (0 packages loaded).\nINFO: Found 1 test target...\nFAIL: //tensorflow/python:cost_analyzer_test (see /root/.cache/bazel/_bazel_root/78afe71156c58ea89dc510bdb03ba2b0/execroot/org_tensorflow/bazel-out/ppc-opt/testlogs/tensorflow/python/cost_analyzer_test/test.log)\nINFO: From Testing //tensorflow/python:cost_analyzer_test:\n==================== Test output for //tensorflow/python:cost_analyzer_test:\n2018-06-14 09:10:09.134980: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count &gt;= 8): 0\n2018-06-14 09:10:09.135207: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.136755: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.138122: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.147635: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.148782: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n.2018-06-14 09:10:09.157410: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count &gt;= 8): 0\n2018-06-14 09:10:09.157507: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\nF2018-06-14 09:10:09.352496: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count &gt;= 8): 0\n2018-06-14 09:10:09.352692: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.359070: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.360080: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.566104: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.569427: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n\nTotal time measured in ns (serialized):                           5000\nTotal time measured in ns (actual):                             281002\nTotal time analytical in ns (upper bound):        -9223372036854775000\nTotal time analytical in ns (lower bound):                           0\nOverall efficiency (analytical upper/actual):             -3.28232e+13\nOverall efficiency (analytical lower/actual):                        0\n\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\n                               AddN,              1,                5000,          1e+02%,          1e+02%,-9223372036854775000,                   0,       -1.8e+17%,       -1.8e+17%,              0%,\n\nBelow is the per-node report summary:\n                                 Op,  Measured time (ns),   Compute time (ns),    Memory time (ns),     Compute eff,      Memory eff,    Inputs\n                               AddN,                5000,-9223372036854775000,                   0,       -1.8e+17%,           -inf%,    []\n\n\nPeak usage for device /job:localhost/replica:0/task:0/device:CPU:0: 12 bytes\n  a:0 uses 4 bytes\n  b:0 uses 4 bytes\n  c:0 uses 4 bytes\n\n\nTotal time measured in ns (serialized):                        8460000\nTotal time measured in ns (actual):                            5328500\nTotal time analytical in ns (upper bound):        -9223372036854519848\nTotal time analytical in ns (lower bound):        -9223372036854655544\nOverall efficiency (analytical upper/actual):             -1.73095e+12\nOverall efficiency (analytical lower/actual):             -1.73095e+12\n\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\n                             MatMul,              3,             2160000,             26%,             26%,-9223372036854676232, 9223372036854773384,       -4.3e+14%,        4.3e+14%,            4.7%,\n                          ApplyAdam,              4,             1422000,             17%,             42%,              128232,              125000,              9%,           0.23%,            8.8%,\n               Conv2DBackpropFilter,              1,             1040000,             12%,             55%, 9223372036854775000, 9223372036854775000,        8.9e+14%,        8.9e+14%,              0%,\n                           ReluGrad,              1,              958000,             11%,             66%,-9223372036854767616, 9223372036854775000,       -9.6e+14%,        9.6e+14%,           0.94%,\n                             Conv2D,              1,              604000,            7.1%,             73%,-9223372036854773616, 9223372036854775000,       -1.5e+15%,        1.5e+15%,            0.5%,\n                         VariableV2,             14,              537000,            6.3%,             79%,                   0,                   0,              0%,              0%,              0%,\n                                Sum,              4,              513000,            6.1%,             86%,               12232,                9000,            2.4%,           0.63%,            1.8%,\n                              Const,             10,              465000,            5.5%,             91%,                   0,                   0,              0%,              0%,              0%,\n                                Mul,              6,              415000,            4.9%,             96%,               -4848,               -4848,           -1.2%,           -1.2%,              0%,\n                                Add,              2,              205000,            2.4%,             98%,                4384,               -1616,            2.1%,          -0.79%,            2.9%,\n                               Relu,              1,               35000,           0.41%,             99%,-9223372036854770616, 9223372036854775000,       -2.6e+16%, .2018-06-14 09:10:09.738459: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count &gt;= 8): 0\n2018-06-14 09:10:09.738574: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.739464: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.740389: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.747818: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.749965: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n..\n======================================================================\nFAIL: testBasicMemory (__main__.CostAnalysisTest)\nMake sure arguments can be passed correctly.\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/root/.cache/bazel/_bazel_root/78afe71156c58ea89dc510bdb03ba2b0/execroot/org_tensorflow/bazel-out/ppc-opt/bin/tensorflow/python/cost_analyzer_test.runfiles/org_tensorflow/tensorflow/python/grappler/cost_analyzer_test.py\", line 152, in testBasicMemory\n    in report)\nAssertionError: False is not true\n\n----------------------------------------------------------------------\nRan 5 tests in 0.639s\n\nFAILED (failures=1)\n       2.6e+16%,             17%,\n                         Reciprocal,              1,               25000,            0.3%,             99%, 9223372036854775000, 9223372036854775000,        3.7e+16%,        3.7e+16%,              0%,\n                           Identity,              6,               24000,           0.28%,             99%,                   0,                   0,              0%,              0%,              0%,\n                            Reshape,              6,               22000,           0.26%,          1e+02%,                   0,                   0,              0%,              0%,              0%,\n                             Assign,              2,               10000,           0.12%,          1e+02%,                1616,                   0,             16%,             16%,              0%,\n                            Softmax,              1,                9000,           0.11%,          1e+02%,-9223372036854775000,                   0,         -1e+17%,         -1e+17%,              0%,\n                               Tile,              1,                7000,          0.083%,          1e+02%,-9223372036854775000,                   0,       -1.3e+17%,       -1.3e+17%,              0%,\n                                Sub,              1,                5000,          0.059%,          1e+02%, 9223372036854775000, 9223372036854775000,        1.8e+17%,        1.8e+17%,              0%,\n                               NoOp,              2,                4000,          0.047%,          1e+02%,                   0,                   0,              0%,              0%,              0%,\n\n\n\nTotal time measured in ns (serialized):                           5000\nTotal time measured in ns (actual):                             149014\nTotal time analytical in ns (upper bound):        -9223372036854775000\nTotal time analytical in ns (lower bound):                           0\nOverall efficiency (analytical upper/actual):              -6.1896e+13\nOverall efficiency (analytical lower/actual):                        0\n\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\n                               AddN,              1,                5000,          1e+02%,          1e+02%,-9223372036854775000,                   0,       -1.8e+17%,       -1.8e+17%,              0%,\n\nBelow is the full per-node report:\nop_performance {\n  op {\n    op: \"AddN\"\n    attr {\n      key: \"N\"\n      value {\n        i: 2\n      }\n    }\n    attr {\n      key: \"T\"\n      value {\n        type: DT_INT32\n      }\n    }\n    inputs {\n      shape {\n        unknown_rank: true\n      }\n      value {\n        dtype: DT_INT32\n        tensor_shape {\n        }\n        int_val: 20\n      }\n    }\n    inputs {\n      shape {\n        unknown_rank: true\n      }\n    }\n    device {\n      type: \"CPU\"\n      model: \"0\"\n      num_cores: 4\n      environment {\n        key: \"cpu_instruction_set\"\n        value: \"VSX\"\n      }\n      environment {\n        key: \"eigen\"\n        value: \"3.3.90\"\n      }\n      l1_cache_size: 16384\n      l2_cache_size: 524288\n      l3_cache_size: 524288\n      memory_size: 993132544\n    }\n  }\n  compute_cost: 5000\n  compute_efficiency: -1844674407370955\n  node: \"d\"\n  compute_time: -9223372036854775000\n  memory_efficiency: -inf\n  op_memory {\n    output_memory: 4\n    persistent_memory: 4\n  }\n}\n\n================================================================================\nTarget //tensorflow/python:cost_analyzer_test up-to-date:\n  bazel-bin/tensorflow/python/cost_analyzer_test\nINFO: Elapsed time: 1.835s, Critical Path: 1.36s\nINFO: Build completed, 1 test FAILED, 2 total actions\n//tensorflow/python:cost_analyzer_test                                   FAILED in 1.4s\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):N/A\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04 (ppc64le)\nTensorFlow installed from (source or binary):\nInstalled from source\nTensorFlow version (use command below):\nTF master\nPython version:\nPython 2.7.5\nBazel version (if compiling from source):\nbazel-0.11.1\nCUDA/cuDNN version:\nNA\nGPU model and memory:\nNA\nExact command to reproduce:\nbazel test -c opt --jobs 1 -k --cache_test_results=no --test_output=errors  //tensorflow/python:cost_analyzer_test\n\nDescribe the problem\nFAIL: testBasicMemory (main.CostAnalysisTest)\nMake sure arguments can be passed correctly.\nAssertionError: False is not true\nI have started looking into this.\nAny comments/suggestions appreciated.Thanks!\nSource code / logs\nINFO: Analysed target //tensorflow/python:cost_analyzer_test (0 packages loaded).\nINFO: Found 1 test target...\nFAIL: //tensorflow/python:cost_analyzer_test (see /root/.cache/bazel/_bazel_root/78afe71156c58ea89dc510bdb03ba2b0/execroot/org_tensorflow/bazel-out/ppc-opt/testlogs/tensorflow/python/cost_analyzer_test/test.log)\nINFO: From Testing //tensorflow/python:cost_analyzer_test:\n==================== Test output for //tensorflow/python:cost_analyzer_test:\n2018-06-14 09:10:09.134980: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 0\n2018-06-14 09:10:09.135207: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.136755: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.138122: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.147635: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.148782: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n.2018-06-14 09:10:09.157410: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 0\n2018-06-14 09:10:09.157507: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\nF2018-06-14 09:10:09.352496: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 0\n2018-06-14 09:10:09.352692: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.359070: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.360080: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.566104: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.569427: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n\nTotal time measured in ns (serialized):                           5000\nTotal time measured in ns (actual):                             281002\nTotal time analytical in ns (upper bound):        -9223372036854775000\nTotal time analytical in ns (lower bound):                           0\nOverall efficiency (analytical upper/actual):             -3.28232e+13\nOverall efficiency (analytical lower/actual):                        0\n\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\n                               AddN,              1,                5000,          1e+02%,          1e+02%,-9223372036854775000,                   0,       -1.8e+17%,       -1.8e+17%,              0%,\n\nBelow is the per-node report summary:\n                                 Op,  Measured time (ns),   Compute time (ns),    Memory time (ns),     Compute eff,      Memory eff,    Inputs\n                               AddN,                5000,-9223372036854775000,                   0,       -1.8e+17%,           -inf%,    []\n\n\nPeak usage for device /job:localhost/replica:0/task:0/device:CPU:0: 12 bytes\n  a:0 uses 4 bytes\n  b:0 uses 4 bytes\n  c:0 uses 4 bytes\n\n\nTotal time measured in ns (serialized):                        8460000\nTotal time measured in ns (actual):                            5328500\nTotal time analytical in ns (upper bound):        -9223372036854519848\nTotal time analytical in ns (lower bound):        -9223372036854655544\nOverall efficiency (analytical upper/actual):             -1.73095e+12\nOverall efficiency (analytical lower/actual):             -1.73095e+12\n\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\n                             MatMul,              3,             2160000,             26%,             26%,-9223372036854676232, 9223372036854773384,       -4.3e+14%,        4.3e+14%,            4.7%,\n                          ApplyAdam,              4,             1422000,             17%,             42%,              128232,              125000,              9%,           0.23%,            8.8%,\n               Conv2DBackpropFilter,              1,             1040000,             12%,             55%, 9223372036854775000, 9223372036854775000,        8.9e+14%,        8.9e+14%,              0%,\n                           ReluGrad,              1,              958000,             11%,             66%,-9223372036854767616, 9223372036854775000,       -9.6e+14%,        9.6e+14%,           0.94%,\n                             Conv2D,              1,              604000,            7.1%,             73%,-9223372036854773616, 9223372036854775000,       -1.5e+15%,        1.5e+15%,            0.5%,\n                         VariableV2,             14,              537000,            6.3%,             79%,                   0,                   0,              0%,              0%,              0%,\n                                Sum,              4,              513000,            6.1%,             86%,               12232,                9000,            2.4%,           0.63%,            1.8%,\n                              Const,             10,              465000,            5.5%,             91%,                   0,                   0,              0%,              0%,              0%,\n                                Mul,              6,              415000,            4.9%,             96%,               -4848,               -4848,           -1.2%,           -1.2%,              0%,\n                                Add,              2,              205000,            2.4%,             98%,                4384,               -1616,            2.1%,          -0.79%,            2.9%,\n                               Relu,              1,               35000,           0.41%,             99%,-9223372036854770616, 9223372036854775000,       -2.6e+16%, .2018-06-14 09:10:09.738459: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 0\n2018-06-14 09:10:09.738574: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.739464: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.740389: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n2018-06-14 09:10:09.747818: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\n2018-06-14 09:10:09.749965: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\n..\n======================================================================\nFAIL: testBasicMemory (__main__.CostAnalysisTest)\nMake sure arguments can be passed correctly.\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/root/.cache/bazel/_bazel_root/78afe71156c58ea89dc510bdb03ba2b0/execroot/org_tensorflow/bazel-out/ppc-opt/bin/tensorflow/python/cost_analyzer_test.runfiles/org_tensorflow/tensorflow/python/grappler/cost_analyzer_test.py\", line 152, in testBasicMemory\n    in report)\nAssertionError: False is not true\n\n----------------------------------------------------------------------\nRan 5 tests in 0.639s\n\nFAILED (failures=1)\n       2.6e+16%,             17%,\n                         Reciprocal,              1,               25000,            0.3%,             99%, 9223372036854775000, 9223372036854775000,        3.7e+16%,        3.7e+16%,              0%,\n                           Identity,              6,               24000,           0.28%,             99%,                   0,                   0,              0%,              0%,              0%,\n                            Reshape,              6,               22000,           0.26%,          1e+02%,                   0,                   0,              0%,              0%,              0%,\n                             Assign,              2,               10000,           0.12%,          1e+02%,                1616,                   0,             16%,             16%,              0%,\n                            Softmax,              1,                9000,           0.11%,          1e+02%,-9223372036854775000,                   0,         -1e+17%,         -1e+17%,              0%,\n                               Tile,              1,                7000,          0.083%,          1e+02%,-9223372036854775000,                   0,       -1.3e+17%,       -1.3e+17%,              0%,\n                                Sub,              1,                5000,          0.059%,          1e+02%, 9223372036854775000, 9223372036854775000,        1.8e+17%,        1.8e+17%,              0%,\n                               NoOp,              2,                4000,          0.047%,          1e+02%,                   0,                   0,              0%,              0%,              0%,\n\n\n\nTotal time measured in ns (serialized):                           5000\nTotal time measured in ns (actual):                             149014\nTotal time analytical in ns (upper bound):        -9223372036854775000\nTotal time analytical in ns (lower bound):                           0\nOverall efficiency (analytical upper/actual):              -6.1896e+13\nOverall efficiency (analytical lower/actual):                        0\n\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\n                               AddN,              1,                5000,          1e+02%,          1e+02%,-9223372036854775000,                   0,       -1.8e+17%,       -1.8e+17%,              0%,\n\nBelow is the full per-node report:\nop_performance {\n  op {\n    op: \"AddN\"\n    attr {\n      key: \"N\"\n      value {\n        i: 2\n      }\n    }\n    attr {\n      key: \"T\"\n      value {\n        type: DT_INT32\n      }\n    }\n    inputs {\n      shape {\n        unknown_rank: true\n      }\n      value {\n        dtype: DT_INT32\n        tensor_shape {\n        }\n        int_val: 20\n      }\n    }\n    inputs {\n      shape {\n        unknown_rank: true\n      }\n    }\n    device {\n      type: \"CPU\"\n      model: \"0\"\n      num_cores: 4\n      environment {\n        key: \"cpu_instruction_set\"\n        value: \"VSX\"\n      }\n      environment {\n        key: \"eigen\"\n        value: \"3.3.90\"\n      }\n      l1_cache_size: 16384\n      l2_cache_size: 524288\n      l3_cache_size: 524288\n      memory_size: 993132544\n    }\n  }\n  compute_cost: 5000\n  compute_efficiency: -1844674407370955\n  node: \"d\"\n  compute_time: -9223372036854775000\n  memory_efficiency: -inf\n  op_memory {\n    output_memory: 4\n    persistent_memory: 4\n  }\n}\n\n================================================================================\nTarget //tensorflow/python:cost_analyzer_test up-to-date:\n  bazel-bin/tensorflow/python/cost_analyzer_test\nINFO: Elapsed time: 1.835s, Critical Path: 1.36s\nINFO: Build completed, 1 test FAILED, 2 total actions\n//tensorflow/python:cost_analyzer_test                                   FAILED in 1.4s", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:N/A\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n      Ubuntu 16.04 (ppc64le)\r\n- **TensorFlow installed from (source or binary)**:\r\n      Installed from source\r\n- **TensorFlow version (use command below)**:\r\n      TF master\r\n- **Python version**: \r\n     Python 2.7.5\r\n- **Bazel version (if compiling from source)**:\r\n     bazel-0.11.1\r\n- **CUDA/cuDNN version**:\r\n     NA\r\n- **GPU model and memory**:\r\n      NA\r\n- **Exact command to reproduce**:\r\n `bazel test -c opt --jobs 1 -k --cache_test_results=no --test_output=errors  //tensorflow/python:cost_analyzer_test`\r\n\r\n### Describe the problem\r\nFAIL: testBasicMemory (__main__.CostAnalysisTest)\r\nMake sure arguments can be passed correctly.\r\nAssertionError: False is not true\r\n\r\nI have started looking into this. \r\nAny comments/suggestions appreciated.Thanks! \r\n### Source code / logs\r\n```\r\nINFO: Analysed target //tensorflow/python:cost_analyzer_test (0 packages loaded).\r\nINFO: Found 1 test target...\r\nFAIL: //tensorflow/python:cost_analyzer_test (see /root/.cache/bazel/_bazel_root/78afe71156c58ea89dc510bdb03ba2b0/execroot/org_tensorflow/bazel-out/ppc-opt/testlogs/tensorflow/python/cost_analyzer_test/test.log)\r\nINFO: From Testing //tensorflow/python:cost_analyzer_test:\r\n==================== Test output for //tensorflow/python:cost_analyzer_test:\r\n2018-06-14 09:10:09.134980: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 0\r\n2018-06-14 09:10:09.135207: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2018-06-14 09:10:09.136755: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\r\n2018-06-14 09:10:09.138122: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2018-06-14 09:10:09.147635: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\r\n2018-06-14 09:10:09.148782: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n.2018-06-14 09:10:09.157410: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 0\r\n2018-06-14 09:10:09.157507: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\nF2018-06-14 09:10:09.352496: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 0\r\n2018-06-14 09:10:09.352692: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2018-06-14 09:10:09.359070: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\r\n2018-06-14 09:10:09.360080: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2018-06-14 09:10:09.566104: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\r\n2018-06-14 09:10:09.569427: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n\r\nTotal time measured in ns (serialized):                           5000\r\nTotal time measured in ns (actual):                             281002\r\nTotal time analytical in ns (upper bound):        -9223372036854775000\r\nTotal time analytical in ns (lower bound):                           0\r\nOverall efficiency (analytical upper/actual):             -3.28232e+13\r\nOverall efficiency (analytical lower/actual):                        0\r\n\r\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\r\n                               AddN,              1,                5000,          1e+02%,          1e+02%,-9223372036854775000,                   0,       -1.8e+17%,       -1.8e+17%,              0%,\r\n\r\nBelow is the per-node report summary:\r\n                                 Op,  Measured time (ns),   Compute time (ns),    Memory time (ns),     Compute eff,      Memory eff,    Inputs\r\n                               AddN,                5000,-9223372036854775000,                   0,       -1.8e+17%,           -inf%,    []\r\n\r\n\r\nPeak usage for device /job:localhost/replica:0/task:0/device:CPU:0: 12 bytes\r\n  a:0 uses 4 bytes\r\n  b:0 uses 4 bytes\r\n  c:0 uses 4 bytes\r\n\r\n\r\nTotal time measured in ns (serialized):                        8460000\r\nTotal time measured in ns (actual):                            5328500\r\nTotal time analytical in ns (upper bound):        -9223372036854519848\r\nTotal time analytical in ns (lower bound):        -9223372036854655544\r\nOverall efficiency (analytical upper/actual):             -1.73095e+12\r\nOverall efficiency (analytical lower/actual):             -1.73095e+12\r\n\r\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\r\n                             MatMul,              3,             2160000,             26%,             26%,-9223372036854676232, 9223372036854773384,       -4.3e+14%,        4.3e+14%,            4.7%,\r\n                          ApplyAdam,              4,             1422000,             17%,             42%,              128232,              125000,              9%,           0.23%,            8.8%,\r\n               Conv2DBackpropFilter,              1,             1040000,             12%,             55%, 9223372036854775000, 9223372036854775000,        8.9e+14%,        8.9e+14%,              0%,\r\n                           ReluGrad,              1,              958000,             11%,             66%,-9223372036854767616, 9223372036854775000,       -9.6e+14%,        9.6e+14%,           0.94%,\r\n                             Conv2D,              1,              604000,            7.1%,             73%,-9223372036854773616, 9223372036854775000,       -1.5e+15%,        1.5e+15%,            0.5%,\r\n                         VariableV2,             14,              537000,            6.3%,             79%,                   0,                   0,              0%,              0%,              0%,\r\n                                Sum,              4,              513000,            6.1%,             86%,               12232,                9000,            2.4%,           0.63%,            1.8%,\r\n                              Const,             10,              465000,            5.5%,             91%,                   0,                   0,              0%,              0%,              0%,\r\n                                Mul,              6,              415000,            4.9%,             96%,               -4848,               -4848,           -1.2%,           -1.2%,              0%,\r\n                                Add,              2,              205000,            2.4%,             98%,                4384,               -1616,            2.1%,          -0.79%,            2.9%,\r\n                               Relu,              1,               35000,           0.41%,             99%,-9223372036854770616, 9223372036854775000,       -2.6e+16%, .2018-06-14 09:10:09.738459: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 0\r\n2018-06-14 09:10:09.738574: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2018-06-14 09:10:09.739464: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\r\n2018-06-14 09:10:09.740389: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2018-06-14 09:10:09.747818: I tensorflow/core/grappler/clusters/single_machine.cc:349] Cleaning up previous session\r\n2018-06-14 09:10:09.749965: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n..\r\n======================================================================\r\nFAIL: testBasicMemory (__main__.CostAnalysisTest)\r\nMake sure arguments can be passed correctly.\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/78afe71156c58ea89dc510bdb03ba2b0/execroot/org_tensorflow/bazel-out/ppc-opt/bin/tensorflow/python/cost_analyzer_test.runfiles/org_tensorflow/tensorflow/python/grappler/cost_analyzer_test.py\", line 152, in testBasicMemory\r\n    in report)\r\nAssertionError: False is not true\r\n\r\n----------------------------------------------------------------------\r\nRan 5 tests in 0.639s\r\n\r\nFAILED (failures=1)\r\n       2.6e+16%,             17%,\r\n                         Reciprocal,              1,               25000,            0.3%,             99%, 9223372036854775000, 9223372036854775000,        3.7e+16%,        3.7e+16%,              0%,\r\n                           Identity,              6,               24000,           0.28%,             99%,                   0,                   0,              0%,              0%,              0%,\r\n                            Reshape,              6,               22000,           0.26%,          1e+02%,                   0,                   0,              0%,              0%,              0%,\r\n                             Assign,              2,               10000,           0.12%,          1e+02%,                1616,                   0,             16%,             16%,              0%,\r\n                            Softmax,              1,                9000,           0.11%,          1e+02%,-9223372036854775000,                   0,         -1e+17%,         -1e+17%,              0%,\r\n                               Tile,              1,                7000,          0.083%,          1e+02%,-9223372036854775000,                   0,       -1.3e+17%,       -1.3e+17%,              0%,\r\n                                Sub,              1,                5000,          0.059%,          1e+02%, 9223372036854775000, 9223372036854775000,        1.8e+17%,        1.8e+17%,              0%,\r\n                               NoOp,              2,                4000,          0.047%,          1e+02%,                   0,                   0,              0%,              0%,              0%,\r\n\r\n\r\n\r\nTotal time measured in ns (serialized):                           5000\r\nTotal time measured in ns (actual):                             149014\r\nTotal time analytical in ns (upper bound):        -9223372036854775000\r\nTotal time analytical in ns (lower bound):                           0\r\nOverall efficiency (analytical upper/actual):              -6.1896e+13\r\nOverall efficiency (analytical lower/actual):                        0\r\n\r\n                                 Op,          Count,  Measured time (ns),    Time percent,     Acc percent,    Analytical upper,    Analytical lower,      Overall eff      Compute eff       Memory eff\r\n                               AddN,              1,                5000,          1e+02%,          1e+02%,-9223372036854775000,                   0,       -1.8e+17%,       -1.8e+17%,              0%,\r\n\r\nBelow is the full per-node report:\r\nop_performance {\r\n  op {\r\n    op: \"AddN\"\r\n    attr {\r\n      key: \"N\"\r\n      value {\r\n        i: 2\r\n      }\r\n    }\r\n    attr {\r\n      key: \"T\"\r\n      value {\r\n        type: DT_INT32\r\n      }\r\n    }\r\n    inputs {\r\n      shape {\r\n        unknown_rank: true\r\n      }\r\n      value {\r\n        dtype: DT_INT32\r\n        tensor_shape {\r\n        }\r\n        int_val: 20\r\n      }\r\n    }\r\n    inputs {\r\n      shape {\r\n        unknown_rank: true\r\n      }\r\n    }\r\n    device {\r\n      type: \"CPU\"\r\n      model: \"0\"\r\n      num_cores: 4\r\n      environment {\r\n        key: \"cpu_instruction_set\"\r\n        value: \"VSX\"\r\n      }\r\n      environment {\r\n        key: \"eigen\"\r\n        value: \"3.3.90\"\r\n      }\r\n      l1_cache_size: 16384\r\n      l2_cache_size: 524288\r\n      l3_cache_size: 524288\r\n      memory_size: 993132544\r\n    }\r\n  }\r\n  compute_cost: 5000\r\n  compute_efficiency: -1844674407370955\r\n  node: \"d\"\r\n  compute_time: -9223372036854775000\r\n  memory_efficiency: -inf\r\n  op_memory {\r\n    output_memory: 4\r\n    persistent_memory: 4\r\n  }\r\n}\r\n\r\n================================================================================\r\nTarget //tensorflow/python:cost_analyzer_test up-to-date:\r\n  bazel-bin/tensorflow/python/cost_analyzer_test\r\nINFO: Elapsed time: 1.835s, Critical Path: 1.36s\r\nINFO: Build completed, 1 test FAILED, 2 total actions\r\n//tensorflow/python:cost_analyzer_test                                   FAILED in 1.4s\r\n```\r\n"}
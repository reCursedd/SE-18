{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/343431422", "html_url": "https://github.com/tensorflow/tensorflow/issues/14257#issuecomment-343431422", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14257", "id": 343431422, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzQzMTQyMg==", "user": {"login": "sleighsoft", "id": 9438971, "node_id": "MDQ6VXNlcjk0Mzg5NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9438971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleighsoft", "html_url": "https://github.com/sleighsoft", "followers_url": "https://api.github.com/users/sleighsoft/followers", "following_url": "https://api.github.com/users/sleighsoft/following{/other_user}", "gists_url": "https://api.github.com/users/sleighsoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleighsoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleighsoft/subscriptions", "organizations_url": "https://api.github.com/users/sleighsoft/orgs", "repos_url": "https://api.github.com/users/sleighsoft/repos", "events_url": "https://api.github.com/users/sleighsoft/events{/privacy}", "received_events_url": "https://api.github.com/users/sleighsoft/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-10T10:06:16Z", "updated_at": "2017-11-10T10:06:16Z", "author_association": "CONTRIBUTOR", "body_html": "<ol>\n<li>\n<p>I can use the Dataset API with <code>GANEstimator</code> using a hook that runs the Dataset initializer.</p>\n</li>\n<li>\n<p>My description was not quite correct. I have generator output of shape <code>[time, batch_size, vocab_size]</code> and real data of shape <code>[time, batch_size]</code> as would be the case when using a sequence approach with e.g. <code>RNN</code>s. <code>GANEstimator</code> complains about mismatching shapes but I need them that way for my loss calcuation <code>tf.nn.sparse_softmax_cross_entropy_with_logits</code>. There is probably a way to convert the generator output to shape <code>[time, batch_size]</code> as well using softmax but I would rather use the inbuilt <code>softmax_cross_..</code> function then performing <code>softmax</code> beforehand just to overcome a \"shape mismatch\" error.</p>\n</li>\n</ol>", "body_text": "I can use the Dataset API with GANEstimator using a hook that runs the Dataset initializer.\n\n\nMy description was not quite correct. I have generator output of shape [time, batch_size, vocab_size] and real data of shape [time, batch_size] as would be the case when using a sequence approach with e.g. RNNs. GANEstimator complains about mismatching shapes but I need them that way for my loss calcuation tf.nn.sparse_softmax_cross_entropy_with_logits. There is probably a way to convert the generator output to shape [time, batch_size] as well using softmax but I would rather use the inbuilt softmax_cross_.. function then performing softmax beforehand just to overcome a \"shape mismatch\" error.", "body": "1. I can use the Dataset API with `GANEstimator` using a hook that runs the Dataset initializer.\r\n\r\n2. My description was not quite correct. I have generator output of shape `[time, batch_size, vocab_size]` and real data of shape `[time, batch_size]` as would be the case when using a sequence approach with e.g. `RNN`s. `GANEstimator` complains about mismatching shapes but I need them that way for my loss calcuation `tf.nn.sparse_softmax_cross_entropy_with_logits`. There is probably a way to convert the generator output to shape `[time, batch_size]` as well using softmax but I would rather use the inbuilt `softmax_cross_..` function then performing `softmax` beforehand just to overcome a \"shape mismatch\" error. "}
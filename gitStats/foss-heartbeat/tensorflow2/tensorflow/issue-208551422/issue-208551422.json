{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7634", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7634/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7634/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7634/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7634", "id": 208551422, "node_id": "MDU6SXNzdWUyMDg1NTE0MjI=", "number": 7634, "title": "Setting import_scope on import_meta_graph causes error for attached metagraph file", "user": {"login": "matteson", "id": 585221, "node_id": "MDQ6VXNlcjU4NTIyMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/585221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matteson", "html_url": "https://github.com/matteson", "followers_url": "https://api.github.com/users/matteson/followers", "following_url": "https://api.github.com/users/matteson/following{/other_user}", "gists_url": "https://api.github.com/users/matteson/gists{/gist_id}", "starred_url": "https://api.github.com/users/matteson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matteson/subscriptions", "organizations_url": "https://api.github.com/users/matteson/orgs", "repos_url": "https://api.github.com/users/matteson/repos", "events_url": "https://api.github.com/users/matteson/events{/privacy}", "received_events_url": "https://api.github.com/users/matteson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-02-17T20:48:04Z", "updated_at": "2018-02-08T01:36:48Z", "closed_at": "2018-02-08T01:36:31Z", "author_association": "NONE", "body_html": "<p>Using the attached meta file:</p>\n<pre><code>model_fn = './my-model.meta'\n\ngraph = tf.Graph()\nsess = tf.InteractiveSession(graph=graph)\n\nt_input = tf.placeholder(np.float32, name='images') # define the input tensor\nt_preprocessed = tf.expand_dims(t_input, 0)\n\nnew_saver = tf.train.import_meta_graph(model_fn, input_map={'images': t_input}, import_scope='import')\nnew_saver.restore(sess, './')\n</code></pre>\n<p>results in:</p>\n<pre><code>KeyError: \"The name 'gradients/discriminator/minibatch/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/RefEnter:0' refers to a Tensor which does not exist. The operation, 'gradients/discriminator/minibatch/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/RefEnter', does not exist in the graph.\"\n</code></pre>\n<p>I'm trying to remap the input so I can do image space optimization with a library that assumes the network input is (width, height, channels). Loading doesn't error if I load without the input_map and import_scope keyword arguments; however, this causes problems for the library I'm interacting with. Setting import_scope alone does cause an error.</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>Asked on Stack Overflow in case this isn't a bug: <a href=\"http://bit.ly/2lW7lRA\" rel=\"nofollow\">http://bit.ly/2lW7lRA</a></p>\n<h3>Environment info</h3>\n<p>Operating System:</p>\n<p>Mac</p>\n<ol>\n<li>\n<p>A link to the pip package you installed:<br>\n<a href=\"https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.0.0-py3-none-any.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.0.0-py3-none-any.whl</a></p>\n</li>\n<li>\n<p>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.<br>\n1.0.0</p>\n</li>\n</ol>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/784246/my-model.meta.zip\">my-model.meta.zip</a></p>", "body_text": "Using the attached meta file:\nmodel_fn = './my-model.meta'\n\ngraph = tf.Graph()\nsess = tf.InteractiveSession(graph=graph)\n\nt_input = tf.placeholder(np.float32, name='images') # define the input tensor\nt_preprocessed = tf.expand_dims(t_input, 0)\n\nnew_saver = tf.train.import_meta_graph(model_fn, input_map={'images': t_input}, import_scope='import')\nnew_saver.restore(sess, './')\n\nresults in:\nKeyError: \"The name 'gradients/discriminator/minibatch/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/RefEnter:0' refers to a Tensor which does not exist. The operation, 'gradients/discriminator/minibatch/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/RefEnter', does not exist in the graph.\"\n\nI'm trying to remap the input so I can do image space optimization with a library that assumes the network input is (width, height, channels). Loading doesn't error if I load without the input_map and import_scope keyword arguments; however, this causes problems for the library I'm interacting with. Setting import_scope alone does cause an error.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nAsked on Stack Overflow in case this isn't a bug: http://bit.ly/2lW7lRA\nEnvironment info\nOperating System:\nMac\n\n\nA link to the pip package you installed:\nhttps://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.0.0-py3-none-any.whl\n\n\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\n1.0.0\n\n\nmy-model.meta.zip", "body": "Using the attached meta file:\r\n```\r\nmodel_fn = './my-model.meta'\r\n\r\ngraph = tf.Graph()\r\nsess = tf.InteractiveSession(graph=graph)\r\n\r\nt_input = tf.placeholder(np.float32, name='images') # define the input tensor\r\nt_preprocessed = tf.expand_dims(t_input, 0)\r\n\r\nnew_saver = tf.train.import_meta_graph(model_fn, input_map={'images': t_input}, import_scope='import')\r\nnew_saver.restore(sess, './')\r\n```\r\nresults in:\r\n```\r\nKeyError: \"The name 'gradients/discriminator/minibatch/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/RefEnter:0' refers to a Tensor which does not exist. The operation, 'gradients/discriminator/minibatch/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/RefEnter', does not exist in the graph.\"\r\n```\r\nI'm trying to remap the input so I can do image space optimization with a library that assumes the network input is (width, height, channels). Loading doesn't error if I load without the input_map and import_scope keyword arguments; however, this causes problems for the library I'm interacting with. Setting import_scope alone does cause an error.\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\nAsked on Stack Overflow in case this isn't a bug: http://bit.ly/2lW7lRA\r\n\r\n### Environment info\r\nOperating System:\r\n\r\nMac\r\n\r\n1. A link to the pip package you installed:\r\nhttps://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.0.0-py3-none-any.whl\r\n\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\r\n1.0.0\r\n\r\n[my-model.meta.zip](https://github.com/tensorflow/tensorflow/files/784246/my-model.meta.zip)\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/311589032", "html_url": "https://github.com/tensorflow/tensorflow/pull/9551#issuecomment-311589032", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9551", "id": 311589032, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTU4OTAzMg==", "user": {"login": "zhuhyc", "id": 1414676, "node_id": "MDQ6VXNlcjE0MTQ2NzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1414676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhuhyc", "html_url": "https://github.com/zhuhyc", "followers_url": "https://api.github.com/users/zhuhyc/followers", "following_url": "https://api.github.com/users/zhuhyc/following{/other_user}", "gists_url": "https://api.github.com/users/zhuhyc/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhuhyc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhuhyc/subscriptions", "organizations_url": "https://api.github.com/users/zhuhyc/orgs", "repos_url": "https://api.github.com/users/zhuhyc/repos", "events_url": "https://api.github.com/users/zhuhyc/events{/privacy}", "received_events_url": "https://api.github.com/users/zhuhyc/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-28T08:12:20Z", "updated_at": "2017-06-28T08:12:20Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16481751\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/alisidd\">@alisidd</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=463737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vrv\">@vrv</a><br>\nI add supporting GPU kernels base your code, when I execute a test,it runs on CPU normally, but it occurs an error  on GPU</p>\n<pre><code> python tensorflow/tensorflow/examples/tutorials/mnist/mnist_softmax_dc_asgd.py\n</code></pre>\n<p>the error is:</p>\n<pre><code>  **_2017-06-28 10:58:29.296340: E tensorflow/core/common_runtime/executor.cc:641] Executor failed to create kernel. Invalid argument: AttrValue must not have reference type value of float_ref\n for attr 'tensor_type'\n; NodeDef: w/DelayCompensatedGradientDescent/_23 = _HostRecv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_103_w/DelayCompensatedGradientDescent\", tensor_type=DT_FLOAT_REF, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](^w/DelayCompensatedGradientDescent/_22, ^DelayCompensatedGradientDescent/learning_rate, ^gradients/MatMul_grad/tuple/control_dependency_1, ^DelayCompensatedGradientDescent/lambda); Op&lt;name=_HostRecv; signature= -&gt; tensor:tensor_type; attr=tensor_type:type; attr=tensor_name:string; attr=send_device:string; attr=send_device_incarnation:int; attr=recv_device:string; attr=client_terminated:bool,default=false; is_stateful=true&gt;\n [[Node: w/DelayCompensatedGradientDescent/_23 = _HostRecv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_103_w/DelayCompensatedGradientDescent\", tensor_type=DT_FLOAT_REF, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](^w/DelayCompensatedGradientDescent/_22, ^DelayCompensatedGradientDescent/learning_rate, ^gradients/MatMul_grad/tuple/control_dependency_1, ^DelayCompensatedGradientDescent/lambda)]]_**\n</code></pre>\n<p>the test code is here :<br>\n<a href=\"https://github.com/zhuhyc/tensorflow/blob/dc-asgd/tensorflow/examples/tutorials/mnist/mnist_softmax_dc_asgd.py\">https://github.com/zhuhyc/tensorflow/blob/dc-asgd/tensorflow/examples/tutorials/mnist/mnist_softmax_dc_asgd.py</a></p>\n<p>the patch is here:<br>\n<a href=\"https://github.com/zhuhyc/tensorflow/blob/dc-asgd/dc-asgd.patch\">https://github.com/zhuhyc/tensorflow/blob/dc-asgd/dc-asgd.patch</a><br>\ncan you give me some suggestions to reslove this error?</p>", "body_text": "@alisidd @vrv\nI add supporting GPU kernels base your code, when I execute a test,it runs on CPU normally, but it occurs an error  on GPU\n python tensorflow/tensorflow/examples/tutorials/mnist/mnist_softmax_dc_asgd.py\n\nthe error is:\n  **_2017-06-28 10:58:29.296340: E tensorflow/core/common_runtime/executor.cc:641] Executor failed to create kernel. Invalid argument: AttrValue must not have reference type value of float_ref\n for attr 'tensor_type'\n; NodeDef: w/DelayCompensatedGradientDescent/_23 = _HostRecv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_103_w/DelayCompensatedGradientDescent\", tensor_type=DT_FLOAT_REF, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](^w/DelayCompensatedGradientDescent/_22, ^DelayCompensatedGradientDescent/learning_rate, ^gradients/MatMul_grad/tuple/control_dependency_1, ^DelayCompensatedGradientDescent/lambda); Op<name=_HostRecv; signature= -> tensor:tensor_type; attr=tensor_type:type; attr=tensor_name:string; attr=send_device:string; attr=send_device_incarnation:int; attr=recv_device:string; attr=client_terminated:bool,default=false; is_stateful=true>\n [[Node: w/DelayCompensatedGradientDescent/_23 = _HostRecv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_103_w/DelayCompensatedGradientDescent\", tensor_type=DT_FLOAT_REF, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](^w/DelayCompensatedGradientDescent/_22, ^DelayCompensatedGradientDescent/learning_rate, ^gradients/MatMul_grad/tuple/control_dependency_1, ^DelayCompensatedGradientDescent/lambda)]]_**\n\nthe test code is here :\nhttps://github.com/zhuhyc/tensorflow/blob/dc-asgd/tensorflow/examples/tutorials/mnist/mnist_softmax_dc_asgd.py\nthe patch is here:\nhttps://github.com/zhuhyc/tensorflow/blob/dc-asgd/dc-asgd.patch\ncan you give me some suggestions to reslove this error?", "body": "@alisidd @vrv \r\nI add supporting GPU kernels base your code, when I execute a test,it runs on CPU normally, but it occurs an error  on GPU\r\n\r\n     python tensorflow/tensorflow/examples/tutorials/mnist/mnist_softmax_dc_asgd.py\r\n\r\nthe error is:\r\n\r\n      **_2017-06-28 10:58:29.296340: E tensorflow/core/common_runtime/executor.cc:641] Executor failed to create kernel. Invalid argument: AttrValue must not have reference type value of float_ref\r\n\t for attr 'tensor_type'\r\n\t; NodeDef: w/DelayCompensatedGradientDescent/_23 = _HostRecv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_103_w/DelayCompensatedGradientDescent\", tensor_type=DT_FLOAT_REF, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](^w/DelayCompensatedGradientDescent/_22, ^DelayCompensatedGradientDescent/learning_rate, ^gradients/MatMul_grad/tuple/control_dependency_1, ^DelayCompensatedGradientDescent/lambda); Op<name=_HostRecv; signature= -> tensor:tensor_type; attr=tensor_type:type; attr=tensor_name:string; attr=send_device:string; attr=send_device_incarnation:int; attr=recv_device:string; attr=client_terminated:bool,default=false; is_stateful=true>\r\n\t [[Node: w/DelayCompensatedGradientDescent/_23 = _HostRecv[_start_time=0, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_103_w/DelayCompensatedGradientDescent\", tensor_type=DT_FLOAT_REF, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](^w/DelayCompensatedGradientDescent/_22, ^DelayCompensatedGradientDescent/learning_rate, ^gradients/MatMul_grad/tuple/control_dependency_1, ^DelayCompensatedGradientDescent/lambda)]]_**\r\n\r\n\r\nthe test code is here : \r\n     https://github.com/zhuhyc/tensorflow/blob/dc-asgd/tensorflow/examples/tutorials/mnist/mnist_softmax_dc_asgd.py\r\n\r\nthe patch is here: \r\n     https://github.com/zhuhyc/tensorflow/blob/dc-asgd/dc-asgd.patch\r\ncan you give me some suggestions to reslove this error?\r\n"}
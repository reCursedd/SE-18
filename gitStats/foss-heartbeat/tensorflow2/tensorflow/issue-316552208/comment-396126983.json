{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/396126983", "html_url": "https://github.com/tensorflow/tensorflow/issues/18769#issuecomment-396126983", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18769", "id": 396126983, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjEyNjk4Mw==", "user": {"login": "madaoLic", "id": 39993127, "node_id": "MDQ6VXNlcjM5OTkzMTI3", "avatar_url": "https://avatars0.githubusercontent.com/u/39993127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madaoLic", "html_url": "https://github.com/madaoLic", "followers_url": "https://api.github.com/users/madaoLic/followers", "following_url": "https://api.github.com/users/madaoLic/following{/other_user}", "gists_url": "https://api.github.com/users/madaoLic/gists{/gist_id}", "starred_url": "https://api.github.com/users/madaoLic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madaoLic/subscriptions", "organizations_url": "https://api.github.com/users/madaoLic/orgs", "repos_url": "https://api.github.com/users/madaoLic/repos", "events_url": "https://api.github.com/users/madaoLic/events{/privacy}", "received_events_url": "https://api.github.com/users/madaoLic/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-11T05:34:43Z", "updated_at": "2018-06-11T05:34:43Z", "author_association": "NONE", "body_html": "<p>I think the root cause may be:<br>\nin <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.7/tensorflow/core/platform/hadoop/hadoop_file_system.cc\">https://github.com/tensorflow/tensorflow/blob/r1.7/tensorflow/core/platform/hadoop/hadoop_file_system.cc</a><br>\nline 213:</p>\n<p><code>     tSize r = hdfs_-&gt;hdfsPread(fs_, file_, static_cast&lt;tOffset&gt;(offset), dst, static_cast&lt;tSize&gt;(n));</code></p>\n<p>the last param static_cast(n) means the number of bytes required. ie., the tensor's size.<br>\nin <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.7/third_party/hadoop/hdfs.h\">https://github.com/tensorflow/tensorflow/blob/r1.7/third_party/hadoop/hdfs.h</a><br>\nline 75,</p>\n<p>typedef int32_t tSize;    /// size of data for read/write io ops</p>\n<p>tSize is int32, but tensor's size is int64, when the tensor is big enough, overflow occurs.</p>\n<p>My solution is to use partitioned variables for large tensor, then problem solved.</p>", "body_text": "I think the root cause may be:\nin https://github.com/tensorflow/tensorflow/blob/r1.7/tensorflow/core/platform/hadoop/hadoop_file_system.cc\nline 213:\n     tSize r = hdfs_->hdfsPread(fs_, file_, static_cast<tOffset>(offset), dst, static_cast<tSize>(n));\nthe last param static_cast(n) means the number of bytes required. ie., the tensor's size.\nin https://github.com/tensorflow/tensorflow/blob/r1.7/third_party/hadoop/hdfs.h\nline 75,\ntypedef int32_t tSize;    /// size of data for read/write io ops\ntSize is int32, but tensor's size is int64, when the tensor is big enough, overflow occurs.\nMy solution is to use partitioned variables for large tensor, then problem solved.", "body": "I think the root cause may be:\r\nin https://github.com/tensorflow/tensorflow/blob/r1.7/tensorflow/core/platform/hadoop/hadoop_file_system.cc\r\nline 213:\r\n\r\n`      tSize r = hdfs_->hdfsPread(fs_, file_, static_cast<tOffset>(offset), dst,\r\n                                 static_cast<tSize>(n));\r\n`\r\n\r\nthe last param static_cast<tSize>(n) means the number of bytes required. ie., the tensor's size.\r\nin https://github.com/tensorflow/tensorflow/blob/r1.7/third_party/hadoop/hdfs.h\r\nline 75,\r\n\r\ntypedef int32_t tSize;    /// size of data for read/write io ops\r\n\r\ntSize is int32, but tensor's size is int64, when the tensor is big enough, overflow occurs. \r\n\r\nMy solution is to use partitioned variables for large tensor, then problem solved.\r\n"}
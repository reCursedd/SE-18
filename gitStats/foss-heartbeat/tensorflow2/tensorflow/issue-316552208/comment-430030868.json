{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/430030868", "html_url": "https://github.com/tensorflow/tensorflow/issues/18769#issuecomment-430030868", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18769", "id": 430030868, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDAzMDg2OA==", "user": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-15T22:05:30Z", "updated_at": "2018-10-15T22:05:30Z", "author_association": "MEMBER", "body_html": "<p>We can put &gt;2GB in checkpoints now. <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/b8c86c3bbd8271ed968087f24e7fb704103bc733#diff-f4340b63dcfb03e060905682f7471faa/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/b8c86c3bbd8271ed968087f24e7fb704103bc733#diff-f4340b63dcfb03e060905682f7471faa\"><tt>b8c86c3</tt>#diff-f4340b63dcfb03e060905682f7471faa</a> fixes an int32 size issue for string dtypes. I don't see a similar issue for Tensors, and this error doesn't look like it's a length/checksum issue. From \"OP_REQUIRES failed at save_restore_v2_ops.cc:184\" and reading the exceptions in the function it's calling, it looks vaguely like this could be complaining about a dtype mismatch? But that could just be the first thing that doesn't match if the whole file is corrupted for some reason.</p>\n<p>Can someone distill their issue into a snippet I can run, e.g. with fill()? I ran the following and it seems to work:</p>\n<pre><code>import tensorflow as tf\nfrom tensorflow.python.ops import io_ops\n\ndef main(_):\n  tf.enable_eager_execution()\n  large = tf.fill([10] * 9 + [5], value=tf.constant(1., dtype=tf.float32))\n  path = '/some/network/path'\n  io_ops.save_v2([path], [\"a\"], [\"\"], [large])\n  restored = io_ops.restore_v2(path, [\"a\"], [\"\"], [tf.float32])\n  print(tf.reduce_sum(restored))\n\nif __name__ == '__main__':\n  tf.app.run()\n\n</code></pre>\n<p>Prints:</p>\n<p><code>tf.Tensor(5e+09, shape=(), dtype=float32)</code></p>", "body_text": "We can put >2GB in checkpoints now. b8c86c3#diff-f4340b63dcfb03e060905682f7471faa fixes an int32 size issue for string dtypes. I don't see a similar issue for Tensors, and this error doesn't look like it's a length/checksum issue. From \"OP_REQUIRES failed at save_restore_v2_ops.cc:184\" and reading the exceptions in the function it's calling, it looks vaguely like this could be complaining about a dtype mismatch? But that could just be the first thing that doesn't match if the whole file is corrupted for some reason.\nCan someone distill their issue into a snippet I can run, e.g. with fill()? I ran the following and it seems to work:\nimport tensorflow as tf\nfrom tensorflow.python.ops import io_ops\n\ndef main(_):\n  tf.enable_eager_execution()\n  large = tf.fill([10] * 9 + [5], value=tf.constant(1., dtype=tf.float32))\n  path = '/some/network/path'\n  io_ops.save_v2([path], [\"a\"], [\"\"], [large])\n  restored = io_ops.restore_v2(path, [\"a\"], [\"\"], [tf.float32])\n  print(tf.reduce_sum(restored))\n\nif __name__ == '__main__':\n  tf.app.run()\n\n\nPrints:\ntf.Tensor(5e+09, shape=(), dtype=float32)", "body": "We can put >2GB in checkpoints now. https://github.com/tensorflow/tensorflow/commit/b8c86c3bbd8271ed968087f24e7fb704103bc733#diff-f4340b63dcfb03e060905682f7471faa fixes an int32 size issue for string dtypes. I don't see a similar issue for Tensors, and this error doesn't look like it's a length/checksum issue. From \"OP_REQUIRES failed at save_restore_v2_ops.cc:184\" and reading the exceptions in the function it's calling, it looks vaguely like this could be complaining about a dtype mismatch? But that could just be the first thing that doesn't match if the whole file is corrupted for some reason.\r\n\r\nCan someone distill their issue into a snippet I can run, e.g. with fill()? I ran the following and it seems to work:\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.python.ops import io_ops\r\n\r\ndef main(_):\r\n  tf.enable_eager_execution()\r\n  large = tf.fill([10] * 9 + [5], value=tf.constant(1., dtype=tf.float32))\r\n  path = '/some/network/path'\r\n  io_ops.save_v2([path], [\"a\"], [\"\"], [large])\r\n  restored = io_ops.restore_v2(path, [\"a\"], [\"\"], [tf.float32])\r\n  print(tf.reduce_sum(restored))\r\n\r\nif __name__ == '__main__':\r\n  tf.app.run()\r\n\r\n```\r\n\r\nPrints:\r\n\r\n`tf.Tensor(5e+09, shape=(), dtype=float32)`"}
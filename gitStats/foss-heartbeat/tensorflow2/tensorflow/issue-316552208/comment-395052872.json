{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/395052872", "html_url": "https://github.com/tensorflow/tensorflow/issues/18769#issuecomment-395052872", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18769", "id": 395052872, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTA1Mjg3Mg==", "user": {"login": "madaoLic", "id": 39993127, "node_id": "MDQ6VXNlcjM5OTkzMTI3", "avatar_url": "https://avatars0.githubusercontent.com/u/39993127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madaoLic", "html_url": "https://github.com/madaoLic", "followers_url": "https://api.github.com/users/madaoLic/followers", "following_url": "https://api.github.com/users/madaoLic/following{/other_user}", "gists_url": "https://api.github.com/users/madaoLic/gists{/gist_id}", "starred_url": "https://api.github.com/users/madaoLic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madaoLic/subscriptions", "organizations_url": "https://api.github.com/users/madaoLic/orgs", "repos_url": "https://api.github.com/users/madaoLic/repos", "events_url": "https://api.github.com/users/madaoLic/events{/privacy}", "received_events_url": "https://api.github.com/users/madaoLic/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-06T12:36:16Z", "updated_at": "2018-06-06T12:36:16Z", "author_association": "NONE", "body_html": "<p>I am using tensorflow-gpu 1.7.0, and meet exactly the same problem when restoring model in distributed tensorflow environment.</p>\n<p>when the model file is larger than 3GB, the error below occurs:<br>\nInvalidArgumentError (see above for traceback): hdfs://xxxx/model.ckpt-5154361.data-00001-of-00008; Invalid argument<br>\n[[Node: save_1/RestoreV2_1 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:ps/replica:0/task:0/device:CPU:0\"](_recv_save_1/Const_0_S7, save_1/RestoreV2_1/tensor_names, save_1/RestoreV2_1/shape_and_slices)]]<br>\n[[Node: save_1/restore_all/NoOp_S10 = _Recv<a href=\"\">client_terminated=false, recv_device=\"/job:worker/replica:0/task:0/device:GPU:0\", send_device=\"/job:ps/replica:0/task:0/device:GPU:0\", send_device_incarnation=1493071510865629599, tensor_name=\"edge_147_save_1/restore_all/NoOp\", tensor_type=DT_FLOAT, _device=\"/job:worker/replica:0/task:0/device:GPU:0\"</a>]]</p>\n<p>when I decrease the model size, the error changed:<br>\ntensorflow.python.framework.errors_impl.OutOfRangeError: Read less bytes than requested<br>\n[[Node: save_1/RestoreV2_3 = RestoreV2[dtypes=[DT_FLOAT, DT_FLOAT], _device=\"/job:ps/replica:0/task:1/device:CPU:0\"](_recv_save_1/Const_0_S1, save_1/RestoreV2_3/tensor_names, save_1/RestoreV2_3/shape_and_slices)]]</p>\n<p>List the smaller models:<br>\n-rw-r--r--   3 root supergroup   11893084 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00000-of-00008<br>\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00001-of-00008<br>\n-rw-r--r--   3 root supergroup  106483864 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00002-of-00008<br>\n-rw-r--r--   3 root supergroup 5130000440 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.data-00003-of-00008<br>\n-rw-r--r--   3 root supergroup     375688 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00004-of-00008<br>\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00005-of-00008<br>\n-rw-r--r--   3 root supergroup  232909600 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00006-of-00008<br>\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00007-of-00008<br>\n-rw-r--r--   3 root supergroup       1564 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.index<br>\n-rw-r--r--   3 root supergroup     571996 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.meta</p>", "body_text": "I am using tensorflow-gpu 1.7.0, and meet exactly the same problem when restoring model in distributed tensorflow environment.\nwhen the model file is larger than 3GB, the error below occurs:\nInvalidArgumentError (see above for traceback): hdfs://xxxx/model.ckpt-5154361.data-00001-of-00008; Invalid argument\n[[Node: save_1/RestoreV2_1 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:ps/replica:0/task:0/device:CPU:0\"](_recv_save_1/Const_0_S7, save_1/RestoreV2_1/tensor_names, save_1/RestoreV2_1/shape_and_slices)]]\n[[Node: save_1/restore_all/NoOp_S10 = _Recvclient_terminated=false, recv_device=\"/job:worker/replica:0/task:0/device:GPU:0\", send_device=\"/job:ps/replica:0/task:0/device:GPU:0\", send_device_incarnation=1493071510865629599, tensor_name=\"edge_147_save_1/restore_all/NoOp\", tensor_type=DT_FLOAT, _device=\"/job:worker/replica:0/task:0/device:GPU:0\"]]\nwhen I decrease the model size, the error changed:\ntensorflow.python.framework.errors_impl.OutOfRangeError: Read less bytes than requested\n[[Node: save_1/RestoreV2_3 = RestoreV2[dtypes=[DT_FLOAT, DT_FLOAT], _device=\"/job:ps/replica:0/task:1/device:CPU:0\"](_recv_save_1/Const_0_S1, save_1/RestoreV2_3/tensor_names, save_1/RestoreV2_3/shape_and_slices)]]\nList the smaller models:\n-rw-r--r--   3 root supergroup   11893084 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00000-of-00008\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00001-of-00008\n-rw-r--r--   3 root supergroup  106483864 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00002-of-00008\n-rw-r--r--   3 root supergroup 5130000440 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.data-00003-of-00008\n-rw-r--r--   3 root supergroup     375688 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00004-of-00008\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00005-of-00008\n-rw-r--r--   3 root supergroup  232909600 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00006-of-00008\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00007-of-00008\n-rw-r--r--   3 root supergroup       1564 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.index\n-rw-r--r--   3 root supergroup     571996 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.meta", "body": "I am using tensorflow-gpu 1.7.0, and meet exactly the same problem when restoring model in distributed tensorflow environment.\r\n\r\nwhen the model file is larger than 3GB, the error below occurs:\r\nInvalidArgumentError (see above for traceback): hdfs://xxxx/model.ckpt-5154361.data-00001-of-00008; Invalid argument\r\n         [[Node: save_1/RestoreV2_1 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:ps/replica:0/task:0/device:CPU:0\"](_recv_save_1/Const_0_S7, save_1/RestoreV2_1/tensor_names, save_1/RestoreV2_1/shape_and_slices)]]\r\n         [[Node: save_1/restore_all/NoOp_S10 = _Recv[client_terminated=false, recv_device=\"/job:worker/replica:0/task:0/device:GPU:0\", send_device=\"/job:ps/replica:0/task:0/device:GPU:0\", send_device_incarnation=1493071510865629599, tensor_name=\"edge_147_save_1/restore_all/NoOp\", tensor_type=DT_FLOAT, _device=\"/job:worker/replica:0/task:0/device:GPU:0\"]()]]\r\n\r\n\r\n\r\nwhen I decrease the model size, the error changed:\r\ntensorflow.python.framework.errors_impl.OutOfRangeError: Read less bytes than requested\r\n         [[Node: save_1/RestoreV2_3 = RestoreV2[dtypes=[DT_FLOAT, DT_FLOAT], _device=\"/job:ps/replica:0/task:1/device:CPU:0\"](_recv_save_1/Const_0_S1, save_1/RestoreV2_3/tensor_names, save_1/RestoreV2_3/shape_and_slices)]]\r\n\r\nList the smaller models:\r\n-rw-r--r--   3 root supergroup   11893084 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00000-of-00008\r\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00001-of-00008\r\n-rw-r--r--   3 root supergroup  106483864 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00002-of-00008\r\n-rw-r--r--   3 root supergroup 5130000440 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.data-00003-of-00008\r\n-rw-r--r--   3 root supergroup     375688 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00004-of-00008\r\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00005-of-00008\r\n-rw-r--r--   3 root supergroup  232909600 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00006-of-00008\r\n-rw-r--r--   3 root supergroup  330000440 2018-06-06 19:12 /tmp/xxx/model.ckpt-446327.data-00007-of-00008\r\n-rw-r--r--   3 root supergroup       1564 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.index\r\n-rw-r--r--   3 root supergroup     571996 2018-06-06 19:13 /tmp/xxx/model.ckpt-446327.meta"}
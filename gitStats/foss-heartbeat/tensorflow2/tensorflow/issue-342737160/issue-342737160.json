{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20968", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20968/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20968/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20968/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20968", "id": 342737160, "node_id": "MDU6SXNzdWUzNDI3MzcxNjA=", "number": 20968, "title": "tensorRT error '*** stack smashing detected ***: python terminated', ", "user": {"login": "nirmaljith", "id": 24826267, "node_id": "MDQ6VXNlcjI0ODI2MjY3", "avatar_url": "https://avatars0.githubusercontent.com/u/24826267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nirmaljith", "html_url": "https://github.com/nirmaljith", "followers_url": "https://api.github.com/users/nirmaljith/followers", "following_url": "https://api.github.com/users/nirmaljith/following{/other_user}", "gists_url": "https://api.github.com/users/nirmaljith/gists{/gist_id}", "starred_url": "https://api.github.com/users/nirmaljith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nirmaljith/subscriptions", "organizations_url": "https://api.github.com/users/nirmaljith/orgs", "repos_url": "https://api.github.com/users/nirmaljith/repos", "events_url": "https://api.github.com/users/nirmaljith/events{/privacy}", "received_events_url": "https://api.github.com/users/nirmaljith/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-07-19T13:51:20Z", "updated_at": "2018-08-10T20:26:59Z", "closed_at": "2018-08-10T20:26:59Z", "author_association": "NONE", "body_html": "<p>I am using tensorflow version 1.7, cuda8.0, python 2.7 to optimize the tensorflow VGG-16 model using the code below:-</p>\n<pre><code>vgg_checkpoint = 'trained_models/models/vgg16/vgg_16.ckpt'\nimage_decoded = tf.placeholder(dtype=tf.float32, shape=[None, None, None, 3], name=\"input\")\nlogits, _ = vgg_16(image_decoded, is_training=False)\nsaver = tf.train.Saver()\nsaver.restore(sess, vgg_checkpoint)\n\ninput_graph_def = sess.graph.as_graph_def()\noutput_graph_def = tf.graph_util.convert_variables_to_constants(\n    sess,\n    input_graph_def,\n    ['vgg_16/fc8/squeezed'],\n)\nfrozen_graph = tf.graph_util.remove_training_nodes(output_graph_def)\noutput_graph = \"../model/tensorRT_check.pb\"\nwith tf.gfile.GFile(output_graph, \"wb\") as f:\n    f.write(frozen_graph.SerializeToString())\ntrt_graph = trt.create_inference_graph(\n    input_graph_def=frozen_graph,\n    outputs=['input', 'vgg_16/fc8/squeezed'],\n    max_batch_size=1,\n    max_workspace_size_bytes=1 &lt;&lt; 25,\n    precision_mode='FP16',\n    minimum_segment_size=50\n)\n</code></pre>\n<p>and I am getting following error.</p>\n<p><code>2018-07-19 19:00:34.093716: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA 2018-07-19 19:00:34.149018: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero 2018-07-19 19:00:34.149335: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1344] Found device 0 with properties:  name: GeForce GTX TITAN X major: 5 minor: 2 memoryClockRate(GHz): 1.076 pciBusID: 0000:01:00.0 totalMemory: 11.92GiB freeMemory: 11.33GiB 2018-07-19 19:00:34.149350: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0 2018-07-19 19:00:34.395658: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix: 2018-07-19 19:00:34.395685: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0  2018-07-19 19:00:34.395691: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N  2018-07-19 19:00:34.395901: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7324 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:01:00.0, compute capability: 5.2) Converted 32 variables to const ops. 2018-07-19 19:00:41.076819: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count &gt;= 8): 1 *** stack smashing detected ***: python terminated Aborted (core dumped) </code></p>", "body_text": "I am using tensorflow version 1.7, cuda8.0, python 2.7 to optimize the tensorflow VGG-16 model using the code below:-\nvgg_checkpoint = 'trained_models/models/vgg16/vgg_16.ckpt'\nimage_decoded = tf.placeholder(dtype=tf.float32, shape=[None, None, None, 3], name=\"input\")\nlogits, _ = vgg_16(image_decoded, is_training=False)\nsaver = tf.train.Saver()\nsaver.restore(sess, vgg_checkpoint)\n\ninput_graph_def = sess.graph.as_graph_def()\noutput_graph_def = tf.graph_util.convert_variables_to_constants(\n    sess,\n    input_graph_def,\n    ['vgg_16/fc8/squeezed'],\n)\nfrozen_graph = tf.graph_util.remove_training_nodes(output_graph_def)\noutput_graph = \"../model/tensorRT_check.pb\"\nwith tf.gfile.GFile(output_graph, \"wb\") as f:\n    f.write(frozen_graph.SerializeToString())\ntrt_graph = trt.create_inference_graph(\n    input_graph_def=frozen_graph,\n    outputs=['input', 'vgg_16/fc8/squeezed'],\n    max_batch_size=1,\n    max_workspace_size_bytes=1 << 25,\n    precision_mode='FP16',\n    minimum_segment_size=50\n)\n\nand I am getting following error.\n2018-07-19 19:00:34.093716: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA 2018-07-19 19:00:34.149018: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero 2018-07-19 19:00:34.149335: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1344] Found device 0 with properties:  name: GeForce GTX TITAN X major: 5 minor: 2 memoryClockRate(GHz): 1.076 pciBusID: 0000:01:00.0 totalMemory: 11.92GiB freeMemory: 11.33GiB 2018-07-19 19:00:34.149350: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0 2018-07-19 19:00:34.395658: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix: 2018-07-19 19:00:34.395685: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0  2018-07-19 19:00:34.395691: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N  2018-07-19 19:00:34.395901: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7324 MB memory) -> physical GPU (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:01:00.0, compute capability: 5.2) Converted 32 variables to const ops. 2018-07-19 19:00:41.076819: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 1 *** stack smashing detected ***: python terminated Aborted (core dumped)", "body": "I am using tensorflow version 1.7, cuda8.0, python 2.7 to optimize the tensorflow VGG-16 model using the code below:-\r\n\r\n\r\n    vgg_checkpoint = 'trained_models/models/vgg16/vgg_16.ckpt'\r\n    image_decoded = tf.placeholder(dtype=tf.float32, shape=[None, None, None, 3], name=\"input\")\r\n    logits, _ = vgg_16(image_decoded, is_training=False)\r\n    saver = tf.train.Saver()\r\n    saver.restore(sess, vgg_checkpoint)\r\n\r\n    input_graph_def = sess.graph.as_graph_def()\r\n    output_graph_def = tf.graph_util.convert_variables_to_constants(\r\n        sess,\r\n        input_graph_def,\r\n        ['vgg_16/fc8/squeezed'],\r\n    )\r\n    frozen_graph = tf.graph_util.remove_training_nodes(output_graph_def)\r\n    output_graph = \"../model/tensorRT_check.pb\"\r\n    with tf.gfile.GFile(output_graph, \"wb\") as f:\r\n        f.write(frozen_graph.SerializeToString())\r\n    trt_graph = trt.create_inference_graph(\r\n        input_graph_def=frozen_graph,\r\n        outputs=['input', 'vgg_16/fc8/squeezed'],\r\n        max_batch_size=1,\r\n        max_workspace_size_bytes=1 << 25,\r\n        precision_mode='FP16',\r\n        minimum_segment_size=50\r\n    )\r\n    \r\n\r\nand I am getting following error.\r\n\r\n`2018-07-19 19:00:34.093716: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2018-07-19 19:00:34.149018: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2018-07-19 19:00:34.149335: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1344] Found device 0 with properties: \r\nname: GeForce GTX TITAN X major: 5 minor: 2 memoryClockRate(GHz): 1.076\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 11.92GiB freeMemory: 11.33GiB\r\n2018-07-19 19:00:34.149350: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1423] Adding visible gpu devices: 0\r\n2018-07-19 19:00:34.395658: I tensorflow/core/common_runtime/gpu/gpu_device.cc:911] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-07-19 19:00:34.395685: I tensorflow/core/common_runtime/gpu/gpu_device.cc:917]      0 \r\n2018-07-19 19:00:34.395691: I tensorflow/core/common_runtime/gpu/gpu_device.cc:930] 0:   N \r\n2018-07-19 19:00:34.395901: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1041] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7324 MB memory) -> physical GPU (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:01:00.0, compute capability: 5.2)\r\nConverted 32 variables to const ops.\r\n2018-07-19 19:00:41.076819: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 1\r\n*** stack smashing detected ***: python terminated\r\nAborted (core dumped)\r\n`\r\n\r\n"}
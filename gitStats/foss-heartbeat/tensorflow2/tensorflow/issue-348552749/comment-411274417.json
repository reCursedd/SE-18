{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/411274417", "html_url": "https://github.com/tensorflow/tensorflow/issues/21467#issuecomment-411274417", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21467", "id": 411274417, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTI3NDQxNw==", "user": {"login": "Zrachel", "id": 4532062, "node_id": "MDQ6VXNlcjQ1MzIwNjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/4532062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zrachel", "html_url": "https://github.com/Zrachel", "followers_url": "https://api.github.com/users/Zrachel/followers", "following_url": "https://api.github.com/users/Zrachel/following{/other_user}", "gists_url": "https://api.github.com/users/Zrachel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zrachel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zrachel/subscriptions", "organizations_url": "https://api.github.com/users/Zrachel/orgs", "repos_url": "https://api.github.com/users/Zrachel/repos", "events_url": "https://api.github.com/users/Zrachel/events{/privacy}", "received_events_url": "https://api.github.com/users/Zrachel/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-08T03:40:24Z", "updated_at": "2018-08-08T03:44:30Z", "author_association": "NONE", "body_html": "<p>I meet the same problem, with code:</p>\n<pre><code>import tensorflow as tf\na = tf.random_normal(dtype=tf.float16, shape=[5, 2, 3], name='a')\nb = tf.random_normal(dtype=tf.float16, shape=[5, 3, 2], name='b')\nc = tf.matmul(a, b)\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True, allow_soft_placement=False))\nprint(sess.run(c).shape)\ntf.__version__\n</code></pre>\n<p>, tf 1.8.0 shows:</p>\n<pre><code>&gt;&gt;&gt; print(sess.run(c).shape)\nb/RandomStandardNormal: (RandomStandardNormal): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832338: I tensorflow/core/common_runtime/placer.cc:886] b/RandomStandardNormal: (RandomStandardNormal)/job:localhost/replica:0/task:0/device:GPU:0\nb/mul: (Mul): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832374: I tensorflow/core/common_runtime/placer.cc:886] b/mul: (Mul)/job:localhost/replica:0/task:0/device:GPU:0\nb: (Add): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832389: I tensorflow/core/common_runtime/placer.cc:886] b: (Add)/job:localhost/replica:0/task:0/device:GPU:0\na/RandomStandardNormal: (RandomStandardNormal): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832404: I tensorflow/core/common_runtime/placer.cc:886] a/RandomStandardNormal: (RandomStandardNormal)/job:localhost/replica:0/task:0/device:GPU:0\na/mul: (Mul): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832417: I tensorflow/core/common_runtime/placer.cc:886] a/mul: (Mul)/job:localhost/replica:0/task:0/device:GPU:0\na: (Add): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832431: I tensorflow/core/common_runtime/placer.cc:886] a: (Add)/job:localhost/replica:0/task:0/device:GPU:0\nMatMul: (BatchMatMul): /job:localhost/replica:0/task:0/device:CPU:0\n2018-08-08 11:36:17.832439: I tensorflow/core/common_runtime/placer.cc:886] MatMul: (BatchMatMul)/job:localhost/replica:0/task:0/device:CPU:0\nb/stddev: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832454: I tensorflow/core/common_runtime/placer.cc:886] b/stddev: (Const)/job:localhost/replica:0/task:0/device:GPU:0\nb/mean: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832468: I tensorflow/core/common_runtime/placer.cc:886] b/mean: (Const)/job:localhost/replica:0/task:0/device:GPU:0\nb/shape: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832482: I tensorflow/core/common_runtime/placer.cc:886] b/shape: (Const)/job:localhost/replica:0/task:0/device:GPU:0\na/stddev: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832495: I tensorflow/core/common_runtime/placer.cc:886] a/stddev: (Const)/job:localhost/replica:0/task:0/device:GPU:0\na/mean: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832509: I tensorflow/core/common_runtime/placer.cc:886] a/mean: (Const)/job:localhost/replica:0/task:0/device:GPU:0\na/shape: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832522: I tensorflow/core/common_runtime/placer.cc:886] a/shape: (Const)/job:localhost/replica:0/task:0/device:GPU:0\n(5, 2, 2)\n</code></pre>\n<p>Note This Line:</p>\n<p><strong>2018-08-08 11:36:17.832439: I tensorflow/core/common_runtime/placer.cc:886] MatMul: (BatchMatMul)/job:localhost/replica:0/task:0/device:CPU:0</strong></p>\n<p>Matrix of fp16 does multiplication on CPU.</p>\n<p>Environment:<br>\npython 2.7<br>\ntf 1.8.0 installed from pip (pip install tensorflow-gpu==1.8.0 -t $PYTHONHOME/lib/python2.7/)<br>\nV100,  driver 396.26<br>\ncuda9.2,  cudnn7</p>", "body_text": "I meet the same problem, with code:\nimport tensorflow as tf\na = tf.random_normal(dtype=tf.float16, shape=[5, 2, 3], name='a')\nb = tf.random_normal(dtype=tf.float16, shape=[5, 3, 2], name='b')\nc = tf.matmul(a, b)\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True, allow_soft_placement=False))\nprint(sess.run(c).shape)\ntf.__version__\n\n, tf 1.8.0 shows:\n>>> print(sess.run(c).shape)\nb/RandomStandardNormal: (RandomStandardNormal): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832338: I tensorflow/core/common_runtime/placer.cc:886] b/RandomStandardNormal: (RandomStandardNormal)/job:localhost/replica:0/task:0/device:GPU:0\nb/mul: (Mul): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832374: I tensorflow/core/common_runtime/placer.cc:886] b/mul: (Mul)/job:localhost/replica:0/task:0/device:GPU:0\nb: (Add): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832389: I tensorflow/core/common_runtime/placer.cc:886] b: (Add)/job:localhost/replica:0/task:0/device:GPU:0\na/RandomStandardNormal: (RandomStandardNormal): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832404: I tensorflow/core/common_runtime/placer.cc:886] a/RandomStandardNormal: (RandomStandardNormal)/job:localhost/replica:0/task:0/device:GPU:0\na/mul: (Mul): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832417: I tensorflow/core/common_runtime/placer.cc:886] a/mul: (Mul)/job:localhost/replica:0/task:0/device:GPU:0\na: (Add): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832431: I tensorflow/core/common_runtime/placer.cc:886] a: (Add)/job:localhost/replica:0/task:0/device:GPU:0\nMatMul: (BatchMatMul): /job:localhost/replica:0/task:0/device:CPU:0\n2018-08-08 11:36:17.832439: I tensorflow/core/common_runtime/placer.cc:886] MatMul: (BatchMatMul)/job:localhost/replica:0/task:0/device:CPU:0\nb/stddev: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832454: I tensorflow/core/common_runtime/placer.cc:886] b/stddev: (Const)/job:localhost/replica:0/task:0/device:GPU:0\nb/mean: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832468: I tensorflow/core/common_runtime/placer.cc:886] b/mean: (Const)/job:localhost/replica:0/task:0/device:GPU:0\nb/shape: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832482: I tensorflow/core/common_runtime/placer.cc:886] b/shape: (Const)/job:localhost/replica:0/task:0/device:GPU:0\na/stddev: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832495: I tensorflow/core/common_runtime/placer.cc:886] a/stddev: (Const)/job:localhost/replica:0/task:0/device:GPU:0\na/mean: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832509: I tensorflow/core/common_runtime/placer.cc:886] a/mean: (Const)/job:localhost/replica:0/task:0/device:GPU:0\na/shape: (Const): /job:localhost/replica:0/task:0/device:GPU:0\n2018-08-08 11:36:17.832522: I tensorflow/core/common_runtime/placer.cc:886] a/shape: (Const)/job:localhost/replica:0/task:0/device:GPU:0\n(5, 2, 2)\n\nNote This Line:\n2018-08-08 11:36:17.832439: I tensorflow/core/common_runtime/placer.cc:886] MatMul: (BatchMatMul)/job:localhost/replica:0/task:0/device:CPU:0\nMatrix of fp16 does multiplication on CPU.\nEnvironment:\npython 2.7\ntf 1.8.0 installed from pip (pip install tensorflow-gpu==1.8.0 -t $PYTHONHOME/lib/python2.7/)\nV100,  driver 396.26\ncuda9.2,  cudnn7", "body": "I meet the same problem, with code:\r\n```\r\nimport tensorflow as tf\r\na = tf.random_normal(dtype=tf.float16, shape=[5, 2, 3], name='a')\r\nb = tf.random_normal(dtype=tf.float16, shape=[5, 3, 2], name='b')\r\nc = tf.matmul(a, b)\r\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True, allow_soft_placement=False))\r\nprint(sess.run(c).shape)\r\ntf.__version__\r\n```\r\n\r\n\r\n, tf 1.8.0 shows:\r\n```\r\n>>> print(sess.run(c).shape)\r\nb/RandomStandardNormal: (RandomStandardNormal): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832338: I tensorflow/core/common_runtime/placer.cc:886] b/RandomStandardNormal: (RandomStandardNormal)/job:localhost/replica:0/task:0/device:GPU:0\r\nb/mul: (Mul): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832374: I tensorflow/core/common_runtime/placer.cc:886] b/mul: (Mul)/job:localhost/replica:0/task:0/device:GPU:0\r\nb: (Add): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832389: I tensorflow/core/common_runtime/placer.cc:886] b: (Add)/job:localhost/replica:0/task:0/device:GPU:0\r\na/RandomStandardNormal: (RandomStandardNormal): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832404: I tensorflow/core/common_runtime/placer.cc:886] a/RandomStandardNormal: (RandomStandardNormal)/job:localhost/replica:0/task:0/device:GPU:0\r\na/mul: (Mul): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832417: I tensorflow/core/common_runtime/placer.cc:886] a/mul: (Mul)/job:localhost/replica:0/task:0/device:GPU:0\r\na: (Add): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832431: I tensorflow/core/common_runtime/placer.cc:886] a: (Add)/job:localhost/replica:0/task:0/device:GPU:0\r\nMatMul: (BatchMatMul): /job:localhost/replica:0/task:0/device:CPU:0\r\n2018-08-08 11:36:17.832439: I tensorflow/core/common_runtime/placer.cc:886] MatMul: (BatchMatMul)/job:localhost/replica:0/task:0/device:CPU:0\r\nb/stddev: (Const): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832454: I tensorflow/core/common_runtime/placer.cc:886] b/stddev: (Const)/job:localhost/replica:0/task:0/device:GPU:0\r\nb/mean: (Const): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832468: I tensorflow/core/common_runtime/placer.cc:886] b/mean: (Const)/job:localhost/replica:0/task:0/device:GPU:0\r\nb/shape: (Const): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832482: I tensorflow/core/common_runtime/placer.cc:886] b/shape: (Const)/job:localhost/replica:0/task:0/device:GPU:0\r\na/stddev: (Const): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832495: I tensorflow/core/common_runtime/placer.cc:886] a/stddev: (Const)/job:localhost/replica:0/task:0/device:GPU:0\r\na/mean: (Const): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832509: I tensorflow/core/common_runtime/placer.cc:886] a/mean: (Const)/job:localhost/replica:0/task:0/device:GPU:0\r\na/shape: (Const): /job:localhost/replica:0/task:0/device:GPU:0\r\n2018-08-08 11:36:17.832522: I tensorflow/core/common_runtime/placer.cc:886] a/shape: (Const)/job:localhost/replica:0/task:0/device:GPU:0\r\n(5, 2, 2)\r\n```\r\n\r\nNote This Line:\r\n\r\n**2018-08-08 11:36:17.832439: I tensorflow/core/common_runtime/placer.cc:886] MatMul: (BatchMatMul)/job:localhost/replica:0/task:0/device:CPU:0**\r\n\r\nMatrix of fp16 does multiplication on CPU.\r\n\r\n\r\n\r\nEnvironment:\r\npython 2.7\r\ntf 1.8.0 installed from pip (pip install tensorflow-gpu==1.8.0 -t $PYTHONHOME/lib/python2.7/)\r\nV100,  driver 396.26\r\ncuda9.2,  cudnn7  \r\n"}
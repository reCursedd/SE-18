{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7960", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7960/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7960/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7960/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7960", "id": 210976664, "node_id": "MDU6SXNzdWUyMTA5NzY2NjQ=", "number": 7960, "title": "double free or corruption (!prev) in Docker image tensorflow/tensorflow:1.0.0", "user": {"login": "lienhua34", "id": 1691680, "node_id": "MDQ6VXNlcjE2OTE2ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1691680?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lienhua34", "html_url": "https://github.com/lienhua34", "followers_url": "https://api.github.com/users/lienhua34/followers", "following_url": "https://api.github.com/users/lienhua34/following{/other_user}", "gists_url": "https://api.github.com/users/lienhua34/gists{/gist_id}", "starred_url": "https://api.github.com/users/lienhua34/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lienhua34/subscriptions", "organizations_url": "https://api.github.com/users/lienhua34/orgs", "repos_url": "https://api.github.com/users/lienhua34/repos", "events_url": "https://api.github.com/users/lienhua34/events{/privacy}", "received_events_url": "https://api.github.com/users/lienhua34/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-03-01T04:25:24Z", "updated_at": "2017-03-10T07:57:28Z", "closed_at": "2017-03-10T07:57:28Z", "author_association": "NONE", "body_html": "<p>NOTE: Only file GitHub issues for bugs and feature requests.  All other topics will be closed.</p>\n<p>For general support from the community, see <a href=\"https://stackoverflow.com/questions/tagged/tensorflow\" rel=\"nofollow\">StackOverflow</a>.<br>\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed<br>\nout of scope for GitHub Issues and point people to StackOverflow.</p>\n<p>For bugs or installation issues, please provide the following information.<br>\nThe more information you provide, the more easily we will be able to offer<br>\nhelp and advice.</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"202030379\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6968\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6968/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6968\">#6968</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"209972536\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7839\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7839/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7839\">#7839</a></p>\n<h3>Environment info</h3>\n<p>I run tensorflow in Docker image <a href=\"https://hub.docker.com/r/tensorflow/tensorflow/\" rel=\"nofollow\">tensorflow/tensorflow:1.0.0</a>.</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>I used tensorflow/tensorflow:1.0.0 to run <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.0/tensorflow/examples/tutorials/mnist/mnist_softmax.py\">examples/tutorials/mnist/mnist_softmax.py</a>. My docker run command is:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ docker run -ti \\\n    -v /Users/lienhua34/Programs/python/tensorflow/tensorflow/examples/tutorials/mnist:/mnist \\\n   tensorflow/tensorflow:1.0.0 /bin/bash</pre></div>\n<p>Then cd to /mnist, and run mnist_softmax.py:</p>\n<div class=\"highlight highlight-source-shell\"><pre>root@5a17d6873afc:/notebooks# <span class=\"pl-c1\">cd</span> /mnist/\nroot@5a17d6873afc:/mnist# ls -l\ntotal 52\n-rw-r--r-- 1 root root 2581 Feb 16 15:42 BUILD\n-rw-r--r-- 1 root root  979 Feb 16 15:42 __init__.py\ndrwxr-xr-x 6 root root  204 Mar  1 03:41 data\n-rw-r--r-- 1 root root 9515 Feb 16 15:42 fully_connected_feed.py\n-rw-r--r-- 1 root root 1107 Feb 16 15:42 input_data.py\n-rw-r--r-- 1 root root 5292 Feb 16 15:42 mnist.py\n-rw-r--r-- 1 root root 2772 Feb 17 09:01 mnist_softmax.py\n-rw-r--r-- 1 root root 3684 Feb 16 15:42 mnist_softmax_xla.py\n-rw-r--r-- 1 root root 8391 Feb 16 15:42 mnist_with_summaries.py\nroot@5a17d6873afc:/mnist# python mnist_softmax.py --data_dir=data\nLoading data....\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn<span class=\"pl-s\"><span class=\"pl-pds\">'</span>t compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.</span>\n<span class=\"pl-s\">W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn<span class=\"pl-pds\">'</span></span>t compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn<span class=\"pl-s\"><span class=\"pl-pds\">'</span>t compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.</span>\n<span class=\"pl-s\">W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn<span class=\"pl-pds\">'</span></span>t compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn<span class=\"pl-s\"><span class=\"pl-pds\">'</span>t compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.</span>\n<span class=\"pl-s\">W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn<span class=\"pl-pds\">'</span></span>t compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n0.919\n<span class=\"pl-k\">***</span> Error <span class=\"pl-k\">in</span> <span class=\"pl-s\"><span class=\"pl-pds\">`</span>python<span class=\"pl-s\"><span class=\"pl-pds\">'</span>: double free or corruption (!prev): 0x000000000179b6c0 ***</span></span>\n<span class=\"pl-s\"><span class=\"pl-s\">Aborted</span></span></pre></div>\n<h3>What other attempted solutions have you tried?</h3>\n<p>I followed the issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"202030379\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6968\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6968/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6968\">#6968</a> to install libtcmalloc-minimal4,</p>\n<div class=\"highlight highlight-source-shell\"><pre>sudo apt-get install libtcmalloc-minimal4\n<span class=\"pl-k\">export</span> LD_PRELOAD=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/lib/libtcmalloc_minimal.so.4<span class=\"pl-pds\">\"</span></span></pre></div>\n<p>After that, it will run fine.</p>\n<pre><code>root@5b7be5bcf590:/mnist# python mnist_softmax.py --data_dir=data\nLoading data....\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n0.9212\n</code></pre>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).</p>", "body_text": "NOTE: Only file GitHub issues for bugs and feature requests.  All other topics will be closed.\nFor general support from the community, see StackOverflow.\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\nout of scope for GitHub Issues and point people to StackOverflow.\nFor bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n#6968\n#7839\nEnvironment info\nI run tensorflow in Docker image tensorflow/tensorflow:1.0.0.\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nI used tensorflow/tensorflow:1.0.0 to run examples/tutorials/mnist/mnist_softmax.py. My docker run command is:\n$ docker run -ti \\\n    -v /Users/lienhua34/Programs/python/tensorflow/tensorflow/examples/tutorials/mnist:/mnist \\\n   tensorflow/tensorflow:1.0.0 /bin/bash\nThen cd to /mnist, and run mnist_softmax.py:\nroot@5a17d6873afc:/notebooks# cd /mnist/\nroot@5a17d6873afc:/mnist# ls -l\ntotal 52\n-rw-r--r-- 1 root root 2581 Feb 16 15:42 BUILD\n-rw-r--r-- 1 root root  979 Feb 16 15:42 __init__.py\ndrwxr-xr-x 6 root root  204 Mar  1 03:41 data\n-rw-r--r-- 1 root root 9515 Feb 16 15:42 fully_connected_feed.py\n-rw-r--r-- 1 root root 1107 Feb 16 15:42 input_data.py\n-rw-r--r-- 1 root root 5292 Feb 16 15:42 mnist.py\n-rw-r--r-- 1 root root 2772 Feb 17 09:01 mnist_softmax.py\n-rw-r--r-- 1 root root 3684 Feb 16 15:42 mnist_softmax_xla.py\n-rw-r--r-- 1 root root 8391 Feb 16 15:42 mnist_with_summaries.py\nroot@5a17d6873afc:/mnist# python mnist_softmax.py --data_dir=data\nLoading data....\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n0.919\n*** Error in `python': double free or corruption (!prev): 0x000000000179b6c0 ***\nAborted\nWhat other attempted solutions have you tried?\nI followed the issue #6968 to install libtcmalloc-minimal4,\nsudo apt-get install libtcmalloc-minimal4\nexport LD_PRELOAD=\"/usr/lib/libtcmalloc_minimal.so.4\"\nAfter that, it will run fine.\nroot@5b7be5bcf590:/mnist# python mnist_softmax.py --data_dir=data\nLoading data....\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n0.9212\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).", "body": "NOTE: Only file GitHub issues for bugs and feature requests.  All other topics will be closed.\r\n\r\nFor general support from the community, see [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\r\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\r\nout of scope for GitHub Issues and point people to StackOverflow.\r\n\r\nFor bugs or installation issues, please provide the following information.\r\nThe more information you provide, the more easily we will be able to offer\r\nhelp and advice.\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\nhttps://github.com/tensorflow/tensorflow/issues/6968\r\nhttps://github.com/tensorflow/tensorflow/issues/7839\r\n\r\n### Environment info\r\n\r\nI run tensorflow in Docker image [tensorflow/tensorflow:1.0.0](https://hub.docker.com/r/tensorflow/tensorflow/).\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n\r\nI used tensorflow/tensorflow:1.0.0 to run [examples/tutorials/mnist/mnist_softmax.py](https://github.com/tensorflow/tensorflow/blob/r1.0/tensorflow/examples/tutorials/mnist/mnist_softmax.py). My docker run command is:\r\n\r\n```shell\r\n$ docker run -ti \\\r\n    -v /Users/lienhua34/Programs/python/tensorflow/tensorflow/examples/tutorials/mnist:/mnist \\\r\n   tensorflow/tensorflow:1.0.0 /bin/bash\r\n```\r\n\r\nThen cd to /mnist, and run mnist_softmax.py:\r\n\r\n```shell\r\nroot@5a17d6873afc:/notebooks# cd /mnist/\r\nroot@5a17d6873afc:/mnist# ls -l\r\ntotal 52\r\n-rw-r--r-- 1 root root 2581 Feb 16 15:42 BUILD\r\n-rw-r--r-- 1 root root  979 Feb 16 15:42 __init__.py\r\ndrwxr-xr-x 6 root root  204 Mar  1 03:41 data\r\n-rw-r--r-- 1 root root 9515 Feb 16 15:42 fully_connected_feed.py\r\n-rw-r--r-- 1 root root 1107 Feb 16 15:42 input_data.py\r\n-rw-r--r-- 1 root root 5292 Feb 16 15:42 mnist.py\r\n-rw-r--r-- 1 root root 2772 Feb 17 09:01 mnist_softmax.py\r\n-rw-r--r-- 1 root root 3684 Feb 16 15:42 mnist_softmax_xla.py\r\n-rw-r--r-- 1 root root 8391 Feb 16 15:42 mnist_with_summaries.py\r\nroot@5a17d6873afc:/mnist# python mnist_softmax.py --data_dir=data\r\nLoading data....\r\nExtracting data/train-images-idx3-ubyte.gz\r\nExtracting data/train-labels-idx1-ubyte.gz\r\nExtracting data/t10k-images-idx3-ubyte.gz\r\nExtracting data/t10k-labels-idx1-ubyte.gz\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\n0.919\r\n*** Error in `python': double free or corruption (!prev): 0x000000000179b6c0 ***\r\nAborted\r\n```\r\n\r\n### What other attempted solutions have you tried?\r\n\r\nI followed the issue https://github.com/tensorflow/tensorflow/issues/6968 to install libtcmalloc-minimal4,\r\n\r\n```shell\r\nsudo apt-get install libtcmalloc-minimal4\r\nexport LD_PRELOAD=\"/usr/lib/libtcmalloc_minimal.so.4\"\r\n```\r\n\r\nAfter that, it will run fine.\r\n\r\n```\r\nroot@5b7be5bcf590:/mnist# python mnist_softmax.py --data_dir=data\r\nLoading data....\r\nExtracting data/train-images-idx3-ubyte.gz\r\nExtracting data/train-labels-idx1-ubyte.gz\r\nExtracting data/t10k-images-idx3-ubyte.gz\r\nExtracting data/t10k-labels-idx1-ubyte.gz\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\n0.9212\r\n```\r\n\r\n### Logs or other output that would be helpful\r\n(If logs are large, please upload as attachment or provide link).\r\n"}
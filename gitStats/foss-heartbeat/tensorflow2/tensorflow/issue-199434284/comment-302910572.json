{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/302910572", "html_url": "https://github.com/tensorflow/tensorflow/issues/6727#issuecomment-302910572", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6727", "id": 302910572, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjkxMDU3Mg==", "user": {"login": "lancerts", "id": 7495155, "node_id": "MDQ6VXNlcjc0OTUxNTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7495155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lancerts", "html_url": "https://github.com/lancerts", "followers_url": "https://api.github.com/users/lancerts/followers", "following_url": "https://api.github.com/users/lancerts/following{/other_user}", "gists_url": "https://api.github.com/users/lancerts/gists{/gist_id}", "starred_url": "https://api.github.com/users/lancerts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lancerts/subscriptions", "organizations_url": "https://api.github.com/users/lancerts/orgs", "repos_url": "https://api.github.com/users/lancerts/repos", "events_url": "https://api.github.com/users/lancerts/events{/privacy}", "received_events_url": "https://api.github.com/users/lancerts/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-21T02:19:30Z", "updated_at": "2017-05-21T02:19:30Z", "author_association": "NONE", "body_html": "<p>This indeed solves my problem. However, now the validationmonitor only trigger <strong>ONE</strong> time, any solution for this?</p>\n<p>validation_monitor = tf.contrib.learn.monitors.ValidationMonitor(<br>\ninput_fn=lambda: input_fn(df_test),<br>\nevery_n_steps=25,metrics=validation_metrics,<br>\neval_steps=1,<br>\nearly_stopping_metric=\"auc\",<br>\nearly_stopping_metric_minimize=False,<br>\nearly_stopping_rounds=100)</p>\n<p>INFO:tensorflow:Validation (step 25): loss = 404.011, accuracy = 0.859006, labels/prediction_mean = 1.88953e-07, labels/actual_label_mean = 0.140994, accuracy/baseline_label_mean = 0.140994, auc = 0.5, auc_precision_recall = 0.570497, accuracy/threshold_0.500000_mean = 0.859006, precision/positive_threshold_0.500000_mean = 0.0, recall/positive_threshold_0.500000_mean = 0.0, precision = 0.0, recall = 0.0, global_step = 1<br>\nINFO:tensorflow:global_step/sec: 5.23263<br>\nINFO:tensorflow:loss = 51.8876, step = 101 (19.112 sec)<br>\nINFO:tensorflow:global_step/sec: 28.5071<br>\nINFO:tensorflow:loss = 5.04256, step = 201 (3.508 sec)<br>\nINFO:tensorflow:global_step/sec: 25.6652<br>\nINFO:tensorflow:loss = 11.7246, step = 301 (3.896 sec)<br>\nINFO:tensorflow:global_step/sec: 29.4536<br>\nINFO:tensorflow:loss = 10.9838, step = 401 (3.395 sec)<br>\nINFO:tensorflow:global_step/sec: 28.0369<br>\nINFO:tensorflow:loss = 8.74781, step = 501 (3.567 sec)<br>\nINFO:tensorflow:global_step/sec: 27.9563<br>\nINFO:tensorflow:loss = 10.7869, step = 601 (3.577 sec)<br>\nINFO:tensorflow:global_step/sec: 27.0742<br>\nINFO:tensorflow:loss = 17.0162, step = 701 (3.694 sec)<br>\nINFO:tensorflow:global_step/sec: 27.3682<br>\nINFO:tensorflow:loss = 4.63466, step = 801 (3.654 sec)<br>\nINFO:tensorflow:global_step/sec: 27.6004<br>\nINFO:tensorflow:loss = 6.31007, step = 901 (3.623 sec)<br>\nINFO:tensorflow:global_step/sec: 27.6511<br>\nINFO:tensorflow:loss = 2.64077, step = 1001 (3.616 sec)<br>\nINFO:tensorflow:global_step/sec: 27.4551<br>\nINFO:tensorflow:loss = 1.91578, step = 1101 (3.642 sec)<br>\nINFO:tensorflow:global_step/sec: 27.7833<br>\nINFO:tensorflow:loss = 7.05945, step = 1201 (3.599 sec)<br>\nINFO:tensorflow:global_step/sec: 28.0504<br>\nINFO:tensorflow:loss = 2.11703, step = 1301 (3.565 sec)<br>\nINFO:tensorflow:global_step/sec: 28.0631<br>\nINFO:tensorflow:loss = 7.89242, step = 1401 (3.563 sec)<br>\nINFO:tensorflow:global_step/sec: 27.6421<br>\nINFO:tensorflow:loss = 13.6624, step = 1501 (3.618 sec)<br>\nINFO:tensorflow:global_step/sec: 27.7735<br>\nINFO:tensorflow:loss = 2.61309, step = 1601 (3.601 sec)<br>\nINFO:tensorflow:global_step/sec: 27.5637<br>\nINFO:tensorflow:loss = 7.0057, step = 1701 (3.628 sec)<br>\nINFO:tensorflow:global_step/sec: 27.2692<br>\nINFO:tensorflow:loss = 5.1032, step = 1801 (3.667 sec)<br>\nINFO:tensorflow:global_step/sec: 27.225<br>\nINFO:tensorflow:loss = 1.73602, step = 1901 (3.673 sec)<br>\nINFO:tensorflow:Saving checkpoints for 2000 into /var/folders/dg/jxsw2s955c1f91h17nxqm4hm395n3_/T/tmpquiqiew6/model.ckpt.<br>\nINFO:tensorflow:Loss for final step: 1.56839.</p>", "body_text": "This indeed solves my problem. However, now the validationmonitor only trigger ONE time, any solution for this?\nvalidation_monitor = tf.contrib.learn.monitors.ValidationMonitor(\ninput_fn=lambda: input_fn(df_test),\nevery_n_steps=25,metrics=validation_metrics,\neval_steps=1,\nearly_stopping_metric=\"auc\",\nearly_stopping_metric_minimize=False,\nearly_stopping_rounds=100)\nINFO:tensorflow:Validation (step 25): loss = 404.011, accuracy = 0.859006, labels/prediction_mean = 1.88953e-07, labels/actual_label_mean = 0.140994, accuracy/baseline_label_mean = 0.140994, auc = 0.5, auc_precision_recall = 0.570497, accuracy/threshold_0.500000_mean = 0.859006, precision/positive_threshold_0.500000_mean = 0.0, recall/positive_threshold_0.500000_mean = 0.0, precision = 0.0, recall = 0.0, global_step = 1\nINFO:tensorflow:global_step/sec: 5.23263\nINFO:tensorflow:loss = 51.8876, step = 101 (19.112 sec)\nINFO:tensorflow:global_step/sec: 28.5071\nINFO:tensorflow:loss = 5.04256, step = 201 (3.508 sec)\nINFO:tensorflow:global_step/sec: 25.6652\nINFO:tensorflow:loss = 11.7246, step = 301 (3.896 sec)\nINFO:tensorflow:global_step/sec: 29.4536\nINFO:tensorflow:loss = 10.9838, step = 401 (3.395 sec)\nINFO:tensorflow:global_step/sec: 28.0369\nINFO:tensorflow:loss = 8.74781, step = 501 (3.567 sec)\nINFO:tensorflow:global_step/sec: 27.9563\nINFO:tensorflow:loss = 10.7869, step = 601 (3.577 sec)\nINFO:tensorflow:global_step/sec: 27.0742\nINFO:tensorflow:loss = 17.0162, step = 701 (3.694 sec)\nINFO:tensorflow:global_step/sec: 27.3682\nINFO:tensorflow:loss = 4.63466, step = 801 (3.654 sec)\nINFO:tensorflow:global_step/sec: 27.6004\nINFO:tensorflow:loss = 6.31007, step = 901 (3.623 sec)\nINFO:tensorflow:global_step/sec: 27.6511\nINFO:tensorflow:loss = 2.64077, step = 1001 (3.616 sec)\nINFO:tensorflow:global_step/sec: 27.4551\nINFO:tensorflow:loss = 1.91578, step = 1101 (3.642 sec)\nINFO:tensorflow:global_step/sec: 27.7833\nINFO:tensorflow:loss = 7.05945, step = 1201 (3.599 sec)\nINFO:tensorflow:global_step/sec: 28.0504\nINFO:tensorflow:loss = 2.11703, step = 1301 (3.565 sec)\nINFO:tensorflow:global_step/sec: 28.0631\nINFO:tensorflow:loss = 7.89242, step = 1401 (3.563 sec)\nINFO:tensorflow:global_step/sec: 27.6421\nINFO:tensorflow:loss = 13.6624, step = 1501 (3.618 sec)\nINFO:tensorflow:global_step/sec: 27.7735\nINFO:tensorflow:loss = 2.61309, step = 1601 (3.601 sec)\nINFO:tensorflow:global_step/sec: 27.5637\nINFO:tensorflow:loss = 7.0057, step = 1701 (3.628 sec)\nINFO:tensorflow:global_step/sec: 27.2692\nINFO:tensorflow:loss = 5.1032, step = 1801 (3.667 sec)\nINFO:tensorflow:global_step/sec: 27.225\nINFO:tensorflow:loss = 1.73602, step = 1901 (3.673 sec)\nINFO:tensorflow:Saving checkpoints for 2000 into /var/folders/dg/jxsw2s955c1f91h17nxqm4hm395n3_/T/tmpquiqiew6/model.ckpt.\nINFO:tensorflow:Loss for final step: 1.56839.", "body": "This indeed solves my problem. However, now the validationmonitor only trigger **ONE** time, any solution for this?\r\n\r\n\r\n validation_monitor = tf.contrib.learn.monitors.ValidationMonitor(\r\n    input_fn=lambda: input_fn(df_test),\r\n    every_n_steps=25,metrics=validation_metrics,\r\n    eval_steps=1,\r\n    early_stopping_metric=\"auc\",\r\n    early_stopping_metric_minimize=False,\r\n    early_stopping_rounds=100)\r\n\r\nINFO:tensorflow:Validation (step 25): loss = 404.011, accuracy = 0.859006, labels/prediction_mean = 1.88953e-07, labels/actual_label_mean = 0.140994, accuracy/baseline_label_mean = 0.140994, auc = 0.5, auc_precision_recall = 0.570497, accuracy/threshold_0.500000_mean = 0.859006, precision/positive_threshold_0.500000_mean = 0.0, recall/positive_threshold_0.500000_mean = 0.0, precision = 0.0, recall = 0.0, global_step = 1\r\nINFO:tensorflow:global_step/sec: 5.23263\r\nINFO:tensorflow:loss = 51.8876, step = 101 (19.112 sec)\r\nINFO:tensorflow:global_step/sec: 28.5071\r\nINFO:tensorflow:loss = 5.04256, step = 201 (3.508 sec)\r\nINFO:tensorflow:global_step/sec: 25.6652\r\nINFO:tensorflow:loss = 11.7246, step = 301 (3.896 sec)\r\nINFO:tensorflow:global_step/sec: 29.4536\r\nINFO:tensorflow:loss = 10.9838, step = 401 (3.395 sec)\r\nINFO:tensorflow:global_step/sec: 28.0369\r\nINFO:tensorflow:loss = 8.74781, step = 501 (3.567 sec)\r\nINFO:tensorflow:global_step/sec: 27.9563\r\nINFO:tensorflow:loss = 10.7869, step = 601 (3.577 sec)\r\nINFO:tensorflow:global_step/sec: 27.0742\r\nINFO:tensorflow:loss = 17.0162, step = 701 (3.694 sec)\r\nINFO:tensorflow:global_step/sec: 27.3682\r\nINFO:tensorflow:loss = 4.63466, step = 801 (3.654 sec)\r\nINFO:tensorflow:global_step/sec: 27.6004\r\nINFO:tensorflow:loss = 6.31007, step = 901 (3.623 sec)\r\nINFO:tensorflow:global_step/sec: 27.6511\r\nINFO:tensorflow:loss = 2.64077, step = 1001 (3.616 sec)\r\nINFO:tensorflow:global_step/sec: 27.4551\r\nINFO:tensorflow:loss = 1.91578, step = 1101 (3.642 sec)\r\nINFO:tensorflow:global_step/sec: 27.7833\r\nINFO:tensorflow:loss = 7.05945, step = 1201 (3.599 sec)\r\nINFO:tensorflow:global_step/sec: 28.0504\r\nINFO:tensorflow:loss = 2.11703, step = 1301 (3.565 sec)\r\nINFO:tensorflow:global_step/sec: 28.0631\r\nINFO:tensorflow:loss = 7.89242, step = 1401 (3.563 sec)\r\nINFO:tensorflow:global_step/sec: 27.6421\r\nINFO:tensorflow:loss = 13.6624, step = 1501 (3.618 sec)\r\nINFO:tensorflow:global_step/sec: 27.7735\r\nINFO:tensorflow:loss = 2.61309, step = 1601 (3.601 sec)\r\nINFO:tensorflow:global_step/sec: 27.5637\r\nINFO:tensorflow:loss = 7.0057, step = 1701 (3.628 sec)\r\nINFO:tensorflow:global_step/sec: 27.2692\r\nINFO:tensorflow:loss = 5.1032, step = 1801 (3.667 sec)\r\nINFO:tensorflow:global_step/sec: 27.225\r\nINFO:tensorflow:loss = 1.73602, step = 1901 (3.673 sec)\r\nINFO:tensorflow:Saving checkpoints for 2000 into /var/folders/dg/jxsw2s955c1f91h17nxqm4hm395n3_/T/tmpquiqiew6/model.ckpt.\r\nINFO:tensorflow:Loss for final step: 1.56839."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/293053926", "html_url": "https://github.com/tensorflow/tensorflow/pull/8935#issuecomment-293053926", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8935", "id": 293053926, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzA1MzkyNg==", "user": {"login": "JVillella", "id": 6306986, "node_id": "MDQ6VXNlcjYzMDY5ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/6306986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JVillella", "html_url": "https://github.com/JVillella", "followers_url": "https://api.github.com/users/JVillella/followers", "following_url": "https://api.github.com/users/JVillella/following{/other_user}", "gists_url": "https://api.github.com/users/JVillella/gists{/gist_id}", "starred_url": "https://api.github.com/users/JVillella/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JVillella/subscriptions", "organizations_url": "https://api.github.com/users/JVillella/orgs", "repos_url": "https://api.github.com/users/JVillella/repos", "events_url": "https://api.github.com/users/JVillella/events{/privacy}", "received_events_url": "https://api.github.com/users/JVillella/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-10T19:29:38Z", "updated_at": "2017-04-10T19:29:38Z", "author_association": "CONTRIBUTOR", "body_html": "<p>So I seem to be running <code>gnu-sed 4.2.2</code> which was likely installed from <code>coreutils</code> at some point in time. It has a different syntax. MacOS's built-in <code>sed</code> wants the empty string, <code>gsed</code> doesn't which is why there is a check (though for platform, assuming if you're on mac you're not using gsed):</p>\n<div class=\"highlight highlight-source-shell\"><pre><span class=\"pl-k\">function</span> <span class=\"pl-en\">sed_hyphen_i()</span> {\n  <span class=\"pl-k\">if</span> is_macos<span class=\"pl-k\">;</span> <span class=\"pl-k\">then</span>\n    sed -i <span class=\"pl-s\"><span class=\"pl-pds\">'</span><span class=\"pl-pds\">'</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-smi\">$@</span><span class=\"pl-pds\">\"</span></span>\n  <span class=\"pl-k\">else</span>\n    sed -i <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-smi\">$@</span><span class=\"pl-pds\">\"</span></span>\n  <span class=\"pl-k\">fi</span>\n}</pre></div>\n<p>Using backups seems to be more portable (e.x. <code>sed -i '.bak' ...</code>). No platform check is required either. We could do this and just remove the backup. If you guys are ok with this solution I can make the change. <code>awk</code> (not <code>gawk</code>) doesn't let us do it in place either.</p>\n<p>This issue only affects someone running <code>gsed</code> in place of <code>sed</code> on mac. If this makes it not-a-concern we can close the ticket.</p>", "body_text": "So I seem to be running gnu-sed 4.2.2 which was likely installed from coreutils at some point in time. It has a different syntax. MacOS's built-in sed wants the empty string, gsed doesn't which is why there is a check (though for platform, assuming if you're on mac you're not using gsed):\nfunction sed_hyphen_i() {\n  if is_macos; then\n    sed -i '' \"$@\"\n  else\n    sed -i \"$@\"\n  fi\n}\nUsing backups seems to be more portable (e.x. sed -i '.bak' ...). No platform check is required either. We could do this and just remove the backup. If you guys are ok with this solution I can make the change. awk (not gawk) doesn't let us do it in place either.\nThis issue only affects someone running gsed in place of sed on mac. If this makes it not-a-concern we can close the ticket.", "body": "So I seem to be running `gnu-sed 4.2.2` which was likely installed from `coreutils` at some point in time. It has a different syntax. MacOS's built-in `sed` wants the empty string, `gsed` doesn't which is why there is a check (though for platform, assuming if you're on mac you're not using gsed):\r\n\r\n```shell\r\nfunction sed_hyphen_i() {\r\n  if is_macos; then\r\n    sed -i '' \"$@\"\r\n  else\r\n    sed -i \"$@\"\r\n  fi\r\n}\r\n```\r\n\r\nUsing backups seems to be more portable (e.x. `sed -i '.bak' ...`). No platform check is required either. We could do this and just remove the backup. If you guys are ok with this solution I can make the change. `awk` (not `gawk`) doesn't let us do it in place either.\r\n\r\nThis issue only affects someone running `gsed` in place of `sed` on mac. If this makes it not-a-concern we can close the ticket."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/258944847", "html_url": "https://github.com/tensorflow/tensorflow/issues/5448#issuecomment-258944847", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5448", "id": 258944847, "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODk0NDg0Nw==", "user": {"login": "ramnath-k", "id": 2484842, "node_id": "MDQ6VXNlcjI0ODQ4NDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/2484842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramnath-k", "html_url": "https://github.com/ramnath-k", "followers_url": "https://api.github.com/users/ramnath-k/followers", "following_url": "https://api.github.com/users/ramnath-k/following{/other_user}", "gists_url": "https://api.github.com/users/ramnath-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramnath-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramnath-k/subscriptions", "organizations_url": "https://api.github.com/users/ramnath-k/orgs", "repos_url": "https://api.github.com/users/ramnath-k/repos", "events_url": "https://api.github.com/users/ramnath-k/events{/privacy}", "received_events_url": "https://api.github.com/users/ramnath-k/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-07T19:57:30Z", "updated_at": "2016-11-07T19:58:39Z", "author_association": "NONE", "body_html": "<p>Thanks for the update <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=12770037\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sherrym\">@sherrym</a><br>\nYes moving everything to child processes makes it work. But to clarify, in the modified code you have provided I don't even need to set daemon=True as no Tensorflow session has been created in the main process.<br>\nIt hangs only if I start a session in the main process and then fork a child process.</p>\n<p>Scenario is something like, only after the save_session completes it must launch multiple workers which process the saved checkpoint. So all the restore_session calls must either be in same process as save_session is or must be its child processes.</p>", "body_text": "Thanks for the update @sherrym\nYes moving everything to child processes makes it work. But to clarify, in the modified code you have provided I don't even need to set daemon=True as no Tensorflow session has been created in the main process.\nIt hangs only if I start a session in the main process and then fork a child process.\nScenario is something like, only after the save_session completes it must launch multiple workers which process the saved checkpoint. So all the restore_session calls must either be in same process as save_session is or must be its child processes.", "body": "Thanks for the update @sherrym\nYes moving everything to child processes makes it work. But to clarify, in the modified code you have provided I don't even need to set daemon=True as no Tensorflow session has been created in the main process.\nIt hangs only if I start a session in the main process and then fork a child process.\n\nScenario is something like, only after the save_session completes it must launch multiple workers which process the saved checkpoint. So all the restore_session calls must either be in same process as save_session is or must be its child processes.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/78142084", "pull_request_review_id": null, "id": 78142084, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MTQyMDg0", "diff_hunk": "@@ -237,6 +237,30 @@ def _check_dir(repository_ctx, directory):\n     auto_configure_fail(\"Cannot find dir: %s\" % directory)\n \n \n+def _real_cuda_toolkit_path(repository_ctx, cuda_toolkit_path, cuda_version):\n+  \"\"\"Attempts to return the real path to the cuda toolkit install directory.\n+\n+  Args:\n+    repository_ctx: The repository context.\n+    cuda_toolkit_path: The cuda toolkit install directory as returned by\n+      _cuda_toolkit_path.\n+    cuda_version: The cuda toolkit version.\n+\n+  Returns:\n+    A speculative real path of the cuda toolkit install directory.\n+  \"\"\"\n+  # Handle typical configuration where real path is <basedir>/cuda-<version>\n+  # and the provided path is <basedir>/cuda.\n+  version_suffixed = \"%s-%s\" % (cuda_toolkit_path, cuda_version)\n+  if repository_ctx.path(version_suffixed).exists:", "path": "third_party/gpus/cuda_configure.bzl", "position": null, "original_position": 19, "commit_id": "57222b869d247e2cd212fd90ef63ce8e7fcadb05", "original_commit_id": "05fe00110ae4278b06ddc8e1f9bd4dd753cfb042", "user": {"login": "davidzchen", "id": 5283042, "node_id": "MDQ6VXNlcjUyODMwNDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5283042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidzchen", "html_url": "https://github.com/davidzchen", "followers_url": "https://api.github.com/users/davidzchen/followers", "following_url": "https://api.github.com/users/davidzchen/following{/other_user}", "gists_url": "https://api.github.com/users/davidzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidzchen/subscriptions", "organizations_url": "https://api.github.com/users/davidzchen/orgs", "repos_url": "https://api.github.com/users/davidzchen/repos", "events_url": "https://api.github.com/users/davidzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/davidzchen/received_events", "type": "User", "site_admin": false}, "body": "Also check that `cuda_version` is non-empty here?\n", "created_at": "2016-09-09T07:59:43Z", "updated_at": "2016-09-19T09:50:05Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4233#discussion_r78142084", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4233", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/78142084"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4233#discussion_r78142084"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4233"}}, "body_html": "<p>Also check that <code>cuda_version</code> is non-empty here?</p>", "body_text": "Also check that cuda_version is non-empty here?"}
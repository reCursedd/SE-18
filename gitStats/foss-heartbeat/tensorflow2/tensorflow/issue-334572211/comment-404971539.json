{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/404971539", "html_url": "https://github.com/tensorflow/tensorflow/issues/20192#issuecomment-404971539", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20192", "id": 404971539, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDk3MTUzOQ==", "user": {"login": "shashishekhar", "id": 1162712, "node_id": "MDQ6VXNlcjExNjI3MTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1162712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shashishekhar", "html_url": "https://github.com/shashishekhar", "followers_url": "https://api.github.com/users/shashishekhar/followers", "following_url": "https://api.github.com/users/shashishekhar/following{/other_user}", "gists_url": "https://api.github.com/users/shashishekhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/shashishekhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shashishekhar/subscriptions", "organizations_url": "https://api.github.com/users/shashishekhar/orgs", "repos_url": "https://api.github.com/users/shashishekhar/repos", "events_url": "https://api.github.com/users/shashishekhar/events{/privacy}", "received_events_url": "https://api.github.com/users/shashishekhar/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-13T22:42:22Z", "updated_at": "2018-07-13T22:43:00Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Looks like this is due to Android API level, which causes this error. With recent versions of NDK these errors happen if one is compiling with NDK API level below &lt; 21.</p>\n<p>I can fix the error if I change tensorflow/.tf_configure.bazelrc to</p>\n<p>build --action_env ANDROID_NDK_API_LEVEL=21</p>\n<p>It also seems that NDK API level parsing logic is incorrect in configure.py:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/configure.py#L674\">https://github.com/tensorflow/tensorflow/blob/master/configure.py#L674</a></p>\n<p>Right now it parses the NDK version in sources.properties.<br>\nInstead it should get the API level lists from:<br>\nusing something like:<br>\nls $ANDROID_NDK_PATH/platforms | cut -d '-' -f 2 | sort -n | tail -1<br>\n<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1299636\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/case540\">@case540</a> , <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=32465472\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/angersson\">@angersson</a>  this logic needs to be updated.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=36672340\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dimitryn\">@dimitryn</a> , <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=390667\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kismeter\">@kismeter</a> : To get you unblocked, can you try to update ANDROID_NDK_API_LEVEL in .tf_configure.bazelrc to set to 21.<br>\nIn the mean time, we fix this issue correctly.</p>", "body_text": "Looks like this is due to Android API level, which causes this error. With recent versions of NDK these errors happen if one is compiling with NDK API level below < 21.\nI can fix the error if I change tensorflow/.tf_configure.bazelrc to\nbuild --action_env ANDROID_NDK_API_LEVEL=21\nIt also seems that NDK API level parsing logic is incorrect in configure.py:\nhttps://github.com/tensorflow/tensorflow/blob/master/configure.py#L674\nRight now it parses the NDK version in sources.properties.\nInstead it should get the API level lists from:\nusing something like:\nls $ANDROID_NDK_PATH/platforms | cut -d '-' -f 2 | sort -n | tail -1\n@case540 , @angersson  this logic needs to be updated.\n@dimitryn , @kismeter : To get you unblocked, can you try to update ANDROID_NDK_API_LEVEL in .tf_configure.bazelrc to set to 21.\nIn the mean time, we fix this issue correctly.", "body": "Looks like this is due to Android API level, which causes this error. With recent versions of NDK these errors happen if one is compiling with NDK API level below < 21. \r\n\r\nI can fix the error if I change tensorflow/.tf_configure.bazelrc to\r\n\r\nbuild --action_env ANDROID_NDK_API_LEVEL=21\r\n\r\nIt also seems that NDK API level parsing logic is incorrect in configure.py:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/configure.py#L674\r\n\r\nRight now it parses the NDK version in sources.properties.\r\nInstead it should get the API level lists from:\r\nusing something like:\r\nls $ANDROID_NDK_PATH/platforms | cut -d '-' -f 2 | sort -n | tail -1\r\n@case540 , @angersson  this logic needs to be updated.\r\n\r\n@dimitryn , @kismeter : To get you unblocked, can you try to update ANDROID_NDK_API_LEVEL in .tf_configure.bazelrc to set to 21.\r\nIn the mean time, we fix this issue correctly.\r\n\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20192", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20192/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20192/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20192/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20192", "id": 334572211, "node_id": "MDU6SXNzdWUzMzQ1NzIyMTE=", "number": 20192, "title": "tensorflow lite with ndk 17 compilatoin failed", "user": {"login": "dimitryn", "id": 36672340, "node_id": "MDQ6VXNlcjM2NjcyMzQw", "avatar_url": "https://avatars3.githubusercontent.com/u/36672340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dimitryn", "html_url": "https://github.com/dimitryn", "followers_url": "https://api.github.com/users/dimitryn/followers", "following_url": "https://api.github.com/users/dimitryn/following{/other_user}", "gists_url": "https://api.github.com/users/dimitryn/gists{/gist_id}", "starred_url": "https://api.github.com/users/dimitryn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dimitryn/subscriptions", "organizations_url": "https://api.github.com/users/dimitryn/orgs", "repos_url": "https://api.github.com/users/dimitryn/repos", "events_url": "https://api.github.com/users/dimitryn/events{/privacy}", "received_events_url": "https://api.github.com/users/dimitryn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "case540", "id": 1299636, "node_id": "MDQ6VXNlcjEyOTk2MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1299636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/case540", "html_url": "https://github.com/case540", "followers_url": "https://api.github.com/users/case540/followers", "following_url": "https://api.github.com/users/case540/following{/other_user}", "gists_url": "https://api.github.com/users/case540/gists{/gist_id}", "starred_url": "https://api.github.com/users/case540/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/case540/subscriptions", "organizations_url": "https://api.github.com/users/case540/orgs", "repos_url": "https://api.github.com/users/case540/repos", "events_url": "https://api.github.com/users/case540/events{/privacy}", "received_events_url": "https://api.github.com/users/case540/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "case540", "id": 1299636, "node_id": "MDQ6VXNlcjEyOTk2MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1299636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/case540", "html_url": "https://github.com/case540", "followers_url": "https://api.github.com/users/case540/followers", "following_url": "https://api.github.com/users/case540/following{/other_user}", "gists_url": "https://api.github.com/users/case540/gists{/gist_id}", "starred_url": "https://api.github.com/users/case540/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/case540/subscriptions", "organizations_url": "https://api.github.com/users/case540/orgs", "repos_url": "https://api.github.com/users/case540/repos", "events_url": "https://api.github.com/users/case540/events{/privacy}", "received_events_url": "https://api.github.com/users/case540/received_events", "type": "User", "site_admin": false}, {"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-06-21T16:40:04Z", "updated_at": "2018-08-07T15:32:25Z", "closed_at": "2018-07-16T10:54:43Z", "author_association": "NONE", "body_html": "<p>Hi ,  I took latest tensorflow sources from github and try to build tensorflow lite.<br>\nThere was error compilation.</p>\n<p>We upgraded our NDK version from 16 to 17 couple weeks ago and tensorflow lite compiled <strong>without any error</strong>. But latest sources from today failed to compile.</p>\n<pre><code>INFO: Found 1 target...\nERROR: XXX/tensorflow/contrib/lite/kernels/BUILD:57:1: C++ compilation of rule '//tensorflow/contrib/lite/kernels:gemm_support' failed (Exit 1)\nIn file included from tensorflow/contrib/lite/kernels/gemm_support.cc:15:\nIn file included from ./tensorflow/contrib/lite/kernels/gemm_support.h:18:\nIn file included from external/gemmlowp/public/gemmlowp.h:19:\nIn file included from external/gemmlowp/public/../internal/dispatch_gemm_shape.h:20:\nIn file included from external/gemmlowp/public/../internal/../internal/kernel_default.h:22:\nIn file included from external/gemmlowp/public/../internal/common.h:26:\nIn file included from external/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/cmath:305:\nIn file included from external/androidndk/ndk/sources/android/support/include/math.h:32:\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:93: error: no member named 'log2f' in the global namespace\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\n                                                                                          ~~^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:93: error: no member named 'log2l' in the global namespace\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\n                                                                                          ~~^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1308:38: error: call to 'log2' is ambiguous\nlog2(_A1 __lcpp_x) _NOEXCEPT {return ::log2((double)__lcpp_x);}\n                                     ^~~~~~\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\n                                             ^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\n                                             ^\n3 errors generated.\nTarget //tensorflow/contrib/lite:libtensorflowLite.so failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 60.727s, Critical Path: 13.01s\nINFO: 19 processes, local.\nFAILED: Build did NOT complete successfully\n</code></pre>\n<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nNo</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nsources</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\nmaster</li>\n<li><strong>Python version</strong>:<br>\n2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.14</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nNDK 17</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nNo</li>\n<li><strong>GPU model and memory</strong>:<br>\nNo</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nbazel build //tensorflow/contrib/lite:framework --crosstool_top=//external:android/crosstool --cpu=arm64-v8a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --cxxopt=\"-std=c++14\"</li>\n</ul>\n<p>Thanks for help</p>", "body_text": "Hi ,  I took latest tensorflow sources from github and try to build tensorflow lite.\nThere was error compilation.\nWe upgraded our NDK version from 16 to 17 couple weeks ago and tensorflow lite compiled without any error. But latest sources from today failed to compile.\nINFO: Found 1 target...\nERROR: XXX/tensorflow/contrib/lite/kernels/BUILD:57:1: C++ compilation of rule '//tensorflow/contrib/lite/kernels:gemm_support' failed (Exit 1)\nIn file included from tensorflow/contrib/lite/kernels/gemm_support.cc:15:\nIn file included from ./tensorflow/contrib/lite/kernels/gemm_support.h:18:\nIn file included from external/gemmlowp/public/gemmlowp.h:19:\nIn file included from external/gemmlowp/public/../internal/dispatch_gemm_shape.h:20:\nIn file included from external/gemmlowp/public/../internal/../internal/kernel_default.h:22:\nIn file included from external/gemmlowp/public/../internal/common.h:26:\nIn file included from external/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/cmath:305:\nIn file included from external/androidndk/ndk/sources/android/support/include/math.h:32:\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:93: error: no member named 'log2f' in the global namespace\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\n                                                                                          ~~^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:93: error: no member named 'log2l' in the global namespace\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\n                                                                                          ~~^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1308:38: error: call to 'log2' is ambiguous\nlog2(_A1 __lcpp_x) _NOEXCEPT {return ::log2((double)__lcpp_x);}\n                                     ^~~~~~\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\n                                             ^\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\n                                             ^\n3 errors generated.\nTarget //tensorflow/contrib/lite:libtensorflowLite.so failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 60.727s, Critical Path: 13.01s\nINFO: 19 processes, local.\nFAILED: Build did NOT complete successfully\n\n\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nNo\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu\nTensorFlow installed from (source or binary):\nsources\nTensorFlow version (use command below):\nmaster\nPython version:\n2.7\nBazel version (if compiling from source):\n0.14\nGCC/Compiler version (if compiling from source):\nNDK 17\nCUDA/cuDNN version:\nNo\nGPU model and memory:\nNo\nExact command to reproduce:\nbazel build //tensorflow/contrib/lite:framework --crosstool_top=//external:android/crosstool --cpu=arm64-v8a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --cxxopt=\"-std=c++14\"\n\nThanks for help", "body": "Hi ,  I took latest tensorflow sources from github and try to build tensorflow lite.\r\nThere was error compilation.\r\n\r\nWe upgraded our NDK version from 16 to 17 couple weeks ago and tensorflow lite compiled **without any error**. But latest sources from today failed to compile.\r\n\r\n\r\n\r\n```\r\nINFO: Found 1 target...\r\nERROR: XXX/tensorflow/contrib/lite/kernels/BUILD:57:1: C++ compilation of rule '//tensorflow/contrib/lite/kernels:gemm_support' failed (Exit 1)\r\nIn file included from tensorflow/contrib/lite/kernels/gemm_support.cc:15:\r\nIn file included from ./tensorflow/contrib/lite/kernels/gemm_support.h:18:\r\nIn file included from external/gemmlowp/public/gemmlowp.h:19:\r\nIn file included from external/gemmlowp/public/../internal/dispatch_gemm_shape.h:20:\r\nIn file included from external/gemmlowp/public/../internal/../internal/kernel_default.h:22:\r\nIn file included from external/gemmlowp/public/../internal/common.h:26:\r\nIn file included from external/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/cmath:305:\r\nIn file included from external/androidndk/ndk/sources/android/support/include/math.h:32:\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:93: error: no member named 'log2f' in the global namespace\r\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\r\n                                                                                          ~~^\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:93: error: no member named 'log2l' in the global namespace\r\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\r\n                                                                                          ~~^\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1308:38: error: call to 'log2' is ambiguous\r\nlog2(_A1 __lcpp_x) _NOEXCEPT {return ::log2((double)__lcpp_x);}\r\n                                     ^~~~~~\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1302:46: note: candidate function\r\ninline _LIBCPP_INLINE_VISIBILITY float       log2(float __lcpp_x) _NOEXCEPT       {return ::log2f(__lcpp_x);}\r\n                                             ^\r\nexternal/androidndk/ndk/sources/cxx-stl/llvm-libc++/include/math.h:1303:46: note: candidate function\r\ninline _LIBCPP_INLINE_VISIBILITY long double log2(long double __lcpp_x) _NOEXCEPT {return ::log2l(__lcpp_x);}\r\n                                             ^\r\n3 errors generated.\r\nTarget //tensorflow/contrib/lite:libtensorflowLite.so failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 60.727s, Critical Path: 13.01s\r\nINFO: 19 processes, local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNo\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu\r\n- **TensorFlow installed from (source or binary)**:\r\nsources \r\n- **TensorFlow version (use command below)**:\r\nmaster\r\n- **Python version**: \r\n2.7\r\n- **Bazel version (if compiling from source)**:\r\n0.14\r\n- **GCC/Compiler version (if compiling from source)**:\r\nNDK 17\r\n- **CUDA/cuDNN version**:\r\nNo\r\n- **GPU model and memory**:\r\nNo\r\n- **Exact command to reproduce**:\r\nbazel build //tensorflow/contrib/lite:framework --crosstool_top=//external:android/crosstool --cpu=arm64-v8a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --cxxopt=\"-std=c++14\"\r\n\r\nThanks for help\r\n"}
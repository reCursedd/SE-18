{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/315231241", "html_url": "https://github.com/tensorflow/tensorflow/issues/11489#issuecomment-315231241", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11489", "id": 315231241, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTIzMTI0MQ==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-13T23:44:45Z", "updated_at": "2017-07-13T23:44:45Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I believe that <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=463737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vrv\">@vrv</a> or I made a conscious decision not to update colocation constraint attrs in <code>tf.import_graph_def()</code>, so the fact that the <code>loc:@ToFloat</code> is left in there is \"working as intended\".</p>\n<p>I just tried to replicate this, and it looks like the error is not raised if you don't perform the second <code>graph_util.convert_variables_to_constants()</code>. It looks like that function leaves the graph in an inconsistent state (i.e. with a dangling colocation constraint) because it is unaware of colocation constraints.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=161459\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/petewarden\">@petewarden</a> Do you have any opinions on how colocation constraints should be handled in <code>graph_util.convert_variables_to_constants()</code>?</p>", "body_text": "I believe that @vrv or I made a conscious decision not to update colocation constraint attrs in tf.import_graph_def(), so the fact that the loc:@ToFloat is left in there is \"working as intended\".\nI just tried to replicate this, and it looks like the error is not raised if you don't perform the second graph_util.convert_variables_to_constants(). It looks like that function leaves the graph in an inconsistent state (i.e. with a dangling colocation constraint) because it is unaware of colocation constraints.\n@petewarden Do you have any opinions on how colocation constraints should be handled in graph_util.convert_variables_to_constants()?", "body": "I believe that @vrv or I made a conscious decision not to update colocation constraint attrs in `tf.import_graph_def()`, so the fact that the `loc:@ToFloat` is left in there is \"working as intended\".\r\n\r\nI just tried to replicate this, and it looks like the error is not raised if you don't perform the second `graph_util.convert_variables_to_constants()`. It looks like that function leaves the graph in an inconsistent state (i.e. with a dangling colocation constraint) because it is unaware of colocation constraints.\r\n\r\n@petewarden Do you have any opinions on how colocation constraints should be handled in `graph_util.convert_variables_to_constants()`?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/134621385", "pull_request_review_id": 57934729, "id": 134621385, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNDYyMTM4NQ==", "diff_hunk": "@@ -77,9 +106,10 @@ TEST_F(GradientsTest, OneMatMul) {\n   for (const bool expected : {false, true}) {\n     const Scope& scope = expected ? scope_expected_ : scope_test_;\n     // Construct forward graph.\n-    auto x = Const(scope, {{1.0, 2.0}, {3.0, 4.0}});\n-    auto y = Const(scope, {{1.0, 0.0}, {0.0, 1.0}});\n+    auto x = ThreeNodeVariable(scope, {{1.0, 2.0}, {3.0, 4.0}});", "path": "tensorflow/cc/framework/gradients_test.cc", "position": null, "original_position": 52, "commit_id": "47e093dd36ff74c9ab8a3b2728d4c0c5331f1bef", "original_commit_id": "b71053e0984eb4ad34cad72c50fe80b39625afab", "user": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "body": "Please keep the existing tests as-is, unless there's a good reason to switch to ThreeNodeVariable (which I don't think there is, since we're take the gradient w.r.t. to the Const nodes so it shouldn't make a difference). The Const nodes are simpler to reason about, and also your changes make the comment diagrams inaccurate.\r\n\r\nInstead, can you add a new test case that repros the problem? This should make it easier to see the potential problem, and should also remove the need for the VariableHelper class and multiple inheritance.", "created_at": "2017-08-22T22:55:24Z", "updated_at": "2017-08-29T21:01:29Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12397#discussion_r134621385", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12397", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/134621385"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12397#discussion_r134621385"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12397"}}, "body_html": "<p>Please keep the existing tests as-is, unless there's a good reason to switch to ThreeNodeVariable (which I don't think there is, since we're take the gradient w.r.t. to the Const nodes so it shouldn't make a difference). The Const nodes are simpler to reason about, and also your changes make the comment diagrams inaccurate.</p>\n<p>Instead, can you add a new test case that repros the problem? This should make it easier to see the potential problem, and should also remove the need for the VariableHelper class and multiple inheritance.</p>", "body_text": "Please keep the existing tests as-is, unless there's a good reason to switch to ThreeNodeVariable (which I don't think there is, since we're take the gradient w.r.t. to the Const nodes so it shouldn't make a difference). The Const nodes are simpler to reason about, and also your changes make the comment diagrams inaccurate.\nInstead, can you add a new test case that repros the problem? This should make it easier to see the potential problem, and should also remove the need for the VariableHelper class and multiple inheritance."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2037", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2037/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2037/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2037/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2037", "id": 149814648, "node_id": "MDU6SXNzdWUxNDk4MTQ2NDg=", "number": 2037, "title": "NaN problem on tutorials_example_trainer with tensorflow 0.8", "user": {"login": "ernest-tg", "id": 4499498, "node_id": "MDQ6VXNlcjQ0OTk0OTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/4499498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ernest-tg", "html_url": "https://github.com/ernest-tg", "followers_url": "https://api.github.com/users/ernest-tg/followers", "following_url": "https://api.github.com/users/ernest-tg/following{/other_user}", "gists_url": "https://api.github.com/users/ernest-tg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ernest-tg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ernest-tg/subscriptions", "organizations_url": "https://api.github.com/users/ernest-tg/orgs", "repos_url": "https://api.github.com/users/ernest-tg/repos", "events_url": "https://api.github.com/users/ernest-tg/events{/privacy}", "received_events_url": "https://api.github.com/users/ernest-tg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 30, "created_at": "2016-04-20T16:09:25Z", "updated_at": "2017-06-06T02:44:14Z", "closed_at": "2016-07-19T17:57:19Z", "author_association": "NONE", "body_html": "<p>I worked for several months on versions of tensorflow installed from sources. Today, I tried to upgrade it to 0.8. The installation seemed to go fine.  \"bazel-bin/tensorflow/cc/tutorials_example_trainer\" gave the expected result. However, the output of \"bazel-bin/tensorflow/cc/tutorials_example_trainer --use_gpu\" is unexpected: the first lines seem to be fine but then NaN values appear, the proportion of NaN values increases until there is nothing but NaN values (see the first half of the output here <a href=\"http://pastebin.com/EhuD2Z5S\" rel=\"nofollow\">http://pastebin.com/EhuD2Z5S</a> , the remaining lines are only \"nan\" lines which I omitted because the total output exceeded pastebin limit).</p>\n<p>I expected this tutorials_example_trainer to either work seamlessly or not at all (if I provided wrong paths for CUDA and CuDNN), but this in-between puzzles me.</p>\n<p>I tried to debug it with my own programs, but I can not import tensorflow :</p>\n<pre><code>import tensorflow\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"tensorflow/__init__.py\", line 23, in &lt;module&gt;\n    from tensorflow.python import *\n  File \"tensorflow/python/__init__.py\", line 45, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\nImportError: cannot import name pywrap_tensorflow\n</code></pre>\n<p>I am not sure whether the two problems are related.</p>\n<p>In the case I made a mistake during configuration, I typed:</p>\n<pre><code>matthieu@gpu2:~/external/tensorflow$ ./configure \nPlease specify the location of python. [Default is /usr/bin/python]: \nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc nvcc should use as the host compiler. [Default is /usr/bin/gcc]: \nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.0\nPlease specify the location where CUDA 7.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \nPlease specify the Cudnn version you want to use. [Leave empty to use system default]: 4\nPlease specify the location where cuDNN 4 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: \nSetting up Cuda include\nSetting up Cuda lib64\nSetting up Cuda bin\nSetting up Cuda nvvm\nSetting up CUPTI include\nSetting up CUPTI lib64\nConfiguration finished\"\n</code></pre>\n<p>I hope this issue belongs here, else I will try stackoverflow.</p>\n<p>Thanks in advance,</p>\n<h3>Environment info</h3>\n<p>I work on ubuntu 14.04</p>\n<p>With CUDA 7.0 and cuDNN 4</p>\n<pre><code>ls /usr/local/cuda-7.0/lib/libcud*        \n/usr/local/cuda-7.0/lib/libcudadevrt.a  /usr/local/cuda-7.0/lib/libcudart.so.7.0     /usr/local/cuda-7.0/lib/libcudart_static.a\n/usr/local/cuda-7.0/lib/libcudart.so    /usr/local/cuda-7.0/lib/libcudart.so.7.0.28\n</code></pre>\n<p>Commit hash: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/e1c017624fd6bd8562c1da27e0014b32f389b524/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/e1c017624fd6bd8562c1da27e0014b32f389b524\"><tt>e1c0176</tt></a></p>", "body_text": "I worked for several months on versions of tensorflow installed from sources. Today, I tried to upgrade it to 0.8. The installation seemed to go fine.  \"bazel-bin/tensorflow/cc/tutorials_example_trainer\" gave the expected result. However, the output of \"bazel-bin/tensorflow/cc/tutorials_example_trainer --use_gpu\" is unexpected: the first lines seem to be fine but then NaN values appear, the proportion of NaN values increases until there is nothing but NaN values (see the first half of the output here http://pastebin.com/EhuD2Z5S , the remaining lines are only \"nan\" lines which I omitted because the total output exceeded pastebin limit).\nI expected this tutorials_example_trainer to either work seamlessly or not at all (if I provided wrong paths for CUDA and CuDNN), but this in-between puzzles me.\nI tried to debug it with my own programs, but I can not import tensorflow :\nimport tensorflow\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"tensorflow/__init__.py\", line 23, in <module>\n    from tensorflow.python import *\n  File \"tensorflow/python/__init__.py\", line 45, in <module>\n    from tensorflow.python import pywrap_tensorflow\nImportError: cannot import name pywrap_tensorflow\n\nI am not sure whether the two problems are related.\nIn the case I made a mistake during configuration, I typed:\nmatthieu@gpu2:~/external/tensorflow$ ./configure \nPlease specify the location of python. [Default is /usr/bin/python]: \nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc nvcc should use as the host compiler. [Default is /usr/bin/gcc]: \nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.0\nPlease specify the location where CUDA 7.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \nPlease specify the Cudnn version you want to use. [Leave empty to use system default]: 4\nPlease specify the location where cuDNN 4 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: \nSetting up Cuda include\nSetting up Cuda lib64\nSetting up Cuda bin\nSetting up Cuda nvvm\nSetting up CUPTI include\nSetting up CUPTI lib64\nConfiguration finished\"\n\nI hope this issue belongs here, else I will try stackoverflow.\nThanks in advance,\nEnvironment info\nI work on ubuntu 14.04\nWith CUDA 7.0 and cuDNN 4\nls /usr/local/cuda-7.0/lib/libcud*        \n/usr/local/cuda-7.0/lib/libcudadevrt.a  /usr/local/cuda-7.0/lib/libcudart.so.7.0     /usr/local/cuda-7.0/lib/libcudart_static.a\n/usr/local/cuda-7.0/lib/libcudart.so    /usr/local/cuda-7.0/lib/libcudart.so.7.0.28\n\nCommit hash: e1c0176", "body": "I worked for several months on versions of tensorflow installed from sources. Today, I tried to upgrade it to 0.8. The installation seemed to go fine.  \"bazel-bin/tensorflow/cc/tutorials_example_trainer\" gave the expected result. However, the output of \"bazel-bin/tensorflow/cc/tutorials_example_trainer --use_gpu\" is unexpected: the first lines seem to be fine but then NaN values appear, the proportion of NaN values increases until there is nothing but NaN values (see the first half of the output here http://pastebin.com/EhuD2Z5S , the remaining lines are only \"nan\" lines which I omitted because the total output exceeded pastebin limit).\n\nI expected this tutorials_example_trainer to either work seamlessly or not at all (if I provided wrong paths for CUDA and CuDNN), but this in-between puzzles me.\n\nI tried to debug it with my own programs, but I can not import tensorflow :\n\n```\nimport tensorflow\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"tensorflow/__init__.py\", line 23, in <module>\n    from tensorflow.python import *\n  File \"tensorflow/python/__init__.py\", line 45, in <module>\n    from tensorflow.python import pywrap_tensorflow\nImportError: cannot import name pywrap_tensorflow\n```\n\nI am not sure whether the two problems are related.\n\nIn the case I made a mistake during configuration, I typed:\n\n```\nmatthieu@gpu2:~/external/tensorflow$ ./configure \nPlease specify the location of python. [Default is /usr/bin/python]: \nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc nvcc should use as the host compiler. [Default is /usr/bin/gcc]: \nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.0\nPlease specify the location where CUDA 7.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \nPlease specify the Cudnn version you want to use. [Leave empty to use system default]: 4\nPlease specify the location where cuDNN 4 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: \nSetting up Cuda include\nSetting up Cuda lib64\nSetting up Cuda bin\nSetting up Cuda nvvm\nSetting up CUPTI include\nSetting up CUPTI lib64\nConfiguration finished\"\n```\n\nI hope this issue belongs here, else I will try stackoverflow.\n\nThanks in advance,\n### Environment info\n\nI work on ubuntu 14.04\n\nWith CUDA 7.0 and cuDNN 4\n\n```\nls /usr/local/cuda-7.0/lib/libcud*        \n/usr/local/cuda-7.0/lib/libcudadevrt.a  /usr/local/cuda-7.0/lib/libcudart.so.7.0     /usr/local/cuda-7.0/lib/libcudart_static.a\n/usr/local/cuda-7.0/lib/libcudart.so    /usr/local/cuda-7.0/lib/libcudart.so.7.0.28\n```\n\nCommit hash: e1c017624fd6bd8562c1da27e0014b32f389b524\n"}
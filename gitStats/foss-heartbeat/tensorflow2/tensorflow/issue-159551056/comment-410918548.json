{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/410918548", "html_url": "https://github.com/tensorflow/tensorflow/issues/2774#issuecomment-410918548", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2774", "id": 410918548, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDkxODU0OA==", "user": {"login": "TobiasLee", "id": 20009381, "node_id": "MDQ6VXNlcjIwMDA5Mzgx", "avatar_url": "https://avatars0.githubusercontent.com/u/20009381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiasLee", "html_url": "https://github.com/TobiasLee", "followers_url": "https://api.github.com/users/TobiasLee/followers", "following_url": "https://api.github.com/users/TobiasLee/following{/other_user}", "gists_url": "https://api.github.com/users/TobiasLee/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiasLee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiasLee/subscriptions", "organizations_url": "https://api.github.com/users/TobiasLee/orgs", "repos_url": "https://api.github.com/users/TobiasLee/repos", "events_url": "https://api.github.com/users/TobiasLee/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiasLee/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-07T03:07:08Z", "updated_at": "2018-08-07T03:42:00Z", "author_association": "NONE", "body_html": "<p>Yeah, I met this problem, too. I'm doing sampling from my vocabulary distribution:</p>\n<div class=\"highlight highlight-source-python\"><pre>next_token <span class=\"pl-k\">=</span> tf.cast(tf.reshape(tf.multinomial(log_prob, <span class=\"pl-c1\">1</span>), [<span class=\"pl-c1\">self</span>.batch_size]), tf.int32)</pre></div>\n<p>and the token sampled by multinomial is out of vocabulary.</p>", "body_text": "Yeah, I met this problem, too. I'm doing sampling from my vocabulary distribution:\nnext_token = tf.cast(tf.reshape(tf.multinomial(log_prob, 1), [self.batch_size]), tf.int32)\nand the token sampled by multinomial is out of vocabulary.", "body": "Yeah, I met this problem, too. I'm doing sampling from my vocabulary distribution:\r\n```python\r\nnext_token = tf.cast(tf.reshape(tf.multinomial(log_prob, 1), [self.batch_size]), tf.int32)\r\n```\r\nand the token sampled by multinomial is out of vocabulary."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21602", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21602/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21602/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21602/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21602", "id": 350368100, "node_id": "MDU6SXNzdWUzNTAzNjgxMDA=", "number": 21602, "title": "Android build failed using custom tensorflow model. Conflict workspace Error", "user": {"login": "alokranjan007", "id": 19912807, "node_id": "MDQ6VXNlcjE5OTEyODA3", "avatar_url": "https://avatars1.githubusercontent.com/u/19912807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alokranjan007", "html_url": "https://github.com/alokranjan007", "followers_url": "https://api.github.com/users/alokranjan007/followers", "following_url": "https://api.github.com/users/alokranjan007/following{/other_user}", "gists_url": "https://api.github.com/users/alokranjan007/gists{/gist_id}", "starred_url": "https://api.github.com/users/alokranjan007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alokranjan007/subscriptions", "organizations_url": "https://api.github.com/users/alokranjan007/orgs", "repos_url": "https://api.github.com/users/alokranjan007/repos", "events_url": "https://api.github.com/users/alokranjan007/events{/privacy}", "received_events_url": "https://api.github.com/users/alokranjan007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2018-08-14T10:24:37Z", "updated_at": "2018-09-27T18:41:38Z", "closed_at": "2018-09-27T18:41:38Z", "author_association": "NONE", "body_html": "<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes, I have modified no. of classes to be detect while training the model</li>\n<li>**OS Platform and Distribution: 14.04 LTS</li>\n<li><strong>Mobile device if the issue happens on mobile device</strong>: Motoroloa, Android version 7.1.1</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.10.0</li>\n<li><strong>Python version</strong>: 3.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: 7.2.0</li>\n<li><strong>CUDA/cuDNN version</strong>: NA</li>\n<li><strong>GPU model and memory</strong>: 4GB RAM, 64-bit</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I had trained my custom model with different objects for the detection purpose. I had used ssd_mobilenet_v2_coco for my training. I could pull out the object detection on desktop with the customised trained model by using the webcam or passing an image. But I am unable to port it on android app.<br>\nIt is interesting that I am able to convert the file in .tflite format (the one which will be used by bazel) and for android. However, after the app installation it is getting crashed. The app is forcibly closed. It may be noted here that the classifier and speech app is working fine and there is no force shut down, but the problem remained the same with detect app. I then followed this <a href=\"https://medium.com/tensorflow/training-and-serving-a-realtime-mobile-object-detector-in-30-minutes-with-cloud-tpus-b78971cf1193\" rel=\"nofollow\">link</a> for change in the DetectorActivity.java inside  tensorflow/contrib/lite/examples/android/app/src/main/java/org/tensorflow/demo/DetectorActivity.java as below <code>private static final int TF_OD_API_INPUT_SIZE = 300; private static final boolean TF_OD_API_IS_QUANTIZED = true; private static final String TF_OD_API_MODEL_FILE = \"detect.tflite\"; //private static final String TF_OD_API_LABELS_FILE = \"file:///android_asset/coco_labels_list.txt\"; private static final String TF_OD_API_LABELS_FILE = \"file:///android_asset/labelmap.txt\";</code></p>\n<p>where detect.tflite and labelmap.txt both files are from the customized model.</p>\n<p>Then I ran the command<br>\n<code>bazel build -c opt --cxxopt='--std=c++11' \"//tensorflow/contrib/lite/examples/android:tflite_demo\"</code> and this successfully build the apk file and other dependencies. Meanwhile, it showed a conflict error. Errors read as below:<br>\n`CONFLICT: asset:WORKSPACE is provided with ambiguous priority from:<br>\nexternal/tflite_mobilenet/WORKSPACE<br>\nexternal/tflite_conv_actions_frozen/WORKSPACE</p>\n<p>CONFLICT: asset:WORKSPACE is provided with ambiguous priority from:<br>\nexternal/tflite_mobilenet_ssd/WORKSPACE<br>\nexternal/tflite_conv_actions_frozen/WORKSPACE`</p>\n<p>When I tried to build the apk over phone, the app is installed but it is getting closed forcefully. However,  the classifier and speech apps are working perfectly fine.</p>\n<p>NOTE: The pre trained models are working absolutely fine on both desktop and as an app. However, the issue is with importing the custom app on phone.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes, I have modified no. of classes to be detect while training the model\n**OS Platform and Distribution: 14.04 LTS\nMobile device if the issue happens on mobile device: Motoroloa, Android version 7.1.1\nTensorFlow installed from (source or binary): Source\nTensorFlow version (use command below): 1.10.0\nPython version: 3.6\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source): 7.2.0\nCUDA/cuDNN version: NA\nGPU model and memory: 4GB RAM, 64-bit\n\nDescribe the problem\nI had trained my custom model with different objects for the detection purpose. I had used ssd_mobilenet_v2_coco for my training. I could pull out the object detection on desktop with the customised trained model by using the webcam or passing an image. But I am unable to port it on android app.\nIt is interesting that I am able to convert the file in .tflite format (the one which will be used by bazel) and for android. However, after the app installation it is getting crashed. The app is forcibly closed. It may be noted here that the classifier and speech app is working fine and there is no force shut down, but the problem remained the same with detect app. I then followed this link for change in the DetectorActivity.java inside  tensorflow/contrib/lite/examples/android/app/src/main/java/org/tensorflow/demo/DetectorActivity.java as below private static final int TF_OD_API_INPUT_SIZE = 300; private static final boolean TF_OD_API_IS_QUANTIZED = true; private static final String TF_OD_API_MODEL_FILE = \"detect.tflite\"; //private static final String TF_OD_API_LABELS_FILE = \"file:///android_asset/coco_labels_list.txt\"; private static final String TF_OD_API_LABELS_FILE = \"file:///android_asset/labelmap.txt\";\nwhere detect.tflite and labelmap.txt both files are from the customized model.\nThen I ran the command\nbazel build -c opt --cxxopt='--std=c++11' \"//tensorflow/contrib/lite/examples/android:tflite_demo\" and this successfully build the apk file and other dependencies. Meanwhile, it showed a conflict error. Errors read as below:\n`CONFLICT: asset:WORKSPACE is provided with ambiguous priority from:\nexternal/tflite_mobilenet/WORKSPACE\nexternal/tflite_conv_actions_frozen/WORKSPACE\nCONFLICT: asset:WORKSPACE is provided with ambiguous priority from:\nexternal/tflite_mobilenet_ssd/WORKSPACE\nexternal/tflite_conv_actions_frozen/WORKSPACE`\nWhen I tried to build the apk over phone, the app is installed but it is getting closed forcefully. However,  the classifier and speech apps are working perfectly fine.\nNOTE: The pre trained models are working absolutely fine on both desktop and as an app. However, the issue is with importing the custom app on phone.", "body": "\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: \r\n   Yes, I have modified no. of classes to be detect while training the model\r\n- **OS Platform and Distribution: 14.04 LTS\r\n- **Mobile device if the issue happens on mobile device**: Motoroloa, Android version 7.1.1\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: 1.10.0\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**: 7.2.0\r\n- **CUDA/cuDNN version**: NA\r\n- **GPU model and memory**: 4GB RAM, 64-bit\r\n\r\n### Describe the problem\r\nI had trained my custom model with different objects for the detection purpose. I had used ssd_mobilenet_v2_coco for my training. I could pull out the object detection on desktop with the customised trained model by using the webcam or passing an image. But I am unable to port it on android app. \r\nIt is interesting that I am able to convert the file in .tflite format (the one which will be used by bazel) and for android. However, after the app installation it is getting crashed. The app is forcibly closed. It may be noted here that the classifier and speech app is working fine and there is no force shut down, but the problem remained the same with detect app. I then followed this [link](https://medium.com/tensorflow/training-and-serving-a-realtime-mobile-object-detector-in-30-minutes-with-cloud-tpus-b78971cf1193) for change in the DetectorActivity.java inside  tensorflow/contrib/lite/examples/android/app/src/main/java/org/tensorflow/demo/DetectorActivity.java as below `private static final int TF_OD_API_INPUT_SIZE = 300;\r\n  private static final boolean TF_OD_API_IS_QUANTIZED = true;\r\n  private static final String TF_OD_API_MODEL_FILE = \"detect.tflite\";\r\n  //private static final String TF_OD_API_LABELS_FILE = \"file:///android_asset/coco_labels_list.txt\";\r\n  private static final String TF_OD_API_LABELS_FILE = \"file:///android_asset/labelmap.txt\";`\r\n\r\nwhere detect.tflite and labelmap.txt both files are from the customized model.\r\n\r\nThen I ran the command \r\n`bazel build -c opt --cxxopt='--std=c++11' \"//tensorflow/contrib/lite/examples/android:tflite_demo\"` and this successfully build the apk file and other dependencies. Meanwhile, it showed a conflict error. Errors read as below:\r\n`CONFLICT: asset:WORKSPACE is provided with ambiguous priority from:\r\n\texternal/tflite_mobilenet/WORKSPACE\r\n\texternal/tflite_conv_actions_frozen/WORKSPACE\r\n\r\nCONFLICT: asset:WORKSPACE is provided with ambiguous priority from:\r\n\texternal/tflite_mobilenet_ssd/WORKSPACE\r\n\texternal/tflite_conv_actions_frozen/WORKSPACE`\r\n\r\nWhen I tried to build the apk over phone, the app is installed but it is getting closed forcefully. However,  the classifier and speech apps are working perfectly fine.\r\n\r\n\r\nNOTE: The pre trained models are working absolutely fine on both desktop and as an app. However, the issue is with importing the custom app on phone.\r\n\r\n"}
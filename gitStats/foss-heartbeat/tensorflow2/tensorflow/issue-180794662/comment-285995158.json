{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285995158", "html_url": "https://github.com/tensorflow/tensorflow/issues/4742#issuecomment-285995158", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4742", "id": 285995158, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTk5NTE1OA==", "user": {"login": "jbms", "id": 4211946, "node_id": "MDQ6VXNlcjQyMTE5NDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/4211946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbms", "html_url": "https://github.com/jbms", "followers_url": "https://api.github.com/users/jbms/followers", "following_url": "https://api.github.com/users/jbms/following{/other_user}", "gists_url": "https://api.github.com/users/jbms/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbms/subscriptions", "organizations_url": "https://api.github.com/users/jbms/orgs", "repos_url": "https://api.github.com/users/jbms/repos", "events_url": "https://api.github.com/users/jbms/events{/privacy}", "received_events_url": "https://api.github.com/users/jbms/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-13T01:24:59Z", "updated_at": "2017-03-13T01:24:59Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=55744\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ahundt\">@ahundt</a> In tensorflow, \"atrous convolution\" and \"dilated convolution\" are used as synonyms to mean \"dilated convolutions\" as in the <a href=\"https://arxiv.org/abs/1511.07122\" rel=\"nofollow\">Multi-Scale Context Aggregation by Dilated Convolutions</a> paper you cited.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3175743\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/AnishShah\">@AnishShah</a> tf.nn.convolution now provides a more generic interface for atrous convolution for any number of dimensions, and I believe it has slightly more complete shape inference, but there are still cases where it does not infer some of the output shape dimensions even when it could.  If you are going to add better shape inference code, I suggest adding it to tf.nn.convolution, as there is separate work underway (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"207975417\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7545\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/7545/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/7545\">#7545</a>) to make atrous_conv2d simply forward to tf.nn.convolution.</p>\n<p>To fix it you will need to use set_shape function on the output tensors to set the additional shape information.  I think it would be possible to do this inside of with_space_to_batch, specifically on the input_converted tensor and then again on the result_converted tensor.  You will unfortunately have to duplicate some of the work done in calculating the shapes for space_to_batch_nd and batch_to_space_nd.  The reason is that a tensor can either be constant or non-constant, but not partially constant.</p>", "body_text": "@ahundt In tensorflow, \"atrous convolution\" and \"dilated convolution\" are used as synonyms to mean \"dilated convolutions\" as in the Multi-Scale Context Aggregation by Dilated Convolutions paper you cited.\n@AnishShah tf.nn.convolution now provides a more generic interface for atrous convolution for any number of dimensions, and I believe it has slightly more complete shape inference, but there are still cases where it does not infer some of the output shape dimensions even when it could.  If you are going to add better shape inference code, I suggest adding it to tf.nn.convolution, as there is separate work underway (see #7545) to make atrous_conv2d simply forward to tf.nn.convolution.\nTo fix it you will need to use set_shape function on the output tensors to set the additional shape information.  I think it would be possible to do this inside of with_space_to_batch, specifically on the input_converted tensor and then again on the result_converted tensor.  You will unfortunately have to duplicate some of the work done in calculating the shapes for space_to_batch_nd and batch_to_space_nd.  The reason is that a tensor can either be constant or non-constant, but not partially constant.", "body": "@ahundt In tensorflow, \"atrous convolution\" and \"dilated convolution\" are used as synonyms to mean \"dilated convolutions\" as in the [Multi-Scale Context Aggregation by Dilated Convolutions](https://arxiv.org/abs/1511.07122) paper you cited.\r\n\r\n@AnishShah tf.nn.convolution now provides a more generic interface for atrous convolution for any number of dimensions, and I believe it has slightly more complete shape inference, but there are still cases where it does not infer some of the output shape dimensions even when it could.  If you are going to add better shape inference code, I suggest adding it to tf.nn.convolution, as there is separate work underway (see #7545) to make atrous_conv2d simply forward to tf.nn.convolution.\r\n\r\nTo fix it you will need to use set_shape function on the output tensors to set the additional shape information.  I think it would be possible to do this inside of with_space_to_batch, specifically on the input_converted tensor and then again on the result_converted tensor.  You will unfortunately have to duplicate some of the work done in calculating the shapes for space_to_batch_nd and batch_to_space_nd.  The reason is that a tensor can either be constant or non-constant, but not partially constant."}
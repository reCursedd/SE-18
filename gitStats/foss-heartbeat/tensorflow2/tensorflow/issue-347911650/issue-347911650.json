{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21407", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21407/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21407/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21407/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21407", "id": 347911650, "node_id": "MDU6SXNzdWUzNDc5MTE2NTA=", "number": 21407, "title": "Error installing tensorflow from source", "user": {"login": "ptighin", "id": 40065981, "node_id": "MDQ6VXNlcjQwMDY1OTgx", "avatar_url": "https://avatars3.githubusercontent.com/u/40065981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptighin", "html_url": "https://github.com/ptighin", "followers_url": "https://api.github.com/users/ptighin/followers", "following_url": "https://api.github.com/users/ptighin/following{/other_user}", "gists_url": "https://api.github.com/users/ptighin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptighin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptighin/subscriptions", "organizations_url": "https://api.github.com/users/ptighin/orgs", "repos_url": "https://api.github.com/users/ptighin/repos", "events_url": "https://api.github.com/users/ptighin/events{/privacy}", "received_events_url": "https://api.github.com/users/ptighin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2018-08-06T12:55:06Z", "updated_at": "2018-11-20T18:32:42Z", "closed_at": "2018-11-20T18:32:42Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: macOS High Sierra 10.13.6</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Source with CPU-only support</li>\n<li><strong>TensorFlow version (use command below)</strong>: b'v1.9.0-rc2-1183-g1b33df1814' 1.9.0</li>\n<li><strong>Python version</strong>: 3.6.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.15.2</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: gcc version 7.3.0 (MacPorts gcc7 7.3.0_1)</li>\n<li><strong>CUDA/cuDNN version:</strong> N/A</li>\n<li><strong>GPU model and memory:</strong> N/A</li>\n<li><strong>Mobile device:</strong> N/A</li>\n<li><strong>Exact command to reproduce</strong>:<br>\n<code>bazel build --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --verbose_failures //tensorflow/tools/pip_package:build_pip_package</code></li>\n</ul>\n<p>(I used the flag <code>--cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"</code> as suggested at <a href=\"https://www.tensorflow.org/install/install_sources\" rel=\"nofollow\">https://www.tensorflow.org/install/install_sources</a>; removing this flag leads to the same error)</p>\n<h3>Describe the problem</h3>\n<p>The above command yields an error related to gcc (the complete log file is attached):<br>\n<code>ERROR: /private/var/tmp/_bazel_ptighin/1e40e60bad53a8010892ea7aefd4f97f/external/protobuf_archive/BUILD:260:1: Linking of rule '@protobuf_archive//:js_embed' failed (Exit 1): cc_wrapper.sh failed: error executing command (cd /private/var/tmp/_bazel_ptighin/1e40e60bad53a8010892ea7aefd4f97f/execroot/org_tensorflow &amp;&amp; \\ exec env - \\ APPLE_SDK_PLATFORM='' \\ APPLE_SDK_VERSION_OVERRIDE='' \\ PATH=/Users/ptighin/bin:opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin \\ XCODE_VERSION_OVERRIDE=9.4.1 \\ external/local_config_cc/cc_wrapper.sh -fobjc-link-runtime -Wl,-S -o bazel-out/host/bin/external/protobuf_archive/js_embed bazel-out/host/bin/external/protobuf_archive/_objs/js_embed/external/protobuf_archive/src/google/protobuf/compiler/js/embed.o -headerpad_max_install_names -lc++ -no-canonical-prefixes) gcc: error: unrecognized command line option '-fobjc-link-runtime'; did you mean '-fgnu-runtime'? Target //tensorflow/tools/pip_package:build_pip_package failed to build INFO: Elapsed time: 117.328s, Critical Path: 28.23s INFO: 63 processes: 63 local. FAILED: Build did NOT complete successfully</code></p>\n<h3>Source code / logs</h3>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/2262594/logs.txt\">logs.txt</a></p>\n<h3>Temporary solution that worked for me</h3>\n<p>Go to <code>/private/var/tmp/_bazel_&lt;YOUR_USERNAME&gt;/&lt;HASH&gt;/execroot/org_tensorflow/external/local_config_cc/cc_wrapper.sh</code>  (<code>&lt;YOUR_USERNAME&gt;</code> and <code>&lt;HASH&gt;</code> can be found in the error message) and change line 56<br>\n<code>/opt/local/bin/gcc \"$@\"</code> (or wherever your C++ compiler is)<br>\nto<br>\n<code>/opt/local/bin/clang \"$@\"</code> (or wherever your clang compiler is)</p>\n<p>The problem seems to be that the wrapper of the C++-compiler points to gcc but passes clang-type flags.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS High Sierra 10.13.6\nTensorFlow installed from (source or binary): Source with CPU-only support\nTensorFlow version (use command below): b'v1.9.0-rc2-1183-g1b33df1814' 1.9.0\nPython version: 3.6.6\nBazel version (if compiling from source): 0.15.2\nGCC/Compiler version (if compiling from source): gcc version 7.3.0 (MacPorts gcc7 7.3.0_1)\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nMobile device: N/A\nExact command to reproduce:\nbazel build --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --verbose_failures //tensorflow/tools/pip_package:build_pip_package\n\n(I used the flag --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" as suggested at https://www.tensorflow.org/install/install_sources; removing this flag leads to the same error)\nDescribe the problem\nThe above command yields an error related to gcc (the complete log file is attached):\nERROR: /private/var/tmp/_bazel_ptighin/1e40e60bad53a8010892ea7aefd4f97f/external/protobuf_archive/BUILD:260:1: Linking of rule '@protobuf_archive//:js_embed' failed (Exit 1): cc_wrapper.sh failed: error executing command (cd /private/var/tmp/_bazel_ptighin/1e40e60bad53a8010892ea7aefd4f97f/execroot/org_tensorflow && \\ exec env - \\ APPLE_SDK_PLATFORM='' \\ APPLE_SDK_VERSION_OVERRIDE='' \\ PATH=/Users/ptighin/bin:opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin \\ XCODE_VERSION_OVERRIDE=9.4.1 \\ external/local_config_cc/cc_wrapper.sh -fobjc-link-runtime -Wl,-S -o bazel-out/host/bin/external/protobuf_archive/js_embed bazel-out/host/bin/external/protobuf_archive/_objs/js_embed/external/protobuf_archive/src/google/protobuf/compiler/js/embed.o -headerpad_max_install_names -lc++ -no-canonical-prefixes) gcc: error: unrecognized command line option '-fobjc-link-runtime'; did you mean '-fgnu-runtime'? Target //tensorflow/tools/pip_package:build_pip_package failed to build INFO: Elapsed time: 117.328s, Critical Path: 28.23s INFO: 63 processes: 63 local. FAILED: Build did NOT complete successfully\nSource code / logs\nlogs.txt\nTemporary solution that worked for me\nGo to /private/var/tmp/_bazel_<YOUR_USERNAME>/<HASH>/execroot/org_tensorflow/external/local_config_cc/cc_wrapper.sh  (<YOUR_USERNAME> and <HASH> can be found in the error message) and change line 56\n/opt/local/bin/gcc \"$@\" (or wherever your C++ compiler is)\nto\n/opt/local/bin/clang \"$@\" (or wherever your clang compiler is)\nThe problem seems to be that the wrapper of the C++-compiler points to gcc but passes clang-type flags.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: macOS High Sierra 10.13.6\r\n- **TensorFlow installed from (source or binary)**: Source with CPU-only support\r\n- **TensorFlow version (use command below)**: b'v1.9.0-rc2-1183-g1b33df1814' 1.9.0\r\n- **Python version**: 3.6.6\r\n- **Bazel version (if compiling from source)**: 0.15.2\r\n- **GCC/Compiler version (if compiling from source)**: gcc version 7.3.0 (MacPorts gcc7 7.3.0_1)\r\n- **CUDA/cuDNN version:** N/A\r\n- **GPU model and memory:** N/A\r\n- **Mobile device:** N/A\r\n- **Exact command to reproduce**: \r\n`bazel build --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --verbose_failures //tensorflow/tools/pip_package:build_pip_package`\r\n\r\n(I used the flag `--cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"` as suggested at https://www.tensorflow.org/install/install_sources; removing this flag leads to the same error)\r\n\r\n### Describe the problem\r\nThe above command yields an error related to gcc (the complete log file is attached):\r\n`ERROR: /private/var/tmp/_bazel_ptighin/1e40e60bad53a8010892ea7aefd4f97f/external/protobuf_archive/BUILD:260:1: Linking of rule '@protobuf_archive//:js_embed' failed (Exit 1): cc_wrapper.sh failed: error executing command\r\n  (cd /private/var/tmp/_bazel_ptighin/1e40e60bad53a8010892ea7aefd4f97f/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    APPLE_SDK_PLATFORM='' \\\r\n    APPLE_SDK_VERSION_OVERRIDE='' \\\r\n    PATH=/Users/ptighin/bin:opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin \\\r\n    XCODE_VERSION_OVERRIDE=9.4.1 \\\r\n  external/local_config_cc/cc_wrapper.sh -fobjc-link-runtime -Wl,-S -o bazel-out/host/bin/external/protobuf_archive/js_embed bazel-out/host/bin/external/protobuf_archive/_objs/js_embed/external/protobuf_archive/src/google/protobuf/compiler/js/embed.o -headerpad_max_install_names -lc++ -no-canonical-prefixes)\r\ngcc: error: unrecognized command line option '-fobjc-link-runtime'; did you mean '-fgnu-runtime'?\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 117.328s, Critical Path: 28.23s\r\nINFO: 63 processes: 63 local.\r\nFAILED: Build did NOT complete successfully`\r\n\r\n### Source code / logs\r\n[logs.txt](https://github.com/tensorflow/tensorflow/files/2262594/logs.txt)\r\n\r\n### Temporary solution that worked for me\r\nGo to `/private/var/tmp/_bazel_<YOUR_USERNAME>/<HASH>/execroot/org_tensorflow/external/local_config_cc/cc_wrapper.sh`  (`<YOUR_USERNAME>` and `<HASH>` can be found in the error message) and change line 56\r\n`/opt/local/bin/gcc \"$@\"` (or wherever your C++ compiler is)\r\nto\r\n`/opt/local/bin/clang \"$@\"` (or wherever your clang compiler is)\r\n\r\nThe problem seems to be that the wrapper of the C++-compiler points to gcc but passes clang-type flags."}
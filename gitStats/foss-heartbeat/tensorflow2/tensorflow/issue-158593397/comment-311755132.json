{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/311755132", "html_url": "https://github.com/tensorflow/tensorflow/issues/2680#issuecomment-311755132", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2680", "id": 311755132, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTc1NTEzMg==", "user": {"login": "Mr-Grieves", "id": 19175336, "node_id": "MDQ6VXNlcjE5MTc1MzM2", "avatar_url": "https://avatars2.githubusercontent.com/u/19175336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mr-Grieves", "html_url": "https://github.com/Mr-Grieves", "followers_url": "https://api.github.com/users/Mr-Grieves/followers", "following_url": "https://api.github.com/users/Mr-Grieves/following{/other_user}", "gists_url": "https://api.github.com/users/Mr-Grieves/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mr-Grieves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mr-Grieves/subscriptions", "organizations_url": "https://api.github.com/users/Mr-Grieves/orgs", "repos_url": "https://api.github.com/users/Mr-Grieves/repos", "events_url": "https://api.github.com/users/Mr-Grieves/events{/privacy}", "received_events_url": "https://api.github.com/users/Mr-Grieves/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-28T18:58:13Z", "updated_at": "2017-06-28T18:58:13Z", "author_association": "NONE", "body_html": "<p>Can you be more specific about implementing this fix? Because it is not working for me. I've tried changing:<br>\n<strong>line 94</strong>: <code>#define TF_CALL_string(m)</code> to <code>#define TF_CALL_string(m) m(string)</code></p>\n<p>Still get the same \"No OpKernel was registered to support Op 'Switch'\" error.</p>\n<p>I've also tried changing:<br>\n<strong>line 98</strong>: <code>#define TF_CALL_bool(m)</code> to <code>#define TF_CALL_bool(m) m(bool)</code><br>\nTo no avail...</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11816941\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/leftstone2015\">@leftstone2015</a> in your comment you said add m(string) to the TF_CALL_string(m) macro, but you did not specify which one. There is a second one on <strong>line 121</strong>, but when I try to add m(string) to that one my bazel build fails with:</p>\n<blockquote>\n<p>tensorflow/core/kernels/concat_lib_cpu.cc:68:44: error: duplicate explicit instantiation of 'void tensorflow::ConcatCPU(tensorflow::DeviceBase*, const std::vector&lt;std::unique_ptr&lt;typename tensorflow::TTypes&lt;T, 2&gt;::ConstMatrix&gt; &gt;&amp;, typename tensorflow::TTypes&lt;T, 2&gt;::Matrix*) [with T = std::basic_string; typename tensorflow::TTypes&lt;T, 2&gt;::ConstMatrix = Eigen::TensorMap&lt;Eigen::Tensor&lt;const std::basic_string, 2, 1, int&gt;, 16, Eigen::MakePointer&gt;; typename tensorflow::TTypes&lt;T, 2&gt;::Matrix = Eigen::TensorMap&lt;Eigen::Tensor&lt;std::basic_string, 2, 1, int&gt;, 16, Eigen::MakePointer&gt;]' [-fpermissive]<br>\ntypename TTypes&lt;T, 2&gt;::Matrix* output);<br>\n^<br>\ntensorflow/core/kernels/concat_lib_cpu.cc:79:1: note: in expansion of macro 'REGISTER'<br>\nREGISTER(string);</p>\n</blockquote>\n<p>I have been struggling with this bug for a while now, and from what I've read in similar posts, the only solution is to freeze your model without is_training. Unfortunately this is not an option for me as I do not have any way of modifying my graph.pb file. So any help would be appreciated!</p>", "body_text": "Can you be more specific about implementing this fix? Because it is not working for me. I've tried changing:\nline 94: #define TF_CALL_string(m) to #define TF_CALL_string(m) m(string)\nStill get the same \"No OpKernel was registered to support Op 'Switch'\" error.\nI've also tried changing:\nline 98: #define TF_CALL_bool(m) to #define TF_CALL_bool(m) m(bool)\nTo no avail...\n@leftstone2015 in your comment you said add m(string) to the TF_CALL_string(m) macro, but you did not specify which one. There is a second one on line 121, but when I try to add m(string) to that one my bazel build fails with:\n\ntensorflow/core/kernels/concat_lib_cpu.cc:68:44: error: duplicate explicit instantiation of 'void tensorflow::ConcatCPU(tensorflow::DeviceBase*, const std::vector<std::unique_ptr<typename tensorflow::TTypes<T, 2>::ConstMatrix> >&, typename tensorflow::TTypes<T, 2>::Matrix*) [with T = std::basic_string; typename tensorflow::TTypes<T, 2>::ConstMatrix = Eigen::TensorMap<Eigen::Tensor<const std::basic_string, 2, 1, int>, 16, Eigen::MakePointer>; typename tensorflow::TTypes<T, 2>::Matrix = Eigen::TensorMap<Eigen::Tensor<std::basic_string, 2, 1, int>, 16, Eigen::MakePointer>]' [-fpermissive]\ntypename TTypes<T, 2>::Matrix* output);\n^\ntensorflow/core/kernels/concat_lib_cpu.cc:79:1: note: in expansion of macro 'REGISTER'\nREGISTER(string);\n\nI have been struggling with this bug for a while now, and from what I've read in similar posts, the only solution is to freeze your model without is_training. Unfortunately this is not an option for me as I do not have any way of modifying my graph.pb file. So any help would be appreciated!", "body": "Can you be more specific about implementing this fix? Because it is not working for me. I've tried changing:\r\n**line 94**: `#define TF_CALL_string(m)` to `#define TF_CALL_string(m) m(string)`\r\n\r\nStill get the same \"No OpKernel was registered to support Op 'Switch'\" error.\r\n\r\nI've also tried changing:\r\n**line 98**: `#define TF_CALL_bool(m)` to `#define TF_CALL_bool(m) m(bool)`\r\nTo no avail...\r\n\r\n@leftstone2015 in your comment you said add m(string) to the TF_CALL_string(m) macro, but you did not specify which one. There is a second one on **line 121**, but when I try to add m(string) to that one my bazel build fails with:\r\n\r\n> tensorflow/core/kernels/concat_lib_cpu.cc:68:44: error: duplicate explicit instantiation of 'void tensorflow::ConcatCPU(tensorflow::DeviceBase*, const std::vector<std::unique_ptr<typename tensorflow::TTypes<T, 2>::ConstMatrix> >&, typename tensorflow::TTypes<T, 2>::Matrix*) [with T = std::basic_string<char>; typename tensorflow::TTypes<T, 2>::ConstMatrix = Eigen::TensorMap<Eigen::Tensor<const std::basic_string<char>, 2, 1, int>, 16, Eigen::MakePointer>; typename tensorflow::TTypes<T, 2>::Matrix = Eigen::TensorMap<Eigen::Tensor<std::basic_string<char>, 2, 1, int>, 16, Eigen::MakePointer>]' [-fpermissive]\r\n>        typename TTypes<T, 2>::Matrix* output);\r\n>                                             ^\r\n> tensorflow/core/kernels/concat_lib_cpu.cc:79:1: note: in expansion of macro 'REGISTER'\r\n>  REGISTER(string);\r\n\r\nI have been struggling with this bug for a while now, and from what I've read in similar posts, the only solution is to freeze your model without is_training. Unfortunately this is not an option for me as I do not have any way of modifying my graph.pb file. So any help would be appreciated! "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/305697828", "html_url": "https://github.com/tensorflow/tensorflow/issues/5354#issuecomment-305697828", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5354", "id": 305697828, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTY5NzgyOA==", "user": {"login": "huan", "id": 1361891, "node_id": "MDQ6VXNlcjEzNjE4OTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1361891?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huan", "html_url": "https://github.com/huan", "followers_url": "https://api.github.com/users/huan/followers", "following_url": "https://api.github.com/users/huan/following{/other_user}", "gists_url": "https://api.github.com/users/huan/gists{/gist_id}", "starred_url": "https://api.github.com/users/huan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huan/subscriptions", "organizations_url": "https://api.github.com/users/huan/orgs", "repos_url": "https://api.github.com/users/huan/repos", "events_url": "https://api.github.com/users/huan/events{/privacy}", "received_events_url": "https://api.github.com/users/huan/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-02T06:03:40Z", "updated_at": "2017-06-02T06:12:09Z", "author_association": "NONE", "body_html": "<p>I ran into this problem when I'm running <a href=\"https://github.com/davidsandberg/facenet/\">https://github.com/davidsandberg/facenet/</a> inside docker image <code>tensorflow/tensorflow:latest-gpu-py3</code>.</p>\n<p>However, the jupyter can run without any problem.</p>\n<p>UPDATE:</p>\n<p>After I set <code>per_process_gpu_memory_fraction</code> from 1 to 0.5, this error gone.</p>\n<div class=\"highlight highlight-source-python\"><pre>        gpu_options <span class=\"pl-k\">=</span> tf.GPUOptions(<span class=\"pl-v\">per_process_gpu_memory_fraction</span><span class=\"pl-k\">=</span>args.gpu_memory_fraction)\n        sess <span class=\"pl-k\">=</span> tf.Session(<span class=\"pl-v\">config</span><span class=\"pl-k\">=</span>tf.ConfigProto(<span class=\"pl-v\">gpu_options</span><span class=\"pl-k\">=</span>gpu_options, <span class=\"pl-v\">log_device_placement</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">True</span>))</pre></div>\n<p>It seems if set <code>per_process_gpu_memory_fraction</code> to 1 it will require the entire GPU memory, which will fail because my <code>Xorg</code>, <code>chrome</code> have already used part of them.</p>", "body_text": "I ran into this problem when I'm running https://github.com/davidsandberg/facenet/ inside docker image tensorflow/tensorflow:latest-gpu-py3.\nHowever, the jupyter can run without any problem.\nUPDATE:\nAfter I set per_process_gpu_memory_fraction from 1 to 0.5, this error gone.\n        gpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=args.gpu_memory_fraction)\n        sess = tf.Session(config=tf.ConfigProto(gpu_options=gpu_options, log_device_placement=True))\nIt seems if set per_process_gpu_memory_fraction to 1 it will require the entire GPU memory, which will fail because my Xorg, chrome have already used part of them.", "body": "I ran into this problem when I'm running <https://github.com/davidsandberg/facenet/> inside docker image `tensorflow/tensorflow:latest-gpu-py3`.\r\n\r\nHowever, the jupyter can run without any problem.\r\n\r\nUPDATE:\r\n\r\nAfter I set `per_process_gpu_memory_fraction` from 1 to 0.5, this error gone.\r\n\r\n```python\r\n        gpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=args.gpu_memory_fraction)\r\n        sess = tf.Session(config=tf.ConfigProto(gpu_options=gpu_options, log_device_placement=True))\r\n```\r\n\r\nIt seems if set `per_process_gpu_memory_fraction` to 1 it will require the entire GPU memory, which will fail because my `Xorg`, `chrome` have already used part of them."}
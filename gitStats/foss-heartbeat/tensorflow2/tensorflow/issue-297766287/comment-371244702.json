{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/371244702", "html_url": "https://github.com/tensorflow/tensorflow/issues/17067#issuecomment-371244702", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17067", "id": 371244702, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTI0NDcwMg==", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-07T18:54:49Z", "updated_at": "2018-03-07T19:03:07Z", "author_association": "NONE", "body_html": "<p>I built off of TensorFlow commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/00ff4912d49cc09737fd1425df6d877f29f69741/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/00ff4912d49cc09737fd1425df6d877f29f69741\"><tt>00ff491</tt></a> with a few cherry-picked commits and local changes. Just now, I have committed my local changes and pushed this as a new branch to my fork; see <a href=\"https://github.com/dtrebbien/tensorflow/tree/tensorflow-17067-reference-branch\">https://github.com/dtrebbien/tensorflow/tree/tensorflow-17067-reference-branch</a></p>\n<p>To use this branch:</p>\n<div class=\"highlight highlight-source-shell\"><pre>git remote add dtrebbien-fork https://github.com/dtrebbien/tensorflow.git\ngit fetch dtrebbien-fork\ngit checkout -b tensorflow-17067-reference-branch dtrebbien-fork/tensorflow-17067-reference-branch</pre></div>\n<p>I am not sure that dtrebbien@993006fa764bbdecfee63f4ceead3d06a2821ce2 is needed; I merged it speculatively.</p>\n<p>Here are the configure and build commands that I used:</p>\n<div class=\"highlight highlight-source-shell\"><pre>PYTHON_BIN_PATH=/usr/local/bin/python2 \\\nUSE_DEFAULT_PYTHON_LIB_PATH=1 \\\nTF_NEED_GCP=0 \\\nTF_NEED_HDFS=0 \\\nTF_NEED_S3=0 \\\nTF_NEED_KAFKA=0 \\\nTF_ENABLE_XLA=0 \\\nTF_NEED_GDR=0 \\\nTF_NEED_VERBS=0 \\\nTF_NEED_OPENCL_SYCL=0 \\\nTF_NEED_CUDA=1 \\\nTF_CUDA_VERSION=9.1 \\\nUSE_DEFAULT_CUDA_TOOLKIT_PATH=1 \\\nTF_CUDNN_VERSION=7.0.5 \\\nUSE_DEFAULT_CUDNN_INSTALL_PATH=1 \\\nTF_CUDA_COMPUTE_CAPABILITIES=3.0 \\\nTF_CUDA_CLANG=0 \\\nUSE_DEFAULT_GCC_HOST_COMPILER_PATH=1 \\\nTF_NEED_MPI=0 \\\nUSE_DEFAULT_CC_OPT_FLAGS=1 \\\nTF_SET_ANDROID_WORKSPACE=0 \\\n./configure\n\nbazel build --config=opt --config=cuda --save_temps --explain=explain.txt --verbose_explanations --verbose_failures --linkopt=-Wl,-rpath,/usr/local/cuda/lib //tensorflow/tools/pip_package:build_pip_package</pre></div>\n<p>Note that I am building using <a href=\"https://brew.sh/\" rel=\"nofollow\">Homebrew</a>'s Python 2. Also, I am running macOS 10.13.3 and Xcode 9.2.</p>\n<p>You might see an error saying something like <code>dyld: Library not loaded: @rpath/libcudart.9.1.dylib</code>. If you do, follow the instructions in this Stack Overflow answer: <a href=\"https://stackoverflow.com/a/40007947/196844\" rel=\"nofollow\">https://stackoverflow.com/a/40007947/196844</a></p>\n<p>My MacBook Pro has an NVIDIA GeForce GT 750M, which is CUDA compute capability 3.0. You might need to adjust the <code>TF_CUDA_COMPUTE_CAPABILITIES</code> configuration option if your Mac's NVIDIA GPU has a different compute capability.</p>\n<p>Disclaimer: I do not know if the binary produced by following these steps is stable. I have observed a SEGFAULT issue with my build, but I do not know if this is specific to my build or if this is a bug in TensorFlow: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"225163441\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/9518\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/9518/hovercard?comment_id=366854122&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/9518#issuecomment-366854122\">#9518 (comment)</a></p>", "body_text": "I built off of TensorFlow commit 00ff491 with a few cherry-picked commits and local changes. Just now, I have committed my local changes and pushed this as a new branch to my fork; see https://github.com/dtrebbien/tensorflow/tree/tensorflow-17067-reference-branch\nTo use this branch:\ngit remote add dtrebbien-fork https://github.com/dtrebbien/tensorflow.git\ngit fetch dtrebbien-fork\ngit checkout -b tensorflow-17067-reference-branch dtrebbien-fork/tensorflow-17067-reference-branch\nI am not sure that dtrebbien@993006fa764bbdecfee63f4ceead3d06a2821ce2 is needed; I merged it speculatively.\nHere are the configure and build commands that I used:\nPYTHON_BIN_PATH=/usr/local/bin/python2 \\\nUSE_DEFAULT_PYTHON_LIB_PATH=1 \\\nTF_NEED_GCP=0 \\\nTF_NEED_HDFS=0 \\\nTF_NEED_S3=0 \\\nTF_NEED_KAFKA=0 \\\nTF_ENABLE_XLA=0 \\\nTF_NEED_GDR=0 \\\nTF_NEED_VERBS=0 \\\nTF_NEED_OPENCL_SYCL=0 \\\nTF_NEED_CUDA=1 \\\nTF_CUDA_VERSION=9.1 \\\nUSE_DEFAULT_CUDA_TOOLKIT_PATH=1 \\\nTF_CUDNN_VERSION=7.0.5 \\\nUSE_DEFAULT_CUDNN_INSTALL_PATH=1 \\\nTF_CUDA_COMPUTE_CAPABILITIES=3.0 \\\nTF_CUDA_CLANG=0 \\\nUSE_DEFAULT_GCC_HOST_COMPILER_PATH=1 \\\nTF_NEED_MPI=0 \\\nUSE_DEFAULT_CC_OPT_FLAGS=1 \\\nTF_SET_ANDROID_WORKSPACE=0 \\\n./configure\n\nbazel build --config=opt --config=cuda --save_temps --explain=explain.txt --verbose_explanations --verbose_failures --linkopt=-Wl,-rpath,/usr/local/cuda/lib //tensorflow/tools/pip_package:build_pip_package\nNote that I am building using Homebrew's Python 2. Also, I am running macOS 10.13.3 and Xcode 9.2.\nYou might see an error saying something like dyld: Library not loaded: @rpath/libcudart.9.1.dylib. If you do, follow the instructions in this Stack Overflow answer: https://stackoverflow.com/a/40007947/196844\nMy MacBook Pro has an NVIDIA GeForce GT 750M, which is CUDA compute capability 3.0. You might need to adjust the TF_CUDA_COMPUTE_CAPABILITIES configuration option if your Mac's NVIDIA GPU has a different compute capability.\nDisclaimer: I do not know if the binary produced by following these steps is stable. I have observed a SEGFAULT issue with my build, but I do not know if this is specific to my build or if this is a bug in TensorFlow: #9518 (comment)", "body": "I built off of TensorFlow commit 00ff4912d49cc09737fd1425df6d877f29f69741 with a few cherry-picked commits and local changes. Just now, I have committed my local changes and pushed this as a new branch to my fork; see https://github.com/dtrebbien/tensorflow/tree/tensorflow-17067-reference-branch\r\n\r\nTo use this branch:\r\n\r\n```sh\r\ngit remote add dtrebbien-fork https://github.com/dtrebbien/tensorflow.git\r\ngit fetch dtrebbien-fork\r\ngit checkout -b tensorflow-17067-reference-branch dtrebbien-fork/tensorflow-17067-reference-branch\r\n```\r\n\r\nI am not sure that dtrebbien@993006fa764bbdecfee63f4ceead3d06a2821ce2 is needed; I merged it speculatively.\r\n\r\nHere are the configure and build commands that I used:\r\n\r\n```sh\r\nPYTHON_BIN_PATH=/usr/local/bin/python2 \\\r\nUSE_DEFAULT_PYTHON_LIB_PATH=1 \\\r\nTF_NEED_GCP=0 \\\r\nTF_NEED_HDFS=0 \\\r\nTF_NEED_S3=0 \\\r\nTF_NEED_KAFKA=0 \\\r\nTF_ENABLE_XLA=0 \\\r\nTF_NEED_GDR=0 \\\r\nTF_NEED_VERBS=0 \\\r\nTF_NEED_OPENCL_SYCL=0 \\\r\nTF_NEED_CUDA=1 \\\r\nTF_CUDA_VERSION=9.1 \\\r\nUSE_DEFAULT_CUDA_TOOLKIT_PATH=1 \\\r\nTF_CUDNN_VERSION=7.0.5 \\\r\nUSE_DEFAULT_CUDNN_INSTALL_PATH=1 \\\r\nTF_CUDA_COMPUTE_CAPABILITIES=3.0 \\\r\nTF_CUDA_CLANG=0 \\\r\nUSE_DEFAULT_GCC_HOST_COMPILER_PATH=1 \\\r\nTF_NEED_MPI=0 \\\r\nUSE_DEFAULT_CC_OPT_FLAGS=1 \\\r\nTF_SET_ANDROID_WORKSPACE=0 \\\r\n./configure\r\n\r\nbazel build --config=opt --config=cuda --save_temps --explain=explain.txt --verbose_explanations --verbose_failures --linkopt=-Wl,-rpath,/usr/local/cuda/lib //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\nNote that I am building using [Homebrew](https://brew.sh/)'s Python 2. Also, I am running macOS 10.13.3 and Xcode 9.2.\r\n\r\nYou might see an error saying something like `dyld: Library not loaded: @rpath/libcudart.9.1.dylib`. If you do, follow the instructions in this Stack Overflow answer: https://stackoverflow.com/a/40007947/196844\r\n\r\nMy MacBook Pro has an NVIDIA GeForce GT 750M, which is CUDA compute capability 3.0. You might need to adjust the `TF_CUDA_COMPUTE_CAPABILITIES` configuration option if your Mac's NVIDIA GPU has a different compute capability.\r\n\r\nDisclaimer: I do not know if the binary produced by following these steps is stable. I have observed a SEGFAULT issue with my build, but I do not know if this is specific to my build or if this is a bug in TensorFlow: https://github.com/tensorflow/tensorflow/issues/9518#issuecomment-366854122"}
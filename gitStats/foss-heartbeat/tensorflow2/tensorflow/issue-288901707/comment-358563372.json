{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/358563372", "html_url": "https://github.com/tensorflow/tensorflow/issues/16160#issuecomment-358563372", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16160", "id": 358563372, "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODU2MzM3Mg==", "user": {"login": "xiaoyunwu", "id": 5473617, "node_id": "MDQ6VXNlcjU0NzM2MTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/5473617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaoyunwu", "html_url": "https://github.com/xiaoyunwu", "followers_url": "https://api.github.com/users/xiaoyunwu/followers", "following_url": "https://api.github.com/users/xiaoyunwu/following{/other_user}", "gists_url": "https://api.github.com/users/xiaoyunwu/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaoyunwu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaoyunwu/subscriptions", "organizations_url": "https://api.github.com/users/xiaoyunwu/orgs", "repos_url": "https://api.github.com/users/xiaoyunwu/repos", "events_url": "https://api.github.com/users/xiaoyunwu/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaoyunwu/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-18T07:40:26Z", "updated_at": "2018-01-18T18:47:59Z", "author_association": "NONE", "body_html": "<p>thanks for the fix. But now</p>\n<pre><code>File \"torch/textline.py\", line 16, in &lt;module&gt;\n    table.init.run()\nAttributeError: 'NoneType' object has no attribute 'run'\n</code></pre>\n<p>And if I comment this out,</p>\n<pre><code>dataset = dataset.map(lambda tkns:table.lookup(tkns))\n</code></pre>\n<p>give this:</p>\n<pre><code>Traceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 510, in _apply_op_helper\n    preferred_dtype=default_dtype)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022, in internal_convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 100, in _convert_to_graph_tensor\n    return constant_op.constant(value.numpy())\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in numpy\n    raise ValueError(\"Resource handles are not convertible to numpy.\")\nValueError: Resource handles are not convertible to numpy.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 524, in _apply_op_helper\n    values, as_ref=input_arg.is_ref).dtype.name\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022, in internal_convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 100, in _convert_to_graph_tensor\n    return constant_op.constant(value.numpy())\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in numpy\n    raise ValueError(\"Resource handles are not convertible to numpy.\")\nValueError: Resource handles are not convertible to numpy.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"torch/textline.py\", line 39, in &lt;module&gt;\n    dataset = dataset.map(lambda tkns:table.lookup(tkns))\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 780, in map\n    return MapDataset(self, map_func)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 1591, in __init__\n    self._map_func.add_to_graph(ops.get_default_graph())\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 486, in add_to_graph\n    self._create_definition_if_needed()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 321, in _create_definition_if_needed\n    self._create_definition_if_needed_impl()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 338, in _create_definition_if_needed_impl\n    outputs = self._func(*inputs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 1556, in tf_map_func\n    ret = map_func(nested_args)\n  File \"torch/textline.py\", line 39, in &lt;lambda&gt;\n    dataset = dataset.map(lambda tkns:table.lookup(tkns))\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/lookup_ops.py\", line 229, in lookup\n    self._table_ref, key_tensor, self._default_value, name=scope)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/gen_lookup_ops.py\", line 457, in _lookup_table_find_v2\n    default_value=default_value, name=name)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 528, in _apply_op_helper\n    (input_name, err))\nValueError: Tried to convert 'table_handle' to a tensor and failed. Error: Resource handles are not convertible to numpy.\n</code></pre>", "body_text": "thanks for the fix. But now\nFile \"torch/textline.py\", line 16, in <module>\n    table.init.run()\nAttributeError: 'NoneType' object has no attribute 'run'\n\nAnd if I comment this out,\ndataset = dataset.map(lambda tkns:table.lookup(tkns))\n\ngive this:\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 510, in _apply_op_helper\n    preferred_dtype=default_dtype)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022, in internal_convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 100, in _convert_to_graph_tensor\n    return constant_op.constant(value.numpy())\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in numpy\n    raise ValueError(\"Resource handles are not convertible to numpy.\")\nValueError: Resource handles are not convertible to numpy.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 524, in _apply_op_helper\n    values, as_ref=input_arg.is_ref).dtype.name\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022, in internal_convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 100, in _convert_to_graph_tensor\n    return constant_op.constant(value.numpy())\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in numpy\n    raise ValueError(\"Resource handles are not convertible to numpy.\")\nValueError: Resource handles are not convertible to numpy.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"torch/textline.py\", line 39, in <module>\n    dataset = dataset.map(lambda tkns:table.lookup(tkns))\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 780, in map\n    return MapDataset(self, map_func)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 1591, in __init__\n    self._map_func.add_to_graph(ops.get_default_graph())\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 486, in add_to_graph\n    self._create_definition_if_needed()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 321, in _create_definition_if_needed\n    self._create_definition_if_needed_impl()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 338, in _create_definition_if_needed_impl\n    outputs = self._func(*inputs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 1556, in tf_map_func\n    ret = map_func(nested_args)\n  File \"torch/textline.py\", line 39, in <lambda>\n    dataset = dataset.map(lambda tkns:table.lookup(tkns))\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/lookup_ops.py\", line 229, in lookup\n    self._table_ref, key_tensor, self._default_value, name=scope)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/gen_lookup_ops.py\", line 457, in _lookup_table_find_v2\n    default_value=default_value, name=name)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 528, in _apply_op_helper\n    (input_name, err))\nValueError: Tried to convert 'table_handle' to a tensor and failed. Error: Resource handles are not convertible to numpy.", "body": "thanks for the fix. But now  \r\n\r\n```\r\nFile \"torch/textline.py\", line 16, in <module>\r\n    table.init.run()\r\nAttributeError: 'NoneType' object has no attribute 'run'\r\n```\r\nAnd if I comment this out, \r\n```\r\ndataset = dataset.map(lambda tkns:table.lookup(tkns))\r\n```\r\ngive this:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 510, in _apply_op_helper\r\n    preferred_dtype=default_dtype)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 100, in _convert_to_graph_tensor\r\n    return constant_op.constant(value.numpy())\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in numpy\r\n    raise ValueError(\"Resource handles are not convertible to numpy.\")\r\nValueError: Resource handles are not convertible to numpy.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 524, in _apply_op_helper\r\n    values, as_ref=input_arg.is_ref).dtype.name\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 100, in _convert_to_graph_tensor\r\n    return constant_op.constant(value.numpy())\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in numpy\r\n    raise ValueError(\"Resource handles are not convertible to numpy.\")\r\nValueError: Resource handles are not convertible to numpy.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"torch/textline.py\", line 39, in <module>\r\n    dataset = dataset.map(lambda tkns:table.lookup(tkns))\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 780, in map\r\n    return MapDataset(self, map_func)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 1591, in __init__\r\n    self._map_func.add_to_graph(ops.get_default_graph())\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 486, in add_to_graph\r\n    self._create_definition_if_needed()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 321, in _create_definition_if_needed\r\n    self._create_definition_if_needed_impl()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/function.py\", line 338, in _create_definition_if_needed_impl\r\n    outputs = self._func(*inputs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/data/ops/dataset_ops.py\", line 1556, in tf_map_func\r\n    ret = map_func(nested_args)\r\n  File \"torch/textline.py\", line 39, in <lambda>\r\n    dataset = dataset.map(lambda tkns:table.lookup(tkns))\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/lookup_ops.py\", line 229, in lookup\r\n    self._table_ref, key_tensor, self._default_value, name=scope)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/ops/gen_lookup_ops.py\", line 457, in _lookup_table_find_v2\r\n    default_value=default_value, name=name)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 528, in _apply_op_helper\r\n    (input_name, err))\r\nValueError: Tried to convert 'table_handle' to a tensor and failed. Error: Resource handles are not convertible to numpy.\r\n```"}
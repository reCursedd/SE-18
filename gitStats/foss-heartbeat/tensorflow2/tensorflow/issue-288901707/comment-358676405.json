{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/358676405", "html_url": "https://github.com/tensorflow/tensorflow/issues/16160#issuecomment-358676405", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16160", "id": 358676405, "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODY3NjQwNQ==", "user": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-18T15:13:04Z", "updated_at": "2018-01-18T15:13:04Z", "author_association": "MEMBER", "body_html": "<div class=\"email-quoted-reply\">On Wed, Jan 17, 2018 at 11:45 PM, xiaoyun wu ***@***.***&gt; wrote:\n thanks for the fix. But now File \"torch/textline.py\", line 16, in\n table.init.run()\n AttributeError: 'NoneType' object has no attribute 'run'\n</div>\n<div class=\"email-fragment\">just do table.init.run() (which uses a session) if you're in graph mode.</div>\n<div class=\"email-quoted-reply\"> And if I comment this out,\n dataset = dataset.map(lambda tkns:table.lookup(tkns))\n give this:\n Traceback (most recent call last):\n File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n python3.6/site-packages/tensorflow/python/framework/op_def_library.py\",\n line 510, in _apply_op_helper\n preferred_dtype=default_dtype)\n File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022,\n in internal_convert_to_tensor\n ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n python3.6/site-packages/tensorflow/python/eager/function.py\", line 100,\n in _convert_to_graph_tensor\n return constant_op.constant(value.numpy())\n File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in\n numpy\n raise ValueError(\"Resource handles are not convertible to numpy.\")\n ValueError: Resource handles are not convertible to numpy.\n\n You seem to have found a bug with the eager-dataset integration. For</div>\n<div class=\"email-fragment\">cleanliness, can you file another issue?</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-signature-reply\">-- \n - Alex</div>\n</div>", "body_text": "On Wed, Jan 17, 2018 at 11:45 PM, xiaoyun wu ***@***.***> wrote:\n thanks for the fix. But now File \"torch/textline.py\", line 16, in\n table.init.run()\n AttributeError: 'NoneType' object has no attribute 'run'\n\njust do table.init.run() (which uses a session) if you're in graph mode.\n And if I comment this out,\n dataset = dataset.map(lambda tkns:table.lookup(tkns))\n give this:\n Traceback (most recent call last):\n File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n python3.6/site-packages/tensorflow/python/framework/op_def_library.py\",\n line 510, in _apply_op_helper\n preferred_dtype=default_dtype)\n File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022,\n in internal_convert_to_tensor\n ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n python3.6/site-packages/tensorflow/python/eager/function.py\", line 100,\n in _convert_to_graph_tensor\n return constant_op.constant(value.numpy())\n File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in\n numpy\n raise ValueError(\"Resource handles are not convertible to numpy.\")\n ValueError: Resource handles are not convertible to numpy.\n\n You seem to have found a bug with the eager-dataset integration. For\ncleanliness, can you file another issue?\n\u2026\n-- \n - Alex", "body": "On Wed, Jan 17, 2018 at 11:45 PM, xiaoyun wu <notifications@github.com>\nwrote:\n\n> thanks for the fix. But now File \"torch/textline.py\", line 16, in\n> table.init.run()\n> AttributeError: 'NoneType' object has no attribute 'run'\n>\njust do table.init.run() (which uses a session) if you're in graph mode.\n\n\n> And if I comment this out,\n> dataset = dataset.map(lambda tkns:table.lookup(tkns))\n> give this:\n> Traceback (most recent call last):\n> File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n> python3.6/site-packages/tensorflow/python/framework/op_def_library.py\",\n> line 510, in _apply_op_helper\n> preferred_dtype=default_dtype)\n> File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n> python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1022,\n> in internal_convert_to_tensor\n> ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n> File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n> python3.6/site-packages/tensorflow/python/eager/function.py\", line 100,\n> in _convert_to_graph_tensor\n> return constant_op.constant(value.numpy())\n> File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/\n> python3.6/site-packages/tensorflow/python/framework/ops.py\", line 677, in\n> numpy\n> raise ValueError(\"Resource handles are not convertible to numpy.\")\n> ValueError: Resource handles are not convertible to numpy.\n>\n> You seem to have found a bug with the eager-dataset integration. For\ncleanliness, can you file another issue?\n\n-- \n - Alex\n"}
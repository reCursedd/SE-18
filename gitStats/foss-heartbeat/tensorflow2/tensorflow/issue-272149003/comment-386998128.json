{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/386998128", "html_url": "https://github.com/tensorflow/tensorflow/issues/14357#issuecomment-386998128", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14357", "id": 386998128, "node_id": "MDEyOklzc3VlQ29tbWVudDM4Njk5ODEyOA==", "user": {"login": "ericxsun", "id": 1772912, "node_id": "MDQ6VXNlcjE3NzI5MTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1772912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericxsun", "html_url": "https://github.com/ericxsun", "followers_url": "https://api.github.com/users/ericxsun/followers", "following_url": "https://api.github.com/users/ericxsun/following{/other_user}", "gists_url": "https://api.github.com/users/ericxsun/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericxsun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericxsun/subscriptions", "organizations_url": "https://api.github.com/users/ericxsun/orgs", "repos_url": "https://api.github.com/users/ericxsun/repos", "events_url": "https://api.github.com/users/ericxsun/events{/privacy}", "received_events_url": "https://api.github.com/users/ericxsun/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-07T08:37:19Z", "updated_at": "2018-05-07T08:42:27Z", "author_association": "NONE", "body_html": "<p>I met the same problem</p>\n<pre><code>inputs = ....\ninputs = RNN op on inputs\ninputs = tf.layers.batch_normalization(inputs, training=self.is_train, trainable=True)\n.....\nupdate_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\nwith tf.control_dependencies(update_ops):\n    self.optimizer = ....\n</code></pre>\n<p>When removing RNN ops or replacing <code>tf.layers.batch_normalization</code> with <code>tf.contrib.layers.batch_norm(inputs=inputs, updates_collections=None)</code>, all things go well. Otherwise,  <code>Retval[0] does not have value</code> occur.</p>", "body_text": "I met the same problem\ninputs = ....\ninputs = RNN op on inputs\ninputs = tf.layers.batch_normalization(inputs, training=self.is_train, trainable=True)\n.....\nupdate_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\nwith tf.control_dependencies(update_ops):\n    self.optimizer = ....\n\nWhen removing RNN ops or replacing tf.layers.batch_normalization with tf.contrib.layers.batch_norm(inputs=inputs, updates_collections=None), all things go well. Otherwise,  Retval[0] does not have value occur.", "body": "I met the same problem\r\n```\r\ninputs = ....\r\ninputs = RNN op on inputs\r\ninputs = tf.layers.batch_normalization(inputs, training=self.is_train, trainable=True)\r\n.....\r\nupdate_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\r\nwith tf.control_dependencies(update_ops):\r\n    self.optimizer = ....\r\n```\r\n\r\nWhen removing RNN ops or replacing `tf.layers.batch_normalization` with `tf.contrib.layers.batch_norm(inputs=inputs, updates_collections=None)`, all things go well. Otherwise,  `Retval[0] does not have value` occur.\r\n"}
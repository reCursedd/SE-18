{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12560", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12560/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12560/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12560/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12560", "id": 252674325, "node_id": "MDU6SXNzdWUyNTI2NzQzMjU=", "number": 12560, "title": "after ops_to_register.h changed, IOS camera example still return No OpKernel support 'Less' op", "user": {"login": "Christ1992", "id": 17158304, "node_id": "MDQ6VXNlcjE3MTU4MzA0", "avatar_url": "https://avatars1.githubusercontent.com/u/17158304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Christ1992", "html_url": "https://github.com/Christ1992", "followers_url": "https://api.github.com/users/Christ1992/followers", "following_url": "https://api.github.com/users/Christ1992/following{/other_user}", "gists_url": "https://api.github.com/users/Christ1992/gists{/gist_id}", "starred_url": "https://api.github.com/users/Christ1992/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Christ1992/subscriptions", "organizations_url": "https://api.github.com/users/Christ1992/orgs", "repos_url": "https://api.github.com/users/Christ1992/repos", "events_url": "https://api.github.com/users/Christ1992/events{/privacy}", "received_events_url": "https://api.github.com/users/Christ1992/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2017-08-24T17:28:53Z", "updated_at": "2018-01-31T18:47:41Z", "closed_at": "2018-01-31T18:47:41Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<p>Run on MacOS 10.12<br>\nXcode 8.3.3<br>\nPython 3.5<br>\ntensorflow 1.2.1 installed with anaconda<br>\nbazel 0.5.2-homebrew</p>\n<h3>Main Problem:</h3>\n<p>Although I changed ops_to_register.h file and recompile the static library, IOS camera example code still returned No OpKernel support 'Less' op error. <strong>The same library works fine</strong> in another project <a href=\"https://github.com/JieHe96/iOS_Tensorflow_ObjectDetection_Example\">JieHe's ios-tensorflow object detection project</a> when I replace the model load the model. I can't tell why I got the issues with official tensorflow ios code.</p>\n<h3>Describe the problem</h3>\n<p>I trained my model based on the ssd_mobilenet network. T hen the model was optimized for usage on ios. Freeze it with <code>export_inference_graph.py</code>, optimize it with<code> optimize_for_inference.py</code>, and then binary reduced the size with <code>bazel build -c tensorflow/tools/graph_transforms:transform_graph</code></p>\n<p>In that, the model was well-generated as desired.</p>\n<p><strong>For the static library:</strong><br>\nAnd then I try to import the model into my app. So I print all the ops and put the file under tensorflow/core/framework.</p>\n<blockquote>\n<p>bazel build tensorflow/python/tools:print_selective_registration_header<br>\nbazel-bin/tensorflow/python/tools/print_selective_registration_header <br>\n    --graphs=path/to/graph.pb &gt; ops_to_register.h</p>\n</blockquote>\n<p>In the Makefile, first delete the line \"-D__ANDROID_TYPES_SLIM__ \" under \"# Settings for iOS.\" for all \"$(IOS_ARCH)\". And run</p>\n<pre><code>tensorflow/contrib/makefile/download_dependencies.sh\ntensorflow/contrib/makefile/compile_ios_protobuf.sh \ntensorflow/contrib/makefile/compile_ios_tensorflow.sh \"-O3  -DANDROID_TYPES=ANDROID_TYPES_FULL -DSELECTIVE_REGISTRATION -DSUPPORT_SELECTIVE_REGISTRATION\"\n</code></pre>\n<p>After I generated the static tensorflow library, I <code>pod install</code> the podfile in camera example as required. Modified the input/output tensor and try to build the app. However, the same error with \"No kernel registed XXX\" still occurs .</p>\n<p>I also tried my model and the same library on <a href=\"https://github.com/JieHe96/iOS_Tensorflow_ObjectDetection_Example\">JieHe's ios-tensorflow code</a>, it can run smoothly. So I assumed] my static library was well generated to including all the ops I need. So I don't really know how to solve it with the example code?</p>\n<p>My error log:</p>\n<blockquote>\n<p>2017-08-24 17:21:18.679927: F /Users/yingjie/tensorflow-master/tensorflow/examples/ios/App-test/camera/CameraExampleViewController.mm:730] Couldn't load model: Invalid argument: No OpKernel was registered to support Op 'Less' with these attrs.  Registered devices: [CPU], Registered kernels:<br>\ndevice='CPU'; T in [DT_FLOAT]</p>\n</blockquote>", "body_text": "System information\nRun on MacOS 10.12\nXcode 8.3.3\nPython 3.5\ntensorflow 1.2.1 installed with anaconda\nbazel 0.5.2-homebrew\nMain Problem:\nAlthough I changed ops_to_register.h file and recompile the static library, IOS camera example code still returned No OpKernel support 'Less' op error. The same library works fine in another project JieHe's ios-tensorflow object detection project when I replace the model load the model. I can't tell why I got the issues with official tensorflow ios code.\nDescribe the problem\nI trained my model based on the ssd_mobilenet network. T hen the model was optimized for usage on ios. Freeze it with export_inference_graph.py, optimize it with optimize_for_inference.py, and then binary reduced the size with bazel build -c tensorflow/tools/graph_transforms:transform_graph\nIn that, the model was well-generated as desired.\nFor the static library:\nAnd then I try to import the model into my app. So I print all the ops and put the file under tensorflow/core/framework.\n\nbazel build tensorflow/python/tools:print_selective_registration_header\nbazel-bin/tensorflow/python/tools/print_selective_registration_header \n    --graphs=path/to/graph.pb > ops_to_register.h\n\nIn the Makefile, first delete the line \"-D__ANDROID_TYPES_SLIM__ \" under \"# Settings for iOS.\" for all \"$(IOS_ARCH)\". And run\ntensorflow/contrib/makefile/download_dependencies.sh\ntensorflow/contrib/makefile/compile_ios_protobuf.sh \ntensorflow/contrib/makefile/compile_ios_tensorflow.sh \"-O3  -DANDROID_TYPES=ANDROID_TYPES_FULL -DSELECTIVE_REGISTRATION -DSUPPORT_SELECTIVE_REGISTRATION\"\n\nAfter I generated the static tensorflow library, I pod install the podfile in camera example as required. Modified the input/output tensor and try to build the app. However, the same error with \"No kernel registed XXX\" still occurs .\nI also tried my model and the same library on JieHe's ios-tensorflow code, it can run smoothly. So I assumed] my static library was well generated to including all the ops I need. So I don't really know how to solve it with the example code?\nMy error log:\n\n2017-08-24 17:21:18.679927: F /Users/yingjie/tensorflow-master/tensorflow/examples/ios/App-test/camera/CameraExampleViewController.mm:730] Couldn't load model: Invalid argument: No OpKernel was registered to support Op 'Less' with these attrs.  Registered devices: [CPU], Registered kernels:\ndevice='CPU'; T in [DT_FLOAT]", "body": "### System information\r\nRun on MacOS 10.12\r\nXcode 8.3.3\r\nPython 3.5\r\ntensorflow 1.2.1 installed with anaconda \r\nbazel 0.5.2-homebrew\r\n\r\n### Main Problem: \r\nAlthough I changed ops_to_register.h file and recompile the static library, IOS camera example code still returned No OpKernel support 'Less' op error. **The same library works fine** in another project [JieHe's ios-tensorflow object detection project](https://github.com/JieHe96/iOS_Tensorflow_ObjectDetection_Example) when I replace the model load the model. I can't tell why I got the issues with official tensorflow ios code.\r\n\r\n### Describe the problem\r\nI trained my model based on the ssd_mobilenet network. T hen the model was optimized for usage on ios. Freeze it with `export_inference_graph.py`, optimize it with` optimize_for_inference.py`, and then binary reduced the size with `bazel build -c tensorflow/tools/graph_transforms:transform_graph`\r\n\r\nIn that, the model was well-generated as desired. \r\n\r\n\r\n**For the static library:**\r\nAnd then I try to import the model into my app. So I print all the ops and put the file under tensorflow/core/framework. \r\n\r\n>   bazel build tensorflow/python/tools:print_selective_registration_header \r\n  bazel-bin/tensorflow/python/tools/print_selective_registration_header \\\r\n    --graphs=path/to/graph.pb > ops_to_register.h\r\n\r\nIn the Makefile, first delete the line \"-D__ANDROID_TYPES_SLIM__ \" under \"# Settings for iOS.\" for all \"$(IOS_ARCH)\". And run\r\n\r\n```\r\ntensorflow/contrib/makefile/download_dependencies.sh\r\ntensorflow/contrib/makefile/compile_ios_protobuf.sh \r\ntensorflow/contrib/makefile/compile_ios_tensorflow.sh \"-O3  -DANDROID_TYPES=ANDROID_TYPES_FULL -DSELECTIVE_REGISTRATION -DSUPPORT_SELECTIVE_REGISTRATION\"\r\n```\r\nAfter I generated the static tensorflow library, I `pod install` the podfile in camera example as required. Modified the input/output tensor and try to build the app. However, the same error with \"No kernel registed XXX\" still occurs .\r\n\r\nI also tried my model and the same library on [JieHe's ios-tensorflow code](https://github.com/JieHe96/iOS_Tensorflow_ObjectDetection_Example), it can run smoothly. So I assumed] my static library was well generated to including all the ops I need. So I don't really know how to solve it with the example code?\r\n\r\nMy error log: \r\n\r\n> 2017-08-24 17:21:18.679927: F /Users/yingjie/tensorflow-master/tensorflow/examples/ios/App-test/camera/CameraExampleViewController.mm:730] Couldn't load model: Invalid argument: No OpKernel was registered to support Op 'Less' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n  device='CPU'; T in [DT_FLOAT]"}
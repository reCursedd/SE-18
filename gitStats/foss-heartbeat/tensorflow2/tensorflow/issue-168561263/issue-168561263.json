{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3596", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3596/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3596/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3596/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3596", "id": 168561263, "node_id": "MDU6SXNzdWUxNjg1NjEyNjM=", "number": 3596, "title": "Unable to run the tensorflow/tensorflow/examples/skflow/multipul_gpu.py ", "user": {"login": "luxiaolei", "id": 15217663, "node_id": "MDQ6VXNlcjE1MjE3NjYz", "avatar_url": "https://avatars1.githubusercontent.com/u/15217663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luxiaolei", "html_url": "https://github.com/luxiaolei", "followers_url": "https://api.github.com/users/luxiaolei/followers", "following_url": "https://api.github.com/users/luxiaolei/following{/other_user}", "gists_url": "https://api.github.com/users/luxiaolei/gists{/gist_id}", "starred_url": "https://api.github.com/users/luxiaolei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luxiaolei/subscriptions", "organizations_url": "https://api.github.com/users/luxiaolei/orgs", "repos_url": "https://api.github.com/users/luxiaolei/repos", "events_url": "https://api.github.com/users/luxiaolei/events{/privacy}", "received_events_url": "https://api.github.com/users/luxiaolei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "terrytangyuan", "id": 4269898, "node_id": "MDQ6VXNlcjQyNjk4OTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4269898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terrytangyuan", "html_url": "https://github.com/terrytangyuan", "followers_url": "https://api.github.com/users/terrytangyuan/followers", "following_url": "https://api.github.com/users/terrytangyuan/following{/other_user}", "gists_url": "https://api.github.com/users/terrytangyuan/gists{/gist_id}", "starred_url": "https://api.github.com/users/terrytangyuan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terrytangyuan/subscriptions", "organizations_url": "https://api.github.com/users/terrytangyuan/orgs", "repos_url": "https://api.github.com/users/terrytangyuan/repos", "events_url": "https://api.github.com/users/terrytangyuan/events{/privacy}", "received_events_url": "https://api.github.com/users/terrytangyuan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "terrytangyuan", "id": 4269898, "node_id": "MDQ6VXNlcjQyNjk4OTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4269898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terrytangyuan", "html_url": "https://github.com/terrytangyuan", "followers_url": "https://api.github.com/users/terrytangyuan/followers", "following_url": "https://api.github.com/users/terrytangyuan/following{/other_user}", "gists_url": "https://api.github.com/users/terrytangyuan/gists{/gist_id}", "starred_url": "https://api.github.com/users/terrytangyuan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terrytangyuan/subscriptions", "organizations_url": "https://api.github.com/users/terrytangyuan/orgs", "repos_url": "https://api.github.com/users/terrytangyuan/repos", "events_url": "https://api.github.com/users/terrytangyuan/events{/privacy}", "received_events_url": "https://api.github.com/users/terrytangyuan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2016-08-01T03:50:41Z", "updated_at": "2017-01-23T23:20:22Z", "closed_at": "2017-01-23T23:20:22Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>when i run the tensorflow/tensorflow/examples/skflow/multipul_gpu.py example, I got the following error. Any helps would be great!</p>\n<pre><code>  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 723, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 743, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'save/ShardedFilename_2': Could not satisfy explicit device specification '/device:GPU:2' be$\nColocation Debug Info:\nColocation group had the following types and devices:\nIdentity: CPU\nShardedFilename: CPU\n         [[Node: save/ShardedFilename_2 = ShardedFilename[_device=\"/device:GPU:2\"](save/Const, save/ShardedFilename_2/shard, save/num_shards)]]\nCaused by op u'save/ShardedFilename_2', defined at:\n  File \"multiple_gpu.py\", line 39, in &lt;module&gt;\n    classifier.fit(X_train, y_train)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 166, in fit\n    monitors=monitors)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 577, in _train_model\n    max_steps=max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 232, in train\n    max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 309, in _train_internal\n    saver=_make_saver(graph, keep_checkpoint_max),\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 95, in _make_saver\n    max_to_keep=keep_checkpoint_max)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 854, in __init__\n    restore_sequentially=restore_sequentially)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 512, in build\n    save_tensor = self._AddShardedSaveOps(filename_tensor, per_device)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 232, in _AddShardedSaveOps\n    filename_tensor, shard, num_shards_tensor)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 200, in sharded_filename\n    return gen_io_ops._sharded_filename(filename_tensor, shard, num_shards)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_io_ops.py\", line 460, in _sharded_filename\n    shard=shard, num_shards=num_shards, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2298, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1232, in __init__\n    self._traceback = _extract_stack()\n\n</code></pre>\n<h3>Environment info</h3>\n<p>Operating System:  Ubuntu 16.04</p>\n<p>Installed version of CUDA and cuDNN: CUDA 8.0, cuDNN 5</p>\n<p>(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<pre><code>/usr/local/cuda/lib64/libcudadevrt.a\n/usr/local/cuda/lib64/libcudart.so\n/usr/local/cuda/lib64/libcudart.so.8.0\n/usr/local/cuda/lib64/libcudart.so.8.0.27\n/usr/local/cuda/lib64/libcudart_static.a\n/usr/local/cuda/lib64/libcudnn.so\n/usr/local/cuda/lib64/libcudnn.so.5\n/usr/local/cuda/lib64/libcudnn.so.5.0.5\n</code></pre>\n<p>If installed from sources, provide the commit hash:<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/e95f4e760c6b6713b6b686ebeff9a1586a5831dd/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/e95f4e760c6b6713b6b686ebeff9a1586a5831dd\"><tt>e95f4e7</tt></a></p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>run multipul_gpu.py</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment).</p>", "body_text": "Hi,\nwhen i run the tensorflow/tensorflow/examples/skflow/multipul_gpu.py example, I got the following error. Any helps would be great!\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 723, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 743, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'save/ShardedFilename_2': Could not satisfy explicit device specification '/device:GPU:2' be$\nColocation Debug Info:\nColocation group had the following types and devices:\nIdentity: CPU\nShardedFilename: CPU\n         [[Node: save/ShardedFilename_2 = ShardedFilename[_device=\"/device:GPU:2\"](save/Const, save/ShardedFilename_2/shard, save/num_shards)]]\nCaused by op u'save/ShardedFilename_2', defined at:\n  File \"multiple_gpu.py\", line 39, in <module>\n    classifier.fit(X_train, y_train)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 166, in fit\n    monitors=monitors)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 577, in _train_model\n    max_steps=max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 232, in train\n    max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 309, in _train_internal\n    saver=_make_saver(graph, keep_checkpoint_max),\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 95, in _make_saver\n    max_to_keep=keep_checkpoint_max)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 854, in __init__\n    restore_sequentially=restore_sequentially)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 512, in build\n    save_tensor = self._AddShardedSaveOps(filename_tensor, per_device)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 232, in _AddShardedSaveOps\n    filename_tensor, shard, num_shards_tensor)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 200, in sharded_filename\n    return gen_io_ops._sharded_filename(filename_tensor, shard, num_shards)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_io_ops.py\", line 460, in _sharded_filename\n    shard=shard, num_shards=num_shards, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2298, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1232, in __init__\n    self._traceback = _extract_stack()\n\n\nEnvironment info\nOperating System:  Ubuntu 16.04\nInstalled version of CUDA and cuDNN: CUDA 8.0, cuDNN 5\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n/usr/local/cuda/lib64/libcudadevrt.a\n/usr/local/cuda/lib64/libcudart.so\n/usr/local/cuda/lib64/libcudart.so.8.0\n/usr/local/cuda/lib64/libcudart.so.8.0.27\n/usr/local/cuda/lib64/libcudart_static.a\n/usr/local/cuda/lib64/libcudnn.so\n/usr/local/cuda/lib64/libcudnn.so.5\n/usr/local/cuda/lib64/libcudnn.so.5.0.5\n\nIf installed from sources, provide the commit hash:\ne95f4e7\nSteps to reproduce\n\nrun multipul_gpu.py\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment).", "body": "Hi, \n\nwhen i run the tensorflow/tensorflow/examples/skflow/multipul_gpu.py example, I got the following error. Any helps would be great!\n\n```\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 723, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 743, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.InvalidArgumentError: Cannot assign a device to node 'save/ShardedFilename_2': Could not satisfy explicit device specification '/device:GPU:2' be$\nColocation Debug Info:\nColocation group had the following types and devices:\nIdentity: CPU\nShardedFilename: CPU\n         [[Node: save/ShardedFilename_2 = ShardedFilename[_device=\"/device:GPU:2\"](save/Const, save/ShardedFilename_2/shard, save/num_shards)]]\nCaused by op u'save/ShardedFilename_2', defined at:\n  File \"multiple_gpu.py\", line 39, in <module>\n    classifier.fit(X_train, y_train)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.py\", line 166, in fit\n    monitors=monitors)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 577, in _train_model\n    max_steps=max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 232, in train\n    max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 309, in _train_internal\n    saver=_make_saver(graph, keep_checkpoint_max),\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/graph_actions.py\", line 95, in _make_saver\n    max_to_keep=keep_checkpoint_max)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 854, in __init__\n    restore_sequentially=restore_sequentially)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 512, in build\n    save_tensor = self._AddShardedSaveOps(filename_tensor, per_device)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 232, in _AddShardedSaveOps\n    filename_tensor, shard, num_shards_tensor)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 200, in sharded_filename\n    return gen_io_ops._sharded_filename(filename_tensor, shard, num_shards)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_io_ops.py\", line 460, in _sharded_filename\n    shard=shard, num_shards=num_shards, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2298, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1232, in __init__\n    self._traceback = _extract_stack()\n\n```\n### Environment info\n\nOperating System:  Ubuntu 16.04\n\nInstalled version of CUDA and cuDNN: CUDA 8.0, cuDNN 5\n\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n```\n/usr/local/cuda/lib64/libcudadevrt.a\n/usr/local/cuda/lib64/libcudart.so\n/usr/local/cuda/lib64/libcudart.so.8.0\n/usr/local/cuda/lib64/libcudart.so.8.0.27\n/usr/local/cuda/lib64/libcudart_static.a\n/usr/local/cuda/lib64/libcudnn.so\n/usr/local/cuda/lib64/libcudnn.so.5\n/usr/local/cuda/lib64/libcudnn.so.5.0.5\n```\n\nIf installed from sources, provide the commit hash:\ne95f4e760c6b6713b6b686ebeff9a1586a5831dd\n### Steps to reproduce\n1. run multipul_gpu.py\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/237745119", "html_url": "https://github.com/tensorflow/tensorflow/issues/3596#issuecomment-237745119", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3596", "id": 237745119, "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzc0NTExOQ==", "user": {"login": "luxiaolei", "id": 15217663, "node_id": "MDQ6VXNlcjE1MjE3NjYz", "avatar_url": "https://avatars1.githubusercontent.com/u/15217663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luxiaolei", "html_url": "https://github.com/luxiaolei", "followers_url": "https://api.github.com/users/luxiaolei/followers", "following_url": "https://api.github.com/users/luxiaolei/following{/other_user}", "gists_url": "https://api.github.com/users/luxiaolei/gists{/gist_id}", "starred_url": "https://api.github.com/users/luxiaolei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luxiaolei/subscriptions", "organizations_url": "https://api.github.com/users/luxiaolei/orgs", "repos_url": "https://api.github.com/users/luxiaolei/repos", "events_url": "https://api.github.com/users/luxiaolei/events{/privacy}", "received_events_url": "https://api.github.com/users/luxiaolei/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-05T03:13:51Z", "updated_at": "2016-08-05T03:13:51Z", "author_association": "NONE", "body_html": "<p>Simply change <code>TensorflowEstimator</code> to <code>Estimator</code> in the origin code, would result in following Type error</p>\n<pre><code>Traceback (most recent call last):\n  File \"multiple_gpu.py\", line 42, in &lt;module&gt;\n    classifier.fit(X_train, y_train)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 238, in fit\n    max_steps=max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 538, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 774, in _get_train_ops\n    _, loss, train_op = self._call_model_fn(features, targets, ModeKeys.TRAIN)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 758, in _call_model_fn\n    return self._model_fn(features, targets)\n  File \"multiple_gpu.py\", line 35, in my_model\n    layers = learn.ops.dnn(X, [10, 20, 10], dropout=0.5)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/framework/python/framework/deprecation.py\", line 105, in new_func\n    return func(*args, **kwargs)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/ops/dnn_ops.py\", line 69, in dnn\n    lambda: tensor_in)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 1330, in cond\n    p_2, p_1 = switch(pred, pred)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 261, in switch\n    return gen_control_flow_ops._switch(data, pred, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_control_flow_ops.py\", line 370, in _switch\n    result = _op_def_lib.apply_op(\"Switch\", data=data, pred=pred, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 463, in apply_op\n    (prefix, dtypes.as_dtype(input_arg.type).name))\nTypeError: Input 'pred' of 'Switch' Op has type float32 that does not match expected type of bool.\n</code></pre>\n<p>sad..:(</p>", "body_text": "Simply change TensorflowEstimator to Estimator in the origin code, would result in following Type error\nTraceback (most recent call last):\n  File \"multiple_gpu.py\", line 42, in <module>\n    classifier.fit(X_train, y_train)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 238, in fit\n    max_steps=max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 538, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 774, in _get_train_ops\n    _, loss, train_op = self._call_model_fn(features, targets, ModeKeys.TRAIN)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 758, in _call_model_fn\n    return self._model_fn(features, targets)\n  File \"multiple_gpu.py\", line 35, in my_model\n    layers = learn.ops.dnn(X, [10, 20, 10], dropout=0.5)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/framework/python/framework/deprecation.py\", line 105, in new_func\n    return func(*args, **kwargs)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/ops/dnn_ops.py\", line 69, in dnn\n    lambda: tensor_in)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 1330, in cond\n    p_2, p_1 = switch(pred, pred)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 261, in switch\n    return gen_control_flow_ops._switch(data, pred, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_control_flow_ops.py\", line 370, in _switch\n    result = _op_def_lib.apply_op(\"Switch\", data=data, pred=pred, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 463, in apply_op\n    (prefix, dtypes.as_dtype(input_arg.type).name))\nTypeError: Input 'pred' of 'Switch' Op has type float32 that does not match expected type of bool.\n\nsad..:(", "body": "Simply change `TensorflowEstimator` to `Estimator` in the origin code, would result in following Type error\n\n```\nTraceback (most recent call last):\n  File \"multiple_gpu.py\", line 42, in <module>\n    classifier.fit(X_train, y_train)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 238, in fit\n    max_steps=max_steps)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 538, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 774, in _get_train_ops\n    _, loss, train_op = self._call_model_fn(features, targets, ModeKeys.TRAIN)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 758, in _call_model_fn\n    return self._model_fn(features, targets)\n  File \"multiple_gpu.py\", line 35, in my_model\n    layers = learn.ops.dnn(X, [10, 20, 10], dropout=0.5)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/framework/python/framework/deprecation.py\", line 105, in new_func\n    return func(*args, **kwargs)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/ops/dnn_ops.py\", line 69, in dnn\n    lambda: tensor_in)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 1330, in cond\n    p_2, p_1 = switch(pred, pred)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 261, in switch\n    return gen_control_flow_ops._switch(data, pred, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_control_flow_ops.py\", line 370, in _switch\n    result = _op_def_lib.apply_op(\"Switch\", data=data, pred=pred, name=name)\n  File \"/home/xlws/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 463, in apply_op\n    (prefix, dtypes.as_dtype(input_arg.type).name))\nTypeError: Input 'pred' of 'Switch' Op has type float32 that does not match expected type of bool.\n```\n\nsad..:(\n"}
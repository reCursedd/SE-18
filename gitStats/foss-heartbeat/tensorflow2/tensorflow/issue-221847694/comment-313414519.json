{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/313414519", "html_url": "https://github.com/tensorflow/tensorflow/issues/9222#issuecomment-313414519", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9222", "id": 313414519, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzQxNDUxOQ==", "user": {"login": "BerndSchmitt", "id": 29921076, "node_id": "MDQ6VXNlcjI5OTIxMDc2", "avatar_url": "https://avatars0.githubusercontent.com/u/29921076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BerndSchmitt", "html_url": "https://github.com/BerndSchmitt", "followers_url": "https://api.github.com/users/BerndSchmitt/followers", "following_url": "https://api.github.com/users/BerndSchmitt/following{/other_user}", "gists_url": "https://api.github.com/users/BerndSchmitt/gists{/gist_id}", "starred_url": "https://api.github.com/users/BerndSchmitt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BerndSchmitt/subscriptions", "organizations_url": "https://api.github.com/users/BerndSchmitt/orgs", "repos_url": "https://api.github.com/users/BerndSchmitt/repos", "events_url": "https://api.github.com/users/BerndSchmitt/events{/privacy}", "received_events_url": "https://api.github.com/users/BerndSchmitt/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-06T14:34:11Z", "updated_at": "2017-07-06T14:35:45Z", "author_association": "NONE", "body_html": "<p>I have nearly the same problem here. (i think):</p>\n<p>System information<br>\nOS: windows 7 64 bit<br>\nTensorflow installed with for windows python 3 (with GPU) from binary (pip3 install....)</p>\n<p>Tensorflow version:</p>\n<p>import tensorflow as tf; tf.<strong>version</strong><br>\n'1.0.1'</p>\n<p>I do not have any protoc ...</p>\n<p>$ bazel version<br>\nWARNING: ignoring http_proxy in environment.<br>\nBuild label: 0.5.2- (@non-git)<br>\nBuild target: bazel-out/msys_x64-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Thu Jul 6 10:39:46 2017 (1499337586)<br>\nBuild timestamp: 1499337586<br>\nBuild timestamp as int: 1499337586</p>\n<p>Describe the problem</p>\n<p>The problem occurs when i try to build a simple script with tensorflow included <a href=\"https://www.tensorflow.org/api_guides/cc/guide\" rel=\"nofollow\">https://www.tensorflow.org/api_guides/cc/guide</a></p>\n<p>in order to understand the problem better i changed names</p>\n<p>Source code / logs<br>\nthe directory .../Sourcen/external/tensorflow-master/tensorflow/cc/example1/ contains 3 files<br>\nWORKSPACE<br>\nBUILD<br>\nexample-code.cc</p>\n<p>..... WORKSPACE<br>\n........ empty</p>\n<p>...... BUILD<br>\ncc_binary(<br>\nname = \"example-out\",<br>\nsrcs = [\"example-code.cc\"],<br>\ndeps = [<br>\n\"//tensorflow/cc:cc_ops\",<br>\n\"//tensorflow/cc:client_session\",<br>\n\"//tensorflow/core:tensorflow\",<br>\n],<br>\n)<br>\n...................................</p>\n<p>............ example-code.cc<br>\n// tensorflow/cc/example/example.cc<br>\n#include \"tensorflow/cc/client/client_session.h\"<br>\n#include \"tensorflow/cc/ops/standard_ops.h\"<br>\n#include \"tensorflow/core/framework/tensor.h\"</p>\n<p>int main() {<br>\nusing namespace tensorflow;<br>\nusing namespace tensorflow::ops;<br>\nScope root = Scope::NewRootScope();<br>\n// Matrix A = [3 2; -1 0]<br>\nauto A = Const(root, { {3.f, 2.f}, {-1.f, 0.f}});<br>\n// Vector b = [3 5]<br>\nauto b = Const(root, { {3.f, 5.f}});<br>\n// v = Ab^T<br>\nauto v = MatMul(root.WithOpName(\"v\"), A, b, MatMul::TransposeB(true));<br>\nstd::vector outputs;<br>\nClientSession session(root);<br>\n// Run and fetch v<br>\nTF_CHECK_OK(session.Run({v}, &amp;outputs));<br>\n// Expect outputs[0] == [19; -3]<br>\nLOG(INFO) &lt;&lt; outputs[0].matrix();<br>\nreturn 0;<br>\n}<br>\n..............</p>\n<p>using msys2 to run bazel in .../Sourcen/external/tensorflow-master/</p>\n<p>$ bazel run -c opt //tensorflow/cc/example1:example-out<br>\nWARNING: ignoring http_proxy in environment.<br>\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:<br>\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.<br>\n.<br>\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:<br>\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables,eg. VS140COMNTOOLS<br>\n.<br>\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:<br>\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC<br>\n.<br>\nERROR: xxxxxx...../tensorflow-master/tensorflow/cc/example1/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf//': Traceback (most recent call last):<br>\nFile \"xxxxxxxx.../tensorflow-master/tensorflow/workspace.bzl\", line 116<br>\n_apply_patch(repo_ctx, repo_ctx.attr.patch_file)<br>\nFile \"xxxxx..../tensorflow-master/tensorflow/workspace.bzl\", line 107, in _apply_patch<br>\n_execute_and_check_ret_code(repo_ctx, cmd)<br>\nFile \"xxxxx..../tensorflow-master/tensorflow/workspace.bzl\", line 91, in _execute_and_check_ret_code<br>\nfail(\"Non-zero return code({1}) when ..., &lt;2 more arguments&gt;))<br>\nNon-zero return code(1) when executing 'c:/tools/msys64/usr/bin/bash.exe -c patch -p1 -d C:/tools/msys64/tmp/_bazel_xxxxx/6esgz-yl/external/protobuf -i xxxxx..../tensorflow-master/third_party/protobuf/add_noinlines.patch':<br>\nStdout: can't find file to patch at input line 4<br>\nPerhaps you used the wrong -p or --strip option?<br>\nThe text leading up to this was:<br>\n........................................<br>\n|diff -u -r a/src/google/protobuf/compiler/cpp/cpp_file.cc b/src/google/protobuf/compiler/cpp/cpp_file.cc<br>\n|--- a/src/google/protobuf/compiler/cpp/cpp_file.cc     2017-02-10 23:55:34.000000000 +0100<br>\n|+++ b/src/google/protobuf/compiler/cpp/cpp_file.cc     2017-03-21 13:41:46.931979154 +0100<br>\n..................................<br>\nFile to patch:<br>\nSkip this patch? [y]<br>\nSkipping patch.<br>\n3 out of 3 hunks ignored</p>\n<p>Stderr:  and referenced by '//tensorflow/cc/example1:example-out'.<br>\nERROR: Analysis of target '//tensorflow/cc/example1:example-out' failed; build aborted.<br>\nINFO: Elapsed time: 9,402s<br>\nERROR: Build failed. Not running target.</p>", "body_text": "I have nearly the same problem here. (i think):\nSystem information\nOS: windows 7 64 bit\nTensorflow installed with for windows python 3 (with GPU) from binary (pip3 install....)\nTensorflow version:\nimport tensorflow as tf; tf.version\n'1.0.1'\nI do not have any protoc ...\n$ bazel version\nWARNING: ignoring http_proxy in environment.\nBuild label: 0.5.2- (@non-git)\nBuild target: bazel-out/msys_x64-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Jul 6 10:39:46 2017 (1499337586)\nBuild timestamp: 1499337586\nBuild timestamp as int: 1499337586\nDescribe the problem\nThe problem occurs when i try to build a simple script with tensorflow included https://www.tensorflow.org/api_guides/cc/guide\nin order to understand the problem better i changed names\nSource code / logs\nthe directory .../Sourcen/external/tensorflow-master/tensorflow/cc/example1/ contains 3 files\nWORKSPACE\nBUILD\nexample-code.cc\n..... WORKSPACE\n........ empty\n...... BUILD\ncc_binary(\nname = \"example-out\",\nsrcs = [\"example-code.cc\"],\ndeps = [\n\"//tensorflow/cc:cc_ops\",\n\"//tensorflow/cc:client_session\",\n\"//tensorflow/core:tensorflow\",\n],\n)\n...................................\n............ example-code.cc\n// tensorflow/cc/example/example.cc\n#include \"tensorflow/cc/client/client_session.h\"\n#include \"tensorflow/cc/ops/standard_ops.h\"\n#include \"tensorflow/core/framework/tensor.h\"\nint main() {\nusing namespace tensorflow;\nusing namespace tensorflow::ops;\nScope root = Scope::NewRootScope();\n// Matrix A = [3 2; -1 0]\nauto A = Const(root, { {3.f, 2.f}, {-1.f, 0.f}});\n// Vector b = [3 5]\nauto b = Const(root, { {3.f, 5.f}});\n// v = Ab^T\nauto v = MatMul(root.WithOpName(\"v\"), A, b, MatMul::TransposeB(true));\nstd::vector outputs;\nClientSession session(root);\n// Run and fetch v\nTF_CHECK_OK(session.Run({v}, &outputs));\n// Expect outputs[0] == [19; -3]\nLOG(INFO) << outputs[0].matrix();\nreturn 0;\n}\n..............\nusing msys2 to run bazel in .../Sourcen/external/tensorflow-master/\n$ bazel run -c opt //tensorflow/cc/example1:example-out\nWARNING: ignoring http_proxy in environment.\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\n.\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables,eg. VS140COMNTOOLS\n.\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\n.\nERROR: xxxxxx...../tensorflow-master/tensorflow/cc/example1/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf//': Traceback (most recent call last):\nFile \"xxxxxxxx.../tensorflow-master/tensorflow/workspace.bzl\", line 116\n_apply_patch(repo_ctx, repo_ctx.attr.patch_file)\nFile \"xxxxx..../tensorflow-master/tensorflow/workspace.bzl\", line 107, in _apply_patch\n_execute_and_check_ret_code(repo_ctx, cmd)\nFile \"xxxxx..../tensorflow-master/tensorflow/workspace.bzl\", line 91, in _execute_and_check_ret_code\nfail(\"Non-zero return code({1}) when ..., <2 more arguments>))\nNon-zero return code(1) when executing 'c:/tools/msys64/usr/bin/bash.exe -c patch -p1 -d C:/tools/msys64/tmp/_bazel_xxxxx/6esgz-yl/external/protobuf -i xxxxx..../tensorflow-master/third_party/protobuf/add_noinlines.patch':\nStdout: can't find file to patch at input line 4\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n........................................\n|diff -u -r a/src/google/protobuf/compiler/cpp/cpp_file.cc b/src/google/protobuf/compiler/cpp/cpp_file.cc\n|--- a/src/google/protobuf/compiler/cpp/cpp_file.cc     2017-02-10 23:55:34.000000000 +0100\n|+++ b/src/google/protobuf/compiler/cpp/cpp_file.cc     2017-03-21 13:41:46.931979154 +0100\n..................................\nFile to patch:\nSkip this patch? [y]\nSkipping patch.\n3 out of 3 hunks ignored\nStderr:  and referenced by '//tensorflow/cc/example1:example-out'.\nERROR: Analysis of target '//tensorflow/cc/example1:example-out' failed; build aborted.\nINFO: Elapsed time: 9,402s\nERROR: Build failed. Not running target.", "body": "I have nearly the same problem here. (i think):\r\n\r\nSystem information\r\nOS: windows 7 64 bit\r\nTensorflow installed with for windows python 3 (with GPU) from binary (pip3 install....)\r\n\r\nTensorflow version:\r\n\r\nimport tensorflow as tf; tf.__version__\r\n'1.0.1'\r\n\r\nI do not have any protoc ...\r\n\r\n$ bazel version\r\nWARNING: ignoring http_proxy in environment.\r\nBuild label: 0.5.2- (@non-git)\r\nBuild target: bazel-out/msys_x64-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Thu Jul 6 10:39:46 2017 (1499337586)\r\nBuild timestamp: 1499337586\r\nBuild timestamp as int: 1499337586\r\n\r\n\r\n\r\nDescribe the problem\r\n\r\nThe problem occurs when i try to build a simple script with tensorflow included https://www.tensorflow.org/api_guides/cc/guide\r\n\r\nin order to understand the problem better i changed names\r\n\r\nSource code / logs\r\nthe directory .../Sourcen/external/tensorflow-master/tensorflow/cc/example1/ contains 3 files\r\nWORKSPACE\r\nBUILD\r\nexample-code.cc\r\n\r\n..... WORKSPACE \r\n........ empty\r\n\r\n\r\n...... BUILD\r\ncc_binary(\r\n    name = \"example-out\",\r\n    srcs = [\"example-code.cc\"],\r\n    deps = [\r\n        \"//tensorflow/cc:cc_ops\",\r\n        \"//tensorflow/cc:client_session\",\r\n        \"//tensorflow/core:tensorflow\",\r\n    ],\r\n)\r\n...................................\r\n\r\n\r\n............ example-code.cc\r\n// tensorflow/cc/example/example.cc\r\n#include \"tensorflow/cc/client/client_session.h\"\r\n#include \"tensorflow/cc/ops/standard_ops.h\"\r\n#include \"tensorflow/core/framework/tensor.h\"\r\n\r\nint main() {\r\n  using namespace tensorflow;\r\n  using namespace tensorflow::ops;\r\n  Scope root = Scope::NewRootScope();\r\n  // Matrix A = [3 2; -1 0]\r\n  auto A = Const(root, { {3.f, 2.f}, {-1.f, 0.f}});\r\n  // Vector b = [3 5]\r\n  auto b = Const(root, { {3.f, 5.f}});\r\n  // v = Ab^T\r\n  auto v = MatMul(root.WithOpName(\"v\"), A, b, MatMul::TransposeB(true));\r\n  std::vector<Tensor> outputs;\r\n  ClientSession session(root);\r\n  // Run and fetch v\r\n  TF_CHECK_OK(session.Run({v}, &outputs));\r\n  // Expect outputs[0] == [19; -3]\r\n  LOG(INFO) << outputs[0].matrix<float>();\r\n  return 0;\r\n}\r\n..............\r\n\r\n\r\nusing msys2 to run bazel in .../Sourcen/external/tensorflow-master/\r\n\r\n\r\n$ bazel run -c opt //tensorflow/cc/example1:example-out\r\nWARNING: ignoring http_proxy in environment.\r\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:\r\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\r\n.\r\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:\r\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables,eg. VS140COMNTOOLS\r\n.\r\nWARNING: C:/tools/msys64/tmp/_bazel_xxxxxxxx/6esgz-yl/external/bazel_tools/tools/cpp/cc_configure.bzl:67:3:\r\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\\r\n.\r\nERROR: xxxxxx...../tensorflow-master/tensorflow/cc/example1/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf//': Traceback (most recent call last):\r\n        File \"xxxxxxxx.../tensorflow-master/tensorflow/workspace.bzl\", line 116\r\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\r\n        File \"xxxxx..../tensorflow-master/tensorflow/workspace.bzl\", line 107, in _apply_patch\r\n                _execute_and_check_ret_code(repo_ctx, cmd)\r\n        File \"xxxxx..../tensorflow-master/tensorflow/workspace.bzl\", line 91, in _execute_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ..., <2 more arguments>))\r\nNon-zero return code(1) when executing 'c:/tools/msys64/usr/bin/bash.exe -c patch -p1 -d C:/tools/msys64/tmp/_bazel_xxxxx/6esgz-yl/external/protobuf -i xxxxx..../tensorflow-master/third_party/protobuf/add_noinlines.patch':\r\nStdout: can't find file to patch at input line 4\r\nPerhaps you used the wrong -p or --strip option?\r\nThe text leading up to this was:\r\n........................................\r\n|diff -u -r a/src/google/protobuf/compiler/cpp/cpp_file.cc b/src/google/protobuf/compiler/cpp/cpp_file.cc\r\n|--- a/src/google/protobuf/compiler/cpp/cpp_file.cc     2017-02-10 23:55:34.000000000 +0100\r\n|+++ b/src/google/protobuf/compiler/cpp/cpp_file.cc     2017-03-21 13:41:46.931979154 +0100\r\n..................................\r\nFile to patch:\r\nSkip this patch? [y]\r\nSkipping patch.\r\n3 out of 3 hunks ignored\r\n\r\nStderr:  and referenced by '//tensorflow/cc/example1:example-out'.\r\nERROR: Analysis of target '//tensorflow/cc/example1:example-out' failed; build aborted.\r\nINFO: Elapsed time: 9,402s\r\nERROR: Build failed. Not running target.\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/294198668", "html_url": "https://github.com/tensorflow/tensorflow/issues/9222#issuecomment-294198668", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9222", "id": 294198668, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDE5ODY2OA==", "user": {"login": "JMBokhorst", "id": 21331645, "node_id": "MDQ6VXNlcjIxMzMxNjQ1", "avatar_url": "https://avatars3.githubusercontent.com/u/21331645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JMBokhorst", "html_url": "https://github.com/JMBokhorst", "followers_url": "https://api.github.com/users/JMBokhorst/followers", "following_url": "https://api.github.com/users/JMBokhorst/following{/other_user}", "gists_url": "https://api.github.com/users/JMBokhorst/gists{/gist_id}", "starred_url": "https://api.github.com/users/JMBokhorst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JMBokhorst/subscriptions", "organizations_url": "https://api.github.com/users/JMBokhorst/orgs", "repos_url": "https://api.github.com/users/JMBokhorst/repos", "events_url": "https://api.github.com/users/JMBokhorst/events{/privacy}", "received_events_url": "https://api.github.com/users/JMBokhorst/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-14T17:37:43Z", "updated_at": "2017-04-14T17:39:28Z", "author_association": "NONE", "body_html": "<p>Sorry my bad:</p>\n<hr>\n<h3>System information</h3>\n<p>OS: windows 10 64 bit<br>\nTensorflow installed with for windows python 3 (without GPU) from binary (pip3 install....)<br>\nTensorflow version:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>import tensorflow as tf; print(tf.<strong>version</strong>)<br>\n1.0.1</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>$ protoc --version<br>\nlibprotoc 3.2.0</p>\n<p>$ bazel version<br>\nBuild label: 0.4.5<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Thu Mar 16 13:02:06 2017 (1489669326)<br>\nBuild timestamp: 1489669326<br>\nBuild timestamp as int: 1489669326</p>\n<h3>Describe the problem</h3>\n<p>While building a script with tensorflow as dependancy, bazel fails on protobuf when bazel is analyzing.</p>\n<p>Last INFO before i get for the error:<br>\nINFO: Downloading <a href=\"http://bazel-mirror.storage.googleapis.com/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://bazel-mirror.storage.googleapis.com/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 40,960 bytes</p>\n<p>The problem occurs when i try to build a simple script with tensorflow included, or when i just try to build anything with tensorflow as dependancy.</p>\n<p>Problem also only occurs when including deps[//tensorflow/core:tensorflow]. Problem does not occur when building the same files on a mac (also with tensorflow v1.0.1 and bazel 0.4.5).</p>\n<h3>Source code / logs</h3>\n<p>using msys2 to run bazel:</p>\n<p>$ bazel build --cpu=x64_windows_msvc :test.dll<br>\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:<br>\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.<br>\n.<br>\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:<br>\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables,eg. VS140COMNTOOLS<br>\n.<br>\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:<br>\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC<br>\n.<br>\nERROR: C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/_test_tensorflow_files/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf//': Traceback (most recent call last):<br>\nFile \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 98<br>\n_apply_patch(repo_ctx, repo_ctx.attr.patch_file)<br>\nFile \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 87, in _apply_patch<br>\n_execute_and_check_ret_code(repo_ctx, [\"patch\", \"-p1\", \"-d\", r...), &lt;2 more arguments&gt;])<br>\nFile \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 79, in _execute_and_check_ret_code<br>\nfail(\"Non-zero return code({1}) when ..., &lt;2 more arguments&gt;))<br>\nNon-zero return code(256) when executing 'patch -p1 -d C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/protobuf -i C:/_shared/_tensorflow_build_test/tf/tensorflow/third_party/protobuf/add_noinlines.patch':<br>\nStdout:<br>\nStderr: java.io.IOException: CreateProcess(): The system cannot find the file specified.<br>\nand referenced by '//tensorflow/_test_tensorflow_files:test.dll'.<br>\nERROR: Analysis of target '//tensorflow/_test_tensorflow_files:test.dll' failed; build aborted.<br>\nINFO: Elapsed time: 12.000s</p>", "body_text": "Sorry my bad:\n\nSystem information\nOS: windows 10 64 bit\nTensorflow installed with for windows python 3 (without GPU) from binary (pip3 install....)\nTensorflow version:\n\n\n\nimport tensorflow as tf; print(tf.version)\n1.0.1\n\n\n\n$ protoc --version\nlibprotoc 3.2.0\n$ bazel version\nBuild label: 0.4.5\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Mar 16 13:02:06 2017 (1489669326)\nBuild timestamp: 1489669326\nBuild timestamp as int: 1489669326\nDescribe the problem\nWhile building a script with tensorflow as dependancy, bazel fails on protobuf when bazel is analyzing.\nLast INFO before i get for the error:\nINFO: Downloading http://bazel-mirror.storage.googleapis.com/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 40,960 bytes\nThe problem occurs when i try to build a simple script with tensorflow included, or when i just try to build anything with tensorflow as dependancy.\nProblem also only occurs when including deps[//tensorflow/core:tensorflow]. Problem does not occur when building the same files on a mac (also with tensorflow v1.0.1 and bazel 0.4.5).\nSource code / logs\nusing msys2 to run bazel:\n$ bazel build --cpu=x64_windows_msvc :test.dll\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\n.\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables,eg. VS140COMNTOOLS\n.\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\n.\nERROR: C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/_test_tensorflow_files/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf//': Traceback (most recent call last):\nFile \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 98\n_apply_patch(repo_ctx, repo_ctx.attr.patch_file)\nFile \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 87, in _apply_patch\n_execute_and_check_ret_code(repo_ctx, [\"patch\", \"-p1\", \"-d\", r...), <2 more arguments>])\nFile \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 79, in _execute_and_check_ret_code\nfail(\"Non-zero return code({1}) when ..., <2 more arguments>))\nNon-zero return code(256) when executing 'patch -p1 -d C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/protobuf -i C:/_shared/_tensorflow_build_test/tf/tensorflow/third_party/protobuf/add_noinlines.patch':\nStdout:\nStderr: java.io.IOException: CreateProcess(): The system cannot find the file specified.\nand referenced by '//tensorflow/_test_tensorflow_files:test.dll'.\nERROR: Analysis of target '//tensorflow/_test_tensorflow_files:test.dll' failed; build aborted.\nINFO: Elapsed time: 12.000s", "body": "Sorry my bad: \r\n\r\n------------------------\r\n\r\n### System information\r\nOS: windows 10 64 bit\r\nTensorflow installed with for windows python 3 (without GPU) from binary (pip3 install....)\r\nTensorflow version: \r\n>>> import tensorflow as tf; print(tf.__version__)\r\n1.0.1\r\n\r\n$ protoc --version\r\nlibprotoc 3.2.0\r\n\r\n$ bazel version\r\nBuild label: 0.4.5\r\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Thu Mar 16 13:02:06 2017 (1489669326)\r\nBuild timestamp: 1489669326\r\nBuild timestamp as int: 1489669326\r\n\r\n### Describe the problem\r\nWhile building a script with tensorflow as dependancy, bazel fails on protobuf when bazel is analyzing. \r\n\r\nLast INFO before i get for the error: \r\nINFO: Downloading http://bazel-mirror.storage.googleapis.com/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 40,960 bytes\r\n \r\nThe problem occurs when i try to build a simple script with tensorflow included, or when i just try to build anything with tensorflow as dependancy. \r\n\r\nProblem also only occurs when including deps[//tensorflow/core:tensorflow]. Problem does not occur when building the same files on a mac (also with tensorflow v1.0.1 and bazel 0.4.5).\r\n\r\n### Source code / logs\r\nusing msys2 to run bazel: \r\n\r\n$ bazel build --cpu=x64_windows_msvc :test.dll\r\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:\r\nAuto-Configuration Warning: 'BAZEL_VC' is not set, start looking for the latest Visual C++ installed.\r\n.\r\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:\r\nAuto-Configuration Warning: Looking for VS%VERSION%COMNTOOLS environment variables,eg. VS140COMNTOOLS\r\n.\r\nWARNING: C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/bazel_tools/tools/cpp/cc_configure.bzl:57:3:\r\nAuto-Configuration Warning: Visual C++ build tools found at C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\\r\n.\r\nERROR: C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/_test_tensorflow_files/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf//': Traceback (most recent call last):\r\n        File \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 98\r\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\r\n        File \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 87, in _apply_patch\r\n                _execute_and_check_ret_code(repo_ctx, [\"patch\", \"-p1\", \"-d\", r...), <2 more arguments>])\r\n        File \"C:/_shared/_tensorflow_build_test/tf/tensorflow/tensorflow/workspace.bzl\", line 79, in _execute_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ..., <2 more arguments>))\r\nNon-zero return code(256) when executing 'patch -p1 -d C:/tools/msys64/tmp/_bazel_john/hawbuxgu/external/protobuf -i C:/_shared/_tensorflow_build_test/tf/tensorflow/third_party/protobuf/add_noinlines.patch':\r\nStdout:\r\nStderr: java.io.IOException: CreateProcess(): The system cannot find the file specified.\r\n and referenced by '//tensorflow/_test_tensorflow_files:test.dll'.\r\nERROR: Analysis of target '//tensorflow/_test_tensorflow_files:test.dll' failed; build aborted.\r\nINFO: Elapsed time: 12.000s\r\n "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17530", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17530/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17530/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17530/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17530", "id": 303323337, "node_id": "MDU6SXNzdWUzMDMzMjMzMzc=", "number": 17530, "title": "Feature request:  Increase kMaxEagerParentSize or make it python version dependent", "user": {"login": "RichDubielzig", "id": 24554323, "node_id": "MDQ6VXNlcjI0NTU0MzIz", "avatar_url": "https://avatars2.githubusercontent.com/u/24554323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RichDubielzig", "html_url": "https://github.com/RichDubielzig", "followers_url": "https://api.github.com/users/RichDubielzig/followers", "following_url": "https://api.github.com/users/RichDubielzig/following{/other_user}", "gists_url": "https://api.github.com/users/RichDubielzig/gists{/gist_id}", "starred_url": "https://api.github.com/users/RichDubielzig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RichDubielzig/subscriptions", "organizations_url": "https://api.github.com/users/RichDubielzig/orgs", "repos_url": "https://api.github.com/users/RichDubielzig/repos", "events_url": "https://api.github.com/users/RichDubielzig/events{/privacy}", "received_events_url": "https://api.github.com/users/RichDubielzig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "agarwal-ashish", "id": 19335798, "node_id": "MDQ6VXNlcjE5MzM1Nzk4", "avatar_url": "https://avatars3.githubusercontent.com/u/19335798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agarwal-ashish", "html_url": "https://github.com/agarwal-ashish", "followers_url": "https://api.github.com/users/agarwal-ashish/followers", "following_url": "https://api.github.com/users/agarwal-ashish/following{/other_user}", "gists_url": "https://api.github.com/users/agarwal-ashish/gists{/gist_id}", "starred_url": "https://api.github.com/users/agarwal-ashish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agarwal-ashish/subscriptions", "organizations_url": "https://api.github.com/users/agarwal-ashish/orgs", "repos_url": "https://api.github.com/users/agarwal-ashish/repos", "events_url": "https://api.github.com/users/agarwal-ashish/events{/privacy}", "received_events_url": "https://api.github.com/users/agarwal-ashish/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "agarwal-ashish", "id": 19335798, "node_id": "MDQ6VXNlcjE5MzM1Nzk4", "avatar_url": "https://avatars3.githubusercontent.com/u/19335798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agarwal-ashish", "html_url": "https://github.com/agarwal-ashish", "followers_url": "https://api.github.com/users/agarwal-ashish/followers", "following_url": "https://api.github.com/users/agarwal-ashish/following{/other_user}", "gists_url": "https://api.github.com/users/agarwal-ashish/gists{/gist_id}", "starred_url": "https://api.github.com/users/agarwal-ashish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agarwal-ashish/subscriptions", "organizations_url": "https://api.github.com/users/agarwal-ashish/orgs", "repos_url": "https://api.github.com/users/agarwal-ashish/repos", "events_url": "https://api.github.com/users/agarwal-ashish/events{/privacy}", "received_events_url": "https://api.github.com/users/agarwal-ashish/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-03-08T01:32:24Z", "updated_at": "2018-03-17T01:07:50Z", "closed_at": "2018-03-17T00:06:57Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nN/A (problem occurs on startup)</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 14.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nSource</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\ntip of tree</li>\n<li><strong>Python version</strong>:<br>\n3.6 (from source)</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.10.1</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\n4.8.4</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nunused</li>\n<li><strong>GPU model and memory</strong>:<br>\nn/a</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nimport tensorflow</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>We wanted to evaluate our patches in Valgrind, so we made a custom build of python 3.6 from source (it's more valgrind-friendly), then compiled TensorFlow against that.</p>\n<p>When this done, 'import tensorflow' fails on a python exception because the size of the base class of EagerTensor in Python 3.6 is greater than kMaxEagerParentSize.</p>\n<p>Issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"295185537\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16836\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/16836/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/16836\">#16836</a> was opened on this a month ago, but closed by its creator.  When we encountered this problem, we found that we could simply set the value of kMaxEagerParentSize to 48 and everything would run with no obvious issues.</p>\n<p>Is there a reason that kMaxEagerParentSize must always equal 32, or can it be increased, or possibly even adjusted depending on which version of python TensorFlow is being compiled for?</p>\n<h3>Source code / logs</h3>\n<pre><code>diff --git a/tensorflow/python/eager/pywrap_tensor.cc b/tensorflow/python/eager/pywrap_tensor.cc\nindex 3ec2109..cc1c0f7 100644\n--- a/tensorflow/python/eager/pywrap_tensor.cc\n+++ b/tensorflow/python/eager/pywrap_tensor.cc\n@@ -163,7 +163,7 @@ PyObject* PyIntFromDataType(TF_DataType l) {\n \n extern \"C\" {\n \n-static const int kMaxEagerTensorParentSize = 32;\n+static const int kMaxEagerTensorParentSize = 48;\n \n // TODO(agarwal): store context handle in EagerTensor.\n typedef struct EagerTensor {\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nN/A (problem occurs on startup)\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 14.04\nTensorFlow installed from (source or binary):\nSource\nTensorFlow version (use command below):\ntip of tree\nPython version:\n3.6 (from source)\nBazel version (if compiling from source):\n0.10.1\nGCC/Compiler version (if compiling from source):\n4.8.4\nCUDA/cuDNN version:\nunused\nGPU model and memory:\nn/a\nExact command to reproduce:\nimport tensorflow\n\nDescribe the problem\nWe wanted to evaluate our patches in Valgrind, so we made a custom build of python 3.6 from source (it's more valgrind-friendly), then compiled TensorFlow against that.\nWhen this done, 'import tensorflow' fails on a python exception because the size of the base class of EagerTensor in Python 3.6 is greater than kMaxEagerParentSize.\nIssue #16836 was opened on this a month ago, but closed by its creator.  When we encountered this problem, we found that we could simply set the value of kMaxEagerParentSize to 48 and everything would run with no obvious issues.\nIs there a reason that kMaxEagerParentSize must always equal 32, or can it be increased, or possibly even adjusted depending on which version of python TensorFlow is being compiled for?\nSource code / logs\ndiff --git a/tensorflow/python/eager/pywrap_tensor.cc b/tensorflow/python/eager/pywrap_tensor.cc\nindex 3ec2109..cc1c0f7 100644\n--- a/tensorflow/python/eager/pywrap_tensor.cc\n+++ b/tensorflow/python/eager/pywrap_tensor.cc\n@@ -163,7 +163,7 @@ PyObject* PyIntFromDataType(TF_DataType l) {\n \n extern \"C\" {\n \n-static const int kMaxEagerTensorParentSize = 32;\n+static const int kMaxEagerTensorParentSize = 48;\n \n // TODO(agarwal): store context handle in EagerTensor.\n typedef struct EagerTensor {", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nN/A (problem occurs on startup)\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu 14.04\r\n- **TensorFlow installed from (source or binary)**:\r\nSource\r\n- **TensorFlow version (use command below)**:\r\ntip of tree\r\n- **Python version**: \r\n3.6 (from source)\r\n- **Bazel version (if compiling from source)**:\r\n0.10.1\r\n- **GCC/Compiler version (if compiling from source)**:\r\n4.8.4\r\n- **CUDA/cuDNN version**:\r\nunused\r\n- **GPU model and memory**:\r\nn/a\r\n- **Exact command to reproduce**:\r\nimport tensorflow\r\n\r\n### Describe the problem\r\nWe wanted to evaluate our patches in Valgrind, so we made a custom build of python 3.6 from source (it's more valgrind-friendly), then compiled TensorFlow against that.\r\n\r\nWhen this done, 'import tensorflow' fails on a python exception because the size of the base class of EagerTensor in Python 3.6 is greater than kMaxEagerParentSize.\r\n\r\nIssue #16836 was opened on this a month ago, but closed by its creator.  When we encountered this problem, we found that we could simply set the value of kMaxEagerParentSize to 48 and everything would run with no obvious issues.\r\n\r\nIs there a reason that kMaxEagerParentSize must always equal 32, or can it be increased, or possibly even adjusted depending on which version of python TensorFlow is being compiled for?\r\n\r\n\r\n### Source code / logs\r\n```\r\ndiff --git a/tensorflow/python/eager/pywrap_tensor.cc b/tensorflow/python/eager/pywrap_tensor.cc\r\nindex 3ec2109..cc1c0f7 100644\r\n--- a/tensorflow/python/eager/pywrap_tensor.cc\r\n+++ b/tensorflow/python/eager/pywrap_tensor.cc\r\n@@ -163,7 +163,7 @@ PyObject* PyIntFromDataType(TF_DataType l) {\r\n \r\n extern \"C\" {\r\n \r\n-static const int kMaxEagerTensorParentSize = 32;\r\n+static const int kMaxEagerTensorParentSize = 48;\r\n \r\n // TODO(agarwal): store context handle in EagerTensor.\r\n typedef struct EagerTensor {\r\n```"}
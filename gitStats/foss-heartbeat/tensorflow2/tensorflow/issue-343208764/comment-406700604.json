{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/406700604", "html_url": "https://github.com/tensorflow/tensorflow/issues/20999#issuecomment-406700604", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20999", "id": 406700604, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjcwMDYwNA==", "user": {"login": "nairouz", "id": 10966954, "node_id": "MDQ6VXNlcjEwOTY2OTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/10966954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nairouz", "html_url": "https://github.com/nairouz", "followers_url": "https://api.github.com/users/nairouz/followers", "following_url": "https://api.github.com/users/nairouz/following{/other_user}", "gists_url": "https://api.github.com/users/nairouz/gists{/gist_id}", "starred_url": "https://api.github.com/users/nairouz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nairouz/subscriptions", "organizations_url": "https://api.github.com/users/nairouz/orgs", "repos_url": "https://api.github.com/users/nairouz/repos", "events_url": "https://api.github.com/users/nairouz/events{/privacy}", "received_events_url": "https://api.github.com/users/nairouz/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-20T19:12:36Z", "updated_at": "2018-07-20T19:12:36Z", "author_association": "NONE", "body_html": "<p>Even when I added the attribute \"lr\" to the model  <code>model.optimizer.lr</code>. It is producing another error:</p>\n<h3>Log</h3>\n<p>AttributeErrorTraceback (most recent call last)<br>\n in ()<br>\n24<br>\n25 model.optimizer.lr = 0.01<br>\n---&gt; 26 model.fit(x=X, y=Y, batch_size=1, epochs=10, callbacks=[lr_schedule])</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, **kwargs)<br>\n1346           initial_epoch=initial_epoch,<br>\n1347           steps_per_epoch=steps_per_epoch,<br>\n-&gt; 1348           validation_steps=validation_steps)<br>\n1349<br>\n1350   def evaluate(self,</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_arrays.pyc in fit_loop(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, callback_metrics, initial_epoch, steps_per_epoch, validation_steps)<br>\n183       m.reset_states()<br>\n184     # Update callbacks<br>\n--&gt; 185     callbacks.on_epoch_begin(epoch)<br>\n186     epoch_logs = {}<br>\n187     if steps_per_epoch is not None:</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/callbacks.pyc in on_epoch_begin(self, epoch, logs)<br>\n79     logs = logs or {}<br>\n80     for callback in self.callbacks:<br>\n---&gt; 81       callback.on_epoch_begin(epoch, logs)<br>\n82     self._delta_t_batch = 0.<br>\n83     self._delta_ts_batch_begin = deque([], maxlen=self.queue_length)</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/callbacks.pyc in on_epoch_begin(self, epoch, logs)<br>\n640       raise ValueError('The output of the \"schedule\" function '<br>\n641                        'should be float.')<br>\n--&gt; 642     K.set_value(self.model.optimizer.lr, lr)<br>\n643     if self.verbose &gt; 0:<br>\n644       print('\\nEpoch %05d: LearningRateScheduler reducing learning '</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/backend.pyc in set_value(x, value)<br>\n2669           (of the same shape).<br>\n2670   \"\"\"<br>\n-&gt; 2671   value = np.asarray(value, dtype=dtype(x))<br>\n2672   if context.executing_eagerly():<br>\n2673     x.assign(value)</p>\n<p>/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/backend.pyc in dtype(x)<br>\n914   ```<br>\n915   \"\"\"<br>\n--&gt; 916   return x.dtype.base_dtype.name<br>\n917<br>\n918</p>\n<p>AttributeError: 'float' object has no attribute 'dtype'</p>", "body_text": "Even when I added the attribute \"lr\" to the model  model.optimizer.lr. It is producing another error:\nLog\nAttributeErrorTraceback (most recent call last)\n in ()\n24\n25 model.optimizer.lr = 0.01\n---> 26 model.fit(x=X, y=Y, batch_size=1, epochs=10, callbacks=[lr_schedule])\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, **kwargs)\n1346           initial_epoch=initial_epoch,\n1347           steps_per_epoch=steps_per_epoch,\n-> 1348           validation_steps=validation_steps)\n1349\n1350   def evaluate(self,\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_arrays.pyc in fit_loop(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, callback_metrics, initial_epoch, steps_per_epoch, validation_steps)\n183       m.reset_states()\n184     # Update callbacks\n--> 185     callbacks.on_epoch_begin(epoch)\n186     epoch_logs = {}\n187     if steps_per_epoch is not None:\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/callbacks.pyc in on_epoch_begin(self, epoch, logs)\n79     logs = logs or {}\n80     for callback in self.callbacks:\n---> 81       callback.on_epoch_begin(epoch, logs)\n82     self._delta_t_batch = 0.\n83     self._delta_ts_batch_begin = deque([], maxlen=self.queue_length)\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/callbacks.pyc in on_epoch_begin(self, epoch, logs)\n640       raise ValueError('The output of the \"schedule\" function '\n641                        'should be float.')\n--> 642     K.set_value(self.model.optimizer.lr, lr)\n643     if self.verbose > 0:\n644       print('\\nEpoch %05d: LearningRateScheduler reducing learning '\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/backend.pyc in set_value(x, value)\n2669           (of the same shape).\n2670   \"\"\"\n-> 2671   value = np.asarray(value, dtype=dtype(x))\n2672   if context.executing_eagerly():\n2673     x.assign(value)\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/backend.pyc in dtype(x)\n914   ```\n915   \"\"\"\n--> 916   return x.dtype.base_dtype.name\n917\n918\nAttributeError: 'float' object has no attribute 'dtype'", "body": "Even when I added the attribute \"lr\" to the model  `model.optimizer.lr`. It is producing another error:\r\n\r\n### Log\r\nAttributeErrorTraceback (most recent call last)\r\n<ipython-input-11-3f77add48361> in <module>()\r\n     24 \r\n     25 model.optimizer.lr = 0.01\r\n---> 26 model.fit(x=X, y=Y, batch_size=1, epochs=10, callbacks=[lr_schedule])\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, **kwargs)\r\n   1346           initial_epoch=initial_epoch,\r\n   1347           steps_per_epoch=steps_per_epoch,\r\n-> 1348           validation_steps=validation_steps)\r\n   1349 \r\n   1350   def evaluate(self,\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_arrays.pyc in fit_loop(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, callback_metrics, initial_epoch, steps_per_epoch, validation_steps)\r\n    183       m.reset_states()\r\n    184     # Update callbacks\r\n--> 185     callbacks.on_epoch_begin(epoch)\r\n    186     epoch_logs = {}\r\n    187     if steps_per_epoch is not None:\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/callbacks.pyc in on_epoch_begin(self, epoch, logs)\r\n     79     logs = logs or {}\r\n     80     for callback in self.callbacks:\r\n---> 81       callback.on_epoch_begin(epoch, logs)\r\n     82     self._delta_t_batch = 0.\r\n     83     self._delta_ts_batch_begin = deque([], maxlen=self.queue_length)\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/callbacks.pyc in on_epoch_begin(self, epoch, logs)\r\n    640       raise ValueError('The output of the \"schedule\" function '\r\n    641                        'should be float.')\r\n--> 642     K.set_value(self.model.optimizer.lr, lr)\r\n    643     if self.verbose > 0:\r\n    644       print('\\nEpoch %05d: LearningRateScheduler reducing learning '\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/backend.pyc in set_value(x, value)\r\n   2669           (of the same shape).\r\n   2670   \"\"\"\r\n-> 2671   value = np.asarray(value, dtype=dtype(x))\r\n   2672   if context.executing_eagerly():\r\n   2673     x.assign(value)\r\n\r\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/backend.pyc in dtype(x)\r\n    914   ```\r\n    915   \"\"\"\r\n--> 916   return x.dtype.base_dtype.name\r\n    917 \r\n    918 \r\n\r\nAttributeError: 'float' object has no attribute 'dtype' "}
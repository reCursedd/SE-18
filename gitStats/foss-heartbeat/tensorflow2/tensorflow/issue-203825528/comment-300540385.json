{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300540385", "html_url": "https://github.com/tensorflow/tensorflow/issues/7128#issuecomment-300540385", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7128", "id": 300540385, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDU0MDM4NQ==", "user": {"login": "suiyuan2009", "id": 5105569, "node_id": "MDQ6VXNlcjUxMDU1Njk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5105569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suiyuan2009", "html_url": "https://github.com/suiyuan2009", "followers_url": "https://api.github.com/users/suiyuan2009/followers", "following_url": "https://api.github.com/users/suiyuan2009/following{/other_user}", "gists_url": "https://api.github.com/users/suiyuan2009/gists{/gist_id}", "starred_url": "https://api.github.com/users/suiyuan2009/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suiyuan2009/subscriptions", "organizations_url": "https://api.github.com/users/suiyuan2009/orgs", "repos_url": "https://api.github.com/users/suiyuan2009/repos", "events_url": "https://api.github.com/users/suiyuan2009/events{/privacy}", "received_events_url": "https://api.github.com/users/suiyuan2009/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-10T16:36:20Z", "updated_at": "2017-05-10T16:37:48Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23068\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yaroslavvb\">@yaroslavvb</a> , I both installed mkl_dnn 2018 and full mkl 2018, add</p>\n<pre><code>#ifdef INTEL_MKL\n#define EIGEN_USE_MKL_ALL\n#endif // INTEL_MKL\n</code></pre>\n<p>to <code>tensorflow/core/kernels/qr_op_impl.h</code>, run <code>bazel build --config=opt --config=cuda --define=using_mkl=true //tensorflow/tools/pip_package:build_pip_package</code> to build, got</p>\n<pre><code>TF QR on 4096 by 4096 matrix in 2.59 seconds\nnumpy QR on 4096 by 4096 matrix in 2.64 seconds\n</code></pre>", "body_text": "@yaroslavvb , I both installed mkl_dnn 2018 and full mkl 2018, add\n#ifdef INTEL_MKL\n#define EIGEN_USE_MKL_ALL\n#endif // INTEL_MKL\n\nto tensorflow/core/kernels/qr_op_impl.h, run bazel build --config=opt --config=cuda --define=using_mkl=true //tensorflow/tools/pip_package:build_pip_package to build, got\nTF QR on 4096 by 4096 matrix in 2.59 seconds\nnumpy QR on 4096 by 4096 matrix in 2.64 seconds", "body": "@yaroslavvb , I both installed mkl_dnn 2018 and full mkl 2018, add\r\n```\r\n#ifdef INTEL_MKL\r\n#define EIGEN_USE_MKL_ALL\r\n#endif // INTEL_MKL\r\n```\r\nto `tensorflow/core/kernels/qr_op_impl.h`, run `bazel build --config=opt --config=cuda --define=using_mkl=true //tensorflow/tools/pip_package:build_pip_package` to build, got\r\n```\r\nTF QR on 4096 by 4096 matrix in 2.59 seconds\r\nnumpy QR on 4096 by 4096 matrix in 2.64 seconds\r\n```"}
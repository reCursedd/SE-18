{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7128", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7128/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7128/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7128/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7128", "id": 203825528, "node_id": "MDU6SXNzdWUyMDM4MjU1Mjg=", "number": 7128, "title": "QR decomposition is slow", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2017-01-28T19:20:15Z", "updated_at": "2018-02-08T00:44:41Z", "closed_at": "2018-02-08T00:44:41Z", "author_association": "CONTRIBUTOR", "body_html": "<p>We are doing a bunch of of QR decompositions in numpy. I did preliminary investigation of moving them to TF, but TF version is slow compared to numpy.</p>\n<p>Below is a benchmark script that runs QR decomposition of 4096x4096 matrix. It took 7.3 seconds in TF and 1.93 in numpy MKL. Numpy MKL is the default numpy that comes when installing Anaconda.</p>\n<p>version: HEAD from last week, built with <code>--config=cuda --config=opt</code><br>\ncpu: 32 core Intel(R) Xeon(R) CPU E5-2630 v3 @ 2.40GHz<br>\n<a href=\"https://github.com/yaroslavvb/stuff/blob/master/tiny_runs/qr_test.py\">https://github.com/yaroslavvb/stuff/blob/master/tiny_runs/qr_test.py</a></p>\n<p>Note that <code>pip install --upgrade $TF_BINARY_URL</code> will overwrite MKL numpy with OpenBLAS numpy that is actually slower than TF version. The way to check is to look at <code>np.__config__.show()</code> and look for strings like <code>mkl_intel_lp64</code>. You can get MKL version back by uninstalling numpy and doing <code>conda install numpy</code></p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16907534\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rmlarsen\">@rmlarsen</a></p>", "body_text": "We are doing a bunch of of QR decompositions in numpy. I did preliminary investigation of moving them to TF, but TF version is slow compared to numpy.\nBelow is a benchmark script that runs QR decomposition of 4096x4096 matrix. It took 7.3 seconds in TF and 1.93 in numpy MKL. Numpy MKL is the default numpy that comes when installing Anaconda.\nversion: HEAD from last week, built with --config=cuda --config=opt\ncpu: 32 core Intel(R) Xeon(R) CPU E5-2630 v3 @ 2.40GHz\nhttps://github.com/yaroslavvb/stuff/blob/master/tiny_runs/qr_test.py\nNote that pip install --upgrade $TF_BINARY_URL will overwrite MKL numpy with OpenBLAS numpy that is actually slower than TF version. The way to check is to look at np.__config__.show() and look for strings like mkl_intel_lp64. You can get MKL version back by uninstalling numpy and doing conda install numpy\n@rmlarsen", "body": "We are doing a bunch of of QR decompositions in numpy. I did preliminary investigation of moving them to TF, but TF version is slow compared to numpy.\r\n\r\nBelow is a benchmark script that runs QR decomposition of 4096x4096 matrix. It took 7.3 seconds in TF and 1.93 in numpy MKL. Numpy MKL is the default numpy that comes when installing Anaconda.\r\n\r\nversion: HEAD from last week, built with `--config=cuda --config=opt`\r\ncpu: 32 core Intel(R) Xeon(R) CPU E5-2630 v3 @ 2.40GHz\r\nhttps://github.com/yaroslavvb/stuff/blob/master/tiny_runs/qr_test.py\r\n\r\nNote that `pip install --upgrade $TF_BINARY_URL` will overwrite MKL numpy with OpenBLAS numpy that is actually slower than TF version. The way to check is to look at `np.__config__.show()` and look for strings like `mkl_intel_lp64`. You can get MKL version back by uninstalling numpy and doing `conda install numpy`\r\n\r\n@rmlarsen \r\n"}
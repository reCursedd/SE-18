{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6554", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6554/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6554/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6554/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6554", "id": 197949871, "node_id": "MDU6SXNzdWUxOTc5NDk4NzE=", "number": 6554, "title": "Bug or feature - Confusing shapes of Tensor resulted from `tf.decode_csv`", "user": {"login": "BaiGang", "id": 241076, "node_id": "MDQ6VXNlcjI0MTA3Ng==", "avatar_url": "https://avatars0.githubusercontent.com/u/241076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BaiGang", "html_url": "https://github.com/BaiGang", "followers_url": "https://api.github.com/users/BaiGang/followers", "following_url": "https://api.github.com/users/BaiGang/following{/other_user}", "gists_url": "https://api.github.com/users/BaiGang/gists{/gist_id}", "starred_url": "https://api.github.com/users/BaiGang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BaiGang/subscriptions", "organizations_url": "https://api.github.com/users/BaiGang/orgs", "repos_url": "https://api.github.com/users/BaiGang/repos", "events_url": "https://api.github.com/users/BaiGang/events{/privacy}", "received_events_url": "https://api.github.com/users/BaiGang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-29T03:54:35Z", "updated_at": "2016-12-29T09:11:34Z", "closed_at": "2016-12-29T07:58:39Z", "author_association": "NONE", "body_html": "<pre><code>reader = tf.TextLineReader()\nkey, value = reader.read(filename_queue)\nparsed = tf.decode_csv(value, [[0.0]] * 24)\nlabel = parsed[0]\nweight = parsed[1]\nfeature = tf.pack(parsed[2:])\nlabel_tensor, weight_tensor, feature_tensor = tf.train.shuffle_batch(\n      [label, weight, feature],\n      batch_size=200,\n      capacity=capacity,\n      min_after_dequeue=min_after_dequeue,\n      num_threads=num_threads)\nprint(\"Parsed tensors: %s, %s, %s\" % )\n</code></pre>\n<p>The shapes of <code>label_tensor</code>, <code>weight_tensor</code> and <code>feature_tensor</code> are <strong><code>(200, )</code></strong>, <strong><code>(200, )</code></strong> and <strong><code>(200, 22)</code></strong> respectively.</p>\n<p>If we put an extra comma at the end of line 4 and 5, like this:</p>\n<pre><code>label = parsed[0],\nweight = parsed[1],\n</code></pre>\n<p>Then the shapes become <strong><code>(200, 1)</code></strong>, <strong><code>(200, 1)</code></strong> and <strong><code>(200, 26)</code></strong> respectively.</p>\n<p>So an extra comma determines the shape of the resulted tensor. I am not quite familiar with Python and am new to TensorFlow, but is it supposed so?</p>", "body_text": "reader = tf.TextLineReader()\nkey, value = reader.read(filename_queue)\nparsed = tf.decode_csv(value, [[0.0]] * 24)\nlabel = parsed[0]\nweight = parsed[1]\nfeature = tf.pack(parsed[2:])\nlabel_tensor, weight_tensor, feature_tensor = tf.train.shuffle_batch(\n      [label, weight, feature],\n      batch_size=200,\n      capacity=capacity,\n      min_after_dequeue=min_after_dequeue,\n      num_threads=num_threads)\nprint(\"Parsed tensors: %s, %s, %s\" % )\n\nThe shapes of label_tensor, weight_tensor and feature_tensor are (200, ), (200, ) and (200, 22) respectively.\nIf we put an extra comma at the end of line 4 and 5, like this:\nlabel = parsed[0],\nweight = parsed[1],\n\nThen the shapes become (200, 1), (200, 1) and (200, 26) respectively.\nSo an extra comma determines the shape of the resulted tensor. I am not quite familiar with Python and am new to TensorFlow, but is it supposed so?", "body": "\r\n```\r\nreader = tf.TextLineReader()\r\nkey, value = reader.read(filename_queue)\r\nparsed = tf.decode_csv(value, [[0.0]] * 24)\r\nlabel = parsed[0]\r\nweight = parsed[1]\r\nfeature = tf.pack(parsed[2:])\r\nlabel_tensor, weight_tensor, feature_tensor = tf.train.shuffle_batch(\r\n      [label, weight, feature],\r\n      batch_size=200,\r\n      capacity=capacity,\r\n      min_after_dequeue=min_after_dequeue,\r\n      num_threads=num_threads)\r\nprint(\"Parsed tensors: %s, %s, %s\" % )\r\n```\r\n\r\nThe shapes of `label_tensor`, `weight_tensor` and `feature_tensor` are **`(200, )`**, **`(200, )`** and **`(200, 22)`** respectively.\r\n\r\nIf we put an extra comma at the end of line 4 and 5, like this:\r\n```\r\nlabel = parsed[0],\r\nweight = parsed[1],\r\n```\r\nThen the shapes become **`(200, 1)`**, **`(200, 1)`** and **`(200, 26)`** respectively.\r\n\r\nSo an extra comma determines the shape of the resulted tensor. I am not quite familiar with Python and am new to TensorFlow, but is it supposed so?\r\n\r\n"}
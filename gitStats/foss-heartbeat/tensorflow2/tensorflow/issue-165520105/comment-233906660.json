{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/233906660", "html_url": "https://github.com/tensorflow/tensorflow/issues/3308#issuecomment-233906660", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3308", "id": 233906660, "node_id": "MDEyOklzc3VlQ29tbWVudDIzMzkwNjY2MA==", "user": {"login": "Ape", "id": 156318, "node_id": "MDQ6VXNlcjE1NjMxOA==", "avatar_url": "https://avatars0.githubusercontent.com/u/156318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ape", "html_url": "https://github.com/Ape", "followers_url": "https://api.github.com/users/Ape/followers", "following_url": "https://api.github.com/users/Ape/following{/other_user}", "gists_url": "https://api.github.com/users/Ape/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ape/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ape/subscriptions", "organizations_url": "https://api.github.com/users/Ape/orgs", "repos_url": "https://api.github.com/users/Ape/repos", "events_url": "https://api.github.com/users/Ape/events{/privacy}", "received_events_url": "https://api.github.com/users/Ape/received_events", "type": "User", "site_admin": false}, "created_at": "2016-07-20T10:01:44Z", "updated_at": "2016-07-20T10:01:44Z", "author_association": "NONE", "body_html": "<p>Thanks. Adding <code>-Wl,--allow-multiple-definition -Wl,--whole-archive</code> did fix the \"No session factory registered\" issue, but now I get another one:</p>\n<pre><code>Failed to evaluate TensorFlow: Invalid argument: No OpKernel was registered to support Op 'Inv' with these attrs\n[[Node: dropout/Inv = Inv[T=DT_FLOAT](keep_prob)]]\n</code></pre>\n<p>Note that the exact same code is working with bazel, but fails with contrib/makefile.</p>\n<p>I think this might still be related to this issue since the new error mentions <code>No OpKernel was registered</code>.</p>\n<p>In addition, while <code>-Wl,--whole-archive</code> fixes the first error, it is suboptimal. I have several small binaries that are all using libtensorflow. This linker flag increases the binary size for each of them by around 180 MB. It is huge compared to the minimal size I get without the flag.</p>", "body_text": "Thanks. Adding -Wl,--allow-multiple-definition -Wl,--whole-archive did fix the \"No session factory registered\" issue, but now I get another one:\nFailed to evaluate TensorFlow: Invalid argument: No OpKernel was registered to support Op 'Inv' with these attrs\n[[Node: dropout/Inv = Inv[T=DT_FLOAT](keep_prob)]]\n\nNote that the exact same code is working with bazel, but fails with contrib/makefile.\nI think this might still be related to this issue since the new error mentions No OpKernel was registered.\nIn addition, while -Wl,--whole-archive fixes the first error, it is suboptimal. I have several small binaries that are all using libtensorflow. This linker flag increases the binary size for each of them by around 180 MB. It is huge compared to the minimal size I get without the flag.", "body": "Thanks. Adding `-Wl,--allow-multiple-definition -Wl,--whole-archive` did fix the \"No session factory registered\" issue, but now I get another one:\n\n```\nFailed to evaluate TensorFlow: Invalid argument: No OpKernel was registered to support Op 'Inv' with these attrs\n[[Node: dropout/Inv = Inv[T=DT_FLOAT](keep_prob)]]\n```\n\nNote that the exact same code is working with bazel, but fails with contrib/makefile.\n\nI think this might still be related to this issue since the new error mentions `No OpKernel was registered`.\n\nIn addition, while `-Wl,--whole-archive` fixes the first error, it is suboptimal. I have several small binaries that are all using libtensorflow. This linker flag increases the binary size for each of them by around 180 MB. It is huge compared to the minimal size I get without the flag.\n"}
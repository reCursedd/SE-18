{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23248", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23248/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23248/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23248/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23248", "id": 373836337, "node_id": "MDU6SXNzdWUzNzM4MzYzMzc=", "number": 23248, "title": "tf.estimator.train_and_evaluation stops before it reaches max_step", "user": {"login": "litaxc", "id": 1912982, "node_id": "MDQ6VXNlcjE5MTI5ODI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1912982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/litaxc", "html_url": "https://github.com/litaxc", "followers_url": "https://api.github.com/users/litaxc/followers", "following_url": "https://api.github.com/users/litaxc/following{/other_user}", "gists_url": "https://api.github.com/users/litaxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/litaxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/litaxc/subscriptions", "organizations_url": "https://api.github.com/users/litaxc/orgs", "repos_url": "https://api.github.com/users/litaxc/repos", "events_url": "https://api.github.com/users/litaxc/events{/privacy}", "received_events_url": "https://api.github.com/users/litaxc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-10-25T08:44:51Z", "updated_at": "2018-11-13T01:19:03Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><strong>System information</strong></p>\n<ul>\n<li>TensorFlow version: 1.11.0, using docker images tensorflow/tensorflow:1.11.0-gpu-py3</li>\n<li>Doc Link: <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/train_and_evaluate\" rel=\"nofollow\">tf.estimator.train_and_evaluation</a></li>\n</ul>\n<p><strong>Describe the documentation issue</strong></p>\n<p>According to the doc, <code>tf.estimator.train_and_evaluation</code> was meant to train forever or <code>max_step</code> if specified in <code>train_spec</code>.</p>\n<p>However, it took me many trial and errors to realize: if the dataset returned by <code>input_fn</code> in the <code>train_spec</code> was repeated a finite number of times and that number was smaller than <code>max_step</code>, the training would stop before it reached <code>max_step</code>.</p>\n<p>For example, I had a dataset about 120000 images. With batch size of 64, the training would stop at 1875 step (~120000/64), even though <code>max_step</code> was set at 10000 or higher.</p>\n<p>This behavior is not written in the document. Should the document be update or was it an unexpected behavior of the function?</p>\n<p><strong>We welcome contributions by users. Will you be able to update submit a PR (use the <a href=\"https://www.tensorflow.org/community/documentation\" rel=\"nofollow\">doc style guide</a>) to fix the doc Issue?</strong></p>\n<p>Yes.</p>", "body_text": "System information\n\nTensorFlow version: 1.11.0, using docker images tensorflow/tensorflow:1.11.0-gpu-py3\nDoc Link: tf.estimator.train_and_evaluation\n\nDescribe the documentation issue\nAccording to the doc, tf.estimator.train_and_evaluation was meant to train forever or max_step if specified in train_spec.\nHowever, it took me many trial and errors to realize: if the dataset returned by input_fn in the train_spec was repeated a finite number of times and that number was smaller than max_step, the training would stop before it reached max_step.\nFor example, I had a dataset about 120000 images. With batch size of 64, the training would stop at 1875 step (~120000/64), even though max_step was set at 10000 or higher.\nThis behavior is not written in the document. Should the document be update or was it an unexpected behavior of the function?\nWe welcome contributions by users. Will you be able to update submit a PR (use the doc style guide) to fix the doc Issue?\nYes.", "body": "**System information**\r\n- TensorFlow version: 1.11.0, using docker images tensorflow/tensorflow:1.11.0-gpu-py3\r\n- Doc Link: [tf.estimator.train_and_evaluation](https://www.tensorflow.org/api_docs/python/tf/estimator/train_and_evaluate)\r\n\r\n**Describe the documentation issue**\r\n\r\nAccording to the doc, `tf.estimator.train_and_evaluation` was meant to train forever or `max_step` if specified in `train_spec`.\r\n\r\nHowever, it took me many trial and errors to realize: if the dataset returned by `input_fn` in the `train_spec` was repeated a finite number of times and that number was smaller than `max_step`, the training would stop before it reached `max_step`.\r\n\r\nFor example, I had a dataset about 120000 images. With batch size of 64, the training would stop at 1875 step (~120000/64), even though `max_step` was set at 10000 or higher.\r\n\r\nThis behavior is not written in the document. Should the document be update or was it an unexpected behavior of the function?\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\n\r\nYes."}
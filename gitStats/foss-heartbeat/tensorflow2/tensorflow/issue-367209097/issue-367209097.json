{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22765", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22765/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22765/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22765/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/22765", "id": 367209097, "node_id": "MDExOlB1bGxSZXF1ZXN0MjIwNjk5ODgy", "number": 22765, "title": "[Performance Optimization] Improve the performance of tf.clip_by_norm when the input is IndexedSlices", "user": {"login": "wangsiyu", "id": 5387343, "node_id": "MDQ6VXNlcjUzODczNDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5387343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangsiyu", "html_url": "https://github.com/wangsiyu", "followers_url": "https://api.github.com/users/wangsiyu/followers", "following_url": "https://api.github.com/users/wangsiyu/following{/other_user}", "gists_url": "https://api.github.com/users/wangsiyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangsiyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangsiyu/subscriptions", "organizations_url": "https://api.github.com/users/wangsiyu/orgs", "repos_url": "https://api.github.com/users/wangsiyu/repos", "events_url": "https://api.github.com/users/wangsiyu/events{/privacy}", "received_events_url": "https://api.github.com/users/wangsiyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "fef2c0", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-10-05T13:21:51Z", "updated_at": "2018-10-16T07:35:32Z", "closed_at": "2018-10-15T21:51:11Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22765", "html_url": "https://github.com/tensorflow/tensorflow/pull/22765", "diff_url": "https://github.com/tensorflow/tensorflow/pull/22765.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/22765.patch"}, "body_html": "<p>Currently, the <code>tf.clip_by_norm</code> will convert the input to dense tensor and do the clipping. However, the gradients may be <code>IndexedSlices</code> type when encounters with <code>tf.nn.embedding_lookup</code> in forward pass. It may both consume large memory and make computation performance worse.</p>\n<p>In this pull request, the clipping function will deal with <code>IndexedSlices</code> directly instead of converting to dense tensor.</p>", "body_text": "Currently, the tf.clip_by_norm will convert the input to dense tensor and do the clipping. However, the gradients may be IndexedSlices type when encounters with tf.nn.embedding_lookup in forward pass. It may both consume large memory and make computation performance worse.\nIn this pull request, the clipping function will deal with IndexedSlices directly instead of converting to dense tensor.", "body": "Currently, the `tf.clip_by_norm` will convert the input to dense tensor and do the clipping. However, the gradients may be `IndexedSlices` type when encounters with `tf.nn.embedding_lookup` in forward pass. It may both consume large memory and make computation performance worse.\r\n\r\nIn this pull request, the clipping function will deal with `IndexedSlices` directly instead of converting to dense tensor."}
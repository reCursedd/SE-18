{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15310", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15310/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15310/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15310/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/15310", "id": 281369646, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU3ODE3NTY0", "number": 15310, "title": "[XLA/tfcompile] Various fixes for MSVC Part 1", "user": {"login": "rongjiecomputer", "id": 13115060, "node_id": "MDQ6VXNlcjEzMTE1MDYw", "avatar_url": "https://avatars2.githubusercontent.com/u/13115060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rongjiecomputer", "html_url": "https://github.com/rongjiecomputer", "followers_url": "https://api.github.com/users/rongjiecomputer/followers", "following_url": "https://api.github.com/users/rongjiecomputer/following{/other_user}", "gists_url": "https://api.github.com/users/rongjiecomputer/gists{/gist_id}", "starred_url": "https://api.github.com/users/rongjiecomputer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rongjiecomputer/subscriptions", "organizations_url": "https://api.github.com/users/rongjiecomputer/orgs", "repos_url": "https://api.github.com/users/rongjiecomputer/repos", "events_url": "https://api.github.com/users/rongjiecomputer/events{/privacy}", "received_events_url": "https://api.github.com/users/rongjiecomputer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-12-12T12:39:35Z", "updated_at": "2017-12-21T09:24:32Z", "closed_at": "2017-12-20T08:42:46Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/15310", "html_url": "https://github.com/tensorflow/tensorflow/pull/15310", "diff_url": "https://github.com/tensorflow/tensorflow/pull/15310.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/15310.patch"}, "body_html": "<p>This is the initial work to solve <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"280502581\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/15213\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/15213/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/15213\">#15213</a>. More changes will come in other PRs.</p>\n<ul>\n<li>\n<p><code>tensorflow/compiler/aot/tests/make_test_graphs.py</code>: Use <code>os.path</code> for path manipulation.</p>\n</li>\n<li>\n<p><code>tensorflow/compiler/xla/array.h</code>: Explicitly include <code>&lt;numeric&gt;</code> for <code>std::accumulate</code>.</p>\n</li>\n<li>\n<p><code>tensorflow/compiler/xla/service/cpu/external_constant_pool.{cc,h}</code>: Use <code>tensorflow::port::Aligned{Malloc,Free}</code>.</p>\n</li>\n<li>\n<p><code>tensorflow/compiler/xla/service/cpu/llvm_ir_runtime.cc</code>: Fix <code>std::array</code> initialization.</p>\n</li>\n<li>\n<p><code>tensorflow/compiler/xla/service/cpu/simple_orc_jit.cc</code>: Remove unused <code>&lt;dlfcn.h&gt;</code> and polyfill <code>sincos[f]</code> for MSVC.</p>\n</li>\n<li>\n<p><code>tensorflow/compiler/xla/service/heap_simulator.h</code>: Add <code>const</code> to custom comparator.</p>\n</li>\n<li>\n<p><code>tensorflow/compiler/xla/status_macros.h</code>: Use simplified version of <code>TF_ASSIGN_OR_RETURN</code> for MSVC. The simplified version also works for GCC as well actually.</p>\n</li>\n<li>\n<p><code>tensorflow/compiler/xla/util.h</code>: Hide the workaround for GCC 7 from MSVC's eyes.</p>\n</li>\n<li>\n<p><code>tensorflow/core/lib/gtl/compactptrset.h</code>: Define <code>ssize_t</code> for MSVC.</p>\n</li>\n<li>\n<p><code>tensorflow/core/platform/macros.h</code>: Define <code>LANG_CXX11</code> for &gt;= VS 2015. In MSVC, <code>__cplusplus == 199711</code> even when <code>/std:c++latest</code> is set because MSVC is still not \"fully\" C++11 compliant.</p>\n</li>\n</ul>", "body_text": "This is the initial work to solve #15213. More changes will come in other PRs.\n\n\ntensorflow/compiler/aot/tests/make_test_graphs.py: Use os.path for path manipulation.\n\n\ntensorflow/compiler/xla/array.h: Explicitly include <numeric> for std::accumulate.\n\n\ntensorflow/compiler/xla/service/cpu/external_constant_pool.{cc,h}: Use tensorflow::port::Aligned{Malloc,Free}.\n\n\ntensorflow/compiler/xla/service/cpu/llvm_ir_runtime.cc: Fix std::array initialization.\n\n\ntensorflow/compiler/xla/service/cpu/simple_orc_jit.cc: Remove unused <dlfcn.h> and polyfill sincos[f] for MSVC.\n\n\ntensorflow/compiler/xla/service/heap_simulator.h: Add const to custom comparator.\n\n\ntensorflow/compiler/xla/status_macros.h: Use simplified version of TF_ASSIGN_OR_RETURN for MSVC. The simplified version also works for GCC as well actually.\n\n\ntensorflow/compiler/xla/util.h: Hide the workaround for GCC 7 from MSVC's eyes.\n\n\ntensorflow/core/lib/gtl/compactptrset.h: Define ssize_t for MSVC.\n\n\ntensorflow/core/platform/macros.h: Define LANG_CXX11 for >= VS 2015. In MSVC, __cplusplus == 199711 even when /std:c++latest is set because MSVC is still not \"fully\" C++11 compliant.", "body": "This is the initial work to solve #15213. More changes will come in other PRs.\r\n\r\n- `tensorflow/compiler/aot/tests/make_test_graphs.py`: Use `os.path` for path manipulation.\r\n\r\n- `tensorflow/compiler/xla/array.h`: Explicitly include `<numeric>` for `std::accumulate`.\r\n\r\n- `tensorflow/compiler/xla/service/cpu/external_constant_pool.{cc,h}`: Use `tensorflow::port::Aligned{Malloc,Free}`.\r\n\r\n- `tensorflow/compiler/xla/service/cpu/llvm_ir_runtime.cc`: Fix `std::array` initialization.\r\n\r\n- `tensorflow/compiler/xla/service/cpu/simple_orc_jit.cc`: Remove unused `<dlfcn.h>` and polyfill `sincos[f]` for MSVC.\r\n\r\n- `tensorflow/compiler/xla/service/heap_simulator.h`: Add `const` to custom comparator.\r\n\r\n- `tensorflow/compiler/xla/status_macros.h`: Use simplified version of `TF_ASSIGN_OR_RETURN` for MSVC. The simplified version also works for GCC as well actually.\r\n\r\n- `tensorflow/compiler/xla/util.h`: Hide the workaround for GCC 7 from MSVC's eyes.\r\n\r\n- `tensorflow/core/lib/gtl/compactptrset.h`: Define `ssize_t` for MSVC.\r\n\r\n- `tensorflow/core/platform/macros.h`: Define `LANG_CXX11` for >= VS 2015. In MSVC, `__cplusplus == 199711` even when `/std:c++latest` is set because MSVC is still not \"fully\" C++11 compliant."}
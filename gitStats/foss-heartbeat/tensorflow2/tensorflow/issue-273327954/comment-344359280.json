{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/344359280", "html_url": "https://github.com/tensorflow/tensorflow/issues/14512#issuecomment-344359280", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14512", "id": 344359280, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDM1OTI4MA==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-14T18:51:45Z", "updated_at": "2017-11-14T18:51:45Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23738439\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fesun\">@fesun</a> Are you looking for not reading through the data for RandomInputStream? It looks like RandomInputStream relies on RandomAccessFile which does not expose <code>SizeOfFile</code> so moving through the position marker will not be enough. We will need to know when EOF is hit.</p>\n<p>On the other hand, I think it is possible to try reading 1 bytes to <code>expected_pos -1</code>, and if it complete, then we know EOF is not hit yet and we could (safely) move the position marker. Added <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"273901577\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/14557\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/14557/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/14557\">#14557</a> for that.</p>", "body_text": "@fesun Are you looking for not reading through the data for RandomInputStream? It looks like RandomInputStream relies on RandomAccessFile which does not expose SizeOfFile so moving through the position marker will not be enough. We will need to know when EOF is hit.\nOn the other hand, I think it is possible to try reading 1 bytes to expected_pos -1, and if it complete, then we know EOF is not hit yet and we could (safely) move the position marker. Added #14557 for that.", "body": "@fesun Are you looking for not reading through the data for RandomInputStream? It looks like RandomInputStream relies on RandomAccessFile which does not expose `SizeOfFile` so moving through the position marker will not be enough. We will need to know when EOF is hit.\r\n\r\nOn the other hand, I think it is possible to try reading 1 bytes to `expected_pos -1`, and if it complete, then we know EOF is not hit yet and we could (safely) move the position marker. Added #14557 for that."}
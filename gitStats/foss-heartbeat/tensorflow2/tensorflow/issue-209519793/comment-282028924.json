{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/282028924", "html_url": "https://github.com/tensorflow/tensorflow/issues/7785#issuecomment-282028924", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7785", "id": 282028924, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MjAyODkyNA==", "user": {"login": "volvador", "id": 15655730, "node_id": "MDQ6VXNlcjE1NjU1NzMw", "avatar_url": "https://avatars1.githubusercontent.com/u/15655730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/volvador", "html_url": "https://github.com/volvador", "followers_url": "https://api.github.com/users/volvador/followers", "following_url": "https://api.github.com/users/volvador/following{/other_user}", "gists_url": "https://api.github.com/users/volvador/gists{/gist_id}", "starred_url": "https://api.github.com/users/volvador/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/volvador/subscriptions", "organizations_url": "https://api.github.com/users/volvador/orgs", "repos_url": "https://api.github.com/users/volvador/repos", "events_url": "https://api.github.com/users/volvador/events{/privacy}", "received_events_url": "https://api.github.com/users/volvador/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-23T15:45:55Z", "updated_at": "2017-02-23T15:46:49Z", "author_association": "NONE", "body_html": "<p>Here is the complete stack trace</p>\n<pre><code>Traceback (most recent call last):\n      File \"tensorflow_data_parallel.py\", line 113, in &lt;module&gt;\n        model.save_weights('weights.h5')\n      File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/engine/topology.py\", line 2652, in save_weights\n        self.save_weights_to_hdf5_group(f)\n      File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/engine/topology.py\", line 2668, in save_weights_to_hdf5_group\n        weight_values = K.batch_get_value(symbolic_weights)\n      File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/backend/tensorflow_backend.py\", line 1834, in batch_get_value\n        return get_session().run(xs)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 767, in run\n        run_metadata_ptr)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 965, in _run\n        feed_dict_string, options, run_metadata)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 1015, in _do_run\n        target_list, options, run_metadata)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 1035, in _do_call\n        raise type(e)(node_def, op, message)\n    tensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device to node 'save/RestoreV2_19': Could not satisfy explicit device specification '/job:ps/task:0/device:CPU:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n             [[Node: save/RestoreV2_19 = RestoreV2[dtypes=[DT_INT32], _device=\"/job:ps/task:0/device:CPU:0\"](save/Const, save/RestoreV2_19/tensor_names, save/RestoreV2_19/shape_and_slices)]]\n\n    Caused by op u'save/RestoreV2_19', defined at:\n      File \"tensorflow_data_parallel.py\", line 101, in &lt;module&gt;\n        global_step=global_step)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/supervisor.py\", line 313, in __init__\n        self._init_saver(saver=saver)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/supervisor.py\", line 459, in _init_saver\n        saver = saver_mod.Saver()\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 1051, in __init__\n        self.build()\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 1081, in build\n        restore_sequentially=self._restore_sequentially)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 675, in build\n        restore_sequentially, reshape)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 402, in _AddRestoreOps\n        tensors = self.restore_op(filename_tensor, saveable, preferred_shard)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 242, in restore_op\n        [spec.tensor.dtype])[0])\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/ops/gen_io_ops.py\", line 668, in restore_v2\n        dtypes=dtypes, name=name)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op\n        op_def=op_def)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2395, in create_op\n        original_op=self._default_original_op, op_def=op_def)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 1264, in __init__\n        self._traceback = _extract_stack()\n\n    InvalidArgumentError (see above for traceback): Cannot assign a device to node 'save/RestoreV2_19': Could not satisfy explicit device specification '/job:ps/task:0/device:CPU:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n             [[Node: save/RestoreV2_19 = RestoreV2[dtypes=[DT_INT32], _device=\"/job:ps/task:0/device:CPU:0\"](save/Const, save/RestoreV2_19/tensor_names, save/RestoreV2_19/shape_and_slices)]]\n</code></pre>", "body_text": "Here is the complete stack trace\nTraceback (most recent call last):\n      File \"tensorflow_data_parallel.py\", line 113, in <module>\n        model.save_weights('weights.h5')\n      File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/engine/topology.py\", line 2652, in save_weights\n        self.save_weights_to_hdf5_group(f)\n      File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/engine/topology.py\", line 2668, in save_weights_to_hdf5_group\n        weight_values = K.batch_get_value(symbolic_weights)\n      File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/backend/tensorflow_backend.py\", line 1834, in batch_get_value\n        return get_session().run(xs)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 767, in run\n        run_metadata_ptr)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 965, in _run\n        feed_dict_string, options, run_metadata)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 1015, in _do_run\n        target_list, options, run_metadata)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 1035, in _do_call\n        raise type(e)(node_def, op, message)\n    tensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device to node 'save/RestoreV2_19': Could not satisfy explicit device specification '/job:ps/task:0/device:CPU:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n             [[Node: save/RestoreV2_19 = RestoreV2[dtypes=[DT_INT32], _device=\"/job:ps/task:0/device:CPU:0\"](save/Const, save/RestoreV2_19/tensor_names, save/RestoreV2_19/shape_and_slices)]]\n\n    Caused by op u'save/RestoreV2_19', defined at:\n      File \"tensorflow_data_parallel.py\", line 101, in <module>\n        global_step=global_step)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/supervisor.py\", line 313, in __init__\n        self._init_saver(saver=saver)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/supervisor.py\", line 459, in _init_saver\n        saver = saver_mod.Saver()\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 1051, in __init__\n        self.build()\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 1081, in build\n        restore_sequentially=self._restore_sequentially)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 675, in build\n        restore_sequentially, reshape)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 402, in _AddRestoreOps\n        tensors = self.restore_op(filename_tensor, saveable, preferred_shard)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 242, in restore_op\n        [spec.tensor.dtype])[0])\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/ops/gen_io_ops.py\", line 668, in restore_v2\n        dtypes=dtypes, name=name)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op\n        op_def=op_def)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2395, in create_op\n        original_op=self._default_original_op, op_def=op_def)\n      File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 1264, in __init__\n        self._traceback = _extract_stack()\n\n    InvalidArgumentError (see above for traceback): Cannot assign a device to node 'save/RestoreV2_19': Could not satisfy explicit device specification '/job:ps/task:0/device:CPU:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\n             [[Node: save/RestoreV2_19 = RestoreV2[dtypes=[DT_INT32], _device=\"/job:ps/task:0/device:CPU:0\"](save/Const, save/RestoreV2_19/tensor_names, save/RestoreV2_19/shape_and_slices)]]", "body": "Here is the complete stack trace\r\n\r\n    Traceback (most recent call last):\r\n          File \"tensorflow_data_parallel.py\", line 113, in <module>\r\n            model.save_weights('weights.h5')\r\n          File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/engine/topology.py\", line 2652, in save_weights\r\n            self.save_weights_to_hdf5_group(f)\r\n          File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/engine/topology.py\", line 2668, in save_weights_to_hdf5_group\r\n            weight_values = K.batch_get_value(symbolic_weights)\r\n          File \"..../keras-1.2.2-1/lib/python2.7/site-packages/keras/backend/tensorflow_backend.py\", line 1834, in batch_get_value\r\n            return get_session().run(xs)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 767, in run\r\n            run_metadata_ptr)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 965, in _run\r\n            feed_dict_string, options, run_metadata)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 1015, in _do_run\r\n            target_list, options, run_metadata)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/client/session.py\", line 1035, in _do_call\r\n            raise type(e)(node_def, op, message)\r\n        tensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device to node 'save/RestoreV2_19': Could not satisfy explicit device specification '/job:ps/task:0/device:CPU:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\r\n                 [[Node: save/RestoreV2_19 = RestoreV2[dtypes=[DT_INT32], _device=\"/job:ps/task:0/device:CPU:0\"](save/Const, save/RestoreV2_19/tensor_names, save/RestoreV2_19/shape_and_slices)]]\r\n\r\n        Caused by op u'save/RestoreV2_19', defined at:\r\n          File \"tensorflow_data_parallel.py\", line 101, in <module>\r\n            global_step=global_step)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/supervisor.py\", line 313, in __init__\r\n            self._init_saver(saver=saver)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/supervisor.py\", line 459, in _init_saver\r\n            saver = saver_mod.Saver()\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 1051, in __init__\r\n            self.build()\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 1081, in build\r\n            restore_sequentially=self._restore_sequentially)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 675, in build\r\n            restore_sequentially, reshape)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 402, in _AddRestoreOps\r\n            tensors = self.restore_op(filename_tensor, saveable, preferred_shard)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/training/saver.py\", line 242, in restore_op\r\n            [spec.tensor.dtype])[0])\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/ops/gen_io_ops.py\", line 668, in restore_v2\r\n            dtypes=dtypes, name=name)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/op_def_library.py\", line 763, in apply_op\r\n            op_def=op_def)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 2395, in create_op\r\n            original_op=self._default_original_op, op_def=op_def)\r\n          File \"..../tensorflow-1.0.0/lib/tensorflow/python/framework/ops.py\", line 1264, in __init__\r\n            self._traceback = _extract_stack()\r\n\r\n        InvalidArgumentError (see above for traceback): Cannot assign a device to node 'save/RestoreV2_19': Could not satisfy explicit device specification '/job:ps/task:0/device:CPU:0' because no devices matching that specification are registered in this process; available devices: /job:localhost/replica:0/task:0/cpu:0\r\n                 [[Node: save/RestoreV2_19 = RestoreV2[dtypes=[DT_INT32], _device=\"/job:ps/task:0/device:CPU:0\"](save/Const, save/RestoreV2_19/tensor_names, save/RestoreV2_19/shape_and_slices)]]\r\n"}
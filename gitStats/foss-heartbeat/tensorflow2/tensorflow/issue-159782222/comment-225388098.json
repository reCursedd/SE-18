{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/225388098", "html_url": "https://github.com/tensorflow/tensorflow/issues/2807#issuecomment-225388098", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2807", "id": 225388098, "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTM4ODA5OA==", "user": {"login": "changyun79", "id": 19846701, "node_id": "MDQ6VXNlcjE5ODQ2NzAx", "avatar_url": "https://avatars3.githubusercontent.com/u/19846701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/changyun79", "html_url": "https://github.com/changyun79", "followers_url": "https://api.github.com/users/changyun79/followers", "following_url": "https://api.github.com/users/changyun79/following{/other_user}", "gists_url": "https://api.github.com/users/changyun79/gists{/gist_id}", "starred_url": "https://api.github.com/users/changyun79/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/changyun79/subscriptions", "organizations_url": "https://api.github.com/users/changyun79/orgs", "repos_url": "https://api.github.com/users/changyun79/repos", "events_url": "https://api.github.com/users/changyun79/events{/privacy}", "received_events_url": "https://api.github.com/users/changyun79/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-11T19:15:16Z", "updated_at": "2016-06-11T19:15:16Z", "author_association": "NONE", "body_html": "<p>Thanks for the response, vrv.</p>\n<p>I am running on Intel i7-3770 with Nvidia GM200 [GeForce GTX TITAN X] GPU (I am profiling CPU only anyways). The profiling is very rough as I am just taking bash timer. The complete script, which actually comes from Pete's blog is as following.</p>\n<pre><code>bazel build tensorflow/contrib/quantization/tools:quantize_graph\nbazel build tensorflow/examples/label_image:label_image\n\ncurl http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz -o /tmp/inceptionv3.tgz\ntar xzf /tmp/inceptionv3.tgz -C ./tensorflow/examples/label_image/data/\n\necho \"Quantizing Incepton-v3 graph as 8bits mode\"\nbazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\\n--input=./tensorflow/examples/label_image/data/classify_image_graph_def.pb \\\n--output_node_names=\"softmax\" --output=./tensorflow/examples/label_image/data/quantized_graph_eightbit.pb \\\n--mode=eightbit\n\necho \"Original classify_image_graph_def.pb\"\nSTARTTIME=$(date +%s)\n./bazel-bin/tensorflow/examples/label_image/label_image \\\n--graph=./tensorflow/examples/label_image/data/classify_image_graph_def.pb\nENDTIME=$(date +%s)\necho \"It takes $(($ENDTIME - $STARTTIME)) seconds to complete this task...\\n\\n\"\n\n\necho \"Quantized as 8 bits\"\nSTARTTIME=$(date +%s)\n#command block that takes time to complete...\n#........\n./bazel-bin/tensorflow/examples/label_image/label_image \\\n--graph=./tensorflow/examples/label_image/data/quantized_graph_eightbit.pb \\\n--input_width=299 \\\n--input_height=299 \\\n--input_mean=128 \\\n--input_std=128 \\\n--input_layer=\"Mul:0\" \\\n--output_layer=\"softmax:0\"\nENDTIME=$(date +%s)\necho \"It takes $(($ENDTIME - $STARTTIME)) seconds to complete this task...\\n\\n\"\n</code></pre>", "body_text": "Thanks for the response, vrv.\nI am running on Intel i7-3770 with Nvidia GM200 [GeForce GTX TITAN X] GPU (I am profiling CPU only anyways). The profiling is very rough as I am just taking bash timer. The complete script, which actually comes from Pete's blog is as following.\nbazel build tensorflow/contrib/quantization/tools:quantize_graph\nbazel build tensorflow/examples/label_image:label_image\n\ncurl http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz -o /tmp/inceptionv3.tgz\ntar xzf /tmp/inceptionv3.tgz -C ./tensorflow/examples/label_image/data/\n\necho \"Quantizing Incepton-v3 graph as 8bits mode\"\nbazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\\n--input=./tensorflow/examples/label_image/data/classify_image_graph_def.pb \\\n--output_node_names=\"softmax\" --output=./tensorflow/examples/label_image/data/quantized_graph_eightbit.pb \\\n--mode=eightbit\n\necho \"Original classify_image_graph_def.pb\"\nSTARTTIME=$(date +%s)\n./bazel-bin/tensorflow/examples/label_image/label_image \\\n--graph=./tensorflow/examples/label_image/data/classify_image_graph_def.pb\nENDTIME=$(date +%s)\necho \"It takes $(($ENDTIME - $STARTTIME)) seconds to complete this task...\\n\\n\"\n\n\necho \"Quantized as 8 bits\"\nSTARTTIME=$(date +%s)\n#command block that takes time to complete...\n#........\n./bazel-bin/tensorflow/examples/label_image/label_image \\\n--graph=./tensorflow/examples/label_image/data/quantized_graph_eightbit.pb \\\n--input_width=299 \\\n--input_height=299 \\\n--input_mean=128 \\\n--input_std=128 \\\n--input_layer=\"Mul:0\" \\\n--output_layer=\"softmax:0\"\nENDTIME=$(date +%s)\necho \"It takes $(($ENDTIME - $STARTTIME)) seconds to complete this task...\\n\\n\"", "body": "Thanks for the response, vrv. \n\nI am running on Intel i7-3770 with Nvidia GM200 [GeForce GTX TITAN X] GPU (I am profiling CPU only anyways). The profiling is very rough as I am just taking bash timer. The complete script, which actually comes from Pete's blog is as following.\n\n```\nbazel build tensorflow/contrib/quantization/tools:quantize_graph\nbazel build tensorflow/examples/label_image:label_image\n\ncurl http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz -o /tmp/inceptionv3.tgz\ntar xzf /tmp/inceptionv3.tgz -C ./tensorflow/examples/label_image/data/\n\necho \"Quantizing Incepton-v3 graph as 8bits mode\"\nbazel-bin/tensorflow/contrib/quantization/tools/quantize_graph \\\n--input=./tensorflow/examples/label_image/data/classify_image_graph_def.pb \\\n--output_node_names=\"softmax\" --output=./tensorflow/examples/label_image/data/quantized_graph_eightbit.pb \\\n--mode=eightbit\n\necho \"Original classify_image_graph_def.pb\"\nSTARTTIME=$(date +%s)\n./bazel-bin/tensorflow/examples/label_image/label_image \\\n--graph=./tensorflow/examples/label_image/data/classify_image_graph_def.pb\nENDTIME=$(date +%s)\necho \"It takes $(($ENDTIME - $STARTTIME)) seconds to complete this task...\\n\\n\"\n\n\necho \"Quantized as 8 bits\"\nSTARTTIME=$(date +%s)\n#command block that takes time to complete...\n#........\n./bazel-bin/tensorflow/examples/label_image/label_image \\\n--graph=./tensorflow/examples/label_image/data/quantized_graph_eightbit.pb \\\n--input_width=299 \\\n--input_height=299 \\\n--input_mean=128 \\\n--input_std=128 \\\n--input_layer=\"Mul:0\" \\\n--output_layer=\"softmax:0\"\nENDTIME=$(date +%s)\necho \"It takes $(($ENDTIME - $STARTTIME)) seconds to complete this task...\\n\\n\"\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12930", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12930/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12930/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12930/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12930", "id": 256415467, "node_id": "MDU6SXNzdWUyNTY0MTU0Njc=", "number": 12930, "title": "Unable to build C++ example by bazel on windows 10", "user": {"login": "traveller59", "id": 28866047, "node_id": "MDQ6VXNlcjI4ODY2MDQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/28866047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/traveller59", "html_url": "https://github.com/traveller59", "followers_url": "https://api.github.com/users/traveller59/followers", "following_url": "https://api.github.com/users/traveller59/following{/other_user}", "gists_url": "https://api.github.com/users/traveller59/gists{/gist_id}", "starred_url": "https://api.github.com/users/traveller59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/traveller59/subscriptions", "organizations_url": "https://api.github.com/users/traveller59/orgs", "repos_url": "https://api.github.com/users/traveller59/repos", "events_url": "https://api.github.com/users/traveller59/events{/privacy}", "received_events_url": "https://api.github.com/users/traveller59/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-09T05:09:56Z", "updated_at": "2017-12-20T02:42:09Z", "closed_at": "2017-12-20T02:42:09Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code</strong>: No</li>\n<li><strong>OS Platform and Distribution</strong>: Windows 10 64Bit</li>\n<li><strong>TensorFlow installed from</strong>: binary</li>\n<li><strong>TensorFlow version</strong>: master</li>\n<li><strong>Python version</strong>: 3.6.1</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.5.4, binary</li>\n</ul>\n<p>in windows powershell:</p>\n<pre><code>&gt;&gt;protoc --version\nlibprotoc 3.4.0\n&gt;&gt;bazel version\nBuild label: 0.5.4\nBuild target: bazel-out/msvc_x64-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Aug 25 09:59:45 2017 (1503655185)\nBuild timestamp: 1503655185\nBuild timestamp as int: 1503655185\n</code></pre>\n<h3>Describe the problem</h3>\n<p>I want to learn tensorflow C++ api and build a example from this <a href=\"https://www.tensorflow.org/api_guides/cc/guide\" rel=\"nofollow\">page</a>, but I get the following error:</p>\n<pre><code>ERROR: E:/projects/deeplearning/tensorflow/tensorflow/cc/example/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf_archive//': Traceback (most recent call last):\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 122\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 103, in _apply_patch\n                fail(\"patch command is not found, ple...\")\npatch command is not found, please install it and referenced by '//tensorflow/cc/example:example'.\nERROR: Analysis of target '//tensorflow/cc/example:example' failed; build aborted.\nINFO: Elapsed time: 13.336s\nERROR: Build failed. Not running target.\n</code></pre>\n<p>I have already run <code>pacman -Syuu --noconfirm patch</code> in msys2.exe.<br>\nbazel works well in simple c++ example.</p>\n<h3>Source code / logs</h3>\n<p>in C:/msys64/usr/bin/bash.exe:</p>\n<pre><code>$ patch --version\nGNU patch 2.7.5\nCopyright (C) 2003, 2009-2012 Free Software Foundation, Inc.\nCopyright (C) 1988 Larry Wall\n\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nWritten by Larry Wall and Paul Eggert\n</code></pre>\n<p>in windows powershell:</p>\n<pre><code>PS E:\\Projects\\deeplearning\\tensorflow&gt; python configure.py\nYou have bazel 0.5.4 installed.\nPlease specify the location of python. [Default is C:\\Users\\yanyan\\Anaconda3\\python.exe]:\n\n\nFound possible Python library paths:\n  C:\\Users\\yanyan\\Anaconda3\\lib\\site-packages\nPlease input the desired Python library path to use.  Default is [C:\\Users\\yanyan\\Anaconda3\\lib\\site-packages]\n\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\nXLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with GDR support? [y/N]: y\nGDR support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: y\nVERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\nCUDA support will be enabled for TensorFlow.\n\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]:\n\n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0]:\n\n\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]:\n\n\nPlease specify the location where cuDNN 6 library is installed. Refer to README.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0]:\n\n\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.5,5.2]\n\n\nDo you wish to build TensorFlow with MPI support? [y/N]: n\nNo MPI support will be enabled for TensorFlow.\n\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\n\n\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\nPlease note that MKL on MacOS or windows is still not supported.\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\n\n\nPS E:\\Projects\\deeplearning\\tensorflow&gt; bazel run -c opt //tensorflow/cc/example:example\nERROR: E:/projects/deeplearning/tensorflow/tensorflow/cc/example/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf_archive//': Traceback (most recent call last):\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 122\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 103, in _apply_patch\n                fail(\"patch command is not found, ple...\")\npatch command is not found, please install it and referenced by '//tensorflow/cc/example:example'.\nERROR: Analysis of target '//tensorflow/cc/example:example' failed; build aborted.\nINFO: Elapsed time: 15.968s\nERROR: Build failed. Not running target.\n</code></pre>", "body_text": "System information\n\nHave I written custom code: No\nOS Platform and Distribution: Windows 10 64Bit\nTensorFlow installed from: binary\nTensorFlow version: master\nPython version: 3.6.1\nBazel version (if compiling from source): 0.5.4, binary\n\nin windows powershell:\n>>protoc --version\nlibprotoc 3.4.0\n>>bazel version\nBuild label: 0.5.4\nBuild target: bazel-out/msvc_x64-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Aug 25 09:59:45 2017 (1503655185)\nBuild timestamp: 1503655185\nBuild timestamp as int: 1503655185\n\nDescribe the problem\nI want to learn tensorflow C++ api and build a example from this page, but I get the following error:\nERROR: E:/projects/deeplearning/tensorflow/tensorflow/cc/example/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf_archive//': Traceback (most recent call last):\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 122\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 103, in _apply_patch\n                fail(\"patch command is not found, ple...\")\npatch command is not found, please install it and referenced by '//tensorflow/cc/example:example'.\nERROR: Analysis of target '//tensorflow/cc/example:example' failed; build aborted.\nINFO: Elapsed time: 13.336s\nERROR: Build failed. Not running target.\n\nI have already run pacman -Syuu --noconfirm patch in msys2.exe.\nbazel works well in simple c++ example.\nSource code / logs\nin C:/msys64/usr/bin/bash.exe:\n$ patch --version\nGNU patch 2.7.5\nCopyright (C) 2003, 2009-2012 Free Software Foundation, Inc.\nCopyright (C) 1988 Larry Wall\n\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nWritten by Larry Wall and Paul Eggert\n\nin windows powershell:\nPS E:\\Projects\\deeplearning\\tensorflow> python configure.py\nYou have bazel 0.5.4 installed.\nPlease specify the location of python. [Default is C:\\Users\\yanyan\\Anaconda3\\python.exe]:\n\n\nFound possible Python library paths:\n  C:\\Users\\yanyan\\Anaconda3\\lib\\site-packages\nPlease input the desired Python library path to use.  Default is [C:\\Users\\yanyan\\Anaconda3\\lib\\site-packages]\n\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\nXLA JIT support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with GDR support? [y/N]: y\nGDR support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with VERBS support? [y/N]: y\nVERBS support will be enabled for TensorFlow.\n\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\nCUDA support will be enabled for TensorFlow.\n\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]:\n\n\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0]:\n\n\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]:\n\n\nPlease specify the location where cuDNN 6 library is installed. Refer to README.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0]:\n\n\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.5,5.2]\n\n\nDo you wish to build TensorFlow with MPI support? [y/N]: n\nNo MPI support will be enabled for TensorFlow.\n\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\n\n\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\nPlease note that MKL on MacOS or windows is still not supported.\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\n\n\nPS E:\\Projects\\deeplearning\\tensorflow> bazel run -c opt //tensorflow/cc/example:example\nERROR: E:/projects/deeplearning/tensorflow/tensorflow/cc/example/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf_archive//': Traceback (most recent call last):\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 122\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 103, in _apply_patch\n                fail(\"patch command is not found, ple...\")\npatch command is not found, please install it and referenced by '//tensorflow/cc/example:example'.\nERROR: Analysis of target '//tensorflow/cc/example:example' failed; build aborted.\nINFO: Elapsed time: 15.968s\nERROR: Build failed. Not running target.", "body": "### System information\r\n- **Have I written custom code**: No\r\n- **OS Platform and Distribution**: Windows 10 64Bit\r\n- **TensorFlow installed from**: binary\r\n- **TensorFlow version**: master\r\n- **Python version**: 3.6.1\r\n- **Bazel version (if compiling from source)**: 0.5.4, binary\r\n\r\nin windows powershell:\r\n```\r\n>>protoc --version\r\nlibprotoc 3.4.0\r\n>>bazel version\r\nBuild label: 0.5.4\r\nBuild target: bazel-out/msvc_x64-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Fri Aug 25 09:59:45 2017 (1503655185)\r\nBuild timestamp: 1503655185\r\nBuild timestamp as int: 1503655185\r\n```\r\n### Describe the problem\r\nI want to learn tensorflow C++ api and build a example from this [page](https://www.tensorflow.org/api_guides/cc/guide), but I get the following error:\r\n```\r\nERROR: E:/projects/deeplearning/tensorflow/tensorflow/cc/example/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf_archive//': Traceback (most recent call last):\r\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 122\r\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\r\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 103, in _apply_patch\r\n                fail(\"patch command is not found, ple...\")\r\npatch command is not found, please install it and referenced by '//tensorflow/cc/example:example'.\r\nERROR: Analysis of target '//tensorflow/cc/example:example' failed; build aborted.\r\nINFO: Elapsed time: 13.336s\r\nERROR: Build failed. Not running target.\r\n```\r\nI have already run ```pacman -Syuu --noconfirm patch``` in msys2.exe.  \r\nbazel works well in simple c++ example.\r\n### Source code / logs\r\nin C:/msys64/usr/bin/bash.exe:\r\n```\r\n$ patch --version\r\nGNU patch 2.7.5\r\nCopyright (C) 2003, 2009-2012 Free Software Foundation, Inc.\r\nCopyright (C) 1988 Larry Wall\r\n\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>.\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.\r\n\r\nWritten by Larry Wall and Paul Eggert\r\n```\r\nin windows powershell:\r\n```\r\nPS E:\\Projects\\deeplearning\\tensorflow> python configure.py\r\nYou have bazel 0.5.4 installed.\r\nPlease specify the location of python. [Default is C:\\Users\\yanyan\\Anaconda3\\python.exe]:\r\n\r\n\r\nFound possible Python library paths:\r\n  C:\\Users\\yanyan\\Anaconda3\\lib\\site-packages\r\nPlease input the desired Python library path to use.  Default is [C:\\Users\\yanyan\\Anaconda3\\lib\\site-packages]\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\r\nXLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with GDR support? [y/N]: y\r\nGDR support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with VERBS support? [y/N]: y\r\nVERBS support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]:\r\n\r\n\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0]:\r\n\r\n\r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]:\r\n\r\n\r\nPlease specify the location where cuDNN 6 library is installed. Refer to README.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v8.0]:\r\n\r\n\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.5,5.2]\r\n\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: n\r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\r\n\r\n\r\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\r\nPlease note that MKL on MacOS or windows is still not supported.\r\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\r\n\r\n\r\nPS E:\\Projects\\deeplearning\\tensorflow> bazel run -c opt //tensorflow/cc/example:example\r\nERROR: E:/projects/deeplearning/tensorflow/tensorflow/cc/example/BUILD:1:1: error loading package 'tensorflow/core': Encountered error while reading extension file 'protobuf.bzl': no such package '@protobuf_archive//': Traceback (most recent call last):\r\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 122\r\n                _apply_patch(repo_ctx, repo_ctx.attr.patch_file)\r\n        File \"E:/projects/deeplearning/tensorflow/tensorflow/workspace.bzl\", line 103, in _apply_patch\r\n                fail(\"patch command is not found, ple...\")\r\npatch command is not found, please install it and referenced by '//tensorflow/cc/example:example'.\r\nERROR: Analysis of target '//tensorflow/cc/example:example' failed; build aborted.\r\nINFO: Elapsed time: 15.968s\r\nERROR: Build failed. Not running target.\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6391", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6391/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6391/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6391/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6391", "id": 196311274, "node_id": "MDU6SXNzdWUxOTYzMTEyNzQ=", "number": 6391, "title": "tf.sparse_tensor_to_dense does not have a gradient", "user": {"login": "rizar", "id": 654434, "node_id": "MDQ6VXNlcjY1NDQzNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/654434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rizar", "html_url": "https://github.com/rizar", "followers_url": "https://api.github.com/users/rizar/followers", "following_url": "https://api.github.com/users/rizar/following{/other_user}", "gists_url": "https://api.github.com/users/rizar/gists{/gist_id}", "starred_url": "https://api.github.com/users/rizar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rizar/subscriptions", "organizations_url": "https://api.github.com/users/rizar/orgs", "repos_url": "https://api.github.com/users/rizar/repos", "events_url": "https://api.github.com/users/rizar/events{/privacy}", "received_events_url": "https://api.github.com/users/rizar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2016-12-19T00:48:45Z", "updated_at": "2017-11-14T19:33:53Z", "closed_at": "2017-06-16T21:43:43Z", "author_association": "NONE", "body_html": "<p>Differentiating <code>tf.sparse_tensor_to_dense</code> and also <code>tf.sparse_to_dense</code> returns <code>None</code>. At the same time, a hacky way of converting a sparse tensor to a dense tensor by using <code>tf.sparse_add</code> works. Please see the code below:</p>\n<div class=\"highlight highlight-source-python\"><pre>indices <span class=\"pl-k\">=</span> tf.placeholder(tf.int64, (<span class=\"pl-c1\">None</span>, <span class=\"pl-c1\">2</span>))\nvalues <span class=\"pl-k\">=</span> tf.placeholder(tf.float32, (<span class=\"pl-c1\">None</span>,))\nsparse_tensor <span class=\"pl-k\">=</span> tf.SparseTensor(indices, values, (<span class=\"pl-c1\">5</span>, <span class=\"pl-c1\">7</span>))\ndense_tensor1 <span class=\"pl-k\">=</span> tf.sparse_tensor_to_dense(sparse_tensor)\ndense_tensor2 <span class=\"pl-k\">=</span> tf.sparse_add(tf.zeros((<span class=\"pl-c1\">5</span>, <span class=\"pl-c1\">7</span>)), sparse_tensor)\nsum1 <span class=\"pl-k\">=</span> tf.reduce_sum(dense_tensor1)\nsum2 <span class=\"pl-k\">=</span> tf.reduce_sum(dense_tensor2)\n<span class=\"pl-c1\">print</span> tf.gradients(sum1, values)\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> [<span class=\"pl-c1\">None</span>]\n<span class=\"pl-c1\">print</span> tf.gradients(sum2, values)\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> [tf.Tensor <span class=\"pl-c1\">...</span>]</pre></div>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>Didn't find anything.</p>\n<h3>Environment info</h3>\n<ol>\n<li>A link to the pip package you installed:</li>\n</ol>\n<p>pip install --user <a href=\"https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0rc1-cp27-none-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0rc1-cp27-none-linux_x86_64.whl</a></p>\n<ol start=\"2\">\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code></li>\n</ol>\n<p>0.11.0rc1</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>Please see the code above.</p>", "body_text": "Differentiating tf.sparse_tensor_to_dense and also tf.sparse_to_dense returns None. At the same time, a hacky way of converting a sparse tensor to a dense tensor by using tf.sparse_add works. Please see the code below:\nindices = tf.placeholder(tf.int64, (None, 2))\nvalues = tf.placeholder(tf.float32, (None,))\nsparse_tensor = tf.SparseTensor(indices, values, (5, 7))\ndense_tensor1 = tf.sparse_tensor_to_dense(sparse_tensor)\ndense_tensor2 = tf.sparse_add(tf.zeros((5, 7)), sparse_tensor)\nsum1 = tf.reduce_sum(dense_tensor1)\nsum2 = tf.reduce_sum(dense_tensor2)\nprint tf.gradients(sum1, values)\n>>> [None]\nprint tf.gradients(sum2, values)\n>>> [tf.Tensor ...]\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nDidn't find anything.\nEnvironment info\n\nA link to the pip package you installed:\n\npip install --user https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0rc1-cp27-none-linux_x86_64.whl\n\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\"\n\n0.11.0rc1\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nPlease see the code above.", "body": "Differentiating `tf.sparse_tensor_to_dense` and also `tf.sparse_to_dense` returns `None`. At the same time, a hacky way of converting a sparse tensor to a dense tensor by using `tf.sparse_add` works. Please see the code below:\r\n\r\n```python \r\nindices = tf.placeholder(tf.int64, (None, 2))\r\nvalues = tf.placeholder(tf.float32, (None,))\r\nsparse_tensor = tf.SparseTensor(indices, values, (5, 7))\r\ndense_tensor1 = tf.sparse_tensor_to_dense(sparse_tensor)\r\ndense_tensor2 = tf.sparse_add(tf.zeros((5, 7)), sparse_tensor)\r\nsum1 = tf.reduce_sum(dense_tensor1)\r\nsum2 = tf.reduce_sum(dense_tensor2)\r\nprint tf.gradients(sum1, values)\r\n>>> [None]\r\nprint tf.gradients(sum2, values)\r\n>>> [tf.Tensor ...]\r\n```\r\n\r\n\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\nDidn't find anything.\r\n\r\n### Environment info\r\n\r\n1. A link to the pip package you installed:\r\n\r\npip install --user https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0rc1-cp27-none-linux_x86_64.whl\r\n\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`\r\n\r\n0.11.0rc1\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n\r\nPlease see the code above. \r\n"}
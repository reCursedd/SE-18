{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/223810485", "pull_request_review_id": 163002136, "id": 223810485, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzgxMDQ4NQ==", "diff_hunk": "@@ -878,10 +893,11 @@ tensorflow::Status ConvertAfterShapes(ConversionParams& params) {\n       continue;\n     }\n     curr_engine.precision_mode = params.precision_mode;\n-    curr_engine.engine_type =\n-        (params.is_dyn_op || params.precision_mode == INT8MODE\n+    curr_engine.engine_type = ((params.is_dyn_op ||\n+      (params.precision_mode == INT8MODE && params.use_calibration))", "path": "tensorflow/contrib/tensorrt/convert/convert_graph.cc", "position": null, "original_position": 97, "commit_id": "c9774910f1e24b964f0a31fdbf98df472d92501b", "original_commit_id": "09c215a9c134dcc52882b153973617e125ad300b", "user": {"login": "wujingyue", "id": 2772612, "node_id": "MDQ6VXNlcjI3NzI2MTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/2772612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wujingyue", "html_url": "https://github.com/wujingyue", "followers_url": "https://api.github.com/users/wujingyue/followers", "following_url": "https://api.github.com/users/wujingyue/following{/other_user}", "gists_url": "https://api.github.com/users/wujingyue/gists{/gist_id}", "starred_url": "https://api.github.com/users/wujingyue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wujingyue/subscriptions", "organizations_url": "https://api.github.com/users/wujingyue/orgs", "repos_url": "https://api.github.com/users/wujingyue/repos", "events_url": "https://api.github.com/users/wujingyue/events{/privacy}", "received_events_url": "https://api.github.com/users/wujingyue/received_events", "type": "User", "site_admin": false}, "body": "As a general rule of flags, you shouldn't set a flag true by default if it doesn't work with even the default configuration (in this case `precision=fp32). So I believe use_calibration=false by default is the right thing to do. \r\n\r\nIMO, breaking existing users is fine since this is in tf.contrib. Are you aware of any users on int8 calibration? We could notify them about this change. ", "created_at": "2018-10-09T18:18:22Z", "updated_at": "2018-11-21T23:48:52Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/22788#discussion_r223810485", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22788", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/223810485"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/22788#discussion_r223810485"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22788"}}, "body_html": "<p>As a general rule of flags, you shouldn't set a flag true by default if it doesn't work with even the default configuration (in this case `precision=fp32). So I believe use_calibration=false by default is the right thing to do.</p>\n<p>IMO, breaking existing users is fine since this is in tf.contrib. Are you aware of any users on int8 calibration? We could notify them about this change.</p>", "body_text": "As a general rule of flags, you shouldn't set a flag true by default if it doesn't work with even the default configuration (in this case `precision=fp32). So I believe use_calibration=false by default is the right thing to do.\nIMO, breaking existing users is fine since this is in tf.contrib. Are you aware of any users on int8 calibration? We could notify them about this change.", "in_reply_to_id": 223508079}
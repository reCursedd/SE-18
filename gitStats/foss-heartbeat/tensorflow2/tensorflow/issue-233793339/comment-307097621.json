{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/307097621", "html_url": "https://github.com/tensorflow/tensorflow/issues/10450#issuecomment-307097621", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10450", "id": 307097621, "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzA5NzYyMQ==", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-08T13:08:14Z", "updated_at": "2017-06-09T03:40:37Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I went through the file tensorflow/core/platform/profile_utils/cpu_utils_test.cc and found that GetCycleCounterFrequency function returning incorrect result on ppc64le,  expected value is greater than<code> \"0\"</code>, however on ppc64le getting <code>\"-1\"</code>  (see below for test code)<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/platform/profile_utils/cpu_utils_test.cc#L56\">https://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/platform/profile_utils/cpu_utils_test.cc#L56</a></p>\n<pre><code>TEST_F(CpuUtilsTest, CheckCycleCounterFrequency) {\n  const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();\n  CHECK_GT(cpu_frequency, 0);\n  CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY);\n  if (DBG) {\n    LOG(INFO) &lt;&lt; \"Cpu frequency = \" &lt;&lt; cpu_frequency;\n  }\n}\n\n</code></pre>\n<p>Checked the output of <code>CpuUtils::GetCycleCounterFrequency()</code> using print statement i.e. <code>const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();</code></p>\n<p>On x86 <code>cpu_frequency</code> = <code>239999500</code><br>\nOn ppc64le <code>cpu_frequency</code> = <code>-1</code></p>\n<p>I would like to explore more on this. Please provide comments/suggestions if any. Thanks!</p>", "body_text": "I went through the file tensorflow/core/platform/profile_utils/cpu_utils_test.cc and found that GetCycleCounterFrequency function returning incorrect result on ppc64le,  expected value is greater than \"0\", however on ppc64le getting \"-1\"  (see below for test code)\nhttps://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/platform/profile_utils/cpu_utils_test.cc#L56\nTEST_F(CpuUtilsTest, CheckCycleCounterFrequency) {\n  const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();\n  CHECK_GT(cpu_frequency, 0);\n  CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY);\n  if (DBG) {\n    LOG(INFO) << \"Cpu frequency = \" << cpu_frequency;\n  }\n}\n\n\nChecked the output of CpuUtils::GetCycleCounterFrequency() using print statement i.e. const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();\nOn x86 cpu_frequency = 239999500\nOn ppc64le cpu_frequency = -1\nI would like to explore more on this. Please provide comments/suggestions if any. Thanks!", "body": "I went through the file tensorflow/core/platform/profile_utils/cpu_utils_test.cc and found that GetCycleCounterFrequency function returning incorrect result on ppc64le,  expected value is greater than` \"0\"`, however on ppc64le getting `\"-1\"`  (see below for test code)\r\nhttps://github.com/tensorflow/tensorflow/blob/v1.0.1/tensorflow/core/platform/profile_utils/cpu_utils_test.cc#L56\r\n\r\n```\r\nTEST_F(CpuUtilsTest, CheckCycleCounterFrequency) {\r\n  const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();\r\n  CHECK_GT(cpu_frequency, 0);\r\n  CHECK_NE(cpu_frequency, CpuUtils::INVALID_FREQUENCY);\r\n  if (DBG) {\r\n    LOG(INFO) << \"Cpu frequency = \" << cpu_frequency;\r\n  }\r\n}\r\n\r\n```\r\n\r\nChecked the output of `CpuUtils::GetCycleCounterFrequency()` using print statement i.e. `const int64 cpu_frequency = CpuUtils::GetCycleCounterFrequency();`\r\n\r\nOn x86 `cpu_frequency` = `239999500`\r\nOn ppc64le `cpu_frequency` = `-1`\r\n\r\nI would like to explore more on this. Please provide comments/suggestions if any. Thanks!"}
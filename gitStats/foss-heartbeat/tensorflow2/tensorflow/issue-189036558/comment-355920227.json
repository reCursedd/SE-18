{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/355920227", "html_url": "https://github.com/tensorflow/tensorflow/issues/5592#issuecomment-355920227", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5592", "id": 355920227, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTkyMDIyNw==", "user": {"login": "KillPinguin", "id": 11447989, "node_id": "MDQ6VXNlcjExNDQ3OTg5", "avatar_url": "https://avatars3.githubusercontent.com/u/11447989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KillPinguin", "html_url": "https://github.com/KillPinguin", "followers_url": "https://api.github.com/users/KillPinguin/followers", "following_url": "https://api.github.com/users/KillPinguin/following{/other_user}", "gists_url": "https://api.github.com/users/KillPinguin/gists{/gist_id}", "starred_url": "https://api.github.com/users/KillPinguin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KillPinguin/subscriptions", "organizations_url": "https://api.github.com/users/KillPinguin/orgs", "repos_url": "https://api.github.com/users/KillPinguin/repos", "events_url": "https://api.github.com/users/KillPinguin/events{/privacy}", "received_events_url": "https://api.github.com/users/KillPinguin/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-08T09:42:18Z", "updated_at": "2018-01-08T10:22:33Z", "author_association": "NONE", "body_html": "<p>I'm the author of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"284147061\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/15585\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/15585/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/15585\">#15585</a> and would like to comment on this / state a short version of my findings. Please see my issue for more.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=22581048\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/quaeler\">@quaeler</a><br>\nYou're right, this could be a similar issue.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20574558\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/AlvinChen13\">@AlvinChen13</a> could you try to profile your cifar example using nvprof? Like I stated in my issue, it seems that Tensorflow is using slower CUDA functions (<em>maxwell_fp16_segmemm_fp16_128x128_nn</em> for FP16 which is worse than the cuBLAS method <em>maxwell_hgemm_256x128_nn</em>)</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=27519983\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rajivkapoor\">@rajivkapoor</a> I did not (yet) measure the CPU, since the actual GPU performance for elementary operations is worse... Could you also try running nvprof and check if the \"raw\" GPU performance drops when using FP16? In my case, the GPU was at 100%, I will check this for cifar10 when I find the time.</p>", "body_text": "I'm the author of #15585 and would like to comment on this / state a short version of my findings. Please see my issue for more.\n@quaeler\nYou're right, this could be a similar issue.\n@AlvinChen13 could you try to profile your cifar example using nvprof? Like I stated in my issue, it seems that Tensorflow is using slower CUDA functions (maxwell_fp16_segmemm_fp16_128x128_nn for FP16 which is worse than the cuBLAS method maxwell_hgemm_256x128_nn)\n@rajivkapoor I did not (yet) measure the CPU, since the actual GPU performance for elementary operations is worse... Could you also try running nvprof and check if the \"raw\" GPU performance drops when using FP16? In my case, the GPU was at 100%, I will check this for cifar10 when I find the time.", "body": "I'm the author of #15585 and would like to comment on this / state a short version of my findings. Please see my issue for more.\r\n\r\n@quaeler \r\nYou're right, this could be a similar issue.\r\n\r\n@AlvinChen13 could you try to profile your cifar example using nvprof? Like I stated in my issue, it seems that Tensorflow is using slower CUDA functions (*maxwell_fp16_segmemm_fp16_128x128_nn* for FP16 which is worse than the cuBLAS method *maxwell_hgemm_256x128_nn*)\r\n\r\n@rajivkapoor I did not (yet) measure the CPU, since the actual GPU performance for elementary operations is worse... Could you also try running nvprof and check if the \"raw\" GPU performance drops when using FP16? In my case, the GPU was at 100%, I will check this for cifar10 when I find the time.\r\n  "}
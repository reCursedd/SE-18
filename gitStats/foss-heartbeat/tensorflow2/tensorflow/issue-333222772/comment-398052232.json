{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/398052232", "html_url": "https://github.com/tensorflow/tensorflow/issues/20091#issuecomment-398052232", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20091", "id": 398052232, "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODA1MjIzMg==", "user": {"login": "mikefairbank", "id": 40356353, "node_id": "MDQ6VXNlcjQwMzU2MzUz", "avatar_url": "https://avatars2.githubusercontent.com/u/40356353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikefairbank", "html_url": "https://github.com/mikefairbank", "followers_url": "https://api.github.com/users/mikefairbank/followers", "following_url": "https://api.github.com/users/mikefairbank/following{/other_user}", "gists_url": "https://api.github.com/users/mikefairbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikefairbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikefairbank/subscriptions", "organizations_url": "https://api.github.com/users/mikefairbank/orgs", "repos_url": "https://api.github.com/users/mikefairbank/repos", "events_url": "https://api.github.com/users/mikefairbank/events{/privacy}", "received_events_url": "https://api.github.com/users/mikefairbank/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-18T13:23:26Z", "updated_at": "2018-06-18T13:23:26Z", "author_association": "NONE", "body_html": "<p>Thanks.  Yes it did solve my problem.</p>\n<p>import tensorflow as tf<br>\nsess = tf.Session()</p>\n<p>W1 = tf.Variable([2.0])<br>\nW2 = tf.Variable([0.0])</p>\n<p>safe_W2 = tf.where(W1&gt;4, W2, [1.0])<br>\noutput = tf.where(W1 &gt;4, W1/safe_W2, tf.zeros_like(W1))<br>\ngradient=tf.gradients(output, W2)[0]<br>\nsess.run(tf.global_variables_initializer())</p>\n<p>print(sess.run([output, gradient])) # prints 0,0, i.e. correct answers now</p>", "body_text": "Thanks.  Yes it did solve my problem.\nimport tensorflow as tf\nsess = tf.Session()\nW1 = tf.Variable([2.0])\nW2 = tf.Variable([0.0])\nsafe_W2 = tf.where(W1>4, W2, [1.0])\noutput = tf.where(W1 >4, W1/safe_W2, tf.zeros_like(W1))\ngradient=tf.gradients(output, W2)[0]\nsess.run(tf.global_variables_initializer())\nprint(sess.run([output, gradient])) # prints 0,0, i.e. correct answers now", "body": "Thanks.  Yes it did solve my problem.  \r\n\r\nimport tensorflow as tf\r\nsess = tf.Session()\r\n\r\nW1 = tf.Variable([2.0])\r\nW2 = tf.Variable([0.0])\r\n\r\nsafe_W2 = tf.where(W1>4, W2, [1.0])\r\noutput = tf.where(W1 >4, W1/safe_W2, tf.zeros_like(W1))\r\ngradient=tf.gradients(output, W2)[0] \r\nsess.run(tf.global_variables_initializer())\r\n\r\nprint(sess.run([output, gradient])) # prints 0,0, i.e. correct answers now"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/381339555", "html_url": "https://github.com/tensorflow/tensorflow/issues/17974#issuecomment-381339555", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17974", "id": 381339555, "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTMzOTU1NQ==", "user": {"login": "elbaro", "id": 1851290, "node_id": "MDQ6VXNlcjE4NTEyOTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1851290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elbaro", "html_url": "https://github.com/elbaro", "followers_url": "https://api.github.com/users/elbaro/followers", "following_url": "https://api.github.com/users/elbaro/following{/other_user}", "gists_url": "https://api.github.com/users/elbaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/elbaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elbaro/subscriptions", "organizations_url": "https://api.github.com/users/elbaro/orgs", "repos_url": "https://api.github.com/users/elbaro/repos", "events_url": "https://api.github.com/users/elbaro/events{/privacy}", "received_events_url": "https://api.github.com/users/elbaro/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-14T16:04:30Z", "updated_at": "2018-04-14T16:04:30Z", "author_association": "NONE", "body_html": "<p>I converted my model from NCHW to NHWC, and the error changed.</p>\n<div class=\"highlight highlight-source-python\"><pre>Traceback (Most recent call last):\n<span class=\"pl-c1\">self</span>.sess.run(<span class=\"pl-c1\">self</span>.outs, <span class=\"pl-v\">feed_dict</span><span class=\"pl-k\">=</span>{<span class=\"pl-c1\">self</span>.img: img})\n<span class=\"pl-c1\">905</span>  <span class=\"pl-k\">/</span>usr<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python3.6<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>client<span class=\"pl-k\">/</span>session.py run      <span class=\"pl-ii\">--</span><span class=\"pl-k\">&gt;</span> run_metadata_ptr)\n<span class=\"pl-c1\">1140</span> <span class=\"pl-k\">/</span>usr<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python3.6<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>client<span class=\"pl-k\">/</span>session.py _run     <span class=\"pl-ii\">--</span><span class=\"pl-k\">&gt;</span> feed_dict_tensor, options, run_metadata)                   \n<span class=\"pl-c1\">1321</span> <span class=\"pl-k\">/</span>usr<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python3.6<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>client<span class=\"pl-k\">/</span>session.py _do_run  <span class=\"pl-ii\">--</span><span class=\"pl-k\">&gt;</span> run_metadata)                                              \n<span class=\"pl-c1\">1340</span> <span class=\"pl-k\">/</span>usr<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python3.6<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>client<span class=\"pl-k\">/</span>session.py _do_call <span class=\"pl-ii\">--</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">raise</span> <span class=\"pl-c1\">type</span>(e)(node_def, op, message)                       \nInvalidArgumentError: requested_output_max must be <span class=\"pl-k\">&gt;=</span> requested_output_min, but got <span class=\"pl-k\">-</span>nan <span class=\"pl-k\">and</span> <span class=\"pl-c1\">0</span>\n\t [[Node: mul<span class=\"pl-k\">/</span>eightbit<span class=\"pl-k\">/</span>requantize = Requantize[Tinput=<span class=\"pl-c1\">DT_QINT32</span>, out_type=<span class=\"pl-c1\">DT_QUINT8</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>](mul<span class=\"pl-k\">/</span>eightbit, mul<span class=\"pl-k\">/</span>eightbit:<span class=\"pl-c1\">1</span>, mul<span class=\"pl-k\">/</span>eightbit:<span class=\"pl-c1\">2</span>, mul<span class=\"pl-k\">/</span>eightbit<span class=\"pl-k\">/</span>requant_range, mul<span class=\"pl-k\">/</span>eightbit<span class=\"pl-k\">/</span>requant_range:<span class=\"pl-c1\">1</span>)]]\n\t [[Node: Relu_17<span class=\"pl-k\">/</span>_27 = _Recv[client_terminated=false, recv_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:GPU:0<span class=\"pl-pds\">\"</span></span>, send_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>, send_device_incarnation=<span class=\"pl-c1\">1</span>, tensor_name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>edge_657_Relu_17<span class=\"pl-pds\">\"</span></span>, tensor_type=<span class=\"pl-c1\">DT_FLOAT</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:GPU:0<span class=\"pl-pds\">\"</span></span>]()]]\n\nCaused by op <span class=\"pl-s\"><span class=\"pl-pds\">'</span>mul/eightbit/requantize<span class=\"pl-pds\">'</span></span>, defined at:\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/user/...py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">108</span>, <span class=\"pl-k\">in</span> <span class=\"pl-c1\">__init__</span>\n    tf.import_graph_def(graph_def, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span><span class=\"pl-pds\">'</span></span>)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">432</span>, <span class=\"pl-k\">in</span> new_func\n    <span class=\"pl-k\">return</span> func(<span class=\"pl-k\">*</span>args, <span class=\"pl-k\">**</span>kwargs)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/lib/python3.6/site-packages/tensorflow/python/framework/importer.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">577</span>, <span class=\"pl-k\">in</span> import_graph_def\n    op_def<span class=\"pl-k\">=</span>op_def)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/lib/python3.6/site-packages/tensorflow/python/framework/ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">3290</span>, <span class=\"pl-k\">in</span> create_op\n    op_def<span class=\"pl-k\">=</span>op_def)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/usr/lib/python3.6/site-packages/tensorflow/python/framework/ops.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">1654</span>, <span class=\"pl-k\">in</span> <span class=\"pl-c1\">__init__</span>\n    <span class=\"pl-c1\">self</span>._traceback <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>._graph._extract_stack()  <span class=\"pl-c\"><span class=\"pl-c\">#</span> pylint: disable=protected-access</span>\n\nInvalidArgumentError (see above <span class=\"pl-k\">for</span> traceback): requested_output_max must be <span class=\"pl-k\">&gt;=</span> requested_output_min, but got <span class=\"pl-k\">-</span>nan <span class=\"pl-k\">and</span> <span class=\"pl-c1\">0</span>\n\t [[Node: mul<span class=\"pl-k\">/</span>eightbit<span class=\"pl-k\">/</span>requantize = Requantize[Tinput=<span class=\"pl-c1\">DT_QINT32</span>, out_type=<span class=\"pl-c1\">DT_QUINT8</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>](mul<span class=\"pl-k\">/</span>eightbit, mul<span class=\"pl-k\">/</span>eightbit:<span class=\"pl-c1\">1</span>, mul<span class=\"pl-k\">/</span>eightbit:<span class=\"pl-c1\">2</span>, mul<span class=\"pl-k\">/</span>eightbit<span class=\"pl-k\">/</span>requant_range, mul<span class=\"pl-k\">/</span>eightbit<span class=\"pl-k\">/</span>requant_range:<span class=\"pl-c1\">1</span>)]]\n\t [[Node: Relu_17<span class=\"pl-k\">/</span>_27 = _Recv[client_terminated=false, recv_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:GPU:0<span class=\"pl-pds\">\"</span></span>, send_device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:CPU:0<span class=\"pl-pds\">\"</span></span>, send_device_incarnation=<span class=\"pl-c1\">1</span>, tensor_name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>edge_657_Relu_17<span class=\"pl-pds\">\"</span></span>, tensor_type=<span class=\"pl-c1\">DT_FLOAT</span>, _device=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/device:GPU:0<span class=\"pl-pds\">\"</span></span>]()]]\n\n<span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">/</span>usr<span class=\"pl-k\">/</span>lib<span class=\"pl-k\">/</span>python3.6<span class=\"pl-k\">/</span>site<span class=\"pl-k\">-</span>packages<span class=\"pl-k\">/</span>tensorflow<span class=\"pl-k\">/</span>python<span class=\"pl-k\">/</span>client<span class=\"pl-k\">/</span>session.py(<span class=\"pl-c1\">1340</span>)_do_call()\n<span class=\"pl-ii\">-&gt;</span> <span class=\"pl-k\">raise</span> <span class=\"pl-c1\">type</span>(e)(node_def, op, message)</pre></div>", "body_text": "I converted my model from NCHW to NHWC, and the error changed.\nTraceback (Most recent call last):\nself.sess.run(self.outs, feed_dict={self.img: img})\n905  /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py run      --> run_metadata_ptr)\n1140 /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py _run     --> feed_dict_tensor, options, run_metadata)                   \n1321 /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py _do_run  --> run_metadata)                                              \n1340 /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py _do_call --> raise type(e)(node_def, op, message)                       \nInvalidArgumentError: requested_output_max must be >= requested_output_min, but got -nan and 0\n\t [[Node: mul/eightbit/requantize = Requantize[Tinput=DT_QINT32, out_type=DT_QUINT8, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](mul/eightbit, mul/eightbit:1, mul/eightbit:2, mul/eightbit/requant_range, mul/eightbit/requant_range:1)]]\n\t [[Node: Relu_17/_27 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device_incarnation=1, tensor_name=\"edge_657_Relu_17\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]()]]\n\nCaused by op 'mul/eightbit/requantize', defined at:\n  File \"/home/user/...py\", line 108, in __init__\n    tf.import_graph_def(graph_def, name='')\n  File \"/usr/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 432, in new_func\n    return func(*args, **kwargs)\n  File \"/usr/lib/python3.6/site-packages/tensorflow/python/framework/importer.py\", line 577, in import_graph_def\n    op_def=op_def)\n  File \"/usr/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3290, in create_op\n    op_def=op_def)\n  File \"/usr/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1654, in __init__\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\n\nInvalidArgumentError (see above for traceback): requested_output_max must be >= requested_output_min, but got -nan and 0\n\t [[Node: mul/eightbit/requantize = Requantize[Tinput=DT_QINT32, out_type=DT_QUINT8, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](mul/eightbit, mul/eightbit:1, mul/eightbit:2, mul/eightbit/requant_range, mul/eightbit/requant_range:1)]]\n\t [[Node: Relu_17/_27 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device_incarnation=1, tensor_name=\"edge_657_Relu_17\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]()]]\n\n> /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py(1340)_do_call()\n-> raise type(e)(node_def, op, message)", "body": "I converted my model from NCHW to NHWC, and the error changed.\r\n\r\n```py\r\nTraceback (Most recent call last):\r\nself.sess.run(self.outs, feed_dict={self.img: img})\r\n905  /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py run      --> run_metadata_ptr)\r\n1140 /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py _run     --> feed_dict_tensor, options, run_metadata)                   \r\n1321 /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py _do_run  --> run_metadata)                                              \r\n1340 /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py _do_call --> raise type(e)(node_def, op, message)                       \r\nInvalidArgumentError: requested_output_max must be >= requested_output_min, but got -nan and 0\r\n\t [[Node: mul/eightbit/requantize = Requantize[Tinput=DT_QINT32, out_type=DT_QUINT8, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](mul/eightbit, mul/eightbit:1, mul/eightbit:2, mul/eightbit/requant_range, mul/eightbit/requant_range:1)]]\r\n\t [[Node: Relu_17/_27 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device_incarnation=1, tensor_name=\"edge_657_Relu_17\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]()]]\r\n\r\nCaused by op 'mul/eightbit/requantize', defined at:\r\n  File \"/home/user/...py\", line 108, in __init__\r\n    tf.import_graph_def(graph_def, name='')\r\n  File \"/usr/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 432, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/lib/python3.6/site-packages/tensorflow/python/framework/importer.py\", line 577, in import_graph_def\r\n    op_def=op_def)\r\n  File \"/usr/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3290, in create_op\r\n    op_def=op_def)\r\n  File \"/usr/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1654, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nInvalidArgumentError (see above for traceback): requested_output_max must be >= requested_output_min, but got -nan and 0\r\n\t [[Node: mul/eightbit/requantize = Requantize[Tinput=DT_QINT32, out_type=DT_QUINT8, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](mul/eightbit, mul/eightbit:1, mul/eightbit:2, mul/eightbit/requant_range, mul/eightbit/requant_range:1)]]\r\n\t [[Node: Relu_17/_27 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device_incarnation=1, tensor_name=\"edge_657_Relu_17\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]()]]\r\n\r\n> /usr/lib/python3.6/site-packages/tensorflow/python/client/session.py(1340)_do_call()\r\n-> raise type(e)(node_def, op, message)\r\n```"}
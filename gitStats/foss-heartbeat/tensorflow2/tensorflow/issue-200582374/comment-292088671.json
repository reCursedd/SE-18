{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292088671", "html_url": "https://github.com/tensorflow/tensorflow/issues/6824#issuecomment-292088671", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6824", "id": 292088671, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjA4ODY3MQ==", "user": {"login": "xxi511", "id": 10164640, "node_id": "MDQ6VXNlcjEwMTY0NjQw", "avatar_url": "https://avatars1.githubusercontent.com/u/10164640?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xxi511", "html_url": "https://github.com/xxi511", "followers_url": "https://api.github.com/users/xxi511/followers", "following_url": "https://api.github.com/users/xxi511/following{/other_user}", "gists_url": "https://api.github.com/users/xxi511/gists{/gist_id}", "starred_url": "https://api.github.com/users/xxi511/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xxi511/subscriptions", "organizations_url": "https://api.github.com/users/xxi511/orgs", "repos_url": "https://api.github.com/users/xxi511/repos", "events_url": "https://api.github.com/users/xxi511/events{/privacy}", "received_events_url": "https://api.github.com/users/xxi511/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-06T07:11:40Z", "updated_at": "2017-04-06T07:11:40Z", "author_association": "NONE", "body_html": "<p>I think <code>_exponential_space_einsum</code> faced the same problem that can't handle more than one <code>None</code> shape<br>\n<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1898501\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jihunchoi\">@jihunchoi</a>  any chance to expect new pull request?</p>\n<div class=\"highlight highlight-source-python\"><pre>    x_val <span class=\"pl-k\">=</span> np.array([[<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">2</span>],\n                     [<span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">4</span>]])\n    y_val <span class=\"pl-k\">=</span> np.array([[<span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">5</span>],\n                     [<span class=\"pl-c1\">6</span>, <span class=\"pl-c1\">3</span>]])\n    g_val <span class=\"pl-k\">=</span> np.array([[<span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">5</span>],\n                      [<span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">7</span>]])\n    x <span class=\"pl-k\">=</span> tf.placeholder(<span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.int32, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">None</span>, <span class=\"pl-c1\">None</span>])\n    y <span class=\"pl-k\">=</span> tf.placeholder(<span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.int32, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">None</span>, <span class=\"pl-c1\">None</span>])\n    g <span class=\"pl-k\">=</span> tf.placeholder(<span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.int32, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">None</span>, <span class=\"pl-c1\">None</span>])\n\n    z <span class=\"pl-k\">=</span> tf.einsum(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>ab,ab,ab-&gt;b<span class=\"pl-pds\">'</span></span>, x, y, g)\n    <span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n        a, b, c <span class=\"pl-k\">=</span> sess.run([x,y,z], <span class=\"pl-v\">feed_dict</span><span class=\"pl-k\">=</span>{x: x_val,\n                                               y: y_val,\n                                               g: g_val})</pre></div>\n<div class=\"highlight highlight-source-shell\"><pre>InvalidArgumentError (see above <span class=\"pl-k\">for</span> traceback): only one input size may be -1, not both 0 and 1\n\t [[Node: Reshape <span class=\"pl-k\">=</span> Reshape[T<span class=\"pl-k\">=</span>DT_INT32, Tshape<span class=\"pl-k\">=</span>DT_INT32, _device<span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/gpu:0<span class=\"pl-pds\">\"</span></span>](_recv_Placeholder_0/_5, Reshape/shape)]]\n\t [[Node: Sum/_7 <span class=\"pl-k\">=</span> _Recv[client_terminated<span class=\"pl-k\">=</span>false, recv_device<span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/cpu:0<span class=\"pl-pds\">\"</span></span>, send_device<span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/gpu:0<span class=\"pl-pds\">\"</span></span>, send_device_incarnation<span class=\"pl-k\">=</span>1, tensor_name<span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>edge_3_Sum<span class=\"pl-pds\">\"</span></span>, tensor_type<span class=\"pl-k\">=</span>DT_INT32, _device<span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/job:localhost/replica:0/task:0/cpu:0<span class=\"pl-pds\">\"</span></span>]()]]</pre></div>", "body_text": "I think _exponential_space_einsum faced the same problem that can't handle more than one None shape\n@jihunchoi  any chance to expect new pull request?\n    x_val = np.array([[1, 2],\n                     [3, 4]])\n    y_val = np.array([[4, 5],\n                     [6, 3]])\n    g_val = np.array([[3, 5],\n                      [2, 7]])\n    x = tf.placeholder(dtype=tf.int32, shape=[None, None])\n    y = tf.placeholder(dtype=tf.int32, shape=[None, None])\n    g = tf.placeholder(dtype=tf.int32, shape=[None, None])\n\n    z = tf.einsum('ab,ab,ab->b', x, y, g)\n    with tf.Session() as sess:\n        a, b, c = sess.run([x,y,z], feed_dict={x: x_val,\n                                               y: y_val,\n                                               g: g_val})\nInvalidArgumentError (see above for traceback): only one input size may be -1, not both 0 and 1\n\t [[Node: Reshape = Reshape[T=DT_INT32, Tshape=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](_recv_Placeholder_0/_5, Reshape/shape)]]\n\t [[Node: Sum/_7 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_3_Sum\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]", "body": "I think `_exponential_space_einsum` faced the same problem that can't handle more than one `None` shape \r\n@jihunchoi  any chance to expect new pull request?\r\n\r\n```python\r\n    x_val = np.array([[1, 2],\r\n                     [3, 4]])\r\n    y_val = np.array([[4, 5],\r\n                     [6, 3]])\r\n    g_val = np.array([[3, 5],\r\n                      [2, 7]])\r\n    x = tf.placeholder(dtype=tf.int32, shape=[None, None])\r\n    y = tf.placeholder(dtype=tf.int32, shape=[None, None])\r\n    g = tf.placeholder(dtype=tf.int32, shape=[None, None])\r\n\r\n    z = tf.einsum('ab,ab,ab->b', x, y, g)\r\n    with tf.Session() as sess:\r\n        a, b, c = sess.run([x,y,z], feed_dict={x: x_val,\r\n                                               y: y_val,\r\n                                               g: g_val})\r\n```\r\n\r\n```shell\r\nInvalidArgumentError (see above for traceback): only one input size may be -1, not both 0 and 1\r\n\t [[Node: Reshape = Reshape[T=DT_INT32, Tshape=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](_recv_Placeholder_0/_5, Reshape/shape)]]\r\n\t [[Node: Sum/_7 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device_incarnation=1, tensor_name=\"edge_3_Sum\", tensor_type=DT_INT32, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\r\n```"}
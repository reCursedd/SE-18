{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/272430725", "html_url": "https://github.com/tensorflow/tensorflow/issues/6824#issuecomment-272430725", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6824", "id": 272430725, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjQzMDcyNQ==", "user": {"login": "jihunchoi", "id": 1898501, "node_id": "MDQ6VXNlcjE4OTg1MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1898501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jihunchoi", "html_url": "https://github.com/jihunchoi", "followers_url": "https://api.github.com/users/jihunchoi/followers", "following_url": "https://api.github.com/users/jihunchoi/following{/other_user}", "gists_url": "https://api.github.com/users/jihunchoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jihunchoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jihunchoi/subscriptions", "organizations_url": "https://api.github.com/users/jihunchoi/orgs", "repos_url": "https://api.github.com/users/jihunchoi/repos", "events_url": "https://api.github.com/users/jihunchoi/events{/privacy}", "received_events_url": "https://api.github.com/users/jihunchoi/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-13T12:19:17Z", "updated_at": "2017-01-13T12:20:03Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I don't fully understand how <code>einsum</code> works, but as far as I read, the reason is that when there exist two or more <code>None</code> values in one of <code>input</code> parameters, then <code>uncompacted_shape</code> in line 339 has two or more <code>None</code> values.<br>\nThen, in <code>_reshape_if_necessary</code> function, <code>None</code> values of <code>uncompacted_shape</code> are replaced with <code>-1</code> and passed to <code>reshape</code> function. Since <code>shape</code> parameter of <code>reshape</code> function should have at most one <code>None</code> value, thus the error is triggered.<br>\nI think it can be resolved if we check whether <code>uncompacted_shape</code> has two or more <code>None</code> values and in that case explicitly give it a shape value by <code>tf.shape</code> function to make it have at most one <code>-1</code> value.</p>", "body_text": "I don't fully understand how einsum works, but as far as I read, the reason is that when there exist two or more None values in one of input parameters, then uncompacted_shape in line 339 has two or more None values.\nThen, in _reshape_if_necessary function, None values of uncompacted_shape are replaced with -1 and passed to reshape function. Since shape parameter of reshape function should have at most one None value, thus the error is triggered.\nI think it can be resolved if we check whether uncompacted_shape has two or more None values and in that case explicitly give it a shape value by tf.shape function to make it have at most one -1 value.", "body": "I don't fully understand how `einsum` works, but as far as I read, the reason is that when there exist two or more `None` values in one of `input` parameters, then `uncompacted_shape` in line 339 has two or more `None` values.\r\nThen, in `_reshape_if_necessary` function, `None` values of `uncompacted_shape` are replaced with `-1` and passed to `reshape` function. Since `shape` parameter of `reshape` function should have at most one `None` value, thus the error is triggered.\r\nI think it can be resolved if we check whether `uncompacted_shape` has two or more `None` values and in that case explicitly give it a shape value by `tf.shape` function to make it have at most one `-1` value."}
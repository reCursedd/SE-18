{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/784", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/784/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/784/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/784/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/784", "id": 126843227, "node_id": "MDU6SXNzdWUxMjY4NDMyMjc=", "number": 784, "title": "TensorBoard cannot feed to placeholder x-input on MNIST (for merged only)", "user": {"login": "jeandut", "id": 11030901, "node_id": "MDQ6VXNlcjExMDMwOTAx", "avatar_url": "https://avatars1.githubusercontent.com/u/11030901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeandut", "html_url": "https://github.com/jeandut", "followers_url": "https://api.github.com/users/jeandut/followers", "following_url": "https://api.github.com/users/jeandut/following{/other_user}", "gists_url": "https://api.github.com/users/jeandut/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeandut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeandut/subscriptions", "organizations_url": "https://api.github.com/users/jeandut/orgs", "repos_url": "https://api.github.com/users/jeandut/repos", "events_url": "https://api.github.com/users/jeandut/events{/privacy}", "received_events_url": "https://api.github.com/users/jeandut/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-01-15T10:10:38Z", "updated_at": "2016-01-15T14:06:45Z", "closed_at": "2016-01-15T14:06:45Z", "author_association": "NONE", "body_html": "<p>I am running a slightly different version of mnist+relog because I recently installed TF on my computer and it does not have access to Internet (and I wanted to do the Image processing part myself).<br>\nIt runs completely fine without TensorBoard and gives me 0.9166 accuracy on Test set which is not too bad for simple relog on unrolled images.<br>\nHowever when I add in the for loop the part where you feed feed_dist to merged (which is the fusion of all the summaries) I got the following error message:</p>\n<pre><code>InvalidArgumentError: You must feed a value for placeholder tensor 'x-input_4' with dtype float\n     [[Node: x-input_4 = Placeholder[dtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\n     [[Node: x-input_7/_23 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_152_x-input_7\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\nCaused by op u'x-input_4', defined at:\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/start_ipython_kernel.py\", line 188, in &lt;module&gt;\n    __ipythonkernel__.start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelapp.py\", line 374, in start\n    ioloop.IOLoop.instance().start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/ioloop.py\", line 151, in start\n    super(ZMQIOLoop, self).start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/ioloop.py\", line 840, in start\n    handler_func(fd_obj, events)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 433, in _handle_events\n    self._handle_recv()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 465, in _handle_recv\n    self._run_callback(callback, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 407, in _run_callback\n    callback(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 252, in dispatcher\n    return self.dispatch_shell(stream, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 213, in dispatch_shell\n    handler(stream, idents, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 362, in execute_request\n    user_expressions, allow_stdin)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/ipkernel.py\", line 181, in do_execute\n    shell.run_cell(code, store_history=store_history, silent=silent)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2868, in run_cell\n    interactivity=interactivity, compiler=compiler, result=result)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2978, in run_ast_nodes\n    if self.run_code(code, result):\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 3032, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"&lt;ipython-input-48-28d84e6d5ef3&gt;\", line 1, in &lt;module&gt;\n    runfile('/home/jeandut/mnist_jean_tf.py', wdir='/home/jeandut')\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/sitecustomize.py\", line 682, in runfile\n    execfile(filename, namespace)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/sitecustomize.py\", line 78, in execfile\n    builtins.execfile(filename, *where)\n  File \"/home/jeandut/mnist_jean_tf.py\", line 64, in &lt;module&gt;\n    x=tf.placeholder(tf.float32, [None, 784],name=\"x-input\")\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 673, in placeholder\n    name=name)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 463, in _placeholder\n    name=name)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op\n    op_def=op_def)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1043, in __init__\n    self._traceback = _extract_stack()\n</code></pre>\n<p>It is therefore :</p>\n<ul>\n<li>me badly implementing tensorboard part (but as I copied almost exactly what you did in the mnist tutorial I cannot find where it the bug is)</li>\n<li>a bug in my installation of tensorflow somehow...</li>\n<li>something else</li>\n</ul>\n<p>My code:</p>\n<pre><code># -*- coding: utf-8 -*-\n\"\"\"\nCreated on Thu Jan 14 13:06:44 2016\n\n@author: jeandut\n\"\"\"\n#from tensorflow.examples.tutorials.mnist import input_data\n#mnist = input_data.read_data_sets(\"MNIST_data/\", one_hot=True)\n\nimport tensorflow as tf\nimport os\nimport random\nimport numpy as np\nfrom array import array\nimport struct\nimport matplotlib.pyplot as plt\nimport time\n\n#I imported myself the decompressed -ubyte files from mnist cause I do not have internet they are at the path I wrote replace with appropriate path to reproduce\nos.chdir('/home/jeandut/Bureau/Step1/')\n\nwith open(\"train-labels.idx1-ubyte\") as file:\n    magic, size = struct.unpack(\"&gt;II\",file.read(8))\n    train_labels_data=np.asarray(array(\"B\",file.read()))\nwith open(\"t10k-labels.idx1-ubyte\") as file:\n    magic, size = struct.unpack(\"&gt;II\",file.read(8))\n    test_labels_data=np.asarray(array(\"B\",file.read()))\nwith open(\"train-images.idx3-ubyte\") as file:\n    magic, size, rows, cols =struct.unpack(\"&gt;IIII\",file.read(16))\n    train_images_data=np.reshape(np.asarray(array(\"B\",file.read())),(size,rows,cols))\nwith open(\"t10k-images.idx3-ubyte\") as file:\n    magic, size, rows, cols =struct.unpack(\"&gt;IIII\",file.read(16))\n    test_images_data=np.reshape(np.asarray(array(\"B\",file.read())),(size,rows,cols))\n\n\n\n\n\nfor i in range(10):\n   plt.imshow(train_images_data[i,:])\n   plt.show()\n   print(train_labels_data[i])\n\n\ntrain_images=np.reshape(train_images_data,(60000,28*28)).astype(np.float32)*1/255\ntest_images=np.reshape(test_images_data,(10000,28*28)).astype(np.float32)*1/255\n\ntrain_labels=np.zeros((60000,10),dtype=np.float32)\ntest_labels=np.zeros((10000,10),dtype=np.float32)\n\nfor i in range(60000):\n    a=train_labels_data[i]\n    train_labels[i,a]=1.\n\nfor j in range(10000):\n    b=test_labels_data[j]\n    test_labels[j,b]=1.\n\n\n\nsess=tf.Session()\n\n\nx=tf.placeholder(tf.float32, [None, 784],name=\"x-input\")\nW=tf.Variable(tf.zeros([784, 10]),name=\"weights\")\nb=tf.Variable(tf.zeros([10]),name=\"bias\")\n\n\nwith tf.name_scope(\"Wx_b\") as scope:\n    y=tf.nn.softmax(tf.matmul(x,W) + b)\n\n\nw_hist=tf.histogram_summary(\"weights\",W)\nb_hist=tf.histogram_summary(\"bias\",b)\ny_hist=tf.histogram_summary(\"y\",y)\n\n\ny_ =tf.placeholder(tf.float32, [None, 10], name=\"y-input\")\n\ny_hist=tf.histogram_summary(\"y\",y)\nwith tf.name_scope(\"xent\") as scope:\n\n    cross_entropy= -tf.reduce_sum(y_*tf.log(y))\n    ce_summ=tf.scalar_summary(\"cross_entropy\", cross_entropy)\n\n\nwith tf.name_scope(\"train\") as scope:\n    train_step=tf.train.GradientDescentOptimizer(0.01).minimize(cross_entropy)\n\n\nwith tf.name_scope(\"train\") as scope:\n    correct_prediction =tf.equal(tf.argmax(y,1), tf.argmax(y_,1))\n\n\n    accuracy=tf.reduce_mean(tf.cast(correct_prediction,tf.float32))\n    accuracy_summary=tf.scalar_summary(\"accuracy\",accuracy)\n\nmerged=tf.merge_all_summaries()\nwriter=tf.train.SummaryWriter(\"tmp/mnist_logs\",sess.graph_def)\n\n\n\n\n\n\ninit=tf.initialize_all_variables()\nsess.run(init)\n\n\nfor i in range(1000):\n    if i % 10 == 0:\n        feed={x:test_images, y_: test_labels}\n        result=sess.run([merged, accuracy],feed_dict=feed)\n        summary_str=result[0]\n        acc=result[1]\n        writer.add_summary(summary_str, i)\n        print(\"Accuracy at step %s: %s\" % (i,acc))\n    else:\n        index=np.random.randint(60000-1,size=100)\n        batch_xs, batch_ys = train_images[index,:], train_labels[index]\n        sess.run(train_step, feed_dict={x: batch_xs, y_: batch_ys})\n\n\n\n\n\nprint(sess.run(accuracy, feed_dict={x: train_images, y_: train_labels}))\n\n\n\n</code></pre>\n<p>I posted the question on stack but nobody seems to be able to solve it ! Please help !</p>", "body_text": "I am running a slightly different version of mnist+relog because I recently installed TF on my computer and it does not have access to Internet (and I wanted to do the Image processing part myself).\nIt runs completely fine without TensorBoard and gives me 0.9166 accuracy on Test set which is not too bad for simple relog on unrolled images.\nHowever when I add in the for loop the part where you feed feed_dist to merged (which is the fusion of all the summaries) I got the following error message:\nInvalidArgumentError: You must feed a value for placeholder tensor 'x-input_4' with dtype float\n     [[Node: x-input_4 = Placeholder[dtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\n     [[Node: x-input_7/_23 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_152_x-input_7\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\nCaused by op u'x-input_4', defined at:\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/start_ipython_kernel.py\", line 188, in <module>\n    __ipythonkernel__.start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelapp.py\", line 374, in start\n    ioloop.IOLoop.instance().start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/ioloop.py\", line 151, in start\n    super(ZMQIOLoop, self).start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/ioloop.py\", line 840, in start\n    handler_func(fd_obj, events)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 433, in _handle_events\n    self._handle_recv()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 465, in _handle_recv\n    self._run_callback(callback, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 407, in _run_callback\n    callback(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 252, in dispatcher\n    return self.dispatch_shell(stream, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 213, in dispatch_shell\n    handler(stream, idents, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 362, in execute_request\n    user_expressions, allow_stdin)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/ipkernel.py\", line 181, in do_execute\n    shell.run_cell(code, store_history=store_history, silent=silent)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2868, in run_cell\n    interactivity=interactivity, compiler=compiler, result=result)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2978, in run_ast_nodes\n    if self.run_code(code, result):\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 3032, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"<ipython-input-48-28d84e6d5ef3>\", line 1, in <module>\n    runfile('/home/jeandut/mnist_jean_tf.py', wdir='/home/jeandut')\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/sitecustomize.py\", line 682, in runfile\n    execfile(filename, namespace)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/sitecustomize.py\", line 78, in execfile\n    builtins.execfile(filename, *where)\n  File \"/home/jeandut/mnist_jean_tf.py\", line 64, in <module>\n    x=tf.placeholder(tf.float32, [None, 784],name=\"x-input\")\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 673, in placeholder\n    name=name)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 463, in _placeholder\n    name=name)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op\n    op_def=op_def)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1043, in __init__\n    self._traceback = _extract_stack()\n\nIt is therefore :\n\nme badly implementing tensorboard part (but as I copied almost exactly what you did in the mnist tutorial I cannot find where it the bug is)\na bug in my installation of tensorflow somehow...\nsomething else\n\nMy code:\n# -*- coding: utf-8 -*-\n\"\"\"\nCreated on Thu Jan 14 13:06:44 2016\n\n@author: jeandut\n\"\"\"\n#from tensorflow.examples.tutorials.mnist import input_data\n#mnist = input_data.read_data_sets(\"MNIST_data/\", one_hot=True)\n\nimport tensorflow as tf\nimport os\nimport random\nimport numpy as np\nfrom array import array\nimport struct\nimport matplotlib.pyplot as plt\nimport time\n\n#I imported myself the decompressed -ubyte files from mnist cause I do not have internet they are at the path I wrote replace with appropriate path to reproduce\nos.chdir('/home/jeandut/Bureau/Step1/')\n\nwith open(\"train-labels.idx1-ubyte\") as file:\n    magic, size = struct.unpack(\">II\",file.read(8))\n    train_labels_data=np.asarray(array(\"B\",file.read()))\nwith open(\"t10k-labels.idx1-ubyte\") as file:\n    magic, size = struct.unpack(\">II\",file.read(8))\n    test_labels_data=np.asarray(array(\"B\",file.read()))\nwith open(\"train-images.idx3-ubyte\") as file:\n    magic, size, rows, cols =struct.unpack(\">IIII\",file.read(16))\n    train_images_data=np.reshape(np.asarray(array(\"B\",file.read())),(size,rows,cols))\nwith open(\"t10k-images.idx3-ubyte\") as file:\n    magic, size, rows, cols =struct.unpack(\">IIII\",file.read(16))\n    test_images_data=np.reshape(np.asarray(array(\"B\",file.read())),(size,rows,cols))\n\n\n\n\n\nfor i in range(10):\n   plt.imshow(train_images_data[i,:])\n   plt.show()\n   print(train_labels_data[i])\n\n\ntrain_images=np.reshape(train_images_data,(60000,28*28)).astype(np.float32)*1/255\ntest_images=np.reshape(test_images_data,(10000,28*28)).astype(np.float32)*1/255\n\ntrain_labels=np.zeros((60000,10),dtype=np.float32)\ntest_labels=np.zeros((10000,10),dtype=np.float32)\n\nfor i in range(60000):\n    a=train_labels_data[i]\n    train_labels[i,a]=1.\n\nfor j in range(10000):\n    b=test_labels_data[j]\n    test_labels[j,b]=1.\n\n\n\nsess=tf.Session()\n\n\nx=tf.placeholder(tf.float32, [None, 784],name=\"x-input\")\nW=tf.Variable(tf.zeros([784, 10]),name=\"weights\")\nb=tf.Variable(tf.zeros([10]),name=\"bias\")\n\n\nwith tf.name_scope(\"Wx_b\") as scope:\n    y=tf.nn.softmax(tf.matmul(x,W) + b)\n\n\nw_hist=tf.histogram_summary(\"weights\",W)\nb_hist=tf.histogram_summary(\"bias\",b)\ny_hist=tf.histogram_summary(\"y\",y)\n\n\ny_ =tf.placeholder(tf.float32, [None, 10], name=\"y-input\")\n\ny_hist=tf.histogram_summary(\"y\",y)\nwith tf.name_scope(\"xent\") as scope:\n\n    cross_entropy= -tf.reduce_sum(y_*tf.log(y))\n    ce_summ=tf.scalar_summary(\"cross_entropy\", cross_entropy)\n\n\nwith tf.name_scope(\"train\") as scope:\n    train_step=tf.train.GradientDescentOptimizer(0.01).minimize(cross_entropy)\n\n\nwith tf.name_scope(\"train\") as scope:\n    correct_prediction =tf.equal(tf.argmax(y,1), tf.argmax(y_,1))\n\n\n    accuracy=tf.reduce_mean(tf.cast(correct_prediction,tf.float32))\n    accuracy_summary=tf.scalar_summary(\"accuracy\",accuracy)\n\nmerged=tf.merge_all_summaries()\nwriter=tf.train.SummaryWriter(\"tmp/mnist_logs\",sess.graph_def)\n\n\n\n\n\n\ninit=tf.initialize_all_variables()\nsess.run(init)\n\n\nfor i in range(1000):\n    if i % 10 == 0:\n        feed={x:test_images, y_: test_labels}\n        result=sess.run([merged, accuracy],feed_dict=feed)\n        summary_str=result[0]\n        acc=result[1]\n        writer.add_summary(summary_str, i)\n        print(\"Accuracy at step %s: %s\" % (i,acc))\n    else:\n        index=np.random.randint(60000-1,size=100)\n        batch_xs, batch_ys = train_images[index,:], train_labels[index]\n        sess.run(train_step, feed_dict={x: batch_xs, y_: batch_ys})\n\n\n\n\n\nprint(sess.run(accuracy, feed_dict={x: train_images, y_: train_labels}))\n\n\n\n\nI posted the question on stack but nobody seems to be able to solve it ! Please help !", "body": "I am running a slightly different version of mnist+relog because I recently installed TF on my computer and it does not have access to Internet (and I wanted to do the Image processing part myself).\nIt runs completely fine without TensorBoard and gives me 0.9166 accuracy on Test set which is not too bad for simple relog on unrolled images.\nHowever when I add in the for loop the part where you feed feed_dist to merged (which is the fusion of all the summaries) I got the following error message:  \n\n```\nInvalidArgumentError: You must feed a value for placeholder tensor 'x-input_4' with dtype float\n     [[Node: x-input_4 = Placeholder[dtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\n     [[Node: x-input_7/_23 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/gpu:0\", send_device=\"/job:localhost/replica:0/task:0/cpu:0\", send_device_incarnation=1, tensor_name=\"edge_152_x-input_7\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/gpu:0\"]()]]\nCaused by op u'x-input_4', defined at:\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/start_ipython_kernel.py\", line 188, in <module>\n    __ipythonkernel__.start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelapp.py\", line 374, in start\n    ioloop.IOLoop.instance().start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/ioloop.py\", line 151, in start\n    super(ZMQIOLoop, self).start()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/ioloop.py\", line 840, in start\n    handler_func(fd_obj, events)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 433, in _handle_events\n    self._handle_recv()\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 465, in _handle_recv\n    self._run_callback(callback, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 407, in _run_callback\n    callback(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 252, in dispatcher\n    return self.dispatch_shell(stream, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 213, in dispatch_shell\n    handler(stream, idents, msg)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/kernelbase.py\", line 362, in execute_request\n    user_expressions, allow_stdin)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/kernel/zmq/ipkernel.py\", line 181, in do_execute\n    shell.run_cell(code, store_history=store_history, silent=silent)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2868, in run_cell\n    interactivity=interactivity, compiler=compiler, result=result)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 2978, in run_ast_nodes\n    if self.run_code(code, result):\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/IPython/core/interactiveshell.py\", line 3032, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"<ipython-input-48-28d84e6d5ef3>\", line 1, in <module>\n    runfile('/home/jeandut/mnist_jean_tf.py', wdir='/home/jeandut')\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/sitecustomize.py\", line 682, in runfile\n    execfile(filename, namespace)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/spyderlib/widgets/externalshell/sitecustomize.py\", line 78, in execfile\n    builtins.execfile(filename, *where)\n  File \"/home/jeandut/mnist_jean_tf.py\", line 64, in <module>\n    x=tf.placeholder(tf.float32, [None, 784],name=\"x-input\")\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 673, in placeholder\n    name=name)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 463, in _placeholder\n    name=name)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 664, in apply_op\n    op_def=op_def)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1834, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/jeandut/anaconda/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1043, in __init__\n    self._traceback = _extract_stack()\n```\n\nIt is therefore :   \n- me badly implementing tensorboard part (but as I copied almost exactly what you did in the mnist tutorial I cannot find where it the bug is)  \n- a bug in my installation of tensorflow somehow...  \n- something else  \n\nMy code:\n\n```\n# -*- coding: utf-8 -*-\n\"\"\"\nCreated on Thu Jan 14 13:06:44 2016\n\n@author: jeandut\n\"\"\"\n#from tensorflow.examples.tutorials.mnist import input_data\n#mnist = input_data.read_data_sets(\"MNIST_data/\", one_hot=True)\n\nimport tensorflow as tf\nimport os\nimport random\nimport numpy as np\nfrom array import array\nimport struct\nimport matplotlib.pyplot as plt\nimport time\n\n#I imported myself the decompressed -ubyte files from mnist cause I do not have internet they are at the path I wrote replace with appropriate path to reproduce\nos.chdir('/home/jeandut/Bureau/Step1/')\n\nwith open(\"train-labels.idx1-ubyte\") as file:\n    magic, size = struct.unpack(\">II\",file.read(8))\n    train_labels_data=np.asarray(array(\"B\",file.read()))\nwith open(\"t10k-labels.idx1-ubyte\") as file:\n    magic, size = struct.unpack(\">II\",file.read(8))\n    test_labels_data=np.asarray(array(\"B\",file.read()))\nwith open(\"train-images.idx3-ubyte\") as file:\n    magic, size, rows, cols =struct.unpack(\">IIII\",file.read(16))\n    train_images_data=np.reshape(np.asarray(array(\"B\",file.read())),(size,rows,cols))\nwith open(\"t10k-images.idx3-ubyte\") as file:\n    magic, size, rows, cols =struct.unpack(\">IIII\",file.read(16))\n    test_images_data=np.reshape(np.asarray(array(\"B\",file.read())),(size,rows,cols))\n\n\n\n\n\nfor i in range(10):\n   plt.imshow(train_images_data[i,:])\n   plt.show()\n   print(train_labels_data[i])\n\n\ntrain_images=np.reshape(train_images_data,(60000,28*28)).astype(np.float32)*1/255\ntest_images=np.reshape(test_images_data,(10000,28*28)).astype(np.float32)*1/255\n\ntrain_labels=np.zeros((60000,10),dtype=np.float32)\ntest_labels=np.zeros((10000,10),dtype=np.float32)\n\nfor i in range(60000):\n    a=train_labels_data[i]\n    train_labels[i,a]=1.\n\nfor j in range(10000):\n    b=test_labels_data[j]\n    test_labels[j,b]=1.\n\n\n\nsess=tf.Session()\n\n\nx=tf.placeholder(tf.float32, [None, 784],name=\"x-input\")\nW=tf.Variable(tf.zeros([784, 10]),name=\"weights\")\nb=tf.Variable(tf.zeros([10]),name=\"bias\")\n\n\nwith tf.name_scope(\"Wx_b\") as scope:\n    y=tf.nn.softmax(tf.matmul(x,W) + b)\n\n\nw_hist=tf.histogram_summary(\"weights\",W)\nb_hist=tf.histogram_summary(\"bias\",b)\ny_hist=tf.histogram_summary(\"y\",y)\n\n\ny_ =tf.placeholder(tf.float32, [None, 10], name=\"y-input\")\n\ny_hist=tf.histogram_summary(\"y\",y)\nwith tf.name_scope(\"xent\") as scope:\n\n    cross_entropy= -tf.reduce_sum(y_*tf.log(y))\n    ce_summ=tf.scalar_summary(\"cross_entropy\", cross_entropy)\n\n\nwith tf.name_scope(\"train\") as scope:\n    train_step=tf.train.GradientDescentOptimizer(0.01).minimize(cross_entropy)\n\n\nwith tf.name_scope(\"train\") as scope:\n    correct_prediction =tf.equal(tf.argmax(y,1), tf.argmax(y_,1))\n\n\n    accuracy=tf.reduce_mean(tf.cast(correct_prediction,tf.float32))\n    accuracy_summary=tf.scalar_summary(\"accuracy\",accuracy)\n\nmerged=tf.merge_all_summaries()\nwriter=tf.train.SummaryWriter(\"tmp/mnist_logs\",sess.graph_def)\n\n\n\n\n\n\ninit=tf.initialize_all_variables()\nsess.run(init)\n\n\nfor i in range(1000):\n    if i % 10 == 0:\n        feed={x:test_images, y_: test_labels}\n        result=sess.run([merged, accuracy],feed_dict=feed)\n        summary_str=result[0]\n        acc=result[1]\n        writer.add_summary(summary_str, i)\n        print(\"Accuracy at step %s: %s\" % (i,acc))\n    else:\n        index=np.random.randint(60000-1,size=100)\n        batch_xs, batch_ys = train_images[index,:], train_labels[index]\n        sess.run(train_step, feed_dict={x: batch_xs, y_: batch_ys})\n\n\n\n\n\nprint(sess.run(accuracy, feed_dict={x: train_images, y_: train_labels}))\n\n\n\n```\n\nI posted the question on stack but nobody seems to be able to solve it ! Please help !\n"}
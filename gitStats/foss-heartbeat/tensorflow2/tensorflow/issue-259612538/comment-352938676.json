{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/352938676", "html_url": "https://github.com/tensorflow/tensorflow/issues/13220#issuecomment-352938676", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13220", "id": 352938676, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjkzODY3Ng==", "user": {"login": "m3bm3b", "id": 10168793, "node_id": "MDQ6VXNlcjEwMTY4Nzkz", "avatar_url": "https://avatars0.githubusercontent.com/u/10168793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m3bm3b", "html_url": "https://github.com/m3bm3b", "followers_url": "https://api.github.com/users/m3bm3b/followers", "following_url": "https://api.github.com/users/m3bm3b/following{/other_user}", "gists_url": "https://api.github.com/users/m3bm3b/gists{/gist_id}", "starred_url": "https://api.github.com/users/m3bm3b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m3bm3b/subscriptions", "organizations_url": "https://api.github.com/users/m3bm3b/orgs", "repos_url": "https://api.github.com/users/m3bm3b/repos", "events_url": "https://api.github.com/users/m3bm3b/events{/privacy}", "received_events_url": "https://api.github.com/users/m3bm3b/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-20T01:33:05Z", "updated_at": "2017-12-20T01:33:05Z", "author_association": "NONE", "body_html": "<blockquote>\n<p>\u201cERROR: /Users/leon/GitHub/tensorflow/tensorflow/contrib/BUILD:137:12: Label '//tensorflow/contrib:makefile/downloads/nsync/bazel/pkg_path_name.bzl' crosses boundary of subpackage 'tensorflow/contrib/makefile/downloads/nsync/bazel' (perhaps you meant to put the colon here: '//tensorflow/contrib/makefile/downloads/nsync/bazel:pkg_path_name.bzl'?).</p>\n</blockquote>\n<p>I would have expected that the issue that caused that particular error message<br>\nwould have been fixed at TensorFlow's head (and nsync's head) in early November.</p>\n<blockquote>\n<p>we do not know the root cause.</p>\n</blockquote>\n<p>If I'm understanding it correctly, I believe that the sequence of events is as follows:</p>\n<ol>\n<li>\n<p>An invocation of the makefile build downloaded<br>\nvarious packages into a directory within the tensorflow source tree.<br>\nThose packages may contain bazel BUILD files because some of those<br>\npackages may be buildable independently with bazel.</p>\n</li>\n<li>\n<p>An invocation of bazel (within the same tree that had previously<br>\nused the makefile build) hit a recursive glob(),<br>\nsuch as the one in the tensorflow/contrib BUILD file.  This forced<br>\nbazel to notice any newly downloaded BUILD files, and parse them<br>\nin their new, unexpected context.</p>\n</li>\n</ol>\n<p>This was first fixed in January:   the download script was modified to delete the<br>\ndownloaded \"BUILD\" files.<br>\nAlas, bazel also recognizes the name \"BUILD.bazel\"<br>\nas a BUILD file (though it's hard to find that fact in bazel's documentation),<br>\nand the \"BUILD.bazel\" files were not deleted.   This caused a conflict<br>\nwhen nsync was introduced.   That conflict was fixed in early November.</p>", "body_text": "\u201cERROR: /Users/leon/GitHub/tensorflow/tensorflow/contrib/BUILD:137:12: Label '//tensorflow/contrib:makefile/downloads/nsync/bazel/pkg_path_name.bzl' crosses boundary of subpackage 'tensorflow/contrib/makefile/downloads/nsync/bazel' (perhaps you meant to put the colon here: '//tensorflow/contrib/makefile/downloads/nsync/bazel:pkg_path_name.bzl'?).\n\nI would have expected that the issue that caused that particular error message\nwould have been fixed at TensorFlow's head (and nsync's head) in early November.\n\nwe do not know the root cause.\n\nIf I'm understanding it correctly, I believe that the sequence of events is as follows:\n\n\nAn invocation of the makefile build downloaded\nvarious packages into a directory within the tensorflow source tree.\nThose packages may contain bazel BUILD files because some of those\npackages may be buildable independently with bazel.\n\n\nAn invocation of bazel (within the same tree that had previously\nused the makefile build) hit a recursive glob(),\nsuch as the one in the tensorflow/contrib BUILD file.  This forced\nbazel to notice any newly downloaded BUILD files, and parse them\nin their new, unexpected context.\n\n\nThis was first fixed in January:   the download script was modified to delete the\ndownloaded \"BUILD\" files.\nAlas, bazel also recognizes the name \"BUILD.bazel\"\nas a BUILD file (though it's hard to find that fact in bazel's documentation),\nand the \"BUILD.bazel\" files were not deleted.   This caused a conflict\nwhen nsync was introduced.   That conflict was fixed in early November.", "body": "> \u201cERROR: /Users/leon/GitHub/tensorflow/tensorflow/contrib/BUILD:137:12: Label '//tensorflow/contrib:makefile/downloads/nsync/bazel/pkg_path_name.bzl' crosses boundary of subpackage 'tensorflow/contrib/makefile/downloads/nsync/bazel' (perhaps you meant to put the colon here: '//tensorflow/contrib/makefile/downloads/nsync/bazel:pkg_path_name.bzl'?).\r\n\r\nI would have expected that the issue that caused that particular error message \r\nwould have been fixed at TensorFlow's head (and nsync's head) in early November.\r\n\r\n\r\n>  we do not know the root cause.\r\n\r\nIf I'm understanding it correctly, I believe that the sequence of events is as follows:\r\n\r\n1) An invocation of the makefile build downloaded\r\n     various packages into a directory within the tensorflow source tree.\r\n     Those packages may contain bazel BUILD files because some of those\r\n     packages may be buildable independently with bazel.  \r\n\r\n2) An invocation of bazel (within the same tree that had previously\r\n    used the makefile build) hit a recursive glob(),\r\n    such as the one in the tensorflow/contrib BUILD file.  This forced\r\n    bazel to notice any newly downloaded BUILD files, and parse them\r\n    in their new, unexpected context.\r\n\r\nThis was first fixed in January:   the download script was modified to delete the \r\ndownloaded \"BUILD\" files.  \r\nAlas, bazel also recognizes the name \"BUILD.bazel\" \r\nas a BUILD file (though it's hard to find that fact in bazel's documentation), \r\nand the \"BUILD.bazel\" files were not deleted.   This caused a conflict\r\nwhen nsync was introduced.   That conflict was fixed in early November.\r\n\r\n"}
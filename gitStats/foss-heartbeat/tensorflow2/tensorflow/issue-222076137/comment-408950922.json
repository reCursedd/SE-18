{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/408950922", "html_url": "https://github.com/tensorflow/tensorflow/issues/9260#issuecomment-408950922", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9260", "id": 408950922, "node_id": "MDEyOklzc3VlQ29tbWVudDQwODk1MDkyMg==", "user": {"login": "mjwillson", "id": 4502, "node_id": "MDQ6VXNlcjQ1MDI=", "avatar_url": "https://avatars0.githubusercontent.com/u/4502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjwillson", "html_url": "https://github.com/mjwillson", "followers_url": "https://api.github.com/users/mjwillson/followers", "following_url": "https://api.github.com/users/mjwillson/following{/other_user}", "gists_url": "https://api.github.com/users/mjwillson/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjwillson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjwillson/subscriptions", "organizations_url": "https://api.github.com/users/mjwillson/orgs", "repos_url": "https://api.github.com/users/mjwillson/repos", "events_url": "https://api.github.com/users/mjwillson/events{/privacy}", "received_events_url": "https://api.github.com/users/mjwillson/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-30T17:47:41Z", "updated_at": "2018-07-30T17:47:41Z", "author_association": "NONE", "body_html": "<p>One relatively GPU-friendly way to do this is with a variant on the Gumbel-max trick (see <a href=\"https://timvieira.github.io/blog/post/2014/07/31/gumbel-max-trick/\" rel=\"nofollow\">https://timvieira.github.io/blog/post/2014/07/31/gumbel-max-trick/</a>)</p>\n<p>In the standard version (for sampling with replacement), you add i.i.d. Gumbel(0, 1) noise to the logits, then take the argmax index. If instead you want to sample K indices <em>without</em> replacement, you can just take the indices of the top K values (e.g. with tf.nn.top_k) instead of the single argmax index.</p>", "body_text": "One relatively GPU-friendly way to do this is with a variant on the Gumbel-max trick (see https://timvieira.github.io/blog/post/2014/07/31/gumbel-max-trick/)\nIn the standard version (for sampling with replacement), you add i.i.d. Gumbel(0, 1) noise to the logits, then take the argmax index. If instead you want to sample K indices without replacement, you can just take the indices of the top K values (e.g. with tf.nn.top_k) instead of the single argmax index.", "body": "One relatively GPU-friendly way to do this is with a variant on the Gumbel-max trick (see https://timvieira.github.io/blog/post/2014/07/31/gumbel-max-trick/)\r\n\r\nIn the standard version (for sampling with replacement), you add i.i.d. Gumbel(0, 1) noise to the logits, then take the argmax index. If instead you want to sample K indices *without* replacement, you can just take the indices of the top K values (e.g. with tf.nn.top_k) instead of the single argmax index."}
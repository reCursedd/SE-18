{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5328", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5328/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5328/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5328/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5328", "id": 186557772, "node_id": "MDU6SXNzdWUxODY1NTc3NzI=", "number": 5328, "title": "Is there any way to use `gather_nd` more simpler?", "user": {"login": "lan2720", "id": 5330101, "node_id": "MDQ6VXNlcjUzMzAxMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5330101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lan2720", "html_url": "https://github.com/lan2720", "followers_url": "https://api.github.com/users/lan2720/followers", "following_url": "https://api.github.com/users/lan2720/following{/other_user}", "gists_url": "https://api.github.com/users/lan2720/gists{/gist_id}", "starred_url": "https://api.github.com/users/lan2720/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lan2720/subscriptions", "organizations_url": "https://api.github.com/users/lan2720/orgs", "repos_url": "https://api.github.com/users/lan2720/repos", "events_url": "https://api.github.com/users/lan2720/events{/privacy}", "received_events_url": "https://api.github.com/users/lan2720/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-01T15:06:33Z", "updated_at": "2016-11-01T18:51:53Z", "closed_at": "2016-11-01T18:51:48Z", "author_association": "NONE", "body_html": "<p>Hi all,</p>\n<p>Now I'm using <a href=\"https://www.tensorflow.org/versions/r0.11/api_docs/python/array_ops.html#gather_nd\" rel=\"nofollow\">tf.gather_nd</a>.</p>\n<p>When batched indexing into a matrix:</p>\n<pre><code>indices = [[[0, 0]], [[0, 1]]]\nparams = [['a', 'b'], ['c', 'd']]\noutput = [['a'], ['b']]\n</code></pre>\n<p>I wonder if there any simpler solution if my <code>indices.shape[0] = params.shape[0]</code>. That means I want to take values from <strong>EVERY</strong> row of params.</p>\n<p>So if I want to get<br>\n<code>output = [['a'], ['c']]</code> ('a' is from params[0], 'c' is from params[1])<br>\nI can code like <code>indices = [[0], [0]]</code> instead of <code>indices = [[[0, 0]], [[1, 0]]]</code> since people hardly have the row info in <code>indices</code></p>\n<p>For example,</p>\n<pre><code>import tensorflow as tf\n\nindices = [[[0, 4], [0, 1], [0, 6], [0, 2]],\n          [[1, 1], [1, 4], [1, 0], [1, 9]],\n          [[2, 5], [2, 1], [2, 9], [2, 6]]]\n\nparams = [[4,6,3,6,7,8,4,5,3,8], [9,5,6,2,6,5,1,9,6,4], [4,6,6,1,3,2,6,7,1,8]]\noutput = tf.gather_nd(params, indices)\n\nsess = tf.Session()\nprint sess.run(output)\n</code></pre>\n<p>There output is</p>\n<pre><code>[[7 6 4 3]\n [5 6 9 4]\n [2 6 8 6]]\n</code></pre>\n<p>I want to take out 7, 6, 4, 3 from params[0]. However, I have to set row index 0 in <code>indices</code> because params[0][4] = 7, params[0][1] = 6, params[0][6] = 4, params[0][2] = 3.<br>\nBut what I already know is just</p>\n<pre><code>raw_indices = [[4, 1, 6, 2],\n               [1, 4, 0, 9],\n               [5, 1, 9, 6]]\n</code></pre>\n<p>How can I add the \"row index\" in each elem of <code>raw_indices</code> to get</p>\n<pre><code>indices = [[[0, 4], [0, 1], [0, 6], [0, 2]],\n          [[1, 1], [1, 4], [1, 0], [1, 9]],\n          [[2, 5], [2, 1], [2, 9], [2, 6]]]\n</code></pre>\n<p>\ufffc</p>\n<p>\ufffc<br>\n\ufffc\ufffc\ufffc</p>", "body_text": "Hi all,\nNow I'm using tf.gather_nd.\nWhen batched indexing into a matrix:\nindices = [[[0, 0]], [[0, 1]]]\nparams = [['a', 'b'], ['c', 'd']]\noutput = [['a'], ['b']]\n\nI wonder if there any simpler solution if my indices.shape[0] = params.shape[0]. That means I want to take values from EVERY row of params.\nSo if I want to get\noutput = [['a'], ['c']] ('a' is from params[0], 'c' is from params[1])\nI can code like indices = [[0], [0]] instead of indices = [[[0, 0]], [[1, 0]]] since people hardly have the row info in indices\nFor example,\nimport tensorflow as tf\n\nindices = [[[0, 4], [0, 1], [0, 6], [0, 2]],\n          [[1, 1], [1, 4], [1, 0], [1, 9]],\n          [[2, 5], [2, 1], [2, 9], [2, 6]]]\n\nparams = [[4,6,3,6,7,8,4,5,3,8], [9,5,6,2,6,5,1,9,6,4], [4,6,6,1,3,2,6,7,1,8]]\noutput = tf.gather_nd(params, indices)\n\nsess = tf.Session()\nprint sess.run(output)\n\nThere output is\n[[7 6 4 3]\n [5 6 9 4]\n [2 6 8 6]]\n\nI want to take out 7, 6, 4, 3 from params[0]. However, I have to set row index 0 in indices because params[0][4] = 7, params[0][1] = 6, params[0][6] = 4, params[0][2] = 3.\nBut what I already know is just\nraw_indices = [[4, 1, 6, 2],\n               [1, 4, 0, 9],\n               [5, 1, 9, 6]]\n\nHow can I add the \"row index\" in each elem of raw_indices to get\nindices = [[[0, 4], [0, 1], [0, 6], [0, 2]],\n          [[1, 1], [1, 4], [1, 0], [1, 9]],\n          [[2, 5], [2, 1], [2, 9], [2, 6]]]\n\n\ufffc\n\ufffc\n\ufffc\ufffc\ufffc", "body": "Hi all, \r\n\r\nNow I'm using [tf.gather_nd](https://www.tensorflow.org/versions/r0.11/api_docs/python/array_ops.html#gather_nd). \r\n\r\nWhen batched indexing into a matrix:\r\n```\r\nindices = [[[0, 0]], [[0, 1]]]\r\nparams = [['a', 'b'], ['c', 'd']]\r\noutput = [['a'], ['b']]\r\n```\r\n\r\nI wonder if there any simpler solution if my `indices.shape[0] = params.shape[0]`. That means I want to take values from **EVERY** row of params. \r\n\r\nSo if I want to get \r\n`output = [['a'], ['c']]` ('a' is from params[0], 'c' is from params[1])\r\n I can code like `indices = [[0], [0]]` instead of `indices = [[[0, 0]], [[1, 0]]]` since people hardly have the row info in `indices`\r\n\r\nFor example,\r\n```\r\nimport tensorflow as tf\r\n\r\nindices = [[[0, 4], [0, 1], [0, 6], [0, 2]],\r\n          [[1, 1], [1, 4], [1, 0], [1, 9]],\r\n          [[2, 5], [2, 1], [2, 9], [2, 6]]]\r\n\r\nparams = [[4,6,3,6,7,8,4,5,3,8], [9,5,6,2,6,5,1,9,6,4], [4,6,6,1,3,2,6,7,1,8]]\r\noutput = tf.gather_nd(params, indices)\r\n\r\nsess = tf.Session()\r\nprint sess.run(output)\r\n```\r\nThere output is \r\n```\r\n[[7 6 4 3]\r\n [5 6 9 4]\r\n [2 6 8 6]]\r\n```\r\n\r\nI want to take out 7, 6, 4, 3 from params[0]. However, I have to set row index 0 in `indices` because params[0][4] = 7, params[0][1] = 6, params[0][6] = 4, params[0][2] = 3.\r\nBut what I already know is just \r\n```\r\nraw_indices = [[4, 1, 6, 2],\r\n               [1, 4, 0, 9],\r\n               [5, 1, 9, 6]]\r\n```\r\nHow can I add the \"row index\" in each elem of `raw_indices` to get\r\n```\r\nindices = [[[0, 4], [0, 1], [0, 6], [0, 2]],\r\n          [[1, 1], [1, 4], [1, 0], [1, 9]],\r\n          [[2, 5], [2, 1], [2, 9], [2, 6]]]\r\n```\r\n\r\n\r\n\ufffc\r\n\r\n\r\n\ufffc\r\n\ufffc\ufffc\ufffc"}
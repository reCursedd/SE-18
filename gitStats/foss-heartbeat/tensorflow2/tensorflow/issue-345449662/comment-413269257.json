{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/413269257", "html_url": "https://github.com/tensorflow/tensorflow/pull/21208#issuecomment-413269257", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21208", "id": 413269257, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzI2OTI1Nw==", "user": {"login": "kingofthebongo2008", "id": 1145201, "node_id": "MDQ6VXNlcjExNDUyMDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1145201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingofthebongo2008", "html_url": "https://github.com/kingofthebongo2008", "followers_url": "https://api.github.com/users/kingofthebongo2008/followers", "following_url": "https://api.github.com/users/kingofthebongo2008/following{/other_user}", "gists_url": "https://api.github.com/users/kingofthebongo2008/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingofthebongo2008/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingofthebongo2008/subscriptions", "organizations_url": "https://api.github.com/users/kingofthebongo2008/orgs", "repos_url": "https://api.github.com/users/kingofthebongo2008/repos", "events_url": "https://api.github.com/users/kingofthebongo2008/events{/privacy}", "received_events_url": "https://api.github.com/users/kingofthebongo2008/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-15T17:18:47Z", "updated_at": "2018-08-15T17:18:47Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">well, who is calling make.sh, make.bat is modelled the same way?\nmake.bat is supposed to be called manually and version info.cc generated\nonly once, now is called on every build.\ni have no idea how is building on linux, but on windows this is the case.\nif the linux build is experiencing the same issue probably should be fixed\nthere also</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Wed, 15 Aug 2018 at 20:12, Gunhan Gulsoy ***@***.***&gt; wrote:\n ***@***.**** commented on this pull request.\n ------------------------------\n\n In tensorflow/contrib/cmake/tf_core_framework.cmake\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"345449662\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/21208\" href=\"https://github.com/tensorflow/tensorflow/pull/21208#discussion_r210338333\">#21208 (comment)</a>&gt;\n :\n\n &gt; -    ARGS --raw_generate ${VERSION_INFO_CC} --source_dir ${tensorflow_source_dir} --git_tag_override=${GIT_TAG_OVERRIDE}\n -    DEPENDS __force_rebuild)\n +# This code forces rebuild every time, not needed as version from git is fetched only once\n +# move to make.bat which mimicks make.sh\n +\n +if (NOT WIN32)\n +\n +  set(VERSION_INFO_CC ${tensorflow_source_dir}/tensorflow/core/util/version_info.cc)\n +  add_custom_target(force_rebuild_target ALL DEPENDS ${VERSION_INFO_CC})\n +  add_custom_command(OUTPUT __force_rebuild COMMAND ${CMAKE_COMMAND} -E echo)\n +  add_custom_command(OUTPUT\n +      ${VERSION_INFO_CC}\n +      COMMAND ${PYTHON_EXECUTABLE} ${tensorflow_source_dir}/tensorflow/tools/git/gen_git_source.py\n +      ARGS --raw_generate ${VERSION_INFO_CC} --source_dir ${tensorflow_source_dir} --git_tag_override=${GIT_TAG_OVERRIDE}\n +      DEPENDS __force_rebuild)\n +endif()\n\n Looks like you are not calling make.bat?\n\n \u2014\n You are receiving this because you authored the thread.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"345449662\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/21208\" href=\"https://github.com/tensorflow/tensorflow/pull/21208#pullrequestreview-146532103\">#21208 (review)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABF5cauNGEZvsCZF94zrMT9vIyekGhqjks5uRFaagaJpZM4VlDCf\">https://github.com/notifications/unsubscribe-auth/ABF5cauNGEZvsCZF94zrMT9vIyekGhqjks5uRFaagaJpZM4VlDCf</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "well, who is calling make.sh, make.bat is modelled the same way?\nmake.bat is supposed to be called manually and version info.cc generated\nonly once, now is called on every build.\ni have no idea how is building on linux, but on windows this is the case.\nif the linux build is experiencing the same issue probably should be fixed\nthere also\n\u2026\nOn Wed, 15 Aug 2018 at 20:12, Gunhan Gulsoy ***@***.***> wrote:\n ***@***.**** commented on this pull request.\n ------------------------------\n\n In tensorflow/contrib/cmake/tf_core_framework.cmake\n <#21208 (comment)>\n :\n\n > -    ARGS --raw_generate ${VERSION_INFO_CC} --source_dir ${tensorflow_source_dir} --git_tag_override=${GIT_TAG_OVERRIDE}\n -    DEPENDS __force_rebuild)\n +# This code forces rebuild every time, not needed as version from git is fetched only once\n +# move to make.bat which mimicks make.sh\n +\n +if (NOT WIN32)\n +\n +  set(VERSION_INFO_CC ${tensorflow_source_dir}/tensorflow/core/util/version_info.cc)\n +  add_custom_target(force_rebuild_target ALL DEPENDS ${VERSION_INFO_CC})\n +  add_custom_command(OUTPUT __force_rebuild COMMAND ${CMAKE_COMMAND} -E echo)\n +  add_custom_command(OUTPUT\n +      ${VERSION_INFO_CC}\n +      COMMAND ${PYTHON_EXECUTABLE} ${tensorflow_source_dir}/tensorflow/tools/git/gen_git_source.py\n +      ARGS --raw_generate ${VERSION_INFO_CC} --source_dir ${tensorflow_source_dir} --git_tag_override=${GIT_TAG_OVERRIDE}\n +      DEPENDS __force_rebuild)\n +endif()\n\n Looks like you are not calling make.bat?\n\n \u2014\n You are receiving this because you authored the thread.\n Reply to this email directly, view it on GitHub\n <#21208 (review)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABF5cauNGEZvsCZF94zrMT9vIyekGhqjks5uRFaagaJpZM4VlDCf>\n .", "body": "well, who is calling make.sh, make.bat is modelled the same way?\nmake.bat is supposed to be called manually and version info.cc generated\nonly once, now is called on every build.\ni have no idea how is building on linux, but on windows this is the case.\nif the linux build is experiencing the same issue probably should be fixed\nthere also\n\nOn Wed, 15 Aug 2018 at 20:12, Gunhan Gulsoy <notifications@github.com>\nwrote:\n\n> *@gunan* commented on this pull request.\n> ------------------------------\n>\n> In tensorflow/contrib/cmake/tf_core_framework.cmake\n> <https://github.com/tensorflow/tensorflow/pull/21208#discussion_r210338333>\n> :\n>\n> > -    ARGS --raw_generate ${VERSION_INFO_CC} --source_dir ${tensorflow_source_dir} --git_tag_override=${GIT_TAG_OVERRIDE}\n> -    DEPENDS __force_rebuild)\n> +# This code forces rebuild every time, not needed as version from git is fetched only once\n> +# move to make.bat which mimicks make.sh\n> +\n> +if (NOT WIN32)\n> +\n> +  set(VERSION_INFO_CC ${tensorflow_source_dir}/tensorflow/core/util/version_info.cc)\n> +  add_custom_target(force_rebuild_target ALL DEPENDS ${VERSION_INFO_CC})\n> +  add_custom_command(OUTPUT __force_rebuild COMMAND ${CMAKE_COMMAND} -E echo)\n> +  add_custom_command(OUTPUT\n> +      ${VERSION_INFO_CC}\n> +      COMMAND ${PYTHON_EXECUTABLE} ${tensorflow_source_dir}/tensorflow/tools/git/gen_git_source.py\n> +      ARGS --raw_generate ${VERSION_INFO_CC} --source_dir ${tensorflow_source_dir} --git_tag_override=${GIT_TAG_OVERRIDE}\n> +      DEPENDS __force_rebuild)\n> +endif()\n>\n> Looks like you are not calling make.bat?\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/pull/21208#pullrequestreview-146532103>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABF5cauNGEZvsCZF94zrMT9vIyekGhqjks5uRFaagaJpZM4VlDCf>\n> .\n>\n"}
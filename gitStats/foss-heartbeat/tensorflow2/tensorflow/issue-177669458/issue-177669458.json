{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4441", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4441/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4441/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4441/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4441", "id": 177669458, "node_id": "MDU6SXNzdWUxNzc2Njk0NTg=", "number": 4441, "title": "tensorflow read multi-type csv error", "user": {"login": "ericyue", "id": 918889, "node_id": "MDQ6VXNlcjkxODg4OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/918889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericyue", "html_url": "https://github.com/ericyue", "followers_url": "https://api.github.com/users/ericyue/followers", "following_url": "https://api.github.com/users/ericyue/following{/other_user}", "gists_url": "https://api.github.com/users/ericyue/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericyue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericyue/subscriptions", "organizations_url": "https://api.github.com/users/ericyue/orgs", "repos_url": "https://api.github.com/users/ericyue/repos", "events_url": "https://api.github.com/users/ericyue/events{/privacy}", "received_events_url": "https://api.github.com/users/ericyue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-09-18T19:01:08Z", "updated_at": "2018-04-16T13:00:47Z", "closed_at": "2016-10-03T18:05:39Z", "author_association": "NONE", "body_html": "<p>my csv file has 10 column, CONTINUOUS_COLUMNS are  float , and left are string.<br>\nmy code :<br>\n<code>parse_fn = lambda example:tf.decode_csv(example, [tf.constant([], dtype=tf.float32) if i in CONTINUOUS_COLUMNS else tf.constant([], dtype=tf.string)  for i in COLUMNS ]  ,field_delim='\\t' )</code><br>\n<code>inputs = tf.contrib.learn.read_batch_examples([FLAGS.train], 256, tf.TextLineReader,num_epochs=1,queue_capacity=10000, parse_fn=parse_fn)</code></p>\n<p>error<br>\n<code>Traceback (most recent call last): File \"wide-batch.py\", line 241, in &lt;module&gt; tf.app.run() File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run sys.exit(main(sys.argv)) File \"wide-batch.py\", line 238, in main train_and_eval() File \"wide-batch.py\", line 232, in train_and_eval m.fit(input_fn=lambda: input_fn(stat), steps=FLAGS.train_steps,monitors=[validation_monitor]) File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 240, in fit max_steps=max_steps) File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 548, in _train_model features, targets = input_fn() File \"wide-batch.py\", line 232, in &lt;lambda&gt; m.fit(input_fn=lambda: input_fn(stat), steps=FLAGS.train_steps,monitors=[validation_monitor]) File \"wide-batch.py\", line 180, in input_fn inputs = tf.contrib.learn.read_batch_examples([FLAGS.train], 256, tf.TextLineReader,num_epochs=1,queue_capacity=10000, parse_fn=parse_fn) File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 82, in read_batch_examples read_batch_size=read_batch_size, parse_fn=parse_fn, name=name) File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 210, in read_keyed_batch_examples allow_smaller_final_batch=allow_smaller_final_batch) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 899, in shuffle_batch_join tensor_list_list = _validate_join(tensor_list_list) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 421, in _validate_join for tl in tensor_list_list] File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 737, in convert_n_to_tensor_or_indexed_slices as_ref=as_ref)) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 698, in convert_to_tensor_or_indexed_slices return convert_to_tensor(value, dtype=dtype, name=name, as_ref=as_ref) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 621, in convert_to_tensor ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 630, in _autopacking_conversion_function return _autopacking_helper(v, inferred_dtype, name or \"packed\") File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 572, in _autopacking_helper \"%s to %s (Tensor is: %r)\" % (elem.dtype, dtype, elem)) TypeError: Cannot convert a list containing a tensor of dtype &lt;dtype: 'string'&gt; to &lt;dtype: 'float32'&gt; (Tensor is: &lt;tf.Tensor 'read_batch_examples/read/DecodeCSV:1' shape=() dtype=string&gt;)</code></p>", "body_text": "my csv file has 10 column, CONTINUOUS_COLUMNS are  float , and left are string.\nmy code :\nparse_fn = lambda example:tf.decode_csv(example, [tf.constant([], dtype=tf.float32) if i in CONTINUOUS_COLUMNS else tf.constant([], dtype=tf.string)  for i in COLUMNS ]  ,field_delim='\\t' )\ninputs = tf.contrib.learn.read_batch_examples([FLAGS.train], 256, tf.TextLineReader,num_epochs=1,queue_capacity=10000, parse_fn=parse_fn)\nerror\nTraceback (most recent call last): File \"wide-batch.py\", line 241, in <module> tf.app.run() File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run sys.exit(main(sys.argv)) File \"wide-batch.py\", line 238, in main train_and_eval() File \"wide-batch.py\", line 232, in train_and_eval m.fit(input_fn=lambda: input_fn(stat), steps=FLAGS.train_steps,monitors=[validation_monitor]) File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 240, in fit max_steps=max_steps) File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 548, in _train_model features, targets = input_fn() File \"wide-batch.py\", line 232, in <lambda> m.fit(input_fn=lambda: input_fn(stat), steps=FLAGS.train_steps,monitors=[validation_monitor]) File \"wide-batch.py\", line 180, in input_fn inputs = tf.contrib.learn.read_batch_examples([FLAGS.train], 256, tf.TextLineReader,num_epochs=1,queue_capacity=10000, parse_fn=parse_fn) File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 82, in read_batch_examples read_batch_size=read_batch_size, parse_fn=parse_fn, name=name) File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 210, in read_keyed_batch_examples allow_smaller_final_batch=allow_smaller_final_batch) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 899, in shuffle_batch_join tensor_list_list = _validate_join(tensor_list_list) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 421, in _validate_join for tl in tensor_list_list] File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 737, in convert_n_to_tensor_or_indexed_slices as_ref=as_ref)) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 698, in convert_to_tensor_or_indexed_slices return convert_to_tensor(value, dtype=dtype, name=name, as_ref=as_ref) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 621, in convert_to_tensor ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref) File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 630, in _autopacking_conversion_function return _autopacking_helper(v, inferred_dtype, name or \"packed\") File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 572, in _autopacking_helper \"%s to %s (Tensor is: %r)\" % (elem.dtype, dtype, elem)) TypeError: Cannot convert a list containing a tensor of dtype <dtype: 'string'> to <dtype: 'float32'> (Tensor is: <tf.Tensor 'read_batch_examples/read/DecodeCSV:1' shape=() dtype=string>)", "body": "my csv file has 10 column, CONTINUOUS_COLUMNS are  float , and left are string.\nmy code : \n`parse_fn = lambda example:tf.decode_csv(example, [tf.constant([], dtype=tf.float32) if i in CONTINUOUS_COLUMNS else tf.constant([], dtype=tf.string)  for i in COLUMNS ]  ,field_delim='\\t' )`\n`inputs = tf.contrib.learn.read_batch_examples([FLAGS.train], 256, tf.TextLineReader,num_epochs=1,queue_capacity=10000, parse_fn=parse_fn)`\n\nerror \n`Traceback (most recent call last):\n  File \"wide-batch.py\", line 241, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"wide-batch.py\", line 238, in main\n    train_and_eval()\n  File \"wide-batch.py\", line 232, in train_and_eval\n    m.fit(input_fn=lambda: input_fn(stat), steps=FLAGS.train_steps,monitors=[validation_monitor])\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 240, in fit\n    max_steps=max_steps)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 548, in _train_model\n    features, targets = input_fn()\n  File \"wide-batch.py\", line 232, in <lambda>\n    m.fit(input_fn=lambda: input_fn(stat), steps=FLAGS.train_steps,monitors=[validation_monitor])\n  File \"wide-batch.py\", line 180, in input_fn\n    inputs = tf.contrib.learn.read_batch_examples([FLAGS.train], 256, tf.TextLineReader,num_epochs=1,queue_capacity=10000, parse_fn=parse_fn)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 82, in read_batch_examples\n    read_batch_size=read_batch_size, parse_fn=parse_fn, name=name)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 210, in read_keyed_batch_examples\n    allow_smaller_final_batch=allow_smaller_final_batch)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 899, in shuffle_batch_join\n    tensor_list_list = _validate_join(tensor_list_list)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 421, in _validate_join\n    for tl in tensor_list_list]\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 737, in convert_n_to_tensor_or_indexed_slices\n    as_ref=as_ref))\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 698, in convert_to_tensor_or_indexed_slices\n    return convert_to_tensor(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 621, in convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 630, in _autopacking_conversion_function\n    return _autopacking_helper(v, inferred_dtype, name or \"packed\")\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 572, in _autopacking_helper\n    \"%s to %s (Tensor is: %r)\" % (elem.dtype, dtype, elem))\nTypeError: Cannot convert a list containing a tensor of dtype <dtype: 'string'> to <dtype: 'float32'> (Tensor is: <tf.Tensor 'read_batch_examples/read/DecodeCSV:1' shape=() dtype=string>)`\n"}
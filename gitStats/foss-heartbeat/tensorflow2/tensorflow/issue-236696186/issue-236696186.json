{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10804", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10804/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10804/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10804/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10804", "id": 236696186, "node_id": "MDU6SXNzdWUyMzY2OTYxODY=", "number": 10804, "title": "Not possible to use tf.contrib.training.stratified_sample with a SparseTensor", "user": {"login": "MtDersvan", "id": 7069222, "node_id": "MDQ6VXNlcjcwNjkyMjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7069222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MtDersvan", "html_url": "https://github.com/MtDersvan", "followers_url": "https://api.github.com/users/MtDersvan/followers", "following_url": "https://api.github.com/users/MtDersvan/following{/other_user}", "gists_url": "https://api.github.com/users/MtDersvan/gists{/gist_id}", "starred_url": "https://api.github.com/users/MtDersvan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MtDersvan/subscriptions", "organizations_url": "https://api.github.com/users/MtDersvan/orgs", "repos_url": "https://api.github.com/users/MtDersvan/repos", "events_url": "https://api.github.com/users/MtDersvan/events{/privacy}", "received_events_url": "https://api.github.com/users/MtDersvan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-06-18T02:37:58Z", "updated_at": "2018-07-04T03:47:19Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: macOS</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: v1.2.0-rc2-21-g12f033d 1.2.0</li>\n<li><strong>Bazel version (if compiling from source)</strong>: -</li>\n<li><strong>CUDA/cuDNN version</strong>: -</li>\n<li><strong>GPU model and memory</strong>: -</li>\n<li><strong>Exact command to reproduce</strong>: -</li>\n</ul>\n<h3>Describe the problem</h3>\n<p><strong>Context</strong>:<br>\nI set up an input pipeline that reads <code>tf.train.SequenceExample</code>. My dataset is quite unbalanced, so I used <code>tf.contrib.training.stratified_sample</code> to resample examples.</p>\n<p><strong>Problem</strong>:<br>\n<code>tf.contrib.training.stratified_sample</code> works well with <code>tf.FixedLenFeature</code> (context_features) but it raises a <code>TypeError: Failed to convert object of type &lt;class 'tensorflow.python.framework.sparse_tensor.SparseTensor'&gt; to Tensor. ...</code> when applied to <code>tf.VarLenFeature</code> of sequence_features.<br>\nUsing <code>tf.sparse_tensor_to_dense()</code> is not applicable either, as it raises <code>ValueError: All shapes must be fully defined: ...</code></p>\n<p><strong>Statement</strong>:<br>\nIf it is not an intended behaviour, then I'd like to report a bug, as I don't see why <code>tf.SparseTensor</code> shouldn't be supported.<br>\nIf <code>tf.contrib.training.stratified_sample</code> works as intended, then I'd like to request a feature of <code>tf.SparseTensor</code> support in online data resampling ops.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): v1.2.0-rc2-21-g12f033d 1.2.0\nBazel version (if compiling from source): -\nCUDA/cuDNN version: -\nGPU model and memory: -\nExact command to reproduce: -\n\nDescribe the problem\nContext:\nI set up an input pipeline that reads tf.train.SequenceExample. My dataset is quite unbalanced, so I used tf.contrib.training.stratified_sample to resample examples.\nProblem:\ntf.contrib.training.stratified_sample works well with tf.FixedLenFeature (context_features) but it raises a TypeError: Failed to convert object of type <class 'tensorflow.python.framework.sparse_tensor.SparseTensor'> to Tensor. ... when applied to tf.VarLenFeature of sequence_features.\nUsing tf.sparse_tensor_to_dense() is not applicable either, as it raises ValueError: All shapes must be fully defined: ...\nStatement:\nIf it is not an intended behaviour, then I'd like to report a bug, as I don't see why tf.SparseTensor shouldn't be supported.\nIf tf.contrib.training.stratified_sample works as intended, then I'd like to request a feature of tf.SparseTensor support in online data resampling ops.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: macOS\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: v1.2.0-rc2-21-g12f033d 1.2.0\r\n- **Bazel version (if compiling from source)**: -\r\n- **CUDA/cuDNN version**: - \r\n- **GPU model and memory**: -\r\n- **Exact command to reproduce**: -\r\n\r\n### Describe the problem\r\n**Context**:\r\nI set up an input pipeline that reads `tf.train.SequenceExample`. My dataset is quite unbalanced, so I used `tf.contrib.training.stratified_sample` to resample examples. \r\n\r\n**Problem**:\r\n`tf.contrib.training.stratified_sample` works well with `tf.FixedLenFeature` (context_features) but it raises a `TypeError: Failed to convert object of type <class 'tensorflow.python.framework.sparse_tensor.SparseTensor'> to Tensor. ...` when applied to `tf.VarLenFeature` of sequence_features. \r\nUsing `tf.sparse_tensor_to_dense()` is not applicable either, as it raises `ValueError: All shapes must be fully defined: ...`\r\n\r\n**Statement**:\r\nIf it is not an intended behaviour, then I'd like to report a bug, as I don't see why `tf.SparseTensor` shouldn't be supported.\r\nIf `tf.contrib.training.stratified_sample` works as intended, then I'd like to request a feature of `tf.SparseTensor` support in online data resampling ops.\r\n"}
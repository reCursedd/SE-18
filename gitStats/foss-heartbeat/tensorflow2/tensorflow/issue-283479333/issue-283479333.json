{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15505", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15505/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15505/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15505/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15505", "id": 283479333, "node_id": "MDU6SXNzdWUyODM0NzkzMzM=", "number": 15505, "title": "Unable to generate my_frozen_graph.pb due to missing conv.ckpt checkpoint file", "user": {"login": "donigian", "id": 830545, "node_id": "MDQ6VXNlcjgzMDU0NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/830545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/donigian", "html_url": "https://github.com/donigian", "followers_url": "https://api.github.com/users/donigian/followers", "following_url": "https://api.github.com/users/donigian/following{/other_user}", "gists_url": "https://api.github.com/users/donigian/gists{/gist_id}", "starred_url": "https://api.github.com/users/donigian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/donigian/subscriptions", "organizations_url": "https://api.github.com/users/donigian/orgs", "repos_url": "https://api.github.com/users/donigian/repos", "events_url": "https://api.github.com/users/donigian/events{/privacy}", "received_events_url": "https://api.github.com/users/donigian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2017-12-20T08:03:55Z", "updated_at": "2018-06-02T07:16:23Z", "closed_at": "2018-06-02T07:05:50Z", "author_association": "CONTRIBUTOR", "body_html": "<hr>\n<h3>System information</h3>\n<p>Linux ubuntu 16.04<br>\nCUDA 9.1<br>\ncuDNN 7<br>\nTensorFlow version ('v1.4.0-19-ga52c8d9', '1.4.1')</p>\n<p>Additional info:</p>\n<p>2017-12-20 07:36:22.294690: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU sup<br>\nports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX<br>\n2 FMA<br>\n2017-12-20 07:36:22.360228: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] succe<br>\nssful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA<br>\nnode, so returning NUMA node zero<br>\n2017-12-20 07:36:22.360615: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found de<br>\nvice 0 with properties:<br>\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235<br>\npciBusID: 0000:00:04.0<br>\ntotalMemory: 11.17GiB freeMemory: 8.42GiB<br>\n2017-12-20 07:36:22.360643: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating<br>\nTensorFlow device (/device:GPU:0) -&gt; (device: 0, name: Tesla K80, pci bus id: 0000:00:04.0,<br>\ncompute capability: 3.7)</p>\n<p><strong>Exact command to reproduce</strong>:<br>\nAccording to <a href=\"https://www.tensorflow.org/versions/master/tutorials/audio_recognition#custom_training_data\" rel=\"nofollow\">https://www.tensorflow.org/versions/master/tutorials/audio_recognition#custom_training_data</a>, specifically:</p>\n<p>To train...</p>\n<pre><code>python tensorflow/examples/speech_commands/train.py\n</code></pre>\n<p>After training is finished, run freeze.py to generate a <code>my_frozen_graph.pb</code> which will later be used by <code>label_wav</code> for prediction.</p>\n<pre><code>python tensorflow/examples/speech_commands/freeze.py \\\n--start_checkpoint=/tmp/speech_commands_train/conv.ckpt-18000 \\\n--output_file=/tmp/my_frozen_graph.pb\n</code></pre>\n<h3>Describe the problem</h3>\n<p>After training the speech commands app:<br>\nA <code>conv.ckpt-18000</code> file should appear after training is complete.</p>\n<p>However the only files which appear are ones with extensions:</p>\n<ul>\n<li>*.data-00000-of-00001</li>\n<li>*.meta</li>\n<li>*.index</li>\n<li>checkpoint</li>\n</ul>\n<p>I've tried tensorflow releases 1.4.0-rc1, 1.4.0 and 1.4.1 but no luck generating a <code>conv.ckpt-18000</code> file.</p>\n<p>I've even tried:</p>\n<pre><code>with tf.Session() as sess:\n    new_saver = tf.train.import_meta_graph('/tmp/speech_commands_train/conv.ckpt-18000.meta')\n    new_saver.restore(sess, tf.train.latest_checkpoint('./'))\n</code></pre>\n<p>which errors out due to:</p>\n<p><code>ValueError: No op named DecodeWav in defined operations.</code></p>\n<h3>Source code / logs</h3>\n<pre><code>ls -ltr /tmp/speech_commands_train/\ntotal 18348\n...\n-rw-r--r-- 1 root root  121649 Dec 20 07:07 conv.pbtxt\n-rw-r--r-- 1 root root      60 Dec 20 07:07 conv_labels.txt\n-rw-r--r-- 1 root root     315 Dec 20 09:17 conv.ckpt-17600.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:17 conv.ckpt-17600.data-00000-of-00001\n-rw-r--r-- 1 root root   75448 Dec 20 09:17 conv.ckpt-17600.meta\n-rw-r--r-- 1 root root     315 Dec 20 09:18 conv.ckpt-17700.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:18 conv.ckpt-17700.data-00000-of-00001\n-rw-r--r-- 1 root root   75448 Dec 20 09:18 conv.ckpt-17700.meta\n-rw-r--r-- 1 root root     315 Dec 20 09:18 conv.ckpt-17800.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:18 conv.ckpt-17800.data-00000-of-00001\n-rw-r--r-- 1 root root   75448 Dec 20 09:18 conv.ckpt-17800.meta\n-rw-r--r-- 1 root root     315 Dec 20 09:19 conv.ckpt-17900.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:19 conv.ckpt-17900.data-00000-of-00001\n-rw-r--r-- 1 root root   75448 Dec 20 09:19 conv.ckpt-17900.meta\n-rw-r--r-- 1 root root     315 Dec 20 09:20 conv.ckpt-18000.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:20 conv.ckpt-18000.data-00000-of-00001\n-rw-r--r-- 1 root root     433 Dec 20 09:20 checkpoint\n-rw-r--r-- 1 root root   75448 Dec 20 09:20 conv.ckpt-18000.meta\n</code></pre>", "body_text": "System information\nLinux ubuntu 16.04\nCUDA 9.1\ncuDNN 7\nTensorFlow version ('v1.4.0-19-ga52c8d9', '1.4.1')\nAdditional info:\n2017-12-20 07:36:22.294690: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU sup\nports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX\n2 FMA\n2017-12-20 07:36:22.360228: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] succe\nssful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA\nnode, so returning NUMA node zero\n2017-12-20 07:36:22.360615: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found de\nvice 0 with properties:\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\npciBusID: 0000:00:04.0\ntotalMemory: 11.17GiB freeMemory: 8.42GiB\n2017-12-20 07:36:22.360643: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating\nTensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:00:04.0,\ncompute capability: 3.7)\nExact command to reproduce:\nAccording to https://www.tensorflow.org/versions/master/tutorials/audio_recognition#custom_training_data, specifically:\nTo train...\npython tensorflow/examples/speech_commands/train.py\n\nAfter training is finished, run freeze.py to generate a my_frozen_graph.pb which will later be used by label_wav for prediction.\npython tensorflow/examples/speech_commands/freeze.py \\\n--start_checkpoint=/tmp/speech_commands_train/conv.ckpt-18000 \\\n--output_file=/tmp/my_frozen_graph.pb\n\nDescribe the problem\nAfter training the speech commands app:\nA conv.ckpt-18000 file should appear after training is complete.\nHowever the only files which appear are ones with extensions:\n\n*.data-00000-of-00001\n*.meta\n*.index\ncheckpoint\n\nI've tried tensorflow releases 1.4.0-rc1, 1.4.0 and 1.4.1 but no luck generating a conv.ckpt-18000 file.\nI've even tried:\nwith tf.Session() as sess:\n    new_saver = tf.train.import_meta_graph('/tmp/speech_commands_train/conv.ckpt-18000.meta')\n    new_saver.restore(sess, tf.train.latest_checkpoint('./'))\n\nwhich errors out due to:\nValueError: No op named DecodeWav in defined operations.\nSource code / logs\nls -ltr /tmp/speech_commands_train/\ntotal 18348\n...\n-rw-r--r-- 1 root root  121649 Dec 20 07:07 conv.pbtxt\n-rw-r--r-- 1 root root      60 Dec 20 07:07 conv_labels.txt\n-rw-r--r-- 1 root root     315 Dec 20 09:17 conv.ckpt-17600.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:17 conv.ckpt-17600.data-00000-of-00001\n-rw-r--r-- 1 root root   75448 Dec 20 09:17 conv.ckpt-17600.meta\n-rw-r--r-- 1 root root     315 Dec 20 09:18 conv.ckpt-17700.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:18 conv.ckpt-17700.data-00000-of-00001\n-rw-r--r-- 1 root root   75448 Dec 20 09:18 conv.ckpt-17700.meta\n-rw-r--r-- 1 root root     315 Dec 20 09:18 conv.ckpt-17800.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:18 conv.ckpt-17800.data-00000-of-00001\n-rw-r--r-- 1 root root   75448 Dec 20 09:18 conv.ckpt-17800.meta\n-rw-r--r-- 1 root root     315 Dec 20 09:19 conv.ckpt-17900.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:19 conv.ckpt-17900.data-00000-of-00001\n-rw-r--r-- 1 root root   75448 Dec 20 09:19 conv.ckpt-17900.meta\n-rw-r--r-- 1 root root     315 Dec 20 09:20 conv.ckpt-18000.index\n-rw-r--r-- 1 root root 3646008 Dec 20 09:20 conv.ckpt-18000.data-00000-of-00001\n-rw-r--r-- 1 root root     433 Dec 20 09:20 checkpoint\n-rw-r--r-- 1 root root   75448 Dec 20 09:20 conv.ckpt-18000.meta", "body": "------------------------\r\n\r\n### System information\r\nLinux ubuntu 16.04\r\nCUDA 9.1\r\ncuDNN 7\r\nTensorFlow version ('v1.4.0-19-ga52c8d9', '1.4.1')\r\n\r\nAdditional info:\r\n\r\n2017-12-20 07:36:22.294690: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU sup\r\nports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX\r\n2 FMA\r\n2017-12-20 07:36:22.360228: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] succe\r\nssful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA \r\nnode, so returning NUMA node zero\r\n2017-12-20 07:36:22.360615: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found de\r\nvice 0 with properties: \r\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\r\npciBusID: 0000:00:04.0\r\ntotalMemory: 11.17GiB freeMemory: 8.42GiB\r\n2017-12-20 07:36:22.360643: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating\r\n TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:00:04.0, \r\ncompute capability: 3.7)\r\n\r\n**Exact command to reproduce**:\r\nAccording to https://www.tensorflow.org/versions/master/tutorials/audio_recognition#custom_training_data, specifically:\r\n\r\nTo train...\r\n```\r\npython tensorflow/examples/speech_commands/train.py\r\n```\r\nAfter training is finished, run freeze.py to generate a `my_frozen_graph.pb` which will later be used by `label_wav` for prediction.\r\n\r\n```\r\npython tensorflow/examples/speech_commands/freeze.py \\\r\n--start_checkpoint=/tmp/speech_commands_train/conv.ckpt-18000 \\\r\n--output_file=/tmp/my_frozen_graph.pb\r\n```\r\n\r\n### Describe the problem\r\nAfter training the speech commands app:\r\nA `conv.ckpt-18000` file should appear after training is complete. \r\n\r\nHowever the only files which appear are ones with extensions:\r\n\r\n- *.data-00000-of-00001\r\n- *.meta\r\n- *.index\r\n- checkpoint\r\n\r\nI've tried tensorflow releases 1.4.0-rc1, 1.4.0 and 1.4.1 but no luck generating a `conv.ckpt-18000` file.\r\n\r\nI've even tried:\r\n```\r\nwith tf.Session() as sess:\r\n    new_saver = tf.train.import_meta_graph('/tmp/speech_commands_train/conv.ckpt-18000.meta')\r\n    new_saver.restore(sess, tf.train.latest_checkpoint('./'))\r\n```\r\n\r\nwhich errors out due to:\r\n\r\n`ValueError: No op named DecodeWav in defined operations.`\r\n\r\n### Source code / logs\r\n```\r\nls -ltr /tmp/speech_commands_train/\r\ntotal 18348\r\n...\r\n-rw-r--r-- 1 root root  121649 Dec 20 07:07 conv.pbtxt\r\n-rw-r--r-- 1 root root      60 Dec 20 07:07 conv_labels.txt\r\n-rw-r--r-- 1 root root     315 Dec 20 09:17 conv.ckpt-17600.index\r\n-rw-r--r-- 1 root root 3646008 Dec 20 09:17 conv.ckpt-17600.data-00000-of-00001\r\n-rw-r--r-- 1 root root   75448 Dec 20 09:17 conv.ckpt-17600.meta\r\n-rw-r--r-- 1 root root     315 Dec 20 09:18 conv.ckpt-17700.index\r\n-rw-r--r-- 1 root root 3646008 Dec 20 09:18 conv.ckpt-17700.data-00000-of-00001\r\n-rw-r--r-- 1 root root   75448 Dec 20 09:18 conv.ckpt-17700.meta\r\n-rw-r--r-- 1 root root     315 Dec 20 09:18 conv.ckpt-17800.index\r\n-rw-r--r-- 1 root root 3646008 Dec 20 09:18 conv.ckpt-17800.data-00000-of-00001\r\n-rw-r--r-- 1 root root   75448 Dec 20 09:18 conv.ckpt-17800.meta\r\n-rw-r--r-- 1 root root     315 Dec 20 09:19 conv.ckpt-17900.index\r\n-rw-r--r-- 1 root root 3646008 Dec 20 09:19 conv.ckpt-17900.data-00000-of-00001\r\n-rw-r--r-- 1 root root   75448 Dec 20 09:19 conv.ckpt-17900.meta\r\n-rw-r--r-- 1 root root     315 Dec 20 09:20 conv.ckpt-18000.index\r\n-rw-r--r-- 1 root root 3646008 Dec 20 09:20 conv.ckpt-18000.data-00000-of-00001\r\n-rw-r--r-- 1 root root     433 Dec 20 09:20 checkpoint\r\n-rw-r--r-- 1 root root   75448 Dec 20 09:20 conv.ckpt-18000.meta\r\n```\r\n"}
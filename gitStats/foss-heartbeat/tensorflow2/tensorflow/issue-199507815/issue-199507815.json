{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6737", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6737/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6737/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6737/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6737", "id": 199507815, "node_id": "MDU6SXNzdWUxOTk1MDc4MTU=", "number": 6737, "title": "tf.nn.sampled_softmax_loss fail for master code", "user": {"login": "chenghuige", "id": 6323467, "node_id": "MDQ6VXNlcjYzMjM0Njc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6323467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenghuige", "html_url": "https://github.com/chenghuige", "followers_url": "https://api.github.com/users/chenghuige/followers", "following_url": "https://api.github.com/users/chenghuige/following{/other_user}", "gists_url": "https://api.github.com/users/chenghuige/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenghuige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenghuige/subscriptions", "organizations_url": "https://api.github.com/users/chenghuige/orgs", "repos_url": "https://api.github.com/users/chenghuige/repos", "events_url": "https://api.github.com/users/chenghuige/events{/privacy}", "received_events_url": "https://api.github.com/users/chenghuige/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-09T09:28:06Z", "updated_at": "2017-01-26T20:53:34Z", "closed_at": "2017-01-09T12:16:43Z", "author_association": "NONE", "body_html": "<p>Build the leates tensorflow gpu version and  face this error(the code work ok for release 0.12.1) complaining float32 and int64 multiply.<br>\ntf.nn.sampled_softmax_loss(self.w_t,<br>\nself.v,<br>\ninputs,<br>\nlabels,<br>\nnum_sampled,<br>\nvocab_size,<br>\nsampled_values=sampled_values)</p>\n<p>File \"/home/gezi/mine/tensorflow-exp/util/melt/ops/seq2seq.py\", line 63, in sequence_loss_by_example<br>\ncrossents = softmax_loss_function(logits, targets)<br>\nFile \"/home/gezi/mine/tensorflow-exp/deepiu/seq2seq/rnn_decoder.py\", line 300, in sampled_loss<br>\nsampled_values=sampled_values)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/nn_impl.py\", line 1180, in sampled_softmax_loss<br>\nname=name)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/nn_impl.py\", line 963, in _compute_sampled_logits<br>\narray_ops.reshape(true_w, new_true_w_shape))<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 329, in multiply<br>\nreturn gen_math_ops._mul(x, y, name)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/gen_math_ops.py\", line 1625, in _mul<br>\nresult = _op_def_lib.apply_op(\"Mul\", x=x, y=y, name=name)<br>\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 522, in apply_op<br>\ninferred_from[input_arg.type_attr]))<br>\nTypeError: Input 'y' of 'Mul' Op has type float32 that does not match type int64 of argument 'x'.</p>", "body_text": "Build the leates tensorflow gpu version and  face this error(the code work ok for release 0.12.1) complaining float32 and int64 multiply.\ntf.nn.sampled_softmax_loss(self.w_t,\nself.v,\ninputs,\nlabels,\nnum_sampled,\nvocab_size,\nsampled_values=sampled_values)\nFile \"/home/gezi/mine/tensorflow-exp/util/melt/ops/seq2seq.py\", line 63, in sequence_loss_by_example\ncrossents = softmax_loss_function(logits, targets)\nFile \"/home/gezi/mine/tensorflow-exp/deepiu/seq2seq/rnn_decoder.py\", line 300, in sampled_loss\nsampled_values=sampled_values)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/nn_impl.py\", line 1180, in sampled_softmax_loss\nname=name)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/nn_impl.py\", line 963, in _compute_sampled_logits\narray_ops.reshape(true_w, new_true_w_shape))\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 329, in multiply\nreturn gen_math_ops._mul(x, y, name)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/gen_math_ops.py\", line 1625, in _mul\nresult = _op_def_lib.apply_op(\"Mul\", x=x, y=y, name=name)\nFile \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 522, in apply_op\ninferred_from[input_arg.type_attr]))\nTypeError: Input 'y' of 'Mul' Op has type float32 that does not match type int64 of argument 'x'.", "body": "Build the leates tensorflow gpu version and  face this error(the code work ok for release 0.12.1) complaining float32 and int64 multiply.\r\ntf.nn.sampled_softmax_loss(self.w_t, \r\n                                          self.v, \r\n                                          inputs, \r\n                                          labels, \r\n                                          num_sampled, \r\n                                          vocab_size,\r\n                                          sampled_values=sampled_values)\r\n                                \r\n  File \"/home/gezi/mine/tensorflow-exp/util/melt/ops/seq2seq.py\", line 63, in sequence_loss_by_example\r\n    crossents = softmax_loss_function(logits, targets)\r\n  File \"/home/gezi/mine/tensorflow-exp/deepiu/seq2seq/rnn_decoder.py\", line 300, in sampled_loss\r\n    sampled_values=sampled_values)\r\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/nn_impl.py\", line 1180, in sampled_softmax_loss\r\n    name=name)\r\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/nn_impl.py\", line 963, in _compute_sampled_logits\r\n    array_ops.reshape(true_w, new_true_w_shape))\r\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 329, in multiply\r\n    return gen_math_ops._mul(x, y, name)\r\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/ops/gen_math_ops.py\", line 1625, in _mul\r\n    result = _op_def_lib.apply_op(\"Mul\", x=x, y=y, name=name)\r\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 522, in apply_op\r\n    inferred_from[input_arg.type_attr]))\r\nTypeError: Input 'y' of 'Mul' Op has type float32 that does not match type int64 of argument 'x'.\r\n"}
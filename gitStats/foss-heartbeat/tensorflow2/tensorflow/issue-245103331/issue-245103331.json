{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11718", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11718/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11718/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11718/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11718", "id": 245103331, "node_id": "MDU6SXNzdWUyNDUxMDMzMzE=", "number": 11718, "title": "gather_nd InvalidArgumentError", "user": {"login": "MilesZhao", "id": 15339939, "node_id": "MDQ6VXNlcjE1MzM5OTM5", "avatar_url": "https://avatars0.githubusercontent.com/u/15339939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MilesZhao", "html_url": "https://github.com/MilesZhao", "followers_url": "https://api.github.com/users/MilesZhao/followers", "following_url": "https://api.github.com/users/MilesZhao/following{/other_user}", "gists_url": "https://api.github.com/users/MilesZhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/MilesZhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MilesZhao/subscriptions", "organizations_url": "https://api.github.com/users/MilesZhao/orgs", "repos_url": "https://api.github.com/users/MilesZhao/repos", "events_url": "https://api.github.com/users/MilesZhao/events{/privacy}", "received_events_url": "https://api.github.com/users/MilesZhao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-24T14:42:54Z", "updated_at": "2017-07-24T16:42:23Z", "closed_at": "2017-07-24T16:42:23Z", "author_association": "NONE", "body_html": "<p>2017-07-24 10:35:25.247357: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).<br>\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]<br>\n2017-07-24 10:35:25.247422: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).<br>\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]<br>\nTraceback (most recent call last):<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1039, in _do_call<br>\nreturn fn(*args)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1021, in _run_fn<br>\nstatus, run_metadata)<br>\nFile \"/usr/local/Cellar/python3/3.6.1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/contextlib.py\", line 89, in <strong>exit</strong><br>\nnext(self.gen)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status<br>\npywrap_tensorflow.TF_GetCode(status))<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).<br>\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]</p>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>Traceback (most recent call last):<br>\nFile \"mix.py\", line 66, in <br>\nautoen_nn.clf_train_epoch(x_train,y_train,batch_size,dropout_rate = 0.5)<br>\nFile \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 248, in clf_train_epoch<br>\nfeed_dict = feed_dict)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 778, in run<br>\nrun_metadata_ptr)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 982, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1032, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1052, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).<br>\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]</p>\n<p>Caused by op 'conv-maxpool-3/GatherNd', defined at:<br>\nFile \"mix.py\", line 64, in <br>\nnum_classes)<br>\nFile \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 125, in <strong>init</strong><br>\nfilter_size)<br>\nFile \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 217, in conv_layer<br>\nlocal_in_doc_mat = tf.gather_nd(in_doc_mat,temp)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 1321, in gather_nd<br>\nname=name)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 768, in apply_op<br>\nop_def=op_def)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 2336, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1228, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>InvalidArgumentError (see above for traceback): flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).<br>\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]</p>", "body_text": "2017-07-24 10:35:25.247357: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\n2017-07-24 10:35:25.247422: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\nTraceback (most recent call last):\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1039, in _do_call\nreturn fn(*args)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1021, in _run_fn\nstatus, run_metadata)\nFile \"/usr/local/Cellar/python3/3.6.1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/contextlib.py\", line 89, in exit\nnext(self.gen)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status\npywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\nFile \"mix.py\", line 66, in \nautoen_nn.clf_train_epoch(x_train,y_train,batch_size,dropout_rate = 0.5)\nFile \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 248, in clf_train_epoch\nfeed_dict = feed_dict)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 778, in run\nrun_metadata_ptr)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 982, in _run\nfeed_dict_string, options, run_metadata)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1032, in _do_run\ntarget_list, options, run_metadata)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1052, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\nCaused by op 'conv-maxpool-3/GatherNd', defined at:\nFile \"mix.py\", line 64, in \nnum_classes)\nFile \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 125, in init\nfilter_size)\nFile \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 217, in conv_layer\nlocal_in_doc_mat = tf.gather_nd(in_doc_mat,temp)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 1321, in gather_nd\nname=name)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 768, in apply_op\nop_def=op_def)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 2336, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1228, in init\nself._traceback = _extract_stack()\nInvalidArgumentError (see above for traceback): flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\n[[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]", "body": "2017-07-24 10:35:25.247357: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\r\n\t [[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\r\n2017-07-24 10:35:25.247422: W tensorflow/core/framework/op_kernel.cc:1152] Invalid argument: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\r\n\t [[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1039, in _do_call\r\n    return fn(*args)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1021, in _run_fn\r\n    status, run_metadata)\r\n  File \"/usr/local/Cellar/python3/3.6.1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/contextlib.py\", line 89, in __exit__\r\n    next(self.gen)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\r\n\t [[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"mix.py\", line 66, in <module>\r\n    autoen_nn.clf_train_epoch(x_train,y_train,batch_size,dropout_rate = 0.5)\r\n  File \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 248, in clf_train_epoch\r\n    feed_dict = feed_dict)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 778, in run\r\n    run_metadata_ptr)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 982, in _run\r\n    feed_dict_string, options, run_metadata)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1032, in _do_run\r\n    target_list, options, run_metadata)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1052, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\r\n\t [[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\r\n\r\nCaused by op 'conv-maxpool-3/GatherNd', defined at:\r\n  File \"mix.py\", line 64, in <module>\r\n    num_classes)\r\n  File \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 125, in __init__\r\n    filter_size)\r\n  File \"/Users/MilesZhao/Desktop/ORNL/data/epath_data/yong/cnn.py\", line 217, in conv_layer\r\n    local_in_doc_mat = tf.gather_nd(in_doc_mat,temp)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 1321, in gather_nd\r\n    name=name)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 768, in apply_op\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 2336, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1228, in __init__\r\n    self._traceback = _extract_stack()\r\n\r\nInvalidArgumentError (see above for traceback): flat indices[12287, :] = [127, 42] does not index into param (shape: [32,512,100,1]).\r\n\t [[Node: conv-maxpool-3/GatherNd = GatherNd[Tindices=DT_INT32, Tparams=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ExpandDims, conv-maxpool-3/stack)]]\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14301", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14301/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14301/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14301/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14301", "id": 271629103, "node_id": "MDU6SXNzdWUyNzE2MjkxMDM=", "number": 14301, "title": "CUDA_ERROR_OUT_OF_MEMORY tensorflow 1.4", "user": {"login": "smitshilu", "id": 7061773, "node_id": "MDQ6VXNlcjcwNjE3NzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/7061773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smitshilu", "html_url": "https://github.com/smitshilu", "followers_url": "https://api.github.com/users/smitshilu/followers", "following_url": "https://api.github.com/users/smitshilu/following{/other_user}", "gists_url": "https://api.github.com/users/smitshilu/gists{/gist_id}", "starred_url": "https://api.github.com/users/smitshilu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smitshilu/subscriptions", "organizations_url": "https://api.github.com/users/smitshilu/orgs", "repos_url": "https://api.github.com/users/smitshilu/repos", "events_url": "https://api.github.com/users/smitshilu/events{/privacy}", "received_events_url": "https://api.github.com/users/smitshilu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-06T21:36:40Z", "updated_at": "2017-12-06T10:56:55Z", "closed_at": "2017-11-07T00:43:07Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<p>OS - High Sierra 10.13<br>\nTensorflow - 1.4<br>\nKeras - 2.0.9<br>\nCUDA - 9<br>\ncuDNN - 7</p>\n<h3>Describe the problem</h3>\n<p>CUDA_ERROR_OUT_OF_MEMORY running tensorflow on GPU</p>\n<p>Simple program:</p>\n<pre><code>import tensorflow as tf\nwith tf.device('/gpu:0'):\n    a = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')\n    b = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')\n    c = tf.matmul(a, b)\n\nwith tf.Session() as sess:\n    print (sess.run(c))\n</code></pre>\n<p>Output:</p>\n<pre><code>(tensorflow) Smit-Shilu:Desktop smitshilu$ python gputest.py \n2017-11-07 08:55:50.690390: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:856] OS X does not support NUMA - returning NUMA node zero\n2017-11-07 08:55:50.690536: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1031] Found device 0 with properties: \nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6705\npciBusID: 0000:c3:00.0\ntotalMemory: 11.00GiB freeMemory: 10.81GiB\n2017-11-07 08:55:50.690560: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:c3:00.0, compute capability: 6.1)\n2017-11-07 08:55:50.690914: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 10.27G (11026294784 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n2017-11-07 08:55:50.691022: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 9.24G (9923664896 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n[[ 22.  28.]\n [ 49.  64.]]\n</code></pre>\n<p>CUDA_ERROR_OUT_OF_MEMORY when import Keras after upgrading to 10.13 and 1.4</p>\n<pre><code>&gt;&gt;&gt; from keras.callbacks import *\nUsing TensorFlow backend.\n2017-11-06 16:30:54.704584: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:856] OS X does not support NUMA - returning NUMA node zero\n2017-11-06 16:30:54.704700: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1031] Found device 0 with properties: \nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6705\npciBusID: 0000:c3:00.0\ntotalMemory: 11.00GiB freeMemory: 10.81GiB\n2017-11-06 16:30:54.704725: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:c3:00.0, compute capability: 6.1)\n2017-11-06 16:30:54.705019: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 10.27G (11026489344 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n2017-11-06 16:30:54.705125: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 9.24G (9923840000 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n</code></pre>", "body_text": "System information\nOS - High Sierra 10.13\nTensorflow - 1.4\nKeras - 2.0.9\nCUDA - 9\ncuDNN - 7\nDescribe the problem\nCUDA_ERROR_OUT_OF_MEMORY running tensorflow on GPU\nSimple program:\nimport tensorflow as tf\nwith tf.device('/gpu:0'):\n    a = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')\n    b = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')\n    c = tf.matmul(a, b)\n\nwith tf.Session() as sess:\n    print (sess.run(c))\n\nOutput:\n(tensorflow) Smit-Shilu:Desktop smitshilu$ python gputest.py \n2017-11-07 08:55:50.690390: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:856] OS X does not support NUMA - returning NUMA node zero\n2017-11-07 08:55:50.690536: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1031] Found device 0 with properties: \nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6705\npciBusID: 0000:c3:00.0\ntotalMemory: 11.00GiB freeMemory: 10.81GiB\n2017-11-07 08:55:50.690560: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:c3:00.0, compute capability: 6.1)\n2017-11-07 08:55:50.690914: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 10.27G (11026294784 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n2017-11-07 08:55:50.691022: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 9.24G (9923664896 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n[[ 22.  28.]\n [ 49.  64.]]\n\nCUDA_ERROR_OUT_OF_MEMORY when import Keras after upgrading to 10.13 and 1.4\n>>> from keras.callbacks import *\nUsing TensorFlow backend.\n2017-11-06 16:30:54.704584: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:856] OS X does not support NUMA - returning NUMA node zero\n2017-11-06 16:30:54.704700: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1031] Found device 0 with properties: \nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6705\npciBusID: 0000:c3:00.0\ntotalMemory: 11.00GiB freeMemory: 10.81GiB\n2017-11-06 16:30:54.704725: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:c3:00.0, compute capability: 6.1)\n2017-11-06 16:30:54.705019: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 10.27G (11026489344 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n2017-11-06 16:30:54.705125: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 9.24G (9923840000 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY", "body": "### System information\r\nOS - High Sierra 10.13\r\nTensorflow - 1.4\r\nKeras - 2.0.9\r\nCUDA - 9\r\ncuDNN - 7\r\n\r\n### Describe the problem\r\nCUDA_ERROR_OUT_OF_MEMORY running tensorflow on GPU\r\n\r\nSimple program:\r\n```\r\nimport tensorflow as tf\r\nwith tf.device('/gpu:0'):\r\n    a = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')\r\n    b = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')\r\n    c = tf.matmul(a, b)\r\n\r\nwith tf.Session() as sess:\r\n    print (sess.run(c))\r\n```\r\n\r\nOutput:\r\n```\r\n(tensorflow) Smit-Shilu:Desktop smitshilu$ python gputest.py \r\n2017-11-07 08:55:50.690390: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:856] OS X does not support NUMA - returning NUMA node zero\r\n2017-11-07 08:55:50.690536: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1031] Found device 0 with properties: \r\nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6705\r\npciBusID: 0000:c3:00.0\r\ntotalMemory: 11.00GiB freeMemory: 10.81GiB\r\n2017-11-07 08:55:50.690560: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:c3:00.0, compute capability: 6.1)\r\n2017-11-07 08:55:50.690914: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 10.27G (11026294784 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\n2017-11-07 08:55:50.691022: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 9.24G (9923664896 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\n[[ 22.  28.]\r\n [ 49.  64.]]\r\n```\r\n\r\nCUDA_ERROR_OUT_OF_MEMORY when import Keras after upgrading to 10.13 and 1.4\r\n\r\n```\r\n>>> from keras.callbacks import *\r\nUsing TensorFlow backend.\r\n2017-11-06 16:30:54.704584: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:856] OS X does not support NUMA - returning NUMA node zero\r\n2017-11-06 16:30:54.704700: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1031] Found device 0 with properties: \r\nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6705\r\npciBusID: 0000:c3:00.0\r\ntotalMemory: 11.00GiB freeMemory: 10.81GiB\r\n2017-11-06 16:30:54.704725: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:c3:00.0, compute capability: 6.1)\r\n2017-11-06 16:30:54.705019: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 10.27G (11026489344 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\n2017-11-06 16:30:54.705125: E tensorflow/stream_executor/cuda/cuda_driver.cc:936] failed to allocate 9.24G (9923840000 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\r\n```"}
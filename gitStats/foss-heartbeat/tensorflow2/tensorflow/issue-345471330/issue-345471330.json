{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21213", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21213/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21213/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21213/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21213", "id": 345471330, "node_id": "MDU6SXNzdWUzNDU0NzEzMzA=", "number": 21213, "title": "Passing/Retrieving String data to/from TFLite model", "user": {"login": "the-dagger", "id": 6565270, "node_id": "MDQ6VXNlcjY1NjUyNzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6565270?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the-dagger", "html_url": "https://github.com/the-dagger", "followers_url": "https://api.github.com/users/the-dagger/followers", "following_url": "https://api.github.com/users/the-dagger/following{/other_user}", "gists_url": "https://api.github.com/users/the-dagger/gists{/gist_id}", "starred_url": "https://api.github.com/users/the-dagger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the-dagger/subscriptions", "organizations_url": "https://api.github.com/users/the-dagger/orgs", "repos_url": "https://api.github.com/users/the-dagger/repos", "events_url": "https://api.github.com/users/the-dagger/events{/privacy}", "received_events_url": "https://api.github.com/users/the-dagger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-07-28T19:01:04Z", "updated_at": "2018-11-13T18:56:28Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\n<a href=\"https://github.com/the-dagger/MLKitAndroid/blob/master/app/src/main/java/io/github/the_dagger/mlkit/activity/SmartReplyActivity.kt\">Yes, here's the source code</a></li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: OSX, High Sierra</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>: Pixel 2XL</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>:  1.9.0</li>\n<li><strong>Python version</strong>: 2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.15.2-homebrew</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I am using the smartReply TFLite model with Firebase but couldn't figure out how to pass and retrieve the input data as String to and from my tflite Interpreter.<br>\nThe default data types are limited to FLOAT32, INT32, UINT8 and INT64 and the documentation nowhere specifies how to provide string input or retrieving String output from a model.</p>\n<p><a href=\"https://firebase.google.com/docs/ml-kit/android/use-custom-models\" rel=\"nofollow\">https://firebase.google.com/docs/ml-kit/android/use-custom-models</a></p>\n<h3>Source code / logs</h3>\n<p>Source code of the app : <a href=\"https://github.com/the-dagger/MLKitAndroid/blob/master/app/src/main/java/io/github/the_dagger/mlkit/activity/SmartReplyActivity.kt\">https://github.com/the-dagger/MLKitAndroid/blob/master/app/src/main/java/io/github/the_dagger/mlkit/activity/SmartReplyActivity.kt</a></p>\n<p>Stacktrace</p>\n<pre><code>07-29 00:14:26.286 6489-6489/? W/System.err: Caused by: java.lang.IllegalArgumentException: DataType error: DataType 5 is not recognized in Java (version 3)\n        at org.tensorflow.lite.DataType.fromNumber(DataType.java:54)\n        at org.tensorflow.lite.Tensor.&lt;init&gt;(Tensor.java:211)\n        at org.tensorflow.lite.Tensor.fromHandle(Tensor.java:32)\n        at org.tensorflow.lite.NativeInterpreterWrapper.getInputTensor(NativeInterpreterWrapper.java:245)\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:110)\n        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:168)\n        at com.google.android.gms.internal.firebase_ml.zzho.runForMultipleInputsOutputs(Unknown Source:2)\n        at com.google.android.gms.internal.firebase_ml.zzhn.zza(Unknown Source:459)\n        at com.google.android.gms.internal.firebase_ml.zzhn.zza(Unknown Source:2)\n        at com.google.android.gms.internal.firebase_ml.zzgu.call(Unknown Source:15)\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\n07-29 00:19:17.979 7895-7895/? W/System.err: com.google.firebase.ml.common.FirebaseMLException: Internal error has occurred when executing Firebase ML tasks\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:15)\n        at com.google.android.gms.internal.firebase_ml.zzgq.run(Unknown Source:4)\n        at android.os.Handler.handleCallback(Handler.java:873)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.os.HandlerThread.run(HandlerThread.java:65)\n    Caused by: java.lang.IllegalArgumentException: DataType error: DataType 5 is not recognized in Java (version 3)\n        at org.tensorflow.lite.DataType.fromNumber(DataType.java:54)\n        at org.tensorflow.lite.Tensor.&lt;init&gt;(Tensor.java:211)\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes, here's the source code\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): OSX, High Sierra\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Pixel 2XL\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below):  1.9.0\nPython version: 2.7\nBazel version (if compiling from source): 0.15.2-homebrew\n\nDescribe the problem\nI am using the smartReply TFLite model with Firebase but couldn't figure out how to pass and retrieve the input data as String to and from my tflite Interpreter.\nThe default data types are limited to FLOAT32, INT32, UINT8 and INT64 and the documentation nowhere specifies how to provide string input or retrieving String output from a model.\nhttps://firebase.google.com/docs/ml-kit/android/use-custom-models\nSource code / logs\nSource code of the app : https://github.com/the-dagger/MLKitAndroid/blob/master/app/src/main/java/io/github/the_dagger/mlkit/activity/SmartReplyActivity.kt\nStacktrace\n07-29 00:14:26.286 6489-6489/? W/System.err: Caused by: java.lang.IllegalArgumentException: DataType error: DataType 5 is not recognized in Java (version 3)\n        at org.tensorflow.lite.DataType.fromNumber(DataType.java:54)\n        at org.tensorflow.lite.Tensor.<init>(Tensor.java:211)\n        at org.tensorflow.lite.Tensor.fromHandle(Tensor.java:32)\n        at org.tensorflow.lite.NativeInterpreterWrapper.getInputTensor(NativeInterpreterWrapper.java:245)\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:110)\n        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:168)\n        at com.google.android.gms.internal.firebase_ml.zzho.runForMultipleInputsOutputs(Unknown Source:2)\n        at com.google.android.gms.internal.firebase_ml.zzhn.zza(Unknown Source:459)\n        at com.google.android.gms.internal.firebase_ml.zzhn.zza(Unknown Source:2)\n        at com.google.android.gms.internal.firebase_ml.zzgu.call(Unknown Source:15)\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\n07-29 00:19:17.979 7895-7895/? W/System.err: com.google.firebase.ml.common.FirebaseMLException: Internal error has occurred when executing Firebase ML tasks\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:15)\n        at com.google.android.gms.internal.firebase_ml.zzgq.run(Unknown Source:4)\n        at android.os.Handler.handleCallback(Handler.java:873)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.os.HandlerThread.run(HandlerThread.java:65)\n    Caused by: java.lang.IllegalArgumentException: DataType error: DataType 5 is not recognized in Java (version 3)\n        at org.tensorflow.lite.DataType.fromNumber(DataType.java:54)\n        at org.tensorflow.lite.Tensor.<init>(Tensor.java:211)", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n     [Yes, here's the source code](https://github.com/the-dagger/MLKitAndroid/blob/master/app/src/main/java/io/github/the_dagger/mlkit/activity/SmartReplyActivity.kt)\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: OSX, High Sierra\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: Pixel 2XL\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**:  1.9.0\r\n- **Python version**: 2.7\r\n- **Bazel version (if compiling from source)**: 0.15.2-homebrew\r\n\r\n### Describe the problem\r\nI am using the smartReply TFLite model with Firebase but couldn't figure out how to pass and retrieve the input data as String to and from my tflite Interpreter.\r\nThe default data types are limited to FLOAT32, INT32, UINT8 and INT64 and the documentation nowhere specifies how to provide string input or retrieving String output from a model.\r\n\r\nhttps://firebase.google.com/docs/ml-kit/android/use-custom-models\r\n\r\n### Source code / logs\r\n\r\nSource code of the app : [https://github.com/the-dagger/MLKitAndroid/blob/master/app/src/main/java/io/github/the_dagger/mlkit/activity/SmartReplyActivity.kt](https://github.com/the-dagger/MLKitAndroid/blob/master/app/src/main/java/io/github/the_dagger/mlkit/activity/SmartReplyActivity.kt)\r\n\r\nStacktrace\r\n```\r\n07-29 00:14:26.286 6489-6489/? W/System.err: Caused by: java.lang.IllegalArgumentException: DataType error: DataType 5 is not recognized in Java (version 3)\r\n        at org.tensorflow.lite.DataType.fromNumber(DataType.java:54)\r\n        at org.tensorflow.lite.Tensor.<init>(Tensor.java:211)\r\n        at org.tensorflow.lite.Tensor.fromHandle(Tensor.java:32)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.getInputTensor(NativeInterpreterWrapper.java:245)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:110)\r\n        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:168)\r\n        at com.google.android.gms.internal.firebase_ml.zzho.runForMultipleInputsOutputs(Unknown Source:2)\r\n        at com.google.android.gms.internal.firebase_ml.zzhn.zza(Unknown Source:459)\r\n        at com.google.android.gms.internal.firebase_ml.zzhn.zza(Unknown Source:2)\r\n        at com.google.android.gms.internal.firebase_ml.zzgu.call(Unknown Source:15)\r\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:0)\r\n07-29 00:19:17.979 7895-7895/? W/System.err: com.google.firebase.ml.common.FirebaseMLException: Internal error has occurred when executing Firebase ML tasks\r\n        at com.google.android.gms.internal.firebase_ml.zzgp.zza(Unknown Source:15)\r\n        at com.google.android.gms.internal.firebase_ml.zzgq.run(Unknown Source:4)\r\n        at android.os.Handler.handleCallback(Handler.java:873)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:193)\r\n        at android.os.HandlerThread.run(HandlerThread.java:65)\r\n    Caused by: java.lang.IllegalArgumentException: DataType error: DataType 5 is not recognized in Java (version 3)\r\n        at org.tensorflow.lite.DataType.fromNumber(DataType.java:54)\r\n        at org.tensorflow.lite.Tensor.<init>(Tensor.java:211)\r\n```\r\n"}
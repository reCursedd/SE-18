{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/319150246", "html_url": "https://github.com/tensorflow/tensorflow/pull/11392#issuecomment-319150246", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11392", "id": 319150246, "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTE1MDI0Ng==", "user": {"login": "byronyi", "id": 2613663, "node_id": "MDQ6VXNlcjI2MTM2NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2613663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/byronyi", "html_url": "https://github.com/byronyi", "followers_url": "https://api.github.com/users/byronyi/followers", "following_url": "https://api.github.com/users/byronyi/following{/other_user}", "gists_url": "https://api.github.com/users/byronyi/gists{/gist_id}", "starred_url": "https://api.github.com/users/byronyi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/byronyi/subscriptions", "organizations_url": "https://api.github.com/users/byronyi/orgs", "repos_url": "https://api.github.com/users/byronyi/repos", "events_url": "https://api.github.com/users/byronyi/events{/privacy}", "received_events_url": "https://api.github.com/users/byronyi/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-31T18:10:49Z", "updated_at": "2017-07-31T18:10:49Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5105569\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/suiyuan2009\">@suiyuan2009</a> Thanks for raising those issues.</p>\n<p>When <code>No RDMA device found</code> prints <a href=\"https://github.com/red-bird/tensorflow/blob/0cb5019de7329b10d60a8d74f6c4665169578400/tensorflow/core/distributed_runtime/rpc/rdma.cc#L129\">here</a> it probably means there is no available IB device present. It is a fairly simple API call (<code>rdma_get_devices</code>) without any dependency, so it itself is unlikely to go wrong. Let me know if this issue persists; I could take a closer look to your environment.</p>\n<p>We have seen the invalid free during our development process, and while we haven't figured out the reasons behind, some suggested it might because of incompatible build/runtime environment, such as python or malloc version (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"222982828\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/9328\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/9328/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/9328\">#9328</a>). I suspect it might because the virtualenv that you used to build TF is different from the runtime (as once in our case), but I am not sure. I will come back to this one after tidying up the current mess.</p>\n<p>About the slow speedup, could you elaborate?</p>", "body_text": "@suiyuan2009 Thanks for raising those issues.\nWhen No RDMA device found prints here it probably means there is no available IB device present. It is a fairly simple API call (rdma_get_devices) without any dependency, so it itself is unlikely to go wrong. Let me know if this issue persists; I could take a closer look to your environment.\nWe have seen the invalid free during our development process, and while we haven't figured out the reasons behind, some suggested it might because of incompatible build/runtime environment, such as python or malloc version (#9328). I suspect it might because the virtualenv that you used to build TF is different from the runtime (as once in our case), but I am not sure. I will come back to this one after tidying up the current mess.\nAbout the slow speedup, could you elaborate?", "body": "@suiyuan2009 Thanks for raising those issues. \r\n\r\nWhen `No RDMA device found` prints [here](https://github.com/red-bird/tensorflow/blob/0cb5019de7329b10d60a8d74f6c4665169578400/tensorflow/core/distributed_runtime/rpc/rdma.cc#L129) it probably means there is no available IB device present. It is a fairly simple API call (`rdma_get_devices`) without any dependency, so it itself is unlikely to go wrong. Let me know if this issue persists; I could take a closer look to your environment.\r\n\r\nWe have seen the invalid free during our development process, and while we haven't figured out the reasons behind, some suggested it might because of incompatible build/runtime environment, such as python or malloc version (#9328). I suspect it might because the virtualenv that you used to build TF is different from the runtime (as once in our case), but I am not sure. I will come back to this one after tidying up the current mess.\r\n\r\nAbout the slow speedup, could you elaborate?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23702", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23702/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23702/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23702/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23702", "id": 380078263, "node_id": "MDU6SXNzdWUzODAwNzgyNjM=", "number": 23702, "title": "Weird Bug in Tf.keras.Model.Predict(x=tf.Dataset iterator)", "user": {"login": "Abhijit-2592", "id": 29851832, "node_id": "MDQ6VXNlcjI5ODUxODMy", "avatar_url": "https://avatars2.githubusercontent.com/u/29851832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Abhijit-2592", "html_url": "https://github.com/Abhijit-2592", "followers_url": "https://api.github.com/users/Abhijit-2592/followers", "following_url": "https://api.github.com/users/Abhijit-2592/following{/other_user}", "gists_url": "https://api.github.com/users/Abhijit-2592/gists{/gist_id}", "starred_url": "https://api.github.com/users/Abhijit-2592/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Abhijit-2592/subscriptions", "organizations_url": "https://api.github.com/users/Abhijit-2592/orgs", "repos_url": "https://api.github.com/users/Abhijit-2592/repos", "events_url": "https://api.github.com/users/Abhijit-2592/events{/privacy}", "received_events_url": "https://api.github.com/users/Abhijit-2592/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-11-13T06:29:19Z", "updated_at": "2018-11-17T04:03:34Z", "closed_at": null, "author_association": "NONE", "body_html": "<p><em>Please make sure that this is a bug. As per our <a href=\"https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md\">GitHub Policy</a>, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em></p>\n<p><strong>System information</strong></p>\n<ul>\n<li>Have I written custom code (as opposed to using a stock example script provided in TensorFlow):</li>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04</li>\n<li>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:</li>\n<li>TensorFlow installed from (source or binary): pip</li>\n<li>TensorFlow version (use command below): 1.9.0 and 1.12.0 (I am using 1.9.0 but the bug is present in 1.12.0 also)</li>\n<li>Python version: 3.6</li>\n<li>Bazel version (if compiling from source):</li>\n<li>GCC/Compiler version (if compiling from source):</li>\n<li>CUDA/cuDNN version:</li>\n<li>GPU model and memory:M60 16 GB (two 8GB GPUs)</li>\n</ul>\n<p><strong>Describe the current behavior</strong><br>\nwhen using tf.data.Dataset.Iterator in tf.keras.Model.predict(x=tf.data.Dataset.Iterator, steps). I am getting a weird value error:</p>\n<blockquote>\n<p>Please provide data as a list or tuple of 2 elements  - input and target pair. Received Tensor(\"IteratorGetNext:0\", dtype=int64)</p>\n</blockquote>\n<p>The above error is misleading. why does it need (X,Y) for prediction?</p>\n<p>My Testing tf.Dataset iterator obviously does not give a (X,Y) tuple. It gives only X in batches. When I give a numpy array of X as input it works as intended. If I use the dataset iterator with <strong>eager_execution</strong> enabled: I get this error (my batch size is 2):</p>\n<blockquote>\n<p>Please provide data as a list or tuple of 2 elements  - input and target pair. Received tf.Tensor(<br>\n[[     68       5     521 ...       0       0       0]<br>\n[   6705 1235757    2411 ...    2804     147      13]], shape=(2, 5000), dtype=int64). We do not use the <code>target</code> value here.</p>\n</blockquote>\n<p>Which makes it clear that when eager execution is enabled, Y is not used.</p>\n<p>Moreover, why does tf.Dataset iterator need to output a tuple of (X,Y) ? when using tf.keras.Model.predict() ? Is this the expected behaviour?</p>\n<p>NOTE: My model is a single input model not a multi input model</p>\n<p>EDIT:<br>\nI worked around the error by providing (X,Y), But the keras progress bar doesn't seem to work with it.</p>", "body_text": "Please make sure that this is a bug. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nTensorFlow installed from (source or binary): pip\nTensorFlow version (use command below): 1.9.0 and 1.12.0 (I am using 1.9.0 but the bug is present in 1.12.0 also)\nPython version: 3.6\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version:\nGPU model and memory:M60 16 GB (two 8GB GPUs)\n\nDescribe the current behavior\nwhen using tf.data.Dataset.Iterator in tf.keras.Model.predict(x=tf.data.Dataset.Iterator, steps). I am getting a weird value error:\n\nPlease provide data as a list or tuple of 2 elements  - input and target pair. Received Tensor(\"IteratorGetNext:0\", dtype=int64)\n\nThe above error is misleading. why does it need (X,Y) for prediction?\nMy Testing tf.Dataset iterator obviously does not give a (X,Y) tuple. It gives only X in batches. When I give a numpy array of X as input it works as intended. If I use the dataset iterator with eager_execution enabled: I get this error (my batch size is 2):\n\nPlease provide data as a list or tuple of 2 elements  - input and target pair. Received tf.Tensor(\n[[     68       5     521 ...       0       0       0]\n[   6705 1235757    2411 ...    2804     147      13]], shape=(2, 5000), dtype=int64). We do not use the target value here.\n\nWhich makes it clear that when eager execution is enabled, Y is not used.\nMoreover, why does tf.Dataset iterator need to output a tuple of (X,Y) ? when using tf.keras.Model.predict() ? Is this the expected behaviour?\nNOTE: My model is a single input model not a multi input model\nEDIT:\nI worked around the error by providing (X,Y), But the keras progress bar doesn't seem to work with it.", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 1.9.0 and 1.12.0 (I am using 1.9.0 but the bug is present in 1.12.0 also)\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:M60 16 GB (two 8GB GPUs)\r\n\r\n\r\n**Describe the current behavior**\r\nwhen using tf.data.Dataset.Iterator in tf.keras.Model.predict(x=tf.data.Dataset.Iterator, steps). I am getting a weird value error:\r\n\r\n> Please provide data as a list or tuple of 2 elements  - input and target pair. Received Tensor(\"IteratorGetNext:0\", dtype=int64)\r\n\r\nThe above error is misleading. why does it need (X,Y) for prediction?\r\n\r\nMy Testing tf.Dataset iterator obviously does not give a (X,Y) tuple. It gives only X in batches. When I give a numpy array of X as input it works as intended. If I use the dataset iterator with **eager_execution** enabled: I get this error (my batch size is 2):\r\n\r\n> Please provide data as a list or tuple of 2 elements  - input and target pair. Received tf.Tensor(\r\n> [[     68       5     521 ...       0       0       0]\r\n>  [   6705 1235757    2411 ...    2804     147      13]], shape=(2, 5000), dtype=int64). We do not use the `target` value here. \r\n\r\nWhich makes it clear that when eager execution is enabled, Y is not used.\r\n\r\nMoreover, why does tf.Dataset iterator need to output a tuple of (X,Y) ? when using tf.keras.Model.predict() ? Is this the expected behaviour?\r\n\r\n\r\nNOTE: My model is a single input model not a multi input model\r\n\r\nEDIT:\r\nI worked around the error by providing (X,Y), But the keras progress bar doesn't seem to work with it."}
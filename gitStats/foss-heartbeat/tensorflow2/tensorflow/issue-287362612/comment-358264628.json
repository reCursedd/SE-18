{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/358264628", "html_url": "https://github.com/tensorflow/tensorflow/pull/16003#issuecomment-358264628", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16003", "id": 358264628, "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODI2NDYyOA==", "user": {"login": "namrata-ibm", "id": 21953668, "node_id": "MDQ6VXNlcjIxOTUzNjY4", "avatar_url": "https://avatars3.githubusercontent.com/u/21953668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/namrata-ibm", "html_url": "https://github.com/namrata-ibm", "followers_url": "https://api.github.com/users/namrata-ibm/followers", "following_url": "https://api.github.com/users/namrata-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/namrata-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/namrata-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/namrata-ibm/subscriptions", "organizations_url": "https://api.github.com/users/namrata-ibm/orgs", "repos_url": "https://api.github.com/users/namrata-ibm/repos", "events_url": "https://api.github.com/users/namrata-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/namrata-ibm/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-17T10:37:04Z", "updated_at": "2018-01-17T10:37:04Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20959853\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/drpngx\">@drpngx</a>, I have created the <code>metrics_export_meta_graph_be.pb</code> from the original <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/framework/testdata/metrics_export_meta_graph.pb\">metrics_export_meta_graph.pb</a> itself. There is only 1 change in <a href=\"https://github.com/linux-on-ibm-z/tensorflow/blob/67bc8fc36f74ea57e0477e84e99ec024c716fce4/tensorflow/python/framework/testdata/metrics_export_meta_graph_be.pb#L1161\">tensor_content</a> where data is swapped as below for int32 dtype(with size 2):</p>\n<pre><code>original: tensor_content: \"\\000\\000\\000\\000\\001\\000\\000\\000\"\nBE:       tensor_content: \"\\000\\000\\000\\000\\000\\000\\000\\001\"\n</code></pre>\n<p>With this change, the test <code>//tensorflow/python:framework_meta_graph_test</code> passes on big endian, which earlier was failing with error:<br>\n<code>ValueError: Invalid reduction dimension 16777216 for input with 2 dimensions. for 'mean/Sum' (op: 'Sum') with input shapes: [1,2], [2] and with computed input tensors: input[1] = &lt;0 16777216&gt;. </code></p>\n<p>Since the original file contains 1559 lines, added a new file for big endian and referenced it in test. Is there some other way to handle this failure?</p>", "body_text": "@drpngx, I have created the metrics_export_meta_graph_be.pb from the original metrics_export_meta_graph.pb itself. There is only 1 change in tensor_content where data is swapped as below for int32 dtype(with size 2):\noriginal: tensor_content: \"\\000\\000\\000\\000\\001\\000\\000\\000\"\nBE:       tensor_content: \"\\000\\000\\000\\000\\000\\000\\000\\001\"\n\nWith this change, the test //tensorflow/python:framework_meta_graph_test passes on big endian, which earlier was failing with error:\nValueError: Invalid reduction dimension 16777216 for input with 2 dimensions. for 'mean/Sum' (op: 'Sum') with input shapes: [1,2], [2] and with computed input tensors: input[1] = <0 16777216>. \nSince the original file contains 1559 lines, added a new file for big endian and referenced it in test. Is there some other way to handle this failure?", "body": "@drpngx, I have created the `metrics_export_meta_graph_be.pb` from the original [metrics_export_meta_graph.pb](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/framework/testdata/metrics_export_meta_graph.pb) itself. There is only 1 change in [tensor_content](https://github.com/linux-on-ibm-z/tensorflow/blob/67bc8fc36f74ea57e0477e84e99ec024c716fce4/tensorflow/python/framework/testdata/metrics_export_meta_graph_be.pb#L1161) where data is swapped as below for int32 dtype(with size 2):\r\n```\r\noriginal: tensor_content: \"\\000\\000\\000\\000\\001\\000\\000\\000\"\r\nBE:       tensor_content: \"\\000\\000\\000\\000\\000\\000\\000\\001\"\r\n```\r\nWith this change, the test `//tensorflow/python:framework_meta_graph_test` passes on big endian, which earlier was failing with error: \r\n`ValueError: Invalid reduction dimension 16777216 for input with 2 dimensions. for 'mean/Sum' (op: 'Sum') with input shapes: [1,2], [2] and with computed input tensors: input[1] = <0 16777216>.\r\n`\r\n\r\nSince the original file contains 1559 lines, added a new file for big endian and referenced it in test. Is there some other way to handle this failure?"}
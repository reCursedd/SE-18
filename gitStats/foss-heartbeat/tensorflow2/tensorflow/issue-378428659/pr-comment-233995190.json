{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/233995190", "pull_request_review_id": 175024525, "id": 233995190, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMzk5NTE5MA==", "diff_hunk": "@@ -1278,6 +1292,85 @@ class CudnnRnnSequenceTensorDescriptor\n   SE_DISALLOW_COPY_AND_ASSIGN(CudnnRnnSequenceTensorDescriptor);\n };\n \n+class CudnnRnnVariableSequenceTensorDescriptor\n+    : public dnn::RnnVariableSequenceTensorDescriptor {\n+  CudnnRnnVariableSequenceTensorDescriptor(CUDAExecutor* parent, int seq_length,\n+                                           int batch_size, int data_size,\n+                                           int* seq_lens,\n+                                           cudnnDataType_t data_type,\n+                                           bool is_ready,\n+                                           RNNDataDescriptor handle)\n+      : parent_(parent),\n+        seq_length_(seq_length),\n+        batch_size_(batch_size),\n+        data_size_(data_size),\n+        seq_lens_(seq_lens),\n+        is_ready_(is_ready),\n+        data_type_(data_type),\n+        handle_(std::move(handle)) {}\n+\n+  CudnnRnnVariableSequenceTensorDescriptor(CUDAExecutor* parent)\n+      : parent_(parent), is_ready_(false) {}\n+\n+ public:\n+  CudnnRnnVariableSequenceTensorDescriptor(\n+      CudnnRnnVariableSequenceTensorDescriptor&&) = default;\n+\n+  static port::StatusOr<CudnnRnnVariableSequenceTensorDescriptor> Create(\n+      CUDAExecutor* parent, int seq_length, int batch_size, int data_size,\n+      int* seq_lens,  // This is the device memory", "path": "tensorflow/stream_executor/cuda/cuda_dnn.cc", "position": null, "original_position": 72, "commit_id": "2301b4fabf41b7799919e1e29a1a3651367495aa", "original_commit_id": "514b05b38845eab0936f73b42e6e225702460e45", "user": {"login": "protoget", "id": 5117188, "node_id": "MDQ6VXNlcjUxMTcxODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5117188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/protoget", "html_url": "https://github.com/protoget", "followers_url": "https://api.github.com/users/protoget/followers", "following_url": "https://api.github.com/users/protoget/following{/other_user}", "gists_url": "https://api.github.com/users/protoget/gists{/gist_id}", "starred_url": "https://api.github.com/users/protoget/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/protoget/subscriptions", "organizations_url": "https://api.github.com/users/protoget/orgs", "repos_url": "https://api.github.com/users/protoget/repos", "events_url": "https://api.github.com/users/protoget/events{/privacy}", "received_events_url": "https://api.github.com/users/protoget/received_events", "type": "User", "site_admin": false}, "body": "Update to the following once you use `HostMemory` on the TF kernel input.\r\n```suggestion\r\n      int* seq_lens,  // This is the host memory\r\n```", "created_at": "2018-11-15T20:23:58Z", "updated_at": "2018-11-21T22:30:12Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/23588#discussion_r233995190", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23588", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/233995190"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/23588#discussion_r233995190"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23588"}}, "body_html": "<p>Update to the following once you use <code>HostMemory</code> on the TF kernel input.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center text-gray\">\n        Suggested change <span class=\"d-inline-block lh-condensed px-1 rounded-1 border border-green\">Beta</span>\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by the pull request author or assignees.\">\n          <svg class=\"hide-sm octicon octicon-info\" viewBox=\"0 0 14 16\" version=\"1.1\" width=\"14\" height=\"16\">\n            <path fill-rule=\"evenodd\" d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"></path>\n          </svg>\n        </span>\n      </div>\n      <div class=\"flex-auto text-right text-gray\">\n        <a href=\"https://www.research.net/r/SuggestedChanges\" target=\"_blank\">Give us feedback</a>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0\">\n        <tbody><tr class=\"border-0\">\n          <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n          <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      <span class=\"pl-k\">int</span>* seq_lens,  <span class=\"pl-c\"><span class=\"pl-c\">//</span> This is the <span class=\"x x-first x-last\">device</span> memory</span></td>\n        </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      <span class=\"pl-k\">int</span>* seq_lens,  <span class=\"pl-c\"><span class=\"pl-c\">//</span> This is the <span class=\"x x-first x-last\">host</span> memory</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "body_text": "Update to the following once you use HostMemory on the TF kernel input.\n  \n    \n      \n        Suggested change Beta\n        \n          \n            \n          \n        \n      \n      \n        Give us feedback\n      \n    \n    \n      \n        \n          \n                int* seq_lens,  // This is the device memory\n        \n          \n            \n                  int* seq_lens,  // This is the host memory"}
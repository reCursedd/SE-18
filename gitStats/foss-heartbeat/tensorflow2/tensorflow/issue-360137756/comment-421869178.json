{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/421869178", "html_url": "https://github.com/tensorflow/tensorflow/issues/22268#issuecomment-421869178", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22268", "id": 421869178, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTg2OTE3OA==", "user": {"login": "taotaolin", "id": 11807206, "node_id": "MDQ6VXNlcjExODA3MjA2", "avatar_url": "https://avatars3.githubusercontent.com/u/11807206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taotaolin", "html_url": "https://github.com/taotaolin", "followers_url": "https://api.github.com/users/taotaolin/followers", "following_url": "https://api.github.com/users/taotaolin/following{/other_user}", "gists_url": "https://api.github.com/users/taotaolin/gists{/gist_id}", "starred_url": "https://api.github.com/users/taotaolin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taotaolin/subscriptions", "organizations_url": "https://api.github.com/users/taotaolin/orgs", "repos_url": "https://api.github.com/users/taotaolin/repos", "events_url": "https://api.github.com/users/taotaolin/events{/privacy}", "received_events_url": "https://api.github.com/users/taotaolin/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-17T01:36:49Z", "updated_at": "2018-09-17T01:36:49Z", "author_association": "NONE", "body_html": "<p>i try using bazel to build on windows, but tips:</p>\n<p><strong>Have I written custom code</strong> No<br>\n<strong>OS Platform and Distribution</strong> WIN7 Visual Studio 2015<br>\n<strong>TensorFlow installed from source</strong>  master<br>\n<strong>Bazel version</strong>  0.17.1<br>\n<strong>CUDA/cuDNN version</strong> CUDA9.0 / CUDNN 7.2.1<br>\n<strong>GPU model and memory</strong> 1080Ti / 11G<br>\n<strong>Mobile device</strong> N/A<br>\n<strong>Exact command to reproduce</strong><br>\n<strong>1. python ./configure.py</strong><br>\n<strong>2.bazel build --config=opt --config=cuda //tensorflow:libtensorflow.so</strong></p>\n<pre><code>G:\\tensorflow&gt;bazel build --config=opt --config=cuda //tensorflow:libtensorflow.\nso\nStarting local Bazel server and connecting to it...\nWARNING: The following configs were expanded more than once: [cuda]. For repeata\nble flags, repeats are counted twice and may lead to unexpected behavior.\nWARNING: Option 'experimental_shortened_obj_file_path' is deprecated\nLoading:\nLoading: 0 packages loaded\nLoading: 0 packages loaded\n    currently loading: tensorflow\nERROR: Skipping '//tensorflow:libtensorflow.so': error loading package 'tensorfl\now': Encountered error while reading extension file 'cuda/build_defs.bzl': no su\nch package '@local_config_cuda//cuda': Traceback (most recent call last):\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1458\n                _create_local_cuda_repository(repository_ctx)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1185, in\n_create_local_cuda_repository\n                _get_cuda_config(repository_ctx)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 909, in _\nget_cuda_config\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 584, in _\ncudnn_version\n                find_cuda_define(repository_ctx, cudnn_header_dir, \"c...\", ...)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 534, in f\nind_cuda_define\n                auto_configure_fail((\"Error reading %s: %s\" % (str(h...)))\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 315, in a\nuto_configure_fail\n                fail((\"\\n%sCuda Configuration Error:%...)))\n\nCuda Configuration Error: Error reading G:/cudnn/include/cudnn.h: java.io.IOExce\nption: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"gre\np\" --color=never -A1 -E \"#define CUDNN_MAJOR\" G:/cudnn/include/cudnn.h): ???????\n????\n\nWARNING: Target pattern parsing failed.\nERROR: error loading package 'tensorflow': Encountered error while reading exten\nsion file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Tra\nceback (most recent call last):\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1458\n                _create_local_cuda_repository(repository_ctx)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1185, in\n_create_local_cuda_repository\n                _get_cuda_config(repository_ctx)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 909, in _\nget_cuda_config\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 584, in _\ncudnn_version\n                find_cuda_define(repository_ctx, cudnn_header_dir, \"c...\", ...)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 534, in f\nind_cuda_define\n                auto_configure_fail((\"Error reading %s: %s\" % (str(h...)))\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 315, in a\nuto_configure_fail\n                fail((\"\\n%sCuda Configuration Error:%...)))\n\nCuda Configuration Error: Error reading G:/cudnn/include/cudnn.h: java.io.IOExce\nption: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"gre\np\" --color=never -A1 -E \"#define CUDNN_MAJOR\" G:/cudnn/include/cudnn.h): ???????\n????\n\nINFO: Elapsed time: 3.607s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (0 packages loaded)\nFAILED: Build did NOT complete successfully (0 packages loaded)\n</code></pre>", "body_text": "i try using bazel to build on windows, but tips:\nHave I written custom code No\nOS Platform and Distribution WIN7 Visual Studio 2015\nTensorFlow installed from source  master\nBazel version  0.17.1\nCUDA/cuDNN version CUDA9.0 / CUDNN 7.2.1\nGPU model and memory 1080Ti / 11G\nMobile device N/A\nExact command to reproduce\n1. python ./configure.py\n2.bazel build --config=opt --config=cuda //tensorflow:libtensorflow.so\nG:\\tensorflow>bazel build --config=opt --config=cuda //tensorflow:libtensorflow.\nso\nStarting local Bazel server and connecting to it...\nWARNING: The following configs were expanded more than once: [cuda]. For repeata\nble flags, repeats are counted twice and may lead to unexpected behavior.\nWARNING: Option 'experimental_shortened_obj_file_path' is deprecated\nLoading:\nLoading: 0 packages loaded\nLoading: 0 packages loaded\n    currently loading: tensorflow\nERROR: Skipping '//tensorflow:libtensorflow.so': error loading package 'tensorfl\now': Encountered error while reading extension file 'cuda/build_defs.bzl': no su\nch package '@local_config_cuda//cuda': Traceback (most recent call last):\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1458\n                _create_local_cuda_repository(repository_ctx)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1185, in\n_create_local_cuda_repository\n                _get_cuda_config(repository_ctx)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 909, in _\nget_cuda_config\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 584, in _\ncudnn_version\n                find_cuda_define(repository_ctx, cudnn_header_dir, \"c...\", ...)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 534, in f\nind_cuda_define\n                auto_configure_fail((\"Error reading %s: %s\" % (str(h...)))\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 315, in a\nuto_configure_fail\n                fail((\"\\n%sCuda Configuration Error:%...)))\n\nCuda Configuration Error: Error reading G:/cudnn/include/cudnn.h: java.io.IOExce\nption: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"gre\np\" --color=never -A1 -E \"#define CUDNN_MAJOR\" G:/cudnn/include/cudnn.h): ???????\n????\n\nWARNING: Target pattern parsing failed.\nERROR: error loading package 'tensorflow': Encountered error while reading exten\nsion file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Tra\nceback (most recent call last):\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1458\n                _create_local_cuda_repository(repository_ctx)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1185, in\n_create_local_cuda_repository\n                _get_cuda_config(repository_ctx)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 909, in _\nget_cuda_config\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 584, in _\ncudnn_version\n                find_cuda_define(repository_ctx, cudnn_header_dir, \"c...\", ...)\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 534, in f\nind_cuda_define\n                auto_configure_fail((\"Error reading %s: %s\" % (str(h...)))\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 315, in a\nuto_configure_fail\n                fail((\"\\n%sCuda Configuration Error:%...)))\n\nCuda Configuration Error: Error reading G:/cudnn/include/cudnn.h: java.io.IOExce\nption: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"gre\np\" --color=never -A1 -E \"#define CUDNN_MAJOR\" G:/cudnn/include/cudnn.h): ???????\n????\n\nINFO: Elapsed time: 3.607s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (0 packages loaded)\nFAILED: Build did NOT complete successfully (0 packages loaded)", "body": "i try using bazel to build on windows, but tips:\r\n\r\n**Have I written custom code** No\r\n**OS Platform and Distribution** WIN7 Visual Studio 2015\r\n**TensorFlow installed from source**  master\r\n**Bazel version**  0.17.1\r\n**CUDA/cuDNN version** CUDA9.0 / CUDNN 7.2.1\r\n**GPU model and memory** 1080Ti / 11G\r\n**Mobile device** N/A\r\n**Exact command to reproduce**\r\n**1. python ./configure.py**\r\n**2.bazel build --config=opt --config=cuda //tensorflow:libtensorflow.so**\r\n```\r\nG:\\tensorflow>bazel build --config=opt --config=cuda //tensorflow:libtensorflow.\r\nso\r\nStarting local Bazel server and connecting to it...\r\nWARNING: The following configs were expanded more than once: [cuda]. For repeata\r\nble flags, repeats are counted twice and may lead to unexpected behavior.\r\nWARNING: Option 'experimental_shortened_obj_file_path' is deprecated\r\nLoading:\r\nLoading: 0 packages loaded\r\nLoading: 0 packages loaded\r\n    currently loading: tensorflow\r\nERROR: Skipping '//tensorflow:libtensorflow.so': error loading package 'tensorfl\r\now': Encountered error while reading extension file 'cuda/build_defs.bzl': no su\r\nch package '@local_config_cuda//cuda': Traceback (most recent call last):\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1458\r\n                _create_local_cuda_repository(repository_ctx)\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1185, in\r\n_create_local_cuda_repository\r\n                _get_cuda_config(repository_ctx)\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 909, in _\r\nget_cuda_config\r\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 584, in _\r\ncudnn_version\r\n                find_cuda_define(repository_ctx, cudnn_header_dir, \"c...\", ...)\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 534, in f\r\nind_cuda_define\r\n                auto_configure_fail((\"Error reading %s: %s\" % (str(h...)))\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 315, in a\r\nuto_configure_fail\r\n                fail((\"\\n%sCuda Configuration Error:%...)))\r\n\r\nCuda Configuration Error: Error reading G:/cudnn/include/cudnn.h: java.io.IOExce\r\nption: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"gre\r\np\" --color=never -A1 -E \"#define CUDNN_MAJOR\" G:/cudnn/include/cudnn.h): ???????\r\n????\r\n\r\nWARNING: Target pattern parsing failed.\r\nERROR: error loading package 'tensorflow': Encountered error while reading exten\r\nsion file 'cuda/build_defs.bzl': no such package '@local_config_cuda//cuda': Tra\r\nceback (most recent call last):\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1458\r\n                _create_local_cuda_repository(repository_ctx)\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1185, in\r\n_create_local_cuda_repository\r\n                _get_cuda_config(repository_ctx)\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 909, in _\r\nget_cuda_config\r\n                _cudnn_version(repository_ctx, cudnn_install_base..., ...)\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 584, in _\r\ncudnn_version\r\n                find_cuda_define(repository_ctx, cudnn_header_dir, \"c...\", ...)\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 534, in f\r\nind_cuda_define\r\n                auto_configure_fail((\"Error reading %s: %s\" % (str(h...)))\r\n        File \"G:/tensorflow/third_party/gpus/cuda_configure.bzl\", line 315, in a\r\nuto_configure_fail\r\n                fail((\"\\n%sCuda Configuration Error:%...)))\r\n\r\nCuda Configuration Error: Error reading G:/cudnn/include/cudnn.h: java.io.IOExce\r\nption: ERROR: src/main/native/windows/processes-jni.cc(239): CreateProcessW(\"gre\r\np\" --color=never -A1 -E \"#define CUDNN_MAJOR\" G:/cudnn/include/cudnn.h): ???????\r\n????\r\n\r\nINFO: Elapsed time: 3.607s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\n```"}
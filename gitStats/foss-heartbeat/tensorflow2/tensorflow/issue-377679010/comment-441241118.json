{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/441241118", "html_url": "https://github.com/tensorflow/tensorflow/issues/23542#issuecomment-441241118", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23542", "id": 441241118, "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTI0MTExOA==", "user": {"login": "Steroes", "id": 35960840, "node_id": "MDQ6VXNlcjM1OTYwODQw", "avatar_url": "https://avatars3.githubusercontent.com/u/35960840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Steroes", "html_url": "https://github.com/Steroes", "followers_url": "https://api.github.com/users/Steroes/followers", "following_url": "https://api.github.com/users/Steroes/following{/other_user}", "gists_url": "https://api.github.com/users/Steroes/gists{/gist_id}", "starred_url": "https://api.github.com/users/Steroes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Steroes/subscriptions", "organizations_url": "https://api.github.com/users/Steroes/orgs", "repos_url": "https://api.github.com/users/Steroes/repos", "events_url": "https://api.github.com/users/Steroes/events{/privacy}", "received_events_url": "https://api.github.com/users/Steroes/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-23T13:27:22Z", "updated_at": "2018-11-23T13:33:47Z", "author_association": "NONE", "body_html": "<p>Same problem here:<br>\nCompiled v1.11.0 from source on Windows 10 using Bazel 0.18.1 with Python 3.5.4.<br>\nUsing <code>bazel build --config=opt //tensorflow:libtensorflow_cc.so</code> and renamed the so to .dll, and linked against the .lib.</p>\n<p>I get the following linker errors when linking against it:</p>\n<pre><code>0&gt;E:\\VS\\VC\\bin\\x86_amd64\\link.exe /ERRORREPORT:PROMPT /OUT:\"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\inference\\source\\build\\Release\\inference_cc.exe\" /INCREMENTAL:NO /NOLOGO \"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\source\\bazel-bin\\tensorflow\\bin\\libtensorflow_cc.lib\" \"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\build\\deps\\protobuf\\bin\\lib\\libprotobuf.lib\" kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /manifest:embed /PDB:\"D:/dev/sources/quantib-dependencies/tensorflow/inference/source/build/Release/inference_cc.pdb\" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:\"D:/dev/sources/quantib-dependencies/tensorflow/inference/source/build/Release/inference_cc.lib\" /MACHINE:X64  /machine:x64 inference_cc.dir\\Release\\inference_cc.obj\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::MetaGraphDef::MetaGraphDef(void)\" (??0MetaGraphDef@tensorflow@@QEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::MetaGraphDef::~MetaGraphDef(void)\" (??1MetaGraphDef@tensorflow@@UEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::LogMessageFatal::LogMessageFatal(char const *,int)\" (??0LogMessageFatal@internal@tensorflow@@QEAA@PEBDH@Z) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape&lt;1&gt;(class absl::Span&lt;__int64 const &gt;,class std::array&lt;__int64,1&gt; *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::internal::LogMessageFatal::~LogMessageFatal(void)\" (??1LogMessageFatal@internal@tensorflow@@UEAA@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape&lt;1&gt;(class absl::Span&lt;__int64 const &gt;,class std::array&lt;__int64,1&gt; *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::CheckOpMessageBuilder::CheckOpMessageBuilder(char const *)\" (??0CheckOpMessageBuilder@internal@tensorflow@@QEAA@PEBD@Z) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape&lt;1&gt;(class absl::Span&lt;__int64 const &gt;,class std::array&lt;__int64,1&gt; *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder(void)\" (??1CheckOpMessageBuilder@internal@tensorflow@@QEAA@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape&lt;1&gt;(class absl::Span&lt;__int64 const &gt;,class std::array&lt;__int64,1&gt; *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; * __cdecl tensorflow::internal::CheckOpMessageBuilder::ForVar2(void)\" (?ForVar2@CheckOpMessageBuilder@internal@tensorflow@@QEAAPEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape&lt;1&gt;(class absl::Span&lt;__int64 const &gt;,class std::array&lt;__int64,1&gt; *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; * __cdecl tensorflow::internal::CheckOpMessageBuilder::NewString(void)\" (?NewString@CheckOpMessageBuilder@internal@tensorflow@@QEAAPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape&lt;1&gt;(class absl::Span&lt;__int64 const &gt;,class std::array&lt;__int64,1&gt; *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"char const * __cdecl tensorflow::core::GetVarint32PtrFallback(char const *,char const *,unsigned int *)\" (?GetVarint32PtrFallback@core@tensorflow@@YAPEBDPEBD0PEAI@Z) referenced in function \"char const * __cdecl tensorflow::core::GetVarint32Ptr(char const *,char const *,unsigned int *)\" (?GetVarint32Ptr@core@tensorflow@@YAPEBDPEBD0PEAI@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; __cdecl tensorflow::Status::ToString(void)const \" (?ToString@Status@tensorflow@@QEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function \"public: bool __cdecl tensorflow::Status::operator==(class tensorflow::Status const &amp;)const \" (??8Status@tensorflow@@QEBA_NAEBV01@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Status::SlowCopyFrom(struct tensorflow::Status::State const *)\" (?SlowCopyFrom@Status@tensorflow@@AEAAXPEBUState@12@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; * __cdecl tensorflow::TfCheckOpHelperOutOfLine(class tensorflow::Status const &amp;,char const *)\" (?TfCheckOpHelperOutOfLine@tensorflow@@YAPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AEBVStatus@1@PEBD@Z) referenced in function main\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::TensorShapeRep::DestructorOutOfLine(void)\" (?DestructorOutOfLine@TensorShapeRep@tensorflow@@AEAAXXZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::TensorShapeRep::SlowCopyFrom(class tensorflow::TensorShapeRep const &amp;)\" (?SlowCopyFrom@TensorShapeRep@tensorflow@@AEAAXAEBV12@@Z) referenced in function \"public: __cdecl std::pair&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class tensorflow::Tensor&gt;::pair&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class tensorflow::Tensor&gt;(struct std::pair&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class tensorflow::Tensor&gt; const &amp;)\" (??0?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@QEAA@AEBU01@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::TensorShapeBase&lt;class tensorflow::TensorShape&gt;::TensorShapeBase&lt;class tensorflow::TensorShape&gt;(class absl::Span&lt;__int64 const &gt;)\" (??0?$TensorShapeBase@VTensorShape@tensorflow@@@tensorflow@@QEAA@V?$Span@$$CB_J@absl@@@Z) referenced in function main\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::TensorShapeBase&lt;class tensorflow::TensorShape&gt;::TensorShapeBase&lt;class tensorflow::TensorShape&gt;(void)\" (??0?$TensorShapeBase@VTensorShape@tensorflow@@@tensorflow@@QEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Tensor::Tensor(enum tensorflow::DataType,class tensorflow::TensorShape const &amp;)\" (??0Tensor@tensorflow@@QEAA@W4DataType@1@AEBVTensorShape@1@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Tensor::~Tensor(void)\" (??1Tensor@tensorflow@@QEAA@XZ) referenced in function \"void __cdecl std::_Destroy_range1&lt;class std::allocator&lt;struct std::pair&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class tensorflow::Tensor&gt; &gt;,struct std::pair&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class tensorflow::Tensor&gt; *&gt;(struct std::pair&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class tensorflow::Tensor&gt; *,struct std::pair&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class tensorflow::Tensor&gt; *,struct std::_Wrap_alloc&lt;class std::allocator&lt;struct std::pair&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class tensorflow::Tensor&gt; &gt; &gt; &amp;,struct std::integral_constant&lt;bool,0&gt;)\" (??$_Destroy_range1@V?$allocator@U?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@@std@@PEAU?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@2@@std@@YAXPEAU?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@0@0AEAU?$_Wrap_alloc@V?$allocator@U?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@@std@@@0@U?$integral_constant@_N$0A@@0@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; __cdecl tensorflow::Tensor::DebugString(void)const \" (?DebugString@Tensor@tensorflow@@QEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function main\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Tensor::CheckTypeAndIsAligned(enum tensorflow::DataType)const \" (?CheckTypeAndIsAligned@Tensor@tensorflow@@AEBAXW4DataType@2@@Z) referenced in function \"public: class Eigen::TensorMap&lt;class Eigen::Tensor&lt;float,1,1,__int64&gt;,16,struct Eigen::MakePointer&gt; __cdecl tensorflow::Tensor::shaped&lt;float,1&gt;(class absl::Span&lt;__int64 const &gt;)\" (??$shaped@M$00@Tensor@tensorflow@@QEAA?AV?$TensorMap@V?$Tensor@M$00$00_J@Eigen@@$0BA@UMakePointer@2@@Eigen@@V?$Span@$$CB_J@absl@@@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Tensor::CheckIsAlignedAndSingleElement(void)const \" (?CheckIsAlignedAndSingleElement@Tensor@tensorflow@@AEBAXXZ) referenced in function \"public: class Eigen::TensorMap&lt;class Eigen::TensorFixedSize&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,struct Eigen::Sizes&lt;&gt;,1,__int64&gt;,16,struct Eigen::MakePointer&gt; __cdecl tensorflow::Tensor::scalar&lt;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; &gt;(void)\" (??$scalar@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Tensor@tensorflow@@QEAA?AV?$TensorMap@V?$TensorFixedSize@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@U?$Sizes@$S@Eigen@@$00_J@Eigen@@$0BA@UMakePointer@2@@Eigen@@XZ)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: static class tensorflow::Env * __cdecl tensorflow::Env::Default(void)\" (?Default@Env@tensorflow@@SAPEAV12@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::Status __cdecl tensorflow::ReadBinaryProto(class tensorflow::Env *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; const &amp;,class google::protobuf::MessageLite *)\" (?ReadBinaryProto@tensorflow@@YA?AVStatus@1@PEAVEnv@1@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PEAVMessageLite@protobuf@google@@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::ConfigProto::~ConfigProto(void)\" (??1ConfigProto@tensorflow@@UEAA@XZ) referenced in function main\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::SessionOptions::SessionOptions(void)\" (??0SessionOptions@tensorflow@@QEAA@XZ) referenced in function main\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::Status __cdecl tensorflow::NewSession(struct tensorflow::SessionOptions const &amp;,class tensorflow::Session * *)\" (?NewSession@tensorflow@@YA?AVStatus@1@AEBUSessionOptions@1@PEAPEAVSession@1@@Z) referenced in function main\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::GraphDefDefaultTypeInternal tensorflow::_GraphDef_default_instance_\" (?_GraphDef_default_instance_@tensorflow@@3VGraphDefDefaultTypeInternal@1@A) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::SaverDefDefaultTypeInternal tensorflow::_SaverDef_default_instance_\" (?_SaverDef_default_instance_@tensorflow@@3VSaverDefDefaultTypeInternal@1@A) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0&gt;D:\\dev\\sources\\quantib-dependencies\\tensorflow\\inference\\source\\build\\Release\\inference_cc.exe(0,0): Error LNK1120: 28 unresolved externals\n0&gt;------- Project finished: inference_cc. Succeeded: False. Errors: 29. Warnings: 0\n</code></pre>\n<p>Configuration used for ./configure:</p>\n<pre><code>set PYTHON_BIN_PATH=%SCRIPT_DIR%\\venv\\Scripts\\python.exe\nset PYTHON_LIB_PATH=%SCRIPT_DIR%\\venv\\lib\\site-packages\\\n\nset TF_NEED_GCP=0\nset TF_NEED_CUDA=0\nset TF_NEED_AWS=0\nset TF_NEED_JEMALLOC=0\nset TF_NEED_GCP=0\nset TF_NEED_HDFS=0\nset TF_NEED_KAFKA=0\nset TF_ENABLE_XLA=0\nset TF_NEED_GDR=0\nset TF_NEED_VERBS=0\nset TF_NEED_NGRAPH=0\nset TF_CUDA_CLANG=0\nset TF_NEED_OPENCL_SYCL=0\nset TF_NEED_MPI=0\nset TF_DOWNLOAD_CLANG=0\nset CC_OPT_FLAGS=\"/arch:AVX2\"\nset TF_SET_ANDROID_WORKSPACE=0\nset TF_OVERRIDE_EIGEN_STRONG_INLINE=1\n</code></pre>\n<p>What I find weird is: I compiled it with the same settings on Ubuntu 16.04 with Python 3.6.7 and there the libtensorflow.so file is around 600MB in size, while on Windows only 60 Mb. So makes sense that we</p>", "body_text": "Same problem here:\nCompiled v1.11.0 from source on Windows 10 using Bazel 0.18.1 with Python 3.5.4.\nUsing bazel build --config=opt //tensorflow:libtensorflow_cc.so and renamed the so to .dll, and linked against the .lib.\nI get the following linker errors when linking against it:\n0>E:\\VS\\VC\\bin\\x86_amd64\\link.exe /ERRORREPORT:PROMPT /OUT:\"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\inference\\source\\build\\Release\\inference_cc.exe\" /INCREMENTAL:NO /NOLOGO \"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\source\\bazel-bin\\tensorflow\\bin\\libtensorflow_cc.lib\" \"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\build\\deps\\protobuf\\bin\\lib\\libprotobuf.lib\" kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /manifest:embed /PDB:\"D:/dev/sources/quantib-dependencies/tensorflow/inference/source/build/Release/inference_cc.pdb\" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:\"D:/dev/sources/quantib-dependencies/tensorflow/inference/source/build/Release/inference_cc.lib\" /MACHINE:X64  /machine:x64 inference_cc.dir\\Release\\inference_cc.obj\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::MetaGraphDef::MetaGraphDef(void)\" (??0MetaGraphDef@tensorflow@@QEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::MetaGraphDef::~MetaGraphDef(void)\" (??1MetaGraphDef@tensorflow@@UEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::LogMessageFatal::LogMessageFatal(char const *,int)\" (??0LogMessageFatal@internal@tensorflow@@QEAA@PEBDH@Z) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::internal::LogMessageFatal::~LogMessageFatal(void)\" (??1LogMessageFatal@internal@tensorflow@@UEAA@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::CheckOpMessageBuilder::CheckOpMessageBuilder(char const *)\" (??0CheckOpMessageBuilder@internal@tensorflow@@QEAA@PEBD@Z) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder(void)\" (??1CheckOpMessageBuilder@internal@tensorflow@@QEAA@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_ostream<char,struct std::char_traits<char> > * __cdecl tensorflow::internal::CheckOpMessageBuilder::ForVar2(void)\" (?ForVar2@CheckOpMessageBuilder@internal@tensorflow@@QEAAPEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > * __cdecl tensorflow::internal::CheckOpMessageBuilder::NewString(void)\" (?NewString@CheckOpMessageBuilder@internal@tensorflow@@QEAAPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"char const * __cdecl tensorflow::core::GetVarint32PtrFallback(char const *,char const *,unsigned int *)\" (?GetVarint32PtrFallback@core@tensorflow@@YAPEBDPEBD0PEAI@Z) referenced in function \"char const * __cdecl tensorflow::core::GetVarint32Ptr(char const *,char const *,unsigned int *)\" (?GetVarint32Ptr@core@tensorflow@@YAPEBDPEBD0PEAI@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl tensorflow::Status::ToString(void)const \" (?ToString@Status@tensorflow@@QEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function \"public: bool __cdecl tensorflow::Status::operator==(class tensorflow::Status const &)const \" (??8Status@tensorflow@@QEBA_NAEBV01@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Status::SlowCopyFrom(struct tensorflow::Status::State const *)\" (?SlowCopyFrom@Status@tensorflow@@AEAAXPEBUState@12@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > * __cdecl tensorflow::TfCheckOpHelperOutOfLine(class tensorflow::Status const &,char const *)\" (?TfCheckOpHelperOutOfLine@tensorflow@@YAPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AEBVStatus@1@PEBD@Z) referenced in function main\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::TensorShapeRep::DestructorOutOfLine(void)\" (?DestructorOutOfLine@TensorShapeRep@tensorflow@@AEAAXXZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::TensorShapeRep::SlowCopyFrom(class tensorflow::TensorShapeRep const &)\" (?SlowCopyFrom@TensorShapeRep@tensorflow@@AEAAXAEBV12@@Z) referenced in function \"public: __cdecl std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor>::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor>(struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> const &)\" (??0?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@QEAA@AEBU01@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::TensorShapeBase<class tensorflow::TensorShape>::TensorShapeBase<class tensorflow::TensorShape>(class absl::Span<__int64 const >)\" (??0?$TensorShapeBase@VTensorShape@tensorflow@@@tensorflow@@QEAA@V?$Span@$$CB_J@absl@@@Z) referenced in function main\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::TensorShapeBase<class tensorflow::TensorShape>::TensorShapeBase<class tensorflow::TensorShape>(void)\" (??0?$TensorShapeBase@VTensorShape@tensorflow@@@tensorflow@@QEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Tensor::Tensor(enum tensorflow::DataType,class tensorflow::TensorShape const &)\" (??0Tensor@tensorflow@@QEAA@W4DataType@1@AEBVTensorShape@1@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Tensor::~Tensor(void)\" (??1Tensor@tensorflow@@QEAA@XZ) referenced in function \"void __cdecl std::_Destroy_range1<class std::allocator<struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> >,struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> *>(struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> *,struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> *,struct std::_Wrap_alloc<class std::allocator<struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> > > &,struct std::integral_constant<bool,0>)\" (??$_Destroy_range1@V?$allocator@U?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@@std@@PEAU?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@2@@std@@YAXPEAU?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@0@0AEAU?$_Wrap_alloc@V?$allocator@U?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@@std@@@0@U?$integral_constant@_N$0A@@0@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl tensorflow::Tensor::DebugString(void)const \" (?DebugString@Tensor@tensorflow@@QEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function main\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Tensor::CheckTypeAndIsAligned(enum tensorflow::DataType)const \" (?CheckTypeAndIsAligned@Tensor@tensorflow@@AEBAXW4DataType@2@@Z) referenced in function \"public: class Eigen::TensorMap<class Eigen::Tensor<float,1,1,__int64>,16,struct Eigen::MakePointer> __cdecl tensorflow::Tensor::shaped<float,1>(class absl::Span<__int64 const >)\" (??$shaped@M$00@Tensor@tensorflow@@QEAA?AV?$TensorMap@V?$Tensor@M$00$00_J@Eigen@@$0BA@UMakePointer@2@@Eigen@@V?$Span@$$CB_J@absl@@@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Tensor::CheckIsAlignedAndSingleElement(void)const \" (?CheckIsAlignedAndSingleElement@Tensor@tensorflow@@AEBAXXZ) referenced in function \"public: class Eigen::TensorMap<class Eigen::TensorFixedSize<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,struct Eigen::Sizes<>,1,__int64>,16,struct Eigen::MakePointer> __cdecl tensorflow::Tensor::scalar<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(void)\" (??$scalar@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Tensor@tensorflow@@QEAA?AV?$TensorMap@V?$TensorFixedSize@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@U?$Sizes@$S@Eigen@@$00_J@Eigen@@$0BA@UMakePointer@2@@Eigen@@XZ)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: static class tensorflow::Env * __cdecl tensorflow::Env::Default(void)\" (?Default@Env@tensorflow@@SAPEAV12@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::Status __cdecl tensorflow::ReadBinaryProto(class tensorflow::Env *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class google::protobuf::MessageLite *)\" (?ReadBinaryProto@tensorflow@@YA?AVStatus@1@PEAVEnv@1@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PEAVMessageLite@protobuf@google@@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::ConfigProto::~ConfigProto(void)\" (??1ConfigProto@tensorflow@@UEAA@XZ) referenced in function main\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::SessionOptions::SessionOptions(void)\" (??0SessionOptions@tensorflow@@QEAA@XZ) referenced in function main\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::Status __cdecl tensorflow::NewSession(struct tensorflow::SessionOptions const &,class tensorflow::Session * *)\" (?NewSession@tensorflow@@YA?AVStatus@1@AEBUSessionOptions@1@PEAPEAVSession@1@@Z) referenced in function main\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::GraphDefDefaultTypeInternal tensorflow::_GraphDef_default_instance_\" (?_GraphDef_default_instance_@tensorflow@@3VGraphDefDefaultTypeInternal@1@A) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::SaverDefDefaultTypeInternal tensorflow::_SaverDef_default_instance_\" (?_SaverDef_default_instance_@tensorflow@@3VSaverDefDefaultTypeInternal@1@A) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\n0>D:\\dev\\sources\\quantib-dependencies\\tensorflow\\inference\\source\\build\\Release\\inference_cc.exe(0,0): Error LNK1120: 28 unresolved externals\n0>------- Project finished: inference_cc. Succeeded: False. Errors: 29. Warnings: 0\n\nConfiguration used for ./configure:\nset PYTHON_BIN_PATH=%SCRIPT_DIR%\\venv\\Scripts\\python.exe\nset PYTHON_LIB_PATH=%SCRIPT_DIR%\\venv\\lib\\site-packages\\\n\nset TF_NEED_GCP=0\nset TF_NEED_CUDA=0\nset TF_NEED_AWS=0\nset TF_NEED_JEMALLOC=0\nset TF_NEED_GCP=0\nset TF_NEED_HDFS=0\nset TF_NEED_KAFKA=0\nset TF_ENABLE_XLA=0\nset TF_NEED_GDR=0\nset TF_NEED_VERBS=0\nset TF_NEED_NGRAPH=0\nset TF_CUDA_CLANG=0\nset TF_NEED_OPENCL_SYCL=0\nset TF_NEED_MPI=0\nset TF_DOWNLOAD_CLANG=0\nset CC_OPT_FLAGS=\"/arch:AVX2\"\nset TF_SET_ANDROID_WORKSPACE=0\nset TF_OVERRIDE_EIGEN_STRONG_INLINE=1\n\nWhat I find weird is: I compiled it with the same settings on Ubuntu 16.04 with Python 3.6.7 and there the libtensorflow.so file is around 600MB in size, while on Windows only 60 Mb. So makes sense that we", "body": "Same problem here:\r\nCompiled v1.11.0 from source on Windows 10 using Bazel 0.18.1 with Python 3.5.4. \r\nUsing `bazel build --config=opt //tensorflow:libtensorflow_cc.so` and renamed the so to .dll, and linked against the .lib. \r\n\r\nI get the following linker errors when linking against it:\r\n```\r\n0>E:\\VS\\VC\\bin\\x86_amd64\\link.exe /ERRORREPORT:PROMPT /OUT:\"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\inference\\source\\build\\Release\\inference_cc.exe\" /INCREMENTAL:NO /NOLOGO \"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\source\\bazel-bin\\tensorflow\\bin\\libtensorflow_cc.lib\" \"D:\\dev\\sources\\quantib-dependencies\\tensorflow\\build\\deps\\protobuf\\bin\\lib\\libprotobuf.lib\" kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /manifest:embed /PDB:\"D:/dev/sources/quantib-dependencies/tensorflow/inference/source/build/Release/inference_cc.pdb\" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:\"D:/dev/sources/quantib-dependencies/tensorflow/inference/source/build/Release/inference_cc.lib\" /MACHINE:X64  /machine:x64 inference_cc.dir\\Release\\inference_cc.obj\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::MetaGraphDef::MetaGraphDef(void)\" (??0MetaGraphDef@tensorflow@@QEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::MetaGraphDef::~MetaGraphDef(void)\" (??1MetaGraphDef@tensorflow@@UEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::LogMessageFatal::LogMessageFatal(char const *,int)\" (??0LogMessageFatal@internal@tensorflow@@QEAA@PEBDH@Z) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::internal::LogMessageFatal::~LogMessageFatal(void)\" (??1LogMessageFatal@internal@tensorflow@@UEAA@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::CheckOpMessageBuilder::CheckOpMessageBuilder(char const *)\" (??0CheckOpMessageBuilder@internal@tensorflow@@QEAA@PEBD@Z) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder(void)\" (??1CheckOpMessageBuilder@internal@tensorflow@@QEAA@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_ostream<char,struct std::char_traits<char> > * __cdecl tensorflow::internal::CheckOpMessageBuilder::ForVar2(void)\" (?ForVar2@CheckOpMessageBuilder@internal@tensorflow@@QEAAPEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > * __cdecl tensorflow::internal::CheckOpMessageBuilder::NewString(void)\" (?NewString@CheckOpMessageBuilder@internal@tensorflow@@QEAAPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function \"private: void __cdecl tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1>(class absl::Span<__int64 const >,class std::array<__int64,1> *)const \" (??$FillDimsAndValidateCompatibleShape@$00@Tensor@tensorflow@@AEBAXV?$Span@$$CB_J@absl@@PEAV?$array@_J$00@std@@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"char const * __cdecl tensorflow::core::GetVarint32PtrFallback(char const *,char const *,unsigned int *)\" (?GetVarint32PtrFallback@core@tensorflow@@YAPEBDPEBD0PEAI@Z) referenced in function \"char const * __cdecl tensorflow::core::GetVarint32Ptr(char const *,char const *,unsigned int *)\" (?GetVarint32Ptr@core@tensorflow@@YAPEBDPEBD0PEAI@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl tensorflow::Status::ToString(void)const \" (?ToString@Status@tensorflow@@QEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function \"public: bool __cdecl tensorflow::Status::operator==(class tensorflow::Status const &)const \" (??8Status@tensorflow@@QEBA_NAEBV01@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Status::SlowCopyFrom(struct tensorflow::Status::State const *)\" (?SlowCopyFrom@Status@tensorflow@@AEAAXPEBUState@12@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > * __cdecl tensorflow::TfCheckOpHelperOutOfLine(class tensorflow::Status const &,char const *)\" (?TfCheckOpHelperOutOfLine@tensorflow@@YAPEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AEBVStatus@1@PEBD@Z) referenced in function main\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::TensorShapeRep::DestructorOutOfLine(void)\" (?DestructorOutOfLine@TensorShapeRep@tensorflow@@AEAAXXZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::TensorShapeRep::SlowCopyFrom(class tensorflow::TensorShapeRep const &)\" (?SlowCopyFrom@TensorShapeRep@tensorflow@@AEAAXAEBV12@@Z) referenced in function \"public: __cdecl std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor>::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor>(struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> const &)\" (??0?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@QEAA@AEBU01@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::TensorShapeBase<class tensorflow::TensorShape>::TensorShapeBase<class tensorflow::TensorShape>(class absl::Span<__int64 const >)\" (??0?$TensorShapeBase@VTensorShape@tensorflow@@@tensorflow@@QEAA@V?$Span@$$CB_J@absl@@@Z) referenced in function main\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::TensorShapeBase<class tensorflow::TensorShape>::TensorShapeBase<class tensorflow::TensorShape>(void)\" (??0?$TensorShapeBase@VTensorShape@tensorflow@@@tensorflow@@QEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Tensor::Tensor(enum tensorflow::DataType,class tensorflow::TensorShape const &)\" (??0Tensor@tensorflow@@QEAA@W4DataType@1@AEBVTensorShape@1@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Tensor::~Tensor(void)\" (??1Tensor@tensorflow@@QEAA@XZ) referenced in function \"void __cdecl std::_Destroy_range1<class std::allocator<struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> >,struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> *>(struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> *,struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> *,struct std::_Wrap_alloc<class std::allocator<struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class tensorflow::Tensor> > > &,struct std::integral_constant<bool,0>)\" (??$_Destroy_range1@V?$allocator@U?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@@std@@PEAU?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@2@@std@@YAXPEAU?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@0@0AEAU?$_Wrap_alloc@V?$allocator@U?$pair@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VTensor@tensorflow@@@std@@@std@@@0@U?$integral_constant@_N$0A@@0@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl tensorflow::Tensor::DebugString(void)const \" (?DebugString@Tensor@tensorflow@@QEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function main\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Tensor::CheckTypeAndIsAligned(enum tensorflow::DataType)const \" (?CheckTypeAndIsAligned@Tensor@tensorflow@@AEBAXW4DataType@2@@Z) referenced in function \"public: class Eigen::TensorMap<class Eigen::Tensor<float,1,1,__int64>,16,struct Eigen::MakePointer> __cdecl tensorflow::Tensor::shaped<float,1>(class absl::Span<__int64 const >)\" (??$shaped@M$00@Tensor@tensorflow@@QEAA?AV?$TensorMap@V?$Tensor@M$00$00_J@Eigen@@$0BA@UMakePointer@2@@Eigen@@V?$Span@$$CB_J@absl@@@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"private: void __cdecl tensorflow::Tensor::CheckIsAlignedAndSingleElement(void)const \" (?CheckIsAlignedAndSingleElement@Tensor@tensorflow@@AEBAXXZ) referenced in function \"public: class Eigen::TensorMap<class Eigen::TensorFixedSize<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,struct Eigen::Sizes<>,1,__int64>,16,struct Eigen::MakePointer> __cdecl tensorflow::Tensor::scalar<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(void)\" (??$scalar@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Tensor@tensorflow@@QEAA?AV?$TensorMap@V?$TensorFixedSize@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@U?$Sizes@$S@Eigen@@$00_J@Eigen@@$0BA@UMakePointer@2@@Eigen@@XZ)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: static class tensorflow::Env * __cdecl tensorflow::Env::Default(void)\" (?Default@Env@tensorflow@@SAPEAV12@XZ) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::Status __cdecl tensorflow::ReadBinaryProto(class tensorflow::Env *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class google::protobuf::MessageLite *)\" (?ReadBinaryProto@tensorflow@@YA?AVStatus@1@PEAVEnv@1@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PEAVMessageLite@protobuf@google@@@Z) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: virtual __cdecl tensorflow::ConfigProto::~ConfigProto(void)\" (??1ConfigProto@tensorflow@@UEAA@XZ) referenced in function main\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::SessionOptions::SessionOptions(void)\" (??0SessionOptions@tensorflow@@QEAA@XZ) referenced in function main\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::Status __cdecl tensorflow::NewSession(struct tensorflow::SessionOptions const &,class tensorflow::Session * *)\" (?NewSession@tensorflow@@YA?AVStatus@1@AEBUSessionOptions@1@PEAPEAVSession@1@@Z) referenced in function main\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::GraphDefDefaultTypeInternal tensorflow::_GraphDef_default_instance_\" (?_GraphDef_default_instance_@tensorflow@@3VGraphDefDefaultTypeInternal@1@A) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>inference_cc.obj(0,0): Error LNK2019: unresolved external symbol \"class tensorflow::SaverDefDefaultTypeInternal tensorflow::_SaverDef_default_instance_\" (?_SaverDef_default_instance_@tensorflow@@3VSaverDefDefaultTypeInternal@1@A) referenced in function \"class tensorflow::Status __cdecl LoadModel(class tensorflow::Session *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)\" (?LoadModel@@YA?AVStatus@tensorflow@@PEAVSession@2@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@1@Z)\r\n0>D:\\dev\\sources\\quantib-dependencies\\tensorflow\\inference\\source\\build\\Release\\inference_cc.exe(0,0): Error LNK1120: 28 unresolved externals\r\n0>------- Project finished: inference_cc. Succeeded: False. Errors: 29. Warnings: 0\r\n```\r\n\r\nConfiguration used for ./configure:\r\n```\r\nset PYTHON_BIN_PATH=%SCRIPT_DIR%\\venv\\Scripts\\python.exe\r\nset PYTHON_LIB_PATH=%SCRIPT_DIR%\\venv\\lib\\site-packages\\\r\n\r\nset TF_NEED_GCP=0\r\nset TF_NEED_CUDA=0\r\nset TF_NEED_AWS=0\r\nset TF_NEED_JEMALLOC=0\r\nset TF_NEED_GCP=0\r\nset TF_NEED_HDFS=0\r\nset TF_NEED_KAFKA=0\r\nset TF_ENABLE_XLA=0\r\nset TF_NEED_GDR=0\r\nset TF_NEED_VERBS=0\r\nset TF_NEED_NGRAPH=0\r\nset TF_CUDA_CLANG=0\r\nset TF_NEED_OPENCL_SYCL=0\r\nset TF_NEED_MPI=0\r\nset TF_DOWNLOAD_CLANG=0\r\nset CC_OPT_FLAGS=\"/arch:AVX2\"\r\nset TF_SET_ANDROID_WORKSPACE=0\r\nset TF_OVERRIDE_EIGEN_STRONG_INLINE=1\r\n```\r\nWhat I find weird is: I compiled it with the same settings on Ubuntu 16.04 with Python 3.6.7 and there the libtensorflow.so file is around 600MB in size, while on Windows only 60 Mb. So makes sense that we \r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/359881349", "html_url": "https://github.com/tensorflow/tensorflow/issues/16239#issuecomment-359881349", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16239", "id": 359881349, "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTg4MTM0OQ==", "user": {"login": "zheng-xq", "id": 15736910, "node_id": "MDQ6VXNlcjE1NzM2OTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/15736910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zheng-xq", "html_url": "https://github.com/zheng-xq", "followers_url": "https://api.github.com/users/zheng-xq/followers", "following_url": "https://api.github.com/users/zheng-xq/following{/other_user}", "gists_url": "https://api.github.com/users/zheng-xq/gists{/gist_id}", "starred_url": "https://api.github.com/users/zheng-xq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zheng-xq/subscriptions", "organizations_url": "https://api.github.com/users/zheng-xq/orgs", "repos_url": "https://api.github.com/users/zheng-xq/repos", "events_url": "https://api.github.com/users/zheng-xq/events{/privacy}", "received_events_url": "https://api.github.com/users/zheng-xq/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-23T18:16:37Z", "updated_at": "2018-01-23T18:16:37Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=12099308\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ghostplant\">@ghostplant</a>, thanks for the experiments, they look interesting.</p>\n<p>Since users can control batch size, what is really important is whether they can get a higher throughput using more memory.</p>\n<p>With your model-B Resnet20 result, at batch_size=8192, the throughput is 19.5 images/sec; at batch_size=4096, it is 61.31. So I don't think it is worthwhile to go for more managed memory.</p>\n<p>With your model-C VGG16, the results is quite interesting: at batch_size=256, you get 0.46 images/sec; while at batch_size=128, you get 0.42 images/sec. So in this case, managed memory helps.</p>\n<p>Could you share the patch for your experiment? I'll ask <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7523982\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/chsigg\">@chsigg</a> to double check that. If everything looks good, I think this is a valuable contribution. Thanks!</p>", "body_text": "@ghostplant, thanks for the experiments, they look interesting.\nSince users can control batch size, what is really important is whether they can get a higher throughput using more memory.\nWith your model-B Resnet20 result, at batch_size=8192, the throughput is 19.5 images/sec; at batch_size=4096, it is 61.31. So I don't think it is worthwhile to go for more managed memory.\nWith your model-C VGG16, the results is quite interesting: at batch_size=256, you get 0.46 images/sec; while at batch_size=128, you get 0.42 images/sec. So in this case, managed memory helps.\nCould you share the patch for your experiment? I'll ask @chsigg to double check that. If everything looks good, I think this is a valuable contribution. Thanks!", "body": "@ghostplant, thanks for the experiments, they look interesting.\r\n\r\nSince users can control batch size, what is really important is whether they can get a higher throughput using more memory.\r\n\r\nWith your model-B Resnet20 result, at batch_size=8192, the throughput is 19.5 images/sec; at batch_size=4096, it is 61.31. So I don't think it is worthwhile to go for more managed memory.\r\n\r\nWith your model-C VGG16, the results is quite interesting: at batch_size=256, you get 0.46 images/sec; while at batch_size=128, you get 0.42 images/sec. So in this case, managed memory helps.\r\n\r\nCould you share the patch for your experiment? I'll ask @chsigg to double check that. If everything looks good, I think this is a valuable contribution. Thanks!"}
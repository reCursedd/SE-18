{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/359705848", "html_url": "https://github.com/tensorflow/tensorflow/issues/16239#issuecomment-359705848", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16239", "id": 359705848, "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTcwNTg0OA==", "user": {"login": "ghostplant", "id": 12099308, "node_id": "MDQ6VXNlcjEyMDk5MzA4", "avatar_url": "https://avatars2.githubusercontent.com/u/12099308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghostplant", "html_url": "https://github.com/ghostplant", "followers_url": "https://api.github.com/users/ghostplant/followers", "following_url": "https://api.github.com/users/ghostplant/following{/other_user}", "gists_url": "https://api.github.com/users/ghostplant/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghostplant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghostplant/subscriptions", "organizations_url": "https://api.github.com/users/ghostplant/orgs", "repos_url": "https://api.github.com/users/ghostplant/repos", "events_url": "https://api.github.com/users/ghostplant/events{/privacy}", "received_events_url": "https://api.github.com/users/ghostplant/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-23T07:55:14Z", "updated_at": "2018-01-23T12:49:58Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15736910\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zheng-xq\">@zheng-xq</a><br>\nI did an experiment as follows:</p>\n<p>GPU-Version: Nvidia Tesla-P100, with 16GB GMem</p>\n<p>==&gt; model-A: Tensorflow-MNIST_CNN -- 28x28x1</p>\n<ol>\n<li>batch_size=32<br>\nGMem-Current-TF: 49.070s (Real GMem Cost: 16000MB)<br>\nGMem-Managed-TF: 52.110s (Real GMem Cost: 600MB)</li>\n</ol>\n<p>==&gt; model-B: Keras-Resnet20 (using TF backend) -- 32x32x3</p>\n<ol>\n<li>\n<p>batch_size=32<br>\nGMem-Current-TF: 328.38s (Real GMem Cost: 16000MB)<br>\nGMem-Managed-TF: 330.676s (Real GMem Cost: 500MB)</p>\n</li>\n<li>\n<p>batch_size=512<br>\nGMem-Current-TF: 1m11.385s (Real GMem Cost: 16000MB)<br>\nGMem-Managed-TF: 1m12.837s (Real GMem Cost: 2295MB)</p>\n</li>\n<li>\n<p>batch_size=4096<br>\nGMem-Current-TF: 1m6.825s (Real GMem Cost: 16000MB)<br>\nGMem-Managed-TF: 1m9.154s (Real GMem Cost: 13000MB)</p>\n</li>\n<li>\n<p>batch_size=8192<br>\nGMem-Current-TF: FATAL-ERROR. (Cannot support due to Out-of-BFC allocator)<br>\nGMem-Managed-TF: 6m59.930s (Real GMem Cost: 16000MB)</p>\n</li>\n</ol>\n<p>==&gt; model-C: Keras-VGG16 (using TF backend) -- 224x224x3</p>\n<ol>\n<li>\n<p>batch_size=32<br>\nGMem-Current-TF: 109.448s (Real GMem Cost: 16000MB)<br>\nGMem-Managed-TF: 111.907s (Real GMem Cost: 8000MB)</p>\n</li>\n<li>\n<p>batch_size=128<br>\nGMem-Current-TF: 301.289s (Real GMem Cost: 16000MB)<br>\nGMem-Managed-TF: 302.360s (Real GMem Cost: 14000MB)</p>\n</li>\n<li>\n<p>batch_size=256<br>\nGMem-Current-TF: FATAL-ERROR. (Cannot support due to Out-of-BFC allocator)<br>\nGMem-Managed-TF: 548.711s (Real GMem Cost: 16000MB)</p>\n</li>\n</ol>", "body_text": "@zheng-xq\nI did an experiment as follows:\nGPU-Version: Nvidia Tesla-P100, with 16GB GMem\n==> model-A: Tensorflow-MNIST_CNN -- 28x28x1\n\nbatch_size=32\nGMem-Current-TF: 49.070s (Real GMem Cost: 16000MB)\nGMem-Managed-TF: 52.110s (Real GMem Cost: 600MB)\n\n==> model-B: Keras-Resnet20 (using TF backend) -- 32x32x3\n\n\nbatch_size=32\nGMem-Current-TF: 328.38s (Real GMem Cost: 16000MB)\nGMem-Managed-TF: 330.676s (Real GMem Cost: 500MB)\n\n\nbatch_size=512\nGMem-Current-TF: 1m11.385s (Real GMem Cost: 16000MB)\nGMem-Managed-TF: 1m12.837s (Real GMem Cost: 2295MB)\n\n\nbatch_size=4096\nGMem-Current-TF: 1m6.825s (Real GMem Cost: 16000MB)\nGMem-Managed-TF: 1m9.154s (Real GMem Cost: 13000MB)\n\n\nbatch_size=8192\nGMem-Current-TF: FATAL-ERROR. (Cannot support due to Out-of-BFC allocator)\nGMem-Managed-TF: 6m59.930s (Real GMem Cost: 16000MB)\n\n\n==> model-C: Keras-VGG16 (using TF backend) -- 224x224x3\n\n\nbatch_size=32\nGMem-Current-TF: 109.448s (Real GMem Cost: 16000MB)\nGMem-Managed-TF: 111.907s (Real GMem Cost: 8000MB)\n\n\nbatch_size=128\nGMem-Current-TF: 301.289s (Real GMem Cost: 16000MB)\nGMem-Managed-TF: 302.360s (Real GMem Cost: 14000MB)\n\n\nbatch_size=256\nGMem-Current-TF: FATAL-ERROR. (Cannot support due to Out-of-BFC allocator)\nGMem-Managed-TF: 548.711s (Real GMem Cost: 16000MB)", "body": "@zheng-xq \r\nI did an experiment as follows:\r\n\r\nGPU-Version: Nvidia Tesla-P100, with 16GB GMem\r\n\r\n\r\n==> model-A: Tensorflow-MNIST_CNN -- 28x28x1\r\n1) batch_size=32\r\nGMem-Current-TF: 49.070s (Real GMem Cost: 16000MB)\r\nGMem-Managed-TF: 52.110s (Real GMem Cost: 600MB)\r\n\r\n\r\n==> model-B: Keras-Resnet20 (using TF backend) -- 32x32x3\r\n1) batch_size=32\r\nGMem-Current-TF: 328.38s (Real GMem Cost: 16000MB)\r\nGMem-Managed-TF: 330.676s (Real GMem Cost: 500MB)\r\n\r\n2) batch_size=512\r\nGMem-Current-TF: 1m11.385s (Real GMem Cost: 16000MB)\r\nGMem-Managed-TF: 1m12.837s (Real GMem Cost: 2295MB)\r\n\r\n3) batch_size=4096\r\nGMem-Current-TF: 1m6.825s (Real GMem Cost: 16000MB)\r\nGMem-Managed-TF: 1m9.154s (Real GMem Cost: 13000MB)\r\n\r\n4) batch_size=8192\r\nGMem-Current-TF: FATAL-ERROR. (Cannot support due to Out-of-BFC allocator)\r\nGMem-Managed-TF: 6m59.930s (Real GMem Cost: 16000MB)\r\n\r\n\r\n==> model-C: Keras-VGG16 (using TF backend) -- 224x224x3\r\n1) batch_size=32\r\nGMem-Current-TF: 109.448s (Real GMem Cost: 16000MB)\r\nGMem-Managed-TF: 111.907s (Real GMem Cost: 8000MB)\r\n\r\n2) batch_size=128\r\nGMem-Current-TF: 301.289s (Real GMem Cost: 16000MB)\r\nGMem-Managed-TF: 302.360s (Real GMem Cost: 14000MB)\r\n\r\n3) batch_size=256\r\nGMem-Current-TF: FATAL-ERROR. (Cannot support due to Out-of-BFC allocator)\r\nGMem-Managed-TF: 548.711s (Real GMem Cost: 16000MB)\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/308172571", "html_url": "https://github.com/tensorflow/tensorflow/issues/9257#issuecomment-308172571", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9257", "id": 308172571, "node_id": "MDEyOklzc3VlQ29tbWVudDMwODE3MjU3MQ==", "user": {"login": "hadikazemi", "id": 22330454, "node_id": "MDQ6VXNlcjIyMzMwNDU0", "avatar_url": "https://avatars0.githubusercontent.com/u/22330454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hadikazemi", "html_url": "https://github.com/hadikazemi", "followers_url": "https://api.github.com/users/hadikazemi/followers", "following_url": "https://api.github.com/users/hadikazemi/following{/other_user}", "gists_url": "https://api.github.com/users/hadikazemi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hadikazemi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hadikazemi/subscriptions", "organizations_url": "https://api.github.com/users/hadikazemi/orgs", "repos_url": "https://api.github.com/users/hadikazemi/repos", "events_url": "https://api.github.com/users/hadikazemi/events{/privacy}", "received_events_url": "https://api.github.com/users/hadikazemi/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-13T16:26:16Z", "updated_at": "2017-06-13T16:26:16Z", "author_association": "NONE", "body_html": "<p>word2vec_basic.py works on 1.0.0-rc2 but not 1.2.0-rc1:</p>\n<blockquote>\n<p>Caused by op u'nce_loss/embedding_lookup', defined at:<br>\nFile \"/home/hadi/Projects/NLP/word2vec.py\", line 171, in <br>\nnum_classes=vocabulary_size))<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_impl.py\", line 1151, in nce_loss<br>\nname=name)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_impl.py\", line 970, in _compute_sampled_logits<br>\nweights, all_ids, partition_strategy=partition_strategy)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/embedding_ops.py\", line 122, in embedding_lookup<br>\nreturn maybe_normalize(_do_gather(params[0], ids, name=name))<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/embedding_ops.py\", line 42, in _do_gather<br>\nreturn array_ops.gather(params, ids, name=name)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 1179, in gather<br>\nvalidate_indices=validate_indices, name=name)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 767, in apply_op<br>\nop_def=op_def)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2511, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1267, in <strong>init</strong><br>\nself._traceback = _extract_stack()<br>\nInvalidArgumentError (see above for traceback): indices[0] = -1 is not in [0, 50000)<br>\n[[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]</p>\n</blockquote>", "body_text": "word2vec_basic.py works on 1.0.0-rc2 but not 1.2.0-rc1:\n\nCaused by op u'nce_loss/embedding_lookup', defined at:\nFile \"/home/hadi/Projects/NLP/word2vec.py\", line 171, in \nnum_classes=vocabulary_size))\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_impl.py\", line 1151, in nce_loss\nname=name)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_impl.py\", line 970, in _compute_sampled_logits\nweights, all_ids, partition_strategy=partition_strategy)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/embedding_ops.py\", line 122, in embedding_lookup\nreturn maybe_normalize(_do_gather(params[0], ids, name=name))\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/embedding_ops.py\", line 42, in _do_gather\nreturn array_ops.gather(params, ids, name=name)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 1179, in gather\nvalidate_indices=validate_indices, name=name)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 767, in apply_op\nop_def=op_def)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2511, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1267, in init\nself._traceback = _extract_stack()\nInvalidArgumentError (see above for traceback): indices[0] = -1 is not in [0, 50000)\n[[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]", "body": "word2vec_basic.py works on 1.0.0-rc2 but not 1.2.0-rc1:\r\n\r\n> Caused by op u'nce_loss/embedding_lookup', defined at:\r\n  File \"/home/hadi/Projects/NLP/word2vec.py\", line 171, in <module>\r\n    num_classes=vocabulary_size))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_impl.py\", line 1151, in nce_loss\r\n    name=name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_impl.py\", line 970, in _compute_sampled_logits\r\n    weights, all_ids, partition_strategy=partition_strategy)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/embedding_ops.py\", line 122, in embedding_lookup\r\n    return maybe_normalize(_do_gather(params[0], ids, name=name))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/embedding_ops.py\", line 42, in _do_gather\r\n    return array_ops.gather(params, ids, name=name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 1179, in gather\r\n    validate_indices=validate_indices, name=name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 767, in apply_op\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2511, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1267, in __init__\r\n    self._traceback = _extract_stack()\r\nInvalidArgumentError (see above for traceback): indices[0] = -1 is not in [0, 50000)\r\n\t [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\r\n\r\n"}
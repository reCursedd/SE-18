{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9257", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9257/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9257/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9257/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9257", "id": 222064249, "node_id": "MDU6SXNzdWUyMjIwNjQyNDk=", "number": 9257, "title": "InvalidArgumentError when running word2vec_basic.py", "user": {"login": "Strideradu", "id": 9002118, "node_id": "MDQ6VXNlcjkwMDIxMTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/9002118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Strideradu", "html_url": "https://github.com/Strideradu", "followers_url": "https://api.github.com/users/Strideradu/followers", "following_url": "https://api.github.com/users/Strideradu/following{/other_user}", "gists_url": "https://api.github.com/users/Strideradu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Strideradu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Strideradu/subscriptions", "organizations_url": "https://api.github.com/users/Strideradu/orgs", "repos_url": "https://api.github.com/users/Strideradu/repos", "events_url": "https://api.github.com/users/Strideradu/events{/privacy}", "received_events_url": "https://api.github.com/users/Strideradu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-04-17T04:39:40Z", "updated_at": "2017-06-13T16:26:16Z", "closed_at": "2017-04-17T04:43:53Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>Just running the word2vec_basic.py</li>\n<li>Windows 10 64bir</li>\n<li>b'unknown' 0.12.head (I installed 0.12 first then uninstalled old version and install new version to 1.0)</li>\n<li>GTX 760 4GB</li>\n</ul>\n<h3>Describe the problem</h3>\n<pre><code>Invalid argument: indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\nW c:\\tensorflow\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:975] Invalid argument: indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\nTraceback (most recent call last):\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1021, in _do_call\n    return fn(*args)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1003, in _run_fn\n    status, run_metadata)\n  File \"C:\\Anaconda3\\lib\\contextlib.py\", line 66, in __exit__\n    next(self.gen)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 469, in raise_exception_on_not_ok_status\n    pywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \".\\word2vec_basic.py\", line 232, in &lt;module&gt;\n    _, loss_val = session.run([optimizer, loss], feed_dict=feed_dict)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 766, in run\n    run_metadata_ptr)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 964, in _run\n    feed_dict_string, options, run_metadata)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1014, in _do_run\n    target_list, options, run_metadata)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1034, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\n\nCaused by op 'nce_loss/embedding_lookup', defined at:\n  File \".\\word2vec_basic.py\", line 199, in &lt;module&gt;\n    num_classes=vocabulary_size))\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 1044, in nce_loss\n    name=name)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 891, in _compute_sampled_logits\n    weights, all_ids, partition_strategy=partition_strategy)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\embedding_ops.py\", line 111, in embedding_lookup\n    validate_indices=validate_indices)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 1293, in gather\n    validate_indices=validate_indices, name=name)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 763, in apply_op\n    op_def=op_def)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2371, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1258, in __init__\n    self._traceback = _extract_stack()\n\nInvalidArgumentError (see above for traceback): indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\n</code></pre>\n<p>It seems that somehow indices[num] point to a very large number that not in the vocabulary vector?</p>\n<p>I found there are also two cases in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"155451483\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/dennybritz/cnn-text-classification-tf/issues/17\" data-hovercard-type=\"issue\" data-hovercard-url=\"/dennybritz/cnn-text-classification-tf/issues/17/hovercard\" href=\"https://github.com/dennybritz/cnn-text-classification-tf/issues/17\">dennybritz/cnn-text-classification-tf#17</a> but cannot find the solution</p>", "body_text": "System information\n\nJust running the word2vec_basic.py\nWindows 10 64bir\nb'unknown' 0.12.head (I installed 0.12 first then uninstalled old version and install new version to 1.0)\nGTX 760 4GB\n\nDescribe the problem\nInvalid argument: indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\nW c:\\tensorflow\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:975] Invalid argument: indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\nTraceback (most recent call last):\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1021, in _do_call\n    return fn(*args)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1003, in _run_fn\n    status, run_metadata)\n  File \"C:\\Anaconda3\\lib\\contextlib.py\", line 66, in __exit__\n    next(self.gen)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 469, in raise_exception_on_not_ok_status\n    pywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \".\\word2vec_basic.py\", line 232, in <module>\n    _, loss_val = session.run([optimizer, loss], feed_dict=feed_dict)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 766, in run\n    run_metadata_ptr)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 964, in _run\n    feed_dict_string, options, run_metadata)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1014, in _do_run\n    target_list, options, run_metadata)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1034, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\n\nCaused by op 'nce_loss/embedding_lookup', defined at:\n  File \".\\word2vec_basic.py\", line 199, in <module>\n    num_classes=vocabulary_size))\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 1044, in nce_loss\n    name=name)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 891, in _compute_sampled_logits\n    weights, all_ids, partition_strategy=partition_strategy)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\embedding_ops.py\", line 111, in embedding_lookup\n    validate_indices=validate_indices)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 1293, in gather\n    validate_indices=validate_indices, name=name)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 763, in apply_op\n    op_def=op_def)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2371, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1258, in __init__\n    self._traceback = _extract_stack()\n\nInvalidArgumentError (see above for traceback): indices[0] = 4575361316406883040 is not in [0, 50000)\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\n\nIt seems that somehow indices[num] point to a very large number that not in the vocabulary vector?\nI found there are also two cases in dennybritz/cnn-text-classification-tf#17 but cannot find the solution", "body": "### System information\r\n- Just running the word2vec_basic.py\r\n- Windows 10 64bir\r\n- b'unknown' 0.12.head (I installed 0.12 first then uninstalled old version and install new version to 1.0)\r\n- GTX 760 4GB\r\n\r\n\r\n### Describe the problem\r\n\r\n```\r\nInvalid argument: indices[0] = 4575361316406883040 is not in [0, 50000)\r\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\r\nW c:\\tensorflow\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:975] Invalid argument: indices[0] = 4575361316406883040 is not in [0, 50000)\r\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\r\nTraceback (most recent call last):\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1021, in _do_call\r\n    return fn(*args)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1003, in _run_fn\r\n    status, run_metadata)\r\n  File \"C:\\Anaconda3\\lib\\contextlib.py\", line 66, in __exit__\r\n    next(self.gen)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 469, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[0] = 4575361316406883040 is not in [0, 50000)\r\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \".\\word2vec_basic.py\", line 232, in <module>\r\n    _, loss_val = session.run([optimizer, loss], feed_dict=feed_dict)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 766, in run\r\n    run_metadata_ptr)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 964, in _run\r\n    feed_dict_string, options, run_metadata)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1014, in _do_run\r\n    target_list, options, run_metadata)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1034, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[0] = 4575361316406883040 is not in [0, 50000)\r\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\r\n\r\nCaused by op 'nce_loss/embedding_lookup', defined at:\r\n  File \".\\word2vec_basic.py\", line 199, in <module>\r\n    num_classes=vocabulary_size))\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 1044, in nce_loss\r\n    name=name)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 891, in _compute_sampled_logits\r\n    weights, all_ids, partition_strategy=partition_strategy)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\embedding_ops.py\", line 111, in embedding_lookup\r\n    validate_indices=validate_indices)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 1293, in gather\r\n    validate_indices=validate_indices, name=name)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 763, in apply_op\r\n    op_def=op_def)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2371, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"C:\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1258, in __init__\r\n    self._traceback = _extract_stack()\r\n\r\nInvalidArgumentError (see above for traceback): indices[0] = 4575361316406883040 is not in [0, 50000)\r\n         [[Node: nce_loss/embedding_lookup = Gather[Tindices=DT_INT64, Tparams=DT_FLOAT, _class=[\"loc:@Variable_1\"], validate_indices=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Variable_1/read, nce_loss/concat)]]\r\n```\r\nIt seems that somehow indices[num] point to a very large number that not in the vocabulary vector?\r\n\r\nI found there are also two cases in https://github.com/dennybritz/cnn-text-classification-tf/issues/17 but cannot find the solution\r\n"}
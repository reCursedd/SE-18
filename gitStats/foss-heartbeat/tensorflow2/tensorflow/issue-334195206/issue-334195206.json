{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20155", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20155/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20155/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20155/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/20155", "id": 334195206, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk2MjMwODk3", "number": 20155, "title": "Find NCCL2 debians in configure.py", "user": {"login": "jayfurmanek", "id": 8660918, "node_id": "MDQ6VXNlcjg2NjA5MTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/8660918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayfurmanek", "html_url": "https://github.com/jayfurmanek", "followers_url": "https://api.github.com/users/jayfurmanek/followers", "following_url": "https://api.github.com/users/jayfurmanek/following{/other_user}", "gists_url": "https://api.github.com/users/jayfurmanek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayfurmanek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayfurmanek/subscriptions", "organizations_url": "https://api.github.com/users/jayfurmanek/orgs", "repos_url": "https://api.github.com/users/jayfurmanek/repos", "events_url": "https://api.github.com/users/jayfurmanek/events{/privacy}", "received_events_url": "https://api.github.com/users/jayfurmanek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136613, "node_id": "MDU6TGFiZWwzMDAxMzY2MTM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20no", "name": "cla: no", "color": "eb6420", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 27, "created_at": "2018-06-20T18:17:31Z", "updated_at": "2018-09-26T04:49:11Z", "closed_at": "2018-09-26T04:35:56Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/20155", "html_url": "https://github.com/tensorflow/tensorflow/pull/20155", "diff_url": "https://github.com/tensorflow/tensorflow/pull/20155.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/20155.patch"}, "body_html": "<p>The Tensorlfow configure doesn't work with NCCL2 when it is installed via the debians.<br>\nThis PR adds code that will handle the following scenarios:</p>\n<ul>\n<li>NCCL2 installed via unpacked .tar file and not listed in ldconfig</li>\n<li>NCCL2 installed via unpacked .tar file and listed properly in ldconfig</li>\n<li>NCCL2 installed via debian file and not listed in ldconfig</li>\n<li>NCCL2 installed via debian file and listed properly in ldconfig</li>\n</ul>\n<p>The debian places the lib and header in the system paths (/usr/lib/*-linux-gnu and /usr/include) and the license files are placed in /usr/share/ and gzipped, so third_party/nccl/nccl_configure.bzl had to change in order to be flexible enough to find those, but changes here were deliberately kept to a minimum.</p>\n<p>This avoids having to add a new config option for the NCCL2 header location by assuming /usr as the install location when NCCL is installed via debian.</p>", "body_text": "The Tensorlfow configure doesn't work with NCCL2 when it is installed via the debians.\nThis PR adds code that will handle the following scenarios:\n\nNCCL2 installed via unpacked .tar file and not listed in ldconfig\nNCCL2 installed via unpacked .tar file and listed properly in ldconfig\nNCCL2 installed via debian file and not listed in ldconfig\nNCCL2 installed via debian file and listed properly in ldconfig\n\nThe debian places the lib and header in the system paths (/usr/lib/*-linux-gnu and /usr/include) and the license files are placed in /usr/share/ and gzipped, so third_party/nccl/nccl_configure.bzl had to change in order to be flexible enough to find those, but changes here were deliberately kept to a minimum.\nThis avoids having to add a new config option for the NCCL2 header location by assuming /usr as the install location when NCCL is installed via debian.", "body": "The Tensorlfow configure doesn't work with NCCL2 when it is installed via the debians.\r\nThis PR adds code that will handle the following scenarios:\r\n - NCCL2 installed via unpacked .tar file and not listed in ldconfig\r\n - NCCL2 installed via unpacked .tar file and listed properly in ldconfig\r\n - NCCL2 installed via debian file and not listed in ldconfig\r\n - NCCL2 installed via debian file and listed properly in ldconfig\r\n\r\nThe debian places the lib and header in the system paths (/usr/lib/*-linux-gnu and /usr/include) and the license files are placed in /usr/share/ and gzipped, so third_party/nccl/nccl_configure.bzl had to change in order to be flexible enough to find those, but changes here were deliberately kept to a minimum.\r\n\r\nThis avoids having to add a new config option for the NCCL2 header location by assuming /usr as the install location when NCCL is installed via debian.\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/414448783", "html_url": "https://github.com/tensorflow/tensorflow/pull/20155#issuecomment-414448783", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20155", "id": 414448783, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDQ0ODc4Mw==", "user": {"login": "jayfurmanek", "id": 8660918, "node_id": "MDQ6VXNlcjg2NjA5MTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/8660918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayfurmanek", "html_url": "https://github.com/jayfurmanek", "followers_url": "https://api.github.com/users/jayfurmanek/followers", "following_url": "https://api.github.com/users/jayfurmanek/following{/other_user}", "gists_url": "https://api.github.com/users/jayfurmanek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayfurmanek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayfurmanek/subscriptions", "organizations_url": "https://api.github.com/users/jayfurmanek/orgs", "repos_url": "https://api.github.com/users/jayfurmanek/repos", "events_url": "https://api.github.com/users/jayfurmanek/events{/privacy}", "received_events_url": "https://api.github.com/users/jayfurmanek/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-20T20:16:44Z", "updated_at": "2018-08-20T20:16:44Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The \"proper\" place for NCCL is to unpack it into the cuda directory like:</p>\n<pre lang=\"/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl.so.2.2.13\"><code>/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl.so.2\n/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl.so\n/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl_static.a\n/usr/local/cuda-9.2/targets/ppc64le-linux/include/nccl.h\n</code></pre>\n<p>or the corresponding <code>targets</code> locations on other platforms. This PR should find it there whether or not ldconfig knows where it is.  It also should find it if installed via apt-get, which should be:</p>\n<pre><code>/usr/include/nccl.h\n/usr/lib/powerpc64le-linux-gnu/libnccl.so\n/usr/lib/powerpc64le-linux-gnu/libnccl_static.a\n/usr/lib/powerpc64le-linux-gnu/libnccl.so.2\n/usr/lib/powerpc64le-linux-gnu/libnccl.so.2.2.12\n</code></pre>\n<p>On the other hand, this PR would fail if the NCCL-SLA file was not there (or removed from where it was unpacked/installed to). I just pushed a commit to remove the license checking, so we'll see.</p>", "body_text": "The \"proper\" place for NCCL is to unpack it into the cuda directory like:\n/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl.so.2\n/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl.so\n/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl_static.a\n/usr/local/cuda-9.2/targets/ppc64le-linux/include/nccl.h\n\nor the corresponding targets locations on other platforms. This PR should find it there whether or not ldconfig knows where it is.  It also should find it if installed via apt-get, which should be:\n/usr/include/nccl.h\n/usr/lib/powerpc64le-linux-gnu/libnccl.so\n/usr/lib/powerpc64le-linux-gnu/libnccl_static.a\n/usr/lib/powerpc64le-linux-gnu/libnccl.so.2\n/usr/lib/powerpc64le-linux-gnu/libnccl.so.2.2.12\n\nOn the other hand, this PR would fail if the NCCL-SLA file was not there (or removed from where it was unpacked/installed to). I just pushed a commit to remove the license checking, so we'll see.", "body": "The \"proper\" place for NCCL is to unpack it into the cuda directory like:\r\n```/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl.so.2.2.13\r\n/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl.so.2\r\n/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl.so\r\n/usr/local/cuda-9.2/targets/ppc64le-linux/lib/libnccl_static.a\r\n/usr/local/cuda-9.2/targets/ppc64le-linux/include/nccl.h\r\n```\r\nor the corresponding `targets` locations on other platforms. This PR should find it there whether or not ldconfig knows where it is.  It also should find it if installed via apt-get, which should be:\r\n\r\n```\r\n/usr/include/nccl.h\r\n/usr/lib/powerpc64le-linux-gnu/libnccl.so\r\n/usr/lib/powerpc64le-linux-gnu/libnccl_static.a\r\n/usr/lib/powerpc64le-linux-gnu/libnccl.so.2\r\n/usr/lib/powerpc64le-linux-gnu/libnccl.so.2.2.12\r\n```\r\n\r\nOn the other hand, this PR would fail if the NCCL-SLA file was not there (or removed from where it was unpacked/installed to). I just pushed a commit to remove the license checking, so we'll see.\r\n"}
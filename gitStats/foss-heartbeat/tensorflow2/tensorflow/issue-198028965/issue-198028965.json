{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6562", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6562/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6562/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6562/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/6562", "id": 198028965, "node_id": "MDExOlB1bGxSZXF1ZXN0OTk2NzA4ODg=", "number": 6562, "title": "More numerically stable gradients for division.", "user": {"login": "tillahoffmann", "id": 966348, "node_id": "MDQ6VXNlcjk2NjM0OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/966348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tillahoffmann", "html_url": "https://github.com/tillahoffmann", "followers_url": "https://api.github.com/users/tillahoffmann/followers", "following_url": "https://api.github.com/users/tillahoffmann/following{/other_user}", "gists_url": "https://api.github.com/users/tillahoffmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/tillahoffmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tillahoffmann/subscriptions", "organizations_url": "https://api.github.com/users/tillahoffmann/orgs", "repos_url": "https://api.github.com/users/tillahoffmann/repos", "events_url": "https://api.github.com/users/tillahoffmann/events{/privacy}", "received_events_url": "https://api.github.com/users/tillahoffmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "fef2c0", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "benoitsteiner", "id": 6969686, "node_id": "MDQ6VXNlcjY5Njk2ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6969686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitsteiner", "html_url": "https://github.com/benoitsteiner", "followers_url": "https://api.github.com/users/benoitsteiner/followers", "following_url": "https://api.github.com/users/benoitsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/benoitsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitsteiner/subscriptions", "organizations_url": "https://api.github.com/users/benoitsteiner/orgs", "repos_url": "https://api.github.com/users/benoitsteiner/repos", "events_url": "https://api.github.com/users/benoitsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitsteiner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benoitsteiner", "id": 6969686, "node_id": "MDQ6VXNlcjY5Njk2ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6969686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitsteiner", "html_url": "https://github.com/benoitsteiner", "followers_url": "https://api.github.com/users/benoitsteiner/followers", "following_url": "https://api.github.com/users/benoitsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/benoitsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitsteiner/subscriptions", "organizations_url": "https://api.github.com/users/benoitsteiner/orgs", "repos_url": "https://api.github.com/users/benoitsteiner/repos", "events_url": "https://api.github.com/users/benoitsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitsteiner/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-12-29T16:02:14Z", "updated_at": "2017-01-11T23:23:30Z", "closed_at": "2017-01-11T23:23:30Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/6562", "html_url": "https://github.com/tensorflow/tensorflow/pull/6562", "diff_url": "https://github.com/tensorflow/tensorflow/pull/6562.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/6562.patch"}, "body_html": "<p>This PR improves the numerical stability of gradients for the division operator.</p>\n<p>Let <code>f = x / y</code> such that <code>df/dy = - x / y ** 2</code>. But if <code>y</code> is of small magnitude, <code>y ** 2</code> can underflow, and if <code>y</code> is of large magnitude, <code>y ** 2</code> can overflow. It is thus better to compute the derivative as <code>df/dy - (x / y) / y</code>. The changes are illustrated in the figure below using 32-bit floating point representations.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/966348/21547770/0fcae1f8-cde0-11e6-9090-524f24bff1a1.png\"><img src=\"https://cloud.githubusercontent.com/assets/966348/21547770/0fcae1f8-cde0-11e6-9090-524f24bff1a1.png\" alt=\"divgrad\" style=\"max-width:100%;\"></a></p>\n<p>The coverage of the new implementation is strictly greater than the coverage of the old implementation, where coverage is the domain in which the gradient is defined.</p>", "body_text": "This PR improves the numerical stability of gradients for the division operator.\nLet f = x / y such that df/dy = - x / y ** 2. But if y is of small magnitude, y ** 2 can underflow, and if y is of large magnitude, y ** 2 can overflow. It is thus better to compute the derivative as df/dy - (x / y) / y. The changes are illustrated in the figure below using 32-bit floating point representations.\n\nThe coverage of the new implementation is strictly greater than the coverage of the old implementation, where coverage is the domain in which the gradient is defined.", "body": "This PR improves the numerical stability of gradients for the division operator. \r\n\r\nLet `f = x / y` such that `df/dy = - x / y ** 2`. But if `y` is of small magnitude, `y ** 2` can underflow, and if `y` is of large magnitude, `y ** 2` can overflow. It is thus better to compute the derivative as `df/dy - (x / y) / y`. The changes are illustrated in the figure below using 32-bit floating point representations.\r\n\r\n![divgrad](https://cloud.githubusercontent.com/assets/966348/21547770/0fcae1f8-cde0-11e6-9090-524f24bff1a1.png)\r\n\r\nThe coverage of the new implementation is strictly greater than the coverage of the old implementation, where coverage is the domain in which the gradient is defined."}
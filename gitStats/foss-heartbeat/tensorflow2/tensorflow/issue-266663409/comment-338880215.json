{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/338880215", "html_url": "https://github.com/tensorflow/tensorflow/issues/13822#issuecomment-338880215", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13822", "id": 338880215, "node_id": "MDEyOklzc3VlQ29tbWVudDMzODg4MDIxNQ==", "user": {"login": "vishvananda", "id": 142222, "node_id": "MDQ6VXNlcjE0MjIyMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/142222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vishvananda", "html_url": "https://github.com/vishvananda", "followers_url": "https://api.github.com/users/vishvananda/followers", "following_url": "https://api.github.com/users/vishvananda/following{/other_user}", "gists_url": "https://api.github.com/users/vishvananda/gists{/gist_id}", "starred_url": "https://api.github.com/users/vishvananda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vishvananda/subscriptions", "organizations_url": "https://api.github.com/users/vishvananda/orgs", "repos_url": "https://api.github.com/users/vishvananda/repos", "events_url": "https://api.github.com/users/vishvananda/events{/privacy}", "received_events_url": "https://api.github.com/users/vishvananda/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-24T05:42:25Z", "updated_at": "2017-10-24T05:47:50Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=710255\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fchollet\">@fchollet</a> I'm less familiar with using straight tensorflow layers, but the following gives me roughly the same  error:</p>\n<pre><code>import tensorflow as tf                                                                                                                                                              \n                                                                                                                                                                                     \nfrom tensorflow.python.layers.convolutional import Conv2D                                                                                                                            \na = tf.placeholder(tf.float32, (None, 32, 32, 3))                                                                                                                                    \nc = Conv2D(32, (3, 3))                                                                                                                                                               \nc(a)                                                                                                                                                                                 \nc(a)  \n</code></pre>\n<p>Here is the traceback:</p>\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 8, in &lt;module&gt;\n    c(a)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/layers/base.py\", line 575, in __call__\n    outputs = self.call(inputs, *args, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/layers/convolutional.py\", line 171, in call\n    outputs = self._convolution_op(inputs, self.kernel)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 835, in __call__\n    return self.conv_op(inp, filter)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 499, in __call__\n    return self.call(inp, filter)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 187, in __call__\n    name=self.name)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/gen_nn_ops.py\", line 631, in conv2d\n    data_format=data_format, name=name)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\n    op_def=op_def)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\", line 2959, in create_op\n    self._add_op(ret)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\", line 2599, in _add_op\n    \"is already used\" % op.name)\nValueError: cannot add op with name conv2d/convolution as that name is already used\n</code></pre>\n<p>This code also works with the older version of tensorflow from a few weeks back. The names of the layers in the old code are:<br>\nconv2d/convolution<br>\nconv2d/convolution_1</p>", "body_text": "@fchollet I'm less familiar with using straight tensorflow layers, but the following gives me roughly the same  error:\nimport tensorflow as tf                                                                                                                                                              \n                                                                                                                                                                                     \nfrom tensorflow.python.layers.convolutional import Conv2D                                                                                                                            \na = tf.placeholder(tf.float32, (None, 32, 32, 3))                                                                                                                                    \nc = Conv2D(32, (3, 3))                                                                                                                                                               \nc(a)                                                                                                                                                                                 \nc(a)  \n\nHere is the traceback:\nTraceback (most recent call last):\n  File \"test.py\", line 8, in <module>\n    c(a)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/layers/base.py\", line 575, in __call__\n    outputs = self.call(inputs, *args, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/layers/convolutional.py\", line 171, in call\n    outputs = self._convolution_op(inputs, self.kernel)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 835, in __call__\n    return self.conv_op(inp, filter)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 499, in __call__\n    return self.call(inp, filter)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 187, in __call__\n    name=self.name)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/gen_nn_ops.py\", line 631, in conv2d\n    data_format=data_format, name=name)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\n    op_def=op_def)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\", line 2959, in create_op\n    self._add_op(ret)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\", line 2599, in _add_op\n    \"is already used\" % op.name)\nValueError: cannot add op with name conv2d/convolution as that name is already used\n\nThis code also works with the older version of tensorflow from a few weeks back. The names of the layers in the old code are:\nconv2d/convolution\nconv2d/convolution_1", "body": "@fchollet I'm less familiar with using straight tensorflow layers, but the following gives me roughly the same  error:\r\n```\r\nimport tensorflow as tf                                                                                                                                                              \r\n                                                                                                                                                                                     \r\nfrom tensorflow.python.layers.convolutional import Conv2D                                                                                                                            \r\na = tf.placeholder(tf.float32, (None, 32, 32, 3))                                                                                                                                    \r\nc = Conv2D(32, (3, 3))                                                                                                                                                               \r\nc(a)                                                                                                                                                                                 \r\nc(a)  \r\n```\r\n\r\nHere is the traceback:\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 8, in <module>\r\n    c(a)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/layers/base.py\", line 575, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/layers/convolutional.py\", line 171, in call\r\n    outputs = self._convolution_op(inputs, self.kernel)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 835, in __call__\r\n    return self.conv_op(inp, filter)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 499, in __call__\r\n    return self.call(inp, filter)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/nn_ops.py\", line 187, in __call__\r\n    name=self.name)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/gen_nn_ops.py\", line 631, in conv2d\r\n    data_format=data_format, name=name)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\", line 2959, in create_op\r\n    self._add_op(ret)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\", line 2599, in _add_op\r\n    \"is already used\" % op.name)\r\nValueError: cannot add op with name conv2d/convolution as that name is already used\r\n```\r\n\r\nThis code also works with the older version of tensorflow from a few weeks back. The names of the layers in the old code are:\r\nconv2d/convolution\r\nconv2d/convolution_1\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/338151432", "html_url": "https://github.com/tensorflow/tensorflow/issues/13822#issuecomment-338151432", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13822", "id": 338151432, "node_id": "MDEyOklzc3VlQ29tbWVudDMzODE1MTQzMg==", "user": {"login": "antifriz", "id": 6382271, "node_id": "MDQ6VXNlcjYzODIyNzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6382271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antifriz", "html_url": "https://github.com/antifriz", "followers_url": "https://api.github.com/users/antifriz/followers", "following_url": "https://api.github.com/users/antifriz/following{/other_user}", "gists_url": "https://api.github.com/users/antifriz/gists{/gist_id}", "starred_url": "https://api.github.com/users/antifriz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antifriz/subscriptions", "organizations_url": "https://api.github.com/users/antifriz/orgs", "repos_url": "https://api.github.com/users/antifriz/repos", "events_url": "https://api.github.com/users/antifriz/events{/privacy}", "received_events_url": "https://api.github.com/users/antifriz/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-20T09:11:10Z", "updated_at": "2017-10-20T09:11:10Z", "author_association": "NONE", "body_html": "<p>New scoping implementation (the cause of the opened issue) also causes scopes not scoping their implementations correctly.</p>\n<p>A slightly modified code with repeating layers results in bad scoping.</p>\n<pre><code>import tensorflow as tf\n\nfrom tensorflow.contrib.keras.api.keras.layers import Conv2D\nfrom tensorflow.contrib.keras.api.keras.layers import Input\n\na = Input(shape=(None, 32, 3))\na = Conv2D(32, (3, 3))(a)\na = Conv2D(32, (3, 3))(a)\n</code></pre>\n<p>Convolutions are named:</p>\n<ol>\n<li>conv2d_1/convolution</li>\n<li>conv2d_2/convolution</li>\n</ol>\n<p>And their weights are named:</p>\n<ol>\n<li>conv2d/kernel</li>\n<li>conv2d_1/kernel</li>\n</ol>\n<p>Which results in different layers being placed partially in the same scope and partially in different scopes.</p>", "body_text": "New scoping implementation (the cause of the opened issue) also causes scopes not scoping their implementations correctly.\nA slightly modified code with repeating layers results in bad scoping.\nimport tensorflow as tf\n\nfrom tensorflow.contrib.keras.api.keras.layers import Conv2D\nfrom tensorflow.contrib.keras.api.keras.layers import Input\n\na = Input(shape=(None, 32, 3))\na = Conv2D(32, (3, 3))(a)\na = Conv2D(32, (3, 3))(a)\n\nConvolutions are named:\n\nconv2d_1/convolution\nconv2d_2/convolution\n\nAnd their weights are named:\n\nconv2d/kernel\nconv2d_1/kernel\n\nWhich results in different layers being placed partially in the same scope and partially in different scopes.", "body": "New scoping implementation (the cause of the opened issue) also causes scopes not scoping their implementations correctly.\r\n\r\nA slightly modified code with repeating layers results in bad scoping.\r\n```\r\nimport tensorflow as tf\r\n\r\nfrom tensorflow.contrib.keras.api.keras.layers import Conv2D\r\nfrom tensorflow.contrib.keras.api.keras.layers import Input\r\n\r\na = Input(shape=(None, 32, 3))\r\na = Conv2D(32, (3, 3))(a)\r\na = Conv2D(32, (3, 3))(a)\r\n```\r\n\r\nConvolutions are named:\r\n\r\n1. conv2d_1/convolution\r\n2. conv2d_2/convolution\r\n\r\nAnd their weights are named:\r\n\r\n1. conv2d/kernel\r\n2. conv2d_1/kernel\r\n\r\nWhich results in different layers being placed partially in the same scope and partially in different scopes.\r\n\r\n"}
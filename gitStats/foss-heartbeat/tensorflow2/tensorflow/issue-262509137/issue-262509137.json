{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13471", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13471/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13471/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13471/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13471", "id": 262509137, "node_id": "MDU6SXNzdWUyNjI1MDkxMzc=", "number": 13471, "title": "Issue when the saving the model when the session is made by with statement", "user": {"login": "tancejang", "id": 20741312, "node_id": "MDQ6VXNlcjIwNzQxMzEy", "avatar_url": "https://avatars0.githubusercontent.com/u/20741312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tancejang", "html_url": "https://github.com/tancejang", "followers_url": "https://api.github.com/users/tancejang/followers", "following_url": "https://api.github.com/users/tancejang/following{/other_user}", "gists_url": "https://api.github.com/users/tancejang/gists{/gist_id}", "starred_url": "https://api.github.com/users/tancejang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tancejang/subscriptions", "organizations_url": "https://api.github.com/users/tancejang/orgs", "repos_url": "https://api.github.com/users/tancejang/repos", "events_url": "https://api.github.com/users/tancejang/events{/privacy}", "received_events_url": "https://api.github.com/users/tancejang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-10-03T17:10:00Z", "updated_at": "2018-01-18T19:22:10Z", "closed_at": "2018-01-18T19:22:10Z", "author_association": "NONE", "body_html": "<p>i use tensorflow to train LSTM network. The training run well but when i want to save the model, i get error below.</p>\n<pre><code>Step 1, Minibatch Loss= 0.0146, Training Accuracy= 1.000\nStep 1, Minibatch Loss= 0.0129, Training Accuracy= 1.000\nOptimization Finished!\nTraceback (most recent call last):\n  File \".\\lstm.py\", line 169, in &lt;module&gt;\n    save_path = saver.save(sess, \"modelslstm/\" + str(time.strftime(\"%d-%m-%Y-%H-%M-%S\")) + \".ckpt\")\n  File \"C:\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1314, in __exit__\n    self._default_graph_context_manager.__exit__(exec_type, exec_value, exec_tb)\n  File \"C:\\Python35\\lib\\contextlib.py\", line 66, in __exit__\n    next(self.gen)\n  File \"C:\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3815, in get_controller\n    if self.stack[-1] is not default:\nIndexError: list index out of range\n</code></pre>\n<p>My Code :</p>\n<pre><code>with tf.Session() as sess:\n    sess.run(init)\n    saver = tf.train.Saver()\n   ....\n   save_path = saver.save(sess, \"modelslstm/\" + str(time.strftime(\"%d-%m-%Y-%H-%M-%S\")) + \".ckpt\")\n</code></pre>\n<p>After i changed the <code>with</code> statement with the <code>sess = tf.Session()</code> the problem gone</p>", "body_text": "i use tensorflow to train LSTM network. The training run well but when i want to save the model, i get error below.\nStep 1, Minibatch Loss= 0.0146, Training Accuracy= 1.000\nStep 1, Minibatch Loss= 0.0129, Training Accuracy= 1.000\nOptimization Finished!\nTraceback (most recent call last):\n  File \".\\lstm.py\", line 169, in <module>\n    save_path = saver.save(sess, \"modelslstm/\" + str(time.strftime(\"%d-%m-%Y-%H-%M-%S\")) + \".ckpt\")\n  File \"C:\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1314, in __exit__\n    self._default_graph_context_manager.__exit__(exec_type, exec_value, exec_tb)\n  File \"C:\\Python35\\lib\\contextlib.py\", line 66, in __exit__\n    next(self.gen)\n  File \"C:\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3815, in get_controller\n    if self.stack[-1] is not default:\nIndexError: list index out of range\n\nMy Code :\nwith tf.Session() as sess:\n    sess.run(init)\n    saver = tf.train.Saver()\n   ....\n   save_path = saver.save(sess, \"modelslstm/\" + str(time.strftime(\"%d-%m-%Y-%H-%M-%S\")) + \".ckpt\")\n\nAfter i changed the with statement with the sess = tf.Session() the problem gone", "body": " i use tensorflow to train LSTM network. The training run well but when i want to save the model, i get error below.\r\n```\r\nStep 1, Minibatch Loss= 0.0146, Training Accuracy= 1.000\r\nStep 1, Minibatch Loss= 0.0129, Training Accuracy= 1.000\r\nOptimization Finished!\r\nTraceback (most recent call last):\r\n  File \".\\lstm.py\", line 169, in <module>\r\n    save_path = saver.save(sess, \"modelslstm/\" + str(time.strftime(\"%d-%m-%Y-%H-%M-%S\")) + \".ckpt\")\r\n  File \"C:\\Python35\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1314, in __exit__\r\n    self._default_graph_context_manager.__exit__(exec_type, exec_value, exec_tb)\r\n  File \"C:\\Python35\\lib\\contextlib.py\", line 66, in __exit__\r\n    next(self.gen)\r\n  File \"C:\\Python35\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3815, in get_controller\r\n    if self.stack[-1] is not default:\r\nIndexError: list index out of range\r\n```\r\n\r\nMy Code :\r\n```\r\nwith tf.Session() as sess:\r\n    sess.run(init)\r\n    saver = tf.train.Saver()\r\n   ....\r\n   save_path = saver.save(sess, \"modelslstm/\" + str(time.strftime(\"%d-%m-%Y-%H-%M-%S\")) + \".ckpt\")\r\n```\r\nAfter i changed the `with` statement with the `sess = tf.Session()` the problem gone"}
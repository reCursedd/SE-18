{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2062", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2062/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2062/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2062/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2062", "id": 150315254, "node_id": "MDU6SXNzdWUxNTAzMTUyNTQ=", "number": 2062, "title": "tf.cond not working with depedencies", "user": {"login": "alex04309", "id": 18607597, "node_id": "MDQ6VXNlcjE4NjA3NTk3", "avatar_url": "https://avatars3.githubusercontent.com/u/18607597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alex04309", "html_url": "https://github.com/alex04309", "followers_url": "https://api.github.com/users/alex04309/followers", "following_url": "https://api.github.com/users/alex04309/following{/other_user}", "gists_url": "https://api.github.com/users/alex04309/gists{/gist_id}", "starred_url": "https://api.github.com/users/alex04309/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alex04309/subscriptions", "organizations_url": "https://api.github.com/users/alex04309/orgs", "repos_url": "https://api.github.com/users/alex04309/repos", "events_url": "https://api.github.com/users/alex04309/events{/privacy}", "received_events_url": "https://api.github.com/users/alex04309/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "yuanbyu", "id": 2342391, "node_id": "MDQ6VXNlcjIzNDIzOTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2342391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuanbyu", "html_url": "https://github.com/yuanbyu", "followers_url": "https://api.github.com/users/yuanbyu/followers", "following_url": "https://api.github.com/users/yuanbyu/following{/other_user}", "gists_url": "https://api.github.com/users/yuanbyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuanbyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuanbyu/subscriptions", "organizations_url": "https://api.github.com/users/yuanbyu/orgs", "repos_url": "https://api.github.com/users/yuanbyu/repos", "events_url": "https://api.github.com/users/yuanbyu/events{/privacy}", "received_events_url": "https://api.github.com/users/yuanbyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuanbyu", "id": 2342391, "node_id": "MDQ6VXNlcjIzNDIzOTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2342391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuanbyu", "html_url": "https://github.com/yuanbyu", "followers_url": "https://api.github.com/users/yuanbyu/followers", "following_url": "https://api.github.com/users/yuanbyu/following{/other_user}", "gists_url": "https://api.github.com/users/yuanbyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuanbyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuanbyu/subscriptions", "organizations_url": "https://api.github.com/users/yuanbyu/orgs", "repos_url": "https://api.github.com/users/yuanbyu/repos", "events_url": "https://api.github.com/users/yuanbyu/events{/privacy}", "received_events_url": "https://api.github.com/users/yuanbyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-04-22T09:09:04Z", "updated_at": "2016-04-23T11:18:03Z", "closed_at": "2016-04-22T20:24:45Z", "author_association": "NONE", "body_html": "<p>tf.cond seems to have a bug if one of the condition have a dependency. (Dependencies are run, whatever tf.cond arg is True or False).</p>\n<p>To illustrate:</p>\n<pre><code>import tensorflow as tf\n\na = tf.Variable(0)\nincr = a.count_up_to(1)\n\ndef todo_if_true():\n  with tf.control_dependencies([incr]):\n    return tf.identity(a)\ndef todo_if_false():\n  return tf.identity(a)\n\ng = tf.cond(tf.constant(False), todo_if_true, todo_if_false)\ninit = tf.initialize_all_variables()\n\nwith tf.Session() as sess:\n  sess.run(init)\n  print(sess.run(g))\n</code></pre>\n<p>Output:</p>\n<pre><code>1 #But should be 0\n</code></pre>", "body_text": "tf.cond seems to have a bug if one of the condition have a dependency. (Dependencies are run, whatever tf.cond arg is True or False).\nTo illustrate:\nimport tensorflow as tf\n\na = tf.Variable(0)\nincr = a.count_up_to(1)\n\ndef todo_if_true():\n  with tf.control_dependencies([incr]):\n    return tf.identity(a)\ndef todo_if_false():\n  return tf.identity(a)\n\ng = tf.cond(tf.constant(False), todo_if_true, todo_if_false)\ninit = tf.initialize_all_variables()\n\nwith tf.Session() as sess:\n  sess.run(init)\n  print(sess.run(g))\n\nOutput:\n1 #But should be 0", "body": "tf.cond seems to have a bug if one of the condition have a dependency. (Dependencies are run, whatever tf.cond arg is True or False).\n\nTo illustrate:\n\n```\nimport tensorflow as tf\n\na = tf.Variable(0)\nincr = a.count_up_to(1)\n\ndef todo_if_true():\n  with tf.control_dependencies([incr]):\n    return tf.identity(a)\ndef todo_if_false():\n  return tf.identity(a)\n\ng = tf.cond(tf.constant(False), todo_if_true, todo_if_false)\ninit = tf.initialize_all_variables()\n\nwith tf.Session() as sess:\n  sess.run(init)\n  print(sess.run(g))\n```\n\nOutput:\n\n```\n1 #But should be 0\n```\n"}
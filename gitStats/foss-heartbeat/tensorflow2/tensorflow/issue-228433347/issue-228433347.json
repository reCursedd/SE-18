{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9871", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9871/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9871/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9871/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9871", "id": 228433347, "node_id": "MDU6SXNzdWUyMjg0MzMzNDc=", "number": 9871, "title": "errors in ipython sessions cause core dump or segfault", "user": {"login": "capybaralet", "id": 4379720, "node_id": "MDQ6VXNlcjQzNzk3MjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/4379720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/capybaralet", "html_url": "https://github.com/capybaralet", "followers_url": "https://api.github.com/users/capybaralet/followers", "following_url": "https://api.github.com/users/capybaralet/following{/other_user}", "gists_url": "https://api.github.com/users/capybaralet/gists{/gist_id}", "starred_url": "https://api.github.com/users/capybaralet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/capybaralet/subscriptions", "organizations_url": "https://api.github.com/users/capybaralet/orgs", "repos_url": "https://api.github.com/users/capybaralet/repos", "events_url": "https://api.github.com/users/capybaralet/events{/privacy}", "received_events_url": "https://api.github.com/users/capybaralet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-12T23:55:52Z", "updated_at": "2018-10-24T21:25:17Z", "closed_at": "2018-10-24T21:25:17Z", "author_association": "NONE", "body_html": "<hr>\n<h3>System information</h3>\n<p>Python 2.7.13 :: Anaconda custom (64-bit)<br>\nipython :: 5.3.0<br>\nlinux :: 3.16.0-4-amd64</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\">https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh</a> gives:</p>\n<p>== cat /etc/issue ===============================================<br>\nLinux leto26 3.16.0-4-amd64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux<br>\nVERSION_ID=\"8\"<br>\nVERSION=\"8 (jessie)\"</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Debian 4.9.2-10) 4.9.2<br>\nCopyright (C) 2014 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux leto26 3.16.0-4-amd64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nmsgpack-numpy (0.3.9)<br>\nnumpy (1.12.1)<br>\nnumpydoc (0.6.0)<br>\nprotobuf (3.2.0)<br>\ntensorflow-gpu (1.0.1)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.0.1<br>\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty<br>\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty<br>\nSanity check: array([1], dtype=int32)<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\nFri May 12 19:38:18 2017<br>\n+-----------------------------------------------------------------------------+<br>\n| NVIDIA-SMI 375.39                 Driver Version: 375.39                    |<br>\n|-------------------------------+----------------------+----------------------+<br>\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |<br>\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |<br>\n|===============================+======================+======================|<br>\n|   0  GeForce GTX 1050    Off  | 0000:05:00.0      On |                  N/A |<br>\n| 61%   67C    P0    36W /  75W |    145MiB /  1998MiB |      0%      Default |<br>\n+-------------------------------+----------------------+----------------------+<br>\n|   1  TITAN X (Pascal)    Off  | 0000:06:00.0     Off |                  N/A |<br>\n| 54%   84C    P2    68W / 250W |  11530MiB / 12189MiB |      0%      Default |<br>\n+-------------------------------+----------------------+----------------------+<br>\n|   2  TITAN X (Pascal)    Off  | 0000:09:00.0     Off |                  N/A |<br>\n| 45%   78C    P2    85W / 250W |  11820MiB / 12189MiB |     35%      Default |<br>\n+-------------------------------+----------------------+----------------------+</p>\n<p>+-----------------------------------------------------------------------------+<br>\n| Processes:                                                       GPU Memory |<br>\n|  GPU       PID  Type  Process name                               Usage      |<br>\n|=============================================================================|<br>\n|    0      1518    G   /usr/bin/X                                     141MiB |<br>\n|    1     20850    C   python                                       11527MiB |<br>\n|    2     18363    C   python                                       11817MiB |<br>\n+-----------------------------------------------------------------------------+</p>\n<p>== cuda libs  ===================================================<br>\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7<br>\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18<br>\n/usr/local/cuda-7.5/lib64/libcudart_static.a<br>\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18<br>\n/usr/local/cuda-7.5/lib/libcudart_static.a<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7<br>\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44<br>\n/usr/local/cuda-8.0/lib64/libcudart_static.a</p>\n<p>== cat /etc/issue ===============================================<br>\nLinux leto26 3.16.0-4-amd64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux<br>\nVERSION_ID=\"8\"<br>\nVERSION=\"8 (jessie)\"</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Debian 4.9.2-10) 4.9.2<br>\nCopyright (C) 2014 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux leto26 3.16.0-4-amd64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nmsgpack-numpy (0.3.9)<br>\nnumpy (1.12.1)<br>\nnumpydoc (0.6.0)<br>\nprotobuf (3.2.0)<br>\ntensorflow-gpu (1.0.1)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.0.1<br>\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty<br>\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty<br>\nSanity check: array([1], dtype=int32)<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\nFri May 12 19:38:27 2017<br>\n+-----------------------------------------------------------------------------+<br>\n| NVIDIA-SMI 375.39                 Driver Version: 375.39                    |<br>\n|-------------------------------+----------------------+----------------------+<br>\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |<br>\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |<br>\n|===============================+======================+======================|<br>\n|   0  GeForce GTX 1050    Off  | 0000:05:00.0      On |                  N/A |<br>\n| 61%   67C    P0    36W /  75W |    145MiB /  1998MiB |      0%      Default |<br>\n+-------------------------------+----------------------+----------------------+<br>\n|   1  TITAN X (Pascal)    Off  | 0000:06:00.0     Off |                  N/A |<br>\n| 54%   84C    P2    68W / 250W |  11530MiB / 12189MiB |      0%      Default |<br>\n+-------------------------------+----------------------+----------------------+<br>\n|   2  TITAN X (Pascal)    Off  | 0000:09:00.0     Off |                  N/A |<br>\n| 46%   78C    P2   155W / 250W |  11820MiB / 12189MiB |     38%      Default |<br>\n+-------------------------------+----------------------+----------------------+</p>\n<p>+-----------------------------------------------------------------------------+<br>\n| Processes:                                                       GPU Memory |<br>\n|  GPU       PID  Type  Process name                               Usage      |<br>\n|=============================================================================|<br>\n|    0      1518    G   /usr/bin/X                                     141MiB |<br>\n|    1     20850    C   python                                       11527MiB |<br>\n|    2     18363    C   python                                       11817MiB |<br>\n+-----------------------------------------------------------------------------+</p>\n<p>== cuda libs  ===================================================<br>\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7<br>\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18<br>\n/usr/local/cuda-7.5/lib64/libcudart_static.a<br>\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18<br>\n/usr/local/cuda-7.5/lib/libcudart_static.a<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7<br>\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44<br>\n/usr/local/cuda-8.0/lib64/libcudart_static.a</p>\n<p>== cat /etc/issue ===============================================<br>\nLinux leto06 3.16.0-4-amd64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux<br>\nVERSION_ID=\"8\"<br>\nVERSION=\"8 (jessie)\"</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Debian 4.9.2-10) 4.9.2<br>\nCopyright (C) 2014 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux leto06 3.16.0-4-amd64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nmsgpack-numpy (0.3.9)<br>\nnumpy (1.12.1)<br>\nnumpydoc (0.6.0)<br>\nprotobuf (3.2.0)<br>\ntensorflow-gpu (1.0.1)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.0.1<br>\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty<br>\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty<br>\nSanity check: array([1], dtype=int32)<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\nFri May 12 19:40:02 2017<br>\n+-----------------------------------------------------------------------------+<br>\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |<br>\n|-------------------------------+----------------------+----------------------+<br>\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |<br>\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |<br>\n|===============================+======================+======================|<br>\n|   0  GeForce GTX TIT...  Off  | 0000:02:00.0     Off |                  N/A |<br>\n| 22%   46C    P8    18W / 250W |      1MiB / 12206MiB |      0%   E. Process |<br>\n+-------------------------------+----------------------+----------------------+</p>\n<p>+-----------------------------------------------------------------------------+<br>\n| Processes:                                                       GPU Memory |<br>\n|  GPU       PID  Type  Process name                               Usage      |<br>\n|=============================================================================|<br>\n|  No running processes found                                                 |<br>\n+-----------------------------------------------------------------------------+</p>\n<p>== cuda libs  ===================================================<br>\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18<br>\n/usr/local/cuda-7.5/lib/libcudart_static.a<br>\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18<br>\n/usr/local/cuda-7.5/lib64/libcudart_static.a<br>\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7<br>\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44<br>\n/usr/local/cuda-8.0/lib64/libcudart_static.a<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7</p>\n<p>== cat /etc/issue ===============================================<br>\nLinux leto06 3.16.0-4-amd64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux<br>\nVERSION_ID=\"8\"<br>\nVERSION=\"8 (jessie)\"</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Debian 4.9.2-10) 4.9.2<br>\nCopyright (C) 2014 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux leto06 3.16.0-4-amd64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nmsgpack-numpy (0.3.9)<br>\nnumpy (1.12.1)<br>\nnumpydoc (0.6.0)<br>\nprotobuf (3.2.0)<br>\ntensorflow-gpu (1.0.1)</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.0.1<br>\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty<br>\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty<br>\nSanity check: array([1], dtype=int32)<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\nFri May 12 19:40:54 2017<br>\n+-----------------------------------------------------------------------------+<br>\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |<br>\n|-------------------------------+----------------------+----------------------+<br>\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |<br>\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |<br>\n|===============================+======================+======================|<br>\n|   0  GeForce GTX TIT...  Off  | 0000:02:00.0     Off |                  N/A |<br>\n| 22%   47C    P8    18W / 250W |      1MiB / 12206MiB |      0%   E. Process |<br>\n+-------------------------------+----------------------+----------------------+</p>\n<p>+-----------------------------------------------------------------------------+<br>\n| Processes:                                                       GPU Memory |<br>\n|  GPU       PID  Type  Process name                               Usage      |<br>\n|=============================================================================|<br>\n|  No running processes found                                                 |<br>\n+-----------------------------------------------------------------------------+</p>\n<p>== cuda libs  ===================================================<br>\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18<br>\n/usr/local/cuda-7.5/lib/libcudart_static.a<br>\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18<br>\n/usr/local/cuda-7.5/lib64/libcudart_static.a<br>\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7<br>\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44<br>\n/usr/local/cuda-8.0/lib64/libcudart_static.a<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7</p>\n<p>python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\" gives<br>\n('v1.0.0-65-g4763edf-dirty', '1.0.1')</p>\n<h3>Describe the problem</h3>\n<p>When I run tensorflow code (e.g. keras's mnist_cnn.py) in ipython, errors and Ctrl+C often crashes the interactive ipython session with a core dump or segfault, e.g....</p>\n<h3>Source code / logs</h3>\n<p>In [1]: run mnist_cnn.py<br>\nUsing TensorFlow backend.<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally<br>\nx_train shape: (60000, 1, 28, 28)<br>\n60000 train samples<br>\n10000 test samples<br>\n/u/kruegerd/python_modules/keras/keras/backend/tensorflow_backend.py:2252: UserWarning: Expected no kwargs, you passed 1<br>\nkwargs passed to function are ignored with Tensorflow backend<br>\nwarnings.warn('\\n'.join(msg))<br>\nTrain on 60000 samples, validate on 10000 samples<br>\nEpoch 1/12<br>\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.<br>\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.<br>\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.<br>\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.<br>\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.<br>\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.<br>\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties:<br>\nname: GeForce GTX TITAN X<br>\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076<br>\npciBusID 0000:02:00.0<br>\nTotal memory: 11.92GiB<br>\nFree memory: 11.81GiB<br>\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y<br>\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:02:00.0)<br>\n23680/60000 [==========&gt;...................] - ETA: 10s - loss: 0.5787 - acc: 0.8213^C---------------------------------------------------------------------------<br>\nKeyboardInterrupt                         Traceback (most recent call last)<br>\n/u/kruegerd/python_modules/keras/examples/mnist_cnn.py in ()<br>\n65           epochs=epochs,<br>\n66           verbose=1,<br>\n---&gt; 67           validation_data=(x_test, y_test))<br>\n68 score = model.evaluate(x_test, y_test, verbose=0)<br>\n69 print('Test loss:', score[0])</p>\n<p>/u/kruegerd/python_modules/keras/keras/models.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, **kwargs)<br>\n863                               class_weight=class_weight,<br>\n864                               sample_weight=sample_weight,<br>\n--&gt; 865                               initial_epoch=initial_epoch)<br>\n866<br>\n867     def evaluate(self, x, y, batch_size=32, verbose=1,</p>\n<p>/u/kruegerd/python_modules/keras/keras/engine/training.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, **kwargs)<br>\n1499                               val_f=val_f, val_ins=val_ins, shuffle=shuffle,<br>\n1500                               callback_metrics=callback_metrics,<br>\n-&gt; 1501                               initial_epoch=initial_epoch)<br>\n1502<br>\n1503     def evaluate(self, x, y, batch_size=32, verbose=1, sample_weight=None):</p>\n<p>/u/kruegerd/python_modules/keras/keras/engine/training.pyc in _fit_loop(self, f, ins, out_labels, batch_size, epochs, verbose, callbacks, val_f, val_ins, shuffle, callback_metrics, initial_epoch)<br>\n1153                 batch_logs['size'] = len(batch_ids)<br>\n1154                 callbacks.on_batch_begin(batch_index, batch_logs)<br>\n-&gt; 1155                 outs = f(ins_batch)<br>\n1156                 if not isinstance(outs, list):<br>\n1157                     outs = [outs]</p>\n<p>/u/kruegerd/python_modules/keras/keras/backend/tensorflow_backend.pyc in <strong>call</strong>(self, inputs)<br>\n2229         session = get_session()<br>\n2230         updated = session.run(self.outputs + [self.updates_op],<br>\n-&gt; 2231                               feed_dict=feed_dict)<br>\n2232         return updated[:len(self.outputs)]<br>\n2233</p>\n<p>/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in run(self, fetches, feed_dict, options, run_metadata)<br>\n765     try:<br>\n766       result = self._run(None, fetches, feed_dict, options_ptr,<br>\n--&gt; 767                          run_metadata_ptr)<br>\n768       if run_metadata:<br>\n769         proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)</p>\n<p>/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _run(self, handle, fetches, feed_dict, options, run_metadata)<br>\n963     if final_fetches or final_targets:<br>\n964       results = self._do_run(handle, final_targets, final_fetches,<br>\n--&gt; 965                              feed_dict_string, options, run_metadata)<br>\n966     else:<br>\n967       results = []</p>\n<p>/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _do_run(self, handle, target_list, fetch_list, feed_dict, options, run_metadata)<br>\n1013     if handle is None:<br>\n1014       return self._do_call(_run_fn, self._session, feed_dict, fetch_list,<br>\n-&gt; 1015                            target_list, options, run_metadata)<br>\n1016     else:<br>\n1017       return self._do_call(_prun_fn, self._session, handle, feed_dict,</p>\n<p>/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _do_call(self, fn, *args)<br>\n1020   def _do_call(self, fn, *args):<br>\n1021     try:<br>\n-&gt; 1022       return fn(*args)<br>\n1023     except errors.OpError as e:<br>\n1024       message = compat.as_text(e.message)</p>\n<p>/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _run_fn(session, feed_dict, fetch_list, target_list, options, run_metadata)<br>\n1002         return tf_session.TF_Run(session, options,<br>\n1003                                  feed_dict, fetch_list, target_list,<br>\n-&gt; 1004                                  status, run_metadata)<br>\n1005<br>\n1006     def _prun_fn(session, handle, feed_dict, fetch_list):</p>\n<p>KeyboardInterrupt:</p>\n<p>Fatal Python error: GC object already tracked<br>\nAborted (core dumped)</p>", "body_text": "System information\nPython 2.7.13 :: Anaconda custom (64-bit)\nipython :: 5.3.0\nlinux :: 3.16.0-4-amd64\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh gives:\n== cat /etc/issue ===============================================\nLinux leto26 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux\nVERSION_ID=\"8\"\nVERSION=\"8 (jessie)\"\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Debian 4.9.2-10) 4.9.2\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux leto26 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux\n== check pips ===================================================\nmsgpack-numpy (0.3.9)\nnumpy (1.12.1)\nnumpydoc (0.6.0)\nprotobuf (3.2.0)\ntensorflow-gpu (1.0.1)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.0.1\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty\nSanity check: array([1], dtype=int32)\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\n== env ==========================================================\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\nFri May 12 19:38:18 2017\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 375.39                 Driver Version: 375.39                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 1050    Off  | 0000:05:00.0      On |                  N/A |\n| 61%   67C    P0    36W /  75W |    145MiB /  1998MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  TITAN X (Pascal)    Off  | 0000:06:00.0     Off |                  N/A |\n| 54%   84C    P2    68W / 250W |  11530MiB / 12189MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   2  TITAN X (Pascal)    Off  | 0000:09:00.0     Off |                  N/A |\n| 45%   78C    P2    85W / 250W |  11820MiB / 12189MiB |     35%      Default |\n+-------------------------------+----------------------+----------------------+\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      1518    G   /usr/bin/X                                     141MiB |\n|    1     20850    C   python                                       11527MiB |\n|    2     18363    C   python                                       11817MiB |\n+-----------------------------------------------------------------------------+\n== cuda libs  ===================================================\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\n/usr/local/cuda-7.5/lib64/libcudart_static.a\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18\n/usr/local/cuda-7.5/lib/libcudart_static.a\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44\n/usr/local/cuda-8.0/lib64/libcudart_static.a\n== cat /etc/issue ===============================================\nLinux leto26 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux\nVERSION_ID=\"8\"\nVERSION=\"8 (jessie)\"\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Debian 4.9.2-10) 4.9.2\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux leto26 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux\n== check pips ===================================================\nmsgpack-numpy (0.3.9)\nnumpy (1.12.1)\nnumpydoc (0.6.0)\nprotobuf (3.2.0)\ntensorflow-gpu (1.0.1)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.0.1\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty\nSanity check: array([1], dtype=int32)\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\n== env ==========================================================\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\nFri May 12 19:38:27 2017\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 375.39                 Driver Version: 375.39                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 1050    Off  | 0000:05:00.0      On |                  N/A |\n| 61%   67C    P0    36W /  75W |    145MiB /  1998MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  TITAN X (Pascal)    Off  | 0000:06:00.0     Off |                  N/A |\n| 54%   84C    P2    68W / 250W |  11530MiB / 12189MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   2  TITAN X (Pascal)    Off  | 0000:09:00.0     Off |                  N/A |\n| 46%   78C    P2   155W / 250W |  11820MiB / 12189MiB |     38%      Default |\n+-------------------------------+----------------------+----------------------+\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      1518    G   /usr/bin/X                                     141MiB |\n|    1     20850    C   python                                       11527MiB |\n|    2     18363    C   python                                       11817MiB |\n+-----------------------------------------------------------------------------+\n== cuda libs  ===================================================\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\n/usr/local/cuda-7.5/lib64/libcudart_static.a\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18\n/usr/local/cuda-7.5/lib/libcudart_static.a\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44\n/usr/local/cuda-8.0/lib64/libcudart_static.a\n== cat /etc/issue ===============================================\nLinux leto06 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux\nVERSION_ID=\"8\"\nVERSION=\"8 (jessie)\"\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Debian 4.9.2-10) 4.9.2\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux leto06 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux\n== check pips ===================================================\nmsgpack-numpy (0.3.9)\nnumpy (1.12.1)\nnumpydoc (0.6.0)\nprotobuf (3.2.0)\ntensorflow-gpu (1.0.1)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.0.1\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty\nSanity check: array([1], dtype=int32)\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\n== env ==========================================================\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\nFri May 12 19:40:02 2017\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX TIT...  Off  | 0000:02:00.0     Off |                  N/A |\n| 22%   46C    P8    18W / 250W |      1MiB / 12206MiB |      0%   E. Process |\n+-------------------------------+----------------------+----------------------+\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n== cuda libs  ===================================================\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18\n/usr/local/cuda-7.5/lib/libcudart_static.a\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\n/usr/local/cuda-7.5/lib64/libcudart_static.a\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44\n/usr/local/cuda-8.0/lib64/libcudart_static.a\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\n== cat /etc/issue ===============================================\nLinux leto06 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux\nVERSION_ID=\"8\"\nVERSION=\"8 (jessie)\"\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Debian 4.9.2-10) 4.9.2\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux leto06 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux\n== check pips ===================================================\nmsgpack-numpy (0.3.9)\nnumpy (1.12.1)\nnumpydoc (0.6.0)\nprotobuf (3.2.0)\ntensorflow-gpu (1.0.1)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.0.1\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty\nSanity check: array([1], dtype=int32)\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\n== env ==========================================================\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\nFri May 12 19:40:54 2017\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX TIT...  Off  | 0000:02:00.0     Off |                  N/A |\n| 22%   47C    P8    18W / 250W |      1MiB / 12206MiB |      0%   E. Process |\n+-------------------------------+----------------------+----------------------+\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n== cuda libs  ===================================================\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18\n/usr/local/cuda-7.5/lib/libcudart_static.a\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\n/usr/local/cuda-7.5/lib64/libcudart_static.a\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44\n/usr/local/cuda-8.0/lib64/libcudart_static.a\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\" gives\n('v1.0.0-65-g4763edf-dirty', '1.0.1')\nDescribe the problem\nWhen I run tensorflow code (e.g. keras's mnist_cnn.py) in ipython, errors and Ctrl+C often crashes the interactive ipython session with a core dump or segfault, e.g....\nSource code / logs\nIn [1]: run mnist_cnn.py\nUsing TensorFlow backend.\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nx_train shape: (60000, 1, 28, 28)\n60000 train samples\n10000 test samples\n/u/kruegerd/python_modules/keras/keras/backend/tensorflow_backend.py:2252: UserWarning: Expected no kwargs, you passed 1\nkwargs passed to function are ignored with Tensorflow backend\nwarnings.warn('\\n'.join(msg))\nTrain on 60000 samples, validate on 10000 samples\nEpoch 1/12\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties:\nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:02:00.0\nTotal memory: 11.92GiB\nFree memory: 11.81GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:02:00.0)\n23680/60000 [==========>...................] - ETA: 10s - loss: 0.5787 - acc: 0.8213^C---------------------------------------------------------------------------\nKeyboardInterrupt                         Traceback (most recent call last)\n/u/kruegerd/python_modules/keras/examples/mnist_cnn.py in ()\n65           epochs=epochs,\n66           verbose=1,\n---> 67           validation_data=(x_test, y_test))\n68 score = model.evaluate(x_test, y_test, verbose=0)\n69 print('Test loss:', score[0])\n/u/kruegerd/python_modules/keras/keras/models.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, **kwargs)\n863                               class_weight=class_weight,\n864                               sample_weight=sample_weight,\n--> 865                               initial_epoch=initial_epoch)\n866\n867     def evaluate(self, x, y, batch_size=32, verbose=1,\n/u/kruegerd/python_modules/keras/keras/engine/training.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, **kwargs)\n1499                               val_f=val_f, val_ins=val_ins, shuffle=shuffle,\n1500                               callback_metrics=callback_metrics,\n-> 1501                               initial_epoch=initial_epoch)\n1502\n1503     def evaluate(self, x, y, batch_size=32, verbose=1, sample_weight=None):\n/u/kruegerd/python_modules/keras/keras/engine/training.pyc in _fit_loop(self, f, ins, out_labels, batch_size, epochs, verbose, callbacks, val_f, val_ins, shuffle, callback_metrics, initial_epoch)\n1153                 batch_logs['size'] = len(batch_ids)\n1154                 callbacks.on_batch_begin(batch_index, batch_logs)\n-> 1155                 outs = f(ins_batch)\n1156                 if not isinstance(outs, list):\n1157                     outs = [outs]\n/u/kruegerd/python_modules/keras/keras/backend/tensorflow_backend.pyc in call(self, inputs)\n2229         session = get_session()\n2230         updated = session.run(self.outputs + [self.updates_op],\n-> 2231                               feed_dict=feed_dict)\n2232         return updated[:len(self.outputs)]\n2233\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in run(self, fetches, feed_dict, options, run_metadata)\n765     try:\n766       result = self._run(None, fetches, feed_dict, options_ptr,\n--> 767                          run_metadata_ptr)\n768       if run_metadata:\n769         proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _run(self, handle, fetches, feed_dict, options, run_metadata)\n963     if final_fetches or final_targets:\n964       results = self._do_run(handle, final_targets, final_fetches,\n--> 965                              feed_dict_string, options, run_metadata)\n966     else:\n967       results = []\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _do_run(self, handle, target_list, fetch_list, feed_dict, options, run_metadata)\n1013     if handle is None:\n1014       return self._do_call(_run_fn, self._session, feed_dict, fetch_list,\n-> 1015                            target_list, options, run_metadata)\n1016     else:\n1017       return self._do_call(_prun_fn, self._session, handle, feed_dict,\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _do_call(self, fn, *args)\n1020   def _do_call(self, fn, *args):\n1021     try:\n-> 1022       return fn(*args)\n1023     except errors.OpError as e:\n1024       message = compat.as_text(e.message)\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _run_fn(session, feed_dict, fetch_list, target_list, options, run_metadata)\n1002         return tf_session.TF_Run(session, options,\n1003                                  feed_dict, fetch_list, target_list,\n-> 1004                                  status, run_metadata)\n1005\n1006     def _prun_fn(session, handle, feed_dict, fetch_list):\nKeyboardInterrupt:\nFatal Python error: GC object already tracked\nAborted (core dumped)", "body": "------------------------\r\n\r\n### System information\r\n\r\nPython 2.7.13 :: Anaconda custom (64-bit)\r\nipython :: 5.3.0\r\nlinux :: 3.16.0-4-amd64\r\n\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh gives:\r\n\r\n== cat /etc/issue ===============================================\r\nLinux leto26 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux\r\nVERSION_ID=\"8\"\r\nVERSION=\"8 (jessie)\"\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Debian 4.9.2-10) 4.9.2\r\nCopyright (C) 2014 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux leto26 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nmsgpack-numpy (0.3.9)\r\nnumpy (1.12.1)\r\nnumpydoc (0.6.0)\r\nprotobuf (3.2.0)\r\ntensorflow-gpu (1.0.1)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.0.1\r\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty\r\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty\r\nSanity check: array([1], dtype=int32)\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\nFri May 12 19:38:18 2017       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 375.39                 Driver Version: 375.39                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 1050    Off  | 0000:05:00.0      On |                  N/A |\r\n| 61%   67C    P0    36W /  75W |    145MiB /  1998MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   1  TITAN X (Pascal)    Off  | 0000:06:00.0     Off |                  N/A |\r\n| 54%   84C    P2    68W / 250W |  11530MiB / 12189MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   2  TITAN X (Pascal)    Off  | 0000:09:00.0     Off |                  N/A |\r\n| 45%   78C    P2    85W / 250W |  11820MiB / 12189MiB |     35%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n|    0      1518    G   /usr/bin/X                                     141MiB |\r\n|    1     20850    C   python                                       11527MiB |\r\n|    2     18363    C   python                                       11817MiB |\r\n+-----------------------------------------------------------------------------+\r\n\r\n== cuda libs  ===================================================\r\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7\r\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\r\n/usr/local/cuda-7.5/lib64/libcudart_static.a\r\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18\r\n/usr/local/cuda-7.5/lib/libcudart_static.a\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\r\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44\r\n/usr/local/cuda-8.0/lib64/libcudart_static.a\r\n\r\n== cat /etc/issue ===============================================\r\nLinux leto26 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux\r\nVERSION_ID=\"8\"\r\nVERSION=\"8 (jessie)\"\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Debian 4.9.2-10) 4.9.2\r\nCopyright (C) 2014 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux leto26 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nmsgpack-numpy (0.3.9)\r\nnumpy (1.12.1)\r\nnumpydoc (0.6.0)\r\nprotobuf (3.2.0)\r\ntensorflow-gpu (1.0.1)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.0.1\r\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty\r\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty\r\nSanity check: array([1], dtype=int32)\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\nFri May 12 19:38:27 2017       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 375.39                 Driver Version: 375.39                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 1050    Off  | 0000:05:00.0      On |                  N/A |\r\n| 61%   67C    P0    36W /  75W |    145MiB /  1998MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   1  TITAN X (Pascal)    Off  | 0000:06:00.0     Off |                  N/A |\r\n| 54%   84C    P2    68W / 250W |  11530MiB / 12189MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   2  TITAN X (Pascal)    Off  | 0000:09:00.0     Off |                  N/A |\r\n| 46%   78C    P2   155W / 250W |  11820MiB / 12189MiB |     38%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n|    0      1518    G   /usr/bin/X                                     141MiB |\r\n|    1     20850    C   python                                       11527MiB |\r\n|    2     18363    C   python                                       11817MiB |\r\n+-----------------------------------------------------------------------------+\r\n\r\n== cuda libs  ===================================================\r\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7\r\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\r\n/usr/local/cuda-7.5/lib64/libcudart_static.a\r\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18\r\n/usr/local/cuda-7.5/lib/libcudart_static.a\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\r\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44\r\n/usr/local/cuda-8.0/lib64/libcudart_static.a\r\n\r\n== cat /etc/issue ===============================================\r\nLinux leto06 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux\r\nVERSION_ID=\"8\"\r\nVERSION=\"8 (jessie)\"\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Debian 4.9.2-10) 4.9.2\r\nCopyright (C) 2014 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux leto06 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nmsgpack-numpy (0.3.9)\r\nnumpy (1.12.1)\r\nnumpydoc (0.6.0)\r\nprotobuf (3.2.0)\r\ntensorflow-gpu (1.0.1)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.0.1\r\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty\r\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty\r\nSanity check: array([1], dtype=int32)\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\nFri May 12 19:40:02 2017       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX TIT...  Off  | 0000:02:00.0     Off |                  N/A |\r\n| 22%   46C    P8    18W / 250W |      1MiB / 12206MiB |      0%   E. Process |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+-----------------------------------------------------------------------------+\r\n\r\n== cuda libs  ===================================================\r\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18\r\n/usr/local/cuda-7.5/lib/libcudart_static.a\r\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\r\n/usr/local/cuda-7.5/lib64/libcudart_static.a\r\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7\r\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44\r\n/usr/local/cuda-8.0/lib64/libcudart_static.a\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\r\n\r\n== cat /etc/issue ===============================================\r\nLinux leto06 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux\r\nVERSION_ID=\"8\"\r\nVERSION=\"8 (jessie)\"\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Debian 4.9.2-10) 4.9.2\r\nCopyright (C) 2014 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux leto06 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nmsgpack-numpy (0.3.9)\r\nnumpy (1.12.1)\r\nnumpydoc (0.6.0)\r\nprotobuf (3.2.0)\r\ntensorflow-gpu (1.0.1)\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.0.1\r\ntf.GIT_VERSION = v1.0.0-65-g4763edf-dirty\r\ntf.COMPILER_VERSION = v1.0.0-65-g4763edf-dirty\r\nSanity check: array([1], dtype=int32)\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH /Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/cudnn_v5.1:/Tmp/lisa/os_v5/nccl_8/lib:/Tmp/lisa/os_v5/lib:/Tmp/lisa/os_v5/lib64:/usr/local/lib:/usr/lib64/atlas:/Tmp/lisa/os_v5/lib32:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib:/u/kruegerd/.local/lib64/:/u/kruegerd/.local/lib\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\nFri May 12 19:40:54 2017       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 367.44                 Driver Version: 367.44                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX TIT...  Off  | 0000:02:00.0     Off |                  N/A |\r\n| 22%   47C    P8    18W / 250W |      1MiB / 12206MiB |      0%   E. Process |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+-----------------------------------------------------------------------------+\r\n\r\n== cuda libs  ===================================================\r\n/usr/local/cuda-7.5/lib/libcudart.so.7.5.18\r\n/usr/local/cuda-7.5/lib/libcudart_static.a\r\n/usr/local/cuda-7.5/lib64/libcudart.so.7.5.18\r\n/usr/local/cuda-7.5/lib64/libcudart_static.a\r\n/usr/local/cuda-7.5/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-7.5/doc/man/man7/libcudart.7\r\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.44\r\n/usr/local/cuda-8.0/lib64/libcudart_static.a\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\r\n\r\n\r\n\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\" gives\r\n('v1.0.0-65-g4763edf-dirty', '1.0.1')\r\n\r\n\r\n\r\n### Describe the problem\r\nWhen I run tensorflow code (e.g. keras's mnist_cnn.py) in ipython, errors and Ctrl+C often crashes the interactive ipython session with a core dump or segfault, e.g....\r\n\r\n\r\n### Source code / logs\r\n\r\nIn [1]: run mnist_cnn.py \r\nUsing TensorFlow backend.\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\nx_train shape: (60000, 1, 28, 28)\r\n60000 train samples\r\n10000 test samples\r\n/u/kruegerd/python_modules/keras/keras/backend/tensorflow_backend.py:2252: UserWarning: Expected no kwargs, you passed 1\r\nkwargs passed to function are ignored with Tensorflow backend\r\n  warnings.warn('\\n'.join(msg))\r\nTrain on 60000 samples, validate on 10000 samples\r\nEpoch 1/12\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \r\nname: GeForce GTX TITAN X\r\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\r\npciBusID 0000:02:00.0\r\nTotal memory: 11.92GiB\r\nFree memory: 11.81GiB\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:02:00.0)\r\n23680/60000 [==========>...................] - ETA: 10s - loss: 0.5787 - acc: 0.8213^C---------------------------------------------------------------------------\r\nKeyboardInterrupt                         Traceback (most recent call last)\r\n/u/kruegerd/python_modules/keras/examples/mnist_cnn.py in <module>()\r\n     65           epochs=epochs,\r\n     66           verbose=1,\r\n---> 67           validation_data=(x_test, y_test))\r\n     68 score = model.evaluate(x_test, y_test, verbose=0)\r\n     69 print('Test loss:', score[0])\r\n\r\n/u/kruegerd/python_modules/keras/keras/models.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, **kwargs)\r\n    863                               class_weight=class_weight,\r\n    864                               sample_weight=sample_weight,\r\n--> 865                               initial_epoch=initial_epoch)\r\n    866 \r\n    867     def evaluate(self, x, y, batch_size=32, verbose=1,\r\n\r\n/u/kruegerd/python_modules/keras/keras/engine/training.pyc in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, **kwargs)\r\n   1499                               val_f=val_f, val_ins=val_ins, shuffle=shuffle,\r\n   1500                               callback_metrics=callback_metrics,\r\n-> 1501                               initial_epoch=initial_epoch)\r\n   1502 \r\n   1503     def evaluate(self, x, y, batch_size=32, verbose=1, sample_weight=None):\r\n\r\n/u/kruegerd/python_modules/keras/keras/engine/training.pyc in _fit_loop(self, f, ins, out_labels, batch_size, epochs, verbose, callbacks, val_f, val_ins, shuffle, callback_metrics, initial_epoch)\r\n   1153                 batch_logs['size'] = len(batch_ids)\r\n   1154                 callbacks.on_batch_begin(batch_index, batch_logs)\r\n-> 1155                 outs = f(ins_batch)\r\n   1156                 if not isinstance(outs, list):\r\n   1157                     outs = [outs]\r\n\r\n/u/kruegerd/python_modules/keras/keras/backend/tensorflow_backend.pyc in __call__(self, inputs)\r\n   2229         session = get_session()\r\n   2230         updated = session.run(self.outputs + [self.updates_op],\r\n-> 2231                               feed_dict=feed_dict)\r\n   2232         return updated[:len(self.outputs)]\r\n   2233 \r\n\r\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in run(self, fetches, feed_dict, options, run_metadata)\r\n    765     try:\r\n    766       result = self._run(None, fetches, feed_dict, options_ptr,\r\n--> 767                          run_metadata_ptr)\r\n    768       if run_metadata:\r\n    769         proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\r\n\r\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _run(self, handle, fetches, feed_dict, options, run_metadata)\r\n    963     if final_fetches or final_targets:\r\n    964       results = self._do_run(handle, final_targets, final_fetches,\r\n--> 965                              feed_dict_string, options, run_metadata)\r\n    966     else:\r\n    967       results = []\r\n\r\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _do_run(self, handle, target_list, fetch_list, feed_dict, options, run_metadata)\r\n   1013     if handle is None:\r\n   1014       return self._do_call(_run_fn, self._session, feed_dict, fetch_list,\r\n-> 1015                            target_list, options, run_metadata)\r\n   1016     else:\r\n   1017       return self._do_call(_prun_fn, self._session, handle, feed_dict,\r\n\r\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _do_call(self, fn, *args)\r\n   1020   def _do_call(self, fn, *args):\r\n   1021     try:\r\n-> 1022       return fn(*args)\r\n   1023     except errors.OpError as e:\r\n   1024       message = compat.as_text(e.message)\r\n\r\n/u/kruegerd/.local/lib/python2.7/site-packages/tensorflow/python/client/session.pyc in _run_fn(session, feed_dict, fetch_list, target_list, options, run_metadata)\r\n   1002         return tf_session.TF_Run(session, options,\r\n   1003                                  feed_dict, fetch_list, target_list,\r\n-> 1004                                  status, run_metadata)\r\n   1005 \r\n   1006     def _prun_fn(session, handle, feed_dict, fetch_list):\r\n\r\nKeyboardInterrupt: \r\n\r\nFatal Python error: GC object already tracked\r\nAborted (core dumped)\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18300", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18300/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18300/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18300/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18300", "id": 312127111, "node_id": "MDU6SXNzdWUzMTIxMjcxMTE=", "number": 18300, "title": "Thread limits are not respected in latest tf-nightly build.", "user": {"login": "robieta", "id": 13089297, "node_id": "MDQ6VXNlcjEzMDg5Mjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/13089297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robieta", "html_url": "https://github.com/robieta", "followers_url": "https://api.github.com/users/robieta/followers", "following_url": "https://api.github.com/users/robieta/following{/other_user}", "gists_url": "https://api.github.com/users/robieta/gists{/gist_id}", "starred_url": "https://api.github.com/users/robieta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robieta/subscriptions", "organizations_url": "https://api.github.com/users/robieta/orgs", "repos_url": "https://api.github.com/users/robieta/repos", "events_url": "https://api.github.com/users/robieta/events{/privacy}", "received_events_url": "https://api.github.com/users/robieta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-04-06T21:36:53Z", "updated_at": "2018-04-19T23:48:17Z", "closed_at": "2018-04-18T15:54:01Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes. My minimal example is as follows:</li>\n</ul>\n<pre><code>import tensorflow as tf\n\nconfig = tf.ConfigProto(\n    inter_op_parallelism_threads=1,\n    intra_op_parallelism_threads=1,\n)\n\nwith tf.Session(config=config) as sess:\n  a = tf.random_uniform((25000, 25000))\n\n  a_sq = tf.matmul(a, a)\n  a_sq.eval()\n</code></pre>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nGoobuntu desktop.</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\ntf-nightly (see below)</li>\n<li><strong>Python version</strong>:<br>\n3.5.3</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.</p>\n<p>When I run the minimal example provided above with tf-nightly==1.8.0.dev20180404, everything works correctly. It saturates one CPU core and leaves the rest unused. However, when run with tf-nightly==1.8.0.dev20180405 TensorFlow consumes all 8 cores.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes. My minimal example is as follows:\n\nimport tensorflow as tf\n\nconfig = tf.ConfigProto(\n    inter_op_parallelism_threads=1,\n    intra_op_parallelism_threads=1,\n)\n\nwith tf.Session(config=config) as sess:\n  a = tf.random_uniform((25000, 25000))\n\n  a_sq = tf.matmul(a, a)\n  a_sq.eval()\n\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nGoobuntu desktop.\nTensorFlow installed from (source or binary):\ntf-nightly (see below)\nPython version:\n3.5.3\n\nDescribe the problem\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\nWhen I run the minimal example provided above with tf-nightly==1.8.0.dev20180404, everything works correctly. It saturates one CPU core and leaves the rest unused. However, when run with tf-nightly==1.8.0.dev20180405 TensorFlow consumes all 8 cores.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes. My minimal example is as follows:\r\n```\r\nimport tensorflow as tf\r\n\r\nconfig = tf.ConfigProto(\r\n    inter_op_parallelism_threads=1,\r\n    intra_op_parallelism_threads=1,\r\n)\r\n\r\nwith tf.Session(config=config) as sess:\r\n  a = tf.random_uniform((25000, 25000))\r\n\r\n  a_sq = tf.matmul(a, a)\r\n  a_sq.eval()\r\n```\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nGoobuntu desktop.\r\n- **TensorFlow installed from (source or binary)**:\r\ntf-nightly (see below)\r\n- **Python version**: \r\n3.5.3\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nWhen I run the minimal example provided above with tf-nightly==1.8.0.dev20180404, everything works correctly. It saturates one CPU core and leaves the rest unused. However, when run with tf-nightly==1.8.0.dev20180405 TensorFlow consumes all 8 cores.\r\n"}
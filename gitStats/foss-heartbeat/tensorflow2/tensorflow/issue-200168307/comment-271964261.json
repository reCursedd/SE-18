{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/271964261", "html_url": "https://github.com/tensorflow/tensorflow/issues/6795#issuecomment-271964261", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6795", "id": 271964261, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTk2NDI2MQ==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-11T19:09:40Z", "updated_at": "2017-01-11T19:09:40Z", "author_association": "CONTRIBUTOR", "body_html": "<p>From a look at the error message, it seems to be failing when compiling a part of the protobuf library (viz. the Python extension that uses the optimized C++ implementation, which is the target <code>\"//:python/google/protobuf/pyext/_message.so\"</code> in <a href=\"https://github.com/google/protobuf/blob/228d242c583fb4e0dde17f0a52899f995d85c200/BUILD#L612\">protobuf's <code>BUILD</code> file</a>). The CMake build doesn't use this extension.</p>\n<p>It looks like this feature is enabled by <a href=\"https://github.com/tensorflow/tensorflow/blob/b9d8d70f951d39e6c13bce704f95954c06211f93/tools/bazel.rc.template#L14\">this line in <code>tensorflow/tools/bazel.rc.template</code></a>.</p>\n<p>Can you try adding <code>--define=use_fast_cpp_protos=false</code> to your <code>bazel build</code> command, and see if that fixes things?</p>", "body_text": "From a look at the error message, it seems to be failing when compiling a part of the protobuf library (viz. the Python extension that uses the optimized C++ implementation, which is the target \"//:python/google/protobuf/pyext/_message.so\" in protobuf's BUILD file). The CMake build doesn't use this extension.\nIt looks like this feature is enabled by this line in tensorflow/tools/bazel.rc.template.\nCan you try adding --define=use_fast_cpp_protos=false to your bazel build command, and see if that fixes things?", "body": "From a look at the error message, it seems to be failing when compiling a part of the protobuf library (viz. the Python extension that uses the optimized C++ implementation, which is the target `\"//:python/google/protobuf/pyext/_message.so\"` in [protobuf's `BUILD` file](https://github.com/google/protobuf/blob/228d242c583fb4e0dde17f0a52899f995d85c200/BUILD#L612)). The CMake build doesn't use this extension.\r\n\r\nIt looks like this feature is enabled by [this line in `tensorflow/tools/bazel.rc.template`](https://github.com/tensorflow/tensorflow/blob/b9d8d70f951d39e6c13bce704f95954c06211f93/tools/bazel.rc.template#L14).\r\n\r\nCan you try adding `--define=use_fast_cpp_protos=false` to your `bazel build` command, and see if that fixes things?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298152811", "html_url": "https://github.com/tensorflow/tensorflow/issues/7951#issuecomment-298152811", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7951", "id": 298152811, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODE1MjgxMQ==", "user": {"login": "sjperkins", "id": 3530212, "node_id": "MDQ6VXNlcjM1MzAyMTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3530212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjperkins", "html_url": "https://github.com/sjperkins", "followers_url": "https://api.github.com/users/sjperkins/followers", "following_url": "https://api.github.com/users/sjperkins/following{/other_user}", "gists_url": "https://api.github.com/users/sjperkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjperkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjperkins/subscriptions", "organizations_url": "https://api.github.com/users/sjperkins/orgs", "repos_url": "https://api.github.com/users/sjperkins/repos", "events_url": "https://api.github.com/users/sjperkins/events{/privacy}", "received_events_url": "https://api.github.com/users/sjperkins/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-29T07:23:43Z", "updated_at": "2017-04-29T07:23:43Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">Would it be possible for numpy to share buffers with tensorflow variables\nwhen they are returned from a session run?\n\nI realise this will probably raise all sorts of mutability and state\nissues, but these should be avoidable by setting the WRITABLE flag on the\nreturned numpy arrays to false.\n\n\n\n\nOn 29 Apr 2017 1:37 am, \"Vijay Vasudevan\" &lt;notifications@github.com&gt; wrote:\n\n<a class=\"user-mention\" href=\"https://github.com/eamartin\">@eamartin</a> &lt;<a href=\"https://github.com/eamartin\">https://github.com/eamartin</a>&gt; there have been a number of changes\nsince the beginning of March by <a class=\"user-mention\" href=\"https://github.com/alextp\">@alextp</a> &lt;<a href=\"https://github.com/alextp\">https://github.com/alextp</a>&gt; to\nspeed up feed_dict; when the memory is aligned with 16 bytes, I think we\nshare buffers with numpy, so nightly releases may be faster for you.\n\nThe 16 byte alignment issue comes from Eigen, unfortunately, which requires\nthe beginning of the memory addresses to be aligned with 16 bytes. I'm not\nsure why Eigen was not written to pad the first and last \"packets\" so it\nwouldn't matter. :/\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\n&lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"210920003\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7951\" href=\"https://github.com/tensorflow/tensorflow/issues/7951#issuecomment-298129805\">#7951 (comment)</a>&gt;,\nor mute the thread\n&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ADXd5AD4yuTBPXo8pp-uvVbr9QyYnJhDks5r0nhMgaJpZM4MO9tN\">https://github.com/notifications/unsubscribe-auth/ADXd5AD4yuTBPXo8pp-uvVbr9QyYnJhDks5r0nhMgaJpZM4MO9tN</a>&gt;\n.</div>", "body_text": "Would it be possible for numpy to share buffers with tensorflow variables\nwhen they are returned from a session run?\n\nI realise this will probably raise all sorts of mutability and state\nissues, but these should be avoidable by setting the WRITABLE flag on the\nreturned numpy arrays to false.\n\n\n\n\nOn 29 Apr 2017 1:37 am, \"Vijay Vasudevan\" <notifications@github.com> wrote:\n\n@eamartin <https://github.com/eamartin> there have been a number of changes\nsince the beginning of March by @alextp <https://github.com/alextp> to\nspeed up feed_dict; when the memory is aligned with 16 bytes, I think we\nshare buffers with numpy, so nightly releases may be faster for you.\n\nThe 16 byte alignment issue comes from Eigen, unfortunately, which requires\nthe beginning of the memory addresses to be aligned with 16 bytes. I'm not\nsure why Eigen was not written to pad the first and last \"packets\" so it\nwouldn't matter. :/\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\n<#7951 (comment)>,\nor mute the thread\n<https://github.com/notifications/unsubscribe-auth/ADXd5AD4yuTBPXo8pp-uvVbr9QyYnJhDks5r0nhMgaJpZM4MO9tN>\n.", "body": "Would it be possible for numpy to share buffers with tensorflow variables\nwhen they are returned from a session run?\n\nI realise this will probably raise all sorts of mutability and state\nissues, but these should be avoidable by setting the WRITABLE flag on the\nreturned numpy arrays to false.\n\n\n\n\nOn 29 Apr 2017 1:37 am, \"Vijay Vasudevan\" <notifications@github.com> wrote:\n\n@eamartin <https://github.com/eamartin> there have been a number of changes\nsince the beginning of March by @alextp <https://github.com/alextp> to\nspeed up feed_dict; when the memory is aligned with 16 bytes, I think we\nshare buffers with numpy, so nightly releases may be faster for you.\n\nThe 16 byte alignment issue comes from Eigen, unfortunately, which requires\nthe beginning of the memory addresses to be aligned with 16 bytes. I'm not\nsure why Eigen was not written to pad the first and last \"packets\" so it\nwouldn't matter. :/\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\n<https://github.com/tensorflow/tensorflow/issues/7951#issuecomment-298129805>,\nor mute the thread\n<https://github.com/notifications/unsubscribe-auth/ADXd5AD4yuTBPXo8pp-uvVbr9QyYnJhDks5r0nhMgaJpZM4MO9tN>\n.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/308789560", "html_url": "https://github.com/tensorflow/tensorflow/issues/7951#issuecomment-308789560", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7951", "id": 308789560, "node_id": "MDEyOklzc3VlQ29tbWVudDMwODc4OTU2MA==", "user": {"login": "guillaumekln", "id": 4805513, "node_id": "MDQ6VXNlcjQ4MDU1MTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4805513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guillaumekln", "html_url": "https://github.com/guillaumekln", "followers_url": "https://api.github.com/users/guillaumekln/followers", "following_url": "https://api.github.com/users/guillaumekln/following{/other_user}", "gists_url": "https://api.github.com/users/guillaumekln/gists{/gist_id}", "starred_url": "https://api.github.com/users/guillaumekln/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guillaumekln/subscriptions", "organizations_url": "https://api.github.com/users/guillaumekln/orgs", "repos_url": "https://api.github.com/users/guillaumekln/repos", "events_url": "https://api.github.com/users/guillaumekln/events{/privacy}", "received_events_url": "https://api.github.com/users/guillaumekln/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-15T16:11:03Z", "updated_at": "2017-06-15T16:11:03Z", "author_association": "CONTRIBUTOR", "body_html": "<p>For sequence data, it is common to batch sequences with same (or similar) lengths. This is usually achieved by simply sorting the dataset based on sequence length. However, this does not seem possible to achieve with the current API (if yes, please let me know how to do it).</p>\n<p>It would be nice so see something in this flavor:</p>\n<div class=\"highlight highlight-source-python\"><pre>dataset <span class=\"pl-k\">=</span> dataset.sort(<span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">a</span>, <span class=\"pl-smi\">b</span>: tf.shape(a)[<span class=\"pl-c1\">0</span>] <span class=\"pl-k\">&lt;</span> tf.shape(b)[<span class=\"pl-c1\">0</span>], <span class=\"pl-v\">buffer_size</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">10000</span>)</pre></div>\n<p>which will sort items by chunk of 10000 (similar to <code>dataset.shuffle</code>) using the given comparison function.</p>", "body_text": "For sequence data, it is common to batch sequences with same (or similar) lengths. This is usually achieved by simply sorting the dataset based on sequence length. However, this does not seem possible to achieve with the current API (if yes, please let me know how to do it).\nIt would be nice so see something in this flavor:\ndataset = dataset.sort(lambda a, b: tf.shape(a)[0] < tf.shape(b)[0], buffer_size=10000)\nwhich will sort items by chunk of 10000 (similar to dataset.shuffle) using the given comparison function.", "body": "For sequence data, it is common to batch sequences with same (or similar) lengths. This is usually achieved by simply sorting the dataset based on sequence length. However, this does not seem possible to achieve with the current API (if yes, please let me know how to do it).\r\n\r\nIt would be nice so see something in this flavor:\r\n\r\n```python\r\ndataset = dataset.sort(lambda a, b: tf.shape(a)[0] < tf.shape(b)[0], buffer_size=10000)\r\n```\r\n\r\nwhich will sort items by chunk of 10000 (similar to `dataset.shuffle`) using the given comparison function."}
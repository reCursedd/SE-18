{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/302905656", "html_url": "https://github.com/tensorflow/tensorflow/issues/7951#issuecomment-302905656", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7951", "id": 302905656, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjkwNTY1Ng==", "user": {"login": "vonclites", "id": 4926264, "node_id": "MDQ6VXNlcjQ5MjYyNjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4926264?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vonclites", "html_url": "https://github.com/vonclites", "followers_url": "https://api.github.com/users/vonclites/followers", "following_url": "https://api.github.com/users/vonclites/following{/other_user}", "gists_url": "https://api.github.com/users/vonclites/gists{/gist_id}", "starred_url": "https://api.github.com/users/vonclites/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vonclites/subscriptions", "organizations_url": "https://api.github.com/users/vonclites/orgs", "repos_url": "https://api.github.com/users/vonclites/repos", "events_url": "https://api.github.com/users/vonclites/events{/privacy}", "received_events_url": "https://api.github.com/users/vonclites/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-20T23:43:04Z", "updated_at": "2017-05-21T00:28:53Z", "author_association": "NONE", "body_html": "<p>Edit: Sorry, it totally works. I just realized it exits the session context entirely, but the program keeps running.  The .end() calls on hooks work as well.  <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=226553\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jimfleming\">@jimfleming</a> you're right again ;)</p>\n<p><del>I'm not having success with the monitored session suggestion. The program simply exits without even reporting the exception.</del></p>\n<pre><code>with tf.train.MonitoredTrainingSession() as sess:\n    while not sess.should_stop():\n        data = sess.run(next_batch)\n    print('stopped')\n</code></pre>\n<p>the above code prints nothing, just exits after attempting to run past the last batch. However, the following will print \"hit exception\" forever, unless <code>break</code> is used.</p>\n<pre><code>with tf.train.MonitoredTrainingSession() as sess:\n    while not sess.should_stop():\n        try:\n            data = sess.run(next_batch)\n        except tf.errors.OutOfRangeError:\n            print('hit exception')\n    print('stopped')\n</code></pre>\n<p><del>Not sure if I should make a feature request or bug report?</del></p>", "body_text": "Edit: Sorry, it totally works. I just realized it exits the session context entirely, but the program keeps running.  The .end() calls on hooks work as well.  @jimfleming you're right again ;)\nI'm not having success with the monitored session suggestion. The program simply exits without even reporting the exception.\nwith tf.train.MonitoredTrainingSession() as sess:\n    while not sess.should_stop():\n        data = sess.run(next_batch)\n    print('stopped')\n\nthe above code prints nothing, just exits after attempting to run past the last batch. However, the following will print \"hit exception\" forever, unless break is used.\nwith tf.train.MonitoredTrainingSession() as sess:\n    while not sess.should_stop():\n        try:\n            data = sess.run(next_batch)\n        except tf.errors.OutOfRangeError:\n            print('hit exception')\n    print('stopped')\n\nNot sure if I should make a feature request or bug report?", "body": "Edit: Sorry, it totally works. I just realized it exits the session context entirely, but the program keeps running.  The .end() calls on hooks work as well.  @jimfleming you're right again ;)\r\n\r\n~~I'm not having success with the monitored session suggestion. The program simply exits without even reporting the exception.~~\r\n```\r\nwith tf.train.MonitoredTrainingSession() as sess:\r\n    while not sess.should_stop():\r\n        data = sess.run(next_batch)\r\n    print('stopped')\r\n```\r\nthe above code prints nothing, just exits after attempting to run past the last batch. However, the following will print \"hit exception\" forever, unless `break` is used.\r\n\r\n```\r\nwith tf.train.MonitoredTrainingSession() as sess:\r\n    while not sess.should_stop():\r\n        try:\r\n            data = sess.run(next_batch)\r\n        except tf.errors.OutOfRangeError:\r\n            print('hit exception')\r\n    print('stopped')\r\n```\r\n\r\n~~Not sure if I should make a feature request or bug report?~~ "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/325897921", "html_url": "https://github.com/tensorflow/tensorflow/issues/7951#issuecomment-325897921", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7951", "id": 325897921, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTg5NzkyMQ==", "user": {"login": "tocab", "id": 1671312, "node_id": "MDQ6VXNlcjE2NzEzMTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1671312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tocab", "html_url": "https://github.com/tocab", "followers_url": "https://api.github.com/users/tocab/followers", "following_url": "https://api.github.com/users/tocab/following{/other_user}", "gists_url": "https://api.github.com/users/tocab/gists{/gist_id}", "starred_url": "https://api.github.com/users/tocab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tocab/subscriptions", "organizations_url": "https://api.github.com/users/tocab/orgs", "repos_url": "https://api.github.com/users/tocab/repos", "events_url": "https://api.github.com/users/tocab/events{/privacy}", "received_events_url": "https://api.github.com/users/tocab/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-30T06:44:07Z", "updated_at": "2017-08-30T07:44:01Z", "author_association": "NONE", "body_html": "<p>I don't know if I'm right here, but I have a question about the dataset API. My dataset contains one column with sequences and one with sequence length which i want treat different, because i want to pad the sequences. Is it possible to address a single column in the dataset so that it is treated different from the other column? E.g.:</p>\n<div class=\"highlight highlight-source-python\"><pre>two_column_dataset <span class=\"pl-k\">=</span> <span class=\"pl-c1\">...</span> <span class=\"pl-c\"><span class=\"pl-c\">#</span> This contains the column sequence and sequence length</span>\nfirst_column_dataset <span class=\"pl-k\">=</span> two_column_dataset[<span class=\"pl-c1\">0</span>].padded_batch(<span class=\"pl-c1\">64</span>, <span class=\"pl-c1\">...</span>) <span class=\"pl-c\"><span class=\"pl-c\">#</span> Pad only first column</span>\nsecond_column_dataset <span class=\"pl-k\">=</span> two_column_dataset[<span class=\"pl-c1\">1</span>].batch(<span class=\"pl-c1\">64</span>) <span class=\"pl-c\"><span class=\"pl-c\">#</span> Get corresponding sequence length for sequences</span>\ntwo_column_dataset <span class=\"pl-k\">=</span> Dataset.zip((first_column_dataset, second_column_dataset))</pre></div>\n<p>Edit: After writing this, i found it out:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">flat_map_func</span>(<span class=\"pl-smi\">sequence</span>, <span class=\"pl-smi\">sequence_length</span>):\n    first_column_dataset <span class=\"pl-k\">=</span> Dataset.from_tensors(sequence).padded_batch(<span class=\"pl-c1\">64</span>, <span class=\"pl-c1\">...</span>)\n    second_column_dataset <span class=\"pl-k\">=</span> Dataset.from_tensors(sequence_length).padded_batch(<span class=\"pl-c1\">64</span>)\n    zipped_dataset <span class=\"pl-k\">=</span> Dataset.zip((first_column_dataset, second_column_dataset))\n    <span class=\"pl-k\">return</span> zipped_dataset\n\ntwo_column_dataset <span class=\"pl-k\">=</span> two_column_dataset.flat_map(flat_map_func)</pre></div>", "body_text": "I don't know if I'm right here, but I have a question about the dataset API. My dataset contains one column with sequences and one with sequence length which i want treat different, because i want to pad the sequences. Is it possible to address a single column in the dataset so that it is treated different from the other column? E.g.:\ntwo_column_dataset = ... # This contains the column sequence and sequence length\nfirst_column_dataset = two_column_dataset[0].padded_batch(64, ...) # Pad only first column\nsecond_column_dataset = two_column_dataset[1].batch(64) # Get corresponding sequence length for sequences\ntwo_column_dataset = Dataset.zip((first_column_dataset, second_column_dataset))\nEdit: After writing this, i found it out:\ndef flat_map_func(sequence, sequence_length):\n    first_column_dataset = Dataset.from_tensors(sequence).padded_batch(64, ...)\n    second_column_dataset = Dataset.from_tensors(sequence_length).padded_batch(64)\n    zipped_dataset = Dataset.zip((first_column_dataset, second_column_dataset))\n    return zipped_dataset\n\ntwo_column_dataset = two_column_dataset.flat_map(flat_map_func)", "body": "I don't know if I'm right here, but I have a question about the dataset API. My dataset contains one column with sequences and one with sequence length which i want treat different, because i want to pad the sequences. Is it possible to address a single column in the dataset so that it is treated different from the other column? E.g.:\r\n\r\n```python\r\ntwo_column_dataset = ... # This contains the column sequence and sequence length\r\nfirst_column_dataset = two_column_dataset[0].padded_batch(64, ...) # Pad only first column\r\nsecond_column_dataset = two_column_dataset[1].batch(64) # Get corresponding sequence length for sequences\r\ntwo_column_dataset = Dataset.zip((first_column_dataset, second_column_dataset))\r\n```\r\n\r\nEdit: After writing this, i found it out:\r\n\r\n```python\r\ndef flat_map_func(sequence, sequence_length):\r\n    first_column_dataset = Dataset.from_tensors(sequence).padded_batch(64, ...)\r\n    second_column_dataset = Dataset.from_tensors(sequence_length).padded_batch(64)\r\n    zipped_dataset = Dataset.zip((first_column_dataset, second_column_dataset))\r\n    return zipped_dataset\r\n\r\ntwo_column_dataset = two_column_dataset.flat_map(flat_map_func)\r\n```"}
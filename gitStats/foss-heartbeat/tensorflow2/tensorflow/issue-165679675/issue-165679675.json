{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3322", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3322/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3322/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3322/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3322", "id": 165679675, "node_id": "MDU6SXNzdWUxNjU2Nzk2NzU=", "number": 3322, "title": "Wrong type in rnn function", "user": {"login": "raduk", "id": 3809388, "node_id": "MDQ6VXNlcjM4MDkzODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3809388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raduk", "html_url": "https://github.com/raduk", "followers_url": "https://api.github.com/users/raduk/followers", "following_url": "https://api.github.com/users/raduk/following{/other_user}", "gists_url": "https://api.github.com/users/raduk/gists{/gist_id}", "starred_url": "https://api.github.com/users/raduk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raduk/subscriptions", "organizations_url": "https://api.github.com/users/raduk/orgs", "repos_url": "https://api.github.com/users/raduk/repos", "events_url": "https://api.github.com/users/raduk/events{/privacy}", "received_events_url": "https://api.github.com/users/raduk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-07-14T23:15:40Z", "updated_at": "2016-07-15T22:08:42Z", "closed_at": "2016-07-15T22:08:42Z", "author_association": "NONE", "body_html": "<p>I think the type of <code>zero_output</code> in line 135 in <a href=\"https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/python/ops/rnn.py#L135\">(rnn.py)</a> should be <code>dtype</code> and not <code>inputs[0].dtype</code> as it is right now. If the cell output is a float, this will trigger an exception in the select statement in <code>_rnn_step</code> function in line <a href=\"https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/python/ops/rnn.py#L298\">(298)</a> of the type</p>\n<p><code>TypeError: Input 'e' of 'Select' Op has type float32 that does not match type int32 of argument 't'.</code></p>\n<p>when the inputs of the cells are int. I don't have a short piece of code to reproduce this, but if needed I can produce one.</p>", "body_text": "I think the type of zero_output in line 135 in (rnn.py) should be dtype and not inputs[0].dtype as it is right now. If the cell output is a float, this will trigger an exception in the select statement in _rnn_step function in line (298) of the type\nTypeError: Input 'e' of 'Select' Op has type float32 that does not match type int32 of argument 't'.\nwhen the inputs of the cells are int. I don't have a short piece of code to reproduce this, but if needed I can produce one.", "body": "I think the type of `zero_output` in line 135 in [(rnn.py)](https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/python/ops/rnn.py#L135) should be `dtype` and not `inputs[0].dtype` as it is right now. If the cell output is a float, this will trigger an exception in the select statement in `_rnn_step` function in line [(298)](https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/python/ops/rnn.py#L298) of the type \n\n`TypeError: Input 'e' of 'Select' Op has type float32 that does not match type int32 of argument 't'.`\n\nwhen the inputs of the cells are int. I don't have a short piece of code to reproduce this, but if needed I can produce one.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9506", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9506/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9506/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9506/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9506", "id": 224982614, "node_id": "MDU6SXNzdWUyMjQ5ODI2MTQ=", "number": 9506, "title": "No supported kernel for GPU devices is available for assigning a variable of int32 type", "user": {"login": "jia-kai", "id": 1916678, "node_id": "MDQ6VXNlcjE5MTY2Nzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1916678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jia-kai", "html_url": "https://github.com/jia-kai", "followers_url": "https://api.github.com/users/jia-kai/followers", "following_url": "https://api.github.com/users/jia-kai/following{/other_user}", "gists_url": "https://api.github.com/users/jia-kai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jia-kai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jia-kai/subscriptions", "organizations_url": "https://api.github.com/users/jia-kai/orgs", "repos_url": "https://api.github.com/users/jia-kai/repos", "events_url": "https://api.github.com/users/jia-kai/events{/privacy}", "received_events_url": "https://api.github.com/users/jia-kai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2017-04-28T05:22:02Z", "updated_at": "2018-11-10T03:54:35Z", "closed_at": "2018-11-10T03:54:34Z", "author_association": "NONE", "body_html": "<p><strong>tensorflow version</strong>  v1.1.0-rc0-61-g1ec6ed5<br>\n<strong>code to reproduce</strong></p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-c\"><span class=\"pl-c\">#</span>!/usr/bin/env python3</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> -*- coding: utf-8 -*-</span>\n\n<span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-c1\">print</span>(tf.<span class=\"pl-c1\">GIT_VERSION</span>, tf.<span class=\"pl-c1\">VERSION</span>)\n\n<span class=\"pl-k\">for</span> device <span class=\"pl-k\">in</span> [<span class=\"pl-s\"><span class=\"pl-pds\">'</span>cpu<span class=\"pl-pds\">'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>gpu<span class=\"pl-pds\">'</span></span>]:\n    <span class=\"pl-c1\">print</span>(device)\n    <span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/<span class=\"pl-c1\">{}</span>:0<span class=\"pl-pds\">'</span></span>.format(device)):\n        var <span class=\"pl-k\">=</span> tf.get_variable(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>var<span class=\"pl-c1\">{}</span><span class=\"pl-pds\">'</span></span>.format(device), <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">1</span>], <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>int32<span class=\"pl-pds\">'</span></span>)\n        vari <span class=\"pl-k\">=</span> tf.assign(var, [<span class=\"pl-c1\">23</span>])\n\n    sess <span class=\"pl-k\">=</span> tf.Session()\n    sess.run(vari)</pre></div>\n<p><strong>error</strong></p>\n<pre><code>tensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device to node 'vargpu': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\n</code></pre>\n<p>This should be caused by <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/framework/register_types.h#L171\">TF_CALL_GPU_NUMBER_TYPES</a> only iterating over float types, and it is used to <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/dense_update_ops.cc#L174\">generate the assign kernels</a>. However <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/framework/register_types.h#L154\">TF_CALL_NUMBER_TYPES</a> iterates over all types including integers. Is this asymmetry a deliberate design choice?</p>", "body_text": "tensorflow version  v1.1.0-rc0-61-g1ec6ed5\ncode to reproduce\n#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport tensorflow as tf\nprint(tf.GIT_VERSION, tf.VERSION)\n\nfor device in ['cpu', 'gpu']:\n    print(device)\n    with tf.device('/{}:0'.format(device)):\n        var = tf.get_variable('var{}'.format(device), shape=[1], dtype='int32')\n        vari = tf.assign(var, [23])\n\n    sess = tf.Session()\n    sess.run(vari)\nerror\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device to node 'vargpu': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\n\nThis should be caused by TF_CALL_GPU_NUMBER_TYPES only iterating over float types, and it is used to generate the assign kernels. However TF_CALL_NUMBER_TYPES iterates over all types including integers. Is this asymmetry a deliberate design choice?", "body": "**tensorflow version**  v1.1.0-rc0-61-g1ec6ed5\r\n**code to reproduce**\r\n```py\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n\r\nimport tensorflow as tf\r\nprint(tf.GIT_VERSION, tf.VERSION)\r\n\r\nfor device in ['cpu', 'gpu']:\r\n    print(device)\r\n    with tf.device('/{}:0'.format(device)):\r\n        var = tf.get_variable('var{}'.format(device), shape=[1], dtype='int32')\r\n        vari = tf.assign(var, [23])\r\n\r\n    sess = tf.Session()\r\n    sess.run(vari)\r\n```\r\n**error**\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device to node 'vargpu': Could not satisfy explicit device specification '/device:GPU:0' because no supported kernel for GPU devices is available.\r\n```\r\n\r\nThis should be caused by [TF_CALL_GPU_NUMBER_TYPES](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/framework/register_types.h#L171) only iterating over float types, and it is used to [generate the assign kernels](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/dense_update_ops.cc#L174). However [TF_CALL_NUMBER_TYPES](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/framework/register_types.h#L154) iterates over all types including integers. Is this asymmetry a deliberate design choice?"}
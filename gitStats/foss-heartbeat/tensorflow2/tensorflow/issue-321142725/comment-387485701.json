{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/387485701", "html_url": "https://github.com/tensorflow/tensorflow/issues/19143#issuecomment-387485701", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19143", "id": 387485701, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQ4NTcwMQ==", "user": {"login": "Hoeze", "id": 1200058, "node_id": "MDQ6VXNlcjEyMDAwNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1200058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hoeze", "html_url": "https://github.com/Hoeze", "followers_url": "https://api.github.com/users/Hoeze/followers", "following_url": "https://api.github.com/users/Hoeze/following{/other_user}", "gists_url": "https://api.github.com/users/Hoeze/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hoeze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hoeze/subscriptions", "organizations_url": "https://api.github.com/users/Hoeze/orgs", "repos_url": "https://api.github.com/users/Hoeze/repos", "events_url": "https://api.github.com/users/Hoeze/events{/privacy}", "received_events_url": "https://api.github.com/users/Hoeze/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-08T17:47:42Z", "updated_at": "2018-05-08T17:57:04Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> :<br>\nThe question on Stackoverflow should be seen as an workaround.<br>\nI just realized, why my depending operations still did not get updated values:<br>\nCurrently, <strong>all</strong> operations depending on <code>iterator.get_next</code> have to be defined inside the while_loop's <code>body_op</code>.</p>\n<p>What I'd like to request as a new feature would be the following <code>step_op</code>:</p>\n<pre><code>a = iterator.get_next()\n...\nloss = tf.reduce_sum(some_tensor_depending_on_a)\n...\ntf.while_loop(...):\n    with tf.control_dependency([iterator.step_op()]):\n        minimize(loss)\n</code></pre>\n<p>In my opinion this is a much cleaner option as it removes the necessity to define the whole model inside a while_loop.</p>", "body_text": "@mrry :\nThe question on Stackoverflow should be seen as an workaround.\nI just realized, why my depending operations still did not get updated values:\nCurrently, all operations depending on iterator.get_next have to be defined inside the while_loop's body_op.\nWhat I'd like to request as a new feature would be the following step_op:\na = iterator.get_next()\n...\nloss = tf.reduce_sum(some_tensor_depending_on_a)\n...\ntf.while_loop(...):\n    with tf.control_dependency([iterator.step_op()]):\n        minimize(loss)\n\nIn my opinion this is a much cleaner option as it removes the necessity to define the whole model inside a while_loop.", "body": "@mrry :\r\nThe question on Stackoverflow should be seen as an workaround.\r\nI just realized, why my depending operations still did not get updated values:\r\nCurrently, **all** operations depending on `iterator.get_next` have to be defined inside the while_loop's `body_op`.\r\n\r\nWhat I'd like to request as a new feature would be the following `step_op`:\r\n```\r\na = iterator.get_next()\r\n...\r\nloss = tf.reduce_sum(some_tensor_depending_on_a)\r\n...\r\ntf.while_loop(...):\r\n    with tf.control_dependency([iterator.step_op()]):\r\n        minimize(loss)\r\n```\r\n\r\nIn my opinion this is a much cleaner option as it removes the necessity to define the whole model inside a while_loop."}
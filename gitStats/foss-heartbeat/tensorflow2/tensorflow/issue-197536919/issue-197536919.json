{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6496", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6496/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6496/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6496/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6496", "id": 197536919, "node_id": "MDU6SXNzdWUxOTc1MzY5MTk=", "number": 6496, "title": "tensorflow + opencv webcam hangs", "user": {"login": "milinddeore", "id": 1849168, "node_id": "MDQ6VXNlcjE4NDkxNjg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1849168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/milinddeore", "html_url": "https://github.com/milinddeore", "followers_url": "https://api.github.com/users/milinddeore/followers", "following_url": "https://api.github.com/users/milinddeore/following{/other_user}", "gists_url": "https://api.github.com/users/milinddeore/gists{/gist_id}", "starred_url": "https://api.github.com/users/milinddeore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/milinddeore/subscriptions", "organizations_url": "https://api.github.com/users/milinddeore/orgs", "repos_url": "https://api.github.com/users/milinddeore/repos", "events_url": "https://api.github.com/users/milinddeore/events{/privacy}", "received_events_url": "https://api.github.com/users/milinddeore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-12-26T05:08:46Z", "updated_at": "2017-12-13T13:08:36Z", "closed_at": "2017-01-17T19:18:41Z", "author_association": "NONE", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>Yes posted on stackoverflow but no help and believe this is an issue to report: <a href=\"http://stackoverflow.com/questions/41276085/tensorflow-opencv-webcam-hangs\" rel=\"nofollow\">http://stackoverflow.com/questions/41276085/tensorflow-opencv-webcam-hangs</a></p>\n<h3>Environment info</h3>\n<p>Operating System: Environment: MAC machine, running my code inside virtual machine with guest OS: Ubuntu 14.4 LTS.</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>I am compiling openCV within tensorflow workspace under examples. My WORKSPACE and opencv.BUILD file look similar to the one mentioned <a href=\"http://stackoverflow.com/questions/34984290/building-opencv-code-using-bazel\" rel=\"nofollow\">here</a></p>\n<p>My BUILD file for the opencv + tensorflow project looks like following:</p>\n<pre><code>package(default_visibility = [\"//tensorflow:internal\"])\n\nlicenses([\"notice\"])  # Apache 2.0\n\nexports_files([\"LICENSE\"])\n\ncc_binary(\n    name = \"label_image\",\n    srcs = [\n        \"main.cc\",\n    ],\n    linkopts = [\"-lm\"],\n    copts = [\"-DWITH_FFMPEG=OFF\"],\n    deps = [\n        \"//tensorflow/cc:cc_ops\",\n        \"//tensorflow/core:framework_internal\",\n        \"//tensorflow/core:tensorflow\",\n        \"@opencv//:opencv\"\n    ],\n)\n\nfilegroup(\n    name = \"all_files\",\n    srcs = glob(\n        [\"**/*\"],\n        exclude = [\n            \"**/METADATA\",\n            \"**/OWNERS\",\n            \"bin/**\",\n            \"gen/**\",\n        ],\n    ),\n    visibility = [\"//tensorflow:__subpackages__\"],\n)\n</code></pre>\n<p>If i disable tensorflow dependences (and also comment the tensorflow related code). I can see that the webcam is captures properly. like this:</p>\n<pre><code>deps = [\n            #\"//tensorflow/cc:cc_ops\",\n            #\"//tensorflow/core:framework_internal\",\n            #\"//tensorflow/core:tensorflow\",\n            \"@opencv//:opencv\"\n        ],\n</code></pre>\n<p>But if i still keep the code commented/uncommented and also keep the tensorflow dependences my webcam hangs at VideoCapture::read()</p>\n<p>By default, opencv use FFMPEG codec and i tried enabling and disabling FFMPEG. Can someone please help me why when tensorflow library is compiled in the project makes my openCV read() hangs?</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Later, i tried having OpenCV code in c++ and tensorflow in python and integrate them using <a href=\"https://docs.python.org/3.4/extending/embedding.html\" rel=\"nofollow\">embedded python</a>. This is working fine.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>Attached inline.</p>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nYes posted on stackoverflow but no help and believe this is an issue to report: http://stackoverflow.com/questions/41276085/tensorflow-opencv-webcam-hangs\nEnvironment info\nOperating System: Environment: MAC machine, running my code inside virtual machine with guest OS: Ubuntu 14.4 LTS.\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nI am compiling openCV within tensorflow workspace under examples. My WORKSPACE and opencv.BUILD file look similar to the one mentioned here\nMy BUILD file for the opencv + tensorflow project looks like following:\npackage(default_visibility = [\"//tensorflow:internal\"])\n\nlicenses([\"notice\"])  # Apache 2.0\n\nexports_files([\"LICENSE\"])\n\ncc_binary(\n    name = \"label_image\",\n    srcs = [\n        \"main.cc\",\n    ],\n    linkopts = [\"-lm\"],\n    copts = [\"-DWITH_FFMPEG=OFF\"],\n    deps = [\n        \"//tensorflow/cc:cc_ops\",\n        \"//tensorflow/core:framework_internal\",\n        \"//tensorflow/core:tensorflow\",\n        \"@opencv//:opencv\"\n    ],\n)\n\nfilegroup(\n    name = \"all_files\",\n    srcs = glob(\n        [\"**/*\"],\n        exclude = [\n            \"**/METADATA\",\n            \"**/OWNERS\",\n            \"bin/**\",\n            \"gen/**\",\n        ],\n    ),\n    visibility = [\"//tensorflow:__subpackages__\"],\n)\n\nIf i disable tensorflow dependences (and also comment the tensorflow related code). I can see that the webcam is captures properly. like this:\ndeps = [\n            #\"//tensorflow/cc:cc_ops\",\n            #\"//tensorflow/core:framework_internal\",\n            #\"//tensorflow/core:tensorflow\",\n            \"@opencv//:opencv\"\n        ],\n\nBut if i still keep the code commented/uncommented and also keep the tensorflow dependences my webcam hangs at VideoCapture::read()\nBy default, opencv use FFMPEG codec and i tried enabling and disabling FFMPEG. Can someone please help me why when tensorflow library is compiled in the project makes my openCV read() hangs?\nWhat other attempted solutions have you tried?\nLater, i tried having OpenCV code in c++ and tensorflow in python and integrate them using embedded python. This is working fine.\nLogs or other output that would be helpful\nAttached inline.", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nYes posted on stackoverflow but no help and believe this is an issue to report: http://stackoverflow.com/questions/41276085/tensorflow-opencv-webcam-hangs\r\n\r\n### Environment info\r\nOperating System: Environment: MAC machine, running my code inside virtual machine with guest OS: Ubuntu 14.4 LTS.\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nI am compiling openCV within tensorflow workspace under examples. My WORKSPACE and opencv.BUILD file look similar to the one mentioned [here](http://stackoverflow.com/questions/34984290/building-opencv-code-using-bazel) \r\n\r\nMy BUILD file for the opencv + tensorflow project looks like following:\r\n\r\n```\r\npackage(default_visibility = [\"//tensorflow:internal\"])\r\n\r\nlicenses([\"notice\"])  # Apache 2.0\r\n\r\nexports_files([\"LICENSE\"])\r\n\r\ncc_binary(\r\n    name = \"label_image\",\r\n    srcs = [\r\n        \"main.cc\",\r\n    ],\r\n    linkopts = [\"-lm\"],\r\n    copts = [\"-DWITH_FFMPEG=OFF\"],\r\n    deps = [\r\n        \"//tensorflow/cc:cc_ops\",\r\n        \"//tensorflow/core:framework_internal\",\r\n        \"//tensorflow/core:tensorflow\",\r\n        \"@opencv//:opencv\"\r\n    ],\r\n)\r\n\r\nfilegroup(\r\n    name = \"all_files\",\r\n    srcs = glob(\r\n        [\"**/*\"],\r\n        exclude = [\r\n            \"**/METADATA\",\r\n            \"**/OWNERS\",\r\n            \"bin/**\",\r\n            \"gen/**\",\r\n        ],\r\n    ),\r\n    visibility = [\"//tensorflow:__subpackages__\"],\r\n)\r\n```\r\n\r\nIf i disable tensorflow dependences (and also comment the tensorflow related code). I can see that the webcam is captures properly. like this:\r\n\r\n```\r\ndeps = [\r\n            #\"//tensorflow/cc:cc_ops\",\r\n            #\"//tensorflow/core:framework_internal\",\r\n            #\"//tensorflow/core:tensorflow\",\r\n            \"@opencv//:opencv\"\r\n        ],\r\n```\r\n\r\nBut if i still keep the code commented/uncommented and also keep the tensorflow dependences my webcam hangs at VideoCapture::read()\r\n\r\nBy default, opencv use FFMPEG codec and i tried enabling and disabling FFMPEG. Can someone please help me why when tensorflow library is compiled in the project makes my openCV read() hangs?\r\n\r\n### What other attempted solutions have you tried?\r\nLater, i tried having OpenCV code in c++ and tensorflow in python and integrate them using [embedded python](https://docs.python.org/3.4/extending/embedding.html). This is working fine. \r\n\r\n\r\n### Logs or other output that would be helpful\r\nAttached inline. "}
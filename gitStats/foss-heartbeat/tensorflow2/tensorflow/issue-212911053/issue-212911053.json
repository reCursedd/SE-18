{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8224", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8224/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8224/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8224/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8224", "id": 212911053, "node_id": "MDU6SXNzdWUyMTI5MTEwNTM=", "number": 8224, "title": "Feature request: numeric type promotion", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "josh11b", "id": 15258583, "node_id": "MDQ6VXNlcjE1MjU4NTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/15258583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josh11b", "html_url": "https://github.com/josh11b", "followers_url": "https://api.github.com/users/josh11b/followers", "following_url": "https://api.github.com/users/josh11b/following{/other_user}", "gists_url": "https://api.github.com/users/josh11b/gists{/gist_id}", "starred_url": "https://api.github.com/users/josh11b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josh11b/subscriptions", "organizations_url": "https://api.github.com/users/josh11b/orgs", "repos_url": "https://api.github.com/users/josh11b/repos", "events_url": "https://api.github.com/users/josh11b/events{/privacy}", "received_events_url": "https://api.github.com/users/josh11b/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "josh11b", "id": 15258583, "node_id": "MDQ6VXNlcjE1MjU4NTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/15258583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josh11b", "html_url": "https://github.com/josh11b", "followers_url": "https://api.github.com/users/josh11b/followers", "following_url": "https://api.github.com/users/josh11b/following{/other_user}", "gists_url": "https://api.github.com/users/josh11b/gists{/gist_id}", "starred_url": "https://api.github.com/users/josh11b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josh11b/subscriptions", "organizations_url": "https://api.github.com/users/josh11b/orgs", "repos_url": "https://api.github.com/users/josh11b/repos", "events_url": "https://api.github.com/users/josh11b/events{/privacy}", "received_events_url": "https://api.github.com/users/josh11b/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2017-03-09T01:42:22Z", "updated_at": "2018-02-08T01:14:17Z", "closed_at": "2018-02-08T01:14:17Z", "author_association": "CONTRIBUTOR", "body_html": "<p>TensorFlow does some numeric type promotion.<br>\nIt should do more of it.</p>\n<p>Examples:</p>\n<pre><code># this works, 2 is int32, gets promoted to float32\ntf.pow(2.,2)\n\n# this fails, apply_op promotion logic is not smart enough\ntf.pow(2,2.)\n\n# this fails, [2,] is converted to int32 but needs to be int64\ntf.sparse_placeholder(tf.float32, [2,])\n\n# this works, numpy arrays are int64 by default\ntf.sparse_placeholder(tf.float32, np.array([2,]))\n</code></pre>\n<p>This came up in:<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"207382324\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7483\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7483/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7483\">#7483</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"204894552\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7220\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7220/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7220\">#7220</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"204432490\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7170\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7170/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7170\">#7170</a></p>\n<p>cc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15258583\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/josh11b\">@josh11b</a> who wrote type promotion logic in OpDefLibrary.apply_op<br>\ncc <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1450614\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/suharshs\">@suharshs</a> who changed the default to treat Python integer as int32</p>", "body_text": "TensorFlow does some numeric type promotion.\nIt should do more of it.\nExamples:\n# this works, 2 is int32, gets promoted to float32\ntf.pow(2.,2)\n\n# this fails, apply_op promotion logic is not smart enough\ntf.pow(2,2.)\n\n# this fails, [2,] is converted to int32 but needs to be int64\ntf.sparse_placeholder(tf.float32, [2,])\n\n# this works, numpy arrays are int64 by default\ntf.sparse_placeholder(tf.float32, np.array([2,]))\n\nThis came up in:\n#7483\n#7220\n#7170\ncc @josh11b who wrote type promotion logic in OpDefLibrary.apply_op\ncc @suharshs who changed the default to treat Python integer as int32", "body": "TensorFlow does some numeric type promotion.\r\nIt should do more of it.\r\n\r\nExamples:\r\n```\r\n# this works, 2 is int32, gets promoted to float32\r\ntf.pow(2.,2)\r\n\r\n# this fails, apply_op promotion logic is not smart enough\r\ntf.pow(2,2.)\r\n\r\n# this fails, [2,] is converted to int32 but needs to be int64\r\ntf.sparse_placeholder(tf.float32, [2,])\r\n\r\n# this works, numpy arrays are int64 by default\r\ntf.sparse_placeholder(tf.float32, np.array([2,]))\r\n```\r\n\r\nThis came up in:\r\nhttps://github.com/tensorflow/tensorflow/issues/7483\r\nhttps://github.com/tensorflow/tensorflow/issues/7220\r\nhttps://github.com/tensorflow/tensorflow/issues/7170\r\n\r\ncc @josh11b who wrote type promotion logic in OpDefLibrary.apply_op\r\ncc @suharshs who changed the default to treat Python integer as int32"}
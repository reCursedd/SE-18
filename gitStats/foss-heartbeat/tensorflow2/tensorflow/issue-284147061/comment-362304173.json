{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/362304173", "html_url": "https://github.com/tensorflow/tensorflow/issues/15585#issuecomment-362304173", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15585", "id": 362304173, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjMwNDE3Mw==", "user": {"login": "KillPinguin", "id": 11447989, "node_id": "MDQ6VXNlcjExNDQ3OTg5", "avatar_url": "https://avatars3.githubusercontent.com/u/11447989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KillPinguin", "html_url": "https://github.com/KillPinguin", "followers_url": "https://api.github.com/users/KillPinguin/followers", "following_url": "https://api.github.com/users/KillPinguin/following{/other_user}", "gists_url": "https://api.github.com/users/KillPinguin/gists{/gist_id}", "starred_url": "https://api.github.com/users/KillPinguin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KillPinguin/subscriptions", "organizations_url": "https://api.github.com/users/KillPinguin/orgs", "repos_url": "https://api.github.com/users/KillPinguin/repos", "events_url": "https://api.github.com/users/KillPinguin/events{/privacy}", "received_events_url": "https://api.github.com/users/KillPinguin/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-01T15:38:29Z", "updated_at": "2018-02-01T15:38:29Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1002405\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yzhwang\">@yzhwang</a><br>\nsetting TF_MATMUL_AUTOTUNE_ENABLE also does not change the behavior.<br>\nCode:</p>\n<pre><code>$ export TF_MATMUL_AUTOTUNE_ENABLE=1\n$ export TF_FP16_MATMUL_USE_FP32_COMPUTE=0\n$ python -c \"import os; print os.environ['TF_FP16_MATMUL_USE_FP32_COMPUTE']\"\n0\n$ python -c \"import os; print os.environ['TF_MATMUL_AUTOTUNE_ENABLE']\"\n1\n$ nvprof ./Matrixmul.py --size 16000 --use_fp16\n</code></pre>\n<p>Output:</p>\n<pre><code>[...]\n==126141== Profiling application: python ./Matrixmul.py --size 16000 --use_fp16\n==126141== Profiling result:\n            Type  Time(%)      Time     Calls       Avg       Min       Max  Name\n GPU activities:   96.77%  8.17152s        10  817.15ms  816.77ms  817.74ms  maxwell_fp16_sgemm_fp16_128x128_nn\n[...]\n</code></pre>", "body_text": "@yzhwang\nsetting TF_MATMUL_AUTOTUNE_ENABLE also does not change the behavior.\nCode:\n$ export TF_MATMUL_AUTOTUNE_ENABLE=1\n$ export TF_FP16_MATMUL_USE_FP32_COMPUTE=0\n$ python -c \"import os; print os.environ['TF_FP16_MATMUL_USE_FP32_COMPUTE']\"\n0\n$ python -c \"import os; print os.environ['TF_MATMUL_AUTOTUNE_ENABLE']\"\n1\n$ nvprof ./Matrixmul.py --size 16000 --use_fp16\n\nOutput:\n[...]\n==126141== Profiling application: python ./Matrixmul.py --size 16000 --use_fp16\n==126141== Profiling result:\n            Type  Time(%)      Time     Calls       Avg       Min       Max  Name\n GPU activities:   96.77%  8.17152s        10  817.15ms  816.77ms  817.74ms  maxwell_fp16_sgemm_fp16_128x128_nn\n[...]", "body": "@yzhwang \r\nsetting TF_MATMUL_AUTOTUNE_ENABLE also does not change the behavior.\r\nCode:\r\n```\r\n$ export TF_MATMUL_AUTOTUNE_ENABLE=1\r\n$ export TF_FP16_MATMUL_USE_FP32_COMPUTE=0\r\n$ python -c \"import os; print os.environ['TF_FP16_MATMUL_USE_FP32_COMPUTE']\"\r\n0\r\n$ python -c \"import os; print os.environ['TF_MATMUL_AUTOTUNE_ENABLE']\"\r\n1\r\n$ nvprof ./Matrixmul.py --size 16000 --use_fp16\r\n```\r\nOutput:\r\n```\r\n[...]\r\n==126141== Profiling application: python ./Matrixmul.py --size 16000 --use_fp16\r\n==126141== Profiling result:\r\n            Type  Time(%)      Time     Calls       Avg       Min       Max  Name\r\n GPU activities:   96.77%  8.17152s        10  817.15ms  816.77ms  817.74ms  maxwell_fp16_sgemm_fp16_128x128_nn\r\n[...]\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23659", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23659/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23659/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23659/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23659", "id": 379463083, "node_id": "MDU6SXNzdWUzNzk0NjMwODM=", "number": 23659, "title": "TPU: keras support for multiples inputs layers", "user": {"login": "davidpham87", "id": 7083286, "node_id": "MDQ6VXNlcjcwODMyODY=", "avatar_url": "https://avatars3.githubusercontent.com/u/7083286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpham87", "html_url": "https://github.com/davidpham87", "followers_url": "https://api.github.com/users/davidpham87/followers", "following_url": "https://api.github.com/users/davidpham87/following{/other_user}", "gists_url": "https://api.github.com/users/davidpham87/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpham87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpham87/subscriptions", "organizations_url": "https://api.github.com/users/davidpham87/orgs", "repos_url": "https://api.github.com/users/davidpham87/repos", "events_url": "https://api.github.com/users/davidpham87/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpham87/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": {"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-10T21:26:07Z", "updated_at": "2018-11-19T20:11:06Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p><em>Please make sure that this is a bug. As per our <a href=\"https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md\">GitHub Policy</a>, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em></p>\n<p><strong>System information</strong></p>\n<ul>\n<li>Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No</li>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colaboratory</li>\n</ul>\n<p><strong>Describe the current behavior</strong></p>\n<p>I am using the functional api of keras models, and TPU does not yet support multiple inputs layers.</p>\n<p><strong>Describe the expected behavior</strong></p>\n<p>It should support multiple inputs models.</p>\n<p><strong>Other info / logs</strong><br>\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.</p>\n<pre><code>/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in _validate_shapes(model)\n   2077   \"\"\"Validate that all layers in `model` have constant shape.\"\"\"\n   2078   for layer in model.layers:\n-&gt; 2079     if isinstance(layer.input_shape, tuple):\n   2080       input_shapes = [layer.input_shape]\n   2081     else:\n\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/base_layer.py in input_shape(self)\n   1351     else:\n   1352       raise AttributeError('The layer \"' + str(self.name) +\n-&gt; 1353                            ' has multiple inbound nodes, '\n   1354                            'with different input shapes. Hence '\n   1355                            'the notion of \"input shape\" is '\n\nAttributeError: The layer \"model_encoder_vgg19 has multiple inbound nodes, with different input shapes. Hence the notion of \"input shape\" is ill-defined for the layer. Use `get_input_shape_at(node_index)` instead.\n</code></pre>\n<p>The issue is at line 2079 of <code>keras_support.py</code> where <code>get_input_shape_at(node_index)</code> should be used instead.</p>", "body_text": "Please make sure that this is a bug. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colaboratory\n\nDescribe the current behavior\nI am using the functional api of keras models, and TPU does not yet support multiple inputs layers.\nDescribe the expected behavior\nIt should support multiple inputs models.\nOther info / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in _validate_shapes(model)\n   2077   \"\"\"Validate that all layers in `model` have constant shape.\"\"\"\n   2078   for layer in model.layers:\n-> 2079     if isinstance(layer.input_shape, tuple):\n   2080       input_shapes = [layer.input_shape]\n   2081     else:\n\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/base_layer.py in input_shape(self)\n   1351     else:\n   1352       raise AttributeError('The layer \"' + str(self.name) +\n-> 1353                            ' has multiple inbound nodes, '\n   1354                            'with different input shapes. Hence '\n   1355                            'the notion of \"input shape\" is '\n\nAttributeError: The layer \"model_encoder_vgg19 has multiple inbound nodes, with different input shapes. Hence the notion of \"input shape\" is ill-defined for the layer. Use `get_input_shape_at(node_index)` instead.\n\nThe issue is at line 2079 of keras_support.py where get_input_shape_at(node_index) should be used instead.", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colaboratory\r\n\r\n**Describe the current behavior**\r\n\r\nI am using the functional api of keras models, and TPU does not yet support multiple inputs layers.\r\n\r\n**Describe the expected behavior**\r\n\r\nIt should support multiple inputs models.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in _validate_shapes(model)\r\n   2077   \"\"\"Validate that all layers in `model` have constant shape.\"\"\"\r\n   2078   for layer in model.layers:\r\n-> 2079     if isinstance(layer.input_shape, tuple):\r\n   2080       input_shapes = [layer.input_shape]\r\n   2081     else:\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/base_layer.py in input_shape(self)\r\n   1351     else:\r\n   1352       raise AttributeError('The layer \"' + str(self.name) +\r\n-> 1353                            ' has multiple inbound nodes, '\r\n   1354                            'with different input shapes. Hence '\r\n   1355                            'the notion of \"input shape\" is '\r\n\r\nAttributeError: The layer \"model_encoder_vgg19 has multiple inbound nodes, with different input shapes. Hence the notion of \"input shape\" is ill-defined for the layer. Use `get_input_shape_at(node_index)` instead.\r\n```\r\nThe issue is at line 2079 of `keras_support.py` where `get_input_shape_at(node_index)` should be used instead. \r\n\r\n"}
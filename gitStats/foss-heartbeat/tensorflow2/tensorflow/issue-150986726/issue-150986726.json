{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2101", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2101/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2101/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2101/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2101", "id": 150986726, "node_id": "MDU6SXNzdWUxNTA5ODY3MjY=", "number": 2101, "title": "TensorFlow_0.8.0 somehow breaks PIL ? ", "user": {"login": "liuyifly06", "id": 13130142, "node_id": "MDQ6VXNlcjEzMTMwMTQy", "avatar_url": "https://avatars3.githubusercontent.com/u/13130142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuyifly06", "html_url": "https://github.com/liuyifly06", "followers_url": "https://api.github.com/users/liuyifly06/followers", "following_url": "https://api.github.com/users/liuyifly06/following{/other_user}", "gists_url": "https://api.github.com/users/liuyifly06/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuyifly06/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuyifly06/subscriptions", "organizations_url": "https://api.github.com/users/liuyifly06/orgs", "repos_url": "https://api.github.com/users/liuyifly06/repos", "events_url": "https://api.github.com/users/liuyifly06/events{/privacy}", "received_events_url": "https://api.github.com/users/liuyifly06/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-04-25T21:31:40Z", "updated_at": "2016-04-26T00:58:08Z", "closed_at": "2016-04-26T00:58:08Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System:</p>\n<pre><code>ubuntu@ip-172-31-32-186:~$ uname -a\nLinux ip-172-31-32-186 3.13.0-48-generic #80-Ubuntu SMP Thu Mar 12 11:16:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n<p>TensorFlow version and installation method:</p>\n<pre><code>ubuntu@ip-172-31-32-186:~$ python -c \"import tensorflow; print(tensorflow.__version__)\"\n0.8.0\n</code></pre>\n<p>I installed with command:<br>\n<code>sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl</code></p>\n<p>My problem: Tensorflow break the PIL image read</p>\n<h3>Steps to reproduce</h3>\n<p>Following command verifies that my PIL works good without importing TensorFlow:</p>\n<pre><code>ubuntu@ip-172-31-32-186:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from PIL import Image\n&gt;&gt;&gt; a = Image.open('bubble-counting/images/original/bubble.jpg')\n&gt;&gt;&gt; b = a.getdata()\n&gt;&gt;&gt; b[0]\n(166, 56, 57)\n</code></pre>\n<p>After importing TensorFlow, same code does not work any more:</p>\n<pre><code>ubuntu@ip-172-31-32-186:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt; from PIL import Image\n&gt;&gt;&gt; a = Image.open('bubble-counting/images/original/bubble.jpg')\n&gt;&gt;&gt; b = a.getdata()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/Image.py\", line 1151, in getdata\n    self.load()\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 235, in load\n    raise_ioerror(e)\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 59, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\n</code></pre>\n<h3>Other info</h3>\n<p><strong>After uninstall TensorFlow0.8 and install TensorFlow0.7.1, the problem disappeared!</strong></p>\n<p>installation code:<br>\n<code>sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl</code></p>\n<pre><code>&gt;&gt;&gt; PIL.VERSION\n'1.1.7'\n&gt;&gt;&gt; pandas.__version__\nu'0.18.0'\n&gt;&gt;&gt; dask.__version__\n'0.8.2'\n&gt;&gt;&gt; numpy.__version__\n'1.11.0'\n&gt;&gt;&gt; scipy.__version__\n'0.17.0'\n</code></pre>\n<p>My questions:</p>\n<ol>\n<li>Can you reproduce the problem ?</li>\n<li>What might be the reason of this problem since I am not familiar with PIL or TensorFlow code ?</li>\n</ol>\n<p>If there were any information you need, pls let me know.</p>", "body_text": "Environment info\nOperating System:\nubuntu@ip-172-31-32-186:~$ uname -a\nLinux ip-172-31-32-186 3.13.0-48-generic #80-Ubuntu SMP Thu Mar 12 11:16:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\nTensorFlow version and installation method:\nubuntu@ip-172-31-32-186:~$ python -c \"import tensorflow; print(tensorflow.__version__)\"\n0.8.0\n\nI installed with command:\nsudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\nMy problem: Tensorflow break the PIL image read\nSteps to reproduce\nFollowing command verifies that my PIL works good without importing TensorFlow:\nubuntu@ip-172-31-32-186:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from PIL import Image\n>>> a = Image.open('bubble-counting/images/original/bubble.jpg')\n>>> b = a.getdata()\n>>> b[0]\n(166, 56, 57)\n\nAfter importing TensorFlow, same code does not work any more:\nubuntu@ip-172-31-32-186:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import tensorflow as tf\n>>> from PIL import Image\n>>> a = Image.open('bubble-counting/images/original/bubble.jpg')\n>>> b = a.getdata()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/Image.py\", line 1151, in getdata\n    self.load()\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 235, in load\n    raise_ioerror(e)\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 59, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\n\nOther info\nAfter uninstall TensorFlow0.8 and install TensorFlow0.7.1, the problem disappeared!\ninstallation code:\nsudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl\n>>> PIL.VERSION\n'1.1.7'\n>>> pandas.__version__\nu'0.18.0'\n>>> dask.__version__\n'0.8.2'\n>>> numpy.__version__\n'1.11.0'\n>>> scipy.__version__\n'0.17.0'\n\nMy questions:\n\nCan you reproduce the problem ?\nWhat might be the reason of this problem since I am not familiar with PIL or TensorFlow code ?\n\nIf there were any information you need, pls let me know.", "body": "### Environment info\n\nOperating System:\n\n```\nubuntu@ip-172-31-32-186:~$ uname -a\nLinux ip-172-31-32-186 3.13.0-48-generic #80-Ubuntu SMP Thu Mar 12 11:16:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nTensorFlow version and installation method:\n\n```\nubuntu@ip-172-31-32-186:~$ python -c \"import tensorflow; print(tensorflow.__version__)\"\n0.8.0\n```\n\nI installed with command:\n`sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl`\n\nMy problem: Tensorflow break the PIL image read\n### Steps to reproduce\n\nFollowing command verifies that my PIL works good without importing TensorFlow:\n\n```\nubuntu@ip-172-31-32-186:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from PIL import Image\n>>> a = Image.open('bubble-counting/images/original/bubble.jpg')\n>>> b = a.getdata()\n>>> b[0]\n(166, 56, 57)\n```\n\nAfter importing TensorFlow, same code does not work any more:\n\n```\nubuntu@ip-172-31-32-186:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import tensorflow as tf\n>>> from PIL import Image\n>>> a = Image.open('bubble-counting/images/original/bubble.jpg')\n>>> b = a.getdata()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/Image.py\", line 1151, in getdata\n    self.load()\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 235, in load\n    raise_ioerror(e)\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 59, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\n```\n### Other info\n\n**After uninstall TensorFlow0.8 and install TensorFlow0.7.1, the problem disappeared!**\n\ninstallation code:\n`sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl`\n\n```\n>>> PIL.VERSION\n'1.1.7'\n>>> pandas.__version__\nu'0.18.0'\n>>> dask.__version__\n'0.8.2'\n>>> numpy.__version__\n'1.11.0'\n>>> scipy.__version__\n'0.17.0'\n```\n\nMy questions:\n1. Can you reproduce the problem ?\n2. What might be the reason of this problem since I am not familiar with PIL or TensorFlow code ?\n\nIf there were any information you need, pls let me know.\n"}
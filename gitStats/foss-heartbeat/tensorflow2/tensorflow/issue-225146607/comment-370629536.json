{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/370629536", "html_url": "https://github.com/tensorflow/tensorflow/issues/9517#issuecomment-370629536", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9517", "id": 370629536, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDYyOTUzNg==", "user": {"login": "JZDSS", "id": 16128794, "node_id": "MDQ6VXNlcjE2MTI4Nzk0", "avatar_url": "https://avatars3.githubusercontent.com/u/16128794?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JZDSS", "html_url": "https://github.com/JZDSS", "followers_url": "https://api.github.com/users/JZDSS/followers", "following_url": "https://api.github.com/users/JZDSS/following{/other_user}", "gists_url": "https://api.github.com/users/JZDSS/gists{/gist_id}", "starred_url": "https://api.github.com/users/JZDSS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JZDSS/subscriptions", "organizations_url": "https://api.github.com/users/JZDSS/orgs", "repos_url": "https://api.github.com/users/JZDSS/repos", "events_url": "https://api.github.com/users/JZDSS/events{/privacy}", "received_events_url": "https://api.github.com/users/JZDSS/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-06T01:33:34Z", "updated_at": "2018-03-06T01:33:34Z", "author_association": "NONE", "body_html": "<pre><code>def net(x):\n\tres = tf.contrib.layers.conv2d(x, 10, [3, 3])\n\t...\n\treturn res\n\nwith tf.device('/CPU:0'):\n\twith tf.name_scope('CPU'):\n\t\tnet(x)\n\nfor i in range(num_gpus):\n\twith tf.device('/GPU:%d' % i):\n\t\twith tf.name_scope('GPU_%d' % i):\n\t\t\twith tf.variable_scope(tf.get_variable_scope(), reuse=True):\n\t\t\t\ty = net(x)\n\t\t\t\tloss = ...\n\t\t\t\tgrad = ...\n</code></pre>\n<p>It works!<br>\n<a href=\"http://jzdss.club/2018/03/04/Multi-GPUs/\" rel=\"nofollow\">http://jzdss.club/2018/03/04/Multi-GPUs/</a></p>", "body_text": "def net(x):\n\tres = tf.contrib.layers.conv2d(x, 10, [3, 3])\n\t...\n\treturn res\n\nwith tf.device('/CPU:0'):\n\twith tf.name_scope('CPU'):\n\t\tnet(x)\n\nfor i in range(num_gpus):\n\twith tf.device('/GPU:%d' % i):\n\t\twith tf.name_scope('GPU_%d' % i):\n\t\t\twith tf.variable_scope(tf.get_variable_scope(), reuse=True):\n\t\t\t\ty = net(x)\n\t\t\t\tloss = ...\n\t\t\t\tgrad = ...\n\nIt works!\nhttp://jzdss.club/2018/03/04/Multi-GPUs/", "body": "```\r\ndef net(x):\r\n\tres = tf.contrib.layers.conv2d(x, 10, [3, 3])\r\n\t...\r\n\treturn res\r\n\r\nwith tf.device('/CPU:0'):\r\n\twith tf.name_scope('CPU'):\r\n\t\tnet(x)\r\n\r\nfor i in range(num_gpus):\r\n\twith tf.device('/GPU:%d' % i):\r\n\t\twith tf.name_scope('GPU_%d' % i):\r\n\t\t\twith tf.variable_scope(tf.get_variable_scope(), reuse=True):\r\n\t\t\t\ty = net(x)\r\n\t\t\t\tloss = ...\r\n\t\t\t\tgrad = ...\r\n```\r\nIt works!\r\n[http://jzdss.club/2018/03/04/Multi-GPUs/](http://jzdss.club/2018/03/04/Multi-GPUs/)"}
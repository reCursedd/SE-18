{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2107", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2107/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2107/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2107/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2107", "id": 151068890, "node_id": "MDU6SXNzdWUxNTEwNjg4OTA=", "number": 2107, "title": "\"CUDNN_STATUS_BAD_PARAM\" raised when running MNIST expert tutorial on GPU", "user": {"login": "amineHorseman", "id": 15238963, "node_id": "MDQ6VXNlcjE1MjM4OTYz", "avatar_url": "https://avatars2.githubusercontent.com/u/15238963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amineHorseman", "html_url": "https://github.com/amineHorseman", "followers_url": "https://api.github.com/users/amineHorseman/followers", "following_url": "https://api.github.com/users/amineHorseman/following{/other_user}", "gists_url": "https://api.github.com/users/amineHorseman/gists{/gist_id}", "starred_url": "https://api.github.com/users/amineHorseman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amineHorseman/subscriptions", "organizations_url": "https://api.github.com/users/amineHorseman/orgs", "repos_url": "https://api.github.com/users/amineHorseman/repos", "events_url": "https://api.github.com/users/amineHorseman/events{/privacy}", "received_events_url": "https://api.github.com/users/amineHorseman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-04-26T08:01:23Z", "updated_at": "2018-02-05T00:07:40Z", "closed_at": "2016-04-26T16:53:21Z", "author_association": "NONE", "body_html": "<p>I tried the code from MNIST expert tutorial and it works only on cpu. When I try to execute it in the gpu I get a session crash.<br>\nThe code for begginers tutorial however works well in both the gpu and cpu.</p>\n<h3>Environment info</h3>\n<ul>\n<li>OS: Ubuntu 16.04</li>\n<li>CUDA: 7.5</li>\n<li>cuDNN: 5</li>\n<li>Pip: 8.1.1</li>\n<li>Python: 2.7.11</li>\n<li>Anaconda:  4.0.0 (64-bit)</li>\n<li>Tensorflow: 0.8.0 (running on conda environment)</li>\n<li>GPU: GeForce GTX 860M</li>\n</ul>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>conda create -n tensorflow python=2.7</li>\n<li>pip install --ignore-installed --upgrade <a href=\"https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl</a></li>\n</ol>\n<h3>What have you tried?</h3>\n<ol>\n<li>I tried the MNIST tutorial for begginer and it works well on both cpu and gpu</li>\n<li>I tried the MNIST tutorial for expert on cpu and it works well</li>\n<li>I tried the MNIST tutorial for expert on gpu and its not working, here's the output:</li>\n</ol>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\nExtracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:900] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: \nname: GeForce GTX 860M\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.0195\npciBusID 0000:01:00.0\nTotal memory: 2.00GiB\nFree memory: 1.67GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:755] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX 860M, pci bus id: 0000:01:00.0)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:427] could not set cudnn filter descriptor: CUDNN_STATUS_BAD_PARAM\nAborted (core dumped)\n</code></pre>\n<h2>Additional information (the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</h2>\n<pre><code>-rw-r--r-- 1 root root  189170 Apr 22 15:05 libcudadevrt.a\nlrwxrwxrwx 1 root root      16 Apr 22 15:05 libcudart.so -&gt; libcudart.so.7.5\nlrwxrwxrwx 1 root root      19 Apr 22 15:05 libcudart.so.7.5 -&gt; libcudart.so.7.5.18\n-rwxr-xr-x 1 root root  311596 Apr 22 15:05 libcudart.so.7.5.18\n-rw-r--r-- 1 root root  558020 Apr 22 15:05 libcudart_static.a\nlrwxrwxrwx 1 root root      17 Apr 22 15:05 libcuinj32.so -&gt; libcuinj32.so.7.5\nlrwxrwxrwx 1 root root      20 Apr 22 15:05 libcuinj32.so.7.5 -&gt; libcuinj32.so.7.5.18\n-rwxr-xr-x 1 root root 5396088 Apr 22 15:05 libcuinj32.so.7.5.18\nlrwxrwxrwx 1 root root       13 Apr 22 16:38 libcudnn.so -&gt; libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Apr 22 16:38 libcudnn.so.5 -&gt; libcudnn.so.5.0.4\n-rwxrwxr-x 1 root root 59823168 Mar 22 10:37 libcudnn.so.5.0.4\n</code></pre>", "body_text": "I tried the code from MNIST expert tutorial and it works only on cpu. When I try to execute it in the gpu I get a session crash.\nThe code for begginers tutorial however works well in both the gpu and cpu.\nEnvironment info\n\nOS: Ubuntu 16.04\nCUDA: 7.5\ncuDNN: 5\nPip: 8.1.1\nPython: 2.7.11\nAnaconda:  4.0.0 (64-bit)\nTensorflow: 0.8.0 (running on conda environment)\nGPU: GeForce GTX 860M\n\nSteps to reproduce\n\nconda create -n tensorflow python=2.7\npip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\n\nWhat have you tried?\n\nI tried the MNIST tutorial for begginer and it works well on both cpu and gpu\nI tried the MNIST tutorial for expert on cpu and it works well\nI tried the MNIST tutorial for expert on gpu and its not working, here's the output:\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\nExtracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:900] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: \nname: GeForce GTX 860M\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.0195\npciBusID 0000:01:00.0\nTotal memory: 2.00GiB\nFree memory: 1.67GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:755] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 860M, pci bus id: 0000:01:00.0)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:427] could not set cudnn filter descriptor: CUDNN_STATUS_BAD_PARAM\nAborted (core dumped)\n\nAdditional information (the output of ls -l /path/to/cuda/lib/libcud*):\n-rw-r--r-- 1 root root  189170 Apr 22 15:05 libcudadevrt.a\nlrwxrwxrwx 1 root root      16 Apr 22 15:05 libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root      19 Apr 22 15:05 libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root  311596 Apr 22 15:05 libcudart.so.7.5.18\n-rw-r--r-- 1 root root  558020 Apr 22 15:05 libcudart_static.a\nlrwxrwxrwx 1 root root      17 Apr 22 15:05 libcuinj32.so -> libcuinj32.so.7.5\nlrwxrwxrwx 1 root root      20 Apr 22 15:05 libcuinj32.so.7.5 -> libcuinj32.so.7.5.18\n-rwxr-xr-x 1 root root 5396088 Apr 22 15:05 libcuinj32.so.7.5.18\nlrwxrwxrwx 1 root root       13 Apr 22 16:38 libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Apr 22 16:38 libcudnn.so.5 -> libcudnn.so.5.0.4\n-rwxrwxr-x 1 root root 59823168 Mar 22 10:37 libcudnn.so.5.0.4", "body": "I tried the code from MNIST expert tutorial and it works only on cpu. When I try to execute it in the gpu I get a session crash.\nThe code for begginers tutorial however works well in both the gpu and cpu.\n### Environment info\n- OS: Ubuntu 16.04\n- CUDA: 7.5\n- cuDNN: 5\n- Pip: 8.1.1\n- Python: 2.7.11\n- Anaconda:  4.0.0 (64-bit)\n- Tensorflow: 0.8.0 (running on conda environment)\n- GPU: GeForce GTX 860M\n### Steps to reproduce\n1. conda create -n tensorflow python=2.7\n2. pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl\n### What have you tried?\n1. I tried the MNIST tutorial for begginer and it works well on both cpu and gpu\n2. I tried the MNIST tutorial for expert on cpu and it works well\n3. I tried the MNIST tutorial for expert on gpu and its not working, here's the output:\n\n```\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\nExtracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:900] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: \nname: GeForce GTX 860M\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.0195\npciBusID 0000:01:00.0\nTotal memory: 2.00GiB\nFree memory: 1.67GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:755] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 860M, pci bus id: 0000:01:00.0)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:427] could not set cudnn filter descriptor: CUDNN_STATUS_BAD_PARAM\nAborted (core dumped)\n```\n## Additional information (the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n```\n-rw-r--r-- 1 root root  189170 Apr 22 15:05 libcudadevrt.a\nlrwxrwxrwx 1 root root      16 Apr 22 15:05 libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root      19 Apr 22 15:05 libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root  311596 Apr 22 15:05 libcudart.so.7.5.18\n-rw-r--r-- 1 root root  558020 Apr 22 15:05 libcudart_static.a\nlrwxrwxrwx 1 root root      17 Apr 22 15:05 libcuinj32.so -> libcuinj32.so.7.5\nlrwxrwxrwx 1 root root      20 Apr 22 15:05 libcuinj32.so.7.5 -> libcuinj32.so.7.5.18\n-rwxr-xr-x 1 root root 5396088 Apr 22 15:05 libcuinj32.so.7.5.18\nlrwxrwxrwx 1 root root       13 Apr 22 16:38 libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Apr 22 16:38 libcudnn.so.5 -> libcudnn.so.5.0.4\n-rwxrwxr-x 1 root root 59823168 Mar 22 10:37 libcudnn.so.5.0.4\n```\n"}
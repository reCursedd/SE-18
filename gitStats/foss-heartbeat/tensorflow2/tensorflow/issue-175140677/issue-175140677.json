{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4216", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4216/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4216/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4216/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4216", "id": 175140677, "node_id": "MDU6SXNzdWUxNzUxNDA2Nzc=", "number": 4216, "title": "Can not load workspace.bzl", "user": {"login": "rizar", "id": 654434, "node_id": "MDQ6VXNlcjY1NDQzNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/654434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rizar", "html_url": "https://github.com/rizar", "followers_url": "https://api.github.com/users/rizar/followers", "following_url": "https://api.github.com/users/rizar/following{/other_user}", "gists_url": "https://api.github.com/users/rizar/gists{/gist_id}", "starred_url": "https://api.github.com/users/rizar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rizar/subscriptions", "organizations_url": "https://api.github.com/users/rizar/orgs", "repos_url": "https://api.github.com/users/rizar/repos", "events_url": "https://api.github.com/users/rizar/events{/privacy}", "received_events_url": "https://api.github.com/users/rizar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-09-06T00:49:29Z", "updated_at": "2016-12-21T09:25:26Z", "closed_at": "2016-12-21T09:25:26Z", "author_association": "NONE", "body_html": "<p>I have a project that I want to build with Bazel, which includes Python code and C++ files. I am trying to use the same approach as in <a href=\"https://github.com/tensorflow/models/tree/master/syntaxnet\">Syntaxnet</a> from the model zoo. I add <code>tensorflow</code> as a submodule to my repository and put the following snippet to my <code>WORKSPACE</code> file:</p>\n<pre><code>local_repository(\n  name = \"org_tensorflow\",\n  path = __workspace_dir__ + \"/tensorflow\",\n)\n\nload('//tensorflow/tensorflow:workspace.bzl', 'tf_workspace')\ntf_workspace(\"tensorflow/\", \"@org_tensorflow\")\n</code></pre>\n<p>which results in an error</p>\n<pre><code>ERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file not found. Unable to load package for '//third_party/gpus:cuda_configure.bzl': BUILD file not found on package path.\n</code></pre>\n<p>The source of the error is clear to me: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/workspace.bzl#L3\">this line</a> contains a <code>load</code> call with a hard-coded path. SyntaxNet uses an older version of Tensorflow that does not contain this line.</p>\n<p>My question is if this is a bug or not. Is this a recommended way of organizing the project that should be compiled with Tensorflow, and if not, should it be used in Syntaxnet model? Or should I just copy the <code>WORKSPACE</code> from Tensorflow's root directory?</p>", "body_text": "I have a project that I want to build with Bazel, which includes Python code and C++ files. I am trying to use the same approach as in Syntaxnet from the model zoo. I add tensorflow as a submodule to my repository and put the following snippet to my WORKSPACE file:\nlocal_repository(\n  name = \"org_tensorflow\",\n  path = __workspace_dir__ + \"/tensorflow\",\n)\n\nload('//tensorflow/tensorflow:workspace.bzl', 'tf_workspace')\ntf_workspace(\"tensorflow/\", \"@org_tensorflow\")\n\nwhich results in an error\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file not found. Unable to load package for '//third_party/gpus:cuda_configure.bzl': BUILD file not found on package path.\n\nThe source of the error is clear to me: this line contains a load call with a hard-coded path. SyntaxNet uses an older version of Tensorflow that does not contain this line.\nMy question is if this is a bug or not. Is this a recommended way of organizing the project that should be compiled with Tensorflow, and if not, should it be used in Syntaxnet model? Or should I just copy the WORKSPACE from Tensorflow's root directory?", "body": "I have a project that I want to build with Bazel, which includes Python code and C++ files. I am trying to use the same approach as in [Syntaxnet](https://github.com/tensorflow/models/tree/master/syntaxnet) from the model zoo. I add `tensorflow` as a submodule to my repository and put the following snippet to my `WORKSPACE` file:\n\n```\nlocal_repository(\n  name = \"org_tensorflow\",\n  path = __workspace_dir__ + \"/tensorflow\",\n)\n\nload('//tensorflow/tensorflow:workspace.bzl', 'tf_workspace')\ntf_workspace(\"tensorflow/\", \"@org_tensorflow\")\n```\n\nwhich results in an error\n\n```\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file not found. Unable to load package for '//third_party/gpus:cuda_configure.bzl': BUILD file not found on package path.\n```\n\nThe source of the error is clear to me: [this line](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/workspace.bzl#L3) contains a `load` call with a hard-coded path. SyntaxNet uses an older version of Tensorflow that does not contain this line. \n\nMy question is if this is a bug or not. Is this a recommended way of organizing the project that should be compiled with Tensorflow, and if not, should it be used in Syntaxnet model? Or should I just copy the `WORKSPACE` from Tensorflow's root directory?\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/386218274", "html_url": "https://github.com/tensorflow/tensorflow/issues/18994#issuecomment-386218274", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18994", "id": 386218274, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjIxODI3NA==", "user": {"login": "oscarriddle", "id": 13745902, "node_id": "MDQ6VXNlcjEzNzQ1OTAy", "avatar_url": "https://avatars0.githubusercontent.com/u/13745902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oscarriddle", "html_url": "https://github.com/oscarriddle", "followers_url": "https://api.github.com/users/oscarriddle/followers", "following_url": "https://api.github.com/users/oscarriddle/following{/other_user}", "gists_url": "https://api.github.com/users/oscarriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/oscarriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oscarriddle/subscriptions", "organizations_url": "https://api.github.com/users/oscarriddle/orgs", "repos_url": "https://api.github.com/users/oscarriddle/repos", "events_url": "https://api.github.com/users/oscarriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/oscarriddle/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-03T07:59:21Z", "updated_at": "2018-05-03T08:09:02Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=10539540\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/samikama\">@samikama</a><br>\nThanks for your reply. That makes sense, so I think it's time to make a conclusion.</p>\n<ol>\n<li>TRT optimization engine can only support the graph def that gained from frozen model. Saved_model cannot be directly loaded and optimized.</li>\n<li>The procedure restore a frozen model, then TRT optimize it, and then save it to saved_model is not feasible.</li>\n<li>Then I tried to restore previously trained frozen model, then TRT optimize it, and then export the optimized graph to a new frozen model. And the new one can be successfully restored and executed. This procedure is OK, though my online Tensorflow serving environment need to be recompiled from utilizing saved_model to frozen_model.</li>\n</ol>\n<p>Thanks for your help and patience.<br>\nCheers~</p>", "body_text": "@samikama\nThanks for your reply. That makes sense, so I think it's time to make a conclusion.\n\nTRT optimization engine can only support the graph def that gained from frozen model. Saved_model cannot be directly loaded and optimized.\nThe procedure restore a frozen model, then TRT optimize it, and then save it to saved_model is not feasible.\nThen I tried to restore previously trained frozen model, then TRT optimize it, and then export the optimized graph to a new frozen model. And the new one can be successfully restored and executed. This procedure is OK, though my online Tensorflow serving environment need to be recompiled from utilizing saved_model to frozen_model.\n\nThanks for your help and patience.\nCheers~", "body": "@samikama \r\nThanks for your reply. That makes sense, so I think it's time to make a conclusion. \r\n\r\n1. TRT optimization engine can only support the graph def that gained from frozen model. Saved_model cannot be directly loaded and optimized. \r\n2. The procedure restore a frozen model, then TRT optimize it, and then save it to saved_model is not feasible.\r\n3. Then I tried to restore previously trained frozen model, then TRT optimize it, and then export the optimized graph to a new frozen model. And the new one can be successfully restored and executed. This procedure is OK, though my online Tensorflow serving environment need to be recompiled from utilizing saved_model to frozen_model.\r\n\r\nThanks for your help and patience.\r\nCheers~"}
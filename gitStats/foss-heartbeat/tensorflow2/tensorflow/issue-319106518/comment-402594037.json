{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/402594037", "html_url": "https://github.com/tensorflow/tensorflow/issues/18994#issuecomment-402594037", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18994", "id": 402594037, "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjU5NDAzNw==", "user": {"login": "caibobit", "id": 27752913, "node_id": "MDQ6VXNlcjI3NzUyOTEz", "avatar_url": "https://avatars1.githubusercontent.com/u/27752913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caibobit", "html_url": "https://github.com/caibobit", "followers_url": "https://api.github.com/users/caibobit/followers", "following_url": "https://api.github.com/users/caibobit/following{/other_user}", "gists_url": "https://api.github.com/users/caibobit/gists{/gist_id}", "starred_url": "https://api.github.com/users/caibobit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caibobit/subscriptions", "organizations_url": "https://api.github.com/users/caibobit/orgs", "repos_url": "https://api.github.com/users/caibobit/repos", "events_url": "https://api.github.com/users/caibobit/events{/privacy}", "received_events_url": "https://api.github.com/users/caibobit/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-05T03:03:57Z", "updated_at": "2018-07-05T03:03:57Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=13745902\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/oscarriddle\">@oscarriddle</a> i tried your solution\uff0cand use the mnist to test ,but the tensorflow_serving can't recognize the forzen graph ,and the error occurs, the following  is the logs:</p>\n<div class=\"highlight highlight-source-shell\"><pre>2018-07-05 18:57:34.846301: I tensorflow_serving/model_servers/main.cc:153] Building single TensorFlow model file config:  model_name: mnist model_base_path: /home/caibo/tmp/mnist_model\n2018-07-05 18:57:34.846479: I tensorflow_serving/model_servers/server_core.cc:459] Adding/updating models.\n2018-07-05 18:57:34.846504: I tensorflow_serving/model_servers/server_core.cc:514]  (Re-)adding model: mnist\n2018-07-05 18:57:34.946753: I tensorflow_serving/core/basic_manager.cc:716] Successfully reserved resources to load servable {name: mnist version: 5}\n2018-07-05 18:57:34.946784: I tensorflow_serving/core/loader_harness.cc:66] Approving load <span class=\"pl-k\">for</span> servable version {name: mnist version: 5}\n2018-07-05 18:57:34.946799: I tensorflow_serving/core/loader_harness.cc:74] Loading servable version {name: mnist version: 5}\n2018-07-05 18:57:34.946819: I external/org_tensorflow/tensorflow/contrib/session_bundle/bundle_shim.cc:360] Attempting to load native SavedModelBundle <span class=\"pl-k\">in</span> bundle-shim from: /home/caibo/tmp/mnist_model/5\n2018-07-05 18:57:34.946837: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:242] Loading SavedModel with tags: { serve }<span class=\"pl-k\">;</span> from: /home/caibo/tmp/mnist_model/5\n2018-07-05 18:57:34.946953: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:291] SavedModel load <span class=\"pl-k\">for</span> tags { serve }<span class=\"pl-k\">;</span> Status: fail. Took 113 microseconds.\n2018-07-05 18:57:34.946973: E tensorflow_serving/util/retrier.cc:37] Loading servable: {name: mnist version: 5} failed: Not found: Could not find meta graph def matching supplied tags: { serve }. To inspect available tag-sets <span class=\"pl-k\">in</span> the SavedModel, please use the SavedModel CLI: <span class=\"pl-s\"><span class=\"pl-pds\">`</span>saved_model_cli<span class=\"pl-pds\">`</span></span></pre></div>\n<hr>\n<div class=\"highlight highlight-source-shell\"><pre>caibo@ubuntu:<span class=\"pl-k\">~</span>/PycharmProjects/untitled1/my/output$ ls\nfrozen_graph.pb  log.txt  trt_mnist_fp16.pb  trt_mnist_fp32.pb</pre></div>\n<p>and also i convert the trt_graph to the saved_model.pb and put the into the model_base_path ,still the same error ,  that is \" could not find meta graph def matching supplied tags\"</p>\n<p>i wonder if  the way i bazel build the tensorflow serving is wrong , or something else.</p>", "body_text": "@oscarriddle i tried your solution\uff0cand use the mnist to test ,but the tensorflow_serving can't recognize the forzen graph ,and the error occurs, the following  is the logs:\n2018-07-05 18:57:34.846301: I tensorflow_serving/model_servers/main.cc:153] Building single TensorFlow model file config:  model_name: mnist model_base_path: /home/caibo/tmp/mnist_model\n2018-07-05 18:57:34.846479: I tensorflow_serving/model_servers/server_core.cc:459] Adding/updating models.\n2018-07-05 18:57:34.846504: I tensorflow_serving/model_servers/server_core.cc:514]  (Re-)adding model: mnist\n2018-07-05 18:57:34.946753: I tensorflow_serving/core/basic_manager.cc:716] Successfully reserved resources to load servable {name: mnist version: 5}\n2018-07-05 18:57:34.946784: I tensorflow_serving/core/loader_harness.cc:66] Approving load for servable version {name: mnist version: 5}\n2018-07-05 18:57:34.946799: I tensorflow_serving/core/loader_harness.cc:74] Loading servable version {name: mnist version: 5}\n2018-07-05 18:57:34.946819: I external/org_tensorflow/tensorflow/contrib/session_bundle/bundle_shim.cc:360] Attempting to load native SavedModelBundle in bundle-shim from: /home/caibo/tmp/mnist_model/5\n2018-07-05 18:57:34.946837: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:242] Loading SavedModel with tags: { serve }; from: /home/caibo/tmp/mnist_model/5\n2018-07-05 18:57:34.946953: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:291] SavedModel load for tags { serve }; Status: fail. Took 113 microseconds.\n2018-07-05 18:57:34.946973: E tensorflow_serving/util/retrier.cc:37] Loading servable: {name: mnist version: 5} failed: Not found: Could not find meta graph def matching supplied tags: { serve }. To inspect available tag-sets in the SavedModel, please use the SavedModel CLI: `saved_model_cli`\n\ncaibo@ubuntu:~/PycharmProjects/untitled1/my/output$ ls\nfrozen_graph.pb  log.txt  trt_mnist_fp16.pb  trt_mnist_fp32.pb\nand also i convert the trt_graph to the saved_model.pb and put the into the model_base_path ,still the same error ,  that is \" could not find meta graph def matching supplied tags\"\ni wonder if  the way i bazel build the tensorflow serving is wrong , or something else.", "body": "@oscarriddle i tried your solution\uff0cand use the mnist to test ,but the tensorflow_serving can't recognize the forzen graph ,and the error occurs, the following  is the logs:\r\n```shell\r\n2018-07-05 18:57:34.846301: I tensorflow_serving/model_servers/main.cc:153] Building single TensorFlow model file config:  model_name: mnist model_base_path: /home/caibo/tmp/mnist_model\r\n2018-07-05 18:57:34.846479: I tensorflow_serving/model_servers/server_core.cc:459] Adding/updating models.\r\n2018-07-05 18:57:34.846504: I tensorflow_serving/model_servers/server_core.cc:514]  (Re-)adding model: mnist\r\n2018-07-05 18:57:34.946753: I tensorflow_serving/core/basic_manager.cc:716] Successfully reserved resources to load servable {name: mnist version: 5}\r\n2018-07-05 18:57:34.946784: I tensorflow_serving/core/loader_harness.cc:66] Approving load for servable version {name: mnist version: 5}\r\n2018-07-05 18:57:34.946799: I tensorflow_serving/core/loader_harness.cc:74] Loading servable version {name: mnist version: 5}\r\n2018-07-05 18:57:34.946819: I external/org_tensorflow/tensorflow/contrib/session_bundle/bundle_shim.cc:360] Attempting to load native SavedModelBundle in bundle-shim from: /home/caibo/tmp/mnist_model/5\r\n2018-07-05 18:57:34.946837: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:242] Loading SavedModel with tags: { serve }; from: /home/caibo/tmp/mnist_model/5\r\n2018-07-05 18:57:34.946953: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:291] SavedModel load for tags { serve }; Status: fail. Took 113 microseconds.\r\n2018-07-05 18:57:34.946973: E tensorflow_serving/util/retrier.cc:37] Loading servable: {name: mnist version: 5} failed: Not found: Could not find meta graph def matching supplied tags: { serve }. To inspect available tag-sets in the SavedModel, please use the SavedModel CLI: `saved_model_cli`\r\n```\r\n----------------------------------------------------------------\r\n```shell\r\ncaibo@ubuntu:~/PycharmProjects/untitled1/my/output$ ls\r\nfrozen_graph.pb  log.txt  trt_mnist_fp16.pb  trt_mnist_fp32.pb\r\n```\r\nand also i convert the trt_graph to the saved_model.pb and put the into the model_base_path ,still the same error ,  that is \" could not find meta graph def matching supplied tags\"\r\n\r\ni wonder if  the way i bazel build the tensorflow serving is wrong , or something else."}
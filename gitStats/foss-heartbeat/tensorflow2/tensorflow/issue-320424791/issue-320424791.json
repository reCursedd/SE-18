{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19093", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19093/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19093/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19093/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19093", "id": 320424791, "node_id": "MDU6SXNzdWUzMjA0MjQ3OTE=", "number": 19093, "title": "tf.Variable uses about twice the memory (on the GPU)", "user": {"login": "yunhailuo", "id": 19319675, "node_id": "MDQ6VXNlcjE5MzE5Njc1", "avatar_url": "https://avatars3.githubusercontent.com/u/19319675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yunhailuo", "html_url": "https://github.com/yunhailuo", "followers_url": "https://api.github.com/users/yunhailuo/followers", "following_url": "https://api.github.com/users/yunhailuo/following{/other_user}", "gists_url": "https://api.github.com/users/yunhailuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/yunhailuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yunhailuo/subscriptions", "organizations_url": "https://api.github.com/users/yunhailuo/orgs", "repos_url": "https://api.github.com/users/yunhailuo/repos", "events_url": "https://api.github.com/users/yunhailuo/events{/privacy}", "received_events_url": "https://api.github.com/users/yunhailuo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-05-04T20:48:39Z", "updated_at": "2018-08-07T20:31:59Z", "closed_at": "2018-08-07T20:31:59Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Windows 10</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary with pip using Anaconda</li>\n<li><strong>TensorFlow version (use command below)</strong>: tensorflow-gpu 1.8.0</li>\n<li><strong>Python version</strong>: 3.6.5</li>\n<li><strong>Bazel version (if compiling from source)</strong>: N/A</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: N/A</li>\n<li><strong>CUDA/cuDNN version</strong>: V9.0.176</li>\n<li><strong>GPU model and memory</strong>: Quadro M2000M, 4G</li>\n<li><strong>Exact command to reproduce</strong>: Please see problem description. Thank you.</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>This is almost the same to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"261933813\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/13433\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/13433/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/13433\">#13433</a> but on GPU. I think this is a bug/feature request. If not, please let me know. I use the following python code for testing both <code>tf.Variable</code> and <code>tf.get_variable</code>. The variable <code>v</code> should be 800MB.</p>\n<pre><code>import tensorflow as tf\n\nsess_conf = tf.ConfigProto()\nsess_conf.gpu_options.allow_growth = True\n\n# Test the following for Tensor and Variable\nv = tf.Variable(tf.random_uniform((1024*1024, 100), dtype=tf.float64))\n# v = tf.get_variable('v', shape=(1024*1024, 100), initializer=tf.random_normal_initializer, dtype=tf.float64, trainable=False)\n\ninit = tf.global_variables_initializer()\nwith tf.Session(config=sess_conf) as sess:\n    sess.run(init)\n</code></pre>\n<p>And I use <code>nvidia-smi dmon -c 10 -s m</code> to monitor the memory usage. For both cases got:</p>\n<pre><code># gpu    fb  bar1\n# Idx    MB    MB\n    0    42   227\n    0    42   227\n    0    42   227\n    0    42   227\n    0   102   227\n    0  2163   227\n    0  2163   227\n    0  2163   227\n    0  2163   227\n    0  2163   227\n</code></pre>\n<p>Could you please let me know which part is wrong? Or is this an expected behavior? Thank you.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\nTensorFlow installed from (source or binary): binary with pip using Anaconda\nTensorFlow version (use command below): tensorflow-gpu 1.8.0\nPython version: 3.6.5\nBazel version (if compiling from source): N/A\nGCC/Compiler version (if compiling from source): N/A\nCUDA/cuDNN version: V9.0.176\nGPU model and memory: Quadro M2000M, 4G\nExact command to reproduce: Please see problem description. Thank you.\n\nDescribe the problem\nThis is almost the same to #13433 but on GPU. I think this is a bug/feature request. If not, please let me know. I use the following python code for testing both tf.Variable and tf.get_variable. The variable v should be 800MB.\nimport tensorflow as tf\n\nsess_conf = tf.ConfigProto()\nsess_conf.gpu_options.allow_growth = True\n\n# Test the following for Tensor and Variable\nv = tf.Variable(tf.random_uniform((1024*1024, 100), dtype=tf.float64))\n# v = tf.get_variable('v', shape=(1024*1024, 100), initializer=tf.random_normal_initializer, dtype=tf.float64, trainable=False)\n\ninit = tf.global_variables_initializer()\nwith tf.Session(config=sess_conf) as sess:\n    sess.run(init)\n\nAnd I use nvidia-smi dmon -c 10 -s m to monitor the memory usage. For both cases got:\n# gpu    fb  bar1\n# Idx    MB    MB\n    0    42   227\n    0    42   227\n    0    42   227\n    0    42   227\n    0   102   227\n    0  2163   227\n    0  2163   227\n    0  2163   227\n    0  2163   227\n    0  2163   227\n\nCould you please let me know which part is wrong? Or is this an expected behavior? Thank you.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10\r\n- **TensorFlow installed from (source or binary)**: binary with pip using Anaconda\r\n- **TensorFlow version (use command below)**: tensorflow-gpu 1.8.0\r\n- **Python version**: 3.6.5\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: V9.0.176\r\n- **GPU model and memory**: Quadro M2000M, 4G\r\n- **Exact command to reproduce**: Please see problem description. Thank you.\r\n\r\n### Describe the problem\r\nThis is almost the same to #13433 but on GPU. I think this is a bug/feature request. If not, please let me know. I use the following python code for testing both `tf.Variable` and `tf.get_variable`. The variable `v` should be 800MB.\r\n\r\n    import tensorflow as tf\r\n\r\n    sess_conf = tf.ConfigProto()\r\n    sess_conf.gpu_options.allow_growth = True\r\n\r\n    # Test the following for Tensor and Variable\r\n    v = tf.Variable(tf.random_uniform((1024*1024, 100), dtype=tf.float64))\r\n    # v = tf.get_variable('v', shape=(1024*1024, 100), initializer=tf.random_normal_initializer, dtype=tf.float64, trainable=False)\r\n\r\n    init = tf.global_variables_initializer()\r\n    with tf.Session(config=sess_conf) as sess:\r\n        sess.run(init)\r\n\r\n And I use `nvidia-smi dmon -c 10 -s m` to monitor the memory usage. For both cases got:\r\n\r\n    # gpu    fb  bar1\r\n    # Idx    MB    MB\r\n        0    42   227\r\n        0    42   227\r\n        0    42   227\r\n        0    42   227\r\n        0   102   227\r\n        0  2163   227\r\n        0  2163   227\r\n        0  2163   227\r\n        0  2163   227\r\n        0  2163   227\r\n\r\nCould you please let me know which part is wrong? Or is this an expected behavior? Thank you.\r\n"}
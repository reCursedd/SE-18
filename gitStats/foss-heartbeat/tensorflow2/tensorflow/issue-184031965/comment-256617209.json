{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/256617209", "html_url": "https://github.com/tensorflow/tensorflow/pull/5071#issuecomment-256617209", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5071", "id": 256617209, "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjYxNzIwOQ==", "user": {"login": "knownsoldier", "id": 10167404, "node_id": "MDQ6VXNlcjEwMTY3NDA0", "avatar_url": "https://avatars1.githubusercontent.com/u/10167404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/knownsoldier", "html_url": "https://github.com/knownsoldier", "followers_url": "https://api.github.com/users/knownsoldier/followers", "following_url": "https://api.github.com/users/knownsoldier/following{/other_user}", "gists_url": "https://api.github.com/users/knownsoldier/gists{/gist_id}", "starred_url": "https://api.github.com/users/knownsoldier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/knownsoldier/subscriptions", "organizations_url": "https://api.github.com/users/knownsoldier/orgs", "repos_url": "https://api.github.com/users/knownsoldier/repos", "events_url": "https://api.github.com/users/knownsoldier/events{/privacy}", "received_events_url": "https://api.github.com/users/knownsoldier/received_events", "type": "User", "site_admin": false}, "created_at": "2016-10-27T11:35:39Z", "updated_at": "2016-10-27T14:34:45Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=22941064\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/guschmue\">@guschmue</a><br>\nI'm getting an NVCC error while trying to compile with GPU support. My setup is:</p>\n<ul>\n<li>Windows 10</li>\n<li>Microsoft Visual Studio Community 2015 with Visual C++ 2015</li>\n<li>CUDNN 5.1</li>\n<li>CUDA 8.0</li>\n<li>Anaconda3 4.2.0</li>\n<li>swigwin-3.0.10</li>\n<li>EDIT: cmake 3.6.2</li>\n</ul>\n<p>Relevant environment variables:</p>\n<pre><code>CUDA_PATH=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\nCUDA_PATH_V8_0=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\nPath=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\\bin;C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\\libnvvp;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Skype\\Phone\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\Git\\cmd;C:\\Users\\&lt;user&gt;\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\\;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files (x86)\\Windows Kits\\8.1\\Windows Performance Toolkit\\;C:\\Users\\&lt;user&gt;\\cudnn\\bin\\;C:\\Users\\&lt;user&gt;\\Anaconda3;C:\\Users\\&lt;user&gt;\\Anaconda3\\Scripts;C:\\Users\\&lt;user&gt;\\Anaconda3\\Library\\bin;C:\\Users\\&lt;user&gt;\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Python;C:\\Program Files\\CMake\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\\n</code></pre>\n<p>I'm running the following CMake command standing in <code>tensorflow\\contrib\\cmake\\build\\</code> without problems:</p>\n<pre><code>cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\Users\\&lt;user&gt;\\swigwin-3.0.10\\swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\&lt;user&gt;\\Anaconda3\\python.exe -DPYTHON_LIBRARIES=C:\\Users\\&lt;user&gt;\\Anaconda3\\libs\\python35.lib -DCUDA_TOOLKIT_ROOT_DIR=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0  -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=C:\\Users\\&lt;user&gt;\\cudnn\\\n</code></pre>\n<p>I run the following MSBuild command:</p>\n<pre><code>C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\MSBuild /p:Configuration=Release tf_tutorials_example_trainer.vcxproj\n</code></pre>\n<p>It runs for a while and terminates with the following error:</p>\n<pre><code>Project \"C:\\Users\\&lt;user&gt;\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tutorials_example_trainer.vcxproj\" (1) is building \"C:\\Users\\&lt;user&gt;\\tensorflow\n\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (81) on node 1 (default targets).\nInitializeBuildStatus:\n  Touching \"tf_core_gpu_kernels.dir\\Release\\tf_core_.99484E5D.tlog\\unsuccessfulbuild\".\nCustomBuild:\n  Building NVCC (Device) object CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/Release/tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj\n  nvcc fatal   : A single input file is required for a non-link phase when an outputfile is specified\n\n  CMake Error at tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj.Release.cmake:207 (message):\n    Error generating\n    C:/Users/&lt;user&gt;/tensorflow/tensorflow/contrib/cmake/build/CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/Release/tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj\n\n\nC:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 1. [C:\\Users\\&lt;user&gt;\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj]\nDone Building Project \"C:\\Users\\&lt;user&gt;\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (default targets) -- FAILED.\n.\n.\n.\n\"C:\\Users\\&lt;user&gt;\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tutorials_example_trainer.vcxproj\" (default target) (1) -&gt;\n\"C:\\Users\\&lt;user&gt;\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (default target) (81) -&gt;\n(CustomBuild target) -&gt;\n  C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 1. [C:\\Users\\&lt;user&gt;\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj]\n\n    5 Warning(s)\n    1 Error(s)\n</code></pre>\n<p>From what I can tell I've followed all instructions from <code>tensorflow\\tensorflow\\contrib\\cmake\\README.md</code>. What am I missing?</p>\n<p>EDIT: Also added 6.1 capabilities to the <code>CMakeLists.txt</code>:</p>\n<pre><code>arch=compute_61,code=sm_61, \n-DTF_EXTRA_CUDA_CAPABILITIES=3.5,5.2,6.1, \n#define TF_CUDA_CAPABILITIES CudaVersion(\\\"3.5\\\"),CudaVersion(\\\"5.2\\\"), CudaVersion(\\\"6.1\\\")\\n\"```\n</code></pre>", "body_text": "@guschmue\nI'm getting an NVCC error while trying to compile with GPU support. My setup is:\n\nWindows 10\nMicrosoft Visual Studio Community 2015 with Visual C++ 2015\nCUDNN 5.1\nCUDA 8.0\nAnaconda3 4.2.0\nswigwin-3.0.10\nEDIT: cmake 3.6.2\n\nRelevant environment variables:\nCUDA_PATH=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\nCUDA_PATH_V8_0=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\nPath=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\\bin;C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\\libnvvp;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Skype\\Phone\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\Git\\cmd;C:\\Users\\<user>\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\\;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files (x86)\\Windows Kits\\8.1\\Windows Performance Toolkit\\;C:\\Users\\<user>\\cudnn\\bin\\;C:\\Users\\<user>\\Anaconda3;C:\\Users\\<user>\\Anaconda3\\Scripts;C:\\Users\\<user>\\Anaconda3\\Library\\bin;C:\\Users\\<user>\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Python;C:\\Program Files\\CMake\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\\n\nI'm running the following CMake command standing in tensorflow\\contrib\\cmake\\build\\ without problems:\ncmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\Users\\<user>\\swigwin-3.0.10\\swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\<user>\\Anaconda3\\python.exe -DPYTHON_LIBRARIES=C:\\Users\\<user>\\Anaconda3\\libs\\python35.lib -DCUDA_TOOLKIT_ROOT_DIR=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0  -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=C:\\Users\\<user>\\cudnn\\\n\nI run the following MSBuild command:\nC:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\MSBuild /p:Configuration=Release tf_tutorials_example_trainer.vcxproj\n\nIt runs for a while and terminates with the following error:\nProject \"C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tutorials_example_trainer.vcxproj\" (1) is building \"C:\\Users\\<user>\\tensorflow\n\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (81) on node 1 (default targets).\nInitializeBuildStatus:\n  Touching \"tf_core_gpu_kernels.dir\\Release\\tf_core_.99484E5D.tlog\\unsuccessfulbuild\".\nCustomBuild:\n  Building NVCC (Device) object CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/Release/tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj\n  nvcc fatal   : A single input file is required for a non-link phase when an outputfile is specified\n\n  CMake Error at tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj.Release.cmake:207 (message):\n    Error generating\n    C:/Users/<user>/tensorflow/tensorflow/contrib/cmake/build/CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/Release/tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj\n\n\nC:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 1. [C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj]\nDone Building Project \"C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (default targets) -- FAILED.\n.\n.\n.\n\"C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tutorials_example_trainer.vcxproj\" (default target) (1) ->\n\"C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (default target) (81) ->\n(CustomBuild target) ->\n  C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 1. [C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj]\n\n    5 Warning(s)\n    1 Error(s)\n\nFrom what I can tell I've followed all instructions from tensorflow\\tensorflow\\contrib\\cmake\\README.md. What am I missing?\nEDIT: Also added 6.1 capabilities to the CMakeLists.txt:\narch=compute_61,code=sm_61, \n-DTF_EXTRA_CUDA_CAPABILITIES=3.5,5.2,6.1, \n#define TF_CUDA_CAPABILITIES CudaVersion(\\\"3.5\\\"),CudaVersion(\\\"5.2\\\"), CudaVersion(\\\"6.1\\\")\\n\"```", "body": "@guschmue \nI'm getting an NVCC error while trying to compile with GPU support. My setup is:\n- Windows 10\n- Microsoft Visual Studio Community 2015 with Visual C++ 2015\n- CUDNN 5.1\n- CUDA 8.0\n- Anaconda3 4.2.0\n- swigwin-3.0.10\n- EDIT: cmake 3.6.2\n\nRelevant environment variables:\n\n```\nCUDA_PATH=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\nCUDA_PATH_V8_0=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\nPath=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\\bin;C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0\\libnvvp;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Skype\\Phone\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\Git\\cmd;C:\\Users\\<user>\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\\;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files (x86)\\Windows Kits\\8.1\\Windows Performance Toolkit\\;C:\\Users\\<user>\\cudnn\\bin\\;C:\\Users\\<user>\\Anaconda3;C:\\Users\\<user>\\Anaconda3\\Scripts;C:\\Users\\<user>\\Anaconda3\\Library\\bin;C:\\Users\\<user>\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Python;C:\\Program Files\\CMake\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\\n```\n\nI'm running the following CMake command standing in `tensorflow\\contrib\\cmake\\build\\` without problems:\n\n```\ncmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\Users\\<user>\\swigwin-3.0.10\\swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\<user>\\Anaconda3\\python.exe -DPYTHON_LIBRARIES=C:\\Users\\<user>\\Anaconda3\\libs\\python35.lib -DCUDA_TOOLKIT_ROOT_DIR=C:\\NVIDIAGPUComputingToolkit\\CUDA\\v8.0  -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=C:\\Users\\<user>\\cudnn\\\n```\n\nI run the following MSBuild command:\n\n```\nC:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\MSBuild /p:Configuration=Release tf_tutorials_example_trainer.vcxproj\n```\n\nIt runs for a while and terminates with the following error:\n\n```\nProject \"C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tutorials_example_trainer.vcxproj\" (1) is building \"C:\\Users\\<user>\\tensorflow\n\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (81) on node 1 (default targets).\nInitializeBuildStatus:\n  Touching \"tf_core_gpu_kernels.dir\\Release\\tf_core_.99484E5D.tlog\\unsuccessfulbuild\".\nCustomBuild:\n  Building NVCC (Device) object CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/Release/tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj\n  nvcc fatal   : A single input file is required for a non-link phase when an outputfile is specified\n\n  CMake Error at tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj.Release.cmake:207 (message):\n    Error generating\n    C:/Users/<user>/tensorflow/tensorflow/contrib/cmake/build/CMakeFiles/tf_core_gpu_kernels.dir/__/__/core/kernels/Release/tf_core_gpu_kernels_generated_adjust_contrast_op_gpu.cu.cc.obj\n\n\nC:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 1. [C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj]\nDone Building Project \"C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (default targets) -- FAILED.\n.\n.\n.\n\"C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tutorials_example_trainer.vcxproj\" (default target) (1) ->\n\"C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj\" (default target) (81) ->\n(CustomBuild target) ->\n  C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 1. [C:\\Users\\<user>\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_gpu_kernels.vcxproj]\n\n    5 Warning(s)\n    1 Error(s)\n```\n\nFrom what I can tell I've followed all instructions from `tensorflow\\tensorflow\\contrib\\cmake\\README.md`. What am I missing? \n\nEDIT: Also added 6.1 capabilities to the `CMakeLists.txt`:\n\n``````\narch=compute_61,code=sm_61, \n-DTF_EXTRA_CUDA_CAPABILITIES=3.5,5.2,6.1, \n#define TF_CUDA_CAPABILITIES CudaVersion(\\\"3.5\\\"),CudaVersion(\\\"5.2\\\"), CudaVersion(\\\"6.1\\\")\\n\"```\n``````\n"}
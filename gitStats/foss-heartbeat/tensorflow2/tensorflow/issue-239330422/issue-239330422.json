{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11124", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11124/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11124/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11124/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11124", "id": 239330422, "node_id": "MDU6SXNzdWUyMzkzMzA0MjI=", "number": 11124, "title": "[iOS] Bug: No OpKernel was registered to support Op 'LessEqual'", "user": {"login": "wenkesj", "id": 7623062, "node_id": "MDQ6VXNlcjc2MjMwNjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7623062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wenkesj", "html_url": "https://github.com/wenkesj", "followers_url": "https://api.github.com/users/wenkesj/followers", "following_url": "https://api.github.com/users/wenkesj/following{/other_user}", "gists_url": "https://api.github.com/users/wenkesj/gists{/gist_id}", "starred_url": "https://api.github.com/users/wenkesj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wenkesj/subscriptions", "organizations_url": "https://api.github.com/users/wenkesj/orgs", "repos_url": "https://api.github.com/users/wenkesj/repos", "events_url": "https://api.github.com/users/wenkesj/events{/privacy}", "received_events_url": "https://api.github.com/users/wenkesj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-28T23:57:14Z", "updated_at": "2017-07-25T20:39:25Z", "closed_at": "2017-07-02T17:03:46Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<p>Running OS <code>macOS Sierra</code> building for <code>iOS</code> specifically.</p>\n<pre><code>$ gcc --version\nApple LLVM version 8.1.0 (clang-802.0.42)\nTarget: x86_64-apple-darwin16.0.0\n</code></pre>\n<p>TensorFlow version <code>1.2.0</code>, installed through <code>pip</code>.</p>\n<h3>Describe the problem</h3>\n<h3>Case: Build From Source (1.2.0)</h3>\n<p>Clone the tensorflow repository and build for <code>iOS</code></p>\n<div class=\"highlight highlight-source-shell\"><pre><span class=\"pl-c1\">cd</span> tensorflow\nsh tensorflow/contrib/makefile/build_all_ios.sh</pre></div>\n<p>Installs with no problem. Follow the <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/ios#creating-your-own-app-from-your-source-libraries\">iOS example</a>.</p>\n<h3>Case: Pod Install (1.1)</h3>\n<p>Use <code>CocoaPods</code></p>\n<div class=\"highlight highlight-source-shell\"><pre>pod install TensorFlow-experimental</pre></div>\n<h3>Status Not <code>ok</code></h3>\n<p>For both of the cases, the status from loading and creating session from a frozen graph (binary proto- file) is not <code>ok</code> when using <code>LessEqual</code> op in a <code>seq2seq</code> based model.</p>\n<p><strong>Note</strong>: This example runs without any problems on the <code>python</code> (<code>pip install tensorflow</code>) distribution.</p>\n<h3>Source code / logs</h3>\n<p>This error occurs when loading from a <code>.pb</code> context:</p>\n<div class=\"highlight highlight-source-objc\"><pre><span class=\"pl-c\"><span class=\"pl-c\">//</span> ...else-where</span>\n<span class=\"pl-c\"><span class=\"pl-c\">//</span> ReadBinaryProto(tensorflow::Env::Default(), path.fileSystemRepresentation, &amp;graph)</span>\n<span class=\"pl-c\"><span class=\"pl-c\">//</span> ...</span>\nstatus = session-&gt;<span class=\"pl-en\">Create</span>(graph);\n<span class=\"pl-k\">if</span> (!status.ok()) {\n  <span class=\"pl-c1\">RCTLogInfo</span>(<span class=\"pl-s\"><span class=\"pl-pds\">@\"</span>Error adding graph to session: <span class=\"pl-c1\">%s</span><span class=\"pl-pds\">\"</span></span>, status.<span class=\"pl-c1\">error_message</span>().<span class=\"pl-c1\">c_str</span>());\n  <span class=\"pl-k\">return</span> <span class=\"pl-c1\">false</span>;\n}</pre></div>\n<p>Issue is logged here:</p>\n<pre><code>No OpKernel was registered to support Op 'LessEqual' with these attrs.  Registered devices: [CPU], Registered kernels:\n  &lt;no registered kernels&gt;\n\n\t [[Node: decode/decoder_1/LessEqual = LessEqual[T=DT_INT32](max_target_len, decode/decoder_1/LessEqual/y)]]\n</code></pre>\n<p>Checked <code>tf_op_files.txt</code> and saw that <code>LessEqual</code> op was not included:</p>\n<div class=\"highlight highlight-source-diff\"><pre>tensorflow/core/kernels/cwise_op_less.cc\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>tensorflow/core/kernels/cwise_op_less_equal.cc</span>\ntensorflow/core/kernels/cwise_op_isfinite.cc</pre></div>\n<p>Maybe this has something to do with it?</p>\n<p><strong>Update</strong> it seems that this did have something to do with it.</p>\n<p>I rebuilt after adding <code>/cwise_op_less_equal.cc</code> to <code>tf_op_files.txt</code>:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ tensorflow/contrib/makefile/build_all_ios.sh </pre></div>\n<p>I re-froze the graph:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ python ../tensorflow/tensorflow/python/tools/freeze_graph.py \\\n--input_graph=./pb/input_graph.pb --input_checkpoint=./save/model \\\n--output_node_names=predictions --input_binary \\\n--output_graph=./tmp/frozen.pb</pre></div>\n<p>Then optimized...</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ python ../tensorflow/tensorflow/python/tools/optimize_for_inference.py \\\n--input=./tmp/frozen.pb --output=./tmp/inference.pb \\\n--input_names=input,target_sequence_length,source_sequence_length,keep_prob \\\n--output_names=predictions \\\n--frozen_graph=True</pre></div>\n<p>And the issue is no-longer there.</p>\n<h4>BUT</h4>\n<p>There's still an error, which I assume is on my end.</p>\n<pre><code>2017-06-30 14:44:18.410032: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410300: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410421: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410519: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410641: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410740: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410833: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.410921: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.410998: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.411104: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.411194: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.411290: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.411408: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411505: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411613: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411706: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411806: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411898: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.412014: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412106: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412194: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412297: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412406: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412499: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: Invert\n...\n</code></pre>\n<p>And all the way at the bottom...</p>\n<pre><code>Input 0 of node rnn/Shape_1 was passed float from source_sequence_length:0 incompatible with expected int32.\n</code></pre>", "body_text": "System information\nRunning OS macOS Sierra building for iOS specifically.\n$ gcc --version\nApple LLVM version 8.1.0 (clang-802.0.42)\nTarget: x86_64-apple-darwin16.0.0\n\nTensorFlow version 1.2.0, installed through pip.\nDescribe the problem\nCase: Build From Source (1.2.0)\nClone the tensorflow repository and build for iOS\ncd tensorflow\nsh tensorflow/contrib/makefile/build_all_ios.sh\nInstalls with no problem. Follow the iOS example.\nCase: Pod Install (1.1)\nUse CocoaPods\npod install TensorFlow-experimental\nStatus Not ok\nFor both of the cases, the status from loading and creating session from a frozen graph (binary proto- file) is not ok when using LessEqual op in a seq2seq based model.\nNote: This example runs without any problems on the python (pip install tensorflow) distribution.\nSource code / logs\nThis error occurs when loading from a .pb context:\n// ...else-where\n// ReadBinaryProto(tensorflow::Env::Default(), path.fileSystemRepresentation, &graph)\n// ...\nstatus = session->Create(graph);\nif (!status.ok()) {\n  RCTLogInfo(@\"Error adding graph to session: %s\", status.error_message().c_str());\n  return false;\n}\nIssue is logged here:\nNo OpKernel was registered to support Op 'LessEqual' with these attrs.  Registered devices: [CPU], Registered kernels:\n  <no registered kernels>\n\n\t [[Node: decode/decoder_1/LessEqual = LessEqual[T=DT_INT32](max_target_len, decode/decoder_1/LessEqual/y)]]\n\nChecked tf_op_files.txt and saw that LessEqual op was not included:\ntensorflow/core/kernels/cwise_op_less.cc\n+tensorflow/core/kernels/cwise_op_less_equal.cc\ntensorflow/core/kernels/cwise_op_isfinite.cc\nMaybe this has something to do with it?\nUpdate it seems that this did have something to do with it.\nI rebuilt after adding /cwise_op_less_equal.cc to tf_op_files.txt:\n$ tensorflow/contrib/makefile/build_all_ios.sh \nI re-froze the graph:\n$ python ../tensorflow/tensorflow/python/tools/freeze_graph.py \\\n--input_graph=./pb/input_graph.pb --input_checkpoint=./save/model \\\n--output_node_names=predictions --input_binary \\\n--output_graph=./tmp/frozen.pb\nThen optimized...\n$ python ../tensorflow/tensorflow/python/tools/optimize_for_inference.py \\\n--input=./tmp/frozen.pb --output=./tmp/inference.pb \\\n--input_names=input,target_sequence_length,source_sequence_length,keep_prob \\\n--output_names=predictions \\\n--frozen_graph=True\nAnd the issue is no-longer there.\nBUT\nThere's still an error, which I assume is on my end.\n2017-06-30 14:44:18.410032: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410300: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410421: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410519: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410641: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410740: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseAnd\n2017-06-30 14:44:18.410833: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.410921: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.410998: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.411104: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.411194: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.411290: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseOr\n2017-06-30 14:44:18.411408: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411505: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411613: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411706: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411806: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.411898: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseXor\n2017-06-30 14:44:18.412014: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412106: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412194: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412297: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412406: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: Invert\n2017-06-30 14:44:18.412499: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: Invert\n...\n\nAnd all the way at the bottom...\nInput 0 of node rnn/Shape_1 was passed float from source_sequence_length:0 incompatible with expected int32.", "body": "### System information\r\nRunning OS `macOS Sierra` building for `iOS` specifically.\r\n```\r\n$ gcc --version\r\nApple LLVM version 8.1.0 (clang-802.0.42)\r\nTarget: x86_64-apple-darwin16.0.0\r\n```\r\n\r\nTensorFlow version `1.2.0`, installed through `pip`.\r\n\r\n### Describe the problem\r\n\r\n### Case: Build From Source (1.2.0)\r\nClone the tensorflow repository and build for `iOS`\r\n\r\n```sh\r\ncd tensorflow\r\nsh tensorflow/contrib/makefile/build_all_ios.sh\r\n```\r\n\r\nInstalls with no problem. Follow the [iOS example](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/ios#creating-your-own-app-from-your-source-libraries).\r\n\r\n### Case: Pod Install (1.1)\r\nUse `CocoaPods`\r\n\r\n```sh\r\npod install TensorFlow-experimental\r\n```\r\n\r\n### Status Not `ok`\r\nFor both of the cases, the status from loading and creating session from a frozen graph (binary proto- file) is not `ok` when using `LessEqual` op in a `seq2seq` based model.\r\n\r\n**Note**: This example runs without any problems on the `python` (`pip install tensorflow`) distribution.\r\n\r\n### Source code / logs\r\nThis error occurs when loading from a `.pb` context:\r\n\r\n```obj-c\r\n// ...else-where\r\n// ReadBinaryProto(tensorflow::Env::Default(), path.fileSystemRepresentation, &graph)\r\n// ...\r\nstatus = session->Create(graph);\r\nif (!status.ok()) {\r\n  RCTLogInfo(@\"Error adding graph to session: %s\", status.error_message().c_str());\r\n  return false;\r\n}\r\n```\r\n\r\nIssue is logged here:\r\n```\r\nNo OpKernel was registered to support Op 'LessEqual' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n  <no registered kernels>\r\n\r\n\t [[Node: decode/decoder_1/LessEqual = LessEqual[T=DT_INT32](max_target_len, decode/decoder_1/LessEqual/y)]]\r\n```\r\n\r\nChecked `tf_op_files.txt` and saw that `LessEqual` op was not included:\r\n```diff\r\ntensorflow/core/kernels/cwise_op_less.cc\r\n+tensorflow/core/kernels/cwise_op_less_equal.cc\r\ntensorflow/core/kernels/cwise_op_isfinite.cc\r\n```\r\n\r\nMaybe this has something to do with it?\r\n\r\n**Update** it seems that this did have something to do with it.\r\n\r\nI rebuilt after adding `/cwise_op_less_equal.cc` to `tf_op_files.txt`:\r\n```sh\r\n$ tensorflow/contrib/makefile/build_all_ios.sh \r\n```\r\n\r\nI re-froze the graph:\r\n```sh\r\n$ python ../tensorflow/tensorflow/python/tools/freeze_graph.py \\\r\n--input_graph=./pb/input_graph.pb --input_checkpoint=./save/model \\\r\n--output_node_names=predictions --input_binary \\\r\n--output_graph=./tmp/frozen.pb\r\n```\r\n\r\nThen optimized...\r\n```sh\r\n$ python ../tensorflow/tensorflow/python/tools/optimize_for_inference.py \\\r\n--input=./tmp/frozen.pb --output=./tmp/inference.pb \\\r\n--input_names=input,target_sequence_length,source_sequence_length,keep_prob \\\r\n--output_names=predictions \\\r\n--frozen_graph=True\r\n```\r\n\r\nAnd the issue is no-longer there.\r\n\r\n#### BUT\r\nThere's still an error, which I assume is on my end.\r\n```\r\n2017-06-30 14:44:18.410032: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseAnd\r\n2017-06-30 14:44:18.410300: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseAnd\r\n2017-06-30 14:44:18.410421: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseAnd\r\n2017-06-30 14:44:18.410519: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseAnd\r\n2017-06-30 14:44:18.410641: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseAnd\r\n2017-06-30 14:44:18.410740: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseAnd\r\n2017-06-30 14:44:18.410833: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseOr\r\n2017-06-30 14:44:18.410921: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseOr\r\n2017-06-30 14:44:18.410998: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseOr\r\n2017-06-30 14:44:18.411104: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseOr\r\n2017-06-30 14:44:18.411194: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseOr\r\n2017-06-30 14:44:18.411290: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseOr\r\n2017-06-30 14:44:18.411408: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseXor\r\n2017-06-30 14:44:18.411505: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseXor\r\n2017-06-30 14:44:18.411613: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseXor\r\n2017-06-30 14:44:18.411706: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseXor\r\n2017-06-30 14:44:18.411806: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseXor\r\n2017-06-30 14:44:18.411898: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseXor\r\n2017-06-30 14:44:18.412014: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: Invert\r\n2017-06-30 14:44:18.412106: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT16 } } }') for unknown op: Invert\r\n2017-06-30 14:44:18.412194: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: Invert\r\n2017-06-30 14:44:18.412297: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT64 } } }') for unknown op: Invert\r\n2017-06-30 14:44:18.412406: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT8 } } }') for unknown op: Invert\r\n2017-06-30 14:44:18.412499: E tensorflow/core/framework/op_kernel.cc:1141] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_UINT16 } } }') for unknown op: Invert\r\n...\r\n```\r\n\r\nAnd all the way at the bottom...\r\n```\r\nInput 0 of node rnn/Shape_1 was passed float from source_sequence_length:0 incompatible with expected int32.\r\n```"}
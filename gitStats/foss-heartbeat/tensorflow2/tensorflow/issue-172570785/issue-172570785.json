{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3966", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3966/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3966/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3966/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/3966", "id": 172570785, "node_id": "MDExOlB1bGxSZXF1ZXN0ODIyNzQ5MTQ=", "number": 3966, "title": "Add cuda_configure repository rule to autodetect cuda.", "user": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-22T22:31:27Z", "updated_at": "2016-08-23T06:15:03Z", "closed_at": "2016-08-23T06:15:03Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/3966", "html_url": "https://github.com/tensorflow/tensorflow/pull/3966", "diff_url": "https://github.com/tensorflow/tensorflow/pull/3966.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/3966.patch"}, "body_html": "<p>This change reimplements the CUDA autoconfiguration mechanism in Skylark,<br>\nproviding a <code>cuda_configure</code> workspace rule. We keep the same user interface,<br>\nthe ./configure script, but rather than modifying source files within the<br>\nsource tree, <code>cuda_configure</code> generates a <code>@local_config_cuda</code> workspace<br>\ncontaining:</p>\n<ul>\n<li>Symlinks to the CUDA headers and libraries</li>\n<li>BUILD files generated with the correct CUDA and cuDNN versions</li>\n<li>CROSSTOOL config with CUDA include dirs populated</li>\n<li>crosstool_wrapper_driver_is_not_gcc wrapper script with compiler paths and<br>\nCUDA compute capabilities set.</li>\n<li>cuda_config.h header file with CUDA versions and compute capabilities set,<br>\nwhich can be <code>#include</code>d by source files.</li>\n</ul>\n<p>This change also makes the following fixes to <code>Dockerfile.gpu</code>:</p>\n<ul>\n<li>Change the <code>CUDNN_INSTALL_PATH</code> to point to <code>/usr/lib/x86_64-linux-gnu</code><br>\nrather than <code>/usr/local/cuda</code> since NVIDIA's image installs <code>libcudnn.so</code><br>\nunder <code>/usr/lib/x86_64-linux-gnu</code>.</li>\n<li>Add env variable to set the minimum compute capability to 3.0.</li>\n</ul>\n<p><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #2873.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"160318660\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2873\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2873/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2873\">#2873</a></p>", "body_text": "This change reimplements the CUDA autoconfiguration mechanism in Skylark,\nproviding a cuda_configure workspace rule. We keep the same user interface,\nthe ./configure script, but rather than modifying source files within the\nsource tree, cuda_configure generates a @local_config_cuda workspace\ncontaining:\n\nSymlinks to the CUDA headers and libraries\nBUILD files generated with the correct CUDA and cuDNN versions\nCROSSTOOL config with CUDA include dirs populated\ncrosstool_wrapper_driver_is_not_gcc wrapper script with compiler paths and\nCUDA compute capabilities set.\ncuda_config.h header file with CUDA versions and compute capabilities set,\nwhich can be #included by source files.\n\nThis change also makes the following fixes to Dockerfile.gpu:\n\nChange the CUDNN_INSTALL_PATH to point to /usr/lib/x86_64-linux-gnu\nrather than /usr/local/cuda since NVIDIA's image installs libcudnn.so\nunder /usr/lib/x86_64-linux-gnu.\nAdd env variable to set the minimum compute capability to 3.0.\n\nFixes #2873", "body": "This change reimplements the CUDA autoconfiguration mechanism in Skylark,\nproviding a `cuda_configure` workspace rule. We keep the same user interface,\nthe ./configure script, but rather than modifying source files within the\nsource tree, `cuda_configure` generates a `@local_config_cuda` workspace\ncontaining:\n- Symlinks to the CUDA headers and libraries\n- BUILD files generated with the correct CUDA and cuDNN versions\n- CROSSTOOL config with CUDA include dirs populated\n- crosstool_wrapper_driver_is_not_gcc wrapper script with compiler paths and\n  CUDA compute capabilities set.\n- cuda_config.h header file with CUDA versions and compute capabilities set,\n  which can be `#include`d by source files.\n\nThis change also makes the following fixes to `Dockerfile.gpu`:\n- Change the `CUDNN_INSTALL_PATH` to point to `/usr/lib/x86_64-linux-gnu`\n  rather than `/usr/local/cuda` since NVIDIA's image installs `libcudnn.so`\n  under `/usr/lib/x86_64-linux-gnu`.\n- Add env variable to set the minimum compute capability to 3.0.\n\nFixes #2873\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10856", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10856/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10856/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10856/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10856", "id": 237279141, "node_id": "MDU6SXNzdWUyMzcyNzkxNDE=", "number": 10856, "title": "Support unknown dimension in tf.SparseTensor", "user": {"login": "melvinma", "id": 3526172, "node_id": "MDQ6VXNlcjM1MjYxNzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3526172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melvinma", "html_url": "https://github.com/melvinma", "followers_url": "https://api.github.com/users/melvinma/followers", "following_url": "https://api.github.com/users/melvinma/following{/other_user}", "gists_url": "https://api.github.com/users/melvinma/gists{/gist_id}", "starred_url": "https://api.github.com/users/melvinma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melvinma/subscriptions", "organizations_url": "https://api.github.com/users/melvinma/orgs", "repos_url": "https://api.github.com/users/melvinma/repos", "events_url": "https://api.github.com/users/melvinma/events{/privacy}", "received_events_url": "https://api.github.com/users/melvinma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-20T16:57:55Z", "updated_at": "2017-06-30T17:49:31Z", "closed_at": "2017-06-30T17:49:31Z", "author_association": "NONE", "body_html": "<p>In doing development calling API (tf.SparseTensor on release 1.1), I got the following error. It appears to be caused by unknown dimension \"batch\" which is present in n_indices, n_val, obj_ref.get_shape().</p>\n<p>Additionally, I wonder if we could have a list of APIs not supporting unknown dimension ....</p>\n<pre><code>  File \"/nlp/workspace/nlp-models/tf-seq2seq/seq2seq/..../..../...._model.py\", line 362, in _put_new_memory\n    delta = tf.SparseTensor(n_indices, n_val, obj_ref.get_shape())\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/sparse_tensor.py\", line 127, in __init__\n    dense_shape, name=\"dense_shape\", dtype=dtypes.int64)\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 639, in convert_to_tensor\n    as_ref=False)\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 704, in internal_convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/constant_op.py\", line 131, in _tensor_shape_tensor_conversion_function\n    \"Cannot convert a partially known TensorShape to a Tensor: %s\" % s)\nValueError: Cannot convert a partially known TensorShape to a Tensor: (?, 16, 30)\n</code></pre>", "body_text": "In doing development calling API (tf.SparseTensor on release 1.1), I got the following error. It appears to be caused by unknown dimension \"batch\" which is present in n_indices, n_val, obj_ref.get_shape().\nAdditionally, I wonder if we could have a list of APIs not supporting unknown dimension ....\n  File \"/nlp/workspace/nlp-models/tf-seq2seq/seq2seq/..../..../...._model.py\", line 362, in _put_new_memory\n    delta = tf.SparseTensor(n_indices, n_val, obj_ref.get_shape())\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/sparse_tensor.py\", line 127, in __init__\n    dense_shape, name=\"dense_shape\", dtype=dtypes.int64)\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 639, in convert_to_tensor\n    as_ref=False)\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 704, in internal_convert_to_tensor\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/constant_op.py\", line 131, in _tensor_shape_tensor_conversion_function\n    \"Cannot convert a partially known TensorShape to a Tensor: %s\" % s)\nValueError: Cannot convert a partially known TensorShape to a Tensor: (?, 16, 30)", "body": "In doing development calling API (tf.SparseTensor on release 1.1), I got the following error. It appears to be caused by unknown dimension \"batch\" which is present in n_indices, n_val, obj_ref.get_shape(). \r\n\r\nAdditionally, I wonder if we could have a list of APIs not supporting unknown dimension ....\r\n\r\n```\r\n  File \"/nlp/workspace/nlp-models/tf-seq2seq/seq2seq/..../..../...._model.py\", line 362, in _put_new_memory\r\n    delta = tf.SparseTensor(n_indices, n_val, obj_ref.get_shape())\r\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/sparse_tensor.py\", line 127, in __init__\r\n    dense_shape, name=\"dense_shape\", dtype=dtypes.int64)\r\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 639, in convert_to_tensor\r\n    as_ref=False)\r\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 704, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/home/..../workspace/prun/seq2seq/lib/python3.5/site-packages/tensorflow/python/framework/constant_op.py\", line 131, in _tensor_shape_tensor_conversion_function\r\n    \"Cannot convert a partially known TensorShape to a Tensor: %s\" % s)\r\nValueError: Cannot convert a partially known TensorShape to a Tensor: (?, 16, 30)\r\n```\r\n\r\n\r\n"}
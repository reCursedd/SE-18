{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/261110457", "html_url": "https://github.com/tensorflow/tensorflow/issues/5390#issuecomment-261110457", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5390", "id": 261110457, "node_id": "MDEyOklzc3VlQ29tbWVudDI2MTExMDQ1Nw==", "user": {"login": "sguada", "id": 1766524, "node_id": "MDQ6VXNlcjE3NjY1MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sguada", "html_url": "https://github.com/sguada", "followers_url": "https://api.github.com/users/sguada/followers", "following_url": "https://api.github.com/users/sguada/following{/other_user}", "gists_url": "https://api.github.com/users/sguada/gists{/gist_id}", "starred_url": "https://api.github.com/users/sguada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sguada/subscriptions", "organizations_url": "https://api.github.com/users/sguada/orgs", "repos_url": "https://api.github.com/users/sguada/repos", "events_url": "https://api.github.com/users/sguada/events{/privacy}", "received_events_url": "https://api.github.com/users/sguada/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-16T23:49:59Z", "updated_at": "2016-11-16T23:50:10Z", "author_association": "MEMBER", "body_html": "<p>Getting all the name_scope and variable_scope right can be a bit tricky. I would recommend you to take a look at <a href=\"https://github.com/tensorflow/models/tree/master/slim\">https://github.com/tensorflow/models/tree/master/slim</a> which has <a href=\"https://github.com/tensorflow/models/blob/master/slim/deployment/model_deploy.py\">model_deploy</a> that shows how to build and train a model using multi-GPU. It has several optimizations, like variables pinned into CPU and efficient gradient accumulation.</p>\n<p>For reference, one can pin all the variables to CPU using arg_scope:<br>\n<code>with slim.arg_scope(slim.variable, device='/CPU:0'):</code></p>", "body_text": "Getting all the name_scope and variable_scope right can be a bit tricky. I would recommend you to take a look at https://github.com/tensorflow/models/tree/master/slim which has model_deploy that shows how to build and train a model using multi-GPU. It has several optimizations, like variables pinned into CPU and efficient gradient accumulation.\nFor reference, one can pin all the variables to CPU using arg_scope:\nwith slim.arg_scope(slim.variable, device='/CPU:0'):", "body": "Getting all the name_scope and variable_scope right can be a bit tricky. I would recommend you to take a look at https://github.com/tensorflow/models/tree/master/slim which has [model_deploy](https://github.com/tensorflow/models/blob/master/slim/deployment/model_deploy.py) that shows how to build and train a model using multi-GPU. It has several optimizations, like variables pinned into CPU and efficient gradient accumulation.\n\nFor reference, one can pin all the variables to CPU using arg_scope:\n`with slim.arg_scope(slim.variable, device='/CPU:0'):`\n"}
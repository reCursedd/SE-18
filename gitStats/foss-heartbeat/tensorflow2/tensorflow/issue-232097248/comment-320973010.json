{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320973010", "html_url": "https://github.com/tensorflow/tensorflow/issues/10278#issuecomment-320973010", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10278", "id": 320973010, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDk3MzAxMA==", "user": {"login": "psubnwell", "id": 19970457, "node_id": "MDQ6VXNlcjE5OTcwNDU3", "avatar_url": "https://avatars1.githubusercontent.com/u/19970457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psubnwell", "html_url": "https://github.com/psubnwell", "followers_url": "https://api.github.com/users/psubnwell/followers", "following_url": "https://api.github.com/users/psubnwell/following{/other_user}", "gists_url": "https://api.github.com/users/psubnwell/gists{/gist_id}", "starred_url": "https://api.github.com/users/psubnwell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psubnwell/subscriptions", "organizations_url": "https://api.github.com/users/psubnwell/orgs", "repos_url": "https://api.github.com/users/psubnwell/repos", "events_url": "https://api.github.com/users/psubnwell/events{/privacy}", "received_events_url": "https://api.github.com/users/psubnwell/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-08T14:28:07Z", "updated_at": "2017-08-08T14:28:07Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=14814084\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dylanrandle\">@dylanrandle</a> Hey Dylan,</p>\n<p>I met the same problem as yours. I'm running a sequential labeling task with LSTM. Since the lengths of sequences are not the same so I padded them with zero in every batch (but different batches have different lengths). Then I got tons of <code>PoolAllocator</code> and the speed is so slow.</p>\n<p>I saw your explanation that the sequences are not short enough so the computation time blew up.</p>\n<p>My sequences are very long (each is a document with roughly 2k-4k words, batch_num=64). But \"truncate\"? I thought the most common way to process the dynamic batch is to \"padding zero\" to the max length? Truncating the sequences manually will destroy the annotations inside...</p>\n<p>Do you have any evidence to support your theory about sequence length and computation time (~O(n^4))? Thank you !!</p>", "body_text": "@dylanrandle Hey Dylan,\nI met the same problem as yours. I'm running a sequential labeling task with LSTM. Since the lengths of sequences are not the same so I padded them with zero in every batch (but different batches have different lengths). Then I got tons of PoolAllocator and the speed is so slow.\nI saw your explanation that the sequences are not short enough so the computation time blew up.\nMy sequences are very long (each is a document with roughly 2k-4k words, batch_num=64). But \"truncate\"? I thought the most common way to process the dynamic batch is to \"padding zero\" to the max length? Truncating the sequences manually will destroy the annotations inside...\nDo you have any evidence to support your theory about sequence length and computation time (~O(n^4))? Thank you !!", "body": "@dylanrandle Hey Dylan,\r\n\r\nI met the same problem as yours. I'm running a sequential labeling task with LSTM. Since the lengths of sequences are not the same so I padded them with zero in every batch (but different batches have different lengths). Then I got tons of `PoolAllocator` and the speed is so slow.\r\n\r\nI saw your explanation that the sequences are not short enough so the computation time blew up. \r\n\r\nMy sequences are very long (each is a document with roughly 2k-4k words, batch_num=64). But \"truncate\"? I thought the most common way to process the dynamic batch is to \"padding zero\" to the max length? Truncating the sequences manually will destroy the annotations inside...\r\n\r\nDo you have any evidence to support your theory about sequence length and computation time (~O(n^4))? Thank you !!"}
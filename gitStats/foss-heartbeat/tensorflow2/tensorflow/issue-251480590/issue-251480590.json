{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12427", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12427/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12427/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12427/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12427", "id": 251480590, "node_id": "MDU6SXNzdWUyNTE0ODA1OTA=", "number": 12427, "title": "Error when retraining with retrain.py", "user": {"login": "anonym24", "id": 8851301, "node_id": "MDQ6VXNlcjg4NTEzMDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8851301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anonym24", "html_url": "https://github.com/anonym24", "followers_url": "https://api.github.com/users/anonym24/followers", "following_url": "https://api.github.com/users/anonym24/following{/other_user}", "gists_url": "https://api.github.com/users/anonym24/gists{/gist_id}", "starred_url": "https://api.github.com/users/anonym24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anonym24/subscriptions", "organizations_url": "https://api.github.com/users/anonym24/orgs", "repos_url": "https://api.github.com/users/anonym24/repos", "events_url": "https://api.github.com/users/anonym24/events{/privacy}", "received_events_url": "https://api.github.com/users/anonym24/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-20T10:44:14Z", "updated_at": "2017-08-20T12:36:38Z", "closed_at": "2017-08-20T12:36:38Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: original one</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.10</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: <code>sudo pip3 install tensorflow</code></li>\n<li><strong>TensorFlow version (use command below)</strong>: latest, <code>sudo pip3 install tensorflow</code> before retraining, <code>v1.0.0-65-g4763edf-dirty 1.0.1</code></li>\n<li><strong>Python version</strong>: Python 3.5.3 |Anaconda custom (64-bit)| (default, Mar  6 2017, 11:58:13) [GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux</li>\n<li><strong>Bazel version (if compiling from source)</strong>: not used</li>\n<li><strong>CUDA/cuDNN version</strong>: not used</li>\n<li><strong>GPU model and memory</strong>: not used</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>I know it's Ubuntu 16.10, but mb the problem in something different (that you may already know)?</p>\n<h3>Describe the problem</h3>\n<p>Error when retraining mobilenet</p>\n<h3>Source code / logs</h3>\n<pre><code>~$ python ~/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py \\\n&gt;     --image_dir ~/Desktop/train_tf/images/ \\\n&gt;     --learning_rate=0.0005 \\\n&gt;     --testing_percentage=20 \\\n&gt;     --validation_percentage=20 \\\n&gt;     --train_batch_size=32 \\\n&gt;     --validation_batch_size=-1 \\\n&gt;     --flip_left_right True \\\n&gt;     --random_scale=30 \\\n&gt;     --random_brightness=30 \\\n&gt;     --eval_step_interval=100 \\\n&gt;     --how_many_training_steps=10000 \\\n&gt;     --architecture mobilenet_1.0_128_quantized\nINFO:tensorflow:Looking for images in 'road'\nINFO:tensorflow:Looking for images in 'car'\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nE tensorflow/core/common_runtime/executor.cc:594] Executor failed to create kernel. Invalid argument: NodeDef mentions attr 'data_format' not in Op&lt;name=DepthwiseConv2dNative; signature=input:T, filter:T -&gt; output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]&gt;; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\nTraceback (most recent call last):\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1022, in _do_call\n    return fn(*args)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1004, in _run_fn\n    status, run_metadata)\n  File \"/home/osboxes/anaconda3/lib/python3.5/contextlib.py\", line 66, in __exit__\n    next(self.gen)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status\n    pywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: NodeDef mentions attr 'data_format' not in Op&lt;name=DepthwiseConv2dNative; signature=input:T, filter:T -&gt; output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]&gt;; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1326, in &lt;module&gt;\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1058, in main\n    distorted_image_tensor, resized_image_tensor, bottleneck_tensor)\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 599, in get_random_distorted_bottlenecks\n    {resized_input_tensor: distorted_image_data})\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 767, in run\n    run_metadata_ptr)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 965, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1015, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1035, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: NodeDef mentions attr 'data_format' not in Op&lt;name=DepthwiseConv2dNative; signature=input:T, filter:T -&gt; output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]&gt;; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\n\nCaused by op 'MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise', defined at:\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1326, in &lt;module&gt;\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 984, in main\n    create_model_graph(model_info))\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 282, in create_model_graph\n    model_info['resized_input_tensor_name'],\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/importer.py\", line 288, in import_graph_def\n    op_def=op_def)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 2327, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1226, in __init__\n    self._traceback = _extract_stack()\n\nInvalidArgumentError (see above for traceback): NodeDef mentions attr 'data_format' not in Op&lt;name=DepthwiseConv2dNative; signature=input:T, filter:T -&gt; output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]&gt;; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\n\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): original one\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.10\nTensorFlow installed from (source or binary): sudo pip3 install tensorflow\nTensorFlow version (use command below): latest, sudo pip3 install tensorflow before retraining, v1.0.0-65-g4763edf-dirty 1.0.1\nPython version: Python 3.5.3 |Anaconda custom (64-bit)| (default, Mar  6 2017, 11:58:13) [GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux\nBazel version (if compiling from source): not used\nCUDA/cuDNN version: not used\nGPU model and memory: not used\nExact command to reproduce:\n\nI know it's Ubuntu 16.10, but mb the problem in something different (that you may already know)?\nDescribe the problem\nError when retraining mobilenet\nSource code / logs\n~$ python ~/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py \\\n>     --image_dir ~/Desktop/train_tf/images/ \\\n>     --learning_rate=0.0005 \\\n>     --testing_percentage=20 \\\n>     --validation_percentage=20 \\\n>     --train_batch_size=32 \\\n>     --validation_batch_size=-1 \\\n>     --flip_left_right True \\\n>     --random_scale=30 \\\n>     --random_brightness=30 \\\n>     --eval_step_interval=100 \\\n>     --how_many_training_steps=10000 \\\n>     --architecture mobilenet_1.0_128_quantized\nINFO:tensorflow:Looking for images in 'road'\nINFO:tensorflow:Looking for images in 'car'\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nE tensorflow/core/common_runtime/executor.cc:594] Executor failed to create kernel. Invalid argument: NodeDef mentions attr 'data_format' not in Op<name=DepthwiseConv2dNative; signature=input:T, filter:T -> output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]>; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\nTraceback (most recent call last):\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1022, in _do_call\n    return fn(*args)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1004, in _run_fn\n    status, run_metadata)\n  File \"/home/osboxes/anaconda3/lib/python3.5/contextlib.py\", line 66, in __exit__\n    next(self.gen)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status\n    pywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: NodeDef mentions attr 'data_format' not in Op<name=DepthwiseConv2dNative; signature=input:T, filter:T -> output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]>; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1326, in <module>\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1058, in main\n    distorted_image_tensor, resized_image_tensor, bottleneck_tensor)\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 599, in get_random_distorted_bottlenecks\n    {resized_input_tensor: distorted_image_data})\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 767, in run\n    run_metadata_ptr)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 965, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1015, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1035, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: NodeDef mentions attr 'data_format' not in Op<name=DepthwiseConv2dNative; signature=input:T, filter:T -> output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]>; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\n\nCaused by op 'MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise', defined at:\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1326, in <module>\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 984, in main\n    create_model_graph(model_info))\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 282, in create_model_graph\n    model_info['resized_input_tensor_name'],\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/importer.py\", line 288, in import_graph_def\n    op_def=op_def)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 2327, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1226, in __init__\n    self._traceback = _extract_stack()\n\nInvalidArgumentError (see above for traceback): NodeDef mentions attr 'data_format' not in Op<name=DepthwiseConv2dNative; signature=input:T, filter:T -> output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]>; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: original one\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.10\r\n- **TensorFlow installed from (source or binary)**: `sudo pip3 install tensorflow`\r\n- **TensorFlow version (use command below)**: latest, `sudo pip3 install tensorflow` before retraining, `v1.0.0-65-g4763edf-dirty 1.0.1`\r\n- **Python version**: Python 3.5.3 |Anaconda custom (64-bit)| (default, Mar  6 2017, 11:58:13) [GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux\r\n- **Bazel version (if compiling from source)**: not used\r\n- **CUDA/cuDNN version**: not used\r\n- **GPU model and memory**: not used\r\n- **Exact command to reproduce**:\r\n\r\nI know it's Ubuntu 16.10, but mb the problem in something different (that you may already know)?\r\n\r\n### Describe the problem\r\nError when retraining mobilenet\r\n\r\n### Source code / logs\r\n\r\n```\r\n~$ python ~/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py \\\r\n>     --image_dir ~/Desktop/train_tf/images/ \\\r\n>     --learning_rate=0.0005 \\\r\n>     --testing_percentage=20 \\\r\n>     --validation_percentage=20 \\\r\n>     --train_batch_size=32 \\\r\n>     --validation_batch_size=-1 \\\r\n>     --flip_left_right True \\\r\n>     --random_scale=30 \\\r\n>     --random_brightness=30 \\\r\n>     --eval_step_interval=100 \\\r\n>     --how_many_training_steps=10000 \\\r\n>     --architecture mobilenet_1.0_128_quantized\r\nINFO:tensorflow:Looking for images in 'road'\r\nINFO:tensorflow:Looking for images in 'car'\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\r\nE tensorflow/core/common_runtime/executor.cc:594] Executor failed to create kernel. Invalid argument: NodeDef mentions attr 'data_format' not in Op<name=DepthwiseConv2dNative; signature=input:T, filter:T -> output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]>; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\r\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\r\nTraceback (most recent call last):\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1022, in _do_call\r\n    return fn(*args)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1004, in _run_fn\r\n    status, run_metadata)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/contextlib.py\", line 66, in __exit__\r\n    next(self.gen)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: NodeDef mentions attr 'data_format' not in Op<name=DepthwiseConv2dNative; signature=input:T, filter:T -> output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]>; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\r\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1326, in <module>\r\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1058, in main\r\n    distorted_image_tensor, resized_image_tensor, bottleneck_tensor)\r\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 599, in get_random_distorted_bottlenecks\r\n    {resized_input_tensor: distorted_image_data})\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 767, in run\r\n    run_metadata_ptr)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 965, in _run\r\n    feed_dict_string, options, run_metadata)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1015, in _do_run\r\n    target_list, options, run_metadata)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1035, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: NodeDef mentions attr 'data_format' not in Op<name=DepthwiseConv2dNative; signature=input:T, filter:T -> output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]>; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\r\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\r\n\r\nCaused by op 'MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise', defined at:\r\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 1326, in <module>\r\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 984, in main\r\n    create_model_graph(model_info))\r\n  File \"/home/osboxes/Desktop/train_tf/tensorflow/tensorflow/examples/image_retraining/retrain.py\", line 282, in create_model_graph\r\n    model_info['resized_input_tensor_name'],\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/importer.py\", line 288, in import_graph_def\r\n    op_def=op_def)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 2327, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"/home/osboxes/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1226, in __init__\r\n    self._traceback = _extract_stack()\r\n\r\nInvalidArgumentError (see above for traceback): NodeDef mentions attr 'data_format' not in Op<name=DepthwiseConv2dNative; signature=input:T, filter:T -> output:T; attr=T:type,allowed=[DT_FLOAT, DT_DOUBLE]; attr=strides:list(int); attr=padding:string,allowed=[\"SAME\", \"VALID\"]>; NodeDef: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)\r\n\t [[Node: MobilenetV1/MobilenetV1/Conv2d_1_depthwise/depthwise = DepthwiseConv2dNative[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\", strides=[1, 1, 1, 1], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](MobilenetV1/MobilenetV1/Conv2d_0/Relu6, MobilenetV1/Conv2d_1_depthwise/depthwise_weights/read/_79__cf__79)]]\r\n\r\n```\r\n"}
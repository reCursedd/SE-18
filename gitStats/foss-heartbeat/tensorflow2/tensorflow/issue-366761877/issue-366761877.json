{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22729", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22729/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22729/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22729/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22729", "id": 366761877, "node_id": "MDU6SXNzdWUzNjY3NjE4Nzc=", "number": 22729, "title": "TF 1.11 failed to build", "user": {"login": "shyoshyo", "id": 5780122, "node_id": "MDQ6VXNlcjU3ODAxMjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/5780122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shyoshyo", "html_url": "https://github.com/shyoshyo", "followers_url": "https://api.github.com/users/shyoshyo/followers", "following_url": "https://api.github.com/users/shyoshyo/following{/other_user}", "gists_url": "https://api.github.com/users/shyoshyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/shyoshyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shyoshyo/subscriptions", "organizations_url": "https://api.github.com/users/shyoshyo/orgs", "repos_url": "https://api.github.com/users/shyoshyo/repos", "events_url": "https://api.github.com/users/shyoshyo/events{/privacy}", "received_events_url": "https://api.github.com/users/shyoshyo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-10-04T12:18:17Z", "updated_at": "2018-10-24T18:26:42Z", "closed_at": "2018-10-13T01:58:53Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04.5 LTS (Xenial Xerus)</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>: no</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: we are building TF 1.11, command below is not usable.</li>\n</ul>\n<p>Here is git commit info:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ git log -1 \ncommit c19e29306ce1777456b2dbb3a14f511edf7883a8\nAuthor: Austin Anderson <span class=\"pl-k\">&lt;</span>angerson@google.com<span class=\"pl-k\">&gt;</span>\nDate:   Tue Sep 25 14:50:52 2018 -0700\n\n    Final version strings <span class=\"pl-k\">for</span> 1.11.0 (<span class=\"pl-c\"><span class=\"pl-c\">#</span>22513)</span></pre></div>\n<p>We are compiling code from this commit without any custom modification.</p>\n<ul>\n<li><strong>Python version</strong>: 3.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.16.1</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: gcc (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609</li>\n<li><strong>CUDA/cuDNN version</strong>:CUDA 8.0 / cuDNN 7</li>\n<li><strong>GPU model and memory</strong>: (GeForce GTX 1080 Ti, 11178MiB) x 4</li>\n<li><strong>Exact command to reproduce</strong>: <code>bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures</code></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>We have successfully built TF 1.10 under the same machine and configuration, we can even build TF 1.10 as for now. However, it turns out that it's not working when building TF 1.11. Here are logs generated by bazel:</p>\n<h3>Source code / logs</h3>\n<pre><code>INFO: From Compiling tensorflow/core/kernels/l2loss_op_gpu.cu.cc [for host]:\nexternal/com_google_absl/absl/strings/string_view.h(492): error: calling a __host__ function(\"__builtin_strlen\") from a __device__ function(\"absl::string_view::StrLenInternal\") i\ns not allowed\n\n1 error detected in the compilation of \"/tmp/tmpxft_00000f73_00000000-7_l2loss_op_gpu.cu.cpp1.ii\".\nERROR: /home/shyo/packages/tensorflow/tensorflow/core/kernels/BUILD:3602:1: output 'tensorflow/core/kernels/_objs/l2loss_op_gpu/l2loss_op_gpu.cu.pic.o' was not created\nERROR: /home/shyo/packages/tensorflow/tensorflow/core/kernels/BUILD:3602:1: not all outputs were created or valid\n\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 285.352s, Critical Path: 52.48s\nINFO: 2673 processes: 2673 local.\nFAILED: Build did NOT complete successfully\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04.5 LTS (Xenial Xerus)\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: no\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): we are building TF 1.11, command below is not usable.\n\nHere is git commit info:\n$ git log -1 \ncommit c19e29306ce1777456b2dbb3a14f511edf7883a8\nAuthor: Austin Anderson <angerson@google.com>\nDate:   Tue Sep 25 14:50:52 2018 -0700\n\n    Final version strings for 1.11.0 (#22513)\nWe are compiling code from this commit without any custom modification.\n\nPython version: 3.6\nBazel version (if compiling from source): 0.16.1\nGCC/Compiler version (if compiling from source): gcc (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\nCUDA/cuDNN version:CUDA 8.0 / cuDNN 7\nGPU model and memory: (GeForce GTX 1080 Ti, 11178MiB) x 4\nExact command to reproduce: bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures\n\nDescribe the problem\nWe have successfully built TF 1.10 under the same machine and configuration, we can even build TF 1.10 as for now. However, it turns out that it's not working when building TF 1.11. Here are logs generated by bazel:\nSource code / logs\nINFO: From Compiling tensorflow/core/kernels/l2loss_op_gpu.cu.cc [for host]:\nexternal/com_google_absl/absl/strings/string_view.h(492): error: calling a __host__ function(\"__builtin_strlen\") from a __device__ function(\"absl::string_view::StrLenInternal\") i\ns not allowed\n\n1 error detected in the compilation of \"/tmp/tmpxft_00000f73_00000000-7_l2loss_op_gpu.cu.cpp1.ii\".\nERROR: /home/shyo/packages/tensorflow/tensorflow/core/kernels/BUILD:3602:1: output 'tensorflow/core/kernels/_objs/l2loss_op_gpu/l2loss_op_gpu.cu.pic.o' was not created\nERROR: /home/shyo/packages/tensorflow/tensorflow/core/kernels/BUILD:3602:1: not all outputs were created or valid\n\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 285.352s, Critical Path: 52.48s\nINFO: 2673 processes: 2673 local.\nFAILED: Build did NOT complete successfully", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04.5 LTS (Xenial Xerus)\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: no\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: we are building TF 1.11, command below is not usable.\r\n\r\nHere is git commit info:\r\n```sh\r\n$ git log -1 \r\ncommit c19e29306ce1777456b2dbb3a14f511edf7883a8\r\nAuthor: Austin Anderson <angerson@google.com>\r\nDate:   Tue Sep 25 14:50:52 2018 -0700\r\n\r\n    Final version strings for 1.11.0 (#22513)\r\n```\r\nWe are compiling code from this commit without any custom modification.\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: 0.16.1\r\n- **GCC/Compiler version (if compiling from source)**: gcc (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\n- **CUDA/cuDNN version**:CUDA 8.0 / cuDNN 7\r\n- **GPU model and memory**: (GeForce GTX 1080 Ti, 11178MiB) x 4\r\n- **Exact command to reproduce**: `bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --verbose_failures`\r\n\r\n### Describe the problem\r\nWe have successfully built TF 1.10 under the same machine and configuration, we can even build TF 1.10 as for now. However, it turns out that it's not working when building TF 1.11. Here are logs generated by bazel:\r\n\r\n### Source code / logs\r\n```\r\nINFO: From Compiling tensorflow/core/kernels/l2loss_op_gpu.cu.cc [for host]:\r\nexternal/com_google_absl/absl/strings/string_view.h(492): error: calling a __host__ function(\"__builtin_strlen\") from a __device__ function(\"absl::string_view::StrLenInternal\") i\r\ns not allowed\r\n\r\n1 error detected in the compilation of \"/tmp/tmpxft_00000f73_00000000-7_l2loss_op_gpu.cu.cpp1.ii\".\r\nERROR: /home/shyo/packages/tensorflow/tensorflow/core/kernels/BUILD:3602:1: output 'tensorflow/core/kernels/_objs/l2loss_op_gpu/l2loss_op_gpu.cu.pic.o' was not created\r\nERROR: /home/shyo/packages/tensorflow/tensorflow/core/kernels/BUILD:3602:1: not all outputs were created or valid\r\n\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 285.352s, Critical Path: 52.48s\r\nINFO: 2673 processes: 2673 local.\r\nFAILED: Build did NOT complete successfully\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20150", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20150/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20150/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20150/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20150", "id": 334171527, "node_id": "MDU6SXNzdWUzMzQxNzE1Mjc=", "number": 20150, "title": "unable to cast to quantized data types uint8 -> quint8", "user": {"login": "d4l3k", "id": 909104, "node_id": "MDQ6VXNlcjkwOTEwNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/909104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d4l3k", "html_url": "https://github.com/d4l3k", "followers_url": "https://api.github.com/users/d4l3k/followers", "following_url": "https://api.github.com/users/d4l3k/following{/other_user}", "gists_url": "https://api.github.com/users/d4l3k/gists{/gist_id}", "starred_url": "https://api.github.com/users/d4l3k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d4l3k/subscriptions", "organizations_url": "https://api.github.com/users/d4l3k/orgs", "repos_url": "https://api.github.com/users/d4l3k/repos", "events_url": "https://api.github.com/users/d4l3k/events{/privacy}", "received_events_url": "https://api.github.com/users/d4l3k/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-06-20T17:08:44Z", "updated_at": "2018-08-04T19:04:56Z", "closed_at": "2018-08-04T19:04:56Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The <code>Cast</code> operator doesn't support casting to quantized data types such as <code>quint8</code>. This makes it a pain to implement custom quantization logic in Tensorflow. Since both quint8 and uint8 have the same underlying data type it should be fairly easy to implement conversion between them.</p>\n<pre><code>tensor_test.go:33: Cast uint8 to quint8 is not supported\n  [[Node: QuantizeProbabilistic/Quint8/Cast = Cast[DstT=DT_QUINT8, SrcT=DT_UINT8, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](QuantizeProbabilistic/Cast)]]\n</code></pre>\n<p>You can work around it by casting to uint8, export from tensorflow in to the host language and then create a new tensor with the specified data type, but that's certainly less than ideal.</p>\n<p>On a side note: I ran into this problem while trying to implement a randomized quantize that when averaged returns the original number. Maybe that's something that should be in the core tensorflow library?</p>\n<p>Template:<br>\nHave I written custom code? No<br>\nOS Platform and Distribution? Linux, Arch<br>\nTensorFlow installed from? Master<br>\nTensorFlow version? Master<br>\nBazel version? 0.14.1- (@non-git)<br>\nCUDA/cuDNN version? N/A<br>\nGPU model and memory? N/A<br>\nExact command to reproduce?</p>", "body_text": "The Cast operator doesn't support casting to quantized data types such as quint8. This makes it a pain to implement custom quantization logic in Tensorflow. Since both quint8 and uint8 have the same underlying data type it should be fairly easy to implement conversion between them.\ntensor_test.go:33: Cast uint8 to quint8 is not supported\n  [[Node: QuantizeProbabilistic/Quint8/Cast = Cast[DstT=DT_QUINT8, SrcT=DT_UINT8, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](QuantizeProbabilistic/Cast)]]\n\nYou can work around it by casting to uint8, export from tensorflow in to the host language and then create a new tensor with the specified data type, but that's certainly less than ideal.\nOn a side note: I ran into this problem while trying to implement a randomized quantize that when averaged returns the original number. Maybe that's something that should be in the core tensorflow library?\nTemplate:\nHave I written custom code? No\nOS Platform and Distribution? Linux, Arch\nTensorFlow installed from? Master\nTensorFlow version? Master\nBazel version? 0.14.1- (@non-git)\nCUDA/cuDNN version? N/A\nGPU model and memory? N/A\nExact command to reproduce?", "body": "The `Cast` operator doesn't support casting to quantized data types such as `quint8`. This makes it a pain to implement custom quantization logic in Tensorflow. Since both quint8 and uint8 have the same underlying data type it should be fairly easy to implement conversion between them.\r\n\r\n```\r\ntensor_test.go:33: Cast uint8 to quint8 is not supported\r\n  [[Node: QuantizeProbabilistic/Quint8/Cast = Cast[DstT=DT_QUINT8, SrcT=DT_UINT8, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](QuantizeProbabilistic/Cast)]]\r\n```\r\n\r\nYou can work around it by casting to uint8, export from tensorflow in to the host language and then create a new tensor with the specified data type, but that's certainly less than ideal.\r\n\r\nOn a side note: I ran into this problem while trying to implement a randomized quantize that when averaged returns the original number. Maybe that's something that should be in the core tensorflow library?\r\n\r\nTemplate:\r\nHave I written custom code? No\r\nOS Platform and Distribution? Linux, Arch\r\nTensorFlow installed from? Master\r\nTensorFlow version? Master\r\nBazel version? 0.14.1- (@non-git)\r\nCUDA/cuDNN version? N/A\r\nGPU model and memory? N/A\r\nExact command to reproduce?\r\n\r\n"}
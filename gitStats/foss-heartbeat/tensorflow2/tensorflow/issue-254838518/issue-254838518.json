{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12773", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12773/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12773/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12773/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12773", "id": 254838518, "node_id": "MDU6SXNzdWUyNTQ4Mzg1MTg=", "number": 12773, "title": "Halted-partial dataset download for speech_commands example renders example ~broken", "user": {"login": "quaeler", "id": 22581048, "node_id": "MDQ6VXNlcjIyNTgxMDQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/22581048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quaeler", "html_url": "https://github.com/quaeler", "followers_url": "https://api.github.com/users/quaeler/followers", "following_url": "https://api.github.com/users/quaeler/following{/other_user}", "gists_url": "https://api.github.com/users/quaeler/gists{/gist_id}", "starred_url": "https://api.github.com/users/quaeler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quaeler/subscriptions", "organizations_url": "https://api.github.com/users/quaeler/orgs", "repos_url": "https://api.github.com/users/quaeler/repos", "events_url": "https://api.github.com/users/quaeler/events{/privacy}", "received_events_url": "https://api.github.com/users/quaeler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-02T22:00:55Z", "updated_at": "2017-09-04T00:13:06Z", "closed_at": "2017-09-04T00:12:29Z", "author_association": "CONTRIBUTOR", "body_html": "<p>If a user attempts to run <code>tensorflow/examples/speech_commands/train.py</code> for the first time against a new <code>data_dir</code> location and then halts the execution of Python before the download can finish, subsequent attempts to run the script using the same data_dir specification (or lack of specification) will result in Python exiting in error with the gzip libraries complaining about incorrect CRC value.</p>\n<p>This is because <code>AudioProcessor.maybe_download_and_extract_dataset(...)</code> in <code>tensorflow/examples/speech_commands/input_data.py</code> only downloads if the file doesn't already exist (sensibly) and assumes that <code>tarfile.open(...).extractall(...)</code> will complete error-free (less sensibly) - which it won't on the partially downloaded gzipped-tar asset.</p>\n<p>This probably merits a documentation inclusion as opposed to a code re-write since it's example code, but that decision is above my pay-grade.</p>", "body_text": "If a user attempts to run tensorflow/examples/speech_commands/train.py for the first time against a new data_dir location and then halts the execution of Python before the download can finish, subsequent attempts to run the script using the same data_dir specification (or lack of specification) will result in Python exiting in error with the gzip libraries complaining about incorrect CRC value.\nThis is because AudioProcessor.maybe_download_and_extract_dataset(...) in tensorflow/examples/speech_commands/input_data.py only downloads if the file doesn't already exist (sensibly) and assumes that tarfile.open(...).extractall(...) will complete error-free (less sensibly) - which it won't on the partially downloaded gzipped-tar asset.\nThis probably merits a documentation inclusion as opposed to a code re-write since it's example code, but that decision is above my pay-grade.", "body": "If a user attempts to run `tensorflow/examples/speech_commands/train.py` for the first time against a new `data_dir` location and then halts the execution of Python before the download can finish, subsequent attempts to run the script using the same data_dir specification (or lack of specification) will result in Python exiting in error with the gzip libraries complaining about incorrect CRC value.\r\n\r\nThis is because `AudioProcessor.maybe_download_and_extract_dataset(...)` in `tensorflow/examples/speech_commands/input_data.py` only downloads if the file doesn't already exist (sensibly) and assumes that `tarfile.open(...).extractall(...)` will complete error-free (less sensibly) - which it won't on the partially downloaded gzipped-tar asset. \r\n\r\nThis probably merits a documentation inclusion as opposed to a code re-write since it's example code, but that decision is above my pay-grade.\r\n"}
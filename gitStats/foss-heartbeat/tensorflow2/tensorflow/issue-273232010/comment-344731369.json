{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/344731369", "html_url": "https://github.com/tensorflow/tensorflow/issues/14496#issuecomment-344731369", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14496", "id": 344731369, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDczMTM2OQ==", "user": {"login": "georgh", "id": 1831252, "node_id": "MDQ6VXNlcjE4MzEyNTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1831252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgh", "html_url": "https://github.com/georgh", "followers_url": "https://api.github.com/users/georgh/followers", "following_url": "https://api.github.com/users/georgh/following{/other_user}", "gists_url": "https://api.github.com/users/georgh/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgh/subscriptions", "organizations_url": "https://api.github.com/users/georgh/orgs", "repos_url": "https://api.github.com/users/georgh/repos", "events_url": "https://api.github.com/users/georgh/events{/privacy}", "received_events_url": "https://api.github.com/users/georgh/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-15T21:18:42Z", "updated_at": "2017-11-15T21:18:54Z", "author_association": "NONE", "body_html": "<p>Thank you for your advise. If that's a bad Idea, why does the performance guide state:</p>\n<blockquote>\n<p>A common alternative optimization is to set the number of threads in both pools equal to the number of physical cores rather than logical cores.</p>\n</blockquote>\n<p>Is this only valid if you set it to the number of physical cores?<br>\nI didn't do that much tests with these values, because I can't always use the complete cluster for my computations. Setting both values to 20 restricts tensorflow to 20 logical cores and leaves therefore enough room for other people to use the system.</p>\n<p>But anyway - regarding the error using MKL the options to not show any effect.<br>\nBuild with MKL and inter/intra set to 20 I only get a CPU usage of around 150% (1.5 cores) using a build without MKL I achieve 2000 % (20 cores).</p>", "body_text": "Thank you for your advise. If that's a bad Idea, why does the performance guide state:\n\nA common alternative optimization is to set the number of threads in both pools equal to the number of physical cores rather than logical cores.\n\nIs this only valid if you set it to the number of physical cores?\nI didn't do that much tests with these values, because I can't always use the complete cluster for my computations. Setting both values to 20 restricts tensorflow to 20 logical cores and leaves therefore enough room for other people to use the system.\nBut anyway - regarding the error using MKL the options to not show any effect.\nBuild with MKL and inter/intra set to 20 I only get a CPU usage of around 150% (1.5 cores) using a build without MKL I achieve 2000 % (20 cores).", "body": "Thank you for your advise. If that's a bad Idea, why does the performance guide state:\r\n> A common alternative optimization is to set the number of threads in both pools equal to the number of physical cores rather than logical cores.\r\n\r\nIs this only valid if you set it to the number of physical cores? \r\nI didn't do that much tests with these values, because I can't always use the complete cluster for my computations. Setting both values to 20 restricts tensorflow to 20 logical cores and leaves therefore enough room for other people to use the system.\r\n\r\nBut anyway - regarding the error using MKL the options to not show any effect.\r\nBuild with MKL and inter/intra set to 20 I only get a CPU usage of around 150% (1.5 cores) using a build without MKL I achieve 2000 % (20 cores).\r\n\r\n \r\n\r\n"}
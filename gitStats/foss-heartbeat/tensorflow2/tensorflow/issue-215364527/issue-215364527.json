{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8552", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8552/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8552/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8552/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8552", "id": 215364527, "node_id": "MDU6SXNzdWUyMTUzNjQ1Mjc=", "number": 8552, "title": "SyncReplicasOptimizer' object has no attribute 'get_clean_up_op'", "user": {"login": "backyes", "id": 920727, "node_id": "MDQ6VXNlcjkyMDcyNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/920727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/backyes", "html_url": "https://github.com/backyes", "followers_url": "https://api.github.com/users/backyes/followers", "following_url": "https://api.github.com/users/backyes/following{/other_user}", "gists_url": "https://api.github.com/users/backyes/gists{/gist_id}", "starred_url": "https://api.github.com/users/backyes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/backyes/subscriptions", "organizations_url": "https://api.github.com/users/backyes/orgs", "repos_url": "https://api.github.com/users/backyes/repos", "events_url": "https://api.github.com/users/backyes/events{/privacy}", "received_events_url": "https://api.github.com/users/backyes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-03-20T09:24:22Z", "updated_at": "2017-07-05T16:08:03Z", "closed_at": "2017-07-04T19:49:33Z", "author_association": "NONE", "body_html": "<pre><code>python /models/slim/train_image_classifier.py \\\n  --worker_replicas=2 \\\n  --num_ps_tasks=1 \\\n  --sync_replicas=True \\\n  --replicas_to_aggregate=2 \\\n  --task=0 \\\n  --dataset_name=imagenet  \\\n  --train_dir=/tmp/train_logs  \\\n  --dataset_split_name=train \\\n  --dataset_dir=/imagenet/dataEgs \\\n  --model_name=inception_v3\n\n</code></pre>\n<p>Run /models/slim/train_image_classifier.py</p>\n<pre><code>INFO:tensorflow:SyncReplicasV2: replicas_to_aggregate=2; total_num_replicas=2\nINFO:tensorflow:Summary name /clone_loss is illegal; using clone_loss instead.\nTraceback (most recent call last):\n  File \"/models/slim/train_image_classifier.py\", line 583, in &lt;module&gt;\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/models/slim/train_image_classifier.py\", line 579, in main\n    sync_optimizer=optimizer if FLAGS.sync_replicas else None)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/slim/python/slim/learning.py\", line 733, in train\n    cleanup_op = sync_optimizer.get_clean_up_op()\nAttributeError: 'SyncReplicasOptimizer' object has no attribute 'get_clean_up_op'\n\n</code></pre>\n<p>I confirm that more than one demos will encounter this issue if using distributed training under tensorflow 1.0.1 image.</p>\n<p>Hope some improvements for distributed training to demo how to use distributed training.</p>\n<p>Thanks.</p>", "body_text": "python /models/slim/train_image_classifier.py \\\n  --worker_replicas=2 \\\n  --num_ps_tasks=1 \\\n  --sync_replicas=True \\\n  --replicas_to_aggregate=2 \\\n  --task=0 \\\n  --dataset_name=imagenet  \\\n  --train_dir=/tmp/train_logs  \\\n  --dataset_split_name=train \\\n  --dataset_dir=/imagenet/dataEgs \\\n  --model_name=inception_v3\n\n\nRun /models/slim/train_image_classifier.py\nINFO:tensorflow:SyncReplicasV2: replicas_to_aggregate=2; total_num_replicas=2\nINFO:tensorflow:Summary name /clone_loss is illegal; using clone_loss instead.\nTraceback (most recent call last):\n  File \"/models/slim/train_image_classifier.py\", line 583, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/models/slim/train_image_classifier.py\", line 579, in main\n    sync_optimizer=optimizer if FLAGS.sync_replicas else None)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/slim/python/slim/learning.py\", line 733, in train\n    cleanup_op = sync_optimizer.get_clean_up_op()\nAttributeError: 'SyncReplicasOptimizer' object has no attribute 'get_clean_up_op'\n\n\nI confirm that more than one demos will encounter this issue if using distributed training under tensorflow 1.0.1 image.\nHope some improvements for distributed training to demo how to use distributed training.\nThanks.", "body": "```\r\npython /models/slim/train_image_classifier.py \\\r\n  --worker_replicas=2 \\\r\n  --num_ps_tasks=1 \\\r\n  --sync_replicas=True \\\r\n  --replicas_to_aggregate=2 \\\r\n  --task=0 \\\r\n  --dataset_name=imagenet  \\\r\n  --train_dir=/tmp/train_logs  \\\r\n  --dataset_split_name=train \\\r\n  --dataset_dir=/imagenet/dataEgs \\\r\n  --model_name=inception_v3\r\n\r\n````\r\n\r\nRun /models/slim/train_image_classifier.py \r\n\r\n```\r\nINFO:tensorflow:SyncReplicasV2: replicas_to_aggregate=2; total_num_replicas=2\r\nINFO:tensorflow:Summary name /clone_loss is illegal; using clone_loss instead.\r\nTraceback (most recent call last):\r\n  File \"/models/slim/train_image_classifier.py\", line 583, in <module>\r\n    tf.app.run()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/models/slim/train_image_classifier.py\", line 579, in main\r\n    sync_optimizer=optimizer if FLAGS.sync_replicas else None)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/slim/python/slim/learning.py\", line 733, in train\r\n    cleanup_op = sync_optimizer.get_clean_up_op()\r\nAttributeError: 'SyncReplicasOptimizer' object has no attribute 'get_clean_up_op'\r\n\r\n```\r\n\r\nI confirm that more than one demos will encounter this issue if using distributed training under tensorflow 1.0.1 image. \r\n\r\nHope some improvements for distributed training to demo how to use distributed training. \r\n\r\nThanks. "}
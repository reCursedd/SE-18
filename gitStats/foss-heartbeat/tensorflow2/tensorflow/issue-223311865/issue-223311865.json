{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9356", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9356/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9356/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9356/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9356", "id": 223311865, "node_id": "MDU6SXNzdWUyMjMzMTE4NjU=", "number": 9356, "title": "decode_image return tensor without shape in python", "user": {"login": "ZhangBowen", "id": 3426433, "node_id": "MDQ6VXNlcjM0MjY0MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/3426433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhangBowen", "html_url": "https://github.com/ZhangBowen", "followers_url": "https://api.github.com/users/ZhangBowen/followers", "following_url": "https://api.github.com/users/ZhangBowen/following{/other_user}", "gists_url": "https://api.github.com/users/ZhangBowen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhangBowen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhangBowen/subscriptions", "organizations_url": "https://api.github.com/users/ZhangBowen/orgs", "repos_url": "https://api.github.com/users/ZhangBowen/repos", "events_url": "https://api.github.com/users/ZhangBowen/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhangBowen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2017-04-21T08:18:57Z", "updated_at": "2018-11-19T04:01:10Z", "closed_at": "2017-06-16T21:58:48Z", "author_association": "NONE", "body_html": "<h3>System Information</h3>\n<ul>\n<li><em>OS Platform and Distribution (i.e. Linux Ubuntu 16.0)</em>: CentOS Linux release 7.0.1406 (Core)</li>\n<li><em>TensorFlow installed from (source or binary)?</em>: python3 pip</li>\n<li><em>TensorFlow version</em> : v1.0.0-65-g4763edf-dirty 1.0.1</li>\n<li><em>Python version</em> : Python 3.5.2 :: Anaconda custom (64-bit)</li>\n</ul>\n<h3>Describe the problem clearly</h3>\n<p>When I decode a jpeg file to a tensor with decode_jpeg, the code ran normally.<br>\nbut if I use decode_image instead of decode_jpeg for more compatibilities, It raised a ValueError as follow.<br>\nIs It a bug?<br>\nThanks</p>\n<h3>Source Code / Logs</h3>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">preprocess_image</span>(<span class=\"pl-smi\">image_path</span>):\n    file_content <span class=\"pl-k\">=</span> tf.read_file(image_path)\n    \n    <span class=\"pl-c\"><span class=\"pl-c\">#</span>image = tf.image.decode_jpeg(file_content)</span>\n    image <span class=\"pl-k\">=</span> tf.image.decode_image(file_content)\n    image <span class=\"pl-k\">=</span> tf.image.per_image_standardization(image)\n    image <span class=\"pl-k\">=</span> tf.image.resize_images(image, [<span class=\"pl-c1\">480</span>, <span class=\"pl-c1\">640</span>])</pre></div>\n<p>output :</p>\n<pre><code>Traceback (most recent call last):\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 29, in &lt;module&gt;\n    main()\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 26, in main\n    image = preprocess_image(image_file)\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 15, in preprocess_image\n    image = tf.image.resize_images(image, [480, 640])\n  File \"/data/home/zhangbowen/anaconda3/lib/python3.5/site-packages/tensorflow/python/ops/image_ops_impl.py\", line 643, in resize_images\n    raise ValueError('\\'images\\' contains no shape.')\nValueError: 'images' contains no shape.\n</code></pre>", "body_text": "System Information\n\nOS Platform and Distribution (i.e. Linux Ubuntu 16.0): CentOS Linux release 7.0.1406 (Core)\nTensorFlow installed from (source or binary)?: python3 pip\nTensorFlow version : v1.0.0-65-g4763edf-dirty 1.0.1\nPython version : Python 3.5.2 :: Anaconda custom (64-bit)\n\nDescribe the problem clearly\nWhen I decode a jpeg file to a tensor with decode_jpeg, the code ran normally.\nbut if I use decode_image instead of decode_jpeg for more compatibilities, It raised a ValueError as follow.\nIs It a bug?\nThanks\nSource Code / Logs\ndef preprocess_image(image_path):\n    file_content = tf.read_file(image_path)\n    \n    #image = tf.image.decode_jpeg(file_content)\n    image = tf.image.decode_image(file_content)\n    image = tf.image.per_image_standardization(image)\n    image = tf.image.resize_images(image, [480, 640])\noutput :\nTraceback (most recent call last):\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 29, in <module>\n    main()\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 26, in main\n    image = preprocess_image(image_file)\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 15, in preprocess_image\n    image = tf.image.resize_images(image, [480, 640])\n  File \"/data/home/zhangbowen/anaconda3/lib/python3.5/site-packages/tensorflow/python/ops/image_ops_impl.py\", line 643, in resize_images\n    raise ValueError('\\'images\\' contains no shape.')\nValueError: 'images' contains no shape.", "body": "\r\n### System Information\r\n- *OS Platform and Distribution (i.e. Linux Ubuntu 16.0)*: CentOS Linux release 7.0.1406 (Core)\r\n- *TensorFlow installed from (source or binary)?*: python3 pip\r\n- *TensorFlow version* : v1.0.0-65-g4763edf-dirty 1.0.1\r\n- *Python version* : Python 3.5.2 :: Anaconda custom (64-bit)\r\n\r\n### Describe the problem clearly\r\n\r\nWhen I decode a jpeg file to a tensor with decode_jpeg, the code ran normally.\r\nbut if I use decode_image instead of decode_jpeg for more compatibilities, It raised a ValueError as follow.\r\nIs It a bug?\r\nThanks\r\n\r\n### Source Code / Logs\r\n```python\r\ndef preprocess_image(image_path):\r\n    file_content = tf.read_file(image_path)\r\n    \r\n    #image = tf.image.decode_jpeg(file_content)\r\n    image = tf.image.decode_image(file_content)\r\n    image = tf.image.per_image_standardization(image)\r\n    image = tf.image.resize_images(image, [480, 640])\r\n```\r\noutput : \r\n```\r\nTraceback (most recent call last):\r\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 29, in <module>\r\n    main()\r\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 26, in main\r\n    image = preprocess_image(image_file)\r\n  File \"/data/home/zhangbowen/is_vehicle/classify.py\", line 15, in preprocess_image\r\n    image = tf.image.resize_images(image, [480, 640])\r\n  File \"/data/home/zhangbowen/anaconda3/lib/python3.5/site-packages/tensorflow/python/ops/image_ops_impl.py\", line 643, in resize_images\r\n    raise ValueError('\\'images\\' contains no shape.')\r\nValueError: 'images' contains no shape.\r\n```"}
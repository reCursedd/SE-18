{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/136879241", "pull_request_review_id": 60477344, "id": 136879241, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNjg3OTI0MQ==", "diff_hunk": "@@ -67,12 +67,12 @@ void NewRemoteDevices(Env* env, WorkerCacheInterface* worker_cache,\n     GetStatusResponse resp;\n   };\n   Call* call = new Call;\n-  auto cb = [env, worker_cache, worker_name, done, wi,\n+  auto cb = [env, worker_cache, &worker_name, &done, wi,", "path": "tensorflow/core/distributed_runtime/remote_device.cc", "position": 5, "original_position": 5, "commit_id": "d0f9073a8814883d7520ea4ac71e3cd9fe6b480d", "original_commit_id": "d0f9073a8814883d7520ea4ac71e3cd9fe6b480d", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "body": "Is this safe? `worker_name` is a `const string&` and `cb` might be called after `NewRemoteDevices()` returns and `worker_name` no longer refers to the same object. (Similarly, it seems as if `done` will be destroyed before the version captured by reference in this change is called in the callback.)", "created_at": "2017-09-05T00:43:34Z", "updated_at": "2017-09-05T00:43:49Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12682#discussion_r136879241", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12682", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/136879241"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12682#discussion_r136879241"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12682"}}, "body_html": "<p>Is this safe? <code>worker_name</code> is a <code>const string&amp;</code> and <code>cb</code> might be called after <code>NewRemoteDevices()</code> returns and <code>worker_name</code> no longer refers to the same object. (Similarly, it seems as if <code>done</code> will be destroyed before the version captured by reference in this change is called in the callback.)</p>", "body_text": "Is this safe? worker_name is a const string& and cb might be called after NewRemoteDevices() returns and worker_name no longer refers to the same object. (Similarly, it seems as if done will be destroyed before the version captured by reference in this change is called in the callback.)"}
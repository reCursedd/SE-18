{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/228794778", "html_url": "https://github.com/tensorflow/tensorflow/pull/2711#issuecomment-228794778", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2711", "id": 228794778, "node_id": "MDEyOklzc3VlQ29tbWVudDIyODc5NDc3OA==", "user": {"login": "ibab", "id": 890531, "node_id": "MDQ6VXNlcjg5MDUzMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/890531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibab", "html_url": "https://github.com/ibab", "followers_url": "https://api.github.com/users/ibab/followers", "following_url": "https://api.github.com/users/ibab/following{/other_user}", "gists_url": "https://api.github.com/users/ibab/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibab/subscriptions", "organizations_url": "https://api.github.com/users/ibab/orgs", "repos_url": "https://api.github.com/users/ibab/repos", "events_url": "https://api.github.com/users/ibab/events{/privacy}", "received_events_url": "https://api.github.com/users/ibab/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-27T16:15:08Z", "updated_at": "2016-06-27T16:15:08Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Seems like it's also failing on travis.<br>\nI can reproduce the segfault on my machine when setting the <code>opt_level</code> to <code>-1</code> with the following code:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">from</span> tensorflow.core.protobuf <span class=\"pl-k\">import</span> config_pb2\nconfig <span class=\"pl-k\">=</span> config_pb2.ConfigProto()\nconfig.graph_options.optimizer_options.opt_level <span class=\"pl-k\">=</span> <span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>\ns <span class=\"pl-k\">=</span> tf.Session(<span class=\"pl-v\">config</span><span class=\"pl-k\">=</span>config)\n<span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/gpu:0<span class=\"pl-pds\">'</span></span>):\n  x <span class=\"pl-k\">=</span> np.arange(<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">6</span>).astype(np.float32)\n  s.run(tf.cumsum(x, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">False</span>))</pre></div>\n<p>Strangely, it works without problems when running with the default opt level.<br>\nThe segfault occurs when accessing the memory of the input tensor.</p>", "body_text": "Seems like it's also failing on travis.\nI can reproduce the segfault on my machine when setting the opt_level to -1 with the following code:\nfrom tensorflow.core.protobuf import config_pb2\nconfig = config_pb2.ConfigProto()\nconfig.graph_options.optimizer_options.opt_level = -1\ns = tf.Session(config=config)\nwith tf.device('/gpu:0'):\n  x = np.arange(1, 6).astype(np.float32)\n  s.run(tf.cumsum(x, 0, False))\nStrangely, it works without problems when running with the default opt level.\nThe segfault occurs when accessing the memory of the input tensor.", "body": "Seems like it's also failing on travis.\nI can reproduce the segfault on my machine when setting the `opt_level` to `-1` with the following code:\n\n``` python\nfrom tensorflow.core.protobuf import config_pb2\nconfig = config_pb2.ConfigProto()\nconfig.graph_options.optimizer_options.opt_level = -1\ns = tf.Session(config=config)\nwith tf.device('/gpu:0'):\n  x = np.arange(1, 6).astype(np.float32)\n  s.run(tf.cumsum(x, 0, False))\n```\n\nStrangely, it works without problems when running with the default opt level.\nThe segfault occurs when accessing the memory of the input tensor.\n"}
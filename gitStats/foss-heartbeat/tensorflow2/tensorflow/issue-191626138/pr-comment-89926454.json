{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/89926454", "pull_request_review_id": 10454897, "id": 89926454, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg5OTI2NDU0", "diff_hunk": "@@ -0,0 +1,49 @@\n+include (ExternalProject)\n+\n+set(tensorboard_dependencies)\n+add_custom_target(tensorboard_copy_dependencies)\n+\n+function(tb_new_http_archive)\n+  cmake_parse_arguments(_TB \"\" \"NAME;URL\" \"FILES\" ${ARGN})\n+  ExternalProject_Add(${_TB_NAME}\n+    PREFIX ${_TB_NAME}\n+    URL ${_TB_URL}\n+    DOWNLOAD_DIR \"${DOWNLOAD_LOCATION}/${_TB_NAME}\"\n+    CONFIGURE_COMMAND \"\"\n+    BUILD_COMMAND \"\"\n+    INSTALL_COMMAND \"\"\n+  )\n+\n+  set(src_dir \"${CMAKE_CURRENT_BINARY_DIR}/${_TB_NAME}/src/${_TB_NAME}\")\n+  set(dst_dir \"${CMAKE_CURRENT_BINARY_DIR}/tensorboard_external/${_TB_NAME}\")\n+\n+  foreach(src_file ${_TB_FILES})\n+    add_custom_command(\n+      TARGET tensorboard_copy_dependencies PRE_BUILD\n+      COMMAND ${CMAKE_COMMAND} -E copy ${src_dir}/${src_file} ${dst_dir}/${src_file}\n+    )\n+  endforeach()\n+  \n+  set(tensorboard_dependencies ${tensorboard_dependencies} ${_TB_NAME} PARENT_SCOPE)\n+endfunction()\n+\n+function(tb_http_file)\n+  cmake_parse_arguments(_TB \"\" \"NAME;URL\" \"\" ${ARGN})\n+  get_filename_component(src_file ${_TB_URL} NAME)\n+  file(DOWNLOAD ${_TB_URL} \"${DOWNLOAD_LOCATION}/${_TB_NAME}/${src_file}\")\n+  \n+  set(src_dir \"${DOWNLOAD_LOCATION}/${_TB_NAME}\")\n+  set(dst_dir \"${CMAKE_CURRENT_BINARY_DIR}/tensorboard_external/${_TB_NAME}/file\")\n+  \n+  add_custom_command(\n+    TARGET tensorboard_copy_dependencies PRE_BUILD\n+    COMMAND ${CMAKE_COMMAND} -E copy ${src_dir}/${src_file} ${dst_dir}/${src_file}\n+  )\n+  \n+  add_custom_target(${_TB_NAME} DEPENDS ${src_dir}/${src_file})\n+  set(tensorboard_dependencies ${tensorboard_dependencies} ${_TB_NAME} PARENT_SCOPE)\n+endfunction()\n+\n+include(external/tensorboard_deps.cmake)", "path": "tensorflow/contrib/cmake/external/tensorboard.cmake", "position": null, "original_position": 47, "commit_id": "0dbd8ee3e047d13ed89de0fb65bd83c7556eba0e", "original_commit_id": "f0fc6c09a74b2ad16a953ae15dfa8f4660957c4d", "user": {"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}, "body": "I'm concerned because the TensorBoard team changes these external dependency definitions [about once a week](https://github.com/tensorflow/tensorflow/commits/master/bower.BUILD). I want to make sure the additional burden on the team is as minimal as possible.\r\n\r\nIt would be nice if this information could be extracted from [WORKSPACE](https://github.com/tensorflow/tensorflow/blob/master/WORKSPACE) and [bower.BUILD](https://github.com/tensorflow/tensorflow/blob/master/bower.BUILD) without making any modifications to either of those files. The cmake build already [surgically extracts](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/external/eigen.cmake) similar information from the workspace.bzl file for Eigen.\r\n\r\nAlso is Jenkins going to be regression [testing](https://github.com/tensorflow/tensorflow/blob/de6bbda2353b50944bd06d5b04c86f8c0a62792a/tensorflow/tools/ci_build/windows/cpu/cmake/run_build.bat) this change?", "created_at": "2016-11-29T01:54:15Z", "updated_at": "2016-12-01T00:56:46Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/5844#discussion_r89926454", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5844", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/89926454"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/5844#discussion_r89926454"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5844"}}, "body_html": "<p>I'm concerned because the TensorBoard team changes these external dependency definitions <a href=\"https://github.com/tensorflow/tensorflow/commits/master/bower.BUILD\">about once a week</a>. I want to make sure the additional burden on the team is as minimal as possible.</p>\n<p>It would be nice if this information could be extracted from <a href=\"https://github.com/tensorflow/tensorflow/blob/master/WORKSPACE\">WORKSPACE</a> and <a href=\"https://github.com/tensorflow/tensorflow/blob/master/bower.BUILD\">bower.BUILD</a> without making any modifications to either of those files. The cmake build already <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/external/eigen.cmake\">surgically extracts</a> similar information from the workspace.bzl file for Eigen.</p>\n<p>Also is Jenkins going to be regression <a href=\"https://github.com/tensorflow/tensorflow/blob/de6bbda2353b50944bd06d5b04c86f8c0a62792a/tensorflow/tools/ci_build/windows/cpu/cmake/run_build.bat\">testing</a> this change?</p>", "body_text": "I'm concerned because the TensorBoard team changes these external dependency definitions about once a week. I want to make sure the additional burden on the team is as minimal as possible.\nIt would be nice if this information could be extracted from WORKSPACE and bower.BUILD without making any modifications to either of those files. The cmake build already surgically extracts similar information from the workspace.bzl file for Eigen.\nAlso is Jenkins going to be regression testing this change?", "in_reply_to_id": 89825604}
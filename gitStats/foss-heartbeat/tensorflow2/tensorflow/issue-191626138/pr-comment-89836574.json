{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/89836574", "pull_request_review_id": 10369452, "id": 89836574, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg5ODM2NTc0", "diff_hunk": "@@ -0,0 +1,49 @@\n+include (ExternalProject)\n+\n+set(tensorboard_dependencies)\n+add_custom_target(tensorboard_copy_dependencies)\n+\n+function(tb_new_http_archive)\n+  cmake_parse_arguments(_TB \"\" \"NAME;URL\" \"FILES\" ${ARGN})\n+  ExternalProject_Add(${_TB_NAME}\n+    PREFIX ${_TB_NAME}\n+    URL ${_TB_URL}\n+    DOWNLOAD_DIR \"${DOWNLOAD_LOCATION}/${_TB_NAME}\"\n+    CONFIGURE_COMMAND \"\"\n+    BUILD_COMMAND \"\"\n+    INSTALL_COMMAND \"\"\n+  )\n+\n+  set(src_dir \"${CMAKE_CURRENT_BINARY_DIR}/${_TB_NAME}/src/${_TB_NAME}\")\n+  set(dst_dir \"${CMAKE_CURRENT_BINARY_DIR}/tensorboard_external/${_TB_NAME}\")\n+\n+  foreach(src_file ${_TB_FILES})\n+    add_custom_command(\n+      TARGET tensorboard_copy_dependencies PRE_BUILD\n+      COMMAND ${CMAKE_COMMAND} -E copy ${src_dir}/${src_file} ${dst_dir}/${src_file}\n+    )\n+  endforeach()\n+  \n+  set(tensorboard_dependencies ${tensorboard_dependencies} ${_TB_NAME} PARENT_SCOPE)\n+endfunction()\n+\n+function(tb_http_file)\n+  cmake_parse_arguments(_TB \"\" \"NAME;URL\" \"\" ${ARGN})\n+  get_filename_component(src_file ${_TB_URL} NAME)\n+  file(DOWNLOAD ${_TB_URL} \"${DOWNLOAD_LOCATION}/${_TB_NAME}/${src_file}\")\n+  \n+  set(src_dir \"${DOWNLOAD_LOCATION}/${_TB_NAME}\")\n+  set(dst_dir \"${CMAKE_CURRENT_BINARY_DIR}/tensorboard_external/${_TB_NAME}/file\")\n+  \n+  add_custom_command(\n+    TARGET tensorboard_copy_dependencies PRE_BUILD\n+    COMMAND ${CMAKE_COMMAND} -E copy ${src_dir}/${src_file} ${dst_dir}/${src_file}\n+  )\n+  \n+  add_custom_target(${_TB_NAME} DEPENDS ${src_dir}/${src_file})\n+  set(tensorboard_dependencies ${tensorboard_dependencies} ${_TB_NAME} PARENT_SCOPE)\n+endfunction()\n+\n+include(external/tensorboard_deps.cmake)", "path": "tensorflow/contrib/cmake/external/tensorboard.cmake", "position": null, "original_position": 47, "commit_id": "0dbd8ee3e047d13ed89de0fb65bd83c7556eba0e", "original_commit_id": "f0fc6c09a74b2ad16a953ae15dfa8f4660957c4d", "user": {"login": "vit-stepanovs", "id": 22799507, "node_id": "MDQ6VXNlcjIyNzk5NTA3", "avatar_url": "https://avatars0.githubusercontent.com/u/22799507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vit-stepanovs", "html_url": "https://github.com/vit-stepanovs", "followers_url": "https://api.github.com/users/vit-stepanovs/followers", "following_url": "https://api.github.com/users/vit-stepanovs/following{/other_user}", "gists_url": "https://api.github.com/users/vit-stepanovs/gists{/gist_id}", "starred_url": "https://api.github.com/users/vit-stepanovs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vit-stepanovs/subscriptions", "organizations_url": "https://api.github.com/users/vit-stepanovs/orgs", "repos_url": "https://api.github.com/users/vit-stepanovs/repos", "events_url": "https://api.github.com/users/vit-stepanovs/events{/privacy}", "received_events_url": "https://api.github.com/users/vit-stepanovs/received_events", "type": "User", "site_admin": false}, "body": "I generated this file myself off WORKSPACE/bower.BUILD files, hence it is separate from tensorboard.cmake. I am happy to share my script if needed, but I think it may be better to modify the one script that updates WORKSPACE/bower.BUILD to do the same to this file (from a maintenance perspective, I guess it is better to have one script).", "created_at": "2016-11-28T17:39:52Z", "updated_at": "2016-12-01T00:56:46Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/5844#discussion_r89836574", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5844", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/89836574"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/5844#discussion_r89836574"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5844"}}, "body_html": "<p>I generated this file myself off WORKSPACE/bower.BUILD files, hence it is separate from tensorboard.cmake. I am happy to share my script if needed, but I think it may be better to modify the one script that updates WORKSPACE/bower.BUILD to do the same to this file (from a maintenance perspective, I guess it is better to have one script).</p>", "body_text": "I generated this file myself off WORKSPACE/bower.BUILD files, hence it is separate from tensorboard.cmake. I am happy to share my script if needed, but I think it may be better to modify the one script that updates WORKSPACE/bower.BUILD to do the same to this file (from a maintenance perspective, I guess it is better to have one script).", "in_reply_to_id": 89825604}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/89909540", "pull_request_review_id": 10438847, "id": 89909540, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg5OTA5NTQw", "diff_hunk": "@@ -0,0 +1,49 @@\n+include (ExternalProject)\n+\n+set(tensorboard_dependencies)\n+add_custom_target(tensorboard_copy_dependencies)\n+\n+function(tb_new_http_archive)\n+  cmake_parse_arguments(_TB \"\" \"NAME;URL\" \"FILES\" ${ARGN})\n+  ExternalProject_Add(${_TB_NAME}\n+    PREFIX ${_TB_NAME}\n+    URL ${_TB_URL}\n+    DOWNLOAD_DIR \"${DOWNLOAD_LOCATION}/${_TB_NAME}\"\n+    CONFIGURE_COMMAND \"\"\n+    BUILD_COMMAND \"\"\n+    INSTALL_COMMAND \"\"\n+  )\n+\n+  set(src_dir \"${CMAKE_CURRENT_BINARY_DIR}/${_TB_NAME}/src/${_TB_NAME}\")\n+  set(dst_dir \"${CMAKE_CURRENT_BINARY_DIR}/tensorboard_external/${_TB_NAME}\")\n+\n+  foreach(src_file ${_TB_FILES})\n+    add_custom_command(\n+      TARGET tensorboard_copy_dependencies PRE_BUILD\n+      COMMAND ${CMAKE_COMMAND} -E copy ${src_dir}/${src_file} ${dst_dir}/${src_file}\n+    )\n+  endforeach()\n+  \n+  set(tensorboard_dependencies ${tensorboard_dependencies} ${_TB_NAME} PARENT_SCOPE)\n+endfunction()\n+\n+function(tb_http_file)\n+  cmake_parse_arguments(_TB \"\" \"NAME;URL\" \"\" ${ARGN})\n+  get_filename_component(src_file ${_TB_URL} NAME)\n+  file(DOWNLOAD ${_TB_URL} \"${DOWNLOAD_LOCATION}/${_TB_NAME}/${src_file}\")\n+  \n+  set(src_dir \"${DOWNLOAD_LOCATION}/${_TB_NAME}\")\n+  set(dst_dir \"${CMAKE_CURRENT_BINARY_DIR}/tensorboard_external/${_TB_NAME}/file\")\n+  \n+  add_custom_command(\n+    TARGET tensorboard_copy_dependencies PRE_BUILD\n+    COMMAND ${CMAKE_COMMAND} -E copy ${src_dir}/${src_file} ${dst_dir}/${src_file}\n+  )\n+  \n+  add_custom_target(${_TB_NAME} DEPENDS ${src_dir}/${src_file})\n+  set(tensorboard_dependencies ${tensorboard_dependencies} ${_TB_NAME} PARENT_SCOPE)\n+endfunction()\n+\n+include(external/tensorboard_deps.cmake)", "path": "tensorflow/contrib/cmake/external/tensorboard.cmake", "position": null, "original_position": 47, "commit_id": "0dbd8ee3e047d13ed89de0fb65bd83c7556eba0e", "original_commit_id": "f0fc6c09a74b2ad16a953ae15dfa8f4660957c4d", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "body": "@jart We already produce [a similar file](https://github.com/tensorflow/tensorflow/blob/5657d0dee8d87f4594b3e5902ed3e3ca8d6dfc0a/bower.BUILD) for Bazel. We could modify the script that auto-generates `bower.BUILD` (and the suffix of `WORKSPACE`) so that it also produces the contents of `external/tensorboard_deps.cmake`. Unfortunately that script isn't in the git repository, so we can't easily do it in this PR.", "created_at": "2016-11-28T23:25:34Z", "updated_at": "2016-12-01T00:56:46Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/5844#discussion_r89909540", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5844", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/89909540"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/5844#discussion_r89909540"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5844"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=49262\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jart\">@jart</a> We already produce <a href=\"https://github.com/tensorflow/tensorflow/blob/5657d0dee8d87f4594b3e5902ed3e3ca8d6dfc0a/bower.BUILD\">a similar file</a> for Bazel. We could modify the script that auto-generates <code>bower.BUILD</code> (and the suffix of <code>WORKSPACE</code>) so that it also produces the contents of <code>external/tensorboard_deps.cmake</code>. Unfortunately that script isn't in the git repository, so we can't easily do it in this PR.</p>", "body_text": "@jart We already produce a similar file for Bazel. We could modify the script that auto-generates bower.BUILD (and the suffix of WORKSPACE) so that it also produces the contents of external/tensorboard_deps.cmake. Unfortunately that script isn't in the git repository, so we can't easily do it in this PR.", "in_reply_to_id": 89825604}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5446", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5446/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5446/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5446/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5446", "id": 187681120, "node_id": "MDU6SXNzdWUxODc2ODExMjA=", "number": 5446, "title": "Bus error in quantized network on Android", "user": {"login": "JosiahKane", "id": 6673752, "node_id": "MDQ6VXNlcjY2NzM3NTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/6673752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JosiahKane", "html_url": "https://github.com/JosiahKane", "followers_url": "https://api.github.com/users/JosiahKane/followers", "following_url": "https://api.github.com/users/JosiahKane/following{/other_user}", "gists_url": "https://api.github.com/users/JosiahKane/gists{/gist_id}", "starred_url": "https://api.github.com/users/JosiahKane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JosiahKane/subscriptions", "organizations_url": "https://api.github.com/users/JosiahKane/orgs", "repos_url": "https://api.github.com/users/JosiahKane/repos", "events_url": "https://api.github.com/users/JosiahKane/events{/privacy}", "received_events_url": "https://api.github.com/users/JosiahKane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2016-11-07T10:56:04Z", "updated_at": "2017-06-14T02:38:26Z", "closed_at": "2017-06-14T02:38:26Z", "author_association": "NONE", "body_html": "<p>We have a tensorflow image processing network, which executes fine on osX, iOS and Android. Now that quantization has been pulled into core, we wanted to use it to optimize our install size on phones.</p>\n<p>When we run the quantization process there are as expected small differences in the output on the Mac, but nothing that seems unreasonable. Further, when the quantized network is run on iOS it gives a warning that zero is outside the quantization range and it has to revert to a slow version to handle convolution padding. However it runs fine and the numbers are plausible.</p>\n<p>On Android, however, and running with precisely the same code that worked perfectly with the unquantized version, it completely breaks. On one phone it gives outputs on the order of 1000 where we expect values on the order of 1. On another, probably the more reasonable, phone it just dies following a bus error. This has been true on the latest commits sampled over the last several days.</p>\n<p>If it's relevant, the network was converted from a caffe predecessor using this tool: <a href=\"https://github.com/ethereon/caffe-tensorflow\">https://github.com/ethereon/caffe-tensorflow</a><br>\nRegrettably I'm unable to upload the source code or network in question.</p>", "body_text": "We have a tensorflow image processing network, which executes fine on osX, iOS and Android. Now that quantization has been pulled into core, we wanted to use it to optimize our install size on phones.\nWhen we run the quantization process there are as expected small differences in the output on the Mac, but nothing that seems unreasonable. Further, when the quantized network is run on iOS it gives a warning that zero is outside the quantization range and it has to revert to a slow version to handle convolution padding. However it runs fine and the numbers are plausible.\nOn Android, however, and running with precisely the same code that worked perfectly with the unquantized version, it completely breaks. On one phone it gives outputs on the order of 1000 where we expect values on the order of 1. On another, probably the more reasonable, phone it just dies following a bus error. This has been true on the latest commits sampled over the last several days.\nIf it's relevant, the network was converted from a caffe predecessor using this tool: https://github.com/ethereon/caffe-tensorflow\nRegrettably I'm unable to upload the source code or network in question.", "body": "We have a tensorflow image processing network, which executes fine on osX, iOS and Android. Now that quantization has been pulled into core, we wanted to use it to optimize our install size on phones.\r\n\r\nWhen we run the quantization process there are as expected small differences in the output on the Mac, but nothing that seems unreasonable. Further, when the quantized network is run on iOS it gives a warning that zero is outside the quantization range and it has to revert to a slow version to handle convolution padding. However it runs fine and the numbers are plausible.\r\n\r\nOn Android, however, and running with precisely the same code that worked perfectly with the unquantized version, it completely breaks. On one phone it gives outputs on the order of 1000 where we expect values on the order of 1. On another, probably the more reasonable, phone it just dies following a bus error. This has been true on the latest commits sampled over the last several days.\r\n\r\nIf it's relevant, the network was converted from a caffe predecessor using this tool: https://github.com/ethereon/caffe-tensorflow\r\nRegrettably I'm unable to upload the source code or network in question."}
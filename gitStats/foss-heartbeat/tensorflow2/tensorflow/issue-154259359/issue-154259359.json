{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2325", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2325/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2325/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2325/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2325", "id": 154259359, "node_id": "MDU6SXNzdWUxNTQyNTkzNTk=", "number": 2325, "title": "Random numbers and tf.less_equal", "user": {"login": "chrisblum2", "id": 19307477, "node_id": "MDQ6VXNlcjE5MzA3NDc3", "avatar_url": "https://avatars3.githubusercontent.com/u/19307477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisblum2", "html_url": "https://github.com/chrisblum2", "followers_url": "https://api.github.com/users/chrisblum2/followers", "following_url": "https://api.github.com/users/chrisblum2/following{/other_user}", "gists_url": "https://api.github.com/users/chrisblum2/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisblum2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisblum2/subscriptions", "organizations_url": "https://api.github.com/users/chrisblum2/orgs", "repos_url": "https://api.github.com/users/chrisblum2/repos", "events_url": "https://api.github.com/users/chrisblum2/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisblum2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-05-11T14:35:35Z", "updated_at": "2016-05-12T16:00:11Z", "closed_at": "2016-05-12T16:00:11Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System: Ubuntu 16.04 LTS 64-Bit<br>\nInstalled version of CUDA and cuDNN: none<br>\nTensorflow Version: 0.8.0</p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>When comparing a random variable with a tensor using the tf.less_equal operation, the output result is wrong. I can reproduce the error with the minimal example code shown below. When I use a fixed number rather than a random variable, the output result is correct.</li>\n</ol>\n<p>`<br>\nimport tensorflow as tf<br>\nimport numpy as np</p>\n<p>x=[0,0.3333,0.6666,1] # matrix that I want to compare against another number<br>\nx = tf.convert_to_tensor(np.reshape(x,[2,2]), dtype=tf.float32) # turn into tensor<br>\ny = tf.random_uniform([1,1], minval=0, maxval=1, dtype=tf.float32, seed=12) # random number</p>\n<h1>y = tf.convert_to_tensor(0.63615251, dtype=tf.float32) <strong># uncomment to use fixed number instead</strong></h1>\n<p><strong>z = tf.less_equal(x,y)</strong></p>\n<p>init_op = tf.initialize_all_variables()<br>\nwith tf.Session() as sess:<br>\nsess.run(init_op)<br>\nxe = x.eval()<br>\nye = y.eval()<br>\nze = z.eval()</p>\n<p>print('2-by-2 matrix x:')<br>\nprint(xe)<br>\nprint(' ')<br>\nprint('random value y:')<br>\nprint(ye)<br>\nprint(' ')<br>\nprint('output result of x &lt;= y:')<br>\nprint(ze)<br>\n`</p>\n<h3>I tried:</h3>\n<ol>\n<li>I tried using tf.tile to make \"y\" the same size as \"x\"</li>\n<li>I checked with fixed numbers rather than random numbers; then tf.less_equal works just fine</li>\n</ol>\n<h3>Console output of above minimal example</h3>\n<p>2-by-2 matrix x:<br>\n[[ 0.          0.33329999]<br>\n[ 0.66659999  1.        ]]</p>\n<p>random value y:<br>\n[[ 0.63615251]]</p>\n<p>output result of x &lt;= y:<br>\n[[ True False]<br>\n[False False]]</p>\n<h3>comment to above example:</h3>\n<p>0.333... &lt;= 0.636... should be True, not False</p>", "body_text": "Environment info\nOperating System: Ubuntu 16.04 LTS 64-Bit\nInstalled version of CUDA and cuDNN: none\nTensorflow Version: 0.8.0\nSteps to reproduce\n\nWhen comparing a random variable with a tensor using the tf.less_equal operation, the output result is wrong. I can reproduce the error with the minimal example code shown below. When I use a fixed number rather than a random variable, the output result is correct.\n\n`\nimport tensorflow as tf\nimport numpy as np\nx=[0,0.3333,0.6666,1] # matrix that I want to compare against another number\nx = tf.convert_to_tensor(np.reshape(x,[2,2]), dtype=tf.float32) # turn into tensor\ny = tf.random_uniform([1,1], minval=0, maxval=1, dtype=tf.float32, seed=12) # random number\ny = tf.convert_to_tensor(0.63615251, dtype=tf.float32) # uncomment to use fixed number instead\nz = tf.less_equal(x,y)\ninit_op = tf.initialize_all_variables()\nwith tf.Session() as sess:\nsess.run(init_op)\nxe = x.eval()\nye = y.eval()\nze = z.eval()\nprint('2-by-2 matrix x:')\nprint(xe)\nprint(' ')\nprint('random value y:')\nprint(ye)\nprint(' ')\nprint('output result of x <= y:')\nprint(ze)\n`\nI tried:\n\nI tried using tf.tile to make \"y\" the same size as \"x\"\nI checked with fixed numbers rather than random numbers; then tf.less_equal works just fine\n\nConsole output of above minimal example\n2-by-2 matrix x:\n[[ 0.          0.33329999]\n[ 0.66659999  1.        ]]\nrandom value y:\n[[ 0.63615251]]\noutput result of x <= y:\n[[ True False]\n[False False]]\ncomment to above example:\n0.333... <= 0.636... should be True, not False", "body": "### Environment info\n\nOperating System: Ubuntu 16.04 LTS 64-Bit\nInstalled version of CUDA and cuDNN: none\nTensorflow Version: 0.8.0\n### Steps to reproduce\n1. When comparing a random variable with a tensor using the tf.less_equal operation, the output result is wrong. I can reproduce the error with the minimal example code shown below. When I use a fixed number rather than a random variable, the output result is correct.\n\n`\nimport tensorflow as tf\nimport numpy as np\n\nx=[0,0.3333,0.6666,1] # matrix that I want to compare against another number\nx = tf.convert_to_tensor(np.reshape(x,[2,2]), dtype=tf.float32) # turn into tensor\ny = tf.random_uniform([1,1], minval=0, maxval=1, dtype=tf.float32, seed=12) # random number\n# y = tf.convert_to_tensor(0.63615251, dtype=tf.float32) **# uncomment to use fixed number instead**\n\n**z = tf.less_equal(x,y)**\n\ninit_op = tf.initialize_all_variables()  \nwith tf.Session() as sess:\n  sess.run(init_op)\n  xe = x.eval()\n  ye = y.eval()\n  ze = z.eval()\n\n  print('2-by-2 matrix x:')\n  print(xe)\n  print(' ')\n  print('random value y:')\n  print(ye)\n  print(' ')\n  print('output result of x <= y:')\n  print(ze)\n`\n### I tried:\n1. I tried using tf.tile to make \"y\" the same size as \"x\"\n2. I checked with fixed numbers rather than random numbers; then tf.less_equal works just fine\n### Console output of above minimal example\n\n2-by-2 matrix x:\n[[ 0.          0.33329999]\n [ 0.66659999  1.        ]]\n\nrandom value y:\n[[ 0.63615251]]\n\noutput result of x <= y:\n[[ True False]\n [False False]]\n### comment to above example:\n\n0.333... <= 0.636... should be True, not False\n"}
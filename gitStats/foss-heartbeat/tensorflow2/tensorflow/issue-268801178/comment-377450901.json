{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/377450901", "html_url": "https://github.com/tensorflow/tensorflow/issues/14000#issuecomment-377450901", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14000", "id": 377450901, "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzQ1MDkwMQ==", "user": {"login": "jiayiliu", "id": 1511514, "node_id": "MDQ6VXNlcjE1MTE1MTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1511514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiayiliu", "html_url": "https://github.com/jiayiliu", "followers_url": "https://api.github.com/users/jiayiliu/followers", "following_url": "https://api.github.com/users/jiayiliu/following{/other_user}", "gists_url": "https://api.github.com/users/jiayiliu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiayiliu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiayiliu/subscriptions", "organizations_url": "https://api.github.com/users/jiayiliu/orgs", "repos_url": "https://api.github.com/users/jiayiliu/repos", "events_url": "https://api.github.com/users/jiayiliu/events{/privacy}", "received_events_url": "https://api.github.com/users/jiayiliu/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-30T05:43:55Z", "updated_at": "2018-03-30T05:43:55Z", "author_association": "NONE", "body_html": "<p>Just to close my open point - The official tf.train.saver is not account for the channel order.<br>\nAnd the weight need to be reordered before tf.flatten step, assuming from 2D conv layers to fc layers.<br>\nLuckily/thoughtfully, the MNIST has only 1 channel, so no need for reordering.<br>\nAnd ResNet uses average pooling before the dense layer and it properly handles the spatial dimensions before the last step.  So both are working as mentioned by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=726075\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nealwu\">@nealwu</a>.</p>\n<p>I have corrected my code above to demonstrate how to restore the trained model and reuse with CPU case. -- just a demo.</p>", "body_text": "Just to close my open point - The official tf.train.saver is not account for the channel order.\nAnd the weight need to be reordered before tf.flatten step, assuming from 2D conv layers to fc layers.\nLuckily/thoughtfully, the MNIST has only 1 channel, so no need for reordering.\nAnd ResNet uses average pooling before the dense layer and it properly handles the spatial dimensions before the last step.  So both are working as mentioned by @nealwu.\nI have corrected my code above to demonstrate how to restore the trained model and reuse with CPU case. -- just a demo.", "body": "Just to close my open point - The official tf.train.saver is not account for the channel order.\r\nAnd the weight need to be reordered before tf.flatten step, assuming from 2D conv layers to fc layers.\r\nLuckily/thoughtfully, the MNIST has only 1 channel, so no need for reordering. \r\nAnd ResNet uses average pooling before the dense layer and it properly handles the spatial dimensions before the last step.  So both are working as mentioned by @nealwu.\r\n\r\nI have corrected my code above to demonstrate how to restore the trained model and reuse with CPU case. -- just a demo."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2315", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2315/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2315/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2315/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2315", "id": 154104037, "node_id": "MDU6SXNzdWUxNTQxMDQwMzc=", "number": 2315, "title": "tf.nn.softmax outputs negative values (equal to tf.nn.log_softmax)!", "user": {"login": "avati", "id": 620601, "node_id": "MDQ6VXNlcjYyMDYwMQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/620601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avati", "html_url": "https://github.com/avati", "followers_url": "https://api.github.com/users/avati/followers", "following_url": "https://api.github.com/users/avati/following{/other_user}", "gists_url": "https://api.github.com/users/avati/gists{/gist_id}", "starred_url": "https://api.github.com/users/avati/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avati/subscriptions", "organizations_url": "https://api.github.com/users/avati/orgs", "repos_url": "https://api.github.com/users/avati/repos", "events_url": "https://api.github.com/users/avati/events{/privacy}", "received_events_url": "https://api.github.com/users/avati/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2016-05-10T20:52:28Z", "updated_at": "2016-05-17T16:58:31Z", "closed_at": "2016-05-17T16:58:31Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04.03</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<p>ls -l /usr/local/cuda/lib_/libcud_<br>\n-rw-r--r-- 1 root root    322936 Apr 25 11:05 /usr/local/cuda/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root        16 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so -&gt; libcudart.so.7.5<br>\nlrwxrwxrwx 1 root root        19 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so.7.5 -&gt; libcudart.so.7.5.18<br>\n-rwxr-xr-x 1 root root    383336 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so.7.5.18<br>\n-rw-r--r-- 1 root root    720192 Apr 25 11:05 /usr/local/cuda/lib64/libcudart_static.a<br>\nlrwxrwxrwx 1 3319 users       13 Feb  9 09:48 /usr/local/cuda/lib64/libcudnn.so -&gt; libcudnn.so.4<br>\nlrwxrwxrwx 1 3319 users       17 Feb  9 09:48 /usr/local/cuda/lib64/libcudnn.so.4 -&gt; libcudnn.so.4.0.7<br>\n-rwxrwxr-x 1 3319 users 61453024 Feb  8 14:12 /usr/local/cuda/lib64/libcudnn.so.4.0.7<br>\n-rw-rw-r-- 1 3319 users 62025862 Feb  8 14:12 /usr/local/cuda/lib64/libcudnn_static.a<br>\n-rw-r--r-- 1 root root    189170 Apr 25 11:05 /usr/local/cuda/lib/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root        16 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so -&gt; libcudart.so.7.5<br>\nlrwxrwxrwx 1 root root        19 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so.7.5 -&gt; libcudart.so.7.5.18<br>\n-rwxr-xr-x 1 root root    311596 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so.7.5.18<br>\n-rw-r--r-- 1 root root    558020 Apr 25 11:05 /usr/local/cuda/lib/libcudart_static.a</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed.</li>\n</ol>\n<p><a href=\"https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl</a></p>\n<ol>\n<li>The output from python -c \"import tensorflow; print(tensorflow.<strong>version</strong>)\".</li>\n</ol>\n<p>0.8.0rc0</p>\n<p>If installed from sources, provide the commit hash:</p>\n<h3>Steps to reproduce</h3>\n<p>It appears that tf.nn.softmax is output'ing negative values. After a lot of debugging, i added the following tf.Print line right after the call to tf.nn.softmax(). The output does indeed have negative values.. Strangely enough, the values match the output of tf.nn.log_softmax()!</p>\n<p><a href=\"https://github.com/sdlg/nlc/blob/04af660b23218c026983785f339afeea19cd4e25/nlc_model.py#L152\">https://github.com/sdlg/nlc/blob/04af660b23218c026983785f339afeea19cd4e25/nlc_model.py#L152</a></p>\n<p>This issue could not be reproduced with simple test cases. tf.nn.softmax() behaves well in simple test cases.</p>\n<h3>What have you tried?</h3>\n<ol>\n<li></li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment).</p>\n<p>I tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-29.343697]<br>\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.83346]<br>\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-29.535496]<br>\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.830235]<br>\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.42857]</p>", "body_text": "Environment info\nOperating System: Ubuntu 14.04.03\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nls -l /usr/local/cuda/lib_/libcud_\n-rw-r--r-- 1 root root    322936 Apr 25 11:05 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root        19 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root    383336 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root    720192 Apr 25 11:05 /usr/local/cuda/lib64/libcudart_static.a\nlrwxrwxrwx 1 3319 users       13 Feb  9 09:48 /usr/local/cuda/lib64/libcudnn.so -> libcudnn.so.4\nlrwxrwxrwx 1 3319 users       17 Feb  9 09:48 /usr/local/cuda/lib64/libcudnn.so.4 -> libcudnn.so.4.0.7\n-rwxrwxr-x 1 3319 users 61453024 Feb  8 14:12 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rw-rw-r-- 1 3319 users 62025862 Feb  8 14:12 /usr/local/cuda/lib64/libcudnn_static.a\n-rw-r--r-- 1 root root    189170 Apr 25 11:05 /usr/local/cuda/lib/libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root        19 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root    311596 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so.7.5.18\n-rw-r--r-- 1 root root    558020 Apr 25 11:05 /usr/local/cuda/lib/libcudart_static.a\nIf installed from binary pip package, provide:\n\nWhich pip package you installed.\n\nhttps://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl\n\nThe output from python -c \"import tensorflow; print(tensorflow.version)\".\n\n0.8.0rc0\nIf installed from sources, provide the commit hash:\nSteps to reproduce\nIt appears that tf.nn.softmax is output'ing negative values. After a lot of debugging, i added the following tf.Print line right after the call to tf.nn.softmax(). The output does indeed have negative values.. Strangely enough, the values match the output of tf.nn.log_softmax()!\nhttps://github.com/sdlg/nlc/blob/04af660b23218c026983785f339afeea19cd4e25/nlc_model.py#L152\nThis issue could not be reproduced with simple test cases. tf.nn.softmax() behaves well in simple test cases.\nWhat have you tried?\n\n\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment).\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-29.343697]\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.83346]\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-29.535496]\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.830235]\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.42857]", "body": "### Environment info\n\nOperating System: Ubuntu 14.04.03\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\nls -l /usr/local/cuda/lib_/libcud_\n-rw-r--r-- 1 root root    322936 Apr 25 11:05 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root        19 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root    383336 Apr 25 11:05 /usr/local/cuda/lib64/libcudart.so.7.5.18\n-rw-r--r-- 1 root root    720192 Apr 25 11:05 /usr/local/cuda/lib64/libcudart_static.a\nlrwxrwxrwx 1 3319 users       13 Feb  9 09:48 /usr/local/cuda/lib64/libcudnn.so -> libcudnn.so.4\nlrwxrwxrwx 1 3319 users       17 Feb  9 09:48 /usr/local/cuda/lib64/libcudnn.so.4 -> libcudnn.so.4.0.7\n-rwxrwxr-x 1 3319 users 61453024 Feb  8 14:12 /usr/local/cuda/lib64/libcudnn.so.4.0.7\n-rw-rw-r-- 1 3319 users 62025862 Feb  8 14:12 /usr/local/cuda/lib64/libcudnn_static.a\n-rw-r--r-- 1 root root    189170 Apr 25 11:05 /usr/local/cuda/lib/libcudadevrt.a\nlrwxrwxrwx 1 root root        16 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so -> libcudart.so.7.5\nlrwxrwxrwx 1 root root        19 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so.7.5 -> libcudart.so.7.5.18\n-rwxr-xr-x 1 root root    311596 Apr 25 11:05 /usr/local/cuda/lib/libcudart.so.7.5.18\n-rw-r--r-- 1 root root    558020 Apr 25 11:05 /usr/local/cuda/lib/libcudart_static.a\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\n\nhttps://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.7.1-cp27-none-linux_x86_64.whl\n1. The output from python -c \"import tensorflow; print(tensorflow.**version**)\".\n\n0.8.0rc0\n\nIf installed from sources, provide the commit hash:\n### Steps to reproduce\n\nIt appears that tf.nn.softmax is output'ing negative values. After a lot of debugging, i added the following tf.Print line right after the call to tf.nn.softmax(). The output does indeed have negative values.. Strangely enough, the values match the output of tf.nn.log_softmax()!\n\nhttps://github.com/sdlg/nlc/blob/04af660b23218c026983785f339afeea19cd4e25/nlc_model.py#L152\n\nThis issue could not be reproduced with simple test cases. tf.nn.softmax() behaves well in simple test cases.\n### What have you tried?\n\n1.\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-29.343697]\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.83346]\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-29.535496]\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.830235]\nI tensorflow/core/kernels/logging_ops.cc:79] Checking for negative[-26.42857]\n"}
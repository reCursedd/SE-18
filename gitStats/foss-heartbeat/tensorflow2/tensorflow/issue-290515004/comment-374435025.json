{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/374435025", "html_url": "https://github.com/tensorflow/tensorflow/issues/16291#issuecomment-374435025", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16291", "id": 374435025, "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDQzNTAyNQ==", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-20T00:51:22Z", "updated_at": "2018-03-20T00:51:22Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=10304029\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Kejie-Wang\">@Kejie-Wang</a> : Thanks. Though, without the protobuf symbols being exported by <code>libtensorflow_cc.so</code>, how were you linking in the protobuf library to your test program? I wonder if there is some discrepancy between the version of protobuf used by TensorFlow to generate the header files and the version of protobuf you're linking in when compiling your test program.</p>\n<p>If you could share the exact command-line used to build your test program, that would help. I'd expect it would be something like:</p>\n<div class=\"highlight highlight-source-shell\"><pre>bazel build -c opt --config=monolithic //tensorflow:libtensorflow_cc.so\ng++ -I. -ltensorflow_cc -L ./bazel-bin/tensorflow  -I bazel-genfiles <span class=\"pl-k\">&lt;</span>additional flags<span class=\"pl-k\">&gt;</span> test.cc</pre></div>\n<p>Where <code>test.cc</code> is the contents of the program you <a href=\"https://github.com/tensorflow/tensorflow/issues/16291#issuecomment-373283271\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/16291/hovercard\">alluded to earlier</a> - and I'm particularly curious about that those \"additional flags\" are and/or which version of the protobuf libraries you're linking against.</p>", "body_text": "@Kejie-Wang : Thanks. Though, without the protobuf symbols being exported by libtensorflow_cc.so, how were you linking in the protobuf library to your test program? I wonder if there is some discrepancy between the version of protobuf used by TensorFlow to generate the header files and the version of protobuf you're linking in when compiling your test program.\nIf you could share the exact command-line used to build your test program, that would help. I'd expect it would be something like:\nbazel build -c opt --config=monolithic //tensorflow:libtensorflow_cc.so\ng++ -I. -ltensorflow_cc -L ./bazel-bin/tensorflow  -I bazel-genfiles <additional flags> test.cc\nWhere test.cc is the contents of the program you alluded to earlier - and I'm particularly curious about that those \"additional flags\" are and/or which version of the protobuf libraries you're linking against.", "body": "@Kejie-Wang : Thanks. Though, without the protobuf symbols being exported by `libtensorflow_cc.so`, how were you linking in the protobuf library to your test program? I wonder if there is some discrepancy between the version of protobuf used by TensorFlow to generate the header files and the version of protobuf you're linking in when compiling your test program.\r\n\r\nIf you could share the exact command-line used to build your test program, that would help. I'd expect it would be something like:\r\n\r\n```sh\r\nbazel build -c opt --config=monolithic //tensorflow:libtensorflow_cc.so\r\ng++ -I. -ltensorflow_cc -L ./bazel-bin/tensorflow  -I bazel-genfiles <additional flags> test.cc\r\n```\r\n\r\nWhere `test.cc` is the contents of the program you [alluded to earlier](https://github.com/tensorflow/tensorflow/issues/16291#issuecomment-373283271) - and I'm particularly curious about that those \"additional flags\" are and/or which version of the protobuf libraries you're linking against."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/373283271", "html_url": "https://github.com/tensorflow/tensorflow/issues/16291#issuecomment-373283271", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16291", "id": 373283271, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzI4MzI3MQ==", "user": {"login": "Kejie-Wang", "id": 10304029, "node_id": "MDQ6VXNlcjEwMzA0MDI5", "avatar_url": "https://avatars0.githubusercontent.com/u/10304029?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kejie-Wang", "html_url": "https://github.com/Kejie-Wang", "followers_url": "https://api.github.com/users/Kejie-Wang/followers", "following_url": "https://api.github.com/users/Kejie-Wang/following{/other_user}", "gists_url": "https://api.github.com/users/Kejie-Wang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kejie-Wang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kejie-Wang/subscriptions", "organizations_url": "https://api.github.com/users/Kejie-Wang/orgs", "repos_url": "https://api.github.com/users/Kejie-Wang/repos", "events_url": "https://api.github.com/users/Kejie-Wang/events{/privacy}", "received_events_url": "https://api.github.com/users/Kejie-Wang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-15T07:16:29Z", "updated_at": "2018-03-15T07:17:35Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5453737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tatatodd\">@tatatodd</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6732996\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ChengshuLi\">@ChengshuLi</a><br>\nThe same issue! More information supplied. I find that this wired bug occurs only in string field and all string field in the project. In other words, all string fields share the same memory location. Also, this bug still exists in tensorflow-1.6. Any solutions? Thanks!</p>\n<div class=\"highlight highlight-source-c++\"><pre>#<span class=\"pl-k\">include</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tensorflow/core/protobuf/control_flow.pb.h<span class=\"pl-pds\">\"</span></span>\n#<span class=\"pl-k\">include</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tensorflow/core/protobuf/config.pb.h<span class=\"pl-pds\">\"</span></span>\n#<span class=\"pl-k\">include</span> <span class=\"pl-s\"><span class=\"pl-pds\">&lt;</span>iostream<span class=\"pl-pds\">&gt;</span></span>\n\n<span class=\"pl-k\">int</span> <span class=\"pl-en\">main</span>() {\n  tensorflow::CondContextDef options;\n  tensorflow::GPUOptions gpu_options;\n\n  gpu_options.<span class=\"pl-c1\">set_allocator_type</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>allocator_type<span class=\"pl-pds\">\"</span></span>);\n  options.<span class=\"pl-c1\">set_context_name</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>context<span class=\"pl-pds\">\"</span></span>);\n  options.<span class=\"pl-c1\">set_pred_name</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>pred<span class=\"pl-pds\">\"</span></span>);\n  options.<span class=\"pl-c1\">set_pivot_name</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>pivot<span class=\"pl-pds\">\"</span></span>);\n  options.<span class=\"pl-c1\">set_branch</span>(<span class=\"pl-c1\">1</span>);\n\n  std::cout &lt;&lt; <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>context name <span class=\"pl-pds\">\"</span></span> &lt;&lt; options.<span class=\"pl-c1\">context_name</span>() &lt;&lt; std::endl; <span class=\"pl-c\"><span class=\"pl-c\">//</span>print pivot</span>\n  std::cout &lt;&lt; <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>pred name <span class=\"pl-pds\">\"</span></span> &lt;&lt; options.<span class=\"pl-c1\">pred_name</span>()&lt;&lt; std::endl; <span class=\"pl-c\"><span class=\"pl-c\">//</span>print pivot</span>\n  std::cout &lt;&lt; <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>pivot name <span class=\"pl-pds\">\"</span></span> &lt;&lt; options.<span class=\"pl-c1\">pivot_name</span>()&lt;&lt; std::endl; <span class=\"pl-c\"><span class=\"pl-c\">//</span>print pivot</span>\n\n  std::cout &lt;&lt; <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>allocator_type <span class=\"pl-pds\">\"</span></span> &lt;&lt; gpu_options.<span class=\"pl-c1\">allocator_type</span>() &lt;&lt; std::endl; <span class=\"pl-c\"><span class=\"pl-c\">//</span>print pivot</span>\n\n}</pre></div>", "body_text": "@tatatodd @ChengshuLi\nThe same issue! More information supplied. I find that this wired bug occurs only in string field and all string field in the project. In other words, all string fields share the same memory location. Also, this bug still exists in tensorflow-1.6. Any solutions? Thanks!\n#include \"tensorflow/core/protobuf/control_flow.pb.h\"\n#include \"tensorflow/core/protobuf/config.pb.h\"\n#include <iostream>\n\nint main() {\n  tensorflow::CondContextDef options;\n  tensorflow::GPUOptions gpu_options;\n\n  gpu_options.set_allocator_type(\"allocator_type\");\n  options.set_context_name(\"context\");\n  options.set_pred_name(\"pred\");\n  options.set_pivot_name(\"pivot\");\n  options.set_branch(1);\n\n  std::cout << \"context name \" << options.context_name() << std::endl; //print pivot\n  std::cout << \"pred name \" << options.pred_name()<< std::endl; //print pivot\n  std::cout << \"pivot name \" << options.pivot_name()<< std::endl; //print pivot\n\n  std::cout << \"allocator_type \" << gpu_options.allocator_type() << std::endl; //print pivot\n\n}", "body": "@tatatodd @ChengshuLi \r\nThe same issue! More information supplied. I find that this wired bug occurs only in string field and all string field in the project. In other words, all string fields share the same memory location. Also, this bug still exists in tensorflow-1.6. Any solutions? Thanks!\r\n```c++\r\n#include \"tensorflow/core/protobuf/control_flow.pb.h\"\r\n#include \"tensorflow/core/protobuf/config.pb.h\"\r\n#include <iostream>\r\n\r\nint main() {\r\n  tensorflow::CondContextDef options;\r\n  tensorflow::GPUOptions gpu_options;\r\n\r\n  gpu_options.set_allocator_type(\"allocator_type\");\r\n  options.set_context_name(\"context\");\r\n  options.set_pred_name(\"pred\");\r\n  options.set_pivot_name(\"pivot\");\r\n  options.set_branch(1);\r\n\r\n  std::cout << \"context name \" << options.context_name() << std::endl; //print pivot\r\n  std::cout << \"pred name \" << options.pred_name()<< std::endl; //print pivot\r\n  std::cout << \"pivot name \" << options.pivot_name()<< std::endl; //print pivot\r\n\r\n  std::cout << \"allocator_type \" << gpu_options.allocator_type() << std::endl; //print pivot\r\n\r\n}\r\n```"}
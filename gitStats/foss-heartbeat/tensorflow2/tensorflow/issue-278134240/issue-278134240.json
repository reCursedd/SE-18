{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15004", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15004/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15004/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15004/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15004", "id": 278134240, "node_id": "MDU6SXNzdWUyNzgxMzQyNDA=", "number": 15004, "title": "compile error with cmake for windows 10 and GPU enabled", "user": {"login": "cuevas1208", "id": 13240742, "node_id": "MDQ6VXNlcjEzMjQwNzQy", "avatar_url": "https://avatars3.githubusercontent.com/u/13240742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuevas1208", "html_url": "https://github.com/cuevas1208", "followers_url": "https://api.github.com/users/cuevas1208/followers", "following_url": "https://api.github.com/users/cuevas1208/following{/other_user}", "gists_url": "https://api.github.com/users/cuevas1208/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuevas1208/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuevas1208/subscriptions", "organizations_url": "https://api.github.com/users/cuevas1208/orgs", "repos_url": "https://api.github.com/users/cuevas1208/repos", "events_url": "https://api.github.com/users/cuevas1208/events{/privacy}", "received_events_url": "https://api.github.com/users/cuevas1208/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-30T14:15:26Z", "updated_at": "2017-11-30T23:01:17Z", "closed_at": "2017-11-30T23:01:17Z", "author_association": "NONE", "body_html": "<p>Hi,<br>\nI am trying to compile the tensorflow.dll with cmake for windows 10 and GPU enabled. However, the it failed because of the following error:</p>\n<pre><code>\" C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'tf_shared_lock\n': undeclared identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\grappler\\\ndevices.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vcxproj]\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2146: syntax error: m\nissing ';' before identifier 'lock' (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\cor\ne\\grappler\\devices.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vc\nxproj]\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'lock': undecla\nred identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\grappler\\devices.cc\n) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vcxproj]\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'tf_shared_lock\n': undeclared identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\common_ru\nntime\\gpu\\gpu_cudamalloc_allocator.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GP\nU\\tf_core_cpu.vcxproj]\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2146: syntax error: m\nissing ';' before identifier 'lock' (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\cor\ne\\common_runtime\\gpu\\gpu_cudamalloc_allocator.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cma\nke\\build_GPU\\tf_core_cpu.vcxproj]\"\n</code></pre>\n<p>These are the commands I use:<br>\ncmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\Users\\mcuevas\\bin\\swigwin-3.0.12\\swigwin-3.0.12\\swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\mcuevas\\AppData\\Local\\Continuum\\anaconda3\\envs\\acsis_cpu\\python.exe -DPYTHON_LIBRARIES=C:\\Users\\mcuevas\\AppData\\Local\\Continuum\\anaconda3\\pkgs\\python-3.5.2-0\\libs\\python35.lib -Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX2 -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\"</p>\n<p>MSBuild /p:Configuration=Release tf_tutorials_example_trainer.vcxproj</p>\n<p>Thanks in advance.</p>\n<p>My system:<br>\nWindows 10<br>\nCuda 8.0<br>\nCudnn 6<br>\ncmake cmake-3.9.4-win64-x64<br>\nPython 3.5.2<br>\nVS2015</p>", "body_text": "Hi,\nI am trying to compile the tensorflow.dll with cmake for windows 10 and GPU enabled. However, the it failed because of the following error:\n\" C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'tf_shared_lock\n': undeclared identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\grappler\\\ndevices.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vcxproj]\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2146: syntax error: m\nissing ';' before identifier 'lock' (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\cor\ne\\grappler\\devices.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vc\nxproj]\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'lock': undecla\nred identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\grappler\\devices.cc\n) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vcxproj]\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'tf_shared_lock\n': undeclared identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\common_ru\nntime\\gpu\\gpu_cudamalloc_allocator.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GP\nU\\tf_core_cpu.vcxproj]\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2146: syntax error: m\nissing ';' before identifier 'lock' (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\cor\ne\\common_runtime\\gpu\\gpu_cudamalloc_allocator.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cma\nke\\build_GPU\\tf_core_cpu.vcxproj]\"\n\nThese are the commands I use:\ncmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\Users\\mcuevas\\bin\\swigwin-3.0.12\\swigwin-3.0.12\\swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\mcuevas\\AppData\\Local\\Continuum\\anaconda3\\envs\\acsis_cpu\\python.exe -DPYTHON_LIBRARIES=C:\\Users\\mcuevas\\AppData\\Local\\Continuum\\anaconda3\\pkgs\\python-3.5.2-0\\libs\\python35.lib -Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX2 -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\"\nMSBuild /p:Configuration=Release tf_tutorials_example_trainer.vcxproj\nThanks in advance.\nMy system:\nWindows 10\nCuda 8.0\nCudnn 6\ncmake cmake-3.9.4-win64-x64\nPython 3.5.2\nVS2015", "body": "Hi,\r\nI am trying to compile the tensorflow.dll with cmake for windows 10 and GPU enabled. However, the it failed because of the following error:\r\n```\r\n\" C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'tf_shared_lock\r\n': undeclared identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\grappler\\\r\ndevices.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vcxproj]\r\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2146: syntax error: m\r\nissing ';' before identifier 'lock' (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\cor\r\ne\\grappler\\devices.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vc\r\nxproj]\r\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'lock': undecla\r\nred identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\grappler\\devices.cc\r\n) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GPU\\tf_core_cpu.vcxproj]\r\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2065: 'tf_shared_lock\r\n': undeclared identifier (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\core\\common_ru\r\nntime\\gpu\\gpu_cudamalloc_allocator.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cmake\\build_GP\r\nU\\tf_core_cpu.vcxproj]\r\n  C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow/stream_executor/stream.h(1921): error C2146: syntax error: m\r\nissing ';' before identifier 'lock' (compiling source file C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\cor\r\ne\\common_runtime\\gpu\\gpu_cudamalloc_allocator.cc) [C:\\Users\\mcuevas\\bin\\tensorflow\\tensorflow\\tensorflow\\contrib\\cma\r\nke\\build_GPU\\tf_core_cpu.vcxproj]\"\r\n```\r\nThese are the commands I use:\r\ncmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\Users\\mcuevas\\bin\\swigwin-3.0.12\\swigwin-3.0.12\\swig.exe -DPYTHON_EXECUTABLE=C:\\Users\\mcuevas\\AppData\\Local\\Continuum\\anaconda3\\envs\\acsis_cpu\\python.exe -DPYTHON_LIBRARIES=C:\\Users\\mcuevas\\AppData\\Local\\Continuum\\anaconda3\\pkgs\\python-3.5.2-0\\libs\\python35.lib -Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX2 -Dtensorflow_ENABLE_GPU=ON -DCUDNN_HOME=\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\"\r\n\r\nMSBuild /p:Configuration=Release tf_tutorials_example_trainer.vcxproj\r\n\r\nThanks in advance.\r\n\r\nMy system:\r\nWindows 10\r\nCuda 8.0\r\nCudnn 6\r\ncmake cmake-3.9.4-win64-x64\r\nPython 3.5.2\r\nVS2015"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11043", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11043/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11043/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11043/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11043", "id": 238389793, "node_id": "MDU6SXNzdWUyMzgzODk3OTM=", "number": 11043, "title": "Error with building clang unknown argument", "user": {"login": "eugeny-stoyka", "id": 6972457, "node_id": "MDQ6VXNlcjY5NzI0NTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/6972457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eugeny-stoyka", "html_url": "https://github.com/eugeny-stoyka", "followers_url": "https://api.github.com/users/eugeny-stoyka/followers", "following_url": "https://api.github.com/users/eugeny-stoyka/following{/other_user}", "gists_url": "https://api.github.com/users/eugeny-stoyka/gists{/gist_id}", "starred_url": "https://api.github.com/users/eugeny-stoyka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eugeny-stoyka/subscriptions", "organizations_url": "https://api.github.com/users/eugeny-stoyka/orgs", "repos_url": "https://api.github.com/users/eugeny-stoyka/repos", "events_url": "https://api.github.com/users/eugeny-stoyka/events{/privacy}", "received_events_url": "https://api.github.com/users/eugeny-stoyka/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2017-06-25T16:10:49Z", "updated_at": "2017-06-30T16:20:12Z", "closed_at": "2017-06-29T18:17:28Z", "author_association": "NONE", "body_html": "<p>I configured project for building and execute next command in project directory:</p>\n<p><code>bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer </code></p>\n<p>After that i get this error:</p>\n<blockquote>\n<p>ERROR: /home/eugeny/Git/tensorflow/tensorflow/core/kernels/BUILD:3614:1: C++ compilation of rule '//tensorflow/core/kernels:multinomial_op_gpu' failed: clang failed: error executing command /usr/bin/clang -MD -MF bazel-out/local_linux-py3-opt/bin/tensorflow/core/kernels/_objs/multinomial_op_gpu/tensorflow/core/kernels/multinomial_op_gpu.cu.d ... (remaining 142 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.<br>\nclang: error: unknown argument: '-nvcc_options=relaxed-constexpr'<br>\nclang: error: unknown argument: '-nvcc_options=ftz=true'<br>\nclang: error: cannot find libdevice for sm_35. Provide path to different CUDA installation via --cuda-path, or pass -nocudalib to build without linking with libdevice.<br>\nclang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.<br>\nclang: error: cannot find libdevice for sm_52. Provide path to different CUDA installation via --cuda-path, or pass -nocudalib to build without linking with libdevice.<br>\nclang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.<br>\nclang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.<br>\nTarget //tensorflow/cc:tutorials_example_trainer failed to build</p>\n</blockquote>\n<p>I'm trying to build it with gpu support by using next libs:</p>\n<p>Bazel: 0.5.1<br>\ngcc: 7.1.1<br>\nCuda: 8 (version of cuda/bin/gcc is 5.4.0)<br>\nCUDNN: 6<br>\nprotobuf: 3.3.1</p>\n<p>What shall i change for normal building?</p>", "body_text": "I configured project for building and execute next command in project directory:\nbazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer \nAfter that i get this error:\n\nERROR: /home/eugeny/Git/tensorflow/tensorflow/core/kernels/BUILD:3614:1: C++ compilation of rule '//tensorflow/core/kernels:multinomial_op_gpu' failed: clang failed: error executing command /usr/bin/clang -MD -MF bazel-out/local_linux-py3-opt/bin/tensorflow/core/kernels/_objs/multinomial_op_gpu/tensorflow/core/kernels/multinomial_op_gpu.cu.d ... (remaining 142 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nclang: error: unknown argument: '-nvcc_options=relaxed-constexpr'\nclang: error: unknown argument: '-nvcc_options=ftz=true'\nclang: error: cannot find libdevice for sm_35. Provide path to different CUDA installation via --cuda-path, or pass -nocudalib to build without linking with libdevice.\nclang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.\nclang: error: cannot find libdevice for sm_52. Provide path to different CUDA installation via --cuda-path, or pass -nocudalib to build without linking with libdevice.\nclang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.\nclang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.\nTarget //tensorflow/cc:tutorials_example_trainer failed to build\n\nI'm trying to build it with gpu support by using next libs:\nBazel: 0.5.1\ngcc: 7.1.1\nCuda: 8 (version of cuda/bin/gcc is 5.4.0)\nCUDNN: 6\nprotobuf: 3.3.1\nWhat shall i change for normal building?", "body": "I configured project for building and execute next command in project directory:\r\n\r\n`bazel build -c opt --config=cuda //tensorflow/cc:tutorials_example_trainer\r\n`\r\n\r\nAfter that i get this error:\r\n> ERROR: /home/eugeny/Git/tensorflow/tensorflow/core/kernels/BUILD:3614:1: C++ compilation of rule '//tensorflow/core/kernels:multinomial_op_gpu' failed: clang failed: error executing command /usr/bin/clang -MD -MF bazel-out/local_linux-py3-opt/bin/tensorflow/core/kernels/_objs/multinomial_op_gpu/tensorflow/core/kernels/multinomial_op_gpu.cu.d ... (remaining 142 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\n> clang: error: unknown argument: '-nvcc_options=relaxed-constexpr'\r\n> clang: error: unknown argument: '-nvcc_options=ftz=true'\r\n> clang: error: cannot find libdevice for sm_35. Provide path to different CUDA installation via --cuda-path, or pass -nocudalib to build without linking with libdevice.\r\n> clang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.\r\n> clang: error: cannot find libdevice for sm_52. Provide path to different CUDA installation via --cuda-path, or pass -nocudalib to build without linking with libdevice.\r\n> clang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.\r\n> clang: error: cannot find CUDA installation.  Provide its path via --cuda-path, or pass -nocudainc to build without CUDA includes.\r\n> Target //tensorflow/cc:tutorials_example_trainer failed to build\r\n> \r\n\r\nI'm trying to build it with gpu support by using next libs:\r\n\r\n\r\nBazel: 0.5.1\r\ngcc: 7.1.1\r\nCuda: 8 (version of cuda/bin/gcc is 5.4.0)\r\nCUDNN: 6\r\nprotobuf: 3.3.1\r\n\r\nWhat shall i change for normal building?\r\n\r\n"}
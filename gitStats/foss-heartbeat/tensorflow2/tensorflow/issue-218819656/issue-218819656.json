{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8914", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8914/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8914/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8914/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8914", "id": 218819656, "node_id": "MDU6SXNzdWUyMTg4MTk2NTY=", "number": 8914, "title": "TensorFlow iOS apps crash at launch on iPhone 4s/iPhone 5 simulators", "user": {"login": "timanglade", "id": 9924, "node_id": "MDQ6VXNlcjk5MjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/9924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timanglade", "html_url": "https://github.com/timanglade", "followers_url": "https://api.github.com/users/timanglade/followers", "following_url": "https://api.github.com/users/timanglade/following{/other_user}", "gists_url": "https://api.github.com/users/timanglade/gists{/gist_id}", "starred_url": "https://api.github.com/users/timanglade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timanglade/subscriptions", "organizations_url": "https://api.github.com/users/timanglade/orgs", "repos_url": "https://api.github.com/users/timanglade/repos", "events_url": "https://api.github.com/users/timanglade/events{/privacy}", "received_events_url": "https://api.github.com/users/timanglade/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-04-03T03:06:24Z", "updated_at": "2017-07-12T23:17:04Z", "closed_at": "2017-07-12T23:17:04Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Running <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/ios_examples/simple\">the simple iOS example</a> provided by this repository will crash if I target any iPhone 4s/iPhone 5 <strong>simulator</strong>. The app will crash immediately at launch, before entering <code>didFinishLaunchingWithOptions</code>. The last call I can identify in the debugger is usually <code>tensorflow::internal::LogMessageFatal::~LogMessageFatal:</code>.</p>\n<p>The crashes happen on iPhone 5 simulators running iOS 10.2, 9.3, and 9.1. And on iPhone 4s simulators running iOS 9.3, 9.1, and 8.4.</p>\n<p>I can reproduce this behavior with other TensorFlow iOS apps.</p>\n<p>The same apps that crash in an iPhone 4s/iPhone 5 simulator, will build &amp; run fine on other simulators &amp; devices, <em>e.g.</em> on iPad Air simulator running 10.2, a physical iPad Air running 10.2, or physical iPhone 6s Plus running 10.2. Tests on a device farm including iPhone 4s &amp; iPhone 5 devices were inconclusive\u2026 I\u2019m seeing a very similar crash happen, <a href=\"https://docs.google.com/spreadsheets/d/1a1Erp-KPNA5bZuin5Fokzx0rVoqr2EEFEbKSEjEVpTw/edit\" rel=\"nofollow\">mostly affecting devices running 9.3.5</a>, but the devices/iOS combos that fail on physical devices are slightly inconsistent from run to run (in the simulator the same devices crash 100% of the time no matter what OS I use, and from run to run).</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>This <a href=\"https://github.com/tensorflow/tensorflow/issues/4640\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4640/hovercard\">issue</a> is the only hit I get, but seems unrelated.</p>\n<h3>Environment info</h3>\n<ul>\n<li>Operating System: macOS Sierra 10.12.13</li>\n<li>Commit hash: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/b393fd79fd43242ea9be3ff3141f1809c412fd71/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/b393fd79fd43242ea9be3ff3141f1809c412fd71\"><tt>b393fd7</tt></a> (master as of this writing)</li>\n<li>Bazel Version:\n<pre><code>Build label: 0.4.3-jdk7\nBuild target: bazel-out/local-    fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Dec 22 12:31:38 2016 (1482409898)\nBuild timestamp: 1482409898\nBuild timestamp as int: 1482409898\n</code></pre>\n</li>\n</ul>\n<h3>Minimal reproducible example</h3>\n<ol>\n<li>Prepare the simple iOS example provided by Tensorflow\n<div class=\"highlight highlight-source-shell\"><pre>$ git clone https://github.com/tensorflow/tensorflow.git\n$ <span class=\"pl-c1\">cd</span> tensorflow\n$ tensorflow/contrib/makefile/download_dependencies.sh\n$ tensorflow/contrib/makefile/build_all_ios.sh\n$ open tensorflow/contrib/ios_examples/simple/tf_ios_makefile_example.xcodeproj</pre></div>\n</li>\n<li>Download the Inception graph per the <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile#ios\">instructions</a></li>\n<li>Target the iPhone 5 simulator on iOS 10.2, and Run.</li>\n<li>The app will crash before entering <code>didFinishLaunchingWithOptions</code>.</li>\n<li>(If you target the iPad Air simulator on iOS 10.2, it will work.)</li>\n</ol>", "body_text": "Running the simple iOS example provided by this repository will crash if I target any iPhone 4s/iPhone 5 simulator. The app will crash immediately at launch, before entering didFinishLaunchingWithOptions. The last call I can identify in the debugger is usually tensorflow::internal::LogMessageFatal::~LogMessageFatal:.\nThe crashes happen on iPhone 5 simulators running iOS 10.2, 9.3, and 9.1. And on iPhone 4s simulators running iOS 9.3, 9.1, and 8.4.\nI can reproduce this behavior with other TensorFlow iOS apps.\nThe same apps that crash in an iPhone 4s/iPhone 5 simulator, will build & run fine on other simulators & devices, e.g. on iPad Air simulator running 10.2, a physical iPad Air running 10.2, or physical iPhone 6s Plus running 10.2. Tests on a device farm including iPhone 4s & iPhone 5 devices were inconclusive\u2026 I\u2019m seeing a very similar crash happen, mostly affecting devices running 9.3.5, but the devices/iOS combos that fail on physical devices are slightly inconsistent from run to run (in the simulator the same devices crash 100% of the time no matter what OS I use, and from run to run).\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nThis issue is the only hit I get, but seems unrelated.\nEnvironment info\n\nOperating System: macOS Sierra 10.12.13\nCommit hash: b393fd7 (master as of this writing)\nBazel Version:\nBuild label: 0.4.3-jdk7\nBuild target: bazel-out/local-    fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Dec 22 12:31:38 2016 (1482409898)\nBuild timestamp: 1482409898\nBuild timestamp as int: 1482409898\n\n\n\nMinimal reproducible example\n\nPrepare the simple iOS example provided by Tensorflow\n$ git clone https://github.com/tensorflow/tensorflow.git\n$ cd tensorflow\n$ tensorflow/contrib/makefile/download_dependencies.sh\n$ tensorflow/contrib/makefile/build_all_ios.sh\n$ open tensorflow/contrib/ios_examples/simple/tf_ios_makefile_example.xcodeproj\n\nDownload the Inception graph per the instructions\nTarget the iPhone 5 simulator on iOS 10.2, and Run.\nThe app will crash before entering didFinishLaunchingWithOptions.\n(If you target the iPad Air simulator on iOS 10.2, it will work.)", "body": "Running [the simple iOS example](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/ios_examples/simple) provided by this repository will crash if I target any iPhone 4s/iPhone 5 **simulator**. The app will crash immediately at launch, before entering `didFinishLaunchingWithOptions`. The last call I can identify in the debugger is usually `tensorflow::internal::LogMessageFatal::~LogMessageFatal:`.\r\n\r\nThe crashes happen on iPhone 5 simulators running iOS 10.2, 9.3, and 9.1. And on iPhone 4s simulators running iOS 9.3, 9.1, and 8.4.\r\n\r\nI can reproduce this behavior with other TensorFlow iOS apps.\r\n\r\nThe same apps that crash in an iPhone 4s/iPhone 5 simulator, will build & run fine on other simulators & devices, _e.g._ on iPad Air simulator running 10.2, a physical iPad Air running 10.2, or physical iPhone 6s Plus running 10.2. Tests on a device farm including iPhone 4s & iPhone 5 devices were inconclusive\u2026 I\u2019m seeing a very similar crash happen, [mostly affecting devices running 9.3.5](https://docs.google.com/spreadsheets/d/1a1Erp-KPNA5bZuin5Fokzx0rVoqr2EEFEbKSEjEVpTw/edit), but the devices/iOS combos that fail on physical devices are slightly inconsistent from run to run (in the simulator the same devices crash 100% of the time no matter what OS I use, and from run to run).\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nThis [issue](https://github.com/tensorflow/tensorflow/issues/4640 ) is the only hit I get, but seems unrelated.\r\n\r\n### Environment info\r\n* Operating System: macOS Sierra 10.12.13\r\n* Commit hash: b393fd79fd43242ea9be3ff3141f1809c412fd71 (master as of this writing)\r\n* Bazel Version: \r\n    ```\r\n    Build label: 0.4.3-jdk7\r\n    Build target: bazel-out/local-    fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\n    Build time: Thu Dec 22 12:31:38 2016 (1482409898)\r\n    Build timestamp: 1482409898\r\n    Build timestamp as int: 1482409898\r\n    ```\r\n\r\n### Minimal reproducible example\r\n\r\n1. Prepare the simple iOS example provided by Tensorflow\r\n    ```bash\r\n    $ git clone https://github.com/tensorflow/tensorflow.git\r\n    $ cd tensorflow\r\n    $ tensorflow/contrib/makefile/download_dependencies.sh\r\n    $ tensorflow/contrib/makefile/build_all_ios.sh\r\n    $ open tensorflow/contrib/ios_examples/simple/tf_ios_makefile_example.xcodeproj\r\n    ```\r\n2. Download the Inception graph per the [instructions](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile#ios)\r\n3. Target the iPhone 5 simulator on iOS 10.2, and Run.\r\n4. The app will crash before entering `didFinishLaunchingWithOptions`.\r\n5. (If you target the iPad Air simulator on iOS 10.2, it will work.)"}
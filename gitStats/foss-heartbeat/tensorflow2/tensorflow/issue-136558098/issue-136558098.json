{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1292", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1292/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1292/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1292/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1292", "id": 136558098, "node_id": "MDU6SXNzdWUxMzY1NTgwOTg=", "number": 1292, "title": "RMSPropOptimizer incompatible with embedding layers.", "user": {"login": "nryant", "id": 716377, "node_id": "MDQ6VXNlcjcxNjM3Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/716377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nryant", "html_url": "https://github.com/nryant", "followers_url": "https://api.github.com/users/nryant/followers", "following_url": "https://api.github.com/users/nryant/following{/other_user}", "gists_url": "https://api.github.com/users/nryant/gists{/gist_id}", "starred_url": "https://api.github.com/users/nryant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nryant/subscriptions", "organizations_url": "https://api.github.com/users/nryant/orgs", "repos_url": "https://api.github.com/users/nryant/repos", "events_url": "https://api.github.com/users/nryant/events{/privacy}", "received_events_url": "https://api.github.com/users/nryant/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-02-26T00:36:52Z", "updated_at": "2016-03-01T22:04:16Z", "closed_at": "2016-03-01T22:04:16Z", "author_association": "NONE", "body_html": "<h3>Description</h3>\n<p><code>RMSPropOptimizer</code> does not work with models utilizing embedding layers, which appears to be a consequence of it not implementing <code>_apply_sparse</code>. The other optimizers all implement <code>_apply_sparse</code>, so I assume this is an oversight.</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04 LTS<br>\nInstalled from source with hash: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/03bff43060229357cbe2cc1659e7d129c2799b06/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/03bff43060229357cbe2cc1659e7d129c2799b06\"><tt>03bff43</tt></a></p>\n<h3>Steps to reproduce</h3>\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nsess = tf.Session()\n\nweights = tf.get_variable('weights', [100, 32], 'float32', trainable=True)\nwords = tf.constant(np.arange(100, dtype='int32'))\nlogits = tf.nn.embedding_lookup(weights, words)\nlabels = tf.constant(np.arange(100, dtype='int64') % 32)\nloss = tf.nn.sparse_softmax_cross_entropy_with_logits(logits, labels)\noptimizer = tf.train.RMSPropOptimizer(0.001)\nstep = optimizer.minimize(loss)\n</code></pre>\n<h3>Logs</h3>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/147495/log.txt\">log.txt</a></p>", "body_text": "Description\nRMSPropOptimizer does not work with models utilizing embedding layers, which appears to be a consequence of it not implementing _apply_sparse. The other optimizers all implement _apply_sparse, so I assume this is an oversight.\nEnvironment info\nOperating System: Ubuntu 14.04 LTS\nInstalled from source with hash: 03bff43\nSteps to reproduce\nimport numpy as np\nimport tensorflow as tf\n\nsess = tf.Session()\n\nweights = tf.get_variable('weights', [100, 32], 'float32', trainable=True)\nwords = tf.constant(np.arange(100, dtype='int32'))\nlogits = tf.nn.embedding_lookup(weights, words)\nlabels = tf.constant(np.arange(100, dtype='int64') % 32)\nloss = tf.nn.sparse_softmax_cross_entropy_with_logits(logits, labels)\noptimizer = tf.train.RMSPropOptimizer(0.001)\nstep = optimizer.minimize(loss)\n\nLogs\nlog.txt", "body": "### Description\n\n`RMSPropOptimizer` does not work with models utilizing embedding layers, which appears to be a consequence of it not implementing `_apply_sparse`. The other optimizers all implement `_apply_sparse`, so I assume this is an oversight.\n### Environment info\n\nOperating System: Ubuntu 14.04 LTS\nInstalled from source with hash: 03bff43060229357cbe2cc1659e7d129c2799b06\n### Steps to reproduce\n\n```\nimport numpy as np\nimport tensorflow as tf\n\nsess = tf.Session()\n\nweights = tf.get_variable('weights', [100, 32], 'float32', trainable=True)\nwords = tf.constant(np.arange(100, dtype='int32'))\nlogits = tf.nn.embedding_lookup(weights, words)\nlabels = tf.constant(np.arange(100, dtype='int64') % 32)\nloss = tf.nn.sparse_softmax_cross_entropy_with_logits(logits, labels)\noptimizer = tf.train.RMSPropOptimizer(0.001)\nstep = optimizer.minimize(loss)\n```\n### Logs\n\n[log.txt](https://github.com/tensorflow/tensorflow/files/147495/log.txt)\n"}
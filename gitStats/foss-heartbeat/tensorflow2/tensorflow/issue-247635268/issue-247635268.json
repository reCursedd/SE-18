{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11994", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11994/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11994/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11994/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11994", "id": 247635268, "node_id": "MDU6SXNzdWUyNDc2MzUyNjg=", "number": 11994, "title": "tensorflow-1.2.1\uff1aTypeError: sampled_loss() got an unexpected keyword argument 'logits'", "user": {"login": "yyx911216", "id": 13828098, "node_id": "MDQ6VXNlcjEzODI4MDk4", "avatar_url": "https://avatars0.githubusercontent.com/u/13828098?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyx911216", "html_url": "https://github.com/yyx911216", "followers_url": "https://api.github.com/users/yyx911216/followers", "following_url": "https://api.github.com/users/yyx911216/following{/other_user}", "gists_url": "https://api.github.com/users/yyx911216/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyx911216/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyx911216/subscriptions", "organizations_url": "https://api.github.com/users/yyx911216/orgs", "repos_url": "https://api.github.com/users/yyx911216/repos", "events_url": "https://api.github.com/users/yyx911216/events{/privacy}", "received_events_url": "https://api.github.com/users/yyx911216/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-03T08:51:14Z", "updated_at": "2018-01-13T00:42:36Z", "closed_at": "2017-08-04T21:47:09Z", "author_association": "NONE", "body_html": "<h1>the code is:</h1>\n<pre><code>def sampled_loss(labels, inputs):\n        labels = tf.reshape(labels, [-1, 1])\n        # We need to compute the sampled_softmax_loss using 32bit floats to\n        # avoid numerical instabilities.\n        local_w_t = tf.cast(w_t, tf.float32)\n        local_b = tf.cast(b, tf.float32)\n        local_inputs = tf.cast(inputs, tf.float32)\n        return tf.cast(\n            tf.nn.sampled_softmax_loss(\n                weights=local_w_t,\n                biases=local_b,\n                labels=labels,\n                inputs=local_inputs,\n                num_sampled=num_samples,\n                num_classes=self.target_vocab_size),tf.float32)\n  \n       softmax_loss_function = sampled_loss\n</code></pre>\n<p>Traceback (most recent call last):<br>\nFile \"predict.py\", line 177, in <br>\ntf.app.run()<br>\nFile \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"predict.py\", line 159, in main<br>\ndecode()<br>\nFile \"predict.py\", line 40, in decode<br>\nmodel = create_model(sess, True)<br>\nFile \"/home/BD/bd_chenyi/nlp_code/textsum/textsum.py\", line 144, in create_model<br>\nforward_only=forward_only)<br>\nFile \"/home/BD/bd_chenyi/nlp_code/textsum/seq2seq_model.py\", line 167, in <strong>init</strong><br>\nsoftmax_loss_function=softmax_loss_function)<br>\nFile \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1221, in model_with_buckets<br>\nsoftmax_loss_function=softmax_loss_function))<br>\nFile \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1134, in sequence_loss<br>\nsoftmax_loss_function=softmax_loss_function))<br>\nFile \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1089, in sequence_loss_by_example<br>\ncrossent = softmax_loss_function(labels=target, logits=logit)<br>\nTypeError: sampled_loss() got an unexpected keyword argument 'logits'</p>", "body_text": "the code is:\ndef sampled_loss(labels, inputs):\n        labels = tf.reshape(labels, [-1, 1])\n        # We need to compute the sampled_softmax_loss using 32bit floats to\n        # avoid numerical instabilities.\n        local_w_t = tf.cast(w_t, tf.float32)\n        local_b = tf.cast(b, tf.float32)\n        local_inputs = tf.cast(inputs, tf.float32)\n        return tf.cast(\n            tf.nn.sampled_softmax_loss(\n                weights=local_w_t,\n                biases=local_b,\n                labels=labels,\n                inputs=local_inputs,\n                num_sampled=num_samples,\n                num_classes=self.target_vocab_size),tf.float32)\n  \n       softmax_loss_function = sampled_loss\n\nTraceback (most recent call last):\nFile \"predict.py\", line 177, in \ntf.app.run()\nFile \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"predict.py\", line 159, in main\ndecode()\nFile \"predict.py\", line 40, in decode\nmodel = create_model(sess, True)\nFile \"/home/BD/bd_chenyi/nlp_code/textsum/textsum.py\", line 144, in create_model\nforward_only=forward_only)\nFile \"/home/BD/bd_chenyi/nlp_code/textsum/seq2seq_model.py\", line 167, in init\nsoftmax_loss_function=softmax_loss_function)\nFile \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1221, in model_with_buckets\nsoftmax_loss_function=softmax_loss_function))\nFile \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1134, in sequence_loss\nsoftmax_loss_function=softmax_loss_function))\nFile \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1089, in sequence_loss_by_example\ncrossent = softmax_loss_function(labels=target, logits=logit)\nTypeError: sampled_loss() got an unexpected keyword argument 'logits'", "body": "# the code is:\r\n    def sampled_loss(labels, inputs):\r\n            labels = tf.reshape(labels, [-1, 1])\r\n            # We need to compute the sampled_softmax_loss using 32bit floats to\r\n            # avoid numerical instabilities.\r\n            local_w_t = tf.cast(w_t, tf.float32)\r\n            local_b = tf.cast(b, tf.float32)\r\n            local_inputs = tf.cast(inputs, tf.float32)\r\n            return tf.cast(\r\n                tf.nn.sampled_softmax_loss(\r\n                    weights=local_w_t,\r\n                    biases=local_b,\r\n                    labels=labels,\r\n                    inputs=local_inputs,\r\n                    num_sampled=num_samples,\r\n                    num_classes=self.target_vocab_size),tf.float32)\r\n      \r\n           softmax_loss_function = sampled_loss\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"predict.py\", line 177, in <module>\r\n    tf.app.run()\r\n  File \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"predict.py\", line 159, in main\r\n    decode()\r\n  File \"predict.py\", line 40, in decode\r\n    model = create_model(sess, True)\r\n  File \"/home/BD/bd_chenyi/nlp_code/textsum/textsum.py\", line 144, in create_model\r\n    forward_only=forward_only)\r\n  File \"/home/BD/bd_chenyi/nlp_code/textsum/seq2seq_model.py\", line 167, in __init__\r\n    softmax_loss_function=softmax_loss_function)\r\n  File \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1221, in model_with_buckets\r\n    softmax_loss_function=softmax_loss_function))\r\n  File \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1134, in sequence_loss\r\n    softmax_loss_function=softmax_loss_function))\r\n  File \"/home/amax/tensorflow/1.2.1/local/lib/python2.7/site-packages/tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py\", line 1089, in sequence_loss_by_example\r\n    crossent = softmax_loss_function(labels=target, logits=logit)\r\nTypeError: sampled_loss() got an unexpected keyword argument 'logits'"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/410764235", "html_url": "https://github.com/tensorflow/tensorflow/issues/20585#issuecomment-410764235", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20585", "id": 410764235, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDc2NDIzNQ==", "user": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-06T16:17:03Z", "updated_at": "2018-08-06T16:17:03Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">Do you have logs for the non chief worker?</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Mon, Aug 6, 2018, 7:41 AM Jun Shi ***@***.***&gt; wrote:\n For \"transpose-then-lookup\" code, the chief worker ran fine, but non-chief\n worker hung. After I set tf.logging.set_verbosity(tf.logging.DEBUG), I\n saw the following on the non-chief worker. It seems embedding_encoder and\n embedding_decoder were not ready on the non-chief worker. No other error\n messages were seen.\n\n junshi15$ python nonchief_hang_v3.py --time_major --out_dir=/tmp/rnn/work1 --ps_hosts=localhost:2222  --worker_hosts=localhost:1111,localhost:3333 --task_index=1 --job_name=worker\n 2018-08-06 07:27:35.223313: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA2018-08-06 07:27:35.224656: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:215] Initialize GrpcChannelCache for job ps -&gt; {0 -&gt; localhost:2222}2018-08-06 07:27:35.224674: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:215] Initialize GrpcChannelCache for job worker -&gt; {0 -&gt; localhost:1111, 1 -&gt; localhost:3333}2018-08-06 07:27:35.225027: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:332] Started server with target: grpc://localhost:3333INFO:tensorflow:Graph was finalized.2018-08-06 07:27:42.742037: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 6f967f601337d97c with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, encoder/rnn/basic_lstm_cell/kernel, encoder/rnn/basic_lstm_cell/bias, decoder/basic_lstm_cell/kernel, decoder/basic_lstm_cell/bias, global_step, ready: None2018-08-06 07:28:12.781871: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 3139c55b7e2bdbef with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:28:42.816610: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 7d5684fbb32ca03b with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:29:12.848483: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 34122298c96817e7 with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:29:42.877087: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 0e9164b2458e92cf with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:30:12.905306: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session fb3c939889939c88 with config: INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:30:42.936056: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session c3e8a41826633f8a with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:31:12.966590: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 284b8fd3e8c8772e with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"338804398\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/20585\" href=\"https://github.com/tensorflow/tensorflow/issues/20585#issuecomment-410731343\">#20585 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABtim1fMHemEUWqVHVn1oAjak13WZPUQks5uOFWygaJpZM4VE4Qr\">https://github.com/notifications/unsubscribe-auth/ABtim1fMHemEUWqVHVn1oAjak13WZPUQks5uOFWygaJpZM4VE4Qr</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "Do you have logs for the non chief worker?\n\u2026\nOn Mon, Aug 6, 2018, 7:41 AM Jun Shi ***@***.***> wrote:\n For \"transpose-then-lookup\" code, the chief worker ran fine, but non-chief\n worker hung. After I set tf.logging.set_verbosity(tf.logging.DEBUG), I\n saw the following on the non-chief worker. It seems embedding_encoder and\n embedding_decoder were not ready on the non-chief worker. No other error\n messages were seen.\n\n junshi15$ python nonchief_hang_v3.py --time_major --out_dir=/tmp/rnn/work1 --ps_hosts=localhost:2222  --worker_hosts=localhost:1111,localhost:3333 --task_index=1 --job_name=worker\n 2018-08-06 07:27:35.223313: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA2018-08-06 07:27:35.224656: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:215] Initialize GrpcChannelCache for job ps -> {0 -> localhost:2222}2018-08-06 07:27:35.224674: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:215] Initialize GrpcChannelCache for job worker -> {0 -> localhost:1111, 1 -> localhost:3333}2018-08-06 07:27:35.225027: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:332] Started server with target: grpc://localhost:3333INFO:tensorflow:Graph was finalized.2018-08-06 07:27:42.742037: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 6f967f601337d97c with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, encoder/rnn/basic_lstm_cell/kernel, encoder/rnn/basic_lstm_cell/bias, decoder/basic_lstm_cell/kernel, decoder/basic_lstm_cell/bias, global_step, ready: None2018-08-06 07:28:12.781871: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 3139c55b7e2bdbef with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:28:42.816610: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 7d5684fbb32ca03b with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:29:12.848483: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 34122298c96817e7 with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:29:42.877087: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 0e9164b2458e92cf with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:30:12.905306: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session fb3c939889939c88 with config: INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:30:42.936056: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session c3e8a41826633f8a with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:31:12.966590: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 284b8fd3e8c8772e with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None\n\n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub\n <#20585 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/ABtim1fMHemEUWqVHVn1oAjak13WZPUQks5uOFWygaJpZM4VE4Qr>\n .", "body": "Do you have logs for the non chief worker?\n\nOn Mon, Aug 6, 2018, 7:41 AM Jun Shi <notifications@github.com> wrote:\n\n> For \"transpose-then-lookup\" code, the chief worker ran fine, but non-chief\n> worker hung. After I set tf.logging.set_verbosity(tf.logging.DEBUG), I\n> saw the following on the non-chief worker. It seems embedding_encoder and\n> embedding_decoder were not ready on the non-chief worker. No other error\n> messages were seen.\n>\n> junshi15$ python nonchief_hang_v3.py --time_major --out_dir=/tmp/rnn/work1 --ps_hosts=localhost:2222  --worker_hosts=localhost:1111,localhost:3333 --task_index=1 --job_name=worker\n> 2018-08-06 07:27:35.223313: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA2018-08-06 07:27:35.224656: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:215] Initialize GrpcChannelCache for job ps -> {0 -> localhost:2222}2018-08-06 07:27:35.224674: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:215] Initialize GrpcChannelCache for job worker -> {0 -> localhost:1111, 1 -> localhost:3333}2018-08-06 07:27:35.225027: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:332] Started server with target: grpc://localhost:3333INFO:tensorflow:Graph was finalized.2018-08-06 07:27:42.742037: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 6f967f601337d97c with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, encoder/rnn/basic_lstm_cell/kernel, encoder/rnn/basic_lstm_cell/bias, decoder/basic_lstm_cell/kernel, decoder/basic_lstm_cell/bias, global_step, ready: None2018-08-06 07:28:12.781871: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 3139c55b7e2bdbef with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:28:42.816610: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 7d5684fbb32ca03b with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:29:12.848483: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 34122298c96817e7 with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:29:42.877087: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 0e9164b2458e92cf with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:30:12.905306: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session fb3c939889939c88 with config: INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:30:42.936056: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session c3e8a41826633f8a with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None2018-08-06 07:31:12.966590: I tensorflow/core/distributed_runtime/master_session.cc:1136] Start master session 284b8fd3e8c8772e with config:INFO:tensorflow:Waiting for model to be ready.  Ready_for_local_init_op:  Variables not initialized: embedding_encoder, embedding_decoder, ready: None\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/20585#issuecomment-410731343>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABtim1fMHemEUWqVHVn1oAjak13WZPUQks5uOFWygaJpZM4VE4Qr>\n> .\n>\n"}
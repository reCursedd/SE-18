{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/383846887", "html_url": "https://github.com/tensorflow/tensorflow/issues/18795#issuecomment-383846887", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18795", "id": 383846887, "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mzg0Njg4Nw==", "user": {"login": "drchen00", "id": 15257261, "node_id": "MDQ6VXNlcjE1MjU3MjYx", "avatar_url": "https://avatars2.githubusercontent.com/u/15257261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drchen00", "html_url": "https://github.com/drchen00", "followers_url": "https://api.github.com/users/drchen00/followers", "following_url": "https://api.github.com/users/drchen00/following{/other_user}", "gists_url": "https://api.github.com/users/drchen00/gists{/gist_id}", "starred_url": "https://api.github.com/users/drchen00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drchen00/subscriptions", "organizations_url": "https://api.github.com/users/drchen00/orgs", "repos_url": "https://api.github.com/users/drchen00/repos", "events_url": "https://api.github.com/users/drchen00/events{/privacy}", "received_events_url": "https://api.github.com/users/drchen00/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-24T08:23:09Z", "updated_at": "2018-04-24T08:23:09Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1381301\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ppwwyyxx\">@ppwwyyxx</a> I have tried it like this:</p>\n<pre><code>def body(i, x):\n     with tf.control_dependencies(None):\n         x = tf.layers.conv1d(x, 1, 7, padding='same')\n         x = tf.layers.batch_normalization(x, training=flag)\n         x = tf.nn.relu(x)\n     return i + 1, x\n</code></pre>\n<p>it seems can't be used  in a loop<br>\n<code>ValueError: Cannot use 'while/Identity_1' as input to 'while/conv1d/conv1d/ExpandDims' because 'while/Identity_1' is in a while loop. See info log for more details.</code><br>\nI alse tried contrib API and it has the same result.</p>", "body_text": "@ppwwyyxx I have tried it like this:\ndef body(i, x):\n     with tf.control_dependencies(None):\n         x = tf.layers.conv1d(x, 1, 7, padding='same')\n         x = tf.layers.batch_normalization(x, training=flag)\n         x = tf.nn.relu(x)\n     return i + 1, x\n\nit seems can't be used  in a loop\nValueError: Cannot use 'while/Identity_1' as input to 'while/conv1d/conv1d/ExpandDims' because 'while/Identity_1' is in a while loop. See info log for more details.\nI alse tried contrib API and it has the same result.", "body": "@ppwwyyxx I have tried it like this:\r\n```\r\ndef body(i, x):\r\n     with tf.control_dependencies(None):\r\n         x = tf.layers.conv1d(x, 1, 7, padding='same')\r\n         x = tf.layers.batch_normalization(x, training=flag)\r\n         x = tf.nn.relu(x)\r\n     return i + 1, x\r\n```\r\nit seems can't be used  in a loop\r\n`ValueError: Cannot use 'while/Identity_1' as input to 'while/conv1d/conv1d/ExpandDims' because 'while/Identity_1' is in a while loop. See info log for more details.`\r\nI alse tried contrib API and it has the same result."}
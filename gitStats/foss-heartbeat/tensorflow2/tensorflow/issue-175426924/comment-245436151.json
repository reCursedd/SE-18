{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/245436151", "html_url": "https://github.com/tensorflow/tensorflow/issues/4242#issuecomment-245436151", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4242", "id": 245436151, "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTQzNjE1MQ==", "user": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-07T22:13:15Z", "updated_at": "2016-09-07T22:13:15Z", "author_association": "CONTRIBUTOR", "body_html": "<p>TensorFlow uses a static registration mechanism (in particular behind the <code>REGISTER_OP()</code> and <code>REGISTER_KERNEL_BUILDER()</code> macros) in the implementation of the kernel library, and the default build rules create a single binary that contains all kernels. Without <code>--whole-archive</code>, these static registrations would be stripped, and the kernels would not be registered. See <a href=\"http://stackoverflow.com/a/842770/3574081\" rel=\"nofollow\">this Stack Overflow answer</a> for a description of a similar registration scheme.</p>\n<p>If you're targeting an embedded platform, you might find the experimental support for selective (kernel) registration useful. We've used that to reduce binary sizes for the Android build. See <a href=\"https://github.com/tensorflow/tensorflow/blob/f71cc62282bf2e066f9ebd08cf3f605fc98c6e41/tensorflow/core/framework/selective_registration.h\"><code>tensorflow/core/framework/selective_registration.h</code></a> for more details.</p>", "body_text": "TensorFlow uses a static registration mechanism (in particular behind the REGISTER_OP() and REGISTER_KERNEL_BUILDER() macros) in the implementation of the kernel library, and the default build rules create a single binary that contains all kernels. Without --whole-archive, these static registrations would be stripped, and the kernels would not be registered. See this Stack Overflow answer for a description of a similar registration scheme.\nIf you're targeting an embedded platform, you might find the experimental support for selective (kernel) registration useful. We've used that to reduce binary sizes for the Android build. See tensorflow/core/framework/selective_registration.h for more details.", "body": "TensorFlow uses a static registration mechanism (in particular behind the `REGISTER_OP()` and `REGISTER_KERNEL_BUILDER()` macros) in the implementation of the kernel library, and the default build rules create a single binary that contains all kernels. Without `--whole-archive`, these static registrations would be stripped, and the kernels would not be registered. See [this Stack Overflow answer](http://stackoverflow.com/a/842770/3574081) for a description of a similar registration scheme.\n\nIf you're targeting an embedded platform, you might find the experimental support for selective (kernel) registration useful. We've used that to reduce binary sizes for the Android build. See [`tensorflow/core/framework/selective_registration.h`](https://github.com/tensorflow/tensorflow/blob/f71cc62282bf2e066f9ebd08cf3f605fc98c6e41/tensorflow/core/framework/selective_registration.h) for more details.\n"}
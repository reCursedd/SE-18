{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7734", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7734/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7734/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7734/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7734", "id": 209118770, "node_id": "MDU6SXNzdWUyMDkxMTg3NzA=", "number": 7734, "title": "Error setting read_batch_size in tf.contrib.learn.read_batch_examples?", "user": {"login": "Sean-Git", "id": 6144395, "node_id": "MDQ6VXNlcjYxNDQzOTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/6144395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sean-Git", "html_url": "https://github.com/Sean-Git", "followers_url": "https://api.github.com/users/Sean-Git/followers", "following_url": "https://api.github.com/users/Sean-Git/following{/other_user}", "gists_url": "https://api.github.com/users/Sean-Git/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sean-Git/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sean-Git/subscriptions", "organizations_url": "https://api.github.com/users/Sean-Git/orgs", "repos_url": "https://api.github.com/users/Sean-Git/repos", "events_url": "https://api.github.com/users/Sean-Git/events{/privacy}", "received_events_url": "https://api.github.com/users/Sean-Git/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-02-21T11:37:00Z", "updated_at": "2017-06-09T04:46:49Z", "closed_at": "2017-03-09T18:32:42Z", "author_association": "NONE", "body_html": "<p>I am using the API <em>tf.contrib.learn.read_batch_examples()</em>. When I set the param <em>read_batch_size</em>, it always lead to the error \"<strong>ValueError: All shapes must be fully defined: [TensorShape([]), TensorShape([Dimension(None)])]</strong>\".  Use the default value 1 of <em>read_batch_size</em> is OK. I wonder what's happening behind?</p>\n<p>The full error stack is below:</p>\n<pre><code>Traceback (most recent call last):\n  File \"wide_n_deep_new.py\", line 258, in &lt;module&gt;\n    tf.app.run()\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"wide_n_deep_new.py\", line 249, in main\n    train(estimator)\n  File \"wide_n_deep_new.py\", line 200, in train\n    monitors=[eval_monitor])\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 765, in fit\n    max_steps=max_steps)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 280, in new_func\n    return func(*args, **kwargs)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1302, in fit\n    loss = self._train_model_v2(input_fn=input_fn, hooks=hooks)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1312, in _train_model_v2\n    features, labels = input_fn()\n  File \"wide_n_deep_new.py\", line 198, in &lt;lambda&gt;\n    num_epochs=None), \n  File \"wide_n_deep_new.py\", line 156, in input_fn\n    examples_dict = read_csv_examples(mode, file_names, batch_size, num_epochs)\n  File \"wide_n_deep_new.py\", line 129, in read_csv_examples\n    name='read_batch_examples_{}'.format(mode))\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 101, in read_batch_examples\n    name=name)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 166, in read_keyed_batch_examples\n    name=name)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 399, in _read_keyed_batch_examples_helper\n    allow_smaller_final_batch=allow_smaller_final_batch)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 1017, in batch_join\n    name=name)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 693, in _batch_join\n    capacity=capacity, dtypes=types, shapes=shapes, shared_name=shared_name)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 666, in __init__\n    shapes = _as_shape_list(shapes, dtypes)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 75, in _as_shape_list\n    raise ValueError(\"All shapes must be fully defined: %s\" % shapes)\nValueError: All shapes must be fully defined: [TensorShape([]), TensorShape([Dimension(None)])]\n</code></pre>", "body_text": "I am using the API tf.contrib.learn.read_batch_examples(). When I set the param read_batch_size, it always lead to the error \"ValueError: All shapes must be fully defined: [TensorShape([]), TensorShape([Dimension(None)])]\".  Use the default value 1 of read_batch_size is OK. I wonder what's happening behind?\nThe full error stack is below:\nTraceback (most recent call last):\n  File \"wide_n_deep_new.py\", line 258, in <module>\n    tf.app.run()\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"wide_n_deep_new.py\", line 249, in main\n    train(estimator)\n  File \"wide_n_deep_new.py\", line 200, in train\n    monitors=[eval_monitor])\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 765, in fit\n    max_steps=max_steps)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 280, in new_func\n    return func(*args, **kwargs)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1302, in fit\n    loss = self._train_model_v2(input_fn=input_fn, hooks=hooks)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1312, in _train_model_v2\n    features, labels = input_fn()\n  File \"wide_n_deep_new.py\", line 198, in <lambda>\n    num_epochs=None), \n  File \"wide_n_deep_new.py\", line 156, in input_fn\n    examples_dict = read_csv_examples(mode, file_names, batch_size, num_epochs)\n  File \"wide_n_deep_new.py\", line 129, in read_csv_examples\n    name='read_batch_examples_{}'.format(mode))\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 101, in read_batch_examples\n    name=name)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 166, in read_keyed_batch_examples\n    name=name)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 399, in _read_keyed_batch_examples_helper\n    allow_smaller_final_batch=allow_smaller_final_batch)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 1017, in batch_join\n    name=name)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 693, in _batch_join\n    capacity=capacity, dtypes=types, shapes=shapes, shared_name=shared_name)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 666, in __init__\n    shapes = _as_shape_list(shapes, dtypes)\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 75, in _as_shape_list\n    raise ValueError(\"All shapes must be fully defined: %s\" % shapes)\nValueError: All shapes must be fully defined: [TensorShape([]), TensorShape([Dimension(None)])]", "body": "I am using the API _tf.contrib.learn.read_batch_examples()_. When I set the param _read_batch_size_, it always lead to the error \"**ValueError: All shapes must be fully defined: [TensorShape([]), TensorShape([Dimension(None)])]**\".  Use the default value 1 of _read_batch_size_ is OK. I wonder what's happening behind?\r\n\r\nThe full error stack is below:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"wide_n_deep_new.py\", line 258, in <module>\r\n    tf.app.run()\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"wide_n_deep_new.py\", line 249, in main\r\n    train(estimator)\r\n  File \"wide_n_deep_new.py\", line 200, in train\r\n    monitors=[eval_monitor])\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn_linear_combined.py\", line 765, in fit\r\n    max_steps=max_steps)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 280, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1302, in fit\r\n    loss = self._train_model_v2(input_fn=input_fn, hooks=hooks)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1312, in _train_model_v2\r\n    features, labels = input_fn()\r\n  File \"wide_n_deep_new.py\", line 198, in <lambda>\r\n    num_epochs=None), \r\n  File \"wide_n_deep_new.py\", line 156, in input_fn\r\n    examples_dict = read_csv_examples(mode, file_names, batch_size, num_epochs)\r\n  File \"wide_n_deep_new.py\", line 129, in read_csv_examples\r\n    name='read_batch_examples_{}'.format(mode))\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 101, in read_batch_examples\r\n    name=name)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 166, in read_keyed_batch_examples\r\n    name=name)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/learn_io/graph_io.py\", line 399, in _read_keyed_batch_examples_helper\r\n    allow_smaller_final_batch=allow_smaller_final_batch)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 1017, in batch_join\r\n    name=name)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/training/input.py\", line 693, in _batch_join\r\n    capacity=capacity, dtypes=types, shapes=shapes, shared_name=shared_name)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 666, in __init__\r\n    shapes = _as_shape_list(shapes, dtypes)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 75, in _as_shape_list\r\n    raise ValueError(\"All shapes must be fully defined: %s\" % shapes)\r\nValueError: All shapes must be fully defined: [TensorShape([]), TensorShape([Dimension(None)])]\r\n```"}
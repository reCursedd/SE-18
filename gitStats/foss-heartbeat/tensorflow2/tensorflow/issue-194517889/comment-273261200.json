{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/273261200", "html_url": "https://github.com/tensorflow/tensorflow/pull/6205#issuecomment-273261200", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6205", "id": 273261200, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MzI2MTIwMA==", "user": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-17T18:48:08Z", "updated_at": "2017-01-17T18:48:08Z", "author_association": "MEMBER", "body_html": "<p>Sorry for the delay. So, for the kernels, you just define a <code>tf_kernel_library</code>:</p>\n<pre><code>tf_kernel_library(\n    name = \"depthwise_conv_op\",\n    prefix = \"depthwise_conv_op\",\n    deps = [\n        \":conv_ops\",\n        \":ops_util\",\n        \"//third_party/tensorflow/core:core_cpu\",\n        \"//third_party/tensorflow/core:framework\",\n        \"//third_party/tensorflow/core:lib\",\n        \"//third_party/tensorflow/core:nn_ops_op_lib\",\n    ],\n)\n</code></pre>\n<p>Then, for the ops, you just need to define a <code>cc_library</code>. Remember to set the <code>copts</code>:</p>\n<pre><code>cc_library(\n    name = \"word2vec_ops\",\n    copts = tf_copts(),\n    srcs = [\"ops/word2vec_ops.cc\"],\n    linkstatic = 1,\n    visibility = [\"//third_party/tensorflow:internal\"],\n    deps = [\"//third_party/tensorflow/core:framework\"],\n    alwayslink = 1,\n)\n</code></pre>", "body_text": "Sorry for the delay. So, for the kernels, you just define a tf_kernel_library:\ntf_kernel_library(\n    name = \"depthwise_conv_op\",\n    prefix = \"depthwise_conv_op\",\n    deps = [\n        \":conv_ops\",\n        \":ops_util\",\n        \"//third_party/tensorflow/core:core_cpu\",\n        \"//third_party/tensorflow/core:framework\",\n        \"//third_party/tensorflow/core:lib\",\n        \"//third_party/tensorflow/core:nn_ops_op_lib\",\n    ],\n)\n\nThen, for the ops, you just need to define a cc_library. Remember to set the copts:\ncc_library(\n    name = \"word2vec_ops\",\n    copts = tf_copts(),\n    srcs = [\"ops/word2vec_ops.cc\"],\n    linkstatic = 1,\n    visibility = [\"//third_party/tensorflow:internal\"],\n    deps = [\"//third_party/tensorflow/core:framework\"],\n    alwayslink = 1,\n)", "body": "Sorry for the delay. So, for the kernels, you just define a `tf_kernel_library`:\r\n```\r\ntf_kernel_library(\r\n    name = \"depthwise_conv_op\",\r\n    prefix = \"depthwise_conv_op\",\r\n    deps = [\r\n        \":conv_ops\",\r\n        \":ops_util\",\r\n        \"//third_party/tensorflow/core:core_cpu\",\r\n        \"//third_party/tensorflow/core:framework\",\r\n        \"//third_party/tensorflow/core:lib\",\r\n        \"//third_party/tensorflow/core:nn_ops_op_lib\",\r\n    ],\r\n)\r\n```\r\nThen, for the ops, you just need to define a `cc_library`. Remember to set the `copts`:\r\n```\r\ncc_library(\r\n    name = \"word2vec_ops\",\r\n    copts = tf_copts(),\r\n    srcs = [\"ops/word2vec_ops.cc\"],\r\n    linkstatic = 1,\r\n    visibility = [\"//third_party/tensorflow:internal\"],\r\n    deps = [\"//third_party/tensorflow/core:framework\"],\r\n    alwayslink = 1,\r\n)\r\n```"}
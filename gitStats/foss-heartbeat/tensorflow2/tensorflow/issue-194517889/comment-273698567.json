{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/273698567", "html_url": "https://github.com/tensorflow/tensorflow/pull/6205#issuecomment-273698567", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6205", "id": 273698567, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MzY5ODU2Nw==", "user": {"login": "MycChiu", "id": 6672514, "node_id": "MDQ6VXNlcjY2NzI1MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6672514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MycChiu", "html_url": "https://github.com/MycChiu", "followers_url": "https://api.github.com/users/MycChiu/followers", "following_url": "https://api.github.com/users/MycChiu/following{/other_user}", "gists_url": "https://api.github.com/users/MycChiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/MycChiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MycChiu/subscriptions", "organizations_url": "https://api.github.com/users/MycChiu/orgs", "repos_url": "https://api.github.com/users/MycChiu/repos", "events_url": "https://api.github.com/users/MycChiu/events{/privacy}", "received_events_url": "https://api.github.com/users/MycChiu/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-19T07:11:37Z", "updated_at": "2017-01-19T07:11:37Z", "author_association": "NONE", "body_html": "<p>I made the visibility public like this in <code>/layers/kernels/BUILD</code>:</p>\n<pre><code>cc_library(\n    name = \"layer_norm_fused_kernel\",\n    copts = tf_copts(),\n    visibility = [\"//visibility:public\"],\n    srcs = [\n        \"layer_norm_fused_op.cc\",\n        \"layer_norm_fused_grad_op.cc\",\n        \"layer_norm_fused_op_gpu.cu.cc\",\n        \"layer_norm_fused_op.h\",\n    ],\n    deps = [\n        \"//tensorflow/core:framework_headers_lib\",\n        \"//third_party/eigen3\",\n        \"@protobuf//:protobuf\",\n    ],\n    alwayslink = 1,\n)\n</code></pre>\n<p>but bazel still throws the same error</p>\n<pre><code>ERROR: /home/***/tensorflow/tensorflow/contrib/layers/kernels/BUILD:36:1: C++ compilation of rule '//tensorflow/contrib/layers/kernels:layer_norm_fused_kernel' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 61 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:4:0,\n                 from tensorflow/contrib/layers/kernels/layer_norm_fused_op_gpu.cu.cc:23:\nexternal/eigen_archive/unsupported/Eigen/CXX11/Tensor:84:26: fatal error: cuda_runtime.h: No such file or directory\n #include &lt;cuda_runtime.h&gt;\n                          ^\ncompilation terminated.\nTarget //tensorflow/contrib/layers:layer_norm_fused_op_kernel failed to build\n</code></pre>", "body_text": "I made the visibility public like this in /layers/kernels/BUILD:\ncc_library(\n    name = \"layer_norm_fused_kernel\",\n    copts = tf_copts(),\n    visibility = [\"//visibility:public\"],\n    srcs = [\n        \"layer_norm_fused_op.cc\",\n        \"layer_norm_fused_grad_op.cc\",\n        \"layer_norm_fused_op_gpu.cu.cc\",\n        \"layer_norm_fused_op.h\",\n    ],\n    deps = [\n        \"//tensorflow/core:framework_headers_lib\",\n        \"//third_party/eigen3\",\n        \"@protobuf//:protobuf\",\n    ],\n    alwayslink = 1,\n)\n\nbut bazel still throws the same error\nERROR: /home/***/tensorflow/tensorflow/contrib/layers/kernels/BUILD:36:1: C++ compilation of rule '//tensorflow/contrib/layers/kernels:layer_norm_fused_kernel' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 61 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:4:0,\n                 from tensorflow/contrib/layers/kernels/layer_norm_fused_op_gpu.cu.cc:23:\nexternal/eigen_archive/unsupported/Eigen/CXX11/Tensor:84:26: fatal error: cuda_runtime.h: No such file or directory\n #include <cuda_runtime.h>\n                          ^\ncompilation terminated.\nTarget //tensorflow/contrib/layers:layer_norm_fused_op_kernel failed to build", "body": "I made the visibility public like this in `/layers/kernels/BUILD`:\r\n```\r\ncc_library(\r\n    name = \"layer_norm_fused_kernel\",\r\n    copts = tf_copts(),\r\n    visibility = [\"//visibility:public\"],\r\n    srcs = [\r\n        \"layer_norm_fused_op.cc\",\r\n        \"layer_norm_fused_grad_op.cc\",\r\n        \"layer_norm_fused_op_gpu.cu.cc\",\r\n        \"layer_norm_fused_op.h\",\r\n    ],\r\n    deps = [\r\n        \"//tensorflow/core:framework_headers_lib\",\r\n        \"//third_party/eigen3\",\r\n        \"@protobuf//:protobuf\",\r\n    ],\r\n    alwayslink = 1,\r\n)\r\n```\r\n but bazel still throws the same error\r\n```\r\nERROR: /home/***/tensorflow/tensorflow/contrib/layers/kernels/BUILD:36:1: C++ compilation of rule '//tensorflow/contrib/layers/kernels:layer_norm_fused_kernel' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter ... (remaining 61 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:4:0,\r\n                 from tensorflow/contrib/layers/kernels/layer_norm_fused_op_gpu.cu.cc:23:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/Tensor:84:26: fatal error: cuda_runtime.h: No such file or directory\r\n #include <cuda_runtime.h>\r\n                          ^\r\ncompilation terminated.\r\nTarget //tensorflow/contrib/layers:layer_norm_fused_op_kernel failed to build\r\n```"}
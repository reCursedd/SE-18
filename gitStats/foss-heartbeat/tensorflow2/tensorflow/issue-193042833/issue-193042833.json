{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6034", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6034/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6034/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6034/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6034", "id": 193042833, "node_id": "MDU6SXNzdWUxOTMwNDI4MzM=", "number": 6034, "title": "ctc_beam_search_decoder()'s log_probabilities holds invalid values", "user": {"login": "kdavis-mozilla", "id": 12054740, "node_id": "MDQ6VXNlcjEyMDU0NzQw", "avatar_url": "https://avatars3.githubusercontent.com/u/12054740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdavis-mozilla", "html_url": "https://github.com/kdavis-mozilla", "followers_url": "https://api.github.com/users/kdavis-mozilla/followers", "following_url": "https://api.github.com/users/kdavis-mozilla/following{/other_user}", "gists_url": "https://api.github.com/users/kdavis-mozilla/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdavis-mozilla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdavis-mozilla/subscriptions", "organizations_url": "https://api.github.com/users/kdavis-mozilla/orgs", "repos_url": "https://api.github.com/users/kdavis-mozilla/repos", "events_url": "https://api.github.com/users/kdavis-mozilla/events{/privacy}", "received_events_url": "https://api.github.com/users/kdavis-mozilla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 28, "created_at": "2016-12-02T06:20:00Z", "updated_at": "2018-08-31T14:22:58Z", "closed_at": "2018-08-31T13:59:48Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>Environment info</h3>\n<p>Operating System: OS X 10.11.6<br>\nTF Version: 0.10.0rc0 (No GPU)</p>\n<h3>Example</h3>\n<p>Ran <code>log_probabilities</code> op created from</p>\n<div class=\"highlight highlight-source-python\"><pre>decoded, log_probabilities <span class=\"pl-k\">=</span> ctc_ops.ctc_beam_search_decoder(logits, \\\n                                                             seq_length, \\\n                                                             <span class=\"pl-v\">beam_width</span><span class=\"pl-k\">=</span>beam_width, \\\n                                                             <span class=\"pl-v\">top_paths</span><span class=\"pl-k\">=</span>top_paths, \\\n                                                             <span class=\"pl-v\">merge_repeated</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">False</span>)</pre></div>\n<p>The <code>decoded</code> result is as expected. However, the <code>log_probabilities</code> contains positive values which can not be log probabilities. For example, with batch size 4 and top_paths=10 the <code>log_probabilities</code> printout is as follows</p>\n<pre><code>[[ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]]\n</code></pre>\n<h3>Other attempted solutions</h3>\n<p>None</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>Link to the entire code in context[<a href=\"https://github.com/mozilla/DeepSpeech/blob/issue8++/DeepSpeech.ipynb\">1</a>]</p>", "body_text": "Environment info\nOperating System: OS X 10.11.6\nTF Version: 0.10.0rc0 (No GPU)\nExample\nRan log_probabilities op created from\ndecoded, log_probabilities = ctc_ops.ctc_beam_search_decoder(logits, \\\n                                                             seq_length, \\\n                                                             beam_width=beam_width, \\\n                                                             top_paths=top_paths, \\\n                                                             merge_repeated=False)\nThe decoded result is as expected. However, the log_probabilities contains positive values which can not be log probabilities. For example, with batch size 4 and top_paths=10 the log_probabilities printout is as follows\n[[ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]]\n\nOther attempted solutions\nNone\nLogs or other output that would be helpful\nLink to the entire code in context[1]", "body": "### Environment info\r\nOperating System: OS X 10.11.6\r\nTF Version: 0.10.0rc0 (No GPU)\r\n\r\n### Example\r\nRan `log_probabilities` op created from\r\n```python\r\ndecoded, log_probabilities = ctc_ops.ctc_beam_search_decoder(logits, \\\r\n                                                             seq_length, \\\r\n                                                             beam_width=beam_width, \\\r\n                                                             top_paths=top_paths, \\\r\n                                                             merge_repeated=False)\r\n```\r\nThe `decoded` result is as expected. However, the `log_probabilities` contains positive values which can not be log probabilities. For example, with batch size 4 and top_paths=10 the `log_probabilities` printout is as follows\r\n```\r\n[[ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\r\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\r\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\r\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\r\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\r\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]\r\n [ 3.85424066 -1.97321272 -1.99056399 -2.18253303 -2.18592954 -2.40727925\r\n  -2.87798476 -2.88267159 -2.94563317 -2.94854331]]\r\n```\r\n\r\n### Other attempted solutions\r\nNone\r\n\r\n\r\n### Logs or other output that would be helpful\r\nLink to the entire code in context[[1](https://github.com/mozilla/DeepSpeech/blob/issue8++/DeepSpeech.ipynb)]\r\n"}
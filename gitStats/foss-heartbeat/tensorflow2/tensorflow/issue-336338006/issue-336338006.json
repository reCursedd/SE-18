{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20353", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20353/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20353/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20353/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20353", "id": 336338006, "node_id": "MDU6SXNzdWUzMzYzMzgwMDY=", "number": 20353, "title": "convert frozon pb file to tflite but cannot find Output array which may be caused by that the frozen pb still have raining ops like Assign.", "user": {"login": "fzhu129", "id": 11604578, "node_id": "MDQ6VXNlcjExNjA0NTc4", "avatar_url": "https://avatars0.githubusercontent.com/u/11604578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fzhu129", "html_url": "https://github.com/fzhu129", "followers_url": "https://api.github.com/users/fzhu129/followers", "following_url": "https://api.github.com/users/fzhu129/following{/other_user}", "gists_url": "https://api.github.com/users/fzhu129/gists{/gist_id}", "starred_url": "https://api.github.com/users/fzhu129/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fzhu129/subscriptions", "organizations_url": "https://api.github.com/users/fzhu129/orgs", "repos_url": "https://api.github.com/users/fzhu129/repos", "events_url": "https://api.github.com/users/fzhu129/events{/privacy}", "received_events_url": "https://api.github.com/users/fzhu129/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, {"login": "raghuraman-k", "id": 34699873, "node_id": "MDQ6VXNlcjM0Njk5ODcz", "avatar_url": "https://avatars2.githubusercontent.com/u/34699873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raghuraman-k", "html_url": "https://github.com/raghuraman-k", "followers_url": "https://api.github.com/users/raghuraman-k/followers", "following_url": "https://api.github.com/users/raghuraman-k/following{/other_user}", "gists_url": "https://api.github.com/users/raghuraman-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/raghuraman-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raghuraman-k/subscriptions", "organizations_url": "https://api.github.com/users/raghuraman-k/orgs", "repos_url": "https://api.github.com/users/raghuraman-k/repos", "events_url": "https://api.github.com/users/raghuraman-k/events{/privacy}", "received_events_url": "https://api.github.com/users/raghuraman-k/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2018-06-27T18:23:22Z", "updated_at": "2018-09-13T17:12:01Z", "closed_at": "2018-09-13T17:12:01Z", "author_association": "NONE", "body_html": "<p>I cannot generate tflite file which may be caused that frozon pb file still have training ops.</p>\n<p>The operation like below:<br>\nuse<br>\nbazel-bin/tensorflow/python/tools/freeze_graph <br>\n--input_graph=/data/frankzhu/tmp/t2t_train/mnist/graph.pbtxt<br>\n--input_checkpoint=/data/frankzhu/tmp/t2t_train/mnist/model.ckpt-2000 <br>\n--input_binary=false <br>\n--output_graph=/data/frankzhu/tmp/mnist.pb <br>\n--output_node_names=save/restore_all</p>\n<p>to get .tflite file</p>\n<p>then use</p>\n<p>bazel run --config=opt <br>\n//tensorflow/contrib/lite/toco:toco -- <br>\n--input_file=/data/frankzhu/tmp/mnist.pb <br>\n--input_format=TENSORFLOW_GRAPHDEF <br>\n--output_format=TFLITE <br>\n--output_file=/data/frankzhu/tmp/mnist_q8.tflite <br>\n--inference_type=QUANTIZED_UINT8 <br>\n--input_type=FLOAT <br>\n--input_arrays=input <br>\n--output_arrays=save/restore_all/NoOp --input_shapes=1,28,28,1</p>\n<p>But get error:<br>\n018-06-11 09:42:39.760033: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-06-11 09:42:39.760052: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign<br>\n2018-06-11 09:42:39.774575: F tensorflow/contrib/lite/toco/tooling_util.cc:806] Check failed: model.HasArray(output_array) Output array not found: save/restore_all/NoOp</p>\n<p>Help from Andre Hentz' via TensorFlow Lite <a href=\"mailto:tflite@tensorflow.org\">tflite@tensorflow.org</a>, I was told that frozen graph may have training ops.</p>\n<p>Basically I would like to freeze the graph and convert it to quantized int8 tflite. If you need more details, could you please let me know?</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/files/2142432/mnist.tar.gz\">mnist.tar.gz</a></p>", "body_text": "I cannot generate tflite file which may be caused that frozon pb file still have training ops.\nThe operation like below:\nuse\nbazel-bin/tensorflow/python/tools/freeze_graph \n--input_graph=/data/frankzhu/tmp/t2t_train/mnist/graph.pbtxt\n--input_checkpoint=/data/frankzhu/tmp/t2t_train/mnist/model.ckpt-2000 \n--input_binary=false \n--output_graph=/data/frankzhu/tmp/mnist.pb \n--output_node_names=save/restore_all\nto get .tflite file\nthen use\nbazel run --config=opt \n//tensorflow/contrib/lite/toco:toco -- \n--input_file=/data/frankzhu/tmp/mnist.pb \n--input_format=TENSORFLOW_GRAPHDEF \n--output_format=TFLITE \n--output_file=/data/frankzhu/tmp/mnist_q8.tflite \n--inference_type=QUANTIZED_UINT8 \n--input_type=FLOAT \n--input_arrays=input \n--output_arrays=save/restore_all/NoOp --input_shapes=1,28,28,1\nBut get error:\n018-06-11 09:42:39.760033: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-06-11 09:42:39.760052: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\n2018-06-11 09:42:39.774575: F tensorflow/contrib/lite/toco/tooling_util.cc:806] Check failed: model.HasArray(output_array) Output array not found: save/restore_all/NoOp\nHelp from Andre Hentz' via TensorFlow Lite tflite@tensorflow.org, I was told that frozen graph may have training ops.\nBasically I would like to freeze the graph and convert it to quantized int8 tflite. If you need more details, could you please let me know?\nmnist.tar.gz", "body": "I cannot generate tflite file which may be caused that frozon pb file still have training ops.\r\n\r\nThe operation like below:\r\nuse \r\nbazel-bin/tensorflow/python/tools/freeze_graph \\\r\n  --input_graph=/data/frankzhu/tmp/t2t_train/mnist/graph.pbtxt\\\r\n  --input_checkpoint=/data/frankzhu/tmp/t2t_train/mnist/model.ckpt-2000 \\\r\n  --input_binary=false \\\r\n  --output_graph=/data/frankzhu/tmp/mnist.pb \\\r\n  --output_node_names=save/restore_all\r\n\r\nto get .tflite file\r\n\r\nthen use \r\n\r\nbazel run --config=opt \\\r\n  //tensorflow/contrib/lite/toco:toco -- \\\r\n  --input_file=/data/frankzhu/tmp/mnist.pb \\\r\n  --input_format=TENSORFLOW_GRAPHDEF \\\r\n  --output_format=TFLITE \\\r\n  --output_file=/data/frankzhu/tmp/mnist_q8.tflite \\\r\n  --inference_type=QUANTIZED_UINT8 \\\r\n  --input_type=FLOAT \\\r\n  --input_arrays=input \\\r\n  --output_arrays=save/restore_all/NoOp --input_shapes=1,28,28,1\r\n\r\nBut get error:\r\n018-06-11 09:42:39.760033: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-06-11 09:42:39.760052: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1366] Converting unsupported operation: Assign\r\n2018-06-11 09:42:39.774575: F tensorflow/contrib/lite/toco/tooling_util.cc:806] Check failed: model.HasArray(output_array) Output array not found: save/restore_all/NoOp\r\n\r\nHelp from Andre Hentz' via TensorFlow Lite <tflite@tensorflow.org>, I was told that frozen graph may have training ops.\r\n\r\nBasically I would like to freeze the graph and convert it to quantized int8 tflite. If you need more details, could you please let me know?\r\n\r\n\r\n[mnist.tar.gz](https://github.com/tensorflow/tensorflow/files/2142432/mnist.tar.gz)\r\n\r\n\r\n\r\n\r\n\r\n  "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/276131292", "html_url": "https://github.com/tensorflow/tensorflow/issues/5688#issuecomment-276131292", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5688", "id": 276131292, "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjEzMTI5Mg==", "user": {"login": "botonchou", "id": 3041643, "node_id": "MDQ6VXNlcjMwNDE2NDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/3041643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/botonchou", "html_url": "https://github.com/botonchou", "followers_url": "https://api.github.com/users/botonchou/followers", "following_url": "https://api.github.com/users/botonchou/following{/other_user}", "gists_url": "https://api.github.com/users/botonchou/gists{/gist_id}", "starred_url": "https://api.github.com/users/botonchou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/botonchou/subscriptions", "organizations_url": "https://api.github.com/users/botonchou/orgs", "repos_url": "https://api.github.com/users/botonchou/repos", "events_url": "https://api.github.com/users/botonchou/events{/privacy}", "received_events_url": "https://api.github.com/users/botonchou/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-30T17:38:44Z", "updated_at": "2017-01-30T17:38:44Z", "author_association": "NONE", "body_html": "<p>Similar problem here with deep 2d convolution network and huge batch size (because my input is [seq_length * batch_size, height, width] ).</p>\n<div class=\"highlight highlight-source-shell\"><pre>I tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node <span class=\"pl-c1\">read</span> from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \nname: TITAN X (Pascal)\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.531\npciBusID 0000:02:00.0\nTotal memory: 11.90GiB\nFree memory: 11.75GiB\nW tensorflow/stream_executor/cuda/cuda_driver.cc:590] creating context when one is currently active<span class=\"pl-k\">;</span> existing: 0x3a9e500\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node <span class=\"pl-c1\">read</span> from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 1 with properties: \nname: GeForce GTX 980 Ti\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:01:00.0\nTotal memory: 5.93GiB\nFree memory: 4.99GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:777] Peer access not supported between device ordinals 0 and 1\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:777] Peer access not supported between device ordinals 1 and 0\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 1 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y N \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 1:   N Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -<span class=\"pl-k\">&gt;</span> (device: 0, name: TITAN X (Pascal), pci bus id: 0000:02:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:1) -<span class=\"pl-k\">&gt;</span> (device: 1, name: GeForce GTX 980 Ti, pci bus id: 0000:01:00.0)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:2684] failed to enqueue convolution on stream: CUDNN_STATUS_NOT_SUPPORTED\nAborted (core dumped)\n</pre></div>\n<p>Change batch size to a smaller one solves the issue. It'd great if it can throw a python exception : )</p>", "body_text": "Similar problem here with deep 2d convolution network and huge batch size (because my input is [seq_length * batch_size, height, width] ).\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \nname: TITAN X (Pascal)\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.531\npciBusID 0000:02:00.0\nTotal memory: 11.90GiB\nFree memory: 11.75GiB\nW tensorflow/stream_executor/cuda/cuda_driver.cc:590] creating context when one is currently active; existing: 0x3a9e500\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 1 with properties: \nname: GeForce GTX 980 Ti\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:01:00.0\nTotal memory: 5.93GiB\nFree memory: 4.99GiB\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:777] Peer access not supported between device ordinals 0 and 1\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:777] Peer access not supported between device ordinals 1 and 0\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 1 \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y N \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 1:   N Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: TITAN X (Pascal), pci bus id: 0000:02:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:1) -> (device: 1, name: GeForce GTX 980 Ti, pci bus id: 0000:01:00.0)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:2684] failed to enqueue convolution on stream: CUDNN_STATUS_NOT_SUPPORTED\nAborted (core dumped)\n\nChange batch size to a smaller one solves the issue. It'd great if it can throw a python exception : )", "body": "Similar problem here with deep 2d convolution network and huge batch size (because my input is [seq_length * batch_size, height, width] ).\r\n\r\n```bash\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcublas.so locally\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcudnn.so locally\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcufft.so locally\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:128] successfully opened CUDA library libcurand.so locally\r\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 0 with properties: \r\nname: TITAN X (Pascal)\r\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.531\r\npciBusID 0000:02:00.0\r\nTotal memory: 11.90GiB\r\nFree memory: 11.75GiB\r\nW tensorflow/stream_executor/cuda/cuda_driver.cc:590] creating context when one is currently active; existing: 0x3a9e500\r\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:885] Found device 1 with properties: \r\nname: GeForce GTX 980 Ti\r\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\r\npciBusID 0000:01:00.0\r\nTotal memory: 5.93GiB\r\nFree memory: 4.99GiB\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:777] Peer access not supported between device ordinals 0 and 1\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:777] Peer access not supported between device ordinals 1 and 0\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:906] DMA: 0 1 \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 0:   Y N \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:916] 1:   N Y \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -> (device: 0, name: TITAN X (Pascal), pci bus id: 0000:02:00.0)\r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:1) -> (device: 1, name: GeForce GTX 980 Ti, pci bus id: 0000:01:00.0)\r\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:2684] failed to enqueue convolution on stream: CUDNN_STATUS_NOT_SUPPORTED\r\nAborted (core dumped)\r\n\r\n```\r\n\r\nChange batch size to a smaller one solves the issue. It'd great if it can throw a python exception : )"}
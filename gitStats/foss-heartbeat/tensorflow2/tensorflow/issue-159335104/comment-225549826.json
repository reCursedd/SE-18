{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/225549826", "html_url": "https://github.com/tensorflow/tensorflow/issues/2751#issuecomment-225549826", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2751", "id": 225549826, "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTU0OTgyNg==", "user": {"login": "damienmg", "id": 3721087, "node_id": "MDQ6VXNlcjM3MjEwODc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3721087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/damienmg", "html_url": "https://github.com/damienmg", "followers_url": "https://api.github.com/users/damienmg/followers", "following_url": "https://api.github.com/users/damienmg/following{/other_user}", "gists_url": "https://api.github.com/users/damienmg/gists{/gist_id}", "starred_url": "https://api.github.com/users/damienmg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/damienmg/subscriptions", "organizations_url": "https://api.github.com/users/damienmg/orgs", "repos_url": "https://api.github.com/users/damienmg/repos", "events_url": "https://api.github.com/users/damienmg/events{/privacy}", "received_events_url": "https://api.github.com/users/damienmg/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-13T10:56:30Z", "updated_at": "2016-06-13T10:56:30Z", "author_association": "MEMBER", "body_html": "<p>So I made it work but it's hacky:</p>\n<ol>\n<li>the name of the package encode the version of tensorflow (not a problem), the version of python and the system (not a problem). The version of python might be an issue. A workaround is to wrap the package in another zip but that's not really nice.</li>\n<li>pip is non deterministic, it stores the timestamp of the zip file. It's ok overall to mark the genrule as time stamped as this is for building a release binary.</li>\n</ol>\n<p>So overall my only trouble is the name of the package. I also figured out it might be good to have a skylark rules to do it that does not depends on bash, this would help the windows port too.</p>", "body_text": "So I made it work but it's hacky:\n\nthe name of the package encode the version of tensorflow (not a problem), the version of python and the system (not a problem). The version of python might be an issue. A workaround is to wrap the package in another zip but that's not really nice.\npip is non deterministic, it stores the timestamp of the zip file. It's ok overall to mark the genrule as time stamped as this is for building a release binary.\n\nSo overall my only trouble is the name of the package. I also figured out it might be good to have a skylark rules to do it that does not depends on bash, this would help the windows port too.", "body": "So I made it work but it's hacky:\n1. the name of the package encode the version of tensorflow (not a problem), the version of python and the system (not a problem). The version of python might be an issue. A workaround is to wrap the package in another zip but that's not really nice.\n2. pip is non deterministic, it stores the timestamp of the zip file. It's ok overall to mark the genrule as time stamped as this is for building a release binary.\n\nSo overall my only trouble is the name of the package. I also figured out it might be good to have a skylark rules to do it that does not depends on bash, this would help the windows port too.\n"}
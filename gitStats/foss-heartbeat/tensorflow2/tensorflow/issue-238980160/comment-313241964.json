{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/313241964", "html_url": "https://github.com/tensorflow/tensorflow/issues/11091#issuecomment-313241964", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11091", "id": 313241964, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzI0MTk2NA==", "user": {"login": "anishathalye", "id": 3526486, "node_id": "MDQ6VXNlcjM1MjY0ODY=", "avatar_url": "https://avatars1.githubusercontent.com/u/3526486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anishathalye", "html_url": "https://github.com/anishathalye", "followers_url": "https://api.github.com/users/anishathalye/followers", "following_url": "https://api.github.com/users/anishathalye/following{/other_user}", "gists_url": "https://api.github.com/users/anishathalye/gists{/gist_id}", "starred_url": "https://api.github.com/users/anishathalye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anishathalye/subscriptions", "organizations_url": "https://api.github.com/users/anishathalye/orgs", "repos_url": "https://api.github.com/users/anishathalye/repos", "events_url": "https://api.github.com/users/anishathalye/events{/privacy}", "received_events_url": "https://api.github.com/users/anishathalye/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-05T22:15:30Z", "updated_at": "2017-07-05T22:15:30Z", "author_association": "NONE", "body_html": "<p>Okay, so I tried the following:</p>\n<p>I have a network <code>y(x)</code>, where <code>y</code> contains no <code>tf.gradient</code> ops, and I checked:</p>\n<ol>\n<li>\n<p><code>tf.check_numerics(tf.gradients(y, x)[0])</code> -- result is ok</p>\n</li>\n<li>\n<p><code>tf.test.compute_gradient_error(x, ..., y, ...)</code> -- result is ~ 983 (is that okay? in any case, for training, first derivatives seem to work)</p>\n</li>\n<li>\n<p><code>tf.check_numerics(tf.gradients(tf.gradients(y, x)[0], x)[0])</code> -- result is ok</p>\n</li>\n<li>\n<p><code>tf.test.compute_gradient_error(x, ..., tf.gradients(y, x)[0], ...)</code> - result is ~ 1522423936</p>\n</li>\n</ol>\n<p>Finite differences probably isn't producing great results because <code>y</code> is a fairly big graph. But still, having a maximum error of 1e9 seems kind of large.</p>\n<p>What do you suggest looking into next?</p>", "body_text": "Okay, so I tried the following:\nI have a network y(x), where y contains no tf.gradient ops, and I checked:\n\n\ntf.check_numerics(tf.gradients(y, x)[0]) -- result is ok\n\n\ntf.test.compute_gradient_error(x, ..., y, ...) -- result is ~ 983 (is that okay? in any case, for training, first derivatives seem to work)\n\n\ntf.check_numerics(tf.gradients(tf.gradients(y, x)[0], x)[0]) -- result is ok\n\n\ntf.test.compute_gradient_error(x, ..., tf.gradients(y, x)[0], ...) - result is ~ 1522423936\n\n\nFinite differences probably isn't producing great results because y is a fairly big graph. But still, having a maximum error of 1e9 seems kind of large.\nWhat do you suggest looking into next?", "body": "Okay, so I tried the following:\r\n\r\nI have a network `y(x)`, where `y` contains no `tf.gradient` ops, and I checked:\r\n\r\n1. `tf.check_numerics(tf.gradients(y, x)[0])` -- result is ok\r\n\r\n2. `tf.test.compute_gradient_error(x, ..., y, ...)` -- result is ~ 983 (is that okay? in any case, for training, first derivatives seem to work)\r\n\r\n3. `tf.check_numerics(tf.gradients(tf.gradients(y, x)[0], x)[0])` -- result is ok\r\n\r\n4. `tf.test.compute_gradient_error(x, ..., tf.gradients(y, x)[0], ...)` - result is ~ 1522423936\r\n\r\nFinite differences probably isn't producing great results because `y` is a fairly big graph. But still, having a maximum error of 1e9 seems kind of large.\r\n\r\nWhat do you suggest looking into next?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/118815969", "pull_request_review_id": 40648288, "id": 118815969, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExODgxNTk2OQ==", "diff_hunk": "@@ -887,6 +887,10 @@ def __init__(self, tensors):\n     \"\"\"See `Dataset.from_tensor_slices()` for details.\"\"\"\n     super(TensorSliceDataset, self).__init__()\n     with ops.name_scope(\"tensors\"):\n+      tensors = ops.convert_n_to_tensor_or_indexed_slices(tensors)", "path": "tensorflow/contrib/data/python/ops/dataset_ops.py", "position": 4, "original_position": 4, "commit_id": "e76114017ff089e678d9e081aae3cc059226d583", "original_commit_id": "e76114017ff089e678d9e081aae3cc059226d583", "user": {"login": "omoindrot", "id": 13662086, "node_id": "MDQ6VXNlcjEzNjYyMDg2", "avatar_url": "https://avatars3.githubusercontent.com/u/13662086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omoindrot", "html_url": "https://github.com/omoindrot", "followers_url": "https://api.github.com/users/omoindrot/followers", "following_url": "https://api.github.com/users/omoindrot/following{/other_user}", "gists_url": "https://api.github.com/users/omoindrot/gists{/gist_id}", "starred_url": "https://api.github.com/users/omoindrot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omoindrot/subscriptions", "organizations_url": "https://api.github.com/users/omoindrot/orgs", "repos_url": "https://api.github.com/users/omoindrot/repos", "events_url": "https://api.github.com/users/omoindrot/events{/privacy}", "received_events_url": "https://api.github.com/users/omoindrot/received_events", "type": "User", "site_admin": false}, "body": "Hi @mrry,\r\nI really like the idea of not having to specify `tf.constant(filenames)` and `tf.constant(labels)` when feeding them into the function to create a dataset.\r\nEven in the `tf.contrib.data` README, you use as example:\r\n```python\r\nfilenames = [\"/var/data/file1.txt\", \"/var/data/file2.txt\"]\r\ndataset = tf.contrib.data.Dataset.from_tensor_slices(filenames)\r\n```\r\nAnd\r\n```python\r\nfilenames = tf.constant([\"/var/data/image1.jpg\", \"/var/data/image2.jpg\", ...])\r\nlabels = tf.constant([0, 37, 29, 1, ...])\r\n\r\ndataset = tf.contrib.data.Dataset.from_tensor_slices((filenames, labels))\r\n```\r\n\r\nBoth examples don't work with the current version.\r\n\r\nI think the easiest fix would be to force users to pass in a list, as in `tf.train.slice_input_producer`? We would have to rewrite some examples and kernel tests, but I feel it's more natural.", "created_at": "2017-05-27T07:57:52Z", "updated_at": "2017-05-27T07:57:52Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/10082#discussion_r118815969", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/10082", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/118815969"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/10082#discussion_r118815969"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/10082"}}, "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a>,<br>\nI really like the idea of not having to specify <code>tf.constant(filenames)</code> and <code>tf.constant(labels)</code> when feeding them into the function to create a dataset.<br>\nEven in the <code>tf.contrib.data</code> README, you use as example:</p>\n<div class=\"highlight highlight-source-python\"><pre>filenames <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/var/data/file1.txt<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/var/data/file2.txt<span class=\"pl-pds\">\"</span></span>]\ndataset <span class=\"pl-k\">=</span> tf.contrib.data.Dataset.from_tensor_slices(filenames)</pre></div>\n<p>And</p>\n<div class=\"highlight highlight-source-python\"><pre>filenames <span class=\"pl-k\">=</span> tf.constant([<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/var/data/image1.jpg<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/var/data/image2.jpg<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">...</span>])\nlabels <span class=\"pl-k\">=</span> tf.constant([<span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">37</span>, <span class=\"pl-c1\">29</span>, <span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">...</span>])\n\ndataset <span class=\"pl-k\">=</span> tf.contrib.data.Dataset.from_tensor_slices((filenames, labels))</pre></div>\n<p>Both examples don't work with the current version.</p>\n<p>I think the easiest fix would be to force users to pass in a list, as in <code>tf.train.slice_input_producer</code>? We would have to rewrite some examples and kernel tests, but I feel it's more natural.</p>", "body_text": "Hi @mrry,\nI really like the idea of not having to specify tf.constant(filenames) and tf.constant(labels) when feeding them into the function to create a dataset.\nEven in the tf.contrib.data README, you use as example:\nfilenames = [\"/var/data/file1.txt\", \"/var/data/file2.txt\"]\ndataset = tf.contrib.data.Dataset.from_tensor_slices(filenames)\nAnd\nfilenames = tf.constant([\"/var/data/image1.jpg\", \"/var/data/image2.jpg\", ...])\nlabels = tf.constant([0, 37, 29, 1, ...])\n\ndataset = tf.contrib.data.Dataset.from_tensor_slices((filenames, labels))\nBoth examples don't work with the current version.\nI think the easiest fix would be to force users to pass in a list, as in tf.train.slice_input_producer? We would have to rewrite some examples and kernel tests, but I feel it's more natural.", "in_reply_to_id": 118730409}
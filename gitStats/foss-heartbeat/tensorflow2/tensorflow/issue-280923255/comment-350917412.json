{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/350917412", "html_url": "https://github.com/tensorflow/tensorflow/issues/15262#issuecomment-350917412", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15262", "id": 350917412, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkxNzQxMg==", "user": {"login": "yanghoonkim", "id": 9985986, "node_id": "MDQ6VXNlcjk5ODU5ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/9985986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yanghoonkim", "html_url": "https://github.com/yanghoonkim", "followers_url": "https://api.github.com/users/yanghoonkim/followers", "following_url": "https://api.github.com/users/yanghoonkim/following{/other_user}", "gists_url": "https://api.github.com/users/yanghoonkim/gists{/gist_id}", "starred_url": "https://api.github.com/users/yanghoonkim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yanghoonkim/subscriptions", "organizations_url": "https://api.github.com/users/yanghoonkim/orgs", "repos_url": "https://api.github.com/users/yanghoonkim/repos", "events_url": "https://api.github.com/users/yanghoonkim/events{/privacy}", "received_events_url": "https://api.github.com/users/yanghoonkim/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-12T01:41:31Z", "updated_at": "2017-12-12T01:41:31Z", "author_association": "NONE", "body_html": "<p>Sure,<br>\nThe original code is :</p>\n<pre><code>with tf.variable_scope('test_scope') as var:\n    var = tf.get_variable('var', [3,4,5], dtype = tf.float32)\n    dense = tf.layers.Dense(5)\n    b = dense(var)\n</code></pre>\n<p>And the stack trace:</p>\n<pre><code>---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n&lt;ipython-input-2-8ebaffd3a589&gt; in &lt;module&gt;()\n      2     var = tf.get_variable('var', [3,4,5], dtype = tf.float32)\n      3     dense = tf.layers.Dense(5)\n----&gt; 4     b = dense(var)\n\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/layers/base.pyc in __call__(self, inputs, *args, **kwargs)\n    573         if in_graph_mode:\n    574           self._assert_input_compatibility(inputs)\n--&gt; 575         outputs = self.call(inputs, *args, **kwargs)\n    576 \n    577         if outputs is None:\n\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/layers/core.pyc in call(self, inputs)\n    149 \n    150   def call(self, inputs):\n--&gt; 151     inputs = ops.convert_to_tensor(inputs, dtype=self.dtype)\n    152     shape = inputs.get_shape().as_list()\n    153     if len(shape) &gt; 2:\n\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, preferred_dtype)\n    834       name=name,\n    835       preferred_dtype=preferred_dtype,\n--&gt; 836       as_ref=False)\n    837 \n    838 \n\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype, ctx)\n    938           \"dtype: requested = %s, actual = %s\" %\n    939           (_error_prefix(name), conversion_func, base_type, dtype.name,\n--&gt; 940            ret.dtype.name))\n    941     return ret\n    942   raise TypeError(\"%sCannot convert %r with type %s to Tensor: \"\n\nRuntimeError: Conversion function &lt;function _TensorConversionFunction at 0x7f2d52a64c08&gt; for type &lt;class 'tensorflow.python.ops.variables.Variable'&gt; returned incompatible dtype: requested = float32_ref, actual = float32\n</code></pre>", "body_text": "Sure,\nThe original code is :\nwith tf.variable_scope('test_scope') as var:\n    var = tf.get_variable('var', [3,4,5], dtype = tf.float32)\n    dense = tf.layers.Dense(5)\n    b = dense(var)\n\nAnd the stack trace:\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-2-8ebaffd3a589> in <module>()\n      2     var = tf.get_variable('var', [3,4,5], dtype = tf.float32)\n      3     dense = tf.layers.Dense(5)\n----> 4     b = dense(var)\n\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/layers/base.pyc in __call__(self, inputs, *args, **kwargs)\n    573         if in_graph_mode:\n    574           self._assert_input_compatibility(inputs)\n--> 575         outputs = self.call(inputs, *args, **kwargs)\n    576 \n    577         if outputs is None:\n\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/layers/core.pyc in call(self, inputs)\n    149 \n    150   def call(self, inputs):\n--> 151     inputs = ops.convert_to_tensor(inputs, dtype=self.dtype)\n    152     shape = inputs.get_shape().as_list()\n    153     if len(shape) > 2:\n\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, preferred_dtype)\n    834       name=name,\n    835       preferred_dtype=preferred_dtype,\n--> 836       as_ref=False)\n    837 \n    838 \n\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype, ctx)\n    938           \"dtype: requested = %s, actual = %s\" %\n    939           (_error_prefix(name), conversion_func, base_type, dtype.name,\n--> 940            ret.dtype.name))\n    941     return ret\n    942   raise TypeError(\"%sCannot convert %r with type %s to Tensor: \"\n\nRuntimeError: Conversion function <function _TensorConversionFunction at 0x7f2d52a64c08> for type <class 'tensorflow.python.ops.variables.Variable'> returned incompatible dtype: requested = float32_ref, actual = float32", "body": "Sure,\r\nThe original code is : \r\n```\r\nwith tf.variable_scope('test_scope') as var:\r\n    var = tf.get_variable('var', [3,4,5], dtype = tf.float32)\r\n    dense = tf.layers.Dense(5)\r\n    b = dense(var)\r\n```\r\n\r\nAnd the stack trace:\r\n```\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-2-8ebaffd3a589> in <module>()\r\n      2     var = tf.get_variable('var', [3,4,5], dtype = tf.float32)\r\n      3     dense = tf.layers.Dense(5)\r\n----> 4     b = dense(var)\r\n\r\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/layers/base.pyc in __call__(self, inputs, *args, **kwargs)\r\n    573         if in_graph_mode:\r\n    574           self._assert_input_compatibility(inputs)\r\n--> 575         outputs = self.call(inputs, *args, **kwargs)\r\n    576 \r\n    577         if outputs is None:\r\n\r\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/layers/core.pyc in call(self, inputs)\r\n    149 \r\n    150   def call(self, inputs):\r\n--> 151     inputs = ops.convert_to_tensor(inputs, dtype=self.dtype)\r\n    152     shape = inputs.get_shape().as_list()\r\n    153     if len(shape) > 2:\r\n\r\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in convert_to_tensor(value, dtype, name, preferred_dtype)\r\n    834       name=name,\r\n    835       preferred_dtype=preferred_dtype,\r\n--> 836       as_ref=False)\r\n    837 \r\n    838 \r\n\r\n/home/ad26kr/virenv/tensorflow1.4/lib/python2.7/site-packages/tensorflow/python/framework/ops.pyc in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype, ctx)\r\n    938           \"dtype: requested = %s, actual = %s\" %\r\n    939           (_error_prefix(name), conversion_func, base_type, dtype.name,\r\n--> 940            ret.dtype.name))\r\n    941     return ret\r\n    942   raise TypeError(\"%sCannot convert %r with type %s to Tensor: \"\r\n\r\nRuntimeError: Conversion function <function _TensorConversionFunction at 0x7f2d52a64c08> for type <class 'tensorflow.python.ops.variables.Variable'> returned incompatible dtype: requested = float32_ref, actual = float32\r\n```"}
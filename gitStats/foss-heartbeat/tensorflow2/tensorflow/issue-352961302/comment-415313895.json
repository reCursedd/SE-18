{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/415313895", "html_url": "https://github.com/tensorflow/tensorflow/issues/21800#issuecomment-415313895", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21800", "id": 415313895, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTMxMzg5NQ==", "user": {"login": "mzgsxs", "id": 17554462, "node_id": "MDQ6VXNlcjE3NTU0NDYy", "avatar_url": "https://avatars3.githubusercontent.com/u/17554462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mzgsxs", "html_url": "https://github.com/mzgsxs", "followers_url": "https://api.github.com/users/mzgsxs/followers", "following_url": "https://api.github.com/users/mzgsxs/following{/other_user}", "gists_url": "https://api.github.com/users/mzgsxs/gists{/gist_id}", "starred_url": "https://api.github.com/users/mzgsxs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mzgsxs/subscriptions", "organizations_url": "https://api.github.com/users/mzgsxs/orgs", "repos_url": "https://api.github.com/users/mzgsxs/repos", "events_url": "https://api.github.com/users/mzgsxs/events{/privacy}", "received_events_url": "https://api.github.com/users/mzgsxs/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-23T07:05:32Z", "updated_at": "2018-08-23T07:09:56Z", "author_association": "NONE", "body_html": "<p>Thank you so much for the help <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16018\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/asimshankar\">@asimshankar</a> , I've change my code based on your suggestion. (btw I've made a mistake in my question, it should be <strong>c-&gt;MakeShape({L, c-&gt;Dim(dims1, 2)})</strong> instead of original line <strong>c-&gt;MakeShape({c-&gt;Dim(dims2, 2), L})</strong> )</p>\n<p>Now my code looks like this:<br>\n::tensorflow::shape_inference::ShapeHandle output = c-&gt;MakeShape({c-&gt;kUnknownDim, c-&gt;Dim(dims1, 2)});<br>\nc-&gt;set_output(0, output);</p>\n<p>But another error occured:<br>\n<strong>Tensor(\"strided_slice_1:0\", shape=(32,), dtype=int32, device=/device:GPU:0) Tensor(\"strided_slice_2:0\", shape=(), dtype=int32, device=/device:GPU:0)<br>\n2018-08-23 06:58:18.876048: F /usr/local/lib/python3.5/dist-packages/tensorflow/include/tensorflow/core/framework/shape_inference.h:803] Check failed: dim.IsSet() Internal error: Got nullptr for Dimension.<br>\nAborted (core dumped)</strong></p>\n<p>I've also tired:<br>\nc-&gt;set_output(0, c-&gt;Matrix(c-&gt;kUnknownDim, c-&gt;Dim(dims1, 2)));<br>\nsame error<br>\nMy guess is maybe because this is an GPU op?</p>", "body_text": "Thank you so much for the help @asimshankar , I've change my code based on your suggestion. (btw I've made a mistake in my question, it should be c->MakeShape({L, c->Dim(dims1, 2)}) instead of original line c->MakeShape({c->Dim(dims2, 2), L}) )\nNow my code looks like this:\n::tensorflow::shape_inference::ShapeHandle output = c->MakeShape({c->kUnknownDim, c->Dim(dims1, 2)});\nc->set_output(0, output);\nBut another error occured:\nTensor(\"strided_slice_1:0\", shape=(32,), dtype=int32, device=/device:GPU:0) Tensor(\"strided_slice_2:0\", shape=(), dtype=int32, device=/device:GPU:0)\n2018-08-23 06:58:18.876048: F /usr/local/lib/python3.5/dist-packages/tensorflow/include/tensorflow/core/framework/shape_inference.h:803] Check failed: dim.IsSet() Internal error: Got nullptr for Dimension.\nAborted (core dumped)\nI've also tired:\nc->set_output(0, c->Matrix(c->kUnknownDim, c->Dim(dims1, 2)));\nsame error\nMy guess is maybe because this is an GPU op?", "body": "Thank you so much for the help @asimshankar , I've change my code based on your suggestion. (btw I've made a mistake in my question, it should be **c->MakeShape({L, c->Dim(dims1, 2)})** instead of original line **c->MakeShape({c->Dim(dims2, 2), L})** )\r\n\r\nNow my code looks like this:\r\n::tensorflow::shape_inference::ShapeHandle output = c->MakeShape({c->kUnknownDim, c->Dim(dims1, 2)});\r\nc->set_output(0, output);\r\n\r\nBut another error occured:\r\n**Tensor(\"strided_slice_1:0\", shape=(32,), dtype=int32, device=/device:GPU:0) Tensor(\"strided_slice_2:0\", shape=(), dtype=int32, device=/device:GPU:0)\r\n2018-08-23 06:58:18.876048: F /usr/local/lib/python3.5/dist-packages/tensorflow/include/tensorflow/core/framework/shape_inference.h:803] Check failed: dim.IsSet() Internal error: Got nullptr for Dimension.\r\nAborted (core dumped)**\r\n\r\nI've also tired:\r\nc->set_output(0, c->Matrix(c->kUnknownDim, c->Dim(dims1, 2)));\r\nsame error\r\nMy guess is maybe because this is an GPU op? "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14963", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14963/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14963/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14963/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14963", "id": 277640187, "node_id": "MDU6SXNzdWUyNzc2NDAxODc=", "number": 14963, "title": "Documentation of tf.nn.raw_rnn is confusing", "user": {"login": "akanimax", "id": 16590868, "node_id": "MDQ6VXNlcjE2NTkwODY4", "avatar_url": "https://avatars0.githubusercontent.com/u/16590868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akanimax", "html_url": "https://github.com/akanimax", "followers_url": "https://api.github.com/users/akanimax/followers", "following_url": "https://api.github.com/users/akanimax/following{/other_user}", "gists_url": "https://api.github.com/users/akanimax/gists{/gist_id}", "starred_url": "https://api.github.com/users/akanimax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akanimax/subscriptions", "organizations_url": "https://api.github.com/users/akanimax/orgs", "repos_url": "https://api.github.com/users/akanimax/repos", "events_url": "https://api.github.com/users/akanimax/events{/privacy}", "received_events_url": "https://api.github.com/users/akanimax/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-29T06:08:00Z", "updated_at": "2017-11-30T03:50:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>The documentation for the tf.nn.raw_rnn displays the following line as the pseudocode for the function:<br>\n<br><br>\n<code>(finished, next_input, initial_state, _, loop_state) = loop_fn( time=time, cell_output=None, cell_state=None, loop_state=None)</code><br>\n<br><br>\nThis is the first time the loop_fn is called by the raw_rnn interface. Here, the '_' for the emit_output returned by the loop_fn is a <strong><em>do not care</em></strong> for the function. This misleads the user into believing that returning <code>None</code> for the first time as the <code>emit_output</code> is OK.</p>\n<p>However, the actual code has the line:<br>\n<br><br>\n<code>(elements_finished, next_input, initial_state, emit_structure, init_loop_state) = loop_fn( time, None, None, None)  # time, cell_output, cell_state, loop_state</code><br>\n<br><br>\nThe code uses the <code>emit_structure</code> from the <code>emit_output</code> that then determines the shape of the emitted output to be aggregated in the <code>emit_ta</code> array.<br>\nSo, even for the first time the <code>loop_fn</code> needs to output a mock tensor for setting the shape of the output values.</p>\n<p>The documentation needs to include this as going through the framework implementation for figuring this out is too tiresome.</p>\n<p>Cheers!</p>", "body_text": "The documentation for the tf.nn.raw_rnn displays the following line as the pseudocode for the function:\n\n(finished, next_input, initial_state, _, loop_state) = loop_fn( time=time, cell_output=None, cell_state=None, loop_state=None)\n\nThis is the first time the loop_fn is called by the raw_rnn interface. Here, the '_' for the emit_output returned by the loop_fn is a do not care for the function. This misleads the user into believing that returning None for the first time as the emit_output is OK.\nHowever, the actual code has the line:\n\n(elements_finished, next_input, initial_state, emit_structure, init_loop_state) = loop_fn( time, None, None, None)  # time, cell_output, cell_state, loop_state\n\nThe code uses the emit_structure from the emit_output that then determines the shape of the emitted output to be aggregated in the emit_ta array.\nSo, even for the first time the loop_fn needs to output a mock tensor for setting the shape of the output values.\nThe documentation needs to include this as going through the framework implementation for figuring this out is too tiresome.\nCheers!", "body": "The documentation for the tf.nn.raw_rnn displays the following line as the pseudocode for the function:\r\n<br>\r\n`(finished, next_input, initial_state, _, loop_state) = loop_fn(\r\n    time=time, cell_output=None, cell_state=None, loop_state=None)`\r\n<br>\r\nThis is the first time the loop_fn is called by the raw_rnn interface. Here, the '_' for the emit_output returned by the loop_fn is a **_do not care_** for the function. This misleads the user into believing that returning `None` for the first time as the `emit_output` is OK.\r\n\r\nHowever, the actual code has the line:\r\n<br>\r\n`(elements_finished, next_input, initial_state, emit_structure,\r\n     init_loop_state) = loop_fn(\r\n         time, None, None, None)  # time, cell_output, cell_state, loop_state`\r\n<br>\r\nThe code uses the `emit_structure` from the `emit_output` that then determines the shape of the emitted output to be aggregated in the `emit_ta` array. \r\nSo, even for the first time the `loop_fn` needs to output a mock tensor for setting the shape of the output values.\r\n\r\nThe documentation needs to include this as going through the framework implementation for figuring this out is too tiresome. \r\n\r\nCheers!"}
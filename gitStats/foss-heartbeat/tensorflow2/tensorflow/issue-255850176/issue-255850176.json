{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12871", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12871/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12871/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12871/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12871", "id": 255850176, "node_id": "MDU6SXNzdWUyNTU4NTAxNzY=", "number": 12871, "title": "About Deterministic Behaviour of GPU implementation of tensorflow", "user": {"login": "antares1987", "id": 31724739, "node_id": "MDQ6VXNlcjMxNzI0NzM5", "avatar_url": "https://avatars0.githubusercontent.com/u/31724739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antares1987", "html_url": "https://github.com/antares1987", "followers_url": "https://api.github.com/users/antares1987/followers", "following_url": "https://api.github.com/users/antares1987/following{/other_user}", "gists_url": "https://api.github.com/users/antares1987/gists{/gist_id}", "starred_url": "https://api.github.com/users/antares1987/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antares1987/subscriptions", "organizations_url": "https://api.github.com/users/antares1987/orgs", "repos_url": "https://api.github.com/users/antares1987/repos", "events_url": "https://api.github.com/users/antares1987/events{/privacy}", "received_events_url": "https://api.github.com/users/antares1987/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 21, "created_at": "2017-09-07T08:07:09Z", "updated_at": "2018-11-14T16:31:22Z", "closed_at": "2018-09-21T18:57:17Z", "author_association": "NONE", "body_html": "<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Debian</li>\n<li><strong>TensorFlow version (use command below)</strong>:('v1.3.0-rc2-20-g0787eee', '1.3.0')</li>\n<li><strong>CUDA/cuDNN version</strong>: 8.0</li>\n<li><strong>GPU model and memory</strong>: GeForce GTX 950</li>\n</ul>\n<p>Dear experts,</p>\n<p>I have just written a python code that implements a CNN with tensorflow. Despite using tf.set_random_seed(0) throughout my code, I get different results for each different run using a GPU, while this is not happening when switching to CPU. I read different threads about stochastic behaviour of GPUs and I could find that the stochastic behaviour is happening when using AdamOptimizer. My code now uses a CPU just for the optimizer, and a GPU for all the others operations, so now the time performance of the GPU is 25% better than CPU despite the 700% of the full GPU implementation. My question is: is this avoidable? Should I really give up in having a deterministic code when using GPUs? How can I tune my hyperparameters and use a full GPU code (some forums say to make an average of different runs.. but this kills the time advantage of using GPUs).</p>\n<p>Thanks in advance for all your kind support and for the wonderful job</p>", "body_text": "OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian\nTensorFlow version (use command below):('v1.3.0-rc2-20-g0787eee', '1.3.0')\nCUDA/cuDNN version: 8.0\nGPU model and memory: GeForce GTX 950\n\nDear experts,\nI have just written a python code that implements a CNN with tensorflow. Despite using tf.set_random_seed(0) throughout my code, I get different results for each different run using a GPU, while this is not happening when switching to CPU. I read different threads about stochastic behaviour of GPUs and I could find that the stochastic behaviour is happening when using AdamOptimizer. My code now uses a CPU just for the optimizer, and a GPU for all the others operations, so now the time performance of the GPU is 25% better than CPU despite the 700% of the full GPU implementation. My question is: is this avoidable? Should I really give up in having a deterministic code when using GPUs? How can I tune my hyperparameters and use a full GPU code (some forums say to make an average of different runs.. but this kills the time advantage of using GPUs).\nThanks in advance for all your kind support and for the wonderful job", "body": "- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Debian\r\n- **TensorFlow version (use command below)**:('v1.3.0-rc2-20-g0787eee', '1.3.0')\r\n- **CUDA/cuDNN version**: 8.0\r\n- **GPU model and memory**: GeForce GTX 950\r\n\r\n\r\nDear experts,\r\n\r\nI have just written a python code that implements a CNN with tensorflow. Despite using tf.set_random_seed(0) throughout my code, I get different results for each different run using a GPU, while this is not happening when switching to CPU. I read different threads about stochastic behaviour of GPUs and I could find that the stochastic behaviour is happening when using AdamOptimizer. My code now uses a CPU just for the optimizer, and a GPU for all the others operations, so now the time performance of the GPU is 25% better than CPU despite the 700% of the full GPU implementation. My question is: is this avoidable? Should I really give up in having a deterministic code when using GPUs? How can I tune my hyperparameters and use a full GPU code (some forums say to make an average of different runs.. but this kills the time advantage of using GPUs).\r\n\r\nThanks in advance for all your kind support and for the wonderful job\r\n"}
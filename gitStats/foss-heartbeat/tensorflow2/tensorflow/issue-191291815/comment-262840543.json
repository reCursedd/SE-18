{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/262840543", "html_url": "https://github.com/tensorflow/tensorflow/pull/5810#issuecomment-262840543", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5810", "id": 262840543, "node_id": "MDEyOklzc3VlQ29tbWVudDI2Mjg0MDU0Mw==", "user": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-24T20:22:05Z", "updated_at": "2016-11-24T20:22:05Z", "author_association": "MEMBER", "body_html": "<p>Looks like after this PR on MacOS, one shard of the cwise_ops_test is consistently failing with the following error:</p>\n<pre><code>FAIL: testBCast_15B (__main__.BinaryOpTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 1031, in testBCast_15B\n    self._testBCastB([10, 3, 1, 2], [3, 1, 2])\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 829, in _testBCastB\n    self._testBCastByFunc(funcs, xs, ys)\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 814, in _testBCastByFunc\n    self._compareBCast(ys, xs, dtype, np_func, tf_func)\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 795, in _compareBCast\n    self._compareGpu(x, y+ 0.1, np_func, tf_func)\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 575, in _compareGpu\n    self.assertAllClose(np_ans, tf_gpu)\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 449, in assertAllClose\n    np.testing.assert_allclose(a, b, rtol=rtol, atol=atol)\n  File \"/Library/Python/2.7/site-packages/numpy-1.11.0-py2.7-macosx-10.11-intel.egg/numpy/testing/utils.py\", line 1391, in assert_allclose\n    verbose=verbose, header=header)\n  File \"/Library/Python/2.7/site-packages/numpy-1.11.0-py2.7-macosx-10.11-intel.egg/numpy/testing/utils.py\", line 733, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError: \nNot equal to tolerance rtol=1e-06, atol=1e-06\n\n(mismatch 1.66666666667%)\n x: array([[[[   1.000000  +0.j      ,    1.474711  +0.703009j]],\n\n        [[   2.064002  +1.518696j,    2.834290  +2.474841j]],...\n y: array([[[[   1.000000  +0.j      ,    1.474711  +0.703009j]],\n\n        [[   2.064002  +1.518697j,    2.834289  +2.47484j ]],...\n\n----------------------------------------------------------------------\nRan 3 tests in 13.699s\n\nFAILED (failures=1)\n</code></pre>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6969686\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/benoitsteiner\">@benoitsteiner</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8373795\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/lukeiwanski\">@lukeiwanski</a> I looked at the code, and I see that in _compareBCast in cwise_ops_test we add <code>0.1</code> to one of the args.<br>\nIs it by any chance a leftover?<br>\nI will send a PR to fix.</p>", "body_text": "Looks like after this PR on MacOS, one shard of the cwise_ops_test is consistently failing with the following error:\nFAIL: testBCast_15B (__main__.BinaryOpTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 1031, in testBCast_15B\n    self._testBCastB([10, 3, 1, 2], [3, 1, 2])\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 829, in _testBCastB\n    self._testBCastByFunc(funcs, xs, ys)\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 814, in _testBCastByFunc\n    self._compareBCast(ys, xs, dtype, np_func, tf_func)\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 795, in _compareBCast\n    self._compareGpu(x, y+ 0.1, np_func, tf_func)\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 575, in _compareGpu\n    self.assertAllClose(np_ans, tf_gpu)\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 449, in assertAllClose\n    np.testing.assert_allclose(a, b, rtol=rtol, atol=atol)\n  File \"/Library/Python/2.7/site-packages/numpy-1.11.0-py2.7-macosx-10.11-intel.egg/numpy/testing/utils.py\", line 1391, in assert_allclose\n    verbose=verbose, header=header)\n  File \"/Library/Python/2.7/site-packages/numpy-1.11.0-py2.7-macosx-10.11-intel.egg/numpy/testing/utils.py\", line 733, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError: \nNot equal to tolerance rtol=1e-06, atol=1e-06\n\n(mismatch 1.66666666667%)\n x: array([[[[   1.000000  +0.j      ,    1.474711  +0.703009j]],\n\n        [[   2.064002  +1.518696j,    2.834290  +2.474841j]],...\n y: array([[[[   1.000000  +0.j      ,    1.474711  +0.703009j]],\n\n        [[   2.064002  +1.518697j,    2.834289  +2.47484j ]],...\n\n----------------------------------------------------------------------\nRan 3 tests in 13.699s\n\nFAILED (failures=1)\n\n@benoitsteiner @lukeiwanski I looked at the code, and I see that in _compareBCast in cwise_ops_test we add 0.1 to one of the args.\nIs it by any chance a leftover?\nI will send a PR to fix.", "body": "Looks like after this PR on MacOS, one shard of the cwise_ops_test is consistently failing with the following error:\r\n\r\n```\r\nFAIL: testBCast_15B (__main__.BinaryOpTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 1031, in testBCast_15B\r\n    self._testBCastB([10, 3, 1, 2], [3, 1, 2])\r\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 829, in _testBCastB\r\n    self._testBCastByFunc(funcs, xs, ys)\r\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 814, in _testBCastByFunc\r\n    self._compareBCast(ys, xs, dtype, np_func, tf_func)\r\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 795, in _compareBCast\r\n    self._compareGpu(x, y+ 0.1, np_func, tf_func)\r\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/kernel_tests/cwise_ops_test.py\", line 575, in _compareGpu\r\n    self.assertAllClose(np_ans, tf_gpu)\r\n  File \"/private/var/tmp/_bazel_jenkins/47802726cfb6783f0513af299bd0e285/execroot/tensorflow-master-mac/bazel-out/local-opt/bin/tensorflow/python/kernel_tests/cwise_ops_test.runfiles/org_tensorflow/tensorflow/python/framework/test_util.py\", line 449, in assertAllClose\r\n    np.testing.assert_allclose(a, b, rtol=rtol, atol=atol)\r\n  File \"/Library/Python/2.7/site-packages/numpy-1.11.0-py2.7-macosx-10.11-intel.egg/numpy/testing/utils.py\", line 1391, in assert_allclose\r\n    verbose=verbose, header=header)\r\n  File \"/Library/Python/2.7/site-packages/numpy-1.11.0-py2.7-macosx-10.11-intel.egg/numpy/testing/utils.py\", line 733, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-06, atol=1e-06\r\n\r\n(mismatch 1.66666666667%)\r\n x: array([[[[   1.000000  +0.j      ,    1.474711  +0.703009j]],\r\n\r\n        [[   2.064002  +1.518696j,    2.834290  +2.474841j]],...\r\n y: array([[[[   1.000000  +0.j      ,    1.474711  +0.703009j]],\r\n\r\n        [[   2.064002  +1.518697j,    2.834289  +2.47484j ]],...\r\n\r\n----------------------------------------------------------------------\r\nRan 3 tests in 13.699s\r\n\r\nFAILED (failures=1)\r\n```\r\n\r\n@benoitsteiner @lukeiwanski I looked at the code, and I see that in _compareBCast in cwise_ops_test we add `0.1` to one of the args.\r\nIs it by any chance a leftover?\r\nI will send a PR to fix."}
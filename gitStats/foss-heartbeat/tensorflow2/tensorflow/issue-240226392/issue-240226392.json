{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11248", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11248/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11248/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11248/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11248", "id": 240226392, "node_id": "MDU6SXNzdWUyNDAyMjYzOTI=", "number": 11248, "title": "error in freeze_graph.py", "user": {"login": "azadef", "id": 8112587, "node_id": "MDQ6VXNlcjgxMTI1ODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/8112587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/azadef", "html_url": "https://github.com/azadef", "followers_url": "https://api.github.com/users/azadef/followers", "following_url": "https://api.github.com/users/azadef/following{/other_user}", "gists_url": "https://api.github.com/users/azadef/gists{/gist_id}", "starred_url": "https://api.github.com/users/azadef/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/azadef/subscriptions", "organizations_url": "https://api.github.com/users/azadef/orgs", "repos_url": "https://api.github.com/users/azadef/repos", "events_url": "https://api.github.com/users/azadef/events{/privacy}", "received_events_url": "https://api.github.com/users/azadef/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-07-03T17:04:18Z", "updated_at": "2017-07-04T13:04:27Z", "closed_at": "2017-07-04T13:04:27Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<p>Ubuntu 16.04<br>\nPython 2.7.12<br>\nTensorflow 1.2.1 installed using pip<br>\nGPU: Nvidia Quadro M2000M 4GB<br>\nCUDA V 8.0.4</p>\n<h3>Issue</h3>\n<p>I am trying to recreate the frozen graph using freeze_graph.py from the ssd_mobilenet pretrained model available here:</p>\n<p><a href=\"https://github.com/tensorflow/models/blob/master/object_detection/g3doc/detection_model_zoo.md\">https://github.com/tensorflow/models/blob/master/object_detection/g3doc/detection_model_zoo.md</a></p>\n<p>I printed the output nodes using the following command:</p>\n<p><code>for n in detection_graph.as_graph_def().node:</code><br>\n<code>    print(n.name)</code></p>\n<p>I tried running freeze_graph with different output_nodes such as add_6, Postprocessor/BatchMultiClassNonMaxSuppression/stack with following command:</p>\n<p>freeze_graph.py --input_graph=ssd_mobilenet_v1_coco/graph.pbtxt --input_checkpoint=ssd_mobilenet_v1_coco/model.ckpt --output_graph=./frozen_graph.pb --output_node_names=add_6</p>\n<p>This is the error that I get:</p>\n<p>Traceback (most recent call last):<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 202, in <br>\napp.run(main=main, argv=[sys.argv[0]] + unparsed)<br>\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 134, in main<br>\nFLAGS.variable_names_blacklist)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 99, in freeze_graph<br>\n_ = importer.import_graph_def(input_graph_def, name=\"\")<br>\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/framework/importer.py\", line 283, in import_graph_def<br>\nraise ValueError('No op named %s in defined operations.' % node.op)<br>\nValueError: No op named SSTableReaderV2 in defined operations.</p>\n<p>When I try feeding the old frozen_graph (.pb file) as --input_graph with --input_binary=true to freeze_graph, I get the following error:</p>\n<p>Traceback (most recent call last):<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 202, in <br>\napp.run(main=main, argv=[sys.argv[0]] + unparsed)<br>\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 134, in main<br>\nFLAGS.variable_names_blacklist)<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 112, in freeze_graph<br>\nsess.run([restore_op_name], {filename_tensor_name: input_checkpoint})<br>\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 789, in run<br>\nrun_metadata_ptr)<br>\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 945, in _run<br>\n+ e.args[0])<br>\nTypeError: Cannot interpret feed_dict key as Tensor: The name 'save/Const:0' refers to a Tensor which does not exist. The operation, 'save/Const', does not exist in the graph.</p>\n<p>I don't know if this is a bug or lack of documentation, but it would be nice to add some documentation such as the output nodes.</p>\n<p>P.S: I am trying to recreate the frozen graph to be able to create a new frozen graph after fine tuning the model.</p>", "body_text": "System information\nUbuntu 16.04\nPython 2.7.12\nTensorflow 1.2.1 installed using pip\nGPU: Nvidia Quadro M2000M 4GB\nCUDA V 8.0.4\nIssue\nI am trying to recreate the frozen graph using freeze_graph.py from the ssd_mobilenet pretrained model available here:\nhttps://github.com/tensorflow/models/blob/master/object_detection/g3doc/detection_model_zoo.md\nI printed the output nodes using the following command:\nfor n in detection_graph.as_graph_def().node:\n    print(n.name)\nI tried running freeze_graph with different output_nodes such as add_6, Postprocessor/BatchMultiClassNonMaxSuppression/stack with following command:\nfreeze_graph.py --input_graph=ssd_mobilenet_v1_coco/graph.pbtxt --input_checkpoint=ssd_mobilenet_v1_coco/model.ckpt --output_graph=./frozen_graph.pb --output_node_names=add_6\nThis is the error that I get:\nTraceback (most recent call last):\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 202, in \napp.run(main=main, argv=[sys.argv[0]] + unparsed)\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 134, in main\nFLAGS.variable_names_blacklist)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 99, in freeze_graph\n_ = importer.import_graph_def(input_graph_def, name=\"\")\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/framework/importer.py\", line 283, in import_graph_def\nraise ValueError('No op named %s in defined operations.' % node.op)\nValueError: No op named SSTableReaderV2 in defined operations.\nWhen I try feeding the old frozen_graph (.pb file) as --input_graph with --input_binary=true to freeze_graph, I get the following error:\nTraceback (most recent call last):\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 202, in \napp.run(main=main, argv=[sys.argv[0]] + unparsed)\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 134, in main\nFLAGS.variable_names_blacklist)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 112, in freeze_graph\nsess.run([restore_op_name], {filename_tensor_name: input_checkpoint})\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 789, in run\nrun_metadata_ptr)\nFile \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 945, in _run\n+ e.args[0])\nTypeError: Cannot interpret feed_dict key as Tensor: The name 'save/Const:0' refers to a Tensor which does not exist. The operation, 'save/Const', does not exist in the graph.\nI don't know if this is a bug or lack of documentation, but it would be nice to add some documentation such as the output nodes.\nP.S: I am trying to recreate the frozen graph to be able to create a new frozen graph after fine tuning the model.", "body": "### System information\r\nUbuntu 16.04\r\nPython 2.7.12\r\nTensorflow 1.2.1 installed using pip\r\nGPU: Nvidia Quadro M2000M 4GB\r\nCUDA V 8.0.4\r\n\r\n### Issue\r\nI am trying to recreate the frozen graph using freeze_graph.py from the ssd_mobilenet pretrained model available here:\r\n\r\nhttps://github.com/tensorflow/models/blob/master/object_detection/g3doc/detection_model_zoo.md\r\n\r\nI printed the output nodes using the following command:\r\n\r\n`for n in detection_graph.as_graph_def().node:`\r\n`    print(n.name)`\r\n\r\nI tried running freeze_graph with different output_nodes such as add_6, Postprocessor/BatchMultiClassNonMaxSuppression/stack with following command:\r\n\r\nfreeze_graph.py --input_graph=ssd_mobilenet_v1_coco/graph.pbtxt --input_checkpoint=ssd_mobilenet_v1_coco/model.ckpt --output_graph=./frozen_graph.pb --output_node_names=add_6\r\n\r\nThis is the error that I get:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 202, in <module>\r\n    app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 134, in main\r\n    FLAGS.variable_names_blacklist)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 99, in freeze_graph\r\n    _ = importer.import_graph_def(input_graph_def, name=\"\")\r\n  File \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/framework/importer.py\", line 283, in import_graph_def\r\n    raise ValueError('No op named %s in defined operations.' % node.op)\r\nValueError: No op named SSTableReaderV2 in defined operations.\r\n\r\nWhen I try feeding the old frozen_graph (.pb file) as --input_graph with --input_binary=true to freeze_graph, I get the following error:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 202, in <module>\r\n    app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 134, in main\r\n    FLAGS.variable_names_blacklist)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 112, in freeze_graph\r\n    sess.run([restore_op_name], {filename_tensor_name: input_checkpoint})\r\n  File \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 789, in run\r\n    run_metadata_ptr)\r\n  File \"/home/adminloc/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 945, in _run\r\n    + e.args[0])\r\nTypeError: Cannot interpret feed_dict key as Tensor: The name 'save/Const:0' refers to a Tensor which does not exist. The operation, 'save/Const', does not exist in the graph.\r\n\r\nI don't know if this is a bug or lack of documentation, but it would be nice to add some documentation such as the output nodes.\r\n\r\nP.S: I am trying to recreate the frozen graph to be able to create a new frozen graph after fine tuning the model."}
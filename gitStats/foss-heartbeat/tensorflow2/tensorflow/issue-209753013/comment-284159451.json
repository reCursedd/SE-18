{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/284159451", "html_url": "https://github.com/tensorflow/tensorflow/issues/7817#issuecomment-284159451", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7817", "id": 284159451, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDE1OTQ1MQ==", "user": {"login": "yaroslavvb2", "id": 25833812, "node_id": "MDQ6VXNlcjI1ODMzODEy", "avatar_url": "https://avatars1.githubusercontent.com/u/25833812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb2", "html_url": "https://github.com/yaroslavvb2", "followers_url": "https://api.github.com/users/yaroslavvb2/followers", "following_url": "https://api.github.com/users/yaroslavvb2/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb2/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb2/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb2/orgs", "repos_url": "https://api.github.com/users/yaroslavvb2/repos", "events_url": "https://api.github.com/users/yaroslavvb2/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb2/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-04T15:44:52Z", "updated_at": "2017-03-04T15:44:52Z", "author_association": "NONE", "body_html": "<div class=\"email-fragment\">Can you share self contained reproducible example?</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Mar 4, 2017 4:24 AM, \"akaitsuki-ii\" ***@***.***&gt; wrote:\n <a class=\"user-mention\" href=\"https://github.com/yaroslavvb\">@yaroslavvb</a> &lt;<a href=\"https://github.com/yaroslavvb\">https://github.com/yaroslavvb</a>&gt; Sorry for check it so late.\n I did preload the queue full enough (using single thread\n sess.run(enqueue_ops)) this time before start running my model and\n consume the queue, there is no more enqueue operation after dequeue is\n start.\n But it seems to be very slow for dequeue in this situation.\n\n The following is the graph and node metadata showed in TensorBoard. You\n can see that compute time of dequeue operation is 24.2ms, which is much\n longer than that of my model, 1.36ms.\n [image: graph]\n &lt;<a href=\"https://cloud.githubusercontent.com/assets/8386553/23578611/322056d4-0116-11e7-9f48-621e7b6a55d0.png\">https://cloud.githubusercontent.com/assets/8386553/23578611/322056d4-0116-11e7-9f48-621e7b6a55d0.png</a>&gt;\n [image: dequeue-status]\n &lt;<a href=\"https://cloud.githubusercontent.com/assets/8386553/23578630/a4d7c284-0116-11e7-81f4-7d4aec8b49cd.png\">https://cloud.githubusercontent.com/assets/8386553/23578630/a4d7c284-0116-11e7-81f4-7d4aec8b49cd.png</a>&gt;\n [image: model-status]\n &lt;<a href=\"https://cloud.githubusercontent.com/assets/8386553/23578632/aecdc41e-0116-11e7-8047-501c6e3dd442.png\">https://cloud.githubusercontent.com/assets/8386553/23578632/aecdc41e-0116-11e7-8047-501c6e3dd442.png</a>&gt;\n\n However, if I replace my model with much light operation like tf.square,\n dequeue will be much faster with same tensors output.\n [image: graph-light]\n &lt;<a href=\"https://cloud.githubusercontent.com/assets/8386553/23578663/45ab84e8-0117-11e7-9d6f-7c6316857d2f.png\">https://cloud.githubusercontent.com/assets/8386553/23578663/45ab84e8-0117-11e7-9d6f-7c6316857d2f.png</a>&gt;\n [image: dequeue-status-light]\n &lt;<a href=\"https://cloud.githubusercontent.com/assets/8386553/23578664/494bfe02-0117-11e7-94e0-a43dccceb613.png\">https://cloud.githubusercontent.com/assets/8386553/23578664/494bfe02-0117-11e7-94e0-a43dccceb613.png</a>&gt;\n\n I can not figure out what the problem is...?\n\n \u2014\n You are receiving this because you are subscribed to this thread.\n Reply to this email directly, view it on GitHub\n &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"209753013\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7817\" href=\"https://github.com/tensorflow/tensorflow/issues/7817#issuecomment-284148196\">#7817 (comment)</a>&gt;,\n or mute the thread\n &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AYoxVCRAVhRooixrFahBsW1ABrHjmQ40ks5riVgYgaJpZM4MJ7ZR\">https://github.com/notifications/unsubscribe-auth/AYoxVCRAVhRooixrFahBsW1ABrHjmQ40ks5riVgYgaJpZM4MJ7ZR</a>&gt;\n .\n</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "Can you share self contained reproducible example?\n\u2026\nOn Mar 4, 2017 4:24 AM, \"akaitsuki-ii\" ***@***.***> wrote:\n @yaroslavvb <https://github.com/yaroslavvb> Sorry for check it so late.\n I did preload the queue full enough (using single thread\n sess.run(enqueue_ops)) this time before start running my model and\n consume the queue, there is no more enqueue operation after dequeue is\n start.\n But it seems to be very slow for dequeue in this situation.\n\n The following is the graph and node metadata showed in TensorBoard. You\n can see that compute time of dequeue operation is 24.2ms, which is much\n longer than that of my model, 1.36ms.\n [image: graph]\n <https://cloud.githubusercontent.com/assets/8386553/23578611/322056d4-0116-11e7-9f48-621e7b6a55d0.png>\n [image: dequeue-status]\n <https://cloud.githubusercontent.com/assets/8386553/23578630/a4d7c284-0116-11e7-81f4-7d4aec8b49cd.png>\n [image: model-status]\n <https://cloud.githubusercontent.com/assets/8386553/23578632/aecdc41e-0116-11e7-8047-501c6e3dd442.png>\n\n However, if I replace my model with much light operation like tf.square,\n dequeue will be much faster with same tensors output.\n [image: graph-light]\n <https://cloud.githubusercontent.com/assets/8386553/23578663/45ab84e8-0117-11e7-9d6f-7c6316857d2f.png>\n [image: dequeue-status-light]\n <https://cloud.githubusercontent.com/assets/8386553/23578664/494bfe02-0117-11e7-94e0-a43dccceb613.png>\n\n I can not figure out what the problem is...?\n\n \u2014\n You are receiving this because you are subscribed to this thread.\n Reply to this email directly, view it on GitHub\n <#7817 (comment)>,\n or mute the thread\n <https://github.com/notifications/unsubscribe-auth/AYoxVCRAVhRooixrFahBsW1ABrHjmQ40ks5riVgYgaJpZM4MJ7ZR>\n .", "body": "Can you share self contained reproducible example?\n\nOn Mar 4, 2017 4:24 AM, \"akaitsuki-ii\" <notifications@github.com> wrote:\n\n> @yaroslavvb <https://github.com/yaroslavvb> Sorry for check it so late.\n> I did preload the queue full enough (using single thread\n> sess.run(enqueue_ops)) this time before start running my model and\n> consume the queue, there is no more enqueue operation after dequeue is\n> start.\n> But it seems to be very slow for dequeue in this situation.\n>\n> The following is the graph and node metadata showed in TensorBoard. You\n> can see that compute time of dequeue operation is 24.2ms, which is much\n> longer than that of my model, 1.36ms.\n> [image: graph]\n> <https://cloud.githubusercontent.com/assets/8386553/23578611/322056d4-0116-11e7-9f48-621e7b6a55d0.png>\n> [image: dequeue-status]\n> <https://cloud.githubusercontent.com/assets/8386553/23578630/a4d7c284-0116-11e7-81f4-7d4aec8b49cd.png>\n> [image: model-status]\n> <https://cloud.githubusercontent.com/assets/8386553/23578632/aecdc41e-0116-11e7-8047-501c6e3dd442.png>\n>\n> However, if I replace my model with much light operation like tf.square,\n> dequeue will be much faster with same tensors output.\n> [image: graph-light]\n> <https://cloud.githubusercontent.com/assets/8386553/23578663/45ab84e8-0117-11e7-9d6f-7c6316857d2f.png>\n> [image: dequeue-status-light]\n> <https://cloud.githubusercontent.com/assets/8386553/23578664/494bfe02-0117-11e7-94e0-a43dccceb613.png>\n>\n> I can not figure out what the problem is...?\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/tensorflow/tensorflow/issues/7817#issuecomment-284148196>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AYoxVCRAVhRooixrFahBsW1ABrHjmQ40ks5riVgYgaJpZM4MJ7ZR>\n> .\n>\n"}
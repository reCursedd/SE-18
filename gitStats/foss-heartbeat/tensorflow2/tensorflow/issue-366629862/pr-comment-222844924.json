{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/222844924", "pull_request_review_id": 161832422, "id": 222844924, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjg0NDkyNA==", "diff_hunk": "@@ -272,7 +272,7 @@ Status MetaOptimizer::OptimizeGraph(Cluster* cluster, const GrapplerItem& item,\n   }\n \n   std::vector<std::unique_ptr<GraphOptimizer>> optimizers;\n-  if (cfg_.optimizers().empty()) {\n+  if (cfg_.optimizers().empty() && cfg_.custom_optimizers().empty()) {", "path": "tensorflow/core/grappler/optimizers/meta_optimizer.cc", "position": 5, "original_position": 5, "commit_id": "7e20bec6ff779d5d6142668aa2d897b98a2bd844", "original_commit_id": "7e20bec6ff779d5d6142668aa2d897b98a2bd844", "user": {"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}, "body": "@rmlarsen,\r\n\r\n> My concern is that your change breaks current use cases of the form \"Run the default optimizers + my custom optimizers in cfg.custom_optimizers().\r\n\r\nThat is correct. But I have a feeling that run default + my custom is more fragile than setting optimizers. Most of the time, order of optimizations are important and need to be controlled. We frequently observed that when new optimizers are added to the list of default optimizers, performance of our optimizations dropped or optimization completely failed.", "created_at": "2018-10-04T22:19:30Z", "updated_at": "2018-10-04T22:23:35Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/22720#discussion_r222844924", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22720", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/222844924"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/22720#discussion_r222844924"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/22720"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16907534\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rmlarsen\">@rmlarsen</a>,</p>\n<blockquote>\n<p>My concern is that your change breaks current use cases of the form \"Run the default optimizers + my custom optimizers in cfg.custom_optimizers().</p>\n</blockquote>\n<p>That is correct. But I have a feeling that run default + my custom is more fragile than setting optimizers. Most of the time, order of optimizations are important and need to be controlled. We frequently observed that when new optimizers are added to the list of default optimizers, performance of our optimizations dropped or optimization completely failed.</p>", "body_text": "@rmlarsen,\n\nMy concern is that your change breaks current use cases of the form \"Run the default optimizers + my custom optimizers in cfg.custom_optimizers().\n\nThat is correct. But I have a feeling that run default + my custom is more fragile than setting optimizers. Most of the time, order of optimizations are important and need to be controlled. We frequently observed that when new optimizers are added to the list of default optimizers, performance of our optimizations dropped or optimization completely failed.", "in_reply_to_id": 222733214}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9836", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9836/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9836/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9836/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9836", "id": 227964522, "node_id": "MDU6SXNzdWUyMjc5NjQ1MjI=", "number": 9836, "title": "Unable to run model in iOS: dtype() == expected_dtype (9 vs. 4)", "user": {"login": "BrianOn99", "id": 8319689, "node_id": "MDQ6VXNlcjgzMTk2ODk=", "avatar_url": "https://avatars3.githubusercontent.com/u/8319689?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BrianOn99", "html_url": "https://github.com/BrianOn99", "followers_url": "https://api.github.com/users/BrianOn99/followers", "following_url": "https://api.github.com/users/BrianOn99/following{/other_user}", "gists_url": "https://api.github.com/users/BrianOn99/gists{/gist_id}", "starred_url": "https://api.github.com/users/BrianOn99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BrianOn99/subscriptions", "organizations_url": "https://api.github.com/users/BrianOn99/orgs", "repos_url": "https://api.github.com/users/BrianOn99/repos", "events_url": "https://api.github.com/users/BrianOn99/events{/privacy}", "received_events_url": "https://api.github.com/users/BrianOn99/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 19, "created_at": "2017-05-11T11:47:10Z", "updated_at": "2018-10-09T09:11:44Z", "closed_at": "2018-07-11T02:20:37Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>iOS emulator</strong></li>\n<li><strong>TensorFlow version v1.1.0rc2</strong></li>\n<li>compiler flag: -O3, <code>-D__ANDROID_TYPES_SLIM__</code> replaced by <code>-D__ANDROID_TYPES_FULL__</code> inside <code>tensorflow/contrib/makefile/Makefile</code> in order to fix a issue of missing kernel</li>\n<li>modification made: <code>tensorflow/core/kernels/cwise_op_floor_mod.cc</code> added to <code>tensorflow/contrib/makefile/tf_op_files.txt b/tensorflow/contrib/makefile/tf_op_files.txt</code> in order to fix another issue of missing kernel</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I am trying to run the <a href=\"https://github.com/DrSleep/tensorflow-deeplab-resnet\">deeplab image segmentation</a> on iOS.  I have freezed the model, which can then be run on a python shell.  But when I put it on to iOS, it crashes.  Please see the log from xcode below.  I am sure my build of tensorflow is working because I can run another model.</p>\n<h3>Source code / logs</h3>\n<p>The log comes from running a quantized model.  running a non-quantized version lead to the same problem.</p>\n<pre><code>2017-05-11 18:57:16.053474: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.053595: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.053717: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.053830: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.053889: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.054 tf_ios_makefile_example[10355:45103643] Graph created.\n[libprotobuf INFO google/protobuf/io/coded_stream.cc:610] Reading dangerously large protocol message.  If the message turns out to be larger than 2147483647 bytes, parsing will be halted for security reasons.  To increase the limit (or to disable these warnings), see CodedInputStream::SetTotalBytesLimit() in google/protobuf/io/coded_stream.h.\n[libprotobuf WARNING google/protobuf/io/coded_stream.cc:81] The total number of bytes read was 45491214\n2017-05-11 18:57:16.094 tf_ios_makefile_example[10355:45103643] Creating session.\n2017-05-11 18:57:17.110386: F tensorflow/core/framework/tensor.cc:487] Check failed: dtype() == expected_dtype (9 vs. 4)\n</code></pre>\n<p>Thanks in advance.</p>", "body_text": "System information\n\niOS emulator\nTensorFlow version v1.1.0rc2\ncompiler flag: -O3, -D__ANDROID_TYPES_SLIM__ replaced by -D__ANDROID_TYPES_FULL__ inside tensorflow/contrib/makefile/Makefile in order to fix a issue of missing kernel\nmodification made: tensorflow/core/kernels/cwise_op_floor_mod.cc added to tensorflow/contrib/makefile/tf_op_files.txt b/tensorflow/contrib/makefile/tf_op_files.txt in order to fix another issue of missing kernel\n\nDescribe the problem\nI am trying to run the deeplab image segmentation on iOS.  I have freezed the model, which can then be run on a python shell.  But when I put it on to iOS, it crashes.  Please see the log from xcode below.  I am sure my build of tensorflow is working because I can run another model.\nSource code / logs\nThe log comes from running a quantized model.  running a non-quantized version lead to the same problem.\n2017-05-11 18:57:16.053474: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.053595: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.053717: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.053830: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.053889: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n2017-05-11 18:57:16.054 tf_ios_makefile_example[10355:45103643] Graph created.\n[libprotobuf INFO google/protobuf/io/coded_stream.cc:610] Reading dangerously large protocol message.  If the message turns out to be larger than 2147483647 bytes, parsing will be halted for security reasons.  To increase the limit (or to disable these warnings), see CodedInputStream::SetTotalBytesLimit() in google/protobuf/io/coded_stream.h.\n[libprotobuf WARNING google/protobuf/io/coded_stream.cc:81] The total number of bytes read was 45491214\n2017-05-11 18:57:16.094 tf_ios_makefile_example[10355:45103643] Creating session.\n2017-05-11 18:57:17.110386: F tensorflow/core/framework/tensor.cc:487] Check failed: dtype() == expected_dtype (9 vs. 4)\n\nThanks in advance.", "body": "### System information\r\n- **iOS emulator**\r\n- **TensorFlow version v1.1.0rc2**\r\n- compiler flag: -O3, `-D__ANDROID_TYPES_SLIM__` replaced by `-D__ANDROID_TYPES_FULL__` inside `tensorflow/contrib/makefile/Makefile` in order to fix a issue of missing kernel\r\n- modification made: `tensorflow/core/kernels/cwise_op_floor_mod.cc` added to `tensorflow/contrib/makefile/tf_op_files.txt b/tensorflow/contrib/makefile/tf_op_files.txt` in order to fix another issue of missing kernel\r\n\r\n### Describe the problem\r\n\r\nI am trying to run the [deeplab image segmentation](https://github.com/DrSleep/tensorflow-deeplab-resnet) on iOS.  I have freezed the model, which can then be run on a python shell.  But when I put it on to iOS, it crashes.  Please see the log from xcode below.  I am sure my build of tensorflow is working because I can run another model.\r\n\r\n### Source code / logs\r\n\r\nThe log comes from running a quantized model.  running a non-quantized version lead to the same problem.\r\n```\r\n2017-05-11 18:57:16.053474: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-11 18:57:16.053595: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-11 18:57:16.053717: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-11 18:57:16.053830: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-11 18:57:16.053889: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-05-11 18:57:16.054 tf_ios_makefile_example[10355:45103643] Graph created.\r\n[libprotobuf INFO google/protobuf/io/coded_stream.cc:610] Reading dangerously large protocol message.  If the message turns out to be larger than 2147483647 bytes, parsing will be halted for security reasons.  To increase the limit (or to disable these warnings), see CodedInputStream::SetTotalBytesLimit() in google/protobuf/io/coded_stream.h.\r\n[libprotobuf WARNING google/protobuf/io/coded_stream.cc:81] The total number of bytes read was 45491214\r\n2017-05-11 18:57:16.094 tf_ios_makefile_example[10355:45103643] Creating session.\r\n2017-05-11 18:57:17.110386: F tensorflow/core/framework/tensor.cc:487] Check failed: dtype() == expected_dtype (9 vs. 4)\r\n```\r\n\r\nThanks in advance.\r\n"}
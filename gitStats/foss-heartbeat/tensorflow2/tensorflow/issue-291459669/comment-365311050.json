{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/365311050", "html_url": "https://github.com/tensorflow/tensorflow/pull/16391#issuecomment-365311050", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16391", "id": 365311050, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTMxMTA1MA==", "user": {"login": "xiejw", "id": 1184671, "node_id": "MDQ6VXNlcjExODQ2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1184671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiejw", "html_url": "https://github.com/xiejw", "followers_url": "https://api.github.com/users/xiejw/followers", "following_url": "https://api.github.com/users/xiejw/following{/other_user}", "gists_url": "https://api.github.com/users/xiejw/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiejw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiejw/subscriptions", "organizations_url": "https://api.github.com/users/xiejw/orgs", "repos_url": "https://api.github.com/users/xiejw/repos", "events_url": "https://api.github.com/users/xiejw/events{/privacy}", "received_events_url": "https://api.github.com/users/xiejw/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-13T15:58:30Z", "updated_at": "2018-02-13T15:58:30Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hi,</p>\n<p>Experiment class is designed to support not only local (single-machine single-process, depending on definition) but also distributed training and evaluation. So, any constructor argument should fit both scenarios. Otherwise, it will confuse users and/or increase maintenance cost.</p>\n<p>ValidationMonitor was in the code already as the original code only uses it to serve the purpose to do evaluation during training. This is an implementation detail, so ValidationMonitor can be replaced by SessionRunHook or SavingListener without affecting API and users.</p>\n<p>However, the parameters, such as early_stopping_metric, added in this PR is only supported in local case. This is a known fact.  It cannot work with distributed case -- which is a known hard problem. This is a major reason.</p>\n<p>If early_stopping_metric, and other early stopping parameters can be added to support both local and distributed case, that will be great! The change could be huge as it needs to adjust all the code in train_and_evaluate(), train(), continuer_evaluate() and other places, as one proper definition of early stopping is, once the condition is met, all the nodes in the cluster should stop at more or less the same time. (It may have other definition also).</p>\n<p>If user only needs this for local case, launching a python script to perform train and evaluate in one process, a workaround was mentioned.</p>\n<p>Hope this helps.</p>", "body_text": "Hi,\nExperiment class is designed to support not only local (single-machine single-process, depending on definition) but also distributed training and evaluation. So, any constructor argument should fit both scenarios. Otherwise, it will confuse users and/or increase maintenance cost.\nValidationMonitor was in the code already as the original code only uses it to serve the purpose to do evaluation during training. This is an implementation detail, so ValidationMonitor can be replaced by SessionRunHook or SavingListener without affecting API and users.\nHowever, the parameters, such as early_stopping_metric, added in this PR is only supported in local case. This is a known fact.  It cannot work with distributed case -- which is a known hard problem. This is a major reason.\nIf early_stopping_metric, and other early stopping parameters can be added to support both local and distributed case, that will be great! The change could be huge as it needs to adjust all the code in train_and_evaluate(), train(), continuer_evaluate() and other places, as one proper definition of early stopping is, once the condition is met, all the nodes in the cluster should stop at more or less the same time. (It may have other definition also).\nIf user only needs this for local case, launching a python script to perform train and evaluate in one process, a workaround was mentioned.\nHope this helps.", "body": "Hi,\r\n\r\nExperiment class is designed to support not only local (single-machine single-process, depending on definition) but also distributed training and evaluation. So, any constructor argument should fit both scenarios. Otherwise, it will confuse users and/or increase maintenance cost. \r\n\r\nValidationMonitor was in the code already as the original code only uses it to serve the purpose to do evaluation during training. This is an implementation detail, so ValidationMonitor can be replaced by SessionRunHook or SavingListener without affecting API and users. \r\n\r\nHowever, the parameters, such as early_stopping_metric, added in this PR is only supported in local case. This is a known fact.  It cannot work with distributed case -- which is a known hard problem. This is a major reason.\r\n\r\nIf early_stopping_metric, and other early stopping parameters can be added to support both local and distributed case, that will be great! The change could be huge as it needs to adjust all the code in train_and_evaluate(), train(), continuer_evaluate() and other places, as one proper definition of early stopping is, once the condition is met, all the nodes in the cluster should stop at more or less the same time. (It may have other definition also). \r\n\r\nIf user only needs this for local case, launching a python script to perform train and evaluate in one process, a workaround was mentioned. \r\n\r\nHope this helps. \r\n\r\n"}
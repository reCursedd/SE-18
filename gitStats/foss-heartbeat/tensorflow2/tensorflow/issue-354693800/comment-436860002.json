{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/436860002", "html_url": "https://github.com/tensorflow/tensorflow/issues/21920#issuecomment-436860002", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21920", "id": 436860002, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjg2MDAwMg==", "user": {"login": "peinbill", "id": 20788033, "node_id": "MDQ6VXNlcjIwNzg4MDMz", "avatar_url": "https://avatars1.githubusercontent.com/u/20788033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peinbill", "html_url": "https://github.com/peinbill", "followers_url": "https://api.github.com/users/peinbill/followers", "following_url": "https://api.github.com/users/peinbill/following{/other_user}", "gists_url": "https://api.github.com/users/peinbill/gists{/gist_id}", "starred_url": "https://api.github.com/users/peinbill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peinbill/subscriptions", "organizations_url": "https://api.github.com/users/peinbill/orgs", "repos_url": "https://api.github.com/users/peinbill/repos", "events_url": "https://api.github.com/users/peinbill/events{/privacy}", "received_events_url": "https://api.github.com/users/peinbill/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-08T03:21:18Z", "updated_at": "2018-11-08T03:21:18Z", "author_association": "NONE", "body_html": "<blockquote>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6018251\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/georgesterpu\">@georgesterpu</a> Thank you for your reply.<br>\nYes,I have done something as your said. About beam search API, the main part in my code as follow :<br>\n<code>inference_decoder= BeamSearchDecoder( cell=self.decoder_cell, embedding=embed_and_input_proj, start_tokens=start_tokens, end_token=end_token, initial_state=self.decoder_initial_state, beam_width=self.beam_width, output_layer=self.decoder_output_projection, )</code><br>\n....<br>\n<code>(self.decoder_outputs_decode,self.final_state,_ ) = (seq2seq.dynamic_decode(decoder=inference_decoder,output_time_major=self.time_major,maximum_iterations=max_decode_step,swap_memory=True,scope=decoder_scope))</code></p>\n<p>I feel very strange, I did not find any problems. This problem bothering me many days. I have trained the model for other tasks, but this problem still existed. There were still repeated sentences in the prediction, and the encounter with eos does not stop. But It stopped when the length is set length.<br>\nAnyway,Thank you very much. you are very kindful. I am very looking forward to your projects to open.</p>\n</blockquote>\n<p>I meet the same problem. How do you solve it?</p>", "body_text": "@georgesterpu Thank you for your reply.\nYes,I have done something as your said. About beam search API, the main part in my code as follow :\ninference_decoder= BeamSearchDecoder( cell=self.decoder_cell, embedding=embed_and_input_proj, start_tokens=start_tokens, end_token=end_token, initial_state=self.decoder_initial_state, beam_width=self.beam_width, output_layer=self.decoder_output_projection, )\n....\n(self.decoder_outputs_decode,self.final_state,_ ) = (seq2seq.dynamic_decode(decoder=inference_decoder,output_time_major=self.time_major,maximum_iterations=max_decode_step,swap_memory=True,scope=decoder_scope))\nI feel very strange, I did not find any problems. This problem bothering me many days. I have trained the model for other tasks, but this problem still existed. There were still repeated sentences in the prediction, and the encounter with eos does not stop. But It stopped when the length is set length.\nAnyway,Thank you very much. you are very kindful. I am very looking forward to your projects to open.\n\nI meet the same problem. How do you solve it?", "body": "> \r\n> \r\n> @georgesterpu Thank you for your reply.\r\n> Yes,I have done something as your said. About beam search API, the main part in my code as follow :\r\n> `inference_decoder= BeamSearchDecoder( cell=self.decoder_cell, embedding=embed_and_input_proj, start_tokens=start_tokens, end_token=end_token, initial_state=self.decoder_initial_state, beam_width=self.beam_width, output_layer=self.decoder_output_projection, )`\r\n> ....\r\n> `(self.decoder_outputs_decode,self.final_state,_ ) = (seq2seq.dynamic_decode(decoder=inference_decoder,output_time_major=self.time_major,maximum_iterations=max_decode_step,swap_memory=True,scope=decoder_scope))`\r\n> \r\n> I feel very strange, I did not find any problems. This problem bothering me many days. I have trained the model for other tasks, but this problem still existed. There were still repeated sentences in the prediction, and the encounter with eos does not stop. But It stopped when the length is set length.\r\n> Anyway,Thank you very much. you are very kindful. I am very looking forward to your projects to open.\r\n\r\nI meet the same problem. How do you solve it?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6115", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6115/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6115/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6115/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6115", "id": 193702760, "node_id": "MDU6SXNzdWUxOTM3MDI3NjA=", "number": 6115, "title": "[Windows] How can we call builtin ops function in Windows like _set_ops.dense_to_dense_set_operation?", "user": {"login": "e-budur", "id": 2246791, "node_id": "MDQ6VXNlcjIyNDY3OTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/2246791?v=4", "gravatar_id": "", "url": "https://api.github.com/users/e-budur", "html_url": "https://github.com/e-budur", "followers_url": "https://api.github.com/users/e-budur/followers", "following_url": "https://api.github.com/users/e-budur/following{/other_user}", "gists_url": "https://api.github.com/users/e-budur/gists{/gist_id}", "starred_url": "https://api.github.com/users/e-budur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/e-budur/subscriptions", "organizations_url": "https://api.github.com/users/e-budur/orgs", "repos_url": "https://api.github.com/users/e-budur/repos", "events_url": "https://api.github.com/users/e-budur/events{/privacy}", "received_events_url": "https://api.github.com/users/e-budur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-12-06T07:36:53Z", "updated_at": "2016-12-06T23:23:58Z", "closed_at": "2016-12-06T23:23:58Z", "author_association": "NONE", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p><a href=\"http://stackoverflow.com/questions/40947669/attributeerror-nonetype-object-has-no-attribute-dense-to-dense-set-operation\" rel=\"nofollow\">http://stackoverflow.com/questions/40947669/attributeerror-nonetype-object-has-no-attribute-dense-to-dense-set-operation</a></p>\n<p>Operating System: Windows</p>\n<p>Installed version of CUDA and cuDNN:</p>\n<pre><code>Directory of C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\n\n12/02/2016  02:50 PM    &lt;DIR&gt;          .\n12/02/2016  02:50 PM    &lt;DIR&gt;          ..\n09/11/2016  10:26 AM            93,804 cublas.lib\n09/11/2016  10:19 AM        62,239,924 cublas_device.lib\n09/05/2016  02:51 PM            87,834 cuda.lib\n09/05/2016  02:51 PM           681,064 cudadevrt.lib\n09/05/2016  02:51 PM            64,550 cudart.lib\n09/05/2016  02:51 PM         2,318,456 cudart_static.lib\n07/26/2016  11:31 PM            37,452 cudnn.lib\n09/05/2016  02:51 PM            17,042 cufft.lib\n09/05/2016  02:51 PM            15,838 cufftw.lib\n09/05/2016  02:51 PM             8,534 curand.lib\n09/05/2016  02:51 PM           115,226 cusolver.lib\n09/05/2016  02:51 PM           175,020 cusparse.lib\n09/05/2016  02:51 PM             4,746 nppc.lib\n09/05/2016  02:51 PM         1,312,172 nppi.lib\n09/05/2016  02:51 PM           202,098 nppial.lib\n09/05/2016  02:51 PM           102,322 nppicc.lib\n09/05/2016  02:51 PM             9,324 nppicom.lib\n09/05/2016  02:51 PM           176,272 nppidei.lib\n09/05/2016  02:51 PM           244,310 nppif.lib\n09/05/2016  02:51 PM            73,428 nppig.lib\n09/05/2016  02:51 PM            25,078 nppim.lib\n09/05/2016  02:51 PM           441,650 nppist.lib\n09/05/2016  02:51 PM             8,416 nppisu.lib\n09/05/2016  02:51 PM            55,026 nppitc.lib\n09/05/2016  02:51 PM           214,486 npps.lib\n09/05/2016  02:51 PM            11,250 nvblas.lib\n09/05/2016  02:51 PM             6,814 nvcuvid.lib\n09/05/2016  02:51 PM             8,720 nvgraph.lib\n09/05/2016  02:51 PM            40,096 nvml.lib\n09/05/2016  02:51 PM             3,954 nvrtc.lib\n09/05/2016  02:51 PM            23,076 OpenCL.lib\n             31 File(s)     68,817,982 bytes\n              2 Dir(s)  206,249,398,272 bytes free\n</code></pre>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>\n<p>A link to the pip package you installed:<br>\n<a href=\"https://github.com/tensorflow/tensorflow.git\">https://github.com/tensorflow/tensorflow.git</a></p>\n</li>\n<li>\n<p>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.</p>\n</li>\n</ol>\n<pre><code>(tensorflow) C:\\Users\\e-budur&gt;python -c \"import tensorflow; print(tensorflow.__v\nersion__)\"\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library cublas64_80.dll locally\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library cudnn64_5.dll locally\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library cufft64_80.dll locally\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library nvcuda.dll locally\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library curand64_80.dll locally\n0.12.head\n</code></pre>\n<p>If installed from source, provide</p>\n<ol>\n<li>\n<p>The commit hash (<code>git rev-parse HEAD</code>)<br>\nC:\\tensorflow&gt;git rev-parse HEAD<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/778539ce3cb4a0effabe46e7674c22602cb08dc0/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/778539ce3cb4a0effabe46e7674c22602cb08dc0\"><tt>778539c</tt></a></p>\n</li>\n<li>\n<p>The output of <code>bazel version</code><br>\nI've used MSBuild.</p>\n</li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p><code>true_positives = set_ops.set_intersection(predictions_idx, labels)</code></p>\n<p>I've run udc_train.py by following the preliminary steps give in the repository page <a href=\"https://github.com/dennybritz/chatbot-retrieval\">https://github.com/dennybritz/chatbot-retrieval</a>.  As a result of the execution I got the following exception when the application calls the function tf.contrib.metrics.streaming_sparse_recall_at_k in udc_metrics.py</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>I've rebuilded the source code by following the instruction in the following link hoping that the ops library will be compiled and embedded into the main excutable of tensorflow like '_pywrap_tensorflow.pyd' but no luck.  I kept receiving the same error after successful compilation and deployment of the latest source code (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/778539ce3cb4a0effabe46e7674c22602cb08dc0/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/778539ce3cb4a0effabe46e7674c22602cb08dc0\"><tt>778539c</tt></a>).<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/README.md\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/README.md</a></p>\n<p>I've posted the question on Stackoverflow but I got no answer.<br>\n<a href=\"http://stackoverflow.com/questions/40947669/attributeerror-nonetype-object-has-no-attribute-dense-to-dense-set-operation\" rel=\"nofollow\">http://stackoverflow.com/questions/40947669/attributeerror-nonetype-object-has-no-attribute-dense-to-dense-set-operation</a></p>\n<h3>Logs or other output that would be helpful</h3>\n<p>I've downloaded the sample project Chatbot Retrieval from the following repository<br>\n<a href=\"https://github.com/dennybritz/chatbot-retrieval\">https://github.com/dennybritz/chatbot-retrieval</a></p>\n<p>I've run udc_train.py by following the preliminary steps give in the repository page above.  As a result of the execution I got the following exception when the application calls the function tf.contrib.metrics.streaming_sparse_recall_at_k</p>\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 72, in &lt;module&gt;\n    tf.app.run()\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 68, in main\n    estimator.fit(input_fn=input_fn_train, steps=None, monitors=[eval_monitor])\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 247, in new_func\n    return func(*args, **kwargs)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 364, in fit\n    max_steps=max_steps)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 741, in _train_model\n    max_steps=max_steps)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\graph_actions.py\", line 301, in _monitored_train\n    None)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 473, in run\n    run_metadata=run_metadata)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 628, in run\n    run_metadata=run_metadata)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 595, in run\n    return self._sess.run(*args, **kwargs)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 737, in run\n    run_metadata=run_metadata))\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\monitors.py\", line 1210, in after_run\n    induce_stop = m.step_end(self._last_step, result)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\monitors.py\", line 409, in step_end\n    return self.every_n_step_end(step, output)\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 65, in every_n_step_end\n    steps=None)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 247, in new_func\n    return func(*args, **kwargs)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 436, in evaluate\n    name=name)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 800, in _evaluate_model\n    eval_ops = self._get_eval_ops(features, labels, metrics)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1111, in _get_eval_ops\n    metrics, features, labels, model_fn_ops.predictions))\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 280, in _make_metrics_ops\n    result[name] = metric(predictions, labels_tensor_or_dict)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 1422, in streaming_sparse_recall_at_k\n    weights=weights)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 2102, in _streaming_sparse_true_positive_at_k\n    weights=weights)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 2054, in _sparse_true_positive_at_k\n    tp = set_ops.set_size(set_ops.set_intersection(predictions_idx, labels))\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\set_ops.py\", line 138, in set_intersection\n    return _set_operation(a, b, \"intersection\", validate_indices)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\set_ops.py\", line 113, in _set_operation\n    indices, values, shape = _set_ops.dense_to_dense_set_operation(\nAttributeError: 'NoneType' object has no attribute 'dense_to_dense_set_operation'\n</code></pre>\n<p>The main problem turns out to be loader.load_op_library fails to load .so files in NT system.</p>\n<pre><code>_set_ops = loader.load_op_library(resource_loader.get_path_to_datafile(\"_set_ops.so\"))\n\nindices, values, shape = _set_ops.dense_to_dense_set_operation(\n        a, b, set_operation, validate_indices) #_set_ops turns out to be None\n</code></pre>\n<pre><code>def load_op_library(path):\n  \"\"\"Loads a contrib op library from the given path.\n\n  NOTE(mrry): On Windows, we currently assume that contrib op\n  libraries are statically linked into the main TensorFlow Python\n  extension DLL.\n\n  Args:\n    path: An absolute path to a shared object file.\n\n  Returns:\n    A Python module containing the Python wrappers for Ops defined in the\n    plugin.\n  \"\"\"\n  if os.name != 'nt':\n    path = resource_loader.get_path_to_datafile(path)\n    ret = load_library.load_op_library(path)\n    assert ret, 'Could not load %s' % path\n    return ret\n  else:\n    # NOTE(mrry):\n    return None\n</code></pre>\n<p>The comments belongs to <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a></p>\n<p>Hence the question is : How can we call builtin ops function in Windows like _set_ops.dense_to_dense_set_operation?</p>\n<p>Thanks</p>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nhttp://stackoverflow.com/questions/40947669/attributeerror-nonetype-object-has-no-attribute-dense-to-dense-set-operation\nOperating System: Windows\nInstalled version of CUDA and cuDNN:\nDirectory of C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\n\n12/02/2016  02:50 PM    <DIR>          .\n12/02/2016  02:50 PM    <DIR>          ..\n09/11/2016  10:26 AM            93,804 cublas.lib\n09/11/2016  10:19 AM        62,239,924 cublas_device.lib\n09/05/2016  02:51 PM            87,834 cuda.lib\n09/05/2016  02:51 PM           681,064 cudadevrt.lib\n09/05/2016  02:51 PM            64,550 cudart.lib\n09/05/2016  02:51 PM         2,318,456 cudart_static.lib\n07/26/2016  11:31 PM            37,452 cudnn.lib\n09/05/2016  02:51 PM            17,042 cufft.lib\n09/05/2016  02:51 PM            15,838 cufftw.lib\n09/05/2016  02:51 PM             8,534 curand.lib\n09/05/2016  02:51 PM           115,226 cusolver.lib\n09/05/2016  02:51 PM           175,020 cusparse.lib\n09/05/2016  02:51 PM             4,746 nppc.lib\n09/05/2016  02:51 PM         1,312,172 nppi.lib\n09/05/2016  02:51 PM           202,098 nppial.lib\n09/05/2016  02:51 PM           102,322 nppicc.lib\n09/05/2016  02:51 PM             9,324 nppicom.lib\n09/05/2016  02:51 PM           176,272 nppidei.lib\n09/05/2016  02:51 PM           244,310 nppif.lib\n09/05/2016  02:51 PM            73,428 nppig.lib\n09/05/2016  02:51 PM            25,078 nppim.lib\n09/05/2016  02:51 PM           441,650 nppist.lib\n09/05/2016  02:51 PM             8,416 nppisu.lib\n09/05/2016  02:51 PM            55,026 nppitc.lib\n09/05/2016  02:51 PM           214,486 npps.lib\n09/05/2016  02:51 PM            11,250 nvblas.lib\n09/05/2016  02:51 PM             6,814 nvcuvid.lib\n09/05/2016  02:51 PM             8,720 nvgraph.lib\n09/05/2016  02:51 PM            40,096 nvml.lib\n09/05/2016  02:51 PM             3,954 nvrtc.lib\n09/05/2016  02:51 PM            23,076 OpenCL.lib\n             31 File(s)     68,817,982 bytes\n              2 Dir(s)  206,249,398,272 bytes free\n\nIf installed from binary pip package, provide:\n\n\nA link to the pip package you installed:\nhttps://github.com/tensorflow/tensorflow.git\n\n\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\n\n\n(tensorflow) C:\\Users\\e-budur>python -c \"import tensorflow; print(tensorflow.__v\nersion__)\"\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library cublas64_80.dll locally\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library cudnn64_5.dll locally\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library cufft64_80.dll locally\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library nvcuda.dll locally\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\nd CUDA library curand64_80.dll locally\n0.12.head\n\nIf installed from source, provide\n\n\nThe commit hash (git rev-parse HEAD)\nC:\\tensorflow>git rev-parse HEAD\n778539c\n\n\nThe output of bazel version\nI've used MSBuild.\n\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\ntrue_positives = set_ops.set_intersection(predictions_idx, labels)\nI've run udc_train.py by following the preliminary steps give in the repository page https://github.com/dennybritz/chatbot-retrieval.  As a result of the execution I got the following exception when the application calls the function tf.contrib.metrics.streaming_sparse_recall_at_k in udc_metrics.py\nWhat other attempted solutions have you tried?\nI've rebuilded the source code by following the instruction in the following link hoping that the ops library will be compiled and embedded into the main excutable of tensorflow like '_pywrap_tensorflow.pyd' but no luck.  I kept receiving the same error after successful compilation and deployment of the latest source code (778539c).\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/README.md\nI've posted the question on Stackoverflow but I got no answer.\nhttp://stackoverflow.com/questions/40947669/attributeerror-nonetype-object-has-no-attribute-dense-to-dense-set-operation\nLogs or other output that would be helpful\nI've downloaded the sample project Chatbot Retrieval from the following repository\nhttps://github.com/dennybritz/chatbot-retrieval\nI've run udc_train.py by following the preliminary steps give in the repository page above.  As a result of the execution I got the following exception when the application calls the function tf.contrib.metrics.streaming_sparse_recall_at_k\nTraceback (most recent call last):\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 72, in <module>\n    tf.app.run()\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 68, in main\n    estimator.fit(input_fn=input_fn_train, steps=None, monitors=[eval_monitor])\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 247, in new_func\n    return func(*args, **kwargs)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 364, in fit\n    max_steps=max_steps)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 741, in _train_model\n    max_steps=max_steps)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\graph_actions.py\", line 301, in _monitored_train\n    None)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 473, in run\n    run_metadata=run_metadata)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 628, in run\n    run_metadata=run_metadata)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 595, in run\n    return self._sess.run(*args, **kwargs)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 737, in run\n    run_metadata=run_metadata))\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\monitors.py\", line 1210, in after_run\n    induce_stop = m.step_end(self._last_step, result)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\monitors.py\", line 409, in step_end\n    return self.every_n_step_end(step, output)\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 65, in every_n_step_end\n    steps=None)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 247, in new_func\n    return func(*args, **kwargs)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 436, in evaluate\n    name=name)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 800, in _evaluate_model\n    eval_ops = self._get_eval_ops(features, labels, metrics)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1111, in _get_eval_ops\n    metrics, features, labels, model_fn_ops.predictions))\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 280, in _make_metrics_ops\n    result[name] = metric(predictions, labels_tensor_or_dict)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 1422, in streaming_sparse_recall_at_k\n    weights=weights)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 2102, in _streaming_sparse_true_positive_at_k\n    weights=weights)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 2054, in _sparse_true_positive_at_k\n    tp = set_ops.set_size(set_ops.set_intersection(predictions_idx, labels))\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\set_ops.py\", line 138, in set_intersection\n    return _set_operation(a, b, \"intersection\", validate_indices)\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\set_ops.py\", line 113, in _set_operation\n    indices, values, shape = _set_ops.dense_to_dense_set_operation(\nAttributeError: 'NoneType' object has no attribute 'dense_to_dense_set_operation'\n\nThe main problem turns out to be loader.load_op_library fails to load .so files in NT system.\n_set_ops = loader.load_op_library(resource_loader.get_path_to_datafile(\"_set_ops.so\"))\n\nindices, values, shape = _set_ops.dense_to_dense_set_operation(\n        a, b, set_operation, validate_indices) #_set_ops turns out to be None\n\ndef load_op_library(path):\n  \"\"\"Loads a contrib op library from the given path.\n\n  NOTE(mrry): On Windows, we currently assume that contrib op\n  libraries are statically linked into the main TensorFlow Python\n  extension DLL.\n\n  Args:\n    path: An absolute path to a shared object file.\n\n  Returns:\n    A Python module containing the Python wrappers for Ops defined in the\n    plugin.\n  \"\"\"\n  if os.name != 'nt':\n    path = resource_loader.get_path_to_datafile(path)\n    ret = load_library.load_op_library(path)\n    assert ret, 'Could not load %s' % path\n    return ret\n  else:\n    # NOTE(mrry):\n    return None\n\nThe comments belongs to @mrry\nHence the question is : How can we call builtin ops function in Windows like _set_ops.dense_to_dense_set_operation?\nThanks", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nhttp://stackoverflow.com/questions/40947669/attributeerror-nonetype-object-has-no-attribute-dense-to-dense-set-operation\r\n\r\nOperating System: Windows\r\n\r\nInstalled version of CUDA and cuDNN: \r\n ```\r\nDirectory of C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\lib\\x64\r\n\r\n12/02/2016  02:50 PM    <DIR>          .\r\n12/02/2016  02:50 PM    <DIR>          ..\r\n09/11/2016  10:26 AM            93,804 cublas.lib\r\n09/11/2016  10:19 AM        62,239,924 cublas_device.lib\r\n09/05/2016  02:51 PM            87,834 cuda.lib\r\n09/05/2016  02:51 PM           681,064 cudadevrt.lib\r\n09/05/2016  02:51 PM            64,550 cudart.lib\r\n09/05/2016  02:51 PM         2,318,456 cudart_static.lib\r\n07/26/2016  11:31 PM            37,452 cudnn.lib\r\n09/05/2016  02:51 PM            17,042 cufft.lib\r\n09/05/2016  02:51 PM            15,838 cufftw.lib\r\n09/05/2016  02:51 PM             8,534 curand.lib\r\n09/05/2016  02:51 PM           115,226 cusolver.lib\r\n09/05/2016  02:51 PM           175,020 cusparse.lib\r\n09/05/2016  02:51 PM             4,746 nppc.lib\r\n09/05/2016  02:51 PM         1,312,172 nppi.lib\r\n09/05/2016  02:51 PM           202,098 nppial.lib\r\n09/05/2016  02:51 PM           102,322 nppicc.lib\r\n09/05/2016  02:51 PM             9,324 nppicom.lib\r\n09/05/2016  02:51 PM           176,272 nppidei.lib\r\n09/05/2016  02:51 PM           244,310 nppif.lib\r\n09/05/2016  02:51 PM            73,428 nppig.lib\r\n09/05/2016  02:51 PM            25,078 nppim.lib\r\n09/05/2016  02:51 PM           441,650 nppist.lib\r\n09/05/2016  02:51 PM             8,416 nppisu.lib\r\n09/05/2016  02:51 PM            55,026 nppitc.lib\r\n09/05/2016  02:51 PM           214,486 npps.lib\r\n09/05/2016  02:51 PM            11,250 nvblas.lib\r\n09/05/2016  02:51 PM             6,814 nvcuvid.lib\r\n09/05/2016  02:51 PM             8,720 nvgraph.lib\r\n09/05/2016  02:51 PM            40,096 nvml.lib\r\n09/05/2016  02:51 PM             3,954 nvrtc.lib\r\n09/05/2016  02:51 PM            23,076 OpenCL.lib\r\n              31 File(s)     68,817,982 bytes\r\n               2 Dir(s)  206,249,398,272 bytes free\r\n```\r\n\r\n\r\nIf installed from binary pip package, provide:\r\n\r\n1. A link to the pip package you installed:\r\nhttps://github.com/tensorflow/tensorflow.git\r\n\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\r\n```\r\n(tensorflow) C:\\Users\\e-budur>python -c \"import tensorflow; print(tensorflow.__v\r\nersion__)\"\r\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\r\nd CUDA library cublas64_80.dll locally\r\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\r\nd CUDA library cudnn64_5.dll locally\r\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\r\nd CUDA library cufft64_80.dll locally\r\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\r\nd CUDA library nvcuda.dll locally\r\nI c:\\tensorflow\\tensorflow\\stream_executor\\dso_loader.cc:128] successfully opene\r\nd CUDA library curand64_80.dll locally\r\n0.12.head\r\n```\r\n\r\nIf installed from source, provide \r\n\r\n1. The commit hash (`git rev-parse HEAD`)\r\nC:\\tensorflow>git rev-parse HEAD\r\n778539ce3cb4a0effabe46e7674c22602cb08dc0\r\n\r\n2. The output of `bazel version`\r\nI've used MSBuild.\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n`true_positives = set_ops.set_intersection(predictions_idx, labels)`\r\n\r\nI've run udc_train.py by following the preliminary steps give in the repository page https://github.com/dennybritz/chatbot-retrieval.  As a result of the execution I got the following exception when the application calls the function tf.contrib.metrics.streaming_sparse_recall_at_k in udc_metrics.py\r\n\r\n### What other attempted solutions have you tried?\r\nI've rebuilded the source code by following the instruction in the following link hoping that the ops library will be compiled and embedded into the main excutable of tensorflow like '_pywrap_tensorflow.pyd' but no luck.  I kept receiving the same error after successful compilation and deployment of the latest source code (778539ce3cb4a0effabe46e7674c22602cb08dc0).\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/README.md\r\n\r\nI've posted the question on Stackoverflow but I got no answer.\r\nhttp://stackoverflow.com/questions/40947669/attributeerror-nonetype-object-has-no-attribute-dense-to-dense-set-operation\r\n\r\n\r\n### Logs or other output that would be helpful\r\nI've downloaded the sample project Chatbot Retrieval from the following repository\r\nhttps://github.com/dennybritz/chatbot-retrieval\r\n\r\nI've run udc_train.py by following the preliminary steps give in the repository page above.  As a result of the execution I got the following exception when the application calls the function tf.contrib.metrics.streaming_sparse_recall_at_k\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 72, in <module>\r\n    tf.app.run()\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 68, in main\r\n    estimator.fit(input_fn=input_fn_train, steps=None, monitors=[eval_monitor])\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 247, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 364, in fit\r\n    max_steps=max_steps)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 741, in _train_model\r\n    max_steps=max_steps)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\graph_actions.py\", line 301, in _monitored_train\r\n    None)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 473, in run\r\n    run_metadata=run_metadata)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 628, in run\r\n    run_metadata=run_metadata)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 595, in run\r\n    return self._sess.run(*args, **kwargs)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 737, in run\r\n    run_metadata=run_metadata))\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\monitors.py\", line 1210, in after_run\r\n    induce_stop = m.step_end(self._last_step, result)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\monitors.py\", line 409, in step_end\r\n    return self.every_n_step_end(step, output)\r\n  File \"C:/Users/e-budur/PycharmProjects/chatbot-retrieval/udc_train.py\", line 65, in every_n_step_end\r\n    steps=None)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 247, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 436, in evaluate\r\n    name=name)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 800, in _evaluate_model\r\n    eval_ops = self._get_eval_ops(features, labels, metrics)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1111, in _get_eval_ops\r\n    metrics, features, labels, model_fn_ops.predictions))\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 280, in _make_metrics_ops\r\n    result[name] = metric(predictions, labels_tensor_or_dict)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 1422, in streaming_sparse_recall_at_k\r\n    weights=weights)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 2102, in _streaming_sparse_true_positive_at_k\r\n    weights=weights)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\metric_ops.py\", line 2054, in _sparse_true_positive_at_k\r\n    tp = set_ops.set_size(set_ops.set_intersection(predictions_idx, labels))\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\set_ops.py\", line 138, in set_intersection\r\n    return _set_operation(a, b, \"intersection\", validate_indices)\r\n  File \"C:\\Program Files\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\metrics\\python\\ops\\set_ops.py\", line 113, in _set_operation\r\n    indices, values, shape = _set_ops.dense_to_dense_set_operation(\r\nAttributeError: 'NoneType' object has no attribute 'dense_to_dense_set_operation'\r\n```\r\n\r\nThe main problem turns out to be loader.load_op_library fails to load .so files in NT system.\r\n\r\n```\r\n_set_ops = loader.load_op_library(resource_loader.get_path_to_datafile(\"_set_ops.so\"))\r\n\r\nindices, values, shape = _set_ops.dense_to_dense_set_operation(\r\n        a, b, set_operation, validate_indices) #_set_ops turns out to be None\r\n```\r\n\r\n```\r\ndef load_op_library(path):\r\n  \"\"\"Loads a contrib op library from the given path.\r\n\r\n  NOTE(mrry): On Windows, we currently assume that contrib op\r\n  libraries are statically linked into the main TensorFlow Python\r\n  extension DLL.\r\n\r\n  Args:\r\n    path: An absolute path to a shared object file.\r\n\r\n  Returns:\r\n    A Python module containing the Python wrappers for Ops defined in the\r\n    plugin.\r\n  \"\"\"\r\n  if os.name != 'nt':\r\n    path = resource_loader.get_path_to_datafile(path)\r\n    ret = load_library.load_op_library(path)\r\n    assert ret, 'Could not load %s' % path\r\n    return ret\r\n  else:\r\n    # NOTE(mrry):\r\n    return None\r\n```\r\nThe comments belongs to @mrry \r\n\r\nHence the question is : How can we call builtin ops function in Windows like _set_ops.dense_to_dense_set_operation?\r\n\r\nThanks"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/391161639", "html_url": "https://github.com/tensorflow/tensorflow/issues/19480#issuecomment-391161639", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19480", "id": 391161639, "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTE2MTYzOQ==", "user": {"login": "Noahyt", "id": 23128135, "node_id": "MDQ6VXNlcjIzMTI4MTM1", "avatar_url": "https://avatars1.githubusercontent.com/u/23128135?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Noahyt", "html_url": "https://github.com/Noahyt", "followers_url": "https://api.github.com/users/Noahyt/followers", "following_url": "https://api.github.com/users/Noahyt/following{/other_user}", "gists_url": "https://api.github.com/users/Noahyt/gists{/gist_id}", "starred_url": "https://api.github.com/users/Noahyt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Noahyt/subscriptions", "organizations_url": "https://api.github.com/users/Noahyt/orgs", "repos_url": "https://api.github.com/users/Noahyt/repos", "events_url": "https://api.github.com/users/Noahyt/events{/privacy}", "received_events_url": "https://api.github.com/users/Noahyt/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-22T22:32:21Z", "updated_at": "2018-05-22T22:33:14Z", "author_association": "NONE", "body_html": "<p>I have been able to reproduce this issue with a simple minimal example:</p>\n<pre><code>import tensorflow as tf\n\ntfe = tf.contrib.eager\ntfe.enable_eager_execution(config=tf.ConfigProto(allow_soft_placement=True,\n                                        log_device_placement=True), device_policy=tfe.DEVICE_PLACEMENT_WARN)\n\na = tfe.Variable([2.,3.])\n\nwith tf.device(\"/device:CPU:0\"):\n    print(a)\n    print(a.device)\nwith tf.device(\"/device:GPU:0\"):\n    print(a)\n    print(a.device)\n</code></pre>\n<p>The error is similar to the one quoted above:</p>\n<p>2018-05-22 15:31:14.700544: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA<br>\n2018-05-22 15:31:14.995858: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 0 with properties:<br>\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235<br>\npciBusID: 0000:84:00.0<br>\ntotalMemory: 11.92GiB freeMemory: 11.85GiB<br>\n2018-05-22 15:31:14.996414: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1312] Adding visible gpu devices: 0<br>\n2018-05-22 15:31:15.471576: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 11492 MB memory) -&gt; physical GPU (device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7)<br>\nDevice mapping:<br>\n/job:localhost/replica:0/task:0/device:GPU:0 -&gt; device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7<br>\n2018-05-22 15:31:15.717080: I tensorflow/core/common_runtime/direct_session.cc:297] Device mapping:<br>\n/job:localhost/replica:0/task:0/device:GPU:0 -&gt; device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7</p>\n<p>&lt;tf.Variable 'Variable:0' shape=(2,) dtype=float32, numpy=array([ 2.,  3.], dtype=float32)&gt;</p>\n<p>Traceback (most recent call last):<br>\nFile \"minimal_failing_case.py\", line 16, in <br>\nprint(a)<br>\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/variables.py\", line 239, in <strong>repr</strong><br>\nops.numpy_text(self.read_value(), is_repr=True))<br>\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 677, in read_value<br>\nvalue = self._read_variable_op()<br>\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 655, in _read_variable_op<br>\nself._dtype)<br>\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/gen_resource_variable_ops.py\", line 304, in read_variable_op<br>\nattrs=_attrs, ctx=_ctx, name=name)<br>\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/eager/execute.py\", line 66, in quick_execute<br>\nsix.raise_from(core._status_to_exception(e.code, message), None)<br>\nFile \"\", line 2, in raise_from<br>\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Error while reading resource variable 2 from Container: eager-execution-0/. This could mean that the variable was uninitialized. Invalid argument: Trying to access resource located in device /job:localhost/replica:0/task:0/device:CPU:0 from device /job:localhost/replica:0/task:0/device:GPU:0 [Op:ReadVariableOp]</p>", "body_text": "I have been able to reproduce this issue with a simple minimal example:\nimport tensorflow as tf\n\ntfe = tf.contrib.eager\ntfe.enable_eager_execution(config=tf.ConfigProto(allow_soft_placement=True,\n                                        log_device_placement=True), device_policy=tfe.DEVICE_PLACEMENT_WARN)\n\na = tfe.Variable([2.,3.])\n\nwith tf.device(\"/device:CPU:0\"):\n    print(a)\n    print(a.device)\nwith tf.device(\"/device:GPU:0\"):\n    print(a)\n    print(a.device)\n\nThe error is similar to the one quoted above:\n2018-05-22 15:31:14.700544: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\n2018-05-22 15:31:14.995858: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 0 with properties:\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\npciBusID: 0000:84:00.0\ntotalMemory: 11.92GiB freeMemory: 11.85GiB\n2018-05-22 15:31:14.996414: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1312] Adding visible gpu devices: 0\n2018-05-22 15:31:15.471576: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 11492 MB memory) -> physical GPU (device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7)\nDevice mapping:\n/job:localhost/replica:0/task:0/device:GPU:0 -> device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7\n2018-05-22 15:31:15.717080: I tensorflow/core/common_runtime/direct_session.cc:297] Device mapping:\n/job:localhost/replica:0/task:0/device:GPU:0 -> device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7\n<tf.Variable 'Variable:0' shape=(2,) dtype=float32, numpy=array([ 2.,  3.], dtype=float32)>\nTraceback (most recent call last):\nFile \"minimal_failing_case.py\", line 16, in \nprint(a)\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/variables.py\", line 239, in repr\nops.numpy_text(self.read_value(), is_repr=True))\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 677, in read_value\nvalue = self._read_variable_op()\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 655, in _read_variable_op\nself._dtype)\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/gen_resource_variable_ops.py\", line 304, in read_variable_op\nattrs=_attrs, ctx=_ctx, name=name)\nFile \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/eager/execute.py\", line 66, in quick_execute\nsix.raise_from(core._status_to_exception(e.code, message), None)\nFile \"\", line 2, in raise_from\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Error while reading resource variable 2 from Container: eager-execution-0/. This could mean that the variable was uninitialized. Invalid argument: Trying to access resource located in device /job:localhost/replica:0/task:0/device:CPU:0 from device /job:localhost/replica:0/task:0/device:GPU:0 [Op:ReadVariableOp]", "body": "I have been able to reproduce this issue with a simple minimal example:\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\ntfe = tf.contrib.eager\r\ntfe.enable_eager_execution(config=tf.ConfigProto(allow_soft_placement=True,\r\n                                        log_device_placement=True), device_policy=tfe.DEVICE_PLACEMENT_WARN)\r\n\r\na = tfe.Variable([2.,3.])\r\n\r\nwith tf.device(\"/device:CPU:0\"):\r\n    print(a)\r\n    print(a.device)\r\nwith tf.device(\"/device:GPU:0\"):\r\n    print(a)\r\n    print(a.device)\r\n```\r\n\r\nThe error is similar to the one quoted above:\r\n\r\n2018-05-22 15:31:14.700544: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2018-05-22 15:31:14.995858: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 0 with properties: \r\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\r\npciBusID: 0000:84:00.0\r\ntotalMemory: 11.92GiB freeMemory: 11.85GiB\r\n2018-05-22 15:31:14.996414: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1312] Adding visible gpu devices: 0\r\n2018-05-22 15:31:15.471576: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 11492 MB memory) -> physical GPU (device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7)\r\nDevice mapping:\r\n/job:localhost/replica:0/task:0/device:GPU:0 -> device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7\r\n2018-05-22 15:31:15.717080: I tensorflow/core/common_runtime/direct_session.cc:297] Device mapping:\r\n/job:localhost/replica:0/task:0/device:GPU:0 -> device: 0, name: Tesla K80, pci bus id: 0000:84:00.0, compute capability: 3.7\r\n\r\n<tf.Variable 'Variable:0' shape=(2,) dtype=float32, numpy=array([ 2.,  3.], dtype=float32)>\r\n\r\nTraceback (most recent call last):\r\n  File \"minimal_failing_case.py\", line 16, in <module>\r\n    print(a)\r\n  File \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/variables.py\", line 239, in __repr__\r\n    ops.numpy_text(self.read_value(), is_repr=True))\r\n  File \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 677, in read_value\r\n    value = self._read_variable_op()\r\n  File \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 655, in _read_variable_op\r\n    self._dtype)\r\n  File \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/ops/gen_resource_variable_ops.py\", line 304, in read_variable_op\r\n    attrs=_attrs, ctx=_ctx, name=name)\r\n  File \"/share/software/user/open/py-tensorflow/1.6.0_py36/lib/python3.6/site-packages/tensorflow/python/eager/execute.py\", line 66, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 2, in raise_from\r\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Error while reading resource variable 2 from Container: eager-execution-0/. This could mean that the variable was uninitialized. Invalid argument: Trying to access resource located in device /job:localhost/replica:0/task:0/device:CPU:0 from device /job:localhost/replica:0/task:0/device:GPU:0 [Op:ReadVariableOp]"}
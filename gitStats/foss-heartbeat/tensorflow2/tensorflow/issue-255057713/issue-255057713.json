{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12796", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12796/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12796/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12796/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12796", "id": 255057713, "node_id": "MDU6SXNzdWUyNTUwNTc3MTM=", "number": 12796, "title": "About Cyclic Graph?", "user": {"login": "LynnHo", "id": 16457298, "node_id": "MDQ6VXNlcjE2NDU3Mjk4", "avatar_url": "https://avatars0.githubusercontent.com/u/16457298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LynnHo", "html_url": "https://github.com/LynnHo", "followers_url": "https://api.github.com/users/LynnHo/followers", "following_url": "https://api.github.com/users/LynnHo/following{/other_user}", "gists_url": "https://api.github.com/users/LynnHo/gists{/gist_id}", "starred_url": "https://api.github.com/users/LynnHo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LynnHo/subscriptions", "organizations_url": "https://api.github.com/users/LynnHo/orgs", "repos_url": "https://api.github.com/users/LynnHo/repos", "events_url": "https://api.github.com/users/LynnHo/events{/privacy}", "received_events_url": "https://api.github.com/users/LynnHo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-04T14:27:24Z", "updated_at": "2017-09-12T00:00:57Z", "closed_at": "2017-09-12T00:00:57Z", "author_association": "NONE", "body_html": "<p>Here is the code that confuses me:</p>\n<pre><code>import tensorflow as tf\n\na = tf.Variable(0)\nupdate_a = tf.assign(a, a * 2 + 1)\nupdate_b = tf.assign(a, a * 3 + 3)\n\ns = tf.Session()\ns.run(tf.global_variables_initializer())\n\n_, _, x = s.run([update_b, update_a, a])\nprint(x)\n</code></pre>\n<p>It outputs different results (1, 3, 6 and 7, 7 is the most) at different runs.</p>\n<p>I think it is caused by the cyclic graph. I don't know if tf has the constriction that the above graph is not allowed. But I have another more common example:</p>\n<p>a = convnet_with_bn(img_a)<br>\nb = convnet_with_bn(img_b)</p>\n<p>when the convnet is share, the bn' moving average operations is like the above code.</p>\n<p>Can anybody tells me how I can deal with the above problem?</p>", "body_text": "Here is the code that confuses me:\nimport tensorflow as tf\n\na = tf.Variable(0)\nupdate_a = tf.assign(a, a * 2 + 1)\nupdate_b = tf.assign(a, a * 3 + 3)\n\ns = tf.Session()\ns.run(tf.global_variables_initializer())\n\n_, _, x = s.run([update_b, update_a, a])\nprint(x)\n\nIt outputs different results (1, 3, 6 and 7, 7 is the most) at different runs.\nI think it is caused by the cyclic graph. I don't know if tf has the constriction that the above graph is not allowed. But I have another more common example:\na = convnet_with_bn(img_a)\nb = convnet_with_bn(img_b)\nwhen the convnet is share, the bn' moving average operations is like the above code.\nCan anybody tells me how I can deal with the above problem?", "body": "Here is the code that confuses me:\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\na = tf.Variable(0)\r\nupdate_a = tf.assign(a, a * 2 + 1)\r\nupdate_b = tf.assign(a, a * 3 + 3)\r\n\r\ns = tf.Session()\r\ns.run(tf.global_variables_initializer())\r\n\r\n_, _, x = s.run([update_b, update_a, a])\r\nprint(x)\r\n```\r\n\r\nIt outputs different results (1, 3, 6 and 7, 7 is the most) at different runs.\r\n\r\nI think it is caused by the cyclic graph. I don't know if tf has the constriction that the above graph is not allowed. But I have another more common example:\r\n\r\na = convnet_with_bn(img_a)\r\nb = convnet_with_bn(img_b)\r\n\r\nwhen the convnet is share, the bn' moving average operations is like the above code.\r\n\r\nCan anybody tells me how I can deal with the above problem?\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2216", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2216/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2216/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2216/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2216", "id": 152961700, "node_id": "MDU6SXNzdWUxNTI5NjE3MDA=", "number": 2216, "title": "DirectSessionRegistrar not found in libraries", "user": {"login": "InsightDev", "id": 18297757, "node_id": "MDQ6VXNlcjE4Mjk3NzU3", "avatar_url": "https://avatars0.githubusercontent.com/u/18297757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/InsightDev", "html_url": "https://github.com/InsightDev", "followers_url": "https://api.github.com/users/InsightDev/followers", "following_url": "https://api.github.com/users/InsightDev/following{/other_user}", "gists_url": "https://api.github.com/users/InsightDev/gists{/gist_id}", "starred_url": "https://api.github.com/users/InsightDev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/InsightDev/subscriptions", "organizations_url": "https://api.github.com/users/InsightDev/orgs", "repos_url": "https://api.github.com/users/InsightDev/repos", "events_url": "https://api.github.com/users/InsightDev/events{/privacy}", "received_events_url": "https://api.github.com/users/InsightDev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-05-04T08:52:23Z", "updated_at": "2016-05-06T01:43:47Z", "closed_at": "2016-05-06T01:43:47Z", "author_association": "NONE", "body_html": "<p>tensorflow branch r0.7    android-ndk-r10e    bazel-0.2.1</p>\n<p>I build the android:tensorflow_demo with the command below:</p>\n<p>=&gt; bazel build //tensorflow/examples/android:tensorflow_demo --verbose_failures</p>\n<p>The build is successful, and it generate some files:</p>\n<p>=&gt; ??????????????.apk<br>\n=&gt; tensorflow_demo.so<br>\n=&gt; libandroid_tensorflow_lib.a<br>\n=&gt; libre2.a and so on</p>\n<p>I want to use Windows Android SDK/NDK to develop Android APP with these static libraries.</p>\n<p>When I initialize the tensorflow session, it prompt that direct session not found.</p>\n<p>Then I browse the code tensorflow\\core\\common_runtime\\direct_session.cc.<br>\nAt the tail, I find:</p>\n<p>\"\"\"<br>\nclass DirectSessionFactory : public SessionFactory {<br>\npublic:<br>\nDirectSessionFactory() {}</p>\n<p>Session* NewSession(const SessionOptions&amp; options) override {<br>\nstd::vector&lt;Device*&gt; devices;<br>\nDeviceFactory::AddDevices(options, \"/job:localhost/replica:0/task:0\",<br>\n&amp;devices);<br>\nreturn new DirectSession(options, new DeviceMgr(devices));<br>\n}<br>\n};</p>\n<p>class DirectSessionRegistrar {<br>\npublic:<br>\nDirectSessionRegistrar() {<br>\nSessionFactory::Register(\"DIRECT_SESSION\", new DirectSessionFactory());<br>\n}<br>\n};<br>\nstatic DirectSessionRegistrar registrar;<br>\n\"\"\"</p>\n<p>nm libandroid_tensorflow_lib.a | grep \"???\"<br>\nnm direct_session.o | grep \"???\"</p>\n<p>I can grep DirectSessionFactory from libandroid_tensorflow_lib.a/direct_session.o, but not DirectSessionRegistrar.</p>\n<p>It seems that libandroid_tensorflow_lib.a/direct_session.o does not contain DirectSessionRegistrar.</p>\n<p>What can i do?</p>", "body_text": "tensorflow branch r0.7    android-ndk-r10e    bazel-0.2.1\nI build the android:tensorflow_demo with the command below:\n=> bazel build //tensorflow/examples/android:tensorflow_demo --verbose_failures\nThe build is successful, and it generate some files:\n=> ??????????????.apk\n=> tensorflow_demo.so\n=> libandroid_tensorflow_lib.a\n=> libre2.a and so on\nI want to use Windows Android SDK/NDK to develop Android APP with these static libraries.\nWhen I initialize the tensorflow session, it prompt that direct session not found.\nThen I browse the code tensorflow\\core\\common_runtime\\direct_session.cc.\nAt the tail, I find:\n\"\"\"\nclass DirectSessionFactory : public SessionFactory {\npublic:\nDirectSessionFactory() {}\nSession* NewSession(const SessionOptions& options) override {\nstd::vector<Device*> devices;\nDeviceFactory::AddDevices(options, \"/job:localhost/replica:0/task:0\",\n&devices);\nreturn new DirectSession(options, new DeviceMgr(devices));\n}\n};\nclass DirectSessionRegistrar {\npublic:\nDirectSessionRegistrar() {\nSessionFactory::Register(\"DIRECT_SESSION\", new DirectSessionFactory());\n}\n};\nstatic DirectSessionRegistrar registrar;\n\"\"\"\nnm libandroid_tensorflow_lib.a | grep \"???\"\nnm direct_session.o | grep \"???\"\nI can grep DirectSessionFactory from libandroid_tensorflow_lib.a/direct_session.o, but not DirectSessionRegistrar.\nIt seems that libandroid_tensorflow_lib.a/direct_session.o does not contain DirectSessionRegistrar.\nWhat can i do?", "body": "tensorflow branch r0.7    android-ndk-r10e    bazel-0.2.1\n\nI build the android:tensorflow_demo with the command below:\n\n=> bazel build //tensorflow/examples/android:tensorflow_demo --verbose_failures\n\nThe build is successful, and it generate some files:\n\n=> ??????????????.apk\n=> tensorflow_demo.so\n=> libandroid_tensorflow_lib.a\n=> libre2.a and so on\n\nI want to use Windows Android SDK/NDK to develop Android APP with these static libraries.\n\nWhen I initialize the tensorflow session, it prompt that direct session not found.\n\nThen I browse the code tensorflow\\core\\common_runtime\\direct_session.cc.\nAt the tail, I find:\n\n\"\"\"\nclass DirectSessionFactory : public SessionFactory {\n public:\n  DirectSessionFactory() {}\n\n  Session\\* NewSession(const SessionOptions& options) override {\n    std::vector<Device*> devices;\n    DeviceFactory::AddDevices(options, \"/job:localhost/replica:0/task:0\",\n                              &devices);\n    return new DirectSession(options, new DeviceMgr(devices));\n  }\n};\n\nclass DirectSessionRegistrar {\n public:\n  DirectSessionRegistrar() {\n    SessionFactory::Register(\"DIRECT_SESSION\", new DirectSessionFactory());\n  }\n};\nstatic DirectSessionRegistrar registrar;\n\"\"\"\n\nnm libandroid_tensorflow_lib.a | grep \"???\"\nnm direct_session.o | grep \"???\"\n\nI can grep DirectSessionFactory from libandroid_tensorflow_lib.a/direct_session.o, but not DirectSessionRegistrar.\n\nIt seems that libandroid_tensorflow_lib.a/direct_session.o does not contain DirectSessionRegistrar.\n\nWhat can i do?\n"}
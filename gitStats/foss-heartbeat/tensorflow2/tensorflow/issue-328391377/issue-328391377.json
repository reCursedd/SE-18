{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19683", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19683/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19683/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19683/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19683", "id": 328391377, "node_id": "MDU6SXNzdWUzMjgzOTEzNzc=", "number": 19683, "title": "Transform_Graph feed value for  bool placeholder", "user": {"login": "JiahaoYao", "id": 20907377, "node_id": "MDQ6VXNlcjIwOTA3Mzc3", "avatar_url": "https://avatars1.githubusercontent.com/u/20907377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JiahaoYao", "html_url": "https://github.com/JiahaoYao", "followers_url": "https://api.github.com/users/JiahaoYao/followers", "following_url": "https://api.github.com/users/JiahaoYao/following{/other_user}", "gists_url": "https://api.github.com/users/JiahaoYao/gists{/gist_id}", "starred_url": "https://api.github.com/users/JiahaoYao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JiahaoYao/subscriptions", "organizations_url": "https://api.github.com/users/JiahaoYao/orgs", "repos_url": "https://api.github.com/users/JiahaoYao/repos", "events_url": "https://api.github.com/users/JiahaoYao/events{/privacy}", "received_events_url": "https://api.github.com/users/JiahaoYao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jart", "id": 49262, "node_id": "MDQ6VXNlcjQ5MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/49262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jart", "html_url": "https://github.com/jart", "followers_url": "https://api.github.com/users/jart/followers", "following_url": "https://api.github.com/users/jart/following{/other_user}", "gists_url": "https://api.github.com/users/jart/gists{/gist_id}", "starred_url": "https://api.github.com/users/jart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jart/subscriptions", "organizations_url": "https://api.github.com/users/jart/orgs", "repos_url": "https://api.github.com/users/jart/repos", "events_url": "https://api.github.com/users/jart/events{/privacy}", "received_events_url": "https://api.github.com/users/jart/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-06-01T05:59:02Z", "updated_at": "2018-08-30T07:57:50Z", "closed_at": "2018-07-12T22:51:56Z", "author_association": "NONE", "body_html": "<h3>System Information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow):</strong> No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04):</strong> MacOS 10.13.3</li>\n<li><strong>TensorFlow installed from (source or binary):</strong> source</li>\n<li><strong>TensorFlow version (use command below):</strong> r1.8</li>\n<li><strong>Python version:</strong> 2.7</li>\n<li><strong>Bazel version (if compiling from source):</strong> 0.13</li>\n<li><strong>GCC/Compiler version (if compiling from source):</strong> Apple LLVM version 9.1.0 (clang-902.0.39.1)</li>\n<li><strong>CUDA/cuDNN version:</strong> version 8.0</li>\n<li><strong>GPU model and memory:</strong> No</li>\n<li><strong>Exact command to reproduce:</strong> <code>bazel build tensorflow/tools/graph_transforms:transform_graph</code></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Fold the batchnorm of <a href=\"https://github.com/davidsandberg/facenet#Pre-trained\">Facenet</a>.</p>\n<h3>Source Code/ Logs</h3>\n<div class=\"highlight highlight-source-shell\"><pre>bazel-bin/tensorflow/tools/graph_transforms/transform_graph \n--in_graph=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Users/kit/Downloads/20180408-1029002/20180408-102900.pb<span class=\"pl-pds\">\"</span></span>\n --out_graph=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>../optimize_graph.pb<span class=\"pl-pds\">\"</span></span> \n--inputs=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>input<span class=\"pl-pds\">\"</span></span> \n--outputs=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>InceptionResnetV1/Logits/Flatten/flatten/Reshape<span class=\"pl-pds\">\"</span></span>\n --transforms=<span class=\"pl-s\"><span class=\"pl-pds\">'</span></span>\n<span class=\"pl-s\">  strip_unused_nodes(type=float, shape=\"1,299,299,3\")</span>\n<span class=\"pl-s\">  remove_nodes(op=Identity, op=CheckNumerics)</span>\n<span class=\"pl-s\">  fold_constants(ignore_errors=true)</span>\n<span class=\"pl-s\">  fold_batch_norms</span>\n<span class=\"pl-s\">  fold_old_batch_norms<span class=\"pl-pds\">'</span></span></pre></div>\n<h3>Error:</h3>\n<div class=\"highlight highlight-source-shell\"><pre>2018-06-01 12:51:11.118630: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying strip_unused_nodes\n2018-06-01 12:51:11.344986: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying remove_nodes\n2018-06-01 12:52:04.712395: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_constants\n2018-06-01 12:52:05.068919: E tensorflow/tools/graph_transforms/transform_graph.cc:279] fold_constants: Ignoring error You must feed a value <span class=\"pl-k\">for</span> placeholder tensor <span class=\"pl-s\"><span class=\"pl-pds\">'</span>phase_train<span class=\"pl-pds\">'</span></span> with dtype bool\n\t [[Node: phase_train <span class=\"pl-k\">=</span> Placeholder[dtype<span class=\"pl-k\">=</span>DT_BOOL, shape<span class=\"pl-k\">=&lt;</span>unknown<span class=\"pl-k\">&gt;</span>]()]]\n2018-06-01 12:52:05.201658: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_batch_norms\n2018-06-01 12:52:05.509836: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_old_batch_norms</pre></div>\n<p>I use the tensorboard to see the graph and I <code>phase_train</code> is the input to every <code>slim.batchnorm</code>.<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/20907377/40823628-9adb611c-65a3-11e8-8b0a-1f6414718460.png\"><img src=\"https://user-images.githubusercontent.com/20907377/40823628-9adb611c-65a3-11e8-8b0a-1f6414718460.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>\n<p>My Question is how can I feed the value for this bool placeholder in bazel.</p>", "body_text": "System Information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.13.3\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): r1.8\nPython version: 2.7\nBazel version (if compiling from source): 0.13\nGCC/Compiler version (if compiling from source): Apple LLVM version 9.1.0 (clang-902.0.39.1)\nCUDA/cuDNN version: version 8.0\nGPU model and memory: No\nExact command to reproduce: bazel build tensorflow/tools/graph_transforms:transform_graph\n\nDescribe the problem\nFold the batchnorm of Facenet.\nSource Code/ Logs\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \n--in_graph=\"/Users/kit/Downloads/20180408-1029002/20180408-102900.pb\"\n --out_graph=\"../optimize_graph.pb\" \n--inputs=\"input\" \n--outputs=\"InceptionResnetV1/Logits/Flatten/flatten/Reshape\"\n --transforms='\n  strip_unused_nodes(type=float, shape=\"1,299,299,3\")\n  remove_nodes(op=Identity, op=CheckNumerics)\n  fold_constants(ignore_errors=true)\n  fold_batch_norms\n  fold_old_batch_norms'\nError:\n2018-06-01 12:51:11.118630: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying strip_unused_nodes\n2018-06-01 12:51:11.344986: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying remove_nodes\n2018-06-01 12:52:04.712395: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_constants\n2018-06-01 12:52:05.068919: E tensorflow/tools/graph_transforms/transform_graph.cc:279] fold_constants: Ignoring error You must feed a value for placeholder tensor 'phase_train' with dtype bool\n\t [[Node: phase_train = Placeholder[dtype=DT_BOOL, shape=<unknown>]()]]\n2018-06-01 12:52:05.201658: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_batch_norms\n2018-06-01 12:52:05.509836: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_old_batch_norms\nI use the tensorboard to see the graph and I phase_train is the input to every slim.batchnorm.\n\nMy Question is how can I feed the value for this bool placeholder in bazel.", "body": "### System Information\r\n\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow):** No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04):** MacOS 10.13.3\r\n- **TensorFlow installed from (source or binary):** source\r\n- **TensorFlow version (use command below):** r1.8\r\n- **Python version:** 2.7\r\n- **Bazel version (if compiling from source):** 0.13\r\n- **GCC/Compiler version (if compiling from source):** Apple LLVM version 9.1.0 (clang-902.0.39.1)\r\n- **CUDA/cuDNN version:** version 8.0\r\n- **GPU model and memory:** No\r\n- **Exact command to reproduce:** `bazel build tensorflow/tools/graph_transforms:transform_graph`\r\n\r\n\r\n### Describe the problem\r\nFold the batchnorm of [Facenet](https://github.com/davidsandberg/facenet#Pre-trained).\r\n\r\n### Source Code/ Logs\r\n```bash\r\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \r\n--in_graph=\"/Users/kit/Downloads/20180408-1029002/20180408-102900.pb\"\r\n --out_graph=\"../optimize_graph.pb\" \r\n--inputs=\"input\" \r\n--outputs=\"InceptionResnetV1/Logits/Flatten/flatten/Reshape\"\r\n --transforms='\r\n  strip_unused_nodes(type=float, shape=\"1,299,299,3\")\r\n  remove_nodes(op=Identity, op=CheckNumerics)\r\n  fold_constants(ignore_errors=true)\r\n  fold_batch_norms\r\n  fold_old_batch_norms'\r\n```\r\n### Error:\r\n```bash\r\n2018-06-01 12:51:11.118630: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying strip_unused_nodes\r\n2018-06-01 12:51:11.344986: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying remove_nodes\r\n2018-06-01 12:52:04.712395: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_constants\r\n2018-06-01 12:52:05.068919: E tensorflow/tools/graph_transforms/transform_graph.cc:279] fold_constants: Ignoring error You must feed a value for placeholder tensor 'phase_train' with dtype bool\r\n\t [[Node: phase_train = Placeholder[dtype=DT_BOOL, shape=<unknown>]()]]\r\n2018-06-01 12:52:05.201658: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_batch_norms\r\n2018-06-01 12:52:05.509836: I tensorflow/tools/graph_transforms/transform_graph.cc:264] Applying fold_old_batch_norms\r\n```\r\nI use the tensorboard to see the graph and I `phase_train` is the input to every `slim.batchnorm`.\r\n![image](https://user-images.githubusercontent.com/20907377/40823628-9adb611c-65a3-11e8-8b0a-1f6414718460.png)\r\n\r\nMy Question is how can I feed the value for this bool placeholder in bazel."}
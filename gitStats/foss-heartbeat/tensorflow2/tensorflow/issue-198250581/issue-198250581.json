{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6586", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6586/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6586/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6586/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6586", "id": 198250581, "node_id": "MDU6SXNzdWUxOTgyNTA1ODE=", "number": 6586, "title": "Crash in  Jupyter Notebook with conv2d - stream->parent()->GetConvolveAlgorithms(&algorithms)", "user": {"login": "danbergeland", "id": 7866171, "node_id": "MDQ6VXNlcjc4NjYxNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/7866171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danbergeland", "html_url": "https://github.com/danbergeland", "followers_url": "https://api.github.com/users/danbergeland/followers", "following_url": "https://api.github.com/users/danbergeland/following{/other_user}", "gists_url": "https://api.github.com/users/danbergeland/gists{/gist_id}", "starred_url": "https://api.github.com/users/danbergeland/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danbergeland/subscriptions", "organizations_url": "https://api.github.com/users/danbergeland/orgs", "repos_url": "https://api.github.com/users/danbergeland/repos", "events_url": "https://api.github.com/users/danbergeland/events{/privacy}", "received_events_url": "https://api.github.com/users/danbergeland/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mrry", "id": 192142, "node_id": "MDQ6VXNlcjE5MjE0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/192142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrry", "html_url": "https://github.com/mrry", "followers_url": "https://api.github.com/users/mrry/followers", "following_url": "https://api.github.com/users/mrry/following{/other_user}", "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrry/subscriptions", "organizations_url": "https://api.github.com/users/mrry/orgs", "repos_url": "https://api.github.com/users/mrry/repos", "events_url": "https://api.github.com/users/mrry/events{/privacy}", "received_events_url": "https://api.github.com/users/mrry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2016-12-31T23:24:20Z", "updated_at": "2017-03-03T02:28:43Z", "closed_at": "2017-03-03T02:28:43Z", "author_association": "NONE", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>I have googled for the issue on several fronts and found nothing close since the Windows release.</p>\n<h3>Environment info</h3>\n<p>Operating System:<br>\nWindows 7-64bit.  Intel i3-6100 (64-bit), 8 gb DDR4, nVidia GTX 750 ti 2gb,</p>\n<p>nVidia GPU driver: 369.30</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\nCUDA v8.0<br>\ncuDNN 5.1</p>\n<p>jupyter notebook messages when importing tensorflow:<br>\nsuccessfully loaded:<br>\ncublas64_80.dll<br>\ncudnn64_5.dll<br>\ncufft64_80.dll<br>\nnvcuda.dll<br>\ncurand64_80.dll</p>\n<p>Found device 0 with properties:<br>\nname: GeForce GTX 750 Ti<br>\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.1105<br>\npciBusID 0000:01:00.0<br>\nTotal memory: 2.00GiB<br>\nFree memory: 1.65GiB<br>\nDMA:0<br>\n0: Y<br>\nCreating TensorFlow device ...</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>A link to the pip package you installed:<br>\nI used the default: pip install tensorflow as described on their website.</li>\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.<br>\n0.12.0-rc0</li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>I built and tested this jupyter notebook WITHOUT gpu support.  It already builds and runs correctly (as in, have trained and optimized a network).  Now I'm trying to get it to work with gpu to speed it up.</p>\n<p>Here's the step in the notebook that causes the issue.  Prior to this, tensorFlow is imported successfully as tf.  This is the first session it's running.  the 'training_operation' uses conv2d.<br>\n`<br>\n##run Training</p>\n<p>with tf.Session() as sess:<br>\nsess.run(tf.global_variables_initializer())<br>\nnum_examples = len(X_train)</p>\n<pre><code>print(\"Training...\")\nprint()\nfor i in range(EPOCHS):\n    X_train, y_train = shuffle(X_train, y_train)\n    for offset in range(0, num_examples, BATCH_SIZE):\n        end = offset + BATCH_SIZE\n        batch_x, batch_y = X_train[offset:end], y_train[offset:end]\n        sess.run(training_operation, feed_dict={x: batch_x, y: batch_y})\n        \n    validation_accuracy = evaluate(X_validation, y_validation)\n    print(\"EPOCH {} ...\".format(i+1))\n    print(\"Validation Accuracy = {:.3f}\".format(validation_accuracy))\n    print()\n    \nsaver.save(sess, './lenetTrafficSign')\nprint(\"Model saved\")`\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<p>I saw a similar issue in a pre-windows version that suggested it had something to do with memory.<br>\nI tried adding the following before the tensorflow session:<br>\n<code>config = tf.ConfigProto() config.gpu_options.per_process_gpu_memory_fraction = 0.4 with tf.Session() as sess: sess.run(tf.global_variables_initializer())</code></p>\n<p>It did not resolve the issue.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).<br>\nThe error is as follows, when trying to run the session:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/7866171/21579570/f25e4a0c-cf7d-11e6-8136-1f8b681e3dcd.png\"><img src=\"https://cloud.githubusercontent.com/assets/7866171/21579570/f25e4a0c-cf7d-11e6-8136-1f8b681e3dcd.png\" alt=\"image\" style=\"max-width:100%;\"></a></p>\n<p>The plain text at the last three lines are:<br>\ncuda_event.cc:49]Error polling for event status: failed to query event: CUDA_ERROR_LAUNCH_FAILED<br>\ngpu_event_mgr.cc:190] Unexpected Event Status: 1<br>\ncuda_dnn.cc:305] could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR<br>\ncuda_dnn.cc:352] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM<br>\nconv_ops.cc:532] Check failed: stream-&gt;parent()-&gt;GetConvolveAlgorithms(&amp;algorithms)</p>\n<p>A few seconds after the script crashes, the screen goes black and the video driver resets.</p>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nI have googled for the issue on several fronts and found nothing close since the Windows release.\nEnvironment info\nOperating System:\nWindows 7-64bit.  Intel i3-6100 (64-bit), 8 gb DDR4, nVidia GTX 750 ti 2gb,\nnVidia GPU driver: 369.30\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nCUDA v8.0\ncuDNN 5.1\njupyter notebook messages when importing tensorflow:\nsuccessfully loaded:\ncublas64_80.dll\ncudnn64_5.dll\ncufft64_80.dll\nnvcuda.dll\ncurand64_80.dll\nFound device 0 with properties:\nname: GeForce GTX 750 Ti\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.1105\npciBusID 0000:01:00.0\nTotal memory: 2.00GiB\nFree memory: 1.65GiB\nDMA:0\n0: Y\nCreating TensorFlow device ...\nIf installed from binary pip package, provide:\n\nA link to the pip package you installed:\nI used the default: pip install tensorflow as described on their website.\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\n0.12.0-rc0\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nI built and tested this jupyter notebook WITHOUT gpu support.  It already builds and runs correctly (as in, have trained and optimized a network).  Now I'm trying to get it to work with gpu to speed it up.\nHere's the step in the notebook that causes the issue.  Prior to this, tensorFlow is imported successfully as tf.  This is the first session it's running.  the 'training_operation' uses conv2d.\n`\n##run Training\nwith tf.Session() as sess:\nsess.run(tf.global_variables_initializer())\nnum_examples = len(X_train)\nprint(\"Training...\")\nprint()\nfor i in range(EPOCHS):\n    X_train, y_train = shuffle(X_train, y_train)\n    for offset in range(0, num_examples, BATCH_SIZE):\n        end = offset + BATCH_SIZE\n        batch_x, batch_y = X_train[offset:end], y_train[offset:end]\n        sess.run(training_operation, feed_dict={x: batch_x, y: batch_y})\n        \n    validation_accuracy = evaluate(X_validation, y_validation)\n    print(\"EPOCH {} ...\".format(i+1))\n    print(\"Validation Accuracy = {:.3f}\".format(validation_accuracy))\n    print()\n    \nsaver.save(sess, './lenetTrafficSign')\nprint(\"Model saved\")`\n\nWhat other attempted solutions have you tried?\nI saw a similar issue in a pre-windows version that suggested it had something to do with memory.\nI tried adding the following before the tensorflow session:\nconfig = tf.ConfigProto() config.gpu_options.per_process_gpu_memory_fraction = 0.4 with tf.Session() as sess: sess.run(tf.global_variables_initializer())\nIt did not resolve the issue.\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).\nThe error is as follows, when trying to run the session:\n\nThe plain text at the last three lines are:\ncuda_event.cc:49]Error polling for event status: failed to query event: CUDA_ERROR_LAUNCH_FAILED\ngpu_event_mgr.cc:190] Unexpected Event Status: 1\ncuda_dnn.cc:305] could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\ncuda_dnn.cc:352] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM\nconv_ops.cc:532] Check failed: stream->parent()->GetConvolveAlgorithms(&algorithms)\nA few seconds after the script crashes, the screen goes black and the video driver resets.", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\nI have googled for the issue on several fronts and found nothing close since the Windows release.\r\n\r\n### Environment info\r\nOperating System:\r\nWindows 7-64bit.  Intel i3-6100 (64-bit), 8 gb DDR4, nVidia GTX 750 ti 2gb, \r\n\r\nnVidia GPU driver: 369.30\r\n\r\nInstalled version of CUDA and cuDNN: \r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\nCUDA v8.0\r\ncuDNN 5.1 \r\n\r\njupyter notebook messages when importing tensorflow:\r\nsuccessfully loaded:\r\ncublas64_80.dll\r\ncudnn64_5.dll\r\ncufft64_80.dll\r\nnvcuda.dll\r\ncurand64_80.dll\r\n\r\nFound device 0 with properties:\r\nname: GeForce GTX 750 Ti\r\nmajor: 5 minor: 0 memoryClockRate (GHz) 1.1105\r\npciBusID 0000:01:00.0\r\nTotal memory: 2.00GiB\r\nFree memory: 1.65GiB\r\nDMA:0\r\n0: Y\r\nCreating TensorFlow device ... \r\n\r\n\r\nIf installed from binary pip package, provide:\r\n\r\n1. A link to the pip package you installed:\r\nI used the default: pip install tensorflow as described on their website.\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\r\n0.12.0-rc0\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nI built and tested this jupyter notebook WITHOUT gpu support.  It already builds and runs correctly (as in, have trained and optimized a network).  Now I'm trying to get it to work with gpu to speed it up.\r\n\r\nHere's the step in the notebook that causes the issue.  Prior to this, tensorFlow is imported successfully as tf.  This is the first session it's running.  the 'training_operation' uses conv2d.\r\n`\r\n##run Training\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    num_examples = len(X_train)\r\n    \r\n    print(\"Training...\")\r\n    print()\r\n    for i in range(EPOCHS):\r\n        X_train, y_train = shuffle(X_train, y_train)\r\n        for offset in range(0, num_examples, BATCH_SIZE):\r\n            end = offset + BATCH_SIZE\r\n            batch_x, batch_y = X_train[offset:end], y_train[offset:end]\r\n            sess.run(training_operation, feed_dict={x: batch_x, y: batch_y})\r\n            \r\n        validation_accuracy = evaluate(X_validation, y_validation)\r\n        print(\"EPOCH {} ...\".format(i+1))\r\n        print(\"Validation Accuracy = {:.3f}\".format(validation_accuracy))\r\n        print()\r\n        \r\n    saver.save(sess, './lenetTrafficSign')\r\n    print(\"Model saved\")`\r\n\r\n\r\n### What other attempted solutions have you tried?\r\nI saw a similar issue in a pre-windows version that suggested it had something to do with memory.\r\nI tried adding the following before the tensorflow session:\r\n`config = tf.ConfigProto()\r\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.4\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())`\r\n\r\nIt did not resolve the issue.\r\n\r\n### Logs or other output that would be helpful\r\n(If logs are large, please upload as attachment or provide link).\r\nThe error is as follows, when trying to run the session:\r\n![image](https://cloud.githubusercontent.com/assets/7866171/21579570/f25e4a0c-cf7d-11e6-8136-1f8b681e3dcd.png)\r\n\r\n\r\nThe plain text at the last three lines are:\r\ncuda_event.cc:49]Error polling for event status: failed to query event: CUDA_ERROR_LAUNCH_FAILED\r\ngpu_event_mgr.cc:190] Unexpected Event Status: 1\r\ncuda_dnn.cc:305] could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\r\ncuda_dnn.cc:352] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM\r\nconv_ops.cc:532] Check failed: stream->parent()->GetConvolveAlgorithms(&algorithms)\r\n\r\nA few seconds after the script crashes, the screen goes black and the video driver resets.\r\n"}
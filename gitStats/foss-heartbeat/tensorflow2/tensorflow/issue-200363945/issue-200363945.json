{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6806", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6806/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6806/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6806/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6806", "id": 200363945, "node_id": "MDU6SXNzdWUyMDAzNjM5NDU=", "number": 6806, "title": "convert_graphdef_memmapped_format produces corrupt graphs", "user": {"login": "eaigner", "id": 112197, "node_id": "MDQ6VXNlcjExMjE5Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/112197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaigner", "html_url": "https://github.com/eaigner", "followers_url": "https://api.github.com/users/eaigner/followers", "following_url": "https://api.github.com/users/eaigner/following{/other_user}", "gists_url": "https://api.github.com/users/eaigner/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaigner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaigner/subscriptions", "organizations_url": "https://api.github.com/users/eaigner/orgs", "repos_url": "https://api.github.com/users/eaigner/repos", "events_url": "https://api.github.com/users/eaigner/events{/privacy}", "received_events_url": "https://api.github.com/users/eaigner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-12T13:15:14Z", "updated_at": "2017-01-13T08:39:06Z", "closed_at": "2017-01-13T08:39:06Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I tried memory mapping an exported/frozen graph. Let's say the graph is named <code>graph.pb</code>. After converting the graph like this</p>\n<pre><code>./path/to/convert_graphdef_memmapped_format --in_graph=graph.pb --out_graph=graph_mmap.pb\n</code></pre>\n<p>I get</p>\n<ul>\n<li><code>Converted 16 nodes</code> for an unquantized graph</li>\n<li><code>Converted 0 nodes</code> for the 8bit quantized version of the graph</li>\n</ul>\n<p>If I try to load any of these output files using the C++ API <code>ReadBinaryProto</code> and then <code>Run</code> the graph the following errors occur</p>\n<ul>\n<li>Unquantized: <code>Session was not created with a graph before Run()</code></li>\n<li>Quantized: <code>Out of range: Read less bytes than requested</code></li>\n</ul>\n<p>so I guess the output file is a corrupt protobuf file (or a different version).</p>", "body_text": "I tried memory mapping an exported/frozen graph. Let's say the graph is named graph.pb. After converting the graph like this\n./path/to/convert_graphdef_memmapped_format --in_graph=graph.pb --out_graph=graph_mmap.pb\n\nI get\n\nConverted 16 nodes for an unquantized graph\nConverted 0 nodes for the 8bit quantized version of the graph\n\nIf I try to load any of these output files using the C++ API ReadBinaryProto and then Run the graph the following errors occur\n\nUnquantized: Session was not created with a graph before Run()\nQuantized: Out of range: Read less bytes than requested\n\nso I guess the output file is a corrupt protobuf file (or a different version).", "body": "I tried memory mapping an exported/frozen graph. Let's say the graph is named `graph.pb`. After converting the graph like this\r\n\r\n    ./path/to/convert_graphdef_memmapped_format --in_graph=graph.pb --out_graph=graph_mmap.pb\r\n\r\nI get\r\n\r\n- `Converted 16 nodes` for an unquantized graph\r\n- `Converted 0 nodes` for the 8bit quantized version of the graph\r\n\r\nIf I try to load any of these output files using the C++ API `ReadBinaryProto` and then `Run` the graph the following errors occur\r\n\r\n- Unquantized: `Session was not created with a graph before Run()`\r\n- Quantized: `Out of range: Read less bytes than requested`\r\n\r\nso I guess the output file is a corrupt protobuf file (or a different version).\r\n"}
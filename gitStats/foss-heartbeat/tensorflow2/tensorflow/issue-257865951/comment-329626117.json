{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/329626117", "html_url": "https://github.com/tensorflow/tensorflow/pull/13049#issuecomment-329626117", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13049", "id": 329626117, "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTYyNjExNw==", "user": {"login": "jlebar", "id": 150663, "node_id": "MDQ6VXNlcjE1MDY2Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/150663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlebar", "html_url": "https://github.com/jlebar", "followers_url": "https://api.github.com/users/jlebar/followers", "following_url": "https://api.github.com/users/jlebar/following{/other_user}", "gists_url": "https://api.github.com/users/jlebar/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlebar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlebar/subscriptions", "organizations_url": "https://api.github.com/users/jlebar/orgs", "repos_url": "https://api.github.com/users/jlebar/repos", "events_url": "https://api.github.com/users/jlebar/events{/privacy}", "received_events_url": "https://api.github.com/users/jlebar/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-14T22:27:32Z", "updated_at": "2017-09-14T23:43:11Z", "author_association": "MEMBER", "body_html": "<p>A few high-level thoughts:</p>\n<ul>\n<li>\n<p>What kind of comments are you looking for on this PR?  I typed up a bunch of stuff below, but I realize now you may be looking for an entirely different kind of feedback.  Sorry if below isn't helpful.</p>\n</li>\n<li>\n<p>It seems like you have a benchmark for this.  Can you add it to the PR?  Otherwise it's going to be hard for anyone else to evaluate other changes they might want to make.</p>\n</li>\n<li>\n<p>Similarly, can you add the detailed benchmark results (beyond just the picture) to the commit message?</p>\n</li>\n<li>\n<p>This adds a <em>lot</em> of new kernels to compile, and that can have an effect on compilation speed and binary size, especially when, as is common, we have to compile the GPU code for multiple GPU archs.</p>\n<p>I don't want to prematurely optimize or make this a PITA for you, especially if this ends up not being important.  Maybe a sufficient starting place would be: What's the change in compile time for this file?</p>\n</li>\n<li>\n<p>It seems like you'd want to add some additional tests to cover new edge cases in this code?</p>\n</li>\n<li>\n<p>In terms of formatting, please clang-format over this code so we don't have to argue about whitespace, and you'll want to revert some of the style changes, e.g. changing int template parameters from CamelCase to MACRO_CASE, adding (unnecessary parens) and so on.  A decent starting place is <a href=\"https://google.github.io/styleguide/cppguide.html\" rel=\"nofollow\">https://google.github.io/styleguide/cppguide.html</a>, although that's unfortunately out of date.  :(</p>\n<p>We prefer constants to macros, e.g. TILE_SIZE.  Also, I think you could rewrite the dispatch using templated functions rather than macros, which might be a nice simplification.</p>\n</li>\n</ul>\n<pre><code>template &lt;int foo, int bar&gt;\nbool DoTranspose(...) {\n  if (...) {\n    launch_kernel&lt;&lt;&lt;...&gt;&gt;&gt;();\n    return true;\n  }\n  ...\n  return false;\n}\n</code></pre>\n<ul>\n<li>Please add comments to the code and commit message explaining what this patch does.</li>\n</ul>", "body_text": "A few high-level thoughts:\n\n\nWhat kind of comments are you looking for on this PR?  I typed up a bunch of stuff below, but I realize now you may be looking for an entirely different kind of feedback.  Sorry if below isn't helpful.\n\n\nIt seems like you have a benchmark for this.  Can you add it to the PR?  Otherwise it's going to be hard for anyone else to evaluate other changes they might want to make.\n\n\nSimilarly, can you add the detailed benchmark results (beyond just the picture) to the commit message?\n\n\nThis adds a lot of new kernels to compile, and that can have an effect on compilation speed and binary size, especially when, as is common, we have to compile the GPU code for multiple GPU archs.\nI don't want to prematurely optimize or make this a PITA for you, especially if this ends up not being important.  Maybe a sufficient starting place would be: What's the change in compile time for this file?\n\n\nIt seems like you'd want to add some additional tests to cover new edge cases in this code?\n\n\nIn terms of formatting, please clang-format over this code so we don't have to argue about whitespace, and you'll want to revert some of the style changes, e.g. changing int template parameters from CamelCase to MACRO_CASE, adding (unnecessary parens) and so on.  A decent starting place is https://google.github.io/styleguide/cppguide.html, although that's unfortunately out of date.  :(\nWe prefer constants to macros, e.g. TILE_SIZE.  Also, I think you could rewrite the dispatch using templated functions rather than macros, which might be a nice simplification.\n\n\ntemplate <int foo, int bar>\nbool DoTranspose(...) {\n  if (...) {\n    launch_kernel<<<...>>>();\n    return true;\n  }\n  ...\n  return false;\n}\n\n\nPlease add comments to the code and commit message explaining what this patch does.", "body": "A few high-level thoughts:\r\n\r\n* What kind of comments are you looking for on this PR?  I typed up a bunch of stuff below, but I realize now you may be looking for an entirely different kind of feedback.  Sorry if below isn't helpful.\r\n\r\n* It seems like you have a benchmark for this.  Can you add it to the PR?  Otherwise it's going to be hard for anyone else to evaluate other changes they might want to make.\r\n\r\n* Similarly, can you add the detailed benchmark results (beyond just the picture) to the commit message?\r\n\r\n* This adds a *lot* of new kernels to compile, and that can have an effect on compilation speed and binary size, especially when, as is common, we have to compile the GPU code for multiple GPU archs.\r\n\r\n  I don't want to prematurely optimize or make this a PITA for you, especially if this ends up not being important.  Maybe a sufficient starting place would be: What's the change in compile time for this file?\r\n\r\n* It seems like you'd want to add some additional tests to cover new edge cases in this code?\r\n\r\n* In terms of formatting, please clang-format over this code so we don't have to argue about whitespace, and you'll want to revert some of the style changes, e.g. changing int template parameters from CamelCase to MACRO_CASE, adding (unnecessary parens) and so on.  A decent starting place is https://google.github.io/styleguide/cppguide.html, although that's unfortunately out of date.  :(\r\n\r\n  We prefer constants to macros, e.g. TILE_SIZE.  Also, I think you could rewrite the dispatch using templated functions rather than macros, which might be a nice simplification.\r\n\r\n```\r\ntemplate <int foo, int bar>\r\nbool DoTranspose(...) {\r\n  if (...) {\r\n    launch_kernel<<<...>>>();\r\n    return true;\r\n  }\r\n  ...\r\n  return false;\r\n}\r\n```\r\n\r\n* Please add comments to the code and commit message explaining what this patch does."}
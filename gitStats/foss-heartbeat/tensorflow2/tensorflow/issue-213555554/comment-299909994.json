{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/299909994", "html_url": "https://github.com/tensorflow/tensorflow/issues/8310#issuecomment-299909994", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8310", "id": 299909994, "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTkwOTk5NA==", "user": {"login": "leandro-gracia-gil", "id": 8785797, "node_id": "MDQ6VXNlcjg3ODU3OTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8785797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leandro-gracia-gil", "html_url": "https://github.com/leandro-gracia-gil", "followers_url": "https://api.github.com/users/leandro-gracia-gil/followers", "following_url": "https://api.github.com/users/leandro-gracia-gil/following{/other_user}", "gists_url": "https://api.github.com/users/leandro-gracia-gil/gists{/gist_id}", "starred_url": "https://api.github.com/users/leandro-gracia-gil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leandro-gracia-gil/subscriptions", "organizations_url": "https://api.github.com/users/leandro-gracia-gil/orgs", "repos_url": "https://api.github.com/users/leandro-gracia-gil/repos", "events_url": "https://api.github.com/users/leandro-gracia-gil/events{/privacy}", "received_events_url": "https://api.github.com/users/leandro-gracia-gil/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-08T15:59:54Z", "updated_at": "2017-05-09T01:14:21Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8933353\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/pawarrick\">@pawarrick</a> I've found that depending on what you do (your graph operations) you might actually need to build more than just the aot runtime.cc in MSVC. That leads to changes in a few more Tensorflow files, and transitively to one more trivial change in the Eigen library.</p>\n<p>I'm currently trying to figure out a cleaner approach considering the required changes, which are small but scattered across various files. The core issue is that with the generated static library alone there are linker errors because of missing symbols (generally the memory management functions of the runtime and some XLA/JIT CPU kernel ops). This gets solved by building more and more bits of Tensorflow using MSVC, but it also makes the snowball of MSVC fixes bigger and bigger without knowing if your next graph will be missing something else.</p>\n<p>It would be great if we could somehow include them in the generated static library itself, or perhaps have a separate static library for MSVC containing all the symbols the first one might need regardless of the graph we use.</p>\n<p>Any suggestions on good ways to approach the problem are most welcome.</p>", "body_text": "@pawarrick I've found that depending on what you do (your graph operations) you might actually need to build more than just the aot runtime.cc in MSVC. That leads to changes in a few more Tensorflow files, and transitively to one more trivial change in the Eigen library.\nI'm currently trying to figure out a cleaner approach considering the required changes, which are small but scattered across various files. The core issue is that with the generated static library alone there are linker errors because of missing symbols (generally the memory management functions of the runtime and some XLA/JIT CPU kernel ops). This gets solved by building more and more bits of Tensorflow using MSVC, but it also makes the snowball of MSVC fixes bigger and bigger without knowing if your next graph will be missing something else.\nIt would be great if we could somehow include them in the generated static library itself, or perhaps have a separate static library for MSVC containing all the symbols the first one might need regardless of the graph we use.\nAny suggestions on good ways to approach the problem are most welcome.", "body": "@pawarrick I've found that depending on what you do (your graph operations) you might actually need to build more than just the aot runtime.cc in MSVC. That leads to changes in a few more Tensorflow files, and transitively to one more trivial change in the Eigen library.\r\n\r\nI'm currently trying to figure out a cleaner approach considering the required changes, which are small but scattered across various files. The core issue is that with the generated static library alone there are linker errors because of missing symbols (generally the memory management functions of the runtime and some XLA/JIT CPU kernel ops). This gets solved by building more and more bits of Tensorflow using MSVC, but it also makes the snowball of MSVC fixes bigger and bigger without knowing if your next graph will be missing something else.\r\n\r\nIt would be great if we could somehow include them in the generated static library itself, or perhaps have a separate static library for MSVC containing all the symbols the first one might need regardless of the graph we use.\r\n\r\nAny suggestions on good ways to approach the problem are most welcome."}
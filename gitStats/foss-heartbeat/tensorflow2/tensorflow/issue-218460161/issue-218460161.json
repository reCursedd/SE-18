{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8866", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8866/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8866/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8866/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8866", "id": 218460161, "node_id": "MDU6SXNzdWUyMTg0NjAxNjE=", "number": 8866, "title": "How to print and write \"Predictions\" into a file?", "user": {"login": "Bonsen", "id": 6490238, "node_id": "MDQ6VXNlcjY0OTAyMzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/6490238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bonsen", "html_url": "https://github.com/Bonsen", "followers_url": "https://api.github.com/users/Bonsen/followers", "following_url": "https://api.github.com/users/Bonsen/following{/other_user}", "gists_url": "https://api.github.com/users/Bonsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bonsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bonsen/subscriptions", "organizations_url": "https://api.github.com/users/Bonsen/orgs", "repos_url": "https://api.github.com/users/Bonsen/repos", "events_url": "https://api.github.com/users/Bonsen/events{/privacy}", "received_events_url": "https://api.github.com/users/Bonsen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-31T10:19:20Z", "updated_at": "2017-03-31T17:32:13Z", "closed_at": "2017-03-31T17:31:51Z", "author_association": "NONE", "body_html": "<div class=\"highlight highlight-source-python\"><pre>    predictions <span class=\"pl-k\">=</span> tf.argmax(logits, <span class=\"pl-c1\">1</span>) <span class=\"pl-c\"><span class=\"pl-c\">#</span>#####this predictions!!!!!!!!!!!!!!</span>\n    labels <span class=\"pl-k\">=</span> tf.squeeze(labels)\n\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span> Define the metrics:</span>\n    names_to_values, names_to_updates <span class=\"pl-k\">=</span> slim.metrics.aggregate_metric_map({\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span>Accuracy<span class=\"pl-pds\">'</span></span>: slim.metrics.streaming_accuracy(predictions, labels),\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span>Predictions<span class=\"pl-pds\">'</span></span>: slim.metrics.streaming_precision(predictions, labels),\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span>Recall@5<span class=\"pl-pds\">'</span></span>: slim.metrics.streaming_recall_at_k(\n            logits, labels, <span class=\"pl-c1\">5</span>)\n    })\n\n    <span class=\"pl-c\"><span class=\"pl-c\">#</span> Print the summaries to screen.</span>\n    <span class=\"pl-k\">for</span> name, value <span class=\"pl-k\">in</span> names_to_values.iteritems():\n      summary_name <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>eval/<span class=\"pl-c1\">%s</span><span class=\"pl-pds\">'</span></span> <span class=\"pl-k\">%</span> name\n      op <span class=\"pl-k\">=</span> tf.summary.scalar(summary_name, value, <span class=\"pl-v\">collections</span><span class=\"pl-k\">=</span>[])\n      op <span class=\"pl-k\">=</span> tf.Print(op, [value], summary_name)\n      tf.add_to_collection(tf.GraphKeys.<span class=\"pl-c1\">SUMMARIES</span>, op)</pre></div>\n<p>I try lots of ways, but I fail to print or write \"predictions\".<br>\nI want to print  the test results(\"predictions\")  of a model and write it into aaa.txt, and how?</p>\n<p>THANKS.</p>", "body_text": "predictions = tf.argmax(logits, 1) ######this predictions!!!!!!!!!!!!!!\n    labels = tf.squeeze(labels)\n\n    # Define the metrics:\n    names_to_values, names_to_updates = slim.metrics.aggregate_metric_map({\n        'Accuracy': slim.metrics.streaming_accuracy(predictions, labels),\n        'Predictions': slim.metrics.streaming_precision(predictions, labels),\n        'Recall@5': slim.metrics.streaming_recall_at_k(\n            logits, labels, 5)\n    })\n\n    # Print the summaries to screen.\n    for name, value in names_to_values.iteritems():\n      summary_name = 'eval/%s' % name\n      op = tf.summary.scalar(summary_name, value, collections=[])\n      op = tf.Print(op, [value], summary_name)\n      tf.add_to_collection(tf.GraphKeys.SUMMARIES, op)\nI try lots of ways, but I fail to print or write \"predictions\".\nI want to print  the test results(\"predictions\")  of a model and write it into aaa.txt, and how?\nTHANKS.", "body": "```python\r\n    predictions = tf.argmax(logits, 1) ######this predictions!!!!!!!!!!!!!!\r\n    labels = tf.squeeze(labels)\r\n\r\n    # Define the metrics:\r\n    names_to_values, names_to_updates = slim.metrics.aggregate_metric_map({\r\n        'Accuracy': slim.metrics.streaming_accuracy(predictions, labels),\r\n        'Predictions': slim.metrics.streaming_precision(predictions, labels),\r\n        'Recall@5': slim.metrics.streaming_recall_at_k(\r\n            logits, labels, 5)\r\n    })\r\n\r\n    # Print the summaries to screen.\r\n    for name, value in names_to_values.iteritems():\r\n      summary_name = 'eval/%s' % name\r\n      op = tf.summary.scalar(summary_name, value, collections=[])\r\n      op = tf.Print(op, [value], summary_name)\r\n      tf.add_to_collection(tf.GraphKeys.SUMMARIES, op)\r\n```\r\nI try lots of ways, but I fail to print or write \"predictions\".\r\nI want to print  the test results(\"predictions\")  of a model and write it into aaa.txt, and how?\r\n\r\nTHANKS."}
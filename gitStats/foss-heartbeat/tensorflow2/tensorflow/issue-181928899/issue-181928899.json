{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4867", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4867/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4867/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4867/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4867", "id": 181928899, "node_id": "MDU6SXNzdWUxODE5Mjg4OTk=", "number": 4867, "title": "[0.11]Can't bind GPU with tf.device()", "user": {"login": "DjangoPeng", "id": 16943353, "node_id": "MDQ6VXNlcjE2OTQzMzUz", "avatar_url": "https://avatars3.githubusercontent.com/u/16943353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DjangoPeng", "html_url": "https://github.com/DjangoPeng", "followers_url": "https://api.github.com/users/DjangoPeng/followers", "following_url": "https://api.github.com/users/DjangoPeng/following{/other_user}", "gists_url": "https://api.github.com/users/DjangoPeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/DjangoPeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DjangoPeng/subscriptions", "organizations_url": "https://api.github.com/users/DjangoPeng/orgs", "repos_url": "https://api.github.com/users/DjangoPeng/repos", "events_url": "https://api.github.com/users/DjangoPeng/events{/privacy}", "received_events_url": "https://api.github.com/users/DjangoPeng/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-10-10T02:40:49Z", "updated_at": "2016-10-21T04:46:07Z", "closed_at": "2016-10-21T04:46:07Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I installed the latest TF v0.11  and found that it can't bind specific GPU with <code>tf.device(\"gpu:1\")</code>.  It always applies all GPU resource when I run <code>tf.Session()</code>, which is unreasonable.<br>\nFor example:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>gpu:1<span class=\"pl-pds\">\"</span></span>):\n  sess <span class=\"pl-k\">=</span> tf.Session()</pre></div>\n<p>GPU resource:</p>\n<pre><code>+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      7895    C   python                                       10963MiB |\n|    1      7895    C   python                                       10922MiB |\n|    2      7895    C   python                                       10923MiB |\n|    3      7895    C   python                                       10922MiB |\n+-----------------------------------------------------------------------------+\n</code></pre>\n<p>But when I switch to TF v0.9, everything is fine.<br>\nGPU resource:</p>\n<pre><code>+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      5161    C   python                                          65MiB |\n|    1      5161    C   python                                          65MiB |\n|    2      5161    C   python                                          65MiB |\n|    3      5161    C   python                                          65MiB |\n+-----------------------------------------------------------------------------+\n</code></pre>\n<p>I think it's a bug and caused by the update of <code>tf.Session()</code>.<br>\nI hope I can fix it ASAP</p>", "body_text": "I installed the latest TF v0.11  and found that it can't bind specific GPU with tf.device(\"gpu:1\").  It always applies all GPU resource when I run tf.Session(), which is unreasonable.\nFor example:\nimport tensorflow as tf\nwith tf.device(\"gpu:1\"):\n  sess = tf.Session()\nGPU resource:\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      7895    C   python                                       10963MiB |\n|    1      7895    C   python                                       10922MiB |\n|    2      7895    C   python                                       10923MiB |\n|    3      7895    C   python                                       10922MiB |\n+-----------------------------------------------------------------------------+\n\nBut when I switch to TF v0.9, everything is fine.\nGPU resource:\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      5161    C   python                                          65MiB |\n|    1      5161    C   python                                          65MiB |\n|    2      5161    C   python                                          65MiB |\n|    3      5161    C   python                                          65MiB |\n+-----------------------------------------------------------------------------+\n\nI think it's a bug and caused by the update of tf.Session().\nI hope I can fix it ASAP", "body": "I installed the latest TF v0.11  and found that it can't bind specific GPU with `tf.device(\"gpu:1\")`.  It always applies all GPU resource when I run `tf.Session()`, which is unreasonable.\nFor example:\n\n``` python\nimport tensorflow as tf\nwith tf.device(\"gpu:1\"):\n  sess = tf.Session()\n```\n\nGPU resource:\n\n```\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      7895    C   python                                       10963MiB |\n|    1      7895    C   python                                       10922MiB |\n|    2      7895    C   python                                       10923MiB |\n|    3      7895    C   python                                       10922MiB |\n+-----------------------------------------------------------------------------+\n```\n\nBut when I switch to TF v0.9, everything is fine.\nGPU resource:\n\n```\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      5161    C   python                                          65MiB |\n|    1      5161    C   python                                          65MiB |\n|    2      5161    C   python                                          65MiB |\n|    3      5161    C   python                                          65MiB |\n+-----------------------------------------------------------------------------+\n```\n\nI think it's a bug and caused by the update of `tf.Session()`.\nI hope I can fix it ASAP\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14106", "id": 149615112, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ5NjE1MTEy", "html_url": "https://github.com/tensorflow/tensorflow/pull/14106", "diff_url": "https://github.com/tensorflow/tensorflow/pull/14106.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/14106.patch", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14106", "number": 14106, "state": "closed", "locked": false, "title": "Batch normalization for LSTM", "user": {"login": "Andres-Hernandez", "id": 13715648, "node_id": "MDQ6VXNlcjEzNzE1NjQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/13715648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andres-Hernandez", "html_url": "https://github.com/Andres-Hernandez", "followers_url": "https://api.github.com/users/Andres-Hernandez/followers", "following_url": "https://api.github.com/users/Andres-Hernandez/following{/other_user}", "gists_url": "https://api.github.com/users/Andres-Hernandez/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andres-Hernandez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andres-Hernandez/subscriptions", "organizations_url": "https://api.github.com/users/Andres-Hernandez/orgs", "repos_url": "https://api.github.com/users/Andres-Hernandez/repos", "events_url": "https://api.github.com/users/Andres-Hernandez/events{/privacy}", "received_events_url": "https://api.github.com/users/Andres-Hernandez/received_events", "type": "User", "site_admin": false}, "body": "A recurrent batch normalization is implemented based on https://arxiv.org/pdf/1603.09025.pdf. The new functionality allows for setting normalization for each of the inputs, the actual input or the state, and the cell prior to the activation function. To avoid a double implementation, tensorflow.python.layers.normalization.BatchNormalization is called to perform the normalization, and it can be controlled fully, but if no extra configuration is provided a good default configuraiton is used. By default no normalization is done. The only aspect mentioned in the paper that was not implemented, was that it was recommended there that the statistics be taken on a time step basis, rather than having all time steps share the same statistics. This would have necessitated a lot of tinkering in BatchNormalization, to the point that it would be more economical if that behaviour was desired, to simply port the parts needed into LSTM and adjust them as necessary, but that should not be part of the main branch.", "created_at": "2017-10-30T19:26:22Z", "updated_at": "2017-12-27T02:12:00Z", "closed_at": "2017-12-27T02:12:00Z", "merged_at": null, "merge_commit_sha": "e9dde45b2d17c0be41d1c7d399bd0a80b7eed91a", "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}, {"id": 474725938, "node_id": "MDU6TGFiZWw0NzQ3MjU5Mzg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stalled", "name": "stalled", "color": "d4c5f9", "default": false}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14106/commits", "review_comments_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14106/comments", "review_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14106/comments", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/f5fad905ce918656838db737bf21ac3a0a112adf", "head": {"label": "Andres-Hernandez:master", "ref": "master", "sha": "f5fad905ce918656838db737bf21ac3a0a112adf", "user": {"login": "Andres-Hernandez", "id": 13715648, "node_id": "MDQ6VXNlcjEzNzE1NjQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/13715648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andres-Hernandez", "html_url": "https://github.com/Andres-Hernandez", "followers_url": "https://api.github.com/users/Andres-Hernandez/followers", "following_url": "https://api.github.com/users/Andres-Hernandez/following{/other_user}", "gists_url": "https://api.github.com/users/Andres-Hernandez/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andres-Hernandez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andres-Hernandez/subscriptions", "organizations_url": "https://api.github.com/users/Andres-Hernandez/orgs", "repos_url": "https://api.github.com/users/Andres-Hernandez/repos", "events_url": "https://api.github.com/users/Andres-Hernandez/events{/privacy}", "received_events_url": "https://api.github.com/users/Andres-Hernandez/received_events", "type": "User", "site_admin": false}, "repo": {"id": 108389221, "node_id": "MDEwOlJlcG9zaXRvcnkxMDgzODkyMjE=", "name": "tensorflow", "full_name": "Andres-Hernandez/tensorflow", "private": false, "owner": {"login": "Andres-Hernandez", "id": 13715648, "node_id": "MDQ6VXNlcjEzNzE1NjQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/13715648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andres-Hernandez", "html_url": "https://github.com/Andres-Hernandez", "followers_url": "https://api.github.com/users/Andres-Hernandez/followers", "following_url": "https://api.github.com/users/Andres-Hernandez/following{/other_user}", "gists_url": "https://api.github.com/users/Andres-Hernandez/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andres-Hernandez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andres-Hernandez/subscriptions", "organizations_url": "https://api.github.com/users/Andres-Hernandez/orgs", "repos_url": "https://api.github.com/users/Andres-Hernandez/repos", "events_url": "https://api.github.com/users/Andres-Hernandez/events{/privacy}", "received_events_url": "https://api.github.com/users/Andres-Hernandez/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/Andres-Hernandez/tensorflow", "description": "Computation using data flow graphs for scalable machine learning", "fork": true, "url": "https://api.github.com/repos/Andres-Hernandez/tensorflow", "forks_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/forks", "keys_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/teams", "hooks_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/events", "assignees_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/tags", "blobs_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/subscription", "commits_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/merges", "archive_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/downloads", "issues_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/Andres-Hernandez/tensorflow/deployments", "created_at": "2017-10-26T09:17:47Z", "updated_at": "2017-10-26T09:18:20Z", "pushed_at": "2017-11-09T11:00:04Z", "git_url": "git://github.com/Andres-Hernandez/tensorflow.git", "ssh_url": "git@github.com:Andres-Hernandez/tensorflow.git", "clone_url": "https://github.com/Andres-Hernandez/tensorflow.git", "svn_url": "https://github.com/Andres-Hernandez/tensorflow", "homepage": "http://tensorflow.org", "size": 132885, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "tensorflow:master", "ref": "master", "sha": "d5f0634312e9426414687c0b718c931a256a082f", "user": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 45717250, "node_id": "MDEwOlJlcG9zaXRvcnk0NTcxNzI1MA==", "name": "tensorflow", "full_name": "tensorflow/tensorflow", "private": false, "owner": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/tensorflow/tensorflow", "description": "An Open Source Machine Learning Framework for Everyone", "fork": false, "url": "https://api.github.com/repos/tensorflow/tensorflow", "forks_url": "https://api.github.com/repos/tensorflow/tensorflow/forks", "keys_url": "https://api.github.com/repos/tensorflow/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/tensorflow/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/tensorflow/tensorflow/teams", "hooks_url": "https://api.github.com/repos/tensorflow/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/events", "assignees_url": "https://api.github.com/repos/tensorflow/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/tensorflow/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/tensorflow/tensorflow/tags", "blobs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/tensorflow/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/tensorflow/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/tensorflow/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/tensorflow/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/tensorflow/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/tensorflow/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/tensorflow/tensorflow/subscription", "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/tensorflow/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/tensorflow/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/tensorflow/tensorflow/merges", "archive_url": "https://api.github.com/repos/tensorflow/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/tensorflow/tensorflow/downloads", "issues_url": "https://api.github.com/repos/tensorflow/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/tensorflow/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/tensorflow/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/tensorflow/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/tensorflow/tensorflow/deployments", "created_at": "2015-11-07T01:19:20Z", "updated_at": "2018-11-24T20:25:08Z", "pushed_at": "2018-11-24T18:40:19Z", "git_url": "git://github.com/tensorflow/tensorflow.git", "ssh_url": "git@github.com:tensorflow/tensorflow.git", "clone_url": "https://github.com/tensorflow/tensorflow.git", "svn_url": "https://github.com/tensorflow/tensorflow", "homepage": "https://tensorflow.org", "size": 284546, "stargazers_count": 115177, "watchers_count": 115177, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 69947, "mirror_url": null, "archived": false, "open_issues_count": 1759, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 69947, "open_issues": 1759, "watchers": 115177, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14106"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/14106"}, "issue": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/14106"}, "comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/14106/comments"}, "review_comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14106/comments"}, "review_comment": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14106/commits"}, "statuses": {"href": "https://api.github.com/repos/tensorflow/tensorflow/statuses/f5fad905ce918656838db737bf21ac3a0a112adf"}}, "author_association": "NONE", "body_html": "<p>A recurrent batch normalization is implemented based on <a href=\"https://arxiv.org/pdf/1603.09025.pdf\" rel=\"nofollow\">https://arxiv.org/pdf/1603.09025.pdf</a>. The new functionality allows for setting normalization for each of the inputs, the actual input or the state, and the cell prior to the activation function. To avoid a double implementation, tensorflow.python.layers.normalization.BatchNormalization is called to perform the normalization, and it can be controlled fully, but if no extra configuration is provided a good default configuraiton is used. By default no normalization is done. The only aspect mentioned in the paper that was not implemented, was that it was recommended there that the statistics be taken on a time step basis, rather than having all time steps share the same statistics. This would have necessitated a lot of tinkering in BatchNormalization, to the point that it would be more economical if that behaviour was desired, to simply port the parts needed into LSTM and adjust them as necessary, but that should not be part of the main branch.</p>", "body_text": "A recurrent batch normalization is implemented based on https://arxiv.org/pdf/1603.09025.pdf. The new functionality allows for setting normalization for each of the inputs, the actual input or the state, and the cell prior to the activation function. To avoid a double implementation, tensorflow.python.layers.normalization.BatchNormalization is called to perform the normalization, and it can be controlled fully, but if no extra configuration is provided a good default configuraiton is used. By default no normalization is done. The only aspect mentioned in the paper that was not implemented, was that it was recommended there that the statistics be taken on a time step basis, rather than having all time steps share the same statistics. This would have necessitated a lot of tinkering in BatchNormalization, to the point that it would be more economical if that behaviour was desired, to simply port the parts needed into LSTM and adjust them as necessary, but that should not be part of the main branch.", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 6, "review_comments": 0, "maintainer_can_modify": false, "commits": 2, "additions": 106, "deletions": 18, "changed_files": 1}
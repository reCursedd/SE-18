{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/420200395", "html_url": "https://github.com/tensorflow/tensorflow/issues/20874#issuecomment-420200395", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20874", "id": 420200395, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDIwMDM5NQ==", "user": {"login": "offthewallace", "id": 22360772, "node_id": "MDQ6VXNlcjIyMzYwNzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/22360772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/offthewallace", "html_url": "https://github.com/offthewallace", "followers_url": "https://api.github.com/users/offthewallace/followers", "following_url": "https://api.github.com/users/offthewallace/following{/other_user}", "gists_url": "https://api.github.com/users/offthewallace/gists{/gist_id}", "starred_url": "https://api.github.com/users/offthewallace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/offthewallace/subscriptions", "organizations_url": "https://api.github.com/users/offthewallace/orgs", "repos_url": "https://api.github.com/users/offthewallace/repos", "events_url": "https://api.github.com/users/offthewallace/events{/privacy}", "received_events_url": "https://api.github.com/users/offthewallace/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-11T08:59:18Z", "updated_at": "2018-09-11T08:59:18Z", "author_association": "NONE", "body_html": "<p>I had the same issues</p>\n<p>WARNING:tensorflow:Estimator's model_fn (&lt;function model_fn at 0x7f1b5a16a320&gt;) includes params argument, but params are not passed to Estimator.<br>\n2018-09-11 16:17:09.727266: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA<br>\n2018-09-11 16:17:09.728842: E tensorflow/stream_executor/cuda/cuda_driver.cc:397] failed call to cuInit: CUDA_ERROR_NO_DEVICE<br>\n2018-09-11 16:17:09.728874: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:163] retrieving CUDA diagnostic information for host: mqq<br>\n2018-09-11 16:17:09.728885: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:170] hostname: mqq<br>\n2018-09-11 16:17:09.728914: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:194] libcuda reported version is: 384.81.0<br>\n2018-09-11 16:17:09.728945: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:198] kernel reported version is: 384.130.0<br>\n2018-09-11 16:17:09.728955: E tensorflow/stream_executor/cuda/cuda_diagnostics.cc:308] kernel version 384.130.0 does not match DSO version 384.81.0 -- cannot find working devices in this configuration<br>\nWARNING:tensorflow:Not all devices in distribute strategy are visible by TensorFlow sessions.<br>\nWARNING:tensorflow:num_readers has been reduced to 1 to match input file shards.<br>\nWARNING:tensorflow:From /data/guanlin/od_0730/object_detection/core/preprocessor.py:1205: calling squeeze (from tensorflow.python.ops.array_ops) with squeeze_dims is deprecated and will be removed in a future version.<br>\nInstructions for updating:<br>\nUse the <code>axis</code> argument instead<br>\nWARNING:tensorflow:From /data/guanlin/od_0730/object_detection/builders/dataset_builder.py:146: batch_and_drop_remainder (from tensorflow.contrib.data.python.ops.batching) is deprecated and will be removed in a future version.<br>\nInstructions for updating:<br>\nUse <code>tf.data.Dataset.batch(..., drop_remainder=True)</code>.<br>\nTraceback (most recent call last):<br>\nFile \"object_detection/model_main.py\", line 102, in <br>\ntf.app.run()<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 125, in run<br>\n_sys.exit(main(argv))<br>\nFile \"object_detection/model_main.py\", line 98, in main<br>\ntf.estimator.train_and_evaluate(estimator, train_spec, eval_specs[0])<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 451, in train_and_evaluate<br>\nreturn executor.run()<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 590, in run<br>\nreturn self.run_local()<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 691, in run_local<br>\nsaving_listeners=saving_listeners)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 376, in train<br>\nloss = self._train_model(input_fn, hooks, saving_listeners)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1143, in _train_model<br>\nreturn self._train_model_distributed(input_fn, hooks, saving_listeners)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1255, in _train_model_distributed<br>\nself.config)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/distribute.py\", line 777, in call_for_each_tower<br>\nreturn self._call_for_each_tower(fn, *args, **kwargs)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 308, in _call_for_each_tower<br>\ncoord.join(threads)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join<br>\nsix.reraise(*self._exc_info_to_raise)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception<br>\nyield<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 519, in run<br>\nself.main_result = self.main_fn(*self.main_args, **self.main_kwargs)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1133, in _call_model_fn<br>\nmodel_fn_results = self._model_fn(features=features, **kwargs)<br>\nFile \"/data/guanlin/od_0730/object_detection/model_lib.py\", line 246, in model_fn<br>\npreprocessed_images, features[fields.InputDataFields.true_image_shape])<br>\nFile \"/data/guanlin/od_0730/object_detection/meta_architectures/ssd_meta_arch.py\", line 393, in predict<br>\npreprocessed_inputs)<br>\nFile \"/data/guanlin/od_0730/object_detection/models/ssd_inception_v2_feature_extractor.py\", line 118, in extract_features<br>\nscope=scope)<br>\nFile \"/data/guanlin/od_0730/slim/nets/inception_v2.py\", line 117, in inception_v2_base<br>\nscope=end_point)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 183, in func_with_args<br>\nreturn func(*args, **current_args)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 2785, in separable_convolution2d<br>\noutputs = normalizer_fn(outputs, **normalizer_params)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 183, in func_with_args<br>\nreturn func(*args, **current_args)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 650, in batch_norm<br>\noutputs = layer.apply(inputs, training=is_training)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 805, in apply<br>\nreturn self.<strong>call</strong>(inputs, *args, **kwargs)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 362, in <strong>call</strong><br>\noutputs = super(Layer, self).<strong>call</strong>(inputs, *args, **kwargs)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 736, in <strong>call</strong><br>\noutputs = self.call(inputs, *args, **kwargs)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/layers/normalization.py\", line 158, in call<br>\nreturn super(BatchNormalization, self).call(inputs, training=training)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 514, in call<br>\noutputs = self._fused_batch_norm(inputs, training=training)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 420, in _fused_batch_norm<br>\nmomentum)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 369, in _assign_moving_average<br>\nwith ops.colocate_with(variable):<br>\nFile \"/usr/lib/python2.7/contextlib.py\", line 17, in <strong>enter</strong><br>\nreturn self.gen.next()<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3939, in _colocate_with_for_gradient<br>\nwith self.colocate_with(op, ignore_existing):<br>\nFile \"/usr/lib/python2.7/contextlib.py\", line 17, in <strong>enter</strong><br>\nreturn self.gen.next()<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3992, in colocate_with<br>\nop = internal_convert_to_tensor_or_indexed_slices(op, as_ref=True).op<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1255, in internal_convert_to_tensor_or_indexed_slices<br>\nvalue, dtype=dtype, name=name, as_ref=as_ref)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1094, in internal_convert_to_tensor<br>\nret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)<br>\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/values.py\", line 414, in _tensor_conversion_mirrored<br>\nassert not as_ref<br>\nAssertionError</p>", "body_text": "I had the same issues\nWARNING:tensorflow:Estimator's model_fn (<function model_fn at 0x7f1b5a16a320>) includes params argument, but params are not passed to Estimator.\n2018-09-11 16:17:09.727266: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\n2018-09-11 16:17:09.728842: E tensorflow/stream_executor/cuda/cuda_driver.cc:397] failed call to cuInit: CUDA_ERROR_NO_DEVICE\n2018-09-11 16:17:09.728874: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:163] retrieving CUDA diagnostic information for host: mqq\n2018-09-11 16:17:09.728885: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:170] hostname: mqq\n2018-09-11 16:17:09.728914: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:194] libcuda reported version is: 384.81.0\n2018-09-11 16:17:09.728945: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:198] kernel reported version is: 384.130.0\n2018-09-11 16:17:09.728955: E tensorflow/stream_executor/cuda/cuda_diagnostics.cc:308] kernel version 384.130.0 does not match DSO version 384.81.0 -- cannot find working devices in this configuration\nWARNING:tensorflow:Not all devices in distribute strategy are visible by TensorFlow sessions.\nWARNING:tensorflow:num_readers has been reduced to 1 to match input file shards.\nWARNING:tensorflow:From /data/guanlin/od_0730/object_detection/core/preprocessor.py:1205: calling squeeze (from tensorflow.python.ops.array_ops) with squeeze_dims is deprecated and will be removed in a future version.\nInstructions for updating:\nUse the axis argument instead\nWARNING:tensorflow:From /data/guanlin/od_0730/object_detection/builders/dataset_builder.py:146: batch_and_drop_remainder (from tensorflow.contrib.data.python.ops.batching) is deprecated and will be removed in a future version.\nInstructions for updating:\nUse tf.data.Dataset.batch(..., drop_remainder=True).\nTraceback (most recent call last):\nFile \"object_detection/model_main.py\", line 102, in \ntf.app.run()\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 125, in run\n_sys.exit(main(argv))\nFile \"object_detection/model_main.py\", line 98, in main\ntf.estimator.train_and_evaluate(estimator, train_spec, eval_specs[0])\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 451, in train_and_evaluate\nreturn executor.run()\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 590, in run\nreturn self.run_local()\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 691, in run_local\nsaving_listeners=saving_listeners)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 376, in train\nloss = self._train_model(input_fn, hooks, saving_listeners)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1143, in _train_model\nreturn self._train_model_distributed(input_fn, hooks, saving_listeners)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1255, in _train_model_distributed\nself.config)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/distribute.py\", line 777, in call_for_each_tower\nreturn self._call_for_each_tower(fn, *args, **kwargs)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 308, in _call_for_each_tower\ncoord.join(threads)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join\nsix.reraise(*self._exc_info_to_raise)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\nyield\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 519, in run\nself.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1133, in _call_model_fn\nmodel_fn_results = self._model_fn(features=features, **kwargs)\nFile \"/data/guanlin/od_0730/object_detection/model_lib.py\", line 246, in model_fn\npreprocessed_images, features[fields.InputDataFields.true_image_shape])\nFile \"/data/guanlin/od_0730/object_detection/meta_architectures/ssd_meta_arch.py\", line 393, in predict\npreprocessed_inputs)\nFile \"/data/guanlin/od_0730/object_detection/models/ssd_inception_v2_feature_extractor.py\", line 118, in extract_features\nscope=scope)\nFile \"/data/guanlin/od_0730/slim/nets/inception_v2.py\", line 117, in inception_v2_base\nscope=end_point)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 183, in func_with_args\nreturn func(*args, **current_args)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 2785, in separable_convolution2d\noutputs = normalizer_fn(outputs, **normalizer_params)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 183, in func_with_args\nreturn func(*args, **current_args)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 650, in batch_norm\noutputs = layer.apply(inputs, training=is_training)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 805, in apply\nreturn self.call(inputs, *args, **kwargs)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 362, in call\noutputs = super(Layer, self).call(inputs, *args, **kwargs)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 736, in call\noutputs = self.call(inputs, *args, **kwargs)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/layers/normalization.py\", line 158, in call\nreturn super(BatchNormalization, self).call(inputs, training=training)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 514, in call\noutputs = self._fused_batch_norm(inputs, training=training)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 420, in _fused_batch_norm\nmomentum)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 369, in _assign_moving_average\nwith ops.colocate_with(variable):\nFile \"/usr/lib/python2.7/contextlib.py\", line 17, in enter\nreturn self.gen.next()\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3939, in _colocate_with_for_gradient\nwith self.colocate_with(op, ignore_existing):\nFile \"/usr/lib/python2.7/contextlib.py\", line 17, in enter\nreturn self.gen.next()\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3992, in colocate_with\nop = internal_convert_to_tensor_or_indexed_slices(op, as_ref=True).op\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1255, in internal_convert_to_tensor_or_indexed_slices\nvalue, dtype=dtype, name=name, as_ref=as_ref)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1094, in internal_convert_to_tensor\nret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\nFile \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/values.py\", line 414, in _tensor_conversion_mirrored\nassert not as_ref\nAssertionError", "body": "I had the same issues \r\n\r\nWARNING:tensorflow:Estimator's model_fn (<function model_fn at 0x7f1b5a16a320>) includes params argument, but params are not passed to Estimator.\r\n2018-09-11 16:17:09.727266: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2018-09-11 16:17:09.728842: E tensorflow/stream_executor/cuda/cuda_driver.cc:397] failed call to cuInit: CUDA_ERROR_NO_DEVICE\r\n2018-09-11 16:17:09.728874: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:163] retrieving CUDA diagnostic information for host: mqq\r\n2018-09-11 16:17:09.728885: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:170] hostname: mqq\r\n2018-09-11 16:17:09.728914: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:194] libcuda reported version is: 384.81.0\r\n2018-09-11 16:17:09.728945: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:198] kernel reported version is: 384.130.0\r\n2018-09-11 16:17:09.728955: E tensorflow/stream_executor/cuda/cuda_diagnostics.cc:308] kernel version 384.130.0 does not match DSO version 384.81.0 -- cannot find working devices in this configuration\r\nWARNING:tensorflow:Not all devices in distribute strategy are visible by TensorFlow sessions.\r\nWARNING:tensorflow:num_readers has been reduced to 1 to match input file shards.\r\nWARNING:tensorflow:From /data/guanlin/od_0730/object_detection/core/preprocessor.py:1205: calling squeeze (from tensorflow.python.ops.array_ops) with squeeze_dims is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse the `axis` argument instead\r\nWARNING:tensorflow:From /data/guanlin/od_0730/object_detection/builders/dataset_builder.py:146: batch_and_drop_remainder (from tensorflow.contrib.data.python.ops.batching) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.data.Dataset.batch(..., drop_remainder=True)`.\r\nTraceback (most recent call last):\r\n  File \"object_detection/model_main.py\", line 102, in <module>\r\n    tf.app.run()\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"object_detection/model_main.py\", line 98, in main\r\n    tf.estimator.train_and_evaluate(estimator, train_spec, eval_specs[0])\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 451, in train_and_evaluate\r\n    return executor.run()\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 590, in run\r\n    return self.run_local()\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/training.py\", line 691, in run_local\r\n    saving_listeners=saving_listeners)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 376, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1143, in _train_model\r\n    return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1255, in _train_model_distributed\r\n    self.config)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/distribute.py\", line 777, in call_for_each_tower\r\n    return self._call_for_each_tower(fn, *args, **kwargs)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 308, in _call_for_each_tower\r\n    coord.join(threads)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join\r\n    six.reraise(*self._exc_info_to_raise)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 519, in run\r\n    self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1133, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"/data/guanlin/od_0730/object_detection/model_lib.py\", line 246, in model_fn\r\n    preprocessed_images, features[fields.InputDataFields.true_image_shape])\r\n  File \"/data/guanlin/od_0730/object_detection/meta_architectures/ssd_meta_arch.py\", line 393, in predict\r\n    preprocessed_inputs)\r\n  File \"/data/guanlin/od_0730/object_detection/models/ssd_inception_v2_feature_extractor.py\", line 118, in extract_features\r\n    scope=scope)\r\n  File \"/data/guanlin/od_0730/slim/nets/inception_v2.py\", line 117, in inception_v2_base\r\n    scope=end_point)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 183, in func_with_args\r\n    return func(*args, **current_args)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 2785, in separable_convolution2d\r\n    outputs = normalizer_fn(outputs, **normalizer_params)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 183, in func_with_args\r\n    return func(*args, **current_args)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 650, in batch_norm\r\n    outputs = layer.apply(inputs, training=is_training)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 805, in apply\r\n    return self.__call__(inputs, *args, **kwargs)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 362, in __call__\r\n    outputs = super(Layer, self).__call__(inputs, *args, **kwargs)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 736, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/layers/normalization.py\", line 158, in call\r\n    return super(BatchNormalization, self).call(inputs, training=training)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 514, in call\r\n    outputs = self._fused_batch_norm(inputs, training=training)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 420, in _fused_batch_norm\r\n    momentum)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/keras/layers/normalization.py\", line 369, in _assign_moving_average\r\n    with ops.colocate_with(variable):\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3939, in _colocate_with_for_gradient\r\n    with self.colocate_with(op, ignore_existing):\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3992, in colocate_with\r\n    op = internal_convert_to_tensor_or_indexed_slices(op, as_ref=True).op\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1255, in internal_convert_to_tensor_or_indexed_slices\r\n    value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1094, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/home/mqq/tensorflow1.9/env/local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/values.py\", line 414, in _tensor_conversion_mirrored\r\n    assert not as_ref\r\nAssertionError\r\n"}
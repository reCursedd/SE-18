{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/437747770", "html_url": "https://github.com/tensorflow/tensorflow/issues/19936#issuecomment-437747770", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19936", "id": 437747770, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzc0Nzc3MA==", "user": {"login": "South2North", "id": 22270569, "node_id": "MDQ6VXNlcjIyMjcwNTY5", "avatar_url": "https://avatars1.githubusercontent.com/u/22270569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/South2North", "html_url": "https://github.com/South2North", "followers_url": "https://api.github.com/users/South2North/followers", "following_url": "https://api.github.com/users/South2North/following{/other_user}", "gists_url": "https://api.github.com/users/South2North/gists{/gist_id}", "starred_url": "https://api.github.com/users/South2North/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/South2North/subscriptions", "organizations_url": "https://api.github.com/users/South2North/orgs", "repos_url": "https://api.github.com/users/South2North/repos", "events_url": "https://api.github.com/users/South2North/events{/privacy}", "received_events_url": "https://api.github.com/users/South2North/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-12T04:10:48Z", "updated_at": "2018-11-12T04:12:46Z", "author_association": "NONE", "body_html": "<blockquote>\n<p>The create_training_graph and create_eval_graph rewrite the graph and adds variables the graph. The added variables are added in a variable scope under the hood. So when you make an explicit outer variable_scope the issue seems to be resolved, right?</p>\n<p>In practice, we try to separate training and eval graphs to avoid variable scopes and reuse issues. You can do this by either implementing an estimator or creating a separate train and eval script like we did with mobilenet_v1 here:<br>\n<a href=\"https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_train.py\">https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_train.py</a><br>\n<a href=\"https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_eval.py\">https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_eval.py</a></p>\n</blockquote>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1450614\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/suharshs\">@suharshs</a>  Excuse me, I'm confused with the <code>create_training_graph()</code> code when using estimator. Could you show me where the function should be inserted? Thanks a lot.</p>", "body_text": "The create_training_graph and create_eval_graph rewrite the graph and adds variables the graph. The added variables are added in a variable scope under the hood. So when you make an explicit outer variable_scope the issue seems to be resolved, right?\nIn practice, we try to separate training and eval graphs to avoid variable scopes and reuse issues. You can do this by either implementing an estimator or creating a separate train and eval script like we did with mobilenet_v1 here:\nhttps://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_train.py\nhttps://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_eval.py\n\n@suharshs  Excuse me, I'm confused with the create_training_graph() code when using estimator. Could you show me where the function should be inserted? Thanks a lot.", "body": "> The create_training_graph and create_eval_graph rewrite the graph and adds variables the graph. The added variables are added in a variable scope under the hood. So when you make an explicit outer variable_scope the issue seems to be resolved, right?\r\n> \r\n> In practice, we try to separate training and eval graphs to avoid variable scopes and reuse issues. You can do this by either implementing an estimator or creating a separate train and eval script like we did with mobilenet_v1 here:\r\n> https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_train.py\r\n> https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1_eval.py\r\n\r\n@suharshs  Excuse me, I'm confused with the `create_training_graph()` code when using estimator. Could you show me where the function should be inserted? Thanks a lot."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/146072075", "pull_request_review_id": 70972201, "id": 146072075, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjA3MjA3NQ==", "diff_hunk": "@@ -1050,22 +1050,44 @@ Status ReductionShape(InferenceContext* c) {\n   }\n \n   const int32 input_rank = c->Rank(input);\n-  std::set<int32> true_indices;\n-  auto reduction_indices = reduction_indices_t->flat<int32>();\n-  for (int i = 0; i < reduction_indices_t->NumElements(); ++i) {\n-    int32 reduction_index = reduction_indices(i);\n-    if (reduction_index < -input_rank || reduction_index >= input_rank) {\n-      return errors::InvalidArgument(\"Invalid reduction dimension \",\n-                                     reduction_index, \" for input with \",\n-                                     input_rank, \" dimensions.\");\n-    }\n+  std::set<int64> true_indices;\n+  if (reduction_indices_t->dtype() == DataType::DT_INT32) {\n+    auto reduction_indices = reduction_indices_t->flat<int32>();", "path": "tensorflow/core/framework/common_shape_fns.cc", "position": null, "original_position": 15, "commit_id": "0680aa821990e6a27a7911247a6d8f575a680e11", "original_commit_id": "bd6a03fa8768902fa8fb0539e5a676dfbbdc3452", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "body": "Thanks @vrv. The PR has been updated with a template helper function of `ReductionShapeHelper`. Please take a look.", "created_at": "2017-10-20T21:36:47Z", "updated_at": "2017-10-20T21:36:47Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/13863#discussion_r146072075", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13863", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/146072075"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/13863#discussion_r146072075"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/13863"}}, "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=463737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vrv\">@vrv</a>. The PR has been updated with a template helper function of <code>ReductionShapeHelper</code>. Please take a look.</p>", "body_text": "Thanks @vrv. The PR has been updated with a template helper function of ReductionShapeHelper. Please take a look.", "in_reply_to_id": 146067773}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/438618047", "html_url": "https://github.com/tensorflow/tensorflow/issues/8858#issuecomment-438618047", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8858", "id": 438618047, "node_id": "MDEyOklzc3VlQ29tbWVudDQzODYxODA0Nw==", "user": {"login": "rsippl", "id": 260389, "node_id": "MDQ6VXNlcjI2MDM4OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/260389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsippl", "html_url": "https://github.com/rsippl", "followers_url": "https://api.github.com/users/rsippl/followers", "following_url": "https://api.github.com/users/rsippl/following{/other_user}", "gists_url": "https://api.github.com/users/rsippl/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsippl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsippl/subscriptions", "organizations_url": "https://api.github.com/users/rsippl/orgs", "repos_url": "https://api.github.com/users/rsippl/repos", "events_url": "https://api.github.com/users/rsippl/events{/privacy}", "received_events_url": "https://api.github.com/users/rsippl/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-14T10:41:46Z", "updated_at": "2018-11-14T10:56:25Z", "author_association": "NONE", "body_html": "<p>I ran into this while running code that's almost identical to what <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=103067\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nanoant\">@nanoant</a> posted, and I have a very similar setup (Lenovo Y700 with GTX 1070 on Ubuntu 18.04) -- creepy :) The machine always restarts during the first epoch.</p>\n<p>This works for me:<br>\n<code>sudo nvidia-smi -pm 1 &amp;&amp; sudo nvidia-smi -pl 120</code></p>\n<p>I watch the power draw via<br>\n<code>watch -n 0.5 nvidia-smi -q -d power</code></p>\n<p>Values above 120 don't work. Reducing the batch size to 32 works for me, too, but is slightly slower than 64 with power limit (15s vs. 14s per epoch).</p>\n<p>In order to avoid running into this issue, I believe it's best to set the power limit at boot. On Ubuntu, I'm doing this with a one-line script in /etc/cron.d:<br>\n<code>@reboot         root    nvidia-smi -pm 1 &amp;&amp; nvidia-smi -pl 120</code></p>", "body_text": "I ran into this while running code that's almost identical to what @nanoant posted, and I have a very similar setup (Lenovo Y700 with GTX 1070 on Ubuntu 18.04) -- creepy :) The machine always restarts during the first epoch.\nThis works for me:\nsudo nvidia-smi -pm 1 && sudo nvidia-smi -pl 120\nI watch the power draw via\nwatch -n 0.5 nvidia-smi -q -d power\nValues above 120 don't work. Reducing the batch size to 32 works for me, too, but is slightly slower than 64 with power limit (15s vs. 14s per epoch).\nIn order to avoid running into this issue, I believe it's best to set the power limit at boot. On Ubuntu, I'm doing this with a one-line script in /etc/cron.d:\n@reboot         root    nvidia-smi -pm 1 && nvidia-smi -pl 120", "body": "I ran into this while running code that's almost identical to what @nanoant posted, and I have a very similar setup (Lenovo Y700 with GTX 1070 on Ubuntu 18.04) -- creepy :) The machine always restarts during the first epoch.\r\n\r\nThis works for me:\r\n`sudo nvidia-smi -pm 1 && sudo nvidia-smi -pl 120`\r\n\r\nI watch the power draw via\r\n`watch -n 0.5 nvidia-smi -q -d power`\r\n\r\nValues above 120 don't work. Reducing the batch size to 32 works for me, too, but is slightly slower than 64 with power limit (15s vs. 14s per epoch).\r\n\r\nIn order to avoid running into this issue, I believe it's best to set the power limit at boot. On Ubuntu, I'm doing this with a one-line script in /etc/cron.d:\r\n`@reboot         root    nvidia-smi -pm 1 && nvidia-smi -pl 120`"}
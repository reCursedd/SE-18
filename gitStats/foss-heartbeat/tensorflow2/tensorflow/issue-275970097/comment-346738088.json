{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/346738088", "html_url": "https://github.com/tensorflow/tensorflow/issues/14787#issuecomment-346738088", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14787", "id": 346738088, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjczODA4OA==", "user": {"login": "arixlin", "id": 14324353, "node_id": "MDQ6VXNlcjE0MzI0MzUz", "avatar_url": "https://avatars0.githubusercontent.com/u/14324353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arixlin", "html_url": "https://github.com/arixlin", "followers_url": "https://api.github.com/users/arixlin/followers", "following_url": "https://api.github.com/users/arixlin/following{/other_user}", "gists_url": "https://api.github.com/users/arixlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/arixlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arixlin/subscriptions", "organizations_url": "https://api.github.com/users/arixlin/orgs", "repos_url": "https://api.github.com/users/arixlin/repos", "events_url": "https://api.github.com/users/arixlin/events{/privacy}", "received_events_url": "https://api.github.com/users/arixlin/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-24T03:56:04Z", "updated_at": "2017-12-07T07:32:29Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I try use  export_inference_graph build mobilenet_v1_224.pb:<br>\n<a href=\"https://github.com/tensorflow/models/blob/master/research/slim/README.md\">https://github.com/tensorflow/models/blob/master/research/slim/README.md</a><br>\n$ python export_inference_graph.py <br>\n--alsologtostderr <br>\n--model_name=mobilenet_v1 <br>\n--image_size=224 <br>\n--output_file=/tmp/mobilenet_v1_224.pb</p>\n<p>but when I build tflite,<br>\nbazel-bin/tensorflow/contrib/lite/toco/toco --input_file=/tmp/frozen_mobilenet_v1_224.pb --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --output_file=/tmp/mobilenet_v1_1.0_224.lite --inference_type=FLOAT --input_type=FLOAT --input_arrays=input --output_arrays=MobilenetV1/Predictions/Reshape_1 --input_shapes=1,224,224,3<br>\n2017-12-06 23:16:35.349463: W tensorflow/contrib/lite/toco/toco_cmdline_flags.cc:177] --input_type is deprecated. Use --inference_input_type.<br>\n2017-12-06 23:16:35.436850: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 336 operators, 502 arrays (0 quantized)<br>\n2017-12-06 23:16:35.475639: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 31 operators, 88 arrays (0 quantized)<br>\n2017-12-06 23:16:35.475947: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 31 operators, 88 arrays (0 quantized)<br>\n2017-12-06 23:16:35.476144: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:312] Total transient array allocated size: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/642252829cccf56627749c3c3b8dc65cc0099893/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/642252829cccf56627749c3c3b8dc65cc0099893\"><tt>6422528</tt></a> bytes, theoretical optimal value: 4816896 bytes.<br>\n2017-12-06 23:16:35.476323: I tensorflow/contrib/lite/toco/toco_tooling.cc:264] Estimated count of arithmetic ops: 1.14264 billion (note that a multiply-add is counted as 2 ops).<br>\n2017-12-06 23:16:35.476581: F tensorflow/contrib/lite/toco/tflite/export.cc:192] Unsupported operator: Squeeze<br>\nAborted (core dumped)</p>\n<p>When I use (<a href=\"https://storage.googleapis.com/download.tensorflow.org/models/mobilenet_v1_1.0_224_frozen.tgz\" rel=\"nofollow\">https://storage.googleapis.com/download.tensorflow.org/models/mobilenet_v1_1.0_224_frozen.tgz</a>) frozen.pb build tflite file, its success</p>\n<p>THX!<br>\n<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=326106\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/aselle\">@aselle</a></p>", "body_text": "I try use  export_inference_graph build mobilenet_v1_224.pb:\nhttps://github.com/tensorflow/models/blob/master/research/slim/README.md\n$ python export_inference_graph.py \n--alsologtostderr \n--model_name=mobilenet_v1 \n--image_size=224 \n--output_file=/tmp/mobilenet_v1_224.pb\nbut when I build tflite,\nbazel-bin/tensorflow/contrib/lite/toco/toco --input_file=/tmp/frozen_mobilenet_v1_224.pb --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --output_file=/tmp/mobilenet_v1_1.0_224.lite --inference_type=FLOAT --input_type=FLOAT --input_arrays=input --output_arrays=MobilenetV1/Predictions/Reshape_1 --input_shapes=1,224,224,3\n2017-12-06 23:16:35.349463: W tensorflow/contrib/lite/toco/toco_cmdline_flags.cc:177] --input_type is deprecated. Use --inference_input_type.\n2017-12-06 23:16:35.436850: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 336 operators, 502 arrays (0 quantized)\n2017-12-06 23:16:35.475639: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 31 operators, 88 arrays (0 quantized)\n2017-12-06 23:16:35.475947: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 31 operators, 88 arrays (0 quantized)\n2017-12-06 23:16:35.476144: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:312] Total transient array allocated size: 6422528 bytes, theoretical optimal value: 4816896 bytes.\n2017-12-06 23:16:35.476323: I tensorflow/contrib/lite/toco/toco_tooling.cc:264] Estimated count of arithmetic ops: 1.14264 billion (note that a multiply-add is counted as 2 ops).\n2017-12-06 23:16:35.476581: F tensorflow/contrib/lite/toco/tflite/export.cc:192] Unsupported operator: Squeeze\nAborted (core dumped)\nWhen I use (https://storage.googleapis.com/download.tensorflow.org/models/mobilenet_v1_1.0_224_frozen.tgz) frozen.pb build tflite file, its success\nTHX!\n@aselle", "body": "I try use  export_inference_graph build mobilenet_v1_224.pb:\r\nhttps://github.com/tensorflow/models/blob/master/research/slim/README.md\r\n$ python export_inference_graph.py \\\r\n  --alsologtostderr \\\r\n  --model_name=mobilenet_v1 \\\r\n  --image_size=224 \\\r\n  --output_file=/tmp/mobilenet_v1_224.pb\r\n\r\nbut when I build tflite,\r\nbazel-bin/tensorflow/contrib/lite/toco/toco --input_file=/tmp/frozen_mobilenet_v1_224.pb --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --output_file=/tmp/mobilenet_v1_1.0_224.lite --inference_type=FLOAT --input_type=FLOAT --input_arrays=input --output_arrays=MobilenetV1/Predictions/Reshape_1 --input_shapes=1,224,224,3\r\n2017-12-06 23:16:35.349463: W tensorflow/contrib/lite/toco/toco_cmdline_flags.cc:177] --input_type is deprecated. Use --inference_input_type.\r\n2017-12-06 23:16:35.436850: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 336 operators, 502 arrays (0 quantized)\r\n2017-12-06 23:16:35.475639: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 31 operators, 88 arrays (0 quantized)\r\n2017-12-06 23:16:35.475947: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 31 operators, 88 arrays (0 quantized)\r\n2017-12-06 23:16:35.476144: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:312] Total transient array allocated size: 6422528 bytes, theoretical optimal value: 4816896 bytes.\r\n2017-12-06 23:16:35.476323: I tensorflow/contrib/lite/toco/toco_tooling.cc:264] Estimated count of arithmetic ops: 1.14264 billion (note that a multiply-add is counted as 2 ops).\r\n2017-12-06 23:16:35.476581: F tensorflow/contrib/lite/toco/tflite/export.cc:192] Unsupported operator: Squeeze\r\nAborted (core dumped)\r\n\r\nWhen I use (https://storage.googleapis.com/download.tensorflow.org/models/mobilenet_v1_1.0_224_frozen.tgz) frozen.pb build tflite file, its success\r\n\r\nTHX!\r\n@aselle "}
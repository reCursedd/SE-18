{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/221143007", "html_url": "https://github.com/tensorflow/tensorflow/issues/2472#issuecomment-221143007", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2472", "id": 221143007, "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTE0MzAwNw==", "user": {"login": "s0okiym", "id": 6899298, "node_id": "MDQ6VXNlcjY4OTkyOTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6899298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/s0okiym", "html_url": "https://github.com/s0okiym", "followers_url": "https://api.github.com/users/s0okiym/followers", "following_url": "https://api.github.com/users/s0okiym/following{/other_user}", "gists_url": "https://api.github.com/users/s0okiym/gists{/gist_id}", "starred_url": "https://api.github.com/users/s0okiym/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/s0okiym/subscriptions", "organizations_url": "https://api.github.com/users/s0okiym/orgs", "repos_url": "https://api.github.com/users/s0okiym/repos", "events_url": "https://api.github.com/users/s0okiym/events{/privacy}", "received_events_url": "https://api.github.com/users/s0okiym/received_events", "type": "User", "site_admin": false}, "created_at": "2016-05-24T01:32:19Z", "updated_at": "2016-05-24T02:13:46Z", "author_association": "NONE", "body_html": "<p>as for the <a href=\"https://github.com/tensorflow/tensorflow/files/271770/mnist_softmax.py.txt\">minis_softmax.py.txt</a>,  on my machine I name the source code file 'distributed_test.py'. The code are the same as mnist_softmax.py.txt,  I run the ps server on one machine using command: <br></p><pre><code><em>python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=ps --task_index=0</em>  </code></pre>  then on  100.193.128.20, I run two processes using commands: <br><pre><code><em>python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=worker --task_index=0</em></code></pre>    and<br><pre><code> <em>python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=worker --task_index=1</em> </code></pre>  the job 0 runs as expected, the job 1 hang,  logs look like this:<br><pre>I0524 09:30:49.453812186   25095 socket_utils_common_posix.c:139] Disabling AF_INET6 sockets because socket() failed.<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; {100.193.128.27:2222}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; {100.193.128.20:2223, localhost:2224}<br>\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2224  </pre>  <strong>After job 0 ends, job 1 's logs looks like this:</strong><br><pre> E0524 09:35:43.322394911   25302 tcp_client_posix.c:173]     failed to connect to 'ipv4:100.193.128.20:2223': socket error: connection refused</pre><p></p>", "body_text": "as for the minis_softmax.py.txt,  on my machine I name the source code file 'distributed_test.py'. The code are the same as mnist_softmax.py.txt,  I run the ps server on one machine using command: python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=ps --task_index=0    then on  100.193.128.20, I run two processes using commands: python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=worker --task_index=0    and python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=worker --task_index=1   the job 0 runs as expected, the job 1 hang,  logs look like this:I0524 09:30:49.453812186   25095 socket_utils_common_posix.c:139] Disabling AF_INET6 sockets because socket() failed.\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {100.193.128.27:2222}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {100.193.128.20:2223, localhost:2224}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2224    After job 0 ends, job 1 's logs looks like this: E0524 09:35:43.322394911   25302 tcp_client_posix.c:173]     failed to connect to 'ipv4:100.193.128.20:2223': socket error: connection refused", "body": "as for the [minis_softmax.py.txt](https://github.com/tensorflow/tensorflow/files/271770/mnist_softmax.py.txt),  on my machine I name the source code file 'distributed_test.py'. The code are the same as mnist_softmax.py.txt,  I run the ps server on one machine using command: <br><pre><code>_python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=ps --task_index=0_  </code></pre>  then on  100.193.128.20, I run two processes using commands: <br><pre><code>_python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=worker --task_index=0_</code></pre>    and<br><pre><code> _python ./distribute_test.py --ps_hosts=100.193.128.27:2222 --worker_hosts=100.193.128.20:2223,100.193.128.20:2224 --job_name=worker --task_index=1_ </code></pre>  the job 0 runs as expected, the job 1 hang,  logs look like this:<br><pre>I0524 09:30:49.453812186   25095 socket_utils_common_posix.c:139] Disabling AF_INET6 sockets because socket() failed.\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {100.193.128.27:2222}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {100.193.128.20:2223, localhost:2224}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2224  </pre>  **After job 0 ends, job 1 's logs looks like this:**<br><pre> E0524 09:35:43.322394911   25302 tcp_client_posix.c:173]     failed to connect to 'ipv4:100.193.128.20:2223': socket error: connection refused</pre>\n"}
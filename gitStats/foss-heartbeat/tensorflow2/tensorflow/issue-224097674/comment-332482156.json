{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/332482156", "html_url": "https://github.com/tensorflow/tensorflow/issues/9434#issuecomment-332482156", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9434", "id": 332482156, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjQ4MjE1Ng==", "user": {"login": "namp", "id": 869726, "node_id": "MDQ6VXNlcjg2OTcyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/869726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/namp", "html_url": "https://github.com/namp", "followers_url": "https://api.github.com/users/namp/followers", "following_url": "https://api.github.com/users/namp/following{/other_user}", "gists_url": "https://api.github.com/users/namp/gists{/gist_id}", "starred_url": "https://api.github.com/users/namp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/namp/subscriptions", "organizations_url": "https://api.github.com/users/namp/orgs", "repos_url": "https://api.github.com/users/namp/repos", "events_url": "https://api.github.com/users/namp/events{/privacy}", "received_events_url": "https://api.github.com/users/namp/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-27T10:42:51Z", "updated_at": "2017-09-27T10:42:51Z", "author_association": "NONE", "body_html": "<p>Was anyone able to solve this problem?</p>\n<p>I even copied the function 'clone_replace' from <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=12462956\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/bstriner\">@bstriner</a> 's <a href=\"https://github.com/bstriner/keras-adversarial/blob/master/keras_adversarial/backend/tensorflow_backend.py\">code</a> and utilized it like this:</p>\n<pre><code>grads = self.get_gradients(loss, params)\ntempparams = [tf.add(a,a) for a in params]\nreplace = {p:npm for p, npm in zip(params, tempparams)}\ngradsn = [clone_replace(g, replace) for g in grads]\n</code></pre>\n<p>This give the error:</p>\n<p><code>TypeError: Expected a type in (&lt;class 'tensorflow.python.framework.ops.Operation'&gt;), got: &lt;class 'tensorflow.python.ops.variables.Variable'&gt;</code></p>\n<p>If I use the <code>op</code> attribute like</p>\n<p><code>gradsn = [clone_replace(g.op, replace) for g in grads] </code></p>\n<p>I get the error:</p>\n<p><code>TypeError: Expected a type in (&lt;class 'tensorflow.python.framework.ops.Tensor'&gt;), got: &lt;class 'tensorflow.python.framework.ops.Operation'&gt;</code></p>\n<p>Utterly confusing...</p>", "body_text": "Was anyone able to solve this problem?\nI even copied the function 'clone_replace' from @bstriner 's code and utilized it like this:\ngrads = self.get_gradients(loss, params)\ntempparams = [tf.add(a,a) for a in params]\nreplace = {p:npm for p, npm in zip(params, tempparams)}\ngradsn = [clone_replace(g, replace) for g in grads]\n\nThis give the error:\nTypeError: Expected a type in (<class 'tensorflow.python.framework.ops.Operation'>), got: <class 'tensorflow.python.ops.variables.Variable'>\nIf I use the op attribute like\ngradsn = [clone_replace(g.op, replace) for g in grads] \nI get the error:\nTypeError: Expected a type in (<class 'tensorflow.python.framework.ops.Tensor'>), got: <class 'tensorflow.python.framework.ops.Operation'>\nUtterly confusing...", "body": "Was anyone able to solve this problem?\r\n\r\nI even copied the function 'clone_replace' from @bstriner 's [code](https://github.com/bstriner/keras-adversarial/blob/master/keras_adversarial/backend/tensorflow_backend.py) and utilized it like this:\r\n\r\n```\r\ngrads = self.get_gradients(loss, params)\r\ntempparams = [tf.add(a,a) for a in params]\r\nreplace = {p:npm for p, npm in zip(params, tempparams)}\r\ngradsn = [clone_replace(g, replace) for g in grads]\r\n```\r\n\r\nThis give the error:\r\n\r\n`TypeError: Expected a type in (<class 'tensorflow.python.framework.ops.Operation'>), got: <class 'tensorflow.python.ops.variables.Variable'>`\r\n\r\nIf I use the `op` attribute like \r\n\r\n`gradsn = [clone_replace(g.op, replace) for g in grads]\r\n`\r\n\r\nI get the error:\r\n\r\n`TypeError: Expected a type in (<class 'tensorflow.python.framework.ops.Tensor'>), got: <class 'tensorflow.python.framework.ops.Operation'>`\r\n\r\nUtterly confusing...\r\n\r\n"}
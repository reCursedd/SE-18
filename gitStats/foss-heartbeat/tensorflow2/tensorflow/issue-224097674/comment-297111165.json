{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/297111165", "html_url": "https://github.com/tensorflow/tensorflow/issues/9434#issuecomment-297111165", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9434", "id": 297111165, "node_id": "MDEyOklzc3VlQ29tbWVudDI5NzExMTE2NQ==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-25T17:49:20Z", "updated_at": "2017-04-25T17:49:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4301275\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/slavakung\">@slavakung</a> rewriting the graph is a bit painful. When I do prototype non-standard optimizations I prefer keeping everything in variables. IE you run following ops</p>\n<pre><code>gradient1.assign(current_gradient)\nparameter_copy.assign(current_parameters)\ncurrent_parameters.assign(current_parameters+gradient1)\ngradient3.assign(fancy_gradient(gradient1, current_gradient))\ncurrent_parameters.assign(parameter_copy)\ncurrent_parameters.assign(current_parameters+gradient3)\n</code></pre>\n<p>If you have these things in the loop, modifying the graph (like doing var.assign()) will add 1-10ms delay, so you may have to refactor things to pre-create those ops ahead of time.  <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5061\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/alextp\">@alextp</a> is working on a solution that will make such applications easier</p>", "body_text": "@slavakung rewriting the graph is a bit painful. When I do prototype non-standard optimizations I prefer keeping everything in variables. IE you run following ops\ngradient1.assign(current_gradient)\nparameter_copy.assign(current_parameters)\ncurrent_parameters.assign(current_parameters+gradient1)\ngradient3.assign(fancy_gradient(gradient1, current_gradient))\ncurrent_parameters.assign(parameter_copy)\ncurrent_parameters.assign(current_parameters+gradient3)\n\nIf you have these things in the loop, modifying the graph (like doing var.assign()) will add 1-10ms delay, so you may have to refactor things to pre-create those ops ahead of time.  @alextp is working on a solution that will make such applications easier", "body": "@slavakung rewriting the graph is a bit painful. When I do prototype non-standard optimizations I prefer keeping everything in variables. IE you run following ops \r\n```\r\ngradient1.assign(current_gradient)\r\nparameter_copy.assign(current_parameters)\r\ncurrent_parameters.assign(current_parameters+gradient1)\r\ngradient3.assign(fancy_gradient(gradient1, current_gradient))\r\ncurrent_parameters.assign(parameter_copy)\r\ncurrent_parameters.assign(current_parameters+gradient3)\r\n```\r\nIf you have these things in the loop, modifying the graph (like doing var.assign()) will add 1-10ms delay, so you may have to refactor things to pre-create those ops ahead of time.  @alextp is working on a solution that will make such applications easier"}
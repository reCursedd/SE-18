{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16094", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16094/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16094/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16094/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16094", "id": 288302352, "node_id": "MDU6SXNzdWUyODgzMDIzNTI=", "number": 16094, "title": "Shape must be rank 1 but is rank 0 for 'CTCLoss' (op: 'CTCLoss')", "user": {"login": "selcouthlyBlue", "id": 13268675, "node_id": "MDQ6VXNlcjEzMjY4Njc1", "avatar_url": "https://avatars2.githubusercontent.com/u/13268675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/selcouthlyBlue", "html_url": "https://github.com/selcouthlyBlue", "followers_url": "https://api.github.com/users/selcouthlyBlue/followers", "following_url": "https://api.github.com/users/selcouthlyBlue/following{/other_user}", "gists_url": "https://api.github.com/users/selcouthlyBlue/gists{/gist_id}", "starred_url": "https://api.github.com/users/selcouthlyBlue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/selcouthlyBlue/subscriptions", "organizations_url": "https://api.github.com/users/selcouthlyBlue/orgs", "repos_url": "https://api.github.com/users/selcouthlyBlue/repos", "events_url": "https://api.github.com/users/selcouthlyBlue/events{/privacy}", "received_events_url": "https://api.github.com/users/selcouthlyBlue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-01-13T04:41:46Z", "updated_at": "2018-07-18T07:56:16Z", "closed_at": "2018-01-13T23:20:07Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Have I written custom code: yes<br>\nOS: Windows 8.1<br>\nTensorflow installed from: conda<br>\nTensorflow version: 1.4</p>\n<p>I've successfully converted a Tensor into a SparseTensor with this code:</p>\n<pre><code>def dense_to_sparse(dense_tensor, out_type):\n    indices = tf.where(tf.not_equal(dense_tensor, tf.constant(0, dense_tensor.dtype)\n    values = tf.gather_nd(dense_tensor, indices)\n    shape = tf.shape(dense_tensor, out_type=out_type)\n    return tf.SparseTensor(indices, values, shape)\n</code></pre>\n<p>I want to try out using a <code>SparseTensor</code> converted from a dense one:</p>\n<pre><code>input_layer = tf.placeholder(tf.float32, [None, 1596, 48])\ndense_labels = tf.placeholder(tf.int32)\nsparse_from_dense = dense_to_sparse(dense_lables, out_type=tf.int64)\ncell_fw = grid_rnn.Grid2LSTMCell(num_units=128)\ncell_bw = grid_rnn.Grid2LSTMCell(num_units=128)\nbidirectional_grid_rnn = tf.nn.bidirectional_dynamic_rnn(cell_fw, cell_bw, input_layer, dtype=tf.float32)\noutputs = tf.reshape(bidirectional_grid_rnn[0], [-1, 256])\n\nW = tf.Variable(tf.truncated_normal([256, 80], stddev=0.1, dtype=tf.float32), name='W')\nb = tf.Variable(tf.constant(0., dtype=tf.float32, shape=[80], name='b'))\n\nlogits = tf.matmul(outputs, W) + b\nlogits = tf.reshape(logits, [tf.shape(input_layer)[0], -1, 80])\nlogits = tf.transpose(logits, (1, 0, 2))\n\nloss = tf.nn.ctc_loss(inputs=logits, labels=sparse, sequence_length=320)\n</code></pre>\n<p>Unfortunately, when I do this, I encounter this error:</p>\n<p><code>Shape must be rank 1 but is rank 0 for 'CTCLoss' (op: 'CTCLoss') with input shapes: [?,?,80], [?,1], [?], [].</code></p>", "body_text": "Have I written custom code: yes\nOS: Windows 8.1\nTensorflow installed from: conda\nTensorflow version: 1.4\nI've successfully converted a Tensor into a SparseTensor with this code:\ndef dense_to_sparse(dense_tensor, out_type):\n    indices = tf.where(tf.not_equal(dense_tensor, tf.constant(0, dense_tensor.dtype)\n    values = tf.gather_nd(dense_tensor, indices)\n    shape = tf.shape(dense_tensor, out_type=out_type)\n    return tf.SparseTensor(indices, values, shape)\n\nI want to try out using a SparseTensor converted from a dense one:\ninput_layer = tf.placeholder(tf.float32, [None, 1596, 48])\ndense_labels = tf.placeholder(tf.int32)\nsparse_from_dense = dense_to_sparse(dense_lables, out_type=tf.int64)\ncell_fw = grid_rnn.Grid2LSTMCell(num_units=128)\ncell_bw = grid_rnn.Grid2LSTMCell(num_units=128)\nbidirectional_grid_rnn = tf.nn.bidirectional_dynamic_rnn(cell_fw, cell_bw, input_layer, dtype=tf.float32)\noutputs = tf.reshape(bidirectional_grid_rnn[0], [-1, 256])\n\nW = tf.Variable(tf.truncated_normal([256, 80], stddev=0.1, dtype=tf.float32), name='W')\nb = tf.Variable(tf.constant(0., dtype=tf.float32, shape=[80], name='b'))\n\nlogits = tf.matmul(outputs, W) + b\nlogits = tf.reshape(logits, [tf.shape(input_layer)[0], -1, 80])\nlogits = tf.transpose(logits, (1, 0, 2))\n\nloss = tf.nn.ctc_loss(inputs=logits, labels=sparse, sequence_length=320)\n\nUnfortunately, when I do this, I encounter this error:\nShape must be rank 1 but is rank 0 for 'CTCLoss' (op: 'CTCLoss') with input shapes: [?,?,80], [?,1], [?], [].", "body": "Have I written custom code: yes\r\nOS: Windows 8.1\r\nTensorflow installed from: conda\r\nTensorflow version: 1.4\r\n\r\n\r\nI've successfully converted a Tensor into a SparseTensor with this code:\r\n\r\n```\r\ndef dense_to_sparse(dense_tensor, out_type):\r\n    indices = tf.where(tf.not_equal(dense_tensor, tf.constant(0, dense_tensor.dtype)\r\n    values = tf.gather_nd(dense_tensor, indices)\r\n    shape = tf.shape(dense_tensor, out_type=out_type)\r\n    return tf.SparseTensor(indices, values, shape)\r\n```\r\n\r\nI want to try out using a `SparseTensor` converted from a dense one: \r\n\r\n```\r\ninput_layer = tf.placeholder(tf.float32, [None, 1596, 48])\r\ndense_labels = tf.placeholder(tf.int32)\r\nsparse_from_dense = dense_to_sparse(dense_lables, out_type=tf.int64)\r\ncell_fw = grid_rnn.Grid2LSTMCell(num_units=128)\r\ncell_bw = grid_rnn.Grid2LSTMCell(num_units=128)\r\nbidirectional_grid_rnn = tf.nn.bidirectional_dynamic_rnn(cell_fw, cell_bw, input_layer, dtype=tf.float32)\r\noutputs = tf.reshape(bidirectional_grid_rnn[0], [-1, 256])\r\n\r\nW = tf.Variable(tf.truncated_normal([256, 80], stddev=0.1, dtype=tf.float32), name='W')\r\nb = tf.Variable(tf.constant(0., dtype=tf.float32, shape=[80], name='b'))\r\n\r\nlogits = tf.matmul(outputs, W) + b\r\nlogits = tf.reshape(logits, [tf.shape(input_layer)[0], -1, 80])\r\nlogits = tf.transpose(logits, (1, 0, 2))\r\n\r\nloss = tf.nn.ctc_loss(inputs=logits, labels=sparse, sequence_length=320)\r\n```\r\n\r\nUnfortunately, when I do this, I encounter this error:\r\n\r\n`Shape must be rank 1 but is rank 0 for 'CTCLoss' (op: 'CTCLoss') with input shapes: [?,?,80], [?,1], [?], [].`\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6199", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6199/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6199/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6199/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6199", "id": 194469925, "node_id": "MDU6SXNzdWUxOTQ0Njk5MjU=", "number": 6199, "title": "\"Invalid proto descriptor for file \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\"", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "dsmilkov", "id": 2294279, "node_id": "MDQ6VXNlcjIyOTQyNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2294279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsmilkov", "html_url": "https://github.com/dsmilkov", "followers_url": "https://api.github.com/users/dsmilkov/followers", "following_url": "https://api.github.com/users/dsmilkov/following{/other_user}", "gists_url": "https://api.github.com/users/dsmilkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsmilkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsmilkov/subscriptions", "organizations_url": "https://api.github.com/users/dsmilkov/orgs", "repos_url": "https://api.github.com/users/dsmilkov/repos", "events_url": "https://api.github.com/users/dsmilkov/events{/privacy}", "received_events_url": "https://api.github.com/users/dsmilkov/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dsmilkov", "id": 2294279, "node_id": "MDQ6VXNlcjIyOTQyNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2294279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsmilkov", "html_url": "https://github.com/dsmilkov", "followers_url": "https://api.github.com/users/dsmilkov/followers", "following_url": "https://api.github.com/users/dsmilkov/following{/other_user}", "gists_url": "https://api.github.com/users/dsmilkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsmilkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsmilkov/subscriptions", "organizations_url": "https://api.github.com/users/dsmilkov/orgs", "repos_url": "https://api.github.com/users/dsmilkov/repos", "events_url": "https://api.github.com/users/dsmilkov/events{/privacy}", "received_events_url": "https://api.github.com/users/dsmilkov/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-12-08T23:12:37Z", "updated_at": "2016-12-12T21:26:43Z", "closed_at": "2016-12-12T21:25:56Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a href=\"https://github.com/tensorflow/tensorflow/blob/287db3a9b0701021f302e7bb58af5cf89fdcd424/tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\">trace_info.proto</a> seems to be missing <code>import tensorflow/core/protobuf/meta_graph.proto</code>. It works for Python protobuf implementation but fails with tracing runs on stricter cpp implementation:</p>\n<p><a href=\"https://gist.github.com/yaroslavvb/b0b9e51d88bb97aa0f739f8130e1c3d5\">scratch.py</a></p>\n<pre><code>python scratch.py\n\n...\n    contrib = importlib.import_module('tensorflow.contrib')\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 986, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 958, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 673, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 665, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/__init__.py\", line 49, in &lt;module&gt;\n    from tensorflow.contrib import tensorboard\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/__init__.py\", line 22, in &lt;module&gt;\n    from tensorflow.contrib.tensorboard import plugins\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/__init__.py\", line 23, in &lt;module&gt;\n    from tensorflow.contrib.tensorboard.plugins import trace\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/__init__.py\", line 22, in &lt;module&gt;\n    from tensorflow.contrib.tensorboard.plugins.trace.trace import *\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/trace.py\", line 28, in &lt;module&gt;\n    from tensorflow.contrib.tensorboard.plugins.trace.trace_info_pb2 import TraceInfo\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/trace_info_pb2.py\", line 22, in &lt;module&gt;\n    serialized_pb=_b('\\n=tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\\x12\\ntensorflow\\\"Q\\n\\tTraceInfo\\x12\\x1f\\n\\x03ops\\x18\\x01 \\x03(\\x0b\\x32\\x12.tensorflow.OpInfo\\x12#\\n\\x05\\x66iles\\x18\\x02 \\x03(\\x0b\\x32\\x14.tensorflow.FileInfo\\\"\\xb2\\x01\\n\\x06OpInfo\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12\\x0f\\n\\x07op_type\\x18\\x02 \\x01(\\t\\x12\\x0e\\n\\x06\\x64\\x65vice\\x18\\x03 \\x01(\\t\\x12(\\n\\ttraceback\\x18\\x04 \\x03(\\x0b\\x32\\x15.tensorflow.LineTrace\\x12&amp;\\n\\x06inputs\\x18\\x05 \\x03(\\x0b\\x32\\x16.tensorflow.TensorInfo\\x12\\'\\n\\x07outputs\\x18\\x06 \\x03(\\x0b\\x32\\x16.tensorflow.TensorInfo\\\"3\\n\\tLineTrace\\x12\\x11\\n\\tfile_path\\x18\\x01 \\x01(\\t\\x12\\x13\\n\\x0bline_number\\x18\\x02 \\x01(\\r\\\"Y\\n\\nTensorInfo\\x12\\r\\n\\x05shape\\x18\\x01 \\x03(\\x05\\x12\\r\\n\\x05\\x64type\\x18\\x02 \\x01(\\t\\x12\\x1a\\n\\x12num_bytes_per_elem\\x18\\x03 \\x01(\\r\\x12\\x11\\n\\tconsumers\\x18\\x04 \\x03(\\t\\\"\\xbb\\x01\\n\\x08\\x46ileInfo\\x12\\x11\\n\\tfile_path\\x18\\x01 \\x01(\\t\\x12\\x13\\n\\x0bsource_code\\x18\\x02 \\x01(\\t\\x12K\\n\\x14multiline_statements\\x18\\x03 \\x03(\\x0b\\x32-.tensorflow.FileInfo.MultilineStatementsEntry\\x1a:\\n\\x18MultilineStatementsEntry\\x12\\x0b\\n\\x03key\\x18\\x01 \\x01(\\r\\x12\\r\\n\\x05value\\x18\\x02 \\x01(\\r:\\x02\\x38\\x01\\x62\\x06proto3')\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/google/protobuf/descriptor.py\", line 827, in __new__\n    return _message.default_pool.AddSerializedFile(serialized_pb)\nTypeError: Couldn't build proto file into descriptor pool!\nInvalid proto descriptor for file \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\":\n  tensorflow.TensorInfo.dtype: \"tensorflow.TensorInfo.dtype\" is already defined in file \"tensorflow/core/protobuf/meta_graph.proto\".\n  tensorflow.TensorInfo: \"tensorflow.TensorInfo\" is already defined in file \"tensorflow/core/protobuf/meta_graph.proto\".\n  tensorflow.OpInfo.inputs: \"tensorflow.TensorInfo\" seems to be defined in \"tensorflow/core/protobuf/meta_graph.proto\", which is not imported by \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\".  To use it here, please add the necessary import.\n  tensorflow.OpInfo.outputs: \"tensorflow.TensorInfo\" seems to be defined in \"tensorflow/core/protobuf/meta_graph.proto\", which is not imported by \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\".  To use it here, please add the necessary import.\n\n</code></pre>\n<p><code>__git_version__: \"b'0.12.0-rc0-437-g6d63f67'\"</code> ( pulled from head Dec 6th 5pm)</p>", "body_text": "trace_info.proto seems to be missing import tensorflow/core/protobuf/meta_graph.proto. It works for Python protobuf implementation but fails with tracing runs on stricter cpp implementation:\nscratch.py\npython scratch.py\n\n...\n    contrib = importlib.import_module('tensorflow.contrib')\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 673, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 665, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 222, in _call_with_frames_removed\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/__init__.py\", line 49, in <module>\n    from tensorflow.contrib import tensorboard\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/__init__.py\", line 22, in <module>\n    from tensorflow.contrib.tensorboard import plugins\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/__init__.py\", line 23, in <module>\n    from tensorflow.contrib.tensorboard.plugins import trace\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/__init__.py\", line 22, in <module>\n    from tensorflow.contrib.tensorboard.plugins.trace.trace import *\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/trace.py\", line 28, in <module>\n    from tensorflow.contrib.tensorboard.plugins.trace.trace_info_pb2 import TraceInfo\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/trace_info_pb2.py\", line 22, in <module>\n    serialized_pb=_b('\\n=tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\\x12\\ntensorflow\\\"Q\\n\\tTraceInfo\\x12\\x1f\\n\\x03ops\\x18\\x01 \\x03(\\x0b\\x32\\x12.tensorflow.OpInfo\\x12#\\n\\x05\\x66iles\\x18\\x02 \\x03(\\x0b\\x32\\x14.tensorflow.FileInfo\\\"\\xb2\\x01\\n\\x06OpInfo\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12\\x0f\\n\\x07op_type\\x18\\x02 \\x01(\\t\\x12\\x0e\\n\\x06\\x64\\x65vice\\x18\\x03 \\x01(\\t\\x12(\\n\\ttraceback\\x18\\x04 \\x03(\\x0b\\x32\\x15.tensorflow.LineTrace\\x12&\\n\\x06inputs\\x18\\x05 \\x03(\\x0b\\x32\\x16.tensorflow.TensorInfo\\x12\\'\\n\\x07outputs\\x18\\x06 \\x03(\\x0b\\x32\\x16.tensorflow.TensorInfo\\\"3\\n\\tLineTrace\\x12\\x11\\n\\tfile_path\\x18\\x01 \\x01(\\t\\x12\\x13\\n\\x0bline_number\\x18\\x02 \\x01(\\r\\\"Y\\n\\nTensorInfo\\x12\\r\\n\\x05shape\\x18\\x01 \\x03(\\x05\\x12\\r\\n\\x05\\x64type\\x18\\x02 \\x01(\\t\\x12\\x1a\\n\\x12num_bytes_per_elem\\x18\\x03 \\x01(\\r\\x12\\x11\\n\\tconsumers\\x18\\x04 \\x03(\\t\\\"\\xbb\\x01\\n\\x08\\x46ileInfo\\x12\\x11\\n\\tfile_path\\x18\\x01 \\x01(\\t\\x12\\x13\\n\\x0bsource_code\\x18\\x02 \\x01(\\t\\x12K\\n\\x14multiline_statements\\x18\\x03 \\x03(\\x0b\\x32-.tensorflow.FileInfo.MultilineStatementsEntry\\x1a:\\n\\x18MultilineStatementsEntry\\x12\\x0b\\n\\x03key\\x18\\x01 \\x01(\\r\\x12\\r\\n\\x05value\\x18\\x02 \\x01(\\r:\\x02\\x38\\x01\\x62\\x06proto3')\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/google/protobuf/descriptor.py\", line 827, in __new__\n    return _message.default_pool.AddSerializedFile(serialized_pb)\nTypeError: Couldn't build proto file into descriptor pool!\nInvalid proto descriptor for file \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\":\n  tensorflow.TensorInfo.dtype: \"tensorflow.TensorInfo.dtype\" is already defined in file \"tensorflow/core/protobuf/meta_graph.proto\".\n  tensorflow.TensorInfo: \"tensorflow.TensorInfo\" is already defined in file \"tensorflow/core/protobuf/meta_graph.proto\".\n  tensorflow.OpInfo.inputs: \"tensorflow.TensorInfo\" seems to be defined in \"tensorflow/core/protobuf/meta_graph.proto\", which is not imported by \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\".  To use it here, please add the necessary import.\n  tensorflow.OpInfo.outputs: \"tensorflow.TensorInfo\" seems to be defined in \"tensorflow/core/protobuf/meta_graph.proto\", which is not imported by \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\".  To use it here, please add the necessary import.\n\n\n__git_version__: \"b'0.12.0-rc0-437-g6d63f67'\" ( pulled from head Dec 6th 5pm)", "body": "[trace_info.proto](https://github.com/tensorflow/tensorflow/blob/287db3a9b0701021f302e7bb58af5cf89fdcd424/tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto) seems to be missing `import tensorflow/core/protobuf/meta_graph.proto`. It works for Python protobuf implementation but fails with tracing runs on stricter cpp implementation:\r\n\r\n[scratch.py](https://gist.github.com/yaroslavvb/b0b9e51d88bb97aa0f739f8130e1c3d5)\r\n\r\n```\r\npython scratch.py\r\n\r\n...\r\n    contrib = importlib.import_module('tensorflow.contrib')\r\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 673, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 665, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 222, in _call_with_frames_removed\r\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/__init__.py\", line 49, in <module>\r\n    from tensorflow.contrib import tensorboard\r\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/__init__.py\", line 22, in <module>\r\n    from tensorflow.contrib.tensorboard import plugins\r\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/__init__.py\", line 23, in <module>\r\n    from tensorflow.contrib.tensorboard.plugins import trace\r\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/__init__.py\", line 22, in <module>\r\n    from tensorflow.contrib.tensorboard.plugins.trace.trace import *\r\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/trace.py\", line 28, in <module>\r\n    from tensorflow.contrib.tensorboard.plugins.trace.trace_info_pb2 import TraceInfo\r\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/tensorflow/contrib/tensorboard/plugins/trace/trace_info_pb2.py\", line 22, in <module>\r\n    serialized_pb=_b('\\n=tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\\x12\\ntensorflow\\\"Q\\n\\tTraceInfo\\x12\\x1f\\n\\x03ops\\x18\\x01 \\x03(\\x0b\\x32\\x12.tensorflow.OpInfo\\x12#\\n\\x05\\x66iles\\x18\\x02 \\x03(\\x0b\\x32\\x14.tensorflow.FileInfo\\\"\\xb2\\x01\\n\\x06OpInfo\\x12\\x0c\\n\\x04name\\x18\\x01 \\x01(\\t\\x12\\x0f\\n\\x07op_type\\x18\\x02 \\x01(\\t\\x12\\x0e\\n\\x06\\x64\\x65vice\\x18\\x03 \\x01(\\t\\x12(\\n\\ttraceback\\x18\\x04 \\x03(\\x0b\\x32\\x15.tensorflow.LineTrace\\x12&\\n\\x06inputs\\x18\\x05 \\x03(\\x0b\\x32\\x16.tensorflow.TensorInfo\\x12\\'\\n\\x07outputs\\x18\\x06 \\x03(\\x0b\\x32\\x16.tensorflow.TensorInfo\\\"3\\n\\tLineTrace\\x12\\x11\\n\\tfile_path\\x18\\x01 \\x01(\\t\\x12\\x13\\n\\x0bline_number\\x18\\x02 \\x01(\\r\\\"Y\\n\\nTensorInfo\\x12\\r\\n\\x05shape\\x18\\x01 \\x03(\\x05\\x12\\r\\n\\x05\\x64type\\x18\\x02 \\x01(\\t\\x12\\x1a\\n\\x12num_bytes_per_elem\\x18\\x03 \\x01(\\r\\x12\\x11\\n\\tconsumers\\x18\\x04 \\x03(\\t\\\"\\xbb\\x01\\n\\x08\\x46ileInfo\\x12\\x11\\n\\tfile_path\\x18\\x01 \\x01(\\t\\x12\\x13\\n\\x0bsource_code\\x18\\x02 \\x01(\\t\\x12K\\n\\x14multiline_statements\\x18\\x03 \\x03(\\x0b\\x32-.tensorflow.FileInfo.MultilineStatementsEntry\\x1a:\\n\\x18MultilineStatementsEntry\\x12\\x0b\\n\\x03key\\x18\\x01 \\x01(\\r\\x12\\r\\n\\x05value\\x18\\x02 \\x01(\\r:\\x02\\x38\\x01\\x62\\x06proto3')\r\n  File \"/home/yaroslav/.conda/envs/openai/lib/python3.5/site-packages/google/protobuf/descriptor.py\", line 827, in __new__\r\n    return _message.default_pool.AddSerializedFile(serialized_pb)\r\nTypeError: Couldn't build proto file into descriptor pool!\r\nInvalid proto descriptor for file \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\":\r\n  tensorflow.TensorInfo.dtype: \"tensorflow.TensorInfo.dtype\" is already defined in file \"tensorflow/core/protobuf/meta_graph.proto\".\r\n  tensorflow.TensorInfo: \"tensorflow.TensorInfo\" is already defined in file \"tensorflow/core/protobuf/meta_graph.proto\".\r\n  tensorflow.OpInfo.inputs: \"tensorflow.TensorInfo\" seems to be defined in \"tensorflow/core/protobuf/meta_graph.proto\", which is not imported by \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\".  To use it here, please add the necessary import.\r\n  tensorflow.OpInfo.outputs: \"tensorflow.TensorInfo\" seems to be defined in \"tensorflow/core/protobuf/meta_graph.proto\", which is not imported by \"tensorflow/contrib/tensorboard/plugins/trace/trace_info.proto\".  To use it here, please add the necessary import.\r\n\r\n```\r\n\r\n`__git_version__: \"b'0.12.0-rc0-437-g6d63f67'\"` ( pulled from head Dec 6th 5pm)\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/415881743", "html_url": "https://github.com/tensorflow/tensorflow/issues/18731#issuecomment-415881743", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18731", "id": 415881743, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTg4MTc0Mw==", "user": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-24T21:02:41Z", "updated_at": "2018-08-24T21:02:41Z", "author_association": "CONTRIBUTOR", "body_html": "<p>TensorFlow Lite doesn't support control flow ops yet (e.g. Switch, Merge, Cond...etc). The team is looking into broadening the support.</p>\n<p>It's not possible to make Switch/Merge work properly with dynamic RNNs.</p>\n<p>TFLite already implemented fused RNN / LSTM ops. However, there is no easy way to produce these TFLite ops through our converter. The team is currently working on a better way to convert these ops. Stay tuned.</p>\n<p>====</p>\n<blockquote>\n<p>TOCO is expecting a Switch node to be followed by a Merge node, but that doesn't seem to be the case in your model.</p>\n</blockquote>\n<p>In addition, TOCO can only resolve Switch/Merge in a very specific case (the predicate of Switch need to be constant).<br>\nTherefore dynamic RNN won't work, because it requires real control flow when running the model.</p>\n<blockquote>\n<p>I was looking to the file \"tensorflow/contrib/lite/toco/model.h\" for find \"kTensorflowMerge\", but it doesn't even exist... :D</p>\n</blockquote>\n<p>It seems kTensorflowMerge was renamed to kMerge.</p>", "body_text": "TensorFlow Lite doesn't support control flow ops yet (e.g. Switch, Merge, Cond...etc). The team is looking into broadening the support.\nIt's not possible to make Switch/Merge work properly with dynamic RNNs.\nTFLite already implemented fused RNN / LSTM ops. However, there is no easy way to produce these TFLite ops through our converter. The team is currently working on a better way to convert these ops. Stay tuned.\n====\n\nTOCO is expecting a Switch node to be followed by a Merge node, but that doesn't seem to be the case in your model.\n\nIn addition, TOCO can only resolve Switch/Merge in a very specific case (the predicate of Switch need to be constant).\nTherefore dynamic RNN won't work, because it requires real control flow when running the model.\n\nI was looking to the file \"tensorflow/contrib/lite/toco/model.h\" for find \"kTensorflowMerge\", but it doesn't even exist... :D\n\nIt seems kTensorflowMerge was renamed to kMerge.", "body": "TensorFlow Lite doesn't support control flow ops yet (e.g. Switch, Merge, Cond...etc). The team is looking into broadening the support.\r\n\r\nIt's not possible to make Switch/Merge work properly with dynamic RNNs.\r\n\r\nTFLite already implemented fused RNN / LSTM ops. However, there is no easy way to produce these TFLite ops through our converter. The team is currently working on a better way to convert these ops. Stay tuned.\r\n\r\n====\r\n\r\n> TOCO is expecting a Switch node to be followed by a Merge node, but that doesn't seem to be the case in your model.\r\n\r\nIn addition, TOCO can only resolve Switch/Merge in a very specific case (the predicate of Switch need to be constant). \r\nTherefore dynamic RNN won't work, because it requires real control flow when running the model. \r\n\r\n> I was looking to the file \"tensorflow/contrib/lite/toco/model.h\" for find \"kTensorflowMerge\", but it doesn't even exist... :D\r\n\r\nIt seems kTensorflowMerge was renamed to kMerge. \r\n"}
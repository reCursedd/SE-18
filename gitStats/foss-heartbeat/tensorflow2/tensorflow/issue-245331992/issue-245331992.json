{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11742", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11742/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11742/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11742/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11742", "id": 245331992, "node_id": "MDU6SXNzdWUyNDUzMzE5OTI=", "number": 11742, "title": "Docker :: Restoring from a model outside the container returns FailedPreconditionError", "user": {"login": "ilchemla", "id": 16705918, "node_id": "MDQ6VXNlcjE2NzA1OTE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16705918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilchemla", "html_url": "https://github.com/ilchemla", "followers_url": "https://api.github.com/users/ilchemla/followers", "following_url": "https://api.github.com/users/ilchemla/following{/other_user}", "gists_url": "https://api.github.com/users/ilchemla/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilchemla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilchemla/subscriptions", "organizations_url": "https://api.github.com/users/ilchemla/orgs", "repos_url": "https://api.github.com/users/ilchemla/repos", "events_url": "https://api.github.com/users/ilchemla/events{/privacy}", "received_events_url": "https://api.github.com/users/ilchemla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-07-25T09:02:20Z", "updated_at": "2017-07-26T06:54:59Z", "closed_at": "2017-07-26T06:54:59Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution</strong>: Docker Tensorflow CPU Image</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.2.1</li>\n<li><strong>Python version</strong>: Python 2.7.12</li>\n</ul>\n<h3>Source code / logs</h3>\n<div class=\"highlight highlight-source-python\"><pre>saver <span class=\"pl-k\">=</span> tf.train.Saver()\n<span class=\"pl-k\">with</span> tf.Session(<span class=\"pl-v\">config</span><span class=\"pl-k\">=</span>config) <span class=\"pl-k\">as</span> sess:\n    saver.restore(sess, checkpoint_file)</pre></div>\n<h3>The Issue</h3>\n<p>I'm binding a host <code>models</code> directory to <code>/data/models</code> inside the container.<br>\nWhen trying to restore, I got a <code>Failed precondition</code><br>\nEverything's okay when I'm not using Docker<br>\nEverything's okay when I'm building a Docker Image with the models already copied into it (but not flexible)</p>\n<pre><code>INFO:tensorflow:Restoring parameters from /data/models/OSVOS_parent.ckpt-50000\n2017-07-25 08:53:42.434679: W tensorflow/core/framework/op_kernel.cc:1158] Failed precondition: /data/models/OSVOS_parent.ckpt-50000.index\n///\ntensorflow.python.framework.errors_impl.FailedPreconditionError: /data/models/OSVOS_parent.ckpt-50000.index\n\t [[Node: save/RestoreV2_20 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save/Const_0_0, save/RestoreV2_20/tensor_names, save/RestoreV2_20/shape_and_slices)]]\n\nFailedPreconditionError (see above for traceback): /data/models/OSVOS_parent.ckpt-50000.index\n\t [[Node: save/RestoreV2_20 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save/Const_0_0, save/RestoreV2_20/tensor_names, save/RestoreV2_20/shape_and_slices)]]\n</code></pre>", "body_text": "System information\n\nOS Platform and Distribution: Docker Tensorflow CPU Image\nTensorFlow version (use command below): 1.2.1\nPython version: Python 2.7.12\n\nSource code / logs\nsaver = tf.train.Saver()\nwith tf.Session(config=config) as sess:\n    saver.restore(sess, checkpoint_file)\nThe Issue\nI'm binding a host models directory to /data/models inside the container.\nWhen trying to restore, I got a Failed precondition\nEverything's okay when I'm not using Docker\nEverything's okay when I'm building a Docker Image with the models already copied into it (but not flexible)\nINFO:tensorflow:Restoring parameters from /data/models/OSVOS_parent.ckpt-50000\n2017-07-25 08:53:42.434679: W tensorflow/core/framework/op_kernel.cc:1158] Failed precondition: /data/models/OSVOS_parent.ckpt-50000.index\n///\ntensorflow.python.framework.errors_impl.FailedPreconditionError: /data/models/OSVOS_parent.ckpt-50000.index\n\t [[Node: save/RestoreV2_20 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save/Const_0_0, save/RestoreV2_20/tensor_names, save/RestoreV2_20/shape_and_slices)]]\n\nFailedPreconditionError (see above for traceback): /data/models/OSVOS_parent.ckpt-50000.index\n\t [[Node: save/RestoreV2_20 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save/Const_0_0, save/RestoreV2_20/tensor_names, save/RestoreV2_20/shape_and_slices)]]", "body": "### System information\r\n- **OS Platform and Distribution**: Docker Tensorflow CPU Image\r\n- **TensorFlow version (use command below)**: 1.2.1\r\n- **Python version**: Python 2.7.12\r\n\r\n### Source code / logs\r\n```python\r\nsaver = tf.train.Saver()\r\nwith tf.Session(config=config) as sess:\r\n    saver.restore(sess, checkpoint_file)\r\n```\r\n\r\n### The Issue\r\nI'm binding a host `models` directory to `/data/models` inside the container.\r\nWhen trying to restore, I got a `Failed precondition`\r\nEverything's okay when I'm not using Docker\r\nEverything's okay when I'm building a Docker Image with the models already copied into it (but not flexible)\r\n\r\n```\r\nINFO:tensorflow:Restoring parameters from /data/models/OSVOS_parent.ckpt-50000\r\n2017-07-25 08:53:42.434679: W tensorflow/core/framework/op_kernel.cc:1158] Failed precondition: /data/models/OSVOS_parent.ckpt-50000.index\r\n///\r\ntensorflow.python.framework.errors_impl.FailedPreconditionError: /data/models/OSVOS_parent.ckpt-50000.index\r\n\t [[Node: save/RestoreV2_20 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save/Const_0_0, save/RestoreV2_20/tensor_names, save/RestoreV2_20/shape_and_slices)]]\r\n\r\nFailedPreconditionError (see above for traceback): /data/models/OSVOS_parent.ckpt-50000.index\r\n\t [[Node: save/RestoreV2_20 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_arg_save/Const_0_0, save/RestoreV2_20/tensor_names, save/RestoreV2_20/shape_and_slices)]]\r\n```"}
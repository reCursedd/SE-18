{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20589", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20589/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20589/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20589/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20589", "id": 338918115, "node_id": "MDU6SXNzdWUzMzg5MTgxMTU=", "number": 20589, "title": "Can't restore saved model in windows 10", "user": {"login": "venkatrebba", "id": 32699857, "node_id": "MDQ6VXNlcjMyNjk5ODU3", "avatar_url": "https://avatars2.githubusercontent.com/u/32699857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/venkatrebba", "html_url": "https://github.com/venkatrebba", "followers_url": "https://api.github.com/users/venkatrebba/followers", "following_url": "https://api.github.com/users/venkatrebba/following{/other_user}", "gists_url": "https://api.github.com/users/venkatrebba/gists{/gist_id}", "starred_url": "https://api.github.com/users/venkatrebba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/venkatrebba/subscriptions", "organizations_url": "https://api.github.com/users/venkatrebba/orgs", "repos_url": "https://api.github.com/users/venkatrebba/repos", "events_url": "https://api.github.com/users/venkatrebba/events{/privacy}", "received_events_url": "https://api.github.com/users/venkatrebba/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-07-06T12:19:22Z", "updated_at": "2018-10-10T10:03:52Z", "closed_at": "2018-10-10T10:03:52Z", "author_association": "NONE", "body_html": "<p>I have trained a model in ubuntu (16.04) machine and when I tried that model in different ubuntu (16.04), model is able to predict. But the same thing is not happening in windows(10).</p>\n<p>Configurations in both ubuntu and windows:</p>\n<ol>\n<li>python - 3.6.5</li>\n<li>Tensorflow - 1.8.0</li>\n</ol>\n<p>We have used Estimator api, I am seeing error logs in estimator.py only.<br>\nError Log:<br>\nCaused by op 'save/RestoreV2', defined at:<br>\nFile \"test_model.py\", line 70, in <br>\nfor i in predictions:<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\estimator\\estimator.py\", line 507, in predict<br>\n,hooks=all_hooks) as mon_sess:<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 816, in <strong>init</strong><br>\nstop_grace_period_secs=stop_grace_period_secs)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 539, in <strong>init</strong><br>\nself._sess = _RecoverableSession(self._coordinated_creator)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 1002, in <strong>init</strong><br>\n_WrappedSession.<strong>init</strong>(self, self._create_session())<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 1007, in _create_session<br>\nreturn self._sess_creator.create_session()<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 696, in create_session<br>\nself.tf_sess = self._session_creator.create_session()<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 458, in create_session<br>\nself._scaffold.finalize()<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 212, in finalize<br>\nself._saver = training_saver._get_saver_or_default()  # pylint: disable=protected-access<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 910, in _get_saver_or_default<br>\nsaver = Saver(sharded=True, allow_empty=True)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1338, in <strong>init</strong><br>\nself.build()<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1347, in build<br>\nself._build(self._filename, build_save=True, build_restore=True)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1384, in _build<br>\nbuild_save=build_save, build_restore=build_restore)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 829, in _build_internal<br>\nrestore_sequentially, reshape)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 525, in _AddShardedRestoreOps<br>\nname=\"restore_shard\"))<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 472, in _AddRestoreOps<br>\nrestore_sequentially)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 886, in bulk_restore<br>\nreturn io_ops.restore_v2(filename_tensor, names, slices, dtypes)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\gen_io_ops.py\", line 1546, in restore_v2<br>\nshape_and_slices=shape_and_slices, dtypes=dtypes, name=name)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper<br>\nop_def=op_def)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3392, in create_op<br>\nop_def=op_def)<br>\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1718, in <strong>init</strong><br>\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access</p>\n<p>OutOfRangeError (see above for traceback): Read fewer bytes than requested<br>\n[[Node: save/RestoreV2 = RestoreV2[dtypes=[DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](_arg_save/Const_0_0, save/RestoreV2/tensor_names, save/RestoreV2/shape_and_slices)]]</p>\n<p>Please help me.</p>", "body_text": "I have trained a model in ubuntu (16.04) machine and when I tried that model in different ubuntu (16.04), model is able to predict. But the same thing is not happening in windows(10).\nConfigurations in both ubuntu and windows:\n\npython - 3.6.5\nTensorflow - 1.8.0\n\nWe have used Estimator api, I am seeing error logs in estimator.py only.\nError Log:\nCaused by op 'save/RestoreV2', defined at:\nFile \"test_model.py\", line 70, in \nfor i in predictions:\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\estimator\\estimator.py\", line 507, in predict\n,hooks=all_hooks) as mon_sess:\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 816, in init\nstop_grace_period_secs=stop_grace_period_secs)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 539, in init\nself._sess = _RecoverableSession(self._coordinated_creator)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 1002, in init\n_WrappedSession.init(self, self._create_session())\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 1007, in _create_session\nreturn self._sess_creator.create_session()\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 696, in create_session\nself.tf_sess = self._session_creator.create_session()\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 458, in create_session\nself._scaffold.finalize()\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 212, in finalize\nself._saver = training_saver._get_saver_or_default()  # pylint: disable=protected-access\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 910, in _get_saver_or_default\nsaver = Saver(sharded=True, allow_empty=True)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1338, in init\nself.build()\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1347, in build\nself._build(self._filename, build_save=True, build_restore=True)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1384, in _build\nbuild_save=build_save, build_restore=build_restore)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 829, in _build_internal\nrestore_sequentially, reshape)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 525, in _AddShardedRestoreOps\nname=\"restore_shard\"))\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 472, in _AddRestoreOps\nrestore_sequentially)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 886, in bulk_restore\nreturn io_ops.restore_v2(filename_tensor, names, slices, dtypes)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\gen_io_ops.py\", line 1546, in restore_v2\nshape_and_slices=shape_and_slices, dtypes=dtypes, name=name)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper\nop_def=op_def)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3392, in create_op\nop_def=op_def)\nFile \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1718, in init\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\nOutOfRangeError (see above for traceback): Read fewer bytes than requested\n[[Node: save/RestoreV2 = RestoreV2[dtypes=[DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](_arg_save/Const_0_0, save/RestoreV2/tensor_names, save/RestoreV2/shape_and_slices)]]\nPlease help me.", "body": "I have trained a model in ubuntu (16.04) machine and when I tried that model in different ubuntu (16.04), model is able to predict. But the same thing is not happening in windows(10).\r\n\r\nConfigurations in both ubuntu and windows:\r\n1. python - 3.6.5\r\n2. Tensorflow - 1.8.0\r\n\r\nWe have used Estimator api, I am seeing error logs in estimator.py only.\r\nError Log:\r\nCaused by op 'save/RestoreV2', defined at:\r\n  File \"test_model.py\", line 70, in <module>\r\n    for i in predictions:\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\estimator\\estimator.py\", line 507, in predict\r\n    ,hooks=all_hooks) as mon_sess:\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 816, in __init__\r\n    stop_grace_period_secs=stop_grace_period_secs)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 539, in __init__\r\n    self._sess = _RecoverableSession(self._coordinated_creator)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 1002, in __init__\r\n    _WrappedSession.__init__(self, self._create_session())\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 1007, in _create_session\r\n    return self._sess_creator.create_session()\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 696, in create_session\r\n    self.tf_sess = self._session_creator.create_session()\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 458, in create_session\r\n    self._scaffold.finalize()\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 212, in finalize\r\n    self._saver = training_saver._get_saver_or_default()  # pylint: disable=protected-access\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 910, in _get_saver_or_default\r\n    saver = Saver(sharded=True, allow_empty=True)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1338, in __init__\r\n    self.build()\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1347, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1384, in _build\r\n    build_save=build_save, build_restore=build_restore)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 829, in _build_internal\r\n    restore_sequentially, reshape)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 525, in _AddShardedRestoreOps\r\n    name=\"restore_shard\"))\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 472, in _AddRestoreOps\r\n    restore_sequentially)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 886, in bulk_restore\r\n    return io_ops.restore_v2(filename_tensor, names, slices, dtypes)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\gen_io_ops.py\", line 1546, in restore_v2\r\n    shape_and_slices=shape_and_slices, dtypes=dtypes, name=name)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3392, in create_op\r\n    op_def=op_def)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1718, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nOutOfRangeError (see above for traceback): Read fewer bytes than requested\r\n         [[Node: save/RestoreV2 = RestoreV2[dtypes=[DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](_arg_save/Const_0_0, save/RestoreV2/tensor_names, save/RestoreV2/shape_and_slices)]]\r\n\r\nPlease help me."}
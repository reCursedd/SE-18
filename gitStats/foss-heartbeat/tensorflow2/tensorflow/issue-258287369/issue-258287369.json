{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13096", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13096/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13096/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13096/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13096", "id": 258287369, "node_id": "MDU6SXNzdWUyNTgyODczNjk=", "number": 13096, "title": "No OpKernel was registered to support Op 'QuantizeV2'", "user": {"login": "eyaler", "id": 4436747, "node_id": "MDQ6VXNlcjQ0MzY3NDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/4436747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eyaler", "html_url": "https://github.com/eyaler", "followers_url": "https://api.github.com/users/eyaler/followers", "following_url": "https://api.github.com/users/eyaler/following{/other_user}", "gists_url": "https://api.github.com/users/eyaler/gists{/gist_id}", "starred_url": "https://api.github.com/users/eyaler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eyaler/subscriptions", "organizations_url": "https://api.github.com/users/eyaler/orgs", "repos_url": "https://api.github.com/users/eyaler/repos", "events_url": "https://api.github.com/users/eyaler/events{/privacy}", "received_events_url": "https://api.github.com/users/eyaler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-09-17T08:06:29Z", "updated_at": "2018-09-17T05:12:11Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I was able to build tf 1.3 quantize_graph on windows 10 64 using bazel 0.53 and cuda 8 (i could not build it without cuda). when i try to run it i get:<br>\nNo OpKernel was registered to support Op 'QuantizeV2' with these attrs.</p>\n<p>bazel-bin\\tensorflow\\tools\\quantization\\quantize_graph --input d:/export/saved_model.pb --output_node_names my_output --output d:/export/saved_model_quant.pb --mode=eightbit</p>\n<p>2017-09-17 10:48:28.292364: W C:\\tools\\msys64\\tmp_bazel_user\\8rsmy-kr\\execroot\\org_tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-09-17 10:48:28.292529: W C:\\tools\\msys64\\tmp_bazel_user\\8rsmy-kr\\execroot\\org_tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.<br>\nTraceback (most recent call last):<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1327, in _do_call<br>\nreturn fn(*args)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1297, in _run_fn<br>\nself._extend_graph()<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1358, in _extend_graph<br>\nself._session, graph_def.SerializeToString(), status)<br>\nFile \"C:\\Anaconda3\\lib\\contextlib.py\", line 88, in <strong>exit</strong><br>\nnext(self.gen)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status<br>\npywrap_tensorflow.TF_GetCode(status))<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:<br>\n</p>\n<pre><code>     [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]\n</code></pre>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>Traceback (most recent call last):<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1301, in <br>\napp.run()<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\platform\\app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1292, in main<br>\noutput_graph = rewriter.rewrite(FLAGS.output_node_names.split(\",\"))<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 420, in rewrite<br>\nself.eightbitize_nodes_recursively(output_node)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively<br>\nself.eightbitize_nodes_recursively(input_node)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively<br>\nself.eightbitize_nodes_recursively(input_node)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively<br>\nself.eightbitize_nodes_recursively(input_node)<br>\n[Previous line repeated 90 more times]<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 632, in eightbitize_nodes_recursively<br>\nfor n in quantize_weight_eightbit(current_node, b\"MIN_FIRST\"):<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 299, in quantize_weight_eightbit<br>\nquint8_tensor = quantize_op[0].eval()<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 541, in eval<br>\nreturn _eval_using_default_session(self, feed_dict, self.graph, session)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 4085, in _eval_using_default_session<br>\nreturn session.run(tensors, feed_dict)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 895, in run<br>\nrun_metadata_ptr)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1124, in _run<br>\nfeed_dict_tensor, options, run_metadata)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1321, in _do_run<br>\noptions, run_metadata)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1340, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:<br>\n</p>\n<pre><code>     [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]\n</code></pre>\n<p>Caused by op 'QuantizeV2', defined at:<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1301, in <br>\napp.run()<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\platform\\app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1292, in main<br>\noutput_graph = rewriter.rewrite(FLAGS.output_node_names.split(\",\"))<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 420, in rewrite<br>\nself.eightbitize_nodes_recursively(output_node)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively<br>\nself.eightbitize_nodes_recursively(input_node)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively<br>\nself.eightbitize_nodes_recursively(input_node)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively<br>\nself.eightbitize_nodes_recursively(input_node)<br>\n[Previous line repeated 90 more times]<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 632, in eightbitize_nodes_recursively<br>\nfor n in quantize_weight_eightbit(current_node, b\"MIN_FIRST\"):<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 298, in quantize_weight_eightbit<br>\nmode=quantization_mode)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\ops\\gen_array_ops.py\", line 2381, in quantize_v2<br>\nmode=mode, name=name)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op<br>\nop_def=op_def)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 2630, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 1204, in <strong>init</strong><br>\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access</p>\n<p>InvalidArgumentError (see above for traceback): No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:<br>\n</p>\n<pre><code>     [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]\n</code></pre>", "body_text": "I was able to build tf 1.3 quantize_graph on windows 10 64 using bazel 0.53 and cuda 8 (i could not build it without cuda). when i try to run it i get:\nNo OpKernel was registered to support Op 'QuantizeV2' with these attrs.\nbazel-bin\\tensorflow\\tools\\quantization\\quantize_graph --input d:/export/saved_model.pb --output_node_names my_output --output d:/export/saved_model_quant.pb --mode=eightbit\n2017-09-17 10:48:28.292364: W C:\\tools\\msys64\\tmp_bazel_user\\8rsmy-kr\\execroot\\org_tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\n2017-09-17 10:48:28.292529: W C:\\tools\\msys64\\tmp_bazel_user\\8rsmy-kr\\execroot\\org_tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nTraceback (most recent call last):\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1327, in _do_call\nreturn fn(*args)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1297, in _run_fn\nself._extend_graph()\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1358, in _extend_graph\nself._session, graph_def.SerializeToString(), status)\nFile \"C:\\Anaconda3\\lib\\contextlib.py\", line 88, in exit\nnext(self.gen)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\npywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:\n\n     [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]\n\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1301, in \napp.run()\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\platform\\app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1292, in main\noutput_graph = rewriter.rewrite(FLAGS.output_node_names.split(\",\"))\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 420, in rewrite\nself.eightbitize_nodes_recursively(output_node)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\nself.eightbitize_nodes_recursively(input_node)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\nself.eightbitize_nodes_recursively(input_node)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\nself.eightbitize_nodes_recursively(input_node)\n[Previous line repeated 90 more times]\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 632, in eightbitize_nodes_recursively\nfor n in quantize_weight_eightbit(current_node, b\"MIN_FIRST\"):\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 299, in quantize_weight_eightbit\nquint8_tensor = quantize_op[0].eval()\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 541, in eval\nreturn _eval_using_default_session(self, feed_dict, self.graph, session)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 4085, in _eval_using_default_session\nreturn session.run(tensors, feed_dict)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 895, in run\nrun_metadata_ptr)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1124, in _run\nfeed_dict_tensor, options, run_metadata)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1321, in _do_run\noptions, run_metadata)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1340, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:\n\n     [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]\n\nCaused by op 'QuantizeV2', defined at:\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1301, in \napp.run()\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\platform\\app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1292, in main\noutput_graph = rewriter.rewrite(FLAGS.output_node_names.split(\",\"))\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 420, in rewrite\nself.eightbitize_nodes_recursively(output_node)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\nself.eightbitize_nodes_recursively(input_node)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\nself.eightbitize_nodes_recursively(input_node)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\nself.eightbitize_nodes_recursively(input_node)\n[Previous line repeated 90 more times]\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 632, in eightbitize_nodes_recursively\nfor n in quantize_weight_eightbit(current_node, b\"MIN_FIRST\"):\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 298, in quantize_weight_eightbit\nmode=quantization_mode)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\ops\\gen_array_ops.py\", line 2381, in quantize_v2\nmode=mode, name=name)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op\nop_def=op_def)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 2630, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 1204, in init\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\nInvalidArgumentError (see above for traceback): No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:\n\n     [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]", "body": "I was able to build tf 1.3 quantize_graph on windows 10 64 using bazel 0.53 and cuda 8 (i could not build it without cuda). when i try to run it i get:\r\nNo OpKernel was registered to support Op 'QuantizeV2' with these attrs.\r\n\r\n\r\nbazel-bin\\tensorflow\\tools\\quantization\\quantize_graph --input d:/export/saved_model.pb --output_node_names my_output --output d:/export/saved_model_quant.pb --mode=eightbit\r\n\r\n2017-09-17 10:48:28.292364: W C:\\tools\\msys64\\tmp\\_bazel_user\\8rsmy-kr\\execroot\\org_tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-09-17 10:48:28.292529: W C:\\tools\\msys64\\tmp\\_bazel_user\\8rsmy-kr\\execroot\\org_tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\nTraceback (most recent call last):\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1327, in _do_call\r\n    return fn(*args)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1297, in _run_fn\r\n    self._extend_graph()\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1358, in _extend_graph\r\n    self._session, graph_def.SerializeToString(), status)\r\n  File \"C:\\Anaconda3\\lib\\contextlib.py\", line 88, in __exit__\r\n    next(self.gen)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n  <no registered kernels>\r\n\r\n         [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1301, in <module>\r\n    app.run()\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1292, in main\r\n    output_graph = rewriter.rewrite(FLAGS.output_node_names.split(\",\"))\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 420, in rewrite\r\n    self.eightbitize_nodes_recursively(output_node)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\r\n    self.eightbitize_nodes_recursively(input_node)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\r\n    self.eightbitize_nodes_recursively(input_node)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\r\n    self.eightbitize_nodes_recursively(input_node)\r\n  [Previous line repeated 90 more times]\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 632, in eightbitize_nodes_recursively\r\n    for n in quantize_weight_eightbit(current_node, b\"MIN_FIRST\"):\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 299, in quantize_weight_eightbit\r\n    quint8_tensor = quantize_op[0].eval()\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 541, in eval\r\n    return _eval_using_default_session(self, feed_dict, self.graph, session)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 4085, in _eval_using_default_session\r\n    return session.run(tensors, feed_dict)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 895, in run\r\n    run_metadata_ptr)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1124, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1321, in _do_run\r\n    options, run_metadata)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\client\\session.py\", line 1340, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n  <no registered kernels>\r\n\r\n         [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]\r\n\r\nCaused by op 'QuantizeV2', defined at:\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1301, in <module>\r\n    app.run()\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 1292, in main\r\n    output_graph = rewriter.rewrite(FLAGS.output_node_names.split(\",\"))\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 420, in rewrite\r\n    self.eightbitize_nodes_recursively(output_node)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\r\n    self.eightbitize_nodes_recursively(input_node)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\r\n    self.eightbitize_nodes_recursively(input_node)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 600, in eightbitize_nodes_recursively\r\n    self.eightbitize_nodes_recursively(input_node)\r\n  [Previous line repeated 90 more times]\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 632, in eightbitize_nodes_recursively\r\n    for n in quantize_weight_eightbit(current_node, b\"MIN_FIRST\"):\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\tools\\quantization\\quantize_graph.py\", line 298, in quantize_weight_eightbit\r\n    mode=quantization_mode)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\ops\\gen_array_ops.py\", line 2381, in quantize_v2\r\n    mode=mode, name=name)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op\r\n    op_def=op_def)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 2630, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"\\\\?\\C:\\Users\\user\\AppData\\Local\\Temp\\Bazel.runfiles_5goewho4\\runfiles\\org_tensorflow\\tensorflow\\python\\framework\\ops.py\", line 1204, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nInvalidArgumentError (see above for traceback): No OpKernel was registered to support Op 'QuantizeV2' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n  <no registered kernels>\r\n\r\n         [[Node: QuantizeV2 = QuantizeV2[T=DT_QUINT8, mode=\"MIN_FIRST\"](QuantizeV2/input, QuantizeV2/min_range, QuantizeV2/max_range)]]\r\n"}
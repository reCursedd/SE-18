{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/360981087", "html_url": "https://github.com/tensorflow/tensorflow/pull/16368#issuecomment-360981087", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16368", "id": 360981087, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDk4MTA4Nw==", "user": {"login": "dantkz", "id": 5220571, "node_id": "MDQ6VXNlcjUyMjA1NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5220571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dantkz", "html_url": "https://github.com/dantkz", "followers_url": "https://api.github.com/users/dantkz/followers", "following_url": "https://api.github.com/users/dantkz/following{/other_user}", "gists_url": "https://api.github.com/users/dantkz/gists{/gist_id}", "starred_url": "https://api.github.com/users/dantkz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dantkz/subscriptions", "organizations_url": "https://api.github.com/users/dantkz/orgs", "repos_url": "https://api.github.com/users/dantkz/repos", "events_url": "https://api.github.com/users/dantkz/events{/privacy}", "received_events_url": "https://api.github.com/users/dantkz/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-27T12:17:52Z", "updated_at": "2018-01-27T12:18:16Z", "author_association": "CONTRIBUTOR", "body_html": "<blockquote>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5220571\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dantkz\">@dantkz</a> Shouldn't this line make it use the GPU?<br>\nwith self.test_session(use_gpu=True):</p>\n<p>Doesn't seem to crash there...</p>\n</blockquote>\n<p>I think <code>(use_gpu=True)</code> makes the op run on GPU only if the corresponding GPU kernel exists. There is a separate flag <code>(force_gpu=True)</code>.<br>\nIn the test code, the inputs are ints, and master branch only has CPU kernel for ints. Again, I'm basing this on the master branch from a while back.</p>", "body_text": "@dantkz Shouldn't this line make it use the GPU?\nwith self.test_session(use_gpu=True):\nDoesn't seem to crash there...\n\nI think (use_gpu=True) makes the op run on GPU only if the corresponding GPU kernel exists. There is a separate flag (force_gpu=True).\nIn the test code, the inputs are ints, and master branch only has CPU kernel for ints. Again, I'm basing this on the master branch from a while back.", "body": "> @dantkz Shouldn't this line make it use the GPU?\r\n> with self.test_session(use_gpu=True):\r\n> \r\n> Doesn't seem to crash there...\r\n\r\nI think `(use_gpu=True)` makes the op run on GPU only if the corresponding GPU kernel exists. There is a separate flag `(force_gpu=True)`.\r\nIn the test code, the inputs are ints, and master branch only has CPU kernel for ints. Again, I'm basing this on the master branch from a while back.\r\n"}
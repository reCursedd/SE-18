{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/336049401", "html_url": "https://github.com/tensorflow/tensorflow/issues/13546#issuecomment-336049401", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13546", "id": 336049401, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjA0OTQwMQ==", "user": {"login": "netheril96", "id": 836839, "node_id": "MDQ6VXNlcjgzNjgzOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/836839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/netheril96", "html_url": "https://github.com/netheril96", "followers_url": "https://api.github.com/users/netheril96/followers", "following_url": "https://api.github.com/users/netheril96/following{/other_user}", "gists_url": "https://api.github.com/users/netheril96/gists{/gist_id}", "starred_url": "https://api.github.com/users/netheril96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/netheril96/subscriptions", "organizations_url": "https://api.github.com/users/netheril96/orgs", "repos_url": "https://api.github.com/users/netheril96/repos", "events_url": "https://api.github.com/users/netheril96/events{/privacy}", "received_events_url": "https://api.github.com/users/netheril96/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-12T07:50:31Z", "updated_at": "2017-10-12T07:50:31Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=170179\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jhseu\">@jhseu</a></p>\n<p>It makes a big difference in practice. I don't know what you mean by \"minimal compared to activations\", but I know about the checkpoint size. Without the momentum, one checkpoint consists of network parameters and the moving average of squared gradients, so double the size of parameters. With the momentum, triple. Hence the increase is 50%. That is 50% more traffic when transferring checkpoints over the Internet, and 50% more disk usage when storing them. In fact, when I worked as an intern at Google, our group frequently had Colossus quota alerts resulting from saving many checkpoints, and this dramatic increase makes the matter much worse.</p>\n<p>Copying the optimizer and removing the momentum part does not work, because <code>ApplyRMSProp</code> family of operations requires the existence of the extra variables. And if it would work, it would be better for user experience if Tensorflow does it automatically, since, as I have stressed multiple times, zero momentum is the <em>dominate</em> use case, and therefore worth optimizing for.</p>", "body_text": "@jhseu\nIt makes a big difference in practice. I don't know what you mean by \"minimal compared to activations\", but I know about the checkpoint size. Without the momentum, one checkpoint consists of network parameters and the moving average of squared gradients, so double the size of parameters. With the momentum, triple. Hence the increase is 50%. That is 50% more traffic when transferring checkpoints over the Internet, and 50% more disk usage when storing them. In fact, when I worked as an intern at Google, our group frequently had Colossus quota alerts resulting from saving many checkpoints, and this dramatic increase makes the matter much worse.\nCopying the optimizer and removing the momentum part does not work, because ApplyRMSProp family of operations requires the existence of the extra variables. And if it would work, it would be better for user experience if Tensorflow does it automatically, since, as I have stressed multiple times, zero momentum is the dominate use case, and therefore worth optimizing for.", "body": "@jhseu \r\n\r\nIt makes a big difference in practice. I don't know what you mean by \"minimal compared to activations\", but I know about the checkpoint size. Without the momentum, one checkpoint consists of network parameters and the moving average of squared gradients, so double the size of parameters. With the momentum, triple. Hence the increase is 50%. That is 50% more traffic when transferring checkpoints over the Internet, and 50% more disk usage when storing them. In fact, when I worked as an intern at Google, our group frequently had Colossus quota alerts resulting from saving many checkpoints, and this dramatic increase makes the matter much worse.\r\n\r\nCopying the optimizer and removing the momentum part does not work, because `ApplyRMSProp` family of operations requires the existence of the extra variables. And if it would work, it would be better for user experience if Tensorflow does it automatically, since, as I have stressed multiple times, zero momentum is the *dominate* use case, and therefore worth optimizing for."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9178", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9178/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9178/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9178/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9178", "id": 221447051, "node_id": "MDU6SXNzdWUyMjE0NDcwNTE=", "number": 9178, "title": "Unable to use ci_build to build tensorflow", "user": {"login": "nqbao", "id": 177742, "node_id": "MDQ6VXNlcjE3Nzc0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/177742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nqbao", "html_url": "https://github.com/nqbao", "followers_url": "https://api.github.com/users/nqbao/followers", "following_url": "https://api.github.com/users/nqbao/following{/other_user}", "gists_url": "https://api.github.com/users/nqbao/gists{/gist_id}", "starred_url": "https://api.github.com/users/nqbao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nqbao/subscriptions", "organizations_url": "https://api.github.com/users/nqbao/orgs", "repos_url": "https://api.github.com/users/nqbao/repos", "events_url": "https://api.github.com/users/nqbao/events{/privacy}", "received_events_url": "https://api.github.com/users/nqbao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-13T03:12:17Z", "updated_at": "2017-04-13T17:12:13Z", "closed_at": "2017-04-13T05:23:59Z", "author_association": "NONE", "body_html": "<h3>You must complete this information or else your issue will be closed</h3>\n<ul>\n<li><em>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)?</em>: No</li>\n<li><em>TensorFlow installed from (source or binary)?</em>: Source</li>\n<li><em>TensorFlow version</em>: <code>master</code> and  <code>f8dce81aeaff40dc78d398741854ad8766806f91</code></li>\n<li><em>Bazel version (if compiling from source)</em>: 0.4.5</li>\n<li><em>CUDA/cuDNN version</em>: N/A</li>\n<li><em>GPU Model and Memory</em>: N/A</li>\n<li><em>Exact command to reproduce</em>:</li>\n</ul>\n<p><code>tensorflow/tools/ci_build/ci_build.sh CPU bazel test //tensorflow/...</code></p>\n<p>Note: make sure you run with a clean state machine</p>\n<h3>Describe the problem clearly</h3>\n<p>I'm trying to use ci_build tool to build tensorflow from source, but I am always got the error at step <code>/install/install_buildifier.sh</code></p>\n<pre><code>WARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.build/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\n____Loading package: buildifier\n____Loading package: @bazel_tools//tools/cpp\n____Loading package: @bazel_tools//tools/jdk\n____Loading package: @local_config_xcode//\n____Loading package: @local_jdk//\n____Loading package: @local_config_cc//\n____Loading complete.  Analyzing...\n____Loading package:\n____Loading package: @bazel_tools//tools/genrule\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 4,184,939 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 8,690,539 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 14,736,235 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 19,537,920 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 24,485,888 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 29,597,696 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 34,791,424 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 39,903,232 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 45,064,192 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 50,339,840 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 55,648,256 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 61,497,344 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 67,166,208 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 73,048,064 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 78,733,312 bytes\n____Loading package: @io_bazel_rules_go_toolchain//\nERROR: /buildifier/build/BUILD.bazel:4:1: no such package '@org_golang_x_tools//cmd/goyacc': no such package '@io_bazel_rules_go_repository_tools//': Traceback (most recent call last):\n    File \"/root/.cache/bazel/_bazel_root/972a279007c925820266f3ac7b1d6afd/external/io_bazel_rules_go/go/private/go_repositories.bzl\", line 85\n        _fetch_repository_tools_deps(ctx, goroot, gopath)\n    File \"/root/.cache/bazel/_bazel_root/972a279007c925820266f3ac7b1d6afd/external/io_bazel_rules_go/go/private/go_repositories.bzl\", line 54, in _fetch_repository_tools_deps\n        ctx.download_and_extract('%s/archive/%s.zip' % (dep.repo,...), &lt;4 more arguments&gt;)\njava.io.IOException: Prefix buildifier-4190564903f61ddc94bcfda3dc2cdd32d4b330e5 was given, but not found in the zip and referenced by '//build:parse.y.go_yacc'.\nERROR: Analysis of target '//buildifier:buildifier' failed; build aborted.\n____Elapsed time: 10.455s\n</code></pre>\n<p>I did google around and may be this is root cause <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"220036739\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/bazelbuild/rules_go/issues/361\" data-hovercard-type=\"issue\" data-hovercard-url=\"/bazelbuild/rules_go/issues/361/hovercard\" href=\"https://github.com/bazelbuild/rules_go/issues/361\">bazelbuild/rules_go#361</a></p>", "body_text": "You must complete this information or else your issue will be closed\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow)?: No\nTensorFlow installed from (source or binary)?: Source\nTensorFlow version: master and  f8dce81aeaff40dc78d398741854ad8766806f91\nBazel version (if compiling from source): 0.4.5\nCUDA/cuDNN version: N/A\nGPU Model and Memory: N/A\nExact command to reproduce:\n\ntensorflow/tools/ci_build/ci_build.sh CPU bazel test //tensorflow/...\nNote: make sure you run with a clean state machine\nDescribe the problem clearly\nI'm trying to use ci_build tool to build tensorflow from source, but I am always got the error at step /install/install_buildifier.sh\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.build/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\n____Loading package: buildifier\n____Loading package: @bazel_tools//tools/cpp\n____Loading package: @bazel_tools//tools/jdk\n____Loading package: @local_config_xcode//\n____Loading package: @local_jdk//\n____Loading package: @local_config_cc//\n____Loading complete.  Analyzing...\n____Loading package:\n____Loading package: @bazel_tools//tools/genrule\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 4,184,939 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 8,690,539 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 14,736,235 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 19,537,920 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 24,485,888 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 29,597,696 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 34,791,424 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 39,903,232 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 45,064,192 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 50,339,840 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 55,648,256 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 61,497,344 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 67,166,208 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 73,048,064 bytes\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 78,733,312 bytes\n____Loading package: @io_bazel_rules_go_toolchain//\nERROR: /buildifier/build/BUILD.bazel:4:1: no such package '@org_golang_x_tools//cmd/goyacc': no such package '@io_bazel_rules_go_repository_tools//': Traceback (most recent call last):\n    File \"/root/.cache/bazel/_bazel_root/972a279007c925820266f3ac7b1d6afd/external/io_bazel_rules_go/go/private/go_repositories.bzl\", line 85\n        _fetch_repository_tools_deps(ctx, goroot, gopath)\n    File \"/root/.cache/bazel/_bazel_root/972a279007c925820266f3ac7b1d6afd/external/io_bazel_rules_go/go/private/go_repositories.bzl\", line 54, in _fetch_repository_tools_deps\n        ctx.download_and_extract('%s/archive/%s.zip' % (dep.repo,...), <4 more arguments>)\njava.io.IOException: Prefix buildifier-4190564903f61ddc94bcfda3dc2cdd32d4b330e5 was given, but not found in the zip and referenced by '//build:parse.y.go_yacc'.\nERROR: Analysis of target '//buildifier:buildifier' failed; build aborted.\n____Elapsed time: 10.455s\n\nI did google around and may be this is root cause bazelbuild/rules_go#361", "body": "### You must complete this information or else your issue will be closed\r\n- *Have I written custom code (as opposed to using a stock example script provided in TensorFlow)?*: No\r\n- *TensorFlow installed from (source or binary)?*: Source\r\n- *TensorFlow version*: `master` and  `f8dce81aeaff40dc78d398741854ad8766806f91`\r\n- *Bazel version (if compiling from source)*: 0.4.5 \r\n- *CUDA/cuDNN version*: N/A\r\n- *GPU Model and Memory*: N/A\r\n- *Exact command to reproduce*:\r\n\r\n`tensorflow/tools/ci_build/ci_build.sh CPU bazel test //tensorflow/...`\r\n\r\nNote: make sure you run with a clean state machine\r\n\r\n### Describe the problem clearly\r\n\r\nI'm trying to use ci_build tool to build tensorflow from source, but I am always got the error at step `/install/install_buildifier.sh`\r\n\r\n```\r\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.build/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\r\n____Loading package: buildifier\r\n____Loading package: @bazel_tools//tools/cpp\r\n____Loading package: @bazel_tools//tools/jdk\r\n____Loading package: @local_config_xcode//\r\n____Loading package: @local_jdk//\r\n____Loading package: @local_config_cc//\r\n____Loading complete.  Analyzing...\r\n____Loading package:\r\n____Loading package: @bazel_tools//tools/genrule\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 4,184,939 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 8,690,539 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 14,736,235 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 19,537,920 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 24,485,888 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 29,597,696 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 34,791,424 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 39,903,232 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 45,064,192 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 50,339,840 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 55,648,256 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 61,497,344 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 67,166,208 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 73,048,064 bytes\r\n____Downloading https://storage.googleapis.com/golang/go1.7.4.linux-amd64.tar.gz: 78,733,312 bytes\r\n____Loading package: @io_bazel_rules_go_toolchain//\r\nERROR: /buildifier/build/BUILD.bazel:4:1: no such package '@org_golang_x_tools//cmd/goyacc': no such package '@io_bazel_rules_go_repository_tools//': Traceback (most recent call last):\r\n    File \"/root/.cache/bazel/_bazel_root/972a279007c925820266f3ac7b1d6afd/external/io_bazel_rules_go/go/private/go_repositories.bzl\", line 85\r\n        _fetch_repository_tools_deps(ctx, goroot, gopath)\r\n    File \"/root/.cache/bazel/_bazel_root/972a279007c925820266f3ac7b1d6afd/external/io_bazel_rules_go/go/private/go_repositories.bzl\", line 54, in _fetch_repository_tools_deps\r\n        ctx.download_and_extract('%s/archive/%s.zip' % (dep.repo,...), <4 more arguments>)\r\njava.io.IOException: Prefix buildifier-4190564903f61ddc94bcfda3dc2cdd32d4b330e5 was given, but not found in the zip and referenced by '//build:parse.y.go_yacc'.\r\nERROR: Analysis of target '//buildifier:buildifier' failed; build aborted.\r\n____Elapsed time: 10.455s\r\n```\r\n\r\nI did google around and may be this is root cause https://github.com/bazelbuild/rules_go/issues/361"}
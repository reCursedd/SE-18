{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4281", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4281/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4281/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4281/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4281", "id": 175835369, "node_id": "MDU6SXNzdWUxNzU4MzUzNjk=", "number": 4281, "title": "Seq2Seq example - shape error while decoding", "user": {"login": "marekmodry", "id": 8523511, "node_id": "MDQ6VXNlcjg1MjM1MTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/8523511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marekmodry", "html_url": "https://github.com/marekmodry", "followers_url": "https://api.github.com/users/marekmodry/followers", "following_url": "https://api.github.com/users/marekmodry/following{/other_user}", "gists_url": "https://api.github.com/users/marekmodry/gists{/gist_id}", "starred_url": "https://api.github.com/users/marekmodry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marekmodry/subscriptions", "organizations_url": "https://api.github.com/users/marekmodry/orgs", "repos_url": "https://api.github.com/users/marekmodry/repos", "events_url": "https://api.github.com/users/marekmodry/events{/privacy}", "received_events_url": "https://api.github.com/users/marekmodry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-09-08T19:00:43Z", "updated_at": "2016-09-15T18:35:41Z", "closed_at": "2016-09-15T18:35:41Z", "author_association": "NONE", "body_html": "<p>When I try to run the tutorial available at <a href=\"https://www.tensorflow.org/versions/r0.10/tutorials/seq2seq/index.html\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.10/tutorials/seq2seq/index.html</a> it works great. The model is training and the proximity is decreasing.</p>\n<p>For training I used the default data and default command:<br>\n<code>python translate.py  --data_dir [your_data_directory] --train_dir [checkpoints_directory]  --en_vocab_size=40000 --fr_vocab_size=40000</code> (substituting directory paths of course)</p>\n<p>However when I try using the model by running <code>python translate.py --decode --data_dir [your_data_directory] --train_dir [checkpoints_directory]</code> I get the following error:</p>\n<pre><code>Traceback (most recent call last):\n  File \"translate.py\", line 290, in &lt;module&gt;\n    tf.app.run()\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"translate.py\", line 285, in main\n    decode()\n  File \"translate.py\", line 248, in decode\n    target_weights, bucket_id, True)\n  File \"/www/data/user/tensorflow/tensorflow/models/rnn/translate/seq2seq_model.py\", line 244, in step\n    outputs = session.run(output_feed, input_feed)\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 382, in run\n    run_metadata_ptr)\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 640, in _run\n    % (np_val.shape, subfeed_t.name, str(subfeed_t.get_shape())))\nValueError: Cannot feed value of shape (1,) for Tensor 'weight5:0', which has shape '(64,)'\n</code></pre>\n<p>It looks like the script is expecting the whole batch (which is set to 64 by default) but when I type any input, it creates only 1 sample of data.</p>\n<p>Version of tensorflow: <code>tensorflow==0.10.0rc0</code> (git commit I use <code>f71cc62282bf2e066f9ebd08cf3f605fc98c6e41</code>)</p>\n<p>Thank you for any ideas</p>", "body_text": "When I try to run the tutorial available at https://www.tensorflow.org/versions/r0.10/tutorials/seq2seq/index.html it works great. The model is training and the proximity is decreasing.\nFor training I used the default data and default command:\npython translate.py  --data_dir [your_data_directory] --train_dir [checkpoints_directory]  --en_vocab_size=40000 --fr_vocab_size=40000 (substituting directory paths of course)\nHowever when I try using the model by running python translate.py --decode --data_dir [your_data_directory] --train_dir [checkpoints_directory] I get the following error:\nTraceback (most recent call last):\n  File \"translate.py\", line 290, in <module>\n    tf.app.run()\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"translate.py\", line 285, in main\n    decode()\n  File \"translate.py\", line 248, in decode\n    target_weights, bucket_id, True)\n  File \"/www/data/user/tensorflow/tensorflow/models/rnn/translate/seq2seq_model.py\", line 244, in step\n    outputs = session.run(output_feed, input_feed)\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 382, in run\n    run_metadata_ptr)\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 640, in _run\n    % (np_val.shape, subfeed_t.name, str(subfeed_t.get_shape())))\nValueError: Cannot feed value of shape (1,) for Tensor 'weight5:0', which has shape '(64,)'\n\nIt looks like the script is expecting the whole batch (which is set to 64 by default) but when I type any input, it creates only 1 sample of data.\nVersion of tensorflow: tensorflow==0.10.0rc0 (git commit I use f71cc62282bf2e066f9ebd08cf3f605fc98c6e41)\nThank you for any ideas", "body": "When I try to run the tutorial available at [https://www.tensorflow.org/versions/r0.10/tutorials/seq2seq/index.html](https://www.tensorflow.org/versions/r0.10/tutorials/seq2seq/index.html) it works great. The model is training and the proximity is decreasing. \n\nFor training I used the default data and default command:\n`python translate.py  --data_dir [your_data_directory] --train_dir [checkpoints_directory]  --en_vocab_size=40000 --fr_vocab_size=40000` (substituting directory paths of course)\n\nHowever when I try using the model by running `python translate.py --decode\n  --data_dir [your_data_directory] --train_dir [checkpoints_directory]` I get the following error:\n\n```\nTraceback (most recent call last):\n  File \"translate.py\", line 290, in <module>\n    tf.app.run()\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"translate.py\", line 285, in main\n    decode()\n  File \"translate.py\", line 248, in decode\n    target_weights, bucket_id, True)\n  File \"/www/data/user/tensorflow/tensorflow/models/rnn/translate/seq2seq_model.py\", line 244, in step\n    outputs = session.run(output_feed, input_feed)\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 382, in run\n    run_metadata_ptr)\n  File \"/home/user/venv/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 640, in _run\n    % (np_val.shape, subfeed_t.name, str(subfeed_t.get_shape())))\nValueError: Cannot feed value of shape (1,) for Tensor 'weight5:0', which has shape '(64,)'\n```\n\nIt looks like the script is expecting the whole batch (which is set to 64 by default) but when I type any input, it creates only 1 sample of data.\n\nVersion of tensorflow: `tensorflow==0.10.0rc0` (git commit I use `f71cc62282bf2e066f9ebd08cf3f605fc98c6e41`)\n\nThank you for any ideas\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/420388736", "html_url": "https://github.com/tensorflow/tensorflow/issues/20718#issuecomment-420388736", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20718", "id": 420388736, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDM4ODczNg==", "user": {"login": "skulhare", "id": 29107055, "node_id": "MDQ6VXNlcjI5MTA3MDU1", "avatar_url": "https://avatars2.githubusercontent.com/u/29107055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skulhare", "html_url": "https://github.com/skulhare", "followers_url": "https://api.github.com/users/skulhare/followers", "following_url": "https://api.github.com/users/skulhare/following{/other_user}", "gists_url": "https://api.github.com/users/skulhare/gists{/gist_id}", "starred_url": "https://api.github.com/users/skulhare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skulhare/subscriptions", "organizations_url": "https://api.github.com/users/skulhare/orgs", "repos_url": "https://api.github.com/users/skulhare/repos", "events_url": "https://api.github.com/users/skulhare/events{/privacy}", "received_events_url": "https://api.github.com/users/skulhare/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-11T19:12:58Z", "updated_at": "2018-09-11T19:12:58Z", "author_association": "NONE", "body_html": "<p>Great timing <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=28546240\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tensorflowbutler\">@tensorflowbutler</a> :)<br>\n<a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4723042\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/achowdhery\">@achowdhery</a>, I followed your medium article and trained a quantized SSDMobilenet. After the training, I export the graph with export_tflite_ssd_graph.py script. Now I am using toco/tflite_convert to convert .pb to .tflite but I am getting this error :</p>\n<p>File \"/usr/local/bin/tflite_convert\", line 11, in <br>\nsys.exit(main())<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 320, in main<br>\napp.run(main=run_main, argv=sys.argv[:1])<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/platform/app.py\", line 125, in run<br>\n_sys.exit(main(argv))<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 316, in run_main<br>\n_convert_model(tflite_flags)<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 91, in _convert_model<br>\nconverter = _get_toco_converter(flags)<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 81, in _get_toco_converter<br>\nreturn converter_fn(**converter_kwargs)<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 204, in from_frozen_graph<br>\nimport_graph_def(graph_def, name=\"\")<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 432, in new_func<br>\nreturn func(*args, **kwargs)<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/importer.py\", line 418, in import_graph_def<br>\ngraph._c_graph, serialized, options)  # pylint: disable=protected-access<br>\ntensorflow.python.framework.errors_impl.NotFoundError: Op type not registered 'TFLite_Detection_PostProcess' in binary running on be8098d5af8f. Make sure the Op and Kernel are registered in the binary running in this process. Note that if you are loading a saved graph which used ops from tf.contrib, accessing (e.g.) <code>tf.contrib.resampler</code> should be done before importing the graph, as contrib ops are lazily registered when the module is first accessed.</p>\n<p>It seems like I will have explicitly remove some operations from the graph those are not supported in this conversion?</p>\n<p>Thanks in advance.</p>", "body_text": "Great timing @tensorflowbutler :)\n@achowdhery, I followed your medium article and trained a quantized SSDMobilenet. After the training, I export the graph with export_tflite_ssd_graph.py script. Now I am using toco/tflite_convert to convert .pb to .tflite but I am getting this error :\nFile \"/usr/local/bin/tflite_convert\", line 11, in \nsys.exit(main())\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 320, in main\napp.run(main=run_main, argv=sys.argv[:1])\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/platform/app.py\", line 125, in run\n_sys.exit(main(argv))\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 316, in run_main\n_convert_model(tflite_flags)\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 91, in _convert_model\nconverter = _get_toco_converter(flags)\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 81, in _get_toco_converter\nreturn converter_fn(**converter_kwargs)\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 204, in from_frozen_graph\nimport_graph_def(graph_def, name=\"\")\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 432, in new_func\nreturn func(*args, **kwargs)\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/importer.py\", line 418, in import_graph_def\ngraph._c_graph, serialized, options)  # pylint: disable=protected-access\ntensorflow.python.framework.errors_impl.NotFoundError: Op type not registered 'TFLite_Detection_PostProcess' in binary running on be8098d5af8f. Make sure the Op and Kernel are registered in the binary running in this process. Note that if you are loading a saved graph which used ops from tf.contrib, accessing (e.g.) tf.contrib.resampler should be done before importing the graph, as contrib ops are lazily registered when the module is first accessed.\nIt seems like I will have explicitly remove some operations from the graph those are not supported in this conversion?\nThanks in advance.", "body": "Great timing @tensorflowbutler :) \r\n@achowdhery, I followed your medium article and trained a quantized SSDMobilenet. After the training, I export the graph with export_tflite_ssd_graph.py script. Now I am using toco/tflite_convert to convert .pb to .tflite but I am getting this error : \r\n\r\n   File \"/usr/local/bin/tflite_convert\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 320, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 316, in run_main\r\n    _convert_model(tflite_flags)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 91, in _convert_model\r\n    converter = _get_toco_converter(flags)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 81, in _get_toco_converter\r\n    return converter_fn(**converter_kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/lite/python/lite.py\", line 204, in from_frozen_graph\r\n    import_graph_def(graph_def, name=\"\")\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 432, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/importer.py\", line 418, in import_graph_def\r\n    graph._c_graph, serialized, options)  # pylint: disable=protected-access\r\ntensorflow.python.framework.errors_impl.NotFoundError: Op type not registered 'TFLite_Detection_PostProcess' in binary running on be8098d5af8f. Make sure the Op and Kernel are registered in the binary running in this process. Note that if you are loading a saved graph which used ops from tf.contrib, accessing (e.g.) `tf.contrib.resampler` should be done before importing the graph, as contrib ops are lazily registered when the module is first accessed.\r\n\r\n\r\nIt seems like I will have explicitly remove some operations from the graph those are not supported in this conversion? \r\n\r\nThanks in advance. "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22252", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22252/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22252/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22252/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22252", "id": 359899138, "node_id": "MDU6SXNzdWUzNTk4OTkxMzg=", "number": 22252, "title": "Is tensorflow-gpu version same with just tensorflow for cpu?", "user": {"login": "bughunter99", "id": 27390297, "node_id": "MDQ6VXNlcjI3MzkwMjk3", "avatar_url": "https://avatars1.githubusercontent.com/u/27390297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bughunter99", "html_url": "https://github.com/bughunter99", "followers_url": "https://api.github.com/users/bughunter99/followers", "following_url": "https://api.github.com/users/bughunter99/following{/other_user}", "gists_url": "https://api.github.com/users/bughunter99/gists{/gist_id}", "starred_url": "https://api.github.com/users/bughunter99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bughunter99/subscriptions", "organizations_url": "https://api.github.com/users/bughunter99/orgs", "repos_url": "https://api.github.com/users/bughunter99/repos", "events_url": "https://api.github.com/users/bughunter99/events{/privacy}", "received_events_url": "https://api.github.com/users/bughunter99/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-09-13T13:35:56Z", "updated_at": "2018-09-19T21:16:37Z", "closed_at": "2018-09-19T21:16:37Z", "author_association": "NONE", "body_html": "<p>I've developed some Keras code using tensorflow with cpu on Windows7 on my pc, and trained it with GPU on linux.</p>\n<p>After complete training, I have moved the trained model files to my pc and used them without any problems. But I don't know what happened, it doesn't work on my pc. I guess it is from Keras and tensorflow version issue.</p>\n<p>The linux's Keras and tensorflow version are Keras (2.1.5), tensorflow-gpu (1.4.1), and my pc's version are Keras (2.1.5), tensorflow (1.4.0.).</p>\n<p>Below is the error msg.</p>\n<pre><code>Traceback (most recent call last):\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1323, in _do_call\n    return fn(*args)\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1302, in _run_fn\n    status, run_metadata)\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 473, in __exit__\n    c_api.TF_GetCode(self.status.status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[22,3] = 13257 is not in [0, 13004)\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\n\n\n</code></pre>\n<p>and</p>\n<pre><code>File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[22,3] = 13257 is not in [0, 13004)\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\n</code></pre>\n<p>and</p>\n<pre><code>File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2956, in create_op\n    op_def=op_def)\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1470, in __init__\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\n\nInvalidArgumentError (see above for traceback): indices[22,3] = 13257 is not in [0, 13004)\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\n\nException ignored in: &lt;bound method BaseSession.__del__ of &lt;tensorflow.python.client.session.Session object at 0x000000001A8DE198&gt;&gt;\nTraceback (most recent call last):\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 696, in __del__\nTypeError: 'NoneType' object is not callable\n\n</code></pre>\n<p>There were several similar questions, but anything were helpful. To use trained model file from Keras (2.1.5) and tensorflow-gpu (1.4.1), which Keras and tensorflow(cpu) version should I use? Of course I use same python version with the linux which is 3.5 on 64bit.</p>", "body_text": "I've developed some Keras code using tensorflow with cpu on Windows7 on my pc, and trained it with GPU on linux.\nAfter complete training, I have moved the trained model files to my pc and used them without any problems. But I don't know what happened, it doesn't work on my pc. I guess it is from Keras and tensorflow version issue.\nThe linux's Keras and tensorflow version are Keras (2.1.5), tensorflow-gpu (1.4.1), and my pc's version are Keras (2.1.5), tensorflow (1.4.0.).\nBelow is the error msg.\nTraceback (most recent call last):\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1323, in _do_call\n    return fn(*args)\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1302, in _run_fn\n    status, run_metadata)\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 473, in __exit__\n    c_api.TF_GetCode(self.status.status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[22,3] = 13257 is not in [0, 13004)\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\n\n\n\nand\nFile \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[22,3] = 13257 is not in [0, 13004)\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\n\nand\nFile \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2956, in create_op\n    op_def=op_def)\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1470, in __init__\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\n\nInvalidArgumentError (see above for traceback): indices[22,3] = 13257 is not in [0, 13004)\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\n\nException ignored in: <bound method BaseSession.__del__ of <tensorflow.python.client.session.Session object at 0x000000001A8DE198>>\nTraceback (most recent call last):\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 696, in __del__\nTypeError: 'NoneType' object is not callable\n\n\nThere were several similar questions, but anything were helpful. To use trained model file from Keras (2.1.5) and tensorflow-gpu (1.4.1), which Keras and tensorflow(cpu) version should I use? Of course I use same python version with the linux which is 3.5 on 64bit.", "body": "I've developed some Keras code using tensorflow with cpu on Windows7 on my pc, and trained it with GPU on linux.\r\n\r\nAfter complete training, I have moved the trained model files to my pc and used them without any problems. But I don't know what happened, it doesn't work on my pc. I guess it is from Keras and tensorflow version issue.\r\n\r\nThe linux's Keras and tensorflow version are Keras (2.1.5), tensorflow-gpu (1.4.1), and my pc's version are Keras (2.1.5), tensorflow (1.4.0.).\r\n\r\nBelow is the error msg.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1323, in _do_call\r\n    return fn(*args)\r\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1302, in _run_fn\r\n    status, run_metadata)\r\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 473, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[22,3] = 13257 is not in [0, 13004)\r\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\r\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\r\n\r\n\r\n```\r\nand \r\n```\r\nFile \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[22,3] = 13257 is not in [0, 13004)\r\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\r\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\r\n```\r\n\r\nand\r\n```\r\nFile \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2956, in create_op\r\n    op_def=op_def)\r\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1470, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nInvalidArgumentError (see above for traceback): indices[22,3] = 13257 is not in [0, 13004)\r\n         [[Node: embedding_1/Gather = Gather[Tindices=DT_INT32, Tparams=DT_FLOAT, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/devi\r\nce:CPU:0\"](embedding_1/embeddings/read, embedding_1/Cast)]]\r\n\r\nException ignored in: <bound method BaseSession.__del__ of <tensorflow.python.client.session.Session object at 0x000000001A8DE198>>\r\nTraceback (most recent call last):\r\n  File \"C:\\WinPython-64bit-3.5.4.1Qt5\\python-3.5.4.amd64\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 696, in __del__\r\nTypeError: 'NoneType' object is not callable\r\n\r\n```\r\n\r\nThere were several similar questions, but anything were helpful. To use trained model file from Keras (2.1.5) and tensorflow-gpu (1.4.1), which Keras and tensorflow(cpu) version should I use? Of course I use same python version with the linux which is 3.5 on 64bit.\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/318727447", "html_url": "https://github.com/tensorflow/tensorflow/issues/11823#issuecomment-318727447", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11823", "id": 318727447, "node_id": "MDEyOklzc3VlQ29tbWVudDMxODcyNzQ0Nw==", "user": {"login": "mari-linhares", "id": 8157164, "node_id": "MDQ6VXNlcjgxNTcxNjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/8157164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mari-linhares", "html_url": "https://github.com/mari-linhares", "followers_url": "https://api.github.com/users/mari-linhares/followers", "following_url": "https://api.github.com/users/mari-linhares/following{/other_user}", "gists_url": "https://api.github.com/users/mari-linhares/gists{/gist_id}", "starred_url": "https://api.github.com/users/mari-linhares/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mari-linhares/subscriptions", "organizations_url": "https://api.github.com/users/mari-linhares/orgs", "repos_url": "https://api.github.com/users/mari-linhares/repos", "events_url": "https://api.github.com/users/mari-linhares/events{/privacy}", "received_events_url": "https://api.github.com/users/mari-linhares/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-28T18:21:25Z", "updated_at": "2017-07-30T19:31:32Z", "author_association": "NONE", "body_html": "<p>You need to have a TF_CONFIG environment variable in each machine, example for TF_CONFIG in the master:</p>\n<div class=\"highlight highlight-source-python\"><pre>cluster <span class=\"pl-k\">=</span> {<span class=\"pl-s\"><span class=\"pl-pds\">'</span>master<span class=\"pl-pds\">'</span></span>: [<span class=\"pl-s\"><span class=\"pl-pds\">'</span>localhost:8000<span class=\"pl-pds\">'</span></span>],\n           <span class=\"pl-s\"><span class=\"pl-pds\">'</span>ps<span class=\"pl-pds\">'</span></span>: [<span class=\"pl-s\"><span class=\"pl-pds\">'</span>localhost:8888<span class=\"pl-pds\">'</span></span>],\n           <span class=\"pl-s\"><span class=\"pl-pds\">'</span>worker<span class=\"pl-pds\">'</span></span>: [<span class=\"pl-s\"><span class=\"pl-pds\">'</span>localhost:8009<span class=\"pl-pds\">'</span></span>]}\n\n<span class=\"pl-c1\">TF_CONFIG</span> <span class=\"pl-k\">=</span> json.dumps(\n  {<span class=\"pl-s\"><span class=\"pl-pds\">'</span>cluster<span class=\"pl-pds\">'</span></span>: cluster,\n   <span class=\"pl-s\"><span class=\"pl-pds\">'</span>task<span class=\"pl-pds\">'</span></span>: {<span class=\"pl-s\"><span class=\"pl-pds\">'</span>type<span class=\"pl-pds\">'</span></span>: master, <span class=\"pl-s\"><span class=\"pl-pds\">'</span>index<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">0</span>},\n   <span class=\"pl-s\"><span class=\"pl-pds\">'</span>model_dir<span class=\"pl-pds\">'</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>gs://&lt;bucket_path&gt;/&lt;dir_path&gt;<span class=\"pl-pds\">'</span></span>,\n   <span class=\"pl-s\"><span class=\"pl-pds\">'</span>environment<span class=\"pl-pds\">'</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>cloud<span class=\"pl-pds\">'</span></span>\n  })</pre></div>\n<p>Then you can run the following script in all the machines.</p>\n<div class=\"highlight highlight-source-shell\"><pre>python cifar10_main.py --run_experiment=True --num_workers=2 --train_batch_size=64 --num_gpus=1 --data_dir=<span class=\"pl-k\">&lt;</span>data_dir<span class=\"pl-k\">&gt;</span> --model_dir=gs://<span class=\"pl-k\">&lt;</span>bucket_path<span class=\"pl-k\">&gt;</span>/<span class=\"pl-k\">&lt;</span>dir_path<span class=\"pl-k\">&gt;</span> --sync=True</pre></div>", "body_text": "You need to have a TF_CONFIG environment variable in each machine, example for TF_CONFIG in the master:\ncluster = {'master': ['localhost:8000'],\n           'ps': ['localhost:8888'],\n           'worker': ['localhost:8009']}\n\nTF_CONFIG = json.dumps(\n  {'cluster': cluster,\n   'task': {'type': master, 'index': 0},\n   'model_dir': 'gs://<bucket_path>/<dir_path>',\n   'environment': 'cloud'\n  })\nThen you can run the following script in all the machines.\npython cifar10_main.py --run_experiment=True --num_workers=2 --train_batch_size=64 --num_gpus=1 --data_dir=<data_dir> --model_dir=gs://<bucket_path>/<dir_path> --sync=True", "body": "You need to have a TF_CONFIG environment variable in each machine, example for TF_CONFIG in the master:\r\n\r\n```python\r\ncluster = {'master': ['localhost:8000'],\r\n           'ps': ['localhost:8888'],\r\n           'worker': ['localhost:8009']}\r\n\r\nTF_CONFIG = json.dumps(\r\n  {'cluster': cluster,\r\n   'task': {'type': master, 'index': 0},\r\n   'model_dir': 'gs://<bucket_path>/<dir_path>',\r\n   'environment': 'cloud'\r\n  })\r\n```\r\nThen you can run the following script in all the machines.\r\n```shell\r\npython cifar10_main.py --run_experiment=True --num_workers=2 --train_batch_size=64 --num_gpus=1 --data_dir=<data_dir> --model_dir=gs://<bucket_path>/<dir_path> --sync=True\r\n```\r\n\r\n"}
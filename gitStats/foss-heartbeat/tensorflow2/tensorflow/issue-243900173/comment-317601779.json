{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/317601779", "html_url": "https://github.com/tensorflow/tensorflow/issues/11597#issuecomment-317601779", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11597", "id": 317601779, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzYwMTc3OQ==", "user": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-25T01:29:18Z", "updated_at": "2017-07-25T01:29:18Z", "author_association": "MEMBER", "body_html": "<p>This question is better asked on  <a href=\"http://stackoverflow.com/questions/tagged/tensorflow\" rel=\"nofollow\">StackOverflow</a> since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!</p>\n<p>That said, when you recreate the <code>ExponentialMovingAverage</code> after saving the checkpoint, it is unaware of the current variables and shadow variables, since you just created it. Then, when you call <code>ema.average_name(var)</code>, it recreates new shadow variables since it doesn't know about the old shadow variables. I'm not sure how to solve this while still using a <code>MetaGraph</code>; try asking StackOverflow or rebuild the model instead of using a <code>MetaGraph</code>.</p>", "body_text": "This question is better asked on  StackOverflow since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!\nThat said, when you recreate the ExponentialMovingAverage after saving the checkpoint, it is unaware of the current variables and shadow variables, since you just created it. Then, when you call ema.average_name(var), it recreates new shadow variables since it doesn't know about the old shadow variables. I'm not sure how to solve this while still using a MetaGraph; try asking StackOverflow or rebuild the model instead of using a MetaGraph.", "body": "This question is better asked on  [StackOverflow](http://stackoverflow.com/questions/tagged/tensorflow) since it is not a  bug or feature request. There is also a larger community that reads questions there. Thanks!\r\n\r\nThat said, when you recreate the `ExponentialMovingAverage` after saving the checkpoint, it is unaware of the current variables and shadow variables, since you just created it. Then, when you call `ema.average_name(var)`, it recreates new shadow variables since it doesn't know about the old shadow variables. I'm not sure how to solve this while still using a `MetaGraph`; try asking StackOverflow or rebuild the model instead of using a `MetaGraph`."}
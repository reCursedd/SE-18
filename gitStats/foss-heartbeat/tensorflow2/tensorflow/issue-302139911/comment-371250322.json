{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/371250322", "html_url": "https://github.com/tensorflow/tensorflow/issues/17419#issuecomment-371250322", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17419", "id": 371250322, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTI1MDMyMg==", "user": {"login": "henrysky", "id": 28623434, "node_id": "MDQ6VXNlcjI4NjIzNDM0", "avatar_url": "https://avatars1.githubusercontent.com/u/28623434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henrysky", "html_url": "https://github.com/henrysky", "followers_url": "https://api.github.com/users/henrysky/followers", "following_url": "https://api.github.com/users/henrysky/following{/other_user}", "gists_url": "https://api.github.com/users/henrysky/gists{/gist_id}", "starred_url": "https://api.github.com/users/henrysky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henrysky/subscriptions", "organizations_url": "https://api.github.com/users/henrysky/orgs", "repos_url": "https://api.github.com/users/henrysky/repos", "events_url": "https://api.github.com/users/henrysky/events{/privacy}", "received_events_url": "https://api.github.com/users/henrysky/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-07T19:11:40Z", "updated_at": "2018-03-07T19:20:33Z", "author_association": "NONE", "body_html": "<p>Hi, I have found out the cause of issue.</p>\n<p>The issue is in <code>tensorflow.keras</code>, the<code> shape</code> cannot be a numpy array while <code>keras</code> can. The issue is gone now if I explicitly convert <code>self.input_shape</code> to a list,</p>\n<p>I do think this is a bug</p>\n<p>Here is an example script to reproduce the issue</p>\n<p>For Keras which will run without error:</p>\n<pre><code>import keras\nimport numpy as np\ninput = keras.layers.Input(shape=(np.array([7514,1])))\noutput = keras.layers.Dense(10)(input)\nmodel = keras.models.Model(inputs=input, outputs=output)\n</code></pre>\n<p>For <code>tensorflow.keras</code> with the error</p>\n<pre><code>import tensorflow as tf\nimport numpy as np\ninput = tf.keras.layers.Input(shape=(np.array([7514,1])))\noutput = tf.keras.layers.Dense(10)(input)\nmodel = tf.keras.models.Model(inputs=input, outputs=output)\n</code></pre>", "body_text": "Hi, I have found out the cause of issue.\nThe issue is in tensorflow.keras, the shape cannot be a numpy array while keras can. The issue is gone now if I explicitly convert self.input_shape to a list,\nI do think this is a bug\nHere is an example script to reproduce the issue\nFor Keras which will run without error:\nimport keras\nimport numpy as np\ninput = keras.layers.Input(shape=(np.array([7514,1])))\noutput = keras.layers.Dense(10)(input)\nmodel = keras.models.Model(inputs=input, outputs=output)\n\nFor tensorflow.keras with the error\nimport tensorflow as tf\nimport numpy as np\ninput = tf.keras.layers.Input(shape=(np.array([7514,1])))\noutput = tf.keras.layers.Dense(10)(input)\nmodel = tf.keras.models.Model(inputs=input, outputs=output)", "body": "Hi, I have found out the cause of issue.\r\n\r\nThe issue is in `tensorflow.keras`, the` shape` cannot be a numpy array while `keras` can. The issue is gone now if I explicitly convert `self.input_shape` to a list,\r\n\r\nI do think this is a bug\r\n\r\nHere is an example script to reproduce the issue\r\n\r\nFor Keras which will run without error:\r\n```\r\nimport keras\r\nimport numpy as np\r\ninput = keras.layers.Input(shape=(np.array([7514,1])))\r\noutput = keras.layers.Dense(10)(input)\r\nmodel = keras.models.Model(inputs=input, outputs=output)\r\n```\r\n\r\nFor `tensorflow.keras` with the error\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\ninput = tf.keras.layers.Input(shape=(np.array([7514,1])))\r\noutput = tf.keras.layers.Dense(10)(input)\r\nmodel = tf.keras.models.Model(inputs=input, outputs=output)\r\n```"}
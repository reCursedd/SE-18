{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/223445993", "html_url": "https://github.com/tensorflow/tensorflow/issues/2627#issuecomment-223445993", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2627", "id": 223445993, "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzQ0NTk5Mw==", "user": {"login": "ibab", "id": 890531, "node_id": "MDQ6VXNlcjg5MDUzMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/890531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibab", "html_url": "https://github.com/ibab", "followers_url": "https://api.github.com/users/ibab/followers", "following_url": "https://api.github.com/users/ibab/following{/other_user}", "gists_url": "https://api.github.com/users/ibab/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibab/subscriptions", "organizations_url": "https://api.github.com/users/ibab/orgs", "repos_url": "https://api.github.com/users/ibab/repos", "events_url": "https://api.github.com/users/ibab/events{/privacy}", "received_events_url": "https://api.github.com/users/ibab/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-02T22:51:07Z", "updated_at": "2016-06-02T22:51:36Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The gradient code is very simple:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-en\">@ops.RegisterGradient</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Complex<span class=\"pl-pds\">\"</span></span>)\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">_ComplexGrad</span>(<span class=\"pl-smi\">_</span>, <span class=\"pl-smi\">grad</span>):\n  <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span>Returns the real and imaginary components of 'grad', respectively.<span class=\"pl-pds\">\"\"\"</span></span>\n  <span class=\"pl-k\">return</span> math_ops.real(grad), math_ops.imag(grad)</pre></div>\n<p>I guess the problem occurs because the dimensions of <code>1.0</code> are not properly broadcasted and the gradient ends up having shape <code>()</code>, while <code>tf.imag(grad)</code> has shape <code>(2,)</code>.</p>", "body_text": "The gradient code is very simple:\n@ops.RegisterGradient(\"Complex\")\ndef _ComplexGrad(_, grad):\n  \"\"\"Returns the real and imaginary components of 'grad', respectively.\"\"\"\n  return math_ops.real(grad), math_ops.imag(grad)\nI guess the problem occurs because the dimensions of 1.0 are not properly broadcasted and the gradient ends up having shape (), while tf.imag(grad) has shape (2,).", "body": "The gradient code is very simple:\n\n``` python\n@ops.RegisterGradient(\"Complex\")\ndef _ComplexGrad(_, grad):\n  \"\"\"Returns the real and imaginary components of 'grad', respectively.\"\"\"\n  return math_ops.real(grad), math_ops.imag(grad)\n```\n\nI guess the problem occurs because the dimensions of `1.0` are not properly broadcasted and the gradient ends up having shape `()`, while `tf.imag(grad)` has shape `(2,)`.\n"}
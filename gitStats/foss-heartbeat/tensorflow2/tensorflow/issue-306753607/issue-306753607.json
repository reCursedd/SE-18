{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17854", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17854/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17854/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17854/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17854", "id": 306753607, "node_id": "MDU6SXNzdWUzMDY3NTM2MDc=", "number": 17854, "title": "tf.estimator.RunConfig return worker is not a valid task_type in the cluster_spec job", "user": {"login": "wtam", "id": 12905616, "node_id": "MDQ6VXNlcjEyOTA1NjE2", "avatar_url": "https://avatars3.githubusercontent.com/u/12905616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wtam", "html_url": "https://github.com/wtam", "followers_url": "https://api.github.com/users/wtam/followers", "following_url": "https://api.github.com/users/wtam/following{/other_user}", "gists_url": "https://api.github.com/users/wtam/gists{/gist_id}", "starred_url": "https://api.github.com/users/wtam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wtam/subscriptions", "organizations_url": "https://api.github.com/users/wtam/orgs", "repos_url": "https://api.github.com/users/wtam/repos", "events_url": "https://api.github.com/users/wtam/events{/privacy}", "received_events_url": "https://api.github.com/users/wtam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-20T07:21:46Z", "updated_at": "2018-03-20T10:22:48Z", "closed_at": "2018-03-20T10:21:29Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>os/ubuntu1604/x86_64</li>\n<li><strong>Exact command to reproduce</strong>: config = tf.estimator.RunConfig()</li>\n<li>docker image: tensorflow/tensorflow:1.4.0-gpu</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>tf.estimator.RunConfig return worker is not a valid task_type in the cluster_spec job</p>\n<h3>Source code / logs</h3>\n<p>os.environ['TF_CONFIG'] = json.dumps({<br>\n##'cluster': cluster,<br>\n'cluster': {<br>\n\"chief\" : chief_node,<br>\n\"ps_hosts\": ps_hosts,<br>\n\"worker_hosts\": worker_hosts<br>\n},<br>\n'task' : {<br>\n'type' : FLAGS.job_name,<br>\n'index': FLAGS.task_index,<br>\n}<br>\n})<br>\nconfig = tf.estimator.RunConfig()</p>\n<p>-------LOG---------<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 464, in <strong>init</strong><br>\nself._init_distributed_setting_from_environment_var(tf_config)<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 480, in _init_distributed_setting_from_environment_var<br>\nself._cluster_spec, task_env, TaskType.CHIEF)<br>\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 188, in _validate_task_type_and_task_id<br>\n'variable.' % (task_type, cluster_spec))<br>\nValueError: worker is not a valid task_type in the cluster_spec:<br>\nClusterSpec({'chief': ['10.0.0.5:2223'], 'ps_hosts': ['10.0.0.5:2222'], 'worker_hosts': ['10.0.0.6:2222', '10.0.0.4:2222']})</p>", "body_text": "System information\n\nos/ubuntu1604/x86_64\nExact command to reproduce: config = tf.estimator.RunConfig()\ndocker image: tensorflow/tensorflow:1.4.0-gpu\n\nDescribe the problem\ntf.estimator.RunConfig return worker is not a valid task_type in the cluster_spec job\nSource code / logs\nos.environ['TF_CONFIG'] = json.dumps({\n##'cluster': cluster,\n'cluster': {\n\"chief\" : chief_node,\n\"ps_hosts\": ps_hosts,\n\"worker_hosts\": worker_hosts\n},\n'task' : {\n'type' : FLAGS.job_name,\n'index': FLAGS.task_index,\n}\n})\nconfig = tf.estimator.RunConfig()\n-------LOG---------\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 464, in init\nself._init_distributed_setting_from_environment_var(tf_config)\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 480, in _init_distributed_setting_from_environment_var\nself._cluster_spec, task_env, TaskType.CHIEF)\nFile \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 188, in _validate_task_type_and_task_id\n'variable.' % (task_type, cluster_spec))\nValueError: worker is not a valid task_type in the cluster_spec:\nClusterSpec({'chief': ['10.0.0.5:2223'], 'ps_hosts': ['10.0.0.5:2222'], 'worker_hosts': ['10.0.0.6:2222', '10.0.0.4:2222']})", "body": "### System information\r\n- os/ubuntu1604/x86_64\r\n- **Exact command to reproduce**: config = tf.estimator.RunConfig()\r\n- docker image: tensorflow/tensorflow:1.4.0-gpu\r\n\r\n### Describe the problem\r\ntf.estimator.RunConfig return worker is not a valid task_type in the cluster_spec job\r\n\r\n### Source code / logs\r\n   os.environ['TF_CONFIG'] = json.dumps({\r\n    ##'cluster': cluster,\r\n    'cluster': {\r\n        \"chief\" : chief_node,\r\n        \"ps_hosts\": ps_hosts,\r\n        \"worker_hosts\": worker_hosts\r\n    },\r\n    'task' : {\r\n        'type' : FLAGS.job_name,\r\n        'index': FLAGS.task_index,\r\n    }\r\n})\r\nconfig = tf.estimator.RunConfig()\r\n\r\n-------LOG---------\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 464, in __init__\r\n    self._init_distributed_setting_from_environment_var(tf_config)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 480, in _init_distributed_setting_from_environment_var\r\n    self._cluster_spec, task_env, TaskType.CHIEF)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/run_config.py\", line 188, in _validate_task_type_and_task_id\r\n    'variable.' % (task_type, cluster_spec))\r\nValueError: worker is not a valid task_type in the cluster_spec:\r\nClusterSpec({'chief': ['10.0.0.5:2223'], 'ps_hosts': ['10.0.0.5:2222'], 'worker_hosts': ['10.0.0.6:2222', '10.0.0.4:2222']})\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4343", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4343/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4343/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4343/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4343", "id": 176517049, "node_id": "MDU6SXNzdWUxNzY1MTcwNDk=", "number": 4343, "title": "Commit that breaks Bazel 0.3.0 support", "user": {"login": "gustavla", "id": 902935, "node_id": "MDQ6VXNlcjkwMjkzNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/902935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gustavla", "html_url": "https://github.com/gustavla", "followers_url": "https://api.github.com/users/gustavla/followers", "following_url": "https://api.github.com/users/gustavla/following{/other_user}", "gists_url": "https://api.github.com/users/gustavla/gists{/gist_id}", "starred_url": "https://api.github.com/users/gustavla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gustavla/subscriptions", "organizations_url": "https://api.github.com/users/gustavla/orgs", "repos_url": "https://api.github.com/users/gustavla/repos", "events_url": "https://api.github.com/users/gustavla/events{/privacy}", "received_events_url": "https://api.github.com/users/gustavla/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-09-13T00:16:00Z", "updated_at": "2016-09-13T00:33:43Z", "closed_at": "2016-09-13T00:33:42Z", "author_association": "CONTRIBUTOR", "body_html": "<p>If I try to configure the lastest master branch (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/db45268db0203fcdb0e48e3e558b01244424c0a6/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/db45268db0203fcdb0e48e3e558b01244424c0a6\"><tt>db45268</tt></a>) using Bazel 0.3.0, I get:</p>\n<pre><code>ERROR: [...]/tensorflow/tensorflow/tensorflow.bzl:568:26: Traceback (most recent call last):\n        File \"[...]/tensorflow/tensorflow/tensorflow.bzl\", line 562\n                rule(attrs = {\"srcs\": attr.label_list...\"), &lt;3 more arguments&gt;)}, &lt;2 more arguments&gt;)\n        File \"[...]/tensorflow/tensorflow/tensorflow.bzl\", line 568, in rule\n                attr.label_list(cfg = \"data\", allow_files = True)\nexpected ConfigurationTransition or NoneType for 'cfg' while calling label_list but got string instead: data.\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file 'tensorflow/tensorflow.bzl' has errors.\n</code></pre>\n<p>Using 0.3.1 avoids this and reverting the offending commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/7bcdcbbf60fc08346fd8016270a0563f4b51362b/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/7bcdcbbf60fc08346fd8016270a0563f4b51362b\"><tt>7bcdcbb</tt></a> also fixes it.</p>\n<h3>Environment info</h3>\n<p>Setup: CentOS, Bazel 0.3.0, CUDA 7.5, CuDNN 5.1, Tensorflow master (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/db45268db0203fcdb0e48e3e558b01244424c0a6/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/db45268db0203fcdb0e48e3e558b01244424c0a6\"><tt>db45268</tt></a>)</p>\n<p>I run <code>configure</code> and set it up for GPU support. I see the error above if I use bazel 0.3.0.</p>\n<h3>Fix</h3>\n<p>Upgrade to 0.3.1, obviously. However, since 0.3.0 is still officially supported, I thought this deserves to be an issue.</p>\n<p>Another fix is to revert the commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/7bcdcbbf60fc08346fd8016270a0563f4b51362b/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/7bcdcbbf60fc08346fd8016270a0563f4b51362b\"><tt>7bcdcbb</tt></a>. Note, I didn't have to revert to its parent; undoing that commit alone is enough:</p>\n<pre><code>git show -R 7bcdcbbf | git apply\n</code></pre>", "body_text": "If I try to configure the lastest master branch (db45268) using Bazel 0.3.0, I get:\nERROR: [...]/tensorflow/tensorflow/tensorflow.bzl:568:26: Traceback (most recent call last):\n        File \"[...]/tensorflow/tensorflow/tensorflow.bzl\", line 562\n                rule(attrs = {\"srcs\": attr.label_list...\"), <3 more arguments>)}, <2 more arguments>)\n        File \"[...]/tensorflow/tensorflow/tensorflow.bzl\", line 568, in rule\n                attr.label_list(cfg = \"data\", allow_files = True)\nexpected ConfigurationTransition or NoneType for 'cfg' while calling label_list but got string instead: data.\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file 'tensorflow/tensorflow.bzl' has errors.\n\nUsing 0.3.1 avoids this and reverting the offending commit 7bcdcbb also fixes it.\nEnvironment info\nSetup: CentOS, Bazel 0.3.0, CUDA 7.5, CuDNN 5.1, Tensorflow master (db45268)\nI run configure and set it up for GPU support. I see the error above if I use bazel 0.3.0.\nFix\nUpgrade to 0.3.1, obviously. However, since 0.3.0 is still officially supported, I thought this deserves to be an issue.\nAnother fix is to revert the commit 7bcdcbb. Note, I didn't have to revert to its parent; undoing that commit alone is enough:\ngit show -R 7bcdcbbf | git apply", "body": "If I try to configure the lastest master branch (db45268db0203fcdb0e48e3e558b01244424c0a6) using Bazel 0.3.0, I get:\n\n```\nERROR: [...]/tensorflow/tensorflow/tensorflow.bzl:568:26: Traceback (most recent call last):\n        File \"[...]/tensorflow/tensorflow/tensorflow.bzl\", line 562\n                rule(attrs = {\"srcs\": attr.label_list...\"), <3 more arguments>)}, <2 more arguments>)\n        File \"[...]/tensorflow/tensorflow/tensorflow.bzl\", line 568, in rule\n                attr.label_list(cfg = \"data\", allow_files = True)\nexpected ConfigurationTransition or NoneType for 'cfg' while calling label_list but got string instead: data.\nERROR: com.google.devtools.build.lib.packages.BuildFileContainsErrorsException: error loading package '': Extension file 'tensorflow/tensorflow.bzl' has errors.\n```\n\nUsing 0.3.1 avoids this and reverting the offending commit 7bcdcbbf60fc08346fd8016270a0563f4b51362b also fixes it.\n### Environment info\n\nSetup: CentOS, Bazel 0.3.0, CUDA 7.5, CuDNN 5.1, Tensorflow master (db45268db0203fcdb0e48e3e558b01244424c0a6)\n\nI run `configure` and set it up for GPU support. I see the error above if I use bazel 0.3.0.\n### Fix\n\nUpgrade to 0.3.1, obviously. However, since 0.3.0 is still officially supported, I thought this deserves to be an issue.\n\nAnother fix is to revert the commit 7bcdcbbf60fc08346fd8016270a0563f4b51362b. Note, I didn't have to revert to its parent; undoing that commit alone is enough:\n\n```\ngit show -R 7bcdcbbf | git apply\n```\n"}
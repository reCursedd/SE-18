{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18413", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18413/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18413/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18413/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/18413", "id": 313224151, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgwODI3MTU3", "number": 18413, "title": "Make op unique name generation case insensitive", "user": {"login": "pvaneck", "id": 1868861, "node_id": "MDQ6VXNlcjE4Njg4NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1868861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvaneck", "html_url": "https://github.com/pvaneck", "followers_url": "https://api.github.com/users/pvaneck/followers", "following_url": "https://api.github.com/users/pvaneck/following{/other_user}", "gists_url": "https://api.github.com/users/pvaneck/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvaneck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvaneck/subscriptions", "organizations_url": "https://api.github.com/users/pvaneck/orgs", "repos_url": "https://api.github.com/users/pvaneck/repos", "events_url": "https://api.github.com/users/pvaneck/events{/privacy}", "received_events_url": "https://api.github.com/users/pvaneck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-04-11T08:35:29Z", "updated_at": "2018-07-10T01:02:33Z", "closed_at": "2018-05-14T15:27:44Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18413", "html_url": "https://github.com/tensorflow/tensorflow/pull/18413", "diff_url": "https://github.com/tensorflow/tensorflow/pull/18413.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/18413.patch"}, "body_html": "<p>Unique name generation for operations depends on checking a dict for names currently in use. This commit makes it so that the names stored in this dict are always lowercase so that we can check if a name already exists regardless of the capitalization.</p>\n<p>This helps in filesystems where file paths are case insensitive and tensor dumps (like with tfdbg) try to follow directory structures that correspond to the tensor names. If two tensors have names with the same spelling, but different capitalizations, then this can lead to unintended side effects/errors on these case-insensitive file systems.</p>\n<p>These are likely just edge cases, but one such issue where this can be a problem is shown in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"290236427\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16261\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/16261/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/16261\">#16261</a>. Here, because both tf.multiply and the '*' overloaded operator were used, this caused name collisions for some intermediate tensors where you would have  tensor names like \"gradients/mul_grad/tuple/control_dependency_1\" and \"gradients/Mul_grad/Mul\" (since tf.multiply uses name=\"Mul\" while using the '*' operator uses name=\"mul\"). So when these tensors are dumped, only one \"mul_grad\" or \"Mul_grad\" directory can be created on specific file systems (like with Mac and Windows).</p>\n<p><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #16261.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"290236427\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16261\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/16261/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/16261\">#16261</a></p>", "body_text": "Unique name generation for operations depends on checking a dict for names currently in use. This commit makes it so that the names stored in this dict are always lowercase so that we can check if a name already exists regardless of the capitalization.\nThis helps in filesystems where file paths are case insensitive and tensor dumps (like with tfdbg) try to follow directory structures that correspond to the tensor names. If two tensors have names with the same spelling, but different capitalizations, then this can lead to unintended side effects/errors on these case-insensitive file systems.\nThese are likely just edge cases, but one such issue where this can be a problem is shown in #16261. Here, because both tf.multiply and the '*' overloaded operator were used, this caused name collisions for some intermediate tensors where you would have  tensor names like \"gradients/mul_grad/tuple/control_dependency_1\" and \"gradients/Mul_grad/Mul\" (since tf.multiply uses name=\"Mul\" while using the '*' operator uses name=\"mul\"). So when these tensors are dumped, only one \"mul_grad\" or \"Mul_grad\" directory can be created on specific file systems (like with Mac and Windows).\nFixes #16261", "body": "Unique name generation for operations depends on checking a dict for names currently in use. This commit makes it so that the names stored in this dict are always lowercase so that we can check if a name already exists regardless of the capitalization.\r\n\r\nThis helps in filesystems where file paths are case insensitive and tensor dumps (like with tfdbg) try to follow directory structures that correspond to the tensor names. If two tensors have names with the same spelling, but different capitalizations, then this can lead to unintended side effects/errors on these case-insensitive file systems.\r\n\r\nThese are likely just edge cases, but one such issue where this can be a problem is shown in #16261. Here, because both tf.multiply and the '\\*' overloaded operator were used, this caused name collisions for some intermediate tensors where you would have  tensor names like \"gradients/mul_grad/tuple/control_dependency_1\" and \"gradients/Mul_grad/Mul\" (since tf.multiply uses name=\"Mul\" while using the '\\*' operator uses name=\"mul\"). So when these tensors are dumped, only one \"mul_grad\" or \"Mul_grad\" directory can be created on specific file systems (like with Mac and Windows).\r\n\r\nFixes #16261"}
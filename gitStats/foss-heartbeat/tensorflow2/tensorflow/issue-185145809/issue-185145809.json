{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5195", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5195/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5195/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5195/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5195", "id": 185145809, "node_id": "MDU6SXNzdWUxODUxNDU4MDk=", "number": 5195, "title": "Sum Total of in-use chunks: 7.23GiB, but it tried to allocate 8.00GiB", "user": {"login": "ckcz123", "id": 8597348, "node_id": "MDQ6VXNlcjg1OTczNDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/8597348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ckcz123", "html_url": "https://github.com/ckcz123", "followers_url": "https://api.github.com/users/ckcz123/followers", "following_url": "https://api.github.com/users/ckcz123/following{/other_user}", "gists_url": "https://api.github.com/users/ckcz123/gists{/gist_id}", "starred_url": "https://api.github.com/users/ckcz123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ckcz123/subscriptions", "organizations_url": "https://api.github.com/users/ckcz123/orgs", "repos_url": "https://api.github.com/users/ckcz123/repos", "events_url": "https://api.github.com/users/ckcz123/events{/privacy}", "received_events_url": "https://api.github.com/users/ckcz123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-10-25T15:07:52Z", "updated_at": "2016-10-25T18:18:34Z", "closed_at": "2016-10-25T18:18:34Z", "author_association": "NONE", "body_html": "<blockquote>\n<p>I tensorflow/core/common_runtime/bfc_allocator.cc:689]      Summary of in-use Chunks by size:<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 22 Chunks of size 256 totalling 5.5KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 5 Chunks of size 512 totalling 2.5KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 1280 totalling 1.2KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 7499 Chunks of size 2048 totalling 14.65MiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1087 Chunks of size 4096 totalling 4.25MiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 4608 totalling 4.5KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 6144 totalling 6.0KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 616 Chunks of size 8192 totalling 4.81MiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 9984 totalling 9.8KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 4 Chunks of size 10240 totalling 40.0KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 2 Chunks of size 12288 totalling 24.0KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 303 Chunks of size 14336 totalling 4.14MiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 5 Chunks of size 198656 totalling 970.0KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 208384 totalling 203.5KiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 919 Chunks of size 8388608 totalling 7.18GiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 10775552 totalling 10.28MiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 14428160 totalling 13.76MiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:696] Sum Total of in-use chunks: 7.23GiB<br>\nI tensorflow/core/common_runtime/bfc_allocator.cc:698] Stats:<br>\nLimit:                  7967745639<br>\nInUse:                  7764832256<br>\nMaxInUse:               7764842496<br>\nNumAllocs:                   60834<br>\nMaxAllocSize:             14428160</p>\n<p>W tensorflow/core/common_runtime/bfc_allocator.cc:270] ****************************************************************************************************<br>\nW tensorflow/core/common_runtime/bfc_allocator.cc:271] Ran out of memory trying to allocate 8.00MiB.  See logs for memory state.<br>\nW tensorflow/core/framework/op_kernel.cc:968] Resource exhausted: OOM when allocating tensor with shape[1024,2048]<br>\nE tensorflow/stream_executor/cuda/cuda_driver.cc:965] failed to allocate 8.00G (8589934592 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY<br>\nE tensorflow/stream_executor/cuda/cuda_driver.cc:965] failed to allocate 8.00G (8589934592 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY</p>\n</blockquote>\n<p>I have a 8G GPU memory (7.8G for free), and the allocator need to use 7.23G, which could be able to allocate.<br>\nBut, it tried to allocate 8.00G, and threw out CUDA_ERROR_OUT_OF_MEMORY<br>\nI also set <code>config.gpu_options.allow_growth=True</code> , but it didn't matter.<br>\nHow can I solve it? Thanks a lot!</p>", "body_text": "I tensorflow/core/common_runtime/bfc_allocator.cc:689]      Summary of in-use Chunks by size:\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 22 Chunks of size 256 totalling 5.5KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 5 Chunks of size 512 totalling 2.5KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 1280 totalling 1.2KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 7499 Chunks of size 2048 totalling 14.65MiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1087 Chunks of size 4096 totalling 4.25MiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 4608 totalling 4.5KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 6144 totalling 6.0KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 616 Chunks of size 8192 totalling 4.81MiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 9984 totalling 9.8KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 4 Chunks of size 10240 totalling 40.0KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 2 Chunks of size 12288 totalling 24.0KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 303 Chunks of size 14336 totalling 4.14MiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 5 Chunks of size 198656 totalling 970.0KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 208384 totalling 203.5KiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 919 Chunks of size 8388608 totalling 7.18GiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 10775552 totalling 10.28MiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 14428160 totalling 13.76MiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:696] Sum Total of in-use chunks: 7.23GiB\nI tensorflow/core/common_runtime/bfc_allocator.cc:698] Stats:\nLimit:                  7967745639\nInUse:                  7764832256\nMaxInUse:               7764842496\nNumAllocs:                   60834\nMaxAllocSize:             14428160\nW tensorflow/core/common_runtime/bfc_allocator.cc:270] ****************************************************************************************************\nW tensorflow/core/common_runtime/bfc_allocator.cc:271] Ran out of memory trying to allocate 8.00MiB.  See logs for memory state.\nW tensorflow/core/framework/op_kernel.cc:968] Resource exhausted: OOM when allocating tensor with shape[1024,2048]\nE tensorflow/stream_executor/cuda/cuda_driver.cc:965] failed to allocate 8.00G (8589934592 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\nE tensorflow/stream_executor/cuda/cuda_driver.cc:965] failed to allocate 8.00G (8589934592 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n\nI have a 8G GPU memory (7.8G for free), and the allocator need to use 7.23G, which could be able to allocate.\nBut, it tried to allocate 8.00G, and threw out CUDA_ERROR_OUT_OF_MEMORY\nI also set config.gpu_options.allow_growth=True , but it didn't matter.\nHow can I solve it? Thanks a lot!", "body": "> I tensorflow/core/common_runtime/bfc_allocator.cc:689]      Summary of in-use Chunks by size: \n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 22 Chunks of size 256 totalling 5.5KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 5 Chunks of size 512 totalling 2.5KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 1280 totalling 1.2KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 7499 Chunks of size 2048 totalling 14.65MiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 1087 Chunks of size 4096 totalling 4.25MiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 4608 totalling 4.5KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 6144 totalling 6.0KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 616 Chunks of size 8192 totalling 4.81MiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 9984 totalling 9.8KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 4 Chunks of size 10240 totalling 40.0KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 2 Chunks of size 12288 totalling 24.0KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 303 Chunks of size 14336 totalling 4.14MiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 5 Chunks of size 198656 totalling 970.0KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 208384 totalling 203.5KiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 919 Chunks of size 8388608 totalling 7.18GiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 10775552 totalling 10.28MiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:692] 1 Chunks of size 14428160 totalling 13.76MiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:696] Sum Total of in-use chunks: 7.23GiB\n> I tensorflow/core/common_runtime/bfc_allocator.cc:698] Stats: \n> Limit:                  7967745639\n> InUse:                  7764832256\n> MaxInUse:               7764842496\n> NumAllocs:                   60834\n> MaxAllocSize:             14428160\n> \n> W tensorflow/core/common_runtime/bfc_allocator.cc:270] ****************************************************************************************************\n> W tensorflow/core/common_runtime/bfc_allocator.cc:271] Ran out of memory trying to allocate 8.00MiB.  See logs for memory state.\n> W tensorflow/core/framework/op_kernel.cc:968] Resource exhausted: OOM when allocating tensor with shape[1024,2048]\n> E tensorflow/stream_executor/cuda/cuda_driver.cc:965] failed to allocate 8.00G (8589934592 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n> E tensorflow/stream_executor/cuda/cuda_driver.cc:965] failed to allocate 8.00G (8589934592 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY\n\nI have a 8G GPU memory (7.8G for free), and the allocator need to use 7.23G, which could be able to allocate.\nBut, it tried to allocate 8.00G, and threw out CUDA_ERROR_OUT_OF_MEMORY\nI also set `config.gpu_options.allow_growth=True` , but it didn't matter.\nHow can I solve it? Thanks a lot!\n"}
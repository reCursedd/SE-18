{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18231", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18231/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18231/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18231/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/18231", "id": 311111154, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc5MzAwODE1", "number": 18231, "title": "Fix windows boosted_trees test failure", "user": {"login": "pvaneck", "id": 1868861, "node_id": "MDQ6VXNlcjE4Njg4NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1868861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvaneck", "html_url": "https://github.com/pvaneck", "followers_url": "https://api.github.com/users/pvaneck/followers", "following_url": "https://api.github.com/users/pvaneck/following{/other_user}", "gists_url": "https://api.github.com/users/pvaneck/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvaneck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvaneck/subscriptions", "organizations_url": "https://api.github.com/users/pvaneck/orgs", "repos_url": "https://api.github.com/users/pvaneck/repos", "events_url": "https://api.github.com/users/pvaneck/events{/privacy}", "received_events_url": "https://api.github.com/users/pvaneck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-04-04T07:14:29Z", "updated_at": "2018-05-17T17:06:22Z", "closed_at": "2018-05-17T17:06:22Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18231", "html_url": "https://github.com/tensorflow/tensorflow/pull/18231", "diff_url": "https://github.com/tensorflow/tensorflow/pull/18231.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/18231.patch"}, "body_html": "<p>In the Windows cmake build, the test \"python/kernel_tests/boosted_trees/training_ops_test.py\" is failing on a Proto comparison. This commit changes one of the expected values to use<br>\nhigher decimal precision which should pass on all builds. (-24.0143 to -24.014299)</p>\n<p>The windows error of topic:</p>\n<p><code>13:01:23 Traceback (most recent call last): 13:01:23   File \"C:/tf_jenkins/workspace/tensorflow-master-win-cmake-py/tensorflow/python/kernel_tests/boosted_trees/training_ops_test.py\", line 1363, in testPostPruningOfAllNodes 13:01:23     \"\"\", res_ensemble) 13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\test_util.py\", line 840, in assertProtoEquals 13:01:23     self._AssertProtoEquals(expected_message, message, msg=msg) 13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\test_util.py\", line 817, in _AssertProtoEquals 13:01:23     compare.assertProtoEqual(self, a, b, normalize_numbers=True, msg=msg) 13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\util\\protobuf\\compare.py\", line 107, in assertProtoEqual 13:01:23     msg=msg) 13:01:23 AssertionError: 'tree[570 chars]4.0143\\n  }\\n}\\ntree_metadata {\\n}\\ngrowing_me[62 chars]n}\\n' != 'tree[570 chars]4.014299\\n  }\\n}\\ntree_metadata {\\n}\\ngrowing_[64 chars]n}\\n'</code></p>\n<p>This stems from the 32 bit floating point imprecision. For example:</p>\n<blockquote>\n<p>import numpy as np<br>\np = np.float32(-24.0143)<br>\n'{:.12f}'.format(p)<br>\n<strong>'-24.014299392700'</strong></p>\n</blockquote>\n<p>This commit also assigns the expected result to a variable to remain consistent with the other tests.</p>", "body_text": "In the Windows cmake build, the test \"python/kernel_tests/boosted_trees/training_ops_test.py\" is failing on a Proto comparison. This commit changes one of the expected values to use\nhigher decimal precision which should pass on all builds. (-24.0143 to -24.014299)\nThe windows error of topic:\n13:01:23 Traceback (most recent call last): 13:01:23   File \"C:/tf_jenkins/workspace/tensorflow-master-win-cmake-py/tensorflow/python/kernel_tests/boosted_trees/training_ops_test.py\", line 1363, in testPostPruningOfAllNodes 13:01:23     \"\"\", res_ensemble) 13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\test_util.py\", line 840, in assertProtoEquals 13:01:23     self._AssertProtoEquals(expected_message, message, msg=msg) 13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\test_util.py\", line 817, in _AssertProtoEquals 13:01:23     compare.assertProtoEqual(self, a, b, normalize_numbers=True, msg=msg) 13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\util\\protobuf\\compare.py\", line 107, in assertProtoEqual 13:01:23     msg=msg) 13:01:23 AssertionError: 'tree[570 chars]4.0143\\n  }\\n}\\ntree_metadata {\\n}\\ngrowing_me[62 chars]n}\\n' != 'tree[570 chars]4.014299\\n  }\\n}\\ntree_metadata {\\n}\\ngrowing_[64 chars]n}\\n'\nThis stems from the 32 bit floating point imprecision. For example:\n\nimport numpy as np\np = np.float32(-24.0143)\n'{:.12f}'.format(p)\n'-24.014299392700'\n\nThis commit also assigns the expected result to a variable to remain consistent with the other tests.", "body": "In the Windows cmake build, the test \"python/kernel_tests/boosted_trees/training_ops_test.py\" is failing on a Proto comparison. This commit changes one of the expected values to use\r\nhigher decimal precision which should pass on all builds. (-24.0143 to -24.014299)\r\n\r\nThe windows error of topic:\r\n\r\n`13:01:23 Traceback (most recent call last):\r\n13:01:23   File \"C:/tf_jenkins/workspace/tensorflow-master-win-cmake-py/tensorflow/python/kernel_tests/boosted_trees/training_ops_test.py\", line 1363, in testPostPruningOfAllNodes\r\n13:01:23     \"\"\", res_ensemble)\r\n13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\test_util.py\", line 840, in assertProtoEquals\r\n13:01:23     self._AssertProtoEquals(expected_message, message, msg=msg)\r\n13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\test_util.py\", line 817, in _AssertProtoEquals\r\n13:01:23     compare.assertProtoEqual(self, a, b, normalize_numbers=True, msg=msg)\r\n13:01:23   File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\util\\protobuf\\compare.py\", line 107, in assertProtoEqual\r\n13:01:23     msg=msg)\r\n13:01:23 AssertionError: 'tree[570 chars]4.0143\\n  }\\n}\\ntree_metadata {\\n}\\ngrowing_me[62 chars]n}\\n' != 'tree[570 chars]4.014299\\n  }\\n}\\ntree_metadata {\\n}\\ngrowing_[64 chars]n}\\n'`\r\n\r\nThis stems from the 32 bit floating point imprecision. For example:\r\n\r\n> import numpy as np\r\n> p = np.float32(-24.0143)\r\n> '{:.12f}'.format(p)\r\n**'-24.014299392700'**\r\n\r\nThis commit also assigns the expected result to a variable to remain consistent with the other tests.\r\n"}
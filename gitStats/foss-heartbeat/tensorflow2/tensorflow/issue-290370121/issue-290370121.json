{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16279", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16279/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16279/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16279/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16279", "id": 290370121, "node_id": "MDU6SXNzdWUyOTAzNzAxMjE=", "number": 16279, "title": "While using tf.while_loop , the _Slicehelper chooses strided_slice op(req 4 args) instead of slice op(req 3 args)", "user": {"login": "Aashit-Sharma", "id": 29089622, "node_id": "MDQ6VXNlcjI5MDg5NjIy", "avatar_url": "https://avatars0.githubusercontent.com/u/29089622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aashit-Sharma", "html_url": "https://github.com/Aashit-Sharma", "followers_url": "https://api.github.com/users/Aashit-Sharma/followers", "following_url": "https://api.github.com/users/Aashit-Sharma/following{/other_user}", "gists_url": "https://api.github.com/users/Aashit-Sharma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aashit-Sharma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aashit-Sharma/subscriptions", "organizations_url": "https://api.github.com/users/Aashit-Sharma/orgs", "repos_url": "https://api.github.com/users/Aashit-Sharma/repos", "events_url": "https://api.github.com/users/Aashit-Sharma/events{/privacy}", "received_events_url": "https://api.github.com/users/Aashit-Sharma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2018-01-22T07:15:08Z", "updated_at": "2018-04-18T05:49:12Z", "closed_at": "2018-04-18T05:49:12Z", "author_association": "NONE", "body_html": "<p>I am facing this issue while creating a decoder using tf.while_loop</p>\n<p><code> train_decoder = tf.while_loop(self.coarse_decoder_condition, self.coarse_decoder_function, [self.iter_decoder_c, tf.zeros([1,self.c_dec_size]), tf.ones([self.c_dec_size])] , shape_invariants =[self.iter_decoder_c.get_shape(),tf.TensorShape([None,self.c_dec_size]),tf.TensorShape([self.c_dec_size]) ] )</code></p>\n<p>here is what comes up in the cmd</p>\n<pre><code>  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2816, in while_loop\n    result = loop_context.BuildLoop(cond, body, loop_vars, shape_invariants)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2640, in BuildLoop\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2576, in _BuildLoop\n    c = ops.convert_to_tensor(pred(*packed_vars))\n\n  File \"C:\\Users\\HP\\Music\\Final\\nn.py\", line 200, in coarse_decoder_condition\n    return it[0] &lt; self.oplen_c[0]\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 538, in _SliceHelper\n    name=name)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 706, in strided_slice\n    shrink_axis_mask=shrink_axis_mask)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 5429, in strided_slice\n    name=name)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-\npackages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_he\nlper\n    op_def=op_def)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2958, in create_op\n    set_shapes_for_outputs(ret)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2209, in set_shapes_for_outputs\n\n    shapes = shape_func(op)\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2159, in call_with_requiring\n    return call_cpp_shape_fn(op, require_shape_fn=True)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 627, in call_cpp_shap\ne_fn\n    require_shape_fn)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 691, in _call_cpp_sha\npe_fn_impl\n    raise ValueError(err.message)\nValueError: Index out of range using input dim 0; input has only 0 dims for 'Coarse_Decoder/while/strided_slice' (op: 'StridedSlice') with input shape\ns: [], [1], [1], [1] and with computed input tensors: input[3] = &lt;1&gt;.\n\n\n</code></pre>\n<p>Essentially what is happening is that the while_loop =&gt; buildloop =&gt; _SliceHelper</p>\n<p>the _sliceHelper chooses strided_slice op(which requires 4 args instead of 3) instead of just slice op</p>\n<p>This is causing me to get an error while passing 3 args , which is what my requirement is.</p>\n<p>A similar issue highlighted <a href=\"https://github.com/tensorflow/models/issues/817\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/models/issues/817/hovercard\">here </a></p>\n<p>I can't manually choose slice() over strided_slice()</p>\n<p>Any help would be appreciated <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5376757\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/michaelisard\">@michaelisard</a></p>", "body_text": "I am facing this issue while creating a decoder using tf.while_loop\n train_decoder = tf.while_loop(self.coarse_decoder_condition, self.coarse_decoder_function, [self.iter_decoder_c, tf.zeros([1,self.c_dec_size]), tf.ones([self.c_dec_size])] , shape_invariants =[self.iter_decoder_c.get_shape(),tf.TensorShape([None,self.c_dec_size]),tf.TensorShape([self.c_dec_size]) ] )\nhere is what comes up in the cmd\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2816, in while_loop\n    result = loop_context.BuildLoop(cond, body, loop_vars, shape_invariants)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2640, in BuildLoop\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2576, in _BuildLoop\n    c = ops.convert_to_tensor(pred(*packed_vars))\n\n  File \"C:\\Users\\HP\\Music\\Final\\nn.py\", line 200, in coarse_decoder_condition\n    return it[0] < self.oplen_c[0]\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 538, in _SliceHelper\n    name=name)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 706, in strided_slice\n    shrink_axis_mask=shrink_axis_mask)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 5429, in strided_slice\n    name=name)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-\npackages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_he\nlper\n    op_def=op_def)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2958, in create_op\n    set_shapes_for_outputs(ret)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2209, in set_shapes_for_outputs\n\n    shapes = shape_func(op)\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2159, in call_with_requiring\n    return call_cpp_shape_fn(op, require_shape_fn=True)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 627, in call_cpp_shap\ne_fn\n    require_shape_fn)\n\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 691, in _call_cpp_sha\npe_fn_impl\n    raise ValueError(err.message)\nValueError: Index out of range using input dim 0; input has only 0 dims for 'Coarse_Decoder/while/strided_slice' (op: 'StridedSlice') with input shape\ns: [], [1], [1], [1] and with computed input tensors: input[3] = <1>.\n\n\n\nEssentially what is happening is that the while_loop => buildloop => _SliceHelper\nthe _sliceHelper chooses strided_slice op(which requires 4 args instead of 3) instead of just slice op\nThis is causing me to get an error while passing 3 args , which is what my requirement is.\nA similar issue highlighted here \nI can't manually choose slice() over strided_slice()\nAny help would be appreciated @michaelisard", "body": "I am facing this issue while creating a decoder using tf.while_loop\r\n\r\n`\r\ntrain_decoder = tf.while_loop(self.coarse_decoder_condition, self.coarse_decoder_function,\r\n[self.iter_decoder_c, tf.zeros([1,self.c_dec_size]), tf.ones([self.c_dec_size])] ,\r\n\t\t\t\tshape_invariants =[self.iter_decoder_c.get_shape(),tf.TensorShape([None,self.c_dec_size]),tf.TensorShape([self.c_dec_size]) ] )`\r\n\r\n\r\nhere is what comes up in the cmd\r\n\r\n```\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2816, in while_loop\r\n    result = loop_context.BuildLoop(cond, body, loop_vars, shape_invariants)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2640, in BuildLoop\r\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 2576, in _BuildLoop\r\n    c = ops.convert_to_tensor(pred(*packed_vars))\r\n\r\n  File \"C:\\Users\\HP\\Music\\Final\\nn.py\", line 200, in coarse_decoder_condition\r\n    return it[0] < self.oplen_c[0]\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 538, in _SliceHelper\r\n    name=name)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\array_ops.py\", line 706, in strided_slice\r\n    shrink_axis_mask=shrink_axis_mask)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\ops\\gen_array_ops.py\", line 5429, in strided_slice\r\n    name=name)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-\r\npackages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_he\r\nlper\r\n    op_def=op_def)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2958, in create_op\r\n    set_shapes_for_outputs(ret)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2209, in set_shapes_for_outputs\r\n\r\n    shapes = shape_func(op)\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2159, in call_with_requiring\r\n    return call_cpp_shape_fn(op, require_shape_fn=True)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 627, in call_cpp_shap\r\ne_fn\r\n    require_shape_fn)\r\n\r\n  File \"C:\\Users\\HP\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\common_shapes.py\", line 691, in _call_cpp_sha\r\npe_fn_impl\r\n    raise ValueError(err.message)\r\nValueError: Index out of range using input dim 0; input has only 0 dims for 'Coarse_Decoder/while/strided_slice' (op: 'StridedSlice') with input shape\r\ns: [], [1], [1], [1] and with computed input tensors: input[3] = <1>.\r\n\r\n\r\n```\r\n\r\nEssentially what is happening is that the while_loop => buildloop => _SliceHelper\r\n\r\nthe _sliceHelper chooses strided_slice op(which requires 4 args instead of 3) instead of just slice op\r\n\r\nThis is causing me to get an error while passing 3 args , which is what my requirement is.\r\n\r\nA similar issue highlighted [here ](https://github.com/tensorflow/models/issues/817)\r\n\r\nI can't manually choose slice() over strided_slice()\r\n\r\nAny help would be appreciated @michaelisard"}
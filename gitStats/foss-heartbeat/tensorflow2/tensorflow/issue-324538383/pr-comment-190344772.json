{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/190344772", "pull_request_review_id": 122700608, "id": 190344772, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MDM0NDc3Mg==", "diff_hunk": "@@ -57,6 +57,18 @@ def pairwise_distance_np(feature, squared=False):\n       pairwise_distances.diagonal())\n   return pairwise_distances\n \n+class PairwiseCosineTest(tf.test.TestCase):\n+\n+  def testPairwiseCosine(self):\n+    with self.test_session():\n+      num_data = 10\n+      feat_dim = 6\n+\n+      embedding = np.random.rand(num_data, feat_dim).astype(np.float32)\n+      sklearn_result = 1 - metric.pairwise.cosine_similarity(embedding)\n+      dist_matrix = metric_loss_ops.pairwise_distances_cosine(embedding)\n+      self.assertAllClose(dist_matrix.eval(), sklearn_result, rtol=1e-06)\n+\n ", "path": "tensorflow/contrib/losses/python/metric_learning/metric_loss_ops_test.py", "position": 16, "original_position": 16, "commit_id": "34928526903fc956ecfb0bd3bc7f4bcc2872a4ac", "original_commit_id": "08175068682be8363990e6e444a723dbd31b5054", "user": {"login": "sguada", "id": 1766524, "node_id": "MDQ6VXNlcjE3NjY1MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sguada", "html_url": "https://github.com/sguada", "followers_url": "https://api.github.com/users/sguada/followers", "following_url": "https://api.github.com/users/sguada/following{/other_user}", "gists_url": "https://api.github.com/users/sguada/gists{/gist_id}", "starred_url": "https://api.github.com/users/sguada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sguada/subscriptions", "organizations_url": "https://api.github.com/users/sguada/orgs", "repos_url": "https://api.github.com/users/sguada/repos", "events_url": "https://api.github.com/users/sguada/events{/privacy}", "received_events_url": "https://api.github.com/users/sguada/received_events", "type": "User", "site_admin": false}, "body": "Add a test where you change the pairwise_dist_fn", "created_at": "2018-05-23T18:00:35Z", "updated_at": "2018-06-27T16:56:21Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/19398#discussion_r190344772", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19398", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/190344772"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/19398#discussion_r190344772"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19398"}}, "body_html": "<p>Add a test where you change the pairwise_dist_fn</p>", "body_text": "Add a test where you change the pairwise_dist_fn"}
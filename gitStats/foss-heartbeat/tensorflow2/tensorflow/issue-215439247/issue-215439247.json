{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8557", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8557/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8557/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8557/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8557", "id": 215439247, "node_id": "MDU6SXNzdWUyMTU0MzkyNDc=", "number": 8557, "title": "Error building TensorFlow with local LLVM repository. ( Using local_repository extension in bazel )", "user": {"login": "annanay25", "id": 10982987, "node_id": "MDQ6VXNlcjEwOTgyOTg3", "avatar_url": "https://avatars2.githubusercontent.com/u/10982987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annanay25", "html_url": "https://github.com/annanay25", "followers_url": "https://api.github.com/users/annanay25/followers", "following_url": "https://api.github.com/users/annanay25/following{/other_user}", "gists_url": "https://api.github.com/users/annanay25/gists{/gist_id}", "starred_url": "https://api.github.com/users/annanay25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annanay25/subscriptions", "organizations_url": "https://api.github.com/users/annanay25/orgs", "repos_url": "https://api.github.com/users/annanay25/repos", "events_url": "https://api.github.com/users/annanay25/events{/privacy}", "received_events_url": "https://api.github.com/users/annanay25/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-20T14:33:48Z", "updated_at": "2017-04-07T03:27:57Z", "closed_at": "2017-03-21T03:22:35Z", "author_association": "NONE", "body_html": "<p>Essentially, I want to run TensorFlow with a custom LLVM repository and not the llvm-mirror that bazel pulls from.</p>\n<p>I made the following changes:</p>\n<ol>\n<li>\n<p>Changed the <code>temp_workaround_http_archive</code> rule in <code>//tensorflow/workspace.bzl</code> to:</p>\n<pre><code>   native.local_repository (\n       name = \"llvm\",\n       path = \"/git/llvm/\",\n   )\n</code></pre>\n</li>\n</ol>\n<p>Where <code>/git/llvm</code> is my local llvm repository.</p>\n<ol start=\"2\">\n<li>\n<p>In <code>/git/llvm</code> I added the file <code>WORKSPACE</code> containing:</p>\n<pre><code> workspace( name = \"llvm\" )\n</code></pre>\n</li>\n</ol>\n<p>Error log:</p>\n<pre><code>bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\nERROR: /git/tensorflow/tensorflow/tools/pip_package/BUILD:81:1: no such package '@llvm//': BUILD file not found on package path and referenced by '//tensorflow/tools/pip_package:licenses'.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\nINFO: Elapsed time: 0.219s\n</code></pre>\n<p>Installed TensorFlow from source. Here is the version info:</p>\n<pre><code>$ git rev-parse HEAD\n4c3bb1aeb7bb46bea35036433742a720f39ce348\n\n$ bazel version\nBuild label: 0.4.5\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Mar 16 12:19:38 2017 (1489666778)\nBuild timestamp: 1489666778\nBuild timestamp as int: 1489666778\n</code></pre>\n<p>Now, obviously a <code>llvm.build</code> file is required, I just need to know how and where to place it. Also, how can I build tools like Polly from the bazel build files?</p>\n<p>Thanks in advance!</p>", "body_text": "Essentially, I want to run TensorFlow with a custom LLVM repository and not the llvm-mirror that bazel pulls from.\nI made the following changes:\n\n\nChanged the temp_workaround_http_archive rule in //tensorflow/workspace.bzl to:\n   native.local_repository (\n       name = \"llvm\",\n       path = \"/git/llvm/\",\n   )\n\n\n\nWhere /git/llvm is my local llvm repository.\n\n\nIn /git/llvm I added the file WORKSPACE containing:\n workspace( name = \"llvm\" )\n\n\n\nError log:\nbazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\nERROR: /git/tensorflow/tensorflow/tools/pip_package/BUILD:81:1: no such package '@llvm//': BUILD file not found on package path and referenced by '//tensorflow/tools/pip_package:licenses'.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\nINFO: Elapsed time: 0.219s\n\nInstalled TensorFlow from source. Here is the version info:\n$ git rev-parse HEAD\n4c3bb1aeb7bb46bea35036433742a720f39ce348\n\n$ bazel version\nBuild label: 0.4.5\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Mar 16 12:19:38 2017 (1489666778)\nBuild timestamp: 1489666778\nBuild timestamp as int: 1489666778\n\nNow, obviously a llvm.build file is required, I just need to know how and where to place it. Also, how can I build tools like Polly from the bazel build files?\nThanks in advance!", "body": "Essentially, I want to run TensorFlow with a custom LLVM repository and not the llvm-mirror that bazel pulls from. \r\n\r\nI made the following changes:\r\n\r\n1. Changed the ```temp_workaround_http_archive``` rule in ```//tensorflow/workspace.bzl``` to:\r\n\r\n          native.local_repository (\r\n              name = \"llvm\",\r\n              path = \"/git/llvm/\",\r\n          )\r\n\r\nWhere ```/git/llvm``` is my local llvm repository.\r\n\r\n2. In ```/git/llvm``` I added the file ```WORKSPACE``` containing:\r\n\r\n        workspace( name = \"llvm\" )\r\n\r\n\r\nError log:\r\n\r\n    bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n    ERROR: /git/tensorflow/tensorflow/tools/pip_package/BUILD:81:1: no such package '@llvm//': BUILD file not found on package path and referenced by '//tensorflow/tools/pip_package:licenses'.\r\n    ERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\r\n    INFO: Elapsed time: 0.219s\r\n\r\n\r\nInstalled TensorFlow from source. Here is the version info:\r\n\r\n    $ git rev-parse HEAD\r\n    4c3bb1aeb7bb46bea35036433742a720f39ce348\r\n\r\n    $ bazel version\r\n    Build label: 0.4.5\r\n    Build target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\n    Build time: Thu Mar 16 12:19:38 2017 (1489666778)\r\n    Build timestamp: 1489666778\r\n    Build timestamp as int: 1489666778\r\n\r\n\r\nNow, obviously a ```llvm.build``` file is required, I just need to know how and where to place it. Also, how can I build tools like Polly from the bazel build files?\r\n\r\nThanks in advance!\r\n\r\n"}
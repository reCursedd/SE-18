{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/323598263", "html_url": "https://github.com/tensorflow/tensorflow/issues/12123#issuecomment-323598263", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12123", "id": 323598263, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzU5ODI2Mw==", "user": {"login": "lissahyacinth", "id": 19927939, "node_id": "MDQ6VXNlcjE5OTI3OTM5", "avatar_url": "https://avatars3.githubusercontent.com/u/19927939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lissahyacinth", "html_url": "https://github.com/lissahyacinth", "followers_url": "https://api.github.com/users/lissahyacinth/followers", "following_url": "https://api.github.com/users/lissahyacinth/following{/other_user}", "gists_url": "https://api.github.com/users/lissahyacinth/gists{/gist_id}", "starred_url": "https://api.github.com/users/lissahyacinth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lissahyacinth/subscriptions", "organizations_url": "https://api.github.com/users/lissahyacinth/orgs", "repos_url": "https://api.github.com/users/lissahyacinth/repos", "events_url": "https://api.github.com/users/lissahyacinth/events{/privacy}", "received_events_url": "https://api.github.com/users/lissahyacinth/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-20T17:10:27Z", "updated_at": "2017-08-20T17:10:27Z", "author_association": "NONE", "body_html": "<p>Experienced the same issue with boringSSL, dug into it from and found Werror is being set in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/third_party/boringssl/add_boringssl_s390x.patch\">add_boringssl_s390x.patch</a> on line 71, which is causing the build failure.</p>\n<pre lang=\"+boringssl_copts\" data-meta=\"= select({\"><code>+    \":windows\": [\n+        \"-DWIN32_LEAN_AND_MEAN\",\n+    ],\n+    \"//conditions:default\": [\n+        # Assembler option --noexecstack adds .note.GNU-stack to each object to\n+        # ensure that binaries can be built with non-executable stack.\n+        \"-Wa,--noexecstack\",\n+\n+        # This is needed on Linux systems (at least) to get rwlock in pthread.\n+        \"-D_XOPEN_SOURCE=700\",\n+\n+        # This list of warnings should match those in the top-level CMakeLists.txt.\n+        \"-Wall\",\n+        \"-Werror\",\n+        \"-Wformat=2\",\n+        \"-Wsign-compare\",\n+        \"-Wmissing-field-initializers\",\n+        \"-Wwrite-strings\",\n+        \"-Wshadow\",\n+        \"-fno-common\",\n+    ],\n+})\n</code></pre>\n<p><code>-Werror</code> can just be replaced with <code>Wno-excessive-errors</code>, as suggested by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5151497\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mountaintom\">@mountaintom</a> , and TF will successfully build. Not sure if this is a sufficient fix as I'm not familiar with the library, but it does bypass the issue for now.</p>", "body_text": "Experienced the same issue with boringSSL, dug into it from and found Werror is being set in add_boringssl_s390x.patch on line 71, which is causing the build failure.\n+    \":windows\": [\n+        \"-DWIN32_LEAN_AND_MEAN\",\n+    ],\n+    \"//conditions:default\": [\n+        # Assembler option --noexecstack adds .note.GNU-stack to each object to\n+        # ensure that binaries can be built with non-executable stack.\n+        \"-Wa,--noexecstack\",\n+\n+        # This is needed on Linux systems (at least) to get rwlock in pthread.\n+        \"-D_XOPEN_SOURCE=700\",\n+\n+        # This list of warnings should match those in the top-level CMakeLists.txt.\n+        \"-Wall\",\n+        \"-Werror\",\n+        \"-Wformat=2\",\n+        \"-Wsign-compare\",\n+        \"-Wmissing-field-initializers\",\n+        \"-Wwrite-strings\",\n+        \"-Wshadow\",\n+        \"-fno-common\",\n+    ],\n+})\n\n-Werror can just be replaced with Wno-excessive-errors, as suggested by @mountaintom , and TF will successfully build. Not sure if this is a sufficient fix as I'm not familiar with the library, but it does bypass the issue for now.", "body": "Experienced the same issue with boringSSL, dug into it from and found Werror is being set in [add_boringssl_s390x.patch](https://github.com/tensorflow/tensorflow/blob/master/third_party/boringssl/add_boringssl_s390x.patch) on line 71, which is causing the build failure.\r\n\r\n```+boringssl_copts = select({\r\n+    \":windows\": [\r\n+        \"-DWIN32_LEAN_AND_MEAN\",\r\n+    ],\r\n+    \"//conditions:default\": [\r\n+        # Assembler option --noexecstack adds .note.GNU-stack to each object to\r\n+        # ensure that binaries can be built with non-executable stack.\r\n+        \"-Wa,--noexecstack\",\r\n+\r\n+        # This is needed on Linux systems (at least) to get rwlock in pthread.\r\n+        \"-D_XOPEN_SOURCE=700\",\r\n+\r\n+        # This list of warnings should match those in the top-level CMakeLists.txt.\r\n+        \"-Wall\",\r\n+        \"-Werror\",\r\n+        \"-Wformat=2\",\r\n+        \"-Wsign-compare\",\r\n+        \"-Wmissing-field-initializers\",\r\n+        \"-Wwrite-strings\",\r\n+        \"-Wshadow\",\r\n+        \"-fno-common\",\r\n+    ],\r\n+})\r\n```\r\n\r\n`-Werror` can just be replaced with `Wno-excessive-errors`, as suggested by @mountaintom , and TF will successfully build. Not sure if this is a sufficient fix as I'm not familiar with the library, but it does bypass the issue for now. "}
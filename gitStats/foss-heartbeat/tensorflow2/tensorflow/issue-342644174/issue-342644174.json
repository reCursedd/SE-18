{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20962", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20962/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20962/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20962/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20962", "id": 342644174, "node_id": "MDU6SXNzdWUzNDI2NDQxNzQ=", "number": 20962, "title": "Miss-leading explanation of 'export_tflite_ssd_graph.py' ", "user": {"login": "MaeThird", "id": 14851411, "node_id": "MDQ6VXNlcjE0ODUxNDEx", "avatar_url": "https://avatars2.githubusercontent.com/u/14851411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaeThird", "html_url": "https://github.com/MaeThird", "followers_url": "https://api.github.com/users/MaeThird/followers", "following_url": "https://api.github.com/users/MaeThird/following{/other_user}", "gists_url": "https://api.github.com/users/MaeThird/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaeThird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaeThird/subscriptions", "organizations_url": "https://api.github.com/users/MaeThird/orgs", "repos_url": "https://api.github.com/users/MaeThird/repos", "events_url": "https://api.github.com/users/MaeThird/events{/privacy}", "received_events_url": "https://api.github.com/users/MaeThird/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, {"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}, {"login": "pkulzc", "id": 35853368, "node_id": "MDQ6VXNlcjM1ODUzMzY4", "avatar_url": "https://avatars3.githubusercontent.com/u/35853368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkulzc", "html_url": "https://github.com/pkulzc", "followers_url": "https://api.github.com/users/pkulzc/followers", "following_url": "https://api.github.com/users/pkulzc/following{/other_user}", "gists_url": "https://api.github.com/users/pkulzc/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkulzc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkulzc/subscriptions", "organizations_url": "https://api.github.com/users/pkulzc/orgs", "repos_url": "https://api.github.com/users/pkulzc/repos", "events_url": "https://api.github.com/users/pkulzc/events{/privacy}", "received_events_url": "https://api.github.com/users/pkulzc/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-07-19T09:13:02Z", "updated_at": "2018-07-20T15:23:28Z", "closed_at": "2018-07-20T15:23:28Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Y</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Arch</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>: PC</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: newest from master branch</li>\n<li><strong>Python version</strong>: 3.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.14</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: gcc-7.1</li>\n<li><strong>CUDA/cuDNN version</strong>: cuda-9.2,cudnn-7.1</li>\n<li><strong>GPU model and memory</strong>: 16G</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>The function explanation of <strong>export_tflite_ssd_graph.py</strong> said<br>\n<code>Outputs: If add_postprocessing_op is true: frozen graph adds a TFLite_Detection_PostProcess custom op node has four outputs: detection_boxes: a float32 tensor of shape [1, num_boxes, 4] with box locations detection_scores: a float32 tensor of shape [1, num_boxes] with class scores detection_classes: a float32 tensor of shape [1, num_boxes] with class indices num_boxes: a float32 tensor of size 1 containing the number of detected boxes</code></p>\n<p>But according to my test the output sequence is  <strong>boxes, indice, scores ,num</strong> not <strong>boxes,scores,indice,num</strong>. (in <code>detection_postprocess.cc</code> seq is also <strong>boxes, indice, scores ,num</strong> )<br>\nAnd in <strong>export_tflite_ssd_graph_lib.py</strong><br>\nthe <code>def get_const_center_size_encoded_anchors(anchors)</code> 's return shape is obviously<br>\n<strong>[num_anchors,4]</strong> not <strong>[4,num_anchors]</strong>.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Y\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Arch\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: PC\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): newest from master branch\nPython version: 3.6\nBazel version (if compiling from source): 0.14\nGCC/Compiler version (if compiling from source): gcc-7.1\nCUDA/cuDNN version: cuda-9.2,cudnn-7.1\nGPU model and memory: 16G\nExact command to reproduce:\n\nThe function explanation of export_tflite_ssd_graph.py said\nOutputs: If add_postprocessing_op is true: frozen graph adds a TFLite_Detection_PostProcess custom op node has four outputs: detection_boxes: a float32 tensor of shape [1, num_boxes, 4] with box locations detection_scores: a float32 tensor of shape [1, num_boxes] with class scores detection_classes: a float32 tensor of shape [1, num_boxes] with class indices num_boxes: a float32 tensor of size 1 containing the number of detected boxes\nBut according to my test the output sequence is  boxes, indice, scores ,num not boxes,scores,indice,num. (in detection_postprocess.cc seq is also boxes, indice, scores ,num )\nAnd in export_tflite_ssd_graph_lib.py\nthe def get_const_center_size_encoded_anchors(anchors) 's return shape is obviously\n[num_anchors,4] not [4,num_anchors].", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Y\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Arch\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: PC\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: newest from master branch\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: 0.14\r\n- **GCC/Compiler version (if compiling from source)**: gcc-7.1\r\n- **CUDA/cuDNN version**: cuda-9.2,cudnn-7.1\r\n- **GPU model and memory**: 16G\r\n- **Exact command to reproduce**:\r\n\r\nThe function explanation of **export_tflite_ssd_graph.py** said \r\n`\r\nOutputs:\r\nIf add_postprocessing_op is true: frozen graph adds a\r\n  TFLite_Detection_PostProcess custom op node has four outputs:\r\n  detection_boxes: a float32 tensor of shape [1, num_boxes, 4] with box\r\n  locations\r\n  detection_scores: a float32 tensor of shape [1, num_boxes]\r\n  with class scores\r\n  detection_classes: a float32 tensor of shape [1, num_boxes]\r\n  with class indices\r\n  num_boxes: a float32 tensor of size 1 containing the number of detected boxes\r\n`\r\n\r\nBut according to my test the output sequence is  **boxes, indice, scores ,num** not **boxes,scores,indice,num**. (in `detection_postprocess.cc` seq is also **boxes, indice, scores ,num** )\r\nAnd in **export_tflite_ssd_graph_lib.py** \r\nthe `def get_const_center_size_encoded_anchors(anchors)` 's return shape is obviously \r\n**[num_anchors,4]** not **[4,num_anchors]**."}
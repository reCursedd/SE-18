{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1362", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1362/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1362/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1362/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1362", "id": 137950934, "node_id": "MDU6SXNzdWUxMzc5NTA5MzQ=", "number": 1362, "title": "matrix_solve_ls_op Compile Error on gcc 4.8 (using typename error)", "user": {"login": "mranjbar", "id": 17599525, "node_id": "MDQ6VXNlcjE3NTk5NTI1", "avatar_url": "https://avatars0.githubusercontent.com/u/17599525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mranjbar", "html_url": "https://github.com/mranjbar", "followers_url": "https://api.github.com/users/mranjbar/followers", "following_url": "https://api.github.com/users/mranjbar/following{/other_user}", "gists_url": "https://api.github.com/users/mranjbar/gists{/gist_id}", "starred_url": "https://api.github.com/users/mranjbar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mranjbar/subscriptions", "organizations_url": "https://api.github.com/users/mranjbar/orgs", "repos_url": "https://api.github.com/users/mranjbar/repos", "events_url": "https://api.github.com/users/mranjbar/events{/privacy}", "received_events_url": "https://api.github.com/users/mranjbar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-03-02T18:19:23Z", "updated_at": "2016-03-04T13:35:22Z", "closed_at": "2016-03-04T02:38:19Z", "author_association": "NONE", "body_html": "<p>I have been trying to compile tensorflow from source without success.<br>\nI could compile version 0.6.0 with no trouble, but trying to compile 0.7.1 produces the following error:</p>\n<blockquote>\ntensorflow/core/kernels/matrix_solve_ls_op.cc: In member function 'void tensorflow::MatrixSolveLsOp::ComputeMatrix(tensorflow::OpKernelContext*, const typename tensorflow::BinaryLinearAlgebraOp::ConstMatrixMap&amp;, const typename tensorflow::BinaryLinearAlgebraOp::ConstMatrixMap&amp;, typename tensorflow::BinaryLinearAlgebraOp::MatrixMap*)':\ntensorflow/core/kernels/matrix_solve_ls_op.cc:111:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n                                         ^\ntensorflow/core/kernels/matrix_solve_ls_op.cc:131:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(rows, 1)).asDiagonal();\n                                         ^\nIn file included from ./tensorflow/core/framework/op_kernel.h:22:0,\n                 from tensorflow/core/kernels/matrix_solve_ls_op.cc:23:\n./tensorflow/core/framework/allocator.h: In member function 'virtual std::size_t tensorflow::Allocator::RequestedSize(void*)':\n./tensorflow/core/framework/allocator.h:128:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\nIn file included from ./tensorflow/core/framework/op_kernel.h:25:0,\n                 from tensorflow/core/kernels/matrix_solve_ls_op.cc:23:\n./tensorflow/core/framework/device_base.h: In member function 'virtual tensorflow::Allocator* tensorflow::DeviceBase::GetAllocator(tensorflow::AllocatorAttributes)':\n./tensorflow/core/framework/device_base.h:149:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\n./tensorflow/core/framework/device_base.h: In member function 'virtual const tensorflow::DeviceAttributes&amp; tensorflow::DeviceBase::attributes() const':\n./tensorflow/core/framework/device_base.h:179:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\n</blockquote>\n<p>I tried to find the definition of Matrix::Ones in all folders, but couldn't find anything. In fact</p>\n<blockquote>\n<p>grep \"Ones\" tensorflow/* -R</p>\n</blockquote>\n<p>returns</p>\n<blockquote>\ncore/kernels/matrix_solve_ls_op.cc:              (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\ncore/kernels/matrix_solve_ls_op.cc:              (Scalar(l2_regularizer) * Matrix::Ones(rows, 1)).asDiagonal();\npython/kernel_tests/constant_op_test.py:class OnesTest(tf.test.TestCase):\npython/kernel_tests/constant_op_test.py:  def _Ones(self, shape):\npython/kernel_tests/constant_op_test.py:    self.assertTrue(np.array_equal(self._Ones([2, 3]), np.array([[1] * 3] * 2)))\npython/kernel_tests/constant_op_test.py:class OnesLikeTest(tf.test.TestCase):\npython/kernel_tests/constant_op_test.py:  def testOnesLike(self):\npython/kernel_tests/constant_op_test.py:  def testOnesLikePartialShape(self):\npython/kernel_tests/shape_ops_test.py:  def testSqueezeAllOnes(self):\npython/kernel_tests/shape_ops_test.py:  def testSqueezeOnlyOnes(self):\n</blockquote>\n<h3>Environment info</h3>\n<p>OS : CentOS 6.6, but I have gcc 4.8.2 installed.</p>\n<h3>Steps to reproduce</h3>\n<blockquote>\n<p>./configure</p>\n</blockquote>\n<p>say yes to GPU, cuda 7.5, cudnn 4</p>\n<blockquote>\n<p>bazel build --config=cuda --jobs 6 --verbose_failures --linkopt=\"-lrt\" --linkopt=\"-lm\" --genrule_strategy=standalone --spawn_strategy=standalone -c opt //tensorflow/tools/pip_package:build_pip_package</p>\n</blockquote>", "body_text": "I have been trying to compile tensorflow from source without success.\nI could compile version 0.6.0 with no trouble, but trying to compile 0.7.1 produces the following error:\n\ntensorflow/core/kernels/matrix_solve_ls_op.cc: In member function 'void tensorflow::MatrixSolveLsOp::ComputeMatrix(tensorflow::OpKernelContext*, const typename tensorflow::BinaryLinearAlgebraOp::ConstMatrixMap&, const typename tensorflow::BinaryLinearAlgebraOp::ConstMatrixMap&, typename tensorflow::BinaryLinearAlgebraOp::MatrixMap*)':\ntensorflow/core/kernels/matrix_solve_ls_op.cc:111:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n                                         ^\ntensorflow/core/kernels/matrix_solve_ls_op.cc:131:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(rows, 1)).asDiagonal();\n                                         ^\nIn file included from ./tensorflow/core/framework/op_kernel.h:22:0,\n                 from tensorflow/core/kernels/matrix_solve_ls_op.cc:23:\n./tensorflow/core/framework/allocator.h: In member function 'virtual std::size_t tensorflow::Allocator::RequestedSize(void*)':\n./tensorflow/core/framework/allocator.h:128:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\nIn file included from ./tensorflow/core/framework/op_kernel.h:25:0,\n                 from tensorflow/core/kernels/matrix_solve_ls_op.cc:23:\n./tensorflow/core/framework/device_base.h: In member function 'virtual tensorflow::Allocator* tensorflow::DeviceBase::GetAllocator(tensorflow::AllocatorAttributes)':\n./tensorflow/core/framework/device_base.h:149:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\n./tensorflow/core/framework/device_base.h: In member function 'virtual const tensorflow::DeviceAttributes& tensorflow::DeviceBase::attributes() const':\n./tensorflow/core/framework/device_base.h:179:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\n\nI tried to find the definition of Matrix::Ones in all folders, but couldn't find anything. In fact\n\ngrep \"Ones\" tensorflow/* -R\n\nreturns\n\ncore/kernels/matrix_solve_ls_op.cc:              (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\ncore/kernels/matrix_solve_ls_op.cc:              (Scalar(l2_regularizer) * Matrix::Ones(rows, 1)).asDiagonal();\npython/kernel_tests/constant_op_test.py:class OnesTest(tf.test.TestCase):\npython/kernel_tests/constant_op_test.py:  def _Ones(self, shape):\npython/kernel_tests/constant_op_test.py:    self.assertTrue(np.array_equal(self._Ones([2, 3]), np.array([[1] * 3] * 2)))\npython/kernel_tests/constant_op_test.py:class OnesLikeTest(tf.test.TestCase):\npython/kernel_tests/constant_op_test.py:  def testOnesLike(self):\npython/kernel_tests/constant_op_test.py:  def testOnesLikePartialShape(self):\npython/kernel_tests/shape_ops_test.py:  def testSqueezeAllOnes(self):\npython/kernel_tests/shape_ops_test.py:  def testSqueezeOnlyOnes(self):\n\nEnvironment info\nOS : CentOS 6.6, but I have gcc 4.8.2 installed.\nSteps to reproduce\n\n./configure\n\nsay yes to GPU, cuda 7.5, cudnn 4\n\nbazel build --config=cuda --jobs 6 --verbose_failures --linkopt=\"-lrt\" --linkopt=\"-lm\" --genrule_strategy=standalone --spawn_strategy=standalone -c opt //tensorflow/tools/pip_package:build_pip_package", "body": "I have been trying to compile tensorflow from source without success.\nI could compile version 0.6.0 with no trouble, but trying to compile 0.7.1 produces the following error:\n\n<blockquote>\ntensorflow/core/kernels/matrix_solve_ls_op.cc: In member function 'void tensorflow::MatrixSolveLsOp<Scalar, SupportsBatchOperationT>::ComputeMatrix(tensorflow::OpKernelContext*, const typename tensorflow::BinaryLinearAlgebraOp<Scalar, SupportsBatchOperationT>::ConstMatrixMap&, const typename tensorflow::BinaryLinearAlgebraOp<Scalar, SupportsBatchOperationT>::ConstMatrixMap&, typename tensorflow::BinaryLinearAlgebraOp<Scalar, SupportsBatchOperationT>::MatrixMap*)':\ntensorflow/core/kernels/matrix_solve_ls_op.cc:111:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\n                                         ^\ntensorflow/core/kernels/matrix_solve_ls_op.cc:131:41: error: 'Matrix' is not a class, namespace, or enumeration\n               (Scalar(l2_regularizer) * Matrix::Ones(rows, 1)).asDiagonal();\n                                         ^\nIn file included from ./tensorflow/core/framework/op_kernel.h:22:0,\n                 from tensorflow/core/kernels/matrix_solve_ls_op.cc:23:\n./tensorflow/core/framework/allocator.h: In member function 'virtual std::size_t tensorflow::Allocator::RequestedSize(void*)':\n./tensorflow/core/framework/allocator.h:128:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\nIn file included from ./tensorflow/core/framework/op_kernel.h:25:0,\n                 from tensorflow/core/kernels/matrix_solve_ls_op.cc:23:\n./tensorflow/core/framework/device_base.h: In member function 'virtual tensorflow::Allocator* tensorflow::DeviceBase::GetAllocator(tensorflow::AllocatorAttributes)':\n./tensorflow/core/framework/device_base.h:149:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\n./tensorflow/core/framework/device_base.h: In member function 'virtual const tensorflow::DeviceAttributes& tensorflow::DeviceBase::attributes() const':\n./tensorflow/core/framework/device_base.h:179:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\n</blockquote>\n\n\nI tried to find the definition of Matrix::Ones in all folders, but couldn't find anything. In fact \n\n> grep \"Ones\" tensorflow/\\* -R \n\nreturns \n\n<blockquote>\ncore/kernels/matrix_solve_ls_op.cc:              (Scalar(l2_regularizer) * Matrix::Ones(cols, 1)).asDiagonal();\ncore/kernels/matrix_solve_ls_op.cc:              (Scalar(l2_regularizer) * Matrix::Ones(rows, 1)).asDiagonal();\npython/kernel_tests/constant_op_test.py:class OnesTest(tf.test.TestCase):\npython/kernel_tests/constant_op_test.py:  def _Ones(self, shape):\npython/kernel_tests/constant_op_test.py:    self.assertTrue(np.array_equal(self._Ones([2, 3]), np.array([[1] * 3] * 2)))\npython/kernel_tests/constant_op_test.py:class OnesLikeTest(tf.test.TestCase):\npython/kernel_tests/constant_op_test.py:  def testOnesLike(self):\npython/kernel_tests/constant_op_test.py:  def testOnesLikePartialShape(self):\npython/kernel_tests/shape_ops_test.py:  def testSqueezeAllOnes(self):\npython/kernel_tests/shape_ops_test.py:  def testSqueezeOnlyOnes(self):\n</blockquote>\n\n### Environment info\n\nOS : CentOS 6.6, but I have gcc 4.8.2 installed.\n### Steps to reproduce\n\n> ./configure\n\nsay yes to GPU, cuda 7.5, cudnn 4\n\n> bazel build --config=cuda --jobs 6 --verbose_failures --linkopt=\"-lrt\" --linkopt=\"-lm\" --genrule_strategy=standalone --spawn_strategy=standalone -c opt //tensorflow/tools/pip_package:build_pip_package\n"}
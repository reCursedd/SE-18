{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17182", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17182/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17182/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17182/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17182", "id": 299188423, "node_id": "MDU6SXNzdWUyOTkxODg0MjM=", "number": 17182, "title": "Log \"Waiting for new checkpoint at\" in tf.contrib.training.evaluate_repeatedly only after the checkpoint is found", "user": {"login": "sergii-bond", "id": 19783366, "node_id": "MDQ6VXNlcjE5NzgzMzY2", "avatar_url": "https://avatars0.githubusercontent.com/u/19783366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sergii-bond", "html_url": "https://github.com/sergii-bond", "followers_url": "https://api.github.com/users/sergii-bond/followers", "following_url": "https://api.github.com/users/sergii-bond/following{/other_user}", "gists_url": "https://api.github.com/users/sergii-bond/gists{/gist_id}", "starred_url": "https://api.github.com/users/sergii-bond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sergii-bond/subscriptions", "organizations_url": "https://api.github.com/users/sergii-bond/orgs", "repos_url": "https://api.github.com/users/sergii-bond/repos", "events_url": "https://api.github.com/users/sergii-bond/events{/privacy}", "received_events_url": "https://api.github.com/users/sergii-bond/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-22T01:14:16Z", "updated_at": "2018-02-22T02:12:45Z", "closed_at": "2018-02-22T02:12:45Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.5.0-rc1</li>\n<li><strong>Python version</strong>: 2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.9.0</li>\n</ul>\n<h3>Problem description</h3>\n<p>I use <code>tf.contrib.training.evaluate_repeatedly</code> function found here: <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/37aa430d84ced579342a4044c89c236664be7f68/tensorflow/contrib/training/python/training/evaluation.py#L345\">tensorflow/tensorflow/contrib/training/python/training/evaluation.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 345\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/37aa430d84ced579342a4044c89c236664be7f68\">37aa430</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L345\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"345\"></td>\n          <td id=\"LC345\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">evaluate_repeatedly</span>(<span class=\"pl-smi\">checkpoint_dir</span>, </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>The two parameters that are relevant here are:<br>\n<code>timeout=1, timeout_fn=my_timeout_fn</code>, where <code>my_timeout_fn</code> is a custom function and returns True or False. Basically I want to stop evaluation loop if some condition is met, in which case the function will return 1. I have to set timeout to some small value, in this case 1 sec, so that timeout_fn is triggered often. The issue with this is that I get the next log message very often:</p>\n<pre><code>Waiting for new checkpoint at /path/to/dir\n</code></pre>\n<p>I set timeout=10, but still I don't want to see that useless log message every 10 seconds.</p>\n<p>The message comes from here:<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/37aa430d84ced579342a4044c89c236664be7f68/tensorflow/contrib/training/python/training/evaluation.py#L192\">tensorflow/tensorflow/contrib/training/python/training/evaluation.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 192\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/37aa430d84ced579342a4044c89c236664be7f68\">37aa430</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L192\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"192\"></td>\n          <td id=\"LC192\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> logging.info(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>Waiting for new checkpoint at <span class=\"pl-c1\">%s</span><span class=\"pl-pds\">'</span></span>, checkpoint_dir) </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>One of the solutions would be to put this logging command inside the caller of <code>wait_for_new_checkpoint</code> function and execute it once before <code>while True</code> loop on  line 248, and then right after <code> yield checkpoint_path</code> on line 264. This way we get this message only after a checkpoint is found.</p>", "body_text": "System information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.5.0-rc1\nPython version: 2.7\nBazel version (if compiling from source): 0.9.0\n\nProblem description\nI use tf.contrib.training.evaluate_repeatedly function found here: \n  \n    \n      tensorflow/tensorflow/contrib/training/python/training/evaluation.py\n    \n    \n         Line 345\n      in\n      37aa430\n    \n    \n    \n    \n\n        \n          \n           def evaluate_repeatedly(checkpoint_dir, \n        \n    \n  \n\n\nThe two parameters that are relevant here are:\ntimeout=1, timeout_fn=my_timeout_fn, where my_timeout_fn is a custom function and returns True or False. Basically I want to stop evaluation loop if some condition is met, in which case the function will return 1. I have to set timeout to some small value, in this case 1 sec, so that timeout_fn is triggered often. The issue with this is that I get the next log message very often:\nWaiting for new checkpoint at /path/to/dir\n\nI set timeout=10, but still I don't want to see that useless log message every 10 seconds.\nThe message comes from here:\n\n  \n    \n      tensorflow/tensorflow/contrib/training/python/training/evaluation.py\n    \n    \n         Line 192\n      in\n      37aa430\n    \n    \n    \n    \n\n        \n          \n           logging.info('Waiting for new checkpoint at %s', checkpoint_dir) \n        \n    \n  \n\n\nOne of the solutions would be to put this logging command inside the caller of wait_for_new_checkpoint function and execute it once before while True loop on  line 248, and then right after  yield checkpoint_path on line 264. This way we get this message only after a checkpoint is found.", "body": "### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.5.0-rc1\r\n- **Python version**: 2.7\r\n- **Bazel version (if compiling from source)**: 0.9.0\r\n\r\n### Problem description\r\nI use `tf.contrib.training.evaluate_repeatedly` function found here: https://github.com/tensorflow/tensorflow/blob/37aa430d84ced579342a4044c89c236664be7f68/tensorflow/contrib/training/python/training/evaluation.py#L345\r\n\r\nThe two parameters that are relevant here are:\r\n`timeout=1, timeout_fn=my_timeout_fn`, where `my_timeout_fn` is a custom function and returns True or False. Basically I want to stop evaluation loop if some condition is met, in which case the function will return 1. I have to set timeout to some small value, in this case 1 sec, so that timeout_fn is triggered often. The issue with this is that I get the next log message very often:\r\n```\r\nWaiting for new checkpoint at /path/to/dir\r\n```\r\nI set timeout=10, but still I don't want to see that useless log message every 10 seconds.\r\n\r\nThe message comes from here:\r\nhttps://github.com/tensorflow/tensorflow/blob/37aa430d84ced579342a4044c89c236664be7f68/tensorflow/contrib/training/python/training/evaluation.py#L192\r\n\r\nOne of the solutions would be to put this logging command inside the caller of `wait_for_new_checkpoint` function and execute it once before `while True` loop on  line 248, and then right after ` yield checkpoint_path` on line 264. This way we get this message only after a checkpoint is found.\r\n"}
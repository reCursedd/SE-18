{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/239038289", "html_url": "https://github.com/tensorflow/tensorflow/issues/3739#issuecomment-239038289", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3739", "id": 239038289, "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTAzODI4OQ==", "user": {"login": "inderpreetsganda", "id": 10248819, "node_id": "MDQ6VXNlcjEwMjQ4ODE5", "avatar_url": "https://avatars0.githubusercontent.com/u/10248819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inderpreetsganda", "html_url": "https://github.com/inderpreetsganda", "followers_url": "https://api.github.com/users/inderpreetsganda/followers", "following_url": "https://api.github.com/users/inderpreetsganda/following{/other_user}", "gists_url": "https://api.github.com/users/inderpreetsganda/gists{/gist_id}", "starred_url": "https://api.github.com/users/inderpreetsganda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inderpreetsganda/subscriptions", "organizations_url": "https://api.github.com/users/inderpreetsganda/orgs", "repos_url": "https://api.github.com/users/inderpreetsganda/repos", "events_url": "https://api.github.com/users/inderpreetsganda/events{/privacy}", "received_events_url": "https://api.github.com/users/inderpreetsganda/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-10T23:45:35Z", "updated_at": "2016-08-10T23:45:35Z", "author_association": "NONE", "body_html": "<pre><code>import tensorflow as tf\nimport numpy as np\n\ny = [1,2,3,4,7,8,9,10]\nbatch_size = 8\nnum_classes = 8\n\nweights  = tf.Variable(tf.random_normal([batch_size,num_classes]))\nbiases = tf.Variable(tf.random_normal([num_classes]))\n\nlogits = weights + biases\n\ncross_entropy = tf.nn.sparse_softmax_cross_entropy_with_logits(logits,y)\ntop_k = tf.nn.in_top_k(logits,y,1)\n\ninit = tf.initialize_all_variables()\n\nsess = tf.Session()\nsess.run(init)\n\nprint sess.run(cross_entropy)\nprint sess.run(top_k)\n</code></pre>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=23068\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yaroslavvb\">@yaroslavvb</a>  This is the code to reproduce the result. As you will see, cross_entropy is printed while top_k is not printed giving error[5] targets out of range. I don't know why cross_entropy doesn't give this type of error, it should give this error because there is mismatch between labels(y) and predictions.</p>\n<p>Here is the output:</p>\n<pre><code>[ 3.54709339  4.26697874  2.73241401  2.7566452   3.60998082  0.          0.\n  0.        ]\nTraceback (most recent call last):\n  File \"python.py\", line 22, in &lt;module&gt;\n    print sess.run(top_k)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 340, in run\n    run_metadata_ptr)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 564, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 637, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 659, in _do_call\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: targets[5] is out of range\n     [[Node: InTopK = InTopK[T=DT_INT32, k=1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](add, InTopK/targets)]]\nCaused by op u'InTopK', defined at:\n  File \"python.py\", line 14, in &lt;module&gt;\n    top_k = tf.nn.in_top_k(logits,y,1)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 549, in in_top_k\n    targets=targets, k=k, name=name)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 655, in apply_op\n    op_def=op_def)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2154, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1154, in __init__\n    self._traceback = _extract_stack()\n</code></pre>", "body_text": "import tensorflow as tf\nimport numpy as np\n\ny = [1,2,3,4,7,8,9,10]\nbatch_size = 8\nnum_classes = 8\n\nweights  = tf.Variable(tf.random_normal([batch_size,num_classes]))\nbiases = tf.Variable(tf.random_normal([num_classes]))\n\nlogits = weights + biases\n\ncross_entropy = tf.nn.sparse_softmax_cross_entropy_with_logits(logits,y)\ntop_k = tf.nn.in_top_k(logits,y,1)\n\ninit = tf.initialize_all_variables()\n\nsess = tf.Session()\nsess.run(init)\n\nprint sess.run(cross_entropy)\nprint sess.run(top_k)\n\n@yaroslavvb  This is the code to reproduce the result. As you will see, cross_entropy is printed while top_k is not printed giving error[5] targets out of range. I don't know why cross_entropy doesn't give this type of error, it should give this error because there is mismatch between labels(y) and predictions.\nHere is the output:\n[ 3.54709339  4.26697874  2.73241401  2.7566452   3.60998082  0.          0.\n  0.        ]\nTraceback (most recent call last):\n  File \"python.py\", line 22, in <module>\n    print sess.run(top_k)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 340, in run\n    run_metadata_ptr)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 564, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 637, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 659, in _do_call\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: targets[5] is out of range\n     [[Node: InTopK = InTopK[T=DT_INT32, k=1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](add, InTopK/targets)]]\nCaused by op u'InTopK', defined at:\n  File \"python.py\", line 14, in <module>\n    top_k = tf.nn.in_top_k(logits,y,1)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 549, in in_top_k\n    targets=targets, k=k, name=name)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 655, in apply_op\n    op_def=op_def)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2154, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1154, in __init__\n    self._traceback = _extract_stack()", "body": "```\nimport tensorflow as tf\nimport numpy as np\n\ny = [1,2,3,4,7,8,9,10]\nbatch_size = 8\nnum_classes = 8\n\nweights  = tf.Variable(tf.random_normal([batch_size,num_classes]))\nbiases = tf.Variable(tf.random_normal([num_classes]))\n\nlogits = weights + biases\n\ncross_entropy = tf.nn.sparse_softmax_cross_entropy_with_logits(logits,y)\ntop_k = tf.nn.in_top_k(logits,y,1)\n\ninit = tf.initialize_all_variables()\n\nsess = tf.Session()\nsess.run(init)\n\nprint sess.run(cross_entropy)\nprint sess.run(top_k)\n```\n\n@yaroslavvb  This is the code to reproduce the result. As you will see, cross_entropy is printed while top_k is not printed giving error[5] targets out of range. I don't know why cross_entropy doesn't give this type of error, it should give this error because there is mismatch between labels(y) and predictions.\n\nHere is the output:\n\n```\n[ 3.54709339  4.26697874  2.73241401  2.7566452   3.60998082  0.          0.\n  0.        ]\nTraceback (most recent call last):\n  File \"python.py\", line 22, in <module>\n    print sess.run(top_k)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 340, in run\n    run_metadata_ptr)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 564, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 637, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 659, in _do_call\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: targets[5] is out of range\n     [[Node: InTopK = InTopK[T=DT_INT32, k=1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](add, InTopK/targets)]]\nCaused by op u'InTopK', defined at:\n  File \"python.py\", line 14, in <module>\n    top_k = tf.nn.in_top_k(logits,y,1)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 549, in in_top_k\n    targets=targets, k=k, name=name)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 655, in apply_op\n    op_def=op_def)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2154, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1154, in __init__\n    self._traceback = _extract_stack()\n```\n"}
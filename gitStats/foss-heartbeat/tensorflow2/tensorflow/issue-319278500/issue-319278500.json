{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19005", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19005/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19005/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19005/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19005", "id": 319278500, "node_id": "MDU6SXNzdWUzMTkyNzg1MDA=", "number": 19005, "title": "TFLite conversation failed", "user": {"login": "smitshilu", "id": 7061773, "node_id": "MDQ6VXNlcjcwNjE3NzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/7061773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smitshilu", "html_url": "https://github.com/smitshilu", "followers_url": "https://api.github.com/users/smitshilu/followers", "following_url": "https://api.github.com/users/smitshilu/following{/other_user}", "gists_url": "https://api.github.com/users/smitshilu/gists{/gist_id}", "starred_url": "https://api.github.com/users/smitshilu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smitshilu/subscriptions", "organizations_url": "https://api.github.com/users/smitshilu/orgs", "repos_url": "https://api.github.com/users/smitshilu/repos", "events_url": "https://api.github.com/users/smitshilu/events{/privacy}", "received_events_url": "https://api.github.com/users/smitshilu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-05-01T18:15:03Z", "updated_at": "2018-06-29T18:57:10Z", "closed_at": "2018-06-29T18:53:04Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: MAC OSX</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.7</li>\n<li><strong>Python version</strong>: 3.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.11.0</li>\n<li><strong>CUDA/cuDNN version</strong>: 9/7</li>\n<li><strong>GPU model and memory</strong>: 1080Ti 12G</li>\n<li><strong>Exact command to reproduce</strong>: N/A</li>\n</ul>\n<p>I wrote a code for mobile net and generated model. Converted model from keras(.h5) to frozen graph(.pb) Summary of graph is</p>\n<pre><code>$ ./bazel-bin/tensorflow/tools/graph_transforms/summarize_graph   --in_graph=s.pb\nFound 1 possible inputs: (name=input_1, type=float(1), shape=[?,224,224,3]) \nNo variables spotted.\nFound 1 possible outputs: (name=dense_1/Sigmoid, op=Sigmoid) \nFound 4254887 (4.25M) const parameters, 0 (0) variable parameters, and 4 control_edges\nOp types used: 164 Switch, 154 Const, 84 Mul, 56 Add, 28 Sub, 28 Merge, 27 Relu, 27 Minimum, 27 FusedBatchNorm, 27 Rsqrt, 15 Conv2D, 14 Pad, 13 DepthwiseConv2dNative, 3 Shape, 2 BiasAdd, 2 StridedSlice, 2 Pack, 2 Reshape, 2 RealDiv, 1 Max, 1 RandomUniform, 1 MatMul, 1 Floor, 1 Sigmoid, 1 Mean, 1 Exp, 1 Sum, 1 Placeholder\nTo use with tensorflow/tools/benchmark:benchmark_model try these arguments:\nbazel run tensorflow/tools/benchmark:benchmark_model -- --graph=s.pb --show_flops --input_layer=input_1 --input_layer_type=float --input_layer_shape=-1,224,224,3 --output_layer=dense_1/Sigmoid\n</code></pre>\n<p>When I try to convert it into tflite it gives me following error:</p>\n<pre><code>$ ./bazel-bin/tensorflow/contrib/lite/toco/toco --input_file=s.pb --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE --output_file=train-1.tflite --inference_type=FLOAT --input_arrays=input_1 --output_arrays=dense_1/Sigmoid --v=2\n2018-05-01 14:13:50.005925: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1236] Converting unsupported operation: RandomUniform\n2018-05-01 14:13:50.233921: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 640 operators, 986 arrays (0 quantized)\n2018-05-01 14:13:50.454878: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 639 operators, 984 arrays (0 quantized)\n2018-05-01 14:13:50.696498: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 639 operators, 984 arrays (0 quantized)\n2018-05-01 14:13:50.861230: F tensorflow/contrib/lite/toco/graph_transformations/resolve_batch_normalization.cc:86] Check failed: mean_shape.dims() == multiplier_shape.dims() \nAborted\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): MAC OSX\nTensorFlow installed from (source or binary): Source\nTensorFlow version (use command below): 1.7\nPython version: 3.6\nBazel version (if compiling from source): 0.11.0\nCUDA/cuDNN version: 9/7\nGPU model and memory: 1080Ti 12G\nExact command to reproduce: N/A\n\nI wrote a code for mobile net and generated model. Converted model from keras(.h5) to frozen graph(.pb) Summary of graph is\n$ ./bazel-bin/tensorflow/tools/graph_transforms/summarize_graph   --in_graph=s.pb\nFound 1 possible inputs: (name=input_1, type=float(1), shape=[?,224,224,3]) \nNo variables spotted.\nFound 1 possible outputs: (name=dense_1/Sigmoid, op=Sigmoid) \nFound 4254887 (4.25M) const parameters, 0 (0) variable parameters, and 4 control_edges\nOp types used: 164 Switch, 154 Const, 84 Mul, 56 Add, 28 Sub, 28 Merge, 27 Relu, 27 Minimum, 27 FusedBatchNorm, 27 Rsqrt, 15 Conv2D, 14 Pad, 13 DepthwiseConv2dNative, 3 Shape, 2 BiasAdd, 2 StridedSlice, 2 Pack, 2 Reshape, 2 RealDiv, 1 Max, 1 RandomUniform, 1 MatMul, 1 Floor, 1 Sigmoid, 1 Mean, 1 Exp, 1 Sum, 1 Placeholder\nTo use with tensorflow/tools/benchmark:benchmark_model try these arguments:\nbazel run tensorflow/tools/benchmark:benchmark_model -- --graph=s.pb --show_flops --input_layer=input_1 --input_layer_type=float --input_layer_shape=-1,224,224,3 --output_layer=dense_1/Sigmoid\n\nWhen I try to convert it into tflite it gives me following error:\n$ ./bazel-bin/tensorflow/contrib/lite/toco/toco --input_file=s.pb --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE --output_file=train-1.tflite --inference_type=FLOAT --input_arrays=input_1 --output_arrays=dense_1/Sigmoid --v=2\n2018-05-01 14:13:50.005925: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1236] Converting unsupported operation: RandomUniform\n2018-05-01 14:13:50.233921: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 640 operators, 986 arrays (0 quantized)\n2018-05-01 14:13:50.454878: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 639 operators, 984 arrays (0 quantized)\n2018-05-01 14:13:50.696498: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 639 operators, 984 arrays (0 quantized)\n2018-05-01 14:13:50.861230: F tensorflow/contrib/lite/toco/graph_transformations/resolve_batch_normalization.cc:86] Check failed: mean_shape.dims() == multiplier_shape.dims() \nAborted", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MAC OSX\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: 1.7\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: 0.11.0\r\n- **CUDA/cuDNN version**: 9/7\r\n- **GPU model and memory**: 1080Ti 12G\r\n- **Exact command to reproduce**: N/A\r\n\r\nI wrote a code for mobile net and generated model. Converted model from keras(.h5) to frozen graph(.pb) Summary of graph is \r\n```\r\n$ ./bazel-bin/tensorflow/tools/graph_transforms/summarize_graph   --in_graph=s.pb\r\nFound 1 possible inputs: (name=input_1, type=float(1), shape=[?,224,224,3]) \r\nNo variables spotted.\r\nFound 1 possible outputs: (name=dense_1/Sigmoid, op=Sigmoid) \r\nFound 4254887 (4.25M) const parameters, 0 (0) variable parameters, and 4 control_edges\r\nOp types used: 164 Switch, 154 Const, 84 Mul, 56 Add, 28 Sub, 28 Merge, 27 Relu, 27 Minimum, 27 FusedBatchNorm, 27 Rsqrt, 15 Conv2D, 14 Pad, 13 DepthwiseConv2dNative, 3 Shape, 2 BiasAdd, 2 StridedSlice, 2 Pack, 2 Reshape, 2 RealDiv, 1 Max, 1 RandomUniform, 1 MatMul, 1 Floor, 1 Sigmoid, 1 Mean, 1 Exp, 1 Sum, 1 Placeholder\r\nTo use with tensorflow/tools/benchmark:benchmark_model try these arguments:\r\nbazel run tensorflow/tools/benchmark:benchmark_model -- --graph=s.pb --show_flops --input_layer=input_1 --input_layer_type=float --input_layer_shape=-1,224,224,3 --output_layer=dense_1/Sigmoid\r\n```\r\nWhen I try to convert it into tflite it gives me following error:\r\n```\r\n$ ./bazel-bin/tensorflow/contrib/lite/toco/toco --input_file=s.pb --input_format=TENSORFLOW_GRAPHDEF  --output_format=TFLITE --output_file=train-1.tflite --inference_type=FLOAT --input_arrays=input_1 --output_arrays=dense_1/Sigmoid --v=2\r\n2018-05-01 14:13:50.005925: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1236] Converting unsupported operation: RandomUniform\r\n2018-05-01 14:13:50.233921: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 640 operators, 986 arrays (0 quantized)\r\n2018-05-01 14:13:50.454878: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 639 operators, 984 arrays (0 quantized)\r\n2018-05-01 14:13:50.696498: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 639 operators, 984 arrays (0 quantized)\r\n2018-05-01 14:13:50.861230: F tensorflow/contrib/lite/toco/graph_transformations/resolve_batch_normalization.cc:86] Check failed: mean_shape.dims() == multiplier_shape.dims() \r\nAborted\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/76464906", "pull_request_review_id": null, "id": 76464906, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc2NDY0OTA2", "diff_hunk": "@@ -1582,3 +1583,49 @@ def _SparseSparseMaximumMinimumShape(op):  # pylint: disable=invalid-name\n   op.inputs[4].get_shape().assert_has_rank(1)  # b_values\n   op.inputs[5].get_shape().assert_has_rank(1)  # b_shape\n   return [tensor_shape.unknown_shape(2), tensor_shape.unknown_shape(1)]\n+\n+\n+def sparse_transpose(sp_input, perm=None, name=None):\n+  \"\"\"Transposes a `SparseTensor`\n+\n+  The returned tensor's dimension i will correspond to the input dimension\n+  `perm[i]`. If `perm` is not given, it is set to (n-1...0), where n is\n+  the rank of the input tensor. Hence by default, this operation performs a\n+  regular matrix transpose on 2-D input Tensors.\n+\n+  For example, if `sp_input` has shape `[4, 5]` and `indices` / `values`:\n+\n+      [0, 3]: b\n+      [0, 1]: a\n+      [3, 1]: d\n+      [2, 0]: c\n+\n+  then the output will be a `SparseTensor` of shape `[5, 4]` and\n+  `indices` / `values`:\n+\n+      [0, 2]: c\n+      [1, 0]: a\n+      [1, 3]: d\n+      [3, 0]: b\n+\n+  Args:\n+    sp_input: The input `SparseTensor`.\n+    perm: A permutation of the dimensions of `sp_input`.\n+    name: A name prefix for the returned tensors (optional)\n+  Returns:\n+    A transposed `SparseTensor`.\n+\n+  Raises:\n+    TypeError: If `sp_input` is not a `SparseTensor`.\n+  \"\"\"\n+  with ops.op_scope([sp_input], name, \"SparseTranspose\") as name:\n+    if perm is None:\n+      rank = array_ops.rank(sp_input)\n+      perm = (rank - 1) - math_ops.range(0, rank, 1)\n+    indices = sp_input.indices\n+    transposed_indices = array_ops.transpose(array_ops.gather(array_ops.transpose(indices), perm))", "path": "tensorflow/python/ops/sparse_ops.py", "position": 52, "original_position": 52, "commit_id": "226d459c3fa53807263bf66cf848b7225184e6e2", "original_commit_id": "226d459c3fa53807263bf66cf848b7225184e6e2", "user": {"login": "concretevitamin", "id": 592670, "node_id": "MDQ6VXNlcjU5MjY3MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/592670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/concretevitamin", "html_url": "https://github.com/concretevitamin", "followers_url": "https://api.github.com/users/concretevitamin/followers", "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}", "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}", "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions", "organizations_url": "https://api.github.com/users/concretevitamin/orgs", "repos_url": "https://api.github.com/users/concretevitamin/repos", "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}", "received_events_url": "https://api.github.com/users/concretevitamin/received_events", "type": "User", "site_admin": false}, "body": "This line is longer than 80 cols.\n", "created_at": "2016-08-26T18:23:36Z", "updated_at": "2016-08-26T18:23:36Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/3031#discussion_r76464906", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/3031", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/76464906"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/3031#discussion_r76464906"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/3031"}}, "body_html": "<p>This line is longer than 80 cols.</p>", "body_text": "This line is longer than 80 cols."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/74991328", "pull_request_review_id": null, "id": 74991328, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc0OTkxMzI4", "diff_hunk": "@@ -1582,3 +1583,49 @@ def _SparseSparseMaximumMinimumShape(op):  # pylint: disable=invalid-name\n   op.inputs[4].get_shape().assert_has_rank(1)  # b_values\n   op.inputs[5].get_shape().assert_has_rank(1)  # b_shape\n   return [tensor_shape.unknown_shape(2), tensor_shape.unknown_shape(1)]\n+\n+\n+def sparse_transpose(sp_input, perm=None, name=None):\n+  \"\"\"Transposes a `SparseTensor`\n+\n+  The returned tensor's dimension i will correspond to the input dimension\n+  `perm[i]`. If `perm` is not given, it is set to (n-1...0), where n is\n+  the rank of the input tensor. Hence by default, this operation performs a\n+  regular matrix transpose on 2-D input Tensors.\n+\n+  For example, if `sp_input` has shape `[4, 5]` and `indices` / `values`:\n+\n+      [0, 3]: b\n+      [0, 1]: a\n+      [3, 1]: d\n+      [2, 0]: c\n+\n+  then the output will be a `SparseTensor` of shape `[5, 4]` and\n+  `indices` / `values`:\n+\n+      [0, 2]: c\n+      [1, 0]: a\n+      [1, 3]: d\n+      [3, 0]: b\n+\n+  Args:\n+    sp_input: The input `SparseTensor`.\n+    perm: A permutation of the dimensions of `sp_input`.\n+    name: A name prefix for the returned tensors (optional)\n+  Returns:\n+    A transposed `SparseTensor`.\n+\n+  Raises:\n+    TypeError: If `sp_input` is not a `SparseTensor`.\n+  \"\"\"\n+  with ops.op_scope([sp_input], name, \"SparseTranspose\") as name:", "path": "tensorflow/python/ops/sparse_ops.py", "position": 47, "original_position": 47, "commit_id": "226d459c3fa53807263bf66cf848b7225184e6e2", "original_commit_id": "c596b33257abf584aaaedff3a6268cabe3c67cef", "user": {"login": "maniteja123", "id": 6291963, "node_id": "MDQ6VXNlcjYyOTE5NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6291963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maniteja123", "html_url": "https://github.com/maniteja123", "followers_url": "https://api.github.com/users/maniteja123/followers", "following_url": "https://api.github.com/users/maniteja123/following{/other_user}", "gists_url": "https://api.github.com/users/maniteja123/gists{/gist_id}", "starred_url": "https://api.github.com/users/maniteja123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maniteja123/subscriptions", "organizations_url": "https://api.github.com/users/maniteja123/orgs", "repos_url": "https://api.github.com/users/maniteja123/repos", "events_url": "https://api.github.com/users/maniteja123/events{/privacy}", "received_events_url": "https://api.github.com/users/maniteja123/received_events", "type": "User", "site_admin": false}, "body": "thanks for the help and sorry for the delay. I have tried to put it in array_ops itself but this code uses the transpose function itself on the dense tensor and also the `sparse_reorder` function needs to reorder the final values in the transposed sparse tensor. But AFAICS, none of the sparse functions are used in the array_ops, probably because that would create a cyclic dependency. It would be really helpful if you could guide me here. \nAlso could you let me know about updating the grad for the sparse tensor. Thanks.\n", "created_at": "2016-08-16T18:21:18Z", "updated_at": "2016-08-26T06:11:15Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/3031#discussion_r74991328", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/3031", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/74991328"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/3031#discussion_r74991328"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/3031"}}, "body_html": "<p>thanks for the help and sorry for the delay. I have tried to put it in array_ops itself but this code uses the transpose function itself on the dense tensor and also the <code>sparse_reorder</code> function needs to reorder the final values in the transposed sparse tensor. But AFAICS, none of the sparse functions are used in the array_ops, probably because that would create a cyclic dependency. It would be really helpful if you could guide me here.<br>\nAlso could you let me know about updating the grad for the sparse tensor. Thanks.</p>", "body_text": "thanks for the help and sorry for the delay. I have tried to put it in array_ops itself but this code uses the transpose function itself on the dense tensor and also the sparse_reorder function needs to reorder the final values in the transposed sparse tensor. But AFAICS, none of the sparse functions are used in the array_ops, probably because that would create a cyclic dependency. It would be really helpful if you could guide me here.\nAlso could you let me know about updating the grad for the sparse tensor. Thanks."}
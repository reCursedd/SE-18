{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6799", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6799/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6799/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6799/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6799", "id": 200255372, "node_id": "MDU6SXNzdWUyMDAyNTUzNzI=", "number": 6799, "title": "Go: Unable to create two ops of the same type using generated op wrapper functions", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-01-12T01:28:53Z", "updated_at": "2017-02-09T22:02:00Z", "closed_at": "2017-01-13T04:40:03Z", "author_association": "MEMBER", "body_html": "<p>As reported in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115914766\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/10\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/10/hovercard?comment_id=272045853&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/10#issuecomment-272045853\">#10 (comment)</a> , the following test (at head: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/d4b5c606fc9fbd1a20b5b113b4bc831f31d889a3/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/d4b5c606fc9fbd1a20b5b113b4bc831f31d889a3\"><tt>d4b5c60</tt></a>):</p>\n<div class=\"highlight highlight-source-go\"><pre><span class=\"pl-k\">package</span> bug\n\n<span class=\"pl-k\">import</span> (\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>testing<span class=\"pl-pds\">\"</span></span>\n\n        tf <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>github.com/tensorflow/tensorflow/tensorflow/go<span class=\"pl-pds\">\"</span></span>\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>github.com/tensorflow/tensorflow/tensorflow/go/op<span class=\"pl-pds\">\"</span></span>\n)\n\n<span class=\"pl-k\">func</span> <span class=\"pl-en\">TestBug</span>(<span class=\"pl-v\">t</span> *<span class=\"pl-v\">testing</span>.<span class=\"pl-v\">T</span>) {\n        <span class=\"pl-smi\">scope</span> <span class=\"pl-k\">:=</span> op.<span class=\"pl-c1\">NewScope</span>()\n        op.<span class=\"pl-c1\">Placeholder</span>(scope.<span class=\"pl-c1\">Subscope</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>x<span class=\"pl-pds\">\"</span></span>), tf.<span class=\"pl-smi\">Float</span>)\n        op.<span class=\"pl-c1\">Placeholder</span>(scope.<span class=\"pl-c1\">Subscope</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>y<span class=\"pl-pds\">\"</span></span>), tf.<span class=\"pl-smi\">Float</span>)\n        <span class=\"pl-k\">if</span> <span class=\"pl-smi\">_</span>, <span class=\"pl-smi\">err</span> <span class=\"pl-k\">:=</span> scope.<span class=\"pl-c1\">Finalize</span>(); err != <span class=\"pl-c1\">nil</span> {\n                t.<span class=\"pl-c1\">Fatal</span>(err)\n        }\n}</pre></div>\n<p>fails with:</p>\n<div class=\"highlight highlight-source-shell\"><pre>--- FAIL: TestBug (0.01s)\n\tbug_test.go:15: failed to add operation <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Placeholder<span class=\"pl-pds\">\"</span></span>: Duplicate node name <span class=\"pl-k\">in</span> graph: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>Placeholder<span class=\"pl-pds\">'</span></span> (Stacktrace: goroutine 19 [running]:\n\t\truntime/debug.Stack(0x0, 0x0, 0x0)\n\t\t\t/usr/local/go/src/runtime/debug/stack.go:24 +0x79\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.(<span class=\"pl-k\">*</span>Scope).UpdateErr(0xc420072420, 0x411b8ac, 0xb, 0x4196640, 0xc42007c030)\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:106 +0x72\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.(<span class=\"pl-k\">*</span>Scope).AddOperation(0xc420072420, 0x411b8ac, 0xb, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc420072450, 0x4108b00)\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:70 +0xbf\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.Placeholder(0xc420072420, 0x1, 0x0, 0x0, 0x0, 0xc42006e4f0, 0x0)\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:4734 +0x1c7\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/b10.TestBug(0xc420098180)\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/b10/bug_test.go:13 +0xd2\n\t\ttesting.tRunner(0xc420098180, 0x4129d88)\n\t\t\t/usr/local/go/src/testing/testing.go:610 +0x81\n\t\tcreated by testing.(<span class=\"pl-k\">*</span>T).Run\n\t\t\t/usr/local/go/src/testing/testing.go:646 +0x2ec\n\t\t)</pre></div>\n<p>(Thanks for pointing this out <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16372009\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sdeoras\">@sdeoras</a>).</p>", "body_text": "As reported in #10 (comment) , the following test (at head: d4b5c60):\npackage bug\n\nimport (\n        \"testing\"\n\n        tf \"github.com/tensorflow/tensorflow/tensorflow/go\"\n        \"github.com/tensorflow/tensorflow/tensorflow/go/op\"\n)\n\nfunc TestBug(t *testing.T) {\n        scope := op.NewScope()\n        op.Placeholder(scope.Subscope(\"x\"), tf.Float)\n        op.Placeholder(scope.Subscope(\"y\"), tf.Float)\n        if _, err := scope.Finalize(); err != nil {\n                t.Fatal(err)\n        }\n}\nfails with:\n--- FAIL: TestBug (0.01s)\n\tbug_test.go:15: failed to add operation \"Placeholder\": Duplicate node name in graph: 'Placeholder' (Stacktrace: goroutine 19 [running]:\n\t\truntime/debug.Stack(0x0, 0x0, 0x0)\n\t\t\t/usr/local/go/src/runtime/debug/stack.go:24 +0x79\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).UpdateErr(0xc420072420, 0x411b8ac, 0xb, 0x4196640, 0xc42007c030)\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:106 +0x72\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).AddOperation(0xc420072420, 0x411b8ac, 0xb, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc420072450, 0x4108b00)\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:70 +0xbf\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.Placeholder(0xc420072420, 0x1, 0x0, 0x0, 0x0, 0xc42006e4f0, 0x0)\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:4734 +0x1c7\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/b10.TestBug(0xc420098180)\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/b10/bug_test.go:13 +0xd2\n\t\ttesting.tRunner(0xc420098180, 0x4129d88)\n\t\t\t/usr/local/go/src/testing/testing.go:610 +0x81\n\t\tcreated by testing.(*T).Run\n\t\t\t/usr/local/go/src/testing/testing.go:646 +0x2ec\n\t\t)\n(Thanks for pointing this out @sdeoras).", "body": "As reported in https://github.com/tensorflow/tensorflow/issues/10#issuecomment-272045853 , the following test (at head: d4b5c606fc9fbd1a20b5b113b4bc831f31d889a3):\r\n\r\n```go\r\npackage bug\r\n\r\nimport (\r\n        \"testing\"\r\n\r\n        tf \"github.com/tensorflow/tensorflow/tensorflow/go\"\r\n        \"github.com/tensorflow/tensorflow/tensorflow/go/op\"\r\n)\r\n\r\nfunc TestBug(t *testing.T) {\r\n        scope := op.NewScope()\r\n        op.Placeholder(scope.Subscope(\"x\"), tf.Float)\r\n        op.Placeholder(scope.Subscope(\"y\"), tf.Float)\r\n        if _, err := scope.Finalize(); err != nil {\r\n                t.Fatal(err)\r\n        }\r\n}\r\n```\r\n\r\nfails with:\r\n\r\n```sh\r\n--- FAIL: TestBug (0.01s)\r\n\tbug_test.go:15: failed to add operation \"Placeholder\": Duplicate node name in graph: 'Placeholder' (Stacktrace: goroutine 19 [running]:\r\n\t\truntime/debug.Stack(0x0, 0x0, 0x0)\r\n\t\t\t/usr/local/go/src/runtime/debug/stack.go:24 +0x79\r\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).UpdateErr(0xc420072420, 0x411b8ac, 0xb, 0x4196640, 0xc42007c030)\r\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:106 +0x72\r\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.(*Scope).AddOperation(0xc420072420, 0x411b8ac, 0xb, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc420072450, 0x4108b00)\r\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/scope.go:70 +0xbf\r\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/op.Placeholder(0xc420072420, 0x1, 0x0, 0x0, 0x0, 0xc42006e4f0, 0x0)\r\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/op/wrappers.go:4734 +0x1c7\r\n\t\tgithub.com/tensorflow/tensorflow/tensorflow/go/b10.TestBug(0xc420098180)\r\n\t\t\t/home/go/src/github.com/tensorflow/tensorflow/tensorflow/go/b10/bug_test.go:13 +0xd2\r\n\t\ttesting.tRunner(0xc420098180, 0x4129d88)\r\n\t\t\t/usr/local/go/src/testing/testing.go:610 +0x81\r\n\t\tcreated by testing.(*T).Run\r\n\t\t\t/usr/local/go/src/testing/testing.go:646 +0x2ec\r\n\t\t)\r\n```\r\n\r\n(Thanks for pointing this out @sdeoras)."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/412004390", "html_url": "https://github.com/tensorflow/tensorflow/issues/21340#issuecomment-412004390", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21340", "id": 412004390, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjAwNDM5MA==", "user": {"login": "guillaumekln", "id": 4805513, "node_id": "MDQ6VXNlcjQ4MDU1MTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4805513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guillaumekln", "html_url": "https://github.com/guillaumekln", "followers_url": "https://api.github.com/users/guillaumekln/followers", "following_url": "https://api.github.com/users/guillaumekln/following{/other_user}", "gists_url": "https://api.github.com/users/guillaumekln/gists{/gist_id}", "starred_url": "https://api.github.com/users/guillaumekln/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guillaumekln/subscriptions", "organizations_url": "https://api.github.com/users/guillaumekln/orgs", "repos_url": "https://api.github.com/users/guillaumekln/repos", "events_url": "https://api.github.com/users/guillaumekln/events{/privacy}", "received_events_url": "https://api.github.com/users/guillaumekln/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-10T07:47:24Z", "updated_at": "2018-08-10T07:47:24Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1794715\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ebrevdo\">@ebrevdo</a>. After re-reading the documentation, I can accept that my input was not covered by the API. However, the <code>fold{l,r}</code> examples from the documentation are no longer working on 1.9 because of this change:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\nelems <span class=\"pl-k\">=</span> [<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">2</span>, <span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">4</span>, <span class=\"pl-c1\">5</span>, <span class=\"pl-c1\">6</span>]\ns <span class=\"pl-k\">=</span> tf.foldl(<span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">a</span>, <span class=\"pl-smi\">x</span>: a <span class=\"pl-k\">+</span> x, elems)\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    <span class=\"pl-c1\">print</span>(sess.run(s))</pre></div>\n<p>prints <code>21</code> on 1.8 but fails on 1.9 with:</p>\n<pre lang=\"text\"><code>Traceback (most recent call last):\n  File \"test/foldl.py\", line 4, in &lt;module&gt;\n    s = tf.foldl(lambda a, x: a + x, elems)\n  File \"&lt;python&gt;/lib/python3.5/site-packages/tensorflow/python/ops/functional_ops.py\", line 125, in foldl\n    n = elems_flat[0].shape[0].value or array_ops.shape(elems_flat[0])[0]\n  File \"&lt;python&gt;/lib/python3.5/site-packages/tensorflow/python/framework/tensor_shape.py\", line 615, in __getitem__\n    return self._dims[key]\nIndexError: list index out of range\n</code></pre>\n<p>They should either be updated or this change be considered as breaking.</p>", "body_text": "Thanks @ebrevdo. After re-reading the documentation, I can accept that my input was not covered by the API. However, the fold{l,r} examples from the documentation are no longer working on 1.9 because of this change:\nimport tensorflow as tf\n\nelems = [1, 2, 3, 4, 5, 6]\ns = tf.foldl(lambda a, x: a + x, elems)\n\nwith tf.Session() as sess:\n    print(sess.run(s))\nprints 21 on 1.8 but fails on 1.9 with:\nTraceback (most recent call last):\n  File \"test/foldl.py\", line 4, in <module>\n    s = tf.foldl(lambda a, x: a + x, elems)\n  File \"<python>/lib/python3.5/site-packages/tensorflow/python/ops/functional_ops.py\", line 125, in foldl\n    n = elems_flat[0].shape[0].value or array_ops.shape(elems_flat[0])[0]\n  File \"<python>/lib/python3.5/site-packages/tensorflow/python/framework/tensor_shape.py\", line 615, in __getitem__\n    return self._dims[key]\nIndexError: list index out of range\n\nThey should either be updated or this change be considered as breaking.", "body": "Thanks @ebrevdo. After re-reading the documentation, I can accept that my input was not covered by the API. However, the `fold{l,r}` examples from the documentation are no longer working on 1.9 because of this change:\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\nelems = [1, 2, 3, 4, 5, 6]\r\ns = tf.foldl(lambda a, x: a + x, elems)\r\n\r\nwith tf.Session() as sess:\r\n    print(sess.run(s))\r\n```\r\n\r\nprints `21` on 1.8 but fails on 1.9 with:\r\n\r\n```text\r\nTraceback (most recent call last):\r\n  File \"test/foldl.py\", line 4, in <module>\r\n    s = tf.foldl(lambda a, x: a + x, elems)\r\n  File \"<python>/lib/python3.5/site-packages/tensorflow/python/ops/functional_ops.py\", line 125, in foldl\r\n    n = elems_flat[0].shape[0].value or array_ops.shape(elems_flat[0])[0]\r\n  File \"<python>/lib/python3.5/site-packages/tensorflow/python/framework/tensor_shape.py\", line 615, in __getitem__\r\n    return self._dims[key]\r\nIndexError: list index out of range\r\n```\r\n\r\nThey should either be updated or this change be considered as breaking."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12234", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12234/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12234/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12234/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12234", "id": 249807706, "node_id": "MDU6SXNzdWUyNDk4MDc3MDY=", "number": 12234, "title": "Lack of documentation in tf.decode_raw", "user": {"login": "iurilarosa", "id": 16984873, "node_id": "MDQ6VXNlcjE2OTg0ODcz", "avatar_url": "https://avatars3.githubusercontent.com/u/16984873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iurilarosa", "html_url": "https://github.com/iurilarosa", "followers_url": "https://api.github.com/users/iurilarosa/followers", "following_url": "https://api.github.com/users/iurilarosa/following{/other_user}", "gists_url": "https://api.github.com/users/iurilarosa/gists{/gist_id}", "starred_url": "https://api.github.com/users/iurilarosa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iurilarosa/subscriptions", "organizations_url": "https://api.github.com/users/iurilarosa/orgs", "repos_url": "https://api.github.com/users/iurilarosa/repos", "events_url": "https://api.github.com/users/iurilarosa/events{/privacy}", "received_events_url": "https://api.github.com/users/iurilarosa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-12T11:48:49Z", "updated_at": "2017-08-14T19:14:21Z", "closed_at": "2017-08-14T19:14:21Z", "author_association": "NONE", "body_html": "<p>Hi,<br>\ni need to load arrays stored in tfrecords files, so i need to convert the raw string/byte data to number, but i don't understand the output i get using <code>tf.decode_raw</code>. Unfortunately function documentation doesn't help me.</p>\n<p>Here an example of the strange (for me) behavior of this function</p>\n<pre><code>import numpy\nimport tensorflow as tf\nsess = tf.Session()\n\n\narray = numpy.array([0.1, 0.2, 0.4, 0.8, 0.9, 1.1])\nprint(array.tobytes())\nprint(numpy.fromstring(array.tobytes()))\n\ntensoraw = tf.constant(array.tobytes())\n\nprint(sess.run(tensoraw))\nprint(sess.run(tf.decode_raw(tensoraw, tf.float32)))\n\nrawArray = sess.run(tensoraw)\ndecodedArray = sess.run(tf.decode_raw(tensoraw, tf.float32))\nprint(numpy.fromstring(rawArray))\nprint(numpy.fromstring(decodedArray))\n</code></pre>\n<p>with this output</p>\n<pre><code>b'\\x9a\\x99\\x99\\x99\\x99\\x99\\xb9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xc9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xd9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xe9?\\xcd\\xcc\\xcc\\xcc\\xcc\\xcc\\xec?\\x9a\\x99\\x99\\x99\\x99\\x99\\xf1?'\n\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\n\nb'\\x9a\\x99\\x99\\x99\\x99\\x99\\xb9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xc9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xd9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xe9?\\xcd\\xcc\\xcc\\xcc\\xcc\\xcc\\xec?\\x9a\\x99\\x99\\x99\\x99\\x99\\xf1?'\n\n[ -1.58818684e-23   1.44999993e+00  -1.58818684e-23   1.57499993e+00\n  -1.58818684e-23   1.69999993e+00  -1.58818684e-23   1.82499993e+00\n  -1.07374184e+08   1.84999990e+00  -1.58818684e-23   1.88749993e+00]\n\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\n\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\n</code></pre>\n<p>The strangest thing for me is that numpy.fromstring applied both to the raw tensor and the decoded tensor (evaluated) gives the same output.<br>\nThank you.</p>", "body_text": "Hi,\ni need to load arrays stored in tfrecords files, so i need to convert the raw string/byte data to number, but i don't understand the output i get using tf.decode_raw. Unfortunately function documentation doesn't help me.\nHere an example of the strange (for me) behavior of this function\nimport numpy\nimport tensorflow as tf\nsess = tf.Session()\n\n\narray = numpy.array([0.1, 0.2, 0.4, 0.8, 0.9, 1.1])\nprint(array.tobytes())\nprint(numpy.fromstring(array.tobytes()))\n\ntensoraw = tf.constant(array.tobytes())\n\nprint(sess.run(tensoraw))\nprint(sess.run(tf.decode_raw(tensoraw, tf.float32)))\n\nrawArray = sess.run(tensoraw)\ndecodedArray = sess.run(tf.decode_raw(tensoraw, tf.float32))\nprint(numpy.fromstring(rawArray))\nprint(numpy.fromstring(decodedArray))\n\nwith this output\nb'\\x9a\\x99\\x99\\x99\\x99\\x99\\xb9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xc9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xd9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xe9?\\xcd\\xcc\\xcc\\xcc\\xcc\\xcc\\xec?\\x9a\\x99\\x99\\x99\\x99\\x99\\xf1?'\n\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\n\nb'\\x9a\\x99\\x99\\x99\\x99\\x99\\xb9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xc9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xd9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xe9?\\xcd\\xcc\\xcc\\xcc\\xcc\\xcc\\xec?\\x9a\\x99\\x99\\x99\\x99\\x99\\xf1?'\n\n[ -1.58818684e-23   1.44999993e+00  -1.58818684e-23   1.57499993e+00\n  -1.58818684e-23   1.69999993e+00  -1.58818684e-23   1.82499993e+00\n  -1.07374184e+08   1.84999990e+00  -1.58818684e-23   1.88749993e+00]\n\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\n\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\n\nThe strangest thing for me is that numpy.fromstring applied both to the raw tensor and the decoded tensor (evaluated) gives the same output.\nThank you.", "body": "Hi, \r\ni need to load arrays stored in tfrecords files, so i need to convert the raw string/byte data to number, but i don't understand the output i get using `tf.decode_raw`. Unfortunately function documentation doesn't help me.\r\n\r\nHere an example of the strange (for me) behavior of this function\r\n\r\n```\r\nimport numpy\r\nimport tensorflow as tf\r\nsess = tf.Session()\r\n\r\n\r\narray = numpy.array([0.1, 0.2, 0.4, 0.8, 0.9, 1.1])\r\nprint(array.tobytes())\r\nprint(numpy.fromstring(array.tobytes()))\r\n\r\ntensoraw = tf.constant(array.tobytes())\r\n\r\nprint(sess.run(tensoraw))\r\nprint(sess.run(tf.decode_raw(tensoraw, tf.float32)))\r\n\r\nrawArray = sess.run(tensoraw)\r\ndecodedArray = sess.run(tf.decode_raw(tensoraw, tf.float32))\r\nprint(numpy.fromstring(rawArray))\r\nprint(numpy.fromstring(decodedArray))\r\n```\r\nwith this output\r\n```\r\nb'\\x9a\\x99\\x99\\x99\\x99\\x99\\xb9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xc9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xd9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xe9?\\xcd\\xcc\\xcc\\xcc\\xcc\\xcc\\xec?\\x9a\\x99\\x99\\x99\\x99\\x99\\xf1?'\r\n\r\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\r\n\r\nb'\\x9a\\x99\\x99\\x99\\x99\\x99\\xb9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xc9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xd9?\\x9a\\x99\\x99\\x99\\x99\\x99\\xe9?\\xcd\\xcc\\xcc\\xcc\\xcc\\xcc\\xec?\\x9a\\x99\\x99\\x99\\x99\\x99\\xf1?'\r\n\r\n[ -1.58818684e-23   1.44999993e+00  -1.58818684e-23   1.57499993e+00\r\n  -1.58818684e-23   1.69999993e+00  -1.58818684e-23   1.82499993e+00\r\n  -1.07374184e+08   1.84999990e+00  -1.58818684e-23   1.88749993e+00]\r\n\r\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\r\n\r\n[ 0.1  0.2  0.4  0.8  0.9  1.1]\r\n```\r\n\r\nThe strangest thing for me is that numpy.fromstring applied both to the raw tensor and the decoded tensor (evaluated) gives the same output.\r\nThank you."}
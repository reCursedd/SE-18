{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14708", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14708/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14708/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14708/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14708", "id": 275255284, "node_id": "MDU6SXNzdWUyNzUyNTUyODQ=", "number": 14708, "title": "android library not loading saved model due to invalid graphdef error.", "user": {"login": "cooledge", "id": 8671566, "node_id": "MDQ6VXNlcjg2NzE1NjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/8671566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cooledge", "html_url": "https://github.com/cooledge", "followers_url": "https://api.github.com/users/cooledge/followers", "following_url": "https://api.github.com/users/cooledge/following{/other_user}", "gists_url": "https://api.github.com/users/cooledge/gists{/gist_id}", "starred_url": "https://api.github.com/users/cooledge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cooledge/subscriptions", "organizations_url": "https://api.github.com/users/cooledge/orgs", "repos_url": "https://api.github.com/users/cooledge/repos", "events_url": "https://api.github.com/users/cooledge/events{/privacy}", "received_events_url": "https://api.github.com/users/cooledge/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-20T07:03:37Z", "updated_at": "2017-11-25T23:41:11Z", "closed_at": "2017-11-25T23:41:11Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYES</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 16.x</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nUsing VirtualEnv as described on website</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.4 (also tried 1.0, and 1.2)</li>\n<li><strong>Python version</strong>:<br>\n2.7.1.2</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\nNA</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nNA</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nNA</li>\n<li><strong>GPU model and memory</strong>:<br>\nNA</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>I have a bug where a frozen model will not load in an android app. The code is at</p>\n<p><a href=\"https://github.com/cooledge/Chatbot\">https://github.com/cooledge/Chatbot</a></p>\n<p>In ChatActivity on line 39 I load an model that is trivial and built by running \"cd nn; python ./train_noop.py --epochs 5 --save_words --freeze\". That loads thus showing the Android app is setup correctly for loading models. On line 40 I load a model that I got from your tensorflow demo. That also loads showing that complex models can be loaded. On line 41 I load the model that I actually want to load and that fails with the error invalid GraphDef. That model is build by running 'cd nn; python ./train.py --epochs 5 --save_words --freeze\". Why is that not loading. It loads under python on ubuntu and can generate samples. The bug is repoducable by running the app after syncing you don't need to run the training.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYES\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.x\nTensorFlow installed from (source or binary):\nUsing VirtualEnv as described on website\nTensorFlow version (use command below):\n1.4 (also tried 1.0, and 1.2)\nPython version:\n2.7.1.2\nBazel version (if compiling from source):\nNA\nGCC/Compiler version (if compiling from source):\nNA\nCUDA/cuDNN version:\nNA\nGPU model and memory:\nNA\nExact command to reproduce:\n\nI have a bug where a frozen model will not load in an android app. The code is at\nhttps://github.com/cooledge/Chatbot\nIn ChatActivity on line 39 I load an model that is trivial and built by running \"cd nn; python ./train_noop.py --epochs 5 --save_words --freeze\". That loads thus showing the Android app is setup correctly for loading models. On line 40 I load a model that I got from your tensorflow demo. That also loads showing that complex models can be loaded. On line 41 I load the model that I actually want to load and that fails with the error invalid GraphDef. That model is build by running 'cd nn; python ./train.py --epochs 5 --save_words --freeze\". Why is that not loading. It loads under python on ubuntu and can generate samples. The bug is repoducable by running the app after syncing you don't need to run the training.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYES\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu 16.x\r\n- **TensorFlow installed from (source or binary)**:\r\nUsing VirtualEnv as described on website\r\n- **TensorFlow version (use command below)**:\r\n1.4 (also tried 1.0, and 1.2)\r\n- **Python version**: \r\n2.7.1.2\r\n- **Bazel version (if compiling from source)**:\r\nNA\r\n- **GCC/Compiler version (if compiling from source)**:\r\nNA\r\n- **CUDA/cuDNN version**:\r\nNA\r\n- **GPU model and memory**:\r\nNA\r\n- **Exact command to reproduce**:\r\n\r\nI have a bug where a frozen model will not load in an android app. The code is at\r\n\r\nhttps://github.com/cooledge/Chatbot\r\n\r\nIn ChatActivity on line 39 I load an model that is trivial and built by running \"cd nn; python ./train_noop.py --epochs 5 --save_words --freeze\". That loads thus showing the Android app is setup correctly for loading models. On line 40 I load a model that I got from your tensorflow demo. That also loads showing that complex models can be loaded. On line 41 I load the model that I actually want to load and that fails with the error invalid GraphDef. That model is build by running 'cd nn; python ./train.py --epochs 5 --save_words --freeze\". Why is that not loading. It loads under python on ubuntu and can generate samples. The bug is repoducable by running the app after syncing you don't need to run the training.\r\n\r\n"}
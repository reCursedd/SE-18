{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9777", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9777/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9777/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9777/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9777", "id": 227240747, "node_id": "MDU6SXNzdWUyMjcyNDA3NDc=", "number": 9777, "title": "tf.nn.embedding_lookup  poor performance", "user": {"login": "chengdianxuezi", "id": 10277403, "node_id": "MDQ6VXNlcjEwMjc3NDAz", "avatar_url": "https://avatars1.githubusercontent.com/u/10277403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chengdianxuezi", "html_url": "https://github.com/chengdianxuezi", "followers_url": "https://api.github.com/users/chengdianxuezi/followers", "following_url": "https://api.github.com/users/chengdianxuezi/following{/other_user}", "gists_url": "https://api.github.com/users/chengdianxuezi/gists{/gist_id}", "starred_url": "https://api.github.com/users/chengdianxuezi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chengdianxuezi/subscriptions", "organizations_url": "https://api.github.com/users/chengdianxuezi/orgs", "repos_url": "https://api.github.com/users/chengdianxuezi/repos", "events_url": "https://api.github.com/users/chengdianxuezi/events{/privacy}", "received_events_url": "https://api.github.com/users/chengdianxuezi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2017-05-09T03:39:32Z", "updated_at": "2017-12-28T08:57:17Z", "closed_at": "2017-06-16T22:01:37Z", "author_association": "NONE", "body_html": "<p>In my programe, I use  f.nn.embedding_lookup as follow:</p>\n<p>embedding = tf.get_variable(\"embedding\", [200000, 128], tf.float32, initializer=tf.        random_normal_initializer(stddev=0.1), trainable=True,partitioner=tf.fixed_size_partitioner(10))</p>\n<p>word_embedding = tf.nn.embedding_lookup(embedding, query_tensor)<br>\nwhile(1):<br>\nsess.run(word_embedding )</p>\n<p>when I start 30 worker\uff0ceach worker qps is 3000.<br>\nbut when I test tf.nn.embedding_lookup_sparse, each worker qps is 110000</p>\n<p>how to solve this problem,any suggestion welcome</p>", "body_text": "In my programe, I use  f.nn.embedding_lookup as follow:\nembedding = tf.get_variable(\"embedding\", [200000, 128], tf.float32, initializer=tf.        random_normal_initializer(stddev=0.1), trainable=True,partitioner=tf.fixed_size_partitioner(10))\nword_embedding = tf.nn.embedding_lookup(embedding, query_tensor)\nwhile(1):\nsess.run(word_embedding )\nwhen I start 30 worker\uff0ceach worker qps is 3000.\nbut when I test tf.nn.embedding_lookup_sparse, each worker qps is 110000\nhow to solve this problem,any suggestion welcome", "body": "In my programe, I use  f.nn.embedding_lookup as follow:\r\n\r\nembedding = tf.get_variable(\"embedding\", [200000, 128], tf.float32, initializer=tf.        random_normal_initializer(stddev=0.1), trainable=True,partitioner=tf.fixed_size_partitioner(10))\r\n\r\nword_embedding = tf.nn.embedding_lookup(embedding, query_tensor)\r\nwhile(1):\r\n    sess.run(word_embedding )\r\n\r\n\r\nwhen I start 30 worker\uff0ceach worker qps is 3000.\r\nbut when I test tf.nn.embedding_lookup_sparse, each worker qps is 110000\r\n\r\nhow to solve this problem,any suggestion welcome"}
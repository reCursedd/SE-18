{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14903", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14903/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14903/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14903/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14903", "id": 276928288, "node_id": "MDU6SXNzdWUyNzY5MjgyODg=", "number": 14903, "title": "Non-deterministic result using  a pre-trained word embedding  in TensorFlow", "user": {"login": "wwwyn", "id": 30191306, "node_id": "MDQ6VXNlcjMwMTkxMzA2", "avatar_url": "https://avatars2.githubusercontent.com/u/30191306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwwyn", "html_url": "https://github.com/wwwyn", "followers_url": "https://api.github.com/users/wwwyn/followers", "following_url": "https://api.github.com/users/wwwyn/following{/other_user}", "gists_url": "https://api.github.com/users/wwwyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwwyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwwyn/subscriptions", "organizations_url": "https://api.github.com/users/wwwyn/orgs", "repos_url": "https://api.github.com/users/wwwyn/repos", "events_url": "https://api.github.com/users/wwwyn/events{/privacy}", "received_events_url": "https://api.github.com/users/wwwyn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-27T07:52:04Z", "updated_at": "2017-11-28T02:46:48Z", "closed_at": "2017-11-28T02:46:48Z", "author_association": "NONE", "body_html": "<p>I use pre-trained word embedding to initialize embedding in tensorflow, but got a non-deterministic result. However, if I fix the seed and use random initialization, the result is almost the same.What's the problem here? Thanks.<br>\nThe code is here:</p>\n<pre><code>with tf.variable_scope(\"embedding\"):\n    if init_embedding is None:\n        self.embedding = tf.get_variable(name='embedding', shape=[vocab_size, word_dim],\n                                              dtype=np.float32)\n    else:\n        self.embedding = tf.get_variable(name=\"embedding\", shape=init_embedding.shape,\n                                         initializer=tf.constant_initializer(init_embedding), `trainable=True)`\n</code></pre>\n<p>init_embedding is the pre-trained word embedding</p>", "body_text": "I use pre-trained word embedding to initialize embedding in tensorflow, but got a non-deterministic result. However, if I fix the seed and use random initialization, the result is almost the same.What's the problem here? Thanks.\nThe code is here:\nwith tf.variable_scope(\"embedding\"):\n    if init_embedding is None:\n        self.embedding = tf.get_variable(name='embedding', shape=[vocab_size, word_dim],\n                                              dtype=np.float32)\n    else:\n        self.embedding = tf.get_variable(name=\"embedding\", shape=init_embedding.shape,\n                                         initializer=tf.constant_initializer(init_embedding), `trainable=True)`\n\ninit_embedding is the pre-trained word embedding", "body": "I use pre-trained word embedding to initialize embedding in tensorflow, but got a non-deterministic result. However, if I fix the seed and use random initialization, the result is almost the same.What's the problem here? Thanks.\r\nThe code is here:\r\n\r\n```\r\nwith tf.variable_scope(\"embedding\"):\r\n    if init_embedding is None:\r\n        self.embedding = tf.get_variable(name='embedding', shape=[vocab_size, word_dim],\r\n                                              dtype=np.float32)\r\n    else:\r\n        self.embedding = tf.get_variable(name=\"embedding\", shape=init_embedding.shape,\r\n                                         initializer=tf.constant_initializer(init_embedding), `trainable=True)`\r\n```\r\n\r\ninit_embedding is the pre-trained word embedding\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/316549931", "html_url": "https://github.com/tensorflow/tensorflow/pull/11593#issuecomment-316549931", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11593", "id": 316549931, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjU0OTkzMQ==", "user": {"login": "ssaavedra", "id": 581152, "node_id": "MDQ6VXNlcjU4MTE1Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/581152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssaavedra", "html_url": "https://github.com/ssaavedra", "followers_url": "https://api.github.com/users/ssaavedra/followers", "following_url": "https://api.github.com/users/ssaavedra/following{/other_user}", "gists_url": "https://api.github.com/users/ssaavedra/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssaavedra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssaavedra/subscriptions", "organizations_url": "https://api.github.com/users/ssaavedra/orgs", "repos_url": "https://api.github.com/users/ssaavedra/repos", "events_url": "https://api.github.com/users/ssaavedra/events{/privacy}", "received_events_url": "https://api.github.com/users/ssaavedra/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-19T23:28:07Z", "updated_at": "2017-07-19T23:28:07Z", "author_association": "NONE", "body_html": "<p>On Python 3, the referred bug happens due to the modfiied function returning paths as bytes, while other functions, namely list_directory in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/lib/io/file_io.py\">file_io.py</a> expect and deal with strings. If you are not comfortable dropping as_bytes, as per the poor type safety that Python gives us, I can resubmit the patch changing the conversion to <code>compat.as_str_any</code> instead, if that seems more reasonable. The rationale behind bug <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"233209852\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/10399\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/10399/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/10399\">#10399</a> is that a <code>os..path.join</code> is happening between a something returned by this function (bytes) and something returned (down the stacktrace) by list_directory in file_io.py.</p>\n<p>On Python 2, I haven't seen any regression and all tests in //tensorflow/python/... seem to be passing on my computer.</p>", "body_text": "On Python 3, the referred bug happens due to the modfiied function returning paths as bytes, while other functions, namely list_directory in file_io.py expect and deal with strings. If you are not comfortable dropping as_bytes, as per the poor type safety that Python gives us, I can resubmit the patch changing the conversion to compat.as_str_any instead, if that seems more reasonable. The rationale behind bug #10399 is that a os..path.join is happening between a something returned by this function (bytes) and something returned (down the stacktrace) by list_directory in file_io.py.\nOn Python 2, I haven't seen any regression and all tests in //tensorflow/python/... seem to be passing on my computer.", "body": "On Python 3, the referred bug happens due to the modfiied function returning paths as bytes, while other functions, namely list_directory in [file_io.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/lib/io/file_io.py) expect and deal with strings. If you are not comfortable dropping as_bytes, as per the poor type safety that Python gives us, I can resubmit the patch changing the conversion to `compat.as_str_any` instead, if that seems more reasonable. The rationale behind bug #10399 is that a `os..path.join` is happening between a something returned by this function (bytes) and something returned (down the stacktrace) by list_directory in file_io.py.\r\n\r\nOn Python 2, I haven't seen any regression and all tests in //tensorflow/python/... seem to be passing on my computer."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11978", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11978/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11978/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11978/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11978", "id": 247499268, "node_id": "MDU6SXNzdWUyNDc0OTkyNjg=", "number": 11978, "title": " tf.nn.weighted_cross_entropy_with_logits  is bad", "user": {"login": "erwins22", "id": 1397543, "node_id": "MDQ6VXNlcjEzOTc1NDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1397543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erwins22", "html_url": "https://github.com/erwins22", "followers_url": "https://api.github.com/users/erwins22/followers", "following_url": "https://api.github.com/users/erwins22/following{/other_user}", "gists_url": "https://api.github.com/users/erwins22/gists{/gist_id}", "starred_url": "https://api.github.com/users/erwins22/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erwins22/subscriptions", "organizations_url": "https://api.github.com/users/erwins22/orgs", "repos_url": "https://api.github.com/users/erwins22/repos", "events_url": "https://api.github.com/users/erwins22/events{/privacy}", "received_events_url": "https://api.github.com/users/erwins22/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-02T19:39:10Z", "updated_at": "2017-08-02T20:51:55Z", "closed_at": "2017-08-02T20:51:43Z", "author_association": "NONE", "body_html": "<p>tf.nn.weighted_cross_entropy_with_logits<br>\n(1 - z) * x + l * (log(1 + exp(-abs(x))) + max(-x, 0))<br>\nwhere l = (1 + (q - 1) * z)</p>\n<p>but tf.nn.sigmoid_cross_entropy_with_logits<br>\nmax(x, 0) - x * z + log(1 + exp(-abs(x)))</p>\n<p>if q=1 weighted_cross_entropy_with_logits is equvalent sigmoid_cross_entropy_with_logits</p>\n<p>(1 - z) * x + l * (log(1 + exp(-abs(x))) + max(-x, 0)) {l=1}- (max(x, 0) - x * z + log(1 + exp(-abs(x)))) ==<br>\nx+max(-x, 0)-max(x, 0) &lt;&gt; 0</p>\n<p>tf.nn.weighted_cross_entropy_with_logits must be<br>\n(- z * x) + l * (log(1 + exp(-abs(x))) + max(x, 0)</p>", "body_text": "tf.nn.weighted_cross_entropy_with_logits\n(1 - z) * x + l * (log(1 + exp(-abs(x))) + max(-x, 0))\nwhere l = (1 + (q - 1) * z)\nbut tf.nn.sigmoid_cross_entropy_with_logits\nmax(x, 0) - x * z + log(1 + exp(-abs(x)))\nif q=1 weighted_cross_entropy_with_logits is equvalent sigmoid_cross_entropy_with_logits\n(1 - z) * x + l * (log(1 + exp(-abs(x))) + max(-x, 0)) {l=1}- (max(x, 0) - x * z + log(1 + exp(-abs(x)))) ==\nx+max(-x, 0)-max(x, 0) <> 0\ntf.nn.weighted_cross_entropy_with_logits must be\n(- z * x) + l * (log(1 + exp(-abs(x))) + max(x, 0)", "body": " tf.nn.weighted_cross_entropy_with_logits\r\n(1 - z) * x + l * (log(1 + exp(-abs(x))) + max(-x, 0)) \r\nwhere l = (1 + (q - 1) * z)\r\n\r\nbut tf.nn.sigmoid_cross_entropy_with_logits\r\nmax(x, 0) - x * z + log(1 + exp(-abs(x)))\r\n\r\nif q=1 weighted_cross_entropy_with_logits is equvalent sigmoid_cross_entropy_with_logits\r\n\r\n\r\n(1 - z) * x + l * (log(1 + exp(-abs(x))) + max(-x, 0)) {l=1}- (max(x, 0) - x * z + log(1 + exp(-abs(x)))) ==\r\nx+max(-x, 0)-max(x, 0) <> 0\r\n\r\n\r\n tf.nn.weighted_cross_entropy_with_logits must be\r\n   (- z * x) + l * (log(1 + exp(-abs(x))) + max(x, 0) "}
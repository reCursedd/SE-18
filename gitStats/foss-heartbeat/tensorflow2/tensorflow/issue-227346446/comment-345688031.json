{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/345688031", "html_url": "https://github.com/tensorflow/tensorflow/pull/9792#issuecomment-345688031", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9792", "id": 345688031, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTY4ODAzMQ==", "user": {"login": "wodesuck", "id": 3124581, "node_id": "MDQ6VXNlcjMxMjQ1ODE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3124581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wodesuck", "html_url": "https://github.com/wodesuck", "followers_url": "https://api.github.com/users/wodesuck/followers", "following_url": "https://api.github.com/users/wodesuck/following{/other_user}", "gists_url": "https://api.github.com/users/wodesuck/gists{/gist_id}", "starred_url": "https://api.github.com/users/wodesuck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wodesuck/subscriptions", "organizations_url": "https://api.github.com/users/wodesuck/orgs", "repos_url": "https://api.github.com/users/wodesuck/repos", "events_url": "https://api.github.com/users/wodesuck/events{/privacy}", "received_events_url": "https://api.github.com/users/wodesuck/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-20T12:57:22Z", "updated_at": "2017-11-20T12:57:22Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5620849\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/snownus\">@snownus</a></p>\n<p>The simplest thing you could do is try only add control input to nodes in a <code>tf.while_loop</code>. (as disscusions in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"204298904\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7162\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7162/hovercard?comment_id=307994191&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/7162#issuecomment-307994191\">#7162 (comment)</a>).</p>\n<p>Then, you could do some benchmark with <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/benchmark\">benchmark_model</a> and <a href=\"https://towardsdatascience.com/howto-profile-tensorflow-1a49fb18073d\" rel=\"nofollow\">timeline</a>, to find the bottleneck of your model.</p>\n<p>The last suggestion, I have found that <code>QuantizedMatMul</code> could speed up if <code>transpose_b=True</code>, so a general trick is pre-transposing all the weight matrices.</p>", "body_text": "@snownus\nThe simplest thing you could do is try only add control input to nodes in a tf.while_loop. (as disscusions in #7162 (comment)).\nThen, you could do some benchmark with benchmark_model and timeline, to find the bottleneck of your model.\nThe last suggestion, I have found that QuantizedMatMul could speed up if transpose_b=True, so a general trick is pre-transposing all the weight matrices.", "body": "@snownus \r\n\r\nThe simplest thing you could do is try only add control input to nodes in a `tf.while_loop`. (as disscusions in https://github.com/tensorflow/tensorflow/issues/7162#issuecomment-307994191).\r\n\r\nThen, you could do some benchmark with [benchmark_model](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/benchmark) and [timeline](https://towardsdatascience.com/howto-profile-tensorflow-1a49fb18073d), to find the bottleneck of your model.\r\n\r\nThe last suggestion, I have found that `QuantizedMatMul` could speed up if `transpose_b=True`, so a general trick is pre-transposing all the weight matrices."}
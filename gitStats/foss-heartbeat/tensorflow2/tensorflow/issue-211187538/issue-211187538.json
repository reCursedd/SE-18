{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7983", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7983/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7983/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7983/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7983", "id": 211187538, "node_id": "MDU6SXNzdWUyMTExODc1Mzg=", "number": 7983, "title": "failed initializing StreamExecutor for CUDA device ordinal 0", "user": {"login": "encorechow", "id": 9158462, "node_id": "MDQ6VXNlcjkxNTg0NjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/9158462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/encorechow", "html_url": "https://github.com/encorechow", "followers_url": "https://api.github.com/users/encorechow/followers", "following_url": "https://api.github.com/users/encorechow/following{/other_user}", "gists_url": "https://api.github.com/users/encorechow/gists{/gist_id}", "starred_url": "https://api.github.com/users/encorechow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/encorechow/subscriptions", "organizations_url": "https://api.github.com/users/encorechow/orgs", "repos_url": "https://api.github.com/users/encorechow/repos", "events_url": "https://api.github.com/users/encorechow/events{/privacy}", "received_events_url": "https://api.github.com/users/encorechow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-03-01T19:45:02Z", "updated_at": "2018-08-23T23:25:18Z", "closed_at": "2017-03-10T02:48:46Z", "author_association": "NONE", "body_html": "<p>I encountered a strange issue that tensorflow asks for extreme amount of memory and report an error, which I cannot find any solution over the internet. I have two Titan X, the gpu0 is running traning process which occupies the whole memory of gpu0 and 100m of gpu1. I was trying to run inference python program on gpu1 and got that error.</p>\n<p>System settings: Ubuntu 16.04, Cuda 8.0, CUDNN 5.1 for 8.0, Nvidia 367.57 driver, tensorflow 1.0.0. The rest you can see in the log.</p>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\nE tensorflow/core/common_runtime/direct_session.cc:137] Internal: failed initializing StreamExecutor for CUDA device ordinal 0: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_OUT_OF_MEMORY; total memory reported: 18446744073709551615\nTraceback (most recent call last):\n  File \"inference.py\", line 143, in &lt;module&gt;\n    main()\n  File \"inference.py\", line 102, in main\n    sess = tf.Session(config=config)\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1187, in __init__\n    super(Session, self).__init__(target, graph, config=config)\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 552, in __init__\n    self._session = tf_session.TF_NewDeprecatedSession(opts, status)\n  File \"/usr/lib/python3.5/contextlib.py\", line 66, in __exit__\n    next(self.gen)\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 469, in raise_exception_on_not_ok_status\n    pywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.\n</code></pre>", "body_text": "I encountered a strange issue that tensorflow asks for extreme amount of memory and report an error, which I cannot find any solution over the internet. I have two Titan X, the gpu0 is running traning process which occupies the whole memory of gpu0 and 100m of gpu1. I was trying to run inference python program on gpu1 and got that error.\nSystem settings: Ubuntu 16.04, Cuda 8.0, CUDNN 5.1 for 8.0, Nvidia 367.57 driver, tensorflow 1.0.0. The rest you can see in the log.\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\nE tensorflow/core/common_runtime/direct_session.cc:137] Internal: failed initializing StreamExecutor for CUDA device ordinal 0: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_OUT_OF_MEMORY; total memory reported: 18446744073709551615\nTraceback (most recent call last):\n  File \"inference.py\", line 143, in <module>\n    main()\n  File \"inference.py\", line 102, in main\n    sess = tf.Session(config=config)\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1187, in __init__\n    super(Session, self).__init__(target, graph, config=config)\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 552, in __init__\n    self._session = tf_session.TF_NewDeprecatedSession(opts, status)\n  File \"/usr/lib/python3.5/contextlib.py\", line 66, in __exit__\n    next(self.gen)\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 469, in raise_exception_on_not_ok_status\n    pywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.", "body": "I encountered a strange issue that tensorflow asks for extreme amount of memory and report an error, which I cannot find any solution over the internet. I have two Titan X, the gpu0 is running traning process which occupies the whole memory of gpu0 and 100m of gpu1. I was trying to run inference python program on gpu1 and got that error. \r\n\r\nSystem settings: Ubuntu 16.04, Cuda 8.0, CUDNN 5.1 for 8.0, Nvidia 367.57 driver, tensorflow 1.0.0. The rest you can see in the log. \r\n\r\n```\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\nW tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\nE tensorflow/core/common_runtime/direct_session.cc:137] Internal: failed initializing StreamExecutor for CUDA device ordinal 0: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_OUT_OF_MEMORY; total memory reported: 18446744073709551615\r\nTraceback (most recent call last):\r\n  File \"inference.py\", line 143, in <module>\r\n    main()\r\n  File \"inference.py\", line 102, in main\r\n    sess = tf.Session(config=config)\r\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1187, in __init__\r\n    super(Session, self).__init__(target, graph, config=config)\r\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 552, in __init__\r\n    self._session = tf_session.TF_NewDeprecatedSession(opts, status)\r\n  File \"/usr/lib/python3.5/contextlib.py\", line 66, in __exit__\r\n    next(self.gen)\r\n  File \"/home/zhouzh/virtualenvs/tensorflow/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 469, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.\r\n```\r\n\r\n"}
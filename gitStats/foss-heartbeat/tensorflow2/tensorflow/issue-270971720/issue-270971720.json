{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14209", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14209/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14209/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14209/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14209", "id": 270971720, "node_id": "MDU6SXNzdWUyNzA5NzE3MjA=", "number": 14209, "title": "Why eager concat  inputs?", "user": {"login": "soenkyo", "id": 26682110, "node_id": "MDQ6VXNlcjI2NjgyMTEw", "avatar_url": "https://avatars3.githubusercontent.com/u/26682110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soenkyo", "html_url": "https://github.com/soenkyo", "followers_url": "https://api.github.com/users/soenkyo/followers", "following_url": "https://api.github.com/users/soenkyo/following{/other_user}", "gists_url": "https://api.github.com/users/soenkyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/soenkyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soenkyo/subscriptions", "organizations_url": "https://api.github.com/users/soenkyo/orgs", "repos_url": "https://api.github.com/users/soenkyo/repos", "events_url": "https://api.github.com/users/soenkyo/events{/privacy}", "received_events_url": "https://api.github.com/users/soenkyo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2017-11-03T13:06:32Z", "updated_at": "2018-06-22T03:07:12Z", "closed_at": "2018-03-31T21:21:44Z", "author_association": "NONE", "body_html": "<p>I am using eager to implement a seq2seq model.<br>\nHere is a <a href=\"https://github.com/soenkyo/toy_seq2seq_4_debug\">toy model</a>:<br>\nNo error arise in forward calculate, but in backprop, I get:</p>\n<p><code>Traceback (most recent call last): File \"/home/usr/eager/test.py\", line 18, in &lt;module&gt; tf.app.run() File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run _sys.exit(main(_sys.argv[:1] + flags_passthrough)) File \"/home/usr/eager/test.py\", line 14, in main empirical_loss, gradients_and_variables = cal_gradient() File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/backprop.py\", line 362, in grad_fn sources) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/imperative_grad.py\", line 230, in imperative_grad result.append(vspace.aggregate_fn(g)) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/backprop.py\", line 716, in _aggregate_grads for x in indexed_slices_list], 0) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 1110, in concat return gen_array_ops._concat_v2(values=values, axis=axis, name=name) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 719, in _concat_v2 attrs=_attrs, ctx=_ctx, name=name) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/execute.py\", line 67, in execute six.raise_from(core._status_to_exception(e.code, message), None) File \"/home/usr/miniconda2/lib/python2.7/site-packages/six.py\", line 718, in raise_from raise value tensorflow.python.framework.errors_impl.InvalidArgumentError: ConcatOp : Dimensions of inputs should match: shape[0] = [16,100] vs. shape[1] = [16,400] [Op:ConcatV2] name: concat </code></p>", "body_text": "I am using eager to implement a seq2seq model.\nHere is a toy model:\nNo error arise in forward calculate, but in backprop, I get:\nTraceback (most recent call last): File \"/home/usr/eager/test.py\", line 18, in <module> tf.app.run() File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run _sys.exit(main(_sys.argv[:1] + flags_passthrough)) File \"/home/usr/eager/test.py\", line 14, in main empirical_loss, gradients_and_variables = cal_gradient() File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/backprop.py\", line 362, in grad_fn sources) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/imperative_grad.py\", line 230, in imperative_grad result.append(vspace.aggregate_fn(g)) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/backprop.py\", line 716, in _aggregate_grads for x in indexed_slices_list], 0) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 1110, in concat return gen_array_ops._concat_v2(values=values, axis=axis, name=name) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 719, in _concat_v2 attrs=_attrs, ctx=_ctx, name=name) File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/execute.py\", line 67, in execute six.raise_from(core._status_to_exception(e.code, message), None) File \"/home/usr/miniconda2/lib/python2.7/site-packages/six.py\", line 718, in raise_from raise value tensorflow.python.framework.errors_impl.InvalidArgumentError: ConcatOp : Dimensions of inputs should match: shape[0] = [16,100] vs. shape[1] = [16,400] [Op:ConcatV2] name: concat", "body": "I am using eager to implement a seq2seq model. \r\nHere is a [toy model](https://github.com/soenkyo/toy_seq2seq_4_debug):\r\nNo error arise in forward calculate, but in backprop, I get:\r\n\r\n`Traceback (most recent call last):\r\n  File \"/home/usr/eager/test.py\", line 18, in <module>\r\n    tf.app.run()\r\n  File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/home/usr/eager/test.py\", line 14, in main\r\n    empirical_loss, gradients_and_variables = cal_gradient()\r\n  File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/backprop.py\", line 362, in grad_fn\r\n    sources)\r\n  File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/imperative_grad.py\", line 230, in imperative_grad\r\n    result.append(vspace.aggregate_fn(g))\r\n  File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/backprop.py\", line 716, in _aggregate_grads\r\n    for x in indexed_slices_list], 0)\r\n  File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/ops/array_ops.py\", line 1110, in concat\r\n    return gen_array_ops._concat_v2(values=values, axis=axis, name=name)\r\n  File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 719, in _concat_v2\r\n    attrs=_attrs, ctx=_ctx, name=name)\r\n  File \"/home/usr/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/execute.py\", line 67, in execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"/home/usr/miniconda2/lib/python2.7/site-packages/six.py\", line 718, in raise_from\r\n    raise value\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: ConcatOp : Dimensions of inputs should match: shape[0] = [16,100] vs. shape[1] = [16,400] [Op:ConcatV2] name: concat\r\n`\r\n"}
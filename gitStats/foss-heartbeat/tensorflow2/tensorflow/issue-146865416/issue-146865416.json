{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1820", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1820/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1820/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1820/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1820", "id": 146865416, "node_id": "MDU6SXNzdWUxNDY4NjU0MTY=", "number": 1820, "title": "Tensorflow version of word2vec issue with huge corpora", "user": {"login": "JosuGoiko", "id": 15345919, "node_id": "MDQ6VXNlcjE1MzQ1OTE5", "avatar_url": "https://avatars1.githubusercontent.com/u/15345919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JosuGoiko", "html_url": "https://github.com/JosuGoiko", "followers_url": "https://api.github.com/users/JosuGoiko/followers", "following_url": "https://api.github.com/users/JosuGoiko/following{/other_user}", "gists_url": "https://api.github.com/users/JosuGoiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/JosuGoiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JosuGoiko/subscriptions", "organizations_url": "https://api.github.com/users/JosuGoiko/orgs", "repos_url": "https://api.github.com/users/JosuGoiko/repos", "events_url": "https://api.github.com/users/JosuGoiko/events{/privacy}", "received_events_url": "https://api.github.com/users/JosuGoiko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-04-08T08:55:59Z", "updated_at": "2017-06-16T20:16:20Z", "closed_at": "2017-06-16T20:16:20Z", "author_association": "NONE", "body_html": "<p>Hi All,</p>\n<p>I have the pip wheel distribution of Tensorflow r7.1 in Red Hat 6 in our cluster.</p>\n<p>My issue is that I wanted to extract the embedding from a huge corpora (5*10\u2079 tokens), but  the 32 bit \"corpus_size_\" counter in \"word2vec_kernel.cc\" is not enough. It seems that it is not so straightforward to fix it (changing the counter to int64).</p>\n<p>I have seen that this very error was reported last  17th of Dec 2015 in issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"122684062\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/531\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/531/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/531\">#531</a>.</p>\n<p>I also receive the following error:</p>\n<p>W tensorflow/models/embedding/word2vec_kernels.cc:59] Invalid argument: The text file wbu.txt contains too little data: -522037214 words<br>\nE tensorflow/core/framework/op_segment.cc:53] Create kernel failed: Invalid argument: The text file wbu.txt contains too little data: -522037214 words<br>\nE tensorflow/core/common_runtime/executor.cc:275] Executor failed to create kernel. Invalid argument: The text file wbu.txt contains too little data: -522037214 words<br>\n[[Node: Skipgram = Skipgram<a href=\"\">batch_size=16, filename=\"wbu.txt\", min_count=5, subsample=0.001, window_size=5, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nTraceback (most recent call last):<br>\nFile \"word2vec_minibatch.py\", line 425, in <br>\ntf.app.run()<br>\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"word2vec_minibatch.py\", line 411, in main<br>\nmodel = Word2Vec(opts, session)<br>\nFile \"word2vec_minibatch.py\", line 175, in <strong>init</strong><br>\nself.build_graph()<br>\nFile \"word2vec_minibatch.py\", line 312, in build_graph<br>\nopts.words_per_epoch) = self._session.run([words, counts, words_per_epoch])<br>\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 315, in run<br>\nreturn self._run(None, fetches, feed_dict)<br>\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 511, in _run<br>\nfeed_dict_string)<br>\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 564, in _do_run<br>\ntarget_list)<br>\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 586, in _do_call<br>\ne.code)<br>\ntensorflow.python.framework.errors.InvalidArgumentError: The text file wbu.txt contains too little data: -522037214 words<br>\n[[Node: Skipgram = Skipgram<a href=\"\">batch_size=16, filename=\"wbu.txt\", min_count=5, subsample=0.001, window_size=5, _device=\"/job:localhost/replica:0/task:0/cpu:0\"</a>]]<br>\nCaused by op u'Skipgram', defined at:<br>\nFile \"word2vec_minibatch.py\", line 425, in <br>\ntf.app.run()<br>\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"word2vec_minibatch.py\", line 411, in main<br>\nmodel = Word2Vec(opts, session)</p>\n<p>Thanx</p>", "body_text": "Hi All,\nI have the pip wheel distribution of Tensorflow r7.1 in Red Hat 6 in our cluster.\nMy issue is that I wanted to extract the embedding from a huge corpora (5*10\u2079 tokens), but  the 32 bit \"corpus_size_\" counter in \"word2vec_kernel.cc\" is not enough. It seems that it is not so straightforward to fix it (changing the counter to int64).\nI have seen that this very error was reported last  17th of Dec 2015 in issue #531.\nI also receive the following error:\nW tensorflow/models/embedding/word2vec_kernels.cc:59] Invalid argument: The text file wbu.txt contains too little data: -522037214 words\nE tensorflow/core/framework/op_segment.cc:53] Create kernel failed: Invalid argument: The text file wbu.txt contains too little data: -522037214 words\nE tensorflow/core/common_runtime/executor.cc:275] Executor failed to create kernel. Invalid argument: The text file wbu.txt contains too little data: -522037214 words\n[[Node: Skipgram = Skipgrambatch_size=16, filename=\"wbu.txt\", min_count=5, subsample=0.001, window_size=5, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nTraceback (most recent call last):\nFile \"word2vec_minibatch.py\", line 425, in \ntf.app.run()\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"word2vec_minibatch.py\", line 411, in main\nmodel = Word2Vec(opts, session)\nFile \"word2vec_minibatch.py\", line 175, in init\nself.build_graph()\nFile \"word2vec_minibatch.py\", line 312, in build_graph\nopts.words_per_epoch) = self._session.run([words, counts, words_per_epoch])\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 315, in run\nreturn self._run(None, fetches, feed_dict)\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 511, in _run\nfeed_dict_string)\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 564, in _do_run\ntarget_list)\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 586, in _do_call\ne.code)\ntensorflow.python.framework.errors.InvalidArgumentError: The text file wbu.txt contains too little data: -522037214 words\n[[Node: Skipgram = Skipgrambatch_size=16, filename=\"wbu.txt\", min_count=5, subsample=0.001, window_size=5, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]]\nCaused by op u'Skipgram', defined at:\nFile \"word2vec_minibatch.py\", line 425, in \ntf.app.run()\nFile \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"word2vec_minibatch.py\", line 411, in main\nmodel = Word2Vec(opts, session)\nThanx", "body": " Hi All,\n\nI have the pip wheel distribution of Tensorflow r7.1 in Red Hat 6 in our cluster.\n\nMy issue is that I wanted to extract the embedding from a huge corpora (5*10\u2079 tokens), but  the 32 bit \"corpus_size_\" counter in \"word2vec_kernel.cc\" is not enough. It seems that it is not so straightforward to fix it (changing the counter to int64). \n\nI have seen that this very error was reported last  17th of Dec 2015 in issue #531.\n\nI also receive the following error:\n\nW tensorflow/models/embedding/word2vec_kernels.cc:59] Invalid argument: The text file wbu.txt contains too little data: -522037214 words\nE tensorflow/core/framework/op_segment.cc:53] Create kernel failed: Invalid argument: The text file wbu.txt contains too little data: -522037214 words\nE tensorflow/core/common_runtime/executor.cc:275] Executor failed to create kernel. Invalid argument: The text file wbu.txt contains too little data: -522037214 words\n     [[Node: Skipgram = Skipgram[batch_size=16, filename=\"wbu.txt\", min_count=5, subsample=0.001, window_size=5, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nTraceback (most recent call last):\n  File \"word2vec_minibatch.py\", line 425, in <module>\n    tf.app.run()\n  File \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"word2vec_minibatch.py\", line 411, in main\n    model = Word2Vec(opts, session)\n  File \"word2vec_minibatch.py\", line 175, in __init__\n    self.build_graph()\n  File \"word2vec_minibatch.py\", line 312, in build_graph\n    opts.words_per_epoch) = self._session.run([words, counts, words_per_epoch])\n  File \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 315, in run\n    return self._run(None, fetches, feed_dict)\n  File \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 511, in _run\n    feed_dict_string)\n  File \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 564, in _do_run\n    target_list)\n  File \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 586, in _do_call\n    e.code)\ntensorflow.python.framework.errors.InvalidArgumentError: The text file wbu.txt contains too little data: -522037214 words\n     [[Node: Skipgram = Skipgram[batch_size=16, filename=\"wbu.txt\", min_count=5, subsample=0.001, window_size=5, _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\nCaused by op u'Skipgram', defined at:\n  File \"word2vec_minibatch.py\", line 425, in <module>\n    tf.app.run()\n  File \"/opt/python-2.7/lib/python2.7/site-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\n    sys.exit(main(sys.argv))\n  File \"word2vec_minibatch.py\", line 411, in main\n    model = Word2Vec(opts, session)\n\nThanx\n"}
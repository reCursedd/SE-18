{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8176", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8176/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8176/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8176/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8176", "id": 212526645, "node_id": "MDU6SXNzdWUyMTI1MjY2NDU=", "number": 8176, "title": "runtime error of combing tensorflow CTC and SynthText", "user": {"login": "chuckbasstan123", "id": 12258976, "node_id": "MDQ6VXNlcjEyMjU4OTc2", "avatar_url": "https://avatars2.githubusercontent.com/u/12258976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chuckbasstan123", "html_url": "https://github.com/chuckbasstan123", "followers_url": "https://api.github.com/users/chuckbasstan123/followers", "following_url": "https://api.github.com/users/chuckbasstan123/following{/other_user}", "gists_url": "https://api.github.com/users/chuckbasstan123/gists{/gist_id}", "starred_url": "https://api.github.com/users/chuckbasstan123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chuckbasstan123/subscriptions", "organizations_url": "https://api.github.com/users/chuckbasstan123/orgs", "repos_url": "https://api.github.com/users/chuckbasstan123/repos", "events_url": "https://api.github.com/users/chuckbasstan123/events{/privacy}", "received_events_url": "https://api.github.com/users/chuckbasstan123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-07T18:59:40Z", "updated_at": "2017-03-07T19:12:28Z", "closed_at": "2017-03-07T19:12:28Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>I met a runtime error during training when I tried to applied <strong>tensorflow built-in CTC</strong> loss function  (<a href=\"https://www.tensorflow.org/versions/r0.10/api_docs/python/nn/conectionist_temporal_classification__ctc\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.10/api_docs/python/nn/conectionist_temporal_classification__ctc</a>_) to <strong>SynthText dataset</strong>. <a href=\"http://www.robots.ox.ac.uk/~vgg/data/scenetext/\" rel=\"nofollow\">http://www.robots.ox.ac.uk/~vgg/data/scenetext/</a><br>\nIt said \" Not enough time for target transition sequence (required: 4, available: 0)\".<br>\nHere is the some info for environment: tensorflow version '0.12.0-rc0'.</p>\n<p>I am able to apply <strong>tensorflow built-in CTC</strong> to <strong>Synth90K Dataset</strong> with great performance (<a href=\"http://www.robots.ox.ac.uk/~vgg/data/text/\" rel=\"nofollow\">http://www.robots.ox.ac.uk/~vgg/data/text/</a>).</p>\n<p>It seems like the <strong>SynthText dataset</strong> is not compilable with <strong>tensorflow built-in CTC</strong> but <strong>Synth90K Dataset</strong> could.</p>\n<p>Please find the error message as reference</p>\n<p>step 980, loss = 50.17 (92.1 examples/sec; 0.695 sec/batch)<br>\nW tensorflow/core/framework/op_kernel.cc:975] Invalid argument: Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28<br>\nTraceback (most recent call last):<br>\nFile \"multi-gpu-train.py\", line 305, in <br>\ntf.app.run()<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run<br>\nsys.exit(main(sys.argv[:1] + flags_passthrough))<br>\nFile \"multi-gpu-train.py\", line 301, in main<br>\ntrain()<br>\nFile \"multi-gpu-train.py\", line 270, in train<br>\n_, loss_value = sess.run([train_op, loss])<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 766, in run<br>\nrun_metadata_ptr)<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 964, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1014, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1034, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28<br>\n[[Node: tower_0/CTCLoss = CTCLoss[ctc_merge_repeated=true, preprocess_collapse_repeated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/transpose_2/_555, tower_0/Where, tower_0/sub_2/_557, tower_0/Sum_1/_559)]]</p>\n<p>Caused by op u'tower_0/CTCLoss', defined at:<br>\nFile \"multi-gpu-train.py\", line 305, in <br>\ntf.app.run()<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run<br>\nsys.exit(main(sys.argv[:1] + flags_passthrough))<br>\nFile \"multi-gpu-train.py\", line 301, in main<br>\ntrain()<br>\nFile \"multi-gpu-train.py\", line 179, in train<br>\nloss,logits_op,images,labels = tower_loss(scope)<br>\nFile \"multi-gpu-train.py\", line 79, in tower_loss<br>\n_ = network2.loss(logits,images, labels)<br>\nFile \"/home/ubuntu/experiments/network2_dev/network2.py\", line 61, in loss<br>\nout = tf.nn.ctc_loss(logit, to_sparse(y), seq_len, time_major=False)<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/ctc_ops.py\", line 145, in ctc_loss<br>\nctc_merge_repeated=ctc_merge_repeated)<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_ctc_ops.py\", line 164, in _ctc_loss<br>\nname=name)<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op<br>\nop_def=op_def)<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1128, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>InvalidArgumentError (see above for traceback): Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28<br>\n[[Node: tower_0/CTCLoss = CTCLoss[ctc_merge_repeated=true, preprocess_collapse_repeated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/transpose_2/_555, tower_0/Where, tower_0/sub_2/_557, tower_0/Sum_1/_559)]]</p>", "body_text": "Hi,\nI met a runtime error during training when I tried to applied tensorflow built-in CTC loss function  (https://www.tensorflow.org/versions/r0.10/api_docs/python/nn/conectionist_temporal_classification__ctc_) to SynthText dataset. http://www.robots.ox.ac.uk/~vgg/data/scenetext/\nIt said \" Not enough time for target transition sequence (required: 4, available: 0)\".\nHere is the some info for environment: tensorflow version '0.12.0-rc0'.\nI am able to apply tensorflow built-in CTC to Synth90K Dataset with great performance (http://www.robots.ox.ac.uk/~vgg/data/text/).\nIt seems like the SynthText dataset is not compilable with tensorflow built-in CTC but Synth90K Dataset could.\nPlease find the error message as reference\nstep 980, loss = 50.17 (92.1 examples/sec; 0.695 sec/batch)\nW tensorflow/core/framework/op_kernel.cc:975] Invalid argument: Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28\nTraceback (most recent call last):\nFile \"multi-gpu-train.py\", line 305, in \ntf.app.run()\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\nsys.exit(main(sys.argv[:1] + flags_passthrough))\nFile \"multi-gpu-train.py\", line 301, in main\ntrain()\nFile \"multi-gpu-train.py\", line 270, in train\n_, loss_value = sess.run([train_op, loss])\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 766, in run\nrun_metadata_ptr)\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 964, in _run\nfeed_dict_string, options, run_metadata)\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1014, in _do_run\ntarget_list, options, run_metadata)\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1034, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28\n[[Node: tower_0/CTCLoss = CTCLoss[ctc_merge_repeated=true, preprocess_collapse_repeated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/transpose_2/_555, tower_0/Where, tower_0/sub_2/_557, tower_0/Sum_1/_559)]]\nCaused by op u'tower_0/CTCLoss', defined at:\nFile \"multi-gpu-train.py\", line 305, in \ntf.app.run()\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\nsys.exit(main(sys.argv[:1] + flags_passthrough))\nFile \"multi-gpu-train.py\", line 301, in main\ntrain()\nFile \"multi-gpu-train.py\", line 179, in train\nloss,logits_op,images,labels = tower_loss(scope)\nFile \"multi-gpu-train.py\", line 79, in tower_loss\n_ = network2.loss(logits,images, labels)\nFile \"/home/ubuntu/experiments/network2_dev/network2.py\", line 61, in loss\nout = tf.nn.ctc_loss(logit, to_sparse(y), seq_len, time_major=False)\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/ctc_ops.py\", line 145, in ctc_loss\nctc_merge_repeated=ctc_merge_repeated)\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_ctc_ops.py\", line 164, in _ctc_loss\nname=name)\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op\nop_def=op_def)\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1128, in init\nself._traceback = _extract_stack()\nInvalidArgumentError (see above for traceback): Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28\n[[Node: tower_0/CTCLoss = CTCLoss[ctc_merge_repeated=true, preprocess_collapse_repeated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/transpose_2/_555, tower_0/Where, tower_0/sub_2/_557, tower_0/Sum_1/_559)]]", "body": "Hi,\r\n\r\nI met a runtime error during training when I tried to applied **tensorflow built-in CTC** loss function  (https://www.tensorflow.org/versions/r0.10/api_docs/python/nn/conectionist_temporal_classification__ctc_) to **SynthText dataset**. http://www.robots.ox.ac.uk/~vgg/data/scenetext/ \r\nIt said \" Not enough time for target transition sequence (required: 4, available: 0)\". \r\nHere is the some info for environment: tensorflow version '0.12.0-rc0'.\r\n\r\nI am able to apply **tensorflow built-in CTC** to **Synth90K Dataset** with great performance (http://www.robots.ox.ac.uk/~vgg/data/text/). \r\n\r\nIt seems like the **SynthText dataset** is not compilable with **tensorflow built-in CTC** but **Synth90K Dataset** could. \r\n\r\nPlease find the error message as reference\r\n\r\nstep 980, loss = 50.17 (92.1 examples/sec; 0.695 sec/batch)\r\nW tensorflow/core/framework/op_kernel.cc:975] Invalid argument: Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28\r\nTraceback (most recent call last):\r\n  File \"multi-gpu-train.py\", line 305, in <module>\r\n    tf.app.run()\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"multi-gpu-train.py\", line 301, in main\r\n    train()\r\n  File \"multi-gpu-train.py\", line 270, in train\r\n    _, loss_value = sess.run([train_op, loss])\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 766, in run\r\n    run_metadata_ptr)\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 964, in _run\r\n    feed_dict_string, options, run_metadata)\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1014, in _do_run\r\n    target_list, options, run_metadata)\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1034, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28\r\n\t [[Node: tower_0/CTCLoss = CTCLoss[ctc_merge_repeated=true, preprocess_collapse_repeated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/transpose_2/_555, tower_0/Where, tower_0/sub_2/_557, tower_0/Sum_1/_559)]]\r\n\r\nCaused by op u'tower_0/CTCLoss', defined at:\r\n  File \"multi-gpu-train.py\", line 305, in <module>\r\n    tf.app.run()\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 43, in run\r\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\r\n  File \"multi-gpu-train.py\", line 301, in main\r\n    train()\r\n  File \"multi-gpu-train.py\", line 179, in train\r\n    loss,logits_op,images,labels = tower_loss(scope)\r\n  File \"multi-gpu-train.py\", line 79, in tower_loss\r\n    _ = network2.loss(logits,images, labels)\r\n  File \"/home/ubuntu/experiments/network2_dev/network2.py\", line 61, in loss\r\n    out = tf.nn.ctc_loss(logit, to_sparse(y), seq_len, time_major=False)\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/ctc_ops.py\", line 145, in ctc_loss\r\n    ctc_merge_repeated=ctc_merge_repeated)\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_ctc_ops.py\", line 164, in _ctc_loss\r\n    name=name)\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op\r\n    op_def=op_def)\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"/home/ubuntu/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\r\n    self._traceback = _extract_stack()\r\n\r\nInvalidArgumentError (see above for traceback): Not enough time for target transition sequence (required: 4, available: 0), skipping data instance in batch: 28\r\n\t [[Node: tower_0/CTCLoss = CTCLoss[ctc_merge_repeated=true, preprocess_collapse_repeated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](tower_0/transpose_2/_555, tower_0/Where, tower_0/sub_2/_557, tower_0/Sum_1/_559)]]"}
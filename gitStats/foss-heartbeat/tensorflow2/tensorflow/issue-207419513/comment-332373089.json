{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/332373089", "html_url": "https://github.com/tensorflow/tensorflow/issues/7490#issuecomment-332373089", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7490", "id": 332373089, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjM3MzA4OQ==", "user": {"login": "0x454447415244", "id": 4967138, "node_id": "MDQ6VXNlcjQ5NjcxMzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4967138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0x454447415244", "html_url": "https://github.com/0x454447415244", "followers_url": "https://api.github.com/users/0x454447415244/followers", "following_url": "https://api.github.com/users/0x454447415244/following{/other_user}", "gists_url": "https://api.github.com/users/0x454447415244/gists{/gist_id}", "starred_url": "https://api.github.com/users/0x454447415244/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0x454447415244/subscriptions", "organizations_url": "https://api.github.com/users/0x454447415244/orgs", "repos_url": "https://api.github.com/users/0x454447415244/repos", "events_url": "https://api.github.com/users/0x454447415244/events{/privacy}", "received_events_url": "https://api.github.com/users/0x454447415244/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-27T00:24:30Z", "updated_at": "2017-09-27T00:25:21Z", "author_association": "NONE", "body_html": "<p>Thanks for your reply.</p>\n<p>1- On version 1.3, I'm trying to import models exported with version 1.0.<br>\n2- I'm using the following code:</p>\n<pre><code>def loadModel(session, path):\n    saver = tf.train.Saver()\n    ckpt = tf.train.get_checkpoint_state(path)\n\n    if ckpt and ckpt.model_checkpoint_path:\n        saver.restore(session, ckpt.model_checkpoint_path)\n        print('Checkpoint restored')\n    else:\n        print('No checkpoint found')\n        exit()\n\ndef saveModel(session, filename, epoch):\n    saver = tf.train.Saver()\n    saver.save(session, filename, global_step=epoch+1)\n</code></pre>\n<p>When I try to load the model it gives an error that some keys are not found in the checkpoint.</p>\n<p>The code below does not give an error, but it does not load the weights (because I get high loss, as if I'm training my first epoch).</p>\n<pre><code>saver = tf.train.import_meta_graph('./model/' + modelName + '-' + str(startingEpoch) + '.meta')\nsaver.restore(session, tf.train.latest_checkpoint('./model'))\n</code></pre>", "body_text": "Thanks for your reply.\n1- On version 1.3, I'm trying to import models exported with version 1.0.\n2- I'm using the following code:\ndef loadModel(session, path):\n    saver = tf.train.Saver()\n    ckpt = tf.train.get_checkpoint_state(path)\n\n    if ckpt and ckpt.model_checkpoint_path:\n        saver.restore(session, ckpt.model_checkpoint_path)\n        print('Checkpoint restored')\n    else:\n        print('No checkpoint found')\n        exit()\n\ndef saveModel(session, filename, epoch):\n    saver = tf.train.Saver()\n    saver.save(session, filename, global_step=epoch+1)\n\nWhen I try to load the model it gives an error that some keys are not found in the checkpoint.\nThe code below does not give an error, but it does not load the weights (because I get high loss, as if I'm training my first epoch).\nsaver = tf.train.import_meta_graph('./model/' + modelName + '-' + str(startingEpoch) + '.meta')\nsaver.restore(session, tf.train.latest_checkpoint('./model'))", "body": "Thanks for your reply.\r\n\r\n1- On version 1.3, I'm trying to import models exported with version 1.0.\r\n2- I'm using the following code:\r\n\r\n```\r\ndef loadModel(session, path):\r\n    saver = tf.train.Saver()\r\n    ckpt = tf.train.get_checkpoint_state(path)\r\n\r\n    if ckpt and ckpt.model_checkpoint_path:\r\n        saver.restore(session, ckpt.model_checkpoint_path)\r\n        print('Checkpoint restored')\r\n    else:\r\n        print('No checkpoint found')\r\n        exit()\r\n\r\ndef saveModel(session, filename, epoch):\r\n    saver = tf.train.Saver()\r\n    saver.save(session, filename, global_step=epoch+1)\r\n```\r\nWhen I try to load the model it gives an error that some keys are not found in the checkpoint.\r\n\r\nThe code below does not give an error, but it does not load the weights (because I get high loss, as if I'm training my first epoch).\r\n```\r\nsaver = tf.train.import_meta_graph('./model/' + modelName + '-' + str(startingEpoch) + '.meta')\r\nsaver.restore(session, tf.train.latest_checkpoint('./model'))\r\n```\r\n"}
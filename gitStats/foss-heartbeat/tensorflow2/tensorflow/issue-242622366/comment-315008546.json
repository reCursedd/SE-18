{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/315008546", "html_url": "https://github.com/tensorflow/tensorflow/issues/11471#issuecomment-315008546", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11471", "id": 315008546, "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTAwODU0Ng==", "user": {"login": "Randl", "id": 3028543, "node_id": "MDQ6VXNlcjMwMjg1NDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/3028543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Randl", "html_url": "https://github.com/Randl", "followers_url": "https://api.github.com/users/Randl/followers", "following_url": "https://api.github.com/users/Randl/following{/other_user}", "gists_url": "https://api.github.com/users/Randl/gists{/gist_id}", "starred_url": "https://api.github.com/users/Randl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Randl/subscriptions", "organizations_url": "https://api.github.com/users/Randl/orgs", "repos_url": "https://api.github.com/users/Randl/repos", "events_url": "https://api.github.com/users/Randl/events{/privacy}", "received_events_url": "https://api.github.com/users/Randl/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-13T08:26:16Z", "updated_at": "2017-07-13T08:26:33Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I assumed the problem might be with memory, but for smaller batches I get the same error:</p>\n<pre><code>LLVM ERROR: Cannot select: 0x7fe90c0d4608: i16,ch = AtomicCmpSwap&lt;Volatile LDST1[%_fusion.typed16(addrspace=1)]&gt; 0x7fe90c07f388, 0x7fe90c0d4e28, 0x7fe90c0d4ef8, 0x7fe90c0e6fe0\n  0x7fe90c0d4e28: i64,ch = CopyFromReg 0x7fe90c07f388, Register:i64 %vreg0\n    0x7fe90c0d4e90: i64 = Register %vreg0\n  0x7fe90c0d4ef8: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg3\n    0x7fe90c0d5440: i16 = Register %vreg3\n  0x7fe90c0e6fe0: i16 = and 0x7fe90c0d4ef8, 0x7fe90c0d5100\n    0x7fe90c0d4ef8: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg3\n      0x7fe90c0d5440: i16 = Register %vreg3\n    0x7fe90c0d5100: i16 = AssertZext 0x7fe90c0d49b0, ValueType:ch:i1\n      0x7fe90c0d49b0: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg1\n        0x7fe90c0d46d8: i16 = Register %vreg1\nIn function: _fusion__1\n</code></pre>\n<p>Second part (with <code>free()</code>) desn't appear each time, I don't know what it depends on</p>", "body_text": "I assumed the problem might be with memory, but for smaller batches I get the same error:\nLLVM ERROR: Cannot select: 0x7fe90c0d4608: i16,ch = AtomicCmpSwap<Volatile LDST1[%_fusion.typed16(addrspace=1)]> 0x7fe90c07f388, 0x7fe90c0d4e28, 0x7fe90c0d4ef8, 0x7fe90c0e6fe0\n  0x7fe90c0d4e28: i64,ch = CopyFromReg 0x7fe90c07f388, Register:i64 %vreg0\n    0x7fe90c0d4e90: i64 = Register %vreg0\n  0x7fe90c0d4ef8: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg3\n    0x7fe90c0d5440: i16 = Register %vreg3\n  0x7fe90c0e6fe0: i16 = and 0x7fe90c0d4ef8, 0x7fe90c0d5100\n    0x7fe90c0d4ef8: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg3\n      0x7fe90c0d5440: i16 = Register %vreg3\n    0x7fe90c0d5100: i16 = AssertZext 0x7fe90c0d49b0, ValueType:ch:i1\n      0x7fe90c0d49b0: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg1\n        0x7fe90c0d46d8: i16 = Register %vreg1\nIn function: _fusion__1\n\nSecond part (with free()) desn't appear each time, I don't know what it depends on", "body": "I assumed the problem might be with memory, but for smaller batches I get the same error:\r\n```\r\nLLVM ERROR: Cannot select: 0x7fe90c0d4608: i16,ch = AtomicCmpSwap<Volatile LDST1[%_fusion.typed16(addrspace=1)]> 0x7fe90c07f388, 0x7fe90c0d4e28, 0x7fe90c0d4ef8, 0x7fe90c0e6fe0\r\n  0x7fe90c0d4e28: i64,ch = CopyFromReg 0x7fe90c07f388, Register:i64 %vreg0\r\n    0x7fe90c0d4e90: i64 = Register %vreg0\r\n  0x7fe90c0d4ef8: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg3\r\n    0x7fe90c0d5440: i16 = Register %vreg3\r\n  0x7fe90c0e6fe0: i16 = and 0x7fe90c0d4ef8, 0x7fe90c0d5100\r\n    0x7fe90c0d4ef8: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg3\r\n      0x7fe90c0d5440: i16 = Register %vreg3\r\n    0x7fe90c0d5100: i16 = AssertZext 0x7fe90c0d49b0, ValueType:ch:i1\r\n      0x7fe90c0d49b0: i16,ch = CopyFromReg 0x7fe90c07f388, Register:i16 %vreg1\r\n        0x7fe90c0d46d8: i16 = Register %vreg1\r\nIn function: _fusion__1\r\n```\r\nSecond part (with `free()`) desn't appear each time, I don't know what it depends on"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3898", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3898/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3898/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3898/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3898", "id": 171859734, "node_id": "MDU6SXNzdWUxNzE4NTk3MzQ=", "number": 3898, "title": "Inception model error on upgrading Tensorflow", "user": {"login": "eldor4do", "id": 5240449, "node_id": "MDQ6VXNlcjUyNDA0NDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5240449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eldor4do", "html_url": "https://github.com/eldor4do", "followers_url": "https://api.github.com/users/eldor4do/followers", "following_url": "https://api.github.com/users/eldor4do/following{/other_user}", "gists_url": "https://api.github.com/users/eldor4do/gists{/gist_id}", "starred_url": "https://api.github.com/users/eldor4do/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eldor4do/subscriptions", "organizations_url": "https://api.github.com/users/eldor4do/orgs", "repos_url": "https://api.github.com/users/eldor4do/repos", "events_url": "https://api.github.com/users/eldor4do/events{/privacy}", "received_events_url": "https://api.github.com/users/eldor4do/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-08-18T09:41:28Z", "updated_at": "2016-08-18T14:18:53Z", "closed_at": "2016-08-18T14:18:53Z", "author_association": "NONE", "body_html": "<p>I am loading the Inception model as,</p>\n<pre><code>def load_network(png=False):\n        with gfile.FastGFile(CONFIG_PATH + '/data/network.pb', 'rb') as f:\n            graph_def = tf.GraphDef()\n            data = f.read()\n            graph_def.ParseFromString(data)\n            if png:\n                png_data = tf.placeholder(tf.string, shape=[])\n                decoded_png = tf.image.decode_png(png_data, channels=3)\n                _ = tf.import_graph_def(graph_def, name='', input_map={'DecodeJpeg': decoded_png})\n                return png_data\n            else:\n                _ = tf.import_graph_def(graph_def, name='')\n</code></pre>\n<p>However, after upgrading from Tensorflow 0.8 to 0.10, this is giving an error,</p>\n<pre><code>  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 241, in import_graph_def\n    raise ValueError('tf.import_graph_def() requires a non-empty `name` '\nValueError: tf.import_graph_def() requires a non-empty `name` if `input_map` is used.\n</code></pre>\n<p>I then removed the <code>name=''</code> part as,</p>\n<pre><code>                _ = tf.import_graph_def(graph_def, input_map={'DecodeJpeg': decoded_png})\n                return png_data\n            else:\n                _ = tf.import_graph_def(graph_def)\n\n</code></pre>\n<p>This part then runs fine, however later on in my code when I am trying to get the pool3 layer's output I get the following error,</p>\n<pre><code>    pool3 = sess.graph.get_tensor_by_name('pool_3:0')\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2531, in get_tensor_by_name\n    return self.as_graph_element(name, allow_tensor=True, allow_operation=False)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2385, in as_graph_element\n    return self._as_graph_element_locked(obj, allow_tensor, allow_operation)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2427, in _as_graph_element_locked\n    \"graph.\" % (repr(name), repr(op_name)))\nKeyError: \"The name 'pool_3:0' refers to a Tensor which does not exist. The operation, 'pool_3', does not exist in the graph.\"\n</code></pre>\n<p>What could be the problem?</p>", "body_text": "I am loading the Inception model as,\ndef load_network(png=False):\n        with gfile.FastGFile(CONFIG_PATH + '/data/network.pb', 'rb') as f:\n            graph_def = tf.GraphDef()\n            data = f.read()\n            graph_def.ParseFromString(data)\n            if png:\n                png_data = tf.placeholder(tf.string, shape=[])\n                decoded_png = tf.image.decode_png(png_data, channels=3)\n                _ = tf.import_graph_def(graph_def, name='', input_map={'DecodeJpeg': decoded_png})\n                return png_data\n            else:\n                _ = tf.import_graph_def(graph_def, name='')\n\nHowever, after upgrading from Tensorflow 0.8 to 0.10, this is giving an error,\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 241, in import_graph_def\n    raise ValueError('tf.import_graph_def() requires a non-empty `name` '\nValueError: tf.import_graph_def() requires a non-empty `name` if `input_map` is used.\n\nI then removed the name='' part as,\n                _ = tf.import_graph_def(graph_def, input_map={'DecodeJpeg': decoded_png})\n                return png_data\n            else:\n                _ = tf.import_graph_def(graph_def)\n\n\nThis part then runs fine, however later on in my code when I am trying to get the pool3 layer's output I get the following error,\n    pool3 = sess.graph.get_tensor_by_name('pool_3:0')\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2531, in get_tensor_by_name\n    return self.as_graph_element(name, allow_tensor=True, allow_operation=False)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2385, in as_graph_element\n    return self._as_graph_element_locked(obj, allow_tensor, allow_operation)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2427, in _as_graph_element_locked\n    \"graph.\" % (repr(name), repr(op_name)))\nKeyError: \"The name 'pool_3:0' refers to a Tensor which does not exist. The operation, 'pool_3', does not exist in the graph.\"\n\nWhat could be the problem?", "body": "I am loading the Inception model as,\n\n```\ndef load_network(png=False):\n        with gfile.FastGFile(CONFIG_PATH + '/data/network.pb', 'rb') as f:\n            graph_def = tf.GraphDef()\n            data = f.read()\n            graph_def.ParseFromString(data)\n            if png:\n                png_data = tf.placeholder(tf.string, shape=[])\n                decoded_png = tf.image.decode_png(png_data, channels=3)\n                _ = tf.import_graph_def(graph_def, name='', input_map={'DecodeJpeg': decoded_png})\n                return png_data\n            else:\n                _ = tf.import_graph_def(graph_def, name='')\n```\n\nHowever, after upgrading from Tensorflow 0.8 to 0.10, this is giving an error,\n\n```\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 241, in import_graph_def\n    raise ValueError('tf.import_graph_def() requires a non-empty `name` '\nValueError: tf.import_graph_def() requires a non-empty `name` if `input_map` is used.\n```\n\nI then removed the `name=''` part as,\n\n```\n                _ = tf.import_graph_def(graph_def, input_map={'DecodeJpeg': decoded_png})\n                return png_data\n            else:\n                _ = tf.import_graph_def(graph_def)\n\n```\n\nThis part then runs fine, however later on in my code when I am trying to get the pool3 layer's output I get the following error,\n\n```\n    pool3 = sess.graph.get_tensor_by_name('pool_3:0')\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2531, in get_tensor_by_name\n    return self.as_graph_element(name, allow_tensor=True, allow_operation=False)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2385, in as_graph_element\n    return self._as_graph_element_locked(obj, allow_tensor, allow_operation)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2427, in _as_graph_element_locked\n    \"graph.\" % (repr(name), repr(op_name)))\nKeyError: \"The name 'pool_3:0' refers to a Tensor which does not exist. The operation, 'pool_3', does not exist in the graph.\"\n```\n\nWhat could be the problem?\n"}
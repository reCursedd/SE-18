{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17110", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17110/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17110/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17110/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/17110", "id": 298095693, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5ODM2Njk3", "number": 17110, "title": "Add NumPy style warning when casting complex to float", "user": {"login": "carlthome", "id": 1595907, "node_id": "MDQ6VXNlcjE1OTU5MDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1595907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlthome", "html_url": "https://github.com/carlthome", "followers_url": "https://api.github.com/users/carlthome/followers", "following_url": "https://api.github.com/users/carlthome/following{/other_user}", "gists_url": "https://api.github.com/users/carlthome/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlthome/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlthome/subscriptions", "organizations_url": "https://api.github.com/users/carlthome/orgs", "repos_url": "https://api.github.com/users/carlthome/repos", "events_url": "https://api.github.com/users/carlthome/events{/privacy}", "received_events_url": "https://api.github.com/users/carlthome/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-02-18T16:02:33Z", "updated_at": "2018-03-23T12:21:34Z", "closed_at": "2018-03-22T17:33:45Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17110", "html_url": "https://github.com/tensorflow/tensorflow/pull/17110", "diff_url": "https://github.com/tensorflow/tensorflow/pull/17110.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/17110.patch"}, "body_html": "<p>This is a real numeric gotcha, IMO.</p>\n<p>I just used <code>tf.losses.mean_squared_error</code> with complex tensors and was pleasantly surprised when everything ran smoothly. However, it turns out that the function calls <code>tf.to_float</code> on its input tensors, which will just remove the imaginary part and cast the real part to float. I should preferably have been warned about this (like in NumPy) instead of reading through the implementation.</p>\n<p>Alternatively (and perhaps even better), <code>tf.losses</code> should sum up the loss for both the real and imaginary components but that seems like a bigger change.</p>", "body_text": "This is a real numeric gotcha, IMO.\nI just used tf.losses.mean_squared_error with complex tensors and was pleasantly surprised when everything ran smoothly. However, it turns out that the function calls tf.to_float on its input tensors, which will just remove the imaginary part and cast the real part to float. I should preferably have been warned about this (like in NumPy) instead of reading through the implementation.\nAlternatively (and perhaps even better), tf.losses should sum up the loss for both the real and imaginary components but that seems like a bigger change.", "body": "This is a real numeric gotcha, IMO.\r\n\r\nI just used `tf.losses.mean_squared_error` with complex tensors and was pleasantly surprised when everything ran smoothly. However, it turns out that the function calls `tf.to_float` on its input tensors, which will just remove the imaginary part and cast the real part to float. I should preferably have been warned about this (like in NumPy) instead of reading through the implementation.\r\n\r\nAlternatively (and perhaps even better), `tf.losses` should sum up the loss for both the real and imaginary components but that seems like a bigger change. "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/106750536", "pull_request_review_id": 27693774, "id": 106750536, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNjc1MDUzNg==", "diff_hunk": "@@ -275,6 +275,33 @@ inline void GetStridesFromSizes(TensorFormat data_format, size_t* strides,\n   }\n }\n \n+static void MklSizesToTFSizes(OpKernelContext *context, TensorFormat data_format_, const MklShape& mklshape,\n+                           TensorShape *tfshape) {\n+  size_t  tf_dim   = mklshape.GetDimension();\n+  const size_t* tf_sizes = mklshape.GetSizes();\n+\n+  // TODO: check if this constraint is applicable in other cases (besides BackpropInput,\n+  // BackpropFilter).\n+  OP_REQUIRES(context, tf_dim == 4,\n+\t\t\t\terrors::InvalidArgument(\n+\t\t\t\t\"MKLSizesToTFSizes: size must be 4-dim\"));\n+  std::vector<int32> sizes;\n+\n+  sizes.push_back(tf_sizes[3]);\n+\n+  if (data_format_ == FORMAT_NHWC) {\n+\t  sizes.push_back(tf_sizes[1]);\n+\t  sizes.push_back(tf_sizes[0]);\n+\t  sizes.push_back(tf_sizes[2]);\n+  } else {\n+\t\tsizes.push_back(tf_sizes[2]);\n+\t\tsizes.push_back(tf_sizes[1]);", "path": "tensorflow/core/util/mkl_util.h", "position": null, "original_position": 24, "commit_id": "3c2192fc868ddc99a3f39fec14a497c156499b88", "original_commit_id": "d7c6d240ece8313bda0a1b3bf50925aafe6470b8", "user": {"login": "andydavis1", "id": 15696327, "node_id": "MDQ6VXNlcjE1Njk2MzI3", "avatar_url": "https://avatars0.githubusercontent.com/u/15696327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andydavis1", "html_url": "https://github.com/andydavis1", "followers_url": "https://api.github.com/users/andydavis1/followers", "following_url": "https://api.github.com/users/andydavis1/following{/other_user}", "gists_url": "https://api.github.com/users/andydavis1/gists{/gist_id}", "starred_url": "https://api.github.com/users/andydavis1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andydavis1/subscriptions", "organizations_url": "https://api.github.com/users/andydavis1/orgs", "repos_url": "https://api.github.com/users/andydavis1/repos", "events_url": "https://api.github.com/users/andydavis1/events{/privacy}", "received_events_url": "https://api.github.com/users/andydavis1/received_events", "type": "User", "site_admin": false}, "body": "fix line spacing.", "created_at": "2017-03-17T21:37:12Z", "updated_at": "2017-03-22T22:13:18Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/8184#discussion_r106750536", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/8184", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/106750536"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/8184#discussion_r106750536"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/8184"}}, "body_html": "<p>fix line spacing.</p>", "body_text": "fix line spacing."}
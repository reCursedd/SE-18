{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2909", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2909/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2909/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2909/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2909", "id": 160710854, "node_id": "MDU6SXNzdWUxNjA3MTA4NTQ=", "number": 2909, "title": "Failure to build from source with GPU support on macOS", "user": {"login": "dansbecker", "id": 1390442, "node_id": "MDQ6VXNlcjEzOTA0NDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1390442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dansbecker", "html_url": "https://github.com/dansbecker", "followers_url": "https://api.github.com/users/dansbecker/followers", "following_url": "https://api.github.com/users/dansbecker/following{/other_user}", "gists_url": "https://api.github.com/users/dansbecker/gists{/gist_id}", "starred_url": "https://api.github.com/users/dansbecker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dansbecker/subscriptions", "organizations_url": "https://api.github.com/users/dansbecker/orgs", "repos_url": "https://api.github.com/users/dansbecker/repos", "events_url": "https://api.github.com/users/dansbecker/events{/privacy}", "received_events_url": "https://api.github.com/users/dansbecker/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-06-16T17:00:14Z", "updated_at": "2017-07-08T17:39:42Z", "closed_at": "2016-06-17T04:11:28Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I am trying to follow the installation instructions for Mac with GPU support.  I have CUDA 7.5 and cuDNN installed (and Theano currently works with GPU support on this system).</p>\n<p>The contents of my /usr/local/cuda/lib include the following:</p>\n<pre><code>(py35)Dans-iMac:tensorflow dan$ ls -l /usr/local/cuda/lib/libcud*\n-rwxr-xr-x  1 root  wheel  8280 Apr 13 00:02 /usr/local/cuda/lib/libcuda.dylib\nlrwxr-xr-x  1 root  wheel    45 Apr 13 00:03 /usr/local/cuda/lib/libcudadevrt.a -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\nlrwxr-xr-x  1 root  wheel    50 Apr 13 00:03 /usr/local/cuda/lib/libcudart.7.5.dylib -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\nlrwxr-xr-x  1 root  wheel    46 Apr 13 00:03 /usr/local/cuda/lib/libcudart.dylib -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\nlrwxr-xr-x  1 root  wheel    49 Apr 13 00:03 /usr/local/cuda/lib/libcudart_static.a -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\n</code></pre>\n<p>My configure step doesn't provide any errors, as shown in the following:</p>\n<pre><code>(py35)Dans-iMac:tensorflow dan$ ./configure\nPlease specify the location of python. [Default is /Users/dan/anaconda/envs/py35/bin/python]:\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc nvcc should use as the host compiler. [Default is /usr/bin/gcc]:\nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.5\nPlease specify the location where CUDA 7.5 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify the Cudnn version you want to use. [Leave empty to use system default]:\nPlease specify the location where cuDNN  library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 3.0\nSetting up Cuda include\nSetting up Cuda lib\nSetting up Cuda bin\nSetting up Cuda nvvm\nSetting up CUPTI include\nSetting up CUPTI lib64\nConfiguration finished\n</code></pre>\n<p>However the first bazel build step results in the following error:</p>\n<pre><code>(py35)Dans-iMac:tensorflow dan$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nERROR: /Users/dan/tensorflow/tensorflow/contrib/session_bundle/BUILD:160:1: //tensorflow/contrib/session_bundle:manifest_proto_py: no such attribute 'imports' in 'py_library' rule.\nERROR: /Users/dan/tensorflow/tensorflow/tools/pip_package/BUILD:23:1: Target '//tensorflow/contrib/session_bundle:all_files' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:build_pip_package'.\nERROR: Loading failed; build aborted.\nINFO: Elapsed time: 0.092s\n</code></pre>\n<p>I tried looking at build files, but don't know bazel well enough to independently trace this further back.</p>\n<p>All of this is using commit <code>19bda20635c91060996fe44fe201875b3b9ae7a2</code></p>", "body_text": "I am trying to follow the installation instructions for Mac with GPU support.  I have CUDA 7.5 and cuDNN installed (and Theano currently works with GPU support on this system).\nThe contents of my /usr/local/cuda/lib include the following:\n(py35)Dans-iMac:tensorflow dan$ ls -l /usr/local/cuda/lib/libcud*\n-rwxr-xr-x  1 root  wheel  8280 Apr 13 00:02 /usr/local/cuda/lib/libcuda.dylib\nlrwxr-xr-x  1 root  wheel    45 Apr 13 00:03 /usr/local/cuda/lib/libcudadevrt.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\nlrwxr-xr-x  1 root  wheel    50 Apr 13 00:03 /usr/local/cuda/lib/libcudart.7.5.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\nlrwxr-xr-x  1 root  wheel    46 Apr 13 00:03 /usr/local/cuda/lib/libcudart.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\nlrwxr-xr-x  1 root  wheel    49 Apr 13 00:03 /usr/local/cuda/lib/libcudart_static.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\n\nMy configure step doesn't provide any errors, as shown in the following:\n(py35)Dans-iMac:tensorflow dan$ ./configure\nPlease specify the location of python. [Default is /Users/dan/anaconda/envs/py35/bin/python]:\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc nvcc should use as the host compiler. [Default is /usr/bin/gcc]:\nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.5\nPlease specify the location where CUDA 7.5 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify the Cudnn version you want to use. [Leave empty to use system default]:\nPlease specify the location where cuDNN  library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 3.0\nSetting up Cuda include\nSetting up Cuda lib\nSetting up Cuda bin\nSetting up Cuda nvvm\nSetting up CUPTI include\nSetting up CUPTI lib64\nConfiguration finished\n\nHowever the first bazel build step results in the following error:\n(py35)Dans-iMac:tensorflow dan$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nERROR: /Users/dan/tensorflow/tensorflow/contrib/session_bundle/BUILD:160:1: //tensorflow/contrib/session_bundle:manifest_proto_py: no such attribute 'imports' in 'py_library' rule.\nERROR: /Users/dan/tensorflow/tensorflow/tools/pip_package/BUILD:23:1: Target '//tensorflow/contrib/session_bundle:all_files' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:build_pip_package'.\nERROR: Loading failed; build aborted.\nINFO: Elapsed time: 0.092s\n\nI tried looking at build files, but don't know bazel well enough to independently trace this further back.\nAll of this is using commit 19bda20635c91060996fe44fe201875b3b9ae7a2", "body": "I am trying to follow the installation instructions for Mac with GPU support.  I have CUDA 7.5 and cuDNN installed (and Theano currently works with GPU support on this system).\n\nThe contents of my /usr/local/cuda/lib include the following:\n\n```\n(py35)Dans-iMac:tensorflow dan$ ls -l /usr/local/cuda/lib/libcud*\n-rwxr-xr-x  1 root  wheel  8280 Apr 13 00:02 /usr/local/cuda/lib/libcuda.dylib\nlrwxr-xr-x  1 root  wheel    45 Apr 13 00:03 /usr/local/cuda/lib/libcudadevrt.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\nlrwxr-xr-x  1 root  wheel    50 Apr 13 00:03 /usr/local/cuda/lib/libcudart.7.5.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\nlrwxr-xr-x  1 root  wheel    46 Apr 13 00:03 /usr/local/cuda/lib/libcudart.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\nlrwxr-xr-x  1 root  wheel    49 Apr 13 00:03 /usr/local/cuda/lib/libcudart_static.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\n```\n\nMy configure step doesn't provide any errors, as shown in the following:\n\n```\n(py35)Dans-iMac:tensorflow dan$ ./configure\nPlease specify the location of python. [Default is /Users/dan/anaconda/envs/py35/bin/python]:\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with GPU support? [y/N] y\nGPU support will be enabled for TensorFlow\nPlease specify which gcc nvcc should use as the host compiler. [Default is /usr/bin/gcc]:\nPlease specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: 7.5\nPlease specify the location where CUDA 7.5 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify the Cudnn version you want to use. [Leave empty to use system default]:\nPlease specify the location where cuDNN  library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 3.0\nSetting up Cuda include\nSetting up Cuda lib\nSetting up Cuda bin\nSetting up Cuda nvvm\nSetting up CUPTI include\nSetting up CUPTI lib64\nConfiguration finished\n```\n\nHowever the first bazel build step results in the following error:\n\n```\n(py35)Dans-iMac:tensorflow dan$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\nERROR: /Users/dan/tensorflow/tensorflow/contrib/session_bundle/BUILD:160:1: //tensorflow/contrib/session_bundle:manifest_proto_py: no such attribute 'imports' in 'py_library' rule.\nERROR: /Users/dan/tensorflow/tensorflow/tools/pip_package/BUILD:23:1: Target '//tensorflow/contrib/session_bundle:all_files' contains an error and its package is in error and referenced by '//tensorflow/tools/pip_package:build_pip_package'.\nERROR: Loading failed; build aborted.\nINFO: Elapsed time: 0.092s\n```\n\nI tried looking at build files, but don't know bazel well enough to independently trace this further back.\n\nAll of this is using commit `19bda20635c91060996fe44fe201875b3b9ae7a2`\n"}
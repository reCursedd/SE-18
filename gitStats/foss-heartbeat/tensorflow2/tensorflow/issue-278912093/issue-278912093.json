{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15089", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15089/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15089/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15089/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15089", "id": 278912093, "node_id": "MDU6SXNzdWUyNzg5MTIwOTM=", "number": 15089, "title": "Error when run label_image --graph=/tmp/quantized_graph.pb after quantized model ", "user": {"login": "boshanyiqiao", "id": 34022957, "node_id": "MDQ6VXNlcjM0MDIyOTU3", "avatar_url": "https://avatars1.githubusercontent.com/u/34022957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boshanyiqiao", "html_url": "https://github.com/boshanyiqiao", "followers_url": "https://api.github.com/users/boshanyiqiao/followers", "following_url": "https://api.github.com/users/boshanyiqiao/following{/other_user}", "gists_url": "https://api.github.com/users/boshanyiqiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/boshanyiqiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boshanyiqiao/subscriptions", "organizations_url": "https://api.github.com/users/boshanyiqiao/orgs", "repos_url": "https://api.github.com/users/boshanyiqiao/repos", "events_url": "https://api.github.com/users/boshanyiqiao/events{/privacy}", "received_events_url": "https://api.github.com/users/boshanyiqiao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-12-04T08:35:51Z", "updated_at": "2018-01-04T06:41:09Z", "closed_at": "2018-01-04T06:41:09Z", "author_association": "NONE", "body_html": "<p>tensorflow:1.4.0<br>\nI followed the command line from tensorflow/tensorflow/docs_src/performance/quantization.md<br>\nran the following command is ok and  produce a new model quantized_graph.pb:<br>\nbazel build tensorflow/tools/graph_transforms:transform_graph<br>\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph <br>\n--in_graph=tensorflow/examples/label_image/data/inception_v3_2016_08_28_frozen.pb <br>\n--out_graph=/tmp/quantized_graph.pb <br>\n--inputs=input <br>\n--outputs=InceptionV3/Predictions/Reshape_1 <br>\n--transforms='add_default_attributes strip_unused_nodes(type=float, shape=\"1,299,299,3\")<br>\nremove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true)<br>\nfold_batch_norms fold_old_batch_norms quantize_weights quantize_nodes<br>\nstrip_unused_nodes sort_by_execution_order'</p>\n<p>But there is a problem when  I was running with command:<br>\nbazel build tensorflow/examples/label_image:label_image<br>\nbazel-bin/tensorflow/examples/label_image/label_image <br>\n--graph=/tmp/quantized_graph.pb    (Else: it worked if I replace quantized_graph.pb with inception_v3_2016_08_28_frozen.pb here.)<br>\nThe error info is:<br>\n2017-12-04 08:27:02.891427: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op:    \"DenseToSparseBatchDataset\" device_type: \"CPU\"') for unknown op: DenseToSparseBatchDataset<br>\n2017-12-04 08:27:02.891520: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"GroupByWindowDataset\" device_type: \"CPU\"') for unknown op: GroupByWindowDataset<br>\n2017-12-04 08:27:02.891562: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"IgnoreErrorsDataset\" device_type: \"CPU\"') for unknown op: IgnoreErrorsDataset<br>\n2017-12-04 08:27:02.891636: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DatasetToSingleElement\" device_type: \"CPU\"') for unknown op: DatasetToSingleElement<br>\n2017-12-04 08:27:02.891686: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"SerializeIterator\" device_type: \"CPU\"') for unknown op: SerializeIterator<br>\n2017-12-04 08:27:02.891712: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DeserializeIterator\" device_type: \"CPU\"') for unknown op: DeserializeIterator<br>\n2017-12-04 08:27:02.891733: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"MapAndBatchDataset\" device_type: \"CPU\"') for unknown op: MapAndBatchDataset<br>\n2017-12-04 08:27:02.891777: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"ParallelInterleaveDataset\" device_type: \"CPU\"') for unknown op: ParallelInterleaveDataset<br>\n2017-12-04 08:27:02.891805: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"ScanDataset\" device_type: \"CPU\"') for unknown op: ScanDataset<br>\n2017-12-04 08:27:02.891825: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"SqlDataset\" device_type: \"CPU\"') for unknown op: SqlDataset<br>\n2017-12-04 08:27:02.901109: E tensorflow/examples/label_image/main.cc:327] Invalid argument: Node 'InceptionV3/InceptionV3/Conv2d_1a_3x3/BatchNorm/batchnorm/mul_eightbit/input__port__0/reduction_dims': Unknown input node '^input:0'<br>\nhow should I fix it?</p>", "body_text": "tensorflow:1.4.0\nI followed the command line from tensorflow/tensorflow/docs_src/performance/quantization.md\nran the following command is ok and  produce a new model quantized_graph.pb:\nbazel build tensorflow/tools/graph_transforms:transform_graph\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \n--in_graph=tensorflow/examples/label_image/data/inception_v3_2016_08_28_frozen.pb \n--out_graph=/tmp/quantized_graph.pb \n--inputs=input \n--outputs=InceptionV3/Predictions/Reshape_1 \n--transforms='add_default_attributes strip_unused_nodes(type=float, shape=\"1,299,299,3\")\nremove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true)\nfold_batch_norms fold_old_batch_norms quantize_weights quantize_nodes\nstrip_unused_nodes sort_by_execution_order'\nBut there is a problem when  I was running with command:\nbazel build tensorflow/examples/label_image:label_image\nbazel-bin/tensorflow/examples/label_image/label_image \n--graph=/tmp/quantized_graph.pb    (Else: it worked if I replace quantized_graph.pb with inception_v3_2016_08_28_frozen.pb here.)\nThe error info is:\n2017-12-04 08:27:02.891427: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op:    \"DenseToSparseBatchDataset\" device_type: \"CPU\"') for unknown op: DenseToSparseBatchDataset\n2017-12-04 08:27:02.891520: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"GroupByWindowDataset\" device_type: \"CPU\"') for unknown op: GroupByWindowDataset\n2017-12-04 08:27:02.891562: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"IgnoreErrorsDataset\" device_type: \"CPU\"') for unknown op: IgnoreErrorsDataset\n2017-12-04 08:27:02.891636: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DatasetToSingleElement\" device_type: \"CPU\"') for unknown op: DatasetToSingleElement\n2017-12-04 08:27:02.891686: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"SerializeIterator\" device_type: \"CPU\"') for unknown op: SerializeIterator\n2017-12-04 08:27:02.891712: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DeserializeIterator\" device_type: \"CPU\"') for unknown op: DeserializeIterator\n2017-12-04 08:27:02.891733: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"MapAndBatchDataset\" device_type: \"CPU\"') for unknown op: MapAndBatchDataset\n2017-12-04 08:27:02.891777: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"ParallelInterleaveDataset\" device_type: \"CPU\"') for unknown op: ParallelInterleaveDataset\n2017-12-04 08:27:02.891805: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"ScanDataset\" device_type: \"CPU\"') for unknown op: ScanDataset\n2017-12-04 08:27:02.891825: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"SqlDataset\" device_type: \"CPU\"') for unknown op: SqlDataset\n2017-12-04 08:27:02.901109: E tensorflow/examples/label_image/main.cc:327] Invalid argument: Node 'InceptionV3/InceptionV3/Conv2d_1a_3x3/BatchNorm/batchnorm/mul_eightbit/input__port__0/reduction_dims': Unknown input node '^input:0'\nhow should I fix it?", "body": "tensorflow:1.4.0\r\nI followed the command line from tensorflow/tensorflow/docs_src/performance/quantization.md \r\nran the following command is ok and  produce a new model quantized_graph.pb:\r\n  bazel build tensorflow/tools/graph_transforms:transform_graph\r\n  bazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\r\n  --in_graph=tensorflow/examples/label_image/data/inception_v3_2016_08_28_frozen.pb \\\r\n  --out_graph=/tmp/quantized_graph.pb \\\r\n  --inputs=input \\\r\n  --outputs=InceptionV3/Predictions/Reshape_1 \\\r\n  --transforms='add_default_attributes strip_unused_nodes(type=float, shape=\"1,299,299,3\")\r\n    remove_nodes(op=Identity, op=CheckNumerics) fold_constants(ignore_errors=true)\r\n    fold_batch_norms fold_old_batch_norms quantize_weights quantize_nodes\r\n    strip_unused_nodes sort_by_execution_order'\r\n\r\nBut there is a problem when  I was running with command:\r\n  bazel build tensorflow/examples/label_image:label_image\r\n  bazel-bin/tensorflow/examples/label_image/label_image \\\r\n  --graph=/tmp/quantized_graph.pb    (Else: it worked if I replace quantized_graph.pb with inception_v3_2016_08_28_frozen.pb here.)\r\nThe error info is:\r\n  2017-12-04 08:27:02.891427: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op:    \"DenseToSparseBatchDataset\" device_type: \"CPU\"') for unknown op: DenseToSparseBatchDataset\r\n2017-12-04 08:27:02.891520: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"GroupByWindowDataset\" device_type: \"CPU\"') for unknown op: GroupByWindowDataset\r\n2017-12-04 08:27:02.891562: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"IgnoreErrorsDataset\" device_type: \"CPU\"') for unknown op: IgnoreErrorsDataset\r\n2017-12-04 08:27:02.891636: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DatasetToSingleElement\" device_type: \"CPU\"') for unknown op: DatasetToSingleElement\r\n2017-12-04 08:27:02.891686: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"SerializeIterator\" device_type: \"CPU\"') for unknown op: SerializeIterator\r\n2017-12-04 08:27:02.891712: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DeserializeIterator\" device_type: \"CPU\"') for unknown op: DeserializeIterator\r\n2017-12-04 08:27:02.891733: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"MapAndBatchDataset\" device_type: \"CPU\"') for unknown op: MapAndBatchDataset\r\n2017-12-04 08:27:02.891777: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"ParallelInterleaveDataset\" device_type: \"CPU\"') for unknown op: ParallelInterleaveDataset\r\n2017-12-04 08:27:02.891805: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"ScanDataset\" device_type: \"CPU\"') for unknown op: ScanDataset\r\n2017-12-04 08:27:02.891825: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"SqlDataset\" device_type: \"CPU\"') for unknown op: SqlDataset\r\n2017-12-04 08:27:02.901109: E tensorflow/examples/label_image/main.cc:327] Invalid argument: Node 'InceptionV3/InceptionV3/Conv2d_1a_3x3/BatchNorm/batchnorm/mul_eightbit/input__port__0/reduction_dims': Unknown input node '^input:0'\r\nhow should I fix it?\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9691", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9691/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9691/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9691/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9691", "id": 226622412, "node_id": "MDU6SXNzdWUyMjY2MjI0MTI=", "number": 9691, "title": "hexagon_graph_execution runs for only one test and gets stuck there. Cannot execute until restart of target.", "user": {"login": "kzos", "id": 5010954, "node_id": "MDQ6VXNlcjUwMTA5NTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5010954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kzos", "html_url": "https://github.com/kzos", "followers_url": "https://api.github.com/users/kzos/followers", "following_url": "https://api.github.com/users/kzos/following{/other_user}", "gists_url": "https://api.github.com/users/kzos/gists{/gist_id}", "starred_url": "https://api.github.com/users/kzos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kzos/subscriptions", "organizations_url": "https://api.github.com/users/kzos/orgs", "repos_url": "https://api.github.com/users/kzos/repos", "events_url": "https://api.github.com/users/kzos/events{/privacy}", "received_events_url": "https://api.github.com/users/kzos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-05-05T16:16:52Z", "updated_at": "2017-06-27T23:48:38Z", "closed_at": "2017-05-06T18:52:53Z", "author_association": "NONE", "body_html": "<p>OS: Ubuntu 16.04 64bits<br>\nAndroid Version: 7.1 (Nougat)<br>\nNDK Version: android-ndk-10b<br>\nHEXAGON SDK: 3.1<br>\nnnlib source: <a href=\"https://source.codeaurora.org/quic/hexagon_nn/nnlib\" rel=\"nofollow\">https://source.codeaurora.org/quic/hexagon_nn/nnlib</a></p>\n<pre><code>$ adb shell 'LD_LIBRARY_PATH=/data/hex_tf:$LD_LIBRARY_PATH' /data/hex_tf/hexagon_graph_execution\n WARNING: linker: Warning: unable to normalize \"\"\n Running main() from test_main.cc\n [==========] Running 1 test from 1 test case.\n [----------] Global test environment set-up.\n [----------] 1 test from GraphTransferer\n [ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\n native : hexagon_graph_execution_test.cc:446 Fuse and run inception v3 on hexagon with tf runtime\n native : hexagon_graph_execution_test.cc:72 Hexagon controller version is 90\n native : hexagon_graph_execution_test.cc:122 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\n native : hexagon_graph_execution_test.cc:128 header size = 54\n native : hexagon_graph_execution_test.cc:130 image size = 40\n native : hexagon_graph_execution_test.cc:132 width = 299\n native : hexagon_graph_execution_test.cc:134 height = -299\n native : hexagon_graph_execution_test.cc:458 loading image finished.\n native : hexagon_graph_execution_test.cc:465 Build fused graph\n can't determine number of CPU cores: assuming 4\n can't determine number of CPU cores: assuming 4\n native : op_def_util.cc:332 Op PlaceholderV2 is deprecated. It will cease to work in GraphDef version 23. Placeholder now behaves the same as PlaceholderV2..\n native : hexagon_graph_execution_test.cc:122 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\n native : hexagon_graph_execution_test.cc:128 header size = 54\n native : hexagon_graph_execution_test.cc:130 image size = 40\n native : hexagon_graph_execution_test.cc:132 width = 299\n native : hexagon_graph_execution_test.cc:134 height = -299\n native : hexagon_graph_execution_test.cc:262 loading image finished.\n native : hexagon_graph_execution_test.cc:170 loading image finished.\n native : hexagon_graph_execution_test.cc:174 Copy data to tensor.\n native : hexagon_graph_execution_test.cc:284 Run graph\n Init hexagon with max attributes (Controller version = 92)\n native : hexagon_control_wrapper.cc:252 Setup graph completed\n Execute graph!\n Execution succeeded!\n native : hexagon_graph_execution_test.cc:291 Output byte size = 4032\n native : hexagon_graph_execution_test.cc:292 Output shape = [1,1008]\n native : graph_transfer_utils.cc:46 === Dump ranking ===\n native : graph_transfer_utils.cc:49 0: 59, Yorkshire terrier, 0.829043\n native : graph_transfer_utils.cc:49 1: 4, Australian terrier, 0.048217\n native : graph_transfer_utils.cc:49 2: 89, toy terrier, 0.00723796\n native : graph_transfer_utils.cc:49 3: 131, silky terrier, 0.00347867\n native : graph_transfer_utils.cc:49 4: 43, papillon, 0.00160137\n native : graph_transfer_utils.cc:49 5: 145, Norwich terrier, 0.00134778\n native : graph_transfer_utils.cc:49 6: 160, wire-haired fox terrier, 0.000875875\nnative : graph_transfer_utils.cc:49 7: 926, pickelhaube, 0.000647765\n native : graph_transfer_utils.cc:49 8: 173, Chihuahua, 0.00062044\n native : graph_transfer_utils.cc:49 9: 127, affenpinscher, 0.000569199\n Finalize hexagon\n [       OK ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime (5027 ms)\n [----------] 1 test from GraphTransferer (5027 ms total)\n \n [----------] Global test environment tear-down\n [==========] 1 test from 1 test case ran. (5027 ms total)\n [  PASSED  ] 1 test.\n \n   YOU HAVE 4 DISABLED TESTS\n \n</code></pre>\n<hr>\n<p>After this log, hvx session doesn't respond, suspicion is dsp/rpc session is not getting closed properly.<br>\nkill the process and again try to run the process, it gets stuck at :</p>\n<pre><code>WARNING: linker: Warning: unable to normalize \"\"\nRunning main() from test_main.cc\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from GraphTransferer\n[ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\nnative : hexagon_graph_execution_test.cc:446 Fuse and run inception v3 on hexagon with tf runtime\n</code></pre>\n<p>please try to reproduce.</p>", "body_text": "OS: Ubuntu 16.04 64bits\nAndroid Version: 7.1 (Nougat)\nNDK Version: android-ndk-10b\nHEXAGON SDK: 3.1\nnnlib source: https://source.codeaurora.org/quic/hexagon_nn/nnlib\n$ adb shell 'LD_LIBRARY_PATH=/data/hex_tf:$LD_LIBRARY_PATH' /data/hex_tf/hexagon_graph_execution\n WARNING: linker: Warning: unable to normalize \"\"\n Running main() from test_main.cc\n [==========] Running 1 test from 1 test case.\n [----------] Global test environment set-up.\n [----------] 1 test from GraphTransferer\n [ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\n native : hexagon_graph_execution_test.cc:446 Fuse and run inception v3 on hexagon with tf runtime\n native : hexagon_graph_execution_test.cc:72 Hexagon controller version is 90\n native : hexagon_graph_execution_test.cc:122 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\n native : hexagon_graph_execution_test.cc:128 header size = 54\n native : hexagon_graph_execution_test.cc:130 image size = 40\n native : hexagon_graph_execution_test.cc:132 width = 299\n native : hexagon_graph_execution_test.cc:134 height = -299\n native : hexagon_graph_execution_test.cc:458 loading image finished.\n native : hexagon_graph_execution_test.cc:465 Build fused graph\n can't determine number of CPU cores: assuming 4\n can't determine number of CPU cores: assuming 4\n native : op_def_util.cc:332 Op PlaceholderV2 is deprecated. It will cease to work in GraphDef version 23. Placeholder now behaves the same as PlaceholderV2..\n native : hexagon_graph_execution_test.cc:122 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\n native : hexagon_graph_execution_test.cc:128 header size = 54\n native : hexagon_graph_execution_test.cc:130 image size = 40\n native : hexagon_graph_execution_test.cc:132 width = 299\n native : hexagon_graph_execution_test.cc:134 height = -299\n native : hexagon_graph_execution_test.cc:262 loading image finished.\n native : hexagon_graph_execution_test.cc:170 loading image finished.\n native : hexagon_graph_execution_test.cc:174 Copy data to tensor.\n native : hexagon_graph_execution_test.cc:284 Run graph\n Init hexagon with max attributes (Controller version = 92)\n native : hexagon_control_wrapper.cc:252 Setup graph completed\n Execute graph!\n Execution succeeded!\n native : hexagon_graph_execution_test.cc:291 Output byte size = 4032\n native : hexagon_graph_execution_test.cc:292 Output shape = [1,1008]\n native : graph_transfer_utils.cc:46 === Dump ranking ===\n native : graph_transfer_utils.cc:49 0: 59, Yorkshire terrier, 0.829043\n native : graph_transfer_utils.cc:49 1: 4, Australian terrier, 0.048217\n native : graph_transfer_utils.cc:49 2: 89, toy terrier, 0.00723796\n native : graph_transfer_utils.cc:49 3: 131, silky terrier, 0.00347867\n native : graph_transfer_utils.cc:49 4: 43, papillon, 0.00160137\n native : graph_transfer_utils.cc:49 5: 145, Norwich terrier, 0.00134778\n native : graph_transfer_utils.cc:49 6: 160, wire-haired fox terrier, 0.000875875\nnative : graph_transfer_utils.cc:49 7: 926, pickelhaube, 0.000647765\n native : graph_transfer_utils.cc:49 8: 173, Chihuahua, 0.00062044\n native : graph_transfer_utils.cc:49 9: 127, affenpinscher, 0.000569199\n Finalize hexagon\n [       OK ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime (5027 ms)\n [----------] 1 test from GraphTransferer (5027 ms total)\n \n [----------] Global test environment tear-down\n [==========] 1 test from 1 test case ran. (5027 ms total)\n [  PASSED  ] 1 test.\n \n   YOU HAVE 4 DISABLED TESTS\n \n\n\nAfter this log, hvx session doesn't respond, suspicion is dsp/rpc session is not getting closed properly.\nkill the process and again try to run the process, it gets stuck at :\nWARNING: linker: Warning: unable to normalize \"\"\nRunning main() from test_main.cc\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from GraphTransferer\n[ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\nnative : hexagon_graph_execution_test.cc:446 Fuse and run inception v3 on hexagon with tf runtime\n\nplease try to reproduce.", "body": "OS: Ubuntu 16.04 64bits\r\nAndroid Version: 7.1 (Nougat)\r\nNDK Version: android-ndk-10b\r\nHEXAGON SDK: 3.1\r\nnnlib source: https://source.codeaurora.org/quic/hexagon_nn/nnlib\r\n\r\n\r\n```\r\n$ adb shell 'LD_LIBRARY_PATH=/data/hex_tf:$LD_LIBRARY_PATH' /data/hex_tf/hexagon_graph_execution\r\n WARNING: linker: Warning: unable to normalize \"\"\r\n Running main() from test_main.cc\r\n [==========] Running 1 test from 1 test case.\r\n [----------] Global test environment set-up.\r\n [----------] 1 test from GraphTransferer\r\n [ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\r\n native : hexagon_graph_execution_test.cc:446 Fuse and run inception v3 on hexagon with tf runtime\r\n native : hexagon_graph_execution_test.cc:72 Hexagon controller version is 90\r\n native : hexagon_graph_execution_test.cc:122 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\r\n native : hexagon_graph_execution_test.cc:128 header size = 54\r\n native : hexagon_graph_execution_test.cc:130 image size = 40\r\n native : hexagon_graph_execution_test.cc:132 width = 299\r\n native : hexagon_graph_execution_test.cc:134 height = -299\r\n native : hexagon_graph_execution_test.cc:458 loading image finished.\r\n native : hexagon_graph_execution_test.cc:465 Build fused graph\r\n can't determine number of CPU cores: assuming 4\r\n can't determine number of CPU cores: assuming 4\r\n native : op_def_util.cc:332 Op PlaceholderV2 is deprecated. It will cease to work in GraphDef version 23. Placeholder now behaves the same as PlaceholderV2..\r\n native : hexagon_graph_execution_test.cc:122 Read /data/local/tmp/img_299x299.bmp, size = 269156bytes\r\n native : hexagon_graph_execution_test.cc:128 header size = 54\r\n native : hexagon_graph_execution_test.cc:130 image size = 40\r\n native : hexagon_graph_execution_test.cc:132 width = 299\r\n native : hexagon_graph_execution_test.cc:134 height = -299\r\n native : hexagon_graph_execution_test.cc:262 loading image finished.\r\n native : hexagon_graph_execution_test.cc:170 loading image finished.\r\n native : hexagon_graph_execution_test.cc:174 Copy data to tensor.\r\n native : hexagon_graph_execution_test.cc:284 Run graph\r\n Init hexagon with max attributes (Controller version = 92)\r\n native : hexagon_control_wrapper.cc:252 Setup graph completed\r\n Execute graph!\r\n Execution succeeded!\r\n native : hexagon_graph_execution_test.cc:291 Output byte size = 4032\r\n native : hexagon_graph_execution_test.cc:292 Output shape = [1,1008]\r\n native : graph_transfer_utils.cc:46 === Dump ranking ===\r\n native : graph_transfer_utils.cc:49 0: 59, Yorkshire terrier, 0.829043\r\n native : graph_transfer_utils.cc:49 1: 4, Australian terrier, 0.048217\r\n native : graph_transfer_utils.cc:49 2: 89, toy terrier, 0.00723796\r\n native : graph_transfer_utils.cc:49 3: 131, silky terrier, 0.00347867\r\n native : graph_transfer_utils.cc:49 4: 43, papillon, 0.00160137\r\n native : graph_transfer_utils.cc:49 5: 145, Norwich terrier, 0.00134778\r\n native : graph_transfer_utils.cc:49 6: 160, wire-haired fox terrier, 0.000875875\r\nnative : graph_transfer_utils.cc:49 7: 926, pickelhaube, 0.000647765\r\n native : graph_transfer_utils.cc:49 8: 173, Chihuahua, 0.00062044\r\n native : graph_transfer_utils.cc:49 9: 127, affenpinscher, 0.000569199\r\n Finalize hexagon\r\n [       OK ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime (5027 ms)\r\n [----------] 1 test from GraphTransferer (5027 ms total)\r\n \r\n [----------] Global test environment tear-down\r\n [==========] 1 test from 1 test case ran. (5027 ms total)\r\n [  PASSED  ] 1 test.\r\n \r\n   YOU HAVE 4 DISABLED TESTS\r\n \r\n```\r\n \r\n---\r\n\r\nAfter this log, hvx session doesn't respond, suspicion is dsp/rpc session is not getting closed properly.\r\nkill the process and again try to run the process, it gets stuck at :\r\n\r\n\r\n```\r\nWARNING: linker: Warning: unable to normalize \"\"\r\nRunning main() from test_main.cc\r\n[==========] Running 1 test from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 1 test from GraphTransferer\r\n[ RUN      ] GraphTransferer.RunInceptionV3OnHexagonExampleWithTfRuntime\r\nnative : hexagon_graph_execution_test.cc:446 Fuse and run inception v3 on hexagon with tf runtime\r\n```\r\n\r\nplease try to reproduce.\r\n"}
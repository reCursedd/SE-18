{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4009", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4009/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4009/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4009/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4009", "id": 172893458, "node_id": "MDU6SXNzdWUxNzI4OTM0NTg=", "number": 4009, "title": "tf.image.decode_image would be nice (handling both png and jpeg)", "user": {"login": "untom", "id": 3627551, "node_id": "MDQ6VXNlcjM2Mjc1NTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3627551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untom", "html_url": "https://github.com/untom", "followers_url": "https://api.github.com/users/untom/followers", "following_url": "https://api.github.com/users/untom/following{/other_user}", "gists_url": "https://api.github.com/users/untom/gists{/gist_id}", "starred_url": "https://api.github.com/users/untom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untom/subscriptions", "organizations_url": "https://api.github.com/users/untom/orgs", "repos_url": "https://api.github.com/users/untom/repos", "events_url": "https://api.github.com/users/untom/events{/privacy}", "received_events_url": "https://api.github.com/users/untom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2016-08-24T08:26:45Z", "updated_at": "2018-05-25T12:38:10Z", "closed_at": "2017-04-24T17:17:51Z", "author_association": "NONE", "body_html": "<p><code>tf.image.decode_jpeg</code> crashes on a seemingly valid input image with an  <code>InvalidArgumentError: Invalid JPEG data, size 107746</code>. I've used both the current nightly from tonight, as well as TF 0.9.0, using Python 3.5.2 on CentOS 7 on two different machines.</p>\n<p>The image  can be opened/displayed without problems in Firefox, GIMP and other image viewers, as well as with the <code>PIL</code> image library within Python. The image is part of the ILSVRC2015 dataset, <code>n02105855/n02105855_2933.JPEG</code>. I've  uploaded it to <a href=\"http://imgur.com/a/pblKL\" rel=\"nofollow\">http://imgur.com/a/pblKL</a> for your reference (i hope imgur doesn't recode the image, let me know).</p>\n<p>This is a minimal code example:</p>\n<pre><code>import tensorflow as tf\nfn = './imagenet/ILSVRC2015/Data/CLS-LOC/train/n02105855/n02105855_2933.JPEG'\nwith tf.Graph().as_default():\n    image_contents = tf.read_file(fn)\n    image = tf.image.decode_jpeg(image_contents, channels=3)\n    init_op = tf.initialize_all_tables()\n    with tf.Session() as sess:\n        sess.run(init_op)\n        tmp = sess.run(image)\n</code></pre>\n<p>Which crashes with the following error:</p>\n<pre><code>InvalidArgumentError: Invalid JPEG data, size 107746\n [[Node: DecodeJpeg = DecodeJpeg[acceptable_fraction=1, channels=3, fancy_upscaling=true, ratio=1, try_recover_truncated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ReadFile)]]\nCaused by op 'DecodeJpeg', defined at:\n</code></pre>\n<p>For reference, here the full stack trace is here: <a href=\"http://pastebin.com/GZMWDjge\" rel=\"nofollow\">http://pastebin.com/GZMWDjge</a></p>", "body_text": "tf.image.decode_jpeg crashes on a seemingly valid input image with an  InvalidArgumentError: Invalid JPEG data, size 107746. I've used both the current nightly from tonight, as well as TF 0.9.0, using Python 3.5.2 on CentOS 7 on two different machines.\nThe image  can be opened/displayed without problems in Firefox, GIMP and other image viewers, as well as with the PIL image library within Python. The image is part of the ILSVRC2015 dataset, n02105855/n02105855_2933.JPEG. I've  uploaded it to http://imgur.com/a/pblKL for your reference (i hope imgur doesn't recode the image, let me know).\nThis is a minimal code example:\nimport tensorflow as tf\nfn = './imagenet/ILSVRC2015/Data/CLS-LOC/train/n02105855/n02105855_2933.JPEG'\nwith tf.Graph().as_default():\n    image_contents = tf.read_file(fn)\n    image = tf.image.decode_jpeg(image_contents, channels=3)\n    init_op = tf.initialize_all_tables()\n    with tf.Session() as sess:\n        sess.run(init_op)\n        tmp = sess.run(image)\n\nWhich crashes with the following error:\nInvalidArgumentError: Invalid JPEG data, size 107746\n [[Node: DecodeJpeg = DecodeJpeg[acceptable_fraction=1, channels=3, fancy_upscaling=true, ratio=1, try_recover_truncated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ReadFile)]]\nCaused by op 'DecodeJpeg', defined at:\n\nFor reference, here the full stack trace is here: http://pastebin.com/GZMWDjge", "body": "`tf.image.decode_jpeg` crashes on a seemingly valid input image with an  `InvalidArgumentError: Invalid JPEG data, size 107746`. I've used both the current nightly from tonight, as well as TF 0.9.0, using Python 3.5.2 on CentOS 7 on two different machines.\n\nThe image  can be opened/displayed without problems in Firefox, GIMP and other image viewers, as well as with the `PIL` image library within Python. The image is part of the ILSVRC2015 dataset, `n02105855/n02105855_2933.JPEG`. I've  uploaded it to http://imgur.com/a/pblKL for your reference (i hope imgur doesn't recode the image, let me know). \n\nThis is a minimal code example:\n\n```\nimport tensorflow as tf\nfn = './imagenet/ILSVRC2015/Data/CLS-LOC/train/n02105855/n02105855_2933.JPEG'\nwith tf.Graph().as_default():\n    image_contents = tf.read_file(fn)\n    image = tf.image.decode_jpeg(image_contents, channels=3)\n    init_op = tf.initialize_all_tables()\n    with tf.Session() as sess:\n        sess.run(init_op)\n        tmp = sess.run(image)\n```\n\nWhich crashes with the following error:\n\n```\nInvalidArgumentError: Invalid JPEG data, size 107746\n [[Node: DecodeJpeg = DecodeJpeg[acceptable_fraction=1, channels=3, fancy_upscaling=true, ratio=1, try_recover_truncated=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](ReadFile)]]\nCaused by op 'DecodeJpeg', defined at:\n```\n\nFor reference, here the full stack trace is here: http://pastebin.com/GZMWDjge\n"}
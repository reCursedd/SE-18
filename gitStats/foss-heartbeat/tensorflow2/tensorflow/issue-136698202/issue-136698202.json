{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1297", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1297/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1297/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1297/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1297", "id": 136698202, "node_id": "MDU6SXNzdWUxMzY2OTgyMDI=", "number": 1297, "title": "Exception thrown running  example/udacity/5_word2vec", "user": {"login": "jyegerlehner", "id": 2138320, "node_id": "MDQ6VXNlcjIxMzgzMjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/2138320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyegerlehner", "html_url": "https://github.com/jyegerlehner", "followers_url": "https://api.github.com/users/jyegerlehner/followers", "following_url": "https://api.github.com/users/jyegerlehner/following{/other_user}", "gists_url": "https://api.github.com/users/jyegerlehner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyegerlehner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyegerlehner/subscriptions", "organizations_url": "https://api.github.com/users/jyegerlehner/orgs", "repos_url": "https://api.github.com/users/jyegerlehner/repos", "events_url": "https://api.github.com/users/jyegerlehner/events{/privacy}", "received_events_url": "https://api.github.com/users/jyegerlehner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "vincentvanhoucke", "id": 15737127, "node_id": "MDQ6VXNlcjE1NzM3MTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/15737127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincentvanhoucke", "html_url": "https://github.com/vincentvanhoucke", "followers_url": "https://api.github.com/users/vincentvanhoucke/followers", "following_url": "https://api.github.com/users/vincentvanhoucke/following{/other_user}", "gists_url": "https://api.github.com/users/vincentvanhoucke/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincentvanhoucke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincentvanhoucke/subscriptions", "organizations_url": "https://api.github.com/users/vincentvanhoucke/orgs", "repos_url": "https://api.github.com/users/vincentvanhoucke/repos", "events_url": "https://api.github.com/users/vincentvanhoucke/events{/privacy}", "received_events_url": "https://api.github.com/users/vincentvanhoucke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "vincentvanhoucke", "id": 15737127, "node_id": "MDQ6VXNlcjE1NzM3MTI3", "avatar_url": "https://avatars3.githubusercontent.com/u/15737127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincentvanhoucke", "html_url": "https://github.com/vincentvanhoucke", "followers_url": "https://api.github.com/users/vincentvanhoucke/followers", "following_url": "https://api.github.com/users/vincentvanhoucke/following{/other_user}", "gists_url": "https://api.github.com/users/vincentvanhoucke/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincentvanhoucke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincentvanhoucke/subscriptions", "organizations_url": "https://api.github.com/users/vincentvanhoucke/orgs", "repos_url": "https://api.github.com/users/vincentvanhoucke/repos", "events_url": "https://api.github.com/users/vincentvanhoucke/events{/privacy}", "received_events_url": "https://api.github.com/users/vincentvanhoucke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2016-02-26T13:33:29Z", "updated_at": "2016-02-28T16:02:16Z", "closed_at": "2016-02-28T16:02:16Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hi all. Does anyone reproduce this? The description of the problem is below in the suggested format. A brief summary is: running the examples/udacity/4_convolutions.ipynb runs fine on gpu, but the 5_word2vec notebook fails  with an AdaGrad-related exception:</p>\n<p><code>InvalidArgumentError: Cannot assign a device to node 'Adagrad/update_Variable_2/SparseApplyAdagrad': Could not satisfy explicit device specification '' because the node was colocated with a group of nodes that required incompatible device '/job:localhost/replica:0/task:0/GPU:0'</code></p>\n<p>though I never modified the code (except to print some things out). I never modified code to assign any ops to a device, as it seems to be claiming.</p>\n<p>This looks at least superficially related to <a href=\"https://github.com/tensorflow/tensorflow/issues/505\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/505/hovercard\">this issue</a>.</p>\n<p>Thanks,<br>\nJim</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04 LTS</p>\n<p><strong>If installed from binary pip package, provide:</strong><br>\nBuilt from r0.7 source.</p>\n<p><strong>1. Which pip package you installed.</strong><br>\n<code>sudo pip install --upgrade /tmp/tensorflow_pkg/tensorflow-0.7.1-cp27-none-linux_x86_64.whl</code></p>\n<p><strong>2. The output from python -c \"import tensorflow; print(tensorflow.<strong>version</strong>)\".</strong></p>\n<pre><code>jd@jd-All-Series:~/dev/thirdparty/scikit-learn/scikit-learn$ python -c \"import tensorflow; print(tensorflow.__version__)\"\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so.7.0 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so.7.0 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so.7.0 locally\n\n0.7.1\n</code></pre>\n<p><strong>If installed from sources, provide the commit hash:</strong><br>\n<code>41fcc7edd63c01dfd56382be4755c90f5a7eb565</code></p>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>Run <code>jupyter notebook</code> in the examples/udacity/ directory.</li>\n<li>Open the 5_word2vec.ipynb notebook in the web browser (from <a href=\"http://localhost:8888\" rel=\"nofollow\">http://localhost:8888</a>).</li>\n<li>Execute each of the steps through the first (Google-provided) session.run().</li>\n<li>Observe the exception when you get to the first session.run() after 'Train a skip-gram model.' step, which is provided by notebook (before I have to write any code). The exception happens on the line with session.run() invocation.</li>\n</ol>\n<p><code>InvalidArgumentError: Cannot assign a device to node 'Adagrad/update_Variable_2/SparseApplyAdagrad': Could not satisfy explicit device specification '' because the node was colocated with a group of nodes that required incompatible device '/job:localhost/replica:0/task:0/GPU:0' [[Node: Adagrad/update_Variable_2/SparseApplyAdagrad = SparseApplyAdagrad[T=DT_FLOAT, Tindices=DT_INT64, use_locking=false](Variable_2, Variable_2/Adagrad, Adagrad/learning_rate, gradients/concat_2, gradients/concat_3)]]</code></p>\n<p>I have not modified the python code assign to do any device assignments in this notebook.</p>\n<h3>What have you tried?</h3>\n<ol>\n<li>I've been working through the Udacity DeepLearning course. After encountering this error, I killed the jupyter kernel for 5_word2vec, and re-run my previously-saved notebook for the fourth exercise, 4_convolutions.ipynb, and it executes without error on the gpu. Which I think must confirm that TensorFlow is installed OK.</li>\n</ol>\n<p>Done for the day, but when I come back, I will probably try building without gpu support, and see if that runs OK so I can at least carry on with the course.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>Please let me know if there's anything you'd like me to log. Hardware is a Titan-X.</p>", "body_text": "Hi all. Does anyone reproduce this? The description of the problem is below in the suggested format. A brief summary is: running the examples/udacity/4_convolutions.ipynb runs fine on gpu, but the 5_word2vec notebook fails  with an AdaGrad-related exception:\nInvalidArgumentError: Cannot assign a device to node 'Adagrad/update_Variable_2/SparseApplyAdagrad': Could not satisfy explicit device specification '' because the node was colocated with a group of nodes that required incompatible device '/job:localhost/replica:0/task:0/GPU:0'\nthough I never modified the code (except to print some things out). I never modified code to assign any ops to a device, as it seems to be claiming.\nThis looks at least superficially related to this issue.\nThanks,\nJim\nEnvironment info\nOperating System: Ubuntu 14.04 LTS\nIf installed from binary pip package, provide:\nBuilt from r0.7 source.\n1. Which pip package you installed.\nsudo pip install --upgrade /tmp/tensorflow_pkg/tensorflow-0.7.1-cp27-none-linux_x86_64.whl\n2. The output from python -c \"import tensorflow; print(tensorflow.version)\".\njd@jd-All-Series:~/dev/thirdparty/scikit-learn/scikit-learn$ python -c \"import tensorflow; print(tensorflow.__version__)\"\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so.7.0 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so.7.0 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so.7.0 locally\n\n0.7.1\n\nIf installed from sources, provide the commit hash:\n41fcc7edd63c01dfd56382be4755c90f5a7eb565\nSteps to reproduce\n\nRun jupyter notebook in the examples/udacity/ directory.\nOpen the 5_word2vec.ipynb notebook in the web browser (from http://localhost:8888).\nExecute each of the steps through the first (Google-provided) session.run().\nObserve the exception when you get to the first session.run() after 'Train a skip-gram model.' step, which is provided by notebook (before I have to write any code). The exception happens on the line with session.run() invocation.\n\nInvalidArgumentError: Cannot assign a device to node 'Adagrad/update_Variable_2/SparseApplyAdagrad': Could not satisfy explicit device specification '' because the node was colocated with a group of nodes that required incompatible device '/job:localhost/replica:0/task:0/GPU:0' [[Node: Adagrad/update_Variable_2/SparseApplyAdagrad = SparseApplyAdagrad[T=DT_FLOAT, Tindices=DT_INT64, use_locking=false](Variable_2, Variable_2/Adagrad, Adagrad/learning_rate, gradients/concat_2, gradients/concat_3)]]\nI have not modified the python code assign to do any device assignments in this notebook.\nWhat have you tried?\n\nI've been working through the Udacity DeepLearning course. After encountering this error, I killed the jupyter kernel for 5_word2vec, and re-run my previously-saved notebook for the fourth exercise, 4_convolutions.ipynb, and it executes without error on the gpu. Which I think must confirm that TensorFlow is installed OK.\n\nDone for the day, but when I come back, I will probably try building without gpu support, and see if that runs OK so I can at least carry on with the course.\nLogs or other output that would be helpful\nPlease let me know if there's anything you'd like me to log. Hardware is a Titan-X.", "body": "Hi all. Does anyone reproduce this? The description of the problem is below in the suggested format. A brief summary is: running the examples/udacity/4_convolutions.ipynb runs fine on gpu, but the 5_word2vec notebook fails  with an AdaGrad-related exception: \n\n`InvalidArgumentError: Cannot assign a device to node 'Adagrad/update_Variable_2/SparseApplyAdagrad': Could not satisfy explicit device specification '' because the node was colocated with a group of nodes that required incompatible device '/job:localhost/replica:0/task:0/GPU:0'`\n\nthough I never modified the code (except to print some things out). I never modified code to assign any ops to a device, as it seems to be claiming.\n\nThis looks at least superficially related to [this issue](https://github.com/tensorflow/tensorflow/issues/505).\n\nThanks,\nJim\n### Environment info\n\nOperating System: Ubuntu 14.04 LTS\n\n**If installed from binary pip package, provide:**\nBuilt from r0.7 source.\n\n**1. Which pip package you installed.**\n`sudo pip install --upgrade /tmp/tensorflow_pkg/tensorflow-0.7.1-cp27-none-linux_x86_64.whl`\n\n**2. The output from python -c \"import tensorflow; print(tensorflow.**version**)\".**\n\n```\njd@jd-All-Series:~/dev/thirdparty/scikit-learn/scikit-learn$ python -c \"import tensorflow; print(tensorflow.__version__)\"\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so.7.0 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so.7.0 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcuda.so.1 locally\n\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so.7.0 locally\n\n0.7.1\n```\n\n**If installed from sources, provide the commit hash:**\n`41fcc7edd63c01dfd56382be4755c90f5a7eb565`\n### Steps to reproduce\n1. Run `jupyter notebook` in the examples/udacity/ directory.\n2. Open the 5_word2vec.ipynb notebook in the web browser (from http://localhost:8888).\n3. Execute each of the steps through the first (Google-provided) session.run().\n4. Observe the exception when you get to the first session.run() after 'Train a skip-gram model.' step, which is provided by notebook (before I have to write any code). The exception happens on the line with session.run() invocation.\n\n`InvalidArgumentError: Cannot assign a device to node 'Adagrad/update_Variable_2/SparseApplyAdagrad': Could not satisfy explicit device specification '' because the node was colocated with a group of nodes that required incompatible device '/job:localhost/replica:0/task:0/GPU:0'\n     [[Node: Adagrad/update_Variable_2/SparseApplyAdagrad = SparseApplyAdagrad[T=DT_FLOAT, Tindices=DT_INT64, use_locking=false](Variable_2, Variable_2/Adagrad, Adagrad/learning_rate, gradients/concat_2, gradients/concat_3)]]`\n\nI have not modified the python code assign to do any device assignments in this notebook. \n### What have you tried?\n1. I've been working through the Udacity DeepLearning course. After encountering this error, I killed the jupyter kernel for 5_word2vec, and re-run my previously-saved notebook for the fourth exercise, 4_convolutions.ipynb, and it executes without error on the gpu. Which I think must confirm that TensorFlow is installed OK. \n\nDone for the day, but when I come back, I will probably try building without gpu support, and see if that runs OK so I can at least carry on with the course.\n### Logs or other output that would be helpful\n\nPlease let me know if there's anything you'd like me to log. Hardware is a Titan-X.\n"}
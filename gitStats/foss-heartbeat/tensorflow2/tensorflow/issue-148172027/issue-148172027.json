{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1928", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1928/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1928/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1928/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1928", "id": 148172027, "node_id": "MDU6SXNzdWUxNDgxNzIwMjc=", "number": 1928, "title": "Some tests (GPU ones?) hang for about 300 seconds before running ", "user": {"login": "ry", "id": 80, "node_id": "MDQ6VXNlcjgw", "avatar_url": "https://avatars1.githubusercontent.com/u/80?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ry", "html_url": "https://github.com/ry", "followers_url": "https://api.github.com/users/ry/followers", "following_url": "https://api.github.com/users/ry/following{/other_user}", "gists_url": "https://api.github.com/users/ry/gists{/gist_id}", "starred_url": "https://api.github.com/users/ry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ry/subscriptions", "organizations_url": "https://api.github.com/users/ry/orgs", "repos_url": "https://api.github.com/users/ry/repos", "events_url": "https://api.github.com/users/ry/events{/privacy}", "received_events_url": "https://api.github.com/users/ry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284463744, "node_id": "MDU6TGFiZWwyODQ0NjM3NDQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cuda", "name": "cuda", "color": "f7c6c7", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-04-13T20:18:12Z", "updated_at": "2017-02-09T22:02:17Z", "closed_at": "2016-04-14T17:26:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p>A lot of tests seem to run very slowly - like for 5 minutes - I think it's the ones that use the GPU. It always hangs at the start of the test right after:</p>\n<p><code>I tensorflow/core/common_runtime/gpu/gpu_device.cc:755] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX 750 Ti, pci bus id: 0000:01:00.0)</code></p>\n<p>The python test process runs at 100% CPU. If I interrupt it with <code>cuda-gdb</code> I see this:</p>\n<pre><code>1 ryan@gpu:~$ sudo /usr/local/cuda/bin/cuda-gdb -p 12367\nNVIDIA (R) CUDA Debugger\n7.5 release\n[...]\n(cuda-gdb) bt\n#0  0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 ()\n   from /lib/x86_64-linux-gnu/libpthread.so.0\n#1  0x00007fcaee409cdc in std::condition_variable::wait(std::unique_lock&lt;std::mutex&gt;&amp;) ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#2  0x00007fcafa9d2455 in tensorflow::Notification::WaitForNotification() ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#3  0x00007fcafbe4e157 in tensorflow::DirectSession::WaitForNotification(tensorflow::DirectSession::RunState*, long long) ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#4  0x00007fcafbe499ef in tensorflow::DirectSession::Run(tensorflow::RunOptions const&amp;, std::vector&lt;std::pair&lt;std::string, tensorflow::Tensor&gt;, std::allocator&lt;std::pair&lt;std::string, tensorflow::Tensor&gt; &gt; &gt; const&amp;, std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;, std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;, std::vector&lt;tensorflow::Tensor, std::allocator&lt;tensorflow::Tensor&gt; &gt;*, tensorflow::RunMetadata*) ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#5  0x00007fcafbe49291 in tensorflow::DirectSession::Run(std::vector&lt;std::pair&lt;std::string, tensorflow::Tensor&gt;, std::allocator&lt;std::pair&lt;std::string, tensorflow::Tensor&gt; &gt; &gt; const&amp;, std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;, std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;, std::vector&lt;tensorflow::Tensor, std::allocator&lt;tensorflow::Tensor&gt; &gt;*) () from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007fcafc0a5894 in TF_Run_Helper(TF_Session*, char const*, TF_Buffer const*, char const**, TF_Tensor**, int, char const**, TF_Tensor**, int, char const**, int, TF_Buffer*, TF_Status---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---q\nQuit\n(cuda-gdb) info threads\n  Id   Target Id         Frame\n  10   Thread 0x7fcb11450700 (LWP 12373) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  9    Thread 0x7fcad0d66700 (LWP 12374) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  8    Thread 0x7fcacbfff700 (LWP 12375) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  7    Thread 0x7fcacb7fe700 (LWP 12376) \"python\" 0x00007fcb151b988d in poll ()\n   from /lib/x86_64-linux-gnu/libc.so.6\n  6    Thread 0x7fcabffff700 (LWP 12377) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  5    Thread 0x7fcabf7fe700 (LWP 12378) \"python\" 0x00007fcb15495149 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  4    Thread 0x7fcabeffd700 (LWP 12379) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  3    Thread 0x7fcabe7fc700 (LWP 12380) \"python\" 0x00007fcae1280e5f in ?? ()\n   from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n  2    Thread 0x7fcabdffb700 (LWP 12381) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n* 1    Thread 0x7fcb1589e700 (LWP 12367) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n(cuda-gdb) thread 3\n[Switching to thread 3 (Thread 0x7fcabe7fc700 (LWP 12380))]\n#0  0x00007fcae1280e5f in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n(cuda-gdb) bt\n#0  0x00007fcae1280e5f in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#1  0x00007fcae159fdcd in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#2  0x00007fcae1595f75 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#3  0x00007fcae1537423 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#4  0x00007fcae151f416 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#5  0x00007fcae1503a3d in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#6  0x00007fcae15244be in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#7  0x00007fcae1527932 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#8  0x00007fcae151ee1f in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#9  0x00007fcae14fb6c4 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#10 0x00007fcae14fca7d in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#11 0x00007fcae1351204 in cuMemGetAttribute_v2 () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#12 0x00007fcae1351bfe in cuMemGetAttribute_v2 () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#13 0x00007fcae143f8a0 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#14 0x00007fcae143fbb0 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#15 0x00007fcaee6fe52d in cudaGetExportTable ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/../../_solib_local/_U_S_Sthird_Uparty_Sgpus_Scuda_Ccudart___Uthird_Uparty_Sgpus_Scuda_Slib64/libcudart.so.7.5\n#16 0x00007fcaee6f2ba0 in cudaGetExportTable ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/../../_solib_local/_U_S_Sthird_Uparty_Sgpus_Scuda_Ccudart___Uthird_Uparty_Sgpus_Scuda_Slib64/libcudart.so.7.5\n#17 0x00007fcaee6fd796 in cudaGetExportTable ()\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---q\n from /home/ryan/src/tensorflow/_python_build/tQuit\n(cuda-gdb)\n</code></pre>\n<p>So it looks like it's waiting for a GPU compilation. nvidia-smi doesn't make it seem like it's working hard though:</p>\n<pre><code>0 ryan@gpu:~$ nvidia-smi\nWed Apr 13 16:13:25 2016\n+------------------------------------------------------+\n| NVIDIA-SMI 352.39     Driver Version: 352.39         |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 750 Ti  On   | 0000:01:00.0      On |                  N/A |\n| 42%   29C    P0     2W /  52W |    898MiB /  2044MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0       652    G   /usr/bin/X                                     135MiB |\n|    0      1143    G   compiz                                          52MiB |\n|    0     12367    C   /home/ryan/src/python-local/bin/python         700MiB |\n+-----------------------------------------------------------------------------+\n</code></pre>\n<p>Here is a partial list of tests that ran in hundreds of seconds:</p>\n<pre><code>//tensorflow/python:argmax_op_test                                       PASSED in 301.2s\n//tensorflow/python:attention_ops_test                                   PASSED in 303.4s\n//tensorflow/python:bias_op_test                                         PASSED in 317.5s\n//tensorflow/python:cast_op_test                                         PASSED in 318.2s\n//tensorflow/python:concat_op_test                                       PASSED in 321.0s\n//tensorflow/python:constant_op_test                                     PASSED in 308.4s\n//tensorflow/python:control_flow_ops_py_test                             PASSED in 321.2s\n//tensorflow/python:conv_ops_test                                        PASSED in 330.7s\n//tensorflow/python:dense_update_ops_test                                PASSED in 307.6s\n//tensorflow/python:depthtospace_op_test                                 PASSED in 323.4s\n//tensorflow/python:fft_ops_test                                         PASSED in 343.8s\n//tensorflow/python:gather_nd_op_test                                    PASSED in 317.7s\n//tensorflow/python:gather_op_test                                       PASSED in 315.2s\n//tensorflow/python:gradient_checker_test                                PASSED in 288.4s\n//tensorflow/python:gradients_test                                       PASSED in 317.1s\n//tensorflow/python:graph_util_test                                      PASSED in 304.8s\n//tensorflow/python:image_grad_test                                      PASSED in 296.9s\n//tensorflow/python:image_ops_test                                       PASSED in 301.3s\n//tensorflow/python:init_ops_test                                        PASSED in 317.3s\n//tensorflow/python:math_grad_test                                       PASSED in 317.3s\n//tensorflow/python:math_ops_test                                        PASSED in 368.2s\n//tensorflow/python:matmul_op_test                                       PASSED in 319.3s\n//tensorflow/python:nn_test                                              PASSED in 338.6s\n//tensorflow/python:numerics_test                                        PASSED in 310.5s\n//tensorflow/python:one_hot_op_test                                      PASSED in 306.0s\n//tensorflow/python:pack_op_test                                         PASSED in 318.6s\n//tensorflow/python:pad_op_test                                          PASSED in 320.0s\n//tensorflow/python:pooling_ops_test                                     PASSED in 333.5s\n//tensorflow/python:random_ops_test                                      PASSED in 325.2s\n//tensorflow/python:reduction_ops_test                                   PASSED in 313.2s\n//tensorflow/python:relu_op_test                                         PASSED in 308.5s\n//tensorflow/python:reverse_sequence_op_test                             PASSED in 304.1s\n//tensorflow/python:rnn_test                                             PASSED in 371.4s\n//tensorflow/python:saver_test                                           PASSED in 305.0s\n//tensorflow/python:scatter_ops_test                                     PASSED in 344.2s\n//tensorflow/python:server_lib_test                                      PASSED in 315.3s\n//tensorflow/python:session_manager_test                                 PASSED in 342.9s\n//tensorflow/python:shape_ops_test                                       PASSED in 312.7s\n//tensorflow/python:slice_op_test                                        PASSED in 429.0s\n//tensorflow/python:softmax_op_test                                      PASSED in 303.4s\n//tensorflow/python:softplus_op_test                                     PASSED in 314.8s\n//tensorflow/python:softsign_op_test                                     PASSED in 313.2s\n//tensorflow/python:spacetodepth_op_test                                 PASSED in 315.3s\n//tensorflow/python:sparse_tensor_dense_matmul_grad_test                 PASSED in 299.8s\n//tensorflow/python:sparse_tensor_dense_matmul_op_test                   PASSED in 319.6s\n//tensorflow/python:sparse_xent_op_test                                  PASSED in 318.2s\n//tensorflow/python:split_op_test                                        PASSED in 302.2s\n//tensorflow/python:stack_ops_test                                       PASSED in 317.1s\n//tensorflow/python:supervisor_test                                      PASSED in 327.9s\n//tensorflow/python:template_test                                        PASSED in 302.0s\n//tensorflow/python:tensor_array_ops_test                                PASSED in 313.5s\n//tensorflow/python:training_ops_test                                    PASSED in 312.4s\n//tensorflow/python:transpose_op_test                                    PASSED in 303.2s\n//tensorflow/python:unpack_op_test                                       PASSED in 299.1s\n//tensorflow/python:variable_ops_test                                    PASSED in 317.2s\n//tensorflow/python:cwise_ops_test                                      TIMEOUT in 505.0s\n//tensorflow/python:xent_op_test                                        TIMEOUT in 505.0s\n//tensorflow/python:depthwise_conv_op_test                               FAILED in 304.2s\n//tensorflow/python:function_test                                        FAILED in 309.4s\n//tensorflow/python:session_test                                         FAILED in 320.8s\n</code></pre>", "body_text": "A lot of tests seem to run very slowly - like for 5 minutes - I think it's the ones that use the GPU. It always hangs at the start of the test right after:\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:755] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 750 Ti, pci bus id: 0000:01:00.0)\nThe python test process runs at 100% CPU. If I interrupt it with cuda-gdb I see this:\n1 ryan@gpu:~$ sudo /usr/local/cuda/bin/cuda-gdb -p 12367\nNVIDIA (R) CUDA Debugger\n7.5 release\n[...]\n(cuda-gdb) bt\n#0  0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 ()\n   from /lib/x86_64-linux-gnu/libpthread.so.0\n#1  0x00007fcaee409cdc in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#2  0x00007fcafa9d2455 in tensorflow::Notification::WaitForNotification() ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#3  0x00007fcafbe4e157 in tensorflow::DirectSession::WaitForNotification(tensorflow::DirectSession::RunState*, long long) ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#4  0x00007fcafbe499ef in tensorflow::DirectSession::Run(tensorflow::RunOptions const&, std::vector<std::pair<std::string, tensorflow::Tensor>, std::allocator<std::pair<std::string, tensorflow::Tensor> > > const&, std::vector<std::string, std::allocator<std::string> > const&, std::vector<std::string, std::allocator<std::string> > const&, std::vector<tensorflow::Tensor, std::allocator<tensorflow::Tensor> >*, tensorflow::RunMetadata*) ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#5  0x00007fcafbe49291 in tensorflow::DirectSession::Run(std::vector<std::pair<std::string, tensorflow::Tensor>, std::allocator<std::pair<std::string, tensorflow::Tensor> > > const&, std::vector<std::string, std::allocator<std::string> > const&, std::vector<std::string, std::allocator<std::string> > const&, std::vector<tensorflow::Tensor, std::allocator<tensorflow::Tensor> >*) () from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007fcafc0a5894 in TF_Run_Helper(TF_Session*, char const*, TF_Buffer const*, char const**, TF_Tensor**, int, char const**, TF_Tensor**, int, char const**, int, TF_Buffer*, TF_Status---Type <return> to continue, or q <return> to quit---q\nQuit\n(cuda-gdb) info threads\n  Id   Target Id         Frame\n  10   Thread 0x7fcb11450700 (LWP 12373) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  9    Thread 0x7fcad0d66700 (LWP 12374) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  8    Thread 0x7fcacbfff700 (LWP 12375) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  7    Thread 0x7fcacb7fe700 (LWP 12376) \"python\" 0x00007fcb151b988d in poll ()\n   from /lib/x86_64-linux-gnu/libc.so.6\n  6    Thread 0x7fcabffff700 (LWP 12377) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  5    Thread 0x7fcabf7fe700 (LWP 12378) \"python\" 0x00007fcb15495149 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  4    Thread 0x7fcabeffd700 (LWP 12379) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  3    Thread 0x7fcabe7fc700 (LWP 12380) \"python\" 0x00007fcae1280e5f in ?? ()\n   from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n  2    Thread 0x7fcabdffb700 (LWP 12381) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n* 1    Thread 0x7fcb1589e700 (LWP 12367) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n(cuda-gdb) thread 3\n[Switching to thread 3 (Thread 0x7fcabe7fc700 (LWP 12380))]\n#0  0x00007fcae1280e5f in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n(cuda-gdb) bt\n#0  0x00007fcae1280e5f in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#1  0x00007fcae159fdcd in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#2  0x00007fcae1595f75 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#3  0x00007fcae1537423 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#4  0x00007fcae151f416 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#5  0x00007fcae1503a3d in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#6  0x00007fcae15244be in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#7  0x00007fcae1527932 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#8  0x00007fcae151ee1f in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#9  0x00007fcae14fb6c4 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#10 0x00007fcae14fca7d in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#11 0x00007fcae1351204 in cuMemGetAttribute_v2 () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#12 0x00007fcae1351bfe in cuMemGetAttribute_v2 () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#13 0x00007fcae143f8a0 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#14 0x00007fcae143fbb0 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#15 0x00007fcaee6fe52d in cudaGetExportTable ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/../../_solib_local/_U_S_Sthird_Uparty_Sgpus_Scuda_Ccudart___Uthird_Uparty_Sgpus_Scuda_Slib64/libcudart.so.7.5\n#16 0x00007fcaee6f2ba0 in cudaGetExportTable ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/../../_solib_local/_U_S_Sthird_Uparty_Sgpus_Scuda_Ccudart___Uthird_Uparty_Sgpus_Scuda_Slib64/libcudart.so.7.5\n#17 0x00007fcaee6fd796 in cudaGetExportTable ()\n---Type <return> to continue, or q <return> to quit---q\n from /home/ryan/src/tensorflow/_python_build/tQuit\n(cuda-gdb)\n\nSo it looks like it's waiting for a GPU compilation. nvidia-smi doesn't make it seem like it's working hard though:\n0 ryan@gpu:~$ nvidia-smi\nWed Apr 13 16:13:25 2016\n+------------------------------------------------------+\n| NVIDIA-SMI 352.39     Driver Version: 352.39         |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 750 Ti  On   | 0000:01:00.0      On |                  N/A |\n| 42%   29C    P0     2W /  52W |    898MiB /  2044MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0       652    G   /usr/bin/X                                     135MiB |\n|    0      1143    G   compiz                                          52MiB |\n|    0     12367    C   /home/ryan/src/python-local/bin/python         700MiB |\n+-----------------------------------------------------------------------------+\n\nHere is a partial list of tests that ran in hundreds of seconds:\n//tensorflow/python:argmax_op_test                                       PASSED in 301.2s\n//tensorflow/python:attention_ops_test                                   PASSED in 303.4s\n//tensorflow/python:bias_op_test                                         PASSED in 317.5s\n//tensorflow/python:cast_op_test                                         PASSED in 318.2s\n//tensorflow/python:concat_op_test                                       PASSED in 321.0s\n//tensorflow/python:constant_op_test                                     PASSED in 308.4s\n//tensorflow/python:control_flow_ops_py_test                             PASSED in 321.2s\n//tensorflow/python:conv_ops_test                                        PASSED in 330.7s\n//tensorflow/python:dense_update_ops_test                                PASSED in 307.6s\n//tensorflow/python:depthtospace_op_test                                 PASSED in 323.4s\n//tensorflow/python:fft_ops_test                                         PASSED in 343.8s\n//tensorflow/python:gather_nd_op_test                                    PASSED in 317.7s\n//tensorflow/python:gather_op_test                                       PASSED in 315.2s\n//tensorflow/python:gradient_checker_test                                PASSED in 288.4s\n//tensorflow/python:gradients_test                                       PASSED in 317.1s\n//tensorflow/python:graph_util_test                                      PASSED in 304.8s\n//tensorflow/python:image_grad_test                                      PASSED in 296.9s\n//tensorflow/python:image_ops_test                                       PASSED in 301.3s\n//tensorflow/python:init_ops_test                                        PASSED in 317.3s\n//tensorflow/python:math_grad_test                                       PASSED in 317.3s\n//tensorflow/python:math_ops_test                                        PASSED in 368.2s\n//tensorflow/python:matmul_op_test                                       PASSED in 319.3s\n//tensorflow/python:nn_test                                              PASSED in 338.6s\n//tensorflow/python:numerics_test                                        PASSED in 310.5s\n//tensorflow/python:one_hot_op_test                                      PASSED in 306.0s\n//tensorflow/python:pack_op_test                                         PASSED in 318.6s\n//tensorflow/python:pad_op_test                                          PASSED in 320.0s\n//tensorflow/python:pooling_ops_test                                     PASSED in 333.5s\n//tensorflow/python:random_ops_test                                      PASSED in 325.2s\n//tensorflow/python:reduction_ops_test                                   PASSED in 313.2s\n//tensorflow/python:relu_op_test                                         PASSED in 308.5s\n//tensorflow/python:reverse_sequence_op_test                             PASSED in 304.1s\n//tensorflow/python:rnn_test                                             PASSED in 371.4s\n//tensorflow/python:saver_test                                           PASSED in 305.0s\n//tensorflow/python:scatter_ops_test                                     PASSED in 344.2s\n//tensorflow/python:server_lib_test                                      PASSED in 315.3s\n//tensorflow/python:session_manager_test                                 PASSED in 342.9s\n//tensorflow/python:shape_ops_test                                       PASSED in 312.7s\n//tensorflow/python:slice_op_test                                        PASSED in 429.0s\n//tensorflow/python:softmax_op_test                                      PASSED in 303.4s\n//tensorflow/python:softplus_op_test                                     PASSED in 314.8s\n//tensorflow/python:softsign_op_test                                     PASSED in 313.2s\n//tensorflow/python:spacetodepth_op_test                                 PASSED in 315.3s\n//tensorflow/python:sparse_tensor_dense_matmul_grad_test                 PASSED in 299.8s\n//tensorflow/python:sparse_tensor_dense_matmul_op_test                   PASSED in 319.6s\n//tensorflow/python:sparse_xent_op_test                                  PASSED in 318.2s\n//tensorflow/python:split_op_test                                        PASSED in 302.2s\n//tensorflow/python:stack_ops_test                                       PASSED in 317.1s\n//tensorflow/python:supervisor_test                                      PASSED in 327.9s\n//tensorflow/python:template_test                                        PASSED in 302.0s\n//tensorflow/python:tensor_array_ops_test                                PASSED in 313.5s\n//tensorflow/python:training_ops_test                                    PASSED in 312.4s\n//tensorflow/python:transpose_op_test                                    PASSED in 303.2s\n//tensorflow/python:unpack_op_test                                       PASSED in 299.1s\n//tensorflow/python:variable_ops_test                                    PASSED in 317.2s\n//tensorflow/python:cwise_ops_test                                      TIMEOUT in 505.0s\n//tensorflow/python:xent_op_test                                        TIMEOUT in 505.0s\n//tensorflow/python:depthwise_conv_op_test                               FAILED in 304.2s\n//tensorflow/python:function_test                                        FAILED in 309.4s\n//tensorflow/python:session_test                                         FAILED in 320.8s", "body": "A lot of tests seem to run very slowly - like for 5 minutes - I think it's the ones that use the GPU. It always hangs at the start of the test right after:\n\n`I tensorflow/core/common_runtime/gpu/gpu_device.cc:755] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 750 Ti, pci bus id: 0000:01:00.0)`\n\nThe python test process runs at 100% CPU. If I interrupt it with `cuda-gdb` I see this:\n\n```\n1 ryan@gpu:~$ sudo /usr/local/cuda/bin/cuda-gdb -p 12367\nNVIDIA (R) CUDA Debugger\n7.5 release\n[...]\n(cuda-gdb) bt\n#0  0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 ()\n   from /lib/x86_64-linux-gnu/libpthread.so.0\n#1  0x00007fcaee409cdc in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#2  0x00007fcafa9d2455 in tensorflow::Notification::WaitForNotification() ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#3  0x00007fcafbe4e157 in tensorflow::DirectSession::WaitForNotification(tensorflow::DirectSession::RunState*, long long) ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#4  0x00007fcafbe499ef in tensorflow::DirectSession::Run(tensorflow::RunOptions const&, std::vector<std::pair<std::string, tensorflow::Tensor>, std::allocator<std::pair<std::string, tensorflow::Tensor> > > const&, std::vector<std::string, std::allocator<std::string> > const&, std::vector<std::string, std::allocator<std::string> > const&, std::vector<tensorflow::Tensor, std::allocator<tensorflow::Tensor> >*, tensorflow::RunMetadata*) ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#5  0x00007fcafbe49291 in tensorflow::DirectSession::Run(std::vector<std::pair<std::string, tensorflow::Tensor>, std::allocator<std::pair<std::string, tensorflow::Tensor> > > const&, std::vector<std::string, std::allocator<std::string> > const&, std::vector<std::string, std::allocator<std::string> > const&, std::vector<tensorflow::Tensor, std::allocator<tensorflow::Tensor> >*) () from /home/ryan/src/tensorflow/_python_build/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007fcafc0a5894 in TF_Run_Helper(TF_Session*, char const*, TF_Buffer const*, char const**, TF_Tensor**, int, char const**, TF_Tensor**, int, char const**, int, TF_Buffer*, TF_Status---Type <return> to continue, or q <return> to quit---q\nQuit\n(cuda-gdb) info threads\n  Id   Target Id         Frame\n  10   Thread 0x7fcb11450700 (LWP 12373) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  9    Thread 0x7fcad0d66700 (LWP 12374) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  8    Thread 0x7fcacbfff700 (LWP 12375) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  7    Thread 0x7fcacb7fe700 (LWP 12376) \"python\" 0x00007fcb151b988d in poll ()\n   from /lib/x86_64-linux-gnu/libc.so.6\n  6    Thread 0x7fcabffff700 (LWP 12377) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  5    Thread 0x7fcabf7fe700 (LWP 12378) \"python\" 0x00007fcb15495149 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  4    Thread 0x7fcabeffd700 (LWP 12379) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n  3    Thread 0x7fcabe7fc700 (LWP 12380) \"python\" 0x00007fcae1280e5f in ?? ()\n   from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n  2    Thread 0x7fcabdffb700 (LWP 12381) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n* 1    Thread 0x7fcb1589e700 (LWP 12367) \"python\" 0x00007fcb15494da0 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0\n(cuda-gdb) thread 3\n[Switching to thread 3 (Thread 0x7fcabe7fc700 (LWP 12380))]\n#0  0x00007fcae1280e5f in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n(cuda-gdb) bt\n#0  0x00007fcae1280e5f in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#1  0x00007fcae159fdcd in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#2  0x00007fcae1595f75 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#3  0x00007fcae1537423 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#4  0x00007fcae151f416 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#5  0x00007fcae1503a3d in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#6  0x00007fcae15244be in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#7  0x00007fcae1527932 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#8  0x00007fcae151ee1f in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#9  0x00007fcae14fb6c4 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#10 0x00007fcae14fca7d in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#11 0x00007fcae1351204 in cuMemGetAttribute_v2 () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#12 0x00007fcae1351bfe in cuMemGetAttribute_v2 () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#13 0x00007fcae143f8a0 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#14 0x00007fcae143fbb0 in cudbgGetAPIVersion () from /usr/lib/x86_64-linux-gnu/libcuda.so.1\n#15 0x00007fcaee6fe52d in cudaGetExportTable ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/../../_solib_local/_U_S_Sthird_Uparty_Sgpus_Scuda_Ccudart___Uthird_Uparty_Sgpus_Scuda_Slib64/libcudart.so.7.5\n#16 0x00007fcaee6f2ba0 in cudaGetExportTable ()\n   from /home/ryan/src/tensorflow/_python_build/tensorflow/python/../../_solib_local/_U_S_Sthird_Uparty_Sgpus_Scuda_Ccudart___Uthird_Uparty_Sgpus_Scuda_Slib64/libcudart.so.7.5\n#17 0x00007fcaee6fd796 in cudaGetExportTable ()\n---Type <return> to continue, or q <return> to quit---q\n from /home/ryan/src/tensorflow/_python_build/tQuit\n(cuda-gdb)\n```\n\nSo it looks like it's waiting for a GPU compilation. nvidia-smi doesn't make it seem like it's working hard though:\n\n```\n0 ryan@gpu:~$ nvidia-smi\nWed Apr 13 16:13:25 2016\n+------------------------------------------------------+\n| NVIDIA-SMI 352.39     Driver Version: 352.39         |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 750 Ti  On   | 0000:01:00.0      On |                  N/A |\n| 42%   29C    P0     2W /  52W |    898MiB /  2044MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0       652    G   /usr/bin/X                                     135MiB |\n|    0      1143    G   compiz                                          52MiB |\n|    0     12367    C   /home/ryan/src/python-local/bin/python         700MiB |\n+-----------------------------------------------------------------------------+\n```\n\nHere is a partial list of tests that ran in hundreds of seconds:\n\n```\n//tensorflow/python:argmax_op_test                                       PASSED in 301.2s\n//tensorflow/python:attention_ops_test                                   PASSED in 303.4s\n//tensorflow/python:bias_op_test                                         PASSED in 317.5s\n//tensorflow/python:cast_op_test                                         PASSED in 318.2s\n//tensorflow/python:concat_op_test                                       PASSED in 321.0s\n//tensorflow/python:constant_op_test                                     PASSED in 308.4s\n//tensorflow/python:control_flow_ops_py_test                             PASSED in 321.2s\n//tensorflow/python:conv_ops_test                                        PASSED in 330.7s\n//tensorflow/python:dense_update_ops_test                                PASSED in 307.6s\n//tensorflow/python:depthtospace_op_test                                 PASSED in 323.4s\n//tensorflow/python:fft_ops_test                                         PASSED in 343.8s\n//tensorflow/python:gather_nd_op_test                                    PASSED in 317.7s\n//tensorflow/python:gather_op_test                                       PASSED in 315.2s\n//tensorflow/python:gradient_checker_test                                PASSED in 288.4s\n//tensorflow/python:gradients_test                                       PASSED in 317.1s\n//tensorflow/python:graph_util_test                                      PASSED in 304.8s\n//tensorflow/python:image_grad_test                                      PASSED in 296.9s\n//tensorflow/python:image_ops_test                                       PASSED in 301.3s\n//tensorflow/python:init_ops_test                                        PASSED in 317.3s\n//tensorflow/python:math_grad_test                                       PASSED in 317.3s\n//tensorflow/python:math_ops_test                                        PASSED in 368.2s\n//tensorflow/python:matmul_op_test                                       PASSED in 319.3s\n//tensorflow/python:nn_test                                              PASSED in 338.6s\n//tensorflow/python:numerics_test                                        PASSED in 310.5s\n//tensorflow/python:one_hot_op_test                                      PASSED in 306.0s\n//tensorflow/python:pack_op_test                                         PASSED in 318.6s\n//tensorflow/python:pad_op_test                                          PASSED in 320.0s\n//tensorflow/python:pooling_ops_test                                     PASSED in 333.5s\n//tensorflow/python:random_ops_test                                      PASSED in 325.2s\n//tensorflow/python:reduction_ops_test                                   PASSED in 313.2s\n//tensorflow/python:relu_op_test                                         PASSED in 308.5s\n//tensorflow/python:reverse_sequence_op_test                             PASSED in 304.1s\n//tensorflow/python:rnn_test                                             PASSED in 371.4s\n//tensorflow/python:saver_test                                           PASSED in 305.0s\n//tensorflow/python:scatter_ops_test                                     PASSED in 344.2s\n//tensorflow/python:server_lib_test                                      PASSED in 315.3s\n//tensorflow/python:session_manager_test                                 PASSED in 342.9s\n//tensorflow/python:shape_ops_test                                       PASSED in 312.7s\n//tensorflow/python:slice_op_test                                        PASSED in 429.0s\n//tensorflow/python:softmax_op_test                                      PASSED in 303.4s\n//tensorflow/python:softplus_op_test                                     PASSED in 314.8s\n//tensorflow/python:softsign_op_test                                     PASSED in 313.2s\n//tensorflow/python:spacetodepth_op_test                                 PASSED in 315.3s\n//tensorflow/python:sparse_tensor_dense_matmul_grad_test                 PASSED in 299.8s\n//tensorflow/python:sparse_tensor_dense_matmul_op_test                   PASSED in 319.6s\n//tensorflow/python:sparse_xent_op_test                                  PASSED in 318.2s\n//tensorflow/python:split_op_test                                        PASSED in 302.2s\n//tensorflow/python:stack_ops_test                                       PASSED in 317.1s\n//tensorflow/python:supervisor_test                                      PASSED in 327.9s\n//tensorflow/python:template_test                                        PASSED in 302.0s\n//tensorflow/python:tensor_array_ops_test                                PASSED in 313.5s\n//tensorflow/python:training_ops_test                                    PASSED in 312.4s\n//tensorflow/python:transpose_op_test                                    PASSED in 303.2s\n//tensorflow/python:unpack_op_test                                       PASSED in 299.1s\n//tensorflow/python:variable_ops_test                                    PASSED in 317.2s\n//tensorflow/python:cwise_ops_test                                      TIMEOUT in 505.0s\n//tensorflow/python:xent_op_test                                        TIMEOUT in 505.0s\n//tensorflow/python:depthwise_conv_op_test                               FAILED in 304.2s\n//tensorflow/python:function_test                                        FAILED in 309.4s\n//tensorflow/python:session_test                                         FAILED in 320.8s\n```\n"}
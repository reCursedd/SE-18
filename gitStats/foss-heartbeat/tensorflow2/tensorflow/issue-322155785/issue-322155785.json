{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19214", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19214/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19214/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19214/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19214", "id": 322155785, "node_id": "MDU6SXNzdWUzMjIxNTU3ODU=", "number": 19214, "title": "for loop not working in tf.contrib.autograph", "user": {"login": "sven1977", "id": 5839854, "node_id": "MDQ6VXNlcjU4Mzk4NTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/5839854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sven1977", "html_url": "https://github.com/sven1977", "followers_url": "https://api.github.com/users/sven1977/followers", "following_url": "https://api.github.com/users/sven1977/following{/other_user}", "gists_url": "https://api.github.com/users/sven1977/gists{/gist_id}", "starred_url": "https://api.github.com/users/sven1977/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sven1977/subscriptions", "organizations_url": "https://api.github.com/users/sven1977/orgs", "repos_url": "https://api.github.com/users/sven1977/repos", "events_url": "https://api.github.com/users/sven1977/events{/privacy}", "received_events_url": "https://api.github.com/users/sven1977/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 969831806, "node_id": "MDU6TGFiZWw5Njk4MzE4MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/WIP", "name": "WIP", "color": "f4c77f", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-05-11T03:32:42Z", "updated_at": "2018-11-20T07:53:14Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>The following example for autograph is not working (see my system-info below):</p>\n<pre><code>from tensorflow.contrib import autograph\n\ndef computation():\n    for k in range(4):\n        print(k)\n    return tf.no_op()\n\ncomputation_autographd = autograph.to_graph(computation, verbose=True)\n</code></pre>\n<p>If I remove the for loop, it works fine.<br>\nWith the loop, it fails with:</p>\n<pre><code>File \"/opt/project/examples/_dict_in_autograph_example.py\", line 66, in &lt;module&gt;\nverbose=True)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/impl/api.py\", line 245, in to_graph\n    compiled_node, compiled_src = compiler.ast_to_object(module)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/pyct/compiler.py\", line 75, in ast_to_object\n    return imp.load_source(module_name, f.name), source\n  File \"/usr/lib/python3.5/imp.py\", line 172, in load_source\n    module = _load(spec)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 693, in _load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 673, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 661, in exec_module\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 767, in get_code\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 727, in source_to_code\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\n  File \"/tmp/tmpqdvecllf.py\", line 21\n    () = __ops.for_loop(autograph_utils.dynamic_builtin(range, 4),\n       ^\nSyntaxError: can't assign to ()\n\nProcess finished with exit code 1\n</code></pre>\n<p>python3 --version<br>\nPython 3.5.2</p>\n<p>python3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"<br>\nv1.8.0-0-g93bc2e2072 1.8.0</p>\n<p>== cat /etc/issue ===============================================<br>\nLinux 5a7b67a966f3 4.9.87-linuxkit-aufs <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Wed Mar 14 15:12:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION=\"16.04.3 LTS (Xenial Xerus)\"<br>\nVERSION_ID=\"16.04\"<br>\nVERSION_CODENAME=xenial</p>\n<p>== are we in docker =============================================<br>\nYes</p>\n<p>== compiler =====================================================<br>\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>\nCopyright (C) 2015 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux 5a7b67a966f3 4.9.87-linuxkit-aufs <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Wed Mar 14 15:12:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.8.0<br>\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072<br>\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072<br>\nSanity check: array([1], dtype=int32)</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH is unset<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\n./tf_env_collect.sh: line 105: nvidia-smi: command not found</p>\n<p>== cuda libs  ===================================================</p>", "body_text": "The following example for autograph is not working (see my system-info below):\nfrom tensorflow.contrib import autograph\n\ndef computation():\n    for k in range(4):\n        print(k)\n    return tf.no_op()\n\ncomputation_autographd = autograph.to_graph(computation, verbose=True)\n\nIf I remove the for loop, it works fine.\nWith the loop, it fails with:\nFile \"/opt/project/examples/_dict_in_autograph_example.py\", line 66, in <module>\nverbose=True)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/impl/api.py\", line 245, in to_graph\n    compiled_node, compiled_src = compiler.ast_to_object(module)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/pyct/compiler.py\", line 75, in ast_to_object\n    return imp.load_source(module_name, f.name), source\n  File \"/usr/lib/python3.5/imp.py\", line 172, in load_source\n    module = _load(spec)\n  File \"<frozen importlib._bootstrap>\", line 693, in _load\n  File \"<frozen importlib._bootstrap>\", line 673, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 661, in exec_module\n  File \"<frozen importlib._bootstrap_external>\", line 767, in get_code\n  File \"<frozen importlib._bootstrap_external>\", line 727, in source_to_code\n  File \"<frozen importlib._bootstrap>\", line 222, in _call_with_frames_removed\n  File \"/tmp/tmpqdvecllf.py\", line 21\n    () = __ops.for_loop(autograph_utils.dynamic_builtin(range, 4),\n       ^\nSyntaxError: can't assign to ()\n\nProcess finished with exit code 1\n\npython3 --version\nPython 3.5.2\npython3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nv1.8.0-0-g93bc2e2072 1.8.0\n== cat /etc/issue ===============================================\nLinux 5a7b67a966f3 4.9.87-linuxkit-aufs #1 SMP Wed Mar 14 15:12:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"16.04.3 LTS (Xenial Xerus)\"\nVERSION_ID=\"16.04\"\nVERSION_CODENAME=xenial\n== are we in docker =============================================\nYes\n== compiler =====================================================\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux 5a7b67a966f3 4.9.87-linuxkit-aufs #1 SMP Wed Mar 14 15:12:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.8.0\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072\nSanity check: array([1], dtype=int32)\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\n== cuda libs  ===================================================", "body": "The following example for autograph is not working (see my system-info below):\r\n\r\n```\r\nfrom tensorflow.contrib import autograph\r\n\r\ndef computation():\r\n    for k in range(4):\r\n        print(k)\r\n    return tf.no_op()\r\n\r\ncomputation_autographd = autograph.to_graph(computation, verbose=True)\r\n```\r\n\r\nIf I remove the for loop, it works fine.\r\nWith the loop, it fails with:\r\n\r\n```\r\nFile \"/opt/project/examples/_dict_in_autograph_example.py\", line 66, in <module>\r\nverbose=True)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/impl/api.py\", line 245, in to_graph\r\n    compiled_node, compiled_src = compiler.ast_to_object(module)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/pyct/compiler.py\", line 75, in ast_to_object\r\n    return imp.load_source(module_name, f.name), source\r\n  File \"/usr/lib/python3.5/imp.py\", line 172, in load_source\r\n    module = _load(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 693, in _load\r\n  File \"<frozen importlib._bootstrap>\", line 673, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 661, in exec_module\r\n  File \"<frozen importlib._bootstrap_external>\", line 767, in get_code\r\n  File \"<frozen importlib._bootstrap_external>\", line 727, in source_to_code\r\n  File \"<frozen importlib._bootstrap>\", line 222, in _call_with_frames_removed\r\n  File \"/tmp/tmpqdvecllf.py\", line 21\r\n    () = __ops.for_loop(autograph_utils.dynamic_builtin(range, 4),\r\n       ^\r\nSyntaxError: can't assign to ()\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\npython3 --version\r\nPython 3.5.2\r\n\r\npython3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\nv1.8.0-0-g93bc2e2072 1.8.0\r\n\r\n== cat /etc/issue ===============================================\r\nLinux 5a7b67a966f3 4.9.87-linuxkit-aufs #1 SMP Wed Mar 14 15:12:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"16.04.3 LTS (Xenial Xerus)\"\r\nVERSION_ID=\"16.04\"\r\nVERSION_CODENAME=xenial\r\n\r\n== are we in docker =============================================\r\nYes\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux 5a7b67a966f3 4.9.87-linuxkit-aufs #1 SMP Wed Mar 14 15:12:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.8.0\r\ntf.GIT_VERSION = v1.8.0-0-g93bc2e2072\r\ntf.COMPILER_VERSION = v1.8.0-0-g93bc2e2072\r\nSanity check: array([1], dtype=int32)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\r\n\r\n== cuda libs  ==================================================="}
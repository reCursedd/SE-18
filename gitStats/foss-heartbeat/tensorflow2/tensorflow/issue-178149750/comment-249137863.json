{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/249137863", "html_url": "https://github.com/tensorflow/tensorflow/issues/4495#issuecomment-249137863", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4495", "id": 249137863, "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTEzNzg2Mw==", "user": {"login": "lingz", "id": 3147213, "node_id": "MDQ6VXNlcjMxNDcyMTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/3147213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lingz", "html_url": "https://github.com/lingz", "followers_url": "https://api.github.com/users/lingz/followers", "following_url": "https://api.github.com/users/lingz/following{/other_user}", "gists_url": "https://api.github.com/users/lingz/gists{/gist_id}", "starred_url": "https://api.github.com/users/lingz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lingz/subscriptions", "organizations_url": "https://api.github.com/users/lingz/orgs", "repos_url": "https://api.github.com/users/lingz/repos", "events_url": "https://api.github.com/users/lingz/events{/privacy}", "received_events_url": "https://api.github.com/users/lingz/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-23T08:51:06Z", "updated_at": "2016-09-23T08:51:06Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=15736910\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zheng-xq\">@zheng-xq</a> for your response, so just to clarify things:</p>\n<p>For an RNN Cell, whose weights are pinned to CPU but ops executed on GPU, the cell will be called multiple times under <code>dynamic_rnn</code> with <code>tf.python.ops.control_flow_ops.while_loop</code>. In this case, it would try copy the weights on every iteration. The correct approach to this, is to modify the <code>RNNCell</code> class, and modify the weight variables to use an <code>tf.identity</code> on the get_variable, is that correct?</p>", "body_text": "Thanks @zheng-xq for your response, so just to clarify things:\nFor an RNN Cell, whose weights are pinned to CPU but ops executed on GPU, the cell will be called multiple times under dynamic_rnn with tf.python.ops.control_flow_ops.while_loop. In this case, it would try copy the weights on every iteration. The correct approach to this, is to modify the RNNCell class, and modify the weight variables to use an tf.identity on the get_variable, is that correct?", "body": "Thanks @zheng-xq for your response, so just to clarify things:\n\nFor an RNN Cell, whose weights are pinned to CPU but ops executed on GPU, the cell will be called multiple times under `dynamic_rnn` with `tf.python.ops.control_flow_ops.while_loop`. In this case, it would try copy the weights on every iteration. The correct approach to this, is to modify the `RNNCell` class, and modify the weight variables to use an `tf.identity` on the get_variable, is that correct?\n"}
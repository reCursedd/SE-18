{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19393", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19393/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19393/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19393/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19393", "id": 324485913, "node_id": "MDU6SXNzdWUzMjQ0ODU5MTM=", "number": 19393, "title": "Build Tensorflow-master with sycl support - error computecpp", "user": {"login": "ferlix9o", "id": 39407775, "node_id": "MDQ6VXNlcjM5NDA3Nzc1", "avatar_url": "https://avatars0.githubusercontent.com/u/39407775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ferlix9o", "html_url": "https://github.com/ferlix9o", "followers_url": "https://api.github.com/users/ferlix9o/followers", "following_url": "https://api.github.com/users/ferlix9o/following{/other_user}", "gists_url": "https://api.github.com/users/ferlix9o/gists{/gist_id}", "starred_url": "https://api.github.com/users/ferlix9o/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ferlix9o/subscriptions", "organizations_url": "https://api.github.com/users/ferlix9o/orgs", "repos_url": "https://api.github.com/users/ferlix9o/repos", "events_url": "https://api.github.com/users/ferlix9o/events{/privacy}", "received_events_url": "https://api.github.com/users/ferlix9o/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-05-18T17:05:10Z", "updated_at": "2018-10-18T09:43:36Z", "closed_at": "2018-05-20T00:14:26Z", "author_association": "NONE", "body_html": "<ul>\n<li>Ubuntu 18.04</li>\n<li>TensorFlow installed from source 1.80</li>\n<li>Python version 2.7</li>\n<li>Bazel version 0.13.0</li>\n<li>GCC/Compiler 7.3</li>\n<li>OpenCL 1.2 AMD-APP</li>\n<li>AMD Vega FE</li>\n<li>bazel build --config=sycl --verbose_failures --test_timeout 1600 //tensorflow/tools/pip_package:build_pip_package</li>\n</ul>\n<p>I am trying to compile Tensorflow for my amd GPU, when i set it to --config=sycl it fails with the error :</p>\n<p><code>INFO: Found 1 target... ERROR: /home/frankie/Downloads/TENSORFLOW_BUILDs/tensorflow/tensorflow/contrib/tensor_forest/hybrid/BUILD:72:1: C++ compilation of rule '//tensorflow/contrib/tensor_forest/hybrid:utils' failed (Exit 1): computecpp failed: error executing command (cd /home/frankie/.cache/bazel/_bazel_frankie/d74dd7347ab17909423a2342e3b420ce/execroot/org_tensorflow &amp;&amp; \\ exec env - \\ COMPUTECPP_TOOLKIT_PATH=/usr/local/computecpp \\ HOST_CXX_COMPILER=/usr/bin/g++ \\ HOST_C_COMPILER=/usr/bin/gcc \\ PWD=/proc/self/cwd \\ PYTHON_BIN_PATH=/usr/bin/python \\ PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\ TF_DOWNLOAD_CLANG=0 \\ TF_NEED_COMPUTECPP=1 \\ TF_NEED_CUDA=0 \\ TF_NEED_OPENCL_SYCL=1 \\ external/local_config_sycl/crosstool/computecpp -fPIE -fno-omit-frame-pointer -Wall -msse3 -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections '-std=c++11' -MD -MF bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.d '-frandom-seed=bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.o' -fPIC -DEIGEN_MPL2_ONLY -iquote . -iquote bazel-out/k8-opt/genfiles -iquote external/bazel_tools -iquote bazel-out/k8-opt/genfiles/external/bazel_tools -iquote external/eigen_archive -iquote bazel-out/k8-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/k8-opt/genfiles/external/local_config_sycl -iquote external/protobuf_archive -iquote bazel-out/k8-opt/genfiles/external/protobuf_archive -isystem external/eigen_archive -isystem bazel-out/k8-opt/genfiles/external/eigen_archive -isystem bazel-out/k8-opt/bin/external/eigen_archive -isystem external/local_config_sycl/sycl -isystem bazel-out/k8-opt/genfiles/external/local_config_sycl/sycl -isystem bazel-out/k8-opt/bin/external/local_config_sycl/sycl -isystem external/local_config_sycl/sycl/include -isystem bazel-out/k8-opt/genfiles/external/local_config_sycl/sycl/include -isystem bazel-out/k8-opt/bin/external/local_config_sycl/sycl/include -isystem external/protobuf_archive/src -isystem bazel-out/k8-opt/genfiles/external/protobuf_archive/src -isystem bazel-out/k8-opt/bin/external/protobuf_archive/src -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc -o bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.o) In file included from tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc:15: In file included from ./tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.h:20: In file included from ./tensorflow/core/framework/tensor.h:19: In file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1: In file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99: external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:163:19: error: no matching member function for call to 'get_access' auto ptr =buf.get_access&lt;cl::sycl::access::mode::discard_write, cl::sycl::access::target::host_buffer&gt;().get_pointer(); ~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:593:3: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'accessMode' get_access() { ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:611:53: note: candidate function template not viable: requires single argument 'cgh', but no arguments were provided accessor&lt;T, dimensions, accessMode, accessTarget&gt; get_access( ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:633:53: note: candidate function template not viable: requires 3 arguments, but 0 were provided accessor&lt;T, dimensions, accessMode, accessTarget&gt; get_access( ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:653:53: note: candidate function template not viable: requires at least 2 arguments, but 0 were provided accessor&lt;T, dimensions, accessMode, accessTarget&gt; get_access( ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:670:68: note: candidate function template not viable: requires 2 arguments, but 0 were provided accessor&lt;T, dimensions, accessMode, access::target::host_buffer&gt; get_access( ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:684:68: note: candidate function template not viable: requires at least argument 'range', but no arguments were provided accessor&lt;T, dimensions, accessMode, access::target::host_buffer&gt; get_access( ^ In file included from tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc:15: In file included from ./tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.h:20: In file included from ./tensorflow/core/framework/tensor.h:19: In file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1: In file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99: external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:61: error: no member named 'map_allocator' in namespace 'cl::sycl' auto src_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(static_cast&lt;void*&gt;(const_cast&lt;Index*&gt;(src))), cl::sycl::range&lt;1&gt;(n)); ~~~~~~~~~~^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:75: error: unexpected type name 'uint8_t': expected expression auto src_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(static_cast&lt;void*&gt;(const_cast&lt;Index*&gt;(src))), cl::sycl::range&lt;1&gt;(n)); ^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:86: warning: expression result unused [-Wunused-value] auto src_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(static_cast&lt;void*&gt;(const_cast&lt;Index*&gt;(src))), cl::sycl::range&lt;1&gt;(n)); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:31: error: expected unqualified-id auto src_acc =src_buf.template get_access&lt;cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer&gt;(cgh); ^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:107: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class templat e or class template partial specialization auto src_acc =src_buf.template get_access&lt;cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer&gt;(cgh); ~~~~~~~~~~~~~~~~~~~~~~~~~~^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:120: error: expected ';' at end of declaration auto src_acc =src_buf.template get_access&lt;cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer&gt;(cgh); ^ ; external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:62: error: no member named 'map_allocator' in namespace 'cl::sycl' auto dest_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(dst), cl::sycl::range&lt;1&gt;(n)); ~~~~~~~~~~^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:76: error: unexpected type name 'uint8_t': expected expression auto dest_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(dst), cl::sycl::range&lt;1&gt;(n)); ^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:87: warning: expression result unused [-Wunused-value] auto dest_buf = cl::sycl::buffer&lt;uint8_t, 1, cl::sycl::map_allocator&lt;uint8_t&gt; &gt;(static_cast&lt;uint8_t*&gt;(dst), cl::sycl::range&lt;1&gt;(n)); ^~~~~~~~~~~~~~~~~~~~~~~~~~ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:32: error: expected unqualified-id auto dst_acc =dest_buf.template get_access&lt;cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer&gt;(cgh); ^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:117: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class templat e or class template partial specialization auto dst_acc =dest_buf.template get_access&lt;cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer&gt;(cgh); ~~~~~~~~~~~~~~~~~~~~~~~~~~^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:130: error: expected ';' at end of declaration auto dst_acc =dest_buf.template get_access&lt;cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer&gt;(cgh); ^ ; 2 warnings and 11 errors generated. Target //tensorflow/tools/pip_package:build_pip_package failed to build INFO: Elapsed time: 8.290s, Critical Path: 7.83s INFO: 2 processes, local. FAILED: Build did NOT complete successfully</code></p>\n<p>It compile well without sycl.</p>\n<p>I have installed computecpp downloading the files from the official website (ComputeCpp-CE-0.8.0-Ubuntu.16.04-64bit.tar.gz) and coping them to /usr/local/computecpp, adding the variable with</p>\n<p><code>export COMPUTECPP_PACKAGE_ROOT_DIR=/usr/local/computecpp/</code></p>\n<p>am i missing something ?<br>\nthanks !</p>", "body_text": "Ubuntu 18.04\nTensorFlow installed from source 1.80\nPython version 2.7\nBazel version 0.13.0\nGCC/Compiler 7.3\nOpenCL 1.2 AMD-APP\nAMD Vega FE\nbazel build --config=sycl --verbose_failures --test_timeout 1600 //tensorflow/tools/pip_package:build_pip_package\n\nI am trying to compile Tensorflow for my amd GPU, when i set it to --config=sycl it fails with the error :\nINFO: Found 1 target... ERROR: /home/frankie/Downloads/TENSORFLOW_BUILDs/tensorflow/tensorflow/contrib/tensor_forest/hybrid/BUILD:72:1: C++ compilation of rule '//tensorflow/contrib/tensor_forest/hybrid:utils' failed (Exit 1): computecpp failed: error executing command (cd /home/frankie/.cache/bazel/_bazel_frankie/d74dd7347ab17909423a2342e3b420ce/execroot/org_tensorflow && \\ exec env - \\ COMPUTECPP_TOOLKIT_PATH=/usr/local/computecpp \\ HOST_CXX_COMPILER=/usr/bin/g++ \\ HOST_C_COMPILER=/usr/bin/gcc \\ PWD=/proc/self/cwd \\ PYTHON_BIN_PATH=/usr/bin/python \\ PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\ TF_DOWNLOAD_CLANG=0 \\ TF_NEED_COMPUTECPP=1 \\ TF_NEED_CUDA=0 \\ TF_NEED_OPENCL_SYCL=1 \\ external/local_config_sycl/crosstool/computecpp -fPIE -fno-omit-frame-pointer -Wall -msse3 -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections '-std=c++11' -MD -MF bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.d '-frandom-seed=bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.o' -fPIC -DEIGEN_MPL2_ONLY -iquote . -iquote bazel-out/k8-opt/genfiles -iquote external/bazel_tools -iquote bazel-out/k8-opt/genfiles/external/bazel_tools -iquote external/eigen_archive -iquote bazel-out/k8-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/k8-opt/genfiles/external/local_config_sycl -iquote external/protobuf_archive -iquote bazel-out/k8-opt/genfiles/external/protobuf_archive -isystem external/eigen_archive -isystem bazel-out/k8-opt/genfiles/external/eigen_archive -isystem bazel-out/k8-opt/bin/external/eigen_archive -isystem external/local_config_sycl/sycl -isystem bazel-out/k8-opt/genfiles/external/local_config_sycl/sycl -isystem bazel-out/k8-opt/bin/external/local_config_sycl/sycl -isystem external/local_config_sycl/sycl/include -isystem bazel-out/k8-opt/genfiles/external/local_config_sycl/sycl/include -isystem bazel-out/k8-opt/bin/external/local_config_sycl/sycl/include -isystem external/protobuf_archive/src -isystem bazel-out/k8-opt/genfiles/external/protobuf_archive/src -isystem bazel-out/k8-opt/bin/external/protobuf_archive/src -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc -o bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.o) In file included from tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc:15: In file included from ./tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.h:20: In file included from ./tensorflow/core/framework/tensor.h:19: In file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1: In file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99: external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:163:19: error: no matching member function for call to 'get_access' auto ptr =buf.get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::host_buffer>().get_pointer(); ~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:593:3: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'accessMode' get_access() { ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:611:53: note: candidate function template not viable: requires single argument 'cgh', but no arguments were provided accessor<T, dimensions, accessMode, accessTarget> get_access( ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:633:53: note: candidate function template not viable: requires 3 arguments, but 0 were provided accessor<T, dimensions, accessMode, accessTarget> get_access( ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:653:53: note: candidate function template not viable: requires at least 2 arguments, but 0 were provided accessor<T, dimensions, accessMode, accessTarget> get_access( ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:670:68: note: candidate function template not viable: requires 2 arguments, but 0 were provided accessor<T, dimensions, accessMode, access::target::host_buffer> get_access( ^ external/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:684:68: note: candidate function template not viable: requires at least argument 'range', but no arguments were provided accessor<T, dimensions, accessMode, access::target::host_buffer> get_access( ^ In file included from tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc:15: In file included from ./tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.h:20: In file included from ./tensorflow/core/framework/tensor.h:19: In file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1: In file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99: external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:61: error: no member named 'map_allocator' in namespace 'cl::sycl' auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n)); ~~~~~~~~~~^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:75: error: unexpected type name 'uint8_t': expected expression auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n)); ^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:86: warning: expression result unused [-Wunused-value] auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n)); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:31: error: expected unqualified-id auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh); ^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:107: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class templat e or class template partial specialization auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh); ~~~~~~~~~~~~~~~~~~~~~~~~~~^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:120: error: expected ';' at end of declaration auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh); ^ ; external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:62: error: no member named 'map_allocator' in namespace 'cl::sycl' auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n)); ~~~~~~~~~~^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:76: error: unexpected type name 'uint8_t': expected expression auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n)); ^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:87: warning: expression result unused [-Wunused-value] auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n)); ^~~~~~~~~~~~~~~~~~~~~~~~~~ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:32: error: expected unqualified-id auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh); ^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:117: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class templat e or class template partial specialization auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh); ~~~~~~~~~~~~~~~~~~~~~~~~~~^ external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:130: error: expected ';' at end of declaration auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh); ^ ; 2 warnings and 11 errors generated. Target //tensorflow/tools/pip_package:build_pip_package failed to build INFO: Elapsed time: 8.290s, Critical Path: 7.83s INFO: 2 processes, local. FAILED: Build did NOT complete successfully\nIt compile well without sycl.\nI have installed computecpp downloading the files from the official website (ComputeCpp-CE-0.8.0-Ubuntu.16.04-64bit.tar.gz) and coping them to /usr/local/computecpp, adding the variable with\nexport COMPUTECPP_PACKAGE_ROOT_DIR=/usr/local/computecpp/\nam i missing something ?\nthanks !", "body": "\r\n- Ubuntu 18.04\r\n- TensorFlow installed from source 1.80\r\n- Python version 2.7\r\n- Bazel version 0.13.0\r\n- GCC/Compiler 7.3\r\n- OpenCL 1.2 AMD-APP \r\n- AMD Vega FE\r\n- bazel build --config=sycl --verbose_failures --test_timeout 1600 //tensorflow/tools/pip_package:build_pip_package\r\n\r\nI am trying to compile Tensorflow for my amd GPU, when i set it to --config=sycl it fails with the error :\r\n\r\n`\r\nINFO: Found 1 target...\r\nERROR: /home/frankie/Downloads/TENSORFLOW_BUILDs/tensorflow/tensorflow/contrib/tensor_forest/hybrid/BUILD:72:1: C++ compilation of rule '//tensorflow/contrib/tensor_forest/hybrid:utils' failed (Exit 1): computecpp failed: error executing command\r\n  (cd /home/frankie/.cache/bazel/_bazel_frankie/d74dd7347ab17909423a2342e3b420ce/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    COMPUTECPP_TOOLKIT_PATH=/usr/local/computecpp \\\r\n    HOST_CXX_COMPILER=/usr/bin/g++ \\\r\n    HOST_C_COMPILER=/usr/bin/gcc \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python \\\r\n    PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\\r\n    TF_DOWNLOAD_CLANG=0 \\\r\n    TF_NEED_COMPUTECPP=1 \\\r\n    TF_NEED_CUDA=0 \\\r\n    TF_NEED_OPENCL_SYCL=1 \\\r\n  external/local_config_sycl/crosstool/computecpp -fPIE -fno-omit-frame-pointer -Wall -msse3 -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections '-std=c++11' -MD -MF bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.d '-frandom-seed=bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.o' -fPIC -DEIGEN_MPL2_ONLY -iquote . -iquote bazel-out/k8-opt/genfiles -iquote external/bazel_tools -iquote bazel-out/k8-opt/genfiles/external/bazel_tools -iquote external/eigen_archive -iquote bazel-out/k8-opt/genfiles/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/k8-opt/genfiles/external/local_config_sycl -iquote external/protobuf_archive -iquote bazel-out/k8-opt/genfiles/external/protobuf_archive -isystem external/eigen_archive -isystem bazel-out/k8-opt/genfiles/external/eigen_archive -isystem bazel-out/k8-opt/bin/external/eigen_archive -isystem external/local_config_sycl/sycl -isystem bazel-out/k8-opt/genfiles/external/local_config_sycl/sycl -isystem bazel-out/k8-opt/bin/external/local_config_sycl/sycl -isystem external/local_config_sycl/sycl/include -isystem bazel-out/k8-opt/genfiles/external/local_config_sycl/sycl/include -isystem bazel-out/k8-opt/bin/external/local_config_sycl/sycl/include -isystem external/protobuf_archive/src -isystem bazel-out/k8-opt/genfiles/external/protobuf_archive/src -isystem bazel-out/k8-opt/bin/external/protobuf_archive/src -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc -o bazel-out/k8-opt/bin/tensorflow/contrib/tensor_forest/hybrid/_objs/utils/tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.pic.o)\r\nIn file included from tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc:15:\r\nIn file included from ./tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.h:20:\r\nIn file included from ./tensorflow/core/framework/tensor.h:19:\r\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:163:19: error: no matching member function for call to 'get_access'\r\n    auto ptr =buf.get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::host_buffer>().get_pointer();\r\n              ~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:593:3: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'accessMode'\r\n  get_access() {\r\n  ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:611:53: note: candidate function template not viable: requires single argument 'cgh', but no arguments were provided\r\n  accessor<T, dimensions, accessMode, accessTarget> get_access(\r\n                                                    ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:633:53: note: candidate function template not viable: requires 3 arguments, but 0 were provided\r\n  accessor<T, dimensions, accessMode, accessTarget> get_access(\r\n                                                    ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:653:53: note: candidate function template not viable: requires at least 2 arguments, but 0 were provided\r\n  accessor<T, dimensions, accessMode, accessTarget> get_access(\r\n                                                    ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:670:68: note: candidate function template not viable: requires 2 arguments, but 0 were provided\r\n  accessor<T, dimensions, accessMode, access::target::host_buffer> get_access(\r\n                                                                   ^\r\nexternal/local_config_sycl/crosstool/../sycl/include/SYCL/buffer.h:684:68: note: candidate function template not viable: requires at least argument 'range', but no arguments were provided\r\n  accessor<T, dimensions, accessMode, access::target::host_buffer> get_access(\r\n                                                                   ^\r\nIn file included from tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.cc:15:\r\nIn file included from ./tensorflow/contrib/tensor_forest/hybrid/core/ops/utils.h:20:\r\nIn file included from ./tensorflow/core/framework/tensor.h:19:\r\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:99:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:61: error: no member named 'map_allocator' in namespace 'cl::sycl'\r\n      auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\r\n                                                  ~~~~~~~~~~^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:75: error: unexpected type name 'uint8_t': expected expression\r\n      auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\r\n                                                                          ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:195:86: warning: expression result unused [-Wunused-value]\r\n      auto src_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(static_cast<void*>(const_cast<Index*>(src))), cl::sycl::range<1>(n));\r\n                                                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:31: error: expected unqualified-id\r\n        auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\r\n                              ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:107: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class templat\r\ne or class template partial specialization\r\n        auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\r\n                                                                                ~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:198:120: error: expected ';' at end of declaration\r\n        auto src_acc =src_buf.template get_access<cl::sycl::access::mode::read, cl::sycl::access::target::global_buffer>(cgh);\r\n                                                                                                                       ^\r\n                                                                                                                       ;\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:62: error: no member named 'map_allocator' in namespace 'cl::sycl'\r\n      auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\r\n                                                   ~~~~~~~~~~^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:76: error: unexpected type name 'uint8_t': expected expression\r\n      auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\r\n                                                                           ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:217:87: warning: expression result unused [-Wunused-value]\r\n      auto dest_buf = cl::sycl::buffer<uint8_t, 1, cl::sycl::map_allocator<uint8_t> >(static_cast<uint8_t*>(dst), cl::sycl::range<1>(n));\r\n                                                                                      ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:32: error: expected unqualified-id\r\n        auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\r\n                               ^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:117: error: nested name specifier 'cl::sycl::access::target::' for declaration does not refer into a class, class templat\r\ne or class template partial specialization\r\n        auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\r\n                                                                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceSycl.h:220:130: error: expected ';' at end of declaration\r\n        auto dst_acc =dest_buf.template get_access<cl::sycl::access::mode::discard_write, cl::sycl::access::target::global_buffer>(cgh);\r\n                                                                                                                                 ^\r\n                                                                                                                                 ;\r\n2 warnings and 11 errors generated.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 8.290s, Critical Path: 7.83s\r\nINFO: 2 processes, local.\r\nFAILED: Build did NOT complete successfully\r\n`\r\n\r\nIt compile well without sycl.\r\n\r\nI have installed computecpp downloading the files from the official website (ComputeCpp-CE-0.8.0-Ubuntu.16.04-64bit.tar.gz) and coping them to /usr/local/computecpp, adding the variable with \r\n\r\n`export COMPUTECPP_PACKAGE_ROOT_DIR=/usr/local/computecpp/`\r\n\r\nam i missing something ?\r\nthanks !"}
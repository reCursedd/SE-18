{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/386982287", "html_url": "https://github.com/tensorflow/tensorflow/issues/7162#issuecomment-386982287", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7162", "id": 386982287, "node_id": "MDEyOklzc3VlQ29tbWVudDM4Njk4MjI4Nw==", "user": {"login": "efeiefei", "id": 8653223, "node_id": "MDQ6VXNlcjg2NTMyMjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/8653223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/efeiefei", "html_url": "https://github.com/efeiefei", "followers_url": "https://api.github.com/users/efeiefei/followers", "following_url": "https://api.github.com/users/efeiefei/following{/other_user}", "gists_url": "https://api.github.com/users/efeiefei/gists{/gist_id}", "starred_url": "https://api.github.com/users/efeiefei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/efeiefei/subscriptions", "organizations_url": "https://api.github.com/users/efeiefei/orgs", "repos_url": "https://api.github.com/users/efeiefei/repos", "events_url": "https://api.github.com/users/efeiefei/events{/privacy}", "received_events_url": "https://api.github.com/users/efeiefei/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-07T07:28:39Z", "updated_at": "2018-05-07T07:28:39Z", "author_association": "NONE", "body_html": "<p>I have similar errors when quantize_nodes for <a href=\"https://github.com/tensorflow/tensor2tensor\">Tensor2Tensor Transformer</a> model.<br>\nIt's no problem after freeze_graph, it's also no problem with quantize_weights. But when I qutize_nodes, it will:</p>\n<pre><code>tensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1/eightbit' has inputs from different frames. The input 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1_eightbit/transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1/Enter/quantize' is in frame 'transformer/while/while_context'. The input 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/mul_1/eightbit/requantize' is in frame ''.\n</code></pre>\n<p>I have tried TF1.4 and TF1.7, and the error is the same.<br>\nCan anyone help me?</p>", "body_text": "I have similar errors when quantize_nodes for Tensor2Tensor Transformer model.\nIt's no problem after freeze_graph, it's also no problem with quantize_weights. But when I qutize_nodes, it will:\ntensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1/eightbit' has inputs from different frames. The input 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1_eightbit/transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1/Enter/quantize' is in frame 'transformer/while/while_context'. The input 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/mul_1/eightbit/requantize' is in frame ''.\n\nI have tried TF1.4 and TF1.7, and the error is the same.\nCan anyone help me?", "body": "I have similar errors when quantize_nodes for [Tensor2Tensor Transformer](https://github.com/tensorflow/tensor2tensor) model.\r\nIt's no problem after freeze_graph, it's also no problem with quantize_weights. But when I qutize_nodes, it will:\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: The node 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1/eightbit' has inputs from different frames. The input 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1_eightbit/transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/add_1/Enter/quantize' is in frame 'transformer/while/while_context'. The input 'transformer/while/body/parallel_0/body/decoder/layer_prepostprocess/layer_norm/mul_1/eightbit/requantize' is in frame ''.\r\n```\r\nI have tried TF1.4 and TF1.7, and the error is the same.\r\nCan anyone help me?\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/298273321", "html_url": "https://github.com/tensorflow/tensorflow/issues/7162#issuecomment-298273321", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7162", "id": 298273321, "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODI3MzMyMQ==", "user": {"login": "saria85", "id": 25624382, "node_id": "MDQ6VXNlcjI1NjI0Mzgy", "avatar_url": "https://avatars2.githubusercontent.com/u/25624382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saria85", "html_url": "https://github.com/saria85", "followers_url": "https://api.github.com/users/saria85/followers", "following_url": "https://api.github.com/users/saria85/following{/other_user}", "gists_url": "https://api.github.com/users/saria85/gists{/gist_id}", "starred_url": "https://api.github.com/users/saria85/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saria85/subscriptions", "organizations_url": "https://api.github.com/users/saria85/orgs", "repos_url": "https://api.github.com/users/saria85/repos", "events_url": "https://api.github.com/users/saria85/events{/privacy}", "received_events_url": "https://api.github.com/users/saria85/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-01T01:55:56Z", "updated_at": "2017-05-01T01:55:56Z", "author_association": "NONE", "body_html": "<p>hi</p>\n<p>I am getting this error when doing optimization</p>\n<p>ValueError: graph_def is invalid at node 'word_embeddings/Variable/Assign': Input tensor 'word_embeddings/Variable:0' Cannot convert a tensor of type float32 to an input of type float32_ref</p>\n<p>input_graph_def = tf.GraphDef()<br>\ncheckpoint = tf.train.get_checkpoint_state(model_dir)<br>\ninput_checkpoint = checkpoint.model_checkpoint_path</p>\n<pre><code>absolute_model_folder = \"/\".join(input_checkpoint.split('/')[:-1])\noutput_graph = absolute_model_folder + \"/frozen_model.pb\"\n\nwith tf.gfile.FastGFile(output_graph, 'rb') as f:\n    graph_def = tf.GraphDef()\n    graph_def.ParseFromString(f.read())\n    _ = tf.import_graph_def(graph_def, name='')\noutput_graph_def = optimize_for_inference_lib.optimize_for_inference(\n    graph_def,\n    [''],\n    [''],\n    tf.float32.as_datatype_enum)\n</code></pre>\n<p>any help is greatly appreciated</p>", "body_text": "hi\nI am getting this error when doing optimization\nValueError: graph_def is invalid at node 'word_embeddings/Variable/Assign': Input tensor 'word_embeddings/Variable:0' Cannot convert a tensor of type float32 to an input of type float32_ref\ninput_graph_def = tf.GraphDef()\ncheckpoint = tf.train.get_checkpoint_state(model_dir)\ninput_checkpoint = checkpoint.model_checkpoint_path\nabsolute_model_folder = \"/\".join(input_checkpoint.split('/')[:-1])\noutput_graph = absolute_model_folder + \"/frozen_model.pb\"\n\nwith tf.gfile.FastGFile(output_graph, 'rb') as f:\n    graph_def = tf.GraphDef()\n    graph_def.ParseFromString(f.read())\n    _ = tf.import_graph_def(graph_def, name='')\noutput_graph_def = optimize_for_inference_lib.optimize_for_inference(\n    graph_def,\n    [''],\n    [''],\n    tf.float32.as_datatype_enum)\n\nany help is greatly appreciated", "body": "hi\r\n\r\nI am getting this error when doing optimization\r\n\r\nValueError: graph_def is invalid at node 'word_embeddings/Variable/Assign': Input tensor 'word_embeddings/Variable:0' Cannot convert a tensor of type float32 to an input of type float32_ref\r\n\r\ninput_graph_def = tf.GraphDef()\r\n    checkpoint = tf.train.get_checkpoint_state(model_dir)\r\n    input_checkpoint = checkpoint.model_checkpoint_path\r\n\r\n    absolute_model_folder = \"/\".join(input_checkpoint.split('/')[:-1])\r\n    output_graph = absolute_model_folder + \"/frozen_model.pb\"\r\n\r\n    with tf.gfile.FastGFile(output_graph, 'rb') as f:\r\n        graph_def = tf.GraphDef()\r\n        graph_def.ParseFromString(f.read())\r\n        _ = tf.import_graph_def(graph_def, name='')\r\n    output_graph_def = optimize_for_inference_lib.optimize_for_inference(\r\n        graph_def,\r\n        [''],\r\n        [''],\r\n        tf.float32.as_datatype_enum)\r\n any help is greatly appreciated"}
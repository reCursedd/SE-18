{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17421", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17421/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17421/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17421/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17421", "id": 302154995, "node_id": "MDU6SXNzdWUzMDIxNTQ5OTU=", "number": 17421, "title": "Unreasonable prediction on test set with resnet_v2 for specific batch size", "user": {"login": "wooginawunan", "id": 22064873, "node_id": "MDQ6VXNlcjIyMDY0ODcz", "avatar_url": "https://avatars1.githubusercontent.com/u/22064873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wooginawunan", "html_url": "https://github.com/wooginawunan", "followers_url": "https://api.github.com/users/wooginawunan/followers", "following_url": "https://api.github.com/users/wooginawunan/following{/other_user}", "gists_url": "https://api.github.com/users/wooginawunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/wooginawunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wooginawunan/subscriptions", "organizations_url": "https://api.github.com/users/wooginawunan/orgs", "repos_url": "https://api.github.com/users/wooginawunan/repos", "events_url": "https://api.github.com/users/wooginawunan/events{/privacy}", "received_events_url": "https://api.github.com/users/wooginawunan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "derekjchow", "id": 1195088, "node_id": "MDQ6VXNlcjExOTUwODg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1195088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/derekjchow", "html_url": "https://github.com/derekjchow", "followers_url": "https://api.github.com/users/derekjchow/followers", "following_url": "https://api.github.com/users/derekjchow/following{/other_user}", "gists_url": "https://api.github.com/users/derekjchow/gists{/gist_id}", "starred_url": "https://api.github.com/users/derekjchow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/derekjchow/subscriptions", "organizations_url": "https://api.github.com/users/derekjchow/orgs", "repos_url": "https://api.github.com/users/derekjchow/repos", "events_url": "https://api.github.com/users/derekjchow/events{/privacy}", "received_events_url": "https://api.github.com/users/derekjchow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "derekjchow", "id": 1195088, "node_id": "MDQ6VXNlcjExOTUwODg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1195088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/derekjchow", "html_url": "https://github.com/derekjchow", "followers_url": "https://api.github.com/users/derekjchow/followers", "following_url": "https://api.github.com/users/derekjchow/following{/other_user}", "gists_url": "https://api.github.com/users/derekjchow/gists{/gist_id}", "starred_url": "https://api.github.com/users/derekjchow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/derekjchow/subscriptions", "organizations_url": "https://api.github.com/users/derekjchow/orgs", "repos_url": "https://api.github.com/users/derekjchow/repos", "events_url": "https://api.github.com/users/derekjchow/events{/privacy}", "received_events_url": "https://api.github.com/users/derekjchow/received_events", "type": "User", "site_admin": false}, {"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-03-05T02:47:21Z", "updated_at": "2018-05-10T01:06:28Z", "closed_at": "2018-05-10T01:06:28Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:  Ubuntu 16.04.3 LTS</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Binary from <a href=\"https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.9.0-cp35-cp35m-linux_x86_64.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.9.0-cp35-cp35m-linux_x86_64.whl</a></li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.3.0</li>\n<li><strong>Python version</strong>: 3.5.1+</li>\n<li><strong>Bazel version (if compiling from source)</strong>: /</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: /</li>\n<li><strong>CUDA/cuDNN version</strong>: V7.5.17</li>\n<li><strong>GPU model and memory</strong>: Tesla M40 12G</li>\n<li><strong>Exact command to reproduce</strong>: /</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I am using resnet_v2 provided in slim to train a classifier. However, there is an unexpected behaviour when I tried to get the predictions on test set and I am sure that I turned off the training mode by pass is_training as False.</p>\n<p>My model returned unreasonable prediction scores on specific testing mini batch size of 650 and 649.<br>\nI randomly checked several testing batch sizes (from 50 - 850, which my GPU can afford ), their predictions on same input data were all consistent with each other, except for size 650 and 649.  Actually even two identical patches in the mini batch had different scores when I am using batch size 650 and 649.  To verify the issue, I also tried to train the model with different input data and different training mini batch size. However, the problem is still there with the same weird mini batch size 650 and 649 :(.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Ubuntu 16.04.3 LTS\nTensorFlow installed from (source or binary): Binary from https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.9.0-cp35-cp35m-linux_x86_64.whl\nTensorFlow version (use command below): 1.3.0\nPython version: 3.5.1+\nBazel version (if compiling from source): /\nGCC/Compiler version (if compiling from source): /\nCUDA/cuDNN version: V7.5.17\nGPU model and memory: Tesla M40 12G\nExact command to reproduce: /\n\nDescribe the problem\nI am using resnet_v2 provided in slim to train a classifier. However, there is an unexpected behaviour when I tried to get the predictions on test set and I am sure that I turned off the training mode by pass is_training as False.\nMy model returned unreasonable prediction scores on specific testing mini batch size of 650 and 649.\nI randomly checked several testing batch sizes (from 50 - 850, which my GPU can afford ), their predictions on same input data were all consistent with each other, except for size 650 and 649.  Actually even two identical patches in the mini batch had different scores when I am using batch size 650 and 649.  To verify the issue, I also tried to train the model with different input data and different training mini batch size. However, the problem is still there with the same weird mini batch size 650 and 649 :(.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  Ubuntu 16.04.3 LTS\r\n- **TensorFlow installed from (source or binary)**: Binary from https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.9.0-cp35-cp35m-linux_x86_64.whl\r\n- **TensorFlow version (use command below)**: 1.3.0\r\n- **Python version**: 3.5.1+\r\n- **Bazel version (if compiling from source)**: /\r\n- **GCC/Compiler version (if compiling from source)**: / \r\n- **CUDA/cuDNN version**: V7.5.17\r\n- **GPU model and memory**: Tesla M40 12G\r\n- **Exact command to reproduce**: /\r\n\r\n### Describe the problem\r\nI am using resnet_v2 provided in slim to train a classifier. However, there is an unexpected behaviour when I tried to get the predictions on test set and I am sure that I turned off the training mode by pass is_training as False. \r\n\r\nMy model returned unreasonable prediction scores on specific testing mini batch size of 650 and 649. \r\nI randomly checked several testing batch sizes (from 50 - 850, which my GPU can afford ), their predictions on same input data were all consistent with each other, except for size 650 and 649.  Actually even two identical patches in the mini batch had different scores when I am using batch size 650 and 649.  To verify the issue, I also tried to train the model with different input data and different training mini batch size. However, the problem is still there with the same weird mini batch size 650 and 649 :(. \r\n\r\n"}
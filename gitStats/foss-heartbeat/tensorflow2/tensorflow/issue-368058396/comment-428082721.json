{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/428082721", "html_url": "https://github.com/tensorflow/tensorflow/issues/22828#issuecomment-428082721", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22828", "id": 428082721, "node_id": "MDEyOklzc3VlQ29tbWVudDQyODA4MjcyMQ==", "user": {"login": "xianqian1", "id": 43012862, "node_id": "MDQ6VXNlcjQzMDEyODYy", "avatar_url": "https://avatars2.githubusercontent.com/u/43012862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xianqian1", "html_url": "https://github.com/xianqian1", "followers_url": "https://api.github.com/users/xianqian1/followers", "following_url": "https://api.github.com/users/xianqian1/following{/other_user}", "gists_url": "https://api.github.com/users/xianqian1/gists{/gist_id}", "starred_url": "https://api.github.com/users/xianqian1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xianqian1/subscriptions", "organizations_url": "https://api.github.com/users/xianqian1/orgs", "repos_url": "https://api.github.com/users/xianqian1/repos", "events_url": "https://api.github.com/users/xianqian1/events{/privacy}", "received_events_url": "https://api.github.com/users/xianqian1/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-09T07:01:52Z", "updated_at": "2018-10-09T07:01:52Z", "author_association": "NONE", "body_html": "<p>self addressed:</p>\n<p>There are two versions of libm.so.6 in my aws ec2 instance. Since ec2 is a virtual machine, so the binary is built within the virtual environment using glibc 2.23 version and when running outside the virtual environment, it can not find that version.</p>\n<p>What i do is to find that version:</p>\n<pre><code>sudo find / -name \"libm.so.6\"\n\n/var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6\n/var/lib/docker/overlay2/fe4ce1d185e5ea59f770f70daf2d13bdbc78d26f5e48e541c3338dcea4ae835a/diff/lib/x86_64-linux-gnu/libm.so.6\n/lib64/libm.so.6\n/home/ec2-user/anaconda3/pkgs/gcc_impl_linux-64-7.3.0-habb00fd_1/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/pkgs/gcc_impl_linux-64-7.2.0-habb00fd_3/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/envs/tensorflow_p36/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/envs/theano_p36/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/envs/theano_p27/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/envs/tensorflow_p27/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n</code></pre>\n<p>then check version for each libm:</p>\n<pre><code>strings /var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6  | grep GLIBC_\n\nGLIBC_2.2.5\nGLIBC_2.4\nGLIBC_2.15\nGLIBC_2.18\nGLIBC_2.23\nGLIBC_PRIVATE\n</code></pre>\n<p>this is the version i need, and then add it to an existing ld_library_path:</p>\n<pre><code>sudo cp /var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6 /lib/\n</code></pre>\n<p>Then tensorflow_server works</p>", "body_text": "self addressed:\nThere are two versions of libm.so.6 in my aws ec2 instance. Since ec2 is a virtual machine, so the binary is built within the virtual environment using glibc 2.23 version and when running outside the virtual environment, it can not find that version.\nWhat i do is to find that version:\nsudo find / -name \"libm.so.6\"\n\n/var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6\n/var/lib/docker/overlay2/fe4ce1d185e5ea59f770f70daf2d13bdbc78d26f5e48e541c3338dcea4ae835a/diff/lib/x86_64-linux-gnu/libm.so.6\n/lib64/libm.so.6\n/home/ec2-user/anaconda3/pkgs/gcc_impl_linux-64-7.3.0-habb00fd_1/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/pkgs/gcc_impl_linux-64-7.2.0-habb00fd_3/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/envs/tensorflow_p36/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/envs/theano_p36/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/envs/theano_p27/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n/home/ec2-user/anaconda3/envs/tensorflow_p27/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\n\nthen check version for each libm:\nstrings /var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6  | grep GLIBC_\n\nGLIBC_2.2.5\nGLIBC_2.4\nGLIBC_2.15\nGLIBC_2.18\nGLIBC_2.23\nGLIBC_PRIVATE\n\nthis is the version i need, and then add it to an existing ld_library_path:\nsudo cp /var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6 /lib/\n\nThen tensorflow_server works", "body": "self addressed:\r\n\r\nThere are two versions of libm.so.6 in my aws ec2 instance. Since ec2 is a virtual machine, so the binary is built within the virtual environment using glibc 2.23 version and when running outside the virtual environment, it can not find that version. \r\n\r\nWhat i do is to find that version:\r\n\r\n```\r\nsudo find / -name \"libm.so.6\"\r\n\r\n/var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6\r\n/var/lib/docker/overlay2/fe4ce1d185e5ea59f770f70daf2d13bdbc78d26f5e48e541c3338dcea4ae835a/diff/lib/x86_64-linux-gnu/libm.so.6\r\n/lib64/libm.so.6\r\n/home/ec2-user/anaconda3/pkgs/gcc_impl_linux-64-7.3.0-habb00fd_1/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\r\n/home/ec2-user/anaconda3/pkgs/gcc_impl_linux-64-7.2.0-habb00fd_3/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\r\n/home/ec2-user/anaconda3/envs/tensorflow_p36/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\r\n/home/ec2-user/anaconda3/envs/theano_p36/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\r\n/home/ec2-user/anaconda3/envs/theano_p27/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\r\n/home/ec2-user/anaconda3/envs/tensorflow_p27/x86_64-conda_cos6-linux-gnu/sysroot/lib/libm.so.6\r\n```\r\n\r\nthen check version for each libm:\r\n\r\n```\r\nstrings /var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6  | grep GLIBC_\r\n\r\nGLIBC_2.2.5\r\nGLIBC_2.4\r\nGLIBC_2.15\r\nGLIBC_2.18\r\nGLIBC_2.23\r\nGLIBC_PRIVATE\r\n```\r\n\r\nthis is the version i need, and then add it to an existing ld_library_path:\r\n\r\n```\r\nsudo cp /var/lib/docker/overlay2/422e54cc5ac5921a6d8f8db67f40162ea497cdcd0e6ebd22bd86ec39e55b8397/diff/lib/x86_64-linux-gnu/libm.so.6 /lib/\r\n```\r\n\r\nThen tensorflow_server works\r\n"}
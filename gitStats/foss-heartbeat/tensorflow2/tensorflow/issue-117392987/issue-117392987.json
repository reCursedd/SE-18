{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/260", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/260/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/260/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/260/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/260", "id": 117392987, "node_id": "MDU6SXNzdWUxMTczOTI5ODc=", "number": 260, "title": "Error when building seqtoseq model", "user": {"login": "adder", "id": 706666, "node_id": "MDQ6VXNlcjcwNjY2Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/706666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adder", "html_url": "https://github.com/adder", "followers_url": "https://api.github.com/users/adder/followers", "following_url": "https://api.github.com/users/adder/following{/other_user}", "gists_url": "https://api.github.com/users/adder/gists{/gist_id}", "starred_url": "https://api.github.com/users/adder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adder/subscriptions", "organizations_url": "https://api.github.com/users/adder/orgs", "repos_url": "https://api.github.com/users/adder/repos", "events_url": "https://api.github.com/users/adder/events{/privacy}", "received_events_url": "https://api.github.com/users/adder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "ludimagister", "id": 15710643, "node_id": "MDQ6VXNlcjE1NzEwNjQz", "avatar_url": "https://avatars3.githubusercontent.com/u/15710643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ludimagister", "html_url": "https://github.com/ludimagister", "followers_url": "https://api.github.com/users/ludimagister/followers", "following_url": "https://api.github.com/users/ludimagister/following{/other_user}", "gists_url": "https://api.github.com/users/ludimagister/gists{/gist_id}", "starred_url": "https://api.github.com/users/ludimagister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ludimagister/subscriptions", "organizations_url": "https://api.github.com/users/ludimagister/orgs", "repos_url": "https://api.github.com/users/ludimagister/repos", "events_url": "https://api.github.com/users/ludimagister/events{/privacy}", "received_events_url": "https://api.github.com/users/ludimagister/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ludimagister", "id": 15710643, "node_id": "MDQ6VXNlcjE1NzEwNjQz", "avatar_url": "https://avatars3.githubusercontent.com/u/15710643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ludimagister", "html_url": "https://github.com/ludimagister", "followers_url": "https://api.github.com/users/ludimagister/followers", "following_url": "https://api.github.com/users/ludimagister/following{/other_user}", "gists_url": "https://api.github.com/users/ludimagister/gists{/gist_id}", "starred_url": "https://api.github.com/users/ludimagister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ludimagister/subscriptions", "organizations_url": "https://api.github.com/users/ludimagister/orgs", "repos_url": "https://api.github.com/users/ludimagister/repos", "events_url": "https://api.github.com/users/ludimagister/events{/privacy}", "received_events_url": "https://api.github.com/users/ludimagister/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2015-11-17T16:32:12Z", "updated_at": "2015-11-18T07:01:26Z", "closed_at": "2015-11-18T07:01:26Z", "author_association": "NONE", "body_html": "<p>Hi all,</p>\n<p>I'm trying to understand the seq2seq models defined in seq2seq.py in tensorflow. I use bits of code I copy from the translate.py example that comes with tensorflow. I keep getting the same error and really do not understand where it comes from.</p>\n<p>A minimal code example to reproduce the error:</p>\n<div class=\"highlight highlight-source-python\"><pre> <span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">from</span> tensorflow.models.rnn <span class=\"pl-k\">import</span> rnn_cell\n<span class=\"pl-k\">from</span> tensorflow.models.rnn <span class=\"pl-k\">import</span> seq2seq\n\nencoder_inputs <span class=\"pl-k\">=</span> []\ndecoder_inputs <span class=\"pl-k\">=</span> []\n<span class=\"pl-k\">for</span> i <span class=\"pl-k\">in</span> <span class=\"pl-v\">xrange</span>(<span class=\"pl-c1\">350</span>):  \n    encoder_inputs.append(tf.placeholder(tf.int32, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">None</span>],\n                                              <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>encoder<span class=\"pl-c1\">{0}</span><span class=\"pl-pds\">\"</span></span>.format(i)))\n\n<span class=\"pl-k\">for</span> i <span class=\"pl-k\">in</span> <span class=\"pl-v\">xrange</span>(<span class=\"pl-c1\">45</span>):\n    decoder_inputs.append(tf.placeholder(tf.int32, <span class=\"pl-v\">shape</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">None</span>],\n                                         <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>decoder<span class=\"pl-c1\">{0}</span><span class=\"pl-pds\">\"</span></span>.format(i)))\n\nmodel <span class=\"pl-k\">=</span> seq2seq.basic_rnn_seq2seq(encoder_inputs,\n                                  decoder_inputs,rnn_cell.BasicLSTMCell(<span class=\"pl-c1\">512</span>))</pre></div>\n<p>The error I get when evaluating the last line (I evaluated it interactively in the python interpreter):</p>\n<pre><code>&gt;&gt;&gt;  Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/tmp/py1053173el\", line 12, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/seq2seq.py\", line 82, in basic_rnn_seq2seq\n    _, enc_states = rnn.rnn(cell, encoder_inputs, dtype=dtype)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/rnn.py\", line 85, in rnn\n    output_state = cell(input_, state)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/rnn_cell.py\", line 161, in __call__\n    concat = linear.linear([inputs, h], 4 * self._num_units, True)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/linear.py\", line 32, in linear\n    raise ValueError(\"Linear is expecting 2D arguments: %s\" % str(shapes))\nValueError: Linear is expecting 2D arguments: [[None], [None, 512]]\n</code></pre>\n<p>I suspect the error comes from my side :)<br>\nOn a sidenote. The documentation and the tutorials are really great but the example code for the sequence to sequence model (the english to french translation example) is quite dense. You also have to jump a lot between files to understand what's going on. Me atleast got lost several times in the code.</p>\n<p>A minimal example (perhaps on some toy data) of constructing and training a basic seq2seq model would really be helpful here. :)</p>\n<p>Have a nice evening</p>", "body_text": "Hi all,\nI'm trying to understand the seq2seq models defined in seq2seq.py in tensorflow. I use bits of code I copy from the translate.py example that comes with tensorflow. I keep getting the same error and really do not understand where it comes from.\nA minimal code example to reproduce the error:\n import tensorflow as tf\nfrom tensorflow.models.rnn import rnn_cell\nfrom tensorflow.models.rnn import seq2seq\n\nencoder_inputs = []\ndecoder_inputs = []\nfor i in xrange(350):  \n    encoder_inputs.append(tf.placeholder(tf.int32, shape=[None],\n                                              name=\"encoder{0}\".format(i)))\n\nfor i in xrange(45):\n    decoder_inputs.append(tf.placeholder(tf.int32, shape=[None],\n                                         name=\"decoder{0}\".format(i)))\n\nmodel = seq2seq.basic_rnn_seq2seq(encoder_inputs,\n                                  decoder_inputs,rnn_cell.BasicLSTMCell(512))\nThe error I get when evaluating the last line (I evaluated it interactively in the python interpreter):\n>>>  Traceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/tmp/py1053173el\", line 12, in <module>\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/seq2seq.py\", line 82, in basic_rnn_seq2seq\n    _, enc_states = rnn.rnn(cell, encoder_inputs, dtype=dtype)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/rnn.py\", line 85, in rnn\n    output_state = cell(input_, state)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/rnn_cell.py\", line 161, in __call__\n    concat = linear.linear([inputs, h], 4 * self._num_units, True)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/linear.py\", line 32, in linear\n    raise ValueError(\"Linear is expecting 2D arguments: %s\" % str(shapes))\nValueError: Linear is expecting 2D arguments: [[None], [None, 512]]\n\nI suspect the error comes from my side :)\nOn a sidenote. The documentation and the tutorials are really great but the example code for the sequence to sequence model (the english to french translation example) is quite dense. You also have to jump a lot between files to understand what's going on. Me atleast got lost several times in the code.\nA minimal example (perhaps on some toy data) of constructing and training a basic seq2seq model would really be helpful here. :)\nHave a nice evening", "body": "Hi all,\n\nI'm trying to understand the seq2seq models defined in seq2seq.py in tensorflow. I use bits of code I copy from the translate.py example that comes with tensorflow. I keep getting the same error and really do not understand where it comes from.\n\nA minimal code example to reproduce the error:\n\n``` python\n import tensorflow as tf\nfrom tensorflow.models.rnn import rnn_cell\nfrom tensorflow.models.rnn import seq2seq\n\nencoder_inputs = []\ndecoder_inputs = []\nfor i in xrange(350):  \n    encoder_inputs.append(tf.placeholder(tf.int32, shape=[None],\n                                              name=\"encoder{0}\".format(i)))\n\nfor i in xrange(45):\n    decoder_inputs.append(tf.placeholder(tf.int32, shape=[None],\n                                         name=\"decoder{0}\".format(i)))\n\nmodel = seq2seq.basic_rnn_seq2seq(encoder_inputs,\n                                  decoder_inputs,rnn_cell.BasicLSTMCell(512))\n```\n\nThe error I get when evaluating the last line (I evaluated it interactively in the python interpreter):\n\n```\n>>>  Traceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/tmp/py1053173el\", line 12, in <module>\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/seq2seq.py\", line 82, in basic_rnn_seq2seq\n    _, enc_states = rnn.rnn(cell, encoder_inputs, dtype=dtype)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/rnn.py\", line 85, in rnn\n    output_state = cell(input_, state)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/rnn_cell.py\", line 161, in __call__\n    concat = linear.linear([inputs, h], 4 * self._num_units, True)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/models/rnn/linear.py\", line 32, in linear\n    raise ValueError(\"Linear is expecting 2D arguments: %s\" % str(shapes))\nValueError: Linear is expecting 2D arguments: [[None], [None, 512]]\n```\n\nI suspect the error comes from my side :)\nOn a sidenote. The documentation and the tutorials are really great but the example code for the sequence to sequence model (the english to french translation example) is quite dense. You also have to jump a lot between files to understand what's going on. Me atleast got lost several times in the code.\n\nA minimal example (perhaps on some toy data) of constructing and training a basic seq2seq model would really be helpful here. :)\n\nHave a nice evening\n"}
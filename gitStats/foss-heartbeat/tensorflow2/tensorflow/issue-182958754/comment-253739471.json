{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/253739471", "html_url": "https://github.com/tensorflow/tensorflow/issues/4960#issuecomment-253739471", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4960", "id": 253739471, "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzczOTQ3MQ==", "user": {"login": "qingzew", "id": 3603171, "node_id": "MDQ6VXNlcjM2MDMxNzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3603171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qingzew", "html_url": "https://github.com/qingzew", "followers_url": "https://api.github.com/users/qingzew/followers", "following_url": "https://api.github.com/users/qingzew/following{/other_user}", "gists_url": "https://api.github.com/users/qingzew/gists{/gist_id}", "starred_url": "https://api.github.com/users/qingzew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qingzew/subscriptions", "organizations_url": "https://api.github.com/users/qingzew/orgs", "repos_url": "https://api.github.com/users/qingzew/repos", "events_url": "https://api.github.com/users/qingzew/events{/privacy}", "received_events_url": "https://api.github.com/users/qingzew/received_events", "type": "User", "site_admin": false}, "created_at": "2016-10-14T08:26:14Z", "updated_at": "2016-10-14T08:27:27Z", "author_association": "NONE", "body_html": "<p>as described in <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1305406\" rel=\"nofollow\">https://bugzilla.redhat.com/show_bug.cgi?id=1305406</a> \uff0c my machine print like this:</p>\n<div class=\"highlight highlight-source-shell\"><pre>$ objdump -r -d /lib64/libc.so.6 <span class=\"pl-k\">|</span> grep -C 20 _int_free <span class=\"pl-k\">|</span> grep -C 10 cmpxchg <span class=\"pl-k\">|</span> head -21 <span class=\"pl-k\">|</span> grep -A 3 cmpxchg <span class=\"pl-k\">|</span> tail -1 <span class=\"pl-k\">|</span> (grep <span class=\"pl-s\"><span class=\"pl-pds\">'</span>%r<span class=\"pl-pds\">'</span></span> <span class=\"pl-k\">&amp;&amp;</span> <span class=\"pl-c1\">echo</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Your libc is likely buggy.<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">||</span> <span class=\"pl-c1\">echo</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Your libc looks OK.<span class=\"pl-pds\">\"</span></span>)\n   7ca3e:   48 85 c9                <span class=\"pl-c1\">test</span>   %rcx,%rcx\nYour libc is likely buggy.\n\n$ objdump -r -d /lib64/libc-2.17.so <span class=\"pl-k\">|</span> grep -C 20 _int_free <span class=\"pl-k\">|</span> grep -C 10 cmpxchg <span class=\"pl-k\">|</span> head -21\n   7ca14:   48 85 c9                <span class=\"pl-c1\">test</span>   %rcx,%rcx\n   7ca17:   74 09                   je     7ca22 <span class=\"pl-k\">&lt;</span>_int_free+0xe<span class=\"pl-k\">2&gt;</span>\n   7ca19:   8b 41 08                mov    0x8(%rcx),%eax\n   7ca1c:   c1 e8 04                shr    <span class=\"pl-smi\">$0</span>x4,%eax\n   7ca1f:   8d 70 fe                lea    -0x2(%rax),%esi\n   7ca22:   48 89 4b 10             mov    %rcx,0x10(%rbx)\n   7ca26:   48 89 c8                mov    %rcx,%rax\n   7ca29:   64 83 3c 25 18 00 00    cmpl   <span class=\"pl-smi\">$0</span>x0,%fs:0x18\n   7ca30:   00 00 \n   7ca32:   74 01                   je     7ca35 <span class=\"pl-k\">&lt;</span>_int_free+0xf<span class=\"pl-k\">5&gt;</span>\n   7ca34:   f0 48 0f b1 1a          lock cmpxchg %rbx,(%rdx)\n   7ca39:   48 39 c1                cmp    %rax,%rcx\n   7ca3c:   75 ca                   jne    7ca08 <span class=\"pl-k\">&lt;</span>_int_free+0xc<span class=\"pl-k\">8&gt;</span>\n   7ca3e:   48 85 c9                <span class=\"pl-c1\">test</span>   %rcx,%rcx\n   7ca41:   74 09                   je     7ca4c <span class=\"pl-k\">&lt;</span>_int_free+0x10c<span class=\"pl-k\">&gt;</span>\n   7ca43:   44 39 e6                cmp    %r12d,%esi\n   7ca46:   0f 85 b2 08 00 00       jne    7d2fe <span class=\"pl-k\">&lt;</span>_int_free+0x9be<span class=\"pl-k\">&gt;</span>\n   7ca4c:   48 83 c4 48             add    <span class=\"pl-smi\">$0</span>x48,%rsp\n   7ca50:   5b                      pop    %rbx\n   7ca51:   5d                      pop    %rbp\n   7ca52:   41 5c                   pop    %r12</pre></div>\n<p>as your say\uff0c this may be a bug of glibc, I will try <code>tcmalloc</code> in the future</p>", "body_text": "as described in https://bugzilla.redhat.com/show_bug.cgi?id=1305406 \uff0c my machine print like this:\n$ objdump -r -d /lib64/libc.so.6 | grep -C 20 _int_free | grep -C 10 cmpxchg | head -21 | grep -A 3 cmpxchg | tail -1 | (grep '%r' && echo \"Your libc is likely buggy.\" || echo \"Your libc looks OK.\")\n   7ca3e:   48 85 c9                test   %rcx,%rcx\nYour libc is likely buggy.\n\n$ objdump -r -d /lib64/libc-2.17.so | grep -C 20 _int_free | grep -C 10 cmpxchg | head -21\n   7ca14:   48 85 c9                test   %rcx,%rcx\n   7ca17:   74 09                   je     7ca22 <_int_free+0xe2>\n   7ca19:   8b 41 08                mov    0x8(%rcx),%eax\n   7ca1c:   c1 e8 04                shr    $0x4,%eax\n   7ca1f:   8d 70 fe                lea    -0x2(%rax),%esi\n   7ca22:   48 89 4b 10             mov    %rcx,0x10(%rbx)\n   7ca26:   48 89 c8                mov    %rcx,%rax\n   7ca29:   64 83 3c 25 18 00 00    cmpl   $0x0,%fs:0x18\n   7ca30:   00 00 \n   7ca32:   74 01                   je     7ca35 <_int_free+0xf5>\n   7ca34:   f0 48 0f b1 1a          lock cmpxchg %rbx,(%rdx)\n   7ca39:   48 39 c1                cmp    %rax,%rcx\n   7ca3c:   75 ca                   jne    7ca08 <_int_free+0xc8>\n   7ca3e:   48 85 c9                test   %rcx,%rcx\n   7ca41:   74 09                   je     7ca4c <_int_free+0x10c>\n   7ca43:   44 39 e6                cmp    %r12d,%esi\n   7ca46:   0f 85 b2 08 00 00       jne    7d2fe <_int_free+0x9be>\n   7ca4c:   48 83 c4 48             add    $0x48,%rsp\n   7ca50:   5b                      pop    %rbx\n   7ca51:   5d                      pop    %rbp\n   7ca52:   41 5c                   pop    %r12\nas your say\uff0c this may be a bug of glibc, I will try tcmalloc in the future", "body": "as described in https://bugzilla.redhat.com/show_bug.cgi?id=1305406 \uff0c my machine print like this:\n\n``` shell\n$ objdump -r -d /lib64/libc.so.6 | grep -C 20 _int_free | grep -C 10 cmpxchg | head -21 | grep -A 3 cmpxchg | tail -1 | (grep '%r' && echo \"Your libc is likely buggy.\" || echo \"Your libc looks OK.\")\n   7ca3e:   48 85 c9                test   %rcx,%rcx\nYour libc is likely buggy.\n\n$ objdump -r -d /lib64/libc-2.17.so | grep -C 20 _int_free | grep -C 10 cmpxchg | head -21\n   7ca14:   48 85 c9                test   %rcx,%rcx\n   7ca17:   74 09                   je     7ca22 <_int_free+0xe2>\n   7ca19:   8b 41 08                mov    0x8(%rcx),%eax\n   7ca1c:   c1 e8 04                shr    $0x4,%eax\n   7ca1f:   8d 70 fe                lea    -0x2(%rax),%esi\n   7ca22:   48 89 4b 10             mov    %rcx,0x10(%rbx)\n   7ca26:   48 89 c8                mov    %rcx,%rax\n   7ca29:   64 83 3c 25 18 00 00    cmpl   $0x0,%fs:0x18\n   7ca30:   00 00 \n   7ca32:   74 01                   je     7ca35 <_int_free+0xf5>\n   7ca34:   f0 48 0f b1 1a          lock cmpxchg %rbx,(%rdx)\n   7ca39:   48 39 c1                cmp    %rax,%rcx\n   7ca3c:   75 ca                   jne    7ca08 <_int_free+0xc8>\n   7ca3e:   48 85 c9                test   %rcx,%rcx\n   7ca41:   74 09                   je     7ca4c <_int_free+0x10c>\n   7ca43:   44 39 e6                cmp    %r12d,%esi\n   7ca46:   0f 85 b2 08 00 00       jne    7d2fe <_int_free+0x9be>\n   7ca4c:   48 83 c4 48             add    $0x48,%rsp\n   7ca50:   5b                      pop    %rbx\n   7ca51:   5d                      pop    %rbp\n   7ca52:   41 5c                   pop    %r12\n```\n\nas your say\uff0c this may be a bug of glibc, I will try `tcmalloc` in the future\n"}
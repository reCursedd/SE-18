{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/280391477", "html_url": "https://github.com/tensorflow/tensorflow/issues/7543#issuecomment-280391477", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7543", "id": 280391477, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDM5MTQ3Nw==", "user": {"login": "dchirikov", "id": 6017800, "node_id": "MDQ6VXNlcjYwMTc4MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6017800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dchirikov", "html_url": "https://github.com/dchirikov", "followers_url": "https://api.github.com/users/dchirikov/followers", "following_url": "https://api.github.com/users/dchirikov/following{/other_user}", "gists_url": "https://api.github.com/users/dchirikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dchirikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dchirikov/subscriptions", "organizations_url": "https://api.github.com/users/dchirikov/orgs", "repos_url": "https://api.github.com/users/dchirikov/repos", "events_url": "https://api.github.com/users/dchirikov/events{/privacy}", "received_events_url": "https://api.github.com/users/dchirikov/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-16T17:00:47Z", "updated_at": "2017-02-16T17:00:47Z", "author_association": "NONE", "body_html": "<p>Yes, you are right, it's gcc. I checked with strace. Despite expected PATH is reported, it has truncated set of directories:</p>\n<pre><code>\nexecve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archi\nve/src\", \"-I\", \"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include\", \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"b\nazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o\", \"/tmp/cclcHfUr.s\"], [\"_SPACE_= \"\n, \"_TARGET_SIZE_=64\", \"CUDAFE_FLAGS=\", \"_CUDART_=cudart\", \"LD_LIBRARY_PATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../\nlib:/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/\ngcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\", \"_TARGET_DIR_=\", \"TOP=external/local_config_cuda/crosstool/clang/bin/../../../c\nuda/bin/..\", \"PATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin:external/local_config_cuda/crosstool/clang/bi\nn/../../../cuda/bin/../nvvm/bin:external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin\"\n, \"_=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\", \"PWD=/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/execroot/tenso\nrflow\", \"INCLUDES=\\\"-Iexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include\\\"  \", \"SHLVL=2\", \"NVVMIR_LIBRARY_DIR=externa\nl/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../nvvm/libdevice\", \"PTXAS_FLAGS=\", \"LIBRARIES=  \\\"-Lexternal/local_config_cuda/cross\ntool/clang/bin/../../../cuda/bin/..//lib64/stubs\\\" \\\"-Lexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//lib64\\\"\", \"_THERE_=\nexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin\", \"_HERE_=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin\", \"\nCOLLECT_GCC=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\", \"COLLECT_GCC_OPTIONS='-std=c++11' '-c' '-isystem' 'external/local_config_cuda/c\nuda' '-isystem' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda' '-isystem' 'external/local_config_cuda/cuda/include' '\n-isystem' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include' '-isystem' 'external/bazel_tools/tools/cpp/gcc3' '-i\nquote' 'external/nccl_archive' '-iquote' 'bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive' '-iquote' 'external/local_config_cuda' \n'-iquote' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda' '-iquote' 'external/bazel_tools' '-iquote' 'bazel-out/local_linux\n-py3-opt/genfiles/external/bazel_tools' '-g0' '-fno-canonical-system-headers' '-fPIC' '-O2' '-I' '.' '-I' 'external/nccl_archive/src' '-I' 'ext\nernal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include' '-fpreprocessed' '-o' 'bazel-out/local_linux-py3-opt/bin/external/nc\ncl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o'\"]\n</code></pre>\n<p>So search path is limited to</p>\n<pre><code>PATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin:external/local_config_cuda/crosstool/clang/bi\nn/../../../cuda/bin/../nvvm/bin:external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin\"\n, \"_=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\"\n</code></pre>\n<p>and no <code>/usr/sbin</code> there</p>", "body_text": "Yes, you are right, it's gcc. I checked with strace. Despite expected PATH is reported, it has truncated set of directories:\n\nexecve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archi\nve/src\", \"-I\", \"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include\", \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"b\nazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o\", \"/tmp/cclcHfUr.s\"], [\"_SPACE_= \"\n, \"_TARGET_SIZE_=64\", \"CUDAFE_FLAGS=\", \"_CUDART_=cudart\", \"LD_LIBRARY_PATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../\nlib:/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/\ngcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\", \"_TARGET_DIR_=\", \"TOP=external/local_config_cuda/crosstool/clang/bin/../../../c\nuda/bin/..\", \"PATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin:external/local_config_cuda/crosstool/clang/bi\nn/../../../cuda/bin/../nvvm/bin:external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin\"\n, \"_=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\", \"PWD=/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/execroot/tenso\nrflow\", \"INCLUDES=\\\"-Iexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include\\\"  \", \"SHLVL=2\", \"NVVMIR_LIBRARY_DIR=externa\nl/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../nvvm/libdevice\", \"PTXAS_FLAGS=\", \"LIBRARIES=  \\\"-Lexternal/local_config_cuda/cross\ntool/clang/bin/../../../cuda/bin/..//lib64/stubs\\\" \\\"-Lexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//lib64\\\"\", \"_THERE_=\nexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin\", \"_HERE_=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin\", \"\nCOLLECT_GCC=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\", \"COLLECT_GCC_OPTIONS='-std=c++11' '-c' '-isystem' 'external/local_config_cuda/c\nuda' '-isystem' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda' '-isystem' 'external/local_config_cuda/cuda/include' '\n-isystem' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include' '-isystem' 'external/bazel_tools/tools/cpp/gcc3' '-i\nquote' 'external/nccl_archive' '-iquote' 'bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive' '-iquote' 'external/local_config_cuda' \n'-iquote' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda' '-iquote' 'external/bazel_tools' '-iquote' 'bazel-out/local_linux\n-py3-opt/genfiles/external/bazel_tools' '-g0' '-fno-canonical-system-headers' '-fPIC' '-O2' '-I' '.' '-I' 'external/nccl_archive/src' '-I' 'ext\nernal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include' '-fpreprocessed' '-o' 'bazel-out/local_linux-py3-opt/bin/external/nc\ncl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o'\"]\n\nSo search path is limited to\nPATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin:external/local_config_cuda/crosstool/clang/bi\nn/../../../cuda/bin/../nvvm/bin:external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin\"\n, \"_=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\"\n\nand no /usr/sbin there", "body": "Yes, you are right, it's gcc. I checked with strace. Despite expected PATH is reported, it has truncated set of directories:\r\n```\r\n\r\nexecve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archi\r\nve/src\", \"-I\", \"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include\", \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"b\r\nazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o\", \"/tmp/cclcHfUr.s\"], [\"_SPACE_= \"\r\n, \"_TARGET_SIZE_=64\", \"CUDAFE_FLAGS=\", \"_CUDART_=cudart\", \"LD_LIBRARY_PATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../\r\nlib:/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/\r\ngcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\", \"_TARGET_DIR_=\", \"TOP=external/local_config_cuda/crosstool/clang/bin/../../../c\r\nuda/bin/..\", \"PATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin:external/local_config_cuda/crosstool/clang/bi\r\nn/../../../cuda/bin/../nvvm/bin:external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin\"\r\n, \"_=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\", \"PWD=/local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/execroot/tenso\r\nrflow\", \"INCLUDES=\\\"-Iexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include\\\"  \", \"SHLVL=2\", \"NVVMIR_LIBRARY_DIR=externa\r\nl/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../nvvm/libdevice\", \"PTXAS_FLAGS=\", \"LIBRARIES=  \\\"-Lexternal/local_config_cuda/cross\r\ntool/clang/bin/../../../cuda/bin/..//lib64/stubs\\\" \\\"-Lexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//lib64\\\"\", \"_THERE_=\r\nexternal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin\", \"_HERE_=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin\", \"\r\nCOLLECT_GCC=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\", \"COLLECT_GCC_OPTIONS='-std=c++11' '-c' '-isystem' 'external/local_config_cuda/c\r\nuda' '-isystem' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda' '-isystem' 'external/local_config_cuda/cuda/include' '\r\n-isystem' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include' '-isystem' 'external/bazel_tools/tools/cpp/gcc3' '-i\r\nquote' 'external/nccl_archive' '-iquote' 'bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive' '-iquote' 'external/local_config_cuda' \r\n'-iquote' 'bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda' '-iquote' 'external/bazel_tools' '-iquote' 'bazel-out/local_linux\r\n-py3-opt/genfiles/external/bazel_tools' '-g0' '-fno-canonical-system-headers' '-fPIC' '-O2' '-I' '.' '-I' 'external/nccl_archive/src' '-I' 'ext\r\nernal/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/..//include' '-fpreprocessed' '-o' 'bazel-out/local_linux-py3-opt/bin/external/nc\r\ncl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o'\"]\r\n```\r\nSo search path is limited to \r\n```\r\nPATH=external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin:external/local_config_cuda/crosstool/clang/bi\r\nn/../../../cuda/bin/../nvvm/bin:external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin\"\r\n, \"_=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\"\r\n```\r\nand no `/usr/sbin` there"}
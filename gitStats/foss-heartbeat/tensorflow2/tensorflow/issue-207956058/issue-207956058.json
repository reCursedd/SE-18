{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7543", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7543/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7543/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7543/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7543", "id": 207956058, "node_id": "MDU6SXNzdWUyMDc5NTYwNTg=", "number": 7543, "title": "Error on building with non-system GCC: \"gcc: error trying to exec 'as': execvp: No such file or directory\"", "user": {"login": "dchirikov", "id": 6017800, "node_id": "MDQ6VXNlcjYwMTc4MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6017800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dchirikov", "html_url": "https://github.com/dchirikov", "followers_url": "https://api.github.com/users/dchirikov/followers", "following_url": "https://api.github.com/users/dchirikov/following{/other_user}", "gists_url": "https://api.github.com/users/dchirikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dchirikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dchirikov/subscriptions", "organizations_url": "https://api.github.com/users/dchirikov/orgs", "repos_url": "https://api.github.com/users/dchirikov/repos", "events_url": "https://api.github.com/users/dchirikov/events{/privacy}", "received_events_url": "https://api.github.com/users/dchirikov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2017-02-15T22:59:50Z", "updated_at": "2017-06-16T21:16:06Z", "closed_at": "2017-06-16T21:16:06Z", "author_association": "NONE", "body_html": "<h1>Description</h1>\n<p>Hi,</p>\n<p>I am trying to compile TensorFlow with non-default GCC. 5.4.0, and get follwing error:</p>\n<pre><code>gcc: error trying to exec 'as': execvp: No such file or directory\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/nccl_archive/BUILD.bazel:33:1: output 'external/nccl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o' was not created.\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/nccl_archive/BUILD.bazel:33:1: not all outputs were created or valid.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n</code></pre>\n<h1>Environment</h1>\n<pre><code>$ cat /etc/redhat-release \nCentOS Linux release 7.3.1611 (AltArch)\n\n$ uname -a\nLinux power004.cluster 3.10.0-514.6.1.el7.ppc64le #1 SMP Thu Jan 19 14:34:54 GMT 2017 ppc64le ppc64le ppc64le GNU/Linux\n\n$ ls -l /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcud*\n-rw-r--r-- 1 root root 559800 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root     16 Feb 14 23:26 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so -&gt; libcudart.so.8.0\nlrwxrwxrwx 1 root root     19 Feb 14 23:26 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.54\n-rwxr-xr-x 1 root root 476024 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so.8.0.54\n-rw-r--r-- 1 root root 966166 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart_static.a\n\n$ git rev-parse HEAD\n16485a3fb5ffcbaa244e55c388e43279d2770982\n\n$ bazel version\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\n................\nBuild label: 0.4.4- (@non-git)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Feb 9 23:48:24 2017 (1486684104)\nBuild timestamp: 1486684104\nBuild timestamp as int: 1486684104\n</code></pre>\n<h1>Steps to reproduce</h1>\n<pre><code>$ module display gcc/5.4.0\n-------------------------------------------------------------------\n/trinity/shared/modulefiles/cv-ppc64le/gcc/5.4.0:\n\nmodule-whatis    loads the gcc/5.4.0 environment \nprepend-path     PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin \nprepend-path     LD_LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib \nprepend-path     LD_LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64 \nprepend-path     LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib \nprepend-path     LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64 \nprepend-path     C_INCLUDE_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \nprepend-path     INCLUDE /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \nprepend-path     CPATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \nprepend-path     MANPATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/share/man \n\n$ cat ../build_vars.sh\nexport TEST_TMPDIR=/local/cvsupport\nexport PYTHON_BIN_PATH=/usr/bin/python3.4\nexport PYTHON_LIB_PATH=/usr/lib64/python3.4/site-packages\nexport TF_NEED_JEMALLOC=1\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_NEED_OPENCL=0\nexport TF_NEED_CUDA=1\nexport TF_ENABLE_XLA=0\nexport CC_OPT_FLAGS=\"-march=native\"\nexport TF_CUDA_VERSION=8.0\nexport TF_CUDNN_VERSION=5.1.10\nexport TF_CUDA_COMPUTE_CAPABILITIES=6.0\nexport GCC_HOST_COMPILER_PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\nexport CUDA_TOOLKIT_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/${TF_CUDA_VERSION}\nexport CUDNN_INSTALL_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/${TF_CUDA_VERSION}\n\n$ module load nvidia/cuda/8.0 nvidia/cudnn/8.0 gcc/5.4.0 bazel/0.4.4\n$ source ../build_vars.sh\n$ ./configure\n$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<h1>Investigation</h1>\n<p><code>as</code> is installed on my system, but wasn't built by gcc-5.4, I am using system-default one:</p>\n<pre><code>$ rpm -qf /usr/bin/as\nbinutils-2.25.1-22.base.el7.ppc64le\n</code></pre>\n<p>Digging into stace output, It seems like builder is trying to find <code>as</code> using some incorrect assumptions, and failed:</p>\n<pre><code>134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] &lt;unfinished ...&gt;\n134767 &lt;... execve resumed&gt; )           = -1 ENOENT (No such file or directory)\n134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../nvvm/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] &lt;unfinished ...&gt;\n134767 &lt;... execve resumed&gt; )           = -1 ENOENT (No such file or directory)\n134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] &lt;unfinished ...&gt;\n134767 &lt;... execve resumed&gt; )           = -1 ENOENT (No such file or directory)\n134767 execve(\"/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] &lt;unfinished ...&gt;\n134767 &lt;... execve resumed&gt; )           = -1 ENOENT (No such file or directory)\n</code></pre>", "body_text": "Description\nHi,\nI am trying to compile TensorFlow with non-default GCC. 5.4.0, and get follwing error:\ngcc: error trying to exec 'as': execvp: No such file or directory\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/nccl_archive/BUILD.bazel:33:1: output 'external/nccl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o' was not created.\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/nccl_archive/BUILD.bazel:33:1: not all outputs were created or valid.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n\nEnvironment\n$ cat /etc/redhat-release \nCentOS Linux release 7.3.1611 (AltArch)\n\n$ uname -a\nLinux power004.cluster 3.10.0-514.6.1.el7.ppc64le #1 SMP Thu Jan 19 14:34:54 GMT 2017 ppc64le ppc64le ppc64le GNU/Linux\n\n$ ls -l /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcud*\n-rw-r--r-- 1 root root 559800 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root     16 Feb 14 23:26 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root     19 Feb 14 23:26 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.54\n-rwxr-xr-x 1 root root 476024 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so.8.0.54\n-rw-r--r-- 1 root root 966166 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart_static.a\n\n$ git rev-parse HEAD\n16485a3fb5ffcbaa244e55c388e43279d2770982\n\n$ bazel version\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\n................\nBuild label: 0.4.4- (@non-git)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Feb 9 23:48:24 2017 (1486684104)\nBuild timestamp: 1486684104\nBuild timestamp as int: 1486684104\n\nSteps to reproduce\n$ module display gcc/5.4.0\n-------------------------------------------------------------------\n/trinity/shared/modulefiles/cv-ppc64le/gcc/5.4.0:\n\nmodule-whatis    loads the gcc/5.4.0 environment \nprepend-path     PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin \nprepend-path     LD_LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib \nprepend-path     LD_LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64 \nprepend-path     LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib \nprepend-path     LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64 \nprepend-path     C_INCLUDE_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \nprepend-path     INCLUDE /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \nprepend-path     CPATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \nprepend-path     MANPATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/share/man \n\n$ cat ../build_vars.sh\nexport TEST_TMPDIR=/local/cvsupport\nexport PYTHON_BIN_PATH=/usr/bin/python3.4\nexport PYTHON_LIB_PATH=/usr/lib64/python3.4/site-packages\nexport TF_NEED_JEMALLOC=1\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_NEED_OPENCL=0\nexport TF_NEED_CUDA=1\nexport TF_ENABLE_XLA=0\nexport CC_OPT_FLAGS=\"-march=native\"\nexport TF_CUDA_VERSION=8.0\nexport TF_CUDNN_VERSION=5.1.10\nexport TF_CUDA_COMPUTE_CAPABILITIES=6.0\nexport GCC_HOST_COMPILER_PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\nexport CUDA_TOOLKIT_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/${TF_CUDA_VERSION}\nexport CUDNN_INSTALL_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/${TF_CUDA_VERSION}\n\n$ module load nvidia/cuda/8.0 nvidia/cudnn/8.0 gcc/5.4.0 bazel/0.4.4\n$ source ../build_vars.sh\n$ ./configure\n$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n\nInvestigation\nas is installed on my system, but wasn't built by gcc-5.4, I am using system-default one:\n$ rpm -qf /usr/bin/as\nbinutils-2.25.1-22.base.el7.ppc64le\n\nDigging into stace output, It seems like builder is trying to find as using some incorrect assumptions, and failed:\n134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] <unfinished ...>\n134767 <... execve resumed> )           = -1 ENOENT (No such file or directory)\n134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../nvvm/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] <unfinished ...>\n134767 <... execve resumed> )           = -1 ENOENT (No such file or directory)\n134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] <unfinished ...>\n134767 <... execve resumed> )           = -1 ENOENT (No such file or directory)\n134767 execve(\"/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] <unfinished ...>\n134767 <... execve resumed> )           = -1 ENOENT (No such file or directory)", "body": "# Description\r\nHi,\r\n\r\nI am trying to compile TensorFlow with non-default GCC. 5.4.0, and get follwing error:\r\n```\r\ngcc: error trying to exec 'as': execvp: No such file or directory\r\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/nccl_archive/BUILD.bazel:33:1: output 'external/nccl_archive/_objs/nccl/external/nccl_archive/src/libwrap.cu.pic.o' was not created.\r\nERROR: /local/cvsupport/_bazel_cvsupport/c61d2ac558d6d30ef2694b9af72e4144/external/nccl_archive/BUILD.bazel:33:1: not all outputs were created or valid.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n```\r\n# Environment\r\n```\r\n$ cat /etc/redhat-release \r\nCentOS Linux release 7.3.1611 (AltArch)\r\n\r\n$ uname -a\r\nLinux power004.cluster 3.10.0-514.6.1.el7.ppc64le #1 SMP Thu Jan 19 14:34:54 GMT 2017 ppc64le ppc64le ppc64le GNU/Linux\r\n\r\n$ ls -l /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcud*\r\n-rw-r--r-- 1 root root 559800 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudadevrt.a\r\nlrwxrwxrwx 1 root root     16 Feb 14 23:26 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so -> libcudart.so.8.0\r\nlrwxrwxrwx 1 root root     19 Feb 14 23:26 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.54\r\n-rwxr-xr-x 1 root root 476024 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart.so.8.0.54\r\n-rw-r--r-- 1 root root 966166 Oct 29 10:22 /trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64/libcudart_static.a\r\n\r\n$ git rev-parse HEAD\r\n16485a3fb5ffcbaa244e55c388e43279d2770982\r\n\r\n$ bazel version\r\nINFO: $TEST_TMPDIR defined: output root default is '/local/cvsupport'.\r\n................\r\nBuild label: 0.4.4- (@non-git)\r\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Thu Feb 9 23:48:24 2017 (1486684104)\r\nBuild timestamp: 1486684104\r\nBuild timestamp as int: 1486684104\r\n```\r\n# Steps to reproduce\r\n```\r\n$ module display gcc/5.4.0\r\n-------------------------------------------------------------------\r\n/trinity/shared/modulefiles/cv-ppc64le/gcc/5.4.0:\r\n\r\nmodule-whatis    loads the gcc/5.4.0 environment \r\nprepend-path     PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin \r\nprepend-path     LD_LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib \r\nprepend-path     LD_LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64 \r\nprepend-path     LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib \r\nprepend-path     LIBRARY_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64 \r\nprepend-path     C_INCLUDE_PATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \r\nprepend-path     INCLUDE /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \r\nprepend-path     CPATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/include \r\nprepend-path     MANPATH /trinity/shared/apps/cv-ppc64le/gcc/5.4.0/share/man \r\n\r\n$ cat ../build_vars.sh\r\nexport TEST_TMPDIR=/local/cvsupport\r\nexport PYTHON_BIN_PATH=/usr/bin/python3.4\r\nexport PYTHON_LIB_PATH=/usr/lib64/python3.4/site-packages\r\nexport TF_NEED_JEMALLOC=1\r\nexport TF_NEED_GCP=0\r\nexport TF_NEED_HDFS=0\r\nexport TF_NEED_OPENCL=0\r\nexport TF_NEED_CUDA=1\r\nexport TF_ENABLE_XLA=0\r\nexport CC_OPT_FLAGS=\"-march=native\"\r\nexport TF_CUDA_VERSION=8.0\r\nexport TF_CUDNN_VERSION=5.1.10\r\nexport TF_CUDA_COMPUTE_CAPABILITIES=6.0\r\nexport GCC_HOST_COMPILER_PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc\r\nexport CUDA_TOOLKIT_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/${TF_CUDA_VERSION}\r\nexport CUDNN_INSTALL_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/${TF_CUDA_VERSION}\r\n\r\n$ module load nvidia/cuda/8.0 nvidia/cudnn/8.0 gcc/5.4.0 bazel/0.4.4\r\n$ source ../build_vars.sh\r\n$ ./configure\r\n$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n# Investigation\r\n`as` is installed on my system, but wasn't built by gcc-5.4, I am using system-default one:\r\n```\r\n$ rpm -qf /usr/bin/as\r\nbinutils-2.25.1-22.base.el7.ppc64le\r\n```\r\nDigging into stace output, It seems like builder is trying to find `as` using some incorrect assumptions, and failed:\r\n```\r\n134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../open64/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] <unfinished ...>\r\n134767 <... execve resumed> )           = -1 ENOENT (No such file or directory)\r\n134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/../nvvm/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] <unfinished ...>\r\n134767 <... execve resumed> )           = -1 ENOENT (No such file or directory)\r\n134767 execve(\"external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] <unfinished ...>\r\n134767 <... execve resumed> )           = -1 ENOENT (No such file or directory)\r\n134767 execve(\"/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/as\", [\"as\", \"-I\", \".\", \"-I\", \"external/nccl_archive/src\", \"-I\", \"external/local_config_cuda/cross\"..., \"-a64\", \"-mppc64\", \"-many\", \"-mlittle\", \"-o\", \"bazel-out/local_linux-py3-opt/bi\"..., \"/tmp/cc7ZvHce.s\"], [/* 19 vars */] <unfinished ...>\r\n134767 <... execve resumed> )           = -1 ENOENT (No such file or directory)\r\n```"}
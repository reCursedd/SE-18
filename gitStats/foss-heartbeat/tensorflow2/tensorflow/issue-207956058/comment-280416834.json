{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/280416834", "html_url": "https://github.com/tensorflow/tensorflow/issues/7543#issuecomment-280416834", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7543", "id": 280416834, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDQxNjgzNA==", "user": {"login": "dchirikov", "id": 6017800, "node_id": "MDQ6VXNlcjYwMTc4MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6017800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dchirikov", "html_url": "https://github.com/dchirikov", "followers_url": "https://api.github.com/users/dchirikov/followers", "following_url": "https://api.github.com/users/dchirikov/following{/other_user}", "gists_url": "https://api.github.com/users/dchirikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dchirikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dchirikov/subscriptions", "organizations_url": "https://api.github.com/users/dchirikov/orgs", "repos_url": "https://api.github.com/users/dchirikov/repos", "events_url": "https://api.github.com/users/dchirikov/events{/privacy}", "received_events_url": "https://api.github.com/users/dchirikov/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-16T18:31:02Z", "updated_at": "2017-02-16T19:17:32Z", "author_association": "NONE", "body_html": "<p>Found a clue, not sure it will help, though.</p>\n<pre><code>148818 &lt;... clone resumed&gt; child_stack=0, flags=CLONE_PARENT_SETTID|SIGCHLD, parent_tidptr=0x3fffffffe1c0) = 148920\n\n148920 execve(\"/bin/sh\", [\"sh\", \"-c\", \"PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/nvcc -D_FORCE_INLINES -gencode=arch=compute_60,\\\\\\\"code=sm_60,compute_60\\\\\\\"   -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1 -DNDEBUG -DCUDA_MAJOR=0 -DCUDA_MINOR=0 -DNCCL_MAJOR=0 -DNCCL_MINOR=0 -DNCCL_PATCH=0 -DGOOGLE_CUDA=1 -std=c++11 --compiler-options \\\" -isystem external/local_config_cuda/cuda -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include -isystem external/bazel_tools/tools/cpp/gcc3 -iquote external/nccl_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive -iquote external/local_config_cuda -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda -iquote external/bazel_tools -iquote bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools -g0 -fno-canonical-system-headers -fPIC\\\" --compiler-bindir=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc -I . -x cu  -O2 -I external/nccl_archive/src -c bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive/src/reduce.cu.cc -o bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\"], [\"PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin:/trinity/shared/apps/cv-ppc64le/bazel/0.4.4/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/trinity/home/cvsupport/.local/bin:/trinity/home/cvsupport/bin\", \"LD_LIBRARY_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\"]\n</code></pre>\n<p>And seems like PATH was overridden there</p>\n<pre><code>148818 execve(\"external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\", [\"external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\", \"-U_FORTIFY_SOURCE\", \"-D_FORTIFY_SOURCE=1\", \"-fstack-protector\", \"-fPIE\", \"-Wall\", \"-Wunused-but-set-parameter\", \"-Wno-free-nonheap-object\", \"-fno-omit-frame-pointer\", \"-g0\", \"-O2\", \"-DNDEBUG\", \"-ffunction-sections\", \"-fdata-sections\", \"-std=c++11\", \"-MD\", \"-MF\", \"bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.d\", \"-frandom-seed=bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\", \"-fPIC\", \"-iquote\", \"external/nccl_archive\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive\", \"-iquote\", \"external/local_config_cuda\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda\", \"-iquote\", \"external/bazel_tools\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools\", \"-isystem\", \"external/local_config_cuda/cuda\", \"-isystem\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda\", \"-isystem\", \"external/local_config_cuda/cuda/include\", \"-isystem\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include\", \"-isystem\", \"external/bazel_tools/tools/cpp/gcc3\", \"-DCUDA_MAJOR=0\", \"-DCUDA_MINOR=0\", \"-DNCCL_MAJOR=0\", \"-DNCCL_MINOR=0\", \"-DNCCL_PATCH=0\", \"-Iexternal/nccl_archive/src\", \"-O3\", \"-x\", \"cuda\", \"-DGOOGLE_CUDA=1\", \"-no-canonical-prefixes\", \"-Wno-builtin-macro-redefined\", \"-D__DATE__=\\\"redacted\\\"\", \"-D__TIMESTAMP__=\\\"redacted\\\"\", \"-D__TIME__=\\\"redacted\\\"\", \"-fno-canonical-system-headers\", \"-c\", \"bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive/src/reduce.cu.cc\", \"-o\", \"bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\"], [\"PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin:/trinity/shared/apps/cv-ppc64le/bazel/0.4.4/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/trinity/home/cvsupport/.local/bin:/trinity/home/cvsupport/bin\", \"LD_LIBRARY_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\"] &lt;unfinished ...&gt;\n</code></pre>\n<p>So <code>external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc</code> runs <code>/bin/sh -c \"PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/nvcc\"</code></p>", "body_text": "Found a clue, not sure it will help, though.\n148818 <... clone resumed> child_stack=0, flags=CLONE_PARENT_SETTID|SIGCHLD, parent_tidptr=0x3fffffffe1c0) = 148920\n\n148920 execve(\"/bin/sh\", [\"sh\", \"-c\", \"PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/nvcc -D_FORCE_INLINES -gencode=arch=compute_60,\\\\\\\"code=sm_60,compute_60\\\\\\\"   -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1 -DNDEBUG -DCUDA_MAJOR=0 -DCUDA_MINOR=0 -DNCCL_MAJOR=0 -DNCCL_MINOR=0 -DNCCL_PATCH=0 -DGOOGLE_CUDA=1 -std=c++11 --compiler-options \\\" -isystem external/local_config_cuda/cuda -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include -isystem external/bazel_tools/tools/cpp/gcc3 -iquote external/nccl_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive -iquote external/local_config_cuda -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda -iquote external/bazel_tools -iquote bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools -g0 -fno-canonical-system-headers -fPIC\\\" --compiler-bindir=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc -I . -x cu  -O2 -I external/nccl_archive/src -c bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive/src/reduce.cu.cc -o bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\"], [\"PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin:/trinity/shared/apps/cv-ppc64le/bazel/0.4.4/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/trinity/home/cvsupport/.local/bin:/trinity/home/cvsupport/bin\", \"LD_LIBRARY_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\"]\n\nAnd seems like PATH was overridden there\n148818 execve(\"external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\", [\"external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\", \"-U_FORTIFY_SOURCE\", \"-D_FORTIFY_SOURCE=1\", \"-fstack-protector\", \"-fPIE\", \"-Wall\", \"-Wunused-but-set-parameter\", \"-Wno-free-nonheap-object\", \"-fno-omit-frame-pointer\", \"-g0\", \"-O2\", \"-DNDEBUG\", \"-ffunction-sections\", \"-fdata-sections\", \"-std=c++11\", \"-MD\", \"-MF\", \"bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.d\", \"-frandom-seed=bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\", \"-fPIC\", \"-iquote\", \"external/nccl_archive\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive\", \"-iquote\", \"external/local_config_cuda\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda\", \"-iquote\", \"external/bazel_tools\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools\", \"-isystem\", \"external/local_config_cuda/cuda\", \"-isystem\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda\", \"-isystem\", \"external/local_config_cuda/cuda/include\", \"-isystem\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include\", \"-isystem\", \"external/bazel_tools/tools/cpp/gcc3\", \"-DCUDA_MAJOR=0\", \"-DCUDA_MINOR=0\", \"-DNCCL_MAJOR=0\", \"-DNCCL_MINOR=0\", \"-DNCCL_PATCH=0\", \"-Iexternal/nccl_archive/src\", \"-O3\", \"-x\", \"cuda\", \"-DGOOGLE_CUDA=1\", \"-no-canonical-prefixes\", \"-Wno-builtin-macro-redefined\", \"-D__DATE__=\\\"redacted\\\"\", \"-D__TIMESTAMP__=\\\"redacted\\\"\", \"-D__TIME__=\\\"redacted\\\"\", \"-fno-canonical-system-headers\", \"-c\", \"bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive/src/reduce.cu.cc\", \"-o\", \"bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\"], [\"PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin:/trinity/shared/apps/cv-ppc64le/bazel/0.4.4/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/trinity/home/cvsupport/.local/bin:/trinity/home/cvsupport/bin\", \"LD_LIBRARY_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\"] <unfinished ...>\n\nSo external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc runs /bin/sh -c \"PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/nvcc\"", "body": "Found a clue, not sure it will help, though.\r\n```\r\n148818 <... clone resumed> child_stack=0, flags=CLONE_PARENT_SETTID|SIGCHLD, parent_tidptr=0x3fffffffe1c0) = 148920\r\n\r\n148920 execve(\"/bin/sh\", [\"sh\", \"-c\", \"PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/nvcc -D_FORCE_INLINES -gencode=arch=compute_60,\\\\\\\"code=sm_60,compute_60\\\\\\\"   -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1 -DNDEBUG -DCUDA_MAJOR=0 -DCUDA_MINOR=0 -DNCCL_MAJOR=0 -DNCCL_MINOR=0 -DNCCL_PATCH=0 -DGOOGLE_CUDA=1 -std=c++11 --compiler-options \\\" -isystem external/local_config_cuda/cuda -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/include -isystem bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include -isystem external/bazel_tools/tools/cpp/gcc3 -iquote external/nccl_archive -iquote bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive -iquote external/local_config_cuda -iquote bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda -iquote external/bazel_tools -iquote bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools -g0 -fno-canonical-system-headers -fPIC\\\" --compiler-bindir=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin/gcc -I . -x cu  -O2 -I external/nccl_archive/src -c bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive/src/reduce.cu.cc -o bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\"], [\"PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin:/trinity/shared/apps/cv-ppc64le/bazel/0.4.4/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/trinity/home/cvsupport/.local/bin:/trinity/home/cvsupport/bin\", \"LD_LIBRARY_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\"]\r\n```\r\nAnd seems like PATH was overridden there\r\n```\r\n148818 execve(\"external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\", [\"external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\", \"-U_FORTIFY_SOURCE\", \"-D_FORTIFY_SOURCE=1\", \"-fstack-protector\", \"-fPIE\", \"-Wall\", \"-Wunused-but-set-parameter\", \"-Wno-free-nonheap-object\", \"-fno-omit-frame-pointer\", \"-g0\", \"-O2\", \"-DNDEBUG\", \"-ffunction-sections\", \"-fdata-sections\", \"-std=c++11\", \"-MD\", \"-MF\", \"bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.d\", \"-frandom-seed=bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\", \"-fPIC\", \"-iquote\", \"external/nccl_archive\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive\", \"-iquote\", \"external/local_config_cuda\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda\", \"-iquote\", \"external/bazel_tools\", \"-iquote\", \"bazel-out/local_linux-py3-opt/genfiles/external/bazel_tools\", \"-isystem\", \"external/local_config_cuda/cuda\", \"-isystem\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda\", \"-isystem\", \"external/local_config_cuda/cuda/include\", \"-isystem\", \"bazel-out/local_linux-py3-opt/genfiles/external/local_config_cuda/cuda/include\", \"-isystem\", \"external/bazel_tools/tools/cpp/gcc3\", \"-DCUDA_MAJOR=0\", \"-DCUDA_MINOR=0\", \"-DNCCL_MAJOR=0\", \"-DNCCL_MINOR=0\", \"-DNCCL_PATCH=0\", \"-Iexternal/nccl_archive/src\", \"-O3\", \"-x\", \"cuda\", \"-DGOOGLE_CUDA=1\", \"-no-canonical-prefixes\", \"-Wno-builtin-macro-redefined\", \"-D__DATE__=\\\"redacted\\\"\", \"-D__TIMESTAMP__=\\\"redacted\\\"\", \"-D__TIME__=\\\"redacted\\\"\", \"-fno-canonical-system-headers\", \"-c\", \"bazel-out/local_linux-py3-opt/genfiles/external/nccl_archive/src/reduce.cu.cc\", \"-o\", \"bazel-out/local_linux-py3-opt/bin/external/nccl_archive/_objs/nccl/external/nccl_archive/src/reduce.cu.pic.o\"], [\"PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/bin:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin:/trinity/shared/apps/cv-ppc64le/bazel/0.4.4/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/trinity/home/cvsupport/.local/bin:/trinity/home/cvsupport/bin\", \"LD_LIBRARY_PATH=/trinity/shared/apps/cv-ppc64le/nvidia/cudnn/8.0/lib:/trinity/shared/apps/cv-ppc64le/nvidia/cuda/8.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib64:/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/lib\"] <unfinished ...>\r\n```\r\nSo `external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc` runs `/bin/sh -c \"PATH=/trinity/shared/apps/cv-ppc64le/gcc/5.4.0/bin external/local_config_cuda/crosstool/clang/bin/../../../cuda/bin/nvcc\"`"}
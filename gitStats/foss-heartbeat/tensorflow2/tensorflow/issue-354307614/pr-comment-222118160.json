{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/222118160", "pull_request_review_id": 160927054, "id": 222118160, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjExODE2MA==", "diff_hunk": "@@ -0,0 +1,36 @@\n+/*\n+Copyright 2016 The TensorFlow Authors. All Rights Reserved.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+*/\n+\n+package op\n+\n+import tf \"github.com/tensorflow/tensorflow/tensorflow/go\"\n+\n+// Gradients adds gradients computation ops to the graph according to scope.\n+//\n+// Arguments:\n+//  y: output of the function to derive\n+//  x: inputs of the function for which partial derivatives are computed\n+//  dx: if not null, the partial derivatives of some loss function L w.r.t. y\n+//\n+//  return the partial derivatives\n+func Gradients(scope *Scope, y []tf.Output, x []tf.Output, dx ...tf.Output) (output []tf.Output) {\n+\tvar err error\n+\tif output, err = scope.graph.AddGradients(scope.opName(scope.uniqueName(\"Gradients\")), y, x, dx); err != nil {", "path": "tensorflow/go/op/gradients.go", "position": null, "original_position": 31, "commit_id": "a911ecf5a94e037554f677670762b0122c062b41", "original_commit_id": "8c9d5eb52b0d8e551b0e751186edfcdecbef62fb", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "body": "I'm not sure we want to use `scope.uniqueName` here, just `scope.opName(\"Gradients\")`.\r\nThe reason I say so is that we don't use this for any other ops (https://github.com/tensorflow/tensorflow/blob/e45c90f0e4d17ac22048a73f1e81bd9c7a7a5145/tensorflow/go/op/scope.go#L85 etc.), so I wouldn't do so here either - to be consistent with how primitive operations are added to the graph.", "created_at": "2018-10-02T21:27:26Z", "updated_at": "2018-11-21T06:08:04Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/21895#discussion_r222118160", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21895", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/222118160"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/21895#discussion_r222118160"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21895"}}, "body_html": "<p>I'm not sure we want to use <code>scope.uniqueName</code> here, just <code>scope.opName(\"Gradients\")</code>.<br>\nThe reason I say so is that we don't use this for any other ops (<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/e45c90f0e4d17ac22048a73f1e81bd9c7a7a5145/tensorflow/go/op/scope.go#L85\">tensorflow/tensorflow/go/op/scope.go</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 85\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/e45c90f0e4d17ac22048a73f1e81bd9c7a7a5145\">e45c90f</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L85\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"85\"></td>\n          <td id=\"LC85\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> args.<span class=\"pl-smi\">ControlDependencies</span> = <span class=\"pl-c1\">append</span>(args.<span class=\"pl-smi\">ControlDependencies</span>, s.<span class=\"pl-smi\">controlDependencies</span>...) </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n etc.), so I wouldn't do so here either - to be consistent with how primitive operations are added to the graph.</p>", "body_text": "I'm not sure we want to use scope.uniqueName here, just scope.opName(\"Gradients\").\nThe reason I say so is that we don't use this for any other ops (\n  \n    \n      tensorflow/tensorflow/go/op/scope.go\n    \n    \n         Line 85\n      in\n      e45c90f\n    \n    \n    \n    \n\n        \n          \n           args.ControlDependencies = append(args.ControlDependencies, s.controlDependencies...) \n        \n    \n  \n\n etc.), so I wouldn't do so here either - to be consistent with how primitive operations are added to the graph."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/221126191", "pull_request_review_id": 159701326, "id": 221126191, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTEyNjE5MQ==", "diff_hunk": "@@ -147,6 +147,66 @@ func (g *Graph) Operations() []Operation {\n \treturn ops\n }\n \n+// AddGradientsWithPrefix adds operations to compute the partial derivatives of sum of `y`s w.r.t `x`s,\n+// i.e., d(y_1 + y_2 + ...)/dx_1, d(y_1 + y_2 + ...)/dx_2...\n+// This methods allows to caller to pass a custom name prefix to the operations\n+// added to a graph to compute the gradients.\n+func (g *Graph) AddGradients(prefix string, y []Output, x []Output, dx []Output) ([]Output, error) {\n+\tvar (\n+\t\tcprefix = C.CString(prefix)\n+\n+\t\tcy  = make([]C.TF_Output, len(y))\n+\t\tcx  = make([]C.TF_Output, len(x))\n+\t\tcdx = make([]C.TF_Output, len(dx))\n+\t\tcdy = make([]C.TF_Output, len(x))\n+\n+\t\tpcy  *C.TF_Output\n+\t\tpcx  *C.TF_Output\n+\t\tpcdx *C.TF_Output\n+\t\tpcdy *C.TF_Output\n+\n+\t\tstatus = newStatus()\n+\t)\n+\n+\tif len(y) > 0 {\n+\t\tpcy = &cy[0]\n+\t\tfor i, o := range y {\n+\t\t\tcy[i] = o.c()\n+\t\t}\n+\t}\n+\tif len(x) > 0 {\n+\t\tpcx = &cx[0]\n+\t\tfor i, o := range x {\n+\t\t\tcx[i] = o.c()\n+\t\t}\n+\t\tpcdy = &cdy[0]\n+\t}\n+\tif len(dx) > 0 {\n+\t\tpcdx = &cdx[0]\n+\t\tfor i, o := range dx {\n+\t\t\tcdx[i] = o.c()\n+\t\t}\n+\t}\n+\n+\t// If prefix is \"\", the C.TF_AddGradientsWithPrefix need cprefix to be nil but not \"\"", "path": "tensorflow/go/graph.go", "position": 46, "original_position": 45, "commit_id": "a911ecf5a94e037554f677670762b0122c062b41", "original_commit_id": "e40c032d62075621053262758c065f9bfb9faed9", "user": {"login": "Cibifang", "id": 9337824, "node_id": "MDQ6VXNlcjkzMzc4MjQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/9337824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cibifang", "html_url": "https://github.com/Cibifang", "followers_url": "https://api.github.com/users/Cibifang/followers", "following_url": "https://api.github.com/users/Cibifang/following{/other_user}", "gists_url": "https://api.github.com/users/Cibifang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cibifang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cibifang/subscriptions", "organizations_url": "https://api.github.com/users/Cibifang/orgs", "repos_url": "https://api.github.com/users/Cibifang/repos", "events_url": "https://api.github.com/users/Cibifang/events{/privacy}", "received_events_url": "https://api.github.com/users/Cibifang/received_events", "type": "User", "site_admin": false}, "body": "It fixed. I just misunderstood the usage of `C.char` before.", "created_at": "2018-09-28T02:15:11Z", "updated_at": "2018-11-21T06:08:04Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/21895#discussion_r221126191", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21895", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/221126191"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/21895#discussion_r221126191"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21895"}}, "body_html": "<p>It fixed. I just misunderstood the usage of <code>C.char</code> before.</p>", "body_text": "It fixed. I just misunderstood the usage of C.char before.", "in_reply_to_id": 221053516}
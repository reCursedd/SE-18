{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/216399120", "pull_request_review_id": 153870820, "id": 216399120, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjM5OTEyMA==", "diff_hunk": "@@ -147,6 +147,73 @@ func (g *Graph) Operations() []Operation {\n \treturn ops\n }\n \n+// AddGradients adds operations to compute the partial derivatives of sum of `y`s w.r.t `x`s,\n+// i.e., d(y_1 + y_2 + ...)/dx_1, d(y_1 + y_2 + ...)/dx_2...\n+// This is a simplified version of AddGradientsWithPrefix() without prefix\n+func (g *Graph) AddGradients(y []Output, x []Output, dx []Output) ([]Output, error) {\n+\treturn g.AddGradientsWithPrefix(\"\", y, x, dx)\n+}\n+\n+// AddGradientsWithPrefix adds operations to compute the partial derivatives of sum of `y`s w.r.t `x`s,\n+// i.e., d(y_1 + y_2 + ...)/dx_1, d(y_1 + y_2 + ...)/dx_2...\n+// This is a variant of AddGradients that allows to caller to pass a custom\n+// name prefix to the operations added to a graph to compute the gradients.\n+func (g *Graph) AddGradientsWithPrefix(prefix string, y []Output, x []Output, dx []Output) ([]Output, error) {", "path": "tensorflow/go/graph.go", "position": null, "original_position": 15, "commit_id": "a911ecf5a94e037554f677670762b0122c062b41", "original_commit_id": "ccccbe7259f9862e115e267fcce3d8bfb119b3cf", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "body": "Thanks for the PR :)\r\n\r\n1. Yup, see https://github.com/tensorflow/tensorflow/blob/7d3884bb87dc02c4548f55749f3d6db1b8364ddc/tensorflow/go/op/scope.go#L75\r\n\r\n2. Let's use `Gradients`, as it's akin to a composite TensorFlow operation.\r\n\r\n3. Perhaps we can treat `dx` as an optional parameter using the pattern we use for other operations. For example, see [`BatchMatMul`](https://godoc.org/github.com/tensorflow/tensorflow/tensorflow/go/op#BatchMatMul)\r\n\r\n4. Nope, `wrappers.go` is automatically generated, I'd just add that to a new file `gradients.go` in the `op` directory.\r\n\r\nSound reasonable?", "created_at": "2018-09-10T17:03:33Z", "updated_at": "2018-11-21T06:08:04Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/21895#discussion_r216399120", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21895", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/216399120"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/21895#discussion_r216399120"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21895"}}, "body_html": "<p>Thanks for the PR :)</p>\n<ol>\n<li>\n<p>Yup, see <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/7d3884bb87dc02c4548f55749f3d6db1b8364ddc/tensorflow/go/op/scope.go#L75\">tensorflow/tensorflow/go/op/scope.go</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 75\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/7d3884bb87dc02c4548f55749f3d6db1b8364ddc\">7d3884b</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L75\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"75\"></td>\n          <td id=\"LC75\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">func</span> <span class=\"pl-en\">(<span class=\"pl-v\">s</span> *<span class=\"pl-v\">Scope</span>) <span class=\"pl-en\">AddOperation</span></span>(<span class=\"pl-v\">args</span> <span class=\"pl-v\">tf</span>.<span class=\"pl-v\">OpSpec</span>) *<span class=\"pl-v\">tf</span>.<span class=\"pl-v\">Operation</span> { </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n</li>\n<li>\n<p>Let's use <code>Gradients</code>, as it's akin to a composite TensorFlow operation.</p>\n</li>\n<li>\n<p>Perhaps we can treat <code>dx</code> as an optional parameter using the pattern we use for other operations. For example, see <a href=\"https://godoc.org/github.com/tensorflow/tensorflow/tensorflow/go/op#BatchMatMul\" rel=\"nofollow\"><code>BatchMatMul</code></a></p>\n</li>\n<li>\n<p>Nope, <code>wrappers.go</code> is automatically generated, I'd just add that to a new file <code>gradients.go</code> in the <code>op</code> directory.</p>\n</li>\n</ol>\n<p>Sound reasonable?</p>", "body_text": "Thanks for the PR :)\n\n\nYup, see \n  \n    \n      tensorflow/tensorflow/go/op/scope.go\n    \n    \n         Line 75\n      in\n      7d3884b\n    \n    \n    \n    \n\n        \n          \n           func (s *Scope) AddOperation(args tf.OpSpec) *tf.Operation { \n        \n    \n  \n\n\n\n\nLet's use Gradients, as it's akin to a composite TensorFlow operation.\n\n\nPerhaps we can treat dx as an optional parameter using the pattern we use for other operations. For example, see BatchMatMul\n\n\nNope, wrappers.go is automatically generated, I'd just add that to a new file gradients.go in the op directory.\n\n\nSound reasonable?", "in_reply_to_id": 215724728}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/335191834", "html_url": "https://github.com/tensorflow/tensorflow/issues/13522#issuecomment-335191834", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13522", "id": 335191834, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTE5MTgzNA==", "user": {"login": "VolodymyrPavliukevych", "id": 1786378, "node_id": "MDQ6VXNlcjE3ODYzNzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1786378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VolodymyrPavliukevych", "html_url": "https://github.com/VolodymyrPavliukevych", "followers_url": "https://api.github.com/users/VolodymyrPavliukevych/followers", "following_url": "https://api.github.com/users/VolodymyrPavliukevych/following{/other_user}", "gists_url": "https://api.github.com/users/VolodymyrPavliukevych/gists{/gist_id}", "starred_url": "https://api.github.com/users/VolodymyrPavliukevych/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VolodymyrPavliukevych/subscriptions", "organizations_url": "https://api.github.com/users/VolodymyrPavliukevych/orgs", "repos_url": "https://api.github.com/users/VolodymyrPavliukevych/repos", "events_url": "https://api.github.com/users/VolodymyrPavliukevych/events{/privacy}", "received_events_url": "https://api.github.com/users/VolodymyrPavliukevych/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-09T15:25:34Z", "updated_at": "2017-10-09T15:25:34Z", "author_association": "NONE", "body_html": "<p>I tred to build that <a href=\"https://www.octadero.com/wp-content/uploads/2017/10/TFBuildTest.zip\" rel=\"nofollow\">example project</a> with <strong>r1.3</strong> c++ library:</p>\n<pre><code>export LD_LIBRARY_PATH=/server/repository/tensorflow_1.3/tensorflow/bazel-bin/tensorflow:/server/repository/tensorflow_1.3/protobuf/src/.libs/\nswift build -Xcxx -std=c++11 -Xlinker -L/server/repository/tensorflow_1.3/protobuf/src/.libs/ -Xlinker -lprotobuf -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/bazel-genfiles -Xlinker -L/server/repository/tensorflow_1.3/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc \n</code></pre>\n<p>It is ok.<br>\n<a href=\"https://www.octadero.com/wp-content/uploads/2017/10/simple_build_1.3.txt\" rel=\"nofollow\">build log</a></p>\n<p>And tried with <strong>master</strong> brunch:</p>\n<pre><code>export LD_LIBRARY_PATH=/server/repository/tensorflow/bazel-bin/tensorflow:/usr/local/lib/\nswift build -Xcxx -std=c++11 -Xlinker -L/usr/local/lib -Xlinker -lprotobuf -Xcxx -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -Xcxx -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -Xcxx -I/server/repository/tensorflow/ -Xcxx -I/server/repository/tensorflow/bazel-genfiles -Xlinker -L/server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc \n</code></pre>\n<p>Error:</p>\n<pre><code>**/usr/bin/swiftc --driver-mode=swift -L /usr/lib/swift/pm/4 -lPackageDescription -swift-version 4 -I /usr/lib/swift/pm/4 -sdk / /server/repository/TFBuildTest/Package.swift -fileno 6\n/usr/bin/swift-build-tool -f /server/repository/TFBuildTest/.build/debug.yaml main -v\n/usr/bin/clang -target 'x86_64-unknown-linux' --sysroot / -fPIC -g '-O0' '-std=c++11' -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -I/server/repository/tensorflow/ -I/server/repository/tensorflow/bazel-genfiles -fmodules -fmodule-name=CCAPI -I /server/repository/TFBuildTest/Sources/CCAPI/include '-fmodules-cache-path=/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/ModuleCache' -MD -MT dependencies -MF '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.d' -c /server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc -o '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o'\narcr/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/libCCAPI.a/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o\n/usr/bin/swiftc -module-name TFBuildTest -incremental -emit-dependencies -emit-module -emit-module-path /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.swiftmodule -output-file-map /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.build/output-file-map.json -num-threads 8 -c /server/repository/TFBuildTest/Sources/TFBuildTest/main.swift -I /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug -swift-version 4 -target x86_64-unknown-linux -sdk / -Onone -g -enable-testing -j8 -DSWIFT_PACKAGE -Xcc -fmodule-map-file=/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/module.modulemap -I /server/repository/TFBuildTest/Sources/CCAPI/include -module-cache-path /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/ModuleCache\n/usr/bin/swiftc -target 'x86_64-unknown-linux' -sdk / -Xlinker -L/usr/local/lib -Xlinker -lprotobuf -Xlinker -L/server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc -lstdc++ -g -L '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug' -o '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest' -module-name TFBuildTest -emit-executable -Xlinker '-rpath=$ORIGIN' '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o' '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.build/main.swift.o'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:26: error: undefined reference to 'tensorflow::Event::Event()'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:30: error: undefined reference to 'tensorflow::EventsWriter::WriteEvent(tensorflow::Event const&amp;)'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:32: error: undefined reference to 'tensorflow::Event::~Event()'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:32: error: undefined reference to 'tensorflow::Event::~Event()'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:35: error: undefined reference to 'tensorflow::EventsWriter::EventsWriter(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n/server/repository/tensorflow/bazel-genfiles/tensorflow/core/util/event.pb.h:1105: error: undefined reference to 'tensorflow::Event::clear_what()'\n/server/repository/tensorflow/tensorflow/core/util/events_writer.h:46: error: undefined reference to 'tensorflow::EventsWriter::Close()'\n//usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/unique_ptr.h:76: error: undefined reference to 'tensorflow::io::RecordWriter::~RecordWriter()'\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n&lt;unknown&gt;:0: error: link command failed with exit code 1 (use -v to see invocation)\nerror: terminated(1): /usr/bin/swift-build-tool -f /server/repository/TFBuildTest/.build/debug.yaml main -v** \n</code></pre>\n<p><a href=\"https://www.octadero.com/wp-content/uploads/2017/10/simple_build_master.txt\" rel=\"nofollow\">build log</a></p>", "body_text": "I tred to build that example project with r1.3 c++ library:\nexport LD_LIBRARY_PATH=/server/repository/tensorflow_1.3/tensorflow/bazel-bin/tensorflow:/server/repository/tensorflow_1.3/protobuf/src/.libs/\nswift build -Xcxx -std=c++11 -Xlinker -L/server/repository/tensorflow_1.3/protobuf/src/.libs/ -Xlinker -lprotobuf -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/bazel-genfiles -Xlinker -L/server/repository/tensorflow_1.3/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc \n\nIt is ok.\nbuild log\nAnd tried with master brunch:\nexport LD_LIBRARY_PATH=/server/repository/tensorflow/bazel-bin/tensorflow:/usr/local/lib/\nswift build -Xcxx -std=c++11 -Xlinker -L/usr/local/lib -Xlinker -lprotobuf -Xcxx -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -Xcxx -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -Xcxx -I/server/repository/tensorflow/ -Xcxx -I/server/repository/tensorflow/bazel-genfiles -Xlinker -L/server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc \n\nError:\n**/usr/bin/swiftc --driver-mode=swift -L /usr/lib/swift/pm/4 -lPackageDescription -swift-version 4 -I /usr/lib/swift/pm/4 -sdk / /server/repository/TFBuildTest/Package.swift -fileno 6\n/usr/bin/swift-build-tool -f /server/repository/TFBuildTest/.build/debug.yaml main -v\n/usr/bin/clang -target 'x86_64-unknown-linux' --sysroot / -fPIC -g '-O0' '-std=c++11' -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -I/server/repository/tensorflow/ -I/server/repository/tensorflow/bazel-genfiles -fmodules -fmodule-name=CCAPI -I /server/repository/TFBuildTest/Sources/CCAPI/include '-fmodules-cache-path=/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/ModuleCache' -MD -MT dependencies -MF '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.d' -c /server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc -o '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o'\narcr/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/libCCAPI.a/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o\n/usr/bin/swiftc -module-name TFBuildTest -incremental -emit-dependencies -emit-module -emit-module-path /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.swiftmodule -output-file-map /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.build/output-file-map.json -num-threads 8 -c /server/repository/TFBuildTest/Sources/TFBuildTest/main.swift -I /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug -swift-version 4 -target x86_64-unknown-linux -sdk / -Onone -g -enable-testing -j8 -DSWIFT_PACKAGE -Xcc -fmodule-map-file=/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/module.modulemap -I /server/repository/TFBuildTest/Sources/CCAPI/include -module-cache-path /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/ModuleCache\n/usr/bin/swiftc -target 'x86_64-unknown-linux' -sdk / -Xlinker -L/usr/local/lib -Xlinker -lprotobuf -Xlinker -L/server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc -lstdc++ -g -L '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug' -o '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest' -module-name TFBuildTest -emit-executable -Xlinker '-rpath=$ORIGIN' '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o' '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.build/main.swift.o'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:26: error: undefined reference to 'tensorflow::Event::Event()'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:30: error: undefined reference to 'tensorflow::EventsWriter::WriteEvent(tensorflow::Event const&)'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:32: error: undefined reference to 'tensorflow::Event::~Event()'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:32: error: undefined reference to 'tensorflow::Event::~Event()'\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:35: error: undefined reference to 'tensorflow::EventsWriter::EventsWriter(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\n/server/repository/tensorflow/bazel-genfiles/tensorflow/core/util/event.pb.h:1105: error: undefined reference to 'tensorflow::Event::clear_what()'\n/server/repository/tensorflow/tensorflow/core/util/events_writer.h:46: error: undefined reference to 'tensorflow::EventsWriter::Close()'\n//usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/unique_ptr.h:76: error: undefined reference to 'tensorflow::io::RecordWriter::~RecordWriter()'\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n<unknown>:0: error: link command failed with exit code 1 (use -v to see invocation)\nerror: terminated(1): /usr/bin/swift-build-tool -f /server/repository/TFBuildTest/.build/debug.yaml main -v** \n\nbuild log", "body": "I tred to build that [example project](https://www.octadero.com/wp-content/uploads/2017/10/TFBuildTest.zip) with **r1.3** c++ library:\r\n\r\n```\r\nexport LD_LIBRARY_PATH=/server/repository/tensorflow_1.3/tensorflow/bazel-bin/tensorflow:/server/repository/tensorflow_1.3/protobuf/src/.libs/\r\nswift build -Xcxx -std=c++11 -Xlinker -L/server/repository/tensorflow_1.3/protobuf/src/.libs/ -Xlinker -lprotobuf -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/ -Xcxx -I/server/repository/tensorflow_1.3/tensorflow/bazel-genfiles -Xlinker -L/server/repository/tensorflow_1.3/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc \r\n``` \r\nIt is ok.\r\n[build log](https://www.octadero.com/wp-content/uploads/2017/10/simple_build_1.3.txt)\r\n\r\nAnd tried with **master** brunch:\r\n```\r\nexport LD_LIBRARY_PATH=/server/repository/tensorflow/bazel-bin/tensorflow:/usr/local/lib/\r\nswift build -Xcxx -std=c++11 -Xlinker -L/usr/local/lib -Xlinker -lprotobuf -Xcxx -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -Xcxx -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -Xcxx -I/server/repository/tensorflow/ -Xcxx -I/server/repository/tensorflow/bazel-genfiles -Xlinker -L/server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc \r\n```\r\n\r\nError: \r\n```\r\n**/usr/bin/swiftc --driver-mode=swift -L /usr/lib/swift/pm/4 -lPackageDescription -swift-version 4 -I /usr/lib/swift/pm/4 -sdk / /server/repository/TFBuildTest/Package.swift -fileno 6\r\n/usr/bin/swift-build-tool -f /server/repository/TFBuildTest/.build/debug.yaml main -v\r\n/usr/bin/clang -target 'x86_64-unknown-linux' --sysroot / -fPIC -g '-O0' '-std=c++11' -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/nsync/public/ -I/server/repository/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/ -I/server/repository/tensorflow/ -I/server/repository/tensorflow/bazel-genfiles -fmodules -fmodule-name=CCAPI -I /server/repository/TFBuildTest/Sources/CCAPI/include '-fmodules-cache-path=/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/ModuleCache' -MD -MT dependencies -MF '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.d' -c /server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc -o '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o'\r\narcr/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/libCCAPI.a/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o\r\n/usr/bin/swiftc -module-name TFBuildTest -incremental -emit-dependencies -emit-module -emit-module-path /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.swiftmodule -output-file-map /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.build/output-file-map.json -num-threads 8 -c /server/repository/TFBuildTest/Sources/TFBuildTest/main.swift -I /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug -swift-version 4 -target x86_64-unknown-linux -sdk / -Onone -g -enable-testing -j8 -DSWIFT_PACKAGE -Xcc -fmodule-map-file=/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/module.modulemap -I /server/repository/TFBuildTest/Sources/CCAPI/include -module-cache-path /server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/ModuleCache\r\n/usr/bin/swiftc -target 'x86_64-unknown-linux' -sdk / -Xlinker -L/usr/local/lib -Xlinker -lprotobuf -Xlinker -L/server/repository/tensorflow/bazel-bin/tensorflow -Xlinker -ltensorflow_cc -lstdc++ -g -L '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug' -o '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest' -module-name TFBuildTest -emit-executable -Xlinker '-rpath=$ORIGIN' '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/CCAPI.build/EventsWriter.cc.o' '/server/repository/TFBuildTest/.build/x86_64-unknown-linux/debug/TFBuildTest.build/main.swift.o'\r\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:26: error: undefined reference to 'tensorflow::Event::Event()'\r\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:30: error: undefined reference to 'tensorflow::EventsWriter::WriteEvent(tensorflow::Event const&)'\r\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:32: error: undefined reference to 'tensorflow::Event::~Event()'\r\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:32: error: undefined reference to 'tensorflow::Event::~Event()'\r\n/server/repository/TFBuildTest/Sources/CCAPI/EventsWriter.cc:35: error: undefined reference to 'tensorflow::EventsWriter::EventsWriter(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'\r\n/server/repository/tensorflow/bazel-genfiles/tensorflow/core/util/event.pb.h:1105: error: undefined reference to 'tensorflow::Event::clear_what()'\r\n/server/repository/tensorflow/tensorflow/core/util/events_writer.h:46: error: undefined reference to 'tensorflow::EventsWriter::Close()'\r\n//usr/lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/unique_ptr.h:76: error: undefined reference to 'tensorflow::io::RecordWriter::~RecordWriter()'\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\n<unknown>:0: error: link command failed with exit code 1 (use -v to see invocation)\r\nerror: terminated(1): /usr/bin/swift-build-tool -f /server/repository/TFBuildTest/.build/debug.yaml main -v** \r\n```\r\n\r\n[build log](https://www.octadero.com/wp-content/uploads/2017/10/simple_build_master.txt)\r\n"}
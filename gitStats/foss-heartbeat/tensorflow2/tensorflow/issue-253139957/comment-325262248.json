{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/325262248", "html_url": "https://github.com/tensorflow/tensorflow/pull/12627#issuecomment-325262248", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12627", "id": 325262248, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTI2MjI0OA==", "user": {"login": "eaplatanios", "id": 1294940, "node_id": "MDQ6VXNlcjEyOTQ5NDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1294940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaplatanios", "html_url": "https://github.com/eaplatanios", "followers_url": "https://api.github.com/users/eaplatanios/followers", "following_url": "https://api.github.com/users/eaplatanios/following{/other_user}", "gists_url": "https://api.github.com/users/eaplatanios/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaplatanios/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaplatanios/subscriptions", "organizations_url": "https://api.github.com/users/eaplatanios/orgs", "repos_url": "https://api.github.com/users/eaplatanios/repos", "events_url": "https://api.github.com/users/eaplatanios/events{/privacy}", "received_events_url": "https://api.github.com/users/eaplatanios/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-28T05:20:16Z", "updated_at": "2017-08-28T05:20:16Z", "author_association": "CONTRIBUTOR", "body_html": "<div class=\"email-fragment\">Thanks for the detailed response! :) I'll respond tomorrow because I'm going to bed now, but I just wanted to ask something about the requested changes. I also don't like ignoring the status. In my opinion, the right way to do this would be to change the function to take a status argument instead of creating one internally and just returning a nullptr. This would be better both because it'd be consistent with the rest of the API and because it would let the caller decide how to handle errors and maybe print information about them. I just didn't make that change because I don't know how you feel about changing the API. Would you like me to make that change or just create a new status in the function body for now?</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On Aug 28, 2017, 1:06 AM -0400, Asim Shankar ***@***.***&gt;, wrote:\n <a class=\"user-mention\" href=\"https://github.com/asimshankar\">@asimshankar</a> requested changes on this pull request.\n In tensorflow/c/eager/c_api.cc:\n &gt; @@ -151,9 +151,10 @@ TF_DeviceList* TFE_ContextListDevices(TFE_Context* ctx, TF_Status* status) {\n }\n\n TFE_TensorHandle* TFE_NewTensorHandle(TF_Tensor* t) {\n -  return new TFE_TensorHandle(\n -      tensorflow::TensorCApi::MakeTensor(t-&gt;dtype, t-&gt;shape, t-&gt;buffer),\n -      nullptr);\n +  tensorflow::Tensor tensor;\n +  // TODO: Add status argument and check on it.\n +  tensorflow::TF_TensorToTensor(t, &amp;tensor);\n I'm worried about ignoring the status result.\n At the very least, we should return nullptr if !status.ok()\n \u2014\n You are receiving this because you authored the thread.\n Reply to this email directly, view it on GitHub, or mute the thread.</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "Thanks for the detailed response! :) I'll respond tomorrow because I'm going to bed now, but I just wanted to ask something about the requested changes. I also don't like ignoring the status. In my opinion, the right way to do this would be to change the function to take a status argument instead of creating one internally and just returning a nullptr. This would be better both because it'd be consistent with the rest of the API and because it would let the caller decide how to handle errors and maybe print information about them. I just didn't make that change because I don't know how you feel about changing the API. Would you like me to make that change or just create a new status in the function body for now?\n\u2026\nOn Aug 28, 2017, 1:06 AM -0400, Asim Shankar ***@***.***>, wrote:\n @asimshankar requested changes on this pull request.\n In tensorflow/c/eager/c_api.cc:\n > @@ -151,9 +151,10 @@ TF_DeviceList* TFE_ContextListDevices(TFE_Context* ctx, TF_Status* status) {\n }\n\n TFE_TensorHandle* TFE_NewTensorHandle(TF_Tensor* t) {\n -  return new TFE_TensorHandle(\n -      tensorflow::TensorCApi::MakeTensor(t->dtype, t->shape, t->buffer),\n -      nullptr);\n +  tensorflow::Tensor tensor;\n +  // TODO: Add status argument and check on it.\n +  tensorflow::TF_TensorToTensor(t, &tensor);\n I'm worried about ignoring the status result.\n At the very least, we should return nullptr if !status.ok()\n \u2014\n You are receiving this because you authored the thread.\n Reply to this email directly, view it on GitHub, or mute the thread.", "body": "Thanks for the detailed response! :) I'll respond tomorrow because I'm going to bed now, but I just wanted to ask something about the requested changes. I also don't like ignoring the status. In my opinion, the right way to do this would be to change the function to take a status argument instead of creating one internally and just returning a nullptr. This would be better both because it'd be consistent with the rest of the API and because it would let the caller decide how to handle errors and maybe print information about them. I just didn't make that change because I don't know how you feel about changing the API. Would you like me to make that change or just create a new status in the function body for now?\n\nOn Aug 28, 2017, 1:06 AM -0400, Asim Shankar <notifications@github.com>, wrote:\n> @asimshankar requested changes on this pull request.\n> In tensorflow/c/eager/c_api.cc:\n> > @@ -151,9 +151,10 @@ TF_DeviceList* TFE_ContextListDevices(TFE_Context* ctx, TF_Status* status) {\n> }\n>\n> TFE_TensorHandle* TFE_NewTensorHandle(TF_Tensor* t) {\n> -  return new TFE_TensorHandle(\n> -      tensorflow::TensorCApi::MakeTensor(t->dtype, t->shape, t->buffer),\n> -      nullptr);\n> +  tensorflow::Tensor tensor;\n> +  // TODO: Add status argument and check on it.\n> +  tensorflow::TF_TensorToTensor(t, &tensor);\n> I'm worried about ignoring the status result.\n> At the very least, we should return nullptr if !status.ok()\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n"}
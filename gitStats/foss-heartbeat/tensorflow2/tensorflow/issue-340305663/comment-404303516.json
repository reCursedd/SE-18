{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/404303516", "html_url": "https://github.com/tensorflow/tensorflow/issues/20701#issuecomment-404303516", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20701", "id": 404303516, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDMwMzUxNg==", "user": {"login": "jjallaire", "id": 104391, "node_id": "MDQ6VXNlcjEwNDM5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/104391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jjallaire", "html_url": "https://github.com/jjallaire", "followers_url": "https://api.github.com/users/jjallaire/followers", "following_url": "https://api.github.com/users/jjallaire/following{/other_user}", "gists_url": "https://api.github.com/users/jjallaire/gists{/gist_id}", "starred_url": "https://api.github.com/users/jjallaire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jjallaire/subscriptions", "organizations_url": "https://api.github.com/users/jjallaire/orgs", "repos_url": "https://api.github.com/users/jjallaire/repos", "events_url": "https://api.github.com/users/jjallaire/events{/privacy}", "received_events_url": "https://api.github.com/users/jjallaire/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-11T20:44:52Z", "updated_at": "2018-07-11T20:44:52Z", "author_association": "NONE", "body_html": "<p>The error doesn't occur when I execute from the Python interpreter directly.</p>\n<p>It does appear to happen with other ops (I tried <code>tf.subtract</code> and <code>tf.matmul</code> and it occurred for both of those). For <code>tf.matmul</code> the error is slightly different, it occurs on this line of code:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">with</span> ops.name_scope(name, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>MatMul<span class=\"pl-pds\">\"</span></span>, [a, b]) <span class=\"pl-k\">as</span> name:</pre></div>\n<p>The specific error is:</p>\n<pre><code>SystemError: &lt;class 'tensorflow.python.framework.ops.name_scope'&gt; returned a result with an error set \n</code></pre>\n<p><code>tf$constant(1)</code> does in fact return a reasonable looking tensor.</p>\n<p>Here's how I would suggest replicating:</p>\n<ol>\n<li>\n<p>Start from a system that already has TF for Python installed and working.</p>\n</li>\n<li>\n<p>Install R</p>\n</li>\n<li>\n<p>Install the R tensorflow package from the R console:</p>\n<div class=\"highlight highlight-source-r\"><pre>install.packages(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tensorflow<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-v\">repos</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https://cran.rstudio.com<span class=\"pl-pds\">\"</span></span>)</pre></div>\n</li>\n<li>\n<p>Execute this R script:</p>\n<div class=\"highlight highlight-source-r\"><pre>library(<span class=\"pl-smi\">tensorflow</span>)\n<span class=\"pl-smi\">tf</span><span class=\"pl-k\">$</span>enable_eager_execution()\n<span class=\"pl-smi\">x</span> <span class=\"pl-k\">&lt;-</span> <span class=\"pl-smi\">tf</span><span class=\"pl-k\">$</span>constant(<span class=\"pl-c1\">1</span>)\n<span class=\"pl-smi\">tf</span><span class=\"pl-k\">$</span>add(<span class=\"pl-smi\">x</span>,<span class=\"pl-smi\">x</span>)</pre></div>\n</li>\n</ol>\n<p>R should be able to find your installation of TensorFlow. If it's in a virtualenv you may need to add this to give it a hint:</p>\n<div class=\"highlight highlight-source-r\"><pre>library(<span class=\"pl-smi\">tensorflow</span>)\nuse_virtualenv(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/path/to/virtualenv<span class=\"pl-pds\">\"</span></span>)</pre></div>", "body_text": "The error doesn't occur when I execute from the Python interpreter directly.\nIt does appear to happen with other ops (I tried tf.subtract and tf.matmul and it occurred for both of those). For tf.matmul the error is slightly different, it occurs on this line of code:\nwith ops.name_scope(name, \"MatMul\", [a, b]) as name:\nThe specific error is:\nSystemError: <class 'tensorflow.python.framework.ops.name_scope'> returned a result with an error set \n\ntf$constant(1) does in fact return a reasonable looking tensor.\nHere's how I would suggest replicating:\n\n\nStart from a system that already has TF for Python installed and working.\n\n\nInstall R\n\n\nInstall the R tensorflow package from the R console:\ninstall.packages(\"tensorflow\", repos = \"https://cran.rstudio.com\")\n\n\nExecute this R script:\nlibrary(tensorflow)\ntf$enable_eager_execution()\nx <- tf$constant(1)\ntf$add(x,x)\n\n\nR should be able to find your installation of TensorFlow. If it's in a virtualenv you may need to add this to give it a hint:\nlibrary(tensorflow)\nuse_virtualenv(\"/path/to/virtualenv\")", "body": "The error doesn't occur when I execute from the Python interpreter directly.\r\n\r\nIt does appear to happen with other ops (I tried `tf.subtract` and `tf.matmul` and it occurred for both of those). For `tf.matmul` the error is slightly different, it occurs on this line of code:\r\n\r\n```python\r\nwith ops.name_scope(name, \"MatMul\", [a, b]) as name:\r\n```\r\n\r\nThe specific error is:\r\n\r\n```\r\nSystemError: <class 'tensorflow.python.framework.ops.name_scope'> returned a result with an error set \r\n```\r\n\r\n`tf$constant(1)` does in fact return a reasonable looking tensor.\r\n\r\nHere's how I would suggest replicating:\r\n\r\n1. Start from a system that already has TF for Python installed and working.\r\n\r\n2. Install R\r\n\r\n3. Install the R tensorflow package from the R console:\r\n    \r\n    ```r\r\n    install.packages(\"tensorflow\", repos = \"https://cran.rstudio.com\")\r\n    ```\r\n\r\n4. Execute this R script:\r\n\r\n    ```r\r\n    library(tensorflow)\r\n    tf$enable_eager_execution()\r\n    x <- tf$constant(1)\r\n    tf$add(x,x)\r\n    ````\r\n\r\nR should be able to find your installation of TensorFlow. If it's in a virtualenv you may need to add this to give it a hint:\r\n\r\n```r\r\nlibrary(tensorflow)\r\nuse_virtualenv(\"/path/to/virtualenv\")\r\n```\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/332589113", "html_url": "https://github.com/tensorflow/tensorflow/pull/11089#issuecomment-332589113", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11089", "id": 332589113, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjU4OTExMw==", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-27T17:04:54Z", "updated_at": "2017-09-27T17:04:54Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=960434\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sandyskies\">@sandyskies</a> To build s3 you could invoke <code>./configure</code> then:</p>\n<pre><code>bazel build -s --config=opt --verbose_failures //tensorflow/contrib/s3:s3_file_system.so\n</code></pre>\n<p>After that, you should see an s3_file_system.so in the binary directory <code>bazel-bin/tensorflow/contrib/s3/s3_file_system.so</code>.</p>\n<p>To use S3 plugin with tensorflow, you will need to load the generated dynamic .so file:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\ntf.load_file_system_library(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/path/to/s3_file_system.so<span class=\"pl-pds\">'</span></span>)\n\n<span class=\"pl-k\">with</span> gfile.Open(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>s3://path/to/file/in/s3.txt<span class=\"pl-pds\">\"</span></span>) <span class=\"pl-k\">as</span> w:\n  w.write(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>hi<span class=\"pl-pds\">\"</span></span>) </pre></div>\n<p>You could config the access and secret key the same way you config for you system and it will be picked up automically.</p>", "body_text": "@sandyskies To build s3 you could invoke ./configure then:\nbazel build -s --config=opt --verbose_failures //tensorflow/contrib/s3:s3_file_system.so\n\nAfter that, you should see an s3_file_system.so in the binary directory bazel-bin/tensorflow/contrib/s3/s3_file_system.so.\nTo use S3 plugin with tensorflow, you will need to load the generated dynamic .so file:\nimport tensorflow as tf\ntf.load_file_system_library('/path/to/s3_file_system.so')\n\nwith gfile.Open(\"s3://path/to/file/in/s3.txt\") as w:\n  w.write(\"hi\") \nYou could config the access and secret key the same way you config for you system and it will be picked up automically.", "body": "@sandyskies To build s3 you could invoke `./configure` then:\r\n```\r\nbazel build -s --config=opt --verbose_failures //tensorflow/contrib/s3:s3_file_system.so\r\n```\r\nAfter that, you should see an s3_file_system.so in the binary directory `bazel-bin/tensorflow/contrib/s3/s3_file_system.so`.\r\n\r\nTo use S3 plugin with tensorflow, you will need to load the generated dynamic .so file:\r\n```python\r\nimport tensorflow as tf\r\ntf.load_file_system_library('/path/to/s3_file_system.so')\r\n\r\nwith gfile.Open(\"s3://path/to/file/in/s3.txt\") as w:\r\n  w.write(\"hi\") \r\n```\r\n\r\nYou could config the access and secret key the same way you config for you system and it will be picked up automically."}
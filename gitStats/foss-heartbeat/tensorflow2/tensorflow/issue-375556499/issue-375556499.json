{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23380", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23380/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23380/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23380/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23380", "id": 375556499, "node_id": "MDU6SXNzdWUzNzU1NTY0OTk=", "number": 23380, "title": "MKL option not building successfully", "user": {"login": "sadatnfs", "id": 19790145, "node_id": "MDQ6VXNlcjE5NzkwMTQ1", "avatar_url": "https://avatars2.githubusercontent.com/u/19790145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sadatnfs", "html_url": "https://github.com/sadatnfs", "followers_url": "https://api.github.com/users/sadatnfs/followers", "following_url": "https://api.github.com/users/sadatnfs/following{/other_user}", "gists_url": "https://api.github.com/users/sadatnfs/gists{/gist_id}", "starred_url": "https://api.github.com/users/sadatnfs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sadatnfs/subscriptions", "organizations_url": "https://api.github.com/users/sadatnfs/orgs", "repos_url": "https://api.github.com/users/sadatnfs/repos", "events_url": "https://api.github.com/users/sadatnfs/events{/privacy}", "received_events_url": "https://api.github.com/users/sadatnfs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-10-30T15:40:30Z", "updated_at": "2018-11-13T15:42:46Z", "closed_at": "2018-11-02T05:58:49Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Hello,</p>\n<p>TF isn't building for me with the MKL option (this problem started a couple days ago).<br>\nBuild call and error trace are below. I'm trying to build in a Docker.</p>\n<p>For what its worth, I actually have base MKL and MKL-DNN built into my system already, but I've never been able to make TF actually pick up those libraries (always errorred out).</p>\n<p><strong>System information</strong></p>\n<ul>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian:Stretch</li>\n<li>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A</li>\n<li>TensorFlow installed from (source or binary): source</li>\n<li>TensorFlow version: Master branch</li>\n<li>Python version: 3.6.5</li>\n<li>Installed using virtualenv? pip? conda?: N/A</li>\n<li>Bazel version (if compiling from source): 0.19.0</li>\n<li>GCC/Compiler version (if compiling from source): 8.2.0</li>\n<li>CUDA/cuDNN version: N/A</li>\n<li>GPU model and memory: N/A</li>\n</ul>\n<p><strong>Build call</strong></p>\n<div class=\"highlight highlight-source-shell\"><pre><span class=\"pl-c1\">echo</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">|</span> sudo tee /etc/apt/sources.list.d/bazel.list <span class=\"pl-k\">&amp;&amp;</span> \\\n    curl https://bazel.build/bazel-release.pub.gpg <span class=\"pl-k\">|</span> sudo apt-key add - <span class=\"pl-k\">&amp;&amp;</span> \\\n    apt-get update <span class=\"pl-k\">&amp;&amp;</span> apt-get install -y bazel  <span class=\"pl-k\">&amp;&amp;</span> rm -rf /var/lib/apt/lists/<span class=\"pl-k\">*</span> <span class=\"pl-k\">&amp;&amp;</span> \\\n    ldconfig <span class=\"pl-k\">&amp;&amp;</span> \\\n    pip uninstall -y tensorflow-tensorboard tfp-nightly tensorflow_estimator tb-nightly tf-nightly tensorflow <span class=\"pl-k\">&amp;&amp;</span> \\\n    <span class=\"pl-c1\">cd</span> /opt <span class=\"pl-k\">&amp;&amp;</span> \\\n    git clone https://github.com/tensorflow/tensorflow.git <span class=\"pl-k\">&amp;&amp;</span> \\\n    <span class=\"pl-c1\">cd</span> /opt/tensorflow <span class=\"pl-k\">&amp;&amp;</span> \\\n    /bin/bash ./configure \\\n    <span class=\"pl-k\">&amp;&amp;</span> \\\n    bazel build \\\n    --config=mkl --config=opt \\\n    --cxxopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-D_GLIBCXX_USE_CXX11_ABI=0<span class=\"pl-pds\">\"</span></span> \\\n    --copt=-msse4.2 --copt=-msse4.1 --copt=-mavx --copt=-msse2 --copt=-msse3  \\\n    --copt=-O3 --copt=-mfpmath=both \\\n    --copt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-DMKL_LP64<span class=\"pl-pds\">\"</span></span> \\\n    --copt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-fPIC<span class=\"pl-pds\">\"</span></span> \\\n    --linkopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-lmkl_gf_lp64<span class=\"pl-pds\">\"</span></span> \\\n    --linkopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-lmkl_gnu_thread<span class=\"pl-pds\">\"</span></span> \\\n    --linkopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-dl<span class=\"pl-pds\">\"</span></span> \\\n    --linkopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-lpthread<span class=\"pl-pds\">\"</span></span> \\\n    --linkopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-lmkl_core<span class=\"pl-pds\">\"</span></span> \\\n    --linkopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-lm<span class=\"pl-pds\">\"</span></span> \\\n    --linkopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-lmkl_rt<span class=\"pl-pds\">\"</span></span> \\\n    --linkopt=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-lmkldnn<span class=\"pl-pds\">\"</span></span> \\\n    tensorflow/tools/pip_package:build_pip_package <span class=\"pl-k\">&amp;&amp;</span> \\\n    bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip <span class=\"pl-k\">&amp;&amp;</span> \\\n    pip install --no-deps /tmp/pip/tensorflow-<span class=\"pl-k\">*</span>.whl <span class=\"pl-k\">&amp;&amp;</span> \\\n    <span class=\"pl-c1\">cd</span> /opt <span class=\"pl-k\">&amp;&amp;</span> rm -rf /opt/tensorflow /tmp/<span class=\"pl-k\">*</span> <span class=\"pl-k\">&amp;&amp;</span> \\\n    python -c <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>import tensorflow as tf; hello = tf.constant('Hello, TensorFlow!'); sess = tf.Session(); print(sess.run(hello))<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">&amp;&amp;</span> \\\n    python -c <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>import tensorboard<span class=\"pl-pds\">\"</span></span></pre></div>\n<p>** Error trace **</p>\n<div class=\"highlight highlight-source-shell\"><pre>Preconfigured Bazel build configs. You can use any of the below by adding <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>--config=&lt;&gt;<span class=\"pl-pds\">\"</span></span> to your build command. See .bazelrc <span class=\"pl-k\">for</span> more details.\n\t--config=mkl         \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Build with MKL support.</span>\n\t--config=monolithic  \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Config for mostly static monolithic build.</span>\n\t--config=gdr         \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Build with GDR support.</span>\n\t--config=verbs       \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Build with libverbs support.</span>\n\t--config=ngraph      \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Build with Intel nGraph support.</span>\n\t--config=dynamic_kernels\t<span class=\"pl-c\"><span class=\"pl-c\">#</span> (Experimental) Build kernels into separate shared objects.</span>\nPreconfigured Bazel build configs to DISABLE default on features:\n\t--config=noaws       \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Disable AWS S3 filesystem support.</span>\n\t--config=nogcp       \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Disable GCP support.</span>\n\t--config=nohdfs      \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Disable HDFS support.</span>\n\t--config=noignite    \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Disable Apacha Ignite support.</span>\n\t--config=nokafka     \t<span class=\"pl-c\"><span class=\"pl-c\">#</span> Disable Apache Kafka support.</span>\nConfiguration finished\n\ufffd[91mWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\n/opt/tensorflow/tools/bazel.rc\n\ufffd[0m\ufffd[91mStarting <span class=\"pl-k\">local</span> Bazel server and connecting to it...\n\ufffd[0m\ufffd[91mINFO: Options provided by the client:\n  Inherited <span class=\"pl-s\"><span class=\"pl-pds\">'</span>common<span class=\"pl-pds\">'</span></span> options: --isatty<span class=\"pl-k\">=</span>0 --terminal_columns<span class=\"pl-k\">=</span>80\n\ufffd[0m\ufffd[91mINFO: Reading rc options <span class=\"pl-k\">for</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>build<span class=\"pl-pds\">'</span></span> from /opt/tensorflow/.tf_configure.bazelrc:\n  <span class=\"pl-s\"><span class=\"pl-pds\">'</span>build<span class=\"pl-pds\">'</span></span> options: --action_env PYTHON_BIN_PATH<span class=\"pl-k\">=</span>/opt/conda/bin/python --action_env PYTHON_LIB_PATH<span class=\"pl-k\">=</span>/opt/conda/lib/python3.6/site-packages --python_path<span class=\"pl-k\">=</span>/opt/conda/bin/python --action_env TF_NEED_OPENCL_SYCL<span class=\"pl-k\">=</span>0 --action_env TF_NEED_ROCM<span class=\"pl-k\">=</span>0 --action_env TF_NEED_CUDA<span class=\"pl-k\">=</span>0 --action_env TF_DOWNLOAD_CLANG<span class=\"pl-k\">=</span>0\nERROR: Config value mkl is not defined <span class=\"pl-k\">in</span> any .rc file\n\ufffd[0mThe command '/bin/sh -c echo \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list &amp;&amp;     curl https://bazel.build/bazel-release.pub.gpg | sudo apt-key add - &amp;&amp;     apt-get update &amp;&amp; apt-get install -y bazel  &amp;&amp; rm -rf /var/lib/apt/lists/* &amp;&amp;     ldconfig &amp;&amp;     pip uninstall -y tensorflow-tensorboard tfp-nightly tensorflow_estimator tb-nightly tf-nightly tensorflow &amp;&amp;     cd /opt &amp;&amp;     git clone https://github.com/tensorflow/tensorflow.git &amp;&amp;     cd /opt/tensorflow &amp;&amp;     /bin/bash ./configure     &amp;&amp;     bazel build     --config=mkl --config=opt     --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"     --copt=-msse4.2 --copt=-msse4.1 --copt=-mavx --copt=-msse2 --copt=-msse3      --copt=-O3 --copt=-mfpmath=both     --copt=\"-DMKL_LP64\"     --copt=\"-fPIC\"     --linkopt=\"-lmkl_gf_lp64\"     --linkopt=\"-lmkl_gnu_thread\"     --linkopt=\"-dl\"     --linkopt=\"-lpthread\"     --linkopt=\"-lmkl_core\"     --linkopt=\"-lm\"     --linkopt=\"-lmkl_rt\"     --linkopt=\"-lmkldnn\"     tensorflow/tools/pip_package:build_pip_package &amp;&amp;     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &amp;&amp;     pip install --no-deps /tmp/pip/tensorflow-*.whl &amp;&amp;     cd /opt &amp;&amp; rm -rf /opt/tensorflow /tmp/* &amp;&amp;     python -c \"import tensorflow as tf; hello = tf.constant('Hello, TensorFlow!'); sess = tf.Session(); print(sess.run(hello))\" &amp;&amp;     python -c \"import tensorboard\"' returned a non-zero code: 2</pre></div>", "body_text": "Hello,\nTF isn't building for me with the MKL option (this problem started a couple days ago).\nBuild call and error trace are below. I'm trying to build in a Docker.\nFor what its worth, I actually have base MKL and MKL-DNN built into my system already, but I've never been able to make TF actually pick up those libraries (always errorred out).\nSystem information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian:Stretch\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\nTensorFlow installed from (source or binary): source\nTensorFlow version: Master branch\nPython version: 3.6.5\nInstalled using virtualenv? pip? conda?: N/A\nBazel version (if compiling from source): 0.19.0\nGCC/Compiler version (if compiling from source): 8.2.0\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\n\nBuild call\necho \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list && \\\n    curl https://bazel.build/bazel-release.pub.gpg | sudo apt-key add - && \\\n    apt-get update && apt-get install -y bazel  && rm -rf /var/lib/apt/lists/* && \\\n    ldconfig && \\\n    pip uninstall -y tensorflow-tensorboard tfp-nightly tensorflow_estimator tb-nightly tf-nightly tensorflow && \\\n    cd /opt && \\\n    git clone https://github.com/tensorflow/tensorflow.git && \\\n    cd /opt/tensorflow && \\\n    /bin/bash ./configure \\\n    && \\\n    bazel build \\\n    --config=mkl --config=opt \\\n    --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" \\\n    --copt=-msse4.2 --copt=-msse4.1 --copt=-mavx --copt=-msse2 --copt=-msse3  \\\n    --copt=-O3 --copt=-mfpmath=both \\\n    --copt=\"-DMKL_LP64\" \\\n    --copt=\"-fPIC\" \\\n    --linkopt=\"-lmkl_gf_lp64\" \\\n    --linkopt=\"-lmkl_gnu_thread\" \\\n    --linkopt=\"-dl\" \\\n    --linkopt=\"-lpthread\" \\\n    --linkopt=\"-lmkl_core\" \\\n    --linkopt=\"-lm\" \\\n    --linkopt=\"-lmkl_rt\" \\\n    --linkopt=\"-lmkldnn\" \\\n    tensorflow/tools/pip_package:build_pip_package && \\\n    bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip && \\\n    pip install --no-deps /tmp/pip/tensorflow-*.whl && \\\n    cd /opt && rm -rf /opt/tensorflow /tmp/* && \\\n    python -c \"import tensorflow as tf; hello = tf.constant('Hello, TensorFlow!'); sess = tf.Session(); print(sess.run(hello))\" && \\\n    python -c \"import tensorboard\"\n** Error trace **\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\n\t--config=mkl         \t# Build with MKL support.\n\t--config=monolithic  \t# Config for mostly static monolithic build.\n\t--config=gdr         \t# Build with GDR support.\n\t--config=verbs       \t# Build with libverbs support.\n\t--config=ngraph      \t# Build with Intel nGraph support.\n\t--config=dynamic_kernels\t# (Experimental) Build kernels into separate shared objects.\nPreconfigured Bazel build configs to DISABLE default on features:\n\t--config=noaws       \t# Disable AWS S3 filesystem support.\n\t--config=nogcp       \t# Disable GCP support.\n\t--config=nohdfs      \t# Disable HDFS support.\n\t--config=noignite    \t# Disable Apacha Ignite support.\n\t--config=nokafka     \t# Disable Apache Kafka support.\nConfiguration finished\n\ufffd[91mWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\n/opt/tensorflow/tools/bazel.rc\n\ufffd[0m\ufffd[91mStarting local Bazel server and connecting to it...\n\ufffd[0m\ufffd[91mINFO: Options provided by the client:\n  Inherited 'common' options: --isatty=0 --terminal_columns=80\n\ufffd[0m\ufffd[91mINFO: Reading rc options for 'build' from /opt/tensorflow/.tf_configure.bazelrc:\n  'build' options: --action_env PYTHON_BIN_PATH=/opt/conda/bin/python --action_env PYTHON_LIB_PATH=/opt/conda/lib/python3.6/site-packages --python_path=/opt/conda/bin/python --action_env TF_NEED_OPENCL_SYCL=0 --action_env TF_NEED_ROCM=0 --action_env TF_NEED_CUDA=0 --action_env TF_DOWNLOAD_CLANG=0\nERROR: Config value mkl is not defined in any .rc file\n\ufffd[0mThe command '/bin/sh -c echo \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list &&     curl https://bazel.build/bazel-release.pub.gpg | sudo apt-key add - &&     apt-get update && apt-get install -y bazel  && rm -rf /var/lib/apt/lists/* &&     ldconfig &&     pip uninstall -y tensorflow-tensorboard tfp-nightly tensorflow_estimator tb-nightly tf-nightly tensorflow &&     cd /opt &&     git clone https://github.com/tensorflow/tensorflow.git &&     cd /opt/tensorflow &&     /bin/bash ./configure     &&     bazel build     --config=mkl --config=opt     --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"     --copt=-msse4.2 --copt=-msse4.1 --copt=-mavx --copt=-msse2 --copt=-msse3      --copt=-O3 --copt=-mfpmath=both     --copt=\"-DMKL_LP64\"     --copt=\"-fPIC\"     --linkopt=\"-lmkl_gf_lp64\"     --linkopt=\"-lmkl_gnu_thread\"     --linkopt=\"-dl\"     --linkopt=\"-lpthread\"     --linkopt=\"-lmkl_core\"     --linkopt=\"-lm\"     --linkopt=\"-lmkl_rt\"     --linkopt=\"-lmkldnn\"     tensorflow/tools/pip_package:build_pip_package &&     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &&     pip install --no-deps /tmp/pip/tensorflow-*.whl &&     cd /opt && rm -rf /opt/tensorflow /tmp/* &&     python -c \"import tensorflow as tf; hello = tf.constant('Hello, TensorFlow!'); sess = tf.Session(); print(sess.run(hello))\" &&     python -c \"import tensorboard\"' returned a non-zero code: 2", "body": "Hello,\r\n\r\nTF isn't building for me with the MKL option (this problem started a couple days ago).\r\nBuild call and error trace are below. I'm trying to build in a Docker.\r\n\r\nFor what its worth, I actually have base MKL and MKL-DNN built into my system already, but I've never been able to make TF actually pick up those libraries (always errorred out).\r\n\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian:Stretch\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: Master branch\r\n- Python version: 3.6.5\r\n- Installed using virtualenv? pip? conda?: N/A\r\n- Bazel version (if compiling from source): 0.19.0\r\n- GCC/Compiler version (if compiling from source): 8.2.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Build call**\r\n\r\n```bash \r\necho \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list && \\\r\n    curl https://bazel.build/bazel-release.pub.gpg | sudo apt-key add - && \\\r\n    apt-get update && apt-get install -y bazel  && rm -rf /var/lib/apt/lists/* && \\\r\n    ldconfig && \\\r\n    pip uninstall -y tensorflow-tensorboard tfp-nightly tensorflow_estimator tb-nightly tf-nightly tensorflow && \\\r\n    cd /opt && \\\r\n    git clone https://github.com/tensorflow/tensorflow.git && \\\r\n    cd /opt/tensorflow && \\\r\n    /bin/bash ./configure \\\r\n    && \\\r\n    bazel build \\\r\n    --config=mkl --config=opt \\\r\n    --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" \\\r\n    --copt=-msse4.2 --copt=-msse4.1 --copt=-mavx --copt=-msse2 --copt=-msse3  \\\r\n    --copt=-O3 --copt=-mfpmath=both \\\r\n    --copt=\"-DMKL_LP64\" \\\r\n    --copt=\"-fPIC\" \\\r\n    --linkopt=\"-lmkl_gf_lp64\" \\\r\n    --linkopt=\"-lmkl_gnu_thread\" \\\r\n    --linkopt=\"-dl\" \\\r\n    --linkopt=\"-lpthread\" \\\r\n    --linkopt=\"-lmkl_core\" \\\r\n    --linkopt=\"-lm\" \\\r\n    --linkopt=\"-lmkl_rt\" \\\r\n    --linkopt=\"-lmkldnn\" \\\r\n    tensorflow/tools/pip_package:build_pip_package && \\\r\n    bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip && \\\r\n    pip install --no-deps /tmp/pip/tensorflow-*.whl && \\\r\n    cd /opt && rm -rf /opt/tensorflow /tmp/* && \\\r\n    python -c \"import tensorflow as tf; hello = tf.constant('Hello, TensorFlow!'); sess = tf.Session(); print(sess.run(hello))\" && \\\r\n    python -c \"import tensorboard\"\r\n```\r\n\r\n\r\n** Error trace **\r\n```bash \r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n\t--config=mkl         \t# Build with MKL support.\r\n\t--config=monolithic  \t# Config for mostly static monolithic build.\r\n\t--config=gdr         \t# Build with GDR support.\r\n\t--config=verbs       \t# Build with libverbs support.\r\n\t--config=ngraph      \t# Build with Intel nGraph support.\r\n\t--config=dynamic_kernels\t# (Experimental) Build kernels into separate shared objects.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n\t--config=noaws       \t# Disable AWS S3 filesystem support.\r\n\t--config=nogcp       \t# Disable GCP support.\r\n\t--config=nohdfs      \t# Disable HDFS support.\r\n\t--config=noignite    \t# Disable Apacha Ignite support.\r\n\t--config=nokafka     \t# Disable Apache Kafka support.\r\nConfiguration finished\r\n\u001b[91mWARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:\r\n/opt/tensorflow/tools/bazel.rc\r\n\u001b[0m\u001b[91mStarting local Bazel server and connecting to it...\r\n\u001b[0m\u001b[91mINFO: Options provided by the client:\r\n  Inherited 'common' options: --isatty=0 --terminal_columns=80\r\n\u001b[0m\u001b[91mINFO: Reading rc options for 'build' from /opt/tensorflow/.tf_configure.bazelrc:\r\n  'build' options: --action_env PYTHON_BIN_PATH=/opt/conda/bin/python --action_env PYTHON_LIB_PATH=/opt/conda/lib/python3.6/site-packages --python_path=/opt/conda/bin/python --action_env TF_NEED_OPENCL_SYCL=0 --action_env TF_NEED_ROCM=0 --action_env TF_NEED_CUDA=0 --action_env TF_DOWNLOAD_CLANG=0\r\nERROR: Config value mkl is not defined in any .rc file\r\n\u001b[0mThe command '/bin/sh -c echo \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list &&     curl https://bazel.build/bazel-release.pub.gpg | sudo apt-key add - &&     apt-get update && apt-get install -y bazel  && rm -rf /var/lib/apt/lists/* &&     ldconfig &&     pip uninstall -y tensorflow-tensorboard tfp-nightly tensorflow_estimator tb-nightly tf-nightly tensorflow &&     cd /opt &&     git clone https://github.com/tensorflow/tensorflow.git &&     cd /opt/tensorflow &&     /bin/bash ./configure     &&     bazel build     --config=mkl --config=opt     --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\"     --copt=-msse4.2 --copt=-msse4.1 --copt=-mavx --copt=-msse2 --copt=-msse3      --copt=-O3 --copt=-mfpmath=both     --copt=\"-DMKL_LP64\"     --copt=\"-fPIC\"     --linkopt=\"-lmkl_gf_lp64\"     --linkopt=\"-lmkl_gnu_thread\"     --linkopt=\"-dl\"     --linkopt=\"-lpthread\"     --linkopt=\"-lmkl_core\"     --linkopt=\"-lm\"     --linkopt=\"-lmkl_rt\"     --linkopt=\"-lmkldnn\"     tensorflow/tools/pip_package:build_pip_package &&     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &&     pip install --no-deps /tmp/pip/tensorflow-*.whl &&     cd /opt && rm -rf /opt/tensorflow /tmp/* &&     python -c \"import tensorflow as tf; hello = tf.constant('Hello, TensorFlow!'); sess = tf.Session(); print(sess.run(hello))\" &&     python -c \"import tensorboard\"' returned a non-zero code: 2\r\n```\r\n\r\n "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/301411941", "html_url": "https://github.com/tensorflow/tensorflow/pull/9875#issuecomment-301411941", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9875", "id": 301411941, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTQxMTk0MQ==", "user": {"login": "shuuki4", "id": 12455653, "node_id": "MDQ6VXNlcjEyNDU1NjUz", "avatar_url": "https://avatars2.githubusercontent.com/u/12455653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shuuki4", "html_url": "https://github.com/shuuki4", "followers_url": "https://api.github.com/users/shuuki4/followers", "following_url": "https://api.github.com/users/shuuki4/following{/other_user}", "gists_url": "https://api.github.com/users/shuuki4/gists{/gist_id}", "starred_url": "https://api.github.com/users/shuuki4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shuuki4/subscriptions", "organizations_url": "https://api.github.com/users/shuuki4/orgs", "repos_url": "https://api.github.com/users/shuuki4/repos", "events_url": "https://api.github.com/users/shuuki4/events{/privacy}", "received_events_url": "https://api.github.com/users/shuuki4/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-15T08:37:13Z", "updated_at": "2017-05-15T08:37:13Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6323467\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/chenghuige\">@chenghuige</a> That is true. It will be better to treat two values as tensor since top_k operation can handle <code>k</code> as tensor.</p>\n<pre><code>from tensorflow.python.ops import gen_math_ops\n\n...\n\nnext_beam_size = gen_math_ops.minimum(\n  ops.convert_to_tensor(\n    beam_width, dtype=tf.int32, name=\"beam_width\"),\n  ops.convert_to_tensor(\n    scores_flat.shape[-1], dtype=tf.int32, name=\"num_available\"))\n</code></pre>\n<p>Will this code be OK?</p>", "body_text": "@chenghuige That is true. It will be better to treat two values as tensor since top_k operation can handle k as tensor.\nfrom tensorflow.python.ops import gen_math_ops\n\n...\n\nnext_beam_size = gen_math_ops.minimum(\n  ops.convert_to_tensor(\n    beam_width, dtype=tf.int32, name=\"beam_width\"),\n  ops.convert_to_tensor(\n    scores_flat.shape[-1], dtype=tf.int32, name=\"num_available\"))\n\nWill this code be OK?", "body": "@chenghuige That is true. It will be better to treat two values as tensor since top_k operation can handle `k` as tensor.\r\n```\r\nfrom tensorflow.python.ops import gen_math_ops\r\n\r\n...\r\n\r\nnext_beam_size = gen_math_ops.minimum(\r\n  ops.convert_to_tensor(\r\n    beam_width, dtype=tf.int32, name=\"beam_width\"),\r\n  ops.convert_to_tensor(\r\n    scores_flat.shape[-1], dtype=tf.int32, name=\"num_available\"))\r\n```\r\nWill this code be OK?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1839", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1839/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1839/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1839/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1839", "id": 147244936, "node_id": "MDU6SXNzdWUxNDcyNDQ5MzY=", "number": 1839, "title": "Got \"ValueError: array must not contain infs or NaNs\" error in word2vec_basic.py.", "user": {"login": "zhongzyd", "id": 6659973, "node_id": "MDQ6VXNlcjY2NTk5NzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/6659973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhongzyd", "html_url": "https://github.com/zhongzyd", "followers_url": "https://api.github.com/users/zhongzyd/followers", "following_url": "https://api.github.com/users/zhongzyd/following{/other_user}", "gists_url": "https://api.github.com/users/zhongzyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhongzyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhongzyd/subscriptions", "organizations_url": "https://api.github.com/users/zhongzyd/orgs", "repos_url": "https://api.github.com/users/zhongzyd/repos", "events_url": "https://api.github.com/users/zhongzyd/events{/privacy}", "received_events_url": "https://api.github.com/users/zhongzyd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-04-10T17:39:43Z", "updated_at": "2016-11-03T23:14:09Z", "closed_at": "2016-05-10T21:21:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I ran <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/word2vec/word2vec_basic.py\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/word2vec/word2vec_basic.py</a>, and got \"ValueError: array must not contain infs or NaNs\" error from this line \"low_dim_embs = tsne.fit_transform(final_embeddings[:plot_only,:])\".<br>\nThere wasn't any inf or Nan in final_embeddings[:plot_only,:].<br>\nI think it is scipy or numpy's issue.<br>\nIs there any suggestion for me ?</p>\n<h3>Environment info</h3>\n<p>Operating System:OS X EI Capitan 10.11.4<br>\nunder anaconda python 3.5<br>\nnumpy (1.11.0)<br>\nscipy (0.17.0)</p>\n<p>Installed version of CUDA and cuDNN:<br>\nDidn't install CUDA.</p>\n<p>If installed from sources, provide the commit hash:<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/de5101da4638ac469041575dadb4921ebb33eb6a/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/de5101da4638ac469041575dadb4921ebb33eb6a\"><tt>de5101d</tt></a></p>\n<h3>Steps to reproduce</h3>\n<p>python3 word2vec_basic.py</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>Traceback (most recent call last):<br>\nFile \"word2vec_basic.py\", line 237, in <br>\nlow_dim_embs = tsne.fit_transform(final_embeddings[:plot_only,:])<br>\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 866, in fit_transform<br>\nembedding = self._fit(X)<br>\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 777, in _fit<br>\nskip_num_points=skip_num_points)<br>\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 832, in _tsne<br>\nparams, error, it = _gradient_descent(obj_func, params, **opt_args)<br>\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 387, in _gradient_descent<br>\ngrad_norm = linalg.norm(grad)<br>\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/scipy/linalg/misc.py\", line 129, in norm<br>\na = np.asarray_chkfinite(a)<br>\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/numpy-1.11.0-py3.5-macosx-10.5-x86_64.egg/numpy/lib/function_base.py\", line 1022, in asarray_chkfinite<br>\n\"array must not contain infs or NaNs\")<br>\nValueError: array must not contain infs or NaNs</p>", "body_text": "I ran https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/word2vec/word2vec_basic.py, and got \"ValueError: array must not contain infs or NaNs\" error from this line \"low_dim_embs = tsne.fit_transform(final_embeddings[:plot_only,:])\".\nThere wasn't any inf or Nan in final_embeddings[:plot_only,:].\nI think it is scipy or numpy's issue.\nIs there any suggestion for me ?\nEnvironment info\nOperating System:OS X EI Capitan 10.11.4\nunder anaconda python 3.5\nnumpy (1.11.0)\nscipy (0.17.0)\nInstalled version of CUDA and cuDNN:\nDidn't install CUDA.\nIf installed from sources, provide the commit hash:\nde5101d\nSteps to reproduce\npython3 word2vec_basic.py\nLogs or other output that would be helpful\nTraceback (most recent call last):\nFile \"word2vec_basic.py\", line 237, in \nlow_dim_embs = tsne.fit_transform(final_embeddings[:plot_only,:])\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 866, in fit_transform\nembedding = self._fit(X)\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 777, in _fit\nskip_num_points=skip_num_points)\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 832, in _tsne\nparams, error, it = _gradient_descent(obj_func, params, **opt_args)\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 387, in _gradient_descent\ngrad_norm = linalg.norm(grad)\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/scipy/linalg/misc.py\", line 129, in norm\na = np.asarray_chkfinite(a)\nFile \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/numpy-1.11.0-py3.5-macosx-10.5-x86_64.egg/numpy/lib/function_base.py\", line 1022, in asarray_chkfinite\n\"array must not contain infs or NaNs\")\nValueError: array must not contain infs or NaNs", "body": "I ran https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/word2vec/word2vec_basic.py, and got \"ValueError: array must not contain infs or NaNs\" error from this line \"low_dim_embs = tsne.fit_transform(final_embeddings[:plot_only,:])\".\nThere wasn't any inf or Nan in final_embeddings[:plot_only,:].\nI think it is scipy or numpy's issue. \nIs there any suggestion for me ?\n### Environment info\n\nOperating System:OS X EI Capitan 10.11.4\nunder anaconda python 3.5\nnumpy (1.11.0)\nscipy (0.17.0)\n\nInstalled version of CUDA and cuDNN: \nDidn't install CUDA.\n\nIf installed from sources, provide the commit hash:\nde5101da4638ac469041575dadb4921ebb33eb6a\n### Steps to reproduce\n\npython3 word2vec_basic.py\n### Logs or other output that would be helpful\n\nTraceback (most recent call last):\n  File \"word2vec_basic.py\", line 237, in <module>\n    low_dim_embs = tsne.fit_transform(final_embeddings[:plot_only,:])\n  File \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 866, in fit_transform\n    embedding = self._fit(X)\n  File \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 777, in _fit\n    skip_num_points=skip_num_points)\n  File \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 832, in _tsne\n    params, error, it = _gradient_descent(obj_func, params, **opt_args)\n  File \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/sklearn/manifold/t_sne.py\", line 387, in _gradient_descent\n    grad_norm = linalg.norm(grad)\n  File \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/scipy/linalg/misc.py\", line 129, in norm\n    a = np.asarray_chkfinite(a)\n  File \"/Users/zhongzyd/anaconda/envs/TensorFlow-master/lib/python3.5/site-packages/numpy-1.11.0-py3.5-macosx-10.5-x86_64.egg/numpy/lib/function_base.py\", line 1022, in asarray_chkfinite\n    \"array must not contain infs or NaNs\")\nValueError: array must not contain infs or NaNs\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22484", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22484/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22484/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22484/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22484", "id": 363173430, "node_id": "MDU6SXNzdWUzNjMxNzM0MzA=", "number": 22484, "title": "CollectiveAllReduceStrategy \"Out of range: End of sequence\" warnings", "user": {"login": "nvcastet", "id": 26874160, "node_id": "MDQ6VXNlcjI2ODc0MTYw", "avatar_url": "https://avatars2.githubusercontent.com/u/26874160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nvcastet", "html_url": "https://github.com/nvcastet", "followers_url": "https://api.github.com/users/nvcastet/followers", "following_url": "https://api.github.com/users/nvcastet/following{/other_user}", "gists_url": "https://api.github.com/users/nvcastet/gists{/gist_id}", "starred_url": "https://api.github.com/users/nvcastet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nvcastet/subscriptions", "organizations_url": "https://api.github.com/users/nvcastet/orgs", "repos_url": "https://api.github.com/users/nvcastet/repos", "events_url": "https://api.github.com/users/nvcastet/events{/privacy}", "received_events_url": "https://api.github.com/users/nvcastet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, {"login": "dubey", "id": 2314265, "node_id": "MDQ6VXNlcjIzMTQyNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2314265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dubey", "html_url": "https://github.com/dubey", "followers_url": "https://api.github.com/users/dubey/followers", "following_url": "https://api.github.com/users/dubey/following{/other_user}", "gists_url": "https://api.github.com/users/dubey/gists{/gist_id}", "starred_url": "https://api.github.com/users/dubey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dubey/subscriptions", "organizations_url": "https://api.github.com/users/dubey/orgs", "repos_url": "https://api.github.com/users/dubey/repos", "events_url": "https://api.github.com/users/dubey/events{/privacy}", "received_events_url": "https://api.github.com/users/dubey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-09-24T14:32:52Z", "updated_at": "2018-11-14T19:26:54Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<p>Have I written custom code (as opposed to using a stock example script provided in TensorFlow):<br>\nNo<br>\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):<br>\nUbuntu 16.04.4 ppc64le<br>\nTensorFlow installed from (source or binary):<br>\nsource<br>\nTensorFlow version (use command below):<br>\n1.11<br>\nPython version: Python 2.7.15<br>\nCUDA/cuDNN version: Cuda 9.2 CuDNN 7.2.1<br>\nGPU model and memory: V100 16GB<br>\nExact command to reproduce: python keras_model_to_estimator.py /tmp/tfkeras_example</p>\n<h3>Describe the problem</h3>\n<p>Running the <a href=\"https://github.com/tensorflow/ecosystem/blob/master/distribution_strategy/keras_model_to_estimator.py\">ecosystem CollectiveAllReduceStrategy estimator example </a> on a box with 2GPUs, we get those warning constantly after the last step of an epoch:</p>\n<pre><code>INFO:tensorflow:loss = 0.6660614, step = 1500 (0.288 sec)\n2018-09-21 19:23:01.075834: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\n\t [[{{node FunctionBufferingResourceGetNext_1}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](FunctionBufferingResource_1)]]\n2018-09-21 19:23:01.075843: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\n\t [[{{node FunctionBufferingResourceGetNext}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](FunctionBufferingResource)]]\n\t [[{{node global_step/Read/ReadVariableOp/_171}} = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_550_global_step/Read/ReadVariableOp\", tensor_type=DT_INT64, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\n2018-09-21 19:23:01.076090: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\n\t [[{{node FunctionBufferingResourceGetNext}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](FunctionBufferingResource)]]\n</code></pre>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1647833\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yuefengz\">@yuefengz</a>: Do you also see the same warnings in your test logs?</p>", "body_text": "System information\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nNo\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04.4 ppc64le\nTensorFlow installed from (source or binary):\nsource\nTensorFlow version (use command below):\n1.11\nPython version: Python 2.7.15\nCUDA/cuDNN version: Cuda 9.2 CuDNN 7.2.1\nGPU model and memory: V100 16GB\nExact command to reproduce: python keras_model_to_estimator.py /tmp/tfkeras_example\nDescribe the problem\nRunning the ecosystem CollectiveAllReduceStrategy estimator example  on a box with 2GPUs, we get those warning constantly after the last step of an epoch:\nINFO:tensorflow:loss = 0.6660614, step = 1500 (0.288 sec)\n2018-09-21 19:23:01.075834: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\n\t [[{{node FunctionBufferingResourceGetNext_1}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](FunctionBufferingResource_1)]]\n2018-09-21 19:23:01.075843: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\n\t [[{{node FunctionBufferingResourceGetNext}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](FunctionBufferingResource)]]\n\t [[{{node global_step/Read/ReadVariableOp/_171}} = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_550_global_step/Read/ReadVariableOp\", tensor_type=DT_INT64, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\n2018-09-21 19:23:01.076090: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\n\t [[{{node FunctionBufferingResourceGetNext}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](FunctionBufferingResource)]]\n\n@yuefengz: Do you also see the same warnings in your test logs?", "body": "### System information\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nNo\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUbuntu 16.04.4 ppc64le\r\nTensorFlow installed from (source or binary):\r\nsource\r\nTensorFlow version (use command below):\r\n1.11\r\nPython version: Python 2.7.15\r\nCUDA/cuDNN version: Cuda 9.2 CuDNN 7.2.1\r\nGPU model and memory: V100 16GB\r\nExact command to reproduce: python keras_model_to_estimator.py /tmp/tfkeras_example\r\n\r\n### Describe the problem\r\nRunning the [ecosystem CollectiveAllReduceStrategy estimator example ](https://github.com/tensorflow/ecosystem/blob/master/distribution_strategy/keras_model_to_estimator.py) on a box with 2GPUs, we get those warning constantly after the last step of an epoch:\r\n```\r\nINFO:tensorflow:loss = 0.6660614, step = 1500 (0.288 sec)\r\n2018-09-21 19:23:01.075834: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\r\n\t [[{{node FunctionBufferingResourceGetNext_1}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](FunctionBufferingResource_1)]]\r\n2018-09-21 19:23:01.075843: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\r\n\t [[{{node FunctionBufferingResourceGetNext}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](FunctionBufferingResource)]]\r\n\t [[{{node global_step/Read/ReadVariableOp/_171}} = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_550_global_step/Read/ReadVariableOp\", tensor_type=DT_INT64, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\r\n2018-09-21 19:23:01.076090: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\r\n\t [[{{node FunctionBufferingResourceGetNext}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](FunctionBufferingResource)]]\r\n```\r\n@yuefengz: Do you also see the same warnings in your test logs?\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/278760877", "html_url": "https://github.com/tensorflow/tensorflow/issues/7159#issuecomment-278760877", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7159", "id": 278760877, "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODc2MDg3Nw==", "user": {"login": "hakimka", "id": 3639143, "node_id": "MDQ6VXNlcjM2MzkxNDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/3639143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hakimka", "html_url": "https://github.com/hakimka", "followers_url": "https://api.github.com/users/hakimka/followers", "following_url": "https://api.github.com/users/hakimka/following{/other_user}", "gists_url": "https://api.github.com/users/hakimka/gists{/gist_id}", "starred_url": "https://api.github.com/users/hakimka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hakimka/subscriptions", "organizations_url": "https://api.github.com/users/hakimka/orgs", "repos_url": "https://api.github.com/users/hakimka/repos", "events_url": "https://api.github.com/users/hakimka/events{/privacy}", "received_events_url": "https://api.github.com/users/hakimka/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-09T20:19:52Z", "updated_at": "2017-02-09T20:19:52Z", "author_association": "NONE", "body_html": "<div class=\"email-fragment\">Hello Yaroslav,\n\n\nI just check the version, it says\n\n\nprint tf.__version__\n\n0.11.0rc2\n\n\nI am using the tensorflow in iPython notebook setup.\n\n\n\nBy the way, I found this example\n\n<a href=\"http://stackoverflow.com/questions/33759623/tensorflow-how-to-restore-a-previously-saved-model-python\">http://stackoverflow.com/questions/33759623/tensorflow-how-to-restore-a-previously-saved-model-python</a>\nI believe you answered that question at some point.\n\n\n\nThese lines run ok\n\n\nw1 = tf.Variable(tf.truncated_normal(shape=[10]), name='w1')\nw2 = tf.Variable(tf.truncated_normal(shape=[20]), name='w2')\ntf.add_to_collection('vars', w1)\ntf.add_to_collection('vars', w2)\nsaver = tf.train.Saver()\nsess = tf.Session()\n#sess.run(tf.global_variables_initializer()) &lt;--- I had to comment this out\nsess.run(tf.initialize_all_variables())\nsaver.save(sess, 'my-model')\n\n\nBut my simple, as primitive as I could get on it, would give me trouble. I am still learning the TF and I am not sure I am doing something obviously wrong.\n\n\nThank you,\n\n\u0421\u043f\u0430\u0441\u0438\u0431\u043e\n\n\n\nHakim</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-signature-reply\">________________________________\nFrom: Yaroslav Bulatov &lt;notifications@github.com&gt;\nSent: Thursday, February 9, 2017 5:14 AM\nTo: tensorflow/tensorflow\nCc: hakimka; Comment\nSubject: Re: [tensorflow/tensorflow] Tensorflow restore doesn't work on AWS (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"204240745\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7159\" href=\"https://github.com/tensorflow/tensorflow/issues/7159\">#7159</a>)\n\n\nAre you using version 12.1 by chance? That version provided new format for saving checkpoints, but didn't provide a way to read them. The solution is to save in old format:\n\nsaver = tf.train.Saver(write_version = saver_pb2.SaverDef.V1)\n\nsee: <a href=\"http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12\">http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12</a>\n\n[<a href=\"https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded%5D&lt;http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12\">https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded]&lt;http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12</a>&gt;\n\nHow to restore a model by filename in Tensorflow r12 ...&lt;<a href=\"http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12\">http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12</a>&gt;\nstackoverflow.com\nThe R12 has changed the checkpoint format. You should save the model in the old format. import tensorflow as tf from tensorflow.core.protobuf import saver_pb2 ...\n\n\n\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub&lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"204240745\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7159\" href=\"https://github.com/tensorflow/tensorflow/issues/7159#issuecomment-278549223\">#7159 (comment)</a>&gt;, or mute the thread&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ADeHZ-91e90GRrrn2Q1DhRvT7JyW6aYrks5raqC2gaJpZM4LyZEX\">https://github.com/notifications/unsubscribe-auth/ADeHZ-91e90GRrrn2Q1DhRvT7JyW6aYrks5raqC2gaJpZM4LyZEX</a>&gt;.</div>\n</div>", "body_text": "Hello Yaroslav,\n\n\nI just check the version, it says\n\n\nprint tf.__version__\n\n0.11.0rc2\n\n\nI am using the tensorflow in iPython notebook setup.\n\n\n\nBy the way, I found this example\n\nhttp://stackoverflow.com/questions/33759623/tensorflow-how-to-restore-a-previously-saved-model-python\nI believe you answered that question at some point.\n\n\n\nThese lines run ok\n\n\nw1 = tf.Variable(tf.truncated_normal(shape=[10]), name='w1')\nw2 = tf.Variable(tf.truncated_normal(shape=[20]), name='w2')\ntf.add_to_collection('vars', w1)\ntf.add_to_collection('vars', w2)\nsaver = tf.train.Saver()\nsess = tf.Session()\n#sess.run(tf.global_variables_initializer()) <--- I had to comment this out\nsess.run(tf.initialize_all_variables())\nsaver.save(sess, 'my-model')\n\n\nBut my simple, as primitive as I could get on it, would give me trouble. I am still learning the TF and I am not sure I am doing something obviously wrong.\n\n\nThank you,\n\n\u0421\u043f\u0430\u0441\u0438\u0431\u043e\n\n\n\nHakim\n\u2026\n________________________________\nFrom: Yaroslav Bulatov <notifications@github.com>\nSent: Thursday, February 9, 2017 5:14 AM\nTo: tensorflow/tensorflow\nCc: hakimka; Comment\nSubject: Re: [tensorflow/tensorflow] Tensorflow restore doesn't work on AWS (#7159)\n\n\nAre you using version 12.1 by chance? That version provided new format for saving checkpoints, but didn't provide a way to read them. The solution is to save in old format:\n\nsaver = tf.train.Saver(write_version = saver_pb2.SaverDef.V1)\n\nsee: http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12\n\n[https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded]<http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12>\n\nHow to restore a model by filename in Tensorflow r12 ...<http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12>\nstackoverflow.com\nThe R12 has changed the checkpoint format. You should save the model in the old format. import tensorflow as tf from tensorflow.core.protobuf import saver_pb2 ...\n\n\n\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub<#7159 (comment)>, or mute the thread<https://github.com/notifications/unsubscribe-auth/ADeHZ-91e90GRrrn2Q1DhRvT7JyW6aYrks5raqC2gaJpZM4LyZEX>.", "body": "Hello Yaroslav,\n\n\nI just check the version, it says\n\n\nprint tf.__version__\n\n0.11.0rc2\n\n\nI am using the tensorflow in iPython notebook setup.\n\n\n\nBy the way, I found this example\n\nhttp://stackoverflow.com/questions/33759623/tensorflow-how-to-restore-a-previously-saved-model-python\nI believe you answered that question at some point.\n\n\n\nThese lines run ok\n\n\nw1 = tf.Variable(tf.truncated_normal(shape=[10]), name='w1')\nw2 = tf.Variable(tf.truncated_normal(shape=[20]), name='w2')\ntf.add_to_collection('vars', w1)\ntf.add_to_collection('vars', w2)\nsaver = tf.train.Saver()\nsess = tf.Session()\n#sess.run(tf.global_variables_initializer()) <--- I had to comment this out\nsess.run(tf.initialize_all_variables())\nsaver.save(sess, 'my-model')\n\n\nBut my simple, as primitive as I could get on it, would give me trouble. I am still learning the TF and I am not sure I am doing something obviously wrong.\n\n\nThank you,\n\n\u0421\u043f\u0430\u0441\u0438\u0431\u043e\n\n\n\nHakim\n\n\n\n________________________________\nFrom: Yaroslav Bulatov <notifications@github.com>\nSent: Thursday, February 9, 2017 5:14 AM\nTo: tensorflow/tensorflow\nCc: hakimka; Comment\nSubject: Re: [tensorflow/tensorflow] Tensorflow restore doesn't work on AWS (#7159)\n\n\nAre you using version 12.1 by chance? That version provided new format for saving checkpoints, but didn't provide a way to read them. The solution is to save in old format:\n\nsaver = tf.train.Saver(write_version = saver_pb2.SaverDef.V1)\n\nsee: http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12\n\n[https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded]<http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12>\n\nHow to restore a model by filename in Tensorflow r12 ...<http://stackoverflow.com/questions/41048819/how-to-restore-a-model-by-filename-in-tensorflow-r12>\nstackoverflow.com\nThe R12 has changed the checkpoint format. You should save the model in the old format. import tensorflow as tf from tensorflow.core.protobuf import saver_pb2 ...\n\n\n\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub<https://github.com/tensorflow/tensorflow/issues/7159#issuecomment-278549223>, or mute the thread<https://github.com/notifications/unsubscribe-auth/ADeHZ-91e90GRrrn2Q1DhRvT7JyW6aYrks5raqC2gaJpZM4LyZEX>.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5578", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5578/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5578/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5578/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5578", "id": 188968689, "node_id": "MDU6SXNzdWUxODg5Njg2ODk=", "number": 5578, "title": "Compile TensorFlow r0.11 from source", "user": {"login": "hholst80", "id": 6200749, "node_id": "MDQ6VXNlcjYyMDA3NDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/6200749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hholst80", "html_url": "https://github.com/hholst80", "followers_url": "https://api.github.com/users/hholst80/followers", "following_url": "https://api.github.com/users/hholst80/following{/other_user}", "gists_url": "https://api.github.com/users/hholst80/gists{/gist_id}", "starred_url": "https://api.github.com/users/hholst80/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hholst80/subscriptions", "organizations_url": "https://api.github.com/users/hholst80/orgs", "repos_url": "https://api.github.com/users/hholst80/repos", "events_url": "https://api.github.com/users/hholst80/events{/privacy}", "received_events_url": "https://api.github.com/users/hholst80/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2016-11-13T12:53:30Z", "updated_at": "2016-12-20T14:51:05Z", "closed_at": "2016-11-15T20:18:41Z", "author_association": "CONTRIBUTOR", "body_html": "<ol>\n<li>setup build environment</li>\n</ol>\n<pre><code>$ cat Dockerfile\nFROM ubuntu:16.04\n\n# Bazel.\nRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends curl ca-certificates\nRUN echo \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | tee /etc/apt/sources.list.d/bazel.list\nRUN curl https://bazel.build/bazel-release.pub.gpg | apt-key add -\nRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends bazel\n\n# TensorFlow src &amp; dev deps.\nRUN apt-get install -y --no-install-recommends git python3-numpy swig python3-dev python3-wheel python3-setuptools\nRUN ln -s /usr/bin/python3 /usr/local/bin/python\nRUN git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git /opt/tensorflow\nWORKDIR /opt/tensorflow\n$ docker build -t bazel .\n</code></pre>\n<ol start=\"2\">\n<li>start and attach to build environment:</li>\n</ol>\n<pre><code>$ docker run -it --name bazel-build bazel\nroot@c7027f1dec32:/opt/tensorflow# git checkout r0.11\nSwitched to branch 'r0.11'\nYour branch is up-to-date with 'origin/r0.11'.\nroot@c7027f1dec32:/opt/tensorflow# ./configure \n/opt/tensorflow /opt/tensorflow\nPlease specify the location of python. [Default is /usr/local/bin/python]: \nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \nNo Hadoop File System support will be enabled for TensorFlow\nFound possible Python library paths:\n  /usr/local/lib/python3.5/dist-packages\n  /usr/lib/python3/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python3.5/dist-packages]\n\n/usr/local/lib/python3.5/dist-packages\nDo you wish to build TensorFlow with GPU support? [y/N] \nNo GPU support will be enabled for TensorFlow\nConfiguration finished\nExtracting Bazel installation...\n.............\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\n.............\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:90:19: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:96:28: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\nINFO: All external dependencies fetched successfully.\nroot@c7027f1dec32:/opt/tensorflow# \n</code></pre>\n<ol start=\"3\">\n<li>Now try to build:</li>\n</ol>\n<pre><code>root@c7027f1dec32:/opt/tensorflow# bazel build -c opt //tensorflow/tools/pip_package:build_pip_package\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.io/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:90:19: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:96:28: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\nERROR: /opt/tensorflow/tensorflow/python/BUILD:1728:1: in cc_library rule //tensorflow/python:tf_session_helper: non-test target '//tensorflow/python:tf_session_helper' depends on testonly target '//tensorflow/python:construction_fails_op' and doesn't have testonly attribute set.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\nINFO: Elapsed time: 1.643s\nroot@c7027f1dec32:/opt/tensorflow# \n</code></pre>", "body_text": "setup build environment\n\n$ cat Dockerfile\nFROM ubuntu:16.04\n\n# Bazel.\nRUN apt-get update && apt-get install -y --no-install-recommends curl ca-certificates\nRUN echo \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | tee /etc/apt/sources.list.d/bazel.list\nRUN curl https://bazel.build/bazel-release.pub.gpg | apt-key add -\nRUN apt-get update && apt-get install -y --no-install-recommends bazel\n\n# TensorFlow src & dev deps.\nRUN apt-get install -y --no-install-recommends git python3-numpy swig python3-dev python3-wheel python3-setuptools\nRUN ln -s /usr/bin/python3 /usr/local/bin/python\nRUN git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git /opt/tensorflow\nWORKDIR /opt/tensorflow\n$ docker build -t bazel .\n\n\nstart and attach to build environment:\n\n$ docker run -it --name bazel-build bazel\nroot@c7027f1dec32:/opt/tensorflow# git checkout r0.11\nSwitched to branch 'r0.11'\nYour branch is up-to-date with 'origin/r0.11'.\nroot@c7027f1dec32:/opt/tensorflow# ./configure \n/opt/tensorflow /opt/tensorflow\nPlease specify the location of python. [Default is /usr/local/bin/python]: \nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \nNo Hadoop File System support will be enabled for TensorFlow\nFound possible Python library paths:\n  /usr/local/lib/python3.5/dist-packages\n  /usr/lib/python3/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python3.5/dist-packages]\n\n/usr/local/lib/python3.5/dist-packages\nDo you wish to build TensorFlow with GPU support? [y/N] \nNo GPU support will be enabled for TensorFlow\nConfiguration finished\nExtracting Bazel installation...\n.............\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\n.............\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:90:19: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:96:28: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\nINFO: All external dependencies fetched successfully.\nroot@c7027f1dec32:/opt/tensorflow# \n\n\nNow try to build:\n\nroot@c7027f1dec32:/opt/tensorflow# bazel build -c opt //tensorflow/tools/pip_package:build_pip_package\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.io/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:90:19: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:96:28: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\nERROR: /opt/tensorflow/tensorflow/python/BUILD:1728:1: in cc_library rule //tensorflow/python:tf_session_helper: non-test target '//tensorflow/python:tf_session_helper' depends on testonly target '//tensorflow/python:construction_fails_op' and doesn't have testonly attribute set.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\nINFO: Elapsed time: 1.643s\nroot@c7027f1dec32:/opt/tensorflow#", "body": "1. setup build environment\r\n```\r\n$ cat Dockerfile\r\nFROM ubuntu:16.04\r\n\r\n# Bazel.\r\nRUN apt-get update && apt-get install -y --no-install-recommends curl ca-certificates\r\nRUN echo \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | tee /etc/apt/sources.list.d/bazel.list\r\nRUN curl https://bazel.build/bazel-release.pub.gpg | apt-key add -\r\nRUN apt-get update && apt-get install -y --no-install-recommends bazel\r\n\r\n# TensorFlow src & dev deps.\r\nRUN apt-get install -y --no-install-recommends git python3-numpy swig python3-dev python3-wheel python3-setuptools\r\nRUN ln -s /usr/bin/python3 /usr/local/bin/python\r\nRUN git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git /opt/tensorflow\r\nWORKDIR /opt/tensorflow\r\n$ docker build -t bazel .\r\n```\r\n\r\n2. start and attach to build environment:\r\n```\r\n$ docker run -it --name bazel-build bazel\r\nroot@c7027f1dec32:/opt/tensorflow# git checkout r0.11\r\nSwitched to branch 'r0.11'\r\nYour branch is up-to-date with 'origin/r0.11'.\r\nroot@c7027f1dec32:/opt/tensorflow# ./configure \r\n/opt/tensorflow /opt/tensorflow\r\nPlease specify the location of python. [Default is /usr/local/bin/python]: \r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \r\nNo Google Cloud Platform support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \r\nNo Hadoop File System support will be enabled for TensorFlow\r\nFound possible Python library paths:\r\n  /usr/local/lib/python3.5/dist-packages\r\n  /usr/lib/python3/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python3.5/dist-packages]\r\n\r\n/usr/local/lib/python3.5/dist-packages\r\nDo you wish to build TensorFlow with GPU support? [y/N] \r\nNo GPU support will be enabled for TensorFlow\r\nConfiguration finished\r\nExtracting Bazel installation...\r\n.............\r\nINFO: Starting clean (this may take a while). Consider using --expunge_async if the clean takes more than several minutes.\r\n.............\r\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:90:19: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\r\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:96:28: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\r\nINFO: All external dependencies fetched successfully.\r\nroot@c7027f1dec32:/opt/tensorflow# \r\n```\r\n\r\n3. Now try to build:\r\n```\r\nroot@c7027f1dec32:/opt/tensorflow# bazel build -c opt //tensorflow/tools/pip_package:build_pip_package\r\nWARNING: Sandboxed execution is not supported on your system and thus hermeticity of actions cannot be guaranteed. See http://bazel.io/docs/bazel-user-manual.html#sandboxing for more information. You can turn off this warning via --ignore_unsupported_sandboxing.\r\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:90:19: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\r\nWARNING: /root/.cache/bazel/_bazel_root/fbc06f9baef46cade6e35d9e4137e37c/external/protobuf/protobuf.bzl:96:28: Variables HOST_CFG and DATA_CFG are deprecated in favor of strings \"host\" and \"data\" correspondingly.\r\nERROR: /opt/tensorflow/tensorflow/python/BUILD:1728:1: in cc_library rule //tensorflow/python:tf_session_helper: non-test target '//tensorflow/python:tf_session_helper' depends on testonly target '//tensorflow/python:construction_fails_op' and doesn't have testonly attribute set.\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\r\nINFO: Elapsed time: 1.643s\r\nroot@c7027f1dec32:/opt/tensorflow# \r\n```\r\n"}
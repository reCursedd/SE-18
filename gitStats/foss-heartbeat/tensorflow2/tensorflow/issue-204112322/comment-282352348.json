{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/282352348", "html_url": "https://github.com/tensorflow/tensorflow/issues/7150#issuecomment-282352348", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7150", "id": 282352348, "node_id": "MDEyOklzc3VlQ29tbWVudDI4MjM1MjM0OA==", "user": {"login": "bazinac", "id": 19685528, "node_id": "MDQ6VXNlcjE5Njg1NTI4", "avatar_url": "https://avatars0.githubusercontent.com/u/19685528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazinac", "html_url": "https://github.com/bazinac", "followers_url": "https://api.github.com/users/bazinac/followers", "following_url": "https://api.github.com/users/bazinac/following{/other_user}", "gists_url": "https://api.github.com/users/bazinac/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazinac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazinac/subscriptions", "organizations_url": "https://api.github.com/users/bazinac/orgs", "repos_url": "https://api.github.com/users/bazinac/repos", "events_url": "https://api.github.com/users/bazinac/events{/privacy}", "received_events_url": "https://api.github.com/users/bazinac/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-24T17:31:41Z", "updated_at": "2017-02-24T17:31:41Z", "author_association": "NONE", "body_html": "<p>@amdrehertz I have tried adding quantize nodes, running transformation as described in eight-bit-calculations (just omitting stripunused in order to be able to run inference on PC). But when quantize nodes is added, it then fails when I try to run inference using eightbit graph, maybe this can show something... I get:</p>\n<pre><code>  File \"/home/poborak/PycharmProjects/TF/anh_evaluator.py\", line 23, in create_graph\n    _ = tf.import_graph_def(graph_def, name='')\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 383, in import_graph_def\n    ops.set_shapes_for_outputs(op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1717, in set_shapes_for_outputs\n    shapes = shape_func(op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1667, in call_with_requiring\n    return call_cpp_shape_fn(op, require_shape_fn=True)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 610, in call_cpp_shape_fn\n    debug_python_shape_fn, require_shape_fn)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 652, in _call_cpp_shape_fn_impl\n    v = tensor_util.constant_value(op.inputs[idx])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 684, in constant_value\n    ret = _ConstantValue(tensor)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 584, in _ConstantValue\n    input_shape = tensor.op.inputs[0].get_shape()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1437, in __getitem__\n    return self._op._inputs[i]\nIndexError: list index out of range\n</code></pre>", "body_text": "@amdrehertz I have tried adding quantize nodes, running transformation as described in eight-bit-calculations (just omitting stripunused in order to be able to run inference on PC). But when quantize nodes is added, it then fails when I try to run inference using eightbit graph, maybe this can show something... I get:\n  File \"/home/poborak/PycharmProjects/TF/anh_evaluator.py\", line 23, in create_graph\n    _ = tf.import_graph_def(graph_def, name='')\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 383, in import_graph_def\n    ops.set_shapes_for_outputs(op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1717, in set_shapes_for_outputs\n    shapes = shape_func(op)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1667, in call_with_requiring\n    return call_cpp_shape_fn(op, require_shape_fn=True)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 610, in call_cpp_shape_fn\n    debug_python_shape_fn, require_shape_fn)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 652, in _call_cpp_shape_fn_impl\n    v = tensor_util.constant_value(op.inputs[idx])\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 684, in constant_value\n    ret = _ConstantValue(tensor)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 584, in _ConstantValue\n    input_shape = tensor.op.inputs[0].get_shape()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1437, in __getitem__\n    return self._op._inputs[i]\nIndexError: list index out of range", "body": "@amdrehertz I have tried adding quantize nodes, running transformation as described in eight-bit-calculations (just omitting stripunused in order to be able to run inference on PC). But when quantize nodes is added, it then fails when I try to run inference using eightbit graph, maybe this can show something... I get:\r\n\r\n```\r\n  File \"/home/poborak/PycharmProjects/TF/anh_evaluator.py\", line 23, in create_graph\r\n    _ = tf.import_graph_def(graph_def, name='')\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 383, in import_graph_def\r\n    ops.set_shapes_for_outputs(op)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1717, in set_shapes_for_outputs\r\n    shapes = shape_func(op)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1667, in call_with_requiring\r\n    return call_cpp_shape_fn(op, require_shape_fn=True)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 610, in call_cpp_shape_fn\r\n    debug_python_shape_fn, require_shape_fn)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/common_shapes.py\", line 652, in _call_cpp_shape_fn_impl\r\n    v = tensor_util.constant_value(op.inputs[idx])\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 684, in constant_value\r\n    ret = _ConstantValue(tensor)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/tensor_util.py\", line 584, in _ConstantValue\r\n    input_shape = tensor.op.inputs[0].get_shape()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1437, in __getitem__\r\n    return self._op._inputs[i]\r\nIndexError: list index out of range\r\n```\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/344051537", "html_url": "https://github.com/tensorflow/tensorflow/issues/14198#issuecomment-344051537", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14198", "id": 344051537, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDA1MTUzNw==", "user": {"login": "eric4545", "id": 6886275, "node_id": "MDQ6VXNlcjY4ODYyNzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/6886275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eric4545", "html_url": "https://github.com/eric4545", "followers_url": "https://api.github.com/users/eric4545/followers", "following_url": "https://api.github.com/users/eric4545/following{/other_user}", "gists_url": "https://api.github.com/users/eric4545/gists{/gist_id}", "starred_url": "https://api.github.com/users/eric4545/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eric4545/subscriptions", "organizations_url": "https://api.github.com/users/eric4545/orgs", "repos_url": "https://api.github.com/users/eric4545/repos", "events_url": "https://api.github.com/users/eric4545/events{/privacy}", "received_events_url": "https://api.github.com/users/eric4545/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-13T20:43:34Z", "updated_at": "2017-11-13T20:45:08Z", "author_association": "NONE", "body_html": "<p>hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=49262\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jart\">@jart</a>, i also got the same issue when <code>set_learning_phase(0)</code>, seems there is a problem in [1] <code>K.learning_phase()</code> is returning integer, however in [2] is Boolean.<br>\n[1]: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/_impl/keras/layers/core.py#L115-L117\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/_impl/keras/layers/core.py#L115-L117</a><br>\n[2]: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/layers/core.py#L295\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/layers/core.py#L295</a></p>\n<p>Stack trace</p>\n<pre><code>Traceback (most recent call last):\n  File \".\\predict.py\", line 37, in &lt;module&gt;\n    model = load_model('./model.h5')\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 245, in load_model\n    model = model_from_config(model_config, custom_objects=custom_objects)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 323, in model_from_config\n    return layer_module.deserialize(config, custom_objects=custom_objects)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\layers\\serialization.py\", line 63, in deserialize\n    printable_module_name='layer')\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\utils\\generic_utils.py\", line 163, in deserialize_keras_object\n    list(custom_objects.items())))\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 1238, in from_config\n    model.add(layer)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 501, in add\n    output_tensor = layer(self.outputs[0])\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\engine\\topology.py\", line 252, in __call__\n    output = super(Layer, self).__call__(inputs, **kwargs)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 575, in __call__\n    outputs = self.call(inputs, *args, **kwargs)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\layers\\core.py\", line 118, in call\n    output = super(Dropout, self).call(inputs, training=training)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 300, in call\n    lambda: array_ops.identity(inputs))\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\utils.py\", line 203, in smart_cond\n    pred_value = constant_value(pred)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\utils.py\", line 233, in constant_value\n    raise TypeError('`pred` must be a Tensor, a Variable, or a Python bool.')\nTypeError: `pred` must be a Tensor, a Variable, or a Python bool.\n</code></pre>", "body_text": "hi @jart, i also got the same issue when set_learning_phase(0), seems there is a problem in [1] K.learning_phase() is returning integer, however in [2] is Boolean.\n[1]: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/_impl/keras/layers/core.py#L115-L117\n[2]: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/layers/core.py#L295\nStack trace\nTraceback (most recent call last):\n  File \".\\predict.py\", line 37, in <module>\n    model = load_model('./model.h5')\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 245, in load_model\n    model = model_from_config(model_config, custom_objects=custom_objects)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 323, in model_from_config\n    return layer_module.deserialize(config, custom_objects=custom_objects)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\layers\\serialization.py\", line 63, in deserialize\n    printable_module_name='layer')\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\utils\\generic_utils.py\", line 163, in deserialize_keras_object\n    list(custom_objects.items())))\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 1238, in from_config\n    model.add(layer)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 501, in add\n    output_tensor = layer(self.outputs[0])\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\engine\\topology.py\", line 252, in __call__\n    output = super(Layer, self).__call__(inputs, **kwargs)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 575, in __call__\n    outputs = self.call(inputs, *args, **kwargs)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\layers\\core.py\", line 118, in call\n    output = super(Dropout, self).call(inputs, training=training)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 300, in call\n    lambda: array_ops.identity(inputs))\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\utils.py\", line 203, in smart_cond\n    pred_value = constant_value(pred)\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\utils.py\", line 233, in constant_value\n    raise TypeError('`pred` must be a Tensor, a Variable, or a Python bool.')\nTypeError: `pred` must be a Tensor, a Variable, or a Python bool.", "body": "hi @jart, i also got the same issue when `set_learning_phase(0)`, seems there is a problem in [1] `K.learning_phase()` is returning integer, however in [2] is Boolean.\r\n[1]: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/_impl/keras/layers/core.py#L115-L117\r\n[2]: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/layers/core.py#L295\r\n\r\nStack trace\r\n```\r\nTraceback (most recent call last):\r\n  File \".\\predict.py\", line 37, in <module>\r\n    model = load_model('./model.h5')\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 245, in load_model\r\n    model = model_from_config(model_config, custom_objects=custom_objects)\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 323, in model_from_config\r\n    return layer_module.deserialize(config, custom_objects=custom_objects)\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\layers\\serialization.py\", line 63, in deserialize\r\n    printable_module_name='layer')\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\utils\\generic_utils.py\", line 163, in deserialize_keras_object\r\n    list(custom_objects.items())))\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 1238, in from_config\r\n    model.add(layer)\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\models.py\", line 501, in add\r\n    output_tensor = layer(self.outputs[0])\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\engine\\topology.py\", line 252, in __call__\r\n    output = super(Layer, self).__call__(inputs, **kwargs)\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 575, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\keras\\_impl\\keras\\layers\\core.py\", line 118, in call\r\n    output = super(Dropout, self).call(inputs, training=training)\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\core.py\", line 300, in call\r\n    lambda: array_ops.identity(inputs))\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\utils.py\", line 203, in smart_cond\r\n    pred_value = constant_value(pred)\r\n  File \"~\\venv\\lib\\site-packages\\tensorflow\\python\\layers\\utils.py\", line 233, in constant_value\r\n    raise TypeError('`pred` must be a Tensor, a Variable, or a Python bool.')\r\nTypeError: `pred` must be a Tensor, a Variable, or a Python bool.\r\n```"}
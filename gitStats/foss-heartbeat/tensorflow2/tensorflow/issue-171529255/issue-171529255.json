{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3859", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3859/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3859/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3859/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3859", "id": 171529255, "node_id": "MDU6SXNzdWUxNzE1MjkyNTU=", "number": 3859, "title": "Error from loading model when running /examples/skflow/iris_save_restore.py", "user": {"login": "bcordo", "id": 550797, "node_id": "MDQ6VXNlcjU1MDc5Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/550797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcordo", "html_url": "https://github.com/bcordo", "followers_url": "https://api.github.com/users/bcordo/followers", "following_url": "https://api.github.com/users/bcordo/following{/other_user}", "gists_url": "https://api.github.com/users/bcordo/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcordo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcordo/subscriptions", "organizations_url": "https://api.github.com/users/bcordo/orgs", "repos_url": "https://api.github.com/users/bcordo/repos", "events_url": "https://api.github.com/users/bcordo/events{/privacy}", "received_events_url": "https://api.github.com/users/bcordo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-16T22:04:33Z", "updated_at": "2016-08-17T21:17:23Z", "closed_at": "2016-08-17T21:17:23Z", "author_association": "NONE", "body_html": "<p>I am running the example code <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/skflow/iris_save_restore.py\">iris_save_restore.py</a>:</p>\n<p>In particular when running</p>\n<pre><code>ipython iris_save_restore.py\n</code></pre>\n<p>I get the error:</p>\n<pre><code>WARNING:tensorflow:TensorFlowLinearClassifier class is deprecated. Please consider using LinearClassifier as an alternative.\nWARNING:tensorflow:Using temporary folder as model directory: /var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpgOl66O\nWARNING:tensorflow:Setting feature info to TensorSignature(dtype=tf.float32, shape=TensorShape([Dimension(None), Dimension(4)]), is_sparse=False)\nWARNING:tensorflow:Setting targets info to TensorSignature(dtype=tf.int64, shape=TensorShape([Dimension(None)]), is_sparse=False)\nAccuracy: 0.966667\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n/Users/brad/Downloads/iris_save_restore.py in &lt;module&gt;()\n     49 ## Restore everything\n     50 new_classifier = learn.TensorFlowEstimator.restore(\n---&gt; 51     '/tmp/skflow_examples/iris_custom_model')\n     52 score = metrics.accuracy_score(y_test, new_classifier.predict(x_test))\n     53 print('Accuracy: {0:f}'.format(score))\n\n/Users/brad/anaconda/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in restore(cls, path, config)\n    324     model_def_filename = os.path.join(path, 'model.def')\n    325     if not os.path.exists(model_def_filename):\n--&gt; 326       raise ValueError(\"Restore folder doesn't contain model definition.\")\n    327     # list of parameters that are allowed to be reconfigured\n    328     reconfigurable_params = ['_config']\n\nValueError: Restore folder doesn't contain model definition.\n</code></pre>\n<p>But in the model directory <code>/var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpgOl66O</code>, there are the following files:</p>\n<ul>\n<li><code>checkpoint</code></li>\n<li><code>graph.pbtxt</code></li>\n<li><code>model.ckpt-200.meta</code></li>\n<li><code>events.out.tfevents.1471384242.ip-192-168-100-142.ec2.internal</code></li>\n<li><code>model.ckpt-200-00000-of-00001</code></li>\n</ul>\n<p>Thanks so much for the help.</p>\n<h3>Environment info</h3>\n<p>Operating System: OS X 10.11.6</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed.<br>\nsudo pip install --upgrade <a href=\"https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-0.10.0rc0-py2-none-any.whl\" rel=\"nofollow\">https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-0.10.0rc0-py2-none-any.whl</a></li>\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.<br>\n0.10.0rc0</li>\n</ol>", "body_text": "I am running the example code iris_save_restore.py:\nIn particular when running\nipython iris_save_restore.py\n\nI get the error:\nWARNING:tensorflow:TensorFlowLinearClassifier class is deprecated. Please consider using LinearClassifier as an alternative.\nWARNING:tensorflow:Using temporary folder as model directory: /var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpgOl66O\nWARNING:tensorflow:Setting feature info to TensorSignature(dtype=tf.float32, shape=TensorShape([Dimension(None), Dimension(4)]), is_sparse=False)\nWARNING:tensorflow:Setting targets info to TensorSignature(dtype=tf.int64, shape=TensorShape([Dimension(None)]), is_sparse=False)\nAccuracy: 0.966667\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n/Users/brad/Downloads/iris_save_restore.py in <module>()\n     49 ## Restore everything\n     50 new_classifier = learn.TensorFlowEstimator.restore(\n---> 51     '/tmp/skflow_examples/iris_custom_model')\n     52 score = metrics.accuracy_score(y_test, new_classifier.predict(x_test))\n     53 print('Accuracy: {0:f}'.format(score))\n\n/Users/brad/anaconda/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in restore(cls, path, config)\n    324     model_def_filename = os.path.join(path, 'model.def')\n    325     if not os.path.exists(model_def_filename):\n--> 326       raise ValueError(\"Restore folder doesn't contain model definition.\")\n    327     # list of parameters that are allowed to be reconfigured\n    328     reconfigurable_params = ['_config']\n\nValueError: Restore folder doesn't contain model definition.\n\nBut in the model directory /var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpgOl66O, there are the following files:\n\ncheckpoint\ngraph.pbtxt\nmodel.ckpt-200.meta\nevents.out.tfevents.1471384242.ip-192-168-100-142.ec2.internal\nmodel.ckpt-200-00000-of-00001\n\nThanks so much for the help.\nEnvironment info\nOperating System: OS X 10.11.6\nIf installed from binary pip package, provide:\n\nWhich pip package you installed.\nsudo pip install --upgrade https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-0.10.0rc0-py2-none-any.whl\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\n0.10.0rc0", "body": "I am running the example code [iris_save_restore.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/skflow/iris_save_restore.py):\n\nIn particular when running\n\n```\nipython iris_save_restore.py\n```\n\nI get the error:\n\n```\nWARNING:tensorflow:TensorFlowLinearClassifier class is deprecated. Please consider using LinearClassifier as an alternative.\nWARNING:tensorflow:Using temporary folder as model directory: /var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpgOl66O\nWARNING:tensorflow:Setting feature info to TensorSignature(dtype=tf.float32, shape=TensorShape([Dimension(None), Dimension(4)]), is_sparse=False)\nWARNING:tensorflow:Setting targets info to TensorSignature(dtype=tf.int64, shape=TensorShape([Dimension(None)]), is_sparse=False)\nAccuracy: 0.966667\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n/Users/brad/Downloads/iris_save_restore.py in <module>()\n     49 ## Restore everything\n     50 new_classifier = learn.TensorFlowEstimator.restore(\n---> 51     '/tmp/skflow_examples/iris_custom_model')\n     52 score = metrics.accuracy_score(y_test, new_classifier.predict(x_test))\n     53 print('Accuracy: {0:f}'.format(score))\n\n/Users/brad/anaconda/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/base.pyc in restore(cls, path, config)\n    324     model_def_filename = os.path.join(path, 'model.def')\n    325     if not os.path.exists(model_def_filename):\n--> 326       raise ValueError(\"Restore folder doesn't contain model definition.\")\n    327     # list of parameters that are allowed to be reconfigured\n    328     reconfigurable_params = ['_config']\n\nValueError: Restore folder doesn't contain model definition.\n```\n\nBut in the model directory `/var/folders/k7/x_ddt3gn57z7x452wglt9brh0000gn/T/tmpgOl66O`, there are the following files:\n- `checkpoint`\n- `graph.pbtxt`\n- `model.ckpt-200.meta`\n- `events.out.tfevents.1471384242.ip-192-168-100-142.ec2.internal`\n- `model.ckpt-200-00000-of-00001`\n\nThanks so much for the help. \n### Environment info\n\nOperating System: OS X 10.11.6\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed.\n   sudo pip install --upgrade https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-0.10.0rc0-py2-none-any.whl\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\n   0.10.0rc0\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8976", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8976/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8976/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8976/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8976", "id": 219581590, "node_id": "MDU6SXNzdWUyMTk1ODE1OTA=", "number": 8976, "title": "Illegal instruction when importing tensorflow", "user": {"login": "fvisin", "id": 4639261, "node_id": "MDQ6VXNlcjQ2MzkyNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/4639261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fvisin", "html_url": "https://github.com/fvisin", "followers_url": "https://api.github.com/users/fvisin/followers", "following_url": "https://api.github.com/users/fvisin/following{/other_user}", "gists_url": "https://api.github.com/users/fvisin/gists{/gist_id}", "starred_url": "https://api.github.com/users/fvisin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fvisin/subscriptions", "organizations_url": "https://api.github.com/users/fvisin/orgs", "repos_url": "https://api.github.com/users/fvisin/repos", "events_url": "https://api.github.com/users/fvisin/events{/privacy}", "received_events_url": "https://api.github.com/users/fvisin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-04-05T13:25:28Z", "updated_at": "2018-03-23T23:42:05Z", "closed_at": "2017-04-11T14:07:54Z", "author_association": "NONE", "body_html": "<p>After compiling tensorflow from source I get an \"illegal instruction\" error.<br>\nI traced it back to this error with gdb:</p>\n<blockquote>\n<p>Thread 1 \"python\" received signal SIGILL, Illegal instruction.<br>\n0x00007fffdc684d16 in google::protobuf::SimpleDescriptorDatabase::DescriptorIndex&lt;std::pair&lt;void const*, int&gt; &gt;::AddFile(google::protobuf::FileDescriptorProto const&amp;, std::pair&lt;void const*, int&gt;) ()<br>\nfrom /usr/local/lib/python2.7/dist-packages/tensorflow/python/_pywrap_tensorflow_internal.so</p>\n</blockquote>\n<p>I can successfully install and import the latest nightly build (and I have been able to compile and import tensorflow from source in the past on the same machine). I tried uninstalling all the dependencies and let pip install them again when I install the tensorflow wheel to no avail. I also tried to install the protobuf 3.1 wheel as suggested in the documentation, as well as the latest 3.2 wheel.<br>\nAny suggestion is welcome.</p>\n<p>Here the details of my system:</p>\n<p>Operating System: Linux Ubuntu 16.04<br>\nCUDA and CuDNN version</p>\n<blockquote>\n<p>ls -l /usr/local/cuda/lib64/libcud*<br>\n-rw-r--r-- 1 root root   556000 Jan 27 00:48 /usr/local/cuda/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root       16 Jan 27 00:51 /usr/local/cuda/lib64/libcudart.so -&gt; libcudart.so.8.0<br>\nlrwxrwxrwx 1 root root       19 Jan 27 00:51 /usr/local/cuda/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.61<br>\n-rw-r--r-- 1 root root   415432 Jan 27 00:48 /usr/local/cuda/lib64/libcudart.so.8.0.61<br>\n-rw-r--r-- 1 root root   775162 Jan 27 00:48 /usr/local/cuda/lib64/libcudart_static.a<br>\nlrwxrwxrwx 1 root root       13 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so -&gt; libcudnn.so.5<br>\nlrwxrwxrwx 1 root root       17 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so.5 -&gt; libcudnn.so.5.1.5<br>\n-rwxr-xr-x 1 root root 79337624 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so.5.1.5<br>\n-rw-r--r-- 1 root root 69756172 Sep 24  2016 /usr/local/cuda/lib64/libcudnn_static.a</p>\n</blockquote>\n<p>Tensorflow commit: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/a9b7946540a27cc53bbdc9db1564196979fe30ae/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/a9b7946540a27cc53bbdc9db1564196979fe30ae\"><tt>a9b7946</tt></a><br>\nBazel version</p>\n<blockquote>\n<p>Build label: 0.4.5<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Thu Mar 16 12:19:38 2017 (1489666778)<br>\nBuild timestamp: 1489666778<br>\nBuild timestamp as int: 1489666778</p>\n</blockquote>", "body_text": "After compiling tensorflow from source I get an \"illegal instruction\" error.\nI traced it back to this error with gdb:\n\nThread 1 \"python\" received signal SIGILL, Illegal instruction.\n0x00007fffdc684d16 in google::protobuf::SimpleDescriptorDatabase::DescriptorIndex<std::pair<void const*, int> >::AddFile(google::protobuf::FileDescriptorProto const&, std::pair<void const*, int>) ()\nfrom /usr/local/lib/python2.7/dist-packages/tensorflow/python/_pywrap_tensorflow_internal.so\n\nI can successfully install and import the latest nightly build (and I have been able to compile and import tensorflow from source in the past on the same machine). I tried uninstalling all the dependencies and let pip install them again when I install the tensorflow wheel to no avail. I also tried to install the protobuf 3.1 wheel as suggested in the documentation, as well as the latest 3.2 wheel.\nAny suggestion is welcome.\nHere the details of my system:\nOperating System: Linux Ubuntu 16.04\nCUDA and CuDNN version\n\nls -l /usr/local/cuda/lib64/libcud*\n-rw-r--r-- 1 root root   556000 Jan 27 00:48 /usr/local/cuda/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 Jan 27 00:51 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 Jan 27 00:51 /usr/local/cuda/lib64/libcudart.so.8.0 -> libcudart.so.8.0.61\n-rw-r--r-- 1 root root   415432 Jan 27 00:48 /usr/local/cuda/lib64/libcudart.so.8.0.61\n-rw-r--r-- 1 root root   775162 Jan 27 00:48 /usr/local/cuda/lib64/libcudart_static.a\nlrwxrwxrwx 1 root root       13 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so.5 -> libcudnn.so.5.1.5\n-rwxr-xr-x 1 root root 79337624 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so.5.1.5\n-rw-r--r-- 1 root root 69756172 Sep 24  2016 /usr/local/cuda/lib64/libcudnn_static.a\n\nTensorflow commit: a9b7946\nBazel version\n\nBuild label: 0.4.5\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Mar 16 12:19:38 2017 (1489666778)\nBuild timestamp: 1489666778\nBuild timestamp as int: 1489666778", "body": "After compiling tensorflow from source I get an \"illegal instruction\" error. \r\nI traced it back to this error with gdb:\r\n\r\n> Thread 1 \"python\" received signal SIGILL, Illegal instruction.\r\n> 0x00007fffdc684d16 in google::protobuf::SimpleDescriptorDatabase::DescriptorIndex<std::pair<void const*, int> >::AddFile(google::protobuf::FileDescriptorProto const&, std::pair<void const*, int>) ()\r\n>   from /usr/local/lib/python2.7/dist-packages/tensorflow/python/_pywrap_tensorflow_internal.so\r\n\r\nI can successfully install and import the latest nightly build (and I have been able to compile and import tensorflow from source in the past on the same machine). I tried uninstalling all the dependencies and let pip install them again when I install the tensorflow wheel to no avail. I also tried to install the protobuf 3.1 wheel as suggested in the documentation, as well as the latest 3.2 wheel.\r\nAny suggestion is welcome.\r\n\r\nHere the details of my system:\r\n\r\nOperating System: Linux Ubuntu 16.04\r\nCUDA and CuDNN version\r\n> ls -l /usr/local/cuda/lib64/libcud*\r\n> -rw-r--r-- 1 root root   556000 Jan 27 00:48 /usr/local/cuda/lib64/libcudadevrt.a\r\n> lrwxrwxrwx 1 root root       16 Jan 27 00:51 /usr/local/cuda/lib64/libcudart.so -> libcudart.so.8.0\r\n> lrwxrwxrwx 1 root root       19 Jan 27 00:51 /usr/local/cuda/lib64/libcudart.so.8.0 -> libcudart.so.8.0.61\r\n> -rw-r--r-- 1 root root   415432 Jan 27 00:48 /usr/local/cuda/lib64/libcudart.so.8.0.61\r\n> -rw-r--r-- 1 root root   775162 Jan 27 00:48 /usr/local/cuda/lib64/libcudart_static.a\r\n> lrwxrwxrwx 1 root root       13 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so -> libcudnn.so.5\r\n> lrwxrwxrwx 1 root root       17 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so.5 -> libcudnn.so.5.1.5\r\n> -rwxr-xr-x 1 root root 79337624 Sep 24  2016 /usr/local/cuda/lib64/libcudnn.so.5.1.5\r\n> -rw-r--r-- 1 root root 69756172 Sep 24  2016 /usr/local/cuda/lib64/libcudnn_static.a\r\n\r\nTensorflow commit: a9b7946540a27cc53bbdc9db1564196979fe30ae\r\nBazel version\r\n> Build label: 0.4.5\r\n> Build target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\n> Build time: Thu Mar 16 12:19:38 2017 (1489666778)\r\n> Build timestamp: 1489666778\r\n> Build timestamp as int: 1489666778"}
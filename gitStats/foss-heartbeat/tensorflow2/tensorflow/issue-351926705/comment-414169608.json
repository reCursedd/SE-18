{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/414169608", "html_url": "https://github.com/tensorflow/tensorflow/issues/21720#issuecomment-414169608", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21720", "id": 414169608, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDE2OTYwOA==", "user": {"login": "phalexo", "id": 4603365, "node_id": "MDQ6VXNlcjQ2MDMzNjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/4603365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phalexo", "html_url": "https://github.com/phalexo", "followers_url": "https://api.github.com/users/phalexo/followers", "following_url": "https://api.github.com/users/phalexo/following{/other_user}", "gists_url": "https://api.github.com/users/phalexo/gists{/gist_id}", "starred_url": "https://api.github.com/users/phalexo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phalexo/subscriptions", "organizations_url": "https://api.github.com/users/phalexo/orgs", "repos_url": "https://api.github.com/users/phalexo/repos", "events_url": "https://api.github.com/users/phalexo/events{/privacy}", "received_events_url": "https://api.github.com/users/phalexo/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-20T00:58:56Z", "updated_at": "2018-08-20T00:58:56Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>\n<p><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nNO.</p>\n</li>\n<li>\n<p><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 14.04, with 16.04 kernel</p>\n</li>\n<li>\n<p><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:<br>\nSupermicro 4028GR-TRT, dual Xeons, 256GB RAM</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from (source or binary)</strong>:<br>\nSource</p>\n</li>\n<li>\n<p><strong>TensorFlow version (use command below)</strong>:<br>\nTried r1.4-r1.9</p>\n</li>\n<li>\n<p><strong>Python version</strong>:<br>\n3.5</p>\n</li>\n<li>\n<p><strong>Bazel version (if compiling from source)</strong>:<br>\n0.16</p>\n</li>\n<li>\n<p><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\nUsing built-in specs.<br>\nCOLLECT_GCC=gcc<br>\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper<br>\nOFFLOAD_TARGET_NAMES=nvptx-none<br>\nOFFLOAD_TARGET_DEFAULT=1<br>\nTarget: x86_64-linux-gnu<br>\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 7.3.0-21ubuntu1<del>14.04' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=gcc4-compatible --disable-libstdcxx-dual-abi --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu<br>\nThread model: posix<br>\ngcc version 7.3.0 (Ubuntu 7.3.0-21ubuntu1</del>14.04)</p>\n</li>\n<li>\n<p><strong>CUDA/cuDNN version</strong>:<br>\n9.2/7.1.4_9.2</p>\n</li>\n<li>\n<p><strong>GPU model and memory</strong>:<br>\nTitan X/Maxwell X 4, 12GB RAM</p>\n</li>\n<li>\n<p><strong>Exact command to reproduce</strong>:<br>\nbazel build -c opt --copt=-mavx --copt=-msse4.1 --copt=-msse4.2 --config=cuda //tensorflow/tools/pip_package:build_pip_package</p>\n</li>\n</ul>\n<p>or</p>\n<p>bazel build  //tensorflow/tools/pip_package:build_pip_package</p>\n<p>ERROR: /home/developer/tensorflow/tensorflow/contrib/mpi/BUILD:48:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_utils' failed (Exit 1)<br>\nIn file included from tensorflow/contrib/mpi/mpi_utils.cc:18:0:<br>\n./tensorflow/contrib/mpi/mpi_utils.h: In member function 'const int tensorflow::MPIUtils::GetSourceID(const string&amp;) const':<br>\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: error: 'FATAL' was not declared in this scope<br>\nLOG(FATAL) &lt;&lt; \"Failed to convert worker name to MPI index: \" &lt;&lt; task_id;<br>\n^~~~~<br>\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: note: suggested alternative: 'ESTALE'<br>\nLOG(FATAL) &lt;&lt; \"Failed to convert worker name to MPI index: \" &lt;&lt; task_id;<br>\n^~~~~<br>\nESTALE<br>\n./tensorflow/contrib/mpi/mpi_utils.h:49:7: error: 'LOG' was not declared in this scope<br>\nLOG(FATAL) &lt;&lt; \"Failed to convert worker name to MPI index: \" &lt;&lt; task_id;<br>\n^~~<br>\ntensorflow/contrib/mpi/mpi_utils.cc: In constructor 'tensorflow::MPIUtils::MPIUtils(const string&amp;)':<br>\ntensorflow/contrib/mpi/mpi_utils.cc:33:3: error: 'CHECK' was not declared in this scope<br>\nCHECK(worker_name.size() &lt; max_worker_name_length)<br>\n^~~~~<br>\ntensorflow/contrib/mpi/mpi_utils.cc:35:64: warning: format not a string literal and no format arguments [-Wformat-security]<br>\nsnprintf(my_name, max_worker_name_length, worker_name.c_str());<br>\n^<br>\ntensorflow/contrib/mpi/mpi_utils.cc:41:25: error: 'INFO' was not declared in this scope<br>\nif (proc_id == 0) LOG(INFO) &lt;&lt; \"MPI process-ID to gRPC server name map: \\n\";<br>\n^~~~<br>\ntensorflow/contrib/mpi/mpi_utils.cc:41:21: error: 'LOG' was not declared in this scope<br>\nif (proc_id == 0) LOG(INFO) &lt;&lt; \"MPI process-ID to gRPC server name map: \\n\";<br>\n^~~<br>\ntensorflow/contrib/mpi/mpi_utils.cc:45:11: error: 'INFO' was not declared in this scope<br>\nLOG(INFO) &lt;&lt; \"Process: \" &lt;&lt; i<br>\n^~~~<br>\ntensorflow/contrib/mpi/mpi_utils.cc:45:7: error: 'LOG' was not declared in this scope<br>\nLOG(INFO) &lt;&lt; \"Process: \" &lt;&lt; i<br>\n^~~<br>\ntensorflow/contrib/mpi/mpi_utils.cc:47:25: error: 'endl' is not a member of 'std'<br>\n&lt;&lt; std::endl;<br>\n^~~~<br>\ntensorflow/contrib/mpi/mpi_utils.cc:47:25: note: suggested alternative: 'end'<br>\n&lt;&lt; std::endl;<br>\n^~~~<br>\nend<br>\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build</p>", "body_text": "System information\n\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nNO.\n\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 14.04, with 16.04 kernel\n\n\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nSupermicro 4028GR-TRT, dual Xeons, 256GB RAM\n\n\nTensorFlow installed from (source or binary):\nSource\n\n\nTensorFlow version (use command below):\nTried r1.4-r1.9\n\n\nPython version:\n3.5\n\n\nBazel version (if compiling from source):\n0.16\n\n\nGCC/Compiler version (if compiling from source):\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper\nOFFLOAD_TARGET_NAMES=nvptx-none\nOFFLOAD_TARGET_DEFAULT=1\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 7.3.0-21ubuntu114.04' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=gcc4-compatible --disable-libstdcxx-dual-abi --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 7.3.0 (Ubuntu 7.3.0-21ubuntu114.04)\n\n\nCUDA/cuDNN version:\n9.2/7.1.4_9.2\n\n\nGPU model and memory:\nTitan X/Maxwell X 4, 12GB RAM\n\n\nExact command to reproduce:\nbazel build -c opt --copt=-mavx --copt=-msse4.1 --copt=-msse4.2 --config=cuda //tensorflow/tools/pip_package:build_pip_package\n\n\nor\nbazel build  //tensorflow/tools/pip_package:build_pip_package\nERROR: /home/developer/tensorflow/tensorflow/contrib/mpi/BUILD:48:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_utils' failed (Exit 1)\nIn file included from tensorflow/contrib/mpi/mpi_utils.cc:18:0:\n./tensorflow/contrib/mpi/mpi_utils.h: In member function 'const int tensorflow::MPIUtils::GetSourceID(const string&) const':\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: error: 'FATAL' was not declared in this scope\nLOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\n^~~~~\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: note: suggested alternative: 'ESTALE'\nLOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\n^~~~~\nESTALE\n./tensorflow/contrib/mpi/mpi_utils.h:49:7: error: 'LOG' was not declared in this scope\nLOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\n^~~\ntensorflow/contrib/mpi/mpi_utils.cc: In constructor 'tensorflow::MPIUtils::MPIUtils(const string&)':\ntensorflow/contrib/mpi/mpi_utils.cc:33:3: error: 'CHECK' was not declared in this scope\nCHECK(worker_name.size() < max_worker_name_length)\n^~~~~\ntensorflow/contrib/mpi/mpi_utils.cc:35:64: warning: format not a string literal and no format arguments [-Wformat-security]\nsnprintf(my_name, max_worker_name_length, worker_name.c_str());\n^\ntensorflow/contrib/mpi/mpi_utils.cc:41:25: error: 'INFO' was not declared in this scope\nif (proc_id == 0) LOG(INFO) << \"MPI process-ID to gRPC server name map: \\n\";\n^~~~\ntensorflow/contrib/mpi/mpi_utils.cc:41:21: error: 'LOG' was not declared in this scope\nif (proc_id == 0) LOG(INFO) << \"MPI process-ID to gRPC server name map: \\n\";\n^~~\ntensorflow/contrib/mpi/mpi_utils.cc:45:11: error: 'INFO' was not declared in this scope\nLOG(INFO) << \"Process: \" << i\n^~~~\ntensorflow/contrib/mpi/mpi_utils.cc:45:7: error: 'LOG' was not declared in this scope\nLOG(INFO) << \"Process: \" << i\n^~~\ntensorflow/contrib/mpi/mpi_utils.cc:47:25: error: 'endl' is not a member of 'std'\n<< std::endl;\n^~~~\ntensorflow/contrib/mpi/mpi_utils.cc:47:25: note: suggested alternative: 'end'\n<< std::endl;\n^~~~\nend\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNO.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu 14.04, with 16.04 kernel\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\nSupermicro 4028GR-TRT, dual Xeons, 256GB RAM\r\n- **TensorFlow installed from (source or binary)**:\r\nSource\r\n- **TensorFlow version (use command below)**:\r\nTried r1.4-r1.9\r\n- **Python version**:\r\n3.5\r\n- **Bazel version (if compiling from source)**:\r\n0.16\r\n- **GCC/Compiler version (if compiling from source)**:\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper\r\nOFFLOAD_TARGET_NAMES=nvptx-none\r\nOFFLOAD_TARGET_DEFAULT=1\r\nTarget: x86_64-linux-gnu\r\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 7.3.0-21ubuntu1~14.04' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=gcc4-compatible --disable-libstdcxx-dual-abi --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\r\nThread model: posix\r\ngcc version 7.3.0 (Ubuntu 7.3.0-21ubuntu1~14.04)\r\n\r\n- **CUDA/cuDNN version**:\r\n9.2/7.1.4_9.2\r\n- **GPU model and memory**:\r\nTitan X/Maxwell X 4, 12GB RAM\r\n- **Exact command to reproduce**:\r\n bazel build -c opt --copt=-mavx --copt=-msse4.1 --copt=-msse4.2 --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\n\r\nor\r\n\r\n bazel build  //tensorflow/tools/pip_package:build_pip_package\r\n\r\nERROR: /home/developer/tensorflow/tensorflow/contrib/mpi/BUILD:48:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_utils' failed (Exit 1)\r\nIn file included from tensorflow/contrib/mpi/mpi_utils.cc:18:0:\r\n./tensorflow/contrib/mpi/mpi_utils.h: In member function 'const int tensorflow::MPIUtils::GetSourceID(const string&) const':\r\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: error: 'FATAL' was not declared in this scope\r\n       LOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\r\n           ^~~~~\r\n./tensorflow/contrib/mpi/mpi_utils.h:49:11: note: suggested alternative: 'ESTALE'\r\n       LOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\r\n           ^~~~~\r\n           ESTALE\r\n./tensorflow/contrib/mpi/mpi_utils.h:49:7: error: 'LOG' was not declared in this scope\r\n       LOG(FATAL) << \"Failed to convert worker name to MPI index: \" << task_id;\r\n       ^~~\r\ntensorflow/contrib/mpi/mpi_utils.cc: In constructor 'tensorflow::MPIUtils::MPIUtils(const string&)':\r\ntensorflow/contrib/mpi/mpi_utils.cc:33:3: error: 'CHECK' was not declared in this scope\r\n   CHECK(worker_name.size() < max_worker_name_length)\r\n   ^~~~~\r\ntensorflow/contrib/mpi/mpi_utils.cc:35:64: warning: format not a string literal and no format arguments [-Wformat-security]\r\n   snprintf(my_name, max_worker_name_length, worker_name.c_str());\r\n                                                                ^\r\ntensorflow/contrib/mpi/mpi_utils.cc:41:25: error: 'INFO' was not declared in this scope\r\n   if (proc_id == 0) LOG(INFO) << \"MPI process-ID to gRPC server name map: \\n\";\r\n                         ^~~~\r\ntensorflow/contrib/mpi/mpi_utils.cc:41:21: error: 'LOG' was not declared in this scope\r\n   if (proc_id == 0) LOG(INFO) << \"MPI process-ID to gRPC server name map: \\n\";\r\n                     ^~~\r\ntensorflow/contrib/mpi/mpi_utils.cc:45:11: error: 'INFO' was not declared in this scope\r\n       LOG(INFO) << \"Process: \" << i\r\n           ^~~~\r\ntensorflow/contrib/mpi/mpi_utils.cc:45:7: error: 'LOG' was not declared in this scope\r\n       LOG(INFO) << \"Process: \" << i\r\n       ^~~\r\ntensorflow/contrib/mpi/mpi_utils.cc:47:25: error: 'endl' is not a member of 'std'\r\n                 << std::endl;\r\n                         ^~~~\r\ntensorflow/contrib/mpi/mpi_utils.cc:47:25: note: suggested alternative: 'end'\r\n                 << std::endl;\r\n                         ^~~~\r\n                         end\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n"}
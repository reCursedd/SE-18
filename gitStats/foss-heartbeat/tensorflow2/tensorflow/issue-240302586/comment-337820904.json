{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/337820904", "html_url": "https://github.com/tensorflow/tensorflow/issues/11257#issuecomment-337820904", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11257", "id": 337820904, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzgyMDkwNA==", "user": {"login": "DLPAT", "id": 8253204, "node_id": "MDQ6VXNlcjgyNTMyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/8253204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DLPAT", "html_url": "https://github.com/DLPAT", "followers_url": "https://api.github.com/users/DLPAT/followers", "following_url": "https://api.github.com/users/DLPAT/following{/other_user}", "gists_url": "https://api.github.com/users/DLPAT/gists{/gist_id}", "starred_url": "https://api.github.com/users/DLPAT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DLPAT/subscriptions", "organizations_url": "https://api.github.com/users/DLPAT/orgs", "repos_url": "https://api.github.com/users/DLPAT/repos", "events_url": "https://api.github.com/users/DLPAT/events{/privacy}", "received_events_url": "https://api.github.com/users/DLPAT/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-19T07:18:04Z", "updated_at": "2017-10-19T09:00:04Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8922398\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/amirjamez\">@amirjamez</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20085789\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/satok16\">@satok16</a><br>\nI try to build from source-code then run on Snapdragon820 Board. But it failed and reports the following error.</p>\n<pre><code>Prepare failed! returned 0xffffffff\n\nNN Id = -904838944\nExecute graph!\nExecution failed!\nexecute got err: -1\n\nNN Id = -904838944\nExecution failed\nNN Id = -904838944\nFailed to read data.\n</code></pre>\n<p>And dmesg information is as the following, looks like that ION cannot allocate memory.</p>\n<pre><code>[  110.941082] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\n[  111.581037] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\n[  308.621162] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\n[  309.221876] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\n</code></pre>\n<p>And if I build with prebuilt library(-p), the issue is gone and I can run the hexagon_execute_graph successfully. And this error is caused by libhexagon_nn_skel.so (after using prebuilt libhexagon_nn_skel.so, the issue is missing). And I guess this error is related to Qualcomm SDK version.</p>\n<p>My Enviroment:</p>\n<ol>\n<li>Openq 820 Board.</li>\n<li>NDK13 and NDK14b (I try both NDK)</li>\n<li>Hexagon SDK 3.1 and 3.2(I try both Hexagon SDK)</li>\n<li>nnlib commit id 721b2d58f0f4e2d5b182f41e6b7c4db5356bf0fb</li>\n<li>tensorflow commit id <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/ca9899fb1da37c8644c447b401663a0b10483c91/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/ca9899fb1da37c8644c447b401663a0b10483c91\"><tt>ca9899f</tt></a></li>\n</ol>\n<p>any suggestion is appreciated.<br>\nThanks.</p>", "body_text": "@amirjamez @satok16\nI try to build from source-code then run on Snapdragon820 Board. But it failed and reports the following error.\nPrepare failed! returned 0xffffffff\n\nNN Id = -904838944\nExecute graph!\nExecution failed!\nexecute got err: -1\n\nNN Id = -904838944\nExecution failed\nNN Id = -904838944\nFailed to read data.\n\nAnd dmesg information is as the following, looks like that ION cannot allocate memory.\n[  110.941082] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\n[  111.581037] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\n[  308.621162] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\n[  309.221876] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\n\nAnd if I build with prebuilt library(-p), the issue is gone and I can run the hexagon_execute_graph successfully. And this error is caused by libhexagon_nn_skel.so (after using prebuilt libhexagon_nn_skel.so, the issue is missing). And I guess this error is related to Qualcomm SDK version.\nMy Enviroment:\n\nOpenq 820 Board.\nNDK13 and NDK14b (I try both NDK)\nHexagon SDK 3.1 and 3.2(I try both Hexagon SDK)\nnnlib commit id 721b2d58f0f4e2d5b182f41e6b7c4db5356bf0fb\ntensorflow commit id ca9899f\n\nany suggestion is appreciated.\nThanks.", "body": "@amirjamez @satok16 \r\nI try to build from source-code then run on Snapdragon820 Board. But it failed and reports the following error.\r\n```\r\nPrepare failed! returned 0xffffffff\r\n\r\nNN Id = -904838944\r\nExecute graph!\r\nExecution failed!\r\nexecute got err: -1\r\n\r\nNN Id = -904838944\r\nExecution failed\r\nNN Id = -904838944\r\nFailed to read data.\r\n```\r\nAnd dmesg information is as the following, looks like that ION cannot allocate memory.\r\n```\r\n[  110.941082] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\r\n[  111.581037] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\r\n[  308.621162] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\r\n[  309.221876] platform soc:qcom,ion:qcom,ion-heap@22: Fail to allocate buffer\r\n```\r\n\r\n\r\nAnd if I build with prebuilt library(-p), the issue is gone and I can run the hexagon_execute_graph successfully. And this error is caused by libhexagon_nn_skel.so (after using prebuilt libhexagon_nn_skel.so, the issue is missing). And I guess this error is related to Qualcomm SDK version.\r\n\r\nMy Enviroment:\r\n1. Openq 820 Board.\r\n2. NDK13 and NDK14b (I try both NDK)\r\n3. Hexagon SDK 3.1 and 3.2(I try both Hexagon SDK)\r\n4. nnlib commit id 721b2d58f0f4e2d5b182f41e6b7c4db5356bf0fb\r\n5. tensorflow commit id ca9899fb1da37c8644c447b401663a0b10483c91\r\n\r\nany suggestion is appreciated.\r\nThanks.\r\n"}
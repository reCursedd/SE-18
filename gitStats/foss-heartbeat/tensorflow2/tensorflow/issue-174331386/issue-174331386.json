{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4131", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4131/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4131/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4131/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4131", "id": 174331386, "node_id": "MDU6SXNzdWUxNzQzMzEzODY=", "number": 4131, "title": "reduce_max and maximum give different results for negative infinity", "user": {"login": "pronobis", "id": 331795, "node_id": "MDQ6VXNlcjMzMTc5NQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/331795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pronobis", "html_url": "https://github.com/pronobis", "followers_url": "https://api.github.com/users/pronobis/followers", "following_url": "https://api.github.com/users/pronobis/following{/other_user}", "gists_url": "https://api.github.com/users/pronobis/gists{/gist_id}", "starred_url": "https://api.github.com/users/pronobis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pronobis/subscriptions", "organizations_url": "https://api.github.com/users/pronobis/orgs", "repos_url": "https://api.github.com/users/pronobis/repos", "events_url": "https://api.github.com/users/pronobis/events{/privacy}", "received_events_url": "https://api.github.com/users/pronobis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2016-08-31T17:26:25Z", "updated_at": "2017-02-09T22:02:08Z", "closed_at": "2016-09-08T16:51:24Z", "author_association": "NONE", "body_html": "<p>Using <code>tf.maximum</code> with negative inf inputs as follows:</p>\n<pre><code>tf.maximum(-math.inf, -math.inf).eval()\n</code></pre>\n<p>gives the expected result <code>-inf</code></p>\n<p>However, <code>tf.reduce_max</code>, on the same inputs:</p>\n<pre><code>tf.reduce_max([-math.inf, -math.inf]).eval()\n</code></pre>\n<p>gives: <code>-3.40282e+38</code> which is the min float32.</p>\n<p>For positive infinity inputs, both functions result in <code>inf</code>.</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>I posted this as an SO question first:<br>\n<a href=\"http://stackoverflow.com/questions/39211546/bug-in-tensorflow-reduce-max-for-negative-infinity\" rel=\"nofollow\">http://stackoverflow.com/questions/39211546/bug-in-tensorflow-reduce-max-for-negative-infinity</a></p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 16.04</p>\n<p>Installed version of CUDA and cuDNN:</p>\n<pre><code>-rw-r--r-- 1 root root   560184 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 May 25 17:52 /usr/local/cuda-8.0/lib64/libcudart.so -&gt; libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 May 25 17:52 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.27\n-rw-r--r-- 1 root root   394472 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudart_static.a\nlrwxrwxrwx 1 root root       13 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so -&gt; libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so.5 -&gt; libcudnn.so.5.0.5\n-rwxr-xr-x 1 root root 78065952 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n\n</code></pre>\n<p>Installed from source.</p>\n<p>Commit hash: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/3cb39956e622b322e43547cf2b6e337020643f21/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/3cb39956e622b322e43547cf2b6e337020643f21\"><tt>3cb3995</tt></a></p>\n<p>Bazel:</p>\n<pre><code>Build label: 0.3.0\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Jun 10 11:38:23 2016 (1465558703)\nBuild timestamp: 1465558703\nBuild timestamp as int: 1465558703\n\n</code></pre>", "body_text": "Using tf.maximum with negative inf inputs as follows:\ntf.maximum(-math.inf, -math.inf).eval()\n\ngives the expected result -inf\nHowever, tf.reduce_max, on the same inputs:\ntf.reduce_max([-math.inf, -math.inf]).eval()\n\ngives: -3.40282e+38 which is the min float32.\nFor positive infinity inputs, both functions result in inf.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nI posted this as an SO question first:\nhttp://stackoverflow.com/questions/39211546/bug-in-tensorflow-reduce-max-for-negative-infinity\nEnvironment info\nOperating System: Ubuntu 16.04\nInstalled version of CUDA and cuDNN:\n-rw-r--r-- 1 root root   560184 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 May 25 17:52 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 May 25 17:52 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rw-r--r-- 1 root root   394472 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudart_static.a\nlrwxrwxrwx 1 root root       13 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so.5 -> libcudnn.so.5.0.5\n-rwxr-xr-x 1 root root 78065952 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n\n\nInstalled from source.\nCommit hash: 3cb3995\nBazel:\nBuild label: 0.3.0\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Jun 10 11:38:23 2016 (1465558703)\nBuild timestamp: 1465558703\nBuild timestamp as int: 1465558703", "body": "Using `tf.maximum` with negative inf inputs as follows:\n\n```\ntf.maximum(-math.inf, -math.inf).eval()\n```\n\ngives the expected result `-inf`\n\nHowever, `tf.reduce_max`, on the same inputs:\n\n```\ntf.reduce_max([-math.inf, -math.inf]).eval()\n```\n\ngives: `-3.40282e+38` which is the min float32.\n\nFor positive infinity inputs, both functions result in `inf`.\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nI posted this as an SO question first:\nhttp://stackoverflow.com/questions/39211546/bug-in-tensorflow-reduce-max-for-negative-infinity\n### Environment info\n\nOperating System: Ubuntu 16.04\n\nInstalled version of CUDA and cuDNN: \n\n```\n-rw-r--r-- 1 root root   560184 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root       16 May 25 17:52 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root       19 May 25 17:52 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rw-r--r-- 1 root root   394472 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root   737516 May 25 17:48 /usr/local/cuda-8.0/lib64/libcudart_static.a\nlrwxrwxrwx 1 root root       13 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so -> libcudnn.so.5\nlrwxrwxrwx 1 root root       17 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so.5 -> libcudnn.so.5.0.5\n-rwxr-xr-x 1 root root 78065952 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn.so.5.0.5\n-rw-r--r-- 1 root root 68709594 Jul  4 16:22 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n\n```\n\nInstalled from source.\n\nCommit hash: 3cb39956e622b322e43547cf2b6e337020643f21\n\nBazel:\n\n```\nBuild label: 0.3.0\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Fri Jun 10 11:38:23 2016 (1465558703)\nBuild timestamp: 1465558703\nBuild timestamp as int: 1465558703\n\n```\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5898", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5898/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5898/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5898/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5898", "id": 191945400, "node_id": "MDU6SXNzdWUxOTE5NDU0MDA=", "number": 5898, "title": "pool efficiency on cpu", "user": {"login": "ericyue", "id": 918889, "node_id": "MDQ6VXNlcjkxODg4OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/918889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericyue", "html_url": "https://github.com/ericyue", "followers_url": "https://api.github.com/users/ericyue/followers", "following_url": "https://api.github.com/users/ericyue/following{/other_user}", "gists_url": "https://api.github.com/users/ericyue/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericyue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericyue/subscriptions", "organizations_url": "https://api.github.com/users/ericyue/orgs", "repos_url": "https://api.github.com/users/ericyue/repos", "events_url": "https://api.github.com/users/ericyue/events{/privacy}", "received_events_url": "https://api.github.com/users/ericyue/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-28T08:30:52Z", "updated_at": "2016-11-28T20:50:43Z", "closed_at": "2016-11-28T20:50:43Z", "author_association": "NONE", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>I have searched about cpu usage and try everything I can. But it's still pool efficiency usage, <strong>only use 30% of my cpu</strong><br>\nI thought it maybe the train-dataset read speed limitation?</p>\n<h3>Environment info</h3>\n<p>Operating System:<br>\ncentos6.5 with latest version of tensorflow</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>full code here<br>\n<a href=\"https://github.com/tobegit3hub/deep_recommend_system/blob/master/a8a_classifier.py\">https://github.com/tobegit3hub/deep_recommend_system/blob/master/a8a_classifier.py</a></p>\n<pre><code># Read TFRecords files for training\nfilename_queue = tf.train.string_input_producer(\n    tf.train.match_filenames_once(\"data/a8a_train.libsvm.tfrecords\"),\n    num_epochs=epoch_number)\nserialized_example = read_and_decode(filename_queue)\nbatch_serialized_example = tf.train.shuffle_batch(\n    [serialized_example],\n    batch_size=batch_size,\n    num_threads=thread_number,\n    capacity=capacity,\n    min_after_dequeue=min_after_dequeue)\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<p>try the specify the thread number when init session , the shuffle_batch num_threads etc.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).<br>\nhere is a tensorboard screenshot</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/918889/20661115/0014e198-b588-11e6-8c33-b692c32568cd.png\"><img width=\"750\" alt=\"screen shot 2016-11-28 at 4 15 15 pm\" src=\"https://cloud.githubusercontent.com/assets/918889/20661115/0014e198-b588-11e6-8c33-b692c32568cd.png\" style=\"max-width:100%;\"></a></p>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nI have searched about cpu usage and try everything I can. But it's still pool efficiency usage, only use 30% of my cpu\nI thought it maybe the train-dataset read speed limitation?\nEnvironment info\nOperating System:\ncentos6.5 with latest version of tensorflow\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nfull code here\nhttps://github.com/tobegit3hub/deep_recommend_system/blob/master/a8a_classifier.py\n# Read TFRecords files for training\nfilename_queue = tf.train.string_input_producer(\n    tf.train.match_filenames_once(\"data/a8a_train.libsvm.tfrecords\"),\n    num_epochs=epoch_number)\nserialized_example = read_and_decode(filename_queue)\nbatch_serialized_example = tf.train.shuffle_batch(\n    [serialized_example],\n    batch_size=batch_size,\n    num_threads=thread_number,\n    capacity=capacity,\n    min_after_dequeue=min_after_dequeue)\n\nWhat other attempted solutions have you tried?\ntry the specify the thread number when init session , the shuffle_batch num_threads etc.\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).\nhere is a tensorboard screenshot", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\nI have searched about cpu usage and try everything I can. But it's still pool efficiency usage, **only use 30% of my cpu**\r\nI thought it maybe the train-dataset read speed limitation?\r\n\r\n### Environment info\r\nOperating System:\r\ncentos6.5 with latest version of tensorflow \r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nfull code here\r\nhttps://github.com/tobegit3hub/deep_recommend_system/blob/master/a8a_classifier.py\r\n```\r\n# Read TFRecords files for training\r\nfilename_queue = tf.train.string_input_producer(\r\n    tf.train.match_filenames_once(\"data/a8a_train.libsvm.tfrecords\"),\r\n    num_epochs=epoch_number)\r\nserialized_example = read_and_decode(filename_queue)\r\nbatch_serialized_example = tf.train.shuffle_batch(\r\n    [serialized_example],\r\n    batch_size=batch_size,\r\n    num_threads=thread_number,\r\n    capacity=capacity,\r\n    min_after_dequeue=min_after_dequeue)\r\n```\r\n\r\n### What other attempted solutions have you tried?\r\ntry the specify the thread number when init session , the shuffle_batch num_threads etc.\r\n\r\n### Logs or other output that would be helpful\r\n(If logs are large, please upload as attachment or provide link).\r\nhere is a tensorboard screenshot\r\n\r\n<img width=\"750\" alt=\"screen shot 2016-11-28 at 4 15 15 pm\" src=\"https://cloud.githubusercontent.com/assets/918889/20661115/0014e198-b588-11e6-8c33-b692c32568cd.png\">\r\n\r\n"}
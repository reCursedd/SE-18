{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15859", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15859/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15859/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15859/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15859", "id": 286100587, "node_id": "MDU6SXNzdWUyODYxMDA1ODc=", "number": 15859, "title": "Eager mode: create_file_writer cannot be called twice", "user": {"login": "malmaud", "id": 987837, "node_id": "MDQ6VXNlcjk4NzgzNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/987837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malmaud", "html_url": "https://github.com/malmaud", "followers_url": "https://api.github.com/users/malmaud/followers", "following_url": "https://api.github.com/users/malmaud/following{/other_user}", "gists_url": "https://api.github.com/users/malmaud/gists{/gist_id}", "starred_url": "https://api.github.com/users/malmaud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malmaud/subscriptions", "organizations_url": "https://api.github.com/users/malmaud/orgs", "repos_url": "https://api.github.com/users/malmaud/repos", "events_url": "https://api.github.com/users/malmaud/events{/privacy}", "received_events_url": "https://api.github.com/users/malmaud/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-01-04T20:14:03Z", "updated_at": "2018-10-26T11:19:11Z", "closed_at": "2018-05-26T18:37:11Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Have I written custom code: No<br>\nOS Platform and Distribution: OS X 10.13.2<br>\nTensorFlow installed from: Source<br>\nTensorFlow version: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/cc9bdb70b88c76f293f27e29e91cb7739ba3fdc4/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/cc9bdb70b88c76f293f27e29e91cb7739ba3fdc4\"><tt>cc9bdb7</tt></a><br>\nBazel version: N/A<br>\nCUDA/cuDNN version: N/A<br>\nGPU model and memory: N/A<br>\nExact command to reproduce:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">import</span> tensorflow.contrib.eager <span class=\"pl-k\">as</span> tfe\ntfe.enable_eager_execution()\ntf.contrib.summary.create_file_writer(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Users/malmaud/tmp/summaries<span class=\"pl-pds\">\"</span></span>)\ntf.contrib.summary.create_file_writer(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/Users/malmaud/tmp/summaries<span class=\"pl-pds\">\"</span></span>)</pre></div>\n<p>The second call to <code>create_file_writer</code> gives:</p>\n<pre><code>---------------------------------------------------------------------------\nAlreadyExistsError                        Traceback (most recent call last)\n&lt;ipython-input-5-4583ede32bc2&gt; in &lt;module&gt;()\n----&gt; 1 tf.contrib.summary.create_file_writer(\"/Users/malmaud/tmp/summaries\")\n\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/summary_ops.py in create_file_writer(logdir, max_queue, flush_millis, filename_suffix, name)\n    210         max_queue=max_queue,\n    211         flush_millis=flush_millis,\n--&gt; 212         filename_suffix=filename_suffix)\n    213 \n    214 \n\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/summary_ops.py in _make_summary_writer(name, factory, **kwargs)\n    271   #   ops.get_default_session().run(node)\n    272   ops.add_to_collection(_SUMMARY_WRITER_INIT_COLLECTION_NAME,\n--&gt; 273                         factory(resource, **kwargs))\n    274   return SummaryWriter(resource)\n    275 \n\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/gen_summary_ops.py in create_summary_file_writer(writer, logdir, max_queue, flush_millis, filename_suffix, name)\n    145     _result = _execute.execute(b\"CreateSummaryFileWriter\", 0,\n    146                                inputs=_inputs_flat, attrs=_attrs, ctx=_ctx,\n--&gt; 147                                name=name)\n    148     _result = None\n    149   return _result\n\n~/anaconda3/lib/python3.6/site-packages/tensorflow/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\n     64     else:\n     65       message = e.message\n---&gt; 66     six.raise_from(core._status_to_exception(e.code, message), None)\n     67   # pylint: enable=protected-access\n     68   return tensors\n\n~/anaconda3/lib/python3.6/site-packages/six.py in raise_from(value, from_value)\n\nAlreadyExistsError: Resource localhost//N10tensorflow22SummaryWriterInterfaceE [Op:CreateSummaryFileWriter]\n</code></pre>\n<p>Explicitly calling <code>create_file_writer</code> with a unique <code>name</code> keyword argument solves the issue, but I'd have thought the name should be auto-uniquefied like with other TensorFlow ops.</p>", "body_text": "Have I written custom code: No\nOS Platform and Distribution: OS X 10.13.2\nTensorFlow installed from: Source\nTensorFlow version: cc9bdb7\nBazel version: N/A\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce:\nimport tensorflow as tf\nimport tensorflow.contrib.eager as tfe\ntfe.enable_eager_execution()\ntf.contrib.summary.create_file_writer(\"/Users/malmaud/tmp/summaries\")\ntf.contrib.summary.create_file_writer(\"/Users/malmaud/tmp/summaries\")\nThe second call to create_file_writer gives:\n---------------------------------------------------------------------------\nAlreadyExistsError                        Traceback (most recent call last)\n<ipython-input-5-4583ede32bc2> in <module>()\n----> 1 tf.contrib.summary.create_file_writer(\"/Users/malmaud/tmp/summaries\")\n\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/summary_ops.py in create_file_writer(logdir, max_queue, flush_millis, filename_suffix, name)\n    210         max_queue=max_queue,\n    211         flush_millis=flush_millis,\n--> 212         filename_suffix=filename_suffix)\n    213 \n    214 \n\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/summary_ops.py in _make_summary_writer(name, factory, **kwargs)\n    271   #   ops.get_default_session().run(node)\n    272   ops.add_to_collection(_SUMMARY_WRITER_INIT_COLLECTION_NAME,\n--> 273                         factory(resource, **kwargs))\n    274   return SummaryWriter(resource)\n    275 \n\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/gen_summary_ops.py in create_summary_file_writer(writer, logdir, max_queue, flush_millis, filename_suffix, name)\n    145     _result = _execute.execute(b\"CreateSummaryFileWriter\", 0,\n    146                                inputs=_inputs_flat, attrs=_attrs, ctx=_ctx,\n--> 147                                name=name)\n    148     _result = None\n    149   return _result\n\n~/anaconda3/lib/python3.6/site-packages/tensorflow/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\n     64     else:\n     65       message = e.message\n---> 66     six.raise_from(core._status_to_exception(e.code, message), None)\n     67   # pylint: enable=protected-access\n     68   return tensors\n\n~/anaconda3/lib/python3.6/site-packages/six.py in raise_from(value, from_value)\n\nAlreadyExistsError: Resource localhost//N10tensorflow22SummaryWriterInterfaceE [Op:CreateSummaryFileWriter]\n\nExplicitly calling create_file_writer with a unique name keyword argument solves the issue, but I'd have thought the name should be auto-uniquefied like with other TensorFlow ops.", "body": "Have I written custom code: No\r\nOS Platform and Distribution: OS X 10.13.2\r\nTensorFlow installed from: Source\r\nTensorFlow version: cc9bdb70b88c76f293f27e29e91cb7739ba3fdc4\r\nBazel version: N/A\r\nCUDA/cuDNN version: N/A\r\nGPU model and memory: N/A\r\nExact command to reproduce:\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport tensorflow.contrib.eager as tfe\r\ntfe.enable_eager_execution()\r\ntf.contrib.summary.create_file_writer(\"/Users/malmaud/tmp/summaries\")\r\ntf.contrib.summary.create_file_writer(\"/Users/malmaud/tmp/summaries\")\r\n```\r\n\r\nThe second call to `create_file_writer` gives:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nAlreadyExistsError                        Traceback (most recent call last)\r\n<ipython-input-5-4583ede32bc2> in <module>()\r\n----> 1 tf.contrib.summary.create_file_writer(\"/Users/malmaud/tmp/summaries\")\r\n\r\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/summary_ops.py in create_file_writer(logdir, max_queue, flush_millis, filename_suffix, name)\r\n    210         max_queue=max_queue,\r\n    211         flush_millis=flush_millis,\r\n--> 212         filename_suffix=filename_suffix)\r\n    213 \r\n    214 \r\n\r\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/summary_ops.py in _make_summary_writer(name, factory, **kwargs)\r\n    271   #   ops.get_default_session().run(node)\r\n    272   ops.add_to_collection(_SUMMARY_WRITER_INIT_COLLECTION_NAME,\r\n--> 273                         factory(resource, **kwargs))\r\n    274   return SummaryWriter(resource)\r\n    275 \r\n\r\n~/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/summary/gen_summary_ops.py in create_summary_file_writer(writer, logdir, max_queue, flush_millis, filename_suffix, name)\r\n    145     _result = _execute.execute(b\"CreateSummaryFileWriter\", 0,\r\n    146                                inputs=_inputs_flat, attrs=_attrs, ctx=_ctx,\r\n--> 147                                name=name)\r\n    148     _result = None\r\n    149   return _result\r\n\r\n~/anaconda3/lib/python3.6/site-packages/tensorflow/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     64     else:\r\n     65       message = e.message\r\n---> 66     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     67   # pylint: enable=protected-access\r\n     68   return tensors\r\n\r\n~/anaconda3/lib/python3.6/site-packages/six.py in raise_from(value, from_value)\r\n\r\nAlreadyExistsError: Resource localhost//N10tensorflow22SummaryWriterInterfaceE [Op:CreateSummaryFileWriter]\r\n```\r\n\r\nExplicitly calling `create_file_writer` with a unique `name` keyword argument solves the issue, but I'd have thought the name should be auto-uniquefied like with other TensorFlow ops.\r\n  "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/358427195", "html_url": "https://github.com/tensorflow/tensorflow/issues/16106#issuecomment-358427195", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16106", "id": 358427195, "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODQyNzE5NQ==", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-17T20:04:44Z", "updated_at": "2018-01-17T20:04:44Z", "author_association": "MEMBER", "body_html": "<p>Taking a step back: In general, for any given TensorFlow operation there are multiple implementations (kernels) based on the device and set of types that the kernel implements support for.</p>\n<p>For some operations, like <code>Gather</code>, there are GPU kernels that support int64 types.<br>\nFor other operations, like <code>MatMul</code>, the int64 GPU kernel is not implemented yet.</p>\n<p>Variables are created using the <code>VarHandleOp</code>, and as you noticed, it doesn't implement a GPU kernel for the <code>DT_INT64</code> type yet. However, for this particular op, it seems like registering the int64 type for the kernels <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/core/kernels/resource_variable_ops.cc#L132\">here</a> will suffice.</p>\n<p>Long story short: If you need <code>int64</code> variables, it should be trivial to add support for them. However, be warned that in general, GPU operations are not integer friendly so you will run into coverage issues there.</p>", "body_text": "Taking a step back: In general, for any given TensorFlow operation there are multiple implementations (kernels) based on the device and set of types that the kernel implements support for.\nFor some operations, like Gather, there are GPU kernels that support int64 types.\nFor other operations, like MatMul, the int64 GPU kernel is not implemented yet.\nVariables are created using the VarHandleOp, and as you noticed, it doesn't implement a GPU kernel for the DT_INT64 type yet. However, for this particular op, it seems like registering the int64 type for the kernels here will suffice.\nLong story short: If you need int64 variables, it should be trivial to add support for them. However, be warned that in general, GPU operations are not integer friendly so you will run into coverage issues there.", "body": "Taking a step back: In general, for any given TensorFlow operation there are multiple implementations (kernels) based on the device and set of types that the kernel implements support for.\r\n\r\nFor some operations, like `Gather`, there are GPU kernels that support int64 types.\r\nFor other operations, like `MatMul`, the int64 GPU kernel is not implemented yet.\r\n\r\nVariables are created using the `VarHandleOp`, and as you noticed, it doesn't implement a GPU kernel for the `DT_INT64` type yet. However, for this particular op, it seems like registering the int64 type for the kernels [here](https://github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/core/kernels/resource_variable_ops.cc#L132) will suffice.\r\n\r\nLong story short: If you need `int64` variables, it should be trivial to add support for them. However, be warned that in general, GPU operations are not integer friendly so you will run into coverage issues there."}
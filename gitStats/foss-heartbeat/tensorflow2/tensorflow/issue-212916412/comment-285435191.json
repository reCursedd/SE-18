{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/285435191", "html_url": "https://github.com/tensorflow/tensorflow/issues/8227#issuecomment-285435191", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8227", "id": 285435191, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTQzNTE5MQ==", "user": {"login": "persiyanov", "id": 3997997, "node_id": "MDQ6VXNlcjM5OTc5OTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3997997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/persiyanov", "html_url": "https://github.com/persiyanov", "followers_url": "https://api.github.com/users/persiyanov/followers", "following_url": "https://api.github.com/users/persiyanov/following{/other_user}", "gists_url": "https://api.github.com/users/persiyanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/persiyanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/persiyanov/subscriptions", "organizations_url": "https://api.github.com/users/persiyanov/orgs", "repos_url": "https://api.github.com/users/persiyanov/repos", "events_url": "https://api.github.com/users/persiyanov/events{/privacy}", "received_events_url": "https://api.github.com/users/persiyanov/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-09T18:20:21Z", "updated_at": "2017-03-09T18:21:29Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=51059\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/cancan101\">@cancan101</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11547801\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/prb12\">@prb12</a> Hi! Is there someone working on this already? If not, I would like to take part in implementation of this feature (yeah, I know this is the serious issue, not like my first one <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"210863803\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7948\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/7948/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/7948\">#7948</a>). Could you push me in right direction?</p>\n<p>As I understood, the point is this:<br>\n\u2022 We know that <code>NCHW</code> is better for training on GPU, but <code>NHWC</code> is better for inference on CPU<br>\n\u2022 But we don't want to force user to think about these details.<br>\n\u2022 User wants to build one model with one <code>data_format</code> and use it both for inference and training.<br>\n\u2022 What we need to do is still run Cudnn ops with <code>NCHW</code> format and cpu ops with <code>NHWC</code>, so we want to do appropriate reshapes.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=11547801\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/prb12\">@prb12</a> Could you please elaborate more on your idea with <code>GraphOptimizationPass</code>?</p>", "body_text": "@cancan101 @prb12 Hi! Is there someone working on this already? If not, I would like to take part in implementation of this feature (yeah, I know this is the serious issue, not like my first one #7948). Could you push me in right direction?\nAs I understood, the point is this:\n\u2022 We know that NCHW is better for training on GPU, but NHWC is better for inference on CPU\n\u2022 But we don't want to force user to think about these details.\n\u2022 User wants to build one model with one data_format and use it both for inference and training.\n\u2022 What we need to do is still run Cudnn ops with NCHW format and cpu ops with NHWC, so we want to do appropriate reshapes.\n@prb12 Could you please elaborate more on your idea with GraphOptimizationPass?", "body": "@cancan101 @prb12 Hi! Is there someone working on this already? If not, I would like to take part in implementation of this feature (yeah, I know this is the serious issue, not like my first one #7948). Could you push me in right direction?\r\n\r\nAs I understood, the point is this:\r\n\u2022 We know that `NCHW` is better for training on GPU, but `NHWC` is better for inference on CPU\r\n\u2022 But we don't want to force user to think about these details.\r\n\u2022 User wants to build one model with one `data_format` and use it both for inference and training.\r\n\u2022 What we need to do is still run Cudnn ops with `NCHW` format and cpu ops with `NHWC`, so we want to do appropriate reshapes.\r\n\r\n@prb12 Could you please elaborate more on your idea with `GraphOptimizationPass`?"}
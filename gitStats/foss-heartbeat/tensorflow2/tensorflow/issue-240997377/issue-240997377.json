{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11328", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11328/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11328/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11328/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11328", "id": 240997377, "node_id": "MDU6SXNzdWUyNDA5OTczNzc=", "number": 11328, "title": "wide_n_deep AttributeError (master) and ValueError (r1.2)", "user": {"login": "amandajliu", "id": 8225615, "node_id": "MDQ6VXNlcjgyMjU2MTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/8225615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amandajliu", "html_url": "https://github.com/amandajliu", "followers_url": "https://api.github.com/users/amandajliu/followers", "following_url": "https://api.github.com/users/amandajliu/following{/other_user}", "gists_url": "https://api.github.com/users/amandajliu/gists{/gist_id}", "starred_url": "https://api.github.com/users/amandajliu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amandajliu/subscriptions", "organizations_url": "https://api.github.com/users/amandajliu/orgs", "repos_url": "https://api.github.com/users/amandajliu/repos", "events_url": "https://api.github.com/users/amandajliu/events{/privacy}", "received_events_url": "https://api.github.com/users/amandajliu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-06T15:33:32Z", "updated_at": "2017-07-07T17:14:18Z", "closed_at": "2017-07-07T17:13:56Z", "author_association": "NONE", "body_html": "<p>I'm using TensorFlow 1.2.1. When I run <code>python wide_n_deep_tutorial.py --model_type=wide</code> from the <a href=\"https://www.tensorflow.org/tutorials/wide\" rel=\"nofollow\">Linear Model tutorial</a>, I get the following AttributeError:</p>\n<pre><code>  File \"wide_n_deep_tutorial.py\", line 139, in build_estimator\n    m = tf.estimator.LinearClassifier(\nAttributeError: 'module' object has no attribute 'LinearClassifier'\n</code></pre>\n<p>I tried switching to r1.2, as suggested in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"240297216\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/11256\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/11256/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/11256\">#11256</a>, but got this ValueError on r1.2:</p>\n<pre><code>Traceback (most recent call last):\n  File \"wide_n_deep_tutorial.py\", line 234, in &lt;module&gt;\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"wide_n_deep_tutorial.py\", line 197, in main\n    FLAGS.train_data, FLAGS.test_data)\n  File \"wide_n_deep_tutorial.py\", line 186, in train_and_eval\n    m.fit(input_fn=lambda: input_fn(df_train), steps=train_steps)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 289, in new_func\n    return func(*args, **kwargs)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 455, in fit\n    loss = self._train_model(input_fn=input_fn, hooks=hooks)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 953, in _train_model\n    features, labels = input_fn()\n  File \"wide_n_deep_tutorial.py\", line 186, in &lt;lambda&gt;\n    m.fit(input_fn=lambda: input_fn(df_train), steps=train_steps)\n  File \"wide_n_deep_tutorial.py\", line 148, in input_fn\n    for k in CATEGORICAL_COLUMNS}\n  File \"wide_n_deep_tutorial.py\", line 148, in &lt;dictcomp&gt;\n    for k in CATEGORICAL_COLUMNS}\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/sparse_tensor.py\", line 132, in __init__\n    indices_shape = indices.get_shape().with_rank(2)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 632, in with_rank\n    raise ValueError(\"Shape %s must have rank %d\" % (self, rank))\nValueError: Shape (0,) must have rank 2\n</code></pre>", "body_text": "I'm using TensorFlow 1.2.1. When I run python wide_n_deep_tutorial.py --model_type=wide from the Linear Model tutorial, I get the following AttributeError:\n  File \"wide_n_deep_tutorial.py\", line 139, in build_estimator\n    m = tf.estimator.LinearClassifier(\nAttributeError: 'module' object has no attribute 'LinearClassifier'\n\nI tried switching to r1.2, as suggested in #11256, but got this ValueError on r1.2:\nTraceback (most recent call last):\n  File \"wide_n_deep_tutorial.py\", line 234, in <module>\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"wide_n_deep_tutorial.py\", line 197, in main\n    FLAGS.train_data, FLAGS.test_data)\n  File \"wide_n_deep_tutorial.py\", line 186, in train_and_eval\n    m.fit(input_fn=lambda: input_fn(df_train), steps=train_steps)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 289, in new_func\n    return func(*args, **kwargs)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 455, in fit\n    loss = self._train_model(input_fn=input_fn, hooks=hooks)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 953, in _train_model\n    features, labels = input_fn()\n  File \"wide_n_deep_tutorial.py\", line 186, in <lambda>\n    m.fit(input_fn=lambda: input_fn(df_train), steps=train_steps)\n  File \"wide_n_deep_tutorial.py\", line 148, in input_fn\n    for k in CATEGORICAL_COLUMNS}\n  File \"wide_n_deep_tutorial.py\", line 148, in <dictcomp>\n    for k in CATEGORICAL_COLUMNS}\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/sparse_tensor.py\", line 132, in __init__\n    indices_shape = indices.get_shape().with_rank(2)\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 632, in with_rank\n    raise ValueError(\"Shape %s must have rank %d\" % (self, rank))\nValueError: Shape (0,) must have rank 2", "body": "I'm using TensorFlow 1.2.1. When I run `python wide_n_deep_tutorial.py --model_type=wide` from the [Linear Model tutorial](https://www.tensorflow.org/tutorials/wide), I get the following AttributeError:\r\n\r\n```\r\n  File \"wide_n_deep_tutorial.py\", line 139, in build_estimator\r\n    m = tf.estimator.LinearClassifier(\r\nAttributeError: 'module' object has no attribute 'LinearClassifier'\r\n```\r\n\r\nI tried switching to r1.2, as suggested in #11256, but got this ValueError on r1.2:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"wide_n_deep_tutorial.py\", line 234, in <module>\r\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"wide_n_deep_tutorial.py\", line 197, in main\r\n    FLAGS.train_data, FLAGS.test_data)\r\n  File \"wide_n_deep_tutorial.py\", line 186, in train_and_eval\r\n    m.fit(input_fn=lambda: input_fn(df_train), steps=train_steps)\r\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 289, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 455, in fit\r\n    loss = self._train_model(input_fn=input_fn, hooks=hooks)\r\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 953, in _train_model\r\n    features, labels = input_fn()\r\n  File \"wide_n_deep_tutorial.py\", line 186, in <lambda>\r\n    m.fit(input_fn=lambda: input_fn(df_train), steps=train_steps)\r\n  File \"wide_n_deep_tutorial.py\", line 148, in input_fn\r\n    for k in CATEGORICAL_COLUMNS}\r\n  File \"wide_n_deep_tutorial.py\", line 148, in <dictcomp>\r\n    for k in CATEGORICAL_COLUMNS}\r\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/sparse_tensor.py\", line 132, in __init__\r\n    indices_shape = indices.get_shape().with_rank(2)\r\n  File \"/home/usr/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 632, in with_rank\r\n    raise ValueError(\"Shape %s must have rank %d\" % (self, rank))\r\nValueError: Shape (0,) must have rank 2\r\n```\r\n"}
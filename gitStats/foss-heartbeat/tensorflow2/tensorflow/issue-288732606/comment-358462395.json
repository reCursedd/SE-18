{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/358462395", "html_url": "https://github.com/tensorflow/tensorflow/issues/16139#issuecomment-358462395", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16139", "id": 358462395, "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODQ2MjM5NQ==", "user": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-17T22:00:24Z", "updated_at": "2018-01-17T22:00:24Z", "author_association": "MEMBER", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6969686\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/benoitsteiner\">@benoitsteiner</a>, any other thoughts... here is a sampling of the eigen function stack entries that are so prevelant</p>\n<pre><code>#30817 0x00007fffd55898fb in Eigen::TensorEvaluator&lt;Eigen::TensorContractionOp&lt;Eigen::array&lt;Eigen::IndexPair&lt;long&gt;, 1ul&gt; const, Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorVolumePatchOp&lt;-1l, -1l, -1l, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const&gt; const, Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;::Context&lt;Eigen::internal::gemm_pack_lhs&lt;double, long, Eigen::internal::TensorContractionSubMapper&lt;double, long, 1, Eigen::TensorEvaluator&lt;Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;, Eigen::array&lt;long, 1ul&gt;, Eigen::array&lt;long, 1ul&gt;, 2, true, false, 0, Eigen::MakePointer&gt;, 4, 2, 0, false, false&gt;, Eigen::internal::gemm_pack_rhs&lt;double, long, Eigen::internal::TensorContractionSubMapper&lt;double, long, 0, Eigen::TensorEvaluator&lt;Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorVolumePatchOp&lt;-1l, -1l, -1l, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;, Eigen::array&lt;long, 1ul&gt;, Eigen::array&lt;long, 1ul&gt;, 2, true, false, 0, Eigen::MakePointer&gt;, 4, 0, false, false&gt;, Eigen::internal::gebp_kernel&lt;double, double, long, Eigen::internal::blas_data_mapper&lt;double, long, 0, 0&gt;, 4, 4, false, false&gt;, Eigen::internal::TensorContractionInputMapper&lt;double, long, 1, Eigen::TensorEvaluator&lt;Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;, Eigen::array&lt;long, 1ul&gt;, Eigen::array&lt;long, 1ul&gt;, 2, true, false, 0, Eigen::MakePointer&gt;, Eigen::internal::TensorContractionInputMapper&lt;double, long, 0, Eigen::TensorEvaluator&lt;Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorVolumePatchOp&lt;-1l, -1l, -1l, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;, Eigen::array&lt;long, 1ul&gt;, Eigen::array&lt;long, 1ul&gt;, 2, true, false, 0, Eigen::MakePointer&gt;, Eigen::internal::blas_data_mapper&lt;double, long, 0, 0&gt; &gt;::pack_lhs(long, long) ()\n   from /usr/local/google/home/aselle/tensorflow3/local/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so\n#30818 0x00007fffd5588a49 in Eigen::TensorEvaluator&lt;Eigen::TensorContractionOp&lt;Eigen::array&lt;Eigen::IndexPair&lt;long&gt;, 1ul&gt; const, Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorVolumePatchOp&lt;-1l, -1l, -1l, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const&gt; const, Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;::Context&lt;Eigen::internal::gemm_pack_lhs&lt;double, long, Eigen::internal::TensorContractionSubMapper&lt;double, long, 1, Eigen::TensorEvaluator&lt;Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;, Eigen::array&lt;long, 1ul&gt;, Eigen::array&lt;long, 1ul&gt;, 2, true, false, 0, Eigen::MakePointer&gt;, 4, 2, 0, false, false&gt;, Eigen::internal::gemm_pack_rhs&lt;double, long, Eigen::internal::TensorContractionSubMapper&lt;double, long, 0, Eigen::TensorEvaluator&lt;Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorVolumePatchOp&lt;-1l, -1l, -1l, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;, Eigen::array&lt;long, 1ul&gt;, Eigen::array&lt;long, 1ul&gt;, 2, true, false, 0, Eigen::MakePointer&gt;, 4, 0, false, false&gt;, Eigen::internal::gebp_kernel&lt;double, double, long, Eigen::internal::blas_data_mapper&lt;double, long, 0, 0&gt;, 4, 4, false, false&gt;, Eigen::internal::TensorContractionInputMapper&lt;double, long, 1, Eigen::TensorEvaluator&lt;Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;, Eigen::array&lt;long, 1ul&gt;, Eigen::array&lt;long, 1ul&gt;, 2, true, false, 0, Eigen::MakePointer&gt;, Eigen::internal::TensorContractionInputMapper&lt;double, long, 0, Eigen::TensorEvaluator&lt;Eigen::TensorReshapingOp&lt;Eigen::DSizes&lt;long, 2&gt; const, Eigen::TensorVolumePatchOp&lt;-1l, -1l, -1l, Eigen::TensorMap&lt;Eigen::Tensor&lt;double const, 5, 1, long&gt;, 16, Eigen::MakePointer&gt; const&gt; const&gt; const, Eigen::ThreadPoolDevice&gt;, Eigen::array&lt;long, 1ul&gt;, Eigen::array&lt;long, 1ul&gt;, 2, true, false, 0, Eigen::MakePointer&gt;, Eigen::internal::blas_data_mapper&lt;double, long, 0, 0&gt; &gt;::enqueue_packing_helper(long, long, long, bool) ()\n   from /usr/local/google/home/aselle/tensorflow3/local/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so\n\n</code></pre>", "body_text": "@benoitsteiner, any other thoughts... here is a sampling of the eigen function stack entries that are so prevelant\n#30817 0x00007fffd55898fb in Eigen::TensorEvaluator<Eigen::TensorContractionOp<Eigen::array<Eigen::IndexPair<long>, 1ul> const, Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>::Context<Eigen::internal::gemm_pack_lhs<double, long, Eigen::internal::TensorContractionSubMapper<double, long, 1, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, 4, 2, 0, false, false>, Eigen::internal::gemm_pack_rhs<double, long, Eigen::internal::TensorContractionSubMapper<double, long, 0, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, 4, 0, false, false>, Eigen::internal::gebp_kernel<double, double, long, Eigen::internal::blas_data_mapper<double, long, 0, 0>, 4, 4, false, false>, Eigen::internal::TensorContractionInputMapper<double, long, 1, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, Eigen::internal::TensorContractionInputMapper<double, long, 0, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, Eigen::internal::blas_data_mapper<double, long, 0, 0> >::pack_lhs(long, long) ()\n   from /usr/local/google/home/aselle/tensorflow3/local/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so\n#30818 0x00007fffd5588a49 in Eigen::TensorEvaluator<Eigen::TensorContractionOp<Eigen::array<Eigen::IndexPair<long>, 1ul> const, Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>::Context<Eigen::internal::gemm_pack_lhs<double, long, Eigen::internal::TensorContractionSubMapper<double, long, 1, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, 4, 2, 0, false, false>, Eigen::internal::gemm_pack_rhs<double, long, Eigen::internal::TensorContractionSubMapper<double, long, 0, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, 4, 0, false, false>, Eigen::internal::gebp_kernel<double, double, long, Eigen::internal::blas_data_mapper<double, long, 0, 0>, 4, 4, false, false>, Eigen::internal::TensorContractionInputMapper<double, long, 1, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, Eigen::internal::TensorContractionInputMapper<double, long, 0, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, Eigen::internal::blas_data_mapper<double, long, 0, 0> >::enqueue_packing_helper(long, long, long, bool) ()\n   from /usr/local/google/home/aselle/tensorflow3/local/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so", "body": "@benoitsteiner, any other thoughts... here is a sampling of the eigen function stack entries that are so prevelant\r\n\r\n```\r\n#30817 0x00007fffd55898fb in Eigen::TensorEvaluator<Eigen::TensorContractionOp<Eigen::array<Eigen::IndexPair<long>, 1ul> const, Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>::Context<Eigen::internal::gemm_pack_lhs<double, long, Eigen::internal::TensorContractionSubMapper<double, long, 1, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, 4, 2, 0, false, false>, Eigen::internal::gemm_pack_rhs<double, long, Eigen::internal::TensorContractionSubMapper<double, long, 0, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, 4, 0, false, false>, Eigen::internal::gebp_kernel<double, double, long, Eigen::internal::blas_data_mapper<double, long, 0, 0>, 4, 4, false, false>, Eigen::internal::TensorContractionInputMapper<double, long, 1, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, Eigen::internal::TensorContractionInputMapper<double, long, 0, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, Eigen::internal::blas_data_mapper<double, long, 0, 0> >::pack_lhs(long, long) ()\r\n   from /usr/local/google/home/aselle/tensorflow3/local/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so\r\n#30818 0x00007fffd5588a49 in Eigen::TensorEvaluator<Eigen::TensorContractionOp<Eigen::array<Eigen::IndexPair<long>, 1ul> const, Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>::Context<Eigen::internal::gemm_pack_lhs<double, long, Eigen::internal::TensorContractionSubMapper<double, long, 1, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, 4, 2, 0, false, false>, Eigen::internal::gemm_pack_rhs<double, long, Eigen::internal::TensorContractionSubMapper<double, long, 0, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, 4, 0, false, false>, Eigen::internal::gebp_kernel<double, double, long, Eigen::internal::blas_data_mapper<double, long, 0, 0>, 4, 4, false, false>, Eigen::internal::TensorContractionInputMapper<double, long, 1, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, Eigen::internal::TensorContractionInputMapper<double, long, 0, Eigen::TensorEvaluator<Eigen::TensorReshapingOp<Eigen::DSizes<long, 2> const, Eigen::TensorVolumePatchOp<-1l, -1l, -1l, Eigen::TensorMap<Eigen::Tensor<double const, 5, 1, long>, 16, Eigen::MakePointer> const> const> const, Eigen::ThreadPoolDevice>, Eigen::array<long, 1ul>, Eigen::array<long, 1ul>, 2, true, false, 0, Eigen::MakePointer>, Eigen::internal::blas_data_mapper<double, long, 0, 0> >::enqueue_packing_helper(long, long, long, bool) ()\r\n   from /usr/local/google/home/aselle/tensorflow3/local/lib/python2.7/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so\r\n\r\n```\r\n"}
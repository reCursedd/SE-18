{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/371700641", "html_url": "https://github.com/tensorflow/tensorflow/issues/17533#issuecomment-371700641", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17533", "id": 371700641, "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTcwMDY0MQ==", "user": {"login": "XuChunling", "id": 10767042, "node_id": "MDQ6VXNlcjEwNzY3MDQy", "avatar_url": "https://avatars3.githubusercontent.com/u/10767042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/XuChunling", "html_url": "https://github.com/XuChunling", "followers_url": "https://api.github.com/users/XuChunling/followers", "following_url": "https://api.github.com/users/XuChunling/following{/other_user}", "gists_url": "https://api.github.com/users/XuChunling/gists{/gist_id}", "starred_url": "https://api.github.com/users/XuChunling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/XuChunling/subscriptions", "organizations_url": "https://api.github.com/users/XuChunling/orgs", "repos_url": "https://api.github.com/users/XuChunling/repos", "events_url": "https://api.github.com/users/XuChunling/events{/privacy}", "received_events_url": "https://api.github.com/users/XuChunling/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-09T03:14:51Z", "updated_at": "2018-03-19T06:36:02Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6932348\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yongtang\">@yongtang</a>  the complete message</p>\n<p>OS Platform and Distribution--&gt;Linux Ubuntu 14.04<br>\nTensorFlow installed from--&gt;binary<br>\nTensorFlow version --&gt;1.6<br>\nPython version--&gt; 3.5.5<br>\nGCC/Compiler version --&gt;GCC 4.8.4<br>\nCUDA/cuDNN version--&gt;cuda9/cuDNN7<br>\nGPU model and memory--&gt;Tesla K20c/Tesla K20m<br>\nffmpeg version--&gt;2.4.3</p>\n<p>code to reproduce:</p>\n<pre><code>import tensorflow as tf\nwith tf.Session() as sess:\n    movie_bin = tf.read_file('/home/xucl/app/data/bilibili/video/DongFangLieChe.mp4')\n    movie = tf.contrib.ffmpeg.decode_video(movie_bin)\n    movie_ev = movie.eval()\n    print(\"****\",len(movie_ev))\n</code></pre>\n<p>get an error</p>\n<p><code>2018-03-08 10:48:23.000491: F tensorflow/contrib/ffmpeg/default/ffmpeg_lib.cc:400] Non-OK-status: ReadInfoFile(stderr_filename, width, height, frames) status: Unknown: Not enough video info returned by FFmpeg [106, 0, 640, 3]Could not read FFmpeg stderr file: /tmp/tmp_file_tensorflow_3_cPNCGW.err \u5df2\u653e\u5f03 (\u6838\u5fc3\u5df2\u8f6c\u50a8)</code></p>\n<p>but, when i use ffmpeg directly, It can be exactly run well</p>\n<p><code>$ ffmpeg -i /home/xucl/app/data/bilibili/video/DongFangLieChe.mp4 image-3%d.jpeg ffmpeg version 2.4.3-1ubuntu1~trusty6 Copyright (c) 2000-2014 the FFmpeg developers built on Nov 22 2014 17:07:19 with gcc 4.8 (Ubuntu 4.8.2-19ubuntu1) configuration: --prefix=/usr --extra-version='1ubuntu1~trusty6' --build-suffix=-ffmpeg --toolchain=hardened --extra-cflags= --extra-cxxflags= --libdir=/usr/lib/x86_64-linux-gnu --shlibdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --enable-shared --disable-stripping --enable-avresample --enable-avisynth --enable-fontconfig --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-opengl --enable-x11grab --enable-libxvid --enable-libx265 --enable-libdc1394 --enable-libiec61883 --enable-libzvbi --enable-libzmq --enable-frei0r --enable-libx264 --enable-libsoxr --enable-openal --enable-libopencv libavutil      54.  7.100 / 54.  7.100 libavcodec     56.  1.100 / 56.  1.100 libavformat    56.  4.101 / 56.  4.101 libavdevice    56.  0.100 / 56.  0.100 libavfilter     5.  1.100 /  5.  1.100 libavresample   2.  1.  0 /  2.  1.  0 libswscale      3.  0.100 /  3.  0.100 libswresample   1.  1.100 /  1.  1.100 libpostproc    53.  0.100 / 53.  0.100 Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/xucl/app/data/bilibili/video/DongFangLieChe.mp4': Metadata: major_brand     : isom minor_version   : 512 compatible_brands: isomiso2avc1mp41 encoder         : Lavf57.71.100 description     : Packed by Bilibili XCoder v1.0(fixed_gap:False) Duration: 00:10:24.45, start: 0.000000, bitrate: 480 kb/s Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 640x360 [SAR 1:1 DAR 16:9], 408 kb/s, 20 fps, 20 tbr, 16k tbn, 40 tbc (default) Metadata: handler_name    : VideoHandler Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 65 kb/s (default) Metadata: handler_name    : SoundHandler [swscaler @ 0x1857c40] deprecated pixel format used, make sure you did set range correctly Output #0, image2, to 'image-3%d.jpeg': Metadata: major_brand     : isom minor_version   : 512 compatible_brands: isomiso2avc1mp41 description     : Packed by Bilibili XCoder v1.0(fixed_gap:False) encoder         : Lavf56.4.101 Stream #0:0(und): Video: mjpeg, yuvj420p, 640x360 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 20 fps, 20 tbn, 20 tbc (default) Metadata: handler_name    : VideoHandler encoder         : Lavc56.1.100 mjpeg Stream mapping: Stream #0:0 -&gt; #0:0 (h264 (native) -&gt; mjpeg (native)) Press [q] to stop, [?] for help frame=12488 fps=227 q=24.8 Lsize=N/A time=00:10:24.40 bitrate=N/A video:133937kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown </code></p>", "body_text": "@yongtang  the complete message\nOS Platform and Distribution-->Linux Ubuntu 14.04\nTensorFlow installed from-->binary\nTensorFlow version -->1.6\nPython version--> 3.5.5\nGCC/Compiler version -->GCC 4.8.4\nCUDA/cuDNN version-->cuda9/cuDNN7\nGPU model and memory-->Tesla K20c/Tesla K20m\nffmpeg version-->2.4.3\ncode to reproduce:\nimport tensorflow as tf\nwith tf.Session() as sess:\n    movie_bin = tf.read_file('/home/xucl/app/data/bilibili/video/DongFangLieChe.mp4')\n    movie = tf.contrib.ffmpeg.decode_video(movie_bin)\n    movie_ev = movie.eval()\n    print(\"****\",len(movie_ev))\n\nget an error\n2018-03-08 10:48:23.000491: F tensorflow/contrib/ffmpeg/default/ffmpeg_lib.cc:400] Non-OK-status: ReadInfoFile(stderr_filename, width, height, frames) status: Unknown: Not enough video info returned by FFmpeg [106, 0, 640, 3]Could not read FFmpeg stderr file: /tmp/tmp_file_tensorflow_3_cPNCGW.err \u5df2\u653e\u5f03 (\u6838\u5fc3\u5df2\u8f6c\u50a8)\nbut, when i use ffmpeg directly, It can be exactly run well\n$ ffmpeg -i /home/xucl/app/data/bilibili/video/DongFangLieChe.mp4 image-3%d.jpeg ffmpeg version 2.4.3-1ubuntu1~trusty6 Copyright (c) 2000-2014 the FFmpeg developers built on Nov 22 2014 17:07:19 with gcc 4.8 (Ubuntu 4.8.2-19ubuntu1) configuration: --prefix=/usr --extra-version='1ubuntu1~trusty6' --build-suffix=-ffmpeg --toolchain=hardened --extra-cflags= --extra-cxxflags= --libdir=/usr/lib/x86_64-linux-gnu --shlibdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --enable-shared --disable-stripping --enable-avresample --enable-avisynth --enable-fontconfig --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-opengl --enable-x11grab --enable-libxvid --enable-libx265 --enable-libdc1394 --enable-libiec61883 --enable-libzvbi --enable-libzmq --enable-frei0r --enable-libx264 --enable-libsoxr --enable-openal --enable-libopencv libavutil      54.  7.100 / 54.  7.100 libavcodec     56.  1.100 / 56.  1.100 libavformat    56.  4.101 / 56.  4.101 libavdevice    56.  0.100 / 56.  0.100 libavfilter     5.  1.100 /  5.  1.100 libavresample   2.  1.  0 /  2.  1.  0 libswscale      3.  0.100 /  3.  0.100 libswresample   1.  1.100 /  1.  1.100 libpostproc    53.  0.100 / 53.  0.100 Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/xucl/app/data/bilibili/video/DongFangLieChe.mp4': Metadata: major_brand     : isom minor_version   : 512 compatible_brands: isomiso2avc1mp41 encoder         : Lavf57.71.100 description     : Packed by Bilibili XCoder v1.0(fixed_gap:False) Duration: 00:10:24.45, start: 0.000000, bitrate: 480 kb/s Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 640x360 [SAR 1:1 DAR 16:9], 408 kb/s, 20 fps, 20 tbr, 16k tbn, 40 tbc (default) Metadata: handler_name    : VideoHandler Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 65 kb/s (default) Metadata: handler_name    : SoundHandler [swscaler @ 0x1857c40] deprecated pixel format used, make sure you did set range correctly Output #0, image2, to 'image-3%d.jpeg': Metadata: major_brand     : isom minor_version   : 512 compatible_brands: isomiso2avc1mp41 description     : Packed by Bilibili XCoder v1.0(fixed_gap:False) encoder         : Lavf56.4.101 Stream #0:0(und): Video: mjpeg, yuvj420p, 640x360 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 20 fps, 20 tbn, 20 tbc (default) Metadata: handler_name    : VideoHandler encoder         : Lavc56.1.100 mjpeg Stream mapping: Stream #0:0 -> #0:0 (h264 (native) -> mjpeg (native)) Press [q] to stop, [?] for help frame=12488 fps=227 q=24.8 Lsize=N/A time=00:10:24.40 bitrate=N/A video:133937kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown", "body": "@yongtang  the complete message\r\n\r\nOS Platform and Distribution-->Linux Ubuntu 14.04\r\nTensorFlow installed from-->binary\r\nTensorFlow version -->1.6\r\nPython version--> 3.5.5\r\nGCC/Compiler version -->GCC 4.8.4\r\nCUDA/cuDNN version-->cuda9/cuDNN7\r\nGPU model and memory-->Tesla K20c/Tesla K20m\r\nffmpeg version-->2.4.3\r\n\r\ncode to reproduce:\r\n```\r\nimport tensorflow as tf\r\nwith tf.Session() as sess:\r\n    movie_bin = tf.read_file('/home/xucl/app/data/bilibili/video/DongFangLieChe.mp4')\r\n    movie = tf.contrib.ffmpeg.decode_video(movie_bin)\r\n    movie_ev = movie.eval()\r\n    print(\"****\",len(movie_ev))\r\n```\r\n\r\nget an error\r\n\r\n`2018-03-08 10:48:23.000491: F tensorflow/contrib/ffmpeg/default/ffmpeg_lib.cc:400] Non-OK-status: ReadInfoFile(stderr_filename, width, height, frames) status: Unknown: Not enough video info returned by FFmpeg [106, 0, 640, 3]Could not read FFmpeg stderr file: /tmp/tmp_file_tensorflow_3_cPNCGW.err \u5df2\u653e\u5f03 (\u6838\u5fc3\u5df2\u8f6c\u50a8)`\r\n\r\nbut, when i use ffmpeg directly, It can be exactly run well\r\n\r\n`$ ffmpeg -i /home/xucl/app/data/bilibili/video/DongFangLieChe.mp4 image-3%d.jpeg\r\nffmpeg version 2.4.3-1ubuntu1~trusty6 Copyright (c) 2000-2014 the FFmpeg developers\r\n  built on Nov 22 2014 17:07:19 with gcc 4.8 (Ubuntu 4.8.2-19ubuntu1)\r\n  configuration: --prefix=/usr --extra-version='1ubuntu1~trusty6' --build-suffix=-ffmpeg --toolchain=hardened --extra-cflags= --extra-cxxflags= --libdir=/usr/lib/x86_64-linux-gnu --shlibdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --enable-shared --disable-stripping --enable-avresample --enable-avisynth --enable-fontconfig --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-opengl --enable-x11grab --enable-libxvid --enable-libx265 --enable-libdc1394 --enable-libiec61883 --enable-libzvbi --enable-libzmq --enable-frei0r --enable-libx264 --enable-libsoxr --enable-openal --enable-libopencv\r\n  libavutil      54.  7.100 / 54.  7.100\r\n  libavcodec     56.  1.100 / 56.  1.100\r\n  libavformat    56.  4.101 / 56.  4.101\r\n  libavdevice    56.  0.100 / 56.  0.100\r\n  libavfilter     5.  1.100 /  5.  1.100\r\n  libavresample   2.  1.  0 /  2.  1.  0\r\n  libswscale      3.  0.100 /  3.  0.100\r\n  libswresample   1.  1.100 /  1.  1.100\r\n  libpostproc    53.  0.100 / 53.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/xucl/app/data/bilibili/video/DongFangLieChe.mp4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    encoder         : Lavf57.71.100\r\n    description     : Packed by Bilibili XCoder v1.0(fixed_gap:False)\r\n  Duration: 00:10:24.45, start: 0.000000, bitrate: 480 kb/s\r\n    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 640x360 [SAR 1:1 DAR 16:9], 408 kb/s, 20 fps, 20 tbr, 16k tbn, 40 tbc (default)\r\n    Metadata:\r\n      handler_name    : VideoHandler\r\n    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 65 kb/s (default)\r\n    Metadata:\r\n      handler_name    : SoundHandler\r\n[swscaler @ 0x1857c40] deprecated pixel format used, make sure you did set range correctly\r\nOutput #0, image2, to 'image-3%d.jpeg':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    description     : Packed by Bilibili XCoder v1.0(fixed_gap:False)\r\n    encoder         : Lavf56.4.101\r\n    Stream #0:0(und): Video: mjpeg, yuvj420p, 640x360 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 20 fps, 20 tbn, 20 tbc (default)\r\n    Metadata:\r\n      handler_name    : VideoHandler\r\n      encoder         : Lavc56.1.100 mjpeg\r\nStream mapping:\r\n  Stream #0:0 -> #0:0 (h264 (native) -> mjpeg (native))\r\nPress [q] to stop, [?] for help\r\nframe=12488 fps=227 q=24.8 Lsize=N/A time=00:10:24.40 bitrate=N/A\r\nvideo:133937kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\r\n`"}
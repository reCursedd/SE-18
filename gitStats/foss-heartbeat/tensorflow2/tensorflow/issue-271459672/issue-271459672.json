{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14289", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14289/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14289/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14289/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14289", "id": 271459672, "node_id": "MDU6SXNzdWUyNzE0NTk2NzI=", "number": 14289, "title": "Is something wrong about slim.learning.train?", "user": {"login": "gauss-clb", "id": 11674304, "node_id": "MDQ6VXNlcjExNjc0MzA0", "avatar_url": "https://avatars2.githubusercontent.com/u/11674304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gauss-clb", "html_url": "https://github.com/gauss-clb", "followers_url": "https://api.github.com/users/gauss-clb/followers", "following_url": "https://api.github.com/users/gauss-clb/following{/other_user}", "gists_url": "https://api.github.com/users/gauss-clb/gists{/gist_id}", "starred_url": "https://api.github.com/users/gauss-clb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gauss-clb/subscriptions", "organizations_url": "https://api.github.com/users/gauss-clb/orgs", "repos_url": "https://api.github.com/users/gauss-clb/repos", "events_url": "https://api.github.com/users/gauss-clb/events{/privacy}", "received_events_url": "https://api.github.com/users/gauss-clb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-06T12:31:39Z", "updated_at": "2017-11-06T19:15:27Z", "closed_at": "2017-11-06T19:14:28Z", "author_association": "NONE", "body_html": "<p><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/slim/python/slim/learning.py\">source code</a></p>\n<p>My code is so complex and very very long, so I just describe my code logic.</p>\n<p>I add two parameters <code>run_tensor</code> and <code>run_placeholder</code> to <code>slim.learning.train</code>, the <code>run_tensor</code> is the tensor I want to run and the <code>run_placeholder</code> is placeholder I need to feed. And I also add two parameters <code>run_tensor</code> and <code>run_placeholder</code> to <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/slim/python/slim/learning.py#L456\"><code>train_step</code></a>, and <code>train_step</code> is passed to <code>slim.learning.train</code>'s <code>train_step_fn</code>. So every training step, I can run <code>run_tensor</code> in the  <code>train_step</code>  function, and I'm sure I have fed the <code>run_placeholder</code>, but when I run the program, it raise an error, like:</p>\n<pre><code>Invalid argument: You must feed a value for placeholder tensor 'Placeholder' with dtype float and shape\n[...]\n</code></pre>\n<p><del>I debug for long time, and find it may be the <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/slim/python/slim/learning.py#L779\">line</a></del></p>\n<p><del>I have updated tensorflow to 1.4.0, but I  find my <code>slim.learning.train</code> only use <code>sv.stop(threads, close_summary_writer=True)</code>, without <code>ignore_live_threads=ignore_live_threads</code>.</del></p>\n<p>I find what's wrong, it is <code>tf.summary.scalar</code>, slim doesn't run <code>summary</code> op with feed_dict.<br>\nMaybe I think slim need to support feed_dict on every training step.</p>", "body_text": "source code\nMy code is so complex and very very long, so I just describe my code logic.\nI add two parameters run_tensor and run_placeholder to slim.learning.train, the run_tensor is the tensor I want to run and the run_placeholder is placeholder I need to feed. And I also add two parameters run_tensor and run_placeholder to train_step, and train_step is passed to slim.learning.train's train_step_fn. So every training step, I can run run_tensor in the  train_step  function, and I'm sure I have fed the run_placeholder, but when I run the program, it raise an error, like:\nInvalid argument: You must feed a value for placeholder tensor 'Placeholder' with dtype float and shape\n[...]\n\nI debug for long time, and find it may be the line\nI have updated tensorflow to 1.4.0, but I  find my slim.learning.train only use sv.stop(threads, close_summary_writer=True), without ignore_live_threads=ignore_live_threads.\nI find what's wrong, it is tf.summary.scalar, slim doesn't run summary op with feed_dict.\nMaybe I think slim need to support feed_dict on every training step.", "body": "[source code](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/slim/python/slim/learning.py)\r\n\r\nMy code is so complex and very very long, so I just describe my code logic.\r\n\r\nI add two parameters `run_tensor` and `run_placeholder` to `slim.learning.train`, the `run_tensor` is the tensor I want to run and the `run_placeholder` is placeholder I need to feed. And I also add two parameters `run_tensor` and `run_placeholder` to [`train_step`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/slim/python/slim/learning.py#L456), and `train_step` is passed to `slim.learning.train`'s `train_step_fn`. So every training step, I can run `run_tensor` in the  `train_step`  function, and I'm sure I have fed the `run_placeholder`, but when I run the program, it raise an error, like:\r\n\r\n```\r\nInvalid argument: You must feed a value for placeholder tensor 'Placeholder' with dtype float and shape\r\n[...]\r\n``` \r\n\r\n~~I debug for long time, and find it may be the [line](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/slim/python/slim/learning.py#L779)~~ \r\n\r\n~~I have updated tensorflow to 1.4.0, but I  find my `slim.learning.train` only use `sv.stop(threads, close_summary_writer=True)`, without `ignore_live_threads=ignore_live_threads`.~~\r\n\r\nI find what's wrong, it is `tf.summary.scalar`, slim doesn't run `summary` op with feed_dict.\r\nMaybe I think slim need to support feed_dict on every training step.\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/260841560", "html_url": "https://github.com/tensorflow/tensorflow/issues/5628#issuecomment-260841560", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5628", "id": 260841560, "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDg0MTU2MA==", "user": {"login": "petteriTeikari", "id": 1060514, "node_id": "MDQ6VXNlcjEwNjA1MTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1060514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petteriTeikari", "html_url": "https://github.com/petteriTeikari", "followers_url": "https://api.github.com/users/petteriTeikari/followers", "following_url": "https://api.github.com/users/petteriTeikari/following{/other_user}", "gists_url": "https://api.github.com/users/petteriTeikari/gists{/gist_id}", "starred_url": "https://api.github.com/users/petteriTeikari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petteriTeikari/subscriptions", "organizations_url": "https://api.github.com/users/petteriTeikari/orgs", "repos_url": "https://api.github.com/users/petteriTeikari/repos", "events_url": "https://api.github.com/users/petteriTeikari/events{/privacy}", "received_events_url": "https://api.github.com/users/petteriTeikari/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-16T03:10:49Z", "updated_at": "2016-11-16T03:29:32Z", "author_association": "NONE", "body_html": "<p>I added that line to to slim.learning.train in <a href=\"https://github.com/tensorflow/models/blob/master/slim/train_image_classifier.py\">train_image_classifier.py</a></p>\n<pre><code>saver=tf.train.Saver(write_version=1)\n</code></pre>\n<p>And got the <code>inspect_checkpoint</code> working, however now I got the following error with <code>freeze_graph</code>:</p>\n<div class=\"highlight highlight-source-python\"><pre>Traceback (most recent call last):\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">135</span>, <span class=\"pl-k\">in</span> <span class=\"pl-k\">&lt;</span>module<span class=\"pl-k\">&gt;</span>\n    tf.app.run()\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">43</span>, <span class=\"pl-k\">in</span> run\n    sys.exit(main(sys.argv[:<span class=\"pl-c1\">1</span>] <span class=\"pl-k\">+</span> flags_passthrough))\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">132</span>, <span class=\"pl-k\">in</span> main\n    <span class=\"pl-c1\">FLAGS</span>.output_graph, <span class=\"pl-c1\">FLAGS</span>.clear_devices, <span class=\"pl-c1\">FLAGS</span>.initializer_nodes)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">104</span>, <span class=\"pl-k\">in</span> freeze_graph\n    _ <span class=\"pl-k\">=</span> tf.import_graph_def(input_graph_def, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>)\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/framework/importer.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">258</span>, <span class=\"pl-k\">in</span> import_graph_def\n    op_def <span class=\"pl-k\">=</span> op_dict[node.op]\n<span class=\"pl-c1\">KeyError</span>: <span class=\"pl-s\"><span class=\"pl-k\">u</span><span class=\"pl-pds\">'</span>DenseToDenseSetOperation<span class=\"pl-pds\">'</span></span></pre></div>\n<p>The inference now works okay with the demo inference code luckily, but could be eventually nice to combine the <code>.pbtxt</code> and the <code>.ckpt</code> into one protobuf graph file.</p>", "body_text": "I added that line to to slim.learning.train in train_image_classifier.py\nsaver=tf.train.Saver(write_version=1)\n\nAnd got the inspect_checkpoint working, however now I got the following error with freeze_graph:\nTraceback (most recent call last):\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <module>\n    tf.app.run()\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 104, in freeze_graph\n    _ = tf.import_graph_def(input_graph_def, name=\"\")\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 258, in import_graph_def\n    op_def = op_dict[node.op]\nKeyError: u'DenseToDenseSetOperation'\nThe inference now works okay with the demo inference code luckily, but could be eventually nice to combine the .pbtxt and the .ckpt into one protobuf graph file.", "body": "I added that line to to slim.learning.train in [train_image_classifier.py](https://github.com/tensorflow/models/blob/master/slim/train_image_classifier.py)\n\n```\nsaver=tf.train.Saver(write_version=1)\n```\n\nAnd got the `inspect_checkpoint` working, however now I got the following error with `freeze_graph`:\n\n``` Python\nTraceback (most recent call last):\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 135, in <module>\n    tf.app.run()\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 43, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 132, in main\n    FLAGS.output_graph, FLAGS.clear_devices, FLAGS.initializer_nodes)\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/tools/freeze_graph.py\", line 104, in freeze_graph\n    _ = tf.import_graph_def(input_graph_def, name=\"\")\n  File \"/home/petteri/tensorflow/bazel-bin/tensorflow/python/tools/freeze_graph.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 258, in import_graph_def\n    op_def = op_dict[node.op]\nKeyError: u'DenseToDenseSetOperation'\n```\n\nThe inference now works okay with the demo inference code luckily, but could be eventually nice to combine the `.pbtxt` and the `.ckpt` into one protobuf graph file.\n"}
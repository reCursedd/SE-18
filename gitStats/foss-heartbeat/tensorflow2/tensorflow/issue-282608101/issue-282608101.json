{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15414", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15414/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15414/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15414/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15414", "id": 282608101, "node_id": "MDU6SXNzdWUyODI2MDgxMDE=", "number": 15414, "title": "Failed to convert a .pb file to a .lite file where there is a custom lite op sin", "user": {"login": "cambwang", "id": 20608852, "node_id": "MDQ6VXNlcjIwNjA4ODUy", "avatar_url": "https://avatars1.githubusercontent.com/u/20608852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cambwang", "html_url": "https://github.com/cambwang", "followers_url": "https://api.github.com/users/cambwang/followers", "following_url": "https://api.github.com/users/cambwang/following{/other_user}", "gists_url": "https://api.github.com/users/cambwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/cambwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cambwang/subscriptions", "organizations_url": "https://api.github.com/users/cambwang/orgs", "repos_url": "https://api.github.com/users/cambwang/repos", "events_url": "https://api.github.com/users/cambwang/events{/privacy}", "received_events_url": "https://api.github.com/users/cambwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-12-16T08:04:56Z", "updated_at": "2018-07-20T02:41:20Z", "closed_at": "2018-01-05T06:28:58Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 14.04.5 LTS</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:binary</li>\n<li><strong>TensorFlow version (use command below)</strong>:1.4.0</li>\n<li><strong>Python version</strong>: 2.7.6</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.8.0</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>: N/A</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I followed \"<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/g3doc/custom_operators.md\">How to use custom operators</a>\" to create a .pb file and \"sin.cc\" in //tensorflow/contrib/lite/kernel/. Then I added \"TfLiteRegistration* Register_SIN();\" and \"AddCustom(\"Sin\", Register_SIN());\" in \"register.cc\"<br>\nBut when I used the bazel command to covert the pb file, the sin op can not be converted</p>\n<p>Here is the command I used:<br>\nbazel build //tensorflow/contrib/lite/toco:toco<br>\nbazel-bin/tensorflow/contrib/lite/toco/toco --input_file=tftest/sin.pb --input_format=TENSORFLOW_GRAPHDEF --output_file=tftest/sin.tflite --output_format=TFLITE --inference_type=FLOAT --input_array=input --input_shape=1 --output_array=output<br>\nHere is the corresponding ERROE information:<br>\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: Sin.</p>\n<p>I tried to use ----allow_custom_ops, but it did not work. Here is the ERROR information:<br>\nConverting unsupported operation: Sin</p>\n<p>I think I have to modify more files, but I do not know which files I should modify and how to modify. Could you please give a detailed demo?<br>\nThx</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 14.04.5 LTS\nTensorFlow installed from (source or binary):binary\nTensorFlow version (use command below):1.4.0\nPython version: 2.7.6\nBazel version (if compiling from source): 0.8.0\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce: N/A\n\nDescribe the problem\nI followed \"How to use custom operators\" to create a .pb file and \"sin.cc\" in //tensorflow/contrib/lite/kernel/. Then I added \"TfLiteRegistration* Register_SIN();\" and \"AddCustom(\"Sin\", Register_SIN());\" in \"register.cc\"\nBut when I used the bazel command to covert the pb file, the sin op can not be converted\nHere is the command I used:\nbazel build //tensorflow/contrib/lite/toco:toco\nbazel-bin/tensorflow/contrib/lite/toco/toco --input_file=tftest/sin.pb --input_format=TENSORFLOW_GRAPHDEF --output_file=tftest/sin.tflite --output_format=TFLITE --inference_type=FLOAT --input_array=input --input_shape=1 --output_array=output\nHere is the corresponding ERROE information:\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: Sin.\nI tried to use ----allow_custom_ops, but it did not work. Here is the ERROR information:\nConverting unsupported operation: Sin\nI think I have to modify more files, but I do not know which files I should modify and how to modify. Could you please give a detailed demo?\nThx", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 14.04.5 LTS \r\n- **TensorFlow installed from (source or binary)**:binary\r\n- **TensorFlow version (use command below)**:1.4.0\r\n- **Python version**: 2.7.6\r\n- **Bazel version (if compiling from source)**: 0.8.0\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n\r\n### Describe the problem\r\n\r\nI followed \"[How to use custom operators](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/g3doc/custom_operators.md)\" to create a .pb file and \"sin.cc\" in //tensorflow/contrib/lite/kernel/. Then I added \"TfLiteRegistration* Register_SIN();\" and \"AddCustom(\"Sin\", Register_SIN());\" in \"register.cc\"\r\nBut when I used the bazel command to covert the pb file, the sin op can not be converted\r\n\r\nHere is the command I used:\r\nbazel build //tensorflow/contrib/lite/toco:toco\r\nbazel-bin/tensorflow/contrib/lite/toco/toco --input_file=tftest/sin.pb --input_format=TENSORFLOW_GRAPHDEF --output_file=tftest/sin.tflite --output_format=TFLITE --inference_type=FLOAT --input_array=input --input_shape=1 --output_array=output\r\nHere is the corresponding ERROE information:\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: Sin.\r\n\r\nI tried to use ----allow_custom_ops, but it did not work. Here is the ERROR information:\r\nConverting unsupported operation: Sin\r\n\r\nI think I have to modify more files, but I do not know which files I should modify and how to modify. Could you please give a detailed demo?\r\nThx"}
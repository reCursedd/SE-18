{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11688", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11688/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11688/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11688/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11688", "id": 244905464, "node_id": "MDU6SXNzdWUyNDQ5MDU0NjQ=", "number": 11688, "title": "Tensorflow v1.2.1 compile error", "user": {"login": "flener", "id": 761188, "node_id": "MDQ6VXNlcjc2MTE4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/761188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flener", "html_url": "https://github.com/flener", "followers_url": "https://api.github.com/users/flener/followers", "following_url": "https://api.github.com/users/flener/following{/other_user}", "gists_url": "https://api.github.com/users/flener/gists{/gist_id}", "starred_url": "https://api.github.com/users/flener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flener/subscriptions", "organizations_url": "https://api.github.com/users/flener/orgs", "repos_url": "https://api.github.com/users/flener/repos", "events_url": "https://api.github.com/users/flener/events{/privacy}", "received_events_url": "https://api.github.com/users/flener/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-07-23T11:52:10Z", "updated_at": "2018-10-26T21:29:40Z", "closed_at": "2018-10-26T21:29:40Z", "author_association": "NONE", "body_html": "<p>I'm, trying to build tensorflow from source. I've followed the tutorial in <a href=\"https://www.tensorflow.org/install/install_sources\" rel=\"nofollow\">https://www.tensorflow.org/install/install_sources</a> without success.</p>\n<p>The only difference is that I'm trying to use OpenCL with SYCL.</p>\n<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution</strong>: Ubuntu 14.04 64 bits</li>\n<li><strong>TensorFlow version to be compiled</strong>: v1.2.1</li>\n<li><strong>Python version</strong>: 2.7.6</li>\n<li><strong>Bazel version (from repository)</strong>: Build label: 0.5.2</li>\n<li><strong>GPU model and memory</strong>: Radeon HD 7850</li>\n</ul>\n<h3>Problem</h3>\n<p>I'm trying to compile tensorflow v1.2.1 but I'm having an error about numpy missing dependecies declaration.<br>\nIt seems there is some workaround because headers are there, but I have no clue about how to do it. My bazel knowledge is low.</p>\n<p><strong>Configuration:</strong></p>\n<pre><code>flener@flener-desktop:~/Downloads/tensorflow-src$ uname -a\nLinux flener-desktop 3.11.0-14-generic #21-Ubuntu SMP Tue Nov 12 17:04:55 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\nflener@flener-desktop:~/Downloads/tensorflow-src$ git checkout v1.2.1\nHEAD is now at b4957ff... Merge pull request #11156 from av8ramit/1.2.1\nflener@flener-desktop:~/Downloads/tensorflow-src$ git clean -fdx\nRemoving .bazelrc\nRemoving .tf_configure.bazelrc\nRemoving bazel-bin\nRemoving bazel-genfiles\nRemoving bazel-out\nRemoving bazel-tensorflow-src\nRemoving bazel-testlogs\nRemoving tensorflow/tools/git/gen/\nRemoving third_party/eigen3/mkl_include\nRemoving third_party/mkl/include\nRemoving third_party/mkl/libdl.so.2\nRemoving third_party/mkl/libiomp5.so\nRemoving third_party/mkl/libmklml_intel.so\nRemoving third_party/mkl/mkl.config\nRemoving third_party/mkl/mklml_lnx_2018.0.20170425.tgz\nRemoving third_party/mkl/mklml_lnx_2018.0.20170425/\nRemoving tools/python_bin_path.sh\nflener@flener-desktop:~/Downloads/tensorflow-src$ ./configure\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python2.7\nFound possible Python library paths:\n  /usr/local/lib/python2.7/dist-packages\n  /usr/lib/python2.7/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]\n\t\nDo you wish to build TensorFlow with MKL support? [y/N] y\nMKL support will be enabled for TensorFlow\nDo you wish to download MKL LIB from the web? [Y/n] y\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \nDo you wish to use jemalloc as the malloc implementation? [Y/n] y\njemalloc enabled\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] n\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] n\nNo Hadoop File System support will be enabled for TensorFlow\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] n\nNo XLA JIT support will be enabled for TensorFlow\nDo you wish to build TensorFlow with VERBS support? [y/N] y\nVERBS support will be enabled for TensorFlow\nDo you wish to build TensorFlow with OpenCL support? [y/N] y\nOpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] n\nNo CUDA support will be enabled for TensorFlow\nPlease specify which C++ compiler should be used as the host C++ compiler. [Default is ]: /usr/bin/g++-4.9\nPlease specify which C compiler should be used as the host C compiler. [Default is ]: /usr/bin/gcc-4.9\nPlease specify the location where ComputeCpp for SYCL 1.2 is installed. [Default is /usr/local/computecpp]: \nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\nConfiguration finished\n\n</code></pre>\n<p><strong>Build command:</strong><br>\n<code>flener@flener-desktop:~/Downloads/tensorflow-src$ bazel build --local_resources 4096,4.0,1.0 --verbose_failures -c opt --config=sycl //tensorflow/tools/pip_package:build_pip_package</code></p>\n<p><strong>Error:</strong></p>\n<pre><code>ERROR: /home/flener/Downloads/tensorflow-src/tensorflow/python/BUILD:158:1: undeclared inclusion(s) in rule '//tensorflow/python:numpy_lib':\nthis rule is missing dependency declarations for the following files included by 'tensorflow/python/lib/core/numpy.cc':\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/arrayobject.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/ndarrayobject.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/ndarraytypes.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_common.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/numpyconfig.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/_numpyconfig.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_endian.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_cpu.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/utils.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/_neighborhood_iterator_imp.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/__multiarray_api.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_interrupt.h'.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\n</code></pre>", "body_text": "I'm, trying to build tensorflow from source. I've followed the tutorial in https://www.tensorflow.org/install/install_sources without success.\nThe only difference is that I'm trying to use OpenCL with SYCL.\nSystem information\n\nOS Platform and Distribution: Ubuntu 14.04 64 bits\nTensorFlow version to be compiled: v1.2.1\nPython version: 2.7.6\nBazel version (from repository): Build label: 0.5.2\nGPU model and memory: Radeon HD 7850\n\nProblem\nI'm trying to compile tensorflow v1.2.1 but I'm having an error about numpy missing dependecies declaration.\nIt seems there is some workaround because headers are there, but I have no clue about how to do it. My bazel knowledge is low.\nConfiguration:\nflener@flener-desktop:~/Downloads/tensorflow-src$ uname -a\nLinux flener-desktop 3.11.0-14-generic #21-Ubuntu SMP Tue Nov 12 17:04:55 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\nflener@flener-desktop:~/Downloads/tensorflow-src$ git checkout v1.2.1\nHEAD is now at b4957ff... Merge pull request #11156 from av8ramit/1.2.1\nflener@flener-desktop:~/Downloads/tensorflow-src$ git clean -fdx\nRemoving .bazelrc\nRemoving .tf_configure.bazelrc\nRemoving bazel-bin\nRemoving bazel-genfiles\nRemoving bazel-out\nRemoving bazel-tensorflow-src\nRemoving bazel-testlogs\nRemoving tensorflow/tools/git/gen/\nRemoving third_party/eigen3/mkl_include\nRemoving third_party/mkl/include\nRemoving third_party/mkl/libdl.so.2\nRemoving third_party/mkl/libiomp5.so\nRemoving third_party/mkl/libmklml_intel.so\nRemoving third_party/mkl/mkl.config\nRemoving third_party/mkl/mklml_lnx_2018.0.20170425.tgz\nRemoving third_party/mkl/mklml_lnx_2018.0.20170425/\nRemoving tools/python_bin_path.sh\nflener@flener-desktop:~/Downloads/tensorflow-src$ ./configure\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python2.7\nFound possible Python library paths:\n  /usr/local/lib/python2.7/dist-packages\n  /usr/lib/python2.7/dist-packages\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]\n\t\nDo you wish to build TensorFlow with MKL support? [y/N] y\nMKL support will be enabled for TensorFlow\nDo you wish to download MKL LIB from the web? [Y/n] y\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \nDo you wish to use jemalloc as the malloc implementation? [Y/n] y\njemalloc enabled\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] n\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] n\nNo Hadoop File System support will be enabled for TensorFlow\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] n\nNo XLA JIT support will be enabled for TensorFlow\nDo you wish to build TensorFlow with VERBS support? [y/N] y\nVERBS support will be enabled for TensorFlow\nDo you wish to build TensorFlow with OpenCL support? [y/N] y\nOpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] n\nNo CUDA support will be enabled for TensorFlow\nPlease specify which C++ compiler should be used as the host C++ compiler. [Default is ]: /usr/bin/g++-4.9\nPlease specify which C compiler should be used as the host C compiler. [Default is ]: /usr/bin/gcc-4.9\nPlease specify the location where ComputeCpp for SYCL 1.2 is installed. [Default is /usr/local/computecpp]: \nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\nConfiguration finished\n\n\nBuild command:\nflener@flener-desktop:~/Downloads/tensorflow-src$ bazel build --local_resources 4096,4.0,1.0 --verbose_failures -c opt --config=sycl //tensorflow/tools/pip_package:build_pip_package\nError:\nERROR: /home/flener/Downloads/tensorflow-src/tensorflow/python/BUILD:158:1: undeclared inclusion(s) in rule '//tensorflow/python:numpy_lib':\nthis rule is missing dependency declarations for the following files included by 'tensorflow/python/lib/core/numpy.cc':\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/arrayobject.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/ndarrayobject.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/ndarraytypes.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_common.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/numpyconfig.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/_numpyconfig.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_endian.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_cpu.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/utils.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/_neighborhood_iterator_imp.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/__multiarray_api.h'\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_interrupt.h'.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build", "body": "I'm, trying to build tensorflow from source. I've followed the tutorial in https://www.tensorflow.org/install/install_sources without success.\r\n\r\nThe only difference is that I'm trying to use OpenCL with SYCL.\r\n\r\n### System information\r\n- **OS Platform and Distribution**: Ubuntu 14.04 64 bits\r\n- **TensorFlow version to be compiled**: v1.2.1\r\n- **Python version**: 2.7.6\r\n- **Bazel version (from repository)**: Build label: 0.5.2\r\n- **GPU model and memory**: Radeon HD 7850\r\n\r\n### Problem\r\nI'm trying to compile tensorflow v1.2.1 but I'm having an error about numpy missing dependecies declaration.\r\nIt seems there is some workaround because headers are there, but I have no clue about how to do it. My bazel knowledge is low.\r\n\r\n**Configuration:**\r\n\r\n```\r\nflener@flener-desktop:~/Downloads/tensorflow-src$ uname -a\r\nLinux flener-desktop 3.11.0-14-generic #21-Ubuntu SMP Tue Nov 12 17:04:55 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\r\nflener@flener-desktop:~/Downloads/tensorflow-src$ git checkout v1.2.1\r\nHEAD is now at b4957ff... Merge pull request #11156 from av8ramit/1.2.1\r\nflener@flener-desktop:~/Downloads/tensorflow-src$ git clean -fdx\r\nRemoving .bazelrc\r\nRemoving .tf_configure.bazelrc\r\nRemoving bazel-bin\r\nRemoving bazel-genfiles\r\nRemoving bazel-out\r\nRemoving bazel-tensorflow-src\r\nRemoving bazel-testlogs\r\nRemoving tensorflow/tools/git/gen/\r\nRemoving third_party/eigen3/mkl_include\r\nRemoving third_party/mkl/include\r\nRemoving third_party/mkl/libdl.so.2\r\nRemoving third_party/mkl/libiomp5.so\r\nRemoving third_party/mkl/libmklml_intel.so\r\nRemoving third_party/mkl/mkl.config\r\nRemoving third_party/mkl/mklml_lnx_2018.0.20170425.tgz\r\nRemoving third_party/mkl/mklml_lnx_2018.0.20170425/\r\nRemoving tools/python_bin_path.sh\r\nflener@flener-desktop:~/Downloads/tensorflow-src$ ./configure\r\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python2.7\r\nFound possible Python library paths:\r\n  /usr/local/lib/python2.7/dist-packages\r\n  /usr/lib/python2.7/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python2.7/dist-packages]\r\n\t\r\nDo you wish to build TensorFlow with MKL support? [y/N] y\r\nMKL support will be enabled for TensorFlow\r\nDo you wish to download MKL LIB from the web? [Y/n] y\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\nDo you wish to use jemalloc as the malloc implementation? [Y/n] y\r\njemalloc enabled\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] n\r\nNo Google Cloud Platform support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] n\r\nNo Hadoop File System support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] n\r\nNo XLA JIT support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with VERBS support? [y/N] y\r\nVERBS support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with OpenCL support? [y/N] y\r\nOpenCL support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with CUDA support? [y/N] n\r\nNo CUDA support will be enabled for TensorFlow\r\nPlease specify which C++ compiler should be used as the host C++ compiler. [Default is ]: /usr/bin/g++-4.9\r\nPlease specify which C compiler should be used as the host C compiler. [Default is ]: /usr/bin/gcc-4.9\r\nPlease specify the location where ComputeCpp for SYCL 1.2 is installed. [Default is /usr/local/computecpp]: \r\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\r\nConfiguration finished\r\n\r\n```\r\n\r\n**Build command:**\r\n`flener@flener-desktop:~/Downloads/tensorflow-src$ bazel build --local_resources 4096,4.0,1.0 --verbose_failures -c opt --config=sycl //tensorflow/tools/pip_package:build_pip_package`\r\n\r\n**Error:**\r\n```\r\nERROR: /home/flener/Downloads/tensorflow-src/tensorflow/python/BUILD:158:1: undeclared inclusion(s) in rule '//tensorflow/python:numpy_lib':\r\nthis rule is missing dependency declarations for the following files included by 'tensorflow/python/lib/core/numpy.cc':\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/arrayobject.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/ndarrayobject.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/ndarraytypes.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_common.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/numpyconfig.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/_numpyconfig.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_endian.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_cpu.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/utils.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/_neighborhood_iterator_imp.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/__multiarray_api.h'\r\n  '/usr/local/lib/python2.7/dist-packages/numpy/core/include/numpy/npy_interrupt.h'.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n```\r\n\r\n"}
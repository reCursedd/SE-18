{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/397295037", "html_url": "https://github.com/tensorflow/tensorflow/issues/136#issuecomment-397295037", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/136", "id": 397295037, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzI5NTAzNw==", "user": {"login": "aleksandrskrivickis", "id": 31312663, "node_id": "MDQ6VXNlcjMxMzEyNjYz", "avatar_url": "https://avatars2.githubusercontent.com/u/31312663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aleksandrskrivickis", "html_url": "https://github.com/aleksandrskrivickis", "followers_url": "https://api.github.com/users/aleksandrskrivickis/followers", "following_url": "https://api.github.com/users/aleksandrskrivickis/following{/other_user}", "gists_url": "https://api.github.com/users/aleksandrskrivickis/gists{/gist_id}", "starred_url": "https://api.github.com/users/aleksandrskrivickis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aleksandrskrivickis/subscriptions", "organizations_url": "https://api.github.com/users/aleksandrskrivickis/orgs", "repos_url": "https://api.github.com/users/aleksandrskrivickis/repos", "events_url": "https://api.github.com/users/aleksandrskrivickis/events{/privacy}", "received_events_url": "https://api.github.com/users/aleksandrskrivickis/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-14T13:25:46Z", "updated_at": "2018-06-14T13:27:47Z", "author_association": "NONE", "body_html": "<p>I have had a similar problem just now.<br>\nBatch of images had to be analysed and I, by mistake, created a function, that was loading a model into the memory for every image to be recognised.</p>\n<pre><code>def predict(num_class, weights_path, img_path):    \n\tbase_model = VGG16.VGG16(include_top=False, weights=None)\n\tx = base_model.output\n\tx = Dense(128)(x)\n\tx = GlobalAveragePooling2D()(x)\n\tpredictions = Dense(num_class, activation='softmax')(x)\n\n\tmodel = Model(inputs=base_model.input, outputs=predictions)\n\tmodel.load_weights(weights_path)\n\t....\n\t....\n</code></pre>\n<p>Hopefully, it will help someone!</p>", "body_text": "I have had a similar problem just now.\nBatch of images had to be analysed and I, by mistake, created a function, that was loading a model into the memory for every image to be recognised.\ndef predict(num_class, weights_path, img_path):    \n\tbase_model = VGG16.VGG16(include_top=False, weights=None)\n\tx = base_model.output\n\tx = Dense(128)(x)\n\tx = GlobalAveragePooling2D()(x)\n\tpredictions = Dense(num_class, activation='softmax')(x)\n\n\tmodel = Model(inputs=base_model.input, outputs=predictions)\n\tmodel.load_weights(weights_path)\n\t....\n\t....\n\nHopefully, it will help someone!", "body": "I have had a similar problem just now.\r\nBatch of images had to be analysed and I, by mistake, created a function, that was loading a model into the memory for every image to be recognised.\r\n\r\n\r\n```\r\ndef predict(num_class, weights_path, img_path):    \r\n\tbase_model = VGG16.VGG16(include_top=False, weights=None)\r\n\tx = base_model.output\r\n\tx = Dense(128)(x)\r\n\tx = GlobalAveragePooling2D()(x)\r\n\tpredictions = Dense(num_class, activation='softmax')(x)\r\n\r\n\tmodel = Model(inputs=base_model.input, outputs=predictions)\r\n\tmodel.load_weights(weights_path)\r\n\t....\r\n\t....\r\n```\r\n\r\n\r\nHopefully, it will help someone!"}
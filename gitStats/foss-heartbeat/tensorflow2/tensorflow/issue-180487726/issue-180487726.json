{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4715", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4715/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4715/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4715/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4715", "id": 180487726, "node_id": "MDU6SXNzdWUxODA0ODc3MjY=", "number": 4715, "title": "shapes incompatible after upgrade", "user": {"login": "jharting", "id": 167352, "node_id": "MDQ6VXNlcjE2NzM1Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/167352?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jharting", "html_url": "https://github.com/jharting", "followers_url": "https://api.github.com/users/jharting/followers", "following_url": "https://api.github.com/users/jharting/following{/other_user}", "gists_url": "https://api.github.com/users/jharting/gists{/gist_id}", "starred_url": "https://api.github.com/users/jharting/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jharting/subscriptions", "organizations_url": "https://api.github.com/users/jharting/orgs", "repos_url": "https://api.github.com/users/jharting/repos", "events_url": "https://api.github.com/users/jharting/events{/privacy}", "received_events_url": "https://api.github.com/users/jharting/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2016-10-02T00:25:19Z", "updated_at": "2016-10-27T17:20:28Z", "closed_at": "2016-10-26T16:24:50Z", "author_association": "NONE", "body_html": "<p>After upgrade from 0.10.0 to 0.11.0rc0 my code no longer runs:</p>\n<pre><code>(802, 277)\n(802, 1)\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nTraceback (most recent call last):\n  File \"brain.py\", line 47, in &lt;module&gt;\n    classifier.fit(x=trainX, y=trainY, steps=2000)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn.py\", line 435, in fit\n    max_steps=max_steps)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 333, in fit\n    max_steps=max_steps)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 662, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 963, in _get_train_ops\n    _, loss, train_op = self._call_model_fn(features, targets, ModeKeys.TRAIN)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 944, in _call_model_fn\n    return self._model_fn(features, targets, mode=mode, params=self.params)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn.py\", line 258, in _dnn_classifier_model_fn\n    weight=_get_weight_tensor(features, weight_column_name))\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/losses/python/losses/loss_ops.py\", line 329, in sigmoid_cross_entropy\n    logits.get_shape().assert_is_compatible_with(multi_class_labels.get_shape())\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 750, in assert_is_compatible_with\n    raise ValueError(\"Shapes %s and %s are incompatible\" % (self, other))\nValueError: Shapes (?, 1) and (?,) are incompatible\n</code></pre>\n<p>My code:</p>\n<pre><code>...\nprint shape(trainX) # (802, 277)\nprint shape(trainY) # (802, 1)\nclassifier.fit(x=trainX, y=trainY, steps=2000)\n...\n</code></pre>\n<p>This worked fine on 0.10.0. Notice the shapes in the beginning of output (looks like a valid combination to me).</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>none</p>\n<h3>Environment info</h3>\n<p>Operating System: Fedora 23, TF 0.11.0rc0</p>", "body_text": "After upgrade from 0.10.0 to 0.11.0rc0 my code no longer runs:\n(802, 277)\n(802, 1)\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nTraceback (most recent call last):\n  File \"brain.py\", line 47, in <module>\n    classifier.fit(x=trainX, y=trainY, steps=2000)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn.py\", line 435, in fit\n    max_steps=max_steps)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 333, in fit\n    max_steps=max_steps)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 662, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 963, in _get_train_ops\n    _, loss, train_op = self._call_model_fn(features, targets, ModeKeys.TRAIN)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 944, in _call_model_fn\n    return self._model_fn(features, targets, mode=mode, params=self.params)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn.py\", line 258, in _dnn_classifier_model_fn\n    weight=_get_weight_tensor(features, weight_column_name))\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/losses/python/losses/loss_ops.py\", line 329, in sigmoid_cross_entropy\n    logits.get_shape().assert_is_compatible_with(multi_class_labels.get_shape())\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 750, in assert_is_compatible_with\n    raise ValueError(\"Shapes %s and %s are incompatible\" % (self, other))\nValueError: Shapes (?, 1) and (?,) are incompatible\n\nMy code:\n...\nprint shape(trainX) # (802, 277)\nprint shape(trainY) # (802, 1)\nclassifier.fit(x=trainX, y=trainY, steps=2000)\n...\n\nThis worked fine on 0.10.0. Notice the shapes in the beginning of output (looks like a valid combination to me).\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nnone\nEnvironment info\nOperating System: Fedora 23, TF 0.11.0rc0", "body": "After upgrade from 0.10.0 to 0.11.0rc0 my code no longer runs:\n\n```\n(802, 277)\n(802, 1)\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nWARNING:tensorflow:float64 is not supported by many models, consider casting to float32.\nTraceback (most recent call last):\n  File \"brain.py\", line 47, in <module>\n    classifier.fit(x=trainX, y=trainY, steps=2000)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn.py\", line 435, in fit\n    max_steps=max_steps)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 333, in fit\n    max_steps=max_steps)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 662, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 963, in _get_train_ops\n    _, loss, train_op = self._call_model_fn(features, targets, ModeKeys.TRAIN)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 944, in _call_model_fn\n    return self._model_fn(features, targets, mode=mode, params=self.params)\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/learn/python/learn/estimators/dnn.py\", line 258, in _dnn_classifier_model_fn\n    weight=_get_weight_tensor(features, weight_column_name))\n  File \"/usr/lib/python2.7/site-packages/tensorflow/contrib/losses/python/losses/loss_ops.py\", line 329, in sigmoid_cross_entropy\n    logits.get_shape().assert_is_compatible_with(multi_class_labels.get_shape())\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/framework/tensor_shape.py\", line 750, in assert_is_compatible_with\n    raise ValueError(\"Shapes %s and %s are incompatible\" % (self, other))\nValueError: Shapes (?, 1) and (?,) are incompatible\n```\n\nMy code:\n\n```\n...\nprint shape(trainX) # (802, 277)\nprint shape(trainY) # (802, 1)\nclassifier.fit(x=trainX, y=trainY, steps=2000)\n...\n```\n\nThis worked fine on 0.10.0. Notice the shapes in the beginning of output (looks like a valid combination to me).\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nnone\n### Environment info\n\nOperating System: Fedora 23, TF 0.11.0rc0\n"}
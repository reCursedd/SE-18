{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/355454687", "html_url": "https://github.com/tensorflow/tensorflow/pull/14341#issuecomment-355454687", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14341", "id": 355454687, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTQ1NDY4Nw==", "user": {"login": "tedhtchang", "id": 7155778, "node_id": "MDQ6VXNlcjcxNTU3Nzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7155778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tedhtchang", "html_url": "https://github.com/tedhtchang", "followers_url": "https://api.github.com/users/tedhtchang/followers", "following_url": "https://api.github.com/users/tedhtchang/following{/other_user}", "gists_url": "https://api.github.com/users/tedhtchang/gists{/gist_id}", "starred_url": "https://api.github.com/users/tedhtchang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tedhtchang/subscriptions", "organizations_url": "https://api.github.com/users/tedhtchang/orgs", "repos_url": "https://api.github.com/users/tedhtchang/repos", "events_url": "https://api.github.com/users/tedhtchang/events{/privacy}", "received_events_url": "https://api.github.com/users/tedhtchang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-05T02:13:32Z", "updated_at": "2018-01-05T02:13:32Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=20959853\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/drpngx\">@drpngx</a> The problem is freez_graph_test.py does not pass <a href=\"https://github.com/tensorflow/tensorflow/blob/f99275a6a309699c73e1bbebd89ba9aa32e79aa3/tensorflow/python/tools/freeze_graph_test.py#L151\">saver_pb2.SaverDef.V1</a> into freez_graph.py. And in freez_graph.py, it does not explicitly initialize the Saver() to use <a href=\"https://github.com/tensorflow/tensorflow/blob/2ebfeda9bad9d1f867205fa8de3db564953ebc23/tensorflow/python/tools/freeze_graph.py#L103\">write_version=saver_pb2.SaverDef.V1</a> but still be able to restore a V1 checkpoint file.<br>\nWhich solution do you prefer?</p>\n<ol>\n<li>Drop the testFreezeGraphV1 test since V1 will be deprecated.</li>\n<li>Introduce additional argument (write_version=saver_pb2.SaverDef.V2) to the freez_test.py</li>\n<li>Drop this PR ;however people will not get the useful message when passing any V2 checkpoint file to the restore function.</li>\n</ol>", "body_text": "@drpngx The problem is freez_graph_test.py does not pass saver_pb2.SaverDef.V1 into freez_graph.py. And in freez_graph.py, it does not explicitly initialize the Saver() to use write_version=saver_pb2.SaverDef.V1 but still be able to restore a V1 checkpoint file.\nWhich solution do you prefer?\n\nDrop the testFreezeGraphV1 test since V1 will be deprecated.\nIntroduce additional argument (write_version=saver_pb2.SaverDef.V2) to the freez_test.py\nDrop this PR ;however people will not get the useful message when passing any V2 checkpoint file to the restore function.", "body": "@drpngx The problem is freez_graph_test.py does not pass [saver_pb2.SaverDef.V1](https://github.com/tensorflow/tensorflow/blob/f99275a6a309699c73e1bbebd89ba9aa32e79aa3/tensorflow/python/tools/freeze_graph_test.py#L151) into freez_graph.py. And in freez_graph.py, it does not explicitly initialize the Saver() to use [write_version=saver_pb2.SaverDef.V1](https://github.com/tensorflow/tensorflow/blob/2ebfeda9bad9d1f867205fa8de3db564953ebc23/tensorflow/python/tools/freeze_graph.py#L103) but still be able to restore a V1 checkpoint file.\r\nWhich solution do you prefer?\r\n1. Drop the testFreezeGraphV1 test since V1 will be deprecated.\r\n2. Introduce additional argument (write_version=saver_pb2.SaverDef.V2) to the freez_test.py\r\n3. Drop this PR ;however people will not get the useful message when passing any V2 checkpoint file to the restore function."}
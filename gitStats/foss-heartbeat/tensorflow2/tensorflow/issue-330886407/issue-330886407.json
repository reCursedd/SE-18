{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19876", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19876/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19876/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19876/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19876", "id": 330886407, "node_id": "MDU6SXNzdWUzMzA4ODY0MDc=", "number": 19876, "title": "tf.feature_column.indicator_column lack of hash_bucket conflict resolver", "user": {"login": "xielm12", "id": 14227379, "node_id": "MDQ6VXNlcjE0MjI3Mzc5", "avatar_url": "https://avatars3.githubusercontent.com/u/14227379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xielm12", "html_url": "https://github.com/xielm12", "followers_url": "https://api.github.com/users/xielm12/followers", "following_url": "https://api.github.com/users/xielm12/following{/other_user}", "gists_url": "https://api.github.com/users/xielm12/gists{/gist_id}", "starred_url": "https://api.github.com/users/xielm12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xielm12/subscriptions", "organizations_url": "https://api.github.com/users/xielm12/orgs", "repos_url": "https://api.github.com/users/xielm12/repos", "events_url": "https://api.github.com/users/xielm12/events{/privacy}", "received_events_url": "https://api.github.com/users/xielm12/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-06-09T13:18:14Z", "updated_at": "2018-07-03T02:06:37Z", "closed_at": "2018-07-03T02:06:37Z", "author_association": "NONE", "body_html": "<p>Here is my code:</p>\n<pre><code>\nimport tensorflow as tf\n\nfeatures = {'color': [['R','A'], ['A','G'], ['A','G'], ['G','B'],['B','R']],\n            'weight': [[1.0,2.0], [0.1,4.0], [5.0,1.0], [8.0,7.0],[3.0,2.0]]}\n\ncolor_feature = tf.feature_column.categorical_column_with_hash_bucket(\n                key = \"color\",\n                hash_bucket_size = 10,\n                dtype=tf.string)\n\ncolumn = tf.feature_column.weighted_categorical_column(color_feature, 'weight',dtype = tf.float32)\n\nindicator = tf.feature_column.indicator_column(column)\ntensor = tf.feature_column.input_layer(features, [indicator])\n\nwith tf.Session() as session:\n    session.run(tf.global_variables_initializer())\n    session.run(tf.tables_initializer())\n    print(session.run([tensor]))\n\n</code></pre>\n<p>then, got the error as follow:</p>\n<pre><code>D:\\ProgramData\\Anaconda3\\python.exe E:/wnd_test/test.py\nD:\\ProgramData\\Anaconda3\\lib\\site-packages\\h5py\\__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\n2018-06-09 20:54:36.683625: I T:\\src\\github\\tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\n2018-06-09 20:54:36.699225: W T:\\src\\github\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:1318] OP_REQUIRES failed at sparse_to_dense_op.cc:126 : Invalid argument: indices[9] = [4,8] is repeated\n2018-06-09 20:54:36.699225: W T:\\src\\github\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:1318] OP_REQUIRES failed at sparse_to_dense_op.cc:126 : Invalid argument: indices[9] = [4,8] is repeated\nTraceback (most recent call last):\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1322, in _do_call\n    return fn(*args)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1307, in _run_fn\n    options, feed_dict, fetch_list, target_list, run_metadata)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1409, in _call_tf_sessionrun\n    run_metadata)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[9] = [4,8] is repeated\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"E:/wnd_test/test.py\", line 55, in &lt;module&gt;\n    print(session.run([tensor]))\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 900, in run\n    run_metadata_ptr)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1135, in _run\n    feed_dict_tensor, options, run_metadata)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1316, in _do_run\n    run_metadata)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1335, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[9] = [4,8] is repeated\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\n\nCaused by op 'input_layer/color_weighted_by_weight_indicator/SparseToDense', defined at:\n  File \"E:/wnd_test/test.py\", line 50, in &lt;module&gt;\n    tensor = tf.feature_column.input_layer(features, [indicator])\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 277, in input_layer\n    trainable, cols_to_vars)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 202, in _internal_input_layer\n    trainable=trainable)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 3302, in _get_dense_tensor\n    return inputs.get(self)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 2100, in get\n    transformed = column._transform_feature(self)  # pylint: disable=protected-access\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 3244, in _transform_feature\n    return sparse_ops.sparse_tensor_to_dense(weighted_column)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\sparse_ops.py\", line 1011, in sparse_tensor_to_dense\n    name=name)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\sparse_ops.py\", line 791, in sparse_to_dense\n    name=name)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_sparse_ops.py\", line 3268, in sparse_to_dense\n    name=name)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper\n    op_def=op_def)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3392, in create_op\n    op_def=op_def)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1718, in __init__\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\n\nInvalidArgumentError (see above for traceback): indices[9] = [4,8] is repeated\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\n\n\nProcess finished with exit code 1\n\n</code></pre>\n<p>The <code>InvalidArgumentError</code> is caused by the fact that feature \"B\" and feature  \"R\" are hashed into the same hash_bucket.<br>\nIt'll be great if a <code>combiner</code> argument (as in <code>tf.feature_column.embedding_column</code>) can be implemented in the <code>tf.feature_column.indicator_column</code> funciton.</p>", "body_text": "Here is my code:\n\nimport tensorflow as tf\n\nfeatures = {'color': [['R','A'], ['A','G'], ['A','G'], ['G','B'],['B','R']],\n            'weight': [[1.0,2.0], [0.1,4.0], [5.0,1.0], [8.0,7.0],[3.0,2.0]]}\n\ncolor_feature = tf.feature_column.categorical_column_with_hash_bucket(\n                key = \"color\",\n                hash_bucket_size = 10,\n                dtype=tf.string)\n\ncolumn = tf.feature_column.weighted_categorical_column(color_feature, 'weight',dtype = tf.float32)\n\nindicator = tf.feature_column.indicator_column(column)\ntensor = tf.feature_column.input_layer(features, [indicator])\n\nwith tf.Session() as session:\n    session.run(tf.global_variables_initializer())\n    session.run(tf.tables_initializer())\n    print(session.run([tensor]))\n\n\nthen, got the error as follow:\nD:\\ProgramData\\Anaconda3\\python.exe E:/wnd_test/test.py\nD:\\ProgramData\\Anaconda3\\lib\\site-packages\\h5py\\__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n  from ._conv import register_converters as _register_converters\n2018-06-09 20:54:36.683625: I T:\\src\\github\\tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\n2018-06-09 20:54:36.699225: W T:\\src\\github\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:1318] OP_REQUIRES failed at sparse_to_dense_op.cc:126 : Invalid argument: indices[9] = [4,8] is repeated\n2018-06-09 20:54:36.699225: W T:\\src\\github\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:1318] OP_REQUIRES failed at sparse_to_dense_op.cc:126 : Invalid argument: indices[9] = [4,8] is repeated\nTraceback (most recent call last):\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1322, in _do_call\n    return fn(*args)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1307, in _run_fn\n    options, feed_dict, fetch_list, target_list, run_metadata)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1409, in _call_tf_sessionrun\n    run_metadata)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[9] = [4,8] is repeated\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"E:/wnd_test/test.py\", line 55, in <module>\n    print(session.run([tensor]))\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 900, in run\n    run_metadata_ptr)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1135, in _run\n    feed_dict_tensor, options, run_metadata)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1316, in _do_run\n    run_metadata)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1335, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[9] = [4,8] is repeated\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\n\nCaused by op 'input_layer/color_weighted_by_weight_indicator/SparseToDense', defined at:\n  File \"E:/wnd_test/test.py\", line 50, in <module>\n    tensor = tf.feature_column.input_layer(features, [indicator])\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 277, in input_layer\n    trainable, cols_to_vars)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 202, in _internal_input_layer\n    trainable=trainable)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 3302, in _get_dense_tensor\n    return inputs.get(self)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 2100, in get\n    transformed = column._transform_feature(self)  # pylint: disable=protected-access\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 3244, in _transform_feature\n    return sparse_ops.sparse_tensor_to_dense(weighted_column)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\sparse_ops.py\", line 1011, in sparse_tensor_to_dense\n    name=name)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\sparse_ops.py\", line 791, in sparse_to_dense\n    name=name)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_sparse_ops.py\", line 3268, in sparse_to_dense\n    name=name)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper\n    op_def=op_def)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3392, in create_op\n    op_def=op_def)\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1718, in __init__\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\n\nInvalidArgumentError (see above for traceback): indices[9] = [4,8] is repeated\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\n\n\nProcess finished with exit code 1\n\n\nThe InvalidArgumentError is caused by the fact that feature \"B\" and feature  \"R\" are hashed into the same hash_bucket.\nIt'll be great if a combiner argument (as in tf.feature_column.embedding_column) can be implemented in the tf.feature_column.indicator_column funciton.", "body": "Here is my code:\r\n\r\n```\r\n\r\nimport tensorflow as tf\r\n\r\nfeatures = {'color': [['R','A'], ['A','G'], ['A','G'], ['G','B'],['B','R']],\r\n            'weight': [[1.0,2.0], [0.1,4.0], [5.0,1.0], [8.0,7.0],[3.0,2.0]]}\r\n\r\ncolor_feature = tf.feature_column.categorical_column_with_hash_bucket(\r\n                key = \"color\",\r\n                hash_bucket_size = 10,\r\n                dtype=tf.string)\r\n\r\ncolumn = tf.feature_column.weighted_categorical_column(color_feature, 'weight',dtype = tf.float32)\r\n\r\nindicator = tf.feature_column.indicator_column(column)\r\ntensor = tf.feature_column.input_layer(features, [indicator])\r\n\r\nwith tf.Session() as session:\r\n    session.run(tf.global_variables_initializer())\r\n    session.run(tf.tables_initializer())\r\n    print(session.run([tensor]))\r\n\r\n```\r\n\r\nthen, got the error as follow:\r\n\r\n\r\n\r\n```\r\nD:\\ProgramData\\Anaconda3\\python.exe E:/wnd_test/test.py\r\nD:\\ProgramData\\Anaconda3\\lib\\site-packages\\h5py\\__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n2018-06-09 20:54:36.683625: I T:\\src\\github\\tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\n2018-06-09 20:54:36.699225: W T:\\src\\github\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:1318] OP_REQUIRES failed at sparse_to_dense_op.cc:126 : Invalid argument: indices[9] = [4,8] is repeated\r\n2018-06-09 20:54:36.699225: W T:\\src\\github\\tensorflow\\tensorflow\\core\\framework\\op_kernel.cc:1318] OP_REQUIRES failed at sparse_to_dense_op.cc:126 : Invalid argument: indices[9] = [4,8] is repeated\r\nTraceback (most recent call last):\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1322, in _do_call\r\n    return fn(*args)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1307, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1409, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[9] = [4,8] is repeated\r\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"E:/wnd_test/test.py\", line 55, in <module>\r\n    print(session.run([tensor]))\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 900, in run\r\n    run_metadata_ptr)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1135, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1316, in _do_run\r\n    run_metadata)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1335, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[9] = [4,8] is repeated\r\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\r\n\r\nCaused by op 'input_layer/color_weighted_by_weight_indicator/SparseToDense', defined at:\r\n  File \"E:/wnd_test/test.py\", line 50, in <module>\r\n    tensor = tf.feature_column.input_layer(features, [indicator])\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 277, in input_layer\r\n    trainable, cols_to_vars)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 202, in _internal_input_layer\r\n    trainable=trainable)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 3302, in _get_dense_tensor\r\n    return inputs.get(self)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 2100, in get\r\n    transformed = column._transform_feature(self)  # pylint: disable=protected-access\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\feature_column\\feature_column.py\", line 3244, in _transform_feature\r\n    return sparse_ops.sparse_tensor_to_dense(weighted_column)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\sparse_ops.py\", line 1011, in sparse_tensor_to_dense\r\n    name=name)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\sparse_ops.py\", line 791, in sparse_to_dense\r\n    name=name)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_sparse_ops.py\", line 3268, in sparse_to_dense\r\n    name=name)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3392, in create_op\r\n    op_def=op_def)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1718, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nInvalidArgumentError (see above for traceback): indices[9] = [4,8] is repeated\r\n\t [[Node: input_layer/color_weighted_by_weight_indicator/SparseToDense = SparseToDense[T=DT_FLOAT, Tindices=DT_INT64, validate_indices=true, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](input_layer/color_weighted_by_weight_indicator/SparseSlice, input_layer/color_weighted_by_weight_indicator/SparseSlice:2, input_layer/color_weighted_by_weight_indicator/SparseSlice:1, input_layer/color_weighted_by_weight_indicator/SparseToDense/default_value)]]\r\n\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n\r\n\r\n\r\nThe ```InvalidArgumentError``` is caused by the fact that feature \"B\" and feature  \"R\" are hashed into the same hash_bucket.  \r\nIt'll be great if a ```combiner``` argument (as in ```tf.feature_column.embedding_column```) can be implemented in the ```tf.feature_column.indicator_column``` funciton."}
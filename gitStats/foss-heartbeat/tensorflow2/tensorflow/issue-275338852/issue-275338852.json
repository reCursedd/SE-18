{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14720", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14720/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14720/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14720/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14720", "id": 275338852, "node_id": "MDU6SXNzdWUyNzUzMzg4NTI=", "number": 14720, "title": "ImageUtils.convertYUV420SPToARGB8888 resulting distorted image", "user": {"login": "lavinachitara", "id": 2331214, "node_id": "MDQ6VXNlcjIzMzEyMTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/2331214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lavinachitara", "html_url": "https://github.com/lavinachitara", "followers_url": "https://api.github.com/users/lavinachitara/followers", "following_url": "https://api.github.com/users/lavinachitara/following{/other_user}", "gists_url": "https://api.github.com/users/lavinachitara/gists{/gist_id}", "starred_url": "https://api.github.com/users/lavinachitara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lavinachitara/subscriptions", "organizations_url": "https://api.github.com/users/lavinachitara/orgs", "repos_url": "https://api.github.com/users/lavinachitara/repos", "events_url": "https://api.github.com/users/lavinachitara/events{/privacy}", "received_events_url": "https://api.github.com/users/lavinachitara/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-20T12:28:02Z", "updated_at": "2017-11-22T04:19:55Z", "closed_at": "2017-11-22T04:19:55Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3376817\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/andrewharp\">@andrewharp</a></p>\n<p>I did some modification in TF detect android app to detect person from loaded picture rather than clicking it by camera(Not using cameraActivity).</p>\n<p>Everything is working fine except the function named ImageUtils.convertYUV420SPToARGB8888. This function returns distorted image (please find attachment)</p>\n<p>actual image:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/2331214/33017067-f6c5dd42-ce16-11e7-9cb0-7827cf490c8b.png\"><img src=\"https://user-images.githubusercontent.com/2331214/33017067-f6c5dd42-ce16-11e7-9cb0-7827cf490c8b.png\" alt=\"actual_image\" style=\"max-width:100%;\"></a></p>\n<p>After converting image from YUV 4:2:0 to ARGB:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/2331214/33017069-f6f60e2c-ce16-11e7-9772-89d0a7d22612.png\"><img src=\"https://user-images.githubusercontent.com/2331214/33017069-f6f60e2c-ce16-11e7-9772-89d0a7d22612.png\" alt=\"converted_image\" style=\"max-width:100%;\"></a></p>\n<p>Sharing part of code below:</p>\n<pre><code>        newbitmap = Bitmap.createScaledBitmap(bitmap, 640, 480, false);\n        ByteArrayOutputStream output = new ByteArrayOutputStream();\n        newbitmap.compress(Bitmap.CompressFormat.JPEG, 100, output);\n        imgbytes = output.toByteArray();\n\n        imageConverter =\n            new Runnable() {\n                @Override\n                public void run() {\n                    ImageUtils.convertYUV420SPToARGB8888(imgbytes, previewWidth, previewHeight, rgbBytes);\n                }\n            };\n</code></pre>", "body_text": "Hi @andrewharp\nI did some modification in TF detect android app to detect person from loaded picture rather than clicking it by camera(Not using cameraActivity).\nEverything is working fine except the function named ImageUtils.convertYUV420SPToARGB8888. This function returns distorted image (please find attachment)\nactual image:\n\nAfter converting image from YUV 4:2:0 to ARGB:\n\nSharing part of code below:\n        newbitmap = Bitmap.createScaledBitmap(bitmap, 640, 480, false);\n        ByteArrayOutputStream output = new ByteArrayOutputStream();\n        newbitmap.compress(Bitmap.CompressFormat.JPEG, 100, output);\n        imgbytes = output.toByteArray();\n\n        imageConverter =\n            new Runnable() {\n                @Override\n                public void run() {\n                    ImageUtils.convertYUV420SPToARGB8888(imgbytes, previewWidth, previewHeight, rgbBytes);\n                }\n            };", "body": "\r\n\r\n\r\nHi @andrewharp \r\n\r\nI did some modification in TF detect android app to detect person from loaded picture rather than clicking it by camera(Not using cameraActivity).\r\n\r\nEverything is working fine except the function named ImageUtils.convertYUV420SPToARGB8888. This function returns distorted image (please find attachment)\r\n\r\nactual image:\r\n![actual_image](https://user-images.githubusercontent.com/2331214/33017067-f6c5dd42-ce16-11e7-9cb0-7827cf490c8b.png)\r\n\r\nAfter converting image from YUV 4:2:0 to ARGB:\r\n![converted_image](https://user-images.githubusercontent.com/2331214/33017069-f6f60e2c-ce16-11e7-9772-89d0a7d22612.png)\r\n\r\nSharing part of code below:\r\n\r\n            newbitmap = Bitmap.createScaledBitmap(bitmap, 640, 480, false);\r\n            ByteArrayOutputStream output = new ByteArrayOutputStream();\r\n            newbitmap.compress(Bitmap.CompressFormat.JPEG, 100, output);\r\n            imgbytes = output.toByteArray();\r\n\r\n            imageConverter =\r\n                new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        ImageUtils.convertYUV420SPToARGB8888(imgbytes, previewWidth, previewHeight, rgbBytes);\r\n                    }\r\n                };"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/279635490", "html_url": "https://github.com/tensorflow/tensorflow/issues/4640#issuecomment-279635490", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4640", "id": 279635490, "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTYzNTQ5MA==", "user": {"login": "nukuok", "id": 4132637, "node_id": "MDQ6VXNlcjQxMzI2Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/4132637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nukuok", "html_url": "https://github.com/nukuok", "followers_url": "https://api.github.com/users/nukuok/followers", "following_url": "https://api.github.com/users/nukuok/following{/other_user}", "gists_url": "https://api.github.com/users/nukuok/gists{/gist_id}", "starred_url": "https://api.github.com/users/nukuok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nukuok/subscriptions", "organizations_url": "https://api.github.com/users/nukuok/orgs", "repos_url": "https://api.github.com/users/nukuok/repos", "events_url": "https://api.github.com/users/nukuok/events{/privacy}", "received_events_url": "https://api.github.com/users/nukuok/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-14T08:10:25Z", "updated_at": "2017-02-21T10:06:27Z", "author_association": "NONE", "body_html": "<p>I modified the camera sample to let it run on photos and succeeded to build library in x86_64 on Sierra by following workaround. Also confirmed the library works in iPhone simulator.<br>\n(By checking config.log, I found that \"--enable-cross-compile\" option is likely to become outdated on Sierra. To enable cross-compile, specify \"--build\" and \"--host\" with different value worked.)</p>\n<div class=\"highlight highlight-source-shell\"><pre>\u279c  makefile git:(r0.10) \u2717 ln -s /usr/bin/llvm-gcc /usr/local/bin/x86_64-apple-darwin15.0.0-gcc\n\n\u279c  makefile git:(r0.10) \u2717 diff -u compile_ios_protobuf.sh compile_ios_protobuf.sh_bkp\ndiff -u compile_ios_protobuf.sh_bkp compile_ios_protobuf.sh\n--- compile_ios_protobuf.sh_bkp\t2017-02-14 10:57:47.000000000 +0900\n+++ compile_ios_protobuf.sh\t2017-02-14 15:39:18.000000000 +0900\n@@ -38,7 +38,9 @@\n LIBDIR=<span class=\"pl-smi\">${GENDIR}</span>lib\n mkdir -p <span class=\"pl-smi\">${LIBDIR}</span>\n \n-OSX_VERSION=darwin14.0.0\n+<span class=\"pl-c\"><span class=\"pl-c\">#</span> OSX_VERSION=darwin14.0.0</span>\n+OSX_VERSION=darwin15.0.0\n+OSX_VERSION2=darwin16.4.0\n \n IPHONEOS_PLATFORM=<span class=\"pl-s\"><span class=\"pl-pds\">`</span>xcrun --sdk iphoneos --show-sdk-platform-path<span class=\"pl-pds\">`</span></span>\n IPHONEOS_SYSROOT=<span class=\"pl-s\"><span class=\"pl-pds\">`</span>xcrun --sdk iphoneos --show-sdk-path<span class=\"pl-pds\">`</span></span>\n@@ -100,7 +102,7 @@\n make distclean\n ./configure \\\n --build=x86_64-apple-<span class=\"pl-smi\">${OSX_VERSION}</span> \\\n---host=x86_64-apple-<span class=\"pl-smi\">${OSX_VERSION}</span> \\\n+--host=x86_64-apple-<span class=\"pl-smi\">${OSX_VERSION2}</span> \\\n --disable-shared \\\n --enable-cross-compile \\\n --with-protoc=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-smi\">${PROTOC_PATH}</span><span class=\"pl-pds\">\"</span></span> \\</pre></div>\n<p>Although actually doesn't affect the build process, version values are picked from<br>\n\"15.0.0\" =&gt; \"brew info gcc; ls /usr/local/Cellar/gcc/*/bin\"<br>\n\"16.4.0\" =&gt; \"uname -r\"</p>", "body_text": "I modified the camera sample to let it run on photos and succeeded to build library in x86_64 on Sierra by following workaround. Also confirmed the library works in iPhone simulator.\n(By checking config.log, I found that \"--enable-cross-compile\" option is likely to become outdated on Sierra. To enable cross-compile, specify \"--build\" and \"--host\" with different value worked.)\n\u279c  makefile git:(r0.10) \u2717 ln -s /usr/bin/llvm-gcc /usr/local/bin/x86_64-apple-darwin15.0.0-gcc\n\n\u279c  makefile git:(r0.10) \u2717 diff -u compile_ios_protobuf.sh compile_ios_protobuf.sh_bkp\ndiff -u compile_ios_protobuf.sh_bkp compile_ios_protobuf.sh\n--- compile_ios_protobuf.sh_bkp\t2017-02-14 10:57:47.000000000 +0900\n+++ compile_ios_protobuf.sh\t2017-02-14 15:39:18.000000000 +0900\n@@ -38,7 +38,9 @@\n LIBDIR=${GENDIR}lib\n mkdir -p ${LIBDIR}\n \n-OSX_VERSION=darwin14.0.0\n+# OSX_VERSION=darwin14.0.0\n+OSX_VERSION=darwin15.0.0\n+OSX_VERSION2=darwin16.4.0\n \n IPHONEOS_PLATFORM=`xcrun --sdk iphoneos --show-sdk-platform-path`\n IPHONEOS_SYSROOT=`xcrun --sdk iphoneos --show-sdk-path`\n@@ -100,7 +102,7 @@\n make distclean\n ./configure \\\n --build=x86_64-apple-${OSX_VERSION} \\\n---host=x86_64-apple-${OSX_VERSION} \\\n+--host=x86_64-apple-${OSX_VERSION2} \\\n --disable-shared \\\n --enable-cross-compile \\\n --with-protoc=\"${PROTOC_PATH}\" \\\nAlthough actually doesn't affect the build process, version values are picked from\n\"15.0.0\" => \"brew info gcc; ls /usr/local/Cellar/gcc/*/bin\"\n\"16.4.0\" => \"uname -r\"", "body": "I modified the camera sample to let it run on photos and succeeded to build library in x86_64 on Sierra by following workaround. Also confirmed the library works in iPhone simulator.\r\n(By checking config.log, I found that \"--enable-cross-compile\" option is likely to become outdated on Sierra. To enable cross-compile, specify \"--build\" and \"--host\" with different value worked.)\r\n\r\n```sh\r\n\u279c  makefile git:(r0.10) \u2717 ln -s /usr/bin/llvm-gcc /usr/local/bin/x86_64-apple-darwin15.0.0-gcc\r\n\r\n\u279c  makefile git:(r0.10) \u2717 diff -u compile_ios_protobuf.sh compile_ios_protobuf.sh_bkp\r\ndiff -u compile_ios_protobuf.sh_bkp compile_ios_protobuf.sh\r\n--- compile_ios_protobuf.sh_bkp\t2017-02-14 10:57:47.000000000 +0900\r\n+++ compile_ios_protobuf.sh\t2017-02-14 15:39:18.000000000 +0900\r\n@@ -38,7 +38,9 @@\r\n LIBDIR=${GENDIR}lib\r\n mkdir -p ${LIBDIR}\r\n \r\n-OSX_VERSION=darwin14.0.0\r\n+# OSX_VERSION=darwin14.0.0\r\n+OSX_VERSION=darwin15.0.0\r\n+OSX_VERSION2=darwin16.4.0\r\n \r\n IPHONEOS_PLATFORM=`xcrun --sdk iphoneos --show-sdk-platform-path`\r\n IPHONEOS_SYSROOT=`xcrun --sdk iphoneos --show-sdk-path`\r\n@@ -100,7 +102,7 @@\r\n make distclean\r\n ./configure \\\r\n --build=x86_64-apple-${OSX_VERSION} \\\r\n---host=x86_64-apple-${OSX_VERSION} \\\r\n+--host=x86_64-apple-${OSX_VERSION2} \\\r\n --disable-shared \\\r\n --enable-cross-compile \\\r\n --with-protoc=\"${PROTOC_PATH}\" \\\r\n```\r\n\r\nAlthough actually doesn't affect the build process, version values are picked from\r\n\"15.0.0\" => \"brew info gcc; ls /usr/local/Cellar/gcc/*/bin\"\r\n\"16.4.0\" => \"uname -r\""}
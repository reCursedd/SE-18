{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/310808122", "html_url": "https://github.com/tensorflow/tensorflow/issues/10982#issuecomment-310808122", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10982", "id": 310808122, "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDgwODEyMg==", "user": {"login": "zhangdingfei", "id": 20080419, "node_id": "MDQ6VXNlcjIwMDgwNDE5", "avatar_url": "https://avatars0.githubusercontent.com/u/20080419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangdingfei", "html_url": "https://github.com/zhangdingfei", "followers_url": "https://api.github.com/users/zhangdingfei/followers", "following_url": "https://api.github.com/users/zhangdingfei/following{/other_user}", "gists_url": "https://api.github.com/users/zhangdingfei/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangdingfei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangdingfei/subscriptions", "organizations_url": "https://api.github.com/users/zhangdingfei/orgs", "repos_url": "https://api.github.com/users/zhangdingfei/repos", "events_url": "https://api.github.com/users/zhangdingfei/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangdingfei/received_events", "type": "User", "site_admin": false}, "created_at": "2017-06-24T02:34:13Z", "updated_at": "2017-06-24T02:34:13Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: no</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: SUSE Linux Enterprise Server 11 SP3  (x86_64)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: tensorflow-1.1.0</li>\n<li><strong>Bazel version (if compiling from source)</strong>: bazel release 0.5.0- (@non-git)</li>\n<li><strong>CUDA/cuDNN version</strong>: CUDA 7.5/cuDNN 5.1</li>\n<li><strong>GPU model and memory</strong>: Tesla K40m</li>\n<li><strong>Exact command to reproduce</strong>: python3 mnist_softmax_xla.py</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>when run python3 mnist_softmax_xla.py, I met a assertion failure.</p>\n<p>my build command is :<br>\nbazel build --c dbg --config=cuda //tensorflow/tools/pip_package:build_pip_package</p>\n<h3>Source code / logs</h3>\n<p>linux-swfm:~/workarea&gt; python3 mnist_softmax_xla.py<br>\nExtracting /tmp/tensorflow/mnist/input_data/train-images-idx3-ubyte.gz<br>\nExtracting /tmp/tensorflow/mnist/input_data/train-labels-idx1-ubyte.gz<br>\nExtracting /tmp/tensorflow/mnist/input_data/t10k-images-idx3-ubyte.gz<br>\nExtracting /tmp/tensorflow/mnist/input_data/t10k-labels-idx1-ubyte.gz<br>\n2017-06-24 10:28:06.834688: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-06-24 10:28:06.834747: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-06-24 10:28:06.834762: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-06-24 10:28:06.834787: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-06-24 10:28:06.834809: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-06-24 10:28:07.156861: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 0 with properties:<br>\nname: Tesla K40m<br>\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.745<br>\npciBusID 0000:04:00.0<br>\nTotal memory: 11.25GiB<br>\nFree memory: 11.15GiB<br>\n2017-06-24 10:28:07.157144: W tensorflow/stream_executor/cuda/cuda_driver.cc:485] creating context when one is currently active; existing: 0x7ff0ac098f10<br>\n2017-06-24 10:28:07.460466: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 1 with properties:<br>\nname: Tesla K40m<br>\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.745<br>\npciBusID 0000:83:00.0<br>\nTotal memory: 11.25GiB<br>\nFree memory: 11.15GiB<br>\n2017-06-24 10:28:07.460571: I tensorflow/core/common_runtime/gpu/gpu_device.cc:779] Peer access not supported between device ordinals 0 and 1<br>\n2017-06-24 10:28:07.460613: I tensorflow/core/common_runtime/gpu/gpu_device.cc:779] Peer access not supported between device ordinals 1 and 0<br>\n2017-06-24 10:28:07.460672: I tensorflow/core/common_runtime/gpu/gpu_device.cc:908] DMA: 0 1<br>\n2017-06-24 10:28:07.460692: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 0:   Y N<br>\n2017-06-24 10:28:07.460712: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 1:   N Y<br>\n2017-06-24 10:28:07.460751: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: Tesla K40m, pci bus id: 0000:04:00.0)<br>\n2017-06-24 10:28:07.460770: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:1) -&gt; (device: 1, name: Tesla K40m, pci bus id: 0000:83:00.0)<br>\n2017-06-24 10:28:07.838088: I tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 2 visible devices<br>\n2017-06-24 10:28:07.838941: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 72 visible devices<br>\n2017-06-24 10:28:07.852362: I tensorflow/compiler/xla/service/service.cc:183] XLA service 0x7ff0acde4930 executing computations on platform Host. Devices:<br>\n2017-06-24 10:28:07.852407: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (0): , <br>\n2017-06-24 10:28:07.852819: I tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 2 visible devices<br>\n2017-06-24 10:28:07.853650: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 72 visible devices<br>\n2017-06-24 10:28:07.866012: I tensorflow/compiler/xla/service/service.cc:183] XLA service 0x7ff0ad069f30 executing computations on platform CUDA. Devices:<br>\n2017-06-24 10:28:07.866043: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (0): Tesla K40m, Compute Capability 3.5<br>\n2017-06-24 10:28:07.866056: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (1): Tesla K40m, Compute Capability 3.5<br>\n2017-06-24 10:28:12.890410: F tensorflow/compiler/xla/service/algebraic_simplifier.cc:768] Check failed: user-&gt;operand(reshape_or_broadcast_operand_index) == reshape_or_broadcast (0x7ff0b4033ba0 vs. 0x7ff0b404d3e0)<br>\nAborted</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): SUSE Linux Enterprise Server 11 SP3  (x86_64)\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): tensorflow-1.1.0\nBazel version (if compiling from source): bazel release 0.5.0- (@non-git)\nCUDA/cuDNN version: CUDA 7.5/cuDNN 5.1\nGPU model and memory: Tesla K40m\nExact command to reproduce: python3 mnist_softmax_xla.py\n\nDescribe the problem\nwhen run python3 mnist_softmax_xla.py, I met a assertion failure.\nmy build command is :\nbazel build --c dbg --config=cuda //tensorflow/tools/pip_package:build_pip_package\nSource code / logs\nlinux-swfm:~/workarea> python3 mnist_softmax_xla.py\nExtracting /tmp/tensorflow/mnist/input_data/train-images-idx3-ubyte.gz\nExtracting /tmp/tensorflow/mnist/input_data/train-labels-idx1-ubyte.gz\nExtracting /tmp/tensorflow/mnist/input_data/t10k-images-idx3-ubyte.gz\nExtracting /tmp/tensorflow/mnist/input_data/t10k-labels-idx1-ubyte.gz\n2017-06-24 10:28:06.834688: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\n2017-06-24 10:28:06.834747: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-06-24 10:28:06.834762: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\n2017-06-24 10:28:06.834787: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-06-24 10:28:06.834809: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n2017-06-24 10:28:07.156861: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 0 with properties:\nname: Tesla K40m\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.745\npciBusID 0000:04:00.0\nTotal memory: 11.25GiB\nFree memory: 11.15GiB\n2017-06-24 10:28:07.157144: W tensorflow/stream_executor/cuda/cuda_driver.cc:485] creating context when one is currently active; existing: 0x7ff0ac098f10\n2017-06-24 10:28:07.460466: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 1 with properties:\nname: Tesla K40m\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.745\npciBusID 0000:83:00.0\nTotal memory: 11.25GiB\nFree memory: 11.15GiB\n2017-06-24 10:28:07.460571: I tensorflow/core/common_runtime/gpu/gpu_device.cc:779] Peer access not supported between device ordinals 0 and 1\n2017-06-24 10:28:07.460613: I tensorflow/core/common_runtime/gpu/gpu_device.cc:779] Peer access not supported between device ordinals 1 and 0\n2017-06-24 10:28:07.460672: I tensorflow/core/common_runtime/gpu/gpu_device.cc:908] DMA: 0 1\n2017-06-24 10:28:07.460692: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 0:   Y N\n2017-06-24 10:28:07.460712: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 1:   N Y\n2017-06-24 10:28:07.460751: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K40m, pci bus id: 0000:04:00.0)\n2017-06-24 10:28:07.460770: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla K40m, pci bus id: 0000:83:00.0)\n2017-06-24 10:28:07.838088: I tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 2 visible devices\n2017-06-24 10:28:07.838941: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 72 visible devices\n2017-06-24 10:28:07.852362: I tensorflow/compiler/xla/service/service.cc:183] XLA service 0x7ff0acde4930 executing computations on platform Host. Devices:\n2017-06-24 10:28:07.852407: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (0): , \n2017-06-24 10:28:07.852819: I tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 2 visible devices\n2017-06-24 10:28:07.853650: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 72 visible devices\n2017-06-24 10:28:07.866012: I tensorflow/compiler/xla/service/service.cc:183] XLA service 0x7ff0ad069f30 executing computations on platform CUDA. Devices:\n2017-06-24 10:28:07.866043: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (0): Tesla K40m, Compute Capability 3.5\n2017-06-24 10:28:07.866056: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (1): Tesla K40m, Compute Capability 3.5\n2017-06-24 10:28:12.890410: F tensorflow/compiler/xla/service/algebraic_simplifier.cc:768] Check failed: user->operand(reshape_or_broadcast_operand_index) == reshape_or_broadcast (0x7ff0b4033ba0 vs. 0x7ff0b404d3e0)\nAborted", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: SUSE Linux Enterprise Server 11 SP3  (x86_64)\r\n- **TensorFlow installed from (source or binary)**: source \r\n- **TensorFlow version (use command below)**: tensorflow-1.1.0\r\n- **Bazel version (if compiling from source)**: bazel release 0.5.0- (@non-git)\r\n- **CUDA/cuDNN version**: CUDA 7.5/cuDNN 5.1\r\n- **GPU model and memory**: Tesla K40m\r\n- **Exact command to reproduce**: python3 mnist_softmax_xla.py\r\n\r\n### Describe the problem\r\nwhen run python3 mnist_softmax_xla.py, I met a assertion failure.\r\n\r\nmy build command is :\r\nbazel build --c dbg --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\n\r\n### Source code / logs\r\n\r\nlinux-swfm:~/workarea> python3 mnist_softmax_xla.py\r\nExtracting /tmp/tensorflow/mnist/input_data/train-images-idx3-ubyte.gz\r\nExtracting /tmp/tensorflow/mnist/input_data/train-labels-idx1-ubyte.gz\r\nExtracting /tmp/tensorflow/mnist/input_data/t10k-images-idx3-ubyte.gz\r\nExtracting /tmp/tensorflow/mnist/input_data/t10k-labels-idx1-ubyte.gz\r\n2017-06-24 10:28:06.834688: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-06-24 10:28:06.834747: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-06-24 10:28:06.834762: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-06-24 10:28:06.834787: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-06-24 10:28:06.834809: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\n2017-06-24 10:28:07.156861: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 0 with properties: \r\nname: Tesla K40m\r\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.745\r\npciBusID 0000:04:00.0\r\nTotal memory: 11.25GiB\r\nFree memory: 11.15GiB\r\n2017-06-24 10:28:07.157144: W tensorflow/stream_executor/cuda/cuda_driver.cc:485] creating context when one is currently active; existing: 0x7ff0ac098f10\r\n2017-06-24 10:28:07.460466: I tensorflow/core/common_runtime/gpu/gpu_device.cc:887] Found device 1 with properties: \r\nname: Tesla K40m\r\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.745\r\npciBusID 0000:83:00.0\r\nTotal memory: 11.25GiB\r\nFree memory: 11.15GiB\r\n2017-06-24 10:28:07.460571: I tensorflow/core/common_runtime/gpu/gpu_device.cc:779] Peer access not supported between device ordinals 0 and 1\r\n2017-06-24 10:28:07.460613: I tensorflow/core/common_runtime/gpu/gpu_device.cc:779] Peer access not supported between device ordinals 1 and 0\r\n2017-06-24 10:28:07.460672: I tensorflow/core/common_runtime/gpu/gpu_device.cc:908] DMA: 0 1 \r\n2017-06-24 10:28:07.460692: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 0:   Y N \r\n2017-06-24 10:28:07.460712: I tensorflow/core/common_runtime/gpu/gpu_device.cc:918] 1:   N Y \r\n2017-06-24 10:28:07.460751: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K40m, pci bus id: 0000:04:00.0)\r\n2017-06-24 10:28:07.460770: I tensorflow/core/common_runtime/gpu/gpu_device.cc:977] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla K40m, pci bus id: 0000:83:00.0)\r\n2017-06-24 10:28:07.838088: I tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 2 visible devices\r\n2017-06-24 10:28:07.838941: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 72 visible devices\r\n2017-06-24 10:28:07.852362: I tensorflow/compiler/xla/service/service.cc:183] XLA service 0x7ff0acde4930 executing computations on platform Host. Devices:\r\n2017-06-24 10:28:07.852407: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (0): <undefined>, <undefined>\r\n2017-06-24 10:28:07.852819: I tensorflow/compiler/xla/service/platform_util.cc:58] platform CUDA present with 2 visible devices\r\n2017-06-24 10:28:07.853650: I tensorflow/compiler/xla/service/platform_util.cc:58] platform Host present with 72 visible devices\r\n2017-06-24 10:28:07.866012: I tensorflow/compiler/xla/service/service.cc:183] XLA service 0x7ff0ad069f30 executing computations on platform CUDA. Devices:\r\n2017-06-24 10:28:07.866043: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (0): Tesla K40m, Compute Capability 3.5\r\n2017-06-24 10:28:07.866056: I tensorflow/compiler/xla/service/service.cc:191]   StreamExecutor device (1): Tesla K40m, Compute Capability 3.5\r\n2017-06-24 10:28:12.890410: F tensorflow/compiler/xla/service/algebraic_simplifier.cc:768] Check failed: user->operand(reshape_or_broadcast_operand_index) == reshape_or_broadcast (0x7ff0b4033ba0 vs. 0x7ff0b404d3e0)\r\nAborted\r\n"}
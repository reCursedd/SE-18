{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5048", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5048/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5048/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5048/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5048", "id": 183789772, "node_id": "MDU6SXNzdWUxODM3ODk3NzI=", "number": 5048, "title": "Arbitrary sized inputs for FCNs are slow.", "user": {"login": "eldar", "id": 108657, "node_id": "MDQ6VXNlcjEwODY1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/108657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eldar", "html_url": "https://github.com/eldar", "followers_url": "https://api.github.com/users/eldar/followers", "following_url": "https://api.github.com/users/eldar/following{/other_user}", "gists_url": "https://api.github.com/users/eldar/gists{/gist_id}", "starred_url": "https://api.github.com/users/eldar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eldar/subscriptions", "organizations_url": "https://api.github.com/users/eldar/orgs", "repos_url": "https://api.github.com/users/eldar/repos", "events_url": "https://api.github.com/users/eldar/events{/privacy}", "received_events_url": "https://api.github.com/users/eldar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-10-18T20:09:14Z", "updated_at": "2017-08-07T02:23:12Z", "closed_at": "2016-10-19T09:05:40Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>OS and version: TF r0.11.0rc0, Linux 64bit, cudnn-7.5-v5.1</p>\n<p>I am using TF-Slim and a FCN-style architecture based on ResNets. I experience extremely slow training times: 5-10x slower compared to an equivalent Caffe implementation.</p>\n<p>I train fully-convolutionally, and my images are of arbitrary sizes and aspect ratios. The training code uses FIFOQueue and preloads data in a separate thread. I use batch_size=1 as all images are of different sizes.</p>\n<p>If I feed dummy random numpy tensors of fixed size, it works very fast. I tried to generate input tensors of 10 predefined sizes and fed them sequentially, the first 10 iterations were slow, but then it speeds back up. Looks like it does some extra work for each input size. I only used Caffe before, and there it was possible to resize all tensors per batch efficiently, somehow.</p>\n<p>Am I missing some simple trick or is it a bug?</p>", "body_text": "Hi,\nOS and version: TF r0.11.0rc0, Linux 64bit, cudnn-7.5-v5.1\nI am using TF-Slim and a FCN-style architecture based on ResNets. I experience extremely slow training times: 5-10x slower compared to an equivalent Caffe implementation.\nI train fully-convolutionally, and my images are of arbitrary sizes and aspect ratios. The training code uses FIFOQueue and preloads data in a separate thread. I use batch_size=1 as all images are of different sizes.\nIf I feed dummy random numpy tensors of fixed size, it works very fast. I tried to generate input tensors of 10 predefined sizes and fed them sequentially, the first 10 iterations were slow, but then it speeds back up. Looks like it does some extra work for each input size. I only used Caffe before, and there it was possible to resize all tensors per batch efficiently, somehow.\nAm I missing some simple trick or is it a bug?", "body": "Hi,\n\nOS and version: TF r0.11.0rc0, Linux 64bit, cudnn-7.5-v5.1\n\nI am using TF-Slim and a FCN-style architecture based on ResNets. I experience extremely slow training times: 5-10x slower compared to an equivalent Caffe implementation.\n\nI train fully-convolutionally, and my images are of arbitrary sizes and aspect ratios. The training code uses FIFOQueue and preloads data in a separate thread. I use batch_size=1 as all images are of different sizes.\n\nIf I feed dummy random numpy tensors of fixed size, it works very fast. I tried to generate input tensors of 10 predefined sizes and fed them sequentially, the first 10 iterations were slow, but then it speeds back up. Looks like it does some extra work for each input size. I only used Caffe before, and there it was possible to resize all tensors per batch efficiently, somehow.\n\nAm I missing some simple trick or is it a bug?\n"}
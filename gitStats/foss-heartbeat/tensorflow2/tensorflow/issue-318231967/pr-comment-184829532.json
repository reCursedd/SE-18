{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/184829532", "pull_request_review_id": 116110308, "id": 184829532, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDgyOTUzMg==", "diff_hunk": "@@ -260,10 +399,33 @@ tensorflow::Status SegmentGraph(\n               << segment_node_names.size() << \" nodes, dropping\";\n       continue;\n     }\n-\n-    segments->emplace_back(segment_node_names);\n+    const auto& dev_itr = device_maps.find(itr.first);\n+    if (dev_itr == device_maps.end() || dev_itr->second.size() == 0) {\n+      VLOG(1) << \"No device assigned to segment \" << segments->size();\n+      segments->emplace_back(std::make_pair(segment_node_names, string()));\n+    } else if (dev_itr->second.size() > 1) {", "path": "tensorflow/contrib/tensorrt/segment/segment.cc", "position": null, "original_position": 364, "commit_id": "bf70368d36df3ee9a16f5285940d73fb54d911c0", "original_commit_id": "8838e2a84f98bd210147dc1a79e1037f2545dff9", "user": {"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}, "body": "@aaroey that is the ultimate goal. I didn't implement it yet since once the device placement options come in, segmenter should keep nodes outside segments even if they are on the same device. This is to keep current behavior.", "created_at": "2018-04-27T23:51:23Z", "updated_at": "2018-05-02T21:46:24Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/18909#discussion_r184829532", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18909", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/184829532"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/18909#discussion_r184829532"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18909"}}, "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=31743510\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/aaroey\">@aaroey</a> that is the ultimate goal. I didn't implement it yet since once the device placement options come in, segmenter should keep nodes outside segments even if they are on the same device. This is to keep current behavior.</p>", "body_text": "@aaroey that is the ultimate goal. I didn't implement it yet since once the device placement options come in, segmenter should keep nodes outside segments even if they are on the same device. This is to keep current behavior.", "in_reply_to_id": 184824092}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/328912697", "html_url": "https://github.com/tensorflow/tensorflow/issues/12414#issuecomment-328912697", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12414", "id": 328912697, "node_id": "MDEyOklzc3VlQ29tbWVudDMyODkxMjY5Nw==", "user": {"login": "rightaditya", "id": 1624945, "node_id": "MDQ6VXNlcjE2MjQ5NDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1624945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rightaditya", "html_url": "https://github.com/rightaditya", "followers_url": "https://api.github.com/users/rightaditya/followers", "following_url": "https://api.github.com/users/rightaditya/following{/other_user}", "gists_url": "https://api.github.com/users/rightaditya/gists{/gist_id}", "starred_url": "https://api.github.com/users/rightaditya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rightaditya/subscriptions", "organizations_url": "https://api.github.com/users/rightaditya/orgs", "repos_url": "https://api.github.com/users/rightaditya/repos", "events_url": "https://api.github.com/users/rightaditya/events{/privacy}", "received_events_url": "https://api.github.com/users/rightaditya/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-12T16:44:45Z", "updated_at": "2017-09-12T16:44:45Z", "author_association": "NONE", "body_html": "<p>I can confirm the same issue on a couple different Ubuntu versions (and some unknown Linux distro), Python 3.5 and 3.6, TensorFlow 1.2 and 1.3, cudnn 5.1 and cudnn 6, and on Telsa P100, GeForce GTX 1070 and Pascal Titan X.</p>\n<p>I get the message at the end of each epoch, on both training and dev set. Here's my dataset definition:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">setup_dataset</span>(<span class=\"pl-smi\">filename</span>: <span class=\"pl-c1\">str</span>, <span class=\"pl-smi\">batch_size</span>: <span class=\"pl-c1\">int</span>, <span class=\"pl-smi\">shuffle_seed</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">None</span>):\n    n_recs, labels <span class=\"pl-k\">=</span> tfrecord_metadata(filename)\n    dataset <span class=\"pl-k\">=</span> tfdata.TFRecordDataset(filename)\n    dataset <span class=\"pl-k\">=</span> dataset.skip(<span class=\"pl-c1\">1</span>)  <span class=\"pl-c\"><span class=\"pl-c\">#</span> I store some metadata in the first record</span>\n    dataset <span class=\"pl-k\">=</span> dataset.map(parse_label_sequence_example <span class=\"pl-k\">if</span> label_seq\n                          <span class=\"pl-k\">else</span> parse_example)\n    <span class=\"pl-k\">if</span> shuffle_seed <span class=\"pl-k\">is</span> <span class=\"pl-k\">not</span> <span class=\"pl-c1\">None</span>:\n        dataset <span class=\"pl-k\">=</span> dataset.shuffle(n_recs, shuffle_seed)\n\n    dataset <span class=\"pl-k\">=</span> dataset.map(<span class=\"pl-k\">lambda</span> <span class=\"pl-smi\">x</span>, <span class=\"pl-smi\">y</span>: (x, y, build_mask(y)))\n    padded_shapes <span class=\"pl-k\">=</span> (tf.TensorShape([<span class=\"pl-c1\">None</span>]), tf.TensorShape([<span class=\"pl-c1\">None</span>],),\n                     tf.TensorShape([<span class=\"pl-c1\">None</span>]))\n    dataset <span class=\"pl-k\">=</span> dataset.padded_batch(batch_size, <span class=\"pl-v\">padded_shapes</span><span class=\"pl-k\">=</span>padded_shapes)\n\n    <span class=\"pl-k\">return</span> dataset, labels</pre></div>\n<p>I use a batch size of 8, and shuffle the training set but not the dev set (but the warning shows up in all cases).</p>", "body_text": "I can confirm the same issue on a couple different Ubuntu versions (and some unknown Linux distro), Python 3.5 and 3.6, TensorFlow 1.2 and 1.3, cudnn 5.1 and cudnn 6, and on Telsa P100, GeForce GTX 1070 and Pascal Titan X.\nI get the message at the end of each epoch, on both training and dev set. Here's my dataset definition:\ndef setup_dataset(filename: str, batch_size: int, shuffle_seed=None):\n    n_recs, labels = tfrecord_metadata(filename)\n    dataset = tfdata.TFRecordDataset(filename)\n    dataset = dataset.skip(1)  # I store some metadata in the first record\n    dataset = dataset.map(parse_label_sequence_example if label_seq\n                          else parse_example)\n    if shuffle_seed is not None:\n        dataset = dataset.shuffle(n_recs, shuffle_seed)\n\n    dataset = dataset.map(lambda x, y: (x, y, build_mask(y)))\n    padded_shapes = (tf.TensorShape([None]), tf.TensorShape([None],),\n                     tf.TensorShape([None]))\n    dataset = dataset.padded_batch(batch_size, padded_shapes=padded_shapes)\n\n    return dataset, labels\nI use a batch size of 8, and shuffle the training set but not the dev set (but the warning shows up in all cases).", "body": "I can confirm the same issue on a couple different Ubuntu versions (and some unknown Linux distro), Python 3.5 and 3.6, TensorFlow 1.2 and 1.3, cudnn 5.1 and cudnn 6, and on Telsa P100, GeForce GTX 1070 and Pascal Titan X.\r\n\r\nI get the message at the end of each epoch, on both training and dev set. Here's my dataset definition:\r\n\r\n```python\r\ndef setup_dataset(filename: str, batch_size: int, shuffle_seed=None):\r\n    n_recs, labels = tfrecord_metadata(filename)\r\n    dataset = tfdata.TFRecordDataset(filename)\r\n    dataset = dataset.skip(1)  # I store some metadata in the first record\r\n    dataset = dataset.map(parse_label_sequence_example if label_seq\r\n                          else parse_example)\r\n    if shuffle_seed is not None:\r\n        dataset = dataset.shuffle(n_recs, shuffle_seed)\r\n\r\n    dataset = dataset.map(lambda x, y: (x, y, build_mask(y)))\r\n    padded_shapes = (tf.TensorShape([None]), tf.TensorShape([None],),\r\n                     tf.TensorShape([None]))\r\n    dataset = dataset.padded_batch(batch_size, padded_shapes=padded_shapes)\r\n\r\n    return dataset, labels\r\n```\r\n\r\nI use a batch size of 8, and shuffle the training set but not the dev set (but the warning shows up in all cases)."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300857811", "html_url": "https://github.com/tensorflow/tensorflow/issues/9826#issuecomment-300857811", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9826", "id": 300857811, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDg1NzgxMQ==", "user": {"login": "eaplatanios", "id": 1294940, "node_id": "MDQ6VXNlcjEyOTQ5NDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1294940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaplatanios", "html_url": "https://github.com/eaplatanios", "followers_url": "https://api.github.com/users/eaplatanios/followers", "following_url": "https://api.github.com/users/eaplatanios/following{/other_user}", "gists_url": "https://api.github.com/users/eaplatanios/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaplatanios/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaplatanios/subscriptions", "organizations_url": "https://api.github.com/users/eaplatanios/orgs", "repos_url": "https://api.github.com/users/eaplatanios/repos", "events_url": "https://api.github.com/users/eaplatanios/events{/privacy}", "received_events_url": "https://api.github.com/users/eaplatanios/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-11T17:20:27Z", "updated_at": "2017-05-11T17:48:41Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16018\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/asimshankar\">@asimshankar</a> I'll try to create a reproducible example using the Java API. Truth be told, I came about this problem while developing the Scala API and don't have a simple code snippet you can use to reproduce this. One thing that might help for your unit tests is that the problem doesn't occur for many ops. A minimal example that causes the problem for me (using Scala syntax but trivial to translate) is this:</p>\n<div class=\"highlight highlight-source-scala\"><pre><span class=\"pl-k\">val</span> <span class=\"pl-smi\">images</span> <span class=\"pl-k\">=</span> placeholder(<span class=\"pl-en\">TFUInt8</span>, <span class=\"pl-en\">Shape</span>(<span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">28</span>, <span class=\"pl-c1\">28</span>))\n<span class=\"pl-k\">val</span> <span class=\"pl-smi\">vectorizedImages</span> <span class=\"pl-k\">=</span> reshape(images, <span class=\"pl-en\">Shape</span>(<span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">784</span>))</pre></div>\n<p><code>vectorizedImages</code> is an <code>Output</code> with Java API semantics. If you now try to call <code>vectorizedImages.shape</code>, you will get the exception I am describing, saying that <code>Node Reshape was not found in the graph</code>. I hope this can help you reproduce the problem, but if it doesn't I can look into creating a code sample using the Java API.</p>\n<p>As for the version, I tried this with both the master branch version (current one) and the r1.1 branch. I compiled without <code>--config=opt</code> as this currently causes another problem for which I am currently creating another issue. :)</p>\n<p>Thanks!</p>", "body_text": "@asimshankar I'll try to create a reproducible example using the Java API. Truth be told, I came about this problem while developing the Scala API and don't have a simple code snippet you can use to reproduce this. One thing that might help for your unit tests is that the problem doesn't occur for many ops. A minimal example that causes the problem for me (using Scala syntax but trivial to translate) is this:\nval images = placeholder(TFUInt8, Shape(-1, 28, 28))\nval vectorizedImages = reshape(images, Shape(-1, 784))\nvectorizedImages is an Output with Java API semantics. If you now try to call vectorizedImages.shape, you will get the exception I am describing, saying that Node Reshape was not found in the graph. I hope this can help you reproduce the problem, but if it doesn't I can look into creating a code sample using the Java API.\nAs for the version, I tried this with both the master branch version (current one) and the r1.1 branch. I compiled without --config=opt as this currently causes another problem for which I am currently creating another issue. :)\nThanks!", "body": "@asimshankar I'll try to create a reproducible example using the Java API. Truth be told, I came about this problem while developing the Scala API and don't have a simple code snippet you can use to reproduce this. One thing that might help for your unit tests is that the problem doesn't occur for many ops. A minimal example that causes the problem for me (using Scala syntax but trivial to translate) is this:\r\n\r\n```scala\r\nval images = placeholder(TFUInt8, Shape(-1, 28, 28))\r\nval vectorizedImages = reshape(images, Shape(-1, 784))\r\n```\r\n\r\n`vectorizedImages` is an `Output` with Java API semantics. If you now try to call `vectorizedImages.shape`, you will get the exception I am describing, saying that `Node Reshape was not found in the graph`. I hope this can help you reproduce the problem, but if it doesn't I can look into creating a code sample using the Java API.\r\n\r\nAs for the version, I tried this with both the master branch version (current one) and the r1.1 branch. I compiled without `--config=opt` as this currently causes another problem for which I am currently creating another issue. :)\r\n\r\nThanks!"}
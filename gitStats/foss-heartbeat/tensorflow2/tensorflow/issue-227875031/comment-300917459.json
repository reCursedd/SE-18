{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300917459", "html_url": "https://github.com/tensorflow/tensorflow/issues/9826#issuecomment-300917459", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9826", "id": 300917459, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDkxNzQ1OQ==", "user": {"login": "eaplatanios", "id": 1294940, "node_id": "MDQ6VXNlcjEyOTQ5NDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1294940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaplatanios", "html_url": "https://github.com/eaplatanios", "followers_url": "https://api.github.com/users/eaplatanios/followers", "following_url": "https://api.github.com/users/eaplatanios/following{/other_user}", "gists_url": "https://api.github.com/users/eaplatanios/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaplatanios/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaplatanios/subscriptions", "organizations_url": "https://api.github.com/users/eaplatanios/orgs", "repos_url": "https://api.github.com/users/eaplatanios/repos", "events_url": "https://api.github.com/users/eaplatanios/events{/privacy}", "received_events_url": "https://api.github.com/users/eaplatanios/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-11T21:08:17Z", "updated_at": "2017-05-11T21:08:17Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=16018\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/asimshankar\">@asimshankar</a> After trying to replicate the problem with a simple example in the Java API I found out the following:</p>\n<ol>\n<li>The reason the previous example was failing was that I was passing a tensor with shape [2, 1] as the second input to <code>Reshape</code>. This needs to be a one-dimensional tensor. I assume that this made <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/c/c_api.cc#L1108\">this line</a> in the C API fail silently. Thus the shape refiner never registered the op.</li>\n<li>I noticed the same happening with other ops. For example, passing a one-dimensional tensor to <code>MatMul</code> results in the same behavior.</li>\n<li>Shouldn't we have an error thrown in the native library whenever invalid inputs or attributes are provided for the ops being constructed?</li>\n</ol>\n<p>Thanks!</p>", "body_text": "@asimshankar After trying to replicate the problem with a simple example in the Java API I found out the following:\n\nThe reason the previous example was failing was that I was passing a tensor with shape [2, 1] as the second input to Reshape. This needs to be a one-dimensional tensor. I assume that this made this line in the C API fail silently. Thus the shape refiner never registered the op.\nI noticed the same happening with other ops. For example, passing a one-dimensional tensor to MatMul results in the same behavior.\nShouldn't we have an error thrown in the native library whenever invalid inputs or attributes are provided for the ops being constructed?\n\nThanks!", "body": "@asimshankar After trying to replicate the problem with a simple example in the Java API I found out the following:\r\n\r\n1. The reason the previous example was failing was that I was passing a tensor with shape [2, 1] as the second input to `Reshape`. This needs to be a one-dimensional tensor. I assume that this made [this line](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/c/c_api.cc#L1108) in the C API fail silently. Thus the shape refiner never registered the op.\r\n2. I noticed the same happening with other ops. For example, passing a one-dimensional tensor to `MatMul` results in the same behavior.\r\n3. Shouldn't we have an error thrown in the native library whenever invalid inputs or attributes are provided for the ops being constructed?\r\n\r\nThanks!"}
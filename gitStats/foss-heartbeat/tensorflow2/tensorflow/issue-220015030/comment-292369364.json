{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/292369364", "html_url": "https://github.com/tensorflow/tensorflow/issues/9027#issuecomment-292369364", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9027", "id": 292369364, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjM2OTM2NA==", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-07T00:05:37Z", "updated_at": "2017-04-07T00:05:37Z", "author_association": "MEMBER", "body_html": "<p>Ah, I see. I think the problem reduces to the different behavior of <code>tf.gfile.IsDirectory</code> on Windows and other platforms. (I suppose as a workaround you can specify an absolute path to <code>saver.save()</code> for now).</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\ntf.gfile.IsDirectory(<span class=\"pl-s\"><span class=\"pl-pds\">'</span><span class=\"pl-pds\">'</span></span>)</pre></div>\n<p>is <code>True</code> on Linux and OS X but <code>False</code> on Windows, which causes this trouble.<br>\nI believe this comes from the implementations of <code>Exists</code> and <code>Stat</code> in <a href=\"https://github.com/tensorflow/tensorflow/blob/45d6994f69ac670396671348524a3e88cd0f9656/tensorflow/core/platform/windows/windows_file_system.cc\"><code>windows_file_system.cc</code></a>, which is invoked from <a href=\"https://github.com/tensorflow/tensorflow/blob/45d6994f69ac670396671348524a3e88cd0f9656/tensorflow/core/platform/file_system.cc#L62\"><code>file_system.cc</code></a>, which in turn probably comes from the fact that even for Windows, <a href=\"https://github.com/tensorflow/tensorflow/blob/45d6994f69ac670396671348524a3e88cd0f9656/tensorflow/core/platform/file_system.cc#L58\"><code>TranslateName</code></a> is implemented by <a href=\"https://github.com/tensorflow/tensorflow/blob/45d6994f69ac670396671348524a3e88cd0f9656/tensorflow/core/lib/io/path.cc#L189\"><code>io::CleanPath</code></a>, which seems not-Windows friendly with it's use of <code>/</code> and converting an empty path to <code>.</code>.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> : What do you suggest? Making <code>io::CleanPath</code> OS independent? Or perhaps implementing <code>WindowsFileSystem::TranslateName</code>?</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=22941064\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/guschmue\">@guschmue</a> : Do you have any suggestions?</p>", "body_text": "Ah, I see. I think the problem reduces to the different behavior of tf.gfile.IsDirectory on Windows and other platforms. (I suppose as a workaround you can specify an absolute path to saver.save() for now).\nimport tensorflow as tf\ntf.gfile.IsDirectory('')\nis True on Linux and OS X but False on Windows, which causes this trouble.\nI believe this comes from the implementations of Exists and Stat in windows_file_system.cc, which is invoked from file_system.cc, which in turn probably comes from the fact that even for Windows, TranslateName is implemented by io::CleanPath, which seems not-Windows friendly with it's use of / and converting an empty path to ..\n@mrry : What do you suggest? Making io::CleanPath OS independent? Or perhaps implementing WindowsFileSystem::TranslateName?\n@guschmue : Do you have any suggestions?", "body": "Ah, I see. I think the problem reduces to the different behavior of `tf.gfile.IsDirectory` on Windows and other platforms. (I suppose as a workaround you can specify an absolute path to `saver.save()` for now).\r\n\r\n```python\r\nimport tensorflow as tf\r\ntf.gfile.IsDirectory('')\r\n```\r\n\r\nis `True` on Linux and OS X but `False` on Windows, which causes this trouble.\r\nI believe this comes from the implementations of `Exists` and `Stat` in [`windows_file_system.cc`](https://github.com/tensorflow/tensorflow/blob/45d6994f69ac670396671348524a3e88cd0f9656/tensorflow/core/platform/windows/windows_file_system.cc), which is invoked from [`file_system.cc`](https://github.com/tensorflow/tensorflow/blob/45d6994f69ac670396671348524a3e88cd0f9656/tensorflow/core/platform/file_system.cc#L62), which in turn probably comes from the fact that even for Windows, [`TranslateName`](https://github.com/tensorflow/tensorflow/blob/45d6994f69ac670396671348524a3e88cd0f9656/tensorflow/core/platform/file_system.cc#L58) is implemented by [`io::CleanPath`](https://github.com/tensorflow/tensorflow/blob/45d6994f69ac670396671348524a3e88cd0f9656/tensorflow/core/lib/io/path.cc#L189), which seems not-Windows friendly with it's use of `/` and converting an empty path to `.`.\r\n\r\n@mrry : What do you suggest? Making `io::CleanPath` OS independent? Or perhaps implementing `WindowsFileSystem::TranslateName`?\r\n\r\n@guschmue : Do you have any suggestions?\r\n"}
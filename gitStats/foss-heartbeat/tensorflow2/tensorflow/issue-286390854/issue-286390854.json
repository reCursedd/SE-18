{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15889", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15889/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15889/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15889/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15889", "id": 286390854, "node_id": "MDU6SXNzdWUyODYzOTA4NTQ=", "number": 15889, "title": "error while bazel build", "user": {"login": "XiaXuehai", "id": 11585321, "node_id": "MDQ6VXNlcjExNTg1MzIx", "avatar_url": "https://avatars1.githubusercontent.com/u/11585321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/XiaXuehai", "html_url": "https://github.com/XiaXuehai", "followers_url": "https://api.github.com/users/XiaXuehai/followers", "following_url": "https://api.github.com/users/XiaXuehai/following{/other_user}", "gists_url": "https://api.github.com/users/XiaXuehai/gists{/gist_id}", "starred_url": "https://api.github.com/users/XiaXuehai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/XiaXuehai/subscriptions", "organizations_url": "https://api.github.com/users/XiaXuehai/orgs", "repos_url": "https://api.github.com/users/XiaXuehai/repos", "events_url": "https://api.github.com/users/XiaXuehai/events{/privacy}", "received_events_url": "https://api.github.com/users/XiaXuehai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-01-05T20:05:06Z", "updated_at": "2018-06-30T08:00:50Z", "closed_at": "2018-01-09T11:07:40Z", "author_association": "NONE", "body_html": "<h2>System information</h2>\n<ul>\n<li>Have I written custom code (as opposed to using a stock example script provided in TensorFlow):<br>\n<strong>no</strong></li>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04):<br>\n<strong>Ubuntu 16.04</strong></li>\n<li>TensorFlow installed from (source or binary):<br>\n<strong>Source</strong></li>\n<li>TensorFlow version (use command below):<br>\n<strong>r1.5</strong></li>\n<li>Python version:<br>\n<strong>3.6.3(Anaconda)</strong></li>\n<li>GCC/Compiler version (if compiling from source):<br>\n<strong>5.4</strong></li>\n<li>CUDA/cuDNN version:<br>\n<strong>9.0.176 / 7.0.5</strong></li>\n<li>GPU model and memory:<br>\n<strong>NVIDIA GTX 1080, Driver 385.111, 8G</strong></li>\n<li>Bazel version (if compiling from source):<br>\n<strong>0.9</strong></li>\n<li>Exact command to reproduce:<br>\n<code>bazel build  --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --config=cuda //tensorflow/tools/pip_package:build_pip_package --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\"</code></li>\n</ul>\n<h2>Describe the problem</h2>\n<p>Use the commend line:<br>\n<code>bazel build  --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --config=cuda //tensorflow/tools/pip_package:build_pip_package --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\"</code><br>\nAnd got the error:</p>\n<pre><code>&gt; ERROR: /home/xxh/tensorflow/tensorflow/contrib/boosted_trees/BUILD:559:1: Linking of rule '//tensorflow/contrib/boosted_trees:gen_gen_stats_accumulator_ops_py_wrap_py_wrappers_cc' failed (Exit 1)\n&gt; /usr/bin/ld: warning: libcublas.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n&gt; /usr/bin/ld: warning: libcudnn.so.7, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n&gt; /usr/bin/ld: warning: libcufft.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n&gt; /usr/bin/ld: warning: libcurand.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n&gt; bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasGemmEx@libcublas.so.9.0'\n&gt; bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhpmv_v2@libcublas.so.9.0'\n&gt; bazel-out/host/\n&gt; ......\n&gt; ......\n&gt; bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsymm_v2@libcublas.so.9.0'\n&gt; bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateLRNDescriptor@libcudnn.so.7'\n&gt; collect2: error: ld returned 1 exit status\n&gt; Target //tensorflow/tools/pip_package:build_pip_package failed to build\n&gt; Use --verbose_failures to see the command lines of failed build steps.\n&gt; INFO: Elapsed time: 894.638s, Critical Path: 24.00s\n&gt; FAILED: Build did NOT complete successfully\n</code></pre>\n<p>When coppileing,I got a lot of warning like this.<br>\n<code>WARNING: /home/xxh/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.</code></p>\n<p>Cuda 9.0 test pass! And copied the cudnn.h and libcudnn* to cuda file.<br>\nIt's all fine.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nno\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04\nTensorFlow installed from (source or binary):\nSource\nTensorFlow version (use command below):\nr1.5\nPython version:\n3.6.3(Anaconda)\nGCC/Compiler version (if compiling from source):\n5.4\nCUDA/cuDNN version:\n9.0.176 / 7.0.5\nGPU model and memory:\nNVIDIA GTX 1080, Driver 385.111, 8G\nBazel version (if compiling from source):\n0.9\nExact command to reproduce:\nbazel build  --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --config=cuda //tensorflow/tools/pip_package:build_pip_package --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\"\n\nDescribe the problem\nUse the commend line:\nbazel build  --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --config=cuda //tensorflow/tools/pip_package:build_pip_package --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\"\nAnd got the error:\n> ERROR: /home/xxh/tensorflow/tensorflow/contrib/boosted_trees/BUILD:559:1: Linking of rule '//tensorflow/contrib/boosted_trees:gen_gen_stats_accumulator_ops_py_wrap_py_wrappers_cc' failed (Exit 1)\n> /usr/bin/ld: warning: libcublas.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n> /usr/bin/ld: warning: libcudnn.so.7, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n> /usr/bin/ld: warning: libcufft.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n> /usr/bin/ld: warning: libcurand.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasGemmEx@libcublas.so.9.0'\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhpmv_v2@libcublas.so.9.0'\n> bazel-out/host/\n> ......\n> ......\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsymm_v2@libcublas.so.9.0'\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateLRNDescriptor@libcudnn.so.7'\n> collect2: error: ld returned 1 exit status\n> Target //tensorflow/tools/pip_package:build_pip_package failed to build\n> Use --verbose_failures to see the command lines of failed build steps.\n> INFO: Elapsed time: 894.638s, Critical Path: 24.00s\n> FAILED: Build did NOT complete successfully\n\nWhen coppileing,I got a lot of warning like this.\nWARNING: /home/xxh/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.\nCuda 9.0 test pass! And copied the cudnn.h and libcudnn* to cuda file.\nIt's all fine.", "body": "## System information\r\n\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): \r\n**no**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n**Ubuntu 16.04**\r\n- TensorFlow installed from (source or binary):\r\n **Source**\r\n- TensorFlow version (use command below):\r\n **r1.5**\r\n- Python version: \r\n**3.6.3(Anaconda)**\r\n- GCC/Compiler version (if compiling from source): \r\n**5.4**\r\n- CUDA/cuDNN version:\r\n **9.0.176 / 7.0.5**\r\n- GPU model and memory: \r\n**NVIDIA GTX 1080, Driver 385.111, 8G**\r\n- Bazel version (if compiling from source):\r\n**0.9**\r\n- Exact command to reproduce:\r\n`bazel build  --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --config=cuda //tensorflow/tools/pip_package:build_pip_package --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\"`\r\n\r\n##  Describe the problem\r\n\r\nUse the commend line:\r\n`bazel build  --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --config=cuda //tensorflow/tools/pip_package:build_pip_package --action_env=\"LD_LIBRARY_PATH=${LD_LIBRARY_PATH}\"`\r\nAnd got the error:\r\n\r\n```\r\n> ERROR: /home/xxh/tensorflow/tensorflow/contrib/boosted_trees/BUILD:559:1: Linking of rule '//tensorflow/contrib/boosted_trees:gen_gen_stats_accumulator_ops_py_wrap_py_wrappers_cc' failed (Exit 1)\r\n> /usr/bin/ld: warning: libcublas.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n> /usr/bin/ld: warning: libcudnn.so.7, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n> /usr/bin/ld: warning: libcufft.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n> /usr/bin/ld: warning: libcurand.so.9.0, needed by bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so, not found (try using -rpath or -rpath-link)\r\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasGemmEx@libcublas.so.9.0'\r\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasZhpmv_v2@libcublas.so.9.0'\r\n> bazel-out/host/\r\n> ......\r\n> ......\r\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cublasDsymm_v2@libcublas.so.9.0'\r\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sboosted_Utrees_Cgen_Ugen_Ustats_Uaccumulator_Uops_Upy_Uwrap_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so: undefined reference to `cudnnCreateLRNDescriptor@libcudnn.so.7'\r\n> collect2: error: ld returned 1 exit status\r\n> Target //tensorflow/tools/pip_package:build_pip_package failed to build\r\n> Use --verbose_failures to see the command lines of failed build steps.\r\n> INFO: Elapsed time: 894.638s, Critical Path: 24.00s\r\n> FAILED: Build did NOT complete successfully\r\n```\r\nWhen coppileing,I got a lot of warning like this.\r\n`WARNING: /home/xxh/tensorflow/tensorflow/contrib/learn/BUILD:15:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.`\r\n\r\nCuda 9.0 test pass! And copied the cudnn.h and libcudnn* to cuda file.\r\nIt's all fine.\r\n  \r\n  "}
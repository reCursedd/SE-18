{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23254", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23254/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23254/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23254/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/23254", "id": 373902694, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI1NzIzNzA2", "number": 23254, "title": "[Features] Enable Variable Partitioning in ParameterServerStrategy graph mode", "user": {"login": "wangsiyu", "id": 5387343, "node_id": "MDQ6VXNlcjUzODczNDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5387343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangsiyu", "html_url": "https://github.com/wangsiyu", "followers_url": "https://api.github.com/users/wangsiyu/followers", "following_url": "https://api.github.com/users/wangsiyu/following{/other_user}", "gists_url": "https://api.github.com/users/wangsiyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangsiyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangsiyu/subscriptions", "organizations_url": "https://api.github.com/users/wangsiyu/orgs", "repos_url": "https://api.github.com/users/wangsiyu/repos", "events_url": "https://api.github.com/users/wangsiyu/events{/privacy}", "received_events_url": "https://api.github.com/users/wangsiyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-10-25T11:33:46Z", "updated_at": "2018-11-09T01:39:32Z", "closed_at": "2018-11-09T01:39:32Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23254", "html_url": "https://github.com/tensorflow/tensorflow/pull/23254", "diff_url": "https://github.com/tensorflow/tensorflow/pull/23254.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/23254.patch"}, "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1647833\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yuefengz\">@yuefengz</a> ,</p>\n<p>Variable Partitioning is very important in Parameter Server architecture for loading balancing. It has been widely used in Recommendation systems for distributing the large embedding variables.</p>\n<p>In <code>DistributionStrategy</code> architecture, the variable partitioner is ignored to all cases. I understand it will be complicated if we enable variables partitioner to all cases such as  <code>Eager</code>. It may be even involved with the <code>PartitionVariableScope</code> in TF 2.0 which will influence <code>tf.Variable</code> declaration with <code>tf.variable_creator_scope</code>.  However, it is easy and suitable to support partitioning on <code>ParameterServerStrategy</code> in graph mode. Every subclasses of  <code>DistributionStrategy</code> can override <code>_allow_variable_partition</code> method to decide whether to enable it or not. Currently, only <code>ParameterServerStrategy</code> has override it.</p>\n<p>It would be appreciated to have a discussion  if there is another solutions to support variable partitioner.</p>\n<p>Thanks.</p>", "body_text": "Hi @yuefengz ,\nVariable Partitioning is very important in Parameter Server architecture for loading balancing. It has been widely used in Recommendation systems for distributing the large embedding variables.\nIn DistributionStrategy architecture, the variable partitioner is ignored to all cases. I understand it will be complicated if we enable variables partitioner to all cases such as  Eager. It may be even involved with the PartitionVariableScope in TF 2.0 which will influence tf.Variable declaration with tf.variable_creator_scope.  However, it is easy and suitable to support partitioning on ParameterServerStrategy in graph mode. Every subclasses of  DistributionStrategy can override _allow_variable_partition method to decide whether to enable it or not. Currently, only ParameterServerStrategy has override it.\nIt would be appreciated to have a discussion  if there is another solutions to support variable partitioner.\nThanks.", "body": "Hi @yuefengz ,\r\n\r\nVariable Partitioning is very important in Parameter Server architecture for loading balancing. It has been widely used in Recommendation systems for distributing the large embedding variables. \r\n\r\nIn `DistributionStrategy` architecture, the variable partitioner is ignored to all cases. I understand it will be complicated if we enable variables partitioner to all cases such as  `Eager`. It may be even involved with the `PartitionVariableScope` in TF 2.0 which will influence `tf.Variable` declaration with `tf.variable_creator_scope`.  However, it is easy and suitable to support partitioning on `ParameterServerStrategy` in graph mode. Every subclasses of  `DistributionStrategy` can override `_allow_variable_partition` method to decide whether to enable it or not. Currently, only `ParameterServerStrategy` has override it.\r\n\r\nIt would be appreciated to have a discussion  if there is another solutions to support variable partitioner.\r\n\r\nThanks."}
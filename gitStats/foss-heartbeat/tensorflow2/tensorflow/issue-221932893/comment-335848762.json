{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/335848762", "html_url": "https://github.com/tensorflow/tensorflow/issues/9234#issuecomment-335848762", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9234", "id": 335848762, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTg0ODc2Mg==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-11T15:25:44Z", "updated_at": "2017-10-11T15:25:44Z", "author_association": "CONTRIBUTOR", "body_html": "<p>BTW, running this example under debug mode triggers a debug assert inside Eigen</p>\n<p><code>python: external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h:180: Eigen::DenseCoeffsBase&lt;Derived, 0&gt;::CoeffReturnType Eigen::DenseCoeffsBase&lt;Derived, 0&gt;::operator()(Eigen::Index) const [with Derived = Eigen::Ref&lt;Eigen::Array&lt;long int, 1, -1&gt; &gt;; Eigen::DenseCoeffsBase&lt;Derived, 0&gt;::CoeffReturnType = const long int&amp;; Eigen::Index = long int]: Assertion </code>index &gt;= 0 &amp;&amp; index &lt; size()' failed.<br>\n`</p>\n<p>index is -1</p>\n<p>full strack trace</p>\n<pre><code>#0  0x00007ffff6a19428 in __GI_raise (sig=sig@entry=6)\n    at ../sysdeps/unix/sysv/linux/raise.c:54\n#1  0x00007ffff6a1b02a in __GI_abort () at abort.c:89\n#2  0x00007ffff6a11bd7 in __assert_fail_base (fmt=&lt;optimized out&gt;, \n    assertion=assertion@entry=0x7fffe90b0dd7 \"index &gt;= 0 &amp;&amp; index &lt; size()\", \n    file=file@entry=0x7fffe90b0a60 \"external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h\", line=line@entry=180, \n    function=function@entry=0x7fffe90f83a0 &lt;Eigen::DenseCoeffsBase&lt;Eigen::Ref&lt;Eigen::Array&lt;long, 1, -1, 1, 1, -1&gt;, 0, Eigen::InnerStride&lt;1&gt; &gt;, 0&gt;::operator()(long) const::__PRETTY_FUNCTION__&gt; \"Eigen::DenseCoeffsBase&lt;Derived, 0&gt;::CoeffReturnType Eigen::DenseCoeffsBase&lt;Derived, 0&gt;::operator()(Eigen::Index) const [with Derived = Eigen::Ref&lt;Eigen::Array&lt;long int, 1, -1&gt; &gt;; Eigen::DenseCoeffsBas\"...) at assert.c:92\n#3  0x00007ffff6a11c82 in __GI___assert_fail (\n    assertion=0x7fffe90b0dd7 \"index &gt;= 0 &amp;&amp; index &lt; size()\", \n    file=0x7fffe90b0a60 \"external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h\", line=180, \n    function=0x7fffe90f83a0 &lt;Eigen::DenseCoeffsBase&lt;Eigen::Ref&lt;Eigen::Array&lt;long, 1, -1, 1, 1, -1&gt;, 0, Eigen::InnerStride&lt;1&gt; &gt;, 0&gt;::operator()(long) const::__PRETTY_FUNCTION__&gt; \"Eigen::DenseCoeffsBase&lt;Derived, 0&gt;::CoeffReturnType Eigen::DenseCoeffsBase&lt;Derived, 0&gt;::operator()(Eigen::Index) const [with Derived = Eigen::Ref&lt;Eigen::Array&lt;long int, 1, -1&gt; &gt;; Eigen::DenseCoeffsBas\"...)\n    at assert.c:101\n#4  0x00007fffe36caf0a in Eigen::DenseCoeffsBase&lt;Eigen::Ref&lt;Eigen::Array&lt;long, 1, -1, 1, 1, -1&gt;, 0, Eigen::InnerStride&lt;1&gt; &gt;, 0&gt;::operator() (\n    this=0x7fff9cff6850, index=-1)\n    at external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h:180\n#5  0x00007fffe386ece0 in Eigen::BDCSVD&lt;Eigen::Matrix&lt;float, -1, -1, 1, -1, -1&gt; &gt;::perturbCol0 (this=0x7fff9cff7540, col0=..., diag=..., perm=..., \n    singVals=..., shifts=..., mus=..., zhat=...)\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:908\n#6  0x00007fffe386b161 in Eigen::BDCSVD&lt;Eigen::Matrix&lt;float, -1, -1, 1, -1, -1&gt; &gt;::computeSVDofM (this=0x7fff9cff7540, firstCol=393, n=391, U=..., \n    singVals=..., V=...) at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:637\n#7  0x00007fffe386806f in Eigen::BDCSVD&lt;Eigen::Matrix&lt;float, -1, -1, 1, -1, -1&gt; &gt;::divide (this=0x7fff9cff7540, firstCol=393, lastCol=783, firstRowW=393, \n    firstColW=393, shift=0)\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:533\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#8  0x00007fffe3867253 in Eigen::BDCSVD&lt;Eigen::Matrix&lt;float, -1, -1, 1, -1, -1&gt; &gt;::divide (this=0x7fff9cff7540, firstCol=0, lastCol=783, firstRowW=0, \n    firstColW=0, shift=0) at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:428\n#9  0x00007fffe38661f3 in Eigen::BDCSVD&lt;Eigen::Matrix&lt;float, -1, -1, 1, -1, -1&gt; &gt;::compute (this=0x7fff9cff7540, matrix=..., computationOptions=40)\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:277\n#10 0x00007fffe3865a67 in Eigen::BDCSVD&lt;Eigen::Matrix&lt;float, -1, -1, 1, -1, -1&gt; &gt;::BDCSVD (this=0x7fff9cff7540, matrix=..., computationOptions=40)\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:136\n#11 0x00007fffe386587a in tensorflow::SvdOp&lt;float&gt;::ComputeMatrix (\n    this=0x255f7d0, context=0x7fff9cff8900, inputs=..., \n    outputs=0x7fff9cff7770) at ./tensorflow/core/kernels/svd_op_impl.h:88\n#12 0x00007fffe38afc66 in tensorflow::LinearAlgebraOp&lt;float&gt;::ComputeTensorSlice (this=0x255f7d0, context=0x7fff9cff8900, matrix_index=0, inputs=..., \n    input_matrix_shapes=..., outputs=..., output_matrix_shapes=...)\n    at tensorflow/core/kernels/linalg_ops_common.cc:247\n#13 0x00007fffe38b4b5a in tensorflow::LinearAlgebraOp&lt;float&gt;::Compute(tensorflow::OpKernelContext*)::{lambda(long long, long long)#1}::operator()(long long, long long) const (__closure=0x7fff78000c20, begin=0, end=1)\n    at tensorflow/core/kernels/linalg_ops_common.cc:104\n#14 0x00007fffe38b73aa in std::_Function_handler&lt;void (long long, long long), tensorflow::LinearAlgebraOp&lt;float&gt;::Compute(tensorflow::OpKernelContext*)::{lambda(long long, long long)#1}&gt;::_M_invoke(std::_Any_data const&amp;, long long&amp;&amp;, std::_Any_data const&amp;) (__functor=..., \n    __args#0=&lt;unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x1373b2da, DIE 0x137a9da2&gt;, \n    __args#1=&lt;unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x1373b2da, DIE 0x137a9da7&gt;) at /usr/include/c++/5/functional:1871\n#15 0x00007fffe5606ec7 in std::function&lt;void (long long, long long)&gt;::operator()(long long, long long) const (this=0x7fff9cff7e00, __args#0=0, __args#1=1)\n    at /usr/include/c++/5/functional:2267\n#16 0x00007fffe814d296 in tensorflow::thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function&lt;void (long long, long long)&gt;)::{lambda(long, long)#1}::operator()(long, long) const (__closure=0x7fff9cff7ba0, first=0, \n    last=1) at tensorflow/core/lib/core/threadpool.cc:100\n#17 0x00007fffe814f744 in std::_Function_handler&lt;void (long, long), tensorflow:---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n:thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function&lt;void (long long, long long)&gt;)::{lambda(long, long)#1}&gt;::_M_invoke(std::_Any_data const&amp;, long&amp;&amp;, std::_Any_data const&amp;) (__functor=..., \n    __args#0=&lt;unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x45a6c0ff, DIE 0x45a8a9d0&gt;, \n    __args#1=&lt;unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x45a6c0ff, DIE 0x45a8a9d5&gt;) at /usr/include/c++/5/functional:1871\n#18 0x00007fffe2537f55 in std::function&lt;void (long, long)&gt;::operator()(long, long) const (this=0x7fff9cff7ba0, __args#0=0, __args#1=1)\n    at /usr/include/c++/5/functional:2267\n#19 0x00007fffe2537849 in Eigen::ThreadPoolDevice::parallelFor(long, Eigen::TensorOpCost const&amp;, std::function&lt;long (long)&gt;, std::function&lt;void (long, long)&gt;) const (this=0x7fff9cff7c10, n=1, cost=..., block_align=..., f=...)\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:177\n#20 0x00007fffe814ce49 in Eigen::ThreadPoolDevice::parallelFor(long, Eigen::TensorOpCost const&amp;, std::function&lt;void (long, long)&gt;) const (\n    this=0x7fff9cff7c10, n=1, cost=..., f=...)\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:257\n#21 0x00007fffe814d4c8 in tensorflow::thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function&lt;void (long long, long long)&gt;) (\n    this=0x106d810, total=1, cost_per_unit=5782683648, fn=...)\n    at tensorflow/core/lib/core/threadpool.cc:100\n#22 0x00007fffe814bec6 in tensorflow::thread::ThreadPool::ParallelFor(long long, long long, std::function&lt;void (long long, long long)&gt;) (this=0x1044540, \n    total=1, cost_per_unit=5782683648, fn=...)\n    at tensorflow/core/lib/core/threadpool.cc:128\n#23 0x00007fffe60ef1fc in tensorflow::Shard(int, tensorflow::thread::ThreadPool*, long long, long long, std::function&lt;void (long long, long long)&gt;) (\n    max_parallelism=12, workers=0x1044540, total=1, cost_per_unit=5782683648, \n    work=...) at tensorflow/core/util/work_sharder.cc:35\n#24 0x00007fffe38af084 in tensorflow::LinearAlgebraOp&lt;float&gt;::Compute (\n    this=0x255f7d0, context=0x7fff9cff8900)\n    at tensorflow/core/kernels/linalg_ops_common.cc:109\n#25 0x00007fffe5786d8b in tensorflow::ThreadPoolDevice::Compute (\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n    this=0xcdd990, op_kernel=0x255f7d0, context=0x7fff9cff8900)\n    at tensorflow/core/common_runtime/threadpool_device.cc:59\n#26 0x00007fffe572a36c in tensorflow::(anonymous namespace)::ExecutorState::Process (this=0x255dd60, tagged_node=..., scheduled_usec=0)\n    at tensorflow/core/common_runtime/executor.cc:1652\n#27 0x00007fffe572c358 in tensorflow::(anonymous namespace)::ExecutorState::&lt;lambda()&gt;::operator()(void) const (__closure=0x255eb60)\n    at tensorflow/core/common_runtime/executor.cc:2055\n#28 0x00007fffe5733284 in std::_Function_handler&lt;void(), tensorflow::(anonymous namespace)::ExecutorState::ScheduleReady(const TaggedNodeSeq&amp;, tensorflow::(anonymous namespace)::ExecutorState::TaggedNodeReadyQueue*)::&lt;lambda()&gt; &gt;::_M_invoke(const std::_Any_data &amp;) (__functor=...)\n    at /usr/include/c++/5/functional:1871\n#29 0x00007fffe1caabbe in std::function&lt;void ()&gt;::operator()() const (\n    this=0x2559f00) at /usr/include/c++/5/functional:2267\n#30 0x00007fffe814d1c6 in tensorflow::thread::EigenEnvironment::ExecuteTask (\n    this=0x2522338, t=...) at tensorflow/core/lib/core/threadpool.cc:81\n#31 0x00007fffe814f409 in Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WorkerLoop (this=0x2522330, thread_id=6)\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/ThreadPool/NonBlockingThreadPool.h:232\n#32 0x00007fffe814dc36 in Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::NonBlockingThreadPoolTempl(int, bool, tensorflow::thread::EigenEnvironment)::{lambda()#1}::operator()() const ()\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/ThreadPool/NonBlockingThreadPool.h:65\n#33 0x00007fffe8150758 in std::_Function_handler&lt;void (), Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::NonBlockingThreadPoolTempl(int, bool, tensorflow::thread::EigenEnvironment)::{lambda()#1}&gt;::_M_invoke(std::_Any_data const&amp;) (__functor=...) at /usr/include/c++/5/functional:1871\n#34 0x00007fffe1caabbe in std::function&lt;void ()&gt;::operator()() const (\n    this=0x2553a80) at /usr/include/c++/5/functional:2267\n#35 0x00007fffe814cf2f in tensorflow::thread::EigenEnvironment::CreateThread(std::function&lt;void ()&gt;)::{lambda()#1}::operator()() const (__closure=0x2553a80)\n    at tensorflow/core/lib/core/threadpool.cc:56\n#36 0x00007fffe814e6ac in std::_Function_handler&lt;void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function&lt;void ()&gt;)::{lambda()#1}&gt;::_M_invoke(std::_Any_data const&amp;) (__functor=...) at /usr/include/c++/5/functional:1871\n\n\n</code></pre>", "body_text": "BTW, running this example under debug mode triggers a debug assert inside Eigen\npython: external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h:180: Eigen::DenseCoeffsBase<Derived, 0>::CoeffReturnType Eigen::DenseCoeffsBase<Derived, 0>::operator()(Eigen::Index) const [with Derived = Eigen::Ref<Eigen::Array<long int, 1, -1> >; Eigen::DenseCoeffsBase<Derived, 0>::CoeffReturnType = const long int&; Eigen::Index = long int]: Assertion index >= 0 && index < size()' failed.\n`\nindex is -1\nfull strack trace\n#0  0x00007ffff6a19428 in __GI_raise (sig=sig@entry=6)\n    at ../sysdeps/unix/sysv/linux/raise.c:54\n#1  0x00007ffff6a1b02a in __GI_abort () at abort.c:89\n#2  0x00007ffff6a11bd7 in __assert_fail_base (fmt=<optimized out>, \n    assertion=assertion@entry=0x7fffe90b0dd7 \"index >= 0 && index < size()\", \n    file=file@entry=0x7fffe90b0a60 \"external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h\", line=line@entry=180, \n    function=function@entry=0x7fffe90f83a0 <Eigen::DenseCoeffsBase<Eigen::Ref<Eigen::Array<long, 1, -1, 1, 1, -1>, 0, Eigen::InnerStride<1> >, 0>::operator()(long) const::__PRETTY_FUNCTION__> \"Eigen::DenseCoeffsBase<Derived, 0>::CoeffReturnType Eigen::DenseCoeffsBase<Derived, 0>::operator()(Eigen::Index) const [with Derived = Eigen::Ref<Eigen::Array<long int, 1, -1> >; Eigen::DenseCoeffsBas\"...) at assert.c:92\n#3  0x00007ffff6a11c82 in __GI___assert_fail (\n    assertion=0x7fffe90b0dd7 \"index >= 0 && index < size()\", \n    file=0x7fffe90b0a60 \"external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h\", line=180, \n    function=0x7fffe90f83a0 <Eigen::DenseCoeffsBase<Eigen::Ref<Eigen::Array<long, 1, -1, 1, 1, -1>, 0, Eigen::InnerStride<1> >, 0>::operator()(long) const::__PRETTY_FUNCTION__> \"Eigen::DenseCoeffsBase<Derived, 0>::CoeffReturnType Eigen::DenseCoeffsBase<Derived, 0>::operator()(Eigen::Index) const [with Derived = Eigen::Ref<Eigen::Array<long int, 1, -1> >; Eigen::DenseCoeffsBas\"...)\n    at assert.c:101\n#4  0x00007fffe36caf0a in Eigen::DenseCoeffsBase<Eigen::Ref<Eigen::Array<long, 1, -1, 1, 1, -1>, 0, Eigen::InnerStride<1> >, 0>::operator() (\n    this=0x7fff9cff6850, index=-1)\n    at external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h:180\n#5  0x00007fffe386ece0 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::perturbCol0 (this=0x7fff9cff7540, col0=..., diag=..., perm=..., \n    singVals=..., shifts=..., mus=..., zhat=...)\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:908\n#6  0x00007fffe386b161 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::computeSVDofM (this=0x7fff9cff7540, firstCol=393, n=391, U=..., \n    singVals=..., V=...) at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:637\n#7  0x00007fffe386806f in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::divide (this=0x7fff9cff7540, firstCol=393, lastCol=783, firstRowW=393, \n    firstColW=393, shift=0)\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:533\n---Type <return> to continue, or q <return> to quit---\n#8  0x00007fffe3867253 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::divide (this=0x7fff9cff7540, firstCol=0, lastCol=783, firstRowW=0, \n    firstColW=0, shift=0) at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:428\n#9  0x00007fffe38661f3 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::compute (this=0x7fff9cff7540, matrix=..., computationOptions=40)\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:277\n#10 0x00007fffe3865a67 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::BDCSVD (this=0x7fff9cff7540, matrix=..., computationOptions=40)\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:136\n#11 0x00007fffe386587a in tensorflow::SvdOp<float>::ComputeMatrix (\n    this=0x255f7d0, context=0x7fff9cff8900, inputs=..., \n    outputs=0x7fff9cff7770) at ./tensorflow/core/kernels/svd_op_impl.h:88\n#12 0x00007fffe38afc66 in tensorflow::LinearAlgebraOp<float>::ComputeTensorSlice (this=0x255f7d0, context=0x7fff9cff8900, matrix_index=0, inputs=..., \n    input_matrix_shapes=..., outputs=..., output_matrix_shapes=...)\n    at tensorflow/core/kernels/linalg_ops_common.cc:247\n#13 0x00007fffe38b4b5a in tensorflow::LinearAlgebraOp<float>::Compute(tensorflow::OpKernelContext*)::{lambda(long long, long long)#1}::operator()(long long, long long) const (__closure=0x7fff78000c20, begin=0, end=1)\n    at tensorflow/core/kernels/linalg_ops_common.cc:104\n#14 0x00007fffe38b73aa in std::_Function_handler<void (long long, long long), tensorflow::LinearAlgebraOp<float>::Compute(tensorflow::OpKernelContext*)::{lambda(long long, long long)#1}>::_M_invoke(std::_Any_data const&, long long&&, std::_Any_data const&) (__functor=..., \n    __args#0=<unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x1373b2da, DIE 0x137a9da2>, \n    __args#1=<unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x1373b2da, DIE 0x137a9da7>) at /usr/include/c++/5/functional:1871\n#15 0x00007fffe5606ec7 in std::function<void (long long, long long)>::operator()(long long, long long) const (this=0x7fff9cff7e00, __args#0=0, __args#1=1)\n    at /usr/include/c++/5/functional:2267\n#16 0x00007fffe814d296 in tensorflow::thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function<void (long long, long long)>)::{lambda(long, long)#1}::operator()(long, long) const (__closure=0x7fff9cff7ba0, first=0, \n    last=1) at tensorflow/core/lib/core/threadpool.cc:100\n#17 0x00007fffe814f744 in std::_Function_handler<void (long, long), tensorflow:---Type <return> to continue, or q <return> to quit---\n:thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function<void (long long, long long)>)::{lambda(long, long)#1}>::_M_invoke(std::_Any_data const&, long&&, std::_Any_data const&) (__functor=..., \n    __args#0=<unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x45a6c0ff, DIE 0x45a8a9d0>, \n    __args#1=<unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x45a6c0ff, DIE 0x45a8a9d5>) at /usr/include/c++/5/functional:1871\n#18 0x00007fffe2537f55 in std::function<void (long, long)>::operator()(long, long) const (this=0x7fff9cff7ba0, __args#0=0, __args#1=1)\n    at /usr/include/c++/5/functional:2267\n#19 0x00007fffe2537849 in Eigen::ThreadPoolDevice::parallelFor(long, Eigen::TensorOpCost const&, std::function<long (long)>, std::function<void (long, long)>) const (this=0x7fff9cff7c10, n=1, cost=..., block_align=..., f=...)\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:177\n#20 0x00007fffe814ce49 in Eigen::ThreadPoolDevice::parallelFor(long, Eigen::TensorOpCost const&, std::function<void (long, long)>) const (\n    this=0x7fff9cff7c10, n=1, cost=..., f=...)\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:257\n#21 0x00007fffe814d4c8 in tensorflow::thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function<void (long long, long long)>) (\n    this=0x106d810, total=1, cost_per_unit=5782683648, fn=...)\n    at tensorflow/core/lib/core/threadpool.cc:100\n#22 0x00007fffe814bec6 in tensorflow::thread::ThreadPool::ParallelFor(long long, long long, std::function<void (long long, long long)>) (this=0x1044540, \n    total=1, cost_per_unit=5782683648, fn=...)\n    at tensorflow/core/lib/core/threadpool.cc:128\n#23 0x00007fffe60ef1fc in tensorflow::Shard(int, tensorflow::thread::ThreadPool*, long long, long long, std::function<void (long long, long long)>) (\n    max_parallelism=12, workers=0x1044540, total=1, cost_per_unit=5782683648, \n    work=...) at tensorflow/core/util/work_sharder.cc:35\n#24 0x00007fffe38af084 in tensorflow::LinearAlgebraOp<float>::Compute (\n    this=0x255f7d0, context=0x7fff9cff8900)\n    at tensorflow/core/kernels/linalg_ops_common.cc:109\n#25 0x00007fffe5786d8b in tensorflow::ThreadPoolDevice::Compute (\n---Type <return> to continue, or q <return> to quit---\n    this=0xcdd990, op_kernel=0x255f7d0, context=0x7fff9cff8900)\n    at tensorflow/core/common_runtime/threadpool_device.cc:59\n#26 0x00007fffe572a36c in tensorflow::(anonymous namespace)::ExecutorState::Process (this=0x255dd60, tagged_node=..., scheduled_usec=0)\n    at tensorflow/core/common_runtime/executor.cc:1652\n#27 0x00007fffe572c358 in tensorflow::(anonymous namespace)::ExecutorState::<lambda()>::operator()(void) const (__closure=0x255eb60)\n    at tensorflow/core/common_runtime/executor.cc:2055\n#28 0x00007fffe5733284 in std::_Function_handler<void(), tensorflow::(anonymous namespace)::ExecutorState::ScheduleReady(const TaggedNodeSeq&, tensorflow::(anonymous namespace)::ExecutorState::TaggedNodeReadyQueue*)::<lambda()> >::_M_invoke(const std::_Any_data &) (__functor=...)\n    at /usr/include/c++/5/functional:1871\n#29 0x00007fffe1caabbe in std::function<void ()>::operator()() const (\n    this=0x2559f00) at /usr/include/c++/5/functional:2267\n#30 0x00007fffe814d1c6 in tensorflow::thread::EigenEnvironment::ExecuteTask (\n    this=0x2522338, t=...) at tensorflow/core/lib/core/threadpool.cc:81\n#31 0x00007fffe814f409 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop (this=0x2522330, thread_id=6)\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/ThreadPool/NonBlockingThreadPool.h:232\n#32 0x00007fffe814dc36 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::NonBlockingThreadPoolTempl(int, bool, tensorflow::thread::EigenEnvironment)::{lambda()#1}::operator()() const ()\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/ThreadPool/NonBlockingThreadPool.h:65\n#33 0x00007fffe8150758 in std::_Function_handler<void (), Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::NonBlockingThreadPoolTempl(int, bool, tensorflow::thread::EigenEnvironment)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (__functor=...) at /usr/include/c++/5/functional:1871\n#34 0x00007fffe1caabbe in std::function<void ()>::operator()() const (\n    this=0x2553a80) at /usr/include/c++/5/functional:2267\n#35 0x00007fffe814cf2f in tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}::operator()() const (__closure=0x2553a80)\n    at tensorflow/core/lib/core/threadpool.cc:56\n#36 0x00007fffe814e6ac in std::_Function_handler<void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (__functor=...) at /usr/include/c++/5/functional:1871", "body": "BTW, running this example under debug mode triggers a debug assert inside Eigen\r\n\r\n`python: external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h:180: Eigen::DenseCoeffsBase<Derived, 0>::CoeffReturnType Eigen::DenseCoeffsBase<Derived, 0>::operator()(Eigen::Index) const [with Derived = Eigen::Ref<Eigen::Array<long int, 1, -1> >; Eigen::DenseCoeffsBase<Derived, 0>::CoeffReturnType = const long int&; Eigen::Index = long int]: Assertion `index >= 0 && index < size()' failed.\r\n`\r\n\r\nindex is -1\r\n\r\nfull strack trace\r\n```\r\n#0  0x00007ffff6a19428 in __GI_raise (sig=sig@entry=6)\r\n    at ../sysdeps/unix/sysv/linux/raise.c:54\r\n#1  0x00007ffff6a1b02a in __GI_abort () at abort.c:89\r\n#2  0x00007ffff6a11bd7 in __assert_fail_base (fmt=<optimized out>, \r\n    assertion=assertion@entry=0x7fffe90b0dd7 \"index >= 0 && index < size()\", \r\n    file=file@entry=0x7fffe90b0a60 \"external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h\", line=line@entry=180, \r\n    function=function@entry=0x7fffe90f83a0 <Eigen::DenseCoeffsBase<Eigen::Ref<Eigen::Array<long, 1, -1, 1, 1, -1>, 0, Eigen::InnerStride<1> >, 0>::operator()(long) const::__PRETTY_FUNCTION__> \"Eigen::DenseCoeffsBase<Derived, 0>::CoeffReturnType Eigen::DenseCoeffsBase<Derived, 0>::operator()(Eigen::Index) const [with Derived = Eigen::Ref<Eigen::Array<long int, 1, -1> >; Eigen::DenseCoeffsBas\"...) at assert.c:92\r\n#3  0x00007ffff6a11c82 in __GI___assert_fail (\r\n    assertion=0x7fffe90b0dd7 \"index >= 0 && index < size()\", \r\n    file=0x7fffe90b0a60 \"external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h\", line=180, \r\n    function=0x7fffe90f83a0 <Eigen::DenseCoeffsBase<Eigen::Ref<Eigen::Array<long, 1, -1, 1, 1, -1>, 0, Eigen::InnerStride<1> >, 0>::operator()(long) const::__PRETTY_FUNCTION__> \"Eigen::DenseCoeffsBase<Derived, 0>::CoeffReturnType Eigen::DenseCoeffsBase<Derived, 0>::operator()(Eigen::Index) const [with Derived = Eigen::Ref<Eigen::Array<long int, 1, -1> >; Eigen::DenseCoeffsBas\"...)\r\n    at assert.c:101\r\n#4  0x00007fffe36caf0a in Eigen::DenseCoeffsBase<Eigen::Ref<Eigen::Array<long, 1, -1, 1, 1, -1>, 0, Eigen::InnerStride<1> >, 0>::operator() (\r\n    this=0x7fff9cff6850, index=-1)\r\n    at external/eigen_archive/Eigen/src/Core/DenseCoeffsBase.h:180\r\n#5  0x00007fffe386ece0 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::perturbCol0 (this=0x7fff9cff7540, col0=..., diag=..., perm=..., \r\n    singVals=..., shifts=..., mus=..., zhat=...)\r\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:908\r\n#6  0x00007fffe386b161 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::computeSVDofM (this=0x7fff9cff7540, firstCol=393, n=391, U=..., \r\n    singVals=..., V=...) at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:637\r\n#7  0x00007fffe386806f in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::divide (this=0x7fff9cff7540, firstCol=393, lastCol=783, firstRowW=393, \r\n    firstColW=393, shift=0)\r\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:533\r\n---Type <return> to continue, or q <return> to quit---\r\n#8  0x00007fffe3867253 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::divide (this=0x7fff9cff7540, firstCol=0, lastCol=783, firstRowW=0, \r\n    firstColW=0, shift=0) at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:428\r\n#9  0x00007fffe38661f3 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::compute (this=0x7fff9cff7540, matrix=..., computationOptions=40)\r\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:277\r\n#10 0x00007fffe3865a67 in Eigen::BDCSVD<Eigen::Matrix<float, -1, -1, 1, -1, -1> >::BDCSVD (this=0x7fff9cff7540, matrix=..., computationOptions=40)\r\n    at external/eigen_archive/Eigen/src/SVD/BDCSVD.h:136\r\n#11 0x00007fffe386587a in tensorflow::SvdOp<float>::ComputeMatrix (\r\n    this=0x255f7d0, context=0x7fff9cff8900, inputs=..., \r\n    outputs=0x7fff9cff7770) at ./tensorflow/core/kernels/svd_op_impl.h:88\r\n#12 0x00007fffe38afc66 in tensorflow::LinearAlgebraOp<float>::ComputeTensorSlice (this=0x255f7d0, context=0x7fff9cff8900, matrix_index=0, inputs=..., \r\n    input_matrix_shapes=..., outputs=..., output_matrix_shapes=...)\r\n    at tensorflow/core/kernels/linalg_ops_common.cc:247\r\n#13 0x00007fffe38b4b5a in tensorflow::LinearAlgebraOp<float>::Compute(tensorflow::OpKernelContext*)::{lambda(long long, long long)#1}::operator()(long long, long long) const (__closure=0x7fff78000c20, begin=0, end=1)\r\n    at tensorflow/core/kernels/linalg_ops_common.cc:104\r\n#14 0x00007fffe38b73aa in std::_Function_handler<void (long long, long long), tensorflow::LinearAlgebraOp<float>::Compute(tensorflow::OpKernelContext*)::{lambda(long long, long long)#1}>::_M_invoke(std::_Any_data const&, long long&&, std::_Any_data const&) (__functor=..., \r\n    __args#0=<unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x1373b2da, DIE 0x137a9da2>, \r\n    __args#1=<unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x1373b2da, DIE 0x137a9da7>) at /usr/include/c++/5/functional:1871\r\n#15 0x00007fffe5606ec7 in std::function<void (long long, long long)>::operator()(long long, long long) const (this=0x7fff9cff7e00, __args#0=0, __args#1=1)\r\n    at /usr/include/c++/5/functional:2267\r\n#16 0x00007fffe814d296 in tensorflow::thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function<void (long long, long long)>)::{lambda(long, long)#1}::operator()(long, long) const (__closure=0x7fff9cff7ba0, first=0, \r\n    last=1) at tensorflow/core/lib/core/threadpool.cc:100\r\n#17 0x00007fffe814f744 in std::_Function_handler<void (long, long), tensorflow:---Type <return> to continue, or q <return> to quit---\r\n:thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function<void (long long, long long)>)::{lambda(long, long)#1}>::_M_invoke(std::_Any_data const&, long&&, std::_Any_data const&) (__functor=..., \r\n    __args#0=<unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x45a6c0ff, DIE 0x45a8a9d0>, \r\n    __args#1=<unknown type in /home/yaroslav/anaconda3/envs/tf13dbg/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so, CU 0x45a6c0ff, DIE 0x45a8a9d5>) at /usr/include/c++/5/functional:1871\r\n#18 0x00007fffe2537f55 in std::function<void (long, long)>::operator()(long, long) const (this=0x7fff9cff7ba0, __args#0=0, __args#1=1)\r\n    at /usr/include/c++/5/functional:2267\r\n#19 0x00007fffe2537849 in Eigen::ThreadPoolDevice::parallelFor(long, Eigen::TensorOpCost const&, std::function<long (long)>, std::function<void (long, long)>) const (this=0x7fff9cff7c10, n=1, cost=..., block_align=..., f=...)\r\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:177\r\n#20 0x00007fffe814ce49 in Eigen::ThreadPoolDevice::parallelFor(long, Eigen::TensorOpCost const&, std::function<void (long, long)>) const (\r\n    this=0x7fff9cff7c10, n=1, cost=..., f=...)\r\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:257\r\n#21 0x00007fffe814d4c8 in tensorflow::thread::ThreadPool::Impl::ParallelFor(long long, long long, std::function<void (long long, long long)>) (\r\n    this=0x106d810, total=1, cost_per_unit=5782683648, fn=...)\r\n    at tensorflow/core/lib/core/threadpool.cc:100\r\n#22 0x00007fffe814bec6 in tensorflow::thread::ThreadPool::ParallelFor(long long, long long, std::function<void (long long, long long)>) (this=0x1044540, \r\n    total=1, cost_per_unit=5782683648, fn=...)\r\n    at tensorflow/core/lib/core/threadpool.cc:128\r\n#23 0x00007fffe60ef1fc in tensorflow::Shard(int, tensorflow::thread::ThreadPool*, long long, long long, std::function<void (long long, long long)>) (\r\n    max_parallelism=12, workers=0x1044540, total=1, cost_per_unit=5782683648, \r\n    work=...) at tensorflow/core/util/work_sharder.cc:35\r\n#24 0x00007fffe38af084 in tensorflow::LinearAlgebraOp<float>::Compute (\r\n    this=0x255f7d0, context=0x7fff9cff8900)\r\n    at tensorflow/core/kernels/linalg_ops_common.cc:109\r\n#25 0x00007fffe5786d8b in tensorflow::ThreadPoolDevice::Compute (\r\n---Type <return> to continue, or q <return> to quit---\r\n    this=0xcdd990, op_kernel=0x255f7d0, context=0x7fff9cff8900)\r\n    at tensorflow/core/common_runtime/threadpool_device.cc:59\r\n#26 0x00007fffe572a36c in tensorflow::(anonymous namespace)::ExecutorState::Process (this=0x255dd60, tagged_node=..., scheduled_usec=0)\r\n    at tensorflow/core/common_runtime/executor.cc:1652\r\n#27 0x00007fffe572c358 in tensorflow::(anonymous namespace)::ExecutorState::<lambda()>::operator()(void) const (__closure=0x255eb60)\r\n    at tensorflow/core/common_runtime/executor.cc:2055\r\n#28 0x00007fffe5733284 in std::_Function_handler<void(), tensorflow::(anonymous namespace)::ExecutorState::ScheduleReady(const TaggedNodeSeq&, tensorflow::(anonymous namespace)::ExecutorState::TaggedNodeReadyQueue*)::<lambda()> >::_M_invoke(const std::_Any_data &) (__functor=...)\r\n    at /usr/include/c++/5/functional:1871\r\n#29 0x00007fffe1caabbe in std::function<void ()>::operator()() const (\r\n    this=0x2559f00) at /usr/include/c++/5/functional:2267\r\n#30 0x00007fffe814d1c6 in tensorflow::thread::EigenEnvironment::ExecuteTask (\r\n    this=0x2522338, t=...) at tensorflow/core/lib/core/threadpool.cc:81\r\n#31 0x00007fffe814f409 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop (this=0x2522330, thread_id=6)\r\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/ThreadPool/NonBlockingThreadPool.h:232\r\n#32 0x00007fffe814dc36 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::NonBlockingThreadPoolTempl(int, bool, tensorflow::thread::EigenEnvironment)::{lambda()#1}::operator()() const ()\r\n    at external/eigen_archive/unsupported/Eigen/CXX11/src/ThreadPool/NonBlockingThreadPool.h:65\r\n#33 0x00007fffe8150758 in std::_Function_handler<void (), Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::NonBlockingThreadPoolTempl(int, bool, tensorflow::thread::EigenEnvironment)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (__functor=...) at /usr/include/c++/5/functional:1871\r\n#34 0x00007fffe1caabbe in std::function<void ()>::operator()() const (\r\n    this=0x2553a80) at /usr/include/c++/5/functional:2267\r\n#35 0x00007fffe814cf2f in tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}::operator()() const (__closure=0x2553a80)\r\n    at tensorflow/core/lib/core/threadpool.cc:56\r\n#36 0x00007fffe814e6ac in std::_Function_handler<void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (__functor=...) at /usr/include/c++/5/functional:1871\r\n\r\n\r\n```"}
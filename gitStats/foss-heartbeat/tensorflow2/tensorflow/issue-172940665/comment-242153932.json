{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/242153932", "html_url": "https://github.com/tensorflow/tensorflow/issues/4016#issuecomment-242153932", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4016", "id": 242153932, "node_id": "MDEyOklzc3VlQ29tbWVudDI0MjE1MzkzMg==", "user": {"login": "sguada", "id": 1766524, "node_id": "MDQ6VXNlcjE3NjY1MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sguada", "html_url": "https://github.com/sguada", "followers_url": "https://api.github.com/users/sguada/followers", "following_url": "https://api.github.com/users/sguada/following{/other_user}", "gists_url": "https://api.github.com/users/sguada/gists{/gist_id}", "starred_url": "https://api.github.com/users/sguada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sguada/subscriptions", "organizations_url": "https://api.github.com/users/sguada/orgs", "repos_url": "https://api.github.com/users/sguada/repos", "events_url": "https://api.github.com/users/sguada/events{/privacy}", "received_events_url": "https://api.github.com/users/sguada/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-24T17:57:10Z", "updated_at": "2016-08-24T17:57:10Z", "author_association": "MEMBER", "body_html": "<p>Try passing a lambda function instead.</p>\n<pre><code>conv1_1 = np.random.rand(3, 3, 3, 64).astype(dtype=np.float32)\ninputs = tf.placeholder(tf.float32, shape=(32, 96, 96, 3))\nnet = layers.convolution2d(inputs, 64, 3, weights_initializer=lambda x: conv1_1, scope='conv1_1')\n</code></pre>\n<p>The solution would be to change <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/framework/python/ops/variables.py#L197\">variables.variable</a>  to use shape to validate the initial_value instead of passing it to get_variable()</p>", "body_text": "Try passing a lambda function instead.\nconv1_1 = np.random.rand(3, 3, 3, 64).astype(dtype=np.float32)\ninputs = tf.placeholder(tf.float32, shape=(32, 96, 96, 3))\nnet = layers.convolution2d(inputs, 64, 3, weights_initializer=lambda x: conv1_1, scope='conv1_1')\n\nThe solution would be to change variables.variable  to use shape to validate the initial_value instead of passing it to get_variable()", "body": "Try passing a lambda function instead.\n\n```\nconv1_1 = np.random.rand(3, 3, 3, 64).astype(dtype=np.float32)\ninputs = tf.placeholder(tf.float32, shape=(32, 96, 96, 3))\nnet = layers.convolution2d(inputs, 64, 3, weights_initializer=lambda x: conv1_1, scope='conv1_1')\n```\n\nThe solution would be to change [variables.variable](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/framework/python/ops/variables.py#L197)  to use shape to validate the initial_value instead of passing it to get_variable()\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8515", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8515/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8515/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8515/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8515", "id": 215159565, "node_id": "MDU6SXNzdWUyMTUxNTk1NjU=", "number": 8515, "title": "Gradients Tutorial feature requests.", "user": {"login": "JakeRenn", "id": 14928816, "node_id": "MDQ6VXNlcjE0OTI4ODE2", "avatar_url": "https://avatars2.githubusercontent.com/u/14928816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JakeRenn", "html_url": "https://github.com/JakeRenn", "followers_url": "https://api.github.com/users/JakeRenn/followers", "following_url": "https://api.github.com/users/JakeRenn/following{/other_user}", "gists_url": "https://api.github.com/users/JakeRenn/gists{/gist_id}", "starred_url": "https://api.github.com/users/JakeRenn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JakeRenn/subscriptions", "organizations_url": "https://api.github.com/users/JakeRenn/orgs", "repos_url": "https://api.github.com/users/JakeRenn/repos", "events_url": "https://api.github.com/users/JakeRenn/events{/privacy}", "received_events_url": "https://api.github.com/users/JakeRenn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-03-18T02:11:24Z", "updated_at": "2017-03-18T02:19:01Z", "closed_at": "2017-03-18T02:19:01Z", "author_association": "NONE", "body_html": "<p>I need to modify the tensorflow source for specific ops. When add one more input to the <code>REGISTER_OP</code> from</p>\n<pre><code>.Input(\"feature: T\")\n.Input(\"labels: T\")\n</code></pre>\n<p>to</p>\n<pre><code>.Input(\"feature: T\")\n.Input(\"labels: T\")\n.Input(\"my_input: T\")\n</code></pre>\n<p>the forward version of corresponding codes do work, but the backpropagation version of corresponding codes seem to need further modification. Since the organization of TF source codes seems too complicated to me, I don't what to modify for the next step.</p>\n<p>Here is the Error I got:</p>\n<pre><code>    grads = optimizer.compute_gradients(total_loss)\n  File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 345, in compute_gradients\n    colocate_gradients_with_ops=colocate_gradients_with_ops)\n  File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gradients_impl.py\", line 488, in gradients\n    _VerifyGeneratedGradients(in_grads, op)\n  File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gradients_impl.py\", line 255, in _VerifyGeneratedGradients\n    \"inputs %d\" % (len(grads), op.node_def, len(op.inputs)))\nValueError: Num gradients 2 generated for op name: \"softmax_cross_entropy_loss/xentropy\"\nop: \"SoftmaxCrossEntropyWithLogits\"\ninput: \"softmax_cross_entropy_loss/Reshape\"\ninput: \"softmax_cross_entropy_loss/Reshape_1\"\ninput: \"Reshape_3\"\nattr {\n  key: \"T\"\n  value {\n    type: DT_FLOAT\n  }\n}\n do not match num inputs 3\n</code></pre>\n<p>Any help will be appreciated. Thanks.</p>", "body_text": "I need to modify the tensorflow source for specific ops. When add one more input to the REGISTER_OP from\n.Input(\"feature: T\")\n.Input(\"labels: T\")\n\nto\n.Input(\"feature: T\")\n.Input(\"labels: T\")\n.Input(\"my_input: T\")\n\nthe forward version of corresponding codes do work, but the backpropagation version of corresponding codes seem to need further modification. Since the organization of TF source codes seems too complicated to me, I don't what to modify for the next step.\nHere is the Error I got:\n    grads = optimizer.compute_gradients(total_loss)\n  File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 345, in compute_gradients\n    colocate_gradients_with_ops=colocate_gradients_with_ops)\n  File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gradients_impl.py\", line 488, in gradients\n    _VerifyGeneratedGradients(in_grads, op)\n  File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gradients_impl.py\", line 255, in _VerifyGeneratedGradients\n    \"inputs %d\" % (len(grads), op.node_def, len(op.inputs)))\nValueError: Num gradients 2 generated for op name: \"softmax_cross_entropy_loss/xentropy\"\nop: \"SoftmaxCrossEntropyWithLogits\"\ninput: \"softmax_cross_entropy_loss/Reshape\"\ninput: \"softmax_cross_entropy_loss/Reshape_1\"\ninput: \"Reshape_3\"\nattr {\n  key: \"T\"\n  value {\n    type: DT_FLOAT\n  }\n}\n do not match num inputs 3\n\nAny help will be appreciated. Thanks.", "body": "\r\nI need to modify the tensorflow source for specific ops. When add one more input to the `REGISTER_OP` from\r\n\r\n    .Input(\"feature: T\")\r\n    .Input(\"labels: T\")\r\nto \r\n\r\n    .Input(\"feature: T\")\r\n    .Input(\"labels: T\")\r\n    .Input(\"my_input: T\")\r\n\r\nthe forward version of corresponding codes do work, but the backpropagation version of corresponding codes seem to need further modification. Since the organization of TF source codes seems too complicated to me, I don't what to modify for the next step.\r\n\r\nHere is the Error I got:\r\n  \r\n        grads = optimizer.compute_gradients(total_loss)\r\n      File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 345, in compute_gradients\r\n        colocate_gradients_with_ops=colocate_gradients_with_ops)\r\n      File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gradients_impl.py\", line 488, in gradients\r\n        _VerifyGeneratedGradients(in_grads, op)\r\n      File \"/home/jake/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/gradients_impl.py\", line 255, in _VerifyGeneratedGradients\r\n        \"inputs %d\" % (len(grads), op.node_def, len(op.inputs)))\r\n    ValueError: Num gradients 2 generated for op name: \"softmax_cross_entropy_loss/xentropy\"\r\n    op: \"SoftmaxCrossEntropyWithLogits\"\r\n    input: \"softmax_cross_entropy_loss/Reshape\"\r\n    input: \"softmax_cross_entropy_loss/Reshape_1\"\r\n    input: \"Reshape_3\"\r\n    attr {\r\n      key: \"T\"\r\n      value {\r\n        type: DT_FLOAT\r\n      }\r\n    }\r\n     do not match num inputs 3\r\n\r\nAny help will be appreciated. Thanks.\r\n"}
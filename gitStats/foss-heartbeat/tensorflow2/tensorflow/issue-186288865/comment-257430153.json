{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/257430153", "html_url": "https://github.com/tensorflow/tensorflow/issues/5302#issuecomment-257430153", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5302", "id": 257430153, "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzQzMDE1Mw==", "user": {"login": "beniz", "id": 3530657, "node_id": "MDQ6VXNlcjM1MzA2NTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3530657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beniz", "html_url": "https://github.com/beniz", "followers_url": "https://api.github.com/users/beniz/followers", "following_url": "https://api.github.com/users/beniz/following{/other_user}", "gists_url": "https://api.github.com/users/beniz/gists{/gist_id}", "starred_url": "https://api.github.com/users/beniz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beniz/subscriptions", "organizations_url": "https://api.github.com/users/beniz/orgs", "repos_url": "https://api.github.com/users/beniz/repos", "events_url": "https://api.github.com/users/beniz/events{/privacy}", "received_events_url": "https://api.github.com/users/beniz/received_events", "type": "User", "site_admin": false}, "created_at": "2016-10-31T21:46:10Z", "updated_at": "2016-10-31T21:46:10Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=326106\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/aselle\">@aselle</a> stunning, memory now perfectly handled! Many thanks for the quick answer.</p>\n<p>I guess TF is developed with and thus for <code>tcmalloc</code> as default. Using various <code>resnet</code> architectures, the C++ code above was in practice not usable with standard <code>malloc</code>.</p>\n<p>Slightly more info for the users possibly finding this thread in the future:</p>\n<ul>\n<li>TF + tcmalloc appears to be the way to go: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"154979641\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2384\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2384/hovercard?comment_id=228577365&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/2384#issuecomment-228577365\">#2384 (comment)</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"161912688\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3009\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3009/hovercard?comment_id=235993119&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/3009#issuecomment-235993119\">#3009 (comment)</a></li>\n<li>some mitigated results, depending on number of threads,<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"161912688\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3009\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3009/hovercard?comment_id=255633245&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/3009#issuecomment-255633245\">#3009 (comment)</a></li>\n</ul>", "body_text": "@aselle stunning, memory now perfectly handled! Many thanks for the quick answer.\nI guess TF is developed with and thus for tcmalloc as default. Using various resnet architectures, the C++ code above was in practice not usable with standard malloc.\nSlightly more info for the users possibly finding this thread in the future:\n\nTF + tcmalloc appears to be the way to go: #2384 (comment) and #3009 (comment)\nsome mitigated results, depending on number of threads,\n#3009 (comment)", "body": "@aselle stunning, memory now perfectly handled! Many thanks for the quick answer.\n\nI guess TF is developed with and thus for `tcmalloc` as default. Using various `resnet` architectures, the C++ code above was in practice not usable with standard `malloc`.\n\nSlightly more info for the users possibly finding this thread in the future:\n- TF + tcmalloc appears to be the way to go: https://github.com/tensorflow/tensorflow/issues/2384#issuecomment-228577365 and https://github.com/tensorflow/tensorflow/issues/3009#issuecomment-235993119\n- some mitigated results, depending on number of threads, \n  https://github.com/tensorflow/tensorflow/issues/3009#issuecomment-255633245\n"}
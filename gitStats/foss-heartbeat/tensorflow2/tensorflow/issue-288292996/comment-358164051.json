{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/358164051", "html_url": "https://github.com/tensorflow/tensorflow/issues/16091#issuecomment-358164051", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16091", "id": 358164051, "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODE2NDA1MQ==", "user": {"login": "kangshan0910", "id": 30062430, "node_id": "MDQ6VXNlcjMwMDYyNDMw", "avatar_url": "https://avatars2.githubusercontent.com/u/30062430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kangshan0910", "html_url": "https://github.com/kangshan0910", "followers_url": "https://api.github.com/users/kangshan0910/followers", "following_url": "https://api.github.com/users/kangshan0910/following{/other_user}", "gists_url": "https://api.github.com/users/kangshan0910/gists{/gist_id}", "starred_url": "https://api.github.com/users/kangshan0910/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kangshan0910/subscriptions", "organizations_url": "https://api.github.com/users/kangshan0910/orgs", "repos_url": "https://api.github.com/users/kangshan0910/repos", "events_url": "https://api.github.com/users/kangshan0910/events{/privacy}", "received_events_url": "https://api.github.com/users/kangshan0910/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-17T01:25:40Z", "updated_at": "2018-01-17T01:36:13Z", "author_association": "NONE", "body_html": "<p>Thanks for your reply. After I frozen it, it still failed with the following debug information.</p>\n<p>INFO: Running command line: bazel-bin/tensorfow/contrib/lite/toco/toco '--input_file=/work/tensorflow/tmp/onet_frozen_graph.pb' '--output_file=/work/tensorflow/tmp/onet_48.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,48,48,3' '--input_array=input' '--output_arrays=prob1,conv6-2/conv6-2,conv6-3/conv6-3'<br>\n2018-01-17 09:28:02.503519: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1126] Converting unsupported operation: Exp<br>\n2018-01-17 09:28:02.504112: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 84 operators, 109 arrays (0 quantized)<br>\n2018-01-17 09:28:02.505725: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 42 operators, 66 arrays (0 quantized)<br>\n2018-01-17 09:28:02.506083: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 42 operators, 67 arrays (0 quantized)<br>\n2018-01-17 09:28:02.506469: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 41 operators, 65 arrays (0 quantized)<br>\n2018-01-17 09:28:02.506780: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 41 operators, 65 arrays (0 quantized)<br>\n2018-01-17 09:28:02.507037: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:313] Total transient array allocated size: 812544 bytes, theoretical optimal value: 812544 bytes.<br>\n2018-01-17 09:28:02.507102: I tensorflow/contrib/lite/toco/toco_tooling.cc:273] Estimated count of arithmetic ops: 0.0263383 billion (note that a multiply-add is counted as 2 ops).<br>\n2018-01-17 09:28:02.507214: F tensorflow/contrib/lite/toco/tflite/export.cc:303] Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: DIV, Exp, NEG, Sub, TensorFlowMax, TensorFlowSum.</p>", "body_text": "Thanks for your reply. After I frozen it, it still failed with the following debug information.\nINFO: Running command line: bazel-bin/tensorfow/contrib/lite/toco/toco '--input_file=/work/tensorflow/tmp/onet_frozen_graph.pb' '--output_file=/work/tensorflow/tmp/onet_48.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,48,48,3' '--input_array=input' '--output_arrays=prob1,conv6-2/conv6-2,conv6-3/conv6-3'\n2018-01-17 09:28:02.503519: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1126] Converting unsupported operation: Exp\n2018-01-17 09:28:02.504112: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 84 operators, 109 arrays (0 quantized)\n2018-01-17 09:28:02.505725: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 42 operators, 66 arrays (0 quantized)\n2018-01-17 09:28:02.506083: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 42 operators, 67 arrays (0 quantized)\n2018-01-17 09:28:02.506469: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 41 operators, 65 arrays (0 quantized)\n2018-01-17 09:28:02.506780: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 41 operators, 65 arrays (0 quantized)\n2018-01-17 09:28:02.507037: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:313] Total transient array allocated size: 812544 bytes, theoretical optimal value: 812544 bytes.\n2018-01-17 09:28:02.507102: I tensorflow/contrib/lite/toco/toco_tooling.cc:273] Estimated count of arithmetic ops: 0.0263383 billion (note that a multiply-add is counted as 2 ops).\n2018-01-17 09:28:02.507214: F tensorflow/contrib/lite/toco/tflite/export.cc:303] Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: DIV, Exp, NEG, Sub, TensorFlowMax, TensorFlowSum.", "body": "Thanks for your reply. After I frozen it, it still failed with the following debug information.\r\n\r\nINFO: Running command line: bazel-bin/tensorfow/contrib/lite/toco/toco '--input_file=/work/tensorflow/tmp/onet_frozen_graph.pb' '--output_file=/work/tensorflow/tmp/onet_48.tflite' '--input_format=TENSORFLOW_GRAPHDEF' '--output_format=TFLITE' '--inference_type=FLOAT' '--input_shape=1,48,48,3' '--input_array=input' '--output_arrays=prob1,conv6-2/conv6-2,conv6-3/conv6-3'\r\n2018-01-17 09:28:02.503519: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1126] Converting unsupported operation: Exp\r\n2018-01-17 09:28:02.504112: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 84 operators, 109 arrays (0 quantized)\r\n2018-01-17 09:28:02.505725: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 42 operators, 66 arrays (0 quantized)\r\n2018-01-17 09:28:02.506083: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 42 operators, 67 arrays (0 quantized)\r\n2018-01-17 09:28:02.506469: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 41 operators, 65 arrays (0 quantized)\r\n2018-01-17 09:28:02.506780: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 41 operators, 65 arrays (0 quantized)\r\n2018-01-17 09:28:02.507037: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:313] Total transient array allocated size: 812544 bytes, theoretical optimal value: 812544 bytes.\r\n2018-01-17 09:28:02.507102: I tensorflow/contrib/lite/toco/toco_tooling.cc:273] Estimated count of arithmetic ops: 0.0263383 billion (note that a multiply-add is counted as 2 ops).\r\n2018-01-17 09:28:02.507214: F tensorflow/contrib/lite/toco/tflite/export.cc:303] Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops. Here is a list of operators for which you will need custom implementations: DIV, Exp, NEG, Sub, TensorFlowMax, TensorFlowSum.\r\n\r\n"}
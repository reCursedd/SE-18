{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/77573610", "pull_request_review_id": null, "id": 77573610, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc3NTczNjEw", "diff_hunk": "@@ -1041,6 +1043,63 @@ def _DecodeGifShape(op):\n ops.RegisterShape('EncodePng')(common_shapes.call_cpp_shape_fn)\n \n \n+def _image_type(contents):\n+  \"\"\"Recognizes image byte headers\n+\n+  From portions of Python's imghdr library:\n+  https://hg.python.org/cpython/file/2.7/Lib/imghdr.py\n+  \"\"\"\n+  tests = []\n+\n+  def test_jpeg(h):\n+    \"\"\"JPEG data in JFIF format\"\"\"\n+    if h[6:10] == b'JFIF':\n+      return 'jpeg'\n+  tests.append(test_jpeg)\n+\n+  def test_exif(h):\n+    \"\"\"JPEG data in Exif format\"\"\"\n+    if h[6:10] == b'Exif':\n+      return 'jpeg'\n+  tests.append(test_exif)\n+\n+  def test_png(h):\n+    if h[:8] == b'\\211PNG\\r\\n\\032\\n':\n+      return 'png'\n+  tests.append(test_png)\n+\n+  def test_gif(h):\n+    \"\"\"GIF ('87 and '89 variants)\"\"\"\n+    if h[:6] in (b'GIF87a', b'GIF89a'):\n+      return 'gif'\n+  tests.append(test_gif)\n+\n+  for test in tests:\n+    res = test(contents)\n+    if res:\n+      return res\n+  return None\n+\n+\n+def decode_image(contents, channels=None, ratio=None, fancy_upscaling=None,\n+                 try_recover_truncated=None, acceptable_fraction=None,\n+                 name=None):\n+  \"\"\"Detects whether an image is a JPEG or PNG and decodes it to a uint8 tensor\n+", "path": "tensorflow/python/ops/image_ops.py", "position": null, "original_position": 55, "commit_id": "30a964bda83860f7398189669c3cd44afed1c0d8", "original_commit_id": "b70469db80d3b01beabaa3232c66e3fc216e66f0", "user": {"login": "samjabrahams", "id": 11607205, "node_id": "MDQ6VXNlcjExNjA3MjA1", "avatar_url": "https://avatars0.githubusercontent.com/u/11607205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samjabrahams", "html_url": "https://github.com/samjabrahams", "followers_url": "https://api.github.com/users/samjabrahams/followers", "following_url": "https://api.github.com/users/samjabrahams/following{/other_user}", "gists_url": "https://api.github.com/users/samjabrahams/gists{/gist_id}", "starred_url": "https://api.github.com/users/samjabrahams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samjabrahams/subscriptions", "organizations_url": "https://api.github.com/users/samjabrahams/orgs", "repos_url": "https://api.github.com/users/samjabrahams/repos", "events_url": "https://api.github.com/users/samjabrahams/events{/privacy}", "received_events_url": "https://api.github.com/users/samjabrahams/received_events", "type": "User", "site_admin": false}, "body": "Need to add more documentation here.\n", "created_at": "2016-09-06T04:57:14Z", "updated_at": "2016-11-30T21:00:32Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/4222#discussion_r77573610", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/77573610"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/4222#discussion_r77573610"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/4222"}}, "body_html": "<p>Need to add more documentation here.</p>", "body_text": "Need to add more documentation here."}
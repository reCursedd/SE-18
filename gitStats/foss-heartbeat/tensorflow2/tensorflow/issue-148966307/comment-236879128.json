{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/236879128", "html_url": "https://github.com/tensorflow/tensorflow/pull/2002#issuecomment-236879128", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2002", "id": 236879128, "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjg3OTEyOA==", "user": {"login": "avostryakov", "id": 174194, "node_id": "MDQ6VXNlcjE3NDE5NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/174194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avostryakov", "html_url": "https://github.com/avostryakov", "followers_url": "https://api.github.com/users/avostryakov/followers", "following_url": "https://api.github.com/users/avostryakov/following{/other_user}", "gists_url": "https://api.github.com/users/avostryakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/avostryakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avostryakov/subscriptions", "organizations_url": "https://api.github.com/users/avostryakov/orgs", "repos_url": "https://api.github.com/users/avostryakov/repos", "events_url": "https://api.github.com/users/avostryakov/events{/privacy}", "received_events_url": "https://api.github.com/users/avostryakov/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-02T11:39:07Z", "updated_at": "2016-08-02T11:39:07Z", "author_association": "NONE", "body_html": "<p>Ok, I see that FusedLSTM supposes to work with optimizers but there is the following error with stack trace when tf.train.AdamOptimizer(learning_rate).minimize(cost) is executed:</p>\n<p>File \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 196, in minimize<br>\ngrad_loss=grad_loss)<br>\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 253, in compute_gradients<br>\ncolocate_gradients_with_ops=colocate_gradients_with_ops)<br>\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/ops/gradients.py\", line 478, in gradients<br>\nin_grads = _AsList(grad_fn(op, *out_grads))<br>\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/lstm_ops.py\", line 266, in _LSTMFusedCellGrad<br>\nuse_peephole=op.get_attr(\"use_peephole\"))<br>\nFile \"\", line 132, in lstm_fused_cell_grad<br>\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op<br>\nop_def=op_def)<br>\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2319, in create_op<br>\nset_shapes_for_outputs(ret)<br>\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1711, in set_shapes_for_outputs<br>\nshapes = shape_func(op)<br>\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/lstm_ops.py\", line 297, in _LSTMFusedCellGradShape<br>\ntensor_shape.TensorShape([batch_size, cell_size * 4]),<br>\nTypeError: unsupported operand type(s) for *: 'NoneType' and 'int'</p>", "body_text": "Ok, I see that FusedLSTM supposes to work with optimizers but there is the following error with stack trace when tf.train.AdamOptimizer(learning_rate).minimize(cost) is executed:\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 196, in minimize\ngrad_loss=grad_loss)\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 253, in compute_gradients\ncolocate_gradients_with_ops=colocate_gradients_with_ops)\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/ops/gradients.py\", line 478, in gradients\nin_grads = _AsList(grad_fn(op, *out_grads))\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/lstm_ops.py\", line 266, in _LSTMFusedCellGrad\nuse_peephole=op.get_attr(\"use_peephole\"))\nFile \"\", line 132, in lstm_fused_cell_grad\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\nop_def=op_def)\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2319, in create_op\nset_shapes_for_outputs(ret)\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1711, in set_shapes_for_outputs\nshapes = shape_func(op)\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/lstm_ops.py\", line 297, in _LSTMFusedCellGradShape\ntensor_shape.TensorShape([batch_size, cell_size * 4]),\nTypeError: unsupported operand type(s) for *: 'NoneType' and 'int'", "body": "Ok, I see that FusedLSTM supposes to work with optimizers but there is the following error with stack trace when tf.train.AdamOptimizer(learning_rate).minimize(cost) is executed:\n\nFile \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 196, in minimize\n    grad_loss=grad_loss)\n  File \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 253, in compute_gradients\n    colocate_gradients_with_ops=colocate_gradients_with_ops)\n  File \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/ops/gradients.py\", line 478, in gradients\n    in_grads = _AsList(grad_fn(op, *out_grads))\n  File \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/lstm_ops.py\", line 266, in _LSTMFusedCellGrad\n    use_peephole=op.get_attr(\"use_peephole\"))\n  File \"<string>\", line 132, in lstm_fused_cell_grad\n  File \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 703, in apply_op\n    op_def=op_def)\n  File \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2319, in create_op\n    set_shapes_for_outputs(ret)\n  File \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1711, in set_shapes_for_outputs\n    shapes = shape_func(op)\n  File \"/Users/vostryakov/projects/senses/env/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/lstm_ops.py\", line 297, in _LSTMFusedCellGradShape\n    tensor_shape.TensorShape([batch_size, cell_size \\* 4]),\nTypeError: unsupported operand type(s) for *: 'NoneType' and 'int'\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20348", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20348/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20348/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20348/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20348", "id": 336298529, "node_id": "MDU6SXNzdWUzMzYyOTg1Mjk=", "number": 20348, "title": "tf.contrib.ffmpeg.decode_video error", "user": {"login": "rongou", "id": 497101, "node_id": "MDQ6VXNlcjQ5NzEwMQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/497101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rongou", "html_url": "https://github.com/rongou", "followers_url": "https://api.github.com/users/rongou/followers", "following_url": "https://api.github.com/users/rongou/following{/other_user}", "gists_url": "https://api.github.com/users/rongou/gists{/gist_id}", "starred_url": "https://api.github.com/users/rongou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rongou/subscriptions", "organizations_url": "https://api.github.com/users/rongou/orgs", "repos_url": "https://api.github.com/users/rongou/repos", "events_url": "https://api.github.com/users/rongou/events{/privacy}", "received_events_url": "https://api.github.com/users/rongou/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "rongou", "id": 497101, "node_id": "MDQ6VXNlcjQ5NzEwMQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/497101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rongou", "html_url": "https://github.com/rongou", "followers_url": "https://api.github.com/users/rongou/followers", "following_url": "https://api.github.com/users/rongou/following{/other_user}", "gists_url": "https://api.github.com/users/rongou/gists{/gist_id}", "starred_url": "https://api.github.com/users/rongou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rongou/subscriptions", "organizations_url": "https://api.github.com/users/rongou/orgs", "repos_url": "https://api.github.com/users/rongou/repos", "events_url": "https://api.github.com/users/rongou/events{/privacy}", "received_events_url": "https://api.github.com/users/rongou/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rongou", "id": 497101, "node_id": "MDQ6VXNlcjQ5NzEwMQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/497101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rongou", "html_url": "https://github.com/rongou", "followers_url": "https://api.github.com/users/rongou/followers", "following_url": "https://api.github.com/users/rongou/following{/other_user}", "gists_url": "https://api.github.com/users/rongou/gists{/gist_id}", "starred_url": "https://api.github.com/users/rongou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rongou/subscriptions", "organizations_url": "https://api.github.com/users/rongou/orgs", "repos_url": "https://api.github.com/users/rongou/repos", "events_url": "https://api.github.com/users/rongou/events{/privacy}", "received_events_url": "https://api.github.com/users/rongou/received_events", "type": "User", "site_admin": false}, {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-06-27T16:19:50Z", "updated_at": "2018-11-10T18:49:24Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Y</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 18.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: ('v1.8.0-4015-g44a1f241bc', '1.9.0-rc0')</li>\n<li><strong>Python version</strong>: 2.7.15rc1</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.15.0</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: 6.4.0</li>\n<li><strong>CUDA/cuDNN version</strong>: 9.0.176/7.0.5</li>\n<li><strong>GPU model and memory</strong>: GeForce GTX 1080 Ti (11GB)</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    movie_bin <span class=\"pl-k\">=</span> tf.read_file(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>5205acf1-3d30b48d.mov<span class=\"pl-pds\">'</span></span>)\n    movie <span class=\"pl-k\">=</span> tf.contrib.ffmpeg.decode_video(movie_bin)\n    movie_ev <span class=\"pl-k\">=</span> movie.eval()\n    <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>****<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">len</span>(movie_ev))</pre></div>\n<h3>Describe the problem</h3>\n<p>The <code>tf.contrib.ffmpeg.decode_video</code> op throws an error and causes a core dump.</p>\n<p>My ffmpeg version (<code>apt get install ffmpeg</code> on ubuntu 18.04):</p>\n<div class=\"highlight highlight-source-shell\"><pre>ffmpeg version 3.4.2-2 Copyright (c) 2000-2018 the FFmpeg developers\n  built with gcc 7 (Ubuntu 7.3.0-16ubuntu2)\n  configuration: --prefix=/usr --extra-version=2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100</pre></div>\n<h3>Source code / logs</h3>\n<div class=\"highlight highlight-source-shell\"><pre>2018-06-27 09:15:22.489692: F tensorflow/contrib/ffmpeg/default/ffmpeg_lib.cc:405] Non-OK-status: ReadInfoFile(stderr_filename, width, height, frames) status: Unknown: Not enough video info returned by FFmpeg [0, 720, 1280, 3]Could not <span class=\"pl-c1\">read</span> FFmpeg stderr file: /tmp/tmp_file_tensorflow_3_ILW8Ht.err\nAborted (core dumped)</pre></div>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Y\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): ('v1.8.0-4015-g44a1f241bc', '1.9.0-rc0')\nPython version: 2.7.15rc1\nBazel version (if compiling from source): 0.15.0\nGCC/Compiler version (if compiling from source): 6.4.0\nCUDA/cuDNN version: 9.0.176/7.0.5\nGPU model and memory: GeForce GTX 1080 Ti (11GB)\nExact command to reproduce:\n\nimport tensorflow as tf\nwith tf.Session() as sess:\n    movie_bin = tf.read_file('5205acf1-3d30b48d.mov')\n    movie = tf.contrib.ffmpeg.decode_video(movie_bin)\n    movie_ev = movie.eval()\n    print(\"****\", len(movie_ev))\nDescribe the problem\nThe tf.contrib.ffmpeg.decode_video op throws an error and causes a core dump.\nMy ffmpeg version (apt get install ffmpeg on ubuntu 18.04):\nffmpeg version 3.4.2-2 Copyright (c) 2000-2018 the FFmpeg developers\n  built with gcc 7 (Ubuntu 7.3.0-16ubuntu2)\n  configuration: --prefix=/usr --extra-version=2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nSource code / logs\n2018-06-27 09:15:22.489692: F tensorflow/contrib/ffmpeg/default/ffmpeg_lib.cc:405] Non-OK-status: ReadInfoFile(stderr_filename, width, height, frames) status: Unknown: Not enough video info returned by FFmpeg [0, 720, 1280, 3]Could not read FFmpeg stderr file: /tmp/tmp_file_tensorflow_3_ILW8Ht.err\nAborted (core dumped)", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Y\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 18.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: ('v1.8.0-4015-g44a1f241bc', '1.9.0-rc0')\r\n- **Python version**: 2.7.15rc1\r\n- **Bazel version (if compiling from source)**: 0.15.0\r\n- **GCC/Compiler version (if compiling from source)**: 6.4.0\r\n- **CUDA/cuDNN version**: 9.0.176/7.0.5\r\n- **GPU model and memory**: GeForce GTX 1080 Ti (11GB)\r\n- **Exact command to reproduce**:\r\n```python\r\nimport tensorflow as tf\r\nwith tf.Session() as sess:\r\n    movie_bin = tf.read_file('5205acf1-3d30b48d.mov')\r\n    movie = tf.contrib.ffmpeg.decode_video(movie_bin)\r\n    movie_ev = movie.eval()\r\n    print(\"****\", len(movie_ev))\r\n```\r\n### Describe the problem\r\n\r\nThe `tf.contrib.ffmpeg.decode_video` op throws an error and causes a core dump.\r\n\r\nMy ffmpeg version (`apt get install ffmpeg` on ubuntu 18.04):\r\n```shell\r\nffmpeg version 3.4.2-2 Copyright (c) 2000-2018 the FFmpeg developers\r\n  built with gcc 7 (Ubuntu 7.3.0-16ubuntu2)\r\n  configuration: --prefix=/usr --extra-version=2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\r\n  libavutil      55. 78.100 / 55. 78.100\r\n  libavcodec     57.107.100 / 57.107.100\r\n  libavformat    57. 83.100 / 57. 83.100\r\n  libavdevice    57. 10.100 / 57. 10.100\r\n  libavfilter     6.107.100 /  6.107.100\r\n  libavresample   3.  7.  0 /  3.  7.  0\r\n  libswscale      4.  8.100 /  4.  8.100\r\n  libswresample   2.  9.100 /  2.  9.100\r\n  libpostproc    54.  7.100 / 54.  7.100\r\n```\r\n### Source code / logs\r\n```shell\r\n2018-06-27 09:15:22.489692: F tensorflow/contrib/ffmpeg/default/ffmpeg_lib.cc:405] Non-OK-status: ReadInfoFile(stderr_filename, width, height, frames) status: Unknown: Not enough video info returned by FFmpeg [0, 720, 1280, 3]Could not read FFmpeg stderr file: /tmp/tmp_file_tensorflow_3_ILW8Ht.err\r\nAborted (core dumped)\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5867", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5867/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5867/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5867/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5867", "id": 191749359, "node_id": "MDU6SXNzdWUxOTE3NDkzNTk=", "number": 5867, "title": "optimize_for_inference.py should remove Dropout operations", "user": {"login": "mattrajca", "id": 123372, "node_id": "MDQ6VXNlcjEyMzM3Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/123372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattrajca", "html_url": "https://github.com/mattrajca", "followers_url": "https://api.github.com/users/mattrajca/followers", "following_url": "https://api.github.com/users/mattrajca/following{/other_user}", "gists_url": "https://api.github.com/users/mattrajca/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattrajca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattrajca/subscriptions", "organizations_url": "https://api.github.com/users/mattrajca/orgs", "repos_url": "https://api.github.com/users/mattrajca/repos", "events_url": "https://api.github.com/users/mattrajca/events{/privacy}", "received_events_url": "https://api.github.com/users/mattrajca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 19, "created_at": "2016-11-25T18:06:04Z", "updated_at": "2018-11-19T22:31:08Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>When I first tried using an exported MNIST model with TensorFlow on iOS, I got the following error:</p>\n<pre><code>Invalid argument: No OpKernel was registered to support Op 'RandomUniform' with these attrs.  Registered devices: [CPU], Registered kernels:\n  &lt;no registered kernels&gt;\n\n     [[Node: dropout/random_uniform/RandomUniform = RandomUniform[T=DT_INT32, dtype=DT_FLOAT, seed=0, seed2=0](dropout/Shape)]]\n</code></pre>\n<p>Since Dropout operations are no-ops during inference (we pass in a keep probability of 1), it would be nice if they were removed (or turned into no-ops of some kind that can be parsed and ignored by the iOS library).</p>\n<p>While I was able to work around this by explicitly exporting a separate graph that does not contain Dropout, it was pretty tedious and it would be nice if the <code>optimize_for_inference.py</code> script did this automatically.</p>\n<h3>Environment info</h3>\n<p>Operating System: macOS 10.12</p>\n<p>Installed version of CUDA and cuDNN:<br>\nNone</p>\n<p>Source:<br>\nThis week's tip-of-tree (around <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/d93d526cb804896004c1c20a41586ce0e2415b9c/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/d93d526cb804896004c1c20a41586ce0e2415b9c\"><tt>d93d526</tt></a>)</p>", "body_text": "When I first tried using an exported MNIST model with TensorFlow on iOS, I got the following error:\nInvalid argument: No OpKernel was registered to support Op 'RandomUniform' with these attrs.  Registered devices: [CPU], Registered kernels:\n  <no registered kernels>\n\n     [[Node: dropout/random_uniform/RandomUniform = RandomUniform[T=DT_INT32, dtype=DT_FLOAT, seed=0, seed2=0](dropout/Shape)]]\n\nSince Dropout operations are no-ops during inference (we pass in a keep probability of 1), it would be nice if they were removed (or turned into no-ops of some kind that can be parsed and ignored by the iOS library).\nWhile I was able to work around this by explicitly exporting a separate graph that does not contain Dropout, it was pretty tedious and it would be nice if the optimize_for_inference.py script did this automatically.\nEnvironment info\nOperating System: macOS 10.12\nInstalled version of CUDA and cuDNN:\nNone\nSource:\nThis week's tip-of-tree (around d93d526)", "body": "When I first tried using an exported MNIST model with TensorFlow on iOS, I got the following error:\r\n\r\n    Invalid argument: No OpKernel was registered to support Op 'RandomUniform' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n      <no registered kernels>\r\n    \r\n         [[Node: dropout/random_uniform/RandomUniform = RandomUniform[T=DT_INT32, dtype=DT_FLOAT, seed=0, seed2=0](dropout/Shape)]]\r\n\r\nSince Dropout operations are no-ops during inference (we pass in a keep probability of 1), it would be nice if they were removed (or turned into no-ops of some kind that can be parsed and ignored by the iOS library).\r\n\r\nWhile I was able to work around this by explicitly exporting a separate graph that does not contain Dropout, it was pretty tedious and it would be nice if the `optimize_for_inference.py` script did this automatically.\r\n\r\n### Environment info\r\nOperating System: macOS 10.12\r\n\r\nInstalled version of CUDA and cuDNN: \r\nNone\r\n\r\nSource:\r\nThis week's tip-of-tree (around d93d526cb804896004c1c20a41586ce0e2415b9c)\r\n"}
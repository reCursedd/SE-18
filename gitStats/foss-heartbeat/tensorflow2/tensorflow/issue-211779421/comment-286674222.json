{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/286674222", "html_url": "https://github.com/tensorflow/tensorflow/issues/8059#issuecomment-286674222", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8059", "id": 286674222, "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjY3NDIyMg==", "user": {"login": "rtjarvis", "id": 17404269, "node_id": "MDQ6VXNlcjE3NDA0MjY5", "avatar_url": "https://avatars1.githubusercontent.com/u/17404269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rtjarvis", "html_url": "https://github.com/rtjarvis", "followers_url": "https://api.github.com/users/rtjarvis/followers", "following_url": "https://api.github.com/users/rtjarvis/following{/other_user}", "gists_url": "https://api.github.com/users/rtjarvis/gists{/gist_id}", "starred_url": "https://api.github.com/users/rtjarvis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rtjarvis/subscriptions", "organizations_url": "https://api.github.com/users/rtjarvis/orgs", "repos_url": "https://api.github.com/users/rtjarvis/repos", "events_url": "https://api.github.com/users/rtjarvis/events{/privacy}", "received_events_url": "https://api.github.com/users/rtjarvis/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-15T08:34:48Z", "updated_at": "2017-03-15T08:50:21Z", "author_association": "NONE", "body_html": "<p>I am having a similar issue. I am using my own retrained model (which I have stripped) and put in assets. I have updated ClassifierActivity with appropriate values.</p>\n<p>I am running on a real android device (API 24) and I get \"No implementation found for long org.tensorflow.contrib.android.RunStats.allocate()\" from logcat. Both lib/armeabi-v7a/libtensorflow_demo.so and lib/armeabi-v7a/libtensorflow_inference.so are in the resulting APK.</p>\n<p>Full stack:<br>\n<code> E/AndroidRuntime: FATAL EXCEPTION: main Process: org.tensorflow.demo, PID: 13456 java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization(). at org.tensorflow.Graph.importGraphDef(Native Method) at org.tensorflow.Graph.importGraphDef(Graph.java:118) at org.tensorflow.Graph.importGraphDef(Graph.java:102) at org.tensorflow.contrib.android.TensorFlowInferenceInterface.load(TensorFlowInferenceInterface.java:414) at org.tensorflow.contrib.android.TensorFlowInferenceInterface.initializeTensorFlow(TensorFlowInferenceInterface.java:95) at org.tensorflow.demo.TensorFlowImageClassifier.create(TensorFlowImageClassifier.java:106) at org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:118) at org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158) at org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:408) at org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:415) at org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:64) at org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:95) at android.view.TextureView.getHardwareLayer(TextureView.java:387) at android.view.TextureView.draw(TextureView.java:325) at android.view.View.updateDisplayListIfDirty(View.java:16116) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.updateDisplayListIfDirty(View.java:16111) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.draw(View.java:17137) at android.view.View.updateDisplayListIfDirty(View.java:16116) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.updateDisplayListIfDirty(View.java:16111) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.updateDisplayListIfDirty(View.java:16111) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.draw(View.java:17137) at com.android.internal.policy.DecorView.draw(DecorView.java:751) at android.view.View.updateDisplayListIfDirty(View.java:16116) at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:656) at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:662) at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:770) at android.view.ViewRootImpl.draw(ViewRootImpl.java:2830) at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2638) at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2245) at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1272) at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6396) at android.view.Choreographer$CallbackRecord.run(Choreographer.java:871) at android.view.Choreographer.doCallbacks(Choreographer.java:683) at android.view.Choreographer.doFrame(Choreographer.java:619) at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:857) at android.os.Handler.handleCallback(Handler.java:751) at android.os.Handler.dispatchMessage(Handler.java:95) at android.os.Looper.loop(Looper.java:154) at android.app.ActivityThread.main(ActivityThread.java:6209) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:865) 03-15 08:16:54.573 13456-13456/org.tensorflow.demo E/AndroidRuntime:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:755)</code></p>\n<p>Also - I'm trying to build this all through Android Studio (ie I've not done a bazel build first)<br>\nAnyone help?</p>", "body_text": "I am having a similar issue. I am using my own retrained model (which I have stripped) and put in assets. I have updated ClassifierActivity with appropriate values.\nI am running on a real android device (API 24) and I get \"No implementation found for long org.tensorflow.contrib.android.RunStats.allocate()\" from logcat. Both lib/armeabi-v7a/libtensorflow_demo.so and lib/armeabi-v7a/libtensorflow_inference.so are in the resulting APK.\nFull stack:\n E/AndroidRuntime: FATAL EXCEPTION: main Process: org.tensorflow.demo, PID: 13456 java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization(). at org.tensorflow.Graph.importGraphDef(Native Method) at org.tensorflow.Graph.importGraphDef(Graph.java:118) at org.tensorflow.Graph.importGraphDef(Graph.java:102) at org.tensorflow.contrib.android.TensorFlowInferenceInterface.load(TensorFlowInferenceInterface.java:414) at org.tensorflow.contrib.android.TensorFlowInferenceInterface.initializeTensorFlow(TensorFlowInferenceInterface.java:95) at org.tensorflow.demo.TensorFlowImageClassifier.create(TensorFlowImageClassifier.java:106) at org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:118) at org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158) at org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:408) at org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:415) at org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:64) at org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:95) at android.view.TextureView.getHardwareLayer(TextureView.java:387) at android.view.TextureView.draw(TextureView.java:325) at android.view.View.updateDisplayListIfDirty(View.java:16116) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.updateDisplayListIfDirty(View.java:16111) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.draw(View.java:17137) at android.view.View.updateDisplayListIfDirty(View.java:16116) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.updateDisplayListIfDirty(View.java:16111) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.updateDisplayListIfDirty(View.java:16111) at android.view.View.draw(View.java:16900) at android.view.ViewGroup.drawChild(ViewGroup.java:3764) at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550) at android.view.View.draw(View.java:17137) at com.android.internal.policy.DecorView.draw(DecorView.java:751) at android.view.View.updateDisplayListIfDirty(View.java:16116) at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:656) at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:662) at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:770) at android.view.ViewRootImpl.draw(ViewRootImpl.java:2830) at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2638) at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2245) at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1272) at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6396) at android.view.Choreographer$CallbackRecord.run(Choreographer.java:871) at android.view.Choreographer.doCallbacks(Choreographer.java:683) at android.view.Choreographer.doFrame(Choreographer.java:619) at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:857) at android.os.Handler.handleCallback(Handler.java:751) at android.os.Handler.dispatchMessage(Handler.java:95) at android.os.Looper.loop(Looper.java:154) at android.app.ActivityThread.main(ActivityThread.java:6209) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:865) 03-15 08:16:54.573 13456-13456/org.tensorflow.demo E/AndroidRuntime:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:755)\nAlso - I'm trying to build this all through Android Studio (ie I've not done a bazel build first)\nAnyone help?", "body": "I am having a similar issue. I am using my own retrained model (which I have stripped) and put in assets. I have updated ClassifierActivity with appropriate values. \r\n\r\nI am running on a real android device (API 24) and I get \"No implementation found for long org.tensorflow.contrib.android.RunStats.allocate()\" from logcat. Both lib/armeabi-v7a/libtensorflow_demo.so and lib/armeabi-v7a/libtensorflow_inference.so are in the resulting APK.\r\n\r\nFull stack:\r\n`\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n                                                                     Process: org.tensorflow.demo, PID: 13456\r\n                                                                     java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization().\r\n                                                                         at org.tensorflow.Graph.importGraphDef(Native Method)\r\n                                                                         at org.tensorflow.Graph.importGraphDef(Graph.java:118)\r\n                                                                         at org.tensorflow.Graph.importGraphDef(Graph.java:102)\r\n                                                                         at org.tensorflow.contrib.android.TensorFlowInferenceInterface.load(TensorFlowInferenceInterface.java:414)\r\n                                                                         at org.tensorflow.contrib.android.TensorFlowInferenceInterface.initializeTensorFlow(TensorFlowInferenceInterface.java:95)\r\n                                                                         at org.tensorflow.demo.TensorFlowImageClassifier.create(TensorFlowImageClassifier.java:106)\r\n                                                                         at org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:118)\r\n                                                                         at org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158)\r\n                                                                         at org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:408)\r\n                                                                         at org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:415)\r\n                                                                         at org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:64)\r\n                                                                         at org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:95)\r\n                                                                         at android.view.TextureView.getHardwareLayer(TextureView.java:387)\r\n                                                                         at android.view.TextureView.draw(TextureView.java:325)\r\n                                                                         at android.view.View.updateDisplayListIfDirty(View.java:16116)\r\n                                                                         at android.view.View.draw(View.java:16900)\r\n                                                                         at android.view.ViewGroup.drawChild(ViewGroup.java:3764)\r\n                                                                         at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550)\r\n                                                                         at android.view.View.updateDisplayListIfDirty(View.java:16111)\r\n                                                                         at android.view.View.draw(View.java:16900)\r\n                                                                         at android.view.ViewGroup.drawChild(ViewGroup.java:3764)\r\n                                                                         at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550)\r\n                                                                         at android.view.View.draw(View.java:17137)\r\n                                                                         at android.view.View.updateDisplayListIfDirty(View.java:16116)\r\n                                                                         at android.view.View.draw(View.java:16900)\r\n                                                                         at android.view.ViewGroup.drawChild(ViewGroup.java:3764)\r\n                                                                         at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550)\r\n                                                                         at android.view.View.updateDisplayListIfDirty(View.java:16111)\r\n                                                                         at android.view.View.draw(View.java:16900)\r\n                                                                         at android.view.ViewGroup.drawChild(ViewGroup.java:3764)\r\n                                                                         at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550)\r\n                                                                         at android.view.View.updateDisplayListIfDirty(View.java:16111)\r\n                                                                         at android.view.View.draw(View.java:16900)\r\n                                                                         at android.view.ViewGroup.drawChild(ViewGroup.java:3764)\r\n                                                                         at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3550)\r\n                                                                         at android.view.View.draw(View.java:17137)\r\n                                                                         at com.android.internal.policy.DecorView.draw(DecorView.java:751)\r\n                                                                         at android.view.View.updateDisplayListIfDirty(View.java:16116)\r\n                                                                         at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:656)\r\n                                                                         at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:662)\r\n                                                                         at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:770)\r\n                                                                         at android.view.ViewRootImpl.draw(ViewRootImpl.java:2830)\r\n                                                                         at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2638)\r\n                                                                         at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2245)\r\n                                                                         at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1272)\r\n                                                                         at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6396)\r\n                                                                         at android.view.Choreographer$CallbackRecord.run(Choreographer.java:871)\r\n                                                                         at android.view.Choreographer.doCallbacks(Choreographer.java:683)\r\n                                                                         at android.view.Choreographer.doFrame(Choreographer.java:619)\r\n                                                                         at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:857)\r\n                                                                         at android.os.Handler.handleCallback(Handler.java:751)\r\n                                                                         at android.os.Handler.dispatchMessage(Handler.java:95)\r\n                                                                         at android.os.Looper.loop(Looper.java:154)\r\n                                                                         at android.app.ActivityThread.main(ActivityThread.java:6209)\r\n                                                                         at java.lang.reflect.Method.invoke(Native Method)\r\n                                                                         at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:865)\r\n03-15 08:16:54.573 13456-13456/org.tensorflow.demo E/AndroidRuntime:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:755)`\r\n\r\n\r\nAlso - I'm trying to build this all through Android Studio (ie I've not done a bazel build first)\r\n Anyone help?"}
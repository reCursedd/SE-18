{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15521", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15521/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15521/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15521/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15521", "id": 283614329, "node_id": "MDU6SXNzdWUyODM2MTQzMjk=", "number": 15521, "title": "Bug/Feature: constant_folding FP16 ", "user": {"login": "KillPinguin", "id": 11447989, "node_id": "MDQ6VXNlcjExNDQ3OTg5", "avatar_url": "https://avatars3.githubusercontent.com/u/11447989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KillPinguin", "html_url": "https://github.com/KillPinguin", "followers_url": "https://api.github.com/users/KillPinguin/followers", "following_url": "https://api.github.com/users/KillPinguin/following{/other_user}", "gists_url": "https://api.github.com/users/KillPinguin/gists{/gist_id}", "starred_url": "https://api.github.com/users/KillPinguin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KillPinguin/subscriptions", "organizations_url": "https://api.github.com/users/KillPinguin/orgs", "repos_url": "https://api.github.com/users/KillPinguin/repos", "events_url": "https://api.github.com/users/KillPinguin/events{/privacy}", "received_events_url": "https://api.github.com/users/KillPinguin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-20T16:09:52Z", "updated_at": "2018-01-11T23:51:45Z", "closed_at": "2018-01-11T23:03:48Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nRHEL 7</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nSource</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n('v1.3.0-rc1-6207-ge210cb1', '1.4.0')</li>\n<li><strong>Python version</strong>:<br>\npython2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\nbazel 0.9.0</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:<br>\ngcc 4.8</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>python tensorflow/models/tutorial/images/convolutional.py --use_fp16</p>\n<h3>Describe the problem</h3>\n<p>When using FP16 in e.g. the case listed above, the following error occurs:<br>\nE tensorflow/core/grappler/optimizers/constant_folding.cc:1272] Unexpected type half<br>\nE tensorflow/core/grappler/optimizers/constant_folding.cc:1242] Unexpected type half</p>\n<p>When looking into constant_folding.cc, i found out FP16 support exists at given lines, but is commented out.<br>\nWhy is this not yet included in Tensorflow?</p>\n<p>As far as I can see, this is more of a feature request than a bug report, since these code lines simply check if computational effort can be reduced (if the matrix is zero or one)</p>\n<p>Also when using above command, the model trains until step 1100, then the learning rate drops to 0 (a known FP16 problem). Still it's annoying to encounter this in an official tutorial file.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nRHEL 7\nTensorFlow installed from (source or binary):\nSource\nTensorFlow version (use command below):\n('v1.3.0-rc1-6207-ge210cb1', '1.4.0')\nPython version:\npython2.7\nBazel version (if compiling from source):\nbazel 0.9.0\nGCC/Compiler version (if compiling from source):\ngcc 4.8\nExact command to reproduce:\n\npython tensorflow/models/tutorial/images/convolutional.py --use_fp16\nDescribe the problem\nWhen using FP16 in e.g. the case listed above, the following error occurs:\nE tensorflow/core/grappler/optimizers/constant_folding.cc:1272] Unexpected type half\nE tensorflow/core/grappler/optimizers/constant_folding.cc:1242] Unexpected type half\nWhen looking into constant_folding.cc, i found out FP16 support exists at given lines, but is commented out.\nWhy is this not yet included in Tensorflow?\nAs far as I can see, this is more of a feature request than a bug report, since these code lines simply check if computational effort can be reduced (if the matrix is zero or one)\nAlso when using above command, the model trains until step 1100, then the learning rate drops to 0 (a known FP16 problem). Still it's annoying to encounter this in an official tutorial file.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nRHEL 7\r\n- **TensorFlow installed from (source or binary)**:\r\nSource\r\n- **TensorFlow version (use command below)**:\r\n('v1.3.0-rc1-6207-ge210cb1', '1.4.0')\r\n- **Python version**: \r\npython2.7\r\n- **Bazel version (if compiling from source)**:\r\nbazel 0.9.0\r\n- **GCC/Compiler version (if compiling from source)**:\r\ngcc 4.8\r\n- **Exact command to reproduce**:\r\n\r\npython tensorflow/models/tutorial/images/convolutional.py --use_fp16\r\n\r\n### Describe the problem\r\nWhen using FP16 in e.g. the case listed above, the following error occurs:\r\nE tensorflow/core/grappler/optimizers/constant_folding.cc:1272] Unexpected type half\r\nE tensorflow/core/grappler/optimizers/constant_folding.cc:1242] Unexpected type half\r\n\r\nWhen looking into constant_folding.cc, i found out FP16 support exists at given lines, but is commented out.\r\nWhy is this not yet included in Tensorflow?\r\n\r\nAs far as I can see, this is more of a feature request than a bug report, since these code lines simply check if computational effort can be reduced (if the matrix is zero or one)\r\n\r\nAlso when using above command, the model trains until step 1100, then the learning rate drops to 0 (a known FP16 problem). Still it's annoying to encounter this in an official tutorial file.\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9247", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9247/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9247/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9247/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/9247", "id": 221994311, "node_id": "MDU6SXNzdWUyMjE5OTQzMTE=", "number": 9247, "title": "Exceptions for nest._recursive_assert_same_structure", "user": {"login": "j-min", "id": 18069263, "node_id": "MDQ6VXNlcjE4MDY5MjYz", "avatar_url": "https://avatars3.githubusercontent.com/u/18069263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j-min", "html_url": "https://github.com/j-min", "followers_url": "https://api.github.com/users/j-min/followers", "following_url": "https://api.github.com/users/j-min/following{/other_user}", "gists_url": "https://api.github.com/users/j-min/gists{/gist_id}", "starred_url": "https://api.github.com/users/j-min/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j-min/subscriptions", "organizations_url": "https://api.github.com/users/j-min/orgs", "repos_url": "https://api.github.com/users/j-min/repos", "events_url": "https://api.github.com/users/j-min/events{/privacy}", "received_events_url": "https://api.github.com/users/j-min/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-16T06:41:13Z", "updated_at": "2017-04-16T06:52:54Z", "closed_at": "2017-04-16T06:52:54Z", "author_association": "NONE", "body_html": "<p>I see <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/util/nest.py#L102\"><code>nest._recursive_assert_same_structure</code></a> is used as a validator that makes sure that two nested sequences have same structure. However, due to its direct use of <code>zip(nest1, nest2)</code>, it doesn't make any error in this simple case.<br>\n<code>_recursive_assert_same_structure([[1,2,3], [2,3,[4]]], [[1,2,3,3,4,5]], False)</code></p>\n<p>It can give ValueError when the second argument is changed as  below.<br>\n<code>_recursive_assert_same_structure([[1,2,3], [2,3,[4]]], [1,2,3,3,4,5], False)</code><br>\n=&gt; ValueError: The two structures don't have the same nested structure. First structure: [1, 2, 3], second structure: 1.</p>", "body_text": "I see nest._recursive_assert_same_structure is used as a validator that makes sure that two nested sequences have same structure. However, due to its direct use of zip(nest1, nest2), it doesn't make any error in this simple case.\n_recursive_assert_same_structure([[1,2,3], [2,3,[4]]], [[1,2,3,3,4,5]], False)\nIt can give ValueError when the second argument is changed as  below.\n_recursive_assert_same_structure([[1,2,3], [2,3,[4]]], [1,2,3,3,4,5], False)\n=> ValueError: The two structures don't have the same nested structure. First structure: [1, 2, 3], second structure: 1.", "body": "I see [`nest._recursive_assert_same_structure`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/util/nest.py#L102) is used as a validator that makes sure that two nested sequences have same structure. However, due to its direct use of `zip(nest1, nest2)`, it doesn't make any error in this simple case.\r\n`_recursive_assert_same_structure([[1,2,3], [2,3,[4]]], [[1,2,3,3,4,5]], False)`\r\n\r\nIt can give ValueError when the second argument is changed as  below.\r\n`_recursive_assert_same_structure([[1,2,3], [2,3,[4]]], [1,2,3,3,4,5], False)`\r\n=> ValueError: The two structures don't have the same nested structure. First structure: [1, 2, 3], second structure: 1."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8561", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8561/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8561/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8561/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8561", "id": 215499786, "node_id": "MDU6SXNzdWUyMTU0OTk3ODY=", "number": 8561, "title": "CTC_Greedy_Decoder outputs sum of logits and not logprobs", "user": {"login": "Garvys", "id": 11553939, "node_id": "MDQ6VXNlcjExNTUzOTM5", "avatar_url": "https://avatars3.githubusercontent.com/u/11553939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Garvys", "html_url": "https://github.com/Garvys", "followers_url": "https://api.github.com/users/Garvys/followers", "following_url": "https://api.github.com/users/Garvys/following{/other_user}", "gists_url": "https://api.github.com/users/Garvys/gists{/gist_id}", "starred_url": "https://api.github.com/users/Garvys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Garvys/subscriptions", "organizations_url": "https://api.github.com/users/Garvys/orgs", "repos_url": "https://api.github.com/users/Garvys/repos", "events_url": "https://api.github.com/users/Garvys/events{/privacy}", "received_events_url": "https://api.github.com/users/Garvys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-03-20T17:40:19Z", "updated_at": "2017-06-16T21:15:28Z", "closed_at": "2017-06-16T21:15:28Z", "author_association": "CONTRIBUTOR", "body_html": "<h2>CTC_Greedy_Decoder outputs sum of logits and not logprobs</h2>\n<p>I have been writing my own CTC_Greedy_Decoder function in order to decode the output of a RNN trained with the CTC loss. To check my version, I decided to compare my outputs with TensorFlow's ones. We had the same first output (the decoded label) but we had big differences on second (the logprobs).</p>\n<p>After some debugging, I figured out that TF's GreedyDecoder outputs the opposite of the sum of the higher logit of each column. Whereas, in the documentation it is written that we should expect logprobs.</p>\n<h3>How to fix:</h3>\n<ul>\n<li>Change the documentation from logprobs to logits</li>\n<li>Instead of summing the logits, it would be  better to sum the higher logit of each column minus the logsumexp of the column. With that fix, the output will be logprobs as written in the documentation.</li>\n</ul>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 16.04<br>\nTensorFlow: 1.0.1 running on CPU</p>", "body_text": "CTC_Greedy_Decoder outputs sum of logits and not logprobs\nI have been writing my own CTC_Greedy_Decoder function in order to decode the output of a RNN trained with the CTC loss. To check my version, I decided to compare my outputs with TensorFlow's ones. We had the same first output (the decoded label) but we had big differences on second (the logprobs).\nAfter some debugging, I figured out that TF's GreedyDecoder outputs the opposite of the sum of the higher logit of each column. Whereas, in the documentation it is written that we should expect logprobs.\nHow to fix:\n\nChange the documentation from logprobs to logits\nInstead of summing the logits, it would be  better to sum the higher logit of each column minus the logsumexp of the column. With that fix, the output will be logprobs as written in the documentation.\n\nEnvironment info\nOperating System: Ubuntu 16.04\nTensorFlow: 1.0.1 running on CPU", "body": "## CTC_Greedy_Decoder outputs sum of logits and not logprobs\r\n\r\nI have been writing my own CTC_Greedy_Decoder function in order to decode the output of a RNN trained with the CTC loss. To check my version, I decided to compare my outputs with TensorFlow's ones. We had the same first output (the decoded label) but we had big differences on second (the logprobs).\r\n\r\nAfter some debugging, I figured out that TF's GreedyDecoder outputs the opposite of the sum of the higher logit of each column. Whereas, in the documentation it is written that we should expect logprobs. \r\n\r\n### How to fix:\r\n- Change the documentation from logprobs to logits\r\n- Instead of summing the logits, it would be  better to sum the higher logit of each column minus the logsumexp of the column. With that fix, the output will be logprobs as written in the documentation.\r\n\r\n### Environment info\r\nOperating System: Ubuntu 16.04\r\nTensorFlow: 1.0.1 running on CPU\r\n\r\n\r\n"}
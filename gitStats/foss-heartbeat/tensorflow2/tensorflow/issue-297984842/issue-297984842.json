{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17087", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17087/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17087/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17087/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17087", "id": 297984842, "node_id": "MDU6SXNzdWUyOTc5ODQ4NDI=", "number": 17087, "title": "TF Lite example segmentation fault", "user": {"login": "mgkbeer", "id": 36466983, "node_id": "MDQ6VXNlcjM2NDY2OTgz", "avatar_url": "https://avatars2.githubusercontent.com/u/36466983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgkbeer", "html_url": "https://github.com/mgkbeer", "followers_url": "https://api.github.com/users/mgkbeer/followers", "following_url": "https://api.github.com/users/mgkbeer/following{/other_user}", "gists_url": "https://api.github.com/users/mgkbeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgkbeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgkbeer/subscriptions", "organizations_url": "https://api.github.com/users/mgkbeer/orgs", "repos_url": "https://api.github.com/users/mgkbeer/repos", "events_url": "https://api.github.com/users/mgkbeer/events{/privacy}", "received_events_url": "https://api.github.com/users/mgkbeer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-17T06:51:31Z", "updated_at": "2018-02-18T07:05:49Z", "closed_at": "2018-02-18T07:05:49Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<p>OS Platform and Distribution - Ubuntu 16.04.2 LTS<br>\nTensorFlow installed from: <a href=\"https://github.com/tensorflow/tensorflow.git\">https://github.com/tensorflow/tensorflow.git</a><br>\nTensorFlow version: last commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/f66e9f92820804b7c2b4698147d07d5d2277c62f/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/f66e9f92820804b7c2b4698147d07d5d2277c62f\"><tt>f66e9f9</tt></a><br>\nBazel version: Build label: 0.8.1- (@non-git)<br>\nCUDA/cuDNN version N/A<br>\nGPU model and memory N/A<br>\nExact command to reproduce: bazel build --verbose_failures --config opt --cxxopt=-std=c++11 --config monolithic //tensorflow/contrib/lite/examples/label_image:label_image<br>\n./label_image</p>\n<p>== compiler =====================================================<br>\nc++ (Ubuntu/Linaro 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609<br>\n== uname -a =====================================================<br>\nLinux qds101 4.4.65 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP PREEMPT Mon Sep 18 13:34:00 CDT 2017 aarch64 aarch64 aarch64 GNU/Linux<br>\n== check pips ===================================================<br>\nnumpy (1.13.3)<br>\nprotobuf (3.4.0)<br>\ntensorflow (1.3.0)<br>\ntensorflow-tensorboard (0.1.5)<br>\n== check for virtualenv =========================================<br>\nFalse<br>\n== tensorflow import ============================================<br>\ntf.VERSION = 1.3.0<br>\ntf.GIT_VERSION = v1.3.0-rc1-1607-gbe4e5ef<br>\ntf.COMPILER_VERSION = v1.3.0-rc1-1607-gbe4e5ef</p>\n<h3>Describe the problem</h3>\n<p>I compile example/label_image nad when I run it I get segmentation fault.<br>\nError comes from the following line in resize_bilinear.c (called from label_image.c resize(interpreter-&gt;typed_tensor(input), in, image_height,<br>\nimage_width, image_channels, wanted_height, wanted_width,<br>\nwanted_channels, s);)</p>\n<p>type::ResizeBilinear(GetTensorData(input), GetTensorDims(input),   <br>\nGetTensorData(size), GetTensorDims(size),     <br>\nGetTensorData(output), GetTensorDims(output), <br>\nparams-&gt;align_corners)</p>\n<p>because params is NULL<br>\nI looked at code and i do not believe that this variable (builtin_data) ever initialized in this case because resize is called not within graph</p>\n<h3>Source code / logs</h3>\n<p>user@qds101:~/ml/tf_lite/tensorflow/tensorflow/contrib/lite/examples/label_image/exec$ ./label_image -v 1<br>\nnnapi error: unable to open library libneuralnetworks.so<br>\nLoaded model ./vgg16_conv1_opt.tflite<br>\nresolved reporter<br>\ntensors size: 6<br>\nnodes size: 1<br>\ninputs: 1<br>\ninput(0) name: Placeholder<br>\n0: Placeholder, 602112, 1, 0, 0<br>\n1: conv1_1, 12845056, 1, 0, 0<br>\n2: conv1_1/Conv2D_bias, 256, 1, 0, 0<br>\n3: conv1_1/weights, 6912, 1, 0, 0<br>\nlen: 150666<br>\nwidth, height, channels: 224, 224, 3<br>\ninput: 0<br>\nnumber of inputs: 1<br>\nnumber of outputs: 1<br>\nInterpreter has 6 tensors and 1 nodes<br>\nInputs: 0<br>\nOutputs: 1</p>\n<p>Tensor   0 kTfLiteFloat32  kTfLiteArenaRw     602112 bytes ( 0.6 MB)  1 224 224 3</p>\n<p>Tensor   1 kTfLiteFloat32  kTfLiteArenaRw   12845056 bytes (12.2 MB)  1 224 224 64</p>\n<p>Tensor   2 kTfLiteFloat32   kTfLiteMmapRo        256 bytes ( 0.0 MB)  64</p>\n<p>Tensor   3 kTfLiteFloat32   kTfLiteMmapRo       6912 bytes ( 0.0 MB)  64 3 3 3</p>\n<p>Tensor   4 kTfLiteFloat32  kTfLiteArenaRw    5419008 bytes ( 5.2 MB)  1 224 224 27</p>\n<p>Tensor   5 kTfLiteFloat32  kTfLiteDynamic       6912 bytes ( 0.0 MB)  27 64</p>\n<p>Node   0 Operator Builtin Code   3<br>\nInputs: 0 3 2<br>\nOutputs: 1<br>\nparams = (nil) //my print<br>\nSegmentation fault</p>", "body_text": "System information\nOS Platform and Distribution - Ubuntu 16.04.2 LTS\nTensorFlow installed from: https://github.com/tensorflow/tensorflow.git\nTensorFlow version: last commit f66e9f9\nBazel version: Build label: 0.8.1- (@non-git)\nCUDA/cuDNN version N/A\nGPU model and memory N/A\nExact command to reproduce: bazel build --verbose_failures --config opt --cxxopt=-std=c++11 --config monolithic //tensorflow/contrib/lite/examples/label_image:label_image\n./label_image\n== compiler =====================================================\nc++ (Ubuntu/Linaro 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\n== uname -a =====================================================\nLinux qds101 4.4.65 #1 SMP PREEMPT Mon Sep 18 13:34:00 CDT 2017 aarch64 aarch64 aarch64 GNU/Linux\n== check pips ===================================================\nnumpy (1.13.3)\nprotobuf (3.4.0)\ntensorflow (1.3.0)\ntensorflow-tensorboard (0.1.5)\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.3.0\ntf.GIT_VERSION = v1.3.0-rc1-1607-gbe4e5ef\ntf.COMPILER_VERSION = v1.3.0-rc1-1607-gbe4e5ef\nDescribe the problem\nI compile example/label_image nad when I run it I get segmentation fault.\nError comes from the following line in resize_bilinear.c (called from label_image.c resize(interpreter->typed_tensor(input), in, image_height,\nimage_width, image_channels, wanted_height, wanted_width,\nwanted_channels, s);)\ntype::ResizeBilinear(GetTensorData(input), GetTensorDims(input),   \nGetTensorData(size), GetTensorDims(size),     \nGetTensorData(output), GetTensorDims(output), \nparams->align_corners)\nbecause params is NULL\nI looked at code and i do not believe that this variable (builtin_data) ever initialized in this case because resize is called not within graph\nSource code / logs\nuser@qds101:~/ml/tf_lite/tensorflow/tensorflow/contrib/lite/examples/label_image/exec$ ./label_image -v 1\nnnapi error: unable to open library libneuralnetworks.so\nLoaded model ./vgg16_conv1_opt.tflite\nresolved reporter\ntensors size: 6\nnodes size: 1\ninputs: 1\ninput(0) name: Placeholder\n0: Placeholder, 602112, 1, 0, 0\n1: conv1_1, 12845056, 1, 0, 0\n2: conv1_1/Conv2D_bias, 256, 1, 0, 0\n3: conv1_1/weights, 6912, 1, 0, 0\nlen: 150666\nwidth, height, channels: 224, 224, 3\ninput: 0\nnumber of inputs: 1\nnumber of outputs: 1\nInterpreter has 6 tensors and 1 nodes\nInputs: 0\nOutputs: 1\nTensor   0 kTfLiteFloat32  kTfLiteArenaRw     602112 bytes ( 0.6 MB)  1 224 224 3\nTensor   1 kTfLiteFloat32  kTfLiteArenaRw   12845056 bytes (12.2 MB)  1 224 224 64\nTensor   2 kTfLiteFloat32   kTfLiteMmapRo        256 bytes ( 0.0 MB)  64\nTensor   3 kTfLiteFloat32   kTfLiteMmapRo       6912 bytes ( 0.0 MB)  64 3 3 3\nTensor   4 kTfLiteFloat32  kTfLiteArenaRw    5419008 bytes ( 5.2 MB)  1 224 224 27\nTensor   5 kTfLiteFloat32  kTfLiteDynamic       6912 bytes ( 0.0 MB)  27 64\nNode   0 Operator Builtin Code   3\nInputs: 0 3 2\nOutputs: 1\nparams = (nil) //my print\nSegmentation fault", "body": "\r\n### System information\r\n\r\nOS Platform and Distribution - Ubuntu 16.04.2 LTS\r\nTensorFlow installed from: https://github.com/tensorflow/tensorflow.git\r\nTensorFlow version: last commit f66e9f92820804b7c2b4698147d07d5d2277c62f \r\nBazel version: Build label: 0.8.1- (@non-git)\r\nCUDA/cuDNN version N/A\r\nGPU model and memory N/A\r\nExact command to reproduce: bazel build --verbose_failures --config opt --cxxopt=-std=c++11 --config monolithic //tensorflow/contrib/lite/examples/label_image:label_image \r\n./label_image\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu/Linaro 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\r\n== uname -a =====================================================\r\nLinux qds101 4.4.65 https://github.com/tensorflow/tensorflow/issues/1 SMP PREEMPT Mon Sep 18 13:34:00 CDT 2017 aarch64 aarch64 aarch64 GNU/Linux\r\n== check pips ===================================================\r\nnumpy (1.13.3)\r\nprotobuf (3.4.0)\r\ntensorflow (1.3.0)\r\ntensorflow-tensorboard (0.1.5)\r\n== check for virtualenv =========================================\r\nFalse\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.3.0\r\ntf.GIT_VERSION = v1.3.0-rc1-1607-gbe4e5ef\r\ntf.COMPILER_VERSION = v1.3.0-rc1-1607-gbe4e5ef\r\n\r\n\r\n### Describe the problem\r\nI compile example/label_image nad when I run it I get segmentation fault.\r\nError comes from the following line in resize_bilinear.c (called from label_image.c resize<float>(interpreter->typed_tensor<float>(input), in, image_height,\r\n                    image_width, image_channels, wanted_height, wanted_width,\r\n                    wanted_channels, s);)\r\n \r\n\r\ntype::ResizeBilinear(GetTensorData<float>(input), GetTensorDims(input),   \\\r\n                       GetTensorData<int32>(size), GetTensorDims(size),     \\\r\n                       GetTensorData<float>(output), GetTensorDims(output), \\\r\n                       params->align_corners)\r\n\r\nbecause params is NULL\r\nI looked at code and i do not believe that this variable (builtin_data) ever initialized in this case because resize is called not within graph\r\n\r\n\r\n### Source code / logs\r\nuser@qds101:~/ml/tf_lite/tensorflow/tensorflow/contrib/lite/examples/label_image/exec$ ./label_image -v 1\r\nnnapi error: unable to open library libneuralnetworks.so\r\nLoaded model ./vgg16_conv1_opt.tflite\r\nresolved reporter\r\ntensors size: 6\r\nnodes size: 1\r\ninputs: 1\r\ninput(0) name: Placeholder\r\n0: Placeholder, 602112, 1, 0, 0\r\n1: conv1_1, 12845056, 1, 0, 0\r\n2: conv1_1/Conv2D_bias, 256, 1, 0, 0\r\n3: conv1_1/weights, 6912, 1, 0, 0\r\nlen: 150666\r\nwidth, height, channels: 224, 224, 3\r\ninput: 0\r\nnumber of inputs: 1\r\nnumber of outputs: 1\r\nInterpreter has 6 tensors and 1 nodes\r\nInputs: 0\r\nOutputs: 1\r\n\r\nTensor   0 kTfLiteFloat32  kTfLiteArenaRw     602112 bytes ( 0.6 MB)  1 224 224 3\r\n\r\nTensor   1 kTfLiteFloat32  kTfLiteArenaRw   12845056 bytes (12.2 MB)  1 224 224 64\r\n\r\nTensor   2 kTfLiteFloat32   kTfLiteMmapRo        256 bytes ( 0.0 MB)  64\r\n\r\nTensor   3 kTfLiteFloat32   kTfLiteMmapRo       6912 bytes ( 0.0 MB)  64 3 3 3\r\n\r\nTensor   4 kTfLiteFloat32  kTfLiteArenaRw    5419008 bytes ( 5.2 MB)  1 224 224 27\r\n\r\nTensor   5 kTfLiteFloat32  kTfLiteDynamic       6912 bytes ( 0.0 MB)  27 64\r\n\r\nNode   0 Operator Builtin Code   3\r\n  Inputs: 0 3 2\r\n  Outputs: 1\r\nparams = (nil) //my print\r\nSegmentation fault\r\n"}
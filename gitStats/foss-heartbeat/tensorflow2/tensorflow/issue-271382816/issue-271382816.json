{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14277", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14277/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14277/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14277/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14277", "id": 271382816, "node_id": "MDU6SXNzdWUyNzEzODI4MTY=", "number": 14277, "title": "How to realize model parallelism", "user": {"login": "CharlesxrWu", "id": 22089061, "node_id": "MDQ6VXNlcjIyMDg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/22089061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CharlesxrWu", "html_url": "https://github.com/CharlesxrWu", "followers_url": "https://api.github.com/users/CharlesxrWu/followers", "following_url": "https://api.github.com/users/CharlesxrWu/following{/other_user}", "gists_url": "https://api.github.com/users/CharlesxrWu/gists{/gist_id}", "starred_url": "https://api.github.com/users/CharlesxrWu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CharlesxrWu/subscriptions", "organizations_url": "https://api.github.com/users/CharlesxrWu/orgs", "repos_url": "https://api.github.com/users/CharlesxrWu/repos", "events_url": "https://api.github.com/users/CharlesxrWu/events{/privacy}", "received_events_url": "https://api.github.com/users/CharlesxrWu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-06T07:35:32Z", "updated_at": "2017-11-06T08:16:16Z", "closed_at": "2017-11-06T08:16:16Z", "author_association": "NONE", "body_html": "<p>I cannot find the model parallelism in the tensorflow, there are many examples about data parallelism. I write a programm to realize the model parallelism, but it cannot work.</p>\n<p>from <strong>future</strong> import print_function<br>\nimport tensorflow as tf<br>\nimport numpy as np</p>\n<p>tf.train.ClusterSpec({<br>\n\"worker\": [<br>\n\"node1:2222\"<br>\n],<br>\n\"ps\": [<br>\n\"node2:2222\"<br>\n]})</p>\n<p>with tf.device(\"/job:ps/task:0\"):<br>\nweights = tf.Variable(tf.random_normal([1]),dtype=tf.float32,name='weights')<br>\nbias = tf.Variable(tf.ones([1])+0.5,dtype=tf.float32, name='bias')</p>\n<p>with tf.device(\"/job:worker/task:0\"):<br>\nX = np.random.normal(0, 100, 100000)<br>\ny = X * 0.5 + 10 + np.random.normal(0, 0.1, len(X))<br>\nresults = weights * X + bias<br>\nloss = tf.reduce_mean(tf.square(y-results))<br>\noptimizer = tf.train.GradientDescentOptimizer(0.1)<br>\ntrain_op = optimizer.minimize(loss)<br>\ninit = tf.global_variables_initializer()</p>\n<p>with tf.Session(\"grpc://node2:2222\") as sess:<br>\nsess.run(init)<br>\nfor _ in range(10000):<br>\nLoss, T = sess.run([loss, train_op])<br>\nprint(Loss)</p>", "body_text": "I cannot find the model parallelism in the tensorflow, there are many examples about data parallelism. I write a programm to realize the model parallelism, but it cannot work.\nfrom future import print_function\nimport tensorflow as tf\nimport numpy as np\ntf.train.ClusterSpec({\n\"worker\": [\n\"node1:2222\"\n],\n\"ps\": [\n\"node2:2222\"\n]})\nwith tf.device(\"/job:ps/task:0\"):\nweights = tf.Variable(tf.random_normal([1]),dtype=tf.float32,name='weights')\nbias = tf.Variable(tf.ones([1])+0.5,dtype=tf.float32, name='bias')\nwith tf.device(\"/job:worker/task:0\"):\nX = np.random.normal(0, 100, 100000)\ny = X * 0.5 + 10 + np.random.normal(0, 0.1, len(X))\nresults = weights * X + bias\nloss = tf.reduce_mean(tf.square(y-results))\noptimizer = tf.train.GradientDescentOptimizer(0.1)\ntrain_op = optimizer.minimize(loss)\ninit = tf.global_variables_initializer()\nwith tf.Session(\"grpc://node2:2222\") as sess:\nsess.run(init)\nfor _ in range(10000):\nLoss, T = sess.run([loss, train_op])\nprint(Loss)", "body": "I cannot find the model parallelism in the tensorflow, there are many examples about data parallelism. I write a programm to realize the model parallelism, but it cannot work.\r\n\r\nfrom __future__ import print_function\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\n\r\n\r\ntf.train.ClusterSpec({\r\n    \"worker\": [\r\n        \"node1:2222\"\r\n    ],\r\n    \"ps\": [\r\n        \"node2:2222\"\r\n    ]})\r\n\r\nwith tf.device(\"/job:ps/task:0\"):\r\n    weights = tf.Variable(tf.random_normal([1]),dtype=tf.float32,name='weights')\r\n    bias = tf.Variable(tf.ones([1])+0.5,dtype=tf.float32, name='bias')\r\n\r\nwith tf.device(\"/job:worker/task:0\"):\r\n    X = np.random.normal(0, 100, 100000)\r\n    y = X * 0.5 + 10 + np.random.normal(0, 0.1, len(X))\r\n    results = weights * X + bias\r\n    loss = tf.reduce_mean(tf.square(y-results))\r\n    optimizer = tf.train.GradientDescentOptimizer(0.1)\r\n    train_op = optimizer.minimize(loss)\r\n    init = tf.global_variables_initializer()\r\n\r\nwith tf.Session(\"grpc://node2:2222\") as sess:\r\n    sess.run(init)\r\n    for _ in range(10000):\r\n        Loss, T = sess.run([loss, train_op])\r\n        print(Loss)"}
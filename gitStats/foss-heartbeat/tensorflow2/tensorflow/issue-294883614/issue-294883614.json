{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16807", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16807/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16807/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16807/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16807", "id": 294883614, "node_id": "MDU6SXNzdWUyOTQ4ODM2MTQ=", "number": 16807, "title": "TF 1.3 unable to create Session in the first time", "user": {"login": "tkc285", "id": 29987626, "node_id": "MDQ6VXNlcjI5OTg3NjI2", "avatar_url": "https://avatars0.githubusercontent.com/u/29987626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tkc285", "html_url": "https://github.com/tkc285", "followers_url": "https://api.github.com/users/tkc285/followers", "following_url": "https://api.github.com/users/tkc285/following{/other_user}", "gists_url": "https://api.github.com/users/tkc285/gists{/gist_id}", "starred_url": "https://api.github.com/users/tkc285/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tkc285/subscriptions", "organizations_url": "https://api.github.com/users/tkc285/orgs", "repos_url": "https://api.github.com/users/tkc285/repos", "events_url": "https://api.github.com/users/tkc285/events{/privacy}", "received_events_url": "https://api.github.com/users/tkc285/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-06T19:27:01Z", "updated_at": "2018-02-12T15:46:09Z", "closed_at": "2018-02-12T15:46:09Z", "author_association": "NONE", "body_html": "<p>I have install TF 1.3 GPU using anaconda. It is failed to create session as run TF in script file.</p>\n<p>As run TF interactively or using spyder, same error messages were shown and it fail to create session in the first time. However, it able to create session if run \"sess = tf.Session()\" again. The TF will run either by input line by line script or using \"exec(compile(open(filename, \"rb\").read(), filename, 'exec'))\"</p>\n<p>The error message as create session:</p>\n<p>$ source activiate tf13py36<br>\n(tf13py36)$ python</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>import tensorflow as tf<br>\nsess = tf.Session()<br>\n2018-02-05 17:44:25.343373: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2018-02-05 17:44:25.343398: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2018-02-05 17:44:25.540883: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:893] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero<br>\n2018-02-05 17:44:25.541399: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties:<br>\nname: GeForce GTX 980 Ti<br>\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.228<br>\npciBusID 0000:03:00.0<br>\nTotal memory: 5.94GiB<br>\nFree memory: 5.83GiB<br>\n2018-02-05 17:44:25.600695: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.<br>\n2018-02-05 17:44:25.600988: E tensorflow/core/common_runtime/direct_session.cc:171] Internal: failed initializing StreamExecutor for CUDA device ordinal 1: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_INVALID_DEVICE<br>\nTraceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nFile \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1486, in <strong>init</strong><br>\nsuper(Session, self).<strong>init</strong>(target, graph, config=config)<br>\nFile \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 621, in <strong>init</strong><br>\nself._session = tf_session.TF_NewDeprecatedSession(opts, status)<br>\nFile \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/contextlib.py\", line 89, in <strong>exit</strong><br>\nnext(self.gen)<br>\nFile \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status<br>\npywrap_tensorflow.TF_GetCode(status))<br>\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.<br>\nsess = tf.Session()<br>\n2018-02-05 17:45:19.371509: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.<br>\n2018-02-05 17:45:19.371738: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX 980 Ti, pci bus id: 0000:03:00.0)<br>\n2018-02-05 17:45:19.430913: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.<br>\nx1 = tf.constant([1,2,3,4])<br>\nx2 = tf.constant([5,6,7,8])<br>\nresult = tf.multiply(x1, x2)<br>\nprint(sess.run(result))<br>\n[ 5 12 21 32]</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>SYSTEM Infomation<br>\nubuntu16.04<br>\ncuda V8.061<br>\ncudnn 6021<br>\ngtx1060<br>\ntensorflow1.3.0<br>\npython3.6.1<br>\nmemory 30G ,used 5.5GB</p>\n<p>$ nvidia-smi<br>\nTue Feb  6 10:21:38 2018<br>\n+-----------------------------------------------------------------------------+<br>\n| NVIDIA-SMI 384.111                Driver Version: 384.111                   |<br>\n|-------------------------------+----------------------+----------------------+<br>\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |<br>\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |<br>\n|===============================+======================+======================|<br>\n|   0  GeForce GTX 980 Ti  Off  | 00000000:03:00.0 Off |                  N/A |<br>\n| 22%   31C    P8    19W / 250W |    110MiB /  6078MiB |      0%      Default |<br>\n+-------------------------------+----------------------+----------------------+<br>\n|   1  Quadro 600          Off  | 00000000:04:00.0  On |                  N/A |<br>\n| 36%   53C    P0    N/A /  N/A |    524MiB /   959MiB |      0%      Default |<br>\n+-------------------------------+----------------------+----------------------+</p>\n<p>+-----------------------------------------------------------------------------+<br>\n| Processes:                                                       GPU Memory |<br>\n|  GPU       PID   Type   Process name                             Usage      |<br>\n|=============================================================================|<br>\n|    0     19564      C   python                                        98MiB |<br>\n+-----------------------------------------------------------------------------+</p>\n<p>I am grateful to anyone for helping me<br>\nThank you very much!</p>", "body_text": "I have install TF 1.3 GPU using anaconda. It is failed to create session as run TF in script file.\nAs run TF interactively or using spyder, same error messages were shown and it fail to create session in the first time. However, it able to create session if run \"sess = tf.Session()\" again. The TF will run either by input line by line script or using \"exec(compile(open(filename, \"rb\").read(), filename, 'exec'))\"\nThe error message as create session:\n$ source activiate tf13py36\n(tf13py36)$ python\n\n\n\nimport tensorflow as tf\nsess = tf.Session()\n2018-02-05 17:44:25.343373: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\n2018-02-05 17:44:25.343398: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\n2018-02-05 17:44:25.540883: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:893] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2018-02-05 17:44:25.541399: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties:\nname: GeForce GTX 980 Ti\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.228\npciBusID 0000:03:00.0\nTotal memory: 5.94GiB\nFree memory: 5.83GiB\n2018-02-05 17:44:25.600695: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\n2018-02-05 17:44:25.600988: E tensorflow/core/common_runtime/direct_session.cc:171] Internal: failed initializing StreamExecutor for CUDA device ordinal 1: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_INVALID_DEVICE\nTraceback (most recent call last):\nFile \"\", line 1, in \nFile \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1486, in init\nsuper(Session, self).init(target, graph, config=config)\nFile \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 621, in init\nself._session = tf_session.TF_NewDeprecatedSession(opts, status)\nFile \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/contextlib.py\", line 89, in exit\nnext(self.gen)\nFile \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status\npywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.\nsess = tf.Session()\n2018-02-05 17:45:19.371509: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\n2018-02-05 17:45:19.371738: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 980 Ti, pci bus id: 0000:03:00.0)\n2018-02-05 17:45:19.430913: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\nx1 = tf.constant([1,2,3,4])\nx2 = tf.constant([5,6,7,8])\nresult = tf.multiply(x1, x2)\nprint(sess.run(result))\n[ 5 12 21 32]\n\n\n\nSYSTEM Infomation\nubuntu16.04\ncuda V8.061\ncudnn 6021\ngtx1060\ntensorflow1.3.0\npython3.6.1\nmemory 30G ,used 5.5GB\n$ nvidia-smi\nTue Feb  6 10:21:38 2018\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 384.111                Driver Version: 384.111                   |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce GTX 980 Ti  Off  | 00000000:03:00.0 Off |                  N/A |\n| 22%   31C    P8    19W / 250W |    110MiB /  6078MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  Quadro 600          Off  | 00000000:04:00.0  On |                  N/A |\n| 36%   53C    P0    N/A /  N/A |    524MiB /   959MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0     19564      C   python                                        98MiB |\n+-----------------------------------------------------------------------------+\nI am grateful to anyone for helping me\nThank you very much!", "body": "I have install TF 1.3 GPU using anaconda. It is failed to create session as run TF in script file.\r\n\r\nAs run TF interactively or using spyder, same error messages were shown and it fail to create session in the first time. However, it able to create session if run \"sess = tf.Session()\" again. The TF will run either by input line by line script or using \"exec(compile(open(filename, \"rb\").read(), filename, 'exec'))\" \r\n\r\nThe error message as create session:\r\n\r\n$ source activiate tf13py36\r\n(tf13py36)$ python\r\n>>> import tensorflow as tf\r\n>>> sess = tf.Session()\r\n2018-02-05 17:44:25.343373: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\n2018-02-05 17:44:25.343398: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\n2018-02-05 17:44:25.540883: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:893] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2018-02-05 17:44:25.541399: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties:\r\nname: GeForce GTX 980 Ti\r\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.228\r\npciBusID 0000:03:00.0\r\nTotal memory: 5.94GiB\r\nFree memory: 5.83GiB\r\n2018-02-05 17:44:25.600695: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\r\n2018-02-05 17:44:25.600988: E tensorflow/core/common_runtime/direct_session.cc:171] Internal: failed initializing StreamExecutor for CUDA device ordinal 1: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_INVALID_DEVICE\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1486, in __init__\r\n    super(Session, self).__init__(target, graph, config=config)\r\n  File \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 621, in __init__\r\n    self._session = tf_session.TF_NewDeprecatedSession(opts, status)\r\n  File \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/contextlib.py\", line 89, in __exit__\r\n    next(self.gen)\r\n  File \"/home/tchen/anaconda3/envs/tf13py36/lib/python3.6/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status\r\n    pywrap_tensorflow.TF_GetCode(status))\r\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.\r\n>>> sess = tf.Session()\r\n2018-02-05 17:45:19.371509: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\r\n2018-02-05 17:45:19.371738: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 980 Ti, pci bus id: 0000:03:00.0)\r\n2018-02-05 17:45:19.430913: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x225e110 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\r\n>>> x1 = tf.constant([1,2,3,4])\r\n>>> x2 = tf.constant([5,6,7,8])\r\n>>> result = tf.multiply(x1, x2)\r\n>>> print(sess.run(result))\r\n[ 5 12 21 32]\r\n\r\nSYSTEM Infomation\r\nubuntu16.04\r\ncuda V8.061\r\ncudnn 6021\r\ngtx1060\r\ntensorflow1.3.0\r\npython3.6.1\r\nmemory 30G ,used 5.5GB\r\n\r\n$ nvidia-smi\r\nTue Feb  6 10:21:38 2018\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 384.111                Driver Version: 384.111                   |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 980 Ti  Off  | 00000000:03:00.0 Off |                  N/A |\r\n| 22%   31C    P8    19W / 250W |    110MiB /  6078MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   1  Quadro 600          Off  | 00000000:04:00.0  On |                  N/A |\r\n| 36%   53C    P0    N/A /  N/A |    524MiB /   959MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n\r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0     19564      C   python                                        98MiB |\r\n+-----------------------------------------------------------------------------+\r\n\r\nI am grateful to anyone for helping me\r\nThank you very much!"}
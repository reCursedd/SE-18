{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10371", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10371/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10371/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10371/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10371", "id": 232870548, "node_id": "MDU6SXNzdWUyMzI4NzA1NDg=", "number": 10371, "title": "//tensorflow/tools/test:cast_op_benchmark  and //tensorflow/tools/test:rnn_op_benchmark tests are failing with KeyError: 'l2_cache_size' on ppc64le", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-06-01T12:58:22Z", "updated_at": "2017-06-06T00:05:10Z", "closed_at": "2017-06-06T00:05:10Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 16.04 (ppc64le)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nInstalled from source (v1.0.1)</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n('v1.0.1-0-ge895d5c-dirty', '1.0.1')</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.4.4-2017-05-26 (@80a07b5)</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nCUDA = 8.0 and cuDNN = 5.1</li>\n<li><strong>GPU model and memory</strong>:<br>\nGPU 0: Tesla P100-SXM2-16GB<br>\nGPU 1: Tesla P100-SXM2-16GB</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nbazel test --config=opt --config=cuda //tensorflow/tools/test:cast_op_benchmark<br>\nor<br>\nbazel test --config=opt --config=cuda //tensorflow/tools/test:rnn_op_benchmark</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Both tests are passing on x86, however getting failure on ppc64le with following errors :</p>\n<h3>Source code / logs</h3>\n<pre><code>$   bazel test --config=opt --config=cuda //tensorflow/tools/test:rnn_op_benchmark\n\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\n-----------------------------------------------------------------------------\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\n..\n----------------------------------------------------------------------\nRan 2 tests in 0.008s\n\nOK\nTraceback (most recent call last):\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs.py\", line 99, in &lt;module&gt;\n    app.run()\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs.py\", line 78, in main\n    test_args)\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs_lib.py\", line 145, in run_and_gather_logs\n    log_files=log_files), mangled_test_name)\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs_lib.py\", line 76, in process_test_logs\n    system_info_lib.gather_machine_configuration())\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/system_info_lib.py\", line 44, in gather_machine_configuration\n    config.cpu_info.CopyFrom(gather_cpu_info())\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/system_info_lib.py\", line 98, in gather_cpu_info\n    l2_cache_size = re.match(r'(\\d+)', str(info['l2_cache_size']))\nKeyError: 'l2_cache_size'\n\n</code></pre>\n<p>Any comments/suggestions ?</p>", "body_text": "System information\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04 (ppc64le)\nTensorFlow installed from (source or binary):\nInstalled from source (v1.0.1)\nTensorFlow version (use command below):\n('v1.0.1-0-ge895d5c-dirty', '1.0.1')\nBazel version (if compiling from source):\n0.4.4-2017-05-26 (@80a07b5)\nCUDA/cuDNN version:\nCUDA = 8.0 and cuDNN = 5.1\nGPU model and memory:\nGPU 0: Tesla P100-SXM2-16GB\nGPU 1: Tesla P100-SXM2-16GB\nExact command to reproduce:\nbazel test --config=opt --config=cuda //tensorflow/tools/test:cast_op_benchmark\nor\nbazel test --config=opt --config=cuda //tensorflow/tools/test:rnn_op_benchmark\n\nDescribe the problem\nBoth tests are passing on x86, however getting failure on ppc64le with following errors :\nSource code / logs\n$   bazel test --config=opt --config=cuda //tensorflow/tools/test:rnn_op_benchmark\n\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\n-----------------------------------------------------------------------------\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\n..\n----------------------------------------------------------------------\nRan 2 tests in 0.008s\n\nOK\nTraceback (most recent call last):\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs.py\", line 99, in <module>\n    app.run()\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs.py\", line 78, in main\n    test_args)\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs_lib.py\", line 145, in run_and_gather_logs\n    log_files=log_files), mangled_test_name)\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs_lib.py\", line 76, in process_test_logs\n    system_info_lib.gather_machine_configuration())\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/system_info_lib.py\", line 44, in gather_machine_configuration\n    config.cpu_info.CopyFrom(gather_cpu_info())\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/system_info_lib.py\", line 98, in gather_cpu_info\n    l2_cache_size = re.match(r'(\\d+)', str(info['l2_cache_size']))\nKeyError: 'l2_cache_size'\n\n\nAny comments/suggestions ?", "body": "### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n      Ubuntu 16.04 (ppc64le)\r\n- **TensorFlow installed from (source or binary)**:\r\n     Installed from source (v1.0.1)\r\n- **TensorFlow version (use command below)**:\r\n     ('v1.0.1-0-ge895d5c-dirty', '1.0.1')\r\n- **Bazel version (if compiling from source)**:\r\n     0.4.4-2017-05-26 (@80a07b5)\r\n- **CUDA/cuDNN version**:\r\n     CUDA = 8.0 and cuDNN = 5.1\r\n- **GPU model and memory**:\r\n     GPU 0: Tesla P100-SXM2-16GB\r\n     GPU 1: Tesla P100-SXM2-16GB\r\n- **Exact command to reproduce**:\r\n    bazel test --config=opt --config=cuda //tensorflow/tools/test:cast_op_benchmark \r\n                                                           or\r\n    bazel test --config=opt --config=cuda //tensorflow/tools/test:rnn_op_benchmark\r\n\r\n### Describe the problem\r\nBoth tests are passing on x86, however getting failure on ppc64le with following errors :\r\n\r\n### Source code / logs\r\n```\r\n$   bazel test --config=opt --config=cuda //tensorflow/tools/test:rnn_op_benchmark\r\n\r\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\r\n-----------------------------------------------------------------------------\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.so.5 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.so.8.0 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.so.8.0 locally\r\n..\r\n----------------------------------------------------------------------\r\nRan 2 tests in 0.008s\r\n\r\nOK\r\nTraceback (most recent call last):\r\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs.py\", line 99, in <module>\r\n    app.run()\r\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs.py\", line 78, in main\r\n    test_args)\r\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs_lib.py\", line 145, in run_and_gather_logs\r\n    log_files=log_files), mangled_test_name)\r\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/run_and_gather_logs_lib.py\", line 76, in process_test_logs\r\n    system_info_lib.gather_machine_configuration())\r\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/system_info_lib.py\", line 44, in gather_machine_configuration\r\n    config.cpu_info.CopyFrom(gather_cpu_info())\r\n  File \"/home/amit/.cache/bazel/_bazel_amit/24cb277fcedebf1cf5a3d7b8e713f578/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/tools/test/rnn_op_benchmark.runfiles/org_tensorflow/tensorflow/tools/test/system_info_lib.py\", line 98, in gather_cpu_info\r\n    l2_cache_size = re.match(r'(\\d+)', str(info['l2_cache_size']))\r\nKeyError: 'l2_cache_size'\r\n\r\n```\r\n\r\nAny comments/suggestions ?"}
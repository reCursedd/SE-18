{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17976", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17976/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17976/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17976/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17976", "id": 308304666, "node_id": "MDU6SXNzdWUzMDgzMDQ2NjY=", "number": 17976, "title": "AttributeError: '_LSTMModel' object has no attribute '_get_exogenous_embedding_shape'", "user": {"login": "gaceladri", "id": 7850682, "node_id": "MDQ6VXNlcjc4NTA2ODI=", "avatar_url": "https://avatars0.githubusercontent.com/u/7850682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaceladri", "html_url": "https://github.com/gaceladri", "followers_url": "https://api.github.com/users/gaceladri/followers", "following_url": "https://api.github.com/users/gaceladri/following{/other_user}", "gists_url": "https://api.github.com/users/gaceladri/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaceladri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaceladri/subscriptions", "organizations_url": "https://api.github.com/users/gaceladri/orgs", "repos_url": "https://api.github.com/users/gaceladri/repos", "events_url": "https://api.github.com/users/gaceladri/events{/privacy}", "received_events_url": "https://api.github.com/users/gaceladri/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-24T22:32:55Z", "updated_at": "2018-03-25T14:04:08Z", "closed_at": "2018-03-25T14:04:08Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<p><strong>Ubuntu 16.04</strong><br>\n<strong>Tensorflow 1.6</strong></p>\n<h3>Describe the problem</h3>\n<p>When I try to execute</p>\n<blockquote>\n<p><strong>tensorflow/tensorflow/contrib/timeseries/examples/lstm.py</strong></p>\n</blockquote>\n<p>the next error appears:</p>\n<pre><code>WARNING:tensorflow:Using temporary folder as model directory: /tmp/tmp1pp2uy_k\nTraceback (most recent call last):\n  File \"lstm.py\", line 296, in &lt;module&gt;\n    tf.app.run(main=main)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 124, in run\n    _sys.exit(main(argv))\n  File \"lstm.py\", line 284, in main\n    all_times, predictions) = train_and_predict()\n  File \"lstm.py\", line 219, in train_and_predict\n    estimator.train(input_fn=train_input_fn, steps=training_steps)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 314, in train\n    loss = self._train_model(input_fn, hooks, saving_listeners)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 743, in _train_model\n    features, labels, model_fn_lib.ModeKeys.TRAIN, self.config)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 725, in _call_model_fn\n    model_fn_results = self._model_fn(features=features, **kwargs)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 225, in create_estimator_spec\n    model=self.model, input_statistics=input_statistics)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 147, in initialize_graph\n    self._start_state = model.get_start_state()\n  File \"lstm.py\", line 114, in get_start_state\n    tf.zeros(self._get_exogenous_embedding_shape(), dtype=self.dtype),\nAttributeError: '_LSTMModel' object has no attribute '_get_exogenous_embedding_shape'\n</code></pre>\n<p>Seems that the pull is coming from <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7946809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gunan\">@gunan</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=17151892\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tensorflower-gardener\">@tensorflower-gardener</a>,  authored by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3731025\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/allenlavoie\">@allenlavoie</a></p>\n<p>EDIT: If I hard-code the 'self._get_exogenous_emebedding_shape()' (line 114 in lstm.py file) to 0, I get the next error also:</p>\n<pre><code>Traceback (most recent call last):\n  File \"lstm.py\", line 296, in &lt;module&gt;\n    tf.app.run(main=main)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 124, in run\n    _sys.exit(main(argv))\n  File \"lstm.py\", line 284, in main\n    all_times, predictions) = train_and_predict()\n  File \"lstm.py\", line 219, in train_and_predict\n    estimator.train(input_fn=train_input_fn, steps=training_steps)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 314, in train\n    loss = self._train_model(input_fn, hooks, saving_listeners)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 743, in _train_model\n    features, labels, model_fn_lib.ModeKeys.TRAIN, self.config)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 725, in _call_model_fn\n    model_fn_results = self._model_fn(features=features, **kwargs)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 228, in create_estimator_spec\n    return self._train_ops(features)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 78, in _train_ops\n    self.model, features, estimator_lib.ModeKeys.TRAIN)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 93, in define_loss\n    model=model, features=features, mode=mode)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 182, in _define_loss_with_saved_state\n    mode=mode)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 237, in _update_cached_states\n    state=looked_up_state)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/model.py\", line 588, in per_step_batch_loss\n    features={key: value for key, value in features.items()\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/model.py\", line 296, in _process_exogenous_features\n    trainable=True))\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 221, in input_from_feature_columns\n    cols_to_outs=cols_to_outs)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 104, in _input_from_feature_columns\n    check_feature_columns(feature_columns)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 776, in check_feature_columns\n    key = f.key\nAttributeError: '_EmbeddingColumn' object has no attribute 'key'\n\n\n</code></pre>", "body_text": "System information\nUbuntu 16.04\nTensorflow 1.6\nDescribe the problem\nWhen I try to execute\n\ntensorflow/tensorflow/contrib/timeseries/examples/lstm.py\n\nthe next error appears:\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmp1pp2uy_k\nTraceback (most recent call last):\n  File \"lstm.py\", line 296, in <module>\n    tf.app.run(main=main)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 124, in run\n    _sys.exit(main(argv))\n  File \"lstm.py\", line 284, in main\n    all_times, predictions) = train_and_predict()\n  File \"lstm.py\", line 219, in train_and_predict\n    estimator.train(input_fn=train_input_fn, steps=training_steps)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 314, in train\n    loss = self._train_model(input_fn, hooks, saving_listeners)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 743, in _train_model\n    features, labels, model_fn_lib.ModeKeys.TRAIN, self.config)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 725, in _call_model_fn\n    model_fn_results = self._model_fn(features=features, **kwargs)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 225, in create_estimator_spec\n    model=self.model, input_statistics=input_statistics)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 147, in initialize_graph\n    self._start_state = model.get_start_state()\n  File \"lstm.py\", line 114, in get_start_state\n    tf.zeros(self._get_exogenous_embedding_shape(), dtype=self.dtype),\nAttributeError: '_LSTMModel' object has no attribute '_get_exogenous_embedding_shape'\n\nSeems that the pull is coming from @gunan, @tensorflower-gardener,  authored by @allenlavoie\nEDIT: If I hard-code the 'self._get_exogenous_emebedding_shape()' (line 114 in lstm.py file) to 0, I get the next error also:\nTraceback (most recent call last):\n  File \"lstm.py\", line 296, in <module>\n    tf.app.run(main=main)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 124, in run\n    _sys.exit(main(argv))\n  File \"lstm.py\", line 284, in main\n    all_times, predictions) = train_and_predict()\n  File \"lstm.py\", line 219, in train_and_predict\n    estimator.train(input_fn=train_input_fn, steps=training_steps)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 314, in train\n    loss = self._train_model(input_fn, hooks, saving_listeners)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 743, in _train_model\n    features, labels, model_fn_lib.ModeKeys.TRAIN, self.config)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 725, in _call_model_fn\n    model_fn_results = self._model_fn(features=features, **kwargs)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 228, in create_estimator_spec\n    return self._train_ops(features)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 78, in _train_ops\n    self.model, features, estimator_lib.ModeKeys.TRAIN)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 93, in define_loss\n    model=model, features=features, mode=mode)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 182, in _define_loss_with_saved_state\n    mode=mode)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 237, in _update_cached_states\n    state=looked_up_state)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/model.py\", line 588, in per_step_batch_loss\n    features={key: value for key, value in features.items()\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/model.py\", line 296, in _process_exogenous_features\n    trainable=True))\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 221, in input_from_feature_columns\n    cols_to_outs=cols_to_outs)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 104, in _input_from_feature_columns\n    check_feature_columns(feature_columns)\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 776, in check_feature_columns\n    key = f.key\nAttributeError: '_EmbeddingColumn' object has no attribute 'key'", "body": "### System information\r\n**Ubuntu 16.04**\r\n**Tensorflow 1.6**\r\n\r\n### Describe the problem\r\n\r\nWhen I try to execute \r\n\r\n> **tensorflow/tensorflow/contrib/timeseries/examples/lstm.py**\r\n\r\n the next error appears:\r\n\r\n```\r\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmp1pp2uy_k\r\nTraceback (most recent call last):\r\n  File \"lstm.py\", line 296, in <module>\r\n    tf.app.run(main=main)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 124, in run\r\n    _sys.exit(main(argv))\r\n  File \"lstm.py\", line 284, in main\r\n    all_times, predictions) = train_and_predict()\r\n  File \"lstm.py\", line 219, in train_and_predict\r\n    estimator.train(input_fn=train_input_fn, steps=training_steps)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 314, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 743, in _train_model\r\n    features, labels, model_fn_lib.ModeKeys.TRAIN, self.config)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 725, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 225, in create_estimator_spec\r\n    model=self.model, input_statistics=input_statistics)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 147, in initialize_graph\r\n    self._start_state = model.get_start_state()\r\n  File \"lstm.py\", line 114, in get_start_state\r\n    tf.zeros(self._get_exogenous_embedding_shape(), dtype=self.dtype),\r\nAttributeError: '_LSTMModel' object has no attribute '_get_exogenous_embedding_shape'\r\n```\r\n\r\nSeems that the pull is coming from @gunan, @tensorflower-gardener,  authored by @allenlavoie \r\n\r\n\r\nEDIT: If I hard-code the 'self._get_exogenous_emebedding_shape()' (line 114 in lstm.py file) to 0, I get the next error also:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"lstm.py\", line 296, in <module>\r\n    tf.app.run(main=main)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 124, in run\r\n    _sys.exit(main(argv))\r\n  File \"lstm.py\", line 284, in main\r\n    all_times, predictions) = train_and_predict()\r\n  File \"lstm.py\", line 219, in train_and_predict\r\n    estimator.train(input_fn=train_input_fn, steps=training_steps)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 314, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 743, in _train_model\r\n    features, labels, model_fn_lib.ModeKeys.TRAIN, self.config)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/python/estimator/estimator.py\", line 725, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 228, in create_estimator_spec\r\n    return self._train_ops(features)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/head.py\", line 78, in _train_ops\r\n    self.model, features, estimator_lib.ModeKeys.TRAIN)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 93, in define_loss\r\n    model=model, features=features, mode=mode)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 182, in _define_loss_with_saved_state\r\n    mode=mode)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/state_management.py\", line 237, in _update_cached_states\r\n    state=looked_up_state)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/model.py\", line 588, in per_step_batch_loss\r\n    features={key: value for key, value in features.items()\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/timeseries/python/timeseries/model.py\", line 296, in _process_exogenous_features\r\n    trainable=True))\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 221, in input_from_feature_columns\r\n    cols_to_outs=cols_to_outs)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 104, in _input_from_feature_columns\r\n    check_feature_columns(feature_columns)\r\n  File \"/home/proto/anaconda3/envs/tensor/lib/python3.5/site-packages/tensorflow/contrib/layers/python/layers/feature_column_ops.py\", line 776, in check_feature_columns\r\n    key = f.key\r\nAttributeError: '_EmbeddingColumn' object has no attribute 'key'\r\n\r\n\r\n```"}
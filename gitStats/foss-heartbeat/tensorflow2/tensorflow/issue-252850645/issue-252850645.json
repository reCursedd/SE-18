{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12590", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12590/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12590/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12590/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12590", "id": 252850645, "node_id": "MDU6SXNzdWUyNTI4NTA2NDU=", "number": 12590, "title": "Cannot build TF 1.3/1.2 for iOS", "user": {"login": "eaigner", "id": 112197, "node_id": "MDQ6VXNlcjExMjE5Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/112197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaigner", "html_url": "https://github.com/eaigner", "followers_url": "https://api.github.com/users/eaigner/followers", "following_url": "https://api.github.com/users/eaigner/following{/other_user}", "gists_url": "https://api.github.com/users/eaigner/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaigner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaigner/subscriptions", "organizations_url": "https://api.github.com/users/eaigner/orgs", "repos_url": "https://api.github.com/users/eaigner/repos", "events_url": "https://api.github.com/users/eaigner/events{/privacy}", "received_events_url": "https://api.github.com/users/eaigner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-25T09:49:24Z", "updated_at": "2017-08-28T06:33:49Z", "closed_at": "2017-08-28T03:55:49Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I've built TF 1.1 before without problems as follows</p>\n<pre><code>git clone --branch r1.1 https://github.com/tensorflow/tensorflow.git\n./&lt;makefile_dir&gt;/build_all_ios.sh\n</code></pre>\n<p>If I change the branch to <code>r1.3</code> it stops with a segmentation fault. Also seems to happen with <code>r1.2</code>.</p>\n<pre><code>...\ngcc --std=c++11 -DIS_SLIM_BUILD -fno-exceptions -DNDEBUG -O3 -mios-simulator-version-min=8.0 -arch x86_64 -fembed-bitcode -D__thread= -DUSE_GEMM_FOR_CONV -Wno-c++11-narrowing -DTF_LEAN_BINARY -D__ANDROID_TYPES_SLIM__ -fno-exceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.3.sdk -MT &lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_common.o -MMD -MP -MF &lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/dep/ios_X86_64//tensorflow/core/kernels/reduction_ops_common.Td -I. -I&lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/ -I&lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/eigen -I&lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/gemmlowp -I&lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/proto/ -I&lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/proto_text/ -I&lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/protobuf-host/include -I/usr/local/include -c tensorflow/core/kernels/reduction_ops_common.cc -o &lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_common.o\nclang: error: unable to execute command: Segmentation fault: 11\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\nApple LLVM version 8.1.0 (clang-802.0.42)\nTarget: x86_64-apple-darwin16.7.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\nclang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.\nclang: note: diagnostic msg: \n********************\n\nPLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:\nPreprocessed source(s) and associated run script(s) are located at:\nclang: note: diagnostic msg: /var/folders/xy/txmq57f90mq40d8ltjxhkqgm0000gn/T/reduction_ops_sum-5e29c4.cpp\nclang: note: diagnostic msg: /var/folders/xy/txmq57f90mq40d8ltjxhkqgm0000gn/T/reduction_ops_sum-5e29c4.sh\nclang: note: diagnostic msg: Crash backtrace is located in\nclang: note: diagnostic msg: /Users/era/Library/Logs/DiagnosticReports/clang_&lt;YYYY-MM-DD-HHMMSS&gt;_&lt;hostname&gt;.crash\nclang: note: diagnostic msg: (choose the .crash file that corresponds to your crash)\nclang: note: diagnostic msg: \n\n********************\nmake: *** [&lt;REDACTED&gt;/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_sum.o] Error 254\nmake: *** Waiting for unfinished jobs....\n+ '[' 2 -ne 0 ']'\n+ echo 'x86_64 compilation failed.'\nx86_64 compilation failed.\n+ exit 1\n</code></pre>\n<p>System MacOS Sierra 10.12.6 (16G29)</p>\n<p>It also seems to fail with other error messages in different compile runs (on different files of course) like <code>clang: error: unable to execute command: Illegal instruction: 4</code> or malloc/free errors.</p>", "body_text": "I've built TF 1.1 before without problems as follows\ngit clone --branch r1.1 https://github.com/tensorflow/tensorflow.git\n./<makefile_dir>/build_all_ios.sh\n\nIf I change the branch to r1.3 it stops with a segmentation fault. Also seems to happen with r1.2.\n...\ngcc --std=c++11 -DIS_SLIM_BUILD -fno-exceptions -DNDEBUG -O3 -mios-simulator-version-min=8.0 -arch x86_64 -fembed-bitcode -D__thread= -DUSE_GEMM_FOR_CONV -Wno-c++11-narrowing -DTF_LEAN_BINARY -D__ANDROID_TYPES_SLIM__ -fno-exceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.3.sdk -MT <REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_common.o -MMD -MP -MF <REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/dep/ios_X86_64//tensorflow/core/kernels/reduction_ops_common.Td -I. -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/ -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/eigen -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/gemmlowp -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/proto/ -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/proto_text/ -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/protobuf-host/include -I/usr/local/include -c tensorflow/core/kernels/reduction_ops_common.cc -o <REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_common.o\nclang: error: unable to execute command: Segmentation fault: 11\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\nApple LLVM version 8.1.0 (clang-802.0.42)\nTarget: x86_64-apple-darwin16.7.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\nclang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.\nclang: note: diagnostic msg: \n********************\n\nPLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:\nPreprocessed source(s) and associated run script(s) are located at:\nclang: note: diagnostic msg: /var/folders/xy/txmq57f90mq40d8ltjxhkqgm0000gn/T/reduction_ops_sum-5e29c4.cpp\nclang: note: diagnostic msg: /var/folders/xy/txmq57f90mq40d8ltjxhkqgm0000gn/T/reduction_ops_sum-5e29c4.sh\nclang: note: diagnostic msg: Crash backtrace is located in\nclang: note: diagnostic msg: /Users/era/Library/Logs/DiagnosticReports/clang_<YYYY-MM-DD-HHMMSS>_<hostname>.crash\nclang: note: diagnostic msg: (choose the .crash file that corresponds to your crash)\nclang: note: diagnostic msg: \n\n********************\nmake: *** [<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_sum.o] Error 254\nmake: *** Waiting for unfinished jobs....\n+ '[' 2 -ne 0 ']'\n+ echo 'x86_64 compilation failed.'\nx86_64 compilation failed.\n+ exit 1\n\nSystem MacOS Sierra 10.12.6 (16G29)\nIt also seems to fail with other error messages in different compile runs (on different files of course) like clang: error: unable to execute command: Illegal instruction: 4 or malloc/free errors.", "body": "I've built TF 1.1 before without problems as follows\r\n\r\n    git clone --branch r1.1 https://github.com/tensorflow/tensorflow.git\r\n    ./<makefile_dir>/build_all_ios.sh\r\n\r\nIf I change the branch to `r1.3` it stops with a segmentation fault. Also seems to happen with `r1.2`.\r\n\r\n```\r\n...\r\ngcc --std=c++11 -DIS_SLIM_BUILD -fno-exceptions -DNDEBUG -O3 -mios-simulator-version-min=8.0 -arch x86_64 -fembed-bitcode -D__thread= -DUSE_GEMM_FOR_CONV -Wno-c++11-narrowing -DTF_LEAN_BINARY -D__ANDROID_TYPES_SLIM__ -fno-exceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.3.sdk -MT <REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_common.o -MMD -MP -MF <REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/dep/ios_X86_64//tensorflow/core/kernels/reduction_ops_common.Td -I. -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/ -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/eigen -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/downloads/gemmlowp -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/proto/ -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/proto_text/ -I<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/protobuf-host/include -I/usr/local/include -c tensorflow/core/kernels/reduction_ops_common.cc -o <REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_common.o\r\nclang: error: unable to execute command: Segmentation fault: 11\r\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\r\nApple LLVM version 8.1.0 (clang-802.0.42)\r\nTarget: x86_64-apple-darwin16.7.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\nclang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.\r\nclang: note: diagnostic msg: \r\n********************\r\n\r\nPLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:\r\nPreprocessed source(s) and associated run script(s) are located at:\r\nclang: note: diagnostic msg: /var/folders/xy/txmq57f90mq40d8ltjxhkqgm0000gn/T/reduction_ops_sum-5e29c4.cpp\r\nclang: note: diagnostic msg: /var/folders/xy/txmq57f90mq40d8ltjxhkqgm0000gn/T/reduction_ops_sum-5e29c4.sh\r\nclang: note: diagnostic msg: Crash backtrace is located in\r\nclang: note: diagnostic msg: /Users/era/Library/Logs/DiagnosticReports/clang_<YYYY-MM-DD-HHMMSS>_<hostname>.crash\r\nclang: note: diagnostic msg: (choose the .crash file that corresponds to your crash)\r\nclang: note: diagnostic msg: \r\n\r\n********************\r\nmake: *** [<REDACTED>/tfbuild/tensorflow/tensorflow/contrib/makefile/gen/obj/ios_X86_64/tensorflow/core/kernels/reduction_ops_sum.o] Error 254\r\nmake: *** Waiting for unfinished jobs....\r\n+ '[' 2 -ne 0 ']'\r\n+ echo 'x86_64 compilation failed.'\r\nx86_64 compilation failed.\r\n+ exit 1\r\n```\r\n\r\nSystem MacOS Sierra 10.12.6 (16G29)\r\n\r\nIt also seems to fail with other error messages in different compile runs (on different files of course) like `clang: error: unable to execute command: Illegal instruction: 4` or malloc/free errors."}
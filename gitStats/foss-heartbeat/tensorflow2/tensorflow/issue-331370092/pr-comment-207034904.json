{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/207034904", "pull_request_review_id": 142567300, "id": 207034904, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzAzNDkwNA==", "diff_hunk": "@@ -29,6 +29,13 @@\n from tensorflow.python.platform import gfile\n from tensorflow.python.summary import summary\n \n+# Try importing TensorRT ops if available\n+# pylint: disable=unused-import,trailing-whitespace,g-import-not-at-top,wildcard-import\n+try:\n+  from tensorflow.contrib.tensorrt.ops.gen_trt_engine_op import *", "path": "tensorflow/python/tools/import_pb_to_tensorboard.py", "position": null, "original_position": 7, "commit_id": "8636c6dbbe1446cc139e6c23a435ca7cd0844fca", "original_commit_id": "5fc6ebb1db3b7714f5449737438ac5007abbb410", "user": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "body": "I think a better solution will be something like:\r\n\r\n1. add `from tensorflow.contrib import tensorrt` to `tensorflow/contrib/__init__.py`\r\n2. add dependency `\"//tensorflow/contrib:contrib_py\"` to the build rule of this file in `tensorflow/python/tools/BUILD`\r\n3. add `from tensorflow.contrib import *` to this file\r\n\r\nBut there is a problem with the `import tensorrt` in `contrib/__init__.py`: \r\n```\r\n  File \"...org_tensorflow/tensorflow/contrib/tensorrt/wrap_conversion.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_wrap_conversion', fp, pathname, description)\r\nImportError: dynamic module does not define init function (init_wrap_conversion)\r\n```\r\n\r\nSo this could be a TODO. Would you help to add the TODO?\r\nAlso could you also add the build dependency to the BUILD rule of this file (step2)?", "created_at": "2018-08-01T21:18:48Z", "updated_at": "2018-08-03T21:54:19Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/19920#discussion_r207034904", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19920", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/207034904"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/19920#discussion_r207034904"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19920"}}, "body_html": "<p>I think a better solution will be something like:</p>\n<ol>\n<li>add <code>from tensorflow.contrib import tensorrt</code> to <code>tensorflow/contrib/__init__.py</code></li>\n<li>add dependency <code>\"//tensorflow/contrib:contrib_py\"</code> to the build rule of this file in <code>tensorflow/python/tools/BUILD</code></li>\n<li>add <code>from tensorflow.contrib import *</code> to this file</li>\n</ol>\n<p>But there is a problem with the <code>import tensorrt</code> in <code>contrib/__init__.py</code>:</p>\n<pre><code>  File \"...org_tensorflow/tensorflow/contrib/tensorrt/wrap_conversion.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_wrap_conversion', fp, pathname, description)\nImportError: dynamic module does not define init function (init_wrap_conversion)\n</code></pre>\n<p>So this could be a TODO. Would you help to add the TODO?<br>\nAlso could you also add the build dependency to the BUILD rule of this file (step2)?</p>", "body_text": "I think a better solution will be something like:\n\nadd from tensorflow.contrib import tensorrt to tensorflow/contrib/__init__.py\nadd dependency \"//tensorflow/contrib:contrib_py\" to the build rule of this file in tensorflow/python/tools/BUILD\nadd from tensorflow.contrib import * to this file\n\nBut there is a problem with the import tensorrt in contrib/__init__.py:\n  File \"...org_tensorflow/tensorflow/contrib/tensorrt/wrap_conversion.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_wrap_conversion', fp, pathname, description)\nImportError: dynamic module does not define init function (init_wrap_conversion)\n\nSo this could be a TODO. Would you help to add the TODO?\nAlso could you also add the build dependency to the BUILD rule of this file (step2)?", "in_reply_to_id": 200504592}
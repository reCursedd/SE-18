{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/260483344", "html_url": "https://github.com/tensorflow/tensorflow/issues/5516#issuecomment-260483344", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5516", "id": 260483344, "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDQ4MzM0NA==", "user": {"login": "zhangyaobit", "id": 1034716, "node_id": "MDQ6VXNlcjEwMzQ3MTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1034716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangyaobit", "html_url": "https://github.com/zhangyaobit", "followers_url": "https://api.github.com/users/zhangyaobit/followers", "following_url": "https://api.github.com/users/zhangyaobit/following{/other_user}", "gists_url": "https://api.github.com/users/zhangyaobit/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangyaobit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangyaobit/subscriptions", "organizations_url": "https://api.github.com/users/zhangyaobit/orgs", "repos_url": "https://api.github.com/users/zhangyaobit/repos", "events_url": "https://api.github.com/users/zhangyaobit/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangyaobit/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-14T22:25:22Z", "updated_at": "2016-11-14T22:25:22Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Looks like your Timeline is a profiling run that tries multiple conv2d implementations to find the best one, rather than a later run that uses the previously found best implementation.</p>\n<p>It might be that somehow the benchmark is not written in a standard way, and as a result it is always running the profiling runs.</p>\n<p>As you see, each conv layers actually invoked multiple runs:</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/1034716/20285252/b46c6896-aa75-11e6-815d-25be068acf6c.png\"><img src=\"https://cloud.githubusercontent.com/assets/1034716/20285252/b46c6896-aa75-11e6-815d-25be068acf6c.png\" alt=\"apy0wpg5toh\" style=\"max-width:100%;\"></a></p>\n<p>After this is fixed, you can try NCHW again. Because I'm thinking your previous comparison might be between  NCHW and NHWC in the profiling mode, rather than in the regular mode.</p>", "body_text": "Looks like your Timeline is a profiling run that tries multiple conv2d implementations to find the best one, rather than a later run that uses the previously found best implementation.\nIt might be that somehow the benchmark is not written in a standard way, and as a result it is always running the profiling runs.\nAs you see, each conv layers actually invoked multiple runs:\n\nAfter this is fixed, you can try NCHW again. Because I'm thinking your previous comparison might be between  NCHW and NHWC in the profiling mode, rather than in the regular mode.", "body": "Looks like your Timeline is a profiling run that tries multiple conv2d implementations to find the best one, rather than a later run that uses the previously found best implementation. \n\nIt might be that somehow the benchmark is not written in a standard way, and as a result it is always running the profiling runs.\n\nAs you see, each conv layers actually invoked multiple runs:\n\n![apy0wpg5toh](https://cloud.githubusercontent.com/assets/1034716/20285252/b46c6896-aa75-11e6-815d-25be068acf6c.png)\n\nAfter this is fixed, you can try NCHW again. Because I'm thinking your previous comparison might be between  NCHW and NHWC in the profiling mode, rather than in the regular mode.\n"}
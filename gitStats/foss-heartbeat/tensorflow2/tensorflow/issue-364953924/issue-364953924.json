{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22598", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22598/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22598/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22598/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22598", "id": 364953924, "node_id": "MDU6SXNzdWUzNjQ5NTM5MjQ=", "number": 22598, "title": "Empty tfrecord in gcs would fail the TFRecordDataset.read", "user": {"login": "yupbank", "id": 741544, "node_id": "MDQ6VXNlcjc0MTU0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/741544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yupbank", "html_url": "https://github.com/yupbank", "followers_url": "https://api.github.com/users/yupbank/followers", "following_url": "https://api.github.com/users/yupbank/following{/other_user}", "gists_url": "https://api.github.com/users/yupbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/yupbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yupbank/subscriptions", "organizations_url": "https://api.github.com/users/yupbank/orgs", "repos_url": "https://api.github.com/users/yupbank/repos", "events_url": "https://api.github.com/users/yupbank/events{/privacy}", "received_events_url": "https://api.github.com/users/yupbank/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-09-28T16:12:45Z", "updated_at": "2018-11-12T18:52:29Z", "closed_at": null, "author_association": "MEMBER", "body_html": "<p>The behaviour of gcs(google cloud file storage) file system is different than local file system.</p>\n<p>as <code>tf.gfile.Open('local_empty.tfrecord').read(100000000) == ''</code><br>\nwhile <code>tf.gfile.Open('gcs_empty_file.tfrecord').read(1000000)=='Out[11]: \"&lt;?xml version='1.0' encoding='UTF-8'?&gt;&lt;Error&gt;&lt;Code&gt;InvalidRange&lt;/Code&gt;&lt;Message&gt;The requested range cannot be satisfied.&lt;/Message&gt;&lt;Details&gt;bytes=some number&lt;/Details&gt;&lt;/Error&gt;\"'</code></p>\n<p>so when we use <code>tf.data.TFRecordDataset</code> to process the tfrecord in the gcs, there would be<br>\n<code>DataLossError</code></p>\n<h2>such as here <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"262402818\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/13463\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/13463/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/13463\">#13463</a></h2>", "body_text": "The behaviour of gcs(google cloud file storage) file system is different than local file system.\nas tf.gfile.Open('local_empty.tfrecord').read(100000000) == ''\nwhile tf.gfile.Open('gcs_empty_file.tfrecord').read(1000000)=='Out[11]: \"<?xml version='1.0' encoding='UTF-8'?><Error><Code>InvalidRange</Code><Message>The requested range cannot be satisfied.</Message><Details>bytes=some number</Details></Error>\"'\nso when we use tf.data.TFRecordDataset to process the tfrecord in the gcs, there would be\nDataLossError\nsuch as here #13463", "body": "The behaviour of gcs(google cloud file storage) file system is different than local file system. \r\n\r\nas `tf.gfile.Open('local_empty.tfrecord').read(100000000) == ''`\r\nwhile `tf.gfile.Open('gcs_empty_file.tfrecord').read(1000000)=='Out[11]: \"<?xml version='1.0' encoding='UTF-8'?><Error><Code>InvalidRange</Code><Message>The requested range cannot be satisfied.</Message><Details>bytes=some number</Details></Error>\"'`\r\n\r\nso when we use `tf.data.TFRecordDataset` to process the tfrecord in the gcs, there would be \r\n`DataLossError`\r\n\r\nsuch as here https://github.com/tensorflow/tensorflow/issues/13463\r\n---\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3826", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3826/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3826/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3826/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3826", "id": 171247349, "node_id": "MDU6SXNzdWUxNzEyNDczNDk=", "number": 3826, "title": "GPU-enabled Mac build of TensorFlow version 0.10.0rc0-py2 was compiled against cuDNN v5", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-08-15T19:51:56Z", "updated_at": "2016-09-01T03:09:20Z", "closed_at": "2016-09-01T03:09:20Z", "author_association": "NONE", "body_html": "<h3>Environment info</h3>\n<p>Operating System: OS X 'El Capitan' Version 10.11.6 (15G31)</p>\n<p>Installed version of CUDA and cuDNN: cuda_7.5.27_mac, cudnn-7.5-osx-x64-v5.0-ga (I explain why I am using cuDNN v5 rather than cuDNN v4 below.)<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<pre>lrwxr-xr-x@ 1 root  wheel    50 Apr 13 02:03 libcublas.7.5.dylib -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcublas.7.5.dylib\nlrwxr-xr-x@ 1 root  wheel    46 Apr 13 02:03 libcublas.dylib -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcublas.dylib\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcublas_device.a -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcublas_device.a\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcublas_static.a -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcublas_static.a\n-rwxr-xr-x  2 root  wheel  8280 May 11 04:59 libcuda.1.dylib\n-rwxr-xr-x  2 root  wheel  8280 May 11 04:59 libcuda.dylib\nlrwxr-xr-x@ 1 root  wheel    45 Apr 13 02:03 libcudadevrt.a -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\nlrwxr-xr-x@ 1 root  wheel    50 Apr 13 02:03 libcudart.7.5.dylib -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\nlrwxr-xr-x@ 1 root  wheel    46 Apr 13 02:03 libcudart.dylib -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcudart_static.a -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\nlrwxr-xr-x  1 root  admin    47 Aug 15 14:24 libcudnn.5.dylib -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudnn.5.dylib\nlrwxr-xr-x  1 root  admin    45 Aug 15 14:24 libcudnn.dylib -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudnn.dylib\nlrwxr-xr-x  1 root  admin    48 Aug 15 14:24 libcudnn_static.a -&gt; /Developer/NVIDIA/CUDA-7.5/lib/libcudnn_static.a\n</pre>\n<p><code>libcuda.1.dylib</code> is a hard link to <code>libcuda.dylib</code> per <a href=\"https://github.com/tensorflow/tensorflow/issues/2940#issuecomment-238952433\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2940/hovercard\">this comment</a>.</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed: <code>export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/gpu/tensorflow-0.10.0rc0-py2-none-any.whl</code></li>\n<li>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>: 0.10.0rc0</li>\n</ol>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>)</li>\n<li>The output of <code>bazel version</code></li>\n</ol>\n<h3>Steps to reproduce</h3>\n<ol>\n<li>\n<p>Set up TensorFlow according to the instructions at <a href=\"https://www.tensorflow.org/versions/r0.10/get_started/os_setup.html#prepare_environment_for_mac_os_x\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.10/get_started/os_setup.html#prepare_environment_for_mac_os_x</a></p>\n<p>In particular, the page says to install cuDNN v4, which is labeled \"cuDNN v4 (Feb 10, 2016), for CUDA 7.0 and later.\" on the <a href=\"https://developer.nvidia.com/rdp/cudnn-download\" rel=\"nofollow\">cuDNN Download page</a>.</p>\n</li>\n<li>\n<p>Test the installation by running:</p>\n<p><code>python -m tensorflow.models.image.mnist.convolutional</code></p>\n<p>You should see:</p>\n<blockquote>\n<p>E tensorflow/stream_executor/cuda/cuda_dnn.cc:354] could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR<br>\nE tensorflow/stream_executor/cuda/cuda_dnn.cc:321] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM</p>\n</blockquote>\n</li>\n<li>\n<p>Now run the test under <code>cuda-memcheck</code>:</p>\n<p><code>cuda-memcheck python -m tensorflow.models.image.mnist.convolutional</code></p>\n<p>You should see:</p>\n<blockquote>\n<p>E tensorflow/stream_executor/cuda/cuda_dnn.cc:347] Loaded runtime CuDNN library: 4007 (compatibility version 4000) but source was compiled with 5005 (compatibility version 5000).  If using a binary install, upgrade your CuDNN library to match.  If building from sources, make sure the library loaded at runtime matches a compatible version specified during compile configuration.</p>\n</blockquote>\n</li>\n</ol>\n<h3>What have you tried?</h3>\n<p>Uninstalling cuDNN v4 and installing cuDNN v5 (labeled \"cuDNN v5 (May 12, 2016), for CUDA 7.5\" on the cuDNN Download page) fixes the issue.</p>\n<p>I think that either TensorFlow should be built with cuDNN v4 or the installation instructions should be corrected to specify that cuDNN v5 should be installed.</p>", "body_text": "Environment info\nOperating System: OS X 'El Capitan' Version 10.11.6 (15G31)\nInstalled version of CUDA and cuDNN: cuda_7.5.27_mac, cudnn-7.5-osx-x64-v5.0-ga (I explain why I am using cuDNN v5 rather than cuDNN v4 below.)\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nlrwxr-xr-x@ 1 root  wheel    50 Apr 13 02:03 libcublas.7.5.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcublas.7.5.dylib\nlrwxr-xr-x@ 1 root  wheel    46 Apr 13 02:03 libcublas.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcublas.dylib\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcublas_device.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcublas_device.a\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcublas_static.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcublas_static.a\n-rwxr-xr-x  2 root  wheel  8280 May 11 04:59 libcuda.1.dylib\n-rwxr-xr-x  2 root  wheel  8280 May 11 04:59 libcuda.dylib\nlrwxr-xr-x@ 1 root  wheel    45 Apr 13 02:03 libcudadevrt.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\nlrwxr-xr-x@ 1 root  wheel    50 Apr 13 02:03 libcudart.7.5.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\nlrwxr-xr-x@ 1 root  wheel    46 Apr 13 02:03 libcudart.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcudart_static.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\nlrwxr-xr-x  1 root  admin    47 Aug 15 14:24 libcudnn.5.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudnn.5.dylib\nlrwxr-xr-x  1 root  admin    45 Aug 15 14:24 libcudnn.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudnn.dylib\nlrwxr-xr-x  1 root  admin    48 Aug 15 14:24 libcudnn_static.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudnn_static.a\n\nlibcuda.1.dylib is a hard link to libcuda.dylib per this comment.\nIf installed from binary pip package, provide:\n\nWhich pip package you installed: export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/gpu/tensorflow-0.10.0rc0-py2-none-any.whl\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\": 0.10.0rc0\n\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD)\nThe output of bazel version\n\nSteps to reproduce\n\n\nSet up TensorFlow according to the instructions at https://www.tensorflow.org/versions/r0.10/get_started/os_setup.html#prepare_environment_for_mac_os_x\nIn particular, the page says to install cuDNN v4, which is labeled \"cuDNN v4 (Feb 10, 2016), for CUDA 7.0 and later.\" on the cuDNN Download page.\n\n\nTest the installation by running:\npython -m tensorflow.models.image.mnist.convolutional\nYou should see:\n\nE tensorflow/stream_executor/cuda/cuda_dnn.cc:354] could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\nE tensorflow/stream_executor/cuda/cuda_dnn.cc:321] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM\n\n\n\nNow run the test under cuda-memcheck:\ncuda-memcheck python -m tensorflow.models.image.mnist.convolutional\nYou should see:\n\nE tensorflow/stream_executor/cuda/cuda_dnn.cc:347] Loaded runtime CuDNN library: 4007 (compatibility version 4000) but source was compiled with 5005 (compatibility version 5000).  If using a binary install, upgrade your CuDNN library to match.  If building from sources, make sure the library loaded at runtime matches a compatible version specified during compile configuration.\n\n\n\nWhat have you tried?\nUninstalling cuDNN v4 and installing cuDNN v5 (labeled \"cuDNN v5 (May 12, 2016), for CUDA 7.5\" on the cuDNN Download page) fixes the issue.\nI think that either TensorFlow should be built with cuDNN v4 or the installation instructions should be corrected to specify that cuDNN v5 should be installed.", "body": "### Environment info\n\nOperating System: OS X 'El Capitan' Version 10.11.6 (15G31)\n\nInstalled version of CUDA and cuDNN: cuda_7.5.27_mac, cudnn-7.5-osx-x64-v5.0-ga (I explain why I am using cuDNN v5 rather than cuDNN v4 below.)\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n<pre>\nlrwxr-xr-x@ 1 root  wheel    50 Apr 13 02:03 libcublas.7.5.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcublas.7.5.dylib\nlrwxr-xr-x@ 1 root  wheel    46 Apr 13 02:03 libcublas.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcublas.dylib\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcublas_device.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcublas_device.a\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcublas_static.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcublas_static.a\n-rwxr-xr-x  2 root  wheel  8280 May 11 04:59 libcuda.1.dylib\n-rwxr-xr-x  2 root  wheel  8280 May 11 04:59 libcuda.dylib\nlrwxr-xr-x@ 1 root  wheel    45 Apr 13 02:03 libcudadevrt.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudadevrt.a\nlrwxr-xr-x@ 1 root  wheel    50 Apr 13 02:03 libcudart.7.5.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.7.5.dylib\nlrwxr-xr-x@ 1 root  wheel    46 Apr 13 02:03 libcudart.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart.dylib\nlrwxr-xr-x@ 1 root  wheel    49 Apr 13 02:03 libcudart_static.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudart_static.a\nlrwxr-xr-x  1 root  admin    47 Aug 15 14:24 libcudnn.5.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudnn.5.dylib\nlrwxr-xr-x  1 root  admin    45 Aug 15 14:24 libcudnn.dylib -> /Developer/NVIDIA/CUDA-7.5/lib/libcudnn.dylib\nlrwxr-xr-x  1 root  admin    48 Aug 15 14:24 libcudnn_static.a -> /Developer/NVIDIA/CUDA-7.5/lib/libcudnn_static.a\n</pre>\n\n\n`libcuda.1.dylib` is a hard link to `libcuda.dylib` per [this comment](https://github.com/tensorflow/tensorflow/issues/2940#issuecomment-238952433).\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed: `export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/gpu/tensorflow-0.10.0rc0-py2-none-any.whl`\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`: 0.10.0rc0\n\nIf installed from source, provide \n1. The commit hash (`git rev-parse HEAD`)\n2. The output of `bazel version`\n### Steps to reproduce\n1. Set up TensorFlow according to the instructions at https://www.tensorflow.org/versions/r0.10/get_started/os_setup.html#prepare_environment_for_mac_os_x\n   \n   In particular, the page says to install cuDNN v4, which is labeled \"cuDNN v4 (Feb 10, 2016), for CUDA 7.0 and later.\" on the [cuDNN Download page](https://developer.nvidia.com/rdp/cudnn-download).\n2. Test the installation by running:\n   \n   `python -m tensorflow.models.image.mnist.convolutional`\n   \n   You should see:\n   \n   > E tensorflow/stream_executor/cuda/cuda_dnn.cc:354] could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR  \n   > E tensorflow/stream_executor/cuda/cuda_dnn.cc:321] could not destroy cudnn handle: CUDNN_STATUS_BAD_PARAM\n3. Now run the test under `cuda-memcheck`:\n   \n   `cuda-memcheck python -m tensorflow.models.image.mnist.convolutional`\n   \n   You should see:\n   \n   > E tensorflow/stream_executor/cuda/cuda_dnn.cc:347] Loaded runtime CuDNN library: 4007 (compatibility version 4000) but source was compiled with 5005 (compatibility version 5000).  If using a binary install, upgrade your CuDNN library to match.  If building from sources, make sure the library loaded at runtime matches a compatible version specified during compile configuration.\n### What have you tried?\n\nUninstalling cuDNN v4 and installing cuDNN v5 (labeled \"cuDNN v5 (May 12, 2016), for CUDA 7.5\" on the cuDNN Download page) fixes the issue.\n\nI think that either TensorFlow should be built with cuDNN v4 or the installation instructions should be corrected to specify that cuDNN v5 should be installed.\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19096", "id": 186120224, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg2MTIwMjI0", "html_url": "https://github.com/tensorflow/tensorflow/pull/19096", "diff_url": "https://github.com/tensorflow/tensorflow/pull/19096.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/19096.patch", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19096", "number": 19096, "state": "closed", "locked": false, "title": "Include ThenBlasGemm", "user": {"login": "bstriner", "id": 12462956, "node_id": "MDQ6VXNlcjEyNDYyOTU2", "avatar_url": "https://avatars3.githubusercontent.com/u/12462956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstriner", "html_url": "https://github.com/bstriner", "followers_url": "https://api.github.com/users/bstriner/followers", "following_url": "https://api.github.com/users/bstriner/following{/other_user}", "gists_url": "https://api.github.com/users/bstriner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstriner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstriner/subscriptions", "organizations_url": "https://api.github.com/users/bstriner/orgs", "repos_url": "https://api.github.com/users/bstriner/repos", "events_url": "https://api.github.com/users/bstriner/events{/privacy}", "received_events_url": "https://api.github.com/users/bstriner/received_events", "type": "User", "site_admin": false}, "body": "Hi everybody,\r\n\r\nI'm getting an unresolved external symbol `ThenBlasGemm` when compiling for GPU with CMake using MSVC 2015. This function isn't picked up by the script to create the def file for the DLL, so it isn't being exported. This PR just adds that function to the regex so the build works. Linker error below.\r\n\r\nDoes Windows CMake GPU not go through CI? I'm curious why this hasn't come up before.\r\n\r\nCheers\r\n\r\n```\r\n[D:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\buildout\\_gru_ops.vcxproj]\r\n   199>blas_gemm.obj : error LNK2019: unresolved external symbol \"public: class stream_executor::Stream & __cdecl stream_executor::Stream::ThenBlasGemm(enum stream_executor::blas::Transpose,enum stream_executor::blas::Transpose,unsigned __int64,unsigned __int64,unsigned __int64,double,class stream_executor::DeviceMemory<double> const &,int,class stream_executor::DeviceMemory<double> const &,int,double,class stream_executor::DeviceMemory<double> *,int)\" (?ThenBlasGemm@Stream@stream_executor@@QEAAAEAV12@W4Transpose@blas@2@0_K11NAEBV?$DeviceMemory@N@2@H2HNPEAV52@H@Z) referenced in function \"public: void __cdecl tensorflow::functor::TensorCuBlasGemm<double>::operator()(class tensorflow::OpKernelContext *,bool,bool,unsigned __int64,unsigned __int64,unsigned __int64,double,double const *,int,double const *,int,double,double *,int)\" (??R?$TensorCuBlasGemm@N@functor@tensorflow@@QEAAXPEAVOpKernelContext@2@_N1_K22NPEBNH3HNPEANH@Z) \r\n```", "created_at": "2018-05-04T22:49:55Z", "updated_at": "2018-06-05T14:47:41Z", "closed_at": "2018-06-05T08:12:37Z", "merged_at": null, "merge_commit_sha": "7cb091b467be6e689e1b96b1b4440cb39aa176ea", "assignee": {"login": "protoget", "id": 5117188, "node_id": "MDQ6VXNlcjUxMTcxODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5117188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/protoget", "html_url": "https://github.com/protoget", "followers_url": "https://api.github.com/users/protoget/followers", "following_url": "https://api.github.com/users/protoget/following{/other_user}", "gists_url": "https://api.github.com/users/protoget/gists{/gist_id}", "starred_url": "https://api.github.com/users/protoget/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/protoget/subscriptions", "organizations_url": "https://api.github.com/users/protoget/orgs", "repos_url": "https://api.github.com/users/protoget/repos", "events_url": "https://api.github.com/users/protoget/events{/privacy}", "received_events_url": "https://api.github.com/users/protoget/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "protoget", "id": 5117188, "node_id": "MDQ6VXNlcjUxMTcxODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5117188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/protoget", "html_url": "https://github.com/protoget", "followers_url": "https://api.github.com/users/protoget/followers", "following_url": "https://api.github.com/users/protoget/following{/other_user}", "gists_url": "https://api.github.com/users/protoget/gists{/gist_id}", "starred_url": "https://api.github.com/users/protoget/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/protoget/subscriptions", "organizations_url": "https://api.github.com/users/protoget/orgs", "repos_url": "https://api.github.com/users/protoget/repos", "events_url": "https://api.github.com/users/protoget/events{/privacy}", "received_events_url": "https://api.github.com/users/protoget/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19096/commits", "review_comments_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19096/comments", "review_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19096/comments", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/d6a80c8883207113adcc63d27754b3454422ce34", "head": {"label": "bstriner:include_thenblasgemm", "ref": "include_thenblasgemm", "sha": "d6a80c8883207113adcc63d27754b3454422ce34", "user": {"login": "bstriner", "id": 12462956, "node_id": "MDQ6VXNlcjEyNDYyOTU2", "avatar_url": "https://avatars3.githubusercontent.com/u/12462956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstriner", "html_url": "https://github.com/bstriner", "followers_url": "https://api.github.com/users/bstriner/followers", "following_url": "https://api.github.com/users/bstriner/following{/other_user}", "gists_url": "https://api.github.com/users/bstriner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstriner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstriner/subscriptions", "organizations_url": "https://api.github.com/users/bstriner/orgs", "repos_url": "https://api.github.com/users/bstriner/repos", "events_url": "https://api.github.com/users/bstriner/events{/privacy}", "received_events_url": "https://api.github.com/users/bstriner/received_events", "type": "User", "site_admin": false}, "repo": {"id": 117673813, "node_id": "MDEwOlJlcG9zaXRvcnkxMTc2NzM4MTM=", "name": "tensorflow", "full_name": "bstriner/tensorflow", "private": false, "owner": {"login": "bstriner", "id": 12462956, "node_id": "MDQ6VXNlcjEyNDYyOTU2", "avatar_url": "https://avatars3.githubusercontent.com/u/12462956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstriner", "html_url": "https://github.com/bstriner", "followers_url": "https://api.github.com/users/bstriner/followers", "following_url": "https://api.github.com/users/bstriner/following{/other_user}", "gists_url": "https://api.github.com/users/bstriner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstriner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstriner/subscriptions", "organizations_url": "https://api.github.com/users/bstriner/orgs", "repos_url": "https://api.github.com/users/bstriner/repos", "events_url": "https://api.github.com/users/bstriner/events{/privacy}", "received_events_url": "https://api.github.com/users/bstriner/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/bstriner/tensorflow", "description": "Computation using data flow graphs for scalable machine learning", "fork": true, "url": "https://api.github.com/repos/bstriner/tensorflow", "forks_url": "https://api.github.com/repos/bstriner/tensorflow/forks", "keys_url": "https://api.github.com/repos/bstriner/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/bstriner/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/bstriner/tensorflow/teams", "hooks_url": "https://api.github.com/repos/bstriner/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/bstriner/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/bstriner/tensorflow/events", "assignees_url": "https://api.github.com/repos/bstriner/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/bstriner/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/bstriner/tensorflow/tags", "blobs_url": "https://api.github.com/repos/bstriner/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/bstriner/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/bstriner/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/bstriner/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/bstriner/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/bstriner/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/bstriner/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/bstriner/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/bstriner/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/bstriner/tensorflow/subscription", "commits_url": "https://api.github.com/repos/bstriner/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/bstriner/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/bstriner/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/bstriner/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/bstriner/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/bstriner/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/bstriner/tensorflow/merges", "archive_url": "https://api.github.com/repos/bstriner/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/bstriner/tensorflow/downloads", "issues_url": "https://api.github.com/repos/bstriner/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/bstriner/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/bstriner/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/bstriner/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/bstriner/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/bstriner/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/bstriner/tensorflow/deployments", "created_at": "2018-01-16T11:13:47Z", "updated_at": "2018-10-16T17:37:43Z", "pushed_at": "2018-09-23T23:52:55Z", "git_url": "git://github.com/bstriner/tensorflow.git", "ssh_url": "git@github.com:bstriner/tensorflow.git", "clone_url": "https://github.com/bstriner/tensorflow.git", "svn_url": "https://github.com/bstriner/tensorflow", "homepage": "http://tensorflow.org", "size": 256994, "stargazers_count": 1, "watchers_count": 1, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 0, "open_issues": 0, "watchers": 1, "default_branch": "master"}}, "base": {"label": "tensorflow:master", "ref": "master", "sha": "daecc72653e81d3c4592ad4ab246275a2cbd2712", "user": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 45717250, "node_id": "MDEwOlJlcG9zaXRvcnk0NTcxNzI1MA==", "name": "tensorflow", "full_name": "tensorflow/tensorflow", "private": false, "owner": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/tensorflow/tensorflow", "description": "An Open Source Machine Learning Framework for Everyone", "fork": false, "url": "https://api.github.com/repos/tensorflow/tensorflow", "forks_url": "https://api.github.com/repos/tensorflow/tensorflow/forks", "keys_url": "https://api.github.com/repos/tensorflow/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/tensorflow/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/tensorflow/tensorflow/teams", "hooks_url": "https://api.github.com/repos/tensorflow/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/events", "assignees_url": "https://api.github.com/repos/tensorflow/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/tensorflow/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/tensorflow/tensorflow/tags", "blobs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/tensorflow/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/tensorflow/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/tensorflow/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/tensorflow/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/tensorflow/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/tensorflow/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/tensorflow/tensorflow/subscription", "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/tensorflow/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/tensorflow/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/tensorflow/tensorflow/merges", "archive_url": "https://api.github.com/repos/tensorflow/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/tensorflow/tensorflow/downloads", "issues_url": "https://api.github.com/repos/tensorflow/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/tensorflow/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/tensorflow/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/tensorflow/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/tensorflow/tensorflow/deployments", "created_at": "2015-11-07T01:19:20Z", "updated_at": "2018-11-25T01:43:55Z", "pushed_at": "2018-11-24T18:40:19Z", "git_url": "git://github.com/tensorflow/tensorflow.git", "ssh_url": "git@github.com:tensorflow/tensorflow.git", "clone_url": "https://github.com/tensorflow/tensorflow.git", "svn_url": "https://github.com/tensorflow/tensorflow", "homepage": "https://tensorflow.org", "size": 284546, "stargazers_count": 115177, "watchers_count": 115177, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 69948, "mirror_url": null, "archived": false, "open_issues_count": 1760, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 69948, "open_issues": 1760, "watchers": 115177, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19096"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/19096"}, "issue": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/19096"}, "comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/19096/comments"}, "review_comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19096/comments"}, "review_comment": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/19096/commits"}, "statuses": {"href": "https://api.github.com/repos/tensorflow/tensorflow/statuses/d6a80c8883207113adcc63d27754b3454422ce34"}}, "author_association": "CONTRIBUTOR", "body_html": "<p>Hi everybody,</p>\n<p>I'm getting an unresolved external symbol <code>ThenBlasGemm</code> when compiling for GPU with CMake using MSVC 2015. This function isn't picked up by the script to create the def file for the DLL, so it isn't being exported. This PR just adds that function to the regex so the build works. Linker error below.</p>\n<p>Does Windows CMake GPU not go through CI? I'm curious why this hasn't come up before.</p>\n<p>Cheers</p>\n<pre><code>[D:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\buildout\\_gru_ops.vcxproj]\n   199&gt;blas_gemm.obj : error LNK2019: unresolved external symbol \"public: class stream_executor::Stream &amp; __cdecl stream_executor::Stream::ThenBlasGemm(enum stream_executor::blas::Transpose,enum stream_executor::blas::Transpose,unsigned __int64,unsigned __int64,unsigned __int64,double,class stream_executor::DeviceMemory&lt;double&gt; const &amp;,int,class stream_executor::DeviceMemory&lt;double&gt; const &amp;,int,double,class stream_executor::DeviceMemory&lt;double&gt; *,int)\" (?ThenBlasGemm@Stream@stream_executor@@QEAAAEAV12@W4Transpose@blas@2@0_K11NAEBV?$DeviceMemory@N@2@H2HNPEAV52@H@Z) referenced in function \"public: void __cdecl tensorflow::functor::TensorCuBlasGemm&lt;double&gt;::operator()(class tensorflow::OpKernelContext *,bool,bool,unsigned __int64,unsigned __int64,unsigned __int64,double,double const *,int,double const *,int,double,double *,int)\" (??R?$TensorCuBlasGemm@N@functor@tensorflow@@QEAAXPEAVOpKernelContext@2@_N1_K22NPEBNH3HNPEANH@Z) \n</code></pre>", "body_text": "Hi everybody,\nI'm getting an unresolved external symbol ThenBlasGemm when compiling for GPU with CMake using MSVC 2015. This function isn't picked up by the script to create the def file for the DLL, so it isn't being exported. This PR just adds that function to the regex so the build works. Linker error below.\nDoes Windows CMake GPU not go through CI? I'm curious why this hasn't come up before.\nCheers\n[D:\\Projects\\tensorflow\\tensorflow\\contrib\\cmake\\buildout\\_gru_ops.vcxproj]\n   199>blas_gemm.obj : error LNK2019: unresolved external symbol \"public: class stream_executor::Stream & __cdecl stream_executor::Stream::ThenBlasGemm(enum stream_executor::blas::Transpose,enum stream_executor::blas::Transpose,unsigned __int64,unsigned __int64,unsigned __int64,double,class stream_executor::DeviceMemory<double> const &,int,class stream_executor::DeviceMemory<double> const &,int,double,class stream_executor::DeviceMemory<double> *,int)\" (?ThenBlasGemm@Stream@stream_executor@@QEAAAEAV12@W4Transpose@blas@2@0_K11NAEBV?$DeviceMemory@N@2@H2HNPEAV52@H@Z) referenced in function \"public: void __cdecl tensorflow::functor::TensorCuBlasGemm<double>::operator()(class tensorflow::OpKernelContext *,bool,bool,unsigned __int64,unsigned __int64,unsigned __int64,double,double const *,int,double const *,int,double,double *,int)\" (??R?$TensorCuBlasGemm@N@functor@tensorflow@@QEAAXPEAVOpKernelContext@2@_N1_K22NPEBNH3HNPEANH@Z)", "merged": false, "mergeable": false, "rebaseable": false, "mergeable_state": "dirty", "merged_by": null, "comments": 3, "review_comments": 0, "maintainer_can_modify": false, "commits": 2, "additions": 4, "deletions": 2, "changed_files": 1}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/218221982", "html_url": "https://github.com/tensorflow/tensorflow/issues/2190#issuecomment-218221982", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2190", "id": 218221982, "node_id": "MDEyOklzc3VlQ29tbWVudDIxODIyMTk4Mg==", "user": {"login": "agupta83", "id": 3485158, "node_id": "MDQ6VXNlcjM0ODUxNTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/3485158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agupta83", "html_url": "https://github.com/agupta83", "followers_url": "https://api.github.com/users/agupta83/followers", "following_url": "https://api.github.com/users/agupta83/following{/other_user}", "gists_url": "https://api.github.com/users/agupta83/gists{/gist_id}", "starred_url": "https://api.github.com/users/agupta83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agupta83/subscriptions", "organizations_url": "https://api.github.com/users/agupta83/orgs", "repos_url": "https://api.github.com/users/agupta83/repos", "events_url": "https://api.github.com/users/agupta83/events{/privacy}", "received_events_url": "https://api.github.com/users/agupta83/received_events", "type": "User", "site_admin": false}, "created_at": "2016-05-10T16:58:13Z", "updated_at": "2016-05-10T17:04:21Z", "author_association": "NONE", "body_html": "<p>Hi,<br>\nI am having similar problem on the project I am working. I am implementing <a href=\"http://emnlp2014.org/papers/pdf/EMNLP2014181.pdf\" rel=\"nofollow\">Convolutional Neural Networks for Sentence Classification</a>. I am getting this error irrespective of the parameter I choose. I have tried window size of 3, 4, 5 and various number of filters (32, 64, 128). It crashes at step <strong>8100</strong>  in all the parameter settings.</p>\n<p>Below is small snippet from the log. I have attached complete log file <a href=\"https://gist.github.com/agupta83/ecb3b4a7ba5e948216aa94cba755d26f\">here</a>. I am using TF 0.80 (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/2296dd8060ce77c71fc820c77442835f050399dd/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/2296dd8060ce77c71fc820c77442835f050399dd\"><tt>2296dd8</tt></a>) and cuDNN v4.</p>\n<pre><code>I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.7.5 locally\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:0a:00.0\nTotal memory: 12.00GiB\nFree memory: 11.76GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 1 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:09:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 2 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:06:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 3 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:05:00.0\nTotal memory: 12.00GiB\nFree memory: 11.33GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 1 2 3 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 1:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 2:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 3:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:1) -&gt; (device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:2) -&gt; (device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:3) -&gt; (device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0)\nDevice mapping:\n/job:localhost/replica:0/task:0/gpu:0 -&gt; device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0\n/job:localhost/replica:0/task:0/gpu:1 -&gt; device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0\n/job:localhost/replica:0/task:0/gpu:2 -&gt; device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0\n/job:localhost/replica:0/task:0/gpu:3 -&gt; device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0\nI tensorflow/core/common_runtime/direct_session.cc:151] Device mapping:\n/job:localhost/replica:0/task:0/gpu:0 -&gt; device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0\n/job:localhost/replica:0/task:0/gpu:1 -&gt; device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0\n/job:localhost/replica:0/task:0/gpu:2 -&gt; device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0\n/job:localhost/replica:0/task:0/gpu:3 -&gt; device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0\n\n...\n...\n...\nI tensorflow/core/common_runtime/simple_placer.cc:667] save/control_dependency: /job:localhost/replica:0/task:0/cpu:0\n2016-05-09 18:27:25.888013: step 10, loss = 3.76 (281.4 examples/sec; 0.227 sec/batch)\n2016-05-09 18:27:28.206509: step 20, loss = 3.71 (282.3 examples/sec; 0.227 sec/batch)\n...\n...\n2016-05-09 18:34:27.086410: step 1700, loss = 1.23 (295.2 examples/sec; 0.217 sec/batch)\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:244] PoolAllocator: After 176886 get requests, put_count=175848 evicted_count=1000 eviction_rate=0.00568673 and unsatisfied allocation rate=0.0120869\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:256] Raising pool_size_limit_ from 100 to 110\n2016-05-09 18:34:31.962832: step 1710, loss = 1.16 (291.8 examples/sec; 0.219 sec/batch)\n2016-05-09 18:34:34.287784: step 1720, loss = 0.99 (270.6 examples/sec; 0.237 sec/batch)\n...\n...\n2016-05-09 19:01:22.861471: step 8100, loss = 1.08 (262.5 examples/sec; 0.244 sec/batch)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:917] failed to enqueue convolution on stream: CUDNN_STATUS_MAPPING_ERROR\nAborted (core dumped)\n</code></pre>", "body_text": "Hi,\nI am having similar problem on the project I am working. I am implementing Convolutional Neural Networks for Sentence Classification. I am getting this error irrespective of the parameter I choose. I have tried window size of 3, 4, 5 and various number of filters (32, 64, 128). It crashes at step 8100  in all the parameter settings.\nBelow is small snippet from the log. I have attached complete log file here. I am using TF 0.80 (2296dd8) and cuDNN v4.\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.7.5 locally\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:0a:00.0\nTotal memory: 12.00GiB\nFree memory: 11.76GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 1 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:09:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 2 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:06:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 3 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:05:00.0\nTotal memory: 12.00GiB\nFree memory: 11.33GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 1 2 3 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 1:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 2:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 3:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:1) -> (device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:2) -> (device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:3) -> (device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0)\nDevice mapping:\n/job:localhost/replica:0/task:0/gpu:0 -> device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0\n/job:localhost/replica:0/task:0/gpu:1 -> device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0\n/job:localhost/replica:0/task:0/gpu:2 -> device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0\n/job:localhost/replica:0/task:0/gpu:3 -> device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0\nI tensorflow/core/common_runtime/direct_session.cc:151] Device mapping:\n/job:localhost/replica:0/task:0/gpu:0 -> device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0\n/job:localhost/replica:0/task:0/gpu:1 -> device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0\n/job:localhost/replica:0/task:0/gpu:2 -> device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0\n/job:localhost/replica:0/task:0/gpu:3 -> device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0\n\n...\n...\n...\nI tensorflow/core/common_runtime/simple_placer.cc:667] save/control_dependency: /job:localhost/replica:0/task:0/cpu:0\n2016-05-09 18:27:25.888013: step 10, loss = 3.76 (281.4 examples/sec; 0.227 sec/batch)\n2016-05-09 18:27:28.206509: step 20, loss = 3.71 (282.3 examples/sec; 0.227 sec/batch)\n...\n...\n2016-05-09 18:34:27.086410: step 1700, loss = 1.23 (295.2 examples/sec; 0.217 sec/batch)\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:244] PoolAllocator: After 176886 get requests, put_count=175848 evicted_count=1000 eviction_rate=0.00568673 and unsatisfied allocation rate=0.0120869\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:256] Raising pool_size_limit_ from 100 to 110\n2016-05-09 18:34:31.962832: step 1710, loss = 1.16 (291.8 examples/sec; 0.219 sec/batch)\n2016-05-09 18:34:34.287784: step 1720, loss = 0.99 (270.6 examples/sec; 0.237 sec/batch)\n...\n...\n2016-05-09 19:01:22.861471: step 8100, loss = 1.08 (262.5 examples/sec; 0.244 sec/batch)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:917] failed to enqueue convolution on stream: CUDNN_STATUS_MAPPING_ERROR\nAborted (core dumped)", "body": "Hi,\nI am having similar problem on the project I am working. I am implementing [Convolutional Neural Networks for Sentence Classification](http://emnlp2014.org/papers/pdf/EMNLP2014181.pdf). I am getting this error irrespective of the parameter I choose. I have tried window size of 3, 4, 5 and various number of filters (32, 64, 128). It crashes at step **8100**  in all the parameter settings.\n\nBelow is small snippet from the log. I have attached complete log file [here](https://gist.github.com/agupta83/ecb3b4a7ba5e948216aa94cba755d26f). I am using TF 0.80 (2296dd8060ce77c71fc820c77442835f050399dd) and cuDNN v4. \n\n```\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so.7.5 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so.7.5 locally\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:0a:00.0\nTotal memory: 12.00GiB\nFree memory: 11.76GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 1 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:09:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 2 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:06:00.0\nTotal memory: 12.00GiB\nFree memory: 11.87GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 3 with properties: \nname: GeForce GTX TITAN X\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.076\npciBusID 0000:05:00.0\nTotal memory: 12.00GiB\nFree memory: 11.33GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 1 2 3 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 1:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 2:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 3:   Y Y Y Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:1) -> (device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:2) -> (device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:756] Creating TensorFlow device (/gpu:3) -> (device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0)\nDevice mapping:\n/job:localhost/replica:0/task:0/gpu:0 -> device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0\n/job:localhost/replica:0/task:0/gpu:1 -> device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0\n/job:localhost/replica:0/task:0/gpu:2 -> device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0\n/job:localhost/replica:0/task:0/gpu:3 -> device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0\nI tensorflow/core/common_runtime/direct_session.cc:151] Device mapping:\n/job:localhost/replica:0/task:0/gpu:0 -> device: 0, name: GeForce GTX TITAN X, pci bus id: 0000:0a:00.0\n/job:localhost/replica:0/task:0/gpu:1 -> device: 1, name: GeForce GTX TITAN X, pci bus id: 0000:09:00.0\n/job:localhost/replica:0/task:0/gpu:2 -> device: 2, name: GeForce GTX TITAN X, pci bus id: 0000:06:00.0\n/job:localhost/replica:0/task:0/gpu:3 -> device: 3, name: GeForce GTX TITAN X, pci bus id: 0000:05:00.0\n\n...\n...\n...\nI tensorflow/core/common_runtime/simple_placer.cc:667] save/control_dependency: /job:localhost/replica:0/task:0/cpu:0\n2016-05-09 18:27:25.888013: step 10, loss = 3.76 (281.4 examples/sec; 0.227 sec/batch)\n2016-05-09 18:27:28.206509: step 20, loss = 3.71 (282.3 examples/sec; 0.227 sec/batch)\n...\n...\n2016-05-09 18:34:27.086410: step 1700, loss = 1.23 (295.2 examples/sec; 0.217 sec/batch)\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:244] PoolAllocator: After 176886 get requests, put_count=175848 evicted_count=1000 eviction_rate=0.00568673 and unsatisfied allocation rate=0.0120869\nI tensorflow/core/common_runtime/gpu/pool_allocator.cc:256] Raising pool_size_limit_ from 100 to 110\n2016-05-09 18:34:31.962832: step 1710, loss = 1.16 (291.8 examples/sec; 0.219 sec/batch)\n2016-05-09 18:34:34.287784: step 1720, loss = 0.99 (270.6 examples/sec; 0.237 sec/batch)\n...\n...\n2016-05-09 19:01:22.861471: step 8100, loss = 1.08 (262.5 examples/sec; 0.244 sec/batch)\nF tensorflow/stream_executor/cuda/cuda_dnn.cc:917] failed to enqueue convolution on stream: CUDNN_STATUS_MAPPING_ERROR\nAborted (core dumped)\n```\n"}
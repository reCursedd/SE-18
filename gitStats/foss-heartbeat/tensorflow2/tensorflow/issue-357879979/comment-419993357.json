{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/419993357", "html_url": "https://github.com/tensorflow/tensorflow/issues/22130#issuecomment-419993357", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22130", "id": 419993357, "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTk5MzM1Nw==", "user": {"login": "meheffernan", "id": 8258238, "node_id": "MDQ6VXNlcjgyNTgyMzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/8258238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meheffernan", "html_url": "https://github.com/meheffernan", "followers_url": "https://api.github.com/users/meheffernan/followers", "following_url": "https://api.github.com/users/meheffernan/following{/other_user}", "gists_url": "https://api.github.com/users/meheffernan/gists{/gist_id}", "starred_url": "https://api.github.com/users/meheffernan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meheffernan/subscriptions", "organizations_url": "https://api.github.com/users/meheffernan/orgs", "repos_url": "https://api.github.com/users/meheffernan/repos", "events_url": "https://api.github.com/users/meheffernan/events{/privacy}", "received_events_url": "https://api.github.com/users/meheffernan/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-10T17:25:19Z", "updated_at": "2018-09-10T17:25:19Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Thanks, Keno, for the detailed report! You're right that HLO protos haven't been an external interface so little effort has been spent validating them on input. We could hammer out fixes for your few examples, but I think a more principled fix is in order to avoid playing whack a mole. A big underlying issue is that proto deserialization ends up calling HloInstruction::Create* methods which just die if something is wrong  (or worse, keep on trucking with malformed instructions) rather than percolate up an error status. We need to add some form of these methods with beefed up validation and which return a Status value for proper error reporting. This will take some time, but needs to be done. Sorry for the inconvenience in the meantime.</p>", "body_text": "Thanks, Keno, for the detailed report! You're right that HLO protos haven't been an external interface so little effort has been spent validating them on input. We could hammer out fixes for your few examples, but I think a more principled fix is in order to avoid playing whack a mole. A big underlying issue is that proto deserialization ends up calling HloInstruction::Create* methods which just die if something is wrong  (or worse, keep on trucking with malformed instructions) rather than percolate up an error status. We need to add some form of these methods with beefed up validation and which return a Status value for proper error reporting. This will take some time, but needs to be done. Sorry for the inconvenience in the meantime.", "body": "Thanks, Keno, for the detailed report! You're right that HLO protos haven't been an external interface so little effort has been spent validating them on input. We could hammer out fixes for your few examples, but I think a more principled fix is in order to avoid playing whack a mole. A big underlying issue is that proto deserialization ends up calling HloInstruction::Create* methods which just die if something is wrong  (or worse, keep on trucking with malformed instructions) rather than percolate up an error status. We need to add some form of these methods with beefed up validation and which return a Status value for proper error reporting. This will take some time, but needs to be done. Sorry for the inconvenience in the meantime."}
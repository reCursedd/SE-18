{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/318810211", "html_url": "https://github.com/tensorflow/tensorflow/issues/11865#issuecomment-318810211", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11865", "id": 318810211, "node_id": "MDEyOklzc3VlQ29tbWVudDMxODgxMDIxMQ==", "user": {"login": "aluo-x", "id": 15619682, "node_id": "MDQ6VXNlcjE1NjE5Njgy", "avatar_url": "https://avatars1.githubusercontent.com/u/15619682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aluo-x", "html_url": "https://github.com/aluo-x", "followers_url": "https://api.github.com/users/aluo-x/followers", "following_url": "https://api.github.com/users/aluo-x/following{/other_user}", "gists_url": "https://api.github.com/users/aluo-x/gists{/gist_id}", "starred_url": "https://api.github.com/users/aluo-x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aluo-x/subscriptions", "organizations_url": "https://api.github.com/users/aluo-x/orgs", "repos_url": "https://api.github.com/users/aluo-x/repos", "events_url": "https://api.github.com/users/aluo-x/events{/privacy}", "received_events_url": "https://api.github.com/users/aluo-x/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-29T07:12:20Z", "updated_at": "2017-07-31T00:12:35Z", "author_association": "NONE", "body_html": "<p>A complete error print out:</p>\n<blockquote>\n<p>C:\\Users\\ALuo\\Anaconda3\\python.exe C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py<br>\nExtracting /tmp/tensorflow/mnist/input_data\\train-images-idx3-ubyte.gz<br>\nExtracting /tmp/tensorflow/mnist/input_data\\train-labels-idx1-ubyte.gz<br>\nExtracting /tmp/tensorflow/mnist/input_data\\t10k-images-idx3-ubyte.gz<br>\nExtracting /tmp/tensorflow/mnist/input_data\\t10k-labels-idx1-ubyte.gz<br>\n2017-07-29 00:09:56.891124: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-07-29 00:09:56.891322: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE2 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-07-29 00:09:56.891533: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-07-29 00:09:56.891720: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-07-29 00:09:56.891906: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-07-29 00:09:56.892095: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-07-29 00:09:56.892276: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-07-29 00:09:56.892467: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.<br>\n2017-07-29 00:09:57.558636: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:940] Found device 0 with properties:<br>\nname: GeForce GTX 1050<br>\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.493<br>\npciBusID 0000:01:00.0<br>\nTotal memory: 4.00GiB<br>\nFree memory: 3.30GiB<br>\n2017-07-29 00:09:57.558862: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:961] DMA: 0<br>\n2017-07-29 00:09:57.559124: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:971] 0:   Y<br>\n2017-07-29 00:09:57.559258: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GeForce GTX 1050, pci bus id: 0000:01:00.0)<br>\nstep 0, training accuracy 0.24<br>\n2017-07-29 00:09:59.180245: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]<br>\n2017-07-29 00:09:59.180255: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]<br>\n2017-07-29 00:09:59.180265: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]<br>\n2017-07-29 00:09:59.180277: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]<br>\n2017-07-29 00:09:59.180283: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]<br>\n2017-07-29 00:10:00.245425: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]<br>\nTraceback (most recent call last):<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1139, in _do_call<br>\nreturn fn(*args)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1121, in _run_fn<br>\nstatus, run_metadata)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\contextlib.py\", line 88, in <strong>exit</strong><br>\nnext(self.gen)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status<br>\npywrap_tensorflow.TF_GetCode(status))<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]</p>\n<p>During handling of the above exception, another exception occurred:</p>\n<p>Traceback (most recent call last):<br>\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in <br>\ntf.app.run(main=main, argv=[sys.argv[0]] + unparsed)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run<br>\n_sys.exit(main(<em>sys.argv[:1] + flags_passthrough))<br>\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 54, in main<br>\ntrain_step.run(feed_dict={x: batch[0], y</em>: batch[1], train_phase: True})<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1706, in run<br>\n_run_using_default_session(self, feed_dict, self.graph, session)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3963, in _run_using_default_session<br>\nsession.run(operation, feed_dict)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 789, in run<br>\nrun_metadata_ptr)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 997, in _run<br>\nfeed_dict_string, options, run_metadata)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1132, in _do_run<br>\ntarget_list, options, run_metadata)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1152, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]</p>\n<p>Caused by op 'gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch', defined at:<br>\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in <br>\ntf.app.run(main=main, argv=[sys.argv[0]] + unparsed)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 42, in main<br>\ntrain_step = tf.train.AdamOptimizer(1e-4).minimize(cross_entropy)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\optimizer.py\", line 315, in minimize<br>\ngrad_loss=grad_loss)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\optimizer.py\", line 386, in compute_gradients<br>\ncolocate_gradients_with_ops=colocate_gradients_with_ops)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 540, in gradients<br>\ngrad_scope, op, func_call, lambda: grad_fn(op, *out_grads))<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 346, in _MaybeCompile<br>\nreturn grad_fn()  # Exit early<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 540, in <br>\ngrad_scope, op, func_call, lambda: grad_fn(op, *out_grads))<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_grad.py\", line 94, in _MeanGrad<br>\nsum_grad = _SumGrad(op, grad)[0]<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_grad.py\", line 56, in _SumGrad<br>\noutput_shape_kept_dims = math_ops.reduced_shape(input_shape, op.inputs[1])<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py\", line 2272, in reduced_shape<br>\narray_ops.fill(axes_shape, 1)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_data_flow_ops.py\", line 481, in dynamic_stitch<br>\nname=name)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op<br>\nop_def=op_def)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2506, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1269, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>...which was originally created as op 'batch_normalization/moments/shifted_mean', defined at:<br>\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in <br>\ntf.app.run(main=main, argv=[sys.argv[0]] + unparsed)<br>\n[elided 0 identical lines from previous traceback]<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 25, in main<br>\nh_norm4 = tf.layers.batch_normalization(h_conv4, training=train_phase)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\normalization.py\", line 441, in batch_normalization<br>\nreturn layer.apply(inputs, training=training)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 492, in apply<br>\nreturn self.<strong>call</strong>(inputs, *args, **kwargs)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 441, in <strong>call</strong><br>\noutputs = self.call(inputs, *args, **kwargs)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\normalization.py\", line 287, in call<br>\nmean, variance = nn.moments(inputs, reduction_axes)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 642, in moments<br>\nmath_ops.subtract(y, shift), axes, keep_dims=True, name=\"shifted_mean\")<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py\", line 1355, in reduce_mean<br>\nname=name)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_math_ops.py\", line 1290, in _mean<br>\nkeep_dims=keep_dims, name=name)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op<br>\nop_def=op_def)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2506, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1269, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>\n<p>InvalidArgumentError (see above for traceback): indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]</p>\n<p>Process finished with exit code 1</p>\n</blockquote>\n<p>An entry point might be comparing my failing python 3.6.2 build with no modifications with the official tensorflow build.</p>\n<p>Running a diff -rqb:</p>\n<pre><code>Files tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_gru_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_gru_ops.dll differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_lstm_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_lstm_ops.dll differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/seq2seq/python/ops/_beam_search_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/seq2seq/python/ops/_beam_search_ops.dll differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/_pywrap_tensorflow_internal.pyd and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/_pywrap_tensorflow_internal.pyd differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.lib and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.lib differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.py and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.py differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.dist-info/RECORD and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.dist-info/RECORD differ\n</code></pre>", "body_text": "A complete error print out:\n\nC:\\Users\\ALuo\\Anaconda3\\python.exe C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\nExtracting /tmp/tensorflow/mnist/input_data\\train-images-idx3-ubyte.gz\nExtracting /tmp/tensorflow/mnist/input_data\\train-labels-idx1-ubyte.gz\nExtracting /tmp/tensorflow/mnist/input_data\\t10k-images-idx3-ubyte.gz\nExtracting /tmp/tensorflow/mnist/input_data\\t10k-labels-idx1-ubyte.gz\n2017-07-29 00:09:56.891124: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-29 00:09:56.891322: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-29 00:09:56.891533: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-29 00:09:56.891720: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-29 00:09:56.891906: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-29 00:09:56.892095: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-29 00:09:56.892276: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-29 00:09:56.892467: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-29 00:09:57.558636: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:940] Found device 0 with properties:\nname: GeForce GTX 1050\nmajor: 6 minor: 1 memoryClockRate (GHz) 1.493\npciBusID 0000:01:00.0\nTotal memory: 4.00GiB\nFree memory: 3.30GiB\n2017-07-29 00:09:57.558862: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:961] DMA: 0\n2017-07-29 00:09:57.559124: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:971] 0:   Y\n2017-07-29 00:09:57.559258: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1050, pci bus id: 0000:01:00.0)\nstep 0, training accuracy 0.24\n2017-07-29 00:09:59.180245: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\n2017-07-29 00:09:59.180255: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\n2017-07-29 00:09:59.180265: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\n2017-07-29 00:09:59.180277: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\n2017-07-29 00:09:59.180283: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\n2017-07-29 00:10:00.245425: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\nTraceback (most recent call last):\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1139, in _do_call\nreturn fn(*args)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1121, in _run_fn\nstatus, run_metadata)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\contextlib.py\", line 88, in exit\nnext(self.gen)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\npywrap_tensorflow.TF_GetCode(status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in \ntf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n_sys.exit(main(sys.argv[:1] + flags_passthrough))\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 54, in main\ntrain_step.run(feed_dict={x: batch[0], y: batch[1], train_phase: True})\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1706, in run\n_run_using_default_session(self, feed_dict, self.graph, session)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3963, in _run_using_default_session\nsession.run(operation, feed_dict)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 789, in run\nrun_metadata_ptr)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 997, in _run\nfeed_dict_string, options, run_metadata)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1132, in _do_run\ntarget_list, options, run_metadata)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1152, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\nCaused by op 'gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch', defined at:\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in \ntf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 42, in main\ntrain_step = tf.train.AdamOptimizer(1e-4).minimize(cross_entropy)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\optimizer.py\", line 315, in minimize\ngrad_loss=grad_loss)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\optimizer.py\", line 386, in compute_gradients\ncolocate_gradients_with_ops=colocate_gradients_with_ops)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 540, in gradients\ngrad_scope, op, func_call, lambda: grad_fn(op, *out_grads))\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 346, in _MaybeCompile\nreturn grad_fn()  # Exit early\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 540, in \ngrad_scope, op, func_call, lambda: grad_fn(op, *out_grads))\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_grad.py\", line 94, in _MeanGrad\nsum_grad = _SumGrad(op, grad)[0]\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_grad.py\", line 56, in _SumGrad\noutput_shape_kept_dims = math_ops.reduced_shape(input_shape, op.inputs[1])\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py\", line 2272, in reduced_shape\narray_ops.fill(axes_shape, 1)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_data_flow_ops.py\", line 481, in dynamic_stitch\nname=name)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op\nop_def=op_def)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2506, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1269, in init\nself._traceback = _extract_stack()\n...which was originally created as op 'batch_normalization/moments/shifted_mean', defined at:\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in \ntf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n[elided 0 identical lines from previous traceback]\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 25, in main\nh_norm4 = tf.layers.batch_normalization(h_conv4, training=train_phase)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\normalization.py\", line 441, in batch_normalization\nreturn layer.apply(inputs, training=training)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 492, in apply\nreturn self.call(inputs, *args, **kwargs)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 441, in call\noutputs = self.call(inputs, *args, **kwargs)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\normalization.py\", line 287, in call\nmean, variance = nn.moments(inputs, reduction_axes)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 642, in moments\nmath_ops.subtract(y, shift), axes, keep_dims=True, name=\"shifted_mean\")\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py\", line 1355, in reduce_mean\nname=name)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_math_ops.py\", line 1290, in _mean\nkeep_dims=keep_dims, name=name)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op\nop_def=op_def)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2506, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1269, in init\nself._traceback = _extract_stack()\nInvalidArgumentError (see above for traceback): indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\nProcess finished with exit code 1\n\nAn entry point might be comparing my failing python 3.6.2 build with no modifications with the official tensorflow build.\nRunning a diff -rqb:\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_gru_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_gru_ops.dll differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_lstm_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_lstm_ops.dll differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/seq2seq/python/ops/_beam_search_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/seq2seq/python/ops/_beam_search_ops.dll differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/_pywrap_tensorflow_internal.pyd and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/_pywrap_tensorflow_internal.pyd differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.lib and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.lib differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.py and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.py differ\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.dist-info/RECORD and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.dist-info/RECORD differ", "body": "A complete error print out:\r\n\r\n\r\n\r\n> C:\\Users\\ALuo\\Anaconda3\\python.exe C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\r\n> Extracting /tmp/tensorflow/mnist/input_data\\train-images-idx3-ubyte.gz\r\n> Extracting /tmp/tensorflow/mnist/input_data\\train-labels-idx1-ubyte.gz\r\n> Extracting /tmp/tensorflow/mnist/input_data\\t10k-images-idx3-ubyte.gz\r\n> Extracting /tmp/tensorflow/mnist/input_data\\t10k-labels-idx1-ubyte.gz\r\n> 2017-07-29 00:09:56.891124: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE instructions, but these are available on your machine and could speed up CPU computations.\r\n> 2017-07-29 00:09:56.891322: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE2 instructions, but these are available on your machine and could speed up CPU computations.\r\n> 2017-07-29 00:09:56.891533: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE3 instructions, but these are available on your machine and could speed up CPU computations.\r\n> 2017-07-29 00:09:56.891720: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\r\n> 2017-07-29 00:09:56.891906: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\r\n> 2017-07-29 00:09:56.892095: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\r\n> 2017-07-29 00:09:56.892276: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\r\n> 2017-07-29 00:09:56.892467: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\platform\\cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\r\n> 2017-07-29 00:09:57.558636: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:940] Found device 0 with properties: \r\n> name: GeForce GTX 1050\r\n> major: 6 minor: 1 memoryClockRate (GHz) 1.493\r\n> pciBusID 0000:01:00.0\r\n> Total memory: 4.00GiB\r\n> Free memory: 3.30GiB\r\n> 2017-07-29 00:09:57.558862: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:961] DMA: 0 \r\n> 2017-07-29 00:09:57.559124: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:971] 0:   Y \r\n> 2017-07-29 00:09:57.559258: I c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1050, pci bus id: 0000:01:00.0)\r\n> step 0, training accuracy 0.24\r\n> 2017-07-29 00:09:59.180245: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> 2017-07-29 00:09:59.180255: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> 2017-07-29 00:09:59.180265: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> 2017-07-29 00:09:59.180277: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> 2017-07-29 00:09:59.180283: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> 2017-07-29 00:10:00.245425: W c:\\optimae\\tensorflow-1.2.1\\tensorflow\\core\\framework\\op_kernel.cc:1158] Invalid argument: indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> Traceback (most recent call last):\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1139, in _do_call\r\n>     return fn(*args)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1121, in _run_fn\r\n>     status, run_metadata)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\contextlib.py\", line 88, in __exit__\r\n>     next(self.gen)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 466, in raise_exception_on_not_ok_status\r\n>     pywrap_tensorflow.TF_GetCode(status))\r\n> tensorflow.python.framework.errors_impl.InvalidArgumentError: indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> \r\n> During handling of the above exception, another exception occurred:\r\n> \r\n> Traceback (most recent call last):\r\n>   File \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in <module>\r\n>     tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n>     _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n>   File \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 54, in main\r\n>     train_step.run(feed_dict={x: batch[0], y_: batch[1], train_phase: True})\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1706, in run\r\n>     _run_using_default_session(self, feed_dict, self.graph, session)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3963, in _run_using_default_session\r\n>     session.run(operation, feed_dict)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 789, in run\r\n>     run_metadata_ptr)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 997, in _run\r\n>     feed_dict_string, options, run_metadata)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1132, in _do_run\r\n>     target_list, options, run_metadata)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1152, in _do_call\r\n>     raise type(e)(node_def, op, message)\r\n> tensorflow.python.framework.errors_impl.InvalidArgumentError: indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> \r\n> Caused by op 'gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch', defined at:\r\n>   File \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in <module>\r\n>     tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n>     _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n>   File \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 42, in main\r\n>     train_step = tf.train.AdamOptimizer(1e-4).minimize(cross_entropy)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\optimizer.py\", line 315, in minimize\r\n>     grad_loss=grad_loss)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\optimizer.py\", line 386, in compute_gradients\r\n>     colocate_gradients_with_ops=colocate_gradients_with_ops)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 540, in gradients\r\n>     grad_scope, op, func_call, lambda: grad_fn(op, *out_grads))\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 346, in _MaybeCompile\r\n>     return grad_fn()  # Exit early\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gradients_impl.py\", line 540, in <lambda>\r\n>     grad_scope, op, func_call, lambda: grad_fn(op, *out_grads))\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_grad.py\", line 94, in _MeanGrad\r\n>     sum_grad = _SumGrad(op, grad)[0]\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_grad.py\", line 56, in _SumGrad\r\n>     output_shape_kept_dims = math_ops.reduced_shape(input_shape, op.inputs[1])\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py\", line 2272, in reduced_shape\r\n>     array_ops.fill(axes_shape, 1)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_data_flow_ops.py\", line 481, in dynamic_stitch\r\n>     name=name)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op\r\n>     op_def=op_def)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2506, in create_op\r\n>     original_op=self._default_original_op, op_def=op_def)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1269, in __init__\r\n>     self._traceback = _extract_stack()\r\n> \r\n> ...which was originally created as op 'batch_normalization/moments/shifted_mean', defined at:\r\n>   File \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 60, in <module>\r\n>     tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n> [elided 0 identical lines from previous traceback]\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 48, in run\r\n>     _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n>   File \"C:/Users/ALuo/.PyCharm2017.2/config/scratches/scratch.py\", line 25, in main\r\n>     h_norm4 = tf.layers.batch_normalization(h_conv4, training=train_phase)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\normalization.py\", line 441, in batch_normalization\r\n>     return layer.apply(inputs, training=training)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 492, in apply\r\n>     return self.__call__(inputs, *args, **kwargs)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\base.py\", line 441, in __call__\r\n>     outputs = self.call(inputs, *args, **kwargs)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\layers\\normalization.py\", line 287, in call\r\n>     mean, variance = nn.moments(inputs, reduction_axes)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py\", line 642, in moments\r\n>     math_ops.subtract(y, shift), axes, keep_dims=True, name=\"shifted_mean\")\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py\", line 1355, in reduce_mean\r\n>     name=name)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_math_ops.py\", line 1290, in _mean\r\n>     keep_dims=keep_dims, name=name)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 767, in apply_op\r\n>     op_def=op_def)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2506, in create_op\r\n>     original_op=self._default_original_op, op_def=op_def)\r\n>   File \"C:\\Users\\ALuo\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1269, in __init__\r\n>     self._traceback = _extract_stack()\r\n> \r\n> InvalidArgumentError (see above for traceback): indices[1] is out of range\r\n> \t [[Node: gradients/batch_normalization/moments/shifted_mean_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/shifted_mean_grad/range, gradients/batch_normalization/moments/shifted_mean_grad/mod, gradients/batch_normalization/moments/shifted_mean_grad/Shape, gradients/batch_normalization/moments/shifted_mean_grad/Fill)]]\r\n> \r\n> \r\n> Process finished with exit code 1\r\n> \r\n\r\n\r\nAn entry point might be comparing my failing python 3.6.2 build with no modifications with the official tensorflow build.\r\n\r\nRunning a diff -rqb:\r\n\r\n```\r\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_gru_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_gru_ops.dll differ\r\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_lstm_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/rnn/python/ops/_lstm_ops.dll differ\r\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/seq2seq/python/ops/_beam_search_ops.dll and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/contrib/seq2seq/python/ops/_beam_search_ops.dll differ\r\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/_pywrap_tensorflow_internal.pyd and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/_pywrap_tensorflow_internal.pyd differ\r\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.lib and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.lib differ\r\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.py and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.data/purelib/tensorflow/python/pywrap_tensorflow_internal.py differ\r\nFiles tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.dist-info/RECORD and official_tensorflow_gpu-1.2.1-cp36-cp36m-win_amd64/tensorflow_gpu-1.2.1.dist-info/RECORD differ\r\n```"}
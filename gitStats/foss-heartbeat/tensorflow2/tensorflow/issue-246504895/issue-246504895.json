{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11865", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11865/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11865/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11865/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11865", "id": 246504895, "node_id": "MDU6SXNzdWUyNDY1MDQ4OTU=", "number": 11865, "title": "Batchnorm errors in \"successful\" Windows builds", "user": {"login": "aluo-x", "id": 15619682, "node_id": "MDQ6VXNlcjE1NjE5Njgy", "avatar_url": "https://avatars1.githubusercontent.com/u/15619682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aluo-x", "html_url": "https://github.com/aluo-x", "followers_url": "https://api.github.com/users/aluo-x/followers", "following_url": "https://api.github.com/users/aluo-x/following{/other_user}", "gists_url": "https://api.github.com/users/aluo-x/gists{/gist_id}", "starred_url": "https://api.github.com/users/aluo-x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aluo-x/subscriptions", "organizations_url": "https://api.github.com/users/aluo-x/orgs", "repos_url": "https://api.github.com/users/aluo-x/repos", "events_url": "https://api.github.com/users/aluo-x/events{/privacy}", "received_events_url": "https://api.github.com/users/aluo-x/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-07-29T07:05:18Z", "updated_at": "2018-09-15T02:06:49Z", "closed_at": "2018-09-15T02:06:49Z", "author_association": "NONE", "body_html": "<ul>\n<li>Current system configuration:</li>\n<li>Windows 10 64 bit, intel i7-7700HQ latest microcode, Nvidia 1050 4GB.</li>\n<li>Driver: 384.94</li>\n<li>Python used: Anaconda 4.4.0 Python 3.6.2 and 3.5.3</li>\n<li>CUDA/cuDNN: 8.0.61/5.1 or 8.0.61.2/6.0</li>\n<li>swigwin 3.0.12</li>\n<li>Built 1.2.1 from source using VS 2015 Update 3, CMake 3.9.0 or 3.9.0 RC5, swigwin 3.0.12.</li>\n<li>Code modifications: in builds with both cuDNN and AVX enabled, the code was <a href=\"https://github.com/tensorflow/tensorflow/issues/11096#issuecomment-312049089\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/11096/hovercard\">modified accord to this comment</a></li>\n<li>Issue description: In certain conditions \"successful\" builds of tensorflow with GPU support, results in broken batchnorm functionality. An example error:</li>\n</ul>\n<blockquote>\n<p>InvalidArgumentError (see above for traceback): indices[1] is out of range<br>\n[[Node: gradients/batch_normalization/moments/Mean_1_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/Mean_1_grad/range, gradients/batch_normalization/moments/Mean_1_grad/mod, gradients/batch_normalization/moments/Mean_1_grad/Shape, gradients/batch_normalization/moments/Mean_1_grad/Fill)]]</p>\n</blockquote>\n<p>This error was encountered in a variety of different builds. But it was most surprising when it occurred in an unmodified python 3.6 gpu build. Files and <a href=\"https://github.com/aluo-x/tensorflow_windows\">configuration can be found here</a>.</p>", "body_text": "Current system configuration:\nWindows 10 64 bit, intel i7-7700HQ latest microcode, Nvidia 1050 4GB.\nDriver: 384.94\nPython used: Anaconda 4.4.0 Python 3.6.2 and 3.5.3\nCUDA/cuDNN: 8.0.61/5.1 or 8.0.61.2/6.0\nswigwin 3.0.12\nBuilt 1.2.1 from source using VS 2015 Update 3, CMake 3.9.0 or 3.9.0 RC5, swigwin 3.0.12.\nCode modifications: in builds with both cuDNN and AVX enabled, the code was modified accord to this comment\nIssue description: In certain conditions \"successful\" builds of tensorflow with GPU support, results in broken batchnorm functionality. An example error:\n\n\nInvalidArgumentError (see above for traceback): indices[1] is out of range\n[[Node: gradients/batch_normalization/moments/Mean_1_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/Mean_1_grad/range, gradients/batch_normalization/moments/Mean_1_grad/mod, gradients/batch_normalization/moments/Mean_1_grad/Shape, gradients/batch_normalization/moments/Mean_1_grad/Fill)]]\n\nThis error was encountered in a variety of different builds. But it was most surprising when it occurred in an unmodified python 3.6 gpu build. Files and configuration can be found here.", "body": "* Current system configuration: \r\n* Windows 10 64 bit, intel i7-7700HQ latest microcode, Nvidia 1050 4GB.\r\n* Driver: 384.94\r\n* Python used: Anaconda 4.4.0 Python 3.6.2 and 3.5.3\r\n* CUDA/cuDNN: 8.0.61/5.1 or 8.0.61.2/6.0\r\n* swigwin 3.0.12\r\n* Built 1.2.1 from source using VS 2015 Update 3, CMake 3.9.0 or 3.9.0 RC5, swigwin 3.0.12.\r\n* Code modifications: in builds with both cuDNN and AVX enabled, the code was [modified accord to this comment](https://github.com/tensorflow/tensorflow/issues/11096#issuecomment-312049089)\r\n* Issue description: In certain conditions \"successful\" builds of tensorflow with GPU support, results in broken batchnorm functionality. An example error:\r\n > InvalidArgumentError (see above for traceback): indices[1] is out of range\r\n\t [[Node: gradients/batch_normalization/moments/Mean_1_grad/DynamicStitch = DynamicStitch[N=2, T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/batch_normalization/moments/Mean_1_grad/range, gradients/batch_normalization/moments/Mean_1_grad/mod, gradients/batch_normalization/moments/Mean_1_grad/Shape, gradients/batch_normalization/moments/Mean_1_grad/Fill)]]\r\n\r\nThis error was encountered in a variety of different builds. But it was most surprising when it occurred in an unmodified python 3.6 gpu build. Files and [configuration can be found here](https://github.com/aluo-x/tensorflow_windows).\r\n"}
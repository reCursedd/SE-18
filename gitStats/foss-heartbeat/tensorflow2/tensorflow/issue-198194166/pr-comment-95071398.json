{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/95071398", "pull_request_review_id": 15597658, "id": 95071398, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1MDcxMzk4", "diff_hunk": "@@ -218,6 +218,45 @@ size_t readNDArray(JNIEnv* env, TF_DataType dtype, const char* src,\n JNIEXPORT jlong JNICALL Java_org_tensorflow_Tensor_allocate(JNIEnv* env,\n                                                             jclass clazz,\n                                                             jint dtype,\n+                                                            jlongArray shape,\n+                                                            jlong size) {\n+  int num_dims = static_cast<int>(env->GetArrayLength(shape));", "path": "tensorflow/java/src/main/native/tensor_jni.cc", "position": null, "original_position": 6, "commit_id": "5efc0f25336d5f3b5b5c82ab8d13e5929c3ba894", "original_commit_id": "1a2994b397a9697cefb31da4939e16415694a529", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "body": "Most of this is duplicated in `allocateNDArray`, perhaps structure this so that the code isn't duplicated (`allocateNDArray` can call `allocate` after determining the byte size). Though, see comment above about `allocate` and `allocateForStrings`.", "created_at": "2017-01-08T04:20:41Z", "updated_at": "2017-01-29T23:34:08Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/6577#discussion_r95071398", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/6577", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/95071398"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/6577#discussion_r95071398"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/6577"}}, "body_html": "<p>Most of this is duplicated in <code>allocateNDArray</code>, perhaps structure this so that the code isn't duplicated (<code>allocateNDArray</code> can call <code>allocate</code> after determining the byte size). Though, see comment above about <code>allocate</code> and <code>allocateForStrings</code>.</p>", "body_text": "Most of this is duplicated in allocateNDArray, perhaps structure this so that the code isn't duplicated (allocateNDArray can call allocate after determining the byte size). Though, see comment above about allocate and allocateForStrings."}
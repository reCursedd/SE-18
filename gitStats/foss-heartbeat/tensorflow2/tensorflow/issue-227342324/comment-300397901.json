{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/300397901", "html_url": "https://github.com/tensorflow/tensorflow/issues/9790#issuecomment-300397901", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9790", "id": 300397901, "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDM5NzkwMQ==", "user": {"login": "StefanoD", "id": 1634862, "node_id": "MDQ6VXNlcjE2MzQ4NjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1634862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StefanoD", "html_url": "https://github.com/StefanoD", "followers_url": "https://api.github.com/users/StefanoD/followers", "following_url": "https://api.github.com/users/StefanoD/following{/other_user}", "gists_url": "https://api.github.com/users/StefanoD/gists{/gist_id}", "starred_url": "https://api.github.com/users/StefanoD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StefanoD/subscriptions", "organizations_url": "https://api.github.com/users/StefanoD/orgs", "repos_url": "https://api.github.com/users/StefanoD/repos", "events_url": "https://api.github.com/users/StefanoD/events{/privacy}", "received_events_url": "https://api.github.com/users/StefanoD/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-10T07:22:40Z", "updated_at": "2017-05-10T07:22:40Z", "author_association": "NONE", "body_html": "<p>This is the workaround:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">test_accuracy</span>(<span class=\"pl-smi\">test_dataset</span>, <span class=\"pl-smi\">accuracy_eval</span>, <span class=\"pl-smi\">x</span>, <span class=\"pl-smi\">y_</span>, <span class=\"pl-smi\">is_training</span>):\n    number_images <span class=\"pl-k\">=</span> <span class=\"pl-c1\">len</span>(test_dataset.images)\n    accuracy <span class=\"pl-k\">=</span> <span class=\"pl-c1\">0</span>\n\n    <span class=\"pl-k\">for</span> _ <span class=\"pl-k\">in</span> <span class=\"pl-c1\">range</span>(number_images):\n        test_image, test_label <span class=\"pl-k\">=</span> test_dataset.next_batch(<span class=\"pl-c1\">1</span>)\n        accuracy <span class=\"pl-k\">+=</span> accuracy_eval.eval(<span class=\"pl-v\">feed_dict</span><span class=\"pl-k\">=</span>{x: test_image,\n                                                  y_: test_label,\n                                                  is_training: <span class=\"pl-c1\">False</span>})\n\n    accuracy <span class=\"pl-k\">/=</span> number_images\n    <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>test accuracy <span class=\"pl-c1\">{}</span><span class=\"pl-pds\">'</span></span>.format(accuracy))</pre></div>\n<p>If the moderators think, this issue should be closed, then they can close.</p>", "body_text": "This is the workaround:\ndef test_accuracy(test_dataset, accuracy_eval, x, y_, is_training):\n    number_images = len(test_dataset.images)\n    accuracy = 0\n\n    for _ in range(number_images):\n        test_image, test_label = test_dataset.next_batch(1)\n        accuracy += accuracy_eval.eval(feed_dict={x: test_image,\n                                                  y_: test_label,\n                                                  is_training: False})\n\n    accuracy /= number_images\n    print('test accuracy {}'.format(accuracy))\nIf the moderators think, this issue should be closed, then they can close.", "body": "This is the workaround:\r\n\r\n```python\r\ndef test_accuracy(test_dataset, accuracy_eval, x, y_, is_training):\r\n    number_images = len(test_dataset.images)\r\n    accuracy = 0\r\n\r\n    for _ in range(number_images):\r\n        test_image, test_label = test_dataset.next_batch(1)\r\n        accuracy += accuracy_eval.eval(feed_dict={x: test_image,\r\n                                                  y_: test_label,\r\n                                                  is_training: False})\r\n\r\n    accuracy /= number_images\r\n    print('test accuracy {}'.format(accuracy))\r\n```\r\nIf the moderators think, this issue should be closed, then they can close."}
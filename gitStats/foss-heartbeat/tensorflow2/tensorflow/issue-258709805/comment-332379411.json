{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/332379411", "html_url": "https://github.com/tensorflow/tensorflow/issues/13146#issuecomment-332379411", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13146", "id": 332379411, "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjM3OTQxMQ==", "user": {"login": "zhangyaobit", "id": 1034716, "node_id": "MDQ6VXNlcjEwMzQ3MTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1034716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangyaobit", "html_url": "https://github.com/zhangyaobit", "followers_url": "https://api.github.com/users/zhangyaobit/followers", "following_url": "https://api.github.com/users/zhangyaobit/following{/other_user}", "gists_url": "https://api.github.com/users/zhangyaobit/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangyaobit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangyaobit/subscriptions", "organizations_url": "https://api.github.com/users/zhangyaobit/orgs", "repos_url": "https://api.github.com/users/zhangyaobit/repos", "events_url": "https://api.github.com/users/zhangyaobit/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangyaobit/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-27T01:10:17Z", "updated_at": "2017-09-27T01:14:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3826735\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tumusudheer\">@tumusudheer</a>, note that \"MaxPoolingOp only supports NHWC\" on the CPU, so could you run NHWC (as opposed to NCHW) if running on CPU?</p>\n<p>I think the checkpoint should be compatible (you can train in NCHW and infer in NHWC), because weights/filter input are always stored in the same format ([filter_height, filter_width, in_channels, out_channels] regardless of whether NCHW or NHWC is used: <a href=\"https://www.tensorflow.org/api_docs/python/tf/nn/conv2d\" rel=\"nofollow\">https://www.tensorflow.org/api_docs/python/tf/nn/conv2d</a>).</p>\n<p>(for your problem, there seems no need to use graph transformation tool or Grappler, you just need to set the format to NHWC if infer on CPU).</p>", "body_text": "@tumusudheer, note that \"MaxPoolingOp only supports NHWC\" on the CPU, so could you run NHWC (as opposed to NCHW) if running on CPU?\nI think the checkpoint should be compatible (you can train in NCHW and infer in NHWC), because weights/filter input are always stored in the same format ([filter_height, filter_width, in_channels, out_channels] regardless of whether NCHW or NHWC is used: https://www.tensorflow.org/api_docs/python/tf/nn/conv2d).\n(for your problem, there seems no need to use graph transformation tool or Grappler, you just need to set the format to NHWC if infer on CPU).", "body": "@tumusudheer, note that \"MaxPoolingOp only supports NHWC\" on the CPU, so could you run NHWC (as opposed to NCHW) if running on CPU?\r\n\r\nI think the checkpoint should be compatible (you can train in NCHW and infer in NHWC), because weights/filter input are always stored in the same format ([filter_height, filter_width, in_channels, out_channels] regardless of whether NCHW or NHWC is used: https://www.tensorflow.org/api_docs/python/tf/nn/conv2d).\r\n\r\n(for your problem, there seems no need to use graph transformation tool or Grappler, you just need to set the format to NHWC if infer on CPU). "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/387527174", "html_url": "https://github.com/tensorflow/tensorflow/issues/17047#issuecomment-387527174", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17047", "id": 387527174, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzUyNzE3NA==", "user": {"login": "wei-v-wang", "id": 22306846, "node_id": "MDQ6VXNlcjIyMzA2ODQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/22306846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wei-v-wang", "html_url": "https://github.com/wei-v-wang", "followers_url": "https://api.github.com/users/wei-v-wang/followers", "following_url": "https://api.github.com/users/wei-v-wang/following{/other_user}", "gists_url": "https://api.github.com/users/wei-v-wang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wei-v-wang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wei-v-wang/subscriptions", "organizations_url": "https://api.github.com/users/wei-v-wang/orgs", "repos_url": "https://api.github.com/users/wei-v-wang/repos", "events_url": "https://api.github.com/users/wei-v-wang/events{/privacy}", "received_events_url": "https://api.github.com/users/wei-v-wang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-08T20:10:45Z", "updated_at": "2018-05-08T20:11:13Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5764438\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/abiro\">@abiro</a> Thank you very much for following up and trying the latest commits and for reporting out the results.<br>\nAs we know TensorFlow has a large amount of commits each day. May I suggest using the tagged release versions, e.g. v1.7.0 tag and v1.8.0 tag. I have tested these tf commits, and both did not have the issues reported in this thread. The above \"MklConv2DWithBiasBackpropBias\" seems to be a new issue with latest code - we will investigate. But to unblock your work, may I suggest you try the <strong>v180 (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/93bc2e2072e0daccbcff7a90d397b704a9e8f778/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/93bc2e2072e0daccbcff7a90d397b704a9e8f778\"><tt>93bc2e2</tt></a>)</strong> or <strong>v170 (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/024aecf414941e11eb643e29ceed3e1c47a115ad/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/024aecf414941e11eb643e29ceed3e1c47a115ad\"><tt>024aecf</tt></a>)</strong>?<br>\nPlease see below for my results:</p>\n<p>[ investigate_17047]$ python p.py<br>\n/usr/lib64/python2.7/site-packages/h5py/<strong>init</strong>.py:36: FutureWarning: Conversion of the second argument of issubdtype from <code>float</code> to <code>np.floating</code> is deprecated. In future, it will be treated as <code>np.float64 == np.dtype(float).type</code>.<br>\nfrom ._conv import register_converters as _register_converters<br>\n2018-05-08 13:07:20.992102: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA<br>\n2018-05-08 13:07:21.012545: I tensorflow/core/common_runtime/process_util.cc:63] Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads for best performance.<br>\n[investigate_17047]$ cat p.py<br>\nimport tensorflow as tf<br>\nimport numpy as np</p>\n<p>x = tf.keras.applications.xception.Xception(weights=\"xception_weights.h5\")<br>\nx.predict(np.zeros((1, 299, 299, 3)), batch_size=1)</p>\n<p>[investigate_17047]$ ls xception_weights.h5  -hl<br>\n-rw-r--r-- 1 weiwang weiwang 88M May 24  2017 xception_weights.h5</p>\n<p>Or TF v170:</p>\n<p>investigate_17047]$ export PYTHONPATH=~/shared_big/TF_Public_v170<br>\n[investigate_17047]$ python p.py<br>\n/usr/lib64/python2.7/site-packages/h5py/<strong>init</strong>.py:36: FutureWarning: Conversion of the second argument of issubdtype from <code>float</code> to <code>np.floating</code> is deprecated. In future, it will be treated as <code>np.float64 == np.dtype(float).type</code>.<br>\nfrom ._conv import register_converters as _register_converters<br>\n2018-05-08 13:08:58.230349: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F</p>", "body_text": "@abiro Thank you very much for following up and trying the latest commits and for reporting out the results.\nAs we know TensorFlow has a large amount of commits each day. May I suggest using the tagged release versions, e.g. v1.7.0 tag and v1.8.0 tag. I have tested these tf commits, and both did not have the issues reported in this thread. The above \"MklConv2DWithBiasBackpropBias\" seems to be a new issue with latest code - we will investigate. But to unblock your work, may I suggest you try the v180 (93bc2e2) or v170 (024aecf)?\nPlease see below for my results:\n[ investigate_17047]$ python p.py\n/usr/lib64/python2.7/site-packages/h5py/init.py:36: FutureWarning: Conversion of the second argument of issubdtype from float to np.floating is deprecated. In future, it will be treated as np.float64 == np.dtype(float).type.\nfrom ._conv import register_converters as _register_converters\n2018-05-08 13:07:20.992102: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\n2018-05-08 13:07:21.012545: I tensorflow/core/common_runtime/process_util.cc:63] Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads for best performance.\n[investigate_17047]$ cat p.py\nimport tensorflow as tf\nimport numpy as np\nx = tf.keras.applications.xception.Xception(weights=\"xception_weights.h5\")\nx.predict(np.zeros((1, 299, 299, 3)), batch_size=1)\n[investigate_17047]$ ls xception_weights.h5  -hl\n-rw-r--r-- 1 weiwang weiwang 88M May 24  2017 xception_weights.h5\nOr TF v170:\ninvestigate_17047]$ export PYTHONPATH=~/shared_big/TF_Public_v170\n[investigate_17047]$ python p.py\n/usr/lib64/python2.7/site-packages/h5py/init.py:36: FutureWarning: Conversion of the second argument of issubdtype from float to np.floating is deprecated. In future, it will be treated as np.float64 == np.dtype(float).type.\nfrom ._conv import register_converters as _register_converters\n2018-05-08 13:08:58.230349: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F", "body": "@abiro Thank you very much for following up and trying the latest commits and for reporting out the results. \r\nAs we know TensorFlow has a large amount of commits each day. May I suggest using the tagged release versions, e.g. v1.7.0 tag and v1.8.0 tag. I have tested these tf commits, and both did not have the issues reported in this thread. The above \"MklConv2DWithBiasBackpropBias\" seems to be a new issue with latest code - we will investigate. But to unblock your work, may I suggest you try the **v180 (https://github.com/tensorflow/tensorflow/commit/93bc2e2072e0daccbcff7a90d397b704a9e8f778)** or **v170 (https://github.com/tensorflow/tensorflow/commit/024aecf414941e11eb643e29ceed3e1c47a115ad)**? \r\nPlease see below for my results: \r\n\r\n[ investigate_17047]$ python p.py   \r\n/usr/lib64/python2.7/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n2018-05-08 13:07:20.992102: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\n2018-05-08 13:07:21.012545: I tensorflow/core/common_runtime/process_util.cc:63] Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads for best performance.\r\n[investigate_17047]$ cat p.py  \r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nx = tf.keras.applications.xception.Xception(weights=\"xception_weights.h5\")\r\nx.predict(np.zeros((1, 299, 299, 3)), batch_size=1)\r\n\r\n[investigate_17047]$ ls xception_weights.h5  -hl\r\n-rw-r--r-- 1 weiwang weiwang 88M May 24  2017 xception_weights.h5 \r\n\r\n\r\nOr TF v170:\r\n\r\n investigate_17047]$ export PYTHONPATH=~/shared_big/TF_Public_v170                                                                                                                                                                               \r\n[investigate_17047]$ python p.py                                                                                                                                                                                                                 \r\n/usr/lib64/python2.7/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n2018-05-08 13:08:58.230349: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX512F\r\n"}
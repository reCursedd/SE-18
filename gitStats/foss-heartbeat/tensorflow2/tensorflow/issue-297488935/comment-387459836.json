{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/387459836", "html_url": "https://github.com/tensorflow/tensorflow/issues/17047#issuecomment-387459836", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17047", "id": 387459836, "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQ1OTgzNg==", "user": {"login": "abiro", "id": 5764438, "node_id": "MDQ6VXNlcjU3NjQ0Mzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/5764438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abiro", "html_url": "https://github.com/abiro", "followers_url": "https://api.github.com/users/abiro/followers", "following_url": "https://api.github.com/users/abiro/following{/other_user}", "gists_url": "https://api.github.com/users/abiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/abiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abiro/subscriptions", "organizations_url": "https://api.github.com/users/abiro/orgs", "repos_url": "https://api.github.com/users/abiro/repos", "events_url": "https://api.github.com/users/abiro/events{/privacy}", "received_events_url": "https://api.github.com/users/abiro/received_events", "type": "User", "site_admin": false}, "created_at": "2018-05-08T16:21:46Z", "updated_at": "2018-05-08T16:21:46Z", "author_association": "NONE", "body_html": "<p>Thanks for looking into this!</p>\n<p>Running the code from the bug report in a Docker image built with MKL from commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/eeab2c867faa0f10dfea8635d1e87009844f902e/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/eeab2c867faa0f10dfea8635d1e87009844f902e\"><tt>eeab2c8</tt></a> results in the following output:</p>\n<pre><code>2018-05-08 15:23:04.589899: E tensorflow/core/framework/op_kernel.cc:1242] \nOpKernel ('op: \"_MklConv2DWithBiasBackpropBias\" device_type: \"CPU\" \nconstraint { name: \"T\" allowed_values { list { type: DT_FLOAT } } } label: \"MklOp\"') for \nunknown op: _MklConv2DWithBiasBackpropBias\n\n2018-05-08 15:23:06.760291: W tensorflow/core/util/tensor_slice_reader.cc:95] \nCould not open ./xception_weights.h5: Data loss: not an sstable (bad magic number): \nperhaps your file is in a different file format and you need to use a different restore operator?\n</code></pre>\n<p>The checksum of the weights file matches the checksum in the <a href=\"https://github.com/tensorflow/tensorflow/blob/eeab2c867faa0f10dfea8635d1e87009844f902e/tensorflow/python/keras/_impl/keras/applications/xception.py#L318\">source file.</a></p>\n<p>The second message is reproducible when building the image from the bug report without MKL (this was built from commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/6ba9573a702ea9e1290517cce4e5f73a14552ad9/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/6ba9573a702ea9e1290517cce4e5f73a14552ad9\"><tt>6ba9573</tt></a>). It is also reproducible when running the code in the <code>tensorflow/tensorflow:nightly-devel-py3</code> image that was built from commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/714f3c4f2f901e865bfcbf830485adafb92dca48/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/714f3c4f2f901e865bfcbf830485adafb92dca48\"><tt>714f3c4</tt></a>, so I think it's safe to say that the second message is not related to MKL. I'm not sure however how to interpret the first message.</p>\n<p>Sorry about the different commits, the oldest one is from the 4th of May.</p>", "body_text": "Thanks for looking into this!\nRunning the code from the bug report in a Docker image built with MKL from commit eeab2c8 results in the following output:\n2018-05-08 15:23:04.589899: E tensorflow/core/framework/op_kernel.cc:1242] \nOpKernel ('op: \"_MklConv2DWithBiasBackpropBias\" device_type: \"CPU\" \nconstraint { name: \"T\" allowed_values { list { type: DT_FLOAT } } } label: \"MklOp\"') for \nunknown op: _MklConv2DWithBiasBackpropBias\n\n2018-05-08 15:23:06.760291: W tensorflow/core/util/tensor_slice_reader.cc:95] \nCould not open ./xception_weights.h5: Data loss: not an sstable (bad magic number): \nperhaps your file is in a different file format and you need to use a different restore operator?\n\nThe checksum of the weights file matches the checksum in the source file.\nThe second message is reproducible when building the image from the bug report without MKL (this was built from commit 6ba9573). It is also reproducible when running the code in the tensorflow/tensorflow:nightly-devel-py3 image that was built from commit 714f3c4, so I think it's safe to say that the second message is not related to MKL. I'm not sure however how to interpret the first message.\nSorry about the different commits, the oldest one is from the 4th of May.", "body": "Thanks for looking into this!\r\n\r\nRunning the code from the bug report in a Docker image built with MKL from commit eeab2c8 results in the following output:\r\n\r\n```\r\n2018-05-08 15:23:04.589899: E tensorflow/core/framework/op_kernel.cc:1242] \r\nOpKernel ('op: \"_MklConv2DWithBiasBackpropBias\" device_type: \"CPU\" \r\nconstraint { name: \"T\" allowed_values { list { type: DT_FLOAT } } } label: \"MklOp\"') for \r\nunknown op: _MklConv2DWithBiasBackpropBias\r\n\r\n2018-05-08 15:23:06.760291: W tensorflow/core/util/tensor_slice_reader.cc:95] \r\nCould not open ./xception_weights.h5: Data loss: not an sstable (bad magic number): \r\nperhaps your file is in a different file format and you need to use a different restore operator?\r\n```\r\n\r\nThe checksum of the weights file matches the checksum in the [source file.](https://github.com/tensorflow/tensorflow/blob/eeab2c867faa0f10dfea8635d1e87009844f902e/tensorflow/python/keras/_impl/keras/applications/xception.py#L318)\r\n\r\nThe second message is reproducible when building the image from the bug report without MKL (this was built from commit 6ba9573). It is also reproducible when running the code in the `tensorflow/tensorflow:nightly-devel-py3` image that was built from commit 714f3c4, so I think it's safe to say that the second message is not related to MKL. I'm not sure however how to interpret the first message.\r\n\r\nSorry about the different commits, the oldest one is from the 4th of May."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8497", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8497/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8497/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8497/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8497", "id": 215004047, "node_id": "MDU6SXNzdWUyMTUwMDQwNDc=", "number": 8497, "title": "Tensorflow Retrain Model performance", "user": {"login": "kinDSa", "id": 25680329, "node_id": "MDQ6VXNlcjI1NjgwMzI5", "avatar_url": "https://avatars1.githubusercontent.com/u/25680329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kinDSa", "html_url": "https://github.com/kinDSa", "followers_url": "https://api.github.com/users/kinDSa/followers", "following_url": "https://api.github.com/users/kinDSa/following{/other_user}", "gists_url": "https://api.github.com/users/kinDSa/gists{/gist_id}", "starred_url": "https://api.github.com/users/kinDSa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kinDSa/subscriptions", "organizations_url": "https://api.github.com/users/kinDSa/orgs", "repos_url": "https://api.github.com/users/kinDSa/repos", "events_url": "https://api.github.com/users/kinDSa/events{/privacy}", "received_events_url": "https://api.github.com/users/kinDSa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-17T13:31:47Z", "updated_at": "2017-03-23T07:09:23Z", "closed_at": "2017-03-21T16:41:43Z", "author_association": "NONE", "body_html": "<p>I am using <a href=\"https://codelabs.developers.google.com/codelabs/tensorflow-for-poets/#0\" rel=\"nofollow\">Tensorflow for poet</a> guide for train own model. I have create retrained_graph.pb and retrained_labels.txt. While I use it in application then I get error that</p>\n<p><code>Caused by: java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization(). at org.tensorflow.Graph.importGraphDef(Native Method) at org.tensorflow.Graph.importGraphDef(Graph.java:118) </code></p>\n<p>After That  further train model for application use <a href=\"https://petewarden.com/2016/09/27/tensorflow-for-mobile-poets/\" rel=\"nofollow\">Tensorflow for mobile </a>  blog and create <strong>optimized_graph.pb, rounded_graph.pb, mmapped_graph.pb</strong> files.</p>\n<p>optimized_graph.pb and rounded_graph.pb file work in android application without any error.<br>\nWhile use mmapped_graph.pb I get error that <strong>Failed to initialize: java.io.IOException: Not a valid TensorFlow Graph serialization: Invalid GraphDef</strong></p>\n<p>Performance of application is not good while use optimized_graph.pb and rounded_graph.pb file.While application camera screen not contain any flower photos otherwise random flower name show with high confidence rate. Any way to detect only flower and remain blank when not flowers.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/25680329/24044730/8edab30c-0b42-11e7-8209-a5fab382b81c.png\"><img src=\"https://cloud.githubusercontent.com/assets/25680329/24044730/8edab30c-0b42-11e7-8209-a5fab382b81c.png\" alt=\"screenshot\" style=\"max-width:100%;\"></a></p>", "body_text": "I am using Tensorflow for poet guide for train own model. I have create retrained_graph.pb and retrained_labels.txt. While I use it in application then I get error that\nCaused by: java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization(). at org.tensorflow.Graph.importGraphDef(Native Method) at org.tensorflow.Graph.importGraphDef(Graph.java:118) \nAfter That  further train model for application use Tensorflow for mobile   blog and create optimized_graph.pb, rounded_graph.pb, mmapped_graph.pb files.\noptimized_graph.pb and rounded_graph.pb file work in android application without any error.\nWhile use mmapped_graph.pb I get error that Failed to initialize: java.io.IOException: Not a valid TensorFlow Graph serialization: Invalid GraphDef\nPerformance of application is not good while use optimized_graph.pb and rounded_graph.pb file.While application camera screen not contain any flower photos otherwise random flower name show with high confidence rate. Any way to detect only flower and remain blank when not flowers.", "body": "I am using [Tensorflow for poet](https://codelabs.developers.google.com/codelabs/tensorflow-for-poets/#0) guide for train own model. I have create retrained_graph.pb and retrained_labels.txt. While I use it in application then I get error that \r\n\r\n\r\n`Caused by: java.lang.UnsupportedOperationException: Op BatchNormWithGlobalNormalization is not available in GraphDef version 21. It has been removed in version 9. Use tf.nn.batch_normalization(). at org.tensorflow.Graph.importGraphDef(Native Method) at org.tensorflow.Graph.importGraphDef(Graph.java:118) `\r\n\r\nAfter That  further train model for application use [Tensorflow for mobile ](https://petewarden.com/2016/09/27/tensorflow-for-mobile-poets/)  blog and create **optimized_graph.pb, rounded_graph.pb, mmapped_graph.pb** files.\r\n\r\noptimized_graph.pb and rounded_graph.pb file work in android application without any error.\r\nWhile use mmapped_graph.pb I get error that **Failed to initialize: java.io.IOException: Not a valid TensorFlow Graph serialization: Invalid GraphDef**\r\n\r\nPerformance of application is not good while use optimized_graph.pb and rounded_graph.pb file.While application camera screen not contain any flower photos otherwise random flower name show with high confidence rate. Any way to detect only flower and remain blank when not flowers.\r\n\r\n![screenshot](https://cloud.githubusercontent.com/assets/25680329/24044730/8edab30c-0b42-11e7-8209-a5fab382b81c.png)\r\n"}
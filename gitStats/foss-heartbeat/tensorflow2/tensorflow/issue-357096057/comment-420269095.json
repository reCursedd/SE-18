{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/420269095", "html_url": "https://github.com/tensorflow/tensorflow/issues/22081#issuecomment-420269095", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22081", "id": 420269095, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDI2OTA5NQ==", "user": {"login": "wangshuaizs", "id": 21264093, "node_id": "MDQ6VXNlcjIxMjY0MDkz", "avatar_url": "https://avatars2.githubusercontent.com/u/21264093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangshuaizs", "html_url": "https://github.com/wangshuaizs", "followers_url": "https://api.github.com/users/wangshuaizs/followers", "following_url": "https://api.github.com/users/wangshuaizs/following{/other_user}", "gists_url": "https://api.github.com/users/wangshuaizs/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangshuaizs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangshuaizs/subscriptions", "organizations_url": "https://api.github.com/users/wangshuaizs/orgs", "repos_url": "https://api.github.com/users/wangshuaizs/repos", "events_url": "https://api.github.com/users/wangshuaizs/events{/privacy}", "received_events_url": "https://api.github.com/users/wangshuaizs/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-11T13:11:42Z", "updated_at": "2018-09-15T07:50:36Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2613663\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byronyi\">@byronyi</a></p>\n<p>Hi,<br>\nAs you have said, I modified the code to</p>\n<pre><code>else {\n    perror(\"rdma_reg_read\");\n    LOG(WARNING) &lt;&lt; \"Cannot register memory region\";\n  }\n</code></pre>\n<p>And here is the relative output of GDR:</p>\n<pre><code>2018-09-15 15:40:24.807709: I tensorflow/contrib/gdr/gdr_memory_manager.cc:255] RDMA server is listening on 12.12.10.15:3333\n2018-09-15 15:40:24.807797: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cuda_host_bfc\n2018-09-15 15:40:24.807822: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cpu_pool\n2018-09-15 15:40:24.807842: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cpu_rdma_bfc\n2018-09-15 15:40:24.808077: I tensorflow/contrib/gdr/gdr_memory_manager.cc:96] NUMA node for device: mlx4_0 is 1\naddr = 0x1305c40000\nrdma_reg_read: Bad address\n2018-09-15 15:40:24.842781: W tensorflow/contrib/gdr/gdr_memory_manager.cc:709] Cannot register memory region\n2018-09-15 15:40:24.842828: I tensorflow/contrib/gdr/gdr_memory_manager.cc:315] Instrumenting GPU allocator with bus_id 2\n</code></pre>\n<p>It seems that the address is too large to exceed the capacity of my GPU, 12GB. Is that right?</p>", "body_text": "@byronyi\nHi,\nAs you have said, I modified the code to\nelse {\n    perror(\"rdma_reg_read\");\n    LOG(WARNING) << \"Cannot register memory region\";\n  }\n\nAnd here is the relative output of GDR:\n2018-09-15 15:40:24.807709: I tensorflow/contrib/gdr/gdr_memory_manager.cc:255] RDMA server is listening on 12.12.10.15:3333\n2018-09-15 15:40:24.807797: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cuda_host_bfc\n2018-09-15 15:40:24.807822: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cpu_pool\n2018-09-15 15:40:24.807842: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cpu_rdma_bfc\n2018-09-15 15:40:24.808077: I tensorflow/contrib/gdr/gdr_memory_manager.cc:96] NUMA node for device: mlx4_0 is 1\naddr = 0x1305c40000\nrdma_reg_read: Bad address\n2018-09-15 15:40:24.842781: W tensorflow/contrib/gdr/gdr_memory_manager.cc:709] Cannot register memory region\n2018-09-15 15:40:24.842828: I tensorflow/contrib/gdr/gdr_memory_manager.cc:315] Instrumenting GPU allocator with bus_id 2\n\nIt seems that the address is too large to exceed the capacity of my GPU, 12GB. Is that right?", "body": "@byronyi \r\n\r\nHi,\r\nAs you have said, I modified the code to \r\n```\r\nelse {\r\n    perror(\"rdma_reg_read\");\r\n    LOG(WARNING) << \"Cannot register memory region\";\r\n  }\r\n```\r\n\r\nAnd here is the relative output of GDR:\r\n\r\n```\r\n2018-09-15 15:40:24.807709: I tensorflow/contrib/gdr/gdr_memory_manager.cc:255] RDMA server is listening on 12.12.10.15:3333\r\n2018-09-15 15:40:24.807797: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cuda_host_bfc\r\n2018-09-15 15:40:24.807822: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cpu_pool\r\n2018-09-15 15:40:24.807842: I tensorflow/contrib/gdr/gdr_memory_manager.cc:303] Instrumenting CPU allocator cpu_rdma_bfc\r\n2018-09-15 15:40:24.808077: I tensorflow/contrib/gdr/gdr_memory_manager.cc:96] NUMA node for device: mlx4_0 is 1\r\naddr = 0x1305c40000\r\nrdma_reg_read: Bad address\r\n2018-09-15 15:40:24.842781: W tensorflow/contrib/gdr/gdr_memory_manager.cc:709] Cannot register memory region\r\n2018-09-15 15:40:24.842828: I tensorflow/contrib/gdr/gdr_memory_manager.cc:315] Instrumenting GPU allocator with bus_id 2\r\n```\r\n\r\n It seems that the address is too large to exceed the capacity of my GPU, 12GB. Is that right?"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/360604314", "html_url": "https://github.com/tensorflow/tensorflow/issues/15338#issuecomment-360604314", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15338", "id": 360604314, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDYwNDMxNA==", "user": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-25T21:20:24Z", "updated_at": "2018-01-25T21:20:24Z", "author_association": "MEMBER", "body_html": "<blockquote>\n<p>When compiling AOT tests with tensorflow 1.5 version, the compilation errors are not related to pywrap_tensorflow_internal. See again the log that I attached to the previous comment:<br>\ngcc5_tensorflow_v1.5_abi0.log</p>\n</blockquote>\n<p>None of the logs you attached in the first comment have the same \"undeclared inclusion\" error as far as I can tell.  I tried <code>blaze build all_tests</code> on top of tree, and I get the SWIG related duplicate symbol error so I think we should try to fix that first, even if it isn't the only error.</p>\n<p>I've never dealt with SWIG myself so I'm out of my depth here, but perhaps you could try binary searching through the %includes in tensorflow.i (by commenting out a set of %includes) to figure out why we're %include 'ing files that redefine the same symbols?</p>\n<blockquote>\n<p>Sorry for a beginner question, but I do I pass the cmake option from bazel? I tried this, but it doesn't work:<br>\ncd tensorflow/compiler/aot/tests ; bazel build -Dtensorflow_BUILD_PYTHON_BINDINGS=OFF --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" all_tests</p>\n</blockquote>\n<p>I've never used cmake with bazel, but as a starting point, I'd suggest reading the BUILD or .bzl files that invoke cmake (they're written in Skylark, which is a language similar to python) to see how they discover the arguments that are to be passed to cmake.</p>", "body_text": "When compiling AOT tests with tensorflow 1.5 version, the compilation errors are not related to pywrap_tensorflow_internal. See again the log that I attached to the previous comment:\ngcc5_tensorflow_v1.5_abi0.log\n\nNone of the logs you attached in the first comment have the same \"undeclared inclusion\" error as far as I can tell.  I tried blaze build all_tests on top of tree, and I get the SWIG related duplicate symbol error so I think we should try to fix that first, even if it isn't the only error.\nI've never dealt with SWIG myself so I'm out of my depth here, but perhaps you could try binary searching through the %includes in tensorflow.i (by commenting out a set of %includes) to figure out why we're %include 'ing files that redefine the same symbols?\n\nSorry for a beginner question, but I do I pass the cmake option from bazel? I tried this, but it doesn't work:\ncd tensorflow/compiler/aot/tests ; bazel build -Dtensorflow_BUILD_PYTHON_BINDINGS=OFF --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" all_tests\n\nI've never used cmake with bazel, but as a starting point, I'd suggest reading the BUILD or .bzl files that invoke cmake (they're written in Skylark, which is a language similar to python) to see how they discover the arguments that are to be passed to cmake.", "body": "> When compiling AOT tests with tensorflow 1.5 version, the compilation errors are not related to pywrap_tensorflow_internal. See again the log that I attached to the previous comment:\r\ngcc5_tensorflow_v1.5_abi0.log\r\n\r\nNone of the logs you attached in the first comment have the same \"undeclared inclusion\" error as far as I can tell.  I tried `blaze build all_tests` on top of tree, and I get the SWIG related duplicate symbol error so I think we should try to fix that first, even if it isn't the only error.\r\n\r\nI've never dealt with SWIG myself so I'm out of my depth here, but perhaps you could try binary searching through the %includes in tensorflow.i (by commenting out a set of %includes) to figure out why we're %include 'ing files that redefine the same symbols?\r\n\r\n> Sorry for a beginner question, but I do I pass the cmake option from bazel? I tried this, but it doesn't work:\r\ncd tensorflow/compiler/aot/tests ; bazel build -Dtensorflow_BUILD_PYTHON_BINDINGS=OFF --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" all_tests\r\n\r\nI've never used cmake with bazel, but as a starting point, I'd suggest reading the BUILD or .bzl files that invoke cmake (they're written in Skylark, which is a language similar to python) to see how they discover the arguments that are to be passed to cmake."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/396214188", "html_url": "https://github.com/tensorflow/tensorflow/issues/16768#issuecomment-396214188", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16768", "id": 396214188, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjIxNDE4OA==", "user": {"login": "laraibzubair18", "id": 25176675, "node_id": "MDQ6VXNlcjI1MTc2Njc1", "avatar_url": "https://avatars3.githubusercontent.com/u/25176675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laraibzubair18", "html_url": "https://github.com/laraibzubair18", "followers_url": "https://api.github.com/users/laraibzubair18/followers", "following_url": "https://api.github.com/users/laraibzubair18/following{/other_user}", "gists_url": "https://api.github.com/users/laraibzubair18/gists{/gist_id}", "starred_url": "https://api.github.com/users/laraibzubair18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laraibzubair18/subscriptions", "organizations_url": "https://api.github.com/users/laraibzubair18/orgs", "repos_url": "https://api.github.com/users/laraibzubair18/repos", "events_url": "https://api.github.com/users/laraibzubair18/events{/privacy}", "received_events_url": "https://api.github.com/users/laraibzubair18/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-11T11:40:42Z", "updated_at": "2018-06-11T11:40:42Z", "author_association": "NONE", "body_html": "<div class=\"email-fragment\">Kute harramte</div>\n<span class=\"email-hidden-toggle\"><a href=\"#\">\u2026</a></span><div class=\"email-hidden-reply\">\n<div class=\"email-quoted-reply\">On 11 Jun 2018 16:39, \"Laraib Zubair\" ***@***.***&gt; wrote:\n Kute harramte. Dele ma de pode\n On 11 Jun 2018 16:37, \"Laraib Zubair\" ***@***.***&gt; wrote:\n\n&gt; Kute. Harramte. Dele\n&gt; On 11 Jun 2018 16:37, \"Laraib Zubair\" ***@***.***&gt; wrote:\n&gt;\n&gt;&gt; Kute harramte dele\n&gt;&gt; On 11 Jun 2018 16:35, \"daoud\" ***@***.***&gt; wrote:\n&gt;&gt;\n&gt;&gt;&gt; I am doing performance testing inception model flask api with gunicorn\n&gt;&gt;&gt; (creating multiple process) Error: OOM when allocating tensor with\n&gt;&gt;&gt; shape[800,1280,3] and type float on /job:localhost/replica:0/task:0/device:GPU:0\n&gt;&gt;&gt; by allocator GPU_0_bfc [[Node: Cast = CastDstT=DT_FLOAT, SrcT=DT_UINT8,\n&gt;&gt;&gt; _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]] Hint: If you\n&gt;&gt;&gt; want to see a list of allocated tensors when OOM happens, add\n&gt;&gt;&gt; report_tensor_allocations_upon_oom to RunOptions for current\n&gt;&gt;&gt; allocation info.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Caused by op 'Cast', defined at: File \"/usr/local/bin/gunicorn\", line\n&gt;&gt;&gt; 11, in sys.exit(run()) File \"/usr/local/lib/python3.5/dist\n&gt;&gt;&gt; -packages/gunicorn/app/wsgiapp.py\", line 61, in run\n&gt;&gt;&gt; WSGIApplication(\"%(prog)s [OPTIONS] [APP_MODULE]\").run() File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/gunicorn/app/base.py\", line\n&gt;&gt;&gt; 223, in run super(Application, self).run() File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/gunicorn/app/base.py\", line\n&gt;&gt;&gt; 72, in run Arbiter(self).run() File \"/usr/local/lib/python3.5/dist\n&gt;&gt;&gt; -packages/gunicorn/arbiter.py\", line 212, in run self.manage_workers()\n&gt;&gt;&gt; File \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\",\n&gt;&gt;&gt; line 545, in manage_workers self.spawn_workers() File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\", line\n&gt;&gt;&gt; 616, in spawn_workers self.spawn_worker() File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\", line\n&gt;&gt;&gt; 583, in spawn_worker worker.init_process() File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/gunicorn/workers/base.py\",\n&gt;&gt;&gt; line 134, in init_process self.run() File \"/usr/local/lib/python3.5/dist\n&gt;&gt;&gt; -packages/gunicorn/workers/sync.py\", line 124, in run\n&gt;&gt;&gt; self.run_for_one(timeout) File \"/usr/local/lib/python3.5/dist\n&gt;&gt;&gt; -packages/gunicorn/workers/sync.py\", line 68, in run_for_one\n&gt;&gt;&gt; self.accept(listener) File \"/usr/local/lib/python3.5/dist\n&gt;&gt;&gt; -packages/gunicorn/workers/sync.py\", line 30, in accept\n&gt;&gt;&gt; self.handle(listener, client, addr) File \"/usr/local/lib/python3.5/dist\n&gt;&gt;&gt; -packages/gunicorn/workers/sync.py\", line 135, in handle\n&gt;&gt;&gt; self.handle_request(listener, req, client, addr) File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/gunicorn/workers/sync.py\",\n&gt;&gt;&gt; line 176, in handle_request respiter = self.wsgi(environ,\n&gt;&gt;&gt; resp.start_response) File \"/usr/local/lib/python3.5/dist-packages/flask/app.py\",\n&gt;&gt;&gt; line 1997, in call return self.wsgi_app(environ, start_response) File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1982, in\n&gt;&gt;&gt; wsgi_app response = self.full_dispatch_request() File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1612, in\n&gt;&gt;&gt; full_dispatch_request rv = self.dispatch_request() File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1598, in\n&gt;&gt;&gt; dispatch_request return self.view_functionsrule.endpoint File\n&gt;&gt;&gt; \"/home/ubuntu/cv_workspace/computer_vision_services.py\", line 1480, in\n&gt;&gt;&gt; classify_bulk input_operation, output_operation, tf_session=sess) File\n&gt;&gt;&gt; \"/home/ubuntu/cv_workspace/src/apis/ImgClassification.py\", line 228,\n&gt;&gt;&gt; in classifyImageInSess t = read_tensor_from_image_file(file_name) File\n&gt;&gt;&gt; \"/home/ubuntu/cv_workspace/src/apis/ImgClassification.py\", line 51, in\n&gt;&gt;&gt; read_tensor_from_image_file float_caster = tf.cast(image_reader,\n&gt;&gt;&gt; tf.float32) File \"/usr/local/lib/python3.5/dist\n&gt;&gt;&gt; -packages/tensorflow/python/ops/math_ops.py\", line 758, in cast return\n&gt;&gt;&gt; gen_math_ops.cast(x, base_type, name=name) File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/gen_math_ops.py\",\n&gt;&gt;&gt; line 919, in cast \"Cast\", x=x, DstT=DstT, name=name) File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/op_def_library.py\",\n&gt;&gt;&gt; line 787, in _apply_op_helper op_def=op_def) File\n&gt;&gt;&gt; \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\",\n&gt;&gt;&gt; line 3160, in create_op op_def=op_def) File \"/usr/local/lib/python3.5/dist\n&gt;&gt;&gt; -packages/tensorflow/python/framework/ops.py\", line 1625, in init\n&gt;&gt;&gt; self._traceback = self._graph._extract_stack() # pylint:\n&gt;&gt;&gt; disable=protected-access\n&gt;&gt;&gt;\n&gt;&gt;&gt; ################ GPU\n&gt;&gt;&gt; [image: image]\n&gt;&gt;&gt; &lt;<a href=\"https://user-images.githubusercontent.com/2271152/41229156-a212955c-6d98-11e8-8a7e-8d41001f3036.png\">https://user-images.githubusercontent.com/2271152/41229156-a212955c-6d98-11e8-8a7e-8d41001f3036.png</a>&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; \u2014\n&gt;&gt;&gt; You are receiving this because you are subscribed to this thread.\n&gt;&gt;&gt; Reply to this email directly, view it on GitHub\n&gt;&gt;&gt; &lt;<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"294293361\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16768\" href=\"https://github.com/tensorflow/tensorflow/issues/16768#issuecomment-396211455\">#16768 (comment)</a>&gt;,\n&gt;&gt;&gt; or mute the thread\n&gt;&gt;&gt; &lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AYAqY45nRfM6H-3eb984gBdCr9zs0SbQks5t7lXtgaJpZM4R5AQq\">https://github.com/notifications/unsubscribe-auth/AYAqY45nRfM6H-3eb984gBdCr9zs0SbQks5t7lXtgaJpZM4R5AQq</a>&gt;\n&gt;&gt;&gt; .\n&gt;&gt;&gt;\n&gt;&gt;</div>\n<div class=\"email-fragment\"></div>\n</div>", "body_text": "Kute harramte\n\u2026\nOn 11 Jun 2018 16:39, \"Laraib Zubair\" ***@***.***> wrote:\n Kute harramte. Dele ma de pode\n On 11 Jun 2018 16:37, \"Laraib Zubair\" ***@***.***> wrote:\n\n> Kute. Harramte. Dele\n> On 11 Jun 2018 16:37, \"Laraib Zubair\" ***@***.***> wrote:\n>\n>> Kute harramte dele\n>> On 11 Jun 2018 16:35, \"daoud\" ***@***.***> wrote:\n>>\n>>> I am doing performance testing inception model flask api with gunicorn\n>>> (creating multiple process) Error: OOM when allocating tensor with\n>>> shape[800,1280,3] and type float on /job:localhost/replica:0/task:0/device:GPU:0\n>>> by allocator GPU_0_bfc [[Node: Cast = CastDstT=DT_FLOAT, SrcT=DT_UINT8,\n>>> _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]] Hint: If you\n>>> want to see a list of allocated tensors when OOM happens, add\n>>> report_tensor_allocations_upon_oom to RunOptions for current\n>>> allocation info.\n>>>\n>>> Caused by op 'Cast', defined at: File \"/usr/local/bin/gunicorn\", line\n>>> 11, in sys.exit(run()) File \"/usr/local/lib/python3.5/dist\n>>> -packages/gunicorn/app/wsgiapp.py\", line 61, in run\n>>> WSGIApplication(\"%(prog)s [OPTIONS] [APP_MODULE]\").run() File\n>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/app/base.py\", line\n>>> 223, in run super(Application, self).run() File\n>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/app/base.py\", line\n>>> 72, in run Arbiter(self).run() File \"/usr/local/lib/python3.5/dist\n>>> -packages/gunicorn/arbiter.py\", line 212, in run self.manage_workers()\n>>> File \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\",\n>>> line 545, in manage_workers self.spawn_workers() File\n>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\", line\n>>> 616, in spawn_workers self.spawn_worker() File\n>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\", line\n>>> 583, in spawn_worker worker.init_process() File\n>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/workers/base.py\",\n>>> line 134, in init_process self.run() File \"/usr/local/lib/python3.5/dist\n>>> -packages/gunicorn/workers/sync.py\", line 124, in run\n>>> self.run_for_one(timeout) File \"/usr/local/lib/python3.5/dist\n>>> -packages/gunicorn/workers/sync.py\", line 68, in run_for_one\n>>> self.accept(listener) File \"/usr/local/lib/python3.5/dist\n>>> -packages/gunicorn/workers/sync.py\", line 30, in accept\n>>> self.handle(listener, client, addr) File \"/usr/local/lib/python3.5/dist\n>>> -packages/gunicorn/workers/sync.py\", line 135, in handle\n>>> self.handle_request(listener, req, client, addr) File\n>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/workers/sync.py\",\n>>> line 176, in handle_request respiter = self.wsgi(environ,\n>>> resp.start_response) File \"/usr/local/lib/python3.5/dist-packages/flask/app.py\",\n>>> line 1997, in call return self.wsgi_app(environ, start_response) File\n>>> \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1982, in\n>>> wsgi_app response = self.full_dispatch_request() File\n>>> \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1612, in\n>>> full_dispatch_request rv = self.dispatch_request() File\n>>> \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1598, in\n>>> dispatch_request return self.view_functionsrule.endpoint File\n>>> \"/home/ubuntu/cv_workspace/computer_vision_services.py\", line 1480, in\n>>> classify_bulk input_operation, output_operation, tf_session=sess) File\n>>> \"/home/ubuntu/cv_workspace/src/apis/ImgClassification.py\", line 228,\n>>> in classifyImageInSess t = read_tensor_from_image_file(file_name) File\n>>> \"/home/ubuntu/cv_workspace/src/apis/ImgClassification.py\", line 51, in\n>>> read_tensor_from_image_file float_caster = tf.cast(image_reader,\n>>> tf.float32) File \"/usr/local/lib/python3.5/dist\n>>> -packages/tensorflow/python/ops/math_ops.py\", line 758, in cast return\n>>> gen_math_ops.cast(x, base_type, name=name) File\n>>> \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/gen_math_ops.py\",\n>>> line 919, in cast \"Cast\", x=x, DstT=DstT, name=name) File\n>>> \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/op_def_library.py\",\n>>> line 787, in _apply_op_helper op_def=op_def) File\n>>> \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\",\n>>> line 3160, in create_op op_def=op_def) File \"/usr/local/lib/python3.5/dist\n>>> -packages/tensorflow/python/framework/ops.py\", line 1625, in init\n>>> self._traceback = self._graph._extract_stack() # pylint:\n>>> disable=protected-access\n>>>\n>>> ################ GPU\n>>> [image: image]\n>>> <https://user-images.githubusercontent.com/2271152/41229156-a212955c-6d98-11e8-8a7e-8d41001f3036.png>\n>>>\n>>> \u2014\n>>> You are receiving this because you are subscribed to this thread.\n>>> Reply to this email directly, view it on GitHub\n>>> <#16768 (comment)>,\n>>> or mute the thread\n>>> <https://github.com/notifications/unsubscribe-auth/AYAqY45nRfM6H-3eb984gBdCr9zs0SbQks5t7lXtgaJpZM4R5AQq>\n>>> .\n>>>\n>>", "body": "Kute harramte\nOn 11 Jun 2018 16:39, \"Laraib Zubair\" <laraibzubair89@gmail.com> wrote:\n\n> Kute harramte. Dele ma de pode\n> On 11 Jun 2018 16:37, \"Laraib Zubair\" <laraibzubair89@gmail.com> wrote:\n>\n>> Kute. Harramte. Dele\n>> On 11 Jun 2018 16:37, \"Laraib Zubair\" <laraibzubair89@gmail.com> wrote:\n>>\n>>> Kute harramte dele\n>>> On 11 Jun 2018 16:35, \"daoud\" <notifications@github.com> wrote:\n>>>\n>>>> I am doing performance testing inception model flask api with gunicorn\n>>>> (creating multiple process) Error: OOM when allocating tensor with\n>>>> shape[800,1280,3] and type float on /job:localhost/replica:0/task:0/device:GPU:0\n>>>> by allocator GPU_0_bfc [[Node: Cast = CastDstT=DT_FLOAT, SrcT=DT_UINT8,\n>>>> _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]] Hint: If you\n>>>> want to see a list of allocated tensors when OOM happens, add\n>>>> report_tensor_allocations_upon_oom to RunOptions for current\n>>>> allocation info.\n>>>>\n>>>> Caused by op 'Cast', defined at: File \"/usr/local/bin/gunicorn\", line\n>>>> 11, in sys.exit(run()) File \"/usr/local/lib/python3.5/dist\n>>>> -packages/gunicorn/app/wsgiapp.py\", line 61, in run\n>>>> WSGIApplication(\"%(prog)s [OPTIONS] [APP_MODULE]\").run() File\n>>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/app/base.py\", line\n>>>> 223, in run super(Application, self).run() File\n>>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/app/base.py\", line\n>>>> 72, in run Arbiter(self).run() File \"/usr/local/lib/python3.5/dist\n>>>> -packages/gunicorn/arbiter.py\", line 212, in run self.manage_workers()\n>>>> File \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\",\n>>>> line 545, in manage_workers self.spawn_workers() File\n>>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\", line\n>>>> 616, in spawn_workers self.spawn_worker() File\n>>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/arbiter.py\", line\n>>>> 583, in spawn_worker worker.init_process() File\n>>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/workers/base.py\",\n>>>> line 134, in init_process self.run() File \"/usr/local/lib/python3.5/dist\n>>>> -packages/gunicorn/workers/sync.py\", line 124, in run\n>>>> self.run_for_one(timeout) File \"/usr/local/lib/python3.5/dist\n>>>> -packages/gunicorn/workers/sync.py\", line 68, in run_for_one\n>>>> self.accept(listener) File \"/usr/local/lib/python3.5/dist\n>>>> -packages/gunicorn/workers/sync.py\", line 30, in accept\n>>>> self.handle(listener, client, addr) File \"/usr/local/lib/python3.5/dist\n>>>> -packages/gunicorn/workers/sync.py\", line 135, in handle\n>>>> self.handle_request(listener, req, client, addr) File\n>>>> \"/usr/local/lib/python3.5/dist-packages/gunicorn/workers/sync.py\",\n>>>> line 176, in handle_request respiter = self.wsgi(environ,\n>>>> resp.start_response) File \"/usr/local/lib/python3.5/dist-packages/flask/app.py\",\n>>>> line 1997, in call return self.wsgi_app(environ, start_response) File\n>>>> \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1982, in\n>>>> wsgi_app response = self.full_dispatch_request() File\n>>>> \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1612, in\n>>>> full_dispatch_request rv = self.dispatch_request() File\n>>>> \"/usr/local/lib/python3.5/dist-packages/flask/app.py\", line 1598, in\n>>>> dispatch_request return self.view_functionsrule.endpoint File\n>>>> \"/home/ubuntu/cv_workspace/computer_vision_services.py\", line 1480, in\n>>>> classify_bulk input_operation, output_operation, tf_session=sess) File\n>>>> \"/home/ubuntu/cv_workspace/src/apis/ImgClassification.py\", line 228,\n>>>> in classifyImageInSess t = read_tensor_from_image_file(file_name) File\n>>>> \"/home/ubuntu/cv_workspace/src/apis/ImgClassification.py\", line 51, in\n>>>> read_tensor_from_image_file float_caster = tf.cast(image_reader,\n>>>> tf.float32) File \"/usr/local/lib/python3.5/dist\n>>>> -packages/tensorflow/python/ops/math_ops.py\", line 758, in cast return\n>>>> gen_math_ops.cast(x, base_type, name=name) File\n>>>> \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/gen_math_ops.py\",\n>>>> line 919, in cast \"Cast\", x=x, DstT=DstT, name=name) File\n>>>> \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/op_def_library.py\",\n>>>> line 787, in _apply_op_helper op_def=op_def) File\n>>>> \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/ops.py\",\n>>>> line 3160, in create_op op_def=op_def) File \"/usr/local/lib/python3.5/dist\n>>>> -packages/tensorflow/python/framework/ops.py\", line 1625, in init\n>>>> self._traceback = self._graph._extract_stack() # pylint:\n>>>> disable=protected-access\n>>>>\n>>>> ################ GPU\n>>>> [image: image]\n>>>> <https://user-images.githubusercontent.com/2271152/41229156-a212955c-6d98-11e8-8a7e-8d41001f3036.png>\n>>>>\n>>>> \u2014\n>>>> You are receiving this because you are subscribed to this thread.\n>>>> Reply to this email directly, view it on GitHub\n>>>> <https://github.com/tensorflow/tensorflow/issues/16768#issuecomment-396211455>,\n>>>> or mute the thread\n>>>> <https://github.com/notifications/unsubscribe-auth/AYAqY45nRfM6H-3eb984gBdCr9zs0SbQks5t7lXtgaJpZM4R5AQq>\n>>>> .\n>>>>\n>>>\n"}
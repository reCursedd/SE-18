{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11327", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11327/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11327/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11327/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11327", "id": 240990720, "node_id": "MDU6SXNzdWUyNDA5OTA3MjA=", "number": 11327, "title": "Backprop through conv2d with large tensors fails", "user": {"login": "ma0ho", "id": 1632554, "node_id": "MDQ6VXNlcjE2MzI1NTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1632554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ma0ho", "html_url": "https://github.com/ma0ho", "followers_url": "https://api.github.com/users/ma0ho/followers", "following_url": "https://api.github.com/users/ma0ho/following{/other_user}", "gists_url": "https://api.github.com/users/ma0ho/gists{/gist_id}", "starred_url": "https://api.github.com/users/ma0ho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ma0ho/subscriptions", "organizations_url": "https://api.github.com/users/ma0ho/orgs", "repos_url": "https://api.github.com/users/ma0ho/repos", "events_url": "https://api.github.com/users/ma0ho/events{/privacy}", "received_events_url": "https://api.github.com/users/ma0ho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "yzhwang", "id": 1002405, "node_id": "MDQ6VXNlcjEwMDI0MDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1002405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yzhwang", "html_url": "https://github.com/yzhwang", "followers_url": "https://api.github.com/users/yzhwang/followers", "following_url": "https://api.github.com/users/yzhwang/following{/other_user}", "gists_url": "https://api.github.com/users/yzhwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yzhwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yzhwang/subscriptions", "organizations_url": "https://api.github.com/users/yzhwang/orgs", "repos_url": "https://api.github.com/users/yzhwang/repos", "events_url": "https://api.github.com/users/yzhwang/events{/privacy}", "received_events_url": "https://api.github.com/users/yzhwang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yzhwang", "id": 1002405, "node_id": "MDQ6VXNlcjEwMDI0MDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1002405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yzhwang", "html_url": "https://github.com/yzhwang", "followers_url": "https://api.github.com/users/yzhwang/followers", "following_url": "https://api.github.com/users/yzhwang/following{/other_user}", "gists_url": "https://api.github.com/users/yzhwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yzhwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yzhwang/subscriptions", "organizations_url": "https://api.github.com/users/yzhwang/orgs", "repos_url": "https://api.github.com/users/yzhwang/repos", "events_url": "https://api.github.com/users/yzhwang/events{/privacy}", "received_events_url": "https://api.github.com/users/yzhwang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 28, "created_at": "2017-07-06T15:12:58Z", "updated_at": "2017-10-30T04:07:58Z", "closed_at": "2017-08-23T18:50:00Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:<br>\nYes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:<br>\nUbuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:<br>\nsource</li>\n<li><strong>TensorFlow version (use command below)</strong>:<br>\n1.1.0</li>\n<li><strong>Python version</strong>:<br>\n3.5.2</li>\n<li><strong>Bazel version (if compiling from source)</strong>:<br>\n0.4.5</li>\n<li><strong>CUDA/cuDNN version</strong>:<br>\nCUDA Version 8.0.61</li>\n<li><strong>GPU model and memory</strong>:<br>\nGeForce GTX 1080, 8GB</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<pre><code>import tensorflow as tf\n\nproj = tf.Variable( tf.random_normal([720,1,400,600], stddev = 2) )\nkernel = tf.Variable( tf.random_normal([1, 401, 1, 1], stddev = .5), trainable = True )\nproj = tf.nn.conv2d(\n    input = proj,\n    filter = kernel,\n    strides = [ 1, 1, 1, 1 ],\n    padding = 'SAME',\n    data_format = 'NCHW',\n    name = 'ramlak-filter'\n)\ngrad = tf.gradients( proj, kernel, proj )\n\nwith tf.Session() as sess:\n    sess.run( tf.global_variables_initializer() )\n    print( sess.run( grad ) )\n</code></pre>\n<h3>Describe the problem</h3>\n<p>Backpropagation through <code>conv2d</code> for large tensors produces an error for me (see log below). This is true for the code above. Lowering the batch size in <code>proj</code> from 720 to 100 eliminates the error. The issue has been confirmed by another user at <a href=\"https://stackoverflow.com/questions/44901742/tensorflow-error-while-backpropagating-through-conv2d\" rel=\"nofollow\">stackoverflow</a>.</p>\n<h3>Source code / logs</h3>\n<pre><code>NotFoundError (see above for traceback): No algorithm without scratch worked!\n\t [[Node: gradients/ramlak-filter_grad/Conv2DBackpropFilter = Conv2DBackpropFilter[T=DT_FLOAT, data_format=\"NCHW\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](Variable/read, gradients/ramlak-filter_grad/Shape_1, ramlak-filter)]]\n[log.txt](https://github.com/tensorflow/tensorflow/files/1128268/log.txt)\n\n</code></pre>\n<p>Please find the full log attached.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nYes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\nUbuntu 16.04\nTensorFlow installed from (source or binary):\nsource\nTensorFlow version (use command below):\n1.1.0\nPython version:\n3.5.2\nBazel version (if compiling from source):\n0.4.5\nCUDA/cuDNN version:\nCUDA Version 8.0.61\nGPU model and memory:\nGeForce GTX 1080, 8GB\nExact command to reproduce:\n\nimport tensorflow as tf\n\nproj = tf.Variable( tf.random_normal([720,1,400,600], stddev = 2) )\nkernel = tf.Variable( tf.random_normal([1, 401, 1, 1], stddev = .5), trainable = True )\nproj = tf.nn.conv2d(\n    input = proj,\n    filter = kernel,\n    strides = [ 1, 1, 1, 1 ],\n    padding = 'SAME',\n    data_format = 'NCHW',\n    name = 'ramlak-filter'\n)\ngrad = tf.gradients( proj, kernel, proj )\n\nwith tf.Session() as sess:\n    sess.run( tf.global_variables_initializer() )\n    print( sess.run( grad ) )\n\nDescribe the problem\nBackpropagation through conv2d for large tensors produces an error for me (see log below). This is true for the code above. Lowering the batch size in proj from 720 to 100 eliminates the error. The issue has been confirmed by another user at stackoverflow.\nSource code / logs\nNotFoundError (see above for traceback): No algorithm without scratch worked!\n\t [[Node: gradients/ramlak-filter_grad/Conv2DBackpropFilter = Conv2DBackpropFilter[T=DT_FLOAT, data_format=\"NCHW\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](Variable/read, gradients/ramlak-filter_grad/Shape_1, ramlak-filter)]]\n[log.txt](https://github.com/tensorflow/tensorflow/files/1128268/log.txt)\n\n\nPlease find the full log attached.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nUbuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\nsource\r\n- **TensorFlow version (use command below)**:\r\n1.1.0\r\n- **Python version**: \r\n3.5.2\r\n- **Bazel version (if compiling from source)**:\r\n0.4.5\r\n- **CUDA/cuDNN version**:\r\nCUDA Version 8.0.61\r\n- **GPU model and memory**:\r\nGeForce GTX 1080, 8GB\r\n- **Exact command to reproduce**:\r\n```\r\nimport tensorflow as tf\r\n\r\nproj = tf.Variable( tf.random_normal([720,1,400,600], stddev = 2) )\r\nkernel = tf.Variable( tf.random_normal([1, 401, 1, 1], stddev = .5), trainable = True )\r\nproj = tf.nn.conv2d(\r\n    input = proj,\r\n    filter = kernel,\r\n    strides = [ 1, 1, 1, 1 ],\r\n    padding = 'SAME',\r\n    data_format = 'NCHW',\r\n    name = 'ramlak-filter'\r\n)\r\ngrad = tf.gradients( proj, kernel, proj )\r\n\r\nwith tf.Session() as sess:\r\n    sess.run( tf.global_variables_initializer() )\r\n    print( sess.run( grad ) )\r\n```\r\n\r\n### Describe the problem\r\nBackpropagation through `conv2d` for large tensors produces an error for me (see log below). This is true for the code above. Lowering the batch size in `proj` from 720 to 100 eliminates the error. The issue has been confirmed by another user at [stackoverflow](https://stackoverflow.com/questions/44901742/tensorflow-error-while-backpropagating-through-conv2d).\r\n\r\n### Source code / logs\r\n```\r\nNotFoundError (see above for traceback): No algorithm without scratch worked!\r\n\t [[Node: gradients/ramlak-filter_grad/Conv2DBackpropFilter = Conv2DBackpropFilter[T=DT_FLOAT, data_format=\"NCHW\", padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](Variable/read, gradients/ramlak-filter_grad/Shape_1, ramlak-filter)]]\r\n[log.txt](https://github.com/tensorflow/tensorflow/files/1128268/log.txt)\r\n\r\n```\r\n\r\nPlease find the full log attached.\r\n\r\n"}
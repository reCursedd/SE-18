{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8331", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8331/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8331/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8331/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/8331", "id": 213641676, "node_id": "MDExOlB1bGxSZXF1ZXN0MTEwMzE5Mzkw", "number": 8331, "title": "Fix `go generate` error in case multiple directories in GOPATH exist", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2017-03-12T22:44:52Z", "updated_at": "2017-03-13T19:11:14Z", "closed_at": "2017-03-13T19:01:29Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/8331", "html_url": "https://github.com/tensorflow/tensorflow/pull/8331", "diff_url": "https://github.com/tensorflow/tensorflow/pull/8331.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/8331.patch"}, "body_html": "<p>This fix tries to address the issue raised in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"203893722\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7136\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7136/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7136\">#7136</a> where <code>go generate</code> will produce an error when multiple directories in GOPATH exists.</p>\n<p>The issue is because, in case multiple directories exist in GOPATH, the following line in <code>generate.sh</code> will not work:</p>\n<pre><code>cd $(dirname $0)\nTF_DIR=${GOPATH}/src/github.com/tensorflow/tensorflow\nPROTOC=\"${TF_DIR}/bazel-out/host/bin/external/protobuf/protoc\"\n</code></pre>\n<p>This fix address the issue by iterating througgh each directory in <code>GOPATH</code> so that <code>protoc</code> (<code>${PROTOC}</code>) could be correctly located:</p>\n<pre><code>for g in $(echo $GOPATH | sed \"s/:/ /g\"); do\n    TF_DIR=\"${g}/src/github.com/tensorflow/tensorflow\"\n    PROTOC=\"${TF_DIR}/bazel-out/host/bin/external/protobuf/protoc\"\n    if [ -x \"${PROTOC}\" ]; then\n        break\n    fi\ndone\n</code></pre>\n<p>This fix <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #7136.\">fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"203893722\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/7136\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/7136/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/7136\">#7136</a>.</p>", "body_text": "This fix tries to address the issue raised in #7136 where go generate will produce an error when multiple directories in GOPATH exists.\nThe issue is because, in case multiple directories exist in GOPATH, the following line in generate.sh will not work:\ncd $(dirname $0)\nTF_DIR=${GOPATH}/src/github.com/tensorflow/tensorflow\nPROTOC=\"${TF_DIR}/bazel-out/host/bin/external/protobuf/protoc\"\n\nThis fix address the issue by iterating througgh each directory in GOPATH so that protoc (${PROTOC}) could be correctly located:\nfor g in $(echo $GOPATH | sed \"s/:/ /g\"); do\n    TF_DIR=\"${g}/src/github.com/tensorflow/tensorflow\"\n    PROTOC=\"${TF_DIR}/bazel-out/host/bin/external/protobuf/protoc\"\n    if [ -x \"${PROTOC}\" ]; then\n        break\n    fi\ndone\n\nThis fix fixes #7136.", "body": "This fix tries to address the issue raised in #7136 where `go generate` will produce an error when multiple directories in GOPATH exists.\r\n\r\nThe issue is because, in case multiple directories exist in GOPATH, the following line in `generate.sh` will not work:\r\n```\r\ncd $(dirname $0)\r\nTF_DIR=${GOPATH}/src/github.com/tensorflow/tensorflow\r\nPROTOC=\"${TF_DIR}/bazel-out/host/bin/external/protobuf/protoc\"\r\n```\r\n\r\nThis fix address the issue by iterating througgh each directory in `GOPATH` so that `protoc` (`${PROTOC}`) could be correctly located:\r\n```\r\nfor g in $(echo $GOPATH | sed \"s/:/ /g\"); do\r\n    TF_DIR=\"${g}/src/github.com/tensorflow/tensorflow\"\r\n    PROTOC=\"${TF_DIR}/bazel-out/host/bin/external/protobuf/protoc\"\r\n    if [ -x \"${PROTOC}\" ]; then\r\n        break\r\n    fi\r\ndone\r\n```\r\n\r\nThis fix fixes #7136."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6849", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6849/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6849/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6849/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/6849", "id": 200808422, "node_id": "MDU6SXNzdWUyMDA4MDg0MjI=", "number": 6849, "title": "Regression error (worked in 0.8): DNNRegressor no longer supports multiple output neurons ", "user": {"login": "jeffheaton", "id": 462761, "node_id": "MDQ6VXNlcjQ2Mjc2MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/462761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffheaton", "html_url": "https://github.com/jeffheaton", "followers_url": "https://api.github.com/users/jeffheaton/followers", "following_url": "https://api.github.com/users/jeffheaton/following{/other_user}", "gists_url": "https://api.github.com/users/jeffheaton/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffheaton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffheaton/subscriptions", "organizations_url": "https://api.github.com/users/jeffheaton/orgs", "repos_url": "https://api.github.com/users/jeffheaton/repos", "events_url": "https://api.github.com/users/jeffheaton/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffheaton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-01-14T14:55:39Z", "updated_at": "2017-12-09T22:31:06Z", "closed_at": "2017-06-16T17:02:33Z", "author_association": "NONE", "body_html": "<p>NOTE: Only file GitHub issues for bugs and feature requests.  All other topics will be closed.</p>\n<p>For general support from the community, see <a href=\"https://stackoverflow.com/questions/tagged/tensorflow\" rel=\"nofollow\">StackOverflow</a>.<br>\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed<br>\nout of scope for GitHub Issues and point people to StackOverflow.</p>\n<p>For bugs or installation issues, please provide the following information.<br>\nThe more information you provide, the more easily we will be able to offer<br>\nhelp and advice.</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p><a href=\"http://stackoverflow.com/questions/34224826/skflow-regression-predict-multiple-values\" rel=\"nofollow\">http://stackoverflow.com/questions/34224826/skflow-regression-predict-multiple-values</a></p>\n<h3>Environment info</h3>\n<p>Operating System:<br>\nMac<br>\nInstalled version of CUDA and cuDNN:<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>\n<p>A link to the pip package you installed:</p>\n</li>\n<li>\n<p>The output from <code>python -c \"import tensorflow; print(tensorflow.__version__)\"</code>.<br>\nTried in both:<br>\n0.12.1<br>\n1.0.0-rc1<br>\nIf installed from source, provide</p>\n</li>\n<li>\n<p>The commit hash (<code>git rev-parse HEAD</code>)</p>\n</li>\n<li>\n<p>The output of <code>bazel version</code></p>\n</li>\n</ol>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>I had implemented code based in TF 0.8 that used multiple output neurons.  I based it on this stack overflow question:</p>\n<p><a href=\"http://stackoverflow.com/questions/34224826/skflow-regression-predict-multiple-values\" rel=\"nofollow\">http://stackoverflow.com/questions/34224826/skflow-regression-predict-multiple-values</a></p>\n<p>It looks like this has been broken since at least 0.10 based on comments above.  I accounted for all of the TF breaking changes and upgraded the code provided by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=175486\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ilblackdragon\">@ilblackdragon</a> and came up with:</p>\n<pre><code>import numpy as np\nimport tensorflow.contrib.learn as skflow\nimport tensorflow as tf\nfrom sklearn.metrics import mean_squared_error\n\n# Create random dataset.\nrng = np.random.RandomState(1)\nX = np.sort(200 * rng.rand(100, 1) - 100, axis=0)\ny = np.array([np.pi * np.sin(X).ravel(), np.pi * np.cos(X).ravel()]).T\n\n# Fit regression DNN model.\nfeature_columns = [tf.contrib.layers.real_valued_column(\"\", dimension=X.shape[0])]\nregressor = skflow.DNNRegressor(hidden_units=[5, 5],feature_columns=feature_columns)\nregressor.fit(X, y)\nscore = mean_squared_error(regressor.predict(X), y)\nprint(\"Mean Squared Error: {0:f}\".format(score))\n</code></pre>\n<p>But this results in:</p>\n<p>ValueError: Shapes (?, 1) and (?, 2) are incompatible</p>\n<p>Has the important feature of multiple outputs been removed mistakenly somehow?</p>\n<p>Also it looks like the example that <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=175486\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ilblackdragon\">@ilblackdragon</a> was removed, the link in GitHub 404's.</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Upgraded code to account for breaking changes in TF, but still get an error.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).</p>", "body_text": "NOTE: Only file GitHub issues for bugs and feature requests.  All other topics will be closed.\nFor general support from the community, see StackOverflow.\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\nout of scope for GitHub Issues and point people to StackOverflow.\nFor bugs or installation issues, please provide the following information.\nThe more information you provide, the more easily we will be able to offer\nhelp and advice.\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nhttp://stackoverflow.com/questions/34224826/skflow-regression-predict-multiple-values\nEnvironment info\nOperating System:\nMac\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\nIf installed from binary pip package, provide:\n\n\nA link to the pip package you installed:\n\n\nThe output from python -c \"import tensorflow; print(tensorflow.__version__)\".\nTried in both:\n0.12.1\n1.0.0-rc1\nIf installed from source, provide\n\n\nThe commit hash (git rev-parse HEAD)\n\n\nThe output of bazel version\n\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nI had implemented code based in TF 0.8 that used multiple output neurons.  I based it on this stack overflow question:\nhttp://stackoverflow.com/questions/34224826/skflow-regression-predict-multiple-values\nIt looks like this has been broken since at least 0.10 based on comments above.  I accounted for all of the TF breaking changes and upgraded the code provided by @ilblackdragon and came up with:\nimport numpy as np\nimport tensorflow.contrib.learn as skflow\nimport tensorflow as tf\nfrom sklearn.metrics import mean_squared_error\n\n# Create random dataset.\nrng = np.random.RandomState(1)\nX = np.sort(200 * rng.rand(100, 1) - 100, axis=0)\ny = np.array([np.pi * np.sin(X).ravel(), np.pi * np.cos(X).ravel()]).T\n\n# Fit regression DNN model.\nfeature_columns = [tf.contrib.layers.real_valued_column(\"\", dimension=X.shape[0])]\nregressor = skflow.DNNRegressor(hidden_units=[5, 5],feature_columns=feature_columns)\nregressor.fit(X, y)\nscore = mean_squared_error(regressor.predict(X), y)\nprint(\"Mean Squared Error: {0:f}\".format(score))\n\nBut this results in:\nValueError: Shapes (?, 1) and (?, 2) are incompatible\nHas the important feature of multiple outputs been removed mistakenly somehow?\nAlso it looks like the example that @ilblackdragon was removed, the link in GitHub 404's.\nWhat other attempted solutions have you tried?\nUpgraded code to account for breaking changes in TF, but still get an error.\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).", "body": "NOTE: Only file GitHub issues for bugs and feature requests.  All other topics will be closed.\r\n\r\nFor general support from the community, see [StackOverflow](https://stackoverflow.com/questions/tagged/tensorflow).\r\nTo make bugs and feature requests more easy to find and organize, we close issues that are deemed\r\nout of scope for GitHub Issues and point people to StackOverflow.\r\n\r\nFor bugs or installation issues, please provide the following information.\r\nThe more information you provide, the more easily we will be able to offer\r\nhelp and advice.\r\n\r\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\nhttp://stackoverflow.com/questions/34224826/skflow-regression-predict-multiple-values\r\n\r\n### Environment info\r\nOperating System:\r\nMac\r\nInstalled version of CUDA and cuDNN: \r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\n\r\nIf installed from binary pip package, provide:\r\n\r\n1. A link to the pip package you installed:\r\n2. The output from `python -c \"import tensorflow; print(tensorflow.__version__)\"`.\r\nTried in both:\r\n0.12.1\r\n1.0.0-rc1\r\nIf installed from source, provide \r\n\r\n1. The commit hash (`git rev-parse HEAD`)\r\n2. The output of `bazel version`\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\n\r\nI had implemented code based in TF 0.8 that used multiple output neurons.  I based it on this stack overflow question:\r\n\r\n http://stackoverflow.com/questions/34224826/skflow-regression-predict-multiple-values\r\n\r\nIt looks like this has been broken since at least 0.10 based on comments above.  I accounted for all of the TF breaking changes and upgraded the code provided by @ilblackdragon and came up with:\r\n```\r\nimport numpy as np\r\nimport tensorflow.contrib.learn as skflow\r\nimport tensorflow as tf\r\nfrom sklearn.metrics import mean_squared_error\r\n\r\n# Create random dataset.\r\nrng = np.random.RandomState(1)\r\nX = np.sort(200 * rng.rand(100, 1) - 100, axis=0)\r\ny = np.array([np.pi * np.sin(X).ravel(), np.pi * np.cos(X).ravel()]).T\r\n\r\n# Fit regression DNN model.\r\nfeature_columns = [tf.contrib.layers.real_valued_column(\"\", dimension=X.shape[0])]\r\nregressor = skflow.DNNRegressor(hidden_units=[5, 5],feature_columns=feature_columns)\r\nregressor.fit(X, y)\r\nscore = mean_squared_error(regressor.predict(X), y)\r\nprint(\"Mean Squared Error: {0:f}\".format(score))\r\n```\r\n\r\nBut this results in:\r\n\r\nValueError: Shapes (?, 1) and (?, 2) are incompatible\r\n\r\nHas the important feature of multiple outputs been removed mistakenly somehow?\r\n\r\nAlso it looks like the example that @ilblackdragon was removed, the link in GitHub 404's.\r\n\r\n### What other attempted solutions have you tried?\r\n\r\nUpgraded code to account for breaking changes in TF, but still get an error.\r\n\r\n### Logs or other output that would be helpful\r\n(If logs are large, please upload as attachment or provide link).\r\n"}
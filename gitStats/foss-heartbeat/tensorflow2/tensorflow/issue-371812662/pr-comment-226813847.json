{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/226813847", "pull_request_review_id": 166735335, "id": 226813847, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjgxMzg0Nw==", "diff_hunk": "@@ -306,6 +306,13 @@ class ReLU(Layer):\n \n   def __init__(self, max_value=None, negative_slope=0, threshold=0, **kwargs):\n     super(ReLU, self).__init__(**kwargs)\n+    if isinstance(max_value, dict):", "path": "tensorflow/python/keras/layers/advanced_activations.py", "position": 4, "original_position": 4, "commit_id": "c64212d1d968d1c00f47300c7d163c96a3fd8828", "original_commit_id": "c64212d1d968d1c00f47300c7d163c96a3fd8828", "user": {"login": "Kirayue", "id": 13309212, "node_id": "MDQ6VXNlcjEzMzA5MjEy", "avatar_url": "https://avatars2.githubusercontent.com/u/13309212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kirayue", "html_url": "https://github.com/Kirayue", "followers_url": "https://api.github.com/users/Kirayue/followers", "following_url": "https://api.github.com/users/Kirayue/following{/other_user}", "gists_url": "https://api.github.com/users/Kirayue/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kirayue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kirayue/subscriptions", "organizations_url": "https://api.github.com/users/Kirayue/orgs", "repos_url": "https://api.github.com/users/Kirayue/repos", "events_url": "https://api.github.com/users/Kirayue/events{/privacy}", "received_events_url": "https://api.github.com/users/Kirayue/received_events", "type": "User", "site_admin": false}, "body": "Thank you so much for responding. I assume that the bug was due to `tf.keras.models.load_model`. It loads layer information from `*.h5`. The argument of Relu layer like `max_value=None`, it loads None. But if the argument is a number(like `negative_slope=0`), it loads a dict. So the error is caused by `if max_value is not None and max_value < 0` or `if negative_slope < 0`.\r\nAnd the bug you mentioned above, it solved the problem that if we cast `None` to `K.cast_to_floatx(max_value)` would return `nan`.", "created_at": "2018-10-20T02:38:37Z", "updated_at": "2018-10-20T02:38:37Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/23095#discussion_r226813847", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23095", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/226813847"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/23095#discussion_r226813847"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23095"}}, "body_html": "<p>Thank you so much for responding. I assume that the bug was due to <code>tf.keras.models.load_model</code>. It loads layer information from <code>*.h5</code>. The argument of Relu layer like <code>max_value=None</code>, it loads None. But if the argument is a number(like <code>negative_slope=0</code>), it loads a dict. So the error is caused by <code>if max_value is not None and max_value &lt; 0</code> or <code>if negative_slope &lt; 0</code>.<br>\nAnd the bug you mentioned above, it solved the problem that if we cast <code>None</code> to <code>K.cast_to_floatx(max_value)</code> would return <code>nan</code>.</p>", "body_text": "Thank you so much for responding. I assume that the bug was due to tf.keras.models.load_model. It loads layer information from *.h5. The argument of Relu layer like max_value=None, it loads None. But if the argument is a number(like negative_slope=0), it loads a dict. So the error is caused by if max_value is not None and max_value < 0 or if negative_slope < 0.\nAnd the bug you mentioned above, it solved the problem that if we cast None to K.cast_to_floatx(max_value) would return nan.", "in_reply_to_id": 226773969}
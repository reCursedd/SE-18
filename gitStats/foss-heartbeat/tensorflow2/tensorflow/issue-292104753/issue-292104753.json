{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16483", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16483/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16483/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16483/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16483", "id": 292104753, "node_id": "MDU6SXNzdWUyOTIxMDQ3NTM=", "number": 16483, "title": "Test case for session_partial_run_test.py is getting failed ", "user": {"login": "rajendraarora16", "id": 7589596, "node_id": "MDQ6VXNlcjc1ODk1OTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7589596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rajendraarora16", "html_url": "https://github.com/rajendraarora16", "followers_url": "https://api.github.com/users/rajendraarora16/followers", "following_url": "https://api.github.com/users/rajendraarora16/following{/other_user}", "gists_url": "https://api.github.com/users/rajendraarora16/gists{/gist_id}", "starred_url": "https://api.github.com/users/rajendraarora16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rajendraarora16/subscriptions", "organizations_url": "https://api.github.com/users/rajendraarora16/orgs", "repos_url": "https://api.github.com/users/rajendraarora16/repos", "events_url": "https://api.github.com/users/rajendraarora16/events{/privacy}", "received_events_url": "https://api.github.com/users/rajendraarora16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-01-27T08:38:04Z", "updated_at": "2018-05-01T01:09:03Z", "closed_at": "2018-05-01T01:09:03Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I tried running file <code>session_partial_run_test.py</code>, It throws an error with following two failed exception.</p>\n<pre><code>======================================================================\nFAIL: testRunAndPartialRunDist (__main__.PartialRunTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 258, in testRunAndPartialRunDist\n    self.RunTestRunAndPartialRun(session.Session(server.target))\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 123, in RunTestRunAndPartialRun\n    self.assertEqual(r1, r2)\nAssertionError: Lists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\n\n- [4.0, 12.0]\n+ [array([], dtype=float32), 12.0]\n\n======================================================================\nFAIL: testRunAndPartialRunDist (__main__.PartialRunWithCApiTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 258, in testRunAndPartialRunDist\n    self.RunTestRunAndPartialRun(session.Session(server.target))\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 123, in RunTestRunAndPartialRun\n    self.assertEqual(r1, r2)\nAssertionError: Lists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\n\n- [4.0, 12.0]\n+ [array([], dtype=float32), 12.0]\n\n----------------------------------------------------------------------\nRan 50 tests in 2.933s\n\nFAILED (failures=2)\n</code></pre>\n<p>However, I tried debugging the code and found some scenarios in below function:</p>\n<pre><code>def RunTestRunAndPartialRun(self, sess):\n    a = constant_op.constant(2.0, dtypes.float32)\n    b = a * 2\n    c = b * 3\n    r1 = sess.run([b, c])\n    h = sess.partial_run_setup([b, c], [])\n    r2 = sess.partial_run(h, [b, c])\n    self.assertEqual(r1, r2)\n</code></pre>\n<p>In 1st scenario, when <code>testRunAndPartialRunDirect()</code> is executed, the test gets succeed with h value:</p>\n<p><code>h = '-&gt;mul:0,mul_1:0//1/;0'</code></p>\n<p>In 2nd scenario, when <code>testRunAndPartialRunDist()</code> is executed, the test gets failed with h value:</p>\n<p><code>h = '0'</code></p>\n<p>and below following list are different since <code>assertEqual</code> is throwing an exception:</p>\n<pre><code>Lists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\n\n- [4.0, 12.0]\n+ [array([], dtype=float32), 12.0] \n</code></pre>\n<p>Looks like due to <code>zero</code> handle value, it started throwing an exception. Just need your suggestion if you are facing the same issue. Can I fix it by myself (I'd be happy to contribute)?</p>\n<p>Guidance will be appreciated.</p>", "body_text": "I tried running file session_partial_run_test.py, It throws an error with following two failed exception.\n======================================================================\nFAIL: testRunAndPartialRunDist (__main__.PartialRunTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 258, in testRunAndPartialRunDist\n    self.RunTestRunAndPartialRun(session.Session(server.target))\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 123, in RunTestRunAndPartialRun\n    self.assertEqual(r1, r2)\nAssertionError: Lists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\n\n- [4.0, 12.0]\n+ [array([], dtype=float32), 12.0]\n\n======================================================================\nFAIL: testRunAndPartialRunDist (__main__.PartialRunWithCApiTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 258, in testRunAndPartialRunDist\n    self.RunTestRunAndPartialRun(session.Session(server.target))\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 123, in RunTestRunAndPartialRun\n    self.assertEqual(r1, r2)\nAssertionError: Lists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\n\n- [4.0, 12.0]\n+ [array([], dtype=float32), 12.0]\n\n----------------------------------------------------------------------\nRan 50 tests in 2.933s\n\nFAILED (failures=2)\n\nHowever, I tried debugging the code and found some scenarios in below function:\ndef RunTestRunAndPartialRun(self, sess):\n    a = constant_op.constant(2.0, dtypes.float32)\n    b = a * 2\n    c = b * 3\n    r1 = sess.run([b, c])\n    h = sess.partial_run_setup([b, c], [])\n    r2 = sess.partial_run(h, [b, c])\n    self.assertEqual(r1, r2)\n\nIn 1st scenario, when testRunAndPartialRunDirect() is executed, the test gets succeed with h value:\nh = '->mul:0,mul_1:0//1/;0'\nIn 2nd scenario, when testRunAndPartialRunDist() is executed, the test gets failed with h value:\nh = '0'\nand below following list are different since assertEqual is throwing an exception:\nLists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\n\n- [4.0, 12.0]\n+ [array([], dtype=float32), 12.0] \n\nLooks like due to zero handle value, it started throwing an exception. Just need your suggestion if you are facing the same issue. Can I fix it by myself (I'd be happy to contribute)?\nGuidance will be appreciated.", "body": "I tried running file `session_partial_run_test.py`, It throws an error with following two failed exception.\r\n\r\n```\r\n======================================================================\r\nFAIL: testRunAndPartialRunDist (__main__.PartialRunTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 258, in testRunAndPartialRunDist\r\n    self.RunTestRunAndPartialRun(session.Session(server.target))\r\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 123, in RunTestRunAndPartialRun\r\n    self.assertEqual(r1, r2)\r\nAssertionError: Lists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\r\n\r\n- [4.0, 12.0]\r\n+ [array([], dtype=float32), 12.0]\r\n\r\n======================================================================\r\nFAIL: testRunAndPartialRunDist (__main__.PartialRunWithCApiTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 258, in testRunAndPartialRunDist\r\n    self.RunTestRunAndPartialRun(session.Session(server.target))\r\n  File \"g:/tensorflow/tensorflow/python/client/session_partial_run_test.py\", line 123, in RunTestRunAndPartialRun\r\n    self.assertEqual(r1, r2)\r\nAssertionError: Lists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\r\n\r\n- [4.0, 12.0]\r\n+ [array([], dtype=float32), 12.0]\r\n\r\n----------------------------------------------------------------------\r\nRan 50 tests in 2.933s\r\n\r\nFAILED (failures=2)\r\n```\r\n\r\nHowever, I tried debugging the code and found some scenarios in below function:\r\n\r\n```\r\ndef RunTestRunAndPartialRun(self, sess):\r\n    a = constant_op.constant(2.0, dtypes.float32)\r\n    b = a * 2\r\n    c = b * 3\r\n    r1 = sess.run([b, c])\r\n    h = sess.partial_run_setup([b, c], [])\r\n    r2 = sess.partial_run(h, [b, c])\r\n    self.assertEqual(r1, r2)\r\n```\r\n\r\nIn 1st scenario, when `testRunAndPartialRunDirect()` is executed, the test gets succeed with h value:\r\n\r\n`h = '->mul:0,mul_1:0//1/;0'`\r\n\r\nIn 2nd scenario, when `testRunAndPartialRunDist()` is executed, the test gets failed with h value:\r\n\r\n`h = '0'`\r\n\r\nand below following list are different since `assertEqual` is throwing an exception:\r\n\r\n```\r\nLists differ: [4.0, 12.0] != [array([], dtype=float32), 12.0]\r\n\r\n- [4.0, 12.0]\r\n+ [array([], dtype=float32), 12.0] \r\n```\r\n\r\nLooks like due to `zero` handle value, it started throwing an exception. Just need your suggestion if you are facing the same issue. Can I fix it by myself (I'd be happy to contribute)?\r\n\r\nGuidance will be appreciated.\r\n\r\n"}
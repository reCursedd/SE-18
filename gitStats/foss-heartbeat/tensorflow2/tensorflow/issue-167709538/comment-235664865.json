{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/235664865", "html_url": "https://github.com/tensorflow/tensorflow/issues/3517#issuecomment-235664865", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3517", "id": 235664865, "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTY2NDg2NQ==", "user": {"login": "lliu25", "id": 2426087, "node_id": "MDQ6VXNlcjI0MjYwODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/2426087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lliu25", "html_url": "https://github.com/lliu25", "followers_url": "https://api.github.com/users/lliu25/followers", "following_url": "https://api.github.com/users/lliu25/following{/other_user}", "gists_url": "https://api.github.com/users/lliu25/gists{/gist_id}", "starred_url": "https://api.github.com/users/lliu25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lliu25/subscriptions", "organizations_url": "https://api.github.com/users/lliu25/orgs", "repos_url": "https://api.github.com/users/lliu25/repos", "events_url": "https://api.github.com/users/lliu25/events{/privacy}", "received_events_url": "https://api.github.com/users/lliu25/received_events", "type": "User", "site_admin": false}, "created_at": "2016-07-27T17:49:30Z", "updated_at": "2016-07-27T17:50:06Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a> inspired us to check if the tasks are running on the designated nodes. We now changed the way of assigning the nodes, and now it's working! thanks a lot!!!</p>\n<p>The script is shown below:<br>\n#!/bin/bash</p>\n<p>#SBATCH -N 4<br>\n#SBATCH --nodelist=piw[25-28]</p>\n<p>node1=piw25<br>\nnode2=piw26<br>\nnode3=piw27<br>\nnode4=piw28</p>\n<p>#On node1:<br>\nsrun --nodelist=piw25 -N 1 -n 1 python mnist_yetanother.py <br>\n--ps_hosts=$node1:2223 <br>\n--worker_hosts=$node2:2223,$node3:2223,$node4:2223 <br>\n--job_name=ps --task_index=0 &amp;<br>\n#On node2:<br>\nsrun --nodelist=piw26 -N 1 -n 1 python mnist_yetanother.py <br>\n--ps_hosts=$node1:2223 <br>\n--worker_hosts=$node2:2223,$node3:2223,$node4:2223 <br>\n--job_name=worker --task_index=0 &amp;<br>\n#On node3:<br>\nsrun --nodelist=piw27 -N 1 -n 1 python mnist_yetanother.py <br>\n--ps_hosts=$node1:2223 <br>\n--worker_hosts=$node2:2223,$node3:2223,$node4:2223 <br>\n--job_name=worker --task_index=1 &amp;<br>\n#On node4:<br>\nsrun --nodelist=piw28 -N 1 -n 1 python mnist_yetanother.py <br>\n--ps_hosts=$node1:2223 <br>\n--worker_hosts=$node2:2223,$node3:2223,$node4:2223 <br>\n--job_name=worker --task_index=2<br>\nwait</p>", "body_text": "@mrry inspired us to check if the tasks are running on the designated nodes. We now changed the way of assigning the nodes, and now it's working! thanks a lot!!!\nThe script is shown below:\n#!/bin/bash\n#SBATCH -N 4\n#SBATCH --nodelist=piw[25-28]\nnode1=piw25\nnode2=piw26\nnode3=piw27\nnode4=piw28\n#On node1:\nsrun --nodelist=piw25 -N 1 -n 1 python mnist_yetanother.py \n--ps_hosts=$node1:2223 \n--worker_hosts=$node2:2223,$node3:2223,$node4:2223 \n--job_name=ps --task_index=0 &\n#On node2:\nsrun --nodelist=piw26 -N 1 -n 1 python mnist_yetanother.py \n--ps_hosts=$node1:2223 \n--worker_hosts=$node2:2223,$node3:2223,$node4:2223 \n--job_name=worker --task_index=0 &\n#On node3:\nsrun --nodelist=piw27 -N 1 -n 1 python mnist_yetanother.py \n--ps_hosts=$node1:2223 \n--worker_hosts=$node2:2223,$node3:2223,$node4:2223 \n--job_name=worker --task_index=1 &\n#On node4:\nsrun --nodelist=piw28 -N 1 -n 1 python mnist_yetanother.py \n--ps_hosts=$node1:2223 \n--worker_hosts=$node2:2223,$node3:2223,$node4:2223 \n--job_name=worker --task_index=2\nwait", "body": "@mrry inspired us to check if the tasks are running on the designated nodes. We now changed the way of assigning the nodes, and now it's working! thanks a lot!!!\n\nThe script is shown below:\n#!/bin/bash\n\n#SBATCH -N 4\n#SBATCH --nodelist=piw[25-28]\n\nnode1=piw25\nnode2=piw26\nnode3=piw27\nnode4=piw28\n\n#On node1:\nsrun --nodelist=piw25 -N 1 -n 1 python mnist_yetanother.py \\\n     --ps_hosts=$node1:2223 \\\n     --worker_hosts=$node2:2223,$node3:2223,$node4:2223 \\\n     --job_name=ps --task_index=0 &\n#On node2:\nsrun --nodelist=piw26 -N 1 -n 1 python mnist_yetanother.py \\\n     --ps_hosts=$node1:2223 \\\n     --worker_hosts=$node2:2223,$node3:2223,$node4:2223 \\\n     --job_name=worker --task_index=0 &\n#On node3:\nsrun --nodelist=piw27 -N 1 -n 1 python mnist_yetanother.py \\\n     --ps_hosts=$node1:2223 \\\n     --worker_hosts=$node2:2223,$node3:2223,$node4:2223 \\\n     --job_name=worker --task_index=1 &\n#On node4:\nsrun --nodelist=piw28 -N 1 -n 1 python mnist_yetanother.py \\\n     --ps_hosts=$node1:2223 \\\n     --worker_hosts=$node2:2223,$node3:2223,$node4:2223 \\\n     --job_name=worker --task_index=2\nwait\n"}
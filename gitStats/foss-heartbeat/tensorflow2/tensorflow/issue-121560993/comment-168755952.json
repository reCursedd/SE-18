{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/168755952", "html_url": "https://github.com/tensorflow/tensorflow/issues/470#issuecomment-168755952", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/470", "id": 168755952, "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODc1NTk1Mg==", "user": {"login": "nikitakit", "id": 252225, "node_id": "MDQ6VXNlcjI1MjIyNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/252225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikitakit", "html_url": "https://github.com/nikitakit", "followers_url": "https://api.github.com/users/nikitakit/followers", "following_url": "https://api.github.com/users/nikitakit/following{/other_user}", "gists_url": "https://api.github.com/users/nikitakit/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikitakit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikitakit/subscriptions", "organizations_url": "https://api.github.com/users/nikitakit/orgs", "repos_url": "https://api.github.com/users/nikitakit/repos", "events_url": "https://api.github.com/users/nikitakit/events{/privacy}", "received_events_url": "https://api.github.com/users/nikitakit/received_events", "type": "User", "site_admin": false}, "created_at": "2016-01-04T18:12:20Z", "updated_at": "2016-01-04T18:12:20Z", "author_association": "NONE", "body_html": "<p>That's right, <code>_send_gzip_response</code> should use BytesIO, not StringIO. Sorry, I didn't run a full diff and missed that.</p>\n<div class=\"highlight highlight-source-diff\"><pre><span class=\"pl-md\"><span class=\"pl-md\">-</span>    out = StringIO.StringIO()</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    out = io.BytesIO()</span>\n     f = gzip.GzipFile(fileobj=out, mode='w')\n<span class=\"pl-md\"><span class=\"pl-md\">-</span>    f.write(content)</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    f.write(content.encode('utf-8'))</span></pre></div>", "body_text": "That's right, _send_gzip_response should use BytesIO, not StringIO. Sorry, I didn't run a full diff and missed that.\n-    out = StringIO.StringIO()\n+    out = io.BytesIO()\n     f = gzip.GzipFile(fileobj=out, mode='w')\n-    f.write(content)\n+    f.write(content.encode('utf-8'))", "body": "That's right, `_send_gzip_response` should use BytesIO, not StringIO. Sorry, I didn't run a full diff and missed that.\n\n``` diff\n-    out = StringIO.StringIO()\n+    out = io.BytesIO()\n     f = gzip.GzipFile(fileobj=out, mode='w')\n-    f.write(content)\n+    f.write(content.encode('utf-8'))\n```\n"}
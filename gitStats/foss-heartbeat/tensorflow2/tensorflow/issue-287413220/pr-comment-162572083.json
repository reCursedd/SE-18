{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/162572083", "pull_request_review_id": 90051687, "id": 162572083, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MjU3MjA4Mw==", "diff_hunk": "@@ -1045,12 +1058,30 @@ void RdmaTensorResponse::RecvHandler(Rendezvous::ParsedKey parsed,\n         << \" gpu_info: \" << src_dev->tensorflow_gpu_device_info();\n \n     if (can_memcpy) {\n+      // If the tensor is located on a GDR compatible GPU, there is no need to\n+      // copy it. We can send directly from the source, just need to make sure\n+      // we are in sync with the GPU stream.\n+      // If the tensor's meta-data changed however, we will need to clone it,\n+      // so anyway we'll have to copy it from GPU to CPU first. If at some\n+      // point in time Clone() is changed to only save a shallow copy, we can\n+      // skip the copy here as well.\n+      if ((in.TotalBytes() > 0) && !meta_data_changed_ &&", "path": "tensorflow/contrib/verbs/rdma.cc", "position": 862, "original_position": 39, "commit_id": "c9189ae40f9860f77fe6a3741d287b049184d5f2", "original_commit_id": "d6faa02e29a4b50f2a393b28f1dbe468f4a5814d", "user": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "body": "Unfortunately,  as a policy we do not accept any features as cherrypicks, only fixes. So this wont make it into 1.5 release. However, this change will definitely make it into the 1.6 branch.", "created_at": "2018-01-19T09:25:20Z", "updated_at": "2018-01-19T09:25:20Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/16005#discussion_r162572083", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16005", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/162572083"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/16005#discussion_r162572083"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16005"}}, "body_html": "<p>Unfortunately,  as a policy we do not accept any features as cherrypicks, only fixes. So this wont make it into 1.5 release. However, this change will definitely make it into the 1.6 branch.</p>", "body_text": "Unfortunately,  as a policy we do not accept any features as cherrypicks, only fixes. So this wont make it into 1.5 release. However, this change will definitely make it into the 1.6 branch.", "in_reply_to_id": 162230570}
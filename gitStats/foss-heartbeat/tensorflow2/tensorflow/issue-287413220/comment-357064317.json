{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/357064317", "html_url": "https://github.com/tensorflow/tensorflow/pull/16005#issuecomment-357064317", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16005", "id": 357064317, "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzA2NDMxNw==", "user": {"login": "junshi15", "id": 12075848, "node_id": "MDQ6VXNlcjEyMDc1ODQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/12075848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/junshi15", "html_url": "https://github.com/junshi15", "followers_url": "https://api.github.com/users/junshi15/followers", "following_url": "https://api.github.com/users/junshi15/following{/other_user}", "gists_url": "https://api.github.com/users/junshi15/gists{/gist_id}", "starred_url": "https://api.github.com/users/junshi15/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/junshi15/subscriptions", "organizations_url": "https://api.github.com/users/junshi15/orgs", "repos_url": "https://api.github.com/users/junshi15/repos", "events_url": "https://api.github.com/users/junshi15/events{/privacy}", "received_events_url": "https://api.github.com/users/junshi15/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-11T21:18:10Z", "updated_at": "2018-01-11T21:18:10Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Great job to remove the extra copy!</p>\n<p>I try to understand how the tensor buffers are created on the receiver for the first time. As the receiver does not know the tensor size before hand, it needs to get the info from the sender, hence the use of RDMA_MESSAGE_BUFFER_REQUEST and RDMA_MESSAGE_BUFFER_RESPONSE. You mentioned those messages in the note above, but I do not see them <a href=\"https://github.com/Mellanox/tensorflow/blob/f15b6492deda4f15a7c1eb47895b4adbc87bd1e6/tensorflow/contrib/verbs/rdma.cc\">here</a>. Can you clarify how receiver gets the meta-data and how the buffer are registered and how the MR info are exchanged before the sender does RDMA-WRITE?</p>\n<p>Also some of the comments can be cleaned up, for example, <a href=\"https://github.com/Mellanox/tensorflow/blob/f15b6492deda4f15a7c1eb47895b4adbc87bd1e6/tensorflow/contrib/verbs/rdma.cc#L665-L671\">this segment</a> is outdated.</p>", "body_text": "Great job to remove the extra copy!\nI try to understand how the tensor buffers are created on the receiver for the first time. As the receiver does not know the tensor size before hand, it needs to get the info from the sender, hence the use of RDMA_MESSAGE_BUFFER_REQUEST and RDMA_MESSAGE_BUFFER_RESPONSE. You mentioned those messages in the note above, but I do not see them here. Can you clarify how receiver gets the meta-data and how the buffer are registered and how the MR info are exchanged before the sender does RDMA-WRITE?\nAlso some of the comments can be cleaned up, for example, this segment is outdated.", "body": "Great job to remove the extra copy! \r\n\r\nI try to understand how the tensor buffers are created on the receiver for the first time. As the receiver does not know the tensor size before hand, it needs to get the info from the sender, hence the use of RDMA_MESSAGE_BUFFER_REQUEST and RDMA_MESSAGE_BUFFER_RESPONSE. You mentioned those messages in the note above, but I do not see them [here](https://github.com/Mellanox/tensorflow/blob/f15b6492deda4f15a7c1eb47895b4adbc87bd1e6/tensorflow/contrib/verbs/rdma.cc). Can you clarify how receiver gets the meta-data and how the buffer are registered and how the MR info are exchanged before the sender does RDMA-WRITE?\r\n\r\nAlso some of the comments can be cleaned up, for example, [this segment](https://github.com/Mellanox/tensorflow/blob/f15b6492deda4f15a7c1eb47895b4adbc87bd1e6/tensorflow/contrib/verbs/rdma.cc#L665-L671) is outdated."}
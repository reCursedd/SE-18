{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/162230570", "pull_request_review_id": 89651633, "id": 162230570, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MjIzMDU3MA==", "diff_hunk": "@@ -1045,12 +1058,30 @@ void RdmaTensorResponse::RecvHandler(Rendezvous::ParsedKey parsed,\n         << \" gpu_info: \" << src_dev->tensorflow_gpu_device_info();\n \n     if (can_memcpy) {\n+      // If the tensor is located on a GDR compatible GPU, there is no need to\n+      // copy it. We can send directly from the source, just need to make sure\n+      // we are in sync with the GPU stream.\n+      // If the tensor's meta-data changed however, we will need to clone it,\n+      // so anyway we'll have to copy it from GPU to CPU first. If at some\n+      // point in time Clone() is changed to only save a shallow copy, we can\n+      // skip the copy here as well.\n+      if ((in.TotalBytes() > 0) && !meta_data_changed_ &&", "path": "tensorflow/contrib/verbs/rdma.cc", "position": 862, "original_position": 39, "commit_id": "c9189ae40f9860f77fe6a3741d287b049184d5f2", "original_commit_id": "d6faa02e29a4b50f2a393b28f1dbe468f4a5814d", "user": {"login": "poxvoculi", "id": 15676913, "node_id": "MDQ6VXNlcjE1Njc2OTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/15676913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poxvoculi", "html_url": "https://github.com/poxvoculi", "followers_url": "https://api.github.com/users/poxvoculi/followers", "following_url": "https://api.github.com/users/poxvoculi/following{/other_user}", "gists_url": "https://api.github.com/users/poxvoculi/gists{/gist_id}", "starred_url": "https://api.github.com/users/poxvoculi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poxvoculi/subscriptions", "organizations_url": "https://api.github.com/users/poxvoculi/orgs", "repos_url": "https://api.github.com/users/poxvoculi/repos", "events_url": "https://api.github.com/users/poxvoculi/events{/privacy}", "received_events_url": "https://api.github.com/users/poxvoculi/received_events", "type": "User", "site_admin": false}, "body": "Sorry I haven't had time to look into this yet.   OK to submit as is, and fix later if we find a way to do that.", "created_at": "2018-01-18T01:49:45Z", "updated_at": "2018-01-18T01:52:36Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/16005#discussion_r162230570", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16005", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/162230570"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/16005#discussion_r162230570"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16005"}}, "body_html": "<p>Sorry I haven't had time to look into this yet.   OK to submit as is, and fix later if we find a way to do that.</p>", "body_text": "Sorry I haven't had time to look into this yet.   OK to submit as is, and fix later if we find a way to do that."}
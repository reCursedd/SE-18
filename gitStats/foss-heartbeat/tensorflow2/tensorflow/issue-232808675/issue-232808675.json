{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10367", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10367/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10367/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10367/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10367", "id": 232808675, "node_id": "MDU6SXNzdWUyMzI4MDg2NzU=", "number": 10367, "title": "Error building TensorFlow from source", "user": {"login": "danqing", "id": 5134133, "node_id": "MDQ6VXNlcjUxMzQxMzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/5134133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danqing", "html_url": "https://github.com/danqing", "followers_url": "https://api.github.com/users/danqing/followers", "following_url": "https://api.github.com/users/danqing/following{/other_user}", "gists_url": "https://api.github.com/users/danqing/gists{/gist_id}", "starred_url": "https://api.github.com/users/danqing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danqing/subscriptions", "organizations_url": "https://api.github.com/users/danqing/orgs", "repos_url": "https://api.github.com/users/danqing/repos", "events_url": "https://api.github.com/users/danqing/events{/privacy}", "received_events_url": "https://api.github.com/users/danqing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-01T08:53:36Z", "updated_at": "2017-12-05T17:48:18Z", "closed_at": "2017-06-02T20:57:22Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>No custom code.</li>\n<li>Ubuntu 16.04.</li>\n<li>Trying to compile Tensorflow r1.1 from source.</li>\n<li>Bazel 0.5.0</li>\n<li>CUDA 8.0, cuDNN 5</li>\n<li>K80 GPU (12GB memory)</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I'm trying to build TensorFlow from source, with CUDA support. My CUDA and cuDNN are installed successfully, as I can run a TensorFlow program fine (with pre-built TensorFlow GPU image).</p>\n<p>The command I used was:</p>\n<div class=\"highlight highlight-source-shell\"><pre>bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0 --copt=-mavx --copt=-msse4.1 --copt=-msse4.2 --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both</pre></div>\n<p>I specified CUDA 8.0 and cuDNN 5 explicitly in <code>./configure</code> before running the above. The error is the following:</p>\n<div class=\"highlight highlight-source-shell\"><pre>ERROR: /home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/external/protobuf/BUILD:241:1: C++ compilation of rule <span class=\"pl-s\"><span class=\"pl-pds\">'</span>@protobuf//:js_embed<span class=\"pl-pds\">'</span></span> failed: crosstool_wrapper_driver_is_not_gcc failed: error executing <span class=\"pl-c1\">command</span>\n  (cd /home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/execroot/tensorflow <span class=\"pl-k\">&amp;&amp;</span> \\\n  <span class=\"pl-c1\">exec</span> env - \\\n    LD_LIBRARY_PATH=:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64 \\\n    PATH=<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/home/colafly/.pyenv/plugins/pyenv-virtualenv/shims:/home/colafly/.pyenv/shims:~/.pyenv/bin:/home/colafly/bin:/home/colafly/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/cuda/bin:/usr/local/cuda/bin:/usr/local/cuda/bin<span class=\"pl-pds\">'</span></span> \\\n    PWD=/proc/self/cwd \\\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 '-std=c++11' -g0 -MD -MF bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.d '-frandom-seed=bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.o' -iquote external/protobuf -iquote bazel-out/host/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -isystem external/bazel_tools/tools/cpp/gcc3 -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c external/protobuf/src/google/protobuf/compiler/js/embed.cc -o bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 2.\npython: can<span class=\"pl-s\"><span class=\"pl-pds\">'</span>t open file <span class=\"pl-pds\">'</span></span>external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc<span class=\"pl-s\"><span class=\"pl-pds\">'</span>: [Errno 2] No such file or directory</span>\n<span class=\"pl-s\">Target //tensorflow/tools/pip_package:build_pip_package failed to build</span></pre></div>\n<p>However, the file actually exists:</p>\n<div class=\"highlight highlight-source-shell\"><pre>sudo find / -name <span class=\"pl-s\"><span class=\"pl-pds\">'</span>crosstool_wrapper_driver_is_not_gcc<span class=\"pl-pds\">'</span></span>\n/home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc</pre></div>\n<p>(Also exists in <code>bazel-tensorflow/external/local_config_cuda/crosstool</code>)</p>\n<p>Thanks!</p>", "body_text": "System information\n\nNo custom code.\nUbuntu 16.04.\nTrying to compile Tensorflow r1.1 from source.\nBazel 0.5.0\nCUDA 8.0, cuDNN 5\nK80 GPU (12GB memory)\n\nDescribe the problem\nI'm trying to build TensorFlow from source, with CUDA support. My CUDA and cuDNN are installed successfully, as I can run a TensorFlow program fine (with pre-built TensorFlow GPU image).\nThe command I used was:\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0 --copt=-mavx --copt=-msse4.1 --copt=-msse4.2 --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both\nI specified CUDA 8.0 and cuDNN 5 explicitly in ./configure before running the above. The error is the following:\nERROR: /home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/external/protobuf/BUILD:241:1: C++ compilation of rule '@protobuf//:js_embed' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command\n  (cd /home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/execroot/tensorflow && \\\n  exec env - \\\n    LD_LIBRARY_PATH=:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64 \\\n    PATH='/home/colafly/.pyenv/plugins/pyenv-virtualenv/shims:/home/colafly/.pyenv/shims:~/.pyenv/bin:/home/colafly/bin:/home/colafly/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/cuda/bin:/usr/local/cuda/bin:/usr/local/cuda/bin' \\\n    PWD=/proc/self/cwd \\\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 '-std=c++11' -g0 -MD -MF bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.d '-frandom-seed=bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.o' -iquote external/protobuf -iquote bazel-out/host/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -isystem external/bazel_tools/tools/cpp/gcc3 -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c external/protobuf/src/google/protobuf/compiler/js/embed.cc -o bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 2.\npython: can't open file 'external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc': [Errno 2] No such file or directory\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nHowever, the file actually exists:\nsudo find / -name 'crosstool_wrapper_driver_is_not_gcc'\n/home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\n(Also exists in bazel-tensorflow/external/local_config_cuda/crosstool)\nThanks!", "body": "### System information\r\n\r\n- No custom code.\r\n- Ubuntu 16.04.\r\n- Trying to compile Tensorflow r1.1 from source.\r\n- Bazel 0.5.0\r\n- CUDA 8.0, cuDNN 5\r\n- K80 GPU (12GB memory)\r\n\r\n### Describe the problem\r\n\r\nI'm trying to build TensorFlow from source, with CUDA support. My CUDA and cuDNN are installed successfully, as I can run a TensorFlow program fine (with pre-built TensorFlow GPU image).\r\n\r\nThe command I used was:\r\n\r\n```sh\r\nbazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package --cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0 --copt=-mavx --copt=-msse4.1 --copt=-msse4.2 --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both\r\n```\r\n\r\nI specified CUDA 8.0 and cuDNN 5 explicitly in `./configure` before running the above. The error is the following:\r\n\r\n```sh\r\nERROR: /home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/external/protobuf/BUILD:241:1: C++ compilation of rule '@protobuf//:js_embed' failed: crosstool_wrapper_driver_is_not_gcc failed: error executing command\r\n  (cd /home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/execroot/tensorflow && \\\r\n  exec env - \\\r\n    LD_LIBRARY_PATH=:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64 \\\r\n    PATH='/home/colafly/.pyenv/plugins/pyenv-virtualenv/shims:/home/colafly/.pyenv/shims:~/.pyenv/bin:/home/colafly/bin:/home/colafly/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/cuda/bin:/usr/local/cuda/bin:/usr/local/cuda/bin' \\\r\n    PWD=/proc/self/cwd \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -fPIE -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections -g0 '-std=c++11' -g0 -MD -MF bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.d '-frandom-seed=bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.o' -iquote external/protobuf -iquote bazel-out/host/genfiles/external/protobuf -iquote external/bazel_tools -iquote bazel-out/host/genfiles/external/bazel_tools -isystem external/bazel_tools/tools/cpp/gcc3 -no-canonical-prefixes -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fno-canonical-system-headers -c external/protobuf/src/google/protobuf/compiler/js/embed.cc -o bazel-out/host/bin/external/protobuf/_objs/js_embed/external/protobuf/src/google/protobuf/compiler/js/embed.o): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 2.\r\npython: can't open file 'external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc': [Errno 2] No such file or directory\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n```\r\n\r\nHowever, the file actually exists:\r\n\r\n```sh\r\nsudo find / -name 'crosstool_wrapper_driver_is_not_gcc'\r\n/home/colafly/.cache/bazel/_bazel_colafly/f5e3ebf5f39671e6e38e6235913f00e0/external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc\r\n```\r\n\r\n(Also exists in `bazel-tensorflow/external/local_config_cuda/crosstool`)\r\n\r\nThanks!\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10735", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10735/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10735/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10735/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10735", "id": 236193740, "node_id": "MDU6SXNzdWUyMzYxOTM3NDA=", "number": 10735, "title": "[BUG] Get different image value each feed", "user": {"login": "gongbudaizhe", "id": 5178646, "node_id": "MDQ6VXNlcjUxNzg2NDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/5178646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gongbudaizhe", "html_url": "https://github.com/gongbudaizhe", "followers_url": "https://api.github.com/users/gongbudaizhe/followers", "following_url": "https://api.github.com/users/gongbudaizhe/following{/other_user}", "gists_url": "https://api.github.com/users/gongbudaizhe/gists{/gist_id}", "starred_url": "https://api.github.com/users/gongbudaizhe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gongbudaizhe/subscriptions", "organizations_url": "https://api.github.com/users/gongbudaizhe/orgs", "repos_url": "https://api.github.com/users/gongbudaizhe/repos", "events_url": "https://api.github.com/users/gongbudaizhe/events{/privacy}", "received_events_url": "https://api.github.com/users/gongbudaizhe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-06-15T13:33:03Z", "updated_at": "2017-06-17T07:41:30Z", "closed_at": "2017-06-17T07:41:30Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li>OS: Centos 7</li>\n<li>TensorFlow installed from source</li>\n<li>Tensorflow version: both 1.1.0rc1 and 1.2.0rc1</li>\n<li>Bazel version: 0.4.5-jdk7</li>\n<li>CUDA 8.0/ cuDNN 5.1</li>\n<li>GeForce GTX 1080 / 8G</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Get different values of the same feeded image.</p>\n<h3>Source code</h3>\n<p>Below is a minimal script that reproduce the problem:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n<span class=\"pl-k\">import</span> numpy <span class=\"pl-k\">as</span> np\n<span class=\"pl-k\">from</span> scipy.misc <span class=\"pl-k\">import</span> imread\n\ntest_im <span class=\"pl-k\">=</span> some<span class=\"pl-k\">-</span>test<span class=\"pl-k\">-</span>img<span class=\"pl-k\">-</span>path\nim <span class=\"pl-k\">=</span> imread(test_im)\nim_batch <span class=\"pl-k\">=</span> np.stack([im])\n\nimg_feed <span class=\"pl-k\">=</span> tf.placeholder(tf.uint8, (<span class=\"pl-c1\">None</span>, <span class=\"pl-c1\">None</span>, <span class=\"pl-c1\">None</span>, <span class=\"pl-c1\">3</span>))\nimg_mean <span class=\"pl-k\">=</span> tf.reduce_mean(tf.to_float(img_feed))\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n  <span class=\"pl-k\">for</span> i <span class=\"pl-k\">in</span> <span class=\"pl-c1\">range</span>(<span class=\"pl-c1\">10</span>):\n    img_mean_tf <span class=\"pl-k\">=</span> sess.run(img_mean, <span class=\"pl-v\">feed_dict</span><span class=\"pl-k\">=</span>{img_feed: im_batch})\n    img_mean_np <span class=\"pl-k\">=</span> np.mean(im_batch)\n    <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>tf img mean: <span class=\"pl-c1\">{}</span>, np img mean: <span class=\"pl-c1\">{}</span><span class=\"pl-pds\">'</span></span>.format(img_mean_tf, img_mean_np))</pre></div>", "body_text": "System information\n\nOS: Centos 7\nTensorFlow installed from source\nTensorflow version: both 1.1.0rc1 and 1.2.0rc1\nBazel version: 0.4.5-jdk7\nCUDA 8.0/ cuDNN 5.1\nGeForce GTX 1080 / 8G\n\nDescribe the problem\nGet different values of the same feeded image.\nSource code\nBelow is a minimal script that reproduce the problem:\nimport tensorflow as tf\nimport numpy as np\nfrom scipy.misc import imread\n\ntest_im = some-test-img-path\nim = imread(test_im)\nim_batch = np.stack([im])\n\nimg_feed = tf.placeholder(tf.uint8, (None, None, None, 3))\nimg_mean = tf.reduce_mean(tf.to_float(img_feed))\n\nwith tf.Session() as sess:\n  for i in range(10):\n    img_mean_tf = sess.run(img_mean, feed_dict={img_feed: im_batch})\n    img_mean_np = np.mean(im_batch)\n    print('tf img mean: {}, np img mean: {}'.format(img_mean_tf, img_mean_np))", "body": "### System information\r\n- OS: Centos 7\r\n- TensorFlow installed from source\r\n- Tensorflow version: both 1.1.0rc1 and 1.2.0rc1\r\n- Bazel version: 0.4.5-jdk7\r\n- CUDA 8.0/ cuDNN 5.1\r\n- GeForce GTX 1080 / 8G\r\n\r\n### Describe the problem\r\nGet different values of the same feeded image. \r\n\r\n### Source code\r\nBelow is a minimal script that reproduce the problem:\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom scipy.misc import imread\r\n\r\ntest_im = some-test-img-path\r\nim = imread(test_im)\r\nim_batch = np.stack([im])\r\n\r\nimg_feed = tf.placeholder(tf.uint8, (None, None, None, 3))\r\nimg_mean = tf.reduce_mean(tf.to_float(img_feed))\r\n\r\nwith tf.Session() as sess:\r\n  for i in range(10):\r\n    img_mean_tf = sess.run(img_mean, feed_dict={img_feed: im_batch})\r\n    img_mean_np = np.mean(im_batch)\r\n    print('tf img mean: {}, np img mean: {}'.format(img_mean_tf, img_mean_np))\r\n```\r\n"}
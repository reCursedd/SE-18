{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21917", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21917/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21917/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21917/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21917", "id": 354541221, "node_id": "MDU6SXNzdWUzNTQ1NDEyMjE=", "number": 21917, "title": "Bazel Error When Installing tf-gpu or tf-cpu 1.3 from source. ", "user": {"login": "vijaysumaravi", "id": 33767759, "node_id": "MDQ6VXNlcjMzNzY3NzU5", "avatar_url": "https://avatars3.githubusercontent.com/u/33767759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vijaysumaravi", "html_url": "https://github.com/vijaysumaravi", "followers_url": "https://api.github.com/users/vijaysumaravi/followers", "following_url": "https://api.github.com/users/vijaysumaravi/following{/other_user}", "gists_url": "https://api.github.com/users/vijaysumaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vijaysumaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vijaysumaravi/subscriptions", "organizations_url": "https://api.github.com/users/vijaysumaravi/orgs", "repos_url": "https://api.github.com/users/vijaysumaravi/repos", "events_url": "https://api.github.com/users/vijaysumaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/vijaysumaravi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-08-28T01:59:28Z", "updated_at": "2018-11-14T21:48:30Z", "closed_at": "2018-11-14T21:48:30Z", "author_association": "NONE", "body_html": "<p>Please go to Stack Overflow for help and support:</p>\n<p><a href=\"https://stackoverflow.com/questions/tagged/tensorflow\" rel=\"nofollow\">https://stackoverflow.com/questions/tagged/tensorflow</a></p>\n<p>If you open a GitHub issue, here is our policy:</p>\n<ol>\n<li>It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).</li>\n<li>The form below must be filled out.</li>\n<li>It shouldn't be a TensorBoard issue. Those go <a href=\"https://github.com/tensorflow/tensorboard/issues\">here</a>.</li>\n</ol>\n<p><strong>Here's why we have that policy</strong>: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.</p>\n<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Not Custom Code</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04.4 LTS</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Source</li>\n<li><strong>TensorFlow version (use command below)</strong>: tf-cpu/tf-gpu 1.3</li>\n<li><strong>Python version</strong>: Python 3.5.2</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.16.1</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: gcc-5</li>\n<li><strong>CUDA/cuDNN version</strong>: 9.0.176/ 7.1.3</li>\n<li><strong>GPU model and memory</strong>: GeForce GTX 1080 ti - 11GB</li>\n<li><strong>Exact command to reproduce</strong>:<br>\nbazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package</li>\n</ul>\n<p>You can collect some of this information using our environment capture script:</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\">https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh</a></p>\n<p>You can obtain the TensorFlow version with</p>\n<p>python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"</p>\n<h3>Describe the problem</h3>\n<p>Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.</p>\n<p>I have CUDA 9.0.176 and CuDNN 7.1.3 installed. To use tensorflow with gpu I have to install tf from Source as tf 1.3 does not support mentioned CUDA versions( I need tf 1.3 and not other higher versions). I am able to configure the installation but I get this error when trying to build the pip package from bazel.</p>\n<p>bazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package<br>\nWARNING: The following configs were expanded more than once: [cuda]. For repeatable flags, repeats are counted twice and may lead to unexpected behavior.<br>\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:4:1: First argument of 'load' must be a label and start with either '//', ':', or '@'.<br>\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:6:1: First argument of 'load' must be a label and start with either '//', ':', or '@'.<br>\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:4:1: file 'platform' was not correctly loaded. Make sure the 'load' statement appears in the global scope in your file<br>\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:6:1: file 'platform' was not correctly loaded. Make sure the 'load' statement appears in the global scope in your file<br>\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:30:9: Traceback (most recent call last):<br>\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD\", line 27<br>\ncc_library(name = \"syclrt\", srcs = [sycl_libr...\")], &lt;3 more arguments&gt;)<br>\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD\", line 30, in cc_library<br>\nsycl_library_path<br>\nname 'sycl_library_path' is not defined<br>\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD:460:1: Traceback (most recent call last):<br>\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD\", line 460<br>\ncc_proto_library(name = \"cc_test_protos\", srcs = (L...), &lt;4 more arguments&gt;)<br>\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/protobuf.bzl\", line 248, in cc_proto_library<br>\ncc_libs += [default_runtime]<br>\ntrying to mutate a frozen object<br>\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD:761:1: Traceback (most recent call last):<br>\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD\", line 761<br>\npy_proto_library(name = \"python_specific_test_pro...\", &lt;6 more arguments&gt;)<br>\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/protobuf.bzl\", line 374, in py_proto_library<br>\npy_libs += [default_runtime]<br>\ntrying to mutate a frozen object<br>\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:39:1: Target '@local_config_sycl//sycl:using_sycl' contains an error and its package is in error and referenced by '@local_config_sycl//sycl:sycl'<br>\nERROR: /home/vijay/speech_tts/multitacotron/tensorflow/third_party/eigen3/BUILD:20:1: Target '@local_config_sycl//sycl:sycl' contains an error and its package is in error and referenced by '//third_party/eigen3:eigen3'<br>\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: Analysis failed<br>\nINFO: Elapsed time: 13.227s<br>\nINFO: 0 processes.<br>\nFAILED: Build did NOT complete successfully (81 packages loaded)<br>\ncurrently loading: tensorflow/cc</p>\n<p><strong>This my tf source configuration results:</strong></p>\n<p>$ ./configure<br>\nYou have bazel 0.16.1 installed.<br>\nPlease specify the location of python. [Default is /home/vijay/speech_tts/multitacotron/multitaco/bin/python]:<br>\nFound possible Python library paths:<br>\n/home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages<br>\nPlease input the desired Python library path to use.  Default is [/home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages]</p>\n<p>Using python library path: /home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages<br>\nDo you wish to build TensorFlow with MKL support? [y/N] n<br>\nNo MKL support will be enabled for TensorFlow<br>\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:<br>\nDo you wish to use jemalloc as the malloc implementation? [Y/n] y<br>\njemalloc enabled<br>\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] n<br>\nNo Google Cloud Platform support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] n<br>\nNo Hadoop File System support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] n<br>\nNo XLA JIT support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with VERBS support? [y/N] n<br>\nNo VERBS support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with OpenCL support? [y/N] n<br>\nNo OpenCL support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with CUDA support? [y/N] y<br>\nCUDA support will be enabled for TensorFlow<br>\nDo you want to use clang as CUDA compiler? [y/N] n<br>\nnvcc will be used as CUDA compiler<br>\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: 9.0.176<br>\nPlease specify the location where CUDA 9.0.176 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:<br>\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: /usr/bin/gcc-5<br>\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: 7.1.3<br>\nPlease specify the location where cuDNN 7.1.3 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /usr/lib/x86_64-linux-gnu<br>\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.<br>\nYou can find the compute capability of your device at: <a href=\"https://developer.nvidia.com/cuda-gpus\" rel=\"nofollow\">https://developer.nvidia.com/cuda-gpus</a>.<br>\nPlease note that each additional compute capability significantly increases your build time and binary size.<br>\n[Default is: \"6.1,6.1,6.1,6.1\"]:<br>\nDo you wish to build TensorFlow with MPI support? [y/N] n<br>\nMPI support will not be enabled for TensorFlow<br>\nConfiguration finished</p>\n<h3>Source code / logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.</p>\n<p>Things that I have tried:</p>\n<ol>\n<li>Different versions of Bazel: 0.8.0, 0.9.0, 0.11.1, 0.16.1</li>\n<li>Cleared the cache before configuration: rm -rf ~/.cache/*</li>\n<li>Tried Configuring tf-CPU instead of tf-gpu to check if it works but it doesn't. Gives me the same error.</li>\n<li>this : <a href=\"https://stackoverflow.com/questions/47688252/tensorflow-trying-to-mutate-a-frozen-object-bazel\" rel=\"nofollow\">https://stackoverflow.com/questions/47688252/tensorflow-trying-to-mutate-a-frozen-object-bazel</a></li>\n</ol>\n<p>I am not really sure if it is a tensorflow issue but nothing seems to be working.</p>\n<p>Any help is appreciated. Thanks!</p>", "body_text": "Please go to Stack Overflow for help and support:\nhttps://stackoverflow.com/questions/tagged/tensorflow\nIf you open a GitHub issue, here is our policy:\n\nIt must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\nThe form below must be filled out.\nIt shouldn't be a TensorBoard issue. Those go here.\n\nHere's why we have that policy: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\n\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Not Custom Code\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04.4 LTS\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nTensorFlow installed from (source or binary): Source\nTensorFlow version (use command below): tf-cpu/tf-gpu 1.3\nPython version: Python 3.5.2\nBazel version (if compiling from source): 0.16.1\nGCC/Compiler version (if compiling from source): gcc-5\nCUDA/cuDNN version: 9.0.176/ 7.1.3\nGPU model and memory: GeForce GTX 1080 ti - 11GB\nExact command to reproduce:\nbazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package\n\nYou can collect some of this information using our environment capture script:\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\nYou can obtain the TensorFlow version with\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nDescribe the problem\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\nI have CUDA 9.0.176 and CuDNN 7.1.3 installed. To use tensorflow with gpu I have to install tf from Source as tf 1.3 does not support mentioned CUDA versions( I need tf 1.3 and not other higher versions). I am able to configure the installation but I get this error when trying to build the pip package from bazel.\nbazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package\nWARNING: The following configs were expanded more than once: [cuda]. For repeatable flags, repeats are counted twice and may lead to unexpected behavior.\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:4:1: First argument of 'load' must be a label and start with either '//', ':', or '@'.\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:6:1: First argument of 'load' must be a label and start with either '//', ':', or '@'.\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:4:1: file 'platform' was not correctly loaded. Make sure the 'load' statement appears in the global scope in your file\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:6:1: file 'platform' was not correctly loaded. Make sure the 'load' statement appears in the global scope in your file\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:30:9: Traceback (most recent call last):\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD\", line 27\ncc_library(name = \"syclrt\", srcs = [sycl_libr...\")], <3 more arguments>)\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD\", line 30, in cc_library\nsycl_library_path\nname 'sycl_library_path' is not defined\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD:460:1: Traceback (most recent call last):\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD\", line 460\ncc_proto_library(name = \"cc_test_protos\", srcs = (L...), <4 more arguments>)\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/protobuf.bzl\", line 248, in cc_proto_library\ncc_libs += [default_runtime]\ntrying to mutate a frozen object\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD:761:1: Traceback (most recent call last):\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD\", line 761\npy_proto_library(name = \"python_specific_test_pro...\", <6 more arguments>)\nFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/protobuf.bzl\", line 374, in py_proto_library\npy_libs += [default_runtime]\ntrying to mutate a frozen object\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:39:1: Target '@local_config_sycl//sycl:using_sycl' contains an error and its package is in error and referenced by '@local_config_sycl//sycl:sycl'\nERROR: /home/vijay/speech_tts/multitacotron/tensorflow/third_party/eigen3/BUILD:20:1: Target '@local_config_sycl//sycl:sycl' contains an error and its package is in error and referenced by '//third_party/eigen3:eigen3'\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: Analysis failed\nINFO: Elapsed time: 13.227s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (81 packages loaded)\ncurrently loading: tensorflow/cc\nThis my tf source configuration results:\n$ ./configure\nYou have bazel 0.16.1 installed.\nPlease specify the location of python. [Default is /home/vijay/speech_tts/multitacotron/multitaco/bin/python]:\nFound possible Python library paths:\n/home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages\nPlease input the desired Python library path to use.  Default is [/home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages]\nUsing python library path: /home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages\nDo you wish to build TensorFlow with MKL support? [y/N] n\nNo MKL support will be enabled for TensorFlow\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\nDo you wish to use jemalloc as the malloc implementation? [Y/n] y\njemalloc enabled\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] n\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] n\nNo Hadoop File System support will be enabled for TensorFlow\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] n\nNo XLA JIT support will be enabled for TensorFlow\nDo you wish to build TensorFlow with VERBS support? [y/N] n\nNo VERBS support will be enabled for TensorFlow\nDo you wish to build TensorFlow with OpenCL support? [y/N] n\nNo OpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] y\nCUDA support will be enabled for TensorFlow\nDo you want to use clang as CUDA compiler? [y/N] n\nnvcc will be used as CUDA compiler\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: 9.0.176\nPlease specify the location where CUDA 9.0.176 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: /usr/bin/gcc-5\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: 7.1.3\nPlease specify the location where cuDNN 7.1.3 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /usr/lib/x86_64-linux-gnu\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"6.1,6.1,6.1,6.1\"]:\nDo you wish to build TensorFlow with MPI support? [y/N] n\nMPI support will not be enabled for TensorFlow\nConfiguration finished\nSource code / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\nThings that I have tried:\n\nDifferent versions of Bazel: 0.8.0, 0.9.0, 0.11.1, 0.16.1\nCleared the cache before configuration: rm -rf ~/.cache/*\nTried Configuring tf-CPU instead of tf-gpu to check if it works but it doesn't. Gives me the same error.\nthis : https://stackoverflow.com/questions/47688252/tensorflow-trying-to-mutate-a-frozen-object-bazel\n\nI am not really sure if it is a tensorflow issue but nothing seems to be working.\nAny help is appreciated. Thanks!", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Not Custom Code\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04.4 LTS\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: tf-cpu/tf-gpu 1.3\r\n- **Python version**: Python 3.5.2\r\n- **Bazel version (if compiling from source)**: 0.16.1\r\n- **GCC/Compiler version (if compiling from source)**: gcc-5\r\n- **CUDA/cuDNN version**: 9.0.176/ 7.1.3\r\n- **GPU model and memory**: GeForce GTX 1080 ti - 11GB\r\n- **Exact command to reproduce**: \r\nbazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package \r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nI have CUDA 9.0.176 and CuDNN 7.1.3 installed. To use tensorflow with gpu I have to install tf from Source as tf 1.3 does not support mentioned CUDA versions( I need tf 1.3 and not other higher versions). I am able to configure the installation but I get this error when trying to build the pip package from bazel. \r\n\r\nbazel build --config=opt --config=cuda --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package \r\nWARNING: The following configs were expanded more than once: [cuda]. For repeatable flags, repeats are counted twice and may lead to unexpected behavior.\r\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:4:1: First argument of 'load' must be a label and start with either '//', ':', or '@'.\r\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:6:1: First argument of 'load' must be a label and start with either '//', ':', or '@'.\r\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:4:1: file 'platform' was not correctly loaded. Make sure the 'load' statement appears in the global scope in your file\r\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:6:1: file 'platform' was not correctly loaded. Make sure the 'load' statement appears in the global scope in your file\r\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:30:9: Traceback (most recent call last):\r\n\tFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD\", line 27\r\n\t\tcc_library(name = \"syclrt\", srcs = [sycl_libr...\")], <3 more arguments>)\r\n\tFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD\", line 30, in cc_library\r\n\t\tsycl_library_path\r\nname 'sycl_library_path' is not defined\r\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD:460:1: Traceback (most recent call last):\r\n\tFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD\", line 460\r\n\t\tcc_proto_library(name = \"cc_test_protos\", srcs = (L...), <4 more arguments>)\r\n\tFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/protobuf.bzl\", line 248, in cc_proto_library\r\n\t\tcc_libs += [default_runtime]\r\ntrying to mutate a frozen object\r\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD:761:1: Traceback (most recent call last):\r\n\tFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/BUILD\", line 761\r\n\t\tpy_proto_library(name = \"python_specific_test_pro...\", <6 more arguments>)\r\n\tFile \"/home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/protobuf/protobuf.bzl\", line 374, in py_proto_library\r\n\t\tpy_libs += [default_runtime]\r\ntrying to mutate a frozen object\r\nERROR: /home/vijay/.cache/bazel/_bazel_vijay/3b3dec1758244c0f8d4b66ae324b997d/external/local_config_sycl/sycl/BUILD:39:1: Target '@local_config_sycl//sycl:using_sycl' contains an error and its package is in error and referenced by '@local_config_sycl//sycl:sycl'\r\nERROR: /home/vijay/speech_tts/multitacotron/tensorflow/third_party/eigen3/BUILD:20:1: Target '@local_config_sycl//sycl:sycl' contains an error and its package is in error and referenced by '//third_party/eigen3:eigen3'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: Analysis failed\r\nINFO: Elapsed time: 13.227s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (81 packages loaded)\r\n    currently loading: tensorflow/cc\r\n \r\n**This my tf source configuration results:** \r\n\r\n$ ./configure\r\nYou have bazel 0.16.1 installed.\r\nPlease specify the location of python. [Default is /home/vijay/speech_tts/multitacotron/multitaco/bin/python]: \r\nFound possible Python library paths:\r\n  /home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages\r\nPlease input the desired Python library path to use.  Default is [/home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages]\r\n\r\nUsing python library path: /home/vijay/speech_tts/multitacotron/multitaco/lib/python3.5/site-packages\r\nDo you wish to build TensorFlow with MKL support? [y/N] n\r\nNo MKL support will be enabled for TensorFlow\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\nDo you wish to use jemalloc as the malloc implementation? [Y/n] y\r\njemalloc enabled\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] n\r\nNo Google Cloud Platform support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] n\r\nNo Hadoop File System support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] n\r\nNo XLA JIT support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with VERBS support? [y/N] n\r\nNo VERBS support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with OpenCL support? [y/N] n\r\nNo OpenCL support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with CUDA support? [y/N] y\r\nCUDA support will be enabled for TensorFlow\r\nDo you want to use clang as CUDA compiler? [y/N] n\r\nnvcc will be used as CUDA compiler\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: 9.0.176\r\nPlease specify the location where CUDA 9.0.176 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: /usr/bin/gcc-5\r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: 7.1.3\r\nPlease specify the location where cuDNN 7.1.3 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /usr/lib/x86_64-linux-gnu\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size.\r\n[Default is: \"6.1,6.1,6.1,6.1\"]: \r\nDo you wish to build TensorFlow with MPI support? [y/N] n\r\nMPI support will not be enabled for TensorFlow\r\nConfiguration finished\r\n\r\n\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nThings that I have tried: \r\n\r\n1) Different versions of Bazel: 0.8.0, 0.9.0, 0.11.1, 0.16.1\r\n2) Cleared the cache before configuration: rm -rf ~/.cache/*\r\n3) Tried Configuring tf-CPU instead of tf-gpu to check if it works but it doesn't. Gives me the same error. \r\n4) this : https://stackoverflow.com/questions/47688252/tensorflow-trying-to-mutate-a-frozen-object-bazel\r\n\r\nI am not really sure if it is a tensorflow issue but nothing seems to be working.\r\n\r\n Any help is appreciated. Thanks! "}
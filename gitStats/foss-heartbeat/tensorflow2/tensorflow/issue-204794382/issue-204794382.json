{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7212", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7212/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7212/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7212/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7212", "id": 204794382, "node_id": "MDU6SXNzdWUyMDQ3OTQzODI=", "number": 7212, "title": "tf.import_graph_def prepends 'import' to tensor names but graph_util.convert_variables_to_constants can't find the tensors", "user": {"login": "prats226", "id": 4567874, "node_id": "MDQ6VXNlcjQ1Njc4NzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/4567874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prats226", "html_url": "https://github.com/prats226", "followers_url": "https://api.github.com/users/prats226/followers", "following_url": "https://api.github.com/users/prats226/following{/other_user}", "gists_url": "https://api.github.com/users/prats226/gists{/gist_id}", "starred_url": "https://api.github.com/users/prats226/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prats226/subscriptions", "organizations_url": "https://api.github.com/users/prats226/orgs", "repos_url": "https://api.github.com/users/prats226/repos", "events_url": "https://api.github.com/users/prats226/events{/privacy}", "received_events_url": "https://api.github.com/users/prats226/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2017-02-02T06:37:59Z", "updated_at": "2017-07-12T23:12:34Z", "closed_at": "2017-07-12T23:12:34Z", "author_association": "NONE", "body_html": "<p>I am trying to merge two graph and encountering this issue.</p>\n<pre><code>\n# This is graph from session till now\ng_current_def = sess.graph.as_graph_def()\nwith tf.Graph().as_default() as g_2:\n    # Add another tensor which will be new input\n    prepend_input = tf.placeholder(tf.string, name='prepend_input')\n    # pass this new input tensor as input to imported graph\n    output_tensor , = tf.import_graph_def(g_default_def, input_map={\"input_tensor\": prepend_input}, return_elements=['output_tensor']) #This operation prepends 'import' to all tensor names in default graph\n    g2_default_def = g_2.as_graph_def()\n    # Convert merged graph into graph_def\n    output_graph_def = graph_util.convert_variables_to_constants(sess, g2_default_def, [\"import/\" + FLAGS.final_tensor_name])\n</code></pre>\n<p>This throws error</p>\n<pre><code>ValueError: Fetch argument u'import/final_training_ops/weights/final_weights:0' cannot be interpreted \nas a Tensor. (\"The name 'import/final_training_ops/weights/final_weights:0' refers to a Tensor which d\noes not exist. The operation, 'import/final_training_ops/weights/final_weights', does not exist in the\n graph.\")\n</code></pre>\n<p>whereas tensor 'final_training_ops/weights/final_weights:0' is declared in original graph.</p>", "body_text": "I am trying to merge two graph and encountering this issue.\n\n# This is graph from session till now\ng_current_def = sess.graph.as_graph_def()\nwith tf.Graph().as_default() as g_2:\n    # Add another tensor which will be new input\n    prepend_input = tf.placeholder(tf.string, name='prepend_input')\n    # pass this new input tensor as input to imported graph\n    output_tensor , = tf.import_graph_def(g_default_def, input_map={\"input_tensor\": prepend_input}, return_elements=['output_tensor']) #This operation prepends 'import' to all tensor names in default graph\n    g2_default_def = g_2.as_graph_def()\n    # Convert merged graph into graph_def\n    output_graph_def = graph_util.convert_variables_to_constants(sess, g2_default_def, [\"import/\" + FLAGS.final_tensor_name])\n\nThis throws error\nValueError: Fetch argument u'import/final_training_ops/weights/final_weights:0' cannot be interpreted \nas a Tensor. (\"The name 'import/final_training_ops/weights/final_weights:0' refers to a Tensor which d\noes not exist. The operation, 'import/final_training_ops/weights/final_weights', does not exist in the\n graph.\")\n\nwhereas tensor 'final_training_ops/weights/final_weights:0' is declared in original graph.", "body": "I am trying to merge two graph and encountering this issue.\r\n```\r\n\r\n# This is graph from session till now\r\ng_current_def = sess.graph.as_graph_def()\r\nwith tf.Graph().as_default() as g_2:\r\n    # Add another tensor which will be new input\r\n    prepend_input = tf.placeholder(tf.string, name='prepend_input')\r\n    # pass this new input tensor as input to imported graph\r\n    output_tensor , = tf.import_graph_def(g_default_def, input_map={\"input_tensor\": prepend_input}, return_elements=['output_tensor']) #This operation prepends 'import' to all tensor names in default graph\r\n    g2_default_def = g_2.as_graph_def()\r\n    # Convert merged graph into graph_def\r\n    output_graph_def = graph_util.convert_variables_to_constants(sess, g2_default_def, [\"import/\" + FLAGS.final_tensor_name])\r\n```\r\n\r\nThis throws error\r\n\r\n```\r\nValueError: Fetch argument u'import/final_training_ops/weights/final_weights:0' cannot be interpreted \r\nas a Tensor. (\"The name 'import/final_training_ops/weights/final_weights:0' refers to a Tensor which d\r\noes not exist. The operation, 'import/final_training_ops/weights/final_weights', does not exist in the\r\n graph.\")\r\n```\r\n\r\nwhereas tensor 'final_training_ops/weights/final_weights:0' is declared in original graph."}
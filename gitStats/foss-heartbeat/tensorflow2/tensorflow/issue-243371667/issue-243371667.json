{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11552", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11552/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11552/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11552/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11552", "id": 243371667, "node_id": "MDU6SXNzdWUyNDMzNzE2Njc=", "number": 11552, "title": "DecodeCSV outputs an unexpectedly result", "user": {"login": "uuleon", "id": 4274538, "node_id": "MDQ6VXNlcjQyNzQ1Mzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4274538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uuleon", "html_url": "https://github.com/uuleon", "followers_url": "https://api.github.com/users/uuleon/followers", "following_url": "https://api.github.com/users/uuleon/following{/other_user}", "gists_url": "https://api.github.com/users/uuleon/gists{/gist_id}", "starred_url": "https://api.github.com/users/uuleon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uuleon/subscriptions", "organizations_url": "https://api.github.com/users/uuleon/orgs", "repos_url": "https://api.github.com/users/uuleon/repos", "events_url": "https://api.github.com/users/uuleon/events{/privacy}", "received_events_url": "https://api.github.com/users/uuleon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-07-17T11:55:47Z", "updated_at": "2017-07-18T04:34:35Z", "closed_at": "2017-07-18T01:16:26Z", "author_association": "NONE", "body_html": "<p>I recently feel confused while using <code>DecodeCSV</code> operator. The meaning of <code>record_defaults</code> is different from that described in the documentation.</p>\n<p>Here is the description in documentation:</p>\n<pre><code>record_defaults: One tensor per column of the input record, with either a\n  scalar default value for that column or empty if the column is required.\n</code></pre>\n<p>Problem 1 : The size of <code>record_defaults</code> limit the size of output</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> value<span class=\"pl-k\">=</span>[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>a,b,c<span class=\"pl-pds\">\"</span></span>]\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> parts_val <span class=\"pl-k\">=</span> parsing_ops.decode_csv(value, <span class=\"pl-v\">field_delim</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>,<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-v\">record_defaults</span> <span class=\"pl-k\">=</span> [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>]])\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> parts_val\n[<span class=\"pl-k\">&lt;</span>tf.Tensor <span class=\"pl-s\"><span class=\"pl-pds\">'</span>DecodeCSV_10:0<span class=\"pl-pds\">'</span></span> shape=(<span class=\"pl-c1\">1</span>,) dtype=string<span class=\"pl-k\">&gt;</span>]</pre></div>\n<p>Problem 2 : If <code>record_defaults</code> contains empty element, the type of output is always float32. In the same time, it failed to check the existence of value.</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> value<span class=\"pl-k\">=</span>[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>a,b,c<span class=\"pl-pds\">\"</span></span>]\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> parts_val <span class=\"pl-k\">=</span> parsing_ops.decode_csv(value, <span class=\"pl-v\">field_delim</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>,<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-v\">record_defaults</span> <span class=\"pl-k\">=</span> [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>], [], []])\n<span class=\"pl-k\">&gt;&gt;</span><span class=\"pl-k\">&gt;</span> parts_val\n[<span class=\"pl-k\">&lt;</span>tf.Tensor <span class=\"pl-s\"><span class=\"pl-pds\">'</span>DecodeCSV_13:0<span class=\"pl-pds\">'</span></span> shape=(<span class=\"pl-c1\">1</span>,) dtype=string<span class=\"pl-k\">&gt;</span>, <span class=\"pl-k\">&lt;</span>tf.Tensor <span class=\"pl-s\"><span class=\"pl-pds\">'</span>DecodeCSV_13:1<span class=\"pl-pds\">'</span></span> shape=(<span class=\"pl-c1\">1</span>,) dtype=float32<span class=\"pl-k\">&gt;</span>, <span class=\"pl-k\">&lt;</span>tf.Tensor <span class=\"pl-s\"><span class=\"pl-pds\">'</span>DecodeCSV_13:2<span class=\"pl-pds\">'</span></span> shape=(<span class=\"pl-c1\">1</span>,) dtype=float32<span class=\"pl-k\">&gt;</span>]</pre></div>\n<p>Maybe I understand it in a wrong way. Any comment is appreciated. Thanks.</p>", "body_text": "I recently feel confused while using DecodeCSV operator. The meaning of record_defaults is different from that described in the documentation.\nHere is the description in documentation:\nrecord_defaults: One tensor per column of the input record, with either a\n  scalar default value for that column or empty if the column is required.\n\nProblem 1 : The size of record_defaults limit the size of output\n>>> value=[\"a,b,c\"]\n>>> parts_val = parsing_ops.decode_csv(value, field_delim=\",\", record_defaults = [[\"\"]])\n>>> parts_val\n[<tf.Tensor 'DecodeCSV_10:0' shape=(1,) dtype=string>]\nProblem 2 : If record_defaults contains empty element, the type of output is always float32. In the same time, it failed to check the existence of value.\n>>> value=[\"a,b,c\"]\n>>> parts_val = parsing_ops.decode_csv(value, field_delim=\",\", record_defaults = [[\"\"], [], []])\n>>> parts_val\n[<tf.Tensor 'DecodeCSV_13:0' shape=(1,) dtype=string>, <tf.Tensor 'DecodeCSV_13:1' shape=(1,) dtype=float32>, <tf.Tensor 'DecodeCSV_13:2' shape=(1,) dtype=float32>]\nMaybe I understand it in a wrong way. Any comment is appreciated. Thanks.", "body": "I recently feel confused while using `DecodeCSV` operator. The meaning of `record_defaults` is different from that described in the documentation.\r\n\r\nHere is the description in documentation:\r\n```\r\nrecord_defaults: One tensor per column of the input record, with either a\r\n  scalar default value for that column or empty if the column is required.\r\n```\r\n\r\nProblem 1 : The size of `record_defaults` limit the size of output\r\n```python\r\n>>> value=[\"a,b,c\"]\r\n>>> parts_val = parsing_ops.decode_csv(value, field_delim=\",\", record_defaults = [[\"\"]])\r\n>>> parts_val\r\n[<tf.Tensor 'DecodeCSV_10:0' shape=(1,) dtype=string>]\r\n```\r\n\r\nProblem 2 : If `record_defaults` contains empty element, the type of output is always float32. In the same time, it failed to check the existence of value.\r\n```python\r\n>>> value=[\"a,b,c\"]\r\n>>> parts_val = parsing_ops.decode_csv(value, field_delim=\",\", record_defaults = [[\"\"], [], []])\r\n>>> parts_val\r\n[<tf.Tensor 'DecodeCSV_13:0' shape=(1,) dtype=string>, <tf.Tensor 'DecodeCSV_13:1' shape=(1,) dtype=float32>, <tf.Tensor 'DecodeCSV_13:2' shape=(1,) dtype=float32>]\r\n```\r\n\r\nMaybe I understand it in a wrong way. Any comment is appreciated. Thanks."}
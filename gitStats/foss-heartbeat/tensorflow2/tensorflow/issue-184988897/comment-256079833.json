{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/256079833", "html_url": "https://github.com/tensorflow/tensorflow/issues/5179#issuecomment-256079833", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5179", "id": 256079833, "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjA3OTgzMw==", "user": {"login": "hemalshahX", "id": 22327027, "node_id": "MDQ6VXNlcjIyMzI3MDI3", "avatar_url": "https://avatars1.githubusercontent.com/u/22327027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hemalshahX", "html_url": "https://github.com/hemalshahX", "followers_url": "https://api.github.com/users/hemalshahX/followers", "following_url": "https://api.github.com/users/hemalshahX/following{/other_user}", "gists_url": "https://api.github.com/users/hemalshahX/gists{/gist_id}", "starred_url": "https://api.github.com/users/hemalshahX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hemalshahX/subscriptions", "organizations_url": "https://api.github.com/users/hemalshahX/orgs", "repos_url": "https://api.github.com/users/hemalshahX/repos", "events_url": "https://api.github.com/users/hemalshahX/events{/privacy}", "received_events_url": "https://api.github.com/users/hemalshahX/received_events", "type": "User", "site_admin": false}, "created_at": "2016-10-25T16:03:02Z", "updated_at": "2016-10-25T16:03:02Z", "author_association": "NONE", "body_html": "<p>Thanks for taking a look! Producing the Docker image is not a problem and I can successfully get libtensorflow_cc.so built and headers all in place.</p>\n<p>When I build and link against them to use the Session API in my Bazel-built project, however, I get the linker error from a cc_binary target that relies on a cc_library target the links against libtensorflow_cc.so.</p>\n<p>The Bazel target that links in the libtensorflow_cc.so is as follows for reference:<br>\ncc_library(<br>\nname = \"tof_pose_estimator\",<br>\nsrcs = [\"tof_pose_estimator.cc\"],<br>\nhdrs = [\"tof_pose_estimator.h\"],<br>\ncopts = [<br>\n\"-D_FORCE_INLINES\",<br>\n\"-I/usr/include/tensorflow\",<br>\n\"-I/usr/include/python2.7\",<br>\n\"-I/usr/include/x86_64-linux-gnu/python2.7\",<br>\n\"-fno-strict-aliasing\",<br>\n\"-D_FORTIFY_SOURCE=2\",<br>\n\"-g\",<br>\n\"-fstack-protector\",<br>\n\"--param=ssp-buffer-size=4\",<br>\n\"-Wformat\",<br>\n\"-Werror=format-security\",<br>\n\"-DNDEBUG\",<br>\n\"-g\",<br>\n\"-fwrapv\",<br>\n\"-O2\",<br>\n\"-Wall\",<br>\n\"-Wstrict-prototypes\",<br>\n],<br>\nlinkopts = [<br>\n\"-L/usr/lib/python2.7/config-x86_64-linux-gnu\",<br>\n\"-L/usr/lib\",<br>\n\"-lpthread\",<br>\n\"-ldl\",<br>\n\"-ltensorflow_cc\",<br>\n\"-lutil\",<br>\n\"-lm\",<br>\n\"-lpython2.7\",<br>\n\"-Wl,-O1 -Wl,-Bsymbolic-functions\",<br>\n],<br>\ndeps = [<br>\n\"//base\",<br>\n\"//config:util\",<br>\n\"//geometry/camera_model\",<br>\n\"//geometry/image\",<br>\n\"//geometry/normals\",<br>\n\"//geometry/plane:find_planes\",<br>\n\"//hardware/monocular_camera\",<br>\n\"//hardware/stereo_camera:stereo_grabber\",<br>\n\"//math\",<br>\n\"//messages:camera_model\",<br>\n\"//messages:camera_model_io\",<br>\n\"//messages:math_io\",<br>\n\"//messages:tof_frame\",<br>\n\"//messages:tof_frame_io\",<br>\n\"//vis/websocket:server\",<br>\n],<br>\nalwayslink = 1,<br>\n)</p>", "body_text": "Thanks for taking a look! Producing the Docker image is not a problem and I can successfully get libtensorflow_cc.so built and headers all in place.\nWhen I build and link against them to use the Session API in my Bazel-built project, however, I get the linker error from a cc_binary target that relies on a cc_library target the links against libtensorflow_cc.so.\nThe Bazel target that links in the libtensorflow_cc.so is as follows for reference:\ncc_library(\nname = \"tof_pose_estimator\",\nsrcs = [\"tof_pose_estimator.cc\"],\nhdrs = [\"tof_pose_estimator.h\"],\ncopts = [\n\"-D_FORCE_INLINES\",\n\"-I/usr/include/tensorflow\",\n\"-I/usr/include/python2.7\",\n\"-I/usr/include/x86_64-linux-gnu/python2.7\",\n\"-fno-strict-aliasing\",\n\"-D_FORTIFY_SOURCE=2\",\n\"-g\",\n\"-fstack-protector\",\n\"--param=ssp-buffer-size=4\",\n\"-Wformat\",\n\"-Werror=format-security\",\n\"-DNDEBUG\",\n\"-g\",\n\"-fwrapv\",\n\"-O2\",\n\"-Wall\",\n\"-Wstrict-prototypes\",\n],\nlinkopts = [\n\"-L/usr/lib/python2.7/config-x86_64-linux-gnu\",\n\"-L/usr/lib\",\n\"-lpthread\",\n\"-ldl\",\n\"-ltensorflow_cc\",\n\"-lutil\",\n\"-lm\",\n\"-lpython2.7\",\n\"-Wl,-O1 -Wl,-Bsymbolic-functions\",\n],\ndeps = [\n\"//base\",\n\"//config:util\",\n\"//geometry/camera_model\",\n\"//geometry/image\",\n\"//geometry/normals\",\n\"//geometry/plane:find_planes\",\n\"//hardware/monocular_camera\",\n\"//hardware/stereo_camera:stereo_grabber\",\n\"//math\",\n\"//messages:camera_model\",\n\"//messages:camera_model_io\",\n\"//messages:math_io\",\n\"//messages:tof_frame\",\n\"//messages:tof_frame_io\",\n\"//vis/websocket:server\",\n],\nalwayslink = 1,\n)", "body": "Thanks for taking a look! Producing the Docker image is not a problem and I can successfully get libtensorflow_cc.so built and headers all in place. \n\nWhen I build and link against them to use the Session API in my Bazel-built project, however, I get the linker error from a cc_binary target that relies on a cc_library target the links against libtensorflow_cc.so.\n\nThe Bazel target that links in the libtensorflow_cc.so is as follows for reference:\ncc_library(\n    name = \"tof_pose_estimator\",\n    srcs = [\"tof_pose_estimator.cc\"],\n    hdrs = [\"tof_pose_estimator.h\"],\n    copts = [\n        \"-D_FORCE_INLINES\",\n        \"-I/usr/include/tensorflow\",\n        \"-I/usr/include/python2.7\",\n        \"-I/usr/include/x86_64-linux-gnu/python2.7\",\n        \"-fno-strict-aliasing\",\n        \"-D_FORTIFY_SOURCE=2\",\n        \"-g\",\n        \"-fstack-protector\",\n        \"--param=ssp-buffer-size=4\",\n        \"-Wformat\",\n        \"-Werror=format-security\",\n        \"-DNDEBUG\",\n        \"-g\",\n        \"-fwrapv\",\n        \"-O2\",\n        \"-Wall\",\n        \"-Wstrict-prototypes\",\n    ],\n    linkopts = [\n        \"-L/usr/lib/python2.7/config-x86_64-linux-gnu\",\n        \"-L/usr/lib\",\n        \"-lpthread\",\n        \"-ldl\",\n        \"-ltensorflow_cc\",\n        \"-lutil\",\n        \"-lm\",\n        \"-lpython2.7\",\n        \"-Wl,-O1 -Wl,-Bsymbolic-functions\",\n    ],\n    deps = [\n        \"//base\",\n        \"//config:util\",\n        \"//geometry/camera_model\",\n        \"//geometry/image\",\n        \"//geometry/normals\",\n        \"//geometry/plane:find_planes\",\n        \"//hardware/monocular_camera\",\n        \"//hardware/stereo_camera:stereo_grabber\",\n        \"//math\",\n        \"//messages:camera_model\",\n        \"//messages:camera_model_io\",\n        \"//messages:math_io\",\n        \"//messages:tof_frame\",\n        \"//messages:tof_frame_io\",\n        \"//vis/websocket:server\",\n    ],\n    alwayslink = 1,\n)\n"}
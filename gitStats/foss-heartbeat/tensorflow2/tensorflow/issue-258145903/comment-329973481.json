{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/329973481", "html_url": "https://github.com/tensorflow/tensorflow/issues/13069#issuecomment-329973481", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13069", "id": 329973481, "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTk3MzQ4MQ==", "user": {"login": "sherkwast", "id": 12693218, "node_id": "MDQ6VXNlcjEyNjkzMjE4", "avatar_url": "https://avatars0.githubusercontent.com/u/12693218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sherkwast", "html_url": "https://github.com/sherkwast", "followers_url": "https://api.github.com/users/sherkwast/followers", "following_url": "https://api.github.com/users/sherkwast/following{/other_user}", "gists_url": "https://api.github.com/users/sherkwast/gists{/gist_id}", "starred_url": "https://api.github.com/users/sherkwast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sherkwast/subscriptions", "organizations_url": "https://api.github.com/users/sherkwast/orgs", "repos_url": "https://api.github.com/users/sherkwast/repos", "events_url": "https://api.github.com/users/sherkwast/events{/privacy}", "received_events_url": "https://api.github.com/users/sherkwast/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-16T14:57:23Z", "updated_at": "2017-09-16T15:04:51Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=6510203\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/reedwm\">@reedwm</a> I've tried many times.<br>\nMy dockerfile modified from yours<br>\n`<br>\nFROM ubuntu:latest<br>\nMAINTAINER Luxios<br>\nRUN cp /etc/apt/sources.list /etc/apt/sources.list_backup &amp;&amp; <br>\napt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9<br>\nCOPY sources.list /etc/apt/<br>\nRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends --fix-missing <br>\nbuild-essential <br>\ncurl <br>\ngit <br>\nlibcurl3-dev <br>\nlibfreetype6-dev <br>\nlibpng12-dev <br>\nlibzmq3-dev <br>\npkg-config <br>\npython-dev <br>\nrsync <br>\nsoftware-properties-common <br>\nunzip <br>\nzip <br>\nzlib1g-dev <br>\nopenjdk-8-jdk <br>\nopenjdk-8-jre-headless <br>\nlibopenblas-dev liblapack-dev libopencv-dev <br>\npolipo <br>\nvim <br>\nr-base <br>\nlibssl-dev libcurl4-openssl-dev &amp;&amp; <br>\napt-get install x11vnc xvfb firefox -y</p>\n<p>COPY config /etc/polipo/config<br>\nRUN curl -fSsL -O <a href=\"https://bootstrap.pypa.io/get-pip.py\" rel=\"nofollow\">https://bootstrap.pypa.io/get-pip.py</a> &amp;&amp; <br>\npython get-pip.py &amp;&amp; <br>\nrm get-pip.py &amp;&amp; <br>\npip --no-cache-dir install <br>\nPillow <br>\nh5py <br>\nrequests <br>\nipykernel <br>\njupyter <br>\nmatplotlib <br>\nnumpy <br>\npandas <br>\nscipy <br>\nsklearn <br>\nshadowsocks <br>\n&amp;&amp; <br>\npython -m ipykernel.kernelspec</p>\n<p>COPY jupyter_notebook_config.py /root/.jupyter/<br>\nCOPY run_jupyter.sh /</p>\n<p>RUN echo \"startup --batch\" &gt;&gt;/etc/bazel.bazelrc<br>\nRUN echo \"build --spawn_strategy=standalone --genrule_strategy=standalone\" <br>\n&gt;&gt;/etc/bazel.bazelrc<br>\nENV BAZEL_VERSION 0.5.0<br>\nWORKDIR /<br>\nCOPY shawdowsocks.json /<br>\nRUN sslocal -c /shawdowsocks.json -d start &amp;&amp; <br>\n/etc/init.d/polipo restart &amp;&amp; <br>\nexport http_proxy=\"<a href=\"http://127.0.0.1:8123/\" rel=\"nofollow\">http://127.0.0.1:8123/</a>\" &amp;&amp; <br>\nmkdir /bazel &amp;&amp; <br>\ncd /bazel &amp;&amp; <br>\ncurl -H \"User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\" -fSsL -O <a href=\"https://github.com/bazelbuild/bazel/releases/download/$BAZEL_VERSION/bazel-$BAZEL_VERSION-installer-linux-x86_64.sh\">https://github.com/bazelbuild/bazel/releases/download/$BAZEL_VERSION/bazel-$BAZEL_VERSION-installer-linux-x86_64.sh</a> &amp;&amp; <br>\ncurl -H \"User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\" -fSsL -o /bazel/LICENSE.txt <a href=\"https://raw.githubusercontent.com/bazelbuild/bazel/master/LICENSE\" rel=\"nofollow\">https://raw.githubusercontent.com/bazelbuild/bazel/master/LICENSE</a> &amp;&amp; <br>\nchmod +x bazel-*.sh &amp;&amp; <br>\n./bazel-$BAZEL_VERSION-installer-linux-x86_64.sh &amp;&amp; <br>\ncd / &amp;&amp; <br>\nrm -f /bazel/bazel-$BAZEL_VERSION-installer-linux-x86_64.sh</p>\n<p>RUN git clone <a href=\"https://github.com/tensorflow/tensorflow.git\">https://github.com/tensorflow/tensorflow.git</a> &amp;&amp; <br>\ncd tensorflow &amp;&amp; <br>\ngit checkout r1.3<br>\nWORKDIR /tensorflow</p>\n<p>ENV CI_BUILD_PYTHON python<br>\nRUN tensorflow/tools/ci_build/builds/configured CPU <br>\nbazel build -c opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" <br>\ntensorflow/tools/pip_package:build_pip_package &amp;&amp; <br>\nbazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &amp;&amp; <br>\npip --no-cache-dir install --upgrade /tmp/pip/tensorflow-*.whl</p>\n<p>ENV PATH /google-cloud-sdk/bin:$PATH<br>\nRUN curl -O <a href=\"https://dl.google.com/dl/cloudsdk/channels/rapid/google-cloud-sdk.zip\" rel=\"nofollow\">https://dl.google.com/dl/cloudsdk/channels/rapid/google-cloud-sdk.zip</a> &amp;&amp; <br>\nunzip google-cloud-sdk.zip &amp;&amp; rm google-cloud-sdk.zip &amp;&amp; <br>\ngoogle-cloud-sdk/install.sh --usage-reporting=false --path-update=true --bash-completion=true --rc-path=/.bashrc --additional-components app-engine-python &amp;&amp; <br>\ngoogle-cloud-sdk/bin/gcloud config set --installation component_manager/disable_update_check true</p>\n<p>EXPOSE 6006<br>\nEXPOSE 8888<br>\nEXPOSE 5900</p>\n<p>WORKDIR /<br>\nCMD [\"/bin/bash\"]<br>\n\u00b7</p>", "body_text": "@reedwm I've tried many times.\nMy dockerfile modified from yours\n`\nFROM ubuntu:latest\nMAINTAINER Luxios\nRUN cp /etc/apt/sources.list /etc/apt/sources.list_backup && \napt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\nCOPY sources.list /etc/apt/\nRUN apt-get update && apt-get install -y --no-install-recommends --fix-missing \nbuild-essential \ncurl \ngit \nlibcurl3-dev \nlibfreetype6-dev \nlibpng12-dev \nlibzmq3-dev \npkg-config \npython-dev \nrsync \nsoftware-properties-common \nunzip \nzip \nzlib1g-dev \nopenjdk-8-jdk \nopenjdk-8-jre-headless \nlibopenblas-dev liblapack-dev libopencv-dev \npolipo \nvim \nr-base \nlibssl-dev libcurl4-openssl-dev && \napt-get install x11vnc xvfb firefox -y\nCOPY config /etc/polipo/config\nRUN curl -fSsL -O https://bootstrap.pypa.io/get-pip.py && \npython get-pip.py && \nrm get-pip.py && \npip --no-cache-dir install \nPillow \nh5py \nrequests \nipykernel \njupyter \nmatplotlib \nnumpy \npandas \nscipy \nsklearn \nshadowsocks \n&& \npython -m ipykernel.kernelspec\nCOPY jupyter_notebook_config.py /root/.jupyter/\nCOPY run_jupyter.sh /\nRUN echo \"startup --batch\" >>/etc/bazel.bazelrc\nRUN echo \"build --spawn_strategy=standalone --genrule_strategy=standalone\" \n>>/etc/bazel.bazelrc\nENV BAZEL_VERSION 0.5.0\nWORKDIR /\nCOPY shawdowsocks.json /\nRUN sslocal -c /shawdowsocks.json -d start && \n/etc/init.d/polipo restart && \nexport http_proxy=\"http://127.0.0.1:8123/\" && \nmkdir /bazel && \ncd /bazel && \ncurl -H \"User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\" -fSsL -O https://github.com/bazelbuild/bazel/releases/download/$BAZEL_VERSION/bazel-$BAZEL_VERSION-installer-linux-x86_64.sh && \ncurl -H \"User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\" -fSsL -o /bazel/LICENSE.txt https://raw.githubusercontent.com/bazelbuild/bazel/master/LICENSE && \nchmod +x bazel-*.sh && \n./bazel-$BAZEL_VERSION-installer-linux-x86_64.sh && \ncd / && \nrm -f /bazel/bazel-$BAZEL_VERSION-installer-linux-x86_64.sh\nRUN git clone https://github.com/tensorflow/tensorflow.git && \ncd tensorflow && \ngit checkout r1.3\nWORKDIR /tensorflow\nENV CI_BUILD_PYTHON python\nRUN tensorflow/tools/ci_build/builds/configured CPU \nbazel build -c opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" \ntensorflow/tools/pip_package:build_pip_package && \nbazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip && \npip --no-cache-dir install --upgrade /tmp/pip/tensorflow-*.whl\nENV PATH /google-cloud-sdk/bin:$PATH\nRUN curl -O https://dl.google.com/dl/cloudsdk/channels/rapid/google-cloud-sdk.zip && \nunzip google-cloud-sdk.zip && rm google-cloud-sdk.zip && \ngoogle-cloud-sdk/install.sh --usage-reporting=false --path-update=true --bash-completion=true --rc-path=/.bashrc --additional-components app-engine-python && \ngoogle-cloud-sdk/bin/gcloud config set --installation component_manager/disable_update_check true\nEXPOSE 6006\nEXPOSE 8888\nEXPOSE 5900\nWORKDIR /\nCMD [\"/bin/bash\"]\n\u00b7", "body": "@reedwm I've tried many times.\r\nMy dockerfile modified from yours\r\n`\r\nFROM ubuntu:latest\r\nMAINTAINER Luxios\r\nRUN cp /etc/apt/sources.list /etc/apt/sources.list_backup && \\\r\n    apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\r\nCOPY sources.list /etc/apt/\r\nRUN apt-get update && apt-get install -y --no-install-recommends --fix-missing \\\r\n        build-essential \\\r\n        curl \\\r\n        git \\\r\n        libcurl3-dev \\\r\n        libfreetype6-dev \\\r\n        libpng12-dev \\\r\n        libzmq3-dev \\\r\n        pkg-config \\\r\n        python-dev \\\r\n        rsync \\\r\n        software-properties-common \\\r\n        unzip \\\r\n        zip \\\r\n        zlib1g-dev \\\r\n        openjdk-8-jdk \\\r\n        openjdk-8-jre-headless \\\r\n        libopenblas-dev liblapack-dev libopencv-dev \\\r\n        polipo \\\r\n        vim \\\r\n        r-base \\\r\n        libssl-dev libcurl4-openssl-dev && \\\r\n    apt-get install x11vnc xvfb firefox -y\r\n    \r\nCOPY config /etc/polipo/config\r\nRUN curl -fSsL -O https://bootstrap.pypa.io/get-pip.py && \\\r\n    python get-pip.py && \\\r\n    rm get-pip.py && \\\r\n    pip --no-cache-dir install \\\r\n        Pillow \\\r\n        h5py \\\r\n        requests \\\r\n        ipykernel \\\r\n        jupyter \\\r\n        matplotlib \\\r\n        numpy \\\r\n        pandas \\\r\n        scipy \\\r\n        sklearn \\\r\n        shadowsocks \\\r\n        && \\\r\n    python -m ipykernel.kernelspec \r\n\r\n\r\nCOPY jupyter_notebook_config.py /root/.jupyter/\r\nCOPY run_jupyter.sh /\r\n\r\nRUN echo \"startup --batch\" >>/etc/bazel.bazelrc\r\nRUN echo \"build --spawn_strategy=standalone --genrule_strategy=standalone\" \\\r\n    >>/etc/bazel.bazelrc\r\nENV BAZEL_VERSION 0.5.0\r\nWORKDIR /\r\nCOPY shawdowsocks.json /\r\nRUN sslocal -c /shawdowsocks.json -d start && \\\r\n    /etc/init.d/polipo restart && \\\r\n    export http_proxy=\"http://127.0.0.1:8123/\" && \\\r\n    mkdir /bazel && \\\r\n    cd /bazel && \\\r\n    curl -H \"User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\" -fSsL -O https://github.com/bazelbuild/bazel/releases/download/$BAZEL_VERSION/bazel-$BAZEL_VERSION-installer-linux-x86_64.sh && \\\r\n    curl -H \"User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\" -fSsL -o /bazel/LICENSE.txt https://raw.githubusercontent.com/bazelbuild/bazel/master/LICENSE && \\\r\n    chmod +x bazel-*.sh && \\\r\n    ./bazel-$BAZEL_VERSION-installer-linux-x86_64.sh && \\\r\n    cd / && \\\r\n    rm -f /bazel/bazel-$BAZEL_VERSION-installer-linux-x86_64.sh\r\n\r\nRUN git clone https://github.com/tensorflow/tensorflow.git && \\\r\n    cd tensorflow && \\\r\n    git checkout r1.3\r\nWORKDIR /tensorflow\r\n\r\nENV CI_BUILD_PYTHON python\r\nRUN tensorflow/tools/ci_build/builds/configured CPU \\\r\n    bazel build -c opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" \\\r\n        tensorflow/tools/pip_package:build_pip_package && \\\r\n    bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip && \\\r\n    pip --no-cache-dir install --upgrade /tmp/pip/tensorflow-*.whl \r\n\r\nENV PATH /google-cloud-sdk/bin:$PATH\r\nRUN curl -O https://dl.google.com/dl/cloudsdk/channels/rapid/google-cloud-sdk.zip && \\\r\n    unzip google-cloud-sdk.zip && rm google-cloud-sdk.zip && \\\r\n    google-cloud-sdk/install.sh --usage-reporting=false --path-update=true --bash-completion=true --rc-path=/.bashrc --additional-components app-engine-python && \\\r\n    google-cloud-sdk/bin/gcloud config set --installation component_manager/disable_update_check true\r\n\r\nEXPOSE 6006\r\nEXPOSE 8888\r\nEXPOSE 5900\r\n\r\nWORKDIR /\r\nCMD [\"/bin/bash\"]\r\n\u00b7"}
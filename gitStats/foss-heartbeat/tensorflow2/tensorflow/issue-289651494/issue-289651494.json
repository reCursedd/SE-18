{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16221", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16221/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16221/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16221/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16221", "id": 289651494, "node_id": "MDU6SXNzdWUyODk2NTE0OTQ=", "number": 16221, "title": "Meaning of report_tensor_allocations_upon_oom output", "user": {"login": "sleighsoft", "id": 9438971, "node_id": "MDQ6VXNlcjk0Mzg5NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9438971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleighsoft", "html_url": "https://github.com/sleighsoft", "followers_url": "https://api.github.com/users/sleighsoft/followers", "following_url": "https://api.github.com/users/sleighsoft/following{/other_user}", "gists_url": "https://api.github.com/users/sleighsoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleighsoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleighsoft/subscriptions", "organizations_url": "https://api.github.com/users/sleighsoft/orgs", "repos_url": "https://api.github.com/users/sleighsoft/repos", "events_url": "https://api.github.com/users/sleighsoft/events{/privacy}", "received_events_url": "https://api.github.com/users/sleighsoft/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-18T14:39:30Z", "updated_at": "2018-01-19T08:41:16Z", "closed_at": "2018-01-19T08:41:16Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Python: 3.6.2<br>\nOS: Ubuntu 16.04<br>\nTensorflow: 1.5.0rc1</p>\n<p>When running a session with <code>tf.RunOptions</code> and <code>report_tensor_allocations_upon_oom=True</code> I get the following output at the end of my log.</p>\n<ol>\n<li>I am wondering why some entries occur multiple times? How can a single node have multiple allocations? Why are they not summed?</li>\n<li>Does <code>Remaining 1252 nodes with 98.80MiB</code> mean that all 1252 nodes together use 98.80MiB or each single one uses that amount?</li>\n<li>When summing up all values I get <code>10.607822265625GiB</code> but my free GPU space when starting my program is <code>11.92GiB</code> so shouldn't there still be enough space??</li>\n</ol>\n<pre><code>Current usage from device: /job:localhost/replica:0/task:0/device:GPU:0, allocator: GPU_0_bfc\n  250.78MiB from network/convolutions/conv2d_5/Conv2D\n  217.34MiB from network/convolutions/conv2d_5/Conv2D\n  203.75MiB from network/convolutions/conv2d_5/Conv2D\n  192.91MiB from network/convolutions/conv2d_11/Conv2D\n  168.05MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_11/Conv2D\n  163.84MiB from network/convolutions/conv2d_7/Conv2D\n  160.50MiB from network/convolutions/conv2d_7/Conv2D\n  140.99MiB from network/convolutions/conv2d_12/Conv2D\n  133.75MiB from network/convolutions/conv2d_6/Conv2D\n  133.75MiB from network/convolutions/conv2d_7/Conv2D\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\n  133.75MiB from network/convolutions/conv2d_12/Conv2D\n  103.66MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  Remaining 1252 nodes with 98.80MiB\n</code></pre>", "body_text": "Python: 3.6.2\nOS: Ubuntu 16.04\nTensorflow: 1.5.0rc1\nWhen running a session with tf.RunOptions and report_tensor_allocations_upon_oom=True I get the following output at the end of my log.\n\nI am wondering why some entries occur multiple times? How can a single node have multiple allocations? Why are they not summed?\nDoes Remaining 1252 nodes with 98.80MiB mean that all 1252 nodes together use 98.80MiB or each single one uses that amount?\nWhen summing up all values I get 10.607822265625GiB but my free GPU space when starting my program is 11.92GiB so shouldn't there still be enough space??\n\nCurrent usage from device: /job:localhost/replica:0/task:0/device:GPU:0, allocator: GPU_0_bfc\n  250.78MiB from network/convolutions/conv2d_5/Conv2D\n  217.34MiB from network/convolutions/conv2d_5/Conv2D\n  203.75MiB from network/convolutions/conv2d_5/Conv2D\n  192.91MiB from network/convolutions/conv2d_11/Conv2D\n  168.05MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\n  167.19MiB from network/convolutions/conv2d_11/Conv2D\n  163.84MiB from network/convolutions/conv2d_7/Conv2D\n  160.50MiB from network/convolutions/conv2d_7/Conv2D\n  140.99MiB from network/convolutions/conv2d_12/Conv2D\n  133.75MiB from network/convolutions/conv2d_6/Conv2D\n  133.75MiB from network/convolutions/conv2d_7/Conv2D\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\n  133.75MiB from network/convolutions/conv2d_12/Conv2D\n  103.66MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\n  Remaining 1252 nodes with 98.80MiB", "body": "Python: 3.6.2\r\nOS: Ubuntu 16.04\r\nTensorflow: 1.5.0rc1\r\n\r\nWhen running a session with `tf.RunOptions` and `report_tensor_allocations_upon_oom=True` I get the following output at the end of my log.\r\n\r\n1. I am wondering why some entries occur multiple times? How can a single node have multiple allocations? Why are they not summed?\r\n2. Does `Remaining 1252 nodes with 98.80MiB` mean that all 1252 nodes together use 98.80MiB or each single one uses that amount?\r\n3. When summing up all values I get `10.607822265625GiB` but my free GPU space when starting my program is `11.92GiB` so shouldn't there still be enough space??\r\n\r\n```\r\nCurrent usage from device: /job:localhost/replica:0/task:0/device:GPU:0, allocator: GPU_0_bfc\r\n  250.78MiB from network/convolutions/conv2d_5/Conv2D\r\n  217.34MiB from network/convolutions/conv2d_5/Conv2D\r\n  203.75MiB from network/convolutions/conv2d_5/Conv2D\r\n  192.91MiB from network/convolutions/conv2d_11/Conv2D\r\n  168.05MiB from network/convolutions/conv2d_3/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_2/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_3/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_4/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_5/Conv2D\r\n  167.19MiB from network/convolutions/conv2d_11/Conv2D\r\n  163.84MiB from network/convolutions/conv2d_7/Conv2D\r\n  160.50MiB from network/convolutions/conv2d_7/Conv2D\r\n  140.99MiB from network/convolutions/conv2d_12/Conv2D\r\n  133.75MiB from network/convolutions/conv2d_6/Conv2D\r\n  133.75MiB from network/convolutions/conv2d_7/Conv2D\r\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\r\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\r\n  133.75MiB from network/convolutions/conv2d_11/Conv2D\r\n  133.75MiB from network/convolutions/conv2d_12/Conv2D\r\n  103.66MiB from network/convolutions/conv2d_8/Conv2D\r\n  83.59MiB from network/convolutions/conv2d/Conv2D\r\n  83.59MiB from network/convolutions/conv2d/Conv2D\r\n  83.59MiB from network/convolutions/conv2d/Conv2D\r\n  83.59MiB from network/convolutions/conv2d/Conv2D\r\n  83.59MiB from network/convolutions/conv2d/Conv2D\r\n  83.59MiB from network/convolutions/conv2d/Conv2D\r\n  83.59MiB from network/convolutions/conv2d/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\r\n  83.59MiB from network/convolutions/conv2d/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_6/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_7/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_8/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_9/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\r\n  83.59MiB from network/convolutions/conv2d_10/Conv2D\r\n  Remaining 1252 nodes with 98.80MiB\r\n```"}
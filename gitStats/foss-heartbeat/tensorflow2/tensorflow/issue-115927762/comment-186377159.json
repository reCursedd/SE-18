{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/186377159", "html_url": "https://github.com/tensorflow/tensorflow/issues/20#issuecomment-186377159", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20", "id": 186377159, "node_id": "MDEyOklzc3VlQ29tbWVudDE4NjM3NzE1OQ==", "user": {"login": "tboquet", "id": 5553901, "node_id": "MDQ6VXNlcjU1NTM5MDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5553901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tboquet", "html_url": "https://github.com/tboquet", "followers_url": "https://api.github.com/users/tboquet/followers", "following_url": "https://api.github.com/users/tboquet/following{/other_user}", "gists_url": "https://api.github.com/users/tboquet/gists{/gist_id}", "starred_url": "https://api.github.com/users/tboquet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tboquet/subscriptions", "organizations_url": "https://api.github.com/users/tboquet/orgs", "repos_url": "https://api.github.com/users/tboquet/repos", "events_url": "https://api.github.com/users/tboquet/events{/privacy}", "received_events_url": "https://api.github.com/users/tboquet/received_events", "type": "User", "site_admin": false}, "created_at": "2016-02-19T19:53:38Z", "updated_at": "2016-02-19T19:53:38Z", "author_association": "NONE", "body_html": "<p>I have the same problem using a docker container and the nvidia-docker tool with an image based on the <code>cuda:7.5-cudnn4-devel</code> image. I tried to use <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3928300\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/esafak\">@esafak</a> suggestion and I endup with:</p>\n<pre><code>root@9ad6f042d266:/usr/local/cuda/lib64# readlink -f libcudart.so.7.0\n/usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18\n\nroot@9ad6f042d266:/usr/local/cuda/lib64# readlink -f libcudart.so\n/usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18\n</code></pre>\n<p>But i still have:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-c1\">...</span>\n  File <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>/opt/conda/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py<span class=\"pl-pds\">\"</span></span>, line <span class=\"pl-c1\">24</span>, <span class=\"pl-k\">in</span> swig_import_helper\n    _mod <span class=\"pl-k\">=</span> imp.load_module(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>_pywrap_tensorflow<span class=\"pl-pds\">'</span></span>, fp, pathname, description)\n<span class=\"pl-c1\">ImportError</span>: libcudart.so.7.0: cannot <span class=\"pl-c1\">open</span> shared <span class=\"pl-c1\">object</span> <span class=\"pl-v\">file</span>: No such <span class=\"pl-v\">file</span> <span class=\"pl-k\">or</span> directory</pre></div>\n<p>If I run python in <code>/usr/local/cuda/lib64</code> I have errors related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"127390667\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/808\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/808/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/808\">#808</a>:</p>\n<div class=\"highlight highlight-source-python\"><pre>I tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">105</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcublas.so locally\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">105</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcudnn.so locally\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">105</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcufft.so locally\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">99</span>] Couldn<span class=\"pl-s\"><span class=\"pl-pds\">'</span>t open CUDA library libcuda.so. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64:<span class=\"pl-ii\"></span></span>\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>cuda<span class=\"pl-k\">/</span>cuda_diagnostics.cc:<span class=\"pl-c1\">121</span>] hostname: <span class=\"pl-ii\">9ad6f042d266</span>\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>cuda<span class=\"pl-k\">/</span>cuda_diagnostics.cc:<span class=\"pl-c1\">146</span>] libcuda reported version <span class=\"pl-k\">is</span>: Not found: was unable to find libcuda.so <span class=\"pl-c1\">DSO</span> loaded into this program\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>cuda<span class=\"pl-k\">/</span>cuda_diagnostics.cc:<span class=\"pl-c1\">257</span>] driver version <span class=\"pl-v\">file</span> contents: <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span>NVRM version: NVIDIA UNIX x86_64 Kernel Module  352.63  Sat Nov  7 21:25:42 PST 2015</span>\n<span class=\"pl-s\">GCC version:  gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04)</span>\n<span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span></span>\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>cuda<span class=\"pl-k\">/</span>cuda_diagnostics.cc:<span class=\"pl-c1\">150</span>] kernel reported version <span class=\"pl-k\">is</span>: <span class=\"pl-c1\">352.63</span>\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>cuda<span class=\"pl-k\">/</span>cuda_gpu_executor.cc:<span class=\"pl-c1\">1051</span>] <span class=\"pl-c1\">LD_LIBRARY_PATH</span>: <span class=\"pl-k\">/</span>usr<span class=\"pl-k\">/</span>local<span class=\"pl-k\">/</span>nvidia<span class=\"pl-k\">/</span>lib:<span class=\"pl-k\">/</span>usr<span class=\"pl-k\">/</span>local<span class=\"pl-k\">/</span>nvidia<span class=\"pl-k\">/</span>lib64:\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>cuda<span class=\"pl-k\">/</span>cuda_gpu_executor.cc:<span class=\"pl-c1\">1052</span>] failed to find libcuda.so on this system: Failed precondition: could <span class=\"pl-k\">not</span> dlopen <span class=\"pl-c1\">DSO</span>: libcuda.so; dlerror: libcuda.so: cannot <span class=\"pl-c1\">open</span> shared <span class=\"pl-c1\">object</span> <span class=\"pl-v\">file</span>: No such <span class=\"pl-v\">file</span> <span class=\"pl-k\">or</span> directory\nI tensorflow<span class=\"pl-k\">/</span>stream_executor<span class=\"pl-k\">/</span>dso_loader.cc:<span class=\"pl-c1\">105</span>] successfully opened <span class=\"pl-c1\">CUDA</span> library libcurand.so locally</pre></div>\n<p>Did you manage to find the problem?</p>\n<p>Tx!</p>", "body_text": "I have the same problem using a docker container and the nvidia-docker tool with an image based on the cuda:7.5-cudnn4-devel image. I tried to use @esafak suggestion and I endup with:\nroot@9ad6f042d266:/usr/local/cuda/lib64# readlink -f libcudart.so.7.0\n/usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18\n\nroot@9ad6f042d266:/usr/local/cuda/lib64# readlink -f libcudart.so\n/usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18\n\nBut i still have:\n...\n  File \"/opt/conda/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\nImportError: libcudart.so.7.0: cannot open shared object file: No such file or directory\nIf I run python in /usr/local/cuda/lib64 I have errors related to #808:\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcuda.so. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64:\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:121] hostname: 9ad6f042d266\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:146] libcuda reported version is: Not found: was unable to find libcuda.so DSO loaded into this program\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:257] driver version file contents: \"\"\"NVRM version: NVIDIA UNIX x86_64 Kernel Module  352.63  Sat Nov  7 21:25:42 PST 2015\nGCC version:  gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04)\n\"\"\"\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:150] kernel reported version is: 352.63\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1051] LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64:\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1052] failed to find libcuda.so on this system: Failed precondition: could not dlopen DSO: libcuda.so; dlerror: libcuda.so: cannot open shared object file: No such file or directory\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\nDid you manage to find the problem?\nTx!", "body": "I have the same problem using a docker container and the nvidia-docker tool with an image based on the `cuda:7.5-cudnn4-devel` image. I tried to use @esafak suggestion and I endup with:\n\n```\nroot@9ad6f042d266:/usr/local/cuda/lib64# readlink -f libcudart.so.7.0\n/usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18\n\nroot@9ad6f042d266:/usr/local/cuda/lib64# readlink -f libcudart.so\n/usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18\n```\n\nBut i still have:\n\n``` python\n...\n  File \"/opt/conda/lib/python2.7/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\nImportError: libcudart.so.7.0: cannot open shared object file: No such file or directory\n```\n\nIf I run python in `/usr/local/cuda/lib64` I have errors related to #808:\n\n``` python\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:99] Couldn't open CUDA library libcuda.so. LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64:\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:121] hostname: 9ad6f042d266\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:146] libcuda reported version is: Not found: was unable to find libcuda.so DSO loaded into this program\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:257] driver version file contents: \"\"\"NVRM version: NVIDIA UNIX x86_64 Kernel Module  352.63  Sat Nov  7 21:25:42 PST 2015\nGCC version:  gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04)\n\"\"\"\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:150] kernel reported version is: 352.63\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1051] LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64:\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1052] failed to find libcuda.so on this system: Failed precondition: could not dlopen DSO: libcuda.so; dlerror: libcuda.so: cannot open shared object file: No such file or directory\nI tensorflow/stream_executor/dso_loader.cc:105] successfully opened CUDA library libcurand.so locally\n```\n\nDid you manage to find the problem?\n\nTx!\n"}
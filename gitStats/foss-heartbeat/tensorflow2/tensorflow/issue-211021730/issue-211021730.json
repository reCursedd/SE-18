{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7966", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7966/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7966/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7966/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7966", "id": 211021730, "node_id": "MDU6SXNzdWUyMTEwMjE3MzA=", "number": 7966, "title": "Compile TensorFlow 1.0 on Windows 10 for Python 3.6 (Anaconda) cause compile issues", "user": {"login": "pavelbulanov", "id": 14073667, "node_id": "MDQ6VXNlcjE0MDczNjY3", "avatar_url": "https://avatars0.githubusercontent.com/u/14073667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavelbulanov", "html_url": "https://github.com/pavelbulanov", "followers_url": "https://api.github.com/users/pavelbulanov/followers", "following_url": "https://api.github.com/users/pavelbulanov/following{/other_user}", "gists_url": "https://api.github.com/users/pavelbulanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavelbulanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavelbulanov/subscriptions", "organizations_url": "https://api.github.com/users/pavelbulanov/orgs", "repos_url": "https://api.github.com/users/pavelbulanov/repos", "events_url": "https://api.github.com/users/pavelbulanov/events{/privacy}", "received_events_url": "https://api.github.com/users/pavelbulanov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-03-01T09:20:16Z", "updated_at": "2018-02-08T00:45:28Z", "closed_at": "2018-02-08T00:45:28Z", "author_association": "CONTRIBUTOR", "body_html": "<p>As per agreement in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"202337276\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6999\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6999/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6999\">#6999</a> <a href=\"https://github.com/tensorflow/tensorflow/issues/6999#issuecomment-280749568\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6999/hovercard\">specific comment</a>, I'm creating a new issue for compilation errors for TF 1.0 under Windows for Python 3.6</p>\n<p><strong>Pre-requisites:</strong><br>\nWindows 10 v.14986<br>\nPython 3.6 64 bit (Anaconda 4.3)<br>\ngit version 2.11.0.windows.1<br>\nVisual Studio Build Tools (called \"Build Tools for Visual Studio 2017 RC\" in the <a href=\"https://www.visualstudio.com/downloads/#build-tools-for-visual-studio-2017-rc\" rel=\"nofollow\">download</a> section)<br>\ncmake-3.8.0-rc1 and swigwin-3.0.12 (just downloaded latest version at that moment)<br>\nTensorFlow 1.0.0 from source (master branch from github)</p>\n<p><strong>Reproduction</strong>. I followed <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/README.md\">instruction</a> for CMake just running two commands - CMake first and MSBuild second.</p>\n<p>To compile, I made two changes in sources. I found them based on compilation errors.<br>\nOne was adding <code>#include &lt;intrin.h&gt;</code> to <code>tensorflow\\core\\platform\\windows\\cpu_info.h</code> inside of <code>#ifndef</code> block because of the following error:</p>\n<blockquote>\n<p>error C3861: '__cpuidex': identifier not found</p>\n</blockquote>\n<p>I found <a href=\"https://github.com/tensorflow/tensorflow/commit/a672cb166dae93ae955c1d38f3de8903dd242373\">commit</a> introduced usage of <code>__cpuidex</code> function. Based on <a href=\"https://msdn.microsoft.com/en-us/library/hskdteyh.aspx\" rel=\"nofollow\">this</a> MSDN link, I discovered that Header file <code>&lt;intrin.h&gt;</code> has to be included.  That's why I put it inside <code>cpu_info.h</code> (not sure if it's exactly perfect place).</p>\n<p><strong>Second issue</strong> was commenting out procedures <code>_mm256_extract_epi32</code> and <code>_mm256_insert_epi32</code> in <code>tensorflow\\core\\platform\\windows\\intrinsics_port.h</code> due to error</p>\n<blockquote>\n<p>error C2169: '_mm256_extract_epi32': intrinsic function, cannot be defined</p>\n</blockquote>\n<p>The second issue with <code>_mm256_extract_epi32</code> may be connected with the same reason, I don't know.<br>\nIn the meantime, <code>platform/windows/intrinsics_port.h</code> <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/windows/intrinsics_port.h#L22\">references</a> <code>immintrin.h</code>, but I don't see it's actually included anywhere. I assume it may correlate with <code>instrih.h</code> inclusion (based on <a href=\"https://msdn.microsoft.com/en-us/library/26td21ds.aspx\" rel=\"nofollow\">this</a> link). Meanwhile, <code>_mm256_extract_epi32 </code>can be found in <code>avxintrin.h</code> which may be is included by <code>immintrin.h</code>.</p>\n<blockquote>\n<p>// the following avx intrinsics are not defined on windows<br>\n// in immintrin.h so we define them here.</p>\n</blockquote>\n<p>After fixing those two issues, that, I was able to successfully run</p>\n<blockquote>\n<p>MSBuild /p:Configuration=Release tf_python_build_pip_package.vcxproj</p>\n</blockquote>\n<p>Which gave me <code>tensorflow-1.0.0-cp36-cp36m-win_amd64.whl</code>, that I successfully installed into Python using <code>pip</code>. It seems to be working - I was able to run couple of jupyter notebooks, including udacity assignments.</p>\n<p>BTW, compilation took about 2-3 hours on my week laptop (i5-4200U).</p>", "body_text": "As per agreement in #6999 specific comment, I'm creating a new issue for compilation errors for TF 1.0 under Windows for Python 3.6\nPre-requisites:\nWindows 10 v.14986\nPython 3.6 64 bit (Anaconda 4.3)\ngit version 2.11.0.windows.1\nVisual Studio Build Tools (called \"Build Tools for Visual Studio 2017 RC\" in the download section)\ncmake-3.8.0-rc1 and swigwin-3.0.12 (just downloaded latest version at that moment)\nTensorFlow 1.0.0 from source (master branch from github)\nReproduction. I followed instruction for CMake just running two commands - CMake first and MSBuild second.\nTo compile, I made two changes in sources. I found them based on compilation errors.\nOne was adding #include <intrin.h> to tensorflow\\core\\platform\\windows\\cpu_info.h inside of #ifndef block because of the following error:\n\nerror C3861: '__cpuidex': identifier not found\n\nI found commit introduced usage of __cpuidex function. Based on this MSDN link, I discovered that Header file <intrin.h> has to be included.  That's why I put it inside cpu_info.h (not sure if it's exactly perfect place).\nSecond issue was commenting out procedures _mm256_extract_epi32 and _mm256_insert_epi32 in tensorflow\\core\\platform\\windows\\intrinsics_port.h due to error\n\nerror C2169: '_mm256_extract_epi32': intrinsic function, cannot be defined\n\nThe second issue with _mm256_extract_epi32 may be connected with the same reason, I don't know.\nIn the meantime, platform/windows/intrinsics_port.h references immintrin.h, but I don't see it's actually included anywhere. I assume it may correlate with instrih.h inclusion (based on this link). Meanwhile, _mm256_extract_epi32 can be found in avxintrin.h which may be is included by immintrin.h.\n\n// the following avx intrinsics are not defined on windows\n// in immintrin.h so we define them here.\n\nAfter fixing those two issues, that, I was able to successfully run\n\nMSBuild /p:Configuration=Release tf_python_build_pip_package.vcxproj\n\nWhich gave me tensorflow-1.0.0-cp36-cp36m-win_amd64.whl, that I successfully installed into Python using pip. It seems to be working - I was able to run couple of jupyter notebooks, including udacity assignments.\nBTW, compilation took about 2-3 hours on my week laptop (i5-4200U).", "body": "As per agreement in #6999 [specific comment](https://github.com/tensorflow/tensorflow/issues/6999#issuecomment-280749568), I'm creating a new issue for compilation errors for TF 1.0 under Windows for Python 3.6\r\n\r\n**Pre-requisites:**\r\nWindows 10 v.14986\r\nPython 3.6 64 bit (Anaconda 4.3)\r\ngit version 2.11.0.windows.1\r\nVisual Studio Build Tools (called \"Build Tools for Visual Studio 2017 RC\" in the [download](https://www.visualstudio.com/downloads/#build-tools-for-visual-studio-2017-rc) section)\r\ncmake-3.8.0-rc1 and swigwin-3.0.12 (just downloaded latest version at that moment)\r\nTensorFlow 1.0.0 from source (master branch from github)\r\n\r\n**Reproduction**. I followed [instruction](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/README.md) for CMake just running two commands - CMake first and MSBuild second.\r\n\r\nTo compile, I made two changes in sources. I found them based on compilation errors.\r\nOne was adding `#include <intrin.h>` to `tensorflow\\core\\platform\\windows\\cpu_info.h` inside of `#ifndef` block because of the following error:\r\n> error C3861: '__cpuidex': identifier not found \r\n\r\nI found [commit](https://github.com/tensorflow/tensorflow/commit/a672cb166dae93ae955c1d38f3de8903dd242373) introduced usage of `__cpuidex` function. Based on [this](https://msdn.microsoft.com/en-us/library/hskdteyh.aspx) MSDN link, I discovered that Header file `<intrin.h>` has to be included.  That's why I put it inside `cpu_info.h` (not sure if it's exactly perfect place).\r\n\r\n**Second issue** was commenting out procedures `_mm256_extract_epi32` and `_mm256_insert_epi32` in `tensorflow\\core\\platform\\windows\\intrinsics_port.h` due to error\r\n\r\n> error C2169: '_mm256_extract_epi32': intrinsic function, cannot be defined \r\n\r\nThe second issue with `_mm256_extract_epi32` may be connected with the same reason, I don't know. \r\nIn the meantime, `platform/windows/intrinsics_port.h` [references](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/windows/intrinsics_port.h#L22) `immintrin.h`, but I don't see it's actually included anywhere. I assume it may correlate with `instrih.h` inclusion (based on [this](https://msdn.microsoft.com/en-us/library/26td21ds.aspx) link). Meanwhile, `_mm256_extract_epi32 `can be found in `avxintrin.h` which may be is included by `immintrin.h`.\r\n\r\n> // the following avx intrinsics are not defined on windows\r\n> // in immintrin.h so we define them here.\r\n\r\nAfter fixing those two issues, that, I was able to successfully run\r\n> MSBuild /p:Configuration=Release tf_python_build_pip_package.vcxproj\r\n\r\nWhich gave me `tensorflow-1.0.0-cp36-cp36m-win_amd64.whl`, that I successfully installed into Python using `pip`. It seems to be working - I was able to run couple of jupyter notebooks, including udacity assignments.\r\n\r\nBTW, compilation took about 2-3 hours on my week laptop (i5-4200U)."}
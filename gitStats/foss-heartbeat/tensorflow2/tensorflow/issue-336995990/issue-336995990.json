{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20414", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20414/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20414/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20414/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20414", "id": 336995990, "node_id": "MDU6SXNzdWUzMzY5OTU5OTA=", "number": 20414, "title": "cuDevicePrimaryCtxRetain: CUDA_ERROR_INVALID_DEVICE ... Failed to create session", "user": {"login": "MounirB", "id": 7119095, "node_id": "MDQ6VXNlcjcxMTkwOTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7119095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MounirB", "html_url": "https://github.com/MounirB", "followers_url": "https://api.github.com/users/MounirB/followers", "following_url": "https://api.github.com/users/MounirB/following{/other_user}", "gists_url": "https://api.github.com/users/MounirB/gists{/gist_id}", "starred_url": "https://api.github.com/users/MounirB/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MounirB/subscriptions", "organizations_url": "https://api.github.com/users/MounirB/orgs", "repos_url": "https://api.github.com/users/MounirB/repos", "events_url": "https://api.github.com/users/MounirB/events{/privacy}", "received_events_url": "https://api.github.com/users/MounirB/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "robieta", "id": 13089297, "node_id": "MDQ6VXNlcjEzMDg5Mjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/13089297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robieta", "html_url": "https://github.com/robieta", "followers_url": "https://api.github.com/users/robieta/followers", "following_url": "https://api.github.com/users/robieta/following{/other_user}", "gists_url": "https://api.github.com/users/robieta/gists{/gist_id}", "starred_url": "https://api.github.com/users/robieta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robieta/subscriptions", "organizations_url": "https://api.github.com/users/robieta/orgs", "repos_url": "https://api.github.com/users/robieta/repos", "events_url": "https://api.github.com/users/robieta/events{/privacy}", "received_events_url": "https://api.github.com/users/robieta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "robieta", "id": 13089297, "node_id": "MDQ6VXNlcjEzMDg5Mjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/13089297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robieta", "html_url": "https://github.com/robieta", "followers_url": "https://api.github.com/users/robieta/followers", "following_url": "https://api.github.com/users/robieta/following{/other_user}", "gists_url": "https://api.github.com/users/robieta/gists{/gist_id}", "starred_url": "https://api.github.com/users/robieta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robieta/subscriptions", "organizations_url": "https://api.github.com/users/robieta/orgs", "repos_url": "https://api.github.com/users/robieta/repos", "events_url": "https://api.github.com/users/robieta/events{/privacy}", "received_events_url": "https://api.github.com/users/robieta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-06-29T13:19:30Z", "updated_at": "2018-09-19T16:21:57Z", "closed_at": "2018-09-19T16:21:57Z", "author_association": "NONE", "body_html": "<p>Hello everyone, when I execute this code :</p>\n<pre><code>import tensorflow as tf\nhello = tf.constant('hi,tensorflow')\nsess = tf.Session()\n</code></pre>\n<p>I get each time the same error :</p>\n<pre><code>2018-06-29 15:14:01.587077: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow bhis actinary was not compiled to use: AVX2 FMA\n2018-06-29 15:14:01.694678: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2018-06-29 15:14:01.695507: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties: \nname: Quadro P400 major: 6 minor: 1 memoryClockRate(GHz): 1.2525\npciBusID: 0000:05:00.0\ntotalMemory: 1.95GiB freeMemory: 1.92GiB\n2018-06-29 15:14:01.715820: E tensorflow/core/common_runtime/direct_session.cc:154] Internal: failed initializing StreamExecutor for CUDA device ordinal 1: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_INVALID_DEVICE\nTraceback (most recent call last):\n  File \"/home/mounir/PycharmProjects/ssd_keras-master/ssd512_inference.py\", line 6, in &lt;module&gt;\n    sess = tf.Session()\n  File \"/home/mounir/anaconda3/envs/gpukeras/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1560, in __init__\n    super(Session, self).__init__(target, graph, config=config)\n  File \"/home/mounir/anaconda3/envs/gpukeras/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 633, in __init__\n    self._session = tf_session.TF_NewSession(self._graph._c_graph, opts)\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.\n\n</code></pre>\n<p>I have two GPUs in my computer, the P400 is the most powerful one.<br>\nI tried to troubleshoot it by adding to .bashrc export CUDA_VISIBLE_DEVICES with alternatively these values =0, =1, =0,1, but it outputs always the same error</p>\n<p><strong>Have I written custom code :</strong></p>\n<pre><code>import tensorflow as tf\nhello = tf.constant('hi,tensorflow')\nsess = tf.Session()\n</code></pre>\n<p><strong>OS Platform and Distribution</strong> :  Linux, Ubuntu 18.04<br>\n<strong>TensorFlow installed from</strong> : PyPI<br>\n<strong>TensorFlow version</strong> 1.8.0<br>\n<strong>Bazel version</strong> Seems not installed<br>\n<strong>CUDA/cuDNN version</strong> Cudatoolkit installed within the virtual env is 9.0 and Cuda installed within the system is 9.1<br>\n<strong>GPU model and memory</strong> P400 Quadro, 2 GB<br>\n<strong>Exact command to reproduce</strong></p>\n<pre><code>import tensorflow as tf\nhello = tf.constant('hi,tensorflow')\nsess = tf.Session()\n</code></pre>", "body_text": "Hello everyone, when I execute this code :\nimport tensorflow as tf\nhello = tf.constant('hi,tensorflow')\nsess = tf.Session()\n\nI get each time the same error :\n2018-06-29 15:14:01.587077: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow bhis actinary was not compiled to use: AVX2 FMA\n2018-06-29 15:14:01.694678: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2018-06-29 15:14:01.695507: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties: \nname: Quadro P400 major: 6 minor: 1 memoryClockRate(GHz): 1.2525\npciBusID: 0000:05:00.0\ntotalMemory: 1.95GiB freeMemory: 1.92GiB\n2018-06-29 15:14:01.715820: E tensorflow/core/common_runtime/direct_session.cc:154] Internal: failed initializing StreamExecutor for CUDA device ordinal 1: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_INVALID_DEVICE\nTraceback (most recent call last):\n  File \"/home/mounir/PycharmProjects/ssd_keras-master/ssd512_inference.py\", line 6, in <module>\n    sess = tf.Session()\n  File \"/home/mounir/anaconda3/envs/gpukeras/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1560, in __init__\n    super(Session, self).__init__(target, graph, config=config)\n  File \"/home/mounir/anaconda3/envs/gpukeras/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 633, in __init__\n    self._session = tf_session.TF_NewSession(self._graph._c_graph, opts)\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.\n\n\nI have two GPUs in my computer, the P400 is the most powerful one.\nI tried to troubleshoot it by adding to .bashrc export CUDA_VISIBLE_DEVICES with alternatively these values =0, =1, =0,1, but it outputs always the same error\nHave I written custom code :\nimport tensorflow as tf\nhello = tf.constant('hi,tensorflow')\nsess = tf.Session()\n\nOS Platform and Distribution :  Linux, Ubuntu 18.04\nTensorFlow installed from : PyPI\nTensorFlow version 1.8.0\nBazel version Seems not installed\nCUDA/cuDNN version Cudatoolkit installed within the virtual env is 9.0 and Cuda installed within the system is 9.1\nGPU model and memory P400 Quadro, 2 GB\nExact command to reproduce\nimport tensorflow as tf\nhello = tf.constant('hi,tensorflow')\nsess = tf.Session()", "body": "Hello everyone, when I execute this code :\r\n\r\n```\r\nimport tensorflow as tf\r\nhello = tf.constant('hi,tensorflow')\r\nsess = tf.Session()\r\n```\r\n\r\nI get each time the same error :\r\n\r\n```\r\n2018-06-29 15:14:01.587077: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow bhis actinary was not compiled to use: AVX2 FMA\r\n2018-06-29 15:14:01.694678: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2018-06-29 15:14:01.695507: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties: \r\nname: Quadro P400 major: 6 minor: 1 memoryClockRate(GHz): 1.2525\r\npciBusID: 0000:05:00.0\r\ntotalMemory: 1.95GiB freeMemory: 1.92GiB\r\n2018-06-29 15:14:01.715820: E tensorflow/core/common_runtime/direct_session.cc:154] Internal: failed initializing StreamExecutor for CUDA device ordinal 1: Internal: failed call to cuDevicePrimaryCtxRetain: CUDA_ERROR_INVALID_DEVICE\r\nTraceback (most recent call last):\r\n  File \"/home/mounir/PycharmProjects/ssd_keras-master/ssd512_inference.py\", line 6, in <module>\r\n    sess = tf.Session()\r\n  File \"/home/mounir/anaconda3/envs/gpukeras/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1560, in __init__\r\n    super(Session, self).__init__(target, graph, config=config)\r\n  File \"/home/mounir/anaconda3/envs/gpukeras/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 633, in __init__\r\n    self._session = tf_session.TF_NewSession(self._graph._c_graph, opts)\r\ntensorflow.python.framework.errors_impl.InternalError: Failed to create session.\r\n\r\n```\r\nI have two GPUs in my computer, the P400 is the most powerful one.\r\nI tried to troubleshoot it by adding to .bashrc export CUDA_VISIBLE_DEVICES with alternatively these values =0, =1, =0,1, but it outputs always the same error\r\n\r\n\r\n**Have I written custom code :** \r\n```\r\nimport tensorflow as tf\r\nhello = tf.constant('hi,tensorflow')\r\nsess = tf.Session()\r\n```\r\n**OS Platform and Distribution** :  Linux, Ubuntu 18.04 \r\n**TensorFlow installed from** : PyPI\r\n**TensorFlow version** 1.8.0\r\n**Bazel version** Seems not installed\r\n**CUDA/cuDNN version** Cudatoolkit installed within the virtual env is 9.0 and Cuda installed within the system is 9.1\r\n**GPU model and memory** P400 Quadro, 2 GB\r\n**Exact command to reproduce** \r\n```\r\nimport tensorflow as tf\r\nhello = tf.constant('hi,tensorflow')\r\nsess = tf.Session()\r\n```\r\n"}
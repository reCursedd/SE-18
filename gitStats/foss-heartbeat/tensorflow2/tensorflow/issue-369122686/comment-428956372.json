{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/428956372", "html_url": "https://github.com/tensorflow/tensorflow/issues/22899#issuecomment-428956372", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22899", "id": 428956372, "node_id": "MDEyOklzc3VlQ29tbWVudDQyODk1NjM3Mg==", "user": {"login": "xiaohu2015", "id": 16861194, "node_id": "MDQ6VXNlcjE2ODYxMTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/16861194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaohu2015", "html_url": "https://github.com/xiaohu2015", "followers_url": "https://api.github.com/users/xiaohu2015/followers", "following_url": "https://api.github.com/users/xiaohu2015/following{/other_user}", "gists_url": "https://api.github.com/users/xiaohu2015/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaohu2015/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaohu2015/subscriptions", "organizations_url": "https://api.github.com/users/xiaohu2015/orgs", "repos_url": "https://api.github.com/users/xiaohu2015/repos", "events_url": "https://api.github.com/users/xiaohu2015/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaohu2015/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-11T13:31:59Z", "updated_at": "2018-10-11T13:31:59Z", "author_association": "NONE", "body_html": "<p>Calling model_fn.<br>\nINFO:tensorflow:batch_all_reduce invoked for batches size = 158 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10<br>\nINFO:tensorflow:Error reported to Coordinator: libnccl.so.2: cannot open shared object file: No such file or directory<br>\nTraceback (most recent call last):<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception<br>\nyield<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower<br>\n**merge_kwargs)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 659, in _distributed_apply<br>\nvariable_scope.VariableAggregation.SUM, grads_and_vars)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/distribute.py\", line 773, in batch_reduce<br>\nreturn self._batch_reduce(aggregation, value_destination_pairs)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 620, in _batch_reduce<br>\nvalue_destination_pairs)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce<br>\nreturn self._batch_reduce(aggregation, value_destination_pairs)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 597, in _batch_reduce<br>\n[v[0] for v in value_destination_pairs])<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 631, in _batch_all_reduce<br>\ndevice_grad_packs)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_utils.py\", line 41, in aggregate_gradients_using_nccl<br>\nagg_grads = nccl.all_sum(single_grads)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 49, in all_sum<br>\nreturn _apply_all_reduce('sum', tensors)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 217, in _apply_all_reduce<br>\n_validate_and_load_nccl_so()<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 288, in _validate_and_load_nccl_so<br>\n_maybe_load_nccl_ops_so()<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 274, in _maybe_load_nccl_ops_so<br>\nresource_loader.get_path_to_datafile('_nccl_ops.so'))<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/util/loader.py\", line 56, in load_op_library<br>\nret = load_library.load_op_library(path)<br>\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/load_library.py\", line 56, in load_op_library<br>\nlib_handle = py_tf.TF_LoadLibrary(library_filename)<br>\nNotFoundError: libnccl.so.2: cannot open shared object file: No such file or directory</p>", "body_text": "Calling model_fn.\nINFO:tensorflow:batch_all_reduce invoked for batches size = 158 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\nINFO:tensorflow:Error reported to Coordinator: libnccl.so.2: cannot open shared object file: No such file or directory\nTraceback (most recent call last):\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\nyield\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower\n**merge_kwargs)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 659, in _distributed_apply\nvariable_scope.VariableAggregation.SUM, grads_and_vars)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/distribute.py\", line 773, in batch_reduce\nreturn self._batch_reduce(aggregation, value_destination_pairs)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 620, in _batch_reduce\nvalue_destination_pairs)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce\nreturn self._batch_reduce(aggregation, value_destination_pairs)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 597, in _batch_reduce\n[v[0] for v in value_destination_pairs])\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 631, in _batch_all_reduce\ndevice_grad_packs)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_utils.py\", line 41, in aggregate_gradients_using_nccl\nagg_grads = nccl.all_sum(single_grads)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 49, in all_sum\nreturn _apply_all_reduce('sum', tensors)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 217, in _apply_all_reduce\n_validate_and_load_nccl_so()\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 288, in _validate_and_load_nccl_so\n_maybe_load_nccl_ops_so()\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 274, in _maybe_load_nccl_ops_so\nresource_loader.get_path_to_datafile('_nccl_ops.so'))\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/util/loader.py\", line 56, in load_op_library\nret = load_library.load_op_library(path)\nFile \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/load_library.py\", line 56, in load_op_library\nlib_handle = py_tf.TF_LoadLibrary(library_filename)\nNotFoundError: libnccl.so.2: cannot open shared object file: No such file or directory", "body": "Calling model_fn.\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 158 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:Error reported to Coordinator: libnccl.so.2: cannot open shared object file: No such file or directory\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 177, in _call_for_each_tower\r\n    **merge_kwargs)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/optimizer.py\", line 659, in _distributed_apply\r\n    variable_scope.VariableAggregation.SUM, grads_and_vars)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/distribute.py\", line 773, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 620, in _batch_reduce\r\n    value_destination_pairs)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 243, in batch_reduce\r\n    return self._batch_reduce(aggregation, value_destination_pairs)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 597, in _batch_reduce\r\n    [v[0] for v in value_destination_pairs])\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_ops.py\", line 631, in _batch_all_reduce\r\n    device_grad_packs)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/cross_tower_utils.py\", line 41, in aggregate_gradients_using_nccl\r\n    agg_grads = nccl.all_sum(single_grads)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 49, in all_sum\r\n    return _apply_all_reduce('sum', tensors)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 217, in _apply_all_reduce\r\n    _validate_and_load_nccl_so()\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 288, in _validate_and_load_nccl_so\r\n    _maybe_load_nccl_ops_so()\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/nccl/python/ops/nccl_ops.py\", line 274, in _maybe_load_nccl_ops_so\r\n    resource_loader.get_path_to_datafile('_nccl_ops.so'))\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/contrib/util/loader.py\", line 56, in load_op_library\r\n    ret = load_library.load_op_library(path)\r\n  File \"/root/anaconda2/lib/python2.7/site-packages/tensorflow/python/framework/load_library.py\", line 56, in load_op_library\r\n    lib_handle = py_tf.TF_LoadLibrary(library_filename)\r\nNotFoundError: libnccl.so.2: cannot open shared object file: No such file or directory\r\n"}
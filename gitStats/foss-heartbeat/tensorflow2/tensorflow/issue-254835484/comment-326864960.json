{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/326864960", "html_url": "https://github.com/tensorflow/tensorflow/issues/12772#issuecomment-326864960", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12772", "id": 326864960, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjg2NDk2MA==", "user": {"login": "raginisharma14", "id": 21701931, "node_id": "MDQ6VXNlcjIxNzAxOTMx", "avatar_url": "https://avatars1.githubusercontent.com/u/21701931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raginisharma14", "html_url": "https://github.com/raginisharma14", "followers_url": "https://api.github.com/users/raginisharma14/followers", "following_url": "https://api.github.com/users/raginisharma14/following{/other_user}", "gists_url": "https://api.github.com/users/raginisharma14/gists{/gist_id}", "starred_url": "https://api.github.com/users/raginisharma14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raginisharma14/subscriptions", "organizations_url": "https://api.github.com/users/raginisharma14/orgs", "repos_url": "https://api.github.com/users/raginisharma14/repos", "events_url": "https://api.github.com/users/raginisharma14/events{/privacy}", "received_events_url": "https://api.github.com/users/raginisharma14/received_events", "type": "User", "site_admin": false}, "created_at": "2017-09-04T04:45:36Z", "updated_at": "2017-09-04T04:49:16Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1112263\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/facaiy\">@facaiy</a> : Here is what I am trying to do: 1. I am applying pruning on to the weights of each layer and then multiplying the pruned weights(boolean matrix) with the computed gradients  so that I get pruned gradients. Now I convert the pruned gradients to a sparse tensor(using tf.IndexedSlices). After this, I would apply these pruned gradients. In tensorflow, while applying gradients you can either pass sparse gradients or dense.  But while the scatter_sub is called it is throwing error  Shapes must be equal rank, but are 1 and 5 for 'GradientDescent_1/update_conv1_1/weights/ScatterSub' (op: 'ScatterSub') with input shapes: [3,3,3,64], [?,4], [?]<br>\nIt's failing while calling scatter_sub in the below line<br>\n<a href=\"https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/training/gradient_descent.py#L67\">https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/training/gradient_descent.py#L67</a></p>", "body_text": "@facaiy : Here is what I am trying to do: 1. I am applying pruning on to the weights of each layer and then multiplying the pruned weights(boolean matrix) with the computed gradients  so that I get pruned gradients. Now I convert the pruned gradients to a sparse tensor(using tf.IndexedSlices). After this, I would apply these pruned gradients. In tensorflow, while applying gradients you can either pass sparse gradients or dense.  But while the scatter_sub is called it is throwing error  Shapes must be equal rank, but are 1 and 5 for 'GradientDescent_1/update_conv1_1/weights/ScatterSub' (op: 'ScatterSub') with input shapes: [3,3,3,64], [?,4], [?]\nIt's failing while calling scatter_sub in the below line\nhttps://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/training/gradient_descent.py#L67", "body": "@facaiy : Here is what I am trying to do: 1. I am applying pruning on to the weights of each layer and then multiplying the pruned weights(boolean matrix) with the computed gradients  so that I get pruned gradients. Now I convert the pruned gradients to a sparse tensor(using tf.IndexedSlices). After this, I would apply these pruned gradients. In tensorflow, while applying gradients you can either pass sparse gradients or dense.  But while the scatter_sub is called it is throwing error  Shapes must be equal rank, but are 1 and 5 for 'GradientDescent_1/update_conv1_1/weights/ScatterSub' (op: 'ScatterSub') with input shapes: [3,3,3,64], [?,4], [?]\r\nIt's failing while calling scatter_sub in the below line\r\nhttps://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/training/gradient_descent.py#L67"}
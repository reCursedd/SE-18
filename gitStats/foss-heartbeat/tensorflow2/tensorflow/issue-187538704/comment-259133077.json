{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/259133077", "html_url": "https://github.com/tensorflow/tensorflow/issues/5422#issuecomment-259133077", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5422", "id": 259133077, "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTEzMzA3Nw==", "user": {"login": "CCXD", "id": 12113428, "node_id": "MDQ6VXNlcjEyMTEzNDI4", "avatar_url": "https://avatars1.githubusercontent.com/u/12113428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CCXD", "html_url": "https://github.com/CCXD", "followers_url": "https://api.github.com/users/CCXD/followers", "following_url": "https://api.github.com/users/CCXD/following{/other_user}", "gists_url": "https://api.github.com/users/CCXD/gists{/gist_id}", "starred_url": "https://api.github.com/users/CCXD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CCXD/subscriptions", "organizations_url": "https://api.github.com/users/CCXD/orgs", "repos_url": "https://api.github.com/users/CCXD/repos", "events_url": "https://api.github.com/users/CCXD/events{/privacy}", "received_events_url": "https://api.github.com/users/CCXD/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-08T13:14:45Z", "updated_at": "2016-11-08T13:18:01Z", "author_association": "NONE", "body_html": "<p>MLP MNIST with native TF:</p>\n<pre><code>Mean epoch time: 1.82s\n~20-45% gpu util\n</code></pre>\n<p>Keras with TF backend and native TF code:</p>\n<pre><code>Mean epoch time: 1.94s\n~20-45% gpu util\n</code></pre>\n<p>Keras with TF backend and Keras sequential model:</p>\n<pre><code>Mean epoch time: 3.22s\n~30% gpu util\n</code></pre>\n<p>Keras with Theano backend and Keras sequential model <strong>without cnmem</strong>:</p>\n<pre><code>Mean epoch time: 4.86s\n~20% gpu util\n</code></pre>\n<p>Keras with Theano backend and Keras sequential model <strong>with cnmem 90%</strong>:</p>\n<pre><code>Mean epoch time: 1.45s\n~80% gpu util\n</code></pre>\n<p>On a Tesla K20, using the same dataset (55000, 784)</p>\n<p>Looks like Keras' sequential model is just slowing things down, and if you use Tensorflow's native code within Keras, the performance decrease is negligible. Also cnmem results in a huge performance boost.</p>", "body_text": "MLP MNIST with native TF:\nMean epoch time: 1.82s\n~20-45% gpu util\n\nKeras with TF backend and native TF code:\nMean epoch time: 1.94s\n~20-45% gpu util\n\nKeras with TF backend and Keras sequential model:\nMean epoch time: 3.22s\n~30% gpu util\n\nKeras with Theano backend and Keras sequential model without cnmem:\nMean epoch time: 4.86s\n~20% gpu util\n\nKeras with Theano backend and Keras sequential model with cnmem 90%:\nMean epoch time: 1.45s\n~80% gpu util\n\nOn a Tesla K20, using the same dataset (55000, 784)\nLooks like Keras' sequential model is just slowing things down, and if you use Tensorflow's native code within Keras, the performance decrease is negligible. Also cnmem results in a huge performance boost.", "body": "MLP MNIST with native TF:\n\n```\nMean epoch time: 1.82s\n~20-45% gpu util\n```\n\nKeras with TF backend and native TF code:\n\n```\nMean epoch time: 1.94s\n~20-45% gpu util\n```\n\nKeras with TF backend and Keras sequential model:\n\n```\nMean epoch time: 3.22s\n~30% gpu util\n```\n\nKeras with Theano backend and Keras sequential model **without cnmem**:\n\n```\nMean epoch time: 4.86s\n~20% gpu util\n```\n\nKeras with Theano backend and Keras sequential model **with cnmem 90%**:\n\n```\nMean epoch time: 1.45s\n~80% gpu util\n```\n\nOn a Tesla K20, using the same dataset (55000, 784)\n\nLooks like Keras' sequential model is just slowing things down, and if you use Tensorflow's native code within Keras, the performance decrease is negligible. Also cnmem results in a huge performance boost.\n"}
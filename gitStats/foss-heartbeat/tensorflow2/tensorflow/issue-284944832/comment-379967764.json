{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/379967764", "html_url": "https://github.com/tensorflow/tensorflow/issues/15698#issuecomment-379967764", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15698", "id": 379967764, "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTk2Nzc2NA==", "user": {"login": "AliceDinh", "id": 20389638, "node_id": "MDQ6VXNlcjIwMzg5NjM4", "avatar_url": "https://avatars2.githubusercontent.com/u/20389638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AliceDinh", "html_url": "https://github.com/AliceDinh", "followers_url": "https://api.github.com/users/AliceDinh/followers", "following_url": "https://api.github.com/users/AliceDinh/following{/other_user}", "gists_url": "https://api.github.com/users/AliceDinh/gists{/gist_id}", "starred_url": "https://api.github.com/users/AliceDinh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AliceDinh/subscriptions", "organizations_url": "https://api.github.com/users/AliceDinh/orgs", "repos_url": "https://api.github.com/users/AliceDinh/repos", "events_url": "https://api.github.com/users/AliceDinh/events{/privacy}", "received_events_url": "https://api.github.com/users/AliceDinh/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-10T04:08:47Z", "updated_at": "2018-04-10T04:08:47Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=26957301\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ElephantHunters\">@ElephantHunters</a><br>\nI did follow your suggestion, which is:<br>\nI modified <code>compile 'org.tensorflow:tensorflow-android:1.2.0-preview'</code> by<br>\n<code>implementation 'org.tensorflow:tensorflow-android:1.6.0'</code><br>\nI created a folder named libs and copied files in this order:</p>\n<pre><code>libs\n-libtensorflow_demo.so\n-libtensorflow_inference.so\n-libandroid_tensorflow_inference_java.jar\n</code></pre>\n<p>I cleaned the project, rebuilt project successfully, but it crashed on Android after a second with this error:</p>\n<pre><code>04-10 11:07:24.301 4249-4391/org.tensorflow.demo E/TensorFlowInferenceInterface: Failed to run TensorFlow inference with inputs:[input], outputs:[final_result]\n04-10 11:07:24.301 4249-4391/org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: inference\n                                                                   Process: org.tensorflow.demo, PID: 4249\n                                                                   java.lang.IllegalArgumentException: Tried to explicitly squeeze dimension 1 but dimension was not 1: 2\n                                                                   \t [[Node: MobilenetV1/Logits/SpatialSqueeze = Squeeze[T=DT_FLOAT, squeeze_dims=[1, 2], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](MobilenetV1/Logits/Conv2d_1c_1x1/BiasAdd)]]\n                                                                       at org.tensorflow.Session.run(Native Method)\n                                                                       at org.tensorflow.Session.access$100(Session.java:48)\n                                                                       at org.tensorflow.Session$Runner.runHelper(Session.java:298)\n                                                                       at org.tensorflow.Session$Runner.run(Session.java:248)\n                                                                       at org.tensorflow.contrib.android.TensorFlowInferenceInterface.run(TensorFlowInferenceInterface.java:230)\n                                                                       at org.tensorflow.contrib.android.TensorFlowInferenceInterface.run(TensorFlowInferenceInterface.java:197)\n                                                                       at org.tensorflow.demo.TensorFlowImageClassifier.recognizeImage(TensorFlowImageClassifier.java:150)\n                                                                       at org.tensorflow.demo.ClassifierActivity$2.run(ClassifierActivity.java:239)\n                                                                       at android.os.Handler.handleCallback(Handler.java:739)\n                                                                       at android.os.Handler.dispatchMessage(Handler.java:95)\n                                                                       at android.os.Looper.loop(Looper.java:158)\n                                                                       at android.os.HandlerThread.run(HandlerThread.java:61)\n</code></pre>\n<p>Please advice me in this problem.<br>\nThanks</p>", "body_text": "Hi @ElephantHunters\nI did follow your suggestion, which is:\nI modified compile 'org.tensorflow:tensorflow-android:1.2.0-preview' by\nimplementation 'org.tensorflow:tensorflow-android:1.6.0'\nI created a folder named libs and copied files in this order:\nlibs\n-libtensorflow_demo.so\n-libtensorflow_inference.so\n-libandroid_tensorflow_inference_java.jar\n\nI cleaned the project, rebuilt project successfully, but it crashed on Android after a second with this error:\n04-10 11:07:24.301 4249-4391/org.tensorflow.demo E/TensorFlowInferenceInterface: Failed to run TensorFlow inference with inputs:[input], outputs:[final_result]\n04-10 11:07:24.301 4249-4391/org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: inference\n                                                                   Process: org.tensorflow.demo, PID: 4249\n                                                                   java.lang.IllegalArgumentException: Tried to explicitly squeeze dimension 1 but dimension was not 1: 2\n                                                                   \t [[Node: MobilenetV1/Logits/SpatialSqueeze = Squeeze[T=DT_FLOAT, squeeze_dims=[1, 2], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](MobilenetV1/Logits/Conv2d_1c_1x1/BiasAdd)]]\n                                                                       at org.tensorflow.Session.run(Native Method)\n                                                                       at org.tensorflow.Session.access$100(Session.java:48)\n                                                                       at org.tensorflow.Session$Runner.runHelper(Session.java:298)\n                                                                       at org.tensorflow.Session$Runner.run(Session.java:248)\n                                                                       at org.tensorflow.contrib.android.TensorFlowInferenceInterface.run(TensorFlowInferenceInterface.java:230)\n                                                                       at org.tensorflow.contrib.android.TensorFlowInferenceInterface.run(TensorFlowInferenceInterface.java:197)\n                                                                       at org.tensorflow.demo.TensorFlowImageClassifier.recognizeImage(TensorFlowImageClassifier.java:150)\n                                                                       at org.tensorflow.demo.ClassifierActivity$2.run(ClassifierActivity.java:239)\n                                                                       at android.os.Handler.handleCallback(Handler.java:739)\n                                                                       at android.os.Handler.dispatchMessage(Handler.java:95)\n                                                                       at android.os.Looper.loop(Looper.java:158)\n                                                                       at android.os.HandlerThread.run(HandlerThread.java:61)\n\nPlease advice me in this problem.\nThanks", "body": "Hi @ElephantHunters \r\nI did follow your suggestion, which is:\r\nI modified `compile 'org.tensorflow:tensorflow-android:1.2.0-preview'` by \r\n`implementation 'org.tensorflow:tensorflow-android:1.6.0'`\r\nI created a folder named libs and copied files in this order:\r\n```\r\nlibs\r\n-libtensorflow_demo.so\r\n-libtensorflow_inference.so\r\n-libandroid_tensorflow_inference_java.jar\r\n```\r\nI cleaned the project, rebuilt project successfully, but it crashed on Android after a second with this error:\r\n```\r\n04-10 11:07:24.301 4249-4391/org.tensorflow.demo E/TensorFlowInferenceInterface: Failed to run TensorFlow inference with inputs:[input], outputs:[final_result]\r\n04-10 11:07:24.301 4249-4391/org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: inference\r\n                                                                   Process: org.tensorflow.demo, PID: 4249\r\n                                                                   java.lang.IllegalArgumentException: Tried to explicitly squeeze dimension 1 but dimension was not 1: 2\r\n                                                                   \t [[Node: MobilenetV1/Logits/SpatialSqueeze = Squeeze[T=DT_FLOAT, squeeze_dims=[1, 2], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](MobilenetV1/Logits/Conv2d_1c_1x1/BiasAdd)]]\r\n                                                                       at org.tensorflow.Session.run(Native Method)\r\n                                                                       at org.tensorflow.Session.access$100(Session.java:48)\r\n                                                                       at org.tensorflow.Session$Runner.runHelper(Session.java:298)\r\n                                                                       at org.tensorflow.Session$Runner.run(Session.java:248)\r\n                                                                       at org.tensorflow.contrib.android.TensorFlowInferenceInterface.run(TensorFlowInferenceInterface.java:230)\r\n                                                                       at org.tensorflow.contrib.android.TensorFlowInferenceInterface.run(TensorFlowInferenceInterface.java:197)\r\n                                                                       at org.tensorflow.demo.TensorFlowImageClassifier.recognizeImage(TensorFlowImageClassifier.java:150)\r\n                                                                       at org.tensorflow.demo.ClassifierActivity$2.run(ClassifierActivity.java:239)\r\n                                                                       at android.os.Handler.handleCallback(Handler.java:739)\r\n                                                                       at android.os.Handler.dispatchMessage(Handler.java:95)\r\n                                                                       at android.os.Looper.loop(Looper.java:158)\r\n                                                                       at android.os.HandlerThread.run(HandlerThread.java:61)\r\n```\r\nPlease advice me in this problem.\r\nThanks"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/259026052", "html_url": "https://github.com/tensorflow/tensorflow/issues/5440#issuecomment-259026052", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5440", "id": 259026052, "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTAyNjA1Mg==", "user": {"login": "singlasahil14", "id": 6660192, "node_id": "MDQ6VXNlcjY2NjAxOTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/6660192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/singlasahil14", "html_url": "https://github.com/singlasahil14", "followers_url": "https://api.github.com/users/singlasahil14/followers", "following_url": "https://api.github.com/users/singlasahil14/following{/other_user}", "gists_url": "https://api.github.com/users/singlasahil14/gists{/gist_id}", "starred_url": "https://api.github.com/users/singlasahil14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/singlasahil14/subscriptions", "organizations_url": "https://api.github.com/users/singlasahil14/orgs", "repos_url": "https://api.github.com/users/singlasahil14/repos", "events_url": "https://api.github.com/users/singlasahil14/events{/privacy}", "received_events_url": "https://api.github.com/users/singlasahil14/received_events", "type": "User", "site_admin": false}, "created_at": "2016-11-08T02:18:53Z", "updated_at": "2016-11-08T02:18:53Z", "author_association": "NONE", "body_html": "<pre><code>py_library(\n    name = \"zero_out_op\",\n    srcs = [\"user_ops/zero_out_op.py\"],\n    data = [\"//tensorflow/core/user_ops:zero_out.so\"],\n    srcs_version = \"PY2AND3\",\n)\n</code></pre>\n<p>This is the build rule for that python file. I was already using <code>data =[\"//tensorflow/core/user_ops:zero_out.so\"] </code></p>\n<pre><code>_zero_out_module = tf.load_op_library(tf.resource_loader.get_path_to_datafile('tensorflow/core/user_ops/zero_out.so'))\nzero_out = _zero_out_module.zero_out\n</code></pre>\n<p>doesn't work either.</p>\n<p><code>print(tf.resource_loader.get_path_to_datafile('tensorflow/core/user_ops/zero_out.so'))</code><br>\ngives <code>tensorflow/core/user_ops/zero_out.so</code></p>\n<p><code>name = \"zero_out\"</code> gives an error</p>\n<p><code>ERROR: /Users/sahilsingla/tensorflow/tensorflow/core/user_ops/BUILD:8:1: in linkshared attribute of cc_binary rule //tensorflow/core/user_ops:zero_out: 'linkshared' used in non-shared library. Since this rule was created by the macro 'tf_custom_op_library', the error might have been caused by the macro implementation in /Users/sahilsingla/tensorflow/tensorflow/tensorflow.bzl:781:31.</code></p>\n<p>Please let me know if there is a solution.</p>", "body_text": "py_library(\n    name = \"zero_out_op\",\n    srcs = [\"user_ops/zero_out_op.py\"],\n    data = [\"//tensorflow/core/user_ops:zero_out.so\"],\n    srcs_version = \"PY2AND3\",\n)\n\nThis is the build rule for that python file. I was already using data =[\"//tensorflow/core/user_ops:zero_out.so\"] \n_zero_out_module = tf.load_op_library(tf.resource_loader.get_path_to_datafile('tensorflow/core/user_ops/zero_out.so'))\nzero_out = _zero_out_module.zero_out\n\ndoesn't work either.\nprint(tf.resource_loader.get_path_to_datafile('tensorflow/core/user_ops/zero_out.so'))\ngives tensorflow/core/user_ops/zero_out.so\nname = \"zero_out\" gives an error\nERROR: /Users/sahilsingla/tensorflow/tensorflow/core/user_ops/BUILD:8:1: in linkshared attribute of cc_binary rule //tensorflow/core/user_ops:zero_out: 'linkshared' used in non-shared library. Since this rule was created by the macro 'tf_custom_op_library', the error might have been caused by the macro implementation in /Users/sahilsingla/tensorflow/tensorflow/tensorflow.bzl:781:31.\nPlease let me know if there is a solution.", "body": "```\npy_library(\n    name = \"zero_out_op\",\n    srcs = [\"user_ops/zero_out_op.py\"],\n    data = [\"//tensorflow/core/user_ops:zero_out.so\"],\n    srcs_version = \"PY2AND3\",\n)\n```\n\nThis is the build rule for that python file. I was already using `data =[\"//tensorflow/core/user_ops:zero_out.so\"]\n`\n\n```\n_zero_out_module = tf.load_op_library(tf.resource_loader.get_path_to_datafile('tensorflow/core/user_ops/zero_out.so'))\nzero_out = _zero_out_module.zero_out\n```\n\ndoesn't work either. \n\n`print(tf.resource_loader.get_path_to_datafile('tensorflow/core/user_ops/zero_out.so'))`\ngives `tensorflow/core/user_ops/zero_out.so`\n\n`name = \"zero_out\"` gives an error\n\n`ERROR: /Users/sahilsingla/tensorflow/tensorflow/core/user_ops/BUILD:8:1: in linkshared attribute of cc_binary rule //tensorflow/core/user_ops:zero_out: 'linkshared' used in non-shared library. Since this rule was created by the macro 'tf_custom_op_library', the error might have been caused by the macro implementation in /Users/sahilsingla/tensorflow/tensorflow/tensorflow.bzl:781:31.`\n\nPlease let me know if there is a solution. \n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/319102624", "html_url": "https://github.com/tensorflow/tensorflow/issues/11909#issuecomment-319102624", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11909", "id": 319102624, "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTEwMjYyNA==", "user": {"login": "emsi", "id": 433383, "node_id": "MDQ6VXNlcjQzMzM4Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/433383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emsi", "html_url": "https://github.com/emsi", "followers_url": "https://api.github.com/users/emsi/followers", "following_url": "https://api.github.com/users/emsi/following{/other_user}", "gists_url": "https://api.github.com/users/emsi/gists{/gist_id}", "starred_url": "https://api.github.com/users/emsi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emsi/subscriptions", "organizations_url": "https://api.github.com/users/emsi/orgs", "repos_url": "https://api.github.com/users/emsi/repos", "events_url": "https://api.github.com/users/emsi/events{/privacy}", "received_events_url": "https://api.github.com/users/emsi/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-31T15:28:19Z", "updated_at": "2017-07-31T15:28:19Z", "author_association": "NONE", "body_html": "<p>There's plenty of regularization: two dropout and two BN layers.</p>\n<p>What puzzles me are the NaNs in weights.<br>\nI solved the problem with following trick:</p>\n<pre><code>weights=model.get_weights()\nfor w in weights:\n    w[numpy.isnan(w)]=-float('Inf')\nmodel.set_weights(weights)\n</code></pre>\n<p>It brought model back to stability.</p>", "body_text": "There's plenty of regularization: two dropout and two BN layers.\nWhat puzzles me are the NaNs in weights.\nI solved the problem with following trick:\nweights=model.get_weights()\nfor w in weights:\n    w[numpy.isnan(w)]=-float('Inf')\nmodel.set_weights(weights)\n\nIt brought model back to stability.", "body": "There's plenty of regularization: two dropout and two BN layers.\r\n\r\nWhat puzzles me are the NaNs in weights. \r\nI solved the problem with following trick:\r\n```\r\nweights=model.get_weights()\r\nfor w in weights:\r\n    w[numpy.isnan(w)]=-float('Inf')\r\nmodel.set_weights(weights)\r\n```\r\nIt brought model back to stability.\r\n"}
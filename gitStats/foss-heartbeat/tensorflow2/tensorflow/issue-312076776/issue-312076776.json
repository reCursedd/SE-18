{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18297", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18297/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18297/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18297/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18297", "id": 312076776, "node_id": "MDU6SXNzdWUzMTIwNzY3NzY=", "number": 18297, "title": "Tensorflow-gpu performance drop", "user": {"login": "TwoRice", "id": 9116671, "node_id": "MDQ6VXNlcjkxMTY2NzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9116671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TwoRice", "html_url": "https://github.com/TwoRice", "followers_url": "https://api.github.com/users/TwoRice/followers", "following_url": "https://api.github.com/users/TwoRice/following{/other_user}", "gists_url": "https://api.github.com/users/TwoRice/gists{/gist_id}", "starred_url": "https://api.github.com/users/TwoRice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TwoRice/subscriptions", "organizations_url": "https://api.github.com/users/TwoRice/orgs", "repos_url": "https://api.github.com/users/TwoRice/repos", "events_url": "https://api.github.com/users/TwoRice/events{/privacy}", "received_events_url": "https://api.github.com/users/TwoRice/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2018-04-06T18:40:22Z", "updated_at": "2018-11-14T19:16:49Z", "closed_at": null, "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code</strong>: No</li>\n<li><strong>OS Platform and Distribution</strong>: Windows 10 64-bit</li>\n<li><strong>TensorFlow installed from</strong>: binary</li>\n<li><strong>TensorFlow version</strong>: 1.6.0</li>\n<li><strong>Python version</strong>: 3.6.3</li>\n<li><strong>CUDA/cuDNN version</strong>: 9.0</li>\n<li><strong>GPU model and memory</strong>: GeForce GTX 780, 3Gb</li>\n</ul>\n<p>Using Keras in Python with tensorflow-gpu backend. Worked fine for weeks until a few days ago, when I have suffered a huge performance drop.</p>\n<p>When Tensorflow is initialising, it all appears to work correctly and finds my GPU as normal. Output:</p>\n<pre><code>2018-04-05 02:08:32.791893: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1212] Found device 0 with properties: \nname: GeForce GTX 780 major: 3 minor: 5 memoryClockRate(GHz): 1.0195\npciBusID: 0000:01:00.0\ntotalMemory: 3.00GiB freeMemory: 2.46GiB\n2018-04-05 02:08:32.792360: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1312] Adding visible gpu devices: 0\n2018-04-05 02:08:33.132555: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 2187 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 780, pci bus id: 0000:01:00.0, compute capability: 3.5)\n</code></pre>\n<p>But whereas before with exactly the same model on the same data, each epoch took about 2-3 seconds, they now take ~17 seconds.</p>\n<p>I had a look in Task Manager, and my IDE shows to be using GPU Engine - \"GPU 0 - Copy\". Also at the beginning of each epoch, the GPU will go under ~70% load for about a second, but then the load switches over to my CPU and Memory for the remaining 15 seconds or so and the GPU goes back down to its idle load around 2%.</p>", "body_text": "System information\n\nHave I written custom code: No\nOS Platform and Distribution: Windows 10 64-bit\nTensorFlow installed from: binary\nTensorFlow version: 1.6.0\nPython version: 3.6.3\nCUDA/cuDNN version: 9.0\nGPU model and memory: GeForce GTX 780, 3Gb\n\nUsing Keras in Python with tensorflow-gpu backend. Worked fine for weeks until a few days ago, when I have suffered a huge performance drop.\nWhen Tensorflow is initialising, it all appears to work correctly and finds my GPU as normal. Output:\n2018-04-05 02:08:32.791893: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1212] Found device 0 with properties: \nname: GeForce GTX 780 major: 3 minor: 5 memoryClockRate(GHz): 1.0195\npciBusID: 0000:01:00.0\ntotalMemory: 3.00GiB freeMemory: 2.46GiB\n2018-04-05 02:08:32.792360: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1312] Adding visible gpu devices: 0\n2018-04-05 02:08:33.132555: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 2187 MB memory) -> physical GPU (device: 0, name: GeForce GTX 780, pci bus id: 0000:01:00.0, compute capability: 3.5)\n\nBut whereas before with exactly the same model on the same data, each epoch took about 2-3 seconds, they now take ~17 seconds.\nI had a look in Task Manager, and my IDE shows to be using GPU Engine - \"GPU 0 - Copy\". Also at the beginning of each epoch, the GPU will go under ~70% load for about a second, but then the load switches over to my CPU and Memory for the remaining 15 seconds or so and the GPU goes back down to its idle load around 2%.", "body": "### System information\r\n- **Have I written custom code**: No\r\n- **OS Platform and Distribution**: Windows 10 64-bit \r\n- **TensorFlow installed from**: binary\r\n- **TensorFlow version**: 1.6.0\r\n- **Python version**: 3.6.3\r\n- **CUDA/cuDNN version**: 9.0\r\n- **GPU model and memory**: GeForce GTX 780, 3Gb\r\n\r\nUsing Keras in Python with tensorflow-gpu backend. Worked fine for weeks until a few days ago, when I have suffered a huge performance drop.\r\n\r\nWhen Tensorflow is initialising, it all appears to work correctly and finds my GPU as normal. Output:\r\n\r\n    2018-04-05 02:08:32.791893: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1212] Found device 0 with properties: \r\n    name: GeForce GTX 780 major: 3 minor: 5 memoryClockRate(GHz): 1.0195\r\n    pciBusID: 0000:01:00.0\r\n    totalMemory: 3.00GiB freeMemory: 2.46GiB\r\n    2018-04-05 02:08:32.792360: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1312] Adding visible gpu devices: 0\r\n    2018-04-05 02:08:33.132555: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 2187 MB memory) -> physical GPU (device: 0, name: GeForce GTX 780, pci bus id: 0000:01:00.0, compute capability: 3.5)\r\n\r\nBut whereas before with exactly the same model on the same data, each epoch took about 2-3 seconds, they now take ~17 seconds.\r\n\r\nI had a look in Task Manager, and my IDE shows to be using GPU Engine - \"GPU 0 - Copy\". Also at the beginning of each epoch, the GPU will go under ~70% load for about a second, but then the load switches over to my CPU and Memory for the remaining 15 seconds or so and the GPU goes back down to its idle load around 2%."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23375", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23375/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23375/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23375/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23375", "id": 375463003, "node_id": "MDU6SXNzdWUzNzU0NjMwMDM=", "number": 23375, "title": "Protobuf error, mismatch with system installed version", "user": {"login": "depauwjimmy", "id": 16537507, "node_id": "MDQ6VXNlcjE2NTM3NTA3", "avatar_url": "https://avatars3.githubusercontent.com/u/16537507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/depauwjimmy", "html_url": "https://github.com/depauwjimmy", "followers_url": "https://api.github.com/users/depauwjimmy/followers", "following_url": "https://api.github.com/users/depauwjimmy/following{/other_user}", "gists_url": "https://api.github.com/users/depauwjimmy/gists{/gist_id}", "starred_url": "https://api.github.com/users/depauwjimmy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/depauwjimmy/subscriptions", "organizations_url": "https://api.github.com/users/depauwjimmy/orgs", "repos_url": "https://api.github.com/users/depauwjimmy/repos", "events_url": "https://api.github.com/users/depauwjimmy/events{/privacy}", "received_events_url": "https://api.github.com/users/depauwjimmy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "harshini-gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshini-gadige", "html_url": "https://github.com/harshini-gadige", "followers_url": "https://api.github.com/users/harshini-gadige/followers", "following_url": "https://api.github.com/users/harshini-gadige/following{/other_user}", "gists_url": "https://api.github.com/users/harshini-gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshini-gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshini-gadige/subscriptions", "organizations_url": "https://api.github.com/users/harshini-gadige/orgs", "repos_url": "https://api.github.com/users/harshini-gadige/repos", "events_url": "https://api.github.com/users/harshini-gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/harshini-gadige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "harshini-gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshini-gadige", "html_url": "https://github.com/harshini-gadige", "followers_url": "https://api.github.com/users/harshini-gadige/followers", "following_url": "https://api.github.com/users/harshini-gadige/following{/other_user}", "gists_url": "https://api.github.com/users/harshini-gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshini-gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshini-gadige/subscriptions", "organizations_url": "https://api.github.com/users/harshini-gadige/orgs", "repos_url": "https://api.github.com/users/harshini-gadige/repos", "events_url": "https://api.github.com/users/harshini-gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/harshini-gadige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-30T12:26:34Z", "updated_at": "2018-11-14T12:40:30Z", "closed_at": "2018-11-14T12:40:30Z", "author_association": "NONE", "body_html": "<ul>\n<li>OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.1 LTS</li>\n<li>TensorFlow installed from (source or binary): Source</li>\n<li>TensorFlow version: 1.11.0</li>\n<li>Python version: 3.6.6 (virtualenv)</li>\n<li>Bazel version (if compiling from source): 0.17.2</li>\n<li>GCC/Compiler version (if compiling from source): gcc-6 (Ubuntu 6.4.0-17ubuntu1) 6.4.0 20180424</li>\n<li>CUDA/cuDNN/NCCL version: 9.1/7.1/2.1.15</li>\n<li>GPU model and memory: Quadro M1200</li>\n</ul>\n<p>I know this a typical problem and i could compile and install from source using a previous version but this time it's a bit different.</p>\n<p>Compile log is :</p>\n<pre><code>ERROR: /home/god_kane/Downloads/tensorflow-1.11.0/tensorflow/contrib/nccl/BUILD:24:1: error while parsing .d file: /home/god_kane/.cache/bazel/_bazel_god_kane/380ea18d2d4a7f2f6db5af2f6d4bc750/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/nccl/_objs/python/ops/_nccl_ops_gpu/nccl_manager.pic.d (No such file or directory)\nIn file included from ./tensorflow/core/framework/variant.h:26:0,\n                 from ./tensorflow/core/framework/allocator.h:26,\n                 from ./tensorflow/core/framework/tensor.h:20,\n                 from ./tensorflow/core/framework/log_memory.h:19,\n                 from ./tensorflow/core/common_runtime/gpu/gpu_event_mgr.h:21,\n                 from ./tensorflow/contrib/nccl/kernels/nccl_manager.h:31,\n                 from tensorflow/contrib/nccl/kernels/nccl_manager.cc:15:\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:12:2: error: #error This file was generated by a newer version of protoc which is\n #error This file was generated by a newer version of protoc which is\n  ^~~~~\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:13:2: error: #error incompatible with your Protocol Buffer headers. Please update\n #error incompatible with your Protocol Buffer headers.  Please update\n  ^~~~~\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:14:2: error: #error your headers.\n #error your headers.\n  ^~~~~\n</code></pre>\n<p>Those file are correctly generated with protobuf 3.6.0 which i believe is compiled as third_party.<br>\nWhat i don't understand is that it seems what is included later are my system protobuf headers and not the one from tensorflow folder resulting in an error.<br>\nI tried to do something dirty to check, installed protobuf from source and created symbolink link to it replacing my system installed version.<br>\nDoing that worked but it's not a valid solution. I also should not need to install my own protobuf version just for using it in python.<br>\nThe fault seems to be with nccl but i don't know where to look for a more clean fix.</p>", "body_text": "OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.1 LTS\nTensorFlow installed from (source or binary): Source\nTensorFlow version: 1.11.0\nPython version: 3.6.6 (virtualenv)\nBazel version (if compiling from source): 0.17.2\nGCC/Compiler version (if compiling from source): gcc-6 (Ubuntu 6.4.0-17ubuntu1) 6.4.0 20180424\nCUDA/cuDNN/NCCL version: 9.1/7.1/2.1.15\nGPU model and memory: Quadro M1200\n\nI know this a typical problem and i could compile and install from source using a previous version but this time it's a bit different.\nCompile log is :\nERROR: /home/god_kane/Downloads/tensorflow-1.11.0/tensorflow/contrib/nccl/BUILD:24:1: error while parsing .d file: /home/god_kane/.cache/bazel/_bazel_god_kane/380ea18d2d4a7f2f6db5af2f6d4bc750/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/nccl/_objs/python/ops/_nccl_ops_gpu/nccl_manager.pic.d (No such file or directory)\nIn file included from ./tensorflow/core/framework/variant.h:26:0,\n                 from ./tensorflow/core/framework/allocator.h:26,\n                 from ./tensorflow/core/framework/tensor.h:20,\n                 from ./tensorflow/core/framework/log_memory.h:19,\n                 from ./tensorflow/core/common_runtime/gpu/gpu_event_mgr.h:21,\n                 from ./tensorflow/contrib/nccl/kernels/nccl_manager.h:31,\n                 from tensorflow/contrib/nccl/kernels/nccl_manager.cc:15:\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:12:2: error: #error This file was generated by a newer version of protoc which is\n #error This file was generated by a newer version of protoc which is\n  ^~~~~\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:13:2: error: #error incompatible with your Protocol Buffer headers. Please update\n #error incompatible with your Protocol Buffer headers.  Please update\n  ^~~~~\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:14:2: error: #error your headers.\n #error your headers.\n  ^~~~~\n\nThose file are correctly generated with protobuf 3.6.0 which i believe is compiled as third_party.\nWhat i don't understand is that it seems what is included later are my system protobuf headers and not the one from tensorflow folder resulting in an error.\nI tried to do something dirty to check, installed protobuf from source and created symbolink link to it replacing my system installed version.\nDoing that worked but it's not a valid solution. I also should not need to install my own protobuf version just for using it in python.\nThe fault seems to be with nccl but i don't know where to look for a more clean fix.", "body": "- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.1 LTS\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: 1.11.0\r\n- Python version: 3.6.6 (virtualenv)\r\n- Bazel version (if compiling from source): 0.17.2\r\n- GCC/Compiler version (if compiling from source): gcc-6 (Ubuntu 6.4.0-17ubuntu1) 6.4.0 20180424\r\n- CUDA/cuDNN/NCCL version: 9.1/7.1/2.1.15\r\n- GPU model and memory: Quadro M1200\r\n\r\nI know this a typical problem and i could compile and install from source using a previous version but this time it's a bit different.\r\n\r\nCompile log is : \r\n\r\n```\r\nERROR: /home/god_kane/Downloads/tensorflow-1.11.0/tensorflow/contrib/nccl/BUILD:24:1: error while parsing .d file: /home/god_kane/.cache/bazel/_bazel_god_kane/380ea18d2d4a7f2f6db5af2f6d4bc750/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/contrib/nccl/_objs/python/ops/_nccl_ops_gpu/nccl_manager.pic.d (No such file or directory)\r\nIn file included from ./tensorflow/core/framework/variant.h:26:0,\r\n                 from ./tensorflow/core/framework/allocator.h:26,\r\n                 from ./tensorflow/core/framework/tensor.h:20,\r\n                 from ./tensorflow/core/framework/log_memory.h:19,\r\n                 from ./tensorflow/core/common_runtime/gpu/gpu_event_mgr.h:21,\r\n                 from ./tensorflow/contrib/nccl/kernels/nccl_manager.h:31,\r\n                 from tensorflow/contrib/nccl/kernels/nccl_manager.cc:15:\r\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:12:2: error: #error This file was generated by a newer version of protoc which is\r\n #error This file was generated by a newer version of protoc which is\r\n  ^~~~~\r\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:13:2: error: #error incompatible with your Protocol Buffer headers. Please update\r\n #error incompatible with your Protocol Buffer headers.  Please update\r\n  ^~~~~\r\nbazel-out/k8-opt/genfiles/tensorflow/core/framework/tensor.pb.h:14:2: error: #error your headers.\r\n #error your headers.\r\n  ^~~~~\r\n```\r\n\r\nThose file are correctly generated with protobuf 3.6.0 which i believe is compiled as third_party.  \r\nWhat i don't understand is that it seems what is included later are my system protobuf headers and not the one from tensorflow folder resulting in an error.  \r\nI tried to do something dirty to check, installed protobuf from source and created symbolink link to it replacing my system installed version.  \r\nDoing that worked but it's not a valid solution. I also should not need to install my own protobuf version just for using it in python.\r\nThe fault seems to be with nccl but i don't know where to look for a more clean fix."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8923", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8923/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8923/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8923/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8923", "id": 218929610, "node_id": "MDU6SXNzdWUyMTg5Mjk2MTA=", "number": 8923, "title": "Hiding the re2 symbols from libtensorflow.so", "user": {"login": "LaurentMazare", "id": 1041292, "node_id": "MDQ6VXNlcjEwNDEyOTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1041292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LaurentMazare", "html_url": "https://github.com/LaurentMazare", "followers_url": "https://api.github.com/users/LaurentMazare/followers", "following_url": "https://api.github.com/users/LaurentMazare/following{/other_user}", "gists_url": "https://api.github.com/users/LaurentMazare/gists{/gist_id}", "starred_url": "https://api.github.com/users/LaurentMazare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LaurentMazare/subscriptions", "organizations_url": "https://api.github.com/users/LaurentMazare/orgs", "repos_url": "https://api.github.com/users/LaurentMazare/repos", "events_url": "https://api.github.com/users/LaurentMazare/events{/privacy}", "received_events_url": "https://api.github.com/users/LaurentMazare/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-04-03T13:16:16Z", "updated_at": "2017-04-09T13:03:53Z", "closed_at": "2017-04-08T01:04:39Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>This recent issue <a href=\"https://github.com/tensorflow/tensorflow/issues/8320\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8320/hovercard\">8320</a> is related but asked for the opposite (more symbol visibility rather than less symbol visibility).</p>\n<h3>Environment info</h3>\n<p>Operating System: Linux</p>\n<p>Installed version of CUDA and cuDNN: n/a</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>Running the following command line on the <a href=\"https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-linux-x86_64-1.0.0.tar.gz\" rel=\"nofollow\">pre-built linux binaries</a> returns quite a few symbols.<br>\nobjdump -T libtensorflow.so  | grep re2</p>\n<p>It looks like libtensorflow.so is using re2 internally and exposing its symbols. This is annoying when linking with some existing code that uses a different version of re2 as it could easily result in the wrong symbol being called depending on the order of the linker flags. In my case, the re2 calls made by my code ended up using the tensorflow exposed symbols and failing because the version was different.</p>\n<p>Maybe the visibility of the re2 symbols embedded in libtensorflow.so could be set to hidden ? (I don't know much about symbol visibility but happy to help if you think it makes sense)</p>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nThis recent issue 8320 is related but asked for the opposite (more symbol visibility rather than less symbol visibility).\nEnvironment info\nOperating System: Linux\nInstalled version of CUDA and cuDNN: n/a\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nRunning the following command line on the pre-built linux binaries returns quite a few symbols.\nobjdump -T libtensorflow.so  | grep re2\nIt looks like libtensorflow.so is using re2 internally and exposing its symbols. This is annoying when linking with some existing code that uses a different version of re2 as it could easily result in the wrong symbol being called depending on the order of the linker flags. In my case, the re2 calls made by my code ended up using the tensorflow exposed symbols and failing because the version was different.\nMaybe the visibility of the re2 symbols embedded in libtensorflow.so could be set to hidden ? (I don't know much about symbol visibility but happy to help if you think it makes sense)", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\n\r\nThis recent issue [8320](https://github.com/tensorflow/tensorflow/issues/8320) is related but asked for the opposite (more symbol visibility rather than less symbol visibility).\r\n\r\n### Environment info\r\nOperating System: Linux\r\n\r\nInstalled version of CUDA and cuDNN: n/a\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nRunning the following command line on the [pre-built linux binaries](https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-linux-x86_64-1.0.0.tar.gz) returns quite a few symbols.\r\n objdump -T libtensorflow.so  | grep re2\r\n\r\nIt looks like libtensorflow.so is using re2 internally and exposing its symbols. This is annoying when linking with some existing code that uses a different version of re2 as it could easily result in the wrong symbol being called depending on the order of the linker flags. In my case, the re2 calls made by my code ended up using the tensorflow exposed symbols and failing because the version was different.\r\n\r\nMaybe the visibility of the re2 symbols embedded in libtensorflow.so could be set to hidden ? (I don't know much about symbol visibility but happy to help if you think it makes sense)"}
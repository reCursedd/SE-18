{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/198128484", "pull_request_review_id": 132000674, "id": 198128484, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5ODEyODQ4NA==", "diff_hunk": "@@ -0,0 +1,149 @@\n+# -*- Python -*-\n+\"\"\"Repository rule for system library autoconfiguration.\n+\n+`syslibs_configure` depends on the following environment variables:\n+\n+  * `TF_SYSTEM_LIBS`: list of third party dependencies that should use\n+    the system version instead\n+\"\"\"\n+\n+_TF_SYSTEM_LIBS=\"TF_SYSTEM_LIBS\"\n+\n+VALID_LIBS=[\n+    \"astor_archive\",\n+    \"com_googlesource_code_re2\",\n+    \"curl\",\n+    \"cython\",\n+    \"flatbuffers\",\n+    \"gif_archive\",\n+    \"grpc\",\n+    \"jemalloc\",\n+    \"jpeg\",\n+    \"lmdb\",\n+    \"nasm\",\n+    \"org_sqlite\",\n+    \"pcre\",\n+    \"png_archive\",\n+    \"six_archive\",\n+    \"snappy\",\n+    \"swig\",\n+    \"termcolor_archive\",\n+    \"zlib_archive\",\n+]\n+\n+\n+def auto_configure_fail(msg):\n+  \"\"\"Output failure message when syslibs configuration fails.\"\"\"\n+  red = \"\\033[0;31m\"\n+  no_color = \"\\033[0m\"\n+  fail(\"\\n%sSystem Library Configuration Error:%s %s\\n\" % (red, no_color, msg))\n+\n+\n+def _enable_syslibs(repository_ctx):", "path": "third_party/systemlibs/syslibs_configure.bzl", "position": null, "original_position": 42, "commit_id": "8fc498b925d7fc0ebd0e00dba90fbc945e37a532", "original_commit_id": "836ecda93fa212382ce9688d35709860e028c8d7", "user": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "body": "Since this is Linux specific feature, can you disable it on Windows?\r\nYou can check if it's building on Windows with a function like:\r\nhttps://github.com/tensorflow/tensorflow/blob/fb3ce0467766a8e91f1da0ad7ada7c24fde7a73a/third_party/py/python_configure.bzl#L31-L36", "created_at": "2018-06-26T12:46:24Z", "updated_at": "2018-07-13T03:28:31Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/20284#discussion_r198128484", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/20284", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/198128484"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/20284#discussion_r198128484"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/20284"}}, "body_html": "<p>Since this is Linux specific feature, can you disable it on Windows?<br>\nYou can check if it's building on Windows with a function like:<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/fb3ce0467766a8e91f1da0ad7ada7c24fde7a73a/third_party/py/python_configure.bzl#L31-L36\">tensorflow/third_party/py/python_configure.bzl</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n        Lines 31 to 36\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/fb3ce0467766a8e91f1da0ad7ada7c24fde7a73a\">fb3ce04</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L31\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"31\"></td>\n          <td id=\"LC31\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">_is_windows</span>(<span class=\"pl-smi\">repository_ctx</span>): </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L32\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"32\"></td>\n          <td id=\"LC32\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span>Returns true if the host operating system is windows.<span class=\"pl-pds\">\"\"\"</span></span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L33\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"33\"></td>\n          <td id=\"LC33\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   os_name <span class=\"pl-k\">=</span> repository_ctx.os.name.lower() </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L34\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"34\"></td>\n          <td id=\"LC34\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-k\">if</span> os_name.find(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>windows<span class=\"pl-pds\">\"</span></span>) <span class=\"pl-k\">!=</span> <span class=\"pl-k\">-</span><span class=\"pl-c1\">1</span>: </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L35\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"35\"></td>\n          <td id=\"LC35\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">     <span class=\"pl-k\">return</span> <span class=\"pl-c1\">True</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L36\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"36\"></td>\n          <td id=\"LC36\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">   <span class=\"pl-k\">return</span> <span class=\"pl-c1\">False</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>", "body_text": "Since this is Linux specific feature, can you disable it on Windows?\nYou can check if it's building on Windows with a function like:\n\n  \n    \n      tensorflow/third_party/py/python_configure.bzl\n    \n    \n        Lines 31 to 36\n      in\n      fb3ce04\n    \n    \n    \n    \n\n        \n          \n           def _is_windows(repository_ctx): \n        \n\n        \n          \n             \"\"\"Returns true if the host operating system is windows.\"\"\" \n        \n\n        \n          \n             os_name = repository_ctx.os.name.lower() \n        \n\n        \n          \n             if os_name.find(\"windows\") != -1: \n        \n\n        \n          \n               return True \n        \n\n        \n          \n             return False"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4984", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4984/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4984/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4984/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4984", "id": 183194372, "node_id": "MDU6SXNzdWUxODMxOTQzNzI=", "number": 4984, "title": "gcc: error trying to exec 'as': execvp: No such file or directory", "user": {"login": "AndreasMadsen", "id": 505333, "node_id": "MDQ6VXNlcjUwNTMzMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/505333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreasMadsen", "html_url": "https://github.com/AndreasMadsen", "followers_url": "https://api.github.com/users/AndreasMadsen/followers", "following_url": "https://api.github.com/users/AndreasMadsen/following{/other_user}", "gists_url": "https://api.github.com/users/AndreasMadsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreasMadsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreasMadsen/subscriptions", "organizations_url": "https://api.github.com/users/AndreasMadsen/orgs", "repos_url": "https://api.github.com/users/AndreasMadsen/repos", "events_url": "https://api.github.com/users/AndreasMadsen/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreasMadsen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-10-15T07:17:11Z", "updated_at": "2016-10-16T19:25:37Z", "closed_at": "2016-10-16T19:24:50Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I think the problem is that <code>as</code> wasn't installed with <code>gcc</code> and thus <code>gcc -print-prog-name=as</code> just prints <code>as</code>. <code>as</code> is in my path, but not in the same location as <code>gcc</code>.</p>\n<pre><code>$ which gcc\n/appl/gcc/4.9.2/bin/gcc\n$ which as\n/appl/binutils/2.25.1/bin/as\n</code></pre>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>there are a couple:</p>\n<ul>\n<li>gcc: error trying to exec 'as': execvp: No such file or directory: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=40339\" rel=\"nofollow\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=40339</a></li>\n<li>gcc: error trying to exec 'as': execvp: No such file or directory <a href=\"https://decibel.ni.com/content/thread/39592\" rel=\"nofollow\">https://decibel.ni.com/content/thread/39592</a></li>\n<li>Building TensorFlow with custom GCC requires hardcoded ld,nm and as <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"174742134\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/bazelbuild/bazel/issues/1713\" data-hovercard-type=\"issue\" data-hovercard-url=\"/bazelbuild/bazel/issues/1713/hovercard\" href=\"https://github.com/bazelbuild/bazel/issues/1713\">bazelbuild/bazel#1713</a> \u2013 I tried setting <code>build --action_env=PATH</code>, but that did change anything.</li>\n</ul>\n<h3>Environment info</h3>\n<p>Operating System:</p>\n<pre><code>$ uname -a\nLinux n-62-18-47 2.6.32-573.22.1.el6.x86_64 #1 SMP Tue Mar 22 17:15:28 CDT 2016 x86_64 x86_64 x86_64 GNU/Linux \n</code></pre>\n<p>Installed version of CUDA and cuDNN: CUDA: 8.0, cuDNN 5.1.5<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):</p>\n<pre><code>$  ls -l /appl/cuda/8.0/lib64/libcud*\n-rw-r--r-- 1 sebo root 560184 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 sebo root     16 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so -&gt; libcudart.so.8.0\nlrwxrwxrwx 1 sebo root     19 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.27\n-rwxr-xr-x 1 sebo root 394472 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 sebo root 737516 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart_static.a\n</code></pre>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (<code>git rev-parse HEAD</code>): <code>f794cd393b1e7821fcc3cdcee9b6a4400f2540bf</code></li>\n<li>The output of <code>bazel version</code>:</li>\n</ol>\n<pre><code>$ bazel --batch version\nINFO: Reading 'startup' options from /zhome/ff/2/77654/.bazelrc: --batch --output_user_root=/work1/s123598/.bazel\nBuild label: 0.3.2-2016-10-13 (@2891ec5)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Oct 13 15:05:25 2016 (1476371125)\nBuild timestamp: 1476371125\nBuild timestamp as int: 1476371125\n</code></pre>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<pre><code># install tensorflow\ngit clone https://github.com/tensorflow/tensorflow\ncd tensorflow\ncurl -L https://github.com/tensorflow/tensorflow/pull/4983.patch | git am -\n\n# set configuration parameters\nexport PYTHON_BIN_PATH=`which python3` # ~/stdpy3/bin/python3\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_NEED_CUDA=1\nexport GCC_HOST_COMPILER_PATH=`which gcc` # /appl/gcc/4.9.2/bin/gcc\nexport TF_CUDA_VERSION=8.0\nexport CUDA_TOOLKIT_PATH=/appl/cuda/8.0/\nexport TF_CUDNN_VERSION=5\nexport CUDNN_INSTALL_PATH=$HOME/cuda/ # the cuDNN version provide IT is too old (5.0.4), so I downloaded the latest and unpacked it in $HOME\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2\"\n\ncat &gt; $HOME/.bazelrc &lt;&lt;EOF\n# --batch: always run in batch mode, since there are some firewall issues.\n# --output_user_root: HOME is NFS (filesystem), this will not work with bazel, use WORKDIR instead\nstartup --batch --output_user_root=$WORKDIR/.bazel\nEOF\n\n# one python configuration can't be set directly use yes to accept automatically\nyes \"\" | CC=gcc CXX=g++ ./configure\n\n# build tensorflow\nCC=gcc CXX=g++ bazel build --copt=\"-w\" \\\n--ignore_unsupported_sandboxing --spawn_strategy=standalone --verbose_failures \\\n-c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<h3>What other attempted solutions have you tried?</h3>\n<ul>\n<li>I've tried symlinking gcc and as into the same path, but then cc1 and the gcc header files can't be found.</li>\n<li>I've tried searching for how bazel or tensorflow finds <code>as</code> but I can't find that code.</li>\n</ul>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).</p>\n<p>full log: <a href=\"https://gist.github.com/AndreasMadsen/7bf11dcf5c53981e532f67850e5b2b9b\">https://gist.github.com/AndreasMadsen/7bf11dcf5c53981e532f67850e5b2b9b</a></p>\n<pre><code>gcc: error trying to exec 'as': execvp: No such file or directory\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/contrib/rnn/BUILD:101:1: output 'tensorflow/contrib/rnn/_objs/python/ops/_gru_ops_gpu/tensorflow/contrib/rnn/kernels/gru_ops_gpu.cu.pic.o' was not created.\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/contrib/rnn/BUILD:101:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 320.454s, Critical Path: 196.64s\n</code></pre>", "body_text": "I think the problem is that as wasn't installed with gcc and thus gcc -print-prog-name=as just prints as. as is in my path, but not in the same location as gcc.\n$ which gcc\n/appl/gcc/4.9.2/bin/gcc\n$ which as\n/appl/binutils/2.25.1/bin/as\n\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nthere are a couple:\n\ngcc: error trying to exec 'as': execvp: No such file or directory: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=40339\ngcc: error trying to exec 'as': execvp: No such file or directory https://decibel.ni.com/content/thread/39592\nBuilding TensorFlow with custom GCC requires hardcoded ld,nm and as bazelbuild/bazel#1713 \u2013 I tried setting build --action_env=PATH, but that did change anything.\n\nEnvironment info\nOperating System:\n$ uname -a\nLinux n-62-18-47 2.6.32-573.22.1.el6.x86_64 #1 SMP Tue Mar 22 17:15:28 CDT 2016 x86_64 x86_64 x86_64 GNU/Linux \n\nInstalled version of CUDA and cuDNN: CUDA: 8.0, cuDNN 5.1.5\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n$  ls -l /appl/cuda/8.0/lib64/libcud*\n-rw-r--r-- 1 sebo root 560184 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 sebo root     16 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 sebo root     19 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 sebo root 394472 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 sebo root 737516 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart_static.a\n\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD): f794cd393b1e7821fcc3cdcee9b6a4400f2540bf\nThe output of bazel version:\n\n$ bazel --batch version\nINFO: Reading 'startup' options from /zhome/ff/2/77654/.bazelrc: --batch --output_user_root=/work1/s123598/.bazel\nBuild label: 0.3.2-2016-10-13 (@2891ec5)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Oct 13 15:05:25 2016 (1476371125)\nBuild timestamp: 1476371125\nBuild timestamp as int: 1476371125\n\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n# install tensorflow\ngit clone https://github.com/tensorflow/tensorflow\ncd tensorflow\ncurl -L https://github.com/tensorflow/tensorflow/pull/4983.patch | git am -\n\n# set configuration parameters\nexport PYTHON_BIN_PATH=`which python3` # ~/stdpy3/bin/python3\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_NEED_CUDA=1\nexport GCC_HOST_COMPILER_PATH=`which gcc` # /appl/gcc/4.9.2/bin/gcc\nexport TF_CUDA_VERSION=8.0\nexport CUDA_TOOLKIT_PATH=/appl/cuda/8.0/\nexport TF_CUDNN_VERSION=5\nexport CUDNN_INSTALL_PATH=$HOME/cuda/ # the cuDNN version provide IT is too old (5.0.4), so I downloaded the latest and unpacked it in $HOME\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2\"\n\ncat > $HOME/.bazelrc <<EOF\n# --batch: always run in batch mode, since there are some firewall issues.\n# --output_user_root: HOME is NFS (filesystem), this will not work with bazel, use WORKDIR instead\nstartup --batch --output_user_root=$WORKDIR/.bazel\nEOF\n\n# one python configuration can't be set directly use yes to accept automatically\nyes \"\" | CC=gcc CXX=g++ ./configure\n\n# build tensorflow\nCC=gcc CXX=g++ bazel build --copt=\"-w\" \\\n--ignore_unsupported_sandboxing --spawn_strategy=standalone --verbose_failures \\\n-c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n\nWhat other attempted solutions have you tried?\n\nI've tried symlinking gcc and as into the same path, but then cc1 and the gcc header files can't be found.\nI've tried searching for how bazel or tensorflow finds as but I can't find that code.\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).\nfull log: https://gist.github.com/AndreasMadsen/7bf11dcf5c53981e532f67850e5b2b9b\ngcc: error trying to exec 'as': execvp: No such file or directory\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/contrib/rnn/BUILD:101:1: output 'tensorflow/contrib/rnn/_objs/python/ops/_gru_ops_gpu/tensorflow/contrib/rnn/kernels/gru_ops_gpu.cu.pic.o' was not created.\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/contrib/rnn/BUILD:101:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 320.454s, Critical Path: 196.64s", "body": "I think the problem is that `as` wasn't installed with `gcc` and thus `gcc -print-prog-name=as` just prints `as`. `as` is in my path, but not in the same location as `gcc`.\n\n```\n$ which gcc\n/appl/gcc/4.9.2/bin/gcc\n$ which as\n/appl/binutils/2.25.1/bin/as\n```\n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nthere are a couple:\n- gcc: error trying to exec 'as': execvp: No such file or directory: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=40339\n- gcc: error trying to exec 'as': execvp: No such file or directory https://decibel.ni.com/content/thread/39592\n- Building TensorFlow with custom GCC requires hardcoded ld,nm and as https://github.com/bazelbuild/bazel/issues/1713 \u2013 I tried setting `build --action_env=PATH`, but that did change anything.\n### Environment info\n\nOperating System:\n\n```\n$ uname -a\nLinux n-62-18-47 2.6.32-573.22.1.el6.x86_64 #1 SMP Tue Mar 22 17:15:28 CDT 2016 x86_64 x86_64 x86_64 GNU/Linux \n```\n\nInstalled version of CUDA and cuDNN: CUDA: 8.0, cuDNN 5.1.5\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\n\n```\n$  ls -l /appl/cuda/8.0/lib64/libcud*\n-rw-r--r-- 1 sebo root 560184 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 sebo root     16 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 sebo root     19 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 sebo root 394472 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 sebo root 737516 Sep  1 14:31 /appl/cuda/8.0/lib64/libcudart_static.a\n```\n\nIf installed from source, provide \n1. The commit hash (`git rev-parse HEAD`): `f794cd393b1e7821fcc3cdcee9b6a4400f2540bf`\n2. The output of `bazel version`: \n\n```\n$ bazel --batch version\nINFO: Reading 'startup' options from /zhome/ff/2/77654/.bazelrc: --batch --output_user_root=/work1/s123598/.bazel\nBuild label: 0.3.2-2016-10-13 (@2891ec5)\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Oct 13 15:05:25 2016 (1476371125)\nBuild timestamp: 1476371125\nBuild timestamp as int: 1476371125\n```\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\n\n```\n# install tensorflow\ngit clone https://github.com/tensorflow/tensorflow\ncd tensorflow\ncurl -L https://github.com/tensorflow/tensorflow/pull/4983.patch | git am -\n\n# set configuration parameters\nexport PYTHON_BIN_PATH=`which python3` # ~/stdpy3/bin/python3\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=0\nexport TF_NEED_CUDA=1\nexport GCC_HOST_COMPILER_PATH=`which gcc` # /appl/gcc/4.9.2/bin/gcc\nexport TF_CUDA_VERSION=8.0\nexport CUDA_TOOLKIT_PATH=/appl/cuda/8.0/\nexport TF_CUDNN_VERSION=5\nexport CUDNN_INSTALL_PATH=$HOME/cuda/ # the cuDNN version provide IT is too old (5.0.4), so I downloaded the latest and unpacked it in $HOME\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2\"\n\ncat > $HOME/.bazelrc <<EOF\n# --batch: always run in batch mode, since there are some firewall issues.\n# --output_user_root: HOME is NFS (filesystem), this will not work with bazel, use WORKDIR instead\nstartup --batch --output_user_root=$WORKDIR/.bazel\nEOF\n\n# one python configuration can't be set directly use yes to accept automatically\nyes \"\" | CC=gcc CXX=g++ ./configure\n\n# build tensorflow\nCC=gcc CXX=g++ bazel build --copt=\"-w\" \\\n--ignore_unsupported_sandboxing --spawn_strategy=standalone --verbose_failures \\\n-c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\n```\n### What other attempted solutions have you tried?\n- I've tried symlinking gcc and as into the same path, but then cc1 and the gcc header files can't be found.\n- I've tried searching for how bazel or tensorflow finds `as` but I can't find that code.\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment or provide link).\n\nfull log: https://gist.github.com/AndreasMadsen/7bf11dcf5c53981e532f67850e5b2b9b\n\n```\ngcc: error trying to exec 'as': execvp: No such file or directory\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/contrib/rnn/BUILD:101:1: output 'tensorflow/contrib/rnn/_objs/python/ops/_gru_ops_gpu/tensorflow/contrib/rnn/kernels/gru_ops_gpu.cu.pic.o' was not created.\nERROR: /zhome/ff/2/77654/tensorflow/tensorflow/contrib/rnn/BUILD:101:1: not all outputs were created.\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nINFO: Elapsed time: 320.454s, Critical Path: 196.64s\n```\n"}
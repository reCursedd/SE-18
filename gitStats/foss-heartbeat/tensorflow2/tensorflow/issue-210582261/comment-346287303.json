{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/346287303", "html_url": "https://github.com/tensorflow/tensorflow/issues/7927#issuecomment-346287303", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7927", "id": 346287303, "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjI4NzMwMw==", "user": {"login": "liuyujia1991", "id": 17818426, "node_id": "MDQ6VXNlcjE3ODE4NDI2", "avatar_url": "https://avatars2.githubusercontent.com/u/17818426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuyujia1991", "html_url": "https://github.com/liuyujia1991", "followers_url": "https://api.github.com/users/liuyujia1991/followers", "following_url": "https://api.github.com/users/liuyujia1991/following{/other_user}", "gists_url": "https://api.github.com/users/liuyujia1991/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuyujia1991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuyujia1991/subscriptions", "organizations_url": "https://api.github.com/users/liuyujia1991/orgs", "repos_url": "https://api.github.com/users/liuyujia1991/repos", "events_url": "https://api.github.com/users/liuyujia1991/events{/privacy}", "received_events_url": "https://api.github.com/users/liuyujia1991/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-22T09:06:52Z", "updated_at": "2017-11-22T09:06:52Z", "author_association": "NONE", "body_html": "<p>After check out the implementation of <code>variational_recurrent</code> in the <code>DropoutWrapper</code>, I'm a little confused. When <code>variational_recurrent=True</code>, the mask is generated when the wrapper is initialized before the training process, and is applied across every batch. Would it be better if a new mask be generated every batch as <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19931750\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/beeCwright\">@beeCwright</a> first requested?</p>\n<p>Since the wrapper implementation is to build a rnncell object, how can it be aware of a new batch is coming. From my limited understanding, only <code>dynamic_rnn</code> knows when a batch is coming and <code>rnncell</code> only deals with single timestep input and state.  Correct me if I'm wrong :P</p>", "body_text": "After check out the implementation of variational_recurrent in the DropoutWrapper, I'm a little confused. When variational_recurrent=True, the mask is generated when the wrapper is initialized before the training process, and is applied across every batch. Would it be better if a new mask be generated every batch as @beeCwright first requested?\nSince the wrapper implementation is to build a rnncell object, how can it be aware of a new batch is coming. From my limited understanding, only dynamic_rnn knows when a batch is coming and rnncell only deals with single timestep input and state.  Correct me if I'm wrong :P", "body": "After check out the implementation of `variational_recurrent` in the `DropoutWrapper`, I'm a little confused. When `variational_recurrent=True`, the mask is generated when the wrapper is initialized before the training process, and is applied across every batch. Would it be better if a new mask be generated every batch as @beeCwright first requested? \r\n\r\nSince the wrapper implementation is to build a rnncell object, how can it be aware of a new batch is coming. From my limited understanding, only `dynamic_rnn` knows when a batch is coming and `rnncell` only deals with single timestep input and state.  Correct me if I'm wrong :P"}
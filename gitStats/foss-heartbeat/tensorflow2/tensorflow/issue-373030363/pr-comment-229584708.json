{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/229584708", "pull_request_review_id": 170117300, "id": 229584708, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyOTU4NDcwOA==", "diff_hunk": "@@ -398,8 +398,13 @@ Status GrpcServer::Stop() {\n       state_ = STOPPED;\n       return Status::OK();\n     case STARTED:\n-      return errors::Unimplemented(\n-          \"Clean shutdown is not currently implemented\");\n+      server_->Shutdown();\n+      master_service_->Shutdown();\n+      worker_service_->Shutdown();\n+      eager_service_->Shutdown();\n+      state_ = STOPPED;\n+      LOG(INFO) << \"Server stopped (target: \" << target() << \")\";\n+      return Status::OK();", "path": "tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc", "position": 12, "original_position": 12, "commit_id": "56576ad348dfb5a858864e95e87434e514693c81", "original_commit_id": "d7d33062ad24afa008962559c834a8b5eda83612", "user": {"login": "dmitrievanthony", "id": 1028969, "node_id": "MDQ6VXNlcjEwMjg5Njk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1028969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitrievanthony", "html_url": "https://github.com/dmitrievanthony", "followers_url": "https://api.github.com/users/dmitrievanthony/followers", "following_url": "https://api.github.com/users/dmitrievanthony/following{/other_user}", "gists_url": "https://api.github.com/users/dmitrievanthony/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitrievanthony/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitrievanthony/subscriptions", "organizations_url": "https://api.github.com/users/dmitrievanthony/orgs", "repos_url": "https://api.github.com/users/dmitrievanthony/repos", "events_url": "https://api.github.com/users/dmitrievanthony/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitrievanthony/received_events", "type": "User", "site_admin": false}, "body": "Generally speaking, the requirements are very basic. I need to be able to start and stop gRPC servers inside process without restarting this process.\r\n\r\n**TL;DR** The situation is the following. I'd like to add an ability to delegate TensorFlow cluster manager functionality to Apache Ignite cluster manager system (it's java based platform for distributed computing). To do that I basically need to be able to start/stop TensorFlow server inside Apache Ignite Node Process. First of all, we don't have an ability to start gRPC server from Java, but I'm about to add this functionality in #23022. The only one thing stops me from using TensorFlow gRPC server from Java and implement to whole idea is that `stop()` doesn't work so far.", "created_at": "2018-10-31T07:20:31Z", "updated_at": "2018-11-01T07:31:00Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/23190#discussion_r229584708", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23190", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/229584708"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/23190#discussion_r229584708"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/23190"}}, "body_html": "<p>Generally speaking, the requirements are very basic. I need to be able to start and stop gRPC servers inside process without restarting this process.</p>\n<p><strong>TL;DR</strong> The situation is the following. I'd like to add an ability to delegate TensorFlow cluster manager functionality to Apache Ignite cluster manager system (it's java based platform for distributed computing). To do that I basically need to be able to start/stop TensorFlow server inside Apache Ignite Node Process. First of all, we don't have an ability to start gRPC server from Java, but I'm about to add this functionality in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"370570253\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/23022\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tensorflow/tensorflow/pull/23022/hovercard\" href=\"https://github.com/tensorflow/tensorflow/pull/23022\">#23022</a>. The only one thing stops me from using TensorFlow gRPC server from Java and implement to whole idea is that <code>stop()</code> doesn't work so far.</p>", "body_text": "Generally speaking, the requirements are very basic. I need to be able to start and stop gRPC servers inside process without restarting this process.\nTL;DR The situation is the following. I'd like to add an ability to delegate TensorFlow cluster manager functionality to Apache Ignite cluster manager system (it's java based platform for distributed computing). To do that I basically need to be able to start/stop TensorFlow server inside Apache Ignite Node Process. First of all, we don't have an ability to start gRPC server from Java, but I'm about to add this functionality in #23022. The only one thing stops me from using TensorFlow gRPC server from Java and implement to whole idea is that stop() doesn't work so far.", "in_reply_to_id": 227438700}
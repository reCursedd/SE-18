{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22029", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22029/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22029/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22029/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22029", "id": 356486544, "node_id": "MDU6SXNzdWUzNTY0ODY1NDQ=", "number": 22029, "title": "tf-1.10.1 freeze_graph 'list index out of range'", "user": {"login": "jiarenyf", "id": 12405578, "node_id": "MDQ6VXNlcjEyNDA1NTc4", "avatar_url": "https://avatars2.githubusercontent.com/u/12405578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiarenyf", "html_url": "https://github.com/jiarenyf", "followers_url": "https://api.github.com/users/jiarenyf/followers", "following_url": "https://api.github.com/users/jiarenyf/following{/other_user}", "gists_url": "https://api.github.com/users/jiarenyf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiarenyf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiarenyf/subscriptions", "organizations_url": "https://api.github.com/users/jiarenyf/orgs", "repos_url": "https://api.github.com/users/jiarenyf/repos", "events_url": "https://api.github.com/users/jiarenyf/events{/privacy}", "received_events_url": "https://api.github.com/users/jiarenyf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-09-03T12:28:47Z", "updated_at": "2018-10-12T06:57:39Z", "closed_at": "2018-10-12T06:57:39Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes.</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>:  Ubuntu 16.04</li>\n<li><strong>Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device</strong>:</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.10.1</li>\n<li><strong>Python version</strong>: 2.7.12</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>: 9.0 / 7.1</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>: N/A</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I use the following command to freeze a <code>ckpt</code> file to <code>pb</code> file:</p>\n<pre><code>    freeze_graph(\n        input_saver=None,\n        input_graph=pbTxt,\n        input_binary=False,\n        clear_devices=True,\n        output_graph=pbPath,\n        restore_op_name=None,\n        initializer_nodes=\"\",\n        input_meta_graph=None,\n        filename_tensor_name=None,\n        input_saved_model_dir=None,\n        output_node_names=outputOp,\n        variable_names_blacklist='',\n        input_checkpoint=iCheckpoint,\n    )\n</code></pre>\n<p>In <code>tf-1.8.0</code> everything seems well, however in tf-1.10.1, I meet the following error:</p>\n<pre><code>  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 254, in freeze_graph\n    checkpoint_version=checkpoint_version)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 128, in freeze_graph_with_def_protos\n    var_list=var_list, write_version=checkpoint_version)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1281, in __init__\n    self.build()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1293, in build\n    self._build(self._filename, build_save=True, build_restore=True)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1330, in _build\n    build_save=build_save, build_restore=build_restore)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 756, in _build_internal\n    saveables = self._ValidateAndSliceInputs(names_to_saveables)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 663, in _ValidateAndSliceInputs\n    for converted_saveable_object in self.SaveableObjectsForOp(op, name):\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 637, in SaveableObjectsForOp\n    variable, \"\", name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 121, in __init__\n    self.handle_op = var.op.inputs[0]\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2001, in __getitem__\n    return self._inputs[i]\nIndexError: list index out of range\n</code></pre>\n<p>I wonder why the <code>tf-1.10</code> is not tested before release ???</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes.\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Ubuntu 16.04\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): 1.10.1\nPython version: 2.7.12\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version: 9.0 / 7.1\nGPU model and memory: N/A\nExact command to reproduce: N/A\n\nDescribe the problem\nI use the following command to freeze a ckpt file to pb file:\n    freeze_graph(\n        input_saver=None,\n        input_graph=pbTxt,\n        input_binary=False,\n        clear_devices=True,\n        output_graph=pbPath,\n        restore_op_name=None,\n        initializer_nodes=\"\",\n        input_meta_graph=None,\n        filename_tensor_name=None,\n        input_saved_model_dir=None,\n        output_node_names=outputOp,\n        variable_names_blacklist='',\n        input_checkpoint=iCheckpoint,\n    )\n\nIn tf-1.8.0 everything seems well, however in tf-1.10.1, I meet the following error:\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 254, in freeze_graph\n    checkpoint_version=checkpoint_version)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 128, in freeze_graph_with_def_protos\n    var_list=var_list, write_version=checkpoint_version)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1281, in __init__\n    self.build()\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1293, in build\n    self._build(self._filename, build_save=True, build_restore=True)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1330, in _build\n    build_save=build_save, build_restore=build_restore)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 756, in _build_internal\n    saveables = self._ValidateAndSliceInputs(names_to_saveables)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 663, in _ValidateAndSliceInputs\n    for converted_saveable_object in self.SaveableObjectsForOp(op, name):\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 637, in SaveableObjectsForOp\n    variable, \"\", name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 121, in __init__\n    self.handle_op = var.op.inputs[0]\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2001, in __getitem__\n    return self._inputs[i]\nIndexError: list index out of range\n\nI wonder why the tf-1.10 is not tested before release ???", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.10.1\r\n- **Python version**: 2.7.12\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: 9.0 / 7.1\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n\r\n### Describe the problem\r\nI use the following command to freeze a `ckpt` file to `pb` file:\r\n\r\n```\r\n    freeze_graph(\r\n        input_saver=None,\r\n        input_graph=pbTxt,\r\n        input_binary=False,\r\n        clear_devices=True,\r\n        output_graph=pbPath,\r\n        restore_op_name=None,\r\n        initializer_nodes=\"\",\r\n        input_meta_graph=None,\r\n        filename_tensor_name=None,\r\n        input_saved_model_dir=None,\r\n        output_node_names=outputOp,\r\n        variable_names_blacklist='',\r\n        input_checkpoint=iCheckpoint,\r\n    )\r\n```\r\n\r\nIn `tf-1.8.0` everything seems well, however in tf-1.10.1, I meet the following error:\r\n\r\n```\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 254, in freeze_graph\r\n    checkpoint_version=checkpoint_version)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/freeze_graph.py\", line 128, in freeze_graph_with_def_protos\r\n    var_list=var_list, write_version=checkpoint_version)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1281, in __init__\r\n    self.build()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1293, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 1330, in _build\r\n    build_save=build_save, build_restore=build_restore)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 756, in _build_internal\r\n    saveables = self._ValidateAndSliceInputs(names_to_saveables)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 663, in _ValidateAndSliceInputs\r\n    for converted_saveable_object in self.SaveableObjectsForOp(op, name):\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 637, in SaveableObjectsForOp\r\n    variable, \"\", name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py\", line 121, in __init__\r\n    self.handle_op = var.op.inputs[0]\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2001, in __getitem__\r\n    return self._inputs[i]\r\nIndexError: list index out of range\r\n```\r\n\r\nI wonder why the `tf-1.10` is not tested before release ???\r\n\r\n"}
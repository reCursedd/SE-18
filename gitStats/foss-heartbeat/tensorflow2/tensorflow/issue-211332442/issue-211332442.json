{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8004", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8004/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8004/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8004/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8004", "id": 211332442, "node_id": "MDU6SXNzdWUyMTEzMzI0NDI=", "number": 8004, "title": "tf.contrib.slim API not support tensorflow newest API", "user": {"login": "jinfagang", "id": 21303438, "node_id": "MDQ6VXNlcjIxMzAzNDM4", "avatar_url": "https://avatars3.githubusercontent.com/u/21303438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinfagang", "html_url": "https://github.com/jinfagang", "followers_url": "https://api.github.com/users/jinfagang/followers", "following_url": "https://api.github.com/users/jinfagang/following{/other_user}", "gists_url": "https://api.github.com/users/jinfagang/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinfagang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinfagang/subscriptions", "organizations_url": "https://api.github.com/users/jinfagang/orgs", "repos_url": "https://api.github.com/users/jinfagang/repos", "events_url": "https://api.github.com/users/jinfagang/events{/privacy}", "received_events_url": "https://api.github.com/users/jinfagang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-02T09:19:54Z", "updated_at": "2017-03-09T15:59:21Z", "closed_at": "2017-03-02T23:50:15Z", "author_association": "NONE", "body_html": "<p>I like using slim write cnn net structures, but there is something emergency to catch up tensorflow newest API,<br>\nthis simple code got deprecate warning follow!</p>\n<pre><code>predictions = inference.lenet(images, num_classes=FLAGS.num_classes+1, activation_fn=None)\nslim.losses.softmax_cross_entropy(predictions, labels)\n</code></pre>\n<pre><code>softmax_cross_entropy (from tensorflow.contrib.losses.python.losses.loss_ops) is deprecated and will be removed after 2016-12-30.\nInstructions for updating:\nUse tf.losses.softmax_cross_entropy instead.\nWARNING:tensorflow:From /usr/local/lib/python3.6/site-packages/tensorflow/contrib/losses/python/losses/loss_ops.py:394: compute_weighted_loss (from tensorflow.contrib.losses.python.losses.loss_ops) is deprecated and will be removed after 2016-12-30.\nInstructions for updating:\nUse tf.losses.compute_weighted_loss instead.\n</code></pre>\n<p>I think this is essue about slim.losses, however I tried using <code>tf.losses.softmax_cross_entropy</code>instead, got this error:</p>\n<pre><code>Traceback (most recent call last):\n  File \"train_tiny5_tensorflow.py\", line 154, in &lt;module&gt;\n    tf.app.run()\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"train_tiny5_tensorflow.py\", line 150, in main\n    run_training()\n  File \"train_tiny5_tensorflow.py\", line 128, in run_training\n    tf.losses.softmax_cross_entropy(predictions, labels)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/losses/losses_impl.py\", line 529, in softmax_cross_entropy\n    name=\"xentropy\")\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/nn_ops.py\", line 1617, in softmax_cross_entropy_with_logits\n    precise_logits, labels, name=name)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 2265, in _softmax_cross_entropy_with_logits\n    features=features, labels=labels, name=name)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 585, in apply_op\n    param_name=input_name)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 61, in _SatisfiesTypeConstraint\n    \", \".join(dtypes.as_dtype(x).name for x in allowed_list)))\nTypeError: Value passed to parameter 'features' has DataType int32 not in list of allowed values: float16, float32, float64\n</code></pre>", "body_text": "I like using slim write cnn net structures, but there is something emergency to catch up tensorflow newest API,\nthis simple code got deprecate warning follow!\npredictions = inference.lenet(images, num_classes=FLAGS.num_classes+1, activation_fn=None)\nslim.losses.softmax_cross_entropy(predictions, labels)\n\nsoftmax_cross_entropy (from tensorflow.contrib.losses.python.losses.loss_ops) is deprecated and will be removed after 2016-12-30.\nInstructions for updating:\nUse tf.losses.softmax_cross_entropy instead.\nWARNING:tensorflow:From /usr/local/lib/python3.6/site-packages/tensorflow/contrib/losses/python/losses/loss_ops.py:394: compute_weighted_loss (from tensorflow.contrib.losses.python.losses.loss_ops) is deprecated and will be removed after 2016-12-30.\nInstructions for updating:\nUse tf.losses.compute_weighted_loss instead.\n\nI think this is essue about slim.losses, however I tried using tf.losses.softmax_cross_entropyinstead, got this error:\nTraceback (most recent call last):\n  File \"train_tiny5_tensorflow.py\", line 154, in <module>\n    tf.app.run()\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 44, in run\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\n  File \"train_tiny5_tensorflow.py\", line 150, in main\n    run_training()\n  File \"train_tiny5_tensorflow.py\", line 128, in run_training\n    tf.losses.softmax_cross_entropy(predictions, labels)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/losses/losses_impl.py\", line 529, in softmax_cross_entropy\n    name=\"xentropy\")\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/nn_ops.py\", line 1617, in softmax_cross_entropy_with_logits\n    precise_logits, labels, name=name)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 2265, in _softmax_cross_entropy_with_logits\n    features=features, labels=labels, name=name)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 585, in apply_op\n    param_name=input_name)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 61, in _SatisfiesTypeConstraint\n    \", \".join(dtypes.as_dtype(x).name for x in allowed_list)))\nTypeError: Value passed to parameter 'features' has DataType int32 not in list of allowed values: float16, float32, float64", "body": "I like using slim write cnn net structures, but there is something emergency to catch up tensorflow newest API, \r\nthis simple code got deprecate warning follow!\r\n```\r\npredictions = inference.lenet(images, num_classes=FLAGS.num_classes+1, activation_fn=None)\r\nslim.losses.softmax_cross_entropy(predictions, labels)\r\n```\r\n\r\n```\r\nsoftmax_cross_entropy (from tensorflow.contrib.losses.python.losses.loss_ops) is deprecated and will be removed after 2016-12-30.\r\nInstructions for updating:\r\nUse tf.losses.softmax_cross_entropy instead.\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/site-packages/tensorflow/contrib/losses/python/losses/loss_ops.py:394: compute_weighted_loss (from tensorflow.contrib.losses.python.losses.loss_ops) is deprecated and will be removed after 2016-12-30.\r\nInstructions for updating:\r\nUse tf.losses.compute_weighted_loss instead.\r\n```\r\nI think this is essue about slim.losses, however I tried using `tf.losses.softmax_cross_entropy`instead, got this error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"train_tiny5_tensorflow.py\", line 154, in <module>\r\n    tf.app.run()\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 44, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"train_tiny5_tensorflow.py\", line 150, in main\r\n    run_training()\r\n  File \"train_tiny5_tensorflow.py\", line 128, in run_training\r\n    tf.losses.softmax_cross_entropy(predictions, labels)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/losses/losses_impl.py\", line 529, in softmax_cross_entropy\r\n    name=\"xentropy\")\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/nn_ops.py\", line 1617, in softmax_cross_entropy_with_logits\r\n    precise_logits, labels, name=name)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 2265, in _softmax_cross_entropy_with_logits\r\n    features=features, labels=labels, name=name)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 585, in apply_op\r\n    param_name=input_name)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 61, in _SatisfiesTypeConstraint\r\n    \", \".join(dtypes.as_dtype(x).name for x in allowed_list)))\r\nTypeError: Value passed to parameter 'features' has DataType int32 not in list of allowed values: float16, float32, float64\r\n```"}
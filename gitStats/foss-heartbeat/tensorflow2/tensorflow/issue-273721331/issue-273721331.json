{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14540", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14540/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14540/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14540/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14540", "id": 273721331, "node_id": "MDU6SXNzdWUyNzM3MjEzMzE=", "number": 14540, "title": "Wrong protobuf BUILD rule while compiling tensorflow on powerpc ", "user": {"login": "onursertkaya", "id": 30496250, "node_id": "MDQ6VXNlcjMwNDk2MjUw", "avatar_url": "https://avatars0.githubusercontent.com/u/30496250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onursertkaya", "html_url": "https://github.com/onursertkaya", "followers_url": "https://api.github.com/users/onursertkaya/followers", "following_url": "https://api.github.com/users/onursertkaya/following{/other_user}", "gists_url": "https://api.github.com/users/onursertkaya/gists{/gist_id}", "starred_url": "https://api.github.com/users/onursertkaya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onursertkaya/subscriptions", "organizations_url": "https://api.github.com/users/onursertkaya/orgs", "repos_url": "https://api.github.com/users/onursertkaya/repos", "events_url": "https://api.github.com/users/onursertkaya/events{/privacy}", "received_events_url": "https://api.github.com/users/onursertkaya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-11-14T09:29:06Z", "updated_at": "2018-10-24T20:54:43Z", "closed_at": "2018-10-24T20:54:43Z", "author_association": "NONE", "body_html": "<h3>System Info</h3>\n<ul>\n<li><strong>No custom code is written</strong></li>\n<li><strong>Ubuntu 16.04 on powerpc (ppc64le)</strong></li>\n<li><strong>Installing from source</strong></li>\n<li><strong>Tensorflow v1.4.0</strong></li>\n<li><strong>python 3.5.2</strong></li>\n<li><strong>bazel 0.7.0</strong></li>\n<li><strong><code>gcc --version</code> output: gcc (Ubuntu/IBM 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609</strong></li>\n<li><strong>CUDA 8.0, cuDNN 5.1</strong></li>\n<li><strong>NVIDIA Tesla P100</strong></li>\n</ul>\n<h3>Describe the problem</h3>\n<p>I tried to build Tensorflow from sources. While <code>./configure</code>ing, I did the following;</p>\n<p><code>Please specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -mcpu=native]: -mcpu=native -mtune=native</code></p>\n<p>because I'm on a powerpc. (-march=native is not recognized, already denoted by [Default -mcpu=native])</p>\n<p>After executing <code>bazel build --config=opt --config=cuda tensorflow/tools/pip_package:build_pip_package</code>, it starts to download and compile protobuf, I immediately get the following,</p>\n<p><code>ERROR: /home/powerpc/.cache/bazel/_bazel_powerpc/7ad07c846e34c4f733a905eaa47f3cba/external/protobuf_archive/BUILD:265:1: C++ compilation of rule '@protobuf_archive//:js_embed' failed (Exit 1). gcc: error: unrecognized command line option '-march=native' Target //tensorflow/tools/pip_package:build_pip_package failed to build Use --verbose_failures to see the command lines of failed build steps. INFO: Elapsed time: 18.579s, Critical Path: 6.01s</code></p>\n<p>I believe this stems from a wrong BUILD rule for protobuf, it defaults to [-march=native]. I wasn't able to find the relevant BUILD file to fix.</p>\n<h3>Edit</h3>\n<p>After trying again, this time I get the same error for highwayhash. This is about third_party packages, should I have to edit all BUILD rules manually?</p>", "body_text": "System Info\n\nNo custom code is written\nUbuntu 16.04 on powerpc (ppc64le)\nInstalling from source\nTensorflow v1.4.0\npython 3.5.2\nbazel 0.7.0\ngcc --version output: gcc (Ubuntu/IBM 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609\nCUDA 8.0, cuDNN 5.1\nNVIDIA Tesla P100\n\nDescribe the problem\nI tried to build Tensorflow from sources. While ./configureing, I did the following;\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -mcpu=native]: -mcpu=native -mtune=native\nbecause I'm on a powerpc. (-march=native is not recognized, already denoted by [Default -mcpu=native])\nAfter executing bazel build --config=opt --config=cuda tensorflow/tools/pip_package:build_pip_package, it starts to download and compile protobuf, I immediately get the following,\nERROR: /home/powerpc/.cache/bazel/_bazel_powerpc/7ad07c846e34c4f733a905eaa47f3cba/external/protobuf_archive/BUILD:265:1: C++ compilation of rule '@protobuf_archive//:js_embed' failed (Exit 1). gcc: error: unrecognized command line option '-march=native' Target //tensorflow/tools/pip_package:build_pip_package failed to build Use --verbose_failures to see the command lines of failed build steps. INFO: Elapsed time: 18.579s, Critical Path: 6.01s\nI believe this stems from a wrong BUILD rule for protobuf, it defaults to [-march=native]. I wasn't able to find the relevant BUILD file to fix.\nEdit\nAfter trying again, this time I get the same error for highwayhash. This is about third_party packages, should I have to edit all BUILD rules manually?", "body": "### System Info\r\n- **No custom code is written**\r\n- **Ubuntu 16.04 on powerpc (ppc64le)**\r\n- **Installing from source**\r\n- **Tensorflow v1.4.0**\r\n- **python 3.5.2**\r\n- **bazel 0.7.0**\r\n- **`gcc --version` output: gcc (Ubuntu/IBM 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609**\r\n- **CUDA 8.0, cuDNN 5.1**\r\n- **NVIDIA Tesla P100**\r\n\r\n### Describe the problem\r\nI tried to build Tensorflow from sources. While `./configure`ing, I did the following;\r\n\r\n`Please specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -mcpu=native]: -mcpu=native -mtune=native`\r\n\r\nbecause I'm on a powerpc. (-march=native is not recognized, already denoted by [Default -mcpu=native])\r\n\r\nAfter executing `bazel build --config=opt --config=cuda tensorflow/tools/pip_package:build_pip_package`, it starts to download and compile protobuf, I immediately get the following, \r\n\r\n`ERROR: /home/powerpc/.cache/bazel/_bazel_powerpc/7ad07c846e34c4f733a905eaa47f3cba/external/protobuf_archive/BUILD:265:1: C++ compilation of rule '@protobuf_archive//:js_embed' failed (Exit 1).\r\ngcc: error: unrecognized command line option '-march=native'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 18.579s, Critical Path: 6.01s`\r\n\r\nI believe this stems from a wrong BUILD rule for protobuf, it defaults to [-march=native]. I wasn't able to find the relevant BUILD file to fix.\r\n\r\n### Edit\r\nAfter trying again, this time I get the same error for highwayhash. This is about third_party packages, should I have to edit all BUILD rules manually?"}
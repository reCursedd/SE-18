{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5630", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5630/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5630/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5630/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5630", "id": 189527722, "node_id": "MDU6SXNzdWUxODk1Mjc3MjI=", "number": 5630, "title": "`_bag_features` doesn't work properly in Random Forest (TensorForest)", "user": {"login": "craymichael", "id": 20629897, "node_id": "MDQ6VXNlcjIwNjI5ODk3", "avatar_url": "https://avatars2.githubusercontent.com/u/20629897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craymichael", "html_url": "https://github.com/craymichael", "followers_url": "https://api.github.com/users/craymichael/followers", "following_url": "https://api.github.com/users/craymichael/following{/other_user}", "gists_url": "https://api.github.com/users/craymichael/gists{/gist_id}", "starred_url": "https://api.github.com/users/craymichael/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craymichael/subscriptions", "organizations_url": "https://api.github.com/users/craymichael/orgs", "repos_url": "https://api.github.com/users/craymichael/repos", "events_url": "https://api.github.com/users/craymichael/events{/privacy}", "received_events_url": "https://api.github.com/users/craymichael/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-11-15T22:39:10Z", "updated_at": "2016-11-18T15:04:18Z", "closed_at": "2016-11-16T18:51:06Z", "author_association": "NONE", "body_html": "<p>TensorFlow r0.10 , but code appears to be the same in master.</p>\n<h3>To Reproduce</h3>\n<p>Create Random Forest (<code>tf.contrib.learn.TensorForestEstimator</code>) with default parameters (<code>ForestHParams</code>) with the exception of setting <code>feature_bagging_fraction</code> to anything below 1.0 e.g. 0.8. I believe the issue lies in the <code>_bag_features</code> implementation in <code>tensor_forest.py</code>.</p>\n<h3>Traceback</h3>\n<pre><code>Traceback (most recent call last):\n  File \"/.../train.py\", line 55, in train\n    monitors=monitors)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 240, in fit\n    max_steps=max_steps)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 550, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/random_forest.py\", line 163, in _get_train_ops\n    **self.training_args),\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/tensor_forest/python/tensor_forest.py\", line 369, in training_graph\n    tree_data = self._bag_features(i, tree_data)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/tensor_forest/python/tensor_forest.py\", line 325, in _bag_features\n    split_data = array_ops.split(1, self.params.num_features, input_data)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 980, in split\n    name=name)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2231, in _split\n    num_split=num_split, name=name)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 627, in apply_op\n    (key, op_type_name, attr_value.i, attr_def.minimum))\nValueError: Attr 'num_split' of 'Split' Op passed 0 less than minimum 1.\n</code></pre>", "body_text": "TensorFlow r0.10 , but code appears to be the same in master.\nTo Reproduce\nCreate Random Forest (tf.contrib.learn.TensorForestEstimator) with default parameters (ForestHParams) with the exception of setting feature_bagging_fraction to anything below 1.0 e.g. 0.8. I believe the issue lies in the _bag_features implementation in tensor_forest.py.\nTraceback\nTraceback (most recent call last):\n  File \"/.../train.py\", line 55, in train\n    monitors=monitors)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 240, in fit\n    max_steps=max_steps)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 550, in _train_model\n    train_op, loss_op = self._get_train_ops(features, targets)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/random_forest.py\", line 163, in _get_train_ops\n    **self.training_args),\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/tensor_forest/python/tensor_forest.py\", line 369, in training_graph\n    tree_data = self._bag_features(i, tree_data)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/tensor_forest/python/tensor_forest.py\", line 325, in _bag_features\n    split_data = array_ops.split(1, self.params.num_features, input_data)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 980, in split\n    name=name)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2231, in _split\n    num_split=num_split, name=name)\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 627, in apply_op\n    (key, op_type_name, attr_value.i, attr_def.minimum))\nValueError: Attr 'num_split' of 'Split' Op passed 0 less than minimum 1.", "body": "TensorFlow r0.10 , but code appears to be the same in master.\r\n\r\n### To Reproduce\r\nCreate Random Forest (`tf.contrib.learn.TensorForestEstimator`) with default parameters (`ForestHParams`) with the exception of setting `feature_bagging_fraction` to anything below 1.0 e.g. 0.8. I believe the issue lies in the `_bag_features` implementation in `tensor_forest.py`.\r\n\r\n### Traceback\r\n```\r\nTraceback (most recent call last):\r\n  File \"/.../train.py\", line 55, in train\r\n    monitors=monitors)\r\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 240, in fit\r\n    max_steps=max_steps)\r\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 550, in _train_model\r\n    train_op, loss_op = self._get_train_ops(features, targets)\r\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/estimators/random_forest.py\", line 163, in _get_train_ops\r\n    **self.training_args),\r\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/tensor_forest/python/tensor_forest.py\", line 369, in training_graph\r\n    tree_data = self._bag_features(i, tree_data)\r\n  File \"/usr/local/python2.7/dist-packages/tensorflow/contrib/tensor_forest/python/tensor_forest.py\", line 325, in _bag_features\r\n    split_data = array_ops.split(1, self.params.num_features, input_data)\r\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 980, in split\r\n    name=name)\r\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 2231, in _split\r\n    num_split=num_split, name=name)\r\n  File \"/usr/local/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 627, in apply_op\r\n    (key, op_type_name, attr_value.i, attr_def.minimum))\r\nValueError: Attr 'num_split' of 'Split' Op passed 0 less than minimum 1.\r\n```\r\n"}
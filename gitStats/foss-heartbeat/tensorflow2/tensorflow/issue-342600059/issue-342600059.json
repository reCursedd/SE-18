{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20956", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20956/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20956/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20956/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20956", "id": 342600059, "node_id": "MDU6SXNzdWUzNDI2MDAwNTk=", "number": 20956, "title": "tensorflow.contrib.autograph generated the code to update variables with conditions but throws UnboundLocalError", "user": {"login": "tobegit3hub", "id": 2715000, "node_id": "MDQ6VXNlcjI3MTUwMDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/2715000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tobegit3hub", "html_url": "https://github.com/tobegit3hub", "followers_url": "https://api.github.com/users/tobegit3hub/followers", "following_url": "https://api.github.com/users/tobegit3hub/following{/other_user}", "gists_url": "https://api.github.com/users/tobegit3hub/gists{/gist_id}", "starred_url": "https://api.github.com/users/tobegit3hub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tobegit3hub/subscriptions", "organizations_url": "https://api.github.com/users/tobegit3hub/orgs", "repos_url": "https://api.github.com/users/tobegit3hub/repos", "events_url": "https://api.github.com/users/tobegit3hub/events{/privacy}", "received_events_url": "https://api.github.com/users/tobegit3hub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 969831806, "node_id": "MDU6TGFiZWw5Njk4MzE4MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/WIP", "name": "WIP", "color": "f4c77f", "default": false}], "state": "open", "locked": false, "assignee": {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-07-19T06:51:15Z", "updated_at": "2018-11-20T13:29:22Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<h3>Environment</h3>\n<p>python3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"<br>\nv1.9.0-rc2-724-gc0dbd7e456 1.10.0-dev20180718</p>\n<p>== cat /etc/issue ===============================================<br>\nLinux localhost 4.15.13-x86_64-linode106 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Tue Mar 27 14:42:14 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION=\"16.04.4 LTS (Xenial Xerus)\"<br>\nVERSION_ID=\"16.04\"<br>\nVERSION_CODENAME=xenial</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>\nCopyright (C) 2015 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux localhost 4.15.13-x86_64-linode106 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Tue Mar 27 14:42:14 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nnumpy             1.14.5<br>\nprotobuf          3.6.0</p>\n<p>== check for virtualenv =========================================<br>\nFalse</p>\n<p>== tensorflow import ============================================<br>\ntf.VERSION = 1.6.0<br>\ntf.GIT_VERSION = v1.6.0-0-gd2e24b6039<br>\ntf.COMPILER_VERSION = v1.6.0-0-gd2e24b6039<br>\nSanity check: array([1], dtype=int32)</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH is unset<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\n./tf_env_collect.sh: line 105: nvidia-smi: command not found</p>\n<p>== cuda libs  ===================================================</p>\n<h3>Describe the problem</h3>\n<p>We use <code>tensorflow.contrib.autograph</code> and try to update the variable with conditional logic. The code is simple and should work with Python.</p>\n<pre><code>a = \"test\"\nif x == 0:\n  a = \"test1\"\nelse:\n  a = \"test2\"\n</code></pre>\n<p>But it throws <code>UnboundLocalError</code> and unable to access the existing variables.</p>\n<h3>Source code / logs</h3>\n<p>Here is the example code to reproduce the issue.</p>\n<pre><code>#!/usr/bin/env python\n\nimport tensorflow as tf\nfrom tensorflow.contrib import autograph as ag\n\ndef f(x):\n  a = \"test\"\n  if x == 0:\n    a = \"test1\"\n  else:\n    a = \"test2\"\n\nconverted_f = ag.to_graph(f)\n\nprint(ag.to_code(f))\nprint(converted_f(tf.constant(-1)))\n</code></pre>\n<p>And it is the generated code of the above code.</p>\n<pre><code>from __future__ import print_function\nimport tensorflow as tf\n\ndef tf__f(x):\n  try:\n    with tf.name_scope('f'):\n      a = 'test'\n\n      def if_true():\n        with tf.name_scope('if_true'):\n          a, = a,\n          a = 'test1'\n          return 1,\n\n      def if_false():\n        with tf.name_scope('if_false'):\n          a_1, = a,\n          a_1 = 'test2'\n          return 1,\n      with ag__.utils.control_dependency_on_returns(ag__.utils.run_cond(tf.\n          equal(x, 0), if_true, if_false)):\n        x_1, if_true_1, if_false_1 = ag__.utils.alias_tensors(x, if_true,\n            if_false)\n  except:\n    ag__.rewrite_graph_construction_error(ag_source_map__)\n</code></pre>\n<p>It is the full error log when try to run generated graph with test data.</p>\n<pre><code>Traceback (most recent call last):\n  File \"/tmp/tmpn2n1i2l2.py\", line 20, in tf__f\n    equal(x, 0), if_true, if_false)):\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/utils/multiple_dispatch.py\", line 50, in run_cond\n    return control_flow_ops.cond(condition, true_fn, false_fn)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\n    return func(*args, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2048, in cond\n    orig_res_t, res_t = context_t.BuildCondBranch(true_fn)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1895, in BuildCondBranch\n    original_result = fn()\n  File \"/tmp/tmpn2n1i2l2.py\", line 10, in if_true\n    a, = a,\nUnboundLocalError: local variable 'a' referenced before assignment\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"./demo2.py\", line 16, in &lt;module&gt;\n    print(converted_f(tf.constant(-1)))\n  File \"/tmp/tmpn2n1i2l2.py\", line 24, in tf__f\n    ag__.rewrite_graph_construction_error(ag_source_map__)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/core/errors.py\", line 158, in rewrite_graph_construction_error\n    raise new_error\ntensorflow.contrib.autograph.core.errors.GraphConstructionError: Traceback (most recent call last):\n  File \"./demo2.py\", line 8, in f\n    if x == 0:\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/utils/multiple_dispatch.py\", line 50, in run_cond\n    return control_flow_ops.cond(condition, true_fn, false_fn)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\n    return func(*args, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2048, in cond\n    orig_res_t, res_t = context_t.BuildCondBranch(true_fn)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1895, in BuildCondBranch\n    original_result = fn()\n  File \"/tmp/tmpn2n1i2l2.py\", line 10, in if_true\n    a, = a,\n\nlocal variable 'a' referenced before assignment\n</code></pre>", "body_text": "Environment\npython3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nv1.9.0-rc2-724-gc0dbd7e456 1.10.0-dev20180718\n== cat /etc/issue ===============================================\nLinux localhost 4.15.13-x86_64-linode106 #1 SMP Tue Mar 27 14:42:14 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"16.04.4 LTS (Xenial Xerus)\"\nVERSION_ID=\"16.04\"\nVERSION_CODENAME=xenial\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux localhost 4.15.13-x86_64-linode106 #1 SMP Tue Mar 27 14:42:14 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\nnumpy             1.14.5\nprotobuf          3.6.0\n== check for virtualenv =========================================\nFalse\n== tensorflow import ============================================\ntf.VERSION = 1.6.0\ntf.GIT_VERSION = v1.6.0-0-gd2e24b6039\ntf.COMPILER_VERSION = v1.6.0-0-gd2e24b6039\nSanity check: array([1], dtype=int32)\n== env ==========================================================\nLD_LIBRARY_PATH is unset\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\n== cuda libs  ===================================================\nDescribe the problem\nWe use tensorflow.contrib.autograph and try to update the variable with conditional logic. The code is simple and should work with Python.\na = \"test\"\nif x == 0:\n  a = \"test1\"\nelse:\n  a = \"test2\"\n\nBut it throws UnboundLocalError and unable to access the existing variables.\nSource code / logs\nHere is the example code to reproduce the issue.\n#!/usr/bin/env python\n\nimport tensorflow as tf\nfrom tensorflow.contrib import autograph as ag\n\ndef f(x):\n  a = \"test\"\n  if x == 0:\n    a = \"test1\"\n  else:\n    a = \"test2\"\n\nconverted_f = ag.to_graph(f)\n\nprint(ag.to_code(f))\nprint(converted_f(tf.constant(-1)))\n\nAnd it is the generated code of the above code.\nfrom __future__ import print_function\nimport tensorflow as tf\n\ndef tf__f(x):\n  try:\n    with tf.name_scope('f'):\n      a = 'test'\n\n      def if_true():\n        with tf.name_scope('if_true'):\n          a, = a,\n          a = 'test1'\n          return 1,\n\n      def if_false():\n        with tf.name_scope('if_false'):\n          a_1, = a,\n          a_1 = 'test2'\n          return 1,\n      with ag__.utils.control_dependency_on_returns(ag__.utils.run_cond(tf.\n          equal(x, 0), if_true, if_false)):\n        x_1, if_true_1, if_false_1 = ag__.utils.alias_tensors(x, if_true,\n            if_false)\n  except:\n    ag__.rewrite_graph_construction_error(ag_source_map__)\n\nIt is the full error log when try to run generated graph with test data.\nTraceback (most recent call last):\n  File \"/tmp/tmpn2n1i2l2.py\", line 20, in tf__f\n    equal(x, 0), if_true, if_false)):\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/utils/multiple_dispatch.py\", line 50, in run_cond\n    return control_flow_ops.cond(condition, true_fn, false_fn)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\n    return func(*args, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2048, in cond\n    orig_res_t, res_t = context_t.BuildCondBranch(true_fn)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1895, in BuildCondBranch\n    original_result = fn()\n  File \"/tmp/tmpn2n1i2l2.py\", line 10, in if_true\n    a, = a,\nUnboundLocalError: local variable 'a' referenced before assignment\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"./demo2.py\", line 16, in <module>\n    print(converted_f(tf.constant(-1)))\n  File \"/tmp/tmpn2n1i2l2.py\", line 24, in tf__f\n    ag__.rewrite_graph_construction_error(ag_source_map__)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/core/errors.py\", line 158, in rewrite_graph_construction_error\n    raise new_error\ntensorflow.contrib.autograph.core.errors.GraphConstructionError: Traceback (most recent call last):\n  File \"./demo2.py\", line 8, in f\n    if x == 0:\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/utils/multiple_dispatch.py\", line 50, in run_cond\n    return control_flow_ops.cond(condition, true_fn, false_fn)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\n    return func(*args, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2048, in cond\n    orig_res_t, res_t = context_t.BuildCondBranch(true_fn)\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1895, in BuildCondBranch\n    original_result = fn()\n  File \"/tmp/tmpn2n1i2l2.py\", line 10, in if_true\n    a, = a,\n\nlocal variable 'a' referenced before assignment", "body": "### Environment\r\n\r\npython3 -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\nv1.9.0-rc2-724-gc0dbd7e456 1.10.0-dev20180718\r\n\r\n== cat /etc/issue ===============================================\r\nLinux localhost 4.15.13-x86_64-linode106 #1 SMP Tue Mar 27 14:42:14 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"16.04.4 LTS (Xenial Xerus)\"\r\nVERSION_ID=\"16.04\"\r\nVERSION_CODENAME=xenial\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux localhost 4.15.13-x86_64-linode106 #1 SMP Tue Mar 27 14:42:14 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy             1.14.5\r\nprotobuf          3.6.0\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.VERSION = 1.6.0\r\ntf.GIT_VERSION = v1.6.0-0-gd2e24b6039\r\ntf.COMPILER_VERSION = v1.6.0-0-gd2e24b6039\r\nSanity check: array([1], dtype=int32)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./tf_env_collect.sh: line 105: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n\r\n### Describe the problem\r\n\r\nWe use `tensorflow.contrib.autograph` and try to update the variable with conditional logic. The code is simple and should work with Python.\r\n\r\n``` \r\na = \"test\"\r\nif x == 0:\r\n  a = \"test1\"\r\nelse:\r\n  a = \"test2\"\r\n```\r\n\r\nBut it throws `UnboundLocalError` and unable to access the existing variables.\r\n\r\n### Source code / logs\r\n\r\nHere is the example code to reproduce the issue.\r\n\r\n```\r\n#!/usr/bin/env python\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.contrib import autograph as ag\r\n\r\ndef f(x):\r\n  a = \"test\"\r\n  if x == 0:\r\n    a = \"test1\"\r\n  else:\r\n    a = \"test2\"\r\n\r\nconverted_f = ag.to_graph(f)\r\n\r\nprint(ag.to_code(f))\r\nprint(converted_f(tf.constant(-1)))\r\n```\r\n\r\nAnd it is the generated code of the above code.\r\n\r\n```\r\nfrom __future__ import print_function\r\nimport tensorflow as tf\r\n\r\ndef tf__f(x):\r\n  try:\r\n    with tf.name_scope('f'):\r\n      a = 'test'\r\n\r\n      def if_true():\r\n        with tf.name_scope('if_true'):\r\n          a, = a,\r\n          a = 'test1'\r\n          return 1,\r\n\r\n      def if_false():\r\n        with tf.name_scope('if_false'):\r\n          a_1, = a,\r\n          a_1 = 'test2'\r\n          return 1,\r\n      with ag__.utils.control_dependency_on_returns(ag__.utils.run_cond(tf.\r\n          equal(x, 0), if_true, if_false)):\r\n        x_1, if_true_1, if_false_1 = ag__.utils.alias_tensors(x, if_true,\r\n            if_false)\r\n  except:\r\n    ag__.rewrite_graph_construction_error(ag_source_map__)\r\n```\r\n\r\nIt is the full error log when try to run generated graph with test data.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/tmp/tmpn2n1i2l2.py\", line 20, in tf__f\r\n    equal(x, 0), if_true, if_false)):\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/utils/multiple_dispatch.py\", line 50, in run_cond\r\n    return control_flow_ops.cond(condition, true_fn, false_fn)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2048, in cond\r\n    orig_res_t, res_t = context_t.BuildCondBranch(true_fn)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1895, in BuildCondBranch\r\n    original_result = fn()\r\n  File \"/tmp/tmpn2n1i2l2.py\", line 10, in if_true\r\n    a, = a,\r\nUnboundLocalError: local variable 'a' referenced before assignment\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"./demo2.py\", line 16, in <module>\r\n    print(converted_f(tf.constant(-1)))\r\n  File \"/tmp/tmpn2n1i2l2.py\", line 24, in tf__f\r\n    ag__.rewrite_graph_construction_error(ag_source_map__)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/core/errors.py\", line 158, in rewrite_graph_construction_error\r\n    raise new_error\r\ntensorflow.contrib.autograph.core.errors.GraphConstructionError: Traceback (most recent call last):\r\n  File \"./demo2.py\", line 8, in f\r\n    if x == 0:\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/autograph/utils/multiple_dispatch.py\", line 50, in run_cond\r\n    return control_flow_ops.cond(condition, true_fn, false_fn)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 2048, in cond\r\n    orig_res_t, res_t = context_t.BuildCondBranch(true_fn)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 1895, in BuildCondBranch\r\n    original_result = fn()\r\n  File \"/tmp/tmpn2n1i2l2.py\", line 10, in if_true\r\n    a, = a,\r\n\r\nlocal variable 'a' referenced before assignment\r\n```\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5650", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5650/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5650/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5650/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5650", "id": 189810370, "node_id": "MDU6SXNzdWUxODk4MTAzNzA=", "number": 5650, "title": "Problem running word2vec_optimized on Amazon GPU machine", "user": {"login": "ramja", "id": 5375352, "node_id": "MDQ6VXNlcjUzNzUzNTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5375352?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramja", "html_url": "https://github.com/ramja", "followers_url": "https://api.github.com/users/ramja/followers", "following_url": "https://api.github.com/users/ramja/following{/other_user}", "gists_url": "https://api.github.com/users/ramja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramja/subscriptions", "organizations_url": "https://api.github.com/users/ramja/orgs", "repos_url": "https://api.github.com/users/ramja/repos", "events_url": "https://api.github.com/users/ramja/events{/privacy}", "received_events_url": "https://api.github.com/users/ramja/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-11-16T19:06:13Z", "updated_at": "2016-11-18T17:20:17Z", "closed_at": "2016-11-18T17:20:08Z", "author_association": "NONE", "body_html": "<p>I've not found anyone reporting this specific issue. I'm trying to run tensorflow word2vec script on a aws<br>\ngpu machine through docker-nvidia container and getting this error:<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/595666/log.txt\">log.txt</a></p>\n<h3>Environment info</h3>\n<p>Operating System: ubuntu 16.10 on a g2.2xlarge aws machine. Nvidia driver version 367.57</p>\n<p>Installed version of CUDA and cuDNN:<br>\nrunning on docker-nvidia tensorflow-0.11.0-gpu machine<br>\n(please attach the output of <code>ls -l /path/to/cuda/lib/libcud*</code>):<br>\n./usr/local/nvidia/lib64/libcuda.so<br>\n./usr/local/nvidia/lib64/libcuda.so.1<br>\n./usr/local/nvidia/lib64/libcuda.so.367.57<br>\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/stubs/libcuda.so<br>\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudadevrt.a<br>\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart_static.a<br>\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5<br>\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18<br>\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so<br>\n./usr/local/cuda-7.5/extras/Debugger/lib64/libcudacore.a<br>\n./usr/local/cuda-7.5/extras/Debugger/include/libcudacore.h<br>\n./usr/lib/x86_64-linux-gnu/libcudnn_static_v5.a<br>\n./usr/lib/x86_64-linux-gnu/libcudnn.so.5.1.3<br>\n./usr/lib/x86_64-linux-gnu/libcudnn_static.a<br>\n./usr/lib/x86_64-linux-gnu/libcudnn.so.5<br>\n./usr/lib/x86_64-linux-gnu/libcudnn.so</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>this is the command I executed and first lines of output:</p>\n<p>\u00b4python word2vec_optimized.py --train_data text8 --eval_data questions-words.txt --save_path train\u00b4</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Tryed to run the same code on a docker tensorflow-0.10.0 machine (without gpu libraries) and obtained<br>\nsimilar error.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally<br>\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:925] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero<br>\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties:<br>\nname: GRID K520<br>\nmajor: 3 minor: 0 memoryClockRate (GHz) 0.797<br>\npciBusID 0000:00:03.0<br>\nTotal memory: 3.94GiB<br>\nFree memory: 3.91GiB<br>\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0<br>\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y<br>\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:838] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: GRID K520, pci bus id: 0000:00:03.0)<br>\nI tensorflow/models/embedding/word2vec_kernels.cc:200] Data file: text8 contains 100000000 bytes, 17005207 words, 253854 unique words, 71290 unique frequent words.<br>\nData file:  text8<br>\nVocab size:  71290  + UNK<br>\nWords per epoch:  17005207<br>\nEval analogy file:  questions-words.txt<br>\nQuestions:  17827<br>\nSkipped:  1717<br>\nW tensorflow/core/framework/op_kernel.cc:940] Failed precondition: Attempting to use uninitialized value global_step<br>\n[[Node: AssignAdd = AssignAdd[T=DT_INT32, _class=[\"loc:@global_step\"], use_locking=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](global_step, AssignAdd/value)]]</p>", "body_text": "I've not found anyone reporting this specific issue. I'm trying to run tensorflow word2vec script on a aws\ngpu machine through docker-nvidia container and getting this error:\nlog.txt\nEnvironment info\nOperating System: ubuntu 16.10 on a g2.2xlarge aws machine. Nvidia driver version 367.57\nInstalled version of CUDA and cuDNN:\nrunning on docker-nvidia tensorflow-0.11.0-gpu machine\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n./usr/local/nvidia/lib64/libcuda.so\n./usr/local/nvidia/lib64/libcuda.so.1\n./usr/local/nvidia/lib64/libcuda.so.367.57\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/stubs/libcuda.so\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudadevrt.a\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart_static.a\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so\n./usr/local/cuda-7.5/extras/Debugger/lib64/libcudacore.a\n./usr/local/cuda-7.5/extras/Debugger/include/libcudacore.h\n./usr/lib/x86_64-linux-gnu/libcudnn_static_v5.a\n./usr/lib/x86_64-linux-gnu/libcudnn.so.5.1.3\n./usr/lib/x86_64-linux-gnu/libcudnn_static.a\n./usr/lib/x86_64-linux-gnu/libcudnn.so.5\n./usr/lib/x86_64-linux-gnu/libcudnn.so\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nthis is the command I executed and first lines of output:\n\u00b4python word2vec_optimized.py --train_data text8 --eval_data questions-words.txt --save_path train\u00b4\nWhat other attempted solutions have you tried?\nTryed to run the same code on a docker tensorflow-0.10.0 machine (without gpu libraries) and obtained\nsimilar error.\nLogs or other output that would be helpful\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:925] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties:\nname: GRID K520\nmajor: 3 minor: 0 memoryClockRate (GHz) 0.797\npciBusID 0000:00:03.0\nTotal memory: 3.94GiB\nFree memory: 3.91GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:838] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GRID K520, pci bus id: 0000:00:03.0)\nI tensorflow/models/embedding/word2vec_kernels.cc:200] Data file: text8 contains 100000000 bytes, 17005207 words, 253854 unique words, 71290 unique frequent words.\nData file:  text8\nVocab size:  71290  + UNK\nWords per epoch:  17005207\nEval analogy file:  questions-words.txt\nQuestions:  17827\nSkipped:  1717\nW tensorflow/core/framework/op_kernel.cc:940] Failed precondition: Attempting to use uninitialized value global_step\n[[Node: AssignAdd = AssignAdd[T=DT_INT32, _class=[\"loc:@global_step\"], use_locking=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](global_step, AssignAdd/value)]]", "body": "I've not found anyone reporting this specific issue. I'm trying to run tensorflow word2vec script on a aws\r\ngpu machine through docker-nvidia container and getting this error:\r\n[log.txt](https://github.com/tensorflow/tensorflow/files/595666/log.txt)\r\n\r\n\r\n\r\n### Environment info\r\nOperating System: ubuntu 16.10 on a g2.2xlarge aws machine. Nvidia driver version 367.57\r\n\r\nInstalled version of CUDA and cuDNN:  \r\nrunning on docker-nvidia tensorflow-0.11.0-gpu machine\r\n(please attach the output of `ls -l /path/to/cuda/lib/libcud*`):\r\n./usr/local/nvidia/lib64/libcuda.so\r\n./usr/local/nvidia/lib64/libcuda.so.1\r\n./usr/local/nvidia/lib64/libcuda.so.367.57\r\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/stubs/libcuda.so\r\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudadevrt.a\r\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart_static.a\r\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5\r\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5.18\r\n./usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so\r\n./usr/local/cuda-7.5/extras/Debugger/lib64/libcudacore.a\r\n./usr/local/cuda-7.5/extras/Debugger/include/libcudacore.h\r\n./usr/lib/x86_64-linux-gnu/libcudnn_static_v5.a\r\n./usr/lib/x86_64-linux-gnu/libcudnn.so.5.1.3\r\n./usr/lib/x86_64-linux-gnu/libcudnn_static.a\r\n./usr/lib/x86_64-linux-gnu/libcudnn.so.5\r\n./usr/lib/x86_64-linux-gnu/libcudnn.so\r\n\r\n\r\n\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nthis is the command I executed and first lines of output:\r\n\r\n\u00b4python word2vec_optimized.py --train_data text8 --eval_data questions-words.txt --save_path train\u00b4\r\n\r\n### What other attempted solutions have you tried?\r\nTryed to run the same code on a docker tensorflow-0.10.0 machine (without gpu libraries) and obtained\r\nsimilar error.\r\n\r\n### Logs or other output that would be helpful\r\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally\r\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally\r\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally\r\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally\r\nI tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally\r\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:925] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: \r\nname: GRID K520\r\nmajor: 3 minor: 0 memoryClockRate (GHz) 0.797\r\npciBusID 0000:00:03.0\r\nTotal memory: 3.94GiB\r\nFree memory: 3.91GiB\r\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 \r\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y \r\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:838] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GRID K520, pci bus id: 0000:00:03.0)\r\nI tensorflow/models/embedding/word2vec_kernels.cc:200] Data file: text8 contains 100000000 bytes, 17005207 words, 253854 unique words, 71290 unique frequent words.\r\nData file:  text8\r\nVocab size:  71290  + UNK\r\nWords per epoch:  17005207\r\nEval analogy file:  questions-words.txt\r\nQuestions:  17827\r\nSkipped:  1717\r\nW tensorflow/core/framework/op_kernel.cc:940] Failed precondition: Attempting to use uninitialized value global_step\r\n\t [[Node: AssignAdd = AssignAdd[T=DT_INT32, _class=[\"loc:@global_step\"], use_locking=false, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](global_step, AssignAdd/value)]]\r\n\r\n"}
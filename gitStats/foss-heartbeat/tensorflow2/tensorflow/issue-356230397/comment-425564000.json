{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/425564000", "html_url": "https://github.com/tensorflow/tensorflow/issues/22007#issuecomment-425564000", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22007", "id": 425564000, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTU2NDAwMA==", "user": {"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-28T20:57:49Z", "updated_at": "2018-09-28T20:58:17Z", "author_association": "CONTRIBUTOR", "body_html": "<p>After updating to MacOS 10.14 and thus Xcode 10, I'm hitting a possibly related linker error when trying to load custom ops:</p>\n<pre><code>Traceback (most recent call last):\n  File \"./safety/debate/test_azero.py\", line 4, in &lt;module&gt;\n    from safety.debate import azero\n  File \"/Users/irving/openai/safety/safety/debate/azero.py\", line 5, in &lt;module&gt;\n    from safety.debate import gomoku\n  File \"/Users/irving/openai/safety/safety/debate/gomoku.py\", line 9, in &lt;module&gt;\n    gomoku_value = utils.load_debate_ops().gomoku_value\n  File \"/Users/irving/openai/safety/safety/core/utils.py\", line 212, in load_debate_ops\n    return tf.load_op_library(path)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/load_library.py\", line 60, in load_op_library\n    lib_handle = py_tf.TF_LoadLibrary(library_filename)\ntensorflow.python.framework.errors_impl.NotFoundError: dlopen(/Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so, 6): Symbol not found: __ZN10tensorflow11GetNodeAttrERKNS_9AttrSliceENSt3__117basic_string_viewIcNS3_11char_traitsIcEEEEPNS3_12basic_stringIcS6_NS3_9allocatorIcEEEE\n  Referenced from: /Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so\n  Expected in: flat namespace\n in /Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so\n</code></pre>\n<p>The custom op thinks the symbol is</p>\n<pre><code>tensorflow::GetNodeAttr(tensorflow::AttrSlice const&amp;, std::__1::basic_string_view&lt;char, std::__1::char_traits&lt;char&gt; &gt;, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;*)\n</code></pre>\n<p>but the actual symbol is</p>\n<pre><code>tensorflow::GetNodeAttr(tensorflow::AttrSlice const&amp;, absl::string_view, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;*)\n</code></pre>\n<p>I.e., <code>absl::string_view</code> vs. <code>basic_string_view</code>.</p>", "body_text": "After updating to MacOS 10.14 and thus Xcode 10, I'm hitting a possibly related linker error when trying to load custom ops:\nTraceback (most recent call last):\n  File \"./safety/debate/test_azero.py\", line 4, in <module>\n    from safety.debate import azero\n  File \"/Users/irving/openai/safety/safety/debate/azero.py\", line 5, in <module>\n    from safety.debate import gomoku\n  File \"/Users/irving/openai/safety/safety/debate/gomoku.py\", line 9, in <module>\n    gomoku_value = utils.load_debate_ops().gomoku_value\n  File \"/Users/irving/openai/safety/safety/core/utils.py\", line 212, in load_debate_ops\n    return tf.load_op_library(path)\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/load_library.py\", line 60, in load_op_library\n    lib_handle = py_tf.TF_LoadLibrary(library_filename)\ntensorflow.python.framework.errors_impl.NotFoundError: dlopen(/Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so, 6): Symbol not found: __ZN10tensorflow11GetNodeAttrERKNS_9AttrSliceENSt3__117basic_string_viewIcNS3_11char_traitsIcEEEEPNS3_12basic_stringIcS6_NS3_9allocatorIcEEEE\n  Referenced from: /Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so\n  Expected in: flat namespace\n in /Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so\n\nThe custom op thinks the symbol is\ntensorflow::GetNodeAttr(tensorflow::AttrSlice const&, std::__1::basic_string_view<char, std::__1::char_traits<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*)\n\nbut the actual symbol is\ntensorflow::GetNodeAttr(tensorflow::AttrSlice const&, absl::string_view, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*)\n\nI.e., absl::string_view vs. basic_string_view.", "body": "After updating to MacOS 10.14 and thus Xcode 10, I'm hitting a possibly related linker error when trying to load custom ops:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"./safety/debate/test_azero.py\", line 4, in <module>\r\n    from safety.debate import azero\r\n  File \"/Users/irving/openai/safety/safety/debate/azero.py\", line 5, in <module>\r\n    from safety.debate import gomoku\r\n  File \"/Users/irving/openai/safety/safety/debate/gomoku.py\", line 9, in <module>\r\n    gomoku_value = utils.load_debate_ops().gomoku_value\r\n  File \"/Users/irving/openai/safety/safety/core/utils.py\", line 212, in load_debate_ops\r\n    return tf.load_op_library(path)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/load_library.py\", line 60, in load_op_library\r\n    lib_handle = py_tf.TF_LoadLibrary(library_filename)\r\ntensorflow.python.framework.errors_impl.NotFoundError: dlopen(/Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so, 6): Symbol not found: __ZN10tensorflow11GetNodeAttrERKNS_9AttrSliceENSt3__117basic_string_viewIcNS3_11char_traitsIcEEEEPNS3_12basic_stringIcS6_NS3_9allocatorIcEEEE\r\n  Referenced from: /Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so\r\n  Expected in: flat namespace\r\n in /Users/irving/openai/safety/debate_ops.cpython-36m-darwin.so\r\n```\r\n\r\nThe custom op thinks the symbol is \r\n\r\n```\r\ntensorflow::GetNodeAttr(tensorflow::AttrSlice const&, std::__1::basic_string_view<char, std::__1::char_traits<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*)\r\n```\r\n\r\nbut the actual symbol is\r\n\r\n```\r\ntensorflow::GetNodeAttr(tensorflow::AttrSlice const&, absl::string_view, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*)\r\n```\r\n\r\nI.e., `absl::string_view` vs. `basic_string_view`."}
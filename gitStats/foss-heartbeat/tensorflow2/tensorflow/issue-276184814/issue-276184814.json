{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14806", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14806/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14806/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14806/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14806", "id": 276184814, "node_id": "MDU6SXNzdWUyNzYxODQ4MTQ=", "number": 14806, "title": "Go TensorFlow 1.4.0: DataType 21 is not supported", "user": {"login": "is8ac", "id": 8010041, "node_id": "MDQ6VXNlcjgwMTAwNDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/8010041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/is8ac", "html_url": "https://github.com/is8ac", "followers_url": "https://api.github.com/users/is8ac/followers", "following_url": "https://api.github.com/users/is8ac/following{/other_user}", "gists_url": "https://api.github.com/users/is8ac/gists{/gist_id}", "starred_url": "https://api.github.com/users/is8ac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/is8ac/subscriptions", "organizations_url": "https://api.github.com/users/is8ac/orgs", "repos_url": "https://api.github.com/users/is8ac/repos", "events_url": "https://api.github.com/users/is8ac/events{/privacy}", "received_events_url": "https://api.github.com/users/is8ac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-11-22T19:42:17Z", "updated_at": "2017-12-02T09:39:46Z", "closed_at": "2017-12-02T09:39:46Z", "author_association": "NONE", "body_html": "<hr>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: Yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Arch linux</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4.0</li>\n<li><strong>Python version</strong>: NA (using go)</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>: 9.0.176-4 / 7.0.3-1</li>\n<li><strong>GPU model and memory</strong>: GTX 1060 6GB</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Calling the Value() method on the evaluated output tensor of dataset related operations from the go package fails with the error <code>DataType 21 is not supported</code>. It looks like <code>op.TextLineDataset()</code> produces a tensor of type <code>tf.Half</code> can't be converted to a go type?<br>\nI may be using the datasets wrong. If so, the error and/or documentation should be improved.</p>\n<h3>Source code / logs</h3>\n<pre><code>package main\n\nimport (\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\n)\n\nfunc main() {\n\ts := op.NewScope()\n\ttextLineHandle := op.TextLineDataset(s,\n\t\top.Const(s.SubScope(\"filename\"), \"dataset.txt\"),\n\t\top.Const(s.SubScope(\"compression_type\"), \"\"),\n\t\top.Const(s.SubScope(\"buffer_size\"), int64(1)),\n\t)\n\tgraph, err := s.Finalize()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tsess, err := tf.NewSession(graph, nil)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tresults, err := sess.Run(nil, []tf.Output{textLineHandle}, []*tf.Operation{})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t_ = results[0].Value()\n}\n</code></pre>\n<p>Produces:</p>\n<pre><code>[isaac@d6-arch tfes]$ go run dataset_demo.go \n2017-11-22 11:06:36.945842: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\n2017-11-22 11:06:37.042484: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-11-22 11:06:37.042786: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: \nname: GeForce GTX 1060 6GB major: 6 minor: 1 memoryClockRate(GHz): 1.7085\npciBusID: 0000:01:00.0\ntotalMemory: 5.93GiB freeMemory: 4.58GiB\n2017-11-22 11:06:37.042801: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:01:00.0, compute capability: 6.1)\npanic: BUG: Please report at https://github.com/tensorflow/tensorflow/issues with the note: Go TensorFlow 1.4.0: DataType 21 is not supported\n\ngoroutine 1 [running]:\ngithub.com/tensorflow/tensorflow/tensorflow/go.typeOf(0xc400000015, 0x0, 0x0, 0x0, 0x49d72d, 0x4c6e40)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:273 +0x14d\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Tensor).Value(0xc42000c0e0, 0x0, 0xc420057f60)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:175 +0x8d\nmain.main()\n\t/home/isaac/go/src/github.com/is8ac/tfes/dataset_demo.go:27 +0x2b0\nexit status 2\n</code></pre>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Arch linux\nTensorFlow installed from (source or binary): Binary\nTensorFlow version (use command below): 1.4.0\nPython version: NA (using go)\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version: 9.0.176-4 / 7.0.3-1\nGPU model and memory: GTX 1060 6GB\nExact command to reproduce:\n\nDescribe the problem\nCalling the Value() method on the evaluated output tensor of dataset related operations from the go package fails with the error DataType 21 is not supported. It looks like op.TextLineDataset() produces a tensor of type tf.Half can't be converted to a go type?\nI may be using the datasets wrong. If so, the error and/or documentation should be improved.\nSource code / logs\npackage main\n\nimport (\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\n)\n\nfunc main() {\n\ts := op.NewScope()\n\ttextLineHandle := op.TextLineDataset(s,\n\t\top.Const(s.SubScope(\"filename\"), \"dataset.txt\"),\n\t\top.Const(s.SubScope(\"compression_type\"), \"\"),\n\t\top.Const(s.SubScope(\"buffer_size\"), int64(1)),\n\t)\n\tgraph, err := s.Finalize()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tsess, err := tf.NewSession(graph, nil)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tresults, err := sess.Run(nil, []tf.Output{textLineHandle}, []*tf.Operation{})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t_ = results[0].Value()\n}\n\nProduces:\n[isaac@d6-arch tfes]$ go run dataset_demo.go \n2017-11-22 11:06:36.945842: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\n2017-11-22 11:06:37.042484: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\n2017-11-22 11:06:37.042786: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: \nname: GeForce GTX 1060 6GB major: 6 minor: 1 memoryClockRate(GHz): 1.7085\npciBusID: 0000:01:00.0\ntotalMemory: 5.93GiB freeMemory: 4.58GiB\n2017-11-22 11:06:37.042801: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:01:00.0, compute capability: 6.1)\npanic: BUG: Please report at https://github.com/tensorflow/tensorflow/issues with the note: Go TensorFlow 1.4.0: DataType 21 is not supported\n\ngoroutine 1 [running]:\ngithub.com/tensorflow/tensorflow/tensorflow/go.typeOf(0xc400000015, 0x0, 0x0, 0x0, 0x49d72d, 0x4c6e40)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:273 +0x14d\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Tensor).Value(0xc42000c0e0, 0x0, 0xc420057f60)\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:175 +0x8d\nmain.main()\n\t/home/isaac/go/src/github.com/is8ac/tfes/dataset_demo.go:27 +0x2b0\nexit status 2", "body": "\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Arch linux\r\n- **TensorFlow installed from (source or binary)**: Binary\r\n- **TensorFlow version (use command below)**: 1.4.0\r\n- **Python version**: NA (using go)\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: 9.0.176-4 / 7.0.3-1\r\n- **GPU model and memory**: GTX 1060 6GB\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nCalling the Value() method on the evaluated output tensor of dataset related operations from the go package fails with the error `DataType 21 is not supported`. It looks like `op.TextLineDataset()` produces a tensor of type `tf.Half` can't be converted to a go type?\r\nI may be using the datasets wrong. If so, the error and/or documentation should be improved.\r\n\r\n### Source code / logs\r\n\r\n```\r\npackage main\r\n\r\nimport (\r\n\ttf \"github.com/tensorflow/tensorflow/tensorflow/go\"\r\n\t\"github.com/tensorflow/tensorflow/tensorflow/go/op\"\r\n)\r\n\r\nfunc main() {\r\n\ts := op.NewScope()\r\n\ttextLineHandle := op.TextLineDataset(s,\r\n\t\top.Const(s.SubScope(\"filename\"), \"dataset.txt\"),\r\n\t\top.Const(s.SubScope(\"compression_type\"), \"\"),\r\n\t\top.Const(s.SubScope(\"buffer_size\"), int64(1)),\r\n\t)\r\n\tgraph, err := s.Finalize()\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\tsess, err := tf.NewSession(graph, nil)\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\tresults, err := sess.Run(nil, []tf.Output{textLineHandle}, []*tf.Operation{})\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\t_ = results[0].Value()\r\n}\r\n```\r\nProduces:\r\n```\r\n[isaac@d6-arch tfes]$ go run dataset_demo.go \r\n2017-11-22 11:06:36.945842: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\n2017-11-22 11:06:37.042484: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:892] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2017-11-22 11:06:37.042786: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: \r\nname: GeForce GTX 1060 6GB major: 6 minor: 1 memoryClockRate(GHz): 1.7085\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 5.93GiB freeMemory: 4.58GiB\r\n2017-11-22 11:06:37.042801: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: GeForce GTX 1060 6GB, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\npanic: BUG: Please report at https://github.com/tensorflow/tensorflow/issues with the note: Go TensorFlow 1.4.0: DataType 21 is not supported\r\n\r\ngoroutine 1 [running]:\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.typeOf(0xc400000015, 0x0, 0x0, 0x0, 0x49d72d, 0x4c6e40)\r\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:273 +0x14d\r\ngithub.com/tensorflow/tensorflow/tensorflow/go.(*Tensor).Value(0xc42000c0e0, 0x0, 0xc420057f60)\r\n\t/home/isaac/go/src/github.com/tensorflow/tensorflow/tensorflow/go/tensor.go:175 +0x8d\r\nmain.main()\r\n\t/home/isaac/go/src/github.com/is8ac/tfes/dataset_demo.go:27 +0x2b0\r\nexit status 2\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/424049924", "html_url": "https://github.com/tensorflow/tensorflow/issues/22116#issuecomment-424049924", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22116", "id": 424049924, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA0OTkyNA==", "user": {"login": "victorbocharov", "id": 4330365, "node_id": "MDQ6VXNlcjQzMzAzNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4330365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorbocharov", "html_url": "https://github.com/victorbocharov", "followers_url": "https://api.github.com/users/victorbocharov/followers", "following_url": "https://api.github.com/users/victorbocharov/following{/other_user}", "gists_url": "https://api.github.com/users/victorbocharov/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorbocharov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorbocharov/subscriptions", "organizations_url": "https://api.github.com/users/victorbocharov/orgs", "repos_url": "https://api.github.com/users/victorbocharov/repos", "events_url": "https://api.github.com/users/victorbocharov/events{/privacy}", "received_events_url": "https://api.github.com/users/victorbocharov/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-24T17:03:42Z", "updated_at": "2018-09-24T17:03:42Z", "author_association": "NONE", "body_html": "<p>It seems that I have a similar problem.<br>\n<code>device.frequency()</code> returned <code>0</code> probably because <code>NominalCPUFrequency()</code> returned <code>1</code>. <code>TENSORFLOW_USE_ABSL</code> turns on abseil support and it is used only in Bazel-based compilation.</p>\n<p><a href=\"https://github.com/tensorflow/tensorflow/blob/v1.10.1/tensorflow/core/platform/posix/port.cc#L196\">https://github.com/tensorflow/tensorflow/blob/v1.10.1/tensorflow/core/platform/posix/port.cc#L196</a> :</p>\n<pre><code>double NominalCPUFrequency() {\n#ifdef TENSORFLOW_USE_ABSL\n  return absl::base_internal::NominalCPUFrequency();\n#else\n  return 1.0;\n#endif\n}\n</code></pre>\n<p>Fixed here for Makefile build but not for cmake build: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/75adfa5ca180abdd1ccf9408078906e5874c9e2a/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/75adfa5ca180abdd1ccf9408078906e5874c9e2a\"><tt>75adfa5</tt></a></p>", "body_text": "It seems that I have a similar problem.\ndevice.frequency() returned 0 probably because NominalCPUFrequency() returned 1. TENSORFLOW_USE_ABSL turns on abseil support and it is used only in Bazel-based compilation.\nhttps://github.com/tensorflow/tensorflow/blob/v1.10.1/tensorflow/core/platform/posix/port.cc#L196 :\ndouble NominalCPUFrequency() {\n#ifdef TENSORFLOW_USE_ABSL\n  return absl::base_internal::NominalCPUFrequency();\n#else\n  return 1.0;\n#endif\n}\n\nFixed here for Makefile build but not for cmake build: 75adfa5", "body": "It seems that I have a similar problem.\r\n`device.frequency()` returned `0` probably because `NominalCPUFrequency()` returned `1`. `TENSORFLOW_USE_ABSL` turns on abseil support and it is used only in Bazel-based compilation.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/v1.10.1/tensorflow/core/platform/posix/port.cc#L196 :\r\n```\r\ndouble NominalCPUFrequency() {\r\n#ifdef TENSORFLOW_USE_ABSL\r\n  return absl::base_internal::NominalCPUFrequency();\r\n#else\r\n  return 1.0;\r\n#endif\r\n}\r\n```\r\n\r\nFixed here for Makefile build but not for cmake build: https://github.com/tensorflow/tensorflow/commit/75adfa5ca180abdd1ccf9408078906e5874c9e2a"}
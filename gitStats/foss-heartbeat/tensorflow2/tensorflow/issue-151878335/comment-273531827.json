{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/273531827", "html_url": "https://github.com/tensorflow/tensorflow/issues/2169#issuecomment-273531827", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2169", "id": 273531827, "node_id": "MDEyOklzc3VlQ29tbWVudDI3MzUzMTgyNw==", "user": {"login": "dbarnes", "id": 5920715, "node_id": "MDQ6VXNlcjU5MjA3MTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/5920715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbarnes", "html_url": "https://github.com/dbarnes", "followers_url": "https://api.github.com/users/dbarnes/followers", "following_url": "https://api.github.com/users/dbarnes/following{/other_user}", "gists_url": "https://api.github.com/users/dbarnes/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbarnes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbarnes/subscriptions", "organizations_url": "https://api.github.com/users/dbarnes/orgs", "repos_url": "https://api.github.com/users/dbarnes/repos", "events_url": "https://api.github.com/users/dbarnes/events{/privacy}", "received_events_url": "https://api.github.com/users/dbarnes/received_events", "type": "User", "site_admin": false}, "created_at": "2017-01-18T16:51:32Z", "updated_at": "2017-01-18T16:58:23Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5199377\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/hermitman\">@hermitman</a>  <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=24847176\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/sirajulsalekin\">@sirajulsalekin</a><br>\nFor whatever reason I could also not backprop through <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1525818\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fabianbormann\">@fabianbormann</a> or <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7233743\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/EmmaBYPeng\">@EmmaBYPeng</a> unpool code  (although they was able to). If anyone comes across the same problem my solution was to replace the sparse_tensor_to_dense  op as mentioned in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"196311274\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/6391\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/6391/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/6391\">#6391</a> as sparse_tensor_to_dense doesnt have a gradient (0.11)</p>\n<p>Naturally this doesnt change the speed problems but as far as I can tell only a dedicated op as mentioned by <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=70511\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/girving\">@girving</a> and <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=8906225\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/syed-ahmed\">@syed-ahmed</a> will solve that</p>\n<p>Namely</p>\n<pre><code># Original\nreturn tf.sparse_tensor_to_dense(tf.sparse_reorder(delta))\n\n# New\n# https://github.com/tensorflow/tensorflow/issues/6391\nreturn tf.sparse_add(tf.zeros(tf.to_int32(delta.shape)), tf.sparse_reorder(delta))\n</code></pre>", "body_text": "@hermitman  @sirajulsalekin\nFor whatever reason I could also not backprop through @fabianbormann or @EmmaBYPeng unpool code  (although they was able to). If anyone comes across the same problem my solution was to replace the sparse_tensor_to_dense  op as mentioned in #6391 as sparse_tensor_to_dense doesnt have a gradient (0.11)\nNaturally this doesnt change the speed problems but as far as I can tell only a dedicated op as mentioned by @girving and @syed-ahmed will solve that\nNamely\n# Original\nreturn tf.sparse_tensor_to_dense(tf.sparse_reorder(delta))\n\n# New\n# https://github.com/tensorflow/tensorflow/issues/6391\nreturn tf.sparse_add(tf.zeros(tf.to_int32(delta.shape)), tf.sparse_reorder(delta))", "body": "@hermitman  @sirajulsalekin \r\nFor whatever reason I could also not backprop through @fabianbormann or @EmmaBYPeng unpool code  (although they was able to). If anyone comes across the same problem my solution was to replace the sparse_tensor_to_dense  op as mentioned in https://github.com/tensorflow/tensorflow/issues/6391 as sparse_tensor_to_dense doesnt have a gradient (0.11)\r\n\r\nNaturally this doesnt change the speed problems but as far as I can tell only a dedicated op as mentioned by @girving and @syed-ahmed will solve that\r\n\r\nNamely \r\n```\r\n# Original\r\nreturn tf.sparse_tensor_to_dense(tf.sparse_reorder(delta))\r\n\r\n# New\r\n# https://github.com/tensorflow/tensorflow/issues/6391\r\nreturn tf.sparse_add(tf.zeros(tf.to_int32(delta.shape)), tf.sparse_reorder(delta))\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/85636527", "pull_request_review_id": 6344170, "id": 85636527, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg1NjM2NTI3", "diff_hunk": "@@ -0,0 +1,70 @@\n+#  Copyright 2016 The TensorFlow Authors. All Rights Reserved.\n+#\n+#  Licensed under the Apache License, Version 2.0 (the \"License\");\n+#  you may not use this file except in compliance with the License.\n+#  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#  Unless required by applicable law or agreed to in writing, software\n+#  distributed under the License is distributed on an \"AS IS\" BASIS,\n+#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+#  See the License for the specific language governing permissions and\n+#  limitations under the License.\n+\n+\"\"\"Model training for Iris data set using Validation Monitor.\"\"\"\n+\n+from __future__ import absolute_import\n+from __future__ import division\n+from __future__ import print_function\n+\n+import numpy as np\n+import tensorflow as tf\n+\n+tf.logging.set_verbosity(tf.logging.INFO)\n+\n+# Data sets\n+IRIS_TRAINING = \"iris_training.csv\"\n+IRIS_TEST = \"iris_test.csv\"\n+\n+# Load datasets.\n+training_set = tf.contrib.learn.datasets.base.load_csv(filename=IRIS_TRAINING,\n+                                                       target_dtype=np.int)\n+test_set = tf.contrib.learn.datasets.base.load_csv(filename=IRIS_TEST,\n+                                                   target_dtype=np.int)\n+\n+validation_metrics = {\"accuracy\": tf.contrib.metrics.streaming_accuracy,\n+                      \"precision\": tf.contrib.metrics.streaming_precision,\n+                      \"recall\": tf.contrib.metrics.streaming_recall}\n+validation_monitor = tf.contrib.learn.monitors.ValidationMonitor(\n+    test_set.data,\n+    test_set.target,\n+    every_n_steps=50,\n+    metrics=validation_metrics,\n+    early_stopping_metric=\"loss\",\n+    early_stopping_metric_minimize=True,\n+    early_stopping_rounds=200)\n+\n+# Build 3 layer DNN with 10, 20, 10 units respectively.\n+classifier = tf.contrib.learn.DNNClassifier(hidden_units=[10, 20, 10],\n+                                            n_classes=3,\n+                                            model_dir=\"/tmp/iris_model\",\n+                                            config=tf.contrib.learn.RunConfig(\n+                                                save_checkpoints_secs=1))\n+\n+# Fit model.\n+classifier.fit(x=training_set.data,\n+               y=training_set.target,\n+               steps=2000,\n+               monitors=[validation_monitor])", "path": "tensorflow/examples/tutorials/monitors/iris_monitors.py", "position": 59, "original_position": 59, "commit_id": "6e42687a4738f50e3325f2ad94a6c859a20e839e", "original_commit_id": "6e42687a4738f50e3325f2ad94a6c859a20e839e", "user": {"login": "tegg89", "id": 17821598, "node_id": "MDQ6VXNlcjE3ODIxNTk4", "avatar_url": "https://avatars2.githubusercontent.com/u/17821598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tegg89", "html_url": "https://github.com/tegg89", "followers_url": "https://api.github.com/users/tegg89/followers", "following_url": "https://api.github.com/users/tegg89/following{/other_user}", "gists_url": "https://api.github.com/users/tegg89/gists{/gist_id}", "starred_url": "https://api.github.com/users/tegg89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tegg89/subscriptions", "organizations_url": "https://api.github.com/users/tegg89/orgs", "repos_url": "https://api.github.com/users/tegg89/repos", "events_url": "https://api.github.com/users/tegg89/events{/privacy}", "received_events_url": "https://api.github.com/users/tegg89/received_events", "type": "User", "site_admin": false}, "body": "`monitors=[validation_monitor]` should be removed.\n", "created_at": "2016-10-29T08:31:03Z", "updated_at": "2016-10-29T08:31:03Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/5273#discussion_r85636527", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5273", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/85636527"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/5273#discussion_r85636527"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/5273"}}, "body_html": "<p><code>monitors=[validation_monitor]</code> should be removed.</p>", "body_text": "monitors=[validation_monitor] should be removed."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8894", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8894/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8894/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8894/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8894", "id": 218676833, "node_id": "MDU6SXNzdWUyMTg2NzY4MzM=", "number": 8894, "title": "tensorflow/core/kernels/split_op.cc:159:26: error: non-constant-expression cannot be narrowed from type 'int64' (aka 'long long') to 'int' in initializer list [-Wc++11-narrowing]", "user": {"login": "jinfagang", "id": 21303438, "node_id": "MDQ6VXNlcjIxMzAzNDM4", "avatar_url": "https://avatars3.githubusercontent.com/u/21303438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinfagang", "html_url": "https://github.com/jinfagang", "followers_url": "https://api.github.com/users/jinfagang/followers", "following_url": "https://api.github.com/users/jinfagang/following{/other_user}", "gists_url": "https://api.github.com/users/jinfagang/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinfagang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinfagang/subscriptions", "organizations_url": "https://api.github.com/users/jinfagang/orgs", "repos_url": "https://api.github.com/users/jinfagang/repos", "events_url": "https://api.github.com/users/jinfagang/events{/privacy}", "received_events_url": "https://api.github.com/users/jinfagang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-01T07:21:40Z", "updated_at": "2017-06-16T18:57:38Z", "closed_at": "2017-06-16T18:57:38Z", "author_association": "NONE", "body_html": "<p>Building tensorflow android error:</p>\n<ul>\n<li>os: ubuntu16.04</li>\n<li>tensorflow: 1.0.1</li>\n</ul>\n<p>Before error comes, I followed the tips in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/README.md\">android README</a></p>\n<pre><code> bazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so \\\n   --crosstool_top=//external:android/crosstool \\\n   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n   --cpu=armeabi-v7a\n\n</code></pre>\n<p>then I just got these error:</p>\n<pre><code>ERROR: /media/work/CodeSpace/AISpace/tensorflow/tensorflow/core/kernels/BUILD:3944:1: C++ compilation of rule '//tensorflow/core/kernels:android_tensorflow_kernels' failed: clang failed: error executing command external/androidndk/ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/clang -gcc-toolchain external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64 -fpic -ffunction-sections ... (remaining 73 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from tensorflow/core/kernels/resize_nearest_neighbor_op.cc:20:\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:4:\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:152:\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorMap.h:242:106: error: non-constant-expression cannot be narrowed from type 'long long' to 'int' in initializer list [-Wc++11-narrowing]\n        const Index index = m_dimensions.IndexOfRowMajor(array&lt;Index, NumDims&gt;{{firstIndex, secondIndex, otherIndices...}});\n                                                                                                         ^~~~~~~~~~~~\ntensorflow/core/kernels/resize_nearest_neighbor_op.cc:69:24: note: in instantiation of function template specialization 'Eigen::TensorMap&lt;Eigen::Tensor&lt;const int, 4, 1, int&gt;, 16, MakePointer&gt;::operator()&lt;long long, int&gt;' requested here\n          std::copy_n(&amp;input_data(b, in_y, in_x, 0), st.channels,\n\n</code></pre>\n<p>I installed android sdk and ndk via android-studio, and here is my settings in WORKSPACE:</p>\n<pre><code>android_sdk_repository(\n    name = \"androidsdk\",\n    api_level = 23,\n    # Ensure that you have the build_tools_version below installed in the\n    # SDK manager as it updates periodically.\n    build_tools_version = \"25.0.2\",\n    # Replace with path to Android SDK on your system\n    path = \"/media/work/android/android-sdk\",\n)\n#\n# Android NDK r12b is recommended (higher may cause issues with Bazel)\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/media/work/android/android-sdk/ndk-bundle\",\n    # This needs to be 14 or higher to compile TensorFlow. \n    # Note that the NDK version is not the API level.\n    api_level=14)\n</code></pre>\n<p>Anybody occurred this problem too? I don't know what happed.</p>", "body_text": "Building tensorflow android error:\n\nos: ubuntu16.04\ntensorflow: 1.0.1\n\nBefore error comes, I followed the tips in android README\n bazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so \\\n   --crosstool_top=//external:android/crosstool \\\n   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\n   --cpu=armeabi-v7a\n\n\nthen I just got these error:\nERROR: /media/work/CodeSpace/AISpace/tensorflow/tensorflow/core/kernels/BUILD:3944:1: C++ compilation of rule '//tensorflow/core/kernels:android_tensorflow_kernels' failed: clang failed: error executing command external/androidndk/ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/clang -gcc-toolchain external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64 -fpic -ffunction-sections ... (remaining 73 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nIn file included from tensorflow/core/kernels/resize_nearest_neighbor_op.cc:20:\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:4:\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:152:\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorMap.h:242:106: error: non-constant-expression cannot be narrowed from type 'long long' to 'int' in initializer list [-Wc++11-narrowing]\n        const Index index = m_dimensions.IndexOfRowMajor(array<Index, NumDims>{{firstIndex, secondIndex, otherIndices...}});\n                                                                                                         ^~~~~~~~~~~~\ntensorflow/core/kernels/resize_nearest_neighbor_op.cc:69:24: note: in instantiation of function template specialization 'Eigen::TensorMap<Eigen::Tensor<const int, 4, 1, int>, 16, MakePointer>::operator()<long long, int>' requested here\n          std::copy_n(&input_data(b, in_y, in_x, 0), st.channels,\n\n\nI installed android sdk and ndk via android-studio, and here is my settings in WORKSPACE:\nandroid_sdk_repository(\n    name = \"androidsdk\",\n    api_level = 23,\n    # Ensure that you have the build_tools_version below installed in the\n    # SDK manager as it updates periodically.\n    build_tools_version = \"25.0.2\",\n    # Replace with path to Android SDK on your system\n    path = \"/media/work/android/android-sdk\",\n)\n#\n# Android NDK r12b is recommended (higher may cause issues with Bazel)\nandroid_ndk_repository(\n    name=\"androidndk\",\n    path=\"/media/work/android/android-sdk/ndk-bundle\",\n    # This needs to be 14 or higher to compile TensorFlow. \n    # Note that the NDK version is not the API level.\n    api_level=14)\n\nAnybody occurred this problem too? I don't know what happed.", "body": "Building tensorflow android error:\r\n*  os: ubuntu16.04\r\n* tensorflow: 1.0.1\r\n\r\nBefore error comes, I followed the tips in [android README](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/README.md)\r\n\r\n```\r\n bazel build -c opt //tensorflow/contrib/android:libtensorflow_inference.so \\\r\n   --crosstool_top=//external:android/crosstool \\\r\n   --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \\\r\n   --cpu=armeabi-v7a\r\n\r\n```\r\n\r\nthen I just got these error:\r\n\r\n```\r\nERROR: /media/work/CodeSpace/AISpace/tensorflow/tensorflow/core/kernels/BUILD:3944:1: C++ compilation of rule '//tensorflow/core/kernels:android_tensorflow_kernels' failed: clang failed: error executing command external/androidndk/ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/clang -gcc-toolchain external/androidndk/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64 -fpic -ffunction-sections ... (remaining 73 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\nIn file included from tensorflow/core/kernels/resize_nearest_neighbor_op.cc:20:\r\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:4:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:152:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorMap.h:242:106: error: non-constant-expression cannot be narrowed from type 'long long' to 'int' in initializer list [-Wc++11-narrowing]\r\n        const Index index = m_dimensions.IndexOfRowMajor(array<Index, NumDims>{{firstIndex, secondIndex, otherIndices...}});\r\n                                                                                                         ^~~~~~~~~~~~\r\ntensorflow/core/kernels/resize_nearest_neighbor_op.cc:69:24: note: in instantiation of function template specialization 'Eigen::TensorMap<Eigen::Tensor<const int, 4, 1, int>, 16, MakePointer>::operator()<long long, int>' requested here\r\n          std::copy_n(&input_data(b, in_y, in_x, 0), st.channels,\r\n\r\n```\r\nI installed android sdk and ndk via android-studio, and here is my settings in WORKSPACE:\r\n```\r\nandroid_sdk_repository(\r\n    name = \"androidsdk\",\r\n    api_level = 23,\r\n    # Ensure that you have the build_tools_version below installed in the\r\n    # SDK manager as it updates periodically.\r\n    build_tools_version = \"25.0.2\",\r\n    # Replace with path to Android SDK on your system\r\n    path = \"/media/work/android/android-sdk\",\r\n)\r\n#\r\n# Android NDK r12b is recommended (higher may cause issues with Bazel)\r\nandroid_ndk_repository(\r\n    name=\"androidndk\",\r\n    path=\"/media/work/android/android-sdk/ndk-bundle\",\r\n    # This needs to be 14 or higher to compile TensorFlow. \r\n    # Note that the NDK version is not the API level.\r\n    api_level=14)\r\n```\r\n\r\nAnybody occurred this problem too? I don't know what happed.\r\n"}
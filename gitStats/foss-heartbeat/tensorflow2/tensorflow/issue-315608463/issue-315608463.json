{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18673", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18673/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18673/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/18673/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/18673", "id": 315608463, "node_id": "MDU6SXNzdWUzMTU2MDg0NjM=", "number": 18673, "title": "gradient_override_map for tf.distributions.Bernoulli", "user": {"login": "joshivm", "id": 19824337, "node_id": "MDQ6VXNlcjE5ODI0MzM3", "avatar_url": "https://avatars1.githubusercontent.com/u/19824337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshivm", "html_url": "https://github.com/joshivm", "followers_url": "https://api.github.com/users/joshivm/followers", "following_url": "https://api.github.com/users/joshivm/following{/other_user}", "gists_url": "https://api.github.com/users/joshivm/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshivm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshivm/subscriptions", "organizations_url": "https://api.github.com/users/joshivm/orgs", "repos_url": "https://api.github.com/users/joshivm/repos", "events_url": "https://api.github.com/users/joshivm/events{/privacy}", "received_events_url": "https://api.github.com/users/joshivm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-04-18T19:17:41Z", "updated_at": "2018-04-20T22:44:59Z", "closed_at": "2018-04-20T22:44:59Z", "author_association": "NONE", "body_html": "<p>I want to override gradient calculation for a series of ops that computes</p>\n<p><code>v = tf.reduce_mean(tf.distributions.Bernoulli(prob=[x]*10).sample())</code></p>\n<p>Here, shape of v is same as shape of x and I want dv/dx = input gradient at v</p>\n<p>Now I know one can register gradients for a single op but how about a series of ops. If I try to register gradient for individual ops in the series I get error with shapes of input and gradient at one of the ops in the series.</p>\n<p>Update 1:<br>\nI have written custom code for this purpose<br>\nOS Platform and Distribution I am using is Ubuntu 16.04 LTS<br>\nTensorFlow installed from - pip<br>\nTensorFlow version - 1.5.0<br>\nBazel version - NA<br>\nCUDA/cuDNN version - CuDNN9<br>\nGPU model and memory - GForce GTX 1060TI<br>\nExact command to reproduce - NA</p>\n<p>Is this possible in tensorflow?<br>\nThanks in advance!!</p>", "body_text": "I want to override gradient calculation for a series of ops that computes\nv = tf.reduce_mean(tf.distributions.Bernoulli(prob=[x]*10).sample())\nHere, shape of v is same as shape of x and I want dv/dx = input gradient at v\nNow I know one can register gradients for a single op but how about a series of ops. If I try to register gradient for individual ops in the series I get error with shapes of input and gradient at one of the ops in the series.\nUpdate 1:\nI have written custom code for this purpose\nOS Platform and Distribution I am using is Ubuntu 16.04 LTS\nTensorFlow installed from - pip\nTensorFlow version - 1.5.0\nBazel version - NA\nCUDA/cuDNN version - CuDNN9\nGPU model and memory - GForce GTX 1060TI\nExact command to reproduce - NA\nIs this possible in tensorflow?\nThanks in advance!!", "body": "I want to override gradient calculation for a series of ops that computes\r\n\r\n`v = tf.reduce_mean(tf.distributions.Bernoulli(prob=[x]*10).sample())`\r\n\r\nHere, shape of v is same as shape of x and I want dv/dx = input gradient at v\r\n\r\nNow I know one can register gradients for a single op but how about a series of ops. If I try to register gradient for individual ops in the series I get error with shapes of input and gradient at one of the ops in the series.\r\n\r\nUpdate 1:\r\nI have written custom code for this purpose\r\nOS Platform and Distribution I am using is Ubuntu 16.04 LTS\r\nTensorFlow installed from - pip \r\nTensorFlow version - 1.5.0\r\nBazel version - NA\r\nCUDA/cuDNN version - CuDNN9\r\nGPU model and memory - GForce GTX 1060TI\r\nExact command to reproduce - NA\r\n\r\nIs this possible in tensorflow?\r\nThanks in advance!!"}
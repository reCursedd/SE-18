{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21305", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21305/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21305/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21305/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/21305", "id": 346566578, "node_id": "MDU6SXNzdWUzNDY1NjY1Nzg=", "number": 21305, "title": "PS/Chief Nodes not terminating & Worker Nodes not accurately terminating with tf.estimator.train_and_evaluate", "user": {"login": "wuciawe", "id": 6767527, "node_id": "MDQ6VXNlcjY3Njc1Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/6767527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wuciawe", "html_url": "https://github.com/wuciawe", "followers_url": "https://api.github.com/users/wuciawe/followers", "following_url": "https://api.github.com/users/wuciawe/following{/other_user}", "gists_url": "https://api.github.com/users/wuciawe/gists{/gist_id}", "starred_url": "https://api.github.com/users/wuciawe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wuciawe/subscriptions", "organizations_url": "https://api.github.com/users/wuciawe/orgs", "repos_url": "https://api.github.com/users/wuciawe/repos", "events_url": "https://api.github.com/users/wuciawe/events{/privacy}", "received_events_url": "https://api.github.com/users/wuciawe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2018-08-01T11:51:04Z", "updated_at": "2018-11-20T07:54:27Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I'm using tf.estimator.train_and_evaluate of TF 1.9.</p>\n<p>When the training reaches the <code>max_steps</code> and <code>max_steps</code> is less than the dataset's size, the evaluator and the non-chief workers will terminate as expected. But, the ps nodes and the chief worker do not terminate automatically. They just stuck, and you have to kill them manually.</p>\n<p>When the <code>max_steps</code> is larger than the dataset's size, only one of the workers will terminate, which I guess is the one that reaches the end of the dataset. The remaining workers and ps nodes stuck.</p>", "body_text": "I'm using tf.estimator.train_and_evaluate of TF 1.9.\nWhen the training reaches the max_steps and max_steps is less than the dataset's size, the evaluator and the non-chief workers will terminate as expected. But, the ps nodes and the chief worker do not terminate automatically. They just stuck, and you have to kill them manually.\nWhen the max_steps is larger than the dataset's size, only one of the workers will terminate, which I guess is the one that reaches the end of the dataset. The remaining workers and ps nodes stuck.", "body": "I'm using tf.estimator.train_and_evaluate of TF 1.9.\r\n\r\nWhen the training reaches the `max_steps` and `max_steps` is less than the dataset's size, the evaluator and the non-chief workers will terminate as expected. But, the ps nodes and the chief worker do not terminate automatically. They just stuck, and you have to kill them manually.\r\n\r\nWhen the `max_steps` is larger than the dataset's size, only one of the workers will terminate, which I guess is the one that reaches the end of the dataset. The remaining workers and ps nodes stuck.\r\n"}
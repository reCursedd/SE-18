{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14885", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14885/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14885/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14885/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14885", "id": 276799816, "node_id": "MDU6SXNzdWUyNzY3OTk4MTY=", "number": 14885, "title": "tensorflow-terminate called after throwing an instance of 'std::system_error'   ", "user": {"login": "creativesh", "id": 22853189, "node_id": "MDQ6VXNlcjIyODUzMTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/22853189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/creativesh", "html_url": "https://github.com/creativesh", "followers_url": "https://api.github.com/users/creativesh/followers", "following_url": "https://api.github.com/users/creativesh/following{/other_user}", "gists_url": "https://api.github.com/users/creativesh/gists{/gist_id}", "starred_url": "https://api.github.com/users/creativesh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/creativesh/subscriptions", "organizations_url": "https://api.github.com/users/creativesh/orgs", "repos_url": "https://api.github.com/users/creativesh/repos", "events_url": "https://api.github.com/users/creativesh/events{/privacy}", "received_events_url": "https://api.github.com/users/creativesh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-26T04:58:59Z", "updated_at": "2017-11-30T09:21:43Z", "closed_at": "2017-11-27T16:10:44Z", "author_association": "NONE", "body_html": "<p>Hi<br>\nI am training a resNet50 with tensorflow, using a shared server with these properties:</p>\n<p>ubuntu 16.04<br>\n3 gtx 1080 gpus<br>\ntensorflow 1.3<br>\npython 2.7<br>\nCUDA 8.0.4<br>\nCUDNN 6<br>\nbut always after two epochs, and during the third epoch, I encounter this error:<br>\n<code>terminate called after throwing an instance of 'std::system_error' what(): Resource temporarily unavailable Aborted (core dumped)</code><br>\nwith adding some print in my code, I have found where is the problem:<br>\nthis is convert tfrecord to dataset:<br>\n`filenames = [\"balanced_t.tfrecords\"]<br>\ndataset = tf.contrib.data.TFRecordDataset(filenames)<br>\ndef parser(record):<br>\nkeys_to_features = {<br>\n# \"label\": tf.FixedLenFeature((), tf.string, default_value=\"\"),<br>\n\"mhot_label_raw\": tf.FixedLenFeature((), tf.string, default_value=\"\"),<br>\n\"mel_spec_raw\": tf.FixedLenFeature((), tf.string, default_value=\"\"),<br>\n}<br>\nparsed = tf.parse_single_example(record, keys_to_features)</p>\n<pre><code>mel_spec1d = tf.decode_raw(parsed['mel_spec_raw'], tf.float64)\n# label = tf.cast(parsed[\"label\"], tf.string)\nmhot_label = tf.decode_raw(parsed['mhot_label_raw'], tf.float64)\nmel_spec = tf.reshape(mel_spec1d, [96, 64])\n# aa=mel_spec\nreturn {\"mel_data\": mel_spec}, mhot_label\ndataset = dataset.map(parser)\ndataset = dataset.batch(batch_size)\ndataset = dataset.repeat(3)\niterator = dataset.make_one_shot_iterator()`\n</code></pre>\n<p>and this is my input pipline:<br>\n<code>while True: try: (features, labels) = sess.run(iterator.get_next()) except tf.errors.OutOfRangeError: print(\"end of training dataset\") </code><br>\ndue to my prints output,the error is for this line:<br>\n<code>(features, labels) = sess.run(iterator.get_next())</code><br>\nbut I dont see any problem,can you help me now?</p>\n<p>reproduce:replace any tfrecord with mine</p>", "body_text": "Hi\nI am training a resNet50 with tensorflow, using a shared server with these properties:\nubuntu 16.04\n3 gtx 1080 gpus\ntensorflow 1.3\npython 2.7\nCUDA 8.0.4\nCUDNN 6\nbut always after two epochs, and during the third epoch, I encounter this error:\nterminate called after throwing an instance of 'std::system_error' what(): Resource temporarily unavailable Aborted (core dumped)\nwith adding some print in my code, I have found where is the problem:\nthis is convert tfrecord to dataset:\n`filenames = [\"balanced_t.tfrecords\"]\ndataset = tf.contrib.data.TFRecordDataset(filenames)\ndef parser(record):\nkeys_to_features = {\n# \"label\": tf.FixedLenFeature((), tf.string, default_value=\"\"),\n\"mhot_label_raw\": tf.FixedLenFeature((), tf.string, default_value=\"\"),\n\"mel_spec_raw\": tf.FixedLenFeature((), tf.string, default_value=\"\"),\n}\nparsed = tf.parse_single_example(record, keys_to_features)\nmel_spec1d = tf.decode_raw(parsed['mel_spec_raw'], tf.float64)\n# label = tf.cast(parsed[\"label\"], tf.string)\nmhot_label = tf.decode_raw(parsed['mhot_label_raw'], tf.float64)\nmel_spec = tf.reshape(mel_spec1d, [96, 64])\n# aa=mel_spec\nreturn {\"mel_data\": mel_spec}, mhot_label\ndataset = dataset.map(parser)\ndataset = dataset.batch(batch_size)\ndataset = dataset.repeat(3)\niterator = dataset.make_one_shot_iterator()`\n\nand this is my input pipline:\nwhile True: try: (features, labels) = sess.run(iterator.get_next()) except tf.errors.OutOfRangeError: print(\"end of training dataset\") \ndue to my prints output,the error is for this line:\n(features, labels) = sess.run(iterator.get_next())\nbut I dont see any problem,can you help me now?\nreproduce:replace any tfrecord with mine", "body": "Hi\r\nI am training a resNet50 with tensorflow, using a shared server with these properties:\r\n\r\nubuntu 16.04\r\n3 gtx 1080 gpus\r\ntensorflow 1.3\r\npython 2.7\r\nCUDA 8.0.4\r\nCUDNN 6\r\nbut always after two epochs, and during the third epoch, I encounter this error:\r\n`terminate called after throwing an instance of 'std::system_error' what():\r\nResource temporarily unavailable\r\nAborted (core dumped)`\r\nwith adding some print in my code, I have found where is the problem:\r\nthis is convert tfrecord to dataset:\r\n`filenames = [\"balanced_t.tfrecords\"]\r\ndataset = tf.contrib.data.TFRecordDataset(filenames)\r\n    def parser(record):\r\n    keys_to_features = {\r\n        # \"label\": tf.FixedLenFeature((), tf.string, default_value=\"\"),\r\n        \"mhot_label_raw\": tf.FixedLenFeature((), tf.string, default_value=\"\"),\r\n        \"mel_spec_raw\": tf.FixedLenFeature((), tf.string, default_value=\"\"),\r\n    }\r\n    parsed = tf.parse_single_example(record, keys_to_features)\r\n\r\n    mel_spec1d = tf.decode_raw(parsed['mel_spec_raw'], tf.float64)\r\n    # label = tf.cast(parsed[\"label\"], tf.string)\r\n    mhot_label = tf.decode_raw(parsed['mhot_label_raw'], tf.float64)\r\n    mel_spec = tf.reshape(mel_spec1d, [96, 64])\r\n    # aa=mel_spec\r\n    return {\"mel_data\": mel_spec}, mhot_label\r\n    dataset = dataset.map(parser)\r\n    dataset = dataset.batch(batch_size)\r\n    dataset = dataset.repeat(3)\r\n    iterator = dataset.make_one_shot_iterator()`\r\nand this is my input pipline:\r\n`while True:\r\n            try:\r\n               (features, labels) = sess.run(iterator.get_next())\r\n            except tf.errors.OutOfRangeError:\r\n               print(\"end of training dataset\")\r\n`\r\ndue to my prints output,the error is for this line:\r\n`(features, labels) = sess.run(iterator.get_next())`\r\nbut I dont see any problem,can you help me now?\r\n\r\nreproduce:replace any tfrecord with mine\r\n\r\n"}
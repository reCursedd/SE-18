{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/427884440", "html_url": "https://github.com/tensorflow/tensorflow/issues/8286#issuecomment-427884440", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8286", "id": 427884440, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzg4NDQ0MA==", "user": {"login": "dereklstinson", "id": 20325587, "node_id": "MDQ6VXNlcjIwMzI1NTg3", "avatar_url": "https://avatars0.githubusercontent.com/u/20325587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dereklstinson", "html_url": "https://github.com/dereklstinson", "followers_url": "https://api.github.com/users/dereklstinson/followers", "following_url": "https://api.github.com/users/dereklstinson/following{/other_user}", "gists_url": "https://api.github.com/users/dereklstinson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dereklstinson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dereklstinson/subscriptions", "organizations_url": "https://api.github.com/users/dereklstinson/orgs", "repos_url": "https://api.github.com/users/dereklstinson/repos", "events_url": "https://api.github.com/users/dereklstinson/events{/privacy}", "received_events_url": "https://api.github.com/users/dereklstinson/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-08T15:46:16Z", "updated_at": "2018-10-08T15:46:16Z", "author_association": "NONE", "body_html": "<p>Having built a CNN using multiple go-routines in go. I can see that NCHW is at least easier to stack the outputs of each of the neurons in NCHW.  Since, it naturally wants to work out that way (Even if you do a convolution in NHWC the outputs want to stack into NCHW). That being said. In NHWC the channels of the weights and inputs line up and the cpu doesn't need to skip around in memory when doing the convolution, and NHWC beats NCHW in single threaded performance.  I would say depending on the resources at your disposal it would be best to test both to see which one works better.</p>", "body_text": "Having built a CNN using multiple go-routines in go. I can see that NCHW is at least easier to stack the outputs of each of the neurons in NCHW.  Since, it naturally wants to work out that way (Even if you do a convolution in NHWC the outputs want to stack into NCHW). That being said. In NHWC the channels of the weights and inputs line up and the cpu doesn't need to skip around in memory when doing the convolution, and NHWC beats NCHW in single threaded performance.  I would say depending on the resources at your disposal it would be best to test both to see which one works better.", "body": "Having built a CNN using multiple go-routines in go. I can see that NCHW is at least easier to stack the outputs of each of the neurons in NCHW.  Since, it naturally wants to work out that way (Even if you do a convolution in NHWC the outputs want to stack into NCHW). That being said. In NHWC the channels of the weights and inputs line up and the cpu doesn't need to skip around in memory when doing the convolution, and NHWC beats NCHW in single threaded performance.  I would say depending on the resources at your disposal it would be best to test both to see which one works better."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/626", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/626/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/626/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/626/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/626", "id": 123951904, "node_id": "MDU6SXNzdWUxMjM5NTE5MDQ=", "number": 626, "title": "Cannot restore large model", "user": {"login": "jstaker7", "id": 1364252, "node_id": "MDQ6VXNlcjEzNjQyNTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1364252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jstaker7", "html_url": "https://github.com/jstaker7", "followers_url": "https://api.github.com/users/jstaker7/followers", "following_url": "https://api.github.com/users/jstaker7/following{/other_user}", "gists_url": "https://api.github.com/users/jstaker7/gists{/gist_id}", "starred_url": "https://api.github.com/users/jstaker7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jstaker7/subscriptions", "organizations_url": "https://api.github.com/users/jstaker7/orgs", "repos_url": "https://api.github.com/users/jstaker7/repos", "events_url": "https://api.github.com/users/jstaker7/events{/privacy}", "received_events_url": "https://api.github.com/users/jstaker7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-12-26T22:35:10Z", "updated_at": "2016-03-08T22:55:10Z", "closed_at": "2016-03-08T22:55:10Z", "author_association": "NONE", "body_html": "<p>I'm using tf.train.save.Saver to save my model parameters which come out to be ~1.5GB on disk. When I try to reload the model I get a segmentation fault (this is on a machine with 60GB memory). This also happens when using the option restore_sequentially=True. I found an option to shard the save, but it saves one file per device -- surprisingly there are two files, one is virtually nothing and the other is ~1.5GB for a CPU-only machine, so this didn't help. How can I save my model in such a way that I can get it back into memory?</p>\n<p>Update:<br>\nI tried saving/loading a smaller model. Surprising the save came out to be ~2GB, which is a larger than the save file of the original model; and this 2GB file loaded fine when restoring the model. So perhaps my original model is really larger than 1.5GB and failed to save properly.</p>", "body_text": "I'm using tf.train.save.Saver to save my model parameters which come out to be ~1.5GB on disk. When I try to reload the model I get a segmentation fault (this is on a machine with 60GB memory). This also happens when using the option restore_sequentially=True. I found an option to shard the save, but it saves one file per device -- surprisingly there are two files, one is virtually nothing and the other is ~1.5GB for a CPU-only machine, so this didn't help. How can I save my model in such a way that I can get it back into memory?\nUpdate:\nI tried saving/loading a smaller model. Surprising the save came out to be ~2GB, which is a larger than the save file of the original model; and this 2GB file loaded fine when restoring the model. So perhaps my original model is really larger than 1.5GB and failed to save properly.", "body": "I'm using tf.train.save.Saver to save my model parameters which come out to be ~1.5GB on disk. When I try to reload the model I get a segmentation fault (this is on a machine with 60GB memory). This also happens when using the option restore_sequentially=True. I found an option to shard the save, but it saves one file per device -- surprisingly there are two files, one is virtually nothing and the other is ~1.5GB for a CPU-only machine, so this didn't help. How can I save my model in such a way that I can get it back into memory?\n\nUpdate:\nI tried saving/loading a smaller model. Surprising the save came out to be ~2GB, which is a larger than the save file of the original model; and this 2GB file loaded fine when restoring the model. So perhaps my original model is really larger than 1.5GB and failed to save properly.\n"}
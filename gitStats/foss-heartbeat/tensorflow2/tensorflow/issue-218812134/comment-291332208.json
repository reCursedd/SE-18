{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/291332208", "html_url": "https://github.com/tensorflow/tensorflow/issues/8913#issuecomment-291332208", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8913", "id": 291332208, "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTMzMjIwOA==", "user": {"login": "JAStark", "id": 7544235, "node_id": "MDQ6VXNlcjc1NDQyMzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/7544235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JAStark", "html_url": "https://github.com/JAStark", "followers_url": "https://api.github.com/users/JAStark/followers", "following_url": "https://api.github.com/users/JAStark/following{/other_user}", "gists_url": "https://api.github.com/users/JAStark/gists{/gist_id}", "starred_url": "https://api.github.com/users/JAStark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JAStark/subscriptions", "organizations_url": "https://api.github.com/users/JAStark/orgs", "repos_url": "https://api.github.com/users/JAStark/repos", "events_url": "https://api.github.com/users/JAStark/events{/privacy}", "received_events_url": "https://api.github.com/users/JAStark/received_events", "type": "User", "site_admin": false}, "created_at": "2017-04-04T00:06:28Z", "updated_at": "2017-04-04T00:06:28Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=7946809\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gunan\">@gunan</a> thank you so much! My <code>.bash_profile</code> now reads</p>\n<pre><code>export DYLD_LIBRARY_PATH=/Developer/NVIDIA/CUDA-8.0:/Developer/NVIDIA/CUDA-8.0/lib:/usr/local/cuda:/usr/local/cuda/lib:$DYLD_LIBRARY_PATH \n\nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/Users/jenniferstark/cuda/lib\"\nexport CUDA_HOME=/Users/jenniferstark/cuda\n</code></pre>\n<p><strong>keras</strong> and <strong>tensorflow</strong> now each import successfully. Running</p>\n<pre><code>import tensorflow as tf\n\n# Creates a graph.\na = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')\nb = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')\nc = tf.matmul(a, b)\n\n# Creates a session with log_device_placement set to True.\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True))\n\n# Runs the op.\nprint sess.run(c)\n</code></pre>\n<p>also <em>seems</em> to do what it should, as far as I can tell. <strong>However</strong>, now when I try to run my keras cnn model, I run into an issue with scipy.linalg, which is called in <a href=\"https://github.com/fchollet/keras/blob/master/keras/preprocessing/image.py\">Keras' image preprocessing code</a>:</p>\n<pre><code>(bigfish) jenniferstark@Jennifers-MacBook-Pro:~/Documents/Repositories/kaggle/bigfish/src/models$ python train_keras_model.py \nUsing TensorFlow backend.\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.8.0.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.8.0.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.1.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.8.0.dylib locally\nTraceback (most recent call last):\n  File \"train_keras_model.py\", line 5, in &lt;module&gt;\n    from keras.preprocessing.image import ImageDataGenerator, array_to_img, img_to_array, load_img\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/preprocessing/image.py\", line 10, in &lt;module&gt;\n    from scipy import linalg\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/__init__.py\", line 175, in &lt;module&gt;\n    from .misc import *\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/misc.py\", line 5, in &lt;module&gt;\n    from .blas import get_blas_funcs\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/blas.py\", line 155, in &lt;module&gt;\n    from scipy.linalg import _fblas\nImportError: dlopen(/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/_fblas.cpython-35m-darwin.so, 2): Library not loaded: /usr/local/lib/libgcc_s.1.dylib\n  Referenced from: /Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/_fblas.cpython-35m-darwin.so\n  Reason: image not found\n</code></pre>\n<p><strong>While</strong> in Spyder, I still get what appears to be the <em>original</em> error:</p>\n<pre><code>import keras\nUsing TensorFlow backend.\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-4-c74e2bd4ca71&gt;\", line 1, in &lt;module&gt;\n    import keras\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/__init__.py\", line 3, in &lt;module&gt;\n    from . import activations\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/activations.py\", line 3, in &lt;module&gt;\n    from . import backend as K\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/backend/__init__.py\", line 64, in &lt;module&gt;\n    from .tensorflow_backend import *\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/backend/tensorflow_backend.py\", line 1, in &lt;module&gt;\n    import tensorflow as tf\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/__init__.py\", line 24, in &lt;module&gt;\n    from tensorflow.python import *\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/__init__.py\", line 72, in &lt;module&gt;\n    raise ImportError(msg)\n\nImportError: Traceback (most recent call last):\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/__init__.py\", line 61, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 28, in &lt;module&gt;\n    _pywrap_tensorflow = swig_import_helper()\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/imp.py\", line 242, in load_module\n    return load_dynamic(name, filename, file)\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/imp.py\", line 342, in load_dynamic\n    return _load(spec)\nImportError: dlopen(/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow.so, 10): Library not loaded: @rpath/libcudart.8.0.dylib\n  Referenced from: /Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow.so\n  Reason: image not found\n\n\nFailed to load the native TensorFlow runtime.\n</code></pre>\n<p>So now I am unsure whether this issue is related to TensorFlow, Keras, or Scipy <g-emoji class=\"g-emoji\" alias=\"worried\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f61f.png\">\ud83d\ude1f</g-emoji></p>\n<p>Again, thank you in advance <g-emoji class=\"g-emoji\" alias=\"robot\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f916.png\">\ud83e\udd16</g-emoji></p>", "body_text": "@gunan thank you so much! My .bash_profile now reads\nexport DYLD_LIBRARY_PATH=/Developer/NVIDIA/CUDA-8.0:/Developer/NVIDIA/CUDA-8.0/lib:/usr/local/cuda:/usr/local/cuda/lib:$DYLD_LIBRARY_PATH \n\nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/Users/jenniferstark/cuda/lib\"\nexport CUDA_HOME=/Users/jenniferstark/cuda\n\nkeras and tensorflow now each import successfully. Running\nimport tensorflow as tf\n\n# Creates a graph.\na = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')\nb = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')\nc = tf.matmul(a, b)\n\n# Creates a session with log_device_placement set to True.\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True))\n\n# Runs the op.\nprint sess.run(c)\n\nalso seems to do what it should, as far as I can tell. However, now when I try to run my keras cnn model, I run into an issue with scipy.linalg, which is called in Keras' image preprocessing code:\n(bigfish) jenniferstark@Jennifers-MacBook-Pro:~/Documents/Repositories/kaggle/bigfish/src/models$ python train_keras_model.py \nUsing TensorFlow backend.\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.8.0.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.5.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.8.0.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.1.dylib locally\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.8.0.dylib locally\nTraceback (most recent call last):\n  File \"train_keras_model.py\", line 5, in <module>\n    from keras.preprocessing.image import ImageDataGenerator, array_to_img, img_to_array, load_img\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/preprocessing/image.py\", line 10, in <module>\n    from scipy import linalg\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/__init__.py\", line 175, in <module>\n    from .misc import *\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/misc.py\", line 5, in <module>\n    from .blas import get_blas_funcs\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/blas.py\", line 155, in <module>\n    from scipy.linalg import _fblas\nImportError: dlopen(/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/_fblas.cpython-35m-darwin.so, 2): Library not loaded: /usr/local/lib/libgcc_s.1.dylib\n  Referenced from: /Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/_fblas.cpython-35m-darwin.so\n  Reason: image not found\n\nWhile in Spyder, I still get what appears to be the original error:\nimport keras\nUsing TensorFlow backend.\nTraceback (most recent call last):\n\n  File \"<ipython-input-4-c74e2bd4ca71>\", line 1, in <module>\n    import keras\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/__init__.py\", line 3, in <module>\n    from . import activations\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/activations.py\", line 3, in <module>\n    from . import backend as K\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/backend/__init__.py\", line 64, in <module>\n    from .tensorflow_backend import *\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/backend/tensorflow_backend.py\", line 1, in <module>\n    import tensorflow as tf\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/__init__.py\", line 24, in <module>\n    from tensorflow.python import *\n\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/__init__.py\", line 72, in <module>\n    raise ImportError(msg)\n\nImportError: Traceback (most recent call last):\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/__init__.py\", line 61, in <module>\n    from tensorflow.python import pywrap_tensorflow\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 28, in <module>\n    _pywrap_tensorflow = swig_import_helper()\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/imp.py\", line 242, in load_module\n    return load_dynamic(name, filename, file)\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/imp.py\", line 342, in load_dynamic\n    return _load(spec)\nImportError: dlopen(/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow.so, 10): Library not loaded: @rpath/libcudart.8.0.dylib\n  Referenced from: /Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow.so\n  Reason: image not found\n\n\nFailed to load the native TensorFlow runtime.\n\nSo now I am unsure whether this issue is related to TensorFlow, Keras, or Scipy \ud83d\ude1f\nAgain, thank you in advance \ud83e\udd16", "body": "@gunan thank you so much! My `.bash_profile` now reads\r\n```\r\nexport DYLD_LIBRARY_PATH=/Developer/NVIDIA/CUDA-8.0:/Developer/NVIDIA/CUDA-8.0/lib:/usr/local/cuda:/usr/local/cuda/lib:$DYLD_LIBRARY_PATH \r\n\r\nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/Users/jenniferstark/cuda/lib\"\r\nexport CUDA_HOME=/Users/jenniferstark/cuda\r\n```\r\n**keras** and **tensorflow** now each import successfully. Running \r\n```\r\nimport tensorflow as tf\r\n\r\n# Creates a graph.\r\na = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')\r\nb = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')\r\nc = tf.matmul(a, b)\r\n\r\n# Creates a session with log_device_placement set to True.\r\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True))\r\n\r\n# Runs the op.\r\nprint sess.run(c)\r\n``` \r\nalso _seems_ to do what it should, as far as I can tell. **However**, now when I try to run my keras cnn model, I run into an issue with scipy.linalg, which is called in [Keras' image preprocessing code](https://github.com/fchollet/keras/blob/master/keras/preprocessing/image.py):\r\n```\r\n(bigfish) jenniferstark@Jennifers-MacBook-Pro:~/Documents/Repositories/kaggle/bigfish/src/models$ python train_keras_model.py \r\nUsing TensorFlow backend.\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcublas.8.0.dylib locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcudnn.5.dylib locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcufft.8.0.dylib locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcuda.1.dylib locally\r\nI tensorflow/stream_executor/dso_loader.cc:135] successfully opened CUDA library libcurand.8.0.dylib locally\r\nTraceback (most recent call last):\r\n  File \"train_keras_model.py\", line 5, in <module>\r\n    from keras.preprocessing.image import ImageDataGenerator, array_to_img, img_to_array, load_img\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/preprocessing/image.py\", line 10, in <module>\r\n    from scipy import linalg\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/__init__.py\", line 175, in <module>\r\n    from .misc import *\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/misc.py\", line 5, in <module>\r\n    from .blas import get_blas_funcs\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/blas.py\", line 155, in <module>\r\n    from scipy.linalg import _fblas\r\nImportError: dlopen(/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/_fblas.cpython-35m-darwin.so, 2): Library not loaded: /usr/local/lib/libgcc_s.1.dylib\r\n  Referenced from: /Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/scipy/linalg/_fblas.cpython-35m-darwin.so\r\n  Reason: image not found\r\n```\r\n**While** in Spyder, I still get what appears to be the _original_ error:\r\n```\r\nimport keras\r\nUsing TensorFlow backend.\r\nTraceback (most recent call last):\r\n\r\n  File \"<ipython-input-4-c74e2bd4ca71>\", line 1, in <module>\r\n    import keras\r\n\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/__init__.py\", line 3, in <module>\r\n    from . import activations\r\n\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/activations.py\", line 3, in <module>\r\n    from . import backend as K\r\n\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/backend/__init__.py\", line 64, in <module>\r\n    from .tensorflow_backend import *\r\n\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/keras/backend/tensorflow_backend.py\", line 1, in <module>\r\n    import tensorflow as tf\r\n\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/__init__.py\", line 24, in <module>\r\n    from tensorflow.python import *\r\n\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/__init__.py\", line 72, in <module>\r\n    raise ImportError(msg)\r\n\r\nImportError: Traceback (most recent call last):\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/__init__.py\", line 61, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 28, in <module>\r\n    _pywrap_tensorflow = swig_import_helper()\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/pywrap_tensorflow.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow', fp, pathname, description)\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: dlopen(/Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow.so, 10): Library not loaded: @rpath/libcudart.8.0.dylib\r\n  Referenced from: /Users/jenniferstark/anaconda/envs/bigfish/lib/python3.5/site-packages/tensorflow/python/_pywrap_tensorflow.so\r\n  Reason: image not found\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n```\r\n\r\nSo now I am unsure whether this issue is related to TensorFlow, Keras, or Scipy \ud83d\ude1f \r\n\r\nAgain, thank you in advance \ud83e\udd16 "}
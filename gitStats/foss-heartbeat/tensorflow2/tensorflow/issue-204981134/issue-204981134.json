{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7225", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7225/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7225/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7225/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/7225", "id": 204981134, "node_id": "MDU6SXNzdWUyMDQ5ODExMzQ=", "number": 7225, "title": "Feature request: equivalent of np.clip", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-02T20:04:59Z", "updated_at": "2017-12-16T23:02:59Z", "closed_at": "2017-12-16T23:02:59Z", "author_association": "CONTRIBUTOR", "body_html": "<p><code>tf.clip_by_value</code> is missing an important property of <code>np.clip</code> which lets upper/lower bounds to be tensors, whereas <code>tf.clip_by_value</code> only takes scalars</p>\n<p>A work-around is <code>tf.minimum(upper, tf.maximum(lower, x))</code> but that uses 2x memory for gradients. Another potential work-around\u00a0is to use <code>tf.map_fn</code> + <code>tf.clip_by_value</code>, but it is orders of magnitude slower. Some profiling: <a href=\"https://github.com/yaroslavvb/notebooks/blob/master/clipping-profile.ipynb\">https://github.com/yaroslavvb/notebooks/blob/master/clipping-profile.ipynb</a></p>", "body_text": "tf.clip_by_value is missing an important property of np.clip which lets upper/lower bounds to be tensors, whereas tf.clip_by_value only takes scalars\nA work-around is tf.minimum(upper, tf.maximum(lower, x)) but that uses 2x memory for gradients. Another potential work-around\u00a0is to use tf.map_fn + tf.clip_by_value, but it is orders of magnitude slower. Some profiling: https://github.com/yaroslavvb/notebooks/blob/master/clipping-profile.ipynb", "body": "`tf.clip_by_value` is missing an important property of `np.clip` which lets upper/lower bounds to be tensors, whereas `tf.clip_by_value` only takes scalars\r\n\r\nA work-around is `tf.minimum(upper, tf.maximum(lower, x))` but that uses 2x memory for gradients. Another potential work-around\u00a0is to use `tf.map_fn` + `tf.clip_by_value`, but it is orders of magnitude slower. Some profiling: https://github.com/yaroslavvb/notebooks/blob/master/clipping-profile.ipynb"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17609", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17609/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17609/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17609/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17609", "id": 304027253, "node_id": "MDU6SXNzdWUzMDQwMjcyNTM=", "number": 17609, "title": "The code in google_auth_provider.cc looks for application default credentials in an obsolete location.", "user": {"login": "ojarjur", "id": 3039877, "node_id": "MDQ6VXNlcjMwMzk4Nzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3039877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ojarjur", "html_url": "https://github.com/ojarjur", "followers_url": "https://api.github.com/users/ojarjur/followers", "following_url": "https://api.github.com/users/ojarjur/following{/other_user}", "gists_url": "https://api.github.com/users/ojarjur/gists{/gist_id}", "starred_url": "https://api.github.com/users/ojarjur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ojarjur/subscriptions", "organizations_url": "https://api.github.com/users/ojarjur/orgs", "repos_url": "https://api.github.com/users/ojarjur/repos", "events_url": "https://api.github.com/users/ojarjur/events{/privacy}", "received_events_url": "https://api.github.com/users/ojarjur/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-03-10T01:15:02Z", "updated_at": "2018-04-17T23:15:12Z", "closed_at": "2018-04-17T23:15:12Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Debian 4.9.65</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: binary</li>\n<li><strong>TensorFlow version (use command below)</strong>: ('v1.6.0-rc1-933-gf7acdf2ed5', '1.7.0-dev20180305')</li>\n<li><strong>Python version</strong>: 2.7.14</li>\n<li><strong>Bazel version (if compiling from source)</strong>: N/A</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: N/A</li>\n<li><strong>CUDA/cuDNN version</strong>: N/A</li>\n<li><strong>GPU model and memory</strong>: N/A</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<div class=\"highlight highlight-source-shell\"><pre>gcloud auth activate-service-account --file <span class=\"pl-smi\">${CREDENTIALS_FILE}</span>\nls <span class=\"pl-k\">~</span>/.config/gcloud/application_default_credentials.json</pre></div>\n<h3>Describe the problem</h3>\n<p>This is a bug where the code for reading Google credentials written by the <code>gcloud</code> tool no longer matches the behavior of the <code>gcloud</code> tool (the tool changed its behavior since this code was written).</p>\n<p>Specifically, the code <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/cloud/google_auth_provider.cc#L97\">here</a> tries to read credentials written by <code>gcloud</code> to a well-known location of \"~/.config/gcloud/application_default_credentials.json\".</p>\n<p>However, <code>gcloud</code> does not write credentials to that location anymore.</p>\n<p>Moreover, the Cloud SDK (of which <code>gcloud</code> is one component) provides no guarantees about the stability of where/how it stores credentials.</p>\n<p>Instead, tools using these credentials are expected to use the <code>gcloud</code> tool to produce them by running:</p>\n<div class=\"highlight highlight-source-shell\"><pre>gcloud config config-helper --format <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>value(credential)<span class=\"pl-pds\">\"</span></span></pre></div>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Debian 4.9.65\nTensorFlow installed from (source or binary): binary\nTensorFlow version (use command below): ('v1.6.0-rc1-933-gf7acdf2ed5', '1.7.0-dev20180305')\nPython version: 2.7.14\nBazel version (if compiling from source): N/A\nGCC/Compiler version (if compiling from source): N/A\nCUDA/cuDNN version: N/A\nGPU model and memory: N/A\nExact command to reproduce:\n\ngcloud auth activate-service-account --file ${CREDENTIALS_FILE}\nls ~/.config/gcloud/application_default_credentials.json\nDescribe the problem\nThis is a bug where the code for reading Google credentials written by the gcloud tool no longer matches the behavior of the gcloud tool (the tool changed its behavior since this code was written).\nSpecifically, the code here tries to read credentials written by gcloud to a well-known location of \"~/.config/gcloud/application_default_credentials.json\".\nHowever, gcloud does not write credentials to that location anymore.\nMoreover, the Cloud SDK (of which gcloud is one component) provides no guarantees about the stability of where/how it stores credentials.\nInstead, tools using these credentials are expected to use the gcloud tool to produce them by running:\ngcloud config config-helper --format \"value(credential)\"", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Debian 4.9.65\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: ('v1.6.0-rc1-933-gf7acdf2ed5', '1.7.0-dev20180305')\r\n- **Python version**: 2.7.14\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**:\r\n\r\n```sh\r\ngcloud auth activate-service-account --file ${CREDENTIALS_FILE}\r\nls ~/.config/gcloud/application_default_credentials.json\r\n```\r\n\r\n### Describe the problem\r\nThis is a bug where the code for reading Google credentials written by the `gcloud` tool no longer matches the behavior of the `gcloud` tool (the tool changed its behavior since this code was written).\r\n\r\nSpecifically, the code [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/cloud/google_auth_provider.cc#L97) tries to read credentials written by `gcloud` to a well-known location of \"~/.config/gcloud/application_default_credentials.json\".\r\n\r\nHowever, `gcloud` does not write credentials to that location anymore.\r\n\r\nMoreover, the Cloud SDK (of which `gcloud` is one component) provides no guarantees about the stability of where/how it stores credentials.\r\n\r\nInstead, tools using these credentials are expected to use the `gcloud` tool to produce them by running:\r\n\r\n```sh\r\ngcloud config config-helper --format \"value(credential)\"\r\n```"}
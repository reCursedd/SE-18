{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/351860051", "html_url": "https://github.com/tensorflow/tensorflow/issues/13433#issuecomment-351860051", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13433", "id": 351860051, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTg2MDA1MQ==", "user": {"login": "yaroslavvb", "id": 23068, "node_id": "MDQ6VXNlcjIzMDY4", "avatar_url": "https://avatars3.githubusercontent.com/u/23068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaroslavvb", "html_url": "https://github.com/yaroslavvb", "followers_url": "https://api.github.com/users/yaroslavvb/followers", "following_url": "https://api.github.com/users/yaroslavvb/following{/other_user}", "gists_url": "https://api.github.com/users/yaroslavvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaroslavvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaroslavvb/subscriptions", "organizations_url": "https://api.github.com/users/yaroslavvb/orgs", "repos_url": "https://api.github.com/users/yaroslavvb/repos", "events_url": "https://api.github.com/users/yaroslavvb/events{/privacy}", "received_events_url": "https://api.github.com/users/yaroslavvb/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-14T22:49:00Z", "updated_at": "2017-12-14T22:49:00Z", "author_association": "CONTRIBUTOR", "body_html": "<p>BTW, you can use \"mem_util.py\" from this <a href=\"https://github.com/yaroslavvb/chain_constant_memory/\">repo</a> to simplify debugging memory issues.</p>\n<p>As an example, run this file <a href=\"https://github.com/yaroslavvb/stuff/blob/master/double_memory_bug.py\">https://github.com/yaroslavvb/stuff/blob/master/double_memory_bug.py</a></p>\n<p>This prints memory allocation timeline</p>\n<pre><code>Printing timeline for /gpu:0\n     0          0          0 _SOURCE\n   457          0          0 Variable\n   499          0          0 random_uniform/shape\n   521          0          0 random_uniform/sub\n   529          0          0 random_uniform/min\n   555  400000000  400000000 random_uniform/RandomUniform\n417117  400000000          0 random_uniform/mul\n417185  400000000          0 random_uniform\n417243  800000000  400000000 Variable/Assign\n417289  400000000 -400000000 random_uniform/RandomUniform\n417304  400000000          0 init\n</code></pre>\n<p>It extracts numbers from run_metadata...memory_stats entries, so here you can see Assign allocated memory rather than forward</p>", "body_text": "BTW, you can use \"mem_util.py\" from this repo to simplify debugging memory issues.\nAs an example, run this file https://github.com/yaroslavvb/stuff/blob/master/double_memory_bug.py\nThis prints memory allocation timeline\nPrinting timeline for /gpu:0\n     0          0          0 _SOURCE\n   457          0          0 Variable\n   499          0          0 random_uniform/shape\n   521          0          0 random_uniform/sub\n   529          0          0 random_uniform/min\n   555  400000000  400000000 random_uniform/RandomUniform\n417117  400000000          0 random_uniform/mul\n417185  400000000          0 random_uniform\n417243  800000000  400000000 Variable/Assign\n417289  400000000 -400000000 random_uniform/RandomUniform\n417304  400000000          0 init\n\nIt extracts numbers from run_metadata...memory_stats entries, so here you can see Assign allocated memory rather than forward", "body": "BTW, you can use \"mem_util.py\" from this [repo](https://github.com/yaroslavvb/chain_constant_memory/) to simplify debugging memory issues.\r\n\r\nAs an example, run this file https://github.com/yaroslavvb/stuff/blob/master/double_memory_bug.py\r\n\r\nThis prints memory allocation timeline\r\n```\r\nPrinting timeline for /gpu:0\r\n     0          0          0 _SOURCE\r\n   457          0          0 Variable\r\n   499          0          0 random_uniform/shape\r\n   521          0          0 random_uniform/sub\r\n   529          0          0 random_uniform/min\r\n   555  400000000  400000000 random_uniform/RandomUniform\r\n417117  400000000          0 random_uniform/mul\r\n417185  400000000          0 random_uniform\r\n417243  800000000  400000000 Variable/Assign\r\n417289  400000000 -400000000 random_uniform/RandomUniform\r\n417304  400000000          0 init\r\n```\r\n\r\nIt extracts numbers from run_metadata...memory_stats entries, so here you can see Assign allocated memory rather than forward"}
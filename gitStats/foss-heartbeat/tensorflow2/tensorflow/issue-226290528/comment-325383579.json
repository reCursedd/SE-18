{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/325383579", "html_url": "https://github.com/tensorflow/tensorflow/issues/9661#issuecomment-325383579", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9661", "id": 325383579, "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTM4MzU3OQ==", "user": {"login": "lissyx", "id": 1645737, "node_id": "MDQ6VXNlcjE2NDU3Mzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1645737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lissyx", "html_url": "https://github.com/lissyx", "followers_url": "https://api.github.com/users/lissyx/followers", "following_url": "https://api.github.com/users/lissyx/following{/other_user}", "gists_url": "https://api.github.com/users/lissyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/lissyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lissyx/subscriptions", "organizations_url": "https://api.github.com/users/lissyx/orgs", "repos_url": "https://api.github.com/users/lissyx/repos", "events_url": "https://api.github.com/users/lissyx/events{/privacy}", "received_events_url": "https://api.github.com/users/lissyx/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-28T15:17:53Z", "updated_at": "2017-08-28T15:19:37Z", "author_association": "CONTRIBUTOR", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=2301185\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ruppeshnalwaya1993\">@ruppeshnalwaya1993</a> This is what I have in our code, inside the <code>tf_library()</code> section:</p>\n<pre><code>tfcompile_flags = select({\n        \"//tensorflow:rpi3\": str('--target_triple=\"armv6-linux-gnueabihf\" --target_cpu=\"cortex-a53\" --target_features=\"+neon-fp-armv8\"'),\n--target_features=\"+sse4.1\" --target_features=\"+sse4.2\" --target_features=\"+avx\" --target_features=\"+avx2\" --target_features=\"+fma\"',\n        \"//conditions:default\": str('')\n    }),\n</code></pre>\n<p>So basically your <code>BUILD</code> file would contain:</p>\n<pre><code>$ cat native_client/BUILD \nload(\"//tensorflow/compiler/aot:tfcompile.bzl\",\n     \"tf_library\")\n\ntf_library(\n    name = \"project_model\",\n    cpp_class = \"class::method\",\n    graph = \"model.pb\",\n    config = \"tfcompile.config.pbtxt\",\n    tfcompile_flags = select({\n        \"//tensorflow:rpi3\": str('--target_triple=\"armv6-linux-gnueabihf\" --target_cpu=\"cortex-a53\" --target_features=\"+neon-fp-armv8\"'),\n        \"//conditions:default\": str('')\n    }),\n)\n\n</code></pre>", "body_text": "@ruppeshnalwaya1993 This is what I have in our code, inside the tf_library() section:\ntfcompile_flags = select({\n        \"//tensorflow:rpi3\": str('--target_triple=\"armv6-linux-gnueabihf\" --target_cpu=\"cortex-a53\" --target_features=\"+neon-fp-armv8\"'),\n--target_features=\"+sse4.1\" --target_features=\"+sse4.2\" --target_features=\"+avx\" --target_features=\"+avx2\" --target_features=\"+fma\"',\n        \"//conditions:default\": str('')\n    }),\n\nSo basically your BUILD file would contain:\n$ cat native_client/BUILD \nload(\"//tensorflow/compiler/aot:tfcompile.bzl\",\n     \"tf_library\")\n\ntf_library(\n    name = \"project_model\",\n    cpp_class = \"class::method\",\n    graph = \"model.pb\",\n    config = \"tfcompile.config.pbtxt\",\n    tfcompile_flags = select({\n        \"//tensorflow:rpi3\": str('--target_triple=\"armv6-linux-gnueabihf\" --target_cpu=\"cortex-a53\" --target_features=\"+neon-fp-armv8\"'),\n        \"//conditions:default\": str('')\n    }),\n)", "body": "@ruppeshnalwaya1993 This is what I have in our code, inside the `tf_library()` section:\r\n```\r\ntfcompile_flags = select({\r\n        \"//tensorflow:rpi3\": str('--target_triple=\"armv6-linux-gnueabihf\" --target_cpu=\"cortex-a53\" --target_features=\"+neon-fp-armv8\"'),\r\n--target_features=\"+sse4.1\" --target_features=\"+sse4.2\" --target_features=\"+avx\" --target_features=\"+avx2\" --target_features=\"+fma\"',\r\n        \"//conditions:default\": str('')\r\n    }),\r\n```\r\n\r\nSo basically your `BUILD` file would contain:\r\n```\r\n$ cat native_client/BUILD \r\nload(\"//tensorflow/compiler/aot:tfcompile.bzl\",\r\n     \"tf_library\")\r\n\r\ntf_library(\r\n    name = \"project_model\",\r\n    cpp_class = \"class::method\",\r\n    graph = \"model.pb\",\r\n    config = \"tfcompile.config.pbtxt\",\r\n    tfcompile_flags = select({\r\n        \"//tensorflow:rpi3\": str('--target_triple=\"armv6-linux-gnueabihf\" --target_cpu=\"cortex-a53\" --target_features=\"+neon-fp-armv8\"'),\r\n        \"//conditions:default\": str('')\r\n    }),\r\n)\r\n\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/426033997", "html_url": "https://github.com/tensorflow/tensorflow/issues/22619#issuecomment-426033997", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22619", "id": 426033997, "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjAzMzk5Nw==", "user": {"login": "harshini-gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshini-gadige", "html_url": "https://github.com/harshini-gadige", "followers_url": "https://api.github.com/users/harshini-gadige/followers", "following_url": "https://api.github.com/users/harshini-gadige/following{/other_user}", "gists_url": "https://api.github.com/users/harshini-gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshini-gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshini-gadige/subscriptions", "organizations_url": "https://api.github.com/users/harshini-gadige/orgs", "repos_url": "https://api.github.com/users/harshini-gadige/repos", "events_url": "https://api.github.com/users/harshini-gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/harshini-gadige/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-01T19:32:16Z", "updated_at": "2018-10-01T19:32:16Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=3129\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/elliottslaughter\">@elliottslaughter</a> Can you try using intra_op_parallelism_threads=2 when you use 2 cpus. i.e</p>\n<h2>When working on 1 cpu</h2>\n<p>with tf.Session(config=tf.ConfigProto(<br>\ndevice_count={ \"CPU\": n_cpus },<br>\ninter_op_parallelism_threads=n_cpus,<br>\nintra_op_parallelism_threads=1,<br>\n)) as sess:</p>\n<h2>When working on 2 cpus</h2>\n<p>with tf.Session(config=tf.ConfigProto(<br>\ndevice_count={ \"CPU\": n_cpus },<br>\ninter_op_parallelism_threads=n_cpus,<br>\nintra_op_parallelism_threads=2,<br>\n)) as sess:</p>", "body_text": "@elliottslaughter Can you try using intra_op_parallelism_threads=2 when you use 2 cpus. i.e\nWhen working on 1 cpu\nwith tf.Session(config=tf.ConfigProto(\ndevice_count={ \"CPU\": n_cpus },\ninter_op_parallelism_threads=n_cpus,\nintra_op_parallelism_threads=1,\n)) as sess:\nWhen working on 2 cpus\nwith tf.Session(config=tf.ConfigProto(\ndevice_count={ \"CPU\": n_cpus },\ninter_op_parallelism_threads=n_cpus,\nintra_op_parallelism_threads=2,\n)) as sess:", "body": "@elliottslaughter Can you try using intra_op_parallelism_threads=2 when you use 2 cpus. i.e\r\n\r\n## When working on 1 cpu\r\n with tf.Session(config=tf.ConfigProto(\r\n            device_count={ \"CPU\": n_cpus },\r\n            inter_op_parallelism_threads=n_cpus,\r\n            intra_op_parallelism_threads=1,\r\n    )) as sess:\r\n\r\n## When working on 2 cpus\r\n with tf.Session(config=tf.ConfigProto(\r\n            device_count={ \"CPU\": n_cpus },\r\n            inter_op_parallelism_threads=n_cpus,\r\n            intra_op_parallelism_threads=2,\r\n    )) as sess:\r\n"}
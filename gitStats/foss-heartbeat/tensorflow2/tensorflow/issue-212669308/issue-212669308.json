{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8189", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8189/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8189/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8189/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8189", "id": 212669308, "node_id": "MDU6SXNzdWUyMTI2NjkzMDg=", "number": 8189, "title": "tf.image.crop_and_resize not returning proper values of the cropped data", "user": {"login": "SumithRZT", "id": 15686562, "node_id": "MDQ6VXNlcjE1Njg2NTYy", "avatar_url": "https://avatars3.githubusercontent.com/u/15686562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumithRZT", "html_url": "https://github.com/SumithRZT", "followers_url": "https://api.github.com/users/SumithRZT/followers", "following_url": "https://api.github.com/users/SumithRZT/following{/other_user}", "gists_url": "https://api.github.com/users/SumithRZT/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumithRZT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumithRZT/subscriptions", "organizations_url": "https://api.github.com/users/SumithRZT/orgs", "repos_url": "https://api.github.com/users/SumithRZT/repos", "events_url": "https://api.github.com/users/SumithRZT/events{/privacy}", "received_events_url": "https://api.github.com/users/SumithRZT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-03-08T08:30:51Z", "updated_at": "2017-03-10T23:39:26Z", "closed_at": "2017-03-09T19:50:37Z", "author_association": "NONE", "body_html": "<p>I am using <strong>tf.image.crop_and_resize</strong>  to obtain cropped data of image but the function is returning all zeroes instead of pixel values.</p>\n<p>My code is like this</p>\n<pre><code>ori_image = Image.open('/home/sumith/imagepyramids/2.jpg')\nimg_data = np.expand_dims(np.asarray(ori_image).astype(np.float32), axis=0)\nwith tf.Session() as sess:\n   sess.run([tf.global_variables_initializer(), tf.local_variables_initializer()])\n   cropped_list = sess.run(tf.image.crop_and_resize(image=img_data, \n      boxes=[[0, 0, 50, 50]], crop_size=[40, 36],   box_ind[0]))\n   print(np.asarray(ori_image.crop([0, 0, 50, 50]).resize((40, 36)).astype(np.float32))\n   print(cropped_list[0])\n</code></pre>\n<p>the first print statement prints the proper cropped data of image but the second print gives the array in proper shape as given in <strong>crop_size</strong> but array full of zeros.</p>\n<p>the first print statement's output</p>\n<pre><code>[[[  60.   46.   42.]\n  [  60.   46.   40.]\n  [  63.   45.   38.]\n  ..., \n  [  71.   68.   85.]\n  [  73.   71.   86.]\n  [  74.   73.   87.]]\n  ..., \n  [  69.   70.   93.]\n  [  75.   74.   94.]\n  [  78.   74.   93.]]]\n</code></pre>\n<p>the second print statement's output</p>\n<pre><code>[[[ 59.  45.  42.]\n  [  0.   0.   0.]\n  [  0.   0.   0.]\n  ..., \n  [  0.   0.   0.]\n  [  0.   0.   0.]\n  [  0.   0.   0.]]\n ....,\n  [  0.   0.   0.]\n  [  0.   0.   0.]\n  [  0.   0.   0.]]]\n</code></pre>\n<p>It would be of great help if I get answer for this.</p>", "body_text": "I am using tf.image.crop_and_resize  to obtain cropped data of image but the function is returning all zeroes instead of pixel values.\nMy code is like this\nori_image = Image.open('/home/sumith/imagepyramids/2.jpg')\nimg_data = np.expand_dims(np.asarray(ori_image).astype(np.float32), axis=0)\nwith tf.Session() as sess:\n   sess.run([tf.global_variables_initializer(), tf.local_variables_initializer()])\n   cropped_list = sess.run(tf.image.crop_and_resize(image=img_data, \n      boxes=[[0, 0, 50, 50]], crop_size=[40, 36],   box_ind[0]))\n   print(np.asarray(ori_image.crop([0, 0, 50, 50]).resize((40, 36)).astype(np.float32))\n   print(cropped_list[0])\n\nthe first print statement prints the proper cropped data of image but the second print gives the array in proper shape as given in crop_size but array full of zeros.\nthe first print statement's output\n[[[  60.   46.   42.]\n  [  60.   46.   40.]\n  [  63.   45.   38.]\n  ..., \n  [  71.   68.   85.]\n  [  73.   71.   86.]\n  [  74.   73.   87.]]\n  ..., \n  [  69.   70.   93.]\n  [  75.   74.   94.]\n  [  78.   74.   93.]]]\n\nthe second print statement's output\n[[[ 59.  45.  42.]\n  [  0.   0.   0.]\n  [  0.   0.   0.]\n  ..., \n  [  0.   0.   0.]\n  [  0.   0.   0.]\n  [  0.   0.   0.]]\n ....,\n  [  0.   0.   0.]\n  [  0.   0.   0.]\n  [  0.   0.   0.]]]\n\nIt would be of great help if I get answer for this.", "body": "I am using **tf.image.crop_and_resize**  to obtain cropped data of image but the function is returning all zeroes instead of pixel values.\r\n\r\nMy code is like this \r\n```\r\nori_image = Image.open('/home/sumith/imagepyramids/2.jpg')\r\nimg_data = np.expand_dims(np.asarray(ori_image).astype(np.float32), axis=0)\r\nwith tf.Session() as sess:\r\n   sess.run([tf.global_variables_initializer(), tf.local_variables_initializer()])\r\n   cropped_list = sess.run(tf.image.crop_and_resize(image=img_data, \r\n      boxes=[[0, 0, 50, 50]], crop_size=[40, 36],   box_ind[0]))\r\n   print(np.asarray(ori_image.crop([0, 0, 50, 50]).resize((40, 36)).astype(np.float32))\r\n   print(cropped_list[0])\r\n```\r\nthe first print statement prints the proper cropped data of image but the second print gives the array in proper shape as given in **crop_size** but array full of zeros.\r\n\r\nthe first print statement's output\r\n```\r\n[[[  60.   46.   42.]\r\n  [  60.   46.   40.]\r\n  [  63.   45.   38.]\r\n  ..., \r\n  [  71.   68.   85.]\r\n  [  73.   71.   86.]\r\n  [  74.   73.   87.]]\r\n  ..., \r\n  [  69.   70.   93.]\r\n  [  75.   74.   94.]\r\n  [  78.   74.   93.]]]\r\n```\r\n\r\nthe second print statement's output\r\n```\r\n[[[ 59.  45.  42.]\r\n  [  0.   0.   0.]\r\n  [  0.   0.   0.]\r\n  ..., \r\n  [  0.   0.   0.]\r\n  [  0.   0.   0.]\r\n  [  0.   0.   0.]]\r\n ....,\r\n  [  0.   0.   0.]\r\n  [  0.   0.   0.]\r\n  [  0.   0.   0.]]]\r\n```\r\nIt would be of great help if I get answer for this."}
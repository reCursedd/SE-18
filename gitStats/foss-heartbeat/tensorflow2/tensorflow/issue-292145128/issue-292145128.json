{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16502", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16502/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16502/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16502/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/16502", "id": 292145128, "node_id": "MDU6SXNzdWUyOTIxNDUxMjg=", "number": 16502, "title": "Java Android API: No OpKernel was registered to support Op 'ListDiff'", "user": {"login": "andreas-eberle", "id": 9267365, "node_id": "MDQ6VXNlcjkyNjczNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/9267365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-eberle", "html_url": "https://github.com/andreas-eberle", "followers_url": "https://api.github.com/users/andreas-eberle/followers", "following_url": "https://api.github.com/users/andreas-eberle/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-eberle/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-eberle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-eberle/subscriptions", "organizations_url": "https://api.github.com/users/andreas-eberle/orgs", "repos_url": "https://api.github.com/users/andreas-eberle/repos", "events_url": "https://api.github.com/users/andreas-eberle/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-eberle/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-01-27T19:15:48Z", "updated_at": "2018-11-11T21:52:08Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<p>Android with Java API releases 1.4.0 and 1.5.0-rc1 (1.5 is not available yet)</p>\n<h3>What I did</h3>\n<p>I have a graph that is applying a <code>tf.layers.dense</code> on a three dimensional tensor, which is applying a dense operation to the last dimension. Learning and execution on a Windows 10 and Ubuntu work fine.</p>\n<p>Now I froze the model and put it on Android and receive the following error.</p>\n<pre><code>01-27 20:06:59.628 10481-11380/de.test.local W/System.err: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'ListDiff' with these attrs.  Registered devices: [CPU], Registered kernels:\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:   &lt;no registered kernels&gt;\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err: \t [[Node: model/logits/Tensordot/ListDiff = ListDiff[T=DT_INT32, out_idx=DT_INT32](model/logits/Tensordot/range, model/logits/Tensordot/add_1)]]\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.util.concurrent.FutureTask.report(FutureTask.java:94)\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.util.concurrent.FutureTask.get(FutureTask.java:164)\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at de.test.service.TaskWorkerLoop$Loop.run(TaskWorkerLoop.java:71)\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.lang.Thread.run(Thread.java:762)\n01-27 20:06:59.629 10481-11380/de.test.local W/System.err: Caused by: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'ListDiff' with these attrs.  Registered devices: [CPU], Registered kernels:\n01-27 20:06:59.629 10481-11380/de.test.local W/System.err:   &lt;no registered kernels&gt;\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err: \t [[Node: model/logits/Tensordot/ListDiff = ListDiff[T=DT_INT32, out_idx=DT_INT32](model/logits/Tensordot/range, model/logits/Tensordot/add_1)]]\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java.lang.reflect.Constructor.newInstance0(Native Method)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java.lang.reflect.Constructor.newInstance(Constructor.java:430)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:565)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:646)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:704)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:195)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:210)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:459)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:624)\n...\n</code></pre>\n<p>Is there a reason for this kernel to be missing on Android? If not, can you please add it? And what could I do in the mean time to replace the dense layer?</p>\n<p>Many thanks in advance!</p>", "body_text": "System information\nAndroid with Java API releases 1.4.0 and 1.5.0-rc1 (1.5 is not available yet)\nWhat I did\nI have a graph that is applying a tf.layers.dense on a three dimensional tensor, which is applying a dense operation to the last dimension. Learning and execution on a Windows 10 and Ubuntu work fine.\nNow I froze the model and put it on Android and receive the following error.\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'ListDiff' with these attrs.  Registered devices: [CPU], Registered kernels:\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:   <no registered kernels>\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err: \t [[Node: model/logits/Tensordot/ListDiff = ListDiff[T=DT_INT32, out_idx=DT_INT32](model/logits/Tensordot/range, model/logits/Tensordot/add_1)]]\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.util.concurrent.FutureTask.report(FutureTask.java:94)\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.util.concurrent.FutureTask.get(FutureTask.java:164)\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at de.test.service.TaskWorkerLoop$Loop.run(TaskWorkerLoop.java:71)\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.lang.Thread.run(Thread.java:762)\n01-27 20:06:59.629 10481-11380/de.test.local W/System.err: Caused by: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'ListDiff' with these attrs.  Registered devices: [CPU], Registered kernels:\n01-27 20:06:59.629 10481-11380/de.test.local W/System.err:   <no registered kernels>\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err: \t [[Node: model/logits/Tensordot/ListDiff = ListDiff[T=DT_INT32, out_idx=DT_INT32](model/logits/Tensordot/range, model/logits/Tensordot/add_1)]]\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java.lang.reflect.Constructor.newInstance0(Native Method)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java.lang.reflect.Constructor.newInstance(Constructor.java:430)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:565)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:646)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:704)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:195)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:210)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:459)\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:624)\n...\n\nIs there a reason for this kernel to be missing on Android? If not, can you please add it? And what could I do in the mean time to replace the dense layer?\nMany thanks in advance!", "body": "### System information\r\nAndroid with Java API releases 1.4.0 and 1.5.0-rc1 (1.5 is not available yet)\r\n\r\n### What I did\r\nI have a graph that is applying a `tf.layers.dense` on a three dimensional tensor, which is applying a dense operation to the last dimension. Learning and execution on a Windows 10 and Ubuntu work fine.\r\n\r\nNow I froze the model and put it on Android and receive the following error.\r\n\r\n```\r\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'ListDiff' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:   <no registered kernels>\r\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err: \t [[Node: model/logits/Tensordot/ListDiff = ListDiff[T=DT_INT32, out_idx=DT_INT32](model/logits/Tensordot/range, model/logits/Tensordot/add_1)]]\r\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.util.concurrent.FutureTask.report(FutureTask.java:94)\r\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.util.concurrent.FutureTask.get(FutureTask.java:164)\r\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at de.test.service.TaskWorkerLoop$Loop.run(TaskWorkerLoop.java:71)\r\n01-27 20:06:59.628 10481-11380/de.test.local W/System.err:     at java.lang.Thread.run(Thread.java:762)\r\n01-27 20:06:59.629 10481-11380/de.test.local W/System.err: Caused by: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'ListDiff' with these attrs.  Registered devices: [CPU], Registered kernels:\r\n01-27 20:06:59.629 10481-11380/de.test.local W/System.err:   <no registered kernels>\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err: \t [[Node: model/logits/Tensordot/ListDiff = ListDiff[T=DT_INT32, out_idx=DT_INT32](model/logits/Tensordot/range, model/logits/Tensordot/add_1)]]\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java.lang.reflect.Constructor.newInstance0(Native Method)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java.lang.reflect.Constructor.newInstance(Constructor.java:430)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:565)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:646)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:704)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:195)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:210)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:459)\r\n01-27 20:06:59.630 10481-11380/de.test.local W/System.err:     at java8.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:624)\r\n...\r\n```\r\n\r\nIs there a reason for this kernel to be missing on Android? If not, can you please add it? And what could I do in the mean time to replace the dense layer?\r\n\r\nMany thanks in advance!"}
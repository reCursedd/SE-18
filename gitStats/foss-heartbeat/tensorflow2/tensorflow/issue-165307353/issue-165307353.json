{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3291", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3291/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3291/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3291/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3291", "id": 165307353, "node_id": "MDU6SXNzdWUxNjUzMDczNTM=", "number": 3291, "title": "How to create an op like conv_ops in tensorflow?", "user": {"login": "wishforgood", "id": 9963412, "node_id": "MDQ6VXNlcjk5NjM0MTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/9963412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wishforgood", "html_url": "https://github.com/wishforgood", "followers_url": "https://api.github.com/users/wishforgood/followers", "following_url": "https://api.github.com/users/wishforgood/following{/other_user}", "gists_url": "https://api.github.com/users/wishforgood/gists{/gist_id}", "starred_url": "https://api.github.com/users/wishforgood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wishforgood/subscriptions", "organizations_url": "https://api.github.com/users/wishforgood/orgs", "repos_url": "https://api.github.com/users/wishforgood/repos", "events_url": "https://api.github.com/users/wishforgood/events{/privacy}", "received_events_url": "https://api.github.com/users/wishforgood/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-13T12:22:46Z", "updated_at": "2016-07-13T18:26:18Z", "closed_at": "2016-07-13T18:26:18Z", "author_association": "NONE", "body_html": "<p>Notice that I'm not looking for a tutorial like <a href=\"https://github.com/jikexueyuanwiki/tensorflow-zh/blob/master/SOURCE/how_tos/adding_an_op/index.md\">this</a>.<br>\n<strong>What I'm trying to do</strong></p>\n<p>I'm new to C++ and bazel and I want to make some change on the convolution operation in tensorflow, so I decide that my first step is to create an ops just like it.</p>\n<p><strong>What I have done</strong></p>\n<p>I copied conv_ops.cc from //tensorflow/core/kernels and change the name of the ops registrated in my new_conv_ops.cc. I also changed some name of the functions in the file to avoid duplication. And here is my BUILD file.<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/9963412/16803076/c495f610-4936-11e6-9e28-9aa27dd55e4d.png\"><img src=\"https://cloud.githubusercontent.com/assets/9963412/16803076/c495f610-4936-11e6-9e28-9aa27dd55e4d.png\" alt=\"qq 20160713201655\" style=\"max-width:100%;\"></a></p>\n<p>As you can see, I copy the deps attributes of conv_ops from //tensorflow/core/kernels/BUILD. Then I use \"bazel build -c opt //tensorflow/core/user_ops:new_conv_ops.so\" to build the new op.</p>\n<p><strong>What my problem is</strong></p>\n<p>Then I got this error.<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://cloud.githubusercontent.com/assets/9963412/16803048/9b960250-4936-11e6-90ab-7e7cd3b81b96.png\"><img src=\"https://cloud.githubusercontent.com/assets/9963412/16803048/9b960250-4936-11e6-90ab-7e7cd3b81b96.png\" alt=\"\" style=\"max-width:100%;\"></a></p>\n<p>I tried to delete bounds_check and got same error for the next deps. Then I realize that there is some problem for including h files in //tensorflow/core/kernels from //tensorflow/core/user_ops. So how can I perfectely create a new op excatcly like conv_ops?</p>\n<hr>", "body_text": "Notice that I'm not looking for a tutorial like this.\nWhat I'm trying to do\nI'm new to C++ and bazel and I want to make some change on the convolution operation in tensorflow, so I decide that my first step is to create an ops just like it.\nWhat I have done\nI copied conv_ops.cc from //tensorflow/core/kernels and change the name of the ops registrated in my new_conv_ops.cc. I also changed some name of the functions in the file to avoid duplication. And here is my BUILD file.\n\nAs you can see, I copy the deps attributes of conv_ops from //tensorflow/core/kernels/BUILD. Then I use \"bazel build -c opt //tensorflow/core/user_ops:new_conv_ops.so\" to build the new op.\nWhat my problem is\nThen I got this error.\n\nI tried to delete bounds_check and got same error for the next deps. Then I realize that there is some problem for including h files in //tensorflow/core/kernels from //tensorflow/core/user_ops. So how can I perfectely create a new op excatcly like conv_ops?", "body": "Notice that I'm not looking for a tutorial like [this](https://github.com/jikexueyuanwiki/tensorflow-zh/blob/master/SOURCE/how_tos/adding_an_op/index.md).\n**What I'm trying to do**\n\nI'm new to C++ and bazel and I want to make some change on the convolution operation in tensorflow, so I decide that my first step is to create an ops just like it.\n\n**What I have done**\n\nI copied conv_ops.cc from //tensorflow/core/kernels and change the name of the ops registrated in my new_conv_ops.cc. I also changed some name of the functions in the file to avoid duplication. And here is my BUILD file. \n![qq 20160713201655](https://cloud.githubusercontent.com/assets/9963412/16803076/c495f610-4936-11e6-9e28-9aa27dd55e4d.png)\n\nAs you can see, I copy the deps attributes of conv_ops from //tensorflow/core/kernels/BUILD. Then I use \"bazel build -c opt //tensorflow/core/user_ops:new_conv_ops.so\" to build the new op.\n\n**What my problem is**\n\nThen I got this error.\n![](https://cloud.githubusercontent.com/assets/9963412/16803048/9b960250-4936-11e6-90ab-7e7cd3b81b96.png)\n\nI tried to delete bounds_check and got same error for the next deps. Then I realize that there is some problem for including h files in //tensorflow/core/kernels from //tensorflow/core/user_ops. So how can I perfectely create a new op excatcly like conv_ops?\n\n---\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1389", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1389/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1389/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1389/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/1389", "id": 138653048, "node_id": "MDU6SXNzdWUxMzg2NTMwNDg=", "number": 1389, "title": "Tensorflow tutorial \"How to Retrain\": error when saving the model", "user": {"login": "mostafachatillon", "id": 8183572, "node_id": "MDQ6VXNlcjgxODM1NzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/8183572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mostafachatillon", "html_url": "https://github.com/mostafachatillon", "followers_url": "https://api.github.com/users/mostafachatillon/followers", "following_url": "https://api.github.com/users/mostafachatillon/following{/other_user}", "gists_url": "https://api.github.com/users/mostafachatillon/gists{/gist_id}", "starred_url": "https://api.github.com/users/mostafachatillon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mostafachatillon/subscriptions", "organizations_url": "https://api.github.com/users/mostafachatillon/orgs", "repos_url": "https://api.github.com/users/mostafachatillon/repos", "events_url": "https://api.github.com/users/mostafachatillon/events{/privacy}", "received_events_url": "https://api.github.com/users/mostafachatillon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-03-05T06:29:53Z", "updated_at": "2016-03-16T08:39:37Z", "closed_at": "2016-03-07T23:07:51Z", "author_association": "NONE", "body_html": "<p>For bugs/issues, please fill in the following.  The more information you<br>\nprovide, the more likely we can help you.</p>\n<p>hello,<br>\nI am trying to run the tutorial 'How to Retrain Inception's Final Layer for New Categories'<br>\navailable here: <a href=\"https://www.tensorflow.org/versions/master/how_tos/image_retraining/index.html\" rel=\"nofollow\">https://www.tensorflow.org/versions/master/how_tos/image_retraining/index.html</a></p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04</p>\n<p>If installed from binary pip package, provide:</p>\n<ol>\n<li>Which pip package you installed: I use the following AWS community AMI:<br>\nAxel TensorFlow machine - ami-a41147ce   in Northern Virginia region.</li>\n<li>The output from python -c \"import tensorflow; print(tensorflow.<strong>version</strong>)\":</li>\n</ol>\n<p>I tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcublas.so.7.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcudnn.so.6.5 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcufft.so.7.0 locally<br>\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcuda.so locally<br>\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcurand.so.7.0 locally<br>\n0.5.0</p>\n<p>If installed from sources, provide the commit hash:</p>\n<h3>Steps to reproduce</h3>\n<p>step 1. download and unpack images: curl -O <a href=\"http://download.tensorflow.org/example_images/flower_photos.tgz\" rel=\"nofollow\">http://download.tensorflow.org/example_images/flower_photos.tgz</a><br>\ntar xzf flower_photos.tgz</p>\n<p>step 2. run:    python retrain.py --image_dir ~/flower_photos</p>\n<h3>What have you tried?</h3>\n<ol>\n<li>nothing: I do not know what to do</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment).</p>\n<p>the only difference with the tutorial is that I do not use Bazel, I just do:</p>\n<p>python retrain.py --image_dir ~/flower_photos</p>\n<p>Everything runs smoothly, until I get this error:</p>\n<p>Final test accuracy = 91.6%<br>\nTraceback (most recent call last):<br>\nFile \"retrain.py\", line 829, in <br>\ntf.app.run()<br>\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run<br>\nsys.exit(main(sys.argv))<br>\nFile \"retrain.py\", line 820, in main<br>\noutput_graph_def = graph_util.convert_variables_to_constants(<br>\nAttributeError: 'module' object has no attribute 'convert_variables_to_constants'</p>\n<p>The problematic portion of the code is:</p>\n<h1>Write out the trained graph and labels with the weights stored as constants.</h1>\n<p>output_graph_def = graph_util.convert_variables_to_constants(<br>\nsess, graph.as_graph_def(), [FLAGS.final_tensor_name])<br>\nwith gfile.FastGFile(FLAGS.output_graph, 'wb') as f:<br>\nf.write(output_graph_def.SerializeToString())<br>\nwith gfile.FastGFile(FLAGS.output_labels, 'w') as f:<br>\nf.write('\\n'.join(image_lists.keys()) + '\\n')</p>\n<p>What should I do?</p>", "body_text": "For bugs/issues, please fill in the following.  The more information you\nprovide, the more likely we can help you.\nhello,\nI am trying to run the tutorial 'How to Retrain Inception's Final Layer for New Categories'\navailable here: https://www.tensorflow.org/versions/master/how_tos/image_retraining/index.html\nEnvironment info\nOperating System: Ubuntu 14.04\nIf installed from binary pip package, provide:\n\nWhich pip package you installed: I use the following AWS community AMI:\nAxel TensorFlow machine - ami-a41147ce   in Northern Virginia region.\nThe output from python -c \"import tensorflow; print(tensorflow.version)\":\n\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcublas.so.7.0 locally\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcudnn.so.6.5 locally\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcufft.so.7.0 locally\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcurand.so.7.0 locally\n0.5.0\nIf installed from sources, provide the commit hash:\nSteps to reproduce\nstep 1. download and unpack images: curl -O http://download.tensorflow.org/example_images/flower_photos.tgz\ntar xzf flower_photos.tgz\nstep 2. run:    python retrain.py --image_dir ~/flower_photos\nWhat have you tried?\n\nnothing: I do not know what to do\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment).\nthe only difference with the tutorial is that I do not use Bazel, I just do:\npython retrain.py --image_dir ~/flower_photos\nEverything runs smoothly, until I get this error:\nFinal test accuracy = 91.6%\nTraceback (most recent call last):\nFile \"retrain.py\", line 829, in \ntf.app.run()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"retrain.py\", line 820, in main\noutput_graph_def = graph_util.convert_variables_to_constants(\nAttributeError: 'module' object has no attribute 'convert_variables_to_constants'\nThe problematic portion of the code is:\nWrite out the trained graph and labels with the weights stored as constants.\noutput_graph_def = graph_util.convert_variables_to_constants(\nsess, graph.as_graph_def(), [FLAGS.final_tensor_name])\nwith gfile.FastGFile(FLAGS.output_graph, 'wb') as f:\nf.write(output_graph_def.SerializeToString())\nwith gfile.FastGFile(FLAGS.output_labels, 'w') as f:\nf.write('\\n'.join(image_lists.keys()) + '\\n')\nWhat should I do?", "body": "For bugs/issues, please fill in the following.  The more information you\nprovide, the more likely we can help you.\n\nhello,\nI am trying to run the tutorial 'How to Retrain Inception's Final Layer for New Categories'\navailable here: https://www.tensorflow.org/versions/master/how_tos/image_retraining/index.html\n### Environment info\n\nOperating System: Ubuntu 14.04\n\nIf installed from binary pip package, provide:\n1. Which pip package you installed: I use the following AWS community AMI: \n   Axel TensorFlow machine - ami-a41147ce   in Northern Virginia region.\n2. The output from python -c \"import tensorflow; print(tensorflow.**version**)\":\n\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcublas.so.7.0 locally\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcudnn.so.6.5 locally\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcufft.so.7.0 locally\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcuda.so locally\nI tensorflow/stream_executor/dso_loader.cc:101] successfully opened CUDA library libcurand.so.7.0 locally\n0.5.0\n\nIf installed from sources, provide the commit hash:\n### Steps to reproduce\n\nstep 1. download and unpack images: curl -O http://download.tensorflow.org/example_images/flower_photos.tgz\ntar xzf flower_photos.tgz\n\nstep 2. run:    python retrain.py --image_dir ~/flower_photos\n### What have you tried?\n1. nothing: I do not know what to do\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment).\n\nthe only difference with the tutorial is that I do not use Bazel, I just do: \n\npython retrain.py --image_dir ~/flower_photos\n\nEverything runs smoothly, until I get this error:\n\nFinal test accuracy = 91.6%\nTraceback (most recent call last):\nFile \"retrain.py\", line 829, in <module>\ntf.app.run()\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/default/_app.py\", line 30, in run\nsys.exit(main(sys.argv))\nFile \"retrain.py\", line 820, in main\noutput_graph_def = graph_util.convert_variables_to_constants(\nAttributeError: 'module' object has no attribute 'convert_variables_to_constants'\n\nThe problematic portion of the code is:\n\n  # Write out the trained graph and labels with the weights stored as constants.\n  output_graph_def = graph_util.convert_variables_to_constants(\n      sess, graph.as_graph_def(), [FLAGS.final_tensor_name])\n  with gfile.FastGFile(FLAGS.output_graph, 'wb') as f:\n    f.write(output_graph_def.SerializeToString())\n  with gfile.FastGFile(FLAGS.output_labels, 'w') as f:\n    f.write('\\n'.join(image_lists.keys()) + '\\n')\n\nWhat should I do?\n"}
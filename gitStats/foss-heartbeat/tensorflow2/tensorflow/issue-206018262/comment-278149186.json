{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/278149186", "html_url": "https://github.com/tensorflow/tensorflow/issues/7341#issuecomment-278149186", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/7341", "id": 278149186, "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODE0OTE4Ng==", "user": {"login": "phaniparsa", "id": 15152056, "node_id": "MDQ6VXNlcjE1MTUyMDU2", "avatar_url": "https://avatars2.githubusercontent.com/u/15152056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phaniparsa", "html_url": "https://github.com/phaniparsa", "followers_url": "https://api.github.com/users/phaniparsa/followers", "following_url": "https://api.github.com/users/phaniparsa/following{/other_user}", "gists_url": "https://api.github.com/users/phaniparsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/phaniparsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phaniparsa/subscriptions", "organizations_url": "https://api.github.com/users/phaniparsa/orgs", "repos_url": "https://api.github.com/users/phaniparsa/repos", "events_url": "https://api.github.com/users/phaniparsa/events{/privacy}", "received_events_url": "https://api.github.com/users/phaniparsa/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-07T21:40:30Z", "updated_at": "2017-02-07T21:40:30Z", "author_association": "NONE", "body_html": "<p>Tensorflow version: 0.12.1<br>\nCode:<br>\nIRIS_TRAINING = \"C:/Stocks/tensorflow/tf_trainData.csv\"<br>\nIRIS_TEST = \"C:/Stocks/tensorflow/tf_testData.csv\"</p>\n<h1>Load datasets.</h1>\n<p>training_set = tf.contrib.learn.datasets.base.load_csv_with_header(<br>\nfilename=IRIS_TRAINING,<br>\ntarget_dtype=np.int,<br>\nfeatures_dtype=np.float32)<br>\ntest_set = tf.contrib.learn.datasets.base.load_csv_with_header(<br>\nfilename=IRIS_TEST,<br>\ntarget_dtype=np.int,<br>\nfeatures_dtype=np.float32)</p>\n<h1>Specify that all features have real-value data</h1>\n<p>feature_columns = [tf.contrib.layers.real_valued_column(\"\", dimension=4)]</p>\n<h1>Build 3 layer DNN with 10, 20, 10 units respectively.</h1>\n<p>classifier = tf.contrib.learn.DNNClassifier(feature_columns=feature_columns,<br>\nhidden_units=[10, 20, 10],<br>\nn_classes=5,<br>\nmodel_dir=\"/tmp/iris_model\")</p>\n<h1>Fit model.</h1>\n<p>classifier.fit(x=training_set.data,<br>\ny=training_set.target,<br>\nsteps=2000)</p>\n<h1>Evaluate accuracy.</h1>\n<p>accuracy_score = classifier.evaluate(x=test_set.data,<br>\ny=test_set.target)[\"accuracy\"]<br>\nprint('Accuracy: {0:f}'.format(accuracy_score))</p>\n<p>#Error Message;<br>\nINFO:tensorflow:Create CheckpointSaverHook.<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Shape in shape_and_slice spec does not match the shape in the save file: [10,5], save file shape: [10,3]<br>\n[[Node: save/RestoreV2_16 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_16/tensor_names, save/RestoreV2_16/shape_and_slices)]]</p>\n<p>Caused by op 'save/RestoreV2_16', defined at:<br>\nFile \"\", line 1, in <br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 866, in runfile<br>\nexecfile(filename, namespace)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile<br>\nexec(compile(f.read(), filename, 'exec'), namespace)<br>\nFile \"C:/Stocks/tensorflow/stock_Classification.py\", line 94, in <br>\nsteps=2000)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dnn.py\", line 315, in fit<br>\nmax_steps=max_steps)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 191, in new_func<br>\nreturn func(*args, **kwargs)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 355, in fit<br>\nmax_steps=max_steps)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 733, in _train_model<br>\nmax_steps=max_steps)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\graph_actions.py\", line 297, in _monitored_train<br>\nhooks=all_hooks) as super_sess:<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 447, in <strong>init</strong><br>\nself._sess = _RecoverableSession(self._coordinated_creator)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 618, in <strong>init</strong><br>\n_WrappedSession.<strong>init</strong>(self, self._sess_creator.create_session())<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 505, in create_session<br>\nself.tf_sess = self._session_creator.create_session()<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 333, in create_session<br>\nself._scaffold.finalize()<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 163, in finalize<br>\nself._saver.build()<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1030, in build<br>\nrestore_sequentially=self._restore_sequentially)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 620, in build<br>\nrestore_sequentially, reshape)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 404, in _AddShardedRestoreOps<br>\nname=\"restore_shard\"))<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 361, in _AddRestoreOps<br>\ntensors = self.restore_op(filename_tensor, saveable, preferred_shard)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 200, in restore_op<br>\n[spec.tensor.dtype])[0])<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_io_ops.py\", line 441, in restore_v2<br>\ndtypes=dtypes, name=name)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 759, in apply_op<br>\nop_def=op_def)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2240, in create_op<br>\noriginal_op=self._default_original_op, op_def=op_def)<br>\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1128, in <strong>init</strong><br>\nself._traceback = _extract_stack()</p>", "body_text": "Tensorflow version: 0.12.1\nCode:\nIRIS_TRAINING = \"C:/Stocks/tensorflow/tf_trainData.csv\"\nIRIS_TEST = \"C:/Stocks/tensorflow/tf_testData.csv\"\nLoad datasets.\ntraining_set = tf.contrib.learn.datasets.base.load_csv_with_header(\nfilename=IRIS_TRAINING,\ntarget_dtype=np.int,\nfeatures_dtype=np.float32)\ntest_set = tf.contrib.learn.datasets.base.load_csv_with_header(\nfilename=IRIS_TEST,\ntarget_dtype=np.int,\nfeatures_dtype=np.float32)\nSpecify that all features have real-value data\nfeature_columns = [tf.contrib.layers.real_valued_column(\"\", dimension=4)]\nBuild 3 layer DNN with 10, 20, 10 units respectively.\nclassifier = tf.contrib.learn.DNNClassifier(feature_columns=feature_columns,\nhidden_units=[10, 20, 10],\nn_classes=5,\nmodel_dir=\"/tmp/iris_model\")\nFit model.\nclassifier.fit(x=training_set.data,\ny=training_set.target,\nsteps=2000)\nEvaluate accuracy.\naccuracy_score = classifier.evaluate(x=test_set.data,\ny=test_set.target)[\"accuracy\"]\nprint('Accuracy: {0:f}'.format(accuracy_score))\n#Error Message;\nINFO:tensorflow:Create CheckpointSaverHook.\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Shape in shape_and_slice spec does not match the shape in the save file: [10,5], save file shape: [10,3]\n[[Node: save/RestoreV2_16 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_16/tensor_names, save/RestoreV2_16/shape_and_slices)]]\nCaused by op 'save/RestoreV2_16', defined at:\nFile \"\", line 1, in \nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 866, in runfile\nexecfile(filename, namespace)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\nexec(compile(f.read(), filename, 'exec'), namespace)\nFile \"C:/Stocks/tensorflow/stock_Classification.py\", line 94, in \nsteps=2000)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dnn.py\", line 315, in fit\nmax_steps=max_steps)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 191, in new_func\nreturn func(*args, **kwargs)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 355, in fit\nmax_steps=max_steps)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 733, in _train_model\nmax_steps=max_steps)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\graph_actions.py\", line 297, in _monitored_train\nhooks=all_hooks) as super_sess:\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 447, in init\nself._sess = _RecoverableSession(self._coordinated_creator)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 618, in init\n_WrappedSession.init(self, self._sess_creator.create_session())\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 505, in create_session\nself.tf_sess = self._session_creator.create_session()\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 333, in create_session\nself._scaffold.finalize()\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 163, in finalize\nself._saver.build()\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1030, in build\nrestore_sequentially=self._restore_sequentially)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 620, in build\nrestore_sequentially, reshape)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 404, in _AddShardedRestoreOps\nname=\"restore_shard\"))\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 361, in _AddRestoreOps\ntensors = self.restore_op(filename_tensor, saveable, preferred_shard)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 200, in restore_op\n[spec.tensor.dtype])[0])\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_io_ops.py\", line 441, in restore_v2\ndtypes=dtypes, name=name)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 759, in apply_op\nop_def=op_def)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2240, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1128, in init\nself._traceback = _extract_stack()", "body": "Tensorflow version: 0.12.1\r\nCode:\r\nIRIS_TRAINING = \"C:/Stocks/tensorflow/tf_trainData.csv\"\r\nIRIS_TEST = \"C:/Stocks/tensorflow/tf_testData.csv\"\r\n\r\n# Load datasets.\r\ntraining_set = tf.contrib.learn.datasets.base.load_csv_with_header(\r\n    filename=IRIS_TRAINING,\r\n    target_dtype=np.int,\r\n    features_dtype=np.float32)\r\ntest_set = tf.contrib.learn.datasets.base.load_csv_with_header(\r\n    filename=IRIS_TEST,\r\n    target_dtype=np.int,\r\n    features_dtype=np.float32)\r\n\r\n# Specify that all features have real-value data\r\nfeature_columns = [tf.contrib.layers.real_valued_column(\"\", dimension=4)]\r\n\r\n# Build 3 layer DNN with 10, 20, 10 units respectively.\r\nclassifier = tf.contrib.learn.DNNClassifier(feature_columns=feature_columns,\r\n                                            hidden_units=[10, 20, 10],\r\n                                            n_classes=5,\r\n                                            model_dir=\"/tmp/iris_model\")\r\n\r\n# Fit model.\r\nclassifier.fit(x=training_set.data,\r\n               y=training_set.target,\r\n               steps=2000)\r\n\r\n# Evaluate accuracy.\r\naccuracy_score = classifier.evaluate(x=test_set.data,\r\n                                     y=test_set.target)[\"accuracy\"]\r\nprint('Accuracy: {0:f}'.format(accuracy_score))\r\n\r\n\r\n\r\n\r\n\r\n#Error Message;\r\nINFO:tensorflow:Create CheckpointSaverHook.\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Shape in shape_and_slice spec does not match the shape in the save file: [10,5], save file shape: [10,3]\r\n\t [[Node: save/RestoreV2_16 = RestoreV2[dtypes=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/cpu:0\"](_recv_save/Const_0, save/RestoreV2_16/tensor_names, save/RestoreV2_16/shape_and_slices)]]\r\n\r\nCaused by op 'save/RestoreV2_16', defined at:\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 866, in runfile\r\n    execfile(filename, namespace)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 102, in execfile\r\n    exec(compile(f.read(), filename, 'exec'), namespace)\r\n  File \"C:/Stocks/tensorflow/stock_Classification.py\", line 94, in <module>\r\n    steps=2000)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dnn.py\", line 315, in fit\r\n    max_steps=max_steps)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 191, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 355, in fit\r\n    max_steps=max_steps)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 733, in _train_model\r\n    max_steps=max_steps)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\graph_actions.py\", line 297, in _monitored_train\r\n    hooks=all_hooks) as super_sess:\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 447, in __init__\r\n    self._sess = _RecoverableSession(self._coordinated_creator)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 618, in __init__\r\n    _WrappedSession.__init__(self, self._sess_creator.create_session())\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 505, in create_session\r\n    self.tf_sess = self._session_creator.create_session()\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 333, in create_session\r\n    self._scaffold.finalize()\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\monitored_session.py\", line 163, in finalize\r\n    self._saver.build()\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 1030, in build\r\n    restore_sequentially=self._restore_sequentially)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 620, in build\r\n    restore_sequentially, reshape)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 404, in _AddShardedRestoreOps\r\n    name=\"restore_shard\"))\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 361, in _AddRestoreOps\r\n    tensors = self.restore_op(filename_tensor, saveable, preferred_shard)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\training\\saver.py\", line 200, in restore_op\r\n    [spec.tensor.dtype])[0])\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_io_ops.py\", line 441, in restore_v2\r\n    dtypes=dtypes, name=name)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 759, in apply_op\r\n    op_def=op_def)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2240, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"C:\\Users\\useradmin\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1128, in __init__\r\n    self._traceback = _extract_stack()\r\n"}
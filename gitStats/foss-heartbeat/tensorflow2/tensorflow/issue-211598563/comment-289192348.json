{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/289192348", "html_url": "https://github.com/tensorflow/tensorflow/issues/8043#issuecomment-289192348", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8043", "id": 289192348, "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTE5MjM0OA==", "user": {"login": "afhuertass", "id": 16570373, "node_id": "MDQ6VXNlcjE2NTcwMzcz", "avatar_url": "https://avatars0.githubusercontent.com/u/16570373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afhuertass", "html_url": "https://github.com/afhuertass", "followers_url": "https://api.github.com/users/afhuertass/followers", "following_url": "https://api.github.com/users/afhuertass/following{/other_user}", "gists_url": "https://api.github.com/users/afhuertass/gists{/gist_id}", "starred_url": "https://api.github.com/users/afhuertass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afhuertass/subscriptions", "organizations_url": "https://api.github.com/users/afhuertass/orgs", "repos_url": "https://api.github.com/users/afhuertass/repos", "events_url": "https://api.github.com/users/afhuertass/events{/privacy}", "received_events_url": "https://api.github.com/users/afhuertass/received_events", "type": "User", "site_admin": false}, "created_at": "2017-03-25T06:23:31Z", "updated_at": "2017-03-25T06:37:28Z", "author_association": "NONE", "body_html": "<p>Hi ! <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19861701\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/honkentuber\">@honkentuber</a>  <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=19293677\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ispirmustafa\">@ispirmustafa</a>   ( i don' mean to bother tagging you.. )</p>\n<p>i'm having the same issue. but changing the shape of the label tensor didn't work . i define my metrics as:</p>\n<pre><code>METRICS = {\n    'loss' : metric_spec.MetricSpec (\n        metric_fn = metric_ops.streaming_mean , \n        prediction_key = 'loss' ,\n        weight_key = None ,\n        label_key = None \n    )\n}\n</code></pre>\n<p>loss is a tensor holding my loss function</p>\n<p>and pass it to the eval_metrics argument, creating a Experiment object. but i i run it i get the same error,<br>\n<strong>ValueError: weights can not be broadcast to values. values.rank=0. weights.rank=2</strong></p>\n<p>i'm using a batch size of 2 ( for debuging ) . But i find it really weird because i specify <strong>weight_key = None</strong>, and by checking the code, it says that in that case the weights arre just 1.  Some how a \"weights\" parameter is reaching streaming_mean , even if i said that i dont want it to be weigthed.<br>\nThe output of my  <strong>input_fn</strong> is a list   [ images , labels   ]</p>\n<p>So.. what i'm doing wrong?<br>\nThanks  in advance :)</p>", "body_text": "Hi ! @honkentuber  @ispirmustafa   ( i don' mean to bother tagging you.. )\ni'm having the same issue. but changing the shape of the label tensor didn't work . i define my metrics as:\nMETRICS = {\n    'loss' : metric_spec.MetricSpec (\n        metric_fn = metric_ops.streaming_mean , \n        prediction_key = 'loss' ,\n        weight_key = None ,\n        label_key = None \n    )\n}\n\nloss is a tensor holding my loss function\nand pass it to the eval_metrics argument, creating a Experiment object. but i i run it i get the same error,\nValueError: weights can not be broadcast to values. values.rank=0. weights.rank=2\ni'm using a batch size of 2 ( for debuging ) . But i find it really weird because i specify weight_key = None, and by checking the code, it says that in that case the weights arre just 1.  Some how a \"weights\" parameter is reaching streaming_mean , even if i said that i dont want it to be weigthed.\nThe output of my  input_fn is a list   [ images , labels   ]\nSo.. what i'm doing wrong?\nThanks  in advance :)", "body": "Hi ! @honkentuber  @ispirmustafa   ( i don' mean to bother tagging you.. ) \r\n\r\ni'm having the same issue. but changing the shape of the label tensor didn't work . i define my metrics as:\r\n```\r\nMETRICS = {\r\n    'loss' : metric_spec.MetricSpec (\r\n        metric_fn = metric_ops.streaming_mean , \r\n        prediction_key = 'loss' ,\r\n        weight_key = None ,\r\n        label_key = None \r\n    )\r\n}\r\n```\r\nloss is a tensor holding my loss function \r\n\r\nand pass it to the eval_metrics argument, creating a Experiment object. but i i run it i get the same error, \r\n**ValueError: weights can not be broadcast to values. values.rank=0. weights.rank=2**\r\n\r\ni'm using a batch size of 2 ( for debuging ) . But i find it really weird because i specify **weight_key = None**, and by checking the code, it says that in that case the weights arre just 1.  Some how a \"weights\" parameter is reaching streaming_mean , even if i said that i dont want it to be weigthed. \r\nThe output of my  **input_fn** is a list   [ images , labels   ]\r\n\r\nSo.. what i'm doing wrong? \r\nThanks  in advance :) "}
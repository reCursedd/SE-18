{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17569", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17569/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17569/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17569/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17569", "id": 303620318, "node_id": "MDU6SXNzdWUzMDM2MjAzMTg=", "number": 17569, "title": "Problem w/ leaky_relu", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angersson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angersson", "html_url": "https://github.com/angersson", "followers_url": "https://api.github.com/users/angersson/followers", "following_url": "https://api.github.com/users/angersson/following{/other_user}", "gists_url": "https://api.github.com/users/angersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angersson/subscriptions", "organizations_url": "https://api.github.com/users/angersson/orgs", "repos_url": "https://api.github.com/users/angersson/repos", "events_url": "https://api.github.com/users/angersson/events{/privacy}", "received_events_url": "https://api.github.com/users/angersson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-03-08T20:28:11Z", "updated_at": "2018-03-09T18:09:25Z", "closed_at": "2018-03-09T18:09:25Z", "author_association": "NONE", "body_html": "<h3>Describe the problem</h3>\n<p>Having problems using <code>tf.nn.leaky_relu</code>.  Attempted to deal with the problem by trying out <code>tf.nn.elu</code> and <code>tf.nn.relu</code>, but both functions resulted in a fairly significant drop in accuracy.  I was originally building the model in Keras, but switched to TensorFlow after having a problem with the corresponding leaky_relu function in Keras.  The TensorFlow and Keras source code and error logs are below.  Thank you in advance!</p>\n<h3>Source code / logs</h3>\n<p>TensorFlow Source Code</p>\n<pre><code>def conv2d_w_leakyrelu(x, W, b, s = 1, name = \"conlayer_i\"): \n    x = tf.nn.conv2d(input = x, filter = W, strides = [1, s, s, 1], data_format = \"NHWC\", padding = \"SAME\", name = name)\n    x = tf.nn.bias_add(value = x, bias = b)\n    # return tf.nn.elu(features = x) # TENSORFLOW PROBLEMS WITH LEAKY_RELU, SO USING ELU ACTIVATION FOR NOW\n    return tf.nn.leaky_relu(features = x, alpha = lr_alpha)\n</code></pre>\n<p>Keras Source Code</p>\n<pre><code>model.add(Conv2D(32, kernel_size = (im_h, im_w), strides = (s, s), padding = \"same\", kernel_initializer = KI, input_shape = input_shape))\n    model.add(LeakyReLU(alpha = leakiness))\n</code></pre>\n<p>Below is the TensorFlow error message<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/10000384/37174004-489b7656-22e3-11e8-9118-060eba773965.png\"><img width=\"962\" alt=\"screen shot 2018-03-08 at 3 13 12 pm\" src=\"https://user-images.githubusercontent.com/10000384/37174004-489b7656-22e3-11e8-9118-060eba773965.png\" style=\"max-width:100%;\"></a></p>\n<p>Below is part of the Keras error message<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/10000384/37174559-df014b2e-22e4-11e8-961b-3be3f247cd6a.png\"><img width=\"850\" alt=\"screen shot 2018-03-08 at 3 23 54 pm\" src=\"https://user-images.githubusercontent.com/10000384/37174559-df014b2e-22e4-11e8-961b-3be3f247cd6a.png\" style=\"max-width:100%;\"></a></p>", "body_text": "Describe the problem\nHaving problems using tf.nn.leaky_relu.  Attempted to deal with the problem by trying out tf.nn.elu and tf.nn.relu, but both functions resulted in a fairly significant drop in accuracy.  I was originally building the model in Keras, but switched to TensorFlow after having a problem with the corresponding leaky_relu function in Keras.  The TensorFlow and Keras source code and error logs are below.  Thank you in advance!\nSource code / logs\nTensorFlow Source Code\ndef conv2d_w_leakyrelu(x, W, b, s = 1, name = \"conlayer_i\"): \n    x = tf.nn.conv2d(input = x, filter = W, strides = [1, s, s, 1], data_format = \"NHWC\", padding = \"SAME\", name = name)\n    x = tf.nn.bias_add(value = x, bias = b)\n    # return tf.nn.elu(features = x) # TENSORFLOW PROBLEMS WITH LEAKY_RELU, SO USING ELU ACTIVATION FOR NOW\n    return tf.nn.leaky_relu(features = x, alpha = lr_alpha)\n\nKeras Source Code\nmodel.add(Conv2D(32, kernel_size = (im_h, im_w), strides = (s, s), padding = \"same\", kernel_initializer = KI, input_shape = input_shape))\n    model.add(LeakyReLU(alpha = leakiness))\n\nBelow is the TensorFlow error message\n\nBelow is part of the Keras error message", "body": "### Describe the problem\r\nHaving problems using `tf.nn.leaky_relu`.  Attempted to deal with the problem by trying out `tf.nn.elu` and `tf.nn.relu`, but both functions resulted in a fairly significant drop in accuracy.  I was originally building the model in Keras, but switched to TensorFlow after having a problem with the corresponding leaky_relu function in Keras.  The TensorFlow and Keras source code and error logs are below.  Thank you in advance!\r\n\r\n### Source code / logs\r\nTensorFlow Source Code\r\n```\r\ndef conv2d_w_leakyrelu(x, W, b, s = 1, name = \"conlayer_i\"): \r\n    x = tf.nn.conv2d(input = x, filter = W, strides = [1, s, s, 1], data_format = \"NHWC\", padding = \"SAME\", name = name)\r\n    x = tf.nn.bias_add(value = x, bias = b)\r\n    # return tf.nn.elu(features = x) # TENSORFLOW PROBLEMS WITH LEAKY_RELU, SO USING ELU ACTIVATION FOR NOW\r\n    return tf.nn.leaky_relu(features = x, alpha = lr_alpha)\r\n```\r\n\r\nKeras Source Code\r\n```\r\nmodel.add(Conv2D(32, kernel_size = (im_h, im_w), strides = (s, s), padding = \"same\", kernel_initializer = KI, input_shape = input_shape))\r\n    model.add(LeakyReLU(alpha = leakiness))\r\n```\r\n\r\nBelow is the TensorFlow error message\r\n<img width=\"962\" alt=\"screen shot 2018-03-08 at 3 13 12 pm\" src=\"https://user-images.githubusercontent.com/10000384/37174004-489b7656-22e3-11e8-9118-060eba773965.png\">\r\n\r\nBelow is part of the Keras error message\r\n<img width=\"850\" alt=\"screen shot 2018-03-08 at 3 23 54 pm\" src=\"https://user-images.githubusercontent.com/10000384/37174559-df014b2e-22e4-11e8-961b-3be3f247cd6a.png\">\r\n"}
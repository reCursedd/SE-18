{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/135847374", "pull_request_review_id": 59307000, "id": 135847374, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTg0NzM3NA==", "diff_hunk": "@@ -118,6 +118,57 @@ Status BiasAddGradHelper(const Scope& scope, const Operation& op,\n }\n REGISTER_GRADIENT_OP(\"BiasAdd\", BiasAddGradHelper);\n \n+Status Conv2DGrad(const Scope& scope, const Operation& op,\n+                  const std::vector<Output>& grad_inputs,\n+                  std::vector<Output>* grad_outputs) {\n+  string data_format;\n+  string padding;\n+  std::vector<int32> strides;\n+  bool use_cudnn_on_gpu;\n+  auto attrs = op.output(0).node()->attrs();\n+  GetNodeAttr(attrs, \"data_format\", &data_format);\n+  GetNodeAttr(attrs, \"padding\", &padding);\n+  GetNodeAttr(attrs, \"strides\", &strides);\n+  GetNodeAttr(attrs, \"use_cudnn_on_gpu\", &use_cudnn_on_gpu);\n+  Conv2DBackpropInput::Attrs input_attrs;\n+  input_attrs.DataFormat(data_format);\n+  input_attrs.UseCudnnOnGpu(use_cudnn_on_gpu);\n+  auto dx_1 = Conv2DBackpropInput(scope, Shape(scope, op.input(0)),\n+                                  op.input(1), grad_inputs[0],\n+                                  strides, padding, input_attrs);\n+  grad_outputs->push_back(dx_1);\n+  Conv2DBackpropFilter::Attrs filter_attrs;\n+  filter_attrs.DataFormat(data_format);\n+  filter_attrs.UseCudnnOnGpu(use_cudnn_on_gpu);\n+  auto dx_2 = Conv2DBackpropFilter(scope, op.input(0),\n+                                   Shape(scope, op.input(1)), grad_inputs[0],\n+                                   strides, padding, filter_attrs);\n+  grad_outputs->push_back(dx_2);\n+  return scope.status();\n+}\n+REGISTER_GRADIENT_OP(\"Conv2D\", Conv2DGrad);\n+\n+Status MaxPoolGradHelper(const Scope& scope, const Operation& op,", "path": "tensorflow/cc/gradients/nn_grad.cc", "position": 42, "original_position": 34, "commit_id": "5619b051b5267616d5259ae9fe25dff420a0b581", "original_commit_id": "c30ef18898ee82c6afa2c842424218fb3df0c868", "user": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "body": "I am not sure what the status of MaxPool and MaxPoolV2 is, but my guess is that MaxPoolV2 is the one more commonly used now. You may want to also add that gradient https://github.com/tensorflow/tensorflow/blob/86d9171b006a2f4a65055228aa13d83d60916052/tensorflow/python/ops/nn_grad.py#L545\r\n\r\nIf you feel like it you can add MaxPoolGradGrad and MaxPoolGradGradV2, but I doubt these are blocking your models.", "created_at": "2017-08-29T16:45:03Z", "updated_at": "2017-08-29T21:12:10Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/12665#discussion_r135847374", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12665", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/135847374"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/12665#discussion_r135847374"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/12665"}}, "body_html": "<p>I am not sure what the status of MaxPool and MaxPoolV2 is, but my guess is that MaxPoolV2 is the one more commonly used now. You may want to also add that gradient <div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/86d9171b006a2f4a65055228aa13d83d60916052/tensorflow/python/ops/nn_grad.py#L545\">tensorflow/tensorflow/python/ops/nn_grad.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 545\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/86d9171b006a2f4a65055228aa13d83d60916052\">86d9171</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L545\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"545\"></td>\n          <td id=\"LC545\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-en\">@ops.RegisterGradient</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>MaxPoolV2<span class=\"pl-pds\">\"</span></span>) </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>If you feel like it you can add MaxPoolGradGrad and MaxPoolGradGradV2, but I doubt these are blocking your models.</p>", "body_text": "I am not sure what the status of MaxPool and MaxPoolV2 is, but my guess is that MaxPoolV2 is the one more commonly used now. You may want to also add that gradient \n  \n    \n      tensorflow/tensorflow/python/ops/nn_grad.py\n    \n    \n         Line 545\n      in\n      86d9171\n    \n    \n    \n    \n\n        \n          \n           @ops.RegisterGradient(\"MaxPoolV2\") \n        \n    \n  \n\n\nIf you feel like it you can add MaxPoolGradGrad and MaxPoolGradGradV2, but I doubt these are blocking your models."}
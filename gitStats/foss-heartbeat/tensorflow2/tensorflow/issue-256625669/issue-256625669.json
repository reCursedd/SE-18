{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12959", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12959/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12959/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12959/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/12959", "id": 256625669, "node_id": "MDU6SXNzdWUyNTY2MjU2Njk=", "number": 12959, "title": "Python tests in //tensorflow/python/keras/... are failing on Windows", "user": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2017-09-11T08:46:29Z", "updated_at": "2017-11-21T00:07:17Z", "closed_at": "2017-11-21T00:07:17Z", "author_association": "MEMBER", "body_html": "<p><a href=\"http://ci.tensorflow.org/job/tf-master-win-bzl/1552/console\" rel=\"nofollow\">http://ci.tensorflow.org/job/tf-master-win-bzl/1552/console</a></p>\n<pre><code>11:11:55 //py_test_dir/tensorflow/python/keras:callbacks_test                     FAILED in 126.1s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/callbacks_test/test.log\n11:11:55 //py_test_dir/tensorflow/python/keras:data_utils_test                    FAILED in 20.3s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/data_utils_test/test.log\n11:11:55 //py_test_dir/tensorflow/python/keras:io_utils_test                      FAILED in 9.1s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/io_utils_test/test.log\n11:11:55 //py_test_dir/tensorflow/python/keras:models_test                        FAILED in 33.0s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/models_test/test.log\n11:11:55 //py_test_dir/tensorflow/python/keras:training_test                      FAILED in 53.9s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/training_test/test.log\n</code></pre>\n<p>Some of the error messages:</p>\n<pre><code>11:11:55 ERROR: test_LambdaCallback (__main__.KerasCallbacksTest)\n11:11:55 ----------------------------------------------------------------------\n11:11:55 Traceback (most recent call last):\n11:11:55   File \"\\\\?\\C:\\tmp\\Bazel.runfiles_uxjtk119\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\keras\\_impl\\keras\\callbacks_test.py\", line 798, in test_LambdaCallback\n11:11:55     p.start()\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\process.py\", line 105, in start\n11:11:55     self._popen = self._Popen(self)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 212, in _Popen\n11:11:55     return _default_context.get_context().Process._Popen(process_obj)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 313, in _Popen\n11:11:55     return Popen(process_obj)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 66, in __init__\n11:11:55     reduction.dump(process_obj, to_child)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 59, in dump\n11:11:55     ForkingPickler(file, protocol).dump(obj)\n11:11:55 AttributeError: Can't pickle local object 'KerasCallbacksTest.test_LambdaCallback.&lt;locals&gt;.target'\n11:11:55 \n11:11:55 ======================================================================\n11:11:55 ERROR: test_TensorBoard_histogram_freq_must_have_validation_data (__main__.KerasCallbacksTest)\n11:11:55 ----------------------------------------------------------------------\n11:11:55 Traceback (most recent call last):\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 488, in rmtree\n11:11:55     return _rmtree_unsafe(path, onerror)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 378, in _rmtree_unsafe\n11:11:55     _rmtree_unsafe(fullname, onerror)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 387, in _rmtree_unsafe\n11:11:55     onerror(os.rmdir, path, sys.exc_info())\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 385, in _rmtree_unsafe\n11:11:55     os.rmdir(path)\n11:11:55 OSError: [WinError 145] The directory is not empty: 'C:\\\\tmp\\\\callbacks_test1q3mfkyu\\\\tmp9rjq7egq\\\\logs'\n11:11:55 \n11:11:55 ======================================================================\n11:11:55 FAIL: test_stop_training_csv (__main__.KerasCallbacksTest)\n11:11:55 ----------------------------------------------------------------------\n11:11:55 Traceback (most recent call last):\n11:11:55   File \"\\\\?\\C:\\tmp\\Bazel.runfiles_uxjtk119\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\keras\\_impl\\keras\\callbacks_test.py\", line 502, in test_stop_training_csv\n11:11:55     assert 'nan' in values[-1], 'The last epoch was not logged.'\n11:11:55 AssertionError: The last epoch was not logged.\n</code></pre>\n<p>Theses tests are not running in CMake build on Windows, so it's only detected by Bazel.</p>", "body_text": "http://ci.tensorflow.org/job/tf-master-win-bzl/1552/console\n11:11:55 //py_test_dir/tensorflow/python/keras:callbacks_test                     FAILED in 126.1s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/callbacks_test/test.log\n11:11:55 //py_test_dir/tensorflow/python/keras:data_utils_test                    FAILED in 20.3s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/data_utils_test/test.log\n11:11:55 //py_test_dir/tensorflow/python/keras:io_utils_test                      FAILED in 9.1s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/io_utils_test/test.log\n11:11:55 //py_test_dir/tensorflow/python/keras:models_test                        FAILED in 33.0s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/models_test/test.log\n11:11:55 //py_test_dir/tensorflow/python/keras:training_test                      FAILED in 53.9s\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/training_test/test.log\n\nSome of the error messages:\n11:11:55 ERROR: test_LambdaCallback (__main__.KerasCallbacksTest)\n11:11:55 ----------------------------------------------------------------------\n11:11:55 Traceback (most recent call last):\n11:11:55   File \"\\\\?\\C:\\tmp\\Bazel.runfiles_uxjtk119\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\keras\\_impl\\keras\\callbacks_test.py\", line 798, in test_LambdaCallback\n11:11:55     p.start()\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\process.py\", line 105, in start\n11:11:55     self._popen = self._Popen(self)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 212, in _Popen\n11:11:55     return _default_context.get_context().Process._Popen(process_obj)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 313, in _Popen\n11:11:55     return Popen(process_obj)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 66, in __init__\n11:11:55     reduction.dump(process_obj, to_child)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 59, in dump\n11:11:55     ForkingPickler(file, protocol).dump(obj)\n11:11:55 AttributeError: Can't pickle local object 'KerasCallbacksTest.test_LambdaCallback.<locals>.target'\n11:11:55 \n11:11:55 ======================================================================\n11:11:55 ERROR: test_TensorBoard_histogram_freq_must_have_validation_data (__main__.KerasCallbacksTest)\n11:11:55 ----------------------------------------------------------------------\n11:11:55 Traceback (most recent call last):\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 488, in rmtree\n11:11:55     return _rmtree_unsafe(path, onerror)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 378, in _rmtree_unsafe\n11:11:55     _rmtree_unsafe(fullname, onerror)\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 387, in _rmtree_unsafe\n11:11:55     onerror(os.rmdir, path, sys.exc_info())\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 385, in _rmtree_unsafe\n11:11:55     os.rmdir(path)\n11:11:55 OSError: [WinError 145] The directory is not empty: 'C:\\\\tmp\\\\callbacks_test1q3mfkyu\\\\tmp9rjq7egq\\\\logs'\n11:11:55 \n11:11:55 ======================================================================\n11:11:55 FAIL: test_stop_training_csv (__main__.KerasCallbacksTest)\n11:11:55 ----------------------------------------------------------------------\n11:11:55 Traceback (most recent call last):\n11:11:55   File \"\\\\?\\C:\\tmp\\Bazel.runfiles_uxjtk119\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\keras\\_impl\\keras\\callbacks_test.py\", line 502, in test_stop_training_csv\n11:11:55     assert 'nan' in values[-1], 'The last epoch was not logged.'\n11:11:55 AssertionError: The last epoch was not logged.\n\nTheses tests are not running in CMake build on Windows, so it's only detected by Bazel.", "body": "http://ci.tensorflow.org/job/tf-master-win-bzl/1552/console\r\n```\r\n11:11:55 //py_test_dir/tensorflow/python/keras:callbacks_test                     FAILED in 126.1s\r\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/callbacks_test/test.log\r\n11:11:55 //py_test_dir/tensorflow/python/keras:data_utils_test                    FAILED in 20.3s\r\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/data_utils_test/test.log\r\n11:11:55 //py_test_dir/tensorflow/python/keras:io_utils_test                      FAILED in 9.1s\r\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/io_utils_test/test.log\r\n11:11:55 //py_test_dir/tensorflow/python/keras:models_test                        FAILED in 33.0s\r\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/models_test/test.log\r\n11:11:55 //py_test_dir/tensorflow/python/keras:training_test                      FAILED in 53.9s\r\n11:11:55   C:/tmp/_bazel_system/424zmya1/execroot/org_tensorflow/bazel-out/msvc_x64-py3-opt/testlogs/py_test_dir/tensorflow/python/keras/training_test/test.log\r\n```\r\n\r\nSome of the error messages:\r\n```\r\n11:11:55 ERROR: test_LambdaCallback (__main__.KerasCallbacksTest)\r\n11:11:55 ----------------------------------------------------------------------\r\n11:11:55 Traceback (most recent call last):\r\n11:11:55   File \"\\\\?\\C:\\tmp\\Bazel.runfiles_uxjtk119\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\keras\\_impl\\keras\\callbacks_test.py\", line 798, in test_LambdaCallback\r\n11:11:55     p.start()\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\process.py\", line 105, in start\r\n11:11:55     self._popen = self._Popen(self)\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 212, in _Popen\r\n11:11:55     return _default_context.get_context().Process._Popen(process_obj)\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 313, in _Popen\r\n11:11:55     return Popen(process_obj)\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 66, in __init__\r\n11:11:55     reduction.dump(process_obj, to_child)\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 59, in dump\r\n11:11:55     ForkingPickler(file, protocol).dump(obj)\r\n11:11:55 AttributeError: Can't pickle local object 'KerasCallbacksTest.test_LambdaCallback.<locals>.target'\r\n11:11:55 \r\n11:11:55 ======================================================================\r\n11:11:55 ERROR: test_TensorBoard_histogram_freq_must_have_validation_data (__main__.KerasCallbacksTest)\r\n11:11:55 ----------------------------------------------------------------------\r\n11:11:55 Traceback (most recent call last):\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 488, in rmtree\r\n11:11:55     return _rmtree_unsafe(path, onerror)\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 378, in _rmtree_unsafe\r\n11:11:55     _rmtree_unsafe(fullname, onerror)\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 387, in _rmtree_unsafe\r\n11:11:55     onerror(os.rmdir, path, sys.exc_info())\r\n11:11:55   File \"C:\\Program Files\\Anaconda3\\lib\\shutil.py\", line 385, in _rmtree_unsafe\r\n11:11:55     os.rmdir(path)\r\n11:11:55 OSError: [WinError 145] The directory is not empty: 'C:\\\\tmp\\\\callbacks_test1q3mfkyu\\\\tmp9rjq7egq\\\\logs'\r\n11:11:55 \r\n11:11:55 ======================================================================\r\n11:11:55 FAIL: test_stop_training_csv (__main__.KerasCallbacksTest)\r\n11:11:55 ----------------------------------------------------------------------\r\n11:11:55 Traceback (most recent call last):\r\n11:11:55   File \"\\\\?\\C:\\tmp\\Bazel.runfiles_uxjtk119\\runfiles\\org_tensorflow\\py_test_dir\\tensorflow\\python\\keras\\_impl\\keras\\callbacks_test.py\", line 502, in test_stop_training_csv\r\n11:11:55     assert 'nan' in values[-1], 'The last epoch was not logged.'\r\n11:11:55 AssertionError: The last epoch was not logged.\r\n```\r\n\r\nTheses tests are not running in CMake build on Windows, so it's only detected by Bazel."}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/343310001", "html_url": "https://github.com/tensorflow/tensorflow/issues/12959#issuecomment-343310001", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12959", "id": 343310001, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzMxMDAwMQ==", "user": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-09T22:17:18Z", "updated_at": "2017-11-09T22:17:18Z", "author_association": "MEMBER", "body_html": "<p>OK, I fixed most of the failures. There are a few more remaining now.<br>\nHowever the following one I have no idea how to tackle:</p>\n<ul>\n<li>tensorflow/python/keras/_impl/keras/engine/training_test.py</li>\n<li>tensorflow/python/keras/_impl/keras/utils/data_utils_test.py</li>\n</ul>\n<p>The error:</p>\n<pre><code>...\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 313, in _Popen\n00:36:47.092     return Popen(process_obj)\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 66, in __init__\n00:36:47.092     reduction.dump(process_obj, to_child)\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 59, in dump\n00:36:47.092     ForkingPickler(file, protocol).dump(obj)\n00:36:47.092 AttributeError: Can't pickle local object 'GeneratorEnqueuer.start.&lt;locals&gt;.data_generator_task'\n</code></pre>\n<p>Seems to happen when we have a locally defined function we would like to run a new thread using the multiprocessing library. This seems to work fine in linux, but we see this error on windows.<br>\nI think for threading, multiprocessing library uses a different code path on windows, which needs \"pickling\" stuff.</p>\n<p>Any ideas, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=192142\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mrry\">@mrry</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=17122304\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/pcloudy\">@pcloudy</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=710255\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fchollet\">@fchollet</a></p>", "body_text": "OK, I fixed most of the failures. There are a few more remaining now.\nHowever the following one I have no idea how to tackle:\n\ntensorflow/python/keras/_impl/keras/engine/training_test.py\ntensorflow/python/keras/_impl/keras/utils/data_utils_test.py\n\nThe error:\n...\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 313, in _Popen\n00:36:47.092     return Popen(process_obj)\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 66, in __init__\n00:36:47.092     reduction.dump(process_obj, to_child)\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 59, in dump\n00:36:47.092     ForkingPickler(file, protocol).dump(obj)\n00:36:47.092 AttributeError: Can't pickle local object 'GeneratorEnqueuer.start.<locals>.data_generator_task'\n\nSeems to happen when we have a locally defined function we would like to run a new thread using the multiprocessing library. This seems to work fine in linux, but we see this error on windows.\nI think for threading, multiprocessing library uses a different code path on windows, which needs \"pickling\" stuff.\nAny ideas, @mrry, @pcloudy, @fchollet", "body": "OK, I fixed most of the failures. There are a few more remaining now.\r\nHowever the following one I have no idea how to tackle:\r\n\r\n- tensorflow/python/keras/_impl/keras/engine/training_test.py\r\n- tensorflow/python/keras/_impl/keras/utils/data_utils_test.py\r\n\r\nThe error:\r\n```\r\n...\r\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\context.py\", line 313, in _Popen\r\n00:36:47.092     return Popen(process_obj)\r\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 66, in __init__\r\n00:36:47.092     reduction.dump(process_obj, to_child)\r\n00:36:47.092   File \"C:\\Program Files\\Anaconda3\\lib\\multiprocessing\\reduction.py\", line 59, in dump\r\n00:36:47.092     ForkingPickler(file, protocol).dump(obj)\r\n00:36:47.092 AttributeError: Can't pickle local object 'GeneratorEnqueuer.start.<locals>.data_generator_task'\r\n```\r\nSeems to happen when we have a locally defined function we would like to run a new thread using the multiprocessing library. This seems to work fine in linux, but we see this error on windows.\r\nI think for threading, multiprocessing library uses a different code path on windows, which needs \"pickling\" stuff.\r\n\r\nAny ideas, @mrry, @pcloudy, @fchollet "}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14310", "id": 151026073, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUxMDI2MDcz", "html_url": "https://github.com/tensorflow/tensorflow/pull/14310", "diff_url": "https://github.com/tensorflow/tensorflow/pull/14310.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/14310.patch", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14310", "number": 14310, "state": "closed", "locked": false, "title": "ONNX Support (Run ONNX nodes using TF)", "user": {"login": "tjingrant", "id": 6410074, "node_id": "MDQ6VXNlcjY0MTAwNzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6410074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjingrant", "html_url": "https://github.com/tjingrant", "followers_url": "https://api.github.com/users/tjingrant/followers", "following_url": "https://api.github.com/users/tjingrant/following{/other_user}", "gists_url": "https://api.github.com/users/tjingrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjingrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjingrant/subscriptions", "organizations_url": "https://api.github.com/users/tjingrant/orgs", "repos_url": "https://api.github.com/users/tjingrant/repos", "events_url": "https://api.github.com/users/tjingrant/events{/privacy}", "received_events_url": "https://api.github.com/users/tjingrant/received_events", "type": "User", "site_admin": false}, "body": "As per https://github.com/tensorflow/tensorflow/issues/12888.\r\n\r\nAuthors of ONNX-TF package: Arpith Jacob, Tian Jin, Gheorghe-Teodor Bercea from IBM Research.\r\n\r\n## Objective\r\nWe are porting a subset of our package of ONNX-TF from here https://github.com/tjingrant/onnx-tf. Specifically, we want to enable users to do the following:\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom onnx import helper\r\nfrom onnx.onnx_pb2 import TensorProto\r\n\r\nX = np.random.randn(3, 2).astype(np.float32)\r\nY_ref = np.clip(X, 0, np.inf)\r\n\r\nnode_def = helper.make_node(\r\n  \"Relu\", [\"X\"], [\"X\"])\r\n\r\ngraph_def = helper.make_graph(\r\n  [node_def],\r\n  name=\"test\",\r\n  inputs=[helper.make_tensor_value_info(\"X\", TensorProto.FLOAT, [3, 2])],\r\n  outputs=[helper.make_tensor_value_info(\"X\", TensorProto.FLOAT, [3, 2])])\r\n\r\ninput_dict, output_dict = tf.contrib.onnx.prepare(helper.make_model(graph_def))\r\nwith tf.Session() as sess:\r\n  out = sess.run(output_dict['X'], feed_dict={input_dict['X']: X})\r\n\r\nnp.testing.assert_almost_equal(out, Y_ref)\r\n```\r\n## Current support for ONNX:\r\nThis implementation passes all the backend tests here https://github.com/onnx/onnx/blob/master/onnx/backend/test.py except for RNN. It supports all the models in the ONNX model zoo (https://github.com/onnx/models).\r\n\r\n## What we will be doing:\r\nWe are still working on fixing some of the tests as well as clearing as many TODO's as we can.\r\nThe ONNX RNN API changed very recently and we may do another PR for RNN support.\r\n\r\n## We'd like your opinions:\r\nWe have not imported the ONNX package dependency (https://github.com/onnx/onnx) as we'd like to get TF team's opinion regarding whether/how we should import ONNX package dependency. The benefit is that we can check for the legality of ONNX node/graph declaration. Also we need a bunch of Proto definition like GraphProto/TensorProto.\r\n\r\n@arpith-jacob, @doru1004", "created_at": "2017-11-07T05:07:40Z", "updated_at": "2017-11-17T00:00:15Z", "closed_at": "2017-11-16T23:57:02Z", "merged_at": null, "merge_commit_sha": "0ca254375f5e38634d8e1c0a5cc1ebae0cbc2342", "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14310/commits", "review_comments_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14310/comments", "review_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14310/comments", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/af0855ceeaa9504e56105ec6111d7190044446c5", "head": {"label": "tjingrant:onnx_integration", "ref": "onnx_integration", "sha": "af0855ceeaa9504e56105ec6111d7190044446c5", "user": {"login": "tjingrant", "id": 6410074, "node_id": "MDQ6VXNlcjY0MTAwNzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6410074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjingrant", "html_url": "https://github.com/tjingrant", "followers_url": "https://api.github.com/users/tjingrant/followers", "following_url": "https://api.github.com/users/tjingrant/following{/other_user}", "gists_url": "https://api.github.com/users/tjingrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjingrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjingrant/subscriptions", "organizations_url": "https://api.github.com/users/tjingrant/orgs", "repos_url": "https://api.github.com/users/tjingrant/repos", "events_url": "https://api.github.com/users/tjingrant/events{/privacy}", "received_events_url": "https://api.github.com/users/tjingrant/received_events", "type": "User", "site_admin": false}, "repo": {"id": 96789993, "node_id": "MDEwOlJlcG9zaXRvcnk5Njc4OTk5Mw==", "name": "tensorflow", "full_name": "tjingrant/tensorflow", "private": false, "owner": {"login": "tjingrant", "id": 6410074, "node_id": "MDQ6VXNlcjY0MTAwNzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6410074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjingrant", "html_url": "https://github.com/tjingrant", "followers_url": "https://api.github.com/users/tjingrant/followers", "following_url": "https://api.github.com/users/tjingrant/following{/other_user}", "gists_url": "https://api.github.com/users/tjingrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjingrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjingrant/subscriptions", "organizations_url": "https://api.github.com/users/tjingrant/orgs", "repos_url": "https://api.github.com/users/tjingrant/repos", "events_url": "https://api.github.com/users/tjingrant/events{/privacy}", "received_events_url": "https://api.github.com/users/tjingrant/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/tjingrant/tensorflow", "description": "Computation using data flow graphs for scalable machine learning", "fork": true, "url": "https://api.github.com/repos/tjingrant/tensorflow", "forks_url": "https://api.github.com/repos/tjingrant/tensorflow/forks", "keys_url": "https://api.github.com/repos/tjingrant/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/tjingrant/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/tjingrant/tensorflow/teams", "hooks_url": "https://api.github.com/repos/tjingrant/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/tjingrant/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/tjingrant/tensorflow/events", "assignees_url": "https://api.github.com/repos/tjingrant/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/tjingrant/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/tjingrant/tensorflow/tags", "blobs_url": "https://api.github.com/repos/tjingrant/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/tjingrant/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/tjingrant/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/tjingrant/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/tjingrant/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/tjingrant/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/tjingrant/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/tjingrant/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/tjingrant/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/tjingrant/tensorflow/subscription", "commits_url": "https://api.github.com/repos/tjingrant/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/tjingrant/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/tjingrant/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/tjingrant/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/tjingrant/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/tjingrant/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/tjingrant/tensorflow/merges", "archive_url": "https://api.github.com/repos/tjingrant/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/tjingrant/tensorflow/downloads", "issues_url": "https://api.github.com/repos/tjingrant/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/tjingrant/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/tjingrant/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/tjingrant/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/tjingrant/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/tjingrant/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/tjingrant/tensorflow/deployments", "created_at": "2017-07-10T14:58:32Z", "updated_at": "2017-07-10T14:58:58Z", "pushed_at": "2017-12-28T20:25:58Z", "git_url": "git://github.com/tjingrant/tensorflow.git", "ssh_url": "git@github.com:tjingrant/tensorflow.git", "clone_url": "https://github.com/tjingrant/tensorflow.git", "svn_url": "https://github.com/tjingrant/tensorflow", "homepage": "http://tensorflow.org", "size": 222667, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "tensorflow:master", "ref": "master", "sha": "c81acfb025abe417d80ffa677edfe2dd1bcda58e", "user": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 45717250, "node_id": "MDEwOlJlcG9zaXRvcnk0NTcxNzI1MA==", "name": "tensorflow", "full_name": "tensorflow/tensorflow", "private": false, "owner": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/tensorflow/tensorflow", "description": "An Open Source Machine Learning Framework for Everyone", "fork": false, "url": "https://api.github.com/repos/tensorflow/tensorflow", "forks_url": "https://api.github.com/repos/tensorflow/tensorflow/forks", "keys_url": "https://api.github.com/repos/tensorflow/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/tensorflow/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/tensorflow/tensorflow/teams", "hooks_url": "https://api.github.com/repos/tensorflow/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/events", "assignees_url": "https://api.github.com/repos/tensorflow/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/tensorflow/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/tensorflow/tensorflow/tags", "blobs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/tensorflow/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/tensorflow/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/tensorflow/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/tensorflow/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/tensorflow/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/tensorflow/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/tensorflow/tensorflow/subscription", "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/tensorflow/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/tensorflow/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/tensorflow/tensorflow/merges", "archive_url": "https://api.github.com/repos/tensorflow/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/tensorflow/tensorflow/downloads", "issues_url": "https://api.github.com/repos/tensorflow/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/tensorflow/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/tensorflow/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/tensorflow/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/tensorflow/tensorflow/deployments", "created_at": "2015-11-07T01:19:20Z", "updated_at": "2018-11-24T22:13:04Z", "pushed_at": "2018-11-24T18:40:19Z", "git_url": "git://github.com/tensorflow/tensorflow.git", "ssh_url": "git@github.com:tensorflow/tensorflow.git", "clone_url": "https://github.com/tensorflow/tensorflow.git", "svn_url": "https://github.com/tensorflow/tensorflow", "homepage": "https://tensorflow.org", "size": 284546, "stargazers_count": 115176, "watchers_count": 115176, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 69946, "mirror_url": null, "archived": false, "open_issues_count": 1760, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 69946, "open_issues": 1760, "watchers": 115176, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14310"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/14310"}, "issue": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/14310"}, "comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/14310/comments"}, "review_comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14310/comments"}, "review_comment": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14310/commits"}, "statuses": {"href": "https://api.github.com/repos/tensorflow/tensorflow/statuses/af0855ceeaa9504e56105ec6111d7190044446c5"}}, "author_association": "CONTRIBUTOR", "body_html": "<p>As per <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"256068792\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/12888\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/12888/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/12888\">#12888</a>.</p>\n<p>Authors of ONNX-TF package: Arpith Jacob, Tian Jin, Gheorghe-Teodor Bercea from IBM Research.</p>\n<h2>Objective</h2>\n<p>We are porting a subset of our package of ONNX-TF from here <a href=\"https://github.com/tjingrant/onnx-tf\">https://github.com/tjingrant/onnx-tf</a>. Specifically, we want to enable users to do the following:</p>\n<pre><code>import tensorflow as tf\nimport numpy as np\nfrom onnx import helper\nfrom onnx.onnx_pb2 import TensorProto\n\nX = np.random.randn(3, 2).astype(np.float32)\nY_ref = np.clip(X, 0, np.inf)\n\nnode_def = helper.make_node(\n  \"Relu\", [\"X\"], [\"X\"])\n\ngraph_def = helper.make_graph(\n  [node_def],\n  name=\"test\",\n  inputs=[helper.make_tensor_value_info(\"X\", TensorProto.FLOAT, [3, 2])],\n  outputs=[helper.make_tensor_value_info(\"X\", TensorProto.FLOAT, [3, 2])])\n\ninput_dict, output_dict = tf.contrib.onnx.prepare(helper.make_model(graph_def))\nwith tf.Session() as sess:\n  out = sess.run(output_dict['X'], feed_dict={input_dict['X']: X})\n\nnp.testing.assert_almost_equal(out, Y_ref)\n</code></pre>\n<h2>Current support for ONNX:</h2>\n<p>This implementation passes all the backend tests here <a href=\"https://github.com/onnx/onnx/blob/master/onnx/backend/test.py\">https://github.com/onnx/onnx/blob/master/onnx/backend/test.py</a> except for RNN. It supports all the models in the ONNX model zoo (<a href=\"https://github.com/onnx/models\">https://github.com/onnx/models</a>).</p>\n<h2>What we will be doing:</h2>\n<p>We are still working on fixing some of the tests as well as clearing as many TODO's as we can.<br>\nThe ONNX RNN API changed very recently and we may do another PR for RNN support.</p>\n<h2>We'd like your opinions:</h2>\n<p>We have not imported the ONNX package dependency (<a href=\"https://github.com/onnx/onnx\">https://github.com/onnx/onnx</a>) as we'd like to get TF team's opinion regarding whether/how we should import ONNX package dependency. The benefit is that we can check for the legality of ONNX node/graph declaration. Also we need a bunch of Proto definition like GraphProto/TensorProto.</p>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4835305\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/arpith-jacob\">@arpith-jacob</a>, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1168486\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/doru1004\">@doru1004</a></p>", "body_text": "As per #12888.\nAuthors of ONNX-TF package: Arpith Jacob, Tian Jin, Gheorghe-Teodor Bercea from IBM Research.\nObjective\nWe are porting a subset of our package of ONNX-TF from here https://github.com/tjingrant/onnx-tf. Specifically, we want to enable users to do the following:\nimport tensorflow as tf\nimport numpy as np\nfrom onnx import helper\nfrom onnx.onnx_pb2 import TensorProto\n\nX = np.random.randn(3, 2).astype(np.float32)\nY_ref = np.clip(X, 0, np.inf)\n\nnode_def = helper.make_node(\n  \"Relu\", [\"X\"], [\"X\"])\n\ngraph_def = helper.make_graph(\n  [node_def],\n  name=\"test\",\n  inputs=[helper.make_tensor_value_info(\"X\", TensorProto.FLOAT, [3, 2])],\n  outputs=[helper.make_tensor_value_info(\"X\", TensorProto.FLOAT, [3, 2])])\n\ninput_dict, output_dict = tf.contrib.onnx.prepare(helper.make_model(graph_def))\nwith tf.Session() as sess:\n  out = sess.run(output_dict['X'], feed_dict={input_dict['X']: X})\n\nnp.testing.assert_almost_equal(out, Y_ref)\n\nCurrent support for ONNX:\nThis implementation passes all the backend tests here https://github.com/onnx/onnx/blob/master/onnx/backend/test.py except for RNN. It supports all the models in the ONNX model zoo (https://github.com/onnx/models).\nWhat we will be doing:\nWe are still working on fixing some of the tests as well as clearing as many TODO's as we can.\nThe ONNX RNN API changed very recently and we may do another PR for RNN support.\nWe'd like your opinions:\nWe have not imported the ONNX package dependency (https://github.com/onnx/onnx) as we'd like to get TF team's opinion regarding whether/how we should import ONNX package dependency. The benefit is that we can check for the legality of ONNX node/graph declaration. Also we need a bunch of Proto definition like GraphProto/TensorProto.\n@arpith-jacob, @doru1004", "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 5, "review_comments": 0, "maintainer_can_modify": false, "commits": 3, "additions": 1714, "deletions": 0, "changed_files": 10}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/245325409", "html_url": "https://github.com/tensorflow/tensorflow/issues/3460#issuecomment-245325409", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3460", "id": 245325409, "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTMyNTQwOQ==", "user": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-07T15:49:04Z", "updated_at": "2016-09-07T15:49:04Z", "author_association": "MEMBER", "body_html": "<p>That looks right to me. Nicely done.</p>\n<p>On Wed, Sep 7, 2016 at 3:28 AM, marcoadurno <a href=\"mailto:notifications@github.com\">notifications@github.com</a><br>\nwrote:</p>\n<blockquote>\n<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=577277\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/martinwicke\">@martinwicke</a> <a href=\"https://github.com/martinwicke\">https://github.com/martinwicke</a>, is the gist close to what<br>\nyou had in mind?<br>\nEstimator and moving average of trained variables<br>\n<a href=\"https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c\">https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c</a></p>\n<p>A few points worth mentioning:</p>\n<ul>\n<li></li>\n</ul>\n<h2>There is no need to explicitly add the shadow variables to the<br>\nVARIABLES collection. This is automatically done.<br>\n<a href=\"https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L31\">https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L31</a></h2>\n<h2>At inference time<br>\n<a href=\"https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L37\">https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L37</a><br>\nI assign the value of the shadow variables to the graph variables using<br>\ntf.assign<br>\n<a href=\"https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L16\">https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L16</a></h2>\n<p>With tf.control_dependencies and tf.identity<br>\n<a href=\"https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L39\">https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L39</a><br>\nI can enforce the output of the linear layer to depend on the assign<br>\noperation</p>\n<p>Thanks</p>\n<p>Marco</p>\n<p>\u2014<br>\nYou are receiving this because you were mentioned.<br>\nReply to this email directly, view it on GitHub<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"167004495\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/3460\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/3460/hovercard?comment_id=245239464&amp;comment_type=issue_comment\" href=\"https://github.com/tensorflow/tensorflow/issues/3460#issuecomment-245239464\">#3460 (comment)</a>,<br>\nor mute the thread<br>\n<a href=\"https://github.com/notifications/unsubscribe-auth/AAjO_QmiaysDxARg7UDhZ1naQAKLvNxBks5qnpHMgaJpZM4JSlat\">https://github.com/notifications/unsubscribe-auth/AAjO_QmiaysDxARg7UDhZ1naQAKLvNxBks5qnpHMgaJpZM4JSlat</a><br>\n.</p>\n</blockquote>", "body_text": "That looks right to me. Nicely done.\nOn Wed, Sep 7, 2016 at 3:28 AM, marcoadurno notifications@github.com\nwrote:\n\n@martinwicke https://github.com/martinwicke, is the gist close to what\nyou had in mind?\nEstimator and moving average of trained variables\nhttps://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c\nA few points worth mentioning:\n\n\n\nThere is no need to explicitly add the shadow variables to the\nVARIABLES collection. This is automatically done.\nhttps://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L31\nAt inference time\nhttps://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L37\nI assign the value of the shadow variables to the graph variables using\ntf.assign\nhttps://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L16\nWith tf.control_dependencies and tf.identity\nhttps://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L39\nI can enforce the output of the linear layer to depend on the assign\noperation\nThanks\nMarco\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n#3460 (comment),\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAjO_QmiaysDxARg7UDhZ1naQAKLvNxBks5qnpHMgaJpZM4JSlat\n.", "body": "That looks right to me. Nicely done.\n\nOn Wed, Sep 7, 2016 at 3:28 AM, marcoadurno notifications@github.com\nwrote:\n\n> @martinwicke https://github.com/martinwicke, is the gist close to what\n> you had in mind?\n> Estimator and moving average of trained variables\n> https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c\n> \n> A few points worth mentioning:\n> \n>    -\n> \n>    There is no need to explicitly add the shadow variables to the\n>    VARIABLES collection. This is automatically done.\n>    https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L31\n>    -\n> \n>    At inference time\n>    https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L37\n>    I assign the value of the shadow variables to the graph variables using\n>    tf.assign\n>    https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L16\n>    -\n> \n>    With tf.control_dependencies and tf.identity\n>    https://gist.github.com/marcoadurno/1359e49e50a9237b68181a29d104af8c#file-estimator_ema-py-L39\n>    I can enforce the output of the linear layer to depend on the assign\n>    operation\n> \n> Thanks\n> \n> Marco\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/tensorflow/tensorflow/issues/3460#issuecomment-245239464,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAjO_QmiaysDxARg7UDhZ1naQAKLvNxBks5qnpHMgaJpZM4JSlat\n> .\n"}
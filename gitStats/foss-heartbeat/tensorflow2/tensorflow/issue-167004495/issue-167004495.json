{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3460", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3460/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3460/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3460/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3460", "id": 167004495, "node_id": "MDU6SXNzdWUxNjcwMDQ0OTU=", "number": 3460, "title": "Exponential Moving Average of trained variables in tf.contrib.learn.estimators.estimator", "user": {"login": "marcoadurno", "id": 4450528, "node_id": "MDQ6VXNlcjQ0NTA1Mjg=", "avatar_url": "https://avatars1.githubusercontent.com/u/4450528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcoadurno", "html_url": "https://github.com/marcoadurno", "followers_url": "https://api.github.com/users/marcoadurno/followers", "following_url": "https://api.github.com/users/marcoadurno/following{/other_user}", "gists_url": "https://api.github.com/users/marcoadurno/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcoadurno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcoadurno/subscriptions", "organizations_url": "https://api.github.com/users/marcoadurno/orgs", "repos_url": "https://api.github.com/users/marcoadurno/repos", "events_url": "https://api.github.com/users/marcoadurno/events{/privacy}", "received_events_url": "https://api.github.com/users/marcoadurno/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2016-07-22T09:20:33Z", "updated_at": "2018-08-12T12:58:15Z", "closed_at": "2016-09-08T08:38:19Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>As mentioned in the cifar10 tutorial, it is often useful to use an exponential moving average of the trained variables at prediction time.</p>\n<p>From my understanding, in it's current form, the class BaseEstimator does not allow to do so.</p>\n<p>The _infer_model method of BaseEstimator would need to create a saver object that restores the averaged version of the trained variables, and the saver object would then need to be cascaded into graph_actions.infer and ultimately down to graph_actions.run_feeds.</p>\n<p>Whilst overriding a class method is not a big deal, I was wondering if there was a neat way of achieving the end goal without having to refactor the graph_actions.</p>\n<p>Best Regards,</p>\n<p>Marco</p>", "body_text": "Hi,\nAs mentioned in the cifar10 tutorial, it is often useful to use an exponential moving average of the trained variables at prediction time.\nFrom my understanding, in it's current form, the class BaseEstimator does not allow to do so.\nThe _infer_model method of BaseEstimator would need to create a saver object that restores the averaged version of the trained variables, and the saver object would then need to be cascaded into graph_actions.infer and ultimately down to graph_actions.run_feeds.\nWhilst overriding a class method is not a big deal, I was wondering if there was a neat way of achieving the end goal without having to refactor the graph_actions.\nBest Regards,\nMarco", "body": "Hi,\n\nAs mentioned in the cifar10 tutorial, it is often useful to use an exponential moving average of the trained variables at prediction time.\n\nFrom my understanding, in it's current form, the class BaseEstimator does not allow to do so. \n\nThe _infer_model method of BaseEstimator would need to create a saver object that restores the averaged version of the trained variables, and the saver object would then need to be cascaded into graph_actions.infer and ultimately down to graph_actions.run_feeds.\n\nWhilst overriding a class method is not a big deal, I was wondering if there was a neat way of achieving the end goal without having to refactor the graph_actions.\n\nBest Regards,\n\nMarco\n"}
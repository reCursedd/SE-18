{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/363688634", "html_url": "https://github.com/tensorflow/tensorflow/issues/15924#issuecomment-363688634", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15924", "id": 363688634, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzY4ODYzNA==", "user": {"login": "arun-kumark", "id": 13482732, "node_id": "MDQ6VXNlcjEzNDgyNzMy", "avatar_url": "https://avatars1.githubusercontent.com/u/13482732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arun-kumark", "html_url": "https://github.com/arun-kumark", "followers_url": "https://api.github.com/users/arun-kumark/followers", "following_url": "https://api.github.com/users/arun-kumark/following{/other_user}", "gists_url": "https://api.github.com/users/arun-kumark/gists{/gist_id}", "starred_url": "https://api.github.com/users/arun-kumark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arun-kumark/subscriptions", "organizations_url": "https://api.github.com/users/arun-kumark/orgs", "repos_url": "https://api.github.com/users/arun-kumark/repos", "events_url": "https://api.github.com/users/arun-kumark/events{/privacy}", "received_events_url": "https://api.github.com/users/arun-kumark/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-07T08:07:55Z", "updated_at": "2018-02-07T08:08:13Z", "author_association": "NONE", "body_html": "<p>Hi Maurya Ritesh,<br>\nI am new to quantization scripts..</p>\n<p>I need you help, I am facing the same issue while running the optimize_for_inference.py script.<br>\nMy arguments are as below:</p>\n<p><code>python optimize_for_inference.py   --input=res101_faster_rcnn_iter_5600.pb   --output=optimized_graph.pb   --input_names=\"input\"   --output_names=\"final_result\"</code></p>\n<p>My pb file is based on Resnet-101. I am sharing my res101_faster_rcnn_iter_5600.ckpt.custom file below to see it's contents:</p>\n<p>`node {<br>\nname: \"Placeholder\"<br>\nop: \"Placeholder\"<br>\nattr {<br>\nkey: \"dtype\"<br>\nvalue {<br>\ntype: DT_FLOAT<br>\n}<br>\n}<br>\nattr {<br>\nkey: \"shape\"<br>\nvalue {<br>\nshape {<br>\ndim {<br>\nsize: 1<br>\n}<br>\ndim {<br>\nsize: -1<br>\n}<br>\ndim {<br>\nsize: -1<br>\n}<br>\ndim {<br>\nsize: 3<br>\n}<br>\n}<br>\n}<br>\n}<br>\n}<br>\nnode {<br>\nname: \"Placeholder_1\"<br>\nop: \"Placeholder\"<br>\nattr {<br>\nkey: \"dtype\"<br>\nvalue {<br>\ntype: DT_FLOAT<br>\n}<br>\n}<br>\nattr {<br>\nkey: \"shape\"<br>\nvalue {<br>\nshape {<br>\ndim {<br>\nsize: 1<br>\n}<br>\ndim {<br>\nsize: 3<br>\n}<br>\n}<br>\n}<br>\n}<br>\n}<br>\nnode {<br>\nname: \"Placeholder_2\"<br>\nop: \"Placeholder\"<br>\nattr {<br>\nkey: \"dtype\"<br>\nvalue {<br>\ntype: DT_FLOAT<br>\n}<br>\n}<br>\nattr {<br>\nkey: \"shape\"<br>\nvalue {<br>\nshape {<br>\ndim {<br>\nsize: -1<br>\n}<br>\ndim {<br>\nsize: 5<br>\n}<br>\n}<br>\n}<br>\n}<br>\n}<br>\nnode {<br>\nname: \"resnet_v1_101/Pad/paddings\"<br>\nop: \"Const\"<br>\nattr {<br>\nkey: \"dtype\"<br>\nvalue {<br>\ntype: DT_INT32<br>\n}<br>\n}<br>\nattr {<br>\nkey: \"value\"<br>\nvalue {<br>\ntensor {<br>\ndtype: DT_INT32<br>\ntensor_shape {<br>\ndim {<br>\nsize: 4<br>\n}<br>\ndim {<br>\nsize: 2<br>\n}<br>\n}<br>\ntensor_content: \"\\000\\000\\000\\000\\000\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\"<br>\n}<br>\n}<br>\n}<br>\n}<br>\nnode {<br>\nname: \"resnet_v1_101/Pad\"<br>\nop: \"Pad\"<br>\ninput: \"Placeholder\"<br>\ninput: \"resnet_v1_101/Pad/paddings\"<br>\nattr {<br>\nkey: \"T\"<br>\nvalue {<br>\ntype: DT_FLOAT<br>\n}<br>\n}<br>\nattr {<br>\nkey: \"Tpaddings\"<br>\nvalue {<br>\ntype: DT_INT32<br>\n}<br>\n}<br>\n}<br>\nnode {<br>\nname: \"resnet_v1_101/conv1/weights/Initializer/truncated_normal/shape\"<br>\nop: \"Const\"<br>\nattr {<br>\nkey: \"_class\"<br>\nvalue {<br>\nlist {<br>\ns: \"loc:@resnet_v1_101/conv1/weights\"<br>\n}<br>\n}<br>\n}<br>\nattr {<br>\nkey: \"dtype\"<br>\nvalue {<br>\ntype: DT_INT32<br>\n}<br>\n}<br>\nattr {<br>\nkey: \"value\"<br>\nvalue {<br>\ntensor {<br>\ndtype: DT_INT32<br>\ntensor_shape {<br>\ndim {<br>\nsize: 4<br>\n}<br>\n}<br>\ntensor_content: \"\\007\\000\\000\\000\\007\\000\\000\\000\\003\\000\\000\\000@\\000\\000\\000\"<br>\n}<br>\n}<br>\n}<br>\n}<br>\nnode {<br>\nname: \"resnet_v1_101/conv1/weights/Initializer/truncated_normal/mean\"<br>\nop: \"Const\"<br>\nattr {<br>\nkey: \"_class\"<br>\nvalue {<br>\nlist {<br>\ns: \"loc:@resnet_v1_101/conv1/weights\"<br>\n}<br>\n}<br>\n}</p>\n<p>I am getting tyhe below error :</p>\n<p><code>_result\" /home/arun/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: compiletime version 3.5 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.6 return f(*args, **kwds) /home/arun/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:34: FutureWarning: Conversion of the second argument of issubdtype from </code>float<code>to</code>np.floating<code>is deprecated. In future, it will be treated as</code>np.float64 == np.dtype(float).type<code>. from ._conv import register_converters as _register_converters Traceback (most recent call last): File \"optimize_for_inference.py\", line 146, in &lt;module&gt; app.run(main=main, argv=[sys.argv[0]] + unparsed) File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 48, in run _sys.exit(main(_sys.argv[:1] + flags_passthrough)) File \"optimize_for_inference.py\", line 90, in main FLAGS.output_names.split(\",\"), FLAGS.placeholder_type_enum) File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/optimize_for_inference_lib.py\", line 109, in optimize_for_inference placeholder_type_enum) File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/strip_unused_lib.py\", line 83, in strip_unused raise KeyError(\"The following input nodes were not found: %s\\n\" % not_found) KeyError: \"The following input nodes were not found: {'input'}\\n\" </code><br>\nPlease help me identifying what arguments you passed to run the script.</p>\n<p>Thank you.</p>\n<p>Kind Regards<br>\nArun</p>", "body_text": "Hi Maurya Ritesh,\nI am new to quantization scripts..\nI need you help, I am facing the same issue while running the optimize_for_inference.py script.\nMy arguments are as below:\npython optimize_for_inference.py   --input=res101_faster_rcnn_iter_5600.pb   --output=optimized_graph.pb   --input_names=\"input\"   --output_names=\"final_result\"\nMy pb file is based on Resnet-101. I am sharing my res101_faster_rcnn_iter_5600.ckpt.custom file below to see it's contents:\n`node {\nname: \"Placeholder\"\nop: \"Placeholder\"\nattr {\nkey: \"dtype\"\nvalue {\ntype: DT_FLOAT\n}\n}\nattr {\nkey: \"shape\"\nvalue {\nshape {\ndim {\nsize: 1\n}\ndim {\nsize: -1\n}\ndim {\nsize: -1\n}\ndim {\nsize: 3\n}\n}\n}\n}\n}\nnode {\nname: \"Placeholder_1\"\nop: \"Placeholder\"\nattr {\nkey: \"dtype\"\nvalue {\ntype: DT_FLOAT\n}\n}\nattr {\nkey: \"shape\"\nvalue {\nshape {\ndim {\nsize: 1\n}\ndim {\nsize: 3\n}\n}\n}\n}\n}\nnode {\nname: \"Placeholder_2\"\nop: \"Placeholder\"\nattr {\nkey: \"dtype\"\nvalue {\ntype: DT_FLOAT\n}\n}\nattr {\nkey: \"shape\"\nvalue {\nshape {\ndim {\nsize: -1\n}\ndim {\nsize: 5\n}\n}\n}\n}\n}\nnode {\nname: \"resnet_v1_101/Pad/paddings\"\nop: \"Const\"\nattr {\nkey: \"dtype\"\nvalue {\ntype: DT_INT32\n}\n}\nattr {\nkey: \"value\"\nvalue {\ntensor {\ndtype: DT_INT32\ntensor_shape {\ndim {\nsize: 4\n}\ndim {\nsize: 2\n}\n}\ntensor_content: \"\\000\\000\\000\\000\\000\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\"\n}\n}\n}\n}\nnode {\nname: \"resnet_v1_101/Pad\"\nop: \"Pad\"\ninput: \"Placeholder\"\ninput: \"resnet_v1_101/Pad/paddings\"\nattr {\nkey: \"T\"\nvalue {\ntype: DT_FLOAT\n}\n}\nattr {\nkey: \"Tpaddings\"\nvalue {\ntype: DT_INT32\n}\n}\n}\nnode {\nname: \"resnet_v1_101/conv1/weights/Initializer/truncated_normal/shape\"\nop: \"Const\"\nattr {\nkey: \"_class\"\nvalue {\nlist {\ns: \"loc:@resnet_v1_101/conv1/weights\"\n}\n}\n}\nattr {\nkey: \"dtype\"\nvalue {\ntype: DT_INT32\n}\n}\nattr {\nkey: \"value\"\nvalue {\ntensor {\ndtype: DT_INT32\ntensor_shape {\ndim {\nsize: 4\n}\n}\ntensor_content: \"\\007\\000\\000\\000\\007\\000\\000\\000\\003\\000\\000\\000@\\000\\000\\000\"\n}\n}\n}\n}\nnode {\nname: \"resnet_v1_101/conv1/weights/Initializer/truncated_normal/mean\"\nop: \"Const\"\nattr {\nkey: \"_class\"\nvalue {\nlist {\ns: \"loc:@resnet_v1_101/conv1/weights\"\n}\n}\n}\nI am getting tyhe below error :\n_result\" /home/arun/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: compiletime version 3.5 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.6 return f(*args, **kwds) /home/arun/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:34: FutureWarning: Conversion of the second argument of issubdtype from floattonp.floatingis deprecated. In future, it will be treated asnp.float64 == np.dtype(float).type. from ._conv import register_converters as _register_converters Traceback (most recent call last): File \"optimize_for_inference.py\", line 146, in <module> app.run(main=main, argv=[sys.argv[0]] + unparsed) File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 48, in run _sys.exit(main(_sys.argv[:1] + flags_passthrough)) File \"optimize_for_inference.py\", line 90, in main FLAGS.output_names.split(\",\"), FLAGS.placeholder_type_enum) File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/optimize_for_inference_lib.py\", line 109, in optimize_for_inference placeholder_type_enum) File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/strip_unused_lib.py\", line 83, in strip_unused raise KeyError(\"The following input nodes were not found: %s\\n\" % not_found) KeyError: \"The following input nodes were not found: {'input'}\\n\" \nPlease help me identifying what arguments you passed to run the script.\nThank you.\nKind Regards\nArun", "body": "Hi Maurya Ritesh,\r\nI am new to quantization scripts..\r\n\r\nI need you help, I am facing the same issue while running the optimize_for_inference.py script.\r\nMy arguments are as below: \r\n\r\n`python optimize_for_inference.py   --input=res101_faster_rcnn_iter_5600.pb   --output=optimized_graph.pb   --input_names=\"input\"   --output_names=\"final_result\"`\r\n\r\nMy pb file is based on Resnet-101. I am sharing my res101_faster_rcnn_iter_5600.ckpt.custom file below to see it's contents:\r\n\r\n`node {\r\n  name: \"Placeholder\"\r\n  op: \"Placeholder\"\r\n  attr {\r\n    key: \"dtype\"\r\n    value {\r\n      type: DT_FLOAT\r\n    }\r\n  }\r\n  attr {\r\n    key: \"shape\"\r\n    value {\r\n      shape {\r\n        dim {\r\n          size: 1\r\n        }\r\n        dim {\r\n          size: -1\r\n        }\r\n        dim {\r\n          size: -1\r\n        }\r\n        dim {\r\n          size: 3\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nnode {\r\n  name: \"Placeholder_1\"\r\n  op: \"Placeholder\"\r\n  attr {\r\n    key: \"dtype\"\r\n    value {\r\n      type: DT_FLOAT\r\n    }\r\n  }\r\n  attr {\r\n    key: \"shape\"\r\n    value {\r\n      shape {\r\n        dim {\r\n          size: 1\r\n        }\r\n        dim {\r\n          size: 3\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nnode {\r\n  name: \"Placeholder_2\"\r\n  op: \"Placeholder\"\r\n  attr {\r\n    key: \"dtype\"\r\n    value {\r\n      type: DT_FLOAT\r\n    }\r\n  }\r\n  attr {\r\n    key: \"shape\"\r\n    value {\r\n      shape {\r\n        dim {\r\n          size: -1\r\n        }\r\n        dim {\r\n          size: 5\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nnode {\r\n  name: \"resnet_v1_101/Pad/paddings\"\r\n  op: \"Const\"\r\n  attr {\r\n    key: \"dtype\"\r\n    value {\r\n      type: DT_INT32\r\n    }\r\n  }\r\n  attr {\r\n    key: \"value\"\r\n    value {\r\n      tensor {\r\n        dtype: DT_INT32\r\n        tensor_shape {\r\n          dim {\r\n            size: 4\r\n          }\r\n          dim {\r\n            size: 2\r\n          }\r\n        }\r\n        tensor_content: \"\\000\\000\\000\\000\\000\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\003\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\"\r\n      }\r\n    }\r\n  }\r\n}\r\nnode {\r\n  name: \"resnet_v1_101/Pad\"\r\n  op: \"Pad\"\r\n  input: \"Placeholder\"\r\n  input: \"resnet_v1_101/Pad/paddings\"\r\n  attr {\r\n    key: \"T\"\r\n    value {\r\n      type: DT_FLOAT\r\n    }\r\n  }\r\n  attr {\r\n    key: \"Tpaddings\"\r\n    value {\r\n      type: DT_INT32\r\n    }\r\n  }\r\n}\r\nnode {\r\n  name: \"resnet_v1_101/conv1/weights/Initializer/truncated_normal/shape\"\r\n  op: \"Const\"\r\n  attr {\r\n    key: \"_class\"\r\n    value {\r\n      list {\r\n        s: \"loc:@resnet_v1_101/conv1/weights\"\r\n      }\r\n    }\r\n  }\r\n  attr {\r\n    key: \"dtype\"\r\n    value {\r\n      type: DT_INT32\r\n    }\r\n  }\r\n  attr {\r\n    key: \"value\"\r\n    value {\r\n      tensor {\r\n        dtype: DT_INT32\r\n        tensor_shape {\r\n          dim {\r\n            size: 4\r\n          }\r\n        }\r\n        tensor_content: \"\\007\\000\\000\\000\\007\\000\\000\\000\\003\\000\\000\\000@\\000\\000\\000\"\r\n      }\r\n    }\r\n  }\r\n}\r\nnode {\r\n  name: \"resnet_v1_101/conv1/weights/Initializer/truncated_normal/mean\"\r\n  op: \"Const\"\r\n  attr {\r\n    key: \"_class\"\r\n    value {\r\n      list {\r\n        s: \"loc:@resnet_v1_101/conv1/weights\"\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\nI am getting tyhe below error : \r\n\r\n`_result\"\r\n/home/arun/anaconda3/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: compiletime version 3.5 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.6\r\n  return f(*args, **kwds)\r\n/home/arun/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:34: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\nTraceback (most recent call last):\r\n  File \"optimize_for_inference.py\", line 146, in <module>\r\n    app.run(main=main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"optimize_for_inference.py\", line 90, in main\r\n    FLAGS.output_names.split(\",\"), FLAGS.placeholder_type_enum)\r\n  File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/optimize_for_inference_lib.py\", line 109, in optimize_for_inference\r\n    placeholder_type_enum)\r\n  File \"/home/arun/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/strip_unused_lib.py\", line 83, in strip_unused\r\n    raise KeyError(\"The following input nodes were not found: %s\\n\" % not_found)\r\nKeyError: \"The following input nodes were not found: {'input'}\\n\"\r\n`\r\nPlease help me identifying what arguments you passed to run the script.\r\n\r\nThank you.\r\n\r\nKind Regards\r\nArun"}
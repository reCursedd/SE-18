{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8579", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8579/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8579/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8579/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8579", "id": 215707136, "node_id": "MDU6SXNzdWUyMTU3MDcxMzY=", "number": 8579, "title": "OutOfMemoryError: Java heap space on Tensorflow tests execution", "user": {"login": "Nayana-ibm", "id": 20816038, "node_id": "MDQ6VXNlcjIwODE2MDM4", "avatar_url": "https://avatars0.githubusercontent.com/u/20816038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nayana-ibm", "html_url": "https://github.com/Nayana-ibm", "followers_url": "https://api.github.com/users/Nayana-ibm/followers", "following_url": "https://api.github.com/users/Nayana-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/Nayana-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nayana-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nayana-ibm/subscriptions", "organizations_url": "https://api.github.com/users/Nayana-ibm/orgs", "repos_url": "https://api.github.com/users/Nayana-ibm/repos", "events_url": "https://api.github.com/users/Nayana-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/Nayana-ibm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-21T11:30:27Z", "updated_at": "2017-03-22T17:51:52Z", "closed_at": "2017-03-22T17:51:52Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Executing Tensorflow test suite using command:</p>\n<pre><code>bazel test //tensorflow/...\n</code></pre>\n<p>throws Out of memory issue:</p>\n<pre><code>INFO: Found 1886 targets and 1155 test targets...\nINFO: Elapsed time: 291.775s, Critical Path: 0.91s\njava.lang.OutOfMemoryError: Java heap space\n        at com.google.devtools.build.skyframe.SkyKey.create(SkyKey.java:57)\n        at com.google.devtools.build.lib.skyframe.ArtifactSkyKey.key(ArtifactSkyKey.java:43)\n        at com.google.devtools.build.lib.skyframe.ActionExecutionFunction.toKeys(ActionExecutionFunction.java:576)\n        at com.google.devtools.build.lib.skyframe.ActionExecutionFunction.compute(ActionExecutionFunction.java:158)\n        at com.google.devtools.build.skyframe.ParallelEvaluator$Evaluate.run(ParallelEvaluator.java:370)\n        at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:501)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nJava heap space\n\nbazel ran out of memory and crashed.\n</code></pre>\n<p>I have tried below options still issue persists.</p>\n<blockquote>\n<p>export _JAVA_OPTIONS=\"-Xms1024m -Xmx1024m\"</p>\n<p>export JVM_ARGS=\"-Xmx1024m -XX:MaxPermSize=256m\"</p>\n<p>export JVM_ARGS=\"-XX:PermSize=64M -XX:MaxPermSize=256m\"</p>\n</blockquote>\n<p>Also, changed the file from bazel code: scripts/bootstrap/compile.sh</p>\n<p><code>\" run \"${JAVAC}\" -J-Xms1g -J-Xmx1g -classpath \"${classpath}\" -sourcepath \"${sourcepath}\"</code>\"</p>\n<p>Machine configurations: Ubuntu distribution, openjdk8, RAM 16G<br>\nTensorFlow : master</p>", "body_text": "Executing Tensorflow test suite using command:\nbazel test //tensorflow/...\n\nthrows Out of memory issue:\nINFO: Found 1886 targets and 1155 test targets...\nINFO: Elapsed time: 291.775s, Critical Path: 0.91s\njava.lang.OutOfMemoryError: Java heap space\n        at com.google.devtools.build.skyframe.SkyKey.create(SkyKey.java:57)\n        at com.google.devtools.build.lib.skyframe.ArtifactSkyKey.key(ArtifactSkyKey.java:43)\n        at com.google.devtools.build.lib.skyframe.ActionExecutionFunction.toKeys(ActionExecutionFunction.java:576)\n        at com.google.devtools.build.lib.skyframe.ActionExecutionFunction.compute(ActionExecutionFunction.java:158)\n        at com.google.devtools.build.skyframe.ParallelEvaluator$Evaluate.run(ParallelEvaluator.java:370)\n        at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:501)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nJava heap space\n\nbazel ran out of memory and crashed.\n\nI have tried below options still issue persists.\n\nexport _JAVA_OPTIONS=\"-Xms1024m -Xmx1024m\"\nexport JVM_ARGS=\"-Xmx1024m -XX:MaxPermSize=256m\"\nexport JVM_ARGS=\"-XX:PermSize=64M -XX:MaxPermSize=256m\"\n\nAlso, changed the file from bazel code: scripts/bootstrap/compile.sh\n\" run \"${JAVAC}\" -J-Xms1g -J-Xmx1g -classpath \"${classpath}\" -sourcepath \"${sourcepath}\"\"\nMachine configurations: Ubuntu distribution, openjdk8, RAM 16G\nTensorFlow : master", "body": "Executing Tensorflow test suite using command: \r\n\r\n    bazel test //tensorflow/...\r\n\r\nthrows Out of memory issue: \r\n\r\n    INFO: Found 1886 targets and 1155 test targets...\r\n    INFO: Elapsed time: 291.775s, Critical Path: 0.91s\r\n    java.lang.OutOfMemoryError: Java heap space\r\n            at com.google.devtools.build.skyframe.SkyKey.create(SkyKey.java:57)\r\n            at com.google.devtools.build.lib.skyframe.ArtifactSkyKey.key(ArtifactSkyKey.java:43)\r\n            at com.google.devtools.build.lib.skyframe.ActionExecutionFunction.toKeys(ActionExecutionFunction.java:576)\r\n            at com.google.devtools.build.lib.skyframe.ActionExecutionFunction.compute(ActionExecutionFunction.java:158)\r\n            at com.google.devtools.build.skyframe.ParallelEvaluator$Evaluate.run(ParallelEvaluator.java:370)\r\n            at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:501)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n            at java.lang.Thread.run(Thread.java:745)\r\n    Java heap space\r\n    \r\n    bazel ran out of memory and crashed.\r\n\r\n\r\nI have tried below options still issue persists. \r\n\r\n> export _JAVA_OPTIONS=\"-Xms1024m -Xmx1024m\"\r\n> \r\n> export JVM_ARGS=\"-Xmx1024m -XX:MaxPermSize=256m\"\r\n> \r\n> export JVM_ARGS=\"-XX:PermSize=64M -XX:MaxPermSize=256m\"\r\n\r\nAlso, changed the file from bazel code: scripts/bootstrap/compile.sh\r\n\r\n`\" run \"${JAVAC}\" -J-Xms1g -J-Xmx1g -classpath \"${classpath}\" -sourcepath \"${sourcepath}\"`\"\r\n\r\n\r\nMachine configurations: Ubuntu distribution, openjdk8, RAM 16G\r\nTensorFlow : master\r\n\r\n"}
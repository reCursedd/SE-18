{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20070", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20070/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20070/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20070/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20070", "id": 332938636, "node_id": "MDU6SXNzdWUzMzI5Mzg2MzY=", "number": 20070, "title": "tf.set_shape bug for 3D data space?", "user": {"login": "kaedyn", "id": 19757981, "node_id": "MDQ6VXNlcjE5NzU3OTgx", "avatar_url": "https://avatars3.githubusercontent.com/u/19757981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaedyn", "html_url": "https://github.com/kaedyn", "followers_url": "https://api.github.com/users/kaedyn/followers", "following_url": "https://api.github.com/users/kaedyn/following{/other_user}", "gists_url": "https://api.github.com/users/kaedyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaedyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaedyn/subscriptions", "organizations_url": "https://api.github.com/users/kaedyn/orgs", "repos_url": "https://api.github.com/users/kaedyn/repos", "events_url": "https://api.github.com/users/kaedyn/events{/privacy}", "received_events_url": "https://api.github.com/users/kaedyn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-06-15T23:20:49Z", "updated_at": "2018-08-17T18:59:10Z", "closed_at": "2018-08-17T18:56:36Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>:</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Linux Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.8</li>\n<li><strong>Python version</strong>: 3.6.2</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:</li>\n<li><strong>CUDA/cuDNN version</strong>: CUDA 9.0/cuDNN 7.1.4</li>\n<li><strong>GPU model and memory</strong>: NVIDIA Tesla K80 on GCP</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Have bugs in TF_GraphSetTensorShape_wrapper function when dealing with high-dimensional shapes.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/19757981/41492650-59506ac0-70f8-11e8-95dd-9f0d3c29d071.png\"><img width=\"858\" alt=\"error1\" src=\"https://user-images.githubusercontent.com/19757981/41492650-59506ac0-70f8-11e8-95dd-9f0d3c29d071.png\" style=\"max-width:100%;\"></a></p>\n<p>In my code, the images_in is a tensor which represents a 3D model. I use tf.set_shape but after I print out the result, the shape is wrong. I set num_channels as 1 and it also shows 1 when I print it out. But the second shape of the images_in is 8 which not equals to num_channels.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/19757981/41492752-1109bd7e-70f9-11e8-80bf-926b8582a223.png\"><img src=\"https://user-images.githubusercontent.com/19757981/41492752-1109bd7e-70f9-11e8-80bf-926b8582a223.png\" alt=\"error4\" style=\"max-width:100%;\"></a></p>\n<p>I looked into tf.set_shape() below and found if I use unknown shape, it will call a function called: TF_GraphSetTensorShape_wrapper.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/19757981/41492836-a849466e-70f9-11e8-9ce1-7b4af79ccb66.png\"><img width=\"505\" alt=\"error2\" src=\"https://user-images.githubusercontent.com/19757981/41492836-a849466e-70f9-11e8-9ce1-7b4af79ccb66.png\" style=\"max-width:100%;\"></a></p>\n<p>But I cannot see what this function does exactly since it might be a c-embedded function.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/19757981/41492962-a1e25d32-70fa-11e8-9271-4f38627f61c3.png\"><img width=\"742\" alt=\"error3\" src=\"https://user-images.githubusercontent.com/19757981/41492962-a1e25d32-70fa-11e8-9271-4f38627f61c3.png\" style=\"max-width:100%;\"></a></p>\n<p>I have tried this function in 2D data space if I use images_in.set_shape([None, num_channels, resolution, resolution]) and the shapes are correct.</p>\n<p>So I assume there might be something wrong with TF_GraphSetTensorShape_wrapper function when dealing with high-dimensional shapes? Or does it hard code somewhere and cause the problem?</p>\n<p>Thanks.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\nTensorFlow installed from (source or binary):\nTensorFlow version (use command below): 1.8\nPython version: 3.6.2\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source):\nCUDA/cuDNN version: CUDA 9.0/cuDNN 7.1.4\nGPU model and memory: NVIDIA Tesla K80 on GCP\nExact command to reproduce:\n\nDescribe the problem\nHave bugs in TF_GraphSetTensorShape_wrapper function when dealing with high-dimensional shapes.\n\nIn my code, the images_in is a tensor which represents a 3D model. I use tf.set_shape but after I print out the result, the shape is wrong. I set num_channels as 1 and it also shows 1 when I print it out. But the second shape of the images_in is 8 which not equals to num_channels.\n\nI looked into tf.set_shape() below and found if I use unknown shape, it will call a function called: TF_GraphSetTensorShape_wrapper.\n\nBut I cannot see what this function does exactly since it might be a c-embedded function.\n\nI have tried this function in 2D data space if I use images_in.set_shape([None, num_channels, resolution, resolution]) and the shapes are correct.\nSo I assume there might be something wrong with TF_GraphSetTensorShape_wrapper function when dealing with high-dimensional shapes? Or does it hard code somewhere and cause the problem?\nThanks.", "body": "\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**:\r\n- **TensorFlow version (use command below)**: 1.8\r\n- **Python version**: 3.6.2\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: CUDA 9.0/cuDNN 7.1.4\r\n- **GPU model and memory**: NVIDIA Tesla K80 on GCP\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\n\r\nHave bugs in TF_GraphSetTensorShape_wrapper function when dealing with high-dimensional shapes.\r\n\r\n<img width=\"858\" alt=\"error1\" src=\"https://user-images.githubusercontent.com/19757981/41492650-59506ac0-70f8-11e8-95dd-9f0d3c29d071.png\">\r\n\r\nIn my code, the images_in is a tensor which represents a 3D model. I use tf.set_shape but after I print out the result, the shape is wrong. I set num_channels as 1 and it also shows 1 when I print it out. But the second shape of the images_in is 8 which not equals to num_channels. \r\n\r\n![error4](https://user-images.githubusercontent.com/19757981/41492752-1109bd7e-70f9-11e8-80bf-926b8582a223.png)\r\n\r\nI looked into tf.set_shape() below and found if I use unknown shape, it will call a function called: TF_GraphSetTensorShape_wrapper. \r\n\r\n<img width=\"505\" alt=\"error2\" src=\"https://user-images.githubusercontent.com/19757981/41492836-a849466e-70f9-11e8-9ce1-7b4af79ccb66.png\">\r\n\r\nBut I cannot see what this function does exactly since it might be a c-embedded function.\r\n\r\n<img width=\"742\" alt=\"error3\" src=\"https://user-images.githubusercontent.com/19757981/41492962-a1e25d32-70fa-11e8-9271-4f38627f61c3.png\">\r\n\r\nI have tried this function in 2D data space if I use images_in.set_shape([None, num_channels, resolution, resolution]) and the shapes are correct.\r\n\r\nSo I assume there might be something wrong with TF_GraphSetTensorShape_wrapper function when dealing with high-dimensional shapes? Or does it hard code somewhere and cause the problem?\r\n\r\nThanks.\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/349178594", "html_url": "https://github.com/tensorflow/tensorflow/issues/13087#issuecomment-349178594", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13087", "id": 349178594, "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTE3ODU5NA==", "user": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-05T02:51:16Z", "updated_at": "2017-12-05T02:51:16Z", "author_association": "MEMBER", "body_html": "<p>Fields are only printed if they are not zero, so if it doesn't appear, it's zero.</p>\n<p>To see this, note the protobuf is printed at <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/framework/log_memory.cc#L36\">this line</a>. <code>ProtoShortDebugString</code> is defined in a generated file, which you can see after compiling tensorflow with <code>less bazel-genfiles/tensorflow/core/framework/log_memory.pb_text.cc</code>. That file has the function</p>\n<div class=\"highlight highlight-source-c++\"><pre><span class=\"pl-k\">void</span> <span class=\"pl-en\">AppendProtoDebugString</span>(\n    ::tensorflow::strings::ProtoTextOutput* o,\n    <span class=\"pl-k\">const</span> ::tensorflow::MemoryLogTensorDeallocation&amp; msg) {\n  o-&gt;<span class=\"pl-c1\">AppendNumericIfNotZero</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>allocation_id<span class=\"pl-pds\">\"</span></span>, msg.<span class=\"pl-c1\">allocation_id</span>());\n  o-&gt;<span class=\"pl-c1\">AppendStringIfNotEmpty</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>allocator_name<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">ProtobufStringToString</span>(msg.<span class=\"pl-c1\">allocator_name</span>()));\n}</pre></div>", "body_text": "Fields are only printed if they are not zero, so if it doesn't appear, it's zero.\nTo see this, note the protobuf is printed at this line. ProtoShortDebugString is defined in a generated file, which you can see after compiling tensorflow with less bazel-genfiles/tensorflow/core/framework/log_memory.pb_text.cc. That file has the function\nvoid AppendProtoDebugString(\n    ::tensorflow::strings::ProtoTextOutput* o,\n    const ::tensorflow::MemoryLogTensorDeallocation& msg) {\n  o->AppendNumericIfNotZero(\"allocation_id\", msg.allocation_id());\n  o->AppendStringIfNotEmpty(\"allocator_name\", ProtobufStringToString(msg.allocator_name()));\n}", "body": "Fields are only printed if they are not zero, so if it doesn't appear, it's zero.\r\n\r\nTo see this, note the protobuf is printed at [this line](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/framework/log_memory.cc#L36). `ProtoShortDebugString` is defined in a generated file, which you can see after compiling tensorflow with `less bazel-genfiles/tensorflow/core/framework/log_memory.pb_text.cc`. That file has the function\r\n\r\n```c++\r\nvoid AppendProtoDebugString(\r\n    ::tensorflow::strings::ProtoTextOutput* o,\r\n    const ::tensorflow::MemoryLogTensorDeallocation& msg) {\r\n  o->AppendNumericIfNotZero(\"allocation_id\", msg.allocation_id());\r\n  o->AppendStringIfNotEmpty(\"allocator_name\", ProtobufStringToString(msg.allocator_name()));\r\n}\r\n```"}
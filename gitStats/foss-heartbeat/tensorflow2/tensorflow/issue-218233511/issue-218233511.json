{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8842", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8842/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8842/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8842/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8842", "id": 218233511, "node_id": "MDU6SXNzdWUyMTgyMzM1MTE=", "number": 8842, "title": "AttributeError: 'Tensor' object has no attribute 'get' at DynamicRnnEstimator.fit(...). The same code works well with LinearRegressor.", "user": {"login": "snarb", "id": 4518007, "node_id": "MDQ6VXNlcjQ1MTgwMDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/4518007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snarb", "html_url": "https://github.com/snarb", "followers_url": "https://api.github.com/users/snarb/followers", "following_url": "https://api.github.com/users/snarb/following{/other_user}", "gists_url": "https://api.github.com/users/snarb/gists{/gist_id}", "starred_url": "https://api.github.com/users/snarb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snarb/subscriptions", "organizations_url": "https://api.github.com/users/snarb/orgs", "repos_url": "https://api.github.com/users/snarb/repos", "events_url": "https://api.github.com/users/snarb/events{/privacy}", "received_events_url": "https://api.github.com/users/snarb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "jamieas", "id": 25069093, "node_id": "MDQ6VXNlcjI1MDY5MDkz", "avatar_url": "https://avatars0.githubusercontent.com/u/25069093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamieas", "html_url": "https://github.com/jamieas", "followers_url": "https://api.github.com/users/jamieas/followers", "following_url": "https://api.github.com/users/jamieas/following{/other_user}", "gists_url": "https://api.github.com/users/jamieas/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamieas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamieas/subscriptions", "organizations_url": "https://api.github.com/users/jamieas/orgs", "repos_url": "https://api.github.com/users/jamieas/repos", "events_url": "https://api.github.com/users/jamieas/events{/privacy}", "received_events_url": "https://api.github.com/users/jamieas/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jamieas", "id": 25069093, "node_id": "MDQ6VXNlcjI1MDY5MDkz", "avatar_url": "https://avatars0.githubusercontent.com/u/25069093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamieas", "html_url": "https://github.com/jamieas", "followers_url": "https://api.github.com/users/jamieas/followers", "following_url": "https://api.github.com/users/jamieas/following{/other_user}", "gists_url": "https://api.github.com/users/jamieas/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamieas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamieas/subscriptions", "organizations_url": "https://api.github.com/users/jamieas/orgs", "repos_url": "https://api.github.com/users/jamieas/repos", "events_url": "https://api.github.com/users/jamieas/events{/privacy}", "received_events_url": "https://api.github.com/users/jamieas/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2017-03-30T15:19:54Z", "updated_at": "2017-04-04T17:46:08Z", "closed_at": "2017-04-04T17:46:08Z", "author_association": "NONE", "body_html": "<p>TensorFlow version: <strong>1.1</strong></p>\n<p>The code:</p>\n<pre><code>import random\nimport tensorflow as tf\nfrom tensorflow.contrib.learn.python.learn.estimators import constants\nfrom tensorflow.contrib.learn.python.learn.estimators.dynamic_rnn_estimator import PredictionType\n\nxData = []\nyData = []\nfor _ in range(10000):\n    x = random.random()\n    xData.append(x)\n    y = 2 * x\n    yData.append(y)\n\n\nxc = tf.contrib.layers.real_valued_column(\"\")\nestimator = tf.contrib.learn.DynamicRnnEstimator(problem_type = constants.ProblemType.LINEAR_REGRESSION,\n                                                 prediction_type = PredictionType.SINGLE_VALUE,\n                                                 sequence_feature_columns = [xc],\n                                                 context_feature_columns = None,\n                                                 num_units = 5,\n                                                 cell_type = 'lstm', \n                                                 optimizer = 'SGD',\n                                                 learning_rate = '0.1')\n\ndef get_train_inputs():\n  x = tf.constant(xData)\n  y = tf.constant(yData)\n\n  return x, y\n\nestimator.fit(input_fn=get_train_inputs, steps=1000) \n</code></pre>\n<blockquote>\n<p>Got:  AttributeError: 'Tensor' object has no attribute 'get' here</p>\n</blockquote>\n<p>The same code works for <strong>LinearRegressor</strong> instead of <strong>DynamicRnnEstimator</strong>.</p>\n<blockquote>\n<p>WARNING:tensorflow:From E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dynamic_rnn_estimator.py:724: regression_target (from tensorflow.contrib.layers.python.layers.target_column) is deprecated and will be removed after 2016-11-12.<br>\nInstructions for updating:<br>\nThis file will be removed after the deprecation date.Please switch to third_party/tensorflow/contrib/learn/python/learn/estimators/head.py<br>\nWARNING:tensorflow:Using temporary folder as model directory: C:\\Users\\pavel\\AppData\\Local\\Temp\\tmpzy68t_iw<br>\nTraceback (most recent call last):<br>\nFile \"C:/Users/pavel/PycharmProjects/rnnEstimator/main.py\", line 31, in <br>\nestimator.fit(input_fn=get_train_inputs, steps=1000)<br>\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 281, in new_func<br>\nreturn func(*args, **kwargs)<br>\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 430, in fit<br>\nloss = self._train_model(input_fn=input_fn, hooks=hooks)<br>\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 927, in _train_model<br>\nmodel_fn_ops = self._get_train_ops(features, labels)<br>\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1132, in _get_train_ops<br>\nreturn self._call_model_fn(features, labels, model_fn_lib.ModeKeys.TRAIN)<br>\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1103, in _call_model_fn<br>\nmodel_fn_results = self._model_fn(features, labels, **kwargs)<br>\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dynamic_rnn_estimator.py\", line 516, in _dynamic_rnn_model_fn<br>\nsequence_length = features.get(sequence_length_key)<br>\nAttributeError: 'Tensor' object has no attribute 'get'</p>\n</blockquote>", "body_text": "TensorFlow version: 1.1\nThe code:\nimport random\nimport tensorflow as tf\nfrom tensorflow.contrib.learn.python.learn.estimators import constants\nfrom tensorflow.contrib.learn.python.learn.estimators.dynamic_rnn_estimator import PredictionType\n\nxData = []\nyData = []\nfor _ in range(10000):\n    x = random.random()\n    xData.append(x)\n    y = 2 * x\n    yData.append(y)\n\n\nxc = tf.contrib.layers.real_valued_column(\"\")\nestimator = tf.contrib.learn.DynamicRnnEstimator(problem_type = constants.ProblemType.LINEAR_REGRESSION,\n                                                 prediction_type = PredictionType.SINGLE_VALUE,\n                                                 sequence_feature_columns = [xc],\n                                                 context_feature_columns = None,\n                                                 num_units = 5,\n                                                 cell_type = 'lstm', \n                                                 optimizer = 'SGD',\n                                                 learning_rate = '0.1')\n\ndef get_train_inputs():\n  x = tf.constant(xData)\n  y = tf.constant(yData)\n\n  return x, y\n\nestimator.fit(input_fn=get_train_inputs, steps=1000) \n\n\nGot:  AttributeError: 'Tensor' object has no attribute 'get' here\n\nThe same code works for LinearRegressor instead of DynamicRnnEstimator.\n\nWARNING:tensorflow:From E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dynamic_rnn_estimator.py:724: regression_target (from tensorflow.contrib.layers.python.layers.target_column) is deprecated and will be removed after 2016-11-12.\nInstructions for updating:\nThis file will be removed after the deprecation date.Please switch to third_party/tensorflow/contrib/learn/python/learn/estimators/head.py\nWARNING:tensorflow:Using temporary folder as model directory: C:\\Users\\pavel\\AppData\\Local\\Temp\\tmpzy68t_iw\nTraceback (most recent call last):\nFile \"C:/Users/pavel/PycharmProjects/rnnEstimator/main.py\", line 31, in \nestimator.fit(input_fn=get_train_inputs, steps=1000)\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 281, in new_func\nreturn func(*args, **kwargs)\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 430, in fit\nloss = self._train_model(input_fn=input_fn, hooks=hooks)\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 927, in _train_model\nmodel_fn_ops = self._get_train_ops(features, labels)\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1132, in _get_train_ops\nreturn self._call_model_fn(features, labels, model_fn_lib.ModeKeys.TRAIN)\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1103, in _call_model_fn\nmodel_fn_results = self._model_fn(features, labels, **kwargs)\nFile \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dynamic_rnn_estimator.py\", line 516, in _dynamic_rnn_model_fn\nsequence_length = features.get(sequence_length_key)\nAttributeError: 'Tensor' object has no attribute 'get'", "body": "TensorFlow version: **1.1**\r\n\r\nThe code:\r\n\r\n```\r\nimport random\r\nimport tensorflow as tf\r\nfrom tensorflow.contrib.learn.python.learn.estimators import constants\r\nfrom tensorflow.contrib.learn.python.learn.estimators.dynamic_rnn_estimator import PredictionType\r\n\r\nxData = []\r\nyData = []\r\nfor _ in range(10000):\r\n    x = random.random()\r\n    xData.append(x)\r\n    y = 2 * x\r\n    yData.append(y)\r\n\r\n\r\nxc = tf.contrib.layers.real_valued_column(\"\")\r\nestimator = tf.contrib.learn.DynamicRnnEstimator(problem_type = constants.ProblemType.LINEAR_REGRESSION,\r\n                                                 prediction_type = PredictionType.SINGLE_VALUE,\r\n                                                 sequence_feature_columns = [xc],\r\n                                                 context_feature_columns = None,\r\n                                                 num_units = 5,\r\n                                                 cell_type = 'lstm', \r\n                                                 optimizer = 'SGD',\r\n                                                 learning_rate = '0.1')\r\n\r\ndef get_train_inputs():\r\n  x = tf.constant(xData)\r\n  y = tf.constant(yData)\r\n\r\n  return x, y\r\n\r\nestimator.fit(input_fn=get_train_inputs, steps=1000) \r\n```\r\n\r\n> Got:  AttributeError: 'Tensor' object has no attribute 'get' here\r\n\r\n\r\nThe same code works for **LinearRegressor** instead of **DynamicRnnEstimator**.\r\n\r\n> \r\n> WARNING:tensorflow:From E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dynamic_rnn_estimator.py:724: regression_target (from tensorflow.contrib.layers.python.layers.target_column) is deprecated and will be removed after 2016-11-12.\r\n> Instructions for updating:\r\n> This file will be removed after the deprecation date.Please switch to third_party/tensorflow/contrib/learn/python/learn/estimators/head.py\r\n> WARNING:tensorflow:Using temporary folder as model directory: C:\\Users\\pavel\\AppData\\Local\\Temp\\tmpzy68t_iw\r\n> Traceback (most recent call last):\r\n>   File \"C:/Users/pavel/PycharmProjects/rnnEstimator/main.py\", line 31, in <module>\r\n>     estimator.fit(input_fn=get_train_inputs, steps=1000)\r\n>   File \"E:\\Python35\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 281, in new_func\r\n>     return func(*args, **kwargs)\r\n>   File \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 430, in fit\r\n>     loss = self._train_model(input_fn=input_fn, hooks=hooks)\r\n>   File \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 927, in _train_model\r\n>     model_fn_ops = self._get_train_ops(features, labels)\r\n>   File \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1132, in _get_train_ops\r\n>     return self._call_model_fn(features, labels, model_fn_lib.ModeKeys.TRAIN)\r\n>   File \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\estimator.py\", line 1103, in _call_model_fn\r\n>     model_fn_results = self._model_fn(features, labels, **kwargs)\r\n>   File \"E:\\Python35\\lib\\site-packages\\tensorflow\\contrib\\learn\\python\\learn\\estimators\\dynamic_rnn_estimator.py\", line 516, in _dynamic_rnn_model_fn\r\n>     sequence_length = features.get(sequence_length_key)\r\n> AttributeError: 'Tensor' object has no attribute 'get'"}
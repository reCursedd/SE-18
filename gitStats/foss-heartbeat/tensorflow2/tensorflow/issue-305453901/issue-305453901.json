{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17734", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17734/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17734/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17734/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17734", "id": 305453901, "node_id": "MDU6SXNzdWUzMDU0NTM5MDE=", "number": 17734, "title": "tf.flags cannot handle options contain hyphen in the middle.", "user": {"login": "nagachika", "id": 21976, "node_id": "MDQ6VXNlcjIxOTc2", "avatar_url": "https://avatars1.githubusercontent.com/u/21976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagachika", "html_url": "https://github.com/nagachika", "followers_url": "https://api.github.com/users/nagachika/followers", "following_url": "https://api.github.com/users/nagachika/following{/other_user}", "gists_url": "https://api.github.com/users/nagachika/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagachika/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagachika/subscriptions", "organizations_url": "https://api.github.com/users/nagachika/orgs", "repos_url": "https://api.github.com/users/nagachika/repos", "events_url": "https://api.github.com/users/nagachika/events{/privacy}", "received_events_url": "https://api.github.com/users/nagachika/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-03-15T08:20:10Z", "updated_at": "2018-04-02T19:59:50Z", "closed_at": "2018-04-02T19:59:50Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: yes</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Google Cloud ML Engine (maybe Ubuntu)</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: Pre installed on Google Cloud ML Engine</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.5.0</li>\n<li><strong>Python version</strong>: 2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>:NA</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>:NA</li>\n<li><strong>CUDA/cuDNN version</strong>:NA</li>\n<li><strong>GPU model and memory</strong>:NA</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>According to the documentation of Google Cloud ML Engine [1], the ML Engine pass the option <code>--job-dir</code> to the python process and the program should be able to handle <code>--job-dir</code> option.</p>\n<p>The snippet shown in the next section can run successfully with TensorFlow 1.4.1 but failed with 1.5.0, 1.6.0, 1.7.0.rc0.</p>\n<p>As a result, I cannot use runtime version 1.5 on Cloud ML Engine with my package using <code>tf.flags</code> to handle option <code>--job-dir</code>.<br>\nThe support of TensorFlow 1.5.0 on Cloud ML Engine training was released officially just few days before [2].</p>\n<h3>Source code / logs</h3>\n<p>Here is a snippet to reproduce the issue.</p>\n<pre><code>import tensorflow as tf\n\ntf.flags.DEFINE_string(\"job-dir\", \"default\", \"job dir\")\n\ndef main(argv):\n    print(tf.__version__)\n    print(tf.flags.FLAGS.job_dir)\n\ntf.app.run()\n</code></pre>\n<p>Here is the backtrace from :</p>\n<pre><code>&gt; python snippent.py --job-dir=foo\n1.5.0\nTraceback (most recent call last):\n  File \"snippet.py\", line 9, in &lt;module&gt;\n    tf.app.run()\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 124, in run\n    _sys.exit(main(argv))\n  File \"hoge.py\", line 7, in main\n    print(tf.flags.FLAGS.job_dir)\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/tensorflow/python/platform/flags.py\", line 85, in __getattr__\n    return wrapped.__getattr__(name)\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/absl/flags/_flagvalues.py\", line 470, in __getattr__\n    raise AttributeError(name)\nAttributeError: job_dir\n</code></pre>\n<ol>\n<li><a href=\"https://cloud.google.com/ml-engine/docs/training-overview#job_configuration_parameters\" rel=\"nofollow\">https://cloud.google.com/ml-engine/docs/training-overview#job_configuration_parameters</a></li>\n<li><a href=\"https://cloud.google.com/ml-engine/docs/runtime-version-list\" rel=\"nofollow\">https://cloud.google.com/ml-engine/docs/runtime-version-list</a></li>\n</ol>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Cloud ML Engine (maybe Ubuntu)\nTensorFlow installed from (source or binary): Pre installed on Google Cloud ML Engine\nTensorFlow version (use command below): 1.5.0\nPython version: 2.7\nBazel version (if compiling from source):NA\nGCC/Compiler version (if compiling from source):NA\nCUDA/cuDNN version:NA\nGPU model and memory:NA\nExact command to reproduce:\n\nDescribe the problem\nAccording to the documentation of Google Cloud ML Engine [1], the ML Engine pass the option --job-dir to the python process and the program should be able to handle --job-dir option.\nThe snippet shown in the next section can run successfully with TensorFlow 1.4.1 but failed with 1.5.0, 1.6.0, 1.7.0.rc0.\nAs a result, I cannot use runtime version 1.5 on Cloud ML Engine with my package using tf.flags to handle option --job-dir.\nThe support of TensorFlow 1.5.0 on Cloud ML Engine training was released officially just few days before [2].\nSource code / logs\nHere is a snippet to reproduce the issue.\nimport tensorflow as tf\n\ntf.flags.DEFINE_string(\"job-dir\", \"default\", \"job dir\")\n\ndef main(argv):\n    print(tf.__version__)\n    print(tf.flags.FLAGS.job_dir)\n\ntf.app.run()\n\nHere is the backtrace from :\n> python snippent.py --job-dir=foo\n1.5.0\nTraceback (most recent call last):\n  File \"snippet.py\", line 9, in <module>\n    tf.app.run()\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 124, in run\n    _sys.exit(main(argv))\n  File \"hoge.py\", line 7, in main\n    print(tf.flags.FLAGS.job_dir)\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/tensorflow/python/platform/flags.py\", line 85, in __getattr__\n    return wrapped.__getattr__(name)\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/absl/flags/_flagvalues.py\", line 470, in __getattr__\n    raise AttributeError(name)\nAttributeError: job_dir\n\n\nhttps://cloud.google.com/ml-engine/docs/training-overview#job_configuration_parameters\nhttps://cloud.google.com/ml-engine/docs/runtime-version-list", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Google Cloud ML Engine (maybe Ubuntu)\r\n- **TensorFlow installed from (source or binary)**: Pre installed on Google Cloud ML Engine\r\n- **TensorFlow version (use command below)**: 1.5.0\r\n- **Python version**: 2.7\r\n- **Bazel version (if compiling from source)**:NA\r\n- **GCC/Compiler version (if compiling from source)**:NA\r\n- **CUDA/cuDNN version**:NA\r\n- **GPU model and memory**:NA\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\n\r\nAccording to the documentation of Google Cloud ML Engine [1], the ML Engine pass the option `--job-dir` to the python process and the program should be able to handle `--job-dir` option.\r\n\r\nThe snippet shown in the next section can run successfully with TensorFlow 1.4.1 but failed with 1.5.0, 1.6.0, 1.7.0.rc0.\r\n\r\nAs a result, I cannot use runtime version 1.5 on Cloud ML Engine with my package using `tf.flags` to handle option `--job-dir`.\r\nThe support of TensorFlow 1.5.0 on Cloud ML Engine training was released officially just few days before [2].\r\n\r\n\r\n### Source code / logs\r\n\r\nHere is a snippet to reproduce the issue.\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\ntf.flags.DEFINE_string(\"job-dir\", \"default\", \"job dir\")\r\n\r\ndef main(argv):\r\n    print(tf.__version__)\r\n    print(tf.flags.FLAGS.job_dir)\r\n\r\ntf.app.run()\r\n```\r\n\r\nHere is the backtrace from :\r\n\r\n```\r\n> python snippent.py --job-dir=foo\r\n1.5.0\r\nTraceback (most recent call last):\r\n  File \"snippet.py\", line 9, in <module>\r\n    tf.app.run()\r\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 124, in run\r\n    _sys.exit(main(argv))\r\n  File \"hoge.py\", line 7, in main\r\n    print(tf.flags.FLAGS.job_dir)\r\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/tensorflow/python/platform/flags.py\", line 85, in __getattr__\r\n    return wrapped.__getattr__(name)\r\n  File \"/Users/chikanaga/.anyenv/envs/pyenv/versions/2.7.12/lib/python2.7/site-packages/absl/flags/_flagvalues.py\", line 470, in __getattr__\r\n    raise AttributeError(name)\r\nAttributeError: job_dir\r\n```\r\n\r\n1. https://cloud.google.com/ml-engine/docs/training-overview#job_configuration_parameters\r\n2. https://cloud.google.com/ml-engine/docs/runtime-version-list"}
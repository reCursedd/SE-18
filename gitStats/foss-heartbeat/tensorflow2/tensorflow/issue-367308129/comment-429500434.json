{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/429500434", "html_url": "https://github.com/tensorflow/tensorflow/issues/22772#issuecomment-429500434", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22772", "id": 429500434, "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTUwMDQzNA==", "user": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-13T01:29:19Z", "updated_at": "2018-10-13T01:45:42Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=386088\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/choongng\">@choongng</a> I ran the above code snippet on TPU without running into any errors. You should see output like this:</p>\n<pre><code>INFO:tensorflow:Connecting to: grpc://10.10.45.90:7980\nTrain on 60000 samples, validate on 10000 samples\nEpoch 1/12\nINFO:tensorflow:New input shapes; (re-)compiling: mode=train, [TensorSpec(shape=(32, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(32, 10), dtype=tf.float32, name=u'dense_1_target_10')]\nINFO:tensorflow:Overriding default placeholder.\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\nINFO:tensorflow:Get updates: Tensor(\"loss/mul:0\", shape=(), dtype=float32)\nINFO:tensorflow:Started compiling\nINFO:tensorflow:Finished compiling. Time elapsed: 2.77214789391 secs\nINFO:tensorflow:Setting weights on TPU model.\n59392/60000 [============================&gt;.] - ETA: 0s - loss: 0.8010 - acc: 0.7334INFO:tensorflow:New input shapes; (re-)compiling: mode=train, [TensorSpec(shape=(12, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(12, 10), dtype=tf.float32, name=u'dense_1_target_10')]\nINFO:tensorflow:Overriding default placeholder.\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\nINFO:tensorflow:Get updates: Tensor(\"loss_1/mul:0\", shape=(), dtype=float32)\nINFO:tensorflow:Started compiling\nINFO:tensorflow:Finished compiling. Time elapsed: 2.15880703926 secs\n59904/60000 [============================&gt;.] - ETA: 0s - loss: 0.7972 - acc: 0.7345INFO:tensorflow:New input shapes; (re-)compiling: mode=eval, [TensorSpec(shape=(32, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(32, 10), dtype=tf.float32, name=u'dense_1_target_10')]\nINFO:tensorflow:Overriding default placeholder.\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\nINFO:tensorflow:Started compiling\nINFO:tensorflow:Finished compiling. Time elapsed: 1.6451818943 secs\nINFO:tensorflow:New input shapes; (re-)compiling: mode=eval, [TensorSpec(shape=(2, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(2, 10), dtype=tf.float32, name=u'dense_1_target_10')]\nINFO:tensorflow:Overriding default placeholder.\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\nINFO:tensorflow:Started compiling\nINFO:tensorflow:Finished compiling. Time elapsed: 1.2268679142 secs\n60000/60000 [==============================] - 20s 340us/step - loss: 0.7966 - acc: 0.7347 - val_loss: 0.1647 - val_acc: 0.9464\nEpoch 2/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.2937 - acc: 0.9121 - val_loss: 0.1101 - val_acc: 0.9664\nEpoch 3/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.2161 - acc: 0.9341 - val_loss: 0.1041 - val_acc: 0.9696\nEpoch 4/12\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1777 - acc: 0.9449 - val_loss: 0.0703 - val_acc: 0.9792\nEpoch 5/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.1513 - acc: 0.9539 - val_loss: 0.0622 - val_acc: 0.9800\nEpoch 6/12\n60000/60000 [==============================] - 6s 95us/step - loss: 0.1393 - acc: 0.9527 - val_loss: 0.0584 - val_acc: 0.9800\nEpoch 7/12\n60000/60000 [==============================] - 6s 100us/step - loss: 0.1339 - acc: 0.9568 - val_loss: 0.0562 - val_acc: 0.9816\nEpoch 8/12\n60000/60000 [==============================] - 6s 99us/step - loss: 0.1219 - acc: 0.9605 - val_loss: 0.0785 - val_acc: 0.9776\nEpoch 9/12\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1211 - acc: 0.9592 - val_loss: 0.0456 - val_acc: 0.9880\nEpoch 10/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.1093 - acc: 0.9655 - val_loss: 0.0637 - val_acc: 0.9832\nEpoch 11/12\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1063 - acc: 0.9663 - val_loss: 0.0459 - val_acc: 0.9880\nEpoch 12/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.0985 - acc: 0.9696 - val_loss: 0.0491 - val_acc: 0.9880\n</code></pre>", "body_text": "@choongng I ran the above code snippet on TPU without running into any errors. You should see output like this:\nINFO:tensorflow:Connecting to: grpc://10.10.45.90:7980\nTrain on 60000 samples, validate on 10000 samples\nEpoch 1/12\nINFO:tensorflow:New input shapes; (re-)compiling: mode=train, [TensorSpec(shape=(32, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(32, 10), dtype=tf.float32, name=u'dense_1_target_10')]\nINFO:tensorflow:Overriding default placeholder.\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\nINFO:tensorflow:Get updates: Tensor(\"loss/mul:0\", shape=(), dtype=float32)\nINFO:tensorflow:Started compiling\nINFO:tensorflow:Finished compiling. Time elapsed: 2.77214789391 secs\nINFO:tensorflow:Setting weights on TPU model.\n59392/60000 [============================>.] - ETA: 0s - loss: 0.8010 - acc: 0.7334INFO:tensorflow:New input shapes; (re-)compiling: mode=train, [TensorSpec(shape=(12, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(12, 10), dtype=tf.float32, name=u'dense_1_target_10')]\nINFO:tensorflow:Overriding default placeholder.\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\nINFO:tensorflow:Get updates: Tensor(\"loss_1/mul:0\", shape=(), dtype=float32)\nINFO:tensorflow:Started compiling\nINFO:tensorflow:Finished compiling. Time elapsed: 2.15880703926 secs\n59904/60000 [============================>.] - ETA: 0s - loss: 0.7972 - acc: 0.7345INFO:tensorflow:New input shapes; (re-)compiling: mode=eval, [TensorSpec(shape=(32, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(32, 10), dtype=tf.float32, name=u'dense_1_target_10')]\nINFO:tensorflow:Overriding default placeholder.\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\nINFO:tensorflow:Started compiling\nINFO:tensorflow:Finished compiling. Time elapsed: 1.6451818943 secs\nINFO:tensorflow:New input shapes; (re-)compiling: mode=eval, [TensorSpec(shape=(2, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(2, 10), dtype=tf.float32, name=u'dense_1_target_10')]\nINFO:tensorflow:Overriding default placeholder.\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\nINFO:tensorflow:Started compiling\nINFO:tensorflow:Finished compiling. Time elapsed: 1.2268679142 secs\n60000/60000 [==============================] - 20s 340us/step - loss: 0.7966 - acc: 0.7347 - val_loss: 0.1647 - val_acc: 0.9464\nEpoch 2/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.2937 - acc: 0.9121 - val_loss: 0.1101 - val_acc: 0.9664\nEpoch 3/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.2161 - acc: 0.9341 - val_loss: 0.1041 - val_acc: 0.9696\nEpoch 4/12\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1777 - acc: 0.9449 - val_loss: 0.0703 - val_acc: 0.9792\nEpoch 5/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.1513 - acc: 0.9539 - val_loss: 0.0622 - val_acc: 0.9800\nEpoch 6/12\n60000/60000 [==============================] - 6s 95us/step - loss: 0.1393 - acc: 0.9527 - val_loss: 0.0584 - val_acc: 0.9800\nEpoch 7/12\n60000/60000 [==============================] - 6s 100us/step - loss: 0.1339 - acc: 0.9568 - val_loss: 0.0562 - val_acc: 0.9816\nEpoch 8/12\n60000/60000 [==============================] - 6s 99us/step - loss: 0.1219 - acc: 0.9605 - val_loss: 0.0785 - val_acc: 0.9776\nEpoch 9/12\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1211 - acc: 0.9592 - val_loss: 0.0456 - val_acc: 0.9880\nEpoch 10/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.1093 - acc: 0.9655 - val_loss: 0.0637 - val_acc: 0.9832\nEpoch 11/12\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1063 - acc: 0.9663 - val_loss: 0.0459 - val_acc: 0.9880\nEpoch 12/12\n60000/60000 [==============================] - 6s 96us/step - loss: 0.0985 - acc: 0.9696 - val_loss: 0.0491 - val_acc: 0.9880", "body": "@choongng I ran the above code snippet on TPU without running into any errors. You should see output like this:\r\n```\r\nINFO:tensorflow:Connecting to: grpc://10.10.45.90:7980\r\nTrain on 60000 samples, validate on 10000 samples\r\nEpoch 1/12\r\nINFO:tensorflow:New input shapes; (re-)compiling: mode=train, [TensorSpec(shape=(32, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(32, 10), dtype=tf.float32, name=u'dense_1_target_10')]\r\nINFO:tensorflow:Overriding default placeholder.\r\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\r\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\r\nINFO:tensorflow:Get updates: Tensor(\"loss/mul:0\", shape=(), dtype=float32)\r\nINFO:tensorflow:Started compiling\r\nINFO:tensorflow:Finished compiling. Time elapsed: 2.77214789391 secs\r\nINFO:tensorflow:Setting weights on TPU model.\r\n59392/60000 [============================>.] - ETA: 0s - loss: 0.8010 - acc: 0.7334INFO:tensorflow:New input shapes; (re-)compiling: mode=train, [TensorSpec(shape=(12, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(12, 10), dtype=tf.float32, name=u'dense_1_target_10')]\r\nINFO:tensorflow:Overriding default placeholder.\r\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\r\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\r\nINFO:tensorflow:Get updates: Tensor(\"loss_1/mul:0\", shape=(), dtype=float32)\r\nINFO:tensorflow:Started compiling\r\nINFO:tensorflow:Finished compiling. Time elapsed: 2.15880703926 secs\r\n59904/60000 [============================>.] - ETA: 0s - loss: 0.7972 - acc: 0.7345INFO:tensorflow:New input shapes; (re-)compiling: mode=eval, [TensorSpec(shape=(32, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(32, 10), dtype=tf.float32, name=u'dense_1_target_10')]\r\nINFO:tensorflow:Overriding default placeholder.\r\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\r\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\r\nINFO:tensorflow:Started compiling\r\nINFO:tensorflow:Finished compiling. Time elapsed: 1.6451818943 secs\r\nINFO:tensorflow:New input shapes; (re-)compiling: mode=eval, [TensorSpec(shape=(2, 28, 28, 1), dtype=tf.float32, name=u'separable_conv2d_input0'), TensorSpec(shape=(2, 10), dtype=tf.float32, name=u'dense_1_target_10')]\r\nINFO:tensorflow:Overriding default placeholder.\r\nINFO:tensorflow:Remapping placeholder for separable_conv2d_input\r\nINFO:tensorflow:Cloning Nadam {'beta_1': 0.8999999761581421, 'epsilon': 1e-07, 'schedule_decay': 0.004, 'beta_2': 0.9990000128746033, 'lr': 0.0020000000949949026}\r\nINFO:tensorflow:Started compiling\r\nINFO:tensorflow:Finished compiling. Time elapsed: 1.2268679142 secs\r\n60000/60000 [==============================] - 20s 340us/step - loss: 0.7966 - acc: 0.7347 - val_loss: 0.1647 - val_acc: 0.9464\r\nEpoch 2/12\r\n60000/60000 [==============================] - 6s 96us/step - loss: 0.2937 - acc: 0.9121 - val_loss: 0.1101 - val_acc: 0.9664\r\nEpoch 3/12\r\n60000/60000 [==============================] - 6s 96us/step - loss: 0.2161 - acc: 0.9341 - val_loss: 0.1041 - val_acc: 0.9696\r\nEpoch 4/12\r\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1777 - acc: 0.9449 - val_loss: 0.0703 - val_acc: 0.9792\r\nEpoch 5/12\r\n60000/60000 [==============================] - 6s 96us/step - loss: 0.1513 - acc: 0.9539 - val_loss: 0.0622 - val_acc: 0.9800\r\nEpoch 6/12\r\n60000/60000 [==============================] - 6s 95us/step - loss: 0.1393 - acc: 0.9527 - val_loss: 0.0584 - val_acc: 0.9800\r\nEpoch 7/12\r\n60000/60000 [==============================] - 6s 100us/step - loss: 0.1339 - acc: 0.9568 - val_loss: 0.0562 - val_acc: 0.9816\r\nEpoch 8/12\r\n60000/60000 [==============================] - 6s 99us/step - loss: 0.1219 - acc: 0.9605 - val_loss: 0.0785 - val_acc: 0.9776\r\nEpoch 9/12\r\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1211 - acc: 0.9592 - val_loss: 0.0456 - val_acc: 0.9880\r\nEpoch 10/12\r\n60000/60000 [==============================] - 6s 96us/step - loss: 0.1093 - acc: 0.9655 - val_loss: 0.0637 - val_acc: 0.9832\r\nEpoch 11/12\r\n60000/60000 [==============================] - 6s 97us/step - loss: 0.1063 - acc: 0.9663 - val_loss: 0.0459 - val_acc: 0.9880\r\nEpoch 12/12\r\n60000/60000 [==============================] - 6s 96us/step - loss: 0.0985 - acc: 0.9696 - val_loss: 0.0491 - val_acc: 0.9880\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/369806621", "html_url": "https://github.com/tensorflow/tensorflow/pull/15640#issuecomment-369806621", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15640", "id": 369806621, "node_id": "MDEyOklzc3VlQ29tbWVudDM2OTgwNjYyMQ==", "user": {"login": "dave-msk", "id": 20377823, "node_id": "MDQ6VXNlcjIwMzc3ODIz", "avatar_url": "https://avatars0.githubusercontent.com/u/20377823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dave-msk", "html_url": "https://github.com/dave-msk", "followers_url": "https://api.github.com/users/dave-msk/followers", "following_url": "https://api.github.com/users/dave-msk/following{/other_user}", "gists_url": "https://api.github.com/users/dave-msk/gists{/gist_id}", "starred_url": "https://api.github.com/users/dave-msk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dave-msk/subscriptions", "organizations_url": "https://api.github.com/users/dave-msk/orgs", "repos_url": "https://api.github.com/users/dave-msk/repos", "events_url": "https://api.github.com/users/dave-msk/events{/privacy}", "received_events_url": "https://api.github.com/users/dave-msk/received_events", "type": "User", "site_admin": false}, "created_at": "2018-03-02T03:08:20Z", "updated_at": "2018-03-02T03:08:20Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Makes sense. So I guess the code becomes:</p>\n<pre><code>def get_replica_device_setter(config, ps_strategy):\n  worker_device = '/job:%s/task:%d' % (config.task_type, config.task_id) \n  return training.replica_device_setter(\n      ps_tasks=config.num_ps_replicas,\n      worker_device=worker_device,\n      merge_devices=True,\n      ps_ops=tf.train.some_ref_to_ps_ops,  # just some reference to the original ps_ops\n      cluster=config.cluster_spec,\n      ps_strategy=ps_strategy)\n</code></pre>\n<p>It looks cool, couldn't think of a better way to do it right now</p>", "body_text": "Makes sense. So I guess the code becomes:\ndef get_replica_device_setter(config, ps_strategy):\n  worker_device = '/job:%s/task:%d' % (config.task_type, config.task_id) \n  return training.replica_device_setter(\n      ps_tasks=config.num_ps_replicas,\n      worker_device=worker_device,\n      merge_devices=True,\n      ps_ops=tf.train.some_ref_to_ps_ops,  # just some reference to the original ps_ops\n      cluster=config.cluster_spec,\n      ps_strategy=ps_strategy)\n\nIt looks cool, couldn't think of a better way to do it right now", "body": "Makes sense. So I guess the code becomes:\r\n\r\n```\r\ndef get_replica_device_setter(config, ps_strategy):\r\n  worker_device = '/job:%s/task:%d' % (config.task_type, config.task_id) \r\n  return training.replica_device_setter(\r\n      ps_tasks=config.num_ps_replicas,\r\n      worker_device=worker_device,\r\n      merge_devices=True,\r\n      ps_ops=tf.train.some_ref_to_ps_ops,  # just some reference to the original ps_ops\r\n      cluster=config.cluster_spec,\r\n      ps_strategy=ps_strategy)\r\n```\r\n\r\nIt looks cool, couldn't think of a better way to do it right now"}
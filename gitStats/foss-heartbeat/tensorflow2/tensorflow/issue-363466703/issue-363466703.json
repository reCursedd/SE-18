{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22495", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22495/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22495/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22495/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22495", "id": 363466703, "node_id": "MDU6SXNzdWUzNjM0NjY3MDM=", "number": 22495, "title": "I have two nvidia GPU,but run ours finalAlg.so\uff0cand GPU don't work. ", "user": {"login": "cvJie", "id": 31844043, "node_id": "MDQ6VXNlcjMxODQ0MDQz", "avatar_url": "https://avatars0.githubusercontent.com/u/31844043?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cvJie", "html_url": "https://github.com/cvJie", "followers_url": "https://api.github.com/users/cvJie/followers", "following_url": "https://api.github.com/users/cvJie/following{/other_user}", "gists_url": "https://api.github.com/users/cvJie/gists{/gist_id}", "starred_url": "https://api.github.com/users/cvJie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cvJie/subscriptions", "organizations_url": "https://api.github.com/users/cvJie/orgs", "repos_url": "https://api.github.com/users/cvJie/repos", "events_url": "https://api.github.com/users/cvJie/events{/privacy}", "received_events_url": "https://api.github.com/users/cvJie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "harshini-gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshini-gadige", "html_url": "https://github.com/harshini-gadige", "followers_url": "https://api.github.com/users/harshini-gadige/followers", "following_url": "https://api.github.com/users/harshini-gadige/following{/other_user}", "gists_url": "https://api.github.com/users/harshini-gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshini-gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshini-gadige/subscriptions", "organizations_url": "https://api.github.com/users/harshini-gadige/orgs", "repos_url": "https://api.github.com/users/harshini-gadige/repos", "events_url": "https://api.github.com/users/harshini-gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/harshini-gadige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "harshini-gadige", "id": 42781361, "node_id": "MDQ6VXNlcjQyNzgxMzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/42781361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshini-gadige", "html_url": "https://github.com/harshini-gadige", "followers_url": "https://api.github.com/users/harshini-gadige/followers", "following_url": "https://api.github.com/users/harshini-gadige/following{/other_user}", "gists_url": "https://api.github.com/users/harshini-gadige/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshini-gadige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshini-gadige/subscriptions", "organizations_url": "https://api.github.com/users/harshini-gadige/orgs", "repos_url": "https://api.github.com/users/harshini-gadige/repos", "events_url": "https://api.github.com/users/harshini-gadige/events{/privacy}", "received_events_url": "https://api.github.com/users/harshini-gadige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-09-25T08:35:18Z", "updated_at": "2018-10-08T16:33:25Z", "closed_at": "2018-10-08T16:33:25Z", "author_association": "NONE", "body_html": "<p>first,i cmake tensorflow-GPU,and get tensorflow_cc.so\uff1b<br>\nthen ,cmake tensorflow__cc.so and another alg codes have got finalAlg.so;<br>\nlast,run finalAlg.so by tensorflow C++ API.</p>\n<pre><code>string model_path = \"finalAlg.pb\";\nGraphDef graph_def;\nstatus = ReadBinaryProto(Env::Default(), model_path, &amp;graph_def);\nstatus = session-&gt;Create(graph_def); \ngraph::SetDefaultDevice(\"/gpu:0\", &amp;graphdef);\nsess_options.config.mutable_gpu_options()-&gt;set_allow_growth(true); \nTensor phase_train(DT_BOOL, TensorShape());\nphase_train.scalar&lt;bool&gt;()() = false;   \t\nstd::vector&lt;std::pair&lt;std::string, tensorflow::Tensor&gt;&gt; inputs = {\n{ \"input\", input_tensor },{\"phase_train\",phase_train }};\nstd::vector&lt;tensorflow::Tensor&gt; outputs;\nstatus = session-&gt;Run(inputs, { \"dsts\"}, {}, &amp;outputs);\nruntime appear:\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:972]      0 1\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:985] 0:   N N\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:985] 1:   N N\n</code></pre>\n<p>Although i have two nvidia GPUs,but ours finalAlg.so cant't run in GPU,just always run in CPU.<br>\nGive me some suggesstion.thanks.</p>", "body_text": "first,i cmake tensorflow-GPU,and get tensorflow_cc.so\uff1b\nthen ,cmake tensorflow__cc.so and another alg codes have got finalAlg.so;\nlast,run finalAlg.so by tensorflow C++ API.\nstring model_path = \"finalAlg.pb\";\nGraphDef graph_def;\nstatus = ReadBinaryProto(Env::Default(), model_path, &graph_def);\nstatus = session->Create(graph_def); \ngraph::SetDefaultDevice(\"/gpu:0\", &graphdef);\nsess_options.config.mutable_gpu_options()->set_allow_growth(true); \nTensor phase_train(DT_BOOL, TensorShape());\nphase_train.scalar<bool>()() = false;   \t\nstd::vector<std::pair<std::string, tensorflow::Tensor>> inputs = {\n{ \"input\", input_tensor },{\"phase_train\",phase_train }};\nstd::vector<tensorflow::Tensor> outputs;\nstatus = session->Run(inputs, { \"dsts\"}, {}, &outputs);\nruntime appear:\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:972]      0 1\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:985] 0:   N N\nI tensorflow/core/common_runtime/gpu/gpu_device.cc:985] 1:   N N\n\nAlthough i have two nvidia GPUs,but ours finalAlg.so cant't run in GPU,just always run in CPU.\nGive me some suggesstion.thanks.", "body": "first,i cmake tensorflow-GPU,and get tensorflow_cc.so\uff1b\r\nthen ,cmake tensorflow__cc.so and another alg codes have got finalAlg.so;\r\nlast,run finalAlg.so by tensorflow C++ API.\r\n\r\n    string model_path = \"finalAlg.pb\";\r\n    GraphDef graph_def;\r\n    status = ReadBinaryProto(Env::Default(), model_path, &graph_def);\r\n    status = session->Create(graph_def); \r\n    graph::SetDefaultDevice(\"/gpu:0\", &graphdef);\r\n    sess_options.config.mutable_gpu_options()->set_allow_growth(true); \r\n    Tensor phase_train(DT_BOOL, TensorShape());\r\n    phase_train.scalar<bool>()() = false;   \t\r\n    std::vector<std::pair<std::string, tensorflow::Tensor>> inputs = {\r\n    { \"input\", input_tensor },{\"phase_train\",phase_train }};\r\n    std::vector<tensorflow::Tensor> outputs;\r\n    status = session->Run(inputs, { \"dsts\"}, {}, &outputs);\r\n    runtime appear:\r\n    I tensorflow/core/common_runtime/gpu/gpu_device.cc:972]      0 1\r\n    I tensorflow/core/common_runtime/gpu/gpu_device.cc:985] 0:   N N\r\n    I tensorflow/core/common_runtime/gpu/gpu_device.cc:985] 1:   N N\r\n\r\n \r\nAlthough i have two nvidia GPUs,but ours finalAlg.so cant't run in GPU,just always run in CPU.\r\nGive me some suggesstion.thanks."}
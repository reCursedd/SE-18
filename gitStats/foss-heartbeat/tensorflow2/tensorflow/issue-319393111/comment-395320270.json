{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/395320270", "html_url": "https://github.com/tensorflow/tensorflow/issues/19014#issuecomment-395320270", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19014", "id": 395320270, "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTMyMDI3MA==", "user": {"login": "jonkoi", "id": 6788673, "node_id": "MDQ6VXNlcjY3ODg2NzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6788673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonkoi", "html_url": "https://github.com/jonkoi", "followers_url": "https://api.github.com/users/jonkoi/followers", "following_url": "https://api.github.com/users/jonkoi/following{/other_user}", "gists_url": "https://api.github.com/users/jonkoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonkoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonkoi/subscriptions", "organizations_url": "https://api.github.com/users/jonkoi/orgs", "repos_url": "https://api.github.com/users/jonkoi/repos", "events_url": "https://api.github.com/users/jonkoi/events{/privacy}", "received_events_url": "https://api.github.com/users/jonkoi/received_events", "type": "User", "site_admin": false}, "created_at": "2018-06-07T07:25:03Z", "updated_at": "2018-06-07T07:27:32Z", "author_association": "NONE", "body_html": "<p>Hi <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=926261\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/parvizp\">@parvizp</a>, I followed your steps in the script and when I tried to convert the model to tflite using toco I got the following error:</p>\n<p>2018-06-07 09:16:43.140917: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1206 operators, 1752 arrays (0 quantized)<br>\n2018-06-07 09:16:43.202703: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1206 operators, 1752 arrays (0 quantized)<br>\n2018-06-07 09:16:43.470889: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 120 operators, 227 arrays (1 quantized)<br>\n2018-06-07 09:16:43.473547: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 120 operators, 227 arrays (1 quantized)<br>\n2018-06-07 09:16:43.474518: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 67 operators, 174 arrays (1 quantized)<br>\n2018-06-07 09:16:43.475388: F tensorflow/contrib/lite/toco/tooling_util.cc:1320] Array MobilenetV2/expanded_conv_2/add, which is an input to the Conv operator producing the output array MobilenetV2/expanded_conv_3/expand/Relu6, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about the accuracy of results.<br>\nAborted (core dumped)</p>\n<p>I inspected the checkpoint and there are min/max for activations and weights.</p>\n<p>Do you have any idea how to solve this?</p>", "body_text": "Hi @parvizp, I followed your steps in the script and when I tried to convert the model to tflite using toco I got the following error:\n2018-06-07 09:16:43.140917: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1206 operators, 1752 arrays (0 quantized)\n2018-06-07 09:16:43.202703: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1206 operators, 1752 arrays (0 quantized)\n2018-06-07 09:16:43.470889: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 120 operators, 227 arrays (1 quantized)\n2018-06-07 09:16:43.473547: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 120 operators, 227 arrays (1 quantized)\n2018-06-07 09:16:43.474518: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 67 operators, 174 arrays (1 quantized)\n2018-06-07 09:16:43.475388: F tensorflow/contrib/lite/toco/tooling_util.cc:1320] Array MobilenetV2/expanded_conv_2/add, which is an input to the Conv operator producing the output array MobilenetV2/expanded_conv_3/expand/Relu6, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about the accuracy of results.\nAborted (core dumped)\nI inspected the checkpoint and there are min/max for activations and weights.\nDo you have any idea how to solve this?", "body": "Hi @parvizp, I followed your steps in the script and when I tried to convert the model to tflite using toco I got the following error:\r\n\r\n2018-06-07 09:16:43.140917: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1206 operators, 1752 arrays (0 quantized)\r\n2018-06-07 09:16:43.202703: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1206 operators, 1752 arrays (0 quantized)\r\n2018-06-07 09:16:43.470889: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 120 operators, 227 arrays (1 quantized)\r\n2018-06-07 09:16:43.473547: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 120 operators, 227 arrays (1 quantized)\r\n2018-06-07 09:16:43.474518: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 67 operators, 174 arrays (1 quantized)\r\n2018-06-07 09:16:43.475388: F tensorflow/contrib/lite/toco/tooling_util.cc:1320] Array MobilenetV2/expanded_conv_2/add, which is an input to the Conv operator producing the output array MobilenetV2/expanded_conv_3/expand/Relu6, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about the accuracy of results.\r\nAborted (core dumped)\r\n\r\nI inspected the checkpoint and there are min/max for activations and weights.\r\n\r\nDo you have any idea how to solve this?"}
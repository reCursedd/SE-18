{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/248831640", "html_url": "https://github.com/tensorflow/tensorflow/issues/582#issuecomment-248831640", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/582", "id": 248831640, "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODgzMTY0MA==", "user": {"login": "waichee", "id": 929147, "node_id": "MDQ6VXNlcjkyOTE0Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/929147?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waichee", "html_url": "https://github.com/waichee", "followers_url": "https://api.github.com/users/waichee/followers", "following_url": "https://api.github.com/users/waichee/following{/other_user}", "gists_url": "https://api.github.com/users/waichee/gists{/gist_id}", "starred_url": "https://api.github.com/users/waichee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waichee/subscriptions", "organizations_url": "https://api.github.com/users/waichee/orgs", "repos_url": "https://api.github.com/users/waichee/repos", "events_url": "https://api.github.com/users/waichee/events{/privacy}", "received_events_url": "https://api.github.com/users/waichee/received_events", "type": "User", "site_admin": false}, "created_at": "2016-09-22T07:28:00Z", "updated_at": "2016-09-22T07:28:00Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=463737\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vrv\">@vrv</a> that's bizarre...we are building from source c++ on the following commit hash 59225e413e9680d67ae90196fa536f5271fcf615 from master</p>\n<p>this is what we're doing now and we are unable to get it to take in larger than 64Mb model if we remove the sed command on a centos7 base image</p>\n<pre><code>RUN cd serving &amp;&amp; git checkout 59225e413e9680d67ae90196fa536f5271fcf615\n\nRUN cd /app/serving/tensorflow &amp;&amp; echo \"/usr/lib64/python2.7/site-packages\" | ./configure\nRUN cd /app/serving &amp;&amp; bazel fetch //tensorflow_serving/model_servers:tensorflow_model_server\n\n# Patch Protobuf to allow larger models to be loaded\nRUN sed -i 's/64 &lt;&lt; 20/512 &lt;&lt; 20/g' `find /root/.cache/bazel/_bazel_root/*/external/protobuf/src/google/protobuf/io/coded_stream.h`\n\n# Build Tensor Serving with Bazel\nRUN cd /app/serving &amp;&amp; bazel build -c opt //tensorflow_serving/model_servers:tensorflow_model_server\n</code></pre>\n<p>are we missing something obvious?</p>", "body_text": "@vrv that's bizarre...we are building from source c++ on the following commit hash 59225e413e9680d67ae90196fa536f5271fcf615 from master\nthis is what we're doing now and we are unable to get it to take in larger than 64Mb model if we remove the sed command on a centos7 base image\nRUN cd serving && git checkout 59225e413e9680d67ae90196fa536f5271fcf615\n\nRUN cd /app/serving/tensorflow && echo \"/usr/lib64/python2.7/site-packages\" | ./configure\nRUN cd /app/serving && bazel fetch //tensorflow_serving/model_servers:tensorflow_model_server\n\n# Patch Protobuf to allow larger models to be loaded\nRUN sed -i 's/64 << 20/512 << 20/g' `find /root/.cache/bazel/_bazel_root/*/external/protobuf/src/google/protobuf/io/coded_stream.h`\n\n# Build Tensor Serving with Bazel\nRUN cd /app/serving && bazel build -c opt //tensorflow_serving/model_servers:tensorflow_model_server\n\nare we missing something obvious?", "body": "@vrv that's bizarre...we are building from source c++ on the following commit hash 59225e413e9680d67ae90196fa536f5271fcf615 from master\n\nthis is what we're doing now and we are unable to get it to take in larger than 64Mb model if we remove the sed command on a centos7 base image\n\n```\nRUN cd serving && git checkout 59225e413e9680d67ae90196fa536f5271fcf615\n\nRUN cd /app/serving/tensorflow && echo \"/usr/lib64/python2.7/site-packages\" | ./configure\nRUN cd /app/serving && bazel fetch //tensorflow_serving/model_servers:tensorflow_model_server\n\n# Patch Protobuf to allow larger models to be loaded\nRUN sed -i 's/64 << 20/512 << 20/g' `find /root/.cache/bazel/_bazel_root/*/external/protobuf/src/google/protobuf/io/coded_stream.h`\n\n# Build Tensor Serving with Bazel\nRUN cd /app/serving && bazel build -c opt //tensorflow_serving/model_servers:tensorflow_model_server\n```\n\nare we missing something obvious?\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2790", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2790/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2790/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2790/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/2790", "id": 159693134, "node_id": "MDU6SXNzdWUxNTk2OTMxMzQ=", "number": 2790, "title": "Issue re-building with Dockerfile.devel-gpu file", "user": {"login": "maxmelnick", "id": 4043751, "node_id": "MDQ6VXNlcjQwNDM3NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/4043751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxmelnick", "html_url": "https://github.com/maxmelnick", "followers_url": "https://api.github.com/users/maxmelnick/followers", "following_url": "https://api.github.com/users/maxmelnick/following{/other_user}", "gists_url": "https://api.github.com/users/maxmelnick/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxmelnick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxmelnick/subscriptions", "organizations_url": "https://api.github.com/users/maxmelnick/orgs", "repos_url": "https://api.github.com/users/maxmelnick/repos", "events_url": "https://api.github.com/users/maxmelnick/events{/privacy}", "received_events_url": "https://api.github.com/users/maxmelnick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2016-06-10T18:24:05Z", "updated_at": "2016-06-28T15:48:24Z", "closed_at": "2016-06-10T21:53:54Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I tried to build my own version of the <code>Dockerfile.devel-gpu</code> with the instructions on <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/docker\">this page</a> but got the error as seen in the details below.</p>\n<p>After doing some troubleshooting I noticed the <code>tensorflow/core</code> folder wasn't getting created by the <code>git clone</code> statement that's in the <code>Dockerfile.devel-gpu</code> so I updated it to explicitly clone the <code>-b r0.8</code> branch and it worked successfully. See below for detailed updates. Is this the proper approach to take to resolve this issue or am I missing something?</p>\n<p><strong>Executed this command</strong></p>\n<p><code>$ docker build --pull -t $USER:tensorflow-suffix -f Dockerfile.devel-gpu .</code></p>\n<p><strong>Got this error</strong></p>\n<pre><code>...\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\nExtracting Bazel installation...\n____Loading package: tensorflow/tools/pip_package\n____Loading...\n____Loading package: tensorflow/core\n____Loading package: tensorflow/models/image/cifar10\nERROR: /tensorflow/tensorflow/tools/pip_package/BUILD:23:1: error loading package 'tensorflow/core': Extension file not found. Unable to load package for '//google/protobuf:protobuf.bzl': BUILD file not found on package path and referenced by '//tensorflow/tools/pip_package:build_pip_package'.\nERROR: Loading failed; build aborted.\n____Elapsed time: 1.802s\nThe command '/bin/sh -c ./configure &amp;&amp;     bazel build -c opt --config=cuda tensorflow/tools/pip_package:build_pip_package &amp;&amp;     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &amp;&amp;     pip install --upgrade /tmp/pip/tensorflow-*.whl' returned a non-zero code: 1\n</code></pre>\n<p><strong>Select contents of Dockerfile.devel-gpu BEFORE (results in error)</strong></p>\n<p><code>RUN git clone --recursive https://github.com/tensorflow/tensorflow.git &amp;&amp; \\ cd tensorflow &amp;&amp; \\ git checkout r0.8</code></p>\n<p><strong>Select contents of Dockerfile.devel-gpu AFTER (working successfully)</strong></p>\n<p><code>RUN git clone -b r0.8 --recursive https://github.com/tensorflow/tensorflow.git &amp;&amp; \\ cd tensorflow &amp;&amp; \\ git checkout r0.8</code></p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04.3 LTS (GNU/Linux 3.13.0-74-generic x86_64)</p>\n<p>Installed version of CUDA and cuDNN: Using <code>nvidia/cuda:7.5-cudnn4-devel</code> as base image for Docker build</p>\n<p>Docker version 1.11.2, build b9f10c9</p>", "body_text": "I tried to build my own version of the Dockerfile.devel-gpu with the instructions on this page but got the error as seen in the details below.\nAfter doing some troubleshooting I noticed the tensorflow/core folder wasn't getting created by the git clone statement that's in the Dockerfile.devel-gpu so I updated it to explicitly clone the -b r0.8 branch and it worked successfully. See below for detailed updates. Is this the proper approach to take to resolve this issue or am I missing something?\nExecuted this command\n$ docker build --pull -t $USER:tensorflow-suffix -f Dockerfile.devel-gpu .\nGot this error\n...\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\nExtracting Bazel installation...\n____Loading package: tensorflow/tools/pip_package\n____Loading...\n____Loading package: tensorflow/core\n____Loading package: tensorflow/models/image/cifar10\nERROR: /tensorflow/tensorflow/tools/pip_package/BUILD:23:1: error loading package 'tensorflow/core': Extension file not found. Unable to load package for '//google/protobuf:protobuf.bzl': BUILD file not found on package path and referenced by '//tensorflow/tools/pip_package:build_pip_package'.\nERROR: Loading failed; build aborted.\n____Elapsed time: 1.802s\nThe command '/bin/sh -c ./configure &&     bazel build -c opt --config=cuda tensorflow/tools/pip_package:build_pip_package &&     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &&     pip install --upgrade /tmp/pip/tensorflow-*.whl' returned a non-zero code: 1\n\nSelect contents of Dockerfile.devel-gpu BEFORE (results in error)\nRUN git clone --recursive https://github.com/tensorflow/tensorflow.git && \\ cd tensorflow && \\ git checkout r0.8\nSelect contents of Dockerfile.devel-gpu AFTER (working successfully)\nRUN git clone -b r0.8 --recursive https://github.com/tensorflow/tensorflow.git && \\ cd tensorflow && \\ git checkout r0.8\nEnvironment info\nOperating System: Ubuntu 14.04.3 LTS (GNU/Linux 3.13.0-74-generic x86_64)\nInstalled version of CUDA and cuDNN: Using nvidia/cuda:7.5-cudnn4-devel as base image for Docker build\nDocker version 1.11.2, build b9f10c9", "body": "I tried to build my own version of the `Dockerfile.devel-gpu` with the instructions on [this page](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/docker) but got the error as seen in the details below. \n\nAfter doing some troubleshooting I noticed the `tensorflow/core` folder wasn't getting created by the `git clone` statement that's in the `Dockerfile.devel-gpu` so I updated it to explicitly clone the `-b r0.8` branch and it worked successfully. See below for detailed updates. Is this the proper approach to take to resolve this issue or am I missing something? \n\n**Executed this command**\n\n`$ docker build --pull -t $USER:tensorflow-suffix -f Dockerfile.devel-gpu .`\n\n**Got this error**\n\n```\n...\nINFO: Reading 'startup' options from /root/.bazelrc: --batch\nExtracting Bazel installation...\n____Loading package: tensorflow/tools/pip_package\n____Loading...\n____Loading package: tensorflow/core\n____Loading package: tensorflow/models/image/cifar10\nERROR: /tensorflow/tensorflow/tools/pip_package/BUILD:23:1: error loading package 'tensorflow/core': Extension file not found. Unable to load package for '//google/protobuf:protobuf.bzl': BUILD file not found on package path and referenced by '//tensorflow/tools/pip_package:build_pip_package'.\nERROR: Loading failed; build aborted.\n____Elapsed time: 1.802s\nThe command '/bin/sh -c ./configure &&     bazel build -c opt --config=cuda tensorflow/tools/pip_package:build_pip_package &&     bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/pip &&     pip install --upgrade /tmp/pip/tensorflow-*.whl' returned a non-zero code: 1\n```\n\n**Select contents of Dockerfile.devel-gpu BEFORE (results in error)**\n\n`RUN git clone --recursive https://github.com/tensorflow/tensorflow.git && \\\n    cd tensorflow && \\\n    git checkout r0.8`\n\n**Select contents of Dockerfile.devel-gpu AFTER (working successfully)**\n\n`RUN git clone -b r0.8 --recursive https://github.com/tensorflow/tensorflow.git && \\\n    cd tensorflow && \\\n    git checkout r0.8`\n### Environment info\n\nOperating System: Ubuntu 14.04.3 LTS (GNU/Linux 3.13.0-74-generic x86_64)\n\nInstalled version of CUDA and cuDNN: Using `nvidia/cuda:7.5-cudnn4-devel` as base image for Docker build\n\nDocker version 1.11.2, build b9f10c9\n"}
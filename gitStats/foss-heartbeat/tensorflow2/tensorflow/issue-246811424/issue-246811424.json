{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11915", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11915/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11915/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11915/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11915", "id": 246811424, "node_id": "MDU6SXNzdWUyNDY4MTE0MjQ=", "number": 11915, "title": "Out of memory due to cuda_host_bfc allocator", "user": {"login": "mehmetbasbug", "id": 1459541, "node_id": "MDQ6VXNlcjE0NTk1NDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1459541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mehmetbasbug", "html_url": "https://github.com/mehmetbasbug", "followers_url": "https://api.github.com/users/mehmetbasbug/followers", "following_url": "https://api.github.com/users/mehmetbasbug/following{/other_user}", "gists_url": "https://api.github.com/users/mehmetbasbug/gists{/gist_id}", "starred_url": "https://api.github.com/users/mehmetbasbug/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mehmetbasbug/subscriptions", "organizations_url": "https://api.github.com/users/mehmetbasbug/orgs", "repos_url": "https://api.github.com/users/mehmetbasbug/repos", "events_url": "https://api.github.com/users/mehmetbasbug/events{/privacy}", "received_events_url": "https://api.github.com/users/mehmetbasbug/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-31T16:14:37Z", "updated_at": "2018-04-29T22:49:39Z", "closed_at": "2017-07-31T16:26:35Z", "author_association": "NONE", "body_html": "<p>Hi,</p>\n<p>I am getting OOM errors when I try to move data from GPUs to CPU. CPU has 0.5TB memory and when I allocate a large chunk of CPU memory directly there is no problem. However, for some reason cuda_host_bfc allocator sets the limit to 68719476736 which is incidentally 0 in int32. It looks like there is a bug here. Any thoughts?</p>\n<p>Thanks</p>\n<p>p.s. I disable the auto_gc collector on purpose (with get_raw_handle), so I can quickly clear the GPU memory.</p>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: y</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Debian 3.16.43-2+deb8u2 (2017-06-26) x86_64 GNU/Linux</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: v1.2.0-2010-g8605f7a  1.2.1</li>\n<li><strong>Python version</strong>: 2.7.12</li>\n<li><strong>Bazel version (if compiling from source)</strong>: 0.5.2</li>\n<li><strong>CUDA/cuDNN version</strong>: 8.0.61</li>\n<li><strong>GPU model and memory</strong>: 4 x Tesla P100-SXM2-16GB</li>\n<li><strong>Exact command to reproduce</strong>: python cuda_host_bfc_oom_bug.py &gt; out.log 2&gt; out.err</li>\n</ul>\n<h3>Source code</h3>\n<p>cuda_host_bfc_oom_bug.py:</p>\n<pre><code>import tensorflow as tf\nif __name__ == '__main__':\n    n_gpus = 4\n    n_rep = 10\n    tensor_shape = [1000,1000,250,4] # 4GB objects\n    x_handle_ops = []\n    coefs = []\n    for i_gpu in range(n_gpus):\n        with tf.device('/gpu:%i' % i_gpu):\n            coef = tf.placeholder(shape=[], dtype=tf.float32)\n            coefs.append(coef)\n            x = coef * tf.ones(tensor_shape,dtype=tf.float32)\n            x_handle_op = tf.get_session_handle(x)\n            x_handle_ops.append(x_handle_op)\n    config = tf.ConfigProto(device_count = {'GPU': n_gpus},\n                            use_per_session_threads=0,\n                            log_device_placement=0,\n                            allow_soft_placement=0)\n    with tf.Session(config=config) as sess:\n        for rep in range(n_rep):\n            x_handles = sess.run(x_handle_ops, feed_dict=dict(zip(coefs, range(n_gpus))))\n            x_handles = [x_handle.get_raw_handle() for x_handle in x_handles]\n            x_vars = []\n            x_placeholders = []\n            x_del_placeholders = []\n            x_deleters = []\n            for i_gpu in range(n_gpus):\n                x_placeholder, x_val = tf.get_session_tensor(x_handles[i_gpu], tf.float32)\n                x_del_placeholder, x_deleter = tf.delete_session_tensor(x_handles[i_gpu])\n                x_placeholders.append(x_placeholder)\n                x_del_placeholders.append(x_del_placeholder)\n                x_deleters.append(x_deleter)\n                x_val.set_shape(tensor_shape)\n                with tf.device('/cpu:0'):\n                    x_copy = tf.identity(x_val)\n                    with tf.variable_scope('node_%i' % i_gpu, reuse=False):\n                        with tf.variable_scope('var_%i' % rep, reuse=False):\n                            x_var = tf.get_variable('x',\n                                                    initializer=x_copy,\n                                                    dtype=tf.float32)\n                    x_vars.append(x_var)\n            sess.run(tf.variables_initializer(x_vars),\n                     feed_dict=dict(zip(x_placeholders, x_handles)))\n            sess.run(x_deleters,\n                     feed_dict=dict(zip(x_del_placeholders, x_handles)))\n</code></pre>\n<h3>Traceback</h3>\n<pre><code>2017-07-31 11:35:11.906820: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: \nname: Tesla P100-SXM2-16GB\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\npciBusID 0000:05:00.0\nTotal memory: 15.89GiB\nFree memory: 15.61GiB\n2017-07-31 11:35:12.433035: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x18b9550 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\n2017-07-31 11:35:12.434348: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: \nname: Tesla P100-SXM2-16GB\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\npciBusID 0000:06:00.0\nTotal memory: 15.89GiB\nFree memory: 15.61GiB\n2017-07-31 11:35:13.070865: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x2d0b7c0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\n2017-07-31 11:35:13.073944: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 2 with properties: \nname: Tesla P100-SXM2-16GB\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\npciBusID 0000:84:00.0\nTotal memory: 15.89GiB\nFree memory: 15.61GiB\n2017-07-31 11:35:13.832006: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x2d0f150 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\n2017-07-31 11:35:13.834336: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 3 with properties: \nname: Tesla P100-SXM2-16GB\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\npciBusID 0000:85:00.0\nTotal memory: 15.89GiB\nFree memory: 15.61GiB\n2017-07-31 11:35:13.846700: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 2 3 \n2017-07-31 11:35:13.846721: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y Y Y Y \n2017-07-31 11:35:13.846728: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   Y Y Y Y \n2017-07-31 11:35:13.846734: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 2:   Y Y Y Y \n2017-07-31 11:35:13.846741: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 3:   Y Y Y Y \n2017-07-31 11:35:13.846753: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: Tesla P100-SXM2-16GB, pci bus id: 0000:05:00.0)\n2017-07-31 11:35:13.846761: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -&gt; (device: 1, name: Tesla P100-SXM2-16GB, pci bus id: 0000:06:00.0)\n2017-07-31 11:35:13.846769: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:2) -&gt; (device: 2, name: Tesla P100-SXM2-16GB, pci bus id: 0000:84:00.0)\n2017-07-31 11:35:13.846775: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:3) -&gt; (device: 3, name: Tesla P100-SXM2-16GB, pci bus id: 0000:85:00.0)\n2017-07-31 11:36:02.747322: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\n2017-07-31 11:36:02.747386: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747402: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747414: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747425: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747436: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747455: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747466: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747477: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747488: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747500: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747511: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747522: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747533: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747544: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747555: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747566: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747577: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747588: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747599: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747610: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747621: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747641: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \n2017-07-31 11:36:02.747653: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\n2017-07-31 11:36:02.747663: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\n2017-07-31 11:36:02.747672: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\n2017-07-31 11:36:02.747681: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\n2017-07-31 11:36:02.747690: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\n2017-07-31 11:36:02.747698: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\n2017-07-31 11:36:02.747707: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\n2017-07-31 11:36:02.747715: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\n2017-07-31 11:36:02.747724: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\n2017-07-31 11:36:02.747732: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\n2017-07-31 11:36:02.747740: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\n2017-07-31 11:36:02.747749: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\n2017-07-31 11:36:02.747757: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\n2017-07-31 11:36:02.747765: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\n2017-07-31 11:36:02.747773: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\n2017-07-31 11:36:02.747781: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\n2017-07-31 11:36:02.747789: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \n2017-07-31 11:36:02.747802: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\n2017-07-31 11:36:02.747812: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\n2017-07-31 11:36:02.747822: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\n2017-07-31 11:36:02.747831: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\n2017-07-31 11:36:02.747840: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\n2017-07-31 11:36:02.747850: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\n2017-07-31 11:36:02.747863: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \nLimit:                 68719476736\nInUse:                 68719476736\nMaxInUse:              68719476736\nNumAllocs:                      32\nMaxAllocSize:           6359738368\n\n2017-07-31 11:36:02.747876: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\n2017-07-31 11:36:02.747900: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\n2017-07-31 11:36:02.747946: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\n2017-07-31 11:36:02.747991: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748006: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748024: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748035: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748046: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748058: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748069: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748080: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748091: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748102: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748113: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748124: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748135: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748146: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748157: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748168: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748179: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748191: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748202: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748216: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748227: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748241: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \n2017-07-31 11:36:02.748252: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\n2017-07-31 11:36:02.748261: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\n2017-07-31 11:36:02.748270: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\n2017-07-31 11:36:02.748281: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\n2017-07-31 11:36:02.748290: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\n2017-07-31 11:36:02.748298: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\n2017-07-31 11:36:02.748306: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\n2017-07-31 11:36:02.748317: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\n2017-07-31 11:36:02.748325: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\n2017-07-31 11:36:02.748334: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\n2017-07-31 11:36:02.748342: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\n2017-07-31 11:36:02.748350: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\n2017-07-31 11:36:02.748358: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\n2017-07-31 11:36:02.748366: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\n2017-07-31 11:36:02.748374: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\n2017-07-31 11:36:02.748382: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\n2017-07-31 11:36:02.748390: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \n2017-07-31 11:36:02.748402: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\n2017-07-31 11:36:02.748412: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\n2017-07-31 11:36:02.748421: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\n2017-07-31 11:36:02.748431: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\n2017-07-31 11:36:02.748440: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\n2017-07-31 11:36:02.748450: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\n2017-07-31 11:36:02.748462: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \nLimit:                 68719476736\nInUse:                 68719476736\nMaxInUse:              68719476736\nNumAllocs:                      32\nMaxAllocSize:           6359738368\n\n2017-07-31 11:36:02.748475: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\n2017-07-31 11:36:02.748500: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\n2017-07-31 11:36:02.748547: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\n2017-07-31 11:36:02.748593: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748607: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748618: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748629: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748641: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748652: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748663: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748674: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748685: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748696: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748707: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748719: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748730: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748741: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748824: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748841: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748861: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748873: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748884: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748895: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748906: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748920: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \n2017-07-31 11:36:02.748931: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\n2017-07-31 11:36:02.748940: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\n2017-07-31 11:36:02.748948: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\n2017-07-31 11:36:02.748957: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\n2017-07-31 11:36:02.748965: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\n2017-07-31 11:36:02.748973: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\n2017-07-31 11:36:02.748981: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\n2017-07-31 11:36:02.748990: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\n2017-07-31 11:36:02.748998: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\n2017-07-31 11:36:02.749006: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\n2017-07-31 11:36:02.749014: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\n2017-07-31 11:36:02.749022: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\n2017-07-31 11:36:02.749030: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\n2017-07-31 11:36:02.749038: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\n2017-07-31 11:36:02.749046: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\n2017-07-31 11:36:02.749054: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\n2017-07-31 11:36:02.749062: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \n2017-07-31 11:36:02.749074: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\n2017-07-31 11:36:02.749084: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\n2017-07-31 11:36:02.749094: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\n2017-07-31 11:36:02.749103: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\n2017-07-31 11:36:02.749116: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\n2017-07-31 11:36:02.749126: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\n2017-07-31 11:36:02.749139: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \nLimit:                 68719476736\nInUse:                 68719476736\nMaxInUse:              68719476736\nNumAllocs:                      32\nMaxAllocSize:           6359738368\n\n2017-07-31 11:36:02.749152: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\n2017-07-31 11:36:02.749174: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\n2017-07-31 11:36:02.749222: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\n2017-07-31 11:36:02.749266: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749282: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749293: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749305: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749316: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749327: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749338: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749349: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749360: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749371: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749382: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749393: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749404: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749422: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749434: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749445: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749456: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749468: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749479: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749490: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749501: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749515: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \n2017-07-31 11:36:02.749526: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\n2017-07-31 11:36:02.749535: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\n2017-07-31 11:36:02.749544: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\n2017-07-31 11:36:02.749552: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\n2017-07-31 11:36:02.749561: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\n2017-07-31 11:36:02.749569: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\n2017-07-31 11:36:02.749578: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\n2017-07-31 11:36:02.749586: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\n2017-07-31 11:36:02.749610: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\n2017-07-31 11:36:02.749617: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\n2017-07-31 11:36:02.749625: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\n2017-07-31 11:36:02.749632: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\n2017-07-31 11:36:02.749640: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\n2017-07-31 11:36:02.749647: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\n2017-07-31 11:36:02.749655: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\n2017-07-31 11:36:02.749665: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\n2017-07-31 11:36:02.749673: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \n2017-07-31 11:36:02.749684: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\n2017-07-31 11:36:02.749694: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\n2017-07-31 11:36:02.749702: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\n2017-07-31 11:36:02.749711: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\n2017-07-31 11:36:02.749719: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\n2017-07-31 11:36:02.749728: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\n2017-07-31 11:36:02.749740: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \nLimit:                 68719476736\nInUse:                 68719476736\nMaxInUse:              68719476736\nNumAllocs:                      32\nMaxAllocSize:           6359738368\n\n2017-07-31 11:36:02.749753: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\n2017-07-31 11:36:02.749773: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\nTraceback (most recent call last):\n  File \"/home/mbasbug/workspace/svn/lcctf/test_handle2.py\", line 44, in &lt;module&gt;\n    feed_dict=dict(zip(x_placeholders, x_handles)))\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 895, in run\n    run_metadata_ptr)\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1124, in _run\n    feed_dict_tensor, options, run_metadata)\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1321, in _do_run\n    options, run_metadata)\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1340, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1000,1000,250,4]\n\t [[Node: node_2/var_3/x/Assign = Assign[T=DT_FLOAT, _class=[\"loc:@node_2/var_3/x\"], use_locking=true, validate_shape=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](node_2/var_3/x, GetSessionTensor_14/_99)]]\n\nCaused by op u'node_2/var_3/x/Assign', defined at:\n  File \"/home/mbasbug/workspace/svn/lcctf/test_handle2.py\", line 41, in &lt;module&gt;\n    dtype=tf.float32)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 1065, in get_variable\n    use_resource=use_resource, custom_getter=custom_getter)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 962, in get_variable\n    use_resource=use_resource, custom_getter=custom_getter)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 367, in get_variable\n    validate_shape=validate_shape, use_resource=use_resource)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 352, in _true_getter\n    use_resource=use_resource)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 725, in _get_single_variable\n    validate_shape=validate_shape)\n  File \"/tensorflow/tensorflow/python/ops/variables.py\", line 199, in __init__\n    expected_shape=expected_shape)\n  File \"/tensorflow/tensorflow/python/ops/variables.py\", line 320, in _init_from_args\n    validate_shape=validate_shape).op\n  File \"/tensorflow/tensorflow/python/ops/state_ops.py\", line 274, in assign\n    validate_shape=validate_shape)\n  File \"/tensorflow/tensorflow/python/ops/gen_state_ops.py\", line 45, in assign\n    use_locking=use_locking, name=name)\n  File \"/tensorflow/tensorflow/python/framework/op_def_library.py\", line 767, in apply_op\n    op_def=op_def)\n  File \"/tensorflow/tensorflow/python/framework/ops.py\", line 2627, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/tensorflow/tensorflow/python/framework/ops.py\", line 1204, in __init__\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\n\nResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[1000,1000,250,4]\n\t [[Node: node_2/var_3/x/Assign = Assign[T=DT_FLOAT, _class=[\"loc:@node_2/var_3/x\"], use_locking=true, validate_shape=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](node_2/var_3/x, GetSessionTensor_14/_99)]]\n</code></pre>", "body_text": "Hi,\nI am getting OOM errors when I try to move data from GPUs to CPU. CPU has 0.5TB memory and when I allocate a large chunk of CPU memory directly there is no problem. However, for some reason cuda_host_bfc allocator sets the limit to 68719476736 which is incidentally 0 in int32. It looks like there is a bug here. Any thoughts?\nThanks\np.s. I disable the auto_gc collector on purpose (with get_raw_handle), so I can quickly clear the GPU memory.\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): y\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian 3.16.43-2+deb8u2 (2017-06-26) x86_64 GNU/Linux\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): v1.2.0-2010-g8605f7a  1.2.1\nPython version: 2.7.12\nBazel version (if compiling from source): 0.5.2\nCUDA/cuDNN version: 8.0.61\nGPU model and memory: 4 x Tesla P100-SXM2-16GB\nExact command to reproduce: python cuda_host_bfc_oom_bug.py > out.log 2> out.err\n\nSource code\ncuda_host_bfc_oom_bug.py:\nimport tensorflow as tf\nif __name__ == '__main__':\n    n_gpus = 4\n    n_rep = 10\n    tensor_shape = [1000,1000,250,4] # 4GB objects\n    x_handle_ops = []\n    coefs = []\n    for i_gpu in range(n_gpus):\n        with tf.device('/gpu:%i' % i_gpu):\n            coef = tf.placeholder(shape=[], dtype=tf.float32)\n            coefs.append(coef)\n            x = coef * tf.ones(tensor_shape,dtype=tf.float32)\n            x_handle_op = tf.get_session_handle(x)\n            x_handle_ops.append(x_handle_op)\n    config = tf.ConfigProto(device_count = {'GPU': n_gpus},\n                            use_per_session_threads=0,\n                            log_device_placement=0,\n                            allow_soft_placement=0)\n    with tf.Session(config=config) as sess:\n        for rep in range(n_rep):\n            x_handles = sess.run(x_handle_ops, feed_dict=dict(zip(coefs, range(n_gpus))))\n            x_handles = [x_handle.get_raw_handle() for x_handle in x_handles]\n            x_vars = []\n            x_placeholders = []\n            x_del_placeholders = []\n            x_deleters = []\n            for i_gpu in range(n_gpus):\n                x_placeholder, x_val = tf.get_session_tensor(x_handles[i_gpu], tf.float32)\n                x_del_placeholder, x_deleter = tf.delete_session_tensor(x_handles[i_gpu])\n                x_placeholders.append(x_placeholder)\n                x_del_placeholders.append(x_del_placeholder)\n                x_deleters.append(x_deleter)\n                x_val.set_shape(tensor_shape)\n                with tf.device('/cpu:0'):\n                    x_copy = tf.identity(x_val)\n                    with tf.variable_scope('node_%i' % i_gpu, reuse=False):\n                        with tf.variable_scope('var_%i' % rep, reuse=False):\n                            x_var = tf.get_variable('x',\n                                                    initializer=x_copy,\n                                                    dtype=tf.float32)\n                    x_vars.append(x_var)\n            sess.run(tf.variables_initializer(x_vars),\n                     feed_dict=dict(zip(x_placeholders, x_handles)))\n            sess.run(x_deleters,\n                     feed_dict=dict(zip(x_del_placeholders, x_handles)))\n\nTraceback\n2017-07-31 11:35:11.906820: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: \nname: Tesla P100-SXM2-16GB\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\npciBusID 0000:05:00.0\nTotal memory: 15.89GiB\nFree memory: 15.61GiB\n2017-07-31 11:35:12.433035: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x18b9550 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\n2017-07-31 11:35:12.434348: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: \nname: Tesla P100-SXM2-16GB\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\npciBusID 0000:06:00.0\nTotal memory: 15.89GiB\nFree memory: 15.61GiB\n2017-07-31 11:35:13.070865: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x2d0b7c0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\n2017-07-31 11:35:13.073944: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 2 with properties: \nname: Tesla P100-SXM2-16GB\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\npciBusID 0000:84:00.0\nTotal memory: 15.89GiB\nFree memory: 15.61GiB\n2017-07-31 11:35:13.832006: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x2d0f150 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\n2017-07-31 11:35:13.834336: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 3 with properties: \nname: Tesla P100-SXM2-16GB\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\npciBusID 0000:85:00.0\nTotal memory: 15.89GiB\nFree memory: 15.61GiB\n2017-07-31 11:35:13.846700: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 2 3 \n2017-07-31 11:35:13.846721: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y Y Y Y \n2017-07-31 11:35:13.846728: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   Y Y Y Y \n2017-07-31 11:35:13.846734: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 2:   Y Y Y Y \n2017-07-31 11:35:13.846741: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 3:   Y Y Y Y \n2017-07-31 11:35:13.846753: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla P100-SXM2-16GB, pci bus id: 0000:05:00.0)\n2017-07-31 11:35:13.846761: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla P100-SXM2-16GB, pci bus id: 0000:06:00.0)\n2017-07-31 11:35:13.846769: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:2) -> (device: 2, name: Tesla P100-SXM2-16GB, pci bus id: 0000:84:00.0)\n2017-07-31 11:35:13.846775: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:3) -> (device: 3, name: Tesla P100-SXM2-16GB, pci bus id: 0000:85:00.0)\n2017-07-31 11:36:02.747322: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\n2017-07-31 11:36:02.747386: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747402: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747414: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747425: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747436: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747455: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747466: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747477: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747488: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747500: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747511: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747522: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747533: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747544: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747555: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747566: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747577: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747588: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747599: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747610: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747621: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.747641: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \n2017-07-31 11:36:02.747653: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\n2017-07-31 11:36:02.747663: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\n2017-07-31 11:36:02.747672: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\n2017-07-31 11:36:02.747681: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\n2017-07-31 11:36:02.747690: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\n2017-07-31 11:36:02.747698: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\n2017-07-31 11:36:02.747707: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\n2017-07-31 11:36:02.747715: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\n2017-07-31 11:36:02.747724: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\n2017-07-31 11:36:02.747732: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\n2017-07-31 11:36:02.747740: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\n2017-07-31 11:36:02.747749: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\n2017-07-31 11:36:02.747757: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\n2017-07-31 11:36:02.747765: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\n2017-07-31 11:36:02.747773: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\n2017-07-31 11:36:02.747781: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\n2017-07-31 11:36:02.747789: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \n2017-07-31 11:36:02.747802: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\n2017-07-31 11:36:02.747812: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\n2017-07-31 11:36:02.747822: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\n2017-07-31 11:36:02.747831: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\n2017-07-31 11:36:02.747840: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\n2017-07-31 11:36:02.747850: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\n2017-07-31 11:36:02.747863: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \nLimit:                 68719476736\nInUse:                 68719476736\nMaxInUse:              68719476736\nNumAllocs:                      32\nMaxAllocSize:           6359738368\n\n2017-07-31 11:36:02.747876: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\n2017-07-31 11:36:02.747900: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\n2017-07-31 11:36:02.747946: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\n2017-07-31 11:36:02.747991: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748006: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748024: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748035: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748046: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748058: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748069: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748080: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748091: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748102: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748113: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748124: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748135: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748146: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748157: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748168: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748179: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748191: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748202: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748216: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748227: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748241: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \n2017-07-31 11:36:02.748252: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\n2017-07-31 11:36:02.748261: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\n2017-07-31 11:36:02.748270: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\n2017-07-31 11:36:02.748281: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\n2017-07-31 11:36:02.748290: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\n2017-07-31 11:36:02.748298: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\n2017-07-31 11:36:02.748306: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\n2017-07-31 11:36:02.748317: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\n2017-07-31 11:36:02.748325: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\n2017-07-31 11:36:02.748334: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\n2017-07-31 11:36:02.748342: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\n2017-07-31 11:36:02.748350: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\n2017-07-31 11:36:02.748358: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\n2017-07-31 11:36:02.748366: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\n2017-07-31 11:36:02.748374: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\n2017-07-31 11:36:02.748382: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\n2017-07-31 11:36:02.748390: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \n2017-07-31 11:36:02.748402: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\n2017-07-31 11:36:02.748412: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\n2017-07-31 11:36:02.748421: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\n2017-07-31 11:36:02.748431: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\n2017-07-31 11:36:02.748440: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\n2017-07-31 11:36:02.748450: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\n2017-07-31 11:36:02.748462: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \nLimit:                 68719476736\nInUse:                 68719476736\nMaxInUse:              68719476736\nNumAllocs:                      32\nMaxAllocSize:           6359738368\n\n2017-07-31 11:36:02.748475: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\n2017-07-31 11:36:02.748500: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\n2017-07-31 11:36:02.748547: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\n2017-07-31 11:36:02.748593: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748607: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748618: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748629: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748641: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748652: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748663: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748674: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748685: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748696: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748707: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748719: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748730: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748741: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748824: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748841: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748861: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748873: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748884: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748895: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748906: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.748920: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \n2017-07-31 11:36:02.748931: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\n2017-07-31 11:36:02.748940: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\n2017-07-31 11:36:02.748948: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\n2017-07-31 11:36:02.748957: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\n2017-07-31 11:36:02.748965: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\n2017-07-31 11:36:02.748973: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\n2017-07-31 11:36:02.748981: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\n2017-07-31 11:36:02.748990: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\n2017-07-31 11:36:02.748998: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\n2017-07-31 11:36:02.749006: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\n2017-07-31 11:36:02.749014: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\n2017-07-31 11:36:02.749022: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\n2017-07-31 11:36:02.749030: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\n2017-07-31 11:36:02.749038: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\n2017-07-31 11:36:02.749046: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\n2017-07-31 11:36:02.749054: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\n2017-07-31 11:36:02.749062: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \n2017-07-31 11:36:02.749074: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\n2017-07-31 11:36:02.749084: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\n2017-07-31 11:36:02.749094: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\n2017-07-31 11:36:02.749103: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\n2017-07-31 11:36:02.749116: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\n2017-07-31 11:36:02.749126: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\n2017-07-31 11:36:02.749139: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \nLimit:                 68719476736\nInUse:                 68719476736\nMaxInUse:              68719476736\nNumAllocs:                      32\nMaxAllocSize:           6359738368\n\n2017-07-31 11:36:02.749152: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\n2017-07-31 11:36:02.749174: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\n2017-07-31 11:36:02.749222: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\n2017-07-31 11:36:02.749266: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749282: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749293: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749305: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749316: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749327: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749338: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749349: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749360: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749371: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749382: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749393: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749404: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749422: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749434: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749445: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749456: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749468: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749479: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749490: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749501: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-07-31 11:36:02.749515: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \n2017-07-31 11:36:02.749526: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\n2017-07-31 11:36:02.749535: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\n2017-07-31 11:36:02.749544: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\n2017-07-31 11:36:02.749552: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\n2017-07-31 11:36:02.749561: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\n2017-07-31 11:36:02.749569: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\n2017-07-31 11:36:02.749578: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\n2017-07-31 11:36:02.749586: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\n2017-07-31 11:36:02.749610: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\n2017-07-31 11:36:02.749617: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\n2017-07-31 11:36:02.749625: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\n2017-07-31 11:36:02.749632: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\n2017-07-31 11:36:02.749640: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\n2017-07-31 11:36:02.749647: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\n2017-07-31 11:36:02.749655: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\n2017-07-31 11:36:02.749665: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\n2017-07-31 11:36:02.749673: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \n2017-07-31 11:36:02.749684: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\n2017-07-31 11:36:02.749694: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\n2017-07-31 11:36:02.749702: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\n2017-07-31 11:36:02.749711: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\n2017-07-31 11:36:02.749719: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\n2017-07-31 11:36:02.749728: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\n2017-07-31 11:36:02.749740: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \nLimit:                 68719476736\nInUse:                 68719476736\nMaxInUse:              68719476736\nNumAllocs:                      32\nMaxAllocSize:           6359738368\n\n2017-07-31 11:36:02.749753: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\n2017-07-31 11:36:02.749773: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\nTraceback (most recent call last):\n  File \"/home/mbasbug/workspace/svn/lcctf/test_handle2.py\", line 44, in <module>\n    feed_dict=dict(zip(x_placeholders, x_handles)))\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 895, in run\n    run_metadata_ptr)\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1124, in _run\n    feed_dict_tensor, options, run_metadata)\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1321, in _do_run\n    options, run_metadata)\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1340, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1000,1000,250,4]\n\t [[Node: node_2/var_3/x/Assign = Assign[T=DT_FLOAT, _class=[\"loc:@node_2/var_3/x\"], use_locking=true, validate_shape=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](node_2/var_3/x, GetSessionTensor_14/_99)]]\n\nCaused by op u'node_2/var_3/x/Assign', defined at:\n  File \"/home/mbasbug/workspace/svn/lcctf/test_handle2.py\", line 41, in <module>\n    dtype=tf.float32)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 1065, in get_variable\n    use_resource=use_resource, custom_getter=custom_getter)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 962, in get_variable\n    use_resource=use_resource, custom_getter=custom_getter)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 367, in get_variable\n    validate_shape=validate_shape, use_resource=use_resource)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 352, in _true_getter\n    use_resource=use_resource)\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 725, in _get_single_variable\n    validate_shape=validate_shape)\n  File \"/tensorflow/tensorflow/python/ops/variables.py\", line 199, in __init__\n    expected_shape=expected_shape)\n  File \"/tensorflow/tensorflow/python/ops/variables.py\", line 320, in _init_from_args\n    validate_shape=validate_shape).op\n  File \"/tensorflow/tensorflow/python/ops/state_ops.py\", line 274, in assign\n    validate_shape=validate_shape)\n  File \"/tensorflow/tensorflow/python/ops/gen_state_ops.py\", line 45, in assign\n    use_locking=use_locking, name=name)\n  File \"/tensorflow/tensorflow/python/framework/op_def_library.py\", line 767, in apply_op\n    op_def=op_def)\n  File \"/tensorflow/tensorflow/python/framework/ops.py\", line 2627, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/tensorflow/tensorflow/python/framework/ops.py\", line 1204, in __init__\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\n\nResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[1000,1000,250,4]\n\t [[Node: node_2/var_3/x/Assign = Assign[T=DT_FLOAT, _class=[\"loc:@node_2/var_3/x\"], use_locking=true, validate_shape=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](node_2/var_3/x, GetSessionTensor_14/_99)]]", "body": "Hi,\r\n\r\nI am getting OOM errors when I try to move data from GPUs to CPU. CPU has 0.5TB memory and when I allocate a large chunk of CPU memory directly there is no problem. However, for some reason cuda_host_bfc allocator sets the limit to 68719476736 which is incidentally 0 in int32. It looks like there is a bug here. Any thoughts?\r\n\r\nThanks\r\n\r\np.s. I disable the auto_gc collector on purpose (with get_raw_handle), so I can quickly clear the GPU memory.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: y\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Debian 3.16.43-2+deb8u2 (2017-06-26) x86_64 GNU/Linux\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: v1.2.0-2010-g8605f7a  1.2.1\r\n- **Python version**: 2.7.12\r\n- **Bazel version (if compiling from source)**: 0.5.2\r\n- **CUDA/cuDNN version**: 8.0.61\r\n- **GPU model and memory**: 4 x Tesla P100-SXM2-16GB \r\n- **Exact command to reproduce**: python cuda_host_bfc_oom_bug.py > out.log 2> out.err\r\n\r\n### Source code\r\ncuda_host_bfc_oom_bug.py:\r\n\r\n```\r\nimport tensorflow as tf\r\nif __name__ == '__main__':\r\n    n_gpus = 4\r\n    n_rep = 10\r\n    tensor_shape = [1000,1000,250,4] # 4GB objects\r\n    x_handle_ops = []\r\n    coefs = []\r\n    for i_gpu in range(n_gpus):\r\n        with tf.device('/gpu:%i' % i_gpu):\r\n            coef = tf.placeholder(shape=[], dtype=tf.float32)\r\n            coefs.append(coef)\r\n            x = coef * tf.ones(tensor_shape,dtype=tf.float32)\r\n            x_handle_op = tf.get_session_handle(x)\r\n            x_handle_ops.append(x_handle_op)\r\n    config = tf.ConfigProto(device_count = {'GPU': n_gpus},\r\n                            use_per_session_threads=0,\r\n                            log_device_placement=0,\r\n                            allow_soft_placement=0)\r\n    with tf.Session(config=config) as sess:\r\n        for rep in range(n_rep):\r\n            x_handles = sess.run(x_handle_ops, feed_dict=dict(zip(coefs, range(n_gpus))))\r\n            x_handles = [x_handle.get_raw_handle() for x_handle in x_handles]\r\n            x_vars = []\r\n            x_placeholders = []\r\n            x_del_placeholders = []\r\n            x_deleters = []\r\n            for i_gpu in range(n_gpus):\r\n                x_placeholder, x_val = tf.get_session_tensor(x_handles[i_gpu], tf.float32)\r\n                x_del_placeholder, x_deleter = tf.delete_session_tensor(x_handles[i_gpu])\r\n                x_placeholders.append(x_placeholder)\r\n                x_del_placeholders.append(x_del_placeholder)\r\n                x_deleters.append(x_deleter)\r\n                x_val.set_shape(tensor_shape)\r\n                with tf.device('/cpu:0'):\r\n                    x_copy = tf.identity(x_val)\r\n                    with tf.variable_scope('node_%i' % i_gpu, reuse=False):\r\n                        with tf.variable_scope('var_%i' % rep, reuse=False):\r\n                            x_var = tf.get_variable('x',\r\n                                                    initializer=x_copy,\r\n                                                    dtype=tf.float32)\r\n                    x_vars.append(x_var)\r\n            sess.run(tf.variables_initializer(x_vars),\r\n                     feed_dict=dict(zip(x_placeholders, x_handles)))\r\n            sess.run(x_deleters,\r\n                     feed_dict=dict(zip(x_del_placeholders, x_handles)))\r\n```\r\n\r\n### Traceback\r\n\r\n```\r\n2017-07-31 11:35:11.906820: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: \r\nname: Tesla P100-SXM2-16GB\r\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\r\npciBusID 0000:05:00.0\r\nTotal memory: 15.89GiB\r\nFree memory: 15.61GiB\r\n2017-07-31 11:35:12.433035: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x18b9550 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\r\n2017-07-31 11:35:12.434348: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: \r\nname: Tesla P100-SXM2-16GB\r\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\r\npciBusID 0000:06:00.0\r\nTotal memory: 15.89GiB\r\nFree memory: 15.61GiB\r\n2017-07-31 11:35:13.070865: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x2d0b7c0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\r\n2017-07-31 11:35:13.073944: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 2 with properties: \r\nname: Tesla P100-SXM2-16GB\r\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\r\npciBusID 0000:84:00.0\r\nTotal memory: 15.89GiB\r\nFree memory: 15.61GiB\r\n2017-07-31 11:35:13.832006: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x2d0f150 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.\r\n2017-07-31 11:35:13.834336: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 3 with properties: \r\nname: Tesla P100-SXM2-16GB\r\nmajor: 6 minor: 0 memoryClockRate (GHz) 1.4805\r\npciBusID 0000:85:00.0\r\nTotal memory: 15.89GiB\r\nFree memory: 15.61GiB\r\n2017-07-31 11:35:13.846700: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 2 3 \r\n2017-07-31 11:35:13.846721: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y Y Y Y \r\n2017-07-31 11:35:13.846728: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   Y Y Y Y \r\n2017-07-31 11:35:13.846734: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 2:   Y Y Y Y \r\n2017-07-31 11:35:13.846741: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 3:   Y Y Y Y \r\n2017-07-31 11:35:13.846753: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla P100-SXM2-16GB, pci bus id: 0000:05:00.0)\r\n2017-07-31 11:35:13.846761: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla P100-SXM2-16GB, pci bus id: 0000:06:00.0)\r\n2017-07-31 11:35:13.846769: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:2) -> (device: 2, name: Tesla P100-SXM2-16GB, pci bus id: 0000:84:00.0)\r\n2017-07-31 11:35:13.846775: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:3) -> (device: 3, name: Tesla P100-SXM2-16GB, pci bus id: 0000:85:00.0)\r\n2017-07-31 11:36:02.747322: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\r\n2017-07-31 11:36:02.747386: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747402: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747414: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747425: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747436: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747455: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747466: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747477: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747488: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747500: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747511: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747522: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747533: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747544: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747555: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747566: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747577: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747588: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747599: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747610: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747621: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.747641: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \r\n2017-07-31 11:36:02.747653: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\r\n2017-07-31 11:36:02.747663: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\r\n2017-07-31 11:36:02.747672: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\r\n2017-07-31 11:36:02.747681: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\r\n2017-07-31 11:36:02.747690: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\r\n2017-07-31 11:36:02.747698: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\r\n2017-07-31 11:36:02.747707: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\r\n2017-07-31 11:36:02.747715: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\r\n2017-07-31 11:36:02.747724: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\r\n2017-07-31 11:36:02.747732: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\r\n2017-07-31 11:36:02.747740: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\r\n2017-07-31 11:36:02.747749: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\r\n2017-07-31 11:36:02.747757: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\r\n2017-07-31 11:36:02.747765: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\r\n2017-07-31 11:36:02.747773: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\r\n2017-07-31 11:36:02.747781: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\r\n2017-07-31 11:36:02.747789: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \r\n2017-07-31 11:36:02.747802: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\r\n2017-07-31 11:36:02.747812: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\r\n2017-07-31 11:36:02.747822: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\r\n2017-07-31 11:36:02.747831: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\r\n2017-07-31 11:36:02.747840: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\r\n2017-07-31 11:36:02.747850: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\r\n2017-07-31 11:36:02.747863: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \r\nLimit:                 68719476736\r\nInUse:                 68719476736\r\nMaxInUse:              68719476736\r\nNumAllocs:                      32\r\nMaxAllocSize:           6359738368\r\n\r\n2017-07-31 11:36:02.747876: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\r\n2017-07-31 11:36:02.747900: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\r\n2017-07-31 11:36:02.747946: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\r\n2017-07-31 11:36:02.747991: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748006: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748024: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748035: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748046: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748058: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748069: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748080: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748091: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748102: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748113: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748124: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748135: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748146: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748157: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748168: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748179: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748191: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748202: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748216: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748227: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748241: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \r\n2017-07-31 11:36:02.748252: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\r\n2017-07-31 11:36:02.748261: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\r\n2017-07-31 11:36:02.748270: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\r\n2017-07-31 11:36:02.748281: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\r\n2017-07-31 11:36:02.748290: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\r\n2017-07-31 11:36:02.748298: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\r\n2017-07-31 11:36:02.748306: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\r\n2017-07-31 11:36:02.748317: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\r\n2017-07-31 11:36:02.748325: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\r\n2017-07-31 11:36:02.748334: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\r\n2017-07-31 11:36:02.748342: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\r\n2017-07-31 11:36:02.748350: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\r\n2017-07-31 11:36:02.748358: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\r\n2017-07-31 11:36:02.748366: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\r\n2017-07-31 11:36:02.748374: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\r\n2017-07-31 11:36:02.748382: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\r\n2017-07-31 11:36:02.748390: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \r\n2017-07-31 11:36:02.748402: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\r\n2017-07-31 11:36:02.748412: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\r\n2017-07-31 11:36:02.748421: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\r\n2017-07-31 11:36:02.748431: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\r\n2017-07-31 11:36:02.748440: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\r\n2017-07-31 11:36:02.748450: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\r\n2017-07-31 11:36:02.748462: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \r\nLimit:                 68719476736\r\nInUse:                 68719476736\r\nMaxInUse:              68719476736\r\nNumAllocs:                      32\r\nMaxAllocSize:           6359738368\r\n\r\n2017-07-31 11:36:02.748475: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\r\n2017-07-31 11:36:02.748500: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\r\n2017-07-31 11:36:02.748547: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\r\n2017-07-31 11:36:02.748593: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748607: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748618: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748629: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748641: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748652: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748663: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748674: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748685: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748696: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748707: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748719: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748730: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748741: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748824: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748841: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748861: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748873: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748884: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748895: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748906: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.748920: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \r\n2017-07-31 11:36:02.748931: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\r\n2017-07-31 11:36:02.748940: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\r\n2017-07-31 11:36:02.748948: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\r\n2017-07-31 11:36:02.748957: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\r\n2017-07-31 11:36:02.748965: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\r\n2017-07-31 11:36:02.748973: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\r\n2017-07-31 11:36:02.748981: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\r\n2017-07-31 11:36:02.748990: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\r\n2017-07-31 11:36:02.748998: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\r\n2017-07-31 11:36:02.749006: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\r\n2017-07-31 11:36:02.749014: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\r\n2017-07-31 11:36:02.749022: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\r\n2017-07-31 11:36:02.749030: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\r\n2017-07-31 11:36:02.749038: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\r\n2017-07-31 11:36:02.749046: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\r\n2017-07-31 11:36:02.749054: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\r\n2017-07-31 11:36:02.749062: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \r\n2017-07-31 11:36:02.749074: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\r\n2017-07-31 11:36:02.749084: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\r\n2017-07-31 11:36:02.749094: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\r\n2017-07-31 11:36:02.749103: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\r\n2017-07-31 11:36:02.749116: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\r\n2017-07-31 11:36:02.749126: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\r\n2017-07-31 11:36:02.749139: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \r\nLimit:                 68719476736\r\nInUse:                 68719476736\r\nMaxInUse:              68719476736\r\nNumAllocs:                      32\r\nMaxAllocSize:           6359738368\r\n\r\n2017-07-31 11:36:02.749152: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\r\n2017-07-31 11:36:02.749174: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\r\n2017-07-31 11:36:02.749222: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (cuda_host_bfc) ran out of memory trying to allocate 3.72GiB.  Current allocation summary follows.\r\n2017-07-31 11:36:02.749266: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (256): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749282: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (512): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749293: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1024): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749305: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749316: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749327: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749338: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749349: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749360: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (65536): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749371: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749382: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749393: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749404: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (1048576): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749422: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (2097152): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749434: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (4194304): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749445: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749456: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749468: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749479: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749490: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749501: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0 0B allocated for chunks. 0B client-requested for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-07-31 11:36:02.749515: I tensorflow/core/common_runtime/bfc_allocator.cc:660] Bin for 3.72GiB was 256.00MiB, Chunk State: \r\n2017-07-31 11:36:02.749526: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1172d000000 of size 4294967296\r\n2017-07-31 11:36:02.749535: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1182d800000 of size 4294967296\r\n2017-07-31 11:36:02.749544: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1192d800000 of size 4000000000\r\n2017-07-31 11:36:02.749552: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11a1beb2800 of size 4589934592\r\n2017-07-31 11:36:02.749561: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11b2d800000 of size 4000000000\r\n2017-07-31 11:36:02.749569: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11c1beb2800 of size 4000000000\r\n2017-07-31 11:36:02.749578: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11d0a565000 of size 4000000000\r\n2017-07-31 11:36:02.749586: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11df8c17800 of size 5179869184\r\n2017-07-31 11:36:02.749610: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x11f2d800000 of size 4000000000\r\n2017-07-31 11:36:02.749617: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1201beb2800 of size 4000000000\r\n2017-07-31 11:36:02.749625: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x1210a565000 of size 4000000000\r\n2017-07-31 11:36:02.749632: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x121f8c17800 of size 4000000000\r\n2017-07-31 11:36:02.749640: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x122e72ca000 of size 4000000000\r\n2017-07-31 11:36:02.749647: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x123d597c800 of size 4000000000\r\n2017-07-31 11:36:02.749655: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x124c402f000 of size 4000000000\r\n2017-07-31 11:36:02.749665: I tensorflow/core/common_runtime/bfc_allocator.cc:678] Chunk at 0x125b26e1800 of size 6359738368\r\n2017-07-31 11:36:02.749673: I tensorflow/core/common_runtime/bfc_allocator.cc:693]      Summary of in-use Chunks by size: \r\n2017-07-31 11:36:02.749684: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 11 Chunks of size 4000000000 totalling 40.98GiB\r\n2017-07-31 11:36:02.749694: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 2 Chunks of size 4294967296 totalling 8.00GiB\r\n2017-07-31 11:36:02.749702: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 4589934592 totalling 4.27GiB\r\n2017-07-31 11:36:02.749711: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 5179869184 totalling 4.82GiB\r\n2017-07-31 11:36:02.749719: I tensorflow/core/common_runtime/bfc_allocator.cc:696] 1 Chunks of size 6359738368 totalling 5.92GiB\r\n2017-07-31 11:36:02.749728: I tensorflow/core/common_runtime/bfc_allocator.cc:700] Sum Total of in-use chunks: 64.00GiB\r\n2017-07-31 11:36:02.749740: I tensorflow/core/common_runtime/bfc_allocator.cc:702] Stats: \r\nLimit:                 68719476736\r\nInUse:                 68719476736\r\nMaxInUse:              68719476736\r\nNumAllocs:                      32\r\nMaxAllocSize:           6359738368\r\n\r\n2017-07-31 11:36:02.749753: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *************************************************x***********************************************xxx\r\n2017-07-31 11:36:02.749773: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[1000,1000,250,4]\r\nTraceback (most recent call last):\r\n  File \"/home/mbasbug/workspace/svn/lcctf/test_handle2.py\", line 44, in <module>\r\n    feed_dict=dict(zip(x_placeholders, x_handles)))\r\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 895, in run\r\n    run_metadata_ptr)\r\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1124, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1321, in _do_run\r\n    options, run_metadata)\r\n  File \"/tensorflow/tensorflow/python/client/session.py\", line 1340, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[1000,1000,250,4]\r\n\t [[Node: node_2/var_3/x/Assign = Assign[T=DT_FLOAT, _class=[\"loc:@node_2/var_3/x\"], use_locking=true, validate_shape=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](node_2/var_3/x, GetSessionTensor_14/_99)]]\r\n\r\nCaused by op u'node_2/var_3/x/Assign', defined at:\r\n  File \"/home/mbasbug/workspace/svn/lcctf/test_handle2.py\", line 41, in <module>\r\n    dtype=tf.float32)\r\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 1065, in get_variable\r\n    use_resource=use_resource, custom_getter=custom_getter)\r\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 962, in get_variable\r\n    use_resource=use_resource, custom_getter=custom_getter)\r\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 367, in get_variable\r\n    validate_shape=validate_shape, use_resource=use_resource)\r\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 352, in _true_getter\r\n    use_resource=use_resource)\r\n  File \"/tensorflow/tensorflow/python/ops/variable_scope.py\", line 725, in _get_single_variable\r\n    validate_shape=validate_shape)\r\n  File \"/tensorflow/tensorflow/python/ops/variables.py\", line 199, in __init__\r\n    expected_shape=expected_shape)\r\n  File \"/tensorflow/tensorflow/python/ops/variables.py\", line 320, in _init_from_args\r\n    validate_shape=validate_shape).op\r\n  File \"/tensorflow/tensorflow/python/ops/state_ops.py\", line 274, in assign\r\n    validate_shape=validate_shape)\r\n  File \"/tensorflow/tensorflow/python/ops/gen_state_ops.py\", line 45, in assign\r\n    use_locking=use_locking, name=name)\r\n  File \"/tensorflow/tensorflow/python/framework/op_def_library.py\", line 767, in apply_op\r\n    op_def=op_def)\r\n  File \"/tensorflow/tensorflow/python/framework/ops.py\", line 2627, in create_op\r\n    original_op=self._default_original_op, op_def=op_def)\r\n  File \"/tensorflow/tensorflow/python/framework/ops.py\", line 1204, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[1000,1000,250,4]\r\n\t [[Node: node_2/var_3/x/Assign = Assign[T=DT_FLOAT, _class=[\"loc:@node_2/var_3/x\"], use_locking=true, validate_shape=true, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](node_2/var_3/x, GetSessionTensor_14/_99)]]\r\n```\r\n\r\n\r\n"}
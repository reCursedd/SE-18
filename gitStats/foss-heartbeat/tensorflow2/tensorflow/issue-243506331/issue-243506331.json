{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11557", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11557/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11557/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11557/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11557", "id": 243506331, "node_id": "MDU6SXNzdWUyNDM1MDYzMzE=", "number": 11557, "title": "TF/Keras RNN initial_state with stateful = false", "user": {"login": "junja94", "id": 11274278, "node_id": "MDQ6VXNlcjExMjc0Mjc4", "avatar_url": "https://avatars1.githubusercontent.com/u/11274278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/junja94", "html_url": "https://github.com/junja94", "followers_url": "https://api.github.com/users/junja94/followers", "following_url": "https://api.github.com/users/junja94/following{/other_user}", "gists_url": "https://api.github.com/users/junja94/gists{/gist_id}", "starred_url": "https://api.github.com/users/junja94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/junja94/subscriptions", "organizations_url": "https://api.github.com/users/junja94/orgs", "repos_url": "https://api.github.com/users/junja94/repos", "events_url": "https://api.github.com/users/junja94/events{/privacy}", "received_events_url": "https://api.github.com/users/junja94/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2017-07-17T19:48:32Z", "updated_at": "2017-07-18T08:19:37Z", "closed_at": "2017-07-17T23:36:07Z", "author_association": "NONE", "body_html": "<p>I'm trying to put different initial hidden state into recurrent layers. I saw many issues about initializing states using keras and most of the solutions were using layer.reset_state(state). But in my application, I have to set stateful = False and I cannot use reset_state. As it is written in the document, I tried initial_state argument in calling layers.</p>\n<p>Using the code below, I compared the outputs and the resulting outputs were always the same. I tried different initializers and different initial states but the both outputs were the same.</p>\n<p><strong>When the stateful is False, is there other possible way to set initial hidden state???</strong></p>\n<p>for size in dimension[1:]:<br>\ninitial_ = tf.ones(shape=[batchnum, size])<br>\nrecurrent_layer = GRU(units=size, return_sequences=True, kernel_initializer=one,<br>\nrecurrent_initializer=one)<br>\nrecurrent_layertest = GRU(units=size, return_sequences=True, kernel_initializer=one,<br>\nrecurrent_initializer=one)</p>\n<pre><code>x = recurrent_layer(inputs=x)\nxtest = recurrent_layertest(inputs=xtest, initial_state = initial_)\n</code></pre>\n<p>In my last issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"243431186\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/11553\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/11553/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/11553\">#11553</a>, there was a suggestion to put inputs as [state, initial state] and It didn't work saying GRU has no attribute 'states'. I think this happens because the stateful is False.</p>", "body_text": "I'm trying to put different initial hidden state into recurrent layers. I saw many issues about initializing states using keras and most of the solutions were using layer.reset_state(state). But in my application, I have to set stateful = False and I cannot use reset_state. As it is written in the document, I tried initial_state argument in calling layers.\nUsing the code below, I compared the outputs and the resulting outputs were always the same. I tried different initializers and different initial states but the both outputs were the same.\nWhen the stateful is False, is there other possible way to set initial hidden state???\nfor size in dimension[1:]:\ninitial_ = tf.ones(shape=[batchnum, size])\nrecurrent_layer = GRU(units=size, return_sequences=True, kernel_initializer=one,\nrecurrent_initializer=one)\nrecurrent_layertest = GRU(units=size, return_sequences=True, kernel_initializer=one,\nrecurrent_initializer=one)\nx = recurrent_layer(inputs=x)\nxtest = recurrent_layertest(inputs=xtest, initial_state = initial_)\n\nIn my last issue #11553, there was a suggestion to put inputs as [state, initial state] and It didn't work saying GRU has no attribute 'states'. I think this happens because the stateful is False.", "body": "I'm trying to put different initial hidden state into recurrent layers. I saw many issues about initializing states using keras and most of the solutions were using layer.reset_state(state). But in my application, I have to set stateful = False and I cannot use reset_state. As it is written in the document, I tried initial_state argument in calling layers. \r\n\r\nUsing the code below, I compared the outputs and the resulting outputs were always the same. I tried different initializers and different initial states but the both outputs were the same.\r\n\r\n**When the stateful is False, is there other possible way to set initial hidden state???**\r\n\r\nfor size in dimension[1:]:\r\n    initial_ = tf.ones(shape=[batchnum, size])\r\n    recurrent_layer = GRU(units=size, return_sequences=True, kernel_initializer=one,\r\n                                 recurrent_initializer=one)\r\n    recurrent_layertest = GRU(units=size, return_sequences=True, kernel_initializer=one,\r\n                                 recurrent_initializer=one)\r\n\r\n    x = recurrent_layer(inputs=x)\r\n    xtest = recurrent_layertest(inputs=xtest, initial_state = initial_)\r\n\r\nIn my last issue https://github.com/tensorflow/tensorflow/issues/11553, there was a suggestion to put inputs as [state, initial state] and It didn't work saying GRU has no attribute 'states'. I think this happens because the stateful is False."}
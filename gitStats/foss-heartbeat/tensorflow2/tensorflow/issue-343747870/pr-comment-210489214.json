{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/210489214", "pull_request_review_id": 146713197, "id": 210489214, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMDQ4OTIxNA==", "diff_hunk": "@@ -734,3 +741,372 @@ def frechet_classifier_distance_from_activations(real_activations,\n     frechet_classifier_distance,\n     classifier_fn=functools.partial(\n         run_inception, output_tensor=INCEPTION_FINAL_POOL))\n+\n+\n+def kernel_classifier_distance(real_images,\n+                               generated_images,\n+                               classifier_fn,\n+                               num_classifier_batches=1,\n+                               max_block_size=1024,\n+                               dtype=None):\n+  \"\"\"Kernel \"classifier\" distance for evaluating a generative model.\n+\n+  This is based on the Kernel Inception distance, but for an arbitrary\n+  embedding.\n+\n+  This technique is described in detail in https://arxiv.org/abs/1801.01401.\n+  Given two distributions P and Q of activations, this function calculates\n+\n+      E_{X, X' ~ P}[k(X, X')] + E_{Y, Y' ~ Q}[k(Y, Y')]\n+        - 2 E_{X ~ P, Y ~ Q}[k(X, Y)]\n+\n+  where k is the polynomial kernel\n+\n+      k(x, y) = ( x^T y / dimension + 1 )^3.\n+\n+  This captures how different the distributions of real and generated images'\n+  visual features are. Like the Frechet distance (and unlike the Inception\n+  score), this is a true distance and incorporates information about the\n+  target images. Unlike the Frechet score, this function computes an\n+  *unbiased* and asymptotically normal estimator, which makes comparing\n+  estimates across models much more intuitive.\n+\n+  The estimator used takes time quadratic in max_block_size. Larger values of\n+  max_block_size will decrease the variance of the estimator but increase the\n+  computational cost. This differs slightly from the estimator used by the\n+  original paper; it is the block estimator of https://arxiv.org/abs/1307.1954.\n+\n+  NOTE: the blocking code assumes that real_activations and\n+\ufffc generated_activations are both in random order. If real_activations is sorted\n+\ufffc in a meaningful order, the estimator will be biased.\n+", "path": "tensorflow/contrib/gan/python/eval/python/classifier_metrics_impl.py", "position": null, "original_position": 74, "commit_id": "ef2c1190d6dc7ec8bca911d03ca2c67b8692a293", "original_commit_id": "5e31a27835c60c9510d1c000b851c573e910f378", "user": {"login": "joel-shor", "id": 6020988, "node_id": "MDQ6VXNlcjYwMjA5ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/6020988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joel-shor", "html_url": "https://github.com/joel-shor", "followers_url": "https://api.github.com/users/joel-shor/followers", "following_url": "https://api.github.com/users/joel-shor/following{/other_user}", "gists_url": "https://api.github.com/users/joel-shor/gists{/gist_id}", "starred_url": "https://api.github.com/users/joel-shor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joel-shor/subscriptions", "organizations_url": "https://api.github.com/users/joel-shor/orgs", "repos_url": "https://api.github.com/users/joel-shor/repos", "events_url": "https://api.github.com/users/joel-shor/events{/privacy}", "received_events_url": "https://api.github.com/users/joel-shor/received_events", "type": "User", "site_admin": false}, "body": "nit: Is the indentation here correct?", "created_at": "2018-08-16T06:34:36Z", "updated_at": "2018-09-24T12:53:53Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/21066#discussion_r210489214", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21066", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/210489214"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/21066#discussion_r210489214"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21066"}}, "body_html": "<p>nit: Is the indentation here correct?</p>", "body_text": "nit: Is the indentation here correct?"}
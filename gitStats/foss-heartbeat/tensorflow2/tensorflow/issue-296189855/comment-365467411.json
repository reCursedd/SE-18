{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/365467411", "html_url": "https://github.com/tensorflow/tensorflow/issues/16934#issuecomment-365467411", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16934", "id": 365467411, "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTQ2NzQxMQ==", "user": {"login": "cy89", "id": 29663194, "node_id": "MDQ6VXNlcjI5NjYzMTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/29663194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cy89", "html_url": "https://github.com/cy89", "followers_url": "https://api.github.com/users/cy89/followers", "following_url": "https://api.github.com/users/cy89/following{/other_user}", "gists_url": "https://api.github.com/users/cy89/gists{/gist_id}", "starred_url": "https://api.github.com/users/cy89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cy89/subscriptions", "organizations_url": "https://api.github.com/users/cy89/orgs", "repos_url": "https://api.github.com/users/cy89/repos", "events_url": "https://api.github.com/users/cy89/events{/privacy}", "received_events_url": "https://api.github.com/users/cy89/received_events", "type": "User", "site_admin": false}, "created_at": "2018-02-14T01:40:01Z", "updated_at": "2018-02-14T01:40:01Z", "author_association": "NONE", "body_html": "<p>More sanity checking: it kinda looks like you're getting the weird failure because one of the assert operations isn't implemented on the GPU. But the assertion line that's blowing is at :162 of confusion_matrix.py:<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/b2a0f1c45b2283910548ebd88ee5aaf4b6fc6077/tensorflow/python/ops/confusion_matrix.py#L162\">tensorflow/tensorflow/python/ops/confusion_matrix.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 162\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/b2a0f1c45b2283910548ebd88ee5aaf4b6fc6077\">b2a0f1c</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L162\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"162\"></td>\n          <td id=\"LC162\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> labels <span class=\"pl-k\">=</span> control_flow_ops.with_dependencies( </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>Can you copy the assertion that labels and predictions are non-negative to just before your confusion matrix code, and see if it fires on GPU but not CPU? That would suggest that you're getting different calculated values on CPU and GPU, and maybe help us find the root cause.</p>", "body_text": "More sanity checking: it kinda looks like you're getting the weird failure because one of the assert operations isn't implemented on the GPU. But the assertion line that's blowing is at :162 of confusion_matrix.py:\n\n  \n    \n      tensorflow/tensorflow/python/ops/confusion_matrix.py\n    \n    \n         Line 162\n      in\n      b2a0f1c\n    \n    \n    \n    \n\n        \n          \n           labels = control_flow_ops.with_dependencies( \n        \n    \n  \n\n\nCan you copy the assertion that labels and predictions are non-negative to just before your confusion matrix code, and see if it fires on GPU but not CPU? That would suggest that you're getting different calculated values on CPU and GPU, and maybe help us find the root cause.", "body": "More sanity checking: it kinda looks like you're getting the weird failure because one of the assert operations isn't implemented on the GPU. But the assertion line that's blowing is at :162 of confusion_matrix.py: \r\nhttps://github.com/tensorflow/tensorflow/blob/b2a0f1c45b2283910548ebd88ee5aaf4b6fc6077/tensorflow/python/ops/confusion_matrix.py#L162\r\n\r\nCan you copy the assertion that labels and predictions are non-negative to just before your confusion matrix code, and see if it fires on GPU but not CPU? That would suggest that you're getting different calculated values on CPU and GPU, and maybe help us find the root cause.\r\n"}
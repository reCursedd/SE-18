{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20272", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20272/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20272/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/20272/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/20272", "id": 335342656, "node_id": "MDU6SXNzdWUzMzUzNDI2NTY=", "number": 20272, "title": "Custom implementation for Dequantize when converting .pb to .tflite", "user": {"login": "duplex143", "id": 24863030, "node_id": "MDQ6VXNlcjI0ODYzMDMw", "avatar_url": "https://avatars2.githubusercontent.com/u/24863030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duplex143", "html_url": "https://github.com/duplex143", "followers_url": "https://api.github.com/users/duplex143/followers", "following_url": "https://api.github.com/users/duplex143/following{/other_user}", "gists_url": "https://api.github.com/users/duplex143/gists{/gist_id}", "starred_url": "https://api.github.com/users/duplex143/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duplex143/subscriptions", "organizations_url": "https://api.github.com/users/duplex143/orgs", "repos_url": "https://api.github.com/users/duplex143/repos", "events_url": "https://api.github.com/users/duplex143/events{/privacy}", "received_events_url": "https://api.github.com/users/duplex143/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2018-06-25T10:11:23Z", "updated_at": "2018-06-30T06:57:50Z", "closed_at": "2018-06-30T06:57:50Z", "author_association": "NONE", "body_html": "<p>I'm trying to convert tensorflow quantised .pb file to .lite using toco. The command for creating .pb file is :<br>\nretrain.py is <a href=\"https://github.com/googlecodelabs/tensorflow-for-poets-2/blob/master/scripts/retrain.py\">here</a> and <a href=\"https://github.com/tensorflow/hub/blob/master/examples/image_retraining/retrain.py\">here</a>.</p>\n<pre><code>python retrain.py \\\n--bottleneck_dir=/mobilenet_q/bottlenecks \\\n--how_many_training_steps=4000 \\\n--output_graph=/mobilenet_q/retrained_graph_mobilenet_q_1_224.pb \\\n--output_labels=/mobilenet_q/retrained_labels_mobilenet_q_1_224.txt \\\n--image_dir=/data \\\n--architecture=mobilenet_1.0_224_quantized\n</code></pre>\n<p>When I'm trying to convert the .pb file to .tflite using toco command:</p>\n<pre><code>bazel run --config=opt //tensorflow/contrib/lite/toco:toco \\\n  -- --input_file= retrained_graph_mobilenet_q_1_224.pb \\\n  --output_file= retrained_graph_mobilenet_q_1_224.lite \\\n  --input_format=TENSORFLOW_GRAPHDEF \\\n  --output_format=TFLITE \\\n  --input_shape=1,224,224,3 \\\n  --input_array=input \\\n  --output_array=final_result \\\n  --inference_type=FLOAT \\\n  --input_data_type=FLOAT\n</code></pre>\n<p>I'm getting the error:<br>\n<code>Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.contrib.lite.toco_convert(). Here is a list of operators for which  you will need custom implementations: Dequantize.</code></p>", "body_text": "I'm trying to convert tensorflow quantised .pb file to .lite using toco. The command for creating .pb file is :\nretrain.py is here and here.\npython retrain.py \\\n--bottleneck_dir=/mobilenet_q/bottlenecks \\\n--how_many_training_steps=4000 \\\n--output_graph=/mobilenet_q/retrained_graph_mobilenet_q_1_224.pb \\\n--output_labels=/mobilenet_q/retrained_labels_mobilenet_q_1_224.txt \\\n--image_dir=/data \\\n--architecture=mobilenet_1.0_224_quantized\n\nWhen I'm trying to convert the .pb file to .tflite using toco command:\nbazel run --config=opt //tensorflow/contrib/lite/toco:toco \\\n  -- --input_file= retrained_graph_mobilenet_q_1_224.pb \\\n  --output_file= retrained_graph_mobilenet_q_1_224.lite \\\n  --input_format=TENSORFLOW_GRAPHDEF \\\n  --output_format=TFLITE \\\n  --input_shape=1,224,224,3 \\\n  --input_array=input \\\n  --output_array=final_result \\\n  --inference_type=FLOAT \\\n  --input_data_type=FLOAT\n\nI'm getting the error:\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.contrib.lite.toco_convert(). Here is a list of operators for which  you will need custom implementations: Dequantize.", "body": "I'm trying to convert tensorflow quantised .pb file to .lite using toco. The command for creating .pb file is :\r\nretrain.py is [here](https://github.com/googlecodelabs/tensorflow-for-poets-2/blob/master/scripts/retrain.py) and [here](https://github.com/tensorflow/hub/blob/master/examples/image_retraining/retrain.py).\r\n```\r\npython retrain.py \\\r\n--bottleneck_dir=/mobilenet_q/bottlenecks \\\r\n--how_many_training_steps=4000 \\\r\n--output_graph=/mobilenet_q/retrained_graph_mobilenet_q_1_224.pb \\\r\n--output_labels=/mobilenet_q/retrained_labels_mobilenet_q_1_224.txt \\\r\n--image_dir=/data \\\r\n--architecture=mobilenet_1.0_224_quantized\r\n```\r\nWhen I'm trying to convert the .pb file to .tflite using toco command:\r\n```\r\nbazel run --config=opt //tensorflow/contrib/lite/toco:toco \\\r\n  -- --input_file= retrained_graph_mobilenet_q_1_224.pb \\\r\n  --output_file= retrained_graph_mobilenet_q_1_224.lite \\\r\n  --input_format=TENSORFLOW_GRAPHDEF \\\r\n  --output_format=TFLITE \\\r\n  --input_shape=1,224,224,3 \\\r\n  --input_array=input \\\r\n  --output_array=final_result \\\r\n  --inference_type=FLOAT \\\r\n  --input_data_type=FLOAT\r\n```\r\nI'm getting the error:\r\n`Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.contrib.lite.toco_convert(). Here is a list of operators for which  you will need custom implementations: Dequantize.`"}
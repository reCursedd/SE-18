{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19041", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19041/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19041/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19041/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19041", "id": 319742840, "node_id": "MDU6SXNzdWUzMTk3NDI4NDA=", "number": 19041, "title": "Saving Estimators, loading from checkpoints and accessing placeholders.", "user": {"login": "zeyademam", "id": 28906340, "node_id": "MDQ6VXNlcjI4OTA2MzQw", "avatar_url": "https://avatars0.githubusercontent.com/u/28906340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeyademam", "html_url": "https://github.com/zeyademam", "followers_url": "https://api.github.com/users/zeyademam/followers", "following_url": "https://api.github.com/users/zeyademam/following{/other_user}", "gists_url": "https://api.github.com/users/zeyademam/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeyademam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeyademam/subscriptions", "organizations_url": "https://api.github.com/users/zeyademam/orgs", "repos_url": "https://api.github.com/users/zeyademam/repos", "events_url": "https://api.github.com/users/zeyademam/events{/privacy}", "received_events_url": "https://api.github.com/users/zeyademam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-05-02T23:14:06Z", "updated_at": "2018-11-22T18:56:22Z", "closed_at": null, "author_association": "NONE", "body_html": "<p>I posted this question here on stackoverflow (<a href=\"https://stackoverflow.com/questions/50011969/tensorflow-estimator-api-input-tensor-names\" rel=\"nofollow\">https://stackoverflow.com/questions/50011969/tensorflow-estimator-api-input-tensor-names</a>) and someone else posted a similar question earlier (<a href=\"https://stackoverflow.com/questions/48335699/tensorflow-what-are-the-input-nodes-for-tf-estimator-models\" rel=\"nofollow\">https://stackoverflow.com/questions/48335699/tensorflow-what-are-the-input-nodes-for-tf-estimator-models</a>), yet no satisfying answers.</p>\n<p>When using an estimator in tensorflow and passing the inputs using <code>tf.estimator.inputs.numpy_input_function()</code>, I would like to find a way to access the input placeholders (one for features and one for labels).<br>\nI train the model using <code>tf.estimator.estimator.train()</code> and save the checkpoint files in <code>model_dir</code>.<br>\nLater, I would like to load the model and variables using the following snippet:<br>\n<code>sess = tf.Session()</code><br>\n<code>saver = tf.train.import_meta_graph(model_dir+'/model.ckpt-1.meta')</code><br>\n<code>saver.restore(sess, tf.train.latest_checkpoint(model_dir))</code><br>\n<code>predictions = graph.get_tensor_by_name('softmax_tensor:0')</code></p>\n<p>Then do <code>sess.run(predictions,....)</code>. But there's no way to pull out the inputs' placeholder for the <code>feed_dict</code> parameter of <code>sess.run()</code>.</p>\n<p>Another related issue I have: I would also like to add placeholders to an estimator other than the features and labels placeholders. For example if I have dropout, I would like the dropout_rate or the <code>tf.layers.dropout()</code> function's <code>training</code> param to be placeholders. This way after loading the model from chkpt as above, I can turn off dropout.</p>\n<p>Have I written custom code Y<br>\nOS Platform and Distribution Ubuntu 18.04<br>\nTensorFlow installed from pip<br>\nTensorFlow version r1.8.0<br>\nBazel version N/A<br>\nCUDA/cuDNN version 9.0/7.0.1<br>\nGPU model and memory GTX 1080TI<br>\nExact command to reproduce N/A</p>", "body_text": "I posted this question here on stackoverflow (https://stackoverflow.com/questions/50011969/tensorflow-estimator-api-input-tensor-names) and someone else posted a similar question earlier (https://stackoverflow.com/questions/48335699/tensorflow-what-are-the-input-nodes-for-tf-estimator-models), yet no satisfying answers.\nWhen using an estimator in tensorflow and passing the inputs using tf.estimator.inputs.numpy_input_function(), I would like to find a way to access the input placeholders (one for features and one for labels).\nI train the model using tf.estimator.estimator.train() and save the checkpoint files in model_dir.\nLater, I would like to load the model and variables using the following snippet:\nsess = tf.Session()\nsaver = tf.train.import_meta_graph(model_dir+'/model.ckpt-1.meta')\nsaver.restore(sess, tf.train.latest_checkpoint(model_dir))\npredictions = graph.get_tensor_by_name('softmax_tensor:0')\nThen do sess.run(predictions,....). But there's no way to pull out the inputs' placeholder for the feed_dict parameter of sess.run().\nAnother related issue I have: I would also like to add placeholders to an estimator other than the features and labels placeholders. For example if I have dropout, I would like the dropout_rate or the tf.layers.dropout() function's training param to be placeholders. This way after loading the model from chkpt as above, I can turn off dropout.\nHave I written custom code Y\nOS Platform and Distribution Ubuntu 18.04\nTensorFlow installed from pip\nTensorFlow version r1.8.0\nBazel version N/A\nCUDA/cuDNN version 9.0/7.0.1\nGPU model and memory GTX 1080TI\nExact command to reproduce N/A", "body": "I posted this question here on stackoverflow (https://stackoverflow.com/questions/50011969/tensorflow-estimator-api-input-tensor-names) and someone else posted a similar question earlier (https://stackoverflow.com/questions/48335699/tensorflow-what-are-the-input-nodes-for-tf-estimator-models), yet no satisfying answers. \r\n\r\nWhen using an estimator in tensorflow and passing the inputs using `tf.estimator.inputs.numpy_input_function()`, I would like to find a way to access the input placeholders (one for features and one for labels).\r\nI train the model using `tf.estimator.estimator.train()` and save the checkpoint files in `model_dir`. \r\nLater, I would like to load the model and variables using the following snippet:\r\n`sess = tf.Session()`\r\n`saver = tf.train.import_meta_graph(model_dir+'/model.ckpt-1.meta')`\r\n`saver.restore(sess, tf.train.latest_checkpoint(model_dir))`\r\n`predictions = graph.get_tensor_by_name('softmax_tensor:0')`\r\n\r\nThen do `sess.run(predictions,....)`. But there's no way to pull out the inputs' placeholder for the `feed_dict` parameter of `sess.run()`.\r\n\r\nAnother related issue I have: I would also like to add placeholders to an estimator other than the features and labels placeholders. For example if I have dropout, I would like the dropout_rate or the `tf.layers.dropout()` function's `training` param to be placeholders. This way after loading the model from chkpt as above, I can turn off dropout. \r\n\r\n\r\nHave I written custom code Y\r\nOS Platform and Distribution Ubuntu 18.04\r\nTensorFlow installed from pip\r\nTensorFlow version r1.8.0\r\nBazel version N/A\r\nCUDA/cuDNN version 9.0/7.0.1\r\nGPU model and memory GTX 1080TI\r\nExact command to reproduce N/A\r\n\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/343191773", "html_url": "https://github.com/tensorflow/tensorflow/issues/14042#issuecomment-343191773", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14042", "id": 343191773, "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzE5MTc3Mw==", "user": {"login": "hanfeisun", "id": 922081, "node_id": "MDQ6VXNlcjkyMjA4MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/922081?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hanfeisun", "html_url": "https://github.com/hanfeisun", "followers_url": "https://api.github.com/users/hanfeisun/followers", "following_url": "https://api.github.com/users/hanfeisun/following{/other_user}", "gists_url": "https://api.github.com/users/hanfeisun/gists{/gist_id}", "starred_url": "https://api.github.com/users/hanfeisun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hanfeisun/subscriptions", "organizations_url": "https://api.github.com/users/hanfeisun/orgs", "repos_url": "https://api.github.com/users/hanfeisun/repos", "events_url": "https://api.github.com/users/hanfeisun/events{/privacy}", "received_events_url": "https://api.github.com/users/hanfeisun/received_events", "type": "User", "site_admin": false}, "created_at": "2017-11-09T15:34:40Z", "updated_at": "2017-11-09T15:34:40Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=4756911\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mtngld\">@mtngld</a> I need the summary hook because I want to config <code>save_steps</code> and <code>output_dir</code> parameter using SummarySaverHook.  My codes looks like this:</p>\n<pre><code>    if mode == tf.estimator.ModeKeys.TRAIN:\n        tf.summary.image(\"original\", features['source'])\n        tf.summary.image(\"target\", features['target'])\n        tf.summary.image(\"transfer_sigmoid\", generated)\n    else:\n        # Evaluation\n        tf.summary.image(\"eval_original\", features['source'], max_outputs=10)\n        tf.summary.image(\"eval_target\", features['target'], max_outputs=10)\n        tf.summary.image(\"eval_transfer_sigmoid\", generated, max_outputs=10)\n    summary_hook = tf.train.SummarySaverHook(\n        save_steps=10,\n        output_dir=\"./board\",\n        summary_op=tf.summary.merge_all())\n    return tf.estimator.EstimatorSpec(\n        mode=mode,\n        loss=loss,\n        train_op=tf.group(d_train, g_train),\n        eval_metric_ops=None,\n        training_hooks=[summary_hook]\n    )\n</code></pre>\n<p>As I remember, during the evaluation, the image summary is not shown in tensorboard somehow..</p>", "body_text": "@mtngld I need the summary hook because I want to config save_steps and output_dir parameter using SummarySaverHook.  My codes looks like this:\n    if mode == tf.estimator.ModeKeys.TRAIN:\n        tf.summary.image(\"original\", features['source'])\n        tf.summary.image(\"target\", features['target'])\n        tf.summary.image(\"transfer_sigmoid\", generated)\n    else:\n        # Evaluation\n        tf.summary.image(\"eval_original\", features['source'], max_outputs=10)\n        tf.summary.image(\"eval_target\", features['target'], max_outputs=10)\n        tf.summary.image(\"eval_transfer_sigmoid\", generated, max_outputs=10)\n    summary_hook = tf.train.SummarySaverHook(\n        save_steps=10,\n        output_dir=\"./board\",\n        summary_op=tf.summary.merge_all())\n    return tf.estimator.EstimatorSpec(\n        mode=mode,\n        loss=loss,\n        train_op=tf.group(d_train, g_train),\n        eval_metric_ops=None,\n        training_hooks=[summary_hook]\n    )\n\nAs I remember, during the evaluation, the image summary is not shown in tensorboard somehow..", "body": "@mtngld I need the summary hook because I want to config `save_steps` and `output_dir` parameter using SummarySaverHook.  My codes looks like this:\r\n\r\n```\r\n    if mode == tf.estimator.ModeKeys.TRAIN:\r\n        tf.summary.image(\"original\", features['source'])\r\n        tf.summary.image(\"target\", features['target'])\r\n        tf.summary.image(\"transfer_sigmoid\", generated)\r\n    else:\r\n        # Evaluation\r\n        tf.summary.image(\"eval_original\", features['source'], max_outputs=10)\r\n        tf.summary.image(\"eval_target\", features['target'], max_outputs=10)\r\n        tf.summary.image(\"eval_transfer_sigmoid\", generated, max_outputs=10)\r\n    summary_hook = tf.train.SummarySaverHook(\r\n        save_steps=10,\r\n        output_dir=\"./board\",\r\n        summary_op=tf.summary.merge_all())\r\n    return tf.estimator.EstimatorSpec(\r\n        mode=mode,\r\n        loss=loss,\r\n        train_op=tf.group(d_train, g_train),\r\n        eval_metric_ops=None,\r\n        training_hooks=[summary_hook]\r\n    )\r\n```\r\n\r\nAs I remember, during the evaluation, the image summary is not shown in tensorboard somehow.."}
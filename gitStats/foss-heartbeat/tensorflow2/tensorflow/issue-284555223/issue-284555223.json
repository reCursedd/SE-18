{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15641", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15641/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15641/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15641/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15641", "id": 284555223, "node_id": "MDU6SXNzdWUyODQ1NTUyMjM=", "number": 15641, "title": "Compile with selective register on meta file", "user": {"login": "xumengwei", "id": 23546158, "node_id": "MDQ6VXNlcjIzNTQ2MTU4", "avatar_url": "https://avatars3.githubusercontent.com/u/23546158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xumengwei", "html_url": "https://github.com/xumengwei", "followers_url": "https://api.github.com/users/xumengwei/followers", "following_url": "https://api.github.com/users/xumengwei/following{/other_user}", "gists_url": "https://api.github.com/users/xumengwei/gists{/gist_id}", "starred_url": "https://api.github.com/users/xumengwei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xumengwei/subscriptions", "organizations_url": "https://api.github.com/users/xumengwei/orgs", "repos_url": "https://api.github.com/users/xumengwei/repos", "events_url": "https://api.github.com/users/xumengwei/events{/privacy}", "received_events_url": "https://api.github.com/users/xumengwei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-26T13:23:09Z", "updated_at": "2018-01-30T01:38:03Z", "closed_at": "2018-01-30T01:38:03Z", "author_association": "NONE", "body_html": "<p>I want to apply the selective registration feature on my model to decrease the lib size. However, I need to apply it on a meta file saved via <code>saver</code> rather than a frozen pb file as shown in many posts I have found. When I try to run</p>\n<p><code>bazel-bin/tensorflow/python/tools/print_selective_registration_header --graphs=model_test.ckpt-390760.meta</code></p>\n<p>it comes to the error</p>\n<p><code>[libprotobuf ERROR external/protobuf/src/google/protobuf/wire_format_lite.cc:621] String field 'tensorflow.NodeDef.op' contains invalid UTF-8 data when parsing a protocol buffer. Use the 'bytes' type if you intend to send raw bytes.</code></p>\n<p>I tried to add <code>--proto_fileformat=textproto</code> but another error comes up:</p>\n<p><code>raise self.ParseError('Expected identifier or number.') google.protobuf.text_format.ParseError: 2:1 : Expected identifier or number.</code></p>\n<p>Is it even possible to do this at all? The ultimate goal of compiling this lib is to restore a pretrained model and incrementally train it on Android.</p>", "body_text": "I want to apply the selective registration feature on my model to decrease the lib size. However, I need to apply it on a meta file saved via saver rather than a frozen pb file as shown in many posts I have found. When I try to run\nbazel-bin/tensorflow/python/tools/print_selective_registration_header --graphs=model_test.ckpt-390760.meta\nit comes to the error\n[libprotobuf ERROR external/protobuf/src/google/protobuf/wire_format_lite.cc:621] String field 'tensorflow.NodeDef.op' contains invalid UTF-8 data when parsing a protocol buffer. Use the 'bytes' type if you intend to send raw bytes.\nI tried to add --proto_fileformat=textproto but another error comes up:\nraise self.ParseError('Expected identifier or number.') google.protobuf.text_format.ParseError: 2:1 : Expected identifier or number.\nIs it even possible to do this at all? The ultimate goal of compiling this lib is to restore a pretrained model and incrementally train it on Android.", "body": "I want to apply the selective registration feature on my model to decrease the lib size. However, I need to apply it on a meta file saved via `saver` rather than a frozen pb file as shown in many posts I have found. When I try to run \r\n\r\n`bazel-bin/tensorflow/python/tools/print_selective_registration_header --graphs=model_test.ckpt-390760.meta`\r\n\r\nit comes to the error\r\n\r\n`[libprotobuf ERROR external/protobuf/src/google/protobuf/wire_format_lite.cc:621] String field 'tensorflow.NodeDef.op' contains invalid UTF-8 data when parsing a protocol buffer. Use the 'bytes' type if you intend to send raw bytes.`\r\n\r\nI tried to add `--proto_fileformat=textproto` but another error comes up:\r\n\r\n`raise self.ParseError('Expected identifier or number.')\r\ngoogle.protobuf.text_format.ParseError: 2:1 : Expected identifier or number.`\r\n\r\nIs it even possible to do this at all? The ultimate goal of compiling this lib is to restore a pretrained model and incrementally train it on Android."}
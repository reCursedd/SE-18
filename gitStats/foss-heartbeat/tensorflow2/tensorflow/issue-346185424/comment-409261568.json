{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/409261568", "html_url": "https://github.com/tensorflow/tensorflow/issues/21277#issuecomment-409261568", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21277", "id": 409261568, "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTI2MTU2OA==", "user": {"login": "nfergu", "id": 1291583, "node_id": "MDQ6VXNlcjEyOTE1ODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1291583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfergu", "html_url": "https://github.com/nfergu", "followers_url": "https://api.github.com/users/nfergu/followers", "following_url": "https://api.github.com/users/nfergu/following{/other_user}", "gists_url": "https://api.github.com/users/nfergu/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfergu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfergu/subscriptions", "organizations_url": "https://api.github.com/users/nfergu/orgs", "repos_url": "https://api.github.com/users/nfergu/repos", "events_url": "https://api.github.com/users/nfergu/events{/privacy}", "received_events_url": "https://api.github.com/users/nfergu/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-31T15:25:24Z", "updated_at": "2018-07-31T15:25:24Z", "author_association": "NONE", "body_html": "<p>Sure, I've included a backtrace of all native threads below. This is with inter_op_parallelism_threads = 1 and intra_op_parallelism_threads = 1.</p>\n<p>I've also included a thread dump from Python as well, in case it's interesting. It doesn't look to me like any of the Python threads should be holding the GIL either. The only interesting one looks like 0x00007000025b4000, which is performing an IO operation (consuming from a multiprocessing queue) that I believe should also have caused the GIL to be released.</p>\n<p><strong>Native threads:</strong></p>\n<pre><code>(lldb) thread backtrace all\n* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n  * frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) + 18\n    frame #3: 0x00000001127b665b libtensorflow_framework.so`nsync::nsync_mu_semaphore_p_with_deadline(nsync::nsync_semaphore_s_*, timespec) + 283\n    frame #4: 0x00000001127b2ed7 libtensorflow_framework.so`nsync::nsync_cv_wait_with_deadline_generic(nsync::nsync_cv_s_*, void*, void (*)(void*), void (*)(void*), timespec, nsync::nsync_note_s_*) + 423\n    frame #5: 0x00000001127b3641 libtensorflow_framework.so`nsync::nsync_cv_wait(nsync::nsync_cv_s_*, nsync::nsync_mu_s_*) + 49\n    frame #6: 0x000000010909d4b3 _pywrap_tensorflow_internal.so`tensorflow::Notification::WaitForNotification() + 67\n    frame #7: 0x0000000109d69869 _pywrap_tensorflow_internal.so`tensorflow::CapturedFunction::RunInstantiated(std::__1::vector&lt;tensorflow::Tensor, std::__1::allocator&lt;tensorflow::Tensor&gt; &gt; const&amp;, std::__1::vector&lt;tensorflow::Tensor, std::__1::allocator&lt;tensorflow::Tensor&gt; &gt;*) + 649\n    frame #8: 0x0000000109d1ba81 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::GeneratorDatasetOp::Dataset::Iterator::~Iterator() + 97\n    frame #9: 0x0000000109d1bbee _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::GeneratorDatasetOp::Dataset::Iterator::~Iterator() + 14\n    frame #10: 0x0000000109d196c9 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::FlatMapDatasetOp::Dataset::Iterator::~Iterator() + 105\n    frame #11: 0x0000000109d1973e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::FlatMapDatasetOp::Dataset::Iterator::~Iterator() + 14\n    frame #12: 0x00000001019e98fd libc++.1.dylib`std::__1::__shared_weak_count::__release_shared() + 43\n    frame #13: 0x0000000109d265d9 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::IteratorResource::~IteratorResource() + 169\n    frame #14: 0x0000000109d2665e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::IteratorResource::~IteratorResource() + 14\n    frame #15: 0x0000000112289cad libtensorflow_framework.so`tensorflow::ResourceMgr::DoDelete(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, unsigned long long, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;) + 301\n    frame #16: 0x0000000112289eb0 libtensorflow_framework.so`tensorflow::ResourceMgr::DoDelete(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, std::__1::type_index, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;) + 192\n    frame #17: 0x0000000109d285b8 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::OneShotIteratorOp::~OneShotIteratorOp() + 104\n    frame #18: 0x0000000109d2877e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::OneShotIteratorOp::~OneShotIteratorOp() + 14\n    frame #19: 0x000000011228325f libtensorflow_framework.so`tensorflow::OpSegment::Item::~Item() + 63\n    frame #20: 0x000000011228415d libtensorflow_framework.so`tensorflow::OpSegment::RemoveHold(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;) + 205\n    frame #21: 0x000000010b89cba2 _pywrap_tensorflow_internal.so`tensorflow::DirectSession::~DirectSession() + 546\n    frame #22: 0x000000010b89d0ee _pywrap_tensorflow_internal.so`tensorflow::DirectSession::~DirectSession() + 14\n    frame #23: 0x000000010937a0b2 _pywrap_tensorflow_internal.so`TF_DeleteSession + 290\n    frame #24: 0x000000010902319a _pywrap_tensorflow_internal.so`_wrap_TF_DeleteSession(_object*, _object*) + 122\n    frame #25: 0x00000001007bb688 Python`_PyCFunction_FastCallDict + 568\n    frame #26: 0x00000001008443e4 Python`call_function + 612\n    frame #27: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #28: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\n    frame #29: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\n    frame #30: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\n    frame #31: 0x000000010075f8d4 Python`_PyObject_FastCallDict + 180\n    frame #32: 0x00000001007d6579 Python`slot_tp_finalize + 121\n    frame #33: 0x000000010089b18a Python`collect + 1418\n    frame #34: 0x000000010089b8c3 Python`_PyGC_CollectIfEnabled + 99\n    frame #35: 0x000000010087af57 Python`Py_FinalizeEx + 119\n    frame #36: 0x000000010087b0e0 Python`Py_Exit + 16\n    frame #37: 0x000000010087ef4c Python`handle_system_exit + 252\n    frame #38: 0x000000010087f1a5 Python`PyErr_PrintEx + 437\n    frame #39: 0x0000000100880a1d Python`PyRun_SimpleStringFlags + 125\n    frame #40: 0x00000001008992a4 Python`Py_Main + 1812\n    frame #41: 0x0000000100000dfe Python\n    frame #42: 0x0000000100000c34 Python\n  thread #2\n    frame #0: 0x00000001018566da libsystem_kernel.dylib`__workq_kernreturn + 10\n    frame #1: 0x000000010188c06a libsystem_pthread.dylib`_pthread_wqthread + 1035\n    frame #2: 0x000000010188bc4d libsystem_pthread.dylib`start_wqthread + 13\n  thread #3\n    frame #0: 0x0000000000000000\n  thread #4\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x0000000100896738 Python`PyThread_acquire_lock_timed + 312\n    frame #3: 0x000000010089ca89 Python`acquire_timed + 137\n    frame #4: 0x000000010089cbdd Python`lock_PyThread_acquire_lock + 61\n    frame #5: 0x00000001007bb545 Python`_PyCFunction_FastCallDict + 245\n    frame #6: 0x00000001008443e4 Python`call_function + 612\n    frame #7: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #8: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #9: 0x0000000100843fab Python`fast_function + 219\n    frame #10: 0x00000001008443cb Python`call_function + 587\n    frame #11: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #12: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #13: 0x0000000100843fab Python`fast_function + 219\n    frame #14: 0x00000001008443cb Python`call_function + 587\n    frame #15: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #16: 0x000000010084412e Python`fast_function + 606\n    frame #17: 0x00000001008443cb Python`call_function + 587\n    frame #18: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #19: 0x000000010084412e Python`fast_function + 606\n    frame #20: 0x00000001008443cb Python`call_function + 587\n    frame #21: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #22: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\n    frame #23: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\n    frame #24: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\n    frame #25: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #26: 0x000000010089c587 Python`t_bootstrap + 71\n    frame #27: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #28: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #29: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #5\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) + 18\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WorkerLoop(int) + 568\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func&lt;tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function&lt;void ()&gt;)::'lambda'(), std::__1::allocator&lt;tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function&lt;void ()&gt;)::'lambda'()&gt;, void ()&gt;::operator()() + 47\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, std::__1::function&lt;void ()&gt; &gt; &gt;(void*) + 48\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #6\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) + 18\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WorkerLoop(int) + 568\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func&lt;tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function&lt;void ()&gt;)::'lambda'(), std::__1::allocator&lt;tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function&lt;void ()&gt;)::'lambda'()&gt;, void ()&gt;::operator()() + 47\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, std::__1::function&lt;void ()&gt; &gt; &gt;(void*) + 48\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #7\n    frame #0: 0x0000000101857592 libsystem_kernel.dylib`read + 10\n    frame #1: 0x0000000100895402 Python`_Py_read + 82\n    frame #2: 0x000000010089f9b9 Python`os_read + 89\n    frame #3: 0x00000001007bb688 Python`_PyCFunction_FastCallDict + 568\n    frame #4: 0x00000001008443e4 Python`call_function + 612\n    frame #5: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #6: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #7: 0x0000000100843fab Python`fast_function + 219\n    frame #8: 0x00000001008443cb Python`call_function + 587\n    frame #9: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #10: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #11: 0x0000000100843fab Python`fast_function + 219\n    frame #12: 0x00000001008443cb Python`call_function + 587\n    frame #13: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #14: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #15: 0x0000000100843fab Python`fast_function + 219\n    frame #16: 0x00000001008443cb Python`call_function + 587\n    frame #17: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #18: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #19: 0x0000000100843fab Python`fast_function + 219\n    frame #20: 0x00000001008443cb Python`call_function + 587\n    frame #21: 0x0000000100848aa0 Python`_PyEval_EvalFrameDefault + 17056\n    frame #22: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #23: 0x0000000100843fab Python`fast_function + 219\n    frame #24: 0x00000001008443cb Python`call_function + 587\n    frame #25: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #26: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #27: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\n    frame #28: 0x000000010079344a Python`function_call + 186\n    frame #29: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #30: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\n    frame #31: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #32: 0x0000000100843fab Python`fast_function + 219\n    frame #33: 0x00000001008443cb Python`call_function + 587\n    frame #34: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #35: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #36: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\n    frame #37: 0x000000010079344a Python`function_call + 186\n    frame #38: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #39: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\n    frame #40: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #41: 0x0000000100843fab Python`fast_function + 219\n    frame #42: 0x00000001008443cb Python`call_function + 587\n    frame #43: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #44: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #45: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\n    frame #46: 0x000000010079344a Python`function_call + 186\n    frame #47: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #48: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\n    frame #49: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #50: 0x0000000100843fab Python`fast_function + 219\n    frame #51: 0x00000001008443cb Python`call_function + 587\n    frame #52: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #53: 0x000000010084412e Python`fast_function + 606\n    frame #54: 0x00000001008443cb Python`call_function + 587\n    frame #55: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #56: 0x000000010084412e Python`fast_function + 606\n    frame #57: 0x00000001008443cb Python`call_function + 587\n    frame #58: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #59: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\n    frame #60: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\n    frame #61: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\n    frame #62: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #63: 0x000000010089c587 Python`t_bootstrap + 71\n    frame #64: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #65: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #66: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #8\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) + 18\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WorkerLoop(int) + 568\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func&lt;tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function&lt;void ()&gt;)::'lambda'(), std::__1::allocator&lt;tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function&lt;void ()&gt;)::'lambda'()&gt;, void ()&gt;::operator()() + 47\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, std::__1::function&lt;void ()&gt; &gt; &gt;(void*) + 48\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #9\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) + 18\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WorkerLoop(int) + 568\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func&lt;tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function&lt;void ()&gt;)::'lambda'(), std::__1::allocator&lt;tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function&lt;void ()&gt;)::'lambda'()&gt;, void ()&gt;::operator()() + 47\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, std::__1::function&lt;void ()&gt; &gt; &gt;(void*) + 48\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n</code></pre>\n<p><strong>Python threads:</strong></p>\n<pre><code>Thread 0x0000700002637000 (most recent call first):\n\nThread 0x00007000025b4000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 379 in _recv\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 407 in _recv_bytes\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 216 in recv_bytes\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/queues.py\", line 94 in get\n&lt;REDACTED&gt;\n\n\nThread 0x0000700001fab000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 551 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 1180 in run\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\n\nThread 0x0000700001aa8000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 551 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 1180 in run\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\n\nThread 0x0000700000f19000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/queue.py\", line 173 in get\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/watchdog/observers/api.py\", line 360 in dispatch_events\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/watchdog/observers/api.py\", line 199 in run\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\n\nThread 0x0000700000a16000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/selectors.py\", line 577 in select\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/base_events.py\", line 1389 in _run_once\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/base_events.py\", line 421 in run_forever\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864 in run\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\n\nCurrent thread 0x0000000101895340 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 707 in __del__\n</code></pre>", "body_text": "Sure, I've included a backtrace of all native threads below. This is with inter_op_parallelism_threads = 1 and intra_op_parallelism_threads = 1.\nI've also included a thread dump from Python as well, in case it's interesting. It doesn't look to me like any of the Python threads should be holding the GIL either. The only interesting one looks like 0x00007000025b4000, which is performing an IO operation (consuming from a multiprocessing queue) that I believe should also have caused the GIL to be released.\nNative threads:\n(lldb) thread backtrace all\n* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n  * frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\n    frame #3: 0x00000001127b665b libtensorflow_framework.so`nsync::nsync_mu_semaphore_p_with_deadline(nsync::nsync_semaphore_s_*, timespec) + 283\n    frame #4: 0x00000001127b2ed7 libtensorflow_framework.so`nsync::nsync_cv_wait_with_deadline_generic(nsync::nsync_cv_s_*, void*, void (*)(void*), void (*)(void*), timespec, nsync::nsync_note_s_*) + 423\n    frame #5: 0x00000001127b3641 libtensorflow_framework.so`nsync::nsync_cv_wait(nsync::nsync_cv_s_*, nsync::nsync_mu_s_*) + 49\n    frame #6: 0x000000010909d4b3 _pywrap_tensorflow_internal.so`tensorflow::Notification::WaitForNotification() + 67\n    frame #7: 0x0000000109d69869 _pywrap_tensorflow_internal.so`tensorflow::CapturedFunction::RunInstantiated(std::__1::vector<tensorflow::Tensor, std::__1::allocator<tensorflow::Tensor> > const&, std::__1::vector<tensorflow::Tensor, std::__1::allocator<tensorflow::Tensor> >*) + 649\n    frame #8: 0x0000000109d1ba81 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::GeneratorDatasetOp::Dataset::Iterator::~Iterator() + 97\n    frame #9: 0x0000000109d1bbee _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::GeneratorDatasetOp::Dataset::Iterator::~Iterator() + 14\n    frame #10: 0x0000000109d196c9 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::FlatMapDatasetOp::Dataset::Iterator::~Iterator() + 105\n    frame #11: 0x0000000109d1973e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::FlatMapDatasetOp::Dataset::Iterator::~Iterator() + 14\n    frame #12: 0x00000001019e98fd libc++.1.dylib`std::__1::__shared_weak_count::__release_shared() + 43\n    frame #13: 0x0000000109d265d9 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::IteratorResource::~IteratorResource() + 169\n    frame #14: 0x0000000109d2665e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::IteratorResource::~IteratorResource() + 14\n    frame #15: 0x0000000112289cad libtensorflow_framework.so`tensorflow::ResourceMgr::DoDelete(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, unsigned long long, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) + 301\n    frame #16: 0x0000000112289eb0 libtensorflow_framework.so`tensorflow::ResourceMgr::DoDelete(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::type_index, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) + 192\n    frame #17: 0x0000000109d285b8 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::OneShotIteratorOp::~OneShotIteratorOp() + 104\n    frame #18: 0x0000000109d2877e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::OneShotIteratorOp::~OneShotIteratorOp() + 14\n    frame #19: 0x000000011228325f libtensorflow_framework.so`tensorflow::OpSegment::Item::~Item() + 63\n    frame #20: 0x000000011228415d libtensorflow_framework.so`tensorflow::OpSegment::RemoveHold(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) + 205\n    frame #21: 0x000000010b89cba2 _pywrap_tensorflow_internal.so`tensorflow::DirectSession::~DirectSession() + 546\n    frame #22: 0x000000010b89d0ee _pywrap_tensorflow_internal.so`tensorflow::DirectSession::~DirectSession() + 14\n    frame #23: 0x000000010937a0b2 _pywrap_tensorflow_internal.so`TF_DeleteSession + 290\n    frame #24: 0x000000010902319a _pywrap_tensorflow_internal.so`_wrap_TF_DeleteSession(_object*, _object*) + 122\n    frame #25: 0x00000001007bb688 Python`_PyCFunction_FastCallDict + 568\n    frame #26: 0x00000001008443e4 Python`call_function + 612\n    frame #27: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #28: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\n    frame #29: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\n    frame #30: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\n    frame #31: 0x000000010075f8d4 Python`_PyObject_FastCallDict + 180\n    frame #32: 0x00000001007d6579 Python`slot_tp_finalize + 121\n    frame #33: 0x000000010089b18a Python`collect + 1418\n    frame #34: 0x000000010089b8c3 Python`_PyGC_CollectIfEnabled + 99\n    frame #35: 0x000000010087af57 Python`Py_FinalizeEx + 119\n    frame #36: 0x000000010087b0e0 Python`Py_Exit + 16\n    frame #37: 0x000000010087ef4c Python`handle_system_exit + 252\n    frame #38: 0x000000010087f1a5 Python`PyErr_PrintEx + 437\n    frame #39: 0x0000000100880a1d Python`PyRun_SimpleStringFlags + 125\n    frame #40: 0x00000001008992a4 Python`Py_Main + 1812\n    frame #41: 0x0000000100000dfe Python\n    frame #42: 0x0000000100000c34 Python\n  thread #2\n    frame #0: 0x00000001018566da libsystem_kernel.dylib`__workq_kernreturn + 10\n    frame #1: 0x000000010188c06a libsystem_pthread.dylib`_pthread_wqthread + 1035\n    frame #2: 0x000000010188bc4d libsystem_pthread.dylib`start_wqthread + 13\n  thread #3\n    frame #0: 0x0000000000000000\n  thread #4\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x0000000100896738 Python`PyThread_acquire_lock_timed + 312\n    frame #3: 0x000000010089ca89 Python`acquire_timed + 137\n    frame #4: 0x000000010089cbdd Python`lock_PyThread_acquire_lock + 61\n    frame #5: 0x00000001007bb545 Python`_PyCFunction_FastCallDict + 245\n    frame #6: 0x00000001008443e4 Python`call_function + 612\n    frame #7: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #8: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #9: 0x0000000100843fab Python`fast_function + 219\n    frame #10: 0x00000001008443cb Python`call_function + 587\n    frame #11: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #12: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #13: 0x0000000100843fab Python`fast_function + 219\n    frame #14: 0x00000001008443cb Python`call_function + 587\n    frame #15: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #16: 0x000000010084412e Python`fast_function + 606\n    frame #17: 0x00000001008443cb Python`call_function + 587\n    frame #18: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #19: 0x000000010084412e Python`fast_function + 606\n    frame #20: 0x00000001008443cb Python`call_function + 587\n    frame #21: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #22: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\n    frame #23: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\n    frame #24: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\n    frame #25: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #26: 0x000000010089c587 Python`t_bootstrap + 71\n    frame #27: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #28: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #29: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #5\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) + 568\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()() + 47\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*) + 48\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #6\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) + 568\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()() + 47\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*) + 48\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #7\n    frame #0: 0x0000000101857592 libsystem_kernel.dylib`read + 10\n    frame #1: 0x0000000100895402 Python`_Py_read + 82\n    frame #2: 0x000000010089f9b9 Python`os_read + 89\n    frame #3: 0x00000001007bb688 Python`_PyCFunction_FastCallDict + 568\n    frame #4: 0x00000001008443e4 Python`call_function + 612\n    frame #5: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #6: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #7: 0x0000000100843fab Python`fast_function + 219\n    frame #8: 0x00000001008443cb Python`call_function + 587\n    frame #9: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #10: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #11: 0x0000000100843fab Python`fast_function + 219\n    frame #12: 0x00000001008443cb Python`call_function + 587\n    frame #13: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #14: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #15: 0x0000000100843fab Python`fast_function + 219\n    frame #16: 0x00000001008443cb Python`call_function + 587\n    frame #17: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #18: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #19: 0x0000000100843fab Python`fast_function + 219\n    frame #20: 0x00000001008443cb Python`call_function + 587\n    frame #21: 0x0000000100848aa0 Python`_PyEval_EvalFrameDefault + 17056\n    frame #22: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #23: 0x0000000100843fab Python`fast_function + 219\n    frame #24: 0x00000001008443cb Python`call_function + 587\n    frame #25: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #26: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #27: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\n    frame #28: 0x000000010079344a Python`function_call + 186\n    frame #29: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #30: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\n    frame #31: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #32: 0x0000000100843fab Python`fast_function + 219\n    frame #33: 0x00000001008443cb Python`call_function + 587\n    frame #34: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #35: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #36: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\n    frame #37: 0x000000010079344a Python`function_call + 186\n    frame #38: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #39: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\n    frame #40: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #41: 0x0000000100843fab Python`fast_function + 219\n    frame #42: 0x00000001008443cb Python`call_function + 587\n    frame #43: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #44: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #45: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\n    frame #46: 0x000000010079344a Python`function_call + 186\n    frame #47: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #48: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\n    frame #49: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\n    frame #50: 0x0000000100843fab Python`fast_function + 219\n    frame #51: 0x00000001008443cb Python`call_function + 587\n    frame #52: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #53: 0x000000010084412e Python`fast_function + 606\n    frame #54: 0x00000001008443cb Python`call_function + 587\n    frame #55: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #56: 0x000000010084412e Python`fast_function + 606\n    frame #57: 0x00000001008443cb Python`call_function + 587\n    frame #58: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\n    frame #59: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\n    frame #60: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\n    frame #61: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\n    frame #62: 0x000000010075f5b3 Python`PyObject_Call + 99\n    frame #63: 0x000000010089c587 Python`t_bootstrap + 71\n    frame #64: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #65: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #66: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #8\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) + 568\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()() + 47\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*) + 48\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n  thread #9\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) + 568\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()() + 47\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*) + 48\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\n\nPython threads:\nThread 0x0000700002637000 (most recent call first):\n\nThread 0x00007000025b4000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 379 in _recv\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 407 in _recv_bytes\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 216 in recv_bytes\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/queues.py\", line 94 in get\n<REDACTED>\n\n\nThread 0x0000700001fab000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 551 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 1180 in run\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\n\nThread 0x0000700001aa8000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 551 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 1180 in run\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\n\nThread 0x0000700000f19000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/queue.py\", line 173 in get\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/watchdog/observers/api.py\", line 360 in dispatch_events\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/watchdog/observers/api.py\", line 199 in run\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\n\nThread 0x0000700000a16000 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/selectors.py\", line 577 in select\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/base_events.py\", line 1389 in _run_once\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/base_events.py\", line 421 in run_forever\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864 in run\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\n\nCurrent thread 0x0000000101895340 (most recent call first):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 707 in __del__", "body": "Sure, I've included a backtrace of all native threads below. This is with inter_op_parallelism_threads = 1 and intra_op_parallelism_threads = 1.\r\n\r\nI've also included a thread dump from Python as well, in case it's interesting. It doesn't look to me like any of the Python threads should be holding the GIL either. The only interesting one looks like 0x00007000025b4000, which is performing an IO operation (consuming from a multiprocessing queue) that I believe should also have caused the GIL to be released.\r\n\r\n**Native threads:**\r\n\r\n```\r\n(lldb) thread backtrace all\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\r\n  * frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\r\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\r\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n    frame #3: 0x00000001127b665b libtensorflow_framework.so`nsync::nsync_mu_semaphore_p_with_deadline(nsync::nsync_semaphore_s_*, timespec) + 283\r\n    frame #4: 0x00000001127b2ed7 libtensorflow_framework.so`nsync::nsync_cv_wait_with_deadline_generic(nsync::nsync_cv_s_*, void*, void (*)(void*), void (*)(void*), timespec, nsync::nsync_note_s_*) + 423\r\n    frame #5: 0x00000001127b3641 libtensorflow_framework.so`nsync::nsync_cv_wait(nsync::nsync_cv_s_*, nsync::nsync_mu_s_*) + 49\r\n    frame #6: 0x000000010909d4b3 _pywrap_tensorflow_internal.so`tensorflow::Notification::WaitForNotification() + 67\r\n    frame #7: 0x0000000109d69869 _pywrap_tensorflow_internal.so`tensorflow::CapturedFunction::RunInstantiated(std::__1::vector<tensorflow::Tensor, std::__1::allocator<tensorflow::Tensor> > const&, std::__1::vector<tensorflow::Tensor, std::__1::allocator<tensorflow::Tensor> >*) + 649\r\n    frame #8: 0x0000000109d1ba81 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::GeneratorDatasetOp::Dataset::Iterator::~Iterator() + 97\r\n    frame #9: 0x0000000109d1bbee _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::GeneratorDatasetOp::Dataset::Iterator::~Iterator() + 14\r\n    frame #10: 0x0000000109d196c9 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::FlatMapDatasetOp::Dataset::Iterator::~Iterator() + 105\r\n    frame #11: 0x0000000109d1973e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::FlatMapDatasetOp::Dataset::Iterator::~Iterator() + 14\r\n    frame #12: 0x00000001019e98fd libc++.1.dylib`std::__1::__shared_weak_count::__release_shared() + 43\r\n    frame #13: 0x0000000109d265d9 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::IteratorResource::~IteratorResource() + 169\r\n    frame #14: 0x0000000109d2665e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::IteratorResource::~IteratorResource() + 14\r\n    frame #15: 0x0000000112289cad libtensorflow_framework.so`tensorflow::ResourceMgr::DoDelete(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, unsigned long long, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) + 301\r\n    frame #16: 0x0000000112289eb0 libtensorflow_framework.so`tensorflow::ResourceMgr::DoDelete(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::type_index, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) + 192\r\n    frame #17: 0x0000000109d285b8 _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::OneShotIteratorOp::~OneShotIteratorOp() + 104\r\n    frame #18: 0x0000000109d2877e _pywrap_tensorflow_internal.so`tensorflow::(anonymous namespace)::OneShotIteratorOp::~OneShotIteratorOp() + 14\r\n    frame #19: 0x000000011228325f libtensorflow_framework.so`tensorflow::OpSegment::Item::~Item() + 63\r\n    frame #20: 0x000000011228415d libtensorflow_framework.so`tensorflow::OpSegment::RemoveHold(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) + 205\r\n    frame #21: 0x000000010b89cba2 _pywrap_tensorflow_internal.so`tensorflow::DirectSession::~DirectSession() + 546\r\n    frame #22: 0x000000010b89d0ee _pywrap_tensorflow_internal.so`tensorflow::DirectSession::~DirectSession() + 14\r\n    frame #23: 0x000000010937a0b2 _pywrap_tensorflow_internal.so`TF_DeleteSession + 290\r\n    frame #24: 0x000000010902319a _pywrap_tensorflow_internal.so`_wrap_TF_DeleteSession(_object*, _object*) + 122\r\n    frame #25: 0x00000001007bb688 Python`_PyCFunction_FastCallDict + 568\r\n    frame #26: 0x00000001008443e4 Python`call_function + 612\r\n    frame #27: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #28: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\r\n    frame #29: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\r\n    frame #30: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\r\n    frame #31: 0x000000010075f8d4 Python`_PyObject_FastCallDict + 180\r\n    frame #32: 0x00000001007d6579 Python`slot_tp_finalize + 121\r\n    frame #33: 0x000000010089b18a Python`collect + 1418\r\n    frame #34: 0x000000010089b8c3 Python`_PyGC_CollectIfEnabled + 99\r\n    frame #35: 0x000000010087af57 Python`Py_FinalizeEx + 119\r\n    frame #36: 0x000000010087b0e0 Python`Py_Exit + 16\r\n    frame #37: 0x000000010087ef4c Python`handle_system_exit + 252\r\n    frame #38: 0x000000010087f1a5 Python`PyErr_PrintEx + 437\r\n    frame #39: 0x0000000100880a1d Python`PyRun_SimpleStringFlags + 125\r\n    frame #40: 0x00000001008992a4 Python`Py_Main + 1812\r\n    frame #41: 0x0000000100000dfe Python\r\n    frame #42: 0x0000000100000c34 Python\r\n  thread #2\r\n    frame #0: 0x00000001018566da libsystem_kernel.dylib`__workq_kernreturn + 10\r\n    frame #1: 0x000000010188c06a libsystem_pthread.dylib`_pthread_wqthread + 1035\r\n    frame #2: 0x000000010188bc4d libsystem_pthread.dylib`start_wqthread + 13\r\n  thread #3\r\n    frame #0: 0x0000000000000000\r\n  thread #4\r\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\r\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\r\n    frame #2: 0x0000000100896738 Python`PyThread_acquire_lock_timed + 312\r\n    frame #3: 0x000000010089ca89 Python`acquire_timed + 137\r\n    frame #4: 0x000000010089cbdd Python`lock_PyThread_acquire_lock + 61\r\n    frame #5: 0x00000001007bb545 Python`_PyCFunction_FastCallDict + 245\r\n    frame #6: 0x00000001008443e4 Python`call_function + 612\r\n    frame #7: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #8: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #9: 0x0000000100843fab Python`fast_function + 219\r\n    frame #10: 0x00000001008443cb Python`call_function + 587\r\n    frame #11: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #12: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #13: 0x0000000100843fab Python`fast_function + 219\r\n    frame #14: 0x00000001008443cb Python`call_function + 587\r\n    frame #15: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #16: 0x000000010084412e Python`fast_function + 606\r\n    frame #17: 0x00000001008443cb Python`call_function + 587\r\n    frame #18: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #19: 0x000000010084412e Python`fast_function + 606\r\n    frame #20: 0x00000001008443cb Python`call_function + 587\r\n    frame #21: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #22: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\r\n    frame #23: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\r\n    frame #24: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\r\n    frame #25: 0x000000010075f5b3 Python`PyObject_Call + 99\r\n    frame #26: 0x000000010089c587 Python`t_bootstrap + 71\r\n    frame #27: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\r\n    frame #28: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\r\n    frame #29: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\r\n  thread #5\r\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\r\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\r\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\r\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\r\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) + 568\r\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()() + 47\r\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*) + 48\r\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\r\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\r\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\r\n  thread #6\r\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\r\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\r\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\r\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\r\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) + 568\r\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()() + 47\r\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*) + 48\r\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\r\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\r\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\r\n  thread #7\r\n    frame #0: 0x0000000101857592 libsystem_kernel.dylib`read + 10\r\n    frame #1: 0x0000000100895402 Python`_Py_read + 82\r\n    frame #2: 0x000000010089f9b9 Python`os_read + 89\r\n    frame #3: 0x00000001007bb688 Python`_PyCFunction_FastCallDict + 568\r\n    frame #4: 0x00000001008443e4 Python`call_function + 612\r\n    frame #5: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #6: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #7: 0x0000000100843fab Python`fast_function + 219\r\n    frame #8: 0x00000001008443cb Python`call_function + 587\r\n    frame #9: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #10: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #11: 0x0000000100843fab Python`fast_function + 219\r\n    frame #12: 0x00000001008443cb Python`call_function + 587\r\n    frame #13: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #14: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #15: 0x0000000100843fab Python`fast_function + 219\r\n    frame #16: 0x00000001008443cb Python`call_function + 587\r\n    frame #17: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #18: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #19: 0x0000000100843fab Python`fast_function + 219\r\n    frame #20: 0x00000001008443cb Python`call_function + 587\r\n    frame #21: 0x0000000100848aa0 Python`_PyEval_EvalFrameDefault + 17056\r\n    frame #22: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #23: 0x0000000100843fab Python`fast_function + 219\r\n    frame #24: 0x00000001008443cb Python`call_function + 587\r\n    frame #25: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #26: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #27: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\r\n    frame #28: 0x000000010079344a Python`function_call + 186\r\n    frame #29: 0x000000010075f5b3 Python`PyObject_Call + 99\r\n    frame #30: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\r\n    frame #31: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #32: 0x0000000100843fab Python`fast_function + 219\r\n    frame #33: 0x00000001008443cb Python`call_function + 587\r\n    frame #34: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #35: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #36: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\r\n    frame #37: 0x000000010079344a Python`function_call + 186\r\n    frame #38: 0x000000010075f5b3 Python`PyObject_Call + 99\r\n    frame #39: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\r\n    frame #40: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #41: 0x0000000100843fab Python`fast_function + 219\r\n    frame #42: 0x00000001008443cb Python`call_function + 587\r\n    frame #43: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #44: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #45: 0x00000001008438cf Python`PyEval_EvalCodeEx + 95\r\n    frame #46: 0x000000010079344a Python`function_call + 186\r\n    frame #47: 0x000000010075f5b3 Python`PyObject_Call + 99\r\n    frame #48: 0x0000000100848c31 Python`_PyEval_EvalFrameDefault + 17457\r\n    frame #49: 0x00000001008437a0 Python`_PyEval_EvalCodeWithName + 2720\r\n    frame #50: 0x0000000100843fab Python`fast_function + 219\r\n    frame #51: 0x00000001008443cb Python`call_function + 587\r\n    frame #52: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #53: 0x000000010084412e Python`fast_function + 606\r\n    frame #54: 0x00000001008443cb Python`call_function + 587\r\n    frame #55: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #56: 0x000000010084412e Python`fast_function + 606\r\n    frame #57: 0x00000001008443cb Python`call_function + 587\r\n    frame #58: 0x0000000100849d84 Python`_PyEval_EvalFrameDefault + 21892\r\n    frame #59: 0x00000001008447cc Python`_PyFunction_FastCallDict + 828\r\n    frame #60: 0x000000010075f984 Python`_PyObject_FastCallDict + 356\r\n    frame #61: 0x000000010075faa0 Python`_PyObject_Call_Prepend + 208\r\n    frame #62: 0x000000010075f5b3 Python`PyObject_Call + 99\r\n    frame #63: 0x000000010089c587 Python`t_bootstrap + 71\r\n    frame #64: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\r\n    frame #65: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\r\n    frame #66: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\r\n  thread #8\r\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\r\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\r\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\r\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\r\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) + 568\r\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()() + 47\r\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*) + 48\r\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\r\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\r\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\r\n  thread #9\r\n    frame #0: 0x0000000101855e7e libsystem_kernel.dylib`__psynch_cvwait + 10\r\n    frame #1: 0x000000010188d662 libsystem_pthread.dylib`_pthread_cond_wait + 732\r\n    frame #2: 0x00000001019b6cb0 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 18\r\n    frame #3: 0x000000011239b5f6 libtensorflow_framework.so`Eigen::EventCount::CommitWait(Eigen::EventCount::Waiter*) + 278\r\n    frame #4: 0x000000011239b26c libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WaitForWork(Eigen::EventCount::Waiter*, tensorflow::thread::EigenEnvironment::Task*) + 828\r\n    frame #5: 0x000000011239a898 libtensorflow_framework.so`Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int) + 568\r\n    frame #6: 0x000000011239a55f libtensorflow_framework.so`std::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()() + 47\r\n    frame #7: 0x00000001123c12f0 libtensorflow_framework.so`void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*) + 48\r\n    frame #8: 0x000000010188c6c1 libsystem_pthread.dylib`_pthread_body + 340\r\n    frame #9: 0x000000010188c56d libsystem_pthread.dylib`_pthread_start + 377\r\n    frame #10: 0x000000010188bc5d libsystem_pthread.dylib`thread_start + 13\r\n```\r\n\r\n**Python threads:**\r\n\r\n```\r\nThread 0x0000700002637000 (most recent call first):\r\n\r\nThread 0x00007000025b4000 (most recent call first):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 379 in _recv\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 407 in _recv_bytes\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/connection.py\", line 216 in recv_bytes\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/multiprocessing/queues.py\", line 94 in get\r\n<REDACTED>\r\n\r\n\r\nThread 0x0000700001fab000 (most recent call first):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 551 in wait\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 1180 in run\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x0000700001aa8000 (most recent call first):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 551 in wait\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 1180 in run\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x0000700000f19000 (most recent call first):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 299 in wait\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/queue.py\", line 173 in get\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/watchdog/observers/api.py\", line 360 in dispatch_events\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/watchdog/observers/api.py\", line 199 in run\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x0000700000a16000 (most recent call first):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/selectors.py\", line 577 in select\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/base_events.py\", line 1389 in _run_once\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/base_events.py\", line 421 in run_forever\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864 in run\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nCurrent thread 0x0000000101895340 (most recent call first):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 707 in __del__\r\n```"}
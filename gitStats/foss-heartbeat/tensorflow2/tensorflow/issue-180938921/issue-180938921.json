{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4759", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4759/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4759/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4759/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4759", "id": 180938921, "node_id": "MDU6SXNzdWUxODA5Mzg5MjE=", "number": 4759, "title": "AttributeError: 'module' object has no attribute 'NodeDef'", "user": {"login": "renganxu", "id": 3160803, "node_id": "MDQ6VXNlcjMxNjA4MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/3160803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/renganxu", "html_url": "https://github.com/renganxu", "followers_url": "https://api.github.com/users/renganxu/followers", "following_url": "https://api.github.com/users/renganxu/following{/other_user}", "gists_url": "https://api.github.com/users/renganxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/renganxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/renganxu/subscriptions", "organizations_url": "https://api.github.com/users/renganxu/orgs", "repos_url": "https://api.github.com/users/renganxu/repos", "events_url": "https://api.github.com/users/renganxu/events{/privacy}", "received_events_url": "https://api.github.com/users/renganxu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-10-04T16:15:46Z", "updated_at": "2016-10-15T08:39:01Z", "closed_at": "2016-10-15T08:39:01Z", "author_association": "NONE", "body_html": "<p>I tried to run the distributed Tensorflow for inception-v3 example, but I have the following errors in worker nodes:</p>\n<pre><code>I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:197] Initialize GrpcChannelCache for job ps -&gt; {0 -&gt; 10.149.0.1:2222}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:197] Initialize GrpcChannelCache for job worker -&gt; {0 -&gt; localhost:2222, 1 -&gt; 10.149.0.3:2222}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:206] Started server with target: grpc://localhost:2222\nTraceback (most recent call last):\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/imagenet_distributed_train.py\", line 65, in &lt;module&gt;\n    tf.app.run()\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/imagenet_distributed_train.py\", line 61, in main\n    inception_distributed_train.train(server.target, dataset, cluster_spec)\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/inception_distributed_train.py\", line 120, in train\n    global_step = slim.variables.global_step()\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/scopes.py\", line 155, in func_with_args\n    return func(*args, **current_args)\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/variables.py\", line 242, in global_step\n    with tf.device(variable_device(device, 'global_step')):\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/variables.py\", line 214, in variable_device\n    var_def = graph_pb2.NodeDef(name=var_name, op='Variable')\nAttributeError: 'module' object has no attribute 'NodeDef'\n</code></pre>\n<p>Based on the information, the line 214 is<br>\nvar_def = graph_pb2.NodeDef(name=var_name, op='Variable')</p>\n<p>And at the beginning of variables.py, it has the line<br>\nfrom tensorflow.core.framework import graph_pb2</p>\n<p>But I could not find any graph_pb2 from tensorflow/tensorflow/core/framework. Any idea why I got this error?</p>\n<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>No other related posts were found.</p>\n<p>Environment info</p>\n<p>Operating System: Redhat 7.2</p>\n<p>Installed version of CUDA and cuDNN:<br>\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):<br>\n-rw-r--r-- 1 root root 560184 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudadevrt.a<br>\nlrwxrwxrwx 1 root root 16 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so -&gt; libcudart.so.8.0<br>\nlrwxrwxrwx 1 root root 19 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -&gt; libcudart.so.8.0.27<br>\n-rwxr-xr-x 1 root root 394472 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27<br>\n-rw-r--r-- 1 root root 737516 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudart_static.a<br>\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so<br>\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5<br>\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5.1.3<br>\n-rw-r--r-- 1 root root 59715990 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn_static.a</p>\n<p>If installed from source, provide</p>\n<ol>\n<li>The commit hash (git rev-parse HEAD): <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/a63b0cbcabc79531e155a0663a08656debf2fe07/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/a63b0cbcabc79531e155a0663a08656debf2fe07\"><tt>a63b0cb</tt></a></li>\n<li>The output of bazel version:<br>\n.<br>\nBuild label: 0.3.1- (@non-git)<br>\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar<br>\nBuild time: Thu Sep 29 22:19:27 2016 (1475187567)<br>\nBuild timestamp: 1475187567<br>\nBuild timestamp as int: 1475187567</li>\n</ol>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).</p>", "body_text": "I tried to run the distributed Tensorflow for inception-v3 example, but I have the following errors in worker nodes:\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:197] Initialize GrpcChannelCache for job ps -> {0 -> 10.149.0.1:2222}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:197] Initialize GrpcChannelCache for job worker -> {0 -> localhost:2222, 1 -> 10.149.0.3:2222}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:206] Started server with target: grpc://localhost:2222\nTraceback (most recent call last):\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/imagenet_distributed_train.py\", line 65, in <module>\n    tf.app.run()\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/imagenet_distributed_train.py\", line 61, in main\n    inception_distributed_train.train(server.target, dataset, cluster_spec)\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/inception_distributed_train.py\", line 120, in train\n    global_step = slim.variables.global_step()\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/scopes.py\", line 155, in func_with_args\n    return func(*args, **current_args)\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/variables.py\", line 242, in global_step\n    with tf.device(variable_device(device, 'global_step')):\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/variables.py\", line 214, in variable_device\n    var_def = graph_pb2.NodeDef(name=var_name, op='Variable')\nAttributeError: 'module' object has no attribute 'NodeDef'\n\nBased on the information, the line 214 is\nvar_def = graph_pb2.NodeDef(name=var_name, op='Variable')\nAnd at the beginning of variables.py, it has the line\nfrom tensorflow.core.framework import graph_pb2\nBut I could not find any graph_pb2 from tensorflow/tensorflow/core/framework. Any idea why I got this error?\nWhat related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nNo other related posts were found.\nEnvironment info\nOperating System: Redhat 7.2\nInstalled version of CUDA and cuDNN:\n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n-rw-r--r-- 1 root root 560184 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root 16 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root 19 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 root root 394472 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root 737516 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5.1.3\n-rw-r--r-- 1 root root 59715990 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn_static.a\nIf installed from source, provide\n\nThe commit hash (git rev-parse HEAD): a63b0cb\nThe output of bazel version:\n.\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Sep 29 22:19:27 2016 (1475187567)\nBuild timestamp: 1475187567\nBuild timestamp as int: 1475187567\n\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).", "body": "I tried to run the distributed Tensorflow for inception-v3 example, but I have the following errors in worker nodes:\n\n```\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:197] Initialize GrpcChannelCache for job ps -> {0 -> 10.149.0.1:2222}\nI tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:197] Initialize GrpcChannelCache for job worker -> {0 -> localhost:2222, 1 -> 10.149.0.3:2222}\nI tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:206] Started server with target: grpc://localhost:2222\nTraceback (most recent call last):\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/imagenet_distributed_train.py\", line 65, in <module>\n    tf.app.run()\n  File \"/usr/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 30, in run\n    sys.exit(main(sys.argv[:1] + flags_passthrough))\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/imagenet_distributed_train.py\", line 61, in main\n    inception_distributed_train.train(server.target, dataset, cluster_spec)\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/inception_distributed_train.py\", line 120, in train\n    global_step = slim.variables.global_step()\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/scopes.py\", line 155, in func_with_args\n    return func(*args, **current_args)\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/variables.py\", line 242, in global_step\n    with tf.device(variable_device(device, 'global_step')):\n  File \"/cm/shared/scratch/rengan/DL/models/inception/bazel-bin/inception/imagenet_distributed_train.runfiles/inception/inception/slim/variables.py\", line 214, in variable_device\n    var_def = graph_pb2.NodeDef(name=var_name, op='Variable')\nAttributeError: 'module' object has no attribute 'NodeDef'\n```\n\nBased on the information, the line 214 is \nvar_def = graph_pb2.NodeDef(name=var_name, op='Variable')\n\nAnd at the beginning of variables.py, it has the line\nfrom tensorflow.core.framework import graph_pb2\n\nBut I could not find any graph_pb2 from tensorflow/tensorflow/core/framework. Any idea why I got this error? \n### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\n\nNo other related posts were found.\n\nEnvironment info\n\nOperating System: Redhat 7.2\n\nInstalled version of CUDA and cuDNN: \n(please attach the output of ls -l /path/to/cuda/lib/libcud*):\n-rw-r--r-- 1 root root 560184 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudadevrt.a\nlrwxrwxrwx 1 root root 16 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so -> libcudart.so.8.0\nlrwxrwxrwx 1 root root 19 Sep 12 15:13 /usr/local/cuda-8.0/lib64/libcudart.so.8.0 -> libcudart.so.8.0.27\n-rwxr-xr-x 1 root root 394472 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudart.so.8.0.27\n-rw-r--r-- 1 root root 737516 May 8 02:00 /usr/local/cuda-8.0/lib64/libcudart_static.a\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5\n-rwxr-xr-x 1 root root 60696704 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn.so.5.1.3\n-rw-r--r-- 1 root root 59715990 Sep 24 09:12 /usr/local/cuda-8.0/lib64/libcudnn_static.a\n\nIf installed from source, provide \n1. The commit hash (git rev-parse HEAD): a63b0cbcabc79531e155a0663a08656debf2fe07\n2. The output of bazel version:\n.\nBuild label: 0.3.1- (@non-git)\nBuild target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Thu Sep 29 22:19:27 2016 (1475187567)\nBuild timestamp: 1475187567\nBuild timestamp as int: 1475187567\n### Logs or other output that would be helpful\n\n(If logs are large, please upload as attachment or provide link).\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13481", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13481/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13481/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13481/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13481", "id": 262655193, "node_id": "MDU6SXNzdWUyNjI2NTUxOTM=", "number": 13481, "title": "crosstool_wrapper_driver_is_not_gcc failed building tensorflow/tools/graph_transforms:transform_graph", "user": {"login": "luxial", "id": 32349355, "node_id": "MDQ6VXNlcjMyMzQ5MzU1", "avatar_url": "https://avatars3.githubusercontent.com/u/32349355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luxial", "html_url": "https://github.com/luxial", "followers_url": "https://api.github.com/users/luxial/followers", "following_url": "https://api.github.com/users/luxial/following{/other_user}", "gists_url": "https://api.github.com/users/luxial/gists{/gist_id}", "starred_url": "https://api.github.com/users/luxial/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luxial/subscriptions", "organizations_url": "https://api.github.com/users/luxial/orgs", "repos_url": "https://api.github.com/users/luxial/repos", "events_url": "https://api.github.com/users/luxial/events{/privacy}", "received_events_url": "https://api.github.com/users/luxial/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-04T03:32:04Z", "updated_at": "2018-10-29T13:28:20Z", "closed_at": "2017-10-05T00:11:24Z", "author_association": "NONE", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Ubuntu 16.04</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>:  1.3.0 @ commit 635196</li>\n<li><strong>Python version</strong>: 2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>: not complied from source but Build label: 0.6.0</li>\n<li><strong>CUDA/cuDNN version</strong>: CUDA 8.0, cudnn6.0</li>\n<li><strong>GPU model and memory</strong>: GTX 1080 Ti</li>\n<li><strong>Exact command to reproduce</strong>: bazel build tensorflow/tools/graph_transforms:transform_graph  --verbose_failures</li>\n</ul>\n<h3>Describe the problem</h3>\n<p>Build tensorflow from source successful, verified it works, but cannot build the tool \"transform_graph\"</p>\n<pre><code>ERROR: /home/local/ANT/luxial/tensorflow/tensorflow/tools/graph_transforms/BUILD:222:1: Linking of rule '//tensorflow/tools/graph_transforms:transform_graph' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command (cd /home/local/ANT/luxial/.cache/bazel/_bazel_luxial/ce09802cfa8c7dbfadcb21edd190af0e/execroot/org_tensorflow &amp;&amp; \\\n  exec env - \\\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\n    CUDNN_INSTALL_PATH=/usr/local/cuda-8.0 \\\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\n    PWD=/proc/self/cwd \\\n    PYTHON_BIN_PATH=/usr/bin/python \\\n    PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\\n    TF_CUDA_CLANG=0 \\\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\n    TF_CUDA_VERSION=8.0 \\\n    TF_CUDNN_VERSION=6 \\\n    TF_NEED_CUDA=1 \\\n    TF_NEED_OPENCL=0 \\\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/local_linux-opt/bin/tensorflow/tools/graph_transforms/transform_graph '-Wl,-rpath,$\nORIGIN/../../../_solib_local/_U_S_Stensorflow_Stools_Sgraph_Utransforms_Ctransform_Ugraph___Utensorflow' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccu\nblas___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccusolver___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scu\nda_Slib' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' -Lbazel-out/local_linux-opt/bin/_solib_l\nocal/_U_S_Stensorflow_Stools_Sgraph_Utransforms_Ctransform_Ugraph___Utensorflow -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccublas___Uexternal_Sloca\nl_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccusolver___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib '-Wl,-rpath,$ORIGIN/,-rpath,$ORIGIN/..,-rpath,$ORIGIN/../..' -Wl,-z,muldefs -Wl,-z,muldefs -Wl,-rpath,../local_config_cuda/cuda/lib64 -Wl,-rpath,../local_config_cuda/cuda/extras/CUPTI/lib64 -pthread -Wl,-no-as-needed -B/usr/bin/ -fPIC -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,--gc-sections -Wl,@bazel-out/local_linux-opt/bin/tensorflow/tools/graph_transforms/transform_graph-2.params)\n</code></pre>\n<h3>What I tried</h3>\n<p>Basically everything in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"217760140\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/8790\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/8790/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/8790\">#8790</a>, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"176775153\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/4365\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/4365/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/4365\">#4365</a>, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"127622427\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/817\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/817/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/817\">#817</a></p>\n<ol>\n<li>export LD_LIBRARY_PATH=/usr/local/cuda 8.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</li>\n<li>Upgrade Bazel, current build label 0.6.0</li>\n<li>bazel clean --expunge</li>\n<li>Adding -fPIC to the options in ../third_party/gpus/crosstool/CROSSTOOL_nvcc.tpl line 60.</li>\n<li>Add cpu_compiler_flags.append('-fno-use-linker-plugin') in third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl</li>\n</ol>\n<p>None of them solve the issue.</p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below):  1.3.0 @ commit 635196\nPython version: 2.7\nBazel version (if compiling from source): not complied from source but Build label: 0.6.0\nCUDA/cuDNN version: CUDA 8.0, cudnn6.0\nGPU model and memory: GTX 1080 Ti\nExact command to reproduce: bazel build tensorflow/tools/graph_transforms:transform_graph  --verbose_failures\n\nDescribe the problem\nBuild tensorflow from source successful, verified it works, but cannot build the tool \"transform_graph\"\nERROR: /home/local/ANT/luxial/tensorflow/tensorflow/tools/graph_transforms/BUILD:222:1: Linking of rule '//tensorflow/tools/graph_transforms:transform_graph' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command (cd /home/local/ANT/luxial/.cache/bazel/_bazel_luxial/ce09802cfa8c7dbfadcb21edd190af0e/execroot/org_tensorflow && \\\n  exec env - \\\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\n    CUDNN_INSTALL_PATH=/usr/local/cuda-8.0 \\\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\n    PWD=/proc/self/cwd \\\n    PYTHON_BIN_PATH=/usr/bin/python \\\n    PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\\n    TF_CUDA_CLANG=0 \\\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\n    TF_CUDA_VERSION=8.0 \\\n    TF_CUDNN_VERSION=6 \\\n    TF_NEED_CUDA=1 \\\n    TF_NEED_OPENCL=0 \\\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/local_linux-opt/bin/tensorflow/tools/graph_transforms/transform_graph '-Wl,-rpath,$\nORIGIN/../../../_solib_local/_U_S_Stensorflow_Stools_Sgraph_Utransforms_Ctransform_Ugraph___Utensorflow' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccu\nblas___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccusolver___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scu\nda_Slib' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' -Lbazel-out/local_linux-opt/bin/_solib_l\nocal/_U_S_Stensorflow_Stools_Sgraph_Utransforms_Ctransform_Ugraph___Utensorflow -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccublas___Uexternal_Sloca\nl_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccusolver___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib '-Wl,-rpath,$ORIGIN/,-rpath,$ORIGIN/..,-rpath,$ORIGIN/../..' -Wl,-z,muldefs -Wl,-z,muldefs -Wl,-rpath,../local_config_cuda/cuda/lib64 -Wl,-rpath,../local_config_cuda/cuda/extras/CUPTI/lib64 -pthread -Wl,-no-as-needed -B/usr/bin/ -fPIC -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,--gc-sections -Wl,@bazel-out/local_linux-opt/bin/tensorflow/tools/graph_transforms/transform_graph-2.params)\n\nWhat I tried\nBasically everything in #8790, #4365, #817\n\nexport LD_LIBRARY_PATH=/usr/local/cuda 8.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\nUpgrade Bazel, current build label 0.6.0\nbazel clean --expunge\nAdding -fPIC to the options in ../third_party/gpus/crosstool/CROSSTOOL_nvcc.tpl line 60.\nAdd cpu_compiler_flags.append('-fno-use-linker-plugin') in third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl\n\nNone of them solve the issue.", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**:  1.3.0 @ commit 635196\r\n- **Python version**: 2.7\r\n- **Bazel version (if compiling from source)**: not complied from source but Build label: 0.6.0 \r\n- **CUDA/cuDNN version**: CUDA 8.0, cudnn6.0\r\n- **GPU model and memory**: GTX 1080 Ti\r\n- **Exact command to reproduce**: bazel build tensorflow/tools/graph_transforms:transform_graph  --verbose_failures\r\n\r\n### Describe the problem\r\nBuild tensorflow from source successful, verified it works, but cannot build the tool \"transform_graph\"\r\n~~~\r\nERROR: /home/local/ANT/luxial/tensorflow/tensorflow/tools/graph_transforms/BUILD:222:1: Linking of rule '//tensorflow/tools/graph_transforms:transform_graph' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command (cd /home/local/ANT/luxial/.cache/bazel/_bazel_luxial/ce09802cfa8c7dbfadcb21edd190af0e/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    CUDNN_INSTALL_PATH=/usr/local/cuda-8.0 \\\r\n    GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python \\\r\n    PYTHON_LIB_PATH=/usr/local/lib/python2.7/dist-packages \\\r\n    TF_CUDA_CLANG=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_CUDA_VERSION=8.0 \\\r\n    TF_CUDNN_VERSION=6 \\\r\n    TF_NEED_CUDA=1 \\\r\n    TF_NEED_OPENCL=0 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/local_linux-opt/bin/tensorflow/tools/graph_transforms/transform_graph '-Wl,-rpath,$\r\nORIGIN/../../../_solib_local/_U_S_Stensorflow_Stools_Sgraph_Utransforms_Ctransform_Ugraph___Utensorflow' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccu\r\nblas___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccusolver___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scu\r\nda_Slib' '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib' -Lbazel-out/local_linux-opt/bin/_solib_l\r\nocal/_U_S_Stensorflow_Stools_Sgraph_Utransforms_Ctransform_Ugraph___Utensorflow -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccublas___Uexternal_Sloca\r\nl_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccusolver___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib -Lbazel-out/local_linux-opt/bin/_solib_local/_U@local_Uconfig_Ucuda_S_Scuda_Ccudart___Uexternal_Slocal_Uconfig_Ucuda_Scuda_Scuda_Slib '-Wl,-rpath,$ORIGIN/,-rpath,$ORIGIN/..,-rpath,$ORIGIN/../..' -Wl,-z,muldefs -Wl,-z,muldefs -Wl,-rpath,../local_config_cuda/cuda/lib64 -Wl,-rpath,../local_config_cuda/cuda/extras/CUPTI/lib64 -pthread -Wl,-no-as-needed -B/usr/bin/ -fPIC -pie -Wl,-z,relro,-z,now -no-canonical-prefixes -pass-exit-codes '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -Wl,--gc-sections -Wl,@bazel-out/local_linux-opt/bin/tensorflow/tools/graph_transforms/transform_graph-2.params)\r\n~~~\r\n### What I tried\r\nBasically everything in #8790, #4365, #817\r\n1. export LD_LIBRARY_PATH=/usr/local/cuda 8.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}} \r\n2. Upgrade Bazel, current build label 0.6.0\r\n3. bazel clean --expunge\r\n4. Adding -fPIC to the options in ../third_party/gpus/crosstool/CROSSTOOL_nvcc.tpl line 60.\r\n5. Add cpu_compiler_flags.append('-fno-use-linker-plugin') in third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl\r\n\r\nNone of them solve the issue.\r\n"}
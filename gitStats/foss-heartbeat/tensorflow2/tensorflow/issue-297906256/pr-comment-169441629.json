{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/169441629", "pull_request_review_id": 97968298, "id": 169441629, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTQ0MTYyOQ==", "diff_hunk": "@@ -0,0 +1,106 @@\n+/* Copyright 2018 The TensorFlow Authors. All Rights Reserved.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+you may not use this file except in compliance with the License.\n+You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+==============================================================================*/\n+#include <string.h>\n+#include <vector>\n+#include \"tensorflow/contrib/lite/builtin_op_data.h\"\n+#include \"tensorflow/contrib/lite/context.h\"\n+#include \"tensorflow/contrib/lite/kernels/internal/reference/reference_ops.h\"\n+#include \"tensorflow/contrib/lite/kernels/internal/tensor.h\"\n+#include \"tensorflow/contrib/lite/kernels/kernel_util.h\"\n+#include \"tensorflow/contrib/lite/kernels/op_macros.h\"\n+\n+namespace tflite {\n+namespace ops {\n+namespace builtin {\n+namespace maximum {\n+\n+// This file has a reference implemenation of TFMaximum.\n+enum KernelType {\n+  kReference,\n+};\n+\n+constexpr int kInputTensor1 = 0;\n+constexpr int kInputTensor2 = 1;\n+constexpr int kOutputTensor = 0;\n+\n+struct MaximumContext {\n+  MaximumContext(TfLiteContext* context, TfLiteNode* node) {\n+    input1 = GetInput(context, node, kInputTensor1);\n+    input2 = GetInput(context, node, kInputTensor2);\n+    output = GetOutput(context, node, kOutputTensor);\n+  }\n+  TfLiteTensor* input1;\n+  TfLiteTensor* input2;\n+  TfLiteTensor* output;\n+};\n+\n+TfLiteStatus Prepare(TfLiteContext* context, TfLiteNode* node) {\n+  TF_LITE_ENSURE_EQ(context, NumInputs(node), 2);\n+  TF_LITE_ENSURE_EQ(context, NumOutputs(node), 1);\n+\n+  MaximumContext op_context(context, node);\n+  TF_LITE_ENSURE_EQ(context, op_context.input1->type, op_context.input2->type);\n+  TfLiteIntArray* output_dims = TfLiteIntArrayCopy(op_context.input2->dims);\n+  op_context.output->type = op_context.input2->type;\n+  return context->ResizeTensor(context, op_context.output, output_dims);\n+}\n+\n+template <KernelType kernel_type>\n+TfLiteStatus Eval(TfLiteContext* context, TfLiteNode* node) {\n+  MaximumContext op_context(context, node);\n+\n+#define TF_LITE_MAXIMUM(kernel_type, data_type)    \\\n+  kernel_type::TensorFlowMaximum<data_type>(       \\\n+      GetTensorData<data_type>(op_context.input1), \\\n+      GetTensorDims(op_context.input1),            \\\n+      GetTensorData<data_type>(op_context.input2), \\\n+      GetTensorDims(op_context.input2),            \\\n+      GetTensorData<data_type>(op_context.output), \\\n+      GetTensorDims(op_context.output))\n+\n+  if (kernel_type == kReference) {\n+    switch (op_context.output->type) {\n+      case kTfLiteFloat32:\n+        TF_LITE_MAXIMUM(reference_ops, float);\n+        break;\n+      default:\n+        context->ReportError(context,\n+                             \"Type %d is currently not supported by TFMaximum.\",", "path": "tensorflow/contrib/lite/kernels/maximum.cc", "position": null, "original_position": 80, "commit_id": "2f9265ff01de864ff00aed57f399c00d05ce498d", "original_commit_id": "3def7ebd4699b20219dcb1b99ba73bc19cb8c728", "user": {"login": "StanislawAntol", "id": 1846231, "node_id": "MDQ6VXNlcjE4NDYyMzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1846231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StanislawAntol", "html_url": "https://github.com/StanislawAntol", "followers_url": "https://api.github.com/users/StanislawAntol/followers", "following_url": "https://api.github.com/users/StanislawAntol/following{/other_user}", "gists_url": "https://api.github.com/users/StanislawAntol/gists{/gist_id}", "starred_url": "https://api.github.com/users/StanislawAntol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StanislawAntol/subscriptions", "organizations_url": "https://api.github.com/users/StanislawAntol/orgs", "repos_url": "https://api.github.com/users/StanislawAntol/repos", "events_url": "https://api.github.com/users/StanislawAntol/events{/privacy}", "received_events_url": "https://api.github.com/users/StanislawAntol/received_events", "type": "User", "site_admin": false}, "body": "Fixed these and the merge conflicts in the `schema` files.", "created_at": "2018-02-20T20:00:51Z", "updated_at": "2018-03-23T22:24:48Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/17074#discussion_r169441629", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17074", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/169441629"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/17074#discussion_r169441629"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/17074"}}, "body_html": "<p>Fixed these and the merge conflicts in the <code>schema</code> files.</p>", "body_text": "Fixed these and the merge conflicts in the schema files.", "in_reply_to_id": 169394651}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/438624462", "html_url": "https://github.com/tensorflow/tensorflow/issues/23407#issuecomment-438624462", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23407", "id": 438624462, "node_id": "MDEyOklzc3VlQ29tbWVudDQzODYyNDQ2Mg==", "user": {"login": "galeone", "id": 8427788, "node_id": "MDQ6VXNlcjg0Mjc3ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8427788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/galeone", "html_url": "https://github.com/galeone", "followers_url": "https://api.github.com/users/galeone/followers", "following_url": "https://api.github.com/users/galeone/following{/other_user}", "gists_url": "https://api.github.com/users/galeone/gists{/gist_id}", "starred_url": "https://api.github.com/users/galeone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/galeone/subscriptions", "organizations_url": "https://api.github.com/users/galeone/orgs", "repos_url": "https://api.github.com/users/galeone/repos", "events_url": "https://api.github.com/users/galeone/events{/privacy}", "received_events_url": "https://api.github.com/users/galeone/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-14T11:04:23Z", "updated_at": "2018-11-14T11:04:46Z", "author_association": "NONE", "body_html": "<p>Yes, without the <code>feature /= 255.</code> line the eager code is broken.</p>\n<p>The <code>disc_loss</code> value in eager mode, with the feature scaling, is:</p>\n<pre><code>D loss:  tf.Tensor(2.5863452, shape=(), dtype=float32)\nGLOBAL STEP[1]\nD loss:  tf.Tensor(3.7927284, shape=(), dtype=float32)\nGLOBAL STEP[2]\nD loss:  tf.Tensor(1.7489786, shape=(), dtype=float32)\nGLOBAL STEP[3]\nD loss:  tf.Tensor(2.4115205, shape=(), dtype=float32)\nGLOBAL STEP[4]\nD loss:  tf.Tensor(1.479794, shape=(), dtype=float32)\nGLOBAL STEP[5]\nD loss:  tf.Tensor(1.857255, shape=(), dtype=float32)\nGLOBAL STEP[6]\nD loss:  tf.Tensor(1.3435516, shape=(), dtype=float32)\nGLOBAL STEP[7]\nD loss:  tf.Tensor(1.4879988, shape=(), dtype=float32)\nGLOBAL STEP[8]\nD loss:  tf.Tensor(1.4008305, shape=(), dtype=float32)\nGLOBAL STEP[9]\nD loss:  tf.Tensor(1.3350534, shape=(), dtype=float32)\nGLOBAL STEP[10]\nD loss:  tf.Tensor(1.3525255, shape=(), dtype=float32)\nGLOBAL STEP[11]\nD loss:  tf.Tensor(1.3573906, shape=(), dtype=float32)\nGLOBAL STEP[12]\nD loss:  tf.Tensor(1.3513403, shape=(), dtype=float32)\nGLOBAL STEP[13]\nD loss:  tf.Tensor(1.3532543, shape=(), dtype=float32)\nGLOBAL STEP[14]\nD loss:  tf.Tensor(1.3461918, shape=(), dtype=float32)\nGLOBAL STEP[15]\nD loss:  tf.Tensor(1.351814, shape=(), dtype=float32)\nGLOBAL STEP[16]\nD loss:  tf.Tensor(1.3492448, shape=(), dtype=float32)\nGLOBAL STEP[17]\nD loss:  tf.Tensor(1.3633372, shape=(), dtype=float32)\nGLOBAL STEP[18]\nD loss:  tf.Tensor(1.3482394, shape=(), dtype=float32)\nGLOBAL STEP[19]\nD loss:  tf.Tensor(1.3703191, shape=(), dtype=float32)\nGLOBAL STEP[20]\nD loss:  tf.Tensor(1.3946171, shape=(), dtype=float32)\nGLOBAL STEP[21]\nD loss:  tf.Tensor(1.4548875, shape=(), dtype=float32)\nGLOBAL STEP[22]\nD loss:  tf.Tensor(1.6209935, shape=(), dtype=float32)\nGLOBAL STEP[23]\nD loss:  tf.Tensor(1.9088718, shape=(), dtype=float32)\nGLOBAL STEP[24]\nD loss:  tf.Tensor(2.0123127, shape=(), dtype=float32)\nGLOBAL STEP[25]\nD loss:  tf.Tensor(1.7655286, shape=(), dtype=float32)\nGLOBAL STEP[26]\nD loss:  tf.Tensor(1.5841687, shape=(), dtype=float32)\nGLOBAL STEP[27]\nD loss:  tf.Tensor(1.5094138, shape=(), dtype=float32)\nGLOBAL STEP[28]\nD loss:  tf.Tensor(1.4937377, shape=(), dtype=float32)\nGLOBAL STEP[29]\nD loss:  tf.Tensor(1.4909501, shape=(), dtype=float32)\nGLOBAL STEP[30]\nD loss:  tf.Tensor(1.5101626, shape=(), dtype=float32)\n</code></pre>\n<p>While removing the feature scaling the value becomes:</p>\n<pre><code>D loss:  tf.Tensor(2.5409622, shape=(), dtype=float32)\nGLOBAL STEP[1]\nD loss:  tf.Tensor(1.0496982, shape=(), dtype=float32)\nGLOBAL STEP[2]\nD loss:  tf.Tensor(0.05322905, shape=(), dtype=float32)\nGLOBAL STEP[3]\nD loss:  tf.Tensor(0.026622836, shape=(), dtype=float32)\nGLOBAL STEP[4]\nD loss:  tf.Tensor(0.00439855, shape=(), dtype=float32)\nGLOBAL STEP[5]\nD loss:  tf.Tensor(0.011926692, shape=(), dtype=float32)\nGLOBAL STEP[6]\nD loss:  tf.Tensor(0.0012371272, shape=(), dtype=float32)\nGLOBAL STEP[7]\nD loss:  tf.Tensor(0.0125416275, shape=(), dtype=float32)\nGLOBAL STEP[8]\nD loss:  tf.Tensor(0.0067688944, shape=(), dtype=float32)\nGLOBAL STEP[9]\nD loss:  tf.Tensor(0.0018801485, shape=(), dtype=float32)\nGLOBAL STEP[10]\nD loss:  tf.Tensor(0.012362722, shape=(), dtype=float32)\nGLOBAL STEP[11]\nD loss:  tf.Tensor(0.004985124, shape=(), dtype=float32)\nGLOBAL STEP[12]\nD loss:  tf.Tensor(0.001480296, shape=(), dtype=float32)\nGLOBAL STEP[13]\nD loss:  tf.Tensor(0.0015711666, shape=(), dtype=float32)\nGLOBAL STEP[14]\nD loss:  tf.Tensor(0.0035329773, shape=(), dtype=float32)\nGLOBAL STEP[15]\nD loss:  tf.Tensor(0.0061537297, shape=(), dtype=float32)\nGLOBAL STEP[16]\nD loss:  tf.Tensor(0.0015294439, shape=(), dtype=float32)\nGLOBAL STEP[17]\nD loss:  tf.Tensor(0.0018317825, shape=(), dtype=float32)\nGLOBAL STEP[18]\nD loss:  tf.Tensor(0.0015391075, shape=(), dtype=float32)\nGLOBAL STEP[19]\nD loss:  tf.Tensor(0.0017354895, shape=(), dtype=float32)\nGLOBAL STEP[20]\nD loss:  tf.Tensor(0.0014736701, shape=(), dtype=float32)\nGLOBAL STEP[21]\nD loss:  tf.Tensor(0.0015135503, shape=(), dtype=float32)\nGLOBAL STEP[22]\nD loss:  tf.Tensor(0.0013820046, shape=(), dtype=float32)\nGLOBAL STEP[23]\nD loss:  tf.Tensor(0.0013579719, shape=(), dtype=float32)\nGLOBAL STEP[24]\nD loss:  tf.Tensor(0.0020369224, shape=(), dtype=float32)\nGLOBAL STEP[25]\nD loss:  tf.Tensor(0.0014253389, shape=(), dtype=float32)\nGLOBAL STEP[26]\nD loss:  tf.Tensor(0.0012767054, shape=(), dtype=float32)\nGLOBAL STEP[27]\nD loss:  tf.Tensor(0.001459129, shape=(), dtype=float32)\nGLOBAL STEP[28]\nD loss:  tf.Tensor(0.0017556315, shape=(), dtype=float32)\nGLOBAL STEP[29]\nD loss:  tf.Tensor(0.007157793, shape=(), dtype=float32)\nGLOBAL STEP[30]\nD loss:  tf.Tensor(0.011590726, shape=(), dtype=float32)\n</code></pre>", "body_text": "Yes, without the feature /= 255. line the eager code is broken.\nThe disc_loss value in eager mode, with the feature scaling, is:\nD loss:  tf.Tensor(2.5863452, shape=(), dtype=float32)\nGLOBAL STEP[1]\nD loss:  tf.Tensor(3.7927284, shape=(), dtype=float32)\nGLOBAL STEP[2]\nD loss:  tf.Tensor(1.7489786, shape=(), dtype=float32)\nGLOBAL STEP[3]\nD loss:  tf.Tensor(2.4115205, shape=(), dtype=float32)\nGLOBAL STEP[4]\nD loss:  tf.Tensor(1.479794, shape=(), dtype=float32)\nGLOBAL STEP[5]\nD loss:  tf.Tensor(1.857255, shape=(), dtype=float32)\nGLOBAL STEP[6]\nD loss:  tf.Tensor(1.3435516, shape=(), dtype=float32)\nGLOBAL STEP[7]\nD loss:  tf.Tensor(1.4879988, shape=(), dtype=float32)\nGLOBAL STEP[8]\nD loss:  tf.Tensor(1.4008305, shape=(), dtype=float32)\nGLOBAL STEP[9]\nD loss:  tf.Tensor(1.3350534, shape=(), dtype=float32)\nGLOBAL STEP[10]\nD loss:  tf.Tensor(1.3525255, shape=(), dtype=float32)\nGLOBAL STEP[11]\nD loss:  tf.Tensor(1.3573906, shape=(), dtype=float32)\nGLOBAL STEP[12]\nD loss:  tf.Tensor(1.3513403, shape=(), dtype=float32)\nGLOBAL STEP[13]\nD loss:  tf.Tensor(1.3532543, shape=(), dtype=float32)\nGLOBAL STEP[14]\nD loss:  tf.Tensor(1.3461918, shape=(), dtype=float32)\nGLOBAL STEP[15]\nD loss:  tf.Tensor(1.351814, shape=(), dtype=float32)\nGLOBAL STEP[16]\nD loss:  tf.Tensor(1.3492448, shape=(), dtype=float32)\nGLOBAL STEP[17]\nD loss:  tf.Tensor(1.3633372, shape=(), dtype=float32)\nGLOBAL STEP[18]\nD loss:  tf.Tensor(1.3482394, shape=(), dtype=float32)\nGLOBAL STEP[19]\nD loss:  tf.Tensor(1.3703191, shape=(), dtype=float32)\nGLOBAL STEP[20]\nD loss:  tf.Tensor(1.3946171, shape=(), dtype=float32)\nGLOBAL STEP[21]\nD loss:  tf.Tensor(1.4548875, shape=(), dtype=float32)\nGLOBAL STEP[22]\nD loss:  tf.Tensor(1.6209935, shape=(), dtype=float32)\nGLOBAL STEP[23]\nD loss:  tf.Tensor(1.9088718, shape=(), dtype=float32)\nGLOBAL STEP[24]\nD loss:  tf.Tensor(2.0123127, shape=(), dtype=float32)\nGLOBAL STEP[25]\nD loss:  tf.Tensor(1.7655286, shape=(), dtype=float32)\nGLOBAL STEP[26]\nD loss:  tf.Tensor(1.5841687, shape=(), dtype=float32)\nGLOBAL STEP[27]\nD loss:  tf.Tensor(1.5094138, shape=(), dtype=float32)\nGLOBAL STEP[28]\nD loss:  tf.Tensor(1.4937377, shape=(), dtype=float32)\nGLOBAL STEP[29]\nD loss:  tf.Tensor(1.4909501, shape=(), dtype=float32)\nGLOBAL STEP[30]\nD loss:  tf.Tensor(1.5101626, shape=(), dtype=float32)\n\nWhile removing the feature scaling the value becomes:\nD loss:  tf.Tensor(2.5409622, shape=(), dtype=float32)\nGLOBAL STEP[1]\nD loss:  tf.Tensor(1.0496982, shape=(), dtype=float32)\nGLOBAL STEP[2]\nD loss:  tf.Tensor(0.05322905, shape=(), dtype=float32)\nGLOBAL STEP[3]\nD loss:  tf.Tensor(0.026622836, shape=(), dtype=float32)\nGLOBAL STEP[4]\nD loss:  tf.Tensor(0.00439855, shape=(), dtype=float32)\nGLOBAL STEP[5]\nD loss:  tf.Tensor(0.011926692, shape=(), dtype=float32)\nGLOBAL STEP[6]\nD loss:  tf.Tensor(0.0012371272, shape=(), dtype=float32)\nGLOBAL STEP[7]\nD loss:  tf.Tensor(0.0125416275, shape=(), dtype=float32)\nGLOBAL STEP[8]\nD loss:  tf.Tensor(0.0067688944, shape=(), dtype=float32)\nGLOBAL STEP[9]\nD loss:  tf.Tensor(0.0018801485, shape=(), dtype=float32)\nGLOBAL STEP[10]\nD loss:  tf.Tensor(0.012362722, shape=(), dtype=float32)\nGLOBAL STEP[11]\nD loss:  tf.Tensor(0.004985124, shape=(), dtype=float32)\nGLOBAL STEP[12]\nD loss:  tf.Tensor(0.001480296, shape=(), dtype=float32)\nGLOBAL STEP[13]\nD loss:  tf.Tensor(0.0015711666, shape=(), dtype=float32)\nGLOBAL STEP[14]\nD loss:  tf.Tensor(0.0035329773, shape=(), dtype=float32)\nGLOBAL STEP[15]\nD loss:  tf.Tensor(0.0061537297, shape=(), dtype=float32)\nGLOBAL STEP[16]\nD loss:  tf.Tensor(0.0015294439, shape=(), dtype=float32)\nGLOBAL STEP[17]\nD loss:  tf.Tensor(0.0018317825, shape=(), dtype=float32)\nGLOBAL STEP[18]\nD loss:  tf.Tensor(0.0015391075, shape=(), dtype=float32)\nGLOBAL STEP[19]\nD loss:  tf.Tensor(0.0017354895, shape=(), dtype=float32)\nGLOBAL STEP[20]\nD loss:  tf.Tensor(0.0014736701, shape=(), dtype=float32)\nGLOBAL STEP[21]\nD loss:  tf.Tensor(0.0015135503, shape=(), dtype=float32)\nGLOBAL STEP[22]\nD loss:  tf.Tensor(0.0013820046, shape=(), dtype=float32)\nGLOBAL STEP[23]\nD loss:  tf.Tensor(0.0013579719, shape=(), dtype=float32)\nGLOBAL STEP[24]\nD loss:  tf.Tensor(0.0020369224, shape=(), dtype=float32)\nGLOBAL STEP[25]\nD loss:  tf.Tensor(0.0014253389, shape=(), dtype=float32)\nGLOBAL STEP[26]\nD loss:  tf.Tensor(0.0012767054, shape=(), dtype=float32)\nGLOBAL STEP[27]\nD loss:  tf.Tensor(0.001459129, shape=(), dtype=float32)\nGLOBAL STEP[28]\nD loss:  tf.Tensor(0.0017556315, shape=(), dtype=float32)\nGLOBAL STEP[29]\nD loss:  tf.Tensor(0.007157793, shape=(), dtype=float32)\nGLOBAL STEP[30]\nD loss:  tf.Tensor(0.011590726, shape=(), dtype=float32)", "body": "Yes, without the `feature /= 255.` line the eager code is broken.\r\n\r\nThe `disc_loss` value in eager mode, with the feature scaling, is:\r\n\r\n```\r\nD loss:  tf.Tensor(2.5863452, shape=(), dtype=float32)\r\nGLOBAL STEP[1]\r\nD loss:  tf.Tensor(3.7927284, shape=(), dtype=float32)\r\nGLOBAL STEP[2]\r\nD loss:  tf.Tensor(1.7489786, shape=(), dtype=float32)\r\nGLOBAL STEP[3]\r\nD loss:  tf.Tensor(2.4115205, shape=(), dtype=float32)\r\nGLOBAL STEP[4]\r\nD loss:  tf.Tensor(1.479794, shape=(), dtype=float32)\r\nGLOBAL STEP[5]\r\nD loss:  tf.Tensor(1.857255, shape=(), dtype=float32)\r\nGLOBAL STEP[6]\r\nD loss:  tf.Tensor(1.3435516, shape=(), dtype=float32)\r\nGLOBAL STEP[7]\r\nD loss:  tf.Tensor(1.4879988, shape=(), dtype=float32)\r\nGLOBAL STEP[8]\r\nD loss:  tf.Tensor(1.4008305, shape=(), dtype=float32)\r\nGLOBAL STEP[9]\r\nD loss:  tf.Tensor(1.3350534, shape=(), dtype=float32)\r\nGLOBAL STEP[10]\r\nD loss:  tf.Tensor(1.3525255, shape=(), dtype=float32)\r\nGLOBAL STEP[11]\r\nD loss:  tf.Tensor(1.3573906, shape=(), dtype=float32)\r\nGLOBAL STEP[12]\r\nD loss:  tf.Tensor(1.3513403, shape=(), dtype=float32)\r\nGLOBAL STEP[13]\r\nD loss:  tf.Tensor(1.3532543, shape=(), dtype=float32)\r\nGLOBAL STEP[14]\r\nD loss:  tf.Tensor(1.3461918, shape=(), dtype=float32)\r\nGLOBAL STEP[15]\r\nD loss:  tf.Tensor(1.351814, shape=(), dtype=float32)\r\nGLOBAL STEP[16]\r\nD loss:  tf.Tensor(1.3492448, shape=(), dtype=float32)\r\nGLOBAL STEP[17]\r\nD loss:  tf.Tensor(1.3633372, shape=(), dtype=float32)\r\nGLOBAL STEP[18]\r\nD loss:  tf.Tensor(1.3482394, shape=(), dtype=float32)\r\nGLOBAL STEP[19]\r\nD loss:  tf.Tensor(1.3703191, shape=(), dtype=float32)\r\nGLOBAL STEP[20]\r\nD loss:  tf.Tensor(1.3946171, shape=(), dtype=float32)\r\nGLOBAL STEP[21]\r\nD loss:  tf.Tensor(1.4548875, shape=(), dtype=float32)\r\nGLOBAL STEP[22]\r\nD loss:  tf.Tensor(1.6209935, shape=(), dtype=float32)\r\nGLOBAL STEP[23]\r\nD loss:  tf.Tensor(1.9088718, shape=(), dtype=float32)\r\nGLOBAL STEP[24]\r\nD loss:  tf.Tensor(2.0123127, shape=(), dtype=float32)\r\nGLOBAL STEP[25]\r\nD loss:  tf.Tensor(1.7655286, shape=(), dtype=float32)\r\nGLOBAL STEP[26]\r\nD loss:  tf.Tensor(1.5841687, shape=(), dtype=float32)\r\nGLOBAL STEP[27]\r\nD loss:  tf.Tensor(1.5094138, shape=(), dtype=float32)\r\nGLOBAL STEP[28]\r\nD loss:  tf.Tensor(1.4937377, shape=(), dtype=float32)\r\nGLOBAL STEP[29]\r\nD loss:  tf.Tensor(1.4909501, shape=(), dtype=float32)\r\nGLOBAL STEP[30]\r\nD loss:  tf.Tensor(1.5101626, shape=(), dtype=float32)\r\n```\r\n\r\nWhile removing the feature scaling the value becomes:\r\n\r\n```\r\nD loss:  tf.Tensor(2.5409622, shape=(), dtype=float32)\r\nGLOBAL STEP[1]\r\nD loss:  tf.Tensor(1.0496982, shape=(), dtype=float32)\r\nGLOBAL STEP[2]\r\nD loss:  tf.Tensor(0.05322905, shape=(), dtype=float32)\r\nGLOBAL STEP[3]\r\nD loss:  tf.Tensor(0.026622836, shape=(), dtype=float32)\r\nGLOBAL STEP[4]\r\nD loss:  tf.Tensor(0.00439855, shape=(), dtype=float32)\r\nGLOBAL STEP[5]\r\nD loss:  tf.Tensor(0.011926692, shape=(), dtype=float32)\r\nGLOBAL STEP[6]\r\nD loss:  tf.Tensor(0.0012371272, shape=(), dtype=float32)\r\nGLOBAL STEP[7]\r\nD loss:  tf.Tensor(0.0125416275, shape=(), dtype=float32)\r\nGLOBAL STEP[8]\r\nD loss:  tf.Tensor(0.0067688944, shape=(), dtype=float32)\r\nGLOBAL STEP[9]\r\nD loss:  tf.Tensor(0.0018801485, shape=(), dtype=float32)\r\nGLOBAL STEP[10]\r\nD loss:  tf.Tensor(0.012362722, shape=(), dtype=float32)\r\nGLOBAL STEP[11]\r\nD loss:  tf.Tensor(0.004985124, shape=(), dtype=float32)\r\nGLOBAL STEP[12]\r\nD loss:  tf.Tensor(0.001480296, shape=(), dtype=float32)\r\nGLOBAL STEP[13]\r\nD loss:  tf.Tensor(0.0015711666, shape=(), dtype=float32)\r\nGLOBAL STEP[14]\r\nD loss:  tf.Tensor(0.0035329773, shape=(), dtype=float32)\r\nGLOBAL STEP[15]\r\nD loss:  tf.Tensor(0.0061537297, shape=(), dtype=float32)\r\nGLOBAL STEP[16]\r\nD loss:  tf.Tensor(0.0015294439, shape=(), dtype=float32)\r\nGLOBAL STEP[17]\r\nD loss:  tf.Tensor(0.0018317825, shape=(), dtype=float32)\r\nGLOBAL STEP[18]\r\nD loss:  tf.Tensor(0.0015391075, shape=(), dtype=float32)\r\nGLOBAL STEP[19]\r\nD loss:  tf.Tensor(0.0017354895, shape=(), dtype=float32)\r\nGLOBAL STEP[20]\r\nD loss:  tf.Tensor(0.0014736701, shape=(), dtype=float32)\r\nGLOBAL STEP[21]\r\nD loss:  tf.Tensor(0.0015135503, shape=(), dtype=float32)\r\nGLOBAL STEP[22]\r\nD loss:  tf.Tensor(0.0013820046, shape=(), dtype=float32)\r\nGLOBAL STEP[23]\r\nD loss:  tf.Tensor(0.0013579719, shape=(), dtype=float32)\r\nGLOBAL STEP[24]\r\nD loss:  tf.Tensor(0.0020369224, shape=(), dtype=float32)\r\nGLOBAL STEP[25]\r\nD loss:  tf.Tensor(0.0014253389, shape=(), dtype=float32)\r\nGLOBAL STEP[26]\r\nD loss:  tf.Tensor(0.0012767054, shape=(), dtype=float32)\r\nGLOBAL STEP[27]\r\nD loss:  tf.Tensor(0.001459129, shape=(), dtype=float32)\r\nGLOBAL STEP[28]\r\nD loss:  tf.Tensor(0.0017556315, shape=(), dtype=float32)\r\nGLOBAL STEP[29]\r\nD loss:  tf.Tensor(0.007157793, shape=(), dtype=float32)\r\nGLOBAL STEP[30]\r\nD loss:  tf.Tensor(0.011590726, shape=(), dtype=float32)\r\n```"}
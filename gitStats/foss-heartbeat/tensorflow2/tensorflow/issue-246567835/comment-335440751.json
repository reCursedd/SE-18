{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/335440751", "html_url": "https://github.com/tensorflow/tensorflow/pull/11878#issuecomment-335440751", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11878", "id": 335440751, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTQ0MDc1MQ==", "user": {"login": "hzhangxyz", "id": 11623447, "node_id": "MDQ6VXNlcjExNjIzNDQ3", "avatar_url": "https://avatars0.githubusercontent.com/u/11623447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hzhangxyz", "html_url": "https://github.com/hzhangxyz", "followers_url": "https://api.github.com/users/hzhangxyz/followers", "following_url": "https://api.github.com/users/hzhangxyz/following{/other_user}", "gists_url": "https://api.github.com/users/hzhangxyz/gists{/gist_id}", "starred_url": "https://api.github.com/users/hzhangxyz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hzhangxyz/subscriptions", "organizations_url": "https://api.github.com/users/hzhangxyz/orgs", "repos_url": "https://api.github.com/users/hzhangxyz/repos", "events_url": "https://api.github.com/users/hzhangxyz/events{/privacy}", "received_events_url": "https://api.github.com/users/hzhangxyz/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-10T11:17:20Z", "updated_at": "2017-10-10T11:17:36Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=1770337\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/shamanDevel\">@shamanDevel</a> Hi</p>\n<blockquote>\n<p>Your first log shows that the ops are placed on the GPU while the second log shows the CPU placement. This is exactly opposite to what the execution command 'time python main.py' indicates.</p>\n</blockquote>\n<p>yeah, in <code>time python main.py</code> len of <code>sys.argc</code> is <code>1</code> so it is running on GPU.</p>\n<blockquote>\n<p>If I just look at the logs, then the GPU version takes 2.3sec (100% CPU load) and the CPU version takes 10.68sec (621% CPU load).</p>\n</blockquote>\n<p>but 2.3sec and 10.68sec are system time, which isn't the exact time cost. the exact time is 29.658sec(gpu) and 7.241sec(cpu). For example <code>time sleep 1</code> outputs <code>sleep 1  0.00s user 0.00s system 0% cpu 1.001 total</code>, in which 1.001 is the exact timecost, although cpu calculates nothing.</p>\n<p>So, the problem is that SVD on GPU is slower than SVD on CPU sometimes, which is very strange.</p>", "body_text": "@shamanDevel Hi\n\nYour first log shows that the ops are placed on the GPU while the second log shows the CPU placement. This is exactly opposite to what the execution command 'time python main.py' indicates.\n\nyeah, in time python main.py len of sys.argc is 1 so it is running on GPU.\n\nIf I just look at the logs, then the GPU version takes 2.3sec (100% CPU load) and the CPU version takes 10.68sec (621% CPU load).\n\nbut 2.3sec and 10.68sec are system time, which isn't the exact time cost. the exact time is 29.658sec(gpu) and 7.241sec(cpu). For example time sleep 1 outputs sleep 1  0.00s user 0.00s system 0% cpu 1.001 total, in which 1.001 is the exact timecost, although cpu calculates nothing.\nSo, the problem is that SVD on GPU is slower than SVD on CPU sometimes, which is very strange.", "body": "@shamanDevel Hi\r\n\r\n> Your first log shows that the ops are placed on the GPU while the second log shows the CPU placement. This is exactly opposite to what the execution command 'time python main.py' indicates.\r\n\r\nyeah, in `time python main.py` len of `sys.argc` is `1` so it is running on GPU.\r\n\r\n> If I just look at the logs, then the GPU version takes 2.3sec (100% CPU load) and the CPU version takes 10.68sec (621% CPU load).\r\n\r\nbut 2.3sec and 10.68sec are system time, which isn't the exact time cost. the exact time is 29.658sec(gpu) and 7.241sec(cpu). For example `time sleep 1` outputs `sleep 1  0.00s user 0.00s system 0% cpu 1.001 total`, in which 1.001 is the exact timecost, although cpu calculates nothing.\r\n\r\nSo, the problem is that SVD on GPU is slower than SVD on CPU sometimes, which is very strange."}
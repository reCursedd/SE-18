{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11096", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11096/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11096/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11096/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11096", "id": 239041379, "node_id": "MDU6SXNzdWUyMzkwNDEzNzk=", "number": 11096, "title": "C1002 error when building on Windows 10 64 bit, with vs 2017", "user": {"login": "davidshen84", "id": 65741, "node_id": "MDQ6VXNlcjY1NzQx", "avatar_url": "https://avatars0.githubusercontent.com/u/65741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidshen84", "html_url": "https://github.com/davidshen84", "followers_url": "https://api.github.com/users/davidshen84/followers", "following_url": "https://api.github.com/users/davidshen84/following{/other_user}", "gists_url": "https://api.github.com/users/davidshen84/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidshen84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidshen84/subscriptions", "organizations_url": "https://api.github.com/users/davidshen84/orgs", "repos_url": "https://api.github.com/users/davidshen84/repos", "events_url": "https://api.github.com/users/davidshen84/events{/privacy}", "received_events_url": "https://api.github.com/users/davidshen84/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 29, "created_at": "2017-06-28T03:14:35Z", "updated_at": "2018-01-05T00:48:56Z", "closed_at": "2018-01-05T00:48:56Z", "author_association": "NONE", "body_html": "<p>Please go to Stack Overflow for help and support:</p>\n<p><a href=\"http://stackoverflow.com/questions/tagged/tensorflow\" rel=\"nofollow\">http://stackoverflow.com/questions/tagged/tensorflow</a></p>\n<p>If you open a GitHub issue, here is our policy:</p>\n<ol>\n<li>It must be a bug or a feature request.</li>\n<li>The form below must be filled out.</li>\n<li>It shouldn't be a TensorBoard issue. Those go <a href=\"https://github.com/tensorflow/tensorboard/issues\">here</a>.</li>\n</ol>\n<p><strong>Here's why we have that policy</strong>: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.</p>\n<hr>\n<h3>System information</h3>\n<ul>\n<li>\n<p><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: N/A</p>\n</li>\n<li>\n<p><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Windows 10 64 bit, version 1511</p>\n</li>\n<li>\n<p><strong>TensorFlow installed from (source or binary)</strong>: source</p>\n</li>\n<li>\n<p><strong>TensorFlow version (use command below)</strong>: master branch, commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/90b2a38a1f7cd7cde0f012249407574e97583096/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/90b2a38a1f7cd7cde0f012249407574e97583096\"><tt>90b2a38</tt></a></p>\n</li>\n<li>\n<p><strong>Bazel version (if compiling from source)</strong>: N/A</p>\n</li>\n<li>\n<p><strong>CUDA/cuDNN version</strong>: N/A</p>\n</li>\n<li>\n<p><strong>GPU model and memory</strong>: CPU only</p>\n</li>\n<li>\n<p><strong>Exact command to reproduce</strong>:</p>\n<pre><code>C:\\cmake-3.9.0-rc4-win64-x64\\bin\\cmake.exe .. -G \"Visual Studio 15 2017 Win64\" ^\n-DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\swigwin-3.0.12\\swig.exe ^\n-DPYTHON_EXECUTABLE=C:\\Users\\x\\.conda\\envs\\tensorflow\\python.exe ^\n-DPYTHON_LIBRARIES=C:\\Users\\x\\.conda\\envs\\tensorflow\\libs\\python35.lib ^\n-Dtensorflow_BUILD_CC_TESTS=ON ^\n-Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX\n\nC:\\cmake-3.9.0-rc4-win64-x64\\bin\\cmake.exe --build .\n</code></pre>\n</li>\n</ul>\n<p>You can collect some of this information using our environment capture script:</p>\n<p><del><a href=\"https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\">https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh</a></del></p>\n<p>You can obtain the TensorFlow version with</p>\n<p><del>python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"</del></p>\n<h3>Describe the problem</h3>\n<p>Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.</p>\n<p>Issued above build command, and got the following error at last.</p>\n<pre><code>\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\ALL_BUILD.vcxproj\" (default target) (1) -&gt;\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\_beam_search_ops.vcxproj\" (default target) (3) -&gt;\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.vcxproj\" (default target)\n(4) -&gt;\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal_static.vcxproj\" (default t\narget) (5) -&gt;\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj\" (default target) (108) -&gt;\n(ClCompile target) -&gt;\n  c:\\users\\x\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\external\\eigen_archive\\eigen\\src\\core\\products\\gener\nalblockpanelkernel.h(2011): fatal error C1002: compiler is out of heap space in pass 2 [C:\\Users\\X\\github\\tensorfl\now\\tensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\n  cl : Command line error D8040: error creating or communicating with child process [C:\\Users\\X\\github\\tensorflow\\\ntensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\n\n86 Warning(s)\n2 Error(s)\n</code></pre>\n<p>For the warnings, there are two kinds:</p>\n<pre><code>  C:\\Users\\X\\github\\tensorflow\\tensorflow\\c\\c_api.cc(1938): warning C4190: 'TF_NewWhile' has C-linkage specified,\nbut returns UDT 'TF_WhileParams' which is incompatible with C [C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cma\nke\\build\\tf_test_lib.vcxproj]\n</code></pre>\n<p><strong>and</strong></p>\n<pre><code>  c:\\users\\X\\github\\tensorflow\\tensorflow\\core\\kernels\\eigen_spatial_convolutions.h(724): warning C4789: buffer ''\n of size 8 bytes will be overrun; 32 bytes will be written starting at offset 0 [C:\\Users\\X\\github\\tensorflow\\tens\norflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\n</code></pre>\n<p>I saw there're many complains about <em>compiler is out of heap space in pass 2</em> error, and some say adding \"/Zm2000\" to the compiler would solve the problem. I applied this patch:</p>\n<pre><code>@@ -78,6 +78,8 @@ if(WIN32)\n   set(CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE} /D_ITERATOR_DEBUG_LEVEL=0\")\n   set(CMAKE_CXX_FLAGS_MINSIZEREL \"${CMAKE_CXX_FLAGS_MINSIZEREL} /D_ITERATOR_DEBUG_LEVEL=0\")\n   set(CMAKE_CXX_FLAGS_RELWITHDEBINFO \"${CMAKE_CXX_FLAGS_RELWITHDEBINFO} /D_ITERATOR_DEBUG_LEVEL=0\")\n+  # Increase heap size\n+  set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} /Zm2000\")\n</code></pre>\n<p>But did not solve this problem.</p>\n<h3>Source code / logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.</p>", "body_text": "Please go to Stack Overflow for help and support:\nhttp://stackoverflow.com/questions/tagged/tensorflow\nIf you open a GitHub issue, here is our policy:\n\nIt must be a bug or a feature request.\nThe form below must be filled out.\nIt shouldn't be a TensorBoard issue. Those go here.\n\nHere's why we have that policy: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\n\nSystem information\n\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): N/A\n\n\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 64 bit, version 1511\n\n\nTensorFlow installed from (source or binary): source\n\n\nTensorFlow version (use command below): master branch, commit 90b2a38\n\n\nBazel version (if compiling from source): N/A\n\n\nCUDA/cuDNN version: N/A\n\n\nGPU model and memory: CPU only\n\n\nExact command to reproduce:\nC:\\cmake-3.9.0-rc4-win64-x64\\bin\\cmake.exe .. -G \"Visual Studio 15 2017 Win64\" ^\n-DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\swigwin-3.0.12\\swig.exe ^\n-DPYTHON_EXECUTABLE=C:\\Users\\x\\.conda\\envs\\tensorflow\\python.exe ^\n-DPYTHON_LIBRARIES=C:\\Users\\x\\.conda\\envs\\tensorflow\\libs\\python35.lib ^\n-Dtensorflow_BUILD_CC_TESTS=ON ^\n-Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX\n\nC:\\cmake-3.9.0-rc4-win64-x64\\bin\\cmake.exe --build .\n\n\n\nYou can collect some of this information using our environment capture script:\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\nYou can obtain the TensorFlow version with\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\nDescribe the problem\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\nIssued above build command, and got the following error at last.\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\ALL_BUILD.vcxproj\" (default target) (1) ->\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\_beam_search_ops.vcxproj\" (default target) (3) ->\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.vcxproj\" (default target)\n(4) ->\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal_static.vcxproj\" (default t\narget) (5) ->\n\"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj\" (default target) (108) ->\n(ClCompile target) ->\n  c:\\users\\x\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\external\\eigen_archive\\eigen\\src\\core\\products\\gener\nalblockpanelkernel.h(2011): fatal error C1002: compiler is out of heap space in pass 2 [C:\\Users\\X\\github\\tensorfl\now\\tensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\n  cl : Command line error D8040: error creating or communicating with child process [C:\\Users\\X\\github\\tensorflow\\\ntensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\n\n86 Warning(s)\n2 Error(s)\n\nFor the warnings, there are two kinds:\n  C:\\Users\\X\\github\\tensorflow\\tensorflow\\c\\c_api.cc(1938): warning C4190: 'TF_NewWhile' has C-linkage specified,\nbut returns UDT 'TF_WhileParams' which is incompatible with C [C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cma\nke\\build\\tf_test_lib.vcxproj]\n\nand\n  c:\\users\\X\\github\\tensorflow\\tensorflow\\core\\kernels\\eigen_spatial_convolutions.h(724): warning C4789: buffer ''\n of size 8 bytes will be overrun; 32 bytes will be written starting at offset 0 [C:\\Users\\X\\github\\tensorflow\\tens\norflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\n\nI saw there're many complains about compiler is out of heap space in pass 2 error, and some say adding \"/Zm2000\" to the compiler would solve the problem. I applied this patch:\n@@ -78,6 +78,8 @@ if(WIN32)\n   set(CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE} /D_ITERATOR_DEBUG_LEVEL=0\")\n   set(CMAKE_CXX_FLAGS_MINSIZEREL \"${CMAKE_CXX_FLAGS_MINSIZEREL} /D_ITERATOR_DEBUG_LEVEL=0\")\n   set(CMAKE_CXX_FLAGS_RELWITHDEBINFO \"${CMAKE_CXX_FLAGS_RELWITHDEBINFO} /D_ITERATOR_DEBUG_LEVEL=0\")\n+  # Increase heap size\n+  set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} /Zm2000\")\n\nBut did not solve this problem.\nSource code / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttp://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug or a feature request.\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: N/A\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10 64 bit, version 1511\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: master branch, commit 90b2a38a1\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: CPU only\r\n- **Exact command to reproduce**:\r\n\r\n      C:\\cmake-3.9.0-rc4-win64-x64\\bin\\cmake.exe .. -G \"Visual Studio 15 2017 Win64\" ^\r\n      -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\swigwin-3.0.12\\swig.exe ^\r\n      -DPYTHON_EXECUTABLE=C:\\Users\\x\\.conda\\envs\\tensorflow\\python.exe ^\r\n      -DPYTHON_LIBRARIES=C:\\Users\\x\\.conda\\envs\\tensorflow\\libs\\python35.lib ^\r\n      -Dtensorflow_BUILD_CC_TESTS=ON ^\r\n      -Dtensorflow_WIN_CPU_SIMD_OPTIONS=/arch:AVX\r\n\r\n      C:\\cmake-3.9.0-rc4-win64-x64\\bin\\cmake.exe --build .\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\n~https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh~\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\n~python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"~\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nIssued above build command, and got the following error at last.\r\n\r\n    \"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\ALL_BUILD.vcxproj\" (default target) (1) ->\r\n    \"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\_beam_search_ops.vcxproj\" (default target) (3) ->\r\n    \"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.vcxproj\" (default target)\r\n    (4) ->\r\n    \"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal_static.vcxproj\" (default t\r\n    arget) (5) ->\r\n    \"C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj\" (default target) (108) ->\r\n    (ClCompile target) ->\r\n      c:\\users\\x\\github\\tensorflow\\tensorflow\\contrib\\cmake\\build\\external\\eigen_archive\\eigen\\src\\core\\products\\gener\r\n    alblockpanelkernel.h(2011): fatal error C1002: compiler is out of heap space in pass 2 [C:\\Users\\X\\github\\tensorfl\r\n    ow\\tensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\r\n      cl : Command line error D8040: error creating or communicating with child process [C:\\Users\\X\\github\\tensorflow\\\r\n    tensorflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\r\n\r\n\t86 Warning(s)\r\n\t2 Error(s)\r\n\r\nFor the warnings, there are two kinds:\r\n\r\n      C:\\Users\\X\\github\\tensorflow\\tensorflow\\c\\c_api.cc(1938): warning C4190: 'TF_NewWhile' has C-linkage specified,\r\n    but returns UDT 'TF_WhileParams' which is incompatible with C [C:\\Users\\X\\github\\tensorflow\\tensorflow\\contrib\\cma\r\n    ke\\build\\tf_test_lib.vcxproj]\r\n\r\n**and**\r\n\r\n      c:\\users\\X\\github\\tensorflow\\tensorflow\\core\\kernels\\eigen_spatial_convolutions.h(724): warning C4789: buffer ''\r\n     of size 8 bytes will be overrun; 32 bytes will be written starting at offset 0 [C:\\Users\\X\\github\\tensorflow\\tens\r\n    orflow\\contrib\\cmake\\build\\tf_core_kernels.vcxproj]\r\n\r\nI saw there're many complains about *compiler is out of heap space in pass 2* error, and some say adding \"/Zm2000\" to the compiler would solve the problem. I applied this patch:\r\n\r\n    @@ -78,6 +78,8 @@ if(WIN32)\r\n       set(CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE} /D_ITERATOR_DEBUG_LEVEL=0\")\r\n       set(CMAKE_CXX_FLAGS_MINSIZEREL \"${CMAKE_CXX_FLAGS_MINSIZEREL} /D_ITERATOR_DEBUG_LEVEL=0\")\r\n       set(CMAKE_CXX_FLAGS_RELWITHDEBINFO \"${CMAKE_CXX_FLAGS_RELWITHDEBINFO} /D_ITERATOR_DEBUG_LEVEL=0\")\r\n    +  # Increase heap size\r\n    +  set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} /Zm2000\")\r\n\r\nBut did not solve this problem.\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n"}
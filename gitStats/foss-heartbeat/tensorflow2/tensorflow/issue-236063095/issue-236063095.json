{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10718", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10718/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10718/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10718/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10718", "id": 236063095, "node_id": "MDU6SXNzdWUyMzYwNjMwOTU=", "number": 10718, "title": "bazel build error: no such package '@protobuf//'", "user": {"login": "huwh1", "id": 29445093, "node_id": "MDQ6VXNlcjI5NDQ1MDkz", "avatar_url": "https://avatars0.githubusercontent.com/u/29445093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huwh1", "html_url": "https://github.com/huwh1", "followers_url": "https://api.github.com/users/huwh1/followers", "following_url": "https://api.github.com/users/huwh1/following{/other_user}", "gists_url": "https://api.github.com/users/huwh1/gists{/gist_id}", "starred_url": "https://api.github.com/users/huwh1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huwh1/subscriptions", "organizations_url": "https://api.github.com/users/huwh1/orgs", "repos_url": "https://api.github.com/users/huwh1/repos", "events_url": "https://api.github.com/users/huwh1/events{/privacy}", "received_events_url": "https://api.github.com/users/huwh1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-06-15T02:53:38Z", "updated_at": "2017-09-14T09:59:08Z", "closed_at": "2017-06-16T15:58:21Z", "author_association": "NONE", "body_html": "<p>Build from master <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/0d2f6918322c7bf29d1de3075b0d4ed3b1b72919/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/0d2f6918322c7bf29d1de3075b0d4ed3b1b72919\"><tt>0d2f691</tt></a>, but encounter with the error of \"/tensorflow/tools/pip_package/BUILD:94:1: no such package '@protobuf//': Traceback (most recent call last)\". They are operated in virtualenv with bazel 0.5.1 on a centos 7.3.1611.</p>\n<p>The package can be downloaded in a browser from the url \"<a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>\". I'm in China, where it is difficult to access the google service. I have no idea about whether the network is the problem.</p>\n<p><strong>Here is the terminal log</strong> of brach version, configure and bazel build.</p>\n<p>`<br>\n(tf-source) [huwh1@huwh1-centos tensorflow]$ git branch -v</p>\n<ul>\n<li>master <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/0d2f6918322c7bf29d1de3075b0d4ed3b1b72919/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/0d2f6918322c7bf29d1de3075b0d4ed3b1b72919\"><tt>0d2f691</tt></a> [ahead 16] Create tf_env_collect.sh</li>\n</ul>\n<p>(tf-source) [huwh1@huwh1-centos tensorflow]$ ./configure<br>\nYou have bazel 0.5.1 installed.<br>\nPlease specify the location of python. [Default is /home/huwh1/virtualenv/tf-source/bin/python]:<br>\nFound possible Python library paths:<br>\n/home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages<br>\nPlease input the desired Python library path to use.  Default is [/home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages]</p>\n<p>Using python library path: /home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages<br>\nDo you wish to build TensorFlow with MKL support? [y/N]<br>\nNo MKL support will be enabled for TensorFlow<br>\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:<br>\nDo you wish to use jemalloc as the malloc implementation? [Y/n]<br>\njemalloc enabled<br>\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]<br>\nNo Google Cloud Platform support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with Hadoop File System support? [y/N]<br>\nNo Hadoop File System support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N]<br>\nNo XLA support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with VERBS support? [y/N]<br>\nNo VERBS support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with OpenCL support? [y/N]<br>\nNo OpenCL support will be enabled for TensorFlow<br>\nDo you wish to build TensorFlow with CUDA support? [y/N] y<br>\nCUDA support will be enabled for TensorFlow<br>\nDo you want to use clang as CUDA compiler? [y/N]<br>\nnvcc will be used as CUDA compiler<br>\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: 8.0<br>\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:<br>\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]:<br>\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: 5<br>\nPlease specify the location where cuDNN 5 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:<br>\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.<br>\nYou can find the compute capability of your device at: <a href=\"https://developer.nvidia.com/cuda-gpus\" rel=\"nofollow\">https://developer.nvidia.com/cuda-gpus</a>.<br>\nPlease note that each additional compute capability significantly increases your build time and binary size.<br>\n[Default is: \"3.5,5.2\"]: 3.0<br>\nDo you wish to build TensorFlow with MPI support? [y/N]<br>\nMPI support will not be enabled for TensorFlow<br>\nConfiguration finished</p>\n<p>(tf-source) [huwh1@huwh1-centos tensorflow]$ bazel clean<br>\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.<br>\n(tf-source) [huwh1@huwh1-centos tensorflow]$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package | tee<br>\n____Loading package: tensorflow/tools/pip_package<br>\n____Loading package: @bazel_tools//tools/cpp<br>\n____Loading package: tensorflow/contrib/specs<br>\n____Loading package: @zlib_archive//<br>\n____Loading package: third_party/eigen3<br>\n____Downloading <a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 87,161 bytes<br>\n____Downloading <a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 311,205 bytes<br>\n____Downloading <a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 1,475,383 bytes<br>\n____Downloading <a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 1,957,187 bytes<br>\n____Downloading <a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 4,274,206 bytes<br>\n____Downloading <a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 2,138,182 bytes<br>\n____Downloading <a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 1,875,852 bytes<br>\n____Downloading <a href=\"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\" rel=\"nofollow\">http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz</a>: 4,264,858 bytes<br>\nERROR: /home/huwh1/git/tensorflow/tensorflow/tools/pip_package/BUILD:94:1: no such package '@protobuf//': Traceback (most recent call last):<br>\nFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 122<br>\n_apply_patch(repo_ctx, repo_ctx.attr.patch_file)<br>\nFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 113, in _apply_patch<br>\n_execute_and_check_ret_code(repo_ctx, cmd)<br>\nFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 97, in _execute_and_check_ret_code<br>\nfail(\"Non-zero return code({1}) when ..., &lt;2 more arguments&gt;))<br>\nNon-zero return code(256) when executing 'patch -p1 -d /home/huwh1/.cache/bazel/_bazel_huwh1/571d325cc1cf529816d64b96c622cea4/external/protobuf -i /home/huwh1/git/tensorflow/third_party/protobuf/add_noinlines.patch':<br>\nStdout:<br>\nStderr: java.io.IOException: Cannot run program \"patch\" (in directory \"/home/huwh1/.cache/bazel/_bazel_huwh1/571d325cc1cf529816d64b96c622cea4/external/protobuf\"): error=2, No such file or directory and referenced by '//tensorflow/tools/pip_package:licenses'.<br>\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.<br>\n____Elapsed time: 3.457s<br>\n`</p>\n<p><strong>Here is the system information:</strong></p>\n<p>`== cat /etc/issue ===============================================<br>\nLinux huwh1-centos 3.10.0-514.21.1.el7.x86_64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Thu May 25 17:04:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux<br>\nVERSION=\"7 (Core)\"<br>\nVERSION_ID=\"7\"<br>\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"<br>\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"</p>\n<p>== are we in docker =============================================<br>\nNo</p>\n<p>== compiler =====================================================<br>\nc++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)<br>\nCopyright (C) 2015 Free Software Foundation, Inc.<br>\nThis is free software; see the source for copying conditions.  There is NO<br>\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n<p>== uname -a =====================================================<br>\nLinux huwh1-centos 3.10.0-514.21.1.el7.x86_64 <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> SMP Thu May 25 17:04:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>== check pips ===================================================<br>\nnumpy (1.13.0)<br>\nprotobuf (3.3.0)</p>\n<p>== check for virtualenv =========================================<br>\nTrue</p>\n<p>== tensorflow import ============================================<br>\nTraceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nFile \"tensorflow/<strong>init</strong>.py\", line 24, in <br>\nfrom tensorflow.python import *<br>\nFile \"tensorflow/python/<strong>init</strong>.py\", line 49, in <br>\nfrom tensorflow.python import pywrap_tensorflow<br>\nFile \"tensorflow/python/pywrap_tensorflow.py\", line 52, in <br>\nraise ImportError(msg)<br>\nImportError: Traceback (most recent call last):<br>\nFile \"tensorflow/python/pywrap_tensorflow.py\", line 41, in <br>\nfrom tensorflow.python.pywrap_tensorflow_internal import *<br>\nImportError: No module named pywrap_tensorflow_internal</p>\n<p>Failed to load the native TensorFlow runtime.</p>\n<p>See <a href=\"https://www.tensorflow.org/install/install_sources#common_installation_problems\" rel=\"nofollow\">https://www.tensorflow.org/install/install_sources#common_installation_problems</a></p>\n<p>for some common reasons and solutions.  Include the entire stack trace<br>\nabove this error message when asking for help.</p>\n<p>== env ==========================================================<br>\nLD_LIBRARY_PATH /opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64:/opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2017.4.196/linux/tbb/lib/intel64_lin/gcc4.7:/opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2017.4.196/linux/mkl/lib/intel64_lin:/usr/local/cuda-8.0/lib64<br>\nDYLD_LIBRARY_PATH is unset</p>\n<p>== nvidia-smi ===================================================<br>\nThu Jun 15 10:28:42 2017<br>\n+-----------------------------------------------------------------------------+<br>\n| NVIDIA-SMI 375.26                 Driver Version: 375.26                    |<br>\n|-------------------------------+----------------------+----------------------+<br>\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |<br>\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |<br>\n|===============================+======================+======================|<br>\n|   0  Quadro K420         Off  | 0000:01:00.0     Off |                  N/A |<br>\n| 25%   44C    P8    N/A /  N/A |      9MiB /  1998MiB |      0%      Default |<br>\n+-------------------------------+----------------------+----------------------+</p>\n<p>+-----------------------------------------------------------------------------+<br>\n| Processes:                                                       GPU Memory |<br>\n|  GPU       PID  Type  Process name                               Usage      |<br>\n|=============================================================================|<br>\n|    0      6899    C   /home/huwh1/virtualenv/tf-gpu/bin/python         7MiB |<br>\n+-----------------------------------------------------------------------------+</p>\n<p>== cuda libs  ===================================================<br>\n/usr/local/cuda-8.0/lib64/libcudart_static.a<br>\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.61<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7<br>\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7<br>\n`</p>", "body_text": "Build from master 0d2f691, but encounter with the error of \"/tensorflow/tools/pip_package/BUILD:94:1: no such package '@protobuf//': Traceback (most recent call last)\". They are operated in virtualenv with bazel 0.5.1 on a centos 7.3.1611.\nThe package can be downloaded in a browser from the url \"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\". I'm in China, where it is difficult to access the google service. I have no idea about whether the network is the problem.\nHere is the terminal log of brach version, configure and bazel build.\n`\n(tf-source) [huwh1@huwh1-centos tensorflow]$ git branch -v\n\nmaster 0d2f691 [ahead 16] Create tf_env_collect.sh\n\n(tf-source) [huwh1@huwh1-centos tensorflow]$ ./configure\nYou have bazel 0.5.1 installed.\nPlease specify the location of python. [Default is /home/huwh1/virtualenv/tf-source/bin/python]:\nFound possible Python library paths:\n/home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages\nPlease input the desired Python library path to use.  Default is [/home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages]\nUsing python library path: /home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages\nDo you wish to build TensorFlow with MKL support? [y/N]\nNo MKL support will be enabled for TensorFlow\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\nDo you wish to use jemalloc as the malloc implementation? [Y/n]\njemalloc enabled\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N]\nNo Google Cloud Platform support will be enabled for TensorFlow\nDo you wish to build TensorFlow with Hadoop File System support? [y/N]\nNo Hadoop File System support will be enabled for TensorFlow\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N]\nNo XLA support will be enabled for TensorFlow\nDo you wish to build TensorFlow with VERBS support? [y/N]\nNo VERBS support will be enabled for TensorFlow\nDo you wish to build TensorFlow with OpenCL support? [y/N]\nNo OpenCL support will be enabled for TensorFlow\nDo you wish to build TensorFlow with CUDA support? [y/N] y\nCUDA support will be enabled for TensorFlow\nDo you want to use clang as CUDA compiler? [y/N]\nnvcc will be used as CUDA compiler\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: 8.0\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]:\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: 5\nPlease specify the location where cuDNN 5 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\nPlease note that each additional compute capability significantly increases your build time and binary size.\n[Default is: \"3.5,5.2\"]: 3.0\nDo you wish to build TensorFlow with MPI support? [y/N]\nMPI support will not be enabled for TensorFlow\nConfiguration finished\n(tf-source) [huwh1@huwh1-centos tensorflow]$ bazel clean\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\n(tf-source) [huwh1@huwh1-centos tensorflow]$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package | tee\n____Loading package: tensorflow/tools/pip_package\n____Loading package: @bazel_tools//tools/cpp\n____Loading package: tensorflow/contrib/specs\n____Loading package: @zlib_archive//\n____Loading package: third_party/eigen3\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 87,161 bytes\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 311,205 bytes\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 1,475,383 bytes\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 1,957,187 bytes\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 4,274,206 bytes\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 2,138,182 bytes\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 1,875,852 bytes\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 4,264,858 bytes\nERROR: /home/huwh1/git/tensorflow/tensorflow/tools/pip_package/BUILD:94:1: no such package '@protobuf//': Traceback (most recent call last):\nFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 122\n_apply_patch(repo_ctx, repo_ctx.attr.patch_file)\nFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 113, in _apply_patch\n_execute_and_check_ret_code(repo_ctx, cmd)\nFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 97, in _execute_and_check_ret_code\nfail(\"Non-zero return code({1}) when ..., <2 more arguments>))\nNon-zero return code(256) when executing 'patch -p1 -d /home/huwh1/.cache/bazel/_bazel_huwh1/571d325cc1cf529816d64b96c622cea4/external/protobuf -i /home/huwh1/git/tensorflow/third_party/protobuf/add_noinlines.patch':\nStdout:\nStderr: java.io.IOException: Cannot run program \"patch\" (in directory \"/home/huwh1/.cache/bazel/_bazel_huwh1/571d325cc1cf529816d64b96c622cea4/external/protobuf\"): error=2, No such file or directory and referenced by '//tensorflow/tools/pip_package:licenses'.\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\n____Elapsed time: 3.457s\n`\nHere is the system information:\n`== cat /etc/issue ===============================================\nLinux huwh1-centos 3.10.0-514.21.1.el7.x86_64 #1 SMP Thu May 25 17:04:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\nVERSION=\"7 (Core)\"\nVERSION_ID=\"7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n== are we in docker =============================================\nNo\n== compiler =====================================================\nc++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n== uname -a =====================================================\nLinux huwh1-centos 3.10.0-514.21.1.el7.x86_64 #1 SMP Thu May 25 17:04:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n== check pips ===================================================\nnumpy (1.13.0)\nprotobuf (3.3.0)\n== check for virtualenv =========================================\nTrue\n== tensorflow import ============================================\nTraceback (most recent call last):\nFile \"\", line 1, in \nFile \"tensorflow/init.py\", line 24, in \nfrom tensorflow.python import *\nFile \"tensorflow/python/init.py\", line 49, in \nfrom tensorflow.python import pywrap_tensorflow\nFile \"tensorflow/python/pywrap_tensorflow.py\", line 52, in \nraise ImportError(msg)\nImportError: Traceback (most recent call last):\nFile \"tensorflow/python/pywrap_tensorflow.py\", line 41, in \nfrom tensorflow.python.pywrap_tensorflow_internal import *\nImportError: No module named pywrap_tensorflow_internal\nFailed to load the native TensorFlow runtime.\nSee https://www.tensorflow.org/install/install_sources#common_installation_problems\nfor some common reasons and solutions.  Include the entire stack trace\nabove this error message when asking for help.\n== env ==========================================================\nLD_LIBRARY_PATH /opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64:/opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2017.4.196/linux/tbb/lib/intel64_lin/gcc4.7:/opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2017.4.196/linux/mkl/lib/intel64_lin:/usr/local/cuda-8.0/lib64\nDYLD_LIBRARY_PATH is unset\n== nvidia-smi ===================================================\nThu Jun 15 10:28:42 2017\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 375.26                 Driver Version: 375.26                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Quadro K420         Off  | 0000:01:00.0     Off |                  N/A |\n| 25%   44C    P8    N/A /  N/A |      9MiB /  1998MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID  Type  Process name                               Usage      |\n|=============================================================================|\n|    0      6899    C   /home/huwh1/virtualenv/tf-gpu/bin/python         7MiB |\n+-----------------------------------------------------------------------------+\n== cuda libs  ===================================================\n/usr/local/cuda-8.0/lib64/libcudart_static.a\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.61\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\n`", "body": "Build from master 0d2f691, but encounter with the error of \"/tensorflow/tools/pip_package/BUILD:94:1: no such package '@protobuf//': Traceback (most recent call last)\". They are operated in virtualenv with bazel 0.5.1 on a centos 7.3.1611. \r\n\r\nThe package can be downloaded in a browser from the url \"http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz\". I'm in China, where it is difficult to access the google service. I have no idea about whether the network is the problem.\r\n\r\n**Here is the terminal log** of brach version, configure and bazel build.\r\n\r\n`\r\n(tf-source) [huwh1@huwh1-centos tensorflow]$ git branch -v\r\n* master 0d2f691 [ahead 16] Create tf_env_collect.sh\r\n\r\n(tf-source) [huwh1@huwh1-centos tensorflow]$ ./configure \r\nYou have bazel 0.5.1 installed.\r\nPlease specify the location of python. [Default is /home/huwh1/virtualenv/tf-source/bin/python]: \r\nFound possible Python library paths:\r\n  /home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages\r\nPlease input the desired Python library path to use.  Default is [/home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages]\r\n\r\nUsing python library path: /home/huwh1/virtualenv/tf-source/lib/python2.7/site-packages\r\nDo you wish to build TensorFlow with MKL support? [y/N] \r\nNo MKL support will be enabled for TensorFlow\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\nDo you wish to use jemalloc as the malloc implementation? [Y/n] \r\njemalloc enabled\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [y/N] \r\nNo Google Cloud Platform support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with Hadoop File System support? [y/N] \r\nNo Hadoop File System support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with the XLA just-in-time compiler (experimental)? [y/N] \r\nNo XLA support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with VERBS support? [y/N] \r\nNo VERBS support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with OpenCL support? [y/N] \r\nNo OpenCL support will be enabled for TensorFlow\r\nDo you wish to build TensorFlow with CUDA support? [y/N] y\r\nCUDA support will be enabled for TensorFlow\r\nDo you want to use clang as CUDA compiler? [y/N] \r\nnvcc will be used as CUDA compiler\r\nPlease specify the CUDA SDK version you want to use, e.g. 7.0. [Leave empty to default to CUDA 8.0]: 8.0\r\nPlease specify the location where CUDA 8.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: \r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 6.0]: 5\r\nPlease specify the location where cuDNN 5 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size.\r\n[Default is: \"3.5,5.2\"]: 3.0\r\nDo you wish to build TensorFlow with MPI support? [y/N] \r\nMPI support will not be enabled for TensorFlow\r\nConfiguration finished\r\n\r\n(tf-source) [huwh1@huwh1-centos tensorflow]$ bazel clean\r\nINFO: Starting clean (this may take a while). Consider using --async if the clean takes more than several minutes.\r\n(tf-source) [huwh1@huwh1-centos tensorflow]$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package | tee\r\n____Loading package: tensorflow/tools/pip_package\r\n____Loading package: @bazel_tools//tools/cpp\r\n____Loading package: tensorflow/contrib/specs\r\n____Loading package: @zlib_archive//\r\n____Loading package: third_party/eigen3\r\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 87,161 bytes\r\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 311,205 bytes\r\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 1,475,383 bytes\r\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 1,957,187 bytes\r\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 4,274,206 bytes\r\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 2,138,182 bytes\r\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 1,875,852 bytes\r\n____Downloading http://mirror.bazel.build/github.com/google/protobuf/archive/2b7430d96aeff2bb624c8d52182ff5e4b9f7f18a.tar.gz: 4,264,858 bytes\r\nERROR: /home/huwh1/git/tensorflow/tensorflow/tools/pip_package/BUILD:94:1: no such package '@protobuf//': Traceback (most recent call last):\r\n\tFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 122\r\n\t\t_apply_patch(repo_ctx, repo_ctx.attr.patch_file)\r\n\tFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 113, in _apply_patch\r\n\t\t_execute_and_check_ret_code(repo_ctx, cmd)\r\n\tFile \"/home/huwh1/git/tensorflow/tensorflow/workspace.bzl\", line 97, in _execute_and_check_ret_code\r\n\t\tfail(\"Non-zero return code({1}) when ..., <2 more arguments>))\r\nNon-zero return code(256) when executing 'patch -p1 -d /home/huwh1/.cache/bazel/_bazel_huwh1/571d325cc1cf529816d64b96c622cea4/external/protobuf -i /home/huwh1/git/tensorflow/third_party/protobuf/add_noinlines.patch':\r\nStdout: \r\nStderr: java.io.IOException: Cannot run program \"patch\" (in directory \"/home/huwh1/.cache/bazel/_bazel_huwh1/571d325cc1cf529816d64b96c622cea4/external/protobuf\"): error=2, No such file or directory and referenced by '//tensorflow/tools/pip_package:licenses'.\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted.\r\n____Elapsed time: 3.457s\r\n`\r\n\r\n**Here is the system information:**\r\n\r\n`== cat /etc/issue ===============================================\r\nLinux huwh1-centos 3.10.0-514.21.1.el7.x86_64 #1 SMP Thu May 25 17:04:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"7 (Core)\"\r\nVERSION_ID=\"7\"\r\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\r\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== uname -a =====================================================\r\nLinux huwh1-centos 3.10.0-514.21.1.el7.x86_64 #1 SMP Thu May 25 17:04:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n== check pips ===================================================\r\nnumpy (1.13.0)\r\nprotobuf (3.3.0)\r\n\r\n== check for virtualenv =========================================\r\nTrue\r\n\r\n== tensorflow import ============================================\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"tensorflow/__init__.py\", line 24, in <module>\r\n    from tensorflow.python import *\r\n  File \"tensorflow/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"tensorflow/python/pywrap_tensorflow.py\", line 52, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"tensorflow/python/pywrap_tensorflow.py\", line 41, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\nImportError: No module named pywrap_tensorflow_internal\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/install_sources#common_installation_problems\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH /opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64:/opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2017.4.196/linux/tbb/lib/intel64_lin/gcc4.7:/opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2017.4.196/linux/mkl/lib/intel64_lin:/usr/local/cuda-8.0/lib64\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\nThu Jun 15 10:28:42 2017       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 375.26                 Driver Version: 375.26                    |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Quadro K420         Off  | 0000:01:00.0     Off |                  N/A |\r\n| 25%   44C    P8    N/A /  N/A |      9MiB /  1998MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID  Type  Process name                               Usage      |\r\n|=============================================================================|\r\n|    0      6899    C   /home/huwh1/virtualenv/tf-gpu/bin/python         7MiB |\r\n+-----------------------------------------------------------------------------+\r\n\r\n== cuda libs  ===================================================\r\n/usr/local/cuda-8.0/lib64/libcudart_static.a\r\n/usr/local/cuda-8.0/lib64/libcudart.so.8.0.61\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.so.7\r\n/usr/local/cuda-8.0/doc/man/man7/libcudart.7\r\n`\r\n"}
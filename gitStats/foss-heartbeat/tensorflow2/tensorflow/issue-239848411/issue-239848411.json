{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11187", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11187/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11187/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/11187/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/11187", "id": 239848411, "node_id": "MDU6SXNzdWUyMzk4NDg0MTE=", "number": 11187, "title": "TF Slim - allow soft placement for devices with train_image_classifier", "user": {"login": "vade", "id": 65011, "node_id": "MDQ6VXNlcjY1MDEx", "avatar_url": "https://avatars1.githubusercontent.com/u/65011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vade", "html_url": "https://github.com/vade", "followers_url": "https://api.github.com/users/vade/followers", "following_url": "https://api.github.com/users/vade/following{/other_user}", "gists_url": "https://api.github.com/users/vade/gists{/gist_id}", "starred_url": "https://api.github.com/users/vade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vade/subscriptions", "organizations_url": "https://api.github.com/users/vade/orgs", "repos_url": "https://api.github.com/users/vade/repos", "events_url": "https://api.github.com/users/vade/events{/privacy}", "received_events_url": "https://api.github.com/users/vade/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-06-30T17:57:01Z", "updated_at": "2018-03-27T20:09:42Z", "closed_at": "2018-02-04T05:29:12Z", "author_association": "CONTRIBUTOR", "body_html": "<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: No</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: macOS 10.12.5</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>:source</li>\n<li><strong>TensorFlow version (use command below)</strong>: git tag 1.2</li>\n<li><strong>Python version</strong>: 2.7 system install</li>\n<li><strong>Bazel version (if compiling from source)</strong>: home-brew 0.4.5</li>\n<li><strong>CUDA/cuDNN version</strong>: NA</li>\n<li><strong>GPU model and memory</strong>:  NA</li>\n<li><strong>Exact command to reproduce</strong>:</li>\n</ul>\n<p>train Mobilenet_v1 on CPU like so:</p>\n<p>python train_image_classifier.py     --train_dir=${TRAIN_DIR}     --dataset_dir=${DATASET_DIR}     --dataset_name=Framing     --dataset_split_name=train     --model_name=mobilenet_v1     --checkpoint_path=${CHECKPOINT_PATH}     --checkpoint_exclude_scopes=MobilenetV1/Logits/Conv2d_1c_1x1/biases,MobilenetV1/Logits/Conv2d_1c_1x1/weights</p>\n<h3>Describe the problem</h3>\n<p>Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.</p>\n<p>Tensorflow 1.2 has no GPU support for macOS. Thus training/retraining can only happen on CPU.<br>\nTF Slim doesnt appear to have an out of the box way to specify soft placement of nodes - therefore I can't appear to train a mobile net checkpoint?</p>\n<h3>Source code / logs</h3>\n<p>Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.</p>\n<p><code>INFO:tensorflow:Summary name /clone_loss is illegal; using clone_loss instead. INFO:tensorflow:Fine-tuning from /Volumes/MediaArchive/datasets/SynopsisCinemaNet/model/mobilenet_v1_1.0_224_2017_06_14/mobilenet_v1_1.0_224.ckpt.index INFO:tensorflow:Error reported to Coordinator: &lt;class 'tensorflow.python.framework.errors_impl.InvalidArgumentError'&gt;, Cannot assign a device for operation 'MobilenetV1/Logits/Conv2d_1c_1x1/biases/RMSProp_1': Operation was explicitly assigned to /device:GPU:0 but available devices are [ /job:localhost/replica:0/task:0/cpu:0 ]. Make sure the device specification refers to a valid device. [[Node: MobilenetV1/Logits/Conv2d_1c_1x1/biases/RMSProp_1 = VariableV2[_class=[\"loc:@MobilenetV1/Logits/Conv2d_1c_1x1/biases\"], container=\"\", dtype=DT_FLOAT, shape=[5], shared_name=\"\", _device=\"/device:GPU:0\"]()]] </code></p>", "body_text": "System information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.12.5\nTensorFlow installed from (source or binary):source\nTensorFlow version (use command below): git tag 1.2\nPython version: 2.7 system install\nBazel version (if compiling from source): home-brew 0.4.5\nCUDA/cuDNN version: NA\nGPU model and memory:  NA\nExact command to reproduce:\n\ntrain Mobilenet_v1 on CPU like so:\npython train_image_classifier.py     --train_dir=${TRAIN_DIR}     --dataset_dir=${DATASET_DIR}     --dataset_name=Framing     --dataset_split_name=train     --model_name=mobilenet_v1     --checkpoint_path=${CHECKPOINT_PATH}     --checkpoint_exclude_scopes=MobilenetV1/Logits/Conv2d_1c_1x1/biases,MobilenetV1/Logits/Conv2d_1c_1x1/weights\nDescribe the problem\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\nTensorflow 1.2 has no GPU support for macOS. Thus training/retraining can only happen on CPU.\nTF Slim doesnt appear to have an out of the box way to specify soft placement of nodes - therefore I can't appear to train a mobile net checkpoint?\nSource code / logs\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\nINFO:tensorflow:Summary name /clone_loss is illegal; using clone_loss instead. INFO:tensorflow:Fine-tuning from /Volumes/MediaArchive/datasets/SynopsisCinemaNet/model/mobilenet_v1_1.0_224_2017_06_14/mobilenet_v1_1.0_224.ckpt.index INFO:tensorflow:Error reported to Coordinator: <class 'tensorflow.python.framework.errors_impl.InvalidArgumentError'>, Cannot assign a device for operation 'MobilenetV1/Logits/Conv2d_1c_1x1/biases/RMSProp_1': Operation was explicitly assigned to /device:GPU:0 but available devices are [ /job:localhost/replica:0/task:0/cpu:0 ]. Make sure the device specification refers to a valid device. [[Node: MobilenetV1/Logits/Conv2d_1c_1x1/biases/RMSProp_1 = VariableV2[_class=[\"loc:@MobilenetV1/Logits/Conv2d_1c_1x1/biases\"], container=\"\", dtype=DT_FLOAT, shape=[5], shared_name=\"\", _device=\"/device:GPU:0\"]()]]", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: macOS 10.12.5\r\n- **TensorFlow installed from (source or binary)**:source\r\n- **TensorFlow version (use command below)**: git tag 1.2\r\n- **Python version**: 2.7 system install\r\n- **Bazel version (if compiling from source)**: home-brew 0.4.5\r\n- **CUDA/cuDNN version**: NA\r\n- **GPU model and memory**:  NA\r\n- **Exact command to reproduce**: \r\n\r\ntrain Mobilenet_v1 on CPU like so:\r\n\r\n python train_image_classifier.py     --train_dir=${TRAIN_DIR}     --dataset_dir=${DATASET_DIR}     --dataset_name=Framing     --dataset_split_name=train     --model_name=mobilenet_v1     --checkpoint_path=${CHECKPOINT_PATH}     --checkpoint_exclude_scopes=MobilenetV1/Logits/Conv2d_1c_1x1/biases,MobilenetV1/Logits/Conv2d_1c_1x1/weights \r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nTensorflow 1.2 has no GPU support for macOS. Thus training/retraining can only happen on CPU.\r\nTF Slim doesnt appear to have an out of the box way to specify soft placement of nodes - therefore I can't appear to train a mobile net checkpoint?\r\n\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n\r\n`INFO:tensorflow:Summary name /clone_loss is illegal; using clone_loss instead.\r\nINFO:tensorflow:Fine-tuning from /Volumes/MediaArchive/datasets/SynopsisCinemaNet/model/mobilenet_v1_1.0_224_2017_06_14/mobilenet_v1_1.0_224.ckpt.index\r\nINFO:tensorflow:Error reported to Coordinator: <class 'tensorflow.python.framework.errors_impl.InvalidArgumentError'>, Cannot assign a device for operation 'MobilenetV1/Logits/Conv2d_1c_1x1/biases/RMSProp_1': Operation was explicitly assigned to /device:GPU:0 but available devices are [ /job:localhost/replica:0/task:0/cpu:0 ]. Make sure the device specification refers to a valid device.\r\n\t [[Node: MobilenetV1/Logits/Conv2d_1c_1x1/biases/RMSProp_1 = VariableV2[_class=[\"loc:@MobilenetV1/Logits/Conv2d_1c_1x1/biases\"], container=\"\", dtype=DT_FLOAT, shape=[5], shared_name=\"\", _device=\"/device:GPU:0\"]()]]\r\n`"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16427", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16427/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16427/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/16427/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/16427", "id": 291774791, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY1MjcyNjIy", "number": 16427, "title": "Fix build errors in contrib/mpi introduced by commit 6042b5d267f", "user": {"login": "klshrinidhi", "id": 1181669, "node_id": "MDQ6VXNlcjExODE2Njk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1181669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klshrinidhi", "html_url": "https://github.com/klshrinidhi", "followers_url": "https://api.github.com/users/klshrinidhi/followers", "following_url": "https://api.github.com/users/klshrinidhi/following{/other_user}", "gists_url": "https://api.github.com/users/klshrinidhi/gists{/gist_id}", "starred_url": "https://api.github.com/users/klshrinidhi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klshrinidhi/subscriptions", "organizations_url": "https://api.github.com/users/klshrinidhi/orgs", "repos_url": "https://api.github.com/users/klshrinidhi/repos", "events_url": "https://api.github.com/users/klshrinidhi/events{/privacy}", "received_events_url": "https://api.github.com/users/klshrinidhi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-01-26T01:43:01Z", "updated_at": "2018-01-26T19:28:34Z", "closed_at": "2018-01-26T19:28:34Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/16427", "html_url": "https://github.com/tensorflow/tensorflow/pull/16427", "diff_url": "https://github.com/tensorflow/tensorflow/pull/16427.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/16427.patch"}, "body_html": "<p>The commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/tensorflow/tensorflow/commit/6042b5d267f42d004087b44c29525951700579f9#diff-7c00d4a3caee74eedf5bb638bce23e5a/hovercard\" href=\"https://github.com/tensorflow/tensorflow/commit/6042b5d267f42d004087b44c29525951700579f9#diff-7c00d4a3caee74eedf5bb638bce23e5a\"><tt>6042b5d</tt>#diff-7c00d4a3caee74eedf5bb638bce23e5a</a></p>\n<ul>\n<li>Introduced code to <code>tensorflow/contrib/mpi/mpi_rendezvous_mgr.h</code> to use the type <code>RecentRequestIds</code> without including the header <code>tensorflow/core/distributed_runtime/recent_request_ids.h</code>.</li>\n</ul>\n<pre><code>ERROR: /opt/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)\nIn file included from tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:0:\n./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:182:3: error: 'RecentRequestIds' does not name a type\n   RecentRequestIds recv_tensor_recent_request_ids_;\n   ^\n</code></pre>\n<ul>\n<li>Probably a typo in <code>tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc : MPIRendezvousMgr::AddRequest()</code>. The variable <code>req</code> was probably meant to be <code>request</code> as per the commit message.</li>\n</ul>\n<pre><code>ERROR: /opt/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)\nIn file included from ./tensorflow/core/framework/variant.h:29:0,\n                 from ./tensorflow/core/framework/allocator.h:26,\n                 from ./tensorflow/core/framework/tensor.h:20,\n                 from ./tensorflow/core/framework/device_base.h:23,\n                 from ./tensorflow/core/framework/rendezvous.h:22,\n                 from ./tensorflow/core/distributed_runtime/rendezvous_mgr_interface.h:22,\n                 from ./tensorflow/core/distributed_runtime/base_rendezvous_mgr.h:22,\n                 from ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:35,\n                 from tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:\ntensorflow/contrib/mpi/mpi_rendezvous_mgr.cc: In member function 'void tensorflow::MPIRendezvousMgr::AddRequest(tensorflow::RecvTensorRequest, int)':\ntensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:155:7: error: 'req' was not declared in this scope\n       req.request_id(), \"RecvTensor (MPIRendezvousMgr)\", req));\n       ^\n</code></pre>\n<p>I compiled with following commands:</p>\n<pre><code>echo \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" &gt; /etc/apt/sources.list.d/bazel.list\ncurl https://bazel.build/bazel-release.pub.gpg | apt-key add -\ngit clone https://github.com/tensorflow/tensorflow .\nexport PYTHON_BIN_PATH=/path/to/python ## python 2.7.14\nexport USE_DEFAULT_PYTHON_LIB_PATH=1\nexport TF_NEED_JEMALLOC=1\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=1\nexport TF_ENABLE_XLA=1\nexport TF_NEED_OPENCL=0\nexport TF_NEED_S3=0\nexport TF_NEED_GDR=0\nexport TF_NEED_VERBS=0\nexport TF_NEED_OPENCL_SYCL=0\nexport TF_NEED_CUDA=1\nexport TF_CUDA_VERSION=8.0\nexport CUDA_TOOLKIT_PATH=/path/to/cuda\nexport TF_CUDNN_VERSION=7\nexport CUDNN_INSTALL_PATH=/path/to/cudnn\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2,6.0,6.1\"\nexport TF_CUDA_CLANG=0\nexport GCC_HOST_COMPILER_PATH=/path/to/gcc\nexport TF_NEED_MPI=1\nexport MPI_HOME=/path/to/openmpi\nexport CC_OPT_FLAGS=\"-march=native\"\nexport TF_SET_ANDROID_WORKSPACE=0\n./configure\nbazel build --config=mkl --config=opt --config=cuda \\\n          //tensorflow/tools/pip_package:build_pip_package &amp;&amp; \\\nbazel-bin/tensorflow/tools/pip_package/build_pip_package ./tensorflow_pkg\npip install -v ./tensorflow_pkg/tensorflow-*.whl\n</code></pre>", "body_text": "The commit 6042b5d#diff-7c00d4a3caee74eedf5bb638bce23e5a\n\nIntroduced code to tensorflow/contrib/mpi/mpi_rendezvous_mgr.h to use the type RecentRequestIds without including the header tensorflow/core/distributed_runtime/recent_request_ids.h.\n\nERROR: /opt/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)\nIn file included from tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:0:\n./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:182:3: error: 'RecentRequestIds' does not name a type\n   RecentRequestIds recv_tensor_recent_request_ids_;\n   ^\n\n\nProbably a typo in tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc : MPIRendezvousMgr::AddRequest(). The variable req was probably meant to be request as per the commit message.\n\nERROR: /opt/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)\nIn file included from ./tensorflow/core/framework/variant.h:29:0,\n                 from ./tensorflow/core/framework/allocator.h:26,\n                 from ./tensorflow/core/framework/tensor.h:20,\n                 from ./tensorflow/core/framework/device_base.h:23,\n                 from ./tensorflow/core/framework/rendezvous.h:22,\n                 from ./tensorflow/core/distributed_runtime/rendezvous_mgr_interface.h:22,\n                 from ./tensorflow/core/distributed_runtime/base_rendezvous_mgr.h:22,\n                 from ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:35,\n                 from tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:\ntensorflow/contrib/mpi/mpi_rendezvous_mgr.cc: In member function 'void tensorflow::MPIRendezvousMgr::AddRequest(tensorflow::RecvTensorRequest, int)':\ntensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:155:7: error: 'req' was not declared in this scope\n       req.request_id(), \"RecvTensor (MPIRendezvousMgr)\", req));\n       ^\n\nI compiled with following commands:\necho \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" > /etc/apt/sources.list.d/bazel.list\ncurl https://bazel.build/bazel-release.pub.gpg | apt-key add -\ngit clone https://github.com/tensorflow/tensorflow .\nexport PYTHON_BIN_PATH=/path/to/python ## python 2.7.14\nexport USE_DEFAULT_PYTHON_LIB_PATH=1\nexport TF_NEED_JEMALLOC=1\nexport TF_NEED_GCP=0\nexport TF_NEED_HDFS=1\nexport TF_ENABLE_XLA=1\nexport TF_NEED_OPENCL=0\nexport TF_NEED_S3=0\nexport TF_NEED_GDR=0\nexport TF_NEED_VERBS=0\nexport TF_NEED_OPENCL_SYCL=0\nexport TF_NEED_CUDA=1\nexport TF_CUDA_VERSION=8.0\nexport CUDA_TOOLKIT_PATH=/path/to/cuda\nexport TF_CUDNN_VERSION=7\nexport CUDNN_INSTALL_PATH=/path/to/cudnn\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2,6.0,6.1\"\nexport TF_CUDA_CLANG=0\nexport GCC_HOST_COMPILER_PATH=/path/to/gcc\nexport TF_NEED_MPI=1\nexport MPI_HOME=/path/to/openmpi\nexport CC_OPT_FLAGS=\"-march=native\"\nexport TF_SET_ANDROID_WORKSPACE=0\n./configure\nbazel build --config=mkl --config=opt --config=cuda \\\n          //tensorflow/tools/pip_package:build_pip_package && \\\nbazel-bin/tensorflow/tools/pip_package/build_pip_package ./tensorflow_pkg\npip install -v ./tensorflow_pkg/tensorflow-*.whl", "body": "The commit https://github.com/tensorflow/tensorflow/commit/6042b5d267f42d004087b44c29525951700579f9#diff-7c00d4a3caee74eedf5bb638bce23e5a \r\n* Introduced code to `tensorflow/contrib/mpi/mpi_rendezvous_mgr.h` to use the type `RecentRequestIds` without including the header `tensorflow/core/distributed_runtime/recent_request_ids.h`.\r\n```\r\nERROR: /opt/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)\r\nIn file included from tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:0:\r\n./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:182:3: error: 'RecentRequestIds' does not name a type\r\n   RecentRequestIds recv_tensor_recent_request_ids_;\r\n   ^\r\n```\r\n* Probably a typo in `tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc : MPIRendezvousMgr::AddRequest()`. The variable `req` was probably meant to be `request` as per the commit message.\r\n```\r\nERROR: /opt/tensorflow/tensorflow/contrib/mpi/BUILD:60:1: C++ compilation of rule '//tensorflow/contrib/mpi:mpi_rendezvous_mgr' failed (Exit 1)\r\nIn file included from ./tensorflow/core/framework/variant.h:29:0,\r\n                 from ./tensorflow/core/framework/allocator.h:26,\r\n                 from ./tensorflow/core/framework/tensor.h:20,\r\n                 from ./tensorflow/core/framework/device_base.h:23,\r\n                 from ./tensorflow/core/framework/rendezvous.h:22,\r\n                 from ./tensorflow/core/distributed_runtime/rendezvous_mgr_interface.h:22,\r\n                 from ./tensorflow/core/distributed_runtime/base_rendezvous_mgr.h:22,\r\n                 from ./tensorflow/contrib/mpi/mpi_rendezvous_mgr.h:35,\r\n                 from tensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:18:\r\ntensorflow/contrib/mpi/mpi_rendezvous_mgr.cc: In member function 'void tensorflow::MPIRendezvousMgr::AddRequest(tensorflow::RecvTensorRequest, int)':\r\ntensorflow/contrib/mpi/mpi_rendezvous_mgr.cc:155:7: error: 'req' was not declared in this scope\r\n       req.request_id(), \"RecvTensor (MPIRendezvousMgr)\", req));\r\n       ^\r\n```\r\n\r\nI compiled with following commands:\r\n```\r\necho \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" > /etc/apt/sources.list.d/bazel.list\r\ncurl https://bazel.build/bazel-release.pub.gpg | apt-key add -\r\ngit clone https://github.com/tensorflow/tensorflow .\r\nexport PYTHON_BIN_PATH=/path/to/python ## python 2.7.14\r\nexport USE_DEFAULT_PYTHON_LIB_PATH=1\r\nexport TF_NEED_JEMALLOC=1\r\nexport TF_NEED_GCP=0\r\nexport TF_NEED_HDFS=1\r\nexport TF_ENABLE_XLA=1\r\nexport TF_NEED_OPENCL=0\r\nexport TF_NEED_S3=0\r\nexport TF_NEED_GDR=0\r\nexport TF_NEED_VERBS=0\r\nexport TF_NEED_OPENCL_SYCL=0\r\nexport TF_NEED_CUDA=1\r\nexport TF_CUDA_VERSION=8.0\r\nexport CUDA_TOOLKIT_PATH=/path/to/cuda\r\nexport TF_CUDNN_VERSION=7\r\nexport CUDNN_INSTALL_PATH=/path/to/cudnn\r\nexport TF_CUDA_COMPUTE_CAPABILITIES=\"3.5,5.2,6.0,6.1\"\r\nexport TF_CUDA_CLANG=0\r\nexport GCC_HOST_COMPILER_PATH=/path/to/gcc\r\nexport TF_NEED_MPI=1\r\nexport MPI_HOME=/path/to/openmpi\r\nexport CC_OPT_FLAGS=\"-march=native\"\r\nexport TF_SET_ANDROID_WORKSPACE=0\r\n./configure\r\nbazel build --config=mkl --config=opt --config=cuda \\\r\n          //tensorflow/tools/pip_package:build_pip_package && \\\r\nbazel-bin/tensorflow/tools/pip_package/build_pip_package ./tensorflow_pkg\r\npip install -v ./tensorflow_pkg/tensorflow-*.whl\r\n```"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/226305796", "html_url": "https://github.com/tensorflow/tensorflow/issues/2788#issuecomment-226305796", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/2788", "id": 226305796, "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjMwNTc5Ng==", "user": {"login": "alexatknit", "id": 15474222, "node_id": "MDQ6VXNlcjE1NDc0MjIy", "avatar_url": "https://avatars2.githubusercontent.com/u/15474222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexatknit", "html_url": "https://github.com/alexatknit", "followers_url": "https://api.github.com/users/alexatknit/followers", "following_url": "https://api.github.com/users/alexatknit/following{/other_user}", "gists_url": "https://api.github.com/users/alexatknit/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexatknit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexatknit/subscriptions", "organizations_url": "https://api.github.com/users/alexatknit/orgs", "repos_url": "https://api.github.com/users/alexatknit/repos", "events_url": "https://api.github.com/users/alexatknit/events{/privacy}", "received_events_url": "https://api.github.com/users/alexatknit/received_events", "type": "User", "site_admin": false}, "created_at": "2016-06-15T20:13:06Z", "updated_at": "2016-06-15T20:13:06Z", "author_association": "NONE", "body_html": "<p>I commented out the code that deploys the variables to the cpu and these are the new stacks (most are duplicates):</p>\n<pre><code>(gdb) thread apply all bt 20\n...\nThread 28 (Thread 0x7f7eab7fe700 (LWP 32080)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf4da in __GI___pthread_mutex_lock (mutex=0x28f0470) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007f7f02b7c477 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#4  0x00007f7f02e82c9d in cuEventRecord () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#5  0x00007f7f11defcc7 in perftools::gputools::cuda::CUDADriver::RecordEvent(perftools::gputools::cuda::CudaContext*, CUevent_st*, CUstream_st*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11e01c1d in perftools::gputools::cuda::CUDAExecutor::CreateStreamDependency(perftools::gputools::Stream*, perftools::gputools::Stream*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11da71d6 in perftools::gputools::Stream::ThenWaitFor(perftools::gputools::Stream*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#8  0x00007f7f11c923c4 in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&amp;, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11d4c18e in std::_Function_handler&lt;void (tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, std::function&lt;void (tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool)&gt;)::{lambda(tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool)#1}&gt;::_M_invoke(std::_Any_data const&amp;, tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11e58284 in tensorflow::LocalRendezvousImpl::Send(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11d4a75b in tensorflow::IntraProcessRendezvous::Send(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11d90e25 in tensorflow::SendOp::Compute(tensorflow::OpKernelContext*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f11d343e2 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#17 0x00007f7f11d28f70 in std::_Function_handler&lt;void (), std::_Bind&lt;std::_Mem_fn&lt;void (tensorflow::(anonymous namespace)::ExecutorState::*)(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)&gt; (tensorflow::(anonymous namespace)::ExecutorState*, tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)&gt; &gt;::_M_invoke(std::_Any_data const&amp;) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#18 0x00007f7f11f362e8 in Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WorkerLoop(unsigned int) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#19 0x00007f7f11f35f52 in std::_Function_handler&lt;void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function&lt;void ()&gt;)::{lambda()#1}&gt;::_M_invoke(std::_Any_data const&amp;) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n(More stack frames follow...)\n...\nThread 26 (Thread 0x7f7eaa7fc700 (LWP 32082)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf657 in _L_lock_909 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf480 in __GI___pthread_mutex_lock (mutex=0x2cc1da0) at ../nptl/pthread_mutex_lock.c:79\n#3  0x00007f7f11c92575 in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#4  0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#5  0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&amp;, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11d4c18e in std::_Function_handler&lt;void (tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, std::function&lt;void (tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool)&gt;)::{lambda(tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool)#1}&gt;::_M_invoke(std::_Any_data const&amp;, tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#8  0x00007f7f11e588ca in tensorflow::LocalRendezvousImpl::RecvAsync(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, std::function&lt;void (tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool)&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11d4b170 in tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, std::function&lt;void (tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool)&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d90c0e in tensorflow::RecvOp::ComputeAsync(tensorflow::OpKernelContext*, std::function&lt;void ()&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11c8928a in tensorflow::BaseGPUDevice::ComputeAsync(tensorflow::AsyncOpKernel*, tensorflow::OpKernelContext*, std::function&lt;void ()&gt;) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11d34b15 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11d28f70 in std::_Function_handler&lt;void (), std::_Bind&lt;std::_Mem_fn&lt;void (tensorflow::(anonymous namespace)::ExecutorState::*)(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)&gt; (tensorflow::(anonymous namespace)::ExecutorState*, tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)&gt; &gt;::_M_invoke(std::_Any_data const&amp;) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11f362e8 in Eigen::NonBlockingThreadPoolTempl&lt;tensorflow::thread::EigenEnvironment&gt;::WorkerLoop(unsigned int) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11f35f52 in std::_Function_handler&lt;void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function&lt;void ()&gt;)::{lambda()#1}&gt;::_M_invoke(std::_Any_data const&amp;) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f10165a60 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#17 0x00007f7f1dcdd182 in start_thread (arg=0x7f7eaa7fc700) at pthread_create.c:312\n#18 0x00007f7f1da0a47d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n...\nThread 23 (Thread 0x7f7ea8ff9700 (LWP 32085)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf4da in __GI___pthread_mutex_lock (mutex=0x28f0470) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007f7f02b7c477 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#4  0x00007f7f02e82c9d in cuEventRecord () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#5  0x00007f7f11defcc7 in perftools::gputools::cuda::CUDADriver::RecordEvent(perftools::gputools::cuda::CudaContext*, CUevent_st*, CUstream_st*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11dfcef2 in perftools::gputools::cuda::CUDAEvent::Record(perftools::gputools::cuda::CUDAStream*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11dfff75 in perftools::gputools::cuda::CUDAExecutor::RecordEvent(perftools::gputools::Stream*, perftools::gputools::Event*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#8  0x00007f7f11da7609 in perftools::gputools::StreamExecutor::RecordEvent(perftools::gputools::Stream*, perftools::gputools::Event*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11da380d in perftools::gputools::Stream::ThenRecordEvent(perftools::gputools::Event*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d92dc0 in tensorflow::EventMgr::QueueInUse(perftools::gputools::Stream*, tensorflow::EventMgr::InUse) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11c9266c in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&amp;, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, tensorflow::Tensor*, std::function&lt;void (tensorflow::Status const&amp;)&gt;) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11d4c18e in std::_Function_handler&lt;void (tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, std::function&lt;void (tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool)&gt;)::{lambda(tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool)#1}&gt;::_M_invoke(std::_Any_data const&amp;, tensorflow::Status const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f11e58284 in tensorflow::LocalRendezvousImpl::Send(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#17 0x00007f7f11d4a75b in tensorflow::IntraProcessRendezvous::Send(std::string const&amp;, tensorflow::Rendezvous::Args const&amp;, tensorflow::Tensor const&amp;, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#18 0x00007f7f11d90e25 in tensorflow::SendOp::Compute(tensorflow::OpKernelContext*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#19 0x00007f7f11d343e2 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n(More stack frames follow...)\n...\n</code></pre>", "body_text": "I commented out the code that deploys the variables to the cpu and these are the new stacks (most are duplicates):\n(gdb) thread apply all bt 20\n...\nThread 28 (Thread 0x7f7eab7fe700 (LWP 32080)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf4da in __GI___pthread_mutex_lock (mutex=0x28f0470) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007f7f02b7c477 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#4  0x00007f7f02e82c9d in cuEventRecord () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#5  0x00007f7f11defcc7 in perftools::gputools::cuda::CUDADriver::RecordEvent(perftools::gputools::cuda::CudaContext*, CUevent_st*, CUstream_st*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11e01c1d in perftools::gputools::cuda::CUDAExecutor::CreateStreamDependency(perftools::gputools::Stream*, perftools::gputools::Stream*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11da71d6 in perftools::gputools::Stream::ThenWaitFor(perftools::gputools::Stream*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n---Type <return> to continue, or q <return> to quit---\n#8  0x00007f7f11c923c4 in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11d4c18e in std::_Function_handler<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>)::{lambda(tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)#1}>::_M_invoke(std::_Any_data const&, tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11e58284 in tensorflow::LocalRendezvousImpl::Send(std::string const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11d4a75b in tensorflow::IntraProcessRendezvous::Send(std::string const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11d90e25 in tensorflow::SendOp::Compute(tensorflow::OpKernelContext*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f11d343e2 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#17 0x00007f7f11d28f70 in std::_Function_handler<void (), std::_Bind<std::_Mem_fn<void (tensorflow::(anonymous namespace)::ExecutorState::*)(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)> (tensorflow::(anonymous namespace)::ExecutorState*, tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)> >::_M_invoke(std::_Any_data const&) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#18 0x00007f7f11f362e8 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(unsigned int) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#19 0x00007f7f11f35f52 in std::_Function_handler<void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}>::_M_invoke(std::_Any_data const&) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n(More stack frames follow...)\n...\nThread 26 (Thread 0x7f7eaa7fc700 (LWP 32082)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf657 in _L_lock_909 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf480 in __GI___pthread_mutex_lock (mutex=0x2cc1da0) at ../nptl/pthread_mutex_lock.c:79\n#3  0x00007f7f11c92575 in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#4  0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#5  0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11d4c18e in std::_Function_handler<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>)::{lambda(tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)#1}>::_M_invoke(std::_Any_data const&, tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#8  0x00007f7f11e588ca in tensorflow::LocalRendezvousImpl::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11d4b170 in tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d90c0e in tensorflow::RecvOp::ComputeAsync(tensorflow::OpKernelContext*, std::function<void ()>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11c8928a in tensorflow::BaseGPUDevice::ComputeAsync(tensorflow::AsyncOpKernel*, tensorflow::OpKernelContext*, std::function<void ()>) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11d34b15 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11d28f70 in std::_Function_handler<void (), std::_Bind<std::_Mem_fn<void (tensorflow::(anonymous namespace)::ExecutorState::*)(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)> (tensorflow::(anonymous namespace)::ExecutorState*, tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)> >::_M_invoke(std::_Any_data const&) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11f362e8 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(unsigned int) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11f35f52 in std::_Function_handler<void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}>::_M_invoke(std::_Any_data const&) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f10165a60 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#17 0x00007f7f1dcdd182 in start_thread (arg=0x7f7eaa7fc700) at pthread_create.c:312\n#18 0x00007f7f1da0a47d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n...\nThread 23 (Thread 0x7f7ea8ff9700 (LWP 32085)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf4da in __GI___pthread_mutex_lock (mutex=0x28f0470) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007f7f02b7c477 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#4  0x00007f7f02e82c9d in cuEventRecord () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#5  0x00007f7f11defcc7 in perftools::gputools::cuda::CUDADriver::RecordEvent(perftools::gputools::cuda::CudaContext*, CUevent_st*, CUstream_st*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11dfcef2 in perftools::gputools::cuda::CUDAEvent::Record(perftools::gputools::cuda::CUDAStream*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11dfff75 in perftools::gputools::cuda::CUDAExecutor::RecordEvent(perftools::gputools::Stream*, perftools::gputools::Event*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#8  0x00007f7f11da7609 in perftools::gputools::StreamExecutor::RecordEvent(perftools::gputools::Stream*, perftools::gputools::Event*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11da380d in perftools::gputools::Stream::ThenRecordEvent(perftools::gputools::Event*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d92dc0 in tensorflow::EventMgr::QueueInUse(perftools::gputools::Stream*, tensorflow::EventMgr::InUse) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11c9266c in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11d4c18e in std::_Function_handler<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>)::{lambda(tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)#1}>::_M_invoke(std::_Any_data const&, tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f11e58284 in tensorflow::LocalRendezvousImpl::Send(std::string const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#17 0x00007f7f11d4a75b in tensorflow::IntraProcessRendezvous::Send(std::string const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#18 0x00007f7f11d90e25 in tensorflow::SendOp::Compute(tensorflow::OpKernelContext*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#19 0x00007f7f11d343e2 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n(More stack frames follow...)\n...", "body": "I commented out the code that deploys the variables to the cpu and these are the new stacks (most are duplicates):\n\n```\n(gdb) thread apply all bt 20\n...\nThread 28 (Thread 0x7f7eab7fe700 (LWP 32080)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf4da in __GI___pthread_mutex_lock (mutex=0x28f0470) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007f7f02b7c477 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#4  0x00007f7f02e82c9d in cuEventRecord () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#5  0x00007f7f11defcc7 in perftools::gputools::cuda::CUDADriver::RecordEvent(perftools::gputools::cuda::CudaContext*, CUevent_st*, CUstream_st*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11e01c1d in perftools::gputools::cuda::CUDAExecutor::CreateStreamDependency(perftools::gputools::Stream*, perftools::gputools::Stream*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11da71d6 in perftools::gputools::Stream::ThenWaitFor(perftools::gputools::Stream*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n---Type <return> to continue, or q <return> to quit---\n#8  0x00007f7f11c923c4 in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11d4c18e in std::_Function_handler<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>)::{lambda(tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)#1}>::_M_invoke(std::_Any_data const&, tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11e58284 in tensorflow::LocalRendezvousImpl::Send(std::string const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11d4a75b in tensorflow::IntraProcessRendezvous::Send(std::string const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11d90e25 in tensorflow::SendOp::Compute(tensorflow::OpKernelContext*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f11d343e2 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#17 0x00007f7f11d28f70 in std::_Function_handler<void (), std::_Bind<std::_Mem_fn<void (tensorflow::(anonymous namespace)::ExecutorState::*)(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)> (tensorflow::(anonymous namespace)::ExecutorState*, tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)> >::_M_invoke(std::_Any_data const&) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#18 0x00007f7f11f362e8 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(unsigned int) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#19 0x00007f7f11f35f52 in std::_Function_handler<void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}>::_M_invoke(std::_Any_data const&) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n(More stack frames follow...)\n...\nThread 26 (Thread 0x7f7eaa7fc700 (LWP 32082)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf657 in _L_lock_909 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf480 in __GI___pthread_mutex_lock (mutex=0x2cc1da0) at ../nptl/pthread_mutex_lock.c:79\n#3  0x00007f7f11c92575 in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#4  0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#5  0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11d4c18e in std::_Function_handler<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>)::{lambda(tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)#1}>::_M_invoke(std::_Any_data const&, tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#8  0x00007f7f11e588ca in tensorflow::LocalRendezvousImpl::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11d4b170 in tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d90c0e in tensorflow::RecvOp::ComputeAsync(tensorflow::OpKernelContext*, std::function<void ()>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11c8928a in tensorflow::BaseGPUDevice::ComputeAsync(tensorflow::AsyncOpKernel*, tensorflow::OpKernelContext*, std::function<void ()>) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11d34b15 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11d28f70 in std::_Function_handler<void (), std::_Bind<std::_Mem_fn<void (tensorflow::(anonymous namespace)::ExecutorState::*)(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)> (tensorflow::(anonymous namespace)::ExecutorState*, tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long)> >::_M_invoke(std::_Any_data const&) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11f362e8 in Eigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(unsigned int) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11f35f52 in std::_Function_handler<void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}>::_M_invoke(std::_Any_data const&) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f10165a60 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#17 0x00007f7f1dcdd182 in start_thread (arg=0x7f7eaa7fc700) at pthread_create.c:312\n#18 0x00007f7f1da0a47d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n...\nThread 23 (Thread 0x7f7ea8ff9700 (LWP 32085)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f7f1dcdf672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f7f1dcdf4da in __GI___pthread_mutex_lock (mutex=0x28f0470) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007f7f02b7c477 in ?? () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#4  0x00007f7f02e82c9d in cuEventRecord () from /usr/lib/x86_64-linux-gnu/libcuda.so\n#5  0x00007f7f11defcc7 in perftools::gputools::cuda::CUDADriver::RecordEvent(perftools::gputools::cuda::CudaContext*, CUevent_st*, CUstream_st*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#6  0x00007f7f11dfcef2 in perftools::gputools::cuda::CUDAEvent::Record(perftools::gputools::cuda::CUDAStream*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#7  0x00007f7f11dfff75 in perftools::gputools::cuda::CUDAExecutor::RecordEvent(perftools::gputools::Stream*, perftools::gputools::Event*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#8  0x00007f7f11da7609 in perftools::gputools::StreamExecutor::RecordEvent(perftools::gputools::Stream*, perftools::gputools::Event*) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#9  0x00007f7f11da380d in perftools::gputools::Stream::ThenRecordEvent(perftools::gputools::Event*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#10 0x00007f7f11d92dc0 in tensorflow::EventMgr::QueueInUse(perftools::gputools::Stream*, tensorflow::EventMgr::InUse) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#11 0x00007f7f11c9266c in tensorflow::GPUUtil::CopyCPUTensorToGPU(tensorflow::Tensor const*, tensorflow::DeviceContext const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#12 0x00007f7f11c9409d in tensorflow::GPUDeviceContext::CopyCPUTensorToDevice(tensorflow::Tensor const*, tensorflow::Device*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) const\n    () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#13 0x00007f7f11d234a0 in tensorflow::CopyTensor::ViaDMA(std::string const&, tensorflow::DeviceContext*, tensorflow::DeviceContext*, tensorflow::Device*, tensorflow::Device*, tensorflow::AllocatorAttributes, tensorflow::AllocatorAttributes, tensorflow::Tensor const*, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#14 0x00007f7f11d4bd27 in tensorflow::IntraProcessRendezvous::SameWorkerRecvDone(tensorflow::Rendezvous::ParsedKey const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, tensorflow::Tensor*, std::function<void (tensorflow::Status const&)>) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#15 0x00007f7f11d4c18e in std::_Function_handler<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool), tensorflow::IntraProcessRendezvous::RecvAsync(std::string const&, tensorflow::Rendezvous::Args const&, std::function<void (tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)>)::{lambda(tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool)#1}>::_M_invoke(std::_Any_data const&, tensorflow::Status const&, tensorflow::Rendezvous::Args const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#16 0x00007f7f11e58284 in tensorflow::LocalRendezvousImpl::Send(std::string const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#17 0x00007f7f11d4a75b in tensorflow::IntraProcessRendezvous::Send(std::string const&, tensorflow::Rendezvous::Args const&, tensorflow::Tensor const&, bool) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#18 0x00007f7f11d90e25 in tensorflow::SendOp::Compute(tensorflow::OpKernelContext*) () from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n#19 0x00007f7f11d343e2 in tensorflow::(anonymous namespace)::ExecutorState::Process(tensorflow::(anonymous namespace)::ExecutorState::TaggedNode, long long) ()\n   from /usr/local/lib/python3.4/dist-packages/tensorflow/python/_pywrap_tensorflow.so\n(More stack frames follow...)\n...\n```\n"}
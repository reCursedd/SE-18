{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8551", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8551/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8551/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8551/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8551", "id": 215361333, "node_id": "MDU6SXNzdWUyMTUzNjEzMzM=", "number": 8551, "title": "  tf.image.decode_image doesn't return tensor's shape", "user": {"login": "TianweiXing", "id": 17885178, "node_id": "MDQ6VXNlcjE3ODg1MTc4", "avatar_url": "https://avatars1.githubusercontent.com/u/17885178?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TianweiXing", "html_url": "https://github.com/TianweiXing", "followers_url": "https://api.github.com/users/TianweiXing/followers", "following_url": "https://api.github.com/users/TianweiXing/following{/other_user}", "gists_url": "https://api.github.com/users/TianweiXing/gists{/gist_id}", "starred_url": "https://api.github.com/users/TianweiXing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TianweiXing/subscriptions", "organizations_url": "https://api.github.com/users/TianweiXing/orgs", "repos_url": "https://api.github.com/users/TianweiXing/repos", "events_url": "https://api.github.com/users/TianweiXing/events{/privacy}", "received_events_url": "https://api.github.com/users/TianweiXing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-03-20T09:08:48Z", "updated_at": "2017-07-03T22:57:38Z", "closed_at": "2017-03-21T22:08:40Z", "author_association": "NONE", "body_html": "<p>I try to use \"image.decode_image\" to read image file as tensor, but this function returns a tensor without \"shape\".<br>\nAs said in the doc:</p>\n<blockquote>\n<p>Their input and output are all of variable size. If you need fixed size images, pass the output of the decode Ops to one of the cropping and resizing Ops.<br>\nBut actually it cannot be passed to resizing op without shape.</p>\n</blockquote>\n<p>Is there a way to use import image as a normal tensor?</p>\n<p>Codes: I ran it in ipy notebook</p>\n<pre><code>fn = '8.png'\nimage_contents = tf.read_file(fn)\nimage = tf.image.decode_image(image_contents, channels=1)\nimage\n\nimage.shape\n\nimage.eval().shape\n\nimg_resize = tf.image.resize_images(image, [28,28])\n</code></pre>\n<p>Output:<br>\n&lt;tf.Tensor 'decode_image/cond_jpeg/Merge:0' shape= dtype=uint8&gt;</p>\n<p>TensorShape(None)</p>\n<p>(250, 250, 1)</p>\n<hr>\n<p>ValueError                                Traceback (most recent call last)<br>\n in ()<br>\n----&gt; 1 img_resize = tf.image.resize_images(image, [28,28])</p>\n<p>/home/tianwei/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/image_ops_impl.pyc in resize_images(images, size, method, align_corners)<br>\n641   images = ops.convert_to_tensor(images, name='images')<br>\n642   if images.get_shape().ndims is None:<br>\n--&gt; 643     raise ValueError(''images' contains no shape.')<br>\n644   # TODO(shlens): Migrate this functionality to the underlying Op's.<br>\n645   is_batch = True</p>\n<p>ValueError: 'images' contains no shape.</p>", "body_text": "I try to use \"image.decode_image\" to read image file as tensor, but this function returns a tensor without \"shape\".\nAs said in the doc:\n\nTheir input and output are all of variable size. If you need fixed size images, pass the output of the decode Ops to one of the cropping and resizing Ops.\nBut actually it cannot be passed to resizing op without shape.\n\nIs there a way to use import image as a normal tensor?\nCodes: I ran it in ipy notebook\nfn = '8.png'\nimage_contents = tf.read_file(fn)\nimage = tf.image.decode_image(image_contents, channels=1)\nimage\n\nimage.shape\n\nimage.eval().shape\n\nimg_resize = tf.image.resize_images(image, [28,28])\n\nOutput:\n<tf.Tensor 'decode_image/cond_jpeg/Merge:0' shape= dtype=uint8>\nTensorShape(None)\n(250, 250, 1)\n\nValueError                                Traceback (most recent call last)\n in ()\n----> 1 img_resize = tf.image.resize_images(image, [28,28])\n/home/tianwei/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/image_ops_impl.pyc in resize_images(images, size, method, align_corners)\n641   images = ops.convert_to_tensor(images, name='images')\n642   if images.get_shape().ndims is None:\n--> 643     raise ValueError(''images' contains no shape.')\n644   # TODO(shlens): Migrate this functionality to the underlying Op's.\n645   is_batch = True\nValueError: 'images' contains no shape.", "body": "I try to use \"image.decode_image\" to read image file as tensor, but this function returns a tensor without \"shape\".\r\nAs said in the doc:\r\n>  Their input and output are all of variable size. If you need fixed size images, pass the output of the decode Ops to one of the cropping and resizing Ops.\r\nBut actually it cannot be passed to resizing op without shape.\r\n\r\nIs there a way to use import image as a normal tensor?\r\n\r\nCodes: I ran it in ipy notebook\r\n```\r\nfn = '8.png'\r\nimage_contents = tf.read_file(fn)\r\nimage = tf.image.decode_image(image_contents, channels=1)\r\nimage\r\n\r\nimage.shape\r\n\r\nimage.eval().shape\r\n\r\nimg_resize = tf.image.resize_images(image, [28,28])\r\n```\r\nOutput:\r\n<tf.Tensor 'decode_image/cond_jpeg/Merge:0' shape=<unknown> dtype=uint8>\r\n\r\nTensorShape(None)\r\n\r\n(250, 250, 1)\r\n\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-10-b913c79cb137> in <module>()\r\n----> 1 img_resize = tf.image.resize_images(image, [28,28])\r\n\r\n/home/tianwei/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/image_ops_impl.pyc in resize_images(images, size, method, align_corners)\r\n    641   images = ops.convert_to_tensor(images, name='images')\r\n    642   if images.get_shape().ndims is None:\r\n--> 643     raise ValueError('\\'images\\' contains no shape.')\r\n    644   # TODO(shlens): Migrate this functionality to the underlying Op's.\r\n    645   is_batch = True\r\n\r\nValueError: 'images' contains no shape.\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4497", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4497/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4497/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/4497/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/4497", "id": 178161399, "node_id": "MDU6SXNzdWUxNzgxNjEzOTk=", "number": 4497, "title": "bidirectional_dynamic_rnn: Negative indices are currently unsupported", "user": {"login": "bluemonk482", "id": 6764450, "node_id": "MDQ6VXNlcjY3NjQ0NTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/6764450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bluemonk482", "html_url": "https://github.com/bluemonk482", "followers_url": "https://api.github.com/users/bluemonk482/followers", "following_url": "https://api.github.com/users/bluemonk482/following{/other_user}", "gists_url": "https://api.github.com/users/bluemonk482/gists{/gist_id}", "starred_url": "https://api.github.com/users/bluemonk482/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bluemonk482/subscriptions", "organizations_url": "https://api.github.com/users/bluemonk482/orgs", "repos_url": "https://api.github.com/users/bluemonk482/repos", "events_url": "https://api.github.com/users/bluemonk482/events{/privacy}", "received_events_url": "https://api.github.com/users/bluemonk482/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-09-20T19:47:53Z", "updated_at": "2016-09-21T10:58:47Z", "closed_at": "2016-09-21T10:58:47Z", "author_association": "NONE", "body_html": "<p>I am getting the 'negaive indexing' error since I switched from using <code>bidirectional_rnn</code> to <code>bidirectional_dynamic_rnn</code>:</p>\n<pre><code>            (output_fw, output_bw), output_states  = tf.nn.bidirectional_dynamic_rnn(\n                cell_fw=lstm_fw_cell,\n                cell_bw=lstm_bw_cell,\n                inputs=x,\n                dtype=tf.float32,\n                sequence_length=seq_len\n                )\n            output_fw = tf.transpose(output_fw, perm=[1,0,2])\n            output_bw = tf.transpose(output_bw, perm=[1,0,2])\n            rnn_outputs = tf.concat(2, [output_fw, output_bw])\n\n        with tf.variable_scope('output', reuse=reuse):\n            with tf.variable_scope('softmax'):\n                W = tf.get_variable('W', [self.num_hidden*2, self.num_classes],\n                                    initializer=tf.truncated_normal_initializer(stddev=0.1))\n                b = tf.get_variable('b', [self.num_classes], initializer=tf.constant_initializer(0.1))\n            logits = tf.matmul(rnn_outputs[-1], W) + b\n</code></pre>\n<pre><code>Traceback (most recent call last):\n  File \"train_lstm.py\", line 62, in &lt;module&gt;\n    logits = model.inference()\n  File \"/home/ccrmad/Code/TDLSTM/models/rnn_classifier.py\", line 70, in inference\n    logits = tf.matmul(rnn_outputs[-1], W) + b\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 334, in _SliceHelper\n    raise NotImplementedError(\"Negative indices are currently unsupported\")\nNotImplementedError: Negative indices are currently unsupported\n</code></pre>\n<p>How come I could negative-index the output from <code>bidirectional_rnn</code> but not <code>bidirectional_dynamic_rnn</code> this way? Thanks.</p>", "body_text": "I am getting the 'negaive indexing' error since I switched from using bidirectional_rnn to bidirectional_dynamic_rnn:\n            (output_fw, output_bw), output_states  = tf.nn.bidirectional_dynamic_rnn(\n                cell_fw=lstm_fw_cell,\n                cell_bw=lstm_bw_cell,\n                inputs=x,\n                dtype=tf.float32,\n                sequence_length=seq_len\n                )\n            output_fw = tf.transpose(output_fw, perm=[1,0,2])\n            output_bw = tf.transpose(output_bw, perm=[1,0,2])\n            rnn_outputs = tf.concat(2, [output_fw, output_bw])\n\n        with tf.variable_scope('output', reuse=reuse):\n            with tf.variable_scope('softmax'):\n                W = tf.get_variable('W', [self.num_hidden*2, self.num_classes],\n                                    initializer=tf.truncated_normal_initializer(stddev=0.1))\n                b = tf.get_variable('b', [self.num_classes], initializer=tf.constant_initializer(0.1))\n            logits = tf.matmul(rnn_outputs[-1], W) + b\n\nTraceback (most recent call last):\n  File \"train_lstm.py\", line 62, in <module>\n    logits = model.inference()\n  File \"/home/ccrmad/Code/TDLSTM/models/rnn_classifier.py\", line 70, in inference\n    logits = tf.matmul(rnn_outputs[-1], W) + b\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 334, in _SliceHelper\n    raise NotImplementedError(\"Negative indices are currently unsupported\")\nNotImplementedError: Negative indices are currently unsupported\n\nHow come I could negative-index the output from bidirectional_rnn but not bidirectional_dynamic_rnn this way? Thanks.", "body": "I am getting the 'negaive indexing' error since I switched from using `bidirectional_rnn` to `bidirectional_dynamic_rnn`:\n\n```\n            (output_fw, output_bw), output_states  = tf.nn.bidirectional_dynamic_rnn(\n                cell_fw=lstm_fw_cell,\n                cell_bw=lstm_bw_cell,\n                inputs=x,\n                dtype=tf.float32,\n                sequence_length=seq_len\n                )\n            output_fw = tf.transpose(output_fw, perm=[1,0,2])\n            output_bw = tf.transpose(output_bw, perm=[1,0,2])\n            rnn_outputs = tf.concat(2, [output_fw, output_bw])\n\n        with tf.variable_scope('output', reuse=reuse):\n            with tf.variable_scope('softmax'):\n                W = tf.get_variable('W', [self.num_hidden*2, self.num_classes],\n                                    initializer=tf.truncated_normal_initializer(stddev=0.1))\n                b = tf.get_variable('b', [self.num_classes], initializer=tf.constant_initializer(0.1))\n            logits = tf.matmul(rnn_outputs[-1], W) + b\n```\n\n```\nTraceback (most recent call last):\n  File \"train_lstm.py\", line 62, in <module>\n    logits = model.inference()\n  File \"/home/ccrmad/Code/TDLSTM/models/rnn_classifier.py\", line 70, in inference\n    logits = tf.matmul(rnn_outputs[-1], W) + b\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/array_ops.py\", line 334, in _SliceHelper\n    raise NotImplementedError(\"Negative indices are currently unsupported\")\nNotImplementedError: Negative indices are currently unsupported\n```\n\nHow come I could negative-index the output from `bidirectional_rnn` but not `bidirectional_dynamic_rnn` this way? Thanks.\n"}
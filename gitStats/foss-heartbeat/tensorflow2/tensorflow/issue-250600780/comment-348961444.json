{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/348961444", "html_url": "https://github.com/tensorflow/tensorflow/issues/12325#issuecomment-348961444", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12325", "id": 348961444, "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODk2MTQ0NA==", "user": {"login": "sandipmgiri", "id": 16284232, "node_id": "MDQ6VXNlcjE2Mjg0MjMy", "avatar_url": "https://avatars0.githubusercontent.com/u/16284232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandipmgiri", "html_url": "https://github.com/sandipmgiri", "followers_url": "https://api.github.com/users/sandipmgiri/followers", "following_url": "https://api.github.com/users/sandipmgiri/following{/other_user}", "gists_url": "https://api.github.com/users/sandipmgiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandipmgiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandipmgiri/subscriptions", "organizations_url": "https://api.github.com/users/sandipmgiri/orgs", "repos_url": "https://api.github.com/users/sandipmgiri/repos", "events_url": "https://api.github.com/users/sandipmgiri/events{/privacy}", "received_events_url": "https://api.github.com/users/sandipmgiri/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-04T13:26:34Z", "updated_at": "2017-12-04T13:37:14Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The test is failing due to a minor array mismatch error (the value of only 1 out of 34 entries differing i.e. 0 vs expected 1) at line number 83 in file <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/python/kernel_tests/summary_image_op_test.py#L83\">https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/python/kernel_tests/summary_image_op_test.py#L83</a></p>\n<p>For more logs and details refer attached file -<br>\n<a href=\"https://github.com/tensorflow/tensorflow/files/1527240/Logfile.txt\">Logfile.txt</a></p>\n<p>I have checked the output of all the functions which are involved in this test, and found that -<br>\nFollowing line returning incorrect result on ppc64le- <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/python/kernel_tests/summary_image_op_test.py#L73\">https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/python/kernel_tests/summary_image_op_test.py#L73</a><br>\n<em><strong>summ = summary.image(\"img\", const)</strong><br>\nvalue = sess.run(summ)<br>\nprint (\"value\")</em></p>\n<p>Output (X86 vs ppc64le) :<br>\nX86 :</p>\n<pre><code>'\\n\\x81\\x01\\n\\x0bimg/image/0\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\xbc\\xdb)-\\xbaO\\xe7?\\xa3\\xdc,\\xf78I\\xb5\\xab\\xcc\\xc9\\xb3\\xd89\\x05\\xa7\\xf52\\x89Y\\x07}_`\\xa7\\xc6d\\xf4/\\xcd\\xee\\xab\\t\\x0f\\x00\\x1a\\xe4\\r\\xe2\\xc3\\xbd-\\xa5\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x81\\x01\\n\\x0bimg/image/1\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\x8e\\xe2\\xdbZ\\xf5\\xa7R\\x8e\\xc9M\\xca\\xd7\\\\#@\\x8aYh\"\\x87\\x11\\xe3\\xa6\\xd7\\xcc\\x7f\\xf9\\x9f\\xb9\\x1c^l\\xc9\\xf8\\xa0\\xeb\\xf1{\\x0e\\xeds\\x00\\x0c\\xef\\x0f:\\xdfIp\\x07\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x83\\x01\\n\\x0bimg/image/2\"t\\x08\\x05\\x10\\x07\\x18\\x01\"l\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x003IDAT\\x08\\x99\\x01(\\x00\\xd7\\xff\\x01\\xd4\\x9c\\x16J\\x04\\xa0\\x1e\\x04\\xd5\\x05\\x96\\x1e\\x0e#\\xb5\\x03 \\xea2?\\x18\\xef&amp;\\x03l\\xfd\\x04\\xb9\\xe5o\\xe2\\x02\\xc6\\xe6\\xd4;\\x1a/\\xeb\\x1f3\\x10\\x07\\xa8\\xd8;Q\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82'\n</code></pre>\n<p>ppc64le:</p>\n<pre><code>'\\n\\x81\\x01\\n\\x0bimg/image/0\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\xbc\\xdb)-\\xbaO\\xe7?\\xa3\\xdc,\\xf78I\\xb5\\xab\\xcc\\xc9\\xb3\\xd89\\x05\\xa7\\xf52\\x89Y\\x07}_`\\xa7\\xcad\\xf4/\\xcd\\xee\\xab\\t/\\x00\\x1a\\xdc\\r\\xe2\\xc4\\x9c\\r\\x96\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x81\\x01\\n\\x0bimg/image/1\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\x8e\\xe2\\xdbZ\\xf5\\xa7R\\x8e\\xc9M\\xca\\xd7\\\\#@\\x8aYh\"\\x87\\x11\\xe3\\xa6\\xd7\\xcc\\x7f\\xf9\\x9f\\xb9\\x1c^l\\xc9\\xf8\\xa0\\xeb\\xf1{\\x0e\\xeds\\x00\\x0c\\xef\\x0f:\\xdfIp\\x07\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x83\\x01\\n\\x0bimg/image/2\"t\\x08\\x05\\x10\\x07\\x18\\x01\"l\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x003IDAT\\x08\\x99\\x01(\\x00\\xd7\\xff\\x01\\xd4\\x9c\\x16J\\x04\\xa0\\x1e\\x04\\xd5\\x05\\x96\\x1e\\x0e#\\xb5\\x03 \\xea2?\\x18\\xef&amp;\\x03l\\xfd\\x04\\xb9\\xe5o\\xe2\\x02\\xc6\\xe6\\xd4;\\x1a/\\xeb\\x1f3\\x10\\x07\\xa8\\xd8;Q\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82'\n</code></pre>\n<p>Compared the x86 and ppc64le outputs, difference -</p>\n<pre><code>**X86**                          vs               **ppc64le**\nxc6d                                                     xcad\n\\t\\x0f\\                                                   \\t/\\\na\\xe4                                                    a\\xdc\nxc3\\xbd-\\xa5                                       xc4\\x9c\\r\\x96\n</code></pre>\n<p>For testing purpose , I have replaced these 4 ppc64le values with x86 and the test passed successfully (on power).<br>\nWhat would be the reason of getting <code>summary.image(\"img\", const) </code> output incorrect/different on power?<br>\nPlease provide any suggestions/comments on this, that will be helpful for further debugging. Thanks!!!</p>\n<pre><code>Where i/p,\nconst  =  array([[[[  1.69052565e+00],\n         [ -4.65937376e-01],\n         [  3.28201652e-02],\n         [  4.07516271e-01],\n         [ -7.88923025e-01],\n         [  2.06557289e-03],\n         [ -8.90385883e-04]],\n\n        [[ -1.75472426e+00],\n         [  1.01765800e+00],\n         [             nan],\n         [ -6.25428975e-01],\n         [ -1.71548262e-01],\n         [  5.05299389e-01],\n         [ -2.61356413e-01]],\n\n        [[ -2.42749080e-01],\n         [ -1.45324147e+00],\n         [  5.54580331e-01],\n         [  1.23880908e-01],\n         [  2.74459928e-01],\n         [ -1.52652454e+00],\n         [  1.65069973e+00]],\n\n        [[  1.54335529e-01],\n         [ -3.87139946e-01],\n         [  2.02907228e+00],\n         [ -4.53860313e-02],\n         [ -1.45067871e+00],\n         [ -4.05227870e-01],\n         [ -2.28831506e+00]],\n\n        [[  1.04939651e+00],\n         [ -4.16474313e-01],\n         [ -7.42553532e-01],\n         [  1.07247019e+00],\n         [ -1.65107560e+00],\n         [  5.35429358e-01],\n         [ -2.06441474e+00]]],\n\n\n       [[[ -6.62159324e-01],\n         [ -1.20421982e+00],\n         [  1.46197557e+00],\n         [  1.76616085e+00],\n         [ -3.29413742e-01],\n         [  8.40733230e-01],\n         [ -1.79986402e-01]],\n\n        [[  5.68061888e-01],\n         [ -7.52837181e-01],\n         [ -1.70833921e+00],\n         [ -1.80309868e+00],\n         [  3.83121848e-01],\n         [  2.24759507e+00],\n         [  2.69411623e-01]],\n\n        [[ -5.24604619e-01],\n         [  1.91201890e+00],\n         [  2.37301841e-01],\n         [  1.01433985e-01],\n         [  2.52577722e-01],\n         [ -1.32377192e-01],\n         [ -3.09476346e-01]],\n\n        [[ -1.43496346e+00],\n         [  5.01624107e-01],\n         [ -9.47754532e-02],\n         [  1.19308591e+00],\n         [ -3.68818462e-01],\n         [ -1.90636992e+00],\n         [ -9.96106341e-02]],\n\n        [[  1.69953728e+00],\n         [ -3.83423120e-01],\n         [ -8.89856875e-01],\n         [ -1.19359195e+00],\n         [ -1.05001676e+00],\n         [ -3.00193727e-01],\n         [ -1.17998207e+00]]],\n\n\n       [[[  1.49763906e+00],\n         [ -2.82635242e-01],\n         [  1.08648375e-01],\n         [  1.43823957e+00],\n         [  1.50331855e+00],\n         [ -2.12732971e-01],\n         [  3.31974208e-01]],\n\n        [[  7.35026598e-01],\n         [ -1.92855462e-01],\n         [ -1.77801287e+00],\n         [  6.54705703e-01],\n         [  8.94352317e-01],\n         [  4.15502608e-01],\n         [ -9.23544645e-01]],\n\n        [[ -1.96027309e-01],\n         [ -5.90769827e-01],\n         [ -2.99711227e-01],\n         [  1.29688525e+00],\n         [  1.52957964e+00],\n         [  6.69418216e-01],\n         [  5.48745096e-01]],\n\n        [[  6.76629007e-01],\n         [ -1.22421868e-02],\n         [ -7.56634623e-02],\n         [ -6.73645198e-01],\n         [ -5.58674484e-02],\n         [  2.25994706e+00],\n         [  8.69039357e-01]],\n\n        [[ -3.42117012e-01],\n         [ -4.71926659e-01],\n         [ -8.64489973e-01],\n         [  3.74370337e-01],\n         [  3.91545683e-01],\n         [ -1.44312167e+00],\n         [  4.86335188e-01]]],\n\n\n       [[[ -5.69472253e-01],\n         [  1.42672122e+00],\n         [  1.56843990e-01],\n         [  1.71773005e+00],\n         [ -4.58126783e-01],\n         [ -2.87983865e-01],\n         [  2.99808353e-01]],\n\n        [[  1.05594826e+00],\n         [  5.65882504e-01],\n         [ -1.23352396e+00],\n         [  1.82900697e-01],\n         [  2.22447384e-02],\n         [ -4.29068595e-01],\n         [ -6.48105264e-01]],\n\n        [[  1.74757719e+00],\n         [ -3.90386492e-01],\n         [ -8.45922649e-01],\n         [  6.37112856e-01],\n         [  1.30622983e-01],\n         [ -7.58138672e-02],\n         [  7.81301796e-01]],\n\n        [[  4.88625407e-01],\n         [  3.62190008e-01],\n         [  9.64200497e-01],\n         [  2.83636421e-01],\n         [ -6.16921961e-01],\n         [ -3.62282217e-01],\n         [ -5.20972311e-01]],\n\n        [[  2.09722057e-01],\n         [ -1.07798493e+00],\n         [ -1.83242595e+00],\n         [  8.81549269e-02],\n         [ -1.33652055e+00],\n         [ -1.95197809e+00],\n         [  3.73330772e-01]]]])\n</code></pre>", "body_text": "The test is failing due to a minor array mismatch error (the value of only 1 out of 34 entries differing i.e. 0 vs expected 1) at line number 83 in file https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/python/kernel_tests/summary_image_op_test.py#L83\nFor more logs and details refer attached file -\nLogfile.txt\nI have checked the output of all the functions which are involved in this test, and found that -\nFollowing line returning incorrect result on ppc64le- https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/python/kernel_tests/summary_image_op_test.py#L73\nsumm = summary.image(\"img\", const)\nvalue = sess.run(summ)\nprint (\"value\")\nOutput (X86 vs ppc64le) :\nX86 :\n'\\n\\x81\\x01\\n\\x0bimg/image/0\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\xbc\\xdb)-\\xbaO\\xe7?\\xa3\\xdc,\\xf78I\\xb5\\xab\\xcc\\xc9\\xb3\\xd89\\x05\\xa7\\xf52\\x89Y\\x07}_`\\xa7\\xc6d\\xf4/\\xcd\\xee\\xab\\t\\x0f\\x00\\x1a\\xe4\\r\\xe2\\xc3\\xbd-\\xa5\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x81\\x01\\n\\x0bimg/image/1\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\x8e\\xe2\\xdbZ\\xf5\\xa7R\\x8e\\xc9M\\xca\\xd7\\\\#@\\x8aYh\"\\x87\\x11\\xe3\\xa6\\xd7\\xcc\\x7f\\xf9\\x9f\\xb9\\x1c^l\\xc9\\xf8\\xa0\\xeb\\xf1{\\x0e\\xeds\\x00\\x0c\\xef\\x0f:\\xdfIp\\x07\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x83\\x01\\n\\x0bimg/image/2\"t\\x08\\x05\\x10\\x07\\x18\\x01\"l\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x003IDAT\\x08\\x99\\x01(\\x00\\xd7\\xff\\x01\\xd4\\x9c\\x16J\\x04\\xa0\\x1e\\x04\\xd5\\x05\\x96\\x1e\\x0e#\\xb5\\x03 \\xea2?\\x18\\xef&\\x03l\\xfd\\x04\\xb9\\xe5o\\xe2\\x02\\xc6\\xe6\\xd4;\\x1a/\\xeb\\x1f3\\x10\\x07\\xa8\\xd8;Q\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82'\n\nppc64le:\n'\\n\\x81\\x01\\n\\x0bimg/image/0\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\xbc\\xdb)-\\xbaO\\xe7?\\xa3\\xdc,\\xf78I\\xb5\\xab\\xcc\\xc9\\xb3\\xd89\\x05\\xa7\\xf52\\x89Y\\x07}_`\\xa7\\xcad\\xf4/\\xcd\\xee\\xab\\t/\\x00\\x1a\\xdc\\r\\xe2\\xc4\\x9c\\r\\x96\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x81\\x01\\n\\x0bimg/image/1\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\x8e\\xe2\\xdbZ\\xf5\\xa7R\\x8e\\xc9M\\xca\\xd7\\\\#@\\x8aYh\"\\x87\\x11\\xe3\\xa6\\xd7\\xcc\\x7f\\xf9\\x9f\\xb9\\x1c^l\\xc9\\xf8\\xa0\\xeb\\xf1{\\x0e\\xeds\\x00\\x0c\\xef\\x0f:\\xdfIp\\x07\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x83\\x01\\n\\x0bimg/image/2\"t\\x08\\x05\\x10\\x07\\x18\\x01\"l\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x003IDAT\\x08\\x99\\x01(\\x00\\xd7\\xff\\x01\\xd4\\x9c\\x16J\\x04\\xa0\\x1e\\x04\\xd5\\x05\\x96\\x1e\\x0e#\\xb5\\x03 \\xea2?\\x18\\xef&\\x03l\\xfd\\x04\\xb9\\xe5o\\xe2\\x02\\xc6\\xe6\\xd4;\\x1a/\\xeb\\x1f3\\x10\\x07\\xa8\\xd8;Q\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82'\n\nCompared the x86 and ppc64le outputs, difference -\n**X86**                          vs               **ppc64le**\nxc6d                                                     xcad\n\\t\\x0f\\                                                   \\t/\\\na\\xe4                                                    a\\xdc\nxc3\\xbd-\\xa5                                       xc4\\x9c\\r\\x96\n\nFor testing purpose , I have replaced these 4 ppc64le values with x86 and the test passed successfully (on power).\nWhat would be the reason of getting summary.image(\"img\", const)  output incorrect/different on power?\nPlease provide any suggestions/comments on this, that will be helpful for further debugging. Thanks!!!\nWhere i/p,\nconst  =  array([[[[  1.69052565e+00],\n         [ -4.65937376e-01],\n         [  3.28201652e-02],\n         [  4.07516271e-01],\n         [ -7.88923025e-01],\n         [  2.06557289e-03],\n         [ -8.90385883e-04]],\n\n        [[ -1.75472426e+00],\n         [  1.01765800e+00],\n         [             nan],\n         [ -6.25428975e-01],\n         [ -1.71548262e-01],\n         [  5.05299389e-01],\n         [ -2.61356413e-01]],\n\n        [[ -2.42749080e-01],\n         [ -1.45324147e+00],\n         [  5.54580331e-01],\n         [  1.23880908e-01],\n         [  2.74459928e-01],\n         [ -1.52652454e+00],\n         [  1.65069973e+00]],\n\n        [[  1.54335529e-01],\n         [ -3.87139946e-01],\n         [  2.02907228e+00],\n         [ -4.53860313e-02],\n         [ -1.45067871e+00],\n         [ -4.05227870e-01],\n         [ -2.28831506e+00]],\n\n        [[  1.04939651e+00],\n         [ -4.16474313e-01],\n         [ -7.42553532e-01],\n         [  1.07247019e+00],\n         [ -1.65107560e+00],\n         [  5.35429358e-01],\n         [ -2.06441474e+00]]],\n\n\n       [[[ -6.62159324e-01],\n         [ -1.20421982e+00],\n         [  1.46197557e+00],\n         [  1.76616085e+00],\n         [ -3.29413742e-01],\n         [  8.40733230e-01],\n         [ -1.79986402e-01]],\n\n        [[  5.68061888e-01],\n         [ -7.52837181e-01],\n         [ -1.70833921e+00],\n         [ -1.80309868e+00],\n         [  3.83121848e-01],\n         [  2.24759507e+00],\n         [  2.69411623e-01]],\n\n        [[ -5.24604619e-01],\n         [  1.91201890e+00],\n         [  2.37301841e-01],\n         [  1.01433985e-01],\n         [  2.52577722e-01],\n         [ -1.32377192e-01],\n         [ -3.09476346e-01]],\n\n        [[ -1.43496346e+00],\n         [  5.01624107e-01],\n         [ -9.47754532e-02],\n         [  1.19308591e+00],\n         [ -3.68818462e-01],\n         [ -1.90636992e+00],\n         [ -9.96106341e-02]],\n\n        [[  1.69953728e+00],\n         [ -3.83423120e-01],\n         [ -8.89856875e-01],\n         [ -1.19359195e+00],\n         [ -1.05001676e+00],\n         [ -3.00193727e-01],\n         [ -1.17998207e+00]]],\n\n\n       [[[  1.49763906e+00],\n         [ -2.82635242e-01],\n         [  1.08648375e-01],\n         [  1.43823957e+00],\n         [  1.50331855e+00],\n         [ -2.12732971e-01],\n         [  3.31974208e-01]],\n\n        [[  7.35026598e-01],\n         [ -1.92855462e-01],\n         [ -1.77801287e+00],\n         [  6.54705703e-01],\n         [  8.94352317e-01],\n         [  4.15502608e-01],\n         [ -9.23544645e-01]],\n\n        [[ -1.96027309e-01],\n         [ -5.90769827e-01],\n         [ -2.99711227e-01],\n         [  1.29688525e+00],\n         [  1.52957964e+00],\n         [  6.69418216e-01],\n         [  5.48745096e-01]],\n\n        [[  6.76629007e-01],\n         [ -1.22421868e-02],\n         [ -7.56634623e-02],\n         [ -6.73645198e-01],\n         [ -5.58674484e-02],\n         [  2.25994706e+00],\n         [  8.69039357e-01]],\n\n        [[ -3.42117012e-01],\n         [ -4.71926659e-01],\n         [ -8.64489973e-01],\n         [  3.74370337e-01],\n         [  3.91545683e-01],\n         [ -1.44312167e+00],\n         [  4.86335188e-01]]],\n\n\n       [[[ -5.69472253e-01],\n         [  1.42672122e+00],\n         [  1.56843990e-01],\n         [  1.71773005e+00],\n         [ -4.58126783e-01],\n         [ -2.87983865e-01],\n         [  2.99808353e-01]],\n\n        [[  1.05594826e+00],\n         [  5.65882504e-01],\n         [ -1.23352396e+00],\n         [  1.82900697e-01],\n         [  2.22447384e-02],\n         [ -4.29068595e-01],\n         [ -6.48105264e-01]],\n\n        [[  1.74757719e+00],\n         [ -3.90386492e-01],\n         [ -8.45922649e-01],\n         [  6.37112856e-01],\n         [  1.30622983e-01],\n         [ -7.58138672e-02],\n         [  7.81301796e-01]],\n\n        [[  4.88625407e-01],\n         [  3.62190008e-01],\n         [  9.64200497e-01],\n         [  2.83636421e-01],\n         [ -6.16921961e-01],\n         [ -3.62282217e-01],\n         [ -5.20972311e-01]],\n\n        [[  2.09722057e-01],\n         [ -1.07798493e+00],\n         [ -1.83242595e+00],\n         [  8.81549269e-02],\n         [ -1.33652055e+00],\n         [ -1.95197809e+00],\n         [  3.73330772e-01]]]])", "body": "The test is failing due to a minor array mismatch error (the value of only 1 out of 34 entries differing i.e. 0 vs expected 1) at line number 83 in file https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/python/kernel_tests/summary_image_op_test.py#L83\r\n\r\nFor more logs and details refer attached file - \r\n[Logfile.txt](https://github.com/tensorflow/tensorflow/files/1527240/Logfile.txt)\r\n\r\n\r\nI have checked the output of all the functions which are involved in this test, and found that -\r\nFollowing line returning incorrect result on ppc64le- https://github.com/tensorflow/tensorflow/blob/v1.3.1/tensorflow/python/kernel_tests/summary_image_op_test.py#L73\r\n_**summ = summary.image(\"img\", const)**\r\nvalue = sess.run(summ)\r\nprint (\"value\")_\r\n\r\nOutput (X86 vs ppc64le) :\r\nX86 :\r\n```\r\n'\\n\\x81\\x01\\n\\x0bimg/image/0\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\xbc\\xdb)-\\xbaO\\xe7?\\xa3\\xdc,\\xf78I\\xb5\\xab\\xcc\\xc9\\xb3\\xd89\\x05\\xa7\\xf52\\x89Y\\x07}_`\\xa7\\xc6d\\xf4/\\xcd\\xee\\xab\\t\\x0f\\x00\\x1a\\xe4\\r\\xe2\\xc3\\xbd-\\xa5\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x81\\x01\\n\\x0bimg/image/1\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\x8e\\xe2\\xdbZ\\xf5\\xa7R\\x8e\\xc9M\\xca\\xd7\\\\#@\\x8aYh\"\\x87\\x11\\xe3\\xa6\\xd7\\xcc\\x7f\\xf9\\x9f\\xb9\\x1c^l\\xc9\\xf8\\xa0\\xeb\\xf1{\\x0e\\xeds\\x00\\x0c\\xef\\x0f:\\xdfIp\\x07\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x83\\x01\\n\\x0bimg/image/2\"t\\x08\\x05\\x10\\x07\\x18\\x01\"l\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x003IDAT\\x08\\x99\\x01(\\x00\\xd7\\xff\\x01\\xd4\\x9c\\x16J\\x04\\xa0\\x1e\\x04\\xd5\\x05\\x96\\x1e\\x0e#\\xb5\\x03 \\xea2?\\x18\\xef&\\x03l\\xfd\\x04\\xb9\\xe5o\\xe2\\x02\\xc6\\xe6\\xd4;\\x1a/\\xeb\\x1f3\\x10\\x07\\xa8\\xd8;Q\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82'\r\n```\r\nppc64le:\r\n```\r\n'\\n\\x81\\x01\\n\\x0bimg/image/0\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\xbc\\xdb)-\\xbaO\\xe7?\\xa3\\xdc,\\xf78I\\xb5\\xab\\xcc\\xc9\\xb3\\xd89\\x05\\xa7\\xf52\\x89Y\\x07}_`\\xa7\\xcad\\xf4/\\xcd\\xee\\xab\\t/\\x00\\x1a\\xdc\\r\\xe2\\xc4\\x9c\\r\\x96\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x81\\x01\\n\\x0bimg/image/1\"r\\x08\\x05\\x10\\x07\\x18\\x01\"j\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x001IDAT\\x08\\x99c\\x8e\\xe2\\xdbZ\\xf5\\xa7R\\x8e\\xc9M\\xca\\xd7\\\\#@\\x8aYh\"\\x87\\x11\\xe3\\xa6\\xd7\\xcc\\x7f\\xf9\\x9f\\xb9\\x1c^l\\xc9\\xf8\\xa0\\xeb\\xf1{\\x0e\\xeds\\x00\\x0c\\xef\\x0f:\\xdfIp\\x07\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82\\n\\x83\\x01\\n\\x0bimg/image/2\"t\\x08\\x05\\x10\\x07\\x18\\x01\"l\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\rIHDR\\x00\\x00\\x00\\x07\\x00\\x00\\x00\\x05\\x08\\x00\\x00\\x00\\x00\\xac\\xf1\\xa9\\x04\\x00\\x00\\x003IDAT\\x08\\x99\\x01(\\x00\\xd7\\xff\\x01\\xd4\\x9c\\x16J\\x04\\xa0\\x1e\\x04\\xd5\\x05\\x96\\x1e\\x0e#\\xb5\\x03 \\xea2?\\x18\\xef&\\x03l\\xfd\\x04\\xb9\\xe5o\\xe2\\x02\\xc6\\xe6\\xd4;\\x1a/\\xeb\\x1f3\\x10\\x07\\xa8\\xd8;Q\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82'\r\n```\r\nCompared the x86 and ppc64le outputs, difference -\r\n```\r\n**X86**                          vs               **ppc64le**\r\nxc6d                                                     xcad\r\n\\t\\x0f\\                                                   \\t/\\\r\na\\xe4                                                    a\\xdc\r\nxc3\\xbd-\\xa5                                       xc4\\x9c\\r\\x96\r\n```\r\nFor testing purpose , I have replaced these 4 ppc64le values with x86 and the test passed successfully (on power).\r\nWhat would be the reason of getting `summary.image(\"img\", const) ` output incorrect/different on power?\r\nPlease provide any suggestions/comments on this, that will be helpful for further debugging. Thanks!!!\r\n```\r\nWhere i/p,\r\nconst  =  array([[[[  1.69052565e+00],\r\n         [ -4.65937376e-01],\r\n         [  3.28201652e-02],\r\n         [  4.07516271e-01],\r\n         [ -7.88923025e-01],\r\n         [  2.06557289e-03],\r\n         [ -8.90385883e-04]],\r\n\r\n        [[ -1.75472426e+00],\r\n         [  1.01765800e+00],\r\n         [             nan],\r\n         [ -6.25428975e-01],\r\n         [ -1.71548262e-01],\r\n         [  5.05299389e-01],\r\n         [ -2.61356413e-01]],\r\n\r\n        [[ -2.42749080e-01],\r\n         [ -1.45324147e+00],\r\n         [  5.54580331e-01],\r\n         [  1.23880908e-01],\r\n         [  2.74459928e-01],\r\n         [ -1.52652454e+00],\r\n         [  1.65069973e+00]],\r\n\r\n        [[  1.54335529e-01],\r\n         [ -3.87139946e-01],\r\n         [  2.02907228e+00],\r\n         [ -4.53860313e-02],\r\n         [ -1.45067871e+00],\r\n         [ -4.05227870e-01],\r\n         [ -2.28831506e+00]],\r\n\r\n        [[  1.04939651e+00],\r\n         [ -4.16474313e-01],\r\n         [ -7.42553532e-01],\r\n         [  1.07247019e+00],\r\n         [ -1.65107560e+00],\r\n         [  5.35429358e-01],\r\n         [ -2.06441474e+00]]],\r\n\r\n\r\n       [[[ -6.62159324e-01],\r\n         [ -1.20421982e+00],\r\n         [  1.46197557e+00],\r\n         [  1.76616085e+00],\r\n         [ -3.29413742e-01],\r\n         [  8.40733230e-01],\r\n         [ -1.79986402e-01]],\r\n\r\n        [[  5.68061888e-01],\r\n         [ -7.52837181e-01],\r\n         [ -1.70833921e+00],\r\n         [ -1.80309868e+00],\r\n         [  3.83121848e-01],\r\n         [  2.24759507e+00],\r\n         [  2.69411623e-01]],\r\n\r\n        [[ -5.24604619e-01],\r\n         [  1.91201890e+00],\r\n         [  2.37301841e-01],\r\n         [  1.01433985e-01],\r\n         [  2.52577722e-01],\r\n         [ -1.32377192e-01],\r\n         [ -3.09476346e-01]],\r\n\r\n        [[ -1.43496346e+00],\r\n         [  5.01624107e-01],\r\n         [ -9.47754532e-02],\r\n         [  1.19308591e+00],\r\n         [ -3.68818462e-01],\r\n         [ -1.90636992e+00],\r\n         [ -9.96106341e-02]],\r\n\r\n        [[  1.69953728e+00],\r\n         [ -3.83423120e-01],\r\n         [ -8.89856875e-01],\r\n         [ -1.19359195e+00],\r\n         [ -1.05001676e+00],\r\n         [ -3.00193727e-01],\r\n         [ -1.17998207e+00]]],\r\n\r\n\r\n       [[[  1.49763906e+00],\r\n         [ -2.82635242e-01],\r\n         [  1.08648375e-01],\r\n         [  1.43823957e+00],\r\n         [  1.50331855e+00],\r\n         [ -2.12732971e-01],\r\n         [  3.31974208e-01]],\r\n\r\n        [[  7.35026598e-01],\r\n         [ -1.92855462e-01],\r\n         [ -1.77801287e+00],\r\n         [  6.54705703e-01],\r\n         [  8.94352317e-01],\r\n         [  4.15502608e-01],\r\n         [ -9.23544645e-01]],\r\n\r\n        [[ -1.96027309e-01],\r\n         [ -5.90769827e-01],\r\n         [ -2.99711227e-01],\r\n         [  1.29688525e+00],\r\n         [  1.52957964e+00],\r\n         [  6.69418216e-01],\r\n         [  5.48745096e-01]],\r\n\r\n        [[  6.76629007e-01],\r\n         [ -1.22421868e-02],\r\n         [ -7.56634623e-02],\r\n         [ -6.73645198e-01],\r\n         [ -5.58674484e-02],\r\n         [  2.25994706e+00],\r\n         [  8.69039357e-01]],\r\n\r\n        [[ -3.42117012e-01],\r\n         [ -4.71926659e-01],\r\n         [ -8.64489973e-01],\r\n         [  3.74370337e-01],\r\n         [  3.91545683e-01],\r\n         [ -1.44312167e+00],\r\n         [  4.86335188e-01]]],\r\n\r\n\r\n       [[[ -5.69472253e-01],\r\n         [  1.42672122e+00],\r\n         [  1.56843990e-01],\r\n         [  1.71773005e+00],\r\n         [ -4.58126783e-01],\r\n         [ -2.87983865e-01],\r\n         [  2.99808353e-01]],\r\n\r\n        [[  1.05594826e+00],\r\n         [  5.65882504e-01],\r\n         [ -1.23352396e+00],\r\n         [  1.82900697e-01],\r\n         [  2.22447384e-02],\r\n         [ -4.29068595e-01],\r\n         [ -6.48105264e-01]],\r\n\r\n        [[  1.74757719e+00],\r\n         [ -3.90386492e-01],\r\n         [ -8.45922649e-01],\r\n         [  6.37112856e-01],\r\n         [  1.30622983e-01],\r\n         [ -7.58138672e-02],\r\n         [  7.81301796e-01]],\r\n\r\n        [[  4.88625407e-01],\r\n         [  3.62190008e-01],\r\n         [  9.64200497e-01],\r\n         [  2.83636421e-01],\r\n         [ -6.16921961e-01],\r\n         [ -3.62282217e-01],\r\n         [ -5.20972311e-01]],\r\n\r\n        [[  2.09722057e-01],\r\n         [ -1.07798493e+00],\r\n         [ -1.83242595e+00],\r\n         [  8.81549269e-02],\r\n         [ -1.33652055e+00],\r\n         [ -1.95197809e+00],\r\n         [  3.73330772e-01]]]])\r\n```\r\n"}
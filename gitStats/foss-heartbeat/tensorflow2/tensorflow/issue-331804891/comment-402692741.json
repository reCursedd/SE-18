{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/402692741", "html_url": "https://github.com/tensorflow/tensorflow/issues/19962#issuecomment-402692741", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19962", "id": 402692741, "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjY5Mjc0MQ==", "user": {"login": "ruiboshi", "id": 26874048, "node_id": "MDQ6VXNlcjI2ODc0MDQ4", "avatar_url": "https://avatars0.githubusercontent.com/u/26874048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruiboshi", "html_url": "https://github.com/ruiboshi", "followers_url": "https://api.github.com/users/ruiboshi/followers", "following_url": "https://api.github.com/users/ruiboshi/following{/other_user}", "gists_url": "https://api.github.com/users/ruiboshi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruiboshi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruiboshi/subscriptions", "organizations_url": "https://api.github.com/users/ruiboshi/orgs", "repos_url": "https://api.github.com/users/ruiboshi/repos", "events_url": "https://api.github.com/users/ruiboshi/events{/privacy}", "received_events_url": "https://api.github.com/users/ruiboshi/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-05T11:29:56Z", "updated_at": "2018-07-05T11:29:56Z", "author_association": "NONE", "body_html": "<p>I'm seeing the same issue with a custom CNN model - it seems that the profiler complains about the layer built with NHWC and report the the actual runtime shape being in NCHW.</p>\n<p><code>Node import/lite_cnn/cnn/conv1/Conv2D incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv1/BiasAdd incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv1/Relu incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv2/Conv2D incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv2/BiasAdd incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv2/Relu incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible.</code></p>", "body_text": "I'm seeing the same issue with a custom CNN model - it seems that the profiler complains about the layer built with NHWC and report the the actual runtime shape being in NCHW.\nNode import/lite_cnn/cnn/conv1/Conv2D incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv1/BiasAdd incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv1/Relu incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv2/Conv2D incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv2/BiasAdd incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible. Node import/lite_cnn/cnn/conv2/Relu incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible.", "body": "I'm seeing the same issue with a custom CNN model - it seems that the profiler complains about the layer built with NHWC and report the the actual runtime shape being in NCHW. \r\n\r\n`Node import/lite_cnn/cnn/conv1/Conv2D incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible.\r\nNode import/lite_cnn/cnn/conv1/BiasAdd incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible.\r\nNode import/lite_cnn/cnn/conv1/Relu incompatible shapes: Shapes (?, 96, 64, 16) and (1, 16, 96, 64) are not compatible.\r\nNode import/lite_cnn/cnn/conv2/Conv2D incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible.\r\nNode import/lite_cnn/cnn/conv2/BiasAdd incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible.\r\nNode import/lite_cnn/cnn/conv2/Relu incompatible shapes: Shapes (?, 96, 64, 32) and (1, 32, 96, 64) are not compatible.`"}
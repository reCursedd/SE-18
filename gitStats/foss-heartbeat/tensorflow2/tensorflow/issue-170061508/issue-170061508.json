{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3701", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3701/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3701/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3701/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/3701", "id": 170061508, "node_id": "MDU6SXNzdWUxNzAwNjE1MDg=", "number": 3701, "title": "tensorflow won't release system memroy", "user": {"login": "xiaorongfan", "id": 20916152, "node_id": "MDQ6VXNlcjIwOTE2MTUy", "avatar_url": "https://avatars2.githubusercontent.com/u/20916152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaorongfan", "html_url": "https://github.com/xiaorongfan", "followers_url": "https://api.github.com/users/xiaorongfan/followers", "following_url": "https://api.github.com/users/xiaorongfan/following{/other_user}", "gists_url": "https://api.github.com/users/xiaorongfan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaorongfan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaorongfan/subscriptions", "organizations_url": "https://api.github.com/users/xiaorongfan/orgs", "repos_url": "https://api.github.com/users/xiaorongfan/repos", "events_url": "https://api.github.com/users/xiaorongfan/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaorongfan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-08-09T01:18:37Z", "updated_at": "2016-08-10T01:39:22Z", "closed_at": "2016-08-10T01:39:22Z", "author_association": "NONE", "body_html": "<p>Hi all,</p>\n<p>I started to use tensorflow one month ago. I briefly use it to train neural machine translation models.<br>\nI find that after several times of training,  there were a huge amount of memory not released. I have to reboot my machine after some numbers of training to release those memory.</p>\n<p>I use the sample code( tensorflow/models/rnn/translate python translate.py) to train the model.</p>\n<h3>Environment info</h3>\n<p>Operating System: Ubuntu 14.04.4 LTS</p>\n<p>tensorflow version: r.0.10</p>\n<p>CUDA version: libcudnn.so.4.0<br>\nIf installed from binary pip package, provide:</p>\n<h3>What have you tried?</h3>\n<ol>\n<li></li>\n</ol>\n<p>Add a maximum step number to terminate training normally.</p>\n<ol>\n<li>\n<p>replace</p>\n<p>with tf.Session() as sess:</p>\n</li>\n</ol>\n<p>with the following code:</p>\n<p>config = tf.ConfigProto()<br>\nconfig.gpu_options.allow_growth=True<br>\nsess = tf.Session(config=config)</p>\n<p>with tf.Graph().as_default(),sess:</p>\n<ol>\n<li>close the session after training<br>\nsess.close()<br>\ndel sess</li>\n<li>the version of my nvidia driver is 352.79 now.<br>\nI will update it to the latest version next week.</li>\n</ol>\n<p>I have no idea what to do now.</p>\n<p>Thanks!<br>\nBest,<br>\nxiaorongfan</p>", "body_text": "Hi all,\nI started to use tensorflow one month ago. I briefly use it to train neural machine translation models.\nI find that after several times of training,  there were a huge amount of memory not released. I have to reboot my machine after some numbers of training to release those memory.\nI use the sample code( tensorflow/models/rnn/translate python translate.py) to train the model.\nEnvironment info\nOperating System: Ubuntu 14.04.4 LTS\ntensorflow version: r.0.10\nCUDA version: libcudnn.so.4.0\nIf installed from binary pip package, provide:\nWhat have you tried?\n\n\n\nAdd a maximum step number to terminate training normally.\n\n\nreplace\nwith tf.Session() as sess:\n\n\nwith the following code:\nconfig = tf.ConfigProto()\nconfig.gpu_options.allow_growth=True\nsess = tf.Session(config=config)\nwith tf.Graph().as_default(),sess:\n\nclose the session after training\nsess.close()\ndel sess\nthe version of my nvidia driver is 352.79 now.\nI will update it to the latest version next week.\n\nI have no idea what to do now.\nThanks!\nBest,\nxiaorongfan", "body": "Hi all,\n\nI started to use tensorflow one month ago. I briefly use it to train neural machine translation models.\nI find that after several times of training,  there were a huge amount of memory not released. I have to reboot my machine after some numbers of training to release those memory.\n\nI use the sample code( tensorflow/models/rnn/translate python translate.py) to train the model.\n### Environment info\n\nOperating System: Ubuntu 14.04.4 LTS\n\ntensorflow version: r.0.10\n\nCUDA version: libcudnn.so.4.0\nIf installed from binary pip package, provide:\n### What have you tried?\n\n1.\nAdd a maximum step number to terminate training normally.\n1. replace \n   \n   with tf.Session() as sess:\n\nwith the following code:\n\n  config = tf.ConfigProto()\n  config.gpu_options.allow_growth=True\n  sess = tf.Session(config=config)\n\n  with tf.Graph().as_default(),sess:\n1. close the session after training\n   sess.close()\n   del sess\n2. the version of my nvidia driver is 352.79 now.\n   I will update it to the latest version next week. \n\nI have no idea what to do now.\n\nThanks!\nBest,\nxiaorongfan\n"}
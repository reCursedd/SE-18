{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/278166041", "html_url": "https://github.com/tensorflow/tensorflow/pull/6864#issuecomment-278166041", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/6864", "id": 278166041, "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODE2NjA0MQ==", "user": {"login": "darrengarvey", "id": 260360, "node_id": "MDQ6VXNlcjI2MDM2MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/260360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darrengarvey", "html_url": "https://github.com/darrengarvey", "followers_url": "https://api.github.com/users/darrengarvey/followers", "following_url": "https://api.github.com/users/darrengarvey/following{/other_user}", "gists_url": "https://api.github.com/users/darrengarvey/gists{/gist_id}", "starred_url": "https://api.github.com/users/darrengarvey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darrengarvey/subscriptions", "organizations_url": "https://api.github.com/users/darrengarvey/orgs", "repos_url": "https://api.github.com/users/darrengarvey/repos", "events_url": "https://api.github.com/users/darrengarvey/events{/privacy}", "received_events_url": "https://api.github.com/users/darrengarvey/received_events", "type": "User", "site_admin": false}, "created_at": "2017-02-07T22:37:15Z", "updated_at": "2017-02-07T22:37:15Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The failure was certainly unrelated.</p>\n<p><div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/tensorflow/tensorflow/blob/58201a058853de647b37ddb0ccf63d89b2357f03/tensorflow/python/training/coordinator_test.py#L152\">tensorflow/tensorflow/python/training/coordinator_test.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n         Line 152\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/tensorflow/tensorflow/commit/58201a058853de647b37ddb0ccf63d89b2357f03\">58201a0</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L152\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"152\"></td>\n          <td id=\"LC152\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">testJoinRaiseReportExcInfo</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>): </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>That test looks like it'll fail under heavy load - ie. when starting a thread <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115886302\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/1\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/1/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/1\">#1</a> takes more than 40ms more than starting thread <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115894138\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/2\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/2/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/2\">#2</a>. I can't replicate the failure here under heavy load but I might try it again with some more exotic cgroup settings if I manage to get time, but that's not likely this week. The test just below looks equally susceptible to thread starting times.</p>\n<p>The same time mocking trick we did here should work for this test, but that's for another PR AFAICT.</p>", "body_text": "The failure was certainly unrelated.\n\n  \n    \n      tensorflow/tensorflow/python/training/coordinator_test.py\n    \n    \n         Line 152\n      in\n      58201a0\n    \n    \n    \n    \n\n        \n          \n           def testJoinRaiseReportExcInfo(self): \n        \n    \n  \n\n\nThat test looks like it'll fail under heavy load - ie. when starting a thread #1 takes more than 40ms more than starting thread #2. I can't replicate the failure here under heavy load but I might try it again with some more exotic cgroup settings if I manage to get time, but that's not likely this week. The test just below looks equally susceptible to thread starting times.\nThe same time mocking trick we did here should work for this test, but that's for another PR AFAICT.", "body": "The failure was certainly unrelated.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/58201a058853de647b37ddb0ccf63d89b2357f03/tensorflow/python/training/coordinator_test.py#L152\r\n\r\nThat test looks like it'll fail under heavy load - ie. when starting a thread #1 takes more than 40ms more than starting thread #2. I can't replicate the failure here under heavy load but I might try it again with some more exotic cgroup settings if I manage to get time, but that's not likely this week. The test just below looks equally susceptible to thread starting times.\r\n\r\nThe same time mocking trick we did here should work for this test, but that's for another PR AFAICT."}
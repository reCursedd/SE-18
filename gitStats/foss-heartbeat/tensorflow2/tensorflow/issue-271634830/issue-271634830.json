{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14302", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14302/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14302/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14302/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14302", "id": 271634830, "node_id": "MDU6SXNzdWUyNzE2MzQ4MzA=", "number": 14302, "title": "TF CNN benchmark resnet-50 not freeing up GPU memory after being terminated", "user": {"login": "keightyfive", "id": 17211644, "node_id": "MDQ6VXNlcjE3MjExNjQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/17211644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keightyfive", "html_url": "https://github.com/keightyfive", "followers_url": "https://api.github.com/users/keightyfive/followers", "following_url": "https://api.github.com/users/keightyfive/following{/other_user}", "gists_url": "https://api.github.com/users/keightyfive/gists{/gist_id}", "starred_url": "https://api.github.com/users/keightyfive/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keightyfive/subscriptions", "organizations_url": "https://api.github.com/users/keightyfive/orgs", "repos_url": "https://api.github.com/users/keightyfive/repos", "events_url": "https://api.github.com/users/keightyfive/events{/privacy}", "received_events_url": "https://api.github.com/users/keightyfive/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bignamehyp", "id": 3474655, "node_id": "MDQ6VXNlcjM0NzQ2NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3474655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bignamehyp", "html_url": "https://github.com/bignamehyp", "followers_url": "https://api.github.com/users/bignamehyp/followers", "following_url": "https://api.github.com/users/bignamehyp/following{/other_user}", "gists_url": "https://api.github.com/users/bignamehyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bignamehyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bignamehyp/subscriptions", "organizations_url": "https://api.github.com/users/bignamehyp/orgs", "repos_url": "https://api.github.com/users/bignamehyp/repos", "events_url": "https://api.github.com/users/bignamehyp/events{/privacy}", "received_events_url": "https://api.github.com/users/bignamehyp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2017-11-06T21:56:19Z", "updated_at": "2018-03-29T22:04:00Z", "closed_at": "2018-03-29T22:03:59Z", "author_association": "NONE", "body_html": "<p>Hi</p>\n<p>I've ran some of the cnn benchmarks on an cluster that uses SLURM, on a Nvidia XP. One of my jobs got stuck. When I cancelled the script, it seems not to free up the GPU memory anymore after that.<br>\ntotalMemory: 11.90GiB freeMemory: 365.94MiB</p>\n<p>Now I can't run any more scripts. How can I free up my GPU memory again?</p>\n<h3>System information</h3>\n<ul>\n<li><strong>Have I written custom code (as opposed to using a stock example script provided in TensorFlow)</strong>: cnn_benchmarks</li>\n<li><strong>OS Platform and Distribution (e.g., Linux Ubuntu 16.04)</strong>: Cluster node with amd cpu and NVidia XP</li>\n<li><strong>TensorFlow installed from (source or binary)</strong>: source</li>\n<li><strong>TensorFlow version (use command below)</strong>: 1.4</li>\n<li><strong>Python version</strong>: 2.7</li>\n<li><strong>Bazel version (if compiling from source)</strong>:</li>\n<li><strong>GCC/Compiler version (if compiling from source)</strong>: GCC version:  gcc version 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC)</li>\n<li><strong>CUDA/cuDNN version</strong>: Cuda8, Cudnn 6</li>\n<li><strong>GPU model and memory</strong>: Nvidia XP</li>\n<li><strong>Exact command to reproduce</strong>: python tf_cnn_benchmarks.py --model=resnet50 --num_gpus=1 --local_parameter_device=gpu</li>\n</ul>\n<h3>Source code / logs</h3>\n<p>2017-11-06 21:45:35.243801: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX FMA<br>\n2017-11-06 21:45:35.832723: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties:<br>\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582<br>\npciBusID: 0000:41:00.0<br>\ntotalMemory: 11.90GiB freeMemory: 365.94MiB<br>\n2017-11-06 21:45:35.832780: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: TITAN Xp, pci bus id: 0000:41:00.0, compute capability: 6.1)<br>\n2017-11-06 21:45:46.271894: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (GPU_0_bfc) ran out of memory trying to allocate 144.00MiB.  Current allocation summary follows.<br>\n2017-11-06 21:45:46.271976: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (256): \tTotal Chunks: 18, Chunks in use: 18. 4.5KiB allocated for chunks. 4.5KiB in use in bin. 576B client-requested in use in bin.<br>\n2017-11-06 21:45:46.271992: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (512): \tTotal Chunks: 2, Chunks in use: 2. 1.5KiB allocated for chunks. 1.5KiB in use in bin. 1.5KiB client-requested in use in bin.<br>\n2017-11-06 21:45:46.272005: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1024): \tTotal Chunks: 7, Chunks in use: 7. 9.2KiB allocated for chunks. 9.2KiB in use in bin. 9.0KiB client-requested in use in bin.<br>\n2017-11-06 21:45:46.272016: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272029: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4096): \tTotal Chunks: 1, Chunks in use: 1. 4.0KiB allocated for chunks. 4.0KiB in use in bin. 3.9KiB client-requested in use in bin.<br>\n2017-11-06 21:45:46.272040: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272052: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16384): \tTotal Chunks: 2, Chunks in use: 2. 32.0KiB allocated for chunks. 32.0KiB in use in bin. 32.0KiB client-requested in use in bin.<br>\n2017-11-06 21:45:46.272063: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272076: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (65536): \tTotal Chunks: 1, Chunks in use: 1. 90.8KiB allocated for chunks. 90.8KiB in use in bin. 90.8KiB client-requested in use in bin.<br>\n2017-11-06 21:45:46.272087: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272097: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272108: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272120: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1048576): \tTotal Chunks: 1, Chunks in use: 1. 1.17MiB allocated for chunks. 1.17MiB in use in bin. 1.17MiB client-requested in use in bin.<br>\n2017-11-06 21:45:46.272131: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2097152): \tTotal Chunks: 2, Chunks in use: 2. 5.91MiB allocated for chunks. 5.91MiB in use in bin. 5.91MiB client-requested in use in bin.<br>\n2017-11-06 21:45:46.272143: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4194304): \tTotal Chunks: 1, Chunks in use: 1. 5.06MiB allocated for chunks. 5.06MiB in use in bin. 5.06MiB client-requested in use in bin.<br>\n2017-11-06 21:45:46.272153: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272164: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272176: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272186: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272197: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (134217728): \tTotal Chunks: 1, Chunks in use: 0. 128.66MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272208: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:46.272220: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin for 144.00MiB was 128.00MiB, Chunk State:<br>\n2017-11-06 21:45:46.272296: I tensorflow/core/common_runtime/bfc_allocator.cc:649]   Size: 128.66MiB | Requested Size: 0B | in_use: 0, prev:   Size: 1.0KiB | Requested Size: 1.0KiB | in_use: 1<br>\n2017-11-06 21:45:46.272309: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400000 of size 1280<br>\n2017-11-06 21:45:46.272318: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400500 of size 256<br>\n2017-11-06 21:45:46.272326: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400600 of size 256<br>\n2017-11-06 21:45:46.272341: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400700 of size 256<br>\n2017-11-06 21:45:46.272350: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400800 of size 256<br>\n2017-11-06 21:45:46.272358: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400900 of size 256<br>\n2017-11-06 21:45:46.272368: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400a00 of size 768<br>\n2017-11-06 21:45:46.272376: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400d00 of size 256<br>\n2017-11-06 21:45:46.272385: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400e00 of size 256<br>\n2017-11-06 21:45:46.272393: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400f00 of size 1536<br>\n2017-11-06 21:45:46.272402: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401500 of size 256<br>\n2017-11-06 21:45:46.272411: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401600 of size 256<br>\n2017-11-06 21:45:46.272420: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401700 of size 1536<br>\n2017-11-06 21:45:46.272428: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401d00 of size 256<br>\n2017-11-06 21:45:46.272438: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401e00 of size 256<br>\n2017-11-06 21:45:46.272447: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401f00 of size 1024<br>\n2017-11-06 21:45:46.272455: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402300 of size 256<br>\n2017-11-06 21:45:46.272465: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402400 of size 256<br>\n2017-11-06 21:45:46.272474: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402500 of size 16384<br>\n2017-11-06 21:45:46.272482: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406500 of size 256<br>\n2017-11-06 21:45:46.272491: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406600 of size 256<br>\n2017-11-06 21:45:46.272499: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406700 of size 16384<br>\n2017-11-06 21:45:46.272507: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a700 of size 256<br>\n2017-11-06 21:45:46.272516: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a800 of size 256<br>\n2017-11-06 21:45:46.272528: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a900 of size 4096<br>\n2017-11-06 21:45:46.272537: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40b900 of size 92928<br>\n2017-11-06 21:45:46.272546: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422400 of size 256<br>\n2017-11-06 21:45:46.272554: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422500 of size 1228800<br>\n2017-11-06 21:45:46.272562: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e500 of size 768<br>\n2017-11-06 21:45:46.272571: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e800 of size 2654208<br>\n2017-11-06 21:45:46.272580: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6800 of size 1536<br>\n2017-11-06 21:45:46.272589: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6e00 of size 5308416<br>\n2017-11-06 21:45:46.272597: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece6e00 of size 1536<br>\n2017-11-06 21:45:46.272606: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece7400 of size 3538944<br>\n2017-11-06 21:45:46.272614: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047400 of size 1024<br>\n2017-11-06 21:45:46.272623: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020f047800 of size 134907904<br>\n2017-11-06 21:45:46.272631: I tensorflow/core/common_runtime/bfc_allocator.cc:676]      Summary of in-use Chunks by size:<br>\n2017-11-06 21:45:46.272645: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 18 Chunks of size 256 totalling 4.5KiB<br>\n2017-11-06 21:45:46.272655: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 768 totalling 1.5KiB<br>\n2017-11-06 21:45:46.272665: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 1024 totalling 2.0KiB<br>\n2017-11-06 21:45:46.272675: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1280 totalling 1.2KiB<br>\n2017-11-06 21:45:46.272686: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 1536 totalling 6.0KiB<br>\n2017-11-06 21:45:46.272695: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 4096 totalling 4.0KiB<br>\n2017-11-06 21:45:46.272706: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 16384 totalling 32.0KiB<br>\n2017-11-06 21:45:46.272716: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 92928 totalling 90.8KiB<br>\n2017-11-06 21:45:46.272725: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1228800 totalling 1.17MiB<br>\n2017-11-06 21:45:46.272735: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 2654208 totalling 2.53MiB<br>\n2017-11-06 21:45:46.272749: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 3538944 totalling 3.38MiB<br>\n2017-11-06 21:45:46.272760: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 5308416 totalling 5.06MiB<br>\n2017-11-06 21:45:46.272772: I tensorflow/core/common_runtime/bfc_allocator.cc:683] Sum Total of in-use chunks: 12.28MiB<br>\n2017-11-06 21:45:46.272786: I tensorflow/core/common_runtime/bfc_allocator.cc:685] Stats:<br>\nLimit:                   147783680<br>\nInUse:                    12875776<br>\nMaxInUse:                 12875776<br>\nNumAllocs:                      35<br>\nMaxAllocSize:              5308416</p>\n<p>2017-11-06 21:45:46.272799: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *********___________________________________________________________________________________________<br>\n2017-11-06 21:45:46.272823: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[9216,4096]<br>\n2017-11-06 21:45:56.273596: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (GPU_0_bfc) ran out of memory trying to allocate 64.00MiB.  Current allocation summary follows.<br>\n2017-11-06 21:45:56.273635: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (256): \tTotal Chunks: 18, Chunks in use: 18. 4.5KiB allocated for chunks. 4.5KiB in use in bin. 576B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273649: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (512): \tTotal Chunks: 2, Chunks in use: 2. 1.5KiB allocated for chunks. 1.5KiB in use in bin. 1.5KiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273661: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1024): \tTotal Chunks: 7, Chunks in use: 7. 9.2KiB allocated for chunks. 9.2KiB in use in bin. 9.0KiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273672: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273684: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4096): \tTotal Chunks: 2, Chunks in use: 2. 8.0KiB allocated for chunks. 8.0KiB in use in bin. 7.8KiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273695: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273707: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16384): \tTotal Chunks: 4, Chunks in use: 4. 64.0KiB allocated for chunks. 64.0KiB in use in bin. 64.0KiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273718: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273731: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (65536): \tTotal Chunks: 2, Chunks in use: 1. 181.5KiB allocated for chunks. 90.8KiB in use in bin. 90.8KiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273742: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273754: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273765: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273777: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1048576): \tTotal Chunks: 2, Chunks in use: 1. 2.34MiB allocated for chunks. 1.17MiB in use in bin. 1.17MiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273788: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2097152): \tTotal Chunks: 3, Chunks in use: 1. 8.44MiB allocated for chunks. 2.53MiB in use in bin. 2.53MiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273800: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4194304): \tTotal Chunks: 2, Chunks in use: 2. 10.12MiB allocated for chunks. 10.12MiB in use in bin. 8.44MiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273813: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8388608): \tTotal Chunks: 1, Chunks in use: 1. 15.64MiB allocated for chunks. 15.64MiB in use in bin. 15.64MiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273823: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273834: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (33554432): \tTotal Chunks: 1, Chunks in use: 0. 40.13MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273852: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (67108864): \tTotal Chunks: 1, Chunks in use: 1. 64.00MiB allocated for chunks. 64.00MiB in use in bin. 64.00MiB client-requested in use in bin.<br>\n2017-11-06 21:45:56.273863: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273874: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.<br>\n2017-11-06 21:45:56.273884: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin for 64.00MiB was 64.00MiB, Chunk State:<br>\n2017-11-06 21:45:56.273895: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400000 of size 1280<br>\n2017-11-06 21:45:56.273904: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400500 of size 256<br>\n2017-11-06 21:45:56.273913: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400600 of size 256<br>\n2017-11-06 21:45:56.273921: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400700 of size 256<br>\n2017-11-06 21:45:56.273929: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400800 of size 256<br>\n2017-11-06 21:45:56.273937: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400900 of size 256<br>\n2017-11-06 21:45:56.273946: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400a00 of size 768<br>\n2017-11-06 21:45:56.273955: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400d00 of size 256<br>\n2017-11-06 21:45:56.273963: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400e00 of size 256<br>\n2017-11-06 21:45:56.273972: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400f00 of size 1536<br>\n2017-11-06 21:45:56.273981: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401500 of size 256<br>\n2017-11-06 21:45:56.273989: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401600 of size 256<br>\n2017-11-06 21:45:56.273997: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401700 of size 1536<br>\n2017-11-06 21:45:56.274005: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401d00 of size 256<br>\n2017-11-06 21:45:56.274014: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401e00 of size 256<br>\n2017-11-06 21:45:56.274029: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401f00 of size 1024<br>\n2017-11-06 21:45:56.274038: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402300 of size 256<br>\n2017-11-06 21:45:56.274046: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402400 of size 256<br>\n2017-11-06 21:45:56.274056: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402500 of size 16384<br>\n2017-11-06 21:45:56.274065: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406500 of size 256<br>\n2017-11-06 21:45:56.274074: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406600 of size 256<br>\n2017-11-06 21:45:56.274084: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406700 of size 16384<br>\n2017-11-06 21:45:56.274093: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a700 of size 256<br>\n2017-11-06 21:45:56.274101: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a800 of size 256<br>\n2017-11-06 21:45:56.274109: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a900 of size 4096<br>\n2017-11-06 21:45:56.274117: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422400 of size 256<br>\n2017-11-06 21:45:56.274126: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e500 of size 768<br>\n2017-11-06 21:45:56.274138: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6800 of size 1536<br>\n2017-11-06 21:45:56.274149: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6e00 of size 5308416<br>\n2017-11-06 21:45:56.274157: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece6e00 of size 1536<br>\n2017-11-06 21:45:56.274166: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047400 of size 1024<br>\n2017-11-06 21:45:56.274174: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047800 of size 16384<br>\n2017-11-06 21:45:56.274182: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f04b800 of size 67108864<br>\n2017-11-06 21:45:56.274191: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021304b800 of size 16384<br>\n2017-11-06 21:45:56.274199: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021304f800 of size 16400384<br>\n2017-11-06 21:45:56.274207: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10213ff3800 of size 4096<br>\n2017-11-06 21:45:56.274216: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10213ff4800 of size 92928<br>\n2017-11-06 21:45:56.274225: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021400b300 of size 1228800<br>\n2017-11-06 21:45:56.274299: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10214137300 of size 2654208<br>\n2017-11-06 21:45:56.274308: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x102143bf300 of size 5308416<br>\n2017-11-06 21:45:56.274317: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e40b900 of size 92928<br>\n2017-11-06 21:45:56.274325: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e422500 of size 1228800<br>\n2017-11-06 21:45:56.274333: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e54e800 of size 2654208<br>\n2017-11-06 21:45:56.274342: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020ece7400 of size 3538944<br>\n2017-11-06 21:45:56.274351: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x102148cf300 of size 42077440<br>\n2017-11-06 21:45:56.274359: I tensorflow/core/common_runtime/bfc_allocator.cc:676]      Summary of in-use Chunks by size:<br>\n2017-11-06 21:45:56.274369: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 18 Chunks of size 256 totalling 4.5KiB<br>\n2017-11-06 21:45:56.274381: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 768 totalling 1.5KiB<br>\n2017-11-06 21:45:56.274391: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 1024 totalling 2.0KiB<br>\n2017-11-06 21:45:56.274401: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1280 totalling 1.2KiB<br>\n2017-11-06 21:45:56.274412: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 1536 totalling 6.0KiB<br>\n2017-11-06 21:45:56.274422: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 4096 totalling 8.0KiB<br>\n2017-11-06 21:45:56.274433: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 16384 totalling 64.0KiB<br>\n2017-11-06 21:45:56.274443: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 92928 totalling 90.8KiB<br>\n2017-11-06 21:45:56.274454: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1228800 totalling 1.17MiB<br>\n2017-11-06 21:45:56.274463: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 2654208 totalling 2.53MiB<br>\n2017-11-06 21:45:56.274474: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 5308416 totalling 10.12MiB<br>\n2017-11-06 21:45:56.274489: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 16400384 totalling 15.64MiB<br>\n2017-11-06 21:45:56.274500: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 67108864 totalling 64.00MiB<br>\n2017-11-06 21:45:56.274510: I tensorflow/core/common_runtime/bfc_allocator.cc:683] Sum Total of in-use chunks: 93.64MiB<br>\n2017-11-06 21:45:56.274522: I tensorflow/core/common_runtime/bfc_allocator.cc:685] Stats:<br>\nLimit:                   147783680<br>\nInUse:                    98191360<br>\nMaxInUse:                101730304<br>\nNumAllocs:                      45<br>\nMaxAllocSize:             67108864</p>\n<h1>2017-11-06 21:45:56.274536: W tensorflow/core/common_runtime/bfc_allocator.cc:277] <em><em>*****</em></em>***************************************************************____________________________<br>\n2017-11-06 21:45:56.274550: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[4096,4096]<br>\nTensorFlow:  1.4<br>\nModel:       alexnet<br>\nMode:        training<br>\nSingleSess:  False<br>\nBatch size:  32 global<br>\n32 per device<br>\nDevices:     ['/gpu:0']<br>\nData format: NCHW<br>\nOptimizer:   sgd<br>\nVariables:   parameter_server</h1>\n<p>Generating model<br>\nTraceback (most recent call last):<br>\nFile \"tf_cnn_benchmarks.py\", line 46, in <br>\ntf.app.run()<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"tf_cnn_benchmarks.py\", line 42, in main<br>\nbench.run()<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 892, in run<br>\nreturn self._benchmark_cnn()<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1068, in _benchmark_cnn<br>\nstart_standard_services=start_standard_services) as sess:<br>\nFile \"/usr/lib64/python2.7/contextlib.py\", line 17, in <strong>enter</strong><br>\nreturn self.gen.next()<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 964, in managed_session<br>\nself.stop(close_summary_writer=close_summary_writer)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 792, in stop<br>\nstop_grace_period_secs=self._stop_grace_secs)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join<br>\nsix.reraise(*self._exc_info_to_raise)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 953, in managed_session<br>\nstart_standard_services=start_standard_services)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 708, in prepare_or_wait_for_session<br>\ninit_feed_dict=self._init_feed_dict, init_fn=self._init_fn)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/session_manager.py\", line 279, in prepare_session<br>\nsess.run(init_op, feed_dict=init_feed_dict)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 889, in run<br>\nrun_metadata_ptr)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1120, in _run<br>\nfeed_dict_tensor, options, run_metadata)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1317, in _do_run<br>\noptions, run_metadata)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1336, in _do_call<br>\nraise type(e)(node_def, op, message)<br>\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[9216,4096]<br>\n[[Node: v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal = TruncatedNormal<a href=\"v/cg/affine0/weights/Initializer/truncated_normal/shape\">T=DT_INT32, _class=[\"loc:@v/cg/affine0/weights\"], dtype=DT_FLOAT, seed=1234, seed2=149, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"</a>]]</p>\n<p>Caused by op u'v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal', defined at:<br>\nFile \"tf_cnn_benchmarks.py\", line 46, in <br>\ntf.app.run()<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run<br>\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))<br>\nFile \"tf_cnn_benchmarks.py\", line 42, in main<br>\nbench.run()<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 892, in run<br>\nreturn self._benchmark_cnn()<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 986, in _benchmark_cnn<br>\n(image_producer_ops, enqueue_ops, fetches) = self._build_model()<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1236, in _build_model<br>\ngpu_compute_stage_ops, gpu_grad_stage_ops)<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1524, in add_forward_pass_and_gradients<br>\nself.model.add_inference(network)<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/models/alexnet_model.py\", line 45, in add_inference<br>\ncnn.affine(4096)<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 311, in affine<br>\ninitializer=tf.truncated_normal_initializer(stddev=stddev))<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 117, in get_variable<br>\nvar = tf.get_variable(name, shape, dtype, *args, **kwargs)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1203, in get_variable<br>\nconstraint=constraint)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1092, in get_variable<br>\nconstraint=constraint)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 417, in get_variable<br>\nreturn custom_getter(**custom_getter_kwargs)<br>\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 86, in inner_custom_getter<br>\nvar = getter(*args, **kwargs)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 394, in _true_getter<br>\nuse_resource=use_resource, constraint=constraint)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 805, in _get_single_variable<br>\nconstraint=constraint)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 213, in <strong>init</strong><br>\nconstraint=constraint)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 303, in _init_from_args<br>\ninitial_value(), name=\"initial_value\", dtype=dtype)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 779, in <br>\nshape.as_list(), dtype=dtype, partition_info=partition_info)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/init_ops.py\", line 309, in <strong>call</strong><br>\nshape, self.mean, self.stddev, dtype, seed=self.seed)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/random_ops.py\", line 172, in truncated_normal<br>\nshape_tensor, dtype, seed=seed1, seed2=seed2)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/gen_random_ops.py\", line 588, in _truncated_normal<br>\nname=name)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper<br>\nop_def=op_def)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2956, in create_op<br>\nop_def=op_def)<br>\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1470, in <strong>init</strong><br>\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access</p>\n<p>ResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[9216,4096]<br>\n[[Node: v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal = TruncatedNormal<a href=\"v/cg/affine0/weights/Initializer/truncated_normal/shape\">T=DT_INT32, _class=[\"loc:@v/cg/affine0/weights\"], dtype=DT_FLOAT, seed=1234, seed2=149, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"</a>]]</p>\n<p>srun: error: gpu08: task 0: Exited with exit code 1</p>", "body_text": "Hi\nI've ran some of the cnn benchmarks on an cluster that uses SLURM, on a Nvidia XP. One of my jobs got stuck. When I cancelled the script, it seems not to free up the GPU memory anymore after that.\ntotalMemory: 11.90GiB freeMemory: 365.94MiB\nNow I can't run any more scripts. How can I free up my GPU memory again?\nSystem information\n\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): cnn_benchmarks\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Cluster node with amd cpu and NVidia XP\nTensorFlow installed from (source or binary): source\nTensorFlow version (use command below): 1.4\nPython version: 2.7\nBazel version (if compiling from source):\nGCC/Compiler version (if compiling from source): GCC version:  gcc version 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC)\nCUDA/cuDNN version: Cuda8, Cudnn 6\nGPU model and memory: Nvidia XP\nExact command to reproduce: python tf_cnn_benchmarks.py --model=resnet50 --num_gpus=1 --local_parameter_device=gpu\n\nSource code / logs\n2017-11-06 21:45:35.243801: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX FMA\n2017-11-06 21:45:35.832723: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties:\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\npciBusID: 0000:41:00.0\ntotalMemory: 11.90GiB freeMemory: 365.94MiB\n2017-11-06 21:45:35.832780: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: TITAN Xp, pci bus id: 0000:41:00.0, compute capability: 6.1)\n2017-11-06 21:45:46.271894: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (GPU_0_bfc) ran out of memory trying to allocate 144.00MiB.  Current allocation summary follows.\n2017-11-06 21:45:46.271976: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (256): \tTotal Chunks: 18, Chunks in use: 18. 4.5KiB allocated for chunks. 4.5KiB in use in bin. 576B client-requested in use in bin.\n2017-11-06 21:45:46.271992: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (512): \tTotal Chunks: 2, Chunks in use: 2. 1.5KiB allocated for chunks. 1.5KiB in use in bin. 1.5KiB client-requested in use in bin.\n2017-11-06 21:45:46.272005: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1024): \tTotal Chunks: 7, Chunks in use: 7. 9.2KiB allocated for chunks. 9.2KiB in use in bin. 9.0KiB client-requested in use in bin.\n2017-11-06 21:45:46.272016: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272029: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4096): \tTotal Chunks: 1, Chunks in use: 1. 4.0KiB allocated for chunks. 4.0KiB in use in bin. 3.9KiB client-requested in use in bin.\n2017-11-06 21:45:46.272040: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272052: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16384): \tTotal Chunks: 2, Chunks in use: 2. 32.0KiB allocated for chunks. 32.0KiB in use in bin. 32.0KiB client-requested in use in bin.\n2017-11-06 21:45:46.272063: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272076: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (65536): \tTotal Chunks: 1, Chunks in use: 1. 90.8KiB allocated for chunks. 90.8KiB in use in bin. 90.8KiB client-requested in use in bin.\n2017-11-06 21:45:46.272087: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272097: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272108: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272120: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1048576): \tTotal Chunks: 1, Chunks in use: 1. 1.17MiB allocated for chunks. 1.17MiB in use in bin. 1.17MiB client-requested in use in bin.\n2017-11-06 21:45:46.272131: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2097152): \tTotal Chunks: 2, Chunks in use: 2. 5.91MiB allocated for chunks. 5.91MiB in use in bin. 5.91MiB client-requested in use in bin.\n2017-11-06 21:45:46.272143: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4194304): \tTotal Chunks: 1, Chunks in use: 1. 5.06MiB allocated for chunks. 5.06MiB in use in bin. 5.06MiB client-requested in use in bin.\n2017-11-06 21:45:46.272153: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272164: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272176: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272186: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272197: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (134217728): \tTotal Chunks: 1, Chunks in use: 0. 128.66MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272208: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:46.272220: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin for 144.00MiB was 128.00MiB, Chunk State:\n2017-11-06 21:45:46.272296: I tensorflow/core/common_runtime/bfc_allocator.cc:649]   Size: 128.66MiB | Requested Size: 0B | in_use: 0, prev:   Size: 1.0KiB | Requested Size: 1.0KiB | in_use: 1\n2017-11-06 21:45:46.272309: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400000 of size 1280\n2017-11-06 21:45:46.272318: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400500 of size 256\n2017-11-06 21:45:46.272326: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400600 of size 256\n2017-11-06 21:45:46.272341: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400700 of size 256\n2017-11-06 21:45:46.272350: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400800 of size 256\n2017-11-06 21:45:46.272358: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400900 of size 256\n2017-11-06 21:45:46.272368: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400a00 of size 768\n2017-11-06 21:45:46.272376: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400d00 of size 256\n2017-11-06 21:45:46.272385: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400e00 of size 256\n2017-11-06 21:45:46.272393: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400f00 of size 1536\n2017-11-06 21:45:46.272402: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401500 of size 256\n2017-11-06 21:45:46.272411: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401600 of size 256\n2017-11-06 21:45:46.272420: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401700 of size 1536\n2017-11-06 21:45:46.272428: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401d00 of size 256\n2017-11-06 21:45:46.272438: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401e00 of size 256\n2017-11-06 21:45:46.272447: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401f00 of size 1024\n2017-11-06 21:45:46.272455: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402300 of size 256\n2017-11-06 21:45:46.272465: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402400 of size 256\n2017-11-06 21:45:46.272474: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402500 of size 16384\n2017-11-06 21:45:46.272482: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406500 of size 256\n2017-11-06 21:45:46.272491: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406600 of size 256\n2017-11-06 21:45:46.272499: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406700 of size 16384\n2017-11-06 21:45:46.272507: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a700 of size 256\n2017-11-06 21:45:46.272516: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a800 of size 256\n2017-11-06 21:45:46.272528: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a900 of size 4096\n2017-11-06 21:45:46.272537: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40b900 of size 92928\n2017-11-06 21:45:46.272546: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422400 of size 256\n2017-11-06 21:45:46.272554: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422500 of size 1228800\n2017-11-06 21:45:46.272562: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e500 of size 768\n2017-11-06 21:45:46.272571: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e800 of size 2654208\n2017-11-06 21:45:46.272580: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6800 of size 1536\n2017-11-06 21:45:46.272589: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6e00 of size 5308416\n2017-11-06 21:45:46.272597: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece6e00 of size 1536\n2017-11-06 21:45:46.272606: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece7400 of size 3538944\n2017-11-06 21:45:46.272614: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047400 of size 1024\n2017-11-06 21:45:46.272623: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020f047800 of size 134907904\n2017-11-06 21:45:46.272631: I tensorflow/core/common_runtime/bfc_allocator.cc:676]      Summary of in-use Chunks by size:\n2017-11-06 21:45:46.272645: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 18 Chunks of size 256 totalling 4.5KiB\n2017-11-06 21:45:46.272655: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 768 totalling 1.5KiB\n2017-11-06 21:45:46.272665: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 1024 totalling 2.0KiB\n2017-11-06 21:45:46.272675: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1280 totalling 1.2KiB\n2017-11-06 21:45:46.272686: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 1536 totalling 6.0KiB\n2017-11-06 21:45:46.272695: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 4096 totalling 4.0KiB\n2017-11-06 21:45:46.272706: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 16384 totalling 32.0KiB\n2017-11-06 21:45:46.272716: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 92928 totalling 90.8KiB\n2017-11-06 21:45:46.272725: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1228800 totalling 1.17MiB\n2017-11-06 21:45:46.272735: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 2654208 totalling 2.53MiB\n2017-11-06 21:45:46.272749: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 3538944 totalling 3.38MiB\n2017-11-06 21:45:46.272760: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 5308416 totalling 5.06MiB\n2017-11-06 21:45:46.272772: I tensorflow/core/common_runtime/bfc_allocator.cc:683] Sum Total of in-use chunks: 12.28MiB\n2017-11-06 21:45:46.272786: I tensorflow/core/common_runtime/bfc_allocator.cc:685] Stats:\nLimit:                   147783680\nInUse:                    12875776\nMaxInUse:                 12875776\nNumAllocs:                      35\nMaxAllocSize:              5308416\n2017-11-06 21:45:46.272799: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *********___________________________________________________________________________________________\n2017-11-06 21:45:46.272823: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[9216,4096]\n2017-11-06 21:45:56.273596: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (GPU_0_bfc) ran out of memory trying to allocate 64.00MiB.  Current allocation summary follows.\n2017-11-06 21:45:56.273635: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (256): \tTotal Chunks: 18, Chunks in use: 18. 4.5KiB allocated for chunks. 4.5KiB in use in bin. 576B client-requested in use in bin.\n2017-11-06 21:45:56.273649: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (512): \tTotal Chunks: 2, Chunks in use: 2. 1.5KiB allocated for chunks. 1.5KiB in use in bin. 1.5KiB client-requested in use in bin.\n2017-11-06 21:45:56.273661: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1024): \tTotal Chunks: 7, Chunks in use: 7. 9.2KiB allocated for chunks. 9.2KiB in use in bin. 9.0KiB client-requested in use in bin.\n2017-11-06 21:45:56.273672: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273684: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4096): \tTotal Chunks: 2, Chunks in use: 2. 8.0KiB allocated for chunks. 8.0KiB in use in bin. 7.8KiB client-requested in use in bin.\n2017-11-06 21:45:56.273695: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273707: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16384): \tTotal Chunks: 4, Chunks in use: 4. 64.0KiB allocated for chunks. 64.0KiB in use in bin. 64.0KiB client-requested in use in bin.\n2017-11-06 21:45:56.273718: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273731: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (65536): \tTotal Chunks: 2, Chunks in use: 1. 181.5KiB allocated for chunks. 90.8KiB in use in bin. 90.8KiB client-requested in use in bin.\n2017-11-06 21:45:56.273742: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273754: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273765: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273777: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1048576): \tTotal Chunks: 2, Chunks in use: 1. 2.34MiB allocated for chunks. 1.17MiB in use in bin. 1.17MiB client-requested in use in bin.\n2017-11-06 21:45:56.273788: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2097152): \tTotal Chunks: 3, Chunks in use: 1. 8.44MiB allocated for chunks. 2.53MiB in use in bin. 2.53MiB client-requested in use in bin.\n2017-11-06 21:45:56.273800: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4194304): \tTotal Chunks: 2, Chunks in use: 2. 10.12MiB allocated for chunks. 10.12MiB in use in bin. 8.44MiB client-requested in use in bin.\n2017-11-06 21:45:56.273813: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8388608): \tTotal Chunks: 1, Chunks in use: 1. 15.64MiB allocated for chunks. 15.64MiB in use in bin. 15.64MiB client-requested in use in bin.\n2017-11-06 21:45:56.273823: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273834: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (33554432): \tTotal Chunks: 1, Chunks in use: 0. 40.13MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273852: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (67108864): \tTotal Chunks: 1, Chunks in use: 1. 64.00MiB allocated for chunks. 64.00MiB in use in bin. 64.00MiB client-requested in use in bin.\n2017-11-06 21:45:56.273863: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273874: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\n2017-11-06 21:45:56.273884: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin for 64.00MiB was 64.00MiB, Chunk State:\n2017-11-06 21:45:56.273895: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400000 of size 1280\n2017-11-06 21:45:56.273904: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400500 of size 256\n2017-11-06 21:45:56.273913: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400600 of size 256\n2017-11-06 21:45:56.273921: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400700 of size 256\n2017-11-06 21:45:56.273929: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400800 of size 256\n2017-11-06 21:45:56.273937: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400900 of size 256\n2017-11-06 21:45:56.273946: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400a00 of size 768\n2017-11-06 21:45:56.273955: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400d00 of size 256\n2017-11-06 21:45:56.273963: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400e00 of size 256\n2017-11-06 21:45:56.273972: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400f00 of size 1536\n2017-11-06 21:45:56.273981: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401500 of size 256\n2017-11-06 21:45:56.273989: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401600 of size 256\n2017-11-06 21:45:56.273997: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401700 of size 1536\n2017-11-06 21:45:56.274005: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401d00 of size 256\n2017-11-06 21:45:56.274014: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401e00 of size 256\n2017-11-06 21:45:56.274029: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401f00 of size 1024\n2017-11-06 21:45:56.274038: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402300 of size 256\n2017-11-06 21:45:56.274046: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402400 of size 256\n2017-11-06 21:45:56.274056: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402500 of size 16384\n2017-11-06 21:45:56.274065: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406500 of size 256\n2017-11-06 21:45:56.274074: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406600 of size 256\n2017-11-06 21:45:56.274084: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406700 of size 16384\n2017-11-06 21:45:56.274093: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a700 of size 256\n2017-11-06 21:45:56.274101: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a800 of size 256\n2017-11-06 21:45:56.274109: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a900 of size 4096\n2017-11-06 21:45:56.274117: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422400 of size 256\n2017-11-06 21:45:56.274126: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e500 of size 768\n2017-11-06 21:45:56.274138: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6800 of size 1536\n2017-11-06 21:45:56.274149: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6e00 of size 5308416\n2017-11-06 21:45:56.274157: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece6e00 of size 1536\n2017-11-06 21:45:56.274166: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047400 of size 1024\n2017-11-06 21:45:56.274174: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047800 of size 16384\n2017-11-06 21:45:56.274182: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f04b800 of size 67108864\n2017-11-06 21:45:56.274191: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021304b800 of size 16384\n2017-11-06 21:45:56.274199: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021304f800 of size 16400384\n2017-11-06 21:45:56.274207: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10213ff3800 of size 4096\n2017-11-06 21:45:56.274216: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10213ff4800 of size 92928\n2017-11-06 21:45:56.274225: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021400b300 of size 1228800\n2017-11-06 21:45:56.274299: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10214137300 of size 2654208\n2017-11-06 21:45:56.274308: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x102143bf300 of size 5308416\n2017-11-06 21:45:56.274317: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e40b900 of size 92928\n2017-11-06 21:45:56.274325: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e422500 of size 1228800\n2017-11-06 21:45:56.274333: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e54e800 of size 2654208\n2017-11-06 21:45:56.274342: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020ece7400 of size 3538944\n2017-11-06 21:45:56.274351: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x102148cf300 of size 42077440\n2017-11-06 21:45:56.274359: I tensorflow/core/common_runtime/bfc_allocator.cc:676]      Summary of in-use Chunks by size:\n2017-11-06 21:45:56.274369: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 18 Chunks of size 256 totalling 4.5KiB\n2017-11-06 21:45:56.274381: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 768 totalling 1.5KiB\n2017-11-06 21:45:56.274391: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 1024 totalling 2.0KiB\n2017-11-06 21:45:56.274401: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1280 totalling 1.2KiB\n2017-11-06 21:45:56.274412: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 1536 totalling 6.0KiB\n2017-11-06 21:45:56.274422: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 4096 totalling 8.0KiB\n2017-11-06 21:45:56.274433: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 16384 totalling 64.0KiB\n2017-11-06 21:45:56.274443: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 92928 totalling 90.8KiB\n2017-11-06 21:45:56.274454: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1228800 totalling 1.17MiB\n2017-11-06 21:45:56.274463: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 2654208 totalling 2.53MiB\n2017-11-06 21:45:56.274474: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 5308416 totalling 10.12MiB\n2017-11-06 21:45:56.274489: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 16400384 totalling 15.64MiB\n2017-11-06 21:45:56.274500: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 67108864 totalling 64.00MiB\n2017-11-06 21:45:56.274510: I tensorflow/core/common_runtime/bfc_allocator.cc:683] Sum Total of in-use chunks: 93.64MiB\n2017-11-06 21:45:56.274522: I tensorflow/core/common_runtime/bfc_allocator.cc:685] Stats:\nLimit:                   147783680\nInUse:                    98191360\nMaxInUse:                101730304\nNumAllocs:                      45\nMaxAllocSize:             67108864\n2017-11-06 21:45:56.274536: W tensorflow/core/common_runtime/bfc_allocator.cc:277] ********************************************************************____________________________\n2017-11-06 21:45:56.274550: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[4096,4096]\nTensorFlow:  1.4\nModel:       alexnet\nMode:        training\nSingleSess:  False\nBatch size:  32 global\n32 per device\nDevices:     ['/gpu:0']\nData format: NCHW\nOptimizer:   sgd\nVariables:   parameter_server\nGenerating model\nTraceback (most recent call last):\nFile \"tf_cnn_benchmarks.py\", line 46, in \ntf.app.run()\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"tf_cnn_benchmarks.py\", line 42, in main\nbench.run()\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 892, in run\nreturn self._benchmark_cnn()\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1068, in _benchmark_cnn\nstart_standard_services=start_standard_services) as sess:\nFile \"/usr/lib64/python2.7/contextlib.py\", line 17, in enter\nreturn self.gen.next()\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 964, in managed_session\nself.stop(close_summary_writer=close_summary_writer)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 792, in stop\nstop_grace_period_secs=self._stop_grace_secs)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join\nsix.reraise(*self._exc_info_to_raise)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 953, in managed_session\nstart_standard_services=start_standard_services)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 708, in prepare_or_wait_for_session\ninit_feed_dict=self._init_feed_dict, init_fn=self._init_fn)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/session_manager.py\", line 279, in prepare_session\nsess.run(init_op, feed_dict=init_feed_dict)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 889, in run\nrun_metadata_ptr)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1120, in _run\nfeed_dict_tensor, options, run_metadata)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1317, in _do_run\noptions, run_metadata)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1336, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[9216,4096]\n[[Node: v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal = TruncatedNormalT=DT_INT32, _class=[\"loc:@v/cg/affine0/weights\"], dtype=DT_FLOAT, seed=1234, seed2=149, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]]\nCaused by op u'v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal', defined at:\nFile \"tf_cnn_benchmarks.py\", line 46, in \ntf.app.run()\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\n_sys.exit(main(_sys.argv[:1] + flags_passthrough))\nFile \"tf_cnn_benchmarks.py\", line 42, in main\nbench.run()\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 892, in run\nreturn self._benchmark_cnn()\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 986, in _benchmark_cnn\n(image_producer_ops, enqueue_ops, fetches) = self._build_model()\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1236, in _build_model\ngpu_compute_stage_ops, gpu_grad_stage_ops)\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1524, in add_forward_pass_and_gradients\nself.model.add_inference(network)\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/models/alexnet_model.py\", line 45, in add_inference\ncnn.affine(4096)\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 311, in affine\ninitializer=tf.truncated_normal_initializer(stddev=stddev))\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 117, in get_variable\nvar = tf.get_variable(name, shape, dtype, *args, **kwargs)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1203, in get_variable\nconstraint=constraint)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1092, in get_variable\nconstraint=constraint)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 417, in get_variable\nreturn custom_getter(**custom_getter_kwargs)\nFile \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 86, in inner_custom_getter\nvar = getter(*args, **kwargs)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 394, in _true_getter\nuse_resource=use_resource, constraint=constraint)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 805, in _get_single_variable\nconstraint=constraint)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 213, in init\nconstraint=constraint)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 303, in _init_from_args\ninitial_value(), name=\"initial_value\", dtype=dtype)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 779, in \nshape.as_list(), dtype=dtype, partition_info=partition_info)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/init_ops.py\", line 309, in call\nshape, self.mean, self.stddev, dtype, seed=self.seed)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/random_ops.py\", line 172, in truncated_normal\nshape_tensor, dtype, seed=seed1, seed2=seed2)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/gen_random_ops.py\", line 588, in _truncated_normal\nname=name)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\nop_def=op_def)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2956, in create_op\nop_def=op_def)\nFile \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1470, in init\nself._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\nResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[9216,4096]\n[[Node: v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal = TruncatedNormalT=DT_INT32, _class=[\"loc:@v/cg/affine0/weights\"], dtype=DT_FLOAT, seed=1234, seed2=149, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]]\nsrun: error: gpu08: task 0: Exited with exit code 1", "body": "Hi\r\n\r\nI've ran some of the cnn benchmarks on an cluster that uses SLURM, on a Nvidia XP. One of my jobs got stuck. When I cancelled the script, it seems not to free up the GPU memory anymore after that.\r\ntotalMemory: 11.90GiB freeMemory: 365.94MiB\r\n\r\nNow I can't run any more scripts. How can I free up my GPU memory again?\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: cnn_benchmarks \r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Cluster node with amd cpu and NVidia XP\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.4\r\n- **Python version**: 2.7 \r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**: GCC version:  gcc version 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC) \r\n- **CUDA/cuDNN version**: Cuda8, Cudnn 6\r\n- **GPU model and memory**: Nvidia XP\r\n- **Exact command to reproduce**: python tf_cnn_benchmarks.py --model=resnet50 --num_gpus=1 --local_parameter_device=gpu\r\n\r\n### Source code / logs\r\n2017-11-06 21:45:35.243801: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX FMA\r\n2017-11-06 21:45:35.832723: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: \r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:41:00.0\r\ntotalMemory: 11.90GiB freeMemory: 365.94MiB\r\n2017-11-06 21:45:35.832780: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: TITAN Xp, pci bus id: 0000:41:00.0, compute capability: 6.1)\r\n2017-11-06 21:45:46.271894: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (GPU_0_bfc) ran out of memory trying to allocate 144.00MiB.  Current allocation summary follows.\r\n2017-11-06 21:45:46.271976: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (256): \tTotal Chunks: 18, Chunks in use: 18. 4.5KiB allocated for chunks. 4.5KiB in use in bin. 576B client-requested in use in bin.\r\n2017-11-06 21:45:46.271992: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (512): \tTotal Chunks: 2, Chunks in use: 2. 1.5KiB allocated for chunks. 1.5KiB in use in bin. 1.5KiB client-requested in use in bin.\r\n2017-11-06 21:45:46.272005: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1024): \tTotal Chunks: 7, Chunks in use: 7. 9.2KiB allocated for chunks. 9.2KiB in use in bin. 9.0KiB client-requested in use in bin.\r\n2017-11-06 21:45:46.272016: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272029: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4096): \tTotal Chunks: 1, Chunks in use: 1. 4.0KiB allocated for chunks. 4.0KiB in use in bin. 3.9KiB client-requested in use in bin.\r\n2017-11-06 21:45:46.272040: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272052: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16384): \tTotal Chunks: 2, Chunks in use: 2. 32.0KiB allocated for chunks. 32.0KiB in use in bin. 32.0KiB client-requested in use in bin.\r\n2017-11-06 21:45:46.272063: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272076: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (65536): \tTotal Chunks: 1, Chunks in use: 1. 90.8KiB allocated for chunks. 90.8KiB in use in bin. 90.8KiB client-requested in use in bin.\r\n2017-11-06 21:45:46.272087: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272097: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272108: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272120: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1048576): \tTotal Chunks: 1, Chunks in use: 1. 1.17MiB allocated for chunks. 1.17MiB in use in bin. 1.17MiB client-requested in use in bin.\r\n2017-11-06 21:45:46.272131: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2097152): \tTotal Chunks: 2, Chunks in use: 2. 5.91MiB allocated for chunks. 5.91MiB in use in bin. 5.91MiB client-requested in use in bin.\r\n2017-11-06 21:45:46.272143: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4194304): \tTotal Chunks: 1, Chunks in use: 1. 5.06MiB allocated for chunks. 5.06MiB in use in bin. 5.06MiB client-requested in use in bin.\r\n2017-11-06 21:45:46.272153: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272164: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272176: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272186: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (67108864): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272197: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (134217728): \tTotal Chunks: 1, Chunks in use: 0. 128.66MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272208: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:46.272220: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin for 144.00MiB was 128.00MiB, Chunk State: \r\n2017-11-06 21:45:46.272296: I tensorflow/core/common_runtime/bfc_allocator.cc:649]   Size: 128.66MiB | Requested Size: 0B | in_use: 0, prev:   Size: 1.0KiB | Requested Size: 1.0KiB | in_use: 1\r\n2017-11-06 21:45:46.272309: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400000 of size 1280\r\n2017-11-06 21:45:46.272318: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400500 of size 256\r\n2017-11-06 21:45:46.272326: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400600 of size 256\r\n2017-11-06 21:45:46.272341: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400700 of size 256\r\n2017-11-06 21:45:46.272350: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400800 of size 256\r\n2017-11-06 21:45:46.272358: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400900 of size 256\r\n2017-11-06 21:45:46.272368: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400a00 of size 768\r\n2017-11-06 21:45:46.272376: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400d00 of size 256\r\n2017-11-06 21:45:46.272385: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400e00 of size 256\r\n2017-11-06 21:45:46.272393: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400f00 of size 1536\r\n2017-11-06 21:45:46.272402: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401500 of size 256\r\n2017-11-06 21:45:46.272411: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401600 of size 256\r\n2017-11-06 21:45:46.272420: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401700 of size 1536\r\n2017-11-06 21:45:46.272428: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401d00 of size 256\r\n2017-11-06 21:45:46.272438: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401e00 of size 256\r\n2017-11-06 21:45:46.272447: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401f00 of size 1024\r\n2017-11-06 21:45:46.272455: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402300 of size 256\r\n2017-11-06 21:45:46.272465: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402400 of size 256\r\n2017-11-06 21:45:46.272474: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402500 of size 16384\r\n2017-11-06 21:45:46.272482: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406500 of size 256\r\n2017-11-06 21:45:46.272491: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406600 of size 256\r\n2017-11-06 21:45:46.272499: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406700 of size 16384\r\n2017-11-06 21:45:46.272507: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a700 of size 256\r\n2017-11-06 21:45:46.272516: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a800 of size 256\r\n2017-11-06 21:45:46.272528: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a900 of size 4096\r\n2017-11-06 21:45:46.272537: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40b900 of size 92928\r\n2017-11-06 21:45:46.272546: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422400 of size 256\r\n2017-11-06 21:45:46.272554: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422500 of size 1228800\r\n2017-11-06 21:45:46.272562: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e500 of size 768\r\n2017-11-06 21:45:46.272571: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e800 of size 2654208\r\n2017-11-06 21:45:46.272580: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6800 of size 1536\r\n2017-11-06 21:45:46.272589: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6e00 of size 5308416\r\n2017-11-06 21:45:46.272597: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece6e00 of size 1536\r\n2017-11-06 21:45:46.272606: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece7400 of size 3538944\r\n2017-11-06 21:45:46.272614: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047400 of size 1024\r\n2017-11-06 21:45:46.272623: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020f047800 of size 134907904\r\n2017-11-06 21:45:46.272631: I tensorflow/core/common_runtime/bfc_allocator.cc:676]      Summary of in-use Chunks by size: \r\n2017-11-06 21:45:46.272645: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 18 Chunks of size 256 totalling 4.5KiB\r\n2017-11-06 21:45:46.272655: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 768 totalling 1.5KiB\r\n2017-11-06 21:45:46.272665: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 1024 totalling 2.0KiB\r\n2017-11-06 21:45:46.272675: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1280 totalling 1.2KiB\r\n2017-11-06 21:45:46.272686: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 1536 totalling 6.0KiB\r\n2017-11-06 21:45:46.272695: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 4096 totalling 4.0KiB\r\n2017-11-06 21:45:46.272706: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 16384 totalling 32.0KiB\r\n2017-11-06 21:45:46.272716: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 92928 totalling 90.8KiB\r\n2017-11-06 21:45:46.272725: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1228800 totalling 1.17MiB\r\n2017-11-06 21:45:46.272735: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 2654208 totalling 2.53MiB\r\n2017-11-06 21:45:46.272749: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 3538944 totalling 3.38MiB\r\n2017-11-06 21:45:46.272760: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 5308416 totalling 5.06MiB\r\n2017-11-06 21:45:46.272772: I tensorflow/core/common_runtime/bfc_allocator.cc:683] Sum Total of in-use chunks: 12.28MiB\r\n2017-11-06 21:45:46.272786: I tensorflow/core/common_runtime/bfc_allocator.cc:685] Stats: \r\nLimit:                   147783680\r\nInUse:                    12875776\r\nMaxInUse:                 12875776\r\nNumAllocs:                      35\r\nMaxAllocSize:              5308416\r\n\r\n2017-11-06 21:45:46.272799: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *********___________________________________________________________________________________________\r\n2017-11-06 21:45:46.272823: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[9216,4096]\r\n2017-11-06 21:45:56.273596: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (GPU_0_bfc) ran out of memory trying to allocate 64.00MiB.  Current allocation summary follows.\r\n2017-11-06 21:45:56.273635: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (256): \tTotal Chunks: 18, Chunks in use: 18. 4.5KiB allocated for chunks. 4.5KiB in use in bin. 576B client-requested in use in bin.\r\n2017-11-06 21:45:56.273649: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (512): \tTotal Chunks: 2, Chunks in use: 2. 1.5KiB allocated for chunks. 1.5KiB in use in bin. 1.5KiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273661: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1024): \tTotal Chunks: 7, Chunks in use: 7. 9.2KiB allocated for chunks. 9.2KiB in use in bin. 9.0KiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273672: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2048): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273684: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4096): \tTotal Chunks: 2, Chunks in use: 2. 8.0KiB allocated for chunks. 8.0KiB in use in bin. 7.8KiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273695: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8192): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273707: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16384): \tTotal Chunks: 4, Chunks in use: 4. 64.0KiB allocated for chunks. 64.0KiB in use in bin. 64.0KiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273718: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273731: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (65536): \tTotal Chunks: 2, Chunks in use: 1. 181.5KiB allocated for chunks. 90.8KiB in use in bin. 90.8KiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273742: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273754: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273765: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (524288): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273777: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1048576): \tTotal Chunks: 2, Chunks in use: 1. 2.34MiB allocated for chunks. 1.17MiB in use in bin. 1.17MiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273788: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2097152): \tTotal Chunks: 3, Chunks in use: 1. 8.44MiB allocated for chunks. 2.53MiB in use in bin. 2.53MiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273800: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4194304): \tTotal Chunks: 2, Chunks in use: 2. 10.12MiB allocated for chunks. 10.12MiB in use in bin. 8.44MiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273813: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8388608): \tTotal Chunks: 1, Chunks in use: 1. 15.64MiB allocated for chunks. 15.64MiB in use in bin. 15.64MiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273823: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16777216): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273834: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (33554432): \tTotal Chunks: 1, Chunks in use: 0. 40.13MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273852: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (67108864): \tTotal Chunks: 1, Chunks in use: 1. 64.00MiB allocated for chunks. 64.00MiB in use in bin. 64.00MiB client-requested in use in bin.\r\n2017-11-06 21:45:56.273863: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (134217728): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273874: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (268435456): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2017-11-06 21:45:56.273884: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin for 64.00MiB was 64.00MiB, Chunk State: \r\n2017-11-06 21:45:56.273895: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400000 of size 1280\r\n2017-11-06 21:45:56.273904: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400500 of size 256\r\n2017-11-06 21:45:56.273913: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400600 of size 256\r\n2017-11-06 21:45:56.273921: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400700 of size 256\r\n2017-11-06 21:45:56.273929: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400800 of size 256\r\n2017-11-06 21:45:56.273937: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400900 of size 256\r\n2017-11-06 21:45:56.273946: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400a00 of size 768\r\n2017-11-06 21:45:56.273955: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400d00 of size 256\r\n2017-11-06 21:45:56.273963: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400e00 of size 256\r\n2017-11-06 21:45:56.273972: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e400f00 of size 1536\r\n2017-11-06 21:45:56.273981: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401500 of size 256\r\n2017-11-06 21:45:56.273989: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401600 of size 256\r\n2017-11-06 21:45:56.273997: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401700 of size 1536\r\n2017-11-06 21:45:56.274005: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401d00 of size 256\r\n2017-11-06 21:45:56.274014: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401e00 of size 256\r\n2017-11-06 21:45:56.274029: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e401f00 of size 1024\r\n2017-11-06 21:45:56.274038: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402300 of size 256\r\n2017-11-06 21:45:56.274046: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402400 of size 256\r\n2017-11-06 21:45:56.274056: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e402500 of size 16384\r\n2017-11-06 21:45:56.274065: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406500 of size 256\r\n2017-11-06 21:45:56.274074: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406600 of size 256\r\n2017-11-06 21:45:56.274084: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e406700 of size 16384\r\n2017-11-06 21:45:56.274093: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a700 of size 256\r\n2017-11-06 21:45:56.274101: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a800 of size 256\r\n2017-11-06 21:45:56.274109: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e40a900 of size 4096\r\n2017-11-06 21:45:56.274117: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e422400 of size 256\r\n2017-11-06 21:45:56.274126: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e54e500 of size 768\r\n2017-11-06 21:45:56.274138: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6800 of size 1536\r\n2017-11-06 21:45:56.274149: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020e7d6e00 of size 5308416\r\n2017-11-06 21:45:56.274157: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020ece6e00 of size 1536\r\n2017-11-06 21:45:56.274166: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047400 of size 1024\r\n2017-11-06 21:45:56.274174: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f047800 of size 16384\r\n2017-11-06 21:45:56.274182: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1020f04b800 of size 67108864\r\n2017-11-06 21:45:56.274191: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021304b800 of size 16384\r\n2017-11-06 21:45:56.274199: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021304f800 of size 16400384\r\n2017-11-06 21:45:56.274207: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10213ff3800 of size 4096\r\n2017-11-06 21:45:56.274216: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10213ff4800 of size 92928\r\n2017-11-06 21:45:56.274225: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1021400b300 of size 1228800\r\n2017-11-06 21:45:56.274299: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x10214137300 of size 2654208\r\n2017-11-06 21:45:56.274308: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x102143bf300 of size 5308416\r\n2017-11-06 21:45:56.274317: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e40b900 of size 92928\r\n2017-11-06 21:45:56.274325: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e422500 of size 1228800\r\n2017-11-06 21:45:56.274333: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020e54e800 of size 2654208\r\n2017-11-06 21:45:56.274342: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1020ece7400 of size 3538944\r\n2017-11-06 21:45:56.274351: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x102148cf300 of size 42077440\r\n2017-11-06 21:45:56.274359: I tensorflow/core/common_runtime/bfc_allocator.cc:676]      Summary of in-use Chunks by size: \r\n2017-11-06 21:45:56.274369: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 18 Chunks of size 256 totalling 4.5KiB\r\n2017-11-06 21:45:56.274381: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 768 totalling 1.5KiB\r\n2017-11-06 21:45:56.274391: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 1024 totalling 2.0KiB\r\n2017-11-06 21:45:56.274401: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1280 totalling 1.2KiB\r\n2017-11-06 21:45:56.274412: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 1536 totalling 6.0KiB\r\n2017-11-06 21:45:56.274422: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 4096 totalling 8.0KiB\r\n2017-11-06 21:45:56.274433: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 4 Chunks of size 16384 totalling 64.0KiB\r\n2017-11-06 21:45:56.274443: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 92928 totalling 90.8KiB\r\n2017-11-06 21:45:56.274454: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1228800 totalling 1.17MiB\r\n2017-11-06 21:45:56.274463: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 2654208 totalling 2.53MiB\r\n2017-11-06 21:45:56.274474: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 2 Chunks of size 5308416 totalling 10.12MiB\r\n2017-11-06 21:45:56.274489: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 16400384 totalling 15.64MiB\r\n2017-11-06 21:45:56.274500: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 67108864 totalling 64.00MiB\r\n2017-11-06 21:45:56.274510: I tensorflow/core/common_runtime/bfc_allocator.cc:683] Sum Total of in-use chunks: 93.64MiB\r\n2017-11-06 21:45:56.274522: I tensorflow/core/common_runtime/bfc_allocator.cc:685] Stats: \r\nLimit:                   147783680\r\nInUse:                    98191360\r\nMaxInUse:                101730304\r\nNumAllocs:                      45\r\nMaxAllocSize:             67108864\r\n\r\n2017-11-06 21:45:56.274536: W tensorflow/core/common_runtime/bfc_allocator.cc:277] *_*****_****************************************************************____________________________\r\n2017-11-06 21:45:56.274550: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[4096,4096]\r\nTensorFlow:  1.4\r\nModel:       alexnet\r\nMode:        training\r\nSingleSess:  False\r\nBatch size:  32 global\r\n             32 per device\r\nDevices:     ['/gpu:0']\r\nData format: NCHW\r\nOptimizer:   sgd\r\nVariables:   parameter_server\r\n==========\r\nGenerating model\r\nTraceback (most recent call last):\r\n  File \"tf_cnn_benchmarks.py\", line 46, in <module>\r\n    tf.app.run()\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"tf_cnn_benchmarks.py\", line 42, in main\r\n    bench.run()\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 892, in run\r\n    return self._benchmark_cnn()\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1068, in _benchmark_cnn\r\n    start_standard_services=start_standard_services) as sess:\r\n  File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 964, in managed_session\r\n    self.stop(close_summary_writer=close_summary_writer)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 792, in stop\r\n    stop_grace_period_secs=self._stop_grace_secs)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join\r\n    six.reraise(*self._exc_info_to_raise)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 953, in managed_session\r\n    start_standard_services=start_standard_services)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/supervisor.py\", line 708, in prepare_or_wait_for_session\r\n    init_feed_dict=self._init_feed_dict, init_fn=self._init_fn)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/training/session_manager.py\", line 279, in prepare_session\r\n    sess.run(init_op, feed_dict=init_feed_dict)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 889, in run\r\n    run_metadata_ptr)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1120, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1317, in _do_run\r\n    options, run_metadata)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1336, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[9216,4096]\r\n\t [[Node: v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal = TruncatedNormal[T=DT_INT32, _class=[\"loc:@v/cg/affine0/weights\"], dtype=DT_FLOAT, seed=1234, seed2=149, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](v/cg/affine0/weights/Initializer/truncated_normal/shape)]]\r\n\r\nCaused by op u'v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal', defined at:\r\n  File \"tf_cnn_benchmarks.py\", line 46, in <module>\r\n    tf.app.run()\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 48, in run\r\n    _sys.exit(main(_sys.argv[:1] + flags_passthrough))\r\n  File \"tf_cnn_benchmarks.py\", line 42, in main\r\n    bench.run()\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 892, in run\r\n    return self._benchmark_cnn()\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 986, in _benchmark_cnn\r\n    (image_producer_ops, enqueue_ops, fetches) = self._build_model()\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1236, in _build_model\r\n    gpu_compute_stage_ops, gpu_grad_stage_ops)\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/benchmark_cnn.py\", line 1524, in add_forward_pass_and_gradients\r\n    self.model.add_inference(network)\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/models/alexnet_model.py\", line 45, in add_inference\r\n    cnn.affine(4096)\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 311, in affine\r\n    initializer=tf.truncated_normal_initializer(stddev=stddev))\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 117, in get_variable\r\n    var = tf.get_variable(name, shape, dtype, *args, **kwargs)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1203, in get_variable\r\n    constraint=constraint)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 1092, in get_variable\r\n    constraint=constraint)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 417, in get_variable\r\n    return custom_getter(**custom_getter_kwargs)\r\n  File \"/home/kklein/benchmarks/scripts/tf_cnn_benchmarks/convnet_builder.py\", line 86, in inner_custom_getter\r\n    var = getter(*args, **kwargs)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 394, in _true_getter\r\n    use_resource=use_resource, constraint=constraint)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 805, in _get_single_variable\r\n    constraint=constraint)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 213, in __init__\r\n    constraint=constraint)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variables.py\", line 303, in _init_from_args\r\n    initial_value(), name=\"initial_value\", dtype=dtype)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py\", line 779, in <lambda>\r\n    shape.as_list(), dtype=dtype, partition_info=partition_info)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/init_ops.py\", line 309, in __call__\r\n    shape, self.mean, self.stddev, dtype, seed=self.seed)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/random_ops.py\", line 172, in truncated_normal\r\n    shape_tensor, dtype, seed=seed1, seed2=seed2)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/ops/gen_random_ops.py\", line 588, in _truncated_normal\r\n    name=name)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2956, in create_op\r\n    op_def=op_def)\r\n  File \"/home/kklein/tensorflow/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1470, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[9216,4096]\r\n\t [[Node: v/cg/affine0/weights/Initializer/truncated_normal/TruncatedNormal = TruncatedNormal[T=DT_INT32, _class=[\"loc:@v/cg/affine0/weights\"], dtype=DT_FLOAT, seed=1234, seed2=149, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](v/cg/affine0/weights/Initializer/truncated_normal/shape)]]\r\n\r\nsrun: error: gpu08: task 0: Exited with exit code 1\r\n\r\n"}
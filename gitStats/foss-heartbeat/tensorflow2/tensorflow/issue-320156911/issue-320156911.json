{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19077", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19077/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19077/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/19077/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/19077", "id": 320156911, "node_id": "MDU6SXNzdWUzMjAxNTY5MTE=", "number": 19077, "title": "CSV parsing flow (TextLineDataset -> decode_csv) doesn't parse linebreak in quotes correctly", "user": {"login": "PForet", "id": 30370577, "node_id": "MDQ6VXNlcjMwMzcwNTc3", "avatar_url": "https://avatars1.githubusercontent.com/u/30370577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PForet", "html_url": "https://github.com/PForet", "followers_url": "https://api.github.com/users/PForet/followers", "following_url": "https://api.github.com/users/PForet/following{/other_user}", "gists_url": "https://api.github.com/users/PForet/gists{/gist_id}", "starred_url": "https://api.github.com/users/PForet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PForet/subscriptions", "organizations_url": "https://api.github.com/users/PForet/orgs", "repos_url": "https://api.github.com/users/PForet/repos", "events_url": "https://api.github.com/users/PForet/events{/privacy}", "received_events_url": "https://api.github.com/users/PForet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "rachellim", "id": 9589037, "node_id": "MDQ6VXNlcjk1ODkwMzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/9589037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rachellim", "html_url": "https://github.com/rachellim", "followers_url": "https://api.github.com/users/rachellim/followers", "following_url": "https://api.github.com/users/rachellim/following{/other_user}", "gists_url": "https://api.github.com/users/rachellim/gists{/gist_id}", "starred_url": "https://api.github.com/users/rachellim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rachellim/subscriptions", "organizations_url": "https://api.github.com/users/rachellim/orgs", "repos_url": "https://api.github.com/users/rachellim/repos", "events_url": "https://api.github.com/users/rachellim/events{/privacy}", "received_events_url": "https://api.github.com/users/rachellim/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rachellim", "id": 9589037, "node_id": "MDQ6VXNlcjk1ODkwMzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/9589037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rachellim", "html_url": "https://github.com/rachellim", "followers_url": "https://api.github.com/users/rachellim/followers", "following_url": "https://api.github.com/users/rachellim/following{/other_user}", "gists_url": "https://api.github.com/users/rachellim/gists{/gist_id}", "starred_url": "https://api.github.com/users/rachellim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rachellim/subscriptions", "organizations_url": "https://api.github.com/users/rachellim/orgs", "repos_url": "https://api.github.com/users/rachellim/repos", "events_url": "https://api.github.com/users/rachellim/events{/privacy}", "received_events_url": "https://api.github.com/users/rachellim/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-05-04T05:23:47Z", "updated_at": "2018-05-15T20:35:34Z", "closed_at": "2018-05-15T20:35:34Z", "author_association": "NONE", "body_html": "<p>Using tensorflow 1.8, parsing the following file with decode_csv:<br>\n\"a<br>\nb\",0<br>\nraise the error \"Quoted field has to end with quote followed by delim or end\".</p>\n<p>To reproduce:</p>\n<pre><code>file = ['example.csv']\n\ndataset = tf.data.TextLineDataset(file)\ndataset = dataset.map(lambda record: tf.decode_csv(\n    record,\n    record_defaults=[[\"\"],[0]]\n))\niterator = dataset.make_one_shot_iterator()\nnext_element = iterator.get_next()\n\nwith tf.Session() as sess:\n    print(sess.run(next_element))\n</code></pre>\n<p>I think it is because the linebreak in the quote is not escaped. This behavior seems in contradiction with the RFC2048 specifications (section 2.6).</p>", "body_text": "Using tensorflow 1.8, parsing the following file with decode_csv:\n\"a\nb\",0\nraise the error \"Quoted field has to end with quote followed by delim or end\".\nTo reproduce:\nfile = ['example.csv']\n\ndataset = tf.data.TextLineDataset(file)\ndataset = dataset.map(lambda record: tf.decode_csv(\n    record,\n    record_defaults=[[\"\"],[0]]\n))\niterator = dataset.make_one_shot_iterator()\nnext_element = iterator.get_next()\n\nwith tf.Session() as sess:\n    print(sess.run(next_element))\n\nI think it is because the linebreak in the quote is not escaped. This behavior seems in contradiction with the RFC2048 specifications (section 2.6).", "body": "\r\nUsing tensorflow 1.8, parsing the following file with decode_csv:\r\n\"a\r\nb\",0\r\nraise the error \"Quoted field has to end with quote followed by delim or end\".\r\n\r\nTo reproduce:\r\n\r\n```\r\nfile = ['example.csv']\r\n\r\ndataset = tf.data.TextLineDataset(file)\r\ndataset = dataset.map(lambda record: tf.decode_csv(\r\n    record,\r\n    record_defaults=[[\"\"],[0]]\r\n))\r\niterator = dataset.make_one_shot_iterator()\r\nnext_element = iterator.get_next()\r\n\r\nwith tf.Session() as sess:\r\n    print(sess.run(next_element))\r\n```\r\n\r\nI think it is because the linebreak in the quote is not escaped. This behavior seems in contradiction with the RFC2048 specifications (section 2.6)."}
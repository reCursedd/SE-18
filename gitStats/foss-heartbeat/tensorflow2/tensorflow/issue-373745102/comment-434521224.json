{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/434521224", "html_url": "https://github.com/tensorflow/tensorflow/issues/23238#issuecomment-434521224", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23238", "id": 434521224, "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDUyMTIyNA==", "user": {"login": "patelprateek", "id": 22586349, "node_id": "MDQ6VXNlcjIyNTg2MzQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/22586349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patelprateek", "html_url": "https://github.com/patelprateek", "followers_url": "https://api.github.com/users/patelprateek/followers", "following_url": "https://api.github.com/users/patelprateek/following{/other_user}", "gists_url": "https://api.github.com/users/patelprateek/gists{/gist_id}", "starred_url": "https://api.github.com/users/patelprateek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patelprateek/subscriptions", "organizations_url": "https://api.github.com/users/patelprateek/orgs", "repos_url": "https://api.github.com/users/patelprateek/repos", "events_url": "https://api.github.com/users/patelprateek/events{/privacy}", "received_events_url": "https://api.github.com/users/patelprateek/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-31T00:43:07Z", "updated_at": "2018-10-31T00:43:07Z", "author_association": "NONE", "body_html": "<p>Ok so i tried bunch of parameters : Machine type : 32 core , logical threads per core 2<br>\ni tried : num of intra op threads = OMP threads : [4, 8, 16, 32, 64]<br>\ninter op threads = number of physical cores  and number of sockets [2,8,16,32]</p>\n<p>the best performance i could get for a batch size of 1k : 48 micro secs<br>\nthe best i get without mkl without much tuning (num of inter and intra op threads being the same : 16/32/64] : 23 micro secs</p>\n<p>Any other setting i need to try ?<br>\nCan we know if MKL library and ISA is even being taken advantage of by looking at some ops which should definitely perform better ?</p>", "body_text": "Ok so i tried bunch of parameters : Machine type : 32 core , logical threads per core 2\ni tried : num of intra op threads = OMP threads : [4, 8, 16, 32, 64]\ninter op threads = number of physical cores  and number of sockets [2,8,16,32]\nthe best performance i could get for a batch size of 1k : 48 micro secs\nthe best i get without mkl without much tuning (num of inter and intra op threads being the same : 16/32/64] : 23 micro secs\nAny other setting i need to try ?\nCan we know if MKL library and ISA is even being taken advantage of by looking at some ops which should definitely perform better ?", "body": "Ok so i tried bunch of parameters : Machine type : 32 core , logical threads per core 2 \r\n i tried : num of intra op threads = OMP threads : [4, 8, 16, 32, 64]\r\ninter op threads = number of physical cores  and number of sockets [2,8,16,32]\r\n\r\nthe best performance i could get for a batch size of 1k : 48 micro secs\r\nthe best i get without mkl without much tuning (num of inter and intra op threads being the same : 16/32/64] : 23 micro secs\r\n\r\nAny other setting i need to try ?\r\nCan we know if MKL library and ISA is even being taken advantage of by looking at some ops which should definitely perform better ?\r\n\r\n "}
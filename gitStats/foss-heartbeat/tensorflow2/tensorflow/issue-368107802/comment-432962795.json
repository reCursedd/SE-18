{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/432962795", "html_url": "https://github.com/tensorflow/tensorflow/issues/22833#issuecomment-432962795", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22833", "id": 432962795, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjk2Mjc5NQ==", "user": {"login": "Hafplo", "id": 22295916, "node_id": "MDQ6VXNlcjIyMjk1OTE2", "avatar_url": "https://avatars2.githubusercontent.com/u/22295916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hafplo", "html_url": "https://github.com/Hafplo", "followers_url": "https://api.github.com/users/Hafplo/followers", "following_url": "https://api.github.com/users/Hafplo/following{/other_user}", "gists_url": "https://api.github.com/users/Hafplo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hafplo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hafplo/subscriptions", "organizations_url": "https://api.github.com/users/Hafplo/orgs", "repos_url": "https://api.github.com/users/Hafplo/repos", "events_url": "https://api.github.com/users/Hafplo/events{/privacy}", "received_events_url": "https://api.github.com/users/Hafplo/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-25T08:33:54Z", "updated_at": "2018-10-25T08:33:54Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=42785337\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/wt-huang\">@wt-huang</a><br>\nThank you for your response and sorry for delaying my response.</p>\n<p>I am aware of the importance of setting <code>num_examples</code> , and checked your suggestion of 'eval_input_reader.shuffle'.<br>\nAccording to <a href=\"https://github.com/tensorflow/models/issues/1856#issuecomment-315290571\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/models/issues/1856/hovercard\">this</a>, it is a solution to the same issue of missing some labels since you don't evaluate over all of your dataset:<br>\nLet's say you have 1000 images but only evaluates 100 of them, and assume they are ordered by labels. By shuffling the order you increase chances of getting images from the 'last' labels.</p>\n<p>Since I was evaluating all my images anyway, I don't think it will solve the problem if it persists.<br>\nMy current guess is that for some reason, the model couldn't detect any objects of a specific label - this can occur even if you evaluates images with those objects, if the model simply 'misses' them (low accuracy, bad model etc.) - and this causes the error, or the error was caused by something else (perhaps OOM?).</p>\n<p>For now, this error did not happen again - but it might - and I still don't have a solution. This causes me to invest time and effort in monitoring, which I would happily divert elsewhere, so I am eager to other suggestions.</p>\n<p>Thank you.</p>", "body_text": "@wt-huang\nThank you for your response and sorry for delaying my response.\nI am aware of the importance of setting num_examples , and checked your suggestion of 'eval_input_reader.shuffle'.\nAccording to this, it is a solution to the same issue of missing some labels since you don't evaluate over all of your dataset:\nLet's say you have 1000 images but only evaluates 100 of them, and assume they are ordered by labels. By shuffling the order you increase chances of getting images from the 'last' labels.\nSince I was evaluating all my images anyway, I don't think it will solve the problem if it persists.\nMy current guess is that for some reason, the model couldn't detect any objects of a specific label - this can occur even if you evaluates images with those objects, if the model simply 'misses' them (low accuracy, bad model etc.) - and this causes the error, or the error was caused by something else (perhaps OOM?).\nFor now, this error did not happen again - but it might - and I still don't have a solution. This causes me to invest time and effort in monitoring, which I would happily divert elsewhere, so I am eager to other suggestions.\nThank you.", "body": "@wt-huang \r\nThank you for your response and sorry for delaying my response.\r\n\r\nI am aware of the importance of setting `num_examples` , and checked your suggestion of 'eval_input_reader.shuffle'.\r\nAccording to [this](https://github.com/tensorflow/models/issues/1856#issuecomment-315290571), it is a solution to the same issue of missing some labels since you don't evaluate over all of your dataset:\r\nLet's say you have 1000 images but only evaluates 100 of them, and assume they are ordered by labels. By shuffling the order you increase chances of getting images from the 'last' labels.\r\n\r\nSince I was evaluating all my images anyway, I don't think it will solve the problem if it persists.\r\nMy current guess is that for some reason, the model couldn't detect any objects of a specific label - this can occur even if you evaluates images with those objects, if the model simply 'misses' them (low accuracy, bad model etc.) - and this causes the error, or the error was caused by something else (perhaps OOM?).\r\n\r\nFor now, this error did not happen again - but it might - and I still don't have a solution. This causes me to invest time and effort in monitoring, which I would happily divert elsewhere, so I am eager to other suggestions.\r\n\r\nThank you. "}
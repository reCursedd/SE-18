{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10675", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10675/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10675/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/10675/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/10675", "id": 235516371, "node_id": "MDU6SXNzdWUyMzU1MTYzNzE=", "number": 10675, "title": "Inner tf.device inherits device index when using wildcard index", "user": {"login": "gaohuazuo", "id": 10446514, "node_id": "MDQ6VXNlcjEwNDQ2NTE0", "avatar_url": "https://avatars0.githubusercontent.com/u/10446514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaohuazuo", "html_url": "https://github.com/gaohuazuo", "followers_url": "https://api.github.com/users/gaohuazuo/followers", "following_url": "https://api.github.com/users/gaohuazuo/following{/other_user}", "gists_url": "https://api.github.com/users/gaohuazuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaohuazuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaohuazuo/subscriptions", "organizations_url": "https://api.github.com/users/gaohuazuo/orgs", "repos_url": "https://api.github.com/users/gaohuazuo/repos", "events_url": "https://api.github.com/users/gaohuazuo/events{/privacy}", "received_events_url": "https://api.github.com/users/gaohuazuo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "open", "locked": false, "assignee": {"login": "josh11b", "id": 15258583, "node_id": "MDQ6VXNlcjE1MjU4NTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/15258583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josh11b", "html_url": "https://github.com/josh11b", "followers_url": "https://api.github.com/users/josh11b/followers", "following_url": "https://api.github.com/users/josh11b/following{/other_user}", "gists_url": "https://api.github.com/users/josh11b/gists{/gist_id}", "starred_url": "https://api.github.com/users/josh11b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josh11b/subscriptions", "organizations_url": "https://api.github.com/users/josh11b/orgs", "repos_url": "https://api.github.com/users/josh11b/repos", "events_url": "https://api.github.com/users/josh11b/events{/privacy}", "received_events_url": "https://api.github.com/users/josh11b/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "josh11b", "id": 15258583, "node_id": "MDQ6VXNlcjE1MjU4NTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/15258583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josh11b", "html_url": "https://github.com/josh11b", "followers_url": "https://api.github.com/users/josh11b/followers", "following_url": "https://api.github.com/users/josh11b/following{/other_user}", "gists_url": "https://api.github.com/users/josh11b/gists{/gist_id}", "starred_url": "https://api.github.com/users/josh11b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josh11b/subscriptions", "organizations_url": "https://api.github.com/users/josh11b/orgs", "repos_url": "https://api.github.com/users/josh11b/repos", "events_url": "https://api.github.com/users/josh11b/events{/privacy}", "received_events_url": "https://api.github.com/users/josh11b/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-06-13T11:03:21Z", "updated_at": "2018-11-22T18:52:06Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body_html": "<p>TF version: v1.2.0-rc0-735-gf48673b (about one week ago)</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>gpu:7<span class=\"pl-pds\">'</span></span>):\n    <span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>cpu:*<span class=\"pl-pds\">'</span></span>):\n        <span class=\"pl-c1\">print</span>(tf.constant(<span class=\"pl-c1\">0</span>).device) <span class=\"pl-c\"><span class=\"pl-c\">#</span> /device:CPU:7</span></pre></div>\n<p>workaround:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">with</span> tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>gpu:7<span class=\"pl-pds\">'</span></span>):\n    <span class=\"pl-k\">with</span> tf.device(<span class=\"pl-c1\">None</span>), tf.device(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>cpu:*<span class=\"pl-pds\">'</span></span>):\n        <span class=\"pl-c1\">print</span>(tf.constant(<span class=\"pl-c1\">0</span>).device) <span class=\"pl-c\"><span class=\"pl-c\">#</span> /device:CPU:*</span></pre></div>", "body_text": "TF version: v1.2.0-rc0-735-gf48673b (about one week ago)\nwith tf.device('gpu:7'):\n    with tf.device('cpu:*'):\n        print(tf.constant(0).device) # /device:CPU:7\nworkaround:\nwith tf.device('gpu:7'):\n    with tf.device(None), tf.device('cpu:*'):\n        print(tf.constant(0).device) # /device:CPU:*", "body": "TF version: v1.2.0-rc0-735-gf48673b (about one week ago)\r\n\r\n```python\r\nwith tf.device('gpu:7'):\r\n    with tf.device('cpu:*'):\r\n        print(tf.constant(0).device) # /device:CPU:7\r\n```\r\n\r\nworkaround:\r\n\r\n```python\r\nwith tf.device('gpu:7'):\r\n    with tf.device(None), tf.device('cpu:*'):\r\n        print(tf.constant(0).device) # /device:CPU:*\r\n```"}
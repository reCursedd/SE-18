{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14605", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14605/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14605/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14605/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/14605", "id": 274379119, "node_id": "MDU6SXNzdWUyNzQzNzkxMTk=", "number": 14605, "title": "Linking error \"Undefined symbols for architecture x86_64:   \"nsync::nsync_mu_init(nsync::nsync_mu_s_*)\"\" on iOS", "user": {"login": "llyyun", "id": 33706846, "node_id": "MDQ6VXNlcjMzNzA2ODQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/33706846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llyyun", "html_url": "https://github.com/llyyun", "followers_url": "https://api.github.com/users/llyyun/followers", "following_url": "https://api.github.com/users/llyyun/following{/other_user}", "gists_url": "https://api.github.com/users/llyyun/gists{/gist_id}", "starred_url": "https://api.github.com/users/llyyun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llyyun/subscriptions", "organizations_url": "https://api.github.com/users/llyyun/orgs", "repos_url": "https://api.github.com/users/llyyun/repos", "events_url": "https://api.github.com/users/llyyun/events{/privacy}", "received_events_url": "https://api.github.com/users/llyyun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-16T03:03:18Z", "updated_at": "2018-04-03T20:55:56Z", "closed_at": "2017-11-16T04:16:43Z", "author_association": "NONE", "body_html": "<p>Hello,</p>\n<p>I downloaded the latest release 1.4.0 and builded it for iOS with build_all_ios.sh, and can successfully build libtensorflow-core.a, libprotobuf-lite.a and libprotobuf.a</p>\n<p>but error happened when link these libs to iOS project, the detail info as follows, can anybody know how to fix it? thanks</p>\n<p>Undefined symbols for architecture x86_64:<br>\n\"nsync::nsync_mu_init(nsync::nsync_mu_s_<em>)\", referenced from:<br>\ntensorflow::Env::Env() in libtensorflow-core.a(env.o)<br>\n__GLOBAL__sub_I_allocator.cc in libtensorflow-core.a(allocator.o)<br>\ntensorflow::SessionFactory::Register(std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt; const&amp;, tensorflow::SessionFactory</em>) in libtensorflow-core.a(session_factory.o)<br>\ntensorflow::SessionFactory::GetFactory(tensorflow::SessionOptions const&amp;, tensorflow::SessionFactory**) in libtensorflow-core.a(session_factory.o)<br>\ntensorflow::TrackingAllocator::TrackingAllocator(tensorflow::Allocator*, bool) in libtensorflow-core.a(tracking_allocator.o)<br>\ntensorflow::TrackingAllocator::TrackingAllocator(tensorflow::Allocator*, bool) in libtensorflow-core.a(tracking_allocator.o)<br>\n\"nsync::nsync_mu_lock(nsync::nsync_mu_s_<em>)\", referenced from:<br>\ntensorflow::FileSystemRegistryImpl::Register(std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt; const&amp;, std::__1::function&lt;tensorflow::FileSystem</em> ()&gt;) in libtensorflow-core.a(env.o)<br>\ntensorflow::FileSystemRegistryImpl::Lookup(std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt; const&amp;) in libtensorflow-core.a(env.o)<br>\ntensorflow::FileSystemRegistryImpl::GetRegisteredFileSystemSchemes(std::__1::vector&lt;std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt;, std::__1::allocator&lt;std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt; &gt; &gt;<em>) in libtensorflow-core.a(env.o)<br>\ntensorflow::CPUAllocator::AllocateRaw(unsigned long, unsigned long) in libtensorflow-core.a(allocator.o)<br>\ntensorflow::CPUAllocator::DeallocateRaw(void</em>) in libtensorflow-core.a(allocator.o)<br>\ntensorflow::CPUAllocator::GetStats(tensorflow::AllocatorStats*) in libtensorflow-core.a(allocator.o)<br>\ntensorflow::SessionFactory::Register(std::__1::basic_string&lt;char, std::__1::char_traits, std::_<em>1::allocator &gt; const&amp;, tensorflow::SessionFactory*) in libtensorflow-core.a(session_factory.o)<br>\n...<br>\n\"nsync::nsync_mu_unlock(nsync::nsync_mu_s</em><em>)\", referenced from:<br>\ntensorflow::FileSystemRegistryImpl::Register(std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt; const&amp;, std::__1::function&lt;tensorflow::FileSystem</em> ()&gt;) in libtensorflow-core.a(env.o)<br>\ntensorflow::FileSystemRegistryImpl::Lookup(std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt; const&amp;) in libtensorflow-core.a(env.o)<br>\ntensorflow::FileSystemRegistryImpl::GetRegisteredFileSystemSchemes(std::__1::vector&lt;std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt;, std::__1::allocator&lt;std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt; &gt; &gt;<em>) in libtensorflow-core.a(env.o)<br>\ntensorflow::CPUAllocator::AllocateRaw(unsigned long, unsigned long) in libtensorflow-core.a(allocator.o)<br>\ntensorflow::CPUAllocator::DeallocateRaw(void</em>) in libtensorflow-core.a(allocator.o)<br>\ntensorflow::CPUAllocator::GetStats(tensorflow::AllocatorStats*) in libtensorflow-core.a(allocator.o)<br>\ntensorflow::SessionFactory::Register(std::__1::basic_string&lt;char, std::__1::char_traits, std::__1::allocator &gt; const&amp;, tensorflow::SessionFactory*) in libtensorflow-core.a(session_factory.o)<br>\n...<br>\nld: symbol(s) not found for architecture x86_64<br>\nclang: error: linker command failed with exit code 1 (use -v to see invocation)</p>", "body_text": "Hello,\nI downloaded the latest release 1.4.0 and builded it for iOS with build_all_ios.sh, and can successfully build libtensorflow-core.a, libprotobuf-lite.a and libprotobuf.a\nbut error happened when link these libs to iOS project, the detail info as follows, can anybody know how to fix it? thanks\nUndefined symbols for architecture x86_64:\n\"nsync::nsync_mu_init(nsync::nsync_mu_s_)\", referenced from:\ntensorflow::Env::Env() in libtensorflow-core.a(env.o)\n__GLOBAL__sub_I_allocator.cc in libtensorflow-core.a(allocator.o)\ntensorflow::SessionFactory::Register(std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator > const&, tensorflow::SessionFactory) in libtensorflow-core.a(session_factory.o)\ntensorflow::SessionFactory::GetFactory(tensorflow::SessionOptions const&, tensorflow::SessionFactory**) in libtensorflow-core.a(session_factory.o)\ntensorflow::TrackingAllocator::TrackingAllocator(tensorflow::Allocator*, bool) in libtensorflow-core.a(tracking_allocator.o)\ntensorflow::TrackingAllocator::TrackingAllocator(tensorflow::Allocator*, bool) in libtensorflow-core.a(tracking_allocator.o)\n\"nsync::nsync_mu_lock(nsync::nsync_mu_s_)\", referenced from:\ntensorflow::FileSystemRegistryImpl::Register(std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator > const&, std::__1::function<tensorflow::FileSystem ()>) in libtensorflow-core.a(env.o)\ntensorflow::FileSystemRegistryImpl::Lookup(std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator > const&) in libtensorflow-core.a(env.o)\ntensorflow::FileSystemRegistryImpl::GetRegisteredFileSystemSchemes(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator > > >) in libtensorflow-core.a(env.o)\ntensorflow::CPUAllocator::AllocateRaw(unsigned long, unsigned long) in libtensorflow-core.a(allocator.o)\ntensorflow::CPUAllocator::DeallocateRaw(void) in libtensorflow-core.a(allocator.o)\ntensorflow::CPUAllocator::GetStats(tensorflow::AllocatorStats*) in libtensorflow-core.a(allocator.o)\ntensorflow::SessionFactory::Register(std::__1::basic_string<char, std::__1::char_traits, std::_1::allocator > const&, tensorflow::SessionFactory*) in libtensorflow-core.a(session_factory.o)\n...\n\"nsync::nsync_mu_unlock(nsync::nsync_mu_s)\", referenced from:\ntensorflow::FileSystemRegistryImpl::Register(std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator > const&, std::__1::function<tensorflow::FileSystem ()>) in libtensorflow-core.a(env.o)\ntensorflow::FileSystemRegistryImpl::Lookup(std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator > const&) in libtensorflow-core.a(env.o)\ntensorflow::FileSystemRegistryImpl::GetRegisteredFileSystemSchemes(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator > > >) in libtensorflow-core.a(env.o)\ntensorflow::CPUAllocator::AllocateRaw(unsigned long, unsigned long) in libtensorflow-core.a(allocator.o)\ntensorflow::CPUAllocator::DeallocateRaw(void) in libtensorflow-core.a(allocator.o)\ntensorflow::CPUAllocator::GetStats(tensorflow::AllocatorStats*) in libtensorflow-core.a(allocator.o)\ntensorflow::SessionFactory::Register(std::__1::basic_string<char, std::__1::char_traits, std::__1::allocator > const&, tensorflow::SessionFactory*) in libtensorflow-core.a(session_factory.o)\n...\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)", "body": "Hello,\r\n\r\nI downloaded the latest release 1.4.0 and builded it for iOS with build_all_ios.sh, and can successfully build libtensorflow-core.a, libprotobuf-lite.a and libprotobuf.a\r\n\r\nbut error happened when link these libs to iOS project, the detail info as follows, can anybody know how to fix it? thanks\r\n\r\nUndefined symbols for architecture x86_64:\r\n  \"nsync::nsync_mu_init(nsync::nsync_mu_s_*)\", referenced from:\r\n      tensorflow::Env::Env() in libtensorflow-core.a(env.o)\r\n      __GLOBAL__sub_I_allocator.cc in libtensorflow-core.a(allocator.o)\r\n      tensorflow::SessionFactory::Register(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, tensorflow::SessionFactory*) in libtensorflow-core.a(session_factory.o)\r\n      tensorflow::SessionFactory::GetFactory(tensorflow::SessionOptions const&, tensorflow::SessionFactory**) in libtensorflow-core.a(session_factory.o)\r\n      tensorflow::TrackingAllocator::TrackingAllocator(tensorflow::Allocator*, bool) in libtensorflow-core.a(tracking_allocator.o)\r\n      tensorflow::TrackingAllocator::TrackingAllocator(tensorflow::Allocator*, bool) in libtensorflow-core.a(tracking_allocator.o)\r\n  \"nsync::nsync_mu_lock(nsync::nsync_mu_s_*)\", referenced from:\r\n      tensorflow::FileSystemRegistryImpl::Register(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::function<tensorflow::FileSystem* ()>) in libtensorflow-core.a(env.o)\r\n      tensorflow::FileSystemRegistryImpl::Lookup(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) in libtensorflow-core.a(env.o)\r\n      tensorflow::FileSystemRegistryImpl::GetRegisteredFileSystemSchemes(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >*) in libtensorflow-core.a(env.o)\r\n      tensorflow::CPUAllocator::AllocateRaw(unsigned long, unsigned long) in libtensorflow-core.a(allocator.o)\r\n      tensorflow::CPUAllocator::DeallocateRaw(void*) in libtensorflow-core.a(allocator.o)\r\n      tensorflow::CPUAllocator::GetStats(tensorflow::AllocatorStats*) in libtensorflow-core.a(allocator.o)\r\n      tensorflow::SessionFactory::Register(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, tensorflow::SessionFactory*) in libtensorflow-core.a(session_factory.o)\r\n      ...\r\n  \"nsync::nsync_mu_unlock(nsync::nsync_mu_s_*)\", referenced from:\r\n      tensorflow::FileSystemRegistryImpl::Register(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::function<tensorflow::FileSystem* ()>) in libtensorflow-core.a(env.o)\r\n      tensorflow::FileSystemRegistryImpl::Lookup(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) in libtensorflow-core.a(env.o)\r\n      tensorflow::FileSystemRegistryImpl::GetRegisteredFileSystemSchemes(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >*) in libtensorflow-core.a(env.o)\r\n      tensorflow::CPUAllocator::AllocateRaw(unsigned long, unsigned long) in libtensorflow-core.a(allocator.o)\r\n      tensorflow::CPUAllocator::DeallocateRaw(void*) in libtensorflow-core.a(allocator.o)\r\n      tensorflow::CPUAllocator::GetStats(tensorflow::AllocatorStats*) in libtensorflow-core.a(allocator.o)\r\n      tensorflow::SessionFactory::Register(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, tensorflow::SessionFactory*) in libtensorflow-core.a(session_factory.o)\r\n      ...\r\nld: symbol(s) not found for architecture x86_64\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)"}
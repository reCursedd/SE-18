{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/232189990", "html_url": "https://github.com/tensorflow/tensorflow/issues/3270#issuecomment-232189990", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/3270", "id": 232189990, "node_id": "MDEyOklzc3VlQ29tbWVudDIzMjE4OTk5MA==", "user": {"login": "lukaszkaiser", "id": 684901, "node_id": "MDQ6VXNlcjY4NDkwMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/684901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaszkaiser", "html_url": "https://github.com/lukaszkaiser", "followers_url": "https://api.github.com/users/lukaszkaiser/followers", "following_url": "https://api.github.com/users/lukaszkaiser/following{/other_user}", "gists_url": "https://api.github.com/users/lukaszkaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaszkaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaszkaiser/subscriptions", "organizations_url": "https://api.github.com/users/lukaszkaiser/orgs", "repos_url": "https://api.github.com/users/lukaszkaiser/repos", "events_url": "https://api.github.com/users/lukaszkaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaszkaiser/received_events", "type": "User", "site_admin": false}, "created_at": "2016-07-12T21:39:17Z", "updated_at": "2016-07-12T21:39:17Z", "author_association": "MEMBER", "body_html": "<p>I think what you did is good and you're almost there. The one problem you see is due to <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/translate/seq2seq_model.py#L166\">this line</a>. The Saver() object takes a list of variables, and it's tf.all_variables(), so it's trying to restore them all. While your checkpoint only has a subset of them (not the en_fr ones), so you get an error.</p>\n<p>I think you can, for example, just create 2 savers and filter the variables to only include the relevant ones, e.g, <code>self.saver_en-fr = Saver([v for v in tf.all_variables() if 'en_fr' in v.name])</code>. And then call restore twice, on both savers. Hope that works, let me know!</p>", "body_text": "I think what you did is good and you're almost there. The one problem you see is due to this line. The Saver() object takes a list of variables, and it's tf.all_variables(), so it's trying to restore them all. While your checkpoint only has a subset of them (not the en_fr ones), so you get an error.\nI think you can, for example, just create 2 savers and filter the variables to only include the relevant ones, e.g, self.saver_en-fr = Saver([v for v in tf.all_variables() if 'en_fr' in v.name]). And then call restore twice, on both savers. Hope that works, let me know!", "body": "I think what you did is good and you're almost there. The one problem you see is due to [this line](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/rnn/translate/seq2seq_model.py#L166). The Saver() object takes a list of variables, and it's tf.all_variables(), so it's trying to restore them all. While your checkpoint only has a subset of them (not the en_fr ones), so you get an error.\n\nI think you can, for example, just create 2 savers and filter the variables to only include the relevant ones, e.g, `self.saver_en-fr = Saver([v for v in tf.all_variables() if 'en_fr' in v.name])`. And then call restore twice, on both savers. Hope that works, let me know!\n"}
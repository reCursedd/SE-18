{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/201921199", "html_url": "https://github.com/tensorflow/tensorflow/issues/1658#issuecomment-201921199", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/1658", "id": 201921199, "node_id": "MDEyOklzc3VlQ29tbWVudDIwMTkyMTE5OQ==", "user": {"login": "vrv", "id": 463737, "node_id": "MDQ6VXNlcjQ2MzczNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/463737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrv", "html_url": "https://github.com/vrv", "followers_url": "https://api.github.com/users/vrv/followers", "following_url": "https://api.github.com/users/vrv/following{/other_user}", "gists_url": "https://api.github.com/users/vrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrv/subscriptions", "organizations_url": "https://api.github.com/users/vrv/orgs", "repos_url": "https://api.github.com/users/vrv/repos", "events_url": "https://api.github.com/users/vrv/events{/privacy}", "received_events_url": "https://api.github.com/users/vrv/received_events", "type": "User", "site_admin": false}, "created_at": "2016-03-26T20:05:35Z", "updated_at": "2016-03-26T20:05:35Z", "author_association": "CONTRIBUTOR", "body_html": "<p>Okay I partially take this back.  It is weird that the stream executor code is called at all, but I don't think that's the cause of the problem.  I tried reproducing your problem at HEAD, spawning 48 processes with CUDA_VISIBLE_DEVICES=\"\" and I didn't get any std::system_error.</p>\n<p>My guess from looking up the error is that each session is creating a number of std::threads, and at some point one of them blows up.</p>\n<p>Another thing to try for debugging is to set the intra_op_parallelism_threads and intra_op_parallelism_threads in the ConfigProto to smaller values (they default to the number of cores on the machine).</p>\n<p>As for why this causes problems only with the GPU pip, I'm not entirely sure yet :)</p>", "body_text": "Okay I partially take this back.  It is weird that the stream executor code is called at all, but I don't think that's the cause of the problem.  I tried reproducing your problem at HEAD, spawning 48 processes with CUDA_VISIBLE_DEVICES=\"\" and I didn't get any std::system_error.\nMy guess from looking up the error is that each session is creating a number of std::threads, and at some point one of them blows up.\nAnother thing to try for debugging is to set the intra_op_parallelism_threads and intra_op_parallelism_threads in the ConfigProto to smaller values (they default to the number of cores on the machine).\nAs for why this causes problems only with the GPU pip, I'm not entirely sure yet :)", "body": "Okay I partially take this back.  It is weird that the stream executor code is called at all, but I don't think that's the cause of the problem.  I tried reproducing your problem at HEAD, spawning 48 processes with CUDA_VISIBLE_DEVICES=\"\" and I didn't get any std::system_error.\n\nMy guess from looking up the error is that each session is creating a number of std::threads, and at some point one of them blows up.\n\nAnother thing to try for debugging is to set the intra_op_parallelism_threads and intra_op_parallelism_threads in the ConfigProto to smaller values (they default to the number of cores on the machine).\n\nAs for why this causes problems only with the GPU pip, I'm not entirely sure yet :)\n"}
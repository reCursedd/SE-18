{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14056", "id": 149332748, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ5MzMyNzQ4", "html_url": "https://github.com/tensorflow/tensorflow/pull/14056", "diff_url": "https://github.com/tensorflow/tensorflow/pull/14056.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/14056.patch", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14056", "number": 14056, "state": "closed", "locked": false, "title": "Half Normal Distribution (and inverse error function)", "user": {"login": "cshenton", "id": 14693516, "node_id": "MDQ6VXNlcjE0NjkzNTE2", "avatar_url": "https://avatars0.githubusercontent.com/u/14693516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cshenton", "html_url": "https://github.com/cshenton", "followers_url": "https://api.github.com/users/cshenton/followers", "following_url": "https://api.github.com/users/cshenton/following{/other_user}", "gists_url": "https://api.github.com/users/cshenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/cshenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cshenton/subscriptions", "organizations_url": "https://api.github.com/users/cshenton/orgs", "repos_url": "https://api.github.com/users/cshenton/repos", "events_url": "https://api.github.com/users/cshenton/events{/privacy}", "received_events_url": "https://api.github.com/users/cshenton/received_events", "type": "User", "site_admin": false}, "body": "## Inverse Error Function\r\n\r\nAdded `erfinv` as a simple function of `ndtri` (the api mirrors the approach taken in `scipy.special`. Mainly to prevent distributions with methods in terms of the inverse error function reimplementing their own wrappers around `ndtri`.\r\n\r\n## Half Normal Distribution\r\n```python\r\nX ~ Normal(0.0, scale)\r\nY = |X|\r\n# then Y ~ HalfNormal(scale)\r\n```\r\n\r\nAdded the Half Normal distribution to `contrib.distributions`. Main things to look at is how I'm dealing with the pdf discontinuity.\r\n\r\nA discontinuity in the pdf that sends values to 0.0 is easy to represent in `prob`, (by multiplying my a tensor with 0.0s at the relevant positions) than `log_prob` (which requires masking -inf wherever x < 0). I'd be interested if anyone has any suggestions for correct ways to implement the latter, as I think this is a case where `log_prob` is more numerically stable (along the support of the distribution that is).", "created_at": "2017-10-28T12:08:47Z", "updated_at": "2017-11-29T21:15:39Z", "closed_at": "2017-11-29T21:15:39Z", "merged_at": "2017-11-29T21:15:39Z", "merge_commit_sha": "ec4d31e82c2237824276eef302d9edc38c28c3a2", "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "milestone": null, "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14056/commits", "review_comments_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14056/comments", "review_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14056/comments", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/f474884a7c6269c5b945ec6f558a42f5af3b3871", "head": {"label": "cshenton:halfnormal", "ref": "halfnormal", "sha": "f474884a7c6269c5b945ec6f558a42f5af3b3871", "user": {"login": "cshenton", "id": 14693516, "node_id": "MDQ6VXNlcjE0NjkzNTE2", "avatar_url": "https://avatars0.githubusercontent.com/u/14693516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cshenton", "html_url": "https://github.com/cshenton", "followers_url": "https://api.github.com/users/cshenton/followers", "following_url": "https://api.github.com/users/cshenton/following{/other_user}", "gists_url": "https://api.github.com/users/cshenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/cshenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cshenton/subscriptions", "organizations_url": "https://api.github.com/users/cshenton/orgs", "repos_url": "https://api.github.com/users/cshenton/repos", "events_url": "https://api.github.com/users/cshenton/events{/privacy}", "received_events_url": "https://api.github.com/users/cshenton/received_events", "type": "User", "site_admin": false}, "repo": {"id": 107736872, "node_id": "MDEwOlJlcG9zaXRvcnkxMDc3MzY4NzI=", "name": "tensorflow", "full_name": "cshenton/tensorflow", "private": false, "owner": {"login": "cshenton", "id": 14693516, "node_id": "MDQ6VXNlcjE0NjkzNTE2", "avatar_url": "https://avatars0.githubusercontent.com/u/14693516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cshenton", "html_url": "https://github.com/cshenton", "followers_url": "https://api.github.com/users/cshenton/followers", "following_url": "https://api.github.com/users/cshenton/following{/other_user}", "gists_url": "https://api.github.com/users/cshenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/cshenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cshenton/subscriptions", "organizations_url": "https://api.github.com/users/cshenton/orgs", "repos_url": "https://api.github.com/users/cshenton/repos", "events_url": "https://api.github.com/users/cshenton/events{/privacy}", "received_events_url": "https://api.github.com/users/cshenton/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/cshenton/tensorflow", "description": "Computation using data flow graphs for scalable machine learning", "fork": true, "url": "https://api.github.com/repos/cshenton/tensorflow", "forks_url": "https://api.github.com/repos/cshenton/tensorflow/forks", "keys_url": "https://api.github.com/repos/cshenton/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/cshenton/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/cshenton/tensorflow/teams", "hooks_url": "https://api.github.com/repos/cshenton/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/cshenton/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/cshenton/tensorflow/events", "assignees_url": "https://api.github.com/repos/cshenton/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/cshenton/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/cshenton/tensorflow/tags", "blobs_url": "https://api.github.com/repos/cshenton/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/cshenton/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/cshenton/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/cshenton/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/cshenton/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/cshenton/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/cshenton/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/cshenton/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/cshenton/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/cshenton/tensorflow/subscription", "commits_url": "https://api.github.com/repos/cshenton/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/cshenton/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/cshenton/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/cshenton/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/cshenton/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/cshenton/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/cshenton/tensorflow/merges", "archive_url": "https://api.github.com/repos/cshenton/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/cshenton/tensorflow/downloads", "issues_url": "https://api.github.com/repos/cshenton/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/cshenton/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/cshenton/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/cshenton/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/cshenton/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/cshenton/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/cshenton/tensorflow/deployments", "created_at": "2017-10-20T23:48:59Z", "updated_at": "2017-10-20T23:49:32Z", "pushed_at": "2017-11-21T02:39:21Z", "git_url": "git://github.com/cshenton/tensorflow.git", "ssh_url": "git@github.com:cshenton/tensorflow.git", "clone_url": "https://github.com/cshenton/tensorflow.git", "svn_url": "https://github.com/cshenton/tensorflow", "homepage": "http://tensorflow.org", "size": 130165, "stargazers_count": 0, "watchers_count": 0, "language": "C++", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "tensorflow:master", "ref": "master", "sha": "3c2bdbea5b285c377a07814046a376b189617bc7", "user": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 45717250, "node_id": "MDEwOlJlcG9zaXRvcnk0NTcxNzI1MA==", "name": "tensorflow", "full_name": "tensorflow/tensorflow", "private": false, "owner": {"login": "tensorflow", "id": 15658638, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE1NjU4NjM4", "avatar_url": "https://avatars1.githubusercontent.com/u/15658638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tensorflow", "html_url": "https://github.com/tensorflow", "followers_url": "https://api.github.com/users/tensorflow/followers", "following_url": "https://api.github.com/users/tensorflow/following{/other_user}", "gists_url": "https://api.github.com/users/tensorflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/tensorflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tensorflow/subscriptions", "organizations_url": "https://api.github.com/users/tensorflow/orgs", "repos_url": "https://api.github.com/users/tensorflow/repos", "events_url": "https://api.github.com/users/tensorflow/events{/privacy}", "received_events_url": "https://api.github.com/users/tensorflow/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/tensorflow/tensorflow", "description": "An Open Source Machine Learning Framework for Everyone", "fork": false, "url": "https://api.github.com/repos/tensorflow/tensorflow", "forks_url": "https://api.github.com/repos/tensorflow/tensorflow/forks", "keys_url": "https://api.github.com/repos/tensorflow/tensorflow/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/tensorflow/tensorflow/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/tensorflow/tensorflow/teams", "hooks_url": "https://api.github.com/repos/tensorflow/tensorflow/hooks", "issue_events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/events{/number}", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/events", "assignees_url": "https://api.github.com/repos/tensorflow/tensorflow/assignees{/user}", "branches_url": "https://api.github.com/repos/tensorflow/tensorflow/branches{/branch}", "tags_url": "https://api.github.com/repos/tensorflow/tensorflow/tags", "blobs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/tensorflow/tensorflow/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/tensorflow/tensorflow/git/refs{/sha}", "trees_url": "https://api.github.com/repos/tensorflow/tensorflow/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/tensorflow/tensorflow/statuses/{sha}", "languages_url": "https://api.github.com/repos/tensorflow/tensorflow/languages", "stargazers_url": "https://api.github.com/repos/tensorflow/tensorflow/stargazers", "contributors_url": "https://api.github.com/repos/tensorflow/tensorflow/contributors", "subscribers_url": "https://api.github.com/repos/tensorflow/tensorflow/subscribers", "subscription_url": "https://api.github.com/repos/tensorflow/tensorflow/subscription", "commits_url": "https://api.github.com/repos/tensorflow/tensorflow/commits{/sha}", "git_commits_url": "https://api.github.com/repos/tensorflow/tensorflow/git/commits{/sha}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/comments{/number}", "issue_comment_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments{/number}", "contents_url": "https://api.github.com/repos/tensorflow/tensorflow/contents/{+path}", "compare_url": "https://api.github.com/repos/tensorflow/tensorflow/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/tensorflow/tensorflow/merges", "archive_url": "https://api.github.com/repos/tensorflow/tensorflow/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/tensorflow/tensorflow/downloads", "issues_url": "https://api.github.com/repos/tensorflow/tensorflow/issues{/number}", "pulls_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls{/number}", "milestones_url": "https://api.github.com/repos/tensorflow/tensorflow/milestones{/number}", "notifications_url": "https://api.github.com/repos/tensorflow/tensorflow/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/labels{/name}", "releases_url": "https://api.github.com/repos/tensorflow/tensorflow/releases{/id}", "deployments_url": "https://api.github.com/repos/tensorflow/tensorflow/deployments", "created_at": "2015-11-07T01:19:20Z", "updated_at": "2018-11-24T19:13:45Z", "pushed_at": "2018-11-24T18:40:19Z", "git_url": "git://github.com/tensorflow/tensorflow.git", "ssh_url": "git@github.com:tensorflow/tensorflow.git", "clone_url": "https://github.com/tensorflow/tensorflow.git", "svn_url": "https://github.com/tensorflow/tensorflow", "homepage": "https://tensorflow.org", "size": 284546, "stargazers_count": 115174, "watchers_count": 115174, "language": "C++", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 69944, "mirror_url": null, "archived": false, "open_issues_count": 1759, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "forks": 69944, "open_issues": 1759, "watchers": 115174, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14056"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/14056"}, "issue": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/14056"}, "comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/issues/14056/comments"}, "review_comments": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14056/comments"}, "review_comment": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/14056/commits"}, "statuses": {"href": "https://api.github.com/repos/tensorflow/tensorflow/statuses/f474884a7c6269c5b945ec6f558a42f5af3b3871"}}, "author_association": "CONTRIBUTOR", "body_html": "<h2>Inverse Error Function</h2>\n<p>Added <code>erfinv</code> as a simple function of <code>ndtri</code> (the api mirrors the approach taken in <code>scipy.special</code>. Mainly to prevent distributions with methods in terms of the inverse error function reimplementing their own wrappers around <code>ndtri</code>.</p>\n<h2>Half Normal Distribution</h2>\n<div class=\"highlight highlight-source-python\"><pre>X <span class=\"pl-k\">~</span> Normal(<span class=\"pl-c1\">0.0</span>, scale)\nY <span class=\"pl-k\">=</span> <span class=\"pl-k\">|</span>X<span class=\"pl-k\">|</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> then Y ~ HalfNormal(scale)</span></pre></div>\n<p>Added the Half Normal distribution to <code>contrib.distributions</code>. Main things to look at is how I'm dealing with the pdf discontinuity.</p>\n<p>A discontinuity in the pdf that sends values to 0.0 is easy to represent in <code>prob</code>, (by multiplying my a tensor with 0.0s at the relevant positions) than <code>log_prob</code> (which requires masking -inf wherever x &lt; 0). I'd be interested if anyone has any suggestions for correct ways to implement the latter, as I think this is a case where <code>log_prob</code> is more numerically stable (along the support of the distribution that is).</p>", "body_text": "Inverse Error Function\nAdded erfinv as a simple function of ndtri (the api mirrors the approach taken in scipy.special. Mainly to prevent distributions with methods in terms of the inverse error function reimplementing their own wrappers around ndtri.\nHalf Normal Distribution\nX ~ Normal(0.0, scale)\nY = |X|\n# then Y ~ HalfNormal(scale)\nAdded the Half Normal distribution to contrib.distributions. Main things to look at is how I'm dealing with the pdf discontinuity.\nA discontinuity in the pdf that sends values to 0.0 is easy to represent in prob, (by multiplying my a tensor with 0.0s at the relevant positions) than log_prob (which requires masking -inf wherever x < 0). I'd be interested if anyone has any suggestions for correct ways to implement the latter, as I think this is a case where log_prob is more numerically stable (along the support of the distribution that is).", "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "sb2nov", "id": 1517779, "node_id": "MDQ6VXNlcjE1MTc3Nzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1517779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sb2nov", "html_url": "https://github.com/sb2nov", "followers_url": "https://api.github.com/users/sb2nov/followers", "following_url": "https://api.github.com/users/sb2nov/following{/other_user}", "gists_url": "https://api.github.com/users/sb2nov/gists{/gist_id}", "starred_url": "https://api.github.com/users/sb2nov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sb2nov/subscriptions", "organizations_url": "https://api.github.com/users/sb2nov/orgs", "repos_url": "https://api.github.com/users/sb2nov/repos", "events_url": "https://api.github.com/users/sb2nov/events{/privacy}", "received_events_url": "https://api.github.com/users/sb2nov/received_events", "type": "User", "site_admin": false}, "comments": 12, "review_comments": 2, "maintainer_can_modify": false, "commits": 16, "additions": 560, "deletions": 0, "changed_files": 6}
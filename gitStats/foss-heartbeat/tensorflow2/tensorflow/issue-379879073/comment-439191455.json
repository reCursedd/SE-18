{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/439191455", "html_url": "https://github.com/tensorflow/tensorflow/issues/23691#issuecomment-439191455", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23691", "id": 439191455, "node_id": "MDEyOklzc3VlQ29tbWVudDQzOTE5MTQ1NQ==", "user": {"login": "Hoeze", "id": 1200058, "node_id": "MDQ6VXNlcjEyMDAwNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1200058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hoeze", "html_url": "https://github.com/Hoeze", "followers_url": "https://api.github.com/users/Hoeze/followers", "following_url": "https://api.github.com/users/Hoeze/following{/other_user}", "gists_url": "https://api.github.com/users/Hoeze/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hoeze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hoeze/subscriptions", "organizations_url": "https://api.github.com/users/Hoeze/orgs", "repos_url": "https://api.github.com/users/Hoeze/repos", "events_url": "https://api.github.com/users/Hoeze/events{/privacy}", "received_events_url": "https://api.github.com/users/Hoeze/received_events", "type": "User", "site_admin": false}, "created_at": "2018-11-15T21:11:10Z", "updated_at": "2018-11-15T21:11:31Z", "author_association": "NONE", "body_html": "<p><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/hovercards?user_id=5061\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/alextp\">@alextp</a> Thanks for your help, I will try to.</p>\n<p>For the moment, I can show you the source code, but it's maybe little bit hard to understand.<br>\nHere, I set up a tf.Variable:<br>\n<a href=\"https://github.com/theislab/batchglm/blob/a305c6cb1438c9fa728a931fe67b2a1b2f31867f/batchglm/train/tf/rsa/base.py#L379\">https://github.com/theislab/batchglm/blob/a305c6cb1438c9fa728a931fe67b2a1b2f31867f/batchglm/train/tf/rsa/base.py#L379</a></p>\n<div class=\"highlight highlight-source-python\"><pre>mixture_logits <span class=\"pl-k\">=</span> tf.Variable(init_mixture_logits, <span class=\"pl-v\">name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>mixture_logits<span class=\"pl-pds\">\"</span></span>)\n[<span class=\"pl-c1\">...</span>]\n<span class=\"pl-c1\">self</span>.mixture_logits_var <span class=\"pl-k\">=</span> mixture_logits</pre></div>\n<p>This tf.Variable will be passed to <code>scatter_update</code> here:<br>\n<a href=\"https://github.com/theislab/batchglm/blob/a305c6cb1438c9fa728a931fe67b2a1b2f31867f/batchglm/train/tf/rsa/estimator.py#L83-L87\">https://github.com/theislab/batchglm/blob/a305c6cb1438c9fa728a931fe67b2a1b2f31867f/batchglm/train/tf/rsa/estimator.py#L83-L87</a></p>\n<div class=\"highlight highlight-source-python\"><pre>mixture_EM_update <span class=\"pl-k\">=</span> tf.scatter_update(\n    <span class=\"pl-v\">ref</span><span class=\"pl-k\">=</span>model_vars.mixture_logits_var,\n    <span class=\"pl-v\">indices</span><span class=\"pl-k\">=</span>idx,\n    <span class=\"pl-v\">updates</span><span class=\"pl-k\">=</span>tf.transpose(model.estimated_mixture_log_prob)\n)</pre></div>\n<p>So, I really don't get how <code>model_vars.mixture_logits_var</code> could change its type;<br>\nespecially since the same code works in my own <code>map_reduce</code> implementation:<br>\n<a href=\"https://github.com/theislab/batchglm/blob/4daf7d7f27955764e3871fc8296d1024808ac785/batchglm/train/tf/rsa/estimator.py#L76-L80\">https://github.com/theislab/batchglm/blob/4daf7d7f27955764e3871fc8296d1024808ac785/batchglm/train/tf/rsa/estimator.py#L76-L80</a></p>", "body_text": "@alextp Thanks for your help, I will try to.\nFor the moment, I can show you the source code, but it's maybe little bit hard to understand.\nHere, I set up a tf.Variable:\nhttps://github.com/theislab/batchglm/blob/a305c6cb1438c9fa728a931fe67b2a1b2f31867f/batchglm/train/tf/rsa/base.py#L379\nmixture_logits = tf.Variable(init_mixture_logits, name=\"mixture_logits\")\n[...]\nself.mixture_logits_var = mixture_logits\nThis tf.Variable will be passed to scatter_update here:\nhttps://github.com/theislab/batchglm/blob/a305c6cb1438c9fa728a931fe67b2a1b2f31867f/batchglm/train/tf/rsa/estimator.py#L83-L87\nmixture_EM_update = tf.scatter_update(\n    ref=model_vars.mixture_logits_var,\n    indices=idx,\n    updates=tf.transpose(model.estimated_mixture_log_prob)\n)\nSo, I really don't get how model_vars.mixture_logits_var could change its type;\nespecially since the same code works in my own map_reduce implementation:\nhttps://github.com/theislab/batchglm/blob/4daf7d7f27955764e3871fc8296d1024808ac785/batchglm/train/tf/rsa/estimator.py#L76-L80", "body": "@alextp Thanks for your help, I will try to.\r\n\r\nFor the moment, I can show you the source code, but it's maybe little bit hard to understand.\r\nHere, I set up a tf.Variable:\r\nhttps://github.com/theislab/batchglm/blob/a305c6cb1438c9fa728a931fe67b2a1b2f31867f/batchglm/train/tf/rsa/base.py#L379\r\n```python3\r\nmixture_logits = tf.Variable(init_mixture_logits, name=\"mixture_logits\")\r\n[...]\r\nself.mixture_logits_var = mixture_logits\r\n```\r\nThis tf.Variable will be passed to `scatter_update` here:\r\nhttps://github.com/theislab/batchglm/blob/a305c6cb1438c9fa728a931fe67b2a1b2f31867f/batchglm/train/tf/rsa/estimator.py#L83-L87\r\n```python3\r\nmixture_EM_update = tf.scatter_update(\r\n    ref=model_vars.mixture_logits_var,\r\n    indices=idx,\r\n    updates=tf.transpose(model.estimated_mixture_log_prob)\r\n)\r\n```\r\n\r\nSo, I really don't get how `model_vars.mixture_logits_var` could change its type; \r\nespecially since the same code works in my own `map_reduce` implementation:\r\nhttps://github.com/theislab/batchglm/blob/4daf7d7f27955764e3871fc8296d1024808ac785/batchglm/train/tf/rsa/estimator.py#L76-L80"}
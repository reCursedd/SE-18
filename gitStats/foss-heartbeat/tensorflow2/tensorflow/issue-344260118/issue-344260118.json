{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21109", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21109/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21109/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/21109/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/21109", "id": 344260118, "node_id": "MDExOlB1bGxSZXF1ZXN0MjAzNjk4MDgy", "number": 21109, "title": "make build_pip_package work again on rpi3", "user": {"login": "freedomtan", "id": 3395998, "node_id": "MDQ6VXNlcjMzOTU5OTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3395998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freedomtan", "html_url": "https://github.com/freedomtan", "followers_url": "https://api.github.com/users/freedomtan/followers", "following_url": "https://api.github.com/users/freedomtan/following{/other_user}", "gists_url": "https://api.github.com/users/freedomtan/gists{/gist_id}", "starred_url": "https://api.github.com/users/freedomtan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freedomtan/subscriptions", "organizations_url": "https://api.github.com/users/freedomtan/orgs", "repos_url": "https://api.github.com/users/freedomtan/repos", "events_url": "https://api.github.com/users/freedomtan/events{/privacy}", "received_events_url": "https://api.github.com/users/freedomtan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 419840263, "node_id": "MDU6TGFiZWw0MTk4NDAyNjM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20testing%20(then%20merge)", "name": "awaiting testing (then merge)", "color": "c2e0c6", "default": false}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-07-25T01:37:55Z", "updated_at": "2018-08-16T22:24:17Z", "closed_at": "2018-08-16T22:24:17Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/21109", "html_url": "https://github.com/tensorflow/tensorflow/pull/21109", "diff_url": "https://github.com/tensorflow/tensorflow/pull/21109.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/21109.patch"}, "body_html": "<p>make something like</p>\n<pre><code>bazel build --config opt --local_resources 1024.0,0.5,0.5 --cxxopt=-mfpu=neon-vfpv4 --cxxopt=-ftree-vectorize --cxxopt=-funsafe-math-optimizations --cxxopt=-ftree-loop-vectorize --cxxopt=-fomit-frame-pointer //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n<p>work.</p>\n<p>When building tensorflow pip package natively on RPI 3 (yes, I know it's slow, not recommended), I saw error message like</p>\n<pre><code>ERROR: /home/pi/work/tensorflow/tensorflow/BUILD:589:1: Executing genrule //tensorflow:tensorflow_python_api_gen failed (Exit 1)\nTraceback (most recent call last):\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in &lt;module&gt;\n    from tensorflow.python.tools.api.generator import doc_srcs\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 49, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 74, in &lt;module&gt;\n    raise ImportError(msg)\nImportError: Traceback (most recent call last):\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 58, in &lt;module&gt;\n    from tensorflow.python.pywrap_tensorflow_internal import *\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in &lt;module&gt;\n    _pywrap_tensorflow_internal = swig_import_helper()\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\nImportError: /home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN10tensorflow9ConcatCPUINS_8bfloat16EEEvPNS_10DeviceBaseERKSt6vectorISt10unique_ptrINS_6TTypesIT_Li2EiE11ConstMatrixESt14default_deleteIS9_EESaISC_EEPNS8_6MatrixE\n\n</code></pre>\n<p>Demangling with <code>c++filt</code></p>\n<pre><code>$ c++filt _ZN10tensorflow9ConcatCPUINS_8bfloat16EEEvPNS_10DeviceBaseERKSt6vectorISt10unique_ptrINS_6TTypesIT_Li2EiE11ConstMatrixESt14default_deleteIS9_EESaISC_EEPNS8_6MatrixE \nvoid tensorflow::ConcatCPU&lt;tensorflow::bfloat16&gt;(tensorflow::DeviceBase*, std::vector&lt;std::unique_ptr&lt;tensorflow::TTypes&lt;tensorflow::bfloat16, 2, int&gt;::ConstMatrix, std::default_delete&lt;tensorflow::TTypes&lt;tensorflow::bfloat16, 2, int&gt;::ConstMatrix&gt; &gt;, std::allocator&lt;std::unique_ptr&lt;tensorflow::TTypes&lt;tensorflow::bfloat16, 2, int&gt;::ConstMatrix, std::default_delete&lt;tensorflow::TTypes&lt;tensorflow::bfloat16, 2, int&gt;::ConstMatrix&gt; &gt; &gt; &gt; const&amp;, tensorflow::TTypes&lt;tensorflow::bfloat16, 2, int&gt;::Matrix*)\n</code></pre>\n<p>we can see that we need instantiation for <code>ConcatCPU&lt;bfloat16&gt;(.....)</code>.</p>\n<p>Tested on Raspbian Jun-2018.</p>", "body_text": "make something like\nbazel build --config opt --local_resources 1024.0,0.5,0.5 --cxxopt=-mfpu=neon-vfpv4 --cxxopt=-ftree-vectorize --cxxopt=-funsafe-math-optimizations --cxxopt=-ftree-loop-vectorize --cxxopt=-fomit-frame-pointer //tensorflow/tools/pip_package:build_pip_package\n\nwork.\nWhen building tensorflow pip package natively on RPI 3 (yes, I know it's slow, not recommended), I saw error message like\nERROR: /home/pi/work/tensorflow/tensorflow/BUILD:589:1: Executing genrule //tensorflow:tensorflow_python_api_gen failed (Exit 1)\nTraceback (most recent call last):\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\n    from tensorflow.python.tools.api.generator import doc_srcs\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 49, in <module>\n    from tensorflow.python import pywrap_tensorflow\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 74, in <module>\n    raise ImportError(msg)\nImportError: Traceback (most recent call last):\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\n    from tensorflow.python.pywrap_tensorflow_internal import *\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\n    _pywrap_tensorflow_internal = swig_import_helper()\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\nImportError: /home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN10tensorflow9ConcatCPUINS_8bfloat16EEEvPNS_10DeviceBaseERKSt6vectorISt10unique_ptrINS_6TTypesIT_Li2EiE11ConstMatrixESt14default_deleteIS9_EESaISC_EEPNS8_6MatrixE\n\n\nDemangling with c++filt\n$ c++filt _ZN10tensorflow9ConcatCPUINS_8bfloat16EEEvPNS_10DeviceBaseERKSt6vectorISt10unique_ptrINS_6TTypesIT_Li2EiE11ConstMatrixESt14default_deleteIS9_EESaISC_EEPNS8_6MatrixE \nvoid tensorflow::ConcatCPU<tensorflow::bfloat16>(tensorflow::DeviceBase*, std::vector<std::unique_ptr<tensorflow::TTypes<tensorflow::bfloat16, 2, int>::ConstMatrix, std::default_delete<tensorflow::TTypes<tensorflow::bfloat16, 2, int>::ConstMatrix> >, std::allocator<std::unique_ptr<tensorflow::TTypes<tensorflow::bfloat16, 2, int>::ConstMatrix, std::default_delete<tensorflow::TTypes<tensorflow::bfloat16, 2, int>::ConstMatrix> > > > const&, tensorflow::TTypes<tensorflow::bfloat16, 2, int>::Matrix*)\n\nwe can see that we need instantiation for ConcatCPU<bfloat16>(.....).\nTested on Raspbian Jun-2018.", "body": "make something like\r\n```\r\nbazel build --config opt --local_resources 1024.0,0.5,0.5 --cxxopt=-mfpu=neon-vfpv4 --cxxopt=-ftree-vectorize --cxxopt=-funsafe-math-optimizations --cxxopt=-ftree-loop-vectorize --cxxopt=-fomit-frame-pointer //tensorflow/tools/pip_package:build_pip_package\r\n```\r\nwork.\r\n\r\nWhen building tensorflow pip package natively on RPI 3 (yes, I know it's slow, not recommended), I saw error message like\r\n```\r\nERROR: /home/pi/work/tensorflow/tensorflow/BUILD:589:1: Executing genrule //tensorflow:tensorflow_python_api_gen failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\nImportError: /home/pi/.cache/bazel/_bazel_pi/fab1708ba000bf373adf42719f003e8e/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/_pywrap_tensorflow_internal.so: undefined symbol: _ZN10tensorflow9ConcatCPUINS_8bfloat16EEEvPNS_10DeviceBaseERKSt6vectorISt10unique_ptrINS_6TTypesIT_Li2EiE11ConstMatrixESt14default_deleteIS9_EESaISC_EEPNS8_6MatrixE\r\n\r\n```\r\n\r\nDemangling with `c++filt`\r\n```\r\n$ c++filt _ZN10tensorflow9ConcatCPUINS_8bfloat16EEEvPNS_10DeviceBaseERKSt6vectorISt10unique_ptrINS_6TTypesIT_Li2EiE11ConstMatrixESt14default_deleteIS9_EESaISC_EEPNS8_6MatrixE \r\nvoid tensorflow::ConcatCPU<tensorflow::bfloat16>(tensorflow::DeviceBase*, std::vector<std::unique_ptr<tensorflow::TTypes<tensorflow::bfloat16, 2, int>::ConstMatrix, std::default_delete<tensorflow::TTypes<tensorflow::bfloat16, 2, int>::ConstMatrix> >, std::allocator<std::unique_ptr<tensorflow::TTypes<tensorflow::bfloat16, 2, int>::ConstMatrix, std::default_delete<tensorflow::TTypes<tensorflow::bfloat16, 2, int>::ConstMatrix> > > > const&, tensorflow::TTypes<tensorflow::bfloat16, 2, int>::Matrix*)\r\n```\r\nwe can see that we need instantiation for `ConcatCPU<bfloat16>(.....)`.\r\n\r\nTested on Raspbian Jun-2018."}
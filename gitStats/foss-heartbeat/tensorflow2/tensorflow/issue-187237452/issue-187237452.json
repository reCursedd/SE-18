{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5391", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5391/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5391/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5391/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5391", "id": 187237452, "node_id": "MDU6SXNzdWUxODcyMzc0NTI=", "number": 5391, "title": "[Feature Request] Loop_function argument for seq2seq models", "user": {"login": "Conchylicultor", "id": 9047355, "node_id": "MDQ6VXNlcjkwNDczNTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/9047355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Conchylicultor", "html_url": "https://github.com/Conchylicultor", "followers_url": "https://api.github.com/users/Conchylicultor/followers", "following_url": "https://api.github.com/users/Conchylicultor/following{/other_user}", "gists_url": "https://api.github.com/users/Conchylicultor/gists{/gist_id}", "starred_url": "https://api.github.com/users/Conchylicultor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Conchylicultor/subscriptions", "organizations_url": "https://api.github.com/users/Conchylicultor/orgs", "repos_url": "https://api.github.com/users/Conchylicultor/repos", "events_url": "https://api.github.com/users/Conchylicultor/events{/privacy}", "received_events_url": "https://api.github.com/users/Conchylicultor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-11-04T02:06:26Z", "updated_at": "2017-03-15T22:56:44Z", "closed_at": "2017-03-15T22:56:44Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The RNN decoder has a <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/seq2seq.py#L117\">parameters</a> <code>loop_function</code> which allows to do some pre-processing on the output of the RNN before connecting the output on the next input.</p>\n<p>That would be great to have this parameters for <code>embedding_rnn_seq2seq</code> and <code>embedding_rnn_decoder</code>. For now the only control we can have is no loop function at all when <code>feed_previous=False</code> or an argmax on the output called internally <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/seq2seq.py#L274\">here</a> .</p>\n<p>The loop function parameters should be really useful to sample from the softmax distribution, instead of only taking the most likely output (as it is the case now with <code>feed_previous</code>) or to implement <a href=\"https://arxiv.org/abs/1506.03099\" rel=\"nofollow\">scheduled sampling</a>.</p>\n<p>For now the only solution is to re-create custom versions of <code>embedding_rnn_decoder</code> <code>embedding_rnn_seq2seq</code> just to change this parameters.</p>", "body_text": "The RNN decoder has a parameters loop_function which allows to do some pre-processing on the output of the RNN before connecting the output on the next input.\nThat would be great to have this parameters for embedding_rnn_seq2seq and embedding_rnn_decoder. For now the only control we can have is no loop function at all when feed_previous=False or an argmax on the output called internally here .\nThe loop function parameters should be really useful to sample from the softmax distribution, instead of only taking the most likely output (as it is the case now with feed_previous) or to implement scheduled sampling.\nFor now the only solution is to re-create custom versions of embedding_rnn_decoder embedding_rnn_seq2seq just to change this parameters.", "body": "The RNN decoder has a [parameters](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/seq2seq.py#L117) `loop_function` which allows to do some pre-processing on the output of the RNN before connecting the output on the next input.\r\n\r\nThat would be great to have this parameters for `embedding_rnn_seq2seq` and `embedding_rnn_decoder`. For now the only control we can have is no loop function at all when `feed_previous=False` or an argmax on the output called internally [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/seq2seq.py#L274) .\r\n\r\nThe loop function parameters should be really useful to sample from the softmax distribution, instead of only taking the most likely output (as it is the case now with `feed_previous`) or to implement [scheduled sampling](https://arxiv.org/abs/1506.03099). \r\n\r\nFor now the only solution is to re-create custom versions of `embedding_rnn_decoder` `embedding_rnn_seq2seq` just to change this parameters.\r\n"}
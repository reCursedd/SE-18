{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13062", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13062/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13062/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13062/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13062", "id": 258001536, "node_id": "MDU6SXNzdWUyNTgwMDE1MzY=", "number": 13062, "title": "inline assembly requires more registers than available while cross compiling tensroflow for arm cortex a15 using clang-3.8", "user": {"login": "gopinath-r", "id": 27946633, "node_id": "MDQ6VXNlcjI3OTQ2NjMz", "avatar_url": "https://avatars1.githubusercontent.com/u/27946633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gopinath-r", "html_url": "https://github.com/gopinath-r", "followers_url": "https://api.github.com/users/gopinath-r/followers", "following_url": "https://api.github.com/users/gopinath-r/following{/other_user}", "gists_url": "https://api.github.com/users/gopinath-r/gists{/gist_id}", "starred_url": "https://api.github.com/users/gopinath-r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gopinath-r/subscriptions", "organizations_url": "https://api.github.com/users/gopinath-r/orgs", "repos_url": "https://api.github.com/users/gopinath-r/repos", "events_url": "https://api.github.com/users/gopinath-r/events{/privacy}", "received_events_url": "https://api.github.com/users/gopinath-r/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-15T10:53:14Z", "updated_at": "2017-09-20T22:49:07Z", "closed_at": "2017-09-20T22:49:05Z", "author_association": "NONE", "body_html": "<p>I am trying to cross compile tensorflow for armv7a cortex a15 using clang-3.8 and I am using bazel 0.5.4 to build tensorflow.</p>\n<p>My Environment details are, Ubuntu - 16.04 Clang - 3.8 bazel - 0.5.4 tensorflow source code version - 1.3 target cpu - cortex a15 compiler_flag: \"-O2\"</p>\n<p>The command i am using is<br>\nbazel build --copt=-Wno-c++11-narrowing --crosstool_top=//tools/arm_compiler:toolchain --cpu=armeabi-v7a --verbose_failures --sandbox_debug //tensorflow/tools/pip_package:build_pip_package</p>\n<p>The error is external/gemmlowp/meta/transform_kernels_arm_32.h:5506:7: error: inline assembly requires more registers than available \"ldr r0, %[input_range_min]\\n\"</p>\n<p>The compiler flags are configured as bellow in CROSSTOOL</p>\n<p>toolchain {<br>\nabi_version: \"clang_3.8\"<br>\nabi_libc_version: \"glibc_2.19\"<br>\nbuiltin_sysroot: \"\"<br>\ncompiler: \"clang\"<br>\nhost_system_name: \"armeabi-v7a\"<br>\nneedsPic: true<br>\nsupports_gold_linker: false<br>\nsupports_incremental_linker: false<br>\nsupports_fission: false<br>\nsupports_interface_shared_objects: false<br>\nsupports_normalizing_ar: true<br>\nsupports_start_end_lib: false<br>\nsupports_thin_archives: true<br>\ntarget_libc: \"glibc_2.19\"<br>\ntarget_cpu: \"armeabi-v7a\"<br>\ntarget_system_name: \"arm_a15\"<br>\ntoolchain_identifier: \"clang_linux_armhf\"</p>\n<pre><code>  tool_path { name: \"ar\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ar\" }\n  tool_path { name: \"compat-ld\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ld\" }\n  tool_path { name: \"cpp\" path: \"linaro_linux_gcc/clang_bin/clang\" }\n  tool_path { name: \"dwp\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-dwp\" }\n  tool_path { name: \"gcc\" path: \"linaro_linux_gcc/clang_bin/clang\" }\n  tool_path { name: \"gcov\" path: \"arm-frc-linux-gnueabi/arm-frc-linux-gnueabi-gcov-4.9\" }\n  # C(++) compiles invoke the compiler (as that is the one knowing where\n  # to find libraries), but we provide LD so other rules can invoke the linker.\n  tool_path { name: \"ld\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ld\" }\n  tool_path { name: \"nm\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-nm\" }\n  tool_path { name: \"objcopy\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-objcopy\" }\n  objcopy_embed_flag: \"-I\"\n  objcopy_embed_flag: \"binary\"\n  tool_path { name: \"objdump\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-objdump\" }\n  tool_path { name: \"strip\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-strip\" }\n\n  compiler_flag: \"-target\"\n  compiler_flag: \"armv7a-arm-linux-gnueabihf\"\n  compiler_flag: \"--sysroot=external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc\"\n  compiler_flag: \"-mfloat-abi=hard\"\n  compiler_flag: \"-mcpu=cortex-a15\"\n  compiler_flag: \"-mfpu=neon-vfpv4\"\n\n  compiler_flag: \"-nostdinc\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"/usr/lib/clang/3.8/include\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"external/linaro_linux_gcc_repo/lib/gcc/arm-linux-gnueabihf/4.9.3/include\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/include\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"external/linaro_linux_gcc_repo/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/include\"\n  cxx_flag: \"-isystem\"\n  cxx_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/include/c++/4.9.3/arm-linux-gnueabihf\"\n  cxx_flag: \"-isystem\"\n  cxx_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/include/c++/4.9.3\"\n  cxx_flag: \"-isystem\"\n  cxx_flag: \"external/linaro_linux_gcc_repo/include/c++/4.9.3/arm-linux-gnueabihf\"\n  cxx_flag: \"-isystem\"\n  cxx_flag: \"external/linaro_linux_gcc_repo/include/c++/4.9.3\"\n\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/usr/include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/usr/lib/include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//include)%/c++/4.9.3\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//lib/gcc/arm-linux-gnueabihf/4.9.3/include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/include)%/c++/4.9.3\"\n  cxx_builtin_include_directory: \"/usr/lib/clang/3.8/include\"\n  cxx_builtin_include_directory: \"/usr/lib/llvm-3.8/lib/clang/3.8.0/include\"\n  cxx_builtin_include_directory: \"/home/gopinathr/Documents/work/tf1.2/tensorflow/bazel-out/clang_linux_armhf-opt/genfiles/external/local_config_python/python_include/arm-linux-gnueabihf/python2.7\"\n\n  cxx_flag: \"-std=c++0x\"\n  cxx_flag: \"-std=c++11\"\n  linker_flag: \"-target\"\n  linker_flag: \"armv7a-arm-linux-gnueabihf\"\n  linker_flag: \"--sysroot=external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc\"\n  linker_flag: \"-lstdc++\"\n  linker_flag: \"-Ltools/arm_compiler/linaro_linux_gcc/clang_more_libs\"\n  linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/lib\"\n  linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/lib\"\n  linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/lib\"\n  linker_flag: \"-Bexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/bin\"\n  linker_flag: \"-Wl,--dynamic-linker=/lib/ld-linux-armhf.so.3\"\n\n  # Anticipated future default.\n  # This makes GCC and Clang do what we want when called through symlinks.\n  unfiltered_cxx_flag: \"-no-canonical-prefixes\"\n  linker_flag: \"-no-canonical-prefixes\"\n\n  # Make C++ compilation deterministic. Use linkstamping instead of these\n  # compiler symbols.\n  unfiltered_cxx_flag: \"-Wno-builtin-macro-redefined\"\n  unfiltered_cxx_flag: \"-D__DATE__=\\\"redacted\\\"\"\n  unfiltered_cxx_flag: \"-D__TIMESTAMP__=\\\"redacted\\\"\"\n  unfiltered_cxx_flag: \"-D__TIME__=\\\"redacted\\\"\"\n\n  # Security hardening on by default.\n  # Conservative choice; -D_FORTIFY_SOURCE=2 may be unsafe in some cases.\n  # We need to undef it before redefining it as some distributions now have\n  # it enabled by default.\n  compiler_flag: \"-U_FORTIFY_SOURCE\"\n  compiler_flag: \"-fstack-protector\"\n  compiler_flag: \"-fPIE\"\n  linker_flag: \"-pie\"\n  linker_flag: \"-Wl,-z,relro,-z,now\"\n\n  # Enable coloring even if there's no attached terminal. Bazel removes the\n  # escape sequences if --nocolor is specified.\n  compiler_flag: \"-fdiagnostics-color=always\"\n\n    # All warnings are enabled. Maybe enable -Werror as well?\n  compiler_flag: \"-Wall\"\n  # Enable a few more warnings that aren't part of -Wall.\n  compiler_flag: \"-Wunused-but-set-parameter\"\n  # But disable some that are problematic.\n  compiler_flag: \"-Wno-free-nonheap-object\" # has false positives\n\n  # Keep stack frames for debugging, even in opt mode.\n  compiler_flag: \"-fno-omit-frame-pointer\"\n\n  # Stamp the binary with a unique identifier.\n  linker_flag: \"-Wl,--build-id=md5\"\n  linker_flag: \"-Wl,--hash-style=gnu\"\n\n  compilation_mode_flags {\n    mode: DBG\n    # Enable debug symbols.\n    compiler_flag: \"-g\"\n  }\n  compilation_mode_flags {\n    mode: OPT\n\n    # No debug symbols.\n    # Maybe we should enable https://gcc.gnu.org/wiki/DebugFission for opt or\n    # even generally? However, that can't happen here, as it requires special\n    # handling in Bazel.\n    compiler_flag: \"-g0\"\n\n    # Conservative choice for -O\n    # -O3 can increase binary size and even slow down the resulting binaries.\n    # Profile first and / or use FDO if you need better performance than this.\n    compiler_flag: \"-O2\"\n\n    # Disable assertions\n    compiler_flag: \"-DNDEBUG\"\n\n    # Removal of unused code and data at link time (can this increase binary size in some cases?).\n    compiler_flag: \"-ffunction-sections\"\n    compiler_flag: \"-fdata-sections\"\n\n    #added by sachin\n    compiler_flag: \"-v\"\n\n    linker_flag: \"-Wl,--gc-sections\"\n  }\n}\n</code></pre>\n<p>The file contents are external/gemmlowp/meta/transform_kernels_arm_32.h</p>\n<p>template &lt;&gt;<br>\ninline void Transform1DKernel&lt;uint8_t, int32_t, BiasAdd&lt;uint8_t&gt;, 16,<br>\n0&gt;::Transform(const uint8_t* input,<br>\nconst BiasAdd&lt;uint8_t&gt;&amp; params,<br>\nint32_t* output) {<br>\n#ifdef DEBUG<br>\n#ifdef DEBUG_METAGEMM_VERBOSE<br>\nstd::cout &lt;&lt; <strong>FILE</strong> &lt;&lt; \"(\" &lt;&lt; <strong>LINE</strong><br>\n&lt;&lt; \") BiasAdd&lt;uint8_t&gt;&lt;uint8_t, int32_t, BiasAdd&lt;uint8_t&gt;, 16, \"<br>\n\"0&gt;::Transform()\"<br>\n&lt;&lt; std::endl<br>\n&lt;&lt; std::flush;<br>\n#endif<br>\n#endif<br>\nint params_rows_copy = params.rows;<br>\nasm volatile(<br>\n\"ldr r0, %[input_range_min]\\n\"<br>\n\"vdup.32 q8, r0\\n\"<br>\n\"ldr r0, %[input_range_scale]\\n\"<br>\n\"vdup.32 q9, r0\\n\"<br>\n\"ldr r0, %[bias_range_min]\\n\"<br>\n\"vdup.32 q10, r0\\n\"<br>\n\"ldr r0, %[bias_range_scale]\\n\"<br>\n\"vdup.32 q11, r0\\n\"<br>\n\"ldr r0, %[output_range_min]\\n\"<br>\n\"vdup.32 q12, r0\\n\"<br>\n\"ldr r0, %[one_over_output_range_scale]\\n\"<br>\n\"vdup.32 q13, r0\\n\"<br>\n\"ldr r0, %[output_range_offset]\\n\"<br>\n\"vdup.32 q14, r0\\n\"<br>\n\"1:\"<br>\n\"mov r0, %[count]\\n\"<br>\n\"mov r1, %[bias]\\n\"<br>\n\"2:\"<br>\n\"subs r0, r0, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"115925923\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/tensorflow/tensorflow/issues/16\" data-hovercard-type=\"issue\" data-hovercard-url=\"/tensorflow/tensorflow/issues/16/hovercard\" href=\"https://github.com/tensorflow/tensorflow/issues/16\">#16</a>\\n\"</p>\n<pre><code>  // BiasAdd::Transform\n  \"vld1.32 {d0, d1}, [%[input]]!\\n\"\n  \"vld1.32 {d8, d9}, [r1]!\\n\"\n  \"pld [%[input], #32]\\n\"\n  \"vmovl.u8 q1, d1\\n\"\n  \"vmovl.u8 q0, d0\\n\"\n  \"vmovl.u8 q5, d9\\n\"\n  \"vmovl.u8 q4, d8\\n\"\n  \"vmovl.s16 q3, d3\\n\"\n  \"vmovl.s16 q2, d2\\n\"\n  \"vmovl.s16 q7, d11\\n\"\n  \"vmovl.s16 q6, d10\\n\"\n  \"vmovl.s16 q1, d1\\n\"\n  \"vmovl.s16 q0, d0\\n\"\n  \"vmovl.s16 q5, d9\\n\"\n  \"vmovl.s16 q4, d8\\n\"\n  \"vcvt.f32.s32 q0, q0\\n\"\n  \"vcvt.f32.s32 q1, q1\\n\"\n  \"vcvt.f32.s32 q2, q2\\n\"\n  \"vcvt.f32.s32 q3, q3\\n\"\n  \"vcvt.f32.s32 q4, q4\\n\"\n  \"vcvt.f32.s32 q5, q5\\n\"\n  \"vcvt.f32.s32 q6, q6\\n\"\n  \"vcvt.f32.s32 q7, q7\\n\"\n  \"vmul.f32 q0, q0, q9\\n\"\n  \"vmul.f32 q1, q1, q9\\n\"\n  \"vmul.f32 q2, q2, q9\\n\"\n  \"vmul.f32 q3, q3, q9\\n\"\n  \"vmul.f32 q4, q4, q11\\n\"\n  \"vmul.f32 q5, q5, q11\\n\"\n  \"vmul.f32 q6, q6, q11\\n\"\n  \"vmul.f32 q7, q7, q11\\n\"\n  \"vadd.f32 q0, q0, q8\\n\"\n  \"vadd.f32 q1, q1, q8\\n\"\n  \"vadd.f32 q2, q2, q8\\n\"\n  \"vadd.f32 q3, q3, q8\\n\"\n  \"vadd.f32 q4, q4, q10\\n\"\n  \"vadd.f32 q5, q5, q10\\n\"\n  \"vadd.f32 q6, q6, q10\\n\"\n  \"vadd.f32 q7, q7, q10\\n\"\n  \"vadd.f32 q0, q0, q4\\n\"\n  \"vadd.f32 q1, q1, q5\\n\"\n  \"vadd.f32 q2, q2, q6\\n\"\n  \"vadd.f32 q3, q3, q7\\n\"\n  \"vsub.f32 q0, q0, q12\\n\"\n  \"vsub.f32 q1, q1, q12\\n\"\n  \"vsub.f32 q2, q2, q12\\n\"\n  \"vsub.f32 q3, q3, q12\\n\"\n  \"vmul.f32 q0, q0, q13\\n\"\n  \"vmul.f32 q1, q1, q13\\n\"\n  \"vmul.f32 q2, q2, q13\\n\"\n  \"vmul.f32 q3, q3, q13\\n\"\n  \"vadd.f32 q0, q0, q14\\n\"\n  \"vadd.f32 q1, q1, q14\\n\"\n  \"vadd.f32 q2, q2, q14\\n\"\n  \"vadd.f32 q3, q3, q14\\n\"\n  \"vcvt.s32.f32 q0, q0\\n\"\n  \"vcvt.s32.f32 q1, q1\\n\"\n  \"vcvt.s32.f32 q2, q2\\n\"\n  \"vcvt.s32.f32 q3, q3\\n\"\n\n  \"vst1.32 {d0, d1, d2, d3}, [%[output]]!\\n\"\n  \"vst1.32 {d4, d5, d6, d7}, [%[output]]!\\n\"\n  \"pld [%[output]]\\n\"\n  \"bne 2b\\n\"\n  \"subs %[rows], %[rows], #1\\n\"\n  \"bne 1b\\n\"\n  : [input] \"+r\"(input), [output] \"+r\"(output)\n  : [count] \"r\"(params.count), [rows] \"r\"(params_rows_copy),\n    [output_range_offset] \"m\"(params.output_range_offset),\n    [input_range_scale] \"m\"(params.input_range_scale),\n    [one_over_output_range_scale] \"m\"(params.one_over_output_range_scale),\n    [bias_range_min] \"m\"(params.bias_range_min),\n    [output_range_min] \"m\"(params.output_range_min),\n    [bias_range_scale] \"m\"(params.bias_range_scale),\n    [bias] \"r\"(params.bias), [input_range_min] \"m\"(params.input_range_min)\n  : \"r0\", \"r1\", \"d0\", \"d1\", \"d2\", \"d3\", \"d4\", \"d5\", \"d6\", \"d7\", \"d8\", \"d9\",\n    \"d10\", \"d11\", \"d12\", \"d13\", \"d14\", \"d15\", \"d16\", \"d17\", \"d18\", \"d19\",\n    \"d20\", \"d21\", \"d22\", \"d23\", \"d24\", \"d25\", \"d26\", \"d27\", \"d28\", \"d29\",\n    \"cc\", \"memory\");\n</code></pre>\n<p>}</p>\n<p>Does anyone can help me out with what is wrong??</p>", "body_text": "I am trying to cross compile tensorflow for armv7a cortex a15 using clang-3.8 and I am using bazel 0.5.4 to build tensorflow.\nMy Environment details are, Ubuntu - 16.04 Clang - 3.8 bazel - 0.5.4 tensorflow source code version - 1.3 target cpu - cortex a15 compiler_flag: \"-O2\"\nThe command i am using is\nbazel build --copt=-Wno-c++11-narrowing --crosstool_top=//tools/arm_compiler:toolchain --cpu=armeabi-v7a --verbose_failures --sandbox_debug //tensorflow/tools/pip_package:build_pip_package\nThe error is external/gemmlowp/meta/transform_kernels_arm_32.h:5506:7: error: inline assembly requires more registers than available \"ldr r0, %[input_range_min]\\n\"\nThe compiler flags are configured as bellow in CROSSTOOL\ntoolchain {\nabi_version: \"clang_3.8\"\nabi_libc_version: \"glibc_2.19\"\nbuiltin_sysroot: \"\"\ncompiler: \"clang\"\nhost_system_name: \"armeabi-v7a\"\nneedsPic: true\nsupports_gold_linker: false\nsupports_incremental_linker: false\nsupports_fission: false\nsupports_interface_shared_objects: false\nsupports_normalizing_ar: true\nsupports_start_end_lib: false\nsupports_thin_archives: true\ntarget_libc: \"glibc_2.19\"\ntarget_cpu: \"armeabi-v7a\"\ntarget_system_name: \"arm_a15\"\ntoolchain_identifier: \"clang_linux_armhf\"\n  tool_path { name: \"ar\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ar\" }\n  tool_path { name: \"compat-ld\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ld\" }\n  tool_path { name: \"cpp\" path: \"linaro_linux_gcc/clang_bin/clang\" }\n  tool_path { name: \"dwp\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-dwp\" }\n  tool_path { name: \"gcc\" path: \"linaro_linux_gcc/clang_bin/clang\" }\n  tool_path { name: \"gcov\" path: \"arm-frc-linux-gnueabi/arm-frc-linux-gnueabi-gcov-4.9\" }\n  # C(++) compiles invoke the compiler (as that is the one knowing where\n  # to find libraries), but we provide LD so other rules can invoke the linker.\n  tool_path { name: \"ld\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ld\" }\n  tool_path { name: \"nm\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-nm\" }\n  tool_path { name: \"objcopy\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-objcopy\" }\n  objcopy_embed_flag: \"-I\"\n  objcopy_embed_flag: \"binary\"\n  tool_path { name: \"objdump\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-objdump\" }\n  tool_path { name: \"strip\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-strip\" }\n\n  compiler_flag: \"-target\"\n  compiler_flag: \"armv7a-arm-linux-gnueabihf\"\n  compiler_flag: \"--sysroot=external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc\"\n  compiler_flag: \"-mfloat-abi=hard\"\n  compiler_flag: \"-mcpu=cortex-a15\"\n  compiler_flag: \"-mfpu=neon-vfpv4\"\n\n  compiler_flag: \"-nostdinc\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"/usr/lib/clang/3.8/include\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"external/linaro_linux_gcc_repo/lib/gcc/arm-linux-gnueabihf/4.9.3/include\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/include\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"external/linaro_linux_gcc_repo/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed\"\n  compiler_flag: \"-isystem\"\n  compiler_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/include\"\n  cxx_flag: \"-isystem\"\n  cxx_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/include/c++/4.9.3/arm-linux-gnueabihf\"\n  cxx_flag: \"-isystem\"\n  cxx_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/include/c++/4.9.3\"\n  cxx_flag: \"-isystem\"\n  cxx_flag: \"external/linaro_linux_gcc_repo/include/c++/4.9.3/arm-linux-gnueabihf\"\n  cxx_flag: \"-isystem\"\n  cxx_flag: \"external/linaro_linux_gcc_repo/include/c++/4.9.3\"\n\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/usr/include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/usr/lib/include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//include)%/c++/4.9.3\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//lib/gcc/arm-linux-gnueabihf/4.9.3/include)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\n  cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/include)%/c++/4.9.3\"\n  cxx_builtin_include_directory: \"/usr/lib/clang/3.8/include\"\n  cxx_builtin_include_directory: \"/usr/lib/llvm-3.8/lib/clang/3.8.0/include\"\n  cxx_builtin_include_directory: \"/home/gopinathr/Documents/work/tf1.2/tensorflow/bazel-out/clang_linux_armhf-opt/genfiles/external/local_config_python/python_include/arm-linux-gnueabihf/python2.7\"\n\n  cxx_flag: \"-std=c++0x\"\n  cxx_flag: \"-std=c++11\"\n  linker_flag: \"-target\"\n  linker_flag: \"armv7a-arm-linux-gnueabihf\"\n  linker_flag: \"--sysroot=external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc\"\n  linker_flag: \"-lstdc++\"\n  linker_flag: \"-Ltools/arm_compiler/linaro_linux_gcc/clang_more_libs\"\n  linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/lib\"\n  linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/lib\"\n  linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/lib\"\n  linker_flag: \"-Bexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/bin\"\n  linker_flag: \"-Wl,--dynamic-linker=/lib/ld-linux-armhf.so.3\"\n\n  # Anticipated future default.\n  # This makes GCC and Clang do what we want when called through symlinks.\n  unfiltered_cxx_flag: \"-no-canonical-prefixes\"\n  linker_flag: \"-no-canonical-prefixes\"\n\n  # Make C++ compilation deterministic. Use linkstamping instead of these\n  # compiler symbols.\n  unfiltered_cxx_flag: \"-Wno-builtin-macro-redefined\"\n  unfiltered_cxx_flag: \"-D__DATE__=\\\"redacted\\\"\"\n  unfiltered_cxx_flag: \"-D__TIMESTAMP__=\\\"redacted\\\"\"\n  unfiltered_cxx_flag: \"-D__TIME__=\\\"redacted\\\"\"\n\n  # Security hardening on by default.\n  # Conservative choice; -D_FORTIFY_SOURCE=2 may be unsafe in some cases.\n  # We need to undef it before redefining it as some distributions now have\n  # it enabled by default.\n  compiler_flag: \"-U_FORTIFY_SOURCE\"\n  compiler_flag: \"-fstack-protector\"\n  compiler_flag: \"-fPIE\"\n  linker_flag: \"-pie\"\n  linker_flag: \"-Wl,-z,relro,-z,now\"\n\n  # Enable coloring even if there's no attached terminal. Bazel removes the\n  # escape sequences if --nocolor is specified.\n  compiler_flag: \"-fdiagnostics-color=always\"\n\n    # All warnings are enabled. Maybe enable -Werror as well?\n  compiler_flag: \"-Wall\"\n  # Enable a few more warnings that aren't part of -Wall.\n  compiler_flag: \"-Wunused-but-set-parameter\"\n  # But disable some that are problematic.\n  compiler_flag: \"-Wno-free-nonheap-object\" # has false positives\n\n  # Keep stack frames for debugging, even in opt mode.\n  compiler_flag: \"-fno-omit-frame-pointer\"\n\n  # Stamp the binary with a unique identifier.\n  linker_flag: \"-Wl,--build-id=md5\"\n  linker_flag: \"-Wl,--hash-style=gnu\"\n\n  compilation_mode_flags {\n    mode: DBG\n    # Enable debug symbols.\n    compiler_flag: \"-g\"\n  }\n  compilation_mode_flags {\n    mode: OPT\n\n    # No debug symbols.\n    # Maybe we should enable https://gcc.gnu.org/wiki/DebugFission for opt or\n    # even generally? However, that can't happen here, as it requires special\n    # handling in Bazel.\n    compiler_flag: \"-g0\"\n\n    # Conservative choice for -O\n    # -O3 can increase binary size and even slow down the resulting binaries.\n    # Profile first and / or use FDO if you need better performance than this.\n    compiler_flag: \"-O2\"\n\n    # Disable assertions\n    compiler_flag: \"-DNDEBUG\"\n\n    # Removal of unused code and data at link time (can this increase binary size in some cases?).\n    compiler_flag: \"-ffunction-sections\"\n    compiler_flag: \"-fdata-sections\"\n\n    #added by sachin\n    compiler_flag: \"-v\"\n\n    linker_flag: \"-Wl,--gc-sections\"\n  }\n}\n\nThe file contents are external/gemmlowp/meta/transform_kernels_arm_32.h\ntemplate <>\ninline void Transform1DKernel<uint8_t, int32_t, BiasAdd<uint8_t>, 16,\n0>::Transform(const uint8_t* input,\nconst BiasAdd<uint8_t>& params,\nint32_t* output) {\n#ifdef DEBUG\n#ifdef DEBUG_METAGEMM_VERBOSE\nstd::cout << FILE << \"(\" << LINE\n<< \") BiasAdd<uint8_t><uint8_t, int32_t, BiasAdd<uint8_t>, 16, \"\n\"0>::Transform()\"\n<< std::endl\n<< std::flush;\n#endif\n#endif\nint params_rows_copy = params.rows;\nasm volatile(\n\"ldr r0, %[input_range_min]\\n\"\n\"vdup.32 q8, r0\\n\"\n\"ldr r0, %[input_range_scale]\\n\"\n\"vdup.32 q9, r0\\n\"\n\"ldr r0, %[bias_range_min]\\n\"\n\"vdup.32 q10, r0\\n\"\n\"ldr r0, %[bias_range_scale]\\n\"\n\"vdup.32 q11, r0\\n\"\n\"ldr r0, %[output_range_min]\\n\"\n\"vdup.32 q12, r0\\n\"\n\"ldr r0, %[one_over_output_range_scale]\\n\"\n\"vdup.32 q13, r0\\n\"\n\"ldr r0, %[output_range_offset]\\n\"\n\"vdup.32 q14, r0\\n\"\n\"1:\"\n\"mov r0, %[count]\\n\"\n\"mov r1, %[bias]\\n\"\n\"2:\"\n\"subs r0, r0, #16\\n\"\n  // BiasAdd::Transform\n  \"vld1.32 {d0, d1}, [%[input]]!\\n\"\n  \"vld1.32 {d8, d9}, [r1]!\\n\"\n  \"pld [%[input], #32]\\n\"\n  \"vmovl.u8 q1, d1\\n\"\n  \"vmovl.u8 q0, d0\\n\"\n  \"vmovl.u8 q5, d9\\n\"\n  \"vmovl.u8 q4, d8\\n\"\n  \"vmovl.s16 q3, d3\\n\"\n  \"vmovl.s16 q2, d2\\n\"\n  \"vmovl.s16 q7, d11\\n\"\n  \"vmovl.s16 q6, d10\\n\"\n  \"vmovl.s16 q1, d1\\n\"\n  \"vmovl.s16 q0, d0\\n\"\n  \"vmovl.s16 q5, d9\\n\"\n  \"vmovl.s16 q4, d8\\n\"\n  \"vcvt.f32.s32 q0, q0\\n\"\n  \"vcvt.f32.s32 q1, q1\\n\"\n  \"vcvt.f32.s32 q2, q2\\n\"\n  \"vcvt.f32.s32 q3, q3\\n\"\n  \"vcvt.f32.s32 q4, q4\\n\"\n  \"vcvt.f32.s32 q5, q5\\n\"\n  \"vcvt.f32.s32 q6, q6\\n\"\n  \"vcvt.f32.s32 q7, q7\\n\"\n  \"vmul.f32 q0, q0, q9\\n\"\n  \"vmul.f32 q1, q1, q9\\n\"\n  \"vmul.f32 q2, q2, q9\\n\"\n  \"vmul.f32 q3, q3, q9\\n\"\n  \"vmul.f32 q4, q4, q11\\n\"\n  \"vmul.f32 q5, q5, q11\\n\"\n  \"vmul.f32 q6, q6, q11\\n\"\n  \"vmul.f32 q7, q7, q11\\n\"\n  \"vadd.f32 q0, q0, q8\\n\"\n  \"vadd.f32 q1, q1, q8\\n\"\n  \"vadd.f32 q2, q2, q8\\n\"\n  \"vadd.f32 q3, q3, q8\\n\"\n  \"vadd.f32 q4, q4, q10\\n\"\n  \"vadd.f32 q5, q5, q10\\n\"\n  \"vadd.f32 q6, q6, q10\\n\"\n  \"vadd.f32 q7, q7, q10\\n\"\n  \"vadd.f32 q0, q0, q4\\n\"\n  \"vadd.f32 q1, q1, q5\\n\"\n  \"vadd.f32 q2, q2, q6\\n\"\n  \"vadd.f32 q3, q3, q7\\n\"\n  \"vsub.f32 q0, q0, q12\\n\"\n  \"vsub.f32 q1, q1, q12\\n\"\n  \"vsub.f32 q2, q2, q12\\n\"\n  \"vsub.f32 q3, q3, q12\\n\"\n  \"vmul.f32 q0, q0, q13\\n\"\n  \"vmul.f32 q1, q1, q13\\n\"\n  \"vmul.f32 q2, q2, q13\\n\"\n  \"vmul.f32 q3, q3, q13\\n\"\n  \"vadd.f32 q0, q0, q14\\n\"\n  \"vadd.f32 q1, q1, q14\\n\"\n  \"vadd.f32 q2, q2, q14\\n\"\n  \"vadd.f32 q3, q3, q14\\n\"\n  \"vcvt.s32.f32 q0, q0\\n\"\n  \"vcvt.s32.f32 q1, q1\\n\"\n  \"vcvt.s32.f32 q2, q2\\n\"\n  \"vcvt.s32.f32 q3, q3\\n\"\n\n  \"vst1.32 {d0, d1, d2, d3}, [%[output]]!\\n\"\n  \"vst1.32 {d4, d5, d6, d7}, [%[output]]!\\n\"\n  \"pld [%[output]]\\n\"\n  \"bne 2b\\n\"\n  \"subs %[rows], %[rows], #1\\n\"\n  \"bne 1b\\n\"\n  : [input] \"+r\"(input), [output] \"+r\"(output)\n  : [count] \"r\"(params.count), [rows] \"r\"(params_rows_copy),\n    [output_range_offset] \"m\"(params.output_range_offset),\n    [input_range_scale] \"m\"(params.input_range_scale),\n    [one_over_output_range_scale] \"m\"(params.one_over_output_range_scale),\n    [bias_range_min] \"m\"(params.bias_range_min),\n    [output_range_min] \"m\"(params.output_range_min),\n    [bias_range_scale] \"m\"(params.bias_range_scale),\n    [bias] \"r\"(params.bias), [input_range_min] \"m\"(params.input_range_min)\n  : \"r0\", \"r1\", \"d0\", \"d1\", \"d2\", \"d3\", \"d4\", \"d5\", \"d6\", \"d7\", \"d8\", \"d9\",\n    \"d10\", \"d11\", \"d12\", \"d13\", \"d14\", \"d15\", \"d16\", \"d17\", \"d18\", \"d19\",\n    \"d20\", \"d21\", \"d22\", \"d23\", \"d24\", \"d25\", \"d26\", \"d27\", \"d28\", \"d29\",\n    \"cc\", \"memory\");\n\n}\nDoes anyone can help me out with what is wrong??", "body": "I am trying to cross compile tensorflow for armv7a cortex a15 using clang-3.8 and I am using bazel 0.5.4 to build tensorflow.\r\n\r\nMy Environment details are, Ubuntu - 16.04 Clang - 3.8 bazel - 0.5.4 tensorflow source code version - 1.3 target cpu - cortex a15 compiler_flag: \"-O2\"\r\n\r\nThe command i am using is \r\nbazel build --copt=-Wno-c++11-narrowing --crosstool_top=//tools/arm_compiler:toolchain --cpu=armeabi-v7a --verbose_failures --sandbox_debug //tensorflow/tools/pip_package:build_pip_package\r\n\r\n\r\nThe error is external/gemmlowp/meta/transform_kernels_arm_32.h:5506:7: error: inline assembly requires more registers than available \"ldr r0, %[input_range_min]\\n\"\r\n\r\nThe compiler flags are configured as bellow in CROSSTOOL\r\n\r\n toolchain {\r\n      abi_version: \"clang_3.8\"\r\n      abi_libc_version: \"glibc_2.19\"\r\n      builtin_sysroot: \"\"\r\n      compiler: \"clang\"\r\n      host_system_name: \"armeabi-v7a\"\r\n      needsPic: true\r\n      supports_gold_linker: false\r\n      supports_incremental_linker: false\r\n      supports_fission: false\r\n      supports_interface_shared_objects: false\r\n      supports_normalizing_ar: true\r\n      supports_start_end_lib: false\r\n      supports_thin_archives: true\r\n      target_libc: \"glibc_2.19\"\r\n      target_cpu: \"armeabi-v7a\"\r\n      target_system_name: \"arm_a15\"\r\n      toolchain_identifier: \"clang_linux_armhf\"\r\n\r\n      tool_path { name: \"ar\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ar\" }\r\n      tool_path { name: \"compat-ld\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ld\" }\r\n      tool_path { name: \"cpp\" path: \"linaro_linux_gcc/clang_bin/clang\" }\r\n      tool_path { name: \"dwp\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-dwp\" }\r\n      tool_path { name: \"gcc\" path: \"linaro_linux_gcc/clang_bin/clang\" }\r\n      tool_path { name: \"gcov\" path: \"arm-frc-linux-gnueabi/arm-frc-linux-gnueabi-gcov-4.9\" }\r\n      # C(++) compiles invoke the compiler (as that is the one knowing where\r\n      # to find libraries), but we provide LD so other rules can invoke the linker.\r\n      tool_path { name: \"ld\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-ld\" }\r\n      tool_path { name: \"nm\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-nm\" }\r\n      tool_path { name: \"objcopy\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-objcopy\" }\r\n      objcopy_embed_flag: \"-I\"\r\n      objcopy_embed_flag: \"binary\"\r\n      tool_path { name: \"objdump\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-objdump\" }\r\n      tool_path { name: \"strip\" path: \"linaro_linux_gcc/arm-linux-gnueabihf-strip\" }\r\n\r\n      compiler_flag: \"-target\"\r\n      compiler_flag: \"armv7a-arm-linux-gnueabihf\"\r\n      compiler_flag: \"--sysroot=external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc\"\r\n      compiler_flag: \"-mfloat-abi=hard\"\r\n      compiler_flag: \"-mcpu=cortex-a15\"\r\n      compiler_flag: \"-mfpu=neon-vfpv4\"\r\n\r\n      compiler_flag: \"-nostdinc\"\r\n      compiler_flag: \"-isystem\"\r\n      compiler_flag: \"/usr/lib/clang/3.8/include\"\r\n      compiler_flag: \"-isystem\"\r\n      compiler_flag: \"external/linaro_linux_gcc_repo/lib/gcc/arm-linux-gnueabihf/4.9.3/include\"\r\n      compiler_flag: \"-isystem\"\r\n      compiler_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/include\"\r\n      compiler_flag: \"-isystem\"\r\n      compiler_flag: \"external/linaro_linux_gcc_repo/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed\"\r\n      compiler_flag: \"-isystem\"\r\n      compiler_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/include\"\r\n      cxx_flag: \"-isystem\"\r\n      cxx_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/include/c++/4.9.3/arm-linux-gnueabihf\"\r\n      cxx_flag: \"-isystem\"\r\n      cxx_flag: \"external/linaro_linux_gcc_repo/arm-linux-gnueabihf/include/c++/4.9.3\"\r\n      cxx_flag: \"-isystem\"\r\n      cxx_flag: \"external/linaro_linux_gcc_repo/include/c++/4.9.3/arm-linux-gnueabihf\"\r\n      cxx_flag: \"-isystem\"\r\n      cxx_flag: \"external/linaro_linux_gcc_repo/include/c++/4.9.3\"\r\n\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//include)%\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/usr/include)%\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/usr/lib/include)%\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//include)%/c++/4.9.3\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include)%\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/libc/lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//lib/gcc/arm-linux-gnueabihf/4.9.3/include)%\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//lib/gcc/arm-linux-gnueabihf/4.9.3/include-fixed)%\"\r\n      cxx_builtin_include_directory: \"%package(@linaro_linux_gcc_repo//arm-linux-gnueabihf/include)%/c++/4.9.3\"\r\n      cxx_builtin_include_directory: \"/usr/lib/clang/3.8/include\"\r\n      cxx_builtin_include_directory: \"/usr/lib/llvm-3.8/lib/clang/3.8.0/include\"\r\n      cxx_builtin_include_directory: \"/home/gopinathr/Documents/work/tf1.2/tensorflow/bazel-out/clang_linux_armhf-opt/genfiles/external/local_config_python/python_include/arm-linux-gnueabihf/python2.7\"\r\n\r\n      cxx_flag: \"-std=c++0x\"\r\n      cxx_flag: \"-std=c++11\"\r\n      linker_flag: \"-target\"\r\n      linker_flag: \"armv7a-arm-linux-gnueabihf\"\r\n      linker_flag: \"--sysroot=external/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc\"\r\n      linker_flag: \"-lstdc++\"\r\n      linker_flag: \"-Ltools/arm_compiler/linaro_linux_gcc/clang_more_libs\"\r\n      linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/lib\"\r\n      linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/lib\"\r\n      linker_flag: \"-Lexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/libc/usr/lib\"\r\n      linker_flag: \"-Bexternal/linaro_linux_gcc_repo/arm-linux-gnueabihf/bin\"\r\n      linker_flag: \"-Wl,--dynamic-linker=/lib/ld-linux-armhf.so.3\"\r\n\r\n      # Anticipated future default.\r\n      # This makes GCC and Clang do what we want when called through symlinks.\r\n      unfiltered_cxx_flag: \"-no-canonical-prefixes\"\r\n      linker_flag: \"-no-canonical-prefixes\"\r\n\r\n      # Make C++ compilation deterministic. Use linkstamping instead of these\r\n      # compiler symbols.\r\n      unfiltered_cxx_flag: \"-Wno-builtin-macro-redefined\"\r\n      unfiltered_cxx_flag: \"-D__DATE__=\\\"redacted\\\"\"\r\n      unfiltered_cxx_flag: \"-D__TIMESTAMP__=\\\"redacted\\\"\"\r\n      unfiltered_cxx_flag: \"-D__TIME__=\\\"redacted\\\"\"\r\n\r\n      # Security hardening on by default.\r\n      # Conservative choice; -D_FORTIFY_SOURCE=2 may be unsafe in some cases.\r\n      # We need to undef it before redefining it as some distributions now have\r\n      # it enabled by default.\r\n      compiler_flag: \"-U_FORTIFY_SOURCE\"\r\n      compiler_flag: \"-fstack-protector\"\r\n      compiler_flag: \"-fPIE\"\r\n      linker_flag: \"-pie\"\r\n      linker_flag: \"-Wl,-z,relro,-z,now\"\r\n\r\n      # Enable coloring even if there's no attached terminal. Bazel removes the\r\n      # escape sequences if --nocolor is specified.\r\n      compiler_flag: \"-fdiagnostics-color=always\"\r\n\r\n        # All warnings are enabled. Maybe enable -Werror as well?\r\n      compiler_flag: \"-Wall\"\r\n      # Enable a few more warnings that aren't part of -Wall.\r\n      compiler_flag: \"-Wunused-but-set-parameter\"\r\n      # But disable some that are problematic.\r\n      compiler_flag: \"-Wno-free-nonheap-object\" # has false positives\r\n\r\n      # Keep stack frames for debugging, even in opt mode.\r\n      compiler_flag: \"-fno-omit-frame-pointer\"\r\n\r\n      # Stamp the binary with a unique identifier.\r\n      linker_flag: \"-Wl,--build-id=md5\"\r\n      linker_flag: \"-Wl,--hash-style=gnu\"\r\n\r\n      compilation_mode_flags {\r\n        mode: DBG\r\n        # Enable debug symbols.\r\n        compiler_flag: \"-g\"\r\n      }\r\n      compilation_mode_flags {\r\n        mode: OPT\r\n\r\n        # No debug symbols.\r\n        # Maybe we should enable https://gcc.gnu.org/wiki/DebugFission for opt or\r\n        # even generally? However, that can't happen here, as it requires special\r\n        # handling in Bazel.\r\n        compiler_flag: \"-g0\"\r\n\r\n        # Conservative choice for -O\r\n        # -O3 can increase binary size and even slow down the resulting binaries.\r\n        # Profile first and / or use FDO if you need better performance than this.\r\n        compiler_flag: \"-O2\"\r\n\r\n        # Disable assertions\r\n        compiler_flag: \"-DNDEBUG\"\r\n\r\n        # Removal of unused code and data at link time (can this increase binary size in some cases?).\r\n        compiler_flag: \"-ffunction-sections\"\r\n        compiler_flag: \"-fdata-sections\"\r\n\r\n        #added by sachin\r\n        compiler_flag: \"-v\"\r\n\r\n        linker_flag: \"-Wl,--gc-sections\"\r\n      }\r\n    }\r\n\r\nThe file contents are external/gemmlowp/meta/transform_kernels_arm_32.h\r\n\r\ntemplate <>\r\ninline void Transform1DKernel<uint8_t, int32_t, BiasAdd<uint8_t>, 16,\r\n                              0>::Transform(const uint8_t* input,\r\n                                            const BiasAdd<uint8_t>& params,\r\n                                            int32_t* output) {\r\n#ifdef DEBUG\r\n#ifdef DEBUG_METAGEMM_VERBOSE\r\n  std::cout << __FILE__ << \"(\" << __LINE__\r\n            << \") BiasAdd<uint8_t><uint8_t, int32_t, BiasAdd<uint8_t>, 16, \"\r\n               \"0>::Transform()\"\r\n            << std::endl\r\n            << std::flush;\r\n#endif\r\n#endif\r\n  int params_rows_copy = params.rows;\r\n  asm volatile(\r\n      \"ldr r0, %[input_range_min]\\n\"\r\n      \"vdup.32 q8, r0\\n\"\r\n      \"ldr r0, %[input_range_scale]\\n\"\r\n      \"vdup.32 q9, r0\\n\"\r\n      \"ldr r0, %[bias_range_min]\\n\"\r\n      \"vdup.32 q10, r0\\n\"\r\n      \"ldr r0, %[bias_range_scale]\\n\"\r\n      \"vdup.32 q11, r0\\n\"\r\n      \"ldr r0, %[output_range_min]\\n\"\r\n      \"vdup.32 q12, r0\\n\"\r\n      \"ldr r0, %[one_over_output_range_scale]\\n\"\r\n      \"vdup.32 q13, r0\\n\"\r\n      \"ldr r0, %[output_range_offset]\\n\"\r\n      \"vdup.32 q14, r0\\n\"\r\n      \"1:\"\r\n      \"mov r0, %[count]\\n\"\r\n      \"mov r1, %[bias]\\n\"\r\n      \"2:\"\r\n      \"subs r0, r0, #16\\n\"\r\n\r\n      // BiasAdd::Transform\r\n      \"vld1.32 {d0, d1}, [%[input]]!\\n\"\r\n      \"vld1.32 {d8, d9}, [r1]!\\n\"\r\n      \"pld [%[input], #32]\\n\"\r\n      \"vmovl.u8 q1, d1\\n\"\r\n      \"vmovl.u8 q0, d0\\n\"\r\n      \"vmovl.u8 q5, d9\\n\"\r\n      \"vmovl.u8 q4, d8\\n\"\r\n      \"vmovl.s16 q3, d3\\n\"\r\n      \"vmovl.s16 q2, d2\\n\"\r\n      \"vmovl.s16 q7, d11\\n\"\r\n      \"vmovl.s16 q6, d10\\n\"\r\n      \"vmovl.s16 q1, d1\\n\"\r\n      \"vmovl.s16 q0, d0\\n\"\r\n      \"vmovl.s16 q5, d9\\n\"\r\n      \"vmovl.s16 q4, d8\\n\"\r\n      \"vcvt.f32.s32 q0, q0\\n\"\r\n      \"vcvt.f32.s32 q1, q1\\n\"\r\n      \"vcvt.f32.s32 q2, q2\\n\"\r\n      \"vcvt.f32.s32 q3, q3\\n\"\r\n      \"vcvt.f32.s32 q4, q4\\n\"\r\n      \"vcvt.f32.s32 q5, q5\\n\"\r\n      \"vcvt.f32.s32 q6, q6\\n\"\r\n      \"vcvt.f32.s32 q7, q7\\n\"\r\n      \"vmul.f32 q0, q0, q9\\n\"\r\n      \"vmul.f32 q1, q1, q9\\n\"\r\n      \"vmul.f32 q2, q2, q9\\n\"\r\n      \"vmul.f32 q3, q3, q9\\n\"\r\n      \"vmul.f32 q4, q4, q11\\n\"\r\n      \"vmul.f32 q5, q5, q11\\n\"\r\n      \"vmul.f32 q6, q6, q11\\n\"\r\n      \"vmul.f32 q7, q7, q11\\n\"\r\n      \"vadd.f32 q0, q0, q8\\n\"\r\n      \"vadd.f32 q1, q1, q8\\n\"\r\n      \"vadd.f32 q2, q2, q8\\n\"\r\n      \"vadd.f32 q3, q3, q8\\n\"\r\n      \"vadd.f32 q4, q4, q10\\n\"\r\n      \"vadd.f32 q5, q5, q10\\n\"\r\n      \"vadd.f32 q6, q6, q10\\n\"\r\n      \"vadd.f32 q7, q7, q10\\n\"\r\n      \"vadd.f32 q0, q0, q4\\n\"\r\n      \"vadd.f32 q1, q1, q5\\n\"\r\n      \"vadd.f32 q2, q2, q6\\n\"\r\n      \"vadd.f32 q3, q3, q7\\n\"\r\n      \"vsub.f32 q0, q0, q12\\n\"\r\n      \"vsub.f32 q1, q1, q12\\n\"\r\n      \"vsub.f32 q2, q2, q12\\n\"\r\n      \"vsub.f32 q3, q3, q12\\n\"\r\n      \"vmul.f32 q0, q0, q13\\n\"\r\n      \"vmul.f32 q1, q1, q13\\n\"\r\n      \"vmul.f32 q2, q2, q13\\n\"\r\n      \"vmul.f32 q3, q3, q13\\n\"\r\n      \"vadd.f32 q0, q0, q14\\n\"\r\n      \"vadd.f32 q1, q1, q14\\n\"\r\n      \"vadd.f32 q2, q2, q14\\n\"\r\n      \"vadd.f32 q3, q3, q14\\n\"\r\n      \"vcvt.s32.f32 q0, q0\\n\"\r\n      \"vcvt.s32.f32 q1, q1\\n\"\r\n      \"vcvt.s32.f32 q2, q2\\n\"\r\n      \"vcvt.s32.f32 q3, q3\\n\"\r\n\r\n      \"vst1.32 {d0, d1, d2, d3}, [%[output]]!\\n\"\r\n      \"vst1.32 {d4, d5, d6, d7}, [%[output]]!\\n\"\r\n      \"pld [%[output]]\\n\"\r\n      \"bne 2b\\n\"\r\n      \"subs %[rows], %[rows], #1\\n\"\r\n      \"bne 1b\\n\"\r\n      : [input] \"+r\"(input), [output] \"+r\"(output)\r\n      : [count] \"r\"(params.count), [rows] \"r\"(params_rows_copy),\r\n        [output_range_offset] \"m\"(params.output_range_offset),\r\n        [input_range_scale] \"m\"(params.input_range_scale),\r\n        [one_over_output_range_scale] \"m\"(params.one_over_output_range_scale),\r\n        [bias_range_min] \"m\"(params.bias_range_min),\r\n        [output_range_min] \"m\"(params.output_range_min),\r\n        [bias_range_scale] \"m\"(params.bias_range_scale),\r\n        [bias] \"r\"(params.bias), [input_range_min] \"m\"(params.input_range_min)\r\n      : \"r0\", \"r1\", \"d0\", \"d1\", \"d2\", \"d3\", \"d4\", \"d5\", \"d6\", \"d7\", \"d8\", \"d9\",\r\n        \"d10\", \"d11\", \"d12\", \"d13\", \"d14\", \"d15\", \"d16\", \"d17\", \"d18\", \"d19\",\r\n        \"d20\", \"d21\", \"d22\", \"d23\", \"d24\", \"d25\", \"d26\", \"d27\", \"d28\", \"d29\",\r\n        \"cc\", \"memory\");\r\n}\r\n\r\nDoes anyone can help me out with what is wrong??\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"}
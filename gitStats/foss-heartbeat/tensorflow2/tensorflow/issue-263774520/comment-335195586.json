{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/335195586", "html_url": "https://github.com/tensorflow/tensorflow/issues/13575#issuecomment-335195586", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13575", "id": 335195586, "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTE5NTU4Ng==", "user": {"login": "bodokaiser", "id": 1780466, "node_id": "MDQ6VXNlcjE3ODA0NjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1780466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bodokaiser", "html_url": "https://github.com/bodokaiser", "followers_url": "https://api.github.com/users/bodokaiser/followers", "following_url": "https://api.github.com/users/bodokaiser/following{/other_user}", "gists_url": "https://api.github.com/users/bodokaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/bodokaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bodokaiser/subscriptions", "organizations_url": "https://api.github.com/users/bodokaiser/orgs", "repos_url": "https://api.github.com/users/bodokaiser/repos", "events_url": "https://api.github.com/users/bodokaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/bodokaiser/received_events", "type": "User", "site_admin": false}, "created_at": "2017-10-09T15:38:13Z", "updated_at": "2017-10-09T15:39:40Z", "author_association": "NONE", "body_html": "<p>Can confirm this issue though it only occurs on windows. To reproduce you can use <a href=\"https://www.dropbox.com/s/ka9ximgj65dibtr/mr.tfrecord?dl=0\" rel=\"nofollow\">this</a> modified 3d volume from the RIRE dataset with following decoder:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-en\">Decoder</span>:\n  <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span>Decodes a tfrecord volume to tensor.<span class=\"pl-pds\">\"\"\"</span></span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-c1\">__init__</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>):\n    <span class=\"pl-c1\">self</span>.features <span class=\"pl-k\">=</span> {\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span>volume/encoded<span class=\"pl-pds\">'</span></span>: tf.FixedLenFeature((), tf.string),\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span>volume/shape<span class=\"pl-pds\">'</span></span>: tf.VarLenFeature(tf.int64),\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span>volume/vmin<span class=\"pl-pds\">'</span></span>: tf.FixedLenFeature((), tf.int64),\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span>volume/vmax<span class=\"pl-pds\">'</span></span>: tf.FixedLenFeature((), tf.int64),\n    }\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">decode</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">example</span>):\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"\"\"</span>Returns tensor from tfrecord string.</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">    Args:</span>\n<span class=\"pl-s\">      example: tfrecord string</span>\n<span class=\"pl-s\">    Returns:</span>\n<span class=\"pl-s\">      volume: volume tensor</span>\n<span class=\"pl-s\">    <span class=\"pl-pds\">\"\"\"</span></span>\n    <span class=\"pl-k\">with</span> tf.name_scope(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>decode<span class=\"pl-pds\">'</span></span>):\n      features <span class=\"pl-k\">=</span> tf.parse_single_example(example, <span class=\"pl-v\">features</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">self</span>.features)\n\n      <span class=\"pl-k\">return</span> tf.reshape(tf.decode_raw(features[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>volume/encoded<span class=\"pl-pds\">'</span></span>], tf.int32),\n                        features[<span class=\"pl-s\"><span class=\"pl-pds\">'</span>volume/shape<span class=\"pl-pds\">'</span></span>].values)</pre></div>\n<p>this script should read volume and let the error occur:</p>\n<div class=\"highlight highlight-source-python\"><pre>decoder <span class=\"pl-k\">=</span> Decoder()\n\ndataset <span class=\"pl-k\">=</span> tf.contrib.data.TFRecordDataset(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>mr.tfrecord<span class=\"pl-pds\">'</span></span>).map(decoder.decode)\n\nvolume <span class=\"pl-k\">=</span> dataset.make_one_shot_iterator().get_next()\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> session:\n  session.run(volume)</pre></div>\n<p>yielding:</p>\n<pre><code>2017-10-09 17:30:13.903542: W C:\\tf_jenkins\\home\\workspace\\tf-nightly-windows\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\framework\\op_kernel.cc:1192] Invalid argument: Could not parse example input, value: '\n\u00ab\u00b5\u00bd'\n\u2580\u03c3\u00bd'\n\ufffdvolume/encoded\ufffd\u2569\u03c3\u00bd'\n\u253c\u03c3\u00bd'\n\u2514\u03c3\u00bd'\n2017-10-09 17:30:14.626344: W C:\\tf_jenkins\\home\\workspace\\tf-nightly-windows\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\framework\\op_kernel.cc:1192] Invalid argument: Could not parse example input, value: '\n\u00ab\u00b5\u00bd'\n\u2580\u03c3\u00bd'\n\ufffdvolume/encoded\ufffd\u2569\u03c3\u00bd'\n\u253c\u03c3\u00bd'\n\u2514\u03c3\u00bd'\nTraceback (most recent call last):\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1323, in _do_call\n    return fn(*args)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1302, in _run_fn\n    status, run_metadata)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\contextlib.py\", line 88, in __exit__\n    next(self.gen)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 467, in raise_exception_on_not_ok_status\n    c_api.TF_GetCode(status.status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Could not parse example input, value: '\n\\udcae\\udce6\\udcab'\n\\udcdf\\udce5\\udcab'\n\ufffdvolume/encoded\ufffd\\udcca\\udce5\\udcab'\n\\udcc5\\udce5\\udcab'\n\\udcc0\\udce5\\udcab'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 889, in run\n    run_metadata_ptr)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1120, in _run\n    feed_dict_tensor, options, run_metadata)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1317, in _do_run\n    options, run_metadata)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Could not parse example input, value: '\n\\udcae\\udce6\\udcab'\n\\udcdf\\udce5\\udcab'\n\ufffdvolume/encoded\ufffd\\udcca\\udce5\\udcab'\n\\udcc5\\udce5\\udcab'\n\\udcc0\\udce5\\udcab'\n</code></pre>\n<p>Tensorflow versions where this occurs latest <code>tf-nightly</code>, <code>tf-nightly-gpu</code> and 1.3.0 gpu all on windows 10</p>", "body_text": "Can confirm this issue though it only occurs on windows. To reproduce you can use this modified 3d volume from the RIRE dataset with following decoder:\nclass Decoder:\n  \"\"\"Decodes a tfrecord volume to tensor.\"\"\"\n\n  def __init__(self):\n    self.features = {\n        'volume/encoded': tf.FixedLenFeature((), tf.string),\n        'volume/shape': tf.VarLenFeature(tf.int64),\n        'volume/vmin': tf.FixedLenFeature((), tf.int64),\n        'volume/vmax': tf.FixedLenFeature((), tf.int64),\n    }\n\n  def decode(self, example):\n    \"\"\"Returns tensor from tfrecord string.\n\n    Args:\n      example: tfrecord string\n    Returns:\n      volume: volume tensor\n    \"\"\"\n    with tf.name_scope('decode'):\n      features = tf.parse_single_example(example, features=self.features)\n\n      return tf.reshape(tf.decode_raw(features['volume/encoded'], tf.int32),\n                        features['volume/shape'].values)\nthis script should read volume and let the error occur:\ndecoder = Decoder()\n\ndataset = tf.contrib.data.TFRecordDataset('mr.tfrecord').map(decoder.decode)\n\nvolume = dataset.make_one_shot_iterator().get_next()\n\nwith tf.Session() as session:\n  session.run(volume)\nyielding:\n2017-10-09 17:30:13.903542: W C:\\tf_jenkins\\home\\workspace\\tf-nightly-windows\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\framework\\op_kernel.cc:1192] Invalid argument: Could not parse example input, value: '\n\u00ab\u00b5\u00bd'\n\u2580\u03c3\u00bd'\n\ufffdvolume/encoded\ufffd\u2569\u03c3\u00bd'\n\u253c\u03c3\u00bd'\n\u2514\u03c3\u00bd'\n2017-10-09 17:30:14.626344: W C:\\tf_jenkins\\home\\workspace\\tf-nightly-windows\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\framework\\op_kernel.cc:1192] Invalid argument: Could not parse example input, value: '\n\u00ab\u00b5\u00bd'\n\u2580\u03c3\u00bd'\n\ufffdvolume/encoded\ufffd\u2569\u03c3\u00bd'\n\u253c\u03c3\u00bd'\n\u2514\u03c3\u00bd'\nTraceback (most recent call last):\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1323, in _do_call\n    return fn(*args)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1302, in _run_fn\n    status, run_metadata)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\contextlib.py\", line 88, in __exit__\n    next(self.gen)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 467, in raise_exception_on_not_ok_status\n    c_api.TF_GetCode(status.status))\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Could not parse example input, value: '\n\\udcae\\udce6\\udcab'\n\\udcdf\\udce5\\udcab'\n\ufffdvolume/encoded\ufffd\\udcca\\udce5\\udcab'\n\\udcc5\\udce5\\udcab'\n\\udcc0\\udce5\\udcab'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 889, in run\n    run_metadata_ptr)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1120, in _run\n    feed_dict_tensor, options, run_metadata)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1317, in _do_run\n    options, run_metadata)\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Could not parse example input, value: '\n\\udcae\\udce6\\udcab'\n\\udcdf\\udce5\\udcab'\n\ufffdvolume/encoded\ufffd\\udcca\\udce5\\udcab'\n\\udcc5\\udce5\\udcab'\n\\udcc0\\udce5\\udcab'\n\nTensorflow versions where this occurs latest tf-nightly, tf-nightly-gpu and 1.3.0 gpu all on windows 10", "body": "Can confirm this issue though it only occurs on windows. To reproduce you can use [this][1] modified 3d volume from the RIRE dataset with following decoder:\r\n\r\n```python\r\nclass Decoder:\r\n  \"\"\"Decodes a tfrecord volume to tensor.\"\"\"\r\n\r\n  def __init__(self):\r\n    self.features = {\r\n        'volume/encoded': tf.FixedLenFeature((), tf.string),\r\n        'volume/shape': tf.VarLenFeature(tf.int64),\r\n        'volume/vmin': tf.FixedLenFeature((), tf.int64),\r\n        'volume/vmax': tf.FixedLenFeature((), tf.int64),\r\n    }\r\n\r\n  def decode(self, example):\r\n    \"\"\"Returns tensor from tfrecord string.\r\n\r\n    Args:\r\n      example: tfrecord string\r\n    Returns:\r\n      volume: volume tensor\r\n    \"\"\"\r\n    with tf.name_scope('decode'):\r\n      features = tf.parse_single_example(example, features=self.features)\r\n\r\n      return tf.reshape(tf.decode_raw(features['volume/encoded'], tf.int32),\r\n                        features['volume/shape'].values)\r\n```\r\n\r\nthis script should read volume and let the error occur:\r\n\r\n```python\r\ndecoder = Decoder()\r\n\r\ndataset = tf.contrib.data.TFRecordDataset('mr.tfrecord').map(decoder.decode)\r\n\r\nvolume = dataset.make_one_shot_iterator().get_next()\r\n\r\nwith tf.Session() as session:\r\n  session.run(volume)\r\n```\r\n\r\nyielding:\r\n\r\n```\r\n2017-10-09 17:30:13.903542: W C:\\tf_jenkins\\home\\workspace\\tf-nightly-windows\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\framework\\op_kernel.cc:1192] Invalid argument: Could not parse example input, value: '\r\n\u00ab\u00b5\u00bd'\r\n\u2580\u03c3\u00bd'\r\n\u000evolume/encoded\u0012\u2569\u03c3\u00bd'\r\n\u253c\u03c3\u00bd'\r\n\u2514\u03c3\u00bd'\r\n2017-10-09 17:30:14.626344: W C:\\tf_jenkins\\home\\workspace\\tf-nightly-windows\\M\\windows-gpu\\PY\\36\\tensorflow\\core\\framework\\op_kernel.cc:1192] Invalid argument: Could not parse example input, value: '\r\n\u00ab\u00b5\u00bd'\r\n\u2580\u03c3\u00bd'\r\n\u000evolume/encoded\u0012\u2569\u03c3\u00bd'\r\n\u253c\u03c3\u00bd'\r\n\u2514\u03c3\u00bd'\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1323, in _do_call\r\n    return fn(*args)\r\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1302, in _run_fn\r\n    status, run_metadata)\r\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\contextlib.py\", line 88, in __exit__\r\n    next(self.gen)\r\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 467, in raise_exception_on_not_ok_status\r\n    c_api.TF_GetCode(status.status))\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Could not parse example input, value: '\r\n\\udcae\\udce6\\udcab'\r\n\\udcdf\\udce5\\udcab'\r\n\u000evolume/encoded\u0012\\udcca\\udce5\\udcab'\r\n\\udcc5\\udce5\\udcab'\r\n\\udcc0\\udce5\\udcab'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 889, in run\r\n    run_metadata_ptr)\r\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1120, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1317, in _do_run\r\n    options, run_metadata)\r\n  File \"C:\\Users\\Bodo\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1336, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Could not parse example input, value: '\r\n\\udcae\\udce6\\udcab'\r\n\\udcdf\\udce5\\udcab'\r\n\u000evolume/encoded\u0012\\udcca\\udce5\\udcab'\r\n\\udcc5\\udce5\\udcab'\r\n\\udcc0\\udce5\\udcab'\r\n```\r\n\r\nTensorflow versions where this occurs latest `tf-nightly`, `tf-nightly-gpu` and 1.3.0 gpu all on windows 10\r\n\r\n[1]: https://www.dropbox.com/s/ka9ximgj65dibtr/mr.tfrecord?dl=0"}
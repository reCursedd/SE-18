{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/360669082", "html_url": "https://github.com/tensorflow/tensorflow/issues/13348#issuecomment-360669082", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13348", "id": 360669082, "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDY2OTA4Mg==", "user": {"login": "tilarids", "id": 47031, "node_id": "MDQ6VXNlcjQ3MDMx", "avatar_url": "https://avatars1.githubusercontent.com/u/47031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tilarids", "html_url": "https://github.com/tilarids", "followers_url": "https://api.github.com/users/tilarids/followers", "following_url": "https://api.github.com/users/tilarids/following{/other_user}", "gists_url": "https://api.github.com/users/tilarids/gists{/gist_id}", "starred_url": "https://api.github.com/users/tilarids/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tilarids/subscriptions", "organizations_url": "https://api.github.com/users/tilarids/orgs", "repos_url": "https://api.github.com/users/tilarids/repos", "events_url": "https://api.github.com/users/tilarids/events{/privacy}", "received_events_url": "https://api.github.com/users/tilarids/received_events", "type": "User", "site_admin": false}, "created_at": "2018-01-26T02:47:38Z", "updated_at": "2018-01-26T02:47:38Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I have experienced the same problem when using one_hot_column. I will try to extract a trivial working example out of my code but here is an excerpt:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-c\"><span class=\"pl-c\">#</span> columns are defined like this:</span>\nvector <span class=\"pl-k\">=</span> tf.contrib.layers.sparse_column_with_vocabulary_file(\n      <span class=\"pl-v\">column_name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>vector<span class=\"pl-pds\">\"</span></span>,\n      <span class=\"pl-v\">vocabulary_file</span><span class=\"pl-k\">=</span>vocab,\n      <span class=\"pl-v\">vocab_size</span><span class=\"pl-k\">=</span>vocab_size)\nvector_weighted <span class=\"pl-k\">=</span> tf.contrib.layers.weighted_sparse_column(\n      <span class=\"pl-v\">sparse_id_column</span><span class=\"pl-k\">=</span>vector,\n      <span class=\"pl-v\">weight_column_name</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>vector_weights<span class=\"pl-pds\">\"</span></span>)\nvector_one_hot <span class=\"pl-k\">=</span> tf.contrib.layers.one_hot_column(vector_weighted)\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> estimator is defined like this:</span>\nestimator <span class=\"pl-k\">=</span> tf.contrib.learn.DNNRegressor(\n    <span class=\"pl-v\">feature_columns</span><span class=\"pl-k\">=</span>[vector_one_hot],\n    <span class=\"pl-v\">hidden_units</span><span class=\"pl-k\">=</span>[<span class=\"pl-c1\">1024</span>],\n    <span class=\"pl-v\">optimizer</span><span class=\"pl-k\">=</span>tf.train.AdagradOptimizer(learning_rate))</pre></div>\n<p>This fails with</p>\n<pre><code>The last dimension of the inputs to `Dense` should be defined. Found `None`.\n</code></pre>", "body_text": "I have experienced the same problem when using one_hot_column. I will try to extract a trivial working example out of my code but here is an excerpt:\n# columns are defined like this:\nvector = tf.contrib.layers.sparse_column_with_vocabulary_file(\n      column_name=\"vector\",\n      vocabulary_file=vocab,\n      vocab_size=vocab_size)\nvector_weighted = tf.contrib.layers.weighted_sparse_column(\n      sparse_id_column=vector,\n      weight_column_name=\"vector_weights\")\nvector_one_hot = tf.contrib.layers.one_hot_column(vector_weighted)\n\n# estimator is defined like this:\nestimator = tf.contrib.learn.DNNRegressor(\n    feature_columns=[vector_one_hot],\n    hidden_units=[1024],\n    optimizer=tf.train.AdagradOptimizer(learning_rate))\nThis fails with\nThe last dimension of the inputs to `Dense` should be defined. Found `None`.", "body": "I have experienced the same problem when using one_hot_column. I will try to extract a trivial working example out of my code but here is an excerpt:\r\n\r\n```python\r\n# columns are defined like this:\r\nvector = tf.contrib.layers.sparse_column_with_vocabulary_file(\r\n      column_name=\"vector\",\r\n      vocabulary_file=vocab,\r\n      vocab_size=vocab_size)\r\nvector_weighted = tf.contrib.layers.weighted_sparse_column(\r\n      sparse_id_column=vector,\r\n      weight_column_name=\"vector_weights\")\r\nvector_one_hot = tf.contrib.layers.one_hot_column(vector_weighted)\r\n\r\n# estimator is defined like this:\r\nestimator = tf.contrib.learn.DNNRegressor(\r\n    feature_columns=[vector_one_hot],\r\n    hidden_units=[1024],\r\n    optimizer=tf.train.AdagradOptimizer(learning_rate))\r\n```\r\n\r\nThis fails with \r\n```\r\nThe last dimension of the inputs to `Dense` should be defined. Found `None`.\r\n```"}
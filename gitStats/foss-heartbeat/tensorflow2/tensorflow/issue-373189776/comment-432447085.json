{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/432447085", "html_url": "https://github.com/tensorflow/tensorflow/issues/23196#issuecomment-432447085", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23196", "id": 432447085, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjQ0NzA4NQ==", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-23T22:38:19Z", "updated_at": "2018-11-05T12:15:08Z", "author_association": "CONTRIBUTOR", "body_html": "<p>The bug can be reproduced with a shorter snippet:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\nmask <span class=\"pl-k\">=</span> tf.random_normal((<span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">1</span>), <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32, <span class=\"pl-v\">seed</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">12345</span>)\nX <span class=\"pl-k\">=</span> tf.reduce_sum(mask <span class=\"pl-k\">*</span> mask)\nsqrtX <span class=\"pl-k\">=</span> tf.sqrt(X)\noutput <span class=\"pl-k\">=</span> tf.reduce_min(mask <span class=\"pl-k\">/</span> sqrtX)\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    <span class=\"pl-c1\">print</span>(sess.run([X, sqrtX, output]))\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> prints [121.88353, 0.09057899, -0.22156183]</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> however 0.09 != sqrt(121.88), but 0.09 == 1.0 / sqrt(1212.88)</span></pre></div>", "body_text": "The bug can be reproduced with a shorter snippet:\nimport tensorflow as tf\n\nmask = tf.random_normal((10, 10, 1), dtype=tf.float32, seed=12345)\nX = tf.reduce_sum(mask * mask)\nsqrtX = tf.sqrt(X)\noutput = tf.reduce_min(mask / sqrtX)\n\nwith tf.Session() as sess:\n    print(sess.run([X, sqrtX, output]))\n# prints [121.88353, 0.09057899, -0.22156183]\n# however 0.09 != sqrt(121.88), but 0.09 == 1.0 / sqrt(1212.88)", "body": "The bug can be reproduced with a shorter snippet:\r\n```python\r\nimport tensorflow as tf\r\n\r\nmask = tf.random_normal((10, 10, 1), dtype=tf.float32, seed=12345)\r\nX = tf.reduce_sum(mask * mask)\r\nsqrtX = tf.sqrt(X)\r\noutput = tf.reduce_min(mask / sqrtX)\r\n\r\nwith tf.Session() as sess:\r\n    print(sess.run([X, sqrtX, output]))\r\n# prints [121.88353, 0.09057899, -0.22156183]\r\n# however 0.09 != sqrt(121.88), but 0.09 == 1.0 / sqrt(1212.88)\r\n```\r\n"}
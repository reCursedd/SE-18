{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/432543038", "html_url": "https://github.com/tensorflow/tensorflow/issues/23196#issuecomment-432543038", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23196", "id": 432543038, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjU0MzAzOA==", "user": {"login": "shyoshyo", "id": 5780122, "node_id": "MDQ6VXNlcjU3ODAxMjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/5780122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shyoshyo", "html_url": "https://github.com/shyoshyo", "followers_url": "https://api.github.com/users/shyoshyo/followers", "following_url": "https://api.github.com/users/shyoshyo/following{/other_user}", "gists_url": "https://api.github.com/users/shyoshyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/shyoshyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shyoshyo/subscriptions", "organizations_url": "https://api.github.com/users/shyoshyo/orgs", "repos_url": "https://api.github.com/users/shyoshyo/repos", "events_url": "https://api.github.com/users/shyoshyo/events{/privacy}", "received_events_url": "https://api.github.com/users/shyoshyo/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-24T07:24:05Z", "updated_at": "2018-10-24T07:24:05Z", "author_association": "NONE", "body_html": "<blockquote>\n<p>The bug can be reproduced with a shorter snippet:</p>\n<div class=\"highlight highlight-source-python\"><pre><span class=\"pl-k\">import</span> tensorflow <span class=\"pl-k\">as</span> tf\n\nmask <span class=\"pl-k\">=</span> tf.random_normal((<span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">1</span>), <span class=\"pl-v\">dtype</span><span class=\"pl-k\">=</span>tf.float32, <span class=\"pl-v\">seed</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">12345</span>)\nX <span class=\"pl-k\">=</span> tf.reduce_sum(mask <span class=\"pl-k\">*</span> mask)\nsqrtX <span class=\"pl-k\">=</span> tf.sqrt(X)\noutput <span class=\"pl-k\">=</span> tf.reduce_min(mask <span class=\"pl-k\">/</span> sqrtX)\n\n<span class=\"pl-k\">with</span> tf.Session() <span class=\"pl-k\">as</span> sess:\n    <span class=\"pl-c1\">print</span>(sess.run([X, sqrtX, output]))\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> prints [121.88353, 0.09057899, -0.22156183]</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> however 0.09 != sqrt(121.88), but 0.99 == 1.0 / sqrt(1212.88)</span></pre></div>\n</blockquote>\n<p>Thank you for simplifying my code to reproduce the same problem.</p>", "body_text": "The bug can be reproduced with a shorter snippet:\nimport tensorflow as tf\n\nmask = tf.random_normal((10, 10, 1), dtype=tf.float32, seed=12345)\nX = tf.reduce_sum(mask * mask)\nsqrtX = tf.sqrt(X)\noutput = tf.reduce_min(mask / sqrtX)\n\nwith tf.Session() as sess:\n    print(sess.run([X, sqrtX, output]))\n# prints [121.88353, 0.09057899, -0.22156183]\n# however 0.09 != sqrt(121.88), but 0.99 == 1.0 / sqrt(1212.88)\n\nThank you for simplifying my code to reproduce the same problem.", "body": "> The bug can be reproduced with a shorter snippet:\r\n> \r\n> ```python\r\n> import tensorflow as tf\r\n> \r\n> mask = tf.random_normal((10, 10, 1), dtype=tf.float32, seed=12345)\r\n> X = tf.reduce_sum(mask * mask)\r\n> sqrtX = tf.sqrt(X)\r\n> output = tf.reduce_min(mask / sqrtX)\r\n> \r\n> with tf.Session() as sess:\r\n>     print(sess.run([X, sqrtX, output]))\r\n> # prints [121.88353, 0.09057899, -0.22156183]\r\n> # however 0.09 != sqrt(121.88), but 0.99 == 1.0 / sqrt(1212.88)\r\n> ```\r\n\r\nThank you for simplifying my code to reproduce the same problem."}
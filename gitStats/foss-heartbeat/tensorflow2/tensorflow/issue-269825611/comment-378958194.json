{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/378958194", "html_url": "https://github.com/tensorflow/tensorflow/issues/14117#issuecomment-378958194", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/14117", "id": 378958194, "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODk1ODE5NA==", "user": {"login": "hccheng", "id": 1667281, "node_id": "MDQ6VXNlcjE2NjcyODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1667281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hccheng", "html_url": "https://github.com/hccheng", "followers_url": "https://api.github.com/users/hccheng/followers", "following_url": "https://api.github.com/users/hccheng/following{/other_user}", "gists_url": "https://api.github.com/users/hccheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/hccheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hccheng/subscriptions", "organizations_url": "https://api.github.com/users/hccheng/orgs", "repos_url": "https://api.github.com/users/hccheng/repos", "events_url": "https://api.github.com/users/hccheng/events{/privacy}", "received_events_url": "https://api.github.com/users/hccheng/received_events", "type": "User", "site_admin": false}, "created_at": "2018-04-05T14:35:54Z", "updated_at": "2018-04-05T14:47:01Z", "author_association": "NONE", "body_html": "<p>I've got the same error using CMake 3.10.3; the problem is in tf_cc_ops.cmake (<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/tf_cc_ops.cmake\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/tf_cc_ops.cmake</a>)</p>\n<pre><code>if (WIN32)\n  if(${CMAKE_GENERATOR} MATCHES \"Visual Studio.*\")\n    set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_BUILD_TYPE}/pywrap_tensorflow_internal.lib\")\n  else()\n    set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/pywrap_tensorflow_internal.lib\")\n  endif()\nelse (WIN32)\n  set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/libpywrap_tensorflow_internal.so\")\nendif (WIN32)\n</code></pre>\n<p>Here, the variable ${CMAKE_BUILD_TYPE} is undefined; therefore the path to pywrap_tensorflow_lib becomes \"${CMAKE_CURRENT_BINARY_DIR}//pywrap_tensorflow_internal.lib\"</p>\n<p>Some manual check, for example the one suggested in <a href=\"https://cmake.org/pipermail/cmake/2008-September/023808.html\" rel=\"nofollow\">https://cmake.org/pipermail/cmake/2008-September/023808.html</a>, should fix the problem.<br>\n[edit] The fix in the above link will not work for MSVC though unless the value for ${CMAKE_BUILD_TYPE} actually matches the build configuration in MSVC.</p>", "body_text": "I've got the same error using CMake 3.10.3; the problem is in tf_cc_ops.cmake (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/tf_cc_ops.cmake)\nif (WIN32)\n  if(${CMAKE_GENERATOR} MATCHES \"Visual Studio.*\")\n    set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_BUILD_TYPE}/pywrap_tensorflow_internal.lib\")\n  else()\n    set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/pywrap_tensorflow_internal.lib\")\n  endif()\nelse (WIN32)\n  set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/libpywrap_tensorflow_internal.so\")\nendif (WIN32)\n\nHere, the variable ${CMAKE_BUILD_TYPE} is undefined; therefore the path to pywrap_tensorflow_lib becomes \"${CMAKE_CURRENT_BINARY_DIR}//pywrap_tensorflow_internal.lib\"\nSome manual check, for example the one suggested in https://cmake.org/pipermail/cmake/2008-September/023808.html, should fix the problem.\n[edit] The fix in the above link will not work for MSVC though unless the value for ${CMAKE_BUILD_TYPE} actually matches the build configuration in MSVC.", "body": "I've got the same error using CMake 3.10.3; the problem is in tf_cc_ops.cmake ([https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/tf_cc_ops.cmake](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/cmake/tf_cc_ops.cmake))\r\n\r\n```\r\nif (WIN32)\r\n  if(${CMAKE_GENERATOR} MATCHES \"Visual Studio.*\")\r\n    set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_BUILD_TYPE}/pywrap_tensorflow_internal.lib\")\r\n  else()\r\n    set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/pywrap_tensorflow_internal.lib\")\r\n  endif()\r\nelse (WIN32)\r\n  set (pywrap_tensorflow_lib \"${CMAKE_CURRENT_BINARY_DIR}/libpywrap_tensorflow_internal.so\")\r\nendif (WIN32)\r\n```\r\nHere, the variable ${CMAKE_BUILD_TYPE} is undefined; therefore the path to pywrap_tensorflow_lib becomes \"${CMAKE_CURRENT_BINARY_DIR}//pywrap_tensorflow_internal.lib\"\r\n\r\nSome manual check, for example the one suggested in [https://cmake.org/pipermail/cmake/2008-September/023808.html](https://cmake.org/pipermail/cmake/2008-September/023808.html), should fix the problem.\r\n[edit] The fix in the above link will not work for MSVC though unless the value for ${CMAKE_BUILD_TYPE} actually matches the build configuration in MSVC."}
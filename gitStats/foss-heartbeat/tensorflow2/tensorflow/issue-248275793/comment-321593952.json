{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/321593952", "html_url": "https://github.com/tensorflow/tensorflow/issues/12065#issuecomment-321593952", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12065", "id": 321593952, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTU5Mzk1Mg==", "user": {"login": "adarob", "id": 1088232, "node_id": "MDQ6VXNlcjEwODgyMzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1088232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adarob", "html_url": "https://github.com/adarob", "followers_url": "https://api.github.com/users/adarob/followers", "following_url": "https://api.github.com/users/adarob/following{/other_user}", "gists_url": "https://api.github.com/users/adarob/gists{/gist_id}", "starred_url": "https://api.github.com/users/adarob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adarob/subscriptions", "organizations_url": "https://api.github.com/users/adarob/orgs", "repos_url": "https://api.github.com/users/adarob/repos", "events_url": "https://api.github.com/users/adarob/events{/privacy}", "received_events_url": "https://api.github.com/users/adarob/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-10T15:54:26Z", "updated_at": "2017-08-10T15:54:26Z", "author_association": "MEMBER", "body_html": "<p>This is actually a more specific case of what I am building, which is a general sampling helper that takes a layer like the ScheduledOutputTrainingHelper. The problem with using the training helper is that it doesn't output the actual samples so it can't be used during inference.</p>\n<p>Rylan, your solution solution will almost work, but you are going to hit the issue that sample_ids is currently required to be a scalar integer, something which I am also solving with my change. If you can wait until next week, I can have something that will work for you. In the meantime, I'd recommend hacking up the CustomHelper to work for your use case. You'll also need to adjust the BasicDecoder output_size and output_dtype to match the shape of your sample tensor.</p>", "body_text": "This is actually a more specific case of what I am building, which is a general sampling helper that takes a layer like the ScheduledOutputTrainingHelper. The problem with using the training helper is that it doesn't output the actual samples so it can't be used during inference.\nRylan, your solution solution will almost work, but you are going to hit the issue that sample_ids is currently required to be a scalar integer, something which I am also solving with my change. If you can wait until next week, I can have something that will work for you. In the meantime, I'd recommend hacking up the CustomHelper to work for your use case. You'll also need to adjust the BasicDecoder output_size and output_dtype to match the shape of your sample tensor.", "body": "This is actually a more specific case of what I am building, which is a general sampling helper that takes a layer like the ScheduledOutputTrainingHelper. The problem with using the training helper is that it doesn't output the actual samples so it can't be used during inference.\r\n\r\nRylan, your solution solution will almost work, but you are going to hit the issue that sample_ids is currently required to be a scalar integer, something which I am also solving with my change. If you can wait until next week, I can have something that will work for you. In the meantime, I'd recommend hacking up the CustomHelper to work for your use case. You'll also need to adjust the BasicDecoder output_size and output_dtype to match the shape of your sample tensor."}
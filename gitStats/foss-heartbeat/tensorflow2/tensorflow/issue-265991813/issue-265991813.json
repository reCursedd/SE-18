{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13771", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13771/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13771/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13771/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13771", "id": 265991813, "node_id": "MDU6SXNzdWUyNjU5OTE4MTM=", "number": 13771, "title": "[Error] unknown op in C++", "user": {"login": "formath", "id": 6040127, "node_id": "MDQ6VXNlcjYwNDAxMjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6040127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/formath", "html_url": "https://github.com/formath", "followers_url": "https://api.github.com/users/formath/followers", "following_url": "https://api.github.com/users/formath/following{/other_user}", "gists_url": "https://api.github.com/users/formath/gists{/gist_id}", "starred_url": "https://api.github.com/users/formath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/formath/subscriptions", "organizations_url": "https://api.github.com/users/formath/orgs", "repos_url": "https://api.github.com/users/formath/repos", "events_url": "https://api.github.com/users/formath/events{/privacy}", "received_events_url": "https://api.github.com/users/formath/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-10-17T04:45:44Z", "updated_at": "2017-10-23T16:57:31Z", "closed_at": "2017-10-21T18:58:29Z", "author_association": "CONTRIBUTOR", "body_html": "<p>I load a simple graph <code>c=a*b</code> in C++ and do prediction for <code>c</code>. It gives right result but some errors <code>unknown op</code> occur. What's the problem?</p>\n<p>OS: macOS 10.12.6<br>\nTensorflow: master. build from source using <code>makefile/build_all_ios.sh</code></p>\n<p>prediction cpp code:</p>\n<pre><code>GraphDef graph_def;\nstd::string graph_path = argv[1];\nstatus = ReadBinaryProto(Env::Default(), graph_path, &amp;graph_def);\nif (!status.ok()) {\n    std::cout &lt;&lt; status.ToString() &lt;&lt; std::endl;\n    return 1;\n} else {\n    std::cout &lt;&lt; \"Load graph protobuf successfully\" &lt;&lt; std::endl;\n}\nstatus = session-&gt;Create(graph_def);\nif (!status.ok()) {\n    std::cout &lt;&lt; status.ToString() &lt;&lt; std::endl;\n    return 1;\n} else {\n    std::cout &lt;&lt; \"Add graph to session successfully\" &lt;&lt; std::endl;\n}\n\n// Setup inputs and outputs:\nTensor a(DT_FLOAT, TensorShape());\na.scalar&lt;float&gt;()() = 3.0;\nTensor b(DT_FLOAT, TensorShape());\nb.scalar&lt;float&gt;()() = 2.0;\nstd::vector&lt;std::pair&lt;string, tensorflow::Tensor&gt;&gt; inputs = {\n    { \"a\", a },\n    { \"b\", b },\n};\n\nstd::vector&lt;tensorflow::Tensor&gt; outputs;\n\n// Run the session, evaluating our \"c\" operation from the graph\nstatus = session-&gt;Run(inputs, {\"c\"}, {}, &amp;outputs);\nif (!status.ok()) {\n    std::cout &lt;&lt; status.ToString() &lt;&lt; std::endl;\n    return 1;\n} else {\n    std::cout &lt;&lt; \"Run session successfully\" &lt;&lt; std::endl;\n}\n\nauto output_c = outputs[0].scalar&lt;float&gt;();\nstd::cout &lt;&lt; outputs[0].DebugString() &lt;&lt; std::endl; \nstd::cout &lt;&lt; \"output value: \" &lt;&lt; output_c() &lt;&lt; std::endl; \n\nsession-&gt;Close();\n</code></pre>\n<p>Full error message:</p>\n<pre><code>2017-10-17 12:32:11.796090: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\nSession created successfully\nLoad graph protobuf successfully\n2017-10-17 12:32:11.808591: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"PopulationCount\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: PopulationCount\n2017-10-17 12:32:11.808658: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseAnd\n2017-10-17 12:32:11.808669: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseXor\n2017-10-17 12:32:11.808691: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"EncodeWav\" device_type: \"CPU\"') for unknown op: EncodeWav\n2017-10-17 12:32:11.808699: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DecodeWav\" device_type: \"CPU\"') for unknown op: DecodeWav\n2017-10-17 12:32:11.808732: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Mfcc\" device_type: \"CPU\"') for unknown op: Mfcc\n2017-10-17 12:32:11.808747: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: Invert\n2017-10-17 12:32:11.808806: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseOr\n2017-10-17 12:32:11.808857: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"AudioSpectrogram\" device_type: \"CPU\"') for unknown op: AudioSpectrogram\nAdd graph to session successfully\nRun session successfully\nTensor&lt;type: float shape: [] values: 6&gt;\noutput value: 6\n</code></pre>", "body_text": "I load a simple graph c=a*b in C++ and do prediction for c. It gives right result but some errors unknown op occur. What's the problem?\nOS: macOS 10.12.6\nTensorflow: master. build from source using makefile/build_all_ios.sh\nprediction cpp code:\nGraphDef graph_def;\nstd::string graph_path = argv[1];\nstatus = ReadBinaryProto(Env::Default(), graph_path, &graph_def);\nif (!status.ok()) {\n    std::cout << status.ToString() << std::endl;\n    return 1;\n} else {\n    std::cout << \"Load graph protobuf successfully\" << std::endl;\n}\nstatus = session->Create(graph_def);\nif (!status.ok()) {\n    std::cout << status.ToString() << std::endl;\n    return 1;\n} else {\n    std::cout << \"Add graph to session successfully\" << std::endl;\n}\n\n// Setup inputs and outputs:\nTensor a(DT_FLOAT, TensorShape());\na.scalar<float>()() = 3.0;\nTensor b(DT_FLOAT, TensorShape());\nb.scalar<float>()() = 2.0;\nstd::vector<std::pair<string, tensorflow::Tensor>> inputs = {\n    { \"a\", a },\n    { \"b\", b },\n};\n\nstd::vector<tensorflow::Tensor> outputs;\n\n// Run the session, evaluating our \"c\" operation from the graph\nstatus = session->Run(inputs, {\"c\"}, {}, &outputs);\nif (!status.ok()) {\n    std::cout << status.ToString() << std::endl;\n    return 1;\n} else {\n    std::cout << \"Run session successfully\" << std::endl;\n}\n\nauto output_c = outputs[0].scalar<float>();\nstd::cout << outputs[0].DebugString() << std::endl; \nstd::cout << \"output value: \" << output_c() << std::endl; \n\nsession->Close();\n\nFull error message:\n2017-10-17 12:32:11.796090: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\nSession created successfully\nLoad graph protobuf successfully\n2017-10-17 12:32:11.808591: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"PopulationCount\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: PopulationCount\n2017-10-17 12:32:11.808658: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseAnd\n2017-10-17 12:32:11.808669: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseXor\n2017-10-17 12:32:11.808691: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"EncodeWav\" device_type: \"CPU\"') for unknown op: EncodeWav\n2017-10-17 12:32:11.808699: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DecodeWav\" device_type: \"CPU\"') for unknown op: DecodeWav\n2017-10-17 12:32:11.808732: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Mfcc\" device_type: \"CPU\"') for unknown op: Mfcc\n2017-10-17 12:32:11.808747: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: Invert\n2017-10-17 12:32:11.808806: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseOr\n2017-10-17 12:32:11.808857: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"AudioSpectrogram\" device_type: \"CPU\"') for unknown op: AudioSpectrogram\nAdd graph to session successfully\nRun session successfully\nTensor<type: float shape: [] values: 6>\noutput value: 6", "body": "I load a simple graph `c=a*b` in C++ and do prediction for `c`. It gives right result but some errors `unknown op` occur. What's the problem?\r\n\r\nOS: macOS 10.12.6\r\nTensorflow: master. build from source using `makefile/build_all_ios.sh`\r\n\r\nprediction cpp code:\r\n```\r\nGraphDef graph_def;\r\nstd::string graph_path = argv[1];\r\nstatus = ReadBinaryProto(Env::Default(), graph_path, &graph_def);\r\nif (!status.ok()) {\r\n    std::cout << status.ToString() << std::endl;\r\n    return 1;\r\n} else {\r\n    std::cout << \"Load graph protobuf successfully\" << std::endl;\r\n}\r\nstatus = session->Create(graph_def);\r\nif (!status.ok()) {\r\n    std::cout << status.ToString() << std::endl;\r\n    return 1;\r\n} else {\r\n    std::cout << \"Add graph to session successfully\" << std::endl;\r\n}\r\n\r\n// Setup inputs and outputs:\r\nTensor a(DT_FLOAT, TensorShape());\r\na.scalar<float>()() = 3.0;\r\nTensor b(DT_FLOAT, TensorShape());\r\nb.scalar<float>()() = 2.0;\r\nstd::vector<std::pair<string, tensorflow::Tensor>> inputs = {\r\n    { \"a\", a },\r\n    { \"b\", b },\r\n};\r\n\r\nstd::vector<tensorflow::Tensor> outputs;\r\n\r\n// Run the session, evaluating our \"c\" operation from the graph\r\nstatus = session->Run(inputs, {\"c\"}, {}, &outputs);\r\nif (!status.ok()) {\r\n    std::cout << status.ToString() << std::endl;\r\n    return 1;\r\n} else {\r\n    std::cout << \"Run session successfully\" << std::endl;\r\n}\r\n\r\nauto output_c = outputs[0].scalar<float>();\r\nstd::cout << outputs[0].DebugString() << std::endl; \r\nstd::cout << \"output value: \" << output_c() << std::endl; \r\n\r\nsession->Close();\r\n```\r\n\r\nFull error message:\r\n```\r\n2017-10-17 12:32:11.796090: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\nSession created successfully\r\nLoad graph protobuf successfully\r\n2017-10-17 12:32:11.808591: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"PopulationCount\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT32 } } }') for unknown op: PopulationCount\r\n2017-10-17 12:32:11.808658: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseAnd\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseAnd\r\n2017-10-17 12:32:11.808669: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseXor\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseXor\r\n2017-10-17 12:32:11.808691: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"EncodeWav\" device_type: \"CPU\"') for unknown op: EncodeWav\r\n2017-10-17 12:32:11.808699: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"DecodeWav\" device_type: \"CPU\"') for unknown op: DecodeWav\r\n2017-10-17 12:32:11.808732: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Mfcc\" device_type: \"CPU\"') for unknown op: Mfcc\r\n2017-10-17 12:32:11.808747: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"Invert\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: Invert\r\n2017-10-17 12:32:11.808806: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"BitwiseOr\" device_type: \"CPU\" constraint { name: \"T\" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseOr\r\n2017-10-17 12:32:11.808857: E tensorflow/core/framework/op_kernel.cc:1142] OpKernel ('op: \"AudioSpectrogram\" device_type: \"CPU\"') for unknown op: AudioSpectrogram\r\nAdd graph to session successfully\r\nRun session successfully\r\nTensor<type: float shape: [] values: 6>\r\noutput value: 6\r\n```"}
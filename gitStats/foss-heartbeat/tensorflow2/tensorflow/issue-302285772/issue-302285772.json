{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17437", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17437/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17437/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/17437/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/17437", "id": 302285772, "node_id": "MDU6SXNzdWUzMDIyODU3NzI=", "number": 17437, "title": "Bazel build missing dependencies error with MPI", "user": {"login": "DavidBrayford", "id": 20337908, "node_id": "MDQ6VXNlcjIwMzM3OTA4", "avatar_url": "https://avatars2.githubusercontent.com/u/20337908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidBrayford", "html_url": "https://github.com/DavidBrayford", "followers_url": "https://api.github.com/users/DavidBrayford/followers", "following_url": "https://api.github.com/users/DavidBrayford/following{/other_user}", "gists_url": "https://api.github.com/users/DavidBrayford/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidBrayford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidBrayford/subscriptions", "organizations_url": "https://api.github.com/users/DavidBrayford/orgs", "repos_url": "https://api.github.com/users/DavidBrayford/repos", "events_url": "https://api.github.com/users/DavidBrayford/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidBrayford/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-05T12:43:49Z", "updated_at": "2018-03-19T13:02:27Z", "closed_at": "2018-03-19T13:02:27Z", "author_association": "NONE", "body_html": "<p>OS: SLES12<br>\nPython version: 3.6<br>\nBazel version: Build label: 0.11.0- (@non-git)<br>\ngcc version 7.2.0 (GCC)<br>\nNo GPU<br>\nNo CUDA</p>\n<p>With MPI enabled in configure everything else disabled.</p>\n<p>When I run the command:  bazel build --config=mkl --copt=\"-DEIGEN_USE_VML\" --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 -s -c opt //tensorflow/tools/pip_package:build_pip_package --verbose_failures</p>\n<p>I get the error below, I guess I could modify the build file to include the additional dependencies:</p>\n<p>ERROR: /home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/contrib/mpi_collectives/BUILD:40:1: undeclared inclusion(s) in rule '//tensorflow/contrib/mpi_collectives:python/ops/_mpi_ops.so':<br>\nthis rule is missing dependency declarations for the following files included by 'tensorflow/contrib/mpi_collectives/kernels/mpi_ops.cc':<br>\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/statusor.h'<br>\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/platform/port.h'<br>\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/error.h'<br>\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/status.h'<br>\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/stringpiece.h'<br>\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/platform/logging.h'<br>\ntensorflow/contrib/mpi_collectives/kernels/mpi_ops.cc:128:6: warning: 'bool tensorflow::contrib::mpi_collectives::{anonymous}::IsGPUDevice() [with T = Eigen::GpuDevice]' defined but not used [-Wunused-function]<br>\nbool IsGPUDevice() {<br>\n^~~~~~~~~~~~~~~~~~~~~~<br>\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build</p>", "body_text": "OS: SLES12\nPython version: 3.6\nBazel version: Build label: 0.11.0- (@non-git)\ngcc version 7.2.0 (GCC)\nNo GPU\nNo CUDA\nWith MPI enabled in configure everything else disabled.\nWhen I run the command:  bazel build --config=mkl --copt=\"-DEIGEN_USE_VML\" --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 -s -c opt //tensorflow/tools/pip_package:build_pip_package --verbose_failures\nI get the error below, I guess I could modify the build file to include the additional dependencies:\nERROR: /home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/contrib/mpi_collectives/BUILD:40:1: undeclared inclusion(s) in rule '//tensorflow/contrib/mpi_collectives:python/ops/_mpi_ops.so':\nthis rule is missing dependency declarations for the following files included by 'tensorflow/contrib/mpi_collectives/kernels/mpi_ops.cc':\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/statusor.h'\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/platform/port.h'\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/error.h'\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/status.h'\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/stringpiece.h'\n'/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/platform/logging.h'\ntensorflow/contrib/mpi_collectives/kernels/mpi_ops.cc:128:6: warning: 'bool tensorflow::contrib::mpi_collectives::{anonymous}::IsGPUDevice() [with T = Eigen::GpuDevice]' defined but not used [-Wunused-function]\nbool IsGPUDevice() {\n^~~~~~~~~~~~~~~~~~~~~~\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build", "body": "OS: SLES12\r\nPython version: 3.6\r\nBazel version: Build label: 0.11.0- (@non-git)\r\ngcc version 7.2.0 (GCC)\r\nNo GPU\r\nNo CUDA\r\n\r\nWith MPI enabled in configure everything else disabled.\r\n\r\nWhen I run the command:  bazel build --config=mkl --copt=\"-DEIGEN_USE_VML\" --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-msse4.1 --copt=-msse4.2 -s -c opt //tensorflow/tools/pip_package:build_pip_package --verbose_failures\r\n\r\nI get the error below, I guess I could modify the build file to include the additional dependencies:\r\n\r\nERROR: /home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/contrib/mpi_collectives/BUILD:40:1: undeclared inclusion(s) in rule '//tensorflow/contrib/mpi_collectives:python/ops/_mpi_ops.so':\r\nthis rule is missing dependency declarations for the following files included by 'tensorflow/contrib/mpi_collectives/kernels/mpi_ops.cc':\r\n  '/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/statusor.h'\r\n  '/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/platform/port.h'\r\n  '/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/error.h'\r\n  '/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/status.h'\r\n  '/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/lib/stringpiece.h'\r\n  '/home/hpc/pr28fa/di72giz/TENSORFLOW/tensorflow/tensorflow/stream_executor/platform/logging.h'\r\ntensorflow/contrib/mpi_collectives/kernels/mpi_ops.cc:128:6: warning: 'bool tensorflow::contrib::mpi_collectives::{anonymous}::IsGPUDevice() [with T = Eigen::GpuDevice]' defined but not used [-Wunused-function]\r\n bool IsGPUDevice<GPUDevice>() {\r\n      ^~~~~~~~~~~~~~~~~~~~~~\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build"}
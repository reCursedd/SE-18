{"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/191638080", "pull_request_review_id": 124244880, "id": 191638080, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MTYzODA4MA==", "diff_hunk": "@@ -113,26 +113,43 @@ JNIEXPORT jlong JNICALL Java_org_tensorflow_Session_allocate2(\n     throwException(env, kNullPointerException, \"Graph has been close()d\");\n     return 0;\n   }\n-  TF_Graph* graph = reinterpret_cast<TF_Graph*>(graph_handle);\n+", "path": "tensorflow/java/src/main/native/session_jni.cc", "position": 5, "original_position": 5, "commit_id": "f7a303f148e6b225110635d0298ee2f651968826", "original_commit_id": "f8a7579d35e93d31eca002f43633f41e47d3d15d", "user": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "body": "Thanks, but I'm not sure I follow.\r\n\r\n1. `saved_model_bundle_jni.cc` has to use `TF_NewBufferFromString` because the C API function it eventually invokes (`TF_LoadSessionFromSavedModel`) requires a `TF_Buffer*` argument. That is not the case here.\r\n\r\n2. `TF_SetConfig` does not hold on to memory of the passed in arguments upon returning, so I don't think you need to be concerned.", "created_at": "2018-05-30T04:14:03Z", "updated_at": "2018-05-30T04:15:58Z", "html_url": "https://github.com/tensorflow/tensorflow/pull/18716#discussion_r191638080", "pull_request_url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18716", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/comments/191638080"}, "html": {"href": "https://github.com/tensorflow/tensorflow/pull/18716#discussion_r191638080"}, "pull_request": {"href": "https://api.github.com/repos/tensorflow/tensorflow/pulls/18716"}}, "body_html": "<p>Thanks, but I'm not sure I follow.</p>\n<ol>\n<li>\n<p><code>saved_model_bundle_jni.cc</code> has to use <code>TF_NewBufferFromString</code> because the C API function it eventually invokes (<code>TF_LoadSessionFromSavedModel</code>) requires a <code>TF_Buffer*</code> argument. That is not the case here.</p>\n</li>\n<li>\n<p><code>TF_SetConfig</code> does not hold on to memory of the passed in arguments upon returning, so I don't think you need to be concerned.</p>\n</li>\n</ol>", "body_text": "Thanks, but I'm not sure I follow.\n\n\nsaved_model_bundle_jni.cc has to use TF_NewBufferFromString because the C API function it eventually invokes (TF_LoadSessionFromSavedModel) requires a TF_Buffer* argument. That is not the case here.\n\n\nTF_SetConfig does not hold on to memory of the passed in arguments upon returning, so I don't think you need to be concerned.", "in_reply_to_id": 183226736}
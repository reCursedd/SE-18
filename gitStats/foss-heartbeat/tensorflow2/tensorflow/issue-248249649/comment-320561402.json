{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/320561402", "html_url": "https://github.com/tensorflow/tensorflow/issues/12061#issuecomment-320561402", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/12061", "id": 320561402, "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDU2MTQwMg==", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-07T03:39:09Z", "updated_at": "2017-08-07T07:31:59Z", "author_association": "CONTRIBUTOR", "body_html": "<p>After a quick glance at your code, one thing is that your code doesn't use latency hiding.<br>\nYou still use feed_dict in the critical loop with <code>sess.run([put_op, loss], feed_dict=xxx)</code>. Even though it is fed into staging area, Python-&gt;TF copy will still have to finish before any op really runs.</p>\n<p>In tensorpack we did observe good performance improvement by using StagingArea for input in multi-gpu training (although not in every case, but sometimes it helps).</p>", "body_text": "After a quick glance at your code, one thing is that your code doesn't use latency hiding.\nYou still use feed_dict in the critical loop with sess.run([put_op, loss], feed_dict=xxx). Even though it is fed into staging area, Python->TF copy will still have to finish before any op really runs.\nIn tensorpack we did observe good performance improvement by using StagingArea for input in multi-gpu training (although not in every case, but sometimes it helps).", "body": "After a quick glance at your code, one thing is that your code doesn't use latency hiding.\r\nYou still use feed_dict in the critical loop with `sess.run([put_op, loss], feed_dict=xxx)`. Even though it is fed into staging area, Python->TF copy will still have to finish before any op really runs.\r\n\r\nIn tensorpack we did observe good performance improvement by using StagingArea for input in multi-gpu training (although not in every case, but sometimes it helps)."}
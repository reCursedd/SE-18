{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/351857566", "html_url": "https://github.com/tensorflow/tensorflow/issues/15367#issuecomment-351857566", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15367", "id": 351857566, "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTg1NzU2Ng==", "user": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "created_at": "2017-12-14T22:37:06Z", "updated_at": "2017-12-14T22:37:06Z", "author_association": "MEMBER", "body_html": "<p>Try to put your evaluation code in a different function. The way you've written it, you are reusing the same graph, which could be hiding some underlying issue in your code. Use <code>K.clear_session()</code> at the end of each phase, or better, put them inside graph scopes.</p>\n<p><code>set_learning_phase</code> certainly does work, so my guess is that you are somehow reusing parts of the training model during evaluation. Using two separate functions (and graphs) should clear that up.</p>", "body_text": "Try to put your evaluation code in a different function. The way you've written it, you are reusing the same graph, which could be hiding some underlying issue in your code. Use K.clear_session() at the end of each phase, or better, put them inside graph scopes.\nset_learning_phase certainly does work, so my guess is that you are somehow reusing parts of the training model during evaluation. Using two separate functions (and graphs) should clear that up.", "body": "Try to put your evaluation code in a different function. The way you've written it, you are reusing the same graph, which could be hiding some underlying issue in your code. Use `K.clear_session()` at the end of each phase, or better, put them inside graph scopes.\r\n\r\n`set_learning_phase` certainly does work, so my guess is that you are somehow reusing parts of the training model during evaluation. Using two separate functions (and graphs) should clear that up.\r\n\r\n"}
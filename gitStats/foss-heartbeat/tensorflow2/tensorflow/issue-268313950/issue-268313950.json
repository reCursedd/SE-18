{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13968", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13968/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13968/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/13968/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/13968", "id": 268313950, "node_id": "MDU6SXNzdWUyNjgzMTM5NTA=", "number": 13968, "title": "A unexpected read op is in my pb, It make convertion to dlc fail", "user": {"login": "chenguoting", "id": 31856348, "node_id": "MDQ6VXNlcjMxODU2MzQ4", "avatar_url": "https://avatars2.githubusercontent.com/u/31856348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenguoting", "html_url": "https://github.com/chenguoting", "followers_url": "https://api.github.com/users/chenguoting/followers", "following_url": "https://api.github.com/users/chenguoting/following{/other_user}", "gists_url": "https://api.github.com/users/chenguoting/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenguoting/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenguoting/subscriptions", "organizations_url": "https://api.github.com/users/chenguoting/orgs", "repos_url": "https://api.github.com/users/chenguoting/repos", "events_url": "https://api.github.com/users/chenguoting/events{/privacy}", "received_events_url": "https://api.github.com/users/chenguoting/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-25T08:46:04Z", "updated_at": "2017-10-25T17:26:26Z", "closed_at": "2017-10-25T17:26:26Z", "author_association": "NONE", "body_html": "<p>I want to conver the pb to dlc. but fail.<br>\nI find a unexpected read op between the const and the op.<br>\nwhy ? how can I remove the read op ?</p>\n<p>conver error message:<br>\n/home/nubiaml/snpe-sdk/snpe-1.2.2/lib/python/converters/tensorflow/layers/eltwise.py:105: RuntimeWarning: error_code=1002; error_message=Layer paramter value is invalid. Layer layer2/Mul: at least two inputs required, have 1; error_component=Model Validation; line_no=582; thread_id=140151840044864<br>\noutput_name)<br>\n/home/nubiaml/snpe-sdk/snpe-1.2.2/lib/python/converters/tensorflow/layers/eltwise.py:83: RuntimeWarning: error_code=1002; error_message=Layer paramter value is invalid. Layer output/output: at least two inputs required, have 1; error_component=Model Validation; line_no=582; thread_id=140151840044864<br>\noutput_name)</p>\n<p>the code which save the pb:<br>\n`import tensorflow as tf<br>\nfrom tensorflow.python.framework.graph_util import convert_variables_to_constants</p>\n<p>with tf.name_scope(\"input\"):<br>\nX = tf.placeholder(tf.float32, shape=(None, 1), name=\"input\");</p>\n<p>with tf.name_scope(\"layer2\"):<br>\na = tf.Variable(tf.zeros([1, 1], tf.float32), name=\"a\");<br>\nax = X * a;</p>\n<p>with tf.name_scope(\"output\"):<br>\nb = tf.Variable(tf.zeros([1, 1], tf.float32), name=\"b\");<br>\nh = tf.add(ax, b, name=\"output\");</p>\n<p>y = tf.placeholder(tf.float32, shape=(None, 1), name=\"y\");<br>\nJ = tf.reduce_mean(tf.square(h-y))/2;<br>\noptimizer = tf.train.GradientDescentOptimizer(0.1);<br>\ntrain = optimizer.minimize(J, var_list=[a, b]);</p>\n<p>sess = tf.Session();<br>\nsess.run(tf.global_variables_initializer());</p>\n<p>for i in range(10000):<br>\nsess.run([train, J], feed_dict={X:[[1], [2]], y:[[1], [2]]})</p>\n<p>print(sess.run([a, b]));</p>\n<p>graph = convert_variables_to_constants(sess, sess.graph_def, [\"output/output\"])<br>\ntf.train.write_graph(graph, '.', 'graph.pb', as_text=False)</p>\n<p>sess.close();`</p>", "body_text": "I want to conver the pb to dlc. but fail.\nI find a unexpected read op between the const and the op.\nwhy ? how can I remove the read op ?\nconver error message:\n/home/nubiaml/snpe-sdk/snpe-1.2.2/lib/python/converters/tensorflow/layers/eltwise.py:105: RuntimeWarning: error_code=1002; error_message=Layer paramter value is invalid. Layer layer2/Mul: at least two inputs required, have 1; error_component=Model Validation; line_no=582; thread_id=140151840044864\noutput_name)\n/home/nubiaml/snpe-sdk/snpe-1.2.2/lib/python/converters/tensorflow/layers/eltwise.py:83: RuntimeWarning: error_code=1002; error_message=Layer paramter value is invalid. Layer output/output: at least two inputs required, have 1; error_component=Model Validation; line_no=582; thread_id=140151840044864\noutput_name)\nthe code which save the pb:\n`import tensorflow as tf\nfrom tensorflow.python.framework.graph_util import convert_variables_to_constants\nwith tf.name_scope(\"input\"):\nX = tf.placeholder(tf.float32, shape=(None, 1), name=\"input\");\nwith tf.name_scope(\"layer2\"):\na = tf.Variable(tf.zeros([1, 1], tf.float32), name=\"a\");\nax = X * a;\nwith tf.name_scope(\"output\"):\nb = tf.Variable(tf.zeros([1, 1], tf.float32), name=\"b\");\nh = tf.add(ax, b, name=\"output\");\ny = tf.placeholder(tf.float32, shape=(None, 1), name=\"y\");\nJ = tf.reduce_mean(tf.square(h-y))/2;\noptimizer = tf.train.GradientDescentOptimizer(0.1);\ntrain = optimizer.minimize(J, var_list=[a, b]);\nsess = tf.Session();\nsess.run(tf.global_variables_initializer());\nfor i in range(10000):\nsess.run([train, J], feed_dict={X:[[1], [2]], y:[[1], [2]]})\nprint(sess.run([a, b]));\ngraph = convert_variables_to_constants(sess, sess.graph_def, [\"output/output\"])\ntf.train.write_graph(graph, '.', 'graph.pb', as_text=False)\nsess.close();`", "body": "I want to conver the pb to dlc. but fail. \r\nI find a unexpected read op between the const and the op.\r\nwhy ? how can I remove the read op ?\r\n\r\n\r\nconver error message:\r\n/home/nubiaml/snpe-sdk/snpe-1.2.2/lib/python/converters/tensorflow/layers/eltwise.py:105: RuntimeWarning: error_code=1002; error_message=Layer paramter value is invalid. Layer layer2/Mul: at least two inputs required, have 1; error_component=Model Validation; line_no=582; thread_id=140151840044864\r\noutput_name)\r\n/home/nubiaml/snpe-sdk/snpe-1.2.2/lib/python/converters/tensorflow/layers/eltwise.py:83: RuntimeWarning: error_code=1002; error_message=Layer paramter value is invalid. Layer output/output: at least two inputs required, have 1; error_component=Model Validation; line_no=582; thread_id=140151840044864\r\noutput_name)\r\n\r\nthe code which save the pb:\r\n`import tensorflow as tf\r\nfrom tensorflow.python.framework.graph_util import convert_variables_to_constants\r\n\r\nwith tf.name_scope(\"input\"):\r\n    X = tf.placeholder(tf.float32, shape=(None, 1), name=\"input\");\r\n\r\nwith tf.name_scope(\"layer2\"):\r\n    a = tf.Variable(tf.zeros([1, 1], tf.float32), name=\"a\");\r\n    ax = X * a;\r\n\r\nwith tf.name_scope(\"output\"):\r\n    b = tf.Variable(tf.zeros([1, 1], tf.float32), name=\"b\");\r\n    h = tf.add(ax, b, name=\"output\");\r\n\r\ny = tf.placeholder(tf.float32, shape=(None, 1), name=\"y\");\r\nJ = tf.reduce_mean(tf.square(h-y))/2;\r\noptimizer = tf.train.GradientDescentOptimizer(0.1);\r\ntrain = optimizer.minimize(J, var_list=[a, b]);\r\n\r\nsess = tf.Session();\r\nsess.run(tf.global_variables_initializer());\r\n\r\nfor i in range(10000):\r\n    sess.run([train, J], feed_dict={X:[[1], [2]], y:[[1], [2]]})\r\n\r\nprint(sess.run([a, b]));\r\n\r\ngraph = convert_variables_to_constants(sess, sess.graph_def, [\"output/output\"])\r\ntf.train.write_graph(graph, '.', 'graph.pb', as_text=False)\r\n\r\nsess.close();`"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9663", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9663/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9663/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9663/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/9663", "id": 226299064, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE4OTg2MzQ5", "number": 9663, "title": "replace sleep macro with an inline function", "user": {"login": "smistad", "id": 176325, "node_id": "MDQ6VXNlcjE3NjMyNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/176325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smistad", "html_url": "https://github.com/smistad", "followers_url": "https://api.github.com/users/smistad/followers", "following_url": "https://api.github.com/users/smistad/following{/other_user}", "gists_url": "https://api.github.com/users/smistad/gists{/gist_id}", "starred_url": "https://api.github.com/users/smistad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smistad/subscriptions", "organizations_url": "https://api.github.com/users/smistad/orgs", "repos_url": "https://api.github.com/users/smistad/repos", "events_url": "https://api.github.com/users/smistad/events{/privacy}", "received_events_url": "https://api.github.com/users/smistad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "benoitsteiner", "id": 6969686, "node_id": "MDQ6VXNlcjY5Njk2ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6969686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitsteiner", "html_url": "https://github.com/benoitsteiner", "followers_url": "https://api.github.com/users/benoitsteiner/followers", "following_url": "https://api.github.com/users/benoitsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/benoitsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitsteiner/subscriptions", "organizations_url": "https://api.github.com/users/benoitsteiner/orgs", "repos_url": "https://api.github.com/users/benoitsteiner/repos", "events_url": "https://api.github.com/users/benoitsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitsteiner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benoitsteiner", "id": 6969686, "node_id": "MDQ6VXNlcjY5Njk2ODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/6969686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitsteiner", "html_url": "https://github.com/benoitsteiner", "followers_url": "https://api.github.com/users/benoitsteiner/followers", "following_url": "https://api.github.com/users/benoitsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/benoitsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitsteiner/subscriptions", "organizations_url": "https://api.github.com/users/benoitsteiner/orgs", "repos_url": "https://api.github.com/users/benoitsteiner/repos", "events_url": "https://api.github.com/users/benoitsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitsteiner/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-05-04T14:27:11Z", "updated_at": "2017-05-05T01:39:21Z", "closed_at": "2017-05-05T01:39:21Z", "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/9663", "html_url": "https://github.com/tensorflow/tensorflow/pull/9663", "diff_url": "https://github.com/tensorflow/tensorflow/pull/9663.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/9663.patch"}, "body_html": "<p>The file third_party/eigen3/unsupported/Eigen/CXX11/Tensor contains a macro called sleep which is only defined for windows. I assume this is added to cover the use of the posix function sleep(seconds) which is not available on windows. However, the function Sleep(microseconds) is. Unfortunately this macro has the nasty effect that you can't define or use any functions named sleep, even if it is in another namespace or class. A function with this name exists in most thread libraries such as boost::thread and qthread. Thus if you try to use tensorflow in an application which also use a threading library it will not compile.</p>\n<p>I suggest replacing the macro with an inline function instead. As far as I can see, this function is not really used that much in the tensorflow code, thus other options than creating a global sleep function may be possible and more desirable.</p>", "body_text": "The file third_party/eigen3/unsupported/Eigen/CXX11/Tensor contains a macro called sleep which is only defined for windows. I assume this is added to cover the use of the posix function sleep(seconds) which is not available on windows. However, the function Sleep(microseconds) is. Unfortunately this macro has the nasty effect that you can't define or use any functions named sleep, even if it is in another namespace or class. A function with this name exists in most thread libraries such as boost::thread and qthread. Thus if you try to use tensorflow in an application which also use a threading library it will not compile.\nI suggest replacing the macro with an inline function instead. As far as I can see, this function is not really used that much in the tensorflow code, thus other options than creating a global sleep function may be possible and more desirable.", "body": "The file third_party/eigen3/unsupported/Eigen/CXX11/Tensor contains a macro called sleep which is only defined for windows. I assume this is added to cover the use of the posix function sleep(seconds) which is not available on windows. However, the function Sleep(microseconds) is. Unfortunately this macro has the nasty effect that you can't define or use any functions named sleep, even if it is in another namespace or class. A function with this name exists in most thread libraries such as boost::thread and qthread. Thus if you try to use tensorflow in an application which also use a threading library it will not compile.\r\n\r\nI suggest replacing the macro with an inline function instead. As far as I can see, this function is not really used that much in the tensorflow code, thus other options than creating a global sleep function may be possible and more desirable."}
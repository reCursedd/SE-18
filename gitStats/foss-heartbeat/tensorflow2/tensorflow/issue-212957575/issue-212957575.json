{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8233", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8233/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8233/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/8233/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/8233", "id": 212957575, "node_id": "MDU6SXNzdWUyMTI5NTc1NzU=", "number": 8233, "title": "Android: java.lang.NullPointerException: Attempt to invoke virtual method 'org.tensorflow.Output org.tensorflow.Operation.output(int)' o", "user": {"login": "chengsam", "id": 20341787, "node_id": "MDQ6VXNlcjIwMzQxNzg3", "avatar_url": "https://avatars1.githubusercontent.com/u/20341787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chengsam", "html_url": "https://github.com/chengsam", "followers_url": "https://api.github.com/users/chengsam/followers", "following_url": "https://api.github.com/users/chengsam/following{/other_user}", "gists_url": "https://api.github.com/users/chengsam/gists{/gist_id}", "starred_url": "https://api.github.com/users/chengsam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chengsam/subscriptions", "organizations_url": "https://api.github.com/users/chengsam/orgs", "repos_url": "https://api.github.com/users/chengsam/repos", "events_url": "https://api.github.com/users/chengsam/events{/privacy}", "received_events_url": "https://api.github.com/users/chengsam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andrewharp", "id": 3376817, "node_id": "MDQ6VXNlcjMzNzY4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3376817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewharp", "html_url": "https://github.com/andrewharp", "followers_url": "https://api.github.com/users/andrewharp/followers", "following_url": "https://api.github.com/users/andrewharp/following{/other_user}", "gists_url": "https://api.github.com/users/andrewharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewharp/subscriptions", "organizations_url": "https://api.github.com/users/andrewharp/orgs", "repos_url": "https://api.github.com/users/andrewharp/repos", "events_url": "https://api.github.com/users/andrewharp/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2017-03-09T07:35:51Z", "updated_at": "2017-03-14T19:12:47Z", "closed_at": "2017-03-14T19:12:47Z", "author_association": "NONE", "body_html": "<h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</h3>\n<p>StackOverflow: <a href=\"http://stackoverflow.com/questions/42386650/why-am-i-getting-error-initializing-tensorflow\" rel=\"nofollow\">Why am I getting error: Initializing Tensorflow?</a></p>\n<h3>Environment info</h3>\n<p>Operating System: Mac OS 10.11.6<br>\nTensorflow version: v0.12.0</p>\n<h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</h3>\n<p>I have successfully built the Android demo from command line using bazel. After that, I replaced the inception model with my custom model. I have changed the parameters in <code>ClassifierActivity</code> with the following:</p>\n<pre><code>private static final int INPUT_SIZE = 299;\n  private static final int IMAGE_MEAN = 128;\n  private static final float IMAGE_STD = 128;\n  private static final String INPUT_NAME = \"Mul:0\";\n  private static final String OUTPUT_NAME = \"final_result:0\";\n</code></pre>\n<p>Then I build again with bazel, when I try to run the app, the app crashed. Logs are attached below.</p>\n<h3>What other attempted solutions have you tried?</h3>\n<p>Using the same model with memory mapping works fine on iOS.</p>\n<h3>Logs or other output that would be helpful</h3>\n<p>(If logs are large, please upload as attachment or provide link).</p>\n<blockquote>\n<p>FATAL EXCEPTION: main<br>\nProcess: org.tensorflow.demo, PID: 23532<br>\njava.lang.RuntimeException: Error initializing TensorFlow!<br>\nat org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:131)<br>\nat org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158)<br>\nat org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:394)<br>\nat org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:411)<br>\nat org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)<br>\nat org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:94)<br>\nat android.view.TextureView.getHardwareLayer(TextureView.java:370)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:14115)<br>\nat android.view.View.getDisplayList(View.java:14161)<br>\nat android.view.View.draw(View.java:14928)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:14133)<br>\nat android.view.View.getDisplayList(View.java:14161)<br>\nat android.view.View.draw(View.java:14928)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)<br>\nat android.view.View.draw(View.java:15207)<br>\nat android.widget.FrameLayout.draw(FrameLayout.java:592)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:14138)<br>\nat android.view.View.getDisplayList(View.java:14161)<br>\nat android.view.View.draw(View.java:14928)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:14133)<br>\nat android.view.View.getDisplayList(View.java:14161)<br>\nat android.view.View.draw(View.java:14928)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:14133)<br>\nat android.view.View.getDisplayList(View.java:14161)<br>\nat android.view.View.draw(View.java:14928)<br>\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)<br>\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)<br>\nat android.view.View.draw(View.java:15207)<br>\nat android.widget.FrameLayout.draw(FrameLayout.java:592)<br>\nat com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2599)<br>\nat android.view.View.updateDisplayListIfDirty(View.java:14138)<br>\nat android.view.View.getDisplayList(View.java:14161)<br>\nat android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:268)<br>\nat android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:274)<br>\nat android.view.ThreadedRenderer.draw(ThreadedRenderer.java:313)<br>\nat android.view.ViewRootImpl.draw(ViewRootImpl.java:2503)<br>\nat android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2341)<br>\nat android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1972)<br>\nat android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1058)<br>\nat android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5796)<br>\nat android.view.Choreographer$CallbackRecord.run(Choreographer.java:767)<br>\nat android.view.Choreographer.doCallbacks(Choreographer.java:580)<br>\nat android.view.Choreographer.doFrame(Choreographer.java:550)<br>\nat android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:753)<br>\nat android.os.Handler.handleCallback(Handler.java:739)<br>\nat android.os.Handler.dispatchMessage(Handler.java:95)<br>\nat android.os.Looper.loop(Looper.java:211)<br>\nat android.app.ActivityThread.main(ActivityThread.java:5317)<br>\nat java.lang.reflect.Method.invoke(Native Method)<br>\nat java.lang.reflect.Method.invoke(Method.java:372)<br>\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1016)<br>\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:811)<br>\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method 'org.tensorflow.Output org.tensorflow.Operation.output(int)' o</p>\n</blockquote>", "body_text": "What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\nStackOverflow: Why am I getting error: Initializing Tensorflow?\nEnvironment info\nOperating System: Mac OS 10.11.6\nTensorflow version: v0.12.0\nIf possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\nI have successfully built the Android demo from command line using bazel. After that, I replaced the inception model with my custom model. I have changed the parameters in ClassifierActivity with the following:\nprivate static final int INPUT_SIZE = 299;\n  private static final int IMAGE_MEAN = 128;\n  private static final float IMAGE_STD = 128;\n  private static final String INPUT_NAME = \"Mul:0\";\n  private static final String OUTPUT_NAME = \"final_result:0\";\n\nThen I build again with bazel, when I try to run the app, the app crashed. Logs are attached below.\nWhat other attempted solutions have you tried?\nUsing the same model with memory mapping works fine on iOS.\nLogs or other output that would be helpful\n(If logs are large, please upload as attachment or provide link).\n\nFATAL EXCEPTION: main\nProcess: org.tensorflow.demo, PID: 23532\njava.lang.RuntimeException: Error initializing TensorFlow!\nat org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:131)\nat org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158)\nat org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:394)\nat org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:411)\nat org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)\nat org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:94)\nat android.view.TextureView.getHardwareLayer(TextureView.java:370)\nat android.view.View.updateDisplayListIfDirty(View.java:14115)\nat android.view.View.getDisplayList(View.java:14161)\nat android.view.View.draw(View.java:14928)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\nat android.view.View.updateDisplayListIfDirty(View.java:14133)\nat android.view.View.getDisplayList(View.java:14161)\nat android.view.View.draw(View.java:14928)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\nat android.view.View.draw(View.java:15207)\nat android.widget.FrameLayout.draw(FrameLayout.java:592)\nat android.view.View.updateDisplayListIfDirty(View.java:14138)\nat android.view.View.getDisplayList(View.java:14161)\nat android.view.View.draw(View.java:14928)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\nat android.view.View.updateDisplayListIfDirty(View.java:14133)\nat android.view.View.getDisplayList(View.java:14161)\nat android.view.View.draw(View.java:14928)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\nat android.view.View.updateDisplayListIfDirty(View.java:14133)\nat android.view.View.getDisplayList(View.java:14161)\nat android.view.View.draw(View.java:14928)\nat android.view.ViewGroup.drawChild(ViewGroup.java:3405)\nat android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\nat android.view.View.draw(View.java:15207)\nat android.widget.FrameLayout.draw(FrameLayout.java:592)\nat com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2599)\nat android.view.View.updateDisplayListIfDirty(View.java:14138)\nat android.view.View.getDisplayList(View.java:14161)\nat android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:268)\nat android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:274)\nat android.view.ThreadedRenderer.draw(ThreadedRenderer.java:313)\nat android.view.ViewRootImpl.draw(ViewRootImpl.java:2503)\nat android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2341)\nat android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1972)\nat android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1058)\nat android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5796)\nat android.view.Choreographer$CallbackRecord.run(Choreographer.java:767)\nat android.view.Choreographer.doCallbacks(Choreographer.java:580)\nat android.view.Choreographer.doFrame(Choreographer.java:550)\nat android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:753)\nat android.os.Handler.handleCallback(Handler.java:739)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:211)\nat android.app.ActivityThread.main(ActivityThread.java:5317)\nat java.lang.reflect.Method.invoke(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:372)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1016)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:811)\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method 'org.tensorflow.Output org.tensorflow.Operation.output(int)' o", "body": "### What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?\r\nStackOverflow: [Why am I getting error: Initializing Tensorflow?](http://stackoverflow.com/questions/42386650/why-am-i-getting-error-initializing-tensorflow)\r\n\r\n### Environment info\r\nOperating System: Mac OS 10.11.6\r\nTensorflow version: v0.12.0\r\n\r\n### If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)\r\nI have successfully built the Android demo from command line using bazel. After that, I replaced the inception model with my custom model. I have changed the parameters in `ClassifierActivity` with the following:\r\n```\r\nprivate static final int INPUT_SIZE = 299;\r\n  private static final int IMAGE_MEAN = 128;\r\n  private static final float IMAGE_STD = 128;\r\n  private static final String INPUT_NAME = \"Mul:0\";\r\n  private static final String OUTPUT_NAME = \"final_result:0\";\r\n```\r\nThen I build again with bazel, when I try to run the app, the app crashed. Logs are attached below.\r\n\r\n### What other attempted solutions have you tried?\r\nUsing the same model with memory mapping works fine on iOS.\r\n\r\n### Logs or other output that would be helpful\r\n(If logs are large, please upload as attachment or provide link).\r\n\r\n> FATAL EXCEPTION: main\r\n>                                                                      Process: org.tensorflow.demo, PID: 23532\r\n>                                                                      java.lang.RuntimeException: Error initializing TensorFlow!\r\n>                                                                          at org.tensorflow.demo.ClassifierActivity.onPreviewSizeChosen(ClassifierActivity.java:131)\r\n>                                                                          at org.tensorflow.demo.CameraActivity$1.onPreviewSizeChosen(CameraActivity.java:158)\r\n>                                                                          at org.tensorflow.demo.CameraConnectionFragment.setUpCameraOutputs(CameraConnectionFragment.java:394)\r\n>                                                                          at org.tensorflow.demo.CameraConnectionFragment.openCamera(CameraConnectionFragment.java:411)\r\n>                                                                          at org.tensorflow.demo.CameraConnectionFragment.access$000(CameraConnectionFragment.java:63)\r\n>                                                                          at org.tensorflow.demo.CameraConnectionFragment$1.onSurfaceTextureAvailable(CameraConnectionFragment.java:94)\r\n>                                                                          at android.view.TextureView.getHardwareLayer(TextureView.java:370)\r\n>                                                                          at android.view.View.updateDisplayListIfDirty(View.java:14115)\r\n>                                                                          at android.view.View.getDisplayList(View.java:14161)\r\n>                                                                          at android.view.View.draw(View.java:14928)\r\n>                                                                          at android.view.ViewGroup.drawChild(ViewGroup.java:3405)\r\n>                                                                          at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\r\n>                                                                          at android.view.View.updateDisplayListIfDirty(View.java:14133)\r\n>                                                                          at android.view.View.getDisplayList(View.java:14161)\r\n>                                                                          at android.view.View.draw(View.java:14928)\r\n>                                                                          at android.view.ViewGroup.drawChild(ViewGroup.java:3405)\r\n>                                                                          at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\r\n>                                                                          at android.view.View.draw(View.java:15207)\r\n>                                                                          at android.widget.FrameLayout.draw(FrameLayout.java:592)\r\n>                                                                          at android.view.View.updateDisplayListIfDirty(View.java:14138)\r\n>                                                                          at android.view.View.getDisplayList(View.java:14161)\r\n>                                                                          at android.view.View.draw(View.java:14928)\r\n>                                                                          at android.view.ViewGroup.drawChild(ViewGroup.java:3405)\r\n>                                                                          at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\r\n>                                                                          at android.view.View.updateDisplayListIfDirty(View.java:14133)\r\n>                                                                          at android.view.View.getDisplayList(View.java:14161)\r\n>                                                                          at android.view.View.draw(View.java:14928)\r\n>                                                                          at android.view.ViewGroup.drawChild(ViewGroup.java:3405)\r\n>                                                                          at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\r\n>                                                                          at android.view.View.updateDisplayListIfDirty(View.java:14133)\r\n>                                                                          at android.view.View.getDisplayList(View.java:14161)\r\n>                                                                          at android.view.View.draw(View.java:14928)\r\n>                                                                          at android.view.ViewGroup.drawChild(ViewGroup.java:3405)\r\n>                                                                          at android.view.ViewGroup.dispatchDraw(ViewGroup.java:3199)\r\n>                                                                          at android.view.View.draw(View.java:15207)\r\n>                                                                          at android.widget.FrameLayout.draw(FrameLayout.java:592)\r\n>                                                                          at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2599)\r\n>                                                                          at android.view.View.updateDisplayListIfDirty(View.java:14138)\r\n>                                                                          at android.view.View.getDisplayList(View.java:14161)\r\n>                                                                          at android.view.ThreadedRenderer.updateViewTreeDisplayList(ThreadedRenderer.java:268)\r\n>                                                                          at android.view.ThreadedRenderer.updateRootDisplayList(ThreadedRenderer.java:274)\r\n>                                                                          at android.view.ThreadedRenderer.draw(ThreadedRenderer.java:313)\r\n>                                                                          at android.view.ViewRootImpl.draw(ViewRootImpl.java:2503)\r\n>                                                                          at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2341)\r\n>                                                                          at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1972)\r\n>                                                                          at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1058)\r\n>                                                                          at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5796)\r\n>                                                                          at android.view.Choreographer$CallbackRecord.run(Choreographer.java:767)\r\n>                                                                          at android.view.Choreographer.doCallbacks(Choreographer.java:580)\r\n>                                                                          at android.view.Choreographer.doFrame(Choreographer.java:550)\r\n>                                                                          at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:753)\r\n>                                                                          at android.os.Handler.handleCallback(Handler.java:739)\r\n>                                                                          at android.os.Handler.dispatchMessage(Handler.java:95)\r\n>                                                                          at android.os.Looper.loop(Looper.java:211)\r\n>                                                                          at android.app.ActivityThread.main(ActivityThread.java:5317)\r\n>                                                                          at java.lang.reflect.Method.invoke(Native Method)\r\n>                                                                          at java.lang.reflect.Method.invoke(Method.java:372)\r\n>                                                                          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1016)\r\n>                                                                          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:811)\r\n>                                                                       Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'org.tensorflow.Output org.tensorflow.Operation.output(int)' o"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15904", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15904/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15904/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/15904/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/15904", "id": 286454000, "node_id": "MDU6SXNzdWUyODY0NTQwMDA=", "number": 15904, "title": "\u3010TensorFlow Servering\u3011 bazel build tensorflow_serving/... ImportError: No module named numpy", "user": {"login": "FighterFong", "id": 20882610, "node_id": "MDQ6VXNlcjIwODgyNjEw", "avatar_url": "https://avatars1.githubusercontent.com/u/20882610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FighterFong", "html_url": "https://github.com/FighterFong", "followers_url": "https://api.github.com/users/FighterFong/followers", "following_url": "https://api.github.com/users/FighterFong/following{/other_user}", "gists_url": "https://api.github.com/users/FighterFong/gists{/gist_id}", "starred_url": "https://api.github.com/users/FighterFong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FighterFong/subscriptions", "organizations_url": "https://api.github.com/users/FighterFong/orgs", "repos_url": "https://api.github.com/users/FighterFong/repos", "events_url": "https://api.github.com/users/FighterFong/events{/privacy}", "received_events_url": "https://api.github.com/users/FighterFong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-06T02:55:53Z", "updated_at": "2018-06-12T07:43:53Z", "closed_at": "2018-01-25T11:27:45Z", "author_association": "NONE", "body_html": "<p>fong@ubuntu:~/serving$ bazel build tensorflow_serving/...<br>\n..........<br>\nDEBUG: /home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/bazel_tools/tools/build_defs/pkg/pkg.bzl:197:9: @//tensorflow_serving/model_servers:tensorflow_model_server_tar: you provided a non dictionary to the pkg_tar <code>files</code> attribute. This attribute was renamed to <code>srcs</code>. Consider renaming it in your BUILD file.</p>\n<p>ERROR: /home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/numpy/BUILD:11:1: no such package '@local_config_python//': Traceback (most recent call last):<br>\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 291<br>\n_create_local_python_repository(repository_ctx)<br>\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 255, in _create_local_python_repository<br>\n_get_numpy_include(repository_ctx, python_bin)<br>\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 239, in _get_numpy_include<br>\n_execute(repository_ctx, [python_bin, \"-c\",...\"], &lt;2 more arguments&gt;)<br>\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 54, in _execute<br>\n_fail(\"\\n\".join([error_msg.strip() if ... \"\"]))<br>\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 27, in _fail<br>\nfail((\"%sPython Configuration Error:%...)))<br>\nPython Configuration Error: Problem getting numpy include path.<br>\nTraceback (most recent call last):<br>\nFile \"\", line 1, in <br>\nImportError: No module named numpy<br>\nIs numpy installed?<br>\nand referenced by '@org_tensorflow//third_party/py/numpy:headers'<br>\nERROR: Analysis of target '//tensorflow_serving/example:inception_saved_model' failed; build aborted: Loading failed<br>\nINFO: Elapsed time: 35.784s<br>\nFAILED: Build did NOT complete successfully (149 packages loaded)<br>\ncurrently loading: @org_tensorflow//tensorflow/contrib/rnn ... (6 packages<br>\n)</p>\n<p>This is the error\uff0cbut  my python paths and python library path is true,python library path have numpy already.</p>\n<p>fong@ubuntu:~/serving/tensorflow$ ./configure<br>\nYou have bazel 0.9.0 installed.<br>\nPlease specify the location of python. [Default is /home/fong/anaconda3/bin/python]:</p>\n<p>Found possible Python library paths:<br>\n/home/fong/anaconda3/lib/python3.5/site-packages<br>\nPlease input the desired Python library path to use.  Default is [/home/fong/anaconda3/lib/python3.5/site-packages]</p>\n<p>Do you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: y<br>\njemalloc as malloc support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: y<br>\nGoogle Cloud Platform support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with Hadoop File System support? [Y/n]: y<br>\nHadoop File System support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: y<br>\nAmazon S3 File System support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with XLA JIT support? [y/N]: y<br>\nXLA JIT support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with GDR support? [y/N]: y<br>\nGDR support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with VERBS support? [y/N]: y<br>\nVERBS support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with OpenCL SYCL support? [y/N]: n<br>\nNo OpenCL SYCL support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with CUDA support? [y/N]: n<br>\nNo CUDA support will be enabled for TensorFlow.</p>\n<p>Do you wish to build TensorFlow with MPI support? [y/N]: n<br>\nNo MPI support will be enabled for TensorFlow.</p>\n<p>Please specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:</p>\n<p>Add \"--config=mkl\" to your bazel command to build with MKL support.<br>\nPlease note that MKL on MacOS or windows is still not supported.<br>\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.</p>\n<p>Would you like to interactively configure ./WORKSPACE for Android builds? [y/N]: n<br>\nNot configuring the WORKSPACE for Android builds.</p>\n<p>Configuration finished</p>", "body_text": "fong@ubuntu:~/serving$ bazel build tensorflow_serving/...\n..........\nDEBUG: /home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/bazel_tools/tools/build_defs/pkg/pkg.bzl:197:9: @//tensorflow_serving/model_servers:tensorflow_model_server_tar: you provided a non dictionary to the pkg_tar files attribute. This attribute was renamed to srcs. Consider renaming it in your BUILD file.\nERROR: /home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/numpy/BUILD:11:1: no such package '@local_config_python//': Traceback (most recent call last):\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 291\n_create_local_python_repository(repository_ctx)\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 255, in _create_local_python_repository\n_get_numpy_include(repository_ctx, python_bin)\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 239, in _get_numpy_include\n_execute(repository_ctx, [python_bin, \"-c\",...\"], <2 more arguments>)\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 54, in _execute\n_fail(\"\\n\".join([error_msg.strip() if ... \"\"]))\nFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 27, in _fail\nfail((\"%sPython Configuration Error:%...)))\nPython Configuration Error: Problem getting numpy include path.\nTraceback (most recent call last):\nFile \"\", line 1, in \nImportError: No module named numpy\nIs numpy installed?\nand referenced by '@org_tensorflow//third_party/py/numpy:headers'\nERROR: Analysis of target '//tensorflow_serving/example:inception_saved_model' failed; build aborted: Loading failed\nINFO: Elapsed time: 35.784s\nFAILED: Build did NOT complete successfully (149 packages loaded)\ncurrently loading: @org_tensorflow//tensorflow/contrib/rnn ... (6 packages\n)\nThis is the error\uff0cbut  my python paths and python library path is true,python library path have numpy already.\nfong@ubuntu:~/serving/tensorflow$ ./configure\nYou have bazel 0.9.0 installed.\nPlease specify the location of python. [Default is /home/fong/anaconda3/bin/python]:\nFound possible Python library paths:\n/home/fong/anaconda3/lib/python3.5/site-packages\nPlease input the desired Python library path to use.  Default is [/home/fong/anaconda3/lib/python3.5/site-packages]\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: y\njemalloc as malloc support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: y\nGoogle Cloud Platform support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: y\nHadoop File System support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: y\nAmazon S3 File System support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\nXLA JIT support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with GDR support? [y/N]: y\nGDR support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with VERBS support? [y/N]: y\nVERBS support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: n\nNo OpenCL SYCL support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with CUDA support? [y/N]: n\nNo CUDA support will be enabled for TensorFlow.\nDo you wish to build TensorFlow with MPI support? [y/N]: n\nNo MPI support will be enabled for TensorFlow.\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\nPlease note that MKL on MacOS or windows is still not supported.\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: n\nNot configuring the WORKSPACE for Android builds.\nConfiguration finished", "body": "fong@ubuntu:~/serving$ bazel build tensorflow_serving/...\r\n..........\r\nDEBUG: /home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/bazel_tools/tools/build_defs/pkg/pkg.bzl:197:9: @//tensorflow_serving/model_servers:tensorflow_model_server_tar: you provided a non dictionary to the pkg_tar `files` attribute. This attribute was renamed to `srcs`. Consider renaming it in your BUILD file.\r\n\r\nERROR: /home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/numpy/BUILD:11:1: no such package '@local_config_python//': Traceback (most recent call last):\r\n\tFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 291\r\n\t\t_create_local_python_repository(repository_ctx)\r\n\tFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 255, in _create_local_python_repository\r\n\t\t_get_numpy_include(repository_ctx, python_bin)\r\n\tFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 239, in _get_numpy_include\r\n\t\t_execute(repository_ctx, [python_bin, \"-c\",...\"], <2 more arguments>)\r\n\tFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 54, in _execute\r\n\t\t_fail(\"\\n\".join([error_msg.strip() if ... \"\"]))\r\n\tFile \"/home/fong/.cache/bazel/_bazel_fong/38e1867f819d663d91548408e483d3bf/external/org_tensorflow/third_party/py/python_configure.bzl\", line 27, in _fail\r\n\t\tfail((\"%sPython Configuration Error:%...)))\r\nPython Configuration Error: Problem getting numpy include path.\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nImportError: No module named numpy\r\nIs numpy installed?\r\n and referenced by '@org_tensorflow//third_party/py/numpy:headers'\r\nERROR: Analysis of target '//tensorflow_serving/example:inception_saved_model' failed; build aborted: Loading failed\r\nINFO: Elapsed time: 35.784s\r\nFAILED: Build did NOT complete successfully (149 packages loaded)\r\n    currently loading: @org_tensorflow//tensorflow/contrib/rnn ... (6 packages\\\r\n)\r\n\r\n\r\nThis is the error\uff0cbut  my python paths and python library path is true,python library path have numpy already.\r\n\r\n\r\nfong@ubuntu:~/serving/tensorflow$ ./configure \r\nYou have bazel 0.9.0 installed.\r\nPlease specify the location of python. [Default is /home/fong/anaconda3/bin/python]: \r\n\r\n\r\nFound possible Python library paths:\r\n  /home/fong/anaconda3/lib/python3.5/site-packages\r\nPlease input the desired Python library path to use.  Default is [/home/fong/anaconda3/lib/python3.5/site-packages]\r\n\r\nDo you wish to build TensorFlow with jemalloc as malloc support? [Y/n]: y\r\njemalloc as malloc support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: y\r\nGoogle Cloud Platform support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: y\r\nHadoop File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Amazon S3 File System support? [Y/n]: y\r\nAmazon S3 File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\r\nXLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with GDR support? [y/N]: y\r\nGDR support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with VERBS support? [y/N]: y\r\nVERBS support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: n\r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: n\r\nNo CUDA support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: n\r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\n\r\n\r\nAdd \"--config=mkl\" to your bazel command to build with MKL support.\r\nPlease note that MKL on MacOS or windows is still not supported.\r\nIf you would like to use a local MKL instead of downloading, please set the environment variable \"TF_MKL_ROOT\" every time before build.\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: n\r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nConfiguration finished"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/comments/299781872", "html_url": "https://github.com/tensorflow/tensorflow/issues/9125#issuecomment-299781872", "issue_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/9125", "id": 299781872, "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTc4MTg3Mg==", "user": {"login": "jaiabhayk", "id": 7273893, "node_id": "MDQ6VXNlcjcyNzM4OTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/7273893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaiabhayk", "html_url": "https://github.com/jaiabhayk", "followers_url": "https://api.github.com/users/jaiabhayk/followers", "following_url": "https://api.github.com/users/jaiabhayk/following{/other_user}", "gists_url": "https://api.github.com/users/jaiabhayk/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaiabhayk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaiabhayk/subscriptions", "organizations_url": "https://api.github.com/users/jaiabhayk/orgs", "repos_url": "https://api.github.com/users/jaiabhayk/repos", "events_url": "https://api.github.com/users/jaiabhayk/events{/privacy}", "received_events_url": "https://api.github.com/users/jaiabhayk/received_events", "type": "User", "site_admin": false}, "created_at": "2017-05-08T06:15:00Z", "updated_at": "2017-05-08T06:17:08Z", "author_association": "NONE", "body_html": "<p>The similar issue still persist when variable is matix:-</p>\n<p>import tensorflow as tf<br>\ngraph_replace = tf.contrib.graph_editor.graph_replace<br>\nw = tf.Variable(tf.zeros([784, 784]),name=\"w\")<br>\ny = tf. matmul(tf.matmul(w, w, name=\"mul1\"), w, name=\"mul2\")<br>\ng = tf.gradients(y, w)[0]<br>\ng_new = graph_replace(g, {w.value(): g})</p>\n<p>Traceback (most recent call last):<br>\nFile \"/scratch0/username/Users/Jaiusername/Documents/Study/research/pytorchExamples/GAN/keras-adversarial/examples/testKeyErrorFailure.py\", line 9, in <br>\ng_new = graph_replace(g, {w.value(): g})<br>\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 655, in graph_replace<br>\nops, replacement_ts, None, dst_scope, src_scope, reuse_dst_scope)<br>\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 617, in copy_with_input_replacements<br>\nsgv, dst_graph, dst_scope, src_scope, reuse_dst_scope=reuse_dst_scope)<br>\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 434, in <strong>call</strong><br>\nself.<em>copy_ops(info)<br>\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 447, in <em>copy_ops<br>\nop</em>, op_outputs</em> = self.transform_op_handler(info, op)<br>\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 171, in copy_op_handler<br>\noriginal_op = info.transform_original_op_handler(info, op._original_op)<br>\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 124, in transform_op_if_inside_handler<br>\nreturn info.transformed_ops[op]<br>\nKeyError: &lt;tf.Operation 'mul1' type=MatMul&gt;</p>\n<p>Process finished with exit code 1</p>", "body_text": "The similar issue still persist when variable is matix:-\nimport tensorflow as tf\ngraph_replace = tf.contrib.graph_editor.graph_replace\nw = tf.Variable(tf.zeros([784, 784]),name=\"w\")\ny = tf. matmul(tf.matmul(w, w, name=\"mul1\"), w, name=\"mul2\")\ng = tf.gradients(y, w)[0]\ng_new = graph_replace(g, {w.value(): g})\nTraceback (most recent call last):\nFile \"/scratch0/username/Users/Jaiusername/Documents/Study/research/pytorchExamples/GAN/keras-adversarial/examples/testKeyErrorFailure.py\", line 9, in \ng_new = graph_replace(g, {w.value(): g})\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 655, in graph_replace\nops, replacement_ts, None, dst_scope, src_scope, reuse_dst_scope)\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 617, in copy_with_input_replacements\nsgv, dst_graph, dst_scope, src_scope, reuse_dst_scope=reuse_dst_scope)\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 434, in call\nself.copy_ops(info)\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 447, in copy_ops\nop, op_outputs = self.transform_op_handler(info, op)\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 171, in copy_op_handler\noriginal_op = info.transform_original_op_handler(info, op._original_op)\nFile \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 124, in transform_op_if_inside_handler\nreturn info.transformed_ops[op]\nKeyError: <tf.Operation 'mul1' type=MatMul>\nProcess finished with exit code 1", "body": "The similar issue still persist when variable is matix:-\r\n\r\nimport tensorflow as tf\r\ngraph_replace = tf.contrib.graph_editor.graph_replace\r\nw = tf.Variable(tf.zeros([784, 784]),name=\"w\")\r\ny = tf. matmul(tf.matmul(w, w, name=\"mul1\"), w, name=\"mul2\")\r\ng = tf.gradients(y, w)[0]\r\ng_new = graph_replace(g, {w.value(): g})\r\n\r\n\r\nTraceback (most recent call last):\r\n File \"/scratch0/username/Users/Jaiusername/Documents/Study/research/pytorchExamples/GAN/keras-adversarial/examples/testKeyErrorFailure.py\", line 9, in <module>\r\n    g_new = graph_replace(g, {w.value(): g})\r\n  File \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 655, in graph_replace\r\n    ops, replacement_ts, None, dst_scope, src_scope, reuse_dst_scope)\r\n  File \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 617, in copy_with_input_replacements\r\n    sgv, dst_graph, dst_scope, src_scope, reuse_dst_scope=reuse_dst_scope)\r\n  File \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 434, in __call__\r\n    self._copy_ops(info)\r\n  File \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 447, in _copy_ops\r\n    op_, op_outputs_ = self.transform_op_handler(info, op)\r\n  File \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 171, in copy_op_handler\r\n    original_op = info.transform_original_op_handler(info, op._original_op)\r\n  File \"/scratch0/username/installs/tensorflow/lib/python2.7/site-packages/tensorflow/contrib/graph_editor/transform.py\", line 124, in transform_op_if_inside_handler\r\n    return info.transformed_ops[op]\r\nKeyError: <tf.Operation 'mul1' type=MatMul>\r\n\r\nProcess finished with exit code 1\r\n\r\n\r\n"}
{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5617", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5617/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5617/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/5617/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/5617", "id": 189352378, "node_id": "MDU6SXNzdWUxODkzNTIzNzg=", "number": 5617, "title": "Compile build error tensorflow/tools/pip_package", "user": {"login": "TatsujiNakayama", "id": 11674961, "node_id": "MDQ6VXNlcjExNjc0OTYx", "avatar_url": "https://avatars1.githubusercontent.com/u/11674961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TatsujiNakayama", "html_url": "https://github.com/TatsujiNakayama", "followers_url": "https://api.github.com/users/TatsujiNakayama/followers", "following_url": "https://api.github.com/users/TatsujiNakayama/following{/other_user}", "gists_url": "https://api.github.com/users/TatsujiNakayama/gists{/gist_id}", "starred_url": "https://api.github.com/users/TatsujiNakayama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TatsujiNakayama/subscriptions", "organizations_url": "https://api.github.com/users/TatsujiNakayama/orgs", "repos_url": "https://api.github.com/users/TatsujiNakayama/repos", "events_url": "https://api.github.com/users/TatsujiNakayama/events{/privacy}", "received_events_url": "https://api.github.com/users/TatsujiNakayama/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-11-15T10:20:40Z", "updated_at": "2016-11-16T06:38:33Z", "closed_at": "2016-11-16T06:38:33Z", "author_association": "NONE", "body_html": "<p>Hi<br>\nWhen I tried<br>\n<code>bazel build -c opt --config=cuda --local_resources 2048,.5,1.0 //tensorflow/tools/pip_package:build_pip_package</code></p>\n<p>, I see the following error:</p>\n<pre lang=\"INFO:\" data-meta=\"Found 1 target...\"><code>ERROR: /XXXXX/tensorflow/python/BUILD:1926:1: Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 396 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nclang: warning: argument unused during compilation: '-pthread'\nduplicate symbol __Z14tf_git_versionv in:\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libframework_internal.pic.lo(version_info.pic.o)\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libversion_lib.pic.a(version_info.pic.o)\nduplicate symbol __Z19tf_compiler_versionv in:\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libframework_internal.pic.lo(version_info.pic.o)\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libversion_lib.pic.a(version_info.pic.o)\nld: 2 duplicate symbols for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nERROR: /XXXX/tensorflow/tensorflow/tools/pip_package/BUILD:81:1 Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 396 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nINFO: Elapsed time: 2.094s, Critical Path: 1.50s\n</code></pre>\n<p>following bazel version:</p>\n<pre><code>Build label: 0.4.0-homebrew\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Nov 2 19:15:37 2016 (1478114137)\nBuild timestamp: 1478114137\nBuild timestamp as int: 1478114137```\n</code></pre>", "body_text": "Hi\nWhen I tried\nbazel build -c opt --config=cuda --local_resources 2048,.5,1.0 //tensorflow/tools/pip_package:build_pip_package\n, I see the following error:\nERROR: /XXXXX/tensorflow/python/BUILD:1926:1: Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 396 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nclang: warning: argument unused during compilation: '-pthread'\nduplicate symbol __Z14tf_git_versionv in:\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libframework_internal.pic.lo(version_info.pic.o)\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libversion_lib.pic.a(version_info.pic.o)\nduplicate symbol __Z19tf_compiler_versionv in:\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libframework_internal.pic.lo(version_info.pic.o)\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libversion_lib.pic.a(version_info.pic.o)\nld: 2 duplicate symbols for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nERROR: /XXXX/tensorflow/tensorflow/tools/pip_package/BUILD:81:1 Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 396 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\nINFO: Elapsed time: 2.094s, Critical Path: 1.50s\n\nfollowing bazel version:\nBuild label: 0.4.0-homebrew\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Wed Nov 2 19:15:37 2016 (1478114137)\nBuild timestamp: 1478114137\nBuild timestamp as int: 1478114137```", "body": "Hi\r\nWhen I tried \r\n```bazel build -c opt --config=cuda --local_resources 2048,.5,1.0 //tensorflow/tools/pip_package:build_pip_package```\r\n\r\n, I see the following error:\r\n```INFO: Found 1 target...\r\nERROR: /XXXXX/tensorflow/python/BUILD:1926:1: Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 396 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\nclang: warning: argument unused during compilation: '-pthread'\r\nduplicate symbol __Z14tf_git_versionv in:\r\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libframework_internal.pic.lo(version_info.pic.o)\r\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libversion_lib.pic.a(version_info.pic.o)\r\nduplicate symbol __Z19tf_compiler_versionv in:\r\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libframework_internal.pic.lo(version_info.pic.o)\r\n    bazel-out/local_darwin-py3-opt/bin/tensorflow/core/libversion_lib.pic.a(version_info.pic.o)\r\nld: 2 duplicate symbols for architecture x86_64\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: /XXXX/tensorflow/tensorflow/tools/pip_package/BUILD:81:1 Linking of rule '//tensorflow/python:_pywrap_tensorflow.so' failed: link_dynamic_library.sh failed: error executing command external/bazel_tools/tools/cpp/link_dynamic_library.sh no ignored ignored ignored external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o ... (remaining 396 argument(s) skipped): com.google.devtools.build.lib.shell.BadExitStatusException: Process exited with status 1.\r\nINFO: Elapsed time: 2.094s, Critical Path: 1.50s\r\n```\r\n\r\nfollowing bazel version:\r\n\r\n```\r\nBuild label: 0.4.0-homebrew\r\nBuild target: bazel-out/local-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed Nov 2 19:15:37 2016 (1478114137)\r\nBuild timestamp: 1478114137\r\nBuild timestamp as int: 1478114137```"}